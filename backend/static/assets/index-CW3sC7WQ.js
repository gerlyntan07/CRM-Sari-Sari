function rne(e,t){for(var a=0;a<t.length;a++){const s=t[a];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in e)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function a(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=a(r);fetch(r.href,i)}})();function Hi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var rS={exports:{}},Yh={};var AM;function ine(){if(AM)return Yh;AM=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function a(s,r,i){var o=null;if(i!==void 0&&(o=""+i),r.key!==void 0&&(o=""+r.key),"key"in r){i={};for(var l in r)l!=="key"&&(i[l]=r[l])}else i=r;return r=i.ref,{$$typeof:e,type:s,key:o,ref:r!==void 0?r:null,props:i}}return Yh.Fragment=t,Yh.jsx=a,Yh.jsxs=a,Yh}var TM;function one(){return TM||(TM=1,rS.exports=ine()),rS.exports}var n=one(),iS={exports:{}},Yt={};var EM;function lne(){if(EM)return Yt;EM=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),p=Symbol.iterator;function x(J){return J===null||typeof J!="object"?null:(J=p&&J[p]||J["@@iterator"],typeof J=="function"?J:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,b={};function C(J,F,Ne){this.props=J,this.context=F,this.refs=b,this.updater=Ne||v}C.prototype.isReactComponent={},C.prototype.setState=function(J,F){if(typeof J!="object"&&typeof J!="function"&&J!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,J,F,"setState")},C.prototype.forceUpdate=function(J){this.updater.enqueueForceUpdate(this,J,"forceUpdate")};function w(){}w.prototype=C.prototype;function S(J,F,Ne){this.props=J,this.context=F,this.refs=b,this.updater=Ne||v}var E=S.prototype=new w;E.constructor=S,N(E,C.prototype),E.isPureReactComponent=!0;var k=Array.isArray;function A(){}var T={H:null,A:null,T:null,S:null},_=Object.prototype.hasOwnProperty;function I(J,F,Ne){var re=Ne.ref;return{$$typeof:e,type:J,key:F,ref:re!==void 0?re:null,props:Ne}}function R(J,F){return I(J.type,F,J.props)}function U(J){return typeof J=="object"&&J!==null&&J.$$typeof===e}function D(J){var F={"=":"=0",":":"=2"};return"$"+J.replace(/[=:]/g,function(Ne){return F[Ne]})}var M=/\/+/g;function W(J,F){return typeof J=="object"&&J!==null&&J.key!=null?D(""+J.key):F.toString(36)}function X(J){switch(J.status){case"fulfilled":return J.value;case"rejected":throw J.reason;default:switch(typeof J.status=="string"?J.then(A,A):(J.status="pending",J.then(function(F){J.status==="pending"&&(J.status="fulfilled",J.value=F)},function(F){J.status==="pending"&&(J.status="rejected",J.reason=F)})),J.status){case"fulfilled":return J.value;case"rejected":throw J.reason}}throw J}function z(J,F,Ne,re,he){var je=typeof J;(je==="undefined"||je==="boolean")&&(J=null);var De=!1;if(J===null)De=!0;else switch(je){case"bigint":case"string":case"number":De=!0;break;case"object":switch(J.$$typeof){case e:case t:De=!0;break;case u:return De=J._init,z(De(J._payload),F,Ne,re,he)}}if(De)return he=he(J),De=re===""?"."+W(J,0):re,k(he)?(Ne="",De!=null&&(Ne=De.replace(M,"$&/")+"/"),z(he,F,Ne,"",function(Be){return Be})):he!=null&&(U(he)&&(he=R(he,Ne+(he.key==null||J&&J.key===he.key?"":(""+he.key).replace(M,"$&/")+"/")+De)),F.push(he)),1;De=0;var Me=re===""?".":re+":";if(k(J))for(var ve=0;ve<J.length;ve++)re=J[ve],je=Me+W(re,ve),De+=z(re,F,Ne,je,he);else if(ve=x(J),typeof ve=="function")for(J=ve.call(J),ve=0;!(re=J.next()).done;)re=re.value,je=Me+W(re,ve++),De+=z(re,F,Ne,je,he);else if(je==="object"){if(typeof J.then=="function")return z(X(J),F,Ne,re,he);throw F=String(J),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(J).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return De}function Q(J,F,Ne){if(J==null)return J;var re=[],he=0;return z(J,re,"","",function(je){return F.call(Ne,je,he++)}),re}function de(J){if(J._status===-1){var F=J._result;F=F(),F.then(function(Ne){(J._status===0||J._status===-1)&&(J._status=1,J._result=Ne)},function(Ne){(J._status===0||J._status===-1)&&(J._status=2,J._result=Ne)}),J._status===-1&&(J._status=0,J._result=F)}if(J._status===1)return J._result.default;throw J._result}var Y=typeof reportError=="function"?reportError:function(J){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof J=="object"&&J!==null&&typeof J.message=="string"?String(J.message):String(J),error:J});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",J);return}console.error(J)},se={map:Q,forEach:function(J,F,Ne){Q(J,function(){F.apply(this,arguments)},Ne)},count:function(J){var F=0;return Q(J,function(){F++}),F},toArray:function(J){return Q(J,function(F){return F})||[]},only:function(J){if(!U(J))throw Error("React.Children.only expected to receive a single React element child.");return J}};return Yt.Activity=f,Yt.Children=se,Yt.Component=C,Yt.Fragment=a,Yt.Profiler=r,Yt.PureComponent=S,Yt.StrictMode=s,Yt.Suspense=c,Yt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,Yt.__COMPILER_RUNTIME={__proto__:null,c:function(J){return T.H.useMemoCache(J)}},Yt.cache=function(J){return function(){return J.apply(null,arguments)}},Yt.cacheSignal=function(){return null},Yt.cloneElement=function(J,F,Ne){if(J==null)throw Error("The argument must be a React element, but you passed "+J+".");var re=N({},J.props),he=J.key;if(F!=null)for(je in F.key!==void 0&&(he=""+F.key),F)!_.call(F,je)||je==="key"||je==="__self"||je==="__source"||je==="ref"&&F.ref===void 0||(re[je]=F[je]);var je=arguments.length-2;if(je===1)re.children=Ne;else if(1<je){for(var De=Array(je),Me=0;Me<je;Me++)De[Me]=arguments[Me+2];re.children=De}return I(J.type,he,re)},Yt.createContext=function(J){return J={$$typeof:o,_currentValue:J,_currentValue2:J,_threadCount:0,Provider:null,Consumer:null},J.Provider=J,J.Consumer={$$typeof:i,_context:J},J},Yt.createElement=function(J,F,Ne){var re,he={},je=null;if(F!=null)for(re in F.key!==void 0&&(je=""+F.key),F)_.call(F,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(he[re]=F[re]);var De=arguments.length-2;if(De===1)he.children=Ne;else if(1<De){for(var Me=Array(De),ve=0;ve<De;ve++)Me[ve]=arguments[ve+2];he.children=Me}if(J&&J.defaultProps)for(re in De=J.defaultProps,De)he[re]===void 0&&(he[re]=De[re]);return I(J,je,he)},Yt.createRef=function(){return{current:null}},Yt.forwardRef=function(J){return{$$typeof:l,render:J}},Yt.isValidElement=U,Yt.lazy=function(J){return{$$typeof:u,_payload:{_status:-1,_result:J},_init:de}},Yt.memo=function(J,F){return{$$typeof:d,type:J,compare:F===void 0?null:F}},Yt.startTransition=function(J){var F=T.T,Ne={};T.T=Ne;try{var re=J(),he=T.S;he!==null&&he(Ne,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(A,Y)}catch(je){Y(je)}finally{F!==null&&Ne.types!==null&&(F.types=Ne.types),T.T=F}},Yt.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},Yt.use=function(J){return T.H.use(J)},Yt.useActionState=function(J,F,Ne){return T.H.useActionState(J,F,Ne)},Yt.useCallback=function(J,F){return T.H.useCallback(J,F)},Yt.useContext=function(J){return T.H.useContext(J)},Yt.useDebugValue=function(){},Yt.useDeferredValue=function(J,F){return T.H.useDeferredValue(J,F)},Yt.useEffect=function(J,F){return T.H.useEffect(J,F)},Yt.useEffectEvent=function(J){return T.H.useEffectEvent(J)},Yt.useId=function(){return T.H.useId()},Yt.useImperativeHandle=function(J,F,Ne){return T.H.useImperativeHandle(J,F,Ne)},Yt.useInsertionEffect=function(J,F){return T.H.useInsertionEffect(J,F)},Yt.useLayoutEffect=function(J,F){return T.H.useLayoutEffect(J,F)},Yt.useMemo=function(J,F){return T.H.useMemo(J,F)},Yt.useOptimistic=function(J,F){return T.H.useOptimistic(J,F)},Yt.useReducer=function(J,F,Ne){return T.H.useReducer(J,F,Ne)},Yt.useRef=function(J){return T.H.useRef(J)},Yt.useState=function(J){return T.H.useState(J)},Yt.useSyncExternalStore=function(J,F,Ne){return T.H.useSyncExternalStore(J,F,Ne)},Yt.useTransition=function(){return T.H.useTransition()},Yt.version="19.2.0",Yt}var kM;function Df(){return kM||(kM=1,iS.exports=lne()),iS.exports}var h=Df();const pt=Hi(h),pu=rne({__proto__:null,default:pt},[h]);var oS={exports:{}},Qh={},lS={exports:{}},cS={};var LM;function cne(){return LM||(LM=1,(function(e){function t(z,Q){var de=z.length;z.push(Q);e:for(;0<de;){var Y=de-1>>>1,se=z[Y];if(0<r(se,Q))z[Y]=Q,z[de]=se,de=Y;else break e}}function a(z){return z.length===0?null:z[0]}function s(z){if(z.length===0)return null;var Q=z[0],de=z.pop();if(de!==Q){z[0]=de;e:for(var Y=0,se=z.length,J=se>>>1;Y<J;){var F=2*(Y+1)-1,Ne=z[F],re=F+1,he=z[re];if(0>r(Ne,de))re<se&&0>r(he,Ne)?(z[Y]=he,z[re]=de,Y=re):(z[Y]=Ne,z[F]=de,Y=F);else if(re<se&&0>r(he,de))z[Y]=he,z[re]=de,Y=re;else break e}}return Q}function r(z,Q){var de=z.sortIndex-Q.sortIndex;return de!==0?de:z.id-Q.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,f=null,p=3,x=!1,v=!1,N=!1,b=!1,C=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function E(z){for(var Q=a(d);Q!==null;){if(Q.callback===null)s(d);else if(Q.startTime<=z)s(d),Q.sortIndex=Q.expirationTime,t(c,Q);else break;Q=a(d)}}function k(z){if(N=!1,E(z),!v)if(a(c)!==null)v=!0,A||(A=!0,D());else{var Q=a(d);Q!==null&&X(k,Q.startTime-z)}}var A=!1,T=-1,_=5,I=-1;function R(){return b?!0:!(e.unstable_now()-I<_)}function U(){if(b=!1,A){var z=e.unstable_now();I=z;var Q=!0;try{e:{v=!1,N&&(N=!1,w(T),T=-1),x=!0;var de=p;try{t:{for(E(z),f=a(c);f!==null&&!(f.expirationTime>z&&R());){var Y=f.callback;if(typeof Y=="function"){f.callback=null,p=f.priorityLevel;var se=Y(f.expirationTime<=z);if(z=e.unstable_now(),typeof se=="function"){f.callback=se,E(z),Q=!0;break t}f===a(c)&&s(c),E(z)}else s(c);f=a(c)}if(f!==null)Q=!0;else{var J=a(d);J!==null&&X(k,J.startTime-z),Q=!1}}break e}finally{f=null,p=de,x=!1}Q=void 0}}finally{Q?D():A=!1}}}var D;if(typeof S=="function")D=function(){S(U)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,W=M.port2;M.port1.onmessage=U,D=function(){W.postMessage(null)}}else D=function(){C(U,0)};function X(z,Q){T=C(function(){z(e.unstable_now())},Q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(z){switch(p){case 1:case 2:case 3:var Q=3;break;default:Q=p}var de=p;p=Q;try{return z()}finally{p=de}},e.unstable_requestPaint=function(){b=!0},e.unstable_runWithPriority=function(z,Q){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var de=p;p=z;try{return Q()}finally{p=de}},e.unstable_scheduleCallback=function(z,Q,de){var Y=e.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?Y+de:Y):de=Y,z){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=de+se,z={id:u++,callback:Q,priorityLevel:z,startTime:de,expirationTime:se,sortIndex:-1},de>Y?(z.sortIndex=de,t(d,z),a(c)===null&&z===a(d)&&(N?(w(T),T=-1):N=!0,X(k,de-Y))):(z.sortIndex=se,t(c,z),v||x||(v=!0,A||(A=!0,D()))),z},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(z){var Q=p;return function(){var de=p;p=Q;try{return z.apply(this,arguments)}finally{p=de}}}})(cS)),cS}var PM;function dne(){return PM||(PM=1,lS.exports=cne()),lS.exports}var dS={exports:{}},Ns={};var DM;function une(){if(DM)return Ns;DM=1;var e=Df();function t(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)d+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var s={d:{f:a,r:function(){throw Error(t(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},r=Symbol.for("react.portal");function i(c,d,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:f==null?null:""+f,children:c,containerInfo:d,implementation:u}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,d){if(c==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Ns.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ns.createPortal=function(c,d){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return i(c,d,null,u)},Ns.flushSync=function(c){var d=o.T,u=s.p;try{if(o.T=null,s.p=2,c)return c()}finally{o.T=d,s.p=u,s.d.f()}},Ns.preconnect=function(c,d){typeof c=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,s.d.C(c,d))},Ns.prefetchDNS=function(c){typeof c=="string"&&s.d.D(c)},Ns.preinit=function(c,d){if(typeof c=="string"&&d&&typeof d.as=="string"){var u=d.as,f=l(u,d.crossOrigin),p=typeof d.integrity=="string"?d.integrity:void 0,x=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;u==="style"?s.d.S(c,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:f,integrity:p,fetchPriority:x}):u==="script"&&s.d.X(c,{crossOrigin:f,integrity:p,fetchPriority:x,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Ns.preinitModule=function(c,d){if(typeof c=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var u=l(d.as,d.crossOrigin);s.d.M(c,{crossOrigin:u,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&s.d.M(c)},Ns.preload=function(c,d){if(typeof c=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var u=d.as,f=l(u,d.crossOrigin);s.d.L(c,u,{crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Ns.preloadModule=function(c,d){if(typeof c=="string")if(d){var u=l(d.as,d.crossOrigin);s.d.m(c,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:u,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else s.d.m(c)},Ns.requestFormReset=function(c){s.d.r(c)},Ns.unstable_batchedUpdates=function(c,d){return c(d)},Ns.useFormState=function(c,d,u){return o.H.useFormState(c,d,u)},Ns.useFormStatus=function(){return o.H.useHostTransitionStatus()},Ns.version="19.2.0",Ns}var OM;function FB(){if(OM)return dS.exports;OM=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),dS.exports=une(),dS.exports}var MM;function mne(){if(MM)return Qh;MM=1;var e=dne(),t=Df(),a=FB();function s(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)}function i(m){var g=m,y=m;if(m.alternate)for(;g.return;)g=g.return;else{m=g;do g=m,(g.flags&4098)!==0&&(y=g.return),m=g.return;while(m)}return g.tag===3?y:null}function o(m){if(m.tag===13){var g=m.memoizedState;if(g===null&&(m=m.alternate,m!==null&&(g=m.memoizedState)),g!==null)return g.dehydrated}return null}function l(m){if(m.tag===31){var g=m.memoizedState;if(g===null&&(m=m.alternate,m!==null&&(g=m.memoizedState)),g!==null)return g.dehydrated}return null}function c(m){if(i(m)!==m)throw Error(s(188))}function d(m){var g=m.alternate;if(!g){if(g=i(m),g===null)throw Error(s(188));return g!==m?null:m}for(var y=m,j=g;;){var P=y.return;if(P===null)break;var O=P.alternate;if(O===null){if(j=P.return,j!==null){y=j;continue}break}if(P.child===O.child){for(O=P.child;O;){if(O===y)return c(P),m;if(O===j)return c(P),g;O=O.sibling}throw Error(s(188))}if(y.return!==j.return)y=P,j=O;else{for(var K=!1,Ce=P.child;Ce;){if(Ce===y){K=!0,y=P,j=O;break}if(Ce===j){K=!0,j=P,y=O;break}Ce=Ce.sibling}if(!K){for(Ce=O.child;Ce;){if(Ce===y){K=!0,y=O,j=P;break}if(Ce===j){K=!0,j=O,y=P;break}Ce=Ce.sibling}if(!K)throw Error(s(189))}}if(y.alternate!==j)throw Error(s(190))}if(y.tag!==3)throw Error(s(188));return y.stateNode.current===y?m:g}function u(m){var g=m.tag;if(g===5||g===26||g===27||g===6)return m;for(m=m.child;m!==null;){if(g=u(m),g!==null)return g;m=m.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),w=Symbol.for("react.consumer"),S=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),R=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function D(m){return m===null||typeof m!="object"?null:(m=U&&m[U]||m["@@iterator"],typeof m=="function"?m:null)}var M=Symbol.for("react.client.reference");function W(m){if(m==null)return null;if(typeof m=="function")return m.$$typeof===M?null:m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case N:return"Fragment";case C:return"Profiler";case b:return"StrictMode";case k:return"Suspense";case A:return"SuspenseList";case I:return"Activity"}if(typeof m=="object")switch(m.$$typeof){case v:return"Portal";case S:return m.displayName||"Context";case w:return(m._context.displayName||"Context")+".Consumer";case E:var g=m.render;return m=m.displayName,m||(m=g.displayName||g.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case T:return g=m.displayName||null,g!==null?g:W(m.type)||"Memo";case _:g=m._payload,m=m._init;try{return W(m(g))}catch{}}return null}var X=Array.isArray,z=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},Y=[],se=-1;function J(m){return{current:m}}function F(m){0>se||(m.current=Y[se],Y[se]=null,se--)}function Ne(m,g){se++,Y[se]=m.current,m.current=g}var re=J(null),he=J(null),je=J(null),De=J(null);function Me(m,g){switch(Ne(je,g),Ne(he,m),Ne(re,null),g.nodeType){case 9:case 11:m=(m=g.documentElement)&&(m=m.namespaceURI)?K5(m):0;break;default:if(m=g.tagName,g=g.namespaceURI)g=K5(g),m=X5(g,m);else switch(m){case"svg":m=1;break;case"math":m=2;break;default:m=0}}F(re),Ne(re,m)}function ve(){F(re),F(he),F(je)}function Be(m){m.memoizedState!==null&&Ne(De,m);var g=re.current,y=X5(g,m.type);g!==y&&(Ne(he,m),Ne(re,y))}function ke(m){he.current===m&&(F(re),F(he)),De.current===m&&(F(De),Gh._currentValue=de)}var fe,ne;function Ae(m){if(fe===void 0)try{throw Error()}catch(y){var g=y.stack.trim().match(/\n( *(at )?)/);fe=g&&g[1]||"",ne=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fe+m+ne}var ye=!1;function Ie(m,g){if(!m||ye)return"";ye=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var j={DetermineComponentFrameRoot:function(){try{if(g){var ht=function(){throw Error()};if(Object.defineProperty(ht.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ht,[])}catch(lt){var st=lt}Reflect.construct(m,[],ht)}else{try{ht.call()}catch(lt){st=lt}m.call(ht.prototype)}}else{try{throw Error()}catch(lt){st=lt}(ht=m())&&typeof ht.catch=="function"&&ht.catch(function(){})}}catch(lt){if(lt&&st&&typeof lt.stack=="string")return[lt.stack,st.stack]}return[null,null]}};j.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var P=Object.getOwnPropertyDescriptor(j.DetermineComponentFrameRoot,"name");P&&P.configurable&&Object.defineProperty(j.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var O=j.DetermineComponentFrameRoot(),K=O[0],Ce=O[1];if(K&&Ce){var ze=K.split(`
`),tt=Ce.split(`
`);for(P=j=0;j<ze.length&&!ze[j].includes("DetermineComponentFrameRoot");)j++;for(;P<tt.length&&!tt[P].includes("DetermineComponentFrameRoot");)P++;if(j===ze.length||P===tt.length)for(j=ze.length-1,P=tt.length-1;1<=j&&0<=P&&ze[j]!==tt[P];)P--;for(;1<=j&&0<=P;j--,P--)if(ze[j]!==tt[P]){if(j!==1||P!==1)do if(j--,P--,0>P||ze[j]!==tt[P]){var ct=`
`+ze[j].replace(" at new "," at ");return m.displayName&&ct.includes("<anonymous>")&&(ct=ct.replace("<anonymous>",m.displayName)),ct}while(1<=j&&0<=P);break}}}finally{ye=!1,Error.prepareStackTrace=y}return(y=m?m.displayName||m.name:"")?Ae(y):""}function Ve(m,g){switch(m.tag){case 26:case 27:case 5:return Ae(m.type);case 16:return Ae("Lazy");case 13:return m.child!==g&&g!==null?Ae("Suspense Fallback"):Ae("Suspense");case 19:return Ae("SuspenseList");case 0:case 15:return Ie(m.type,!1);case 11:return Ie(m.type.render,!1);case 1:return Ie(m.type,!0);case 31:return Ae("Activity");default:return""}}function Te(m){try{var g="",y=null;do g+=Ve(m,y),y=m,m=m.return;while(m);return g}catch(j){return`
Error generating stack: `+j.message+`
`+j.stack}}var Fe=Object.prototype.hasOwnProperty,Ye=e.unstable_scheduleCallback,B=e.unstable_cancelCallback,xe=e.unstable_shouldYield,_e=e.unstable_requestPaint,ce=e.unstable_now,Ee=e.unstable_getCurrentPriorityLevel,ae=e.unstable_ImmediatePriority,He=e.unstable_UserBlockingPriority,Re=e.unstable_NormalPriority,it=e.unstable_LowPriority,mt=e.unstable_IdlePriority,ee=e.log,pe=e.unstable_setDisableYieldValue,Ue=null,Ze=null;function nt(m){if(typeof ee=="function"&&pe(m),Ze&&typeof Ze.setStrictMode=="function")try{Ze.setStrictMode(Ue,m)}catch{}}var Je=Math.clz32?Math.clz32:Ke,Oe=Math.log,ge=Math.LN2;function Ke(m){return m>>>=0,m===0?32:31-(Oe(m)/ge|0)|0}var G=256,$=262144,V=4194304;function te(m){var g=m&42;if(g!==0)return g;switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return m&261888;case 262144:case 524288:case 1048576:case 2097152:return m&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return m&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return m}}function Z(m,g,y){var j=m.pendingLanes;if(j===0)return 0;var P=0,O=m.suspendedLanes,K=m.pingedLanes;m=m.warmLanes;var Ce=j&134217727;return Ce!==0?(j=Ce&~O,j!==0?P=te(j):(K&=Ce,K!==0?P=te(K):y||(y=Ce&~m,y!==0&&(P=te(y))))):(Ce=j&~O,Ce!==0?P=te(Ce):K!==0?P=te(K):y||(y=j&~m,y!==0&&(P=te(y)))),P===0?0:g!==0&&g!==P&&(g&O)===0&&(O=P&-P,y=g&-g,O>=y||O===32&&(y&4194048)!==0)?g:P}function Se(m,g){return(m.pendingLanes&~(m.suspendedLanes&~m.pingedLanes)&g)===0}function me(m,g){switch(m){case 1:case 2:case 4:case 8:case 64:return g+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ue(){var m=V;return V<<=1,(V&62914560)===0&&(V=4194304),m}function $e(m){for(var g=[],y=0;31>y;y++)g.push(m);return g}function be(m,g){m.pendingLanes|=g,g!==268435456&&(m.suspendedLanes=0,m.pingedLanes=0,m.warmLanes=0)}function We(m,g,y,j,P,O){var K=m.pendingLanes;m.pendingLanes=y,m.suspendedLanes=0,m.pingedLanes=0,m.warmLanes=0,m.expiredLanes&=y,m.entangledLanes&=y,m.errorRecoveryDisabledLanes&=y,m.shellSuspendCounter=0;var Ce=m.entanglements,ze=m.expirationTimes,tt=m.hiddenUpdates;for(y=K&~y;0<y;){var ct=31-Je(y),ht=1<<ct;Ce[ct]=0,ze[ct]=-1;var st=tt[ct];if(st!==null)for(tt[ct]=null,ct=0;ct<st.length;ct++){var lt=st[ct];lt!==null&&(lt.lane&=-536870913)}y&=~ht}j!==0&&ft(m,j,0),O!==0&&P===0&&m.tag!==0&&(m.suspendedLanes|=O&~(K&~g))}function ft(m,g,y){m.pendingLanes|=g,m.suspendedLanes&=~g;var j=31-Je(g);m.entangledLanes|=g,m.entanglements[j]=m.entanglements[j]|1073741824|y&261930}function yt(m,g){var y=m.entangledLanes|=g;for(m=m.entanglements;y;){var j=31-Je(y),P=1<<j;P&g|m[j]&g&&(m[j]|=g),y&=~P}}function Tt(m,g){var y=g&-g;return y=(y&42)!==0?1:Et(y),(y&(m.suspendedLanes|g))!==0?0:y}function Et(m){switch(m){case 2:m=1;break;case 8:m=4;break;case 32:m=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:m=128;break;case 268435456:m=134217728;break;default:m=0}return m}function Gt(m){return m&=-m,2<m?8<m?(m&134217727)!==0?32:268435456:8:2}function oe(){var m=Q.p;return m!==0?m:(m=window.event,m===void 0?32:vM(m.type))}function rt(m,g){var y=Q.p;try{return Q.p=m,g()}finally{Q.p=y}}var _t=Math.random().toString(36).slice(2),Nt="__reactFiber$"+_t,L="__reactProps$"+_t,H="__reactContainer$"+_t,we="__reactEvents$"+_t,Pe="__reactListeners$"+_t,le="__reactHandles$"+_t,Le="__reactResources$"+_t,Qe="__reactMarker$"+_t;function vt(m){delete m[Nt],delete m[L],delete m[we],delete m[Pe],delete m[le]}function gt(m){var g=m[Nt];if(g)return g;for(var y=m.parentNode;y;){if(g=y[H]||y[Nt]){if(y=g.alternate,g.child!==null||y!==null&&y.child!==null)for(m=sM(m);m!==null;){if(y=m[Nt])return y;m=sM(m)}return g}m=y,y=m.parentNode}return null}function Bt(m){if(m=m[Nt]||m[H]){var g=m.tag;if(g===5||g===6||g===13||g===31||g===26||g===27||g===3)return m}return null}function wn(m){var g=m.tag;if(g===5||g===26||g===27||g===6)return m.stateNode;throw Error(s(33))}function ns(m){var g=m[Le];return g||(g=m[Le]={hoistableStyles:new Map,hoistableScripts:new Map}),g}function Ua(m){m[Qe]=!0}var RD=new Set,zD={};function bd(m,g){Ku(m,g),Ku(m+"Capture",g)}function Ku(m,g){for(zD[m]=g,m=0;m<g.length;m++)RD.add(g[m])}var KJ=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),UD={},FD={};function XJ(m){return Fe.call(FD,m)?!0:Fe.call(UD,m)?!1:KJ.test(m)?FD[m]=!0:(UD[m]=!0,!1)}function s0(m,g,y){if(XJ(g))if(y===null)m.removeAttribute(g);else{switch(typeof y){case"undefined":case"function":case"symbol":m.removeAttribute(g);return;case"boolean":var j=g.toLowerCase().slice(0,5);if(j!=="data-"&&j!=="aria-"){m.removeAttribute(g);return}}m.setAttribute(g,""+y)}}function r0(m,g,y){if(y===null)m.removeAttribute(g);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":m.removeAttribute(g);return}m.setAttribute(g,""+y)}}function zo(m,g,y,j){if(j===null)m.removeAttribute(y);else{switch(typeof j){case"undefined":case"function":case"symbol":case"boolean":m.removeAttribute(y);return}m.setAttributeNS(g,y,""+j)}}function zr(m){switch(typeof m){case"bigint":case"boolean":case"number":case"string":case"undefined":return m;case"object":return m;default:return""}}function BD(m){var g=m.type;return(m=m.nodeName)&&m.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function ZJ(m,g,y){var j=Object.getOwnPropertyDescriptor(m.constructor.prototype,g);if(!m.hasOwnProperty(g)&&typeof j<"u"&&typeof j.get=="function"&&typeof j.set=="function"){var P=j.get,O=j.set;return Object.defineProperty(m,g,{configurable:!0,get:function(){return P.call(this)},set:function(K){y=""+K,O.call(this,K)}}),Object.defineProperty(m,g,{enumerable:j.enumerable}),{getValue:function(){return y},setValue:function(K){y=""+K},stopTracking:function(){m._valueTracker=null,delete m[g]}}}}function Zj(m){if(!m._valueTracker){var g=BD(m)?"checked":"value";m._valueTracker=ZJ(m,g,""+m[g])}}function HD(m){if(!m)return!1;var g=m._valueTracker;if(!g)return!0;var y=g.getValue(),j="";return m&&(j=BD(m)?m.checked?"true":"false":m.value),m=j,m!==y?(g.setValue(m),!0):!1}function i0(m){if(m=m||(typeof document<"u"?document:void 0),typeof m>"u")return null;try{return m.activeElement||m.body}catch{return m.body}}var JJ=/[\n"\\]/g;function Ur(m){return m.replace(JJ,function(g){return"\\"+g.charCodeAt(0).toString(16)+" "})}function Jj(m,g,y,j,P,O,K,Ce){m.name="",K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"?m.type=K:m.removeAttribute("type"),g!=null?K==="number"?(g===0&&m.value===""||m.value!=g)&&(m.value=""+zr(g)):m.value!==""+zr(g)&&(m.value=""+zr(g)):K!=="submit"&&K!=="reset"||m.removeAttribute("value"),g!=null?e1(m,K,zr(g)):y!=null?e1(m,K,zr(y)):j!=null&&m.removeAttribute("value"),P==null&&O!=null&&(m.defaultChecked=!!O),P!=null&&(m.checked=P&&typeof P!="function"&&typeof P!="symbol"),Ce!=null&&typeof Ce!="function"&&typeof Ce!="symbol"&&typeof Ce!="boolean"?m.name=""+zr(Ce):m.removeAttribute("name")}function GD(m,g,y,j,P,O,K,Ce){if(O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(m.type=O),g!=null||y!=null){if(!(O!=="submit"&&O!=="reset"||g!=null)){Zj(m);return}y=y!=null?""+zr(y):"",g=g!=null?""+zr(g):y,Ce||g===m.value||(m.value=g),m.defaultValue=g}j=j??P,j=typeof j!="function"&&typeof j!="symbol"&&!!j,m.checked=Ce?m.checked:!!j,m.defaultChecked=!!j,K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"&&(m.name=K),Zj(m)}function e1(m,g,y){g==="number"&&i0(m.ownerDocument)===m||m.defaultValue===""+y||(m.defaultValue=""+y)}function Xu(m,g,y,j){if(m=m.options,g){g={};for(var P=0;P<y.length;P++)g["$"+y[P]]=!0;for(y=0;y<m.length;y++)P=g.hasOwnProperty("$"+m[y].value),m[y].selected!==P&&(m[y].selected=P),P&&j&&(m[y].defaultSelected=!0)}else{for(y=""+zr(y),g=null,P=0;P<m.length;P++){if(m[P].value===y){m[P].selected=!0,j&&(m[P].defaultSelected=!0);return}g!==null||m[P].disabled||(g=m[P])}g!==null&&(g.selected=!0)}}function WD(m,g,y){if(g!=null&&(g=""+zr(g),g!==m.value&&(m.value=g),y==null)){m.defaultValue!==g&&(m.defaultValue=g);return}m.defaultValue=y!=null?""+zr(y):""}function qD(m,g,y,j){if(g==null){if(j!=null){if(y!=null)throw Error(s(92));if(X(j)){if(1<j.length)throw Error(s(93));j=j[0]}y=j}y==null&&(y=""),g=y}y=zr(g),m.defaultValue=y,j=m.textContent,j===y&&j!==""&&j!==null&&(m.value=j),Zj(m)}function Zu(m,g){if(g){var y=m.firstChild;if(y&&y===m.lastChild&&y.nodeType===3){y.nodeValue=g;return}}m.textContent=g}var eee=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function VD(m,g,y){var j=g.indexOf("--")===0;y==null||typeof y=="boolean"||y===""?j?m.setProperty(g,""):g==="float"?m.cssFloat="":m[g]="":j?m.setProperty(g,y):typeof y!="number"||y===0||eee.has(g)?g==="float"?m.cssFloat=y:m[g]=(""+y).trim():m[g]=y+"px"}function YD(m,g,y){if(g!=null&&typeof g!="object")throw Error(s(62));if(m=m.style,y!=null){for(var j in y)!y.hasOwnProperty(j)||g!=null&&g.hasOwnProperty(j)||(j.indexOf("--")===0?m.setProperty(j,""):j==="float"?m.cssFloat="":m[j]="");for(var P in g)j=g[P],g.hasOwnProperty(P)&&y[P]!==j&&VD(m,P,j)}else for(var O in g)g.hasOwnProperty(O)&&VD(m,O,g[O])}function t1(m){if(m.indexOf("-")===-1)return!1;switch(m){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tee=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),nee=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function o0(m){return nee.test(""+m)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":m}function Uo(){}var n1=null;function a1(m){return m=m.target||m.srcElement||window,m.correspondingUseElement&&(m=m.correspondingUseElement),m.nodeType===3?m.parentNode:m}var Ju=null,em=null;function QD(m){var g=Bt(m);if(g&&(m=g.stateNode)){var y=m[L]||null;e:switch(m=g.stateNode,g.type){case"input":if(Jj(m,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name),g=y.name,y.type==="radio"&&g!=null){for(y=m;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll('input[name="'+Ur(""+g)+'"][type="radio"]'),g=0;g<y.length;g++){var j=y[g];if(j!==m&&j.form===m.form){var P=j[L]||null;if(!P)throw Error(s(90));Jj(j,P.value,P.defaultValue,P.defaultValue,P.checked,P.defaultChecked,P.type,P.name)}}for(g=0;g<y.length;g++)j=y[g],j.form===m.form&&HD(j)}break e;case"textarea":WD(m,y.value,y.defaultValue);break e;case"select":g=y.value,g!=null&&Xu(m,!!y.multiple,g,!1)}}}var s1=!1;function KD(m,g,y){if(s1)return m(g,y);s1=!0;try{var j=m(g);return j}finally{if(s1=!1,(Ju!==null||em!==null)&&(Y0(),Ju&&(g=Ju,m=em,em=Ju=null,QD(g),m)))for(g=0;g<m.length;g++)QD(m[g])}}function oh(m,g){var y=m.stateNode;if(y===null)return null;var j=y[L]||null;if(j===null)return null;y=j[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(j=!j.disabled)||(m=m.type,j=!(m==="button"||m==="input"||m==="select"||m==="textarea")),m=!j;break e;default:m=!1}if(m)return null;if(y&&typeof y!="function")throw Error(s(231,g,typeof y));return y}var Fo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),r1=!1;if(Fo)try{var lh={};Object.defineProperty(lh,"passive",{get:function(){r1=!0}}),window.addEventListener("test",lh,lh),window.removeEventListener("test",lh,lh)}catch{r1=!1}var nc=null,i1=null,l0=null;function XD(){if(l0)return l0;var m,g=i1,y=g.length,j,P="value"in nc?nc.value:nc.textContent,O=P.length;for(m=0;m<y&&g[m]===P[m];m++);var K=y-m;for(j=1;j<=K&&g[y-j]===P[O-j];j++);return l0=P.slice(m,1<j?1-j:void 0)}function c0(m){var g=m.keyCode;return"charCode"in m?(m=m.charCode,m===0&&g===13&&(m=13)):m=g,m===10&&(m=13),32<=m||m===13?m:0}function d0(){return!0}function ZD(){return!1}function Ws(m){function g(y,j,P,O,K){this._reactName=y,this._targetInst=P,this.type=j,this.nativeEvent=O,this.target=K,this.currentTarget=null;for(var Ce in m)m.hasOwnProperty(Ce)&&(y=m[Ce],this[Ce]=y?y(O):O[Ce]);return this.isDefaultPrevented=(O.defaultPrevented!=null?O.defaultPrevented:O.returnValue===!1)?d0:ZD,this.isPropagationStopped=ZD,this}return f(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=d0)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=d0)},persist:function(){},isPersistent:d0}),g}var vd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(m){return m.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},u0=Ws(vd),ch=f({},vd,{view:0,detail:0}),aee=Ws(ch),o1,l1,dh,m0=f({},ch,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:d1,button:0,buttons:0,relatedTarget:function(m){return m.relatedTarget===void 0?m.fromElement===m.srcElement?m.toElement:m.fromElement:m.relatedTarget},movementX:function(m){return"movementX"in m?m.movementX:(m!==dh&&(dh&&m.type==="mousemove"?(o1=m.screenX-dh.screenX,l1=m.screenY-dh.screenY):l1=o1=0,dh=m),o1)},movementY:function(m){return"movementY"in m?m.movementY:l1}}),JD=Ws(m0),see=f({},m0,{dataTransfer:0}),ree=Ws(see),iee=f({},ch,{relatedTarget:0}),c1=Ws(iee),oee=f({},vd,{animationName:0,elapsedTime:0,pseudoElement:0}),lee=Ws(oee),cee=f({},vd,{clipboardData:function(m){return"clipboardData"in m?m.clipboardData:window.clipboardData}}),dee=Ws(cee),uee=f({},vd,{data:0}),eO=Ws(uee),mee={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fee={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hee={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gee(m){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(m):(m=hee[m])?!!g[m]:!1}function d1(){return gee}var pee=f({},ch,{key:function(m){if(m.key){var g=mee[m.key]||m.key;if(g!=="Unidentified")return g}return m.type==="keypress"?(m=c0(m),m===13?"Enter":String.fromCharCode(m)):m.type==="keydown"||m.type==="keyup"?fee[m.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:d1,charCode:function(m){return m.type==="keypress"?c0(m):0},keyCode:function(m){return m.type==="keydown"||m.type==="keyup"?m.keyCode:0},which:function(m){return m.type==="keypress"?c0(m):m.type==="keydown"||m.type==="keyup"?m.keyCode:0}}),xee=Ws(pee),yee=f({},m0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tO=Ws(yee),bee=f({},ch,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:d1}),vee=Ws(bee),wee=f({},vd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Nee=Ws(wee),jee=f({},m0,{deltaX:function(m){return"deltaX"in m?m.deltaX:"wheelDeltaX"in m?-m.wheelDeltaX:0},deltaY:function(m){return"deltaY"in m?m.deltaY:"wheelDeltaY"in m?-m.wheelDeltaY:"wheelDelta"in m?-m.wheelDelta:0},deltaZ:0,deltaMode:0}),Cee=Ws(jee),See=f({},vd,{newState:0,oldState:0}),_ee=Ws(See),Aee=[9,13,27,32],u1=Fo&&"CompositionEvent"in window,uh=null;Fo&&"documentMode"in document&&(uh=document.documentMode);var Tee=Fo&&"TextEvent"in window&&!uh,nO=Fo&&(!u1||uh&&8<uh&&11>=uh),aO=" ",sO=!1;function rO(m,g){switch(m){case"keyup":return Aee.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iO(m){return m=m.detail,typeof m=="object"&&"data"in m?m.data:null}var tm=!1;function Eee(m,g){switch(m){case"compositionend":return iO(g);case"keypress":return g.which!==32?null:(sO=!0,aO);case"textInput":return m=g.data,m===aO&&sO?null:m;default:return null}}function kee(m,g){if(tm)return m==="compositionend"||!u1&&rO(m,g)?(m=XD(),l0=i1=nc=null,tm=!1,m):null;switch(m){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return nO&&g.locale!=="ko"?null:g.data;default:return null}}var Lee={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oO(m){var g=m&&m.nodeName&&m.nodeName.toLowerCase();return g==="input"?!!Lee[m.type]:g==="textarea"}function lO(m,g,y,j){Ju?em?em.push(j):em=[j]:Ju=j,g=ty(g,"onChange"),0<g.length&&(y=new u0("onChange","change",null,y,j),m.push({event:y,listeners:g}))}var mh=null,fh=null;function Pee(m){G5(m,0)}function f0(m){var g=wn(m);if(HD(g))return m}function cO(m,g){if(m==="change")return g}var dO=!1;if(Fo){var m1;if(Fo){var f1="oninput"in document;if(!f1){var uO=document.createElement("div");uO.setAttribute("oninput","return;"),f1=typeof uO.oninput=="function"}m1=f1}else m1=!1;dO=m1&&(!document.documentMode||9<document.documentMode)}function mO(){mh&&(mh.detachEvent("onpropertychange",fO),fh=mh=null)}function fO(m){if(m.propertyName==="value"&&f0(fh)){var g=[];lO(g,fh,m,a1(m)),KD(Pee,g)}}function Dee(m,g,y){m==="focusin"?(mO(),mh=g,fh=y,mh.attachEvent("onpropertychange",fO)):m==="focusout"&&mO()}function Oee(m){if(m==="selectionchange"||m==="keyup"||m==="keydown")return f0(fh)}function Mee(m,g){if(m==="click")return f0(g)}function Iee(m,g){if(m==="input"||m==="change")return f0(g)}function $ee(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var pr=typeof Object.is=="function"?Object.is:$ee;function hh(m,g){if(pr(m,g))return!0;if(typeof m!="object"||m===null||typeof g!="object"||g===null)return!1;var y=Object.keys(m),j=Object.keys(g);if(y.length!==j.length)return!1;for(j=0;j<y.length;j++){var P=y[j];if(!Fe.call(g,P)||!pr(m[P],g[P]))return!1}return!0}function hO(m){for(;m&&m.firstChild;)m=m.firstChild;return m}function gO(m,g){var y=hO(m);m=0;for(var j;y;){if(y.nodeType===3){if(j=m+y.textContent.length,m<=g&&j>=g)return{node:y,offset:g-m};m=j}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=hO(y)}}function pO(m,g){return m&&g?m===g?!0:m&&m.nodeType===3?!1:g&&g.nodeType===3?pO(m,g.parentNode):"contains"in m?m.contains(g):m.compareDocumentPosition?!!(m.compareDocumentPosition(g)&16):!1:!1}function xO(m){m=m!=null&&m.ownerDocument!=null&&m.ownerDocument.defaultView!=null?m.ownerDocument.defaultView:window;for(var g=i0(m.document);g instanceof m.HTMLIFrameElement;){try{var y=typeof g.contentWindow.location.href=="string"}catch{y=!1}if(y)m=g.contentWindow;else break;g=i0(m.document)}return g}function h1(m){var g=m&&m.nodeName&&m.nodeName.toLowerCase();return g&&(g==="input"&&(m.type==="text"||m.type==="search"||m.type==="tel"||m.type==="url"||m.type==="password")||g==="textarea"||m.contentEditable==="true")}var Ree=Fo&&"documentMode"in document&&11>=document.documentMode,nm=null,g1=null,gh=null,p1=!1;function yO(m,g,y){var j=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;p1||nm==null||nm!==i0(j)||(j=nm,"selectionStart"in j&&h1(j)?j={start:j.selectionStart,end:j.selectionEnd}:(j=(j.ownerDocument&&j.ownerDocument.defaultView||window).getSelection(),j={anchorNode:j.anchorNode,anchorOffset:j.anchorOffset,focusNode:j.focusNode,focusOffset:j.focusOffset}),gh&&hh(gh,j)||(gh=j,j=ty(g1,"onSelect"),0<j.length&&(g=new u0("onSelect","select",null,g,y),m.push({event:g,listeners:j}),g.target=nm)))}function wd(m,g){var y={};return y[m.toLowerCase()]=g.toLowerCase(),y["Webkit"+m]="webkit"+g,y["Moz"+m]="moz"+g,y}var am={animationend:wd("Animation","AnimationEnd"),animationiteration:wd("Animation","AnimationIteration"),animationstart:wd("Animation","AnimationStart"),transitionrun:wd("Transition","TransitionRun"),transitionstart:wd("Transition","TransitionStart"),transitioncancel:wd("Transition","TransitionCancel"),transitionend:wd("Transition","TransitionEnd")},x1={},bO={};Fo&&(bO=document.createElement("div").style,"AnimationEvent"in window||(delete am.animationend.animation,delete am.animationiteration.animation,delete am.animationstart.animation),"TransitionEvent"in window||delete am.transitionend.transition);function Nd(m){if(x1[m])return x1[m];if(!am[m])return m;var g=am[m],y;for(y in g)if(g.hasOwnProperty(y)&&y in bO)return x1[m]=g[y];return m}var vO=Nd("animationend"),wO=Nd("animationiteration"),NO=Nd("animationstart"),zee=Nd("transitionrun"),Uee=Nd("transitionstart"),Fee=Nd("transitioncancel"),jO=Nd("transitionend"),CO=new Map,y1="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");y1.push("scrollEnd");function Ni(m,g){CO.set(m,g),bd(g,[m])}var h0=typeof reportError=="function"?reportError:function(m){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var g=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof m=="object"&&m!==null&&typeof m.message=="string"?String(m.message):String(m),error:m});if(!window.dispatchEvent(g))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",m);return}console.error(m)},Fr=[],sm=0,b1=0;function g0(){for(var m=sm,g=b1=sm=0;g<m;){var y=Fr[g];Fr[g++]=null;var j=Fr[g];Fr[g++]=null;var P=Fr[g];Fr[g++]=null;var O=Fr[g];if(Fr[g++]=null,j!==null&&P!==null){var K=j.pending;K===null?P.next=P:(P.next=K.next,K.next=P),j.pending=P}O!==0&&SO(y,P,O)}}function p0(m,g,y,j){Fr[sm++]=m,Fr[sm++]=g,Fr[sm++]=y,Fr[sm++]=j,b1|=j,m.lanes|=j,m=m.alternate,m!==null&&(m.lanes|=j)}function v1(m,g,y,j){return p0(m,g,y,j),x0(m)}function jd(m,g){return p0(m,null,null,g),x0(m)}function SO(m,g,y){m.lanes|=y;var j=m.alternate;j!==null&&(j.lanes|=y);for(var P=!1,O=m.return;O!==null;)O.childLanes|=y,j=O.alternate,j!==null&&(j.childLanes|=y),O.tag===22&&(m=O.stateNode,m===null||m._visibility&1||(P=!0)),m=O,O=O.return;return m.tag===3?(O=m.stateNode,P&&g!==null&&(P=31-Je(y),m=O.hiddenUpdates,j=m[P],j===null?m[P]=[g]:j.push(g),g.lane=y|536870912),O):null}function x0(m){if(50<$h)throw $h=0,EC=null,Error(s(185));for(var g=m.return;g!==null;)m=g,g=m.return;return m.tag===3?m.stateNode:null}var rm={};function Bee(m,g,y,j){this.tag=m,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=j,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xr(m,g,y,j){return new Bee(m,g,y,j)}function w1(m){return m=m.prototype,!(!m||!m.isReactComponent)}function Bo(m,g){var y=m.alternate;return y===null?(y=xr(m.tag,g,m.key,m.mode),y.elementType=m.elementType,y.type=m.type,y.stateNode=m.stateNode,y.alternate=m,m.alternate=y):(y.pendingProps=g,y.type=m.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=m.flags&65011712,y.childLanes=m.childLanes,y.lanes=m.lanes,y.child=m.child,y.memoizedProps=m.memoizedProps,y.memoizedState=m.memoizedState,y.updateQueue=m.updateQueue,g=m.dependencies,y.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},y.sibling=m.sibling,y.index=m.index,y.ref=m.ref,y.refCleanup=m.refCleanup,y}function _O(m,g){m.flags&=65011714;var y=m.alternate;return y===null?(m.childLanes=0,m.lanes=g,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=y.childLanes,m.lanes=y.lanes,m.child=y.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=y.memoizedProps,m.memoizedState=y.memoizedState,m.updateQueue=y.updateQueue,m.type=y.type,g=y.dependencies,m.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),m}function y0(m,g,y,j,P,O){var K=0;if(j=m,typeof m=="function")w1(m)&&(K=1);else if(typeof m=="string")K=Vte(m,y,re.current)?26:m==="html"||m==="head"||m==="body"?27:5;else e:switch(m){case I:return m=xr(31,y,g,P),m.elementType=I,m.lanes=O,m;case N:return Cd(y.children,P,O,g);case b:K=8,P|=24;break;case C:return m=xr(12,y,g,P|2),m.elementType=C,m.lanes=O,m;case k:return m=xr(13,y,g,P),m.elementType=k,m.lanes=O,m;case A:return m=xr(19,y,g,P),m.elementType=A,m.lanes=O,m;default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case S:K=10;break e;case w:K=9;break e;case E:K=11;break e;case T:K=14;break e;case _:K=16,j=null;break e}K=29,y=Error(s(130,m===null?"null":typeof m,"")),j=null}return g=xr(K,y,g,P),g.elementType=m,g.type=j,g.lanes=O,g}function Cd(m,g,y,j){return m=xr(7,m,j,g),m.lanes=y,m}function N1(m,g,y){return m=xr(6,m,null,g),m.lanes=y,m}function AO(m){var g=xr(18,null,null,0);return g.stateNode=m,g}function j1(m,g,y){return g=xr(4,m.children!==null?m.children:[],m.key,g),g.lanes=y,g.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},g}var TO=new WeakMap;function Br(m,g){if(typeof m=="object"&&m!==null){var y=TO.get(m);return y!==void 0?y:(g={value:m,source:g,stack:Te(g)},TO.set(m,g),g)}return{value:m,source:g,stack:Te(g)}}var im=[],om=0,b0=null,ph=0,Hr=[],Gr=0,ac=null,qi=1,Vi="";function Ho(m,g){im[om++]=ph,im[om++]=b0,b0=m,ph=g}function EO(m,g,y){Hr[Gr++]=qi,Hr[Gr++]=Vi,Hr[Gr++]=ac,ac=m;var j=qi;m=Vi;var P=32-Je(j)-1;j&=~(1<<P),y+=1;var O=32-Je(g)+P;if(30<O){var K=P-P%5;O=(j&(1<<K)-1).toString(32),j>>=K,P-=K,qi=1<<32-Je(g)+P|y<<P|j,Vi=O+m}else qi=1<<O|y<<P|j,Vi=m}function C1(m){m.return!==null&&(Ho(m,1),EO(m,1,0))}function S1(m){for(;m===b0;)b0=im[--om],im[om]=null,ph=im[--om],im[om]=null;for(;m===ac;)ac=Hr[--Gr],Hr[Gr]=null,Vi=Hr[--Gr],Hr[Gr]=null,qi=Hr[--Gr],Hr[Gr]=null}function kO(m,g){Hr[Gr++]=qi,Hr[Gr++]=Vi,Hr[Gr++]=ac,qi=g.id,Vi=g.overflow,ac=m}var fs=null,Vn=null,mn=!1,sc=null,Wr=!1,_1=Error(s(519));function rc(m){var g=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw xh(Br(g,m)),_1}function LO(m){var g=m.stateNode,y=m.type,j=m.memoizedProps;switch(g[Nt]=m,g[L]=j,y){case"dialog":on("cancel",g),on("close",g);break;case"iframe":case"object":case"embed":on("load",g);break;case"video":case"audio":for(y=0;y<zh.length;y++)on(zh[y],g);break;case"source":on("error",g);break;case"img":case"image":case"link":on("error",g),on("load",g);break;case"details":on("toggle",g);break;case"input":on("invalid",g),GD(g,j.value,j.defaultValue,j.checked,j.defaultChecked,j.type,j.name,!0);break;case"select":on("invalid",g);break;case"textarea":on("invalid",g),qD(g,j.value,j.defaultValue,j.children)}y=j.children,typeof y!="string"&&typeof y!="number"&&typeof y!="bigint"||g.textContent===""+y||j.suppressHydrationWarning===!0||Y5(g.textContent,y)?(j.popover!=null&&(on("beforetoggle",g),on("toggle",g)),j.onScroll!=null&&on("scroll",g),j.onScrollEnd!=null&&on("scrollend",g),j.onClick!=null&&(g.onclick=Uo),g=!0):g=!1,g||rc(m,!0)}function PO(m){for(fs=m.return;fs;)switch(fs.tag){case 5:case 31:case 13:Wr=!1;return;case 27:case 3:Wr=!0;return;default:fs=fs.return}}function lm(m){if(m!==fs)return!1;if(!mn)return PO(m),mn=!0,!1;var g=m.tag,y;if((y=g!==3&&g!==27)&&((y=g===5)&&(y=m.type,y=!(y!=="form"&&y!=="button")||GC(m.type,m.memoizedProps)),y=!y),y&&Vn&&rc(m),PO(m),g===13){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));Vn=aM(m)}else if(g===31){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));Vn=aM(m)}else g===27?(g=Vn,bc(m.type)?(m=QC,QC=null,Vn=m):Vn=g):Vn=fs?Vr(m.stateNode.nextSibling):null;return!0}function Sd(){Vn=fs=null,mn=!1}function A1(){var m=sc;return m!==null&&(Qs===null?Qs=m:Qs.push.apply(Qs,m),sc=null),m}function xh(m){sc===null?sc=[m]:sc.push(m)}var T1=J(null),_d=null,Go=null;function ic(m,g,y){Ne(T1,g._currentValue),g._currentValue=y}function Wo(m){m._currentValue=T1.current,F(T1)}function E1(m,g,y){for(;m!==null;){var j=m.alternate;if((m.childLanes&g)!==g?(m.childLanes|=g,j!==null&&(j.childLanes|=g)):j!==null&&(j.childLanes&g)!==g&&(j.childLanes|=g),m===y)break;m=m.return}}function k1(m,g,y,j){var P=m.child;for(P!==null&&(P.return=m);P!==null;){var O=P.dependencies;if(O!==null){var K=P.child;O=O.firstContext;e:for(;O!==null;){var Ce=O;O=P;for(var ze=0;ze<g.length;ze++)if(Ce.context===g[ze]){O.lanes|=y,Ce=O.alternate,Ce!==null&&(Ce.lanes|=y),E1(O.return,y,m),j||(K=null);break e}O=Ce.next}}else if(P.tag===18){if(K=P.return,K===null)throw Error(s(341));K.lanes|=y,O=K.alternate,O!==null&&(O.lanes|=y),E1(K,y,m),K=null}else K=P.child;if(K!==null)K.return=P;else for(K=P;K!==null;){if(K===m){K=null;break}if(P=K.sibling,P!==null){P.return=K.return,K=P;break}K=K.return}P=K}}function cm(m,g,y,j){m=null;for(var P=g,O=!1;P!==null;){if(!O){if((P.flags&524288)!==0)O=!0;else if((P.flags&262144)!==0)break}if(P.tag===10){var K=P.alternate;if(K===null)throw Error(s(387));if(K=K.memoizedProps,K!==null){var Ce=P.type;pr(P.pendingProps.value,K.value)||(m!==null?m.push(Ce):m=[Ce])}}else if(P===De.current){if(K=P.alternate,K===null)throw Error(s(387));K.memoizedState.memoizedState!==P.memoizedState.memoizedState&&(m!==null?m.push(Gh):m=[Gh])}P=P.return}m!==null&&k1(g,m,y,j),g.flags|=262144}function v0(m){for(m=m.firstContext;m!==null;){if(!pr(m.context._currentValue,m.memoizedValue))return!0;m=m.next}return!1}function Ad(m){_d=m,Go=null,m=m.dependencies,m!==null&&(m.firstContext=null)}function hs(m){return DO(_d,m)}function w0(m,g){return _d===null&&Ad(m),DO(m,g)}function DO(m,g){var y=g._currentValue;if(g={context:g,memoizedValue:y,next:null},Go===null){if(m===null)throw Error(s(308));Go=g,m.dependencies={lanes:0,firstContext:g},m.flags|=524288}else Go=Go.next=g;return y}var Hee=typeof AbortController<"u"?AbortController:function(){var m=[],g=this.signal={aborted:!1,addEventListener:function(y,j){m.push(j)}};this.abort=function(){g.aborted=!0,m.forEach(function(y){return y()})}},Gee=e.unstable_scheduleCallback,Wee=e.unstable_NormalPriority,Ta={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function L1(){return{controller:new Hee,data:new Map,refCount:0}}function yh(m){m.refCount--,m.refCount===0&&Gee(Wee,function(){m.controller.abort()})}var bh=null,P1=0,dm=0,um=null;function qee(m,g){if(bh===null){var y=bh=[];P1=0,dm=MC(),um={status:"pending",value:void 0,then:function(j){y.push(j)}}}return P1++,g.then(OO,OO),g}function OO(){if(--P1===0&&bh!==null){um!==null&&(um.status="fulfilled");var m=bh;bh=null,dm=0,um=null;for(var g=0;g<m.length;g++)(0,m[g])()}}function Vee(m,g){var y=[],j={status:"pending",value:null,reason:null,then:function(P){y.push(P)}};return m.then(function(){j.status="fulfilled",j.value=g;for(var P=0;P<y.length;P++)(0,y[P])(g)},function(P){for(j.status="rejected",j.reason=P,P=0;P<y.length;P++)(0,y[P])(void 0)}),j}var MO=z.S;z.S=function(m,g){y5=ce(),typeof g=="object"&&g!==null&&typeof g.then=="function"&&qee(m,g),MO!==null&&MO(m,g)};var Td=J(null);function D1(){var m=Td.current;return m!==null?m:zn.pooledCache}function N0(m,g){g===null?Ne(Td,Td.current):Ne(Td,g.pool)}function IO(){var m=D1();return m===null?null:{parent:Ta._currentValue,pool:m}}var mm=Error(s(460)),O1=Error(s(474)),j0=Error(s(542)),C0={then:function(){}};function $O(m){return m=m.status,m==="fulfilled"||m==="rejected"}function RO(m,g,y){switch(y=m[y],y===void 0?m.push(g):y!==g&&(g.then(Uo,Uo),g=y),g.status){case"fulfilled":return g.value;case"rejected":throw m=g.reason,UO(m),m;default:if(typeof g.status=="string")g.then(Uo,Uo);else{if(m=zn,m!==null&&100<m.shellSuspendCounter)throw Error(s(482));m=g,m.status="pending",m.then(function(j){if(g.status==="pending"){var P=g;P.status="fulfilled",P.value=j}},function(j){if(g.status==="pending"){var P=g;P.status="rejected",P.reason=j}})}switch(g.status){case"fulfilled":return g.value;case"rejected":throw m=g.reason,UO(m),m}throw kd=g,mm}}function Ed(m){try{var g=m._init;return g(m._payload)}catch(y){throw y!==null&&typeof y=="object"&&typeof y.then=="function"?(kd=y,mm):y}}var kd=null;function zO(){if(kd===null)throw Error(s(459));var m=kd;return kd=null,m}function UO(m){if(m===mm||m===j0)throw Error(s(483))}var fm=null,vh=0;function S0(m){var g=vh;return vh+=1,fm===null&&(fm=[]),RO(fm,m,g)}function wh(m,g){g=g.props.ref,m.ref=g!==void 0?g:null}function _0(m,g){throw g.$$typeof===p?Error(s(525)):(m=Object.prototype.toString.call(g),Error(s(31,m==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":m)))}function FO(m){function g(Xe,Ge){if(m){var et=Xe.deletions;et===null?(Xe.deletions=[Ge],Xe.flags|=16):et.push(Ge)}}function y(Xe,Ge){if(!m)return null;for(;Ge!==null;)g(Xe,Ge),Ge=Ge.sibling;return null}function j(Xe){for(var Ge=new Map;Xe!==null;)Xe.key!==null?Ge.set(Xe.key,Xe):Ge.set(Xe.index,Xe),Xe=Xe.sibling;return Ge}function P(Xe,Ge){return Xe=Bo(Xe,Ge),Xe.index=0,Xe.sibling=null,Xe}function O(Xe,Ge,et){return Xe.index=et,m?(et=Xe.alternate,et!==null?(et=et.index,et<Ge?(Xe.flags|=67108866,Ge):et):(Xe.flags|=67108866,Ge)):(Xe.flags|=1048576,Ge)}function K(Xe){return m&&Xe.alternate===null&&(Xe.flags|=67108866),Xe}function Ce(Xe,Ge,et,ut){return Ge===null||Ge.tag!==6?(Ge=N1(et,Xe.mode,ut),Ge.return=Xe,Ge):(Ge=P(Ge,et),Ge.return=Xe,Ge)}function ze(Xe,Ge,et,ut){var Ft=et.type;return Ft===N?ct(Xe,Ge,et.props.children,ut,et.key):Ge!==null&&(Ge.elementType===Ft||typeof Ft=="object"&&Ft!==null&&Ft.$$typeof===_&&Ed(Ft)===Ge.type)?(Ge=P(Ge,et.props),wh(Ge,et),Ge.return=Xe,Ge):(Ge=y0(et.type,et.key,et.props,null,Xe.mode,ut),wh(Ge,et),Ge.return=Xe,Ge)}function tt(Xe,Ge,et,ut){return Ge===null||Ge.tag!==4||Ge.stateNode.containerInfo!==et.containerInfo||Ge.stateNode.implementation!==et.implementation?(Ge=j1(et,Xe.mode,ut),Ge.return=Xe,Ge):(Ge=P(Ge,et.children||[]),Ge.return=Xe,Ge)}function ct(Xe,Ge,et,ut,Ft){return Ge===null||Ge.tag!==7?(Ge=Cd(et,Xe.mode,ut,Ft),Ge.return=Xe,Ge):(Ge=P(Ge,et),Ge.return=Xe,Ge)}function ht(Xe,Ge,et){if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number"||typeof Ge=="bigint")return Ge=N1(""+Ge,Xe.mode,et),Ge.return=Xe,Ge;if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case x:return et=y0(Ge.type,Ge.key,Ge.props,null,Xe.mode,et),wh(et,Ge),et.return=Xe,et;case v:return Ge=j1(Ge,Xe.mode,et),Ge.return=Xe,Ge;case _:return Ge=Ed(Ge),ht(Xe,Ge,et)}if(X(Ge)||D(Ge))return Ge=Cd(Ge,Xe.mode,et,null),Ge.return=Xe,Ge;if(typeof Ge.then=="function")return ht(Xe,S0(Ge),et);if(Ge.$$typeof===S)return ht(Xe,w0(Xe,Ge),et);_0(Xe,Ge)}return null}function st(Xe,Ge,et,ut){var Ft=Ge!==null?Ge.key:null;if(typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint")return Ft!==null?null:Ce(Xe,Ge,""+et,ut);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case x:return et.key===Ft?ze(Xe,Ge,et,ut):null;case v:return et.key===Ft?tt(Xe,Ge,et,ut):null;case _:return et=Ed(et),st(Xe,Ge,et,ut)}if(X(et)||D(et))return Ft!==null?null:ct(Xe,Ge,et,ut,null);if(typeof et.then=="function")return st(Xe,Ge,S0(et),ut);if(et.$$typeof===S)return st(Xe,Ge,w0(Xe,et),ut);_0(Xe,et)}return null}function lt(Xe,Ge,et,ut,Ft){if(typeof ut=="string"&&ut!==""||typeof ut=="number"||typeof ut=="bigint")return Xe=Xe.get(et)||null,Ce(Ge,Xe,""+ut,Ft);if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case x:return Xe=Xe.get(ut.key===null?et:ut.key)||null,ze(Ge,Xe,ut,Ft);case v:return Xe=Xe.get(ut.key===null?et:ut.key)||null,tt(Ge,Xe,ut,Ft);case _:return ut=Ed(ut),lt(Xe,Ge,et,ut,Ft)}if(X(ut)||D(ut))return Xe=Xe.get(et)||null,ct(Ge,Xe,ut,Ft,null);if(typeof ut.then=="function")return lt(Xe,Ge,et,S0(ut),Ft);if(ut.$$typeof===S)return lt(Xe,Ge,et,w0(Ge,ut),Ft);_0(Ge,ut)}return null}function Pt(Xe,Ge,et,ut){for(var Ft=null,yn=null,$t=Ge,nn=Ge=0,cn=null;$t!==null&&nn<et.length;nn++){$t.index>nn?(cn=$t,$t=null):cn=$t.sibling;var bn=st(Xe,$t,et[nn],ut);if(bn===null){$t===null&&($t=cn);break}m&&$t&&bn.alternate===null&&g(Xe,$t),Ge=O(bn,Ge,nn),yn===null?Ft=bn:yn.sibling=bn,yn=bn,$t=cn}if(nn===et.length)return y(Xe,$t),mn&&Ho(Xe,nn),Ft;if($t===null){for(;nn<et.length;nn++)$t=ht(Xe,et[nn],ut),$t!==null&&(Ge=O($t,Ge,nn),yn===null?Ft=$t:yn.sibling=$t,yn=$t);return mn&&Ho(Xe,nn),Ft}for($t=j($t);nn<et.length;nn++)cn=lt($t,Xe,nn,et[nn],ut),cn!==null&&(m&&cn.alternate!==null&&$t.delete(cn.key===null?nn:cn.key),Ge=O(cn,Ge,nn),yn===null?Ft=cn:yn.sibling=cn,yn=cn);return m&&$t.forEach(function(Cc){return g(Xe,Cc)}),mn&&Ho(Xe,nn),Ft}function Wt(Xe,Ge,et,ut){if(et==null)throw Error(s(151));for(var Ft=null,yn=null,$t=Ge,nn=Ge=0,cn=null,bn=et.next();$t!==null&&!bn.done;nn++,bn=et.next()){$t.index>nn?(cn=$t,$t=null):cn=$t.sibling;var Cc=st(Xe,$t,bn.value,ut);if(Cc===null){$t===null&&($t=cn);break}m&&$t&&Cc.alternate===null&&g(Xe,$t),Ge=O(Cc,Ge,nn),yn===null?Ft=Cc:yn.sibling=Cc,yn=Cc,$t=cn}if(bn.done)return y(Xe,$t),mn&&Ho(Xe,nn),Ft;if($t===null){for(;!bn.done;nn++,bn=et.next())bn=ht(Xe,bn.value,ut),bn!==null&&(Ge=O(bn,Ge,nn),yn===null?Ft=bn:yn.sibling=bn,yn=bn);return mn&&Ho(Xe,nn),Ft}for($t=j($t);!bn.done;nn++,bn=et.next())bn=lt($t,Xe,nn,bn.value,ut),bn!==null&&(m&&bn.alternate!==null&&$t.delete(bn.key===null?nn:bn.key),Ge=O(bn,Ge,nn),yn===null?Ft=bn:yn.sibling=bn,yn=bn);return m&&$t.forEach(function(sne){return g(Xe,sne)}),mn&&Ho(Xe,nn),Ft}function In(Xe,Ge,et,ut){if(typeof et=="object"&&et!==null&&et.type===N&&et.key===null&&(et=et.props.children),typeof et=="object"&&et!==null){switch(et.$$typeof){case x:e:{for(var Ft=et.key;Ge!==null;){if(Ge.key===Ft){if(Ft=et.type,Ft===N){if(Ge.tag===7){y(Xe,Ge.sibling),ut=P(Ge,et.props.children),ut.return=Xe,Xe=ut;break e}}else if(Ge.elementType===Ft||typeof Ft=="object"&&Ft!==null&&Ft.$$typeof===_&&Ed(Ft)===Ge.type){y(Xe,Ge.sibling),ut=P(Ge,et.props),wh(ut,et),ut.return=Xe,Xe=ut;break e}y(Xe,Ge);break}else g(Xe,Ge);Ge=Ge.sibling}et.type===N?(ut=Cd(et.props.children,Xe.mode,ut,et.key),ut.return=Xe,Xe=ut):(ut=y0(et.type,et.key,et.props,null,Xe.mode,ut),wh(ut,et),ut.return=Xe,Xe=ut)}return K(Xe);case v:e:{for(Ft=et.key;Ge!==null;){if(Ge.key===Ft)if(Ge.tag===4&&Ge.stateNode.containerInfo===et.containerInfo&&Ge.stateNode.implementation===et.implementation){y(Xe,Ge.sibling),ut=P(Ge,et.children||[]),ut.return=Xe,Xe=ut;break e}else{y(Xe,Ge);break}else g(Xe,Ge);Ge=Ge.sibling}ut=j1(et,Xe.mode,ut),ut.return=Xe,Xe=ut}return K(Xe);case _:return et=Ed(et),In(Xe,Ge,et,ut)}if(X(et))return Pt(Xe,Ge,et,ut);if(D(et)){if(Ft=D(et),typeof Ft!="function")throw Error(s(150));return et=Ft.call(et),Wt(Xe,Ge,et,ut)}if(typeof et.then=="function")return In(Xe,Ge,S0(et),ut);if(et.$$typeof===S)return In(Xe,Ge,w0(Xe,et),ut);_0(Xe,et)}return typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint"?(et=""+et,Ge!==null&&Ge.tag===6?(y(Xe,Ge.sibling),ut=P(Ge,et),ut.return=Xe,Xe=ut):(y(Xe,Ge),ut=N1(et,Xe.mode,ut),ut.return=Xe,Xe=ut),K(Xe)):y(Xe,Ge)}return function(Xe,Ge,et,ut){try{vh=0;var Ft=In(Xe,Ge,et,ut);return fm=null,Ft}catch($t){if($t===mm||$t===j0)throw $t;var yn=xr(29,$t,null,Xe.mode);return yn.lanes=ut,yn.return=Xe,yn}}}var Ld=FO(!0),BO=FO(!1),oc=!1;function M1(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function I1(m,g){m=m.updateQueue,g.updateQueue===m&&(g.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,callbacks:null})}function lc(m){return{lane:m,tag:0,payload:null,callback:null,next:null}}function cc(m,g,y){var j=m.updateQueue;if(j===null)return null;if(j=j.shared,(Nn&2)!==0){var P=j.pending;return P===null?g.next=g:(g.next=P.next,P.next=g),j.pending=g,g=x0(m),SO(m,null,y),g}return p0(m,j,g,y),x0(m)}function Nh(m,g,y){if(g=g.updateQueue,g!==null&&(g=g.shared,(y&4194048)!==0)){var j=g.lanes;j&=m.pendingLanes,y|=j,g.lanes=y,yt(m,y)}}function $1(m,g){var y=m.updateQueue,j=m.alternate;if(j!==null&&(j=j.updateQueue,y===j)){var P=null,O=null;if(y=y.firstBaseUpdate,y!==null){do{var K={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};O===null?P=O=K:O=O.next=K,y=y.next}while(y!==null);O===null?P=O=g:O=O.next=g}else P=O=g;y={baseState:j.baseState,firstBaseUpdate:P,lastBaseUpdate:O,shared:j.shared,callbacks:j.callbacks},m.updateQueue=y;return}m=y.lastBaseUpdate,m===null?y.firstBaseUpdate=g:m.next=g,y.lastBaseUpdate=g}var R1=!1;function jh(){if(R1){var m=um;if(m!==null)throw m}}function Ch(m,g,y,j){R1=!1;var P=m.updateQueue;oc=!1;var O=P.firstBaseUpdate,K=P.lastBaseUpdate,Ce=P.shared.pending;if(Ce!==null){P.shared.pending=null;var ze=Ce,tt=ze.next;ze.next=null,K===null?O=tt:K.next=tt,K=ze;var ct=m.alternate;ct!==null&&(ct=ct.updateQueue,Ce=ct.lastBaseUpdate,Ce!==K&&(Ce===null?ct.firstBaseUpdate=tt:Ce.next=tt,ct.lastBaseUpdate=ze))}if(O!==null){var ht=P.baseState;K=0,ct=tt=ze=null,Ce=O;do{var st=Ce.lane&-536870913,lt=st!==Ce.lane;if(lt?(ln&st)===st:(j&st)===st){st!==0&&st===dm&&(R1=!0),ct!==null&&(ct=ct.next={lane:0,tag:Ce.tag,payload:Ce.payload,callback:null,next:null});e:{var Pt=m,Wt=Ce;st=g;var In=y;switch(Wt.tag){case 1:if(Pt=Wt.payload,typeof Pt=="function"){ht=Pt.call(In,ht,st);break e}ht=Pt;break e;case 3:Pt.flags=Pt.flags&-65537|128;case 0:if(Pt=Wt.payload,st=typeof Pt=="function"?Pt.call(In,ht,st):Pt,st==null)break e;ht=f({},ht,st);break e;case 2:oc=!0}}st=Ce.callback,st!==null&&(m.flags|=64,lt&&(m.flags|=8192),lt=P.callbacks,lt===null?P.callbacks=[st]:lt.push(st))}else lt={lane:st,tag:Ce.tag,payload:Ce.payload,callback:Ce.callback,next:null},ct===null?(tt=ct=lt,ze=ht):ct=ct.next=lt,K|=st;if(Ce=Ce.next,Ce===null){if(Ce=P.shared.pending,Ce===null)break;lt=Ce,Ce=lt.next,lt.next=null,P.lastBaseUpdate=lt,P.shared.pending=null}}while(!0);ct===null&&(ze=ht),P.baseState=ze,P.firstBaseUpdate=tt,P.lastBaseUpdate=ct,O===null&&(P.shared.lanes=0),hc|=K,m.lanes=K,m.memoizedState=ht}}function HO(m,g){if(typeof m!="function")throw Error(s(191,m));m.call(g)}function GO(m,g){var y=m.callbacks;if(y!==null)for(m.callbacks=null,m=0;m<y.length;m++)HO(y[m],g)}var hm=J(null),A0=J(0);function WO(m,g){m=el,Ne(A0,m),Ne(hm,g),el=m|g.baseLanes}function z1(){Ne(A0,el),Ne(hm,hm.current)}function U1(){el=A0.current,F(hm),F(A0)}var yr=J(null),qr=null;function dc(m){var g=m.alternate;Ne(wa,wa.current&1),Ne(yr,m),qr===null&&(g===null||hm.current!==null||g.memoizedState!==null)&&(qr=m)}function F1(m){Ne(wa,wa.current),Ne(yr,m),qr===null&&(qr=m)}function qO(m){m.tag===22?(Ne(wa,wa.current),Ne(yr,m),qr===null&&(qr=m)):uc()}function uc(){Ne(wa,wa.current),Ne(yr,yr.current)}function br(m){F(yr),qr===m&&(qr=null),F(wa)}var wa=J(0);function T0(m){for(var g=m;g!==null;){if(g.tag===13){var y=g.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||VC(y)||YC(y)))return g}else if(g.tag===19&&(g.memoizedProps.revealOrder==="forwards"||g.memoizedProps.revealOrder==="backwards"||g.memoizedProps.revealOrder==="unstable_legacy-backwards"||g.memoizedProps.revealOrder==="together")){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===m)break;for(;g.sibling===null;){if(g.return===null||g.return===m)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var qo=0,Zt=null,On=null,Ea=null,E0=!1,gm=!1,Pd=!1,k0=0,Sh=0,pm=null,Yee=0;function ma(){throw Error(s(321))}function B1(m,g){if(g===null)return!1;for(var y=0;y<g.length&&y<m.length;y++)if(!pr(m[y],g[y]))return!1;return!0}function H1(m,g,y,j,P,O){return qo=O,Zt=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,z.H=m===null||m.memoizedState===null?E3:sC,Pd=!1,O=y(j,P),Pd=!1,gm&&(O=YO(g,y,j,P)),VO(m),O}function VO(m){z.H=Th;var g=On!==null&&On.next!==null;if(qo=0,Ea=On=Zt=null,E0=!1,Sh=0,pm=null,g)throw Error(s(300));m===null||ka||(m=m.dependencies,m!==null&&v0(m)&&(ka=!0))}function YO(m,g,y,j){Zt=m;var P=0;do{if(gm&&(pm=null),Sh=0,gm=!1,25<=P)throw Error(s(301));if(P+=1,Ea=On=null,m.updateQueue!=null){var O=m.updateQueue;O.lastEffect=null,O.events=null,O.stores=null,O.memoCache!=null&&(O.memoCache.index=0)}z.H=k3,O=g(y,j)}while(gm);return O}function Qee(){var m=z.H,g=m.useState()[0];return g=typeof g.then=="function"?_h(g):g,m=m.useState()[0],(On!==null?On.memoizedState:null)!==m&&(Zt.flags|=1024),g}function G1(){var m=k0!==0;return k0=0,m}function W1(m,g,y){g.updateQueue=m.updateQueue,g.flags&=-2053,m.lanes&=~y}function q1(m){if(E0){for(m=m.memoizedState;m!==null;){var g=m.queue;g!==null&&(g.pending=null),m=m.next}E0=!1}qo=0,Ea=On=Zt=null,gm=!1,Sh=k0=0,pm=null}function Ms(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ea===null?Zt.memoizedState=Ea=m:Ea=Ea.next=m,Ea}function Na(){if(On===null){var m=Zt.alternate;m=m!==null?m.memoizedState:null}else m=On.next;var g=Ea===null?Zt.memoizedState:Ea.next;if(g!==null)Ea=g,On=m;else{if(m===null)throw Zt.alternate===null?Error(s(467)):Error(s(310));On=m,m={memoizedState:On.memoizedState,baseState:On.baseState,baseQueue:On.baseQueue,queue:On.queue,next:null},Ea===null?Zt.memoizedState=Ea=m:Ea=Ea.next=m}return Ea}function L0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function _h(m){var g=Sh;return Sh+=1,pm===null&&(pm=[]),m=RO(pm,m,g),g=Zt,(Ea===null?g.memoizedState:Ea.next)===null&&(g=g.alternate,z.H=g===null||g.memoizedState===null?E3:sC),m}function P0(m){if(m!==null&&typeof m=="object"){if(typeof m.then=="function")return _h(m);if(m.$$typeof===S)return hs(m)}throw Error(s(438,String(m)))}function V1(m){var g=null,y=Zt.updateQueue;if(y!==null&&(g=y.memoCache),g==null){var j=Zt.alternate;j!==null&&(j=j.updateQueue,j!==null&&(j=j.memoCache,j!=null&&(g={data:j.data.map(function(P){return P.slice()}),index:0})))}if(g==null&&(g={data:[],index:0}),y===null&&(y=L0(),Zt.updateQueue=y),y.memoCache=g,y=g.data[g.index],y===void 0)for(y=g.data[g.index]=Array(m),j=0;j<m;j++)y[j]=R;return g.index++,y}function Vo(m,g){return typeof g=="function"?g(m):g}function D0(m){var g=Na();return Y1(g,On,m)}function Y1(m,g,y){var j=m.queue;if(j===null)throw Error(s(311));j.lastRenderedReducer=y;var P=m.baseQueue,O=j.pending;if(O!==null){if(P!==null){var K=P.next;P.next=O.next,O.next=K}g.baseQueue=P=O,j.pending=null}if(O=m.baseState,P===null)m.memoizedState=O;else{g=P.next;var Ce=K=null,ze=null,tt=g,ct=!1;do{var ht=tt.lane&-536870913;if(ht!==tt.lane?(ln&ht)===ht:(qo&ht)===ht){var st=tt.revertLane;if(st===0)ze!==null&&(ze=ze.next={lane:0,revertLane:0,gesture:null,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null}),ht===dm&&(ct=!0);else if((qo&st)===st){tt=tt.next,st===dm&&(ct=!0);continue}else ht={lane:0,revertLane:tt.revertLane,gesture:null,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null},ze===null?(Ce=ze=ht,K=O):ze=ze.next=ht,Zt.lanes|=st,hc|=st;ht=tt.action,Pd&&y(O,ht),O=tt.hasEagerState?tt.eagerState:y(O,ht)}else st={lane:ht,revertLane:tt.revertLane,gesture:tt.gesture,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null},ze===null?(Ce=ze=st,K=O):ze=ze.next=st,Zt.lanes|=ht,hc|=ht;tt=tt.next}while(tt!==null&&tt!==g);if(ze===null?K=O:ze.next=Ce,!pr(O,m.memoizedState)&&(ka=!0,ct&&(y=um,y!==null)))throw y;m.memoizedState=O,m.baseState=K,m.baseQueue=ze,j.lastRenderedState=O}return P===null&&(j.lanes=0),[m.memoizedState,j.dispatch]}function Q1(m){var g=Na(),y=g.queue;if(y===null)throw Error(s(311));y.lastRenderedReducer=m;var j=y.dispatch,P=y.pending,O=g.memoizedState;if(P!==null){y.pending=null;var K=P=P.next;do O=m(O,K.action),K=K.next;while(K!==P);pr(O,g.memoizedState)||(ka=!0),g.memoizedState=O,g.baseQueue===null&&(g.baseState=O),y.lastRenderedState=O}return[O,j]}function QO(m,g,y){var j=Zt,P=Na(),O=mn;if(O){if(y===void 0)throw Error(s(407));y=y()}else y=g();var K=!pr((On||P).memoizedState,y);if(K&&(P.memoizedState=y,ka=!0),P=P.queue,Z1(ZO.bind(null,j,P,m),[m]),P.getSnapshot!==g||K||Ea!==null&&Ea.memoizedState.tag&1){if(j.flags|=2048,xm(9,{destroy:void 0},XO.bind(null,j,P,y,g),null),zn===null)throw Error(s(349));O||(qo&127)!==0||KO(j,g,y)}return y}function KO(m,g,y){m.flags|=16384,m={getSnapshot:g,value:y},g=Zt.updateQueue,g===null?(g=L0(),Zt.updateQueue=g,g.stores=[m]):(y=g.stores,y===null?g.stores=[m]:y.push(m))}function XO(m,g,y,j){g.value=y,g.getSnapshot=j,JO(g)&&e3(m)}function ZO(m,g,y){return y(function(){JO(g)&&e3(m)})}function JO(m){var g=m.getSnapshot;m=m.value;try{var y=g();return!pr(m,y)}catch{return!0}}function e3(m){var g=jd(m,2);g!==null&&Ks(g,m,2)}function K1(m){var g=Ms();if(typeof m=="function"){var y=m;if(m=y(),Pd){nt(!0);try{y()}finally{nt(!1)}}}return g.memoizedState=g.baseState=m,g.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vo,lastRenderedState:m},g}function t3(m,g,y,j){return m.baseState=y,Y1(m,On,typeof j=="function"?j:Vo)}function Kee(m,g,y,j,P){if(I0(m))throw Error(s(485));if(m=g.action,m!==null){var O={payload:P,action:m,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(K){O.listeners.push(K)}};z.T!==null?y(!0):O.isTransition=!1,j(O),y=g.pending,y===null?(O.next=g.pending=O,n3(g,O)):(O.next=y.next,g.pending=y.next=O)}}function n3(m,g){var y=g.action,j=g.payload,P=m.state;if(g.isTransition){var O=z.T,K={};z.T=K;try{var Ce=y(P,j),ze=z.S;ze!==null&&ze(K,Ce),a3(m,g,Ce)}catch(tt){X1(m,g,tt)}finally{O!==null&&K.types!==null&&(O.types=K.types),z.T=O}}else try{O=y(P,j),a3(m,g,O)}catch(tt){X1(m,g,tt)}}function a3(m,g,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(j){s3(m,g,j)},function(j){return X1(m,g,j)}):s3(m,g,y)}function s3(m,g,y){g.status="fulfilled",g.value=y,r3(g),m.state=y,g=m.pending,g!==null&&(y=g.next,y===g?m.pending=null:(y=y.next,g.next=y,n3(m,y)))}function X1(m,g,y){var j=m.pending;if(m.pending=null,j!==null){j=j.next;do g.status="rejected",g.reason=y,r3(g),g=g.next;while(g!==j)}m.action=null}function r3(m){m=m.listeners;for(var g=0;g<m.length;g++)(0,m[g])()}function i3(m,g){return g}function o3(m,g){if(mn){var y=zn.formState;if(y!==null){e:{var j=Zt;if(mn){if(Vn){t:{for(var P=Vn,O=Wr;P.nodeType!==8;){if(!O){P=null;break t}if(P=Vr(P.nextSibling),P===null){P=null;break t}}O=P.data,P=O==="F!"||O==="F"?P:null}if(P){Vn=Vr(P.nextSibling),j=P.data==="F!";break e}}rc(j)}j=!1}j&&(g=y[0])}}return y=Ms(),y.memoizedState=y.baseState=g,j={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i3,lastRenderedState:g},y.queue=j,y=_3.bind(null,Zt,j),j.dispatch=y,j=K1(!1),O=aC.bind(null,Zt,!1,j.queue),j=Ms(),P={state:g,dispatch:null,action:m,pending:null},j.queue=P,y=Kee.bind(null,Zt,P,O,y),P.dispatch=y,j.memoizedState=m,[g,y,!1]}function l3(m){var g=Na();return c3(g,On,m)}function c3(m,g,y){if(g=Y1(m,g,i3)[0],m=D0(Vo)[0],typeof g=="object"&&g!==null&&typeof g.then=="function")try{var j=_h(g)}catch(K){throw K===mm?j0:K}else j=g;g=Na();var P=g.queue,O=P.dispatch;return y!==g.memoizedState&&(Zt.flags|=2048,xm(9,{destroy:void 0},Xee.bind(null,P,y),null)),[j,O,m]}function Xee(m,g){m.action=g}function d3(m){var g=Na(),y=On;if(y!==null)return c3(g,y,m);Na(),g=g.memoizedState,y=Na();var j=y.queue.dispatch;return y.memoizedState=m,[g,j,!1]}function xm(m,g,y,j){return m={tag:m,create:y,deps:j,inst:g,next:null},g=Zt.updateQueue,g===null&&(g=L0(),Zt.updateQueue=g),y=g.lastEffect,y===null?g.lastEffect=m.next=m:(j=y.next,y.next=m,m.next=j,g.lastEffect=m),m}function u3(){return Na().memoizedState}function O0(m,g,y,j){var P=Ms();Zt.flags|=m,P.memoizedState=xm(1|g,{destroy:void 0},y,j===void 0?null:j)}function M0(m,g,y,j){var P=Na();j=j===void 0?null:j;var O=P.memoizedState.inst;On!==null&&j!==null&&B1(j,On.memoizedState.deps)?P.memoizedState=xm(g,O,y,j):(Zt.flags|=m,P.memoizedState=xm(1|g,O,y,j))}function m3(m,g){O0(8390656,8,m,g)}function Z1(m,g){M0(2048,8,m,g)}function Zee(m){Zt.flags|=4;var g=Zt.updateQueue;if(g===null)g=L0(),Zt.updateQueue=g,g.events=[m];else{var y=g.events;y===null?g.events=[m]:y.push(m)}}function f3(m){var g=Na().memoizedState;return Zee({ref:g,nextImpl:m}),function(){if((Nn&2)!==0)throw Error(s(440));return g.impl.apply(void 0,arguments)}}function h3(m,g){return M0(4,2,m,g)}function g3(m,g){return M0(4,4,m,g)}function p3(m,g){if(typeof g=="function"){m=m();var y=g(m);return function(){typeof y=="function"?y():g(null)}}if(g!=null)return m=m(),g.current=m,function(){g.current=null}}function x3(m,g,y){y=y!=null?y.concat([m]):null,M0(4,4,p3.bind(null,g,m),y)}function J1(){}function y3(m,g){var y=Na();g=g===void 0?null:g;var j=y.memoizedState;return g!==null&&B1(g,j[1])?j[0]:(y.memoizedState=[m,g],m)}function b3(m,g){var y=Na();g=g===void 0?null:g;var j=y.memoizedState;if(g!==null&&B1(g,j[1]))return j[0];if(j=m(),Pd){nt(!0);try{m()}finally{nt(!1)}}return y.memoizedState=[j,g],j}function eC(m,g,y){return y===void 0||(qo&1073741824)!==0&&(ln&261930)===0?m.memoizedState=g:(m.memoizedState=y,m=v5(),Zt.lanes|=m,hc|=m,y)}function v3(m,g,y,j){return pr(y,g)?y:hm.current!==null?(m=eC(m,y,j),pr(m,g)||(ka=!0),m):(qo&42)===0||(qo&1073741824)!==0&&(ln&261930)===0?(ka=!0,m.memoizedState=y):(m=v5(),Zt.lanes|=m,hc|=m,g)}function w3(m,g,y,j,P){var O=Q.p;Q.p=O!==0&&8>O?O:8;var K=z.T,Ce={};z.T=Ce,aC(m,!1,g,y);try{var ze=P(),tt=z.S;if(tt!==null&&tt(Ce,ze),ze!==null&&typeof ze=="object"&&typeof ze.then=="function"){var ct=Vee(ze,j);Ah(m,g,ct,Nr(m))}else Ah(m,g,j,Nr(m))}catch(ht){Ah(m,g,{then:function(){},status:"rejected",reason:ht},Nr())}finally{Q.p=O,K!==null&&Ce.types!==null&&(K.types=Ce.types),z.T=K}}function Jee(){}function tC(m,g,y,j){if(m.tag!==5)throw Error(s(476));var P=N3(m).queue;w3(m,P,g,de,y===null?Jee:function(){return j3(m),y(j)})}function N3(m){var g=m.memoizedState;if(g!==null)return g;g={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vo,lastRenderedState:de},next:null};var y={};return g.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vo,lastRenderedState:y},next:null},m.memoizedState=g,m=m.alternate,m!==null&&(m.memoizedState=g),g}function j3(m){var g=N3(m);g.next===null&&(g=m.alternate.memoizedState),Ah(m,g.next.queue,{},Nr())}function nC(){return hs(Gh)}function C3(){return Na().memoizedState}function S3(){return Na().memoizedState}function ete(m){for(var g=m.return;g!==null;){switch(g.tag){case 24:case 3:var y=Nr();m=lc(y);var j=cc(g,m,y);j!==null&&(Ks(j,g,y),Nh(j,g,y)),g={cache:L1()},m.payload=g;return}g=g.return}}function tte(m,g,y){var j=Nr();y={lane:j,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},I0(m)?A3(g,y):(y=v1(m,g,y,j),y!==null&&(Ks(y,m,j),T3(y,g,j)))}function _3(m,g,y){var j=Nr();Ah(m,g,y,j)}function Ah(m,g,y,j){var P={lane:j,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null};if(I0(m))A3(g,P);else{var O=m.alternate;if(m.lanes===0&&(O===null||O.lanes===0)&&(O=g.lastRenderedReducer,O!==null))try{var K=g.lastRenderedState,Ce=O(K,y);if(P.hasEagerState=!0,P.eagerState=Ce,pr(Ce,K))return p0(m,g,P,0),zn===null&&g0(),!1}catch{}if(y=v1(m,g,P,j),y!==null)return Ks(y,m,j),T3(y,g,j),!0}return!1}function aC(m,g,y,j){if(j={lane:2,revertLane:MC(),gesture:null,action:j,hasEagerState:!1,eagerState:null,next:null},I0(m)){if(g)throw Error(s(479))}else g=v1(m,y,j,2),g!==null&&Ks(g,m,2)}function I0(m){var g=m.alternate;return m===Zt||g!==null&&g===Zt}function A3(m,g){gm=E0=!0;var y=m.pending;y===null?g.next=g:(g.next=y.next,y.next=g),m.pending=g}function T3(m,g,y){if((y&4194048)!==0){var j=g.lanes;j&=m.pendingLanes,y|=j,g.lanes=y,yt(m,y)}}var Th={readContext:hs,use:P0,useCallback:ma,useContext:ma,useEffect:ma,useImperativeHandle:ma,useLayoutEffect:ma,useInsertionEffect:ma,useMemo:ma,useReducer:ma,useRef:ma,useState:ma,useDebugValue:ma,useDeferredValue:ma,useTransition:ma,useSyncExternalStore:ma,useId:ma,useHostTransitionStatus:ma,useFormState:ma,useActionState:ma,useOptimistic:ma,useMemoCache:ma,useCacheRefresh:ma};Th.useEffectEvent=ma;var E3={readContext:hs,use:P0,useCallback:function(m,g){return Ms().memoizedState=[m,g===void 0?null:g],m},useContext:hs,useEffect:m3,useImperativeHandle:function(m,g,y){y=y!=null?y.concat([m]):null,O0(4194308,4,p3.bind(null,g,m),y)},useLayoutEffect:function(m,g){return O0(4194308,4,m,g)},useInsertionEffect:function(m,g){O0(4,2,m,g)},useMemo:function(m,g){var y=Ms();g=g===void 0?null:g;var j=m();if(Pd){nt(!0);try{m()}finally{nt(!1)}}return y.memoizedState=[j,g],j},useReducer:function(m,g,y){var j=Ms();if(y!==void 0){var P=y(g);if(Pd){nt(!0);try{y(g)}finally{nt(!1)}}}else P=g;return j.memoizedState=j.baseState=P,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:P},j.queue=m,m=m.dispatch=tte.bind(null,Zt,m),[j.memoizedState,m]},useRef:function(m){var g=Ms();return m={current:m},g.memoizedState=m},useState:function(m){m=K1(m);var g=m.queue,y=_3.bind(null,Zt,g);return g.dispatch=y,[m.memoizedState,y]},useDebugValue:J1,useDeferredValue:function(m,g){var y=Ms();return eC(y,m,g)},useTransition:function(){var m=K1(!1);return m=w3.bind(null,Zt,m.queue,!0,!1),Ms().memoizedState=m,[!1,m]},useSyncExternalStore:function(m,g,y){var j=Zt,P=Ms();if(mn){if(y===void 0)throw Error(s(407));y=y()}else{if(y=g(),zn===null)throw Error(s(349));(ln&127)!==0||KO(j,g,y)}P.memoizedState=y;var O={value:y,getSnapshot:g};return P.queue=O,m3(ZO.bind(null,j,O,m),[m]),j.flags|=2048,xm(9,{destroy:void 0},XO.bind(null,j,O,y,g),null),y},useId:function(){var m=Ms(),g=zn.identifierPrefix;if(mn){var y=Vi,j=qi;y=(j&~(1<<32-Je(j)-1)).toString(32)+y,g="_"+g+"R_"+y,y=k0++,0<y&&(g+="H"+y.toString(32)),g+="_"}else y=Yee++,g="_"+g+"r_"+y.toString(32)+"_";return m.memoizedState=g},useHostTransitionStatus:nC,useFormState:o3,useActionState:o3,useOptimistic:function(m){var g=Ms();g.memoizedState=g.baseState=m;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return g.queue=y,g=aC.bind(null,Zt,!0,y),y.dispatch=g,[m,g]},useMemoCache:V1,useCacheRefresh:function(){return Ms().memoizedState=ete.bind(null,Zt)},useEffectEvent:function(m){var g=Ms(),y={impl:m};return g.memoizedState=y,function(){if((Nn&2)!==0)throw Error(s(440));return y.impl.apply(void 0,arguments)}}},sC={readContext:hs,use:P0,useCallback:y3,useContext:hs,useEffect:Z1,useImperativeHandle:x3,useInsertionEffect:h3,useLayoutEffect:g3,useMemo:b3,useReducer:D0,useRef:u3,useState:function(){return D0(Vo)},useDebugValue:J1,useDeferredValue:function(m,g){var y=Na();return v3(y,On.memoizedState,m,g)},useTransition:function(){var m=D0(Vo)[0],g=Na().memoizedState;return[typeof m=="boolean"?m:_h(m),g]},useSyncExternalStore:QO,useId:C3,useHostTransitionStatus:nC,useFormState:l3,useActionState:l3,useOptimistic:function(m,g){var y=Na();return t3(y,On,m,g)},useMemoCache:V1,useCacheRefresh:S3};sC.useEffectEvent=f3;var k3={readContext:hs,use:P0,useCallback:y3,useContext:hs,useEffect:Z1,useImperativeHandle:x3,useInsertionEffect:h3,useLayoutEffect:g3,useMemo:b3,useReducer:Q1,useRef:u3,useState:function(){return Q1(Vo)},useDebugValue:J1,useDeferredValue:function(m,g){var y=Na();return On===null?eC(y,m,g):v3(y,On.memoizedState,m,g)},useTransition:function(){var m=Q1(Vo)[0],g=Na().memoizedState;return[typeof m=="boolean"?m:_h(m),g]},useSyncExternalStore:QO,useId:C3,useHostTransitionStatus:nC,useFormState:d3,useActionState:d3,useOptimistic:function(m,g){var y=Na();return On!==null?t3(y,On,m,g):(y.baseState=m,[m,y.queue.dispatch])},useMemoCache:V1,useCacheRefresh:S3};k3.useEffectEvent=f3;function rC(m,g,y,j){g=m.memoizedState,y=y(j,g),y=y==null?g:f({},g,y),m.memoizedState=y,m.lanes===0&&(m.updateQueue.baseState=y)}var iC={enqueueSetState:function(m,g,y){m=m._reactInternals;var j=Nr(),P=lc(j);P.payload=g,y!=null&&(P.callback=y),g=cc(m,P,j),g!==null&&(Ks(g,m,j),Nh(g,m,j))},enqueueReplaceState:function(m,g,y){m=m._reactInternals;var j=Nr(),P=lc(j);P.tag=1,P.payload=g,y!=null&&(P.callback=y),g=cc(m,P,j),g!==null&&(Ks(g,m,j),Nh(g,m,j))},enqueueForceUpdate:function(m,g){m=m._reactInternals;var y=Nr(),j=lc(y);j.tag=2,g!=null&&(j.callback=g),g=cc(m,j,y),g!==null&&(Ks(g,m,y),Nh(g,m,y))}};function L3(m,g,y,j,P,O,K){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(j,O,K):g.prototype&&g.prototype.isPureReactComponent?!hh(y,j)||!hh(P,O):!0}function P3(m,g,y,j){m=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(y,j),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(y,j),g.state!==m&&iC.enqueueReplaceState(g,g.state,null)}function Dd(m,g){var y=g;if("ref"in g){y={};for(var j in g)j!=="ref"&&(y[j]=g[j])}if(m=m.defaultProps){y===g&&(y=f({},y));for(var P in m)y[P]===void 0&&(y[P]=m[P])}return y}function D3(m){h0(m)}function O3(m){console.error(m)}function M3(m){h0(m)}function $0(m,g){try{var y=m.onUncaughtError;y(g.value,{componentStack:g.stack})}catch(j){setTimeout(function(){throw j})}}function I3(m,g,y){try{var j=m.onCaughtError;j(y.value,{componentStack:y.stack,errorBoundary:g.tag===1?g.stateNode:null})}catch(P){setTimeout(function(){throw P})}}function oC(m,g,y){return y=lc(y),y.tag=3,y.payload={element:null},y.callback=function(){$0(m,g)},y}function $3(m){return m=lc(m),m.tag=3,m}function R3(m,g,y,j){var P=y.type.getDerivedStateFromError;if(typeof P=="function"){var O=j.value;m.payload=function(){return P(O)},m.callback=function(){I3(g,y,j)}}var K=y.stateNode;K!==null&&typeof K.componentDidCatch=="function"&&(m.callback=function(){I3(g,y,j),typeof P!="function"&&(gc===null?gc=new Set([this]):gc.add(this));var Ce=j.stack;this.componentDidCatch(j.value,{componentStack:Ce!==null?Ce:""})})}function nte(m,g,y,j,P){if(y.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){if(g=y.alternate,g!==null&&cm(g,y,P,!0),y=yr.current,y!==null){switch(y.tag){case 31:case 13:return qr===null?Q0():y.alternate===null&&fa===0&&(fa=3),y.flags&=-257,y.flags|=65536,y.lanes=P,j===C0?y.flags|=16384:(g=y.updateQueue,g===null?y.updateQueue=new Set([j]):g.add(j),PC(m,j,P)),!1;case 22:return y.flags|=65536,j===C0?y.flags|=16384:(g=y.updateQueue,g===null?(g={transitions:null,markerInstances:null,retryQueue:new Set([j])},y.updateQueue=g):(y=g.retryQueue,y===null?g.retryQueue=new Set([j]):y.add(j)),PC(m,j,P)),!1}throw Error(s(435,y.tag))}return PC(m,j,P),Q0(),!1}if(mn)return g=yr.current,g!==null?((g.flags&65536)===0&&(g.flags|=256),g.flags|=65536,g.lanes=P,j!==_1&&(m=Error(s(422),{cause:j}),xh(Br(m,y)))):(j!==_1&&(g=Error(s(423),{cause:j}),xh(Br(g,y))),m=m.current.alternate,m.flags|=65536,P&=-P,m.lanes|=P,j=Br(j,y),P=oC(m.stateNode,j,P),$1(m,P),fa!==4&&(fa=2)),!1;var O=Error(s(520),{cause:j});if(O=Br(O,y),Ih===null?Ih=[O]:Ih.push(O),fa!==4&&(fa=2),g===null)return!0;j=Br(j,y),y=g;do{switch(y.tag){case 3:return y.flags|=65536,m=P&-P,y.lanes|=m,m=oC(y.stateNode,j,m),$1(y,m),!1;case 1:if(g=y.type,O=y.stateNode,(y.flags&128)===0&&(typeof g.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(gc===null||!gc.has(O))))return y.flags|=65536,P&=-P,y.lanes|=P,P=$3(P),R3(P,m,y,j),$1(y,P),!1}y=y.return}while(y!==null);return!1}var lC=Error(s(461)),ka=!1;function gs(m,g,y,j){g.child=m===null?BO(g,null,y,j):Ld(g,m.child,y,j)}function z3(m,g,y,j,P){y=y.render;var O=g.ref;if("ref"in j){var K={};for(var Ce in j)Ce!=="ref"&&(K[Ce]=j[Ce])}else K=j;return Ad(g),j=H1(m,g,y,K,O,P),Ce=G1(),m!==null&&!ka?(W1(m,g,P),Yo(m,g,P)):(mn&&Ce&&C1(g),g.flags|=1,gs(m,g,j,P),g.child)}function U3(m,g,y,j,P){if(m===null){var O=y.type;return typeof O=="function"&&!w1(O)&&O.defaultProps===void 0&&y.compare===null?(g.tag=15,g.type=O,F3(m,g,O,j,P)):(m=y0(y.type,null,j,g,g.mode,P),m.ref=g.ref,m.return=g,g.child=m)}if(O=m.child,!pC(m,P)){var K=O.memoizedProps;if(y=y.compare,y=y!==null?y:hh,y(K,j)&&m.ref===g.ref)return Yo(m,g,P)}return g.flags|=1,m=Bo(O,j),m.ref=g.ref,m.return=g,g.child=m}function F3(m,g,y,j,P){if(m!==null){var O=m.memoizedProps;if(hh(O,j)&&m.ref===g.ref)if(ka=!1,g.pendingProps=j=O,pC(m,P))(m.flags&131072)!==0&&(ka=!0);else return g.lanes=m.lanes,Yo(m,g,P)}return cC(m,g,y,j,P)}function B3(m,g,y,j){var P=j.children,O=m!==null?m.memoizedState:null;if(m===null&&g.stateNode===null&&(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),j.mode==="hidden"){if((g.flags&128)!==0){if(O=O!==null?O.baseLanes|y:y,m!==null){for(j=g.child=m.child,P=0;j!==null;)P=P|j.lanes|j.childLanes,j=j.sibling;j=P&~O}else j=0,g.child=null;return H3(m,g,O,y,j)}if((y&536870912)!==0)g.memoizedState={baseLanes:0,cachePool:null},m!==null&&N0(g,O!==null?O.cachePool:null),O!==null?WO(g,O):z1(),qO(g);else return j=g.lanes=536870912,H3(m,g,O!==null?O.baseLanes|y:y,y,j)}else O!==null?(N0(g,O.cachePool),WO(g,O),uc(),g.memoizedState=null):(m!==null&&N0(g,null),z1(),uc());return gs(m,g,P,y),g.child}function Eh(m,g){return m!==null&&m.tag===22||g.stateNode!==null||(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.sibling}function H3(m,g,y,j,P){var O=D1();return O=O===null?null:{parent:Ta._currentValue,pool:O},g.memoizedState={baseLanes:y,cachePool:O},m!==null&&N0(g,null),z1(),qO(g),m!==null&&cm(m,g,j,!0),g.childLanes=P,null}function R0(m,g){return g=U0({mode:g.mode,children:g.children},m.mode),g.ref=m.ref,m.child=g,g.return=m,g}function G3(m,g,y){return Ld(g,m.child,null,y),m=R0(g,g.pendingProps),m.flags|=2,br(g),g.memoizedState=null,m}function ate(m,g,y){var j=g.pendingProps,P=(g.flags&128)!==0;if(g.flags&=-129,m===null){if(mn){if(j.mode==="hidden")return m=R0(g,j),g.lanes=536870912,Eh(null,m);if(F1(g),(m=Vn)?(m=nM(m,Wr),m=m!==null&&m.data==="&"?m:null,m!==null&&(g.memoizedState={dehydrated:m,treeContext:ac!==null?{id:qi,overflow:Vi}:null,retryLane:536870912,hydrationErrors:null},y=AO(m),y.return=g,g.child=y,fs=g,Vn=null)):m=null,m===null)throw rc(g);return g.lanes=536870912,null}return R0(g,j)}var O=m.memoizedState;if(O!==null){var K=O.dehydrated;if(F1(g),P)if(g.flags&256)g.flags&=-257,g=G3(m,g,y);else if(g.memoizedState!==null)g.child=m.child,g.flags|=128,g=null;else throw Error(s(558));else if(ka||cm(m,g,y,!1),P=(y&m.childLanes)!==0,ka||P){if(j=zn,j!==null&&(K=Tt(j,y),K!==0&&K!==O.retryLane))throw O.retryLane=K,jd(m,K),Ks(j,m,K),lC;Q0(),g=G3(m,g,y)}else m=O.treeContext,Vn=Vr(K.nextSibling),fs=g,mn=!0,sc=null,Wr=!1,m!==null&&kO(g,m),g=R0(g,j),g.flags|=4096;return g}return m=Bo(m.child,{mode:j.mode,children:j.children}),m.ref=g.ref,g.child=m,m.return=g,m}function z0(m,g){var y=g.ref;if(y===null)m!==null&&m.ref!==null&&(g.flags|=4194816);else{if(typeof y!="function"&&typeof y!="object")throw Error(s(284));(m===null||m.ref!==y)&&(g.flags|=4194816)}}function cC(m,g,y,j,P){return Ad(g),y=H1(m,g,y,j,void 0,P),j=G1(),m!==null&&!ka?(W1(m,g,P),Yo(m,g,P)):(mn&&j&&C1(g),g.flags|=1,gs(m,g,y,P),g.child)}function W3(m,g,y,j,P,O){return Ad(g),g.updateQueue=null,y=YO(g,j,y,P),VO(m),j=G1(),m!==null&&!ka?(W1(m,g,O),Yo(m,g,O)):(mn&&j&&C1(g),g.flags|=1,gs(m,g,y,O),g.child)}function q3(m,g,y,j,P){if(Ad(g),g.stateNode===null){var O=rm,K=y.contextType;typeof K=="object"&&K!==null&&(O=hs(K)),O=new y(j,O),g.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,O.updater=iC,g.stateNode=O,O._reactInternals=g,O=g.stateNode,O.props=j,O.state=g.memoizedState,O.refs={},M1(g),K=y.contextType,O.context=typeof K=="object"&&K!==null?hs(K):rm,O.state=g.memoizedState,K=y.getDerivedStateFromProps,typeof K=="function"&&(rC(g,y,K,j),O.state=g.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(K=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),K!==O.state&&iC.enqueueReplaceState(O,O.state,null),Ch(g,j,O,P),jh(),O.state=g.memoizedState),typeof O.componentDidMount=="function"&&(g.flags|=4194308),j=!0}else if(m===null){O=g.stateNode;var Ce=g.memoizedProps,ze=Dd(y,Ce);O.props=ze;var tt=O.context,ct=y.contextType;K=rm,typeof ct=="object"&&ct!==null&&(K=hs(ct));var ht=y.getDerivedStateFromProps;ct=typeof ht=="function"||typeof O.getSnapshotBeforeUpdate=="function",Ce=g.pendingProps!==Ce,ct||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(Ce||tt!==K)&&P3(g,O,j,K),oc=!1;var st=g.memoizedState;O.state=st,Ch(g,j,O,P),jh(),tt=g.memoizedState,Ce||st!==tt||oc?(typeof ht=="function"&&(rC(g,y,ht,j),tt=g.memoizedState),(ze=oc||L3(g,y,ze,j,st,tt,K))?(ct||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(g.flags|=4194308)):(typeof O.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=j,g.memoizedState=tt),O.props=j,O.state=tt,O.context=K,j=ze):(typeof O.componentDidMount=="function"&&(g.flags|=4194308),j=!1)}else{O=g.stateNode,I1(m,g),K=g.memoizedProps,ct=Dd(y,K),O.props=ct,ht=g.pendingProps,st=O.context,tt=y.contextType,ze=rm,typeof tt=="object"&&tt!==null&&(ze=hs(tt)),Ce=y.getDerivedStateFromProps,(tt=typeof Ce=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(K!==ht||st!==ze)&&P3(g,O,j,ze),oc=!1,st=g.memoizedState,O.state=st,Ch(g,j,O,P),jh();var lt=g.memoizedState;K!==ht||st!==lt||oc||m!==null&&m.dependencies!==null&&v0(m.dependencies)?(typeof Ce=="function"&&(rC(g,y,Ce,j),lt=g.memoizedState),(ct=oc||L3(g,y,ct,j,st,lt,ze)||m!==null&&m.dependencies!==null&&v0(m.dependencies))?(tt||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(j,lt,ze),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(j,lt,ze)),typeof O.componentDidUpdate=="function"&&(g.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof O.componentDidUpdate!="function"||K===m.memoizedProps&&st===m.memoizedState||(g.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||K===m.memoizedProps&&st===m.memoizedState||(g.flags|=1024),g.memoizedProps=j,g.memoizedState=lt),O.props=j,O.state=lt,O.context=ze,j=ct):(typeof O.componentDidUpdate!="function"||K===m.memoizedProps&&st===m.memoizedState||(g.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||K===m.memoizedProps&&st===m.memoizedState||(g.flags|=1024),j=!1)}return O=j,z0(m,g),j=(g.flags&128)!==0,O||j?(O=g.stateNode,y=j&&typeof y.getDerivedStateFromError!="function"?null:O.render(),g.flags|=1,m!==null&&j?(g.child=Ld(g,m.child,null,P),g.child=Ld(g,null,y,P)):gs(m,g,y,P),g.memoizedState=O.state,m=g.child):m=Yo(m,g,P),m}function V3(m,g,y,j){return Sd(),g.flags|=256,gs(m,g,y,j),g.child}var dC={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function uC(m){return{baseLanes:m,cachePool:IO()}}function mC(m,g,y){return m=m!==null?m.childLanes&~y:0,g&&(m|=wr),m}function Y3(m,g,y){var j=g.pendingProps,P=!1,O=(g.flags&128)!==0,K;if((K=O)||(K=m!==null&&m.memoizedState===null?!1:(wa.current&2)!==0),K&&(P=!0,g.flags&=-129),K=(g.flags&32)!==0,g.flags&=-33,m===null){if(mn){if(P?dc(g):uc(),(m=Vn)?(m=nM(m,Wr),m=m!==null&&m.data!=="&"?m:null,m!==null&&(g.memoizedState={dehydrated:m,treeContext:ac!==null?{id:qi,overflow:Vi}:null,retryLane:536870912,hydrationErrors:null},y=AO(m),y.return=g,g.child=y,fs=g,Vn=null)):m=null,m===null)throw rc(g);return YC(m)?g.lanes=32:g.lanes=536870912,null}var Ce=j.children;return j=j.fallback,P?(uc(),P=g.mode,Ce=U0({mode:"hidden",children:Ce},P),j=Cd(j,P,y,null),Ce.return=g,j.return=g,Ce.sibling=j,g.child=Ce,j=g.child,j.memoizedState=uC(y),j.childLanes=mC(m,K,y),g.memoizedState=dC,Eh(null,j)):(dc(g),fC(g,Ce))}var ze=m.memoizedState;if(ze!==null&&(Ce=ze.dehydrated,Ce!==null)){if(O)g.flags&256?(dc(g),g.flags&=-257,g=hC(m,g,y)):g.memoizedState!==null?(uc(),g.child=m.child,g.flags|=128,g=null):(uc(),Ce=j.fallback,P=g.mode,j=U0({mode:"visible",children:j.children},P),Ce=Cd(Ce,P,y,null),Ce.flags|=2,j.return=g,Ce.return=g,j.sibling=Ce,g.child=j,Ld(g,m.child,null,y),j=g.child,j.memoizedState=uC(y),j.childLanes=mC(m,K,y),g.memoizedState=dC,g=Eh(null,j));else if(dc(g),YC(Ce)){if(K=Ce.nextSibling&&Ce.nextSibling.dataset,K)var tt=K.dgst;K=tt,j=Error(s(419)),j.stack="",j.digest=K,xh({value:j,source:null,stack:null}),g=hC(m,g,y)}else if(ka||cm(m,g,y,!1),K=(y&m.childLanes)!==0,ka||K){if(K=zn,K!==null&&(j=Tt(K,y),j!==0&&j!==ze.retryLane))throw ze.retryLane=j,jd(m,j),Ks(K,m,j),lC;VC(Ce)||Q0(),g=hC(m,g,y)}else VC(Ce)?(g.flags|=192,g.child=m.child,g=null):(m=ze.treeContext,Vn=Vr(Ce.nextSibling),fs=g,mn=!0,sc=null,Wr=!1,m!==null&&kO(g,m),g=fC(g,j.children),g.flags|=4096);return g}return P?(uc(),Ce=j.fallback,P=g.mode,ze=m.child,tt=ze.sibling,j=Bo(ze,{mode:"hidden",children:j.children}),j.subtreeFlags=ze.subtreeFlags&65011712,tt!==null?Ce=Bo(tt,Ce):(Ce=Cd(Ce,P,y,null),Ce.flags|=2),Ce.return=g,j.return=g,j.sibling=Ce,g.child=j,Eh(null,j),j=g.child,Ce=m.child.memoizedState,Ce===null?Ce=uC(y):(P=Ce.cachePool,P!==null?(ze=Ta._currentValue,P=P.parent!==ze?{parent:ze,pool:ze}:P):P=IO(),Ce={baseLanes:Ce.baseLanes|y,cachePool:P}),j.memoizedState=Ce,j.childLanes=mC(m,K,y),g.memoizedState=dC,Eh(m.child,j)):(dc(g),y=m.child,m=y.sibling,y=Bo(y,{mode:"visible",children:j.children}),y.return=g,y.sibling=null,m!==null&&(K=g.deletions,K===null?(g.deletions=[m],g.flags|=16):K.push(m)),g.child=y,g.memoizedState=null,y)}function fC(m,g){return g=U0({mode:"visible",children:g},m.mode),g.return=m,m.child=g}function U0(m,g){return m=xr(22,m,null,g),m.lanes=0,m}function hC(m,g,y){return Ld(g,m.child,null,y),m=fC(g,g.pendingProps.children),m.flags|=2,g.memoizedState=null,m}function Q3(m,g,y){m.lanes|=g;var j=m.alternate;j!==null&&(j.lanes|=g),E1(m.return,g,y)}function gC(m,g,y,j,P,O){var K=m.memoizedState;K===null?m.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:j,tail:y,tailMode:P,treeForkCount:O}:(K.isBackwards=g,K.rendering=null,K.renderingStartTime=0,K.last=j,K.tail=y,K.tailMode=P,K.treeForkCount=O)}function K3(m,g,y){var j=g.pendingProps,P=j.revealOrder,O=j.tail;j=j.children;var K=wa.current,Ce=(K&2)!==0;if(Ce?(K=K&1|2,g.flags|=128):K&=1,Ne(wa,K),gs(m,g,j,y),j=mn?ph:0,!Ce&&m!==null&&(m.flags&128)!==0)e:for(m=g.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&Q3(m,y,g);else if(m.tag===19)Q3(m,y,g);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===g)break e;for(;m.sibling===null;){if(m.return===null||m.return===g)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}switch(P){case"forwards":for(y=g.child,P=null;y!==null;)m=y.alternate,m!==null&&T0(m)===null&&(P=y),y=y.sibling;y=P,y===null?(P=g.child,g.child=null):(P=y.sibling,y.sibling=null),gC(g,!1,P,y,O,j);break;case"backwards":case"unstable_legacy-backwards":for(y=null,P=g.child,g.child=null;P!==null;){if(m=P.alternate,m!==null&&T0(m)===null){g.child=P;break}m=P.sibling,P.sibling=y,y=P,P=m}gC(g,!0,y,null,O,j);break;case"together":gC(g,!1,null,null,void 0,j);break;default:g.memoizedState=null}return g.child}function Yo(m,g,y){if(m!==null&&(g.dependencies=m.dependencies),hc|=g.lanes,(y&g.childLanes)===0)if(m!==null){if(cm(m,g,y,!1),(y&g.childLanes)===0)return null}else return null;if(m!==null&&g.child!==m.child)throw Error(s(153));if(g.child!==null){for(m=g.child,y=Bo(m,m.pendingProps),g.child=y,y.return=g;m.sibling!==null;)m=m.sibling,y=y.sibling=Bo(m,m.pendingProps),y.return=g;y.sibling=null}return g.child}function pC(m,g){return(m.lanes&g)!==0?!0:(m=m.dependencies,!!(m!==null&&v0(m)))}function ste(m,g,y){switch(g.tag){case 3:Me(g,g.stateNode.containerInfo),ic(g,Ta,m.memoizedState.cache),Sd();break;case 27:case 5:Be(g);break;case 4:Me(g,g.stateNode.containerInfo);break;case 10:ic(g,g.type,g.memoizedProps.value);break;case 31:if(g.memoizedState!==null)return g.flags|=128,F1(g),null;break;case 13:var j=g.memoizedState;if(j!==null)return j.dehydrated!==null?(dc(g),g.flags|=128,null):(y&g.child.childLanes)!==0?Y3(m,g,y):(dc(g),m=Yo(m,g,y),m!==null?m.sibling:null);dc(g);break;case 19:var P=(m.flags&128)!==0;if(j=(y&g.childLanes)!==0,j||(cm(m,g,y,!1),j=(y&g.childLanes)!==0),P){if(j)return K3(m,g,y);g.flags|=128}if(P=g.memoizedState,P!==null&&(P.rendering=null,P.tail=null,P.lastEffect=null),Ne(wa,wa.current),j)break;return null;case 22:return g.lanes=0,B3(m,g,y,g.pendingProps);case 24:ic(g,Ta,m.memoizedState.cache)}return Yo(m,g,y)}function X3(m,g,y){if(m!==null)if(m.memoizedProps!==g.pendingProps)ka=!0;else{if(!pC(m,y)&&(g.flags&128)===0)return ka=!1,ste(m,g,y);ka=(m.flags&131072)!==0}else ka=!1,mn&&(g.flags&1048576)!==0&&EO(g,ph,g.index);switch(g.lanes=0,g.tag){case 16:e:{var j=g.pendingProps;if(m=Ed(g.elementType),g.type=m,typeof m=="function")w1(m)?(j=Dd(m,j),g.tag=1,g=q3(null,g,m,j,y)):(g.tag=0,g=cC(null,g,m,j,y));else{if(m!=null){var P=m.$$typeof;if(P===E){g.tag=11,g=z3(null,g,m,j,y);break e}else if(P===T){g.tag=14,g=U3(null,g,m,j,y);break e}}throw g=W(m)||m,Error(s(306,g,""))}}return g;case 0:return cC(m,g,g.type,g.pendingProps,y);case 1:return j=g.type,P=Dd(j,g.pendingProps),q3(m,g,j,P,y);case 3:e:{if(Me(g,g.stateNode.containerInfo),m===null)throw Error(s(387));j=g.pendingProps;var O=g.memoizedState;P=O.element,I1(m,g),Ch(g,j,null,y);var K=g.memoizedState;if(j=K.cache,ic(g,Ta,j),j!==O.cache&&k1(g,[Ta],y,!0),jh(),j=K.element,O.isDehydrated)if(O={element:j,isDehydrated:!1,cache:K.cache},g.updateQueue.baseState=O,g.memoizedState=O,g.flags&256){g=V3(m,g,j,y);break e}else if(j!==P){P=Br(Error(s(424)),g),xh(P),g=V3(m,g,j,y);break e}else for(m=g.stateNode.containerInfo,m.nodeType===9?m=m.body:m=m.nodeName==="HTML"?m.ownerDocument.body:m,Vn=Vr(m.firstChild),fs=g,mn=!0,sc=null,Wr=!0,y=BO(g,null,j,y),g.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling;else{if(Sd(),j===P){g=Yo(m,g,y);break e}gs(m,g,j,y)}g=g.child}return g;case 26:return z0(m,g),m===null?(y=lM(g.type,null,g.pendingProps,null))?g.memoizedState=y:mn||(y=g.type,m=g.pendingProps,j=ny(je.current).createElement(y),j[Nt]=g,j[L]=m,ps(j,y,m),Ua(j),g.stateNode=j):g.memoizedState=lM(g.type,m.memoizedProps,g.pendingProps,m.memoizedState),null;case 27:return Be(g),m===null&&mn&&(j=g.stateNode=rM(g.type,g.pendingProps,je.current),fs=g,Wr=!0,P=Vn,bc(g.type)?(QC=P,Vn=Vr(j.firstChild)):Vn=P),gs(m,g,g.pendingProps.children,y),z0(m,g),m===null&&(g.flags|=4194304),g.child;case 5:return m===null&&mn&&((P=j=Vn)&&(j=Ote(j,g.type,g.pendingProps,Wr),j!==null?(g.stateNode=j,fs=g,Vn=Vr(j.firstChild),Wr=!1,P=!0):P=!1),P||rc(g)),Be(g),P=g.type,O=g.pendingProps,K=m!==null?m.memoizedProps:null,j=O.children,GC(P,O)?j=null:K!==null&&GC(P,K)&&(g.flags|=32),g.memoizedState!==null&&(P=H1(m,g,Qee,null,null,y),Gh._currentValue=P),z0(m,g),gs(m,g,j,y),g.child;case 6:return m===null&&mn&&((m=y=Vn)&&(y=Mte(y,g.pendingProps,Wr),y!==null?(g.stateNode=y,fs=g,Vn=null,m=!0):m=!1),m||rc(g)),null;case 13:return Y3(m,g,y);case 4:return Me(g,g.stateNode.containerInfo),j=g.pendingProps,m===null?g.child=Ld(g,null,j,y):gs(m,g,j,y),g.child;case 11:return z3(m,g,g.type,g.pendingProps,y);case 7:return gs(m,g,g.pendingProps,y),g.child;case 8:return gs(m,g,g.pendingProps.children,y),g.child;case 12:return gs(m,g,g.pendingProps.children,y),g.child;case 10:return j=g.pendingProps,ic(g,g.type,j.value),gs(m,g,j.children,y),g.child;case 9:return P=g.type._context,j=g.pendingProps.children,Ad(g),P=hs(P),j=j(P),g.flags|=1,gs(m,g,j,y),g.child;case 14:return U3(m,g,g.type,g.pendingProps,y);case 15:return F3(m,g,g.type,g.pendingProps,y);case 19:return K3(m,g,y);case 31:return ate(m,g,y);case 22:return B3(m,g,y,g.pendingProps);case 24:return Ad(g),j=hs(Ta),m===null?(P=D1(),P===null&&(P=zn,O=L1(),P.pooledCache=O,O.refCount++,O!==null&&(P.pooledCacheLanes|=y),P=O),g.memoizedState={parent:j,cache:P},M1(g),ic(g,Ta,P)):((m.lanes&y)!==0&&(I1(m,g),Ch(g,null,null,y),jh()),P=m.memoizedState,O=g.memoizedState,P.parent!==j?(P={parent:j,cache:j},g.memoizedState=P,g.lanes===0&&(g.memoizedState=g.updateQueue.baseState=P),ic(g,Ta,j)):(j=O.cache,ic(g,Ta,j),j!==P.cache&&k1(g,[Ta],y,!0))),gs(m,g,g.pendingProps.children,y),g.child;case 29:throw g.pendingProps}throw Error(s(156,g.tag))}function Qo(m){m.flags|=4}function xC(m,g,y,j,P){if((g=(m.mode&32)!==0)&&(g=!1),g){if(m.flags|=16777216,(P&335544128)===P)if(m.stateNode.complete)m.flags|=8192;else if(C5())m.flags|=8192;else throw kd=C0,O1}else m.flags&=-16777217}function Z3(m,g){if(g.type!=="stylesheet"||(g.state.loading&4)!==0)m.flags&=-16777217;else if(m.flags|=16777216,!fM(g))if(C5())m.flags|=8192;else throw kd=C0,O1}function F0(m,g){g!==null&&(m.flags|=4),m.flags&16384&&(g=m.tag!==22?ue():536870912,m.lanes|=g,wm|=g)}function kh(m,g){if(!mn)switch(m.tailMode){case"hidden":g=m.tail;for(var y=null;g!==null;)g.alternate!==null&&(y=g),g=g.sibling;y===null?m.tail=null:y.sibling=null;break;case"collapsed":y=m.tail;for(var j=null;y!==null;)y.alternate!==null&&(j=y),y=y.sibling;j===null?g||m.tail===null?m.tail=null:m.tail.sibling=null:j.sibling=null}}function Yn(m){var g=m.alternate!==null&&m.alternate.child===m.child,y=0,j=0;if(g)for(var P=m.child;P!==null;)y|=P.lanes|P.childLanes,j|=P.subtreeFlags&65011712,j|=P.flags&65011712,P.return=m,P=P.sibling;else for(P=m.child;P!==null;)y|=P.lanes|P.childLanes,j|=P.subtreeFlags,j|=P.flags,P.return=m,P=P.sibling;return m.subtreeFlags|=j,m.childLanes=y,g}function rte(m,g,y){var j=g.pendingProps;switch(S1(g),g.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yn(g),null;case 1:return Yn(g),null;case 3:return y=g.stateNode,j=null,m!==null&&(j=m.memoizedState.cache),g.memoizedState.cache!==j&&(g.flags|=2048),Wo(Ta),ve(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(m===null||m.child===null)&&(lm(g)?Qo(g):m===null||m.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,A1())),Yn(g),null;case 26:var P=g.type,O=g.memoizedState;return m===null?(Qo(g),O!==null?(Yn(g),Z3(g,O)):(Yn(g),xC(g,P,null,j,y))):O?O!==m.memoizedState?(Qo(g),Yn(g),Z3(g,O)):(Yn(g),g.flags&=-16777217):(m=m.memoizedProps,m!==j&&Qo(g),Yn(g),xC(g,P,m,j,y)),null;case 27:if(ke(g),y=je.current,P=g.type,m!==null&&g.stateNode!=null)m.memoizedProps!==j&&Qo(g);else{if(!j){if(g.stateNode===null)throw Error(s(166));return Yn(g),null}m=re.current,lm(g)?LO(g):(m=rM(P,j,y),g.stateNode=m,Qo(g))}return Yn(g),null;case 5:if(ke(g),P=g.type,m!==null&&g.stateNode!=null)m.memoizedProps!==j&&Qo(g);else{if(!j){if(g.stateNode===null)throw Error(s(166));return Yn(g),null}if(O=re.current,lm(g))LO(g);else{var K=ny(je.current);switch(O){case 1:O=K.createElementNS("http://www.w3.org/2000/svg",P);break;case 2:O=K.createElementNS("http://www.w3.org/1998/Math/MathML",P);break;default:switch(P){case"svg":O=K.createElementNS("http://www.w3.org/2000/svg",P);break;case"math":O=K.createElementNS("http://www.w3.org/1998/Math/MathML",P);break;case"script":O=K.createElement("div"),O.innerHTML="<script><\/script>",O=O.removeChild(O.firstChild);break;case"select":O=typeof j.is=="string"?K.createElement("select",{is:j.is}):K.createElement("select"),j.multiple?O.multiple=!0:j.size&&(O.size=j.size);break;default:O=typeof j.is=="string"?K.createElement(P,{is:j.is}):K.createElement(P)}}O[Nt]=g,O[L]=j;e:for(K=g.child;K!==null;){if(K.tag===5||K.tag===6)O.appendChild(K.stateNode);else if(K.tag!==4&&K.tag!==27&&K.child!==null){K.child.return=K,K=K.child;continue}if(K===g)break e;for(;K.sibling===null;){if(K.return===null||K.return===g)break e;K=K.return}K.sibling.return=K.return,K=K.sibling}g.stateNode=O;e:switch(ps(O,P,j),P){case"button":case"input":case"select":case"textarea":j=!!j.autoFocus;break e;case"img":j=!0;break e;default:j=!1}j&&Qo(g)}}return Yn(g),xC(g,g.type,m===null?null:m.memoizedProps,g.pendingProps,y),null;case 6:if(m&&g.stateNode!=null)m.memoizedProps!==j&&Qo(g);else{if(typeof j!="string"&&g.stateNode===null)throw Error(s(166));if(m=je.current,lm(g)){if(m=g.stateNode,y=g.memoizedProps,j=null,P=fs,P!==null)switch(P.tag){case 27:case 5:j=P.memoizedProps}m[Nt]=g,m=!!(m.nodeValue===y||j!==null&&j.suppressHydrationWarning===!0||Y5(m.nodeValue,y)),m||rc(g,!0)}else m=ny(m).createTextNode(j),m[Nt]=g,g.stateNode=m}return Yn(g),null;case 31:if(y=g.memoizedState,m===null||m.memoizedState!==null){if(j=lm(g),y!==null){if(m===null){if(!j)throw Error(s(318));if(m=g.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(557));m[Nt]=g}else Sd(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;Yn(g),m=!1}else y=A1(),m!==null&&m.memoizedState!==null&&(m.memoizedState.hydrationErrors=y),m=!0;if(!m)return g.flags&256?(br(g),g):(br(g),null);if((g.flags&128)!==0)throw Error(s(558))}return Yn(g),null;case 13:if(j=g.memoizedState,m===null||m.memoizedState!==null&&m.memoizedState.dehydrated!==null){if(P=lm(g),j!==null&&j.dehydrated!==null){if(m===null){if(!P)throw Error(s(318));if(P=g.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(s(317));P[Nt]=g}else Sd(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;Yn(g),P=!1}else P=A1(),m!==null&&m.memoizedState!==null&&(m.memoizedState.hydrationErrors=P),P=!0;if(!P)return g.flags&256?(br(g),g):(br(g),null)}return br(g),(g.flags&128)!==0?(g.lanes=y,g):(y=j!==null,m=m!==null&&m.memoizedState!==null,y&&(j=g.child,P=null,j.alternate!==null&&j.alternate.memoizedState!==null&&j.alternate.memoizedState.cachePool!==null&&(P=j.alternate.memoizedState.cachePool.pool),O=null,j.memoizedState!==null&&j.memoizedState.cachePool!==null&&(O=j.memoizedState.cachePool.pool),O!==P&&(j.flags|=2048)),y!==m&&y&&(g.child.flags|=8192),F0(g,g.updateQueue),Yn(g),null);case 4:return ve(),m===null&&zC(g.stateNode.containerInfo),Yn(g),null;case 10:return Wo(g.type),Yn(g),null;case 19:if(F(wa),j=g.memoizedState,j===null)return Yn(g),null;if(P=(g.flags&128)!==0,O=j.rendering,O===null)if(P)kh(j,!1);else{if(fa!==0||m!==null&&(m.flags&128)!==0)for(m=g.child;m!==null;){if(O=T0(m),O!==null){for(g.flags|=128,kh(j,!1),m=O.updateQueue,g.updateQueue=m,F0(g,m),g.subtreeFlags=0,m=y,y=g.child;y!==null;)_O(y,m),y=y.sibling;return Ne(wa,wa.current&1|2),mn&&Ho(g,j.treeForkCount),g.child}m=m.sibling}j.tail!==null&&ce()>q0&&(g.flags|=128,P=!0,kh(j,!1),g.lanes=4194304)}else{if(!P)if(m=T0(O),m!==null){if(g.flags|=128,P=!0,m=m.updateQueue,g.updateQueue=m,F0(g,m),kh(j,!0),j.tail===null&&j.tailMode==="hidden"&&!O.alternate&&!mn)return Yn(g),null}else 2*ce()-j.renderingStartTime>q0&&y!==536870912&&(g.flags|=128,P=!0,kh(j,!1),g.lanes=4194304);j.isBackwards?(O.sibling=g.child,g.child=O):(m=j.last,m!==null?m.sibling=O:g.child=O,j.last=O)}return j.tail!==null?(m=j.tail,j.rendering=m,j.tail=m.sibling,j.renderingStartTime=ce(),m.sibling=null,y=wa.current,Ne(wa,P?y&1|2:y&1),mn&&Ho(g,j.treeForkCount),m):(Yn(g),null);case 22:case 23:return br(g),U1(),j=g.memoizedState!==null,m!==null?m.memoizedState!==null!==j&&(g.flags|=8192):j&&(g.flags|=8192),j?(y&536870912)!==0&&(g.flags&128)===0&&(Yn(g),g.subtreeFlags&6&&(g.flags|=8192)):Yn(g),y=g.updateQueue,y!==null&&F0(g,y.retryQueue),y=null,m!==null&&m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(y=m.memoizedState.cachePool.pool),j=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(j=g.memoizedState.cachePool.pool),j!==y&&(g.flags|=2048),m!==null&&F(Td),null;case 24:return y=null,m!==null&&(y=m.memoizedState.cache),g.memoizedState.cache!==y&&(g.flags|=2048),Wo(Ta),Yn(g),null;case 25:return null;case 30:return null}throw Error(s(156,g.tag))}function ite(m,g){switch(S1(g),g.tag){case 1:return m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 3:return Wo(Ta),ve(),m=g.flags,(m&65536)!==0&&(m&128)===0?(g.flags=m&-65537|128,g):null;case 26:case 27:case 5:return ke(g),null;case 31:if(g.memoizedState!==null){if(br(g),g.alternate===null)throw Error(s(340));Sd()}return m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 13:if(br(g),m=g.memoizedState,m!==null&&m.dehydrated!==null){if(g.alternate===null)throw Error(s(340));Sd()}return m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 19:return F(wa),null;case 4:return ve(),null;case 10:return Wo(g.type),null;case 22:case 23:return br(g),U1(),m!==null&&F(Td),m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 24:return Wo(Ta),null;case 25:return null;default:return null}}function J3(m,g){switch(S1(g),g.tag){case 3:Wo(Ta),ve();break;case 26:case 27:case 5:ke(g);break;case 4:ve();break;case 31:g.memoizedState!==null&&br(g);break;case 13:br(g);break;case 19:F(wa);break;case 10:Wo(g.type);break;case 22:case 23:br(g),U1(),m!==null&&F(Td);break;case 24:Wo(Ta)}}function Lh(m,g){try{var y=g.updateQueue,j=y!==null?y.lastEffect:null;if(j!==null){var P=j.next;y=P;do{if((y.tag&m)===m){j=void 0;var O=y.create,K=y.inst;j=O(),K.destroy=j}y=y.next}while(y!==P)}}catch(Ce){Tn(g,g.return,Ce)}}function mc(m,g,y){try{var j=g.updateQueue,P=j!==null?j.lastEffect:null;if(P!==null){var O=P.next;j=O;do{if((j.tag&m)===m){var K=j.inst,Ce=K.destroy;if(Ce!==void 0){K.destroy=void 0,P=g;var ze=y,tt=Ce;try{tt()}catch(ct){Tn(P,ze,ct)}}}j=j.next}while(j!==O)}}catch(ct){Tn(g,g.return,ct)}}function e5(m){var g=m.updateQueue;if(g!==null){var y=m.stateNode;try{GO(g,y)}catch(j){Tn(m,m.return,j)}}}function t5(m,g,y){y.props=Dd(m.type,m.memoizedProps),y.state=m.memoizedState;try{y.componentWillUnmount()}catch(j){Tn(m,g,j)}}function Ph(m,g){try{var y=m.ref;if(y!==null){switch(m.tag){case 26:case 27:case 5:var j=m.stateNode;break;case 30:j=m.stateNode;break;default:j=m.stateNode}typeof y=="function"?m.refCleanup=y(j):y.current=j}}catch(P){Tn(m,g,P)}}function Yi(m,g){var y=m.ref,j=m.refCleanup;if(y!==null)if(typeof j=="function")try{j()}catch(P){Tn(m,g,P)}finally{m.refCleanup=null,m=m.alternate,m!=null&&(m.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(P){Tn(m,g,P)}else y.current=null}function n5(m){var g=m.type,y=m.memoizedProps,j=m.stateNode;try{e:switch(g){case"button":case"input":case"select":case"textarea":y.autoFocus&&j.focus();break e;case"img":y.src?j.src=y.src:y.srcSet&&(j.srcset=y.srcSet)}}catch(P){Tn(m,m.return,P)}}function yC(m,g,y){try{var j=m.stateNode;Tte(j,m.type,y,g),j[L]=g}catch(P){Tn(m,m.return,P)}}function a5(m){return m.tag===5||m.tag===3||m.tag===26||m.tag===27&&bc(m.type)||m.tag===4}function bC(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||a5(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&m.tag!==18;){if(m.tag===27&&bc(m.type)||m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function vC(m,g,y){var j=m.tag;if(j===5||j===6)m=m.stateNode,g?(y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y).insertBefore(m,g):(g=y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y,g.appendChild(m),y=y._reactRootContainer,y!=null||g.onclick!==null||(g.onclick=Uo));else if(j!==4&&(j===27&&bc(m.type)&&(y=m.stateNode,g=null),m=m.child,m!==null))for(vC(m,g,y),m=m.sibling;m!==null;)vC(m,g,y),m=m.sibling}function B0(m,g,y){var j=m.tag;if(j===5||j===6)m=m.stateNode,g?y.insertBefore(m,g):y.appendChild(m);else if(j!==4&&(j===27&&bc(m.type)&&(y=m.stateNode),m=m.child,m!==null))for(B0(m,g,y),m=m.sibling;m!==null;)B0(m,g,y),m=m.sibling}function s5(m){var g=m.stateNode,y=m.memoizedProps;try{for(var j=m.type,P=g.attributes;P.length;)g.removeAttributeNode(P[0]);ps(g,j,y),g[Nt]=m,g[L]=y}catch(O){Tn(m,m.return,O)}}var Ko=!1,La=!1,wC=!1,r5=typeof WeakSet=="function"?WeakSet:Set,as=null;function ote(m,g){if(m=m.containerInfo,BC=cy,m=xO(m),h1(m)){if("selectionStart"in m)var y={start:m.selectionStart,end:m.selectionEnd};else e:{y=(y=m.ownerDocument)&&y.defaultView||window;var j=y.getSelection&&y.getSelection();if(j&&j.rangeCount!==0){y=j.anchorNode;var P=j.anchorOffset,O=j.focusNode;j=j.focusOffset;try{y.nodeType,O.nodeType}catch{y=null;break e}var K=0,Ce=-1,ze=-1,tt=0,ct=0,ht=m,st=null;t:for(;;){for(var lt;ht!==y||P!==0&&ht.nodeType!==3||(Ce=K+P),ht!==O||j!==0&&ht.nodeType!==3||(ze=K+j),ht.nodeType===3&&(K+=ht.nodeValue.length),(lt=ht.firstChild)!==null;)st=ht,ht=lt;for(;;){if(ht===m)break t;if(st===y&&++tt===P&&(Ce=K),st===O&&++ct===j&&(ze=K),(lt=ht.nextSibling)!==null)break;ht=st,st=ht.parentNode}ht=lt}y=Ce===-1||ze===-1?null:{start:Ce,end:ze}}else y=null}y=y||{start:0,end:0}}else y=null;for(HC={focusedElem:m,selectionRange:y},cy=!1,as=g;as!==null;)if(g=as,m=g.child,(g.subtreeFlags&1028)!==0&&m!==null)m.return=g,as=m;else for(;as!==null;){switch(g=as,O=g.alternate,m=g.flags,g.tag){case 0:if((m&4)!==0&&(m=g.updateQueue,m=m!==null?m.events:null,m!==null))for(y=0;y<m.length;y++)P=m[y],P.ref.impl=P.nextImpl;break;case 11:case 15:break;case 1:if((m&1024)!==0&&O!==null){m=void 0,y=g,P=O.memoizedProps,O=O.memoizedState,j=y.stateNode;try{var Pt=Dd(y.type,P);m=j.getSnapshotBeforeUpdate(Pt,O),j.__reactInternalSnapshotBeforeUpdate=m}catch(Wt){Tn(y,y.return,Wt)}}break;case 3:if((m&1024)!==0){if(m=g.stateNode.containerInfo,y=m.nodeType,y===9)qC(m);else if(y===1)switch(m.nodeName){case"HEAD":case"HTML":case"BODY":qC(m);break;default:m.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((m&1024)!==0)throw Error(s(163))}if(m=g.sibling,m!==null){m.return=g.return,as=m;break}as=g.return}}function i5(m,g,y){var j=y.flags;switch(y.tag){case 0:case 11:case 15:Zo(m,y),j&4&&Lh(5,y);break;case 1:if(Zo(m,y),j&4)if(m=y.stateNode,g===null)try{m.componentDidMount()}catch(K){Tn(y,y.return,K)}else{var P=Dd(y.type,g.memoizedProps);g=g.memoizedState;try{m.componentDidUpdate(P,g,m.__reactInternalSnapshotBeforeUpdate)}catch(K){Tn(y,y.return,K)}}j&64&&e5(y),j&512&&Ph(y,y.return);break;case 3:if(Zo(m,y),j&64&&(m=y.updateQueue,m!==null)){if(g=null,y.child!==null)switch(y.child.tag){case 27:case 5:g=y.child.stateNode;break;case 1:g=y.child.stateNode}try{GO(m,g)}catch(K){Tn(y,y.return,K)}}break;case 27:g===null&&j&4&&s5(y);case 26:case 5:Zo(m,y),g===null&&j&4&&n5(y),j&512&&Ph(y,y.return);break;case 12:Zo(m,y);break;case 31:Zo(m,y),j&4&&c5(m,y);break;case 13:Zo(m,y),j&4&&d5(m,y),j&64&&(m=y.memoizedState,m!==null&&(m=m.dehydrated,m!==null&&(y=pte.bind(null,y),Ite(m,y))));break;case 22:if(j=y.memoizedState!==null||Ko,!j){g=g!==null&&g.memoizedState!==null||La,P=Ko;var O=La;Ko=j,(La=g)&&!O?Jo(m,y,(y.subtreeFlags&8772)!==0):Zo(m,y),Ko=P,La=O}break;case 30:break;default:Zo(m,y)}}function o5(m){var g=m.alternate;g!==null&&(m.alternate=null,o5(g)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(g=m.stateNode,g!==null&&vt(g)),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}var Jn=null,qs=!1;function Xo(m,g,y){for(y=y.child;y!==null;)l5(m,g,y),y=y.sibling}function l5(m,g,y){if(Ze&&typeof Ze.onCommitFiberUnmount=="function")try{Ze.onCommitFiberUnmount(Ue,y)}catch{}switch(y.tag){case 26:La||Yi(y,g),Xo(m,g,y),y.memoizedState?y.memoizedState.count--:y.stateNode&&(y=y.stateNode,y.parentNode.removeChild(y));break;case 27:La||Yi(y,g);var j=Jn,P=qs;bc(y.type)&&(Jn=y.stateNode,qs=!1),Xo(m,g,y),Fh(y.stateNode),Jn=j,qs=P;break;case 5:La||Yi(y,g);case 6:if(j=Jn,P=qs,Jn=null,Xo(m,g,y),Jn=j,qs=P,Jn!==null)if(qs)try{(Jn.nodeType===9?Jn.body:Jn.nodeName==="HTML"?Jn.ownerDocument.body:Jn).removeChild(y.stateNode)}catch(O){Tn(y,g,O)}else try{Jn.removeChild(y.stateNode)}catch(O){Tn(y,g,O)}break;case 18:Jn!==null&&(qs?(m=Jn,eM(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,y.stateNode),Em(m)):eM(Jn,y.stateNode));break;case 4:j=Jn,P=qs,Jn=y.stateNode.containerInfo,qs=!0,Xo(m,g,y),Jn=j,qs=P;break;case 0:case 11:case 14:case 15:mc(2,y,g),La||mc(4,y,g),Xo(m,g,y);break;case 1:La||(Yi(y,g),j=y.stateNode,typeof j.componentWillUnmount=="function"&&t5(y,g,j)),Xo(m,g,y);break;case 21:Xo(m,g,y);break;case 22:La=(j=La)||y.memoizedState!==null,Xo(m,g,y),La=j;break;default:Xo(m,g,y)}}function c5(m,g){if(g.memoizedState===null&&(m=g.alternate,m!==null&&(m=m.memoizedState,m!==null))){m=m.dehydrated;try{Em(m)}catch(y){Tn(g,g.return,y)}}}function d5(m,g){if(g.memoizedState===null&&(m=g.alternate,m!==null&&(m=m.memoizedState,m!==null&&(m=m.dehydrated,m!==null))))try{Em(m)}catch(y){Tn(g,g.return,y)}}function lte(m){switch(m.tag){case 31:case 13:case 19:var g=m.stateNode;return g===null&&(g=m.stateNode=new r5),g;case 22:return m=m.stateNode,g=m._retryCache,g===null&&(g=m._retryCache=new r5),g;default:throw Error(s(435,m.tag))}}function H0(m,g){var y=lte(m);g.forEach(function(j){if(!y.has(j)){y.add(j);var P=xte.bind(null,m,j);j.then(P,P)}})}function Vs(m,g){var y=g.deletions;if(y!==null)for(var j=0;j<y.length;j++){var P=y[j],O=m,K=g,Ce=K;e:for(;Ce!==null;){switch(Ce.tag){case 27:if(bc(Ce.type)){Jn=Ce.stateNode,qs=!1;break e}break;case 5:Jn=Ce.stateNode,qs=!1;break e;case 3:case 4:Jn=Ce.stateNode.containerInfo,qs=!0;break e}Ce=Ce.return}if(Jn===null)throw Error(s(160));l5(O,K,P),Jn=null,qs=!1,O=P.alternate,O!==null&&(O.return=null),P.return=null}if(g.subtreeFlags&13886)for(g=g.child;g!==null;)u5(g,m),g=g.sibling}var ji=null;function u5(m,g){var y=m.alternate,j=m.flags;switch(m.tag){case 0:case 11:case 14:case 15:Vs(g,m),Ys(m),j&4&&(mc(3,m,m.return),Lh(3,m),mc(5,m,m.return));break;case 1:Vs(g,m),Ys(m),j&512&&(La||y===null||Yi(y,y.return)),j&64&&Ko&&(m=m.updateQueue,m!==null&&(j=m.callbacks,j!==null&&(y=m.shared.hiddenCallbacks,m.shared.hiddenCallbacks=y===null?j:y.concat(j))));break;case 26:var P=ji;if(Vs(g,m),Ys(m),j&512&&(La||y===null||Yi(y,y.return)),j&4){var O=y!==null?y.memoizedState:null;if(j=m.memoizedState,y===null)if(j===null)if(m.stateNode===null){e:{j=m.type,y=m.memoizedProps,P=P.ownerDocument||P;t:switch(j){case"title":O=P.getElementsByTagName("title")[0],(!O||O[Qe]||O[Nt]||O.namespaceURI==="http://www.w3.org/2000/svg"||O.hasAttribute("itemprop"))&&(O=P.createElement(j),P.head.insertBefore(O,P.querySelector("head > title"))),ps(O,j,y),O[Nt]=m,Ua(O),j=O;break e;case"link":var K=uM("link","href",P).get(j+(y.href||""));if(K){for(var Ce=0;Ce<K.length;Ce++)if(O=K[Ce],O.getAttribute("href")===(y.href==null||y.href===""?null:y.href)&&O.getAttribute("rel")===(y.rel==null?null:y.rel)&&O.getAttribute("title")===(y.title==null?null:y.title)&&O.getAttribute("crossorigin")===(y.crossOrigin==null?null:y.crossOrigin)){K.splice(Ce,1);break t}}O=P.createElement(j),ps(O,j,y),P.head.appendChild(O);break;case"meta":if(K=uM("meta","content",P).get(j+(y.content||""))){for(Ce=0;Ce<K.length;Ce++)if(O=K[Ce],O.getAttribute("content")===(y.content==null?null:""+y.content)&&O.getAttribute("name")===(y.name==null?null:y.name)&&O.getAttribute("property")===(y.property==null?null:y.property)&&O.getAttribute("http-equiv")===(y.httpEquiv==null?null:y.httpEquiv)&&O.getAttribute("charset")===(y.charSet==null?null:y.charSet)){K.splice(Ce,1);break t}}O=P.createElement(j),ps(O,j,y),P.head.appendChild(O);break;default:throw Error(s(468,j))}O[Nt]=m,Ua(O),j=O}m.stateNode=j}else mM(P,m.type,m.stateNode);else m.stateNode=dM(P,j,m.memoizedProps);else O!==j?(O===null?y.stateNode!==null&&(y=y.stateNode,y.parentNode.removeChild(y)):O.count--,j===null?mM(P,m.type,m.stateNode):dM(P,j,m.memoizedProps)):j===null&&m.stateNode!==null&&yC(m,m.memoizedProps,y.memoizedProps)}break;case 27:Vs(g,m),Ys(m),j&512&&(La||y===null||Yi(y,y.return)),y!==null&&j&4&&yC(m,m.memoizedProps,y.memoizedProps);break;case 5:if(Vs(g,m),Ys(m),j&512&&(La||y===null||Yi(y,y.return)),m.flags&32){P=m.stateNode;try{Zu(P,"")}catch(Pt){Tn(m,m.return,Pt)}}j&4&&m.stateNode!=null&&(P=m.memoizedProps,yC(m,P,y!==null?y.memoizedProps:P)),j&1024&&(wC=!0);break;case 6:if(Vs(g,m),Ys(m),j&4){if(m.stateNode===null)throw Error(s(162));j=m.memoizedProps,y=m.stateNode;try{y.nodeValue=j}catch(Pt){Tn(m,m.return,Pt)}}break;case 3:if(ry=null,P=ji,ji=ay(g.containerInfo),Vs(g,m),ji=P,Ys(m),j&4&&y!==null&&y.memoizedState.isDehydrated)try{Em(g.containerInfo)}catch(Pt){Tn(m,m.return,Pt)}wC&&(wC=!1,m5(m));break;case 4:j=ji,ji=ay(m.stateNode.containerInfo),Vs(g,m),Ys(m),ji=j;break;case 12:Vs(g,m),Ys(m);break;case 31:Vs(g,m),Ys(m),j&4&&(j=m.updateQueue,j!==null&&(m.updateQueue=null,H0(m,j)));break;case 13:Vs(g,m),Ys(m),m.child.flags&8192&&m.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&(W0=ce()),j&4&&(j=m.updateQueue,j!==null&&(m.updateQueue=null,H0(m,j)));break;case 22:P=m.memoizedState!==null;var ze=y!==null&&y.memoizedState!==null,tt=Ko,ct=La;if(Ko=tt||P,La=ct||ze,Vs(g,m),La=ct,Ko=tt,Ys(m),j&8192)e:for(g=m.stateNode,g._visibility=P?g._visibility&-2:g._visibility|1,P&&(y===null||ze||Ko||La||Od(m)),y=null,g=m;;){if(g.tag===5||g.tag===26){if(y===null){ze=y=g;try{if(O=ze.stateNode,P)K=O.style,typeof K.setProperty=="function"?K.setProperty("display","none","important"):K.display="none";else{Ce=ze.stateNode;var ht=ze.memoizedProps.style,st=ht!=null&&ht.hasOwnProperty("display")?ht.display:null;Ce.style.display=st==null||typeof st=="boolean"?"":(""+st).trim()}}catch(Pt){Tn(ze,ze.return,Pt)}}}else if(g.tag===6){if(y===null){ze=g;try{ze.stateNode.nodeValue=P?"":ze.memoizedProps}catch(Pt){Tn(ze,ze.return,Pt)}}}else if(g.tag===18){if(y===null){ze=g;try{var lt=ze.stateNode;P?tM(lt,!0):tM(ze.stateNode,!1)}catch(Pt){Tn(ze,ze.return,Pt)}}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===m)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===m)break e;for(;g.sibling===null;){if(g.return===null||g.return===m)break e;y===g&&(y=null),g=g.return}y===g&&(y=null),g.sibling.return=g.return,g=g.sibling}j&4&&(j=m.updateQueue,j!==null&&(y=j.retryQueue,y!==null&&(j.retryQueue=null,H0(m,y))));break;case 19:Vs(g,m),Ys(m),j&4&&(j=m.updateQueue,j!==null&&(m.updateQueue=null,H0(m,j)));break;case 30:break;case 21:break;default:Vs(g,m),Ys(m)}}function Ys(m){var g=m.flags;if(g&2){try{for(var y,j=m.return;j!==null;){if(a5(j)){y=j;break}j=j.return}if(y==null)throw Error(s(160));switch(y.tag){case 27:var P=y.stateNode,O=bC(m);B0(m,O,P);break;case 5:var K=y.stateNode;y.flags&32&&(Zu(K,""),y.flags&=-33);var Ce=bC(m);B0(m,Ce,K);break;case 3:case 4:var ze=y.stateNode.containerInfo,tt=bC(m);vC(m,tt,ze);break;default:throw Error(s(161))}}catch(ct){Tn(m,m.return,ct)}m.flags&=-3}g&4096&&(m.flags&=-4097)}function m5(m){if(m.subtreeFlags&1024)for(m=m.child;m!==null;){var g=m;m5(g),g.tag===5&&g.flags&1024&&g.stateNode.reset(),m=m.sibling}}function Zo(m,g){if(g.subtreeFlags&8772)for(g=g.child;g!==null;)i5(m,g.alternate,g),g=g.sibling}function Od(m){for(m=m.child;m!==null;){var g=m;switch(g.tag){case 0:case 11:case 14:case 15:mc(4,g,g.return),Od(g);break;case 1:Yi(g,g.return);var y=g.stateNode;typeof y.componentWillUnmount=="function"&&t5(g,g.return,y),Od(g);break;case 27:Fh(g.stateNode);case 26:case 5:Yi(g,g.return),Od(g);break;case 22:g.memoizedState===null&&Od(g);break;case 30:Od(g);break;default:Od(g)}m=m.sibling}}function Jo(m,g,y){for(y=y&&(g.subtreeFlags&8772)!==0,g=g.child;g!==null;){var j=g.alternate,P=m,O=g,K=O.flags;switch(O.tag){case 0:case 11:case 15:Jo(P,O,y),Lh(4,O);break;case 1:if(Jo(P,O,y),j=O,P=j.stateNode,typeof P.componentDidMount=="function")try{P.componentDidMount()}catch(tt){Tn(j,j.return,tt)}if(j=O,P=j.updateQueue,P!==null){var Ce=j.stateNode;try{var ze=P.shared.hiddenCallbacks;if(ze!==null)for(P.shared.hiddenCallbacks=null,P=0;P<ze.length;P++)HO(ze[P],Ce)}catch(tt){Tn(j,j.return,tt)}}y&&K&64&&e5(O),Ph(O,O.return);break;case 27:s5(O);case 26:case 5:Jo(P,O,y),y&&j===null&&K&4&&n5(O),Ph(O,O.return);break;case 12:Jo(P,O,y);break;case 31:Jo(P,O,y),y&&K&4&&c5(P,O);break;case 13:Jo(P,O,y),y&&K&4&&d5(P,O);break;case 22:O.memoizedState===null&&Jo(P,O,y),Ph(O,O.return);break;case 30:break;default:Jo(P,O,y)}g=g.sibling}}function NC(m,g){var y=null;m!==null&&m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(y=m.memoizedState.cachePool.pool),m=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(m=g.memoizedState.cachePool.pool),m!==y&&(m!=null&&m.refCount++,y!=null&&yh(y))}function jC(m,g){m=null,g.alternate!==null&&(m=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==m&&(g.refCount++,m!=null&&yh(m))}function Ci(m,g,y,j){if(g.subtreeFlags&10256)for(g=g.child;g!==null;)f5(m,g,y,j),g=g.sibling}function f5(m,g,y,j){var P=g.flags;switch(g.tag){case 0:case 11:case 15:Ci(m,g,y,j),P&2048&&Lh(9,g);break;case 1:Ci(m,g,y,j);break;case 3:Ci(m,g,y,j),P&2048&&(m=null,g.alternate!==null&&(m=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==m&&(g.refCount++,m!=null&&yh(m)));break;case 12:if(P&2048){Ci(m,g,y,j),m=g.stateNode;try{var O=g.memoizedProps,K=O.id,Ce=O.onPostCommit;typeof Ce=="function"&&Ce(K,g.alternate===null?"mount":"update",m.passiveEffectDuration,-0)}catch(ze){Tn(g,g.return,ze)}}else Ci(m,g,y,j);break;case 31:Ci(m,g,y,j);break;case 13:Ci(m,g,y,j);break;case 23:break;case 22:O=g.stateNode,K=g.alternate,g.memoizedState!==null?O._visibility&2?Ci(m,g,y,j):Dh(m,g):O._visibility&2?Ci(m,g,y,j):(O._visibility|=2,ym(m,g,y,j,(g.subtreeFlags&10256)!==0||!1)),P&2048&&NC(K,g);break;case 24:Ci(m,g,y,j),P&2048&&jC(g.alternate,g);break;default:Ci(m,g,y,j)}}function ym(m,g,y,j,P){for(P=P&&((g.subtreeFlags&10256)!==0||!1),g=g.child;g!==null;){var O=m,K=g,Ce=y,ze=j,tt=K.flags;switch(K.tag){case 0:case 11:case 15:ym(O,K,Ce,ze,P),Lh(8,K);break;case 23:break;case 22:var ct=K.stateNode;K.memoizedState!==null?ct._visibility&2?ym(O,K,Ce,ze,P):Dh(O,K):(ct._visibility|=2,ym(O,K,Ce,ze,P)),P&&tt&2048&&NC(K.alternate,K);break;case 24:ym(O,K,Ce,ze,P),P&&tt&2048&&jC(K.alternate,K);break;default:ym(O,K,Ce,ze,P)}g=g.sibling}}function Dh(m,g){if(g.subtreeFlags&10256)for(g=g.child;g!==null;){var y=m,j=g,P=j.flags;switch(j.tag){case 22:Dh(y,j),P&2048&&NC(j.alternate,j);break;case 24:Dh(y,j),P&2048&&jC(j.alternate,j);break;default:Dh(y,j)}g=g.sibling}}var Oh=8192;function bm(m,g,y){if(m.subtreeFlags&Oh)for(m=m.child;m!==null;)h5(m,g,y),m=m.sibling}function h5(m,g,y){switch(m.tag){case 26:bm(m,g,y),m.flags&Oh&&m.memoizedState!==null&&Yte(y,ji,m.memoizedState,m.memoizedProps);break;case 5:bm(m,g,y);break;case 3:case 4:var j=ji;ji=ay(m.stateNode.containerInfo),bm(m,g,y),ji=j;break;case 22:m.memoizedState===null&&(j=m.alternate,j!==null&&j.memoizedState!==null?(j=Oh,Oh=16777216,bm(m,g,y),Oh=j):bm(m,g,y));break;default:bm(m,g,y)}}function g5(m){var g=m.alternate;if(g!==null&&(m=g.child,m!==null)){g.child=null;do g=m.sibling,m.sibling=null,m=g;while(m!==null)}}function Mh(m){var g=m.deletions;if((m.flags&16)!==0){if(g!==null)for(var y=0;y<g.length;y++){var j=g[y];as=j,x5(j,m)}g5(m)}if(m.subtreeFlags&10256)for(m=m.child;m!==null;)p5(m),m=m.sibling}function p5(m){switch(m.tag){case 0:case 11:case 15:Mh(m),m.flags&2048&&mc(9,m,m.return);break;case 3:Mh(m);break;case 12:Mh(m);break;case 22:var g=m.stateNode;m.memoizedState!==null&&g._visibility&2&&(m.return===null||m.return.tag!==13)?(g._visibility&=-3,G0(m)):Mh(m);break;default:Mh(m)}}function G0(m){var g=m.deletions;if((m.flags&16)!==0){if(g!==null)for(var y=0;y<g.length;y++){var j=g[y];as=j,x5(j,m)}g5(m)}for(m=m.child;m!==null;){switch(g=m,g.tag){case 0:case 11:case 15:mc(8,g,g.return),G0(g);break;case 22:y=g.stateNode,y._visibility&2&&(y._visibility&=-3,G0(g));break;default:G0(g)}m=m.sibling}}function x5(m,g){for(;as!==null;){var y=as;switch(y.tag){case 0:case 11:case 15:mc(8,y,g);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var j=y.memoizedState.cachePool.pool;j!=null&&j.refCount++}break;case 24:yh(y.memoizedState.cache)}if(j=y.child,j!==null)j.return=y,as=j;else e:for(y=m;as!==null;){j=as;var P=j.sibling,O=j.return;if(o5(j),j===y){as=null;break e}if(P!==null){P.return=O,as=P;break e}as=O}}}var cte={getCacheForType:function(m){var g=hs(Ta),y=g.data.get(m);return y===void 0&&(y=m(),g.data.set(m,y)),y},cacheSignal:function(){return hs(Ta).controller.signal}},dte=typeof WeakMap=="function"?WeakMap:Map,Nn=0,zn=null,rn=null,ln=0,An=0,vr=null,fc=!1,vm=!1,CC=!1,el=0,fa=0,hc=0,Md=0,SC=0,wr=0,wm=0,Ih=null,Qs=null,_C=!1,W0=0,y5=0,q0=1/0,V0=null,gc=null,Fa=0,pc=null,Nm=null,tl=0,AC=0,TC=null,b5=null,$h=0,EC=null;function Nr(){return(Nn&2)!==0&&ln!==0?ln&-ln:z.T!==null?MC():oe()}function v5(){if(wr===0)if((ln&536870912)===0||mn){var m=$;$<<=1,($&3932160)===0&&($=262144),wr=m}else wr=536870912;return m=yr.current,m!==null&&(m.flags|=32),wr}function Ks(m,g,y){(m===zn&&(An===2||An===9)||m.cancelPendingCommit!==null)&&(jm(m,0),xc(m,ln,wr,!1)),be(m,y),((Nn&2)===0||m!==zn)&&(m===zn&&((Nn&2)===0&&(Md|=y),fa===4&&xc(m,ln,wr,!1)),Qi(m))}function w5(m,g,y){if((Nn&6)!==0)throw Error(s(327));var j=!y&&(g&127)===0&&(g&m.expiredLanes)===0||Se(m,g),P=j?fte(m,g):LC(m,g,!0),O=j;do{if(P===0){vm&&!j&&xc(m,g,0,!1);break}else{if(y=m.current.alternate,O&&!ute(y)){P=LC(m,g,!1),O=!1;continue}if(P===2){if(O=g,m.errorRecoveryDisabledLanes&O)var K=0;else K=m.pendingLanes&-536870913,K=K!==0?K:K&536870912?536870912:0;if(K!==0){g=K;e:{var Ce=m;P=Ih;var ze=Ce.current.memoizedState.isDehydrated;if(ze&&(jm(Ce,K).flags|=256),K=LC(Ce,K,!1),K!==2){if(CC&&!ze){Ce.errorRecoveryDisabledLanes|=O,Md|=O,P=4;break e}O=Qs,Qs=P,O!==null&&(Qs===null?Qs=O:Qs.push.apply(Qs,O))}P=K}if(O=!1,P!==2)continue}}if(P===1){jm(m,0),xc(m,g,0,!0);break}e:{switch(j=m,O=P,O){case 0:case 1:throw Error(s(345));case 4:if((g&4194048)!==g)break;case 6:xc(j,g,wr,!fc);break e;case 2:Qs=null;break;case 3:case 5:break;default:throw Error(s(329))}if((g&62914560)===g&&(P=W0+300-ce(),10<P)){if(xc(j,g,wr,!fc),Z(j,0,!0)!==0)break e;tl=g,j.timeoutHandle=Z5(N5.bind(null,j,y,Qs,V0,_C,g,wr,Md,wm,fc,O,"Throttled",-0,0),P);break e}N5(j,y,Qs,V0,_C,g,wr,Md,wm,fc,O,null,-0,0)}}break}while(!0);Qi(m)}function N5(m,g,y,j,P,O,K,Ce,ze,tt,ct,ht,st,lt){if(m.timeoutHandle=-1,ht=g.subtreeFlags,ht&8192||(ht&16785408)===16785408){ht={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Uo},h5(g,O,ht);var Pt=(O&62914560)===O?W0-ce():(O&4194048)===O?y5-ce():0;if(Pt=Qte(ht,Pt),Pt!==null){tl=O,m.cancelPendingCommit=Pt(k5.bind(null,m,g,O,y,j,P,K,Ce,ze,ct,ht,null,st,lt)),xc(m,O,K,!tt);return}}k5(m,g,O,y,j,P,K,Ce,ze)}function ute(m){for(var g=m;;){var y=g.tag;if((y===0||y===11||y===15)&&g.flags&16384&&(y=g.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var j=0;j<y.length;j++){var P=y[j],O=P.getSnapshot;P=P.value;try{if(!pr(O(),P))return!1}catch{return!1}}if(y=g.child,g.subtreeFlags&16384&&y!==null)y.return=g,g=y;else{if(g===m)break;for(;g.sibling===null;){if(g.return===null||g.return===m)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function xc(m,g,y,j){g&=~SC,g&=~Md,m.suspendedLanes|=g,m.pingedLanes&=~g,j&&(m.warmLanes|=g),j=m.expirationTimes;for(var P=g;0<P;){var O=31-Je(P),K=1<<O;j[O]=-1,P&=~K}y!==0&&ft(m,y,g)}function Y0(){return(Nn&6)===0?(Rh(0),!1):!0}function kC(){if(rn!==null){if(An===0)var m=rn.return;else m=rn,Go=_d=null,q1(m),fm=null,vh=0,m=rn;for(;m!==null;)J3(m.alternate,m),m=m.return;rn=null}}function jm(m,g){var y=m.timeoutHandle;y!==-1&&(m.timeoutHandle=-1,Lte(y)),y=m.cancelPendingCommit,y!==null&&(m.cancelPendingCommit=null,y()),tl=0,kC(),zn=m,rn=y=Bo(m.current,null),ln=g,An=0,vr=null,fc=!1,vm=Se(m,g),CC=!1,wm=wr=SC=Md=hc=fa=0,Qs=Ih=null,_C=!1,(g&8)!==0&&(g|=g&32);var j=m.entangledLanes;if(j!==0)for(m=m.entanglements,j&=g;0<j;){var P=31-Je(j),O=1<<P;g|=m[P],j&=~O}return el=g,g0(),y}function j5(m,g){Zt=null,z.H=Th,g===mm||g===j0?(g=zO(),An=3):g===O1?(g=zO(),An=4):An=g===lC?8:g!==null&&typeof g=="object"&&typeof g.then=="function"?6:1,vr=g,rn===null&&(fa=1,$0(m,Br(g,m.current)))}function C5(){var m=yr.current;return m===null?!0:(ln&4194048)===ln?qr===null:(ln&62914560)===ln||(ln&536870912)!==0?m===qr:!1}function S5(){var m=z.H;return z.H=Th,m===null?Th:m}function _5(){var m=z.A;return z.A=cte,m}function Q0(){fa=4,fc||(ln&4194048)!==ln&&yr.current!==null||(vm=!0),(hc&134217727)===0&&(Md&134217727)===0||zn===null||xc(zn,ln,wr,!1)}function LC(m,g,y){var j=Nn;Nn|=2;var P=S5(),O=_5();(zn!==m||ln!==g)&&(V0=null,jm(m,g)),g=!1;var K=fa;e:do try{if(An!==0&&rn!==null){var Ce=rn,ze=vr;switch(An){case 8:kC(),K=6;break e;case 3:case 2:case 9:case 6:yr.current===null&&(g=!0);var tt=An;if(An=0,vr=null,Cm(m,Ce,ze,tt),y&&vm){K=0;break e}break;default:tt=An,An=0,vr=null,Cm(m,Ce,ze,tt)}}mte(),K=fa;break}catch(ct){j5(m,ct)}while(!0);return g&&m.shellSuspendCounter++,Go=_d=null,Nn=j,z.H=P,z.A=O,rn===null&&(zn=null,ln=0,g0()),K}function mte(){for(;rn!==null;)A5(rn)}function fte(m,g){var y=Nn;Nn|=2;var j=S5(),P=_5();zn!==m||ln!==g?(V0=null,q0=ce()+500,jm(m,g)):vm=Se(m,g);e:do try{if(An!==0&&rn!==null){g=rn;var O=vr;t:switch(An){case 1:An=0,vr=null,Cm(m,g,O,1);break;case 2:case 9:if($O(O)){An=0,vr=null,T5(g);break}g=function(){An!==2&&An!==9||zn!==m||(An=7),Qi(m)},O.then(g,g);break e;case 3:An=7;break e;case 4:An=5;break e;case 7:$O(O)?(An=0,vr=null,T5(g)):(An=0,vr=null,Cm(m,g,O,7));break;case 5:var K=null;switch(rn.tag){case 26:K=rn.memoizedState;case 5:case 27:var Ce=rn;if(K?fM(K):Ce.stateNode.complete){An=0,vr=null;var ze=Ce.sibling;if(ze!==null)rn=ze;else{var tt=Ce.return;tt!==null?(rn=tt,K0(tt)):rn=null}break t}}An=0,vr=null,Cm(m,g,O,5);break;case 6:An=0,vr=null,Cm(m,g,O,6);break;case 8:kC(),fa=6;break e;default:throw Error(s(462))}}hte();break}catch(ct){j5(m,ct)}while(!0);return Go=_d=null,z.H=j,z.A=P,Nn=y,rn!==null?0:(zn=null,ln=0,g0(),fa)}function hte(){for(;rn!==null&&!xe();)A5(rn)}function A5(m){var g=X3(m.alternate,m,el);m.memoizedProps=m.pendingProps,g===null?K0(m):rn=g}function T5(m){var g=m,y=g.alternate;switch(g.tag){case 15:case 0:g=W3(y,g,g.pendingProps,g.type,void 0,ln);break;case 11:g=W3(y,g,g.pendingProps,g.type.render,g.ref,ln);break;case 5:q1(g);default:J3(y,g),g=rn=_O(g,el),g=X3(y,g,el)}m.memoizedProps=m.pendingProps,g===null?K0(m):rn=g}function Cm(m,g,y,j){Go=_d=null,q1(g),fm=null,vh=0;var P=g.return;try{if(nte(m,P,g,y,ln)){fa=1,$0(m,Br(y,m.current)),rn=null;return}}catch(O){if(P!==null)throw rn=P,O;fa=1,$0(m,Br(y,m.current)),rn=null;return}g.flags&32768?(mn||j===1?m=!0:vm||(ln&536870912)!==0?m=!1:(fc=m=!0,(j===2||j===9||j===3||j===6)&&(j=yr.current,j!==null&&j.tag===13&&(j.flags|=16384))),E5(g,m)):K0(g)}function K0(m){var g=m;do{if((g.flags&32768)!==0){E5(g,fc);return}m=g.return;var y=rte(g.alternate,g,el);if(y!==null){rn=y;return}if(g=g.sibling,g!==null){rn=g;return}rn=g=m}while(g!==null);fa===0&&(fa=5)}function E5(m,g){do{var y=ite(m.alternate,m);if(y!==null){y.flags&=32767,rn=y;return}if(y=m.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!g&&(m=m.sibling,m!==null)){rn=m;return}rn=m=y}while(m!==null);fa=6,rn=null}function k5(m,g,y,j,P,O,K,Ce,ze){m.cancelPendingCommit=null;do X0();while(Fa!==0);if((Nn&6)!==0)throw Error(s(327));if(g!==null){if(g===m.current)throw Error(s(177));if(O=g.lanes|g.childLanes,O|=b1,We(m,y,O,K,Ce,ze),m===zn&&(rn=zn=null,ln=0),Nm=g,pc=m,tl=y,AC=O,TC=P,b5=j,(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?(m.callbackNode=null,m.callbackPriority=0,yte(Re,function(){return M5(),null})):(m.callbackNode=null,m.callbackPriority=0),j=(g.flags&13878)!==0,(g.subtreeFlags&13878)!==0||j){j=z.T,z.T=null,P=Q.p,Q.p=2,K=Nn,Nn|=4;try{ote(m,g,y)}finally{Nn=K,Q.p=P,z.T=j}}Fa=1,L5(),P5(),D5()}}function L5(){if(Fa===1){Fa=0;var m=pc,g=Nm,y=(g.flags&13878)!==0;if((g.subtreeFlags&13878)!==0||y){y=z.T,z.T=null;var j=Q.p;Q.p=2;var P=Nn;Nn|=4;try{u5(g,m);var O=HC,K=xO(m.containerInfo),Ce=O.focusedElem,ze=O.selectionRange;if(K!==Ce&&Ce&&Ce.ownerDocument&&pO(Ce.ownerDocument.documentElement,Ce)){if(ze!==null&&h1(Ce)){var tt=ze.start,ct=ze.end;if(ct===void 0&&(ct=tt),"selectionStart"in Ce)Ce.selectionStart=tt,Ce.selectionEnd=Math.min(ct,Ce.value.length);else{var ht=Ce.ownerDocument||document,st=ht&&ht.defaultView||window;if(st.getSelection){var lt=st.getSelection(),Pt=Ce.textContent.length,Wt=Math.min(ze.start,Pt),In=ze.end===void 0?Wt:Math.min(ze.end,Pt);!lt.extend&&Wt>In&&(K=In,In=Wt,Wt=K);var Xe=gO(Ce,Wt),Ge=gO(Ce,In);if(Xe&&Ge&&(lt.rangeCount!==1||lt.anchorNode!==Xe.node||lt.anchorOffset!==Xe.offset||lt.focusNode!==Ge.node||lt.focusOffset!==Ge.offset)){var et=ht.createRange();et.setStart(Xe.node,Xe.offset),lt.removeAllRanges(),Wt>In?(lt.addRange(et),lt.extend(Ge.node,Ge.offset)):(et.setEnd(Ge.node,Ge.offset),lt.addRange(et))}}}}for(ht=[],lt=Ce;lt=lt.parentNode;)lt.nodeType===1&&ht.push({element:lt,left:lt.scrollLeft,top:lt.scrollTop});for(typeof Ce.focus=="function"&&Ce.focus(),Ce=0;Ce<ht.length;Ce++){var ut=ht[Ce];ut.element.scrollLeft=ut.left,ut.element.scrollTop=ut.top}}cy=!!BC,HC=BC=null}finally{Nn=P,Q.p=j,z.T=y}}m.current=g,Fa=2}}function P5(){if(Fa===2){Fa=0;var m=pc,g=Nm,y=(g.flags&8772)!==0;if((g.subtreeFlags&8772)!==0||y){y=z.T,z.T=null;var j=Q.p;Q.p=2;var P=Nn;Nn|=4;try{i5(m,g.alternate,g)}finally{Nn=P,Q.p=j,z.T=y}}Fa=3}}function D5(){if(Fa===4||Fa===3){Fa=0,_e();var m=pc,g=Nm,y=tl,j=b5;(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?Fa=5:(Fa=0,Nm=pc=null,O5(m,m.pendingLanes));var P=m.pendingLanes;if(P===0&&(gc=null),Gt(y),g=g.stateNode,Ze&&typeof Ze.onCommitFiberRoot=="function")try{Ze.onCommitFiberRoot(Ue,g,void 0,(g.current.flags&128)===128)}catch{}if(j!==null){g=z.T,P=Q.p,Q.p=2,z.T=null;try{for(var O=m.onRecoverableError,K=0;K<j.length;K++){var Ce=j[K];O(Ce.value,{componentStack:Ce.stack})}}finally{z.T=g,Q.p=P}}(tl&3)!==0&&X0(),Qi(m),P=m.pendingLanes,(y&261930)!==0&&(P&42)!==0?m===EC?$h++:($h=0,EC=m):$h=0,Rh(0)}}function O5(m,g){(m.pooledCacheLanes&=g)===0&&(g=m.pooledCache,g!=null&&(m.pooledCache=null,yh(g)))}function X0(){return L5(),P5(),D5(),M5()}function M5(){if(Fa!==5)return!1;var m=pc,g=AC;AC=0;var y=Gt(tl),j=z.T,P=Q.p;try{Q.p=32>y?32:y,z.T=null,y=TC,TC=null;var O=pc,K=tl;if(Fa=0,Nm=pc=null,tl=0,(Nn&6)!==0)throw Error(s(331));var Ce=Nn;if(Nn|=4,p5(O.current),f5(O,O.current,K,y),Nn=Ce,Rh(0,!1),Ze&&typeof Ze.onPostCommitFiberRoot=="function")try{Ze.onPostCommitFiberRoot(Ue,O)}catch{}return!0}finally{Q.p=P,z.T=j,O5(m,g)}}function I5(m,g,y){g=Br(y,g),g=oC(m.stateNode,g,2),m=cc(m,g,2),m!==null&&(be(m,2),Qi(m))}function Tn(m,g,y){if(m.tag===3)I5(m,m,y);else for(;g!==null;){if(g.tag===3){I5(g,m,y);break}else if(g.tag===1){var j=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof j.componentDidCatch=="function"&&(gc===null||!gc.has(j))){m=Br(y,m),y=$3(2),j=cc(g,y,2),j!==null&&(R3(y,j,g,m),be(j,2),Qi(j));break}}g=g.return}}function PC(m,g,y){var j=m.pingCache;if(j===null){j=m.pingCache=new dte;var P=new Set;j.set(g,P)}else P=j.get(g),P===void 0&&(P=new Set,j.set(g,P));P.has(y)||(CC=!0,P.add(y),m=gte.bind(null,m,g,y),g.then(m,m))}function gte(m,g,y){var j=m.pingCache;j!==null&&j.delete(g),m.pingedLanes|=m.suspendedLanes&y,m.warmLanes&=~y,zn===m&&(ln&y)===y&&(fa===4||fa===3&&(ln&62914560)===ln&&300>ce()-W0?(Nn&2)===0&&jm(m,0):SC|=y,wm===ln&&(wm=0)),Qi(m)}function $5(m,g){g===0&&(g=ue()),m=jd(m,g),m!==null&&(be(m,g),Qi(m))}function pte(m){var g=m.memoizedState,y=0;g!==null&&(y=g.retryLane),$5(m,y)}function xte(m,g){var y=0;switch(m.tag){case 31:case 13:var j=m.stateNode,P=m.memoizedState;P!==null&&(y=P.retryLane);break;case 19:j=m.stateNode;break;case 22:j=m.stateNode._retryCache;break;default:throw Error(s(314))}j!==null&&j.delete(g),$5(m,y)}function yte(m,g){return Ye(m,g)}var Z0=null,Sm=null,DC=!1,J0=!1,OC=!1,yc=0;function Qi(m){m!==Sm&&m.next===null&&(Sm===null?Z0=Sm=m:Sm=Sm.next=m),J0=!0,DC||(DC=!0,vte())}function Rh(m,g){if(!OC&&J0){OC=!0;do for(var y=!1,j=Z0;j!==null;){if(m!==0){var P=j.pendingLanes;if(P===0)var O=0;else{var K=j.suspendedLanes,Ce=j.pingedLanes;O=(1<<31-Je(42|m)+1)-1,O&=P&~(K&~Ce),O=O&201326741?O&201326741|1:O?O|2:0}O!==0&&(y=!0,F5(j,O))}else O=ln,O=Z(j,j===zn?O:0,j.cancelPendingCommit!==null||j.timeoutHandle!==-1),(O&3)===0||Se(j,O)||(y=!0,F5(j,O));j=j.next}while(y);OC=!1}}function bte(){R5()}function R5(){J0=DC=!1;var m=0;yc!==0&&kte()&&(m=yc);for(var g=ce(),y=null,j=Z0;j!==null;){var P=j.next,O=z5(j,g);O===0?(j.next=null,y===null?Z0=P:y.next=P,P===null&&(Sm=y)):(y=j,(m!==0||(O&3)!==0)&&(J0=!0)),j=P}Fa!==0&&Fa!==5||Rh(m),yc!==0&&(yc=0)}function z5(m,g){for(var y=m.suspendedLanes,j=m.pingedLanes,P=m.expirationTimes,O=m.pendingLanes&-62914561;0<O;){var K=31-Je(O),Ce=1<<K,ze=P[K];ze===-1?((Ce&y)===0||(Ce&j)!==0)&&(P[K]=me(Ce,g)):ze<=g&&(m.expiredLanes|=Ce),O&=~Ce}if(g=zn,y=ln,y=Z(m,m===g?y:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),j=m.callbackNode,y===0||m===g&&(An===2||An===9)||m.cancelPendingCommit!==null)return j!==null&&j!==null&&B(j),m.callbackNode=null,m.callbackPriority=0;if((y&3)===0||Se(m,y)){if(g=y&-y,g===m.callbackPriority)return g;switch(j!==null&&B(j),Gt(y)){case 2:case 8:y=He;break;case 32:y=Re;break;case 268435456:y=mt;break;default:y=Re}return j=U5.bind(null,m),y=Ye(y,j),m.callbackPriority=g,m.callbackNode=y,g}return j!==null&&j!==null&&B(j),m.callbackPriority=2,m.callbackNode=null,2}function U5(m,g){if(Fa!==0&&Fa!==5)return m.callbackNode=null,m.callbackPriority=0,null;var y=m.callbackNode;if(X0()&&m.callbackNode!==y)return null;var j=ln;return j=Z(m,m===zn?j:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),j===0?null:(w5(m,j,g),z5(m,ce()),m.callbackNode!=null&&m.callbackNode===y?U5.bind(null,m):null)}function F5(m,g){if(X0())return null;w5(m,g,!0)}function vte(){Pte(function(){(Nn&6)!==0?Ye(ae,bte):R5()})}function MC(){if(yc===0){var m=dm;m===0&&(m=G,G<<=1,(G&261888)===0&&(G=256)),yc=m}return yc}function B5(m){return m==null||typeof m=="symbol"||typeof m=="boolean"?null:typeof m=="function"?m:o0(""+m)}function H5(m,g){var y=g.ownerDocument.createElement("input");return y.name=g.name,y.value=g.value,m.id&&y.setAttribute("form",m.id),g.parentNode.insertBefore(y,g),m=new FormData(m),y.parentNode.removeChild(y),m}function wte(m,g,y,j,P){if(g==="submit"&&y&&y.stateNode===P){var O=B5((P[L]||null).action),K=j.submitter;K&&(g=(g=K[L]||null)?B5(g.formAction):K.getAttribute("formAction"),g!==null&&(O=g,K=null));var Ce=new u0("action","action",null,j,P);m.push({event:Ce,listeners:[{instance:null,listener:function(){if(j.defaultPrevented){if(yc!==0){var ze=K?H5(P,K):new FormData(P);tC(y,{pending:!0,data:ze,method:P.method,action:O},null,ze)}}else typeof O=="function"&&(Ce.preventDefault(),ze=K?H5(P,K):new FormData(P),tC(y,{pending:!0,data:ze,method:P.method,action:O},O,ze))},currentTarget:P}]})}}for(var IC=0;IC<y1.length;IC++){var $C=y1[IC],Nte=$C.toLowerCase(),jte=$C[0].toUpperCase()+$C.slice(1);Ni(Nte,"on"+jte)}Ni(vO,"onAnimationEnd"),Ni(wO,"onAnimationIteration"),Ni(NO,"onAnimationStart"),Ni("dblclick","onDoubleClick"),Ni("focusin","onFocus"),Ni("focusout","onBlur"),Ni(zee,"onTransitionRun"),Ni(Uee,"onTransitionStart"),Ni(Fee,"onTransitionCancel"),Ni(jO,"onTransitionEnd"),Ku("onMouseEnter",["mouseout","mouseover"]),Ku("onMouseLeave",["mouseout","mouseover"]),Ku("onPointerEnter",["pointerout","pointerover"]),Ku("onPointerLeave",["pointerout","pointerover"]),bd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bd("onBeforeInput",["compositionend","keypress","textInput","paste"]),bd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cte=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zh));function G5(m,g){g=(g&4)!==0;for(var y=0;y<m.length;y++){var j=m[y],P=j.event;j=j.listeners;e:{var O=void 0;if(g)for(var K=j.length-1;0<=K;K--){var Ce=j[K],ze=Ce.instance,tt=Ce.currentTarget;if(Ce=Ce.listener,ze!==O&&P.isPropagationStopped())break e;O=Ce,P.currentTarget=tt;try{O(P)}catch(ct){h0(ct)}P.currentTarget=null,O=ze}else for(K=0;K<j.length;K++){if(Ce=j[K],ze=Ce.instance,tt=Ce.currentTarget,Ce=Ce.listener,ze!==O&&P.isPropagationStopped())break e;O=Ce,P.currentTarget=tt;try{O(P)}catch(ct){h0(ct)}P.currentTarget=null,O=ze}}}}function on(m,g){var y=g[we];y===void 0&&(y=g[we]=new Set);var j=m+"__bubble";y.has(j)||(W5(g,m,2,!1),y.add(j))}function RC(m,g,y){var j=0;g&&(j|=4),W5(y,m,j,g)}var ey="_reactListening"+Math.random().toString(36).slice(2);function zC(m){if(!m[ey]){m[ey]=!0,RD.forEach(function(y){y!=="selectionchange"&&(Cte.has(y)||RC(y,!1,m),RC(y,!0,m))});var g=m.nodeType===9?m:m.ownerDocument;g===null||g[ey]||(g[ey]=!0,RC("selectionchange",!1,g))}}function W5(m,g,y,j){switch(vM(g)){case 2:var P=Zte;break;case 8:P=Jte;break;default:P=eS}y=P.bind(null,g,y,m),P=void 0,!r1||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(P=!0),j?P!==void 0?m.addEventListener(g,y,{capture:!0,passive:P}):m.addEventListener(g,y,!0):P!==void 0?m.addEventListener(g,y,{passive:P}):m.addEventListener(g,y,!1)}function UC(m,g,y,j,P){var O=j;if((g&1)===0&&(g&2)===0&&j!==null)e:for(;;){if(j===null)return;var K=j.tag;if(K===3||K===4){var Ce=j.stateNode.containerInfo;if(Ce===P)break;if(K===4)for(K=j.return;K!==null;){var ze=K.tag;if((ze===3||ze===4)&&K.stateNode.containerInfo===P)return;K=K.return}for(;Ce!==null;){if(K=gt(Ce),K===null)return;if(ze=K.tag,ze===5||ze===6||ze===26||ze===27){j=O=K;continue e}Ce=Ce.parentNode}}j=j.return}KD(function(){var tt=O,ct=a1(y),ht=[];e:{var st=CO.get(m);if(st!==void 0){var lt=u0,Pt=m;switch(m){case"keypress":if(c0(y)===0)break e;case"keydown":case"keyup":lt=xee;break;case"focusin":Pt="focus",lt=c1;break;case"focusout":Pt="blur",lt=c1;break;case"beforeblur":case"afterblur":lt=c1;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":lt=JD;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":lt=ree;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":lt=vee;break;case vO:case wO:case NO:lt=lee;break;case jO:lt=Nee;break;case"scroll":case"scrollend":lt=aee;break;case"wheel":lt=Cee;break;case"copy":case"cut":case"paste":lt=dee;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":lt=tO;break;case"toggle":case"beforetoggle":lt=_ee}var Wt=(g&4)!==0,In=!Wt&&(m==="scroll"||m==="scrollend"),Xe=Wt?st!==null?st+"Capture":null:st;Wt=[];for(var Ge=tt,et;Ge!==null;){var ut=Ge;if(et=ut.stateNode,ut=ut.tag,ut!==5&&ut!==26&&ut!==27||et===null||Xe===null||(ut=oh(Ge,Xe),ut!=null&&Wt.push(Uh(Ge,ut,et))),In)break;Ge=Ge.return}0<Wt.length&&(st=new lt(st,Pt,null,y,ct),ht.push({event:st,listeners:Wt}))}}if((g&7)===0){e:{if(st=m==="mouseover"||m==="pointerover",lt=m==="mouseout"||m==="pointerout",st&&y!==n1&&(Pt=y.relatedTarget||y.fromElement)&&(gt(Pt)||Pt[H]))break e;if((lt||st)&&(st=ct.window===ct?ct:(st=ct.ownerDocument)?st.defaultView||st.parentWindow:window,lt?(Pt=y.relatedTarget||y.toElement,lt=tt,Pt=Pt?gt(Pt):null,Pt!==null&&(In=i(Pt),Wt=Pt.tag,Pt!==In||Wt!==5&&Wt!==27&&Wt!==6)&&(Pt=null)):(lt=null,Pt=tt),lt!==Pt)){if(Wt=JD,ut="onMouseLeave",Xe="onMouseEnter",Ge="mouse",(m==="pointerout"||m==="pointerover")&&(Wt=tO,ut="onPointerLeave",Xe="onPointerEnter",Ge="pointer"),In=lt==null?st:wn(lt),et=Pt==null?st:wn(Pt),st=new Wt(ut,Ge+"leave",lt,y,ct),st.target=In,st.relatedTarget=et,ut=null,gt(ct)===tt&&(Wt=new Wt(Xe,Ge+"enter",Pt,y,ct),Wt.target=et,Wt.relatedTarget=In,ut=Wt),In=ut,lt&&Pt)t:{for(Wt=Ste,Xe=lt,Ge=Pt,et=0,ut=Xe;ut;ut=Wt(ut))et++;ut=0;for(var Ft=Ge;Ft;Ft=Wt(Ft))ut++;for(;0<et-ut;)Xe=Wt(Xe),et--;for(;0<ut-et;)Ge=Wt(Ge),ut--;for(;et--;){if(Xe===Ge||Ge!==null&&Xe===Ge.alternate){Wt=Xe;break t}Xe=Wt(Xe),Ge=Wt(Ge)}Wt=null}else Wt=null;lt!==null&&q5(ht,st,lt,Wt,!1),Pt!==null&&In!==null&&q5(ht,In,Pt,Wt,!0)}}e:{if(st=tt?wn(tt):window,lt=st.nodeName&&st.nodeName.toLowerCase(),lt==="select"||lt==="input"&&st.type==="file")var yn=cO;else if(oO(st))if(dO)yn=Iee;else{yn=Oee;var $t=Dee}else lt=st.nodeName,!lt||lt.toLowerCase()!=="input"||st.type!=="checkbox"&&st.type!=="radio"?tt&&t1(tt.elementType)&&(yn=cO):yn=Mee;if(yn&&(yn=yn(m,tt))){lO(ht,yn,y,ct);break e}$t&&$t(m,st,tt),m==="focusout"&&tt&&st.type==="number"&&tt.memoizedProps.value!=null&&e1(st,"number",st.value)}switch($t=tt?wn(tt):window,m){case"focusin":(oO($t)||$t.contentEditable==="true")&&(nm=$t,g1=tt,gh=null);break;case"focusout":gh=g1=nm=null;break;case"mousedown":p1=!0;break;case"contextmenu":case"mouseup":case"dragend":p1=!1,yO(ht,y,ct);break;case"selectionchange":if(Ree)break;case"keydown":case"keyup":yO(ht,y,ct)}var nn;if(u1)e:{switch(m){case"compositionstart":var cn="onCompositionStart";break e;case"compositionend":cn="onCompositionEnd";break e;case"compositionupdate":cn="onCompositionUpdate";break e}cn=void 0}else tm?rO(m,y)&&(cn="onCompositionEnd"):m==="keydown"&&y.keyCode===229&&(cn="onCompositionStart");cn&&(nO&&y.locale!=="ko"&&(tm||cn!=="onCompositionStart"?cn==="onCompositionEnd"&&tm&&(nn=XD()):(nc=ct,i1="value"in nc?nc.value:nc.textContent,tm=!0)),$t=ty(tt,cn),0<$t.length&&(cn=new eO(cn,m,null,y,ct),ht.push({event:cn,listeners:$t}),nn?cn.data=nn:(nn=iO(y),nn!==null&&(cn.data=nn)))),(nn=Tee?Eee(m,y):kee(m,y))&&(cn=ty(tt,"onBeforeInput"),0<cn.length&&($t=new eO("onBeforeInput","beforeinput",null,y,ct),ht.push({event:$t,listeners:cn}),$t.data=nn)),wte(ht,m,tt,y,ct)}G5(ht,g)})}function Uh(m,g,y){return{instance:m,listener:g,currentTarget:y}}function ty(m,g){for(var y=g+"Capture",j=[];m!==null;){var P=m,O=P.stateNode;if(P=P.tag,P!==5&&P!==26&&P!==27||O===null||(P=oh(m,y),P!=null&&j.unshift(Uh(m,P,O)),P=oh(m,g),P!=null&&j.push(Uh(m,P,O))),m.tag===3)return j;m=m.return}return[]}function Ste(m){if(m===null)return null;do m=m.return;while(m&&m.tag!==5&&m.tag!==27);return m||null}function q5(m,g,y,j,P){for(var O=g._reactName,K=[];y!==null&&y!==j;){var Ce=y,ze=Ce.alternate,tt=Ce.stateNode;if(Ce=Ce.tag,ze!==null&&ze===j)break;Ce!==5&&Ce!==26&&Ce!==27||tt===null||(ze=tt,P?(tt=oh(y,O),tt!=null&&K.unshift(Uh(y,tt,ze))):P||(tt=oh(y,O),tt!=null&&K.push(Uh(y,tt,ze)))),y=y.return}K.length!==0&&m.push({event:g,listeners:K})}var _te=/\r\n?/g,Ate=/\u0000|\uFFFD/g;function V5(m){return(typeof m=="string"?m:""+m).replace(_te,`
`).replace(Ate,"")}function Y5(m,g){return g=V5(g),V5(m)===g}function Mn(m,g,y,j,P,O){switch(y){case"children":typeof j=="string"?g==="body"||g==="textarea"&&j===""||Zu(m,j):(typeof j=="number"||typeof j=="bigint")&&g!=="body"&&Zu(m,""+j);break;case"className":r0(m,"class",j);break;case"tabIndex":r0(m,"tabindex",j);break;case"dir":case"role":case"viewBox":case"width":case"height":r0(m,y,j);break;case"style":YD(m,j,O);break;case"data":if(g!=="object"){r0(m,"data",j);break}case"src":case"href":if(j===""&&(g!=="a"||y!=="href")){m.removeAttribute(y);break}if(j==null||typeof j=="function"||typeof j=="symbol"||typeof j=="boolean"){m.removeAttribute(y);break}j=o0(""+j),m.setAttribute(y,j);break;case"action":case"formAction":if(typeof j=="function"){m.setAttribute(y,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof O=="function"&&(y==="formAction"?(g!=="input"&&Mn(m,g,"name",P.name,P,null),Mn(m,g,"formEncType",P.formEncType,P,null),Mn(m,g,"formMethod",P.formMethod,P,null),Mn(m,g,"formTarget",P.formTarget,P,null)):(Mn(m,g,"encType",P.encType,P,null),Mn(m,g,"method",P.method,P,null),Mn(m,g,"target",P.target,P,null)));if(j==null||typeof j=="symbol"||typeof j=="boolean"){m.removeAttribute(y);break}j=o0(""+j),m.setAttribute(y,j);break;case"onClick":j!=null&&(m.onclick=Uo);break;case"onScroll":j!=null&&on("scroll",m);break;case"onScrollEnd":j!=null&&on("scrollend",m);break;case"dangerouslySetInnerHTML":if(j!=null){if(typeof j!="object"||!("__html"in j))throw Error(s(61));if(y=j.__html,y!=null){if(P.children!=null)throw Error(s(60));m.innerHTML=y}}break;case"multiple":m.multiple=j&&typeof j!="function"&&typeof j!="symbol";break;case"muted":m.muted=j&&typeof j!="function"&&typeof j!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(j==null||typeof j=="function"||typeof j=="boolean"||typeof j=="symbol"){m.removeAttribute("xlink:href");break}y=o0(""+j),m.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",y);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":j!=null&&typeof j!="function"&&typeof j!="symbol"?m.setAttribute(y,""+j):m.removeAttribute(y);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":j&&typeof j!="function"&&typeof j!="symbol"?m.setAttribute(y,""):m.removeAttribute(y);break;case"capture":case"download":j===!0?m.setAttribute(y,""):j!==!1&&j!=null&&typeof j!="function"&&typeof j!="symbol"?m.setAttribute(y,j):m.removeAttribute(y);break;case"cols":case"rows":case"size":case"span":j!=null&&typeof j!="function"&&typeof j!="symbol"&&!isNaN(j)&&1<=j?m.setAttribute(y,j):m.removeAttribute(y);break;case"rowSpan":case"start":j==null||typeof j=="function"||typeof j=="symbol"||isNaN(j)?m.removeAttribute(y):m.setAttribute(y,j);break;case"popover":on("beforetoggle",m),on("toggle",m),s0(m,"popover",j);break;case"xlinkActuate":zo(m,"http://www.w3.org/1999/xlink","xlink:actuate",j);break;case"xlinkArcrole":zo(m,"http://www.w3.org/1999/xlink","xlink:arcrole",j);break;case"xlinkRole":zo(m,"http://www.w3.org/1999/xlink","xlink:role",j);break;case"xlinkShow":zo(m,"http://www.w3.org/1999/xlink","xlink:show",j);break;case"xlinkTitle":zo(m,"http://www.w3.org/1999/xlink","xlink:title",j);break;case"xlinkType":zo(m,"http://www.w3.org/1999/xlink","xlink:type",j);break;case"xmlBase":zo(m,"http://www.w3.org/XML/1998/namespace","xml:base",j);break;case"xmlLang":zo(m,"http://www.w3.org/XML/1998/namespace","xml:lang",j);break;case"xmlSpace":zo(m,"http://www.w3.org/XML/1998/namespace","xml:space",j);break;case"is":s0(m,"is",j);break;case"innerText":case"textContent":break;default:(!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(y=tee.get(y)||y,s0(m,y,j))}}function FC(m,g,y,j,P,O){switch(y){case"style":YD(m,j,O);break;case"dangerouslySetInnerHTML":if(j!=null){if(typeof j!="object"||!("__html"in j))throw Error(s(61));if(y=j.__html,y!=null){if(P.children!=null)throw Error(s(60));m.innerHTML=y}}break;case"children":typeof j=="string"?Zu(m,j):(typeof j=="number"||typeof j=="bigint")&&Zu(m,""+j);break;case"onScroll":j!=null&&on("scroll",m);break;case"onScrollEnd":j!=null&&on("scrollend",m);break;case"onClick":j!=null&&(m.onclick=Uo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!zD.hasOwnProperty(y))e:{if(y[0]==="o"&&y[1]==="n"&&(P=y.endsWith("Capture"),g=y.slice(2,P?y.length-7:void 0),O=m[L]||null,O=O!=null?O[y]:null,typeof O=="function"&&m.removeEventListener(g,O,P),typeof j=="function")){typeof O!="function"&&O!==null&&(y in m?m[y]=null:m.hasAttribute(y)&&m.removeAttribute(y)),m.addEventListener(g,j,P);break e}y in m?m[y]=j:j===!0?m.setAttribute(y,""):s0(m,y,j)}}}function ps(m,g,y){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":on("error",m),on("load",m);var j=!1,P=!1,O;for(O in y)if(y.hasOwnProperty(O)){var K=y[O];if(K!=null)switch(O){case"src":j=!0;break;case"srcSet":P=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,g));default:Mn(m,g,O,K,y,null)}}P&&Mn(m,g,"srcSet",y.srcSet,y,null),j&&Mn(m,g,"src",y.src,y,null);return;case"input":on("invalid",m);var Ce=O=K=P=null,ze=null,tt=null;for(j in y)if(y.hasOwnProperty(j)){var ct=y[j];if(ct!=null)switch(j){case"name":P=ct;break;case"type":K=ct;break;case"checked":ze=ct;break;case"defaultChecked":tt=ct;break;case"value":O=ct;break;case"defaultValue":Ce=ct;break;case"children":case"dangerouslySetInnerHTML":if(ct!=null)throw Error(s(137,g));break;default:Mn(m,g,j,ct,y,null)}}GD(m,O,Ce,ze,tt,K,P,!1);return;case"select":on("invalid",m),j=K=O=null;for(P in y)if(y.hasOwnProperty(P)&&(Ce=y[P],Ce!=null))switch(P){case"value":O=Ce;break;case"defaultValue":K=Ce;break;case"multiple":j=Ce;default:Mn(m,g,P,Ce,y,null)}g=O,y=K,m.multiple=!!j,g!=null?Xu(m,!!j,g,!1):y!=null&&Xu(m,!!j,y,!0);return;case"textarea":on("invalid",m),O=P=j=null;for(K in y)if(y.hasOwnProperty(K)&&(Ce=y[K],Ce!=null))switch(K){case"value":j=Ce;break;case"defaultValue":P=Ce;break;case"children":O=Ce;break;case"dangerouslySetInnerHTML":if(Ce!=null)throw Error(s(91));break;default:Mn(m,g,K,Ce,y,null)}qD(m,j,P,O);return;case"option":for(ze in y)y.hasOwnProperty(ze)&&(j=y[ze],j!=null)&&(ze==="selected"?m.selected=j&&typeof j!="function"&&typeof j!="symbol":Mn(m,g,ze,j,y,null));return;case"dialog":on("beforetoggle",m),on("toggle",m),on("cancel",m),on("close",m);break;case"iframe":case"object":on("load",m);break;case"video":case"audio":for(j=0;j<zh.length;j++)on(zh[j],m);break;case"image":on("error",m),on("load",m);break;case"details":on("toggle",m);break;case"embed":case"source":case"link":on("error",m),on("load",m);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(tt in y)if(y.hasOwnProperty(tt)&&(j=y[tt],j!=null))switch(tt){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,g));default:Mn(m,g,tt,j,y,null)}return;default:if(t1(g)){for(ct in y)y.hasOwnProperty(ct)&&(j=y[ct],j!==void 0&&FC(m,g,ct,j,y,void 0));return}}for(Ce in y)y.hasOwnProperty(Ce)&&(j=y[Ce],j!=null&&Mn(m,g,Ce,j,y,null))}function Tte(m,g,y,j){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var P=null,O=null,K=null,Ce=null,ze=null,tt=null,ct=null;for(lt in y){var ht=y[lt];if(y.hasOwnProperty(lt)&&ht!=null)switch(lt){case"checked":break;case"value":break;case"defaultValue":ze=ht;default:j.hasOwnProperty(lt)||Mn(m,g,lt,null,j,ht)}}for(var st in j){var lt=j[st];if(ht=y[st],j.hasOwnProperty(st)&&(lt!=null||ht!=null))switch(st){case"type":O=lt;break;case"name":P=lt;break;case"checked":tt=lt;break;case"defaultChecked":ct=lt;break;case"value":K=lt;break;case"defaultValue":Ce=lt;break;case"children":case"dangerouslySetInnerHTML":if(lt!=null)throw Error(s(137,g));break;default:lt!==ht&&Mn(m,g,st,lt,j,ht)}}Jj(m,K,Ce,ze,tt,ct,O,P);return;case"select":lt=K=Ce=st=null;for(O in y)if(ze=y[O],y.hasOwnProperty(O)&&ze!=null)switch(O){case"value":break;case"multiple":lt=ze;default:j.hasOwnProperty(O)||Mn(m,g,O,null,j,ze)}for(P in j)if(O=j[P],ze=y[P],j.hasOwnProperty(P)&&(O!=null||ze!=null))switch(P){case"value":st=O;break;case"defaultValue":Ce=O;break;case"multiple":K=O;default:O!==ze&&Mn(m,g,P,O,j,ze)}g=Ce,y=K,j=lt,st!=null?Xu(m,!!y,st,!1):!!j!=!!y&&(g!=null?Xu(m,!!y,g,!0):Xu(m,!!y,y?[]:"",!1));return;case"textarea":lt=st=null;for(Ce in y)if(P=y[Ce],y.hasOwnProperty(Ce)&&P!=null&&!j.hasOwnProperty(Ce))switch(Ce){case"value":break;case"children":break;default:Mn(m,g,Ce,null,j,P)}for(K in j)if(P=j[K],O=y[K],j.hasOwnProperty(K)&&(P!=null||O!=null))switch(K){case"value":st=P;break;case"defaultValue":lt=P;break;case"children":break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(s(91));break;default:P!==O&&Mn(m,g,K,P,j,O)}WD(m,st,lt);return;case"option":for(var Pt in y)st=y[Pt],y.hasOwnProperty(Pt)&&st!=null&&!j.hasOwnProperty(Pt)&&(Pt==="selected"?m.selected=!1:Mn(m,g,Pt,null,j,st));for(ze in j)st=j[ze],lt=y[ze],j.hasOwnProperty(ze)&&st!==lt&&(st!=null||lt!=null)&&(ze==="selected"?m.selected=st&&typeof st!="function"&&typeof st!="symbol":Mn(m,g,ze,st,j,lt));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Wt in y)st=y[Wt],y.hasOwnProperty(Wt)&&st!=null&&!j.hasOwnProperty(Wt)&&Mn(m,g,Wt,null,j,st);for(tt in j)if(st=j[tt],lt=y[tt],j.hasOwnProperty(tt)&&st!==lt&&(st!=null||lt!=null))switch(tt){case"children":case"dangerouslySetInnerHTML":if(st!=null)throw Error(s(137,g));break;default:Mn(m,g,tt,st,j,lt)}return;default:if(t1(g)){for(var In in y)st=y[In],y.hasOwnProperty(In)&&st!==void 0&&!j.hasOwnProperty(In)&&FC(m,g,In,void 0,j,st);for(ct in j)st=j[ct],lt=y[ct],!j.hasOwnProperty(ct)||st===lt||st===void 0&&lt===void 0||FC(m,g,ct,st,j,lt);return}}for(var Xe in y)st=y[Xe],y.hasOwnProperty(Xe)&&st!=null&&!j.hasOwnProperty(Xe)&&Mn(m,g,Xe,null,j,st);for(ht in j)st=j[ht],lt=y[ht],!j.hasOwnProperty(ht)||st===lt||st==null&&lt==null||Mn(m,g,ht,st,j,lt)}function Q5(m){switch(m){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Ete(){if(typeof performance.getEntriesByType=="function"){for(var m=0,g=0,y=performance.getEntriesByType("resource"),j=0;j<y.length;j++){var P=y[j],O=P.transferSize,K=P.initiatorType,Ce=P.duration;if(O&&Ce&&Q5(K)){for(K=0,Ce=P.responseEnd,j+=1;j<y.length;j++){var ze=y[j],tt=ze.startTime;if(tt>Ce)break;var ct=ze.transferSize,ht=ze.initiatorType;ct&&Q5(ht)&&(ze=ze.responseEnd,K+=ct*(ze<Ce?1:(Ce-tt)/(ze-tt)))}if(--j,g+=8*(O+K)/(P.duration/1e3),m++,10<m)break}}if(0<m)return g/m/1e6}return navigator.connection&&(m=navigator.connection.downlink,typeof m=="number")?m:5}var BC=null,HC=null;function ny(m){return m.nodeType===9?m:m.ownerDocument}function K5(m){switch(m){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function X5(m,g){if(m===0)switch(g){case"svg":return 1;case"math":return 2;default:return 0}return m===1&&g==="foreignObject"?0:m}function GC(m,g){return m==="textarea"||m==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.children=="bigint"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var WC=null;function kte(){var m=window.event;return m&&m.type==="popstate"?m===WC?!1:(WC=m,!0):(WC=null,!1)}var Z5=typeof setTimeout=="function"?setTimeout:void 0,Lte=typeof clearTimeout=="function"?clearTimeout:void 0,J5=typeof Promise=="function"?Promise:void 0,Pte=typeof queueMicrotask=="function"?queueMicrotask:typeof J5<"u"?function(m){return J5.resolve(null).then(m).catch(Dte)}:Z5;function Dte(m){setTimeout(function(){throw m})}function bc(m){return m==="head"}function eM(m,g){var y=g,j=0;do{var P=y.nextSibling;if(m.removeChild(y),P&&P.nodeType===8)if(y=P.data,y==="/$"||y==="/&"){if(j===0){m.removeChild(P),Em(g);return}j--}else if(y==="$"||y==="$?"||y==="$~"||y==="$!"||y==="&")j++;else if(y==="html")Fh(m.ownerDocument.documentElement);else if(y==="head"){y=m.ownerDocument.head,Fh(y);for(var O=y.firstChild;O;){var K=O.nextSibling,Ce=O.nodeName;O[Qe]||Ce==="SCRIPT"||Ce==="STYLE"||Ce==="LINK"&&O.rel.toLowerCase()==="stylesheet"||y.removeChild(O),O=K}}else y==="body"&&Fh(m.ownerDocument.body);y=P}while(y);Em(g)}function tM(m,g){var y=m;m=0;do{var j=y.nextSibling;if(y.nodeType===1?g?(y._stashedDisplay=y.style.display,y.style.display="none"):(y.style.display=y._stashedDisplay||"",y.getAttribute("style")===""&&y.removeAttribute("style")):y.nodeType===3&&(g?(y._stashedText=y.nodeValue,y.nodeValue=""):y.nodeValue=y._stashedText||""),j&&j.nodeType===8)if(y=j.data,y==="/$"){if(m===0)break;m--}else y!=="$"&&y!=="$?"&&y!=="$~"&&y!=="$!"||m++;y=j}while(y)}function qC(m){var g=m.firstChild;for(g&&g.nodeType===10&&(g=g.nextSibling);g;){var y=g;switch(g=g.nextSibling,y.nodeName){case"HTML":case"HEAD":case"BODY":qC(y),vt(y);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(y.rel.toLowerCase()==="stylesheet")continue}m.removeChild(y)}}function Ote(m,g,y,j){for(;m.nodeType===1;){var P=y;if(m.nodeName.toLowerCase()!==g.toLowerCase()){if(!j&&(m.nodeName!=="INPUT"||m.type!=="hidden"))break}else if(j){if(!m[Qe])switch(g){case"meta":if(!m.hasAttribute("itemprop"))break;return m;case"link":if(O=m.getAttribute("rel"),O==="stylesheet"&&m.hasAttribute("data-precedence"))break;if(O!==P.rel||m.getAttribute("href")!==(P.href==null||P.href===""?null:P.href)||m.getAttribute("crossorigin")!==(P.crossOrigin==null?null:P.crossOrigin)||m.getAttribute("title")!==(P.title==null?null:P.title))break;return m;case"style":if(m.hasAttribute("data-precedence"))break;return m;case"script":if(O=m.getAttribute("src"),(O!==(P.src==null?null:P.src)||m.getAttribute("type")!==(P.type==null?null:P.type)||m.getAttribute("crossorigin")!==(P.crossOrigin==null?null:P.crossOrigin))&&O&&m.hasAttribute("async")&&!m.hasAttribute("itemprop"))break;return m;default:return m}}else if(g==="input"&&m.type==="hidden"){var O=P.name==null?null:""+P.name;if(P.type==="hidden"&&m.getAttribute("name")===O)return m}else return m;if(m=Vr(m.nextSibling),m===null)break}return null}function Mte(m,g,y){if(g==="")return null;for(;m.nodeType!==3;)if((m.nodeType!==1||m.nodeName!=="INPUT"||m.type!=="hidden")&&!y||(m=Vr(m.nextSibling),m===null))return null;return m}function nM(m,g){for(;m.nodeType!==8;)if((m.nodeType!==1||m.nodeName!=="INPUT"||m.type!=="hidden")&&!g||(m=Vr(m.nextSibling),m===null))return null;return m}function VC(m){return m.data==="$?"||m.data==="$~"}function YC(m){return m.data==="$!"||m.data==="$?"&&m.ownerDocument.readyState!=="loading"}function Ite(m,g){var y=m.ownerDocument;if(m.data==="$~")m._reactRetry=g;else if(m.data!=="$?"||y.readyState!=="loading")g();else{var j=function(){g(),y.removeEventListener("DOMContentLoaded",j)};y.addEventListener("DOMContentLoaded",j),m._reactRetry=j}}function Vr(m){for(;m!=null;m=m.nextSibling){var g=m.nodeType;if(g===1||g===3)break;if(g===8){if(g=m.data,g==="$"||g==="$!"||g==="$?"||g==="$~"||g==="&"||g==="F!"||g==="F")break;if(g==="/$"||g==="/&")return null}}return m}var QC=null;function aM(m){m=m.nextSibling;for(var g=0;m;){if(m.nodeType===8){var y=m.data;if(y==="/$"||y==="/&"){if(g===0)return Vr(m.nextSibling);g--}else y!=="$"&&y!=="$!"&&y!=="$?"&&y!=="$~"&&y!=="&"||g++}m=m.nextSibling}return null}function sM(m){m=m.previousSibling;for(var g=0;m;){if(m.nodeType===8){var y=m.data;if(y==="$"||y==="$!"||y==="$?"||y==="$~"||y==="&"){if(g===0)return m;g--}else y!=="/$"&&y!=="/&"||g++}m=m.previousSibling}return null}function rM(m,g,y){switch(g=ny(y),m){case"html":if(m=g.documentElement,!m)throw Error(s(452));return m;case"head":if(m=g.head,!m)throw Error(s(453));return m;case"body":if(m=g.body,!m)throw Error(s(454));return m;default:throw Error(s(451))}}function Fh(m){for(var g=m.attributes;g.length;)m.removeAttributeNode(g[0]);vt(m)}var Yr=new Map,iM=new Set;function ay(m){return typeof m.getRootNode=="function"?m.getRootNode():m.nodeType===9?m:m.ownerDocument}var nl=Q.d;Q.d={f:$te,r:Rte,D:zte,C:Ute,L:Fte,m:Bte,X:Gte,S:Hte,M:Wte};function $te(){var m=nl.f(),g=Y0();return m||g}function Rte(m){var g=Bt(m);g!==null&&g.tag===5&&g.type==="form"?j3(g):nl.r(m)}var _m=typeof document>"u"?null:document;function oM(m,g,y){var j=_m;if(j&&typeof g=="string"&&g){var P=Ur(g);P='link[rel="'+m+'"][href="'+P+'"]',typeof y=="string"&&(P+='[crossorigin="'+y+'"]'),iM.has(P)||(iM.add(P),m={rel:m,crossOrigin:y,href:g},j.querySelector(P)===null&&(g=j.createElement("link"),ps(g,"link",m),Ua(g),j.head.appendChild(g)))}}function zte(m){nl.D(m),oM("dns-prefetch",m,null)}function Ute(m,g){nl.C(m,g),oM("preconnect",m,g)}function Fte(m,g,y){nl.L(m,g,y);var j=_m;if(j&&m&&g){var P='link[rel="preload"][as="'+Ur(g)+'"]';g==="image"&&y&&y.imageSrcSet?(P+='[imagesrcset="'+Ur(y.imageSrcSet)+'"]',typeof y.imageSizes=="string"&&(P+='[imagesizes="'+Ur(y.imageSizes)+'"]')):P+='[href="'+Ur(m)+'"]';var O=P;switch(g){case"style":O=Am(m);break;case"script":O=Tm(m)}Yr.has(O)||(m=f({rel:"preload",href:g==="image"&&y&&y.imageSrcSet?void 0:m,as:g},y),Yr.set(O,m),j.querySelector(P)!==null||g==="style"&&j.querySelector(Bh(O))||g==="script"&&j.querySelector(Hh(O))||(g=j.createElement("link"),ps(g,"link",m),Ua(g),j.head.appendChild(g)))}}function Bte(m,g){nl.m(m,g);var y=_m;if(y&&m){var j=g&&typeof g.as=="string"?g.as:"script",P='link[rel="modulepreload"][as="'+Ur(j)+'"][href="'+Ur(m)+'"]',O=P;switch(j){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":O=Tm(m)}if(!Yr.has(O)&&(m=f({rel:"modulepreload",href:m},g),Yr.set(O,m),y.querySelector(P)===null)){switch(j){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(y.querySelector(Hh(O)))return}j=y.createElement("link"),ps(j,"link",m),Ua(j),y.head.appendChild(j)}}}function Hte(m,g,y){nl.S(m,g,y);var j=_m;if(j&&m){var P=ns(j).hoistableStyles,O=Am(m);g=g||"default";var K=P.get(O);if(!K){var Ce={loading:0,preload:null};if(K=j.querySelector(Bh(O)))Ce.loading=5;else{m=f({rel:"stylesheet",href:m,"data-precedence":g},y),(y=Yr.get(O))&&KC(m,y);var ze=K=j.createElement("link");Ua(ze),ps(ze,"link",m),ze._p=new Promise(function(tt,ct){ze.onload=tt,ze.onerror=ct}),ze.addEventListener("load",function(){Ce.loading|=1}),ze.addEventListener("error",function(){Ce.loading|=2}),Ce.loading|=4,sy(K,g,j)}K={type:"stylesheet",instance:K,count:1,state:Ce},P.set(O,K)}}}function Gte(m,g){nl.X(m,g);var y=_m;if(y&&m){var j=ns(y).hoistableScripts,P=Tm(m),O=j.get(P);O||(O=y.querySelector(Hh(P)),O||(m=f({src:m,async:!0},g),(g=Yr.get(P))&&XC(m,g),O=y.createElement("script"),Ua(O),ps(O,"link",m),y.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},j.set(P,O))}}function Wte(m,g){nl.M(m,g);var y=_m;if(y&&m){var j=ns(y).hoistableScripts,P=Tm(m),O=j.get(P);O||(O=y.querySelector(Hh(P)),O||(m=f({src:m,async:!0,type:"module"},g),(g=Yr.get(P))&&XC(m,g),O=y.createElement("script"),Ua(O),ps(O,"link",m),y.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},j.set(P,O))}}function lM(m,g,y,j){var P=(P=je.current)?ay(P):null;if(!P)throw Error(s(446));switch(m){case"meta":case"title":return null;case"style":return typeof y.precedence=="string"&&typeof y.href=="string"?(g=Am(y.href),y=ns(P).hoistableStyles,j=y.get(g),j||(j={type:"style",instance:null,count:0,state:null},y.set(g,j)),j):{type:"void",instance:null,count:0,state:null};case"link":if(y.rel==="stylesheet"&&typeof y.href=="string"&&typeof y.precedence=="string"){m=Am(y.href);var O=ns(P).hoistableStyles,K=O.get(m);if(K||(P=P.ownerDocument||P,K={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},O.set(m,K),(O=P.querySelector(Bh(m)))&&!O._p&&(K.instance=O,K.state.loading=5),Yr.has(m)||(y={rel:"preload",as:"style",href:y.href,crossOrigin:y.crossOrigin,integrity:y.integrity,media:y.media,hrefLang:y.hrefLang,referrerPolicy:y.referrerPolicy},Yr.set(m,y),O||qte(P,m,y,K.state))),g&&j===null)throw Error(s(528,""));return K}if(g&&j!==null)throw Error(s(529,""));return null;case"script":return g=y.async,y=y.src,typeof y=="string"&&g&&typeof g!="function"&&typeof g!="symbol"?(g=Tm(y),y=ns(P).hoistableScripts,j=y.get(g),j||(j={type:"script",instance:null,count:0,state:null},y.set(g,j)),j):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,m))}}function Am(m){return'href="'+Ur(m)+'"'}function Bh(m){return'link[rel="stylesheet"]['+m+"]"}function cM(m){return f({},m,{"data-precedence":m.precedence,precedence:null})}function qte(m,g,y,j){m.querySelector('link[rel="preload"][as="style"]['+g+"]")?j.loading=1:(g=m.createElement("link"),j.preload=g,g.addEventListener("load",function(){return j.loading|=1}),g.addEventListener("error",function(){return j.loading|=2}),ps(g,"link",y),Ua(g),m.head.appendChild(g))}function Tm(m){return'[src="'+Ur(m)+'"]'}function Hh(m){return"script[async]"+m}function dM(m,g,y){if(g.count++,g.instance===null)switch(g.type){case"style":var j=m.querySelector('style[data-href~="'+Ur(y.href)+'"]');if(j)return g.instance=j,Ua(j),j;var P=f({},y,{"data-href":y.href,"data-precedence":y.precedence,href:null,precedence:null});return j=(m.ownerDocument||m).createElement("style"),Ua(j),ps(j,"style",P),sy(j,y.precedence,m),g.instance=j;case"stylesheet":P=Am(y.href);var O=m.querySelector(Bh(P));if(O)return g.state.loading|=4,g.instance=O,Ua(O),O;j=cM(y),(P=Yr.get(P))&&KC(j,P),O=(m.ownerDocument||m).createElement("link"),Ua(O);var K=O;return K._p=new Promise(function(Ce,ze){K.onload=Ce,K.onerror=ze}),ps(O,"link",j),g.state.loading|=4,sy(O,y.precedence,m),g.instance=O;case"script":return O=Tm(y.src),(P=m.querySelector(Hh(O)))?(g.instance=P,Ua(P),P):(j=y,(P=Yr.get(O))&&(j=f({},y),XC(j,P)),m=m.ownerDocument||m,P=m.createElement("script"),Ua(P),ps(P,"link",j),m.head.appendChild(P),g.instance=P);case"void":return null;default:throw Error(s(443,g.type))}else g.type==="stylesheet"&&(g.state.loading&4)===0&&(j=g.instance,g.state.loading|=4,sy(j,y.precedence,m));return g.instance}function sy(m,g,y){for(var j=y.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),P=j.length?j[j.length-1]:null,O=P,K=0;K<j.length;K++){var Ce=j[K];if(Ce.dataset.precedence===g)O=Ce;else if(O!==P)break}O?O.parentNode.insertBefore(m,O.nextSibling):(g=y.nodeType===9?y.head:y,g.insertBefore(m,g.firstChild))}function KC(m,g){m.crossOrigin==null&&(m.crossOrigin=g.crossOrigin),m.referrerPolicy==null&&(m.referrerPolicy=g.referrerPolicy),m.title==null&&(m.title=g.title)}function XC(m,g){m.crossOrigin==null&&(m.crossOrigin=g.crossOrigin),m.referrerPolicy==null&&(m.referrerPolicy=g.referrerPolicy),m.integrity==null&&(m.integrity=g.integrity)}var ry=null;function uM(m,g,y){if(ry===null){var j=new Map,P=ry=new Map;P.set(y,j)}else P=ry,j=P.get(y),j||(j=new Map,P.set(y,j));if(j.has(m))return j;for(j.set(m,null),y=y.getElementsByTagName(m),P=0;P<y.length;P++){var O=y[P];if(!(O[Qe]||O[Nt]||m==="link"&&O.getAttribute("rel")==="stylesheet")&&O.namespaceURI!=="http://www.w3.org/2000/svg"){var K=O.getAttribute(g)||"";K=m+K;var Ce=j.get(K);Ce?Ce.push(O):j.set(K,[O])}}return j}function mM(m,g,y){m=m.ownerDocument||m,m.head.insertBefore(y,g==="title"?m.querySelector("head > title"):null)}function Vte(m,g,y){if(y===1||g.itemProp!=null)return!1;switch(m){case"meta":case"title":return!0;case"style":if(typeof g.precedence!="string"||typeof g.href!="string"||g.href==="")break;return!0;case"link":if(typeof g.rel!="string"||typeof g.href!="string"||g.href===""||g.onLoad||g.onError)break;return g.rel==="stylesheet"?(m=g.disabled,typeof g.precedence=="string"&&m==null):!0;case"script":if(g.async&&typeof g.async!="function"&&typeof g.async!="symbol"&&!g.onLoad&&!g.onError&&g.src&&typeof g.src=="string")return!0}return!1}function fM(m){return!(m.type==="stylesheet"&&(m.state.loading&3)===0)}function Yte(m,g,y,j){if(y.type==="stylesheet"&&(typeof j.media!="string"||matchMedia(j.media).matches!==!1)&&(y.state.loading&4)===0){if(y.instance===null){var P=Am(j.href),O=g.querySelector(Bh(P));if(O){g=O._p,g!==null&&typeof g=="object"&&typeof g.then=="function"&&(m.count++,m=iy.bind(m),g.then(m,m)),y.state.loading|=4,y.instance=O,Ua(O);return}O=g.ownerDocument||g,j=cM(j),(P=Yr.get(P))&&KC(j,P),O=O.createElement("link"),Ua(O);var K=O;K._p=new Promise(function(Ce,ze){K.onload=Ce,K.onerror=ze}),ps(O,"link",j),y.instance=O}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(y,g),(g=y.state.preload)&&(y.state.loading&3)===0&&(m.count++,y=iy.bind(m),g.addEventListener("load",y),g.addEventListener("error",y))}}var ZC=0;function Qte(m,g){return m.stylesheets&&m.count===0&&ly(m,m.stylesheets),0<m.count||0<m.imgCount?function(y){var j=setTimeout(function(){if(m.stylesheets&&ly(m,m.stylesheets),m.unsuspend){var O=m.unsuspend;m.unsuspend=null,O()}},6e4+g);0<m.imgBytes&&ZC===0&&(ZC=62500*Ete());var P=setTimeout(function(){if(m.waitingForImages=!1,m.count===0&&(m.stylesheets&&ly(m,m.stylesheets),m.unsuspend)){var O=m.unsuspend;m.unsuspend=null,O()}},(m.imgBytes>ZC?50:800)+g);return m.unsuspend=y,function(){m.unsuspend=null,clearTimeout(j),clearTimeout(P)}}:null}function iy(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ly(this,this.stylesheets);else if(this.unsuspend){var m=this.unsuspend;this.unsuspend=null,m()}}}var oy=null;function ly(m,g){m.stylesheets=null,m.unsuspend!==null&&(m.count++,oy=new Map,g.forEach(Kte,m),oy=null,iy.call(m))}function Kte(m,g){if(!(g.state.loading&4)){var y=oy.get(m);if(y)var j=y.get(null);else{y=new Map,oy.set(m,y);for(var P=m.querySelectorAll("link[data-precedence],style[data-precedence]"),O=0;O<P.length;O++){var K=P[O];(K.nodeName==="LINK"||K.getAttribute("media")!=="not all")&&(y.set(K.dataset.precedence,K),j=K)}j&&y.set(null,j)}P=g.instance,K=P.getAttribute("data-precedence"),O=y.get(K)||j,O===j&&y.set(null,P),y.set(K,P),this.count++,j=iy.bind(this),P.addEventListener("load",j),P.addEventListener("error",j),O?O.parentNode.insertBefore(P,O.nextSibling):(m=m.nodeType===9?m.head:m,m.insertBefore(P,m.firstChild)),g.state.loading|=4}}var Gh={$$typeof:S,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function Xte(m,g,y,j,P,O,K,Ce,ze){this.tag=1,this.containerInfo=m,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$e(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$e(0),this.hiddenUpdates=$e(null),this.identifierPrefix=j,this.onUncaughtError=P,this.onCaughtError=O,this.onRecoverableError=K,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ze,this.incompleteTransitions=new Map}function hM(m,g,y,j,P,O,K,Ce,ze,tt,ct,ht){return m=new Xte(m,g,y,K,ze,tt,ct,ht,Ce),g=1,O===!0&&(g|=24),O=xr(3,null,null,g),m.current=O,O.stateNode=m,g=L1(),g.refCount++,m.pooledCache=g,g.refCount++,O.memoizedState={element:j,isDehydrated:y,cache:g},M1(O),m}function gM(m){return m?(m=rm,m):rm}function pM(m,g,y,j,P,O){P=gM(P),j.context===null?j.context=P:j.pendingContext=P,j=lc(g),j.payload={element:y},O=O===void 0?null:O,O!==null&&(j.callback=O),y=cc(m,j,g),y!==null&&(Ks(y,m,g),Nh(y,m,g))}function xM(m,g){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var y=m.retryLane;m.retryLane=y!==0&&y<g?y:g}}function JC(m,g){xM(m,g),(m=m.alternate)&&xM(m,g)}function yM(m){if(m.tag===13||m.tag===31){var g=jd(m,67108864);g!==null&&Ks(g,m,67108864),JC(m,67108864)}}function bM(m){if(m.tag===13||m.tag===31){var g=Nr();g=Et(g);var y=jd(m,g);y!==null&&Ks(y,m,g),JC(m,g)}}var cy=!0;function Zte(m,g,y,j){var P=z.T;z.T=null;var O=Q.p;try{Q.p=2,eS(m,g,y,j)}finally{Q.p=O,z.T=P}}function Jte(m,g,y,j){var P=z.T;z.T=null;var O=Q.p;try{Q.p=8,eS(m,g,y,j)}finally{Q.p=O,z.T=P}}function eS(m,g,y,j){if(cy){var P=tS(j);if(P===null)UC(m,g,j,dy,y),wM(m,j);else if(tne(P,m,g,y,j))j.stopPropagation();else if(wM(m,j),g&4&&-1<ene.indexOf(m)){for(;P!==null;){var O=Bt(P);if(O!==null)switch(O.tag){case 3:if(O=O.stateNode,O.current.memoizedState.isDehydrated){var K=te(O.pendingLanes);if(K!==0){var Ce=O;for(Ce.pendingLanes|=2,Ce.entangledLanes|=2;K;){var ze=1<<31-Je(K);Ce.entanglements[1]|=ze,K&=~ze}Qi(O),(Nn&6)===0&&(q0=ce()+500,Rh(0))}}break;case 31:case 13:Ce=jd(O,2),Ce!==null&&Ks(Ce,O,2),Y0(),JC(O,2)}if(O=tS(j),O===null&&UC(m,g,j,dy,y),O===P)break;P=O}P!==null&&j.stopPropagation()}else UC(m,g,j,null,y)}}function tS(m){return m=a1(m),nS(m)}var dy=null;function nS(m){if(dy=null,m=gt(m),m!==null){var g=i(m);if(g===null)m=null;else{var y=g.tag;if(y===13){if(m=o(g),m!==null)return m;m=null}else if(y===31){if(m=l(g),m!==null)return m;m=null}else if(y===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;m=null}else g!==m&&(m=null)}}return dy=m,null}function vM(m){switch(m){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ee()){case ae:return 2;case He:return 8;case Re:case it:return 32;case mt:return 268435456;default:return 32}default:return 32}}var aS=!1,vc=null,wc=null,Nc=null,Wh=new Map,qh=new Map,jc=[],ene="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function wM(m,g){switch(m){case"focusin":case"focusout":vc=null;break;case"dragenter":case"dragleave":wc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Wh.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":qh.delete(g.pointerId)}}function Vh(m,g,y,j,P,O){return m===null||m.nativeEvent!==O?(m={blockedOn:g,domEventName:y,eventSystemFlags:j,nativeEvent:O,targetContainers:[P]},g!==null&&(g=Bt(g),g!==null&&yM(g)),m):(m.eventSystemFlags|=j,g=m.targetContainers,P!==null&&g.indexOf(P)===-1&&g.push(P),m)}function tne(m,g,y,j,P){switch(g){case"focusin":return vc=Vh(vc,m,g,y,j,P),!0;case"dragenter":return wc=Vh(wc,m,g,y,j,P),!0;case"mouseover":return Nc=Vh(Nc,m,g,y,j,P),!0;case"pointerover":var O=P.pointerId;return Wh.set(O,Vh(Wh.get(O)||null,m,g,y,j,P)),!0;case"gotpointercapture":return O=P.pointerId,qh.set(O,Vh(qh.get(O)||null,m,g,y,j,P)),!0}return!1}function NM(m){var g=gt(m.target);if(g!==null){var y=i(g);if(y!==null){if(g=y.tag,g===13){if(g=o(y),g!==null){m.blockedOn=g,rt(m.priority,function(){bM(y)});return}}else if(g===31){if(g=l(y),g!==null){m.blockedOn=g,rt(m.priority,function(){bM(y)});return}}else if(g===3&&y.stateNode.current.memoizedState.isDehydrated){m.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}m.blockedOn=null}function uy(m){if(m.blockedOn!==null)return!1;for(var g=m.targetContainers;0<g.length;){var y=tS(m.nativeEvent);if(y===null){y=m.nativeEvent;var j=new y.constructor(y.type,y);n1=j,y.target.dispatchEvent(j),n1=null}else return g=Bt(y),g!==null&&yM(g),m.blockedOn=y,!1;g.shift()}return!0}function jM(m,g,y){uy(m)&&y.delete(g)}function nne(){aS=!1,vc!==null&&uy(vc)&&(vc=null),wc!==null&&uy(wc)&&(wc=null),Nc!==null&&uy(Nc)&&(Nc=null),Wh.forEach(jM),qh.forEach(jM)}function my(m,g){m.blockedOn===g&&(m.blockedOn=null,aS||(aS=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,nne)))}var fy=null;function CM(m){fy!==m&&(fy=m,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){fy===m&&(fy=null);for(var g=0;g<m.length;g+=3){var y=m[g],j=m[g+1],P=m[g+2];if(typeof j!="function"){if(nS(j||y)===null)continue;break}var O=Bt(y);O!==null&&(m.splice(g,3),g-=3,tC(O,{pending:!0,data:P,method:y.method,action:j},j,P))}}))}function Em(m){function g(ze){return my(ze,m)}vc!==null&&my(vc,m),wc!==null&&my(wc,m),Nc!==null&&my(Nc,m),Wh.forEach(g),qh.forEach(g);for(var y=0;y<jc.length;y++){var j=jc[y];j.blockedOn===m&&(j.blockedOn=null)}for(;0<jc.length&&(y=jc[0],y.blockedOn===null);)NM(y),y.blockedOn===null&&jc.shift();if(y=(m.ownerDocument||m).$$reactFormReplay,y!=null)for(j=0;j<y.length;j+=3){var P=y[j],O=y[j+1],K=P[L]||null;if(typeof O=="function")K||CM(y);else if(K){var Ce=null;if(O&&O.hasAttribute("formAction")){if(P=O,K=O[L]||null)Ce=K.formAction;else if(nS(P)!==null)continue}else Ce=K.action;typeof Ce=="function"?y[j+1]=Ce:(y.splice(j,3),j-=3),CM(y)}}}function SM(){function m(O){O.canIntercept&&O.info==="react-transition"&&O.intercept({handler:function(){return new Promise(function(K){return P=K})},focusReset:"manual",scroll:"manual"})}function g(){P!==null&&(P(),P=null),j||setTimeout(y,20)}function y(){if(!j&&!navigation.transition){var O=navigation.currentEntry;O&&O.url!=null&&navigation.navigate(O.url,{state:O.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var j=!1,P=null;return navigation.addEventListener("navigate",m),navigation.addEventListener("navigatesuccess",g),navigation.addEventListener("navigateerror",g),setTimeout(y,100),function(){j=!0,navigation.removeEventListener("navigate",m),navigation.removeEventListener("navigatesuccess",g),navigation.removeEventListener("navigateerror",g),P!==null&&(P(),P=null)}}}function sS(m){this._internalRoot=m}hy.prototype.render=sS.prototype.render=function(m){var g=this._internalRoot;if(g===null)throw Error(s(409));var y=g.current,j=Nr();pM(y,j,m,g,null,null)},hy.prototype.unmount=sS.prototype.unmount=function(){var m=this._internalRoot;if(m!==null){this._internalRoot=null;var g=m.containerInfo;pM(m.current,2,null,m,null,null),Y0(),g[H]=null}};function hy(m){this._internalRoot=m}hy.prototype.unstable_scheduleHydration=function(m){if(m){var g=oe();m={blockedOn:null,target:m,priority:g};for(var y=0;y<jc.length&&g!==0&&g<jc[y].priority;y++);jc.splice(y,0,m),y===0&&NM(m)}};var _M=t.version;if(_M!=="19.2.0")throw Error(s(527,_M,"19.2.0"));Q.findDOMNode=function(m){var g=m._reactInternals;if(g===void 0)throw typeof m.render=="function"?Error(s(188)):(m=Object.keys(m).join(","),Error(s(268,m)));return m=d(g),m=m!==null?u(m):null,m=m===null?null:m.stateNode,m};var ane={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gy.isDisabled&&gy.supportsFiber)try{Ue=gy.inject(ane),Ze=gy}catch{}}return Qh.createRoot=function(m,g){if(!r(m))throw Error(s(299));var y=!1,j="",P=D3,O=O3,K=M3;return g!=null&&(g.unstable_strictMode===!0&&(y=!0),g.identifierPrefix!==void 0&&(j=g.identifierPrefix),g.onUncaughtError!==void 0&&(P=g.onUncaughtError),g.onCaughtError!==void 0&&(O=g.onCaughtError),g.onRecoverableError!==void 0&&(K=g.onRecoverableError)),g=hM(m,1,!1,null,null,y,j,null,P,O,K,SM),m[H]=g.current,zC(m),new sS(g)},Qh.hydrateRoot=function(m,g,y){if(!r(m))throw Error(s(299));var j=!1,P="",O=D3,K=O3,Ce=M3,ze=null;return y!=null&&(y.unstable_strictMode===!0&&(j=!0),y.identifierPrefix!==void 0&&(P=y.identifierPrefix),y.onUncaughtError!==void 0&&(O=y.onUncaughtError),y.onCaughtError!==void 0&&(K=y.onCaughtError),y.onRecoverableError!==void 0&&(Ce=y.onRecoverableError),y.formState!==void 0&&(ze=y.formState)),g=hM(m,1,!0,g,y??null,j,P,ze,O,K,Ce,SM),g.context=gM(null),y=g.current,j=Nr(),j=Et(j),P=lc(j),P.callback=null,cc(y,P,j),y=j,g.current.lanes=y,be(g,y),Qi(g),m[H]=g.current,zC(m),new hy(g)},Qh.version="19.2.0",Qh}var IM;function fne(){if(IM)return oS.exports;IM=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),oS.exports=mne(),oS.exports}var hne=fne();var $M="popstate";function gne(e={}){function t(s,r){let{pathname:i,search:o,hash:l}=s.location;return rT("",{pathname:i,search:o,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function a(s,r){return typeof r=="string"?r:ep(r)}return xne(t,a,null,e)}function sa(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ci(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function pne(){return Math.random().toString(36).substring(2,10)}function RM(e,t){return{usr:e.state,key:e.key,idx:t}}function rT(e,t,a=null,s){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Of(t):t,state:a,key:t&&t.key||s||pne()}}function ep({pathname:e="/",search:t="",hash:a=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),a&&a!=="#"&&(e+=a.charAt(0)==="#"?a:"#"+a),e}function Of(e){let t={};if(e){let a=e.indexOf("#");a>=0&&(t.hash=e.substring(a),e=e.substring(0,a));let s=e.indexOf("?");s>=0&&(t.search=e.substring(s),e=e.substring(0,s)),e&&(t.pathname=e)}return t}function xne(e,t,a,s={}){let{window:r=document.defaultView,v5Compat:i=!1}=s,o=r.history,l="POP",c=null,d=u();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function u(){return(o.state||{idx:null}).idx}function f(){l="POP";let b=u(),C=b==null?null:b-d;d=b,c&&c({action:l,location:N.location,delta:C})}function p(b,C){l="PUSH";let w=rT(N.location,b,C);d=u()+1;let S=RM(w,d),E=N.createHref(w);try{o.pushState(S,"",E)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;r.location.assign(E)}i&&c&&c({action:l,location:N.location,delta:1})}function x(b,C){l="REPLACE";let w=rT(N.location,b,C);d=u();let S=RM(w,d),E=N.createHref(w);o.replaceState(S,"",E),i&&c&&c({action:l,location:N.location,delta:0})}function v(b){return yne(b)}let N={get action(){return l},get location(){return e(r,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener($M,f),c=b,()=>{r.removeEventListener($M,f),c=null}},createHref(b){return t(r,b)},createURL:v,encodeLocation(b){let C=v(b);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:p,replace:x,go(b){return o.go(b)}};return N}function yne(e,t=!1){let a="http://localhost";typeof window<"u"&&(a=window.location.origin!=="null"?window.location.origin:window.location.href),sa(a,"No window.location.(origin|href) available to create URL");let s=typeof e=="string"?e:ep(e);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=a+s),new URL(s,a)}function BB(e,t,a="/"){return bne(e,t,a,!1)}function bne(e,t,a,s){let r=typeof t=="string"?Of(t):t,i=Sl(r.pathname||"/",a);if(i==null)return null;let o=HB(e);vne(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=Lne(i);l=Ene(o[c],d,s)}return l}function HB(e,t=[],a=[],s="",r=!1){let i=(o,l,c=r,d)=>{let u={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(s)&&c)return;sa(u.relativePath.startsWith(s),`Absolute route path "${u.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(s.length)}let f=wl([s,u.relativePath]),p=a.concat(u);o.children&&o.children.length>0&&(sa(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),HB(o.children,t,p,f,c)),!(o.path==null&&!o.index)&&t.push({path:f,score:Ane(f,o.index),routesMeta:p})};return e.forEach((o,l)=>{if(o.path===""||!o.path?.includes("?"))i(o,l);else for(let c of GB(o.path))i(o,l,!0,c)}),t}function GB(e){let t=e.split("/");if(t.length===0)return[];let[a,...s]=t,r=a.endsWith("?"),i=a.replace(/\?$/,"");if(s.length===0)return r?[i,""]:[i];let o=GB(s.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),r&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function vne(e){e.sort((t,a)=>t.score!==a.score?a.score-t.score:Tne(t.routesMeta.map(s=>s.childrenIndex),a.routesMeta.map(s=>s.childrenIndex)))}var wne=/^:[\w-]+$/,Nne=3,jne=2,Cne=1,Sne=10,_ne=-2,zM=e=>e==="*";function Ane(e,t){let a=e.split("/"),s=a.length;return a.some(zM)&&(s+=_ne),t&&(s+=jne),a.filter(r=>!zM(r)).reduce((r,i)=>r+(wne.test(i)?Nne:i===""?Cne:Sne),s)}function Tne(e,t){return e.length===t.length&&e.slice(0,-1).every((s,r)=>s===t[r])?e[e.length-1]-t[t.length-1]:0}function Ene(e,t,a=!1){let{routesMeta:s}=e,r={},i="/",o=[];for(let l=0;l<s.length;++l){let c=s[l],d=l===s.length-1,u=i==="/"?t:t.slice(i.length)||"/",f=Yb({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),p=c.route;if(!f&&d&&a&&!s[s.length-1].route.index&&(f=Yb({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!f)return null;Object.assign(r,f.params),o.push({params:r,pathname:wl([i,f.pathname]),pathnameBase:Mne(wl([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=wl([i,f.pathnameBase]))}return o}function Yb(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[a,s]=kne(e.path,e.caseSensitive,e.end),r=t.match(a);if(!r)return null;let i=r[0],o=i.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:s.reduce((d,{paramName:u,isOptional:f},p)=>{if(u==="*"){let v=l[p]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const x=l[p];return f&&!x?d[u]=void 0:d[u]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function kne(e,t=!1,a=!0){ci(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let s=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(s.push({paramName:"*"}),r+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?r+="\\/*$":e!==""&&e!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),s]}function Lne(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ci(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Sl(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let a=t.endsWith("/")?t.length-1:t.length,s=e.charAt(a);return s&&s!=="/"?null:e.slice(a)||"/"}var Pne=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function Dne(e,t="/"){let{pathname:a,search:s="",hash:r=""}=typeof e=="string"?Of(e):e,i;return a?(a=a.replace(/\/\/+/g,"/"),a.startsWith("/")?i=UM(a.substring(1),"/"):i=UM(a,t)):i=t,{pathname:i,search:Ine(s),hash:$ne(r)}}function UM(e,t){let a=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?a.length>1&&a.pop():r!=="."&&a.push(r)}),a.length>1?a.join("/"):"/"}function uS(e,t,a,s){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function One(e){return e.filter((t,a)=>a===0||t.route.path&&t.route.path.length>0)}function Tk(e){let t=One(e);return t.map((a,s)=>s===t.length-1?a.pathname:a.pathnameBase)}function Ek(e,t,a,s=!1){let r;typeof e=="string"?r=Of(e):(r={...e},sa(!r.pathname||!r.pathname.includes("?"),uS("?","pathname","search",r)),sa(!r.pathname||!r.pathname.includes("#"),uS("#","pathname","hash",r)),sa(!r.search||!r.search.includes("#"),uS("#","search","hash",r)));let i=e===""||r.pathname==="",o=i?"/":r.pathname,l;if(o==null)l=a;else{let f=t.length-1;if(!s&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;r.pathname=p.join("/")}l=f>=0?t[f]:"/"}let c=Dne(r,l),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&a.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}var wl=e=>e.join("/").replace(/\/\/+/g,"/"),Mne=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Ine=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,$ne=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,Rne=class{constructor(e,t,a,s=!1){this.status=e,this.statusText=t||"",this.internal=s,a instanceof Error?(this.data=a.toString(),this.error=a):this.data=a}};function zne(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function Une(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var WB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function qB(e,t){let a=e;if(typeof a!="string"||!Pne.test(a))return{absoluteURL:void 0,isExternal:!1,to:a};let s=a,r=!1;if(WB)try{let i=new URL(window.location.href),o=a.startsWith("//")?new URL(i.protocol+a):new URL(a),l=Sl(o.pathname,t);o.origin===i.origin&&l!=null?a=l+o.search+o.hash:r=!0}catch{ci(!1,`<Link to="${a}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:r,to:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var VB=["POST","PUT","PATCH","DELETE"];new Set(VB);var Fne=["GET",...VB];new Set(Fne);var Mf=h.createContext(null);Mf.displayName="DataRouter";var Nw=h.createContext(null);Nw.displayName="DataRouterState";var Bne=h.createContext(!1),YB=h.createContext({isTransitioning:!1});YB.displayName="ViewTransition";var Hne=h.createContext(new Map);Hne.displayName="Fetchers";var Gne=h.createContext(null);Gne.displayName="Await";var Ir=h.createContext(null);Ir.displayName="Navigation";var Bp=h.createContext(null);Bp.displayName="Location";var pi=h.createContext({outlet:null,matches:[],isDataRoute:!1});pi.displayName="Route";var kk=h.createContext(null);kk.displayName="RouteError";var QB="REACT_ROUTER_ERROR",Wne="REDIRECT",qne="ROUTE_ERROR_RESPONSE";function Vne(e){if(e.startsWith(`${QB}:${Wne}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function Yne(e){if(e.startsWith(`${QB}:${qne}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new Rne(t.status,t.statusText,t.data)}catch{}}function Qne(e,{relative:t}={}){sa(If(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:s}=h.useContext(Ir),{hash:r,pathname:i,search:o}=Hp(e,{relative:t}),l=i;return a!=="/"&&(l=i==="/"?a:wl([a,i])),s.createHref({pathname:l,search:o,hash:r})}function If(){return h.useContext(Bp)!=null}function Qt(){return sa(If(),"useLocation() may be used only in the context of a <Router> component."),h.useContext(Bp).location}var KB="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function XB(e){h.useContext(Ir).static||h.useLayoutEffect(e)}function bt(){let{isDataRoute:e}=h.useContext(pi);return e?dae():Kne()}function Kne(){sa(If(),"useNavigate() may be used only in the context of a <Router> component.");let e=h.useContext(Mf),{basename:t,navigator:a}=h.useContext(Ir),{matches:s}=h.useContext(pi),{pathname:r}=Qt(),i=JSON.stringify(Tk(s)),o=h.useRef(!1);return XB(()=>{o.current=!0}),h.useCallback((c,d={})=>{if(ci(o.current,KB),!o.current)return;if(typeof c=="number"){a.go(c);return}let u=Ek(c,JSON.parse(i),r,d.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:wl([t,u.pathname])),(d.replace?a.replace:a.push)(u,d.state,d)},[t,a,i,r,e])}var Xne=h.createContext(null);function Zne(e){let t=h.useContext(pi).outlet;return h.useMemo(()=>t&&h.createElement(Xne.Provider,{value:e},t),[t,e])}function Ul(){let{matches:e}=h.useContext(pi),t=e[e.length-1];return t?t.params:{}}function Hp(e,{relative:t}={}){let{matches:a}=h.useContext(pi),{pathname:s}=Qt(),r=JSON.stringify(Tk(a));return h.useMemo(()=>Ek(e,JSON.parse(r),s,t==="path"),[e,r,s,t])}function Jne(e,t){return ZB(e,t)}function ZB(e,t,a,s,r){sa(If(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=h.useContext(Ir),{matches:o}=h.useContext(pi),l=o[o.length-1],c=l?l.params:{},d=l?l.pathname:"/",u=l?l.pathnameBase:"/",f=l&&l.route;{let w=f&&f.path||"";eH(d,!f||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let p=Qt(),x;if(t){let w=typeof t=="string"?Of(t):t;sa(u==="/"||w.pathname?.startsWith(u),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${w.pathname}" was given in the \`location\` prop.`),x=w}else x=p;let v=x.pathname||"/",N=v;if(u!=="/"){let w=u.replace(/^\//,"").split("/");N="/"+v.replace(/^\//,"").split("/").slice(w.length).join("/")}let b=BB(e,{pathname:N});ci(f||b!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),ci(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=sae(b&&b.map(w=>Object.assign({},w,{params:Object.assign({},c,w.params),pathname:wl([u,i.encodeLocation?i.encodeLocation(w.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?u:wl([u,i.encodeLocation?i.encodeLocation(w.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathnameBase])})),o,a,s,r);return t&&C?h.createElement(Bp.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},C):C}function eae(){let e=cae(),t=zne(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),a=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},i={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=h.createElement(h.Fragment,null,h.createElement("p",null," Hey developer "),h.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",h.createElement("code",{style:i},"ErrorBoundary")," or"," ",h.createElement("code",{style:i},"errorElement")," prop on your route.")),h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},t),a?h.createElement("pre",{style:r},a):null,o)}var tae=h.createElement(eae,null),JB=class extends h.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const a=Yne(e.digest);a&&(e=a)}let t=e!==void 0?h.createElement(pi.Provider,{value:this.props.routeContext},h.createElement(kk.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?h.createElement(nae,{error:e},t):t}};JB.contextType=Bne;var mS=new WeakMap;function nae({children:e,error:t}){let{basename:a}=h.useContext(Ir);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let s=Vne(t.digest);if(s){let r=mS.get(t);if(r)throw r;let i=qB(s.location,a);if(WB&&!mS.get(t))if(i.isExternal||s.reloadDocument)window.location.href=i.absoluteURL||i.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:s.replace}));throw mS.set(t,o),o}return h.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return e}function aae({routeContext:e,match:t,children:a}){let s=h.useContext(Mf);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),h.createElement(pi.Provider,{value:e},a)}function sae(e,t=[],a=null,s=null,r=null){if(e==null){if(!a)return null;if(a.errors)e=a.matches;else if(t.length===0&&!a.initialized&&a.matches.length>0)e=a.matches;else return null}let i=e,o=a?.errors;if(o!=null){let u=i.findIndex(f=>f.route.id&&o?.[f.route.id]!==void 0);sa(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let l=!1,c=-1;if(a)for(let u=0;u<i.length;u++){let f=i[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=u),f.route.id){let{loaderData:p,errors:x}=a,v=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!x||x[f.route.id]===void 0);if(f.route.lazy||v){l=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}let d=a&&s?(u,f)=>{s(u,{location:a.location,params:a.matches?.[0]?.params??{},unstable_pattern:Une(a.matches),errorInfo:f})}:void 0;return i.reduceRight((u,f,p)=>{let x,v=!1,N=null,b=null;a&&(x=o&&f.route.id?o[f.route.id]:void 0,N=f.route.errorElement||tae,l&&(c<0&&p===0?(eH("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,b=null):c===p&&(v=!0,b=f.route.hydrateFallbackElement||null)));let C=t.concat(i.slice(0,p+1)),w=()=>{let S;return x?S=N:v?S=b:f.route.Component?S=h.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=u,h.createElement(aae,{match:f,routeContext:{outlet:u,matches:C,isDataRoute:a!=null},children:S})};return a&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?h.createElement(JB,{location:a.location,revalidation:a.revalidation,component:N,error:x,children:w(),routeContext:{outlet:null,matches:C,isDataRoute:!0},onError:d}):w()},null)}function Lk(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function rae(e){let t=h.useContext(Mf);return sa(t,Lk(e)),t}function iae(e){let t=h.useContext(Nw);return sa(t,Lk(e)),t}function oae(e){let t=h.useContext(pi);return sa(t,Lk(e)),t}function Pk(e){let t=oae(e),a=t.matches[t.matches.length-1];return sa(a.route.id,`${e} can only be used on routes that contain a unique "id"`),a.route.id}function lae(){return Pk("useRouteId")}function cae(){let e=h.useContext(kk),t=iae("useRouteError"),a=Pk("useRouteError");return e!==void 0?e:t.errors?.[a]}function dae(){let{router:e}=rae("useNavigate"),t=Pk("useNavigate"),a=h.useRef(!1);return XB(()=>{a.current=!0}),h.useCallback(async(r,i={})=>{ci(a.current,KB),a.current&&(typeof r=="number"?await e.navigate(r):await e.navigate(r,{fromRouteId:t,...i}))},[e,t])}var FM={};function eH(e,t,a){!t&&!FM[e]&&(FM[e]=!0,ci(!1,a))}h.memo(uae);function uae({routes:e,future:t,state:a,onError:s}){return ZB(e,void 0,a,s,t)}function ti({to:e,replace:t,state:a,relative:s}){sa(If(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=h.useContext(Ir);ci(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=h.useContext(pi),{pathname:o}=Qt(),l=bt(),c=Ek(e,Tk(i),o,s==="path"),d=JSON.stringify(c);return h.useEffect(()=>{l(JSON.parse(d),{replace:t,state:a,relative:s})},[l,d,s,t,a]),null}function Gp(e){return Zne(e.context)}function xt(e){sa(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function mae({basename:e="/",children:t=null,location:a,navigationType:s="POP",navigator:r,static:i=!1,unstable_useTransitions:o}){sa(!If(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),c=h.useMemo(()=>({basename:l,navigator:r,static:i,unstable_useTransitions:o,future:{}}),[l,r,i,o]);typeof a=="string"&&(a=Of(a));let{pathname:d="/",search:u="",hash:f="",state:p=null,key:x="default"}=a,v=h.useMemo(()=>{let N=Sl(d,l);return N==null?null:{location:{pathname:N,search:u,hash:f,state:p,key:x},navigationType:s}},[l,d,u,f,p,x,s]);return ci(v!=null,`<Router basename="${l}"> is not able to match the URL "${d}${u}${f}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:h.createElement(Ir.Provider,{value:c},h.createElement(Bp.Provider,{children:t,value:v}))}function fae({children:e,location:t}){return Jne(iT(e),t)}function iT(e,t=[]){let a=[];return h.Children.forEach(e,(s,r)=>{if(!h.isValidElement(s))return;let i=[...t,r];if(s.type===h.Fragment){a.push.apply(a,iT(s.props.children,i));return}sa(s.type===xt,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),sa(!s.props.index||!s.props.children,"An index route cannot have child routes.");let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=iT(s.props.children,i)),a.push(o)}),a}var Ab="get",Tb="application/x-www-form-urlencoded";function jw(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function hae(e){return jw(e)&&e.tagName.toLowerCase()==="button"}function gae(e){return jw(e)&&e.tagName.toLowerCase()==="form"}function pae(e){return jw(e)&&e.tagName.toLowerCase()==="input"}function xae(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function yae(e,t){return e.button===0&&(!t||t==="_self")&&!xae(e)}function oT(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,a)=>{let s=e[a];return t.concat(Array.isArray(s)?s.map(r=>[a,r]):[[a,s]])},[]))}function bae(e,t){let a=oT(e);return t&&t.forEach((s,r)=>{a.has(r)||t.getAll(r).forEach(i=>{a.append(r,i)})}),a}var py=null;function vae(){if(py===null)try{new FormData(document.createElement("form"),0),py=!1}catch{py=!0}return py}var wae=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function fS(e){return e!=null&&!wae.has(e)?(ci(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Tb}"`),null):e}function Nae(e,t){let a,s,r,i,o;if(gae(e)){let l=e.getAttribute("action");s=l?Sl(l,t):null,a=e.getAttribute("method")||Ab,r=fS(e.getAttribute("enctype"))||Tb,i=new FormData(e)}else if(hae(e)||pae(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||l.getAttribute("action");if(s=c?Sl(c,t):null,a=e.getAttribute("formmethod")||l.getAttribute("method")||Ab,r=fS(e.getAttribute("formenctype"))||fS(l.getAttribute("enctype"))||Tb,i=new FormData(l,e),!vae()){let{name:d,type:u,value:f}=e;if(u==="image"){let p=d?`${d}.`:"";i.append(`${p}x`,"0"),i.append(`${p}y`,"0")}else d&&i.append(d,f)}}else{if(jw(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=Ab,s=null,r=Tb,o=e}return i&&r==="text/plain"&&(o=i,i=void 0),{action:s,method:a.toLowerCase(),encType:r,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Dk(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function jae(e,t,a,s){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return a?r.pathname.endsWith("/")?r.pathname=`${r.pathname}_.${s}`:r.pathname=`${r.pathname}.${s}`:r.pathname==="/"?r.pathname=`_root.${s}`:t&&Sl(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${s}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${s}`,r}async function Cae(e,t){if(e.id in t)return t[e.id];try{let a=await import(e.module);return t[e.id]=a,a}catch(a){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Sae(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function _ae(e,t,a){let s=await Promise.all(e.map(async r=>{let i=t.routes[r.route.id];if(i){let o=await Cae(i,a);return o.links?o.links():[]}return[]}));return kae(s.flat(1).filter(Sae).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function BM(e,t,a,s,r,i){let o=(c,d)=>a[d]?c.route.id!==a[d].route.id:!0,l=(c,d)=>a[d].pathname!==c.pathname||a[d].route.path?.endsWith("*")&&a[d].params["*"]!==c.params["*"];return i==="assets"?t.filter((c,d)=>o(c,d)||l(c,d)):i==="data"?t.filter((c,d)=>{let u=s.routes[c.route.id];if(!u||!u.hasLoader)return!1;if(o(c,d)||l(c,d))return!0;if(c.route.shouldRevalidate){let f=c.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:a[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function Aae(e,t,{includeHydrateFallback:a}={}){return Tae(e.map(s=>{let r=t.routes[s.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),a&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function Tae(e){return[...new Set(e)]}function Eae(e){let t={},a=Object.keys(e).sort();for(let s of a)t[s]=e[s];return t}function kae(e,t){let a=new Set;return new Set(t),e.reduce((s,r)=>{let i=JSON.stringify(Eae(r));return a.has(i)||(a.add(i),s.push({key:i,link:r})),s},[])}function tH(){let e=h.useContext(Mf);return Dk(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Lae(){let e=h.useContext(Nw);return Dk(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Ok=h.createContext(void 0);Ok.displayName="FrameworkContext";function nH(){let e=h.useContext(Ok);return Dk(e,"You must render this element inside a <HydratedRouter> element"),e}function Pae(e,t){let a=h.useContext(Ok),[s,r]=h.useState(!1),[i,o]=h.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:f}=t,p=h.useRef(null);h.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let N=C=>{C.forEach(w=>{o(w.isIntersecting)})},b=new IntersectionObserver(N,{threshold:.5});return p.current&&b.observe(p.current),()=>{b.disconnect()}}},[e]),h.useEffect(()=>{if(s){let N=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(N)}}},[s]);let x=()=>{r(!0)},v=()=>{r(!1),o(!1)};return a?e!=="intent"?[i,p,{}]:[i,p,{onFocus:Kh(l,x),onBlur:Kh(c,v),onMouseEnter:Kh(d,x),onMouseLeave:Kh(u,v),onTouchStart:Kh(f,x)}]:[!1,p,{}]}function Kh(e,t){return a=>{e&&e(a),a.defaultPrevented||t(a)}}function Dae({page:e,...t}){let{router:a}=tH(),s=h.useMemo(()=>BB(a.routes,e,a.basename),[a.routes,e,a.basename]);return s?h.createElement(Mae,{page:e,matches:s,...t}):null}function Oae(e){let{manifest:t,routeModules:a}=nH(),[s,r]=h.useState([]);return h.useEffect(()=>{let i=!1;return _ae(e,t,a).then(o=>{i||r(o)}),()=>{i=!0}},[e,t,a]),s}function Mae({page:e,matches:t,...a}){let s=Qt(),{future:r,manifest:i,routeModules:o}=nH(),{basename:l}=tH(),{loaderData:c,matches:d}=Lae(),u=h.useMemo(()=>BM(e,t,d,i,s,"data"),[e,t,d,i,s]),f=h.useMemo(()=>BM(e,t,d,i,s,"assets"),[e,t,d,i,s]),p=h.useMemo(()=>{if(e===s.pathname+s.search+s.hash)return[];let N=new Set,b=!1;if(t.forEach(w=>{let S=i.routes[w.route.id];!S||!S.hasLoader||(!u.some(E=>E.route.id===w.route.id)&&w.route.id in c&&o[w.route.id]?.shouldRevalidate||S.hasClientLoader?b=!0:N.add(w.route.id))}),N.size===0)return[];let C=jae(e,l,r.unstable_trailingSlashAwareDataRequests,"data");return b&&N.size>0&&C.searchParams.set("_routes",t.filter(w=>N.has(w.route.id)).map(w=>w.route.id).join(",")),[C.pathname+C.search]},[l,r.unstable_trailingSlashAwareDataRequests,c,s,i,u,t,e,o]),x=h.useMemo(()=>Aae(f,i),[f,i]),v=Oae(f);return h.createElement(h.Fragment,null,p.map(N=>h.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...a})),x.map(N=>h.createElement("link",{key:N,rel:"modulepreload",href:N,...a})),v.map(({key:N,link:b})=>h.createElement("link",{key:N,nonce:a.nonce,...b,crossOrigin:b.crossOrigin??a.crossOrigin})))}function Iae(...e){return t=>{e.forEach(a=>{typeof a=="function"?a(t):a!=null&&(a.current=t)})}}var $ae=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{$ae&&(window.__reactRouterVersion="7.13.0")}catch{}function Rae({basename:e,children:t,unstable_useTransitions:a,window:s}){let r=h.useRef();r.current==null&&(r.current=gne({window:s,v5Compat:!0}));let i=r.current,[o,l]=h.useState({action:i.action,location:i.location}),c=h.useCallback(d=>{a===!1?l(d):h.startTransition(()=>l(d))},[a]);return h.useLayoutEffect(()=>i.listen(c),[i,c]),h.createElement(mae,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:i,unstable_useTransitions:a})}var aH=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sH=h.forwardRef(function({onClick:t,discover:a="render",prefetch:s="none",relative:r,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:f,unstable_defaultShouldRevalidate:p,...x},v){let{basename:N,unstable_useTransitions:b}=h.useContext(Ir),C=typeof d=="string"&&aH.test(d),w=qB(d,N);d=w.to;let S=Qne(d,{relative:r}),[E,k,A]=Pae(s,x),T=Fae(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:r,viewTransition:f,unstable_defaultShouldRevalidate:p,unstable_useTransitions:b});function _(R){t&&t(R),R.defaultPrevented||T(R)}let I=h.createElement("a",{...x,...A,href:w.absoluteURL||S,onClick:w.isExternal||i?t:_,ref:Iae(v,k),target:c,"data-discover":!C&&a==="render"?"true":void 0});return E&&!C?h.createElement(h.Fragment,null,I,h.createElement(Dae,{page:S})):I});sH.displayName="Link";var Ot=h.forwardRef(function({"aria-current":t="page",caseSensitive:a=!1,className:s="",end:r=!1,style:i,to:o,viewTransition:l,children:c,...d},u){let f=Hp(o,{relative:d.relative}),p=Qt(),x=h.useContext(Nw),{navigator:v,basename:N}=h.useContext(Ir),b=x!=null&&qae(f)&&l===!0,C=v.encodeLocation?v.encodeLocation(f).pathname:f.pathname,w=p.pathname,S=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;a||(w=w.toLowerCase(),S=S?S.toLowerCase():null,C=C.toLowerCase()),S&&N&&(S=Sl(S,N)||S);const E=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let k=w===C||!r&&w.startsWith(C)&&w.charAt(E)==="/",A=S!=null&&(S===C||!r&&S.startsWith(C)&&S.charAt(C.length)==="/"),T={isActive:k,isPending:A,isTransitioning:b},_=k?t:void 0,I;typeof s=="function"?I=s(T):I=[s,k?"active":null,A?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let R=typeof i=="function"?i(T):i;return h.createElement(sH,{...d,"aria-current":_,className:I,ref:u,style:R,to:o,viewTransition:l},typeof c=="function"?c(T):c)});Ot.displayName="NavLink";var zae=h.forwardRef(({discover:e="render",fetcherKey:t,navigate:a,reloadDocument:s,replace:r,state:i,method:o=Ab,action:l,onSubmit:c,relative:d,preventScrollReset:u,viewTransition:f,unstable_defaultShouldRevalidate:p,...x},v)=>{let{unstable_useTransitions:N}=h.useContext(Ir),b=Gae(),C=Wae(l,{relative:d}),w=o.toLowerCase()==="get"?"get":"post",S=typeof l=="string"&&aH.test(l),E=k=>{if(c&&c(k),k.defaultPrevented)return;k.preventDefault();let A=k.nativeEvent.submitter,T=A?.getAttribute("formmethod")||o,_=()=>b(A||k.currentTarget,{fetcherKey:t,method:T,navigate:a,replace:r,state:i,relative:d,preventScrollReset:u,viewTransition:f,unstable_defaultShouldRevalidate:p});N&&a!==!1?h.startTransition(()=>_()):_()};return h.createElement("form",{ref:v,method:w,action:C,onSubmit:s?c:E,...x,"data-discover":!S&&e==="render"?"true":void 0})});zae.displayName="Form";function Uae(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function rH(e){let t=h.useContext(Mf);return sa(t,Uae(e)),t}function Fae(e,{target:t,replace:a,state:s,preventScrollReset:r,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l,unstable_useTransitions:c}={}){let d=bt(),u=Qt(),f=Hp(e,{relative:i});return h.useCallback(p=>{if(yae(p,t)){p.preventDefault();let x=a!==void 0?a:ep(u)===ep(f),v=()=>d(e,{replace:x,state:s,preventScrollReset:r,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l});c?h.startTransition(()=>v()):v()}},[u,d,f,a,s,t,e,r,i,o,l,c])}function Ds(e){ci(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=h.useRef(oT(e)),a=h.useRef(!1),s=Qt(),r=h.useMemo(()=>bae(s.search,a.current?null:t.current),[s.search]),i=bt(),o=h.useCallback((l,c)=>{const d=oT(typeof l=="function"?l(new URLSearchParams(r)):l);a.current=!0,i("?"+d,c)},[i,r]);return[r,o]}var Bae=0,Hae=()=>`__${String(++Bae)}__`;function Gae(){let{router:e}=rH("useSubmit"),{basename:t}=h.useContext(Ir),a=lae(),s=e.fetch,r=e.navigate;return h.useCallback(async(i,o={})=>{let{action:l,method:c,encType:d,formData:u,body:f}=Nae(i,t);if(o.navigate===!1){let p=o.fetcherKey||Hae();await s(p,a,o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:u,body:f,formMethod:o.method||c,formEncType:o.encType||d,flushSync:o.flushSync})}else await r(o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:u,body:f,formMethod:o.method||c,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:a,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,r,t,a])}function Wae(e,{relative:t}={}){let{basename:a}=h.useContext(Ir),s=h.useContext(pi);sa(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),i={...Hp(e||".",{relative:t})},o=Qt();if(e==null){i.search=o.search;let l=new URLSearchParams(i.search),c=l.getAll("index");if(c.some(u=>u==="")){l.delete("index"),c.filter(f=>f).forEach(f=>l.append("index",f));let u=l.toString();i.search=u?`?${u}`:""}}return(!e||e===".")&&r.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(i.pathname=i.pathname==="/"?a:wl([a,i.pathname])),ep(i)}function qae(e,{relative:t}={}){let a=h.useContext(YB);sa(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=rH("useViewTransitionState"),r=Hp(e,{relative:t});if(!a.isTransitioning)return!1;let i=Sl(a.currentLocation.pathname,s)||a.currentLocation.pathname,o=Sl(a.nextLocation.pathname,s)||a.nextLocation.pathname;return Yb(r.pathname,o)!=null||Yb(r.pathname,i)!=null}var Mi=FB();const xy=Hi(Mi);function iH(e){var t,a,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(a=iH(e[t]))&&(s&&(s+=" "),s+=a)}else for(a in e)e[a]&&(s&&(s+=" "),s+=a);return s}function kt(){for(var e,t,a=0,s="",r=arguments.length;a<r;a++)(e=arguments[a])&&(t=iH(e))&&(s&&(s+=" "),s+=t);return s}function Vae(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",t.firstChild?t.insertBefore(a,t.firstChild):t.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}Vae(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Wp=e=>typeof e=="number"&&!isNaN(e),xu=e=>typeof e=="string",_l=e=>typeof e=="function",Yae=e=>xu(e)||Wp(e),lT=e=>xu(e)||_l(e)?e:null,Qae=(e,t)=>e===!1||Wp(e)&&e>0?e:t,cT=e=>h.isValidElement(e)||xu(e)||_l(e)||Wp(e);function Kae(e,t,a=300){let{scrollHeight:s,style:r}=e;requestAnimationFrame(()=>{r.minHeight="initial",r.height=s+"px",r.transition=`all ${a}ms`,requestAnimationFrame(()=>{r.height="0",r.padding="0",r.margin="0",setTimeout(t,a)})})}function Xae({enter:e,exit:t,appendPosition:a=!1,collapse:s=!0,collapseDuration:r=300}){return function({children:i,position:o,preventExitTransition:l,done:c,nodeRef:d,isIn:u,playToast:f}){let p=a?`${e}--${o}`:e,x=a?`${t}--${o}`:t,v=h.useRef(0);return h.useLayoutEffect(()=>{let N=d.current,b=p.split(" "),C=w=>{w.target===d.current&&(f(),N.removeEventListener("animationend",C),N.removeEventListener("animationcancel",C),v.current===0&&w.type!=="animationcancel"&&N.classList.remove(...b))};N.classList.add(...b),N.addEventListener("animationend",C),N.addEventListener("animationcancel",C)},[]),h.useEffect(()=>{let N=d.current,b=()=>{N.removeEventListener("animationend",b),s?Kae(N,c,r):c()};u||(l?b():(v.current=1,N.className+=` ${x}`,N.addEventListener("animationend",b)))},[u]),pt.createElement(pt.Fragment,null,i)}}function HM(e,t){return{content:oH(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function oH(e,t,a=!1){return h.isValidElement(e)&&!xu(e.type)?h.cloneElement(e,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:a}):_l(e)?e({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:a}):e}function Zae({closeToast:e,theme:t,ariaLabel:a="close"}){return pt.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:s=>{s.stopPropagation(),e(!0)},"aria-label":a},pt.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},pt.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function Jae({delay:e,isRunning:t,closeToast:a,type:s="default",hide:r,className:i,controlledProgress:o,progress:l,rtl:c,isIn:d,theme:u}){let f=r||o&&l===0,p={animationDuration:`${e}ms`,animationPlayState:t?"running":"paused"};o&&(p.transform=`scaleX(${l})`);let x=kt("Toastify__progress-bar",o?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${u}`,`Toastify__progress-bar--${s}`,{"Toastify__progress-bar--rtl":c}),v=_l(i)?i({rtl:c,type:s,defaultClassName:x}):kt(x,i),N={[o&&l>=1?"onTransitionEnd":"onAnimationEnd"]:o&&l<1?null:()=>{d&&a()}};return pt.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":f},pt.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${u} Toastify__progress-bar--${s}`}),pt.createElement("div",{role:"progressbar","aria-hidden":f?"true":"false","aria-label":"notification timer",className:v,style:p,...N}))}var ese=1,lH=()=>`${ese++}`;function tse(e,t,a){let s=1,r=0,i=[],o=[],l=t,c=new Map,d=new Set,u=w=>(d.add(w),()=>d.delete(w)),f=()=>{o=Array.from(c.values()),d.forEach(w=>w())},p=({containerId:w,toastId:S,updateId:E})=>{let k=w?w!==e:e!==1,A=c.has(S)&&E==null;return k||A},x=(w,S)=>{c.forEach(E=>{var k;(S==null||S===E.props.toastId)&&((k=E.toggle)==null||k.call(E,w))})},v=w=>{var S,E;(E=(S=w.props)==null?void 0:S.onClose)==null||E.call(S,w.removalReason),w.isActive=!1},N=w=>{if(w==null)c.forEach(v);else{let S=c.get(w);S&&v(S)}f()},b=()=>{r-=i.length,i=[]},C=w=>{var S,E;let{toastId:k,updateId:A}=w.props,T=A==null;w.staleId&&c.delete(w.staleId),w.isActive=!0,c.set(k,w),f(),a(HM(w,T?"added":"updated")),T&&((E=(S=w.props).onOpen)==null||E.call(S))};return{id:e,props:l,observe:u,toggle:x,removeToast:N,toasts:c,clearQueue:b,buildToast:(w,S)=>{if(p(S))return;let{toastId:E,updateId:k,data:A,staleId:T,delay:_}=S,I=k==null;I&&r++;let R={...l,style:l.toastStyle,key:s++,...Object.fromEntries(Object.entries(S).filter(([D,M])=>M!=null)),toastId:E,updateId:k,data:A,isIn:!1,className:lT(S.className||l.toastClassName),progressClassName:lT(S.progressClassName||l.progressClassName),autoClose:S.isLoading?!1:Qae(S.autoClose,l.autoClose),closeToast(D){c.get(E).removalReason=D,N(E)},deleteToast(){let D=c.get(E);if(D!=null){if(a(HM(D,"removed")),c.delete(E),r--,r<0&&(r=0),i.length>0){C(i.shift());return}f()}}};R.closeButton=l.closeButton,S.closeButton===!1||cT(S.closeButton)?R.closeButton=S.closeButton:S.closeButton===!0&&(R.closeButton=cT(l.closeButton)?l.closeButton:!0);let U={content:w,props:R,staleId:T};l.limit&&l.limit>0&&r>l.limit&&I?i.push(U):Wp(_)?setTimeout(()=>{C(U)},_):C(U)},setProps(w){l=w},setToggle:(w,S)=>{let E=c.get(w);E&&(E.toggle=S)},isToastActive:w=>{var S;return(S=c.get(w))==null?void 0:S.isActive},getSnapshot:()=>o}}var $s=new Map,tp=[],dT=new Set,nse=e=>dT.forEach(t=>t(e)),cH=()=>$s.size>0;function ase(){tp.forEach(e=>uH(e.content,e.options)),tp=[]}var sse=(e,{containerId:t})=>{var a;return(a=$s.get(t||1))==null?void 0:a.toasts.get(e)};function dH(e,t){var a;if(t)return!!((a=$s.get(t))!=null&&a.isToastActive(e));let s=!1;return $s.forEach(r=>{r.isToastActive(e)&&(s=!0)}),s}function rse(e){if(!cH()){tp=tp.filter(t=>e!=null&&t.options.toastId!==e);return}if(e==null||Yae(e))$s.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=$s.get(e.containerId);t?t.removeToast(e.id):$s.forEach(a=>{a.removeToast(e.id)})}}var ise=(e={})=>{$s.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})};function uH(e,t){cT(e)&&(cH()||tp.push({content:e,options:t}),$s.forEach(a=>{a.buildToast(e,t)}))}function ose(e){var t;(t=$s.get(e.containerId||1))==null||t.setToggle(e.id,e.fn)}function mH(e,t){$s.forEach(a=>{(t==null||!(t!=null&&t.containerId)||t?.containerId===a.id)&&a.toggle(e,t?.id)})}function lse(e){let t=e.containerId||1;return{subscribe(a){let s=tse(t,e,nse);$s.set(t,s);let r=s.observe(a);return ase(),()=>{r(),$s.delete(t)}},setProps(a){var s;(s=$s.get(t))==null||s.setProps(a)},getSnapshot(){var a;return(a=$s.get(t))==null?void 0:a.getSnapshot()}}}function cse(e){return dT.add(e),()=>{dT.delete(e)}}function dse(e){return e&&(xu(e.toastId)||Wp(e.toastId))?e.toastId:lH()}function qp(e,t){return uH(e,t),t.toastId}function Cw(e,t){return{...t,type:t&&t.type||e,toastId:dse(t)}}function Sw(e){return(t,a)=>qp(t,Cw(e,a))}function q(e,t){return qp(e,Cw("default",t))}q.loading=(e,t)=>qp(e,Cw("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function use(e,{pending:t,error:a,success:s},r){let i;t&&(i=xu(t)?q.loading(t,r):q.loading(t.render,{...r,...t}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(d,u,f)=>{if(u==null){q.dismiss(i);return}let p={type:d,...o,...r,data:f},x=xu(u)?{render:u}:u;return i?q.update(i,{...p,...x}):q(x.render,{...p,...x}),f},c=_l(e)?e():e;return c.then(d=>l("success",s,d)).catch(d=>l("error",a,d)),c}q.promise=use;q.success=Sw("success");q.info=Sw("info");q.error=Sw("error");q.warning=Sw("warning");q.warn=q.warning;q.dark=(e,t)=>qp(e,Cw("default",{theme:"dark",...t}));function mse(e){rse(e)}q.dismiss=mse;q.clearWaitingQueue=ise;q.isActive=dH;q.update=(e,t={})=>{let a=sse(e,t);if(a){let{props:s,content:r}=a,i={delay:100,...s,...t,toastId:t.toastId||e,updateId:lH()};i.toastId!==e&&(i.staleId=e);let o=i.render||r;delete i.render,qp(o,i)}};q.done=e=>{q.update(e,{progress:1})};q.onChange=cse;q.play=e=>mH(!0,e);q.pause=e=>mH(!1,e);function fse(e){var t;let{subscribe:a,getSnapshot:s,setProps:r}=h.useRef(lse(e)).current;r(e);let i=(t=h.useSyncExternalStore(a,s,s))==null?void 0:t.slice();function o(l){if(!i)return[];let c=new Map;return e.newestOnTop&&i.reverse(),i.forEach(d=>{let{position:u}=d.props;c.has(u)||c.set(u,[]),c.get(u).push(d)}),Array.from(c,d=>l(d[0],d[1]))}return{getToastToRender:o,isToastActive:dH,count:i?.length}}function hse(e){let[t,a]=h.useState(!1),[s,r]=h.useState(!1),i=h.useRef(null),o=h.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:l,pauseOnHover:c,closeToast:d,onClick:u,closeOnClick:f}=e;ose({id:e.toastId,containerId:e.containerId,fn:a}),h.useEffect(()=>{if(e.pauseOnFocusLoss)return p(),()=>{x()}},[e.pauseOnFocusLoss]);function p(){document.hasFocus()||C(),window.addEventListener("focus",b),window.addEventListener("blur",C)}function x(){window.removeEventListener("focus",b),window.removeEventListener("blur",C)}function v(T){if(e.draggable===!0||e.draggable===T.pointerType){w();let _=i.current;o.canCloseOnClick=!0,o.canDrag=!0,_.style.transition="none",e.draggableDirection==="x"?(o.start=T.clientX,o.removalDistance=_.offsetWidth*(e.draggablePercent/100)):(o.start=T.clientY,o.removalDistance=_.offsetHeight*(e.draggablePercent===80?e.draggablePercent*1.5:e.draggablePercent)/100)}}function N(T){let{top:_,bottom:I,left:R,right:U}=i.current.getBoundingClientRect();T.nativeEvent.type!=="touchend"&&e.pauseOnHover&&T.clientX>=R&&T.clientX<=U&&T.clientY>=_&&T.clientY<=I?C():b()}function b(){a(!0)}function C(){a(!1)}function w(){o.didMove=!1,document.addEventListener("pointermove",E),document.addEventListener("pointerup",k)}function S(){document.removeEventListener("pointermove",E),document.removeEventListener("pointerup",k)}function E(T){let _=i.current;if(o.canDrag&&_){o.didMove=!0,t&&C(),e.draggableDirection==="x"?o.delta=T.clientX-o.start:o.delta=T.clientY-o.start,o.start!==T.clientX&&(o.canCloseOnClick=!1);let I=e.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`;_.style.transform=`translate3d(${I},0)`,_.style.opacity=`${1-Math.abs(o.delta/o.removalDistance)}`}}function k(){S();let T=i.current;if(o.canDrag&&o.didMove&&T){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance){r(!0),e.closeToast(!0),e.collapseAll();return}T.style.transition="transform 0.2s, opacity 0.2s",T.style.removeProperty("transform"),T.style.removeProperty("opacity")}}let A={onPointerDown:v,onPointerUp:N};return l&&c&&(A.onMouseEnter=C,e.stacked||(A.onMouseLeave=b)),f&&(A.onClick=T=>{u&&u(T),o.canCloseOnClick&&d(!0)}),{playToast:b,pauseToast:C,isRunning:t,preventExitTransition:s,toastRef:i,eventHandlers:A}}var gse=typeof window<"u"?h.useLayoutEffect:h.useEffect,_w=({theme:e,type:t,isLoading:a,...s})=>pt.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${t})`,...s});function pse(e){return pt.createElement(_w,{...e},pt.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function xse(e){return pt.createElement(_w,{...e},pt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function yse(e){return pt.createElement(_w,{...e},pt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function bse(e){return pt.createElement(_w,{...e},pt.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function vse(){return pt.createElement("div",{className:"Toastify__spinner"})}var uT={info:xse,warning:pse,success:yse,error:bse,spinner:vse},wse=e=>e in uT;function Nse({theme:e,type:t,isLoading:a,icon:s}){let r=null,i={theme:e,type:t};return s===!1||(_l(s)?r=s({...i,isLoading:a}):h.isValidElement(s)?r=h.cloneElement(s,i):a?r=uT.spinner():wse(t)&&(r=uT[t](i))),r}var jse=e=>{let{isRunning:t,preventExitTransition:a,toastRef:s,eventHandlers:r,playToast:i}=hse(e),{closeButton:o,children:l,autoClose:c,onClick:d,type:u,hideProgressBar:f,closeToast:p,transition:x,position:v,className:N,style:b,progressClassName:C,updateId:w,role:S,progress:E,rtl:k,toastId:A,deleteToast:T,isIn:_,isLoading:I,closeOnClick:R,theme:U,ariaLabel:D}=e,M=kt("Toastify__toast",`Toastify__toast-theme--${U}`,`Toastify__toast--${u}`,{"Toastify__toast--rtl":k},{"Toastify__toast--close-on-click":R}),W=_l(N)?N({rtl:k,position:v,type:u,defaultClassName:M}):kt(M,N),X=Nse(e),z=!!E||!c,Q={closeToast:p,type:u,theme:U},de=null;return o===!1||(_l(o)?de=o(Q):h.isValidElement(o)?de=h.cloneElement(o,Q):de=Zae(Q)),pt.createElement(x,{isIn:_,done:T,position:v,preventExitTransition:a,nodeRef:s,playToast:i},pt.createElement("div",{id:A,tabIndex:0,onClick:d,"data-in":_,className:W,...r,style:b,ref:s,..._&&{role:S,"aria-label":D}},X!=null&&pt.createElement("div",{className:kt("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!I})},X),oH(l,e,!t),de,!e.customProgressBar&&pt.createElement(Jae,{...w&&!z?{key:`p-${w}`}:{},rtl:k,theme:U,delay:c,isRunning:t,isIn:_,closeToast:p,hide:f,type:u,className:C,controlledProgress:z,progress:E||0})))},Cse=(e,t=!1)=>({enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}),Sse=Xae(Cse("bounce",!0)),_se={position:"top-right",transition:Sse,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&e.code==="KeyT"};function Ase(e){let t={..._se,...e},a=e.stacked,[s,r]=h.useState(!0),i=h.useRef(null),{getToastToRender:o,isToastActive:l,count:c}=fse(t),{className:d,style:u,rtl:f,containerId:p,hotKeys:x}=t;function v(b){let C=kt("Toastify__toast-container",`Toastify__toast-container--${b}`,{"Toastify__toast-container--rtl":f});return _l(d)?d({position:b,rtl:f,defaultClassName:C}):kt(C,lT(d))}function N(){a&&(r(!0),q.play())}return gse(()=>{var b;if(a){let C=i.current.querySelectorAll('[data-in="true"]'),w=12,S=(b=t.position)==null?void 0:b.includes("top"),E=0,k=0;Array.from(C).reverse().forEach((A,T)=>{let _=A;_.classList.add("Toastify__toast--stacked"),T>0&&(_.dataset.collapsed=`${s}`),_.dataset.pos||(_.dataset.pos=S?"top":"bot");let I=E*(s?.2:1)+(s?0:w*T);_.style.setProperty("--y",`${S?I:I*-1}px`),_.style.setProperty("--g",`${w}`),_.style.setProperty("--s",`${1-(s?k:0)}`),E+=_.offsetHeight,k+=.025})}},[s,c,a]),h.useEffect(()=>{function b(C){var w;let S=i.current;x(C)&&((w=S.querySelector('[tabIndex="0"]'))==null||w.focus(),r(!1),q.pause()),C.key==="Escape"&&(document.activeElement===S||S!=null&&S.contains(document.activeElement))&&(r(!0),q.play())}return document.addEventListener("keydown",b),()=>{document.removeEventListener("keydown",b)}},[x]),pt.createElement("section",{ref:i,className:"Toastify",id:p,onMouseEnter:()=>{a&&(r(!1),q.pause())},onMouseLeave:N,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},o((b,C)=>{let w=C.length?{...u}:{...u,pointerEvents:"none"};return pt.createElement("div",{tabIndex:-1,className:v(b),"data-stacked":a,style:w,key:`c-${b}`},C.map(({content:S,props:E})=>pt.createElement(jse,{...E,stacked:a,collapseAll:N,isIn:l(E.toastId,E.containerId),key:`t-${E.key}`},S)))}))}function fH(e,t){return function(){return e.apply(t,arguments)}}const{toString:Tse}=Object.prototype,{getPrototypeOf:Mk}=Object,{iterator:Aw,toStringTag:hH}=Symbol,Tw=(e=>t=>{const a=Tse.call(t);return e[a]||(e[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),Gi=e=>(e=e.toLowerCase(),t=>Tw(t)===e),Ew=e=>t=>typeof t===e,{isArray:$f}=Array,ff=Ew("undefined");function Vp(e){return e!==null&&!ff(e)&&e.constructor!==null&&!ff(e.constructor)&&ar(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const gH=Gi("ArrayBuffer");function Ese(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&gH(e.buffer),t}const kse=Ew("string"),ar=Ew("function"),pH=Ew("number"),Yp=e=>e!==null&&typeof e=="object",Lse=e=>e===!0||e===!1,Eb=e=>{if(Tw(e)!=="object")return!1;const t=Mk(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(hH in e)&&!(Aw in e)},Pse=e=>{if(!Yp(e)||Vp(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Dse=Gi("Date"),Ose=Gi("File"),Mse=Gi("Blob"),Ise=Gi("FileList"),$se=e=>Yp(e)&&ar(e.pipe),Rse=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||ar(e.append)&&((t=Tw(e))==="formdata"||t==="object"&&ar(e.toString)&&e.toString()==="[object FormData]"))},zse=Gi("URLSearchParams"),[Use,Fse,Bse,Hse]=["ReadableStream","Request","Response","Headers"].map(Gi),Gse=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Qp(e,t,{allOwnKeys:a=!1}={}){if(e===null||typeof e>"u")return;let s,r;if(typeof e!="object"&&(e=[e]),$f(e))for(s=0,r=e.length;s<r;s++)t.call(null,e[s],s,e);else{if(Vp(e))return;const i=a?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let l;for(s=0;s<o;s++)l=i[s],t.call(null,e[l],l,e)}}function xH(e,t){if(Vp(e))return null;t=t.toLowerCase();const a=Object.keys(e);let s=a.length,r;for(;s-- >0;)if(r=a[s],t===r.toLowerCase())return r;return null}const Zd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,yH=e=>!ff(e)&&e!==Zd;function mT(){const{caseless:e,skipUndefined:t}=yH(this)&&this||{},a={},s=(r,i)=>{const o=e&&xH(a,i)||i;Eb(a[o])&&Eb(r)?a[o]=mT(a[o],r):Eb(r)?a[o]=mT({},r):$f(r)?a[o]=r.slice():(!t||!ff(r))&&(a[o]=r)};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Qp(arguments[r],s);return a}const Wse=(e,t,a,{allOwnKeys:s}={})=>(Qp(t,(r,i)=>{a&&ar(r)?e[i]=fH(r,a):e[i]=r},{allOwnKeys:s}),e),qse=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Vse=(e,t,a,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),a&&Object.assign(e.prototype,a)},Yse=(e,t,a,s)=>{let r,i,o;const l={};if(t=t||{},e==null)return t;do{for(r=Object.getOwnPropertyNames(e),i=r.length;i-- >0;)o=r[i],(!s||s(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=a!==!1&&Mk(e)}while(e&&(!a||a(e,t))&&e!==Object.prototype);return t},Qse=(e,t,a)=>{e=String(e),(a===void 0||a>e.length)&&(a=e.length),a-=t.length;const s=e.indexOf(t,a);return s!==-1&&s===a},Kse=e=>{if(!e)return null;if($f(e))return e;let t=e.length;if(!pH(t))return null;const a=new Array(t);for(;t-- >0;)a[t]=e[t];return a},Xse=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Mk(Uint8Array)),Zse=(e,t)=>{const s=(e&&e[Aw]).call(e);let r;for(;(r=s.next())&&!r.done;){const i=r.value;t.call(e,i[0],i[1])}},Jse=(e,t)=>{let a;const s=[];for(;(a=e.exec(t))!==null;)s.push(a);return s},ere=Gi("HTMLFormElement"),tre=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,s,r){return s.toUpperCase()+r}),GM=(({hasOwnProperty:e})=>(t,a)=>e.call(t,a))(Object.prototype),nre=Gi("RegExp"),bH=(e,t)=>{const a=Object.getOwnPropertyDescriptors(e),s={};Qp(a,(r,i)=>{let o;(o=t(r,i,e))!==!1&&(s[i]=o||r)}),Object.defineProperties(e,s)},are=e=>{bH(e,(t,a)=>{if(ar(e)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const s=e[a];if(ar(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},sre=(e,t)=>{const a={},s=r=>{r.forEach(i=>{a[i]=!0})};return $f(e)?s(e):s(String(e).split(t)),a},rre=()=>{},ire=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function ore(e){return!!(e&&ar(e.append)&&e[hH]==="FormData"&&e[Aw])}const lre=e=>{const t=new Array(10),a=(s,r)=>{if(Yp(s)){if(t.indexOf(s)>=0)return;if(Vp(s))return s;if(!("toJSON"in s)){t[r]=s;const i=$f(s)?[]:{};return Qp(s,(o,l)=>{const c=a(o,r+1);!ff(c)&&(i[l]=c)}),t[r]=void 0,i}}return s};return a(e,0)},cre=Gi("AsyncFunction"),dre=e=>e&&(Yp(e)||ar(e))&&ar(e.then)&&ar(e.catch),vH=((e,t)=>e?setImmediate:t?((a,s)=>(Zd.addEventListener("message",({source:r,data:i})=>{r===Zd&&i===a&&s.length&&s.shift()()},!1),r=>{s.push(r),Zd.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",ar(Zd.postMessage)),ure=typeof queueMicrotask<"u"?queueMicrotask.bind(Zd):typeof process<"u"&&process.nextTick||vH,mre=e=>e!=null&&ar(e[Aw]),ot={isArray:$f,isArrayBuffer:gH,isBuffer:Vp,isFormData:Rse,isArrayBufferView:Ese,isString:kse,isNumber:pH,isBoolean:Lse,isObject:Yp,isPlainObject:Eb,isEmptyObject:Pse,isReadableStream:Use,isRequest:Fse,isResponse:Bse,isHeaders:Hse,isUndefined:ff,isDate:Dse,isFile:Ose,isBlob:Mse,isRegExp:nre,isFunction:ar,isStream:$se,isURLSearchParams:zse,isTypedArray:Xse,isFileList:Ise,forEach:Qp,merge:mT,extend:Wse,trim:Gse,stripBOM:qse,inherits:Vse,toFlatObject:Yse,kindOf:Tw,kindOfTest:Gi,endsWith:Qse,toArray:Kse,forEachEntry:Zse,matchAll:Jse,isHTMLForm:ere,hasOwnProperty:GM,hasOwnProp:GM,reduceDescriptors:bH,freezeMethods:are,toObjectSet:sre,toCamelCase:tre,noop:rre,toFiniteNumber:ire,findKey:xH,global:Zd,isContextDefined:yH,isSpecCompliantForm:ore,toJSONObject:lre,isAsyncFn:cre,isThenable:dre,setImmediate:vH,asap:ure,isIterable:mre};function Jt(e,t,a,s,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),a&&(this.config=a),s&&(this.request=s),r&&(this.response=r,this.status=r.status?r.status:null)}ot.inherits(Jt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ot.toJSONObject(this.config),code:this.code,status:this.status}}});const wH=Jt.prototype,NH={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{NH[e]={value:e}});Object.defineProperties(Jt,NH);Object.defineProperty(wH,"isAxiosError",{value:!0});Jt.from=(e,t,a,s,r,i)=>{const o=Object.create(wH);ot.toFlatObject(e,o,function(u){return u!==Error.prototype},d=>d!=="isAxiosError");const l=e&&e.message?e.message:"Error",c=t==null&&e?e.code:t;return Jt.call(o,l,c,a,s,r),e&&o.cause==null&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",i&&Object.assign(o,i),o};const fre=null;function fT(e){return ot.isPlainObject(e)||ot.isArray(e)}function jH(e){return ot.endsWith(e,"[]")?e.slice(0,-2):e}function WM(e,t,a){return e?e.concat(t).map(function(r,i){return r=jH(r),!a&&i?"["+r+"]":r}).join(a?".":""):t}function hre(e){return ot.isArray(e)&&!e.some(fT)}const gre=ot.toFlatObject(ot,{},null,function(t){return/^is[A-Z]/.test(t)});function kw(e,t,a){if(!ot.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,a=ot.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(N,b){return!ot.isUndefined(b[N])});const s=a.metaTokens,r=a.visitor||u,i=a.dots,o=a.indexes,c=(a.Blob||typeof Blob<"u"&&Blob)&&ot.isSpecCompliantForm(t);if(!ot.isFunction(r))throw new TypeError("visitor must be a function");function d(v){if(v===null)return"";if(ot.isDate(v))return v.toISOString();if(ot.isBoolean(v))return v.toString();if(!c&&ot.isBlob(v))throw new Jt("Blob is not supported. Use a Buffer instead.");return ot.isArrayBuffer(v)||ot.isTypedArray(v)?c&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function u(v,N,b){let C=v;if(v&&!b&&typeof v=="object"){if(ot.endsWith(N,"{}"))N=s?N:N.slice(0,-2),v=JSON.stringify(v);else if(ot.isArray(v)&&hre(v)||(ot.isFileList(v)||ot.endsWith(N,"[]"))&&(C=ot.toArray(v)))return N=jH(N),C.forEach(function(S,E){!(ot.isUndefined(S)||S===null)&&t.append(o===!0?WM([N],E,i):o===null?N:N+"[]",d(S))}),!1}return fT(v)?!0:(t.append(WM(b,N,i),d(v)),!1)}const f=[],p=Object.assign(gre,{defaultVisitor:u,convertValue:d,isVisitable:fT});function x(v,N){if(!ot.isUndefined(v)){if(f.indexOf(v)!==-1)throw Error("Circular reference detected in "+N.join("."));f.push(v),ot.forEach(v,function(C,w){(!(ot.isUndefined(C)||C===null)&&r.call(t,C,ot.isString(w)?w.trim():w,N,p))===!0&&x(C,N?N.concat(w):[w])}),f.pop()}}if(!ot.isObject(e))throw new TypeError("data must be an object");return x(e),t}function qM(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function Ik(e,t){this._pairs=[],e&&kw(e,this,t)}const CH=Ik.prototype;CH.append=function(t,a){this._pairs.push([t,a])};CH.toString=function(t){const a=t?function(s){return t.call(this,s,qM)}:qM;return this._pairs.map(function(r){return a(r[0])+"="+a(r[1])},"").join("&")};function pre(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function SH(e,t,a){if(!t)return e;const s=a&&a.encode||pre;ot.isFunction(a)&&(a={serialize:a});const r=a&&a.serialize;let i;if(r?i=r(t,a):i=ot.isURLSearchParams(t)?t.toString():new Ik(t,a).toString(s),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class VM{constructor(){this.handlers=[]}use(t,a,s){return this.handlers.push({fulfilled:t,rejected:a,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ot.forEach(this.handlers,function(s){s!==null&&t(s)})}}const _H={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},xre=typeof URLSearchParams<"u"?URLSearchParams:Ik,yre=typeof FormData<"u"?FormData:null,bre=typeof Blob<"u"?Blob:null,vre={isBrowser:!0,classes:{URLSearchParams:xre,FormData:yre,Blob:bre},protocols:["http","https","file","blob","url","data"]},$k=typeof window<"u"&&typeof document<"u",hT=typeof navigator=="object"&&navigator||void 0,wre=$k&&(!hT||["ReactNative","NativeScript","NS"].indexOf(hT.product)<0),Nre=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",jre=$k&&window.location.href||"http://localhost",Cre=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:$k,hasStandardBrowserEnv:wre,hasStandardBrowserWebWorkerEnv:Nre,navigator:hT,origin:jre},Symbol.toStringTag,{value:"Module"})),As={...Cre,...vre};function Sre(e,t){return kw(e,new As.classes.URLSearchParams,{visitor:function(a,s,r,i){return As.isNode&&ot.isBuffer(a)?(this.append(s,a.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function _re(e){return ot.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Are(e){const t={},a=Object.keys(e);let s;const r=a.length;let i;for(s=0;s<r;s++)i=a[s],t[i]=e[i];return t}function AH(e){function t(a,s,r,i){let o=a[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=a.length;return o=!o&&ot.isArray(r)?r.length:o,c?(ot.hasOwnProp(r,o)?r[o]=[r[o],s]:r[o]=s,!l):((!r[o]||!ot.isObject(r[o]))&&(r[o]=[]),t(a,s,r[o],i)&&ot.isArray(r[o])&&(r[o]=Are(r[o])),!l)}if(ot.isFormData(e)&&ot.isFunction(e.entries)){const a={};return ot.forEachEntry(e,(s,r)=>{t(_re(s),r,a,0)}),a}return null}function Tre(e,t,a){if(ot.isString(e))try{return(t||JSON.parse)(e),ot.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(a||JSON.stringify)(e)}const Kp={transitional:_H,adapter:["xhr","http","fetch"],transformRequest:[function(t,a){const s=a.getContentType()||"",r=s.indexOf("application/json")>-1,i=ot.isObject(t);if(i&&ot.isHTMLForm(t)&&(t=new FormData(t)),ot.isFormData(t))return r?JSON.stringify(AH(t)):t;if(ot.isArrayBuffer(t)||ot.isBuffer(t)||ot.isStream(t)||ot.isFile(t)||ot.isBlob(t)||ot.isReadableStream(t))return t;if(ot.isArrayBufferView(t))return t.buffer;if(ot.isURLSearchParams(t))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return Sre(t,this.formSerializer).toString();if((l=ot.isFileList(t))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return kw(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||r?(a.setContentType("application/json",!1),Tre(t)):t}],transformResponse:[function(t){const a=this.transitional||Kp.transitional,s=a&&a.forcedJSONParsing,r=this.responseType==="json";if(ot.isResponse(t)||ot.isReadableStream(t))return t;if(t&&ot.isString(t)&&(s&&!this.responseType||r)){const o=!(a&&a.silentJSONParsing)&&r;try{return JSON.parse(t,this.parseReviver)}catch(l){if(o)throw l.name==="SyntaxError"?Jt.from(l,Jt.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:As.classes.FormData,Blob:As.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ot.forEach(["delete","get","head","post","put","patch"],e=>{Kp.headers[e]={}});const Ere=ot.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),kre=e=>{const t={};let a,s,r;return e&&e.split(`
`).forEach(function(o){r=o.indexOf(":"),a=o.substring(0,r).trim().toLowerCase(),s=o.substring(r+1).trim(),!(!a||t[a]&&Ere[a])&&(a==="set-cookie"?t[a]?t[a].push(s):t[a]=[s]:t[a]=t[a]?t[a]+", "+s:s)}),t},YM=Symbol("internals");function Xh(e){return e&&String(e).trim().toLowerCase()}function kb(e){return e===!1||e==null?e:ot.isArray(e)?e.map(kb):String(e)}function Lre(e){const t=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=a.exec(e);)t[s[1]]=s[2];return t}const Pre=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function hS(e,t,a,s,r){if(ot.isFunction(s))return s.call(this,t,a);if(r&&(t=a),!!ot.isString(t)){if(ot.isString(s))return t.indexOf(s)!==-1;if(ot.isRegExp(s))return s.test(t)}}function Dre(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,a,s)=>a.toUpperCase()+s)}function Ore(e,t){const a=ot.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+a,{value:function(r,i,o){return this[s].call(this,t,r,i,o)},configurable:!0})})}let sr=class{constructor(t){t&&this.set(t)}set(t,a,s){const r=this;function i(l,c,d){const u=Xh(c);if(!u)throw new Error("header name must be a non-empty string");const f=ot.findKey(r,u);(!f||r[f]===void 0||d===!0||d===void 0&&r[f]!==!1)&&(r[f||c]=kb(l))}const o=(l,c)=>ot.forEach(l,(d,u)=>i(d,u,c));if(ot.isPlainObject(t)||t instanceof this.constructor)o(t,a);else if(ot.isString(t)&&(t=t.trim())&&!Pre(t))o(kre(t),a);else if(ot.isObject(t)&&ot.isIterable(t)){let l={},c,d;for(const u of t){if(!ot.isArray(u))throw TypeError("Object iterator must return a key-value pair");l[d=u[0]]=(c=l[d])?ot.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}o(l,a)}else t!=null&&i(a,t,s);return this}get(t,a){if(t=Xh(t),t){const s=ot.findKey(this,t);if(s){const r=this[s];if(!a)return r;if(a===!0)return Lre(r);if(ot.isFunction(a))return a.call(this,r,s);if(ot.isRegExp(a))return a.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,a){if(t=Xh(t),t){const s=ot.findKey(this,t);return!!(s&&this[s]!==void 0&&(!a||hS(this,this[s],s,a)))}return!1}delete(t,a){const s=this;let r=!1;function i(o){if(o=Xh(o),o){const l=ot.findKey(s,o);l&&(!a||hS(s,s[l],l,a))&&(delete s[l],r=!0)}}return ot.isArray(t)?t.forEach(i):i(t),r}clear(t){const a=Object.keys(this);let s=a.length,r=!1;for(;s--;){const i=a[s];(!t||hS(this,this[i],i,t,!0))&&(delete this[i],r=!0)}return r}normalize(t){const a=this,s={};return ot.forEach(this,(r,i)=>{const o=ot.findKey(s,i);if(o){a[o]=kb(r),delete a[i];return}const l=t?Dre(i):String(i).trim();l!==i&&delete a[i],a[l]=kb(r),s[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const a=Object.create(null);return ot.forEach(this,(s,r)=>{s!=null&&s!==!1&&(a[r]=t&&ot.isArray(s)?s.join(", "):s)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,a])=>t+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...a){const s=new this(t);return a.forEach(r=>s.set(r)),s}static accessor(t){const s=(this[YM]=this[YM]={accessors:{}}).accessors,r=this.prototype;function i(o){const l=Xh(o);s[l]||(Ore(r,o),s[l]=!0)}return ot.isArray(t)?t.forEach(i):i(t),this}};sr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ot.reduceDescriptors(sr.prototype,({value:e},t)=>{let a=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[a]=s}}});ot.freezeMethods(sr);function gS(e,t){const a=this||Kp,s=t||a,r=sr.from(s.headers);let i=s.data;return ot.forEach(e,function(l){i=l.call(a,i,r.normalize(),t?t.status:void 0)}),r.normalize(),i}function TH(e){return!!(e&&e.__CANCEL__)}function Rf(e,t,a){Jt.call(this,e??"canceled",Jt.ERR_CANCELED,t,a),this.name="CanceledError"}ot.inherits(Rf,Jt,{__CANCEL__:!0});function EH(e,t,a){const s=a.config.validateStatus;!a.status||!s||s(a.status)?e(a):t(new Jt("Request failed with status code "+a.status,[Jt.ERR_BAD_REQUEST,Jt.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function Mre(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Ire(e,t){e=e||10;const a=new Array(e),s=new Array(e);let r=0,i=0,o;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=s[i];o||(o=d),a[r]=c,s[r]=d;let f=i,p=0;for(;f!==r;)p+=a[f++],f=f%e;if(r=(r+1)%e,r===i&&(i=(i+1)%e),d-o<t)return;const x=u&&d-u;return x?Math.round(p*1e3/x):void 0}}function $re(e,t){let a=0,s=1e3/t,r,i;const o=(d,u=Date.now())=>{a=u,r=null,i&&(clearTimeout(i),i=null),e(...d)};return[(...d)=>{const u=Date.now(),f=u-a;f>=s?o(d,u):(r=d,i||(i=setTimeout(()=>{i=null,o(r)},s-f)))},()=>r&&o(r)]}const Qb=(e,t,a=3)=>{let s=0;const r=Ire(50,250);return $re(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-s,d=r(c),u=o<=l;s=o;const f={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&u?(l-o)/d:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(f)},a)},QM=(e,t)=>{const a=e!=null;return[s=>t[0]({lengthComputable:a,total:e,loaded:s}),t[1]]},KM=e=>(...t)=>ot.asap(()=>e(...t)),Rre=As.hasStandardBrowserEnv?((e,t)=>a=>(a=new URL(a,As.origin),e.protocol===a.protocol&&e.host===a.host&&(t||e.port===a.port)))(new URL(As.origin),As.navigator&&/(msie|trident)/i.test(As.navigator.userAgent)):()=>!0,zre=As.hasStandardBrowserEnv?{write(e,t,a,s,r,i){const o=[e+"="+encodeURIComponent(t)];ot.isNumber(a)&&o.push("expires="+new Date(a).toGMTString()),ot.isString(s)&&o.push("path="+s),ot.isString(r)&&o.push("domain="+r),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Ure(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Fre(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function kH(e,t,a){let s=!Ure(t);return e&&(s||a==!1)?Fre(e,t):t}const XM=e=>e instanceof sr?{...e}:e;function yu(e,t){t=t||{};const a={};function s(d,u,f,p){return ot.isPlainObject(d)&&ot.isPlainObject(u)?ot.merge.call({caseless:p},d,u):ot.isPlainObject(u)?ot.merge({},u):ot.isArray(u)?u.slice():u}function r(d,u,f,p){if(ot.isUndefined(u)){if(!ot.isUndefined(d))return s(void 0,d,f,p)}else return s(d,u,f,p)}function i(d,u){if(!ot.isUndefined(u))return s(void 0,u)}function o(d,u){if(ot.isUndefined(u)){if(!ot.isUndefined(d))return s(void 0,d)}else return s(void 0,u)}function l(d,u,f){if(f in t)return s(d,u);if(f in e)return s(void 0,d)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(d,u,f)=>r(XM(d),XM(u),f,!0)};return ot.forEach(Object.keys({...e,...t}),function(u){const f=c[u]||r,p=f(e[u],t[u],u);ot.isUndefined(p)&&f!==l||(a[u]=p)}),a}const LH=e=>{const t=yu({},e);let{data:a,withXSRFToken:s,xsrfHeaderName:r,xsrfCookieName:i,headers:o,auth:l}=t;if(t.headers=o=sr.from(o),t.url=SH(kH(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),ot.isFormData(a)){if(As.hasStandardBrowserEnv||As.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(ot.isFunction(a.getHeaders)){const c=a.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([u,f])=>{d.includes(u.toLowerCase())&&o.set(u,f)})}}if(As.hasStandardBrowserEnv&&(s&&ot.isFunction(s)&&(s=s(t)),s||s!==!1&&Rre(t.url))){const c=r&&i&&zre.read(i);c&&o.set(r,c)}return t},Bre=typeof XMLHttpRequest<"u",Hre=Bre&&function(e){return new Promise(function(a,s){const r=LH(e);let i=r.data;const o=sr.from(r.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=r,u,f,p,x,v;function N(){x&&x(),v&&v(),r.cancelToken&&r.cancelToken.unsubscribe(u),r.signal&&r.signal.removeEventListener("abort",u)}let b=new XMLHttpRequest;b.open(r.method.toUpperCase(),r.url,!0),b.timeout=r.timeout;function C(){if(!b)return;const S=sr.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),k={data:!l||l==="text"||l==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:S,config:e,request:b};EH(function(T){a(T),N()},function(T){s(T),N()},k),b=null}"onloadend"in b?b.onloadend=C:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(C)},b.onabort=function(){b&&(s(new Jt("Request aborted",Jt.ECONNABORTED,e,b)),b=null)},b.onerror=function(E){const k=E&&E.message?E.message:"Network Error",A=new Jt(k,Jt.ERR_NETWORK,e,b);A.event=E||null,s(A),b=null},b.ontimeout=function(){let E=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const k=r.transitional||_H;r.timeoutErrorMessage&&(E=r.timeoutErrorMessage),s(new Jt(E,k.clarifyTimeoutError?Jt.ETIMEDOUT:Jt.ECONNABORTED,e,b)),b=null},i===void 0&&o.setContentType(null),"setRequestHeader"in b&&ot.forEach(o.toJSON(),function(E,k){b.setRequestHeader(k,E)}),ot.isUndefined(r.withCredentials)||(b.withCredentials=!!r.withCredentials),l&&l!=="json"&&(b.responseType=r.responseType),d&&([p,v]=Qb(d,!0),b.addEventListener("progress",p)),c&&b.upload&&([f,x]=Qb(c),b.upload.addEventListener("progress",f),b.upload.addEventListener("loadend",x)),(r.cancelToken||r.signal)&&(u=S=>{b&&(s(!S||S.type?new Rf(null,e,b):S),b.abort(),b=null)},r.cancelToken&&r.cancelToken.subscribe(u),r.signal&&(r.signal.aborted?u():r.signal.addEventListener("abort",u)));const w=Mre(r.url);if(w&&As.protocols.indexOf(w)===-1){s(new Jt("Unsupported protocol "+w+":",Jt.ERR_BAD_REQUEST,e));return}b.send(i||null)})},Gre=(e,t)=>{const{length:a}=e=e?e.filter(Boolean):[];if(t||a){let s=new AbortController,r;const i=function(d){if(!r){r=!0,l();const u=d instanceof Error?d:this.reason;s.abort(u instanceof Jt?u:new Rf(u instanceof Error?u.message:u))}};let o=t&&setTimeout(()=>{o=null,i(new Jt(`timeout ${t} of ms exceeded`,Jt.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),e=null)};e.forEach(d=>d.addEventListener("abort",i));const{signal:c}=s;return c.unsubscribe=()=>ot.asap(l),c}},Wre=function*(e,t){let a=e.byteLength;if(a<t){yield e;return}let s=0,r;for(;s<a;)r=s+t,yield e.slice(s,r),s=r},qre=async function*(e,t){for await(const a of Vre(e))yield*Wre(a,t)},Vre=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:a,value:s}=await t.read();if(a)break;yield s}}finally{await t.cancel()}},ZM=(e,t,a,s)=>{const r=qre(e,t);let i=0,o,l=c=>{o||(o=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await r.next();if(d){l(),c.close();return}let f=u.byteLength;if(a){let p=i+=f;a(p)}c.enqueue(new Uint8Array(u))}catch(d){throw l(d),d}},cancel(c){return l(c),r.return()}},{highWaterMark:2})},JM=64*1024,{isFunction:yy}=ot,Yre=(({Request:e,Response:t})=>({Request:e,Response:t}))(ot.global),{ReadableStream:eI,TextEncoder:tI}=ot.global,nI=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Qre=e=>{e=ot.merge.call({skipUndefined:!0},Yre,e);const{fetch:t,Request:a,Response:s}=e,r=t?yy(t):typeof fetch=="function",i=yy(a),o=yy(s);if(!r)return!1;const l=r&&yy(eI),c=r&&(typeof tI=="function"?(v=>N=>v.encode(N))(new tI):async v=>new Uint8Array(await new a(v).arrayBuffer())),d=i&&l&&nI(()=>{let v=!1;const N=new a(As.origin,{body:new eI,method:"POST",get duplex(){return v=!0,"half"}}).headers.has("Content-Type");return v&&!N}),u=o&&l&&nI(()=>ot.isReadableStream(new s("").body)),f={stream:u&&(v=>v.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(v=>{!f[v]&&(f[v]=(N,b)=>{let C=N&&N[v];if(C)return C.call(N);throw new Jt(`Response type '${v}' is not supported`,Jt.ERR_NOT_SUPPORT,b)})});const p=async v=>{if(v==null)return 0;if(ot.isBlob(v))return v.size;if(ot.isSpecCompliantForm(v))return(await new a(As.origin,{method:"POST",body:v}).arrayBuffer()).byteLength;if(ot.isArrayBufferView(v)||ot.isArrayBuffer(v))return v.byteLength;if(ot.isURLSearchParams(v)&&(v=v+""),ot.isString(v))return(await c(v)).byteLength},x=async(v,N)=>{const b=ot.toFiniteNumber(v.getContentLength());return b??p(N)};return async v=>{let{url:N,method:b,data:C,signal:w,cancelToken:S,timeout:E,onDownloadProgress:k,onUploadProgress:A,responseType:T,headers:_,withCredentials:I="same-origin",fetchOptions:R}=LH(v),U=t||fetch;T=T?(T+"").toLowerCase():"text";let D=Gre([w,S&&S.toAbortSignal()],E),M=null;const W=D&&D.unsubscribe&&(()=>{D.unsubscribe()});let X;try{if(A&&d&&b!=="get"&&b!=="head"&&(X=await x(_,C))!==0){let J=new a(N,{method:"POST",body:C,duplex:"half"}),F;if(ot.isFormData(C)&&(F=J.headers.get("content-type"))&&_.setContentType(F),J.body){const[Ne,re]=QM(X,Qb(KM(A)));C=ZM(J.body,JM,Ne,re)}}ot.isString(I)||(I=I?"include":"omit");const z=i&&"credentials"in a.prototype,Q={...R,signal:D,method:b.toUpperCase(),headers:_.normalize().toJSON(),body:C,duplex:"half",credentials:z?I:void 0};M=i&&new a(N,Q);let de=await(i?U(M,R):U(N,Q));const Y=u&&(T==="stream"||T==="response");if(u&&(k||Y&&W)){const J={};["status","statusText","headers"].forEach(he=>{J[he]=de[he]});const F=ot.toFiniteNumber(de.headers.get("content-length")),[Ne,re]=k&&QM(F,Qb(KM(k),!0))||[];de=new s(ZM(de.body,JM,Ne,()=>{re&&re(),W&&W()}),J)}T=T||"text";let se=await f[ot.findKey(f,T)||"text"](de,v);return!Y&&W&&W(),await new Promise((J,F)=>{EH(J,F,{data:se,headers:sr.from(de.headers),status:de.status,statusText:de.statusText,config:v,request:M})})}catch(z){throw W&&W(),z&&z.name==="TypeError"&&/Load failed|fetch/i.test(z.message)?Object.assign(new Jt("Network Error",Jt.ERR_NETWORK,v,M),{cause:z.cause||z}):Jt.from(z,z&&z.code,v,M)}}},Kre=new Map,PH=e=>{let t=e?e.env:{};const{fetch:a,Request:s,Response:r}=t,i=[s,r,a];let o=i.length,l=o,c,d,u=Kre;for(;l--;)c=i[l],d=u.get(c),d===void 0&&u.set(c,d=l?new Map:Qre(t)),u=d;return d};PH();const gT={http:fre,xhr:Hre,fetch:{get:PH}};ot.forEach(gT,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const aI=e=>`- ${e}`,Xre=e=>ot.isFunction(e)||e===null||e===!1,DH={getAdapter:(e,t)=>{e=ot.isArray(e)?e:[e];const{length:a}=e;let s,r;const i={};for(let o=0;o<a;o++){s=e[o];let l;if(r=s,!Xre(s)&&(r=gT[(l=String(s)).toLowerCase()],r===void 0))throw new Jt(`Unknown adapter '${l}'`);if(r&&(ot.isFunction(r)||(r=r.get(t))))break;i[l||"#"+o]=r}if(!r){const o=Object.entries(i).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let l=a?o.length>1?`since :
`+o.map(aI).join(`
`):" "+aI(o[0]):"as no adapter specified";throw new Jt("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return r},adapters:gT};function pS(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Rf(null,e)}function sI(e){return pS(e),e.headers=sr.from(e.headers),e.data=gS.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),DH.getAdapter(e.adapter||Kp.adapter,e)(e).then(function(s){return pS(e),s.data=gS.call(e,e.transformResponse,s),s.headers=sr.from(s.headers),s},function(s){return TH(s)||(pS(e),s&&s.response&&(s.response.data=gS.call(e,e.transformResponse,s.response),s.response.headers=sr.from(s.response.headers))),Promise.reject(s)})}const OH="1.12.2",Lw={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Lw[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const rI={};Lw.transitional=function(t,a,s){function r(i,o){return"[Axios v"+OH+"] Transitional option '"+i+"'"+o+(s?". "+s:"")}return(i,o,l)=>{if(t===!1)throw new Jt(r(o," has been removed"+(a?" in "+a:"")),Jt.ERR_DEPRECATED);return a&&!rI[o]&&(rI[o]=!0,console.warn(r(o," has been deprecated since v"+a+" and will be removed in the near future"))),t?t(i,o,l):!0}};Lw.spelling=function(t){return(a,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function Zre(e,t,a){if(typeof e!="object")throw new Jt("options must be an object",Jt.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let r=s.length;for(;r-- >0;){const i=s[r],o=t[i];if(o){const l=e[i],c=l===void 0||o(l,i,e);if(c!==!0)throw new Jt("option "+i+" must be "+c,Jt.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new Jt("Unknown option "+i,Jt.ERR_BAD_OPTION)}}const Lb={assertOptions:Zre,validators:Lw},Ki=Lb.validators;let ou=class{constructor(t){this.defaults=t||{},this.interceptors={request:new VM,response:new VM}}async request(t,a){try{return await this._request(t,a)}catch(s){if(s instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const i=r.stack?r.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(t,a){typeof t=="string"?(a=a||{},a.url=t):a=t||{},a=yu(this.defaults,a);const{transitional:s,paramsSerializer:r,headers:i}=a;s!==void 0&&Lb.assertOptions(s,{silentJSONParsing:Ki.transitional(Ki.boolean),forcedJSONParsing:Ki.transitional(Ki.boolean),clarifyTimeoutError:Ki.transitional(Ki.boolean)},!1),r!=null&&(ot.isFunction(r)?a.paramsSerializer={serialize:r}:Lb.assertOptions(r,{encode:Ki.function,serialize:Ki.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),Lb.assertOptions(a,{baseUrl:Ki.spelling("baseURL"),withXsrfToken:Ki.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let o=i&&ot.merge(i.common,i[a.method]);i&&ot.forEach(["delete","get","head","post","put","patch","common"],v=>{delete i[v]}),a.headers=sr.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(N){typeof N.runWhen=="function"&&N.runWhen(a)===!1||(c=c&&N.synchronous,l.unshift(N.fulfilled,N.rejected))});const d=[];this.interceptors.response.forEach(function(N){d.push(N.fulfilled,N.rejected)});let u,f=0,p;if(!c){const v=[sI.bind(this),void 0];for(v.unshift(...l),v.push(...d),p=v.length,u=Promise.resolve(a);f<p;)u=u.then(v[f++],v[f++]);return u}p=l.length;let x=a;for(;f<p;){const v=l[f++],N=l[f++];try{x=v(x)}catch(b){N.call(this,b);break}}try{u=sI.call(this,x)}catch(v){return Promise.reject(v)}for(f=0,p=d.length;f<p;)u=u.then(d[f++],d[f++]);return u}getUri(t){t=yu(this.defaults,t);const a=kH(t.baseURL,t.url,t.allowAbsoluteUrls);return SH(a,t.params,t.paramsSerializer)}};ot.forEach(["delete","get","head","options"],function(t){ou.prototype[t]=function(a,s){return this.request(yu(s||{},{method:t,url:a,data:(s||{}).data}))}});ot.forEach(["post","put","patch"],function(t){function a(s){return function(i,o,l){return this.request(yu(l||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}ou.prototype[t]=a(),ou.prototype[t+"Form"]=a(!0)});let Jre=class MH{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(i){a=i});const s=this;this.promise.then(r=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](r);s._listeners=null}),this.promise.then=r=>{let i;const o=new Promise(l=>{s.subscribe(l),i=l}).then(r);return o.cancel=function(){s.unsubscribe(i)},o},t(function(i,o,l){s.reason||(s.reason=new Rf(i,o,l),a(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const a=this._listeners.indexOf(t);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const t=new AbortController,a=s=>{t.abort(s)};return this.subscribe(a),t.signal.unsubscribe=()=>this.unsubscribe(a),t.signal}static source(){let t;return{token:new MH(function(r){t=r}),cancel:t}}};function eie(e){return function(a){return e.apply(null,a)}}function tie(e){return ot.isObject(e)&&e.isAxiosError===!0}const pT={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(pT).forEach(([e,t])=>{pT[t]=e});function IH(e){const t=new ou(e),a=fH(ou.prototype.request,t);return ot.extend(a,ou.prototype,t,{allOwnKeys:!0}),ot.extend(a,t,null,{allOwnKeys:!0}),a.create=function(r){return IH(yu(e,r))},a}const Sa=IH(Kp);Sa.Axios=ou;Sa.CanceledError=Rf;Sa.CancelToken=Jre;Sa.isCancel=TH;Sa.VERSION=OH;Sa.toFormData=kw;Sa.AxiosError=Jt;Sa.Cancel=Sa.CanceledError;Sa.all=function(t){return Promise.all(t)};Sa.spread=eie;Sa.isAxiosError=tie;Sa.mergeConfig=yu;Sa.AxiosHeaders=sr;Sa.formToJSON=e=>AH(ot.isHTMLForm(e)?new FormData(e):e);Sa.getAdapter=DH.getAdapter;Sa.HttpStatusCode=pT;Sa.default=Sa;const{Axios:wqe,AxiosError:Nqe,CanceledError:jqe,isCancel:Cqe,CancelToken:Sqe,VERSION:_qe,all:Aqe,Cancel:Tqe,isAxiosError:Eqe,spread:kqe,toFormData:Lqe,AxiosHeaders:Pqe,HttpStatusCode:Dqe,formToJSON:Oqe,getAdapter:Mqe,mergeConfig:Iqe}=Sa,nie="https://crm.sari-sari.com",ie=Sa.create({baseURL:`${nie}/api`,withCredentials:!0,headers:{"Content-Type":"application/json"}});ie.interceptors.request.use(e=>(console.log(` [${e.method?.toUpperCase()}] ${e.url}`),e),e=>Promise.reject(e));ie.interceptors.response.use(e=>e,e=>(e.response?.status===401&&(console.warn(" Unauthorized  possible expired token or not logged in."),localStorage.clear(),window.location.href="/login"),Promise.reject(e)));const aie="isLoggedIn",by="userRole",Bs=()=>{const[e,t]=h.useState(!!localStorage.getItem(by)),[a,s]=h.useState(localStorage.getItem(by)||""),r=bt();h.useEffect(()=>{const d=localStorage.getItem(by);d?(t(!0),s(d)):o()},[]);const i=d=>{localStorage.setItem(by,d.role),localStorage.setItem(aie,!0),t(!0),s(d.role)},o=()=>{localStorage.clear(),t(!1),s("")};return{isLoggedIn:e,logout:async()=>{try{await ie.post("/auth/logout")}catch(d){console.log("Failed to logout from server:",d)}o(),r("/")},userRole:a,setUserRole:s,login:d=>{i(d),d.role==="CEO"||d.role==="Admin"?r("/admin"):d.role==="Manager"?r("/manager/dashboard"):r("/")}}},Zh=({children:e,requiredRole:t})=>{const{isLoggedIn:a,userRole:s}=Bs();if(!a)return n.jsx(ti,{to:"/",replace:!0});if(!t)return s.toUpperCase()==="ADMIN"||s.toUpperCase()==="CEO"?n.jsx(ti,{to:"/admin/dashboard",replace:!0}):s==="GROUP MANAGER"?n.jsx(ti,{to:"/group-manager/dashboard",replace:!0}):s==="MANAGER"?n.jsx(ti,{to:"/manager/dashboard",replace:!0}):s==="SALES"?n.jsx(ti,{to:"/sales/dashboard",replace:!0}):n.jsx(ti,{to:"/",replace:!0});const r=s.toLowerCase(),i=t.toLowerCase();return r!==i?n.jsx(ti,{to:"/",replace:!0}):e};var $H={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},iI=pt.createContext&&pt.createContext($H),sie=["attr","size","title"];function rie(e,t){if(e==null)return{};var a=iie(e,t),s,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)s=i[r],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function iie(e,t){if(e==null)return{};var a={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;a[s]=e[s]}return a}function Kb(){return Kb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Kb.apply(this,arguments)}function oI(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Xb(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?oI(Object(a),!0).forEach(function(s){oie(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):oI(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function oie(e,t,a){return t=lie(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function lie(e){var t=cie(e,"string");return typeof t=="symbol"?t:t+""}function cie(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function RH(e){return e&&e.map((t,a)=>pt.createElement(t.tag,Xb({key:a},t.attr),RH(t.child)))}function St(e){return t=>pt.createElement(die,Kb({attr:Xb({},e.attr)},t),RH(e.child))}function die(e){var t=a=>{var{attr:s,size:r,title:i}=e,o=rie(e,sie),l=r||a.size||"1em",c;return a.className&&(c=a.className),e.className&&(c=(c?c+" ":"")+e.className),pt.createElement("svg",Kb({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,s,o,{className:c,style:Xb(Xb({color:e.color||a.color},a.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&pt.createElement("title",null,i),e.children)};return iI!==void 0?pt.createElement(iI.Consumer,null,a=>t(a)):t($H)}function Ri(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(e)}function zf(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(e)}function Uc(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"21 8 21 21 3 21 3 8"},child:[]},{tag:"rect",attr:{x:"1",y:"3",width:"22",height:"5"},child:[]},{tag:"line",attr:{x1:"10",y1:"12",x2:"14",y2:"12"},child:[]}]})(e)}function Pw(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"7",y1:"7",x2:"17",y2:"17"},child:[]},{tag:"polyline",attr:{points:"17 7 17 17 7 17"},child:[]}]})(e)}function xT(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"polyline",attr:{points:"19 12 12 19 5 12"},child:[]}]})(e)}function uie(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(e)}function Dw(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 5 19 12 12 19"},child:[]}]})(e)}function Xp(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"7",y1:"17",x2:"17",y2:"7"},child:[]},{tag:"polyline",attr:{points:"7 7 17 7 17 17"},child:[]}]})(e)}function mie(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"19",x2:"12",y2:"5"},child:[]},{tag:"polyline",attr:{points:"5 12 12 5 19 12"},child:[]}]})(e)}function xS(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"8",r:"7"},child:[]},{tag:"polyline",attr:{points:"8.21 13.89 7 23 12 20 17 23 15.79 13.88"},child:[]}]})(e)}function fie(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(e)}function Zp(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"},child:[]},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"},child:[]}]})(e)}function Ow(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"},child:[]}]})(e)}function Kt(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"},child:[]}]})(e)}function Ct(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(e)}function zH(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"13",r:"4"},child:[]}]})(e)}function ba(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(e)}function qt(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 11 12 14 22 4"},child:[]},{tag:"path",attr:{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"},child:[]}]})(e)}function Rk(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(e)}function jt(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(e)}function hie(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"},child:[]}]})(e)}function It(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"},child:[]}]})(e)}function gie(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(e)}function ws(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"},child:[]},{tag:"rect",attr:{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"},child:[]}]})(e)}function zs(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(e)}function UH(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(e)}function Fl(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"7 10 12 15 17 10"},child:[]},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"},child:[]}]})(e)}function la(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(e)}function ia(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(e)}function bu(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},child:[]},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"},child:[]}]})(e)}function vu(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(e)}function xn(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(e)}function pie(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(e)}function Jp(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(e)}function FH(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"},child:[]}]})(e)}function zk(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"3",y1:"9",x2:"21",y2:"9"},child:[]},{tag:"line",attr:{x1:"9",y1:"21",x2:"9",y2:"9"},child:[]}]})(e)}function yo(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(e)}function Xn(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(e)}function ex(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(e)}function xie(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"5 9 2 12 5 15"},child:[]},{tag:"polyline",attr:{points:"9 5 12 2 15 5"},child:[]},{tag:"polyline",attr:{points:"15 19 12 22 9 19"},child:[]},{tag:"polyline",attr:{points:"19 9 22 12 19 15"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"22"},child:[]}]})(e)}function Ls(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M15.05 5A5 5 0 0 1 19 8.95M15.05 1A9 9 0 0 1 23 8.94m-1 7.98v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(e)}function At(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(e)}function lI(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21.21 15.89A10 10 0 1 1 8 2.83"},child:[]},{tag:"path",attr:{d:"M22 12A10 10 0 0 0 12 2v10z"},child:[]}]})(e)}function un(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(e)}function Uk(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},child:[]},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"},child:[]},{tag:"polyline",attr:{points:"7 3 7 8 15 8"},child:[]}]})(e)}function Ht(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(e)}function yie(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"},child:[]},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"},child:[]}]})(e)}function Fk(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(e)}function Mw(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"},child:[]}]})(e)}function Jc(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"5",y:"2",width:"14",height:"20",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"12",y1:"18",x2:"12.01",y2:"18"},child:[]}]})(e)}function Bl(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"},child:[]}]})(e)}function tr(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"6"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"2"},child:[]}]})(e)}function Ut(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(e)}function yS(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 18 13.5 8.5 8.5 13.5 1 6"},child:[]},{tag:"polyline",attr:{points:"17 18 23 18 23 12"},child:[]}]})(e)}function Kc(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(e)}function Ao(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"polyline",attr:{points:"17 11 19 13 23 9"},child:[]}]})(e)}function Gn(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"20",y1:"8",x2:"20",y2:"14"},child:[]},{tag:"line",attr:{x1:"23",y1:"11",x2:"17",y2:"11"},child:[]}]})(e)}function To(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"18",y1:"8",x2:"23",y2:"13"},child:[]},{tag:"line",attr:{x1:"23",y1:"8",x2:"18",y2:"13"},child:[]}]})(e)}function en(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(e)}function Zn(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(e)}function Ps(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"15",y1:"9",x2:"9",y2:"15"},child:[]},{tag:"line",attr:{x1:"9",y1:"9",x2:"15",y2:"15"},child:[]}]})(e)}function Vt(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(e)}const BH=()=>{const[e,t]=h.useState(!1),a=h.useRef(null);return h.useEffect(()=>{const s=r=>{a.current&&!a.current.contains(r.target)&&t(!1)};return document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[]),h.useEffect(()=>{const s=()=>{e&&t(!1)};return window.addEventListener("scroll",s),()=>{window.removeEventListener("scroll",s)}},[e]),n.jsx("header",{className:"sticky top-0 z-50 bg-tertiary shadow-xl border-b border-tertiary",children:n.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex items-center justify-between h-16",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsxs("span",{className:"text-2xl font-black text-white",children:["Sari-Sari ",n.jsx("span",{className:"text-accent",children:" CRM"})]})}),n.jsxs("nav",{className:"hidden md:flex space-x-8 text-white font-medium",children:[n.jsx("a",{href:"#platform",className:"hover:text-accent transition duration-150",children:"Platform"}),n.jsx("a",{href:"#solutions",className:"hover:text-accent transition duration-150",children:"Solutions"}),n.jsx("a",{href:"#insights",className:"hover:text-accent transition duration-150",children:"Insights"}),n.jsx("a",{href:"#pricing",className:"hover:text-accent transition duration-150",children:"Pricing"})]}),n.jsxs("div",{className:"hidden sm:flex items-center space-x-4",children:[n.jsx("a",{href:"/login",className:"text-sm font-medium text-white hover:text-accent transition duration-500",children:"Log In"}),n.jsx("a",{href:"/signup",className:"inline-flex items-center justify-center px-4 py-2 text-sm font-semibold rounded-full shadow-lg border border-secondary text-white bg-secondary hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-500",children:"Start for Free"})]}),n.jsxs("div",{className:"flex sm:hidden items-center relative",ref:a,children:[n.jsx("button",{onClick:()=>t(!e),children:e?n.jsx(Vt,{className:"w-6 h-6 text-white"}):n.jsx(ex,{className:"w-6 h-6 text-white"})}),e&&n.jsx("div",{className:"absolute top-11 right-0 mt-2 w-48 border border-tertiary rounded-lg shadow-lg z-50 bg-primary",children:n.jsxs("nav",{className:"flex flex-col",children:[n.jsx("a",{href:"/login",className:"block px-4 py-2 text-center text-tertiary bg-white hover:bg-accent hover:text-secondary transition rounded-t-lg",children:"Log In"}),n.jsx("a",{href:"/signup",className:"block px-4 py-2 text-center text-tertiary bg-white hover:bg-secondary hover:text-white transition rounded-b-lg",children:"Start for Free"})]})})]})]})})})};function bie(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m12 14 4-4"},child:[]},{tag:"path",attr:{d:"M3.34 19a10 10 0 1 1 17.32 0"},child:[]}]})(e)}function Hl(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(e)}function vie(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z"},child:[]}]})(e)}function Iw(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"10",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M10.3 15H7a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"17",cy:"17",r:"3"},child:[]},{tag:"path",attr:{d:"m21 21-1.9-1.9"},child:[]}]})(e)}function wie(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M22 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(e)}function Nie(e){return St({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"},child:[]}]})(e)}const jie=()=>{const e=["/image/Dashboard1.png","/image/lead1.png","/image/dashboard.jpg"],[t,a]=h.useState(0),[s,r]=h.useState(!1),i=h.useRef(null),[o,l]=h.useState(0),[c,d]=h.useState(0);h.useEffect(()=>(s||(i.current=setInterval(()=>{a(x=>(x+1)%e.length)},4e3)),()=>clearInterval(i.current)),[s,e.length]);const u=x=>l(x.targetTouches[0].clientX),f=x=>d(x.targetTouches[0].clientX),p=()=>{o-c>75&&a(x=>(x+1)%e.length),c-o>75&&a(x=>(x-1+e.length)%e.length)};return n.jsx("section",{className:"bg-paper-white text-white py-15 lg:py-32",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[n.jsxs("div",{className:"lg:text-left text-center",children:[n.jsxs("h1",{className:"text-5xl sm:text-6xl lg:text-7xl font-lg text-secondary mb-6 leading-tight",children:["Sari-Sari"," ",n.jsx("span",{className:"text-accent font-extrabold",children:"CRM"})]}),n.jsx("p",{className:"max-w-xl mx-auto lg:mx-0 text-lg sm:text-xl text-secondary mb-10 italic",children:"The CRM that keeps your customers organized and your sales growing."}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-center lg:justify-start space-y-4 sm:space-y-0 sm:space-x-4",children:[n.jsx("a",{href:"#",className:"px-10 py-3 rounded-lg border border-secondary text-white bg-secondary font-semibold hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-500",children:"Get Started Now"}),n.jsx("a",{href:"#",className:"px-10 py-3 rounded-lg border border-secondary text-white bg-secondary hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-500",children:"Watch Demo (2 min)"})]})]}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"hidden lg:block absolute inset-0 -top-10 -bottom-10 right-4 bg-accent rounded-3xl transform rotate-3 z-0"}),n.jsxs("div",{className:"relative z-10 overflow-hidden rounded-xl shadow-2xl border-4 border-gray-800 h-[400px] bg-gray-900 flex items-center justify-center",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),onTouchStart:u,onTouchMove:f,onTouchEnd:p,children:[e.map((x,v)=>n.jsx("img",{src:x,alt:`Slide ${v+1}`,className:`absolute inset-0 w-full h-full object-contain bg-gray-50 transition-opacity duration-1000 ease-in-out ${v===t?"opacity-100":"opacity-0"}`},v)),n.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex space-x-2",children:e.map((x,v)=>n.jsx("button",{onClick:()=>a(v),className:`w-3 h-3 rounded-full transition-all ${v===t?"bg-accent":"bg-gray-400 opacity-50"}`},v))})]})]})]})})},Cie=({Icon:e,title:t,description:a})=>n.jsxs("div",{className:"bg-gray-800 p-8 rounded-2xl border border-gray-700 hover:border-accent transition transform hover:-translate-y-1",children:[n.jsx("div",{className:"w-14 h-14 flex items-center justify-center rounded-full text-accent mb-6",children:n.jsx(e,{className:"w-8 h-8"})}),n.jsx("h3",{className:"text-xl font-semibold text-white mb-3",children:t}),n.jsx("p",{className:"text-gray-400",children:a})]}),Sie=()=>{const e=[{Icon:Nie,title:"Automated Workflows",description:"Automate tasks and focus on engagement."},{Icon:bie,title:"Predictive Analytics",description:"Harness AI to forecast sales and risks."},{Icon:wie,title:"Unified Customer View",description:"360-degree profile for every customer."},{Icon:vie,title:"Multi-Channel Support",description:"Engage across email, chat, and more."}];return n.jsx("section",{id:"platform",className:"py-20 bg-gray-900 border-t border-gray-800",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[n.jsx("h2",{className:"text-4xl sm:text-5xl font-bold text-white mb-4",children:"Engineered for Enterprise Scale"}),n.jsx("p",{className:"text-xl text-gray-400 mb-16",children:"Pillows is the neural network powering your customer relationships."}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:e.map((t,a)=>n.jsx(Cie,{...t},a))})]})})},_ie=()=>n.jsxs("section",{id:"pricing",className:"py-20 bg-paper-white border-t border-gray-800 text-center",children:[n.jsx("h2",{className:"text-4xl sm:text-5xl font-bold text-secondary mb-4",children:"Start Building Your Future, Today."}),n.jsx("p",{className:"text-xl text-gray-400 mb-10",children:"Join thousands leveraging Sari-Sari CRM's intelligent platform."}),n.jsx("a",{href:"/signup",className:"px-12 py-4 text-lg font-bold rounded-xl shadow-2xl bg-accent border border-secondary text-white bg-secondary hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-400",children:"Start 15-Day Free Trial"})]}),Aie=()=>n.jsx("footer",{className:"bg-secondary text-white border-t py-10",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 grid grid-cols-2 md:grid-cols-5 gap-8",children:[n.jsxs("div",{children:[n.jsxs("span",{className:"text-xl font-white",children:["Sari-Sari ",n.jsx("span",{className:"text-accent",children:"CRM"})]}),n.jsx("p",{className:"text-sm text-white mt-4",children:" 2025 Sari-Sari CRM"})]}),[{title:"Platform",links:["AI Features","Automation","Integrations","APIs"]},{title:"Resources",links:["Case Studies","Webinars","Security","Support"]},{title:"Company",links:["Leadership","Partnerships","Careers","Newsroom"]},{title:"Legal",links:["Terms","Privacy","SLA","Compliance"]}].map((e,t)=>n.jsxs("div",{children:[n.jsx("h5",{className:"text-md font-semibold mb-4 text-accent",children:e.title}),n.jsx("ul",{className:"space-y-2 text-sm text-white",children:e.links.map((a,s)=>n.jsx("li",{children:n.jsx("a",{href:"#",className:"hover:text-accent",children:a})},s))})]},t))]})}),Tie=()=>(h.useEffect(()=>{document.title="Sari-Sari CRM"},[]),n.jsxs("main",{className:"font-inter",children:[n.jsx(BH,{}),n.jsx(jie,{}),n.jsx(Sie,{}),n.jsx(_ie,{}),n.jsx(Aie,{})]}));function Ru(e){return St({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"},child:[]}]})(e)}function Wn(e){return St({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(e)}function dd(e){return St({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"},child:[]}]})(e)}class Sg extends Error{}Sg.prototype.name="InvalidTokenError";function Eie(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,a)=>{let s=a.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}))}function kie(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return Eie(t)}catch{return atob(t)}}function HH(e,t){if(typeof e!="string")throw new Sg("Invalid token specified: must be a string");t||(t={});const a=t.header===!0?0:1,s=e.split(".")[a];if(typeof s!="string")throw new Sg(`Invalid token specified: missing part #${a+1}`);let r;try{r=kie(s)}catch(i){throw new Sg(`Invalid token specified: invalid base64 for part #${a+1} (${i.message})`)}try{return JSON.parse(r)}catch(i){throw new Sg(`Invalid token specified: invalid json for part #${a+1} (${i.message})`)}}function $a(e,t,a=void 0){const s={};for(const r in e){const i=e[r];let o="",l=!0;for(let c=0;c<i.length;c+=1){const d=i[c];d&&(o+=(l===!0?"":" ")+t(d),l=!1,a&&a[d]&&(o+=" "+a[d]))}s[r]=o}return s}function wu(e,...t){const a=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(s=>a.searchParams.append("args[]",s)),`Minified MUI error #${e}; visit ${a} for the full message.`}function Un(e){if(typeof e!="string")throw new Error(wu(7));return e.charAt(0).toUpperCase()+e.slice(1)}var bS={exports:{}},$n={};var cI;function Lie(){if(cI)return $n;cI=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function v(N){if(typeof N=="object"&&N!==null){var b=N.$$typeof;switch(b){case e:switch(N=N.type,N){case a:case r:case s:case c:case d:case p:return N;default:switch(N=N&&N.$$typeof,N){case o:case l:case f:case u:return N;case i:return N;default:return b}}case t:return b}}}return $n.ContextConsumer=i,$n.ContextProvider=o,$n.Element=e,$n.ForwardRef=l,$n.Fragment=a,$n.Lazy=f,$n.Memo=u,$n.Portal=t,$n.Profiler=r,$n.StrictMode=s,$n.Suspense=c,$n.SuspenseList=d,$n.isContextConsumer=function(N){return v(N)===i},$n.isContextProvider=function(N){return v(N)===o},$n.isElement=function(N){return typeof N=="object"&&N!==null&&N.$$typeof===e},$n.isForwardRef=function(N){return v(N)===l},$n.isFragment=function(N){return v(N)===a},$n.isLazy=function(N){return v(N)===f},$n.isMemo=function(N){return v(N)===u},$n.isPortal=function(N){return v(N)===t},$n.isProfiler=function(N){return v(N)===r},$n.isStrictMode=function(N){return v(N)===s},$n.isSuspense=function(N){return v(N)===c},$n.isSuspenseList=function(N){return v(N)===d},$n.isValidElementType=function(N){return typeof N=="string"||typeof N=="function"||N===a||N===r||N===s||N===c||N===d||typeof N=="object"&&N!==null&&(N.$$typeof===f||N.$$typeof===u||N.$$typeof===o||N.$$typeof===i||N.$$typeof===l||N.$$typeof===x||N.getModuleId!==void 0)},$n.typeOf=v,$n}var dI;function Pie(){return dI||(dI=1,bS.exports=Lie()),bS.exports}var Bk=Pie();function ho(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function GH(e){if(h.isValidElement(e)||Bk.isValidElementType(e)||!ho(e))return e;const t={};return Object.keys(e).forEach(a=>{t[a]=GH(e[a])}),t}function kr(e,t,a={clone:!0}){const s=a.clone?{...e}:e;return ho(e)&&ho(t)&&Object.keys(t).forEach(r=>{h.isValidElement(t[r])||Bk.isValidElementType(t[r])?s[r]=t[r]:ho(t[r])&&Object.prototype.hasOwnProperty.call(e,r)&&ho(e[r])?s[r]=kr(e[r],t[r],a):a.clone?s[r]=ho(t[r])?GH(t[r]):t[r]:s[r]=t[r]}),s}function Ug(e,t){return t?kr(e,t,{clone:!1}):e}function uI(e,t){if(!e.containerQueries)return t;const a=Object.keys(t).filter(s=>s.startsWith("@container")).sort((s,r)=>{const i=/min-width:\s*([0-9.]+)/;return+(s.match(i)?.[1]||0)-+(r.match(i)?.[1]||0)});return a.length?a.reduce((s,r)=>{const i=t[r];return delete s[r],s[r]=i,s},{...t}):t}function Die(e,t){return t==="@"||t.startsWith("@")&&(e.some(a=>t.startsWith(`@${a}`))||!!t.match(/^@\d/))}function Oie(e,t){const a=t.match(/^@([^/]+)?\/?(.+)?$/);if(!a)return null;const[,s,r]=a,i=Number.isNaN(+s)?s||0:+s;return e.containerQueries(r).up(i)}function Mie(e){const t=(i,o)=>i.replace("@media",o?`@container ${o}`:"@container");function a(i,o){i.up=(...l)=>t(e.breakpoints.up(...l),o),i.down=(...l)=>t(e.breakpoints.down(...l),o),i.between=(...l)=>t(e.breakpoints.between(...l),o),i.only=(...l)=>t(e.breakpoints.only(...l),o),i.not=(...l)=>{const c=t(e.breakpoints.not(...l),o);return c.includes("not all and")?c.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):c}}const s={},r=i=>(a(s,i),s);return a(r),{...e,containerQueries:r}}const $w={xs:0,sm:600,md:900,lg:1200,xl:1536},mI={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${$w[e]}px)`},Iie={containerQueries:e=>({up:t=>{let a=typeof t=="number"?t:$w[t]||t;return typeof a=="number"&&(a=`${a}px`),e?`@container ${e} (min-width:${a})`:`@container (min-width:${a})`}})};function Al(e,t,a){const s=e.theme||{};if(Array.isArray(t)){const i=s.breakpoints||mI;return t.reduce((o,l,c)=>(o[i.up(i.keys[c])]=a(t[c]),o),{})}if(typeof t=="object"){const i=s.breakpoints||mI;return Object.keys(t).reduce((o,l)=>{if(Die(i.keys,l)){const c=Oie(s.containerQueries?s:Iie,l);c&&(o[c]=a(t[l],l))}else if(Object.keys(i.values||$w).includes(l)){const c=i.up(l);o[c]=a(t[l],l)}else{const c=l;o[c]=t[c]}return o},{})}return a(t)}function $ie(e={}){return e.keys?.reduce((a,s)=>{const r=e.up(s);return a[r]={},a},{})||{}}function fI(e,t){return e.reduce((a,s)=>{const r=a[s];return(!r||Object.keys(r).length===0)&&delete a[s],a},t)}function Rw(e,t,a=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&a){const s=`vars.${t}`.split(".").reduce((r,i)=>r&&r[i]?r[i]:null,e);if(s!=null)return s}return t.split(".").reduce((s,r)=>s&&s[r]!=null?s[r]:null,e)}function Zb(e,t,a,s=a){let r;return typeof e=="function"?r=e(a):Array.isArray(e)?r=e[a]||s:r=Rw(e,a)||s,t&&(r=t(r,s,e)),r}function _a(e){const{prop:t,cssProperty:a=e.prop,themeKey:s,transform:r}=e,i=o=>{if(o[t]==null)return null;const l=o[t],c=o.theme,d=Rw(c,s)||{};return Al(o,l,f=>{let p=Zb(d,r,f);return f===p&&typeof f=="string"&&(p=Zb(d,r,`${t}${f==="default"?"":Un(f)}`,f)),a===!1?p:{[a]:p}})};return i.propTypes={},i.filterProps=[t],i}function Rie(e){const t={};return a=>(t[a]===void 0&&(t[a]=e(a)),t[a])}const zie={m:"margin",p:"padding"},Uie={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},hI={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Fie=Rie(e=>{if(e.length>2)if(hI[e])e=hI[e];else return[e];const[t,a]=e.split(""),s=zie[t],r=Uie[a]||"";return Array.isArray(r)?r.map(i=>s+i):[s+r]}),Hk=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],Gk=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...Hk,...Gk];function tx(e,t,a,s){const r=Rw(e,t,!0)??a;return typeof r=="number"||typeof r=="string"?i=>typeof i=="string"?i:typeof r=="string"?r.startsWith("var(")&&i===0?0:r.startsWith("var(")&&i===1?r:`calc(${i} * ${r})`:r*i:Array.isArray(r)?i=>{if(typeof i=="string")return i;const o=Math.abs(i),l=r[o];return i>=0?l:typeof l=="number"?-l:typeof l=="string"&&l.startsWith("var(")?`calc(-1 * ${l})`:`-${l}`}:typeof r=="function"?r:()=>{}}function Wk(e){return tx(e,"spacing",8)}function nx(e,t){return typeof t=="string"||t==null?t:e(t)}function Bie(e,t){return a=>e.reduce((s,r)=>(s[r]=nx(t,a),s),{})}function Hie(e,t,a,s){if(!t.includes(a))return null;const r=Fie(a),i=Bie(r,s),o=e[a];return Al(e,o,i)}function WH(e,t){const a=Wk(e.theme);return Object.keys(e).map(s=>Hie(e,t,s,a)).reduce(Ug,{})}function ha(e){return WH(e,Hk)}ha.propTypes={};ha.filterProps=Hk;function ga(e){return WH(e,Gk)}ga.propTypes={};ga.filterProps=Gk;function zw(...e){const t=e.reduce((s,r)=>(r.filterProps.forEach(i=>{s[i]=r}),s),{}),a=s=>Object.keys(s).reduce((r,i)=>t[i]?Ug(r,t[i](s)):r,{});return a.propTypes={},a.filterProps=e.reduce((s,r)=>s.concat(r.filterProps),[]),a}function si(e){return typeof e!="number"?e:`${e}px solid`}function xi(e,t){return _a({prop:e,themeKey:"borders",transform:t})}const Gie=xi("border",si),Wie=xi("borderTop",si),qie=xi("borderRight",si),Vie=xi("borderBottom",si),Yie=xi("borderLeft",si),Qie=xi("borderColor"),Kie=xi("borderTopColor"),Xie=xi("borderRightColor"),Zie=xi("borderBottomColor"),Jie=xi("borderLeftColor"),eoe=xi("outline",si),toe=xi("outlineColor"),Uw=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=tx(e.theme,"shape.borderRadius",4),a=s=>({borderRadius:nx(t,s)});return Al(e,e.borderRadius,a)}return null};Uw.propTypes={};Uw.filterProps=["borderRadius"];zw(Gie,Wie,qie,Vie,Yie,Qie,Kie,Xie,Zie,Jie,Uw,eoe,toe);const Fw=e=>{if(e.gap!==void 0&&e.gap!==null){const t=tx(e.theme,"spacing",8),a=s=>({gap:nx(t,s)});return Al(e,e.gap,a)}return null};Fw.propTypes={};Fw.filterProps=["gap"];const Bw=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=tx(e.theme,"spacing",8),a=s=>({columnGap:nx(t,s)});return Al(e,e.columnGap,a)}return null};Bw.propTypes={};Bw.filterProps=["columnGap"];const Hw=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=tx(e.theme,"spacing",8),a=s=>({rowGap:nx(t,s)});return Al(e,e.rowGap,a)}return null};Hw.propTypes={};Hw.filterProps=["rowGap"];const noe=_a({prop:"gridColumn"}),aoe=_a({prop:"gridRow"}),soe=_a({prop:"gridAutoFlow"}),roe=_a({prop:"gridAutoColumns"}),ioe=_a({prop:"gridAutoRows"}),ooe=_a({prop:"gridTemplateColumns"}),loe=_a({prop:"gridTemplateRows"}),coe=_a({prop:"gridTemplateAreas"}),doe=_a({prop:"gridArea"});zw(Fw,Bw,Hw,noe,aoe,soe,roe,ioe,ooe,loe,coe,doe);function af(e,t){return t==="grey"?t:e}const uoe=_a({prop:"color",themeKey:"palette",transform:af}),moe=_a({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:af}),foe=_a({prop:"backgroundColor",themeKey:"palette",transform:af});zw(uoe,moe,foe);function Ar(e){return e<=1&&e!==0?`${e*100}%`:e}const hoe=_a({prop:"width",transform:Ar}),qk=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=a=>{const s=e.theme?.breakpoints?.values?.[a]||$w[a];return s?e.theme?.breakpoints?.unit!=="px"?{maxWidth:`${s}${e.theme.breakpoints.unit}`}:{maxWidth:s}:{maxWidth:Ar(a)}};return Al(e,e.maxWidth,t)}return null};qk.filterProps=["maxWidth"];const goe=_a({prop:"minWidth",transform:Ar}),poe=_a({prop:"height",transform:Ar}),xoe=_a({prop:"maxHeight",transform:Ar}),yoe=_a({prop:"minHeight",transform:Ar});_a({prop:"size",cssProperty:"width",transform:Ar});_a({prop:"size",cssProperty:"height",transform:Ar});const boe=_a({prop:"boxSizing"});zw(hoe,qk,goe,poe,xoe,yoe,boe);const ax={border:{themeKey:"borders",transform:si},borderTop:{themeKey:"borders",transform:si},borderRight:{themeKey:"borders",transform:si},borderBottom:{themeKey:"borders",transform:si},borderLeft:{themeKey:"borders",transform:si},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:si},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Uw},color:{themeKey:"palette",transform:af},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:af},backgroundColor:{themeKey:"palette",transform:af},p:{style:ga},pt:{style:ga},pr:{style:ga},pb:{style:ga},pl:{style:ga},px:{style:ga},py:{style:ga},padding:{style:ga},paddingTop:{style:ga},paddingRight:{style:ga},paddingBottom:{style:ga},paddingLeft:{style:ga},paddingX:{style:ga},paddingY:{style:ga},paddingInline:{style:ga},paddingInlineStart:{style:ga},paddingInlineEnd:{style:ga},paddingBlock:{style:ga},paddingBlockStart:{style:ga},paddingBlockEnd:{style:ga},m:{style:ha},mt:{style:ha},mr:{style:ha},mb:{style:ha},ml:{style:ha},mx:{style:ha},my:{style:ha},margin:{style:ha},marginTop:{style:ha},marginRight:{style:ha},marginBottom:{style:ha},marginLeft:{style:ha},marginX:{style:ha},marginY:{style:ha},marginInline:{style:ha},marginInlineStart:{style:ha},marginInlineEnd:{style:ha},marginBlock:{style:ha},marginBlockStart:{style:ha},marginBlockEnd:{style:ha},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Fw},rowGap:{style:Hw},columnGap:{style:Bw},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Ar},maxWidth:{style:qk},minWidth:{transform:Ar},height:{transform:Ar},maxHeight:{transform:Ar},minHeight:{transform:Ar},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function voe(...e){const t=e.reduce((s,r)=>s.concat(Object.keys(r)),[]),a=new Set(t);return e.every(s=>a.size===Object.keys(s).length)}function woe(e,t){return typeof e=="function"?e(t):e}function Noe(){function e(a,s,r,i){const o={[a]:s,theme:r},l=i[a];if(!l)return{[a]:s};const{cssProperty:c=a,themeKey:d,transform:u,style:f}=l;if(s==null)return null;if(d==="typography"&&s==="inherit")return{[a]:s};const p=Rw(r,d)||{};return f?f(o):Al(o,s,v=>{let N=Zb(p,u,v);return v===N&&typeof v=="string"&&(N=Zb(p,u,`${a}${v==="default"?"":Un(v)}`,v)),c===!1?N:{[c]:N}})}function t(a){const{sx:s,theme:r={},nested:i}=a||{};if(!s)return null;const o=r.unstable_sxConfig??ax;function l(c){let d=c;if(typeof c=="function")d=c(r);else if(typeof c!="object")return c;if(!d)return null;const u=$ie(r.breakpoints),f=Object.keys(u);let p=u;return Object.keys(d).forEach(x=>{const v=woe(d[x],r);if(v!=null)if(typeof v=="object")if(o[x])p=Ug(p,e(x,v,r,o));else{const N=Al({theme:r},v,b=>({[x]:b}));voe(N,v)?p[x]=t({sx:v,theme:r,nested:!0}):p=Ug(p,N)}else p=Ug(p,e(x,v,r,o))}),!i&&r.modularCssLayers?{"@layer sx":uI(r,fI(f,p))}:uI(r,fI(f,p))}return Array.isArray(s)?s.map(l):l(s)}return t}const hf=Noe();hf.filterProps=["sx"];const joe=e=>{const t={systemProps:{},otherProps:{}},a=e?.theme?.unstable_sxConfig??ax;return Object.keys(e).forEach(s=>{a[s]?t.systemProps[s]=e[s]:t.otherProps[s]=e[s]}),t};function Coe(e){const{sx:t,...a}=e,{systemProps:s,otherProps:r}=joe(a);let i;return Array.isArray(t)?i=[s,...t]:typeof t=="function"?i=(...o)=>{const l=t(...o);return ho(l)?{...s,...l}:s}:i={...s,...t},{...r,sx:i}}function qe(){return qe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},qe.apply(null,arguments)}function Soe(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function _oe(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var Aoe=(function(){function e(a){var s=this;this._insertTag=function(r){var i;s.tags.length===0?s.insertionPoint?i=s.insertionPoint.nextSibling:s.prepend?i=s.container.firstChild:i=s.before:i=s.tags[s.tags.length-1].nextSibling,s.container.insertBefore(r,i),s.tags.push(r)},this.isSpeedy=a.speedy===void 0?!0:a.speedy,this.tags=[],this.ctr=0,this.nonce=a.nonce,this.key=a.key,this.container=a.container,this.prepend=a.prepend,this.insertionPoint=a.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(s){s.forEach(this._insertTag)},t.insert=function(s){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(_oe(this));var r=this.tags[this.tags.length-1];if(this.isSpeedy){var i=Soe(r);try{i.insertRule(s,i.cssRules.length)}catch{}}else r.appendChild(document.createTextNode(s));this.ctr++},t.flush=function(){this.tags.forEach(function(s){var r;return(r=s.parentNode)==null?void 0:r.removeChild(s)}),this.tags=[],this.ctr=0},e})(),js="-ms-",Jb="-moz-",jn="-webkit-",qH="comm",Vk="rule",Yk="decl",Toe="@import",VH="@keyframes",Eoe="@layer",koe=Math.abs,Gw=String.fromCharCode,Loe=Object.assign;function Poe(e,t){return vs(e,0)^45?(((t<<2^vs(e,0))<<2^vs(e,1))<<2^vs(e,2))<<2^vs(e,3):0}function YH(e){return e.trim()}function Doe(e,t){return(e=t.exec(e))?e[0]:e}function Cn(e,t,a){return e.replace(t,a)}function yT(e,t){return e.indexOf(t)}function vs(e,t){return e.charCodeAt(t)|0}function np(e,t,a){return e.slice(t,a)}function uo(e){return e.length}function Qk(e){return e.length}function vy(e,t){return t.push(e),e}function Ooe(e,t){return e.map(t).join("")}var Ww=1,gf=1,QH=0,lr=0,Da=0,Uf="";function qw(e,t,a,s,r,i,o){return{value:e,root:t,parent:a,type:s,props:r,children:i,line:Ww,column:gf,length:o,return:""}}function Jh(e,t){return Loe(qw("",null,null,"",null,null,0),e,{length:-e.length},t)}function Moe(){return Da}function Ioe(){return Da=lr>0?vs(Uf,--lr):0,gf--,Da===10&&(gf=1,Ww--),Da}function Lr(){return Da=lr<QH?vs(Uf,lr++):0,gf++,Da===10&&(gf=1,Ww++),Da}function wo(){return vs(Uf,lr)}function Pb(){return lr}function sx(e,t){return np(Uf,e,t)}function ap(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function KH(e){return Ww=gf=1,QH=uo(Uf=e),lr=0,[]}function XH(e){return Uf="",e}function Db(e){return YH(sx(lr-1,bT(e===91?e+2:e===40?e+1:e)))}function $oe(e){for(;(Da=wo())&&Da<33;)Lr();return ap(e)>2||ap(Da)>3?"":" "}function Roe(e,t){for(;--t&&Lr()&&!(Da<48||Da>102||Da>57&&Da<65||Da>70&&Da<97););return sx(e,Pb()+(t<6&&wo()==32&&Lr()==32))}function bT(e){for(;Lr();)switch(Da){case e:return lr;case 34:case 39:e!==34&&e!==39&&bT(Da);break;case 40:e===41&&bT(e);break;case 92:Lr();break}return lr}function zoe(e,t){for(;Lr()&&e+Da!==57;)if(e+Da===84&&wo()===47)break;return"/*"+sx(t,lr-1)+"*"+Gw(e===47?e:Lr())}function Uoe(e){for(;!ap(wo());)Lr();return sx(e,lr)}function Foe(e){return XH(Ob("",null,null,null,[""],e=KH(e),0,[0],e))}function Ob(e,t,a,s,r,i,o,l,c){for(var d=0,u=0,f=o,p=0,x=0,v=0,N=1,b=1,C=1,w=0,S="",E=r,k=i,A=s,T=S;b;)switch(v=w,w=Lr()){case 40:if(v!=108&&vs(T,f-1)==58){yT(T+=Cn(Db(w),"&","&\f"),"&\f")!=-1&&(C=-1);break}case 34:case 39:case 91:T+=Db(w);break;case 9:case 10:case 13:case 32:T+=$oe(v);break;case 92:T+=Roe(Pb()-1,7);continue;case 47:switch(wo()){case 42:case 47:vy(Boe(zoe(Lr(),Pb()),t,a),c);break;default:T+="/"}break;case 123*N:l[d++]=uo(T)*C;case 125*N:case 59:case 0:switch(w){case 0:case 125:b=0;case 59+u:C==-1&&(T=Cn(T,/\f/g,"")),x>0&&uo(T)-f&&vy(x>32?pI(T+";",s,a,f-1):pI(Cn(T," ","")+";",s,a,f-2),c);break;case 59:T+=";";default:if(vy(A=gI(T,t,a,d,u,r,l,S,E=[],k=[],f),i),w===123)if(u===0)Ob(T,t,A,A,E,i,f,l,k);else switch(p===99&&vs(T,3)===110?100:p){case 100:case 108:case 109:case 115:Ob(e,A,A,s&&vy(gI(e,A,A,0,0,r,l,S,r,E=[],f),k),r,k,f,l,s?E:k);break;default:Ob(T,A,A,A,[""],k,0,l,k)}}d=u=x=0,N=C=1,S=T="",f=o;break;case 58:f=1+uo(T),x=v;default:if(N<1){if(w==123)--N;else if(w==125&&N++==0&&Ioe()==125)continue}switch(T+=Gw(w),w*N){case 38:C=u>0?1:(T+="\f",-1);break;case 44:l[d++]=(uo(T)-1)*C,C=1;break;case 64:wo()===45&&(T+=Db(Lr())),p=wo(),u=f=uo(S=T+=Uoe(Pb())),w++;break;case 45:v===45&&uo(T)==2&&(N=0)}}return i}function gI(e,t,a,s,r,i,o,l,c,d,u){for(var f=r-1,p=r===0?i:[""],x=Qk(p),v=0,N=0,b=0;v<s;++v)for(var C=0,w=np(e,f+1,f=koe(N=o[v])),S=e;C<x;++C)(S=YH(N>0?p[C]+" "+w:Cn(w,/&\f/g,p[C])))&&(c[b++]=S);return qw(e,t,a,r===0?Vk:l,c,d,u)}function Boe(e,t,a){return qw(e,t,a,qH,Gw(Moe()),np(e,2,-2),0)}function pI(e,t,a,s){return qw(e,t,a,Yk,np(e,0,s),np(e,s+1,-1),s)}function sf(e,t){for(var a="",s=Qk(e),r=0;r<s;r++)a+=t(e[r],r,e,t)||"";return a}function Hoe(e,t,a,s){switch(e.type){case Eoe:if(e.children.length)break;case Toe:case Yk:return e.return=e.return||e.value;case qH:return"";case VH:return e.return=e.value+"{"+sf(e.children,s)+"}";case Vk:e.value=e.props.join(",")}return uo(a=sf(e.children,s))?e.return=e.value+"{"+a+"}":""}function Goe(e){var t=Qk(e);return function(a,s,r,i){for(var o="",l=0;l<t;l++)o+=e[l](a,s,r,i)||"";return o}}function Woe(e){return function(t){t.root||(t=t.return)&&e(t)}}function ZH(e){var t=Object.create(null);return function(a){return t[a]===void 0&&(t[a]=e(a)),t[a]}}var qoe=function(t,a,s){for(var r=0,i=0;r=i,i=wo(),r===38&&i===12&&(a[s]=1),!ap(i);)Lr();return sx(t,lr)},Voe=function(t,a){var s=-1,r=44;do switch(ap(r)){case 0:r===38&&wo()===12&&(a[s]=1),t[s]+=qoe(lr-1,a,s);break;case 2:t[s]+=Db(r);break;case 4:if(r===44){t[++s]=wo()===58?"&\f":"",a[s]=t[s].length;break}default:t[s]+=Gw(r)}while(r=Lr());return t},Yoe=function(t,a){return XH(Voe(KH(t),a))},xI=new WeakMap,Qoe=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var a=t.value,s=t.parent,r=t.column===s.column&&t.line===s.line;s.type!=="rule";)if(s=s.parent,!s)return;if(!(t.props.length===1&&a.charCodeAt(0)!==58&&!xI.get(s))&&!r){xI.set(t,!0);for(var i=[],o=Yoe(a,i),l=s.props,c=0,d=0;c<o.length;c++)for(var u=0;u<l.length;u++,d++)t.props[d]=i[c]?o[c].replace(/&\f/g,l[u]):l[u]+" "+o[c]}}},Koe=function(t){if(t.type==="decl"){var a=t.value;a.charCodeAt(0)===108&&a.charCodeAt(2)===98&&(t.return="",t.value="")}};function JH(e,t){switch(Poe(e,t)){case 5103:return jn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return jn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return jn+e+Jb+e+js+e+e;case 6828:case 4268:return jn+e+js+e+e;case 6165:return jn+e+js+"flex-"+e+e;case 5187:return jn+e+Cn(e,/(\w+).+(:[^]+)/,jn+"box-$1$2"+js+"flex-$1$2")+e;case 5443:return jn+e+js+"flex-item-"+Cn(e,/flex-|-self/,"")+e;case 4675:return jn+e+js+"flex-line-pack"+Cn(e,/align-content|flex-|-self/,"")+e;case 5548:return jn+e+js+Cn(e,"shrink","negative")+e;case 5292:return jn+e+js+Cn(e,"basis","preferred-size")+e;case 6060:return jn+"box-"+Cn(e,"-grow","")+jn+e+js+Cn(e,"grow","positive")+e;case 4554:return jn+Cn(e,/([^-])(transform)/g,"$1"+jn+"$2")+e;case 6187:return Cn(Cn(Cn(e,/(zoom-|grab)/,jn+"$1"),/(image-set)/,jn+"$1"),e,"")+e;case 5495:case 3959:return Cn(e,/(image-set\([^]*)/,jn+"$1$`$1");case 4968:return Cn(Cn(e,/(.+:)(flex-)?(.*)/,jn+"box-pack:$3"+js+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+jn+e+e;case 4095:case 3583:case 4068:case 2532:return Cn(e,/(.+)-inline(.+)/,jn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(uo(e)-1-t>6)switch(vs(e,t+1)){case 109:if(vs(e,t+4)!==45)break;case 102:return Cn(e,/(.+:)(.+)-([^]+)/,"$1"+jn+"$2-$3$1"+Jb+(vs(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~yT(e,"stretch")?JH(Cn(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(vs(e,t+1)!==115)break;case 6444:switch(vs(e,uo(e)-3-(~yT(e,"!important")&&10))){case 107:return Cn(e,":",":"+jn)+e;case 101:return Cn(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+jn+(vs(e,14)===45?"inline-":"")+"box$3$1"+jn+"$2$3$1"+js+"$2box$3")+e}break;case 5936:switch(vs(e,t+11)){case 114:return jn+e+js+Cn(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return jn+e+js+Cn(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return jn+e+js+Cn(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return jn+e+js+e+e}return e}var Xoe=function(t,a,s,r){if(t.length>-1&&!t.return)switch(t.type){case Yk:t.return=JH(t.value,t.length);break;case VH:return sf([Jh(t,{value:Cn(t.value,"@","@"+jn)})],r);case Vk:if(t.length)return Ooe(t.props,function(i){switch(Doe(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return sf([Jh(t,{props:[Cn(i,/:(read-\w+)/,":"+Jb+"$1")]})],r);case"::placeholder":return sf([Jh(t,{props:[Cn(i,/:(plac\w+)/,":"+jn+"input-$1")]}),Jh(t,{props:[Cn(i,/:(plac\w+)/,":"+Jb+"$1")]}),Jh(t,{props:[Cn(i,/:(plac\w+)/,js+"input-$1")]})],r)}return""})}},Zoe=[Xoe],Joe=function(t){var a=t.key;if(a==="css"){var s=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(s,function(N){var b=N.getAttribute("data-emotion");b.indexOf(" ")!==-1&&(document.head.appendChild(N),N.setAttribute("data-s",""))})}var r=t.stylisPlugins||Zoe,i={},o,l=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+a+' "]'),function(N){for(var b=N.getAttribute("data-emotion").split(" "),C=1;C<b.length;C++)i[b[C]]=!0;l.push(N)});var c,d=[Qoe,Koe];{var u,f=[Hoe,Woe(function(N){u.insert(N)})],p=Goe(d.concat(r,f)),x=function(b){return sf(Foe(b),p)};c=function(b,C,w,S){u=w,x(b?b+"{"+C.styles+"}":C.styles),S&&(v.inserted[C.name]=!0)}}var v={key:a,sheet:new Aoe({key:a,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:i,registered:{},insert:c};return v.sheet.hydrate(l),v},vS={exports:{}},Sn={};var yI;function ele(){if(yI)return Sn;yI=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,a=e?Symbol.for("react.portal"):60106,s=e?Symbol.for("react.fragment"):60107,r=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,l=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,d=e?Symbol.for("react.concurrent_mode"):60111,u=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,p=e?Symbol.for("react.suspense_list"):60120,x=e?Symbol.for("react.memo"):60115,v=e?Symbol.for("react.lazy"):60116,N=e?Symbol.for("react.block"):60121,b=e?Symbol.for("react.fundamental"):60117,C=e?Symbol.for("react.responder"):60118,w=e?Symbol.for("react.scope"):60119;function S(k){if(typeof k=="object"&&k!==null){var A=k.$$typeof;switch(A){case t:switch(k=k.type,k){case c:case d:case s:case i:case r:case f:return k;default:switch(k=k&&k.$$typeof,k){case l:case u:case v:case x:case o:return k;default:return A}}case a:return A}}}function E(k){return S(k)===d}return Sn.AsyncMode=c,Sn.ConcurrentMode=d,Sn.ContextConsumer=l,Sn.ContextProvider=o,Sn.Element=t,Sn.ForwardRef=u,Sn.Fragment=s,Sn.Lazy=v,Sn.Memo=x,Sn.Portal=a,Sn.Profiler=i,Sn.StrictMode=r,Sn.Suspense=f,Sn.isAsyncMode=function(k){return E(k)||S(k)===c},Sn.isConcurrentMode=E,Sn.isContextConsumer=function(k){return S(k)===l},Sn.isContextProvider=function(k){return S(k)===o},Sn.isElement=function(k){return typeof k=="object"&&k!==null&&k.$$typeof===t},Sn.isForwardRef=function(k){return S(k)===u},Sn.isFragment=function(k){return S(k)===s},Sn.isLazy=function(k){return S(k)===v},Sn.isMemo=function(k){return S(k)===x},Sn.isPortal=function(k){return S(k)===a},Sn.isProfiler=function(k){return S(k)===i},Sn.isStrictMode=function(k){return S(k)===r},Sn.isSuspense=function(k){return S(k)===f},Sn.isValidElementType=function(k){return typeof k=="string"||typeof k=="function"||k===s||k===d||k===i||k===r||k===f||k===p||typeof k=="object"&&k!==null&&(k.$$typeof===v||k.$$typeof===x||k.$$typeof===o||k.$$typeof===l||k.$$typeof===u||k.$$typeof===b||k.$$typeof===C||k.$$typeof===w||k.$$typeof===N)},Sn.typeOf=S,Sn}var bI;function tle(){return bI||(bI=1,vS.exports=ele()),vS.exports}var wS,vI;function nle(){if(vI)return wS;vI=1;var e=tle(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},r={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};i[e.ForwardRef]=s,i[e.Memo]=r;function o(v){return e.isMemo(v)?r:i[v.$$typeof]||t}var l=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;function x(v,N,b){if(typeof N!="string"){if(p){var C=f(N);C&&C!==p&&x(v,C,b)}var w=c(N);d&&(w=w.concat(d(N)));for(var S=o(v),E=o(N),k=0;k<w.length;++k){var A=w[k];if(!a[A]&&!(b&&b[A])&&!(E&&E[A])&&!(S&&S[A])){var T=u(N,A);try{l(v,A,T)}catch{}}}}return v}return wS=x,wS}nle();var ale=!0;function e9(e,t,a){var s="";return a.split(" ").forEach(function(r){e[r]!==void 0?t.push(e[r]+";"):r&&(s+=r+" ")}),s}var Kk=function(t,a,s){var r=t.key+"-"+a.name;(s===!1||ale===!1)&&t.registered[r]===void 0&&(t.registered[r]=a.styles)},t9=function(t,a,s){Kk(t,a,s);var r=t.key+"-"+a.name;if(t.inserted[a.name]===void 0){var i=a;do t.insert(a===i?"."+r:"",i,t.sheet,!0),i=i.next;while(i!==void 0)}};function sle(e){for(var t=0,a,s=0,r=e.length;r>=4;++s,r-=4)a=e.charCodeAt(s)&255|(e.charCodeAt(++s)&255)<<8|(e.charCodeAt(++s)&255)<<16|(e.charCodeAt(++s)&255)<<24,a=(a&65535)*1540483477+((a>>>16)*59797<<16),a^=a>>>24,t=(a&65535)*1540483477+((a>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(r){case 3:t^=(e.charCodeAt(s+2)&255)<<16;case 2:t^=(e.charCodeAt(s+1)&255)<<8;case 1:t^=e.charCodeAt(s)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var rle={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},ile=/[A-Z]|^ms/g,ole=/_EMO_([^_]+?)_([^]*?)_EMO_/g,n9=function(t){return t.charCodeAt(1)===45},wI=function(t){return t!=null&&typeof t!="boolean"},NS=ZH(function(e){return n9(e)?e:e.replace(ile,"-$&").toLowerCase()}),NI=function(t,a){switch(t){case"animation":case"animationName":if(typeof a=="string")return a.replace(ole,function(s,r,i){return mo={name:r,styles:i,next:mo},r})}return rle[t]!==1&&!n9(t)&&typeof a=="number"&&a!==0?a+"px":a};function sp(e,t,a){if(a==null)return"";var s=a;if(s.__emotion_styles!==void 0)return s;switch(typeof a){case"boolean":return"";case"object":{var r=a;if(r.anim===1)return mo={name:r.name,styles:r.styles,next:mo},r.name;var i=a;if(i.styles!==void 0){var o=i.next;if(o!==void 0)for(;o!==void 0;)mo={name:o.name,styles:o.styles,next:mo},o=o.next;var l=i.styles+";";return l}return lle(e,t,a)}case"function":{if(e!==void 0){var c=mo,d=a(e);return mo=c,sp(e,t,d)}break}}var u=a;if(t==null)return u;var f=t[u];return f!==void 0?f:u}function lle(e,t,a){var s="";if(Array.isArray(a))for(var r=0;r<a.length;r++)s+=sp(e,t,a[r])+";";else for(var i in a){var o=a[i];if(typeof o!="object"){var l=o;t!=null&&t[l]!==void 0?s+=i+"{"+t[l]+"}":wI(l)&&(s+=NS(i)+":"+NI(i,l)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&(t==null||t[o[0]]===void 0))for(var c=0;c<o.length;c++)wI(o[c])&&(s+=NS(i)+":"+NI(i,o[c])+";");else{var d=sp(e,t,o);switch(i){case"animation":case"animationName":{s+=NS(i)+":"+d+";";break}default:s+=i+"{"+d+"}"}}}return s}var jI=/label:\s*([^\s;{]+)\s*(;|$)/g,mo;function Vw(e,t,a){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var s=!0,r="";mo=void 0;var i=e[0];if(i==null||i.raw===void 0)s=!1,r+=sp(a,t,i);else{var o=i;r+=o[0]}for(var l=1;l<e.length;l++)if(r+=sp(a,t,e[l]),s){var c=i;r+=c[l]}jI.lastIndex=0;for(var d="",u;(u=jI.exec(r))!==null;)d+="-"+u[1];var f=sle(r)+d;return{name:f,styles:r,next:mo}}var cle=function(t){return t()},dle=pu.useInsertionEffect?pu.useInsertionEffect:!1,a9=dle||cle,s9=h.createContext(typeof HTMLElement<"u"?Joe({key:"css"}):null);s9.Provider;var r9=function(t){return h.forwardRef(function(a,s){var r=h.useContext(s9);return t(a,r,s)})},Xk=h.createContext({}),Zk={}.hasOwnProperty,vT="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",ule=function(t,a){var s={};for(var r in a)Zk.call(a,r)&&(s[r]=a[r]);return s[vT]=t,s},mle=function(t){var a=t.cache,s=t.serialized,r=t.isStringTag;return Kk(a,s,r),a9(function(){return t9(a,s,r)}),null},fle=r9(function(e,t,a){var s=e.css;typeof s=="string"&&t.registered[s]!==void 0&&(s=t.registered[s]);var r=e[vT],i=[s],o="";typeof e.className=="string"?o=e9(t.registered,i,e.className):e.className!=null&&(o=e.className+" ");var l=Vw(i,void 0,h.useContext(Xk));o+=t.key+"-"+l.name;var c={};for(var d in e)Zk.call(e,d)&&d!=="css"&&d!==vT&&(c[d]=e[d]);return c.className=o,a&&(c.ref=a),h.createElement(h.Fragment,null,h.createElement(mle,{cache:t,serialized:l,isStringTag:typeof r=="string"}),h.createElement(r,c))}),hle=fle,CI=function(t,a){var s=arguments;if(a==null||!Zk.call(a,"css"))return h.createElement.apply(void 0,s);var r=s.length,i=new Array(r);i[0]=hle,i[1]=ule(t,a);for(var o=2;o<r;o++)i[o]=s[o];return h.createElement.apply(null,i)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(CI||(CI={}));function Jk(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Vw(t)}function rx(){var e=Jk.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var gle=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,ple=ZH(function(e){return gle.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),xle=ple,yle=function(t){return t!=="theme"},SI=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?xle:yle},_I=function(t,a,s){var r;if(a){var i=a.shouldForwardProp;r=t.__emotion_forwardProp&&i?function(o){return t.__emotion_forwardProp(o)&&i(o)}:i}return typeof r!="function"&&s&&(r=t.__emotion_forwardProp),r},ble=function(t){var a=t.cache,s=t.serialized,r=t.isStringTag;return Kk(a,s,r),a9(function(){return t9(a,s,r)}),null},vle=function e(t,a){var s=t.__emotion_real===t,r=s&&t.__emotion_base||t,i,o;a!==void 0&&(i=a.label,o=a.target);var l=_I(t,a,s),c=l||SI(r),d=!c("as");return function(){var u=arguments,f=s&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(i!==void 0&&f.push("label:"+i+";"),u[0]==null||u[0].raw===void 0)f.push.apply(f,u);else{var p=u[0];f.push(p[0]);for(var x=u.length,v=1;v<x;v++)f.push(u[v],p[v])}var N=r9(function(b,C,w){var S=d&&b.as||r,E="",k=[],A=b;if(b.theme==null){A={};for(var T in b)A[T]=b[T];A.theme=h.useContext(Xk)}typeof b.className=="string"?E=e9(C.registered,k,b.className):b.className!=null&&(E=b.className+" ");var _=Vw(f.concat(k),C.registered,A);E+=C.key+"-"+_.name,o!==void 0&&(E+=" "+o);var I=d&&l===void 0?SI(S):c,R={};for(var U in b)d&&U==="as"||I(U)&&(R[U]=b[U]);return R.className=E,w&&(R.ref=w),h.createElement(h.Fragment,null,h.createElement(ble,{cache:C,serialized:_,isStringTag:typeof S=="string"}),h.createElement(S,R))});return N.displayName=i!==void 0?i:"Styled("+(typeof r=="string"?r:r.displayName||r.name||"Component")+")",N.defaultProps=t.defaultProps,N.__emotion_real=N,N.__emotion_base=r,N.__emotion_styles=f,N.__emotion_forwardProp=l,Object.defineProperty(N,"toString",{value:function(){return"."+o}}),N.withComponent=function(b,C){var w=e(b,qe({},a,C,{shouldForwardProp:_I(N,C,!0)}));return w.apply(void 0,f)},N}},wle=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],wT=vle.bind(null);wle.forEach(function(e){wT[e]=wT(e)});function Nle(e,t){return wT(e,t)}function jle(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const AI=[];function lu(e){return AI[0]=e,Vw(AI)}const Cle=e=>{const t=Object.keys(e).map(a=>({key:a,val:e[a]}))||[];return t.sort((a,s)=>a.val-s.val),t.reduce((a,s)=>({...a,[s.key]:s.val}),{})};function Sle(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:a="px",step:s=5,...r}=e,i=Cle(t),o=Object.keys(i);function l(p){return`@media (min-width:${typeof t[p]=="number"?t[p]:p}${a})`}function c(p){return`@media (max-width:${(typeof t[p]=="number"?t[p]:p)-s/100}${a})`}function d(p,x){const v=o.indexOf(x);return`@media (min-width:${typeof t[p]=="number"?t[p]:p}${a}) and (max-width:${(v!==-1&&typeof t[o[v]]=="number"?t[o[v]]:x)-s/100}${a})`}function u(p){return o.indexOf(p)+1<o.length?d(p,o[o.indexOf(p)+1]):l(p)}function f(p){const x=o.indexOf(p);return x===0?l(o[1]):x===o.length-1?c(o[x]):d(p,o[o.indexOf(p)+1]).replace("@media","@media not all and")}return{keys:o,values:i,up:l,down:c,between:d,only:u,not:f,unit:a,...r}}const _le={borderRadius:4};function i9(e=8,t=Wk({spacing:e})){if(e.mui)return e;const a=(...s)=>(s.length===0?[1]:s).map(i=>{const o=t(i);return typeof o=="number"?`${o}px`:o}).join(" ");return a.mui=!0,a}function Ale(e,t){const a=this;if(a.vars){if(!a.colorSchemes?.[e]||typeof a.getColorSchemeSelector!="function")return{};let s=a.getColorSchemeSelector(e);return s==="&"?t:((s.includes("data-")||s.includes("."))&&(s=`*:where(${s.replace(/\s*&$/,"")}) &`),{[s]:t})}return a.palette.mode===e?t:{}}function eL(e={},...t){const{breakpoints:a={},palette:s={},spacing:r,shape:i={},...o}=e,l=Sle(a),c=i9(r);let d=kr({breakpoints:l,direction:"ltr",components:{},palette:{mode:"light",...s},spacing:c,shape:{..._le,...i}},o);return d=Mie(d),d.applyStyles=Ale,d=t.reduce((u,f)=>kr(u,f),d),d.unstable_sxConfig={...ax,...o?.unstable_sxConfig},d.unstable_sx=function(f){return hf({sx:f,theme:this})},d}function Tle(e){return Object.keys(e).length===0}function o9(e=null){const t=h.useContext(Xk);return!t||Tle(t)?e:t}const Ele=eL();function l9(e=Ele){return o9(e)}const TI=e=>e,kle=()=>{let e=TI;return{configure(t){e=t},generate(t){return e(t)},reset(){e=TI}}},Lle=kle(),Ple={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Ra(e,t,a="Mui"){const s=Ple[t];return s?`${a}-${s}`:`${Lle.generate(e)}-${t}`}function va(e,t,a="Mui"){const s={};return t.forEach(r=>{s[r]=Ra(e,r,a)}),s}function c9(e){const{variants:t,...a}=e,s={variants:t,style:lu(a),isProcessed:!0};return s.style===a||t&&t.forEach(r=>{typeof r.style!="function"&&(r.style=lu(r.style))}),s}const Dle=eL();function Mb(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function Jd(e,t){return t&&e&&typeof e=="object"&&e.styles&&!e.styles.startsWith("@layer")&&(e.styles=`@layer ${t}{${String(e.styles)}}`),e}function Ole(e){return e?(t,a)=>a[e]:null}function Mle(e,t,a){e.theme=Rle(e.theme)?a:e.theme[t]||e.theme}function Ib(e,t,a){const s=typeof t=="function"?t(e):t;if(Array.isArray(s))return s.flatMap(r=>Ib(e,r,a));if(Array.isArray(s?.variants)){let r;if(s.isProcessed)r=a?Jd(s.style,a):s.style;else{const{variants:i,...o}=s;r=a?Jd(lu(o),a):o}return d9(e,s.variants,[r],a)}return s?.isProcessed?a?Jd(lu(s.style),a):s.style:a?Jd(lu(s),a):s}function d9(e,t,a=[],s=void 0){let r;e:for(let i=0;i<t.length;i+=1){const o=t[i];if(typeof o.props=="function"){if(r??={...e,...e.ownerState,ownerState:e.ownerState},!o.props(r))continue}else for(const l in o.props)if(e[l]!==o.props[l]&&e.ownerState?.[l]!==o.props[l])continue e;typeof o.style=="function"?(r??={...e,...e.ownerState,ownerState:e.ownerState},a.push(s?Jd(lu(o.style(r)),s):o.style(r))):a.push(s?Jd(lu(o.style),s):o.style)}return a}function Ile(e={}){const{themeId:t,defaultTheme:a=Dle,rootShouldForwardProp:s=Mb,slotShouldForwardProp:r=Mb}=e;function i(l){Mle(l,t,a)}return(l,c={})=>{jle(l,A=>A.filter(T=>T!==hf));const{name:d,slot:u,skipVariantsResolver:f,skipSx:p,overridesResolver:x=Ole(Ule(u)),...v}=c,N=d&&d.startsWith("Mui")||u?"components":"custom",b=f!==void 0?f:u&&u!=="Root"&&u!=="root"||!1,C=p||!1;let w=Mb;u==="Root"||u==="root"?w=s:u?w=r:zle(l)&&(w=void 0);const S=Nle(l,{shouldForwardProp:w,label:$le(),...v}),E=A=>{if(A.__emotion_real===A)return A;if(typeof A=="function")return function(_){return Ib(_,A,_.theme.modularCssLayers?N:void 0)};if(ho(A)){const T=c9(A);return function(I){return T.variants?Ib(I,T,I.theme.modularCssLayers?N:void 0):I.theme.modularCssLayers?Jd(T.style,N):T.style}}return A},k=(...A)=>{const T=[],_=A.map(E),I=[];if(T.push(i),d&&x&&I.push(function(M){const X=M.theme.components?.[d]?.styleOverrides;if(!X)return null;const z={};for(const Q in X)z[Q]=Ib(M,X[Q],M.theme.modularCssLayers?"theme":void 0);return x(M,z)}),d&&!b&&I.push(function(M){const X=M.theme?.components?.[d]?.variants;return X?d9(M,X,[],M.theme.modularCssLayers?"theme":void 0):null}),C||I.push(hf),Array.isArray(_[0])){const D=_.shift(),M=new Array(T.length).fill(""),W=new Array(I.length).fill("");let X;X=[...M,...D,...W],X.raw=[...M,...D.raw,...W],T.unshift(X)}const R=[...T,..._,...I],U=S(...R);return l.muiName&&(U.muiName=l.muiName),U};return S.withConfig&&(k.withConfig=S.withConfig),k}}function $le(e,t){return void 0}function Rle(e){for(const t in e)return!1;return!0}function zle(e){return typeof e=="string"&&e.charCodeAt(0)>96}function Ule(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}function Nu(e,t,a=!1){const s={...t};for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const i=r;if(i==="components"||i==="slots")s[i]={...e[i],...s[i]};else if(i==="componentsProps"||i==="slotProps"){const o=e[i],l=t[i];if(!l)s[i]=o||{};else if(!o)s[i]=l;else{s[i]={...l};for(const c in o)if(Object.prototype.hasOwnProperty.call(o,c)){const d=c;s[i][d]=Nu(o[d],l[d],a)}}}else i==="className"&&a&&t.className?s.className=kt(e?.className,t?.className):i==="style"&&a&&t.style?s.style={...e?.style,...t?.style}:s[i]===void 0&&(s[i]=e[i])}return s}function u9(e){const{theme:t,name:a,props:s}=e;return!t||!t.components||!t.components[a]||!t.components[a].defaultProps?s:Nu(t.components[a].defaultProps,s)}function Fle({props:e,name:t,defaultTheme:a,themeId:s}){let r=l9(a);return r=r[s]||r,u9({theme:r,name:t,props:e})}const Xa=typeof window<"u"?h.useLayoutEffect:h.useEffect;function Ble(e,t,a,s,r){const[i,o]=h.useState(()=>r&&a?a(e).matches:s?s(e).matches:t);return Xa(()=>{if(!a)return;const l=a(e),c=()=>{o(l.matches)};return c(),l.addEventListener("change",c),()=>{l.removeEventListener("change",c)}},[e,a]),i}const Hle={...pu},m9=Hle.useSyncExternalStore;function Gle(e,t,a,s,r){const i=h.useCallback(()=>t,[t]),o=h.useMemo(()=>{if(r&&a)return()=>a(e).matches;if(s!==null){const{matches:u}=s(e);return()=>u}return i},[i,e,s,r,a]),[l,c]=h.useMemo(()=>{if(a===null)return[i,()=>()=>{}];const u=a(e);return[()=>u.matches,f=>(u.addEventListener("change",f),()=>{u.removeEventListener("change",f)})]},[i,a,e]);return m9(c,l,o)}function f9(e={}){const{themeId:t}=e;return function(s,r={}){let i=o9();i&&t&&(i=i[t]||i);const o=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:l=!1,matchMedia:c=o?window.matchMedia:null,ssrMatchMedia:d=null,noSsr:u=!1}=u9({name:"MuiUseMediaQuery",props:r,theme:i});let f=typeof s=="function"?s(i):s;return f=f.replace(/^@media( ?)/m,""),f.includes("print")&&console.warn(["MUI: You have provided a `print` query to the `useMediaQuery` hook.","Using the print media query to modify print styles can lead to unexpected results.","Consider using the `displayPrint` field in the `sx` prop instead.","More information about `displayPrint` on our docs: https://mui.com/system/display/#display-in-print."].join(`
`)),(m9!==void 0?Gle:Ble)(f,l,c,d,u)}}f9();function Wle(e,t=Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,a))}function tL(e,t=0,a=1){return Wle(e,t,a)}function qle(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let a=e.match(t);return a&&a[0].length===1&&(a=a.map(s=>s+s)),a?`rgb${a.length===4?"a":""}(${a.map((s,r)=>r<3?parseInt(s,16):Math.round(parseInt(s,16)/255*1e3)/1e3).join(", ")})`:""}function ed(e){if(e.type)return e;if(e.charAt(0)==="#")return ed(qle(e));const t=e.indexOf("("),a=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(a))throw new Error(wu(9,e));let s=e.substring(t+1,e.length-1),r;if(a==="color"){if(s=s.split(" "),r=s.shift(),s.length===4&&s[3].charAt(0)==="/"&&(s[3]=s[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(r))throw new Error(wu(10,r))}else s=s.split(",");return s=s.map(i=>parseFloat(i)),{type:a,values:s,colorSpace:r}}const Vle=e=>{const t=ed(e);return t.values.slice(0,3).map((a,s)=>t.type.includes("hsl")&&s!==0?`${a}%`:a).join(" ")},_g=(e,t)=>{try{return Vle(e)}catch{return e}};function Yw(e){const{type:t,colorSpace:a}=e;let{values:s}=e;return t.includes("rgb")?s=s.map((r,i)=>i<3?parseInt(r,10):r):t.includes("hsl")&&(s[1]=`${s[1]}%`,s[2]=`${s[2]}%`),t.includes("color")?s=`${a} ${s.join(" ")}`:s=`${s.join(", ")}`,`${t}(${s})`}function h9(e){e=ed(e);const{values:t}=e,a=t[0],s=t[1]/100,r=t[2]/100,i=s*Math.min(r,1-r),o=(d,u=(d+a/30)%12)=>r-i*Math.max(Math.min(u-3,9-u,1),-1);let l="rgb";const c=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return e.type==="hsla"&&(l+="a",c.push(t[3])),Yw({type:l,values:c})}function NT(e){e=ed(e);let t=e.type==="hsl"||e.type==="hsla"?ed(h9(e)).values:e.values;return t=t.map(a=>(e.type!=="color"&&(a/=255),a<=.03928?a/12.92:((a+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function Yle(e,t){const a=NT(e),s=NT(t);return(Math.max(a,s)+.05)/(Math.min(a,s)+.05)}function g9(e,t){return e=ed(e),t=tL(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,Yw(e)}function Id(e,t,a){try{return g9(e,t)}catch{return e}}function Qw(e,t){if(e=ed(e),t=tL(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let a=0;a<3;a+=1)e.values[a]*=1-t;return Yw(e)}function En(e,t,a){try{return Qw(e,t)}catch{return e}}function Kw(e,t){if(e=ed(e),t=tL(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let a=0;a<3;a+=1)e.values[a]+=(255-e.values[a])*t;else if(e.type.includes("color"))for(let a=0;a<3;a+=1)e.values[a]+=(1-e.values[a])*t;return Yw(e)}function kn(e,t,a){try{return Kw(e,t)}catch{return e}}function Qle(e,t=.15){return NT(e)>.5?Qw(e,t):Kw(e,t)}function wy(e,t,a){try{return Qle(e,t)}catch{return e}}const Kle=h.createContext(),ix=()=>h.useContext(Kle)??!1,Xle=h.createContext(void 0);function Zle(e){const{theme:t,name:a,props:s}=e;if(!t||!t.components||!t.components[a])return s;const r=t.components[a];return r.defaultProps?Nu(r.defaultProps,s,t.components.mergeClassNameAndStyle):!r.styleOverrides&&!r.variants?Nu(r,s,t.components.mergeClassNameAndStyle):s}function Jle({props:e,name:t}){const a=h.useContext(Xle);return Zle({props:e,name:t,theme:{components:a}})}let EI=0;function ece(e){const[t,a]=h.useState(e),s=e||t;return h.useEffect(()=>{t==null&&(EI+=1,a(`mui-${EI}`))},[t]),s}const tce={...pu},kI=tce.useId;function Xw(e){if(kI!==void 0){const t=kI();return e??t}return ece(e)}const LI={theme:void 0};function nce(e){let t,a;return function(r){let i=t;return(i===void 0||r.theme!==a)&&(LI.theme=r.theme,i=c9(e(LI)),t=i,a=r.theme),i}}function ace(e=""){function t(...s){if(!s.length)return"";const r=s[0];return typeof r=="string"&&!r.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${r}${t(...s.slice(1))})`:`, ${r}`}return(s,...r)=>`var(--${e?`${e}-`:""}${s}${t(...r)})`}const PI=(e,t,a,s=[])=>{let r=e;t.forEach((i,o)=>{o===t.length-1?Array.isArray(r)?r[Number(i)]=a:r&&typeof r=="object"&&(r[i]=a):r&&typeof r=="object"&&(r[i]||(r[i]=s.includes(i)?[]:{}),r=r[i])})},sce=(e,t,a)=>{function s(r,i=[],o=[]){Object.entries(r).forEach(([l,c])=>{(!a||a&&!a([...i,l]))&&c!=null&&(typeof c=="object"&&Object.keys(c).length>0?s(c,[...i,l],Array.isArray(c)?[...o,l]:o):t([...i,l],c,o))})}s(e)},rce=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(s=>e.includes(s))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function jS(e,t){const{prefix:a,shouldSkipGeneratingVar:s}=t||{},r={},i={},o={};return sce(e,(l,c,d)=>{if((typeof c=="string"||typeof c=="number")&&(!s||!s(l,c))){const u=`--${a?`${a}-`:""}${l.join("-")}`,f=rce(l,c);Object.assign(r,{[u]:f}),PI(i,l,`var(${u})`,d),PI(o,l,`var(${u}, ${f})`,d)}},l=>l[0]==="vars"),{css:r,vars:i,varsWithDefaults:o}}function ice(e,t={}){const{getSelector:a=C,disableCssColorScheme:s,colorSchemeSelector:r,enableContrastVars:i}=t,{colorSchemes:o={},components:l,defaultColorScheme:c="light",...d}=e,{vars:u,css:f,varsWithDefaults:p}=jS(d,t);let x=p;const v={},{[c]:N,...b}=o;if(Object.entries(b||{}).forEach(([E,k])=>{const{vars:A,css:T,varsWithDefaults:_}=jS(k,t);x=kr(x,_),v[E]={css:T,vars:A}}),N){const{css:E,vars:k,varsWithDefaults:A}=jS(N,t);x=kr(x,A),v[c]={css:E,vars:k}}function C(E,k){let A=r;if(r==="class"&&(A=".%s"),r==="data"&&(A="[data-%s]"),r?.startsWith("data-")&&!r.includes("%s")&&(A=`[${r}="%s"]`),E){if(A==="media")return e.defaultColorScheme===E?":root":{[`@media (prefers-color-scheme: ${o[E]?.palette?.mode||E})`]:{":root":k}};if(A)return e.defaultColorScheme===E?`:root, ${A.replace("%s",String(E))}`:A.replace("%s",String(E))}return":root"}return{vars:x,generateThemeVars:()=>{let E={...u};return Object.entries(v).forEach(([,{vars:k}])=>{E=kr(E,k)}),E},generateStyleSheets:()=>{const E=[],k=e.defaultColorScheme||"light";function A(I,R){Object.keys(R).length&&E.push(typeof I=="string"?{[I]:{...R}}:I)}A(a(void 0,{...f}),f);const{[k]:T,..._}=v;if(T){const{css:I}=T,R=o[k]?.palette?.mode,U=!s&&R?{colorScheme:R,...I}:{...I};A(a(k,{...U}),U)}return Object.entries(_).forEach(([I,{css:R}])=>{const U=o[I]?.palette?.mode,D=!s&&U?{colorScheme:U,...R}:{...R};A(a(I,{...D}),D)}),i&&E.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),E}}}function oce(e){return function(a){return e==="media"?`@media (prefers-color-scheme: ${a})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${a}"] &`:e==="class"?`.${a} &`:e==="data"?`[data-${a}] &`:`${e.replace("%s",a)} &`:"&"}}const rp={black:"#000",white:"#fff"},lce={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},km={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},Lm={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},eg={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},Pm={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},Dm={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Om={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function p9(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:rp.white,default:rp.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const x9=p9();function y9(){return{text:{primary:rp.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:rp.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const jT=y9();function DI(e,t,a,s){const r=s.light||s,i=s.dark||s*1.5;e[t]||(e.hasOwnProperty(a)?e[t]=e[a]:t==="light"?e.light=Kw(e.main,r):t==="dark"&&(e.dark=Qw(e.main,i)))}function OI(e,t,a,s,r){const i=r.light||r,o=r.dark||r*1.5;t[a]||(t.hasOwnProperty(s)?t[a]=t[s]:a==="light"?t.light=`color-mix(in ${e}, ${t.main}, #fff ${(i*100).toFixed(0)}%)`:a==="dark"&&(t.dark=`color-mix(in ${e}, ${t.main}, #000 ${(o*100).toFixed(0)}%)`))}function cce(e="light"){return e==="dark"?{main:Pm[200],light:Pm[50],dark:Pm[400]}:{main:Pm[700],light:Pm[400],dark:Pm[800]}}function dce(e="light"){return e==="dark"?{main:km[200],light:km[50],dark:km[400]}:{main:km[500],light:km[300],dark:km[700]}}function uce(e="light"){return e==="dark"?{main:Lm[500],light:Lm[300],dark:Lm[700]}:{main:Lm[700],light:Lm[400],dark:Lm[800]}}function mce(e="light"){return e==="dark"?{main:Dm[400],light:Dm[300],dark:Dm[700]}:{main:Dm[700],light:Dm[500],dark:Dm[900]}}function fce(e="light"){return e==="dark"?{main:Om[400],light:Om[300],dark:Om[700]}:{main:Om[800],light:Om[500],dark:Om[900]}}function hce(e="light"){return e==="dark"?{main:eg[400],light:eg[300],dark:eg[700]}:{main:"#ed6c02",light:eg[500],dark:eg[900]}}function gce(e){return`oklch(from ${e} var(--__l) 0 h / var(--__a))`}function nL(e){const{mode:t="light",contrastThreshold:a=3,tonalOffset:s=.2,colorSpace:r,...i}=e,o=e.primary||cce(t),l=e.secondary||dce(t),c=e.error||uce(t),d=e.info||mce(t),u=e.success||fce(t),f=e.warning||hce(t);function p(b){return r?gce(b):Yle(b,jT.text.primary)>=a?jT.text.primary:x9.text.primary}const x=({color:b,name:C,mainShade:w=500,lightShade:S=300,darkShade:E=700})=>{if(b={...b},!b.main&&b[w]&&(b.main=b[w]),!b.hasOwnProperty("main"))throw new Error(wu(11,C?` (${C})`:"",w));if(typeof b.main!="string")throw new Error(wu(12,C?` (${C})`:"",JSON.stringify(b.main)));return r?(OI(r,b,"light",S,s),OI(r,b,"dark",E,s)):(DI(b,"light",S,s),DI(b,"dark",E,s)),b.contrastText||(b.contrastText=p(b.main)),b};let v;return t==="light"?v=p9():t==="dark"&&(v=y9()),kr({common:{...rp},mode:t,primary:x({color:o,name:"primary"}),secondary:x({color:l,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:x({color:c,name:"error"}),warning:x({color:f,name:"warning"}),info:x({color:d,name:"info"}),success:x({color:u,name:"success"}),grey:lce,contrastThreshold:a,getContrastText:p,augmentColor:x,tonalOffset:s,...v},i)}function pce(e){const t={};return Object.entries(e).forEach(s=>{const[r,i]=s;typeof i=="object"&&(t[r]=`${i.fontStyle?`${i.fontStyle} `:""}${i.fontVariant?`${i.fontVariant} `:""}${i.fontWeight?`${i.fontWeight} `:""}${i.fontStretch?`${i.fontStretch} `:""}${i.fontSize||""}${i.lineHeight?`/${i.lineHeight} `:""}${i.fontFamily||""}`)}),t}function xce(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function yce(e){return Math.round(e*1e5)/1e5}const MI={textTransform:"uppercase"},II='"Roboto", "Helvetica", "Arial", sans-serif';function bce(e,t){const{fontFamily:a=II,fontSize:s=14,fontWeightLight:r=300,fontWeightRegular:i=400,fontWeightMedium:o=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:d,pxToRem:u,...f}=typeof t=="function"?t(e):t,p=s/14,x=u||(b=>`${b/c*p}rem`),v=(b,C,w,S,E)=>({fontFamily:a,fontWeight:b,fontSize:x(C),lineHeight:w,...a===II?{letterSpacing:`${yce(S/C)}em`}:{},...E,...d}),N={h1:v(r,96,1.167,-1.5),h2:v(r,60,1.2,-.5),h3:v(i,48,1.167,0),h4:v(i,34,1.235,.25),h5:v(i,24,1.334,0),h6:v(o,20,1.6,.15),subtitle1:v(i,16,1.75,.15),subtitle2:v(o,14,1.57,.1),body1:v(i,16,1.5,.15),body2:v(i,14,1.43,.15),button:v(o,14,1.75,.4,MI),caption:v(i,12,1.66,.4),overline:v(i,12,2.66,1,MI),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return kr({htmlFontSize:c,pxToRem:x,fontFamily:a,fontSize:s,fontWeightLight:r,fontWeightRegular:i,fontWeightMedium:o,fontWeightBold:l,...N},f,{clone:!1})}const vce=.2,wce=.14,Nce=.12;function ea(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${vce})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${wce})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${Nce})`].join(",")}const jce=["none",ea(0,2,1,-1,0,1,1,0,0,1,3,0),ea(0,3,1,-2,0,2,2,0,0,1,5,0),ea(0,3,3,-2,0,3,4,0,0,1,8,0),ea(0,2,4,-1,0,4,5,0,0,1,10,0),ea(0,3,5,-1,0,5,8,0,0,1,14,0),ea(0,3,5,-1,0,6,10,0,0,1,18,0),ea(0,4,5,-2,0,7,10,1,0,2,16,1),ea(0,5,5,-3,0,8,10,1,0,3,14,2),ea(0,5,6,-3,0,9,12,1,0,3,16,2),ea(0,6,6,-3,0,10,14,1,0,4,18,3),ea(0,6,7,-4,0,11,15,1,0,4,20,3),ea(0,7,8,-4,0,12,17,2,0,5,22,4),ea(0,7,8,-4,0,13,19,2,0,5,24,4),ea(0,7,9,-4,0,14,21,2,0,5,26,4),ea(0,8,9,-5,0,15,22,2,0,6,28,5),ea(0,8,10,-5,0,16,24,2,0,6,30,5),ea(0,8,11,-5,0,17,26,2,0,6,32,5),ea(0,9,11,-5,0,18,28,2,0,7,34,6),ea(0,9,12,-6,0,19,29,2,0,7,36,6),ea(0,10,13,-6,0,20,31,3,0,8,38,7),ea(0,10,13,-6,0,21,33,3,0,8,40,7),ea(0,10,14,-6,0,22,35,3,0,8,42,7),ea(0,11,14,-7,0,23,36,3,0,9,44,8),ea(0,11,15,-7,0,24,38,3,0,9,46,8)],Cce={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Sce={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function $I(e){return`${Math.round(e)}ms`}function _ce(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function Ace(e){const t={...Cce,...e.easing},a={...Sce,...e.duration};return{getAutoHeightDuration:_ce,create:(r=["all"],i={})=>{const{duration:o=a.standard,easing:l=t.easeInOut,delay:c=0,...d}=i;return(Array.isArray(r)?r:[r]).map(u=>`${u} ${typeof o=="string"?o:$I(o)} ${l} ${typeof c=="string"?c:$I(c)}`).join(",")},...e,easing:t,duration:a}}const Tce={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function Ece(e){return ho(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function b9(e={}){const t={...e};function a(s){const r=Object.entries(s);for(let i=0;i<r.length;i++){const[o,l]=r[i];!Ece(l)||o.startsWith("unstable_")?delete s[o]:ho(l)&&(s[o]={...l},a(s[o]))}}return a(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function RI(e){return typeof e=="number"?`${(e*100).toFixed(0)}%`:`calc((${e}) * 100%)`}const kce=e=>{if(!Number.isNaN(+e))return+e;const t=e.match(/\d*\.?\d+/g);if(!t)return 0;let a=0;for(let s=0;s<t.length;s+=1)a+=+t[s];return a};function Lce(e){Object.assign(e,{alpha(t,a){const s=this||e;return s.colorSpace?`oklch(from ${t} l c h / ${typeof a=="string"?`calc(${a})`:a})`:s.vars?`rgba(${t.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${typeof a=="string"?`calc(${a})`:a})`:g9(t,kce(a))},lighten(t,a){const s=this||e;return s.colorSpace?`color-mix(in ${s.colorSpace}, ${t}, #fff ${RI(a)})`:Kw(t,a)},darken(t,a){const s=this||e;return s.colorSpace?`color-mix(in ${s.colorSpace}, ${t}, #000 ${RI(a)})`:Qw(t,a)}})}function CT(e={},...t){const{breakpoints:a,mixins:s={},spacing:r,palette:i={},transitions:o={},typography:l={},shape:c,colorSpace:d,...u}=e;if(e.vars&&e.generateThemeVars===void 0)throw new Error(wu(20));const f=nL({...i,colorSpace:d}),p=eL(e);let x=kr(p,{mixins:xce(p.breakpoints,s),palette:f,shadows:jce.slice(),typography:bce(f,l),transitions:Ace(o),zIndex:{...Tce}});return x=kr(x,u),x=t.reduce((v,N)=>kr(v,N),x),x.unstable_sxConfig={...ax,...u?.unstable_sxConfig},x.unstable_sx=function(N){return hf({sx:N,theme:this})},x.toRuntimeSource=b9,Lce(x),x}function Pce(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const Dce=[...Array(25)].map((e,t)=>{if(t===0)return"none";const a=Pce(t);return`linear-gradient(rgba(255 255 255 / ${a}), rgba(255 255 255 / ${a}))`});function v9(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function w9(e){return e==="dark"?Dce:[]}function Oce(e){const{palette:t={mode:"light"},opacity:a,overlays:s,colorSpace:r,...i}=e,o=nL({...t,colorSpace:r});return{palette:o,opacity:{...v9(o.mode),...a},overlays:s||w9(o.mode),...i}}function Mce(e){return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!e[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const Ice=e=>[...[...Array(25)].map((t,a)=>`--${e?`${e}-`:""}overlays-${a}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],$ce=e=>(t,a)=>{const s=e.rootSelector||":root",r=e.colorSchemeSelector;let i=r;if(r==="class"&&(i=".%s"),r==="data"&&(i="[data-%s]"),r?.startsWith("data-")&&!r.includes("%s")&&(i=`[${r}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const o={};return Ice(e.cssVarPrefix).forEach(l=>{o[l]=a[l],delete a[l]}),i==="media"?{[s]:a,"@media (prefers-color-scheme: dark)":{[s]:o}}:i?{[i.replace("%s",t)]:o,[`${s}, ${i.replace("%s",t)}`]:a}:{[s]:{...a,...o}}}if(i&&i!=="media")return`${s}, ${i.replace("%s",String(t))}`}else if(t){if(i==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[s]:a}};if(i)return i.replace("%s",String(t))}return s};function Rce(e,t){t.forEach(a=>{e[a]||(e[a]={})})}function dt(e,t,a){!e[t]&&a&&(e[t]=a)}function Ag(e){return typeof e!="string"||!e.startsWith("hsl")?e:h9(e)}function al(e,t){`${t}Channel`in e||(e[`${t}Channel`]=_g(Ag(e[t])))}function zce(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const Xi=e=>{try{return e()}catch{}},Uce=(e="mui")=>ace(e);function CS(e,t,a,s,r){if(!a)return;a=a===!0?{}:a;const i=r==="dark"?"dark":"light";if(!s){t[r]=Oce({...a,palette:{mode:i,...a?.palette},colorSpace:e});return}const{palette:o,...l}=CT({...s,palette:{mode:i,...a?.palette},colorSpace:e});return t[r]={...a,palette:o,opacity:{...v9(i),...a?.opacity},overlays:a?.overlays||w9(i)},l}function Fce(e={},...t){const{colorSchemes:a={light:!0},defaultColorScheme:s,disableCssColorScheme:r=!1,cssVarPrefix:i="mui",nativeColor:o=!1,shouldSkipGeneratingVar:l=Mce,colorSchemeSelector:c=a.light&&a.dark?"media":void 0,rootSelector:d=":root",...u}=e,f=Object.keys(a)[0],p=s||(a.light&&f!=="light"?"light":f),x=Uce(i),{[p]:v,light:N,dark:b,...C}=a,w={...C};let S=v;if((p==="dark"&&!("dark"in a)||p==="light"&&!("light"in a))&&(S=!0),!S)throw new Error(wu(21,p));let E;o&&(E="oklch");const k=CS(E,w,S,u,p);N&&!w.light&&CS(E,w,N,void 0,"light"),b&&!w.dark&&CS(E,w,b,void 0,"dark");let A={defaultColorScheme:p,...k,cssVarPrefix:i,colorSchemeSelector:c,rootSelector:d,getCssVar:x,colorSchemes:w,font:{...pce(k.typography),...k.font},spacing:zce(u.spacing)};Object.keys(A.colorSchemes).forEach(U=>{const D=A.colorSchemes[U].palette,M=X=>{const z=X.split("-"),Q=z[1],de=z[2];return x(X,D[Q][de])};D.mode==="light"&&(dt(D.common,"background","#fff"),dt(D.common,"onBackground","#000")),D.mode==="dark"&&(dt(D.common,"background","#000"),dt(D.common,"onBackground","#fff"));function W(X,z,Q){if(E){let de;return X===Id&&(de=`transparent ${((1-Q)*100).toFixed(0)}%`),X===En&&(de=`#000 ${(Q*100).toFixed(0)}%`),X===kn&&(de=`#fff ${(Q*100).toFixed(0)}%`),`color-mix(in ${E}, ${z}, ${de})`}return X(z,Q)}if(Rce(D,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),D.mode==="light"){dt(D.Alert,"errorColor",W(En,D.error.light,.6)),dt(D.Alert,"infoColor",W(En,D.info.light,.6)),dt(D.Alert,"successColor",W(En,D.success.light,.6)),dt(D.Alert,"warningColor",W(En,D.warning.light,.6)),dt(D.Alert,"errorFilledBg",M("palette-error-main")),dt(D.Alert,"infoFilledBg",M("palette-info-main")),dt(D.Alert,"successFilledBg",M("palette-success-main")),dt(D.Alert,"warningFilledBg",M("palette-warning-main")),dt(D.Alert,"errorFilledColor",Xi(()=>D.getContrastText(D.error.main))),dt(D.Alert,"infoFilledColor",Xi(()=>D.getContrastText(D.info.main))),dt(D.Alert,"successFilledColor",Xi(()=>D.getContrastText(D.success.main))),dt(D.Alert,"warningFilledColor",Xi(()=>D.getContrastText(D.warning.main))),dt(D.Alert,"errorStandardBg",W(kn,D.error.light,.9)),dt(D.Alert,"infoStandardBg",W(kn,D.info.light,.9)),dt(D.Alert,"successStandardBg",W(kn,D.success.light,.9)),dt(D.Alert,"warningStandardBg",W(kn,D.warning.light,.9)),dt(D.Alert,"errorIconColor",M("palette-error-main")),dt(D.Alert,"infoIconColor",M("palette-info-main")),dt(D.Alert,"successIconColor",M("palette-success-main")),dt(D.Alert,"warningIconColor",M("palette-warning-main")),dt(D.AppBar,"defaultBg",M("palette-grey-100")),dt(D.Avatar,"defaultBg",M("palette-grey-400")),dt(D.Button,"inheritContainedBg",M("palette-grey-300")),dt(D.Button,"inheritContainedHoverBg",M("palette-grey-A100")),dt(D.Chip,"defaultBorder",M("palette-grey-400")),dt(D.Chip,"defaultAvatarColor",M("palette-grey-700")),dt(D.Chip,"defaultIconColor",M("palette-grey-700")),dt(D.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),dt(D.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),dt(D.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),dt(D.LinearProgress,"primaryBg",W(kn,D.primary.main,.62)),dt(D.LinearProgress,"secondaryBg",W(kn,D.secondary.main,.62)),dt(D.LinearProgress,"errorBg",W(kn,D.error.main,.62)),dt(D.LinearProgress,"infoBg",W(kn,D.info.main,.62)),dt(D.LinearProgress,"successBg",W(kn,D.success.main,.62)),dt(D.LinearProgress,"warningBg",W(kn,D.warning.main,.62)),dt(D.Skeleton,"bg",E?W(Id,D.text.primary,.11):`rgba(${M("palette-text-primaryChannel")} / 0.11)`),dt(D.Slider,"primaryTrack",W(kn,D.primary.main,.62)),dt(D.Slider,"secondaryTrack",W(kn,D.secondary.main,.62)),dt(D.Slider,"errorTrack",W(kn,D.error.main,.62)),dt(D.Slider,"infoTrack",W(kn,D.info.main,.62)),dt(D.Slider,"successTrack",W(kn,D.success.main,.62)),dt(D.Slider,"warningTrack",W(kn,D.warning.main,.62));const X=E?W(En,D.background.default,.6825):wy(D.background.default,.8);dt(D.SnackbarContent,"bg",X),dt(D.SnackbarContent,"color",Xi(()=>E?jT.text.primary:D.getContrastText(X))),dt(D.SpeedDialAction,"fabHoverBg",wy(D.background.paper,.15)),dt(D.StepConnector,"border",M("palette-grey-400")),dt(D.StepContent,"border",M("palette-grey-400")),dt(D.Switch,"defaultColor",M("palette-common-white")),dt(D.Switch,"defaultDisabledColor",M("palette-grey-100")),dt(D.Switch,"primaryDisabledColor",W(kn,D.primary.main,.62)),dt(D.Switch,"secondaryDisabledColor",W(kn,D.secondary.main,.62)),dt(D.Switch,"errorDisabledColor",W(kn,D.error.main,.62)),dt(D.Switch,"infoDisabledColor",W(kn,D.info.main,.62)),dt(D.Switch,"successDisabledColor",W(kn,D.success.main,.62)),dt(D.Switch,"warningDisabledColor",W(kn,D.warning.main,.62)),dt(D.TableCell,"border",W(kn,W(Id,D.divider,1),.88)),dt(D.Tooltip,"bg",W(Id,D.grey[700],.92))}if(D.mode==="dark"){dt(D.Alert,"errorColor",W(kn,D.error.light,.6)),dt(D.Alert,"infoColor",W(kn,D.info.light,.6)),dt(D.Alert,"successColor",W(kn,D.success.light,.6)),dt(D.Alert,"warningColor",W(kn,D.warning.light,.6)),dt(D.Alert,"errorFilledBg",M("palette-error-dark")),dt(D.Alert,"infoFilledBg",M("palette-info-dark")),dt(D.Alert,"successFilledBg",M("palette-success-dark")),dt(D.Alert,"warningFilledBg",M("palette-warning-dark")),dt(D.Alert,"errorFilledColor",Xi(()=>D.getContrastText(D.error.dark))),dt(D.Alert,"infoFilledColor",Xi(()=>D.getContrastText(D.info.dark))),dt(D.Alert,"successFilledColor",Xi(()=>D.getContrastText(D.success.dark))),dt(D.Alert,"warningFilledColor",Xi(()=>D.getContrastText(D.warning.dark))),dt(D.Alert,"errorStandardBg",W(En,D.error.light,.9)),dt(D.Alert,"infoStandardBg",W(En,D.info.light,.9)),dt(D.Alert,"successStandardBg",W(En,D.success.light,.9)),dt(D.Alert,"warningStandardBg",W(En,D.warning.light,.9)),dt(D.Alert,"errorIconColor",M("palette-error-main")),dt(D.Alert,"infoIconColor",M("palette-info-main")),dt(D.Alert,"successIconColor",M("palette-success-main")),dt(D.Alert,"warningIconColor",M("palette-warning-main")),dt(D.AppBar,"defaultBg",M("palette-grey-900")),dt(D.AppBar,"darkBg",M("palette-background-paper")),dt(D.AppBar,"darkColor",M("palette-text-primary")),dt(D.Avatar,"defaultBg",M("palette-grey-600")),dt(D.Button,"inheritContainedBg",M("palette-grey-800")),dt(D.Button,"inheritContainedHoverBg",M("palette-grey-700")),dt(D.Chip,"defaultBorder",M("palette-grey-700")),dt(D.Chip,"defaultAvatarColor",M("palette-grey-300")),dt(D.Chip,"defaultIconColor",M("palette-grey-300")),dt(D.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),dt(D.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),dt(D.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),dt(D.LinearProgress,"primaryBg",W(En,D.primary.main,.5)),dt(D.LinearProgress,"secondaryBg",W(En,D.secondary.main,.5)),dt(D.LinearProgress,"errorBg",W(En,D.error.main,.5)),dt(D.LinearProgress,"infoBg",W(En,D.info.main,.5)),dt(D.LinearProgress,"successBg",W(En,D.success.main,.5)),dt(D.LinearProgress,"warningBg",W(En,D.warning.main,.5)),dt(D.Skeleton,"bg",E?W(Id,D.text.primary,.13):`rgba(${M("palette-text-primaryChannel")} / 0.13)`),dt(D.Slider,"primaryTrack",W(En,D.primary.main,.5)),dt(D.Slider,"secondaryTrack",W(En,D.secondary.main,.5)),dt(D.Slider,"errorTrack",W(En,D.error.main,.5)),dt(D.Slider,"infoTrack",W(En,D.info.main,.5)),dt(D.Slider,"successTrack",W(En,D.success.main,.5)),dt(D.Slider,"warningTrack",W(En,D.warning.main,.5));const X=E?W(kn,D.background.default,.985):wy(D.background.default,.98);dt(D.SnackbarContent,"bg",X),dt(D.SnackbarContent,"color",Xi(()=>E?x9.text.primary:D.getContrastText(X))),dt(D.SpeedDialAction,"fabHoverBg",wy(D.background.paper,.15)),dt(D.StepConnector,"border",M("palette-grey-600")),dt(D.StepContent,"border",M("palette-grey-600")),dt(D.Switch,"defaultColor",M("palette-grey-300")),dt(D.Switch,"defaultDisabledColor",M("palette-grey-600")),dt(D.Switch,"primaryDisabledColor",W(En,D.primary.main,.55)),dt(D.Switch,"secondaryDisabledColor",W(En,D.secondary.main,.55)),dt(D.Switch,"errorDisabledColor",W(En,D.error.main,.55)),dt(D.Switch,"infoDisabledColor",W(En,D.info.main,.55)),dt(D.Switch,"successDisabledColor",W(En,D.success.main,.55)),dt(D.Switch,"warningDisabledColor",W(En,D.warning.main,.55)),dt(D.TableCell,"border",W(En,W(Id,D.divider,1),.68)),dt(D.Tooltip,"bg",W(Id,D.grey[700],.92))}al(D.background,"default"),al(D.background,"paper"),al(D.common,"background"),al(D.common,"onBackground"),al(D,"divider"),Object.keys(D).forEach(X=>{const z=D[X];X!=="tonalOffset"&&z&&typeof z=="object"&&(z.main&&dt(D[X],"mainChannel",_g(Ag(z.main))),z.light&&dt(D[X],"lightChannel",_g(Ag(z.light))),z.dark&&dt(D[X],"darkChannel",_g(Ag(z.dark))),z.contrastText&&dt(D[X],"contrastTextChannel",_g(Ag(z.contrastText))),X==="text"&&(al(D[X],"primary"),al(D[X],"secondary")),X==="action"&&(z.active&&al(D[X],"active"),z.selected&&al(D[X],"selected")))})}),A=t.reduce((U,D)=>kr(U,D),A);const T={prefix:i,disableCssColorScheme:r,shouldSkipGeneratingVar:l,getSelector:$ce(A),enableContrastVars:o},{vars:_,generateThemeVars:I,generateStyleSheets:R}=ice(A,T);return A.vars=_,Object.entries(A.colorSchemes[A.defaultColorScheme]).forEach(([U,D])=>{A[U]=D}),A.generateThemeVars=I,A.generateStyleSheets=R,A.generateSpacing=function(){return i9(u.spacing,Wk(this))},A.getColorSchemeSelector=oce(c),A.spacing=A.generateSpacing(),A.shouldSkipGeneratingVar=l,A.unstable_sxConfig={...ax,...u?.unstable_sxConfig},A.unstable_sx=function(D){return hf({sx:D,theme:this})},A.toRuntimeSource=b9,A}function zI(e,t,a){e.colorSchemes&&a&&(e.colorSchemes[t]={...a!==!0&&a,palette:nL({...a===!0?{}:a.palette,mode:t})})}function Bce(e={},...t){const{palette:a,cssVariables:s=!1,colorSchemes:r=a?void 0:{light:!0},defaultColorScheme:i=a?.mode,...o}=e,l=i||"light",c=r?.[l],d={...r,...a?{[l]:{...typeof c!="boolean"&&c,palette:a}}:void 0};if(s===!1){if(!("colorSchemes"in e))return CT(e,...t);let u=a;"palette"in e||d[l]&&(d[l]!==!0?u=d[l].palette:l==="dark"&&(u={mode:"dark"}));const f=CT({...e,palette:u},...t);return f.defaultColorScheme=l,f.colorSchemes=d,f.palette.mode==="light"&&(f.colorSchemes.light={...d.light!==!0&&d.light,palette:f.palette},zI(f,"dark",d.dark)),f.palette.mode==="dark"&&(f.colorSchemes.dark={...d.dark!==!0&&d.dark,palette:f.palette},zI(f,"light",d.light)),f}return!a&&!("light"in d)&&l==="light"&&(d.light=!0),Fce({...o,colorSchemes:d,defaultColorScheme:l,...typeof s!="boolean"&&s},...t)}const aL=Bce(),Zw="$$material";function Mo(){const e=l9(aL);return e[Zw]||e}function Hce(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const N9=e=>Hce(e)&&e!=="classes",sn=Ile({themeId:Zw,defaultTheme:aL,rootShouldForwardProp:N9});function Gce(){return Coe}function ud(e){return Jle(e)}function Eo(...e){const t=h.useRef(void 0),a=h.useCallback(s=>{const r=e.map(i=>{if(i==null)return null;if(typeof i=="function"){const o=i,l=o(s);return typeof l=="function"?l:()=>{o(null)}}return i.current=s,()=>{i.current=null}});return()=>{r.forEach(i=>i?.())}},e);return h.useMemo(()=>e.every(s=>s==null)?null:s=>{t.current&&(t.current(),t.current=void 0),s!=null&&(t.current=a(s))},e)}function Wce(e){return typeof e=="string"}function j9(e,t,a){return e===void 0||Wce(e)?t:{...t,ownerState:{...t.ownerState,...a}}}function C9(e,t,a){return typeof e=="function"?e(t,a):e}function qce(e,t=[]){if(e===void 0)return{};const a={};return Object.keys(e).filter(s=>s.match(/^on[A-Z]/)&&typeof e[s]=="function"&&!t.includes(s)).forEach(s=>{a[s]=e[s]}),a}function UI(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(a=>!(a.match(/^on[A-Z]/)&&typeof e[a]=="function")).forEach(a=>{t[a]=e[a]}),t}function S9(e){const{getSlotProps:t,additionalProps:a,externalSlotProps:s,externalForwardedProps:r,className:i}=e;if(!t){const x=kt(a?.className,i,r?.className,s?.className),v={...a?.style,...r?.style,...s?.style},N={...a,...r,...s};return x.length>0&&(N.className=x),Object.keys(v).length>0&&(N.style=v),{props:N,internalRef:void 0}}const o=qce({...r,...s}),l=UI(s),c=UI(r),d=t(o),u=kt(d?.className,a?.className,i,r?.className,s?.className),f={...d?.style,...a?.style,...r?.style,...s?.style},p={...d,...a,...c,...l};return u.length>0&&(p.className=u),Object.keys(f).length>0&&(p.style=f),{props:p,internalRef:d.ref}}function FI(e,t){const{className:a,elementType:s,ownerState:r,externalForwardedProps:i,internalForwardedProps:o,shouldForwardComponentProp:l=!1,...c}=t,{component:d,slots:u={[e]:void 0},slotProps:f={[e]:void 0},...p}=i,x=u[e]||s,v=C9(f[e],r),{props:{component:N,...b},internalRef:C}=S9({className:a,...c,externalForwardedProps:e==="root"?p:void 0,externalSlotProps:v}),w=Eo(C,v?.ref,t.ref),S=e==="root"?N||d:N,E=j9(x,{...e==="root"&&!d&&!u[e]&&o,...e!=="root"&&!u[e]&&o,...b,...S&&!l&&{as:S},...S&&l&&{component:S},ref:w},r);return[x,E]}function dn(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function ST(e,t){return ST=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},ST(e,t)}function _9(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,ST(e,t)}const BI={disabled:!1},ev=pt.createContext(null);var Vce=function(t){return t.scrollTop},Tg="unmounted",Fd="exited",Bd="entering",Ym="entered",_T="exiting",Gl=(function(e){_9(t,e);function t(s,r){var i;i=e.call(this,s,r)||this;var o=r,l=o&&!o.isMounting?s.enter:s.appear,c;return i.appearStatus=null,s.in?l?(c=Fd,i.appearStatus=Bd):c=Ym:s.unmountOnExit||s.mountOnEnter?c=Tg:c=Fd,i.state={status:c},i.nextCallback=null,i}t.getDerivedStateFromProps=function(r,i){var o=r.in;return o&&i.status===Tg?{status:Fd}:null};var a=t.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(r){var i=null;if(r!==this.props){var o=this.state.status;this.props.in?o!==Bd&&o!==Ym&&(i=Bd):(o===Bd||o===Ym)&&(i=_T)}this.updateStatus(!1,i)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var r=this.props.timeout,i,o,l;return i=o=l=r,r!=null&&typeof r!="number"&&(i=r.exit,o=r.enter,l=r.appear!==void 0?r.appear:o),{exit:i,enter:o,appear:l}},a.updateStatus=function(r,i){if(r===void 0&&(r=!1),i!==null)if(this.cancelNextCallback(),i===Bd){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:xy.findDOMNode(this);o&&Vce(o)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Fd&&this.setState({status:Tg})},a.performEnter=function(r){var i=this,o=this.props.enter,l=this.context?this.context.isMounting:r,c=this.props.nodeRef?[l]:[xy.findDOMNode(this),l],d=c[0],u=c[1],f=this.getTimeouts(),p=l?f.appear:f.enter;if(!r&&!o||BI.disabled){this.safeSetState({status:Ym},function(){i.props.onEntered(d)});return}this.props.onEnter(d,u),this.safeSetState({status:Bd},function(){i.props.onEntering(d,u),i.onTransitionEnd(p,function(){i.safeSetState({status:Ym},function(){i.props.onEntered(d,u)})})})},a.performExit=function(){var r=this,i=this.props.exit,o=this.getTimeouts(),l=this.props.nodeRef?void 0:xy.findDOMNode(this);if(!i||BI.disabled){this.safeSetState({status:Fd},function(){r.props.onExited(l)});return}this.props.onExit(l),this.safeSetState({status:_T},function(){r.props.onExiting(l),r.onTransitionEnd(o.exit,function(){r.safeSetState({status:Fd},function(){r.props.onExited(l)})})})},a.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(r,i){i=this.setNextCallback(i),this.setState(r,i)},a.setNextCallback=function(r){var i=this,o=!0;return this.nextCallback=function(l){o&&(o=!1,i.nextCallback=null,r(l))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},a.onTransitionEnd=function(r,i){this.setNextCallback(i);var o=this.props.nodeRef?this.props.nodeRef.current:xy.findDOMNode(this),l=r==null&&!this.props.addEndListener;if(!o||l){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var c=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],d=c[0],u=c[1];this.props.addEndListener(d,u)}r!=null&&setTimeout(this.nextCallback,r)},a.render=function(){var r=this.state.status;if(r===Tg)return null;var i=this.props,o=i.children;i.in,i.mountOnEnter,i.unmountOnExit,i.appear,i.enter,i.exit,i.timeout,i.addEndListener,i.onEnter,i.onEntering,i.onEntered,i.onExit,i.onExiting,i.onExited,i.nodeRef;var l=dn(i,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return pt.createElement(ev.Provider,{value:null},typeof o=="function"?o(r,l):pt.cloneElement(pt.Children.only(o),l))},t})(pt.Component);Gl.contextType=ev;Gl.propTypes={};function Mm(){}Gl.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Mm,onEntering:Mm,onEntered:Mm,onExit:Mm,onExiting:Mm,onExited:Mm};Gl.UNMOUNTED=Tg;Gl.EXITED=Fd;Gl.ENTERING=Bd;Gl.ENTERED=Ym;Gl.EXITING=_T;function Yce(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sL(e,t){var a=function(i){return t&&h.isValidElement(i)?t(i):i},s=Object.create(null);return e&&h.Children.map(e,function(r){return r}).forEach(function(r){s[r.key]=a(r)}),s}function Qce(e,t){e=e||{},t=t||{};function a(u){return u in t?t[u]:e[u]}var s=Object.create(null),r=[];for(var i in e)i in t?r.length&&(s[i]=r,r=[]):r.push(i);var o,l={};for(var c in t){if(s[c])for(o=0;o<s[c].length;o++){var d=s[c][o];l[s[c][o]]=a(d)}l[c]=a(c)}for(o=0;o<r.length;o++)l[r[o]]=a(r[o]);return l}function eu(e,t,a){return a[t]!=null?a[t]:e.props[t]}function Kce(e,t){return sL(e.children,function(a){return h.cloneElement(a,{onExited:t.bind(null,a),in:!0,appear:eu(a,"appear",e),enter:eu(a,"enter",e),exit:eu(a,"exit",e)})})}function Xce(e,t,a){var s=sL(e.children),r=Qce(t,s);return Object.keys(r).forEach(function(i){var o=r[i];if(h.isValidElement(o)){var l=i in t,c=i in s,d=t[i],u=h.isValidElement(d)&&!d.props.in;c&&(!l||u)?r[i]=h.cloneElement(o,{onExited:a.bind(null,o),in:!0,exit:eu(o,"exit",e),enter:eu(o,"enter",e)}):!c&&l&&!u?r[i]=h.cloneElement(o,{in:!1}):c&&l&&h.isValidElement(d)&&(r[i]=h.cloneElement(o,{onExited:a.bind(null,o),in:d.props.in,exit:eu(o,"exit",e),enter:eu(o,"enter",e)}))}}),r}var Zce=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},Jce={component:"div",childFactory:function(t){return t}},rL=(function(e){_9(t,e);function t(s,r){var i;i=e.call(this,s,r)||this;var o=i.handleExited.bind(Yce(i));return i.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},i}var a=t.prototype;return a.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},a.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(r,i){var o=i.children,l=i.handleExited,c=i.firstRender;return{children:c?Kce(r,l):Xce(r,o,l),firstRender:!1}},a.handleExited=function(r,i){var o=sL(this.props.children);r.key in o||(r.props.onExited&&r.props.onExited(i),this.mounted&&this.setState(function(l){var c=qe({},l.children);return delete c[r.key],{children:c}}))},a.render=function(){var r=this.props,i=r.component,o=r.childFactory,l=dn(r,["component","childFactory"]),c=this.state.contextValue,d=Zce(this.state.children).map(o);return delete l.appear,delete l.enter,delete l.exit,i===null?pt.createElement(ev.Provider,{value:c},d):pt.createElement(ev.Provider,{value:c},pt.createElement(i,l,d))},t})(pt.Component);rL.propTypes={};rL.defaultProps=Jce;function A9(e){return parseInt(h.version,10)>=19?e?.props?.ref||null:e?.ref||null}const ede=e=>e.scrollTop;function HI(e,t){const{timeout:a,easing:s,style:r={}}=e;return{duration:r.transitionDuration??(typeof a=="number"?a:a[t.mode]||0),easing:r.transitionTimingFunction??(typeof s=="object"?s[t.mode]:s),delay:r.transitionDelay}}const tde={entering:{opacity:1},entered:{opacity:1}},nde=h.forwardRef(function(t,a){const s=Mo(),r={enter:s.transitions.duration.enteringScreen,exit:s.transitions.duration.leavingScreen},{addEndListener:i,appear:o=!0,children:l,easing:c,in:d,onEnter:u,onEntered:f,onEntering:p,onExit:x,onExited:v,onExiting:N,style:b,timeout:C=r,TransitionComponent:w=Gl,...S}=t,E=h.useRef(null),k=Eo(E,A9(l),a),A=W=>X=>{if(W){const z=E.current;X===void 0?W(z):W(z,X)}},T=A(p),_=A((W,X)=>{ede(W);const z=HI({style:b,timeout:C,easing:c},{mode:"enter"});W.style.webkitTransition=s.transitions.create("opacity",z),W.style.transition=s.transitions.create("opacity",z),u&&u(W,X)}),I=A(f),R=A(N),U=A(W=>{const X=HI({style:b,timeout:C,easing:c},{mode:"exit"});W.style.webkitTransition=s.transitions.create("opacity",X),W.style.transition=s.transitions.create("opacity",X),x&&x(W)}),D=A(v),M=W=>{i&&i(E.current,W)};return n.jsx(w,{appear:o,in:d,nodeRef:E,onEnter:_,onEntered:I,onEntering:T,onExit:U,onExited:D,onExiting:R,addEndListener:M,timeout:C,...S,children:(W,{ownerState:X,...z})=>h.cloneElement(l,{style:{opacity:0,visibility:W==="exited"&&!d?"hidden":void 0,...tde[W],...b,...l.props.style},ref:k,...z})})});function ade(e){return Ra("MuiBackdrop",e)}va("MuiBackdrop",["root","invisible"]);const sde=e=>{const{classes:t,invisible:a}=e;return $a({root:["root",a&&"invisible"]},ade,t)},rde=sn("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),ide=h.forwardRef(function(t,a){const s=ud({props:t,name:"MuiBackdrop"}),{children:r,className:i,component:o="div",invisible:l=!1,open:c,components:d={},componentsProps:u={},slotProps:f={},slots:p={},TransitionComponent:x,transitionDuration:v,...N}=s,b={...s,component:o,invisible:l},C=sde(b),w={transition:x,root:d.Root,...p},S={...u,...f},E={component:o,slots:w,slotProps:S},[k,A]=FI("root",{elementType:rde,externalForwardedProps:E,className:kt(C.root,i),ownerState:b}),[T,_]=FI("transition",{elementType:nde,externalForwardedProps:E,ownerState:b});return n.jsx(T,{in:c,timeout:v,...N,..._,children:n.jsx(k,{"aria-hidden":!0,...A,classes:C,ref:a,children:r})})}),ju=nce;function ode(e){return typeof e.main=="string"}function lde(e,t=[]){if(!ode(e))return!1;for(const a of t)if(!e.hasOwnProperty(a)||typeof e[a]!="string")return!1;return!0}function ip(e=[]){return([,t])=>t&&lde(t,e)}function cde(e){return Ra("MuiCircularProgress",e)}va("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","track","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Si=44,AT=rx`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,TT=rx`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,dde=typeof AT!="string"?Jk`
        animation: ${AT} 1.4s linear infinite;
      `:null,ude=typeof TT!="string"?Jk`
        animation: ${TT} 1.4s ease-in-out infinite;
      `:null,mde=e=>{const{classes:t,variant:a,color:s,disableShrink:r}=e,i={root:["root",a,`color${Un(s)}`],svg:["svg"],track:["track"],circle:["circle",`circle${Un(a)}`,r&&"circleDisableShrink"]};return $a(i,cde,t)},fde=sn("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[a.variant],t[`color${Un(a.color)}`]]}})(ju(({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:dde||{animation:`${AT} 1.4s linear infinite`}},...Object.entries(e.palette).filter(ip()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}}))]}))),hde=sn("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),gde=sn("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.circle,t[`circle${Un(a.variant)}`],a.disableShrink&&t.circleDisableShrink]}})(ju(({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:ude||{animation:`${TT} 1.4s ease-in-out infinite`}}]}))),pde=sn("circle",{name:"MuiCircularProgress",slot:"Track"})(ju(({theme:e})=>({stroke:"currentColor",opacity:(e.vars||e).palette.action.activatedOpacity}))),iL=h.forwardRef(function(t,a){const s=ud({props:t,name:"MuiCircularProgress"}),{className:r,color:i="primary",disableShrink:o=!1,enableTrackSlot:l=!1,size:c=40,style:d,thickness:u=3.6,value:f=0,variant:p="indeterminate",...x}=s,v={...s,color:i,disableShrink:o,size:c,thickness:u,value:f,variant:p,enableTrackSlot:l},N=mde(v),b={},C={},w={};if(p==="determinate"){const S=2*Math.PI*((Si-u)/2);b.strokeDasharray=S.toFixed(3),w["aria-valuenow"]=Math.round(f),b.strokeDashoffset=`${((100-f)/100*S).toFixed(3)}px`,C.transform="rotate(-90deg)"}return n.jsx(fde,{className:kt(N.root,r),style:{width:c,height:c,...C,...d},ownerState:v,ref:a,role:"progressbar",...w,...x,children:n.jsxs(hde,{className:N.svg,ownerState:v,viewBox:`${Si/2} ${Si/2} ${Si} ${Si}`,children:[l?n.jsx(pde,{className:N.track,ownerState:v,cx:Si,cy:Si,r:(Si-u)/2,fill:"none",strokeWidth:u,"aria-hidden":"true"}):null,n.jsx(gde,{className:N.circle,style:b,ownerState:v,cx:Si,cy:Si,r:(Si-u)/2,fill:"none",strokeWidth:u})]})})});function T9(e){return n.jsx(ide,{sx:t=>({color:"#fff",zIndex:t.zIndex.drawer+1}),open:e,children:n.jsx(iL,{color:"inherit"})})}var xs={},Ny={},GI;function xde(){if(GI)return Ny;GI=1,Object.defineProperty(Ny,"__esModule",{value:!0});function e(t,a){return t.reduce((s,r)=>{const i=String(r[a]);return s[i]||(s[i]=[]),s[i].push(r),s},{})}return Ny.default=e,Ny}var jy={},WI;function yde(){if(WI)return jy;WI=1,Object.defineProperty(jy,"__esModule",{value:!0});function e(t,a){return t.replace(/{([^{}]*)}/g,(s,r)=>{const i=a[r];return typeof i=="string"||typeof i=="number"?i.toString():s})}return jy.default=e,jy}var Cy={},qI;function bde(){if(qI)return Cy;qI=1,Object.defineProperty(Cy,"__esModule",{value:!0});const e=[{countryNameEn:"Andorra",countryNameLocal:"Andorra",countryCode:"AD",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"ca",officialLanguageNameEn:"Catalan, Valencian",officialLanguageNameLocal:"Catal, Valenci",countryCallingCode:"376",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Afghanistan",countryNameLocal:"     ,   ",countryCode:"AF",currencyCode:"AFN",currencyNameEn:"Afghan afghani",tinType:"",tinName:"",officialLanguageCode:"fa",officialLanguageNameEn:"Persian",officialLanguageNameLocal:"",countryCallingCode:"93",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Antigua and Barbuda",countryNameLocal:"Antigua and Barbuda",countryCode:"AG",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1268",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Anguilla",countryNameLocal:"Anguilla",countryCode:"AI",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1264",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Albania",countryNameLocal:"Shqipria",countryCode:"AL",currencyCode:"ALL",currencyNameEn:"Albanian lek",tinType:"NIPT",tinName:"Numri i Identifikimit pr Personin e Tatueshm",officialLanguageCode:"sq",officialLanguageNameEn:"Albanian",officialLanguageNameLocal:"Shqip",countryCallingCode:"355",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Armenia",countryNameLocal:"",countryCode:"AM",currencyCode:"AMD",currencyNameEn:"Armenian dram",tinType:"",tinName:"",officialLanguageCode:"hy",officialLanguageNameEn:"Armenian",officialLanguageNameLocal:"",countryCallingCode:"374",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Angola",countryNameLocal:"Angola",countryCode:"AO",currencyCode:"AOA",currencyNameEn:"Angolan kwanza",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"244",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Antarctica",countryNameLocal:"Antarctica, Antrtico, Antarctique, ",countryCode:"AQ",currencyCode:"",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"672",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Argentina",countryNameLocal:"Argentina",countryCode:"AR",currencyCode:"ARS",currencyNameEn:"Argentine peso",tinType:"CUIT",tinName:"Cdigo nico de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"54",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"American Samoa",countryNameLocal:"American Samoa",countryCode:"AS",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1684",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Austria",countryNameLocal:"sterreich",countryCode:"AT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"UID",tinName:"Umsatzsteuer-Identifikationsnummer",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"43",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Australia",countryNameLocal:"Australia",countryCode:"AU",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"ABN",tinName:"Australian Business Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"61",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Aruba",countryNameLocal:"Aruba",countryCode:"AW",currencyCode:"AWG",currencyNameEn:"Aruban florin",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"297",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"land Islands",countryNameLocal:"land",countryCode:"AX",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"sv",officialLanguageNameEn:"Swedish",officialLanguageNameLocal:"Svenska",countryCallingCode:"358",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Azerbaijan",countryNameLocal:"Azrbaycan",countryCode:"AZ",currencyCode:"AZN",currencyNameEn:"Azerbaijani manat",tinType:"",tinName:"",officialLanguageCode:"az",officialLanguageNameEn:"Azerbaijani",officialLanguageNameLocal:"azrbaycan dili",countryCallingCode:"994",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Bosnia and Herzegovina",countryNameLocal:"Bosna i Hercegovina",countryCode:"BA",currencyCode:"BAM",currencyNameEn:"Bosnia and Herzegovina convertible mark",tinType:"",tinName:"",officialLanguageCode:"bs",officialLanguageNameEn:"Bosnian",officialLanguageNameLocal:"bosanski jezik",countryCallingCode:"387",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Barbados",countryNameLocal:"Barbados",countryCode:"BB",currencyCode:"BBD",currencyNameEn:"Barbados dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1246",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bangladesh",countryNameLocal:" ",countryCode:"BD",currencyCode:"BDT",currencyNameEn:"Bangladeshi taka",tinType:"",tinName:"",officialLanguageCode:"bn",officialLanguageNameEn:"Bengali",officialLanguageNameLocal:"",countryCallingCode:"880",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Belgium",countryNameLocal:"Belgi, Belgique, Belgien",countryCode:"BE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"n TVABTW-nr Mwst-nr",tinName:"BTW identificatienummer / Numro de TVA",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"32",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Burkina Faso",countryNameLocal:"Burkina Faso",countryCode:"BF",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"226",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Bulgaria",countryNameLocal:"",countryCode:"BG",currencyCode:"BGN",currencyNameEn:"Bulgarian lev",tinType:" ",tinName:"   ",officialLanguageCode:"bg",officialLanguageNameEn:"Bulgarian",officialLanguageNameLocal:" ",countryCallingCode:"359",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Bahrain",countryNameLocal:"",countryCode:"BH",currencyCode:"BHD",currencyNameEn:"Bahraini dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"973",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Burundi",countryNameLocal:"Burundi",countryCode:"BI",currencyCode:"BIF",currencyNameEn:"Burundian franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"257",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Benin",countryNameLocal:"Bnin",countryCode:"BJ",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"229",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Saint Barthlemy",countryNameLocal:"Saint-Barthlemy",countryCode:"BL",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"590",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bermuda",countryNameLocal:"Bermuda",countryCode:"BM",currencyCode:"BMD",currencyNameEn:"Bermudian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1441",areaCodes:[],region:"North America",flag:""},{countryNameEn:"Brunei Darussalam",countryNameLocal:"Brunei Darussalam",countryCode:"BN",currencyCode:"BND",currencyNameEn:"Brunei dollar",tinType:"",tinName:"",officialLanguageCode:"ms",officialLanguageNameEn:"Malay",officialLanguageNameLocal:"Bahasa Melayu,  ",countryCallingCode:"673",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Bolivia (Plurinational State of)",countryNameLocal:"Bolivia, Bulibiya, Volvia, Wuliwya",countryCode:"BO",currencyCode:"BOP",currencyNameEn:"",tinType:"NIT",tinName:"Nmero de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"591",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bonaire, Sint Eustatius and Saba",countryNameLocal:"Caribisch Nederland",countryCode:"BQ",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"5997",areaCodes:[],region:"Unknown",flag:""},{countryNameEn:"Brazil",countryNameLocal:"Brasil",countryCode:"BR",currencyCode:"BRL",currencyNameEn:"Brazilian real",tinType:"CNPJ",tinName:"Cadastro Nacional de Pessoa Jurdica",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"55",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bhutan",countryNameLocal:"",countryCode:"BT",currencyCode:"BTN",currencyNameEn:"Bhutanese ngultrum",tinType:"",tinName:"",officialLanguageCode:"dz",officialLanguageNameEn:"Dzongkha",officialLanguageNameLocal:"",countryCallingCode:"975",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Bouvet Island",countryNameLocal:"Bouvetya",countryCode:"BV",currencyCode:"NOK",currencyNameEn:"Norwegian krone",tinType:"",tinName:"",officialLanguageCode:"no",officialLanguageNameEn:"Norwegian",officialLanguageNameLocal:"Norsk",countryCallingCode:"47",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Botswana",countryNameLocal:"Botswana",countryCode:"BW",currencyCode:"BWP",currencyNameEn:"Botswana pula",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"267",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Belarus",countryNameLocal:"",countryCode:"BY",currencyCode:"BYR",currencyNameEn:"",tinType:" (UNP)",tinName:"  ",officialLanguageCode:"be",officialLanguageNameEn:"Belarusian",officialLanguageNameLocal:" ",countryCallingCode:"375",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Belize",countryNameLocal:"Belize",countryCode:"BZ",currencyCode:"BZD",currencyNameEn:"Belize dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"501",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Canada",countryNameLocal:"Canada",countryCode:"CA",currencyCode:"CAD",currencyNameEn:"Canadian dollar",tinType:"BN / NE",tinName:"Business Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:["403","587","780","825","236","250","604","672","778","204","431","506","709","782","902","226","249","289","343","365","416","437","519","548","613","647","705","807","905","367","418","438","450","514","579","581","819","873","306","639","867"],region:"North America",flag:""},{countryNameEn:"Switzerland",countryNameLocal:"Schweiz, Suisse, Svizzera, Svizra",countryCode:"CH",currencyCode:"CHF",currencyNameEn:"Swiss franc",tinType:"MWST/TVA/IVA",tinName:"Mehrwertsteuernummer",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"41",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Cte d'Ivoire",countryNameLocal:"Cte d'Ivoire",countryCode:"CI",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"225",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Chile",countryNameLocal:"Chile",countryCode:"CL",currencyCode:"CLP",currencyNameEn:"Chilean peso",tinType:"RUT",tinName:"Rol nico Tributario",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"56",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Cameroon",countryNameLocal:"Cameroun, Cameroon",countryCode:"CM",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"237",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"China",countryNameLocal:"",countryCode:"CN",currencyCode:"CNY",currencyNameEn:"Renminbi (Chinese) yuan",tinType:"",tinName:"",officialLanguageCode:"zh-hans",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"86",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Colombia",countryNameLocal:"Colombia",countryCode:"CO",currencyCode:"COP",currencyNameEn:"Colombian peso",tinType:"NIT",tinName:"Nmero De Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"57",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Costa Rica",countryNameLocal:"Costa Rica",countryCode:"CR",currencyCode:"CRC",currencyNameEn:"Costa Rican colon",tinType:"",tinName:"Cdula Jurdica",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"506",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Cuba",countryNameLocal:"Cuba",countryCode:"CU",currencyCode:"CUC",currencyNameEn:"Cuban convertible peso",tinType:"",tinName:"",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"53",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Cabo Verde",countryNameLocal:"Cabo Verde",countryCode:"CV",currencyCode:"CVE",currencyNameEn:"Cape Verdean escudo",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"238",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Curaao",countryNameLocal:"Curaao",countryCode:"CW",currencyCode:"ANG",currencyNameEn:"Netherlands Antillean guilder",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"599",areaCodes:[],region:"Unknown",flag:""},{countryNameEn:"Christmas Island",countryNameLocal:"Christmas Island",countryCode:"CX",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"61",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Cyprus",countryNameLocal:", Kibris",countryCode:"CY",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"  ...",officialLanguageCode:"el",officialLanguageNameEn:"Greek, Modern (1453-)",officialLanguageNameLocal:"",countryCallingCode:"357",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Germany",countryNameLocal:"Deutschland",countryCode:"DE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"USt-IdNr.",tinName:"Umsatzsteuer-Identifikationsnummer",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"49",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Djibouti",countryNameLocal:"Djibouti, , Jabuuti, Gabuutih",countryCode:"DJ",currencyCode:"DJF",currencyNameEn:"Djiboutian franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"253",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Denmark",countryNameLocal:"Danmark",countryCode:"DK",currencyCode:"DKK",currencyNameEn:"Danish krone",tinType:"CVR",tinName:"Momsregistreringsnummer",officialLanguageCode:"da",officialLanguageNameEn:"Danish",officialLanguageNameLocal:"dansk",countryCallingCode:"45",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Dominica",countryNameLocal:"Dominica",countryCode:"DM",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"767",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Algeria",countryNameLocal:"",countryCode:"DZ",currencyCode:"DZD",currencyNameEn:"Algerian dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"213",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Ecuador",countryNameLocal:"Ecuador",countryCode:"EC",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"RUC",tinName:"Nmero de Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"593",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Estonia",countryNameLocal:"Eesti",countryCode:"EE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"KMKR",tinName:"Kibemaksukohustuslase number",officialLanguageCode:"et",officialLanguageNameEn:"Estonian",officialLanguageNameLocal:"eesti, eesti keel",countryCallingCode:"372",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Egypt",countryNameLocal:"",countryCode:"EG",currencyCode:"EGP",currencyNameEn:"Egyptian pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"20",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Western Sahara",countryNameLocal:"Sahara Occidental",countryCode:"EH",currencyCode:"MAD",currencyNameEn:"Moroccan dirham",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"212",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Eritrea",countryNameLocal:", , Eritrea",countryCode:"ER",currencyCode:"ERN",currencyNameEn:"Eritrean nakfa",tinType:"",tinName:"",officialLanguageCode:"ti",officialLanguageNameEn:"Tigrinya",officialLanguageNameLocal:"",countryCallingCode:"291",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Spain",countryNameLocal:"Espaa",countryCode:"ES",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"NIF (CIF)",tinName:"Nmero de Identificacin Fiscal (formerly named Cdigo de Identificacin Fiscal)",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"34",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Ethiopia",countryNameLocal:", Itoophiyaa",countryCode:"ET",currencyCode:"ETB",currencyNameEn:"Ethiopian birr",tinType:"",tinName:"",officialLanguageCode:"am",officialLanguageNameEn:"Amharic",officialLanguageNameLocal:"",countryCallingCode:"251",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Finland",countryNameLocal:"Suomi",countryCode:"FI",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"ALV nro",tinName:"Arvonlisveronumero",officialLanguageCode:"fi",officialLanguageNameEn:"Finnish",officialLanguageNameLocal:"suomi, suomen kieli",countryCallingCode:"358",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Fiji",countryNameLocal:"Fiji",countryCode:"FJ",currencyCode:"FJD",currencyNameEn:"Fiji dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"679",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Micronesia (Federated States of)",countryNameLocal:"Micronesia",countryCode:"FM",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"691",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"France",countryNameLocal:"France",countryCode:"FR",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"n TVA",tinName:"Numro d'identification  la taxe sur la valeur ajoute / Numro de TVA intracommunautaire",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"33",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Gabon",countryNameLocal:"Gabon",countryCode:"GA",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"241",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Grenada",countryNameLocal:"Grenada",countryCode:"GD",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1473",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Georgia",countryNameLocal:"",countryCode:"GE",currencyCode:"GEL",currencyNameEn:"Georgian lari",tinType:"",tinName:"",officialLanguageCode:"ka",officialLanguageNameEn:"Georgian",officialLanguageNameLocal:"",countryCallingCode:"995",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"French Guiana",countryNameLocal:"Guyane franaise",countryCode:"GF",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"594",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Guernsey",countryNameLocal:"Guernsey",countryCode:"GG",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Ghana",countryNameLocal:"Ghana",countryCode:"GH",currencyCode:"GHS",currencyNameEn:"Ghanaian cedi",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"233",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Gibraltar",countryNameLocal:"Gibraltar",countryCode:"GI",currencyCode:"GIP",currencyNameEn:"Gibraltar pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"350",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Greenland",countryNameLocal:"Kalaallit Nunaat, Grnland",countryCode:"GL",currencyCode:"DKK",currencyNameEn:"Danish krone",tinType:"",tinName:"",officialLanguageCode:"kl",officialLanguageNameEn:"Kalaallisut, Greenlandic",officialLanguageNameLocal:"kalaallisut, kalaallit oqaasii",countryCallingCode:"299",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Guinea",countryNameLocal:"Guine",countryCode:"GN",currencyCode:"GNF",currencyNameEn:"Guinean franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"224",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Guadeloupe",countryNameLocal:"Guadeloupe",countryCode:"GP",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"590",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Equatorial Guinea",countryNameLocal:"Guiena ecuatorial, Guine quatoriale, Guin Equatorial",countryCode:"GQ",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"240",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Greece",countryNameLocal:"",countryCode:"GR",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"el",officialLanguageNameEn:"Greek, Modern (1453-)",officialLanguageNameLocal:"",countryCallingCode:"30",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"South Georgia and the South Sandwich Islands",countryNameLocal:"South Georgia and the South Sandwich Islands",countryCode:"GS",currencyCode:"",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"500",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Guatemala",countryNameLocal:"Guatemala",countryCode:"GT",currencyCode:"GTQ",currencyNameEn:"Guatemalan quetzal",tinType:"NIT",tinName:"Nmero de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"502",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Guam",countryNameLocal:"Guam, Guhn",countryCode:"GU",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Guinea-Bissau",countryNameLocal:"Guin-Bissau",countryCode:"GW",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"245",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Guyana",countryNameLocal:"Guyana",countryCode:"GY",currencyCode:"GYD",currencyNameEn:"Guyanese dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"592",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Hong Kong",countryNameLocal:", Hong Kong",countryCode:"HK",currencyCode:"HKD",currencyNameEn:"Hong Kong dollar",tinType:"",tinName:"",officialLanguageCode:"zh-hant",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"852",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Honduras",countryNameLocal:"Honduras",countryCode:"HN",currencyCode:"HNL",currencyNameEn:"Honduran lempira",tinType:"RTN",tinName:"Registro Tributario Nacional",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"504",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Croatia",countryNameLocal:"Hrvatska",countryCode:"HR",currencyCode:"HRK",currencyNameEn:"Croatian kuna",tinType:"PDV-ID; OIB",tinName:"PDV Id. Broj OIB",officialLanguageCode:"hr",officialLanguageNameEn:"Croatian",officialLanguageNameLocal:"hrvatski jezik",countryCallingCode:"385",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Haiti",countryNameLocal:"Hati, Ayiti",countryCode:"HT",currencyCode:"HTG",currencyNameEn:"Haitian gourde",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"509",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Hungary",countryNameLocal:"Magyarorszg",countryCode:"HU",currencyCode:"HUF",currencyNameEn:"Hungarian forint",tinType:"ANUM",tinName:"Kzssgi adszm",officialLanguageCode:"hu",officialLanguageNameEn:"Hungarian",officialLanguageNameLocal:"magyar",countryCallingCode:"36",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Indonesia",countryNameLocal:"Indonesia",countryCode:"ID",currencyCode:"IDR",currencyNameEn:"Indonesian rupiah",tinType:"NPWP",tinName:"Nomor Pokok Wajib Pajak",officialLanguageCode:"id",officialLanguageNameEn:"Indonesian",officialLanguageNameLocal:"Bahasa Indonesia",countryCallingCode:"62",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Ireland",countryNameLocal:"Ireland, ire",countryCode:"IE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"VAT or CBL",tinName:"Value added tax identification no.",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"353",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Israel",countryNameLocal:"",countryCode:"IL",currencyCode:"ILS",currencyNameEn:"Israeli new shekel",tinType:"",tinName:`'   / "`,officialLanguageCode:"he",officialLanguageNameEn:"Hebrew",officialLanguageNameLocal:"",countryCallingCode:"972",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Isle of Man",countryNameLocal:"Isle of Man",countryCode:"IM",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"India",countryNameLocal:", India",countryCode:"IN",currencyCode:"INR",currencyNameEn:"Indian rupee",tinType:"VAT TIN / CST TIN",tinName:"Value Added Tax - Taxpayer Identification Number / Central Sales Tax - Taxpayer Identification Number (In most states)Not applicable",officialLanguageCode:"hi",officialLanguageNameEn:"Hindi",officialLanguageNameLocal:", ",countryCallingCode:"91",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"British Indian Ocean Territories",countryNameLocal:"British Indian Ocean Territories",countryCode:"IO",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"246",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"Iraq",countryNameLocal:", Iraq",countryCode:"IQ",currencyCode:"IQD",currencyNameEn:"Iraqi dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"964",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Iran (Islamic Republic of)",countryNameLocal:"",countryCode:"IR",currencyCode:"IRR",currencyNameEn:"Iranian rial",tinType:"",tinName:"",officialLanguageCode:"fa",officialLanguageNameEn:"Persian",officialLanguageNameLocal:"",countryCallingCode:"98",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Iceland",countryNameLocal:"sland",countryCode:"IS",currencyCode:"ISK",currencyNameEn:"Icelandic krna",tinType:"VSK / VASK",tinName:"Virisaukaskattsnmer",officialLanguageCode:"is",officialLanguageNameEn:"Icelandic",officialLanguageNameLocal:"slenska",countryCallingCode:"354",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Italy",countryNameLocal:"Italia",countryCode:"IT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"P.IVA",tinName:"Partita IVA(IVA = Imposta sul Valore Aggiunto)",officialLanguageCode:"it",officialLanguageNameEn:"Italian",officialLanguageNameLocal:"Italiano",countryCallingCode:"39",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Jersey",countryNameLocal:"Jersey",countryCode:"JE",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Jamaica",countryNameLocal:"Jamaica",countryCode:"JM",currencyCode:"JMD",currencyNameEn:"Jamaican dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"876",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Jordan",countryNameLocal:"",countryCode:"JO",currencyCode:"JOD",currencyNameEn:"Jordanian dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"962",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Japan",countryNameLocal:"",countryCode:"JP",currencyCode:"JPY",currencyNameEn:"Japanese yen",tinType:"",tinName:"",officialLanguageCode:"ja",officialLanguageNameEn:"Japanese",officialLanguageNameLocal:" ()",countryCallingCode:"81",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Kenya",countryNameLocal:"Kenya",countryCode:"KE",currencyCode:"KES",currencyNameEn:"Kenyan shilling",tinType:"",tinName:"",officialLanguageCode:"sw",officialLanguageNameEn:"Swahili",officialLanguageNameLocal:"Kiswahili",countryCallingCode:"254",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Kyrgyzstan",countryNameLocal:", ",countryCode:"KG",currencyCode:"KGS",currencyNameEn:"Kyrgyzstani som",tinType:"",tinName:"",officialLanguageCode:"ky",officialLanguageNameEn:"Kirghiz, Kyrgyz",officialLanguageNameLocal:",  ",countryCallingCode:"996",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Cambodia",countryNameLocal:"",countryCode:"KH",currencyCode:"KHR",currencyNameEn:"Cambodian riel",tinType:"",tinName:"",officialLanguageCode:"km",officialLanguageNameEn:"Central Khmer",officialLanguageNameLocal:", , ",countryCallingCode:"855",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"North Korea",countryNameLocal:"",countryCode:"KP",currencyCode:"KPW",currencyNameEn:"North Korean won",tinType:"",tinName:"",officialLanguageCode:"ko",officialLanguageNameEn:"Korean",officialLanguageNameLocal:"",countryCallingCode:"850",areaCodes:[],region:"Asia",flag:""},{countryNameEn:"South Korea",countryNameLocal:"",countryCode:"KR",currencyCode:"KRW",currencyNameEn:"South Korean won",tinType:"",tinName:"",officialLanguageCode:"ko",officialLanguageNameEn:"Korean",officialLanguageNameLocal:"",countryCallingCode:"82",areaCodes:[],region:"Asia",flag:""},{countryNameEn:"Kiribati",countryNameLocal:"Kiribati",countryCode:"KI",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"686",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Saint Kitts and Nevis",countryNameLocal:"Saint Kitts and Nevis",countryCode:"KN",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1869",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Kuwait",countryNameLocal:"",countryCode:"KW",currencyCode:"KWD",currencyNameEn:"Kuwaiti dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"965",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Kazakhstan",countryNameLocal:", ",countryCode:"KZ",currencyCode:"KZT",currencyNameEn:"Kazakhstani tenge",tinType:"",tinName:"",officialLanguageCode:"kk",officialLanguageNameEn:"Kazakh",officialLanguageNameLocal:" ",countryCallingCode:"7",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Lebanon",countryNameLocal:", Liban",countryCode:"LB",currencyCode:"LBP",currencyNameEn:"Lebanese pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"961",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Saint Lucia",countryNameLocal:"Saint Lucia",countryCode:"LC",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1758",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Liechtenstein",countryNameLocal:"Liechtenstein",countryCode:"LI",currencyCode:"CHF",currencyNameEn:"Swiss franc",tinType:"",tinName:"",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"423",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Sri Lanka",countryNameLocal:" , ",countryCode:"LK",currencyCode:"LKR",currencyNameEn:"Sri Lankan rupee",tinType:"",tinName:"",officialLanguageCode:"si",officialLanguageNameEn:"Sinhala, Sinhalese",officialLanguageNameLocal:"",countryCallingCode:"94",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Liberia",countryNameLocal:"Liberia",countryCode:"LR",currencyCode:"LRD",currencyNameEn:"Liberian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"231",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Lesotho",countryNameLocal:"Lesotho",countryCode:"LS",currencyCode:"LSL",currencyNameEn:"Lesotho loti",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"266",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Lithuania",countryNameLocal:"Lietuva",countryCode:"LT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"PVM kodas",tinName:"PVM (abbrev. Pridtins verts mokestis) moktojo kodas",officialLanguageCode:"lt",officialLanguageNameEn:"Lithuanian",officialLanguageNameLocal:"lietuvi kalba",countryCallingCode:"370",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Luxembourg",countryNameLocal:"Ltzebuerg, Luxembourg, Luxemburg",countryCode:"LU",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"No. TVA",tinName:"Numro d'identification  la taxe sur la valeur ajoute",officialLanguageCode:"lb",officialLanguageNameEn:"Luxembourgish, Letzeburgesch",officialLanguageNameLocal:"Ltzebuergesch",countryCallingCode:"352",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Latvia",countryNameLocal:"Latvija",countryCode:"LV",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"PVN",tinName:"Pievienots vrtbas nodoka (PVN) reistrcijas numurs",officialLanguageCode:"lv",officialLanguageNameEn:"Latvian",officialLanguageNameLocal:"latvieu valoda",countryCallingCode:"371",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Libya",countryNameLocal:"",countryCode:"LY",currencyCode:"LYD",currencyNameEn:"Libyan dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"218",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Morocco",countryNameLocal:"Maroc, , ",countryCode:"MA",currencyCode:"MAD",currencyNameEn:"Moroccan dirham",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"212",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Monaco",countryNameLocal:"Monaco",countryCode:"MC",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"377",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Montenegro",countryNameLocal:"Crna Gora,  ",countryCode:"ME",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"srp",officialLanguageNameEn:" ",officialLanguageNameLocal:"",countryCallingCode:"382",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Saint Martin (French part)",countryNameLocal:"Saint-Martin",countryCode:"MF",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"590",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Madagascar",countryNameLocal:"Madagasikara, Madagascar",countryCode:"MG",currencyCode:"MGA",currencyNameEn:"Malagasy ariary",tinType:"",tinName:"",officialLanguageCode:"mg",officialLanguageNameEn:"Malagasy",officialLanguageNameLocal:"fiteny malagasy",countryCallingCode:"261",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Mali",countryNameLocal:"Mali",countryCode:"ML",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"223",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Myanmar",countryNameLocal:"",countryCode:"MM",currencyCode:"MMK",currencyNameEn:"Myanmar kyat",tinType:"",tinName:"",officialLanguageCode:"my",officialLanguageNameEn:"Burmese",officialLanguageNameLocal:"",countryCallingCode:"95",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Mongolia",countryNameLocal:" ",countryCode:"MN",currencyCode:"MNT",currencyNameEn:"Mongolian tgrg",tinType:"",tinName:"",officialLanguageCode:"mn",officialLanguageNameEn:"Mongolian",officialLanguageNameLocal:" ",countryCallingCode:"976",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Macao",countryNameLocal:", Macau",countryCode:"MO",currencyCode:"MOP",currencyNameEn:"Macanese pataca",tinType:"",tinName:"",officialLanguageCode:"zh-hant",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"853",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Martinique",countryNameLocal:"Martinique",countryCode:"MQ",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"596",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Mauritania",countryNameLocal:", Mauritanie",countryCode:"MR",currencyCode:"MRU",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"222",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Montserrat",countryNameLocal:"Montserrat",countryCode:"MS",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1664",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Malta",countryNameLocal:"Malta",countryCode:"MT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"Vat No.",tinName:"Vat reg. no.",officialLanguageCode:"mt",officialLanguageNameEn:"Maltese",officialLanguageNameLocal:"Malti",countryCallingCode:"356",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Mauritius",countryNameLocal:"Maurice, Mauritius",countryCode:"MU",currencyCode:"MUR",currencyNameEn:"Mauritian rupee",tinType:"",tinName:"",officialLanguageCode:"mfe",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"230",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Maldives",countryNameLocal:"",countryCode:"MV",currencyCode:"MVR",currencyNameEn:"Maldivian rufiyaa",tinType:"",tinName:"",officialLanguageCode:"dv",officialLanguageNameEn:"Divehi, Dhivehi, Maldivian",officialLanguageNameLocal:"",countryCallingCode:"960",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Malawi",countryNameLocal:"Malawi",countryCode:"MW",currencyCode:"MWK",currencyNameEn:"Malawian kwacha",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"265",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Mexico",countryNameLocal:"Mxico",countryCode:"MX",currencyCode:"MXN",currencyNameEn:"Mexican peso",tinType:"RFC",tinName:"Registro Federal de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"52",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Malaysia",countryNameLocal:"",countryCode:"MY",currencyCode:"MYR",currencyNameEn:"Malaysian ringgit",tinType:"",tinName:"",officialLanguageCode:"ms",officialLanguageNameEn:"Malay",officialLanguageNameLocal:"Bahasa Melayu,  ",countryCallingCode:"60",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Mozambique",countryNameLocal:"Mozambique",countryCode:"MZ",currencyCode:"MZN",currencyNameEn:"Mozambican metical",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"258",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Namibia",countryNameLocal:"Namibia",countryCode:"NA",currencyCode:"NAD",currencyNameEn:"Namibian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"264",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"New Caledonia",countryNameLocal:"Nouvelle-Caldonie",countryCode:"NC",currencyCode:"XPF",currencyNameEn:"CFP franc (franc Pacifique)",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"687",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Norfolk Island",countryNameLocal:"Norfolk Island",countryCode:"NF",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"672",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Nigeria",countryNameLocal:"Nigeria",countryCode:"NG",currencyCode:"NGN",currencyNameEn:"Nigerian naira",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"234",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Nicaragua",countryNameLocal:"Nicaragua",countryCode:"NI",currencyCode:"NIO",currencyNameEn:"Nicaraguan crdoba",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"505",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Norway",countryNameLocal:"Norge, Noreg",countryCode:"NO",currencyCode:"NOK",currencyNameEn:"Norwegian krone",tinType:"Orgnr",tinName:"Organisasjonsnummer",officialLanguageCode:"nb",officialLanguageNameEn:"Norwegian Bokml",officialLanguageNameLocal:"Norsk Bokml",countryCallingCode:"47",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Nepal",countryNameLocal:"",countryCode:"NP",currencyCode:"NPR",currencyNameEn:"Nepalese rupee",tinType:"",tinName:"",officialLanguageCode:"ne",officialLanguageNameEn:"Nepali",officialLanguageNameLocal:"",countryCallingCode:"977",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Nauru",countryNameLocal:"Nauru",countryCode:"NR",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"na",officialLanguageNameEn:"Nauru",officialLanguageNameLocal:"Dorerin Naoero",countryCallingCode:"674",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Niue",countryNameLocal:"Niue",countryCode:"NU",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"niu",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"683",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"New Zealand",countryNameLocal:"New Zealand",countryCode:"NZ",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"NZBN",tinName:"NZ Business Number",officialLanguageCode:"mi",officialLanguageNameEn:"Maori",officialLanguageNameLocal:"te reo Mori",countryCallingCode:"64",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Oman",countryNameLocal:" ",countryCode:"OM",currencyCode:"OMR",currencyNameEn:"Omani rial",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"968",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Panama",countryNameLocal:"Panama",countryCode:"PA",currencyCode:"PAB",currencyNameEn:"Panamanian balboa",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"507",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Peru",countryNameLocal:"Per",countryCode:"PE",currencyCode:"PEN",currencyNameEn:"Peruvian sol",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"51",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"French Polynesia",countryNameLocal:"Polynsie franaise",countryCode:"PF",currencyCode:"XPF",currencyNameEn:"CFP franc (franc Pacifique)",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"689",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Papua New Guinea",countryNameLocal:"Papua New Guinea",countryCode:"PG",currencyCode:"PGK",currencyNameEn:"Papua New Guinean kina",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"675",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Pakistan",countryNameLocal:"",countryCode:"PK",currencyCode:"PKR",currencyNameEn:"Pakistani rupee",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"92",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Poland",countryNameLocal:"Polska",countryCode:"PL",currencyCode:"PLN",currencyNameEn:"Polish zoty",tinType:"NIP",tinName:"numer identyfikacji podatkowej",officialLanguageCode:"pl",officialLanguageNameEn:"Polish",officialLanguageNameLocal:"jzyk polski, polszczyzna",countryCallingCode:"48",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Saint Pierre and Miquelon",countryNameLocal:"Saint-Pierre-et-Miquelon",countryCode:"PM",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"508",areaCodes:[],region:"North America",flag:""},{countryNameEn:"Pitcairn",countryNameLocal:"Pitcairn",countryCode:"PN",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"64",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Puerto Rico",countryNameLocal:"Puerto Rico",countryCode:"PR",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"1",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Palestine, State of",countryNameLocal:"Palestinian Territory",countryCode:"PS",currencyCode:"",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"970",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Portugal",countryNameLocal:"Portugal",countryCode:"PT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"NIPC",tinName:"Nmero de Identificao de Pessoa Coletiva (NIPC)",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"351",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Palau",countryNameLocal:"Palau",countryCode:"PW",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"680",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Paraguay",countryNameLocal:"Paraguay",countryCode:"PY",currencyCode:"PYG",currencyNameEn:"Paraguayan guaran",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"595",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Qatar",countryNameLocal:"",countryCode:"QA",currencyCode:"QAR",currencyNameEn:"Qatari riyal",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"974",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Runion",countryNameLocal:"La Runion",countryCode:"RE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"262",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Romania",countryNameLocal:"Romnia",countryCode:"RO",currencyCode:"RON",currencyNameEn:"Romanian leu",tinType:"CIF",tinName:"Codul de identificare fiscal",officialLanguageCode:"ro",officialLanguageNameEn:"Romanian, Moldavian, Moldovan",officialLanguageNameLocal:"Romn",countryCallingCode:"40",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Serbia",countryNameLocal:"",countryCode:"RS",currencyCode:"RSD",currencyNameEn:"Serbian dinar",tinType:"PIB",tinName:"Poreski identifikacioni broj",officialLanguageCode:"sr",officialLanguageNameEn:"Serbian",officialLanguageNameLocal:" ",countryCallingCode:"381",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Russia",countryNameLocal:"",countryCode:"RU",currencyCode:"RUB",currencyNameEn:"Russian ruble",tinType:"",tinName:"  ",officialLanguageCode:"ru",officialLanguageNameEn:"Russian",officialLanguageNameLocal:"",countryCallingCode:"7",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Rwanda",countryNameLocal:"Rwanda",countryCode:"RW",currencyCode:"RWF",currencyNameEn:"Rwandan franc",tinType:"",tinName:"",officialLanguageCode:"rw",officialLanguageNameEn:"Kinyarwanda",officialLanguageNameLocal:"Ikinyarwanda",countryCallingCode:"250",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Saudi Arabia",countryNameLocal:"",countryCode:"SA",currencyCode:"SAR",currencyNameEn:"Saudi riyal",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"966",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Solomon Islands",countryNameLocal:"Solomon Islands",countryCode:"SB",currencyCode:"SBD",currencyNameEn:"Solomon Islands dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"677",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Seychelles",countryNameLocal:"Seychelles",countryCode:"SC",currencyCode:"SCR",currencyNameEn:"Seychelles rupee",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"248",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Sweden",countryNameLocal:"Sverige",countryCode:"SE",currencyCode:"SEK",currencyNameEn:"Swedish krona/kronor",tinType:"Momsnr.",tinName:"VAT-nummer",officialLanguageCode:"sv",officialLanguageNameEn:"Swedish",officialLanguageNameLocal:"Svenska",countryCallingCode:"46",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Singapore",countryNameLocal:"Singapore",countryCode:"SG",currencyCode:"SGD",currencyNameEn:"Singapore dollar",tinType:"",tinName:"",officialLanguageCode:"zh-hans",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"65",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Saint Helena, Ascension and Tristan da Cunha",countryNameLocal:"Saint Helena",countryCode:"SH",currencyCode:"SHP",currencyNameEn:"Saint Helena pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"290",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Slovenia",countryNameLocal:"Slovenija",countryCode:"SI",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"ID za DDV",tinName:"Davna tevilka",officialLanguageCode:"sl",officialLanguageNameEn:"Slovenian",officialLanguageNameLocal:"Slovenski Jezik, Slovenina",countryCallingCode:"386",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Svalbard and Jan Mayen",countryNameLocal:"Svalbard and Jan Mayen",countryCode:"SJ",currencyCode:"NOK",currencyNameEn:"Norwegian krone",tinType:"",tinName:"",officialLanguageCode:"no",officialLanguageNameEn:"Norwegian",officialLanguageNameLocal:"Norsk",countryCallingCode:"4779",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Slovakia",countryNameLocal:"Slovensko",countryCode:"SK",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"I DPH",tinName:"Identifikan slo pre da z pridanej hodnoty",officialLanguageCode:"sk",officialLanguageNameEn:"Slovak",officialLanguageNameLocal:"Slovenina, Slovensk Jazyk",countryCallingCode:"421",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Sierra Leone",countryNameLocal:"Sierra Leone",countryCode:"SL",currencyCode:"SLL",currencyNameEn:"Sierra Leonean leone",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"232",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Republic of San Marino",countryNameLocal:"Repubblica di San Marino",countryCode:"SM",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"C.O.E.",tinName:"Codice operatore economico",officialLanguageCode:"it",officialLanguageNameEn:"Italian",officialLanguageNameLocal:"Italiano",countryCallingCode:"378",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Senegal",countryNameLocal:"Sngal",countryCode:"SN",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"221",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Somalia",countryNameLocal:"Somalia, ",countryCode:"SO",currencyCode:"SOS",currencyNameEn:"Somali shilling",tinType:"",tinName:"",officialLanguageCode:"so",officialLanguageNameEn:"Somali",officialLanguageNameLocal:"Soomaaliga, af Soomaali",countryCallingCode:"252",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Suriname",countryNameLocal:"Suriname",countryCode:"SR",currencyCode:"SRD",currencyNameEn:"Surinamese dollar",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"597",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"South Sudan",countryNameLocal:"South Sudan",countryCode:"SS",currencyCode:"SSP",currencyNameEn:"South Sudanese pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"211",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Sao Tome and Principe",countryNameLocal:"So Tom e Prncipe",countryCode:"ST",currencyCode:"STN",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"239",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"El Salvador",countryNameLocal:"El Salvador",countryCode:"SV",currencyCode:"SVC",currencyNameEn:"Salvadoran coln",tinType:"NIT",tinName:"Nmero de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"503",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Sint Maarten (Dutch part)",countryNameLocal:"Sint Maarten",countryCode:"SX",currencyCode:"ANG",currencyNameEn:"Netherlands Antillean guilder",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"1721",areaCodes:[],region:"Unknown",flag:""},{countryNameEn:"Syrian Arab Republic",countryNameLocal:", Sriyya",countryCode:"SY",currencyCode:"SYP",currencyNameEn:"Syrian pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"963",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Chad",countryNameLocal:"Tchad, ",countryCode:"TD",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"235",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Togo",countryNameLocal:"Togo",countryCode:"TG",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"228",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Thailand",countryNameLocal:"",countryCode:"TH",currencyCode:"THB",currencyNameEn:"Thai baht",tinType:"",tinName:"",officialLanguageCode:"th",officialLanguageNameEn:"Thai",officialLanguageNameLocal:"",countryCallingCode:"66",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Tajikistan",countryNameLocal:",",countryCode:"TJ",currencyCode:"TJS",currencyNameEn:"Tajikistani somoni",tinType:"",tinName:"",officialLanguageCode:"tg",officialLanguageNameEn:"Tajik",officialLanguageNameLocal:", toik, ",countryCallingCode:"992",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Tokelau",countryNameLocal:"Tokelau",countryCode:"TK",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"tkl",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"690",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Timor-Leste",countryNameLocal:"Timor-Leste, Timor Lorosa'e",countryCode:"TL",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"670",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Turkmenistan",countryNameLocal:"Trkmenistan",countryCode:"TM",currencyCode:"TMT",currencyNameEn:"Turkmenistan manat",tinType:"",tinName:"",officialLanguageCode:"tk",officialLanguageNameEn:"Turkmen",officialLanguageNameLocal:"Trkmen, ",countryCallingCode:"993",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Tunisia",countryNameLocal:", Tunisie",countryCode:"TN",currencyCode:"TND",currencyNameEn:"Tunisian dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"216",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Tonga",countryNameLocal:"Tonga",countryCode:"TO",currencyCode:"TOP",currencyNameEn:"Tongan paanga",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"676",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Turkey",countryNameLocal:"Trkiye",countryCode:"TR",currencyCode:"TRY",currencyNameEn:"Turkish lira",tinType:"KDV",tinName:"Vergi Kimlik Numaras",officialLanguageCode:"tr",officialLanguageNameEn:"Turkish",officialLanguageNameLocal:"Trke",countryCallingCode:"90",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Trinidad and Tobago",countryNameLocal:"Trinidad and Tobago",countryCode:"TT",currencyCode:"TTD",currencyNameEn:"Trinidad and Tobago dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"868",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Tuvalu",countryNameLocal:"Tuvalu",countryCode:"TV",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"688",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"United Republic of Tanzania",countryNameLocal:"Tanzania",countryCode:"TZ",currencyCode:"TZS",currencyNameEn:"Tanzanian shilling",tinType:"",tinName:"",officialLanguageCode:"sw",officialLanguageNameEn:"Swahili",officialLanguageNameLocal:"Kiswahili",countryCallingCode:"255",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Ukraine",countryNameLocal:"",countryCode:"UA",currencyCode:"UAH",currencyNameEn:"Ukrainian hryvnia",tinType:"",tinName:"   ",officialLanguageCode:"uk",officialLanguageNameEn:"Ukrainian",officialLanguageNameLocal:"",countryCallingCode:"380",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Uganda",countryNameLocal:"Uganda",countryCode:"UG",currencyCode:"UGX",currencyNameEn:"Ugandan shilling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"256",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"United States of America",countryNameLocal:"United States of America",countryCode:"US",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"EIN",tinName:"Tax Identification Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:[],region:"North America",flag:""},{countryNameEn:"Uruguay",countryNameLocal:"Uruguay",countryCode:"UY",currencyCode:"UYU",currencyNameEn:"Uruguayan peso",tinType:"RUT",tinName:"Registro nico Tributario",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"598",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Uzbekistan",countryNameLocal:"",countryCode:"UZ",currencyCode:"UZS",currencyNameEn:"Uzbekistan som",tinType:"",tinName:"   ",officialLanguageCode:"uz",officialLanguageNameEn:"Uzbek",officialLanguageNameLocal:"Ozbek, , ",countryCallingCode:"998",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Saint Vincent and the Grenadines",countryNameLocal:"Saint Vincent and the Grenadines",countryCode:"VC",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1784",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Venezuela (Bolivarian Republic of)",countryNameLocal:"Venezuela",countryCode:"VE",currencyCode:"VES",currencyNameEn:"",tinType:"RIF",tinName:"Registro de Informacion Fiscal",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"58",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Virgin Islands (British)",countryNameLocal:"British Virgin Islands",countryCode:"VG",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1284",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Virgin Islands (U.S.)",countryNameLocal:"United States Virgin Islands",countryCode:"VI",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1340",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Vietnam",countryNameLocal:"Vit Nam",countryCode:"VN",currencyCode:"VND",currencyNameEn:"Vietnamese ng",tinType:"",tinName:"",officialLanguageCode:"vi",officialLanguageNameEn:"Vietnamese",officialLanguageNameLocal:"Ting Vit",countryCallingCode:"84",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Vanuatu",countryNameLocal:"Vanuatu",countryCode:"VU",currencyCode:"VUV",currencyNameEn:"Vanuatu vatu",tinType:"",tinName:"",officialLanguageCode:"bi",officialLanguageNameEn:"Bislama",officialLanguageNameLocal:"Bislama",countryCallingCode:"678",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Wallis and Futuna",countryNameLocal:"Wallis-et-Futuna",countryCode:"WF",currencyCode:"XPF",currencyNameEn:"CFP franc (franc Pacifique)",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"681",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Samoa",countryNameLocal:"Samoa",countryCode:"WS",currencyCode:"WST",currencyNameEn:"Samoan tala",tinType:"",tinName:"",officialLanguageCode:"sm",officialLanguageNameEn:"Samoan",officialLanguageNameLocal:"gagana fa'a Samoa",countryCallingCode:"685",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Yemen",countryNameLocal:"",countryCode:"YE",currencyCode:"YER",currencyNameEn:"Yemeni rial",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"967",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Mayotte",countryNameLocal:"Mayotte",countryCode:"YT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"262",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"South Africa",countryNameLocal:"South Africa",countryCode:"ZA",currencyCode:"ZAR",currencyNameEn:"South African rand",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"27",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Zambia",countryNameLocal:"Zambia",countryCode:"ZM",currencyCode:"ZMW",currencyNameEn:"Zambian kwacha",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"260",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Zimbabwe",countryNameLocal:"Zimbabwe",countryCode:"ZW",currencyCode:"ZWL",currencyNameEn:"Zimbabwean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"263",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Eswatini",countryNameLocal:"Swaziland",countryCode:"SZ",currencyCode:"SZL",currencyNameEn:"Swazi lilangeni",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"268",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"North Macedonia",countryNameLocal:"",countryCode:"MK",currencyCode:"MKD",currencyNameEn:"Macedonian denar",tinType:"",tinName:"",officialLanguageCode:"mk",officialLanguageNameEn:"Macedonian",officialLanguageNameLocal:" ",countryCallingCode:"389",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Philippines",countryNameLocal:"Philippines",countryCode:"PH",currencyCode:"PHP",currencyNameEn:"Philippine peso",tinType:"TIN",tinName:"Tax Identification Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"63",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Netherlands",countryNameLocal:"Nederland",countryCode:"NL",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"Btw-nr.",tinName:"Btw-nummer",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"31",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"United Arab Emirates",countryNameLocal:"   ",countryCode:"AE",currencyCode:"AED",currencyNameEn:"United Arab Emirates dirham",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"971",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Republic of Moldova",countryNameLocal:"Moldova, ",countryCode:"MD",currencyCode:"MDL",currencyNameEn:"Moldovan leu",tinType:"",tinName:"",officialLanguageCode:"ro",officialLanguageNameEn:"Romanian, Moldavian, Moldovan",officialLanguageNameLocal:"Romn",countryCallingCode:"373",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Gambia",countryNameLocal:"The Gambia",countryCode:"GM",currencyCode:"GMD",currencyNameEn:"Gambian dalasi",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"220",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Dominican Republic",countryNameLocal:"Repblica Dominicana",countryCode:"DO",currencyCode:"DOP",currencyNameEn:"Dominican peso",tinType:"RNC",tinName:"Registro Nacional del Contribuyente",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"1",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Sudan",countryNameLocal:"",countryCode:"SD",currencyCode:"SDG",currencyNameEn:"Sudanese pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"249",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Lao People's Democratic Republic",countryNameLocal:"",countryCode:"LA",currencyCode:"LAK",currencyNameEn:"Lao kip",tinType:"",tinName:"",officialLanguageCode:"lo",officialLanguageNameEn:"Lao",officialLanguageNameLocal:"",countryCallingCode:"856",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Taiwan, Province of China",countryNameLocal:"Taiwan",countryCode:"TW",currencyCode:"TWD",currencyNameEn:"New Taiwan dollar",tinType:"",tinName:"",officialLanguageCode:"zh-hant",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"886",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Republic of the Congo",countryNameLocal:"Rpublique du Congo",countryCode:"CG",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"242",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Czechia",countryNameLocal:"esk republika",countryCode:"CZ",currencyCode:"CZK",currencyNameEn:"Czech koruna",tinType:"DI",tinName:"Daov identifikan slo",officialLanguageCode:"cs",officialLanguageNameEn:"Czech",officialLanguageNameLocal:"etina",countryCallingCode:"420",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"United Kingdom",countryNameLocal:"Great Britain",countryCode:"GB",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"VAT Reg No",tinName:"Value added tax registration number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Niger",countryNameLocal:"Niger",countryCode:"NE",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"227",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Democratic Republic of the Congo",countryNameLocal:"Democratic Republic of the Congo",countryCode:"CD",currencyCode:"CDF",currencyNameEn:"Congolese franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"243",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Commonwealth of The Bahamas",countryNameLocal:"Commonwealth of The Bahamas",countryCode:"BS",currencyCode:"BSD",currencyNameEn:"Bahamian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 242",areaCodes:[],region:"Caribbean",flag:""},{countryNameEn:"Cocos (Keeling) Islands",countryNameLocal:"Pulu Kokos (Keeling)",countryCode:"CC",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"61 891",areaCodes:[],region:"Australia",flag:""},{countryNameEn:"Central African Republic",countryNameLocal:"Rpublique centrafricaine",countryCode:"CF",currencyCode:"XAF",currencyNameEn:"Central African CFA",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"236",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Cook Islands",countryNameLocal:"Kki 'irani",countryCode:"CK",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"682",areaCodes:[],region:"South Pacific Ocean",flag:""},{countryNameEn:"Falkland Islands",countryNameLocal:"Falkland Islands",countryCode:"FK",currencyCode:"FKP",currencyNameEn:"Falklands pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"500",areaCodes:[],region:"South Atlantic Ocean",flag:""},{countryNameEn:"Faroe Islands",countryNameLocal:"Frerne",countryCode:"FO",currencyCode:"DKK",currencyNameEn:"Faroese krna",tinType:"",tinName:"",officialLanguageCode:"da",officialLanguageNameEn:"Danish",officialLanguageNameLocal:"dansk",countryCallingCode:"298",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Territory of Heard Island and McDonald Islands",countryNameLocal:"Territory of Heard Island and McDonald Islands",countryCode:"HM",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"672",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"British Indian Ocean Territory",countryNameLocal:"British Indian Ocean Territory",countryCode:"IO",currencyCode:"USD",currencyNameEn:"United States Dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"246",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"Comoros",countryNameLocal:"Umoja wa Komori",countryCode:"KM",currencyCode:"KMF",currencyNameEn:"Comorian franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"269",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"Cayman Islands",countryNameLocal:"Cayman Islands",countryCode:"KY",currencyCode:"KYD",currencyNameEn:"Cayman Islands dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 345",areaCodes:[],region:"Caribbean Sea",flag:""},{countryNameEn:"Republic of the Marshall Islands",countryNameLocal:"Aolepn Aorkin aje",countryCode:"MH",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"692",areaCodes:[],region:"Pacific Ocean",flag:""},{countryNameEn:"Commonwealth of the Northern Mariana Islands",countryNameLocal:"Sankattan Siha Na Islas Marinas",countryCode:"MP",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 670",areaCodes:[],region:"Pacific Ocean",flag:""},{countryNameEn:"Turks and Caicos Islands",countryNameLocal:"Turks and Caicos Islands",countryCode:"TC",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 649",areaCodes:[],region:"Atlantic Ocean",flag:""},{countryNameEn:"French Southern and Antarctic Lands",countryNameLocal:"Terres australes et antarctiques franaises",countryCode:"TF",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"672",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"United States Minor Outlying Islands",countryNameLocal:"United States Minor Outlying Islands",countryCode:"UM",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:[],region:"Pacific Ocean",flag:""},{countryNameEn:"Holy See",countryNameLocal:"Sancta Sedes",countryCode:"VA",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"la",officialLanguageNameEn:"Latin",officialLanguageNameLocal:"lingua latna",countryCallingCode:"39",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Republic of Kosovo",countryNameLocal:"Republika e Kosovs",countryCode:"XK",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"sq",officialLanguageNameEn:"Albanian",officialLanguageNameLocal:"Shqip",countryCallingCode:"383",region:"Europe",flag:""},{countryNameEn:"Netherlands Antilles",countryNameLocal:"Nederlandse Antillen",countryCode:"AN",currencyCode:"ANG",currencyNameEn:"Netherlands Antillean guilder",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"599",region:"Europe",flag:""}];return Cy.default=e,Cy}var VI;function vde(){if(VI)return xs;VI=1;var e=xs&&xs.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(xs,"__esModule",{value:!0}),xs.customList=xs.customArray=xs.findOne=xs.filter=xs.all=xs.utils=void 0;const t=e(xde()),a=e(yde()),s=e(bde());xs.utils={groupBy:t.default};function r(){return s.default}xs.all=r;function i(d,u){return s.default.filter(f=>f[d]===u)}xs.filter=i;function o(d,u){return s.default.find(f=>f[d]===u)}xs.findOne=o;function l(d={name:"{countryNameEn} ({countryCode})",value:"{countryCode}"},{sortBy:u,sortDataBy:f,filter:p}={}){const x=[];let v=s.default;if(typeof p=="function"&&(v=v.filter(p)),f){const N=new Intl.Collator([],{sensitivity:"accent"});v.sort((b,C)=>N.compare(b[f],C[f]))}if(v.forEach(N=>{const b={};for(const C in d)b[C]=(0,a.default)(d[C],N);x.push(b)}),u&&d[u]){const N=new Intl.Collator([],{sensitivity:"accent"});x.sort((b,C)=>N.compare(b[u],C[u]))}return x}xs.customArray=l;function c(d="countryCode",u="{countryNameEn} ({countryCode})",{filter:f}={}){const p={};let x=s.default;return typeof f=="function"&&(x=x.filter(f)),x.forEach(v=>{const N=(0,a.default)(u,v);p[String(v[d])]=N}),p}return xs.customList=c,xs}var Ff=vde();const ET=(...e)=>e.flat().filter(Boolean).join(" "),wde=Ff.all(),E9=wde.map(e=>({code:`+${e.countryCallingCode}`,name:e.countryCode})),kT=[{id:1,title:"Your Account",subtitle:"Personal & Login Details"},{id:2,title:"Company Setup",subtitle:"Business Information"}],Nde=()=>{const e=bt();return n.jsxs("button",{onClick:()=>e("/"),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 transition cursor-pointer",children:[n.jsx(Ru,{className:"size-4 mr-1"})," Back to Home"]})},jde=h.memo(({label:e,id:t,placeholder:a,type:s="text",value:r,onChange:i,isVisible:o,onTogglePass:l,error:c,isSelect:d,options:u})=>{const f=t.toLowerCase().includes("password"),p=f?o?"text":"password":s,x=ET("w-full bg-gray-50 border px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:outline-none cursor-pointer",f?"pr-10":"",c?"border-red-500 focus:border-red-500 focus:ring-2 focus:ring-red-500/50":"border-gray-200 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50");return n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsx("label",{htmlFor:t,className:"text-sm font-medium text-gray-700 cursor-pointer",children:e}),n.jsxs("div",{className:"relative",children:[d?n.jsx("select",{id:t,value:r,onChange:i,required:!0,className:x,children:u.map(v=>n.jsx("option",{value:v,children:v},v))}):n.jsx("input",{id:t,type:p,placeholder:a,value:r,onChange:i,required:!0,className:x}),f&&n.jsx("button",{type:"button",onClick:()=>l(t),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":o?"Hide password":"Show password",children:o?n.jsx(bu,{className:"size-5"}):n.jsx(vu,{className:"size-5"})})]}),c&&n.jsx("p",{className:"mt-1 text-sm text-red-600 font-semibold",children:c})]})}),Qd=jde,Cde=h.memo(({currentStep:e,totalSteps:t})=>n.jsx("div",{className:"flex justify-between items-center mb-10 w-full max-w-xs mx-auto",children:kT.map(a=>n.jsxs(h.Fragment,{children:[n.jsxs("div",{className:"flex flex-col items-center cursor-pointer",children:[n.jsx("div",{className:ET("size-10 flex items-center justify-center rounded-full font-bold transition-all duration-300",a.id===e?"bg-amber-500 text-white shadow-lg":a.id<e?"bg-green-500 text-white":"bg-gray-100 text-gray-500 border-2 border-gray-300"),children:a.id<e?n.jsx(Rk,{className:"size-5"}):a.id}),n.jsx("span",{className:ET("mt-2 text-xs font-medium hidden sm:block",a.id===e?"text-amber-600":"text-gray-500"),children:a.title})]}),a.id<t&&n.jsx("div",{className:"flex-1 h-0.5 mx-1 transition-colors duration-300 bg-gray-300"})]},a.id))})),Sde=h.memo(({formData:e,handleChange:t,handleCodeChange:a,handleTogglePass:s,isPassVisible:r,formError:i,signupError:o,termsAccepted:l,handleTerms:c,isButtonDisabled:d,handleSubmit:u,handleGoogleLogin:f})=>n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center my-6",children:[n.jsx("div",{className:"flex-grow border-t border-gray-300"}),n.jsx("span",{className:"flex-shrink mx-4 text-sm text-gray-500",children:"OR"}),n.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"md:flex md:space-x-4 space-y-6 md:space-y-0",children:[n.jsx("div",{className:"md:w-1/2",children:n.jsx(Qd,{label:"First Name",id:"first_name",placeholder:"John",value:e.first_name,onChange:t})}),n.jsx("div",{className:"md:w-1/2",children:n.jsx(Qd,{label:"Last Name",id:"last_name",placeholder:"Doe",value:e.last_name,onChange:t})})]}),n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsx("label",{htmlFor:"phoneNumber",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Contact Number"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("select",{id:"countryCode",value:e.countryCode,onChange:a,className:"flex-shrink-0 bg-gray-50 border border-gray-200 px-3 py-2.5 rounded-lg text-gray-800 transition shadow-inner focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer",children:E9.map(p=>n.jsxs("option",{value:p.code,children:[p.name," ",p.code]},p.code))}),n.jsx("input",{id:"phone_number",type:"tel",placeholder:"0000000000",maxLength:10,value:e.phone_number,onChange:t,className:"w-full bg-gray-50 border border-gray-200 px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"})]})]}),n.jsx(Qd,{label:"Email Address",id:"email",type:"email",placeholder:"you@company.com",value:e.email,onChange:t}),n.jsx(Qd,{label:"Password",id:"password",placeholder:"Min 8 characters",value:e.password,onChange:t,isVisible:r.password,onTogglePass:s}),n.jsx(Qd,{label:"Confirm Password",id:"confirmPassword",placeholder:"Confirm your password",value:e.confirmPassword,onChange:t,isVisible:r.confirmPassword,onTogglePass:s,error:i}),o&&n.jsx("div",{className:"bg-red-100 border border-red-300 py-2 px-3 text-red-600",children:o}),n.jsxs("div",{className:"flex items-start pt-2",children:[n.jsx("input",{id:"terms",type:"checkbox",checked:l,onChange:c,className:"size-4 mt-1 rounded text-amber-500 border-gray-300 focus:ring-amber-500 cursor-pointer"}),n.jsxs("label",{htmlFor:"terms",className:"ml-3 text-sm font-medium text-gray-700 cursor-pointer",children:["I accept the ",n.jsx("a",{href:"#",className:"text-amber-600 hover:text-amber-700 font-semibold",children:"Terms"})," and ",n.jsx("a",{href:"#",className:"text-amber-600 hover:text-amber-700 font-semibold",children:"Policy"}),"."]})]})]}),i&&n.jsx("div",{className:"mt-4 p-3 text-sm rounded-lg bg-red-100 text-red-700 border border-red-300 font-medium animate-pulse",children:i}),n.jsx("button",{type:"submit",onClick:u,disabled:d,className:"w-full mt-8 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all duration-300 bg-secondary hover:bg-tertiary shadow-lg shadow-tertiary disabled:shadow-none focus-visible:outline-none cursor-pointer",children:"Continue to Company Details"})]})),_de=h.memo(({companyData:e,handleCodeChange1:t,handleSubmit:a,handleCompanyChange:s,formError:r,isSubmitted:i,isButtonDisabled:o,setStep:l,setIsSubmitted:c,setFormError:d})=>n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-6",children:[n.jsx(Qd,{label:"Company Name",id:"company_name",placeholder:"Acme Corp",value:e.company_name,onChange:s}),n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsx("label",{htmlFor:"phoneNumber",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Company Number"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("select",{id:"countryCode",value:e.countryCode,onChange:t,className:"flex-shrink-0 bg-gray-50 border border-gray-200 px-3 py-2.5 rounded-lg text-gray-800 transition shadow-inner focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer",children:E9.map(u=>n.jsxs("option",{value:u.code,children:[u.name," ",u.code]},u.code))}),n.jsx("input",{id:"company_number",type:"tel",placeholder:"0000000000",maxLength:10,value:e.company_number,onChange:s,className:"w-full bg-gray-50 border border-gray-200 px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"})]})]}),n.jsx(Qd,{label:"Company Website",id:"company_website",type:"url",placeholder:"https://www.acme.com",value:e.company_website,onChange:s})]}),r&&n.jsx("div",{className:"p-3 text-sm rounded-lg bg-red-100 text-red-700 border border-red-300 font-medium my-6",children:r}),i&&n.jsx("div",{className:"p-3 text-sm rounded-lg bg-green-100 text-green-700 border border-green-300 font-medium my-6",children:"Account and Company Setup simulated successfully! Welcome aboard."}),n.jsxs("div",{className:"flex space-x-4 mt-8",children:[n.jsxs("button",{type:"button",onClick:()=>{l(1),c(!1),d(null)},className:"flex-1 inline-flex items-center justify-center rounded-lg h-12 px-6 text-gray-700 font-bold tracking-wide border border-gray-300 bg-white hover:bg-tertiary hover:text-white transition-colors focus-visible:ring-2 focus-visible:ring-gray-300 focus-visible:outline-none cursor-pointer",children:[n.jsx(uie,{className:"size-4 mr-2"})," Back"]}),n.jsx("button",{onClick:a,type:"submit",disabled:o,className:"flex-1 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all duration-300 bg-tertiary hover:bg-accent hover:text-secondary shadow-xl shadow-amber-500/30 disabled:shadow-none focus-visible:ring-2 focus-visible:ring-amber-500/50 focus-visible:outline-none cursor-pointer",children:"Create Account"})]})]})),Ade=()=>{const e=["first_name","email","password"],t=["company_name","company_number","company_website"],[a,s]=h.useState(1),[r,i]=h.useState({first_name:"",last_name:"",countryCode:"+63",phone_number:"",email:"",password:"",confirmPassword:"",role:"CEO"}),[o,l]=h.useState({company_name:"",company_number:"",company_website:"",countryCode:"+63"}),[c,d]=h.useState({}),[u,f]=h.useState(!1),[p,x]=h.useState(null),[v,N]=h.useState(!1),{login:b}=Bs(),[C,w]=h.useState({plan_name:"Free",price:0}),[S,E]=h.useState(!1),[k,A]=h.useState(null);h.useEffect(()=>{document.title="Sign Up | Sari-Sari CRM"},[]),h.useEffect(()=>{const de=()=>{window.google&&window.google.accounts?(window.google.accounts.id.initialize({client_id:"222789237297-r8mebl46fdacgpsnlnjca4eu0crn8hf6.apps.googleusercontent.com",callback:T}),window.google.accounts.id.renderButton(document.getElementById("googleSignupBtn"),{theme:"outline",size:"large",text:"signup_with"})):console.error("Google API not loaded properly.")};if(window.google&&window.google.accounts){de();return}const Y=document.createElement("script");Y.src="https://accounts.google.com/gsi/client",Y.async=!0,Y.defer=!0,Y.onload=de,document.body.appendChild(Y)},[]);const T=async de=>{E(!0);try{const Y=HH(de.credential);console.log("Google user:",Y);try{await ie.post("/auth/email-check",{email:Y.email})}catch(se){const J=se.response?.data?.detail||"An error occurred.";A(J),E(!1);return}i(se=>({...se,email:Y.email,first_name:Y.given_name||"",last_name:Y.family_name||"",password:"",profilePicture:Y.picture||"",googleId:Y.sub,auth_provider:"google",id_token:de.credential})),s(2)}catch(Y){console.error("Google signup error:",Y),x("Failed to process Google account. Please try again.")}finally{A(null),x(null),E(!1)}},_=h.useCallback(de=>{const{id:Y,value:se}=de.target;l(J=>({...J,[Y]:se})),x(null)},[]),I=h.useCallback(de=>{const{id:Y,value:se}=de.target;N(!1),i(J=>{const F={...J,[Y]:se};if(a===1){let Ne=null;if(Y==="password"&&se.length>0&&se.length<8)Ne="Password must be at least 8 characters.";else if(Y==="password"||Y==="confirmPassword"){const re=Y==="password"?se:F.password,he=Y==="confirmPassword"?se:F.confirmPassword;re&&he&&re!==he&&(Ne="Passwords don't match.")}x(Ne)}return F})},[a]),R=h.useCallback(de=>i(Y=>({...Y,countryCode:de.target.value})),[]),U=h.useCallback(de=>l(Y=>({...Y,countryCode:de.target.value})),[]),D=h.useCallback(de=>d(Y=>({...Y,[de]:!Y[de]})),[]),M=h.useCallback(de=>f(de.target.checked),[]),W=async de=>{if(de.preventDefault(),N(!1),x(null),a===1){if(!e.every(se=>r[se].trim()!=="")||!u){x("Please fill in all required fields and accept the terms.");return}if(r.password!==r.confirmPassword){x("The passwords you entered do not match. Please try again.");return}if(r.password.length<8){x("Password must be at least 8 characters long.");return}if(r.auth_provider==="google"){s(2);return}try{(await ie.post("/auth/email-check",{email:r.email})).data.detail==="No existing email"&&(x(null),s(2))}catch(se){se.response&&se.response.data&&se.response.data.detail?x(se.response.data.detail):x("Something went wrong. Please try again.")}finally{E(!1)}}else if(a===2){if(!t.every(se=>(o[se]||"").trim()!=="")){x("Please fill in all required company details.");return}try{const{confirmPassword:se,...J}=r,F={...o,company_number:`${o.countryCode} ${o.company_number}`},re=(await ie.post("/company/create",F)).data.id,he={...J,company_id:re,phone_number:`${J.countryCode} ${J.phone_number}`};if(console.log(" Sending payload:",he),J.auth_provider==="google"){const je=await ie.post("/auth/google/signup",he),De={...C,company_id:re,status:"Active"},Me=await ie.post("/subscription/subscribe",De);x(null),N(!0),b(je.data)}else{const je=await ie.post("/auth/signup",he),De={...C,company_id:re,status:"Active"},Me=await ie.post("/subscription/subscribe",De);x(null),N(!0),b(je.data)}}catch(se){if(se.response?.data?.detail){const J=se.response.data.detail;if(Array.isArray(J)){const F=J.map(Ne=>Ne.msg).join(", ");x(F)}else x(typeof J=="object"?J.msg||JSON.stringify(J):J)}else x("Something went wrong. Please try again.")}finally{E(!1)}}},X=h.useCallback(()=>{try{window.google.accounts.id.initialize({client_id:"222789237297-r8mebl46fdacgpsnlnjca4eu0crn8hf6.apps.googleusercontent.com",callback:de=>{const{credential:Y}=de;i(se=>({...se,first_name:Y.given_name||"",last_name:Y.family_name||"",email:Y.email||"",profile_picture:Y.picture||"",auth_provider:"google",id_token:Y})),s(2)}}),window.google.accounts.id.prompt()}catch(de){console.error("Google login error:",de),x("Google login failed. Please try again.")}},[i,x,s]),z=h.useMemo(()=>{if(a===1){const de=e.every(J=>(r[J]||"").trim()!==""),Y=r.password.length>=8,se=r.password===r.confirmPassword;return!u||!!p||!de||!Y||!se}return a===2?!t.every(Y=>(o[Y]||"").trim()!=="")||!!p:!1},[a,u,p,r,o]),Q=kT.find(de=>de.id===a);return n.jsxs("div",{className:"min-h-screen w-full bg-gray-100 font-sans text-gray-800 flex flex-col items-center",children:[n.jsx("div",{className:"w-full py-6 px-4 sm:px-12 lg:px-20 max-w-7xl",children:n.jsxs("div",{className:"flex items-center text-gray-800",children:[n.jsx(Kt,{className:"size-6 text-amber-500 mr-2"}),n.jsx("span",{className:"text-xl font-extrabold tracking-wider",children:"CRM"})]})}),S&&n.jsx(T9,{isLoading:S}),n.jsx("div",{className:"w-full max-w-lg px-4 pt-6",children:n.jsx(Nde,{})}),n.jsx("main",{className:"w-full max-w-lg font-inter mx-auto px-4 pt-3 pb-12",children:n.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-xl p-6 md:p-10",children:[n.jsxs("header",{className:"text-center mb-8",children:[n.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:Q.title}),n.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:Q.subtitle})]}),n.jsx(Cde,{currentStep:a,totalSteps:kT.length}),a===1&&n.jsx("div",{id:"googleSignupBtn"}),n.jsxs("form",{className:"mt-8",children:[a===1&&n.jsx(Sde,{formData:r,handleChange:I,handleCodeChange:R,handleTogglePass:D,isPassVisible:c,formError:p,signupError:k,termsAccepted:u,handleTerms:M,isButtonDisabled:z,handleSubmit:W,handleGoogleLogin:X}),a===2&&n.jsx(_de,{handleSubmit:W,companyData:o,handleCompanyChange:_,formError:p,isSubmitted:v,isButtonDisabled:z,setStep:s,setIsSubmitted:N,setFormError:x,handleCodeChange1:U}),a===1&&n.jsx("div",{className:"text-center mt-6",children:n.jsxs("p",{className:"text-sm text-gray-700",children:["Already have an account?",n.jsx("a",{href:"/login",className:"font-bold text-amber-600 hover:text-amber-700 ml-1 cursor-pointer",children:"Log in"})]})})]})]})})]})},Tde=()=>{const e=bt();return n.jsxs("button",{onClick:()=>e("/"),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 transition mb-3 cursor-pointer",children:[n.jsx(Ru,{className:"size-4 mr-1"})," Back to Home"]})},YI=({label:e,id:t,placeholder:a,type:s="text",value:r,onChange:i,isPassVisible:o,onTogglePass:l})=>{const c=t.toLowerCase().includes("password"),d=c?o?"text":"password":s;return n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsx("label",{htmlFor:t,className:"text-sm font-medium text-gray-700",children:e}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{id:t,type:d,placeholder:a,value:r,onChange:i,required:!0,className:"w-full bg-gray-50 border border-gray-200 px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"}),c&&n.jsx("button",{type:"button",onClick:l,className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":o?"Hide password":"Show password",children:o?n.jsx(bu,{className:"size-5"}):n.jsx(vu,{className:"size-5"})})]})]})},Ede=()=>{const[e,t]=h.useState({email:"",password:""}),[a,s]=h.useState(!1),[r,i]=h.useState(null),[o,l]=h.useState(!1),{isLoggedIn:c,login:d,userRole:u}=Bs(),f=bt();h.useEffect(()=>{document.title="Login | Sari-Sari CRM"},[]),h.useEffect(()=>{c&&(u==="CEO"||u==="Admin"?f("/admin"):u==="Group Manager"?f("/group-manager"):u==="Manager"?f("/manager"):u==="Marketing"?f("/marketing"):u==="Sales"&&f("/sales"))},[c,f,u]);const p=N=>{const{id:b,value:C}=N.target;t(w=>({...w,[b]:C}))},x=async N=>{N.preventDefault(),i(null);try{const b=await ie.post("/auth/login",e);d(b.data),i(null)}catch(b){b.response&&b.response.data&&b.response.data.detail?i(b.response.data.detail):i("Something went wrong. Please try again.")}};h.useEffect(()=>{const N=document.createElement("script");return N.src="https://accounts.google.com/gsi/client",N.async=!0,N.defer=!0,N.onload=()=>{window.google&&(window.google.accounts.id.initialize({client_id:"222789237297-r8mebl46fdacgpsnlnjca4eu0crn8hf6.apps.googleusercontent.com",callback:v}),window.google.accounts.id.renderButton(document.getElementById("googleLoginBtn"),{theme:"outline",size:"large",text:"signin_with"}))},document.body.appendChild(N),()=>{document.body.contains(N)&&document.body.removeChild(N)}},[]);const v=async N=>{l(!0);try{const b=HH(N.credential),C=await ie.post("/auth/google/login",{id_token:N.credential});d(C.data)}catch(b){console.error("Google login failed:",b);const C=b.response?.data?.detail||"Google login failed. Please try again.";i(C)}finally{l(!1)}};return n.jsxs("div",{className:"min-h-screen w-full bg-gray-100 font-sans text-gray-800 flex flex-col items-center",children:[n.jsx("div",{className:"w-full py-6 px-4 sm:px-12 lg:px-20 max-w-7xl",children:n.jsx("div",{className:"flex items-center text-gray-800",children:n.jsx("span",{className:"text-xl font-extrabold tracking-wider",children:"CRM"})})}),o&&n.jsx(T9,{isLoading:o}),n.jsxs("main",{className:"w-full max-w-lg font-inter mx-auto px-4 pt-6 pb-12",children:[n.jsx(Tde,{}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-xl p-6 md:p-10",children:[n.jsxs("header",{className:"text-center mb-6",children:[n.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Login"}),n.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:"Sign in to access your dashboard."})]}),n.jsx("div",{id:"googleLoginBtn"}),n.jsxs("div",{className:"flex items-center my-6",children:[n.jsx("div",{className:"flex-grow border-t border-gray-300"}),n.jsx("span",{className:"flex-shrink mx-4 text-sm text-gray-500",children:"OR"}),n.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),n.jsxs("form",{onSubmit:x,className:"space-y-6 cursor-pointer",children:[n.jsx(YI,{label:"Email",id:"email",type:"email",placeholder:"you@example.com",value:e.email,onChange:p}),n.jsx(YI,{label:"Password",id:"password",type:"password",placeholder:"Enter your password",value:e.password,onChange:p,isPassVisible:a,onTogglePass:()=>s(N=>!N)}),r&&n.jsx("div",{className:"bg-red-100 border border-red-300 py-2 px-3 text-red-600",children:r}),n.jsx("button",{type:"submit",className:"w-full mt-2 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all disabled:opacity-50 bg-secondary text-gray-900 hover:bg-tertiary shadow-xl focus-visible:ring-2 focus-visible:ring-amber-500/50 cursor-pointer",children:"Log In"}),n.jsx("div",{className:"text-center mt-1",children:n.jsx("a",{href:"/forgot-password",className:"text-sm font-medium text-amber-600 hover:text-amber-700 cursor-pointer",children:"Forgot Password?"})})]}),n.jsx("div",{className:"text-center mt-6",children:n.jsxs("p",{className:"text-sm text-gray-700",children:["Don't have an account?",n.jsx("a",{href:"/signup",className:"font-bold text-amber-600 hover:text-amber-700 ml-1 cursor-pointer",children:"Sign Up"})]})})]})]})]})},kde=({onClick:e})=>n.jsxs("button",{onClick:e,className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 transition mb-3 cursor-pointer",children:[n.jsx(Ru,{className:"size-4 mr-1"})," Back"]}),SS=({label:e,id:t,placeholder:a,type:s="text",value:r,onChange:i,icon:o})=>{const[l,c]=h.useState(!1),d=s==="password";return n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsx("label",{htmlFor:t,className:"text-sm font-medium text-gray-700",children:e}),n.jsxs("div",{className:"relative flex items-center",children:[o&&n.jsx(o,{className:"absolute left-3 text-gray-500 size-5"}),n.jsx("input",{id:t,type:d&&l?"text":s,placeholder:a,value:r,onChange:i,required:!0,className:"w-full bg-gray-50 border border-gray-200 pl-10 pr-10 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"}),d&&n.jsx("button",{type:"button",onClick:()=>c(u=>!u),className:"absolute right-3 text-gray-500",children:l?n.jsx(bu,{className:"size-5"}):n.jsx(vu,{className:"size-5"})})]})]})},Lde=({otp:e,setOtp:t})=>n.jsx("div",{className:"flex justify-between gap-2",children:[...Array(6)].map((a,s)=>n.jsx("input",{type:"text",maxLength:"1",className:"w-12 h-12 text-center text-lg font-bold border border-gray-300 rounded-lg focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50",value:e[s]||"",onChange:r=>{const i=r.target.value;if(/\d/.test(i)||i===""){const o=[...e];o[s]=i,t(o)}}},s))}),Pde=()=>{const e=bt(),[t,a]=h.useState(1),[s,r]=h.useState(""),[i,o]=h.useState(["","","","","",""]),[l,c]=h.useState(""),[d,u]=h.useState(""),f=N=>{N.preventDefault(),a(2)},p=N=>{N.preventDefault(),a(3)},x=N=>{if(N.preventDefault(),l!==d){alert("Passwords do not match!");return}alert("Password reset successfully!")},v=()=>{t>1?a(t-1):e("/login")};return n.jsxs("div",{className:"min-h-screen w-full bg-gray-100 font-sans text-gray-800 flex flex-col items-center",children:[n.jsx("div",{className:"w-full py-6 px-4 sm:px-12 lg:px-20 max-w-7xl",children:n.jsx("div",{className:"flex items-center text-gray-800",children:n.jsx("span",{className:"text-xl font-extrabold tracking-wider",children:"CRM"})})}),n.jsxs("main",{className:"w-full max-w-lg font-inter mx-auto px-4 pt-6 pb-12",children:[n.jsx(kde,{onClick:v}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-xl p-6 md:p-10",children:[t===1&&n.jsxs(n.Fragment,{children:[n.jsxs("header",{className:"text-center mb-6",children:[n.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Forgot Password"}),n.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:"Enter your email and we'll send you a verification code."})]}),n.jsxs("form",{onSubmit:f,className:"space-y-6 cursor-pointer",children:[n.jsx(SS,{label:"Email Address",id:"email",type:"email",placeholder:"you@example.com",value:s,onChange:N=>r(N.target.value),icon:Xn}),n.jsx("button",{className:"w-full mt-3 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all bg-secondary text-gray-900 hover:bg-tertiary shadow-xl",children:"Send OTP"})]})]}),t===2&&n.jsxs(n.Fragment,{children:[n.jsxs("header",{className:"text-center mb-6",children:[n.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Enter Verification Code"}),n.jsxs("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:["We've sent a 6-digit code to ",n.jsx("strong",{children:s}),"."]})]}),n.jsxs("form",{onSubmit:p,className:"space-y-6",children:[n.jsx(Lde,{otp:i,setOtp:o}),n.jsx("button",{className:"w-full mt-3 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all bg-secondary text-gray-900 hover:bg-tertiary shadow-xl",children:"Verify Code"})]})]}),t===3&&n.jsxs(n.Fragment,{children:[n.jsxs("header",{className:"text-center mb-6",children:[n.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Reset Password"}),n.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:"Enter your new password below."})]}),n.jsxs("form",{onSubmit:x,className:"space-y-6",children:[n.jsx(SS,{label:"New Password",id:"password",type:"password",placeholder:"Enter new password",value:l,onChange:N=>c(N.target.value),icon:yo}),n.jsx(SS,{label:"Confirm Password",id:"confirm-password",type:"password",placeholder:"Confirm new password",value:d,onChange:N=>u(N.target.value),icon:yo}),n.jsx("button",{className:"w-full mt-3 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all bg-secondary text-gray-900 hover:bg-tertiary shadow-xl",children:"Reset Password"})]})]})]})]})]})},Xt=()=>{const[e,t]=h.useState(null),[a,s]=h.useState(!1),[r,i]=h.useState(!0),o=bt(),l=async()=>{try{const d=await ie.get("/auth/me");t(d.data),s(!0)}catch(d){t(null),s(!1),console.warn("Unauthorized  possible expired token or not logged in.",d)}finally{i(!1)}};return h.useEffect(()=>{l()},[]),{user:e,isLoggedIn:a,loading:r,fetchUser:l,logout:async()=>{try{await ie.post("/auth/logout")}catch{}t(null),s(!1),o("/login")}}};function zt({message:e="Loading..."}){return n.jsx("div",{className:"absolute inset-0 bg-primary/90 flex items-center justify-center z-40 lg:flex hidden",children:n.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[n.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0ms",animationDuration:"0.6s"}}),n.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"150ms",animationDuration:"0.6s"}}),n.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"300ms",animationDuration:"0.6s"}})]})})}const Dde=(e,t)=>{const a=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${a}${s}`.toUpperCase()||"U"};function Sy(){const{user:e,loading:t,fetchUser:a}=Xt(),[s,r]=h.useState(!1),[i,o]=h.useState(!1),[l,c]=h.useState(!1),[d,u]=h.useState(!1),[f,p]=h.useState(!1),[x,v]=h.useState(!1),[N,b]=h.useState(!1),[C,w]=h.useState(!1),[S,E]=h.useState(null),[k,A]=h.useState(null),T=h.useRef(null),[_,I]=h.useState({firstName:"",lastName:"",email:"",phoneNumber:""}),[R,U]=h.useState({currentPassword:"",newPassword:"",confirmPassword:""});h.useEffect(()=>{e&&(I({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),A(e.profile_picture||null))},[e]),h.useEffect(()=>{document.title="Manage Account | Sari-Sari CRM"},[]);const D=(Q,de)=>{I(Y=>({...Y,[Q]:de}))},M=(Q,de)=>{U(Y=>({...Y,[Q]:de}))},W=Q=>{const de=Q.target.files?.[0];if(!de)return;if(!de.type.startsWith("image/")){q.error("Please select an image file");return}if(de.size>5*1024*1024){q.error("Image size should be less than 5MB");return}const Y=new FileReader;Y.onloadend=()=>{E(Y.result),A(Y.result)},Y.readAsDataURL(de)},X=async Q=>{if(Q.preventDefault(),!_.firstName.trim()||!_.lastName.trim()){q.warn("Please fill in all required fields.");return}o(!0);try{const de={first_name:_.firstName.trim(),last_name:_.lastName.trim(),phone_number:_.phoneNumber.trim()||null};S!==null&&(de.profile_picture=S),await ie.put("/users/me",de),await a(),c(!1),E(null),window.dispatchEvent(new CustomEvent("userProfileUpdated")),q.success("Account information updated successfully!")}catch(de){console.error("Error updating account:",de);const Y=de.response?.data?.detail||"Failed to update account information. Please try again.";q.error(Y)}finally{o(!1)}},z=async Q=>{if(Q.preventDefault(),!R.newPassword||!R.confirmPassword){q.warn("Please fill in all password fields.");return}if(R.newPassword.length<8){q.warn("Password must be at least 8 characters long.");return}if(R.newPassword!==R.confirmPassword){q.warn("New password and confirm password do not match.");return}w(!0);try{const de={password:R.newPassword};await ie.put("/users/me",de),await a(),U({currentPassword:"",newPassword:"",confirmPassword:""}),window.dispatchEvent(new CustomEvent("userProfileUpdated")),w(!1),q.success("Password changed successfully!")}catch(de){console.error("Error changing password:",de);const Y=de.response?.data?.detail||"Failed to change password. Please try again.";q.error(Y)}finally{w(!1)}};return n.jsxs("div",{className:"p-2 lg:p-8 font-inter relative",children:[(t||!e)&&n.jsx(zt,{}),e&&n.jsxs("div",{children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-gray-800 mb-2",children:"Manage Your Account"}),n.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Update your account information and change your password"})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mb-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:[n.jsx(en,{className:"text-blue-600"}),"Profile Information"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:!l&&n.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition text-sm",children:[n.jsx(la,{}),"Edit Profile"]})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 mb-6 pb-6 border-b border-gray-200",children:[n.jsxs("div",{className:"flex-shrink-0 relative group",children:[k?n.jsx("div",{className:"relative",children:n.jsx("img",{src:k,alt:`${e.first_name} ${e.last_name}`,className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full object-cover border-2 border-gray-200 shadow-sm"})}):n.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 text-white flex items-center justify-center text-2xl sm:text-3xl font-semibold border-2 border-gray-200 shadow-sm",children:Dde(e.first_name,e.last_name)}),l&&n.jsxs("div",{className:"absolute bottom-0 right-0",children:[n.jsx("input",{type:"file",ref:T,accept:"image/*",onChange:W,className:"hidden",id:"profile-picture-upload"}),n.jsx("label",{htmlFor:"profile-picture-upload",className:"cursor-pointer bg-gray-900 text-white p-1.5 rounded-full shadow-lg hover:bg-gray-800 transition flex items-center justify-center border-2 border-white",title:"Change profile picture",children:n.jsx(zH,{size:14})})]})]}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[e.first_name," ",e.last_name]}),n.jsx("p",{className:"text-gray-600 text-sm",children:e.email}),n.jsx("span",{className:"inline-block mt-2 px-3 py-1 bg-blue-100 text-blue-700 text-xs font-semibold rounded-md",children:e.role})]})]}),l?n.jsxs("form",{onSubmit:X,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["First Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(en,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",value:_.firstName,onChange:Q=>D("firstName",Q.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(en,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",value:_.lastName,onChange:Q=>D("lastName",Q.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),n.jsxs("div",{className:"sm:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Email"}),n.jsxs("div",{className:"relative",children:[n.jsx(Xn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"email",value:_.email,disabled:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-600 cursor-not-allowed outline-none",readOnly:!0})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),n.jsxs("div",{className:"sm:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Phone Number"}),n.jsxs("div",{className:"relative",children:[n.jsx(At,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"tel",value:_.phoneNumber,onChange:Q=>D("phoneNumber",Q.target.value),placeholder:"+1 (555) 123-4567",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t border-gray-200",children:[n.jsx("button",{type:"button",onClick:()=>{c(!1),I({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),E(null),A(e.profile_picture||null),T.current&&(T.current.value="")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition",disabled:i,children:"Cancel"}),n.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:i,children:[n.jsx(Uk,{}),i?"Saving...":"Save Changes"]})]})]}):n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"First Name"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.first_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Name"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.last_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Email"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Phone Number"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.phone_number||"N/A"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[n.jsx(yo,{className:"text-blue-600"}),"Change Password"]}),n.jsxs("form",{onSubmit:z,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["New Password ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(yo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",style:x?void 0:{WebkitTextSecurity:"disc"},value:R.newPassword,onChange:Q=>M("newPassword",Q.target.value),placeholder:"Enter new password (min. 8 characters)",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),n.jsx("button",{type:"button",onClick:()=>v(Q=>!Q),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":x?"Hide password":"Show password",children:x?n.jsx(bu,{className:"size-5"}):n.jsx(vu,{className:"size-5"})})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Confirm New Password ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(yo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",style:N?void 0:{WebkitTextSecurity:"disc"},value:R.confirmPassword,onChange:Q=>M("confirmPassword",Q.target.value),placeholder:"Confirm new password",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),n.jsx("button",{type:"button",onClick:()=>b(Q=>!Q),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":N?"Hide password":"Show password",children:N?n.jsx(bu,{className:"size-5"}):n.jsx(vu,{className:"size-5"})})]})]}),n.jsx("div",{className:"pt-4 border-t border-gray-200 flex justify-center lg:justify-start",children:n.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:C,children:[n.jsx(yo,{}),C?"Changing Password...":"Change Password"]})})]})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mt-6",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[n.jsx(FH,{className:"text-blue-600"}),"Account Information"]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Role"}),n.jsx("span",{className:"inline-block px-3 py-1 bg-blue-100 text-blue-700 text-sm font-semibold rounded-md",children:e.role})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Status"}),n.jsx("span",{className:`inline-block px-3 py-1 text-sm font-semibold rounded-md ${e.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:e.is_active?"Active":"Inactive"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Company"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.company?.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Auth Provider"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.auth_provider?e.auth_provider.charAt(0).toUpperCase()+e.auth_provider.slice(1):"N/A"})]}),e.created_at&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Account Created"}),n.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),e.last_login&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Login"}),n.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.last_login).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})})]})]})]})]})]})}const Jw=e=>{const t="https://crm.sari-sari.com";try{const a=new URL(t),s=a.protocol==="https:"?"wss":"ws",r=a.hostname,i=a.port||(a.protocol==="https:"?443:80),o=`${s}://${r}:${i}/ws/notifications?user_id=${e}`;return console.log(" WebSocket URL:",o),o}catch(a){return console.error("Error parsing API URL:",a),`ws://localhost:8000/ws/notifications?user_id=${e}`}};function Ode({toggleSidebar:e}){const[t,a]=h.useState(!1),[s,r]=h.useState(!1),[i,o]=h.useState([]),[l,c]=h.useState(0),d=h.useRef(null),u=h.useRef(null),f=Qt(),p=bt(),{logout:x}=Bs(),{user:v,fetchUser:N}=Xt(),C={"/admin/dashboard":"Dashboard","/admin/accounts":"Accounts","/admin/contacts":"Contacts","/reports":"Reports","/leads":"Leads","/admin/Audit":"Audit","/admin/targets":"Targets","/admin/leads":"Leads","/admin/quotes":"Quotes","/admin/users":"Users","/admin/deals":"Deals"}[f.pathname]||"Admin Panel";return h.useEffect(()=>{const w=()=>{N()};return window.addEventListener("userProfileUpdated",w),()=>{window.removeEventListener("userProfileUpdated",w)}},[N]),h.useEffect(()=>{if(!v?.id)return;const w=Jw(v.id);console.log(" Connecting to WebSocket:",w);const S=new WebSocket(w);let E;const k=()=>{E=setTimeout(()=>{console.log(" Attempting WebSocket reconnection...")},3e3)};return S.onopen=()=>{console.log(" Admin WS Connected"),clearTimeout(E)},S.onmessage=A=>{try{const T=JSON.parse(A.data);console.log(" Notification received:",T),o(_=>[T,..._]),c(_=>_+1)}catch(T){console.error("Error parsing notification:",T)}},S.onerror=A=>{console.error(" Admin WS Error:",A)},S.onclose=()=>{console.log(" Admin WS Disconnected"),k()},()=>{clearTimeout(E),S&&S.readyState===WebSocket.OPEN&&S.close()}},[v?.id]),h.useEffect(()=>{function w(S){d.current&&!d.current.contains(S.target)&&a(!1),u.current&&!u.current.contains(S.target)&&r(!1)}return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),n.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:n.jsx(ex,{className:"text-2xl"})}),n.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:C})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"relative",ref:u,children:[n.jsxs("button",{onClick:()=>r(!s),className:"relative text-gray-600 hover:text-gray-800 transition",children:[n.jsx(Zp,{className:"text-xl"}),l>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] w-4 h-4 flex items-center justify-center rounded-full font-semibold",children:l})]}),s&&n.jsxs("div",{className:"absolute right-0 mt-3 w-80 bg-white rounded-xl shadow-lg border z-50 overflow-hidden animate-fade-in",children:[n.jsxs("div",{className:"p-3 border-b bg-gray-50 flex justify-between items-center",children:[n.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:"Notifications"}),n.jsx("button",{onClick:()=>{o([]),c(0)},className:"text-xs text-blue-600 hover:underline",children:"Clear"})]}),n.jsx("div",{className:"max-h-60 overflow-y-auto",children:i.length>0?i.map((w,S)=>n.jsx("div",{className:"p-3 border-b text-sm hover:bg-gray-50 cursor-pointer",children:w.title||w.message||"New Update"},S)):n.jsx("div",{className:"p-4 text-center text-gray-500 text-xs",children:"No notifications"})})]})]}),n.jsxs("div",{className:"relative",ref:d,children:[n.jsxs("button",{onClick:()=>a(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[n.jsx("img",{src:v?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 aspect-square object-cover rounded-full"}),n.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[v?.first_name," ",v?.last_name]})]}),t&&n.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4",children:[n.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[n.jsx("img",{src:v?.profile_picture||"https://via.placeholder.com/80",alt:"Profile",className:"w-16 h-16 rounded-full object-cover"}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[v?.first_name," ",v?.middle_name," ",v?.last_name]}),n.jsx("p",{className:"text-[11px] text-gray-600 font-light w-full truncate",children:"CEO"})]})]}),n.jsxs("div",{className:"mt-6 space-y-1 px-4 text-left",children:[n.jsx("button",{onClick:()=>{p("/admin/users"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Invite Your Team"}),n.jsx("button",{onClick:()=>{p("/admin/manage-account"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Manage Your Account"}),n.jsx("div",{className:"border-t border-gray-200 my-2"}),n.jsx("button",{onClick:x,className:"block w-full text-sm text-red-600 hover:text-red-700 hover:bg-gray-50 py-2 rounded text-left",children:"Logout"})]})]})]})]})]})}function Mde(){const[e,t]=h.useState(!1),[a,s]=h.useState(!1),[r,i]=h.useState(!1),[o,l]=h.useState(!1),c=Qt(),{user:d}=Xt();h.useEffect(()=>{d&&console.log("Fetched user:",d)},[d]),h.useEffect(()=>{document.title="Admin Panel | Sari-Sari CRM"},[]);const f=["/admin/accounts","/admin/contacts","/admin/leads","/admin/deals","/admin/quotes","/admin/targets"].includes(c.pathname);h.useEffect(()=>{f&&t(!0)},[c.pathname]);const p="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",x="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition";return n.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[n.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${o?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[n.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[n.jsxs("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:[" Sari-Sari.CRM"," ",n.jsx("span",{className:"text-[12px] text-gray-700 font-medium align-bottom",children:"v2"})]}),d&&d.company&&n.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:d.company.company_name})]}),n.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[n.jsxs(Ot,{to:"/admin/dashboard",className:({isActive:v})=>v?p:x,children:[n.jsx(Jp,{className:"text-lg"}),n.jsx("span",{children:"Dashboard"})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>t(!e),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Kt,{className:"text-lg"}),"Sales"]}),n.jsx(jt,{className:`transition-transform ${e?"rotate-180":""}`})]}),e&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(Ot,{to:"/admin/accounts",className:({isActive:v})=>v?p:x,children:[n.jsx(dd,{})," Accounts"]}),n.jsxs(Ot,{to:"/admin/contacts",className:({isActive:v})=>v?p:x,children:[n.jsx(en,{})," Contacts"]}),n.jsxs(Ot,{to:"/admin/leads",className:({isActive:v})=>v?p:x,children:[n.jsx(Gn,{})," Leads"]}),n.jsxs(Ot,{to:"/admin/deals",className:({isActive:v})=>v?p:x,children:[n.jsx(Kt,{})," Deals"]}),n.jsxs(Ot,{to:"/admin/quotes",className:({isActive:v})=>v?p:x,children:[n.jsx(xn,{})," Quotes"]}),n.jsxs(Ot,{to:"/admin/targets",className:({isActive:v})=>v?p:x,children:[n.jsx(tr,{})," Targets"]})]})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!a),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(ws,{className:"text-lg"}),"Activity"]}),n.jsx(jt,{className:`transition-transform ${a?"rotate-180":""}`})]}),a&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(Ot,{to:"/admin/tasks",className:({isActive:v})=>v?p:x,children:[n.jsx(qt,{})," Tasks"]}),n.jsxs(Ot,{to:"/admin/meetings",className:({isActive:v})=>v?p:x,children:[n.jsx(Ct,{})," Meetings"]}),n.jsxs(Ot,{to:"/admin/calls",className:({isActive:v})=>v?p:x,children:[n.jsx(Ls,{})," Calls"]}),n.jsxs(Ot,{to:"/admin/audit",className:({isActive:v})=>v?p:x,children:[n.jsx(ws,{})," Audit"]})]})]}),n.jsx("div",{children:n.jsx(Ot,{to:"/admin/territory",className:({isActive:v})=>v?p:x,children:n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Hl,{className:"text-lg"}),"Territory"]})})}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!r),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Fk,{className:"text-lg"}),"User Management"]}),n.jsx(jt,{className:`transition-transform ${r?"rotate-180":""}`})]}),r&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(Ot,{to:"/admin/users",className:({isActive:v})=>v?p:x,children:[n.jsx(Zn,{})," Users"]}),n.jsxs(Ot,{to:"/admin/manage-account",className:({isActive:v})=>v?p:x,children:[n.jsx(en,{})," Manage Account"]}),n.jsxs(Ot,{to:"/admin/company-details",className:({isActive:v})=>v?p:x,children:[n.jsx(Mw,{})," Settings"]})]})]})]}),n.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),o&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>l(!1)}),n.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[n.jsx(Ode,{toggleSidebar:()=>l(!o)}),n.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:n.jsx(Gp,{})})]})]})}function Ide(e){return St({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M160 0c17.7 0 32 14.3 32 32l0 35.7c1.6 .2 3.1 .4 4.7 .7c.4 .1 .7 .1 1.1 .2l48 8.8c17.4 3.2 28.9 19.9 25.7 37.2s-19.9 28.9-37.2 25.7l-47.5-8.7c-31.3-4.6-58.9-1.5-78.3 6.2s-27.2 18.3-29 28.1c-2 10.7-.5 16.7 1.2 20.4c1.8 3.9 5.5 8.3 12.8 13.2c16.3 10.7 41.3 17.7 73.7 26.3l2.9 .8c28.6 7.6 63.6 16.8 89.6 33.8c14.2 9.3 27.6 21.9 35.9 39.5c8.5 17.9 10.3 37.9 6.4 59.2c-6.9 38-33.1 63.4-65.6 76.7c-13.7 5.6-28.6 9.2-44.4 11l0 33.4c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-34.9c-.4-.1-.9-.1-1.3-.2l-.2 0s0 0 0 0c-24.4-3.8-64.5-14.3-91.5-26.3c-16.1-7.2-23.4-26.1-16.2-42.2s26.1-23.4 42.2-16.2c20.9 9.3 55.3 18.5 75.2 21.6c31.9 4.7 58.2 2 76-5.3c16.9-6.9 24.6-16.9 26.8-28.9c1.9-10.6 .4-16.7-1.3-20.4c-1.9-4-5.6-8.4-13-13.3c-16.4-10.7-41.5-17.7-74-26.3l-2.8-.7s0 0 0 0C119.4 279.3 84.4 270 58.4 253c-14.2-9.3-27.5-22-35.8-39.6c-8.4-17.9-10.1-37.9-6.1-59.2C23.7 116 52.3 91.2 84.8 78.3c13.3-5.3 27.9-8.9 43.2-11L128 32c0-17.7 14.3-32 32-32z"},child:[]}]})(e)}function $de(e){return St({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M544 248l0 3.3 69.7-69.7c21.9-21.9 21.9-57.3 0-79.2L535.6 24.4c-21.9-21.9-57.3-21.9-79.2 0L416.3 64.5c-2.7-.3-5.5-.5-8.3-.5L296 64c-37.1 0-67.6 28-71.6 64l-.4 0 0 120c0 22.1 17.9 40 40 40s40-17.9 40-40l0-72c0 0 0-.1 0-.1l0-15.9 16 0 136 0c0 0 0 0 .1 0l7.9 0c44.2 0 80 35.8 80 80l0 8zM336 192l0 56c0 39.8-32.2 72-72 72s-72-32.2-72-72l0-118.6c-35.9 6.2-65.8 32.3-76 68.2L99.5 255.2 26.3 328.4c-21.9 21.9-21.9 57.3 0 79.2l78.1 78.1c21.9 21.9 57.3 21.9 79.2 0l37.7-37.7c.9 0 1.8 .1 2.7 .1l160 0c26.5 0 48-21.5 48-48c0-5.6-1-11-2.7-16l2.7 0c26.5 0 48-21.5 48-48c0-12.8-5-24.4-13.2-33c25.7-5 45.1-27.6 45.2-54.8l0-.4c-.1-30.8-25.1-55.8-56-55.8c0 0 0 0 0 0l-120 0z"},child:[]}]})(e)}function Rde(e){return St({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M64 32C46.3 32 32 46.3 32 64l0 64c-17.7 0-32 14.3-32 32s14.3 32 32 32l0 32c-17.7 0-32 14.3-32 32s14.3 32 32 32l0 64 0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-64 80 0c68.4 0 127.7-39 156.8-96l19.2 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-.7 0c.5-5.3 .7-10.6 .7-16s-.2-10.7-.7-16l.7 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-19.2 0C303.7 71 244.4 32 176 32L64 32zm190.4 96L96 128l0-32 80 0c30.5 0 58.2 12.2 78.4 32zM96 192l190.9 0c.7 5.2 1.1 10.6 1.1 16s-.4 10.8-1.1 16L96 224l0-32zm158.4 96c-20.2 19.8-47.9 32-78.4 32l-80 0 0-32 158.4 0z"},child:[]}]})(e)}function yi({props:e,name:t}){return Fle({props:e,name:t,defaultTheme:aL,themeId:Zw})}function Tl(e){const{elementType:t,externalSlotProps:a,ownerState:s,skipResolvingSlotProps:r=!1,...i}=e,o=r?{}:C9(a,s),{props:l,internalRef:c}=S9({...i,externalSlotProps:o}),d=Eo(c,o?.ref,e.additionalProps?.ref);return j9(t,{...l,ref:d},s)}function ls(e){const t=h.useRef(e);return Xa(()=>{t.current=e}),h.useRef((...a)=>(0,t.current)(...a)).current}var tv=Symbol("NOT_FOUND");function zde(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Ude(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Fde(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(a=>typeof a=="function")){const a=e.map(s=>typeof s=="function"?`function ${s.name||"unnamed"}()`:typeof s).join(", ");throw new TypeError(`${t}[${a}]`)}}var QI=e=>Array.isArray(e)?e:[e];function Bde(e){const t=Array.isArray(e[0])?e[0]:e;return Fde(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Hde(e,t){const a=[],{length:s}=e;for(let r=0;r<s;r++)a.push(e[r].apply(null,t));return a}function Gde(e){let t;return{get(a){return t&&e(t.key,a)?t.value:tv},put(a,s){t={key:a,value:s}},getEntries(){return t?[t]:[]},clear(){t=void 0}}}function Wde(e,t){let a=[];function s(l){const c=a.findIndex(d=>t(l,d.key));if(c>-1){const d=a[c];return c>0&&(a.splice(c,1),a.unshift(d)),d.value}return tv}function r(l,c){s(l)===tv&&(a.unshift({key:l,value:c}),a.length>e&&a.pop())}function i(){return a}function o(){a=[]}return{get:s,put:r,getEntries:i,clear:o}}var qde=(e,t)=>e===t;function Vde(e){return function(a,s){if(a===null||s===null||a.length!==s.length)return!1;const{length:r}=a;for(let i=0;i<r;i++)if(!e(a[i],s[i]))return!1;return!0}}function Yde(e,t){const a=typeof t=="object"?t:{equalityCheck:t},{equalityCheck:s=qde,maxSize:r=1,resultEqualityCheck:i}=a,o=Vde(s);let l=0;const c=r<=1?Gde(o):Wde(r,o);function d(){let u=c.get(arguments);if(u===tv){if(u=e.apply(null,arguments),l++,i){const p=c.getEntries().find(x=>i(x.value,u));p&&(u=p.value,l!==0&&l--)}c.put(arguments,u)}return u}return d.clearCache=()=>{c.clear(),d.resetResultsCount()},d.resultsCount=()=>l,d.resetResultsCount=()=>{l=0},d}var Qde=class{constructor(e){this.value=e}deref(){return this.value}},Kde=typeof WeakRef<"u"?WeakRef:Qde,Xde=0,KI=1;function _y(){return{s:Xde,v:void 0,o:null,p:null}}function k9(e,t={}){let a=_y();const{resultEqualityCheck:s}=t;let r,i=0;function o(){let l=a;const{length:c}=arguments;for(let f=0,p=c;f<p;f++){const x=arguments[f];if(typeof x=="function"||typeof x=="object"&&x!==null){let v=l.o;v===null&&(l.o=v=new WeakMap);const N=v.get(x);N===void 0?(l=_y(),v.set(x,l)):l=N}else{let v=l.p;v===null&&(l.p=v=new Map);const N=v.get(x);N===void 0?(l=_y(),v.set(x,l)):l=N}}const d=l;let u;if(l.s===KI)u=l.v;else if(u=e.apply(null,arguments),i++,s){const f=r?.deref?.()??r;f!=null&&s(f,u)&&(u=f,i!==0&&i--),r=typeof u=="object"&&u!==null||typeof u=="function"?new Kde(u):u}return d.s=KI,d.v=u,u}return o.clearCache=()=>{a=_y(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function L9(e,...t){const a=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,s=(...r)=>{let i=0,o=0,l,c={},d=r.pop();typeof d=="object"&&(c=d,d=r.pop()),zde(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const u={...a,...c},{memoize:f,memoizeOptions:p=[],argsMemoize:x=k9,argsMemoizeOptions:v=[]}=u,N=QI(p),b=QI(v),C=Bde(r),w=f(function(){return i++,d.apply(null,arguments)},...N),S=x(function(){o++;const k=Hde(C,arguments);return l=w.apply(null,k),l},...b);return Object.assign(S,{resultFunc:d,memoizedResultFunc:w,dependencies:C,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:f,argsMemoize:x})};return Object.assign(s,{withTypes:()=>s}),s}var at=L9(k9),Zde=Object.assign((e,t=at)=>{Ude(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const a=Object.keys(e),s=a.map(i=>e[i]);return t(s,(...i)=>i.reduce((o,l,c)=>(o[a[c]]=l,o),{}))},{withTypes:()=>Zde});const Jde=L9({memoize:Yde,memoizeOptions:{maxSize:1,equalityCheck:Object.is}}),wt=(e,t,a,s,r,i,o,l,...c)=>{if(c.length>0)throw new Error("Unsupported number of selectors");let d;if(e&&t&&a&&s&&r&&i&&o&&l)d=(u,f,p,x)=>{const v=e(u,f,p,x),N=t(u,f,p,x),b=a(u,f,p,x),C=s(u,f,p,x),w=r(u,f,p,x),S=i(u,f,p,x),E=o(u,f,p,x);return l(v,N,b,C,w,S,E,f,p,x)};else if(e&&t&&a&&s&&r&&i&&o)d=(u,f,p,x)=>{const v=e(u,f,p,x),N=t(u,f,p,x),b=a(u,f,p,x),C=s(u,f,p,x),w=r(u,f,p,x),S=i(u,f,p,x);return o(v,N,b,C,w,S,f,p,x)};else if(e&&t&&a&&s&&r&&i)d=(u,f,p,x)=>{const v=e(u,f,p,x),N=t(u,f,p,x),b=a(u,f,p,x),C=s(u,f,p,x),w=r(u,f,p,x);return i(v,N,b,C,w,f,p,x)};else if(e&&t&&a&&s&&r)d=(u,f,p,x)=>{const v=e(u,f,p,x),N=t(u,f,p,x),b=a(u,f,p,x),C=s(u,f,p,x);return r(v,N,b,C,f,p,x)};else if(e&&t&&a&&s)d=(u,f,p,x)=>{const v=e(u,f,p,x),N=t(u,f,p,x),b=a(u,f,p,x);return s(v,N,b,f,p,x)};else if(e&&t&&a)d=(u,f,p,x)=>{const v=e(u,f,p,x),N=t(u,f,p,x);return a(v,N,f,p,x)};else if(e&&t)d=(u,f,p,x)=>{const v=e(u,f,p,x);return t(v,f,p,x)};else if(e)d=e;else throw new Error("Missing arguments");return d},eN=e=>(...t)=>{const a=new WeakMap;let s=1;const r=t[t.length-1],i=t.length-1||1,o=Math.max(r.length-i,0);if(o>3)throw new Error("Unsupported number of arguments");return(c,d,u,f)=>{let p=c.__cacheKey__;p||(p={id:s},c.__cacheKey__=p,s+=1);let x=a.get(p);if(!x){const v=t.length===1?[C=>C,r]:t;let N=t;const b=[void 0,void 0,void 0];switch(o){case 0:break;case 1:{N=[...v.slice(0,-1),()=>b[0],r];break}case 2:{N=[...v.slice(0,-1),()=>b[0],()=>b[1],r];break}case 3:{N=[...v.slice(0,-1),()=>b[0],()=>b[1],()=>b[2],r];break}default:throw new Error("Unsupported number of arguments")}e&&(N=[...N,e]),x=Jde(...N),x.selectorArgs=b,a.set(p,x)}switch(o){case 3:x.selectorArgs[2]=f;case 2:x.selectorArgs[1]=u;case 1:x.selectorArgs[0]=d}switch(o){case 0:return x(c);case 1:return x(c,d);case 2:return x(c,d,u);case 3:return x(c,d,u,f);default:throw new Error("unreachable")}}},Aa=eN();var _S={exports:{}},AS={},TS={exports:{}},ES={};var XI;function eue(){if(XI)return ES;XI=1;var e=Df();function t(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var a=typeof Object.is=="function"?Object.is:t,s=e.useState,r=e.useEffect,i=e.useLayoutEffect,o=e.useDebugValue;function l(f,p){var x=p(),v=s({inst:{value:x,getSnapshot:p}}),N=v[0].inst,b=v[1];return i(function(){N.value=x,N.getSnapshot=p,c(N)&&b({inst:N})},[f,x,p]),r(function(){return c(N)&&b({inst:N}),f(function(){c(N)&&b({inst:N})})},[f]),o(x),x}function c(f){var p=f.getSnapshot;f=f.value;try{var x=p();return!a(f,x)}catch{return!0}}function d(f,p){return p()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return ES.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u,ES}var ZI;function tue(){return ZI||(ZI=1,TS.exports=eue()),TS.exports}var JI;function nue(){if(JI)return AS;JI=1;var e=Df(),t=tue();function a(d,u){return d===u&&(d!==0||1/d===1/u)||d!==d&&u!==u}var s=typeof Object.is=="function"?Object.is:a,r=t.useSyncExternalStore,i=e.useRef,o=e.useEffect,l=e.useMemo,c=e.useDebugValue;return AS.useSyncExternalStoreWithSelector=function(d,u,f,p,x){var v=i(null);if(v.current===null){var N={hasValue:!1,value:null};v.current=N}else N=v.current;v=l(function(){function C(A){if(!w){if(w=!0,S=A,A=p(A),x!==void 0&&N.hasValue){var T=N.value;if(x(T,A))return E=T}return E=A}if(T=E,s(S,A))return T;var _=p(A);return x!==void 0&&x(T,_)?(S=A,T):(S=A,E=_)}var w=!1,S,E,k=f===void 0?null:f;return[function(){return C(u())},k===null?void 0:function(){return C(k())}]},[u,f,p,x]);var b=r(d,v[0],v[1]);return o(function(){N.hasValue=!0,N.value=b},[b]),c(b),b},AS}var e$;function aue(){return e$||(e$=1,_S.exports=nue()),_S.exports}var P9=aue();function sue(e,t,a,s,r){const i=o=>t(o,a,s,r);return P9.useSyncExternalStoreWithSelector(e.subscribe,e.getSnapshot,e.getSnapshot,i)}const t$={};function tN(e,t){const a=h.useRef(t$);return a.current===t$&&(a.current=e(t)),a}const rue=[];function D9(e){h.useEffect(e,rue)}const iue=()=>{};function oue(e,t,a){const s=tN(lue,{store:e,selector:t}).current;s.effect=a,D9(s.onMount)}function lue(e){const{store:t,selector:a}=e;let s=a(t.state);const r={effect:iue,dispose:null,subscribe:()=>{r.dispose??=t.subscribe(i=>{const o=a(i);if(!Object.is(s,o)){const l=s;s=o,r.effect(l,o)}})},onMount:()=>(r.subscribe(),()=>{r.dispose?.(),r.dispose=null})};return r.subscribe(),r}class oL{static create(t){return new oL(t)}constructor(t){this.state=t,this.listeners=new Set,this.updateTick=0}subscribe=t=>(this.listeners.add(t),()=>{this.listeners.delete(t)});getSnapshot=()=>this.state;setState(t){this.state=t,this.updateTick+=1;const a=this.updateTick,s=this.listeners.values();let r;for(;r=s.next(),!r.done;){if(a!==this.updateTick)return;const i=r.value;i(t)}}update(t){for(const a in t)if(!Object.is(this.state[a],t[a])){this.setState(qe({},this.state,t));return}}set(t,a){Object.is(this.state[t],a)||this.setState(qe({},this.state,{[t]:a}))}}const nN=({params:e,store:t})=>{h.useEffect(()=>{t.set("animation",qe({},t.state.animation,{skip:e.skipAnimation}))},[t,e.skipAnimation]);const a=h.useCallback(()=>{let s=!1;return t.set("animation",qe({},t.state.animation,{skipAnimationRequests:t.state.animation.skipAnimationRequests+1})),()=>{s||(s=!0,t.set("animation",qe({},t.state.animation,{skipAnimationRequests:t.state.animation.skipAnimationRequests-1})))}},[t]);return Xa(()=>{if(typeof window>"u"||!window?.matchMedia)return;let r;const i=l=>{l.matches?r=a():r?.()},o=window.matchMedia("(prefers-reduced-motion)");return i(o),o.addEventListener("change",i),()=>{o.removeEventListener("change",i)}},[a,t]),{instance:{disableAnimation:a}}};nN.params={skipAnimation:!0};nN.getDefaultizedParams=({params:e})=>qe({},e,{skipAnimation:e.skipAnimation??!1});nN.getInitialState=({skipAnimation:e})=>({animation:{skip:e,skipAnimationRequests:0}});const cue=e=>e.animation,due=wt(cue,e=>e.skip||e.skipAnimationRequests>0);function uue(e,t){const a=h.useRef(!0);h.useEffect(()=>{if(a.current){a.current=!1;return}return e()},t)}function LT(e){return e&&e.ownerDocument||document}function mue(e){return LT(e).defaultView||window}const Rt=sue,aN="DEFAULT_X_AXIS_KEY",fue="DEFAULT_Y_AXIS_KEY",hue={top:20,bottom:20,left:20,right:20},gue=45,pue=25,O9=20,Io=e=>e.cartesianAxis?.x,Wl=e=>e.cartesianAxis?.y,xue=wt(Wl,function(t){return(t??[]).reduce((a,s)=>s.position==="left"?a+(s.width||0)+(s.zoom?.slider.enabled?s.zoom.slider.size:0):a,0)}),yue=wt(Wl,function(t){return(t??[]).reduce((a,s)=>s.position==="right"?a+(s.width||0)+(s.zoom?.slider.enabled?s.zoom.slider.size:0):a,0)}),bue=wt(Io,function(t){return(t??[]).reduce((a,s)=>s.position==="top"?a+(s.height||0)+(s.zoom?.slider.enabled?s.zoom.slider.size:0):a,0)}),vue=wt(Io,function(t){return(t??[]).reduce((a,s)=>s.position==="bottom"?a+(s.height||0)+(s.zoom?.slider.enabled?s.zoom.slider.size:0):a,0)}),wue=Aa(xue,yue,bue,vue,function(t,a,s,r){return{left:t,right:a,top:s,bottom:r}}),ox=e=>e.dimensions,Nue=e=>e.dimensions.margin,cr=Aa(ox,Nue,wue,function({width:t,height:a},{top:s,right:r,bottom:i,left:o},{left:l,right:c,top:d,bottom:u}){return{width:t-o-r-l-c,left:o+l,right:r+c,height:a-s-i-d-u,top:s+d,bottom:i+u}}),jue=wt(ox,e=>e.width),Cue=wt(ox,e=>e.height),M9=wt(ox,e=>e.propsWidth),I9=wt(ox,e=>e.propsHeight);function Sue(e,t){return typeof e=="number"?{top:e,bottom:e,left:e,right:e}:t?qe({},t,e):e}const _ue=10,sN=({params:e,store:t,svgRef:a})=>{const s=e.width!==void 0&&e.height!==void 0,r=h.useRef({displayError:!1,initialCompute:!0,computeRun:0}),[i,o]=h.useState(0),[l,c]=h.useState(0),d=h.useCallback(()=>{const v=a?.current;if(!v)return{};const b=mue(v).getComputedStyle(v),C=Math.floor(parseFloat(b.height))||0,w=Math.floor(parseFloat(b.width))||0;return(t.state.dimensions.width!==w||t.state.dimensions.height!==C)&&t.set("dimensions",{margin:{top:e.margin.top,right:e.margin.right,bottom:e.margin.bottom,left:e.margin.left},width:e.width??w,height:e.height??C,propsWidth:e.width,propsHeight:e.height}),{height:C,width:w}},[t,a,e.height,e.width,e.margin.left,e.margin.right,e.margin.top,e.margin.bottom]);uue(()=>{const v=e.width??t.state.dimensions.width,N=e.height??t.state.dimensions.height;t.set("dimensions",{margin:{top:e.margin.top,right:e.margin.right,bottom:e.margin.bottom,left:e.margin.left},width:v,height:N,propsHeight:e.height,propsWidth:e.width})},[t,e.height,e.width,e.margin.left,e.margin.right,e.margin.top,e.margin.bottom]),h.useEffect(()=>{r.current.displayError=!0},[]),Xa(()=>{if(s||!r.current.initialCompute||r.current.computeRun>_ue)return;const v=d();v.width!==i||v.height!==l?(r.current.computeRun+=1,v.width!==void 0&&o(v.width),v.height!==void 0&&c(v.height)):r.current.initialCompute&&(r.current.initialCompute=!1)},[l,i,d,s]),Xa(()=>{if(s)return()=>{};d();const v=a.current;if(typeof ResizeObserver>"u")return()=>{};let N;const b=new ResizeObserver(()=>{N=requestAnimationFrame(()=>{d()})});return v&&b.observe(v),()=>{N&&cancelAnimationFrame(N),v&&b.unobserve(v)}},[d,s,a]);const u=Rt(t,cr),f=h.useCallback(v=>v>=u.left-1&&v<=u.left+u.width,[u.left,u.width]),p=h.useCallback(v=>v>=u.top-1&&v<=u.top+u.height,[u.height,u.top]);return{instance:{isPointInside:h.useCallback((v,N,b)=>b&&"closest"in b&&b.closest("[data-drawing-container]")?!0:f(v)&&p(N),[f,p]),isXInside:f,isYInside:p}}};sN.params={width:!0,height:!0,margin:!0};sN.getDefaultizedParams=({params:e})=>qe({},e,{margin:Sue(e.margin,hue)});sN.getInitialState=({width:e,height:t,margin:a})=>({dimensions:{margin:a,width:e??0,height:t??0,propsWidth:e,propsHeight:t}});const lL=({params:e,store:t})=>(Xa(()=>{t.set("experimentalFeatures",e.experimentalFeatures)},[t,e.experimentalFeatures]),{});lL.params={experimentalFeatures:!0};lL.getInitialState=({experimentalFeatures:e})=>({experimentalFeatures:e});const Aue=e=>e.experimentalFeatures,rN=wt(Aue,e=>!!e?.preferStrictDomainInLineCharts);let n$=0;const Tue=()=>(n$+=1,`mui-chart-${n$}`),cL=({params:e,store:t})=>(h.useEffect(()=>{e.id===void 0||e.id===t.state.id.providedChartId&&t.state.id.chartId!==void 0||t.set("id",qe({},t.state.id,{chartId:e.id??Tue()}))},[t,e.id]),{});cL.params={id:!0};cL.getInitialState=({id:e})=>({id:{chartId:e,providedChartId:e}});const Eue=e=>e.id,kue=wt(Eue,e=>e.chartId),Lue=["#4254FB","#FFB422","#FA4F58","#0DBEFF","#22BF75","#FA83B4","#FF7511"],Pue=["#495AFB","#FFC758","#F35865","#30C8FF","#44CE8D","#F286B3","#FF8C39"],$9=e=>e==="dark"?Pue:Lue,R9=({series:e,colors:t,seriesConfig:a})=>{const s={};return e.forEach((r,i)=>{const o=a[r.type].getSeriesWithDefaultValues(r,i,t),l=o.id;if(s[r.type]===void 0&&(s[r.type]={series:{},seriesOrder:[]}),s[r.type]?.series[l]!==void 0)throw new Error(`MUI X Charts: series' id "${l}" is not unique.`);s[r.type].series[l]=o,s[r.type].seriesOrder.push(l)}),s},Due=(e,t,a)=>{const s={};return Object.keys(t).forEach(r=>{const i=e[r];i!==void 0&&(s[r]=t[r]?.seriesProcessor?.(i,a)??i)}),s},iN=({params:e,store:t,seriesConfig:a})=>{const{series:s,dataset:r,theme:i,colors:o}=e,l=h.useRef(!0);return h.useEffect(()=>{if(l.current){l.current=!1;return}t.set("series",qe({},t.state.series,{defaultizedSeries:R9({series:s,colors:typeof o=="function"?o(i):o,seriesConfig:a}),dataset:r}))},[o,r,s,i,a,t]),{}};iN.params={dataset:!0,series:!0,colors:!0,theme:!0};const Oue=[];iN.getDefaultizedParams=({params:e})=>qe({},e,{series:e.series?.length?e.series:Oue,colors:e.colors??$9,theme:e.theme??"light"});iN.getInitialState=({series:e=[],colors:t,theme:a,dataset:s},r,i)=>({series:{seriesConfig:i,defaultizedSeries:R9({series:e,colors:typeof t=="function"?t(a):t,seriesConfig:i}),dataset:s}});const dL=e=>e.series,Mue=wt(dL,e=>e.defaultizedSeries),$r=wt(dL,e=>e.seriesConfig),Iue=wt(dL,e=>e.dataset),da=Aa(Mue,$r,Iue,function(t,a,s){return Due(t,a,s)}),$ue={abort:!0,animationcancel:!0,animationend:!0,animationiteration:!0,animationstart:!0,auxclick:!0,beforeinput:!0,beforetoggle:!0,blur:!0,cancel:!0,canplay:!0,canplaythrough:!0,change:!0,click:!0,close:!0,compositionend:!0,compositionstart:!0,compositionupdate:!0,contextlost:!0,contextmenu:!0,contextrestored:!0,copy:!0,cuechange:!0,cut:!0,dblclick:!0,drag:!0,dragend:!0,dragenter:!0,dragleave:!0,dragover:!0,dragstart:!0,drop:!0,durationchange:!0,emptied:!0,ended:!0,error:!0,focus:!0,focusin:!0,focusout:!0,formdata:!0,gotpointercapture:!0,input:!0,invalid:!0,keydown:!0,keypress:!0,keyup:!0,load:!0,loadeddata:!0,loadedmetadata:!0,loadstart:!0,lostpointercapture:!0,mousedown:!0,mouseenter:!0,mouseleave:!0,mousemove:!0,mouseout:!0,mouseover:!0,mouseup:!0,paste:!0,pause:!0,play:!0,playing:!0,pointercancel:!0,pointerdown:!0,pointerenter:!0,pointerleave:!0,pointermove:!0,pointerout:!0,pointerover:!0,pointerup:!0,progress:!0,ratechange:!0,reset:!0,resize:!0,scroll:!0,scrollend:!0,securitypolicyviolation:!0,seeked:!0,seeking:!0,select:!0,selectionchange:!0,selectstart:!0,slotchange:!0,stalled:!0,submit:!0,suspend:!0,timeupdate:!0,toggle:!0,touchcancel:!0,touchend:!0,touchmove:!0,touchstart:!0,transitioncancel:!0,transitionend:!0,transitionrun:!0,transitionstart:!0,volumechange:!0,waiting:!0,webkitanimationend:!0,webkitanimationiteration:!0,webkitanimationstart:!0,webkittransitionend:!0,wheel:!0,beforematch:!0,pointerrawupdate:!0};class z9{customData={};constructor(t){if(!t||!t.name)throw new Error("Gesture must be initialized with a valid name.");if(t.name in $ue)throw new Error(`Gesture can't be created with a native event name. Tried to use "${t.name}". Please use a custom name instead.`);this.name=t.name,this.preventDefault=t.preventDefault??!1,this.stopPropagation=t.stopPropagation??!1,this.preventIf=t.preventIf??[],this.requiredKeys=t.requiredKeys??[],this.pointerMode=t.pointerMode??[],this.pointerOptions=t.pointerOptions??{}}init(t,a,s,r){this.element=t,this.pointerManager=a,this.gesturesRegistry=s,this.keyboardManager=r;const i=`${this.name}ChangeOptions`;this.element.addEventListener(i,this.handleOptionsChange);const o=`${this.name}ChangeState`;this.element.addEventListener(o,this.handleStateChange)}handleOptionsChange=t=>{t&&t.detail&&this.updateOptions(t.detail)};updateOptions(t){this.preventDefault=t.preventDefault??this.preventDefault,this.stopPropagation=t.stopPropagation??this.stopPropagation,this.preventIf=t.preventIf??this.preventIf,this.requiredKeys=t.requiredKeys??this.requiredKeys,this.pointerMode=t.pointerMode??this.pointerMode,this.pointerOptions=t.pointerOptions??this.pointerOptions}getBaseConfig(){return{requiredKeys:this.requiredKeys}}getEffectiveConfig(t,a){if(t!=="mouse"&&t!=="touch"&&t!=="pen")return a;const s=this.pointerOptions[t];return s?qe({},a,s):a}handleStateChange=t=>{t&&t.detail&&this.updateState(t.detail)};updateState(t){Object.assign(this.state,t)}getTargetElement(t){return this.isActive||this.element===t.target||"contains"in this.element&&this.element.contains(t.target)||"getRootNode"in this.element&&this.element.getRootNode()instanceof ShadowRoot&&t.composedPath().includes(this.element)?this.element:null}set isActive(t){t?this.gesturesRegistry.registerActiveGesture(this.element,this):this.gesturesRegistry.unregisterActiveGesture(this.element,this)}get isActive(){return this.gesturesRegistry.isGestureActive(this.element,this)??!1}shouldPreventGesture(t,a){const s=this.getEffectiveConfig(a,this.getBaseConfig());if(!this.keyboardManager.areKeysPressed(s.requiredKeys))return!0;if(this.preventIf.length===0)return!1;const r=this.gesturesRegistry.getActiveGestures(t);return this.preventIf.some(i=>r[i])}isPointerTypeAllowed(t){return!this.pointerMode||this.pointerMode.length===0?!0:this.pointerMode.includes(t)}destroy(){const t=`${this.name}ChangeOptions`;this.element.removeEventListener(t,this.handleOptionsChange);const a=`${this.name}ChangeState`;this.element.removeEventListener(a,this.handleStateChange)}}class Rue{activeGestures=new Map;registerActiveGesture(t,a){this.activeGestures.has(t)||this.activeGestures.set(t,new Set);const s=this.activeGestures.get(t),r={gesture:a,element:t};s.add(r)}unregisterActiveGesture(t,a){const s=this.activeGestures.get(t);s&&(s.forEach(r=>{r.gesture===a&&s.delete(r)}),s.size===0&&this.activeGestures.delete(t))}getActiveGestures(t){const a=this.activeGestures.get(t);return a?Array.from(a).reduce((s,r)=>(s[r.gesture.name]=!0,s),{}):{}}isGestureActive(t,a){const s=this.activeGestures.get(t);return s?Array.from(s).some(r=>r.gesture===a):!1}destroy(){this.activeGestures.clear()}unregisterElement(t){this.activeGestures.delete(t)}}class zue{pressedKeys=new Set;constructor(){this.initialize()}initialize(){typeof window>"u"||(window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp),window.addEventListener("blur",this.clearKeys))}handleKeyDown=t=>{this.pressedKeys.add(t.key)};handleKeyUp=t=>{this.pressedKeys.delete(t.key)};clearKeys=()=>{this.pressedKeys.clear()};areKeysPressed(t){return!t||t.length===0?!0:t.every(a=>a==="ControlOrMeta"?navigator.platform.includes("Mac")?this.pressedKeys.has("Meta"):this.pressedKeys.has("Control"):this.pressedKeys.has(a))}destroy(){typeof window<"u"&&(window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp),window.removeEventListener("blur",this.clearKeys)),this.clearKeys()}}class Uue{preventEventInterruption=!0;pointers=new Map;gestureHandlers=new Set;constructor(t){this.root=t.root??document.getRootNode({composed:!0})??document.body,this.touchAction=t.touchAction||"auto",this.passive=t.passive??!1,this.preventEventInterruption=t.preventEventInterruption??!0,this.setupEventListeners()}registerGestureHandler(t){return this.gestureHandlers.add(t),()=>{this.gestureHandlers.delete(t)}}getPointers(){return new Map(this.pointers)}setupEventListeners(){this.touchAction!=="auto"&&(this.root.style.touchAction=this.touchAction),this.root.addEventListener("pointerdown",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointermove",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointerup",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointercancel",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("forceCancel",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("blur",this.handleInterruptEvents),this.root.addEventListener("contextmenu",this.handleInterruptEvents)}handleInterruptEvents=t=>{if(this.preventEventInterruption&&"pointerType"in t&&t.pointerType==="touch"){t.preventDefault();return}const a=new PointerEvent("forceCancel",{bubbles:!1,cancelable:!1}),s=this.pointers.values().next().value;if(this.pointers.size>0&&s){Object.defineProperties(a,{clientX:{value:s.clientX},clientY:{value:s.clientY},pointerId:{value:s.pointerId},pointerType:{value:s.pointerType}});for(const[r,i]of this.pointers.entries()){const o=qe({},i,{type:"forceCancel"});this.pointers.set(r,o)}}this.notifyHandlers(a),this.pointers.clear()};handlePointerEvent=t=>{const{type:a,pointerId:s}=t;if(a==="pointerdown"||a==="pointermove")this.pointers.set(s,this.createPointerData(t));else if(a==="pointerup"||a==="pointercancel"||a==="forceCancel"){this.pointers.set(s,this.createPointerData(t)),this.notifyHandlers(t),this.pointers.delete(s);return}this.notifyHandlers(t)};notifyHandlers(t){this.gestureHandlers.forEach(a=>a(this.pointers,t))}createPointerData(t){return{pointerId:t.pointerId,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,target:t.target,timeStamp:t.timeStamp,type:t.type,isPrimary:t.isPrimary,pressure:t.pressure,width:t.width,height:t.height,pointerType:t.pointerType,srcEvent:t}}destroy(){this.root.removeEventListener("pointerdown",this.handlePointerEvent),this.root.removeEventListener("pointermove",this.handlePointerEvent),this.root.removeEventListener("pointerup",this.handlePointerEvent),this.root.removeEventListener("pointercancel",this.handlePointerEvent),this.root.removeEventListener("forceCancel",this.handlePointerEvent),this.root.removeEventListener("blur",this.handleInterruptEvents),this.root.removeEventListener("contextmenu",this.handleInterruptEvents),this.pointers.clear(),this.gestureHandlers.clear()}}class Fue{gestureTemplates=new Map;elementGestureMap=new Map;activeGesturesRegistry=new Rue;keyboardManager=new zue;constructor(t){this.pointerManager=new Uue({root:t.root,touchAction:t.touchAction,passive:t.passive}),t.gestures&&t.gestures.length>0&&t.gestures.forEach(a=>{this.addGestureTemplate(a)})}addGestureTemplate(t){this.gestureTemplates.has(t.name)&&console.warn(`Gesture template with name "${t.name}" already exists. It will be overwritten.`),this.gestureTemplates.set(t.name,t)}setGestureOptions(t,a,s){const r=this.elementGestureMap.get(a);if(!r||!r.has(t)){console.error(`Gesture "${t}" not found on the provided element.`);return}const i=new CustomEvent(`${t}ChangeOptions`,{detail:s,bubbles:!1,cancelable:!1,composed:!1});a.dispatchEvent(i)}setGestureState(t,a,s){const r=this.elementGestureMap.get(a);if(!r||!r.has(t)){console.error(`Gesture "${t}" not found on the provided element.`);return}const i=new CustomEvent(`${t}ChangeState`,{detail:s,bubbles:!1,cancelable:!1,composed:!1});a.dispatchEvent(i)}registerElement(t,a,s){return Array.isArray(t)||(t=[t]),t.forEach(r=>{const i=s?.[r];this.registerSingleGesture(r,a,i)}),a}registerSingleGesture(t,a,s){const r=this.gestureTemplates.get(t);if(!r)return console.error(`Gesture template "${t}" not found.`),!1;this.elementGestureMap.has(a)||this.elementGestureMap.set(a,new Map);const i=this.elementGestureMap.get(a);i.has(t)&&(console.warn(`Element already has gesture "${t}" registered. It will be replaced.`),this.unregisterElement(t,a));const o=r.clone(s);return o.init(a,this.pointerManager,this.activeGesturesRegistry,this.keyboardManager),i.set(t,o),!0}unregisterElement(t,a){const s=this.elementGestureMap.get(a);return!s||!s.has(t)?!1:(s.get(t).destroy(),s.delete(t),this.activeGesturesRegistry.unregisterElement(a),s.size===0&&this.elementGestureMap.delete(a),!0)}unregisterAllGestures(t){const a=this.elementGestureMap.get(t);if(a){for(const[,s]of a)s.destroy(),this.activeGesturesRegistry.unregisterElement(t);this.elementGestureMap.delete(t)}}destroy(){for(const[t]of this.elementGestureMap)this.unregisterAllGestures(t);this.gestureTemplates.clear(),this.elementGestureMap.clear(),this.activeGesturesRegistry.destroy(),this.keyboardManager.destroy(),this.pointerManager.destroy()}}class zu extends z9{unregisterHandler=null;originalTarget=null;constructor(t){super(t),this.minPointers=t.minPointers??1,this.maxPointers=t.maxPointers??1/0}init(t,a,s,r){super.init(t,a,s,r),this.unregisterHandler=this.pointerManager.registerGestureHandler(this.handlePointerEvent)}updateOptions(t){super.updateOptions(t),this.minPointers=t.minPointers??this.minPointers,this.maxPointers=t.maxPointers??this.maxPointers}getBaseConfig(){return{requiredKeys:this.requiredKeys,minPointers:this.minPointers,maxPointers:this.maxPointers}}isWithinPointerCount(t,a){const s=this.getEffectiveConfig(a,this.getBaseConfig());return t.length>=s.minPointers&&t.length<=s.maxPointers}getRelevantPointers(t,a){return t.filter(s=>this.isPointerTypeAllowed(s.pointerType)&&(a===s.target||s.target===this.originalTarget||a===this.originalTarget||"contains"in a&&a.contains(s.target))||"getRootNode"in a&&a.getRootNode()instanceof ShadowRoot&&s.srcEvent.composedPath().includes(a))}destroy(){this.unregisterHandler&&(this.unregisterHandler(),this.unregisterHandler=null),super.destroy()}}function Bue(e,t){const a=t.x-e.x,s=t.y-e.y;return Math.sqrt(a*a+s*s)}function kS(e){if(e.length<2)return 0;let t=0,a=0;for(let s=0;s<e.length;s+=1)for(let r=s+1;r<e.length;r+=1)t+=Bue({x:e[s].clientX,y:e[s].clientY},{x:e[r].clientX,y:e[r].clientY}),a+=1;return a>0?t/a:0}function El(e){if(e.length===0)return{x:0,y:0};const t=e.reduce((a,s)=>(a.x+=s.clientX,a.y+=s.clientY,a),{x:0,y:0});return{x:t.x/e.length,y:t.y/e.length}}function oi(e,t){return`${e}${t==="ongoing"?"":t.charAt(0).toUpperCase()+t.slice(1)}`}const Ay=1e-5,Sc=1e-5,a$=.15;function Hue(e,t){const a=t.x-e.x,s=t.y-e.y,r={vertical:null,horizontal:null,mainAxis:null},i=Gue(t,e),o=Math.abs(a)>Math.abs(s)?"horizontal":"vertical",l=i||o==="horizontal"?Ay:a$,c=i?Ay:o==="horizontal"?a$:Ay;return Math.abs(a)>l&&(r.horizontal=a>0?"right":"left"),Math.abs(s)>c&&(r.vertical=s>0?"down":"up"),r.mainAxis=i?"diagonal":o,r}function Gue(e,t){const a=t.x-e.x,s=t.y-e.y,r=Math.atan2(s,a)*180/Math.PI;return r>=-45+Sc&&r<=-22.5+Sc||r>=22.5+Sc&&r<=45+Sc||r>=135+Sc&&r<=157.5+Sc||r>=-157.5+Sc&&r<=-135+Sc}function Wue(e,t){if(!e.vertical&&!e.horizontal)return!1;if(t.length===0)return!0;const a=e.vertical===null||t.includes(e.vertical),s=e.horizontal===null||t.includes(e.horizontal);return a&&s}const s$=0,que=e=>e>s$?1:e<-s$?-1:0,Dc=e=>{e.cancelable&&e.preventDefault()};class uL extends zu{state={lastPosition:null};constructor(t){super(t),this.threshold=t.threshold||0}clone(t){return new uL(qe({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}init(t,a,s,r){super.init(t,a,s,r),this.element.addEventListener("pointerenter",this.handleElementEnter),this.element.addEventListener("pointerleave",this.handleElementLeave)}destroy(){this.element.removeEventListener("pointerenter",this.handleElementEnter),this.element.removeEventListener("pointerleave",this.handleElementLeave),this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t)}resetState(){this.isActive=!1,this.state={lastPosition:null}}handleElementEnter=t=>{if(t.pointerType!=="mouse"&&t.pointerType!=="pen")return;const a=this.pointerManager.getPointers()||new Map,s=Array.from(a.values());if(this.isWithinPointerCount(s,t.pointerType)){this.isActive=!0;const r={x:t.clientX,y:t.clientY};this.state.lastPosition=r,this.emitMoveEvent(this.element,"start",s,t),this.emitMoveEvent(this.element,"ongoing",s,t)}};handleElementLeave=t=>{if(t.pointerType!=="mouse"&&t.pointerType!=="pen"||!this.isActive)return;const a=this.pointerManager.getPointers()||new Map,s=Array.from(a.values());this.emitMoveEvent(this.element,"end",s,t),this.resetState()};handlePointerEvent=(t,a)=>{if(a.type!=="pointermove"||a.pointerType!=="mouse"&&a.pointerType!=="pen")return;this.preventDefault&&a.preventDefault(),this.stopPropagation&&a.stopPropagation();const s=Array.from(t.values()),r=this.getTargetElement(a);if(!r||!this.isWithinPointerCount(s,a.pointerType))return;if(this.shouldPreventGesture(r,a.pointerType)){if(!this.isActive)return;this.resetState(),this.emitMoveEvent(r,"end",s,a);return}const i={x:a.clientX,y:a.clientY};this.state.lastPosition=i,this.isActive||(this.isActive=!0,this.emitMoveEvent(r,"start",s,a)),this.emitMoveEvent(r,"ongoing",s,a)};emitMoveEvent(t,a,s,r){const i=this.state.lastPosition||El(s),o=this.gesturesRegistry.getActiveGestures(t),l={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:a,pointers:s,timeStamp:r.timeStamp,activeGestures:o,customData:this.customData},c=oi(this.name,a),d=new CustomEvent(c,{bubbles:!0,cancelable:!0,composed:!0,detail:l});t.dispatchEvent(d)}}class cu extends zu{state={startPointers:new Map,startCentroid:null,lastCentroid:null,movementThresholdReached:!1,totalDeltaX:0,totalDeltaY:0,activeDeltaX:0,activeDeltaY:0,lastDirection:{vertical:null,horizontal:null,mainAxis:null},lastDeltas:null};constructor(t){super(t),this.direction=t.direction||["up","down","left","right"],this.threshold=t.threshold||0}clone(t){return new cu(qe({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,direction:[...this.direction],requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}destroy(){this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t),this.direction=t.direction||this.direction,this.threshold=t.threshold??this.threshold}resetState(){this.isActive=!1,this.state=qe({},this.state,{startPointers:new Map,startCentroid:null,lastCentroid:null,lastDeltas:null,activeDeltaX:0,activeDeltaY:0,movementThresholdReached:!1,lastDirection:{vertical:null,horizontal:null,mainAxis:null}})}handlePointerEvent=(t,a)=>{const s=Array.from(t.values());if(a.type==="forceCancel"){this.cancel(a.target,s,a);return}const r=this.getTargetElement(a);if(!r)return;if(this.shouldPreventGesture(r,a.pointerType)){this.cancel(r,s,a);return}const i=this.getRelevantPointers(s,r);if(!this.isWithinPointerCount(i,a.pointerType)){this.cancel(r,i,a);return}switch(a.type){case"pointerdown":!this.isActive&&!this.state.startCentroid&&(i.forEach(o=>{this.state.startPointers.set(o.pointerId,o)}),this.originalTarget=r,this.state.startCentroid=El(i),this.state.lastCentroid=qe({},this.state.startCentroid));break;case"pointermove":if(this.state.startCentroid&&this.isWithinPointerCount(s,a.pointerType)){const o=El(i),l=o.x-this.state.startCentroid.x,c=o.y-this.state.startCentroid.y,d=Math.sqrt(l*l+c*c),u=Hue(this.state.lastCentroid??this.state.startCentroid,o),f=this.state.lastCentroid?o.x-this.state.lastCentroid.x:0,p=this.state.lastCentroid?o.y-this.state.lastCentroid.y:0;!this.state.movementThresholdReached&&d>=this.threshold&&Wue(u,this.direction)?(this.state.movementThresholdReached=!0,this.isActive=!0,this.state.lastDeltas={x:f,y:p},this.state.totalDeltaX+=f,this.state.totalDeltaY+=p,this.state.activeDeltaX+=f,this.state.activeDeltaY+=p,this.emitPanEvent(r,"start",i,a,o),this.emitPanEvent(r,"ongoing",i,a,o)):this.state.movementThresholdReached&&this.isActive&&(this.state.lastDeltas={x:f,y:p},this.state.totalDeltaX+=f,this.state.totalDeltaY+=p,this.state.activeDeltaX+=f,this.state.activeDeltaY+=p,this.emitPanEvent(r,"ongoing",i,a,o)),this.state.lastCentroid=o,this.state.lastDirection=u}break;case"pointerup":case"pointercancel":case"forceCancel":if(this.isActive&&this.state.movementThresholdReached){const o=i.filter(l=>l.type!=="pointerup"&&l.type!=="pointercancel");if(!this.isWithinPointerCount(o,a.pointerType)){const l=this.state.lastCentroid||this.state.startCentroid;a.type==="pointercancel"&&this.emitPanEvent(r,"cancel",i,a,l),this.emitPanEvent(r,"end",i,a,l),this.resetState()}}else this.resetState();break}};emitPanEvent(t,a,s,r,i){if(!this.state.startCentroid)return;const o=this.state.lastDeltas?.x??0,l=this.state.lastDeltas?.y??0,c=this.state.startPointers.values().next().value,d=c?(r.timeStamp-c.timeStamp)/1e3:0,u=d>0?o/d:0,f=d>0?l/d:0,p=Math.sqrt(u*u+f*f),x=this.gesturesRegistry.getActiveGestures(t),v={gestureName:this.name,initialCentroid:this.state.startCentroid,centroid:i,target:r.target,srcEvent:r,phase:a,pointers:s,timeStamp:r.timeStamp,deltaX:o,deltaY:l,direction:this.state.lastDirection,velocityX:u,velocityY:f,velocity:p,totalDeltaX:this.state.totalDeltaX,totalDeltaY:this.state.totalDeltaY,activeDeltaX:this.state.activeDeltaX,activeDeltaY:this.state.activeDeltaY,activeGestures:x,customData:this.customData},N=oi(this.name,a),b=new CustomEvent(N,{bubbles:!0,cancelable:!0,composed:!0,detail:v});t.dispatchEvent(b),this.preventDefault&&r.preventDefault(),this.stopPropagation&&r.stopPropagation()}cancel(t,a,s){if(this.isActive){const r=t??this.element;this.emitPanEvent(r,"cancel",a,s,this.state.lastCentroid),this.emitPanEvent(r,"end",a,s,this.state.lastCentroid)}this.resetState()}}class mL extends zu{state={startDistance:0,lastDistance:0,lastScale:1,lastTime:0,velocity:0,totalScale:1,deltaScale:0};constructor(t){super(qe({},t,{minPointers:t.minPointers??2})),this.threshold=t.threshold??0}clone(t){return new mL(qe({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}destroy(){this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t)}resetState(){this.isActive=!1,this.state=qe({},this.state,{startDistance:0,lastDistance:0,lastScale:1,lastTime:0,velocity:0,deltaScale:0})}handlePointerEvent=(t,a)=>{const s=Array.from(t.values()),r=this.getTargetElement(a);if(!r)return;if(this.shouldPreventGesture(r,a.pointerType)){this.isActive&&(this.emitPinchEvent(r,"cancel",s,a),this.resetState());return}const i=this.getRelevantPointers(s,r);switch(a.type){case"pointerdown":if(i.length>=2&&!this.isActive){const o=kS(i);this.state.startDistance=o,this.state.lastDistance=o,this.state.lastTime=a.timeStamp,this.originalTarget=r}break;case"pointermove":if(this.state.startDistance&&this.isWithinPointerCount(i,a.pointerType)){const o=kS(i),l=Math.abs(o-this.state.lastDistance);if(l!==0&&l>=this.threshold){const c=this.state.startDistance?o/this.state.startDistance:1,d=c/this.state.lastScale;this.state.totalScale*=d;const u=(a.timeStamp-this.state.lastTime)/1e3;if(this.state.lastDistance){const p=(o-this.state.lastDistance)/u;this.state.velocity=Number.isNaN(p)?0:p}this.state.lastDistance=o,this.state.deltaScale=c-this.state.lastScale,this.state.lastScale=c,this.state.lastTime=a.timeStamp,this.isActive?this.emitPinchEvent(r,"ongoing",i,a):(this.isActive=!0,this.emitPinchEvent(r,"start",i,a),this.emitPinchEvent(r,"ongoing",i,a))}}break;case"pointerup":case"pointercancel":case"forceCancel":if(this.isActive){const o=i.filter(l=>l.type!=="pointerup"&&l.type!=="pointercancel");if(!this.isWithinPointerCount(o,a.pointerType))a.type==="pointercancel"&&this.emitPinchEvent(r,"cancel",i,a),this.emitPinchEvent(r,"end",i,a),this.resetState();else if(o.length>=2){const l=kS(o);this.state.startDistance=l/this.state.lastScale}}break}};emitPinchEvent(t,a,s,r){const i=El(s),o=this.state.lastDistance,l=this.state.lastScale,c=this.gesturesRegistry.getActiveGestures(t),d={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:a,pointers:s,timeStamp:r.timeStamp,scale:l,deltaScale:this.state.deltaScale,totalScale:this.state.totalScale,distance:o,velocity:this.state.velocity,activeGestures:c,direction:que(this.state.velocity),customData:this.customData};this.preventDefault&&r.preventDefault(),this.stopPropagation&&r.stopPropagation();const u=oi(this.name,a),f=new CustomEvent(u,{bubbles:!0,cancelable:!0,composed:!0,detail:d});t.dispatchEvent(f)}}class oN extends zu{state={startCentroid:null,lastPosition:null,timerId:null,startTime:0,pressThresholdReached:!1};constructor(t){super(t),this.duration=t.duration??500,this.maxDistance=t.maxDistance??10}clone(t){return new oN(qe({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,duration:this.duration,maxDistance:this.maxDistance,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}destroy(){this.clearPressTimer(),this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t),this.duration=t.duration??this.duration,this.maxDistance=t.maxDistance??this.maxDistance}resetState(){this.clearPressTimer(),this.isActive=!1,this.state=qe({},this.state,{startCentroid:null,lastPosition:null,timerId:null,startTime:0,pressThresholdReached:!1})}clearPressTimer(){this.state.timerId!==null&&(clearTimeout(this.state.timerId),this.state.timerId=null)}handlePointerEvent=(t,a)=>{const s=Array.from(t.values());if(a.type==="forceCancel"){this.cancelPress(a.target,s,a);return}const r=this.getTargetElement(a);if(!r)return;if(this.shouldPreventGesture(r,a.pointerType)){this.isActive&&this.cancelPress(r,s,a);return}const i=this.getRelevantPointers(s,r);if(!this.isWithinPointerCount(i,a.pointerType)){this.isActive&&this.cancelPress(r,i,a);return}switch(a.type){case"pointerdown":!this.isActive&&!this.state.startCentroid&&(this.state.startCentroid=El(i),this.state.lastPosition=qe({},this.state.startCentroid),this.state.startTime=a.timeStamp,this.isActive=!0,this.originalTarget=r,this.clearPressTimer(),this.state.timerId=setTimeout(()=>{if(this.isActive&&this.state.startCentroid){this.state.pressThresholdReached=!0;const o=this.state.lastPosition;this.emitPressEvent(r,"start",i,a,o),this.emitPressEvent(r,"ongoing",i,a,o)}},this.duration));break;case"pointermove":if(this.isActive&&this.state.startCentroid){const o=El(i);this.state.lastPosition=o;const l=o.x-this.state.startCentroid.x,c=o.y-this.state.startCentroid.y;Math.sqrt(l*l+c*c)>this.maxDistance&&this.cancelPress(r,i,a)}break;case"pointerup":if(this.isActive){if(this.state.pressThresholdReached){const o=this.state.lastPosition||this.state.startCentroid;this.emitPressEvent(r,"end",i,a,o)}this.resetState()}break;case"pointercancel":case"forceCancel":this.cancelPress(r,i,a);break}};emitPressEvent(t,a,s,r,i){const o=this.gesturesRegistry.getActiveGestures(t),l=r.timeStamp-this.state.startTime,c={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:a,pointers:s,timeStamp:r.timeStamp,x:i.x,y:i.y,duration:l,activeGestures:o,customData:this.customData},d=oi(this.name,a),u=new CustomEvent(d,{bubbles:!0,cancelable:!0,composed:!0,detail:c});t.dispatchEvent(u),this.preventDefault&&r.preventDefault(),this.stopPropagation&&r.stopPropagation()}cancelPress(t,a,s){if(this.isActive&&this.state.pressThresholdReached){const r=this.state.lastPosition||this.state.startCentroid;this.emitPressEvent(t??this.element,"cancel",a,s,r),this.emitPressEvent(t??this.element,"end",a,s,r)}this.resetState()}}class fL extends zu{state={phase:"waitingForPress",dragTimeoutId:null};constructor(t){super(t),this.pressDuration=t.pressDuration??500,this.pressMaxDistance=t.pressMaxDistance??10,this.dragTimeout=t.dragTimeout??1e3,this.dragThreshold=t.dragThreshold??0,this.dragDirection=t.dragDirection||["up","down","left","right"],this.pressGesture=new oN({name:`${this.name}-press`,duration:this.pressDuration,maxDistance:this.pressMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}),this.panGesture=new cu({name:`${this.name}-pan`,minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)})}clone(t){return new fL(qe({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,pressDuration:this.pressDuration,pressMaxDistance:this.pressMaxDistance,dragTimeout:this.dragTimeout,dragThreshold:this.dragThreshold,dragDirection:[...this.dragDirection],requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}init(t,a,s,r){super.init(t,a,s,r),this.pressGesture.init(t,a,s,r),this.panGesture.init(t,a,s,r),this.element.addEventListener(this.pressGesture.name,this.pressHandler),this.element.addEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.addEventListener(this.panGesture.name,this.dragMoveHandler),this.element.addEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.addEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler)}destroy(){this.resetState(),this.pressGesture.destroy(),this.panGesture.destroy(),this.element.removeEventListener(this.pressGesture.name,this.pressHandler),this.element.removeEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.removeEventListener(this.panGesture.name,this.dragMoveHandler),this.element.removeEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.removeEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler),super.destroy()}updateOptions(t){super.updateOptions(t),this.pressDuration=t.pressDuration??this.pressDuration,this.pressMaxDistance=t.pressMaxDistance??this.pressMaxDistance,this.dragTimeout=t.dragTimeout??this.dragTimeout,this.dragThreshold=t.dragThreshold??this.dragThreshold,this.dragDirection=t.dragDirection||this.dragDirection,this.element.dispatchEvent(new CustomEvent(`${this.panGesture.name}ChangeOptions`,{detail:{minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}})),this.element.dispatchEvent(new CustomEvent(`${this.pressGesture.name}ChangeOptions`,{detail:{duration:this.pressDuration,maxDistance:this.pressMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}}))}resetState(){this.state.dragTimeoutId!==null&&clearTimeout(this.state.dragTimeoutId),this.restoreTouchAction(),this.isActive=!1,this.state={phase:"waitingForPress",dragTimeoutId:null}}handlePointerEvent(){}pressHandler=()=>{this.state.phase==="waitingForPress"&&(this.state.phase="pressDetected",this.setTouchAction(),this.state.dragTimeoutId=setTimeout(()=>{this.resetState()},this.dragTimeout))};dragStartHandler=t=>{this.state.phase==="pressDetected"&&(this.state.dragTimeoutId!==null&&(clearTimeout(this.state.dragTimeoutId),this.state.dragTimeoutId=null),this.restoreTouchAction(),this.state.phase="dragging",this.isActive=!0,this.element.dispatchEvent(new CustomEvent(oi(this.name,t.detail.phase),t)))};dragMoveHandler=t=>{this.state.phase==="dragging"&&this.element.dispatchEvent(new CustomEvent(oi(this.name,t.detail.phase),t))};dragEndHandler=t=>{this.state.phase==="dragging"&&(this.resetState(),this.element.dispatchEvent(new CustomEvent(oi(this.name,t.detail.phase),t)))};setTouchAction(){this.element.addEventListener("touchstart",Dc,{passive:!1}),this.element.addEventListener("touchmove",Dc,{passive:!1}),this.element.addEventListener("touchend",Dc,{passive:!1})}restoreTouchAction(){this.element.removeEventListener("touchstart",Dc),this.element.removeEventListener("touchmove",Dc),this.element.removeEventListener("touchend",Dc)}}class op extends zu{state={startCentroid:null,currentTapCount:0,lastTapTime:0,lastPosition:null};constructor(t){super(t),this.maxDistance=t.maxDistance??10,this.taps=t.taps??1}clone(t){return new op(qe({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,maxDistance:this.maxDistance,taps:this.taps,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}destroy(){this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t),this.maxDistance=t.maxDistance??this.maxDistance,this.taps=t.taps??this.taps}resetState(){this.isActive=!1,this.state={startCentroid:null,currentTapCount:0,lastTapTime:0,lastPosition:null}}handlePointerEvent=(t,a)=>{const s=Array.from(t.values()),r=this.getTargetElement(a);if(!r)return;const i=this.getRelevantPointers(s,r);if(this.shouldPreventGesture(r,a.pointerType)||!this.isWithinPointerCount(i,a.pointerType)){this.isActive&&this.cancelTap(r,i,a);return}switch(a.type){case"pointerdown":this.isActive||(this.state.startCentroid=El(i),this.state.lastPosition=qe({},this.state.startCentroid),this.isActive=!0,this.originalTarget=r);break;case"pointermove":if(this.isActive&&this.state.startCentroid){const o=El(i);this.state.lastPosition=o;const l=o.x-this.state.startCentroid.x,c=o.y-this.state.startCentroid.y;Math.sqrt(l*l+c*c)>this.maxDistance&&this.cancelTap(r,i,a)}break;case"pointerup":if(this.isActive){this.state.currentTapCount+=1;const o=this.state.lastPosition||this.state.startCentroid;if(!o){this.cancelTap(r,i,a);return}this.state.currentTapCount>=this.taps?(this.fireTapEvent(r,i,a,o),this.resetState()):(this.state.lastTapTime=a.timeStamp,this.isActive=!1,this.state.startCentroid=null,setTimeout(()=>{this.state&&this.state.currentTapCount>0&&this.state.currentTapCount<this.taps&&(this.state.currentTapCount=0)},300))}break;case"pointercancel":case"forceCancel":this.cancelTap(r,i,a);break}};fireTapEvent(t,a,s,r){const i=this.gesturesRegistry.getActiveGestures(t),o={gestureName:this.name,centroid:r,target:s.target,srcEvent:s,phase:"end",pointers:a,timeStamp:s.timeStamp,x:r.x,y:r.y,tapCount:this.state.currentTapCount,activeGestures:i,customData:this.customData},l=new CustomEvent(this.name,{bubbles:!0,cancelable:!0,composed:!0,detail:o});t.dispatchEvent(l),this.preventDefault&&s.preventDefault(),this.stopPropagation&&s.stopPropagation()}cancelTap(t,a,s){if(this.state.startCentroid||this.state.lastPosition){const r=this.state.lastPosition||this.state.startCentroid,i=this.gesturesRegistry.getActiveGestures(t),o={gestureName:this.name,centroid:r,target:s.target,srcEvent:s,phase:"cancel",pointers:a,timeStamp:s.timeStamp,x:r.x,y:r.y,tapCount:this.state.currentTapCount,activeGestures:i,customData:this.customData},l=oi(this.name,"cancel"),c=new CustomEvent(l,{bubbles:!0,cancelable:!0,composed:!0,detail:o});t.dispatchEvent(c)}this.resetState()}}class hL extends zu{state={phase:"waitingForTap",dragTimeoutId:null};constructor(t){super(t),this.tapMaxDistance=t.tapMaxDistance??10,this.dragTimeout=t.dragTimeout??1e3,this.dragThreshold=t.dragThreshold??0,this.dragDirection=t.dragDirection||["up","down","left","right"],this.tapGesture=new op({name:`${this.name}-tap`,maxDistance:this.tapMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}),this.panGesture=new cu({name:`${this.name}-pan`,minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)})}clone(t){return new hL(qe({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,tapMaxDistance:this.tapMaxDistance,dragTimeout:this.dragTimeout,dragThreshold:this.dragThreshold,dragDirection:[...this.dragDirection],requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}init(t,a,s,r){super.init(t,a,s,r),this.tapGesture.init(t,a,s,r),this.panGesture.init(t,a,s,r),this.element.addEventListener(this.tapGesture.name,this.tapHandler),this.element.addEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.addEventListener(this.panGesture.name,this.dragMoveHandler),this.element.addEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.addEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler)}destroy(){this.resetState(),this.tapGesture.destroy(),this.panGesture.destroy(),this.element.removeEventListener(this.tapGesture.name,this.tapHandler),this.element.removeEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.removeEventListener(this.panGesture.name,this.dragMoveHandler),this.element.removeEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.removeEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler),super.destroy()}updateOptions(t){super.updateOptions(t),this.tapMaxDistance=t.tapMaxDistance??this.tapMaxDistance,this.dragTimeout=t.dragTimeout??this.dragTimeout,this.dragThreshold=t.dragThreshold??this.dragThreshold,this.dragDirection=t.dragDirection||this.dragDirection,this.element.dispatchEvent(new CustomEvent(`${this.panGesture.name}ChangeOptions`,{detail:{minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}})),this.element.dispatchEvent(new CustomEvent(`${this.tapGesture.name}ChangeOptions`,{detail:{maxDistance:this.tapMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}}))}resetState(){this.state.dragTimeoutId!==null&&clearTimeout(this.state.dragTimeoutId),this.restoreTouchAction(),this.isActive=!1,this.state={phase:"waitingForTap",dragTimeoutId:null}}handlePointerEvent(){}tapHandler=()=>{this.state.phase==="waitingForTap"&&(this.state.phase="tapDetected",this.setTouchAction(),this.state.dragTimeoutId=setTimeout(()=>{this.resetState()},this.dragTimeout))};dragStartHandler=t=>{this.state.phase==="tapDetected"&&(this.state.dragTimeoutId!==null&&(clearTimeout(this.state.dragTimeoutId),this.state.dragTimeoutId=null),this.restoreTouchAction(),this.state.phase="dragging",this.isActive=!0,this.element.dispatchEvent(new CustomEvent(oi(this.name,t.detail.phase),t)))};dragMoveHandler=t=>{this.state.phase==="dragging"&&this.element.dispatchEvent(new CustomEvent(oi(this.name,t.detail.phase),t))};dragEndHandler=t=>{this.state.phase==="dragging"&&(this.resetState(),this.element.dispatchEvent(new CustomEvent(oi(this.name,t.detail.phase),t)))};setTouchAction(){this.element.addEventListener("touchstart",Dc,{passive:!1})}restoreTouchAction(){this.element.removeEventListener("touchstart",Dc)}}class nv extends z9{state={totalDeltaX:0,totalDeltaY:0,totalDeltaZ:0};constructor(t){super(t),this.sensitivity=t.sensitivity??1,this.max=t.max??Number.MAX_SAFE_INTEGER,this.min=t.min??Number.MIN_SAFE_INTEGER,this.initialDelta=t.initialDelta??0,this.invert=t.invert??!1,this.state.totalDeltaX=this.initialDelta,this.state.totalDeltaY=this.initialDelta,this.state.totalDeltaZ=this.initialDelta}clone(t){return new nv(qe({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,sensitivity:this.sensitivity,max:this.max,min:this.min,initialDelta:this.initialDelta,invert:this.invert,requiredKeys:[...this.requiredKeys],preventIf:[...this.preventIf]},t))}init(t,a,s,r){super.init(t,a,s,r),this.element.addEventListener("wheel",this.handleWheelEvent)}destroy(){this.element.removeEventListener("wheel",this.handleWheelEvent),this.resetState(),super.destroy()}resetState(){this.isActive=!1,this.state={totalDeltaX:0,totalDeltaY:0,totalDeltaZ:0}}updateOptions(t){super.updateOptions(t),this.sensitivity=t.sensitivity??this.sensitivity,this.max=t.max??this.max,this.min=t.min??this.min,this.initialDelta=t.initialDelta??this.initialDelta,this.invert=t.invert??this.invert}handleWheelEvent=t=>{if(this.shouldPreventGesture(this.element,"mouse"))return;const a=this.pointerManager.getPointers()||new Map,s=Array.from(a.values());this.state.totalDeltaX+=t.deltaX*this.sensitivity*(this.invert?-1:1),this.state.totalDeltaY+=t.deltaY*this.sensitivity*(this.invert?-1:1),this.state.totalDeltaZ+=t.deltaZ*this.sensitivity*(this.invert?-1:1),["totalDeltaX","totalDeltaY","totalDeltaZ"].forEach(r=>{this.state[r]<this.min&&(this.state[r]=this.min),this.state[r]>this.max&&(this.state[r]=this.max)}),this.emitWheelEvent(s,t)};emitWheelEvent(t,a){const s=t.length>0?El(t):{x:a.clientX,y:a.clientY},r=this.gesturesRegistry.getActiveGestures(this.element),i={gestureName:this.name,centroid:s,target:a.target,srcEvent:a,phase:"ongoing",pointers:t,timeStamp:a.timeStamp,deltaX:a.deltaX*this.sensitivity*(this.invert?-1:1),deltaY:a.deltaY*this.sensitivity*(this.invert?-1:1),deltaZ:a.deltaZ*this.sensitivity*(this.invert?-1:1),deltaMode:a.deltaMode,totalDeltaX:this.state.totalDeltaX,totalDeltaY:this.state.totalDeltaY,totalDeltaZ:this.state.totalDeltaZ,activeGestures:r,customData:this.customData};this.preventDefault&&a.preventDefault(),this.stopPropagation&&a.stopPropagation();const o=oi(this.name,"ongoing"),l=new CustomEvent(o,{bubbles:!0,cancelable:!0,composed:!0,detail:i});this.element.dispatchEvent(l)}}const Im=e=>e.preventDefault(),gL=({svgRef:e})=>{const t=h.useRef(null);h.useEffect(()=>{const r=e.current;t.current||(t.current=new Fue({gestures:[new cu({name:"pan",threshold:0,maxPointers:1}),new uL({name:"move",preventIf:["pan","zoomPinch","zoomPan"]}),new op({name:"tap",preventIf:["pan","zoomPinch","zoomPan"]}),new oN({name:"quickPress",duration:50}),new cu({name:"brush",threshold:0,maxPointers:1}),new cu({name:"zoomPan",threshold:0,preventIf:["zoomTapAndDrag","zoomPressAndDrag"]}),new mL({name:"zoomPinch",threshold:5}),new nv({name:"zoomTurnWheel",sensitivity:.01,initialDelta:1}),new nv({name:"panTurnWheel",sensitivity:.5}),new hL({name:"zoomTapAndDrag",dragThreshold:10}),new fL({name:"zoomPressAndDrag",dragThreshold:10,preventIf:["zoomPinch"]}),new op({name:"zoomDoubleTapReset",taps:2})]}));const i=t.current;if(!(!r||!i))return i.registerElement(["pan","move","zoomPinch","zoomPan","zoomTurnWheel","panTurnWheel","tap","quickPress","zoomTapAndDrag","zoomPressAndDrag","zoomDoubleTapReset","brush"],r),()=>{i.unregisterAllGestures(r)}},[e,t]);const a=h.useCallback((r,i,o)=>{const l=e.current;return l?.addEventListener(r,i,o),{cleanup:()=>l?.removeEventListener(r,i)}},[e]),s=h.useCallback((r,i)=>{const o=e.current,l=t.current;!l||!o||l.setGestureOptions(r,o,i??{})},[e,t]);return h.useEffect(()=>{const r=e.current;return r?.addEventListener("gesturestart",Im),r?.addEventListener("gesturechange",Im),r?.addEventListener("gestureend",Im),()=>{r?.removeEventListener("gesturestart",Im),r?.removeEventListener("gesturechange",Im),r?.removeEventListener("gestureend",Im)}},[e]),{instance:{addInteractionListener:a,updateZoomInteractionListeners:s}}};gL.params={};gL.getInitialState=()=>({});const Vue=[cL,lL,sN,iN,gL,nN],Yue=["apiRef"],Que=e=>{let{plugins:t}=e,a=dn(e.props,Yue);const s={};t.forEach(o=>{Object.assign(s,o.params)});const r={};return Object.keys(a).forEach(o=>{const l=a[o];s[o]&&(r[o]=l)}),t.reduce((o,l)=>l.getDefaultizedParams?l.getDefaultizedParams({params:o}):o,r)};let r$=0;function Kue(e,t,a){const s=Xw(),r=h.useMemo(()=>[...Vue,...e],[e]),i=Que({plugins:r,props:t});i.id=i.id??s;const l=h.useRef({}).current,c=Zue(t.apiRef),d=h.useRef(null),u=h.useRef(null),f=h.useRef(null);if(f.current==null){r$+=1;const v={cacheKey:{id:r$}};r.forEach(N=>{N.getInitialState&&Object.assign(v,N.getInitialState(i,v,a))}),f.current=new oL(v)}const p=v=>{const N=v({instance:l,params:i,plugins:r,store:f.current,svgRef:u,chartRootRef:d,seriesConfig:a});N.publicAPI&&Object.assign(c.current,N.publicAPI),N.instance&&Object.assign(l,N.instance)};return r.forEach(p),{contextValue:h.useMemo(()=>({store:f.current,publicAPI:c.current,instance:l,svgRef:u,chartRootRef:d}),[l,c])}}function Xue(e){return e.current==null&&(e.current={}),e}function Zue(e){const t=h.useRef({});return e?Xue(e):t}const U9=h.createContext(null);const F9=()=>{},B9=4,H9=20+2*B9,Jue=40+2*B9,eme="hover",Ty={minStart:0,maxEnd:100,step:5,minSpan:10,maxSpan:100,panning:!0,filterMode:"keep",reverse:!1,slider:{enabled:!1,preview:!1,size:H9,showTooltip:eme}},pL=(e,t,a,s)=>{if(e)return e===!0?qe({axisId:t,axisDirection:a},Ty,{reverse:s??!1}):qe({axisId:t,axisDirection:a},Ty,{reverse:s??!1},e,{slider:qe({},Ty.slider,{size:e.slider?.preview??Ty.slider.preview?Jue:H9},e.slider)})};function G9(e,t){const a={top:0,bottom:0,none:0};return(e&&e.length>0?e:[{id:aN,scaleType:"linear"}]).map((i,o)=>{const l=i.dataKey,c=o===0?"bottom":"none",d=i.position??c,u=pue+(i.label?O9:0),f=i.id??`defaultized-x-axis-${o}`,p=qe({offset:a[d]},i,{id:f,position:d,height:i.height??u,zoom:pL(i.zoom,f,"x",i.reverse)});if(d!=="none"&&(a[d]+=p.height,p.zoom?.slider.enabled&&(a[d]+=p.zoom.slider.size)),l===void 0||i.data!==void 0)return p;if(t===void 0)throw new Error("MUI X Charts: x-axis uses `dataKey` but no `dataset` is provided.");return qe({},p,{data:t.map(x=>x[l])})})}function W9(e,t){const a={right:0,left:0,none:0};return(e&&e.length>0?e:[{id:fue,scaleType:"linear"}]).map((i,o)=>{const l=i.dataKey,c=o===0?"left":"none",d=i.position??c,u=gue+(i.label?O9:0),f=i.id??`defaultized-y-axis-${o}`,p=qe({offset:a[d]},i,{id:f,position:d,width:i.width??u,zoom:pL(i.zoom,f,"y",i.reverse)});if(d!=="none"&&(a[d]+=p.width,p.zoom?.slider.enabled&&(a[d]+=p.zoom.slider.size)),l===void 0||i.data!==void 0)return p;if(t===void 0)throw new Error("MUI X Charts: y-axis uses `dataKey` but no `dataset` is provided.");return qe({},p,{data:t.map(x=>x[l])})})}function tme(e,t){return function(s,r){if(r.location==="tick"){const i=r.scale.domain();return i[0]===i[1]?r.scale.tickFormat(1)(s):r.scale.tickFormat(e)(s)}return r.location==="zoom-slider-tooltip"?t.tickFormat(2)(s):`${s}`}}function Uu(e){return e.scaleType==="band"}function Fu(e){return e.scaleType==="point"}function nme(e){return e.scaleType!=="point"&&e.scaleType!=="band"}function ame(e){return e.scaleType==="symlog"}function lx(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function xL(e){let t=e,a=e;e.length===1&&(t=(o,l)=>e(o)-l,a=sme(e));function s(o,l,c,d){for(c==null&&(c=0),d==null&&(d=o.length);c<d;){const u=c+d>>>1;a(o[u],l)<0?c=u+1:d=u}return c}function r(o,l,c,d){for(c==null&&(c=0),d==null&&(d=o.length);c<d;){const u=c+d>>>1;a(o[u],l)>0?d=u:c=u+1}return c}function i(o,l,c,d){c==null&&(c=0),d==null&&(d=o.length);const u=s(o,l,c,d-1);return u>c&&t(o[u-1],l)>-t(o[u],l)?u-1:u}return{left:s,center:i,right:r}}function sme(e){return(t,a)=>lx(e(t),a)}function q9(e){return e===null?NaN:+e}function*rme(e,t){for(let a of e)a!=null&&(a=+a)>=a&&(yield a)}const ime=xL(lx),cx=ime.right;xL(q9).center;class av extends Map{constructor(t,a=cme){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),t!=null)for(const[s,r]of t)this.set(s,r)}get(t){return super.get(i$(this,t))}has(t){return super.has(i$(this,t))}set(t,a){return super.set(ome(this,t),a)}delete(t){return super.delete(lme(this,t))}}function i$({_intern:e,_key:t},a){const s=t(a);return e.has(s)?e.get(s):a}function ome({_intern:e,_key:t},a){const s=t(a);return e.has(s)?e.get(s):(e.set(s,a),a)}function lme({_intern:e,_key:t},a){const s=t(a);return e.has(s)&&(a=e.get(a),e.delete(s)),a}function cme(e){return e!==null&&typeof e=="object"?e.valueOf():e}var PT=Math.sqrt(50),DT=Math.sqrt(10),OT=Math.sqrt(2);function MT(e,t,a){var s,r=-1,i,o,l;if(t=+t,e=+e,a=+a,e===t&&a>0)return[e];if((s=t<e)&&(i=e,e=t,t=i),(l=V9(e,t,a))===0||!isFinite(l))return[];if(l>0){let c=Math.round(e/l),d=Math.round(t/l);for(c*l<e&&++c,d*l>t&&--d,o=new Array(i=d-c+1);++r<i;)o[r]=(c+r)*l}else{l=-l;let c=Math.round(e*l),d=Math.round(t*l);for(c/l<e&&++c,d/l>t&&--d,o=new Array(i=d-c+1);++r<i;)o[r]=(c+r)/l}return s&&o.reverse(),o}function V9(e,t,a){var s=(t-e)/Math.max(0,a),r=Math.floor(Math.log(s)/Math.LN10),i=s/Math.pow(10,r);return r>=0?(i>=PT?10:i>=DT?5:i>=OT?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(i>=PT?10:i>=DT?5:i>=OT?2:1)}function IT(e,t,a){var s=Math.abs(t-e)/Math.max(0,a),r=Math.pow(10,Math.floor(Math.log(s)/Math.LN10)),i=s/r;return i>=PT?r*=10:i>=DT?r*=5:i>=OT&&(r*=2),t<e?-r:r}function o$(e,t){let a;for(const s of e)s!=null&&(a<s||a===void 0&&s>=s)&&(a=s);return a}function l$(e,t){let a;for(const s of e)s!=null&&(a>s||a===void 0&&s>=s)&&(a=s);return a}function Y9(e,t,a=0,s=e.length-1,r=lx){for(;s>a;){if(s-a>600){const c=s-a+1,d=t-a+1,u=Math.log(c),f=.5*Math.exp(2*u/3),p=.5*Math.sqrt(u*f*(c-f)/c)*(d-c/2<0?-1:1),x=Math.max(a,Math.floor(t-d*f/c+p)),v=Math.min(s,Math.floor(t+(c-d)*f/c+p));Y9(e,t,x,v,r)}const i=e[t];let o=a,l=s;for(tg(e,a,t),r(e[s],i)>0&&tg(e,a,s);o<l;){for(tg(e,o,l),++o,--l;r(e[o],i)<0;)++o;for(;r(e[l],i)>0;)--l}r(e[a],i)===0?tg(e,a,l):(++l,tg(e,l,s)),l<=t&&(a=l+1),t<=l&&(s=l-1)}return e}function tg(e,t,a){const s=e[t];e[t]=e[a],e[a]=s}function dme(e,t,a){if(e=Float64Array.from(rme(e)),!!(s=e.length)){if((t=+t)<=0||s<2)return l$(e);if(t>=1)return o$(e);var s,r=(s-1)*t,i=Math.floor(r),o=o$(Y9(e,i).subarray(0,i+1)),l=l$(e.subarray(i+1));return o+(l-o)*(r-i)}}function ume(e,t,a=q9){if(s=e.length){if((t=+t)<=0||s<2)return+a(e[0],0,e);if(t>=1)return+a(e[s-1],s-1,e);var s,r=(s-1)*t,i=Math.floor(r),o=+a(e[i],i,e),l=+a(e[i+1],i+1,e);return o+(l-o)*(r-i)}}function Q9(e,t,a){e=+e,t=+t,a=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+a;for(var s=-1,r=Math.max(0,Math.ceil((t-e)/a))|0,i=new Array(r);++s<r;)i[s]=e+s*a;return i}function bi(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ql(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const $T=Symbol("implicit");function lp(){var e=new av,t=[],a=[],s=$T;function r(i){let o=e.get(i);if(o===void 0){if(s!==$T)return s;e.set(i,o=t.push(i)-1)}return a[o%a.length]}return r.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new av;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return r},r.range=function(i){return arguments.length?(a=Array.from(i),r):a.slice()},r.unknown=function(i){return arguments.length?(s=i,r):s},r.copy=function(){return lp(t,a).unknown(s)},bi.apply(r,arguments),r}function yL(){var e=lp().unknown(void 0),t=e.domain,a=e.range,s=0,r=1,i,o,l=!1,c=0,d=0,u=.5;delete e.unknown;function f(){var p=t().length,x=r<s,v=x?r:s,N=x?s:r;i=(N-v)/Math.max(1,p-c+d*2),l&&(i=Math.floor(i)),v+=(N-v-i*(p-c))*u,o=i*(1-c),l&&(v=Math.round(v),o=Math.round(o));var b=Q9(p).map(function(C){return v+i*C});return a(x?b.reverse():b)}return e.domain=function(p){return arguments.length?(t(p),f()):t()},e.range=function(p){return arguments.length?([s,r]=p,s=+s,r=+r,f()):[s,r]},e.rangeRound=function(p){return[s,r]=p,s=+s,r=+r,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(p){return arguments.length?(l=!!p,f()):l},e.padding=function(p){return arguments.length?(c=Math.min(1,d=+p),f()):c},e.paddingInner=function(p){return arguments.length?(c=Math.min(1,p),f()):c},e.paddingOuter=function(p){return arguments.length?(d=+p,f()):d},e.align=function(p){return arguments.length?(u=Math.max(0,Math.min(1,p)),f()):u},e.copy=function(){return yL(t(),[s,r]).round(l).paddingInner(c).paddingOuter(d).align(u)},bi.apply(f(),arguments)}function K9(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return K9(t())},e}function mme(){return K9(yL.apply(null,arguments).paddingInner(1))}function bL(e,t,a){e.prototype=t.prototype=a,a.constructor=e}function X9(e,t){var a=Object.create(e.prototype);for(var s in t)a[s]=t[s];return a}function dx(){}var cp=.7,sv=1/cp,rf="\\s*([+-]?\\d+)\\s*",dp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",No="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",fme=/^#([0-9a-f]{3,8})$/,hme=new RegExp(`^rgb\\(${rf},${rf},${rf}\\)$`),gme=new RegExp(`^rgb\\(${No},${No},${No}\\)$`),pme=new RegExp(`^rgba\\(${rf},${rf},${rf},${dp}\\)$`),xme=new RegExp(`^rgba\\(${No},${No},${No},${dp}\\)$`),yme=new RegExp(`^hsl\\(${dp},${No},${No}\\)$`),bme=new RegExp(`^hsla\\(${dp},${No},${No},${dp}\\)$`),c$={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};bL(dx,up,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:d$,formatHex:d$,formatHex8:vme,formatHsl:wme,formatRgb:u$,toString:u$});function d$(){return this.rgb().formatHex()}function vme(){return this.rgb().formatHex8()}function wme(){return Z9(this).formatHsl()}function u$(){return this.rgb().formatRgb()}function up(e){var t,a;return e=(e+"").trim().toLowerCase(),(t=fme.exec(e))?(a=t[1].length,t=parseInt(t[1],16),a===6?m$(t):a===3?new nr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):a===8?Ey(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):a===4?Ey(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=hme.exec(e))?new nr(t[1],t[2],t[3],1):(t=gme.exec(e))?new nr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=pme.exec(e))?Ey(t[1],t[2],t[3],t[4]):(t=xme.exec(e))?Ey(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=yme.exec(e))?g$(t[1],t[2]/100,t[3]/100,1):(t=bme.exec(e))?g$(t[1],t[2]/100,t[3]/100,t[4]):c$.hasOwnProperty(e)?m$(c$[e]):e==="transparent"?new nr(NaN,NaN,NaN,0):null}function m$(e){return new nr(e>>16&255,e>>8&255,e&255,1)}function Ey(e,t,a,s){return s<=0&&(e=t=a=NaN),new nr(e,t,a,s)}function Nme(e){return e instanceof dx||(e=up(e)),e?(e=e.rgb(),new nr(e.r,e.g,e.b,e.opacity)):new nr}function RT(e,t,a,s){return arguments.length===1?Nme(e):new nr(e,t,a,s??1)}function nr(e,t,a,s){this.r=+e,this.g=+t,this.b=+a,this.opacity=+s}bL(nr,RT,X9(dx,{brighter(e){return e=e==null?sv:Math.pow(sv,e),new nr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?cp:Math.pow(cp,e),new nr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new nr(du(this.r),du(this.g),du(this.b),rv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:f$,formatHex:f$,formatHex8:jme,formatRgb:h$,toString:h$}));function f$(){return`#${tu(this.r)}${tu(this.g)}${tu(this.b)}`}function jme(){return`#${tu(this.r)}${tu(this.g)}${tu(this.b)}${tu((isNaN(this.opacity)?1:this.opacity)*255)}`}function h$(){const e=rv(this.opacity);return`${e===1?"rgb(":"rgba("}${du(this.r)}, ${du(this.g)}, ${du(this.b)}${e===1?")":`, ${e})`}`}function rv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function du(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function tu(e){return e=du(e),(e<16?"0":"")+e.toString(16)}function g$(e,t,a,s){return s<=0?e=t=a=NaN:a<=0||a>=1?e=t=NaN:t<=0&&(e=NaN),new Pi(e,t,a,s)}function Z9(e){if(e instanceof Pi)return new Pi(e.h,e.s,e.l,e.opacity);if(e instanceof dx||(e=up(e)),!e)return new Pi;if(e instanceof Pi)return e;e=e.rgb();var t=e.r/255,a=e.g/255,s=e.b/255,r=Math.min(t,a,s),i=Math.max(t,a,s),o=NaN,l=i-r,c=(i+r)/2;return l?(t===i?o=(a-s)/l+(a<s)*6:a===i?o=(s-t)/l+2:o=(t-a)/l+4,l/=c<.5?i+r:2-i-r,o*=60):l=c>0&&c<1?0:o,new Pi(o,l,c,e.opacity)}function Cme(e,t,a,s){return arguments.length===1?Z9(e):new Pi(e,t,a,s??1)}function Pi(e,t,a,s){this.h=+e,this.s=+t,this.l=+a,this.opacity=+s}bL(Pi,Cme,X9(dx,{brighter(e){return e=e==null?sv:Math.pow(sv,e),new Pi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?cp:Math.pow(cp,e),new Pi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,a=this.l,s=a+(a<.5?a:1-a)*t,r=2*a-s;return new nr(LS(e>=240?e-240:e+120,r,s),LS(e,r,s),LS(e<120?e+240:e-120,r,s),this.opacity)},clamp(){return new Pi(p$(this.h),ky(this.s),ky(this.l),rv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=rv(this.opacity);return`${e===1?"hsl(":"hsla("}${p$(this.h)}, ${ky(this.s)*100}%, ${ky(this.l)*100}%${e===1?")":`, ${e})`}`}}));function p$(e){return e=(e||0)%360,e<0?e+360:e}function ky(e){return Math.max(0,Math.min(1,e||0))}function LS(e,t,a){return(e<60?t+(a-t)*e/60:e<180?a:e<240?t+(a-t)*(240-e)/60:t)*255}const vL=e=>()=>e;function Sme(e,t){return function(a){return e+a*t}}function _me(e,t,a){return e=Math.pow(e,a),t=Math.pow(t,a)-e,a=1/a,function(s){return Math.pow(e+s*t,a)}}function Ame(e){return(e=+e)==1?J9:function(t,a){return a-t?_me(t,a,e):vL(isNaN(t)?a:t)}}function J9(e,t){var a=t-e;return a?Sme(e,a):vL(isNaN(e)?t:e)}const x$=(function e(t){var a=Ame(t);function s(r,i){var o=a((r=RT(r)).r,(i=RT(i)).r),l=a(r.g,i.g),c=a(r.b,i.b),d=J9(r.opacity,i.opacity);return function(u){return r.r=o(u),r.g=l(u),r.b=c(u),r.opacity=d(u),r+""}}return s.gamma=e,s})(1);function Tme(e,t){t||(t=[]);var a=e?Math.min(t.length,e.length):0,s=t.slice(),r;return function(i){for(r=0;r<a;++r)s[r]=e[r]*(1-i)+t[r]*i;return s}}function Eme(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function kme(e,t){var a=t?t.length:0,s=e?Math.min(a,e.length):0,r=new Array(s),i=new Array(a),o;for(o=0;o<s;++o)r[o]=Bf(e[o],t[o]);for(;o<a;++o)i[o]=t[o];return function(l){for(o=0;o<s;++o)i[o]=r[o](l);return i}}function wL(e,t){var a=new Date;return e=+e,t=+t,function(s){return a.setTime(e*(1-s)+t*s),a}}function pf(e,t){return e=+e,t=+t,function(a){return e*(1-a)+t*a}}function Lme(e,t){var a={},s={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?a[r]=Bf(e[r],t[r]):s[r]=t[r];return function(i){for(r in a)s[r]=a[r](i);return s}}var zT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,PS=new RegExp(zT.source,"g");function Pme(e){return function(){return e}}function Dme(e){return function(t){return e(t)+""}}function NL(e,t){var a=zT.lastIndex=PS.lastIndex=0,s,r,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(s=zT.exec(e))&&(r=PS.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),l[o]?l[o]+=i:l[++o]=i),(s=s[0])===(r=r[0])?l[o]?l[o]+=r:l[++o]=r:(l[++o]=null,c.push({i:o,x:pf(s,r)})),a=PS.lastIndex;return a<t.length&&(i=t.slice(a),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?Dme(c[0].x):Pme(t):(t=c.length,function(d){for(var u=0,f;u<t;++u)l[(f=c[u]).i]=f.x(d);return l.join("")})}function Bf(e,t){var a=typeof t,s;return t==null||a==="boolean"?vL(t):(a==="number"?pf:a==="string"?(s=up(t))?(t=s,x$):NL:t instanceof up?x$:t instanceof Date?wL:Eme(t)?Tme:Array.isArray(t)?kme:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Lme:pf)(e,t)}function jL(e,t){return e=+e,t=+t,function(a){return Math.round(e*(1-a)+t*a)}}function Ome(e,t){t===void 0&&(t=e,e=Bf);for(var a=0,s=t.length-1,r=t[0],i=new Array(s<0?0:s);a<s;)i[a]=e(r,r=t[++a]);return function(o){var l=Math.max(0,Math.min(s-1,Math.floor(o*=s)));return i[l](o-l)}}function Mme(e){return function(){return e}}function iv(e){return+e}var y$=[0,1];function Rs(e){return e}function UT(e,t){return(t-=e=+e)?function(a){return(a-e)/t}:Mme(isNaN(t)?NaN:.5)}function Ime(e,t){var a;return e>t&&(a=e,e=t,t=a),function(s){return Math.max(e,Math.min(t,s))}}function $me(e,t,a){var s=e[0],r=e[1],i=t[0],o=t[1];return r<s?(s=UT(r,s),i=a(o,i)):(s=UT(s,r),i=a(i,o)),function(l){return i(s(l))}}function Rme(e,t,a){var s=Math.min(e.length,t.length)-1,r=new Array(s),i=new Array(s),o=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<s;)r[o]=UT(e[o],e[o+1]),i[o]=a(t[o],t[o+1]);return function(l){var c=cx(e,l,1,s)-1;return i[c](r[c](l))}}function ux(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function lN(){var e=y$,t=y$,a=Bf,s,r,i,o=Rs,l,c,d;function u(){var p=Math.min(e.length,t.length);return o!==Rs&&(o=Ime(e[0],e[p-1])),l=p>2?Rme:$me,c=d=null,f}function f(p){return p==null||isNaN(p=+p)?i:(c||(c=l(e.map(s),t,a)))(s(o(p)))}return f.invert=function(p){return o(r((d||(d=l(t,e.map(s),pf)))(p)))},f.domain=function(p){return arguments.length?(e=Array.from(p,iv),u()):e.slice()},f.range=function(p){return arguments.length?(t=Array.from(p),u()):t.slice()},f.rangeRound=function(p){return t=Array.from(p),a=jL,u()},f.clamp=function(p){return arguments.length?(o=p?!0:Rs,u()):o!==Rs},f.interpolate=function(p){return arguments.length?(a=p,u()):a},f.unknown=function(p){return arguments.length?(i=p,f):i},function(p,x){return s=p,r=x,u()}}function CL(){return lN()(Rs,Rs)}function zme(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function ov(e,t){if((a=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var a,s=e.slice(0,a);return[s.length>1?s[0]+s.slice(2):s,+e.slice(a+1)]}function xf(e){return e=ov(Math.abs(e)),e?e[1]:NaN}function Ume(e,t){return function(a,s){for(var r=a.length,i=[],o=0,l=e[0],c=0;r>0&&l>0&&(c+l+1>s&&(l=Math.max(1,s-c)),i.push(a.substring(r-=l,r+l)),!((c+=l+1)>s));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function Fme(e){return function(t){return t.replace(/[0-9]/g,function(a){return e[+a]})}}var Bme=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function mp(e){if(!(t=Bme.exec(e)))throw new Error("invalid format: "+e);var t;return new SL({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}mp.prototype=SL.prototype;function SL(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}SL.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Hme(e){e:for(var t=e.length,a=1,s=-1,r;a<t;++a)switch(e[a]){case".":s=r=a;break;case"0":s===0&&(s=a),r=a;break;default:if(!+e[a])break e;s>0&&(s=0);break}return s>0?e.slice(0,s)+e.slice(r+1):e}var eG;function Gme(e,t){var a=ov(e,t);if(!a)return e+"";var s=a[0],r=a[1],i=r-(eG=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=s.length;return i===o?s:i>o?s+new Array(i-o+1).join("0"):i>0?s.slice(0,i)+"."+s.slice(i):"0."+new Array(1-i).join("0")+ov(e,Math.max(0,t+i-1))[0]}function b$(e,t){var a=ov(e,t);if(!a)return e+"";var s=a[0],r=a[1];return r<0?"0."+new Array(-r).join("0")+s:s.length>r+1?s.slice(0,r+1)+"."+s.slice(r+1):s+new Array(r-s.length+2).join("0")}const v$={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:zme,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>b$(e*100,t),r:b$,s:Gme,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function w$(e){return e}var N$=Array.prototype.map,j$=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Wme(e){var t=e.grouping===void 0||e.thousands===void 0?w$:Ume(N$.call(e.grouping,Number),e.thousands+""),a=e.currency===void 0?"":e.currency[0]+"",s=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?w$:Fme(N$.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(f){f=mp(f);var p=f.fill,x=f.align,v=f.sign,N=f.symbol,b=f.zero,C=f.width,w=f.comma,S=f.precision,E=f.trim,k=f.type;k==="n"?(w=!0,k="g"):v$[k]||(S===void 0&&(S=12),E=!0,k="g"),(b||p==="0"&&x==="=")&&(b=!0,p="0",x="=");var A=N==="$"?a:N==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",T=N==="$"?s:/[%p]/.test(k)?o:"",_=v$[k],I=/[defgprs%]/.test(k);S=S===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function R(U){var D=A,M=T,W,X,z;if(k==="c")M=_(U)+M,U="";else{U=+U;var Q=U<0||1/U<0;if(U=isNaN(U)?c:_(Math.abs(U),S),E&&(U=Hme(U)),Q&&+U==0&&v!=="+"&&(Q=!1),D=(Q?v==="("?v:l:v==="-"||v==="("?"":v)+D,M=(k==="s"?j$[8+eG/3]:"")+M+(Q&&v==="("?")":""),I){for(W=-1,X=U.length;++W<X;)if(z=U.charCodeAt(W),48>z||z>57){M=(z===46?r+U.slice(W+1):U.slice(W))+M,U=U.slice(0,W);break}}}w&&!b&&(U=t(U,1/0));var de=D.length+U.length+M.length,Y=de<C?new Array(C-de+1).join(p):"";switch(w&&b&&(U=t(Y+U,Y.length?C-M.length:1/0),Y=""),x){case"<":U=D+U+M+Y;break;case"=":U=D+Y+U+M;break;case"^":U=Y.slice(0,de=Y.length>>1)+D+U+M+Y.slice(de);break;default:U=Y+D+U+M;break}return i(U)}return R.toString=function(){return f+""},R}function u(f,p){var x=d((f=mp(f),f.type="f",f)),v=Math.max(-8,Math.min(8,Math.floor(xf(p)/3)))*3,N=Math.pow(10,-v),b=j$[8+v/3];return function(C){return x(N*C)+b}}return{format:d,formatPrefix:u}}var Ly,_L,tG;qme({thousands:",",grouping:[3],currency:["$",""]});function qme(e){return Ly=Wme(e),_L=Ly.format,tG=Ly.formatPrefix,Ly}function Vme(e){return Math.max(0,-xf(Math.abs(e)))}function Yme(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(xf(t)/3)))*3-xf(Math.abs(e)))}function Qme(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,xf(t)-xf(e))+1}function nG(e,t,a,s){var r=IT(e,t,a),i;switch(s=mp(s??",f"),s.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return s.precision==null&&!isNaN(i=Yme(r,o))&&(s.precision=i),tG(s,o)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(i=Qme(r,Math.max(Math.abs(e),Math.abs(t))))&&(s.precision=i-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(i=Vme(r))&&(s.precision=i-(s.type==="%")*2);break}}return _L(s)}function md(e){var t=e.domain;return e.ticks=function(a){var s=t();return MT(s[0],s[s.length-1],a??10)},e.tickFormat=function(a,s){var r=t();return nG(r[0],r[r.length-1],a??10,s)},e.nice=function(a){a==null&&(a=10);var s=t(),r=0,i=s.length-1,o=s[r],l=s[i],c,d,u=10;for(l<o&&(d=o,o=l,l=d,d=r,r=i,i=d);u-- >0;){if(d=V9(o,l,a),d===c)return s[r]=o,s[i]=l,t(s);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return e},e}function cN(){var e=CL();return e.copy=function(){return ux(e,cN())},bi.apply(e,arguments),md(e)}function aG(e){var t;function a(s){return s==null||isNaN(s=+s)?t:s}return a.invert=a,a.domain=a.range=function(s){return arguments.length?(e=Array.from(s,iv),a):e.slice()},a.unknown=function(s){return arguments.length?(t=s,a):t},a.copy=function(){return aG(e).unknown(t)},e=arguments.length?Array.from(e,iv):[0,1],md(a)}function sG(e,t){e=e.slice();var a=0,s=e.length-1,r=e[a],i=e[s],o;return i<r&&(o=a,a=s,s=o,o=r,r=i,i=o),e[a]=t.floor(r),e[s]=t.ceil(i),e}function C$(e){return Math.log(e)}function S$(e){return Math.exp(e)}function Kme(e){return-Math.log(-e)}function Xme(e){return-Math.exp(-e)}function Zme(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Jme(e){return e===10?Zme:e===Math.E?Math.exp:t=>Math.pow(e,t)}function efe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function _$(e){return(t,a)=>-e(-t,a)}function AL(e){const t=e(C$,S$),a=t.domain;let s=10,r,i;function o(){return r=efe(s),i=Jme(s),a()[0]<0?(r=_$(r),i=_$(i),e(Kme,Xme)):e(C$,S$),t}return t.base=function(l){return arguments.length?(s=+l,o()):s},t.domain=function(l){return arguments.length?(a(l),o()):a()},t.ticks=l=>{const c=a();let d=c[0],u=c[c.length-1];const f=u<d;f&&([d,u]=[u,d]);let p=r(d),x=r(u),v,N;const b=l==null?10:+l;let C=[];if(!(s%1)&&x-p<b){if(p=Math.floor(p),x=Math.ceil(x),d>0){for(;p<=x;++p)for(v=1;v<s;++v)if(N=p<0?v/i(-p):v*i(p),!(N<d)){if(N>u)break;C.push(N)}}else for(;p<=x;++p)for(v=s-1;v>=1;--v)if(N=p>0?v/i(-p):v*i(p),!(N<d)){if(N>u)break;C.push(N)}C.length*2<b&&(C=MT(d,u,b))}else C=MT(p,x,Math.min(x-p,b)).map(i);return f?C.reverse():C},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=s===10?"s":","),typeof c!="function"&&(!(s%1)&&(c=mp(c)).precision==null&&(c.trim=!0),c=_L(c)),l===1/0)return c;const d=Math.max(1,s*l/t.ticks().length);return u=>{let f=u/i(Math.round(r(u)));return f*s<s-.5&&(f*=s),f<=d?c(u):""}},t.nice=()=>a(sG(a(),{floor:l=>i(Math.floor(r(l))),ceil:l=>i(Math.ceil(r(l)))})),t}function fp(){const e=AL(lN()).domain([1,10]);return e.copy=()=>ux(e,fp()).base(e.base()),bi.apply(e,arguments),e}function A$(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function T$(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function TL(e){var t=1,a=e(A$(t),T$(t));return a.constant=function(s){return arguments.length?e(A$(t=+s),T$(t)):t},md(a)}function EL(){var e=TL(lN());return e.copy=function(){return ux(e,EL()).constant(e.constant())},bi.apply(e,arguments)}function E$(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function tfe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function nfe(e){return e<0?-e*e:e*e}function kL(e){var t=e(Rs,Rs),a=1;function s(){return a===1?e(Rs,Rs):a===.5?e(tfe,nfe):e(E$(a),E$(1/a))}return t.exponent=function(r){return arguments.length?(a=+r,s()):a},md(t)}function dN(){var e=kL(lN());return e.copy=function(){return ux(e,dN()).exponent(e.exponent())},bi.apply(e,arguments),e}function rG(){return dN.apply(null,arguments).exponent(.5)}function k$(e){return Math.sign(e)*e*e}function afe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function iG(){var e=CL(),t=[0,1],a=!1,s;function r(i){var o=afe(e(i));return isNaN(o)?s:a?Math.round(o):o}return r.invert=function(i){return e.invert(k$(i))},r.domain=function(i){return arguments.length?(e.domain(i),r):e.domain()},r.range=function(i){return arguments.length?(e.range((t=Array.from(i,iv)).map(k$)),r):t.slice()},r.rangeRound=function(i){return r.range(i).round(!0)},r.round=function(i){return arguments.length?(a=!!i,r):a},r.clamp=function(i){return arguments.length?(e.clamp(i),r):e.clamp()},r.unknown=function(i){return arguments.length?(s=i,r):s},r.copy=function(){return iG(e.domain(),t).round(a).clamp(e.clamp()).unknown(s)},bi.apply(r,arguments),md(r)}function oG(){var e=[],t=[],a=[],s;function r(){var o=0,l=Math.max(1,t.length);for(a=new Array(l-1);++o<l;)a[o-1]=ume(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?s:t[cx(a,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?a[l-1]:e[0],l<a.length?a[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(lx),r()},i.range=function(o){return arguments.length?(t=Array.from(o),r()):t.slice()},i.unknown=function(o){return arguments.length?(s=o,i):s},i.quantiles=function(){return a.slice()},i.copy=function(){return oG().domain(e).range(t).unknown(s)},bi.apply(i,arguments)}function lG(){var e=0,t=1,a=1,s=[.5],r=[0,1],i;function o(c){return c!=null&&c<=c?r[cx(s,c,0,a)]:i}function l(){var c=-1;for(s=new Array(a);++c<a;)s[c]=((c+1)*t-(c-a)*e)/(a+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(a=(r=Array.from(c)).length-1,l()):r.slice()},o.invertExtent=function(c){var d=r.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,s[0]]:d>=a?[s[a-1],t]:[s[d-1],s[d]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return s.slice()},o.copy=function(){return lG().domain([e,t]).range(r).unknown(i)},bi.apply(md(o),arguments)}function LL(){var e=[.5],t=[0,1],a,s=1;function r(i){return i!=null&&i<=i?t[cx(e,i,0,s)]:a}return r.domain=function(i){return arguments.length?(e=Array.from(i),s=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(i){return arguments.length?(t=Array.from(i),s=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},r.unknown=function(i){return arguments.length?(a=i,r):a},r.copy=function(){return LL().domain(e).range(t).unknown(a)},bi.apply(r,arguments)}const DS=new Date,OS=new Date;function Za(e,t,a,s){function r(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return r.floor=i=>(e(i=new Date(+i)),i),r.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),r.round=i=>{const o=r(i),l=r.ceil(i);return i-o<l-i?o:l},r.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),r.range=(i,o,l)=>{const c=[];if(i=r.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let d;do c.push(d=new Date(+i)),t(i,l),e(i);while(d<i&&i<o);return c},r.filter=i=>Za(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),a&&(r.count=(i,o)=>(DS.setTime(+i),OS.setTime(+o),e(DS),e(OS),Math.floor(a(DS,OS))),r.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?r.filter(s?o=>s(o)%i===0:o=>r.count(0,o)%i===0):r)),r}const lv=Za(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);lv.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Za(t=>{t.setTime(Math.floor(t/e)*e)},(t,a)=>{t.setTime(+t+a*e)},(t,a)=>(a-t)/e):lv);lv.range;const yl=1e3,ri=yl*60,bl=ri*60,kl=bl*24,PL=kl*7,L$=kl*30,MS=kl*365,nu=Za(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*yl)},(e,t)=>(t-e)/yl,e=>e.getUTCSeconds());nu.range;const DL=Za(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*yl)},(e,t)=>{e.setTime(+e+t*ri)},(e,t)=>(t-e)/ri,e=>e.getMinutes());DL.range;const OL=Za(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ri)},(e,t)=>(t-e)/ri,e=>e.getUTCMinutes());OL.range;const ML=Za(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*yl-e.getMinutes()*ri)},(e,t)=>{e.setTime(+e+t*bl)},(e,t)=>(t-e)/bl,e=>e.getHours());ML.range;const IL=Za(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*bl)},(e,t)=>(t-e)/bl,e=>e.getUTCHours());IL.range;const mx=Za(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ri)/kl,e=>e.getDate()-1);mx.range;const uN=Za(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/kl,e=>e.getUTCDate()-1);uN.range;const cG=Za(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/kl,e=>Math.floor(e/kl));cG.range;function Bu(e){return Za(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,a)=>{t.setDate(t.getDate()+a*7)},(t,a)=>(a-t-(a.getTimezoneOffset()-t.getTimezoneOffset())*ri)/PL)}const mN=Bu(0),cv=Bu(1),sfe=Bu(2),rfe=Bu(3),yf=Bu(4),ife=Bu(5),ofe=Bu(6);mN.range;cv.range;sfe.range;rfe.range;yf.range;ife.range;ofe.range;function Hu(e){return Za(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,a)=>{t.setUTCDate(t.getUTCDate()+a*7)},(t,a)=>(a-t)/PL)}const fN=Hu(0),dv=Hu(1),lfe=Hu(2),cfe=Hu(3),bf=Hu(4),dfe=Hu(5),ufe=Hu(6);fN.range;dv.range;lfe.range;cfe.range;bf.range;dfe.range;ufe.range;const $L=Za(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());$L.range;const RL=Za(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());RL.range;const Ll=Za(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ll.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Za(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,a)=>{t.setFullYear(t.getFullYear()+a*e)});Ll.range;const Pl=Za(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Pl.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Za(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,a)=>{t.setUTCFullYear(t.getUTCFullYear()+a*e)});Pl.range;function dG(e,t,a,s,r,i){const o=[[nu,1,yl],[nu,5,5*yl],[nu,15,15*yl],[nu,30,30*yl],[i,1,ri],[i,5,5*ri],[i,15,15*ri],[i,30,30*ri],[r,1,bl],[r,3,3*bl],[r,6,6*bl],[r,12,12*bl],[s,1,kl],[s,2,2*kl],[a,1,PL],[t,1,L$],[t,3,3*L$],[e,1,MS]];function l(d,u,f){const p=u<d;p&&([d,u]=[u,d]);const x=f&&typeof f.range=="function"?f:c(d,u,f),v=x?x.range(d,+u+1):[];return p?v.reverse():v}function c(d,u,f){const p=Math.abs(u-d)/f,x=xL(([,,b])=>b).right(o,p);if(x===o.length)return e.every(IT(d/MS,u/MS,f));if(x===0)return lv.every(Math.max(IT(d,u,f),1));const[v,N]=o[p/o[x-1][2]<o[x][2]/p?x-1:x];return v.every(N)}return[l,c]}const[mfe,ffe]=dG(Pl,RL,fN,cG,IL,OL),[hfe,gfe]=dG(Ll,$L,mN,mx,ML,DL);function IS(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function $S(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ng(e,t,a){return{y:e,m:t,d:a,H:0,M:0,S:0,L:0}}function pfe(e){var t=e.dateTime,a=e.date,s=e.time,r=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,d=ag(r),u=sg(r),f=ag(i),p=sg(i),x=ag(o),v=sg(o),N=ag(l),b=sg(l),C=ag(c),w=sg(c),S={a:Q,A:de,b:Y,B:se,c:null,d:$$,e:$$,f:zfe,g:Qfe,G:Xfe,H:Ife,I:$fe,j:Rfe,L:uG,m:Ufe,M:Ffe,p:J,q:F,Q:U$,s:F$,S:Bfe,u:Hfe,U:Gfe,V:Wfe,w:qfe,W:Vfe,x:null,X:null,y:Yfe,Y:Kfe,Z:Zfe,"%":z$},E={a:Ne,A:re,b:he,B:je,c:null,d:R$,e:R$,f:nhe,g:mhe,G:hhe,H:Jfe,I:ehe,j:the,L:fG,m:ahe,M:she,p:De,q:Me,Q:U$,s:F$,S:rhe,u:ihe,U:ohe,V:lhe,w:che,W:dhe,x:null,X:null,y:uhe,Y:fhe,Z:ghe,"%":z$},k={a:R,A:U,b:D,B:M,c:W,d:M$,e:M$,f:Pfe,g:O$,G:D$,H:I$,I:I$,j:Tfe,L:Lfe,m:Afe,M:Efe,p:I,q:_fe,Q:Ofe,s:Mfe,S:kfe,u:wfe,U:Nfe,V:jfe,w:vfe,W:Cfe,x:X,X:z,y:O$,Y:D$,Z:Sfe,"%":Dfe};S.x=A(a,S),S.X=A(s,S),S.c=A(t,S),E.x=A(a,E),E.X=A(s,E),E.c=A(t,E);function A(ve,Be){return function(ke){var fe=[],ne=-1,Ae=0,ye=ve.length,Ie,Ve,Te;for(ke instanceof Date||(ke=new Date(+ke));++ne<ye;)ve.charCodeAt(ne)===37&&(fe.push(ve.slice(Ae,ne)),(Ve=P$[Ie=ve.charAt(++ne)])!=null?Ie=ve.charAt(++ne):Ve=Ie==="e"?" ":"0",(Te=Be[Ie])&&(Ie=Te(ke,Ve)),fe.push(Ie),Ae=ne+1);return fe.push(ve.slice(Ae,ne)),fe.join("")}}function T(ve,Be){return function(ke){var fe=ng(1900,void 0,1),ne=_(fe,ve,ke+="",0),Ae,ye;if(ne!=ke.length)return null;if("Q"in fe)return new Date(fe.Q);if("s"in fe)return new Date(fe.s*1e3+("L"in fe?fe.L:0));if(Be&&!("Z"in fe)&&(fe.Z=0),"p"in fe&&(fe.H=fe.H%12+fe.p*12),fe.m===void 0&&(fe.m="q"in fe?fe.q:0),"V"in fe){if(fe.V<1||fe.V>53)return null;"w"in fe||(fe.w=1),"Z"in fe?(Ae=$S(ng(fe.y,0,1)),ye=Ae.getUTCDay(),Ae=ye>4||ye===0?dv.ceil(Ae):dv(Ae),Ae=uN.offset(Ae,(fe.V-1)*7),fe.y=Ae.getUTCFullYear(),fe.m=Ae.getUTCMonth(),fe.d=Ae.getUTCDate()+(fe.w+6)%7):(Ae=IS(ng(fe.y,0,1)),ye=Ae.getDay(),Ae=ye>4||ye===0?cv.ceil(Ae):cv(Ae),Ae=mx.offset(Ae,(fe.V-1)*7),fe.y=Ae.getFullYear(),fe.m=Ae.getMonth(),fe.d=Ae.getDate()+(fe.w+6)%7)}else("W"in fe||"U"in fe)&&("w"in fe||(fe.w="u"in fe?fe.u%7:"W"in fe?1:0),ye="Z"in fe?$S(ng(fe.y,0,1)).getUTCDay():IS(ng(fe.y,0,1)).getDay(),fe.m=0,fe.d="W"in fe?(fe.w+6)%7+fe.W*7-(ye+5)%7:fe.w+fe.U*7-(ye+6)%7);return"Z"in fe?(fe.H+=fe.Z/100|0,fe.M+=fe.Z%100,$S(fe)):IS(fe)}}function _(ve,Be,ke,fe){for(var ne=0,Ae=Be.length,ye=ke.length,Ie,Ve;ne<Ae;){if(fe>=ye)return-1;if(Ie=Be.charCodeAt(ne++),Ie===37){if(Ie=Be.charAt(ne++),Ve=k[Ie in P$?Be.charAt(ne++):Ie],!Ve||(fe=Ve(ve,ke,fe))<0)return-1}else if(Ie!=ke.charCodeAt(fe++))return-1}return fe}function I(ve,Be,ke){var fe=d.exec(Be.slice(ke));return fe?(ve.p=u.get(fe[0].toLowerCase()),ke+fe[0].length):-1}function R(ve,Be,ke){var fe=x.exec(Be.slice(ke));return fe?(ve.w=v.get(fe[0].toLowerCase()),ke+fe[0].length):-1}function U(ve,Be,ke){var fe=f.exec(Be.slice(ke));return fe?(ve.w=p.get(fe[0].toLowerCase()),ke+fe[0].length):-1}function D(ve,Be,ke){var fe=C.exec(Be.slice(ke));return fe?(ve.m=w.get(fe[0].toLowerCase()),ke+fe[0].length):-1}function M(ve,Be,ke){var fe=N.exec(Be.slice(ke));return fe?(ve.m=b.get(fe[0].toLowerCase()),ke+fe[0].length):-1}function W(ve,Be,ke){return _(ve,t,Be,ke)}function X(ve,Be,ke){return _(ve,a,Be,ke)}function z(ve,Be,ke){return _(ve,s,Be,ke)}function Q(ve){return o[ve.getDay()]}function de(ve){return i[ve.getDay()]}function Y(ve){return c[ve.getMonth()]}function se(ve){return l[ve.getMonth()]}function J(ve){return r[+(ve.getHours()>=12)]}function F(ve){return 1+~~(ve.getMonth()/3)}function Ne(ve){return o[ve.getUTCDay()]}function re(ve){return i[ve.getUTCDay()]}function he(ve){return c[ve.getUTCMonth()]}function je(ve){return l[ve.getUTCMonth()]}function De(ve){return r[+(ve.getUTCHours()>=12)]}function Me(ve){return 1+~~(ve.getUTCMonth()/3)}return{format:function(ve){var Be=A(ve+="",S);return Be.toString=function(){return ve},Be},parse:function(ve){var Be=T(ve+="",!1);return Be.toString=function(){return ve},Be},utcFormat:function(ve){var Be=A(ve+="",E);return Be.toString=function(){return ve},Be},utcParse:function(ve){var Be=T(ve+="",!0);return Be.toString=function(){return ve},Be}}}var P$={"-":"",_:" ",0:"0"},us=/^\s*\d+/,xfe=/^%/,yfe=/[\\^$*+?|[\]().{}]/g;function vn(e,t,a){var s=e<0?"-":"",r=(s?-e:e)+"",i=r.length;return s+(i<a?new Array(a-i+1).join(t)+r:r)}function bfe(e){return e.replace(yfe,"\\$&")}function ag(e){return new RegExp("^(?:"+e.map(bfe).join("|")+")","i")}function sg(e){return new Map(e.map((t,a)=>[t.toLowerCase(),a]))}function vfe(e,t,a){var s=us.exec(t.slice(a,a+1));return s?(e.w=+s[0],a+s[0].length):-1}function wfe(e,t,a){var s=us.exec(t.slice(a,a+1));return s?(e.u=+s[0],a+s[0].length):-1}function Nfe(e,t,a){var s=us.exec(t.slice(a,a+2));return s?(e.U=+s[0],a+s[0].length):-1}function jfe(e,t,a){var s=us.exec(t.slice(a,a+2));return s?(e.V=+s[0],a+s[0].length):-1}function Cfe(e,t,a){var s=us.exec(t.slice(a,a+2));return s?(e.W=+s[0],a+s[0].length):-1}function D$(e,t,a){var s=us.exec(t.slice(a,a+4));return s?(e.y=+s[0],a+s[0].length):-1}function O$(e,t,a){var s=us.exec(t.slice(a,a+2));return s?(e.y=+s[0]+(+s[0]>68?1900:2e3),a+s[0].length):-1}function Sfe(e,t,a){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(a,a+6));return s?(e.Z=s[1]?0:-(s[2]+(s[3]||"00")),a+s[0].length):-1}function _fe(e,t,a){var s=us.exec(t.slice(a,a+1));return s?(e.q=s[0]*3-3,a+s[0].length):-1}function Afe(e,t,a){var s=us.exec(t.slice(a,a+2));return s?(e.m=s[0]-1,a+s[0].length):-1}function M$(e,t,a){var s=us.exec(t.slice(a,a+2));return s?(e.d=+s[0],a+s[0].length):-1}function Tfe(e,t,a){var s=us.exec(t.slice(a,a+3));return s?(e.m=0,e.d=+s[0],a+s[0].length):-1}function I$(e,t,a){var s=us.exec(t.slice(a,a+2));return s?(e.H=+s[0],a+s[0].length):-1}function Efe(e,t,a){var s=us.exec(t.slice(a,a+2));return s?(e.M=+s[0],a+s[0].length):-1}function kfe(e,t,a){var s=us.exec(t.slice(a,a+2));return s?(e.S=+s[0],a+s[0].length):-1}function Lfe(e,t,a){var s=us.exec(t.slice(a,a+3));return s?(e.L=+s[0],a+s[0].length):-1}function Pfe(e,t,a){var s=us.exec(t.slice(a,a+6));return s?(e.L=Math.floor(s[0]/1e3),a+s[0].length):-1}function Dfe(e,t,a){var s=xfe.exec(t.slice(a,a+1));return s?a+s[0].length:-1}function Ofe(e,t,a){var s=us.exec(t.slice(a));return s?(e.Q=+s[0],a+s[0].length):-1}function Mfe(e,t,a){var s=us.exec(t.slice(a));return s?(e.s=+s[0],a+s[0].length):-1}function $$(e,t){return vn(e.getDate(),t,2)}function Ife(e,t){return vn(e.getHours(),t,2)}function $fe(e,t){return vn(e.getHours()%12||12,t,2)}function Rfe(e,t){return vn(1+mx.count(Ll(e),e),t,3)}function uG(e,t){return vn(e.getMilliseconds(),t,3)}function zfe(e,t){return uG(e,t)+"000"}function Ufe(e,t){return vn(e.getMonth()+1,t,2)}function Ffe(e,t){return vn(e.getMinutes(),t,2)}function Bfe(e,t){return vn(e.getSeconds(),t,2)}function Hfe(e){var t=e.getDay();return t===0?7:t}function Gfe(e,t){return vn(mN.count(Ll(e)-1,e),t,2)}function mG(e){var t=e.getDay();return t>=4||t===0?yf(e):yf.ceil(e)}function Wfe(e,t){return e=mG(e),vn(yf.count(Ll(e),e)+(Ll(e).getDay()===4),t,2)}function qfe(e){return e.getDay()}function Vfe(e,t){return vn(cv.count(Ll(e)-1,e),t,2)}function Yfe(e,t){return vn(e.getFullYear()%100,t,2)}function Qfe(e,t){return e=mG(e),vn(e.getFullYear()%100,t,2)}function Kfe(e,t){return vn(e.getFullYear()%1e4,t,4)}function Xfe(e,t){var a=e.getDay();return e=a>=4||a===0?yf(e):yf.ceil(e),vn(e.getFullYear()%1e4,t,4)}function Zfe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+vn(t/60|0,"0",2)+vn(t%60,"0",2)}function R$(e,t){return vn(e.getUTCDate(),t,2)}function Jfe(e,t){return vn(e.getUTCHours(),t,2)}function ehe(e,t){return vn(e.getUTCHours()%12||12,t,2)}function the(e,t){return vn(1+uN.count(Pl(e),e),t,3)}function fG(e,t){return vn(e.getUTCMilliseconds(),t,3)}function nhe(e,t){return fG(e,t)+"000"}function ahe(e,t){return vn(e.getUTCMonth()+1,t,2)}function she(e,t){return vn(e.getUTCMinutes(),t,2)}function rhe(e,t){return vn(e.getUTCSeconds(),t,2)}function ihe(e){var t=e.getUTCDay();return t===0?7:t}function ohe(e,t){return vn(fN.count(Pl(e)-1,e),t,2)}function hG(e){var t=e.getUTCDay();return t>=4||t===0?bf(e):bf.ceil(e)}function lhe(e,t){return e=hG(e),vn(bf.count(Pl(e),e)+(Pl(e).getUTCDay()===4),t,2)}function che(e){return e.getUTCDay()}function dhe(e,t){return vn(dv.count(Pl(e)-1,e),t,2)}function uhe(e,t){return vn(e.getUTCFullYear()%100,t,2)}function mhe(e,t){return e=hG(e),vn(e.getUTCFullYear()%100,t,2)}function fhe(e,t){return vn(e.getUTCFullYear()%1e4,t,4)}function hhe(e,t){var a=e.getUTCDay();return e=a>=4||a===0?bf(e):bf.ceil(e),vn(e.getUTCFullYear()%1e4,t,4)}function ghe(){return"+0000"}function z$(){return"%"}function U$(e){return+e}function F$(e){return Math.floor(+e/1e3)}var $m,gG,pG;phe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function phe(e){return $m=pfe(e),gG=$m.format,$m.parse,pG=$m.utcFormat,$m.utcParse,$m}function xhe(e){return new Date(e)}function yhe(e){return e instanceof Date?+e:+new Date(+e)}function zL(e,t,a,s,r,i,o,l,c,d){var u=CL(),f=u.invert,p=u.domain,x=d(".%L"),v=d(":%S"),N=d("%I:%M"),b=d("%I %p"),C=d("%a %d"),w=d("%b %d"),S=d("%B"),E=d("%Y");function k(A){return(c(A)<A?x:l(A)<A?v:o(A)<A?N:i(A)<A?b:s(A)<A?r(A)<A?C:w:a(A)<A?S:E)(A)}return u.invert=function(A){return new Date(f(A))},u.domain=function(A){return arguments.length?p(Array.from(A,yhe)):p().map(xhe)},u.ticks=function(A){var T=p();return e(T[0],T[T.length-1],A??10)},u.tickFormat=function(A,T){return T==null?k:d(T)},u.nice=function(A){var T=p();return(!A||typeof A.range!="function")&&(A=t(T[0],T[T.length-1],A??10)),A?p(sG(T,A)):u},u.copy=function(){return ux(u,zL(e,t,a,s,r,i,o,l,c,d))},u}function UL(){return bi.apply(zL(hfe,gfe,Ll,$L,mN,mx,ML,DL,nu,gG).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function xG(){return bi.apply(zL(mfe,ffe,Pl,RL,fN,uN,IL,OL,nu,pG).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function hN(){var e=0,t=1,a,s,r,i,o=Rs,l=!1,c;function d(f){return f==null||isNaN(f=+f)?c:o(r===0?.5:(f=(i(f)-a)*r,l?Math.max(0,Math.min(1,f)):f))}d.domain=function(f){return arguments.length?([e,t]=f,a=i(e=+e),s=i(t=+t),r=a===s?0:1/(s-a),d):[e,t]},d.clamp=function(f){return arguments.length?(l=!!f,d):l},d.interpolator=function(f){return arguments.length?(o=f,d):o};function u(f){return function(p){var x,v;return arguments.length?([x,v]=p,o=f(x,v),d):[o(0),o(1)]}}return d.range=u(Bf),d.rangeRound=u(jL),d.unknown=function(f){return arguments.length?(c=f,d):c},function(f){return i=f,a=f(e),s=f(t),r=a===s?0:1/(s-a),d}}function fd(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function FL(){var e=md(hN()(Rs));return e.copy=function(){return fd(e,FL())},ql.apply(e,arguments)}function yG(){var e=AL(hN()).domain([1,10]);return e.copy=function(){return fd(e,yG()).base(e.base())},ql.apply(e,arguments)}function bG(){var e=TL(hN());return e.copy=function(){return fd(e,bG()).constant(e.constant())},ql.apply(e,arguments)}function BL(){var e=kL(hN());return e.copy=function(){return fd(e,BL()).exponent(e.exponent())},ql.apply(e,arguments)}function bhe(){return BL.apply(null,arguments).exponent(.5)}function vG(){var e=[],t=Rs;function a(s){if(s!=null&&!isNaN(s=+s))return t((cx(e,s,1)-1)/(e.length-1))}return a.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let r of s)r!=null&&!isNaN(r=+r)&&e.push(r);return e.sort(lx),a},a.interpolator=function(s){return arguments.length?(t=s,a):t},a.range=function(){return e.map((s,r)=>t(r/(e.length-1)))},a.quantiles=function(s){return Array.from({length:s+1},(r,i)=>dme(e,i/s))},a.copy=function(){return vG(t).domain(e)},ql.apply(a,arguments)}function gN(){var e=0,t=.5,a=1,s=1,r,i,o,l,c,d=Rs,u,f=!1,p;function x(N){return isNaN(N=+N)?p:(N=.5+((N=+u(N))-i)*(s*N<s*i?l:c),d(f?Math.max(0,Math.min(1,N)):N))}x.domain=function(N){return arguments.length?([e,t,a]=N,r=u(e=+e),i=u(t=+t),o=u(a=+a),l=r===i?0:.5/(i-r),c=i===o?0:.5/(o-i),s=i<r?-1:1,x):[e,t,a]},x.clamp=function(N){return arguments.length?(f=!!N,x):f},x.interpolator=function(N){return arguments.length?(d=N,x):d};function v(N){return function(b){var C,w,S;return arguments.length?([C,w,S]=b,d=Ome(N,[C,w,S]),x):[d(0),d(.5),d(1)]}}return x.range=v(Bf),x.rangeRound=v(jL),x.unknown=function(N){return arguments.length?(p=N,x):p},function(N){return u=N,r=N(e),i=N(t),o=N(a),l=r===i?0:.5/(i-r),c=i===o?0:.5/(o-i),s=i<r?-1:1,x}}function wG(){var e=md(gN()(Rs));return e.copy=function(){return fd(e,wG())},ql.apply(e,arguments)}function NG(){var e=AL(gN()).domain([.1,1,10]);return e.copy=function(){return fd(e,NG()).base(e.base())},ql.apply(e,arguments)}function jG(){var e=TL(gN());return e.copy=function(){return fd(e,jG()).constant(e.constant())},ql.apply(e,arguments)}function HL(){var e=kL(gN());return e.copy=function(){return fd(e,HL()).exponent(e.exponent())},ql.apply(e,arguments)}function vhe(){return HL.apply(null,arguments).exponent(.5)}function CG(e){return e.type==="piecewise"?LL(e.thresholds,e.colors):FL([e.min??0,e.max??100],e.color)}function vf(e){return e.values?lp(e.values,e.colors).unknown(e.unknownColor??null):lp(e.colors.map((t,a)=>a),e.colors).unknown(e.unknownColor??null)}function of(e){return e.type==="ordinal"?vf(e):CG(e)}function SG(e,t,a){const{tickMaxStep:s,tickMinStep:r,tickNumber:i}=e,o=r===void 0?999:Math.floor(Math.abs(t[1]-t[0])/r),l=s===void 0?2:Math.ceil(Math.abs(t[1]-t[0])/s);return Math.min(o,Math.max(l,i??a))}function _G(e,t){return t[1]-t[0]===0?1:e/((t[1]-t[0])/100)}function GL(e){return Math.floor(Math.abs(e)/50)}function B$(e){return Array.isArray(e)?JSON.stringify(e):typeof e=="object"&&e!==null?e.valueOf():e}function pN(...e){let t=new av(void 0,B$),a=[],s=[],r=0,i=1,o,l,c=!1,d=0,u=0,f=.5;const p=b=>{const C=t.get(b);if(C!==void 0)return s[C%s.length]},x=()=>{const b=a.length,C=i<r,w=C?i:r,S=C?r:i;o=(S-w)/Math.max(1,b-d+u*2),c&&(o=Math.floor(o));const E=w+(S-w-o*(b-d))*f;l=o*(1-d);const k=c?Math.round(E):E;l=c?Math.round(l):l;const T=Q9(b).map(_=>k+o*_);return s=C?T.reverse():T,p};p.domain=function(b){if(!arguments.length)return a.slice();a=[],t=new av(void 0,B$);for(const C of b)t.has(C)||t.set(C,a.push(C)-1);return x()},p.range=function(b){if(!arguments.length)return[r,i];const[C,w]=b;return r=+C,i=+w,x()},p.rangeRound=function(b){const[C,w]=b;return r=+C,i=+w,c=!0,x()},p.bandwidth=function(){return l},p.step=function(){return o},p.round=function(b){return arguments.length?(c=!!b,x()):c},p.padding=function(b){return arguments.length?(d=Math.min(1,u=+b),x()):d},p.paddingInner=function(b){return arguments.length?(d=Math.min(1,b),x()):d},p.paddingOuter=function(b){return arguments.length?(u=+b,x()):u},p.align=function(b){return arguments.length?(f=Math.max(0,Math.min(1,b)),x()):f},p.copy=()=>pN(a,[r,i]).round(c).paddingInner(d).paddingOuter(u).align(f);const[v,N]=e;return e.length>1?(p.domain(v),p.range(N)):v?p.range(v):x(),p}function AG(...e){const t=pN(...e).paddingInner(1),a=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=()=>{const s=a();return s.padding=s.paddingOuter,delete s.paddingInner,delete s.paddingOuter,s.copy=t.copy,s},t}function TG(...e){const t=EL(...e),a=t.ticks,{negativeScale:s,linearScale:r,positiveScale:i}=whe(t);return t.ticks=o=>{const l=a(o),c=t.constant();let d=0,u=0,f=0;l.forEach(x=>{x>-c&&x<c&&(u+=1),x<=-c&&(d+=1),x>=c&&(f+=1)});const p=[];if(d>0&&p.push(...s.ticks(d)),u>0){const x=r.ticks(u);p.at(-1)===x[0]?p.push(...x.slice(1)):p.push(...x)}if(f>0){const x=i.ticks(f);p.at(-1)===x[0]?p.push(...x.slice(1)):p.push(...x)}return p},t.tickFormat=(o=10,l)=>{const c=t.constant(),[d,u]=t.domain(),f=u-d,p=s.domain(),x=p[1]-p[0],N=(f===0?0:x/f)*o,b=r.domain(),C=b[1]-b[0],S=(f===0?0:C/f)*o,E=i.domain(),k=E[1]-E[0],T=(f===0?0:k/f)*o,_=s.tickFormat(N,l),I=r.tickFormat(S,l),R=i.tickFormat(T,l);return U=>(U.valueOf()<=-c?_:U.valueOf()>=c?R:I)(U)},t.copy=()=>TG(t.domain(),t.range()).constant(t.constant()),t}function whe(e){const t=e.constant(),a=e.domain(),s=[a[0],Math.min(a[1],-t)],r=fp(s,e.range()),i=[Math.max(a[0],-t),Math.min(a[1],t)],o=cN(i,e.range()),l=[Math.max(a[0],t),a[1]],c=fp(l,e.range());return{negativeScale:r,linearScale:o,positiveScale:c}}function xN(e,t,a){switch(e){case"log":return fp(t,a);case"pow":return dN(t,a);case"sqrt":return rG(t,a);case"time":return UL(t,a);case"utc":return xG(t,a);case"symlog":return TG(t,a);default:return cN(t,a)}}const FT=e=>e?.[0]instanceof Date;function BT(e,t,a){const s=UL(e,t);return(r,{location:i})=>i==="tick"?s.tickFormat(a)(r):`${r.toLocaleString()}`}let H$,G$;class Nhe{types=new Set;constructor(){if(H$)throw new Error("You can only create one instance!");H$=this.types}addType(t){this.types.add(t)}getTypes(){return this.types}}class jhe{types=new Set;constructor(){if(G$)throw new Error("You can only create one instance!");G$=this.types}addType(t){this.types.add(t)}getTypes(){return this.types}}const yN=new Nhe;yN.addType("bar");yN.addType("line");yN.addType("scatter");const EG=new jhe;EG.addType("radar");function bN(e){return yN.getTypes().has(e)}function uv(e){return bN(e.type)}const Che=(e,t,a,s)=>{const r=new Set;return Object.keys(t).filter(bN).forEach(o=>{const l=a[o]?.series??{},c=t[o].axisTooltipGetter?.(l);c!==void 0&&c.forEach(({axisId:d,direction:u})=>{u===e&&r.add(d??s)})}),r};function ms(e){return e.bandwidth!==void 0}function She(e){return ms(e)&&e.paddingOuter!==void 0}function _he(e,t,a){const s=t==="x"?[e.left,e.left+e.width]:[e.top+e.height,e.top];return a?[s[1],s[0]]:s}const Ahe=.2,The=.1;function kG({scales:e,drawingArea:t,formattedSeries:a,axis:s,seriesConfig:r,axisDirection:i,zoomMap:o,domains:l}){if(s===void 0)return{axis:{},axisIds:[]};const c=Che(i,r,a,s[0].id),d={};return s.forEach(u=>{const f=u,p=e[f.id],x=o?.get(f.id),v=x?[x.start,x.end]:[0,100],N=_he(t,i,f.reverse??!1),b=!f.ignoreTooltip&&c.has(f.id),C=f.data??[];if(ms(p)){const A=i==="y"?[N[1],N[0]]:N;if(She(p)&&Uu(f)){const T=f.categoryGapRatio??Ahe,_=f.barGapRatio??The;d[f.id]=qe({offset:0,height:0,categoryGapRatio:T,barGapRatio:_,triggerTooltip:b},f,{data:C,scale:p,tickNumber:f.data.length,colorScale:f.colorMap&&(f.colorMap.type==="ordinal"?vf(qe({values:f.data},f.colorMap)):of(f.colorMap))})}if(Fu(f)&&(d[f.id]=qe({offset:0,height:0,triggerTooltip:b},f,{data:C,scale:p,tickNumber:f.data.length,colorScale:f.colorMap&&(f.colorMap.type==="ordinal"?vf(qe({values:f.data},f.colorMap)):of(f.colorMap))})),FT(f.data)){const T=BT(f.data,A,f.tickNumber);d[f.id].valueFormatter=f.valueFormatter??T}return}if(f.scaleType==="band"||f.scaleType==="point")return;const w=l[f.id].tickNumber,S=f,E=S.scaleType??"linear",k=_G(w,v);d[f.id]=qe({offset:0,height:0,triggerTooltip:b},S,{data:C,scaleType:E,scale:p,tickNumber:k,colorScale:S.colorMap&&CG(S.colorMap),valueFormatter:f.valueFormatter??tme(k,xN(E,N.map(A=>p.invert(A)),N))})}),{axis:d,axisIds:s.map(({id:u})=>u)}}function Ehe(e){return e!=null}function khe(e,t,a,s){const r=e?.length??0,i=Math.floor(t*r/100),o=Math.ceil(a*r/100);return function(c,d){return(c[s]??e?.[d])==null?!0:d>=i&&d<o}}function Lhe(e,t,a,s,r){const i=e[0].valueOf(),o=e[1].valueOf(),l=i+t*(o-i)/100,c=i+a*(o-i)/100;return function(u,f){const p=u[s]??r?.[f];return p==null?!0:p>=l&&p<=c}}const Phe=e=>({currentAxisId:t,seriesXAxisId:a,seriesYAxisId:s,isDefaultAxis:r})=>(i,o)=>!(t===a?s:a)||r?Object.values(e??{})[0]?.(i,o)??!0:[s,a].filter(d=>d!==t).map(d=>e[d??""]).filter(Ehe).every(d=>d(i,o)),W$=e=>(t=[])=>t.reduce((a,s)=>{const{zoom:r,id:i,reverse:o}=s,l=pL(r,i,e,o);return l&&(a[i]=l),a},{}),Dhe=.2;function LG(e,t,a){const s=t==="x"?[e.left,e.left+e.width]:[e.top+e.height,e.top];return a.reverse?[s[1],s[0]]:s}function PG(e,t){const a=[0,1];if(Uu(e)){const i=e.categoryGapRatio??Dhe;return pN(t,a).paddingInner(i).paddingOuter(i/2)}if(Fu(e))return AG(t,a);const s=e.scaleType??"linear",r=xN(s,t,a);return ame(e)&&e.constant!=null&&r.constant(e.constant),r}const DG=(e,t)=>{const a=e[1]-e[0],s=t[1]-t[0],r=e[0]-t[0]*a/s,i=e[1]+(100-t[1])*a/s;return[r,i]},Ohe=(e,t,a,s,r,i,o)=>{const l=a==="x"?s[e].xExtremumGetter:s[e].yExtremumGetter,c=i[e]?.series??{};return l?.({series:c,axis:t,axisIndex:r,isDefaultAxis:r===0,getFilters:o})??[1/0,-1/0]};function vN(e,t,a,s,r,i){const o=Object.keys(a).filter(bN);let l=[1/0,-1/0];for(const c of o){const[d,u]=Ohe(c,e,t,a,s,r,i);l=[Math.min(l[0],d),Math.max(l[1],u)]}return Number.isNaN(l[0])||Number.isNaN(l[1])?[1/0,-1/0]:l}const Mhe=(e,t,a,s)=>{if(e.domainLimit!==void 0)return e.domainLimit;if(t==="x")for(const r of s.line?.seriesOrder??[]){const i=s.line.series[r];if(i.xAxisId===e.id||i.xAxisId===void 0&&a===0)return"strict"}return"nice"};function OG(e,t,a){return xN(e??"linear",t,[0,1]).nice(a).domain()}function MG(e,t,a,s,[r,i],o,l){const c=$G(e,t,a,s,l);let d=RG(e,r,i);if(typeof c=="function"){const{min:f,max:p}=c(r.valueOf(),i.valueOf());d[0]=f,d[1]=p}const u=SG(e,d,o);return c==="nice"&&(d=OG(e.scaleType,d,u)),d=["min"in e?e.min??d[0]:d[0],"max"in e?e.max??d[1]:d[1]],{domain:d,tickNumber:u}}function IG(e,t,a,s,[r,i],o,l){const c=$G(e,t,a,s,l);let d=RG(e,r,i);if(typeof c=="function"){const{min:u,max:f}=c(r.valueOf(),i.valueOf());d[0]=u,d[1]=f}return c==="nice"&&(d=OG(e.scaleType,d,o)),[e.min??d[0],e.max??d[1]]}function $G(e,t,a,s,r){return r?Mhe(e,t,a,s):e.domainLimit??"nice"}function RG(e,t,a){let s=t,r=a;return"max"in e&&e.max!=null&&e.max<t&&(s=e.max),"min"in e&&e.min!=null&&e.min>t&&(r=e.min),!("min"in e)&&!("max"in e)?[s,r]:[e.min??s,e.max??r]}class Ihe{constructor(){this.ids=[],this.values=[],this.length=0}clear(){this.length=0}push(t,a){let s=this.length++;for(;s>0;){const r=s-1>>1,i=this.values[r];if(a>=i)break;this.ids[s]=this.ids[r],this.values[s]=i,s=r}this.ids[s]=t,this.values[s]=a}pop(){if(this.length===0)return;const t=this.ids,a=this.values,s=t[0],r=--this.length;if(r>0){const i=t[r],o=a[r];let l=0;const c=r>>1;for(;l<c;){const d=(l<<1)+1,u=d+1,f=d+(+(u<r)&+(a[u]<a[d]));if(a[f]>=o)break;t[l]=t[f],a[l]=a[f],l=f}t[l]=i,a[l]=o}return s}peek(){return this.length>0?this.ids[0]:void 0}peekValue(){return this.length>0?this.values[0]:void 0}shrink(){this.ids.length=this.values.length=this.length}}const q$=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],RS=3;class WL{static from(t,a=0){if(a%8!==0)throw new Error("byteOffset must be 8-byte aligned.");if(!t||t.byteLength===void 0||t.buffer)throw new Error("Data must be an instance of ArrayBuffer or SharedArrayBuffer.");const[s,r]=new Uint8Array(t,a+0,2);if(s!==251)throw new Error("Data does not appear to be in a Flatbush format.");const i=r>>4;if(i!==RS)throw new Error(`Got v${i} data when expected v${RS}.`);const o=q$[r&15];if(!o)throw new Error("Unrecognized array type.");const[l]=new Uint16Array(t,a+2,1),[c]=new Uint32Array(t,a+4,1);return new WL(c,l,o,void 0,t,a)}constructor(t,a=16,s=Float64Array,r=ArrayBuffer,i,o=0){if(t===void 0)throw new Error("Missing required argument: numItems.");if(isNaN(t)||t<=0)throw new Error(`Unexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+a,2),65535),this.byteOffset=o;let l=t,c=l;this._levelBounds=[l*4];do l=Math.ceil(l/this.nodeSize),c+=l,this._levelBounds.push(c*4);while(l!==1);this.ArrayType=s,this.IndexArrayType=c<16384?Uint16Array:Uint32Array;const d=q$.indexOf(s),u=c*4*s.BYTES_PER_ELEMENT;if(d<0)throw new Error(`Unexpected typed array class: ${s}.`);if(i)this.data=i,this._boxes=new s(i,o+8,c*4),this._indices=new this.IndexArrayType(i,o+8+u,c),this._pos=c*4,this.minX=this._boxes[this._pos-4],this.minY=this._boxes[this._pos-3],this.maxX=this._boxes[this._pos-2],this.maxY=this._boxes[this._pos-1];else{const f=this.data=new r(8+u+c*this.IndexArrayType.BYTES_PER_ELEMENT);this._boxes=new s(f,8,c*4),this._indices=new this.IndexArrayType(f,8+u,c),this._pos=0,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,new Uint8Array(f,0,2).set([251,(RS<<4)+d]),new Uint16Array(f,2,1)[0]=a,new Uint32Array(f,4,1)[0]=t}this._queue=new Ihe}add(t,a,s=t,r=a){const i=this._pos>>2,o=this._boxes;return this._indices[i]=i,o[this._pos++]=t,o[this._pos++]=a,o[this._pos++]=s,o[this._pos++]=r,t<this.minX&&(this.minX=t),a<this.minY&&(this.minY=a),s>this.maxX&&(this.maxX=s),r>this.maxY&&(this.maxY=r),i}finish(){if(this._pos>>2!==this.numItems)throw new Error(`Added ${this._pos>>2} items when expected ${this.numItems}.`);const t=this._boxes;if(this.numItems<=this.nodeSize){t[this._pos++]=this.minX,t[this._pos++]=this.minY,t[this._pos++]=this.maxX,t[this._pos++]=this.maxY;return}const a=this.maxX-this.minX||1,s=this.maxY-this.minY||1,r=new Uint32Array(this.numItems),i=65535;for(let o=0,l=0;o<this.numItems;o++){const c=t[l++],d=t[l++],u=t[l++],f=t[l++],p=Math.floor(i*((c+u)/2-this.minX)/a),x=Math.floor(i*((d+f)/2-this.minY)/s);r[o]=zhe(p,x)}HT(r,t,this._indices,0,this.numItems-1,this.nodeSize);for(let o=0,l=0;o<this._levelBounds.length-1;o++){const c=this._levelBounds[o];for(;l<c;){const d=l;let u=t[l++],f=t[l++],p=t[l++],x=t[l++];for(let v=1;v<this.nodeSize&&l<c;v++)u=Math.min(u,t[l++]),f=Math.min(f,t[l++]),p=Math.max(p,t[l++]),x=Math.max(x,t[l++]);this._indices[this._pos>>2]=d,t[this._pos++]=u,t[this._pos++]=f,t[this._pos++]=p,t[this._pos++]=x}}}search(t,a,s,r,i){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let o=this._boxes.length-4;const l=[],c=[];for(;o!==void 0;){const d=Math.min(o+this.nodeSize*4,V$(o,this._levelBounds));for(let u=o;u<d;u+=4){if(s<this._boxes[u]||r<this._boxes[u+1]||t>this._boxes[u+2]||a>this._boxes[u+3])continue;const f=this._indices[u>>2]|0;o>=this.numItems*4?l.push(f):(i===void 0||i(f))&&(c.push(f),c.push(this._boxes[u]),c.push(this._boxes[u+1]))}o=l.pop()}return c}neighbors(t,a,s=1/0,r=1/0,i,o=$he){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let l=this._boxes.length-4;const c=this._queue,d=[];e:for(;l!==void 0;){const u=Math.min(l+this.nodeSize*4,V$(l,this._levelBounds));for(let f=l;f<u;f+=4){const p=this._indices[f>>2]|0,x=this._boxes[f],v=this._boxes[f+1],N=this._boxes[f+2],b=this._boxes[f+3],C=t<x?x-t:t>N?t-N:0,w=a<v?v-a:a>b?a-b:0,S=o(C,w);S>r||(l>=this.numItems*4?c.push(p<<1,S):(i===void 0||i(p))&&c.push((p<<1)+1,S))}for(;c.length&&c.peek()&1;)if(c.peekValue()>r||(d.push(c.pop()>>1),d.length===s))break e;l=c.length?c.pop()>>1:void 0}return c.clear(),d}}function $he(e,t){return e*e+t*t}function V$(e,t){let a=0,s=t.length-1;for(;a<s;){const r=a+s>>1;t[r]>e?s=r:a=r+1}return t[a]}function HT(e,t,a,s,r,i){if(Math.floor(s/i)>=Math.floor(r/i))return;const o=e[s],l=e[s+r>>1],c=e[r];let d=c;const u=Math.max(o,l);c>u?d=u:u===o?d=Math.max(l,c):u===l&&(d=Math.max(o,c));let f=s-1,p=r+1;for(;;){do f++;while(e[f]<d);do p--;while(e[p]>d);if(f>=p)break;Rhe(e,t,a,f,p)}HT(e,t,a,s,p,i),HT(e,t,a,p+1,r,i)}function Rhe(e,t,a,s,r){const i=e[s];e[s]=e[r],e[r]=i;const o=4*s,l=4*r,c=t[o],d=t[o+1],u=t[o+2],f=t[o+3];t[o]=t[l],t[o+1]=t[l+1],t[o+2]=t[l+2],t[o+3]=t[l+3],t[l]=c,t[l+1]=d,t[l+2]=u,t[l+3]=f;const p=a[s];a[s]=a[r],a[r]=p}function zhe(e,t){let a=e^t,s=65535^a,r=65535^(e|t),i=e&(t^65535),o=a|s>>1,l=a>>1^a,c=r>>1^s&i>>1^r,d=a&r>>1^i>>1^i;a=o,s=l,r=c,i=d,o=a&a>>2^s&s>>2,l=a&s>>2^s&(a^s)>>2,c^=a&r>>2^s&i>>2,d^=s&r>>2^(a^s)&i>>2,a=o,s=l,r=c,i=d,o=a&a>>4^s&s>>4,l=a&s>>4^s&(a^s)>>4,c^=a&r>>4^s&i>>4,d^=s&r>>4^(a^s)&i>>4,a=o,s=l,r=c,i=d,c^=a&r>>8^s&i>>8,d^=s&r>>8^(a^s)&i>>8,a=c^c>>1,s=d^d>>1;let u=e^t,f=s|65535^(u|a);return u=(u|u<<8)&16711935,u=(u|u<<4)&252645135,u=(u|u<<2)&858993459,u=(u|u<<1)&1431655765,f=(f|f<<8)&16711935,f=(f|f<<4)&252645135,f=(f|f<<2)&858993459,f=(f|f<<1)&1431655765,(f<<1|u)>>>0}const Uhe=e=>{const t=new Map;return e.forEach(a=>{t.set(a.axisId,a)}),t},zG=e=>e.zoom,Fhe=wt(Io,Wl,(e,t)=>e?.some(a=>!!a.zoom)||t?.some(a=>!!a.zoom)||!1),UG=wt(zG,e=>e?.isInteracting),hd=Aa(zG,function(t){return t?.zoomData&&Uhe(t?.zoomData)}),Y$=wt(hd,(e,t)=>e?.get(t)),fx=Aa(Io,Wl,function(t,a){return qe({},W$("x")(t),W$("y")(a))});wt(fx,(e,t)=>e[t]);const Bhe=wt(cr,function(t){return GL(t.width)}),Hhe=wt(cr,function(t){return GL(t.height)}),qL=Aa(Io,da,$r,rN,Bhe,function(t,a,s,r,i){const l={};return t?.forEach((c,d)=>{const u=c;if(Uu(u)||Fu(u)){l[u.id]={domain:u.data};return}const f=vN(u,"x",s,d,a);l[u.id]=MG(u,"x",d,a,f,i,r)}),{axes:t,domains:l}}),VL=Aa(Wl,da,$r,rN,Hhe,function(t,a,s,r,i){const l={};return t?.forEach((c,d)=>{const u=c;if(Uu(u)||Fu(u)){l[u.id]={domain:u.data};return}const f=vN(u,"y",s,d,a);l[u.id]=MG(u,"y",d,a,f,i,r)}),{axes:t,domains:l}}),FG=Aa(hd,fx,qL,VL,function(t,a,{axes:s,domains:r},{axes:i,domains:o}){if(!t||!a)return;let l=!1;const c={},d=[...s??[],...i??[]];for(let u=0;u<d.length;u+=1){const f=d[u];if(!a[f.id]||a[f.id].filterMode!=="discard")continue;const p=t.get(f.id);if(p===void 0||p.start<=0&&p.end>=100)continue;const x=u<(s?.length??0)?"x":"y";if(f.scaleType==="band"||f.scaleType==="point")c[f.id]=khe(f.data,p.start,p.end,x);else{const{domain:v}=x==="x"?r[f.id]:o[f.id];c[f.id]=Lhe(v,p.start,p.end,x,f.data)}l=!0}if(l)return Phe(c)}),Ghe=Aa(da,$r,hd,fx,FG,rN,qL,function(t,a,s,r,i,o,{axes:l,domains:c}){const d={};return l?.forEach((u,f)=>{const p=c[u.id].domain;if(Uu(u)||Fu(u)){d[u.id]=p;return}const x=s?.get(u.id),v=r?.[u.id],N=x===void 0&&!v?i:void 0;if(!N){d[u.id]=p;return}const b=c[u.id].tickNumber,C=vN(u,"x",a,f,t,N);d[u.id]=IG(u,"x",f,t,C,b,o)}),d}),Whe=Aa(da,$r,hd,fx,FG,rN,VL,function(t,a,s,r,i,o,{axes:l,domains:c}){const d={};return l?.forEach((u,f)=>{const p=c[u.id].domain;if(Uu(u)||Fu(u)){d[u.id]=p;return}const x=s?.get(u.id),v=r?.[u.id],N=x===void 0&&!v?i:void 0;if(!N){d[u.id]=p;return}const b=c[u.id].tickNumber,C=vN(u,"y",a,f,t,N);d[u.id]=IG(u,"y",f,t,C,b,o)}),d}),BG=Aa(Io,Ghe,function(t,a){const s={};return t?.forEach(r=>{const i=r,o=a[i.id];s[i.id]=PG(i,o)}),s}),HG=Aa(Wl,Whe,function(t,a){const s={};return t?.forEach(r=>{const i=r,o=a[i.id];s[i.id]=PG(i,o)}),s}),qhe=Aa(Io,BG,cr,hd,function(t,a,s,r){const i={};return t?.forEach(o=>{const l=o,c=r?.get(l.id),d=c?[c.start,c.end]:[0,100],u=LG(s,"x",l),f=a[l.id].copy(),p=DG(u,d);f.range(p),i[l.id]=f}),i}),Vhe=Aa(Wl,HG,cr,hd,function(t,a,s,r){const i={};return t?.forEach(o=>{const l=o,c=r?.get(l.id),d=c?[c.start,c.end]:[0,100],u=LG(s,"y",l),f=a[l.id].copy(),p=ms(f)?u.reverse():u,x=DG(p,d);f.range(x),i[l.id]=f}),i}),Hs=Aa(cr,da,$r,hd,qL,qhe,function(t,a,s,r,{axes:i,domains:o},l){return kG({scales:l,drawingArea:t,formattedSeries:a,axis:i,seriesConfig:s,axisDirection:"x",zoomMap:r,domains:o})}),Gs=Aa(cr,da,$r,hd,VL,Vhe,function(t,a,s,r,{axes:i,domains:o},l){return kG({scales:l,drawingArea:t,formattedSeries:a,axis:i,seriesConfig:s,axisDirection:"y",zoomMap:r,domains:o})});wt(Hs,Gs,(e,t,a)=>e?.axis[a]??t?.axis[a]);wt(Io,Wl,(e,t,a)=>{const s=e?.find(r=>r.id===a)??t?.find(r=>r.id===a)??null;if(s)return s});const Yhe=wt(Io,e=>e[0].id),Qhe=wt(Wl,e=>e[0].id),Khe=new Map,Xhe=()=>Khe,Zhe=Aa(da,BG,HG,Yhe,Qhe,function(t,a,s,r,i){const o=t.scatter,l=new Map;return o&&o.seriesOrder.forEach(c=>{const{data:d,xAxisId:u=r,yAxisId:f=i}=o.series[c],p=new WL(d.length),x=a[u],v=s[f];for(const N of d)p.add(x(N.x),v(N.y));p.finish(),l.set(c,p)}),l});function Rm(e){return e instanceof Date?e.getTime():e}function wf(e,t){const{scale:a,data:s,reverse:r}=e;if(!ms(a)){const o=a.invert(t);if(s===void 0)return-1;const l=Rm(o);return s?.findIndex((d,u)=>{const f=Rm(d);return f>l&&(u===0||Math.abs(l-f)<=Math.abs(l-Rm(s[u-1])))||f<=l&&(u===s.length-1||Math.abs(Rm(o)-f)<Math.abs(Rm(o)-Rm(s[u+1])))})}const i=a.bandwidth()===0?Math.floor((t-Math.min(...a.range())+a.step()/2)/a.step()):Math.floor((t-Math.min(...a.range()))/a.step());return i<0||i>=s.length?-1:r?s.length-1-i:i}function Q$(e,t,a,s){if(!ms(e)){if(s===null){const r=e.invert(a);return Number.isNaN(r)?null:r}return t[s]}return s===null||s<0||s>=t.length?null:t[s]}function hp(e,t){const a=e.createSVGPoint();return a.x=t.clientX,a.y=t.clientY,a.matrixTransform(e.getScreenCTM().inverse())}const Jhe=Object.is;function GG(e,t){if(e===t)return!0;if(!(e instanceof Object)||!(t instanceof Object))return!1;let a=0,s=0;for(const r in e)if(a+=1,!Jhe(e[r],t[r])||!(r in t))return!1;for(const r in t)s+=1;return a===s}const hx=({store:e})=>{const t=ls(function(){e.set("interaction",qe({},e.state.interaction,{pointer:null,item:null}))}),a=ls(function(o){const l=e.state.interaction.item;if(!o){l!==null&&e.set("interaction",qe({},e.state.interaction,{item:null}));return}l===null||Object.keys(o).some(c=>o[c]!==l[c])||e.set("interaction",qe({},e.state.interaction,{item:null}))}),s=ls(function(o,l){GG(e.state.interaction.item,o)||e.set("interaction",qe({},e.state.interaction,{lastUpdate:l.interaction,item:o}))}),r=ls(function(o){e.set("interaction",qe({},e.state.interaction,{pointer:o,lastUpdate:o!==null?"pointer":e.state.interaction.lastUpdate}))});return{instance:{cleanInteraction:t,setItemInteraction:s,removeItemInteraction:a,setPointerCoordinate:r}}};hx.getInitialState=()=>({interaction:{item:null,pointer:null,lastUpdate:"pointer"}});hx.params={};const wN=e=>e.interaction,ege=wt(wN,e=>e!==void 0),WG=wt(wN,e=>e?.item??null),qG=wt(wN,e=>e?.pointer??null),gx=wt(qG,e=>e&&e.x),px=wt(qG,e=>e&&e.y),tge=wt(WG,e=>e!==null),xx=wt(wN,e=>e?.lastUpdate),nge=new Set(["bar","line","scatter","pie"]);function VG(e){return nge.has(e)}function YG(e,t,a){const s=Object.keys(e),r=t!==void 0&&e[t]?s.indexOf(t):0,i=t!==void 0&&a!==void 0&&e[t]&&e[t].series[a]?e[t].seriesOrder.indexOf(a):-1,o=s.filter(VG);for(let u=0;u<o.length;u+=1){const f=(r+u)%o.length,p=e[o[f]],x=u===0?i+1:0;for(let v=x;v<p.seriesOrder.length;v+=1)if(p.series[p.seriesOrder[v]].data.length>0)return{type:o[f],seriesId:p.seriesOrder[v]}}const l=r,c=e[o[l]],d=i;for(let u=0;u<d;u+=1)if(c.series[c.seriesOrder[u]].data.length>0)return{type:o[l],seriesId:c.seriesOrder[u]};return null}function QG(e,t,a){const s=Object.keys(e),r=t!==void 0&&e[t]?s.indexOf(t):0,i=t!==void 0&&a!==void 0&&e[t]&&e[t].series[a]?e[t].seriesOrder.indexOf(a):1,o=s.filter(VG);for(let u=0;u<o.length;u+=1){const f=(o.length+r-u)%o.length,p=e[o[f]],x=u===0?i+1:p.seriesOrder.length;for(let v=1;v<x;v+=1){const N=(p.seriesOrder.length+i-v)%p.seriesOrder.length;if(p.series[p.seriesOrder[N]].data.length>0)return{type:o[f],seriesId:p.seriesOrder[N]}}}const l=r,c=e[o[l]],d=c.seriesOrder;for(let u=d.length-1;u>i;u-=1)if(c.series[c.seriesOrder[u]].data.length>0)return{type:o[l],seriesId:c.seriesOrder[u]};return null}function KG(e,t,a){if(t==="sankey")return!1;const s=e[t]?.series[a]?.data;return s&&s.length>0}function age(e){const t=da(e);let{type:a,seriesId:s}=e.keyboardNavigation.item??{};if(a===void 0||a==="sankey"||s===void 0||!KG(t,a,s)){const i=YG(t,a,s);if(i===null)return null;a=i.type,s=i.seriesId}const r=t[a].series[s].data.length;return{type:a,seriesId:s,dataIndex:((e.keyboardNavigation.item?.dataIndex??-1)+1)%r}}function sge(e){const t=da(e);let{type:a,seriesId:s}=e.keyboardNavigation.item??{};if(a===void 0||a==="sankey"||s===void 0||!KG(t,a,s)){const i=QG(t,a,s);if(i===null)return null;a=i.type,s=i.seriesId}const r=t[a].series[s].data.length;return{type:a,seriesId:s,dataIndex:(r+(e.keyboardNavigation.item?.dataIndex??1)-1)%r}}function rge(e){const t=da(e);let{type:a,seriesId:s}=e.keyboardNavigation.item??{};const r=YG(t,a,s);if(r===null)return null;a=r.type,s=r.seriesId;const i=t[a].series[s].data.length;return{type:a,seriesId:s,dataIndex:Math.min(i-1,e.keyboardNavigation.item?.dataIndex??0)}}function ige(e){const t=da(e);let{type:a,seriesId:s}=e.keyboardNavigation.item??{};const r=QG(t,a,s);if(r===null)return null;a=r.type,s=r.seriesId;const i=t[a].series[s].data.length;return{type:a,seriesId:s,dataIndex:Math.min(i-1,e.keyboardNavigation.item?.dataIndex??0)}}const NN=({params:e,store:t,svgRef:a})=>{const s=ls(function(){t.state.keyboardNavigation.item!==null&&t.set("keyboardNavigation",qe({},t.state.keyboardNavigation,{item:null}))});return h.useEffect(()=>{const r=a.current;if(!r||!e.enableKeyboardNavigation)return;function i(o){let l=t.state.keyboardNavigation.item;switch(o.key){case"ArrowRight":l=age(t.state);break;case"ArrowLeft":l=sge(t.state);break;case"ArrowDown":{l=ige(t.state);break}case"ArrowUp":{l=rge(t.state);break}}l!==t.state.keyboardNavigation.item&&(o.preventDefault(),t.update(qe({},t.state.highlight&&{highlight:qe({},t.state.highlight,{lastUpdate:"keyboard"})},t.state.interaction&&{interaction:qe({},t.state.interaction,{lastUpdate:"keyboard"})},{keyboardNavigation:qe({},t.state.keyboardNavigation,{item:l})})))}return r.addEventListener("keydown",i),r.addEventListener("blur",s),()=>{r.removeEventListener("keydown",i),r.removeEventListener("blur",s)}},[a,s,e.enableKeyboardNavigation,t]),Xa(()=>{t.state.keyboardNavigation.enableKeyboardNavigation!==e.enableKeyboardNavigation&&t.set("keyboardNavigation",qe({},t.state.keyboardNavigation,{enableKeyboardNavigation:!!e.enableKeyboardNavigation}))},[t,e.enableKeyboardNavigation]),{}};NN.getInitialState=e=>({keyboardNavigation:{item:null,enableKeyboardNavigation:!!e.enableKeyboardNavigation}});NN.params={enableKeyboardNavigation:!0};const Gu=e=>e.keyboardNavigation;wt(Gu,(e,t)=>e?.item!=null&&e.item.type===t.seriesType&&e.item.seriesId===t.seriesId&&e.item.dataIndex===t.dataIndex);const oge=wt(Gu,e=>e?.item!=null),jN=wt(Gu,e=>e?.item?.type),CN=wt(Gu,e=>e?.item?.seriesId),SN=wt(Gu,e=>e?.item?.dataIndex),lge=wt(Gu,e=>!!e?.enableKeyboardNavigation),XG=e=>(t,a,s,r,i)=>{if(t===void 0||a===void 0||s===void 0)return;const o=i[t]?.series[a];if(!o)return;let l=e==="x"?"xAxisId"in o&&o.xAxisId:"yAxisId"in o&&o.yAxisId;return(l===void 0||l===!1)&&(l=r.axisIds[0]),{axisId:l,dataIndex:s}},cge=wt(jN,CN,SN,Hs,da,XG("x")),dge=wt(jN,CN,SN,Gs,da,XG("y")),ZG=wt(Gu,function(t){if(t?.item==null)return null;const{type:a,seriesId:s}=t.item;return a===void 0||s===void 0?null:t.item}),uge=wt(jN,CN,SN,function(t,a,s){return a!==void 0&&s!==void 0}),JG=wt(xx,WG,ZG,(e,t,a)=>e==="keyboard"?a:t??null),mge=wt(xx,tge,uge,(e,t,a)=>e==="keyboard"?a:t),fge=wt(JG,cr,$r,Hs,Gs,da,function(t,a,s,{axis:r,axisIds:i},{axis:o,axisIds:l},c,d="top"){if(!t)return null;const u=c[t.type]?.series[t.seriesId];if(u){const f={},p=uv(u)?u.xAxisId??i[0]:void 0,x=uv(u)?u.yAxisId??l[0]:void 0;return p!==void 0&&(f.x=r[p]),x!==void 0&&(f.y=o[x]),s[u.type].tooltipItemPositionGetter?.({series:c,drawingArea:a,axesConfig:f,identifier:t,placement:d})??null}return null});function lf(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;if(Array.isArray(e)){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;i+=1)if(!lf(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;const r=Array.from(e.entries());for(let i=0;i<r.length;i+=1)if(!t.has(r[i][0]))return!1;for(let i=0;i<r.length;i+=1){const o=r[i];if(!lf(o[1],t.get(o[0])))return!1}return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;const r=Array.from(e.entries());for(let i=0;i<r.length;i+=1)if(!t.has(r[i][0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;i+=1)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();const a=Object.keys(e),s=a.length;if(s!==Object.keys(t).length)return!1;for(let r=0;r<s;r+=1)if(!Object.prototype.hasOwnProperty.call(t,a[r]))return!1;for(let r=0;r<s;r+=1){const i=a[r];if(!lf(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function GT(e,t,a=t.axisIds[0]){return Array.isArray(a)?a.map(s=>wf(t.axis[s],e)):wf(t.axis[a],e)}const eW=(e,t,a)=>{if(e===null)return null;const s=GT(e,t,a);return s===-1?null:s},YL=wt(gx,Hs,eW),QL=wt(px,Gs,eW),hge=wt(gx,px,Hs,Gs,(e,t,a,s)=>[...e===null?[]:a.axisIds.map(r=>({axisId:r,dataIndex:GT(e,a,r)})),...t===null?[]:s.axisIds.map(r=>({axisId:r,dataIndex:GT(t,s,r)}))].filter(r=>r.dataIndex!==null&&r.dataIndex>=0));function tW(e,t,a,s=t.axisIds[0]){return Array.isArray(s)?s.map((r,i)=>{const o=t.axis[r];return Q$(o.scale,o.data,e,a[i])}):Q$(t.axis[s].scale,t.axis[s].data,e,a)}const gge=wt(gx,Hs,YL,(e,t,a,s)=>e===null||t.axisIds.length===0?null:tW(e,t,a,s)),pge=wt(px,Gs,QL,(e,t,a,s)=>e===null||t.axisIds.length===0?null:tW(e,t,a,s)),nW=[],aW=eN({memoizeOptions:{resultEqualityCheck:lf}})(gx,Hs,(e,t)=>e===null?nW:t.axisIds.filter(a=>t.axis[a].triggerTooltip).map(a=>({axisId:a,dataIndex:wf(t.axis[a],e)})).filter(({dataIndex:a})=>a>=0)),sW=eN({memoizeOptions:{resultEqualityCheck:lf}})(px,Gs,(e,t)=>e===null?nW:t.axisIds.filter(a=>t.axis[a].triggerTooltip).map(a=>({axisId:a,dataIndex:wf(t.axis[a],e)})).filter(({dataIndex:a})=>a>=0)),xge=wt(aW,sW,(e,t)=>e.length>0||t.length>0);function yge(e){return e.setPointerCoordinate!==void 0}const Hf=({params:e,store:t,seriesConfig:a,svgRef:s,instance:r})=>{const{xAxis:i,yAxis:o,dataset:l,onHighlightedAxisChange:c}=e,d=Rt(t,cr),u=Rt(t,da),f=Rt(t,ege),{axis:p,axisIds:x}=Rt(t,Hs),{axis:v,axisIds:N}=Rt(t,Gs);F9({controlled:e.highlightedAxis}),Xa(()=>{e.highlightedAxis!==void 0&&t.set("controlledCartesianAxisHighlight",e.highlightedAxis)},[t,e.highlightedAxis]);const b=h.useRef(!0);h.useEffect(()=>{if(b.current){b.current=!1;return}t.set("cartesianAxis",{x:G9(i,l),y:W9(o,l)})},[a,d,i,o,l,t]);const C=x[0],w=N[0];oue(t,hge,(E,k)=>{if(c&&!Object.is(E,k)){if(E.length!==k.length){c(k);return}E?.some(({axisId:A,dataIndex:T},_)=>k[_].axisId!==A||k[_].dataIndex!==T)&&c(k)}});const S=yge(r);return h.useEffect(()=>{const E=s.current;if(!f||!S||!E||e.disableAxisListener)return()=>{};const k=r.addInteractionListener("moveEnd",D=>{D.detail.activeGestures.pan||r.cleanInteraction()}),A=r.addInteractionListener("panEnd",D=>{D.detail.activeGestures.move||r.cleanInteraction()}),T=r.addInteractionListener("quickPressEnd",D=>{!D.detail.activeGestures.move&&!D.detail.activeGestures.pan&&r.cleanInteraction()}),_=D=>{const M=D.detail.srcEvent,W=D.detail.target,X=hp(E,M);if(D.detail.srcEvent.buttons>=1&&W?.hasPointerCapture(D.detail.srcEvent.pointerId)&&!W?.closest("[data-charts-zoom-slider]")&&W?.releasePointerCapture(D.detail.srcEvent.pointerId),!r.isPointInside(X.x,X.y,W)){r.cleanInteraction?.();return}r.setPointerCoordinate(X)},I=r.addInteractionListener("move",_),R=r.addInteractionListener("pan",_),U=r.addInteractionListener("quickPress",_);return()=>{I.cleanup(),k.cleanup(),R.cleanup(),A.cleanup(),U.cleanup(),T.cleanup()}},[s,t,p,C,v,w,r,e.disableAxisListener,f,S]),h.useEffect(()=>{const E=s.current,k=e.onAxisClick;if(E===null||!k)return()=>{};const A=r.addInteractionListener("tap",T=>{let _=null,I=!1;const R=hp(E,T.detail.srcEvent),U=wf(p[C],R.x);I=U!==-1,_=I?U:wf(v[w],R.y);const D=I?x[0]:N[0];if(_==null||_===-1)return;const M=(I?p:v)[D].data[_],W={};Object.keys(u).filter(X=>["bar","line"].includes(X)).forEach(X=>{u[X]?.seriesOrder.forEach(z=>{const Q=u[X].series[z],de=Q.xAxisId,Y=Q.yAxisId,se=I?de:Y;(se===void 0||se===D)&&(W[z]=Q.data[_])})}),k(T.detail.srcEvent,{dataIndex:_,axisValue:M,seriesValues:W})});return()=>{A.cleanup()}},[e.onAxisClick,u,s,p,x,v,N,C,w,r]),{}};Hf.params={xAxis:!0,yAxis:!0,dataset:!0,onAxisClick:!0,disableAxisListener:!0,onHighlightedAxisChange:!0,highlightedAxis:!0};Hf.getDefaultizedParams=({params:e})=>qe({},e,{colors:e.colors??$9,theme:e.theme??"light",defaultizedXAxis:G9(e.xAxis,e.dataset),defaultizedYAxis:W9(e.yAxis,e.dataset)});Hf.getInitialState=e=>qe({cartesianAxis:{x:e.defaultizedXAxis,y:e.defaultizedYAxis}},e.highlightedAxis===void 0?{}:{controlledCartesianAxisHighlight:e.highlightedAxis});const $o=e=>e.brush;wt($o,e=>e?.start);wt($o,e=>e?.current);const bge=wt($o,e=>e?.start?.x??null),vge=wt($o,e=>e?.start?.y??null),wge=wt($o,e=>e?.current?.x??null),Nge=wt($o,e=>e?.current?.y??null);wt(bge,vge,wge,Nge,(e,t,a,s)=>e===null||t===null||a===null||s===null?null:{start:{x:e,y:t},current:{x:a,y:s}});const jge=wt(da,e=>{let t=!1,a=!1;return e&&Object.entries(e).forEach(([s,r])=>{Object.values(r.series).some(i=>i.layout==="horizontal")&&(t=!0),s==="scatter"&&r.seriesOrder.length>0&&(a=!0)}),a?"xy":t?"y":"x"}),Cge=wt(fx,function(t){let a=!1,s=!1;return Object.values(t).forEach(r=>{r.axisDirection==="y"&&(s=!0),r.axisDirection==="x"&&(a=!0)}),a&&s?"xy":s?"y":a?"x":null});wt(jge,Cge,(e,t)=>t??e);const rW=wt($o,e=>e?.enabled||e?.isZoomBrushEnabled),iW=wt(rW,$o,(e,t)=>e&&t?.start!==null&&t?.current!==null),_N=wt($o,iW,(e,t)=>t&&e?.preventHighlight),Sge=wt($o,iW,(e,t)=>t&&e?.preventTooltip),yx=({store:e,svgRef:t,instance:a,params:s})=>{const r=Rt(e,rW);Xa(()=>{e.set("brush",qe({},e.state.brush,{enabled:s.brushConfig.enabled,preventTooltip:s.brushConfig.preventTooltip,preventHighlight:s.brushConfig.preventHighlight}))},[e,s.brushConfig.enabled,s.brushConfig.preventTooltip,s.brushConfig.preventHighlight]);const i=ls(function(d){e.set("brush",qe({},e.state.brush,{start:e.state.brush.start??d,current:d}))}),o=ls(function(){e.set("brush",qe({},e.state.brush,{start:null,current:null}))}),l=ls(function(d){e.state.brush.isZoomBrushEnabled!==d&&e.set("brush",qe({},e.state.brush,{isZoomBrushEnabled:d}))});return h.useEffect(()=>{const c=t.current;if(c===null||!r)return()=>{};const d=N=>{if(N.detail.target?.closest("[data-charts-zoom-slider]"))return;const b=hp(c,{clientX:N.detail.initialCentroid.x,clientY:N.detail.initialCentroid.y});i(b)},u=N=>{const b=hp(c,{clientX:N.detail.centroid.x,clientY:N.detail.centroid.y});i(b)},f=a.addInteractionListener("brushStart",d),p=a.addInteractionListener("brush",u),x=a.addInteractionListener("brushCancel",o),v=a.addInteractionListener("brushEnd",o);return()=>{f.cleanup(),p.cleanup(),v.cleanup(),x.cleanup()}},[t,a,e,o,i,r]),{instance:{setBrushCoordinates:i,clearBrush:o,setZoomBrushEnabled:l}}};yx.params={brushConfig:!0};yx.getDefaultizedParams=({params:e})=>qe({},e,{brushConfig:{enabled:e?.brushConfig?.enabled??!1,preventTooltip:e?.brushConfig?.preventTooltip??!0,preventHighlight:e?.brushConfig?.preventHighlight??!0}});yx.getInitialState=e=>({brush:{enabled:e.brushConfig.enabled,isZoomBrushEnabled:!1,preventTooltip:e.brushConfig.preventTooltip,preventHighlight:e.brushConfig.preventHighlight,start:null,current:null}});const Gf=e=>e.controlledCartesianAxisHighlight,oW=(e,t,a,s)=>s?[]:a!==void 0?a.filter(r=>t.axis[r.axisId]!==void 0).map(r=>r):e===null?[]:[{axisId:t.axisIds[0],dataIndex:e}],lW=Aa(YL,Hs,Gf,_N,oW);Aa(QL,Gs,Gf,_N,oW);const cW=(e,t,a,s,r,i,o)=>{if(o)return[];if(s!==void 0)return s.map(u=>qe({},u,{value:a.axis[u.axisId]?.data?.[u.dataIndex]})).filter(({value:u})=>u!==void 0);const l=t!==null&&{axisId:a.axisIds[0],dataIndex:e,value:t},c=r&&a.axis[r.axisId]?.data?.[r.dataIndex],d=r&&c!=null&&qe({},r,{value:c});if(i==="pointer"){if(l)return[l];if(d)return[d]}if(i==="keyboard"){if(d)return[d];if(l)return[l]}return[]},_ge=wt(YL,gge,Hs,Gf,cge,xx,_N,cW),Age=wt(QL,pge,Gs,Gf,dge,xx,_N,cW),dW=(e,t)=>e===void 0?[t.axis[t.axisIds[0]]]:e.map(s=>t.axis[s.axisId]??null).filter(s=>s!==null);wt(Gf,Hs,dW);wt(Gf,Gs,dW);function K$(e,t){return e.id!==void 0?e:qe({id:t},e)}function X$(e){return e.colorMap?qe({},e,{colorScale:e.colorMap.type==="ordinal"&&e.data?vf(qe({values:e.data},e.colorMap)):of(e.colorMap.type==="continuous"?qe({min:e.min,max:e.max},e.colorMap):e.colorMap)}):e}function uW(e,t){if(!e||e.length===0)return{axis:{},axisIds:[]};const a={},s=[];return e.forEach((r,i)=>{const o=r.dataKey,l=r.id??`defaultized-z-axis-${i}`;if(o===void 0||r.data!==void 0){a[l]=X$(K$(r,l)),s.push(l);return}if(t===void 0)throw new Error("MUI X Charts: z-axis uses `dataKey` but no `dataset` is provided.");a[l]=X$(K$(qe({},r,{data:t.map(c=>c[o])}),l)),s.push(l)}),{axis:a,axisIds:s}}const bx=({params:e,store:t})=>{const{zAxis:a,dataset:s}=e,r=h.useRef(!0);return h.useEffect(()=>{if(r.current){r.current=!1;return}t.set("zAxis",uW(a,s))},[a,s,t]),{}};bx.params={zAxis:!0,dataset:!0};bx.getInitialState=e=>({zAxis:uW(e.zAxis,e.dataset)});const Tge=e=>e,Ege=wt(Tge,e=>e.zAxis),vx=({store:e,params:t})=>{F9({controlled:t.highlightedItem}),Xa(()=>{e.state.highlight.item!==t.highlightedItem&&e.set("highlight",qe({},e.state.highlight,{item:t.highlightedItem}))},[e,t.highlightedItem]);const a=ls(()=>{t.onHighlightChange?.(null);const r=e.getSnapshot().highlight;r.item===null||r.isControlled||e.set("highlight",{item:null,lastUpdate:"pointer",isControlled:!1})}),s=ls(r=>{const i=e.getSnapshot().highlight;i.isControlled||GG(i.item,r)||(t.onHighlightChange?.(r),e.set("highlight",{item:r,lastUpdate:"pointer",isControlled:!1}))});return{instance:{clearHighlight:a,setHighlight:s}}};vx.getInitialState=e=>({highlight:{item:e.highlightedItem,lastUpdate:"pointer",isControlled:e.highlightedItem!==void 0}});vx.params={highlightedItem:!0,onHighlightChange:!0};function mv(e){let t=1/0,a=-1/0;for(const s of e??[])s<t&&(t=s),s>a&&(a=s);return[t,a]}const Z$=(e,t)=>t==="x"?{x:e,y:null}:{x:null,y:e},mW=e=>{const{axis:t,getFilters:a,isDefaultAxis:s}=e,r=a?.({currentAxisId:t.id,isDefaultAxis:s}),i=r?t.data?.filter((o,l)=>r({x:null,y:null},l)):t.data;return mv(i??[])},fW=e=>t=>{const{series:a,axis:s,getFilters:r,isDefaultAxis:i}=t;return Object.keys(a).filter(o=>{const l=e==="x"?a[o].xAxisId:a[o].yAxisId;return l===s.id||i&&l===void 0}).reduce((o,l)=>{const{stackedData:c}=a[l],d=r?.({currentAxisId:s.id,isDefaultAxis:i,seriesXAxisId:a[l].xAxisId,seriesYAxisId:a[l].yAxisId}),[u,f]=c?.reduce((p,x,v)=>d&&(!d(Z$(x[0],e),v)||!d(Z$(x[1],e),v))?p:[Math.min(...x,p[0]),Math.max(...x,p[1])],[1/0,-1/0])??[1/0,-1/0];return[Math.min(u,o[0]),Math.max(f,o[1])]},[1/0,-1/0])},kge=e=>Object.keys(e.series).some(a=>e.series[a].layout==="horizontal")?fW("x")(e):mW(e),Lge=e=>Object.keys(e.series).some(a=>e.series[a].layout==="horizontal")?mW(e):fW("y")(e);function gn(e){return function(){return e}}const hW=Math.cos,fv=Math.sin,Wi=Math.sqrt,J$=1e-12,hv=Math.PI,uu=2*hv,WT=Math.PI,qT=2*WT,Hd=1e-6,Pge=qT-Hd;function gW(e){this._+=e[0];for(let t=1,a=e.length;t<a;++t)this._+=arguments[t]+e[t]}function Dge(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return gW;const a=10**t;return function(s){this._+=s[0];for(let r=1,i=s.length;r<i;++r)this._+=Math.round(arguments[r]*a)/a+s[r]}}class Oge{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?gW:Dge(t)}moveTo(t,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+a}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,a){this._append`L${this._x1=+t},${this._y1=+a}`}quadraticCurveTo(t,a,s,r){this._append`Q${+t},${+a},${this._x1=+s},${this._y1=+r}`}bezierCurveTo(t,a,s,r,i,o){this._append`C${+t},${+a},${+s},${+r},${this._x1=+i},${this._y1=+o}`}arcTo(t,a,s,r,i){if(t=+t,a=+a,s=+s,r=+r,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=s-t,d=r-a,u=o-t,f=l-a,p=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=a}`;else if(p>Hd)if(!(Math.abs(f*c-d*u)>Hd)||!i)this._append`L${this._x1=t},${this._y1=a}`;else{let x=s-o,v=r-l,N=c*c+d*d,b=x*x+v*v,C=Math.sqrt(N),w=Math.sqrt(p),S=i*Math.tan((WT-Math.acos((N+p-b)/(2*C*w)))/2),E=S/w,k=S/C;Math.abs(E-1)>Hd&&this._append`L${t+E*u},${a+E*f}`,this._append`A${i},${i},0,0,${+(f*x>u*v)},${this._x1=t+k*c},${this._y1=a+k*d}`}}arc(t,a,s,r,i,o){if(t=+t,a=+a,s=+s,o=!!o,s<0)throw new Error(`negative radius: ${s}`);let l=s*Math.cos(r),c=s*Math.sin(r),d=t+l,u=a+c,f=1^o,p=o?r-i:i-r;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>Hd||Math.abs(this._y1-u)>Hd)&&this._append`L${d},${u}`,s&&(p<0&&(p=p%qT+qT),p>Pge?this._append`A${s},${s},0,1,${f},${t-l},${a-c}A${s},${s},0,1,${f},${this._x1=d},${this._y1=u}`:p>Hd&&this._append`A${s},${s},0,${+(p>=WT)},${f},${this._x1=t+s*Math.cos(i)},${this._y1=a+s*Math.sin(i)}`)}rect(t,a,s,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+a}h${s=+s}v${+r}h${-s}Z`}toString(){return this._}}function KL(e){let t=3;return e.digits=function(a){if(!arguments.length)return t;if(a==null)t=null;else{const s=Math.floor(a);if(!(s>=0))throw new RangeError(`invalid digits: ${a}`);t=s}return e},()=>new Oge(t)}function AN(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function pW(e){this._context=e}pW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function wx(e){return new pW(e)}function xW(e){return e[0]}function yW(e){return e[1]}function XL(e,t){var a=gn(!0),s=null,r=wx,i=null,o=KL(l);e=typeof e=="function"?e:e===void 0?xW:gn(e),t=typeof t=="function"?t:t===void 0?yW:gn(t);function l(c){var d,u=(c=AN(c)).length,f,p=!1,x;for(s==null&&(i=r(x=o())),d=0;d<=u;++d)!(d<u&&a(f=c[d],d,c))===p&&((p=!p)?i.lineStart():i.lineEnd()),p&&i.point(+e(f,d,c),+t(f,d,c));if(x)return i=null,x+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:gn(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:gn(+c),l):t},l.defined=function(c){return arguments.length?(a=typeof c=="function"?c:gn(!!c),l):a},l.curve=function(c){return arguments.length?(r=c,s!=null&&(i=r(s)),l):r},l.context=function(c){return arguments.length?(c==null?s=i=null:i=r(s=c),l):s},l}function Eg(e,t,a){var s=null,r=gn(!0),i=null,o=wx,l=null,c=KL(d);e=typeof e=="function"?e:e===void 0?xW:gn(+e),t=typeof t=="function"?t:gn(t===void 0?0:+t),a=typeof a=="function"?a:a===void 0?yW:gn(+a);function d(f){var p,x,v,N=(f=AN(f)).length,b,C=!1,w,S=new Array(N),E=new Array(N);for(i==null&&(l=o(w=c())),p=0;p<=N;++p){if(!(p<N&&r(b=f[p],p,f))===C)if(C=!C)x=p,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=p-1;v>=x;--v)l.point(S[v],E[v]);l.lineEnd(),l.areaEnd()}C&&(S[p]=+e(b,p,f),E[p]=+t(b,p,f),l.point(s?+s(b,p,f):S[p],a?+a(b,p,f):E[p]))}if(w)return l=null,w+""||null}function u(){return XL().defined(r).curve(o).context(i)}return d.x=function(f){return arguments.length?(e=typeof f=="function"?f:gn(+f),s=null,d):e},d.x0=function(f){return arguments.length?(e=typeof f=="function"?f:gn(+f),d):e},d.x1=function(f){return arguments.length?(s=f==null?null:typeof f=="function"?f:gn(+f),d):s},d.y=function(f){return arguments.length?(t=typeof f=="function"?f:gn(+f),a=null,d):t},d.y0=function(f){return arguments.length?(t=typeof f=="function"?f:gn(+f),d):t},d.y1=function(f){return arguments.length?(a=f==null?null:typeof f=="function"?f:gn(+f),d):a},d.lineX0=d.lineY0=function(){return u().x(e).y(t)},d.lineY1=function(){return u().x(e).y(a)},d.lineX1=function(){return u().x(s).y(t)},d.defined=function(f){return arguments.length?(r=typeof f=="function"?f:gn(!!f),d):r},d.curve=function(f){return arguments.length?(o=f,i!=null&&(l=o(i)),d):o},d.context=function(f){return arguments.length?(f==null?i=l=null:l=o(i=f),d):i},d}function Mge(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function Ige(e){return e}function $ge(){var e=Ige,t=Mge,a=null,s=gn(0),r=gn(uu),i=gn(0);function o(l){var c,d=(l=AN(l)).length,u,f,p=0,x=new Array(d),v=new Array(d),N=+s.apply(this,arguments),b=Math.min(uu,Math.max(-uu,r.apply(this,arguments)-N)),C,w=Math.min(Math.abs(b)/d,i.apply(this,arguments)),S=w*(b<0?-1:1),E;for(c=0;c<d;++c)(E=v[x[c]=c]=+e(l[c],c,l))>0&&(p+=E);for(t!=null?x.sort(function(k,A){return t(v[k],v[A])}):a!=null&&x.sort(function(k,A){return a(l[k],l[A])}),c=0,f=p?(b-d*S)/p:0;c<d;++c,N=C)u=x[c],E=v[u],C=N+(E>0?E*f:0)+S,v[u]={data:l[u],index:c,value:E,startAngle:N,endAngle:C,padAngle:w};return v}return o.value=function(l){return arguments.length?(e=typeof l=="function"?l:gn(+l),o):e},o.sortValues=function(l){return arguments.length?(t=l,a=null,o):t},o.sort=function(l){return arguments.length?(a=l,t=null,o):a},o.startAngle=function(l){return arguments.length?(s=typeof l=="function"?l:gn(+l),o):s},o.endAngle=function(l){return arguments.length?(r=typeof l=="function"?l:gn(+l),o):r},o.padAngle=function(l){return arguments.length?(i=typeof l=="function"?l:gn(+l),o):i},o}class bW{constructor(t,a){this._context=t,this._x=a}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,a){switch(t=+t,a=+a,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,a):this._context.moveTo(t,a);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,a,t,a):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+a)/2,t,this._y0,t,a);break}}this._x0=t,this._y0=a}}function vW(e){return new bW(e,!0)}function wW(e){return new bW(e,!1)}const TN={draw(e,t){const a=Wi(t/hv);e.moveTo(a,0),e.arc(0,0,a,0,uu)}},NW={draw(e,t){const a=Wi(t/5)/2;e.moveTo(-3*a,-a),e.lineTo(-a,-a),e.lineTo(-a,-3*a),e.lineTo(a,-3*a),e.lineTo(a,-a),e.lineTo(3*a,-a),e.lineTo(3*a,a),e.lineTo(a,a),e.lineTo(a,3*a),e.lineTo(-a,3*a),e.lineTo(-a,a),e.lineTo(-3*a,a),e.closePath()}},jW=Wi(1/3),Rge=jW*2,CW={draw(e,t){const a=Wi(t/Rge),s=a*jW;e.moveTo(0,-a),e.lineTo(s,0),e.lineTo(0,a),e.lineTo(-s,0),e.closePath()}},SW={draw(e,t){const a=Wi(t),s=-a/2;e.rect(s,s,a,a)}},zge=.8908130915292852,_W=fv(hv/10)/fv(7*hv/10),Uge=fv(uu/10)*_W,Fge=-hW(uu/10)*_W,AW={draw(e,t){const a=Wi(t*zge),s=Uge*a,r=Fge*a;e.moveTo(0,-a),e.lineTo(s,r);for(let i=1;i<5;++i){const o=uu*i/5,l=hW(o),c=fv(o);e.lineTo(c*a,-l*a),e.lineTo(l*s-c*r,c*s+l*r)}e.closePath()}},zS=Wi(3),TW={draw(e,t){const a=-Wi(t/(zS*3));e.moveTo(0,a*2),e.lineTo(-zS*a,-a),e.lineTo(zS*a,-a),e.closePath()}},Qr=-.5,Kr=Wi(3)/2,VT=1/Wi(12),Bge=(VT/2+1)*3,EW={draw(e,t){const a=Wi(t/Bge),s=a/2,r=a*VT,i=s,o=a*VT+a,l=-i,c=o;e.moveTo(s,r),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(Qr*s-Kr*r,Kr*s+Qr*r),e.lineTo(Qr*i-Kr*o,Kr*i+Qr*o),e.lineTo(Qr*l-Kr*c,Kr*l+Qr*c),e.lineTo(Qr*s+Kr*r,Qr*r-Kr*s),e.lineTo(Qr*i+Kr*o,Qr*o-Kr*i),e.lineTo(Qr*l+Kr*c,Qr*c-Kr*l),e.closePath()}},kW=[TN,NW,CW,SW,AW,TW,EW];function ZL(e,t){let a=null,s=KL(r);e=typeof e=="function"?e:gn(e||TN),t=typeof t=="function"?t:gn(t===void 0?64:+t);function r(){let i;if(a||(a=i=s()),e.apply(this,arguments).draw(a,+t.apply(this,arguments)),i)return a=null,i+""||null}return r.type=function(i){return arguments.length?(e=typeof i=="function"?i:gn(i),r):e},r.size=function(i){return arguments.length?(t=typeof i=="function"?i:gn(+i),r):t},r.context=function(i){return arguments.length?(a=i??null,r):a},r}function gv(){}function pv(e,t,a){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+a)/6)}function LW(e){this._context=e}LW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:pv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:pv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Hge(e){return new LW(e)}function PW(e){this._context=e}PW.prototype={areaStart:gv,areaEnd:gv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:pv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Gge(e){return new PW(e)}function DW(e){this._context=e}DW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var a=(this._x0+4*this._x1+e)/6,s=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(a,s):this._context.moveTo(a,s);break;case 3:this._point=4;default:pv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Wge(e){return new DW(e)}function e6(e,t,a){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-a),e._x2,e._y2)}function JL(e,t){this._context=e,this._k=(1-t)/6}JL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:e6(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:e6(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};(function e(t){function a(s){return new JL(s,t)}return a.tension=function(s){return e(+s)},a})(0);function qge(e,t,a){var s=e._x1,r=e._y1,i=e._x2,o=e._y2;if(e._l01_a>J$){var l=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,c=3*e._l01_a*(e._l01_a+e._l12_a);s=(s*l-e._x0*e._l12_2a+e._x2*e._l01_2a)/c,r=(r*l-e._y0*e._l12_2a+e._y2*e._l01_2a)/c}if(e._l23_a>J$){var d=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);i=(i*d+e._x1*e._l23_2a-t*e._l12_2a)/u,o=(o*d+e._y1*e._l23_2a-a*e._l12_2a)/u}e._context.bezierCurveTo(s,r,i,o,e._x2,e._y2)}function OW(e,t){this._context=e,this._alpha=t}OW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var a=this._x2-e,s=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(a*a+s*s,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:qge(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Vge=(function e(t){function a(s){return t?new OW(s,t):new JL(s,0)}return a.alpha=function(s){return e(+s)},a})(.5);function MW(e){this._context=e}MW.prototype={areaStart:gv,areaEnd:gv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Yge(e){return new MW(e)}function t6(e){return e<0?-1:1}function n6(e,t,a){var s=e._x1-e._x0,r=t-e._x1,i=(e._y1-e._y0)/(s||r<0&&-0),o=(a-e._y1)/(r||s<0&&-0),l=(i*r+o*s)/(s+r);return(t6(i)+t6(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function a6(e,t){var a=e._x1-e._x0;return a?(3*(e._y1-e._y0)/a-t)/2:t}function US(e,t,a){var s=e._x0,r=e._y0,i=e._x1,o=e._y1,l=(i-s)/3;e._context.bezierCurveTo(s+l,r+l*t,i-l,o-l*a,i,o)}function xv(e){this._context=e}xv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:US(this,this._t0,a6(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var a=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,US(this,a6(this,a=n6(this,e,t)),a);break;default:US(this,this._t0,a=n6(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=a}}};function IW(e){this._context=new $W(e)}(IW.prototype=Object.create(xv.prototype)).point=function(e,t){xv.prototype.point.call(this,t,e)};function $W(e){this._context=e}$W.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,a,s,r,i){this._context.bezierCurveTo(t,e,s,a,i,r)}};function YT(e){return new xv(e)}function RW(e){return new IW(e)}function zW(e){this._context=e}zW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,a=e.length;if(a)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),a===2)this._context.lineTo(e[1],t[1]);else for(var s=s6(e),r=s6(t),i=0,o=1;o<a;++i,++o)this._context.bezierCurveTo(s[0][i],r[0][i],s[1][i],r[1][i],e[o],t[o]);(this._line||this._line!==0&&a===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function s6(e){var t,a=e.length-1,s,r=new Array(a),i=new Array(a),o=new Array(a);for(r[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<a-1;++t)r[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(r[a-1]=2,i[a-1]=7,o[a-1]=8*e[a-1]+e[a],t=1;t<a;++t)s=r[t]/i[t-1],i[t]-=s,o[t]-=s*o[t-1];for(r[a-1]=o[a-1]/i[a-1],t=a-2;t>=0;--t)r[t]=(o[t]-r[t+1])/i[t];for(i[a-1]=(e[a]+r[a-1])/2,t=0;t<a-1;++t)i[t]=2*e[t+1]-r[t+1];return[r,i]}function UW(e){return new zW(e)}function EN(e,t){this._context=e,this._t=t}EN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var a=this._x*(1-this._t)+e*this._t;this._context.lineTo(a,this._y),this._context.lineTo(a,t)}break}}this._x=e,this._y=t}};function FW(e){return new EN(e,.5)}function BW(e){return new EN(e,0)}function HW(e){return new EN(e,1)}function td(e,t){if((o=e.length)>1)for(var a=1,s,r,i=e[t[0]],o,l=i.length;a<o;++a)for(r=i,i=e[t[a]],s=0;s<l;++s)i[s][1]+=i[s][0]=isNaN(r[s][1])?r[s][0]:r[s][1]}function Cu(e){for(var t=e.length,a=new Array(t);--t>=0;)a[t]=t;return a}function Qge(e,t){return e[t]}function Kge(e){const t=[];return t.key=e,t}function eP(){var e=gn([]),t=Cu,a=td,s=Qge;function r(i){var o=Array.from(e.apply(this,arguments),Kge),l,c=o.length,d=-1,u;for(const f of i)for(l=0,++d;l<c;++l)(o[l][d]=[0,+s(f,o[l].key,d,i)]).data=f;for(l=0,u=AN(t(o));l<c;++l)o[u[l]].index=l;return a(o,u),o}return r.keys=function(i){return arguments.length?(e=typeof i=="function"?i:gn(Array.from(i)),r):e},r.value=function(i){return arguments.length?(s=typeof i=="function"?i:gn(+i),r):s},r.order=function(i){return arguments.length?(t=i==null?Cu:typeof i=="function"?i:gn(Array.from(i)),r):t},r.offset=function(i){return arguments.length?(a=i??td,r):a},r}function GW(e,t){if((s=e.length)>0){for(var a,s,r=0,i=e[0].length,o;r<i;++r){for(o=a=0;a<s;++a)o+=e[a][r][1]||0;if(o)for(a=0;a<s;++a)e[a][r][1]/=o}td(e,t)}}function Xge(e,t){if((c=e.length)>0)for(var a,s=0,r,i,o,l,c,d=e[t[0]].length;s<d;++s)for(o=l=0,a=0;a<c;++a)(i=(r=e[t[a]][s])[1]-r[0])>0?(r[0]=o,r[1]=o+=i):i<0?(r[1]=l,r[0]=l+=i):(r[0]=0,r[1]=i)}function WW(e,t){if((r=e.length)>0){for(var a=0,s=e[t[0]],r,i=s.length;a<i;++a){for(var o=0,l=0;o<r;++o)l+=e[o][a][1]||0;s[a][1]+=s[a][0]=-l/2}td(e,t)}}function qW(e,t){if(!(!((o=e.length)>0)||!((i=(r=e[t[0]]).length)>0))){for(var a=0,s=1,r,i,o;s<i;++s){for(var l=0,c=0,d=0;l<o;++l){for(var u=e[t[l]],f=u[s][1]||0,p=u[s-1][1]||0,x=(f-p)/2,v=0;v<l;++v){var N=e[t[v]],b=N[s][1]||0,C=N[s-1][1]||0;x+=b-C}c+=f,d+=x*f}r[s-1][1]+=r[s-1][0]=a,c&&(a-=d/c)}r[s-1][1]+=r[s-1][0]=a,td(e,t)}}function VW(e){var t=e.map(Zge);return Cu(e).sort(function(a,s){return t[a]-t[s]})}function Zge(e){for(var t=-1,a=0,s=e.length,r,i=-1/0;++t<s;)(r=+e[t][1])>i&&(i=r,a=t);return a}function YW(e){var t=e.map(QW);return Cu(e).sort(function(a,s){return t[a]-t[s]})}function QW(e){for(var t=0,a=-1,s=e.length,r;++a<s;)(r=+e[a][1])&&(t+=r);return t}function Jge(e){return YW(e).reverse()}function epe(e){var t=e.length,a,s,r=e.map(QW),i=VW(e),o=0,l=0,c=[],d=[];for(a=0;a<t;++a)s=i[a],o<l?(o+=r[s],c.push(s)):(l+=r[s],d.push(s));return d.reverse().concat(c)}function tpe(e){return Cu(e).reverse()}const FS={appearance:VW,ascending:YW,descending:Jge,insideOut:epe,none:Cu,reverse:tpe},BS={expand:GW,diverging:Xge,none:td,silhouette:WW,wiggle:qW},KW=e=>{const{series:t,seriesOrder:a,defaultStrategy:s}=e,r=[],i={};return a.forEach(o=>{const{stack:l,stackOrder:c,stackOffset:d}=t[o];l===void 0?r.push({ids:[o],stackingOrder:FS.none,stackingOffset:BS.none}):i[l]===void 0?(i[l]=r.length,r.push({ids:[o],stackingOrder:FS[c??s?.stackOrder??"none"],stackingOffset:BS[d??s?.stackOffset??"diverging"]})):(r[i[l]].ids.push(o),c!==void 0&&(r[i[l]].stackingOrder=FS[c]),d!==void 0&&(r[i[l]].stackingOffset=BS[d]))}),r},npe=e=>e==null?"":e.toLocaleString(),ape=(e,t)=>{const{seriesOrder:a,series:s}=e,r=KW(e),i=t??[];a.forEach(l=>{const c=s[l].data;if(c!==void 0)c.forEach((d,u)=>{i.length<=u?i.push({[l]:d}):i[u][l]=d});else if(t===void 0)throw new Error([`MUI X Charts: bar series with id='${l}' has no data.`,"Either provide a data property to the series or use the dataset prop."].join(`
`))});const o={};return r.forEach(l=>{const{ids:c,stackingOffset:d,stackingOrder:u}=l,f=eP().keys(c.map(p=>{const x=s[p].dataKey;return s[p].data===void 0&&x!==void 0?x:p})).value((p,x)=>p[x]??0).order(u).offset(d)(i);c.forEach((p,x)=>{const v=s[p].dataKey;o[p]=qe({layout:"vertical",labelMarkType:"square",minBarSize:0,valueFormatter:s[p].valueFormatter??npe},s[p],{data:v?t.map(N=>{const b=N[v];return typeof b=="number"?b:null}):s[p].data,stackedData:f[x].map(([N,b])=>[N,b])})})}),{seriesOrder:a,stackingGroups:r,series:o}};function zi(e,t){return typeof e=="function"?e(t):e}const spe=e=>{const{seriesOrder:t,series:a}=e;return t.reduce((s,r)=>{const i=zi(a[r].label,"legend");return i===void 0||s.push({markType:a[r].labelMarkType,id:r,seriesId:r,color:a[r].color,label:i}),s},[])};function tP(e){return e.colorGetter?e.colorGetter:()=>e.color}const rpe=(e,t,a)=>{const s=e.layout==="vertical",r=s?t?.colorScale:a?.colorScale,i=s?a?.colorScale:t?.colorScale,o=s?t?.data:a?.data,l=tP(e);return i?c=>{if(c===void 0)return e.color;const d=e.data[c],u=d===null?l({value:d,dataIndex:c}):i(d);return u===null?l({value:d,dataIndex:c}):u}:r&&o?c=>{if(c===void 0)return e.color;const d=o[c],u=d===null?l({value:d,dataIndex:c}):r(d);return u===null?l({value:d,dataIndex:c}):u}:c=>{if(c===void 0)return e.color;const d=e.data[c];return l({value:d,dataIndex:c})}},ipe=e=>{const{series:t,getColor:a,identifier:s}=e;if(!s||s.dataIndex===void 0)return null;const r=zi(t.label,"tooltip"),i=t.data[s.dataIndex];if(i==null)return null;const o=t.valueFormatter(i,{dataIndex:s.dataIndex});return{identifier:s,color:a(s.dataIndex),label:r,value:i,formattedValue:o,markType:t.labelMarkType}},ope=e=>Object.values(e).map(t=>t.layout==="horizontal"?{direction:"y",axisId:t.yAxisId}:{direction:"x",axisId:t.xAxisId});function Hn(){const e=Rr();if(!e)throw new Error(["MUI X Charts: Could not find the charts context.","It looks like you rendered your component outside of a ChartContainer parent component."].join(`
`));return e.store}function vi(){const e=Hn();return Rt(e,cr)}function kN(){const e=Hn();return Rt(e,kue)}function nP(e){return EG.getTypes().has(e)}const lpe=(e,t,a,s,r,i,o)=>{const l=s==="rotation"?r[t].rotationExtremumGetter:r[t].radiusExtremumGetter,c=o[t]?.series??{},[d,u]=l?.({series:c,axis:a,axisIndex:i,isDefaultAxis:i===0})??[1/0,-1/0],[f,p]=e;return[Math.min(d,f),Math.max(u,p)]},cpe=(e,t,a,s,r)=>{const o=Object.keys(a).filter(nP).reduce((l,c)=>lpe(l,c,e,t,a,s,r),[1/0,-1/0]);return Number.isNaN(o[0])||Number.isNaN(o[1])?[1/0,-1/0]:o},Fc=(e,t)=>e===void 0?t:Math.PI*e/180,dpe=(e,t,a,s)=>{const r=new Set;return Object.keys(t).filter(nP).forEach(o=>{const l=a[o]?.series??{},c=t[o].axisTooltipGetter?.(l);c!==void 0&&c.forEach(({axisId:d,direction:u})=>{u===e&&r.add(d??s)})}),r};function upe(e,t,a){if(t==="rotation"){if(a.scaleType==="point"){const s=[Fc(a.startAngle,0),Fc(a.endAngle,2*Math.PI)],r=s[1]-s[0];return r>Math.PI*2-.1&&(s[1]-=r/a.data.length),s}return[Fc(a.startAngle,0),Fc(a.endAngle,2*Math.PI)]}return[0,Math.min(e.height,e.width)/2]}const mpe=.2,fpe=.1;function XW({drawingArea:e,formattedSeries:t,axis:a,seriesConfig:s,axisDirection:r}){if(a===void 0)return{axis:{},axisIds:[]};const i=dpe(r,s,t,a[0].id),o={};return a.forEach((l,c)=>{const d=l,u=upe(e,r,d),[f,p]=cpe(d,r,s,c,t),x=!d.ignoreTooltip&&i.has(d.id),v=d.data??[];if(Uu(d)){const I=d.categoryGapRatio??mpe,R=d.barGapRatio??fpe;if(o[d.id]=qe({offset:0,categoryGapRatio:I,barGapRatio:R,triggerTooltip:x},d,{data:v,scale:pN(d.data,u).paddingInner(I).paddingOuter(I/2),tickNumber:d.data.length,colorScale:d.colorMap&&(d.colorMap.type==="ordinal"?vf(qe({values:d.data},d.colorMap)):of(d.colorMap))}),FT(d.data)){const U=BT(d.data,u,d.tickNumber);o[d.id].valueFormatter=d.valueFormatter??U}}if(Fu(d)&&(o[d.id]=qe({offset:0,triggerTooltip:x},d,{data:v,scale:AG(d.data,u),tickNumber:d.data.length,colorScale:d.colorMap&&(d.colorMap.type==="ordinal"?vf(qe({values:d.data},d.colorMap)):of(d.colorMap))}),FT(d.data))){const I=BT(d.data,u,d.tickNumber);o[d.id].valueFormatter=d.valueFormatter??I}if(!nme(d))return;const N=d.scaleType??"linear",b=d.domainLimit??"nice",C=[d.min??f,d.max??p];if(typeof b=="function"){const{min:I,max:R}=b(f,p);C[0]=I,C[1]=R}const w=SG(d,C,GL(Math.abs(u[1]-u[0]))),S=_G(w,u),E=xN(N,C,u),k=b==="nice"?E.nice(w):E,[A,T]=k.domain(),_=[d.min??A,d.max??T];o[d.id]=qe({offset:0,triggerTooltip:x},d,{data:v,scaleType:N,scale:k.domain(_),tickNumber:S,colorScale:d.colorMap&&of(d.colorMap)})}),{axis:o,axisIds:a.map(({id:l})=>l)}}const ZW=e=>e.polarAxis,JW=wt(ZW,e=>e?.rotation),hpe=wt(ZW,e=>e?.radius),Wu=wt(JW,cr,da,$r,(e,t,a,s)=>XW({drawingArea:t,formattedSeries:a,axis:e,seriesConfig:s,axisDirection:"rotation"}));wt(hpe,cr,da,$r,(e,t,a,s)=>XW({drawingArea:t,formattedSeries:a,axis:e,seriesConfig:s,axisDirection:"radius"}));const gpe=wt(cr,e=>({cx:e.left+e.width/2,cy:e.top+e.height/2})),ppe=e=>(t,a)=>Math.atan2(t-e.cx,e.cy-a);function LN(e){return(e%360+360)%360}const HS=2*Math.PI;function xpe(e){return(e%HS+HS)%HS}function r6(e,t){const{scale:a,data:s,reverse:r}=e;if(!ms(a))throw new Error("MUI X Charts: getAxisValue is not implemented for polare continuous axes.");if(!s)return-1;const i=xpe(t-Math.min(...a.range())),o=a.bandwidth()===0?Math.floor((i+a.step()/2)/a.step())%s.length:Math.floor(i/a.step());return o<0||o>=s.length?-1:r?s.length-1-o:o}function dr(){const e=Hn(),{axis:t,axisIds:a}=Rt(e,Hs);return{xAxis:t,xAxisIds:a}}function ur(){const e=Hn(),{axis:t,axisIds:a}=Rt(e,Gs);return{yAxis:t,yAxisIds:a}}function ype(e){const t=Hn(),{axis:a,axisIds:s}=Rt(t,Hs),r=s[0];return a[r]}function bpe(e){const t=Hn(),{axis:a,axisIds:s}=Rt(t,Gs),r=s[0];return a[r]}function eq(){const e=Hn(),{axis:t,axisIds:a}=Rt(e,Wu);return{rotationAxis:t,rotationAxisIds:a}}function vpe(e){const t=Hn(),{axis:a,axisIds:s}=Rt(t,Wu),r=s[0];return a[r]}function Wf(e){if(ms(e))return a=>(e(a)??0)+e.bandwidth()/2;const t=e.domain();return t[0]===t[1]?a=>a===t[0]?e(a):NaN:a=>e(a)}function aP(){const e=Hn(),{axis:t,axisIds:a}=Rt(e,Ege)??{axis:{},axisIds:[]};return{zAxis:t,zAxisIds:a}}function sP(){const e=Rr();if(!e)throw new Error(["MUI X Charts: Could not find the svg ref context.","It looks like you rendered your component outside of a ChartContainer parent component."].join(`
`));return e.svgRef}function PN(){const e=Hn();return Rt(e,da)}const wpe=wt(da,(e,t)=>e[t]);Aa(da,(e,t,a)=>{if(!a||Array.isArray(a)&&a.length===0)return e[t]?.seriesOrder?.map(r=>e[t]?.series[r])??[];if(!Array.isArray(a))return e[t]?.series?.[a];const s=[];for(const r of a){const i=e[t]?.series?.[r];i&&s.push(i)}return s});const Npe=e=>{const t=Hn();return Rt(t,wpe,e)};function Nx(){return Npe("line")}function jpe(){return!1}function tq(e,t){return!e||!t?jpe:function(s){return s?e.highlight==="series"?s.seriesId===t.seriesId:e.highlight==="item"?s.dataIndex===t.dataIndex&&s.seriesId===t.seriesId:!1:!1}}function Cpe(){return!1}function nq(e,t){return!e||!t?Cpe:function(s){return s?e.fade==="series"?s.seriesId===t.seriesId&&s.dataIndex!==t.dataIndex:e.fade==="global"?s.seriesId!==t.seriesId||s.dataIndex!==t.dataIndex:!1:!1}}function rP(e,t,a){return e?.highlight==="series"&&t?.seriesId===a}function Spe(e,t,a){return rP(e,t,a)?!1:e?.fade==="global"&&t!=null||e?.fade==="series"&&t?.seriesId===a}function aq(e,t,a){return e?.highlight==="item"&&t?.seriesId===a?t.dataIndex:null}function _pe(e,t,a){return rP(e,t,a)||aq(e,t,a)===t?.dataIndex?null:(e?.fade==="series"||e?.fade==="global")&&t?.seriesId===a?t.dataIndex:null}const Ape=e=>e.highlight,Tpe=wt(da,e=>{const t=new Map;return Object.keys(e).forEach(a=>{const s=e[a];s?.seriesOrder?.forEach(r=>{const i=s?.series[r];t.set(r,i?.highlightScope)})}),t}),Vl=Aa(Ape,ZG,function(t,a){return t.isControlled||t.lastUpdate==="pointer"?t.item:a}),gd=wt(Tpe,Vl,function(t,a){if(!a)return null;const s=t.get(a.seriesId);return s===void 0?null:s}),Epe=wt(gd,Vl,tq),kpe=wt(gd,Vl,nq),Lpe=wt(gd,Vl,function(t,a,s){return tq(t,a)(s)});wt(gd,Vl,rP);wt(gd,Vl,Spe);wt(gd,Vl,_pe);wt(gd,Vl,aq);const Ppe=wt(gd,Vl,function(t,a,s){return nq(t,a)(s)});function sq(e){const t=Hn(),a=Rt(t,Lpe,e),s=Rt(t,Ppe,e);return{isHighlighted:a,isFaded:!a&&s}}function Dpe(){const e=Hn(),t=Rt(e,Epe),a=Rt(e,kpe);return{isHighlighted:t,isFaded:a}}function Ope(e,t){return Object.keys(e).flatMap(a=>{const s=t[a].legendGetter;return s===void 0?[]:s(e[a])})}function Mpe(){const e=PN(),t=Hn(),a=Rt(t,$r);return{items:Ope(e,a)}}function iP(){const e=kN();return h.useCallback(t=>`${e}-gradient-${t}`,[e])}function Ipe(){const e=kN();return h.useCallback(t=>`${e}-gradient-${t}-object-bound`,[e])}var GS,i6;function $pe(){if(i6)return GS;i6=1;var e=4,t=.001,a=1e-7,s=10,r=11,i=1/(r-1),o=typeof Float32Array=="function";function l(N,b){return 1-3*b+3*N}function c(N,b){return 3*b-6*N}function d(N){return 3*N}function u(N,b,C){return((l(b,C)*N+c(b,C))*N+d(b))*N}function f(N,b,C){return 3*l(b,C)*N*N+2*c(b,C)*N+d(b)}function p(N,b,C,w,S){var E,k,A=0;do k=b+(C-b)/2,E=u(k,w,S)-N,E>0?C=k:b=k;while(Math.abs(E)>a&&++A<s);return k}function x(N,b,C,w){for(var S=0;S<e;++S){var E=f(b,C,w);if(E===0)return b;var k=u(b,C,w)-N;b-=k/E}return b}function v(N){return N}return GS=function(b,C,w,S){if(!(0<=b&&b<=1&&0<=w&&w<=1))throw new Error("bezier x values must be in [0, 1] range");if(b===C&&w===S)return v;for(var E=o?new Float32Array(r):new Array(r),k=0;k<r;++k)E[k]=u(k*i,b,w);function A(T){for(var _=0,I=1,R=r-1;I!==R&&E[I]<=T;++I)_+=i;--I;var U=(T-E[I])/(E[I+1]-E[I]),D=_+U*i,M=f(D,b,w);return M>=t?x(T,D,b,w):M===0?D:p(T,_,_+i,b,w)}return function(_){return _===0?0:_===1?1:u(A(_),C,S)}},GS}var Rpe=$pe();const zpe=Hi(Rpe),DN=300,oP="cubic-bezier(0.66, 0, 0.34, 1)",Upe=zpe(.66,0,.34,1);var Nf=0,kg=0,rg=0,rq=1e3,yv,Lg,bv=0,Su=0,ON=0,gp=typeof performance=="object"&&performance.now?performance:Date,iq=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function lP(){return Su||(iq(Fpe),Su=gp.now()+ON)}function Fpe(){Su=0}function vv(){this._call=this._time=this._next=null}vv.prototype=oq.prototype={constructor:vv,restart:function(e,t,a){if(typeof e!="function")throw new TypeError("callback is not a function");a=(a==null?lP():+a)+(t==null?0:+t),!this._next&&Lg!==this&&(Lg?Lg._next=this:yv=this,Lg=this),this._call=e,this._time=a,QT()},stop:function(){this._call&&(this._call=null,this._time=1/0,QT())}};function oq(e,t,a){var s=new vv;return s.restart(e,t,a),s}function Bpe(){lP(),++Nf;for(var e=yv,t;e;)(t=Su-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Nf}function o6(){Su=(bv=gp.now())+ON,Nf=kg=0;try{Bpe()}finally{Nf=0,Gpe(),Su=0}}function Hpe(){var e=gp.now(),t=e-bv;t>rq&&(ON-=t,bv=e)}function Gpe(){for(var e,t=yv,a,s=1/0;t;)t._call?(s>t._time&&(s=t._time),e=t,t=t._next):(a=t._next,t._next=null,t=e?e._next=a:yv=a);Lg=e,QT(s)}function QT(e){if(!Nf){kg&&(kg=clearTimeout(kg));var t=e-Su;t>24?(e<1/0&&(kg=setTimeout(o6,e-gp.now()-ON)),rg&&(rg=clearInterval(rg))):(rg||(bv=gp.now(),rg=setInterval(Hpe,rq)),Nf=1,iq(o6))}}function Wpe(e,t,a){var s=new vv;return t=t==null?0:+t,s.restart(r=>{s.stop(),e(r+t)},t,a),s}class qpe{elapsed=0;timer=null;constructor(t,a,s){this.duration=t,this.easingFn=a,this.onTickCallback=s,this.resume()}get running(){return this.timer!==null}timerCallback(t){this.elapsed=Math.min(t,this.duration);const a=this.duration===0?1:this.elapsed/this.duration,s=this.easingFn(a);this.onTickCallback(s),this.elapsed>=this.duration&&this.stop()}resume(){if(this.running||this.elapsed>=this.duration)return this;const t=lP()-this.elapsed;return this.timer=oq(a=>this.timerCallback(a),0,t),this}stop(){return this.running?(this.timer&&(this.timer.stop(),this.timer=null),this):this}finish(){return this.stop(),Wpe(()=>this.timerCallback(this.duration)),this}}function Vpe(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(let r=0;r<a.length;r+=1){const i=a[r];if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(e[i],t[i]))return!1}return!0}function Ype(e,{createInterpolator:t,applyProps:a,skip:s,initialProps:r=e}){const i=h.useRef(r),o=h.useRef(null),l=h.useRef(null),c=h.useRef(e);Xa(()=>{c.current=e},[e]),Xa(()=>{s&&(o.current?.finish(),o.current=null,l.current=null,i.current=e)},[e,s]);const d=h.useCallback(f=>{const p=i.current,x=t(p,e);o.current=new qpe(DN,Upe,v=>{const N=x(v);i.current=N,a(f,N)})},[a,t,e]);return[h.useCallback(f=>{if(f===null){o.current?.stop();return}const p=l.current;if(p===f){if(Vpe(c.current,e)){o.current?.resume();return}o.current?.stop()}p&&o.current?.stop(),l.current=f,(o.current||!s)&&d(f)},[d,e,s]),i.current]}function lq(e,{createInterpolator:t,transformProps:a,applyProps:s,skip:r,initialProps:i=e,ref:o}){const l=a??(f=>f),[c,d]=Ype(e,{initialProps:i,createInterpolator:t,applyProps:(f,p)=>s(f,l(p)),skip:r}),u=a(r?e:d);return qe({},u,{ref:Eo(c,o)})}function Qpe(e){return lq({d:e.d},{createInterpolator:(t,a)=>{const s=NL(t.d,a.d);return r=>({d:s(r)})},applyProps:(t,{d:a})=>t.setAttribute("d",a),transformProps:t=>t,skip:e.skipAnimation,ref:e.ref})}function Kpe(e){return lq({d:e.d},{createInterpolator:(t,a)=>{const s=NL(t.d,a.d);return r=>({d:s(r)})},applyProps:(t,{d:a})=>t.setAttribute("d",a),skip:e.skipAnimation,transformProps:t=>t,ref:e.ref})}function Xpe(){return Rr().chartRootRef}const Zpe={"image/png":"PNG","image/jpeg":"JPEG","image/webp":"WebP"},Jpe=e=>({components:{MuiChartsLocalizationProvider:{defaultProps:{localeText:qe({},e)}}}}),cq={loading:"Loading data",noData:"No data to display",zoomIn:"Zoom in",zoomOut:"Zoom out",toolbarExport:"Export",toolbarExportPrint:"Print",toolbarExportImage:e=>`Export as ${Zpe[e]??e}`,chartTypeBar:"Bar",chartTypeColumn:"Column",chartTypeLine:"Line",chartTypeArea:"Area",chartTypePie:"Pie",chartPaletteLabel:"Color palette",chartPaletteNameRainbowSurge:"Rainbow Surge",chartPaletteNameBlueberryTwilight:"Blueberry Twilight",chartPaletteNameMangoFusion:"Mango Fusion",chartPaletteNameCheerfulFiesta:"Cheerful Fiesta",chartPaletteNameStrawberrySky:"Strawberry Sky",chartPaletteNameBlue:"Blue",chartPaletteNameGreen:"Green",chartPaletteNamePurple:"Purple",chartPaletteNameRed:"Red",chartPaletteNameOrange:"Orange",chartPaletteNameYellow:"Yellow",chartPaletteNameCyan:"Cyan",chartPaletteNamePink:"Pink",chartConfigurationSectionChart:"Chart",chartConfigurationSectionColumns:"Columns",chartConfigurationSectionBars:"Bars",chartConfigurationSectionAxes:"Axes",chartConfigurationGrid:"Grid",chartConfigurationBorderRadius:"Border radius",chartConfigurationCategoryGapRatio:"Category gap ratio",chartConfigurationBarGapRatio:"Series gap ratio",chartConfigurationStacked:"Stacked",chartConfigurationShowToolbar:"Show toolbar",chartConfigurationSkipAnimation:"Skip animation",chartConfigurationInnerRadius:"Inner radius",chartConfigurationOuterRadius:"Outer radius",chartConfigurationColors:"Colors",chartConfigurationHideLegend:"Hide legend",chartConfigurationShowMark:"Show mark",chartConfigurationHeight:"Height",chartConfigurationWidth:"Width",chartConfigurationSeriesGap:"Series gap",chartConfigurationTickPlacement:"Tick placement",chartConfigurationTickLabelPlacement:"Tick label placement",chartConfigurationCategoriesAxisLabel:"Categories axis label",chartConfigurationSeriesAxisLabel:"Series axis label",chartConfigurationXAxisPosition:"X-axis position",chartConfigurationYAxisPosition:"Y-axis position",chartConfigurationSeriesAxisReverse:"Reverse series axis",chartConfigurationTooltipPlacement:"Placement",chartConfigurationTooltipTrigger:"Trigger",chartConfigurationLegendPosition:"Position",chartConfigurationLegendDirection:"Direction",chartConfigurationBarLabels:"Bar labels",chartConfigurationColumnLabels:"Column labels",chartConfigurationInterpolation:"Interpolation",chartConfigurationSectionTooltip:"Tooltip",chartConfigurationSectionLegend:"Legend",chartConfigurationSectionLines:"Lines",chartConfigurationSectionAreas:"Areas",chartConfigurationSectionArcs:"Arcs",chartConfigurationPaddingAngle:"Padding angle",chartConfigurationCornerRadius:"Corner radius",chartConfigurationArcLabels:"Arc labels",chartConfigurationStartAngle:"Start angle",chartConfigurationEndAngle:"End angle",chartConfigurationPieTooltipTrigger:"Trigger",chartConfigurationPieLegendPosition:"Position",chartConfigurationPieLegendDirection:"Direction",chartConfigurationOptionNone:"None",chartConfigurationOptionValue:"Value",chartConfigurationOptionAuto:"Auto",chartConfigurationOptionTop:"Top",chartConfigurationOptionTopLeft:"Top Left",chartConfigurationOptionTopRight:"Top Right",chartConfigurationOptionBottom:"Bottom",chartConfigurationOptionBottomLeft:"Bottom Left",chartConfigurationOptionBottomRight:"Bottom Right",chartConfigurationOptionLeft:"Left",chartConfigurationOptionRight:"Right",chartConfigurationOptionAxis:"Axis",chartConfigurationOptionItem:"Item",chartConfigurationOptionHorizontal:"Horizontal",chartConfigurationOptionVertical:"Vertical",chartConfigurationOptionBoth:"Both",chartConfigurationOptionStart:"Start",chartConfigurationOptionMiddle:"Middle",chartConfigurationOptionEnd:"End",chartConfigurationOptionExtremities:"Extremities",chartConfigurationOptionTick:"Tick",chartConfigurationOptionMonotoneX:"Monotone X",chartConfigurationOptionMonotoneY:"Monotone Y",chartConfigurationOptionCatmullRom:"Catmull-Rom",chartConfigurationOptionLinear:"Linear",chartConfigurationOptionNatural:"Natural",chartConfigurationOptionStep:"Step",chartConfigurationOptionStepBefore:"Step Before",chartConfigurationOptionStepAfter:"Step After",chartConfigurationOptionBumpX:"Bump X",chartConfigurationOptionBumpY:"Bump Y"},exe=cq;Jpe(cq);const txe=["localeText"],KT=h.createContext(null);function nxe(e){const{localeText:t}=e,a=dn(e,txe),{localeText:s}=h.useContext(KT)??{localeText:void 0},r=yi({props:a,name:"MuiChartsLocalizationProvider"}),{children:i,localeText:o}=r,l=h.useMemo(()=>qe({},exe,o,s,t),[o,s,t]),c=h.useMemo(()=>({localeText:l}),[l]);return n.jsx(KT.Provider,{value:c,children:i})}const dq=()=>{const e=h.useContext(KT);if(e===null)throw new Error(["MUI X Charts: Can not find the charts localization context.","It looks like you forgot to wrap your component in ChartsLocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-charts` package"].join(`
`));return e};function axe({bandWidth:e,numberOfGroups:t,gapRatio:a}){if(a===0)return{barWidth:e/t,offset:0};const s=e/(t+(t-1)*a),r=a*s;return{barWidth:s,offset:r}}function sxe(e,t,a){const s=e&&t>0,r=!e&&t<0,i=s||r;return a?!i:i}function rxe(e){const{verticalLayout:t,xAxisConfig:a,yAxisConfig:s,series:r,dataIndex:i,numberOfGroups:o,groupIndex:l}=e,c=t?a:s,d=(t?s.reverse:a.reverse)??!1,{barWidth:u,offset:f}=axe({bandWidth:c.scale.bandwidth(),numberOfGroups:o,gapRatio:c.barGapRatio}),p=l*(u+f),x=a.scale,v=s.scale,N=c.data[i],b=r.data[i];if(b==null)return null;const w=r.stackedData[i].map(T=>t?v(T):x(T)),S=Math.round(Math.min(...w)),E=Math.round(Math.max(...w)),k=b===0?0:Math.max(r.minBarSize,E-S),A=sxe(t,b,d)?E-k:S;return{x:t?x(N)+p:A,y:t?A:v(N)+p,height:t?k:u,width:t?u:k}}const ixe=e=>{const{series:t,identifier:a,axesConfig:s,placement:r}=e;if(!a||a.dataIndex===void 0)return null;const i=t.bar?.series[a.seriesId];if(t.bar==null||i==null||s.x===void 0||s.y===void 0)return null;const o=rxe({verticalLayout:i.layout==="vertical",xAxisConfig:s.x,yAxisConfig:s.y,series:i,dataIndex:a.dataIndex,numberOfGroups:t.bar.stackingGroups.length,groupIndex:t.bar.stackingGroups.findIndex(f=>f.ids.includes(i.id))});if(o==null)return null;const{x:l,y:c,width:d,height:u}=o;switch(r){case"right":return{x:l+d,y:c+u/2};case"bottom":return{x:l+d/2,y:c+u};case"left":return{x:l,y:c+u/2};default:return{x:l+d/2,y:c}}},oxe=(e,t,a)=>qe({},e,{id:e.id??`auto-generated-id-${t}`,color:e.color??a[t%a.length]}),lxe={seriesProcessor:ape,colorProcessor:rpe,legendGetter:spe,tooltipGetter:ipe,tooltipItemPositionGetter:ixe,axisTooltipGetter:ope,xExtremumGetter:kge,yExtremumGetter:Lge,getSeriesWithDefaultValues:oxe},cxe=e=>{const{series:t,axis:a,isDefaultAxis:s,getFilters:r}=e;let i=1/0,o=-1/0;for(const l in t){if(!Object.hasOwn(t,l))continue;const c=t[l].xAxisId;if(!(c===a.id||c===void 0&&s))continue;const d=r?.({currentAxisId:a.id,isDefaultAxis:s,seriesXAxisId:t[l].xAxisId,seriesYAxisId:t[l].yAxisId}),u=t[l].data??[];for(let f=0;f<u.length;f+=1){const p=u[f];d&&!d(p,f)||p.x!==null&&(p.x<i&&(i=p.x),p.x>o&&(o=p.x))}}return[i,o]},dxe=e=>{const{series:t,axis:a,isDefaultAxis:s,getFilters:r}=e;let i=1/0,o=-1/0;for(const l in t){if(!Object.hasOwn(t,l))continue;const c=t[l].yAxisId;if(!(c===a.id||c===void 0&&s))continue;const d=r?.({currentAxisId:a.id,isDefaultAxis:s,seriesXAxisId:t[l].xAxisId,seriesYAxisId:t[l].yAxisId}),u=t[l].data??[];for(let f=0;f<u.length;f+=1){const p=u[f];d&&!d(p,f)||p.y!==null&&(p.y<i&&(i=p.y),p.y>o&&(o=p.y))}}return[i,o]},uxe=({series:e,seriesOrder:t},a)=>({series:Object.fromEntries(Object.entries(e).map(([r,i])=>{const o=i?.datasetKeys,l=["x","y"].filter(d=>typeof o?.[d]!="string");if(i?.datasetKeys&&l.length>0)throw new Error([`MUI X Charts: scatter series with id='${r}' has incomplete datasetKeys.`,`Properties ${l.map(d=>`"${d}"`).join(", ")} are missing.`].join(`
`));const c=o?a?.map(d=>({x:d[o.x]??null,y:d[o.y]??null,z:o.z&&d[o.z],id:o.id&&d[o.id]}))??[]:i.data??[];return[r,qe({labelMarkType:"circle",markerSize:4},i,{preview:qe({markerSize:1},i?.preview),data:c,valueFormatter:i.valueFormatter??(d=>d&&`(${d.x}, ${d.y})`)})]})),seriesOrder:t}),mxe=(e,t,a,s)=>{const r=s?.colorScale,i=a?.colorScale,o=t?.colorScale,l=tP(e);return r?c=>{if(c===void 0)return e.color;if(s?.data?.[c]!==void 0){const f=r(s?.data?.[c]);if(f!==null)return f}const d=e.data[c],u=d===null?l({value:d,dataIndex:c}):r(d.z);return u===null?l({value:d,dataIndex:c}):u}:i?c=>{if(c===void 0)return e.color;const d=e.data[c],u=d===null?l({value:d,dataIndex:c}):i(d.y);return u===null?l({value:d,dataIndex:c}):u}:o?c=>{if(c===void 0)return e.color;const d=e.data[c],u=d===null?l({value:d,dataIndex:c}):o(d.x);return u===null?l({value:d,dataIndex:c}):u}:c=>{if(c===void 0)return e.color;const d=e.data[c];return l({value:d,dataIndex:c})}},fxe=e=>{const{seriesOrder:t,series:a}=e;return t.reduce((s,r)=>{const i=zi(a[r].label,"legend");return i===void 0||s.push({markType:a[r].labelMarkType,id:r,seriesId:r,color:a[r].color,label:i}),s},[])},hxe=e=>{const{series:t,getColor:a,identifier:s}=e;if(!s||s.dataIndex===void 0)return null;const r=zi(t.label,"tooltip"),i=t.data[s.dataIndex],o=t.valueFormatter(i,{dataIndex:s.dataIndex});return{identifier:s,color:a(s.dataIndex),label:r,value:i,formattedValue:o,markType:t.labelMarkType}},gxe=(e,t,a)=>qe({},e,{id:e.id??`auto-generated-id-${t}`,color:e.color??a[t%a.length]}),pxe=e=>{const{series:t,identifier:a,axesConfig:s}=e;if(!a||a.dataIndex===void 0)return null;const r=t.scatter?.series[a.seriesId];if(r==null||s.x===void 0||s.y===void 0)return null;const i=r.data?.[a.dataIndex].x,o=r.data?.[a.dataIndex].y;return i==null||o==null?null:{x:s.x.scale(i),y:s.y.scale(o)}},xxe={seriesProcessor:uxe,colorProcessor:mxe,legendGetter:fxe,tooltipGetter:hxe,tooltipItemPositionGetter:pxe,xExtremumGetter:cxe,yExtremumGetter:dxe,getSeriesWithDefaultValues:gxe},yxe=e=>{const{axis:t}=e;return mv(t.data??[])};function bxe(e,t,a,s){return a.reduce((r,i,o)=>{if(t[o]===null)return r;const[l,c]=e(i);return s&&(!s({y:l,x:null},o)||!s({y:c,x:null},o))?r:[Math.min(l,c,r[0]),Math.max(l,c,r[1])]},[1/0,-1/0])}const vxe=e=>{const{series:t,axis:a,isDefaultAxis:s,getFilters:r}=e;return Object.keys(t).filter(i=>{const o=t[i].yAxisId;return o===a.id||s&&o===void 0}).reduce((i,o)=>{const{area:l,stackedData:c,data:d}=t[o],u=l!==void 0,f=r?.({currentAxisId:a.id,isDefaultAxis:s,seriesXAxisId:t[o].xAxisId,seriesYAxisId:t[o].yAxisId}),p=u&&a.scaleType!=="log"&&typeof t[o].baseline!="string"?b=>b:b=>[b[1],b[1]],x=bxe(p,d,c,f),[v,N]=x;return[Math.min(v,i[0]),Math.max(N,i[1])]},[1/0,-1/0])};function wxe(e,t){const a={};return Object.keys(e).forEach(s=>{a[s]=qe({},e[s],{valueFormatter:e[s].valueFormatter??t})}),a}const Nxe=(e,t)=>{const{seriesOrder:a,series:s}=e,r=KW(qe({},e,{defaultStrategy:{stackOffset:"none"}})),i=t??[];a.forEach(l=>{const c=s[l].data;c!==void 0&&c.forEach((d,u)=>{i.length<=u?i.push({[l]:d}):i[u][l]=d})});const o={};return r.forEach(l=>{const{ids:c,stackingOrder:d,stackingOffset:u}=l,f=eP().keys(c.map(p=>{const x=s[p].dataKey;return s[p].data===void 0&&x!==void 0?x:p})).value((p,x)=>p[x]??0).order(d).offset(u)(i);c.forEach((p,x)=>{const v=s[p].dataKey;o[p]=qe({labelMarkType:"line"},s[p],{data:v?t.map(N=>{const b=N[v];return typeof b=="number"?b:null}):s[p].data,stackedData:f[x].map(([N,b])=>[N,b])})})}),{seriesOrder:a,stackingGroups:r,series:wxe(o,l=>l==null?"":l.toLocaleString())}},cP=(e,t,a)=>{const s=a?.colorScale,r=t?.colorScale,i=tP(e);return s?o=>{if(o===void 0)return e.color;const l=e.data[o],c=l===null?i({value:l,dataIndex:o}):s(l);return c===null?i({value:l,dataIndex:o}):c}:r?o=>{if(o===void 0)return e.color;const l=t.data?.[o],c=l===null?i({value:l,dataIndex:o}):r(l);return c===null?i({value:l,dataIndex:o}):c}:o=>{if(o===void 0)return e.color;const l=e.data[o];return i({value:l,dataIndex:o})}},jxe=e=>{const{seriesOrder:t,series:a}=e;return t.reduce((s,r)=>{const i=zi(a[r].label,"legend");return i===void 0||s.push({markType:a[r].labelMarkType,id:r,seriesId:r,color:a[r].color,label:i}),s},[])},Cxe=e=>{const{series:t,getColor:a,identifier:s}=e;if(!s||s.dataIndex===void 0)return null;const r=zi(t.label,"tooltip"),i=t.data[s.dataIndex],o=t.valueFormatter(i,{dataIndex:s.dataIndex});return{identifier:s,color:a(s.dataIndex),label:r,value:i,formattedValue:o,markType:t.labelMarkType}},Sxe=e=>Object.values(e).map(t=>({direction:"x",axisId:t.xAxisId})),_xe=(e,t,a)=>qe({},e,{id:e.id??`auto-generated-id-${t}`,color:e.color??a[t%a.length]}),Axe=e=>{const{series:t,identifier:a,axesConfig:s}=e;if(!a||a.dataIndex===void 0)return null;const r=t.line?.series[a.seriesId];if(r==null||s.x===void 0||s.y===void 0)return null;const i=s.x.data?.[a.dataIndex],o=r.data[a.dataIndex];return i==null||o==null?null:{x:s.x.scale(i),y:s.y.scale(o)}},Txe={colorProcessor:cP,seriesProcessor:Nxe,legendGetter:jxe,tooltipGetter:Cxe,tooltipItemPositionGetter:Axe,axisTooltipGetter:Sxe,xExtremumGetter:yxe,yExtremumGetter:vxe,getSeriesWithDefaultValues:_xe},Exe=(e="none")=>{if(typeof e=="function")return e;switch(e){case"none":return null;case"desc":return(t,a)=>a-t;case"asc":return(t,a)=>t-a;default:return null}},kxe=e=>{const{seriesOrder:t,series:a}=e,s={};return t.forEach(r=>{const i=$ge().startAngle(Fc(a[r].startAngle??0)).endAngle(Fc(a[r].endAngle??360)).padAngle(Fc(a[r].paddingAngle??0)).sortValues(Exe(a[r].sortingValues??"none"))(a[r].data.map(o=>o.value));s[r]=qe({labelMarkType:"circle",valueFormatter:o=>o.value.toLocaleString()},a[r],{data:a[r].data.map((o,l)=>qe({},o,{id:o.id??`auto-generated-pie-id-${r}-${l}`},i[l])).map((o,l)=>qe({labelMarkType:"circle"},o,{formattedValue:a[r].valueFormatter?.(qe({},o,{label:zi(o.label,"arc")}),{dataIndex:l})??o.value.toLocaleString()}))})}),{seriesOrder:t,series:s}},Lxe=e=>t=>e.data[t].color,Pxe=e=>{const{seriesOrder:t,series:a}=e;return t.reduce((s,r)=>(a[r].data.forEach((i,o)=>{const l=zi(i.label,"legend");l!==void 0&&s.push({markType:i.labelMarkType??a[r].labelMarkType,id:i.id??o,seriesId:r,color:i.color,label:l,itemId:i.id??o})}),s),[])},Dxe=e=>{const{series:t,getColor:a,identifier:s}=e;if(!s||s.dataIndex===void 0)return null;const r=t.data[s.dataIndex];if(r==null)return null;const i=zi(r.label,"tooltip"),o=qe({},r,{label:i}),l=t.valueFormatter(o,{dataIndex:s.dataIndex});return{identifier:s,color:a(s.dataIndex),label:i,value:o,formattedValue:l,markType:r.labelMarkType??t.labelMarkType}},Oxe=(e,t,a)=>qe({},e,{id:e.id??`auto-generated-id-${t}`,data:e.data.map((s,r)=>qe({},s,{color:s.color??a[r%a.length]}))});function wv(e,t){if(typeof e=="number")return e;if(e==="100%")return t;if(e.endsWith("%")){const a=Number.parseFloat(e.slice(0,e.length-1));if(!Number.isNaN(a))return a*t/100}if(e.endsWith("px")){const a=Number.parseFloat(e.slice(0,e.length-2));if(!Number.isNaN(a))return a}throw new Error(`MUI X Charts: Received an unknown value "${e}". It should be a number, or a string with a percentage value.`)}function Mxe(e,t){const{height:a,width:s}=t,{cx:r,cy:i}=e,o=Math.min(s,a)/2,l=wv(r??"50%",s),c=wv(i??"50%",a);return{cx:l,cy:c,availableRadius:o}}const Ixe=e=>{const{series:t,drawingArea:a,identifier:s,placement:r}=e;if(!s||s.dataIndex===void 0)return null;const i=t.pie?.series[s.seriesId];if(i==null)return null;const{cx:o,cy:l,availableRadius:c}=Mxe({cx:i.cx,cy:i.cy},a),{data:d,innerRadius:u=0,outerRadius:f}=i,p=Math.max(0,wv(u??0,c)),x=Math.max(0,wv(f??c,c)),v=d[s.dataIndex];if(!v)return null;const N=[[p,v.startAngle],[p,v.endAngle],[x,v.startAngle],[x,v.endAngle]].map(([E,k])=>({x:o+E*Math.sin(k),y:l-E*Math.cos(k)})),[b,C]=mv(N.map(E=>E.x)),[w,S]=mv(N.map(E=>E.y));switch(r){case"bottom":return{x:(C+b)/2,y:S};case"left":return{x:b,y:(S+w)/2};case"right":return{x:C,y:(S+w)/2};default:return{x:(C+b)/2,y:w}}},$xe={colorProcessor:Lxe,seriesProcessor:kxe,legendGetter:Pxe,tooltipGetter:Dxe,tooltipItemPositionGetter:Ixe,getSeriesWithDefaultValues:Oxe},Rxe={bar:lxe,scatter:xxe,line:Txe,pie:$xe},zxe=[bx,hx,Hf,vx];function Uxe(e){const{children:t,plugins:a=zxe,pluginParams:s={},seriesConfig:r=Rxe}=e,{contextValue:i}=Kue(a,s,r);return n.jsx(U9.Provider,{value:i,children:t})}const Rr=()=>{const e=h.useContext(U9);if(e==null)throw new Error(["MUI X Charts: Could not find the Chart context.","It looks like you rendered your component outside of a ChartDataProvider.","This can also happen if you are bundling multiple versions of the library."].join(`
`));return e};function Fxe(e){"hasPointerCapture"in e.currentTarget&&e.currentTarget.hasPointerCapture(e.pointerId)&&e.currentTarget.releasePointerCapture(e.pointerId)}const MN=(e,t)=>{const{instance:a}=Rr(),s=h.useRef(!1),r=ls(()=>{s.current=!0,a.setItemInteraction(e,{interaction:"pointer"}),a.setHighlight(e)}),i=ls(()=>{s.current=!1,a.removeItemInteraction(e),a.clearHighlight()});return h.useEffect(()=>()=>{s.current&&i()},[i]),h.useMemo(()=>({onPointerEnter:r,onPointerLeave:i,onPointerDown:Fxe}),[t,r,i])};function uq(e){return e.replace(" ","_")}const mq=va("MuiAppearingMask",["animate"]),Bxe=sn("rect")({animationName:"animate-width",animationTimingFunction:oP,animationDuration:"0s",[`&.${mq.animate}`]:{animationDuration:`${DN}ms`},"@keyframes animate-width":{from:{width:0}}});function fq(e){const t=vi(),a=kN(),s=uq(`${a}-${e.id}`);return n.jsxs(h.Fragment,{children:[n.jsx("clipPath",{id:s,children:n.jsx(Bxe,{className:e.skipAnimation?"":mq.animate,x:0,y:0,width:t.left+t.width+t.right,height:t.top+t.height+t.bottom})}),n.jsx("g",{clipPath:`url(#${s})`,children:e.children})]})}const Hxe=["skipAnimation","ownerState"];function Gxe(e){const{skipAnimation:t,ownerState:a}=e,s=dn(e,Hxe),r=Qpe(e);return n.jsx(fq,{skipAnimation:t,id:`${a.id}-area-clip`,children:n.jsx("path",qe({fill:a.gradientId?`url(#${a.gradientId})`:a.color,filter:a.isHighlighted?"brightness(140%)":a.gradientId?void 0:"brightness(120%)",opacity:a.isFaded?.3:1,stroke:"none","data-series":a.id,"data-highlighted":a.isHighlighted||void 0,"data-faded":a.isFaded||void 0},s,r))})}const Wxe=["id","classes","color","gradientId","slots","slotProps","onClick"];function qxe(e){return Ra("MuiAreaElement",e)}const Vxe=va("MuiAreaElement",["root","highlighted","faded","series"]),Yxe=e=>{const{classes:t,id:a,isFaded:s,isHighlighted:r}=e,i={root:["root",`series-${a}`,r&&"highlighted",s&&"faded"]};return $a(i,qxe,t)};function Qxe(e){const{id:t,classes:a,color:s,gradientId:r,slots:i,slotProps:o,onClick:l}=e,c=dn(e,Wxe),d=MN({type:"line",seriesId:t}),{isFaded:u,isHighlighted:f}=sq({seriesId:t}),p={id:t,classes:a,color:s,gradientId:r,isFaded:u,isHighlighted:f},x=Yxe(p),v=i?.area??Gxe,N=Tl({elementType:v,externalSlotProps:o?.area,additionalProps:qe({},d,{onClick:l,cursor:l?"pointer":"unset"}),className:x.root,ownerState:p});return n.jsx(v,qe({},c,N))}function dP(e){const t=Hn(),a=Rt(t,due);return e||a}function uP(){const e=Hn();return Rt(e,UG)}function hq(e){switch(e){case"catmullRom":return Vge.alpha(.5);case"linear":return wx;case"monotoneX":return YT;case"monotoneY":return RW;case"natural":return UW;case"step":return FW;case"stepBefore":return BW;case"stepAfter":return HW;case"bumpY":return wW;case"bumpX":return vW;default:return YT}}function Kxe(e,t){const a=Nx(),s=dr().xAxisIds[0],r=ur().yAxisIds[0],i=iP();return h.useMemo(()=>{if(a===void 0)return[];const{series:l,stackingGroups:c}=a,d=[];for(const u of c){const f=u.ids;for(let p=f.length-1;p>=0;p-=1){const x=f[p],{xAxisId:v=s,yAxisId:N=r,stackedData:b,data:C,connectNulls:w,baseline:S,curve:E,strictStepCurve:k,area:A}=l[x];if(!A||!(v in e)||!(N in t))continue;const T=e[v].scale,_=Wf(T),I=t[N].scale,R=e[v].data,U=t[N].colorScale&&i(N)||e[v].colorScale&&i(v)||void 0,D=E?.includes("step")&&!k&&ms(T),M=R?.flatMap((Q,de)=>{const Y=C[de]==null;if(D){const se=[{x:Q,y:b[de],nullData:Y,isExtension:!1}];return!Y&&(de===0||C[de-1]==null)&&se.unshift({x:(T(Q)??0)-(T.step()-T.bandwidth())/2,y:b[de],nullData:Y,isExtension:!0}),!Y&&(de===C.length-1||C[de+1]==null)&&se.push({x:(T(Q)??0)+(T.step()+T.bandwidth())/2,y:b[de],nullData:Y,isExtension:!0}),se}return{x:Q,y:b[de],nullData:Y}})??[],W=w?M.filter(Q=>!Q.nullData):M,z=Eg().x(Q=>Q.isExtension?Q.x:_(Q.x)).defined(Q=>w||!Q.nullData||!!Q.isExtension).y0(Q=>{if(typeof S=="number")return I(S);if(S==="max")return I.range()[1];if(S==="min")return I.range()[0];const de=Q.y&&I(Q.y[0]);return Number.isNaN(de)?I.range()[0]:de}).y1(Q=>Q.y&&I(Q.y[1])).curve(hq(E))(W)||"";d.push({area:l[x].area,color:l[x].color,gradientId:U,d:z,seriesId:x})}}return d},[a,s,r,e,t,i])}const Xxe=["slots","slotProps","onItemClick","skipAnimation"],Zxe=sn("g",{name:"MuiAreaPlot",slot:"Root"})({[`& .${Vxe.root}`]:{transition:"opacity 0.2s ease-in, fill 0.2s ease-in"}}),Jxe=()=>{const{xAxis:e}=dr(),{yAxis:t}=ur();return Kxe(e,t)};function e0e(e){const{slots:t,slotProps:a,onItemClick:s,skipAnimation:r}=e,i=dn(e,Xxe),o=uP(),l=dP(o||r),c=Jxe();return n.jsx(Zxe,qe({},i,{children:c.map(({d,seriesId:u,color:f,area:p,gradientId:x})=>!!p&&n.jsx(Qxe,{id:u,d,color:f,gradientId:x,slots:t,slotProps:a,onClick:s&&(v=>s(v,{type:"line",seriesId:u})),skipAnimation:l},u))}))}const t0e=["skipAnimation","ownerState"],n0e=h.forwardRef(function(t,a){const{skipAnimation:s,ownerState:r}=t,i=dn(t,t0e),o=Kpe(qe({},t,{ref:a}));return n.jsx(fq,{skipAnimation:s,id:`${r.id}-line-clip`,children:n.jsx("path",qe({stroke:r.gradientId?`url(#${r.gradientId})`:r.color,strokeWidth:2,strokeLinejoin:"round",fill:"none",filter:r.isHighlighted?"brightness(120%)":void 0,opacity:r.isFaded?.3:1,"data-series":r.id,"data-highlighted":r.isHighlighted||void 0,"data-faded":r.isFaded||void 0},i,o))})}),a0e=["id","classes","color","gradientId","slots","slotProps","onClick"];function s0e(e){return Ra("MuiLineElement",e)}const r0e=va("MuiLineElement",["root","highlighted","faded","series"]),i0e=e=>{const{classes:t,id:a,isFaded:s,isHighlighted:r}=e,i={root:["root",`series-${a}`,r&&"highlighted",s&&"faded"]};return $a(i,s0e,t)};function o0e(e){const{id:t,classes:a,color:s,gradientId:r,slots:i,slotProps:o,onClick:l}=e,c=dn(e,a0e),d=MN({type:"line",seriesId:t}),{isFaded:u,isHighlighted:f}=sq({seriesId:t}),p={id:t,classes:a,color:s,gradientId:r,isFaded:u,isHighlighted:f},x=i0e(p),v=i?.line??n0e,N=Tl({elementType:v,externalSlotProps:o?.line,additionalProps:qe({},d,{onClick:l,cursor:l?"pointer":"unset"}),className:x.root,ownerState:p});return n.jsx(v,qe({},c,N))}function l0e(e,t){const a=Nx(),s=dr().xAxisIds[0],r=ur().yAxisIds[0],i=iP();return h.useMemo(()=>{if(a===void 0)return[];const{series:l,stackingGroups:c}=a,d=[];for(const u of c){const f=u.ids;for(const p of f){const{xAxisId:x=s,yAxisId:v=r,stackedData:N,data:b,connectNulls:C,curve:w,strictStepCurve:S}=l[p];if(!(x in e)||!(v in t))continue;const E=e[x].scale,k=Wf(E),A=t[v].scale,T=e[x].data,_=t[v].colorScale&&i(v)||e[x].colorScale&&i(x)||void 0,I=w?.includes("step")&&!S&&ms(E),R=T?.flatMap((W,X)=>{const z=b[X]==null;if(I){const Q=[{x:W,y:N[X],nullData:z,isExtension:!1}];return!z&&(X===0||b[X-1]==null)&&Q.unshift({x:(E(W)??0)-(E.step()-E.bandwidth())/2,y:N[X],nullData:z,isExtension:!0}),!z&&(X===b.length-1||b[X+1]==null)&&Q.push({x:(E(W)??0)+(E.step()+E.bandwidth())/2,y:N[X],nullData:z,isExtension:!0}),Q}return{x:W,y:N[X],nullData:z}})??[],U=C?R.filter(W=>!W.nullData):R,M=XL().x(W=>W.isExtension?W.x:k(W.x)).defined(W=>C||!W.nullData||!!W.isExtension).y(W=>A(W.y[1])).curve(hq(w))(U)||"";d.push({color:l[p].color,gradientId:_,d:M,seriesId:p})}}return d},[a,s,r,e,t,i])}const c0e=["slots","slotProps","skipAnimation","onItemClick"],d0e=sn("g",{name:"MuiAreaPlot",slot:"Root"})({[`& .${r0e.root}`]:{transition:"opacity 0.2s ease-in, fill 0.2s ease-in"}}),u0e=()=>{const{xAxis:e}=dr(),{yAxis:t}=ur();return l0e(e,t)};function m0e(e){const{slots:t,slotProps:a,skipAnimation:s,onItemClick:r}=e,i=dn(e,c0e),o=uP(),l=dP(o||s),c=u0e();return n.jsx(d0e,qe({},i,{children:c.map(({d,seriesId:u,color:f,gradientId:p})=>n.jsx(o0e,{id:u,d,color:f,gradientId:p,skipAnimation:l,slots:t,slotProps:a,onClick:r&&(x=>r(x,{type:"line",seriesId:u}))},u))}))}function f0e(e){return Ra("MuiMarkElement",e)}const gq=va("MuiMarkElement",["root","highlighted","faded","animate","series"]),pq=e=>{const{classes:t,id:a,isFaded:s,isHighlighted:r,skipAnimation:i}=e,o={root:["root",`series-${a}`,r&&"highlighted",s&&"faded",i?void 0:"animate"]};return $a(o,f0e,t)},h0e=["x","y","id","classes","color","dataIndex","onClick","skipAnimation","isFaded","isHighlighted"],g0e=sn("circle")({[`&.${gq.animate}`]:{transitionDuration:`${DN}ms`,transitionProperty:"cx, cy",transitionTimingFunction:oP}});function p0e(e){const{x:t,y:a,id:s,classes:r,color:i,dataIndex:o,onClick:l,skipAnimation:c,isFaded:d=!1,isHighlighted:u=!1}=e,f=dn(e,h0e),p=Mo(),x=MN({type:"line",seriesId:s,dataIndex:o}),N=pq({id:s,classes:r,isHighlighted:u,isFaded:d,skipAnimation:c});return n.jsx(g0e,qe({},f,{cx:t,cy:a,r:5,fill:(p.vars||p).palette.background.paper,stroke:i,strokeWidth:2,className:N.root,onClick:l,cursor:l?"pointer":"unset"},x,{"data-highlighted":u||void 0,"data-faded":d||void 0}))}function xq(e){switch(e){case"circle":return 0;case"cross":return 1;case"diamond":return 2;case"square":return 3;case"star":return 4;case"triangle":return 5;case"wye":return 6;default:return 0}}const x0e=["x","y","id","classes","color","shape","dataIndex","onClick","skipAnimation","isFaded","isHighlighted"],y0e=sn("path",{name:"MuiMarkElement",slot:"Root"})(({ownerState:e,theme:t})=>({fill:(t.vars||t).palette.background.paper,stroke:e.color,strokeWidth:2,[`&.${gq.animate}`]:{transitionDuration:`${DN}ms`,transitionProperty:"transform, transform-origin",transitionTimingFunction:oP}}));function b0e(e){const{x:t,y:a,id:s,classes:r,color:i,shape:o,dataIndex:l,onClick:c,skipAnimation:d,isFaded:u=!1,isHighlighted:f=!1}=e,p=dn(e,x0e),x=MN({type:"line",seriesId:s,dataIndex:l}),v={id:s,classes:r,isHighlighted:f,isFaded:u,color:i,skipAnimation:d},N=pq(v);return n.jsx(y0e,qe({},p,{style:{transform:`translate(${t}px, ${a}px)`,transformOrigin:`${t}px ${a}px`},ownerState:v,className:N.root,d:ZL(kW[xq(o)])(),onClick:c,cursor:c?"pointer":"unset"},x,{"data-highlighted":f||void 0,"data-faded":u||void 0}))}const v0e=["slots","slotProps","skipAnimation","onItemClick"];function w0e(e){const{slots:t,slotProps:a,skipAnimation:s,onItemClick:r}=e,i=dn(e,v0e),o=uP(),l=dP(o||s),c=Nx(),{xAxis:d,xAxisIds:u}=dr(),{yAxis:f,yAxisIds:p}=ur(),x=kN(),{instance:v,store:N}=Rr(),{isFaded:b,isHighlighted:C}=Dpe(),w=Rt(N,lW),S=h.useMemo(()=>{const _={};for(const{dataIndex:I,axisId:R}of w)_[R]===void 0?_[R]=new Set([I]):_[R].add(I);return _},[w]);if(c===void 0)return null;const{series:E,stackingGroups:k}=c,A=u[0],T=p[0];return n.jsx("g",qe({},i,{children:k.flatMap(({ids:_})=>_.map(I=>{const{xAxisId:R=A,yAxisId:U=T,stackedData:D,data:M,showMark:W=!0,shape:X="circle"}=E[I];if(W===!1)return null;const z=Wf(d[R].scale),Q=f[U].scale,de=d[R].data;if(de===void 0)throw new Error(`MUI X Charts: ${R===aN?"The first `xAxis`":`The x-axis with id "${R}"`} should have data property to be able to display a line plot.`);const Y=uq(`${x}-${I}-line-clip`),se=cP(E[I],d[R],f[U]),J=t?.mark??(X==="circle"?p0e:b0e),F=C({seriesId:I}),Ne=!F&&b({seriesId:I});return n.jsx("g",{clipPath:`url(#${Y})`,"data-series":I,children:de?.map((re,he)=>{const je=M[he]==null?null:D[he][1];return{x:z(re),y:je===null?null:Q(je),position:re,value:je,index:he}}).filter(({x:re,y:he,index:je,position:De,value:Me})=>Me===null||he===null||!v.isPointInside(re,he)?!1:W===!0?!0:W({x:re,y:he,index:je,position:De,value:Me})).map(({x:re,y:he,index:je})=>n.jsx(J,qe({id:I,dataIndex:je,shape:X,color:se(je),x:re,y:he,skipAnimation:l,onClick:r&&(De=>r(De,{type:"line",seriesId:I,dataIndex:je})),isHighlighted:S[R]?.has(je)||F,isFaded:Ne},a?.mark),`${I}-${je}`))},I)}))}))}function IN(){const[e,t]=h.useState(typeof window<"u"||!1);return h.useEffect(()=>{t(!0)},[]),e}function mP(e){return typeof e=="number"&&!Number.isFinite(e)}const XT={start:0,extremities:0,end:1,middle:.5};function WS(e,t,a){return e(t)-(e.step()-e.bandwidth())/2+XT[a]*e.step()}function N0e(e){const{scale:t,tickNumber:a,valueFormatter:s,tickInterval:r,tickPlacement:i="extremities",tickLabelPlacement:o,isInside:l}=e;if(ms(t)){const p=t.domain(),x=o??"middle";if(t.bandwidth()>0){const N=typeof r=="function"&&p.filter(r)||typeof r=="object"&&r||p,b=t.range()[0]>t.range()[1],C=N.findIndex(S=>l(WS(t,S,b?"start":"end"))),w=N.findLastIndex(S=>l(WS(t,S,b?"end":"start")));return[...N.slice(C,w+1).map(S=>{const E=`${S}`;return{value:S,formattedValue:s?.(S,{location:"tick",scale:t,tickNumber:a,defaultTickLabel:E})??E,offset:WS(t,S,i),labelOffset:x==="tick"?0:t.step()*(XT[x]-XT[i])}}),...i==="extremities"&&w===p.length-1&&l(t.range()[1])?[{formattedValue:void 0,offset:t.range()[1],labelOffset:0}]:[]]}return(typeof r=="function"&&p.filter(r)||typeof r=="object"&&r||p).map(N=>{const b=`${N}`;return{value:N,formattedValue:s?.(N,{location:"tick",scale:t,tickNumber:a,defaultTickLabel:b})??b,offset:t(N),labelOffset:0}})}if(t.domain().some(mP))return[];const d=o,u=typeof r=="object"?r:j0e(t,a),f=[];for(let p=0;p<u.length;p+=1){const x=u[p],v=t(x);if(l(v)){const N=t.tickFormat(a)(x);f.push({value:x,formattedValue:s?.(x,{location:"tick",scale:t,tickNumber:a,defaultTickLabel:N})??N,offset:v,labelOffset:d==="middle"?t(u[p-1]??0)-(v+t(u[p-1]??0))/2:0})}}return f}function j0e(e,t){const a=e.domain();return a[0]===a[1]?[a[0]]:e.ticks(t)}function $N(e){const{scale:t,tickNumber:a,valueFormatter:s,tickInterval:r,tickPlacement:i="extremities",tickLabelPlacement:o,direction:l}=e,{instance:c}=Rr(),d=l==="x"?c.isXInside:c.isYInside;return h.useMemo(()=>N0e({scale:t,tickNumber:a,tickPlacement:i,tickInterval:r,tickLabelPlacement:o,valueFormatter:s,isInside:d}),[t,a,i,r,o,s,d])}function C0e(e=!1){const[t,a]=h.useState(!1);return Xa(()=>{e||a(!0)},[e]),h.useEffect(()=>{e&&a(!0)},[e]),t}const yq=typeof window<"u"&&"Intl"in window&&"Segmenter"in Intl?new Intl.Segmenter(void 0,{granularity:"grapheme"}):null;function S0e(e){return e.length}function _0e(e){const t=yq.segment(e);let a=0;for(const s of t)a+=1;return a}const A0e=yq?_0e:S0e;function T0e(e){return e*(Math.PI/180)}const bq=typeof window<"u"&&"Intl"in window&&"Segmenter"in Intl?new Intl.Segmenter(void 0,{granularity:"grapheme"}):null;function E0e(e,t){return e.slice(0,t)}function k0e(e,t){const a=bq.segment(e);let s="",r=0;for(const i of a)if(s+=i.segment,r+=1,r>=t)break;return s}const L0e=bq?k0e:E0e,l6="";function vq(e,t){const{width:a,height:s,measureText:r}=t,i=T0e(t.angle),o=r(e),l=Math.abs(o.width*Math.cos(i))+Math.abs(o.height*Math.sin(i)),c=Math.abs(o.width*Math.sin(i))+Math.abs(o.height*Math.cos(i));return l<=a&&c<=s}function wq(e,t){if(t(e))return e;let a=e,s=1,r=1/2;const i=A0e(e);let o=i,l=i,c=null;do{if(l=o,o=Math.floor(i*r),o===0)break;a=L0e(e,o).trim();const d=t(a+l6);s+=1,d?(c=a,r+=1/2**s):r-=1/2**s}while(Math.abs(o-l)!==1);return c?c+l6:""}function Nq(){return typeof window>"u"}const Bc=new Map,jq=2e3,P0e=new Set(["minWidth","maxWidth","width","minHeight","maxHeight","height","top","left","fontSize","padding","margin","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom"]);function fP(e,t){return P0e.has(e)&&t===+t?`${t}px`:t}const D0e=/([A-Z])/g;function hP(e){return String(e).replace(D0e,t=>`-${t.toLowerCase()}`)}function Cq(e){let t="";for(const a in e)if(Object.hasOwn(e,a)){const s=a,r=e[s];if(r===void 0)continue;t+=`${hP(s)}:${fP(s,r)};`}return t}const jx=(e,t={})=>{if(e==null||Nq())return{width:0,height:0};const a=String(e),s=Cq(t),r=`${a}-${s}`,i=Bc.get(r);if(i)return i;try{const o=_q(),l=document.createElementNS("http://www.w3.org/2000/svg","text");Object.keys(t).map(d=>(l.style[hP(d)]=fP(d,t[d]),d)),l.textContent=a,o.replaceChildren(l);const c=Sq(l);return Bc.set(r,c),Bc.size+1>jq&&Bc.clear(),c}catch{return{width:0,height:0}}};function O0e(e,t={}){if(Nq())return new Map(Array.from(e).map(c=>[c,{width:0,height:0}]));const a=new Map,s=[],r=Cq(t);for(const c of e){const d=`${c}-${r}`,u=Bc.get(d);u?a.set(c,u):s.push(c)}const i=_q(),o=qe({},t);Object.keys(o).map(c=>(i.style[hP(c)]=fP(c,o[c]),c));const l=[];for(const c of s){const d=document.createElementNS("http://www.w3.org/2000/svg","text");d.textContent=`${c}`,l.push(d)}i.replaceChildren(...l);for(let c=0;c<s.length;c+=1){const d=s[c],u=i.children[c],f=Sq(u),p=`${d}-${r}`;Bc.set(p,f),a.set(d,f)}return Bc.size+1>jq&&Bc.clear(),a}function Sq(e){try{const t=e.getBBox();return{width:t.width,height:t.height}}catch{const t=e.getBoundingClientRect();return{width:t.width,height:t.height}}}let Xs=null;function _q(){return Xs===null&&(Xs=document.createElementNS("http://www.w3.org/2000/svg","svg"),Xs.setAttribute("aria-hidden","true"),Xs.style.position="absolute",Xs.style.top="-20000px",Xs.style.left="0",Xs.style.padding="0",Xs.style.margin="0",Xs.style.border="none",Xs.style.pointerEvents="none",Xs.style.visibility="hidden",Xs.style.contain="strict",document.body.appendChild(Xs)),Xs}function M0e(e,t,a,s,r){const i=new Map,o=LN(r?.angle??0);let l=1,c=1;r?.textAnchor==="start"?(l=1/0,c=1):r?.textAnchor==="end"?(l=1,c=1/0):(l=2,c=2),o>90&&o<270&&([l,c]=[c,l]),s&&([l,c]=[c,l]);for(const d of e)if(d.formattedValue){const u=Math.min((d.offset+d.labelOffset)*l,(t.left+t.width+t.right-d.offset-d.labelOffset)*c),f=p=>vq(p,{width:u,height:a,angle:o,measureText:x=>jx(x,r)});i.set(d,wq(d.formattedValue.toString(),f))}return i}const c6=5;function I0e(e,t,a=0){const s=Math.min(Math.abs(a)%180,Math.abs(Math.abs(a)%180-180)%180);if(s<c6)return e;if(s>90-c6)return t;const r=Fc(s),i=Math.atan2(t,e);return r<i?e/Math.cos(r):t/Math.sin(r)}function $0e(e,{tickLabelStyle:t,tickLabelInterval:a,tickLabelMinGap:s,reverse:r,isMounted:i,isXInside:o}){if(typeof a=="function")return new Set(e.filter((f,p)=>a(f.value,p)));let l=0;const c=r?-1:1,d=e.filter(f=>{const{offset:p,labelOffset:x,formattedValue:v}=f;if(v==="")return!1;const N=p+x;return o(N)}),u=z0e(d,t);return new Set(d.filter((f,p)=>{const{offset:x,labelOffset:v}=f,N=x+v;if(p>0&&c*N<c*(l+s))return!1;const{width:b,height:C}=i?R0e(u,f):{width:0,height:0},w=I0e(b,C,t?.angle),S=N-c*w/2;return p>0&&c*S<c*(l+s)?!1:(l=N+c*w/2,!0)}))}function R0e(e,t){if(t.formattedValue===void 0)return{width:0,height:0};let a=0,s=0;for(const r of t.formattedValue.split(`
`)){const i=e.get(r);i&&(a=Math.max(a,i.width),s+=i.height)}return{width:a,height:s}}function z0e(e,t){const a=new Set;for(const s of e)s.formattedValue&&s.formattedValue.split(`
`).forEach(r=>a.add(r));return O0e(a,t)}function Aq(e){return Ra("MuiChartsAxis",e)}const Py=va("MuiChartsAxis",["root","line","tickContainer","tick","tickLabel","label","directionX","directionY","top","bottom","left","right","id"]),Tq=e=>{const{classes:t,position:a,id:s}=e,r={root:["root","directionX",a,`id-${s}`],line:["line"],tickContainer:["tickContainer"],tick:["tick"],tickLabel:["tickLabel"],label:["label"]};return $a(r,Aq,t)},ZT=3,U0e=4,Eq={disableLine:!1,disableTicks:!1,tickSize:6,tickLabelMinGap:4};function F0e({style:e,needsComputation:t,text:a}){return a.split(`
`).map(s=>qe({text:s},t?jx(s,e):{width:0,height:0}))}const B0e=["x","y","style","text","ownerState"],H0e=["angle","textAnchor","dominantBaseline"];function RN(e){const{x:t,y:a,style:s,text:r}=e,i=dn(e,B0e),o=s??{},{angle:l,textAnchor:c,dominantBaseline:d}=o,u=dn(o,H0e),f=IN(),p=h.useMemo(()=>F0e({style:u,needsComputation:f&&r.includes(`
`),text:r}),[u,r,f]);let x;switch(d){case"hanging":case"text-before-edge":x=0;break;case"central":x=(p.length-1)/2*-p[0].height;break;default:x=(p.length-1)*-p[0].height;break}return n.jsx("text",qe({},i,{transform:l?`rotate(${l}, ${t}, ${a})`:void 0,x:t,y:a,textAnchor:c,dominantBaseline:d,style:u,children:p.map((v,N)=>n.jsx("tspan",{x:t,dy:`${N===0?x:p[0].height}px`,dominantBaseline:d,children:v.text},N))}))}function kq(e){const t=LN(e);return t<=30||t>=330||t<=210&&t>=150?"middle":t<=180?"end":"start"}function Lq(e){const t=LN(e);return t<=30||t>=330?"hanging":t<=210&&t>=150?"auto":"central"}function Pq(e){switch(e){case"start":return"end";case"end":return"start";default:return e}}const G0e=["scale","tickNumber","reverse"];function Dq(e){const{xAxis:t,xAxisIds:a}=dr(),s=t[e.axisId??a[0]],{scale:r,tickNumber:i,reverse:o}=s,l=dn(s,G0e),c=yi({props:qe({},l,e),name:"MuiChartsXAxis"}),d=qe({},Eq,c),{position:u,tickLabelStyle:f,slots:p,slotProps:x}=d,v=Mo(),N=ix(),b=Tq(d),C=u==="bottom"?1:-1,w=p?.axisTick??"line",S=p?.axisTickLabel??RN,E=kq((u==="bottom"?0:180)-(f?.angle??0)),k=Lq((u==="bottom"?0:180)-(f?.angle??0)),A=Tl({elementType:S,externalSlotProps:x?.axisTickLabel,additionalProps:{style:qe({},v.typography.caption,{fontSize:12,lineHeight:1.25,textAnchor:N?Pq(E):E,dominantBaseline:k},f)},className:b.tickLabel,ownerState:{}});return{xScale:r,defaultizedProps:d,tickNumber:i,positionSign:C,classes:b,Tick:w,TickLabel:S,axisTickLabelProps:A,reverse:o}}function W0e(e){const{axisLabelHeight:t}=e,{xScale:a,defaultizedProps:s,tickNumber:r,positionSign:i,classes:o,Tick:l,TickLabel:c,axisTickLabelProps:d,reverse:u}=Dq(e),f=ix(),p=C0e(),{disableTicks:x,tickSize:v,valueFormatter:N,slotProps:b,tickInterval:C,tickLabelInterval:w,tickPlacement:S,tickLabelPlacement:E,tickLabelMinGap:k,height:A}=s,T=vi(),{instance:_}=Rr(),I=IN(),R=x?4:v,U=$N({scale:a,tickNumber:r,valueFormatter:N,tickInterval:C,tickPlacement:S,tickLabelPlacement:E,direction:"x"}),D=$0e(U,{tickLabelStyle:d.style,tickLabelInterval:w,tickLabelMinGap:k,reverse:u,isMounted:p,isXInside:_.isXInside}),M=Math.max(0,A-(t>0?t+U0e:0)-R-ZT),W=I?M0e(D,T,M,f,d.style):new Map(Array.from(D).map(X=>[X,X.formattedValue]));return n.jsx(h.Fragment,{children:U.map((X,z)=>{const{offset:Q,labelOffset:de}=X,Y=de??0,se=i*(R+ZT),J=_.isXInside(Q),F=W.get(X),Ne=D.has(X);return n.jsxs("g",{transform:`translate(${Q}, 0)`,className:o.tickContainer,children:[!x&&J&&n.jsx(l,qe({y2:i*R,className:o.tick},b?.axisTick)),F!==void 0&&Ne&&n.jsx(c,qe({x:Y,y:se},d,{text:F}))]},z)})})}const ig={start:0,extremities:0,end:1,middle:.5,tick:0};function Oq(e){const{scale:t,tickInterval:a,tickLabelPlacement:s="middle",tickPlacement:r="extremities",groups:i}=e;return h.useMemo(()=>{const o=t.domain(),l=typeof a=="function"&&o.filter(a)||typeof a=="object"&&a||o;if(t.bandwidth()>0){const c=d6(l,i,r,s,t);return c[0]&&(c[0].ignoreTick=!0),[{formattedValue:void 0,offset:t.range()[0],labelOffset:0,groupIndex:i.length-1},...c,{formattedValue:void 0,offset:t.range()[1],labelOffset:0,groupIndex:i.length-1}]}return d6(l,i,r,s,t)},[t,a,i,r,s])}function d6(e,t,a,s,r){const i=[],o=new Map;let l=0;for(let c=0;c<t.length;c+=1)for(let d=0;d<e.length;d+=1){const u=e[d],f=t[c].getValue(u,d),p=i[i.length-1];if(p?.value!==f||p?.groupIndex!==c){l=1;const v=ms(r)?r(u)-(r.step()-r.bandwidth())/2+ig[a]*r.step():r(u),N=r.step()*l*(ig[s]-ig[a]);i.push({value:f,formattedValue:`${f}`,offset:v,groupIndex:c,dataIndex:d,ignoreTick:!1,labelOffset:N}),o.has(d)||o.set(d,new Set);const b=o.get(d);for(const C of b.values())i[C].ignoreTick=!0;b.add(i.length-1)}else{l+=1;const v=r.step()*l*(ig[s]-ig[a]);p.labelOffset=v}}return i}const u6={tickSize:6},q0e=(e,t,a)=>{const s=e[t]??{},r=a??u6.tickSize,i=r*t*2+r;return qe({},u6,s,{tickSize:s.tickSize??i})};function V0e(e){const{xScale:t,defaultizedProps:a,positionSign:s,classes:r,Tick:i,TickLabel:o,axisTickLabelProps:l}=Dq(e);if(!ms(t))throw new Error("MUI X Charts: ChartsGroupedXAxis only supports the `band` and `point` scale types.");const{disableTicks:c,tickSize:d,valueFormatter:u,slotProps:f,tickInterval:p,tickPlacement:x,tickLabelPlacement:v}=a,N=a.groups,{instance:b}=Rr(),C=Oq({scale:t,tickInterval:p,tickPlacement:x,tickLabelPlacement:v,groups:N});return n.jsx(h.Fragment,{children:C.map((w,S)=>{const{offset:E,labelOffset:k}=w,A=k??0,T=b.isXInside(E),_=w.formattedValue,I=w.ignoreTick??!1,R=w.groupIndex??0,U=q0e(N,R,d),D=s*U.tickSize,M=s*(U.tickSize+ZT);return n.jsxs("g",{transform:`translate(${E}, 0)`,className:r.tickContainer,"data-group-index":R,children:[!c&&!I&&T&&n.jsx(i,qe({y2:D,className:r.tick},f?.axisTick)),_!==void 0&&n.jsx(o,qe({x:A,y:M},l,{style:qe({},l.style,U.tickLabelStyle),text:_}))]},S)})})}const Mq=sn("g",{name:"MuiChartsAxis",slot:"Root"})(({theme:e})=>({[`& .${Py.tickLabel}`]:qe({},e.typography.caption,{fill:(e.vars||e).palette.text.primary}),[`& .${Py.label}`]:{fill:(e.vars||e).palette.text.primary},[`& .${Py.line}`]:{stroke:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges",strokeWidth:1},[`& .${Py.tick}`]:{stroke:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges"}})),Y0e=["axis"],Q0e=["scale","tickNumber","reverse"],K0e=sn(Mq,{name:"MuiChartsXAxis",slot:"Root"})({});function X0e(e){let{axis:t}=e,a=dn(e,Y0e);const{scale:s}=t,r=dn(t,Q0e),i=yi({props:qe({},r,a),name:"MuiChartsXAxis"}),o=qe({},Eq,i),{position:l,labelStyle:c,offset:d,slots:u,slotProps:f,sx:p,disableLine:x,label:v,height:N}=o,b=Mo(),C=Tq(o),{left:w,top:S,width:E,height:k}=vi(),A=l==="bottom"?1:-1,T=u?.axisLine??"line",_=u?.axisLabel??RN,I=Tl({elementType:_,externalSlotProps:f?.axisLabel,additionalProps:{style:qe({},b.typography.body1,{lineHeight:1,fontSize:14,textAnchor:"middle",dominantBaseline:l==="bottom"?"text-after-edge":"text-before-edge"},c)},ownerState:{}});if(l==="none")return null;const R=v?jx(v,I.style).height:0,U=s.domain(),M=ms(s)?U.length===0:U.some(mP);let W=null;M||(W="groups"in t&&Array.isArray(t.groups)?n.jsx(V0e,qe({},a)):n.jsx(W0e,qe({},a,{axisLabelHeight:R})));const X={x:w+E/2,y:A*N};return n.jsxs(K0e,{transform:`translate(0, ${l==="bottom"?S+k+d:S-d})`,className:C.root,sx:p,children:[!x&&n.jsx(T,qe({x1:w,x2:w+E,className:C.line},f?.axisLine)),W,v&&n.jsx("g",{className:C.label,children:n.jsx(_,qe({},X,I,{text:v}))})]})}function Z0e(e){const{xAxis:t,xAxisIds:a}=dr(),s=t[e.axisId??a[0]];return s?n.jsx(X0e,qe({},e,{axis:s})):(`${e.axisId}`,null)}function J0e(e,t,a,s,r){const i=new Map,o=LN(r?.angle??0);let l=1,c=1;r?.textAnchor==="start"?(l=1/0,c=1):r?.textAnchor==="end"?(l=1,c=1/0):(l=2,c=2),o>180&&([l,c]=[c,l]),s&&([l,c]=[c,l]);for(const d of e)if(d.formattedValue){const u=Math.min((d.offset+d.labelOffset)*l,(t.top+t.height+t.bottom-d.offset-d.labelOffset)*c),f=p=>vq(p,{width:a,height:u,angle:o,measureText:x=>jx(x,r)});i.set(d,wq(d.formattedValue.toString(),f))}return i}const Iq=e=>{const{classes:t,position:a,id:s}=e,r={root:["root","directionY",a,`id-${s}`],line:["line"],tickContainer:["tickContainer"],tick:["tick"],tickLabel:["tickLabel"],label:["label"]};return $a(r,Aq,t)},JT=2,eye=2,$q={disableLine:!1,disableTicks:!1,tickSize:6},tye=["scale","tickNumber","reverse"];function Rq(e){const{yAxis:t,yAxisIds:a}=ur(),s=t[e.axisId??a[0]],{scale:r,tickNumber:i}=s,o=dn(s,tye),l=yi({props:qe({},o,e),name:"MuiChartsYAxis"}),c=qe({},$q,l),{position:d,tickLabelStyle:u,slots:f,slotProps:p}=c,x=Mo(),v=ix(),N=Iq(c),b=d==="right"?1:-1,C=typeof u?.fontSize=="number"?u.fontSize:12,w=f?.axisTick??"line",S=f?.axisTickLabel??RN,E=kq((d==="right"?-90:90)-(u?.angle??0)),k=Lq((d==="right"?-90:90)-(u?.angle??0)),A=Tl({elementType:S,externalSlotProps:p?.axisTickLabel,additionalProps:{style:qe({},x.typography.caption,{fontSize:C,textAnchor:v?Pq(E):E,dominantBaseline:k},u)},className:N.tickLabel,ownerState:{}});return{yScale:r,defaultizedProps:c,tickNumber:i,positionSign:b,classes:N,Tick:w,TickLabel:S,axisTickLabelProps:A}}function nye(e){const{axisLabelHeight:t}=e,{yScale:a,defaultizedProps:s,tickNumber:r,positionSign:i,classes:o,Tick:l,TickLabel:c,axisTickLabelProps:d}=Rq(e),u=ix(),{disableTicks:f,tickSize:p,valueFormatter:x,slotProps:v,tickPlacement:N,tickLabelPlacement:b,tickInterval:C,tickLabelInterval:w,width:S}=s,E=vi(),{instance:k}=Rr(),A=IN(),T=f?4:p,_=$N({scale:a,tickNumber:r,valueFormatter:x,tickPlacement:N,tickLabelPlacement:b,tickInterval:C,direction:"y"}),I=Math.max(0,S-(t>0?t+eye:0)-T-JT),R=A?J0e(_,E,I,u,d.style):new Map(Array.from(_).map(U=>[U,U.formattedValue]));return n.jsx(h.Fragment,{children:_.map((U,D)=>{const{offset:M,labelOffset:W,value:X}=U,z=i*(T+JT),Q=W,de=typeof w=="function"&&!w?.(X,D),Y=k.isYInside(M),se=R.get(U);return Y?n.jsxs("g",{transform:`translate(0, ${M})`,className:o.tickContainer,children:[!f&&n.jsx(l,qe({x2:i*T,className:o.tick},v?.axisTick)),se!==void 0&&!de&&n.jsx(c,qe({x:z,y:Q,text:se},d))]},D):null})})}const m6={tickSize:6},aye=(e,t,a)=>{const s=e[t]??{},r=a??m6.tickSize,i=r*t*2+r;return qe({},m6,s,{tickSize:s.tickSize??i})};function sye(e){const{yScale:t,defaultizedProps:a,positionSign:s,classes:r,Tick:i,TickLabel:o,axisTickLabelProps:l}=Rq(e);if(!ms(t))throw new Error("MUI X Charts: ChartsGroupedYAxis only supports the `band` and `point` scale types.");const{disableTicks:c,tickSize:d,valueFormatter:u,slotProps:f,tickInterval:p,tickPlacement:x,tickLabelPlacement:v}=a,N=a.groups,{instance:b}=Rr(),C=Oq({scale:t,tickInterval:p,tickPlacement:x,tickLabelPlacement:v,groups:N});return n.jsx(h.Fragment,{children:C.map((w,S)=>{const{offset:E,labelOffset:k}=w,A=k??0,T=b.isYInside(E),_=w.formattedValue,I=w.ignoreTick??!1,R=w.groupIndex??0,U=aye(N,R,d),D=s*U.tickSize,M=s*(U.tickSize+JT);return n.jsxs("g",{transform:`translate(0, ${E})`,className:r.tickContainer,"data-group-index":R,children:[!c&&!I&&T&&n.jsx(i,qe({x2:D,className:r.tick},f?.axisTick)),_!==void 0&&n.jsx(o,qe({x:M,y:A},l,{style:qe({},l.style,U.tickLabelStyle),text:_}))]},S)})})}const rye=["axis"],iye=["scale","tickNumber","reverse"],oye=sn(Mq,{name:"MuiChartsYAxis",slot:"Root"})({});function lye(e){let{axis:t}=e,a=dn(e,rye);const{scale:s}=t,r=dn(t,iye),i=IN(),o=yi({props:qe({},r,a),name:"MuiChartsYAxis"}),l=qe({},$q,o),{position:c,disableLine:d,label:u,labelStyle:f,offset:p,width:x,sx:v,slots:N,slotProps:b}=l,C=Mo(),w=Iq(l),{left:S,top:E,width:k,height:A}=vi(),T=c==="right"?1:-1,_=N?.axisLine??"line",I=N?.axisLabel??RN,R=Tl({elementType:_,externalSlotProps:b?.axisLine,additionalProps:{strokeLinecap:"square"},ownerState:{}}),U=Tl({elementType:I,externalSlotProps:b?.axisLabel,additionalProps:{style:qe({},C.typography.body1,{lineHeight:1,fontSize:14,angle:T*90,textAnchor:"middle",dominantBaseline:"text-before-edge"},f)},ownerState:{}});if(c==="none")return null;const D={x:T*x,y:E+A/2},M=u==null?0:jx(u,U.style).height,W=s.domain(),z=ms(s)?W.length===0:W.some(mP);let Q=null;return z||(Q="groups"in t&&Array.isArray(t.groups)?n.jsx(sye,qe({},a)):n.jsx(nye,qe({},a,{axisLabelHeight:M}))),n.jsxs(oye,{transform:`translate(${c==="right"?S+k+p:S-p}, 0)`,className:w.root,sx:v,children:[!d&&n.jsx(_,qe({y1:E,y2:E+A,className:w.line},R)),Q,u&&i&&n.jsx("g",{className:w.label,children:n.jsx(I,qe({},D,U,{text:u}))})]})}function cye(e){const{yAxis:t,yAxisIds:a}=ur(),s=t[e.axisId??a[0]];return s?n.jsx(lye,qe({},e,{axis:s})):(`${e.axisId}`,null)}function dye(e){const{slots:t,slotProps:a}=e,{xAxisIds:s,xAxis:r}=dr(),{yAxisIds:i,yAxis:o}=ur();return n.jsxs(h.Fragment,{children:[s.map(l=>!r[l].position||r[l].position==="none"?null:n.jsx(Z0e,{slots:t,slotProps:a,axisId:l},l)),i.map(l=>!o[l].position||o[l].position==="none"?null:n.jsx(cye,{slots:t,slotProps:a,axisId:l},l))]})}function uye(e){return Ra("MuiTypography",e)}va("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const mye={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},fye=Gce(),hye=e=>{const{align:t,gutterBottom:a,noWrap:s,paragraph:r,variant:i,classes:o}=e,l={root:["root",i,e.align!=="inherit"&&`align${Un(t)}`,a&&"gutterBottom",s&&"noWrap",r&&"paragraph"]};return $a(l,uye,o)},gye=sn("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.variant&&t[a.variant],a.align!=="inherit"&&t[`align${Un(a.align)}`],a.noWrap&&t.noWrap,a.gutterBottom&&t.gutterBottom,a.paragraph&&t.paragraph]}})(ju(({theme:e})=>({margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(e.typography).filter(([t,a])=>t!=="inherit"&&a&&typeof a=="object").map(([t,a])=>({props:{variant:t},style:a})),...Object.entries(e.palette).filter(ip()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette?.text||{}).filter(([,t])=>typeof t=="string").map(([t])=>({props:{color:`text${Un(t)}`},style:{color:(e.vars||e).palette.text[t]}})),{props:({ownerState:t})=>t.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:t})=>t.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:t})=>t.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:t})=>t.paragraph,style:{marginBottom:16}}]}))),f6={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},gP=h.forwardRef(function(t,a){const{color:s,...r}=ud({props:t,name:"MuiTypography"}),i=!mye[s],o=fye({...r,...i&&{color:s}}),{align:l="inherit",className:c,component:d,gutterBottom:u=!1,noWrap:f=!1,paragraph:p=!1,variant:x="body1",variantMapping:v=f6,...N}=o,b={...o,align:l,color:s,className:c,component:d,gutterBottom:u,noWrap:f,paragraph:p,variant:x,variantMapping:v},C=d||(p?"p":v[x]||f6[x])||"span",w=hye(b);return n.jsx(gye,{as:C,ref:a,className:kt(w.root,c),...N,ownerState:b,style:{...l!=="inherit"&&{"--Typography-textAlign":l},...N.style}})});function pye(e){return Ra("MuiChartsTooltip",e)}const Qm=va("MuiChartsTooltip",["root","paper","table","row","cell","mark","markContainer","labelCell","valueCell","axisValueCell"]),zN=e=>$a({root:["root"],paper:["paper"],table:["table"],row:["row"],cell:["cell"],mark:["mark"],markContainer:["markContainer"],labelCell:["labelCell"],valueCell:["valueCell"],axisValueCell:["axisValueCell"]},pye,e);function xye(){const e=Hn(),t=Rt(e,JG),a=Rt(e,$r),s=PN(),{xAxis:r,xAxisIds:i}=dr(),{yAxis:o,yAxisIds:l}=ur(),{zAxis:c,zAxisIds:d}=aP(),{rotationAxis:u,rotationAxisIds:f}=eq();if(!t)return null;const p=s[t.type]?.series[t.seriesId];if(!p)return null;const x=uv(p)?p.xAxisId??i[0]:void 0,v=uv(p)?p.yAxisId??l[0]:void 0,N="zAxisId"in p?p.zAxisId??d[0]:d[0],b=f[0],C=a[p.type].colorProcessor?.(p,x!==void 0?r[x]:void 0,v!==void 0?o[v]:void 0,N!==void 0?c[N]:void 0)??(()=>""),w={};return x!==void 0&&(w.x=r[x]),v!==void 0&&(w.y=o[v]),b!==void 0&&(w.rotation=u[b]),a[p.type].tooltipGetter({series:p,axesConfig:w,getColor:C,identifier:t})}const eE=sn("div",{name:"MuiChartsTooltip",slot:"Container",overridesResolver:(e,t)=>t.paper})(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,borderRadius:(e.vars||e).shape?.borderRadius,border:`solid ${(e.vars||e).palette.divider} 1px`})),tE=sn("table",{name:"MuiChartsTooltip",slot:"Table"})(({theme:e})=>({borderSpacing:0,[`& .${Qm.markContainer}`]:{display:"inline-block",width:`calc(20px + ${e.spacing(1.5)})`,verticalAlign:"middle"},"& caption":{borderBottom:`solid ${(e.vars||e).palette.divider} 1px`,padding:e.spacing(.5,1.5),textAlign:"start",whiteSpace:"nowrap","& span":{marginRight:e.spacing(1.5)}}})),nE=sn("tr",{name:"MuiChartsTooltip",slot:"Row"})(({theme:e})=>({"tr:first-of-type& td":{paddingTop:e.spacing(.5)},"tr:last-of-type& td":{paddingBottom:e.spacing(.5)}})),Xm=sn(gP,{name:"MuiChartsTooltip",slot:"Cell"})(({theme:e})=>({verticalAlign:"middle",color:(e.vars||e).palette.text.secondary,textAlign:"start",[`&.${Qm.cell}`]:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)},[`&.${Qm.labelCell}`]:{whiteSpace:"nowrap",fontWeight:e.typography.fontWeightRegular},[`&.${Qm.valueCell}, &.${Qm.axisValueCell}`]:{color:(e.vars||e).palette.text.primary,fontWeight:e.typography.fontWeightMedium},[`&.${Qm.valueCell}`]:{paddingLeft:e.spacing(1.5),paddingRight:e.spacing(1.5)},"td:first-of-type&, th:first-of-type&":{paddingLeft:e.spacing(1.5)},"td:last-of-type&, th:last-of-type&":{paddingRight:e.spacing(1.5)}}));function yye(e){return Ra("MuiChartsLabelMark",e)}const zm=va("MuiChartsLabelMark",["root","line","square","circle","mask","fill"]),bye=e=>{const{type:t}=e;return $a({root:typeof t=="function"?["root"]:["root",t],mask:["mask"],fill:["fill"]},yye,e.classes)},zq=(e,t,a)=>h.forwardRef(function(r,i){const o=yi({props:r,name:e}),l=typeof t.defaultProps=="function"?t.defaultProps(o):t.defaultProps??{},c=Nu(l,o),d=Mo(),u=t.classesResolver?.(c,d),f=h.forwardRef(a);return n.jsx(f,qe({},c,{classes:u,ref:i}))}),vye=["type","color","className","classes"],wye=sn("div",{name:"MuiChartsLabelMark",slot:"Root"})(()=>({display:"flex",width:14,height:14,[`&.${zm.line}`]:{width:16,height:"unset",alignItems:"center",[`.${zm.mask}`]:{height:4,width:"100%",borderRadius:1,overflow:"hidden"}},[`&.${zm.square}`]:{height:13,width:13,borderRadius:2,overflow:"hidden"},[`&.${zm.circle}`]:{height:15,width:15},svg:{display:"block"},[`& .${zm.mask} > *`]:{height:"100%",width:"100%"},[`& .${zm.mask}`]:{height:"100%",width:"100%"}})),Nv=zq("MuiChartsLabelMark",{defaultProps:{type:"square"},classesResolver:bye},function(t,a){const{type:s,color:r,className:i,classes:o}=t,l=dn(t,vye),c=s;return n.jsx(wye,qe({className:kt(o?.root,i),ownerState:t,"aria-hidden":"true",ref:a},l,{children:n.jsx("div",{className:o?.mask,children:typeof c=="function"?n.jsx(c,{className:o?.fill,color:r}):n.jsx("svg",{viewBox:"0 0 24 24",preserveAspectRatio:s==="line"?"none":void 0,children:s==="circle"?n.jsx("circle",{className:o?.fill,r:"12",cx:"12",cy:"12",fill:r}):n.jsx("rect",{className:o?.fill,width:"24",height:"24",fill:r})})})}))});function Nye(e){const{classes:t,sx:a}=e,s=xye(),r=zN(t);if(!s)return null;if("values"in s){const{label:d,color:u,markType:f}=s;return n.jsx(eE,{sx:a,className:r.paper,children:n.jsxs(tE,{className:r.table,children:[n.jsxs(gP,{component:"caption",children:[n.jsx("div",{className:r.markContainer,children:n.jsx(Nv,{type:f,color:u,className:r.mark})}),d]}),n.jsx("tbody",{children:s.values.map(({formattedValue:p,label:x})=>n.jsxs(nE,{className:r.row,children:[n.jsx(Xm,{className:kt(r.labelCell,r.cell),component:"th",children:x}),n.jsx(Xm,{className:kt(r.valueCell,r.cell),component:"td",children:p})]},x))})]})})}const{color:i,label:o,formattedValue:l,markType:c}=s;return n.jsx(eE,{sx:a,className:r.paper,children:n.jsx(tE,{className:r.table,children:n.jsx("tbody",{children:n.jsxs(nE,{className:r.row,children:[n.jsxs(Xm,{className:kt(r.labelCell,r.cell),component:"th",children:[n.jsx("div",{className:r.markContainer,children:n.jsx(Nv,{type:c,color:i,className:r.mark})}),o]}),n.jsx(Xm,{className:kt(r.valueCell,r.cell),component:"td",children:l})]})})})})}function jye(e){const t=Hn(),a=Rt(t,$r);return h.useMemo(()=>{const r={};return Object.keys(a).forEach(i=>{r[i]=a[i].colorProcessor}),r},[a])}const Cye=f9({themeId:Zw});function Sye(){const e=sP(),[t,a]=h.useState(null);return h.useEffect(()=>{const s=e.current;if(s===null)return()=>{};const r=o=>{o.pointerType!=="mouse"&&a(null)},i=o=>{a({pointerType:o.pointerType})};return s.addEventListener("pointerenter",i),s.addEventListener("pointerup",r),()=>{s.removeEventListener("pointerenter",i),s.removeEventListener("pointerup",r)}},[e]),t}function _ye(e){return e instanceof Date?e.toUTCString():e.toLocaleString()}const Aye="@media (pointer: fine)",Tye=()=>Cye(Aye,{defaultMatches:!0}),Uq=(e,t)=>t,Fq=(e,t)=>t;function Bq(e,t,a){return Array.isArray(a)?a.map(s=>r6(t.axis[s],e)):r6(t.axis[a],e)}const Hq=wt(gx,px,gpe,(e,t,a)=>e===null||t===null?null:ppe(a)(e,t)),Eye=wt(Hq,Wu,Uq,(e,t,a=t.axisIds[0])=>e===null?null:Bq(e,t,a)),Gq=wt(Hq,Wu,Fq,(e,t,a=t.axisIds)=>e===null?null:Bq(e,t,a));wt(Wu,Eye,Uq,(e,t,a=e.axisIds[0])=>{if(t===null||t===-1||e.axisIds.length===0)return null;const s=e.axis[a]?.data;return s?s[t]:null});wt(Wu,Gq,Fq,(e,t,a=e.axisIds)=>t===null?null:a.map((s,r)=>{const i=t[r];return i===-1?null:e.axis[s].data?.[i]}));const Wq=eN({memoizeOptions:{resultEqualityCheck:lf}})(Gq,Wu,(e,t)=>e===null?[]:t.axisIds.map((a,s)=>({axisId:a,dataIndex:e[s]})).filter(({axisId:a,dataIndex:s})=>t.axis[a].triggerTooltip&&s>=0)),kye=wt(Wq,e=>e.length>0);function qS(e,t,a){const s=e.data?.[t]??null,i=(e.valueFormatter??(o=>e.scaleType==="utc"?_ye(o):o.toLocaleString()))(s,{location:"tooltip",scale:e.scale});return{axisDirection:a,axisId:e.id,mainAxis:e,dataIndex:t,axisValue:s,axisFormattedValue:i,seriesItems:[]}}function Lye(e={}){const{multipleAxes:t,directions:a}=e,s=ype(),r=bpe(),i=vpe(),o=Hn(),l=Rt(o,aW),c=Rt(o,sW),d=Rt(o,Wq),u=PN(),{xAxis:f}=dr(),{yAxis:p}=ur(),{zAxis:x,zAxisIds:v}=aP(),{rotationAxis:N}=eq(),b=jye();if(l.length===0&&c.length===0&&d.length===0)return null;const C=[];return(a===void 0||a.includes("x"))&&l.forEach(({axisId:w,dataIndex:S})=>{!t&&C.length>1||C.push(qS(f[w],S,"x"))}),(a===void 0||a.includes("y"))&&c.forEach(({axisId:w,dataIndex:S})=>{!t&&C.length>1||C.push(qS(p[w],S,"y"))}),(a===void 0||a.includes("rotation"))&&d.forEach(({axisId:w,dataIndex:S})=>{!t&&C.length>1||C.push(qS(N[w],S,"rotation"))}),Object.keys(u).filter(bN).forEach(w=>{const S=u[w];return S?S.seriesOrder.forEach(E=>{const k=S.series[E],A=k.xAxisId??s.id,T=k.yAxisId??r.id,_=C.findIndex(({axisDirection:I,axisId:R})=>I==="x"&&R===A||I==="y"&&R===T);if(_>=0){const I="zAxisId"in k?k.zAxisId:v[0],{dataIndex:R}=C[_],U=b[w]?.(k,f[A],p[T],I?x[I]:void 0)(R)??"",D=k.data[R]??null,M=k.valueFormatter(D,{dataIndex:R}),W=zi(k.label,"tooltip")??null;C[_].seriesItems.push({seriesId:E,color:U,value:D,formattedValue:M,formattedLabel:W,markType:k.labelMarkType})}}):[]}),Object.keys(u).filter(nP).forEach(w=>{const S=u[w];return S?S.seriesOrder.forEach(E=>{const k=S.series[E],A=k.rotationAxisId??i?.id,T=C.findIndex(({axisDirection:_,axisId:I})=>_==="rotation"&&I===A);if(T>=0){const{dataIndex:_}=C[T],I=b[w]?.(k)(_)??"",R=k.data[_]??null,U=k.valueFormatter(R,{dataIndex:_}),D=zi(k.label,"tooltip")??null;C[T].seriesItems.push({seriesId:E,color:I,value:R,formattedValue:U,formattedLabel:D,markType:k.labelMarkType})}}):[]}),t?C:C.length===0?C[0]:null}function Pye(e){return Lye(qe({},e,{multipleAxes:!0}))}function Dye(e){const t=zN(e.classes),a=Pye();return a===null?null:n.jsx(eE,{sx:e.sx,className:t.paper,children:a.map(({axisId:s,mainAxis:r,axisValue:i,axisFormattedValue:o,seriesItems:l})=>n.jsxs(tE,{className:t.table,children:[i!=null&&!r.hideTooltip&&n.jsx(gP,{component:"caption",children:o}),n.jsx("tbody",{children:l.map(({seriesId:c,color:d,formattedValue:u,formattedLabel:f,markType:p})=>u==null?null:n.jsxs(nE,{className:t.row,children:[n.jsxs(Xm,{className:kt(t.labelCell,t.cell),component:"th",children:[n.jsx("div",{className:t.markContainer,children:n.jsx(Nv,{type:p,color:d,className:t.mark})}),f||null]}),n.jsx(Xm,{className:kt(t.valueCell,t.cell),component:"td",children:u})]},c))})]},s))})}var rr="top",di="bottom",ui="right",ir="left",pP="auto",Cx=[rr,di,ui,ir],jf="start",pp="end",Oye="clippingParents",qq="viewport",og="popper",Mye="reference",h6=Cx.reduce(function(e,t){return e.concat([t+"-"+jf,t+"-"+pp])},[]),Vq=[].concat(Cx,[pP]).reduce(function(e,t){return e.concat([t,t+"-"+jf,t+"-"+pp])},[]),Iye="beforeRead",$ye="read",Rye="afterRead",zye="beforeMain",Uye="main",Fye="afterMain",Bye="beforeWrite",Hye="write",Gye="afterWrite",Wye=[Iye,$ye,Rye,zye,Uye,Fye,Bye,Hye,Gye];function ko(e){return e?(e.nodeName||"").toLowerCase():null}function Dr(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function _u(e){var t=Dr(e).Element;return e instanceof t||e instanceof Element}function li(e){var t=Dr(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function xP(e){if(typeof ShadowRoot>"u")return!1;var t=Dr(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function qye(e){var t=e.state;Object.keys(t.elements).forEach(function(a){var s=t.styles[a]||{},r=t.attributes[a]||{},i=t.elements[a];!li(i)||!ko(i)||(Object.assign(i.style,s),Object.keys(r).forEach(function(o){var l=r[o];l===!1?i.removeAttribute(o):i.setAttribute(o,l===!0?"":l)}))})}function Vye(e){var t=e.state,a={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,a.popper),t.styles=a,t.elements.arrow&&Object.assign(t.elements.arrow.style,a.arrow),function(){Object.keys(t.elements).forEach(function(s){var r=t.elements[s],i=t.attributes[s]||{},o=Object.keys(t.styles.hasOwnProperty(s)?t.styles[s]:a[s]),l=o.reduce(function(c,d){return c[d]="",c},{});!li(r)||!ko(r)||(Object.assign(r.style,l),Object.keys(i).forEach(function(c){r.removeAttribute(c)}))})}}const Yye={name:"applyStyles",enabled:!0,phase:"write",fn:qye,effect:Vye,requires:["computeStyles"]};function jo(e){return e.split("-")[0]}var mu=Math.max,jv=Math.min,Cf=Math.round;function aE(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Yq(){return!/^((?!chrome|android).)*safari/i.test(aE())}function Sf(e,t,a){t===void 0&&(t=!1),a===void 0&&(a=!1);var s=e.getBoundingClientRect(),r=1,i=1;t&&li(e)&&(r=e.offsetWidth>0&&Cf(s.width)/e.offsetWidth||1,i=e.offsetHeight>0&&Cf(s.height)/e.offsetHeight||1);var o=_u(e)?Dr(e):window,l=o.visualViewport,c=!Yq()&&a,d=(s.left+(c&&l?l.offsetLeft:0))/r,u=(s.top+(c&&l?l.offsetTop:0))/i,f=s.width/r,p=s.height/i;return{width:f,height:p,top:u,right:d+f,bottom:u+p,left:d,x:d,y:u}}function yP(e){var t=Sf(e),a=e.offsetWidth,s=e.offsetHeight;return Math.abs(t.width-a)<=1&&(a=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:e.offsetLeft,y:e.offsetTop,width:a,height:s}}function Qq(e,t){var a=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(a&&xP(a)){var s=t;do{if(s&&e.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function Dl(e){return Dr(e).getComputedStyle(e)}function Qye(e){return["table","td","th"].indexOf(ko(e))>=0}function pd(e){return((_u(e)?e.ownerDocument:e.document)||window.document).documentElement}function UN(e){return ko(e)==="html"?e:e.assignedSlot||e.parentNode||(xP(e)?e.host:null)||pd(e)}function g6(e){return!li(e)||Dl(e).position==="fixed"?null:e.offsetParent}function Kye(e){var t=/firefox/i.test(aE()),a=/Trident/i.test(aE());if(a&&li(e)){var s=Dl(e);if(s.position==="fixed")return null}var r=UN(e);for(xP(r)&&(r=r.host);li(r)&&["html","body"].indexOf(ko(r))<0;){var i=Dl(r);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||t&&i.willChange==="filter"||t&&i.filter&&i.filter!=="none")return r;r=r.parentNode}return null}function Sx(e){for(var t=Dr(e),a=g6(e);a&&Qye(a)&&Dl(a).position==="static";)a=g6(a);return a&&(ko(a)==="html"||ko(a)==="body"&&Dl(a).position==="static")?t:a||Kye(e)||t}function bP(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Fg(e,t,a){return mu(e,jv(t,a))}function Xye(e,t,a){var s=Fg(e,t,a);return s>a?a:s}function Kq(){return{top:0,right:0,bottom:0,left:0}}function Xq(e){return Object.assign({},Kq(),e)}function Zq(e,t){return t.reduce(function(a,s){return a[s]=e,a},{})}var Zye=function(t,a){return t=typeof t=="function"?t(Object.assign({},a.rects,{placement:a.placement})):t,Xq(typeof t!="number"?t:Zq(t,Cx))};function Jye(e){var t,a=e.state,s=e.name,r=e.options,i=a.elements.arrow,o=a.modifiersData.popperOffsets,l=jo(a.placement),c=bP(l),d=[ir,ui].indexOf(l)>=0,u=d?"height":"width";if(!(!i||!o)){var f=Zye(r.padding,a),p=yP(i),x=c==="y"?rr:ir,v=c==="y"?di:ui,N=a.rects.reference[u]+a.rects.reference[c]-o[c]-a.rects.popper[u],b=o[c]-a.rects.reference[c],C=Sx(i),w=C?c==="y"?C.clientHeight||0:C.clientWidth||0:0,S=N/2-b/2,E=f[x],k=w-p[u]-f[v],A=w/2-p[u]/2+S,T=Fg(E,A,k),_=c;a.modifiersData[s]=(t={},t[_]=T,t.centerOffset=T-A,t)}}function ebe(e){var t=e.state,a=e.options,s=a.element,r=s===void 0?"[data-popper-arrow]":s;r!=null&&(typeof r=="string"&&(r=t.elements.popper.querySelector(r),!r)||Qq(t.elements.popper,r)&&(t.elements.arrow=r))}const tbe={name:"arrow",enabled:!0,phase:"main",fn:Jye,effect:ebe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function _f(e){return e.split("-")[1]}var nbe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function abe(e,t){var a=e.x,s=e.y,r=t.devicePixelRatio||1;return{x:Cf(a*r)/r||0,y:Cf(s*r)/r||0}}function p6(e){var t,a=e.popper,s=e.popperRect,r=e.placement,i=e.variation,o=e.offsets,l=e.position,c=e.gpuAcceleration,d=e.adaptive,u=e.roundOffsets,f=e.isFixed,p=o.x,x=p===void 0?0:p,v=o.y,N=v===void 0?0:v,b=typeof u=="function"?u({x,y:N}):{x,y:N};x=b.x,N=b.y;var C=o.hasOwnProperty("x"),w=o.hasOwnProperty("y"),S=ir,E=rr,k=window;if(d){var A=Sx(a),T="clientHeight",_="clientWidth";if(A===Dr(a)&&(A=pd(a),Dl(A).position!=="static"&&l==="absolute"&&(T="scrollHeight",_="scrollWidth")),A=A,r===rr||(r===ir||r===ui)&&i===pp){E=di;var I=f&&A===k&&k.visualViewport?k.visualViewport.height:A[T];N-=I-s.height,N*=c?1:-1}if(r===ir||(r===rr||r===di)&&i===pp){S=ui;var R=f&&A===k&&k.visualViewport?k.visualViewport.width:A[_];x-=R-s.width,x*=c?1:-1}}var U=Object.assign({position:l},d&&nbe),D=u===!0?abe({x,y:N},Dr(a)):{x,y:N};if(x=D.x,N=D.y,c){var M;return Object.assign({},U,(M={},M[E]=w?"0":"",M[S]=C?"0":"",M.transform=(k.devicePixelRatio||1)<=1?"translate("+x+"px, "+N+"px)":"translate3d("+x+"px, "+N+"px, 0)",M))}return Object.assign({},U,(t={},t[E]=w?N+"px":"",t[S]=C?x+"px":"",t.transform="",t))}function sbe(e){var t=e.state,a=e.options,s=a.gpuAcceleration,r=s===void 0?!0:s,i=a.adaptive,o=i===void 0?!0:i,l=a.roundOffsets,c=l===void 0?!0:l,d={placement:jo(t.placement),variation:_f(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,p6(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:c})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,p6(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const rbe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:sbe,data:{}};var Dy={passive:!0};function ibe(e){var t=e.state,a=e.instance,s=e.options,r=s.scroll,i=r===void 0?!0:r,o=s.resize,l=o===void 0?!0:o,c=Dr(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&d.forEach(function(u){u.addEventListener("scroll",a.update,Dy)}),l&&c.addEventListener("resize",a.update,Dy),function(){i&&d.forEach(function(u){u.removeEventListener("scroll",a.update,Dy)}),l&&c.removeEventListener("resize",a.update,Dy)}}const obe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:ibe,data:{}};var lbe={left:"right",right:"left",bottom:"top",top:"bottom"};function $b(e){return e.replace(/left|right|bottom|top/g,function(t){return lbe[t]})}var cbe={start:"end",end:"start"};function x6(e){return e.replace(/start|end/g,function(t){return cbe[t]})}function vP(e){var t=Dr(e),a=t.pageXOffset,s=t.pageYOffset;return{scrollLeft:a,scrollTop:s}}function wP(e){return Sf(pd(e)).left+vP(e).scrollLeft}function dbe(e,t){var a=Dr(e),s=pd(e),r=a.visualViewport,i=s.clientWidth,o=s.clientHeight,l=0,c=0;if(r){i=r.width,o=r.height;var d=Yq();(d||!d&&t==="fixed")&&(l=r.offsetLeft,c=r.offsetTop)}return{width:i,height:o,x:l+wP(e),y:c}}function ube(e){var t,a=pd(e),s=vP(e),r=(t=e.ownerDocument)==null?void 0:t.body,i=mu(a.scrollWidth,a.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=mu(a.scrollHeight,a.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),l=-s.scrollLeft+wP(e),c=-s.scrollTop;return Dl(r||a).direction==="rtl"&&(l+=mu(a.clientWidth,r?r.clientWidth:0)-i),{width:i,height:o,x:l,y:c}}function NP(e){var t=Dl(e),a=t.overflow,s=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(a+r+s)}function Jq(e){return["html","body","#document"].indexOf(ko(e))>=0?e.ownerDocument.body:li(e)&&NP(e)?e:Jq(UN(e))}function Bg(e,t){var a;t===void 0&&(t=[]);var s=Jq(e),r=s===((a=e.ownerDocument)==null?void 0:a.body),i=Dr(s),o=r?[i].concat(i.visualViewport||[],NP(s)?s:[]):s,l=t.concat(o);return r?l:l.concat(Bg(UN(o)))}function sE(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function mbe(e,t){var a=Sf(e,!1,t==="fixed");return a.top=a.top+e.clientTop,a.left=a.left+e.clientLeft,a.bottom=a.top+e.clientHeight,a.right=a.left+e.clientWidth,a.width=e.clientWidth,a.height=e.clientHeight,a.x=a.left,a.y=a.top,a}function y6(e,t,a){return t===qq?sE(dbe(e,a)):_u(t)?mbe(t,a):sE(ube(pd(e)))}function fbe(e){var t=Bg(UN(e)),a=["absolute","fixed"].indexOf(Dl(e).position)>=0,s=a&&li(e)?Sx(e):e;return _u(s)?t.filter(function(r){return _u(r)&&Qq(r,s)&&ko(r)!=="body"}):[]}function hbe(e,t,a,s){var r=t==="clippingParents"?fbe(e):[].concat(t),i=[].concat(r,[a]),o=i[0],l=i.reduce(function(c,d){var u=y6(e,d,s);return c.top=mu(u.top,c.top),c.right=jv(u.right,c.right),c.bottom=jv(u.bottom,c.bottom),c.left=mu(u.left,c.left),c},y6(e,o,s));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function eV(e){var t=e.reference,a=e.element,s=e.placement,r=s?jo(s):null,i=s?_f(s):null,o=t.x+t.width/2-a.width/2,l=t.y+t.height/2-a.height/2,c;switch(r){case rr:c={x:o,y:t.y-a.height};break;case di:c={x:o,y:t.y+t.height};break;case ui:c={x:t.x+t.width,y:l};break;case ir:c={x:t.x-a.width,y:l};break;default:c={x:t.x,y:t.y}}var d=r?bP(r):null;if(d!=null){var u=d==="y"?"height":"width";switch(i){case jf:c[d]=c[d]-(t[u]/2-a[u]/2);break;case pp:c[d]=c[d]+(t[u]/2-a[u]/2);break}}return c}function xp(e,t){t===void 0&&(t={});var a=t,s=a.placement,r=s===void 0?e.placement:s,i=a.strategy,o=i===void 0?e.strategy:i,l=a.boundary,c=l===void 0?Oye:l,d=a.rootBoundary,u=d===void 0?qq:d,f=a.elementContext,p=f===void 0?og:f,x=a.altBoundary,v=x===void 0?!1:x,N=a.padding,b=N===void 0?0:N,C=Xq(typeof b!="number"?b:Zq(b,Cx)),w=p===og?Mye:og,S=e.rects.popper,E=e.elements[v?w:p],k=hbe(_u(E)?E:E.contextElement||pd(e.elements.popper),c,u,o),A=Sf(e.elements.reference),T=eV({reference:A,element:S,placement:r}),_=sE(Object.assign({},S,T)),I=p===og?_:A,R={top:k.top-I.top+C.top,bottom:I.bottom-k.bottom+C.bottom,left:k.left-I.left+C.left,right:I.right-k.right+C.right},U=e.modifiersData.offset;if(p===og&&U){var D=U[r];Object.keys(R).forEach(function(M){var W=[ui,di].indexOf(M)>=0?1:-1,X=[rr,di].indexOf(M)>=0?"y":"x";R[M]+=D[X]*W})}return R}function gbe(e,t){t===void 0&&(t={});var a=t,s=a.placement,r=a.boundary,i=a.rootBoundary,o=a.padding,l=a.flipVariations,c=a.allowedAutoPlacements,d=c===void 0?Vq:c,u=_f(s),f=u?l?h6:h6.filter(function(v){return _f(v)===u}):Cx,p=f.filter(function(v){return d.indexOf(v)>=0});p.length===0&&(p=f);var x=p.reduce(function(v,N){return v[N]=xp(e,{placement:N,boundary:r,rootBoundary:i,padding:o})[jo(N)],v},{});return Object.keys(x).sort(function(v,N){return x[v]-x[N]})}function pbe(e){if(jo(e)===pP)return[];var t=$b(e);return[x6(e),t,x6(t)]}function xbe(e){var t=e.state,a=e.options,s=e.name;if(!t.modifiersData[s]._skip){for(var r=a.mainAxis,i=r===void 0?!0:r,o=a.altAxis,l=o===void 0?!0:o,c=a.fallbackPlacements,d=a.padding,u=a.boundary,f=a.rootBoundary,p=a.altBoundary,x=a.flipVariations,v=x===void 0?!0:x,N=a.allowedAutoPlacements,b=t.options.placement,C=jo(b),w=C===b,S=c||(w||!v?[$b(b)]:pbe(b)),E=[b].concat(S).reduce(function(re,he){return re.concat(jo(he)===pP?gbe(t,{placement:he,boundary:u,rootBoundary:f,padding:d,flipVariations:v,allowedAutoPlacements:N}):he)},[]),k=t.rects.reference,A=t.rects.popper,T=new Map,_=!0,I=E[0],R=0;R<E.length;R++){var U=E[R],D=jo(U),M=_f(U)===jf,W=[rr,di].indexOf(D)>=0,X=W?"width":"height",z=xp(t,{placement:U,boundary:u,rootBoundary:f,altBoundary:p,padding:d}),Q=W?M?ui:ir:M?di:rr;k[X]>A[X]&&(Q=$b(Q));var de=$b(Q),Y=[];if(i&&Y.push(z[D]<=0),l&&Y.push(z[Q]<=0,z[de]<=0),Y.every(function(re){return re})){I=U,_=!1;break}T.set(U,Y)}if(_)for(var se=v?3:1,J=function(he){var je=E.find(function(De){var Me=T.get(De);if(Me)return Me.slice(0,he).every(function(ve){return ve})});if(je)return I=je,"break"},F=se;F>0;F--){var Ne=J(F);if(Ne==="break")break}t.placement!==I&&(t.modifiersData[s]._skip=!0,t.placement=I,t.reset=!0)}}const ybe={name:"flip",enabled:!0,phase:"main",fn:xbe,requiresIfExists:["offset"],data:{_skip:!1}};function b6(e,t,a){return a===void 0&&(a={x:0,y:0}),{top:e.top-t.height-a.y,right:e.right-t.width+a.x,bottom:e.bottom-t.height+a.y,left:e.left-t.width-a.x}}function v6(e){return[rr,ui,di,ir].some(function(t){return e[t]>=0})}function bbe(e){var t=e.state,a=e.name,s=t.rects.reference,r=t.rects.popper,i=t.modifiersData.preventOverflow,o=xp(t,{elementContext:"reference"}),l=xp(t,{altBoundary:!0}),c=b6(o,s),d=b6(l,r,i),u=v6(c),f=v6(d);t.modifiersData[a]={referenceClippingOffsets:c,popperEscapeOffsets:d,isReferenceHidden:u,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":f})}const vbe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:bbe};function wbe(e,t,a){var s=jo(e),r=[ir,rr].indexOf(s)>=0?-1:1,i=typeof a=="function"?a(Object.assign({},t,{placement:e})):a,o=i[0],l=i[1];return o=o||0,l=(l||0)*r,[ir,ui].indexOf(s)>=0?{x:l,y:o}:{x:o,y:l}}function Nbe(e){var t=e.state,a=e.options,s=e.name,r=a.offset,i=r===void 0?[0,0]:r,o=Vq.reduce(function(u,f){return u[f]=wbe(f,t.rects,i),u},{}),l=o[t.placement],c=l.x,d=l.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=d),t.modifiersData[s]=o}const jbe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Nbe};function Cbe(e){var t=e.state,a=e.name;t.modifiersData[a]=eV({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const Sbe={name:"popperOffsets",enabled:!0,phase:"read",fn:Cbe,data:{}};function _be(e){return e==="x"?"y":"x"}function Abe(e){var t=e.state,a=e.options,s=e.name,r=a.mainAxis,i=r===void 0?!0:r,o=a.altAxis,l=o===void 0?!1:o,c=a.boundary,d=a.rootBoundary,u=a.altBoundary,f=a.padding,p=a.tether,x=p===void 0?!0:p,v=a.tetherOffset,N=v===void 0?0:v,b=xp(t,{boundary:c,rootBoundary:d,padding:f,altBoundary:u}),C=jo(t.placement),w=_f(t.placement),S=!w,E=bP(C),k=_be(E),A=t.modifiersData.popperOffsets,T=t.rects.reference,_=t.rects.popper,I=typeof N=="function"?N(Object.assign({},t.rects,{placement:t.placement})):N,R=typeof I=="number"?{mainAxis:I,altAxis:I}:Object.assign({mainAxis:0,altAxis:0},I),U=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,D={x:0,y:0};if(A){if(i){var M,W=E==="y"?rr:ir,X=E==="y"?di:ui,z=E==="y"?"height":"width",Q=A[E],de=Q+b[W],Y=Q-b[X],se=x?-_[z]/2:0,J=w===jf?T[z]:_[z],F=w===jf?-_[z]:-T[z],Ne=t.elements.arrow,re=x&&Ne?yP(Ne):{width:0,height:0},he=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Kq(),je=he[W],De=he[X],Me=Fg(0,T[z],re[z]),ve=S?T[z]/2-se-Me-je-R.mainAxis:J-Me-je-R.mainAxis,Be=S?-T[z]/2+se+Me+De+R.mainAxis:F+Me+De+R.mainAxis,ke=t.elements.arrow&&Sx(t.elements.arrow),fe=ke?E==="y"?ke.clientTop||0:ke.clientLeft||0:0,ne=(M=U?.[E])!=null?M:0,Ae=Q+ve-ne-fe,ye=Q+Be-ne,Ie=Fg(x?jv(de,Ae):de,Q,x?mu(Y,ye):Y);A[E]=Ie,D[E]=Ie-Q}if(l){var Ve,Te=E==="x"?rr:ir,Fe=E==="x"?di:ui,Ye=A[k],B=k==="y"?"height":"width",xe=Ye+b[Te],_e=Ye-b[Fe],ce=[rr,ir].indexOf(C)!==-1,Ee=(Ve=U?.[k])!=null?Ve:0,ae=ce?xe:Ye-T[B]-_[B]-Ee+R.altAxis,He=ce?Ye+T[B]+_[B]-Ee-R.altAxis:_e,Re=x&&ce?Xye(ae,Ye,He):Fg(x?ae:xe,Ye,x?He:_e);A[k]=Re,D[k]=Re-Ye}t.modifiersData[s]=D}}const Tbe={name:"preventOverflow",enabled:!0,phase:"main",fn:Abe,requiresIfExists:["offset"]};function Ebe(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function kbe(e){return e===Dr(e)||!li(e)?vP(e):Ebe(e)}function Lbe(e){var t=e.getBoundingClientRect(),a=Cf(t.width)/e.offsetWidth||1,s=Cf(t.height)/e.offsetHeight||1;return a!==1||s!==1}function Pbe(e,t,a){a===void 0&&(a=!1);var s=li(t),r=li(t)&&Lbe(t),i=pd(t),o=Sf(e,r,a),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(s||!s&&!a)&&((ko(t)!=="body"||NP(i))&&(l=kbe(t)),li(t)?(c=Sf(t,!0),c.x+=t.clientLeft,c.y+=t.clientTop):i&&(c.x=wP(i))),{x:o.left+l.scrollLeft-c.x,y:o.top+l.scrollTop-c.y,width:o.width,height:o.height}}function Dbe(e){var t=new Map,a=new Set,s=[];e.forEach(function(i){t.set(i.name,i)});function r(i){a.add(i.name);var o=[].concat(i.requires||[],i.requiresIfExists||[]);o.forEach(function(l){if(!a.has(l)){var c=t.get(l);c&&r(c)}}),s.push(i)}return e.forEach(function(i){a.has(i.name)||r(i)}),s}function Obe(e){var t=Dbe(e);return Wye.reduce(function(a,s){return a.concat(t.filter(function(r){return r.phase===s}))},[])}function Mbe(e){var t;return function(){return t||(t=new Promise(function(a){Promise.resolve().then(function(){t=void 0,a(e())})})),t}}function Ibe(e){var t=e.reduce(function(a,s){var r=a[s.name];return a[s.name]=r?Object.assign({},r,s,{options:Object.assign({},r.options,s.options),data:Object.assign({},r.data,s.data)}):s,a},{});return Object.keys(t).map(function(a){return t[a]})}var w6={placement:"bottom",modifiers:[],strategy:"absolute"};function N6(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return!t.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function $be(e){e===void 0&&(e={});var t=e,a=t.defaultModifiers,s=a===void 0?[]:a,r=t.defaultOptions,i=r===void 0?w6:r;return function(l,c,d){d===void 0&&(d=i);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},w6,i),modifiersData:{},elements:{reference:l,popper:c},attributes:{},styles:{}},f=[],p=!1,x={state:u,setOptions:function(C){var w=typeof C=="function"?C(u.options):C;N(),u.options=Object.assign({},i,u.options,w),u.scrollParents={reference:_u(l)?Bg(l):l.contextElement?Bg(l.contextElement):[],popper:Bg(c)};var S=Obe(Ibe([].concat(s,u.options.modifiers)));return u.orderedModifiers=S.filter(function(E){return E.enabled}),v(),x.update()},forceUpdate:function(){if(!p){var C=u.elements,w=C.reference,S=C.popper;if(N6(w,S)){u.rects={reference:Pbe(w,Sx(S),u.options.strategy==="fixed"),popper:yP(S)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(R){return u.modifiersData[R.name]=Object.assign({},R.data)});for(var E=0;E<u.orderedModifiers.length;E++){if(u.reset===!0){u.reset=!1,E=-1;continue}var k=u.orderedModifiers[E],A=k.fn,T=k.options,_=T===void 0?{}:T,I=k.name;typeof A=="function"&&(u=A({state:u,options:_,name:I,instance:x})||u)}}}},update:Mbe(function(){return new Promise(function(b){x.forceUpdate(),b(u)})}),destroy:function(){N(),p=!0}};if(!N6(l,c))return x;x.setOptions(d).then(function(b){!p&&d.onFirstUpdate&&d.onFirstUpdate(b)});function v(){u.orderedModifiers.forEach(function(b){var C=b.name,w=b.options,S=w===void 0?{}:w,E=b.effect;if(typeof E=="function"){var k=E({state:u,name:C,instance:x,options:S}),A=function(){};f.push(k||A)}})}function N(){f.forEach(function(b){return b()}),f=[]}return x}}var Rbe=[obe,Sbe,rbe,Yye,jbe,ybe,Tbe,tbe,vbe],zbe=$be({defaultModifiers:Rbe});function j6(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function Ube(e){return typeof e=="function"?e():e}const Fbe=h.forwardRef(function(t,a){const{children:s,container:r,disablePortal:i=!1}=t,[o,l]=h.useState(null),c=Eo(h.isValidElement(s)?A9(s):null,a);if(Xa(()=>{i||l(Ube(r)||document.body)},[r,i]),Xa(()=>{if(o&&!i)return j6(a,o),()=>{j6(a,null)}},[a,o,i]),i){if(h.isValidElement(s)){const d={ref:c};return h.cloneElement(s,d)}return s}return o&&Mi.createPortal(s,o)});function Bbe(e){return Ra("MuiPopper",e)}va("MuiPopper",["root"]);function Hbe(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function rE(e){return typeof e=="function"?e():e}function Gbe(e){return e.nodeType!==void 0}const Wbe=e=>{const{classes:t}=e;return $a({root:["root"]},Bbe,t)},qbe={},Vbe=h.forwardRef(function(t,a){const{anchorEl:s,children:r,direction:i,disablePortal:o,modifiers:l,open:c,placement:d,popperOptions:u,popperRef:f,slotProps:p={},slots:x={},TransitionProps:v,ownerState:N,...b}=t,C=h.useRef(null),w=Eo(C,a),S=h.useRef(null),E=Eo(S,f),k=h.useRef(E);Xa(()=>{k.current=E},[E]),h.useImperativeHandle(f,()=>S.current,[]);const A=Hbe(d,i),[T,_]=h.useState(A),[I,R]=h.useState(rE(s));h.useEffect(()=>{S.current&&S.current.forceUpdate()}),h.useEffect(()=>{s&&R(rE(s))},[s]),Xa(()=>{if(!I||!c)return;const X=de=>{_(de.placement)};let z=[{name:"preventOverflow",options:{altBoundary:o}},{name:"flip",options:{altBoundary:o}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:de})=>{X(de)}}];l!=null&&(z=z.concat(l)),u&&u.modifiers!=null&&(z=z.concat(u.modifiers));const Q=zbe(I,C.current,{placement:A,...u,modifiers:z});return k.current(Q),()=>{Q.destroy(),k.current(null)}},[I,o,l,c,u,A]);const U={placement:T};v!==null&&(U.TransitionProps=v);const D=Wbe(t),M=x.root??"div",W=Tl({elementType:M,externalSlotProps:p.root,externalForwardedProps:b,additionalProps:{role:"tooltip",ref:w},ownerState:t,className:D.root});return n.jsx(M,{...W,children:typeof r=="function"?r(U):r})}),Ybe=h.forwardRef(function(t,a){const{anchorEl:s,children:r,container:i,direction:o="ltr",disablePortal:l=!1,keepMounted:c=!1,modifiers:d,open:u,placement:f="bottom",popperOptions:p=qbe,popperRef:x,style:v,transition:N=!1,slotProps:b={},slots:C={},...w}=t,[S,E]=h.useState(!0),k=()=>{E(!1)},A=()=>{E(!0)};if(!c&&!u&&(!N||S))return null;let T;if(i)T=i;else if(s){const R=rE(s);T=R&&Gbe(R)?LT(R).body:LT(null).body}const _=!u&&c&&(!N||S)?"none":void 0,I=N?{in:u,onEnter:k,onExited:A}:void 0;return n.jsx(Fbe,{disablePortal:l,container:T,children:n.jsx(Vbe,{anchorEl:s,direction:o,disablePortal:l,modifiers:d,ref:a,open:N?!S:u,placement:f,popperOptions:p,popperRef:x,slotProps:b,slots:C,...w,style:{position:"fixed",top:0,left:0,display:_,...v},TransitionProps:I,children:r})})}),Qbe=sn(Ybe,{name:"MuiPopper",slot:"Root"})({}),Kbe=h.forwardRef(function(t,a){const s=ix(),r=ud({props:t,name:"MuiPopper"}),{anchorEl:i,component:o,components:l,componentsProps:c,container:d,disablePortal:u,keepMounted:f,modifiers:p,open:x,placement:v,popperOptions:N,popperRef:b,transition:C,slots:w,slotProps:S,...E}=r,k=w?.root??l?.Root,A={anchorEl:i,container:d,disablePortal:u,keepMounted:f,modifiers:p,open:x,placement:v,popperOptions:N,popperRef:b,transition:C,...E};return n.jsx(Qbe,{as:o,direction:s?"rtl":"ltr",slots:{root:k},slotProps:S??c,...A,ref:a})});function Xbe(e){const{children:t,defer:a=!1,fallback:s=null}=e,[r,i]=h.useState(!1);return Xa(()=>{a||i(!0)},[a]),h.useEffect(()=>{a&&i(!0)},[a]),r?t:s}function C6(e){let t,a;const s=()=>{a=null,e(...t)};function r(...i){t=i,a||(a=requestAnimationFrame(s))}return r.clear=()=>{a&&(cancelAnimationFrame(a),a=null)},r}function Zbe(){const e=Hn(),t=Rt(e,JW),a=Rt(e,Io);return t!==void 0?"polar":a!==void 0?"cartesian":"none"}const Jbe=["trigger","position","anchor","classes","children"],S6=()=>!1;function eve(e,t,a){return a?S6:e==="item"?mge:t==="polar"?kye:t==="cartesian"?xge:S6}const tve=sn(Kbe,{name:"MuiChartsTooltip",slot:"Root"})(({theme:e})=>({pointerEvents:"none",zIndex:e.zIndex.modal}));function nve(e){const t=yi({props:e,name:"MuiChartsTooltipContainer"}),{trigger:a="axis",position:s,anchor:r="pointer",classes:i,children:o}=t,l=dn(t,Jbe),c=sP(),d=zN(i),u=Sye(),f=Tye(),p=h.useRef(null),x=tN(()=>({x:0,y:0})),v=Zbe(),N=Hn(),b=Rt(N,Sge),C=Rt(N,eve(a,v,b)),S=Rt(N,xx)==="keyboard"?"node":r,E=Rt(N,a==="item"&&S==="node"?fge:()=>null,s);h.useEffect(()=>{const I=c.current;if(I===null)return()=>{};if(E!==null){const D=C6(()=>{x.current={x:I.getBoundingClientRect().left+(E?.x??0),y:I.getBoundingClientRect().top+(E?.y??0)},p.current?.update()});return D(),()=>D.clear()}const R=C6((D,M)=>{x.current={x:D,y:M},p.current?.update()}),U=D=>{R(D.clientX,D.clientY)};return I.addEventListener("pointerdown",U),I.addEventListener("pointermove",U),I.addEventListener("pointerenter",U),()=>{I.removeEventListener("pointerdown",U),I.removeEventListener("pointermove",U),I.removeEventListener("pointerenter",U),R.clear()}},[c,x,E]);const k=h.useMemo(()=>({getBoundingClientRect:()=>({x:x.current.x,y:x.current.y,top:x.current.y,left:x.current.x,right:x.current.x,bottom:x.current.y,width:0,height:0,toJSON:()=>""})}),[x]),A=u?.pointerType==="mouse"||f,T=u?.pointerType==="touch"||!f,_=h.useMemo(()=>[{name:"offset",options:{offset:()=>T?[0,64]:[0,8]}},...A?[]:[{name:"flip",options:{fallbackPlacements:["top-end","top-start","bottom-end","bottom"]}}],{name:"preventOverflow",options:{altAxis:!0}}],[A,T]);return a==="none"?null:n.jsx(Xbe,{children:C&&n.jsx(tve,qe({},l,{className:d?.root,open:C,placement:l.placement??s??(A?"right-start":"top"),popperRef:p,anchorEl:k,modifiers:_,children:o}))})}function ave(e){const{classes:t,trigger:a="axis"}=e,s=zN(t);return n.jsx(nve,qe({},e,{classes:t,children:a==="axis"?n.jsx(Dye,{classes:s}):n.jsx(Nye,{classes:s})}))}const sve=e=>({type:"series",color:e.color,label:e.label,seriesId:e.seriesId,itemId:e.itemId});function rve(e){return Ra("MuiChartsLegend",e)}const ive=e=>{const{classes:t,direction:a}=e;return $a({root:["root",a],item:["item"],mark:["mark"],label:["label"],series:["series"]},rve,t)},_6=va("MuiChartsLegend",["root","item","series","mark","label","vertical","horizontal"]),ove=["slots","slotProps"],lve=["ownerState"],cve=(e,t,a,s)=>{function r(i,o){const l=yi({props:i,name:e}),c=typeof a.defaultProps=="function"?a.defaultProps(l):a.defaultProps??{},d=Nu(c,l),u=d,{slots:f,slotProps:p}=u,x=dn(u,ove),v=Mo(),N=a.classesResolver?.(d,v),b=f?.[t]??s,C=a.propagateSlots&&!f?.[t],w=Tl({elementType:b,externalSlotProps:p?.[t],additionalProps:qe({},x,{classes:N},C&&{slots:f,slotProps:p}),ownerState:{}}),S=dn(w,lve),E=qe({},S);for(const k of a.omitProps??[])delete E[k];return n.jsx(b,qe({},E,{ref:o}))}return h.forwardRef(r)};function dve(e){return Ra("MuiChartsLabel",e)}va("MuiChartsLabel",["root"]);const uve=e=>$a({root:["root"]},dve,e.classes),mve=["children","className","classes"],fve=zq("MuiChartsLabel",{classesResolver:uve},function(t,a){const{children:s,className:r,classes:i}=t,o=dn(t,mve);return n.jsx("span",qe({className:kt(i?.root,r),ref:a},o,{children:s}))}),hve=["direction","onItemClick","className","classes"],gve=sn("ul",{name:"MuiChartsLegend",slot:"Root"})(({ownerState:e,theme:t})=>qe({},t.typography.caption,{color:(t.vars||t).palette.text.primary,lineHeight:"100%",display:"flex",flexDirection:e.direction==="vertical"?"column":"row",alignItems:e.direction==="vertical"?void 0:"center",flexShrink:0,gap:t.spacing(2),listStyleType:"none",paddingInlineStart:0,marginBlock:t.spacing(1),marginInline:t.spacing(1),flexWrap:"wrap",li:{display:e.direction==="horizontal"?"inline-flex":void 0},[`button.${_6.series}`]:{background:"none",border:"none",padding:0,fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",letterSpacing:"inherit",color:"inherit"},[`& .${_6.series}`]:{display:e.direction==="vertical"?"flex":"inline-flex",alignItems:"center",gap:t.spacing(1)},gridArea:"legend"})),pve=cve("MuiChartsLegend","legend",{defaultProps:{direction:"horizontal"},omitProps:["position"],classesResolver:ive},h.forwardRef(function(t,a){const s=Mpe(),{onItemClick:r,className:i,classes:o}=t,l=dn(t,hve);if(s.items.length===0)return null;const c=r?"button":"div";return n.jsx(gve,qe({className:kt(o?.root,i),ref:a},l,{ownerState:t,children:s.items.map((d,u)=>n.jsx("li",{className:o?.item,"data-series":d.id,children:n.jsxs(c,{className:o?.series,role:r?"button":void 0,type:r?"button":void 0,onClick:r?(f=>r(f,sve(d),u)):void 0,children:[n.jsx(Nv,{className:o?.mark,color:d.color,type:d.markType}),n.jsx(fve,{className:o?.label,children:d.label})]})},d.id))}))}));function xve(e){return Ra("MuiChartsAxisHighlight",e)}va("MuiChartsAxisHighlight",["root"]);const Cv=sn("path",{name:"MuiChartsAxisHighlight",slot:"Root"})(({theme:e})=>({pointerEvents:"none",variants:[{props:{axisHighlight:"band"},style:qe({fill:"white",fillOpacity:.1},e.applyStyles("light",{fill:"gray"}))},{props:{axisHighlight:"line"},style:qe({strokeDasharray:"5 2",stroke:"#ffffff"},e.applyStyles("light",{stroke:"#000000"}))}]}));function yve(e){const{type:t,classes:a}=e,{left:s,width:r}=vi(),i=Hn(),o=Rt(i,Age),l=Rt(i,Gs);return o.length===0?null:o.map(({axisId:c,value:d})=>{const f=l.axis[c].scale,p=Wf(f),x=t==="band"&&d!==null&&ms(f);return n.jsxs(h.Fragment,{children:[x&&f(d)!==void 0&&n.jsx(Cv,{d:`M ${s} ${f(d)-(f.step()-f.bandwidth())/2} l 0 ${f.step()} l ${r} 0 l 0 ${-f.step()} Z`,className:a.root,ownerState:{axisHighlight:"band"}}),t==="line"&&d!==null&&n.jsx(Cv,{d:`M ${s} ${p(d)} L ${s+r} ${p(d)}`,className:a.root,ownerState:{axisHighlight:"line"}})]},`${c}-${d}`)})}function bve(e){const{type:t,classes:a}=e,{top:s,height:r}=vi(),i=Hn(),o=Rt(i,_ge),l=Rt(i,Hs);return o.length===0?null:o.map(({axisId:c,value:d})=>{const f=l.axis[c].scale,p=Wf(f),x=t==="band"&&d!==null&&ms(f);return n.jsxs(h.Fragment,{children:[x&&f(d)!==void 0&&n.jsx(Cv,{d:`M ${f(d)-(f.step()-f.bandwidth())/2} ${s} l ${f.step()} 0 l 0 ${r} l ${-f.step()} 0 Z`,className:a.root,ownerState:{axisHighlight:"band"}}),t==="line"&&d!==null&&n.jsx(Cv,{d:`M ${p(d)} ${s} L ${p(d)} ${s+r}`,className:a.root,ownerState:{axisHighlight:"line"}})]},`${c}-${d}`)})}const vve=()=>$a({root:["root"]},xve);function wve(e){const{x:t,y:a}=e,s=vve();return n.jsxs(h.Fragment,{children:[t&&t!=="none"&&n.jsx(bve,{type:t,classes:s}),a&&a!=="none"&&n.jsx(yve,{type:a,classes:s})]})}function Nve(e){const{id:t,offset:a}=e,{left:s,top:r,width:i,height:o}=vi(),l=qe({top:0,right:0,bottom:0,left:0},a);return n.jsx("clipPath",{id:t,children:n.jsx("rect",{x:s-l.left,y:r-l.top,width:i+l.left+l.right,height:o+l.top+l.bottom})})}const jve=parseInt(h.version,10),Cve=["x","y","id","classes","color","shape"];function Sve(e){return Ra("MuiHighlightElement",e)}va("MuiHighlightElement",["root"]);const _ve=e=>{const{classes:t,id:a}=e,s={root:["root",`series-${a}`]};return $a(s,Sve,t)};function Ave(e){const{x:t,y:a,color:s,shape:r}=e,i=dn(e,Cve),o=_ve(e),l=r==="circle"?"circle":"path",c=r==="circle"?{cx:0,cy:0,r:i.r===void 0?5:i.r}:{d:ZL(kW[xq(r)])()},d=jve>18?{transformOrigin:`${t} ${a}`}:{"transform-origin":`${t} ${a}`};return n.jsx(l,qe({pointerEvents:"none",className:o.root,transform:`translate(${t} ${a})`,fill:s},d,c,i))}const Tve=["slots","slotProps"];function Eve(e){const{slots:t,slotProps:a}=e,s=dn(e,Tve),r=Nx(),{xAxis:i,xAxisIds:o}=dr(),{yAxis:l,yAxisIds:c}=ur(),{instance:d}=Rr(),u=Hn(),f=Rt(u,lW);if(f.length===0||r===void 0)return null;const{series:p,stackingGroups:x}=r,v=o[0],N=c[0],b=t?.lineHighlight??Ave;return n.jsx("g",qe({},s,{children:f.flatMap(({dataIndex:C,axisId:w})=>x.flatMap(({ids:S})=>S.flatMap(E=>{const{xAxisId:k=v,yAxisId:A=N,stackedData:T,data:_,disableHighlight:I,shape:R="circle"}=p[E];if(I||_[C]==null||w!==k)return null;const U=Wf(i[k].scale),D=l[A].scale,M=i[k].data;if(M===void 0)throw new Error(`MUI X Charts: ${k===aN?"The first `xAxis`":`The x-axis with id "${k}"`} should have data property to be able to display a line plot.`);const W=U(M[C]),X=D(T[C][1]);if(!d.isPointInside(W,X))return null;const z=cP(p[E],i[k],l[A]);return n.jsx(b,qe({id:E,color:z(C),x:W,y:X,shape:R},a?.lineHighlight),`${E}`)})))}))}function kve(e){return Ra("MuiChartsGrid",e)}const A6=va("MuiChartsGrid",["root","line","horizontalLine","verticalLine"]),Lve=sn("g",{name:"MuiChartsGrid",slot:"Root",overridesResolver:(e,t)=>[{[`&.${A6.verticalLine}`]:t.verticalLine},{[`&.${A6.horizontalLine}`]:t.horizontalLine},t.root]})({}),tV=sn("line",{name:"MuiChartsGrid",slot:"Line"})(({theme:e})=>({stroke:(e.vars||e).palette.divider,shapeRendering:"crispEdges",strokeWidth:1}));function Pve(e){const{instance:t}=Rr(),{axis:a,start:s,end:r,classes:i}=e,{scale:o,tickNumber:l,tickInterval:c}=a,d=$N({scale:o,tickNumber:l,tickInterval:c,direction:"x"});return n.jsx(h.Fragment,{children:d.map(({value:u,offset:f})=>t.isXInside(f)?n.jsx(tV,{y1:s,y2:r,x1:f,x2:f,className:i.verticalLine},`vertical-${u?.getTime?.()??u}`):null)})}function Dve(e){const{instance:t}=Rr(),{axis:a,start:s,end:r,classes:i}=e,{scale:o,tickNumber:l,tickInterval:c}=a,d=$N({scale:o,tickNumber:l,tickInterval:c,direction:"y"});return n.jsx(h.Fragment,{children:d.map(({value:u,offset:f})=>t.isYInside(f)?n.jsx(tV,{y1:f,y2:f,x1:s,x2:r,className:i.horizontalLine},`horizontal-${u?.getTime?.()??u}`):null)})}const Ove=["vertical","horizontal"],Mve=({classes:e})=>$a({root:["root"],verticalLine:["line","verticalLine"],horizontalLine:["line","horizontalLine"]},kve,e);function Ive(e){const t=yi({props:e,name:"MuiChartsGrid"}),a=vi(),{vertical:s,horizontal:r}=t,i=dn(t,Ove),{xAxis:o,xAxisIds:l}=dr(),{yAxis:c,yAxisIds:d}=ur(),u=Mve(t),f=c[d[0]],p=o[l[0]];return n.jsxs(Lve,qe({},i,{className:u.root,children:[s&&n.jsx(Pve,{axis:p,start:a.top,end:a.height+a.top,classes:u}),r&&n.jsx(Dve,{axis:f,start:a.left,end:a.width+a.left,classes:u})]}))}const $ve=["message"],Rve=sn("text")(({theme:e})=>qe({},e.typography.body2,{stroke:"none",fill:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges",textAnchor:"middle",dominantBaseline:"middle"}));function zve(e){const{message:t}=e,a=dn(e,$ve),{top:s,left:r,height:i,width:o}=vi(),{localeText:l}=dq();return n.jsx(Rve,qe({x:r+o/2,y:s+i/2},a,{children:t??l.loading}))}const Uve=["message"],Fve=sn("text")(({theme:e})=>qe({},e.typography.body2,{stroke:"none",fill:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges",textAnchor:"middle",dominantBaseline:"middle"}));function Bve(e){const{message:t}=e,a=dn(e,Uve),{top:s,left:r,height:i,width:o}=vi(),{localeText:l}=dq();return n.jsx(Fve,qe({x:r+o/2,y:s+i/2},a,{children:t??l.noData}))}function Hve(){const e=PN();return Object.values(e).every(t=>{if(!t)return!0;const{series:a,seriesOrder:s}=t;return s.every(r=>{const i=a[r];return i.type==="sankey"?i.data.links.length===0:i.data.length===0})})}function Gve(e){const t=Hve();if(e.loading){const a=e.slots?.loadingOverlay??zve;return n.jsx(a,qe({},e.slotProps?.loadingOverlay))}if(t){const a=e.slots?.noDataOverlay??Bve;return n.jsx(a,qe({},e.slotProps?.noDataOverlay))}return null}const Wve=[bx,yx,hx,Hf,vx,NN],qve=["xAxis","yAxis","series","width","height","margin","colors","dataset","sx","onAreaClick","onLineClick","onMarkClick","axisHighlight","disableLineItemHighlight","hideLegend","grid","children","slots","slotProps","skipAnimation","loading","highlightedItem","onHighlightChange","className","showToolbar","brushConfig"],Vve=e=>{const{xAxis:t,yAxis:a,series:s,width:r,height:i,margin:o,colors:l,dataset:c,sx:d,onAreaClick:u,onLineClick:f,onMarkClick:p,axisHighlight:x,disableLineItemHighlight:v,grid:N,children:b,slots:C,slotProps:w,skipAnimation:S,loading:E,highlightedItem:k,onHighlightChange:A,className:T,brushConfig:_}=e,I=dn(e,qve),U=`${Xw()}-clip-path`,D=h.useMemo(()=>s.map(je=>qe({disableHighlight:!!v,type:"line"},je)),[v,s]),M=qe({},I,{series:D,width:r,height:i,margin:o,colors:l,dataset:c,xAxis:t??[{id:aN,scaleType:"point",data:Array.from({length:Math.max(...s.map(je=>(je.data??c??[]).length))},(je,De)=>De)}],yAxis:a,highlightedItem:k,onHighlightChange:A,disableAxisListener:w?.tooltip?.trigger!=="axis"&&x?.x==="none"&&x?.y==="none",className:T,skipAnimation:S,brushConfig:_,plugins:Wve}),W={vertical:N?.vertical,horizontal:N?.horizontal},X={clipPath:`url(#${U})`},z={id:U},Q={slots:C,slotProps:w,onItemClick:u},de={slots:C,slotProps:w,onItemClick:f},Y={slots:C,slotProps:w,onItemClick:p,skipAnimation:S},se={slots:C,slotProps:w,loading:E},J={slots:C,slotProps:w},F=qe({x:"line"},x),Ne={slots:C,slotProps:w},re={slots:C,slotProps:w};return{chartsWrapperProps:{sx:d,legendPosition:e.slotProps?.legend?.position,legendDirection:e.slotProps?.legend?.direction,hideLegend:e.hideLegend??!1},chartContainerProps:M,gridProps:W,clipPathProps:z,clipPathGroupProps:X,areaPlotProps:Q,linePlotProps:de,markPlotProps:Y,overlayProps:se,chartsAxisProps:J,axisHighlightProps:F,lineHighlightPlotProps:Ne,legendProps:re,children:b}};function Yve(e,t,a,s,r,i,o,l,c,d,u,f=1/0,p=1){const x=s.copy(),v=r.copy();x.range([0,1]),v.range([0,1]);const N=function(_){const I=x(a[_].x),R=v(a[_].y);return I>=i&&I<=o&&R>=l&&R<=c},b=s.range()[1]-s.range()[0],C=r.range()[1]-r.range()[0],w=b*b,S=C*C;function E(T,_){return w*T*T+S*_*_}const k=x(T6(s,d,T=>a[T]?.x)),A=v(T6(r,u,T=>a[T]?.y));return e.neighbors(k,A,p,f!=null?f*f:1/0,N,E)}function T6(e,t,a){if(ms(e)){const s=e.bandwidth()===0?Math.floor((t-Math.min(...e.range())+e.step()/2)/e.step()):Math.floor((t-Math.min(...e.range()))/e.step());return a(s)}return e.invert(t)}const FN=({svgRef:e,params:t,store:a,instance:s})=>{const{disableVoronoi:r,voronoiMaxRadius:i,onItemClick:o}=t,l=Rt(a,cr),{axis:c,axisIds:d}=Rt(a,Hs),{axis:u,axisIds:f}=Rt(a,Gs),p=Rt(a,UG),{series:x,seriesOrder:v}=Rt(a,da)?.scatter??{},N=Rt(a,p?Xhe:Zhe),b=d[0],C=f[0];Xa(()=>{a.set("voronoi",{isVoronoiEnabled:!r})},[a,r]),h.useEffect(()=>{if(e.current===null||r)return;const E=e.current;function k(W){const X=hp(E,W);if(!s.isPointInside(X.x,X.y))return"outside-chart";let z;for(const Q of v??[]){const de=(x??{})[Q],Y=N.get(Q);if(!Y)continue;const se=de.xAxisId??b,J=de.yAxisId??C,F=Y$(a.getSnapshot(),se),Ne=Y$(a.getSnapshot(),J),re=i==="item"?de.markerSize:i,he=(F?.start??0)/100,je=(F?.end??100)/100,De=(Ne?.start??0)/100,Me=(Ne?.end??100)/100,ve=c[se].scale,Be=u[J].scale,ke=Yve(Y,l,de.data,ve,Be,he,je,De,Me,X.x,X.y,re)[0];if(ke===void 0)continue;const fe=de.data[ke],ne=ve(fe.x),Ae=Be(fe.y),ye=(ne-X.x)**2+(Ae-X.y)**2;(z===void 0||ye<z.distanceSq)&&(z={dataIndex:ke,seriesId:Q,distanceSq:ye})}return z===void 0?"no-point-found":{seriesId:z.seriesId,dataIndex:z.dataIndex}}const A=s.addInteractionListener("moveEnd",W=>{W.detail.activeGestures.pan||(s.cleanInteraction?.(),s.clearHighlight?.())}),T=s.addInteractionListener("panEnd",W=>{W.detail.activeGestures.move||(s.cleanInteraction?.(),s.clearHighlight?.())}),_=s.addInteractionListener("quickPressEnd",W=>{!W.detail.activeGestures.move&&!W.detail.activeGestures.pan&&(s.cleanInteraction?.(),s.clearHighlight?.())}),I=W=>{const X=k(W.detail.srcEvent);if(X==="outside-chart"){s.cleanInteraction?.(),s.clearHighlight?.();return}if(X==="outside-voronoi-max-radius"||X==="no-point-found"){s.removeItemInteraction?.(),s.clearHighlight?.();return}const{seriesId:z,dataIndex:Q}=X;s.setItemInteraction?.({type:"scatter",seriesId:z,dataIndex:Q},{interaction:"pointer"}),s.setHighlight?.({seriesId:z,dataIndex:Q})},R=s.addInteractionListener("tap",W=>{const X=k(W.detail.srcEvent);if(typeof X!="string"&&o){const{seriesId:z,dataIndex:Q}=X;o(W.detail.srcEvent,{type:"scatter",seriesId:z,dataIndex:Q})}}),U=s.addInteractionListener("move",I),D=s.addInteractionListener("pan",I),M=s.addInteractionListener("quickPress",I);return()=>{R.cleanup(),U.cleanup(),A.cleanup(),D.cleanup(),T.cleanup(),M.cleanup(),_.cleanup()}},[e,u,c,i,o,r,l,s,v,x,N,b,C,a]);const w=ls(()=>{a.set("voronoi",{isVoronoiEnabled:!0})}),S=ls(()=>{a.set("voronoi",{isVoronoiEnabled:!1})});return{instance:{enableVoronoi:w,disableVoronoi:S}}};FN.getDefaultizedParams=({params:e})=>qe({},e,{disableVoronoi:e.disableVoronoi??!e.series.some(t=>t.type==="scatter")});FN.getInitialState=e=>({voronoi:{isVoronoiEnabled:!e.disableVoronoi}});FN.params={disableVoronoi:!0,voronoiMaxRadius:!0,onItemClick:!0};const nV=[bx,yx,hx,Hf,vx,FN,NN],Qve=["width","height","margin","children","series","colors","dataset","desc","onAxisClick","highlightedAxis","onHighlightedAxisChange","disableVoronoi","voronoiMaxRadius","onItemClick","disableAxisListener","highlightedItem","onHighlightChange","sx","title","xAxis","yAxis","zAxis","rotationAxis","radiusAxis","skipAnimation","seriesConfig","plugins","localeText","slots","slotProps","experimentalFeatures","enableKeyboardNavigation","brushConfig"],Kve=(e,t)=>{const a=e,{width:s,height:r,margin:i,children:o,series:l,colors:c,dataset:d,desc:u,onAxisClick:f,highlightedAxis:p,onHighlightedAxisChange:x,disableVoronoi:v,voronoiMaxRadius:N,onItemClick:b,disableAxisListener:C,highlightedItem:w,onHighlightChange:S,sx:E,title:k,xAxis:A,yAxis:T,zAxis:_,rotationAxis:I,radiusAxis:R,skipAnimation:U,seriesConfig:D,plugins:M,localeText:W,slots:X,slotProps:z,experimentalFeatures:Q,enableKeyboardNavigation:de,brushConfig:Y}=a,se=dn(a,Qve),J=qe({title:k,desc:u,sx:E,ref:t},se);return{chartDataProviderProps:{margin:i,series:l,colors:c,dataset:d,disableAxisListener:C,highlightedItem:w,onHighlightChange:S,onAxisClick:f,highlightedAxis:p,onHighlightedAxisChange:x,disableVoronoi:v,voronoiMaxRadius:N,onItemClick:b,xAxis:A,yAxis:T,zAxis:_,rotationAxis:I,radiusAxis:R,skipAnimation:U,width:s,height:r,localeText:W,seriesConfig:D,experimentalFeatures:Q,enableKeyboardNavigation:de,brushConfig:Y,plugins:M??nV,slots:X,slotProps:z},chartsSurfaceProps:J,children:o}};function E6(e){try{return e.matches(":focus-visible")}catch{}return!1}class Sv{static create(){return new Sv}static use(){const t=tN(Sv.create).current,[a,s]=h.useState(!1);return t.shouldMount=a,t.setShouldMount=s,h.useEffect(t.mountEffect,[a]),t}constructor(){this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=Zve(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}mountEffect=()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())};start(...t){this.mount().then(()=>this.ref.current?.start(...t))}stop(...t){this.mount().then(()=>this.ref.current?.stop(...t))}pulsate(...t){this.mount().then(()=>this.ref.current?.pulsate(...t))}}function Xve(){return Sv.use()}function Zve(){let e,t;const a=new Promise((s,r)=>{e=s,t=r});return a.resolve=e,a.reject=t,a}class jP{static create(){return new jP}currentId=null;start(t,a){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,a()},t)}clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function Jve(){const e=tN(jP.create).current;return D9(e.disposeEffect),e}function ewe(e){const{className:t,classes:a,pulsate:s=!1,rippleX:r,rippleY:i,rippleSize:o,in:l,onExited:c,timeout:d}=e,[u,f]=h.useState(!1),p=kt(t,a.ripple,a.rippleVisible,s&&a.ripplePulsate),x={width:o,height:o,top:-(o/2)+i,left:-(o/2)+r},v=kt(a.child,u&&a.childLeaving,s&&a.childPulsate);return!l&&!u&&f(!0),h.useEffect(()=>{if(!l&&c!=null){const N=setTimeout(c,d);return()=>{clearTimeout(N)}}},[c,l,d]),n.jsx("span",{className:p,style:x,children:n.jsx("span",{className:v})})}const ni=va("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),iE=550,twe=80,nwe=rx`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,awe=rx`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,swe=rx`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,rwe=sn("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),iwe=sn(ewe,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${ni.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${nwe};
    animation-duration: ${iE}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  &.${ni.ripplePulsate} {
    animation-duration: ${({theme:e})=>e.transitions.duration.shorter}ms;
  }

  & .${ni.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${ni.childLeaving} {
    opacity: 0;
    animation-name: ${awe};
    animation-duration: ${iE}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  & .${ni.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${swe};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,owe=h.forwardRef(function(t,a){const s=ud({props:t,name:"MuiTouchRipple"}),{center:r=!1,classes:i={},className:o,...l}=s,[c,d]=h.useState([]),u=h.useRef(0),f=h.useRef(null);h.useEffect(()=>{f.current&&(f.current(),f.current=null)},[c]);const p=h.useRef(!1),x=Jve(),v=h.useRef(null),N=h.useRef(null),b=h.useCallback(E=>{const{pulsate:k,rippleX:A,rippleY:T,rippleSize:_,cb:I}=E;d(R=>[...R,n.jsx(iwe,{classes:{ripple:kt(i.ripple,ni.ripple),rippleVisible:kt(i.rippleVisible,ni.rippleVisible),ripplePulsate:kt(i.ripplePulsate,ni.ripplePulsate),child:kt(i.child,ni.child),childLeaving:kt(i.childLeaving,ni.childLeaving),childPulsate:kt(i.childPulsate,ni.childPulsate)},timeout:iE,pulsate:k,rippleX:A,rippleY:T,rippleSize:_},u.current)]),u.current+=1,f.current=I},[i]),C=h.useCallback((E={},k={},A=()=>{})=>{const{pulsate:T=!1,center:_=r||k.pulsate,fakeElement:I=!1}=k;if(E?.type==="mousedown"&&p.current){p.current=!1;return}E?.type==="touchstart"&&(p.current=!0);const R=I?null:N.current,U=R?R.getBoundingClientRect():{width:0,height:0,left:0,top:0};let D,M,W;if(_||E===void 0||E.clientX===0&&E.clientY===0||!E.clientX&&!E.touches)D=Math.round(U.width/2),M=Math.round(U.height/2);else{const{clientX:X,clientY:z}=E.touches&&E.touches.length>0?E.touches[0]:E;D=Math.round(X-U.left),M=Math.round(z-U.top)}if(_)W=Math.sqrt((2*U.width**2+U.height**2)/3),W%2===0&&(W+=1);else{const X=Math.max(Math.abs((R?R.clientWidth:0)-D),D)*2+2,z=Math.max(Math.abs((R?R.clientHeight:0)-M),M)*2+2;W=Math.sqrt(X**2+z**2)}E?.touches?v.current===null&&(v.current=()=>{b({pulsate:T,rippleX:D,rippleY:M,rippleSize:W,cb:A})},x.start(twe,()=>{v.current&&(v.current(),v.current=null)})):b({pulsate:T,rippleX:D,rippleY:M,rippleSize:W,cb:A})},[r,b,x]),w=h.useCallback(()=>{C({},{pulsate:!0})},[C]),S=h.useCallback((E,k)=>{if(x.clear(),E?.type==="touchend"&&v.current){v.current(),v.current=null,x.start(0,()=>{S(E,k)});return}v.current=null,d(A=>A.length>0?A.slice(1):A),f.current=k},[x]);return h.useImperativeHandle(a,()=>({pulsate:w,start:C,stop:S}),[w,C,S]),n.jsx(rwe,{className:kt(ni.root,i.root,o),ref:N,...l,children:n.jsx(rL,{component:null,exit:!0,children:c})})});function lwe(e){return Ra("MuiButtonBase",e)}const cwe=va("MuiButtonBase",["root","disabled","focusVisible"]),dwe=e=>{const{disabled:t,focusVisible:a,focusVisibleClassName:s,classes:r}=e,o=$a({root:["root",t&&"disabled",a&&"focusVisible"]},lwe,r);return a&&s&&(o.root+=` ${s}`),o},uwe=sn("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${cwe.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),aV=h.forwardRef(function(t,a){const s=ud({props:t,name:"MuiButtonBase"}),{action:r,centerRipple:i=!1,children:o,className:l,component:c="button",disabled:d=!1,disableRipple:u=!1,disableTouchRipple:f=!1,focusRipple:p=!1,focusVisibleClassName:x,LinkComponent:v="a",onBlur:N,onClick:b,onContextMenu:C,onDragLeave:w,onFocus:S,onFocusVisible:E,onKeyDown:k,onKeyUp:A,onMouseDown:T,onMouseLeave:_,onMouseUp:I,onTouchEnd:R,onTouchMove:U,onTouchStart:D,tabIndex:M=0,TouchRippleProps:W,touchRippleRef:X,type:z,...Q}=s,de=h.useRef(null),Y=Xve(),se=Eo(Y.ref,X),[J,F]=h.useState(!1);d&&J&&F(!1),h.useImperativeHandle(r,()=>({focusVisible:()=>{F(!0),de.current.focus()}}),[]);const Ne=Y.shouldMount&&!u&&!d;h.useEffect(()=>{J&&p&&!u&&Y.pulsate()},[u,p,J,Y]);const re=sl(Y,"start",T,f),he=sl(Y,"stop",C,f),je=sl(Y,"stop",w,f),De=sl(Y,"stop",I,f),Me=sl(Y,"stop",xe=>{J&&xe.preventDefault(),_&&_(xe)},f),ve=sl(Y,"start",D,f),Be=sl(Y,"stop",R,f),ke=sl(Y,"stop",U,f),fe=sl(Y,"stop",xe=>{E6(xe.target)||F(!1),N&&N(xe)},!1),ne=ls(xe=>{de.current||(de.current=xe.currentTarget),E6(xe.target)&&(F(!0),E&&E(xe)),S&&S(xe)}),Ae=()=>{const xe=de.current;return c&&c!=="button"&&!(xe.tagName==="A"&&xe.href)},ye=ls(xe=>{p&&!xe.repeat&&J&&xe.key===" "&&Y.stop(xe,()=>{Y.start(xe)}),xe.target===xe.currentTarget&&Ae()&&xe.key===" "&&xe.preventDefault(),k&&k(xe),xe.target===xe.currentTarget&&Ae()&&xe.key==="Enter"&&!d&&(xe.preventDefault(),b&&b(xe))}),Ie=ls(xe=>{p&&xe.key===" "&&J&&!xe.defaultPrevented&&Y.stop(xe,()=>{Y.pulsate(xe)}),A&&A(xe),b&&xe.target===xe.currentTarget&&Ae()&&xe.key===" "&&!xe.defaultPrevented&&b(xe)});let Ve=c;Ve==="button"&&(Q.href||Q.to)&&(Ve=v);const Te={};Ve==="button"?(Te.type=z===void 0?"button":z,Te.disabled=d):(!Q.href&&!Q.to&&(Te.role="button"),d&&(Te["aria-disabled"]=d));const Fe=Eo(a,de),Ye={...s,centerRipple:i,component:c,disabled:d,disableRipple:u,disableTouchRipple:f,focusRipple:p,tabIndex:M,focusVisible:J},B=dwe(Ye);return n.jsxs(uwe,{as:Ve,className:kt(B.root,l),ownerState:Ye,onBlur:fe,onClick:b,onContextMenu:he,onFocus:ne,onKeyDown:ye,onKeyUp:Ie,onMouseDown:re,onMouseLeave:Me,onMouseUp:De,onDragLeave:je,onTouchEnd:Be,onTouchMove:ke,onTouchStart:ve,ref:Fe,tabIndex:d?-1:M,type:z,...Te,...Q,children:[o,Ne?n.jsx(owe,{ref:se,center:i,...W}):null]})});function sl(e,t,a,s=!1){return ls(r=>(a&&a(r),s||e[t](r),!0))}function mwe(e){return Ra("MuiIconButton",e)}const k6=va("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),fwe=e=>{const{classes:t,disabled:a,color:s,edge:r,size:i,loading:o}=e,l={root:["root",o&&"loading",a&&"disabled",s!=="default"&&`color${Un(s)}`,r&&`edge${Un(r)}`,`size${Un(i)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return $a(l,mwe,t)},hwe=sn(aV,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.loading&&t.loading,a.color!=="default"&&t[`color${Un(a.color)}`],a.edge&&t[`edge${Un(a.edge)}`],t[`size${Un(a.size)}`]]}})(ju(({theme:e})=>({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),variants:[{props:t=>!t.disableRipple,style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),ju(({theme:e})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(e.palette).filter(ip()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette).filter(ip()).map(([t])=>({props:{color:t},style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:e.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:e.typography.pxToRem(28)}}],[`&.${k6.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled},[`&.${k6.loading}`]:{color:"transparent"}}))),gwe=sn("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(e.vars||e).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),pwe=h.forwardRef(function(t,a){const s=ud({props:t,name:"MuiIconButton"}),{edge:r=!1,children:i,className:o,color:l="default",disabled:c=!1,disableFocusRipple:d=!1,size:u="medium",id:f,loading:p=null,loadingIndicator:x,...v}=s,N=Xw(f),b=x??n.jsx(iL,{"aria-labelledby":N,color:"inherit",size:16}),C={...s,edge:r,color:l,disabled:c,disableFocusRipple:d,loading:p,loadingIndicator:b,size:u},w=fwe(C);return n.jsxs(hwe,{id:p?N:f,className:kt(w.root,o),centerRipple:!0,focusRipple:!d,disabled:c||p,ref:a,...v,ownerState:C,children:[typeof p=="boolean"&&n.jsx("span",{className:w.loadingWrapper,style:{display:"contents"},children:n.jsx(gwe,{className:w.loadingIndicator,ownerState:C,children:p&&b})}),i]})});function xwe(e){return Ra("MuiButton",e)}const $d=va("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),ywe=h.createContext({}),bwe=h.createContext(void 0),vwe=e=>{const{color:t,disableElevation:a,fullWidth:s,size:r,variant:i,loading:o,loadingPosition:l,classes:c}=e,d={root:["root",o&&"loading",i,`${i}${Un(t)}`,`size${Un(r)}`,`${i}Size${Un(r)}`,`color${Un(t)}`,a&&"disableElevation",s&&"fullWidth",o&&`loadingPosition${Un(l)}`],startIcon:["icon","startIcon",`iconSize${Un(r)}`],endIcon:["icon","endIcon",`iconSize${Un(r)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},u=$a(d,xwe,c);return{...c,...u}},sV=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],wwe=sn(aV,{shouldForwardProp:e=>N9(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[a.variant],t[`${a.variant}${Un(a.color)}`],t[`size${Un(a.size)}`],t[`${a.variant}Size${Un(a.size)}`],a.color==="inherit"&&t.colorInherit,a.disableElevation&&t.disableElevation,a.fullWidth&&t.fullWidth,a.loading&&t.loading]}})(ju(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],a=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return{...e.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${$d.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(e.vars||e).shadows[2],"&:hover":{boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2]}},"&:active":{boxShadow:(e.vars||e).shadows[8]},[`&.${$d.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},[`&.${$d.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${$d.disabled}`]:{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(e.palette).filter(ip()).map(([s])=>({props:{color:s},style:{"--variant-textColor":(e.vars||e).palette[s].main,"--variant-outlinedColor":(e.vars||e).palette[s].main,"--variant-outlinedBorder":e.alpha((e.vars||e).palette[s].main,.5),"--variant-containedColor":(e.vars||e).palette[s].contrastText,"--variant-containedBg":(e.vars||e).palette[s].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(e.vars||e).palette[s].dark,"--variant-textBg":e.alpha((e.vars||e).palette[s].main,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBorder":(e.vars||e).palette[s].main,"--variant-outlinedBg":e.alpha((e.vars||e).palette[s].main,(e.vars||e).palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedBg:t,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedHoverBg:a,"--variant-textBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${$d.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${$d.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),[`&.${$d.loading}`]:{color:"transparent"}}}]}})),Nwe=sn("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.startIcon,a.loading&&t.startIconLoadingStart,t[`iconSize${Un(a.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...sV]})),jwe=sn("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.endIcon,a.loading&&t.endIconLoadingEnd,t[`iconSize${Un(a.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...sV]})),Cwe=sn("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(e.vars||e).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),L6=sn("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),Swe=h.forwardRef(function(t,a){const s=h.useContext(ywe),r=h.useContext(bwe),i=Nu(s,t),o=ud({props:i,name:"MuiButton"}),{children:l,color:c="primary",component:d="button",className:u,disabled:f=!1,disableElevation:p=!1,disableFocusRipple:x=!1,endIcon:v,focusVisibleClassName:N,fullWidth:b=!1,id:C,loading:w=null,loadingIndicator:S,loadingPosition:E="center",size:k="medium",startIcon:A,type:T,variant:_="text",...I}=o,R=Xw(C),U=S??n.jsx(iL,{"aria-labelledby":R,color:"inherit",size:16}),D={...o,color:c,component:d,disabled:f,disableElevation:p,disableFocusRipple:x,fullWidth:b,loading:w,loadingIndicator:U,loadingPosition:E,size:k,type:T,variant:_},M=vwe(D),W=(A||w&&E==="start")&&n.jsx(Nwe,{className:M.startIcon,ownerState:D,children:A||n.jsx(L6,{className:M.loadingIconPlaceholder,ownerState:D})}),X=(v||w&&E==="end")&&n.jsx(jwe,{className:M.endIcon,ownerState:D,children:v||n.jsx(L6,{className:M.loadingIconPlaceholder,ownerState:D})}),z=r||"",Q=typeof w=="boolean"?n.jsx("span",{className:M.loadingWrapper,style:{display:"contents"},children:w&&n.jsx(Cwe,{className:M.loadingIndicator,ownerState:D,children:U})}):null;return n.jsxs(wwe,{ownerState:D,className:kt(s.className,M.root,u,z),component:d,disabled:f||w,focusRipple:!x,focusVisibleClassName:kt(M.focusVisible,N),ref:a,type:T,id:w?R:C,...I,classes:M,children:[W,E!=="end"&&Q,l,E==="end"&&Q,X]})}),_we={baseButton:Swe,baseIconButton:pwe},Awe={},Twe=qe({},_we,Awe),Ewe=h.createContext(null);function kwe(e){const{slots:t,slotProps:a={},defaultSlots:s,children:r}=e,i=h.useMemo(()=>({slots:qe({},s,t),slotProps:a}),[s,t,a]);return n.jsx(Ewe.Provider,{value:i,children:r})}const Lwe=["children","localeText","plugins","seriesConfig","slots","slotProps"],Pwe=e=>{const t=yi({props:e,name:"MuiChartDataProvider"}),{children:a,localeText:s,plugins:r=nV,seriesConfig:i,slots:o,slotProps:l}=t,c=dn(t,Lwe),d=Mo(),u={plugins:r,seriesConfig:i,pluginParams:qe({theme:d.palette.mode},c)};return{children:a,localeText:s,chartProviderProps:u,slots:o,slotProps:l}};function Dwe(e){const{children:t,localeText:a,chartProviderProps:s,slots:r,slotProps:i}=Pwe(e);return n.jsx(Uxe,qe({},s,{children:n.jsx(nxe,{localeText:a,children:n.jsx(kwe,{slots:r,slotProps:i,defaultSlots:Twe,children:t})})}))}function P6(e){const{isReversed:t,gradientId:a,size:s,direction:r,scale:i,colorMap:o}=e;return s<=0?null:n.jsx("linearGradient",{id:a,x1:"0",x2:"0",y1:"0",y2:"0",[`${r}${t?1:2}`]:`${s}px`,gradientUnits:"userSpaceOnUse",children:o.thresholds.map((l,c)=>{const d=i(l);if(d===void 0)return null;const u=t?1-d/s:d/s;return Number.isNaN(u)?null:n.jsxs(h.Fragment,{children:[n.jsx("stop",{offset:u,stopColor:o.colors[c],stopOpacity:1}),n.jsx("stop",{offset:u,stopColor:o.colors[c+1],stopOpacity:1})]},l.toString()+c)})})}const Owe=10;function D6(e){const{gradientUnits:t,isReversed:a,gradientId:s,size:r,direction:i,scale:o,colorScale:l,colorMap:c}=e,d=[c.min??0,c.max??100],u=d.map(o).filter(v=>v!==void 0);if(u.length!==2)return null;const f=typeof d[0]=="number"?pf(d[0],d[1]):wL(d[0],d[1]),p=Math.round((Math.max(...u)-Math.min(...u))/Owe),x=`${d[0]}-${d[1]}-`;return n.jsx("linearGradient",{id:s,x1:"0",x2:"0",y1:"0",y2:"0",[`${i}${a?1:2}`]:t==="objectBoundingBox"?1:`${r}px`,gradientUnits:t??"userSpaceOnUse",children:Array.from({length:p+1},(v,N)=>{const b=f(N/p);if(b===void 0)return null;const C=o(b);if(C===void 0)return null;const w=a?1-C/r:C/r,S=l(b);return S===null?null:n.jsx("stop",{offset:w,stopColor:S,stopOpacity:1},x+N)})})}const Mwe=10,Iwe=e=>e?{x1:"1",x2:"0",y1:"0",y2:"0"}:{x1:"0",x2:"1",y1:"0",y2:"0"};function VS(e){const{isReversed:t,gradientId:a,colorScale:s,colorMap:r}=e,i=[r.min??0,r.max??100],o=typeof i[0]=="number"?pf(i[0],i[1]):wL(i[0],i[1]),l=Mwe,c=`${i[0]}-${i[1]}-`;return n.jsx("linearGradient",qe({id:a},Iwe(t),{gradientUnits:"objectBoundingBox",children:Array.from({length:l+1},(d,u)=>{const f=u/l,p=o(f);if(p===void 0)return null;const x=s(p);return x===null?null:n.jsx("stop",{offset:f,stopColor:x,stopOpacity:1},c+u)})}))}function $we(){const{top:e,height:t,bottom:a,left:s,width:r,right:i}=vi(),o=e+t+a,l=s+r+i,c=iP(),d=Ipe(),{xAxis:u,xAxisIds:f}=dr(),{yAxis:p,yAxisIds:x}=ur(),{zAxis:v,zAxisIds:N}=aP(),b=x.filter(S=>p[S].colorMap!==void 0),C=f.filter(S=>u[S].colorMap!==void 0),w=N.filter(S=>v[S].colorMap!==void 0);return b.length===0&&C.length===0&&w.length===0?null:n.jsxs("defs",{children:[b.map(S=>{const E=c(S),k=d(S),{colorMap:A,scale:T,colorScale:_,reverse:I}=p[S];return A?.type==="piecewise"?n.jsx(P6,{isReversed:!I,scale:T,colorMap:A,size:o,gradientId:E,direction:"y"},E):A?.type==="continuous"?n.jsxs(h.Fragment,{children:[n.jsx(D6,{isReversed:!I,scale:T,colorScale:_,colorMap:A,size:o,gradientId:E,direction:"y"}),n.jsx(VS,{isReversed:I,colorScale:_,colorMap:A,gradientId:k})]},E):null}),C.map(S=>{const E=c(S),k=d(S),{colorMap:A,scale:T,reverse:_,colorScale:I}=u[S];return A?.type==="piecewise"?n.jsx(P6,{isReversed:_,scale:T,colorMap:A,size:l,gradientId:E,direction:"x"},E):A?.type==="continuous"?n.jsxs(h.Fragment,{children:[n.jsx(D6,{isReversed:_,scale:T,colorScale:I,colorMap:A,size:l,gradientId:E,direction:"x"}),n.jsx(VS,{isReversed:_,colorScale:I,colorMap:A,gradientId:k})]},E):null}),w.map(S=>{const E=d(S),{colorMap:k,colorScale:A}=v[S];return k?.type==="continuous"?n.jsx(VS,{colorScale:A,colorMap:k,gradientId:E},E):null})]})}function Rwe(e){return Ra("MuiChartsSurface",e)}const zwe=()=>$a({root:["root"]},Rwe);va("MuiChartsSurface",["root"]);const Uwe=["children","className","title","desc"],Fwe=sn("svg",{name:"MuiChartsSurface",slot:"Root"})(({ownerState:e,theme:t})=>({width:e.width??"100%",height:e.height??"100%",display:"flex",position:"relative",flexDirection:"column",alignItems:"center",justifyContent:"center",overflow:"hidden",touchAction:e.hasZoom?"pan-y":void 0,userSelect:"none",gridArea:"chart","&:focus":{outline:"none"},"&:focus-visible":{outline:`${(t.vars??t).palette.text.primary} solid 2px`,"&[data-has-focused-item=true]":{outline:"none"}},"& [data-focused=true]":{outline:`${(t.vars??t).palette.text.primary} solid 2px`}})),Bwe=h.forwardRef(function(t,a){const s=Hn(),r=Rt(s,jue),i=Rt(s,Cue),o=Rt(s,M9),l=Rt(s,I9),c=Rt(s,lge),d=Rt(s,oge),u=Rt(s,Fhe),f=sP(),p=Eo(f,a),x=yi({props:t,name:"MuiChartsSurface"}),{children:v,className:N,title:b,desc:C}=x,w=dn(x,Uwe),S=zwe(),E=i>0&&r>0;return n.jsxs(Fwe,qe({ownerState:{width:o,height:l,hasZoom:u},viewBox:`0 0 ${r} ${i}`,className:kt(S.root,N),tabIndex:c?0:void 0,"data-has-focused-item":d||void 0},w,{ref:p,children:[b&&n.jsx("title",{children:b}),C&&n.jsx("desc",{children:C}),n.jsx($we,{}),E&&v]}))}),O6=va("MuiChartsToolbar",["root"]),Hwe=e=>e?.horizontal==="start"?"start":e?.horizontal==="end"?"end":"center",Gwe=e=>e?.vertical==="top"?"flex-start":e?.vertical==="bottom"?"flex-end":"center",Wwe=(e,t,a)=>e?'"chart"':t==="vertical"?a?.horizontal==="start"?'"legend chart"':'"chart legend"':a?.vertical==="bottom"?`"chart"
            "legend"`:`"legend"
          "chart"`,qwe=(e=!1,t="horizontal",a="end",s=void 0)=>{const r=s?"auto":"1fr";return t==="horizontal"||e?r:a==="start"?`auto ${r}`:`${r} auto`},Vwe=(e=!1,t="horizontal",a="top")=>t==="vertical"||e?"1fr":a==="bottom"?"1fr auto":"auto 1fr",Ywe=sn("div",{name:"MuiChartsWrapper",slot:"Root",shouldForwardProp:e=>Mb(e)&&e!=="extendVertically"&&e!=="width"})(({ownerState:e,width:t})=>{const a=qwe(e.hideLegend,e.legendDirection,e.legendPosition?.horizontal,t),s=Vwe(e.hideLegend,e.legendDirection,e.legendPosition?.vertical),r=Wwe(e.hideLegend,e.legendDirection,e.legendPosition);return{variants:[{props:{extendVertically:!0},style:{height:"100%",minHeight:0}}],flex:1,display:"grid",gridTemplateColumns:a,gridTemplateRows:s,gridTemplateAreas:r,[`&:has(.${O6.root})`]:{gridTemplateRows:`auto ${s}`,gridTemplateAreas:`"${a.split(" ").map(()=>"toolbar").join(" ")}"
        ${r}`},[`& .${O6.root}`]:{gridArea:"toolbar",justifySelf:"center"},justifyContent:"safe center",justifyItems:Hwe(e.legendPosition),alignItems:Gwe(e.legendPosition)}});function Qwe(e){const{children:t,sx:a,extendVertically:s}=e,r=Xpe(),i=Hn(),o=Rt(i,M9),l=Rt(i,I9);return n.jsx(Ywe,{ref:r,ownerState:e,sx:a,extendVertically:s??l===void 0,width:o,children:t})}function Kwe(){const e=Hn(),t=Rt(e,jN),a=Rt(e,CN),s=Rt(e,SN);return h.useMemo(()=>t===void 0||a===void 0||s===void 0?null:{seriesType:t,seriesId:a,dataIndex:s},[t,a,s])}const Oy=6;function Xwe(){const e=Mo(),t=Kwe(),a=Nx(),{xAxis:s,xAxisIds:r}=dr(),{yAxis:i,yAxisIds:o}=ur();if(t===null||t.seriesType!=="line"||!a)return null;const l=a?.series[t.seriesId],c=l.xAxisId??r[0],d=l.yAxisId??o[0];return n.jsx("rect",{fill:"none",stroke:(e.vars??e).palette.text.primary,strokeWidth:2,x:s[c].scale(s[c].data[t.dataIndex])-Oy,y:i[d].scale(l.stackedData[t.dataIndex][1])-Oy,width:2*Oy,height:2*Oy,rx:3,ry:3})}const BN=h.forwardRef(function(t,a){const s=yi({props:t,name:"MuiLineChart"}),{chartsWrapperProps:r,chartContainerProps:i,gridProps:o,clipPathProps:l,clipPathGroupProps:c,areaPlotProps:d,linePlotProps:u,markPlotProps:f,overlayProps:p,chartsAxisProps:x,axisHighlightProps:v,lineHighlightPlotProps:N,legendProps:b,children:C}=Vve(s),{chartDataProviderProps:w,chartsSurfaceProps:S}=Kve(i,a),E=s.slots?.tooltip??ave,k=s.slots?.toolbar;return n.jsx(Dwe,qe({},w,{children:n.jsxs(Qwe,qe({},r,{children:[s.showToolbar&&k?n.jsx(k,qe({},s.slotProps?.toolbar)):null,!s.hideLegend&&n.jsx(pve,qe({},b)),n.jsxs(Bwe,qe({},S,{children:[n.jsx(Ive,qe({},o)),n.jsxs("g",qe({},c,{children:[n.jsx(e0e,qe({},d)),n.jsx(m0e,qe({},u)),n.jsx(Gve,qe({},p)),n.jsx(wve,qe({},v))]})),n.jsx(Xwe,{}),n.jsx(dye,qe({},x)),n.jsx("g",{"data-drawing-container":!0,children:n.jsx(w0e,qe({},f))}),n.jsx(Eve,qe({},N)),n.jsx(Nve,qe({},l)),C]})),!s.loading&&n.jsx(E,qe({},s.slotProps?.tooltip))]}))}))});function Zwe(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return h.useMemo(()=>s=>{t.forEach(r=>r(s))},t)}const HN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function qf(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function CP(e){return"nodeType"in e}function mr(e){var t,a;return e?qf(e)?e:CP(e)&&(t=(a=e.ownerDocument)==null?void 0:a.defaultView)!=null?t:window:window}function SP(e){const{Document:t}=mr(e);return e instanceof t}function _x(e){return qf(e)?!1:e instanceof mr(e).HTMLElement}function rV(e){return e instanceof mr(e).SVGElement}function Vf(e){return e?qf(e)?e.document:CP(e)?SP(e)?e:_x(e)||rV(e)?e.ownerDocument:document:document:document}const Lo=HN?h.useLayoutEffect:h.useEffect;function _P(e){const t=h.useRef(e);return Lo(()=>{t.current=e}),h.useCallback(function(){for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return t.current==null?void 0:t.current(...s)},[])}function Jwe(){const e=h.useRef(null),t=h.useCallback((s,r)=>{e.current=setInterval(s,r)},[]),a=h.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,a]}function yp(e,t){t===void 0&&(t=[e]);const a=h.useRef(e);return Lo(()=>{a.current!==e&&(a.current=e)},t),a}function Ax(e,t){const a=h.useRef();return h.useMemo(()=>{const s=e(a.current);return a.current=s,s},[...t])}function _v(e){const t=_P(e),a=h.useRef(null),s=h.useCallback(r=>{r!==a.current&&t?.(r,a.current),a.current=r},[]);return[a,s]}function oE(e){const t=h.useRef();return h.useEffect(()=>{t.current=e},[e]),t.current}let YS={};function Tx(e,t){return h.useMemo(()=>{if(t)return t;const a=YS[e]==null?0:YS[e]+1;return YS[e]=a,e+"-"+a},[e,t])}function iV(e){return function(t){for(var a=arguments.length,s=new Array(a>1?a-1:0),r=1;r<a;r++)s[r-1]=arguments[r];return s.reduce((i,o)=>{const l=Object.entries(o);for(const[c,d]of l){const u=i[c];u!=null&&(i[c]=u+e*d)}return i},{...t})}}const cf=iV(1),bp=iV(-1);function eNe(e){return"clientX"in e&&"clientY"in e}function AP(e){if(!e)return!1;const{KeyboardEvent:t}=mr(e.target);return t&&e instanceof t}function tNe(e){if(!e)return!1;const{TouchEvent:t}=mr(e.target);return t&&e instanceof t}function lE(e){if(tNe(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:a}=e.touches[0];return{x:t,y:a}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:a}=e.changedTouches[0];return{x:t,y:a}}}return eNe(e)?{x:e.clientX,y:e.clientY}:null}const vp=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:a}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(a?Math.round(a):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:a}=e;return"scaleX("+t+") scaleY("+a+")"}},Transform:{toString(e){if(e)return[vp.Translate.toString(e),vp.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:a,easing:s}=e;return t+" "+a+"ms "+s}}}),M6="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function nNe(e){return e.matches(M6)?e:e.querySelector(M6)}const aNe={display:"none"};function sNe(e){let{id:t,value:a}=e;return pt.createElement("div",{id:t,style:aNe},a)}function rNe(e){let{id:t,announcement:a,ariaLiveType:s="assertive"}=e;const r={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return pt.createElement("div",{id:t,style:r,role:"status","aria-live":s,"aria-atomic":!0},a)}function iNe(){const[e,t]=h.useState("");return{announce:h.useCallback(s=>{s!=null&&t(s)},[]),announcement:e}}const oV=h.createContext(null);function oNe(e){const t=h.useContext(oV);h.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function lNe(){const[e]=h.useState(()=>new Set),t=h.useCallback(s=>(e.add(s),()=>e.delete(s)),[e]);return[h.useCallback(s=>{let{type:r,event:i}=s;e.forEach(o=>{var l;return(l=o[r])==null?void 0:l.call(o,i)})},[e]),t]}const cNe={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},dNe={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:a}=e;return a?"Draggable item "+t.id+" was moved over droppable area "+a.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:a}=e;return a?"Draggable item "+t.id+" was dropped over droppable area "+a.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function uNe(e){let{announcements:t=dNe,container:a,hiddenTextDescribedById:s,screenReaderInstructions:r=cNe}=e;const{announce:i,announcement:o}=iNe(),l=Tx("DndLiveRegion"),[c,d]=h.useState(!1);if(h.useEffect(()=>{d(!0)},[]),oNe(h.useMemo(()=>({onDragStart(f){let{active:p}=f;i(t.onDragStart({active:p}))},onDragMove(f){let{active:p,over:x}=f;t.onDragMove&&i(t.onDragMove({active:p,over:x}))},onDragOver(f){let{active:p,over:x}=f;i(t.onDragOver({active:p,over:x}))},onDragEnd(f){let{active:p,over:x}=f;i(t.onDragEnd({active:p,over:x}))},onDragCancel(f){let{active:p,over:x}=f;i(t.onDragCancel({active:p,over:x}))}}),[i,t])),!c)return null;const u=pt.createElement(pt.Fragment,null,pt.createElement(sNe,{id:s,value:r.draggable}),pt.createElement(rNe,{id:l,announcement:o}));return a?Mi.createPortal(u,a):u}var Va;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Va||(Va={}));function Av(){}function I6(e,t){return h.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function mNe(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return h.useMemo(()=>[...t].filter(s=>s!=null),[...t])}const Ui=Object.freeze({x:0,y:0});function lV(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function cV(e,t){let{data:{value:a}}=e,{data:{value:s}}=t;return a-s}function fNe(e,t){let{data:{value:a}}=e,{data:{value:s}}=t;return s-a}function $6(e){let{left:t,top:a,height:s,width:r}=e;return[{x:t,y:a},{x:t+r,y:a},{x:t,y:a+s},{x:t+r,y:a+s}]}function dV(e,t){if(!e||e.length===0)return null;const[a]=e;return a[t]}function R6(e,t,a){return t===void 0&&(t=e.left),a===void 0&&(a=e.top),{x:t+e.width*.5,y:a+e.height*.5}}const hNe=e=>{let{collisionRect:t,droppableRects:a,droppableContainers:s}=e;const r=R6(t,t.left,t.top),i=[];for(const o of s){const{id:l}=o,c=a.get(l);if(c){const d=lV(R6(c),r);i.push({id:l,data:{droppableContainer:o,value:d}})}}return i.sort(cV)},gNe=e=>{let{collisionRect:t,droppableRects:a,droppableContainers:s}=e;const r=$6(t),i=[];for(const o of s){const{id:l}=o,c=a.get(l);if(c){const d=$6(c),u=r.reduce((p,x,v)=>p+lV(d[v],x),0),f=Number((u/4).toFixed(4));i.push({id:l,data:{droppableContainer:o,value:f}})}}return i.sort(cV)};function pNe(e,t){const a=Math.max(t.top,e.top),s=Math.max(t.left,e.left),r=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),o=r-s,l=i-a;if(s<r&&a<i){const c=t.width*t.height,d=e.width*e.height,u=o*l,f=u/(c+d-u);return Number(f.toFixed(4))}return 0}const xNe=e=>{let{collisionRect:t,droppableRects:a,droppableContainers:s}=e;const r=[];for(const i of s){const{id:o}=i,l=a.get(o);if(l){const c=pNe(l,t);c>0&&r.push({id:o,data:{droppableContainer:i,value:c}})}}return r.sort(fNe)};function yNe(e,t,a){return{...e,scaleX:t&&a?t.width/a.width:1,scaleY:t&&a?t.height/a.height:1}}function uV(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Ui}function bNe(e){return function(a){for(var s=arguments.length,r=new Array(s>1?s-1:0),i=1;i<s;i++)r[i-1]=arguments[i];return r.reduce((o,l)=>({...o,top:o.top+e*l.y,bottom:o.bottom+e*l.y,left:o.left+e*l.x,right:o.right+e*l.x}),{...a})}}const vNe=bNe(1);function wNe(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function NNe(e,t,a){const s=wNe(t);if(!s)return e;const{scaleX:r,scaleY:i,x:o,y:l}=s,c=e.left-o-(1-r)*parseFloat(a),d=e.top-l-(1-i)*parseFloat(a.slice(a.indexOf(" ")+1)),u=r?e.width/r:e.width,f=i?e.height/i:e.height;return{width:u,height:f,top:d,right:c+u,bottom:d+f,left:c}}const jNe={ignoreTransform:!1};function Yf(e,t){t===void 0&&(t=jNe);let a=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:d,transformOrigin:u}=mr(e).getComputedStyle(e);d&&(a=NNe(a,d,u))}const{top:s,left:r,width:i,height:o,bottom:l,right:c}=a;return{top:s,left:r,width:i,height:o,bottom:l,right:c}}function z6(e){return Yf(e,{ignoreTransform:!0})}function CNe(e){const t=e.innerWidth,a=e.innerHeight;return{top:0,left:0,right:t,bottom:a,width:t,height:a}}function SNe(e,t){return t===void 0&&(t=mr(e).getComputedStyle(e)),t.position==="fixed"}function _Ne(e,t){t===void 0&&(t=mr(e).getComputedStyle(e));const a=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(r=>{const i=t[r];return typeof i=="string"?a.test(i):!1})}function GN(e,t){const a=[];function s(r){if(t!=null&&a.length>=t||!r)return a;if(SP(r)&&r.scrollingElement!=null&&!a.includes(r.scrollingElement))return a.push(r.scrollingElement),a;if(!_x(r)||rV(r)||a.includes(r))return a;const i=mr(e).getComputedStyle(r);return r!==e&&_Ne(r,i)&&a.push(r),SNe(r,i)?a:s(r.parentNode)}return e?s(e):a}function mV(e){const[t]=GN(e,1);return t??null}function QS(e){return!HN||!e?null:qf(e)?e:CP(e)?SP(e)||e===Vf(e).scrollingElement?window:_x(e)?e:null:null}function fV(e){return qf(e)?e.scrollX:e.scrollLeft}function hV(e){return qf(e)?e.scrollY:e.scrollTop}function cE(e){return{x:fV(e),y:hV(e)}}var os;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(os||(os={}));function gV(e){return!HN||!e?!1:e===document.scrollingElement}function pV(e){const t={x:0,y:0},a=gV(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},s={x:e.scrollWidth-a.width,y:e.scrollHeight-a.height},r=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,o=e.scrollTop>=s.y,l=e.scrollLeft>=s.x;return{isTop:r,isLeft:i,isBottom:o,isRight:l,maxScroll:s,minScroll:t}}const ANe={x:.2,y:.2};function TNe(e,t,a,s,r){let{top:i,left:o,right:l,bottom:c}=a;s===void 0&&(s=10),r===void 0&&(r=ANe);const{isTop:d,isBottom:u,isLeft:f,isRight:p}=pV(e),x={x:0,y:0},v={x:0,y:0},N={height:t.height*r.y,width:t.width*r.x};return!d&&i<=t.top+N.height?(x.y=os.Backward,v.y=s*Math.abs((t.top+N.height-i)/N.height)):!u&&c>=t.bottom-N.height&&(x.y=os.Forward,v.y=s*Math.abs((t.bottom-N.height-c)/N.height)),!p&&l>=t.right-N.width?(x.x=os.Forward,v.x=s*Math.abs((t.right-N.width-l)/N.width)):!f&&o<=t.left+N.width&&(x.x=os.Backward,v.x=s*Math.abs((t.left+N.width-o)/N.width)),{direction:x,speed:v}}function ENe(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:t,left:a,right:s,bottom:r}=e.getBoundingClientRect();return{top:t,left:a,right:s,bottom:r,width:e.clientWidth,height:e.clientHeight}}function xV(e){return e.reduce((t,a)=>cf(t,cE(a)),Ui)}function kNe(e){return e.reduce((t,a)=>t+fV(a),0)}function LNe(e){return e.reduce((t,a)=>t+hV(a),0)}function PNe(e,t){if(t===void 0&&(t=Yf),!e)return;const{top:a,left:s,bottom:r,right:i}=t(e);mV(e)&&(r<=0||i<=0||a>=window.innerHeight||s>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const DNe=[["x",["left","right"],kNe],["y",["top","bottom"],LNe]];class TP{constructor(t,a){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=GN(a),r=xV(s);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,o,l]of DNe)for(const c of o)Object.defineProperty(this,c,{get:()=>{const d=l(s),u=r[i]-d;return this.rect[c]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Hg{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(a=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...a)})},this.target=t}add(t,a,s){var r;(r=this.target)==null||r.addEventListener(t,a,s),this.listeners.push([t,a,s])}}function ONe(e){const{EventTarget:t}=mr(e);return e instanceof t?e:Vf(e)}function KS(e,t){const a=Math.abs(e.x),s=Math.abs(e.y);return typeof t=="number"?Math.sqrt(a**2+s**2)>t:"x"in t&&"y"in t?a>t.x&&s>t.y:"x"in t?a>t.x:"y"in t?s>t.y:!1}var ai;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(ai||(ai={}));function U6(e){e.preventDefault()}function MNe(e){e.stopPropagation()}var fn;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(fn||(fn={}));const yV={start:[fn.Space,fn.Enter],cancel:[fn.Esc],end:[fn.Space,fn.Enter,fn.Tab]},INe=(e,t)=>{let{currentCoordinates:a}=t;switch(e.code){case fn.Right:return{...a,x:a.x+25};case fn.Left:return{...a,x:a.x-25};case fn.Down:return{...a,y:a.y+25};case fn.Up:return{...a,y:a.y-25}}};class EP{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:a}}=t;this.props=t,this.listeners=new Hg(Vf(a)),this.windowListeners=new Hg(mr(a)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ai.Resize,this.handleCancel),this.windowListeners.add(ai.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ai.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:a}=this.props,s=t.node.current;s&&PNe(s),a(Ui)}handleKeyDown(t){if(AP(t)){const{active:a,context:s,options:r}=this.props,{keyboardCodes:i=yV,coordinateGetter:o=INe,scrollBehavior:l="smooth"}=r,{code:c}=t;if(i.end.includes(c)){this.handleEnd(t);return}if(i.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:d}=s.current,u=d?{x:d.left,y:d.top}:Ui;this.referenceCoordinates||(this.referenceCoordinates=u);const f=o(t,{active:a,context:s.current,currentCoordinates:u});if(f){const p=bp(f,u),x={x:0,y:0},{scrollableAncestors:v}=s.current;for(const N of v){const b=t.code,{isTop:C,isRight:w,isLeft:S,isBottom:E,maxScroll:k,minScroll:A}=pV(N),T=ENe(N),_={x:Math.min(b===fn.Right?T.right-T.width/2:T.right,Math.max(b===fn.Right?T.left:T.left+T.width/2,f.x)),y:Math.min(b===fn.Down?T.bottom-T.height/2:T.bottom,Math.max(b===fn.Down?T.top:T.top+T.height/2,f.y))},I=b===fn.Right&&!w||b===fn.Left&&!S,R=b===fn.Down&&!E||b===fn.Up&&!C;if(I&&_.x!==f.x){const U=N.scrollLeft+p.x,D=b===fn.Right&&U<=k.x||b===fn.Left&&U>=A.x;if(D&&!p.y){N.scrollTo({left:U,behavior:l});return}D?x.x=N.scrollLeft-U:x.x=b===fn.Right?N.scrollLeft-k.x:N.scrollLeft-A.x,x.x&&N.scrollBy({left:-x.x,behavior:l});break}else if(R&&_.y!==f.y){const U=N.scrollTop+p.y,D=b===fn.Down&&U<=k.y||b===fn.Up&&U>=A.y;if(D&&!p.x){N.scrollTo({top:U,behavior:l});return}D?x.y=N.scrollTop-U:x.y=b===fn.Down?N.scrollTop-k.y:N.scrollTop-A.y,x.y&&N.scrollBy({top:-x.y,behavior:l});break}}this.handleMove(t,cf(bp(f,this.referenceCoordinates),x))}}}handleMove(t,a){const{onMove:s}=this.props;t.preventDefault(),s(a)}handleEnd(t){const{onEnd:a}=this.props;t.preventDefault(),this.detach(),a()}handleCancel(t){const{onCancel:a}=this.props;t.preventDefault(),this.detach(),a()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}EP.activators=[{eventName:"onKeyDown",handler:(e,t,a)=>{let{keyboardCodes:s=yV,onActivation:r}=t,{active:i}=a;const{code:o}=e.nativeEvent;if(s.start.includes(o)){const l=i.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),r?.({event:e.nativeEvent}),!0)}return!1}}];function F6(e){return!!(e&&"distance"in e)}function B6(e){return!!(e&&"delay"in e)}class kP{constructor(t,a,s){var r;s===void 0&&(s=ONe(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=a;const{event:i}=t,{target:o}=i;this.props=t,this.events=a,this.document=Vf(o),this.documentListeners=new Hg(this.document),this.listeners=new Hg(s),this.windowListeners=new Hg(mr(o)),this.initialCoordinates=(r=lE(i))!=null?r:Ui,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:a,bypassActivationConstraint:s}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(ai.Resize,this.handleCancel),this.windowListeners.add(ai.DragStart,U6),this.windowListeners.add(ai.VisibilityChange,this.handleCancel),this.windowListeners.add(ai.ContextMenu,U6),this.documentListeners.add(ai.Keydown,this.handleKeydown),a){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(B6(a)){this.timeoutId=setTimeout(this.handleStart,a.delay),this.handlePending(a);return}if(F6(a)){this.handlePending(a);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,a){const{active:s,onPending:r}=this.props;r(s,t,this.initialCoordinates,a)}handleStart(){const{initialCoordinates:t}=this,{onStart:a}=this.props;t&&(this.activated=!0,this.documentListeners.add(ai.Click,MNe,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ai.SelectionChange,this.removeTextSelection),a(t))}handleMove(t){var a;const{activated:s,initialCoordinates:r,props:i}=this,{onMove:o,options:{activationConstraint:l}}=i;if(!r)return;const c=(a=lE(t))!=null?a:Ui,d=bp(r,c);if(!s&&l){if(F6(l)){if(l.tolerance!=null&&KS(d,l.tolerance))return this.handleCancel();if(KS(d,l.distance))return this.handleStart()}if(B6(l)&&KS(d,l.tolerance))return this.handleCancel();this.handlePending(l,d);return}t.cancelable&&t.preventDefault(),o(c)}handleEnd(){const{onAbort:t,onEnd:a}=this.props;this.detach(),this.activated||t(this.props.active),a()}handleCancel(){const{onAbort:t,onCancel:a}=this.props;this.detach(),this.activated||t(this.props.active),a()}handleKeydown(t){t.code===fn.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const $Ne={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class LP extends kP{constructor(t){const{event:a}=t,s=Vf(a.target);super(t,$Ne,s)}}LP.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:a}=e,{onActivation:s}=t;return!a.isPrimary||a.button!==0?!1:(s?.({event:a}),!0)}}];const RNe={move:{name:"mousemove"},end:{name:"mouseup"}};var dE;(function(e){e[e.RightClick=2]="RightClick"})(dE||(dE={}));class zNe extends kP{constructor(t){super(t,RNe,Vf(t.event.target))}}zNe.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:a}=e,{onActivation:s}=t;return a.button===dE.RightClick?!1:(s?.({event:a}),!0)}}];const XS={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class UNe extends kP{constructor(t){super(t,XS)}static setup(){return window.addEventListener(XS.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(XS.move.name,t)};function t(){}}}UNe.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:a}=e,{onActivation:s}=t;const{touches:r}=a;return r.length>1?!1:(s?.({event:a}),!0)}}];var Gg;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Gg||(Gg={}));var Tv;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Tv||(Tv={}));function FNe(e){let{acceleration:t,activator:a=Gg.Pointer,canScroll:s,draggingRect:r,enabled:i,interval:o=5,order:l=Tv.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:u,delta:f,threshold:p}=e;const x=HNe({delta:f,disabled:!i}),[v,N]=Jwe(),b=h.useRef({x:0,y:0}),C=h.useRef({x:0,y:0}),w=h.useMemo(()=>{switch(a){case Gg.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Gg.DraggableRect:return r}},[a,r,c]),S=h.useRef(null),E=h.useCallback(()=>{const A=S.current;if(!A)return;const T=b.current.x*C.current.x,_=b.current.y*C.current.y;A.scrollBy(T,_)},[]),k=h.useMemo(()=>l===Tv.TreeOrder?[...d].reverse():d,[l,d]);h.useEffect(()=>{if(!i||!d.length||!w){N();return}for(const A of k){if(s?.(A)===!1)continue;const T=d.indexOf(A),_=u[T];if(!_)continue;const{direction:I,speed:R}=TNe(A,_,w,t,p);for(const U of["x","y"])x[U][I[U]]||(R[U]=0,I[U]=0);if(R.x>0||R.y>0){N(),S.current=A,v(E,o),b.current=R,C.current=I;return}}b.current={x:0,y:0},C.current={x:0,y:0},N()},[t,E,s,N,i,o,JSON.stringify(w),JSON.stringify(x),v,d,k,u,JSON.stringify(p)])}const BNe={x:{[os.Backward]:!1,[os.Forward]:!1},y:{[os.Backward]:!1,[os.Forward]:!1}};function HNe(e){let{delta:t,disabled:a}=e;const s=oE(t);return Ax(r=>{if(a||!s||!r)return BNe;const i={x:Math.sign(t.x-s.x),y:Math.sign(t.y-s.y)};return{x:{[os.Backward]:r.x[os.Backward]||i.x===-1,[os.Forward]:r.x[os.Forward]||i.x===1},y:{[os.Backward]:r.y[os.Backward]||i.y===-1,[os.Forward]:r.y[os.Forward]||i.y===1}}},[a,t,s])}function GNe(e,t){const a=t!=null?e.get(t):void 0,s=a?a.node.current:null;return Ax(r=>{var i;return t==null?null:(i=s??r)!=null?i:null},[s,t])}function WNe(e,t){return h.useMemo(()=>e.reduce((a,s)=>{const{sensor:r}=s,i=r.activators.map(o=>({eventName:o.eventName,handler:t(o.handler,s)}));return[...a,...i]},[]),[e,t])}var wp;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(wp||(wp={}));var uE;(function(e){e.Optimized="optimized"})(uE||(uE={}));const H6=new Map;function qNe(e,t){let{dragging:a,dependencies:s,config:r}=t;const[i,o]=h.useState(null),{frequency:l,measure:c,strategy:d}=r,u=h.useRef(e),f=b(),p=yp(f),x=h.useCallback(function(C){C===void 0&&(C=[]),!p.current&&o(w=>w===null?C:w.concat(C.filter(S=>!w.includes(S))))},[p]),v=h.useRef(null),N=Ax(C=>{if(f&&!a)return H6;if(!C||C===H6||u.current!==e||i!=null){const w=new Map;for(let S of e){if(!S)continue;if(i&&i.length>0&&!i.includes(S.id)&&S.rect.current){w.set(S.id,S.rect.current);continue}const E=S.node.current,k=E?new TP(c(E),E):null;S.rect.current=k,k&&w.set(S.id,k)}return w}return C},[e,i,a,f,c]);return h.useEffect(()=>{u.current=e},[e]),h.useEffect(()=>{f||x()},[a,f]),h.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),h.useEffect(()=>{f||typeof l!="number"||v.current!==null||(v.current=setTimeout(()=>{x(),v.current=null},l))},[l,f,x,...s]),{droppableRects:N,measureDroppableContainers:x,measuringScheduled:i!=null};function b(){switch(d){case wp.Always:return!1;case wp.BeforeDragging:return a;default:return!a}}}function bV(e,t){return Ax(a=>e?a||(typeof t=="function"?t(e):e):null,[t,e])}function VNe(e,t){return bV(e,t)}function YNe(e){let{callback:t,disabled:a}=e;const s=_P(t),r=h.useMemo(()=>{if(a||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(s)},[s,a]);return h.useEffect(()=>()=>r?.disconnect(),[r]),r}function WN(e){let{callback:t,disabled:a}=e;const s=_P(t),r=h.useMemo(()=>{if(a||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(s)},[a]);return h.useEffect(()=>()=>r?.disconnect(),[r]),r}function QNe(e){return new TP(Yf(e),e)}function G6(e,t,a){t===void 0&&(t=QNe);const[s,r]=h.useState(null);function i(){r(c=>{if(!e)return null;if(e.isConnected===!1){var d;return(d=c??a)!=null?d:null}const u=t(e);return JSON.stringify(c)===JSON.stringify(u)?c:u})}const o=YNe({callback(c){if(e)for(const d of c){const{type:u,target:f}=d;if(u==="childList"&&f instanceof HTMLElement&&f.contains(e)){i();break}}}}),l=WN({callback:i});return Lo(()=>{i(),e?(l?.observe(e),o?.observe(document.body,{childList:!0,subtree:!0})):(l?.disconnect(),o?.disconnect())},[e]),s}function KNe(e){const t=bV(e);return uV(e,t)}const W6=[];function XNe(e){const t=h.useRef(e),a=Ax(s=>e?s&&s!==W6&&e&&t.current&&e.parentNode===t.current.parentNode?s:GN(e):W6,[e]);return h.useEffect(()=>{t.current=e},[e]),a}function ZNe(e){const[t,a]=h.useState(null),s=h.useRef(e),r=h.useCallback(i=>{const o=QS(i.target);o&&a(l=>l?(l.set(o,cE(o)),new Map(l)):null)},[]);return h.useEffect(()=>{const i=s.current;if(e!==i){o(i);const l=e.map(c=>{const d=QS(c);return d?(d.addEventListener("scroll",r,{passive:!0}),[d,cE(d)]):null}).filter(c=>c!=null);a(l.length?new Map(l):null),s.current=e}return()=>{o(e),o(i)};function o(l){l.forEach(c=>{const d=QS(c);d?.removeEventListener("scroll",r)})}},[r,e]),h.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,o)=>cf(i,o),Ui):xV(e):Ui,[e,t])}function q6(e,t){t===void 0&&(t=[]);const a=h.useRef(null);return h.useEffect(()=>{a.current=null},t),h.useEffect(()=>{const s=e!==Ui;s&&!a.current&&(a.current=e),!s&&a.current&&(a.current=null)},[e]),a.current?bp(e,a.current):Ui}function JNe(e){h.useEffect(()=>{if(!HN)return;const t=e.map(a=>{let{sensor:s}=a;return s.setup==null?void 0:s.setup()});return()=>{for(const a of t)a?.()}},e.map(t=>{let{sensor:a}=t;return a}))}function eje(e,t){return h.useMemo(()=>e.reduce((a,s)=>{let{eventName:r,handler:i}=s;return a[r]=o=>{i(o,t)},a},{}),[e,t])}function vV(e){return h.useMemo(()=>e?CNe(e):null,[e])}const V6=[];function tje(e,t){t===void 0&&(t=Yf);const[a]=e,s=vV(a?mr(a):null),[r,i]=h.useState(V6);function o(){i(()=>e.length?e.map(c=>gV(c)?s:new TP(t(c),c)):V6)}const l=WN({callback:o});return Lo(()=>{l?.disconnect(),o(),e.forEach(c=>l?.observe(c))},[e]),r}function nje(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return _x(t)?t:e}function aje(e){let{measure:t}=e;const[a,s]=h.useState(null),r=h.useCallback(d=>{for(const{target:u}of d)if(_x(u)){s(f=>{const p=t(u);return f?{...f,width:p.width,height:p.height}:p});break}},[t]),i=WN({callback:r}),o=h.useCallback(d=>{const u=nje(d);i?.disconnect(),u&&i?.observe(u),s(u?t(u):null)},[t,i]),[l,c]=_v(o);return h.useMemo(()=>({nodeRef:l,rect:a,setRef:c}),[a,l,c])}const sje=[{sensor:LP,options:{}},{sensor:EP,options:{}}],rje={current:{}},Rb={draggable:{measure:z6},droppable:{measure:z6,strategy:wp.WhileDragging,frequency:uE.Optimized},dragOverlay:{measure:Yf}};class Wg extends Map{get(t){var a;return t!=null&&(a=super.get(t))!=null?a:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:a}=t;return!a})}getNodeFor(t){var a,s;return(a=(s=this.get(t))==null?void 0:s.node.current)!=null?a:void 0}}const ije={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Wg,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Av},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Rb,measureDroppableContainers:Av,windowRect:null,measuringScheduled:!1},oje={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Av,draggableNodes:new Map,over:null,measureDroppableContainers:Av},qN=h.createContext(oje),wV=h.createContext(ije);function lje(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Wg}}}function cje(e,t){switch(t.type){case Va.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Va.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Va.DragEnd:case Va.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Va.RegisterDroppable:{const{element:a}=t,{id:s}=a,r=new Wg(e.droppable.containers);return r.set(s,a),{...e,droppable:{...e.droppable,containers:r}}}case Va.SetDroppableDisabled:{const{id:a,key:s,disabled:r}=t,i=e.droppable.containers.get(a);if(!i||s!==i.key)return e;const o=new Wg(e.droppable.containers);return o.set(a,{...i,disabled:r}),{...e,droppable:{...e.droppable,containers:o}}}case Va.UnregisterDroppable:{const{id:a,key:s}=t,r=e.droppable.containers.get(a);if(!r||s!==r.key)return e;const i=new Wg(e.droppable.containers);return i.delete(a),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function dje(e){let{disabled:t}=e;const{active:a,activatorEvent:s,draggableNodes:r}=h.useContext(qN),i=oE(s),o=oE(a?.id);return h.useEffect(()=>{if(!t&&!s&&i&&o!=null){if(!AP(i)||document.activeElement===i.target)return;const l=r.get(o);if(!l)return;const{activatorNode:c,node:d}=l;if(!c.current&&!d.current)return;requestAnimationFrame(()=>{for(const u of[c.current,d.current]){if(!u)continue;const f=nNe(u);if(f){f.focus();break}}})}},[s,t,r,o,i]),null}function uje(e,t){let{transform:a,...s}=t;return e!=null&&e.length?e.reduce((r,i)=>i({transform:r,...s}),a):a}function mje(e){return h.useMemo(()=>({draggable:{...Rb.draggable,...e?.draggable},droppable:{...Rb.droppable,...e?.droppable},dragOverlay:{...Rb.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function fje(e){let{activeNode:t,measure:a,initialRect:s,config:r=!0}=e;const i=h.useRef(!1),{x:o,y:l}=typeof r=="boolean"?{x:r,y:r}:r;Lo(()=>{if(!o&&!l||!t){i.current=!1;return}if(i.current||!s)return;const d=t?.node.current;if(!d||d.isConnected===!1)return;const u=a(d),f=uV(u,s);if(o||(f.x=0),l||(f.y=0),i.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const p=mV(d);p&&p.scrollBy({top:f.y,left:f.x})}},[t,o,l,s,a])}const NV=h.createContext({...Ui,scaleX:1,scaleY:1});var Oc;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Oc||(Oc={}));const hje=h.memo(function(t){var a,s,r,i;let{id:o,accessibility:l,autoScroll:c=!0,children:d,sensors:u=sje,collisionDetection:f=xNe,measuring:p,modifiers:x,...v}=t;const N=h.useReducer(cje,void 0,lje),[b,C]=N,[w,S]=lNe(),[E,k]=h.useState(Oc.Uninitialized),A=E===Oc.Initialized,{draggable:{active:T,nodes:_,translate:I},droppable:{containers:R}}=b,U=T!=null?_.get(T):null,D=h.useRef({initial:null,translated:null}),M=h.useMemo(()=>{var V;return T!=null?{id:T,data:(V=U?.data)!=null?V:rje,rect:D}:null},[T,U]),W=h.useRef(null),[X,z]=h.useState(null),[Q,de]=h.useState(null),Y=yp(v,Object.values(v)),se=Tx("DndDescribedBy",o),J=h.useMemo(()=>R.getEnabled(),[R]),F=mje(p),{droppableRects:Ne,measureDroppableContainers:re,measuringScheduled:he}=qNe(J,{dragging:A,dependencies:[I.x,I.y],config:F.droppable}),je=GNe(_,T),De=h.useMemo(()=>Q?lE(Q):null,[Q]),Me=$(),ve=VNe(je,F.draggable.measure);fje({activeNode:T!=null?_.get(T):null,config:Me.layoutShiftCompensation,initialRect:ve,measure:F.draggable.measure});const Be=G6(je,F.draggable.measure,ve),ke=G6(je?je.parentElement:null),fe=h.useRef({activatorEvent:null,active:null,activeNode:je,collisionRect:null,collisions:null,droppableRects:Ne,draggableNodes:_,draggingNode:null,draggingNodeRect:null,droppableContainers:R,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ne=R.getNodeFor((a=fe.current.over)==null?void 0:a.id),Ae=aje({measure:F.dragOverlay.measure}),ye=(s=Ae.nodeRef.current)!=null?s:je,Ie=A?(r=Ae.rect)!=null?r:Be:null,Ve=!!(Ae.nodeRef.current&&Ae.rect),Te=KNe(Ve?null:Be),Fe=vV(ye?mr(ye):null),Ye=XNe(A?ne??je:null),B=tje(Ye),xe=uje(x,{transform:{x:I.x-Te.x,y:I.y-Te.y,scaleX:1,scaleY:1},activatorEvent:Q,active:M,activeNodeRect:Be,containerNodeRect:ke,draggingNodeRect:Ie,over:fe.current.over,overlayNodeRect:Ae.rect,scrollableAncestors:Ye,scrollableAncestorRects:B,windowRect:Fe}),_e=De?cf(De,I):null,ce=ZNe(Ye),Ee=q6(ce),ae=q6(ce,[Be]),He=cf(xe,Ee),Re=Ie?vNe(Ie,xe):null,it=M&&Re?f({active:M,collisionRect:Re,droppableRects:Ne,droppableContainers:J,pointerCoordinates:_e}):null,mt=dV(it,"id"),[ee,pe]=h.useState(null),Ue=Ve?xe:cf(xe,ae),Ze=yNe(Ue,(i=ee?.rect)!=null?i:null,Be),nt=h.useRef(null),Je=h.useCallback((V,te)=>{let{sensor:Z,options:Se}=te;if(W.current==null)return;const me=_.get(W.current);if(!me)return;const ue=V.nativeEvent,$e=new Z({active:W.current,activeNode:me,event:ue,options:Se,context:fe,onAbort(We){if(!_.get(We))return;const{onDragAbort:yt}=Y.current,Tt={id:We};yt?.(Tt),w({type:"onDragAbort",event:Tt})},onPending(We,ft,yt,Tt){if(!_.get(We))return;const{onDragPending:Gt}=Y.current,oe={id:We,constraint:ft,initialCoordinates:yt,offset:Tt};Gt?.(oe),w({type:"onDragPending",event:oe})},onStart(We){const ft=W.current;if(ft==null)return;const yt=_.get(ft);if(!yt)return;const{onDragStart:Tt}=Y.current,Et={activatorEvent:ue,active:{id:ft,data:yt.data,rect:D}};Mi.unstable_batchedUpdates(()=>{Tt?.(Et),k(Oc.Initializing),C({type:Va.DragStart,initialCoordinates:We,active:ft}),w({type:"onDragStart",event:Et}),z(nt.current),de(ue)})},onMove(We){C({type:Va.DragMove,coordinates:We})},onEnd:be(Va.DragEnd),onCancel:be(Va.DragCancel)});nt.current=$e;function be(We){return async function(){const{active:yt,collisions:Tt,over:Et,scrollAdjustedTranslate:Gt}=fe.current;let oe=null;if(yt&&Gt){const{cancelDrop:rt}=Y.current;oe={activatorEvent:ue,active:yt,collisions:Tt,delta:Gt,over:Et},We===Va.DragEnd&&typeof rt=="function"&&await Promise.resolve(rt(oe))&&(We=Va.DragCancel)}W.current=null,Mi.unstable_batchedUpdates(()=>{C({type:We}),k(Oc.Uninitialized),pe(null),z(null),de(null),nt.current=null;const rt=We===Va.DragEnd?"onDragEnd":"onDragCancel";if(oe){const _t=Y.current[rt];_t?.(oe),w({type:rt,event:oe})}})}}},[_]),Oe=h.useCallback((V,te)=>(Z,Se)=>{const me=Z.nativeEvent,ue=_.get(Se);if(W.current!==null||!ue||me.dndKit||me.defaultPrevented)return;const $e={active:ue};V(Z,te.options,$e)===!0&&(me.dndKit={capturedBy:te.sensor},W.current=Se,Je(Z,te))},[_,Je]),ge=WNe(u,Oe);JNe(u),Lo(()=>{Be&&E===Oc.Initializing&&k(Oc.Initialized)},[Be,E]),h.useEffect(()=>{const{onDragMove:V}=Y.current,{active:te,activatorEvent:Z,collisions:Se,over:me}=fe.current;if(!te||!Z)return;const ue={active:te,activatorEvent:Z,collisions:Se,delta:{x:He.x,y:He.y},over:me};Mi.unstable_batchedUpdates(()=>{V?.(ue),w({type:"onDragMove",event:ue})})},[He.x,He.y]),h.useEffect(()=>{const{active:V,activatorEvent:te,collisions:Z,droppableContainers:Se,scrollAdjustedTranslate:me}=fe.current;if(!V||W.current==null||!te||!me)return;const{onDragOver:ue}=Y.current,$e=Se.get(mt),be=$e&&$e.rect.current?{id:$e.id,rect:$e.rect.current,data:$e.data,disabled:$e.disabled}:null,We={active:V,activatorEvent:te,collisions:Z,delta:{x:me.x,y:me.y},over:be};Mi.unstable_batchedUpdates(()=>{pe(be),ue?.(We),w({type:"onDragOver",event:We})})},[mt]),Lo(()=>{fe.current={activatorEvent:Q,active:M,activeNode:je,collisionRect:Re,collisions:it,droppableRects:Ne,draggableNodes:_,draggingNode:ye,draggingNodeRect:Ie,droppableContainers:R,over:ee,scrollableAncestors:Ye,scrollAdjustedTranslate:He},D.current={initial:Ie,translated:Re}},[M,je,it,Re,_,ye,Ie,Ne,R,ee,Ye,He]),FNe({...Me,delta:I,draggingRect:Re,pointerCoordinates:_e,scrollableAncestors:Ye,scrollableAncestorRects:B});const Ke=h.useMemo(()=>({active:M,activeNode:je,activeNodeRect:Be,activatorEvent:Q,collisions:it,containerNodeRect:ke,dragOverlay:Ae,draggableNodes:_,droppableContainers:R,droppableRects:Ne,over:ee,measureDroppableContainers:re,scrollableAncestors:Ye,scrollableAncestorRects:B,measuringConfiguration:F,measuringScheduled:he,windowRect:Fe}),[M,je,Be,Q,it,ke,Ae,_,R,Ne,ee,re,Ye,B,F,he,Fe]),G=h.useMemo(()=>({activatorEvent:Q,activators:ge,active:M,activeNodeRect:Be,ariaDescribedById:{draggable:se},dispatch:C,draggableNodes:_,over:ee,measureDroppableContainers:re}),[Q,ge,M,Be,C,se,_,ee,re]);return pt.createElement(oV.Provider,{value:S},pt.createElement(qN.Provider,{value:G},pt.createElement(wV.Provider,{value:Ke},pt.createElement(NV.Provider,{value:Ze},d)),pt.createElement(dje,{disabled:l?.restoreFocus===!1})),pt.createElement(uNe,{...l,hiddenTextDescribedById:se}));function $(){const V=X?.autoScrollEnabled===!1,te=typeof c=="object"?c.enabled===!1:c===!1,Z=A&&!V&&!te;return typeof c=="object"?{...c,enabled:Z}:{enabled:Z}}}),gje=h.createContext(null),Y6="button",pje="Draggable";function xje(e){let{id:t,data:a,disabled:s=!1,attributes:r}=e;const i=Tx(pje),{activators:o,activatorEvent:l,active:c,activeNodeRect:d,ariaDescribedById:u,draggableNodes:f,over:p}=h.useContext(qN),{role:x=Y6,roleDescription:v="draggable",tabIndex:N=0}=r??{},b=c?.id===t,C=h.useContext(b?NV:gje),[w,S]=_v(),[E,k]=_v(),A=eje(o,t),T=yp(a);Lo(()=>(f.set(t,{id:t,key:i,node:w,activatorNode:E,data:T}),()=>{const I=f.get(t);I&&I.key===i&&f.delete(t)}),[f,t]);const _=h.useMemo(()=>({role:x,tabIndex:N,"aria-disabled":s,"aria-pressed":b&&x===Y6?!0:void 0,"aria-roledescription":v,"aria-describedby":u.draggable}),[s,x,N,b,v,u.draggable]);return{active:c,activatorEvent:l,activeNodeRect:d,attributes:_,isDragging:b,listeners:s?void 0:A,node:w,over:p,setNodeRef:S,setActivatorNodeRef:k,transform:C}}function yje(){return h.useContext(wV)}const bje="Droppable",vje={timeout:25};function wje(e){let{data:t,disabled:a=!1,id:s,resizeObserverConfig:r}=e;const i=Tx(bje),{active:o,dispatch:l,over:c,measureDroppableContainers:d}=h.useContext(qN),u=h.useRef({disabled:a}),f=h.useRef(!1),p=h.useRef(null),x=h.useRef(null),{disabled:v,updateMeasurementsFor:N,timeout:b}={...vje,...r},C=yp(N??s),w=h.useCallback(()=>{if(!f.current){f.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{d(Array.isArray(C.current)?C.current:[C.current]),x.current=null},b)},[b]),S=WN({callback:w,disabled:v||!o}),E=h.useCallback((_,I)=>{S&&(I&&(S.unobserve(I),f.current=!1),_&&S.observe(_))},[S]),[k,A]=_v(E),T=yp(t);return h.useEffect(()=>{!S||!k.current||(S.disconnect(),f.current=!1,S.observe(k.current))},[k,S]),h.useEffect(()=>(l({type:Va.RegisterDroppable,element:{id:s,key:i,disabled:a,node:k,rect:p,data:T}}),()=>l({type:Va.UnregisterDroppable,key:i,id:s})),[s]),h.useEffect(()=>{a!==u.current.disabled&&(l({type:Va.SetDroppableDisabled,id:s,key:i,disabled:a}),u.current.disabled=a)},[s,i,a,l]),{active:o,rect:p,isOver:c?.id===s,node:k,over:c,setNodeRef:A}}function PP(e,t,a){const s=e.slice();return s.splice(a<0?s.length+a:a,0,s.splice(t,1)[0]),s}function Nje(e,t){return e.reduce((a,s,r)=>{const i=t.get(s);return i&&(a[r]=i),a},Array(e.length))}function My(e){return e!==null&&e>=0}function jje(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}function Cje(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const DP=e=>{let{rects:t,activeIndex:a,overIndex:s,index:r}=e;const i=PP(t,s,a),o=t[r],l=i[r];return!l||!o?null:{x:l.left-o.left,y:l.top-o.top,scaleX:l.width/o.width,scaleY:l.height/o.height}},jV="Sortable",CV=pt.createContext({activeIndex:-1,containerId:jV,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:DP,disabled:{draggable:!1,droppable:!1}});function Sje(e){let{children:t,id:a,items:s,strategy:r=DP,disabled:i=!1}=e;const{active:o,dragOverlay:l,droppableRects:c,over:d,measureDroppableContainers:u}=yje(),f=Tx(jV,a),p=l.rect!==null,x=h.useMemo(()=>s.map(A=>typeof A=="object"&&"id"in A?A.id:A),[s]),v=o!=null,N=o?x.indexOf(o.id):-1,b=d?x.indexOf(d.id):-1,C=h.useRef(x),w=!jje(x,C.current),S=b!==-1&&N===-1||w,E=Cje(i);Lo(()=>{w&&v&&u(x)},[w,x,v,u]),h.useEffect(()=>{C.current=x},[x]);const k=h.useMemo(()=>({activeIndex:N,containerId:f,disabled:E,disableTransforms:S,items:x,overIndex:b,useDragOverlay:p,sortedRects:Nje(x,c),strategy:r}),[N,f,E.draggable,E.droppable,S,x,b,c,p,r]);return pt.createElement(CV.Provider,{value:k},t)}const _je=e=>{let{id:t,items:a,activeIndex:s,overIndex:r}=e;return PP(a,s,r).indexOf(t)},Aje=e=>{let{containerId:t,isSorting:a,wasDragging:s,index:r,items:i,newIndex:o,previousItems:l,previousContainerId:c,transition:d}=e;return!d||!s||l!==i&&r===o?!1:a?!0:o!==r&&t===c},Tje={duration:200,easing:"ease"},SV="transform",Eje=vp.Transition.toString({property:SV,duration:0,easing:"linear"}),kje={roleDescription:"sortable"};function Lje(e){let{disabled:t,index:a,node:s,rect:r}=e;const[i,o]=h.useState(null),l=h.useRef(a);return Lo(()=>{if(!t&&a!==l.current&&s.current){const c=r.current;if(c){const d=Yf(s.current,{ignoreTransform:!0}),u={x:c.left-d.left,y:c.top-d.top,scaleX:c.width/d.width,scaleY:c.height/d.height};(u.x||u.y)&&o(u)}}a!==l.current&&(l.current=a)},[t,a,s,r]),h.useEffect(()=>{i&&o(null)},[i]),i}function Pje(e){let{animateLayoutChanges:t=Aje,attributes:a,disabled:s,data:r,getNewIndex:i=_je,id:o,strategy:l,resizeObserverConfig:c,transition:d=Tje}=e;const{items:u,containerId:f,activeIndex:p,disabled:x,disableTransforms:v,sortedRects:N,overIndex:b,useDragOverlay:C,strategy:w}=h.useContext(CV),S=Dje(s,x),E=u.indexOf(o),k=h.useMemo(()=>({sortable:{containerId:f,index:E,items:u},...r}),[f,r,E,u]),A=h.useMemo(()=>u.slice(u.indexOf(o)),[u,o]),{rect:T,node:_,isOver:I,setNodeRef:R}=wje({id:o,data:k,disabled:S.droppable,resizeObserverConfig:{updateMeasurementsFor:A,...c}}),{active:U,activatorEvent:D,activeNodeRect:M,attributes:W,setNodeRef:X,listeners:z,isDragging:Q,over:de,setActivatorNodeRef:Y,transform:se}=xje({id:o,data:k,attributes:{...kje,...a},disabled:S.draggable}),J=Zwe(R,X),F=!!U,Ne=F&&!v&&My(p)&&My(b),re=!C&&Q,he=re&&Ne?se:null,De=Ne?he??(l??w)({rects:N,activeNodeRect:M,activeIndex:p,overIndex:b,index:E}):null,Me=My(p)&&My(b)?i({id:o,items:u,activeIndex:p,overIndex:b}):E,ve=U?.id,Be=h.useRef({activeId:ve,items:u,newIndex:Me,containerId:f}),ke=u!==Be.current.items,fe=t({active:U,containerId:f,isDragging:Q,isSorting:F,id:o,index:E,items:u,newIndex:Be.current.newIndex,previousItems:Be.current.items,previousContainerId:Be.current.containerId,transition:d,wasDragging:Be.current.activeId!=null}),ne=Lje({disabled:!fe,index:E,node:_,rect:T});return h.useEffect(()=>{F&&Be.current.newIndex!==Me&&(Be.current.newIndex=Me),f!==Be.current.containerId&&(Be.current.containerId=f),u!==Be.current.items&&(Be.current.items=u)},[F,Me,f,u]),h.useEffect(()=>{if(ve===Be.current.activeId)return;if(ve!=null&&Be.current.activeId==null){Be.current.activeId=ve;return}const ye=setTimeout(()=>{Be.current.activeId=ve},50);return()=>clearTimeout(ye)},[ve]),{active:U,activeIndex:p,attributes:W,data:k,rect:T,index:E,newIndex:Me,items:u,isOver:I,isSorting:F,isDragging:Q,listeners:z,node:_,overIndex:b,over:de,setNodeRef:J,setActivatorNodeRef:Y,setDroppableNodeRef:R,setDraggableNodeRef:X,transform:ne??De,transition:Ae()};function Ae(){if(ne||ke&&Be.current.newIndex===E)return Eje;if(!(re&&!AP(D)||!d)&&(F||fe))return vp.Transition.toString({...d,property:SV})}}function Dje(e,t){var a,s;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(a=e?.draggable)!=null?a:t.draggable,droppable:(s=e?.droppable)!=null?s:t.droppable}}function Ev(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const Oje=[fn.Down,fn.Right,fn.Up,fn.Left],Mje=(e,t)=>{let{context:{active:a,collisionRect:s,droppableRects:r,droppableContainers:i,over:o,scrollableAncestors:l}}=t;if(Oje.includes(e.code)){if(e.preventDefault(),!a||!s)return;const c=[];i.getEnabled().forEach(f=>{if(!f||f!=null&&f.disabled)return;const p=r.get(f.id);if(p)switch(e.code){case fn.Down:s.top<p.top&&c.push(f);break;case fn.Up:s.top>p.top&&c.push(f);break;case fn.Left:s.left>p.left&&c.push(f);break;case fn.Right:s.left<p.left&&c.push(f);break}});const d=gNe({collisionRect:s,droppableRects:r,droppableContainers:c});let u=dV(d,"id");if(u===o?.id&&d.length>1&&(u=d[1].id),u!=null){const f=i.get(a.id),p=i.get(u),x=p?r.get(p.id):null,v=p?.node.current;if(v&&x&&f&&p){const b=GN(v).some((A,T)=>l[T]!==A),C=_V(f,p),w=Ije(f,p),S=b||!C?{x:0,y:0}:{x:w?s.width-x.width:0,y:w?s.height-x.height:0},E={x:x.left,y:x.top};return S.x&&S.y?E:bp(E,S)}}}};function _V(e,t){return!Ev(e)||!Ev(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function Ije(e,t){return!Ev(e)||!Ev(t)||!_V(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const Co=(e,t="")=>`${t} ${new Intl.NumberFormat("en-US",{minimumFractionDigits:0}).format(e||0)}`,mE=e=>e?new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",$je=e=>{if(!e)return 0;const t=new Date-new Date(e);return Math.floor(t/(1e3*60*60*24))},Rje=(e,t)=>{if(!e||e.length===0)return;const a=e.map(c=>({ID:c.id,Name:c.name||`${c.first_name} ${c.last_name}`,Company:c.company_name||c.account?.name||"",Stage:c.stage||c.status,Amount:c.amount||0,Date:mE(c.created_at)})),s=Object.keys(a[0]).join(","),r=a.map(c=>Object.values(c).map(d=>typeof d=="string"?`"${d.replace(/"/g,'""')}"`:d).join(",")),i="data:text/csv;charset=utf-8,"+[s,...r].join(`
`),o=encodeURI(i),l=document.createElement("a");l.setAttribute("href",o),l.setAttribute("download",`${t}.csv`),document.body.appendChild(l),l.click(),document.body.removeChild(l)},fE=({label:e,count:t,value:a,width:s,color:r,onClick:i,isActive:o,isLead:l,weightedValue:c,currencySymbol:d,conversionRate:u,compact:f=!1})=>n.jsxs("div",{className:"flex flex-col items-center w-full",children:[u&&n.jsx("div",{className:`flex justify-center relative z-0 ${f?"-my-1":"-my-2 mb-1"}`,children:n.jsxs("div",{className:`bg-gray-100 text-gray-500 font-bold rounded-full border border-white shadow-sm flex items-center ${f?"text-[8px] px-1.5":"text-[10px] px-2 py-0.5"}`,children:[n.jsx(xT,{className:"mr-1"})," ",u,"%"]})}),n.jsxs("div",{onClick:i,className:`w-full relative group cursor-pointer transition-all duration-300 transform ${o?"scale-105 z-10":"hover:scale-102 hover:opacity-90"}`,children:[n.jsxs("div",{className:"flex justify-between items-end mb-1 px-1",children:[n.jsx("span",{className:`${f?"text-[10px]":"text-xs"} font-bold uppercase tracking-wider ${o?"text-blue-700":"text-gray-500"}`,children:e}),n.jsx("span",{className:`${f?"text-[10px]":"text-xs"} text-gray-400`,children:t})]}),n.jsxs("div",{className:`${f?"h-6":"h-10"} w-full bg-gray-100 rounded-r-lg overflow-hidden flex items-center relative shadow-sm`,children:[n.jsx("div",{className:`h-full ${r} transition-all duration-700 ease-out flex items-center px-2 text-white font-bold relative overflow-hidden`,style:{width:s},children:n.jsx("span",{className:`z-10 drop-shadow-md ${f?"text-xs":"text-sm"}`,children:l?t:Co(a,d)})}),!l&&c>0&&n.jsx("div",{className:"absolute left-0 top-0 h-full bg-white opacity-20 z-20",style:{width:`${c/a*parseFloat(s)}%`}})]})]})]}),zje=({id:e,children:t})=>{const{attributes:a,listeners:s,setNodeRef:r,transform:i,transition:o,isDragging:l}=Pje({id:e}),c={transform:vp.Transform.toString(i),transition:o,zIndex:l?50:"auto",opacity:l?.5:1,position:"relative"};return n.jsx("div",{ref:r,style:c,className:"h-full",children:pt.cloneElement(t,{dragHandleProps:{...a,...s}})})},Uje=({user:e,metrics:t,stages:a,currencySymbol:s,target:r,dragHandleProps:i})=>{t.filteredDeals.reduce((f,p)=>f+parseFloat(p.amount||0)*((p.probability||0)/100),0);const o=t.metrics.CLOSED_WON?.value||0,l=t.metrics.CLOSED_LOST?.value||0,c=t.metrics.CLOSED_WON.count+t.metrics.CLOSED_LOST.count,d=c>0?(t.metrics.CLOSED_WON.count/c*100).toFixed(0):0,u=r>0?o/r*100:0;return n.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md border border-gray-100 flex flex-col h-full hover:shadow-lg transition-shadow relative group",children:[n.jsxs("div",{className:"flex flex-col mb-4 pb-4 border-b border-gray-100",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-bold mr-3 flex-shrink-0",children:e.name.charAt(0)}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-gray-800 text-sm",children:e.name}),n.jsxs("div",{className:"flex gap-2 text-[10px] mt-1",children:[n.jsxs("span",{className:"text-green-600 bg-green-50 px-1.5 py-0.5 rounded border border-green-100",children:["Win: ",d,"%"]}),n.jsxs("span",{className:"text-red-600 bg-red-50 px-1.5 py-0.5 rounded border border-red-100",children:["Lost: ",Co(l,s)]})]})]})]}),i&&n.jsx("button",{...i,className:"p-1.5 text-gray-300 hover:text-blue-500 hover:bg-blue-50 rounded-md cursor-grab active:cursor-grabbing transition-colors touch-none",title:"Drag to reorder",children:n.jsx(xie,{size:16})})]}),r>0?n.jsxs("div",{className:"w-full mt-2 bg-gray-50 p-2 rounded-lg border border-gray-100",children:[n.jsxs("div",{className:"flex justify-between items-center text-[10px] text-gray-500 mb-1",children:[n.jsx("span",{className:"font-semibold text-gray-600",children:"Target Achievement"}),n.jsxs("span",{className:u>=100?"text-green-600 font-bold":"text-blue-600 font-bold",children:[u.toFixed(0),"%"]})]}),n.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden mb-1",children:n.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${u>=100?"bg-green-500":"bg-blue-500"}`,style:{width:`${Math.min(u,100)}%`}})}),n.jsxs("div",{className:"flex justify-between text-[9px] text-gray-400",children:[n.jsxs("span",{children:["Achieved: ",n.jsx("span",{className:"text-gray-700 font-medium",children:Co(o,s)})]}),n.jsxs("span",{children:["Target: ",Co(r,s)]})]})]}):n.jsx("div",{className:"text-[10px] text-gray-400 italic mt-1 text-center bg-gray-50 p-1 rounded",children:"No target assigned"})]}),n.jsx("div",{className:"flex-grow space-y-2",children:a.map((f,p)=>{const x=t.metrics[f.key];let v=null;if(p>0){const N=a[p-1].key,b=t.metrics[N].count;b>0&&(v=(x.count/b*100).toFixed(0))}return n.jsx(fE,{label:f.label,count:x.count,value:x.value,width:x.width,color:x.color,isLead:!f.isDeal,weightedValue:x.weightedValue,currencySymbol:s,conversionRate:v,compact:!0,onClick:()=>{},isActive:!1},f.key)})})]})},Fje=({data:e,stageKey:t,currencySymbol:a})=>{const s=bt(),[r,i]=h.useState({key:null,direction:"desc"}),o=t==="LEADS",l=t==="CLOSED_WON",c=t==="CLOSED_LOST",d=!o&&!l&&!c,u=h.useMemo(()=>r.key?[...e].sort((x,v)=>{let N=x[r.key],b=v[r.key];return(r.key==="amount"||r.key==="probability")&&(N=parseFloat(x[r.key]||0),b=parseFloat(v[r.key]||0)),N<b?r.direction==="asc"?-1:1:N>b?r.direction==="asc"?1:-1:0}):e,[e,r]),f=x=>{i({key:x,direction:r.key===x&&r.direction==="desc"?"asc":"desc"})},p=({columnKey:x})=>r.key!==x?n.jsx(xT,{className:"inline ml-1 opacity-0 group-hover:opacity-30"}):r.direction==="asc"?n.jsx(mie,{className:"inline ml-1 text-blue-600"}):n.jsx(xT,{className:"inline ml-1 text-blue-600"});return!e||e.length===0?n.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-400 bg-gray-50 rounded-xl border-2 border-dashed border-gray-200",children:[n.jsx(zk,{size:48,className:"mb-4 opacity-50"}),n.jsx("p",{className:"font-medium",children:"No records in this stage"})]}):n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden flex flex-col h-full",children:n.jsx("div",{className:"overflow-x-auto flex-grow",children:n.jsxs("table",{className:"w-full text-left border-collapse",children:[n.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:n.jsxs("tr",{children:[n.jsxs("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer group",onClick:()=>f("name"),children:["Name ",n.jsx(p,{columnKey:"name"})]}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Company"}),o&&n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Contact Info"}),d&&n.jsxs(n.Fragment,{children:[n.jsxs("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right cursor-pointer group",onClick:()=>f("amount"),children:["Value ",n.jsx(p,{columnKey:"amount"})]}),n.jsxs("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-center cursor-pointer group",onClick:()=>f("probability"),children:["Prob. ",n.jsx(p,{columnKey:"probability"})]}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-center",children:"Age"})]}),l&&n.jsxs("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right text-green-600 cursor-pointer group",onClick:()=>f("amount"),children:["Booked ",n.jsx(p,{columnKey:"amount"})]}),c&&n.jsxs(n.Fragment,{children:[n.jsxs("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right text-red-600 cursor-pointer group",onClick:()=>f("amount"),children:["Lost Value ",n.jsx(p,{columnKey:"amount"})]}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-center",children:"Lost Date"})]}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right",children:"Owner"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-100",children:u.map(x=>{const v=o?0:$je(x.stage_updated_at||x.created_at),N=v>30&&d;return n.jsxs("tr",{className:"hover:bg-blue-50 transition-colors cursor-pointer group",onClick:()=>s(o?`/admin/leads/${x.id}`:`/admin/deals/info?id=${x.id}`),children:[n.jsxs("td",{className:"p-4",children:[n.jsx("p",{className:"font-bold text-gray-800 text-sm group-hover:text-blue-600 transition-colors",children:o?`${x.first_name} ${x.last_name}`:x.name}),n.jsx("p",{className:"text-xs text-gray-400 mt-0.5",children:mE(x.created_at)})]}),n.jsx("td",{className:"p-4 text-sm text-gray-600",children:o?x.company_name:x.account?.name}),o&&n.jsxs("td",{className:"p-4 text-xs text-gray-500",children:[x.email&&n.jsxs("div",{className:"flex items-center mb-1",children:[n.jsx(Xn,{className:"mr-1"})," ",x.email]}),x.phone&&n.jsxs("div",{className:"flex items-center",children:[n.jsx(At,{className:"mr-1"})," ",x.phone]})]}),d&&n.jsxs(n.Fragment,{children:[n.jsx("td",{className:"p-4 text-right font-medium text-gray-700",children:Co(x.amount,a)}),n.jsx("td",{className:"p-4 text-center",children:n.jsxs("span",{className:`inline-block px-2 py-1 rounded text-xs font-bold ${x.probability>=80?"bg-green-100 text-green-700":x.probability>=50?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-600"}`,children:[x.probability,"%"]})}),n.jsx("td",{className:"p-4 text-center",children:N?n.jsxs("div",{className:"flex items-center justify-center text-red-600 bg-red-50 px-2 py-1 rounded border border-red-100",title:"Stuck for >30 days",children:[n.jsx(Ri,{size:14,className:"mr-1"}),n.jsxs("span",{className:"text-xs font-bold",children:[v,"d"]})]}):n.jsxs("span",{className:"text-xs text-gray-400",children:[v,"d"]})})]}),l&&n.jsx("td",{className:"p-4 text-right font-bold text-green-700",children:Co(x.amount,a)}),c&&n.jsxs(n.Fragment,{children:[n.jsx("td",{className:"p-4 text-right font-bold text-red-600 opacity-75",children:Co(x.amount,a)}),n.jsx("td",{className:"p-4 text-center text-xs text-gray-500",children:mE(x.stage_updated_at)})]}),n.jsx("td",{className:"p-4 text-right",children:n.jsxs("div",{className:"flex items-center justify-end text-gray-500 text-xs",children:[n.jsx(en,{className:"mr-1"}),o?x.lead_owner?.first_name||x.owner?.first_name||x.assigned_to?.first_name||"Unassigned":x.assigned_deals?.first_name||x.deal_creator?.first_name||"Unassigned"]})})]},x.id)})})]})})})},Bje=({leads:e,deals:t,currencySymbol:a,targets:s=[]})=>{const[r,i]=h.useState("ALL"),[o,l]=h.useState("ALL"),[c,d]=h.useState("ALL"),[u,f]=h.useState("AGGREGATE"),[p,x]=h.useState([]),v=mNe(I6(LP,{activationConstraint:{distance:5}}),I6(EP,{coordinateGetter:Mje})),N=h.useMemo(()=>{const T=new Date;if(o==="THIS_MONTH")return{start:new Date(T.getFullYear(),T.getMonth(),1),end:new Date(T.getFullYear(),T.getMonth()+1,0)};if(o==="THIS_QUARTER"){const _=Math.floor(T.getMonth()/3)*3;return{start:new Date(T.getFullYear(),_,1),end:new Date(T.getFullYear(),_+3,0)}}return o==="THIS_YEAR"?{start:new Date(T.getFullYear(),0,1),end:new Date(T.getFullYear(),11,31)}:null},[o]),b=h.useMemo(()=>s.filter(T=>{if(c!=="ALL"){const _=T.user?.id||T.user_id||T.assigned_to;if(parseInt(_)!==parseInt(c))return!1}if(N){const _=new Date(T.start_date),I=new Date(T.end_date);return _<=N.end&&I>=N.start}return!0}),[s,c,N]),C=h.useMemo(()=>{const T=new Map,_=I=>{I&&I.id&&T.set(I.id,`${I.first_name} ${I.last_name}`)};return e.forEach(I=>_(I.lead_owner||I.owner||I.assigned_to)),t.forEach(I=>{_(I.assigned_deals),_(I.deal_creator)}),Array.from(T.entries()).map(([I,R])=>({id:I,name:R}))},[e,t]),w=h.useMemo(()=>{const T=new Date;let _=null;o==="THIS_MONTH"?_=new Date(T.getFullYear(),T.getMonth(),1):o==="THIS_QUARTER"?_=new Date(T.getFullYear(),Math.floor(T.getMonth()/3)*3,1):o==="THIS_YEAR"&&(_=new Date(T.getFullYear(),0,1));const I=z=>{const Q=new Date(z.created_at);if(_&&Q<_)return!1;if(c!=="ALL"){const de=parseInt(c);return!!(z.lead_owner&&(z.lead_owner.id||z.lead_owner)===de||z.assigned_to?.id===de||z.owner?.id===de||z.assigned_deals?.id===de||z.created_by===de)}return!0},R=e.filter(I),U=t.filter(I),D=[{key:"LEADS",label:"Top Leads",color:"bg-blue-400",isDeal:!1},{key:"PROSPECTING",label:"Prospecting",color:"bg-blue-600",isDeal:!0},{key:"QUALIFICATION",label:"Qualification",color:"bg-indigo-600",isDeal:!0},{key:"PROPOSAL",label:"Proposal",color:"bg-purple-600",isDeal:!0},{key:"NEGOTIATION",label:"Negotiation",color:"bg-pink-600",isDeal:!0},{key:"CLOSED_WON",label:"Closed Won",color:"bg-emerald-500",isDeal:!0},{key:"CLOSED_LOST",label:"Closed Lost",color:"bg-red-500",isDeal:!0}],M=(z,Q)=>{const de=D.reduce((se,J)=>(se[J.key]={...J,count:0,value:0,weightedValue:0,items:[]},se),{});de.LEADS.count=z.length,de.LEADS.items=z,Q.forEach(se=>{const J=(se.stage||"").toUpperCase();if(de[J]){de[J].count++,de[J].items.push(se);const F=parseFloat(se.amount||0);de[J].value+=F,de[J].weightedValue+=F*((se.probability||0)/100)}});const Y=Math.max(...Object.values(de).map(se=>se.count),1);return Object.keys(de).forEach(se=>{const J=de[se];J.width=J.count===0?"0%":`${Math.max(J.count/Y*100,15)}%`}),{metrics:de,filteredDeals:Q,filteredLeads:z}},W=M(R,U),X=[];return u==="COMPARE"&&(c==="ALL"?C:C.filter(Q=>Q.id===parseInt(c))).forEach(Q=>{const de=parseInt(Q.id),Y=R.filter(Ne=>(Ne.lead_owner?.id||Ne.lead_owner||Ne.assigned_to?.id||Ne.owner?.id)===de),se=U.filter(Ne=>(Ne.assigned_deals?.id||Ne.created_by)===de),J=b.find(Ne=>{const re=Ne.user?.id||Ne.user_id||Ne.assigned_to;return parseInt(re)===de}),F=parseFloat(J?.amount||J?.target_amount||J?.value||0);(Y.length>0||se.length>0||F>0)&&X.push({user:Q,data:M(Y,se),target:F})}),{stages:D,aggregate:W,userGroups:X}},[t,e,o,c,u,C,b]),S=h.useMemo(()=>{if(!w.userGroups.length)return[];const T=[...w.userGroups];return p.length>0&&T.sort((_,I)=>{const R=p.indexOf(_.user.id),U=p.indexOf(I.user.id);return R!==-1&&U!==-1?R-U:R!==-1?-1:U!==-1?1:0}),T},[w.userGroups,p]),E=T=>{const{active:_,over:I}=T;_.id!==I.id&&x(R=>{const U=S.map(W=>W.user.id),D=U.indexOf(_.id),M=U.indexOf(I.id);return PP(U,D,M)})},k=h.useMemo(()=>{const T=b.reduce((de,Y)=>de+parseFloat(Y.amount||Y.target_amount||Y.value||0),0),_=w.aggregate.metrics,I=_.CLOSED_WON?.value||0,R=_.CLOSED_WON?.count||0,U=_.CLOSED_LOST?.value||0,D=_.CLOSED_LOST?.count||0,M=_.LEADS?.count||0,W=T>0?I/T*100:0,X=R+D,z=X>0?R/X*100:0,Q=M>0?R/M*100:0;return{totalTarget:T,totalWon:I,totalLost:U,progress:W,winRate:z,conversionRate:Q}},[b,w]),A=h.useMemo(()=>r==="ALL"?[]:w.aggregate.metrics[r]?.items||[],[r,w]);return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 flex flex-col h-full",children:[n.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center",children:[n.jsx(zk,{className:"mr-2"})," Pipeline Intelligence"]}),n.jsx("p",{className:"text-sm text-gray-500",children:"Analyze pipeline velocity and bottlenecks."})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 mt-4 md:mt-0",children:[n.jsxs("select",{value:o,onChange:T=>l(T.target.value),className:"bg-gray-50 border border-gray-200 text-gray-700 text-xs rounded-lg p-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"ALL",children:"All Time"}),n.jsx("option",{value:"THIS_MONTH",children:"This Month"}),n.jsx("option",{value:"THIS_QUARTER",children:"This Quarter"}),n.jsx("option",{value:"THIS_YEAR",children:"This Year"})]}),n.jsxs("select",{value:c,onChange:T=>d(T.target.value),className:"bg-gray-50 border border-gray-200 text-gray-700 text-xs rounded-lg p-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"ALL",children:"All Users"}),C.map(T=>n.jsx("option",{value:T.id,children:T.name},T.id))]}),n.jsxs("div",{className:"flex bg-gray-100 p-0.5 rounded-lg",children:[n.jsx("button",{onClick:()=>f("AGGREGATE"),className:`px-2 py-1 rounded-md text-xs font-medium transition-all ${u==="AGGREGATE"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Aggregate"}),n.jsx("button",{onClick:()=>f("COMPARE"),className:`px-2 py-1 rounded-md text-xs font-medium transition-all ${u==="COMPARE"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Compare"})]})]})]}),u==="COMPARE"?n.jsx(hje,{sensors:v,collisionDetection:hNe,onDragEnd:E,children:n.jsx(Sje,{items:S.map(T=>T.user.id),strategy:DP,children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 overflow-x-auto pb-4",children:[S.map(T=>n.jsx(zje,{id:T.user.id,children:n.jsx(Uje,{user:T.user,metrics:T.data,stages:w.stages.filter(_=>_.key!=="CLOSED_LOST"),currencySymbol:a,target:T.target})},T.user.id)),S.length===0&&n.jsx("div",{className:"col-span-full text-center py-10 text-gray-400",children:"No data for selected filters."})]})})}):n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[n.jsxs("div",{className:"lg:col-span-4 flex flex-col space-y-2 relative",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute left-6 top-4 bottom-4 w-0.5 bg-gray-100 -z-0"}),w.stages.filter(T=>T.key!=="CLOSED_LOST").map((T,_)=>{const I=w.aggregate.metrics[T.key];let R=null;if(_>0){const U=w.stages[_-1].key,D=w.aggregate.metrics[U].count;D>0&&(R=(I.count/D*100).toFixed(0))}return n.jsx(fE,{label:T.label,count:I.count,value:I.value,width:I.width,color:I.color,isLead:!T.isDeal,weightedValue:I.weightedValue,currencySymbol:a,isActive:r===T.key,conversionRate:R,onClick:()=>i(T.key)},T.key)})]}),n.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[n.jsx("div",{className:"mb-2 text-xs font-bold text-gray-400 uppercase",children:"Funnel Health"}),n.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center mb-4",children:[n.jsxs("div",{className:"bg-green-50 rounded p-2 border border-green-100",children:[n.jsx("p",{className:"text-[9px] text-green-600 uppercase font-bold",children:"Win Rate"}),n.jsxs("p",{className:"text-sm font-bold text-gray-800",children:[k.winRate.toFixed(0),"%"]})]}),n.jsxs("div",{className:"bg-blue-50 rounded p-2 border border-blue-100",children:[n.jsx("p",{className:"text-[9px] text-blue-600 uppercase font-bold",children:"Conversion"}),n.jsxs("p",{className:"text-sm font-bold text-gray-800",children:[k.conversionRate.toFixed(0),"%"]})]}),n.jsxs("div",{className:"bg-red-50 rounded p-2 border border-red-100",children:[n.jsx("p",{className:"text-[9px] text-red-600 uppercase font-bold",children:"Lost Value"}),n.jsx("p",{className:"text-sm font-bold text-gray-800",children:Co(k.totalLost,a)})]})]}),n.jsx(fE,{label:"Closed Lost",count:w.aggregate.metrics.CLOSED_LOST.count,value:w.aggregate.metrics.CLOSED_LOST.value,width:w.aggregate.metrics.CLOSED_LOST.width,color:"bg-red-500 opacity-90",isLead:!1,weightedValue:0,currencySymbol:a,isActive:r==="CLOSED_LOST",onClick:()=>i("CLOSED_LOST")},"CLOSED_LOST"),n.jsxs("div",{className:"bg-gray-50 p-2 rounded-lg border border-gray-100 mt-4",children:[n.jsxs("div",{className:"flex justify-between items-center text-[10px] mb-1",children:[n.jsxs("span",{className:"font-bold text-gray-600 flex items-center",children:[n.jsx(tr,{className:"mr-1"})," Total Target"]}),n.jsxs("span",{className:k.progress>=100?"text-green-600 font-bold":"text-blue-600 font-bold",children:[k.progress.toFixed(0),"%"]})]}),n.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden mb-1",children:n.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${k.progress>=100?"bg-green-500":"bg-blue-500"}`,style:{width:`${Math.min(k.progress,100)}%`}})}),n.jsxs("div",{className:"flex justify-between text-[9px] text-gray-400",children:[n.jsxs("span",{children:["Achieved: ",n.jsx("span",{className:"text-gray-700 font-medium",children:Co(k.totalWon,a)})]}),n.jsxs("span",{children:["Goal: ",Co(k.totalTarget,a)]})]})]})]})]}),n.jsxs("div",{className:"lg:col-span-8 h-[600px] flex flex-col",children:[n.jsxs("div",{className:"bg-gray-50 p-3 rounded-t-xl border-b border-gray-200 flex justify-between items-center",children:[n.jsx("h3",{className:"text-sm font-bold text-gray-800 flex items-center",children:r==="ALL"?n.jsx("span",{children:"Select a stage to view details"}):n.jsxs(n.Fragment,{children:[n.jsx("span",{className:`w-2.5 h-2.5 rounded-full mr-2 ${w.aggregate.metrics[r]?.color}`}),w.stages.find(T=>T.key===r)?.label," Details",n.jsxs("span",{className:"ml-2 px-2 py-0.5 bg-white border border-gray-200 text-gray-600 text-[10px] rounded-full",children:[A.length," records"]})]})}),r!=="ALL"&&A.length>0&&n.jsxs("button",{onClick:()=>Rje(A,`Funnel_${r}`),className:"text-[10px] font-bold text-blue-600 hover:bg-blue-100 px-2 py-1 rounded transition-colors flex items-center",children:[n.jsx(Fl,{className:"mr-1"})," Export"]})]}),r==="ALL"?n.jsxs("div",{className:"bg-white flex-grow rounded-b-xl border border-gray-100 flex flex-col items-center justify-center p-12 text-center text-gray-400",children:[n.jsx(pie,{size:48,className:"mb-4 text-blue-100"}),n.jsx("p",{children:"Click on any stage bar (including Lost Deals) to inspect records."})]}):n.jsx(Fje,{data:A,stageKey:r,currencySymbol:a})]})]})]})},Hje=(e,t="")=>`${t} ${new Intl.NumberFormat("en-US",{minimumFractionDigits:0}).format(e)}`,Gje=e=>{const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),a=t.getUTCDay()||7;t.setUTCDate(t.getUTCDate()+4-a);const s=new Date(Date.UTC(t.getUTCFullYear(),0,1));return Math.ceil(((t-s)/864e5+1)/7)},Wje=({currencySymbol:e=""})=>{const[t,a]=h.useState("month"),[s,r]=h.useState([]),[i,o]=h.useState([]),[l,c]=h.useState([]),[d,u]=h.useState(!1),f=new Date,p=f.getFullYear(),x=f.getMonth()+1,v=Gje(f),N=h.useCallback(async()=>{u(!0);try{const S=new URLSearchParams;S.append("period_type","MONTHLY"),S.append("period_year",p),S.append("period_number",x);const E=await ie.get(`/targets/leaderboard?${S.toString()}`).catch(()=>({data:{entries:[]}}));o(E.data?.entries||[]);const k=new URLSearchParams;k.append("period_type","ANNUAL"),k.append("period_year",p);const A=await ie.get(`/targets/leaderboard?${k.toString()}`).catch(()=>({data:{entries:[]}}));c(A.data?.entries||[]);const T=new Date,_=new Date;_.setDate(_.getDate()-7);const I=new URLSearchParams;I.append("start_date",_.toISOString().split("T")[0]),I.append("end_date",T.toISOString().split("T")[0]);const R=await ie.get(`/targets/leaderboard?${I.toString()}`).catch(()=>({data:{entries:[]}}));r(R.data?.entries||[])}catch(S){console.error("Error fetching leaderboard data:",S)}finally{u(!1)}},[p,x]);h.useEffect(()=>{N()},[N]);const b=h.useMemo(()=>{let S=[];switch(t){case"week":S=s;break;case"month":S=i;break;case"year":S=l;break;default:S=i}return Array.isArray(S)?S.slice(0,5):[]},[t,s,i,l]),C=[{id:"week",label:"Week"},{id:"month",label:"Month"},{id:"year",label:"Year"}],w=S=>{switch(S){case 0:return"bg-yellow-100 text-yellow-700 border-yellow-300";case 1:return"bg-gray-100 text-gray-600 border-gray-300";case 2:return"bg-orange-100 text-orange-700 border-orange-300";default:return"bg-gray-50 text-gray-500 border-gray-200"}};return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[n.jsx("div",{className:"flex justify-between items-center mb-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Kc,{className:"text-blue-500",size:20}),n.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Top 5 Performers"})]})}),n.jsx("div",{className:"flex space-x-1 mb-4 bg-gray-100 rounded-lg p-1",children:C.map(S=>n.jsx("button",{onClick:()=>a(S.id),className:`flex-1 py-1.5 px-3 text-xs font-medium rounded-md transition-all duration-200 ${t===S.id?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:S.label},S.id))}),d?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"})}):b.length>0?n.jsx("div",{className:"space-y-3 flex-1",children:b.map((S,E)=>n.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-gray-50 transition-colors",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold border ${w(E)}`,children:E+1}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-800 truncate max-w-[120px]",children:S.user_name||"Unknown Rep"}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx("div",{className:"w-16 h-1.5 bg-gray-200 rounded-full overflow-hidden",children:n.jsx("div",{className:`h-full rounded-full ${S.achievement_percentage>=100?"bg-green-500":S.achievement_percentage>=50?"bg-yellow-500":"bg-red-400"}`,style:{width:`${Math.min(S.achievement_percentage,100)}%`}})}),n.jsxs("span",{className:"text-[10px] text-gray-500",children:[S.achievement_percentage?.toFixed(1),"%"]})]})]})]}),n.jsx("p",{className:"text-sm font-bold text-gray-900",children:Hje(S.achieved_amount||0,e)})]},S.user_id||E))}):n.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-gray-400",children:[n.jsx(Ct,{size:32,className:"mb-2 opacity-50"}),n.jsx("p",{className:"text-sm",children:"No data for this period"})]}),n.jsx("div",{className:"mt-auto pt-3 border-t border-gray-100",children:n.jsxs("p",{className:"text-[10px] text-gray-400 text-center",children:[t==="week"&&`Week ${v}, ${p}`,t==="month"&&`${f.toLocaleString("default",{month:"long"})} ${p}`,t==="year"&&`Year ${p}`]})})]})},qje=e=>n.jsx(Ht,{...e}),Vje=e=>n.jsx(dd,{...e}),OP=e=>n.jsx(zs,{...e}),Yje=e=>n.jsx(Xp,{...e}),Qje=e=>n.jsx(Pw,{...e}),Kje=e=>n.jsx(Ct,{...e}),Xje=e=>n.jsx(At,{...e}),Zje=e=>n.jsx(Ow,{...e}),AV=e=>n.jsx(Dw,{...e}),Jje=e=>n.jsx(Zn,{...e}),TV=e=>n.jsx(en,{...e}),e1e=e=>n.jsx(Gn,{...e}),EV=e=>n.jsx(Kt,{...e}),t1e=e=>n.jsx(xn,{...e}),kV=e=>n.jsx(tr,{...e}),n1e=e=>n.jsx(ba,{...e}),a1e=e=>n.jsx(Ct,{...e}),s1e=e=>n.jsx(Ls,{...e}),r1e=e=>n.jsx(Hl,{...e}),i1e=e=>n.jsx(ws,{...e}),LV=(e,t="")=>{const a=parseFloat(e)||0;return new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short",maximumFractionDigits:1}).format(a).replace(/^/,`${t} `)},o1e=e=>{if(!e)return 0;const t=new Date-new Date(e);return Math.floor(t/(1e3*60*60*24))},l1e=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},c1e=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},d1e=e=>{switch(e){case"call":return{Icon:Xje,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:Zje,color:"text-green-600",bgColor:"bg-green-100"};default:return{Icon:Kje,color:"text-blue-500",bgColor:"bg-blue-100"}}},u1e=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},m1e=({searchQuery:e,onSearchChange:t,searchResults:a,onSearchResultClick:s})=>{const r=bt(),[i,o]=h.useState(!1),l=h.useRef(null),c=[{icon:Vje,label:"Account"},{icon:TV,label:"Contact"},{icon:e1e,label:"Leads"},{icon:EV,label:"Deals"},{icon:t1e,label:"Quotes"},{icon:kV,label:"Target"},{icon:n1e,label:"Task"},{icon:a1e,label:"Meeting"},{icon:s1e,label:"Call"},{icon:i1e,label:"Audit"},{icon:r1e,label:"Territory"}];h.useEffect(()=>{const f=p=>{l.current&&!l.current.contains(p.target)&&o(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const d=f=>{t(f.target.value),o(f.target.value.trim().length>0)},u=f=>{s&&s(f),o(!1)};return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[n.jsxs("div",{className:"w-full flex justify-center relative",ref:l,children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-2xl lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[n.jsx(qje,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),n.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:d,onFocus:()=>e.trim().length>0&&o(!0)})]}),i&&Array.isArray(a)&&a.length>0&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:a.map((f,p)=>n.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>u(f),children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:f.name}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:f.type}),f.details&&n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:f.details})]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${f.type==="Lead"?"bg-blue-100 text-blue-600":f.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:f.type})]})},p))})]}),n.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:n.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:c.map((f,p)=>n.jsxs("div",{className:"relative flex-shrink-0 group",children:[n.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":f.label,title:f.label,onClick:()=>{const x={Account:"/admin/accounts",Contact:"/admin/contacts",Leads:"/admin/leads",Deals:"/admin/deals",Quotes:"/admin/quotes",Target:"/admin/targets",Task:"/admin/tasks",Meeting:"/admin/meetings",Call:"/admin/calls",Audit:"/admin/audit",Territory:"/admin/territory"};x[f.label]&&r(x[f.label])},children:n.jsx(f.icon,{size:24,className:"lg:scale-95"})}),n.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-1.5 bg-gray-900 text-white text-xs font-semibold rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-75 ease-in-out z-50 shadow-lg",children:[f.label,n.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]},p))})})]})},f1e=({action:e,description:t,entity_type:a,entity_name:s,timestamp:r})=>{const i=bt(),o=u=>{if(!u)return"Unknown";const f=new Date(u),x=new Date-f,v=Math.floor(x/6e4),N=Math.floor(x/36e5),b=Math.floor(x/864e5);return v<1?"Just now":v<60?`${v} min ago`:N<24?`${N} hour${N>1?"s":""} ago`:b<7?`${b} day${b>1?"s":""} ago`:f.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},l=e||t||"Action",c=s||a||"System",d=o(r);return n.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/admin/audit"),children:[n.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[l," ",n.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",c,")"]})]}),n.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:d})]})},h1e=({logs:e,loading:t})=>{const a=bt();return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/admin/audit"),children:[n.jsx("span",{children:"See All"}),n.jsx(AV,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?n.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((s,r)=>n.jsx(f1e,{...s},r))}):n.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},g1e=({icon:e,title:t,value:a,color:s,bgColor:r,loading:i,onClick:o})=>n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o||(()=>console.log(`Clicked metric card: ${t}`)),children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:20})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a||0})]})]}),p1e=({revenueData:e,loading:t})=>{const a=bt(),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=h.useMemo(()=>{if(!e||e.length===0){const N=new Date().getMonth(),b=[],C=[];for(let w=0;w<=N;w++)b.push(s[w]),C.push(0);return{labels:b,revenues:C,maxRevenue:0}}const l={};e.forEach(v=>{const N=v.close_date||v.closeDate||null,b=v.stage||"",C=b.toUpperCase()==="CLOSED_WON"||b==="CLOSED_WON";let w=v.amount;w&&typeof w=="object"&&w.toString?w=parseFloat(w.toString()):w=parseFloat(w)||0;const S=w>0;if(N&&N!==null&&C&&S)try{let E=new Date(N);if(isNaN(E.getTime())){const k=String(N).split("T")[0];E=new Date(k+"T00:00:00")}if(!isNaN(E.getTime())){const k=E.getFullYear(),A=E.getMonth()+1,T=`${k}-${String(A).padStart(2,"0")}`;l[T]||(l[T]=0),l[T]+=w}}catch(E){console.error("Error parsing deal date:",N,E)}});const c=Object.keys(l).map(v=>parseInt(v.split("-")[0])),d=c.length>0?[...new Set(c)].sort():[],u=new Date().getFullYear(),f=[],p=[];for(let v=0;v<12;v++){const N=`${u}-${String(v+1).padStart(2,"0")}`;f.push(s[v]),p.push(l[N]||0)}if(d.length>0){const v=Math.max(...d);if(v>u)for(let N=u+1;N<=v;N++)for(let b=0;b<12;b++){const C=`${N}-${String(b+1).padStart(2,"0")}`,w=l[C]||0;f.push(`${s[b]} ${N}`),p.push(w)}}const x=Math.max(...p,1);return{labels:f,revenues:p,maxRevenue:x}},[e]),i=r.labels,o=r.revenues;return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/admin/deals"),children:[n.jsx("span",{children:"See All"}),n.jsx(AV,{size:14,className:"transform -rotate-45"})]})]}),n.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:n.jsx("div",{className:"w-full h-full flex items-center justify-start lg:justify-center overflow-x-auto sm:overflow-x-hidden",children:i&&i.length>0&&o&&o.length>0?n.jsx(BN,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:l=>l>=1e3?`${(l/1e3).toFixed(0)}k`:l.toString()}],series:[{data:o,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%",minWidth:{xs:600,lg:"100%"}}}):n.jsxs("div",{className:"text-center text-gray-500",children:[n.jsx("p",{className:"text-sm",children:"No revenue data available"}),n.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},ZS=({title:e,items:t,children:a,onSeeAll:s})=>{const r=bt(),i=()=>{if(s)s();else{const o={"Latest Leads":"/admin/leads","Latest Deals":"/admin/deals","Upcoming Activities":"/admin/tasks"};o[e]&&r(o[e])}};return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col h-full",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),n.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),a]})},x1e=({first_name:e,last_name:t,company_name:a,source:s,created_at:r,id:i})=>{const o=bt(),{text:l,bg:c}=c1e(s||"Website"),d=x=>{if(!x)return"Unknown";const v=new Date(x),b=new Date-v,C=Math.floor(b/6e4),w=Math.floor(b/36e5),S=Math.floor(b/864e5);return C<60?`${C} min ago`:w<24?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):S<7?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):v.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},u=`${e||""} ${t||""}`.trim()||"Unknown",f=a||"Unknown Company",p=d(r);return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&o(`/admin/leads/${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800",children:u}),n.jsx("p",{className:"text-xs text-gray-500",children:f})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-400",children:p}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${l} ${c} px-2 py-0.5 rounded-full`,children:s||"Website"})]})]})})},y1e=({name:e,amount:t,account:a,stage:s,created_at:r,stage_updated_at:i,id:o,previousAmount:l,currencySymbol:c})=>{const d=bt(),f={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[s]||s||"Unknown",{text:p,bg:x}=l1e(f),v=o1e(i||r),N=v>30&&s!=="CLOSED_WON"&&s!=="CLOSED_LOST",b=parseFloat(t||0),C=l?b>=l?"up":"down":"up",w=C==="up"?Yje:Qje,S=C==="up"?"text-green-400":"text-red-400",E=a?.name||"Unknown Company";return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>o&&d(`/admin/deals/info?id=${o}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex-shrink",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),N&&n.jsxs("span",{className:"text-[10px] bg-red-100 text-red-600 px-1.5 py-0.5 rounded border border-red-200 font-bold flex items-center",children:[n.jsx(OP,{size:10,className:"mr-1"})," ",v," days stuck"]})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:E}),n.jsx("div",{className:"mt-1 flex items-center space-x-2",children:n.jsx("span",{className:`inline-block text-xs font-medium ${p} ${x} px-2 py-0.5 rounded-full`,children:f})})]}),n.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[n.jsx("p",{className:"text-md font-bold text-gray-800",children:LV(b,c)}),n.jsx(w,{size:16,className:`${S} mt-1`})]})]})})},b1e=({type:e,title:t,assignedTo:a,dueDate:s,scheduledDate:r,priority:i,id:o,activityType:l,fullData:c})=>{const d=bt(),f=l||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:p,color:x,bgColor:v}=d1e(f),{text:N,bg:b}=u1e(i||"MEDIUM"),S=(A=>{if(!A)return"No date set";const T=new Date(A),I=T-new Date,R=Math.floor(I/864e5);return R===0?`Today, ${T.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:R===1?`Tomorrow, ${T.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:R===-1?`Yesterday, ${T.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:T.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(s||r),E=a||"Unassigned",k=()=>{o&&(c?f==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(c)),d(`/admin/calls/info?id=${o}`)):f==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(c)),d(`/admin/meetings/info?id=${o}`)):d("/admin/tasks"):d(f==="call"?`/admin/calls/info?id=${o}`:f==="meeting"?`/admin/meetings/info?id=${o}`:"/admin/tasks"))};return n.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:k,children:[n.jsx("div",{className:`p-2 rounded-lg ${v} mr-3 flex-shrink-0 mt-1`,children:n.jsx(p,{size:20,className:`${x}`})}),n.jsxs("div",{className:"flex-grow",children:[n.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[n.jsx("span",{className:"text-xl leading-none mr-2",children:""}),t||"Untitled Activity"]}),n.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[n.jsxs("p",{className:"flex items-center",children:[n.jsx(OP,{size:14,className:"mr-1.5 text-gray-400"}),S]}),n.jsxs("p",{className:"flex items-center",children:[n.jsx(TV,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",E]})]})]}),n.jsx("span",{className:`inline-block text-xs font-medium ${N} ${b} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},v1e=()=>{const e=bt(),{user:t}=Xt(),a=t?.company?.currency||"",[s,r]=h.useState([]),[i,o]=h.useState(0),[l,c]=h.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0}),[d,u]=h.useState([]),[f,p]=h.useState([]),[x,v]=h.useState([]),[N,b]=h.useState([]),[C,w]=h.useState([]),[S,E]=h.useState(!0),[k,A]=h.useState(null),[T,_]=h.useState(""),[I,R]=h.useState([]),[U,D]=h.useState([]),[M,W]=h.useState([]),[X,z]=h.useState(new Date),Q=h.useRef(null);h.useRef(null);const de=h.useMemo(()=>{try{if(!T.trim())return[];const F=T.toLowerCase().trim(),Ne=[];return Array.isArray(I)&&I.forEach(re=>{const he=`${re.first_name||""} ${re.last_name||""}`.trim().toLowerCase(),je=(re.company_name||"").toLowerCase(),De=(re.email||"").toLowerCase(),Me=(re.phone||"").toLowerCase();(he.includes(F)||je.includes(F)||De.includes(F)||Me.includes(F))&&Ne.push({id:re.id,name:`${re.first_name||""} ${re.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:re.company_name||"No company",route:`/admin/leads/${re.id}`})}),Array.isArray(U)&&U.forEach(re=>{const he=(re.name||"").toLowerCase(),je=(re.account?.name||"").toLowerCase(),De=(re.description||"").toLowerCase();(he.includes(F)||je.includes(F)||De.includes(F))&&Ne.push({id:re.id,name:re.name||"Unnamed Deal",type:"Deal",details:re.account?.name||"No account",route:`/admin/deals/info?id=${re.id}`})}),Array.isArray(M)&&M.forEach(re=>{const he=(re.name||"").toLowerCase(),je=(re.email||"").toLowerCase(),De=(re.phone||"").toLowerCase(),Me=(re.website||"").toLowerCase();(he.includes(F)||je.includes(F)||De.includes(F)||Me.includes(F))&&Ne.push({id:re.id,name:re.name||"Unnamed Account",type:"Account",details:re.email||re.phone||"No contact info",route:"/admin/accounts"})}),Ne.slice(0,10)}catch(F){return console.error("Error in search:",F),[]}},[T,I,U,M]),Y=F=>{F.route&&(e(F.route),_(""))},se=h.useCallback(async()=>{E(!0),A(null);try{const[F,Ne,re,he,je,De,Me,ve]=await Promise.all([ie.get("/leads/admin/getLeads").catch(Ee=>(console.error("Error fetching leads:",Ee),{data:[]})),ie.get("/deals/admin/fetch-all").catch(Ee=>(console.error("Error fetching deals:",Ee),{data:[]})),ie.get("/accounts/admin/fetch-all").catch(Ee=>(console.error("Error fetching accounts:",Ee),{data:[]})),ie.get("/tasks/all").catch(Ee=>(console.error("Error fetching tasks:",Ee),{data:[]})),ie.get("/meetings/admin/fetch-all").catch(Ee=>(console.error("Error fetching meetings:",Ee),{data:[]})),ie.get("/calls/admin/fetch-all").catch(Ee=>(console.error("Error fetching calls:",Ee),{data:[]})),ie.get("/logs/read-all").catch(Ee=>(console.error("Error fetching logs:",Ee),{data:[]})),ie.get("/targets/admin/fetch-all").catch(Ee=>(console.error("Error fetching targets:",Ee),{data:[]}))]),Be=Array.isArray(F.data)?F.data:[],ke=Array.isArray(Ne.data)?Ne.data:[],fe=Array.isArray(re.data)?re.data:[],ne=Array.isArray(he.data)?he.data:[],Ae=Array.isArray(je.data)?je.data:[],ye=Array.isArray(De.data)?De.data:[],Ie=Array.isArray(Me.data)?Me.data:[],Ve=Array.isArray(ve.data)?ve.data:[];R(Be),D(ke),W(fe),r(Ve);const Te=Ve.reduce((Ee,ae)=>{const He=ae.amount||ae.value||ae.target_amount||0,Re=parseFloat(typeof He=="string"?He.replace(/[^\d.-]/g,""):He);return Ee+(isNaN(Re)?0:Re)},0);o(Te),c({activeLeads:Be.filter(Ee=>Ee.status&&!["Lost","Converted"].includes(Ee.status)).length,totalDeals:ke.length,activeAccounts:fe.length,overdueTasks:ne.filter(Ee=>!Ee.dueDate||Ee.status==="Completed"?!1:new Date(Ee.dueDate)<new Date).length});const Fe=[...Be].sort((Ee,ae)=>new Date(ae.created_at||0)-new Date(Ee.created_at||0)).slice(0,5);u(Fe);const Ye=[...ke].sort((Ee,ae)=>new Date(ae.created_at||0)-new Date(Ee.created_at||0)).slice(0,5);p(Ye);const B=[];ye.forEach(Ee=>{const ae=Ee.due_date||Ee.call_time,He=(Ee.status||"").toUpperCase();ae&&!["COMPLETED","MISSED","NOT_HELD","HELD"].includes(He)&&B.push({type:"Call",title:Ee.subject||"Untitled Call",assignedTo:Ee.assigned_to||(Ee.call_assign_to?`${Ee.call_assign_to.first_name||""} ${Ee.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:ae,priority:(Ee.priority||"MEDIUM").toUpperCase(),id:Ee.id,activityType:"call",fullData:Ee})}),Ae.forEach(Ee=>{const ae=Ee.dueDate||Ee.start_time,He=(Ee.status||"").toUpperCase();ae&&!["COMPLETED","CANCELLED","DONE"].includes(He)&&B.push({type:"Meeting",title:Ee.subject||Ee.activity||"Untitled Meeting",assignedTo:Ee.assignedTo||(Ee.meet_assign_to?`${Ee.meet_assign_to.first_name||""} ${Ee.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:ae,priority:(Ee.priority||"MEDIUM").toUpperCase(),id:Ee.id,activityType:"meeting",fullData:Ee})});const xe={HIGH:1,MEDIUM:2,LOW:3},_e=B.sort((Ee,ae)=>{const He=xe[Ee.priority]||3,Re=xe[ae.priority]||3;return He!==Re?He-Re:new Date(Ee.scheduledDate||0)-new Date(ae.scheduledDate||0)}).slice(0,5);v(_e),w(ke);const ce=[...Ie].sort((Ee,ae)=>new Date(ae.timestamp||0)-new Date(Ee.timestamp||0));b(ce)}catch(F){console.error("Error fetching dashboard data:",F),A("Failed to load dashboard data. Please refresh the page.")}finally{E(!1)}},[]);h.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",se(),Q.current=setInterval(()=>{se(),z(new Date)},3e4),()=>{Q.current&&clearInterval(Q.current)}),[se]);const J=[{icon:Jje,title:"Active Leads",value:l.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/admin/leads")},{icon:kV,title:"Total Targets",value:LV(i,a),color:"text-purple-600",bgColor:"bg-purple-50",onClick:()=>e("/admin/targets")},{icon:EV,title:"Total Deals",value:l.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/admin/deals")},{icon:OP,title:"Overdue Tasks",value:l.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/admin/tasks")}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[S&&n.jsx(zt,{}),n.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[k&&n.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:n.jsx("p",{className:"font-medium",children:k})}),n.jsx("div",{className:"mb-8",children:n.jsx(m1e,{searchQuery:T,onSearchChange:_,searchResults:de,onSearchResultClick:Y})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-8",children:J.map(F=>n.jsx(g1e,{...F,loading:S},F.title))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[n.jsx(h1e,{logs:N,loading:S}),n.jsx(Wje,{currencySymbol:a})]}),n.jsx("div",{className:"mb-8",children:n.jsx(Bje,{leads:I,deals:U,targets:s,currencySymbol:a})}),n.jsx("div",{className:"grid grid-cols-1 mb-8",children:n.jsx(p1e,{revenueData:C,loading:S})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsx(ZS,{title:"Latest Leads",children:d.length>0?d.map((F,Ne)=>n.jsx(x1e,{...F},F.id||Ne)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),n.jsx(ZS,{title:"Latest Deals",children:f.length>0?f.map((F,Ne)=>n.jsx(y1e,{...F,stage_updated_at:F.stage_updated_at,currencySymbol:a},F.id||Ne)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),n.jsx(ZS,{title:"Upcoming Activities",children:x.length>0?x.map((F,Ne)=>n.jsx(b1e,{...F},F.id||Ne)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})};function tn({totalItems:e=0,pageSize:t=10,currentPage:a=1,onPrev:s,onNext:r,onPageSizeChange:i,pageSizeOptions:o=[10,20,30,40,50],className:l="",label:c="records"}){const d=e===0?1:Math.ceil(e/t),u=e===0?0:(a-1)*t+1,f=Math.min(a*t,e),p=a<=1||e===0,x=a>=d||e===0,v="inline-flex items-center gap-1 px-3 sm:px-4 py-2 text-sm font-semibold rounded-lg transition focus:outline-none focus:ring-2 focus:ring-offset-1",N="bg-black text-white hover:bg-gray-900",b="bg-gray-200 text-gray-500 cursor-not-allowed focus:ring-transparent";return n.jsxs("div",{className:`flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 ${l}`,children:[n.jsxs("div",{className:"text-sm text-gray-600 font-medium text-center sm:text-left w-full sm:w-auto order-1",children:["Showing ",e===0?0:u,"-",f," of ",e," ",c]}),i&&n.jsxs("div",{className:"flex items-center justify-center gap-2 w-full sm:w-auto order-3 sm:order-2",children:[n.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"Rows per page"}),n.jsx("select",{value:t,onChange:C=>i(Number(C.target.value)),className:"border border-gray-300 rounded-md text-sm py-1 pl-2 pr-6 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:o.map(C=>n.jsx("option",{value:C,children:C},C))})]}),n.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-end w-full sm:w-auto order-2 sm:order-3",children:[n.jsxs("button",{type:"button",onClick:s,disabled:p,className:`${v} ${p?b:N}`,children:[n.jsx(hie,{className:"text-base"}),"Prev"]}),n.jsxs("div",{className:"text-sm font-semibold text-white bg-gray-900 border border-gray-900 shadow-sm px-3 py-1.5 rounded-full",children:["Page ",e===0?0:a," of"," ",e===0?0:d]}),n.jsxs("button",{type:"button",onClick:r,disabled:x,className:`${v} ${x?b:N}`,children:["Next",n.jsx(It,{className:"text-base"})]})]})]})}const w1e=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),N1e=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,a,s)=>s?s.toUpperCase():a.toLowerCase()),Q6=e=>{const t=N1e(e);return t.charAt(0).toUpperCase()+t.slice(1)},PV=(...e)=>e.filter((t,a,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===a).join(" ").trim(),j1e=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var C1e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const S1e=h.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:r="",children:i,iconNode:o,...l},c)=>h.createElement("svg",{ref:c,...C1e,width:t,height:t,stroke:e,strokeWidth:s?Number(a)*24/Number(t):a,className:PV("lucide",r),...!i&&!j1e(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,u])=>h.createElement(d,u)),...Array.isArray(i)?i:[i]]));const Qf=(e,t)=>{const a=h.forwardRef(({className:s,...r},i)=>h.createElement(S1e,{ref:i,iconNode:t,className:PV(`lucide-${w1e(Q6(e))}`,`lucide-${e}`,s),...r}));return a.displayName=Q6(e),a};const _1e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],A1e=Qf("globe",_1e);const T1e=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],K6=Qf("lock",T1e);const E1e=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],k1e=Qf("message-circle",E1e);const L1e=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],P1e=Qf("message-square",L1e);const D1e=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],O1e=Qf("send",D1e);const M1e=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],VN=Qf("x",M1e);function I1e({comments:e=[],onAddComment:t,currentUser:a}){const[s,r]=h.useState(""),[i,o]=h.useState(!1),[l,c]=h.useState(!1),d=async u=>{if(u.preventDefault(),!!s.trim()){c(!0);try{t&&await t({comment:s.trim(),is_private:i}),r("")}catch(f){console.error("Failed to add comment:",f)}finally{c(!1)}}};return n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200 mt-5",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2 flex items-center gap-2",children:[n.jsx(P1e,{className:"w-5 h-5 text-gray-600"}),"Comments",e.length>0&&n.jsxs("span",{className:"text-sm font-normal text-gray-500",children:["(",e.length,")"]})]}),n.jsx("div",{className:"mt-4",children:e.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:n.jsx(k1e,{className:"w-8 h-8 text-gray-400"})}),n.jsx("h4",{className:"text-lg font-medium text-gray-700 mb-1",children:"No comments yet"}),n.jsx("p",{className:"text-sm text-gray-500 max-w-sm",children:"Be the first to share your thoughts. Start a conversation by adding a comment below."})]}):n.jsx("div",{className:"space-y-4",children:e.map(u=>n.jsxs("div",{className:"flex gap-3 p-4 bg-gray-50 rounded-lg border border-gray-100",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold text-sm",children:u.comment_creator?.first_name?.[0]||u.comment_creator?.email?.[0]?.toUpperCase()||"U"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx("span",{className:"font-medium text-gray-800",children:u.comment_creator?.first_name||u.comment_creator?.email||"Unknown User"}),n.jsx("span",{className:"text-xs text-gray-400",children:new Date(u.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}),u.is_private&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-amber-100 text-amber-700 rounded-full text-xs font-medium",children:[n.jsx(K6,{className:"w-3 h-3"}),"Private"]})]}),n.jsx("p",{className:"mt-1 text-gray-600 whitespace-pre-wrap break-words",children:u.comment})]})]},u.id))})}),n.jsxs("form",{onSubmit:d,className:"mt-6 pt-4 border-t border-gray-200",children:[n.jsx("div",{className:"relative",children:n.jsx("textarea",{value:s,onChange:u=>r(u.target.value),placeholder:"Write a comment...",rows:2,className:"w-full px-4 py-3 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-700 placeholder-gray-400"})}),n.jsxs("div",{className:"flex items-center justify-between mt-3",children:[n.jsx("button",{type:"button",onClick:()=>o(!i),className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-all duration-200 ${i?"bg-amber-100 text-amber-700 hover:bg-amber-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:i?n.jsxs(n.Fragment,{children:[n.jsx(K6,{className:"w-4 h-4"}),"Private"]}):n.jsxs(n.Fragment,{children:[n.jsx(A1e,{className:"w-4 h-4"}),"Public"]})}),n.jsxs("button",{type:"submit",disabled:!s.trim()||l,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[n.jsx(O1e,{className:"w-4 h-4"}),l?"Posting...":"Post Comment"]})]})]})]})}const JS=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Vendor"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Delete"}],e_={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",parent_company:"",status:"PROSPECT",territory_id:"",assigned_to:""},Js=e=>e?e.toUpperCase():"",t_=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",$1e=e=>{switch(Js(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},R1e=e=>{switch(Js(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}};function z1e(){const e=bt();h.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[t,a]=h.useState(!1),[s,r]=h.useState(!1),[i,o]=h.useState(!1),[l,c]=h.useState(null),[d,u]=h.useState(null),[f,p]=h.useState(e_),[x,v]=h.useState(null),[N,b]=h.useState([]),[C,w]=h.useState(!1),[S,E]=h.useState([]),[k,A]=h.useState(null),[T,_]=h.useState([]),[I,R]=h.useState([]),[U,D]=h.useState("Filter by Status"),[M,W]=h.useState(""),[X,z]=h.useState(null),[Q,de]=h.useState(!1),[Y,se]=h.useState(1),[J,F]=h.useState(10),[Ne,re]=h.useState("Overview"),[he,je]=h.useState(""),[De,Me]=h.useState(!1),[ve,Be]=h.useState([]),[ke,fe]=h.useState({}),[ne,Ae]=h.useState(null),ye=h.useCallback(async(H=null)=>{w(!0);try{const we=await ie.get("/accounts/admin/fetch-all"),le=[...Array.isArray(we.data)?we.data:[]].sort((Le,Qe)=>{const vt=Le?.created_at||Le?.updated_at||0,gt=Qe?.created_at||Qe?.updated_at||0;return new Date(gt)-new Date(vt)});if(b(le),H){const Le=le.find(Qe=>Qe.id===H);v(Le||null)}}catch(we){console.error(we),b([]),we.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch accounts. Please try again later.")}finally{w(!1)}},[v]),Ie=h.useCallback(async()=>{try{const H=await ie.get("/users/all");E(Array.isArray(H.data)?H.data:[])}catch(H){console.error(H),H.response?.status===403&&q.warn("Unable to load users for assignment (permission denied).")}},[]),Ve=h.useCallback(async()=>{try{const H=await ie.get("/territories/fetch");_(Array.isArray(H.data)?H.data:[])}catch(H){console.error(H),H.response?.status===403&&q.warn("Unable to load territories (permission denied).")}},[]),Te=h.useCallback(async()=>{try{const H=await ie.get("/accounts/admin/parent-companies");R(Array.isArray(H.data)?H.data:[])}catch(H){console.error(H),H.response?.status===403&&q.warn("Unable to load parent companies (permission denied).")}},[]),Fe=h.useCallback(async H=>{try{const we=await ie.get(`/activities/accounts/${H}`);fe(we.data&&typeof we.data=="object"?we.data:{})}catch(we){console.error(we),we.response?.status===404&&(console.warn("No activities found for this account."),fe({}))}},[]);h.useEffect(()=>{ye(),Ie(),Ve(),Te()},[ye,Ie,Ve,Te]),h.useEffect(()=>{se(1)},[M,U,J]);const Ye=h.useMemo(()=>{const H=M.toLowerCase(),we=U;return N.filter(Pe=>{const le=Pe.name?.toLowerCase().includes(H)||Pe.website?.toLowerCase().includes(H)||Pe.phone_number?.toLowerCase().includes(H)||Pe.industry?.toLowerCase().includes(H)||Pe.parent_company?.toLowerCase().includes(H)||Pe.territory?.name?.toLowerCase().includes(H),Le=we==="Filter by Status"||Js(Pe.status)===Js(we);return le&&Le})},[N,M,U]),B=Math.max(1,Math.ceil(Ye.length/J)||1);h.useEffect(()=>{se(H=>{const we=Math.max(1,Math.ceil(Ye.length/J)||1);return H>we?we:H})},[Ye.length,J]);const xe=h.useMemo(()=>{const H=(Y-1)*J;return Ye.slice(H,H+J)},[Ye,Y,J]),_e=H=>{if(H.target.checked){const we=xe.map(Pe=>Pe.id);Be(we)}else Be([])},ce=H=>{Be(we=>we.includes(H)?we.filter(Pe=>Pe!==H):[...we,H])},Ee=async()=>{ve.length!==0&&z({title:"Delete Accounts",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:ve.length})," selected accounts? This action cannot be undone."]}),confirmLabel:`Delete ${ve.length} Account(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",accountIds:ve}})};Ye.length===0||(Y-1)*J+1,Math.min(Y*J,Ye.length);const ae=()=>se(H=>Math.max(H-1,1)),He=()=>se(H=>Math.min(H+1,B));h.useEffect(()=>{x&&je(Js(x.status)||"PROSPECT")},[x]);const Re=N.length,it=h.useMemo(()=>N.filter(H=>H.status?.toLowerCase()==="customer").length,[N]),mt=h.useMemo(()=>N.filter(H=>H.status?.toLowerCase()==="prospect").length,[N]),ee=h.useMemo(()=>N.filter(H=>H.status?.toLowerCase()==="partner").length,[N]),pe=h.useMemo(()=>N.filter(H=>H.status?.toLowerCase()==="active").length,[N]),Ue=h.useMemo(()=>N.filter(H=>H.status?.toLowerCase()==="inactive").length,[N]),Ze=h.useMemo(()=>N.filter(H=>H.status?.toLowerCase()==="former").length,[N]),nt=h.useMemo(()=>[{title:"Total",value:Re,icon:Zn,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:it,icon:Ao,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:mt,icon:Gn,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:ee,icon:en,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:pe,icon:Ao,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:Ue,icon:To,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:Ze,icon:To,color:"text-orange-600",bgColor:"bg-orange-100"}],[Re,it,mt,ee,pe,Ue,Ze]),Je=H=>{v(H),re("Overview"),je(Js(H?.status)||"PROSPECT")},Oe=()=>v(null),ge=H=>{H.target.id==="accountModalBackdrop"&&!Q&&Oe()},Ke=()=>{a(!1),r(!1),u(null),p(e_),o(!1),A(null)},G=H=>{H.target.id==="modalBackdrop"&&Ke()},$=H=>H?new Date(H).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",V=H=>{const{name:we,value:Pe}=H.target;p(le=>({...le,[we]:Pe}))},te=()=>{p(e_),r(!1),u(null),a(!0)},Z=H=>{v(null),H.assigned_accs?A(H.assigned_accs):A(null),p({name:H.name||"",website:H.website||"",phone_number:H.phone_number||"",billing_address:H.billing_address||"",shipping_address:H.shipping_address||"",industry:H.industry||"",status:Js(H.status)||"PROSPECT",territory_id:H.territory?.id?String(H.territory.id):"",assigned_to:H.assigned_accs?.id?String(H.assigned_accs.id):""}),r(!0),u(H.id),a(!0)},Se=H=>{H&&z({title:"Delete Account",message:n.jsxs("span",{children:["Are you sure you want to permanently delete the account"," ",n.jsx("span",{className:"font-semibold",children:H.name}),"? This action cannot be undone."]}),confirmLabel:"Delete Account",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:H.id,name:H.name}})},me=async()=>{if(!X?.action){z(null);return}const{action:H}=X,{type:we,payload:Pe,targetId:le,name:Le,accountIds:Qe}=H;de(!0);try{if(we==="create"){o(!0);const vt=await ie.post("/accounts/admin",Pe);Te(),q.success(`Account "${Le}" created successfully.`);const gt=x?.id||null;Ke(),await ye(gt),!x&&vt.data?.id}else if(we==="update"){if(!le)throw new Error("Missing account identifier for update.");o(!0),await ie.put(`/accounts/admin/${le}`,Pe),q.success(`Account "${Le}" updated successfully.`);const vt=x?.id&&x.id===le?le:null;Ke(),await ye(vt),x?.id===le&&v(null)}else if(we==="delete"){if(!le)throw new Error("Missing account identifier for deletion.");const vt=x?.id;c(le),await ie.delete(`/accounts/admin/${le}`),q.success(`Account "${Le}" deleted successfully.`),await ye(vt&&vt!==le?vt:null),vt===le&&v(null)}else we==="bulk-delete"&&(await ie.delete("/accounts/admin/bulk-delete",{data:{account_ids:Qe}}),q.success(`Successfully deleted ${Qe.length} accounts`),Be([]),await ye())}catch(vt){console.error(vt);const gt=we==="create"?"Failed to create account. Please review the details and try again.":we==="update"?"Failed to update account. Please review the details and try again.":we==="bulk-delete"?"Failed to delete selected accounts.":"Failed to delete account. Please try again.",Bt=vt.response?.data?.detail||gt;q.error(Bt),(we==="create"||we==="update")&&o(!1),we==="delete"&&c(null)}finally{(we==="create"||we==="update")&&o(!1),we==="delete"&&c(null),de(!1),z(null)}},ue=()=>{Q||z(null)},$e=async()=>{if(!x||!he)return;const H=Js(he),we=Js(x.status);if(H!==we){Me(!0);try{await ie.put(`/accounts/admin/${x.id}`,{status:H}),q.success(`Account status updated to ${t_(H)}`),b(Pe=>Pe.map(le=>le.id===x.id?{...le,status:H}:le)),v(null)}catch(Pe){console.error(Pe);const le=Pe.response?.data?.detail||"Failed to update account status. Please try again.";q.error(le)}finally{Me(!1)}}},[be,We]=h.useState(!1),ft=H=>{H.preventDefault(),We(!0);const we=f.name.trim();if(!we){q.error("Account name is required.");return}if(!f.assigned_to){q.error("Assigned To is required.");return}const le={name:we,website:f.website?.trim()||null,phone_number:f.phone_number?.trim()||null,billing_address:f.billing_address?.trim()||null,shipping_address:f.shipping_address?.trim()||null,industry:f.industry?.trim()||null,parent_company:f.parent_company?.trim()||null,status:f.status||"PROSPECT",territory_id:f.territory_id?Number(f.territory_id):null,assigned_to:f.assigned_to?Number(f.assigned_to):null},Le=s&&d?"update":"create";z({title:Le==="create"?"Confirm New Account":"Confirm Update",message:Le==="create"?n.jsxs("span",{children:["Are you sure you want to create the account"," ",n.jsx("span",{className:"font-semibold",children:we}),"?"]}):n.jsxs("span",{children:["Save changes to the account"," ",n.jsx("span",{className:"font-semibold",children:we}),"?"]}),confirmLabel:Le==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:Le,payload:le,targetId:d||null,name:we}})},yt=[{label:"Filter by Status",value:"Filter by Status"},...JS.map(H=>({label:H.label,value:H.value}))],Tt=X?.action?.type==="delete"?X.action.targetId:null,Et=x&&(l===x.id||Tt===x.id),Gt=x&&l===x.id,oe=x?$1e(x.status):"",rt=x?n.jsx("div",{id:"accountModalBackdrop",onClick:ge,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:H=>H.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),n.jsx("button",{onClick:Oe,className:"text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Wn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:x.name}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${oe}`,children:t_(x.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Z(x),disabled:X?.action?.type==="update"&&X.action.targetId===x.id,children:[n.jsx(ia,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>Se(x),disabled:!!Et,children:Gt?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Ut,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(H=>n.jsx("button",{onClick:()=>re(H),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${Ne===H?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:H},H))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Ne==="Overview"&&n.jsxs("div",{className:"h-full max-h-100 md:max-h-70 overflow-y-auto hide-scrollbar",children:[n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Website:"}),n.jsx("p",{children:x.website?n.jsx("a",{href:x.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:x.website}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Industry:"}),n.jsx("p",{children:x.industry||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Parent Company:"}),n.jsx("p",{children:x.parent_company||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:x.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:x.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Billing Address:"}),n.jsx("p",{children:x.billing_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),n.jsx("p",{children:x.shipping_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:x.assigned_accs?`${x.assigned_accs.first_name} ${x.assigned_accs.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:x.acc_creator?`${x.acc_creator.first_name} ${x.acc_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:$(x.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:$(x.updated_at)||"N/A"})]})]})}),n.jsx(I1e,{})]}),Ne==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:N.notes||"No notes available."})]})]}),Ne==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[ke.tasks&&ke.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ae(ne==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",ke.tasks.length,")"]})]}),ne==="tasks"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),ne==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ke.tasks.map((H,we)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/tasks",{state:{taskID:H.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:H.subject||H.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:H.description||"No description"}),H.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",H.assigned_to.first_name," ",H.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:$(H.due_date||H.created_at)})]},`task-${we}`))})]}),ke.meetings&&ke.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ae(ne==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ct,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",ke.meetings.length,")"]})]}),ne==="meetings"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),ne==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ke.meetings.map((H,we)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/meetings",{state:{meetingID:H.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Ct,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:H.subject||H.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:H.description||H.location||"No description"}),H.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",H.host.first_name," ",H.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:$(H.start_time||H.created_at)})]},`meeting-${we}`))})]}),ke.calls&&ke.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ae(ne==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(At,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",ke.calls.length,")"]})]}),ne==="calls"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),ne==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ke.calls.map((H,we)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/calls",{state:{callID:H.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(At,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:H.subject||H.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:H.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:$(H.call_time||H.created_at)})]},`call-${we}`))})]}),ke.contacts&&ke.contacts.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ae(ne==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(en,{className:"text-teal-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",ke.contacts.length,")"]})]}),ne==="contacts"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),ne==="contacts"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ke.contacts.map((H,we)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/contacts",{state:{contactID:H.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-teal-600 mt-1",children:n.jsx(en,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[H.first_name?`${H.first_name} `:"",H.last_name]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:H.title||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:$(H.created_at)})]},`contact-${we}`))})]}),ke.deals&&ke.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ae(ne==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Kt,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",ke.deals.length,")"]})]}),ne==="deals"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),ne==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ke.deals.map((H,we)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/deals",{state:{dealID:H.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(Kt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[H.deal_id?H.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",H.name||H.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:H.stage||H.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:$(H.close_date||H.created_at)})]},`deal-${we}`))})]}),ke.quotes&&ke.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ae(ne==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(xn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",ke.quotes.length,")"]})]}),ne==="quotes"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),ne==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ke.quotes.map((H,we)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/quotes",{state:{quoteID:H.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(xn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(H.quote_id?H.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:H.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:$(H.presented_date)||""})]},`quote-${we}`))})]}),(!ke||(!ke.tasks||ke.tasks.length===0)&&(!ke.meetings||ke.meetings.length===0)&&(!ke.calls||ke.calls.length===0)&&(!ke.quotes||ke.quotes.length===0)&&(!ke.deals||ke.deals.length===0)&&(!ke.contacts||ke.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assigned_to:x.assigned_accs?.id?String(x.assigned_accs.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(At,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assignedTo:x.assigned_accs?.id?String(x.assigned_accs.id):"",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Ct,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assignedTo:x.assigned_accs?.id?String(x.assigned_accs.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:he||Js(x?.status)||"PROSPECT",onChange:H=>je(H.target.value),children:JS.map(H=>n.jsx("option",{value:H.value,children:H.label},H.value))}),n.jsx("button",{onClick:$e,disabled:De||!he||Js(he)===Js(x?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${De||!he||Js(he)===Js(x?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:De?"Updating...":"Update"})]})]})]})]})]})}):null,_t=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[C&&n.jsx(zt,{message:"Loading accounts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Zn,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{te(),We(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(un,{className:"mr-2"})," Add Account"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:nt.map(H=>n.jsx(U1e,{...H},H.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Ht,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search accounts",value:M,onChange:H=>W(H.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:U,onChange:H=>D(H.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:yt.map(H=>n.jsx("option",{value:H.value,children:H.label},H.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-center w-12",children:n.jsx("input",{type:"checkbox",checked:xe.length>0&&xe.every(H=>ve.includes(H.id)),onChange:_e,className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Industry"}),n.jsx("th",{className:"py-3 px-4",children:"Territory"}),n.jsx("th",{className:"py-3 px-4",children:"Phone"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:ve.length>0?n.jsx("button",{onClick:Ee,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${ve.length} selected items`,children:n.jsx(Ut,{size:18})}):""})]})}),n.jsx("tbody",{children:C?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"Loading accounts..."})}):Ye.length>0?xe.map(H=>n.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>{Je(H),Fe(H.id)},children:[n.jsx("td",{className:"py-3 px-4 text-center",children:n.jsx("input",{type:"checkbox",checked:ve.includes(H.id),onChange:()=>ce(H.id),onClick:we=>we.stopPropagation(),className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:H.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:H.website||"--"})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${R1e(H.status)}`,children:t_(H.status)})}),n.jsx("td",{className:"py-3 px-4 text-sm",children:H.industry||"--"}),n.jsx("td",{className:"py-3 px-4 text-sm",children:H.territory?.name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(At,{className:"text-gray-500"}),n.jsx("span",{children:H.phone_number||"--"})]})}),n.jsx("td",{className:"py-3 px-4 text-center"})]},H.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No accounts found."})})})]})}),n.jsx(tn,{className:"mt-4",totalItems:Ye.length,pageSize:J,currentPage:Y,onPrev:ae,onNext:He,onPageSizeChange:H=>{F(H),se(1)},pageSizeOptions:[10,20,30,40,50],label:"accounts"})]}),Nt=t?n.jsx("div",{id:"modalBackdrop",onClick:G,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:H=>H.stopPropagation(),children:[n.jsx("button",{onClick:()=>{Ke(),We(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:i||Q,children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Account":"Add New Account"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:ft,noValidate:!0,children:[n.jsx("div",{className:"md:col-span-2",children:n.jsx(Um,{label:"Name",name:"name",value:f.name,onChange:V,placeholder:"Company name",required:!0,isSubmitted:be})}),n.jsx(Z6,{label:"Parent Company",value:f.parent_company,onChange:H=>{p(we=>({...we,parent_company:H}))},items:I.map(H=>({id:H,name:H})),getLabel:H=>H?.name||"",placeholder:"Select parent company...",disabled:i}),n.jsx(Um,{label:"Website",name:"website",value:f.website,onChange:V,placeholder:"https://example.com",disabled:i}),n.jsx(Um,{label:"Phone Number",name:"phone_number",value:f.phone_number,onChange:V,placeholder:"09xx xxx xxxx",type:"tel",disabled:i}),n.jsx(Um,{label:"Industry",name:"industry",value:f.industry,onChange:V,placeholder:"Industry",disabled:i}),n.jsx(Um,{label:"Billing Address",name:"billing_address",value:f.billing_address,onChange:V,placeholder:"Billing address",disabled:i}),n.jsx(Um,{label:"Shipping Address",name:"shipping_address",value:f.shipping_address,onChange:V,placeholder:"Shipping address",disabled:i}),n.jsx(X6,{label:"Status",name:"status",value:f.status,onChange:V,options:[{value:"",label:"Select status"},...JS],required:!0,disabled:i}),n.jsx(Z6,{label:"Assigned To",value:f.assigned_to,onChange:H=>{const we=S.find(le=>String(le.id)===String(H));A(we);let Pe=null;we&&we.assigned_territory&&we.assigned_territory.length===1&&(Pe=we.assigned_territory[0].id),p(le=>({...le,assigned_to:H,territory_id:Pe}))},items:S||[],getLabel:H=>`${H?.first_name??""} ${H?.last_name??""} (${H?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:be,disabled:i||S.length===0}),n.jsx("div",{className:"md:col-span-2",children:n.jsx(X6,{label:"Territory",name:"territory_id",value:f.territory_id||"",onChange:V,options:[{value:"",label:k?k.assigned_territory&&k.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"},...k&&k.assigned_territory&&k.assigned_territory.map(H=>({value:String(H.id),label:H.name}))||[]],disabled:i||!k||!k.assigned_territory||k.assigned_territory.length===0})}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{Ke(),We(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i||Q,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i||Q,children:i?"Saving...":s?"Update Account":"Save Account"})]})]})]})}):null,L=X?n.jsx(B1e,{open:!0,title:X.title,message:X.message,confirmLabel:X.confirmLabel,cancelLabel:X.cancelLabel,variant:X.variant,onConfirm:me,onCancel:ue,loading:Q}):null;return n.jsxs(n.Fragment,{children:[_t,rt,Nt,L]})}function U1e({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function Um({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function X6({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(l=>n.jsx("option",{value:l.value,children:l.label},l.value))})]})}function Z6({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1,allowFreeText:u=!1}){const f=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(F1e,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:f,allowFreeText:u})]})}function F1e({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1,allowFreeText:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),v=e.find(C=>String(C.id)===String(t)),N=v?s(v):t,b=h.useMemo(()=>{const C=f.trim().toLowerCase();return(C?e.filter(S=>(s(S)||"").toLowerCase().includes(C)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const C=w=>{x.current&&!x.current.contains(w.target)&&u(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:C=>{p(C.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsxs("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:[c&&f.trim()&&!b.some(C=>s(C).toLowerCase()===f.trim().toLowerCase())&&n.jsxs("button",{type:"button",onClick:()=>{a(f.trim()),u(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-green-50 bg-blue-50 font-medium text-blue-700",children:['+ Add "',f.trim(),'" as new parent company']}),b.length>0?b.map(C=>{const w=String(C.id),S=s(C),E=String(t)===w;return n.jsx("button",{type:"button",onClick:()=>{a(w),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${E?"bg-blue-50":""}`,children:S||"--"},w)}):!c||!f.trim()?n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"}):null]}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function B1e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function Ex(e){return St({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M4 2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm3 0a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm3.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zM4 5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zM7.5 5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm2.5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zM4.5 8a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm2.5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm3.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5z"},child:[]},{tag:"path",attr:{d:"M2 1a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1zm11 0H3v14h3v-2.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5V15h3z"},child:[]}]})(e)}const n_={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},rl=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),Zi=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function H1e(){const e=bt(),t=Qt();h.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[a,s]=h.useState([]),[r,i]=h.useState(!1),[o,l]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState(null),[p,x]=h.useState(!1),[v,N]=h.useState(!1),[b,C]=h.useState(!1),[w,S]=h.useState(null),[E,k]=h.useState(!1),[A,T]=h.useState(null),[_,I]=h.useState(n_),[R,U]=h.useState(""),[D,M]=h.useState("Filter by Accounts"),[W,X]=h.useState(null),[z,Q]=h.useState("Overview"),[de,Y]=h.useState(1),[se,J]=h.useState(10),[F,Ne]=h.useState({}),[re,he]=h.useState(null),[je,De]=h.useState([]),[Me,ve]=h.useState(null);h.useEffect(()=>{const Z=t.state?.contactID;Z&&(ve(Z),e(t.pathname,{replace:!0,state:{}}))},[t,e]),h.useEffect(()=>{if(Me&&a.length>0&&!r){const Z=a.find(Se=>Se.id===Me);Z?f(Z):q.error("Contact not found."),ve(null)}},[Me,a,r]);const Be=h.useCallback(async(Z=null)=>{i(!0);try{const Se=await ie.get("/contacts/admin/fetch-all"),ue=[...Array.isArray(Se.data)?Se.data:[]].sort(($e,be)=>{const We=$e?.created_at||$e?.updated_at||0,ft=be?.created_at||be?.updated_at||0;return new Date(ft)-new Date(We)});if(s(ue),Z){const $e=ue.find(be=>be.id===Z);f($e||null)}}catch(Se){console.error(Se),s([]),Se.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch contacts. Please try again later.")}finally{i(!1)}},[f]),ke=h.useCallback(async()=>{try{const Z=await ie.get("/accounts/admin/fetch-all"),me=[...Array.isArray(Z.data)?Z.data:[]].sort((ue,$e)=>(ue?.name||"").localeCompare($e?.name||""));l(me)}catch(Z){console.error(Z),l([]),Z.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},[]),fe=h.useCallback(async()=>{try{const Z=await ie.get("/users/all"),me=[...Array.isArray(Z.data)?Z.data:[]].sort((ue,$e)=>rl(ue).localeCompare(rl($e)));d(me)}catch(Z){console.error(Z),d([]),Z.response?.status===403&&q.warn("Unable to load users for assignment (permission denied).")}},[]),ne=h.useCallback(async Z=>{try{const Se=await ie.get(`/activities/contact/${Z}`);Ne(Se.data&&typeof Se.data=="object"?Se.data:{})}catch(Se){console.error(Se),Se.response?.status===404&&(console.warn("No activities found for this account."),Ne({}))}},[]);h.useEffect(()=>{Be(),ke(),fe()},[Be,ke,fe]);const Ae=h.useMemo(()=>{const Z=new Map;o.forEach(me=>{me?.id&&me?.name&&Z.set(String(me.id),me.name)}),a.forEach(me=>{me?.account_id&&me?.account?.name&&Z.set(String(me.account_id),me.account.name)});const Se=Array.from(Z.entries()).sort((me,ue)=>me[1].localeCompare(ue[1])).map(([me,ue])=>({value:me,label:ue}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...Se]},[o,a]),ye=h.useMemo(()=>{const Z=R.trim().toLowerCase(),Se=D.trim();return a.filter(me=>{const ue=[me?.first_name,me?.last_name,me?.email,me?.title,me?.department,me?.account?.name,me?.account?.status,me?.work_phone,me?.mobile_phone_1,me?.mobile_phone_2,me?.assigned_contact?.first_name,me?.assigned_contact?.last_name,me?.contact_creator?.first_name,me?.contact_creator?.last_name,me?.notes,Zi(me?.created_at),Zi(me?.updated_at)],$e=Z===""||ue.some(We=>We==null?!1:We.toString().toLowerCase().includes(Z)),be=Se==="Filter by Accounts"||String(me.account_id)===Se;return $e&&be})},[a,R,D]),Ie=Math.max(1,Math.ceil(ye.length/se)||1);h.useEffect(()=>{Y(1)},[R,D,se]),h.useEffect(()=>{Y(Z=>{const Se=Math.max(1,Math.ceil(ye.length/se)||1);return Z>Se?Se:Z})},[ye.length,se]);const Ve=h.useMemo(()=>{const Z=(de-1)*se;return ye.slice(Z,Z+se)},[ye,de,se]),Te=()=>Y(Z=>Math.max(Z-1,1)),Fe=()=>Y(Z=>Math.min(Z+1,Ie)),Ye=Z=>{if(Z.target.checked){const Se=Ve.map(me=>me.id);De(Se)}else De([])},B=Z=>{De(Se=>Se.includes(Z)?Se.filter(me=>me!==Z):[...Se,Z])},xe=async()=>{je.length!==0&&S({title:"Delete Contacts",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:je.length})," selected contacts? This action cannot be undone."]}),confirmLabel:`Delete ${je.length} Contact(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",contact_ids:je}})},_e=h.useCallback(()=>{x(!1),N(!1),T(null),I(n_),C(!1),mt(!1)},[]),ce=Z=>{Z.target.id==="modalBackdrop"&&!b&&!E&&_e()},Ee=Z=>{const{name:Se,value:me}=Z.target;I(ue=>({...ue,[Se]:me}))},ae=()=>{I(n_),N(!1),T(null),x(!0)},He=Z=>{Z&&(I({first_name:Z.first_name||"",last_name:Z.last_name||"",account_id:Z.account_id?String(Z.account_id):"",title:Z.title||"",department:Z.department||"",email:Z.email||"",work_phone:Z.work_phone||"",mobile_phone_1:Z.mobile_phone_1||"",mobile_phone_2:Z.mobile_phone_2||"",notes:Z.notes||"",assigned_to:Z.assigned_to?String(Z.assigned_to):""}),N(!0),T(Z.id),x(!0),f(null))},Re=Z=>{if(!Z)return;const Se=rl(Z)||"this contact";S({title:"Delete Contact",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:Se}),"? This action cannot be undone."]}),confirmLabel:"Delete Contact",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:Z.id,name:Se}})},[it,mt]=h.useState(!1),ee=Z=>{Z.preventDefault(),mt(!0);const Se=_.first_name.trim(),me=_.last_name.trim();if(!Se||!me){q.error("First name and last name are required.");return}if(!_.account_id){q.error("Account is required.");return}if(!_.assigned_to){q.error("Assigned To is required.");return}const $e=_.email?.trim();if(!$e){q.error("Email is required.");return}if(!$e.includes("@")){q.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test($e)){q.error("Please enter a valid email address.");return}const We={first_name:Se,last_name:me,account_id:Number(_.account_id),title:_.title?.trim()||null,department:_.department?.trim()||null,email:_.email?.trim().toLowerCase()||null,work_phone:_.work_phone?.trim()||null,mobile_phone_1:_.mobile_phone_1?.trim()||null,mobile_phone_2:_.mobile_phone_2?.trim()||null,notes:_.notes?.trim()||null,assigned_to:_.assigned_to?Number(_.assigned_to):null},ft=v&&A?"update":"create",yt=`${Se} ${me}`.trim();S({title:ft==="create"?"Confirm New Contact":"Confirm Update",message:ft==="create"?n.jsxs("span",{children:["Are you sure you want to add"," ",n.jsx("span",{className:"font-semibold",children:yt})," to your contacts?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:yt}),"?"]}),confirmLabel:ft==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:ft,payload:We,targetId:A||null,name:yt}})},pe=async()=>{if(!w?.action){S(null);return}const{action:Z}=w,{type:Se,payload:me,targetId:ue,name:$e}=Z;k(!0);try{if(Se==="create"){C(!0),await ie.post("/contacts/admin",me),q.success(`Contact "${$e}" created successfully.`);const be=u?.id||null;_e(),await Be(be)}else if(Se==="update"){if(!ue)throw new Error("Missing contact identifier for update.");C(!0),await ie.put(`/contacts/admin/${ue}`,me),q.success(`Contact "${$e}" updated successfully.`);const be=u?.id&&u.id===ue?ue:u?.id||null;_e(),await Be(be),u?.id===ue&&f(null)}else if(Se==="delete"){if(!ue)throw new Error("Missing contact identifier for deletion.");const be=u?.id;X(ue),await ie.delete(`/contacts/admin/${ue}`),q.success(`Contact "${$e}" deleted successfully.`),await Be(be&&be!==ue?be:null),be===ue&&f(null)}else if(Se==="bulk-delete"){const be=Z.contact_ids;await ie.delete("/contacts/admin/bulk-delete",{data:{contact_ids:be}}),q.success(`Successfully deleted ${be.length} contacts`),De([]),await Be()}}catch(be){console.error(be);const We=Se==="create"?"Failed to create contact. Please review the details and try again.":Se==="update"?"Failed to update contact. Please review the details and try again.":Se==="bulk-delete"?"Failed to delete selected contacts.":"Failed to delete contact. Please try again.",ft=be.response?.data?.detail||We;q.error(ft)}finally{(Se==="create"||Se==="update")&&C(!1),Se==="delete"&&X(null),k(!1),S(null)}},Ue=()=>{E||S(null)},Ze=Z=>{f(Z),Q("Overview")},nt=()=>f(null),Je=Z=>{Z.target.id==="contactModalBackdrop"&&!E&&nt()},Oe=w?.action?.type==="delete"?w.action.targetId:null,ge=u&&(W===u.id||Oe===u.id),Ke=u&&W===u.id,G=u?n.jsx("div",{id:"contactModalBackdrop",onClick:Je,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:Z=>Z.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),n.jsx("button",{onClick:nt,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Wn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:rl(u)||"Unnamed contact"})}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>He(u),disabled:E||w?.action?.type==="update"&&w.action.targetId===u.id,children:[n.jsx(ia,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>Re(u),disabled:!!ge,children:Ke?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Ut,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:n.jsx("p",{className:"text-sm text-gray-500",children:u.account?.name||"No associated account"})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(Z=>n.jsx("button",{onClick:()=>Q(Z),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${z===Z?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:Z},Z))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[z==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact Name:"}),n.jsx("p",{children:rl(u)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Title:"}),n.jsx("p",{children:u.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:u.email?n.jsx("a",{href:`mailto:${u.email}`,className:"text-blue-600 hover:underline break-all",children:u.email}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:u.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:u.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:u.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:u.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:u.assigned_contact?`${u.assigned_contact.first_name} ${u.assigned_contact.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:u.contact_creator?`${u.contact_creator.first_name} ${u.contact_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:Zi(u.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:Zi(u.updated_at)||"N/A"})]})]})}),z==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:u.notes||"No notes available."})]})]}),z==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[F.tasks&&F.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(re==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",F.tasks.length,")"]})]}),re==="tasks"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),re==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:F.tasks.map((Z,Se)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/tasks",{state:{taskID:Z.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:Z.subject||Z.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:Z.description||"No description"}),Z.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",Z.assigned_to.first_name," ",Z.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Zi(Z.due_date||Z.created_at)})]},`task-${Se}`))})]}),F.meetings&&F.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(re==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ct,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",F.meetings.length,")"]})]}),re==="meetings"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),re==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:F.meetings.map((Z,Se)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/meetings",{state:{meetingID:Z.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Ct,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:Z.subject||Z.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:Z.description||Z.location||"No description"}),Z.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",Z.host.first_name," ",Z.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Zi(Z.start_time||Z.created_at)})]},`meeting-${Se}`))})]}),F.calls&&F.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(re==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(At,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",F.calls.length,")"]})]}),re==="calls"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),re==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:F.calls.map((Z,Se)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/calls",{state:{callID:Z.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(At,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:Z.subject||Z.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:Z.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Zi(Z.call_time||Z.created_at)})]},`call-${Se}`))})]}),F.deals&&F.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(re==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Kt,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",F.deals.length,")"]})]}),re==="deals"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),re==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:F.deals.map((Z,Se)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/deals",{state:{dealID:Z.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(Kt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[Z.deal_id?Z.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",Z.name||Z.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:Z.stage||Z.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Zi(Z.close_date||Z.created_at)})]},`deal-${Se}`))})]}),F.quotes&&F.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(re==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(xn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",F.quotes.length,")"]})]}),re==="quotes"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),re==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:F.quotes.map((Z,Se)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/quotes",{state:{quoteID:Z.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(xn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(Z.quote_id?Z.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Z.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Zi(Z.presented_date)||""})]},`quote-${Se}`))})]}),(!F||(!F.tasks||F.tasks.length===0)&&(!F.meetings||F.meetings.length===0)&&(!F.calls||F.calls.length===0)&&(!F.quotes||F.quotes.length===0)&&(!F.deals||F.deals.length===0)&&(!F.contacts||F.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsx("div",{className:"flex flex-col gap-4",children:n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${rl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assigned_to:u?.assigned_contact?.id?String(u.assigned_contact.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(At,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!u?.email){alert("No email address available");return}const Z=encodeURIComponent(u.email),Se=encodeURIComponent(""),me=encodeURIComponent(""),ue=`mailto:${Z}?subject=${Se}&body=${me}`;window.location.href=ue},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Xn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${rl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assignedTo:u?.assigned_contact?.id?String(u.assigned_contact.id):"",status:"Planned"}}}),children:[n.jsx(Ct,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Task for ${rl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assignedTo:u?.assigned_contact?.id?String(u.assigned_contact.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,$=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&n.jsx(zt,{message:"Loading contacts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Zn,{className:"mr-2 text-blue-600"})," Contacts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{ae(),mt(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(un,{className:"mr-2"})," Add Contact"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Ht,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search contacts",value:R,onChange:Z=>U(Z.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:D,onChange:Z=>M(Z.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:Ae.map(Z=>n.jsx("option",{value:Z.value,children:Z.label},Z.value??Z.label))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-center w-12",children:n.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer",checked:Ve.length>0&&je.length===Ve.length,onChange:Ye})}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),n.jsx("th",{className:"py-3 px-4",children:"Department"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Created"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:je.length>0?n.jsx("button",{onClick:xe,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${je.length} selected items`,children:n.jsx(Ut,{size:18})}):""})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:9,children:"Loading contacts..."})}):ye.length>0?Ve.map(Z=>{const Se=[{Icon:Xn,value:Z.email,key:"email"},{Icon:At,value:Z.work_phone,key:"work_phone"},{Icon:Jc,value:Z.mobile_phone_1,key:"mobile_phone_1"},{Icon:Jc,value:Z.mobile_phone_2,key:"mobile_phone_2"}].filter(me=>!!me.value);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:me=>{me.target.closest('input[type="checkbox"]')||me.target.closest("button")||(Ze(Z),ne(Z.id))},children:[n.jsx("td",{className:"py-3 px-4 text-center align-top",children:n.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer",checked:je.includes(Z.id),onChange:()=>B(Z.id)})}),n.jsxs("td",{className:"py-3 px-4 align-top",children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:rl(Z)||"--"}),n.jsx("div",{className:"text-xs text-gray-500",children:Z.title||"No title"})]}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[n.jsx(Ex,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"break-words",children:Z.account?.name||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:Se.length>0?n.jsx("div",{className:"space-y-1 text-gray-700",children:Se.map(({Icon:me,value:ue,key:$e})=>{const be=pt.createElement(me,{className:"text-gray-500 flex-shrink-0"});return n.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[be,n.jsx("span",{children:ue})]},$e)})}):n.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[n.jsx(Kt,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:Z.department||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(en,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:Z.assigned_contact?`${Z.assigned_contact.first_name} ${Z.assigned_contact.last_name}`:"Unassigned"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[n.jsx(Ct,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"text-xs",children:Zi(Z.created_at)||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${Z.status==="Inactive"?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:Z.status||"Active"})}),n.jsx("td",{className:"py-3 px-4 align-top"})]},Z.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:9,children:"No contacts found."})})})]})}),n.jsx(tn,{className:"mt-4",totalItems:ye.length,pageSize:se,currentPage:de,onPrev:Te,onNext:Fe,onPageSizeChange:Z=>{J(Z),Y(1)},pageSizeOptions:[10,20,30,40,50],label:"contacts"})]}),V=p?n.jsx("div",{id:"modalBackdrop",onClick:ce,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:Z=>Z.stopPropagation(),children:[n.jsx("button",{onClick:()=>{_e(),mt(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:b||E,children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:v?"Edit Contact":"Add New Contact"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:ee,noValidate:!0,children:[n.jsx(_c,{label:"First Name",name:"first_name",value:_.first_name,onChange:Ee,placeholder:"First name",required:!0,isSubmitted:it}),n.jsx(_c,{label:"Last Name",name:"last_name",value:_.last_name,onChange:Ee,placeholder:"Last name",required:!0,isSubmitted:it}),n.jsx(J6,{label:"Account",value:_.account_id,onChange:Z=>I(Se=>({...Se,account_id:Z})),items:o||[],getLabel:Z=>Z?.name??"",placeholder:"Search account...",required:!0,isSubmitted:it,disabled:b||o.length===0}),n.jsx(J6,{label:"Assigned To",value:_.assigned_to,onChange:Z=>I(Se=>({...Se,assigned_to:Z})),items:c||[],getLabel:Z=>`${Z?.first_name??""} ${Z?.last_name??""} (${Z?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:it,disabled:b||c.length===0}),n.jsx(_c,{label:"Title",name:"title",value:_.title,onChange:Ee,placeholder:"Job title",disabled:b}),n.jsx(_c,{label:"Department",name:"department",value:_.department,onChange:Ee,placeholder:"Department",disabled:b}),n.jsx(_c,{label:"Email",name:"email",type:"email",value:_.email,onChange:Ee,placeholder:"example@email.com",required:!0,isSubmitted:it}),n.jsx(_c,{label:"Work Phone",name:"work_phone",value:_.work_phone,onChange:Ee,placeholder:"09xx xxx xxxx",disabled:b}),n.jsx(_c,{label:"Mobile Phone 1",name:"mobile_phone_1",value:_.mobile_phone_1,onChange:Ee,placeholder:"09xx xxx xxxx",disabled:b}),n.jsx(_c,{label:"Mobile Phone 2",name:"mobile_phone_2",value:_.mobile_phone_2,onChange:Ee,placeholder:"09xx xxx xxxx",disabled:b}),n.jsx(W1e,{label:"Notes",name:"notes",value:_.notes,onChange:Ee,placeholder:"Additional details...",rows:3,disabled:b,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{_e(),mt(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:b||E,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:b||E,children:b?"Saving...":v?"Update Contact":"Save Contact"})]})]})]})}):null,te=w?n.jsx(q1e,{open:!0,title:w.title,message:w.message,confirmLabel:w.confirmLabel,cancelLabel:w.cancelLabel,variant:w.variant,onConfirm:pe,onCancel:Ue,loading:E}):null;return n.jsxs(n.Fragment,{children:[$,G,V,te]})}function _c({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${d}
        `})]})}function J6({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(G1e,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function G1e({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",N=h.useMemo(()=>{const b=u.trim().toLowerCase();return(b?e.filter(w=>(s(w)||"").toLowerCase().includes(b)):e).slice(0,o)},[e,u,s,o]);return h.useEffect(()=>{const b=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:v,placeholder:r,onFocus:()=>!i&&d(!0),onChange:b=>{f(b.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:N.length>0?N.map(b=>{const C=String(b.id),w=s(b),S=String(t)===C;return n.jsx("button",{type:"button",onClick:()=>{a(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},C)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function W1e({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function q1e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const a_=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function DV({lead:e,onBack:t,fetchLeads:a,onEdit:s,onDelete:r,setSelectedLead:i,relatedActs:o}){const l=bt(),{leadID:c}=Ul(),[d,u]=h.useState(e||null),[f,p]=h.useState("Overview"),[x,v]=h.useState(""),N=d?.status?.toUpperCase()==="QUALIFIED",[b,C]=h.useState(null),[w,S]=h.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[E,k]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[A,T]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),_=async()=>{try{if(e){u(e),v(e.status||"New");return}if(!c)return;const M=await ie.get(`/leads/get/${c}`);u(M.data),v(M.data.status||"New"),S({name:M.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:M.data.territory?.id||null,assigned_to:M.data.assigned_to?.id||null,created_by:M.data.creator?.id||null}),k({last_name:M.data.last_name||"",first_name:M.data.first_name||"",account_id:null,title:M.data.title||"",department:M.data.department||"",email:M.data.email||"",work_phone:M.data.work_phone||"",mobile_phone_1:M.data.mobile_phone_1||"",mobile_phone_2:M.data.mobile_phone_2||"",notes:"",assigned_to:M.data.assigned_to?.id||null,created_by:M.data.creator?.id||null}),T({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:M.data.assigned_to?.id||null,created_by:M.data.creator?.id||null})}catch(M){console.error(M)}};h.useEffect(()=>{e?(u(e),v(e.status||"New")):c&&_()},[c,e]);const I=async()=>{try{if(x==="Converted"&&d?.status?.toUpperCase()!=="QUALIFIED"){q.error("Lead must be Qualified before it can be converted.");return}const M=await ie.put(`/leads/${d.id}/update/status`,{status:x});q.success("Lead status updated successfully");const W={...d,status:M.data.status};u(W),i&&i(W),a&&a(),t&&t()}catch(M){console.error(M),q.error("Failed to update lead status")}},R=async M=>{const W={...w,assigned_to:M.assigned_to?.id,billing_address:M.address,shipping_address:M.address,created_by:M.creator?.id,industry:null,name:M.company_name,phone_number:M.work_phone,status:"Prospect",territory_id:M.territory?.id,website:""};console.log("Account data: ",W),console.log("Contact data: ",E),console.log("Deal data: ",A),console.log("Lead data: ",M);try{const z=(await ie.post("/accounts/convertedLead",W)).data.id,Q={...E,account_id:z,assigned_to:M.assigned_to?.id,created_by:M.creator?.id,department:M.department,email:M.email,first_name:M.first_name,last_name:M.last_name,mobile_phone_1:M.mobile_phone_1,mobile_phone_2:M.mobile_phone_2,notes:M.notes,title:M.title,work_phone:M.work_phone},Y=(await ie.post("/contacts/convertedLead",Q)).data.id,se=()=>{switch(A.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},J=A.amount&&A.amount!==""?parseFloat(A.amount):0,F={...A,account_id:z,assigned_to:M.assigned_to?.id,created_by:M.creator?.id,primary_contact_id:Y,probability:se(),stage:"Prospecting"},Ne=await ie.post("/deals/convertedLead",F),re=await ie.put(`/leads/convert/${M.id}`);i&&i(null),a(),q.success("Lead converted successfully!"),t()}catch(X){console.error("Error during conversion:",X);const z=X.response?.data?.detail||X.message||"Failed to convert lead. Please try again.";q.error(z)}},U=M=>{switch((M||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},D=M=>M.toString().toLowerCase().replace(/\b\w/g,W=>W.toUpperCase());return d?n.jsx(n.Fragment,{children:n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),n.jsx("button",{onClick:()=>{t?t():l(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Wn,{size:25})})]})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[d.first_name," ",d.last_name]}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${U(d.status)}`,children:D(d.status||"New")}),n.jsx("div",{className:"flex flex-col",children:n.jsx("button",{onClick:()=>R(d),disabled:!N,title:N?"Convert Lead":"Lead must be Qualified before converting",className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2
      ${N?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-400":"bg-gray-200 text-gray-400 cursor-not-allowed"}
    `,children:"Convert"})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",onClick:()=>{s&&d&&s(d)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(la,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",onClick:()=>{r&&d&&r(d)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(Ut,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-4 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(M=>n.jsx("button",{onClick:()=>p(M),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${f===M?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:M},M))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[f==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Name:"}),n.jsxs("p",{children:[d.first_name," ",d.last_name||"N/A"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:d.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Job Title:"}),n.jsx("p",{children:d.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:d.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:d.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:d.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:d.assigned_to?`${d.assigned_to.first_name} ${d.assigned_to.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:d.creator?`${d.creator.first_name} ${d.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:d.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Source:"}),n.jsx("p",{children:d.source||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Address:"}),n.jsx("p",{children:d.address||"N/A"})]})]})}),f==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]})]}),f==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[o.tasks&&o.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",o.tasks.length,")"]})]}),b==="tasks"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),b==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.tasks.map((M,W)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/admin/tasks",{state:{taskID:M.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:M.subject||M.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:M.description||"No description"}),M.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned:"," ",M.assigned_to.first_name," ",M.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:a_(M.due_date||M.created_at)})]},`task-${W}`))})]}),o.meetings&&o.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ct,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",o.meetings.length,")"]})]}),b==="meetings"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),b==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.meetings.map((M,W)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/admin/meetings",{state:{meetingID:M.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Ct,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:M.subject||M.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:M.description||M.location||"No description"}),M.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",M.host.first_name," ",M.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:a_(M.start_time||M.created_at)})]},`meeting-${W}`))})]}),o.calls&&o.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(At,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",o.calls.length,")"]})]}),b==="calls"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),b==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.calls.map((M,W)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/admin/calls",{state:{callID:M.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(At,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:M.subject||M.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:M.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:a_(M.call_time||M.created_at)})]},`call-${W}`))})]}),(!o||(!o.tasks||o.tasks.length===0)&&(!o.meetings||o.meetings.length===0)&&(!o.calls||o.calls.length===0)&&(!o.quotes||o.quotes.length===0)&&(!o.deals||o.deals.length===0)&&(!o.contacts||o.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{d&&l("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:d.title?`Call regarding ${d.title}`:`Call with ${d.first_name} ${d.last_name}`,relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assigned_to:d.assigned_to?.id?String(d.assigned_to.id):"",direction:"Outgoing",status:"Planned"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(At,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const M=encodeURIComponent(d.email),W=encodeURIComponent(""),X=encodeURIComponent(""),z=`mailto:${M}?subject=${W}&body=${X}`;window.location.href=z},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Xn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{d&&l("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:d.title?`Meeting regarding ${d.title}`:`Meeting with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",status:"Planned"}}})},children:[n.jsx(Ct,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{d&&l("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:d.title?`Follow up on ${d.title}`:`Follow up with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:x,onChange:M=>v(M.target.value),children:[n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),d?.status?.toUpperCase()==="QUALIFIED"&&n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]}),n.jsx("button",{onClick:I,disabled:x===d.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${x===d.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const V1e=Ff.all(),s_=V1e.map((e,t)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${t}`})),Y1e=e=>e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()),Q1e=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},r_={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function K1e(){const e=bt(),{leadID:t}=Ul();Ds();const[a,s]=h.useState(null),[r,i]=h.useState(!1),[o,l]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(!1),[v,N]=h.useState(""),[b,C]=h.useState("Filter by Status"),[w,S]=h.useState(""),[E,k]=h.useState(1),[A,T]=h.useState(10),[_,I]=h.useState(r_),[R,U]=h.useState(!1),[D,M]=h.useState(null),[W,X]=h.useState(!1),[z,Q]=h.useState(null),[de,Y]=h.useState(!1),[se,J]=h.useState([]),[F,Ne]=h.useState({});h.useRef(null);const[re,he]=h.useState(!1),[je,De]=h.useState(null),[Me,ve]=h.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[Be,ke]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[fe,ne]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});h.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const Ae=async()=>{try{const me=await ie.get("/leads/getUsers");l(me.data)}catch(me){console.error(`Error fetching users: ${me}`)}},ye=async()=>{x(!0);try{const me=await ie.get("/leads/admin/getLeads");f(me.data),console.log(me.data)}catch(me){console.error(`Error fetching leads: ${me}`)}finally{x(!1)}};h.useEffect(()=>{Ae(),ye()},[]),h.useEffect(()=>{if(t&&u.length>0&&!r&&!R){const me=u.find(ue=>ue.id===Number(t));me&&s(me)}else!t&&!a&&s(null)},[t,u,r,R]),h.useEffect(()=>{if(je){const ue=(We=>{if(!We)return{code:"+63",number:""};const ft=We.match(/^(\+\d+)\s(.+)$/);if(ft)return{code:ft[1],number:ft[2]};if(We.startsWith("+")){const yt=We.match(/^(\+\d{1,3})/);if(yt)return{code:yt[1],number:We.substring(yt[1].length).trim()}}return{code:"+63",number:We}})(je.work_phone),$e=[];je.work_phone&&$e.push(`Work: ${je.work_phone}`),je.mobile_phone_1&&$e.push(`Mobile 1: ${je.mobile_phone_1}`),je.mobile_phone_2&&$e.push(`Mobile 2: ${je.mobile_phone_2}`);const be=$e.length>0?$e.join(" | "):"";ve({name:je.company_name||"",website:"",countryCode:ue.code,phone_number:ue.number,combinedPhoneNumbers:be,billing_address:je.address||"",shipping_address:je.address||"",industry:"",status:"Prospect",territory_id:je.assigned_to?.territory?.id||null,assigned_to:je.assigned_to?.id||null,created_by:je.creator?.id||null}),ke({last_name:je.last_name||"",first_name:je.first_name||"",account_id:null,title:je.title||"",department:je.department||"",email:je.email||"",work_phone:je.work_phone||"",mobile_phone_1:je.mobile_phone_1||"",mobile_phone_2:je.mobile_phone_2||"",notes:je.notes||"",assigned_to:je.assigned_to?.id||null,created_by:je.creator?.id||null}),ne({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:je.assigned_to?.id||null,created_by:je.creator?.id||null})}},[je]);const Ie=me=>N(me.target.value),Ve=h.useMemo(()=>{let me=[...u];const ue=v.trim().toLowerCase();ue&&(me=me.filter(be=>[be?.first_name,be?.last_name,be?.company_name,be?.title,be?.email,be?.work_phone,be?.assigned_to?`${be.assigned_to.first_name} ${be.assigned_to.last_name}`:""].some(ft=>ft&&ft.toString().toLowerCase().includes(ue))));const $e=b.trim().toUpperCase();return $e&&$e!=="FILTER BY STATUS"?me=me.filter(be=>(be.status?be.status.toUpperCase():"")===$e):me=me.filter(be=>(be.status?be.status.toUpperCase():"")!=="CONVERTED"),w&&me.sort((be,We)=>{const ft=`${be.first_name} ${be.last_name}`,yt=`${We.first_name} ${We.last_name}`;return w==="asc"?ft.localeCompare(yt):yt.localeCompare(ft)}),me},[u,v,b,w]),Te=Math.max(1,Math.ceil(Ve.length/A)||1);h.useEffect(()=>{k(1)},[v,b]),h.useEffect(()=>{k(me=>{const ue=Math.max(1,Math.ceil(Ve.length/A)||1);return me>ue?ue:me})},[Ve.length,A]);const Fe=h.useMemo(()=>{const me=(E-1)*A;return Ve.slice(me,me+A)},[Ve,E,A]),Ye=()=>k(me=>Math.max(me-1,1)),B=()=>k(me=>Math.min(me+1,Te)),xe=me=>{T(me),k(1)},_e=h.useCallback(async me=>{try{const ue=await ie.get(`/activities/lead/${me}`);Ne(ue.data&&typeof ue.data=="object"?ue.data:{})}catch(ue){console.error(ue),ue.response?.status===404&&(console.warn("No activities found for this account."),Ne({}))}},[]),ce=me=>{s(me),_e(me.id)},Ee=()=>{s(null),t&&e("/admin/leads",{replace:!0})},ae=()=>{i(!1),I(r_),U(!1),M(null),X(!1),d(null),sessionStorage.removeItem("editLeadData")},He=me=>{me.target.id==="modalBackdrop"&&ae()},Re=()=>{I(r_),U(!1),M(null),d(null),i(!0)},it=me=>{if(!me){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",me),console.log("Current state - leadID:",t,"selectedLead:",a,"showModal:",r);const ue=yt=>{if(!yt)return{code:"+63",number:""};const Tt=yt.match(/^(\+\d+)\s(.+)$/);return Tt?{code:Tt[1],number:Tt[2]}:{code:"+63",number:yt}},$e=ue(me.work_phone),be=ue(me.mobile_phone_1),We=ue(me.mobile_phone_2);let ft="";if(me.assigned_to){ft=String(me.assigned_to.id);const yt=o?.find(Tt=>Tt.id===me.assigned_to.id);d(yt)}I({first_name:me.first_name||"",last_name:me.last_name||"",company_name:me.company_name||"",title:me.title||"",department:me.department||"",email:me.email||"",work_ccode:$e.code,work_phone:$e.number,m1_ccode:be.code,mobile_phone_1:be.number,m2_ccode:We.code,mobile_phone_2:We.number,address:me.address||"",notes:me.notes||"",source:me.source||"",territory_id:me.territory?.id||null,lead_owner:ft,status:me.status||"New"}),U(!0),M(me.id),a?(console.log("Coming from detail view - closing detail modal and showing edit form"),s(null),i(!0)):(console.log("Already in list view - showing modal"),i(!0))},mt=me=>{if(!me){console.error("handleDelete: lead is null or undefined");return}console.log("handleDelete called with lead:",me);const ue=`${me.first_name} ${me.last_name}`||"this lead";Q({title:"Delete Lead",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:ue}),"? This action cannot be undone."]}),confirmLabel:"Delete Lead",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:me.id,name:ue}})},ee=me=>{const{name:ue,value:$e}=me.target;if(I(be=>({...be,[ue]:$e})),ue==="lead_owner"){const be=o.find(We=>We.id===parseInt($e));d(be)}},[pe,Ue]=h.useState(!1),Ze=me=>{if(me.preventDefault(),Ue(!0),!_.last_name?.trim()){q.error("Last name is required.");return}if(!_.company_name?.trim()){q.error("Company is required.");return}if(!_.title?.trim()){q.error("Job title is required.");return}if(!_.email?.trim()){q.error("Email is required.");return}if(!_.email.includes("@")){q.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(_.email)){q.error("Please enter a valid email address with a dot in the domain.");return}if(!_.lead_owner){q.error("Please assign a lead owner.");return}const $e={..._,territory_id:_.territory_id?parseInt(_.territory_id):null,lead_owner:parseInt(_.lead_owner),work_phone:`${_.work_ccode} ${_.work_phone}`,mobile_phone_1:`${_.m1_ccode} ${_.mobile_phone_1}`,mobile_phone_2:`${_.m2_ccode} ${_.mobile_phone_2}`},be=R&&D?"update":"create",We=`${_.first_name} ${_.last_name}`;Q({title:be==="create"?"Confirm New Lead":"Confirm Update",message:be==="create"?n.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",n.jsx("span",{className:"font-semibold",children:We}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:We}),"?"]}),confirmLabel:be==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:be,payload:$e,targetId:D||null,name:We}})},nt=me=>{if(me.target.checked){const ue=Fe.map($e=>$e.id);J(ue)}else J([])},Je=me=>{J(ue=>ue.includes(me)?ue.filter($e=>$e!==me):[...ue,me])},Oe=async()=>{se.length!==0&&Q({title:"Delete Leads",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:se.length})," selected leads? This action cannot be undone."]}),confirmLabel:`Delete ${se.length} Lead(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",leadIds:se}})},ge=async()=>{if(!z?.action){Q(null);return}const{action:me}=z,{type:ue,payload:$e,targetId:be,name:We,lead:ft,leadIds:yt}=me;console.log($e),Y(!0);try{if(ue==="create")X(!0),await ie.post("/leads/create",$e),q.success(`Lead "${We}" created successfully.`),ae(),await ye();else if(ue==="update"){if(!be)throw new Error("Missing lead identifier for update.");X(!0);const Tt=await ie.put(`/leads/${be}`,$e);q.success(`Lead "${We}" updated successfully.`),a&&a.id===be&&s(null),ae(),await ye()}else if(ue==="delete"){if(!be)throw new Error("Missing lead identifier for deletion.");await ie.delete(`/leads/${be}`),q.success(`Lead "${We}" deleted successfully.`),a?.id===be&&s(null),await ye()}else ue==="bulk-delete"&&(await ie.delete("/leads/admin/bulk-delete",{data:{lead_ids:yt}}),q.success(`Successfully deleted ${yt.length} leads`),J([]),await ye())}catch(Tt){console.error(Tt);const Et=ue==="create"?"Failed to create lead. Please review the details and try again.":ue==="update"?"Failed to update lead. Please review the details and try again.":"Failed to delete lead. Please try again.",Gt=Tt.response?.data?.detail||Et;q.error(Gt)}finally{(ue==="create"||ue==="update")&&X(!1),ue!=="edit"&&(Y(!1),Q(null))}},Ke=()=>{de||Q(null)},G=u.filter(me=>me.status==="New").length,$=u.filter(me=>me.status==="Contacted").length,V=u.filter(me=>me.status==="Qualified").length,te=u.filter(me=>me.status==="Converted").length,Z=u.filter(me=>me.status==="Lost").length,Se=[{title:"New",value:G,icon:Gn,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:$,icon:At,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:V,icon:ba,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:te,icon:Bl,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:Z,icon:Ps,color:"text-red-600",bgColor:"bg-red-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[p&&n.jsx(zt,{message:"Loading leads..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Gn,{className:"mr-2 text-blue-600"}),"Leads"]}),n.jsxs("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:[n.jsxs("button",{onClick:()=>{q.info("Download functionality coming soon")},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(Fl,{className:"mr-2"})," Download"]}),n.jsxs("button",{onClick:()=>{Re(),Ue(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(un,{className:"mr-2"})," Add Lead"]})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Se.map(me=>n.jsx(Z1e,{...me},me.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Ht,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search leads",value:v,onChange:Ie,className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:b,onChange:me=>C(me.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]})}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:w,onChange:me=>S(me.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"",children:"Sort by Name"}),n.jsx("option",{value:"asc",children:"A-Z"}),n.jsx("option",{value:"desc",children:"Z-A"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:Fe.length>0&&Fe.every(me=>se.includes(me.id)),onChange:nt})}),n.jsx("th",{className:"py-3 px-4",children:"Name"}),n.jsx("th",{className:"py-3 px-4",children:"Company"}),n.jsx("th",{className:"py-3 px-4",children:"Job Title"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:se.length>0?n.jsx("button",{onClick:Oe,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${se.length} selected leads`,children:n.jsx(Ut,{size:18})}):""})]})}),n.jsx("tbody",{children:Ve.length>0?Fe.map(me=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",children:[n.jsx("td",{className:"py-3 px-4",onClick:ue=>ue.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:se.includes(me.id),onChange:()=>Je(me.id)})}),n.jsx("td",{className:"py-3 px-4",onClick:()=>ce(me),children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[me.first_name," ",me.last_name]})}),n.jsx("td",{className:"py-3 px-4",onClick:()=>ce(me),children:n.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:me.company_name||"--"})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",onClick:()=>ce(me),children:me.title||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",onClick:()=>ce(me),children:me.email||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",onClick:()=>ce(me),children:me.assigned_to?`${me.assigned_to.first_name} ${me.assigned_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",onClick:()=>ce(me),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Q1e(me.status||"New")}`,children:Y1e(me.status||"New")})}),n.jsx("td",{})]},me.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No leads found."})})})]})}),n.jsx(tn,{className:"mt-4",totalItems:Ve.length,pageSize:A,currentPage:E,onPrev:Ye,onNext:B,onPageSizeChange:xe,label:"leads"}),r&&n.jsx("div",{id:"modalBackdrop",onClick:He,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:me=>me.stopPropagation(),children:[n.jsx("button",{onClick:()=>{ae(),Ue(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:R?"Edit Lead":"Add New Lead"}),n.jsxs("form",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),n.jsx("input",{type:"text",name:"first_name",value:_.first_name,onChange:ee,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"last_name",placeholder:"Smith",value:_.last_name,onChange:ee,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
              ${pe&&!_.last_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
          focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Company ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:_.company_name,onChange:ee,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${pe&&!_.company_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Job Title",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:_.title,onChange:ee,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${pe&&!_.title?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),n.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:_.department,onChange:ee,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Email",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:_.email,onChange:ee,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${pe&&!_.email?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"work_ccode",value:_.work_ccode,onChange:ee,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:s_.map(me=>n.jsx("option",{value:me.code,children:me.code},me.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:_.work_phone,onChange:ee,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m1_ccode",value:_.m1_ccode,onChange:ee,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:s_.map(me=>n.jsx("option",{value:me.code,children:me.code},me.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:_.mobile_phone_1,onChange:ee,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m2_ccode",value:_.m2_ccode,onChange:ee,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:s_.map(me=>n.jsx("option",{value:me.code,children:me.code},me.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:_.mobile_phone_2,onChange:ee,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),n.jsx("input",{type:"text",name:"address",value:_.address,onChange:ee,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:`w-full rounded-lg ${pe&&!_.lead_owner?"border border-red-400":"border border-gray-300"}`,children:n.jsx(J1e,{items:Array.isArray(o)?o:[],value:_.lead_owner??"",placeholder:"Search a user...",getLabel:me=>`${me.first_name} ${me.last_name}`,onChange:me=>{const ue=o.find(be=>String(be.id)===String(me));d(ue);let $e=null;ue&&ue.assigned_territory&&ue.assigned_territory.length===1&&($e=ue.assigned_territory[0].id),I(be=>({...be,lead_owner:me,territory_id:$e}))}})})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),n.jsxs("select",{name:"territory_id",value:_.territory_id||"",onChange:ee,disabled:!c||!c.assigned_territory||c.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[n.jsx("option",{value:"",disabled:!0,children:c?c.assigned_territory&&c.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),c&&c.assigned_territory&&c.assigned_territory.map(me=>n.jsx("option",{value:me.id,children:me.name},me.id))]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),n.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:_.source,onChange:ee,children:[n.jsx("option",{value:"",disabled:!0,children:"Select Source"}),n.jsx("option",{value:"Website",children:"Website"}),n.jsx("option",{value:"Referral",children:"Referral"}),n.jsx("option",{value:"Cold call",children:"Cold call"}),n.jsx("option",{value:"Event",children:"Event"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),n.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:_.notes,onChange:ee,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("button",{type:"button",onClick:()=>{ae(),Ue(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:W||de,children:"Cancel"}),n.jsx("button",{type:"submit",onClick:Ze,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:W||de,children:W||de?"Processing...":R?"Update Lead":"Save Lead"})]})]})]})}),z&&n.jsx(X1e,{open:!0,title:z.title,message:z.message,confirmLabel:z.confirmLabel,cancelLabel:z.cancelLabel,variant:z.variant,onConfirm:ge,onCancel:Ke,loading:de}),a&&!r&&!R&&n.jsx(DV,{relatedActs:F,lead:a,onBack:Ee,fetchLeads:ye,setSelectedLead:s,onEdit:it,onDelete:mt})]})}function X1e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function Z1e({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function J1e({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=h.useState(!1),[d,u]=h.useState(""),f=h.useRef(null),p=e.find(N=>String(N.id)===String(t)),x=p?s(p):"",v=h.useMemo(()=>{const N=d.trim().toLowerCase();return(N?e.filter(C=>(s(C)||"").toLowerCase().includes(N)):e).slice(0,o)},[e,d,s,o]);return h.useEffect(()=>{const N=b=>{f.current&&!f.current.contains(b.target)&&c(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),h.useEffect(()=>{l||u("")},[l]),n.jsxs("div",{ref:f,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:l?d:x,placeholder:r,onFocus:()=>!i&&c(!0),onChange:N=>{u(N.target.value),l||c(!0)},className:"w-full rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:v.length>0?v.map(N=>{const b=String(N.id),C=s(N),w=String(t)===b;return n.jsx("button",{type:"button",onClick:()=>{a(b),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${w?"bg-blue-50":""}`,children:C||"--"},b)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}let eCe={data:""},tCe=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||eCe},nCe=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,aCe=/\/\*[^]*?\*\/|  +/g,eR=/\n+/g,$c=(e,t)=>{let a="",s="",r="";for(let i in e){let o=e[i];i[0]=="@"?i[1]=="i"?a=i+" "+o+";":s+=i[1]=="f"?$c(o,i):i+"{"+$c(o,i[1]=="k"?"":t)+"}":typeof o=="object"?s+=$c(o,t?t.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=$c.p?$c.p(i,o):i+":"+o+";")}return a+(t&&r?t+"{"+r+"}":r)+s},il={},OV=e=>{if(typeof e=="object"){let t="";for(let a in e)t+=a+OV(e[a]);return t}return e},sCe=(e,t,a,s,r)=>{let i=OV(e),o=il[i]||(il[i]=(c=>{let d=0,u=11;for(;d<c.length;)u=101*u+c.charCodeAt(d++)>>>0;return"go"+u})(i));if(!il[o]){let c=i!==e?e:(d=>{let u,f,p=[{}];for(;u=nCe.exec(d.replace(aCe,""));)u[4]?p.shift():u[3]?(f=u[3].replace(eR," ").trim(),p.unshift(p[0][f]=p[0][f]||{})):p[0][u[1]]=u[2].replace(eR," ").trim();return p[0]})(e);il[o]=$c(r?{["@keyframes "+o]:c}:c,a?"":"."+o)}let l=a&&il.g?il.g:null;return a&&(il.g=il[o]),((c,d,u,f)=>{f?d.data=d.data.replace(f,c):d.data.indexOf(c)===-1&&(d.data=u?c+d.data:d.data+c)})(il[o],t,s,l),o},rCe=(e,t,a)=>e.reduce((s,r,i)=>{let o=t[i];if(o&&o.call){let l=o(a),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":$c(l,""):l===!1?"":l}return s+r+(o??"")},"");function YN(e){let t=this||{},a=e.call?e(t.p):e;return sCe(a.unshift?a.raw?rCe(a,[].slice.call(arguments,1),t.p):a.reduce((s,r)=>Object.assign(s,r&&r.call?r(t.p):r),{}):a,tCe(t.target),t.g,t.o,t.k)}let MV,hE,gE;YN.bind({g:1});let Ol=YN.bind({k:1});function iCe(e,t,a,s){$c.p=t,MV=e,hE=a,gE=s}function xd(e,t){let a=this||{};return function(){let s=arguments;function r(i,o){let l=Object.assign({},i),c=l.className||r.className;a.p=Object.assign({theme:hE&&hE()},l),a.o=/ *go\d+/.test(c),l.className=YN.apply(a,s)+(c?" "+c:"");let d=e;return e[0]&&(d=l.as||e,delete l.as),gE&&d[0]&&gE(l),MV(d,l)}return r}}var oCe=e=>typeof e=="function",kv=(e,t)=>oCe(e)?e(t):e,lCe=(()=>{let e=0;return()=>(++e).toString()})(),IV=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),cCe=20,MP="default",$V=(e,t)=>{let{toastLimit:a}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,a)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:s}=t;return $V(e,{type:e.toasts.find(o=>o.id===s.id)?1:0,toast:s});case 3:let{toastId:r}=t;return{...e,toasts:e.toasts.map(o=>o.id===r||r===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},zb=[],RV={toasts:[],pausedAt:void 0,settings:{toastLimit:cCe}},bo={},zV=(e,t=MP)=>{bo[t]=$V(bo[t]||RV,e),zb.forEach(([a,s])=>{a===t&&s(bo[t])})},UV=e=>Object.keys(bo).forEach(t=>zV(e,t)),dCe=e=>Object.keys(bo).find(t=>bo[t].toasts.some(a=>a.id===e)),QN=(e=MP)=>t=>{zV(t,e)},uCe={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},mCe=(e={},t=MP)=>{let[a,s]=h.useState(bo[t]||RV),r=h.useRef(bo[t]);h.useEffect(()=>(r.current!==bo[t]&&s(bo[t]),zb.push([t,s]),()=>{let o=zb.findIndex(([l])=>l===t);o>-1&&zb.splice(o,1)}),[t]);let i=a.toasts.map(o=>{var l,c,d;return{...e,...e[o.type],...o,removeDelay:o.removeDelay||((l=e[o.type])==null?void 0:l.removeDelay)||e?.removeDelay,duration:o.duration||((c=e[o.type])==null?void 0:c.duration)||e?.duration||uCe[o.type],style:{...e.style,...(d=e[o.type])==null?void 0:d.style,...o.style}}});return{...a,toasts:i}},fCe=(e,t="blank",a)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...a,id:a?.id||lCe()}),kx=e=>(t,a)=>{let s=fCe(t,e,a);return QN(s.toasterId||dCe(s.id))({type:2,toast:s}),s.id},Ya=(e,t)=>kx("blank")(e,t);Ya.error=kx("error");Ya.success=kx("success");Ya.loading=kx("loading");Ya.custom=kx("custom");Ya.dismiss=(e,t)=>{let a={type:3,toastId:e};t?QN(t)(a):UV(a)};Ya.dismissAll=e=>Ya.dismiss(void 0,e);Ya.remove=(e,t)=>{let a={type:4,toastId:e};t?QN(t)(a):UV(a)};Ya.removeAll=e=>Ya.remove(void 0,e);Ya.promise=(e,t,a)=>{let s=Ya.loading(t.loading,{...a,...a?.loading});return typeof e=="function"&&(e=e()),e.then(r=>{let i=t.success?kv(t.success,r):void 0;return i?Ya.success(i,{id:s,...a,...a?.success}):Ya.dismiss(s),r}).catch(r=>{let i=t.error?kv(t.error,r):void 0;i?Ya.error(i,{id:s,...a,...a?.error}):Ya.dismiss(s)}),e};var hCe=1e3,gCe=(e,t="default")=>{let{toasts:a,pausedAt:s}=mCe(e,t),r=h.useRef(new Map).current,i=h.useCallback((f,p=hCe)=>{if(r.has(f))return;let x=setTimeout(()=>{r.delete(f),o({type:4,toastId:f})},p);r.set(f,x)},[]);h.useEffect(()=>{if(s)return;let f=Date.now(),p=a.map(x=>{if(x.duration===1/0)return;let v=(x.duration||0)+x.pauseDuration-(f-x.createdAt);if(v<0){x.visible&&Ya.dismiss(x.id);return}return setTimeout(()=>Ya.dismiss(x.id,t),v)});return()=>{p.forEach(x=>x&&clearTimeout(x))}},[a,s,t]);let o=h.useCallback(QN(t),[t]),l=h.useCallback(()=>{o({type:5,time:Date.now()})},[o]),c=h.useCallback((f,p)=>{o({type:1,toast:{id:f,height:p}})},[o]),d=h.useCallback(()=>{s&&o({type:6,time:Date.now()})},[s,o]),u=h.useCallback((f,p)=>{let{reverseOrder:x=!1,gutter:v=8,defaultPosition:N}=p||{},b=a.filter(S=>(S.position||N)===(f.position||N)&&S.height),C=b.findIndex(S=>S.id===f.id),w=b.filter((S,E)=>E<C&&S.visible).length;return b.filter(S=>S.visible).slice(...x?[w+1]:[0,w]).reduce((S,E)=>S+(E.height||0)+v,0)},[a]);return h.useEffect(()=>{a.forEach(f=>{if(f.dismissed)i(f.id,f.removeDelay);else{let p=r.get(f.id);p&&(clearTimeout(p),r.delete(f.id))}})},[a,i]),{toasts:a,handlers:{updateHeight:c,startPause:l,endPause:d,calculateOffset:u}}},pCe=Ol`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,xCe=Ol`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,yCe=Ol`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,bCe=xd("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${pCe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${xCe} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${yCe} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,vCe=Ol`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,wCe=xd("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${vCe} 1s linear infinite;
`,NCe=Ol`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,jCe=Ol`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,CCe=xd("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${NCe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${jCe} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,SCe=xd("div")`
  position: absolute;
`,_Ce=xd("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,ACe=Ol`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,TCe=xd("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${ACe} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,ECe=({toast:e})=>{let{icon:t,type:a,iconTheme:s}=e;return t!==void 0?typeof t=="string"?h.createElement(TCe,null,t):t:a==="blank"?null:h.createElement(_Ce,null,h.createElement(wCe,{...s}),a!=="loading"&&h.createElement(SCe,null,a==="error"?h.createElement(bCe,{...s}):h.createElement(CCe,{...s})))},kCe=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,LCe=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,PCe="0%{opacity:0;} 100%{opacity:1;}",DCe="0%{opacity:1;} 100%{opacity:0;}",OCe=xd("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,MCe=xd("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,ICe=(e,t)=>{let a=e.includes("top")?1:-1,[s,r]=IV()?[PCe,DCe]:[kCe(a),LCe(a)];return{animation:t?`${Ol(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Ol(r)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},$Ce=h.memo(({toast:e,position:t,style:a,children:s})=>{let r=e.height?ICe(e.position||t||"top-center",e.visible):{opacity:0},i=h.createElement(ECe,{toast:e}),o=h.createElement(MCe,{...e.ariaProps},kv(e.message,e));return h.createElement(OCe,{className:e.className,style:{...r,...a,...e.style}},typeof s=="function"?s({icon:i,message:o}):h.createElement(h.Fragment,null,i,o))});iCe(h.createElement);var RCe=({id:e,className:t,style:a,onHeightUpdate:s,children:r})=>{let i=h.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;s(e,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,s]);return h.createElement("div",{ref:i,className:t,style:a},r)},zCe=(e,t)=>{let a=e.includes("top"),s=a?{top:0}:{bottom:0},r=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:IV()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(a?1:-1)}px)`,...s,...r}},UCe=YN`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Iy=16,Lx=({reverseOrder:e,position:t="top-center",toastOptions:a,gutter:s,children:r,toasterId:i,containerStyle:o,containerClassName:l})=>{let{toasts:c,handlers:d}=gCe(a,i);return h.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:Iy,left:Iy,right:Iy,bottom:Iy,pointerEvents:"none",...o},className:l,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map(u=>{let f=u.position||t,p=d.calculateOffset(u,{reverseOrder:e,gutter:s,defaultPosition:t}),x=zCe(f,p);return h.createElement(RCe,{id:u.id,key:u.id,onHeightUpdate:d.updateHeight,className:u.visible?UCe:"",style:x},u.type==="custom"?kv(u.message,u):r?r(u):h.createElement($Ce,{toast:u,position:f}))}))},Px=Ya;function FCe(){h.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,t]=h.useState(null),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Actions"),[o,l]=h.useState(1),[c,d]=h.useState(10),u=async()=>{try{const w=await ie.get("/logs/read-all");t(w.data)}catch(w){console.error("Error fetching audit logs:",w)}};h.useEffect(()=>{u()},[]);const f=h.useMemo(()=>{if(!Array.isArray(e))return[];const w=a.trim().toLowerCase(),S=r?.toUpperCase?.()||"ALL";return e.filter(k=>{const A=k.timestamp?new Date(k.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",T=`${k.entity_type||""} ${k.entity_name||k.entity_details?.name||k.entity_details?.title||k.entity_id||""}`,_=`${k.logger?.first_name||""} ${k.logger?.last_name||""}`,I=[A,_,k.action,k.entity_type,T,k.description],R=w===""||I.some(D=>D==null?!1:D.toString().toLowerCase().includes(w)),U=S==="FILTER BY ACTIONS"||(k.action||"").toUpperCase()===S;return R&&U}).sort((k,A)=>{const T=k.timestamp?new Date(k.timestamp).getTime():0;return(A.timestamp?new Date(A.timestamp).getTime():0)-T})},[e,a,r]),p=Math.max(1,Math.ceil(f.length/c)||1);h.useEffect(()=>{l(1)},[a,r]),h.useEffect(()=>{l(w=>{const S=Math.max(1,Math.ceil(f.length/c)||1);return w>S?S:w})},[f.length,c]);const x=h.useMemo(()=>{const w=(o-1)*c;return f.slice(w,w+c)},[f,o,c]);f.length===0||(o-1)*c+1,Math.min(o*c,f.length);const v=()=>l(w=>Math.max(w-1,1)),N=()=>l(w=>Math.min(w+1,p)),b=()=>{if(!f.length){Px.error("No logs to export!");return}const w=["Timestamp","User","Action","Resource","Details"],S=f.map(_=>[new Date(_.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${_.logger?.first_name||""} ${_.logger?.last_name||""}`.trim(),_.action,`${_.entity_type}: ${_.entity_id}`,_.description||""]),E=[w.join(","),...S.map(_=>_.map(I=>`"${String(I).replace(/"/g,'""')}"`).join(","))].join(`
`),k=new Blob([E],{type:"text/csv;charset=utf-8;"}),A=URL.createObjectURL(k),T=document.createElement("a");T.href=A,T.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(T),T.click(),document.body.removeChild(T),URL.revokeObjectURL(A)},C=w=>{switch((w||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&n.jsx(zt,{message:"Loading audit logs..."}),n.jsx(Lx,{toastOptions:{duration:1e3}}),n.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[n.jsx(Ct,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),n.jsxs("p",{className:"text-sm text-blue-700",children:[n.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ws,{className:"text-blue-600",size:20}),n.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:b,children:[n.jsx(Fl,{className:"mr-2"}),"Export Logs"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[n.jsx(Ht,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search audit logs",value:a,onChange:w=>s(w.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:r,onChange:w=>i(w.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),n.jsx("option",{value:"CREATE",children:"CREATE"}),n.jsx("option",{value:"DELETE",children:"DELETE"}),n.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),n.jsx("th",{className:"py-3 px-4",children:"User"}),n.jsx("th",{className:"py-3 px-4",children:"Action"}),n.jsx("th",{className:"py-3 px-4",children:"Resource"}),n.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),n.jsx("tbody",{children:Array.isArray(f)&&f.length>0?x.map((w,S)=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(w.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.name}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${C(w.action)}`,children:w.action})}),n.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[w.entity_type,": ",w.entity_id]}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.description})]},S)):n.jsx("tr",{children:n.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),n.jsx(tn,{className:"mt-4",totalItems:f.length,pageSize:c,currentPage:o,onPrev:v,onNext:N,onPageSizeChange:w=>{d(w),l(1)},pageSizeOptions:[10,20,30,40,50],label:"logs"})]})}var BCe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function IP(e){if(typeof e!="string")return!1;var t=BCe;return t.includes(e)}var HCe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],GCe=new Set(HCe);function FV(e){return typeof e!="string"?!1:GCe.has(e)}function BV(e){return typeof e=="string"&&e.startsWith("data-")}function Or(e){if(typeof e!="object"||e===null)return{};var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(FV(a)||BV(a))&&(t[a]=e[a]);return t}function Au(e){if(e==null)return null;if(h.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Or(t)}return typeof e=="object"&&!Array.isArray(e)?Or(e):null}function Us(e){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(FV(a)||BV(a)||IP(a))&&(t[a]=e[a]);return t}function WCe(e){return e==null?null:h.isValidElement(e)?Us(e.props):typeof e=="object"&&!Array.isArray(e)?Us(e):null}var qCe=["children","width","height","viewBox","className","style","title","desc"];function pE(){return pE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},pE.apply(null,arguments)}function VCe(e,t){if(e==null)return{};var a,s,r=YCe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function YCe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var $P=h.forwardRef((e,t)=>{var{children:a,width:s,height:r,viewBox:i,className:o,style:l,title:c,desc:d}=e,u=VCe(e,qCe),f=i||{width:s,height:r,x:0,y:0},p=kt("recharts-surface",o);return h.createElement("svg",pE({},Us(u),{className:p,width:s,height:r,style:l,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),h.createElement("title",null,c),h.createElement("desc",null,d),a)}),QCe=["children","className"];function xE(){return xE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},xE.apply(null,arguments)}function KCe(e,t){if(e==null)return{};var a,s,r=XCe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function XCe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var ds=h.forwardRef((e,t)=>{var{children:a,className:s}=e,r=KCe(e,QCe),i=kt("recharts-layer",s);return h.createElement("g",xE({className:i},Us(r),{ref:t}),a)}),HV=h.createContext(null),ZCe=()=>h.useContext(HV),i_={},o_={},tR;function JCe(){return tR||(tR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a==="__proto__"}e.isUnsafeProperty=t})(o_)),o_}var l_={},nR;function GV(){return nR||(nR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){switch(typeof a){case"number":case"symbol":return!1;case"string":return a.includes(".")||a.includes("[")||a.includes("]")}}e.isDeepKey=t})(l_)),l_}var c_={},aR;function RP(){return aR||(aR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="string"||typeof a=="symbol"?a:Object.is(a?.valueOf?.(),-0)?"-0":String(a)}e.toKey=t})(c_)),c_}var d_={},u_={},sR;function eSe(){return sR||(sR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){if(a==null)return"";if(typeof a=="string")return a;if(Array.isArray(a))return a.map(t).join(",");const s=String(a);return s==="0"&&Object.is(Number(a),-0)?"-0":s}e.toString=t})(u_)),u_}var rR;function zP(){return rR||(rR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eSe(),a=RP();function s(r){if(Array.isArray(r))return r.map(a.toKey);if(typeof r=="symbol")return[r];r=t.toString(r);const i=[],o=r.length;if(o===0)return i;let l=0,c="",d="",u=!1;for(r.charCodeAt(0)===46&&(i.push(""),l++);l<o;){const f=r[l];d?f==="\\"&&l+1<o?(l++,c+=r[l]):f===d?d="":c+=f:u?f==='"'||f==="'"?d=f:f==="]"?(u=!1,i.push(c),c=""):c+=f:f==="["?(u=!0,c&&(i.push(c),c="")):f==="."?c&&(i.push(c),c=""):c+=f,l++}return c&&i.push(c),i}e.toPath=s})(d_)),d_}var iR;function UP(){return iR||(iR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JCe(),a=GV(),s=RP(),r=zP();function i(l,c,d){if(l==null)return d;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return d;const u=l[c];return u===void 0?a.isDeepKey(c)?i(l,r.toPath(c),d):d:u}case"number":case"symbol":{typeof c=="number"&&(c=s.toKey(c));const u=l[c];return u===void 0?d:u}default:{if(Array.isArray(c))return o(l,c,d);if(Object.is(c?.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return d;const u=l[c];return u===void 0?d:u}}}function o(l,c,d){if(c.length===0)return d;let u=l;for(let f=0;f<c.length;f++){if(u==null||t.isUnsafeProperty(c[f]))return d;u=u[c[f]]}return u===void 0?d:u}e.get=i})(i_)),i_}var m_,oR;function tSe(){return oR||(oR=1,m_=UP().get),m_}var nSe=tSe();const Tu=Hi(nSe);var aSe=4;function Hc(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:aSe,a=10**t,s=Math.round(e*a)/a;return Object.is(s,-0)?0:s}function pa(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),s=1;s<t;s++)a[s-1]=arguments[s];return e.reduce((r,i,o)=>{var l=a[o-1];return typeof l=="string"?r+l+i:l!==void 0?r+Hc(l)+i:r+i},"")}var cs=e=>e===0?0:e>0?1:-1,Fi=e=>typeof e=="number"&&e!=+e,Ml=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Dt=e=>(typeof e=="number"||e instanceof Number)&&!Fi(e),Po=e=>Dt(e)||typeof e=="string",sSe=0,Np=e=>{var t=++sSe;return"".concat(e||"").concat(t)},ks=function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Dt(t)&&typeof t!="string")return s;var i;if(Ml(t)){if(a==null)return s;var o=t.indexOf("%");i=a*parseFloat(t.slice(0,o))/100}else i=+t;return Fi(i)&&(i=s),r&&a!=null&&i>a&&(i=a),i},WV=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,a={},s=0;s<t;s++)if(!a[String(e[s])])a[String(e[s])]=!0;else return!0;return!1};function na(e,t,a){return Dt(e)&&Dt(t)?Hc(e+a*(t-e)):t}function qV(e,t,a){if(!(!e||!e.length))return e.find(s=>s&&(typeof t=="function"?t(s):Tu(s,t))===a)}var ra=e=>e===null||typeof e>"u",Dx=e=>ra(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function rSe(e){return e!=null}function Ox(){}var iSe=["type","size","sizeType"];function yE(){return yE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},yE.apply(null,arguments)}function lR(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function cR(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?lR(Object(a),!0).forEach(function(s){oSe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):lR(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function oSe(e,t,a){return(t=lSe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function lSe(e){var t=cSe(e,"string");return typeof t=="symbol"?t:t+""}function cSe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dSe(e,t){if(e==null)return{};var a,s,r=uSe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function uSe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var VV={symbolCircle:TN,symbolCross:NW,symbolDiamond:CW,symbolSquare:SW,symbolStar:AW,symbolTriangle:TW,symbolWye:EW},mSe=Math.PI/180,fSe=e=>{var t="symbol".concat(Dx(e));return VV[t]||TN},hSe=(e,t,a)=>{if(t==="area")return e;switch(a){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var s=18*mSe;return 1.25*e*e*(Math.tan(s)-Math.tan(s*2)*Math.tan(s)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},gSe=(e,t)=>{VV["symbol".concat(Dx(e))]=t},FP=e=>{var{type:t="circle",size:a=64,sizeType:s="area"}=e,r=dSe(e,iSe),i=cR(cR({},r),{},{type:t,size:a,sizeType:s}),o="circle";typeof t=="string"&&(o=t);var l=()=>{var p=fSe(o),x=ZL().type(p).size(hSe(a,s,o)),v=x();if(v!==null)return v},{className:c,cx:d,cy:u}=i,f=Us(i);return Dt(d)&&Dt(u)&&Dt(a)?h.createElement("path",yE({},f,{className:kt("recharts-symbols",c),transform:"translate(".concat(d,", ").concat(u,")"),d:l()})):null};FP.registerSymbol=gSe;var YV=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,BP=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(h.isValidElement(e)&&(a=e.props),typeof a!="object"&&typeof a!="function")return null;var s={};return Object.keys(a).forEach(r=>{IP(r)&&(s[r]=(i=>a[r](a,i)))}),s},pSe=(e,t,a)=>s=>(e(t,a,s),null),Mx=(e,t,a)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var s=null;return Object.keys(e).forEach(r=>{var i=e[r];IP(r)&&typeof i=="function"&&(s||(s={}),s[r]=pSe(i,t,a))}),s};function dR(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function xSe(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?dR(Object(a),!0).forEach(function(s){ySe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):dR(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function ySe(e,t,a){return(t=bSe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function bSe(e){var t=vSe(e,"string");return typeof t=="symbol"?t:t+""}function vSe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function za(e,t){var a=xSe({},e),s=t,r=Object.keys(t),i=r.reduce((o,l)=>(o[l]===void 0&&s[l]!==void 0&&(o[l]=s[l]),o),a);return i}function Lv(){return Lv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Lv.apply(null,arguments)}function uR(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function wSe(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?uR(Object(a),!0).forEach(function(s){NSe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):uR(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function NSe(e,t,a){return(t=jSe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function jSe(e){var t=CSe(e,"string");return typeof t=="symbol"?t:t+""}function CSe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ei=32,SSe={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function _Se(e){var{data:t,iconType:a,inactiveColor:s}=e,r=ei/2,i=ei/6,o=ei/3,l=t.inactive?s:t.color,c=a??t.type;if(c==="none")return null;if(c==="plainline"){var d;return h.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:(d=t.payload)===null||d===void 0?void 0:d.strokeDasharray,x1:0,y1:r,x2:ei,y2:r,className:"recharts-legend-icon"})}if(c==="line")return h.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(r,"h").concat(o,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*o,",").concat(r,`
            H`).concat(ei,"M").concat(2*o,",").concat(r,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(o,",").concat(r),className:"recharts-legend-icon"});if(c==="rect")return h.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(ei/8,"h").concat(ei,"v").concat(ei*3/4,"h").concat(-ei,"z"),className:"recharts-legend-icon"});if(h.isValidElement(t.legendIcon)){var u=wSe({},t);return delete u.legendIcon,h.cloneElement(t.legendIcon,u)}return h.createElement(FP,{fill:l,cx:r,cy:r,size:ei,sizeType:"diameter",type:c})}function ASe(e){var{payload:t,iconSize:a,layout:s,formatter:r,inactiveColor:i,iconType:o}=e,l={x:0,y:0,width:ei,height:ei},c={display:s==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((u,f)=>{var p=u.formatter||r,x=kt({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:u.inactive});if(u.type==="none")return null;var v=u.inactive?i:u.color,N=p?p(u.value,u,f):u.value;return h.createElement("li",Lv({className:x,style:c,key:"legend-item-".concat(f)},Mx(e,u,f)),h.createElement($P,{width:a,height:a,viewBox:l,style:d,"aria-label":"".concat(N," legend icon")},h.createElement(_Se,{data:u,iconType:o,inactiveColor:i})),h.createElement("span",{className:"recharts-legend-item-text",style:{color:v}},N))})}var TSe=e=>{var t=za(e,SSe),{payload:a,layout:s,align:r}=t;if(!a||!a.length)return null;var i={padding:0,margin:0,textAlign:s==="horizontal"?r:"left"};return h.createElement("ul",{className:"recharts-default-legend",style:i},h.createElement(ASe,Lv({},t,{payload:a})))},f_={},h_={},mR;function ESe(){return mR||(mR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a,s){const r=new Map;for(let i=0;i<a.length;i++){const o=a[i],l=s(o);r.has(l)||r.set(l,o)}return Array.from(r.values())}e.uniqBy=t})(h_)),h_}var g_={},fR;function QV(){return fR||(fR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a}e.identity=t})(g_)),g_}var p_={},x_={},y_={},hR;function kSe(){return hR||(hR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return Number.isSafeInteger(a)&&a>=0}e.isLength=t})(y_)),y_}var gR;function HP(){return gR||(gR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kSe();function a(s){return s!=null&&typeof s!="function"&&t.isLength(s.length)}e.isArrayLike=a})(x_)),x_}var b_={},pR;function LSe(){return pR||(pR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="object"&&a!==null}e.isObjectLike=t})(b_)),b_}var xR;function PSe(){return xR||(xR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HP(),a=LSe();function s(r){return a.isObjectLike(r)&&t.isArrayLike(r)}e.isArrayLikeObject=s})(p_)),p_}var v_={},w_={},yR;function DSe(){return yR||(yR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UP();function a(s){return function(r){return t.get(r,s)}}e.property=a})(w_)),w_}var N_={},j_={},C_={},S_={},bR;function KV(){return bR||(bR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a!==null&&(typeof a=="object"||typeof a=="function")}e.isObject=t})(S_)),S_}var __={},vR;function XV(){return vR||(vR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a==null||typeof a!="object"&&typeof a!="function"}e.isPrimitive=t})(__)),__}var A_={},wR;function ZV(){return wR||(wR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a,s){return a===s||Number.isNaN(a)&&Number.isNaN(s)}e.eq=t})(A_)),A_}var NR;function OSe(){return NR||(NR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=KV(),a=XV(),s=ZV();function r(u,f,p){return typeof p!="function"?r(u,f,()=>{}):i(u,f,function x(v,N,b,C,w,S){const E=p(v,N,b,C,w,S);return E!==void 0?!!E:i(v,N,x,S)},new Map)}function i(u,f,p,x){if(f===u)return!0;switch(typeof f){case"object":return o(u,f,p,x);case"function":return Object.keys(f).length>0?i(u,{...f},p,x):s.eq(u,f);default:return t.isObject(u)?typeof f=="string"?f==="":!0:s.eq(u,f)}}function o(u,f,p,x){if(f==null)return!0;if(Array.isArray(f))return c(u,f,p,x);if(f instanceof Map)return l(u,f,p,x);if(f instanceof Set)return d(u,f,p,x);const v=Object.keys(f);if(u==null||a.isPrimitive(u))return v.length===0;if(v.length===0)return!0;if(x?.has(f))return x.get(f)===u;x?.set(f,u);try{for(let N=0;N<v.length;N++){const b=v[N];if(!a.isPrimitive(u)&&!(b in u)||f[b]===void 0&&u[b]!==void 0||f[b]===null&&u[b]!==null||!p(u[b],f[b],b,u,f,x))return!1}return!0}finally{x?.delete(f)}}function l(u,f,p,x){if(f.size===0)return!0;if(!(u instanceof Map))return!1;for(const[v,N]of f.entries()){const b=u.get(v);if(p(b,N,v,u,f,x)===!1)return!1}return!0}function c(u,f,p,x){if(f.length===0)return!0;if(!Array.isArray(u))return!1;const v=new Set;for(let N=0;N<f.length;N++){const b=f[N];let C=!1;for(let w=0;w<u.length;w++){if(v.has(w))continue;const S=u[w];let E=!1;if(p(S,b,N,u,f,x)&&(E=!0),E){v.add(w),C=!0;break}}if(!C)return!1}return!0}function d(u,f,p,x){return f.size===0?!0:u instanceof Set?c([...u],[...f],p,x):!1}e.isMatchWith=r,e.isSetMatch=d})(C_)),C_}var jR;function JV(){return jR||(jR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OSe();function a(s,r){return t.isMatchWith(s,r,()=>{})}e.isMatch=a})(j_)),j_}var T_={},E_={},k_={},CR;function MSe(){return CR||(CR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return Object.getOwnPropertySymbols(a).filter(s=>Object.prototype.propertyIsEnumerable.call(a,s))}e.getSymbols=t})(k_)),k_}var L_={},SR;function eY(){return SR||(SR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a==null?a===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(a)}e.getTag=t})(L_)),L_}var P_={},_R;function tY(){return _R||(_R=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",a="[object String]",s="[object Number]",r="[object Boolean]",i="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",d="[object Set]",u="[object Array]",f="[object Function]",p="[object ArrayBuffer]",x="[object Object]",v="[object Error]",N="[object DataView]",b="[object Uint8Array]",C="[object Uint8ClampedArray]",w="[object Uint16Array]",S="[object Uint32Array]",E="[object BigUint64Array]",k="[object Int8Array]",A="[object Int16Array]",T="[object Int32Array]",_="[object BigInt64Array]",I="[object Float32Array]",R="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=p,e.arrayTag=u,e.bigInt64ArrayTag=_,e.bigUint64ArrayTag=E,e.booleanTag=r,e.dataViewTag=N,e.dateTag=l,e.errorTag=v,e.float32ArrayTag=I,e.float64ArrayTag=R,e.functionTag=f,e.int16ArrayTag=A,e.int32ArrayTag=T,e.int8ArrayTag=k,e.mapTag=c,e.numberTag=s,e.objectTag=x,e.regexpTag=t,e.setTag=d,e.stringTag=a,e.symbolTag=o,e.uint16ArrayTag=w,e.uint32ArrayTag=S,e.uint8ArrayTag=b,e.uint8ClampedArrayTag=C})(P_)),P_}var D_={},AR;function ISe(){return AR||(AR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)}e.isTypedArray=t})(D_)),D_}var TR;function nY(){return TR||(TR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=MSe(),a=eY(),s=tY(),r=XV(),i=ISe();function o(u,f){return l(u,void 0,u,new Map,f)}function l(u,f,p,x=new Map,v=void 0){const N=v?.(u,f,p,x);if(N!==void 0)return N;if(r.isPrimitive(u))return u;if(x.has(u))return x.get(u);if(Array.isArray(u)){const b=new Array(u.length);x.set(u,b);for(let C=0;C<u.length;C++)b[C]=l(u[C],C,p,x,v);return Object.hasOwn(u,"index")&&(b.index=u.index),Object.hasOwn(u,"input")&&(b.input=u.input),b}if(u instanceof Date)return new Date(u.getTime());if(u instanceof RegExp){const b=new RegExp(u.source,u.flags);return b.lastIndex=u.lastIndex,b}if(u instanceof Map){const b=new Map;x.set(u,b);for(const[C,w]of u)b.set(C,l(w,C,p,x,v));return b}if(u instanceof Set){const b=new Set;x.set(u,b);for(const C of u)b.add(l(C,void 0,p,x,v));return b}if(typeof Buffer<"u"&&Buffer.isBuffer(u))return u.subarray();if(i.isTypedArray(u)){const b=new(Object.getPrototypeOf(u)).constructor(u.length);x.set(u,b);for(let C=0;C<u.length;C++)b[C]=l(u[C],C,p,x,v);return b}if(u instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&u instanceof SharedArrayBuffer)return u.slice(0);if(u instanceof DataView){const b=new DataView(u.buffer.slice(0),u.byteOffset,u.byteLength);return x.set(u,b),c(b,u,p,x,v),b}if(typeof File<"u"&&u instanceof File){const b=new File([u],u.name,{type:u.type});return x.set(u,b),c(b,u,p,x,v),b}if(typeof Blob<"u"&&u instanceof Blob){const b=new Blob([u],{type:u.type});return x.set(u,b),c(b,u,p,x,v),b}if(u instanceof Error){const b=new u.constructor;return x.set(u,b),b.message=u.message,b.name=u.name,b.stack=u.stack,b.cause=u.cause,c(b,u,p,x,v),b}if(u instanceof Boolean){const b=new Boolean(u.valueOf());return x.set(u,b),c(b,u,p,x,v),b}if(u instanceof Number){const b=new Number(u.valueOf());return x.set(u,b),c(b,u,p,x,v),b}if(u instanceof String){const b=new String(u.valueOf());return x.set(u,b),c(b,u,p,x,v),b}if(typeof u=="object"&&d(u)){const b=Object.create(Object.getPrototypeOf(u));return x.set(u,b),c(b,u,p,x,v),b}return u}function c(u,f,p=u,x,v){const N=[...Object.keys(f),...t.getSymbols(f)];for(let b=0;b<N.length;b++){const C=N[b],w=Object.getOwnPropertyDescriptor(u,C);(w==null||w.writable)&&(u[C]=l(f[C],C,p,x,v))}}function d(u){switch(a.getTag(u)){case s.argumentsTag:case s.arrayTag:case s.arrayBufferTag:case s.dataViewTag:case s.booleanTag:case s.dateTag:case s.float32ArrayTag:case s.float64ArrayTag:case s.int8ArrayTag:case s.int16ArrayTag:case s.int32ArrayTag:case s.mapTag:case s.numberTag:case s.objectTag:case s.regexpTag:case s.setTag:case s.stringTag:case s.symbolTag:case s.uint8ArrayTag:case s.uint8ClampedArrayTag:case s.uint16ArrayTag:case s.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=c})(E_)),E_}var ER;function $Se(){return ER||(ER=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nY();function a(s){return t.cloneDeepWithImpl(s,void 0,s,new Map,void 0)}e.cloneDeep=a})(T_)),T_}var kR;function RSe(){return kR||(kR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JV(),a=$Se();function s(r){return r=a.cloneDeep(r),i=>t.isMatch(i,r)}e.matches=s})(N_)),N_}var O_={},M_={},I_={},LR;function zSe(){return LR||(LR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nY(),a=tY();function s(r,i){return t.cloneDeepWith(r,(o,l,c,d)=>{const u=i?.(o,l,c,d);if(u!==void 0)return u;if(typeof r=="object")switch(Object.prototype.toString.call(r)){case a.numberTag:case a.stringTag:case a.booleanTag:{const f=new r.constructor(r?.valueOf());return t.copyProperties(f,r),f}case a.argumentsTag:{const f={};return t.copyProperties(f,r),f.length=r.length,f[Symbol.iterator]=r[Symbol.iterator],f}default:return}})}e.cloneDeepWith=s})(I_)),I_}var PR;function USe(){return PR||(PR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zSe();function a(s){return t.cloneDeepWith(s)}e.cloneDeep=a})(M_)),M_}var $_={},R_={},DR;function aY(){return DR||(DR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function a(s,r=Number.MAX_SAFE_INTEGER){switch(typeof s){case"number":return Number.isInteger(s)&&s>=0&&s<r;case"symbol":return!1;case"string":return t.test(s)}}e.isIndex=a})(R_)),R_}var z_={},OR;function FSe(){return OR||(OR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eY();function a(s){return s!==null&&typeof s=="object"&&t.getTag(s)==="[object Arguments]"}e.isArguments=a})(z_)),z_}var MR;function BSe(){return MR||(MR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GV(),a=aY(),s=FSe(),r=zP();function i(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&t.isDeepKey(l)&&o?.[l]==null?c=r.toPath(l):c=[l],c.length===0)return!1;let d=o;for(let u=0;u<c.length;u++){const f=c[u];if((d==null||!Object.hasOwn(d,f))&&!((Array.isArray(d)||s.isArguments(d))&&a.isIndex(f)&&f<d.length))return!1;d=d[f]}return!0}e.has=i})($_)),$_}var IR;function HSe(){return IR||(IR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JV(),a=RP(),s=USe(),r=UP(),i=BSe();function o(l,c){switch(typeof l){case"object":{Object.is(l?.valueOf(),-0)&&(l="-0");break}case"number":{l=a.toKey(l);break}}return c=s.cloneDeep(c),function(d){const u=r.get(d,l);return u===void 0?i.has(d,l):c===void 0?u===void 0:t.isMatch(u,c)}}e.matchesProperty=o})(O_)),O_}var $R;function GSe(){return $R||($R=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QV(),a=DSe(),s=RSe(),r=HSe();function i(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?r.matchesProperty(o[0],o[1]):s.matches(o);case"string":case"symbol":case"number":return a.property(o)}}e.iteratee=i})(v_)),v_}var RR;function WSe(){return RR||(RR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ESe(),a=QV(),s=PSe(),r=GSe();function i(o,l=a.identity){return s.isArrayLikeObject(o)?t.uniqBy(Array.from(o),r.iteratee(l)):[]}e.uniqBy=i})(f_)),f_}var U_,zR;function qSe(){return zR||(zR=1,U_=WSe().uniqBy),U_}var VSe=qSe();const UR=Hi(VSe);function sY(e,t,a){return t===!0?UR(e,a):typeof t=="function"?UR(e,t):e}var GP=h.createContext(null),YSe=e=>e,qn=()=>{var e=h.useContext(GP);return e?e.store.dispatch:YSe},Ub=()=>{},QSe=()=>Ub,KSe=(e,t)=>e===t;function Mt(e){var t=h.useContext(GP);return P9.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:QSe,t?t.store.getState:Ub,t?t.store.getState:Ub,t?e:Ub,KSe)}var F_={},B_={},H_={},FR;function XSe(){return FR||(FR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return typeof s=="symbol"?1:s===null?2:s===void 0?3:s!==s?4:0}const a=(s,r,i)=>{if(s!==r){const o=t(s),l=t(r);if(o===l&&o===0){if(s<r)return i==="desc"?1:-1;if(s>r)return i==="desc"?-1:1}return i==="desc"?l-o:o-l}return 0};e.compareValues=a})(H_)),H_}var G_={},W_={},BR;function rY(){return BR||(BR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="symbol"||a instanceof Symbol}e.isSymbol=t})(W_)),W_}var HR;function ZSe(){return HR||(HR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rY(),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;function r(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(s.test(i)||!a.test(i))||o!=null&&Object.hasOwn(o,i)}e.isKey=r})(G_)),G_}var GR;function JSe(){return GR||(GR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=XSe(),a=ZSe(),s=zP();function r(i,o,l,c){if(i==null)return[];l=c?void 0:l,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(x=>String(x));const d=(x,v)=>{let N=x;for(let b=0;b<v.length&&N!=null;++b)N=N[v[b]];return N},u=(x,v)=>v==null||x==null?v:typeof x=="object"&&"key"in x?Object.hasOwn(v,x.key)?v[x.key]:d(v,x.path):typeof x=="function"?x(v):Array.isArray(x)?d(v,x):typeof v=="object"?v[x]:v,f=o.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||a.isKey(x)?x:{key:x,path:s.toPath(x)}));return i.map(x=>({original:x,criteria:f.map(v=>u(v,x))})).slice().sort((x,v)=>{for(let N=0;N<f.length;N++){const b=t.compareValues(x.criteria[N],v.criteria[N],l[N]);if(b!==0)return b}return 0}).map(x=>x.original)}e.orderBy=r})(B_)),B_}var q_={},WR;function e_e(){return WR||(WR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a,s=1){const r=[],i=Math.floor(s),o=(l,c)=>{for(let d=0;d<l.length;d++){const u=l[d];Array.isArray(u)&&c<i?o(u,c+1):r.push(u)}};return o(a,0),r}e.flatten=t})(q_)),q_}var V_={},qR;function iY(){return qR||(qR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=aY(),a=HP(),s=KV(),r=ZV();function i(o,l,c){return s.isObject(c)&&(typeof l=="number"&&a.isArrayLike(c)&&t.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?r.eq(c[l],o):!1}e.isIterateeCall=i})(V_)),V_}var VR;function t_e(){return VR||(VR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JSe(),a=e_e(),s=iY();function r(i,...o){const l=o.length;return l>1&&s.isIterateeCall(i,o[0],o[1])?o=[]:l>2&&s.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(i,a.flatten(o),["asc"])}e.sortBy=r})(F_)),F_}var Y_,YR;function n_e(){return YR||(YR=1,Y_=t_e().sortBy),Y_}var a_e=n_e();const KN=Hi(a_e);var oY=e=>e.legend.settings,s_e=e=>e.legend.size,r_e=e=>e.legend.payload,i_e=at([r_e,oY],(e,t)=>{var{itemSorter:a}=t,s=e.flat(1);return a?KN(s,a):s});function o_e(){return Mt(i_e)}var $y=1;function lY(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,a]=h.useState({height:0,left:0,top:0,width:0}),s=h.useCallback(r=>{if(r!=null){var i=r.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-t.height)>$y||Math.abs(o.left-t.left)>$y||Math.abs(o.top-t.top)>$y||Math.abs(o.width-t.width)>$y)&&a({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,s]}function ys(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var l_e=typeof Symbol=="function"&&Symbol.observable||"@@observable",QR=l_e,Q_=()=>Math.random().toString(36).substring(7).split("").join("."),c_e={INIT:`@@redux/INIT${Q_()}`,REPLACE:`@@redux/REPLACE${Q_()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Q_()}`},Pv=c_e;function WP(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function cY(e,t,a){if(typeof e!="function")throw new Error(ys(2));if(typeof t=="function"&&typeof a=="function"||typeof a=="function"&&typeof arguments[3]=="function")throw new Error(ys(0));if(typeof t=="function"&&typeof a>"u"&&(a=t,t=void 0),typeof a<"u"){if(typeof a!="function")throw new Error(ys(1));return a(cY)(e,t)}let s=e,r=t,i=new Map,o=i,l=0,c=!1;function d(){o===i&&(o=new Map,i.forEach((b,C)=>{o.set(C,b)}))}function u(){if(c)throw new Error(ys(3));return r}function f(b){if(typeof b!="function")throw new Error(ys(4));if(c)throw new Error(ys(5));let C=!0;d();const w=l++;return o.set(w,b),function(){if(C){if(c)throw new Error(ys(6));C=!1,d(),o.delete(w),i=null}}}function p(b){if(!WP(b))throw new Error(ys(7));if(typeof b.type>"u")throw new Error(ys(8));if(typeof b.type!="string")throw new Error(ys(17));if(c)throw new Error(ys(9));try{c=!0,r=s(r,b)}finally{c=!1}return(i=o).forEach(w=>{w()}),b}function x(b){if(typeof b!="function")throw new Error(ys(10));s=b,p({type:Pv.REPLACE})}function v(){const b=f;return{subscribe(C){if(typeof C!="object"||C===null)throw new Error(ys(11));function w(){const E=C;E.next&&E.next(u())}return w(),{unsubscribe:b(w)}},[QR](){return this}}}return p({type:Pv.INIT}),{dispatch:p,subscribe:f,getState:u,replaceReducer:x,[QR]:v}}function d_e(e){Object.keys(e).forEach(t=>{const a=e[t];if(typeof a(void 0,{type:Pv.INIT})>"u")throw new Error(ys(12));if(typeof a(void 0,{type:Pv.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ys(13))})}function dY(e){const t=Object.keys(e),a={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(a[o]=e[o])}const s=Object.keys(a);let r;try{d_e(a)}catch(i){r=i}return function(o={},l){if(r)throw r;let c=!1;const d={};for(let u=0;u<s.length;u++){const f=s[u],p=a[f],x=o[f],v=p(x,l);if(typeof v>"u")throw l&&l.type,new Error(ys(14));d[f]=v,c=c||v!==x}return c=c||s.length!==Object.keys(o).length,c?d:o}}function Dv(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,a)=>(...s)=>t(a(...s)))}function u_e(...e){return t=>(a,s)=>{const r=t(a,s);let i=()=>{throw new Error(ys(15))};const o={getState:r.getState,dispatch:(c,...d)=>i(c,...d)},l=e.map(c=>c(o));return i=Dv(...l)(r.dispatch),{...r,dispatch:i}}}function uY(e){return WP(e)&&"type"in e&&typeof e.type=="string"}var mY=Symbol.for("immer-nothing"),KR=Symbol.for("immer-draftable"),Fs=Symbol.for("immer-state");function Di(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Er=Object,Af=Er.getPrototypeOf,Ov="constructor",XN="prototype",bE="configurable",Mv="enumerable",Fb="writable",jp="value",Il=e=>!!e&&!!e[Fs];function Bi(e){return e?fY(e)||ZN(e)||!!e[KR]||!!e[Ov]?.[KR]||JN(e)||ej(e):!1}var m_e=Er[XN][Ov].toString(),XR=new WeakMap;function fY(e){if(!e||!qP(e))return!1;const t=Af(e);if(t===null||t===Er[XN])return!0;const a=Er.hasOwnProperty.call(t,Ov)&&t[Ov];if(a===Object)return!0;if(!Km(a))return!1;let s=XR.get(a);return s===void 0&&(s=Function.toString.call(a),XR.set(a,s)),s===m_e}function Ix(e,t,a=!0){$x(e)===0?(a?Reflect.ownKeys(e):Er.keys(e)).forEach(r=>{t(r,e[r],e)}):e.forEach((s,r)=>t(r,s,e))}function $x(e){const t=e[Fs];return t?t.type_:ZN(e)?1:JN(e)?2:ej(e)?3:0}var ZR=(e,t,a=$x(e))=>a===2?e.has(t):Er[XN].hasOwnProperty.call(e,t),vE=(e,t,a=$x(e))=>a===2?e.get(t):e[t],Iv=(e,t,a,s=$x(e))=>{s===2?e.set(t,a):s===3?e.add(a):e[t]=a};function f_e(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var ZN=Array.isArray,JN=e=>e instanceof Map,ej=e=>e instanceof Set,qP=e=>typeof e=="object",Km=e=>typeof e=="function",K_=e=>typeof e=="boolean";function h_e(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var fl=e=>e.copy_||e.base_,VP=e=>e.modified_?e.copy_:e.base_;function wE(e,t){if(JN(e))return new Map(e);if(ej(e))return new Set(e);if(ZN(e))return Array[XN].slice.call(e);const a=fY(e);if(t===!0||t==="class_only"&&!a){const s=Er.getOwnPropertyDescriptors(e);delete s[Fs];let r=Reflect.ownKeys(s);for(let i=0;i<r.length;i++){const o=r[i],l=s[o];l[Fb]===!1&&(l[Fb]=!0,l[bE]=!0),(l.get||l.set)&&(s[o]={[bE]:!0,[Fb]:!0,[Mv]:l[Mv],[jp]:e[o]})}return Er.create(Af(e),s)}else{const s=Af(e);if(s!==null&&a)return{...e};const r=Er.create(s);return Er.assign(r,e)}}function YP(e,t=!1){return tj(e)||Il(e)||!Bi(e)||($x(e)>1&&Er.defineProperties(e,{set:Ry,add:Ry,clear:Ry,delete:Ry}),Er.freeze(e),t&&Ix(e,(a,s)=>{YP(s,!0)},!1)),e}function g_e(){Di(2)}var Ry={[jp]:g_e};function tj(e){return e===null||!qP(e)?!0:Er.isFrozen(e)}var $v="MapSet",NE="Patches",JR="ArrayMethods",hY={};function Eu(e){const t=hY[e];return t||Di(0,e),t}var ez=e=>!!hY[e],Cp,gY=()=>Cp,p_e=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:ez($v)?Eu($v):void 0,arrayMethodsPlugin_:ez(JR)?Eu(JR):void 0});function tz(e,t){t&&(e.patchPlugin_=Eu(NE),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function jE(e){CE(e),e.drafts_.forEach(x_e),e.drafts_=null}function CE(e){e===Cp&&(Cp=e.parent_)}var nz=e=>Cp=p_e(Cp,e);function x_e(e){const t=e[Fs];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function az(e,t){t.unfinalizedDrafts_=t.drafts_.length;const a=t.drafts_[0];if(e!==void 0&&e!==a){a[Fs].modified_&&(jE(t),Di(4)),Bi(e)&&(e=sz(t,e));const{patchPlugin_:r}=t;r&&r.generateReplacementPatches_(a[Fs].base_,e,t)}else e=sz(t,a);return y_e(t,e,!0),jE(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==mY?e:void 0}function sz(e,t){if(tj(t))return t;const a=t[Fs];if(!a)return QP(t,e.handledSet_,e);if(!nj(a,e))return t;if(!a.modified_)return a.base_;if(!a.finalized_){const{callbacks_:s}=a;if(s)for(;s.length>0;)s.pop()(e);yY(a,e)}return a.copy_}function y_e(e,t,a=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&YP(t,a)}function pY(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var nj=(e,t)=>e.scope_===t,b_e=[];function xY(e,t,a,s){const r=fl(e),i=e.type_;if(s!==void 0&&vE(r,s,i)===t){Iv(r,s,a,i);return}if(!e.draftLocations_){const l=e.draftLocations_=new Map;Ix(r,(c,d)=>{if(Il(d)){const u=l.get(d)||[];u.push(c),l.set(d,u)}})}const o=e.draftLocations_.get(t)??b_e;for(const l of o)Iv(r,l,a,i)}function v_e(e,t,a){e.callbacks_.push(function(r){const i=t;if(!i||!nj(i,r))return;r.mapSetPlugin_?.fixSetContents(i);const o=VP(i);xY(e,i.draft_??i,o,a),yY(i,r)})}function yY(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){const{patchPlugin_:s}=t;if(s){const r=s.getPath(e);r&&s.generatePatches_(e,r,t)}pY(e)}}function w_e(e,t,a){const{scope_:s}=e;if(Il(a)){const r=a[Fs];nj(r,s)&&r.callbacks_.push(function(){Bb(e);const o=VP(r);xY(e,a,o,t)})}else Bi(a)&&e.callbacks_.push(function(){const i=fl(e);vE(i,t,e.type_)===a&&s.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&QP(vE(e.copy_,t,e.type_),s.handledSet_,s)})}function QP(e,t,a){return!a.immer_.autoFreeze_&&a.unfinalizedDrafts_<1||Il(e)||t.has(e)||!Bi(e)||tj(e)||(t.add(e),Ix(e,(s,r)=>{if(Il(r)){const i=r[Fs];if(nj(i,a)){const o=VP(i);Iv(e,s,o,e.type_),pY(i)}}else Bi(r)&&QP(r,t,a)})),e}function N_e(e,t){const a=ZN(e),s={type_:a?1:0,scope_:t?t.scope_:gY(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let r=s,i=KP;a&&(r=[s],i=Sp);const{revoke:o,proxy:l}=Proxy.revocable(r,i);return s.draft_=l,s.revoke_=o,[l,s]}var KP={get(e,t){if(t===Fs)return e;let a=e.scope_.arrayMethodsPlugin_;const s=e.type_===1&&typeof t=="string";if(s&&a?.isArrayOperationMethod(t))return a.createMethodInterceptor(e,t);const r=fl(e);if(!ZR(r,t,e.type_))return j_e(e,r,t);const i=r[t];if(e.finalized_||!Bi(i)||s&&e.operationMethod&&a?.isMutatingArrayMethod(e.operationMethod)&&h_e(t))return i;if(i===X_(e.base_,t)){Bb(e);const o=e.type_===1?+t:t,l=_E(e.scope_,i,e,o);return e.copy_[o]=l}return i},has(e,t){return t in fl(e)},ownKeys(e){return Reflect.ownKeys(fl(e))},set(e,t,a){const s=bY(fl(e),t);if(s?.set)return s.set.call(e.draft_,a),!0;if(!e.modified_){const r=X_(fl(e),t),i=r?.[Fs];if(i&&i.base_===a)return e.copy_[t]=a,e.assigned_.set(t,!1),!0;if(f_e(a,r)&&(a!==void 0||ZR(e.base_,t,e.type_)))return!0;Bb(e),SE(e)}return e.copy_[t]===a&&(a!==void 0||t in e.copy_)||Number.isNaN(a)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=a,e.assigned_.set(t,!0),w_e(e,t,a)),!0},deleteProperty(e,t){return Bb(e),X_(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),SE(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const a=fl(e),s=Reflect.getOwnPropertyDescriptor(a,t);return s&&{[Fb]:!0,[bE]:e.type_!==1||t!=="length",[Mv]:s[Mv],[jp]:a[t]}},defineProperty(){Di(11)},getPrototypeOf(e){return Af(e.base_)},setPrototypeOf(){Di(12)}},Sp={};Ix(KP,(e,t)=>{Sp[e]=function(){const a=arguments;return a[0]=a[0][0],t.apply(this,a)}});Sp.deleteProperty=function(e,t){return Sp.set.call(this,e,t,void 0)};Sp.set=function(e,t,a){return KP.set.call(this,e[0],t,a,e[0])};function X_(e,t){const a=e[Fs];return(a?fl(a):e)[t]}function j_e(e,t,a){const s=bY(t,a);return s?jp in s?s[jp]:s.get?.call(e.draft_):void 0}function bY(e,t){if(!(t in e))return;let a=Af(e);for(;a;){const s=Object.getOwnPropertyDescriptor(a,t);if(s)return s;a=Af(a)}}function SE(e){e.modified_||(e.modified_=!0,e.parent_&&SE(e.parent_))}function Bb(e){e.copy_||(e.assigned_=new Map,e.copy_=wE(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var C_e=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(a,s,r)=>{if(Km(a)&&!Km(s)){const o=s;s=a;const l=this;return function(d=o,...u){return l.produce(d,f=>s.call(this,f,...u))}}Km(s)||Di(6),r!==void 0&&!Km(r)&&Di(7);let i;if(Bi(a)){const o=nz(this),l=_E(o,a,void 0);let c=!0;try{i=s(l),c=!1}finally{c?jE(o):CE(o)}return tz(o,r),az(i,o)}else if(!a||!qP(a)){if(i=s(a),i===void 0&&(i=a),i===mY&&(i=void 0),this.autoFreeze_&&YP(i,!0),r){const o=[],l=[];Eu(NE).generateReplacementPatches_(a,i,{patches_:o,inversePatches_:l}),r(o,l)}return i}else Di(1,a)},this.produceWithPatches=(a,s)=>{if(Km(a))return(l,...c)=>this.produceWithPatches(l,d=>a(d,...c));let r,i;return[this.produce(a,s,(l,c)=>{r=l,i=c}),r,i]},K_(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),K_(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),K_(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Bi(t)||Di(8),Il(t)&&(t=$i(t));const a=nz(this),s=_E(a,t,void 0);return s[Fs].isManual_=!0,CE(a),s}finishDraft(t,a){const s=t&&t[Fs];(!s||!s.isManual_)&&Di(9);const{scope_:r}=s;return tz(r,a),az(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,a){let s;for(s=a.length-1;s>=0;s--){const i=a[s];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}s>-1&&(a=a.slice(s+1));const r=Eu(NE).applyPatches_;return Il(t)?r(t,a):this.produce(t,i=>r(i,a))}};function _E(e,t,a,s){const[r,i]=JN(t)?Eu($v).proxyMap_(t,a):ej(t)?Eu($v).proxySet_(t,a):N_e(t,a);return(a?.scope_??gY()).drafts_.push(r),i.callbacks_=a?.callbacks_??[],i.key_=s,a&&s!==void 0?v_e(a,i,s):i.callbacks_.push(function(c){c.mapSetPlugin_?.fixSetContents(i);const{patchPlugin_:d}=c;i.modified_&&d&&d.generatePatches_(i,[],c)}),r}function $i(e){return Il(e)||Di(10,e),vY(e)}function vY(e){if(!Bi(e)||tj(e))return e;const t=e[Fs];let a,s=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,a=wE(e,t.scope_.immer_.useStrictShallowCopy_),s=t.scope_.immer_.shouldUseStrictIteration()}else a=wE(e,!0);return Ix(a,(r,i)=>{Iv(a,r,vY(i))},s),t&&(t.finalized_=!1),a}var S_e=new C_e,wY=S_e.produce;function NY(e){return({dispatch:a,getState:s})=>r=>i=>typeof i=="function"?i(a,s,e):r(i)}var __e=NY(),A_e=NY,T_e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Dv:Dv.apply(null,arguments)};function mi(e,t){function a(...s){if(t){let r=t(...s);if(!r)throw new Error(Pr(0));return{type:e,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:e,payload:s[0]}}return a.toString=()=>`${e}`,a.type=e,a.match=s=>uY(s)&&s.type===e,a}var jY=class Pg extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Pg.prototype)}static get[Symbol.species](){return Pg}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Pg(...t[0].concat(this)):new Pg(...t.concat(this))}};function rz(e){return Bi(e)?wY(e,()=>{}):e}function zy(e,t,a){return e.has(t)?e.get(t):e.set(t,a(t)).get(t)}function E_e(e){return typeof e=="boolean"}var k_e=()=>function(t){const{thunk:a=!0,immutableCheck:s=!0,serializableCheck:r=!0,actionCreatorCheck:i=!0}=t??{};let o=new jY;return a&&(E_e(a)?o.push(__e):o.push(A_e(a.extraArgument))),o},CY="RTK_autoBatch",ta=()=>e=>({payload:e,meta:{[CY]:!0}}),iz=e=>t=>{setTimeout(t,e)},SY=(e={type:"raf"})=>t=>(...a)=>{const s=t(...a);let r=!0,i=!1,o=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:iz(10):e.type==="callback"?e.queueNotification:iz(e.timeout),d=()=>{o=!1,i&&(i=!1,l.forEach(u=>u()))};return Object.assign({},s,{subscribe(u){const f=()=>r&&u(),p=s.subscribe(f);return l.add(u),()=>{p(),l.delete(u)}},dispatch(u){try{return r=!u?.meta?.[CY],i=!r,i&&(o||(o=!0,c(d))),s.dispatch(u)}finally{r=!0}}})},L_e=e=>function(a){const{autoBatch:s=!0}=a??{};let r=new jY(e);return s&&r.push(SY(typeof s=="object"?s:void 0)),r};function P_e(e){const t=k_e(),{reducer:a=void 0,middleware:s,devTools:r=!0,preloadedState:i=void 0,enhancers:o=void 0}=e||{};let l;if(typeof a=="function")l=a;else if(WP(a))l=dY(a);else throw new Error(Pr(1));let c;typeof s=="function"?c=s(t):c=t();let d=Dv;r&&(d=T_e({trace:!1,...typeof r=="object"&&r}));const u=u_e(...c),f=L_e(u);let p=typeof o=="function"?o(f):f();const x=d(...p);return cY(l,i,x)}function _Y(e){const t={},a=[];let s;const r={addCase(i,o){const l=typeof i=="string"?i:i.type;if(!l)throw new Error(Pr(28));if(l in t)throw new Error(Pr(29));return t[l]=o,r},addAsyncThunk(i,o){return o.pending&&(t[i.pending.type]=o.pending),o.rejected&&(t[i.rejected.type]=o.rejected),o.fulfilled&&(t[i.fulfilled.type]=o.fulfilled),o.settled&&a.push({matcher:i.settled,reducer:o.settled}),r},addMatcher(i,o){return a.push({matcher:i,reducer:o}),r},addDefaultCase(i){return s=i,r}};return e(r),[t,a,s]}function D_e(e){return typeof e=="function"}function O_e(e,t){let[a,s,r]=_Y(t),i;if(D_e(e))i=()=>rz(e());else{const l=rz(e);i=()=>l}function o(l=i(),c){let d=[a[c.type],...s.filter(({matcher:u})=>u(c)).map(({reducer:u})=>u)];return d.filter(u=>!!u).length===0&&(d=[r]),d.reduce((u,f)=>{if(f)if(Il(u)){const x=f(u,c);return x===void 0?u:x}else{if(Bi(u))return wY(u,p=>f(p,c));{const p=f(u,c);if(p===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return p}}return u},l)}return o.getInitialState=i,o}var M_e="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",I_e=(e=21)=>{let t="",a=e;for(;a--;)t+=M_e[Math.random()*64|0];return t},$_e=Symbol.for("rtk-slice-createasyncthunk");function R_e(e,t){return`${e}/${t}`}function z_e({creators:e}={}){const t=e?.asyncThunk?.[$_e];return function(s){const{name:r,reducerPath:i=r}=s;if(!r)throw new Error(Pr(11));const o=(typeof s.reducers=="function"?s.reducers(F_e()):s.reducers)||{},l=Object.keys(o),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(S,E){const k=typeof S=="string"?S:S.type;if(!k)throw new Error(Pr(12));if(k in c.sliceCaseReducersByType)throw new Error(Pr(13));return c.sliceCaseReducersByType[k]=E,d},addMatcher(S,E){return c.sliceMatchers.push({matcher:S,reducer:E}),d},exposeAction(S,E){return c.actionCreators[S]=E,d},exposeCaseReducer(S,E){return c.sliceCaseReducersByName[S]=E,d}};l.forEach(S=>{const E=o[S],k={reducerName:S,type:R_e(r,S),createNotation:typeof s.reducers=="function"};H_e(E)?W_e(k,E,d,t):B_e(k,E,d)});function u(){const[S={},E=[],k=void 0]=typeof s.extraReducers=="function"?_Y(s.extraReducers):[s.extraReducers],A={...S,...c.sliceCaseReducersByType};return O_e(s.initialState,T=>{for(let _ in A)T.addCase(_,A[_]);for(let _ of c.sliceMatchers)T.addMatcher(_.matcher,_.reducer);for(let _ of E)T.addMatcher(_.matcher,_.reducer);k&&T.addDefaultCase(k)})}const f=S=>S,p=new Map,x=new WeakMap;let v;function N(S,E){return v||(v=u()),v(S,E)}function b(){return v||(v=u()),v.getInitialState()}function C(S,E=!1){function k(T){let _=T[S];return typeof _>"u"&&E&&(_=zy(x,k,b)),_}function A(T=f){const _=zy(p,E,()=>new WeakMap);return zy(_,T,()=>{const I={};for(const[R,U]of Object.entries(s.selectors??{}))I[R]=U_e(U,T,()=>zy(x,T,b),E);return I})}return{reducerPath:S,getSelectors:A,get selectors(){return A(k)},selectSlice:k}}const w={name:r,reducer:N,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:b,...C(i),injectInto(S,{reducerPath:E,...k}={}){const A=E??i;return S.inject({reducerPath:A,reducer:N},k),{...w,...C(A,!0)}}};return w}}function U_e(e,t,a,s){function r(i,...o){let l=t(i);return typeof l>"u"&&s&&(l=a()),e(l,...o)}return r.unwrapped=e,r}var fr=z_e();function F_e(){function e(t,a){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...a}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...a){return t(...a)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,a){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:a}},asyncThunk:e}}function B_e({type:e,reducerName:t,createNotation:a},s,r){let i,o;if("reducer"in s){if(a&&!G_e(s))throw new Error(Pr(17));i=s.reducer,o=s.prepare}else i=s;r.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?mi(e,o):mi(e))}function H_e(e){return e._reducerDefinitionType==="asyncThunk"}function G_e(e){return e._reducerDefinitionType==="reducerWithPrepare"}function W_e({type:e,reducerName:t},a,s,r){if(!r)throw new Error(Pr(18));const{payloadCreator:i,fulfilled:o,pending:l,rejected:c,settled:d,options:u}=a,f=r(e,i,u);s.exposeAction(t,f),o&&s.addCase(f.fulfilled,o),l&&s.addCase(f.pending,l),c&&s.addCase(f.rejected,c),d&&s.addMatcher(f.settled,d),s.exposeCaseReducer(t,{fulfilled:o||Uy,pending:l||Uy,rejected:c||Uy,settled:d||Uy})}function Uy(){}var q_e="task",AY="listener",TY="completed",XP="cancelled",V_e=`task-${XP}`,Y_e=`task-${TY}`,AE=`${AY}-${XP}`,Q_e=`${AY}-${TY}`,aj=class{constructor(e){this.code=e,this.message=`${q_e} ${XP} (reason: ${e})`}name="TaskAbortError";message},ZP=(e,t)=>{if(typeof e!="function")throw new TypeError(Pr(32))},Rv=()=>{},EY=(e,t=Rv)=>(e.catch(t),e),kY=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),fu=e=>{if(e.aborted)throw new aj(e.reason)};function LY(e,t){let a=Rv;return new Promise((s,r)=>{const i=()=>r(new aj(e.reason));if(e.aborted){i();return}a=kY(e,i),t.finally(()=>a()).then(s,r)}).finally(()=>{a=Rv})}var K_e=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(a){return{status:a instanceof aj?"cancelled":"rejected",error:a}}finally{t?.()}},zv=e=>t=>EY(LY(e,t).then(a=>(fu(e),a))),PY=e=>{const t=zv(e);return a=>t(new Promise(s=>setTimeout(s,a)))},{assign:df}=Object,oz={},sj="listenerMiddleware",X_e=(e,t)=>{const a=s=>kY(e,()=>s.abort(e.reason));return(s,r)=>{ZP(s);const i=new AbortController;a(i);const o=K_e(async()=>{fu(e),fu(i.signal);const l=await s({pause:zv(i.signal),delay:PY(i.signal),signal:i.signal});return fu(i.signal),l},()=>i.abort(Y_e));return r?.autoJoin&&t.push(o.catch(Rv)),{result:zv(e)(o),cancel(){i.abort(V_e)}}}},Z_e=(e,t)=>{const a=async(s,r)=>{fu(t);let i=()=>{};const l=[new Promise((c,d)=>{let u=e({predicate:s,effect:(f,p)=>{p.unsubscribe(),c([f,p.getState(),p.getOriginalState()])}});i=()=>{u(),d()}})];r!=null&&l.push(new Promise(c=>setTimeout(c,r,null)));try{const c=await LY(t,Promise.race(l));return fu(t),c}finally{i()}};return(s,r)=>EY(a(s,r))},DY=e=>{let{type:t,actionCreator:a,matcher:s,predicate:r,effect:i}=e;if(t)r=mi(t).match;else if(a)t=a.type,r=a.match;else if(s)r=s;else if(!r)throw new Error(Pr(21));return ZP(i),{predicate:r,type:t,effect:i}},OY=df(e=>{const{type:t,predicate:a,effect:s}=DY(e);return{id:I_e(),effect:s,type:t,predicate:a,pending:new Set,unsubscribe:()=>{throw new Error(Pr(22))}}},{withTypes:()=>OY}),lz=(e,t)=>{const{type:a,effect:s,predicate:r}=DY(t);return Array.from(e.values()).find(i=>(typeof a=="string"?i.type===a:i.predicate===r)&&i.effect===s)},TE=e=>{e.pending.forEach(t=>{t.abort(AE)})},J_e=(e,t)=>()=>{for(const a of t.keys())TE(a);e.clear()},cz=(e,t,a)=>{try{e(t,a)}catch(s){setTimeout(()=>{throw s},0)}},MY=df(mi(`${sj}/add`),{withTypes:()=>MY}),e2e=mi(`${sj}/removeAll`),IY=df(mi(`${sj}/remove`),{withTypes:()=>IY}),t2e=(...e)=>{console.error(`${sj}/error`,...e)},Rx=(e={})=>{const t=new Map,a=new Map,s=x=>{const v=a.get(x)??0;a.set(x,v+1)},r=x=>{const v=a.get(x)??1;v===1?a.delete(x):a.set(x,v-1)},{extra:i,onError:o=t2e}=e;ZP(o);const l=x=>(x.unsubscribe=()=>t.delete(x.id),t.set(x.id,x),v=>{x.unsubscribe(),v?.cancelActive&&TE(x)}),c=x=>{const v=lz(t,x)??OY(x);return l(v)};df(c,{withTypes:()=>c});const d=x=>{const v=lz(t,x);return v&&(v.unsubscribe(),x.cancelActive&&TE(v)),!!v};df(d,{withTypes:()=>d});const u=async(x,v,N,b)=>{const C=new AbortController,w=Z_e(c,C.signal),S=[];try{x.pending.add(C),s(x),await Promise.resolve(x.effect(v,df({},N,{getOriginalState:b,condition:(E,k)=>w(E,k).then(Boolean),take:w,delay:PY(C.signal),pause:zv(C.signal),extra:i,signal:C.signal,fork:X_e(C.signal,S),unsubscribe:x.unsubscribe,subscribe:()=>{t.set(x.id,x)},cancelActiveListeners:()=>{x.pending.forEach((E,k,A)=>{E!==C&&(E.abort(AE),A.delete(E))})},cancel:()=>{C.abort(AE),x.pending.delete(C)},throwIfCancelled:()=>{fu(C.signal)}})))}catch(E){E instanceof aj||cz(o,E,{raisedBy:"effect"})}finally{await Promise.all(S),C.abort(Q_e),r(x),x.pending.delete(C)}},f=J_e(t,a);return{middleware:x=>v=>N=>{if(!uY(N))return v(N);if(MY.match(N))return c(N.payload);if(e2e.match(N)){f();return}if(IY.match(N))return d(N.payload);let b=x.getState();const C=()=>{if(b===oz)throw new Error(Pr(23));return b};let w;try{if(w=v(N),t.size>0){const S=x.getState(),E=Array.from(t.values());for(const k of E){let A=!1;try{A=k.predicate(N,S,b)}catch(T){A=!1,cz(o,T,{raisedBy:"predicate"})}A&&u(k,N,x,C)}}}finally{b=oz}return w},startListening:c,stopListening:d,clearListeners:f}};function Pr(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var n2e={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},$Y=fr({name:"chartLayout",initialState:n2e,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var a,s,r,i;e.margin.top=(a=t.payload.top)!==null&&a!==void 0?a:0,e.margin.right=(s=t.payload.right)!==null&&s!==void 0?s:0,e.margin.bottom=(r=t.payload.bottom)!==null&&r!==void 0?r:0,e.margin.left=(i=t.payload.left)!==null&&i!==void 0?i:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:a2e,setLayout:s2e,setChartSize:r2e,setScale:i2e}=$Y.actions,o2e=$Y.reducer;function RY(e,t,a){return Array.isArray(e)&&e&&t+a!==0?e.slice(t,a+1):e}function ca(e){return Number.isFinite(e)}function Do(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function dz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Zm(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?dz(Object(a),!0).forEach(function(s){l2e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):dz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function l2e(e,t,a){return(t=c2e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function c2e(e){var t=d2e(e,"string");return typeof t=="symbol"?t:t+""}function d2e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rn(e,t,a){return ra(e)||ra(t)?a:Po(t)?Tu(e,t,a):typeof t=="function"?t(e):a}var u2e=(e,t,a)=>{if(t&&a){var{width:s,height:r}=a,{align:i,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&i!=="center"&&Dt(e[i]))return Zm(Zm({},e),{},{[i]:e[i]+(s||0)});if((l==="horizontal"||l==="vertical"&&i==="center")&&o!=="middle"&&Dt(e[o]))return Zm(Zm({},e),{},{[o]:e[o]+(r||0)})}return e},yd=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",zY=(e,t,a,s)=>{if(s)return e.map(l=>l.coordinate);var r,i,o=e.map(l=>(l.coordinate===t&&(r=!0),l.coordinate===a&&(i=!0),l.coordinate));return r||o.push(t),i||o.push(a),o},UY=(e,t,a)=>{if(!e)return null;var{duplicateDomain:s,type:r,range:i,scale:o,realScaleType:l,isCategorical:c,categoricalDomain:d,tickCount:u,ticks:f,niceTicks:p,axisType:x}=e;if(!o)return null;var v=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,N=r==="category"&&o.bandwidth?o.bandwidth()/v:0;if(N=x==="angleAxis"&&i&&i.length>=2?cs(i[0]-i[1])*2*N:N,f||p){var b=(f||p||[]).map((C,w)=>{var S=s?s.indexOf(C):C;return{coordinate:o(S)+N,value:C,offset:N,index:w}});return b.filter(C=>!Fi(C.coordinate))}return c&&d?d.map((C,w)=>({coordinate:o(C)+N,value:C,index:w,offset:N})):o.ticks&&u!=null?o.ticks(u).map((C,w)=>({coordinate:o(C)+N,value:C,offset:N,index:w})):o.domain().map((C,w)=>({coordinate:o(C)+N,value:s?s[C]:C,index:w,offset:N}))},uz=1e-4,m2e=e=>{var t=e.domain();if(!(!t||t.length<=2)){var a=t.length,s=e.range(),r=Math.min(s[0],s[1])-uz,i=Math.max(s[0],s[1])+uz,o=e(t[0]),l=e(t[a-1]);(o<r||o>i||l<r||l>i)&&e.domain([t[0],t[a-1]])}},f2e=(e,t)=>{if(!t||t.length!==2||!Dt(t[0])||!Dt(t[1]))return e;var a=Math.min(t[0],t[1]),s=Math.max(t[0],t[1]),r=[e[0],e[1]];return(!Dt(e[0])||e[0]<a)&&(r[0]=a),(!Dt(e[1])||e[1]>s)&&(r[1]=s),r[0]>s&&(r[0]=s),r[1]<a&&(r[1]=a),r},h2e=e=>{var t,a=e.length;if(!(a<=0)){var s=(t=e[0])===null||t===void 0?void 0:t.length;if(!(s==null||s<=0))for(var r=0;r<s;++r)for(var i=0,o=0,l=0;l<a;++l){var c=e[l],d=c?.[r];if(d!=null){var u=d[1],f=d[0],p=Fi(u)?f:u;p>=0?(d[0]=i,d[1]=i+p,i=u):(d[0]=o,d[1]=o+p,o=u)}}}},g2e=e=>{var t,a=e.length;if(!(a<=0)){var s=(t=e[0])===null||t===void 0?void 0:t.length;if(!(s==null||s<=0))for(var r=0;r<s;++r)for(var i=0,o=0;o<a;++o){var l=e[o],c=l?.[r];if(c!=null){var d=Fi(c[1])?c[0]:c[1];d>=0?(c[0]=i,c[1]=i+d,i=c[1]):(c[0]=0,c[1]=0)}}}},p2e={sign:h2e,expand:GW,none:td,silhouette:WW,wiggle:qW,positive:g2e},x2e=(e,t,a)=>{var s,r=(s=p2e[a])!==null&&s!==void 0?s:td,i=eP().keys(t).value((l,c)=>Number(Rn(l,c,0))).order(Cu).offset(r),o=i(e);return o.forEach((l,c)=>{l.forEach((d,u)=>{var f=Rn(e[u],t[c],0);Array.isArray(f)&&f.length===2&&Dt(f[0])&&Dt(f[1])&&(d[0]=f[0],d[1]=f[1])})}),o};function y2e(e){return e==null?void 0:String(e)}function mz(e){var{axis:t,ticks:a,bandSize:s,entry:r,index:i,dataKey:o}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!ra(r[t.dataKey])){var l=qV(a,"value",r[t.dataKey]);if(l)return l.coordinate+s/2}return a[i]?a[i].coordinate+s/2:null}var c=Rn(r,ra(o)?t.dataKey:o);return ra(c)?null:t.scale(c)}var fz=e=>{var{axis:t,ticks:a,offset:s,bandSize:r,entry:i,index:o}=e;if(t.type==="category")return a[o]?a[o].coordinate+s:null;var l=Rn(i,t.dataKey,t.scale.domain()[o]);return ra(l)?null:t.scale(l)-r/2+s},b2e=e=>{var{numericAxis:t}=e,a=t.scale.domain();if(t.type==="number"){var s=Math.min(a[0],a[1]),r=Math.max(a[0],a[1]);return s<=0&&r>=0?0:r<0?r:s}return a[0]},v2e=e=>{var t=e.flat(2).filter(Dt);return[Math.min(...t),Math.max(...t)]},w2e=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],N2e=(e,t,a)=>{if(e!=null)return w2e(Object.keys(e).reduce((s,r)=>{var i=e[r];if(!i)return s;var{stackedData:o}=i,l=o.reduce((c,d)=>{var u=RY(d,t,a),f=v2e(u);return!ca(f[0])||!ca(f[1])?c:[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],s[0]),Math.max(l[1],s[1])]},[1/0,-1/0]))},hz=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,gz=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Tf=(e,t,a)=>{if(e&&e.scale&&e.scale.bandwidth){var s=e.scale.bandwidth();if(!a||s>0)return s}if(e&&t&&t.length>=2){for(var r=KN(t,u=>u.coordinate),i=1/0,o=1,l=r.length;o<l;o++){var c=r[o],d=r[o-1];i=Math.min((c?.coordinate||0)-(d?.coordinate||0),i)}return i===1/0?0:i}return a?void 0:0};function pz(e){var{tooltipEntrySettings:t,dataKey:a,payload:s,value:r,name:i}=e;return Zm(Zm({},t),{},{dataKey:a,payload:s,value:r,name:i})}function Kf(e,t){if(e)return String(e);if(typeof t=="string")return t}var j2e=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},C2e=(e,t)=>t==="centric"?e.angle:e.radius,Yl=e=>e.layout.width,Ql=e=>e.layout.height,S2e=e=>e.layout.scale,FY=e=>e.layout.margin,rj=at(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),ij=at(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),BY="data-recharts-item-index",HY="data-recharts-item-id",zx=60;function xz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Fy(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?xz(Object(a),!0).forEach(function(s){_2e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):xz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function _2e(e,t,a){return(t=A2e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function A2e(e){var t=T2e(e,"string");return typeof t=="symbol"?t:t+""}function T2e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var E2e=e=>e.brush.height;function k2e(e){var t=ij(e);return t.reduce((a,s)=>{if(s.orientation==="left"&&!s.mirror&&!s.hide){var r=typeof s.width=="number"?s.width:zx;return a+r}return a},0)}function L2e(e){var t=ij(e);return t.reduce((a,s)=>{if(s.orientation==="right"&&!s.mirror&&!s.hide){var r=typeof s.width=="number"?s.width:zx;return a+r}return a},0)}function P2e(e){var t=rj(e);return t.reduce((a,s)=>s.orientation==="top"&&!s.mirror&&!s.hide?a+s.height:a,0)}function D2e(e){var t=rj(e);return t.reduce((a,s)=>s.orientation==="bottom"&&!s.mirror&&!s.hide?a+s.height:a,0)}var Ja=at([Yl,Ql,FY,E2e,k2e,L2e,P2e,D2e,oY,s_e],(e,t,a,s,r,i,o,l,c,d)=>{var u={left:(a.left||0)+r,right:(a.right||0)+i},f={top:(a.top||0)+o,bottom:(a.bottom||0)+l},p=Fy(Fy({},f),u),x=p.bottom;p.bottom+=s,p=u2e(p,c,d);var v=e-p.left-p.right,N=t-p.top-p.bottom;return Fy(Fy({brushBottom:x},p),{},{width:Math.max(v,0),height:Math.max(N,0)})}),O2e=at(Ja,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),JP=at(Yl,Ql,(e,t)=>({x:0,y:0,width:e,height:t})),M2e=h.createContext(null),Os=()=>h.useContext(M2e)!=null,oj=e=>e.brush,lj=at([oj,Ja,FY],(e,t,a)=>({height:e.height,x:Dt(e.x)?e.x:t.left,y:Dt(e.y)?e.y:t.top+t.height+t.brushBottom-(a?.bottom||0),width:Dt(e.width)?e.width:t.width})),Z_={},J_={},e2={},yz;function I2e(){return yz||(yz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a,s,{signal:r,edges:i}={}){let o,l=null;const c=i!=null&&i.includes("leading"),d=i==null||i.includes("trailing"),u=()=>{l!==null&&(a.apply(o,l),o=void 0,l=null)},f=()=>{d&&u(),N()};let p=null;const x=()=>{p!=null&&clearTimeout(p),p=setTimeout(()=>{p=null,f()},s)},v=()=>{p!==null&&(clearTimeout(p),p=null)},N=()=>{v(),o=void 0,l=null},b=()=>{u()},C=function(...w){if(r?.aborted)return;o=this,l=w;const S=p==null;x(),c&&S&&u()};return C.schedule=x,C.cancel=N,C.flush=b,r?.addEventListener("abort",N,{once:!0}),C}e.debounce=t})(e2)),e2}var bz;function $2e(){return bz||(bz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=I2e();function a(s,r=0,i={}){typeof i!="object"&&(i={});const{leading:o=!1,trailing:l=!0,maxWait:c}=i,d=Array(2);o&&(d[0]="leading"),l&&(d[1]="trailing");let u,f=null;const p=t.debounce(function(...N){u=s.apply(this,N),f=null},r,{edges:d}),x=function(...N){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(u=s.apply(this,N),f=Date.now(),p.cancel(),p.schedule(),u):(p.apply(this,N),u)},v=()=>(p.flush(),u);return x.cancel=p.cancel,x.flush=v,x}e.debounce=a})(J_)),J_}var vz;function R2e(){return vz||(vz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$2e();function a(s,r=0,i={}){const{leading:o=!0,trailing:l=!0}=i;return t.debounce(s,r,{leading:o,maxWait:r,trailing:l})}e.throttle=a})(Z_)),Z_}var t2,wz;function z2e(){return wz||(wz=1,t2=R2e().throttle),t2}var U2e=z2e();const F2e=Hi(U2e);var Uv=function(t,a){for(var s=arguments.length,r=new Array(s>2?s-2:0),i=2;i<s;i++)r[i-2]=arguments[i];if(typeof console<"u"&&console.warn&&(a===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(a===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;console.warn(a.replace(/%s/g,()=>r[o++]))}},GY=(e,t,a)=>{var{width:s="100%",height:r="100%",aspect:i,maxHeight:o}=a,l=Ml(s)?e:Number(s),c=Ml(r)?t:Number(r);return i&&i>0&&(l?c=l/i:c&&(l=c*i),o&&c!=null&&c>o&&(c=o)),{calculatedWidth:l,calculatedHeight:c}},B2e={width:0,height:0,overflow:"visible"},H2e={width:0,overflowX:"visible"},G2e={height:0,overflowY:"visible"},W2e={},q2e=e=>{var{width:t,height:a}=e,s=Ml(t),r=Ml(a);return s&&r?B2e:s?H2e:r?G2e:W2e};function V2e(e){var{width:t,height:a,aspect:s}=e,r=t,i=a;return r===void 0&&i===void 0?(r="100%",i="100%"):r===void 0?r=s&&s>0?void 0:"100%":i===void 0&&(i=s&&s>0?void 0:"100%"),{width:r,height:i}}function EE(){return EE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},EE.apply(null,arguments)}function Nz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function jz(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Nz(Object(a),!0).forEach(function(s){Y2e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Nz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function Y2e(e,t,a){return(t=Q2e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Q2e(e){var t=K2e(e,"string");return typeof t=="symbol"?t:t+""}function K2e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var WY=h.createContext({width:-1,height:-1});function X2e(e){return Do(e.width)&&Do(e.height)}function qY(e){var{children:t,width:a,height:s}=e,r=h.useMemo(()=>({width:a,height:s}),[a,s]);return X2e(r)?h.createElement(WY.Provider,{value:r},t):null}var e4=()=>h.useContext(WY),Z2e=h.forwardRef((e,t)=>{var{aspect:a,initialDimension:s={width:-1,height:-1},width:r,height:i,minWidth:o=0,minHeight:l,maxHeight:c,children:d,debounce:u=0,id:f,className:p,onResize:x,style:v={}}=e,N=h.useRef(null),b=h.useRef();b.current=x,h.useImperativeHandle(t,()=>N.current);var[C,w]=h.useState({containerWidth:s.width,containerHeight:s.height}),S=h.useCallback((_,I)=>{w(R=>{var U=Math.round(_),D=Math.round(I);return R.containerWidth===U&&R.containerHeight===D?R:{containerWidth:U,containerHeight:D}})},[]);h.useEffect(()=>{if(N.current==null||typeof ResizeObserver>"u")return Ox;var _=D=>{var M,{width:W,height:X}=D[0].contentRect;S(W,X),(M=b.current)===null||M===void 0||M.call(b,W,X)};u>0&&(_=F2e(_,u,{trailing:!0,leading:!1}));var I=new ResizeObserver(_),{width:R,height:U}=N.current.getBoundingClientRect();return S(R,U),I.observe(N.current),()=>{I.disconnect()}},[S,u]);var{containerWidth:E,containerHeight:k}=C;Uv(!a||a>0,"The aspect(%s) must be greater than zero.",a);var{calculatedWidth:A,calculatedHeight:T}=GY(E,k,{width:r,height:i,aspect:a,maxHeight:c});return Uv(A!=null&&A>0||T!=null&&T>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,A,T,r,i,o,l,a),h.createElement("div",{id:f?"".concat(f):void 0,className:kt("recharts-responsive-container",p),style:jz(jz({},v),{},{width:r,height:i,minWidth:o,minHeight:l,maxHeight:c}),ref:N},h.createElement("div",{style:q2e({width:r,height:i})},h.createElement(qY,{width:A,height:T},d)))}),n2=h.forwardRef((e,t)=>{var a=e4();if(Do(a.width)&&Do(a.height))return e.children;var{width:s,height:r}=V2e({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:i,calculatedHeight:o}=GY(void 0,void 0,{width:s,height:r,aspect:e.aspect,maxHeight:e.maxHeight});return Dt(i)&&Dt(o)?h.createElement(qY,{width:i,height:o},e.children):h.createElement(Z2e,EE({},e,{width:s,height:r,ref:t}))});function VY(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var cj=()=>{var e,t=Os(),a=Mt(O2e),s=Mt(lj),r=(e=Mt(oj))===null||e===void 0?void 0:e.padding;return!t||!s||!r?a:{width:s.width-r.left-r.right,height:s.height-r.top-r.bottom,x:r.left,y:r.top}},J2e={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},YY=()=>{var e;return(e=Mt(Ja))!==null&&e!==void 0?e:J2e},t4=()=>Mt(Yl),n4=()=>Mt(Ql),eAe=()=>Mt(e=>e.layout.margin),hn=e=>e.layout.layoutType,Xf=()=>Mt(hn),tAe=()=>{var e=Xf();return e!==void 0},dj=e=>{var t=qn(),a=Os(),{width:s,height:r}=e,i=e4(),o=s,l=r;return i&&(o=i.width>0?i.width:s,l=i.height>0?i.height:r),h.useEffect(()=>{!a&&Do(o)&&Do(l)&&t(r2e({width:o,height:l}))},[t,a,o,l]),null},QY=Symbol.for("immer-nothing"),Cz=Symbol.for("immer-draftable"),Mr=Symbol.for("immer-state");function Oi(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var _p=Object.getPrototypeOf;function Ef(e){return!!e&&!!e[Mr]}function ku(e){return e?KY(e)||Array.isArray(e)||!!e[Cz]||!!e.constructor?.[Cz]||Ux(e)||mj(e):!1}var nAe=Object.prototype.constructor.toString(),Sz=new WeakMap;function KY(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const a=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(a===Object)return!0;if(typeof a!="function")return!1;let s=Sz.get(a);return s===void 0&&(s=Function.toString.call(a),Sz.set(a,s)),s===nAe}function Fv(e,t,a=!0){uj(e)===0?(a?Reflect.ownKeys(e):Object.keys(e)).forEach(r=>{t(r,e[r],e)}):e.forEach((s,r)=>t(r,s,e))}function uj(e){const t=e[Mr];return t?t.type_:Array.isArray(e)?1:Ux(e)?2:mj(e)?3:0}function kE(e,t){return uj(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function XY(e,t,a){const s=uj(e);s===2?e.set(t,a):s===3?e.add(a):e[t]=a}function aAe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Ux(e){return e instanceof Map}function mj(e){return e instanceof Set}function Gd(e){return e.copy_||e.base_}function LE(e,t){if(Ux(e))return new Map(e);if(mj(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const a=KY(e);if(t===!0||t==="class_only"&&!a){const s=Object.getOwnPropertyDescriptors(e);delete s[Mr];let r=Reflect.ownKeys(s);for(let i=0;i<r.length;i++){const o=r[i],l=s[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(s[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(_p(e),s)}else{const s=_p(e);if(s!==null&&a)return{...e};const r=Object.create(s);return Object.assign(r,e)}}function a4(e,t=!1){return fj(e)||Ef(e)||!ku(e)||(uj(e)>1&&Object.defineProperties(e,{set:By,add:By,clear:By,delete:By}),Object.freeze(e),t&&Object.values(e).forEach(a=>a4(a,!0))),e}function sAe(){Oi(2)}var By={value:sAe};function fj(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var rAe={};function Lu(e){const t=rAe[e];return t||Oi(0,e),t}var Ap;function ZY(){return Ap}function iAe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function _z(e,t){t&&(Lu("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function PE(e){DE(e),e.drafts_.forEach(oAe),e.drafts_=null}function DE(e){e===Ap&&(Ap=e.parent_)}function Az(e){return Ap=iAe(Ap,e)}function oAe(e){const t=e[Mr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Tz(e,t){t.unfinalizedDrafts_=t.drafts_.length;const a=t.drafts_[0];return e!==void 0&&e!==a?(a[Mr].modified_&&(PE(t),Oi(4)),ku(e)&&(e=Bv(t,e),t.parent_||Hv(t,e)),t.patches_&&Lu("Patches").generateReplacementPatches_(a[Mr].base_,e,t.patches_,t.inversePatches_)):e=Bv(t,a,[]),PE(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==QY?e:void 0}function Bv(e,t,a){if(fj(t))return t;const s=e.immer_.shouldUseStrictIteration(),r=t[Mr];if(!r)return Fv(t,(i,o)=>Ez(e,r,t,i,o,a),s),t;if(r.scope_!==e)return t;if(!r.modified_)return Hv(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,l=!1;r.type_===3&&(o=new Set(i),i.clear(),l=!0),Fv(o,(c,d)=>Ez(e,r,i,c,d,a,l),s),Hv(e,i,!1),a&&e.patches_&&Lu("Patches").generatePatches_(r,a,e.patches_,e.inversePatches_)}return r.copy_}function Ez(e,t,a,s,r,i,o){if(r==null||typeof r!="object"&&!o)return;const l=fj(r);if(!(l&&!o)){if(Ef(r)){const c=i&&t&&t.type_!==3&&!kE(t.assigned_,s)?i.concat(s):void 0,d=Bv(e,r,c);if(XY(a,s,d),Ef(d))e.canAutoFreeze_=!1;else return}else o&&a.add(r);if(ku(r)&&!l){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[s]===r&&l)return;Bv(e,r),(!t||!t.scope_.parent_)&&typeof s!="symbol"&&(Ux(a)?a.has(s):Object.prototype.propertyIsEnumerable.call(a,s))&&Hv(e,r)}}}function Hv(e,t,a=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&a4(t,a)}function lAe(e,t){const a=Array.isArray(e),s={type_:a?1:0,scope_:t?t.scope_:ZY(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=s,i=s4;a&&(r=[s],i=Tp);const{revoke:o,proxy:l}=Proxy.revocable(r,i);return s.draft_=l,s.revoke_=o,l}var s4={get(e,t){if(t===Mr)return e;const a=Gd(e);if(!kE(a,t))return cAe(e,a,t);const s=a[t];return e.finalized_||!ku(s)?s:s===a2(e.base_,t)?(s2(e),e.copy_[t]=ME(s,e)):s},has(e,t){return t in Gd(e)},ownKeys(e){return Reflect.ownKeys(Gd(e))},set(e,t,a){const s=JY(Gd(e),t);if(s?.set)return s.set.call(e.draft_,a),!0;if(!e.modified_){const r=a2(Gd(e),t),i=r?.[Mr];if(i&&i.base_===a)return e.copy_[t]=a,e.assigned_[t]=!1,!0;if(aAe(a,r)&&(a!==void 0||kE(e.base_,t)))return!0;s2(e),OE(e)}return e.copy_[t]===a&&(a!==void 0||t in e.copy_)||Number.isNaN(a)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=a,e.assigned_[t]=!0),!0},deleteProperty(e,t){return a2(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,s2(e),OE(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const a=Gd(e),s=Reflect.getOwnPropertyDescriptor(a,t);return s&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:s.enumerable,value:a[t]}},defineProperty(){Oi(11)},getPrototypeOf(e){return _p(e.base_)},setPrototypeOf(){Oi(12)}},Tp={};Fv(s4,(e,t)=>{Tp[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Tp.deleteProperty=function(e,t){return Tp.set.call(this,e,t,void 0)};Tp.set=function(e,t,a){return s4.set.call(this,e[0],t,a,e[0])};function a2(e,t){const a=e[Mr];return(a?Gd(a):e)[t]}function cAe(e,t,a){const s=JY(t,a);return s?"value"in s?s.value:s.get?.call(e.draft_):void 0}function JY(e,t){if(!(t in e))return;let a=_p(e);for(;a;){const s=Object.getOwnPropertyDescriptor(a,t);if(s)return s;a=_p(a)}}function OE(e){e.modified_||(e.modified_=!0,e.parent_&&OE(e.parent_))}function s2(e){e.copy_||(e.copy_=LE(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var dAe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,a,s)=>{if(typeof t=="function"&&typeof a!="function"){const i=a;a=t;const o=this;return function(c=i,...d){return o.produce(c,u=>a.call(this,u,...d))}}typeof a!="function"&&Oi(6),s!==void 0&&typeof s!="function"&&Oi(7);let r;if(ku(t)){const i=Az(this),o=ME(t,void 0);let l=!0;try{r=a(o),l=!1}finally{l?PE(i):DE(i)}return _z(i,s),Tz(r,i)}else if(!t||typeof t!="object"){if(r=a(t),r===void 0&&(r=t),r===QY&&(r=void 0),this.autoFreeze_&&a4(r,!0),s){const i=[],o=[];Lu("Patches").generateReplacementPatches_(t,r,i,o),s(i,o)}return r}else Oi(1,t)},this.produceWithPatches=(t,a)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let s,r;return[this.produce(t,a,(o,l)=>{s=o,r=l}),s,r]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){ku(e)||Oi(8),Ef(e)&&(e=uAe(e));const t=Az(this),a=ME(e,void 0);return a[Mr].isManual_=!0,DE(t),a}finishDraft(e,t){const a=e&&e[Mr];(!a||!a.isManual_)&&Oi(9);const{scope_:s}=a;return _z(s,t),Tz(void 0,s)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let a;for(a=t.length-1;a>=0;a--){const r=t[a];if(r.path.length===0&&r.op==="replace"){e=r.value;break}}a>-1&&(t=t.slice(a+1));const s=Lu("Patches").applyPatches_;return Ef(e)?s(e,t):this.produce(e,r=>s(r,t))}};function ME(e,t){const a=Ux(e)?Lu("MapSet").proxyMap_(e,t):mj(e)?Lu("MapSet").proxySet_(e,t):lAe(e,t);return(t?t.scope_:ZY()).drafts_.push(a),a}function uAe(e){return Ef(e)||Oi(10,e),eQ(e)}function eQ(e){if(!ku(e)||fj(e))return e;const t=e[Mr];let a,s=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,a=LE(e,t.scope_.immer_.useStrictShallowCopy_),s=t.scope_.immer_.shouldUseStrictIteration()}else a=LE(e,!0);return Fv(a,(r,i)=>{XY(a,r,eQ(i))},s),t&&(t.finalized_=!1),a}var mAe=new dAe;mAe.produce;var fAe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},tQ=fr({name:"legend",initialState:fAe,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:ta()},replaceLegendPayload:{reducer(e,t){var{prev:a,next:s}=t.payload,r=$i(e).payload.indexOf(a);r>-1&&(e.payload[r]=s)},prepare:ta()},removeLegendPayload:{reducer(e,t){var a=$i(e).payload.indexOf(t.payload);a>-1&&e.payload.splice(a,1)},prepare:ta()}}}),{setLegendSize:kz,setLegendSettings:hAe,addLegendPayload:nQ,replaceLegendPayload:aQ,removeLegendPayload:sQ}=tQ.actions,gAe=tQ.reducer,pAe=["contextPayload"];function IE(){return IE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},IE.apply(null,arguments)}function Lz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function kf(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Lz(Object(a),!0).forEach(function(s){xAe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Lz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function xAe(e,t,a){return(t=yAe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function yAe(e){var t=bAe(e,"string");return typeof t=="symbol"?t:t+""}function bAe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vAe(e,t){if(e==null)return{};var a,s,r=wAe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function wAe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function NAe(e){return e.value}function jAe(e){var{contextPayload:t}=e,a=vAe(e,pAe),s=sY(t,e.payloadUniqBy,NAe),r=kf(kf({},a),{},{payload:s});return h.isValidElement(e.content)?h.cloneElement(e.content,r):typeof e.content=="function"?h.createElement(e.content,r):h.createElement(TSe,r)}function CAe(e,t,a,s,r,i){var{layout:o,align:l,verticalAlign:c}=t,d,u;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(l==="center"&&o==="vertical"?d={left:((s||0)-i.width)/2}:d=l==="right"?{right:a&&a.right||0}:{left:a&&a.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?u={top:((r||0)-i.height)/2}:u=c==="bottom"?{bottom:a&&a.bottom||0}:{top:a&&a.top||0}),kf(kf({},d),u)}function SAe(e){var t=qn();return h.useEffect(()=>{t(hAe(e))},[t,e]),null}function _Ae(e){var t=qn();return h.useEffect(()=>(t(kz(e)),()=>{t(kz({width:0,height:0}))}),[t,e]),null}function AAe(e,t,a,s){return e==="vertical"&&Dt(t)?{height:t}:e==="horizontal"?{width:a||s}:null}var TAe={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function rQ(e){var t=za(e,TAe),a=o_e(),s=ZCe(),r=eAe(),{width:i,height:o,wrapperStyle:l,portal:c}=t,[d,u]=lY([a]),f=t4(),p=n4();if(f==null||p==null)return null;var x=f-(r?.left||0)-(r?.right||0),v=AAe(t.layout,o,i,x),N=c?l:kf(kf({position:"absolute",width:v?.width||i||"auto",height:v?.height||o||"auto"},CAe(l,t,r,f,p,d)),l),b=c??s;if(b==null||a==null)return null;var C=h.createElement("div",{className:"recharts-legend-wrapper",style:N,ref:u},h.createElement(SAe,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!c&&h.createElement(_Ae,{width:d.width,height:d.height}),h.createElement(jAe,IE({},t,v,{margin:r,chartWidth:f,chartHeight:p,contextPayload:a})));return Mi.createPortal(C,b)}rQ.displayName="Legend";function $E(){return $E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},$E.apply(null,arguments)}function Pz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function r2(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Pz(Object(a),!0).forEach(function(s){EAe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Pz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function EAe(e,t,a){return(t=kAe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function kAe(e){var t=LAe(e,"string");return typeof t=="symbol"?t:t+""}function LAe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function PAe(e){return Array.isArray(e)&&Po(e[0])&&Po(e[1])?e.join(" ~ "):e}var DAe=e=>{var{separator:t=" : ",contentStyle:a={},itemStyle:s={},labelStyle:r={},payload:i,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:d,label:u,labelFormatter:f,accessibilityLayer:p=!1}=e,x=()=>{if(i&&i.length){var k={padding:0,margin:0},A=(l?KN(i,l):i).map((T,_)=>{if(T.type==="none")return null;var I=T.formatter||o||PAe,{value:R,name:U}=T,D=R,M=U;if(I){var W=I(R,U,T,_,i);if(Array.isArray(W))[D,M]=W;else if(W!=null)D=W;else return null}var X=r2({display:"block",paddingTop:4,paddingBottom:4,color:T.color||"#000"},s);return h.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(_),style:X},Po(M)?h.createElement("span",{className:"recharts-tooltip-item-name"},M):null,Po(M)?h.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,h.createElement("span",{className:"recharts-tooltip-item-value"},D),h.createElement("span",{className:"recharts-tooltip-item-unit"},T.unit||""))});return h.createElement("ul",{className:"recharts-tooltip-item-list",style:k},A)}return null},v=r2({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),N=r2({margin:0},r),b=!ra(u),C=b?u:"",w=kt("recharts-default-tooltip",c),S=kt("recharts-tooltip-label",d);b&&f&&i!==void 0&&i!==null&&(C=f(u,i));var E=p?{role:"status","aria-live":"assertive"}:{};return h.createElement("div",$E({className:w,style:v},E),h.createElement("p",{className:S,style:N},h.isValidElement(C)?C:"".concat(C)),x())},lg="recharts-tooltip-wrapper",OAe={visibility:"hidden"};function MAe(e){var{coordinate:t,translateX:a,translateY:s}=e;return kt(lg,{["".concat(lg,"-right")]:Dt(a)&&t&&Dt(t.x)&&a>=t.x,["".concat(lg,"-left")]:Dt(a)&&t&&Dt(t.x)&&a<t.x,["".concat(lg,"-bottom")]:Dt(s)&&t&&Dt(t.y)&&s>=t.y,["".concat(lg,"-top")]:Dt(s)&&t&&Dt(t.y)&&s<t.y})}function Dz(e){var{allowEscapeViewBox:t,coordinate:a,key:s,offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:d}=e;if(i&&Dt(i[s]))return i[s];var u=a[s]-l-(r>0?r:0),f=a[s]+r;if(t[s])return o[s]?u:f;var p=c[s];if(p==null)return 0;if(o[s]){var x=u,v=p;return x<v?Math.max(f,p):Math.max(u,p)}if(d==null)return 0;var N=f+l,b=p+d;return N>b?Math.max(u,p):Math.max(f,p)}function IAe(e){var{translateX:t,translateY:a,useTranslate3d:s}=e;return{transform:s?"translate3d(".concat(t,"px, ").concat(a,"px, 0)"):"translate(".concat(t,"px, ").concat(a,"px)")}}function $Ae(e){var{allowEscapeViewBox:t,coordinate:a,offsetTopLeft:s,position:r,reverseDirection:i,tooltipBox:o,useTranslate3d:l,viewBox:c}=e,d,u,f;return o.height>0&&o.width>0&&a?(u=Dz({allowEscapeViewBox:t,coordinate:a,key:"x",offsetTopLeft:s,position:r,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=Dz({allowEscapeViewBox:t,coordinate:a,key:"y",offsetTopLeft:s,position:r,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=IAe({translateX:u,translateY:f,useTranslate3d:l})):d=OAe,{cssProperties:d,cssClasses:MAe({translateX:u,translateY:f,coordinate:a})}}function Oz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Hy(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Oz(Object(a),!0).forEach(function(s){RE(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Oz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function RE(e,t,a){return(t=RAe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function RAe(e){var t=zAe(e,"string");return typeof t=="symbol"?t:t+""}function zAe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class UAe extends h.PureComponent{constructor(){super(...arguments),RE(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),RE(this,"handleKeyDown",t=>{if(t.key==="Escape"){var a,s,r,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.x)!==null&&a!==void 0?a:0,y:(r=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&r!==void 0?r:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,a;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:a,animationDuration:s,animationEasing:r,children:i,coordinate:o,hasPayload:l,isAnimationActive:c,offset:d,position:u,reverseDirection:f,useTranslate3d:p,viewBox:x,wrapperStyle:v,lastBoundingBox:N,innerRef:b,hasPortalFromProps:C}=this.props,{cssClasses:w,cssProperties:S}=$Ae({allowEscapeViewBox:a,coordinate:o,offsetTopLeft:d,position:u,reverseDirection:f,tooltipBox:{height:N.height,width:N.width},useTranslate3d:p,viewBox:x}),E=C?{}:Hy(Hy({transition:c&&t?"transform ".concat(s,"ms ").concat(r):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),k=Hy(Hy({},E),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},v);return h.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:w,style:k,ref:b},i)}}var iQ=()=>{var e;return(e=Mt(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function zE(){return zE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},zE.apply(null,arguments)}function Mz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Iz(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Mz(Object(a),!0).forEach(function(s){FAe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Mz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function FAe(e,t,a){return(t=BAe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function BAe(e){var t=HAe(e,"string");return typeof t=="symbol"?t:t+""}function HAe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $z={curveBasisClosed:Gge,curveBasisOpen:Wge,curveBasis:Hge,curveBumpX:vW,curveBumpY:wW,curveLinearClosed:Yge,curveLinear:wx,curveMonotoneX:YT,curveMonotoneY:RW,curveNatural:UW,curveStep:FW,curveStepAfter:HW,curveStepBefore:BW},Gv=e=>ca(e.x)&&ca(e.y),Rz=e=>e.base!=null&&Gv(e.base)&&Gv(e),cg=e=>e.x,dg=e=>e.y,GAe=(e,t)=>{if(typeof e=="function")return e;var a="curve".concat(Dx(e));return(a==="curveMonotone"||a==="curveBump")&&t?$z["".concat(a).concat(t==="vertical"?"Y":"X")]:$z[a]||wx},WAe=e=>{var{type:t="linear",points:a=[],baseLine:s,layout:r,connectNulls:i=!1}=e,o=GAe(t,r),l=i?a.filter(Gv):a,c;if(Array.isArray(s)){var d=a.map((x,v)=>Iz(Iz({},x),{},{base:s[v]}));r==="vertical"?c=Eg().y(dg).x1(cg).x0(x=>x.base.x):c=Eg().x(cg).y1(dg).y0(x=>x.base.y);var u=c.defined(Rz).curve(o),f=i?d.filter(Rz):d;return u(f)}r==="vertical"&&Dt(s)?c=Eg().y(dg).x1(cg).x0(s):Dt(s)?c=Eg().x(cg).y1(dg).y0(s):c=XL().x(cg).y(dg);var p=c.defined(Gv).curve(o);return p(l)},r4=e=>{var{className:t,points:a,path:s,pathRef:r}=e,i=Xf();if((!a||!a.length)&&!s)return null;var o={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||i,connectNulls:e.connectNulls},l=a&&a.length?WAe(o):s;return h.createElement("path",zE({},Or(e),BP(e),{className:kt("recharts-curve",t),d:l===null?void 0:l,ref:r}))},qAe=["x","y","top","left","width","height","className"];function UE(){return UE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},UE.apply(null,arguments)}function zz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function VAe(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?zz(Object(a),!0).forEach(function(s){YAe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):zz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function YAe(e,t,a){return(t=QAe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function QAe(e){var t=KAe(e,"string");return typeof t=="symbol"?t:t+""}function KAe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XAe(e,t){if(e==null)return{};var a,s,r=ZAe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function ZAe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var JAe=(e,t,a,s,r,i)=>"M".concat(e,",").concat(r,"v").concat(s,"M").concat(i,",").concat(t,"h").concat(a),eTe=e=>{var{x:t=0,y:a=0,top:s=0,left:r=0,width:i=0,height:o=0,className:l}=e,c=XAe(e,qAe),d=VAe({x:t,y:a,top:s,left:r,width:i,height:o},c);return!Dt(t)||!Dt(a)||!Dt(i)||!Dt(o)||!Dt(s)||!Dt(r)?null:h.createElement("path",UE({},Us(d),{className:kt("recharts-cross",l),d:JAe(t,a,i,o,s,r)}))};function tTe(e,t,a,s){var r=s/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-r:a.left+.5,y:e==="horizontal"?a.top+.5:t.y-r,width:e==="horizontal"?s:a.width-1,height:e==="horizontal"?a.height-1:s}}function Uz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Fz(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Uz(Object(a),!0).forEach(function(s){nTe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Uz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function nTe(e,t,a){return(t=aTe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function aTe(e){var t=sTe(e,"string");return typeof t=="symbol"?t:t+""}function sTe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rTe=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),oQ=(e,t,a)=>e.map(s=>"".concat(rTe(s)," ").concat(t,"ms ").concat(a)).join(","),iTe=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((a,s)=>a.filter(r=>s.includes(r))),Ep=(e,t)=>Object.keys(t).reduce((a,s)=>Fz(Fz({},a),{},{[s]:e(s,t[s])}),{});function Bz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Ba(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Bz(Object(a),!0).forEach(function(s){oTe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Bz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function oTe(e,t,a){return(t=lTe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function lTe(e){var t=cTe(e,"string");return typeof t=="symbol"?t:t+""}function cTe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wv=(e,t,a)=>e+(t-e)*a,FE=e=>{var{from:t,to:a}=e;return t!==a},lQ=(e,t,a)=>{var s=Ep((r,i)=>{if(FE(i)){var[o,l]=e(i.from,i.to,i.velocity);return Ba(Ba({},i),{},{from:o,velocity:l})}return i},t);return a<1?Ep((r,i)=>FE(i)&&s[r]!=null?Ba(Ba({},i),{},{velocity:Wv(i.velocity,s[r].velocity,a),from:Wv(i.from,s[r].from,a)}):i,t):lQ(e,s,a-1)};function dTe(e,t,a,s,r,i){var o,l=s.reduce((p,x)=>Ba(Ba({},p),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),c=()=>Ep((p,x)=>x.from,l),d=()=>!Object.values(l).filter(FE).length,u=null,f=p=>{o||(o=p);var x=p-o,v=x/a.dt;l=lQ(a,l,v),r(Ba(Ba(Ba({},e),t),c())),o=p,d()||(u=i.setTimeout(f))};return()=>(u=i.setTimeout(f),()=>{var p;(p=u)===null||p===void 0||p()})}function uTe(e,t,a,s,r,i,o){var l=null,c=r.reduce((f,p)=>{var x=e[p],v=t[p];return x==null||v==null?f:Ba(Ba({},f),{},{[p]:[x,v]})},{}),d,u=f=>{d||(d=f);var p=(f-d)/s,x=Ep((N,b)=>Wv(...b,a(p)),c);if(i(Ba(Ba(Ba({},e),t),x)),p<1)l=o.setTimeout(u);else{var v=Ep((N,b)=>Wv(...b,a(1)),c);i(Ba(Ba(Ba({},e),t),v))}};return()=>(l=o.setTimeout(u),()=>{var f;(f=l)===null||f===void 0||f()})}const mTe=(e,t,a,s,r,i)=>{var o=iTe(e,t);return a==null?()=>(r(Ba(Ba({},e),t)),()=>{}):a.isStepper===!0?dTe(e,t,a,o,r,i):uTe(e,t,a,s,o,r,i)};var qv=1e-4,cQ=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],dQ=(e,t)=>e.map((a,s)=>a*t**s).reduce((a,s)=>a+s),Hz=(e,t)=>a=>{var s=cQ(e,t);return dQ(s,a)},fTe=(e,t)=>a=>{var s=cQ(e,t),r=[...s.map((i,o)=>i*o).slice(1),0];return dQ(r,a)},hTe=e=>{var t,a=e.split("(");if(a.length!==2||a[0]!=="cubic-bezier")return null;var s=(t=a[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(s==null||s.length!==4)return null;var r=s.map(i=>parseFloat(i));return[r[0],r[1],r[2],r[3]]},gTe=function(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];if(a.length===1)switch(a[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var r=hTe(a[0]);if(r)return r}}return a.length===4?a:[0,0,1,1]},pTe=(e,t,a,s)=>{var r=Hz(e,a),i=Hz(t,s),o=fTe(e,a),l=d=>d>1?1:d<0?0:d,c=d=>{for(var u=d>1?1:d,f=u,p=0;p<8;++p){var x=r(f)-u,v=o(f);if(Math.abs(x-u)<qv||v<qv)return i(f);f=l(f-x/v)}return i(f)};return c.isStepper=!1,c},Gz=function(){return pTe(...gTe(...arguments))},xTe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:a=100,damping:s=8,dt:r=17}=t,i=(o,l,c)=>{var d=-(o-l)*a,u=c*s,f=c+(d-u)*r/1e3,p=c*r/1e3+o;return Math.abs(p-l)<qv&&Math.abs(f)<qv?[l,0]:[p,f]};return i.isStepper=!0,i.dt=r,i},yTe=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Gz(e);case"spring":return xTe();default:if(e.split("(")[0]==="cubic-bezier")return Gz(e)}return typeof e=="function"?e:null};function bTe(e){var t,a=()=>null,s=!1,r=null,i=o=>{if(!s){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...d]=l;if(typeof c=="number"){r=e.setTimeout(i.bind(null,d),c);return}i(c),r=e.setTimeout(i.bind(null,d));return}typeof o=="string"&&(t=o,a(t)),typeof o=="object"&&(t=o,a(t)),typeof o=="function"&&o()}};return{stop:()=>{s=!0},start:o=>{s=!1,r&&(r(),r=null),i(o)},subscribe:o=>(a=o,()=>{a=()=>null}),getTimeoutController:()=>e}}class vTe{setTimeout(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=performance.now(),r=null,i=o=>{o-s>=a?t(o):typeof requestAnimationFrame=="function"&&(r=requestAnimationFrame(i))};return r=requestAnimationFrame(i),()=>{r!=null&&cancelAnimationFrame(r)}}}function wTe(){return bTe(new vTe)}var NTe=h.createContext(wTe);function jTe(e,t){var a=h.useContext(NTe);return h.useMemo(()=>t??a(e),[e,t,a])}var CTe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),hj={isSsr:CTe()},STe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},Wz={t:0},i2={t:1};function Fx(e){var t=za(e,STe),{isActive:a,canBegin:s,duration:r,easing:i,begin:o,onAnimationEnd:l,onAnimationStart:c,children:d}=t,u=a==="auto"?!hj.isSsr:a,f=jTe(t.animationId,t.animationManager),[p,x]=h.useState(u?Wz:i2),v=h.useRef(null);return h.useEffect(()=>{u||x(i2)},[u]),h.useEffect(()=>{if(!u||!s)return Ox;var N=mTe(Wz,i2,yTe(i),r,x,f.getTimeoutController()),b=()=>{v.current=N()};return f.start([c,o,b,r,l]),()=>{f.stop(),v.current&&v.current(),l()}},[u,s,r,i,o,c,l,f]),d(p.t)}function Bx(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",a=h.useRef(Np(t)),s=h.useRef(e);return s.current!==e&&(a.current=Np(t),s.current=e),a.current}var _Te=["radius"],ATe=["radius"],qz,Vz,Yz,Qz,Kz,Xz,Zz,Jz,eU,tU;function nU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function aU(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?nU(Object(a),!0).forEach(function(s){TTe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):nU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function TTe(e,t,a){return(t=ETe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ETe(e){var t=kTe(e,"string");return typeof t=="symbol"?t:t+""}function kTe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vv(){return Vv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Vv.apply(null,arguments)}function sU(e,t){if(e==null)return{};var a,s,r=LTe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function LTe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function Ji(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var rU=(e,t,a,s,r)=>{var i=Hc(a),o=Hc(s),l=Math.min(Math.abs(i)/2,Math.abs(o)/2),c=o>=0?1:-1,d=i>=0?1:-1,u=o>=0&&i>=0||o<0&&i<0?1:0,f;if(l>0&&r instanceof Array){for(var p=[0,0,0,0],x=0,v=4;x<v;x++)p[x]=r[x]>l?l:r[x];f=pa(qz||(qz=Ji(["M",",",""])),e,t+c*p[0]),p[0]>0&&(f+=pa(Vz||(Vz=Ji(["A ",",",",0,0,",",",",",""])),p[0],p[0],u,e+d*p[0],t)),f+=pa(Yz||(Yz=Ji(["L ",",",""])),e+a-d*p[1],t),p[1]>0&&(f+=pa(Qz||(Qz=Ji(["A ",",",",0,0,",`,
        `,",",""])),p[1],p[1],u,e+a,t+c*p[1])),f+=pa(Kz||(Kz=Ji(["L ",",",""])),e+a,t+s-c*p[2]),p[2]>0&&(f+=pa(Xz||(Xz=Ji(["A ",",",",0,0,",`,
        `,",",""])),p[2],p[2],u,e+a-d*p[2],t+s)),f+=pa(Zz||(Zz=Ji(["L ",",",""])),e+d*p[3],t+s),p[3]>0&&(f+=pa(Jz||(Jz=Ji(["A ",",",",0,0,",`,
        `,",",""])),p[3],p[3],u,e,t+s-c*p[3])),f+="Z"}else if(l>0&&r===+r&&r>0){var N=Math.min(l,r);f=pa(eU||(eU=Ji(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+c*N,N,N,u,e+d*N,t,e+a-d*N,t,N,N,u,e+a,t+c*N,e+a,t+s-c*N,N,N,u,e+a-d*N,t+s,e+d*N,t+s,N,N,u,e,t+s-c*N)}else f=pa(tU||(tU=Ji(["M ",","," h "," v "," h "," Z"])),e,t,a,s,-a);return f},iU={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},uQ=e=>{var t=za(e,iU),a=h.useRef(null),[s,r]=h.useState(-1);h.useEffect(()=>{if(a.current&&a.current.getTotalLength)try{var Q=a.current.getTotalLength();Q&&r(Q)}catch{}},[]);var{x:i,y:o,width:l,height:c,radius:d,className:u}=t,{animationEasing:f,animationDuration:p,animationBegin:x,isAnimationActive:v,isUpdateAnimationActive:N}=t,b=h.useRef(l),C=h.useRef(c),w=h.useRef(i),S=h.useRef(o),E=h.useMemo(()=>({x:i,y:o,width:l,height:c,radius:d}),[i,o,l,c,d]),k=Bx(E,"rectangle-");if(i!==+i||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var A=kt("recharts-rectangle",u);if(!N){var T=Us(t),{radius:_}=T,I=sU(T,_Te);return h.createElement("path",Vv({},I,{x:Hc(i),y:Hc(o),width:Hc(l),height:Hc(c),radius:typeof d=="number"?d:void 0,className:A,d:rU(i,o,l,c,d)}))}var R=b.current,U=C.current,D=w.current,M=S.current,W="0px ".concat(s===-1?1:s,"px"),X="".concat(s,"px 0px"),z=oQ(["strokeDasharray"],p,typeof f=="string"?f:iU.animationEasing);return h.createElement(Fx,{animationId:k,key:k,canBegin:s>0,duration:p,easing:f,isActive:N,begin:x},Q=>{var de=na(R,l,Q),Y=na(U,c,Q),se=na(D,i,Q),J=na(M,o,Q);a.current&&(b.current=de,C.current=Y,w.current=se,S.current=J);var F;v?Q>0?F={transition:z,strokeDasharray:X}:F={strokeDasharray:W}:F={strokeDasharray:X};var Ne=Us(t),{radius:re}=Ne,he=sU(Ne,ATe);return h.createElement("path",Vv({},he,{radius:typeof d=="number"?d:void 0,className:A,d:rU(se,J,de,Y,d),ref:a,style:aU(aU({},F),t.style)}))})};function oU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function lU(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?oU(Object(a),!0).forEach(function(s){PTe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):oU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function PTe(e,t,a){return(t=DTe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function DTe(e){var t=OTe(e,"string");return typeof t=="symbol"?t:t+""}function OTe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Yv=Math.PI/180,MTe=e=>e*180/Math.PI,Oa=(e,t,a,s)=>({x:e+Math.cos(-Yv*s)*a,y:t+Math.sin(-Yv*s)*a}),mQ=function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(s.left||0)-(s.right||0)),Math.abs(a-(s.top||0)-(s.bottom||0)))/2},ITe=(e,t)=>{var{x:a,y:s}=e,{x:r,y:i}=t;return Math.sqrt((a-r)**2+(s-i)**2)},$Te=(e,t)=>{var{x:a,y:s}=e,{cx:r,cy:i}=t,o=ITe({x:a,y:s},{x:r,y:i});if(o<=0)return{radius:o,angle:0};var l=(a-r)/o,c=Math.acos(l);return s>i&&(c=2*Math.PI-c),{radius:o,angle:MTe(c),angleInRadian:c}},RTe=e=>{var{startAngle:t,endAngle:a}=e,s=Math.floor(t/360),r=Math.floor(a/360),i=Math.min(s,r);return{startAngle:t-i*360,endAngle:a-i*360}},zTe=(e,t)=>{var{startAngle:a,endAngle:s}=t,r=Math.floor(a/360),i=Math.floor(s/360),o=Math.min(r,i);return e+o*360},UTe=(e,t)=>{var{chartX:a,chartY:s}=e,{radius:r,angle:i}=$Te({x:a,y:s},t),{innerRadius:o,outerRadius:l}=t;if(r<o||r>l||r===0)return null;var{startAngle:c,endAngle:d}=RTe(t),u=i,f;if(c<=d){for(;u>d;)u-=360;for(;u<c;)u+=360;f=u>=c&&u<=d}else{for(;u>c;)u-=360;for(;u<d;)u+=360;f=u>=d&&u<=c}return f?lU(lU({},t),{},{radius:r,angle:zTe(u,t)}):null};function fQ(e){var{cx:t,cy:a,radius:s,startAngle:r,endAngle:i}=e,o=Oa(t,a,s,r),l=Oa(t,a,s,i);return{points:[o,l],cx:t,cy:a,radius:s,startAngle:r,endAngle:i}}var cU,dU,uU,mU,fU,hU,gU;function BE(){return BE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},BE.apply(null,arguments)}function au(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var FTe=(e,t)=>{var a=cs(t-e),s=Math.min(Math.abs(t-e),359.999);return a*s},Gy=e=>{var{cx:t,cy:a,radius:s,angle:r,sign:i,isExternal:o,cornerRadius:l,cornerIsExternal:c}=e,d=l*(o?1:-1)+s,u=Math.asin(l/d)/Yv,f=c?r:r+i*u,p=Oa(t,a,d,f),x=Oa(t,a,s,f),v=c?r-i*u:r,N=Oa(t,a,d*Math.cos(u*Yv),v);return{center:p,circleTangency:x,lineTangency:N,theta:u}},hQ=e=>{var{cx:t,cy:a,innerRadius:s,outerRadius:r,startAngle:i,endAngle:o}=e,l=FTe(i,o),c=i+l,d=Oa(t,a,r,i),u=Oa(t,a,r,c),f=pa(cU||(cU=au(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),d.x,d.y,r,r,+(Math.abs(l)>180),+(i>c),u.x,u.y);if(s>0){var p=Oa(t,a,s,i),x=Oa(t,a,s,c);f+=pa(dU||(dU=au(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),x.x,x.y,s,s,+(Math.abs(l)>180),+(i<=c),p.x,p.y)}else f+=pa(uU||(uU=au(["L ",","," Z"])),t,a);return f},BTe=e=>{var{cx:t,cy:a,innerRadius:s,outerRadius:r,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:d}=e,u=cs(d-c),{circleTangency:f,lineTangency:p,theta:x}=Gy({cx:t,cy:a,radius:r,angle:c,sign:u,cornerRadius:i,cornerIsExternal:l}),{circleTangency:v,lineTangency:N,theta:b}=Gy({cx:t,cy:a,radius:r,angle:d,sign:-u,cornerRadius:i,cornerIsExternal:l}),C=l?Math.abs(c-d):Math.abs(c-d)-x-b;if(C<0)return o?pa(mU||(mU=au(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),p.x,p.y,i,i,i*2,i,i,-i*2):hQ({cx:t,cy:a,innerRadius:s,outerRadius:r,startAngle:c,endAngle:d});var w=pa(fU||(fU=au(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),p.x,p.y,i,i,+(u<0),f.x,f.y,r,r,+(C>180),+(u<0),v.x,v.y,i,i,+(u<0),N.x,N.y);if(s>0){var{circleTangency:S,lineTangency:E,theta:k}=Gy({cx:t,cy:a,radius:s,angle:c,sign:u,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),{circleTangency:A,lineTangency:T,theta:_}=Gy({cx:t,cy:a,radius:s,angle:d,sign:-u,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),I=l?Math.abs(c-d):Math.abs(c-d)-k-_;if(I<0&&i===0)return"".concat(w,"L").concat(t,",").concat(a,"Z");w+=pa(hU||(hU=au(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),T.x,T.y,i,i,+(u<0),A.x,A.y,s,s,+(I>180),+(u>0),S.x,S.y,i,i,+(u<0),E.x,E.y)}else w+=pa(gU||(gU=au(["L",",","Z"])),t,a);return w},HTe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},gQ=e=>{var t=za(e,HTe),{cx:a,cy:s,innerRadius:r,outerRadius:i,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u,className:f}=t;if(i<r||d===u)return null;var p=kt("recharts-sector",f),x=i-r,v=ks(o,x,0,!0),N;return v>0&&Math.abs(d-u)<360?N=BTe({cx:a,cy:s,innerRadius:r,outerRadius:i,cornerRadius:Math.min(v,x/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u}):N=hQ({cx:a,cy:s,innerRadius:r,outerRadius:i,startAngle:d,endAngle:u}),h.createElement("path",BE({},Us(t),{className:p,d:N}))};function GTe(e,t,a){if(e==="horizontal")return[{x:t.x,y:a.top},{x:t.x,y:a.top+a.height}];if(e==="vertical")return[{x:a.left,y:t.y},{x:a.left+a.width,y:t.y}];if(YV(t)){if(e==="centric"){var{cx:s,cy:r,innerRadius:i,outerRadius:o,angle:l}=t,c=Oa(s,r,i,l),d=Oa(s,r,o,l);return[{x:c.x,y:c.y},{x:d.x,y:d.y}]}return fQ(t)}}var o2={},l2={},c2={},pU;function WTe(){return pU||(pU=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rY();function a(s){return t.isSymbol(s)?NaN:Number(s)}e.toNumber=a})(c2)),c2}var xU;function qTe(){return xU||(xU=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=WTe();function a(s){return s?(s=t.toNumber(s),s===1/0||s===-1/0?(s<0?-1:1)*Number.MAX_VALUE:s===s?s:0):s===0?s:0}e.toFinite=a})(l2)),l2}var yU;function VTe(){return yU||(yU=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iY(),a=qTe();function s(r,i,o){o&&typeof o!="number"&&t.isIterateeCall(r,i,o)&&(i=o=void 0),r=a.toFinite(r),i===void 0?(i=r,r=0):i=a.toFinite(i),o=o===void 0?r<i?1:-1:a.toFinite(o);const l=Math.max(Math.ceil((i-r)/(o||1)),0),c=new Array(l);for(let d=0;d<l;d++)c[d]=r,r+=o;return c}e.range=s})(o2)),o2}var d2,bU;function YTe(){return bU||(bU=1,d2=VTe().range),d2}var QTe=YTe();const pQ=Hi(QTe),Dg=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:yL,scaleDiverging:wG,scaleDivergingLog:NG,scaleDivergingPow:HL,scaleDivergingSqrt:vhe,scaleDivergingSymlog:jG,scaleIdentity:aG,scaleImplicit:$T,scaleLinear:cN,scaleLog:fp,scaleOrdinal:lp,scalePoint:mme,scalePow:dN,scaleQuantile:oG,scaleQuantize:lG,scaleRadial:iG,scaleSequential:FL,scaleSequentialLog:yG,scaleSequentialPow:BL,scaleSequentialQuantile:vG,scaleSequentialSqrt:bhe,scaleSequentialSymlog:bG,scaleSqrt:rG,scaleSymlog:EL,scaleThreshold:LL,scaleTime:UL,scaleUtc:xG,tickFormat:nG},Symbol.toStringTag,{value:"Module"}));var Kl=e=>e.chartData,gj=at([Kl],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),i4=(e,t,a,s)=>s?gj(e):Kl(e),KTe=(e,t,a)=>a?gj(e):Kl(e);function nd(e){if(Array.isArray(e)&&e.length===2){var[t,a]=e;if(ca(t)&&ca(a))return!0}return!1}function vU(e,t,a){return a?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function xQ(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[a,s]=e,r,i;if(ca(a))r=a;else if(typeof a=="function")return;if(ca(s))i=s;else if(typeof s=="function")return;var o=[r,i];if(nd(o))return o}}function XTe(e,t,a){if(!(!a&&t==null)){if(typeof e=="function"&&t!=null)try{var s=e(t,a);if(nd(s))return vU(s,t,a)}catch{}if(Array.isArray(e)&&e.length===2){var[r,i]=e,o,l;if(r==="auto")t!=null&&(o=Math.min(...t));else if(Dt(r))o=r;else if(typeof r=="function")try{t!=null&&(o=r(t?.[0]))}catch{}else if(typeof r=="string"&&hz.test(r)){var c=hz.exec(r);if(c==null||c[1]==null||t==null)o=void 0;else{var d=+c[1];o=t[0]-d}}else o=t?.[0];if(i==="auto")t!=null&&(l=Math.max(...t));else if(Dt(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t?.[1]))}catch{}else if(typeof i=="string"&&gz.test(i)){var u=gz.exec(i);if(u==null||u[1]==null||t==null)l=void 0;else{var f=+u[1];l=t[1]+f}}else l=t?.[1];var p=[o,l];if(nd(p))return t==null?p:vU(p,t,a)}}}var Zf=1e9,ZTe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},l4,aa=!0,fi="[DecimalError] ",hu=fi+"Invalid argument: ",o4=fi+"Exponent out of range: ",Jf=Math.floor,Wd=Math.pow,JTe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Tr,is=1e7,Kn=7,yQ=9007199254740991,Qv=Jf(yQ/Kn),Lt={};Lt.absoluteValue=Lt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Lt.comparedTo=Lt.cmp=function(e){var t,a,s,r,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(s=i.d.length,r=e.d.length,t=0,a=s<r?s:r;t<a;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return s===r?0:s>r^i.s<0?1:-1};Lt.decimalPlaces=Lt.dp=function(){var e=this,t=e.d.length-1,a=(t-e.e)*Kn;if(t=e.d[t],t)for(;t%10==0;t/=10)a--;return a<0?0:a};Lt.dividedBy=Lt.div=function(e){return Nl(this,new this.constructor(e))};Lt.dividedToIntegerBy=Lt.idiv=function(e){var t=this,a=t.constructor;return Fn(Nl(t,new a(e),0,1),a.precision)};Lt.equals=Lt.eq=function(e){return!this.cmp(e)};Lt.exponent=function(){return Ia(this)};Lt.greaterThan=Lt.gt=function(e){return this.cmp(e)>0};Lt.greaterThanOrEqualTo=Lt.gte=function(e){return this.cmp(e)>=0};Lt.isInteger=Lt.isint=function(){return this.e>this.d.length-2};Lt.isNegative=Lt.isneg=function(){return this.s<0};Lt.isPositive=Lt.ispos=function(){return this.s>0};Lt.isZero=function(){return this.s===0};Lt.lessThan=Lt.lt=function(e){return this.cmp(e)<0};Lt.lessThanOrEqualTo=Lt.lte=function(e){return this.cmp(e)<1};Lt.logarithm=Lt.log=function(e){var t,a=this,s=a.constructor,r=s.precision,i=r+5;if(e===void 0)e=new s(10);else if(e=new s(e),e.s<1||e.eq(Tr))throw Error(fi+"NaN");if(a.s<1)throw Error(fi+(a.s?"NaN":"-Infinity"));return a.eq(Tr)?new s(0):(aa=!1,t=Nl(kp(a,i),kp(e,i),i),aa=!0,Fn(t,r))};Lt.minus=Lt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?wQ(t,e):bQ(t,(e.s=-e.s,e))};Lt.modulo=Lt.mod=function(e){var t,a=this,s=a.constructor,r=s.precision;if(e=new s(e),!e.s)throw Error(fi+"NaN");return a.s?(aa=!1,t=Nl(a,e,0,1).times(e),aa=!0,a.minus(t)):Fn(new s(a),r)};Lt.naturalExponential=Lt.exp=function(){return vQ(this)};Lt.naturalLogarithm=Lt.ln=function(){return kp(this)};Lt.negated=Lt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Lt.plus=Lt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?bQ(t,e):wQ(t,(e.s=-e.s,e))};Lt.precision=Lt.sd=function(e){var t,a,s,r=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(hu+e);if(t=Ia(r)+1,s=r.d.length-1,a=s*Kn+1,s=r.d[s],s){for(;s%10==0;s/=10)a--;for(s=r.d[0];s>=10;s/=10)a++}return e&&t>a?t:a};Lt.squareRoot=Lt.sqrt=function(){var e,t,a,s,r,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(fi+"NaN")}for(e=Ia(l),aa=!1,r=Math.sqrt(+l),r==0||r==1/0?(t=vo(l.d),(t.length+e)%2==0&&(t+="0"),r=Math.sqrt(t),e=Jf((e+1)/2)-(e<0||e%2),r==1/0?t="5e"+e:(t=r.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),s=new c(t)):s=new c(r.toString()),a=c.precision,r=o=a+3;;)if(i=s,s=i.plus(Nl(l,i,o+2)).times(.5),vo(i.d).slice(0,o)===(t=vo(s.d)).slice(0,o)){if(t=t.slice(o-3,o+1),r==o&&t=="4999"){if(Fn(i,a+1,0),i.times(i).eq(l)){s=i;break}}else if(t!="9999")break;o+=4}return aa=!0,Fn(s,a)};Lt.times=Lt.mul=function(e){var t,a,s,r,i,o,l,c,d,u=this,f=u.constructor,p=u.d,x=(e=new f(e)).d;if(!u.s||!e.s)return new f(0);for(e.s*=u.s,a=u.e+e.e,c=p.length,d=x.length,c<d&&(i=p,p=x,x=i,o=c,c=d,d=o),i=[],o=c+d,s=o;s--;)i.push(0);for(s=d;--s>=0;){for(t=0,r=c+s;r>s;)l=i[r]+x[s]*p[r-s-1]+t,i[r--]=l%is|0,t=l/is|0;i[r]=(i[r]+t)%is|0}for(;!i[--o];)i.pop();return t?++a:i.shift(),e.d=i,e.e=a,aa?Fn(e,f.precision):e};Lt.toDecimalPlaces=Lt.todp=function(e,t){var a=this,s=a.constructor;return a=new s(a),e===void 0?a:(Oo(e,0,Zf),t===void 0?t=s.rounding:Oo(t,0,8),Fn(a,e+Ia(a)+1,t))};Lt.toExponential=function(e,t){var a,s=this,r=s.constructor;return e===void 0?a=Pu(s,!0):(Oo(e,0,Zf),t===void 0?t=r.rounding:Oo(t,0,8),s=Fn(new r(s),e+1,t),a=Pu(s,!0,e+1)),a};Lt.toFixed=function(e,t){var a,s,r=this,i=r.constructor;return e===void 0?Pu(r):(Oo(e,0,Zf),t===void 0?t=i.rounding:Oo(t,0,8),s=Fn(new i(r),e+Ia(r)+1,t),a=Pu(s.abs(),!1,e+Ia(s)+1),r.isneg()&&!r.isZero()?"-"+a:a)};Lt.toInteger=Lt.toint=function(){var e=this,t=e.constructor;return Fn(new t(e),Ia(e)+1,t.rounding)};Lt.toNumber=function(){return+this};Lt.toPower=Lt.pow=function(e){var t,a,s,r,i,o,l=this,c=l.constructor,d=12,u=+(e=new c(e));if(!e.s)return new c(Tr);if(l=new c(l),!l.s){if(e.s<1)throw Error(fi+"Infinity");return l}if(l.eq(Tr))return l;if(s=c.precision,e.eq(Tr))return Fn(l,s);if(t=e.e,a=e.d.length-1,o=t>=a,i=l.s,o){if((a=u<0?-u:u)<=yQ){for(r=new c(Tr),t=Math.ceil(s/Kn+4),aa=!1;a%2&&(r=r.times(l),NU(r.d,t)),a=Jf(a/2),a!==0;)l=l.times(l),NU(l.d,t);return aa=!0,e.s<0?new c(Tr).div(r):Fn(r,s)}}else if(i<0)throw Error(fi+"NaN");return i=i<0&&e.d[Math.max(t,a)]&1?-1:1,l.s=1,aa=!1,r=e.times(kp(l,s+d)),aa=!0,r=vQ(r),r.s=i,r};Lt.toPrecision=function(e,t){var a,s,r=this,i=r.constructor;return e===void 0?(a=Ia(r),s=Pu(r,a<=i.toExpNeg||a>=i.toExpPos)):(Oo(e,1,Zf),t===void 0?t=i.rounding:Oo(t,0,8),r=Fn(new i(r),e,t),a=Ia(r),s=Pu(r,e<=a||a<=i.toExpNeg,e)),s};Lt.toSignificantDigits=Lt.tosd=function(e,t){var a=this,s=a.constructor;return e===void 0?(e=s.precision,t=s.rounding):(Oo(e,1,Zf),t===void 0?t=s.rounding:Oo(t,0,8)),Fn(new s(a),e,t)};Lt.toString=Lt.valueOf=Lt.val=Lt.toJSON=Lt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ia(e),a=e.constructor;return Pu(e,t<=a.toExpNeg||t>=a.toExpPos)};function bQ(e,t){var a,s,r,i,o,l,c,d,u=e.constructor,f=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),aa?Fn(t,f):t;if(c=e.d,d=t.d,o=e.e,r=t.e,c=c.slice(),i=o-r,i){for(i<0?(s=c,i=-i,l=d.length):(s=d,r=o,l=c.length),o=Math.ceil(f/Kn),l=o>l?o+1:l+1,i>l&&(i=l,s.length=1),s.reverse();i--;)s.push(0);s.reverse()}for(l=c.length,i=d.length,l-i<0&&(i=l,s=d,d=c,c=s),a=0;i;)a=(c[--i]=c[i]+d[i]+a)/is|0,c[i]%=is;for(a&&(c.unshift(a),++r),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=r,aa?Fn(t,f):t}function Oo(e,t,a){if(e!==~~e||e<t||e>a)throw Error(hu+e)}function vo(e){var t,a,s,r=e.length-1,i="",o=e[0];if(r>0){for(i+=o,t=1;t<r;t++)s=e[t]+"",a=Kn-s.length,a&&(i+=Mc(a)),i+=s;o=e[t],s=o+"",a=Kn-s.length,a&&(i+=Mc(a))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Nl=(function(){function e(s,r){var i,o=0,l=s.length;for(s=s.slice();l--;)i=s[l]*r+o,s[l]=i%is|0,o=i/is|0;return o&&s.unshift(o),s}function t(s,r,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(s[l]!=r[l]){c=s[l]>r[l]?1:-1;break}return c}function a(s,r,i){for(var o=0;i--;)s[i]-=o,o=s[i]<r[i]?1:0,s[i]=o*is+s[i]-r[i];for(;!s[0]&&s.length>1;)s.shift()}return function(s,r,i,o){var l,c,d,u,f,p,x,v,N,b,C,w,S,E,k,A,T,_,I=s.constructor,R=s.s==r.s?1:-1,U=s.d,D=r.d;if(!s.s)return new I(s);if(!r.s)throw Error(fi+"Division by zero");for(c=s.e-r.e,T=D.length,k=U.length,x=new I(R),v=x.d=[],d=0;D[d]==(U[d]||0);)++d;if(D[d]>(U[d]||0)&&--c,i==null?w=i=I.precision:o?w=i+(Ia(s)-Ia(r))+1:w=i,w<0)return new I(0);if(w=w/Kn+2|0,d=0,T==1)for(u=0,D=D[0],w++;(d<k||u)&&w--;d++)S=u*is+(U[d]||0),v[d]=S/D|0,u=S%D|0;else{for(u=is/(D[0]+1)|0,u>1&&(D=e(D,u),U=e(U,u),T=D.length,k=U.length),E=T,N=U.slice(0,T),b=N.length;b<T;)N[b++]=0;_=D.slice(),_.unshift(0),A=D[0],D[1]>=is/2&&++A;do u=0,l=t(D,N,T,b),l<0?(C=N[0],T!=b&&(C=C*is+(N[1]||0)),u=C/A|0,u>1?(u>=is&&(u=is-1),f=e(D,u),p=f.length,b=N.length,l=t(f,N,p,b),l==1&&(u--,a(f,T<p?_:D,p))):(u==0&&(l=u=1),f=D.slice()),p=f.length,p<b&&f.unshift(0),a(N,f,b),l==-1&&(b=N.length,l=t(D,N,T,b),l<1&&(u++,a(N,T<b?_:D,b))),b=N.length):l===0&&(u++,N=[0]),v[d++]=u,l&&N[0]?N[b++]=U[E]||0:(N=[U[E]],b=1);while((E++<k||N[0]!==void 0)&&w--)}return v[0]||v.shift(),x.e=c,Fn(x,o?i+Ia(x)+1:i)}})();function vQ(e,t){var a,s,r,i,o,l,c=0,d=0,u=e.constructor,f=u.precision;if(Ia(e)>16)throw Error(o4+Ia(e));if(!e.s)return new u(Tr);for(aa=!1,l=f,o=new u(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(s=Math.log(Wd(2,d))/Math.LN10*2+5|0,l+=s,a=r=i=new u(Tr),u.precision=l;;){if(r=Fn(r.times(e),l),a=a.times(++c),o=i.plus(Nl(r,a,l)),vo(o.d).slice(0,l)===vo(i.d).slice(0,l)){for(;d--;)i=Fn(i.times(i),l);return u.precision=f,t==null?(aa=!0,Fn(i,f)):i}i=o}}function Ia(e){for(var t=e.e*Kn,a=e.d[0];a>=10;a/=10)t++;return t}function u2(e,t,a){if(t>e.LN10.sd())throw aa=!0,a&&(e.precision=a),Error(fi+"LN10 precision limit exceeded");return Fn(new e(e.LN10),t)}function Mc(e){for(var t="";e--;)t+="0";return t}function kp(e,t){var a,s,r,i,o,l,c,d,u,f=1,p=10,x=e,v=x.d,N=x.constructor,b=N.precision;if(x.s<1)throw Error(fi+(x.s?"NaN":"-Infinity"));if(x.eq(Tr))return new N(0);if(t==null?(aa=!1,d=b):d=t,x.eq(10))return t==null&&(aa=!0),u2(N,d);if(d+=p,N.precision=d,a=vo(v),s=a.charAt(0),i=Ia(x),Math.abs(i)<15e14){for(;s<7&&s!=1||s==1&&a.charAt(1)>3;)x=x.times(e),a=vo(x.d),s=a.charAt(0),f++;i=Ia(x),s>1?(x=new N("0."+a),i++):x=new N(s+"."+a.slice(1))}else return c=u2(N,d+2,b).times(i+""),x=kp(new N(s+"."+a.slice(1)),d-p).plus(c),N.precision=b,t==null?(aa=!0,Fn(x,b)):x;for(l=o=x=Nl(x.minus(Tr),x.plus(Tr),d),u=Fn(x.times(x),d),r=3;;){if(o=Fn(o.times(u),d),c=l.plus(Nl(o,new N(r),d)),vo(c.d).slice(0,d)===vo(l.d).slice(0,d))return l=l.times(2),i!==0&&(l=l.plus(u2(N,d+2,b).times(i+""))),l=Nl(l,new N(f),d),N.precision=b,t==null?(aa=!0,Fn(l,b)):l;l=c,r+=2}}function wU(e,t){var a,s,r;for((a=t.indexOf("."))>-1&&(t=t.replace(".","")),(s=t.search(/e/i))>0?(a<0&&(a=s),a+=+t.slice(s+1),t=t.substring(0,s)):a<0&&(a=t.length),s=0;t.charCodeAt(s)===48;)++s;for(r=t.length;t.charCodeAt(r-1)===48;)--r;if(t=t.slice(s,r),t){if(r-=s,a=a-s-1,e.e=Jf(a/Kn),e.d=[],s=(a+1)%Kn,a<0&&(s+=Kn),s<r){for(s&&e.d.push(+t.slice(0,s)),r-=Kn;s<r;)e.d.push(+t.slice(s,s+=Kn));t=t.slice(s),s=Kn-t.length}else s-=r;for(;s--;)t+="0";if(e.d.push(+t),aa&&(e.e>Qv||e.e<-Qv))throw Error(o4+a)}else e.s=0,e.e=0,e.d=[0];return e}function Fn(e,t,a){var s,r,i,o,l,c,d,u,f=e.d;for(o=1,i=f[0];i>=10;i/=10)o++;if(s=t-o,s<0)s+=Kn,r=t,d=f[u=0];else{if(u=Math.ceil((s+1)/Kn),i=f.length,u>=i)return e;for(d=i=f[u],o=1;i>=10;i/=10)o++;s%=Kn,r=s-Kn+o}if(a!==void 0&&(i=Wd(10,o-r-1),l=d/i%10|0,c=t<0||f[u+1]!==void 0||d%i,c=a<4?(l||c)&&(a==0||a==(e.s<0?3:2)):l>5||l==5&&(a==4||c||a==6&&(s>0?r>0?d/Wd(10,o-r):0:f[u-1])%10&1||a==(e.s<0?8:7))),t<1||!f[0])return c?(i=Ia(e),f.length=1,t=t-i-1,f[0]=Wd(10,(Kn-t%Kn)%Kn),e.e=Jf(-t/Kn)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(s==0?(f.length=u,i=1,u--):(f.length=u+1,i=Wd(10,Kn-s),f[u]=r>0?(d/Wd(10,o-r)%Wd(10,r)|0)*i:0),c)for(;;)if(u==0){(f[0]+=i)==is&&(f[0]=1,++e.e);break}else{if(f[u]+=i,f[u]!=is)break;f[u--]=0,i=1}for(s=f.length;f[--s]===0;)f.pop();if(aa&&(e.e>Qv||e.e<-Qv))throw Error(o4+Ia(e));return e}function wQ(e,t){var a,s,r,i,o,l,c,d,u,f,p=e.constructor,x=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),aa?Fn(t,x):t;if(c=e.d,f=t.d,s=t.e,d=e.e,c=c.slice(),o=d-s,o){for(u=o<0,u?(a=c,o=-o,l=f.length):(a=f,s=d,l=c.length),r=Math.max(Math.ceil(x/Kn),l)+2,o>r&&(o=r,a.length=1),a.reverse(),r=o;r--;)a.push(0);a.reverse()}else{for(r=c.length,l=f.length,u=r<l,u&&(l=r),r=0;r<l;r++)if(c[r]!=f[r]){u=c[r]<f[r];break}o=0}for(u&&(a=c,c=f,f=a,t.s=-t.s),l=c.length,r=f.length-l;r>0;--r)c[l++]=0;for(r=f.length;r>o;){if(c[--r]<f[r]){for(i=r;i&&c[--i]===0;)c[i]=is-1;--c[i],c[r]+=is}c[r]-=f[r]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--s;return c[0]?(t.d=c,t.e=s,aa?Fn(t,x):t):new p(0)}function Pu(e,t,a){var s,r=Ia(e),i=vo(e.d),o=i.length;return t?(a&&(s=a-o)>0?i=i.charAt(0)+"."+i.slice(1)+Mc(s):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(r<0?"e":"e+")+r):r<0?(i="0."+Mc(-r-1)+i,a&&(s=a-o)>0&&(i+=Mc(s))):r>=o?(i+=Mc(r+1-o),a&&(s=a-r-1)>0&&(i=i+"."+Mc(s))):((s=r+1)<o&&(i=i.slice(0,s)+"."+i.slice(s)),a&&(s=a-o)>0&&(r+1===o&&(i+="."),i+=Mc(s))),e.s<0?"-"+i:i}function NU(e,t){if(e.length>t)return e.length=t,!0}function NQ(e){var t,a,s;function r(i){var o=this;if(!(o instanceof r))return new r(i);if(o.constructor=r,i instanceof r){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(hu+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return wU(o,i.toString())}else if(typeof i!="string")throw Error(hu+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,JTe.test(i))wU(o,i);else throw Error(hu+i)}if(r.prototype=Lt,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.clone=NQ,r.config=r.set=eEe,e===void 0&&(e={}),e)for(s=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<s.length;)e.hasOwnProperty(a=s[t++])||(e[a]=this[a]);return r.config(e),r}function eEe(e){if(!e||typeof e!="object")throw Error(fi+"Object expected");var t,a,s,r=["precision",1,Zf,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<r.length;t+=3)if((s=e[a=r[t]])!==void 0)if(Jf(s)===s&&s>=r[t+1]&&s<=r[t+2])this[a]=s;else throw Error(hu+a+": "+s);if((s=e[a="LN10"])!==void 0)if(s==Math.LN10)this[a]=new this(s);else throw Error(hu+a+": "+s);return this}var l4=NQ(ZTe);Tr=new l4(1);const Pn=l4;var tEe=e=>e,jQ={},CQ=e=>e===jQ,jU=e=>function t(){return arguments.length===0||arguments.length===1&&CQ(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},SQ=(e,t)=>e===1?t:jU(function(){for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];var i=s.filter(o=>o!==jQ).length;return i>=e?t(...s):SQ(e-i,jU(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var d=s.map(u=>CQ(u)?l.shift():u);return t(...d,...l)}))}),nEe=e=>SQ(e.length,e),HE=(e,t)=>{for(var a=[],s=e;s<t;++s)a[s-e]=s;return a},aEe=nEe((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(a=>t[a]).map(e)),sEe=function(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];if(!a.length)return tEe;var r=a.reverse(),i=r[0],o=r.slice(1);return function(){return o.reduce((l,c)=>c(l),i(...arguments))}};function _Q(e){var t;return e===0?t=1:t=Math.floor(new Pn(e).abs().log(10).toNumber())+1,t}function AQ(e,t,a){for(var s=new Pn(e),r=0,i=[];s.lt(t)&&r<1e5;)i.push(s.toNumber()),s=s.add(a),r++;return i}var TQ=e=>{var[t,a]=e,[s,r]=[t,a];return t>a&&([s,r]=[a,t]),[s,r]},EQ=(e,t,a)=>{if(e.lte(0))return new Pn(0);var s=_Q(e.toNumber()),r=new Pn(10).pow(s),i=e.div(r),o=s!==1?.05:.1,l=new Pn(Math.ceil(i.div(o).toNumber())).add(a).mul(o),c=l.mul(r);return t?new Pn(c.toNumber()):new Pn(Math.ceil(c.toNumber()))},rEe=(e,t,a)=>{var s=new Pn(1),r=new Pn(e);if(!r.isint()&&a){var i=Math.abs(e);i<1?(s=new Pn(10).pow(_Q(e)-1),r=new Pn(Math.floor(r.div(s).toNumber())).mul(s)):i>1&&(r=new Pn(Math.floor(e)))}else e===0?r=new Pn(Math.floor((t-1)/2)):a||(r=new Pn(Math.floor(e)));var o=Math.floor((t-1)/2),l=sEe(aEe(c=>r.add(new Pn(c-o).mul(s)).toNumber()),HE);return l(0,t)},kQ=function(t,a,s,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((a-t)/(s-1)))return{step:new Pn(0),tickMin:new Pn(0),tickMax:new Pn(0)};var o=EQ(new Pn(a).sub(t).div(s-1),r,i),l;t<=0&&a>=0?l=new Pn(0):(l=new Pn(t).add(a).div(2),l=l.sub(new Pn(l).mod(o)));var c=Math.ceil(l.sub(t).div(o).toNumber()),d=Math.ceil(new Pn(a).sub(l).div(o).toNumber()),u=c+d+1;return u>s?kQ(t,a,s,r,i+1):(u<s&&(d=a>0?d+(s-u):d,c=a>0?c:c+(s-u)),{step:o,tickMin:l.sub(new Pn(c).mul(o)),tickMax:l.add(new Pn(d).mul(o))})},iEe=function(t){var[a,s]=t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(r,2),[l,c]=TQ([a,s]);if(l===-1/0||c===1/0){var d=c===1/0?[l,...HE(0,r-1).map(()=>1/0)]:[...HE(0,r-1).map(()=>-1/0),c];return a>s?d.reverse():d}if(l===c)return rEe(l,r,i);var{step:u,tickMin:f,tickMax:p}=kQ(l,c,o,i,0),x=AQ(f,p.add(new Pn(.1).mul(u)),u);return a>s?x.reverse():x},oEe=function(t,a){var[s,r]=t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,l]=TQ([s,r]);if(o===-1/0||l===1/0)return[s,r];if(o===l)return[o];var c=Math.max(a,2),d=EQ(new Pn(l).sub(o).div(c-1),i,0),u=[...AQ(new Pn(o),new Pn(l),d),l];return i===!1&&(u=u.map(f=>Math.round(f))),s>r?u.reverse():u},LQ=e=>e.rootProps.maxBarSize,lEe=e=>e.rootProps.barGap,PQ=e=>e.rootProps.barCategoryGap,cEe=e=>e.rootProps.barSize,Hx=e=>e.rootProps.stackOffset,DQ=e=>e.rootProps.reverseStackOrder,c4=e=>e.options.chartName,d4=e=>e.rootProps.syncId,OQ=e=>e.rootProps.syncMethod,u4=e=>e.options.eventEmitter,Ma={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},gl={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},_r={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},pj=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},dEe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:gl.angleAxisId,includeHidden:!1,name:void 0,reversed:gl.reversed,scale:gl.scale,tick:gl.tick,tickCount:void 0,ticks:void 0,type:gl.type,unit:void 0},uEe={allowDataOverflow:_r.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:_r.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:_r.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:_r.scale,tick:_r.tick,tickCount:_r.tickCount,ticks:void 0,type:_r.type,unit:void 0},mEe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:gl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:gl.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:gl.scale,tick:gl.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},fEe={allowDataOverflow:_r.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:_r.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:_r.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:_r.scale,tick:_r.tick,tickCount:_r.tickCount,ticks:void 0,type:"category",unit:void 0},m4=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?mEe:dEe,f4=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?fEe:uEe,xj=e=>e.polarOptions,h4=at([Yl,Ql,Ja],mQ),MQ=at([xj,h4],(e,t)=>{if(e!=null)return ks(e.innerRadius,t,0)}),IQ=at([xj,h4],(e,t)=>{if(e!=null)return ks(e.outerRadius,t,t*.8)}),hEe=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:a}=e;return[t,a]},$Q=at([xj],hEe);at([m4,$Q],pj);var RQ=at([h4,MQ,IQ],(e,t,a)=>{if(!(e==null||t==null||a==null))return[t,a]});at([f4,RQ],pj);var zQ=at([hn,xj,MQ,IQ,Yl,Ql],(e,t,a,s,r,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||a==null||s==null)){var{cx:o,cy:l,startAngle:c,endAngle:d}=t;return{cx:ks(o,r,r/2),cy:ks(l,i,i/2),innerRadius:a,outerRadius:s,startAngle:c,endAngle:d,clockWise:!1}}}),oa=(e,t)=>t,Gx=(e,t,a)=>a;function g4(e){return e?.id}function UQ(e,t,a){var{chartData:s=[]}=t,{allowDuplicatedCategory:r,dataKey:i}=a,o=new Map;return e.forEach(l=>{var c,d=(c=l.data)!==null&&c!==void 0?c:s;if(!(d==null||d.length===0)){var u=g4(l);d.forEach((f,p)=>{var x=i==null||r?p:String(Rn(f,i,null)),v=Rn(f,l.dataKey,0),N;o.has(x)?N=o.get(x):N={},Object.assign(N,{[u]:v}),o.set(x,N)})}}),Array.from(o.values())}function yj(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var bj=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function vj(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function gEe(e,t){if(e.length===t.length){for(var a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}return!1}var es=e=>{var t=hn(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},eh=e=>e.tooltip.settings.axisId;function CU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Kv(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?CU(Object(a),!0).forEach(function(s){pEe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):CU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function pEe(e,t,a){return(t=xEe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function xEe(e){var t=yEe(e,"string");return typeof t=="symbol"?t:t+""}function yEe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GE=[0,"auto"],ss={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},FQ=(e,t)=>e.cartesianAxis.xAxis[t],Xl=(e,t)=>{var a=FQ(e,t);return a??ss},rs={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:GE,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:zx},BQ=(e,t)=>e.cartesianAxis.yAxis[t],Zl=(e,t)=>{var a=BQ(e,t);return a??rs},bEe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},p4=(e,t)=>{var a=e.cartesianAxis.zAxis[t];return a??bEe},ua=(e,t,a)=>{switch(t){case"xAxis":return Xl(e,a);case"yAxis":return Zl(e,a);case"zAxis":return p4(e,a);case"angleAxis":return m4(e,a);case"radiusAxis":return f4(e,a);default:throw new Error("Unexpected axis type: ".concat(t))}},vEe=(e,t,a)=>{switch(t){case"xAxis":return Xl(e,a);case"yAxis":return Zl(e,a);default:throw new Error("Unexpected axis type: ".concat(t))}},Wx=(e,t,a)=>{switch(t){case"xAxis":return Xl(e,a);case"yAxis":return Zl(e,a);case"angleAxis":return m4(e,a);case"radiusAxis":return f4(e,a);default:throw new Error("Unexpected axis type: ".concat(t))}},HQ=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function x4(e,t){return a=>{switch(e){case"xAxis":return"xAxisId"in a&&a.xAxisId===t;case"yAxis":return"yAxisId"in a&&a.yAxisId===t;case"zAxis":return"zAxisId"in a&&a.zAxisId===t;case"angleAxis":return"angleAxisId"in a&&a.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in a&&a.radiusAxisId===t;default:return!1}}}var wj=e=>e.graphicalItems.cartesianItems,wEe=at([oa,Gx],x4),y4=(e,t,a)=>e.filter(a).filter(s=>t?.includeHidden===!0?!0:!s.hide),qx=at([wj,ua,wEe],y4,{memoizeOptions:{resultEqualityCheck:vj}}),GQ=at([qx],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(yj)),WQ=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),NEe=at([qx],WQ),b4=e=>e.map(t=>t.data).filter(Boolean).flat(1),jEe=at([qx],b4,{memoizeOptions:{resultEqualityCheck:vj}}),v4=(e,t)=>{var{chartData:a=[],dataStartIndex:s,dataEndIndex:r}=t;return e.length>0?e:a.slice(s,r+1)},w4=at([jEe,i4],v4),N4=(e,t,a)=>t?.dataKey!=null?e.map(s=>({value:Rn(s,t.dataKey)})):a.length>0?a.map(s=>s.dataKey).flatMap(s=>e.map(r=>({value:Rn(r,s)}))):e.map(s=>({value:s})),Nj=at([w4,ua,qx],N4);function qQ(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Hb(e){if(Po(e)||e instanceof Date){var t=Number(e);if(ca(t))return t}}function SU(e){if(Array.isArray(e)){var t=[Hb(e[0]),Hb(e[1])];return nd(t)?t:void 0}var a=Hb(e);if(a!=null)return[a,a]}function $l(e){return e.map(Hb).filter(rSe)}function CEe(e,t,a){return!a||typeof t!="number"||Fi(t)?[]:a.length?$l(a.flatMap(s=>{var r=Rn(e,s.dataKey),i,o;if(Array.isArray(r)?[i,o]=r:i=o=r,!(!ca(i)||!ca(o)))return[t-i,t+o]})):[]}var ts=e=>{var t=es(e),a=eh(e);return Wx(e,t,a)},Vx=at([ts],e=>e?.dataKey),SEe=at([GQ,i4,ts],UQ),VQ=(e,t,a,s)=>{var r={},i=t.reduce((o,l)=>{if(l.stackId==null)return o;var c=o[l.stackId];return c==null&&(c=[]),c.push(l),o[l.stackId]=c,o},r);return Object.fromEntries(Object.entries(i).map(o=>{var[l,c]=o,d=s?[...c].reverse():c,u=d.map(g4);return[l,{stackedData:x2e(e,u,a),graphicalItems:d}]}))},WE=at([SEe,GQ,Hx,DQ],VQ),YQ=(e,t,a,s)=>{var{dataStartIndex:r,dataEndIndex:i}=t;if(s==null&&a!=="zAxis"){var o=N2e(e,r,i);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},_Ee=at([ua],e=>e.allowDataOverflow),j4=e=>{var t;if(e==null||!("domain"in e))return GE;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var a=$l(e.ticks);return[Math.min(...a),Math.max(...a)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:GE},C4=at([ua],j4),S4=at([C4,_Ee],xQ),AEe=at([WE,Kl,oa,S4],YQ,{memoizeOptions:{resultEqualityCheck:bj}}),jj=e=>e.errorBars,TEe=(e,t,a)=>e.flatMap(s=>t[s.id]).filter(Boolean).filter(s=>qQ(a,s)),Xv=function(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];var r=a.filter(Boolean);if(r.length!==0){var i=r.flat(),o=Math.min(...i),l=Math.max(...i);return[o,l]}},_4=(e,t,a,s,r)=>{var i,o;if(a.length>0&&e.forEach(l=>{a.forEach(c=>{var d,u,f=(d=s[c.id])===null||d===void 0?void 0:d.filter(C=>qQ(r,C)),p=Rn(l,(u=t.dataKey)!==null&&u!==void 0?u:c.dataKey),x=CEe(l,p,f);if(x.length>=2){var v=Math.min(...x),N=Math.max(...x);(i==null||v<i)&&(i=v),(o==null||N>o)&&(o=N)}var b=SU(p);b!=null&&(i=i==null?b[0]:Math.min(i,b[0]),o=o==null?b[1]:Math.max(o,b[1]))})}),t?.dataKey!=null&&e.forEach(l=>{var c=SU(Rn(l,t.dataKey));c!=null&&(i=i==null?c[0]:Math.min(i,c[0]),o=o==null?c[1]:Math.max(o,c[1]))}),ca(i)&&ca(o))return[i,o]},EEe=at([w4,ua,NEe,jj,oa],_4,{memoizeOptions:{resultEqualityCheck:bj}});function kEe(e){var{value:t}=e;if(Po(t)||t instanceof Date)return t}var LEe=(e,t,a)=>{var s=e.map(kEe).filter(r=>r!=null);return a&&(t.dataKey==null||t.allowDuplicatedCategory&&WV(s))?pQ(0,e.length):t.allowDuplicatedCategory?s:Array.from(new Set(s))},QQ=e=>e.referenceElements.dots,th=(e,t,a)=>e.filter(s=>s.ifOverflow==="extendDomain").filter(s=>t==="xAxis"?s.xAxisId===a:s.yAxisId===a),PEe=at([QQ,oa,Gx],th),KQ=e=>e.referenceElements.areas,DEe=at([KQ,oa,Gx],th),XQ=e=>e.referenceElements.lines,OEe=at([XQ,oa,Gx],th),ZQ=(e,t)=>{if(e!=null){var a=$l(e.map(s=>t==="xAxis"?s.x:s.y));if(a.length!==0)return[Math.min(...a),Math.max(...a)]}},MEe=at(PEe,oa,ZQ),JQ=(e,t)=>{if(e!=null){var a=$l(e.flatMap(s=>[t==="xAxis"?s.x1:s.y1,t==="xAxis"?s.x2:s.y2]));if(a.length!==0)return[Math.min(...a),Math.max(...a)]}},IEe=at([DEe,oa],JQ);function $Ee(e){var t;if(e.x!=null)return $l([e.x]);var a=(t=e.segment)===null||t===void 0?void 0:t.map(s=>s.x);return a==null||a.length===0?[]:$l(a)}function REe(e){var t;if(e.y!=null)return $l([e.y]);var a=(t=e.segment)===null||t===void 0?void 0:t.map(s=>s.y);return a==null||a.length===0?[]:$l(a)}var eK=(e,t)=>{if(e!=null){var a=e.flatMap(s=>t==="xAxis"?$Ee(s):REe(s));if(a.length!==0)return[Math.min(...a),Math.max(...a)]}},zEe=at([OEe,oa],eK),UEe=at(MEe,zEe,IEe,(e,t,a)=>Xv(e,a,t)),A4=(e,t,a,s,r,i,o,l)=>{if(a!=null)return a;var c=o==="vertical"&&l==="xAxis"||o==="horizontal"&&l==="yAxis",d=c?Xv(s,i,r):Xv(i,r);return XTe(t,d,e.allowDataOverflow)},FEe=at([ua,C4,S4,AEe,EEe,UEe,hn,oa],A4,{memoizeOptions:{resultEqualityCheck:bj}}),BEe=[0,1],T4=(e,t,a,s,r,i,o)=>{if(!((e==null||a==null||a.length===0)&&o===void 0)){var{dataKey:l,type:c}=e,d=yd(t,i);if(d&&l==null){var u;return pQ(0,(u=a?.length)!==null&&u!==void 0?u:0)}return c==="category"?LEe(s,e,d):r==="expand"?BEe:o}},E4=at([ua,hn,w4,Nj,Hx,oa,FEe],T4),tK=(e,t,a,s,r)=>{if(e!=null){var{scale:i,type:o}=e;if(i==="auto")return t==="radial"&&r==="radiusAxis"?"band":t==="radial"&&r==="angleAxis"?"linear":o==="category"&&s&&(s.indexOf("LineChart")>=0||s.indexOf("AreaChart")>=0||s.indexOf("ComposedChart")>=0&&!a)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var l="scale".concat(Dx(i));return l in Dg?l:"point"}}},nh=at([ua,hn,HQ,c4,oa],tK);function HEe(e){if(e!=null){if(e in Dg)return Dg[e]();var t="scale".concat(Dx(e));if(t in Dg)return Dg[t]()}}function k4(e,t,a,s){if(!(a==null||s==null)){if(typeof e.scale=="function")return e.scale.copy().domain(a).range(s);var r=HEe(t);if(r!=null){var i=r.domain(a).range(s);return m2e(i),i}}}var L4=(e,t,a)=>{var s=j4(t);if(!(a!=="auto"&&a!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(s)&&(s[0]==="auto"||s[1]==="auto")&&nd(e))return iEe(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&nd(e))return oEe(e,t.tickCount,t.allowDecimals)}},P4=at([E4,Wx,nh],L4),D4=(e,t,a,s)=>{if(s!=="angleAxis"&&e?.type==="number"&&nd(t)&&Array.isArray(a)&&a.length>0){var r=t[0],i=a[0],o=t[1],l=a[a.length-1];return[Math.min(r,i),Math.max(o,l)]}return t},GEe=at([ua,E4,P4,oa],D4),WEe=at(Nj,ua,(e,t)=>{if(!(!t||t.type!=="number")){var a=1/0,s=Array.from($l(e.map(f=>f.value))).sort((f,p)=>f-p),r=s[0],i=s[s.length-1];if(r==null||i==null)return 1/0;var o=i-r;if(o===0)return 1/0;for(var l=0;l<s.length-1;l++){var c=s[l],d=s[l+1];if(!(c==null||d==null)){var u=d-c;a=Math.min(a,u)}}return a/o}}),nK=at(WEe,hn,PQ,Ja,(e,t,a,s,r)=>r,(e,t,a,s,r)=>{if(!ca(e))return 0;var i=t==="vertical"?s.height:s.width;if(r==="gap")return e*i/2;if(r==="no-gap"){var o=ks(a,e*i),l=e*i/2;return l-o-(l-o)/i*o}return 0}),qEe=(e,t,a)=>{var s=Xl(e,t);return s==null||typeof s.padding!="string"?0:nK(e,"xAxis",t,a,s.padding)},VEe=(e,t,a)=>{var s=Zl(e,t);return s==null||typeof s.padding!="string"?0:nK(e,"yAxis",t,a,s.padding)},YEe=at(Xl,qEe,(e,t)=>{var a,s;if(e==null)return{left:0,right:0};var{padding:r}=e;return typeof r=="string"?{left:t,right:t}:{left:((a=r.left)!==null&&a!==void 0?a:0)+t,right:((s=r.right)!==null&&s!==void 0?s:0)+t}}),QEe=at(Zl,VEe,(e,t)=>{var a,s;if(e==null)return{top:0,bottom:0};var{padding:r}=e;return typeof r=="string"?{top:t,bottom:t}:{top:((a=r.top)!==null&&a!==void 0?a:0)+t,bottom:((s=r.bottom)!==null&&s!==void 0?s:0)+t}}),KEe=at([Ja,YEe,lj,oj,(e,t,a)=>a],(e,t,a,s,r)=>{var{padding:i}=s;return r?[i.left,a.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),XEe=at([Ja,hn,QEe,lj,oj,(e,t,a)=>a],(e,t,a,s,r,i)=>{var{padding:o}=r;return i?[s.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-a.bottom,e.top+a.top]:[e.top+a.top,e.top+e.height-a.bottom]}),Yx=(e,t,a,s)=>{var r;switch(t){case"xAxis":return KEe(e,a,s);case"yAxis":return XEe(e,a,s);case"zAxis":return(r=p4(e,a))===null||r===void 0?void 0:r.range;case"angleAxis":return $Q(e);case"radiusAxis":return RQ(e,a);default:return}},aK=at([ua,Yx],pj),Cj=at([ua,nh,GEe,aK],k4);at([qx,jj,oa],TEe);function sK(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Sj=(e,t)=>t,_j=(e,t,a)=>a,ZEe=at(rj,Sj,_j,(e,t,a)=>e.filter(s=>s.orientation===t).filter(s=>s.mirror===a).sort(sK)),JEe=at(ij,Sj,_j,(e,t,a)=>e.filter(s=>s.orientation===t).filter(s=>s.mirror===a).sort(sK)),rK=(e,t)=>({width:e.width,height:t.height}),eke=(e,t)=>{var a=typeof t.width=="number"?t.width:zx;return{width:a,height:e.height}},iK=at(Ja,Xl,rK),tke=(e,t,a)=>{switch(t){case"top":return e.top;case"bottom":return a-e.bottom;default:return 0}},nke=(e,t,a)=>{switch(t){case"left":return e.left;case"right":return a-e.right;default:return 0}},ake=at(Ql,Ja,ZEe,Sj,_j,(e,t,a,s,r)=>{var i={},o;return a.forEach(l=>{var c=rK(t,l);o==null&&(o=tke(t,s,e));var d=s==="top"&&!r||s==="bottom"&&r;i[l.id]=o-Number(d)*c.height,o+=(d?-1:1)*c.height}),i}),ske=at(Yl,Ja,JEe,Sj,_j,(e,t,a,s,r)=>{var i={},o;return a.forEach(l=>{var c=eke(t,l);o==null&&(o=nke(t,s,e));var d=s==="left"&&!r||s==="right"&&r;i[l.id]=o-Number(d)*c.width,o+=(d?-1:1)*c.width}),i}),rke=(e,t)=>{var a=Xl(e,t);if(a!=null)return ake(e,a.orientation,a.mirror)},ike=at([Ja,Xl,rke,(e,t)=>t],(e,t,a,s)=>{if(t!=null){var r=a?.[s];return r==null?{x:e.left,y:0}:{x:e.left,y:r}}}),oke=(e,t)=>{var a=Zl(e,t);if(a!=null)return ske(e,a.orientation,a.mirror)},lke=at([Ja,Zl,oke,(e,t)=>t],(e,t,a,s)=>{if(t!=null){var r=a?.[s];return r==null?{x:0,y:e.top}:{x:r,y:e.top}}}),oK=at(Ja,Zl,(e,t)=>{var a=typeof t.width=="number"?t.width:zx;return{width:a,height:e.height}}),_U=(e,t,a)=>{switch(t){case"xAxis":return iK(e,a).width;case"yAxis":return oK(e,a).height;default:return}},lK=(e,t,a,s)=>{if(a!=null){var{allowDuplicatedCategory:r,type:i,dataKey:o}=a,l=yd(e,s),c=t.map(d=>d.value);if(o&&l&&i==="category"&&r&&WV(c))return c}},O4=at([hn,Nj,ua,oa],lK),cK=(e,t,a,s)=>{if(!(a==null||a.dataKey==null)){var{type:r,scale:i}=a,o=yd(e,s);if(o&&(r==="number"||i!=="auto"))return t.map(l=>l.value)}},M4=at([hn,Nj,Wx,oa],cK),AU=at([hn,vEe,nh,Cj,O4,M4,Yx,P4,oa],(e,t,a,s,r,i,o,l,c)=>{if(t!=null){var d=yd(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:i,duplicateDomain:r,isCategorical:d,niceTicks:l,range:o,realScaleType:a,scale:s}}}),cke=(e,t,a,s,r,i,o,l,c)=>{if(!(t==null||s==null)){var d=yd(e,c),{type:u,ticks:f,tickCount:p}=t,x=a==="scaleBand"&&typeof s.bandwidth=="function"?s.bandwidth()/2:2,v=u==="category"&&s.bandwidth?s.bandwidth()/x:0;v=c==="angleAxis"&&i!=null&&i.length>=2?cs(i[0]-i[1])*2*v:v;var N=f||r;if(N){var b=N.map((C,w)=>{var S=o?o.indexOf(C):C;return{index:w,coordinate:s(S)+v,value:C,offset:v}});return b.filter(C=>ca(C.coordinate))}return d&&l?l.map((C,w)=>({coordinate:s(C)+v,value:C,index:w,offset:v})).filter(C=>ca(C.coordinate)):s.ticks?s.ticks(p).map(C=>({coordinate:s(C)+v,value:C,offset:v})):s.domain().map((C,w)=>({coordinate:s(C)+v,value:o?o[C]:C,index:w,offset:v}))}},dK=at([hn,Wx,nh,Cj,P4,Yx,O4,M4,oa],cke),dke=(e,t,a,s,r,i,o)=>{if(!(t==null||a==null||s==null||s[0]===s[1])){var l=yd(e,o),{tickCount:c}=t,d=0;return d=o==="angleAxis"&&s?.length>=2?cs(s[0]-s[1])*2*d:d,l&&i?i.map((u,f)=>({coordinate:a(u)+d,value:u,index:f,offset:d})):a.ticks?a.ticks(c).map(u=>({coordinate:a(u)+d,value:u,offset:d})):a.domain().map((u,f)=>({coordinate:a(u)+d,value:r?r[u]:u,index:f,offset:d}))}},ad=at([hn,Wx,Cj,Yx,O4,M4,oa],dke),sd=at(ua,Cj,(e,t)=>{if(!(e==null||t==null))return Kv(Kv({},e),{},{scale:t})}),uke=at([ua,nh,E4,aK],k4);at((e,t,a)=>p4(e,a),uke,(e,t)=>{if(!(e==null||t==null))return Kv(Kv({},e),{},{scale:t})});var mke=at([hn,rj,ij],(e,t,a)=>{switch(e){case"horizontal":return t.some(s=>s.reversed)?"right-to-left":"left-to-right";case"vertical":return a.some(s=>s.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),uK=e=>e.options.defaultTooltipEventType,mK=e=>e.options.validateTooltipEventTypes;function fK(e,t,a){if(e==null)return t;var s=e?"axis":"item";return a==null?t:a.includes(s)?s:t}function I4(e,t){var a=uK(e),s=mK(e);return fK(t,a,s)}function fke(e){return Mt(t=>I4(t,e))}var hK=(e,t)=>{var a,s=Number(t);if(!(Fi(s)||t==null))return s>=0?e==null||(a=e[s])===null||a===void 0?void 0:a.value:void 0},hke=e=>e.tooltip.settings,Rc={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},gke={itemInteraction:{click:Rc,hover:Rc},axisInteraction:{click:Rc,hover:Rc},keyboardInteraction:Rc,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},gK=fr({name:"tooltip",initialState:gke,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:ta()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:a,next:s}=t.payload,r=$i(e).tooltipItemPayloads.indexOf(a);r>-1&&(e.tooltipItemPayloads[r]=s)},prepare:ta()},removeTooltipEntrySettings:{reducer(e,t){var a=$i(e).tooltipItemPayloads.indexOf(t.payload);a>-1&&e.tooltipItemPayloads.splice(a,1)},prepare:ta()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:pke,replaceTooltipEntrySettings:xke,removeTooltipEntrySettings:yke,setTooltipSettingsState:bke,setActiveMouseOverItemIndex:pK,mouseLeaveItem:vke,mouseLeaveChart:xK,setActiveClickItemIndex:wke,setMouseOverAxisIndex:yK,setMouseClickAxisIndex:Nke,setSyncInteraction:qE,setKeyboardInteraction:VE}=gK.actions,jke=gK.reducer;function TU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Wy(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?TU(Object(a),!0).forEach(function(s){Cke(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):TU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function Cke(e,t,a){return(t=Ske(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Ske(e){var t=_ke(e,"string");return typeof t=="symbol"?t:t+""}function _ke(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ake(e,t,a){return t==="axis"?a==="click"?e.axisInteraction.click:e.axisInteraction.hover:a==="click"?e.itemInteraction.click:e.itemInteraction.hover}function Tke(e){return e.index!=null}var bK=(e,t,a,s)=>{if(t==null)return Rc;var r=Ake(e,t,a);if(r==null)return Rc;if(r.active)return r;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(Tke(r)){if(i)return Wy(Wy({},r),{},{active:!0})}else if(s!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:s,graphicalItemId:void 0};return Wy(Wy({},Rc),{},{coordinate:r.coordinate})};function Eke(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var a=Number(e);return Number.isFinite(a)?a:void 0}function kke(e,t){var a=Eke(e),s=t[0],r=t[1];if(a===void 0)return!1;var i=Math.min(s,r),o=Math.max(s,r);return a>=i&&a<=o}function Lke(e,t,a){if(a==null||t==null)return!0;var s=Rn(e,t);return s==null||!nd(a)?!0:kke(s,a)}var $4=(e,t,a,s)=>{var r=e?.index;if(r==null)return null;var i=Number(r);if(!ca(i))return r;var o=0,l=1/0;t.length>0&&(l=t.length-1);var c=Math.max(o,Math.min(i,l)),d=t[c];return d==null||Lke(d,a,s)?String(c):null},vK=(e,t,a,s,r,i,o,l)=>{if(!(i==null||l==null)){var c=o[0],d=c==null?void 0:l(c.positions,i);if(d!=null)return d;var u=r?.[Number(i)];if(u)return a==="horizontal"?{x:u.coordinate,y:(s.top+t)/2}:{x:(s.left+e)/2,y:u.coordinate}}},wK=(e,t,a,s)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var r;if(a==="hover"?r=e.itemInteraction.hover.graphicalItemId:r=e.itemInteraction.click.graphicalItemId,r==null&&s!=null){var i=e.tooltipItemPayloads[0];return i!=null?[i]:[]}return e.tooltipItemPayloads.filter(o=>{var l;return((l=o.settings)===null||l===void 0?void 0:l.graphicalItemId)===r})},Qx=e=>e.options.tooltipPayloadSearcher,ah=e=>e.tooltip;function EU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function kU(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?EU(Object(a),!0).forEach(function(s){Pke(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):EU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function Pke(e,t,a){return(t=Dke(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Dke(e){var t=Oke(e,"string");return typeof t=="symbol"?t:t+""}function Oke(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mke(e,t){return e??t}var NK=(e,t,a,s,r,i,o)=>{if(!(t==null||i==null)){var{chartData:l,computedData:c,dataStartIndex:d,dataEndIndex:u}=a,f=[];return e.reduce((p,x)=>{var v,{dataDefinedOnItem:N,settings:b}=x,C=Mke(N,l),w=Array.isArray(C)?RY(C,d,u):C,S=(v=b?.dataKey)!==null&&v!==void 0?v:s,E=b?.nameKey,k;if(s&&Array.isArray(w)&&!Array.isArray(w[0])&&o==="axis"?k=qV(w,s,r):k=i(w,t,c,E),Array.isArray(k))k.forEach(T=>{var _=kU(kU({},b),{},{name:T.name,unit:T.unit,color:void 0,fill:void 0});p.push(pz({tooltipEntrySettings:_,dataKey:T.dataKey,payload:T.payload,value:Rn(T.payload,T.dataKey),name:T.name}))});else{var A;p.push(pz({tooltipEntrySettings:b,dataKey:S,payload:k,value:Rn(k,S),name:(A=Rn(k,E))!==null&&A!==void 0?A:b?.name}))}return p},f)}},R4=at([ts,hn,HQ,c4,es],tK),Ike=at([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),$ke=at([es,eh],x4),sh=at([Ike,ts,$ke],y4,{memoizeOptions:{resultEqualityCheck:vj}}),Rke=at([sh],e=>e.filter(yj)),zke=at([sh],b4,{memoizeOptions:{resultEqualityCheck:vj}}),rh=at([zke,Kl],v4),Uke=at([Rke,Kl,ts],UQ),z4=at([rh,ts,sh],N4),jK=at([ts],j4),Fke=at([ts],e=>e.allowDataOverflow),CK=at([jK,Fke],xQ),Bke=at([sh],e=>e.filter(yj)),Hke=at([Uke,Bke,Hx,DQ],VQ),Gke=at([Hke,Kl,es,CK],YQ),Wke=at([sh],WQ),qke=at([rh,ts,Wke,jj,es],_4,{memoizeOptions:{resultEqualityCheck:bj}}),Vke=at([QQ,es,eh],th),Yke=at([Vke,es],ZQ),Qke=at([KQ,es,eh],th),Kke=at([Qke,es],JQ),Xke=at([XQ,es,eh],th),Zke=at([Xke,es],eK),Jke=at([Yke,Zke,Kke],Xv),eLe=at([ts,jK,CK,Gke,qke,Jke,hn,es],A4),Kx=at([ts,hn,rh,z4,Hx,es,eLe],T4),tLe=at([Kx,ts,R4],L4),nLe=at([ts,Kx,tLe,es],D4),SK=e=>{var t=es(e),a=eh(e),s=!1;return Yx(e,t,a,s)},_K=at([ts,SK],pj),AK=at([ts,R4,nLe,_K],k4),aLe=at([hn,z4,ts,es],lK),sLe=at([hn,z4,ts,es],cK),rLe=(e,t,a,s,r,i,o,l)=>{if(t){var{type:c}=t,d=yd(e,l);if(s){var u=a==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,f=c==="category"&&s.bandwidth?s.bandwidth()/u:0;return f=l==="angleAxis"&&r!=null&&r?.length>=2?cs(r[0]-r[1])*2*f:f,d&&o?o.map((p,x)=>({coordinate:s(p)+f,value:p,index:x,offset:f})):s.domain().map((p,x)=>({coordinate:s(p)+f,value:i?i[p]:p,index:x,offset:f}))}}},Jl=at([hn,ts,R4,AK,SK,aLe,sLe,es],rLe),U4=at([uK,mK,hke],(e,t,a)=>fK(a.shared,e,t)),TK=e=>e.tooltip.settings.trigger,F4=e=>e.tooltip.settings.defaultIndex,Xx=at([ah,U4,TK,F4],bK),rd=at([Xx,rh,Vx,Kx],$4),EK=at([Jl,rd],hK),B4=at([Xx],e=>{if(e)return e.dataKey}),iLe=at([Xx],e=>{if(e)return e.graphicalItemId}),kK=at([ah,U4,TK,F4],wK),oLe=at([Yl,Ql,hn,Ja,Jl,F4,kK,Qx],vK),lLe=at([Xx,oLe],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),cLe=at([Xx],e=>{var t;return(t=e?.active)!==null&&t!==void 0?t:!1}),dLe=at([kK,rd,Kl,Vx,EK,Qx,U4],NK),uLe=at([dLe],e=>{if(e!=null){var t=e.map(a=>a.payload).filter(a=>a!=null);return Array.from(new Set(t))}});function LU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function PU(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?LU(Object(a),!0).forEach(function(s){mLe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):LU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function mLe(e,t,a){return(t=fLe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function fLe(e){var t=hLe(e,"string");return typeof t=="symbol"?t:t+""}function hLe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gLe=()=>Mt(ts),pLe=()=>{var e=gLe(),t=Mt(Jl),a=Mt(AK);return Tf(!e||!a?void 0:PU(PU({},e),{},{scale:a}),t)};function DU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Fm(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?DU(Object(a),!0).forEach(function(s){xLe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):DU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function xLe(e,t,a){return(t=yLe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function yLe(e){var t=bLe(e,"string");return typeof t=="symbol"?t:t+""}function bLe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vLe=(e,t,a,s)=>{var r=t.find(i=>i&&i.index===a);if(r){if(e==="horizontal")return{x:r.coordinate,y:s.chartY};if(e==="vertical")return{x:s.chartX,y:r.coordinate}}return{x:0,y:0}},wLe=(e,t,a,s)=>{var r=t.find(d=>d&&d.index===a);if(r){if(e==="centric"){var i=r.coordinate,{radius:o}=s;return Fm(Fm(Fm({},s),Oa(s.cx,s.cy,o,i)),{},{angle:i,radius:o})}var l=r.coordinate,{angle:c}=s;return Fm(Fm(Fm({},s),Oa(s.cx,s.cy,l,c)),{},{angle:c,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function NLe(e,t){var{chartX:a,chartY:s}=e;return a>=t.left&&a<=t.left+t.width&&s>=t.top&&s<=t.top+t.height}var LK=(e,t,a,s,r)=>{var i,o=(i=t?.length)!==null&&i!==void 0?i:0;if(o<=1||e==null)return 0;if(s==="angleAxis"&&r!=null&&Math.abs(Math.abs(r[1]-r[0])-360)<=1e-6)for(var l=0;l<o;l++){var c,d,u,f,p,x=l>0?(c=a[l-1])===null||c===void 0?void 0:c.coordinate:(d=a[o-1])===null||d===void 0?void 0:d.coordinate,v=(u=a[l])===null||u===void 0?void 0:u.coordinate,N=l>=o-1?(f=a[0])===null||f===void 0?void 0:f.coordinate:(p=a[l+1])===null||p===void 0?void 0:p.coordinate,b=void 0;if(!(x==null||v==null||N==null))if(cs(v-x)!==cs(N-v)){var C=[];if(cs(N-v)===cs(r[1]-r[0])){b=N;var w=v+r[1]-r[0];C[0]=Math.min(w,(w+x)/2),C[1]=Math.max(w,(w+x)/2)}else{b=x;var S=N+r[1]-r[0];C[0]=Math.min(v,(S+v)/2),C[1]=Math.max(v,(S+v)/2)}var E=[Math.min(v,(b+v)/2),Math.max(v,(b+v)/2)];if(e>E[0]&&e<=E[1]||e>=C[0]&&e<=C[1]){var k;return(k=a[l])===null||k===void 0?void 0:k.index}}else{var A=Math.min(x,N),T=Math.max(x,N);if(e>(A+v)/2&&e<=(T+v)/2){var _;return(_=a[l])===null||_===void 0?void 0:_.index}}}else if(t)for(var I=0;I<o;I++){var R=t[I];if(R!=null){var U=t[I+1],D=t[I-1];if(I===0&&U!=null&&e<=(R.coordinate+U.coordinate)/2||I===o-1&&D!=null&&e>(R.coordinate+D.coordinate)/2||I>0&&I<o-1&&D!=null&&U!=null&&e>(R.coordinate+D.coordinate)/2&&e<=(R.coordinate+U.coordinate)/2)return R.index}}return-1},jLe=()=>Mt(c4),H4=(e,t)=>t,PK=(e,t,a)=>a,G4=(e,t,a,s)=>s,CLe=at(Jl,e=>KN(e,t=>t.coordinate)),W4=at([ah,H4,PK,G4],bK),q4=at([W4,rh,Vx,Kx],$4),SLe=(e,t,a)=>{if(t!=null){var s=ah(e);return t==="axis"?a==="hover"?s.axisInteraction.hover.dataKey:s.axisInteraction.click.dataKey:a==="hover"?s.itemInteraction.hover.dataKey:s.itemInteraction.click.dataKey}},DK=at([ah,H4,PK,G4],wK),Zv=at([Yl,Ql,hn,Ja,Jl,G4,DK,Qx],vK),_Le=at([W4,Zv],(e,t)=>{var a;return(a=e.coordinate)!==null&&a!==void 0?a:t}),OK=at([Jl,q4],hK),ALe=at([DK,q4,Kl,Vx,OK,Qx,H4],NK),TLe=at([W4,q4],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),ELe=(e,t,a,s,r,i,o)=>{if(!(!e||!a||!s||!r)&&NLe(e,o)){var l=j2e(e,t),c=LK(l,i,r,a,s),d=vLe(t,r,c,e);return{activeIndex:String(c),activeCoordinate:d}}},kLe=(e,t,a,s,r,i,o)=>{if(!(!e||!s||!r||!i||!a)){var l=UTe(e,a);if(l){var c=C2e(l,t),d=LK(c,o,i,s,r),u=wLe(t,i,d,l);return{activeIndex:String(d),activeCoordinate:u}}}},LLe=(e,t,a,s,r,i,o,l)=>{if(!(!e||!t||!s||!r||!i))return t==="horizontal"||t==="vertical"?ELe(e,t,s,r,i,o,l):kLe(e,t,a,s,r,i,o)},PLe=at(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,a)=>a,(e,t,a)=>{if(t!=null){var s=e[t];if(s!=null)return a?s.panoramaElement:s.element}}),DLe=at(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(s=>parseInt(s,10)).concat(Object.values(Ma)),a=Array.from(new Set(t));return a.sort((s,r)=>s-r)},{memoizeOptions:{resultEqualityCheck:gEe}});function OU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function MU(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?OU(Object(a),!0).forEach(function(s){OLe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):OU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function OLe(e,t,a){return(t=MLe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function MLe(e){var t=ILe(e,"string");return typeof t=="symbol"?t:t+""}function ILe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $Le={},RLe={zIndexMap:Object.values(Ma).reduce((e,t)=>MU(MU({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),$Le)},zLe=new Set(Object.values(Ma));function ULe(e){return zLe.has(e)}var MK=fr({name:"zIndex",initialState:RLe,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:a}=t.payload;e.zIndexMap[a]?e.zIndexMap[a].consumers+=1:e.zIndexMap[a]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:ta()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:a}=t.payload;e.zIndexMap[a]&&(e.zIndexMap[a].consumers-=1,e.zIndexMap[a].consumers<=0&&!ULe(a)&&delete e.zIndexMap[a])},prepare:ta()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:a,element:s,isPanorama:r}=t.payload;e.zIndexMap[a]?r?e.zIndexMap[a].panoramaElement=s:e.zIndexMap[a].element=s:e.zIndexMap[a]={consumers:0,element:r?void 0:s,panoramaElement:r?s:void 0}},prepare:ta()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:a}=t.payload;e.zIndexMap[a]&&(t.payload.isPanorama?e.zIndexMap[a].panoramaElement=void 0:e.zIndexMap[a].element=void 0)},prepare:ta()}}}),{registerZIndexPortal:FLe,unregisterZIndexPortal:BLe,registerZIndexPortalElement:HLe,unregisterZIndexPortalElement:GLe}=MK.actions,WLe=MK.reducer;function hr(e){var{zIndex:t,children:a}=e,s=tAe(),r=s&&t!==void 0&&t!==0,i=Os(),o=qn();h.useLayoutEffect(()=>r?(o(FLe({zIndex:t})),()=>{o(BLe({zIndex:t}))}):Ox,[o,t,r]);var l=Mt(c=>PLe(c,t,i));return r?l?Mi.createPortal(a,l):null:a}function YE(){return YE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},YE.apply(null,arguments)}function IU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function qy(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?IU(Object(a),!0).forEach(function(s){qLe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):IU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function qLe(e,t,a){return(t=VLe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function VLe(e){var t=YLe(e,"string");return typeof t=="symbol"?t:t+""}function YLe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function QLe(e){var{cursor:t,cursorComp:a,cursorProps:s}=e;return h.isValidElement(t)?h.cloneElement(t,s):h.createElement(a,s)}function KLe(e){var t,{coordinate:a,payload:s,index:r,offset:i,tooltipAxisBandSize:o,layout:l,cursor:c,tooltipEventType:d,chartName:u}=e,f=a,p=s,x=r;if(!c||!f||u!=="ScatterChart"&&d!=="axis")return null;var v,N,b;if(u==="ScatterChart")v=f,N=eTe,b=Ma.cursorLine;else if(u==="BarChart")v=tTe(l,f,i,o),N=uQ,b=Ma.cursorRectangle;else if(l==="radial"&&YV(f)){var{cx:C,cy:w,radius:S,startAngle:E,endAngle:k}=fQ(f);v={cx:C,cy:w,startAngle:E,endAngle:k,innerRadius:S,outerRadius:S},N=gQ,b=Ma.cursorLine}else v={points:GTe(l,f,i)},N=r4,b=Ma.cursorLine;var A=typeof c=="object"&&"className"in c?c.className:void 0,T=qy(qy(qy(qy({stroke:"#ccc",pointerEvents:"none"},i),v),Au(c)),{},{payload:p,payloadIndex:x,className:kt("recharts-tooltip-cursor",A)});return h.createElement(hr,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:b},h.createElement(QLe,{cursor:c,cursorComp:N,cursorProps:T}))}function XLe(e){var t=pLe(),a=YY(),s=Xf(),r=jLe();return t==null||a==null||s==null||r==null?null:h.createElement(KLe,YE({},e,{offset:a,layout:s,tooltipAxisBandSize:t,chartName:r}))}var IK=h.createContext(null),ZLe=()=>h.useContext(IK),m2={exports:{}},$U;function JLe(){return $U||($U=1,(function(e){var t=Object.prototype.hasOwnProperty,a="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(a=!1));function r(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function i(c,d,u,f,p){if(typeof u!="function")throw new TypeError("The listener must be a function");var x=new r(u,f||c,p),v=a?a+d:d;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],x]:c._events[v].push(x):(c._events[v]=x,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new s:delete c._events[d]}function l(){this._events=new s,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],u,f;if(this._eventsCount===0)return d;for(f in u=this._events)t.call(u,f)&&d.push(a?f.slice(1):f);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},l.prototype.listeners=function(d){var u=a?a+d:d,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,x=f.length,v=new Array(x);p<x;p++)v[p]=f[p].fn;return v},l.prototype.listenerCount=function(d){var u=a?a+d:d,f=this._events[u];return f?f.fn?1:f.length:0},l.prototype.emit=function(d,u,f,p,x,v){var N=a?a+d:d;if(!this._events[N])return!1;var b=this._events[N],C=arguments.length,w,S;if(b.fn){switch(b.once&&this.removeListener(d,b.fn,void 0,!0),C){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,u),!0;case 3:return b.fn.call(b.context,u,f),!0;case 4:return b.fn.call(b.context,u,f,p),!0;case 5:return b.fn.call(b.context,u,f,p,x),!0;case 6:return b.fn.call(b.context,u,f,p,x,v),!0}for(S=1,w=new Array(C-1);S<C;S++)w[S-1]=arguments[S];b.fn.apply(b.context,w)}else{var E=b.length,k;for(S=0;S<E;S++)switch(b[S].once&&this.removeListener(d,b[S].fn,void 0,!0),C){case 1:b[S].fn.call(b[S].context);break;case 2:b[S].fn.call(b[S].context,u);break;case 3:b[S].fn.call(b[S].context,u,f);break;case 4:b[S].fn.call(b[S].context,u,f,p);break;default:if(!w)for(k=1,w=new Array(C-1);k<C;k++)w[k-1]=arguments[k];b[S].fn.apply(b[S].context,w)}}return!0},l.prototype.on=function(d,u,f){return i(this,d,u,f,!1)},l.prototype.once=function(d,u,f){return i(this,d,u,f,!0)},l.prototype.removeListener=function(d,u,f,p){var x=a?a+d:d;if(!this._events[x])return this;if(!u)return o(this,x),this;var v=this._events[x];if(v.fn)v.fn===u&&(!p||v.once)&&(!f||v.context===f)&&o(this,x);else{for(var N=0,b=[],C=v.length;N<C;N++)(v[N].fn!==u||p&&!v[N].once||f&&v[N].context!==f)&&b.push(v[N]);b.length?this._events[x]=b.length===1?b[0]:b:o(this,x)}return this},l.prototype.removeAllListeners=function(d){var u;return d?(u=a?a+d:d,this._events[u]&&o(this,u)):(this._events=new s,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=a,l.EventEmitter=l,e.exports=l})(m2)),m2.exports}var ePe=JLe();const tPe=Hi(ePe);var Lp=new tPe,QE="recharts.syncEvent.tooltip",RU="recharts.syncEvent.brush";function V4(e,t){if(t){var a=Number.parseInt(t,10);if(!Fi(a))return e?.[a]}}var nPe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},$K=fr({name:"options",initialState:nPe,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),aPe=$K.reducer,{createEventEmitter:sPe}=$K.actions;function rPe(e){return e.tooltip.syncInteraction}var iPe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},RK=fr({name:"chartData",initialState:iPe,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:a,endIndex:s}=t.payload;a!=null&&(e.dataStartIndex=a),s!=null&&(e.dataEndIndex=s)}}}),{setChartData:zU,setDataStartEndIndexes:oPe,setComputedData:Rqe}=RK.actions,lPe=RK.reducer,cPe=["x","y"];function UU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Bm(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?UU(Object(a),!0).forEach(function(s){dPe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):UU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function dPe(e,t,a){return(t=uPe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function uPe(e){var t=mPe(e,"string");return typeof t=="symbol"?t:t+""}function mPe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fPe(e,t){if(e==null)return{};var a,s,r=hPe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function hPe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function gPe(){var e=Mt(d4),t=Mt(u4),a=qn(),s=Mt(OQ),r=Mt(Jl),i=Xf(),o=cj(),l=Mt(c=>c.rootProps.className);h.useEffect(()=>{if(e==null)return Ox;var c=(d,u,f)=>{if(t!==f&&e===d){if(s==="index"){var p;if(o&&u!==null&&u!==void 0&&(p=u.payload)!==null&&p!==void 0&&p.coordinate&&u.payload.sourceViewBox){var x=u.payload.coordinate,{x:v,y:N}=x,b=fPe(x,cPe),{x:C,y:w,width:S,height:E}=u.payload.sourceViewBox,k=Bm(Bm({},b),{},{x:o.x+(S?(v-C)/S:0)*o.width,y:o.y+(E?(N-w)/E:0)*o.height});a(Bm(Bm({},u),{},{payload:Bm(Bm({},u.payload),{},{coordinate:k})}))}else a(u);return}if(r!=null){var A;if(typeof s=="function"){var T={activeTooltipIndex:u.payload.index==null?void 0:Number(u.payload.index),isTooltipActive:u.payload.active,activeIndex:u.payload.index==null?void 0:Number(u.payload.index),activeLabel:u.payload.label,activeDataKey:u.payload.dataKey,activeCoordinate:u.payload.coordinate},_=s(r,T);A=r[_]}else s==="value"&&(A=r.find(z=>String(z.value)===u.payload.label));var{coordinate:I}=u.payload;if(A==null||u.payload.active===!1||I==null||o==null){a(qE({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:R,y:U}=I,D=Math.min(R,o.x+o.width),M=Math.min(U,o.y+o.height),W={x:i==="horizontal"?A.coordinate:D,y:i==="horizontal"?M:A.coordinate},X=qE({active:u.payload.active,coordinate:W,dataKey:u.payload.dataKey,index:String(A.index),label:u.payload.label,sourceViewBox:u.payload.sourceViewBox,graphicalItemId:u.payload.graphicalItemId});a(X)}}};return Lp.on(QE,c),()=>{Lp.off(QE,c)}},[l,a,t,e,s,r,i,o])}function pPe(){var e=Mt(d4),t=Mt(u4),a=qn();h.useEffect(()=>{if(e==null)return Ox;var s=(r,i,o)=>{t!==o&&e===r&&a(oPe(i))};return Lp.on(RU,s),()=>{Lp.off(RU,s)}},[a,t,e])}function xPe(){var e=qn();h.useEffect(()=>{e(sPe())},[e]),gPe(),pPe()}function yPe(e,t,a,s,r,i){var o=Mt(x=>SLe(x,e,t)),l=Mt(u4),c=Mt(d4),d=Mt(OQ),u=Mt(rPe),f=u?.active,p=cj();h.useEffect(()=>{if(!f&&c!=null&&l!=null){var x=qE({active:i,coordinate:a,dataKey:o,index:r,label:typeof s=="number"?String(s):s,sourceViewBox:p,graphicalItemId:void 0});Lp.emit(QE,c,x,l)}},[f,a,o,r,s,l,c,d,i,p])}function FU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function BU(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?FU(Object(a),!0).forEach(function(s){bPe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):FU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function bPe(e,t,a){return(t=vPe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function vPe(e){var t=wPe(e,"string");return typeof t=="symbol"?t:t+""}function wPe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function NPe(e){return e.dataKey}function jPe(e,t){return h.isValidElement(e)?h.cloneElement(e,t):typeof e=="function"?h.createElement(e,t):h.createElement(DAe,t)}var HU=[],CPe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function f2(e){var t,a,s=za(e,CPe),{active:r,allowEscapeViewBox:i,animationDuration:o,animationEasing:l,content:c,filterNull:d,isAnimationActive:u,offset:f,payloadUniqBy:p,position:x,reverseDirection:v,useTranslate3d:N,wrapperStyle:b,cursor:C,shared:w,trigger:S,defaultIndex:E,portal:k,axisId:A}=s,T=qn(),_=typeof E=="number"?String(E):E;h.useEffect(()=>{T(bke({shared:w,trigger:S,axisId:A,active:r,defaultIndex:_}))},[T,w,S,A,r,_]);var I=cj(),R=iQ(),U=fke(w),{activeIndex:D,isActive:M}=(t=Mt(De=>TLe(De,U,S,_)))!==null&&t!==void 0?t:{},W=Mt(De=>ALe(De,U,S,_)),X=Mt(De=>OK(De,U,S,_)),z=Mt(De=>_Le(De,U,S,_)),Q=W,de=ZLe(),Y=(a=r??M)!==null&&a!==void 0?a:!1,[se,J]=lY([Q,Y]),F=U==="axis"?X:void 0;yPe(U,S,z,F,D,Y);var Ne=k??de;if(Ne==null||I==null||U==null)return null;var re=Q??HU;Y||(re=HU),d&&re.length&&(re=sY(re.filter(De=>De.value!=null&&(De.hide!==!0||s.includeHidden)),p,NPe));var he=re.length>0,je=h.createElement(UAe,{allowEscapeViewBox:i,animationDuration:o,animationEasing:l,isAnimationActive:u,active:Y,coordinate:z,hasPayload:he,offset:f,position:x,reverseDirection:v,useTranslate3d:N,viewBox:I,wrapperStyle:b,lastBoundingBox:se,innerRef:J,hasPortalFromProps:!!k},jPe(c,BU(BU({},s),{},{payload:re,label:F,active:Y,activeIndex:D,coordinate:z,accessibilityLayer:R})));return h.createElement(h.Fragment,null,Mi.createPortal(je,Ne),Y&&h.createElement(XLe,{cursor:C,tooltipEventType:U,coordinate:z,payload:re,index:D}))}var Aj=e=>null;Aj.displayName="Cell";function SPe(e,t,a){return(t=_Pe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _Pe(e){var t=APe(e,"string");return typeof t=="symbol"?t:t+""}function APe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class TPe{constructor(t){SPe(this,"cache",new Map),this.maxSize=t}get(t){var a=this.cache.get(t);return a!==void 0&&(this.cache.delete(t),this.cache.set(t,a)),a}set(t,a){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var s=this.cache.keys().next().value;s!=null&&this.cache.delete(s)}this.cache.set(t,a)}clear(){this.cache.clear()}size(){return this.cache.size}}function GU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function EPe(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?GU(Object(a),!0).forEach(function(s){kPe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):GU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function kPe(e,t,a){return(t=LPe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function LPe(e){var t=PPe(e,"string");return typeof t=="symbol"?t:t+""}function PPe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var DPe={cacheSize:2e3,enableCache:!0},zK=EPe({},DPe),WU=new TPe(zK.cacheSize),OPe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},qU="recharts_measurement_span";function MPe(e,t){var a=t.fontSize||"",s=t.fontFamily||"",r=t.fontWeight||"",i=t.fontStyle||"",o=t.letterSpacing||"",l=t.textTransform||"";return"".concat(e,"|").concat(a,"|").concat(s,"|").concat(r,"|").concat(i,"|").concat(o,"|").concat(l)}var VU=(e,t)=>{try{var a=document.getElementById(qU);a||(a=document.createElement("span"),a.setAttribute("id",qU),a.setAttribute("aria-hidden","true"),document.body.appendChild(a)),Object.assign(a.style,OPe,t),a.textContent="".concat(e);var s=a.getBoundingClientRect();return{width:s.width,height:s.height}}catch{return{width:0,height:0}}},qg=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||hj.isSsr)return{width:0,height:0};if(!zK.enableCache)return VU(t,a);var s=MPe(t,a),r=WU.get(s);if(r)return r;var i=VU(t,a);return WU.set(s,i),i},UK;function IPe(e,t,a){return(t=$Pe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function $Pe(e){var t=RPe(e,"string");return typeof t=="symbol"?t:t+""}function RPe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var YU=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,QU=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,zPe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,UPe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,FPe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},BPe=["cm","mm","pt","pc","in","Q","px"];function HPe(e){return BPe.includes(e)}var Jm="NaN";function GPe(e,t){return e*FPe[t]}class bs{static parse(t){var a,[,s,r]=(a=UPe.exec(t))!==null&&a!==void 0?a:[];return s==null?bs.NaN:new bs(parseFloat(s),r??"")}constructor(t,a){this.num=t,this.unit=a,this.num=t,this.unit=a,Fi(t)&&(this.unit=""),a!==""&&!zPe.test(a)&&(this.num=NaN,this.unit=""),HPe(a)&&(this.num=GPe(t,a),this.unit="px")}add(t){return this.unit!==t.unit?new bs(NaN,""):new bs(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new bs(NaN,""):new bs(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new bs(NaN,""):new bs(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new bs(NaN,""):new bs(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Fi(this.num)}}UK=bs;IPe(bs,"NaN",new UK(NaN,""));function FK(e){if(e==null||e.includes(Jm))return Jm;for(var t=e;t.includes("*")||t.includes("/");){var a,[,s,r,i]=(a=YU.exec(t))!==null&&a!==void 0?a:[],o=bs.parse(s??""),l=bs.parse(i??""),c=r==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return Jm;t=t.replace(YU,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,[,u,f,p]=(d=QU.exec(t))!==null&&d!==void 0?d:[],x=bs.parse(u??""),v=bs.parse(p??""),N=f==="+"?x.add(v):x.subtract(v);if(N.isNaN())return Jm;t=t.replace(QU,N.toString())}return t}var KU=/\(([^()]*)\)/;function WPe(e){for(var t=e,a;(a=KU.exec(t))!=null;){var[,s]=a;t=t.replace(KU,FK(s))}return t}function qPe(e){var t=e.replace(/\s+/g,"");return t=WPe(t),t=FK(t),t}function VPe(e){try{return qPe(e)}catch{return Jm}}function h2(e){var t=VPe(e.slice(5,-1));return t===Jm?"":t}var YPe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],QPe=["dx","dy","angle","className","breakAll"];function KE(){return KE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},KE.apply(null,arguments)}function XU(e,t){if(e==null)return{};var a,s,r=KPe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function KPe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var BK=/[ \f\n\r\t\v\u2028\u2029]+/,HK=e=>{var{children:t,breakAll:a,style:s}=e;try{var r=[];ra(t)||(a?r=t.toString().split(""):r=t.toString().split(BK));var i=r.map(l=>({word:l,width:qg(l,s).width})),o=a?0:qg("",s).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}};function XPe(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var GK=(e,t,a,s)=>e.reduce((r,i)=>{var{word:o,width:l}=i,c=r[r.length-1];if(c&&l!=null&&(t==null||s||c.width+l+a<Number(t)))c.words.push(o),c.width+=l+a;else{var d={words:[o],width:l};r.push(d)}return r},[]),WK=e=>e.reduce((t,a)=>t.width>a.width?t:a),ZPe="",ZU=(e,t,a,s,r,i,o,l)=>{var c=e.slice(0,t),d=HK({breakAll:a,style:s,children:c+ZPe});if(!d)return[!1,[]];var u=GK(d.wordsWithComputedWidth,i,o,l),f=u.length>r||WK(u).width>Number(i);return[f,u]},JPe=(e,t,a,s,r)=>{var{maxLines:i,children:o,style:l,breakAll:c}=e,d=Dt(i),u=String(o),f=GK(t,s,a,r);if(!d||r)return f;var p=f.length>i||WK(f).width>Number(s);if(!p)return f;for(var x=0,v=u.length-1,N=0,b;x<=v&&N<=u.length-1;){var C=Math.floor((x+v)/2),w=C-1,[S,E]=ZU(u,w,c,l,i,s,a,r),[k]=ZU(u,C,c,l,i,s,a,r);if(!S&&!k&&(x=C+1),S&&k&&(v=C-1),!S&&k){b=E;break}N++}return b||f},JU=e=>{var t=ra(e)?[]:e.toString().split(BK);return[{words:t,width:void 0}]},e4e=e=>{var{width:t,scaleToFit:a,children:s,style:r,breakAll:i,maxLines:o}=e;if((t||a)&&!hj.isSsr){var l,c,d=HK({breakAll:i,children:s,style:r});if(d){var{wordsWithComputedWidth:u,spaceWidth:f}=d;l=u,c=f}else return JU(s);return JPe({breakAll:i,children:s,maxLines:o,style:r},l,c,t,!!a)}return JU(s)},qK="#808080",t4e={angle:0,breakAll:!1,capHeight:"0.71em",fill:qK,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},Tj=h.forwardRef((e,t)=>{var a=za(e,t4e),{x:s,y:r,lineHeight:i,capHeight:o,fill:l,scaleToFit:c,textAnchor:d,verticalAnchor:u}=a,f=XU(a,YPe),p=h.useMemo(()=>e4e({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:c,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,c,f.style,f.width]),{dx:x,dy:v,angle:N,className:b,breakAll:C}=f,w=XU(f,QPe);if(!Po(s)||!Po(r)||p.length===0)return null;var S=Number(s)+(Dt(x)?x:0),E=Number(r)+(Dt(v)?v:0);if(!ca(S)||!ca(E))return null;var k;switch(u){case"start":k=h2("calc(".concat(o,")"));break;case"middle":k=h2("calc(".concat((p.length-1)/2," * -").concat(i," + (").concat(o," / 2))"));break;default:k=h2("calc(".concat(p.length-1," * -").concat(i,")"));break}var A=[];if(c){var T=p[0].width,{width:_}=f;A.push("scale(".concat(Dt(_)&&Dt(T)?_/T:1,")"))}return N&&A.push("rotate(".concat(N,", ").concat(S,", ").concat(E,")")),A.length&&(w.transform=A.join(" ")),h.createElement("text",KE({},Us(w),{ref:t,x:S,y:E,className:kt("recharts-text",b),textAnchor:d,fill:l.includes("url")?qK:l}),p.map((I,R)=>{var U=I.words.join(C?"":" ");return h.createElement("tspan",{x:S,dy:R===0?k:i,key:"".concat(U,"-").concat(R)},U)}))});Tj.displayName="Text";var n4e=["labelRef"],a4e=["content"];function eF(e,t){if(e==null)return{};var a,s,r=s4e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function s4e(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function tF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function ja(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?tF(Object(a),!0).forEach(function(s){r4e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):tF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function r4e(e,t,a){return(t=i4e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i4e(e){var t=o4e(e,"string");return typeof t=="symbol"?t:t+""}function o4e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pl(){return pl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},pl.apply(null,arguments)}var VK=h.createContext(null),l4e=e=>{var{x:t,y:a,upperWidth:s,lowerWidth:r,width:i,height:o,children:l}=e,c=h.useMemo(()=>({x:t,y:a,upperWidth:s,lowerWidth:r,width:i,height:o}),[t,a,s,r,i,o]);return h.createElement(VK.Provider,{value:c},l)},YK=()=>{var e=h.useContext(VK),t=cj();return e||VY(t)},c4e=h.createContext(null),d4e=()=>{var e=h.useContext(c4e),t=Mt(zQ);return e||t},u4e=e=>{var{value:t,formatter:a}=e,s=ra(e.children)?t:e.children;return typeof a=="function"?a(s):s},Y4=e=>e!=null&&typeof e=="function",m4e=(e,t)=>{var a=cs(t-e),s=Math.min(Math.abs(t-e),360);return a*s},f4e=(e,t,a,s,r)=>{var{offset:i,className:o}=e,{cx:l,cy:c,innerRadius:d,outerRadius:u,startAngle:f,endAngle:p,clockWise:x}=r,v=(d+u)/2,N=m4e(f,p),b=N>=0?1:-1,C,w;switch(t){case"insideStart":C=f+b*i,w=x;break;case"insideEnd":C=p-b*i,w=!x;break;case"end":C=p+b*i,w=x;break;default:throw new Error("Unsupported position ".concat(t))}w=N<=0?w:!w;var S=Oa(l,c,v,C),E=Oa(l,c,v,C+(w?1:-1)*359),k="M".concat(S.x,",").concat(S.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(w?0:1,`,
    `).concat(E.x,",").concat(E.y),A=ra(e.id)?Np("recharts-radial-line-"):e.id;return h.createElement("text",pl({},s,{dominantBaseline:"central",className:kt("recharts-radial-bar-label",o)}),h.createElement("defs",null,h.createElement("path",{id:A,d:k})),h.createElement("textPath",{xlinkHref:"#".concat(A)},a))},h4e=(e,t,a)=>{var{cx:s,cy:r,innerRadius:i,outerRadius:o,startAngle:l,endAngle:c}=e,d=(l+c)/2;if(a==="outside"){var{x:u,y:f}=Oa(s,r,o+t,d);return{x:u,y:f,textAnchor:u>=s?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:s,y:r,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:s,y:r,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:s,y:r,textAnchor:"middle",verticalAnchor:"end"};var p=(i+o)/2,{x,y:v}=Oa(s,r,p,d);return{x,y:v,textAnchor:"middle",verticalAnchor:"middle"}},XE=e=>"cx"in e&&Dt(e.cx),g4e=(e,t)=>{var{parentViewBox:a,offset:s,position:r}=e,i;a!=null&&!XE(a)&&(i=a);var{x:o,y:l,upperWidth:c,lowerWidth:d,height:u}=t,f=o,p=o+(c-d)/2,x=(f+p)/2,v=(c+d)/2,N=f+c/2,b=u>=0?1:-1,C=b*s,w=b>0?"end":"start",S=b>0?"start":"end",E=c>=0?1:-1,k=E*s,A=E>0?"end":"start",T=E>0?"start":"end";if(r==="top"){var _={x:f+c/2,y:l-C,textAnchor:"middle",verticalAnchor:w};return ja(ja({},_),i?{height:Math.max(l-i.y,0),width:c}:{})}if(r==="bottom"){var I={x:p+d/2,y:l+u+C,textAnchor:"middle",verticalAnchor:S};return ja(ja({},I),i?{height:Math.max(i.y+i.height-(l+u),0),width:d}:{})}if(r==="left"){var R={x:x-k,y:l+u/2,textAnchor:A,verticalAnchor:"middle"};return ja(ja({},R),i?{width:Math.max(R.x-i.x,0),height:u}:{})}if(r==="right"){var U={x:x+v+k,y:l+u/2,textAnchor:T,verticalAnchor:"middle"};return ja(ja({},U),i?{width:Math.max(i.x+i.width-U.x,0),height:u}:{})}var D=i?{width:v,height:u}:{};return r==="insideLeft"?ja({x:x+k,y:l+u/2,textAnchor:T,verticalAnchor:"middle"},D):r==="insideRight"?ja({x:x+v-k,y:l+u/2,textAnchor:A,verticalAnchor:"middle"},D):r==="insideTop"?ja({x:f+c/2,y:l+C,textAnchor:"middle",verticalAnchor:S},D):r==="insideBottom"?ja({x:p+d/2,y:l+u-C,textAnchor:"middle",verticalAnchor:w},D):r==="insideTopLeft"?ja({x:f+k,y:l+C,textAnchor:T,verticalAnchor:S},D):r==="insideTopRight"?ja({x:f+c-k,y:l+C,textAnchor:A,verticalAnchor:S},D):r==="insideBottomLeft"?ja({x:p+k,y:l+u-C,textAnchor:T,verticalAnchor:w},D):r==="insideBottomRight"?ja({x:p+d-k,y:l+u-C,textAnchor:A,verticalAnchor:w},D):r&&typeof r=="object"&&(Dt(r.x)||Ml(r.x))&&(Dt(r.y)||Ml(r.y))?ja({x:o+ks(r.x,v),y:l+ks(r.y,u),textAnchor:"end",verticalAnchor:"end"},D):ja({x:N,y:l+u/2,textAnchor:"middle",verticalAnchor:"middle"},D)},p4e={angle:0,offset:5,zIndex:Ma.label,position:"middle",textBreakAll:!1};function Ic(e){var t=za(e,p4e),{viewBox:a,position:s,value:r,children:i,content:o,className:l="",textBreakAll:c,labelRef:d}=t,u=d4e(),f=YK(),p=s==="center"?f:u??f,x,v,N;if(a==null?x=p:XE(a)?x=a:x=VY(a),!x||ra(r)&&ra(i)&&!h.isValidElement(o)&&typeof o!="function")return null;var b=ja(ja({},t),{},{viewBox:x});if(h.isValidElement(o)){var{labelRef:C}=b,w=eF(b,n4e);return h.cloneElement(o,w)}if(typeof o=="function"){var{content:S}=b,E=eF(b,a4e);if(v=h.createElement(o,E),h.isValidElement(v))return v}else v=u4e(t);var k=Us(t);if(XE(x)){if(s==="insideStart"||s==="insideEnd"||s==="end")return f4e(t,s,v,k,x);N=h4e(x,t.offset,t.position)}else N=g4e(t,x);return h.createElement(hr,{zIndex:t.zIndex},h.createElement(Tj,pl({ref:d,className:kt("recharts-label",l)},k,N,{textAnchor:XPe(k.textAnchor)?k.textAnchor:N.textAnchor,breakAll:c}),v))}Ic.displayName="Label";var x4e=(e,t,a)=>{if(!e)return null;var s={viewBox:t,labelRef:a};return e===!0?h.createElement(Ic,pl({key:"label-implicit"},s)):Po(e)?h.createElement(Ic,pl({key:"label-implicit",value:e},s)):h.isValidElement(e)?e.type===Ic?h.cloneElement(e,ja({key:"label-implicit"},s)):h.createElement(Ic,pl({key:"label-implicit",content:e},s)):Y4(e)?h.createElement(Ic,pl({key:"label-implicit",content:e},s)):e&&typeof e=="object"?h.createElement(Ic,pl({},e,{key:"label-implicit"},s)):null};function y4e(e){var{label:t,labelRef:a}=e,s=YK();return x4e(t,s,a)||null}var g2={},p2={},nF;function b4e(){return nF||(nF=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a[a.length-1]}e.last=t})(p2)),p2}var x2={},aF;function v4e(){return aF||(aF=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return Array.isArray(a)?a:Array.from(a)}e.toArray=t})(x2)),x2}var sF;function w4e(){return sF||(sF=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=b4e(),a=v4e(),s=HP();function r(i){if(s.isArrayLike(i))return t.last(a.toArray(i))}e.last=r})(g2)),g2}var y2,rF;function N4e(){return rF||(rF=1,y2=w4e().last),y2}var j4e=N4e();const C4e=Hi(j4e);var S4e=["valueAccessor"],_4e=["dataKey","clockWise","id","textBreakAll","zIndex"];function Jv(){return Jv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Jv.apply(null,arguments)}function iF(e,t){if(e==null)return{};var a,s,r=A4e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function A4e(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var T4e=e=>Array.isArray(e.value)?C4e(e.value):e.value,QK=h.createContext(void 0),KK=QK.Provider,XK=h.createContext(void 0),E4e=XK.Provider;function k4e(){return h.useContext(QK)}function L4e(){return h.useContext(XK)}function Gb(e){var{valueAccessor:t=T4e}=e,a=iF(e,S4e),{dataKey:s,clockWise:r,id:i,textBreakAll:o,zIndex:l}=a,c=iF(a,_4e),d=k4e(),u=L4e(),f=d||u;return!f||!f.length?null:h.createElement(hr,{zIndex:l??Ma.label},h.createElement(ds,{className:"recharts-label-list"},f.map((p,x)=>{var v,N=ra(s)?t(p,x):Rn(p&&p.payload,s),b=ra(i)?{}:{id:"".concat(i,"-").concat(x)};return h.createElement(Ic,Jv({key:"label-".concat(x)},Us(p),c,b,{fill:(v=a.fill)!==null&&v!==void 0?v:p.fill,parentViewBox:p.parentViewBox,value:N,textBreakAll:o,viewBox:p.viewBox,index:x,zIndex:0}))})))}Gb.displayName="LabelList";function Q4(e){var{label:t}=e;return t?t===!0?h.createElement(Gb,{key:"labelList-implicit"}):h.isValidElement(t)||Y4(t)?h.createElement(Gb,{key:"labelList-implicit",content:t}):typeof t=="object"?h.createElement(Gb,Jv({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function ZE(){return ZE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},ZE.apply(null,arguments)}var ZK=e=>{var{cx:t,cy:a,r:s,className:r}=e,i=kt("recharts-dot",r);return Dt(t)&&Dt(a)&&Dt(s)?h.createElement("circle",ZE({},Or(e),BP(e),{className:i,cx:t,cy:a,r:s})):null},JK=e=>e.graphicalItems.polarItems,P4e=at([oa,Gx],x4),Ej=at([JK,ua,P4e],y4),D4e=at([Ej],b4),kj=at([D4e,gj],v4),O4e=at([kj,ua,Ej],N4);at([kj,ua,Ej],(e,t,a)=>a.length>0?e.flatMap(s=>a.flatMap(r=>{var i,o=Rn(s,(i=t.dataKey)!==null&&i!==void 0?i:r.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(s=>({value:Rn(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})));var oF=()=>{},M4e=at([kj,ua,Ej,jj,oa],_4),I4e=at([ua,C4,S4,oF,M4e,oF,hn,oa],A4),eX=at([ua,hn,kj,O4e,Hx,oa,I4e],T4),$4e=at([eX,ua,nh],L4);at([ua,eX,$4e,oa],D4);var R4e={radiusAxis:{},angleAxis:{}},tX=fr({name:"polarAxis",initialState:R4e,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:zqe,removeRadiusAxis:Uqe,addAngleAxis:Fqe,removeAngleAxis:Bqe}=tX.actions,z4e=tX.reducer;function lF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function cF(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?lF(Object(a),!0).forEach(function(s){U4e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):lF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function U4e(e,t,a){return(t=F4e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function F4e(e){var t=B4e(e,"string");return typeof t=="symbol"?t:t+""}function B4e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var H4e=(e,t)=>t,K4=at([JK,H4e],(e,t)=>e.filter(a=>a.type==="pie").find(a=>a.id===t)),G4e=[],X4=(e,t,a)=>a?.length===0?G4e:a,nX=at([gj,K4,X4],(e,t,a)=>{var{chartData:s}=e;if(t!=null){var r;if(t?.data!=null&&t.data.length>0?r=t.data:r=s,(!r||!r.length)&&a!=null&&(r=a.map(i=>cF(cF({},t.presentationProps),i.props))),r!=null)return r}}),W4e=at([nX,K4,X4],(e,t,a)=>{if(!(e==null||t==null))return e.map((s,r)=>{var i,o=Rn(s,t.nameKey,t.name),l;return a!=null&&(i=a[r])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?l=a[r].props.fill:typeof s=="object"&&s!=null&&"fill"in s?l=s.fill:l=t.fill,{value:Kf(o,t.dataKey),color:l,payload:s,type:t.legendType}})}),q4e=at([nX,K4,X4,Ja],(e,t,a,s)=>{if(!(t==null||e==null))return WDe({offset:s,pieSettings:t,displayedData:e,cells:a})}),dF=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",uF=null,b2=null,aX=e=>{if(e===uF&&Array.isArray(b2))return b2;var t=[];return h.Children.forEach(e,a=>{ra(a)||(Bk.isFragment(a)?t=t.concat(aX(a.props.children)):t.push(a))}),b2=t,uF=e,t};function Z4(e,t){var a=[],s=[];return Array.isArray(t)?s=t.map(r=>dF(r)):s=[dF(t)],aX(e).forEach(r=>{var i=Tu(r,"type.displayName")||Tu(r,"type.name");i&&s.indexOf(i)!==-1&&a.push(r)}),a}var sX=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,v2={},mF;function V4e(){return mF||(mF=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){if(typeof a!="object"||a==null)return!1;if(Object.getPrototypeOf(a)===null)return!0;if(Object.prototype.toString.call(a)!=="[object Object]"){const r=a[Symbol.toStringTag];return r==null||!Object.getOwnPropertyDescriptor(a,Symbol.toStringTag)?.writable?!1:a.toString()===`[object ${r}]`}let s=a;for(;Object.getPrototypeOf(s)!==null;)s=Object.getPrototypeOf(s);return Object.getPrototypeOf(a)===s}e.isPlainObject=t})(v2)),v2}var w2,fF;function Y4e(){return fF||(fF=1,w2=V4e().isPlainObject),w2}var Q4e=Y4e();const K4e=Hi(Q4e);var hF,gF,pF,xF,yF;function bF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function vF(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?bF(Object(a),!0).forEach(function(s){X4e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):bF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function X4e(e,t,a){return(t=Z4e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Z4e(e){var t=J4e(e,"string");return typeof t=="symbol"?t:t+""}function J4e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ew(){return ew=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},ew.apply(null,arguments)}function ug(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var wF=(e,t,a,s,r)=>{var i=a-s,o;return o=pa(hF||(hF=ug(["M ",",",""])),e,t),o+=pa(gF||(gF=ug(["L ",",",""])),e+a,t),o+=pa(pF||(pF=ug(["L ",",",""])),e+a-i/2,t+r),o+=pa(xF||(xF=ug(["L ",",",""])),e+a-i/2-s,t+r),o+=pa(yF||(yF=ug(["L ",","," Z"])),e,t),o},eDe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},tDe=e=>{var t=za(e,eDe),{x:a,y:s,upperWidth:r,lowerWidth:i,height:o,className:l}=t,{animationEasing:c,animationDuration:d,animationBegin:u,isUpdateAnimationActive:f}=t,p=h.useRef(null),[x,v]=h.useState(-1),N=h.useRef(r),b=h.useRef(i),C=h.useRef(o),w=h.useRef(a),S=h.useRef(s),E=Bx(e,"trapezoid-");if(h.useEffect(()=>{if(p.current&&p.current.getTotalLength)try{var W=p.current.getTotalLength();W&&v(W)}catch{}},[]),a!==+a||s!==+s||r!==+r||i!==+i||o!==+o||r===0&&i===0||o===0)return null;var k=kt("recharts-trapezoid",l);if(!f)return h.createElement("g",null,h.createElement("path",ew({},Us(t),{className:k,d:wF(a,s,r,i,o)})));var A=N.current,T=b.current,_=C.current,I=w.current,R=S.current,U="0px ".concat(x===-1?1:x,"px"),D="".concat(x,"px 0px"),M=oQ(["strokeDasharray"],d,c);return h.createElement(Fx,{animationId:E,key:E,canBegin:x>0,duration:d,easing:c,isActive:f,begin:u},W=>{var X=na(A,r,W),z=na(T,i,W),Q=na(_,o,W),de=na(I,a,W),Y=na(R,s,W);p.current&&(N.current=X,b.current=z,C.current=Q,w.current=de,S.current=Y);var se=W>0?{transition:M,strokeDasharray:D}:{strokeDasharray:U};return h.createElement("path",ew({},Us(t),{className:k,d:wF(de,Y,X,z,Q),ref:p,style:vF(vF({},se),t.style)}))})},nDe=["option","shapeType","activeClassName"];function aDe(e,t){if(e==null)return{};var a,s,r=sDe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function sDe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function NF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function tw(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?NF(Object(a),!0).forEach(function(s){rDe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):NF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function rDe(e,t,a){return(t=iDe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function iDe(e){var t=oDe(e,"string");return typeof t=="symbol"?t:t+""}function oDe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lDe(e,t){return tw(tw({},t),e)}function cDe(e,t){return e==="symbols"}function jF(e){var{shapeType:t,elementProps:a}=e;switch(t){case"rectangle":return h.createElement(uQ,a);case"trapezoid":return h.createElement(tDe,a);case"sector":return h.createElement(gQ,a);case"symbols":if(cDe(t))return h.createElement(FP,a);break;case"curve":return h.createElement(r4,a);default:return null}}function dDe(e){return h.isValidElement(e)?e.props:e}function J4(e){var{option:t,shapeType:a,activeClassName:s="recharts-active-shape"}=e,r=aDe(e,nDe),i;if(h.isValidElement(t))i=h.cloneElement(t,tw(tw({},r),dDe(t)));else if(typeof t=="function")i=t(r,r.index);else if(K4e(t)&&typeof t!="boolean"){var o=lDe(t,r);i=h.createElement(jF,{shapeType:a,elementProps:o})}else{var l=r;i=h.createElement(jF,{shapeType:a,elementProps:l})}return r.isActive?h.createElement(ds,{className:s},i):i}var eD=(e,t,a)=>{var s=qn();return(r,i)=>o=>{e?.(r,i,o),s(pK({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition,activeGraphicalItemId:a}))}},tD=e=>{var t=qn();return(a,s)=>r=>{e?.(a,s,r),t(vke())}},nD=(e,t,a)=>{var s=qn();return(r,i)=>o=>{e?.(r,i,o),s(wke({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition,activeGraphicalItemId:a}))}};function aD(e){var{tooltipEntrySettings:t}=e,a=qn(),s=Os(),r=h.useRef(null);return h.useLayoutEffect(()=>{s||(r.current===null?a(pke(t)):r.current!==t&&a(xke({prev:r.current,next:t})),r.current=t)},[t,a,s]),h.useLayoutEffect(()=>()=>{r.current&&(a(yke(r.current)),r.current=null)},[a]),null}function rX(e){var{legendPayload:t}=e,a=qn(),s=Os(),r=h.useRef(null);return h.useLayoutEffect(()=>{s||(r.current===null?a(nQ(t)):r.current!==t&&a(aQ({prev:r.current,next:t})),r.current=t)},[a,s,t]),h.useLayoutEffect(()=>()=>{r.current&&(a(sQ(r.current)),r.current=null)},[a]),null}function uDe(e){var{legendPayload:t}=e,a=qn(),s=Mt(hn),r=h.useRef(null);return h.useLayoutEffect(()=>{s!=="centric"&&s!=="radial"||(r.current===null?a(nQ(t)):r.current!==t&&a(aQ({prev:r.current,next:t})),r.current=t)},[a,s,t]),h.useLayoutEffect(()=>()=>{r.current&&(a(sQ(r.current)),r.current=null)},[a]),null}var N2,mDe=()=>{var[e]=h.useState(()=>Np("uid-"));return e},fDe=(N2=pu.useId)!==null&&N2!==void 0?N2:mDe;function hDe(e,t){var a=fDe();return t||(e?"".concat(e,"-").concat(a):a)}var gDe=h.createContext(void 0),sD=e=>{var{id:t,type:a,children:s}=e,r=hDe("recharts-".concat(a),t);return h.createElement(gDe.Provider,{value:r},s(r))},pDe={cartesianItems:[],polarItems:[]},iX=fr({name:"graphicalItems",initialState:pDe,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:ta()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:a,next:s}=t.payload,r=$i(e).cartesianItems.indexOf(a);r>-1&&(e.cartesianItems[r]=s)},prepare:ta()},removeCartesianGraphicalItem:{reducer(e,t){var a=$i(e).cartesianItems.indexOf(t.payload);a>-1&&e.cartesianItems.splice(a,1)},prepare:ta()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:ta()},removePolarGraphicalItem:{reducer(e,t){var a=$i(e).polarItems.indexOf(t.payload);a>-1&&e.polarItems.splice(a,1)},prepare:ta()}}}),{addCartesianGraphicalItem:xDe,replaceCartesianGraphicalItem:yDe,removeCartesianGraphicalItem:bDe,addPolarGraphicalItem:vDe,removePolarGraphicalItem:wDe}=iX.actions,NDe=iX.reducer,jDe=e=>{var t=qn(),a=h.useRef(null);return h.useLayoutEffect(()=>{a.current===null?t(xDe(e)):a.current!==e&&t(yDe({prev:a.current,next:e})),a.current=e},[t,e]),h.useLayoutEffect(()=>()=>{a.current&&(t(bDe(a.current)),a.current=null)},[t]),null},oX=h.memo(jDe);function CDe(e){var t=qn();return h.useLayoutEffect(()=>(t(vDe(e)),()=>{t(wDe(e))}),[t,e]),null}var SDe=["key"],_De=["onMouseEnter","onClick","onMouseLeave"],ADe=["id"],TDe=["id"];function CF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function xa(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?CF(Object(a),!0).forEach(function(s){EDe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):CF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function EDe(e,t,a){return(t=kDe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function kDe(e){var t=LDe(e,"string");return typeof t=="symbol"?t:t+""}function LDe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function id(){return id=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},id.apply(null,arguments)}function Lj(e,t){if(e==null)return{};var a,s,r=PDe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function PDe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function DDe(e){var t=h.useMemo(()=>Z4(e.children,Aj),[e.children]),a=Mt(s=>W4e(s,e.id,t));return a==null?null:h.createElement(uDe,{legendPayload:a})}var ODe=h.memo(e=>{var{dataKey:t,nameKey:a,sectors:s,stroke:r,strokeWidth:i,fill:o,name:l,hide:c,tooltipType:d,id:u}=e,f={dataDefinedOnItem:s.map(p=>p.tooltipPayload),positions:s.map(p=>p.tooltipPosition),settings:{stroke:r,strokeWidth:i,fill:o,dataKey:t,nameKey:a,name:Kf(l,t),hide:c,type:d,color:o,unit:"",graphicalItemId:u}};return h.createElement(aD,{tooltipEntrySettings:f})}),MDe=(e,t)=>e>t?"start":e<t?"end":"middle",IDe=(e,t,a)=>ks(typeof t=="function"?t(e):t,a,a*.8),$De=(e,t,a)=>{var{top:s,left:r,width:i,height:o}=t,l=mQ(i,o),c=r+ks(e.cx,i,i/2),d=s+ks(e.cy,o,o/2),u=ks(e.innerRadius,l,0),f=IDe(a,e.outerRadius,l),p=e.maxRadius||Math.sqrt(i*i+o*o)/2;return{cx:c,cy:d,innerRadius:u,outerRadius:f,maxRadius:p}},RDe=(e,t)=>{var a=cs(t-e),s=Math.min(Math.abs(t-e),360);return a*s};function zDe(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var UDe=(e,t)=>{if(h.isValidElement(e))return h.cloneElement(e,t);if(typeof e=="function")return e(t);var a=kt("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:s}=t,r=Lj(t,SDe);return h.createElement(r4,id({},r,{type:"linear",className:a}))},FDe=(e,t,a)=>{if(h.isValidElement(e))return h.cloneElement(e,t);var s=a;if(typeof e=="function"&&(s=e(t),h.isValidElement(s)))return s;var r=kt("recharts-pie-label-text",zDe(e));return h.createElement(Tj,id({},t,{alignmentBaseline:"middle",className:r}),s)};function BDe(e){var{sectors:t,props:a,showLabels:s}=e,{label:r,labelLine:i,dataKey:o}=a;if(!s||!r||!t)return null;var l=Or(a),c=Au(r),d=Au(i),u=typeof r=="object"&&"offsetRadius"in r&&typeof r.offsetRadius=="number"&&r.offsetRadius||20,f=t.map((p,x)=>{var v=(p.startAngle+p.endAngle)/2,N=Oa(p.cx,p.cy,p.outerRadius+u,v),b=xa(xa(xa(xa({},l),p),{},{stroke:"none"},c),{},{index:x,textAnchor:MDe(N.x,p.cx)},N),C=xa(xa(xa(xa({},l),p),{},{fill:"none",stroke:p.fill},d),{},{index:x,points:[Oa(p.cx,p.cy,p.outerRadius,v),N],key:"line"});return h.createElement(hr,{zIndex:Ma.label,key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(x)},h.createElement(ds,null,i&&UDe(i,C),FDe(r,b,Rn(p,o))))});return h.createElement(ds,{className:"recharts-pie-labels"},f)}function HDe(e){var{sectors:t,props:a,showLabels:s}=e,{label:r}=a;return typeof r=="object"&&r!=null&&"position"in r?h.createElement(Q4,{label:r}):h.createElement(BDe,{sectors:t,props:a,showLabels:s})}function GDe(e){var{sectors:t,activeShape:a,inactiveShape:s,allOtherPieProps:r,shape:i,id:o}=e,l=Mt(rd),c=Mt(B4),d=Mt(iLe),{onMouseEnter:u,onClick:f,onMouseLeave:p}=r,x=Lj(r,_De),v=eD(u,r.dataKey,o),N=tD(p),b=nD(f,r.dataKey,o);return t==null||t.length===0?null:h.createElement(h.Fragment,null,t.map((C,w)=>{if(C?.startAngle===0&&C?.endAngle===0&&t.length!==1)return null;var S=d==null||d===o,E=String(w)===l&&(c==null||r.dataKey===c)&&S,k=l?s:null,A=a&&E?a:k,T=xa(xa({},C),{},{stroke:C.stroke,tabIndex:-1,[BY]:w,[HY]:o});return h.createElement(ds,id({key:"sector-".concat(C?.startAngle,"-").concat(C?.endAngle,"-").concat(C.midAngle,"-").concat(w),tabIndex:-1,className:"recharts-pie-sector"},Mx(x,C,w),{onMouseEnter:v(C,w),onMouseLeave:N(C,w),onClick:b(C,w)}),h.createElement(J4,id({option:i??A,index:w,shapeType:"sector",isActive:E},T)))}))}function WDe(e){var t,{pieSettings:a,displayedData:s,cells:r,offset:i}=e,{cornerRadius:o,startAngle:l,endAngle:c,dataKey:d,nameKey:u,tooltipType:f}=a,p=Math.abs(a.minAngle),x=RDe(l,c),v=Math.abs(x),N=s.length<=1?0:(t=a.paddingAngle)!==null&&t!==void 0?t:0,b=s.filter(A=>Rn(A,d,0)!==0).length,C=(v>=360?b:b-1)*N,w=v-b*p-C,S=s.reduce((A,T)=>{var _=Rn(T,d,0);return A+(Dt(_)?_:0)},0),E;if(S>0){var k;E=s.map((A,T)=>{var _=Rn(A,d,0),I=Rn(A,u,T),R=$De(a,i,A),U=(Dt(_)?_:0)/S,D,M=xa(xa({},A),r&&r[T]&&r[T].props);T?D=k.endAngle+cs(x)*N*(_!==0?1:0):D=l;var W=D+cs(x)*((_!==0?p:0)+U*w),X=(D+W)/2,z=(R.innerRadius+R.outerRadius)/2,Q=[{name:I,value:_,payload:M,dataKey:d,type:f,graphicalItemId:a.id}],de=Oa(R.cx,R.cy,z,X);return k=xa(xa(xa(xa({},a.presentationProps),{},{percent:U,cornerRadius:typeof o=="string"?parseFloat(o):o,name:I,tooltipPayload:Q,midAngle:X,middleRadius:z,tooltipPosition:de},M),R),{},{value:_,dataKey:d,startAngle:D,endAngle:W,payload:M,paddingAngle:cs(x)*N}),k})}return E}function qDe(e){var{showLabels:t,sectors:a,children:s}=e,r=h.useMemo(()=>!t||!a?[]:a.map(i=>({value:i.value,payload:i.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:i.cx,cy:i.cy,innerRadius:i.innerRadius,outerRadius:i.outerRadius,startAngle:i.startAngle,endAngle:i.endAngle,clockWise:!1},fill:i.fill})),[a,t]);return h.createElement(E4e,{value:t?r:void 0},s)}function VDe(e){var{props:t,previousSectorsRef:a,id:s}=e,{sectors:r,isAnimationActive:i,animationBegin:o,animationDuration:l,animationEasing:c,activeShape:d,inactiveShape:u,onAnimationStart:f,onAnimationEnd:p}=t,x=Bx(t,"recharts-pie-"),v=a.current,[N,b]=h.useState(!1),C=h.useCallback(()=>{typeof p=="function"&&p(),b(!1)},[p]),w=h.useCallback(()=>{typeof f=="function"&&f(),b(!0)},[f]);return h.createElement(qDe,{showLabels:!N,sectors:r},h.createElement(Fx,{animationId:x,begin:o,duration:l,isActive:i,easing:c,onAnimationStart:w,onAnimationEnd:C,key:x},S=>{var E=[],k=r&&r[0],A=k?.startAngle;return r?.forEach((T,_)=>{var I=v&&v[_],R=_>0?Tu(T,"paddingAngle",0):0;if(I){var U=na(I.endAngle-I.startAngle,T.endAngle-T.startAngle,S),D=xa(xa({},T),{},{startAngle:A+R,endAngle:A+U+R});E.push(D),A=D.endAngle}else{var{endAngle:M,startAngle:W}=T,X=na(0,M-W,S),z=xa(xa({},T),{},{startAngle:A+R,endAngle:A+X+R});E.push(z),A=z.endAngle}}),a.current=E,h.createElement(ds,null,h.createElement(GDe,{sectors:E,activeShape:d,inactiveShape:u,allOtherPieProps:t,shape:t.shape,id:s}))}),h.createElement(HDe,{showLabels:!N,sectors:r,props:t}),t.children)}var YDe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Ma.area};function QDe(e){var{id:t}=e,a=Lj(e,ADe),{hide:s,className:r,rootTabIndex:i}=e,o=h.useMemo(()=>Z4(e.children,Aj),[e.children]),l=Mt(u=>q4e(u,t,o)),c=h.useRef(null),d=kt("recharts-pie",r);return s||l==null?(c.current=null,h.createElement(ds,{tabIndex:i,className:d})):h.createElement(hr,{zIndex:e.zIndex},h.createElement(ODe,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:l,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),h.createElement(ds,{tabIndex:i,className:d},h.createElement(VDe,{props:xa(xa({},a),{},{sectors:l}),previousSectorsRef:c,id:t})))}function lX(e){var t=za(e,YDe),{id:a}=t,s=Lj(t,TDe),r=Or(s);return h.createElement(sD,{id:a,type:"pie"},i=>h.createElement(h.Fragment,null,h.createElement(CDe,{type:"pie",id:i,data:s.data,dataKey:s.dataKey,hide:s.hide,angleAxisId:0,radiusAxisId:0,name:s.name,nameKey:s.nameKey,tooltipType:s.tooltipType,legendType:s.legendType,fill:s.fill,cx:s.cx,cy:s.cy,startAngle:s.startAngle,endAngle:s.endAngle,paddingAngle:s.paddingAngle,minAngle:s.minAngle,innerRadius:s.innerRadius,outerRadius:s.outerRadius,cornerRadius:s.cornerRadius,presentationProps:r,maxRadius:t.maxRadius}),h.createElement(DDe,id({},s,{id:i})),h.createElement(QDe,id({},s,{id:i}))))}lX.displayName="Pie";var KDe=["points"];function SF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function j2(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?SF(Object(a),!0).forEach(function(s){XDe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):SF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function XDe(e,t,a){return(t=ZDe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ZDe(e){var t=JDe(e,"string");return typeof t=="symbol"?t:t+""}function JDe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nw(){return nw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},nw.apply(null,arguments)}function eOe(e,t){if(e==null)return{};var a,s,r=tOe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function tOe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function nOe(e){var{option:t,dotProps:a,className:s}=e;if(h.isValidElement(t))return h.cloneElement(t,a);if(typeof t=="function")return t(a);var r=kt(s,typeof t!="boolean"?t.className:""),i=a??{},{points:o}=i,l=eOe(i,KDe);return h.createElement(ZK,nw({},l,{className:r}))}function aOe(e,t){return e==null?!1:t?!0:e.length===1}function sOe(e){var{points:t,dot:a,className:s,dotClassName:r,dataKey:i,baseProps:o,needClip:l,clipPathId:c,zIndex:d=Ma.scatter}=e;if(!aOe(t,a))return null;var u=sX(a),f=WCe(a),p=t.map((v,N)=>{var b,C,w=j2(j2(j2({r:3},o),f),{},{index:N,cx:(b=v.x)!==null&&b!==void 0?b:void 0,cy:(C=v.y)!==null&&C!==void 0?C:void 0,dataKey:i,value:v.value,payload:v.payload,points:t});return h.createElement(nOe,{key:"dot-".concat(N),option:a,dotProps:w,className:r})}),x={};return l&&c!=null&&(x.clipPath="url(#clipPath-".concat(u?"":"dots-").concat(c,")")),h.createElement(hr,{zIndex:d},h.createElement(ds,nw({className:s},x),p))}function _F(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function AF(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?_F(Object(a),!0).forEach(function(s){rOe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_F(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function rOe(e,t,a){return(t=iOe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function iOe(e){var t=oOe(e,"string");return typeof t=="symbol"?t:t+""}function oOe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cX=0,lOe={xAxis:{},yAxis:{},zAxis:{}},dX=fr({name:"cartesianAxis",initialState:lOe,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:ta()},replaceXAxis:{reducer(e,t){var{prev:a,next:s}=t.payload;e.xAxis[a.id]!==void 0&&(a.id!==s.id&&delete e.xAxis[a.id],e.xAxis[s.id]=s)},prepare:ta()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:ta()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:ta()},replaceYAxis:{reducer(e,t){var{prev:a,next:s}=t.payload;e.yAxis[a.id]!==void 0&&(a.id!==s.id&&delete e.yAxis[a.id],e.yAxis[s.id]=s)},prepare:ta()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:ta()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:ta()},replaceZAxis:{reducer(e,t){var{prev:a,next:s}=t.payload;e.zAxis[a.id]!==void 0&&(a.id!==s.id&&delete e.zAxis[a.id],e.zAxis[s.id]=s)},prepare:ta()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:ta()},updateYAxisWidth(e,t){var{id:a,width:s}=t.payload,r=e.yAxis[a];if(r){var i=r.widthHistory||[];if(i.length===3&&i[0]===i[2]&&s===i[1]&&s!==r.width&&Math.abs(s-i[0])<=1)return;var o=[...i,s].slice(-3);e.yAxis[a]=AF(AF({},e.yAxis[a]),{},{width:s,widthHistory:o})}}}}),{addXAxis:cOe,replaceXAxis:dOe,removeXAxis:uOe,addYAxis:mOe,replaceYAxis:fOe,removeYAxis:hOe,addZAxis:Hqe,replaceZAxis:Gqe,removeZAxis:Wqe,updateYAxisWidth:gOe}=dX.actions,pOe=dX.reducer,xOe=at([Ja],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),yOe=at([xOe,Yl,Ql],(e,t,a)=>{if(!(!e||t==null||a==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,a-e.top-e.bottom)}}),rD=()=>Mt(yOe),bOe=()=>Mt(uLe);function TF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function C2(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?TF(Object(a),!0).forEach(function(s){vOe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):TF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function vOe(e,t,a){return(t=wOe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function wOe(e){var t=NOe(e,"string");return typeof t=="symbol"?t:t+""}function NOe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jOe=e=>{var{point:t,childIndex:a,mainColor:s,activeDot:r,dataKey:i,clipPath:o}=e;if(r===!1||t.x==null||t.y==null)return null;var l={index:a,dataKey:i,cx:t.x,cy:t.y,r:4,fill:s??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},c=C2(C2(C2({},l),Au(r)),BP(r)),d;return h.isValidElement(r)?d=h.cloneElement(r,c):typeof r=="function"?d=r(c):d=h.createElement(ZK,c),h.createElement(ds,{className:"recharts-active-dot",clipPath:o},d)};function COe(e){var{points:t,mainColor:a,activeDot:s,itemDataKey:r,clipPath:i,zIndex:o=Ma.activeDot}=e,l=Mt(rd),c=bOe();if(t==null||c==null)return null;var d=t.find(u=>c.includes(u.payload));return ra(d)?null:h.createElement(hr,{zIndex:o},h.createElement(jOe,{point:d,childIndex:Number(l),mainColor:a,dataKey:r,activeDot:s,clipPath:i}))}var EF=(e,t,a)=>{var s=a??e;if(!ra(s))return ks(s,t,0)},SOe=(e,t,a)=>{var s={},r=e.filter(yj),i=e.filter(d=>d.stackId==null),o=r.reduce((d,u)=>(d[u.stackId]||(d[u.stackId]=[]),d[u.stackId].push(u),d),s),l=Object.entries(o).map(d=>{var[u,f]=d,p=f.map(v=>v.dataKey),x=EF(t,a,f[0].barSize);return{stackId:u,dataKeys:p,barSize:x}}),c=i.map(d=>{var u=[d.dataKey].filter(p=>p!=null),f=EF(t,a,d.barSize);return{stackId:void 0,dataKeys:u,barSize:f}});return[...l,...c]};function kF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Vy(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?kF(Object(a),!0).forEach(function(s){_Oe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):kF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function _Oe(e,t,a){return(t=AOe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function AOe(e){var t=TOe(e,"string");return typeof t=="symbol"?t:t+""}function TOe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EOe(e,t,a,s,r){var i=s.length;if(!(i<1)){var o=ks(e,a,0,!0),l,c=[];if(ca(s[0].barSize)){var d=!1,u=a/i,f=s.reduce((C,w)=>C+(w.barSize||0),0);f+=(i-1)*o,f>=a&&(f-=(i-1)*o,o=0),f>=a&&u>0&&(d=!0,u*=.9,f=i*u);var p=(a-f)/2>>0,x={offset:p-o,size:0};l=s.reduce((C,w)=>{var S,E={stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:x.offset+x.size+o,size:d?u:(S=w.barSize)!==null&&S!==void 0?S:0}},k=[...C,E];return x=k[k.length-1].position,k},c)}else{var v=ks(t,a,0,!0);a-2*v-(i-1)*o<=0&&(o=0);var N=(a-2*v-(i-1)*o)/i;N>1&&(N>>=0);var b=ca(r)?Math.min(N,r):N;l=s.reduce((C,w,S)=>[...C,{stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:v+(N+o)*S+(N-b)/2,size:b}}],c)}return l}}var kOe=(e,t,a,s,r,i,o)=>{var l=ra(o)?t:o,c=EOe(a,s,r!==i?r:i,e,l);return r!==i&&c!=null&&(c=c.map(d=>Vy(Vy({},d),{},{position:Vy(Vy({},d.position),{},{offset:d.position.offset-r/2})}))),c},LOe=(e,t)=>{var a=g4(t);if(!(!e||a==null||t==null)){var{stackId:s}=t;if(s!=null){var r=e[s];if(r){var{stackedData:i}=r;if(i)return i.find(o=>o.key===a)}}}};function POe(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&ca(e.zIndex)?e.zIndex:t}var uX=e=>{var{chartData:t}=e,a=qn(),s=Os();return h.useEffect(()=>s?()=>{}:(a(zU(t)),()=>{a(zU(void 0))}),[t,a,s]),null},LF={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},mX=fr({name:"brush",initialState:LF,reducers:{setBrushSettings(e,t){return t.payload==null?LF:t.payload}}}),{setBrushSettings:qqe}=mX.actions,DOe=mX.reducer;function OOe(e,t,a){return(t=MOe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function MOe(e){var t=IOe(e,"string");return typeof t=="symbol"?t:t+""}function IOe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class iD{static create(t){return new iD(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:a,position:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(s)switch(s){case"start":return this.scale(t);case"middle":{var r=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+r}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(a){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var a=this.range(),s=a[0],r=a[a.length-1];return s<=r?t>=s&&t<=r:t>=r&&t<=s}}OOe(iD,"EPS",1e-4);function $Oe(e){return(e%180+180)%180}var ROe=function(t){var{width:a,height:s}=t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=$Oe(r),o=i*Math.PI/180,l=Math.atan(s/a),c=o>l&&o<Math.PI-l?s/Math.sin(o):a/Math.cos(o);return Math.abs(c)},zOe={dots:[],areas:[],lines:[]},fX=fr({name:"referenceElements",initialState:zOe,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var a=$i(e).dots.findIndex(s=>s===t.payload);a!==-1&&e.dots.splice(a,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var a=$i(e).areas.findIndex(s=>s===t.payload);a!==-1&&e.areas.splice(a,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var a=$i(e).lines.findIndex(s=>s===t.payload);a!==-1&&e.lines.splice(a,1)}}}),{addDot:Vqe,removeDot:Yqe,addArea:Qqe,removeArea:Kqe,addLine:Xqe,removeLine:Zqe}=fX.actions,UOe=fX.reducer,FOe=h.createContext(void 0),BOe=e=>{var{children:t}=e,[a]=h.useState("".concat(Np("recharts"),"-clip")),s=rD();if(s==null)return null;var{x:r,y:i,width:o,height:l}=s;return h.createElement(FOe.Provider,{value:a},h.createElement("defs",null,h.createElement("clipPath",{id:a},h.createElement("rect",{x:r,y:i,height:l,width:o}))),t)};function hX(e,t){if(t<1)return[];if(t===1)return e;for(var a=[],s=0;s<e.length;s+=t){var r=e[s];r!==void 0&&a.push(r)}return a}function HOe(e,t,a){var s={width:e.width+t.width,height:e.height+t.height};return ROe(s,a)}function GOe(e,t,a){var s=a==="width",{x:r,y:i,width:o,height:l}=e;return t===1?{start:s?r:i,end:s?r+o:i+l}:{start:s?r+o:i+l,end:s?r:i}}function Pp(e,t,a,s,r){if(e*t<e*s||e*t>e*r)return!1;var i=a();return e*(t-e*i/2-s)>=0&&e*(t+e*i/2-r)<=0}function WOe(e,t){return hX(e,t+1)}function qOe(e,t,a,s,r){for(var i=(s||[]).slice(),{start:o,end:l}=t,c=0,d=1,u=o,f=function(){var v=s?.[c];if(v===void 0)return{v:hX(s,d)};var N=c,b,C=()=>(b===void 0&&(b=a(v,N)),b),w=v.coordinate,S=c===0||Pp(e,w,C,u,l);S||(c=0,u=o,d+=1),S&&(u=w+e*(C()/2+r),c+=d)},p;d<=i.length;)if(p=f(),p)return p.v;return[]}function VOe(e,t,a,s,r){var i=(s||[]).slice(),o=i.length;if(o===0)return[];for(var{start:l,end:c}=t,d=1;d<=o;d++){for(var u=(o-1)%d,f=l,p=!0,x=function(){var w=s[v],S=v,E,k=()=>(E===void 0&&(E=a(w,S)),E),A=w.coordinate,T=v===u||Pp(e,A,k,f,c);if(!T)return p=!1,1;T&&(f=A+e*(k()/2+r))},v=u;v<o&&!x();v+=d);if(p){for(var N=[],b=u;b<o;b+=d)N.push(s[b]);return N}}return[]}function PF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Ss(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?PF(Object(a),!0).forEach(function(s){YOe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):PF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function YOe(e,t,a){return(t=QOe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function QOe(e){var t=KOe(e,"string");return typeof t=="symbol"?t:t+""}function KOe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XOe(e,t,a,s,r){for(var i=(s||[]).slice(),o=i.length,{start:l}=t,{end:c}=t,d=function(p){var x=i[p],v,N=()=>(v===void 0&&(v=a(x,p)),v);if(p===o-1){var b=e*(x.coordinate+e*N()/2-c);i[p]=x=Ss(Ss({},x),{},{tickCoord:b>0?x.coordinate-b*e:x.coordinate})}else i[p]=x=Ss(Ss({},x),{},{tickCoord:x.coordinate});if(x.tickCoord!=null){var C=Pp(e,x.tickCoord,N,l,c);C&&(c=x.tickCoord-e*(N()/2+r),i[p]=Ss(Ss({},x),{},{isShow:!0}))}},u=o-1;u>=0;u--)d(u);return i}function ZOe(e,t,a,s,r,i){var o=(s||[]).slice(),l=o.length,{start:c,end:d}=t;if(i){var u=s[l-1],f=a(u,l-1),p=e*(u.coordinate+e*f/2-d);if(o[l-1]=u=Ss(Ss({},u),{},{tickCoord:p>0?u.coordinate-p*e:u.coordinate}),u.tickCoord!=null){var x=Pp(e,u.tickCoord,()=>f,c,d);x&&(d=u.tickCoord-e*(f/2+r),o[l-1]=Ss(Ss({},u),{},{isShow:!0}))}}for(var v=i?l-1:l,N=function(w){var S=o[w],E,k=()=>(E===void 0&&(E=a(S,w)),E);if(w===0){var A=e*(S.coordinate-e*k()/2-c);o[w]=S=Ss(Ss({},S),{},{tickCoord:A<0?S.coordinate-A*e:S.coordinate})}else o[w]=S=Ss(Ss({},S),{},{tickCoord:S.coordinate});if(S.tickCoord!=null){var T=Pp(e,S.tickCoord,k,c,d);T&&(c=S.tickCoord+e*(k()/2+r),o[w]=Ss(Ss({},S),{},{isShow:!0}))}},b=0;b<v;b++)N(b);return o}function oD(e,t,a){var{tick:s,ticks:r,viewBox:i,minTickGap:o,orientation:l,interval:c,tickFormatter:d,unit:u,angle:f}=e;if(!r||!r.length||!s)return[];if(Dt(c)||hj.isSsr){var p;return(p=WOe(r,Dt(c)?c:0))!==null&&p!==void 0?p:[]}var x=[],v=l==="top"||l==="bottom"?"width":"height",N=u&&v==="width"?qg(u,{fontSize:t,letterSpacing:a}):{width:0,height:0},b=(S,E)=>{var k=typeof d=="function"?d(S.value,E):S.value;return v==="width"?HOe(qg(k,{fontSize:t,letterSpacing:a}),N,f):qg(k,{fontSize:t,letterSpacing:a})[v]},C=r.length>=2?cs(r[1].coordinate-r[0].coordinate):1,w=GOe(i,C,v);return c==="equidistantPreserveStart"?qOe(C,w,b,r,o):c==="equidistantPreserveEnd"?VOe(C,w,b,r,o):(c==="preserveStart"||c==="preserveStartEnd"?x=ZOe(C,w,b,r,o,c==="preserveStartEnd"):x=XOe(C,w,b,r,o),x.filter(S=>S.isShow))}var JOe=e=>{var{ticks:t,label:a,labelGapWithTick:s=5,tickSize:r=0,tickMargin:i=0}=e,o=0;if(t){Array.from(t).forEach(u=>{if(u){var f=u.getBoundingClientRect();f.width>o&&(o=f.width)}});var l=a?a.getBoundingClientRect().width:0,c=r+i,d=o+c+l+(a?s:0);return Math.round(d)}return 0},e3e=["axisLine","width","height","className","hide","ticks","axisType"];function t3e(e,t){if(e==null)return{};var a,s,r=n3e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function n3e(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function Du(){return Du=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Du.apply(null,arguments)}function DF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Pa(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?DF(Object(a),!0).forEach(function(s){a3e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):DF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function a3e(e,t,a){return(t=s3e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s3e(e){var t=r3e(e,"string");return typeof t=="symbol"?t:t+""}function r3e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jl={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Ma.axis};function i3e(e){var{x:t,y:a,width:s,height:r,orientation:i,mirror:o,axisLine:l,otherSvgProps:c}=e;if(!l)return null;var d=Pa(Pa(Pa({},c),Or(l)),{},{fill:"none"});if(i==="top"||i==="bottom"){var u=+(i==="top"&&!o||i==="bottom"&&o);d=Pa(Pa({},d),{},{x1:t,y1:a+u*r,x2:t+s,y2:a+u*r})}else{var f=+(i==="left"&&!o||i==="right"&&o);d=Pa(Pa({},d),{},{x1:t+f*s,y1:a,x2:t+f*s,y2:a+r})}return h.createElement("line",Du({},d,{className:kt("recharts-cartesian-axis-line",Tu(l,"className"))}))}function o3e(e,t,a,s,r,i,o,l,c){var d,u,f,p,x,v,N=l?-1:1,b=e.tickSize||o,C=Dt(e.tickCoord)?e.tickCoord:e.coordinate;switch(i){case"top":d=u=e.coordinate,p=a+ +!l*r,f=p-N*b,v=f-N*c,x=C;break;case"left":f=p=e.coordinate,u=t+ +!l*s,d=u-N*b,x=d-N*c,v=C;break;case"right":f=p=e.coordinate,u=t+ +l*s,d=u+N*b,x=d+N*c,v=C;break;default:d=u=e.coordinate,p=a+ +l*r,f=p+N*b,v=f+N*c,x=C;break}return{line:{x1:d,y1:f,x2:u,y2:p},tick:{x,y:v}}}function l3e(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function c3e(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function d3e(e){var{option:t,tickProps:a,value:s}=e,r,i=kt(a.className,"recharts-cartesian-axis-tick-value");if(h.isValidElement(t))r=h.cloneElement(t,Pa(Pa({},a),{},{className:i}));else if(typeof t=="function")r=t(Pa(Pa({},a),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=kt(o,t?.className)),r=h.createElement(Tj,Du({},a,{className:o}),s)}return r}var u3e=h.forwardRef((e,t)=>{var{ticks:a=[],tick:s,tickLine:r,stroke:i,tickFormatter:o,unit:l,padding:c,tickTextProps:d,orientation:u,mirror:f,x:p,y:x,width:v,height:N,tickSize:b,tickMargin:C,fontSize:w,letterSpacing:S,getTicksConfig:E,events:k,axisType:A}=e,T=oD(Pa(Pa({},E),{},{ticks:a}),w,S),_=l3e(u,f),I=c3e(u,f),R=Or(E),U=Au(s),D={};typeof r=="object"&&(D=r);var M=Pa(Pa({},R),{},{fill:"none"},D),W=T.map(Q=>Pa({entry:Q},o3e(Q,p,x,v,N,u,b,f,C))),X=W.map(Q=>{var{entry:de,line:Y}=Q;return h.createElement(ds,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(de.value,"-").concat(de.coordinate,"-").concat(de.tickCoord)},r&&h.createElement("line",Du({},M,Y,{className:kt("recharts-cartesian-axis-tick-line",Tu(r,"className"))})))}),z=W.map((Q,de)=>{var{entry:Y,tick:se}=Q,J=Pa(Pa(Pa(Pa({textAnchor:_,verticalAnchor:I},R),{},{stroke:"none",fill:i},U),se),{},{index:de,payload:Y,visibleTicksCount:T.length,tickFormatter:o,padding:c},d);return h.createElement(ds,Du({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(Y.value,"-").concat(Y.coordinate,"-").concat(Y.tickCoord)},Mx(k,Y,de)),s&&h.createElement(d3e,{option:s,tickProps:J,value:"".concat(typeof o=="function"?o(Y.value,de):Y.value).concat(l||"")}))});return h.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(A,"-ticks")},z.length>0&&h.createElement(hr,{zIndex:Ma.label},h.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(A,"-tick-labels"),ref:t},z)),X.length>0&&h.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(A,"-tick-lines")},X))}),m3e=h.forwardRef((e,t)=>{var{axisLine:a,width:s,height:r,className:i,hide:o,ticks:l,axisType:c}=e,d=t3e(e,e3e),[u,f]=h.useState(""),[p,x]=h.useState(""),v=h.useRef(null);h.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var b;return JOe({ticks:v.current,label:(b=e.labelRef)===null||b===void 0?void 0:b.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var N=h.useCallback(b=>{if(b){var C=b.getElementsByClassName("recharts-cartesian-axis-tick-value");v.current=C;var w=C[0];if(w){var S=window.getComputedStyle(w),E=S.fontSize,k=S.letterSpacing;(E!==u||k!==p)&&(f(E),x(k))}}},[u,p]);return o||s!=null&&s<=0||r!=null&&r<=0?null:h.createElement(hr,{zIndex:e.zIndex},h.createElement(ds,{className:kt("recharts-cartesian-axis",i)},h.createElement(i3e,{x:e.x,y:e.y,width:s,height:r,orientation:e.orientation,mirror:e.mirror,axisLine:a,otherSvgProps:Or(e)}),h.createElement(u3e,{ref:N,axisType:c,events:d,fontSize:u,getTicksConfig:e,height:e.height,letterSpacing:p,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:l,unit:e.unit,width:e.width,x:e.x,y:e.y}),h.createElement(l4e,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},h.createElement(y4e,{label:e.label,labelRef:e.labelRef}),e.children)))}),lD=h.forwardRef((e,t)=>{var a=za(e,jl);return h.createElement(m3e,Du({},a,{ref:t}))});lD.displayName="CartesianAxis";var f3e=["x1","y1","x2","y2","key"],h3e=["offset"],g3e=["xAxisId","yAxisId"],p3e=["xAxisId","yAxisId"];function OF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function _s(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?OF(Object(a),!0).forEach(function(s){x3e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):OF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function x3e(e,t,a){return(t=y3e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function y3e(e){var t=b3e(e,"string");return typeof t=="symbol"?t:t+""}function b3e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function su(){return su=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},su.apply(null,arguments)}function aw(e,t){if(e==null)return{};var a,s,r=v3e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function v3e(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var w3e=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:a,x:s,y:r,width:i,height:o,ry:l}=e;return h.createElement("rect",{x:s,y:r,ry:l,width:i,height:o,stroke:"none",fill:t,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function gX(e){var{option:t,lineItemProps:a}=e,s;if(h.isValidElement(t))s=h.cloneElement(t,a);else if(typeof t=="function")s=t(a);else{var r,{x1:i,y1:o,x2:l,y2:c,key:d}=a,u=aw(a,f3e),f=(r=Or(u))!==null&&r!==void 0?r:{},{offset:p}=f,x=aw(f,h3e);s=h.createElement("line",su({},x,{x1:i,y1:o,x2:l,y2:c,fill:"none",key:d}))}return s}function N3e(e){var{x:t,width:a,horizontal:s=!0,horizontalPoints:r}=e;if(!s||!r||!r.length)return null;var{xAxisId:i,yAxisId:o}=e,l=aw(e,g3e),c=r.map((d,u)=>{var f=_s(_s({},l),{},{x1:t,y1:d,x2:t+a,y2:d,key:"line-".concat(u),index:u});return h.createElement(gX,{key:"line-".concat(u),option:s,lineItemProps:f})});return h.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function j3e(e){var{y:t,height:a,vertical:s=!0,verticalPoints:r}=e;if(!s||!r||!r.length)return null;var{xAxisId:i,yAxisId:o}=e,l=aw(e,p3e),c=r.map((d,u)=>{var f=_s(_s({},l),{},{x1:d,y1:t,x2:d,y2:t+a,key:"line-".concat(u),index:u});return h.createElement(gX,{option:s,lineItemProps:f,key:"line-".concat(u)})});return h.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function C3e(e){var{horizontalFill:t,fillOpacity:a,x:s,y:r,width:i,height:o,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length||l==null)return null;var d=l.map(f=>Math.round(f+r-r)).sort((f,p)=>f-p);r!==d[0]&&d.unshift(0);var u=d.map((f,p)=>{var x=!d[p+1],v=x?r+o-f:d[p+1]-f;if(v<=0)return null;var N=p%t.length;return h.createElement("rect",{key:"react-".concat(p),y:f,x:s,height:v,width:i,stroke:"none",fill:t[N],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return h.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function S3e(e){var{vertical:t=!0,verticalFill:a,fillOpacity:s,x:r,y:i,width:o,height:l,verticalPoints:c}=e;if(!t||!a||!a.length)return null;var d=c.map(f=>Math.round(f+r-r)).sort((f,p)=>f-p);r!==d[0]&&d.unshift(0);var u=d.map((f,p)=>{var x=!d[p+1],v=x?r+o-f:d[p+1]-f;if(v<=0)return null;var N=p%a.length;return h.createElement("rect",{key:"react-".concat(p),x:f,y:i,width:v,height:l,stroke:"none",fill:a[N],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return h.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var _3e=(e,t)=>{var{xAxis:a,width:s,height:r,offset:i}=e;return zY(oD(_s(_s(_s({},jl),a),{},{ticks:UY(a),viewBox:{x:0,y:0,width:s,height:r}})),i.left,i.left+i.width,t)},A3e=(e,t)=>{var{yAxis:a,width:s,height:r,offset:i}=e;return zY(oD(_s(_s(_s({},jl),a),{},{ticks:UY(a),viewBox:{x:0,y:0,width:s,height:r}})),i.top,i.top+i.height,t)},T3e={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Ma.grid};function JE(e){var t=t4(),a=n4(),s=YY(),r=_s(_s({},za(e,T3e)),{},{x:Dt(e.x)?e.x:s.left,y:Dt(e.y)?e.y:s.top,width:Dt(e.width)?e.width:s.width,height:Dt(e.height)?e.height:s.height}),{xAxisId:i,yAxisId:o,x:l,y:c,width:d,height:u,syncWithTicks:f,horizontalValues:p,verticalValues:x}=r,v=Os(),N=Mt(I=>AU(I,"xAxis",i,v)),b=Mt(I=>AU(I,"yAxis",o,v));if(!Do(d)||!Do(u)||!Dt(l)||!Dt(c))return null;var C=r.verticalCoordinatesGenerator||_3e,w=r.horizontalCoordinatesGenerator||A3e,{horizontalPoints:S,verticalPoints:E}=r;if((!S||!S.length)&&typeof w=="function"){var k=p&&p.length,A=w({yAxis:b?_s(_s({},b),{},{ticks:k?p:b.ticks}):void 0,width:t??d,height:a??u,offset:s},k?!0:f);Uv(Array.isArray(A),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof A,"]")),Array.isArray(A)&&(S=A)}if((!E||!E.length)&&typeof C=="function"){var T=x&&x.length,_=C({xAxis:N?_s(_s({},N),{},{ticks:T?x:N.ticks}):void 0,width:t??d,height:a??u,offset:s},T?!0:f);Uv(Array.isArray(_),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof _,"]")),Array.isArray(_)&&(E=_)}return h.createElement(hr,{zIndex:r.zIndex},h.createElement("g",{className:"recharts-cartesian-grid"},h.createElement(w3e,{fill:r.fill,fillOpacity:r.fillOpacity,x:r.x,y:r.y,width:r.width,height:r.height,ry:r.ry}),h.createElement(C3e,su({},r,{horizontalPoints:S})),h.createElement(S3e,su({},r,{verticalPoints:E})),h.createElement(N3e,su({},r,{offset:s,horizontalPoints:S,xAxis:N,yAxis:b})),h.createElement(j3e,su({},r,{offset:s,verticalPoints:E,xAxis:N,yAxis:b}))))}JE.displayName="CartesianGrid";var E3e={},pX=fr({name:"errorBars",initialState:E3e,reducers:{addErrorBar:(e,t)=>{var{itemId:a,errorBar:s}=t.payload;e[a]||(e[a]=[]),e[a].push(s)},replaceErrorBar:(e,t)=>{var{itemId:a,prev:s,next:r}=t.payload;e[a]&&(e[a]=e[a].map(i=>i.dataKey===s.dataKey&&i.direction===s.direction?r:i))},removeErrorBar:(e,t)=>{var{itemId:a,errorBar:s}=t.payload;e[a]&&(e[a]=e[a].filter(r=>r.dataKey!==s.dataKey||r.direction!==s.direction))}}}),{addErrorBar:Jqe,replaceErrorBar:eVe,removeErrorBar:tVe}=pX.actions,k3e=pX.reducer,L3e=["children"];function P3e(e,t){if(e==null)return{};var a,s,r=D3e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function D3e(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var O3e={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},M3e=h.createContext(O3e);function xX(e){var{children:t}=e,a=P3e(e,L3e);return h.createElement(M3e.Provider,{value:a},t)}function cD(e,t){var a,s,r=Mt(d=>Xl(d,e)),i=Mt(d=>Zl(d,t)),o=(a=r?.allowDataOverflow)!==null&&a!==void 0?a:ss.allowDataOverflow,l=(s=i?.allowDataOverflow)!==null&&s!==void 0?s:rs.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function yX(e){var{xAxisId:t,yAxisId:a,clipPathId:s}=e,r=rD(),{needClipX:i,needClipY:o,needClip:l}=cD(t,a);if(!l||!r)return null;var{x:c,y:d,width:u,height:f}=r;return h.createElement("clipPath",{id:"clipPath-".concat(s)},h.createElement("rect",{x:i?c:c-u/2,y:o?d:d-f/2,width:i?u:u*2,height:o?f:f*2}))}var bX=(e,t,a,s)=>sd(e,"xAxis",t,s),vX=(e,t,a,s)=>ad(e,"xAxis",t,s),wX=(e,t,a,s)=>sd(e,"yAxis",a,s),NX=(e,t,a,s)=>ad(e,"yAxis",a,s),I3e=at([hn,bX,wX,vX,NX],(e,t,a,s,r)=>yd(e,"xAxis")?Tf(t,s,!1):Tf(a,r,!1)),$3e=(e,t,a,s,r)=>r;function R3e(e){return e.type==="line"}var z3e=at([wj,$3e],(e,t)=>e.filter(R3e).find(a=>a.id===t)),U3e=at([hn,bX,wX,vX,NX,z3e,I3e,i4],(e,t,a,s,r,i,o,l)=>{var{chartData:c,dataStartIndex:d,dataEndIndex:u}=l;if(!(i==null||t==null||a==null||s==null||r==null||s.length===0||r.length===0||o==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:f,data:p}=i,x;if(p!=null&&p.length>0?x=p:x=c?.slice(d,u+1),x!=null)return T5e({layout:e,xAxis:t,yAxis:a,xAxisTicks:s,yAxisTicks:r,dataKey:f,bandSize:o,displayedData:x})}});function F3e(e){var t=Au(e),a=3,s=2;if(t!=null){var{r,strokeWidth:i}=t,o=Number(r),l=Number(i);return(Number.isNaN(o)||o<0)&&(o=a),(Number.isNaN(l)||l<0)&&(l=s),{r:o,strokeWidth:l}}return{r:a,strokeWidth:s}}var S2={exports:{}},_2={};var MF;function B3e(){if(MF)return _2;MF=1;var e=Df();function t(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var a=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,r=e.useRef,i=e.useEffect,o=e.useMemo,l=e.useDebugValue;return _2.useSyncExternalStoreWithSelector=function(c,d,u,f,p){var x=r(null);if(x.current===null){var v={hasValue:!1,value:null};x.current=v}else v=x.current;x=o(function(){function b(k){if(!C){if(C=!0,w=k,k=f(k),p!==void 0&&v.hasValue){var A=v.value;if(p(A,k))return S=A}return S=k}if(A=S,a(w,k))return A;var T=f(k);return p!==void 0&&p(A,T)?(w=k,A):(w=k,S=T)}var C=!1,w,S,E=u===void 0?null:u;return[function(){return b(d())},E===null?void 0:function(){return b(E())}]},[d,u,f,p]);var N=s(c,x[0],x[1]);return i(function(){v.hasValue=!0,v.value=N},[N]),l(N),N},_2}var IF;function H3e(){return IF||(IF=1,S2.exports=B3e()),S2.exports}var G3e=H3e();function W3e(e){e()}function q3e(){let e=null,t=null;return{clear(){e=null,t=null},notify(){W3e(()=>{let a=e;for(;a;)a.callback(),a=a.next})},get(){const a=[];let s=e;for(;s;)a.push(s),s=s.next;return a},subscribe(a){let s=!0;const r=t={callback:a,next:null,prev:t};return r.prev?r.prev.next=r:e=r,function(){!s||e===null||(s=!1,r.next?r.next.prev=r.prev:t=r.prev,r.prev?r.prev.next=r.next:e=r.next)}}}}var $F={notify(){},get:()=>[]};function V3e(e,t){let a,s=$F,r=0,i=!1;function o(N){u();const b=s.subscribe(N);let C=!1;return()=>{C||(C=!0,b(),f())}}function l(){s.notify()}function c(){v.onStateChange&&v.onStateChange()}function d(){return i}function u(){r++,a||(a=e.subscribe(c),s=q3e())}function f(){r--,a&&r===0&&(a(),a=void 0,s.clear(),s=$F)}function p(){i||(i=!0,u())}function x(){i&&(i=!1,f())}const v={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:d,trySubscribe:p,tryUnsubscribe:x,getListeners:()=>s};return v}var Y3e=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Q3e=Y3e(),K3e=()=>typeof navigator<"u"&&navigator.product==="ReactNative",X3e=K3e(),Z3e=()=>Q3e||X3e?h.useLayoutEffect:h.useEffect,J3e=Z3e();function RF(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function e5e(e,t){if(RF(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(let r=0;r<a.length;r++)if(!Object.prototype.hasOwnProperty.call(t,a[r])||!RF(e[a[r]],t[a[r]]))return!1;return!0}var t5e=Symbol.for("react-redux-context"),n5e=typeof globalThis<"u"?globalThis:{};function a5e(){if(!h.createContext)return{};const e=n5e[t5e]??=new Map;let t=e.get(h.createContext);return t||(t=h.createContext(null),e.set(h.createContext,t)),t}var s5e=a5e();function r5e(e){const{children:t,context:a,serverState:s,store:r}=e,i=h.useMemo(()=>{const c=V3e(r);return{store:r,subscription:c,getServerState:s?()=>s:void 0}},[r,s]),o=h.useMemo(()=>r.getState(),[r]);J3e(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==r.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,o]);const l=a||s5e;return h.createElement(l.Provider,{value:i},t)}var i5e=r5e,o5e=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function l5e(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function Pj(e,t){var a=new Set([...Object.keys(e),...Object.keys(t)]);for(var s of a)if(o5e.has(s)){if(e[s]==null&&t[s]==null)continue;if(!e5e(e[s],t[s]))return!1}else if(!l5e(e[s],t[s]))return!1;return!0}var c5e=["id"],d5e=["type","layout","connectNulls","needClip","shape"],u5e=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Dp(){return Dp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Dp.apply(null,arguments)}function zF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function fo(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?zF(Object(a),!0).forEach(function(s){m5e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):zF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function m5e(e,t,a){return(t=f5e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function f5e(e){var t=h5e(e,"string");return typeof t=="symbol"?t:t+""}function h5e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dD(e,t){if(e==null)return{};var a,s,r=g5e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function g5e(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var p5e=e=>{var{dataKey:t,name:a,stroke:s,legendType:r,hide:i}=e;return[{inactive:i,dataKey:t,type:r,color:s,value:Kf(a,t),payload:e}]},x5e=h.memo(e=>{var{dataKey:t,data:a,stroke:s,strokeWidth:r,fill:i,name:o,hide:l,unit:c,tooltipType:d,id:u}=e,f={dataDefinedOnItem:a,positions:void 0,settings:{stroke:s,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:Kf(o,t),hide:l,type:d,color:s,unit:c,graphicalItemId:u}};return h.createElement(aD,{tooltipEntrySettings:f})}),jX=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function y5e(e,t){for(var a=e.length%2!==0?[...e,0]:e,s=[],r=0;r<t;++r)s=[...s,...a];return s}var b5e=(e,t,a)=>{var s=a.reduce((f,p)=>f+p);if(!s)return jX(t,e);for(var r=Math.floor(e/s),i=e%s,o=t-e,l=[],c=0,d=0;c<a.length;d+=a[c],++c)if(d+a[c]>i){l=[...a.slice(0,c),i-d];break}var u=l.length%2===0?[0,o]:[o];return[...y5e(a,r),...l,...u].map(f=>"".concat(f,"px")).join(", ")};function v5e(e){var{clipPathId:t,points:a,props:s}=e,{dot:r,dataKey:i,needClip:o}=s,{id:l}=s,c=dD(s,c5e),d=Or(c);return h.createElement(sOe,{points:a,dot:r,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:i,baseProps:d,needClip:o,clipPathId:t})}function w5e(e){var{showLabels:t,children:a,points:s}=e,r=h.useMemo(()=>s?.map(i=>{var o,l,c={x:(o=i.x)!==null&&o!==void 0?o:0,y:(l=i.y)!==null&&l!==void 0?l:0,width:0,lowerWidth:0,upperWidth:0,height:0};return fo(fo({},c),{},{value:i.value,payload:i.payload,viewBox:c,parentViewBox:void 0,fill:void 0})}),[s]);return h.createElement(KK,{value:t?r:void 0},a)}function UF(e){var{clipPathId:t,pathRef:a,points:s,strokeDasharray:r,props:i}=e,{type:o,layout:l,connectNulls:c,needClip:d,shape:u}=i,f=dD(i,d5e),p=fo(fo({},Us(f)),{},{fill:"none",className:"recharts-line-curve",clipPath:d?"url(#clipPath-".concat(t,")"):void 0,points:s,type:o,layout:l,connectNulls:c,strokeDasharray:r??i.strokeDasharray});return h.createElement(h.Fragment,null,s?.length>1&&h.createElement(J4,Dp({shapeType:"curve",option:u},p,{pathRef:a})),h.createElement(v5e,{points:s,clipPathId:t,props:i}))}function N5e(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function j5e(e){var{clipPathId:t,props:a,pathRef:s,previousPointsRef:r,longestAnimatedLengthRef:i}=e,{points:o,strokeDasharray:l,isAnimationActive:c,animationBegin:d,animationDuration:u,animationEasing:f,animateNewValues:p,width:x,height:v,onAnimationEnd:N,onAnimationStart:b}=a,C=r.current,w=Bx(o,"recharts-line-"),S=h.useRef(w),[E,k]=h.useState(!1),A=!E,T=h.useCallback(()=>{typeof N=="function"&&N(),k(!1)},[N]),_=h.useCallback(()=>{typeof b=="function"&&b(),k(!0)},[b]),I=N5e(s.current),R=h.useRef(0);S.current!==w&&(R.current=i.current,S.current=w);var U=R.current;return h.createElement(w5e,{points:o,showLabels:A},a.children,h.createElement(Fx,{animationId:w,begin:d,duration:u,isActive:c,easing:f,onAnimationEnd:T,onAnimationStart:_,key:w},D=>{var M=na(U,I+U,D),W=Math.min(M,I),X;if(c)if(l){var z="".concat(l).split(/[,\s]+/gim).map(Y=>parseFloat(Y));X=b5e(W,I,z)}else X=jX(I,W);else X=l==null?void 0:String(l);if(D>0&&I>0&&(r.current=o,i.current=Math.max(i.current,W)),C){var Q=C.length/o.length,de=D===1?o:o.map((Y,se)=>{var J=Math.floor(se*Q);if(C[J]){var F=C[J];return fo(fo({},Y),{},{x:na(F.x,Y.x,D),y:na(F.y,Y.y,D)})}return p?fo(fo({},Y),{},{x:na(x*2,Y.x,D),y:na(v/2,Y.y,D)}):fo(fo({},Y),{},{x:Y.x,y:Y.y})});return r.current=de,h.createElement(UF,{props:a,points:de,clipPathId:t,pathRef:s,strokeDasharray:X})}return h.createElement(UF,{props:a,points:o,clipPathId:t,pathRef:s,strokeDasharray:X})}),h.createElement(Q4,{label:a.label}))}function C5e(e){var{clipPathId:t,props:a}=e,s=h.useRef(null),r=h.useRef(0),i=h.useRef(null);return h.createElement(j5e,{props:a,clipPathId:t,previousPointsRef:s,longestAnimatedLengthRef:r,pathRef:i})}var S5e=(e,t)=>{var a,s;return{x:(a=e.x)!==null&&a!==void 0?a:void 0,y:(s=e.y)!==null&&s!==void 0?s:void 0,value:e.value,errorVal:Rn(e.payload,t)}};class _5e extends h.Component{render(){var{hide:t,dot:a,points:s,className:r,xAxisId:i,yAxisId:o,top:l,left:c,width:d,height:u,id:f,needClip:p,zIndex:x}=this.props;if(t)return null;var v=kt("recharts-line",r),N=f,{r:b,strokeWidth:C}=F3e(a),w=sX(a),S=b*2+C,E=p?"url(#clipPath-".concat(w?"":"dots-").concat(N,")"):void 0;return h.createElement(hr,{zIndex:x},h.createElement(ds,{className:v},p&&h.createElement("defs",null,h.createElement(yX,{clipPathId:N,xAxisId:i,yAxisId:o}),!w&&h.createElement("clipPath",{id:"clipPath-dots-".concat(N)},h.createElement("rect",{x:c-S/2,y:l-S/2,width:d+S,height:u+S}))),h.createElement(xX,{xAxisId:i,yAxisId:o,data:s,dataPointFormatter:S5e,errorBarOffset:0},h.createElement(C5e,{props:this.props,clipPathId:N}))),h.createElement(COe,{activeDot:this.props.activeDot,points:s,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:E}))}}var CX={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:Ma.line,type:"linear"};function A5e(e){var t=za(e,CX),{activeDot:a,animateNewValues:s,animationBegin:r,animationDuration:i,animationEasing:o,connectNulls:l,dot:c,hide:d,isAnimationActive:u,label:f,legendType:p,xAxisId:x,yAxisId:v,id:N}=t,b=dD(t,u5e),{needClip:C}=cD(x,v),w=rD(),S=Xf(),E=Os(),k=Mt(R=>U3e(R,x,v,E,N));if(S!=="horizontal"&&S!=="vertical"||k==null||w==null)return null;var{height:A,width:T,x:_,y:I}=w;return h.createElement(_5e,Dp({},b,{id:N,connectNulls:l,dot:c,activeDot:a,animateNewValues:s,animationBegin:r,animationDuration:i,animationEasing:o,isAnimationActive:u,hide:d,label:f,legendType:p,xAxisId:x,yAxisId:v,points:k,layout:S,height:A,width:T,left:_,top:I,needClip:C}))}function T5e(e){var{layout:t,xAxis:a,yAxis:s,xAxisTicks:r,yAxisTicks:i,dataKey:o,bandSize:l,displayedData:c}=e;return c.map((d,u)=>{var f=Rn(d,o);if(t==="horizontal"){var p=mz({axis:a,ticks:r,bandSize:l,entry:d,index:u}),x=ra(f)?null:s.scale(f);return{x:p,y:x,value:f,payload:d}}var v=ra(f)?null:a.scale(f),N=mz({axis:s,ticks:i,bandSize:l,entry:d,index:u});return v==null||N==null?null:{x:v,y:N,value:f,payload:d}}).filter(Boolean)}function E5e(e){var t=za(e,CX),a=Os();return h.createElement(sD,{id:t.id,type:"line"},s=>h.createElement(h.Fragment,null,h.createElement(rX,{legendPayload:p5e(t)}),h.createElement(x5e,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:s}),h.createElement(oX,{type:"line",id:s,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:a}),h.createElement(A5e,Dp({},t,{id:s}))))}var ek=h.memo(E5e,Pj);ek.displayName="Line";function qu(e,t){var a,s;return(a=(s=e.graphicalItems.cartesianItems.find(r=>r.id===t))===null||s===void 0?void 0:s.xAxisId)!==null&&a!==void 0?a:cX}function Vu(e,t){var a,s;return(a=(s=e.graphicalItems.cartesianItems.find(r=>r.id===t))===null||s===void 0?void 0:s.yAxisId)!==null&&a!==void 0?a:cX}var k5e="Invariant failed";function L5e(e,t){throw new Error(k5e)}function tk(){return tk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},tk.apply(null,arguments)}function sw(e){return h.createElement(J4,tk({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var P5e=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(s,r)=>{if(Dt(t))return t;var i=Dt(s)||ra(s);return i?t(s,r):(i||L5e(),a)}},D5e=(e,t,a)=>a,O5e=(e,t)=>t,Zx=at([wj,O5e],(e,t)=>e.filter(a=>a.type==="bar").find(a=>a.id===t)),M5e=at([Zx],e=>e?.maxBarSize),I5e=(e,t,a,s)=>s,$5e=at([hn,wj,qu,Vu,D5e],(e,t,a,s,r)=>t.filter(i=>e==="horizontal"?i.xAxisId===a:i.yAxisId===s).filter(i=>i.isPanorama===r).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),R5e=(e,t,a)=>{var s=hn(e),r=qu(e,t),i=Vu(e,t);if(!(r==null||i==null))return s==="horizontal"?WE(e,"yAxis",i,a):WE(e,"xAxis",r,a)},z5e=(e,t)=>{var a=hn(e),s=qu(e,t),r=Vu(e,t);if(!(s==null||r==null))return a==="horizontal"?_U(e,"xAxis",s):_U(e,"yAxis",r)},U5e=at([$5e,cEe,z5e],SOe),F5e=(e,t,a)=>{var s,r,i=Zx(e,t);if(i!=null){var o=qu(e,t),l=Vu(e,t);if(!(o==null||l==null)){var c=hn(e),d=LQ(e),{maxBarSize:u}=i,f=ra(u)?d:u,p,x;return c==="horizontal"?(p=sd(e,"xAxis",o,a),x=ad(e,"xAxis",o,a)):(p=sd(e,"yAxis",l,a),x=ad(e,"yAxis",l,a)),(s=(r=Tf(p,x,!0))!==null&&r!==void 0?r:f)!==null&&s!==void 0?s:0}}},SX=(e,t,a)=>{var s=hn(e),r=qu(e,t),i=Vu(e,t);if(!(r==null||i==null)){var o,l;return s==="horizontal"?(o=sd(e,"xAxis",r,a),l=ad(e,"xAxis",r,a)):(o=sd(e,"yAxis",i,a),l=ad(e,"yAxis",i,a)),Tf(o,l)}},B5e=at([U5e,LQ,lEe,PQ,F5e,SX,M5e],kOe),H5e=(e,t,a)=>{var s=qu(e,t);if(s!=null)return sd(e,"xAxis",s,a)},G5e=(e,t,a)=>{var s=Vu(e,t);if(s!=null)return sd(e,"yAxis",s,a)},W5e=(e,t,a)=>{var s=qu(e,t);if(s!=null)return ad(e,"xAxis",s,a)},q5e=(e,t,a)=>{var s=Vu(e,t);if(s!=null)return ad(e,"yAxis",s,a)},V5e=at([B5e,Zx],(e,t)=>{if(!(e==null||t==null)){var a=e.find(s=>s.stackId===t.stackId&&t.dataKey!=null&&s.dataKeys.includes(t.dataKey));if(a!=null)return a.position}}),Y5e=at([R5e,Zx],LOe),Q5e=at([Ja,JP,H5e,G5e,W5e,q5e,V5e,hn,KTe,SX,Y5e,Zx,I5e],(e,t,a,s,r,i,o,l,c,d,u,f,p)=>{var{chartData:x,dataStartIndex:v,dataEndIndex:N}=c;if(!(f==null||o==null||t==null||l!=="horizontal"&&l!=="vertical"||a==null||s==null||r==null||i==null||d==null)){var{data:b}=f,C;if(b!=null&&b.length>0?C=b:C=x?.slice(v,N+1),C!=null)return CMe({layout:l,barSettings:f,pos:o,parentViewBox:t,bandSize:d,xAxis:a,yAxis:s,xAxisTicks:r,yAxisTicks:i,stackedData:u,displayedData:C,offset:e,cells:p,dataStartIndex:v})}}),K5e=["index"];function nk(){return nk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},nk.apply(null,arguments)}function X5e(e,t){if(e==null)return{};var a,s,r=Z5e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Z5e(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var _X=h.createContext(void 0),J5e=e=>{var t=h.useContext(_X);if(t!=null)return t.stackId;if(e!=null)return y2e(e)},eMe=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),tMe=e=>{var t=h.useContext(_X);if(t!=null){var{stackId:a}=t;return"url(#".concat(eMe(a,e),")")}},nMe=e=>{var{index:t}=e,a=X5e(e,K5e),s=tMe(t);return h.createElement(ds,nk({className:"recharts-bar-stack-layer",clipPath:s},a))},aMe=["onMouseEnter","onMouseLeave","onClick"],sMe=["value","background","tooltipPosition"],rMe=["id"],iMe=["onMouseEnter","onClick","onMouseLeave"];function Rl(){return Rl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Rl.apply(null,arguments)}function FF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Is(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?FF(Object(a),!0).forEach(function(s){oMe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):FF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function oMe(e,t,a){return(t=lMe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function lMe(e){var t=cMe(e,"string");return typeof t=="symbol"?t:t+""}function cMe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rw(e,t){if(e==null)return{};var a,s,r=dMe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function dMe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var uMe=e=>{var{dataKey:t,name:a,fill:s,legendType:r,hide:i}=e;return[{inactive:i,dataKey:t,type:r,color:s,value:Kf(a,t),payload:e}]},mMe=h.memo(e=>{var{dataKey:t,stroke:a,strokeWidth:s,fill:r,name:i,hide:o,unit:l,tooltipType:c,id:d}=e,u={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:a,strokeWidth:s,fill:r,dataKey:t,nameKey:void 0,name:Kf(i,t),hide:o,type:c,color:r,unit:l,graphicalItemId:d}};return h.createElement(aD,{tooltipEntrySettings:u})});function fMe(e){var t=Mt(rd),{data:a,dataKey:s,background:r,allOtherBarProps:i}=e,{onMouseEnter:o,onMouseLeave:l,onClick:c}=i,d=rw(i,aMe),u=eD(o,s,i.id),f=tD(l),p=nD(c,s,i.id);if(!r||a==null)return null;var x=Au(r);return h.createElement(hr,{zIndex:POe(r,Ma.barBackground)},a.map((v,N)=>{var{value:b,background:C,tooltipPosition:w}=v,S=rw(v,sMe);if(!C)return null;var E=u(v,N),k=f(v,N),A=p(v,N),T=Is(Is(Is(Is(Is({option:r,isActive:String(N)===t},S),{},{fill:"#eee"},C),x),Mx(d,v,N)),{},{onMouseEnter:E,onMouseLeave:k,onClick:A,dataKey:s,index:N,className:"recharts-bar-background-rectangle"});return h.createElement(sw,Rl({key:"background-bar-".concat(N)},T))}))}function hMe(e){var{showLabels:t,children:a,rects:s}=e,r=s?.map(i=>{var o={x:i.x,y:i.y,width:i.width,lowerWidth:i.width,upperWidth:i.width,height:i.height};return Is(Is({},o),{},{value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:o,fill:i.fill})});return h.createElement(KK,{value:t?r:void 0},a)}function gMe(e){var{shape:t,activeBar:a,baseProps:s,entry:r,index:i,dataKey:o}=e,l=Mt(rd),c=Mt(B4),d=a&&String(i)===l&&(c==null||o===c),u=d?a:t;return d?h.createElement(hr,{zIndex:Ma.activeBar},h.createElement(sw,Rl({},s,{name:String(s.name)},r,{isActive:d,option:u,index:i,dataKey:o}))):h.createElement(sw,Rl({},s,{name:String(s.name)},r,{isActive:d,option:u,index:i,dataKey:o}))}function pMe(e){var{shape:t,baseProps:a,entry:s,index:r,dataKey:i}=e;return h.createElement(sw,Rl({},a,{name:String(a.name)},s,{isActive:!1,option:t,index:r,dataKey:i}))}function xMe(e){var t,{data:a,props:s}=e,r=(t=Or(s))!==null&&t!==void 0?t:{},{id:i}=r,o=rw(r,rMe),{shape:l,dataKey:c,activeBar:d}=s,{onMouseEnter:u,onClick:f,onMouseLeave:p}=s,x=rw(s,iMe),v=eD(u,c,i),N=tD(p),b=nD(f,c,i);return a?h.createElement(h.Fragment,null,a.map((C,w)=>h.createElement(nMe,Rl({index:w,key:"rectangle-".concat(C?.x,"-").concat(C?.y,"-").concat(C?.value,"-").concat(w),className:"recharts-bar-rectangle"},Mx(x,C,w),{onMouseEnter:v(C,w),onMouseLeave:N(C,w),onClick:b(C,w)}),d?h.createElement(gMe,{shape:l,activeBar:d,baseProps:o,entry:C,index:w,dataKey:c}):h.createElement(pMe,{shape:l,baseProps:o,entry:C,index:w,dataKey:c})))):null}function yMe(e){var{props:t,previousRectanglesRef:a}=e,{data:s,layout:r,isAnimationActive:i,animationBegin:o,animationDuration:l,animationEasing:c,onAnimationEnd:d,onAnimationStart:u}=t,f=a.current,p=Bx(t,"recharts-bar-"),[x,v]=h.useState(!1),N=!x,b=h.useCallback(()=>{typeof d=="function"&&d(),v(!1)},[d]),C=h.useCallback(()=>{typeof u=="function"&&u(),v(!0)},[u]);return h.createElement(hMe,{showLabels:N,rects:s},h.createElement(Fx,{animationId:p,begin:o,duration:l,isActive:i,easing:c,onAnimationEnd:b,onAnimationStart:C,key:p},w=>{var S=w===1?s:s?.map((E,k)=>{var A=f&&f[k];if(A)return Is(Is({},E),{},{x:na(A.x,E.x,w),y:na(A.y,E.y,w),width:na(A.width,E.width,w),height:na(A.height,E.height,w)});if(r==="horizontal"){var T=na(0,E.height,w),_=na(E.stackedBarStart,E.y,w);return Is(Is({},E),{},{y:_,height:T})}var I=na(0,E.width,w),R=na(E.stackedBarStart,E.x,w);return Is(Is({},E),{},{width:I,x:R})});return w>0&&(a.current=S??null),S==null?null:h.createElement(ds,null,h.createElement(xMe,{props:t,data:S}))}),h.createElement(Q4,{label:t.label}),t.children)}function bMe(e){var t=h.useRef(null);return h.createElement(yMe,{previousRectanglesRef:t,props:e})}var AX=0,vMe=(e,t)=>{var a=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:a,errorVal:Rn(e,t)}};class wMe extends h.PureComponent{render(){var{hide:t,data:a,dataKey:s,className:r,xAxisId:i,yAxisId:o,needClip:l,background:c,id:d}=this.props;if(t||a==null)return null;var u=kt("recharts-bar",r),f=d;return h.createElement(ds,{className:u,id:d},l&&h.createElement("defs",null,h.createElement(yX,{clipPathId:f,xAxisId:i,yAxisId:o})),h.createElement(ds,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(f,")"):void 0},h.createElement(fMe,{data:a,dataKey:s,background:c,allOtherBarProps:this.props}),h.createElement(bMe,this.props)))}}var NMe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:AX,xAxisId:0,yAxisId:0,zIndex:Ma.bar};function jMe(e){var{xAxisId:t,yAxisId:a,hide:s,legendType:r,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:d,isAnimationActive:u}=e,{needClip:f}=cD(t,a),p=Xf(),x=Os(),v=Z4(e.children,Aj),N=Mt(w=>Q5e(w,e.id,x,v));if(p!=="vertical"&&p!=="horizontal")return null;var b,C=N?.[0];return C==null||C.height==null||C.width==null?b=0:b=p==="vertical"?C.height/2:C.width/2,h.createElement(xX,{xAxisId:t,yAxisId:a,data:N,dataPointFormatter:vMe,errorBarOffset:b},h.createElement(wMe,Rl({},e,{layout:p,needClip:f,data:N,xAxisId:t,yAxisId:a,hide:s,legendType:r,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:d,isAnimationActive:u})))}function CMe(e){var{layout:t,barSettings:{dataKey:a,minPointSize:s},pos:r,bandSize:i,xAxis:o,yAxis:l,xAxisTicks:c,yAxisTicks:d,stackedData:u,displayedData:f,offset:p,cells:x,parentViewBox:v,dataStartIndex:N}=e,b=t==="horizontal"?l:o,C=u?b.scale.domain():null,w=b2e({numericAxis:b}),S=b.scale(w);return f.map((E,k)=>{var A,T,_,I,R,U;if(u){var D=u[k+N];if(D==null)return null;A=f2e(D,C)}else A=Rn(E,a),Array.isArray(A)||(A=[w,A]);var M=P5e(s,AX)(A[1],k);if(t==="horizontal"){var W,[X,z]=[l.scale(A[0]),l.scale(A[1])];T=fz({axis:o,ticks:c,bandSize:i,offset:r.offset,entry:E,index:k}),_=(W=z??X)!==null&&W!==void 0?W:void 0,I=r.size;var Q=X-z;if(R=Fi(Q)?0:Q,U={x:T,y:p.top,width:I,height:p.height},Math.abs(M)>0&&Math.abs(R)<Math.abs(M)){var de=cs(R||M)*(Math.abs(M)-Math.abs(R));_-=de,R+=de}}else{var[Y,se]=[o.scale(A[0]),o.scale(A[1])];if(T=Y,_=fz({axis:l,ticks:d,bandSize:i,offset:r.offset,entry:E,index:k}),I=se-Y,R=r.size,U={x:p.left,y:_,width:p.width,height:R},Math.abs(M)>0&&Math.abs(I)<Math.abs(M)){var J=cs(I||M)*(Math.abs(M)-Math.abs(I));I+=J}}if(T==null||_==null||I==null||R==null)return null;var F=Is(Is({},E),{},{stackedBarStart:S,x:T,y:_,width:I,height:R,value:u?A:A[1],payload:E,background:U,tooltipPosition:{x:T+I/2,y:_+R/2},parentViewBox:v},x&&x[k]&&x[k].props);return F}).filter(Boolean)}function SMe(e){var t=za(e,NMe),a=J5e(t.stackId),s=Os();return h.createElement(sD,{id:t.id,type:"bar"},r=>h.createElement(h.Fragment,null,h.createElement(rX,{legendPayload:uMe(t)}),h.createElement(mMe,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:r}),h.createElement(oX,{type:"bar",id:r,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:a,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:s}),h.createElement(hr,{zIndex:t.zIndex},h.createElement(jMe,Rl({},t,{id:r})))))}var ak=h.memo(SMe,Pj);ak.displayName="Bar";var _Me=["domain","range"],AMe=["domain","range"];function BF(e,t){if(e==null)return{};var a,s,r=TMe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function TMe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function HF(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function TX(e,t){if(e===t)return!0;var{domain:a,range:s}=e,r=BF(e,_Me),{domain:i,range:o}=t,l=BF(t,AMe);return!HF(a,i)||!HF(s,o)?!1:Pj(r,l)}var EMe=["dangerouslySetInnerHTML","ticks","scale"],kMe=["id","scale"];function sk(){return sk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},sk.apply(null,arguments)}function GF(e,t){if(e==null)return{};var a,s,r=LMe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function LMe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function PMe(e){var t=qn(),a=h.useRef(null);return h.useLayoutEffect(()=>{a.current===null?t(cOe(e)):a.current!==e&&t(dOe({prev:a.current,next:e})),a.current=e},[e,t]),h.useLayoutEffect(()=>()=>{a.current&&(t(uOe(a.current)),a.current=null)},[t]),null}var DMe=e=>{var{xAxisId:t,className:a}=e,s=Mt(JP),r=Os(),i="xAxis",o=Mt(C=>dK(C,i,t,r)),l=Mt(C=>iK(C,t)),c=Mt(C=>ike(C,t)),d=Mt(C=>FQ(C,t));if(l==null||c==null||d==null)return null;var{dangerouslySetInnerHTML:u,ticks:f,scale:p}=e,x=GF(e,EMe),{id:v,scale:N}=d,b=GF(d,kMe);return h.createElement(lD,sk({},x,b,{x:c.x,y:c.y,width:l.width,height:l.height,className:kt("recharts-".concat(i," ").concat(i),a),viewBox:s,ticks:o,axisType:i}))},OMe={allowDataOverflow:ss.allowDataOverflow,allowDecimals:ss.allowDecimals,allowDuplicatedCategory:ss.allowDuplicatedCategory,angle:ss.angle,axisLine:jl.axisLine,height:ss.height,hide:!1,includeHidden:ss.includeHidden,interval:ss.interval,minTickGap:ss.minTickGap,mirror:ss.mirror,orientation:ss.orientation,padding:ss.padding,reversed:ss.reversed,scale:ss.scale,tick:ss.tick,tickCount:ss.tickCount,tickLine:jl.tickLine,tickSize:jl.tickSize,type:ss.type,xAxisId:0},MMe=e=>{var t=za(e,OMe);return h.createElement(h.Fragment,null,h.createElement(PMe,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),h.createElement(DMe,t))},rk=h.memo(MMe,TX);rk.displayName="XAxis";var IMe=["dangerouslySetInnerHTML","ticks","scale"],$Me=["id","scale"];function ik(){return ik=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},ik.apply(null,arguments)}function WF(e,t){if(e==null)return{};var a,s,r=RMe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function RMe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function zMe(e){var t=qn(),a=h.useRef(null);return h.useLayoutEffect(()=>{a.current===null?t(mOe(e)):a.current!==e&&t(fOe({prev:a.current,next:e})),a.current=e},[e,t]),h.useLayoutEffect(()=>()=>{a.current&&(t(hOe(a.current)),a.current=null)},[t]),null}var UMe=e=>{var{yAxisId:t,className:a,width:s,label:r}=e,i=h.useRef(null),o=h.useRef(null),l=Mt(JP),c=Os(),d=qn(),u="yAxis",f=Mt(A=>oK(A,t)),p=Mt(A=>lke(A,t)),x=Mt(A=>dK(A,u,t,c)),v=Mt(A=>BQ(A,t));if(h.useLayoutEffect(()=>{if(!(s!=="auto"||!f||Y4(r)||h.isValidElement(r)||v==null)){var A=i.current;if(A){var T=A.getCalculatedWidth();Math.round(f.width)!==Math.round(T)&&d(gOe({id:t,width:T}))}}},[x,f,d,r,t,s,v]),f==null||p==null||v==null)return null;var{dangerouslySetInnerHTML:N,ticks:b,scale:C}=e,w=WF(e,IMe),{id:S,scale:E}=v,k=WF(v,$Me);return h.createElement(lD,ik({},w,k,{ref:i,labelRef:o,x:p.x,y:p.y,tickTextProps:s==="auto"?{width:void 0}:{width:s},width:f.width,height:f.height,className:kt("recharts-".concat(u," ").concat(u),a),viewBox:l,ticks:x,axisType:u}))},FMe={allowDataOverflow:rs.allowDataOverflow,allowDecimals:rs.allowDecimals,allowDuplicatedCategory:rs.allowDuplicatedCategory,angle:rs.angle,axisLine:jl.axisLine,hide:!1,includeHidden:rs.includeHidden,interval:rs.interval,minTickGap:rs.minTickGap,mirror:rs.mirror,orientation:rs.orientation,padding:rs.padding,reversed:rs.reversed,scale:rs.scale,tick:rs.tick,tickCount:rs.tickCount,tickLine:jl.tickLine,tickSize:jl.tickSize,type:rs.type,width:rs.width,yAxisId:0},BMe=e=>{var t=za(e,FMe);return h.createElement(h.Fragment,null,h.createElement(zMe,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),h.createElement(UMe,t))},ok=h.memo(BMe,TX);ok.displayName="YAxis";var HMe=(e,t)=>t,uD=at([HMe,hn,zQ,es,_K,Jl,CLe,Ja],LLe),mD=e=>{var t=e.currentTarget.getBoundingClientRect(),a=t.width/e.currentTarget.offsetWidth,s=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/a),chartY:Math.round((e.clientY-t.top)/s)}},EX=mi("mouseClick"),kX=Rx();kX.startListening({actionCreator:EX,effect:(e,t)=>{var a=e.payload,s=uD(t.getState(),mD(a));s?.activeIndex!=null&&t.dispatch(Nke({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}});var lk=mi("mouseMove"),LX=Rx(),Yy=null;LX.startListening({actionCreator:lk,effect:(e,t)=>{var a=e.payload;Yy!==null&&cancelAnimationFrame(Yy);var s=mD(a);Yy=requestAnimationFrame(()=>{var r=t.getState(),i=I4(r,r.tooltip.settings.shared);if(i==="axis"){var o=uD(r,s);o?.activeIndex!=null?t.dispatch(yK({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):t.dispatch(xK())}Yy=null})}});function GMe(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var qF={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},PX=fr({name:"rootProps",initialState:qF,reducers:{updateOptions:(e,t)=>{var a;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(a=t.payload.barGap)!==null&&a!==void 0?a:qF.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),WMe=PX.reducer,{updateOptions:qMe}=PX.actions,DX=fr({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:VMe}=DX.actions,YMe=DX.reducer,OX=mi("keyDown"),MX=mi("focus"),fD=Rx();fD.startListening({actionCreator:OX,effect:(e,t)=>{var a=t.getState(),s=a.rootProps.accessibilityLayer!==!1;if(s){var{keyboardInteraction:r}=a.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=$4(r,rh(a),Vx(a),Kx(a)),l=o==null?-1:Number(o);if(!(!Number.isFinite(l)||l<0)){var c=Jl(a);if(i==="Enter"){var d=Zv(a,"axis","hover",String(r.index));t.dispatch(VE({active:!r.active,activeIndex:r.index,activeCoordinate:d}));return}var u=mke(a),f=u==="left-to-right"?1:-1,p=i==="ArrowRight"?1:-1,x=l+p*f;if(!(c==null||x>=c.length||x<0)){var v=Zv(a,"axis","hover",String(x));t.dispatch(VE({active:!0,activeIndex:x.toString(),activeCoordinate:v}))}}}}}});fD.startListening({actionCreator:MX,effect:(e,t)=>{var a=t.getState(),s=a.rootProps.accessibilityLayer!==!1;if(s){var{keyboardInteraction:r}=a.tooltip;if(!r.active&&r.index==null){var i="0",o=Zv(a,"axis","hover",String(i));t.dispatch(VE({active:!0,activeIndex:i,activeCoordinate:o}))}}}});var Jr=mi("externalEvent"),IX=Rx(),A2=new Map;IX.startListening({actionCreator:Jr,effect:(e,t)=>{var{handler:a,reactEvent:s}=e.payload;if(a!=null){s.persist();var r=s.type,i=A2.get(r);i!==void 0&&cancelAnimationFrame(i);var o=requestAnimationFrame(()=>{try{var l=t.getState(),c={activeCoordinate:lLe(l),activeDataKey:B4(l),activeIndex:rd(l),activeLabel:EK(l),activeTooltipIndex:rd(l),isTooltipActive:cLe(l)};a(c,s)}finally{A2.delete(r)}});A2.set(r,o)}}});var QMe=at([ah],e=>e.tooltipItemPayloads),KMe=at([QMe,Qx,(e,t)=>t,(e,t,a)=>a],(e,t,a,s)=>{var r=e.find(l=>l.settings.graphicalItemId===s);if(r!=null){var{positions:i}=r;if(i!=null){var o=t(i,a);return o}}}),$X=mi("touchMove"),RX=Rx();RX.startListening({actionCreator:$X,effect:(e,t)=>{var a=e.payload;if(!(a.touches==null||a.touches.length===0)){var s=t.getState(),r=I4(s,s.tooltip.settings.shared);if(r==="axis"){var i=a.touches[0];if(i==null)return;var o=uD(s,mD({clientX:i.clientX,clientY:i.clientY,currentTarget:a.currentTarget}));o?.activeIndex!=null&&t.dispatch(yK({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(r==="item"){var l,c=a.touches[0];if(document.elementFromPoint==null||c==null)return;var d=document.elementFromPoint(c.clientX,c.clientY);if(!d||!d.getAttribute)return;var u=d.getAttribute(BY),f=(l=d.getAttribute(HY))!==null&&l!==void 0?l:void 0,p=sh(s).find(N=>N.id===f);if(u==null||p==null||f==null)return;var{dataKey:x}=p,v=KMe(s,u,f);t.dispatch(pK({activeDataKey:x,activeIndex:u,activeCoordinate:v,activeGraphicalItemId:f}))}}}});var XMe=dY({brush:DOe,cartesianAxis:pOe,chartData:lPe,errorBars:k3e,graphicalItems:NDe,layout:o2e,legend:gAe,options:aPe,polarAxis:z4e,polarOptions:YMe,referenceElements:UOe,rootProps:WMe,tooltip:jke,zIndex:WLe}),ZMe=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return P_e({reducer:XMe,preloadedState:t,middleware:s=>{var r;return s({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((r="es6")!==null&&r!==void 0?r:"")}).concat([kX.middleware,LX.middleware,fD.middleware,IX.middleware,RX.middleware])},enhancers:s=>{var r=s;return typeof s=="function"&&(r=s()),r.concat(SY({type:"raf"}))},devTools:{serialize:{replacer:GMe},name:"recharts-".concat(a)}})};function zX(e){var{preloadedState:t,children:a,reduxStoreName:s}=e,r=Os(),i=h.useRef(null);if(r)return a;i.current==null&&(i.current=ZMe(t,s));var o=GP;return h.createElement(i5e,{context:o,store:i.current},a)}function JMe(e){var{layout:t,margin:a}=e,s=qn(),r=Os();return h.useEffect(()=>{r||(s(s2e(t)),s(a2e(a)))},[s,r,t,a]),null}var UX=h.memo(JMe,Pj);function FX(e){var t=qn();return h.useEffect(()=>{t(qMe(e))},[t,e]),null}function VF(e){var{zIndex:t,isPanorama:a}=e,s=h.useRef(null),r=qn();return h.useLayoutEffect(()=>(s.current&&r(HLe({zIndex:t,element:s.current,isPanorama:a})),()=>{r(GLe({zIndex:t,isPanorama:a}))}),[r,t,a]),h.createElement("g",{tabIndex:-1,ref:s})}function YF(e){var{children:t,isPanorama:a}=e,s=Mt(DLe);if(!s||s.length===0)return t;var r=s.filter(o=>o<0),i=s.filter(o=>o>0);return h.createElement(h.Fragment,null,r.map(o=>h.createElement(VF,{key:o,zIndex:o,isPanorama:a})),t,i.map(o=>h.createElement(VF,{key:o,zIndex:o,isPanorama:a})))}var eIe=["children"];function tIe(e,t){if(e==null)return{};var a,s,r=nIe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function nIe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function iw(){return iw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},iw.apply(null,arguments)}var aIe={width:"100%",height:"100%",display:"block"},sIe=h.forwardRef((e,t)=>{var a=t4(),s=n4(),r=iQ();if(!Do(a)||!Do(s))return null;var{children:i,otherAttributes:o,title:l,desc:c}=e,d,u;return o!=null&&(typeof o.tabIndex=="number"?d=o.tabIndex:d=r?0:void 0,typeof o.role=="string"?u=o.role:u=r?"application":void 0),h.createElement($P,iw({},o,{title:l,desc:c,role:u,tabIndex:d,width:a,height:s,style:aIe,ref:t}),i)}),rIe=e=>{var{children:t}=e,a=Mt(lj);if(!a)return null;var{width:s,height:r,y:i,x:o}=a;return h.createElement($P,{width:s,height:r,x:o,y:i},t)},QF=h.forwardRef((e,t)=>{var{children:a}=e,s=tIe(e,eIe),r=Os();return r?h.createElement(rIe,null,h.createElement(YF,{isPanorama:!0},a)):h.createElement(sIe,iw({ref:t},s),h.createElement(YF,{isPanorama:!1},a))});function iIe(){var e=qn(),[t,a]=h.useState(null),s=Mt(S2e);return h.useEffect(()=>{if(t!=null){var r=t.getBoundingClientRect(),i=r.width/t.offsetWidth;ca(i)&&i!==s&&e(i2e(i))}},[t,e,s]),a}function KF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function oIe(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?KF(Object(a),!0).forEach(function(s){lIe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):KF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function lIe(e,t,a){return(t=cIe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function cIe(e){var t=dIe(e,"string");return typeof t=="symbol"?t:t+""}function dIe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ou(){return Ou=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Ou.apply(null,arguments)}var uIe=()=>(xPe(),null);function ow(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var mIe=h.forwardRef((e,t)=>{var a,s,r=h.useRef(null),[i,o]=h.useState({containerWidth:ow((a=e.style)===null||a===void 0?void 0:a.width),containerHeight:ow((s=e.style)===null||s===void 0?void 0:s.height)}),l=h.useCallback((d,u)=>{o(f=>{var p=Math.round(d),x=Math.round(u);return f.containerWidth===p&&f.containerHeight===x?f:{containerWidth:p,containerHeight:x}})},[]),c=h.useCallback(d=>{if(typeof t=="function"&&t(d),d!=null&&typeof ResizeObserver<"u"){var{width:u,height:f}=d.getBoundingClientRect();l(u,f);var p=v=>{var{width:N,height:b}=v[0].contentRect;l(N,b)},x=new ResizeObserver(p);x.observe(d),r.current=x}},[t,l]);return h.useEffect(()=>()=>{var d=r.current;d?.disconnect()},[l]),h.createElement(h.Fragment,null,h.createElement(dj,{width:i.containerWidth,height:i.containerHeight}),h.createElement("div",Ou({ref:c},e)))}),fIe=h.forwardRef((e,t)=>{var{width:a,height:s}=e,[r,i]=h.useState({containerWidth:ow(a),containerHeight:ow(s)}),o=h.useCallback((c,d)=>{i(u=>{var f=Math.round(c),p=Math.round(d);return u.containerWidth===f&&u.containerHeight===p?u:{containerWidth:f,containerHeight:p}})},[]),l=h.useCallback(c=>{if(typeof t=="function"&&t(c),c!=null){var{width:d,height:u}=c.getBoundingClientRect();o(d,u)}},[t,o]);return h.createElement(h.Fragment,null,h.createElement(dj,{width:r.containerWidth,height:r.containerHeight}),h.createElement("div",Ou({ref:l},e)))}),hIe=h.forwardRef((e,t)=>{var{width:a,height:s}=e;return h.createElement(h.Fragment,null,h.createElement(dj,{width:a,height:s}),h.createElement("div",Ou({ref:t},e)))}),gIe=h.forwardRef((e,t)=>{var{width:a,height:s}=e;return Ml(a)||Ml(s)?h.createElement(fIe,Ou({},e,{ref:t})):h.createElement(hIe,Ou({},e,{ref:t}))});function pIe(e){return e===!0?mIe:gIe}var xIe=h.forwardRef((e,t)=>{var{children:a,className:s,height:r,onClick:i,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:d,onMouseLeave:u,onMouseMove:f,onMouseUp:p,onTouchEnd:x,onTouchMove:v,onTouchStart:N,style:b,width:C,responsive:w,dispatchTouchEvents:S=!0}=e,E=h.useRef(null),k=qn(),[A,T]=h.useState(null),[_,I]=h.useState(null),R=iIe(),U=e4(),D=U?.width>0?U.width:C,M=U?.height>0?U.height:r,W=h.useCallback(ve=>{R(ve),typeof t=="function"&&t(ve),T(ve),I(ve),ve!=null&&(E.current=ve)},[R,t,T,I]),X=h.useCallback(ve=>{k(EX(ve)),k(Jr({handler:i,reactEvent:ve}))},[k,i]),z=h.useCallback(ve=>{k(lk(ve)),k(Jr({handler:d,reactEvent:ve}))},[k,d]),Q=h.useCallback(ve=>{k(xK()),k(Jr({handler:u,reactEvent:ve}))},[k,u]),de=h.useCallback(ve=>{k(lk(ve)),k(Jr({handler:f,reactEvent:ve}))},[k,f]),Y=h.useCallback(()=>{k(MX())},[k]),se=h.useCallback(ve=>{k(OX(ve.key))},[k]),J=h.useCallback(ve=>{k(Jr({handler:o,reactEvent:ve}))},[k,o]),F=h.useCallback(ve=>{k(Jr({handler:l,reactEvent:ve}))},[k,l]),Ne=h.useCallback(ve=>{k(Jr({handler:c,reactEvent:ve}))},[k,c]),re=h.useCallback(ve=>{k(Jr({handler:p,reactEvent:ve}))},[k,p]),he=h.useCallback(ve=>{k(Jr({handler:N,reactEvent:ve}))},[k,N]),je=h.useCallback(ve=>{S&&k($X(ve)),k(Jr({handler:v,reactEvent:ve}))},[k,S,v]),De=h.useCallback(ve=>{k(Jr({handler:x,reactEvent:ve}))},[k,x]),Me=pIe(w);return h.createElement(IK.Provider,{value:A},h.createElement(HV.Provider,{value:_},h.createElement(Me,{width:D??b?.width,height:M??b?.height,className:kt("recharts-wrapper",s),style:oIe({position:"relative",cursor:"default",width:D,height:M},b),onClick:X,onContextMenu:J,onDoubleClick:F,onFocus:Y,onKeyDown:se,onMouseDown:Ne,onMouseEnter:z,onMouseLeave:Q,onMouseMove:de,onMouseUp:re,onTouchEnd:De,onTouchMove:je,onTouchStart:he,ref:W},h.createElement(uIe,null),a)))}),yIe=["width","height","responsive","children","className","style","compact","title","desc"];function bIe(e,t){if(e==null)return{};var a,s,r=vIe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function vIe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var BX=h.forwardRef((e,t)=>{var{width:a,height:s,responsive:r,children:i,className:o,style:l,compact:c,title:d,desc:u}=e,f=bIe(e,yIe),p=Or(f);return c?h.createElement(h.Fragment,null,h.createElement(dj,{width:a,height:s}),h.createElement(QF,{otherAttributes:p,title:d,desc:u},i)):h.createElement(xIe,{className:o,style:l,width:a,height:s,responsive:r??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},h.createElement(QF,{otherAttributes:p,title:d,desc:u,ref:t},h.createElement(BOe,null,i)))});function ck(){return ck=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},ck.apply(null,arguments)}var wIe={top:5,right:5,bottom:5,left:5},NIe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:wIe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},HX=h.forwardRef(function(t,a){var s,r=za(t.categoricalChartProps,NIe),{chartName:i,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,categoricalChartProps:d}=t,u={chartName:i,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,eventEmitter:void 0};return h.createElement(zX,{preloadedState:{options:u},reduxStoreName:(s=d.id)!==null&&s!==void 0?s:i},h.createElement(uX,{chartData:d.data}),h.createElement(UX,{layout:r.layout,margin:r.margin}),h.createElement(FX,{baseValue:r.baseValue,accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className,reverseStackOrder:r.reverseStackOrder}),h.createElement(BX,ck({},r,{ref:a})))}),jIe=["axis"],CIe=h.forwardRef((e,t)=>h.createElement(HX,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:jIe,tooltipPayloadSearcher:V4,categoricalChartProps:e,ref:t})),SIe=["axis","item"],_Ie=h.forwardRef((e,t)=>h.createElement(HX,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:SIe,tooltipPayloadSearcher:V4,categoricalChartProps:e,ref:t}));function AIe(e){var t=qn();return h.useEffect(()=>{t(VMe(e))},[t,e]),null}var TIe=["layout"];function dk(){return dk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},dk.apply(null,arguments)}function EIe(e,t){if(e==null)return{};var a,s,r=kIe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function kIe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var LIe={top:5,right:5,bottom:5,left:5},GX={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:LIe,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},PIe=h.forwardRef(function(t,a){var s,r=za(t.categoricalChartProps,GX),{layout:i}=r,o=EIe(r,TIe),{chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:d,tooltipPayloadSearcher:u}=t,f={chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:d,tooltipPayloadSearcher:u,eventEmitter:void 0};return h.createElement(zX,{preloadedState:{options:f},reduxStoreName:(s=r.id)!==null&&s!==void 0?s:l},h.createElement(uX,{chartData:r.data}),h.createElement(UX,{layout:i,margin:r.margin}),h.createElement(FX,{baseValue:void 0,accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className,reverseStackOrder:r.reverseStackOrder}),h.createElement(AIe,{cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius}),h.createElement(BX,dk({},o,{ref:a})))});function XF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function ZF(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?XF(Object(a),!0).forEach(function(s){DIe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):XF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function DIe(e,t,a){return(t=OIe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function OIe(e){var t=MIe(e,"string");return typeof t=="symbol"?t:t+""}function MIe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var IIe=["item"],$Ie=ZF(ZF({},GX),{},{layout:"centric",startAngle:0,endAngle:360}),RIe=h.forwardRef((e,t)=>{var a=za(e,$Ie);return h.createElement(PIe,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:IIe,tooltipPayloadSearcher:V4,categoricalChartProps:a,ref:t})});const JF={user_id:"",start_date:"",end_date:"",target_amount:"",period_type:"CUSTOM",period_year:new Date().getFullYear(),period_number:1},zIe=[{value:"MONTHLY",label:"Monthly"},{value:"QUARTERLY",label:"Quarterly"},{value:"SEMIANNUAL",label:"Semi-Annual"},{value:"ANNUAL",label:"Annual"},{value:"CUSTOM",label:"Custom"}],e7=["#6366f1","#22c55e","#f97316","#0ea5e9","#a855f7","#f43f5e","#eab308","#8b5cf6","#10b981","#ec4899","#14b8a6","#f59e0b"];function UIe({name:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",required:o=!1,isSubmitted:l=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=t.find(C=>String(C.id)===String(a)),v=x?r(x):"",N=o&&l&&!a,b=h.useMemo(()=>{const C=u.toLowerCase();return C?t.filter(w=>r(w).toLowerCase().includes(C)):t},[t,u,r]);return h.useEffect(()=>{const C=w=>{p.current&&!p.current.contains(w.target)&&d(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]),n.jsxs("div",{ref:p,className:"relative flex justify-center w-full",children:[n.jsx("input",{value:c?u:v,placeholder:i,onFocus:()=>d(!0),onChange:C=>{f(C.target.value),d(!0)},className:`w-full border rounded-lg p-1 text-gray-700 focus:outline-none focus:ring-1
          ${N?"border-red-500 focus:ring-red-400 focus:border-red-400":"border-gray-300 focus:ring-blue-400 focus:border-blue-400"}`}),c&&n.jsx("div",{className:"absolute top-full left-0 z-50 mt-1 w-full bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:b.length?b.map(C=>n.jsx("button",{type:"button",onClick:()=>{s({target:{name:e,value:String(C.id)}}),d(!1),f("")},className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-50",children:r(C)},C.id)):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results found"})})]})}function Dj({currentUserRole:e,currentUserId:t}){const{user:a,mutate:s}=Xt(),r=a?.company?.currency||"",i=r==="$"?Ide:Rde;h.useEffect(()=>{s&&s()},[s]),h.useEffect(()=>{a?.company&&console.log("Dashboard detected Company Settings:",a.company)},[a]),h.useEffect(()=>{document.title="Targets | Sari-Sari CRM"},[]);const[o,l]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState(!1),[p,x]=h.useState(""),[v,N]=h.useState(1),[b,C]=h.useState(10),[w,S]=h.useState(!1),[E,k]=h.useState(!1),[A,T]=h.useState(!1),[_,I]=h.useState(null),[R,U]=h.useState(JF),[D,M]=h.useState(null),[W,X]=h.useState(null),[z,Q]=h.useState(!1),[de,Y]=h.useState([]),[se,J]=h.useState(!1),[F,Ne]=h.useState("annual"),[re,he]=h.useState(1),[je,De]=h.useState("overview"),[Me,ve]=h.useState(null),[Be,ke]=h.useState(!1),[fe,ne]=h.useState(null),[Ae,ye]=h.useState(!1),[Ie,Ve]=h.useState(null),[Te,Fe]=h.useState(null),[Ye,B]=h.useState(new Date().getFullYear()),[xe,_e]=h.useState(""),[ce,Ee]=h.useState(1),ae=h.useMemo(()=>["CEO","ADMIN","GROUP MANAGER","MANAGER"].includes(e?.toUpperCase()),[e]),He=h.useMemo(()=>["CEO","ADMIN","GROUP MANAGER","MANAGER"].includes(e?.toUpperCase()),[e]),Re=h.useCallback(async()=>{f(!0);try{const be=await ie.get("/targets/admin/fetch-all");l(be.data)}catch(be){console.error(be),q.error("Failed to load targets.")}finally{f(!1)}},[]),it=h.useCallback(async()=>{try{if(ae){const be=await ie.get("/targets/admin/get-users");d(be.data)}}catch(be){console.error(be)}},[ae]),mt=h.useCallback(async()=>{try{const be=await ie.get("/targets/fiscal-settings");Fe(be.data)}catch(be){console.error("Failed to fetch fiscal settings:",be)}},[]),ee=h.useCallback(async()=>{ke(!0);try{const be=new URLSearchParams;xe&&be.append("period_type",xe),Ye&&be.append("period_year",Ye),ce&&be.append("period_number",ce);const We=await ie.get(`/targets/leaderboard?${be.toString()}`);ve(We.data)}catch(be){console.error(be),q.error("Failed to load leaderboard.")}finally{ke(!1)}},[xe,Ye,ce]),pe=h.useCallback(async()=>{try{const be=new URLSearchParams;xe&&be.append("period_type",xe),Ye&&be.append("period_year",Ye),ce&&be.append("period_number",ce);const We=await ie.get(`/targets/team-summary?${be.toString()}`);Ve(We.data)}catch(be){console.error(be)}},[xe,Ye,ce]),Ue=h.useCallback(async be=>{ye(!0);try{const We=await ie.get(`/targets/history/${be}`);ne(We.data)}catch(We){console.error(We),q.error("Failed to load user history.")}finally{ye(!1)}},[]);h.useEffect(()=>{Re(),it(),mt()},[Re,it,mt]),h.useEffect(()=>{je==="leaderboard"&&(ee(),pe())},[je,ee,pe]);const Ze=h.useMemo(()=>{const be=o.reduce((Tt,Et)=>Tt+(Number(Et.target_amount)||0),0),We=o.reduce((Tt,Et)=>Tt+(Number(Et.achieved_amount)||0),0),ft=be>0?(We/be*100).toFixed(1):0,yt=Math.max(0,be-We);return{totalTarget:be,totalAchieved:We,achievement:ft,remaining:yt,totalCount:o.length}},[o]),nt=h.useCallback(()=>(We=>F==="annual"?We:We.filter(ft=>{const yt=new Date(ft.start_date),Tt=new Date(ft.end_date),Et=yt.getMonth(),Gt=Tt.getMonth();let oe=!1;if(F==="semiannual")re===1?oe=Et<=5&&Gt>=0:oe=Et<=11&&Gt>=6;else if(F==="trimester"){const _t=[{start:0,end:3},{start:4,end:7},{start:8,end:11}][re-1];oe=Et<=_t.end&&Gt>=_t.start}else if(F==="quarterly"){const _t=[{start:0,end:2},{start:3,end:5},{start:6,end:8},{start:9,end:11}][re-1];oe=Et<=_t.end&&Gt>=_t.start}return oe}))(o),[o,F,re]),Je=h.useMemo(()=>{const be=nt(),We={};be.forEach(Et=>{const Gt=Et.user_id,oe=Et.user?`${Et.user.first_name} ${Et.user.last_name}`:"Unknown";We[Gt]||(We[Gt]={userId:Gt,name:oe,targetAmount:0,achievedAmount:0}),We[Gt].targetAmount+=Number(Et.target_amount)||0,We[Gt].achievedAmount+=Number(Et.achieved_amount)||0});const ft=Object.values(We).map((Et,Gt)=>({...Et,fill:e7[Gt%e7.length]})),yt=ft.reduce((Et,Gt)=>Et+Gt.targetAmount,0);return ft.map(Et=>({...Et,percentage:yt>0?(Et.targetAmount/yt*100).toFixed(1):0}))},[nt]),Oe=h.useMemo(()=>Je.slice(0,8).map(be=>({name:be.name.split(" ")[0],achievement:Number(be.achievedAmount),target:Number(be.targetAmount)})),[Je]),ge=h.useMemo(()=>{const be=p.toLowerCase();return o.filter(We=>(We.user?`${We.user.first_name} ${We.user.last_name}`.toLowerCase():"").includes(be)||We.start_date?.includes(be)||We.end_date?.includes(be))},[o,p]),Ke=Math.max(1,Math.ceil(ge.length/b)),G=h.useMemo(()=>{const be=(v-1)*b;return ge.slice(be,be+b)},[ge,v,b]),$=be=>{const{name:We,value:ft}=be.target;U(yt=>({...yt,[We]:ft}))},V=()=>{U(JF),k(!1),I(null),J(!1),S(!0)},te=be=>{U({user_id:be.user?.id?String(be.user.id):"",start_date:be.start_date||"",end_date:be.end_date||"",target_amount:be.target_amount?.toString()||"",period_type:be.period_type||"CUSTOM",period_year:be.period_year||new Date().getFullYear(),period_number:be.period_number||1}),k(!0),I(be.id),J(!1),S(!0),M(null)},Z=be=>{const We=be.user?`${be.user.first_name} ${be.user.last_name}`:"Unknown";X({title:"Delete Target",message:n.jsxs("span",{children:["Are you sure you want to delete the target for"," ",n.jsx("span",{className:"font-semibold",children:We}),"?"]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:async()=>{await ie.delete(`/targets/admin/${be.id}`),q.success("Target deleted successfully."),Re(),M(null)}})},Se=()=>{if(G.every(be=>de.includes(be.id)))Y(de.filter(be=>!G.map(We=>We.id).includes(be)));else{const be=G.map(We=>We.id);Y([...new Set([...de,...be])])}},me=be=>{Y(We=>We.includes(be)?We.filter(ft=>ft!==be):[...We,be])},ue=async()=>{de.length!==0&&X({title:"Delete Targets",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:de.length})," selected targets? This action cannot be undone."]}),confirmLabel:`Delete ${de.length} Target(s)`,cancelLabel:"Cancel",variant:"danger",action:async()=>{await ie.post("/targets/admin/bulk-delete",{target_ids:de}),q.success(`Successfully deleted ${de.length} targets`),Y([]),Re()}})},$e=be=>{if(be.preventDefault(),J(!0),!R.user_id){q.error("Assign User is required.");return}if(!R.period_type){q.error("Period Type is required.");return}if(R.period_type==="CUSTOM"){q.error("Period Type cannot be Custom. Please select a valid period type.");return}if(R.period_type!=="CUSTOM"&&R.period_type!=="ANNUAL"&&!R.period_number){q.error("Please select a period.");return}if(!R.target_amount||Number(R.target_amount)<=0){q.error("Target amount must be greater than 0.");return}if(new Date(R.end_date)<new Date(R.start_date)){q.error("End date must be after start date.");return}const We={user_id:Number(R.user_id),target_amount:Number(R.target_amount),start_date:R.start_date,end_date:R.end_date,period_type:R.period_type||"CUSTOM",period_year:R.period_year||new Date().getFullYear(),period_number:R.period_number||null},ft=E?"Update Target":"Create Target";X({title:ft,message:"Are you sure you want to proceed?",confirmLabel:ft,cancelLabel:"Cancel",variant:"primary",action:async()=>{T(!0);try{E?(await ie.put(`/targets/admin/${_}`,We),q.success("Target updated successfully.")):(await ie.post("/targets/admin/create",We),q.success("Target created successfully.")),S(!1),Re()}catch(yt){console.error(yt);const Tt=yt.response?.data?.detail||yt.message||"Operation failed.";q.error(Tt)}finally{T(!1)}}})};return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[u&&n.jsx(zt,{message:"Loading targets..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold",children:[n.jsx(tr,{className:"mr-2 text-blue-600"})," Targets"]}),ae&&n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:V,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(un,{className:"mr-2"})," Add Target"]})})]}),e?.toUpperCase()!=="SALES"&&n.jsxs("div",{className:"flex border-b border-gray-200 mb-6",children:[n.jsxs("button",{onClick:()=>De("overview"),className:`px-4 py-3 text-sm font-medium border-b-2 transition ${je==="overview"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[n.jsx(lI,{className:"inline mr-2"}),"Overview"]}),n.jsxs("button",{onClick:()=>De("leaderboard"),className:`px-4 py-3 text-sm font-medium border-b-2 transition ${je==="leaderboard"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[n.jsx(xS,{className:"inline mr-2"}),"Leaderboard"]}),n.jsxs("button",{onClick:()=>De("history"),className:`px-4 py-3 text-sm font-medium border-b-2 transition ${je==="history"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[n.jsx(zs,{className:"inline mr-2"}),"History"]})]}),je==="overview"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[n.jsx(Ac,{title:"Total Targets",value:Ze.totalCount,icon:n.jsx(tr,{size:22}),color:"blue"}),n.jsx(Ac,{title:"Target Amount",value:`${r}${Ze.totalTarget.toLocaleString("en-US",{maximumFractionDigits:0})}`,icon:n.jsx(i,{size:22}),color:"green"}),n.jsx(Ac,{title:"Achieved Amount",value:`${r}${Ze.totalAchieved.toLocaleString("en-US",{maximumFractionDigits:0})}`,icon:n.jsx(Kc,{size:22}),color:"purple"}),n.jsx(Ac,{title:"Achievement Rate",value:`${Ze.achievement}%`,icon:n.jsx(tr,{size:22}),color:"orange"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow p-4 md:h-[420px] h-[350px] flex flex-col",children:[n.jsxs("div",{className:"mb-4 text-center",children:[n.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Sales Achievement"}),n.jsx("div",{className:"h-[38px] w-full invisible"})]}),Oe.length>0?n.jsx("div",{className:"flex-1 min-h-0 w-full",children:n.jsx(n2,{width:"100%",height:"100%",children:n.jsxs(_Ie,{data:Oe,children:[n.jsx(JE,{strokeDasharray:"3 3",vertical:!1}),n.jsx(rk,{dataKey:"name",tickLine:!1,axisLine:!1,tick:{fontSize:12,fill:"#6b7280"}}),n.jsx(ok,{tickLine:!1,axisLine:!1,label:{value:"Amount",angle:-90,position:"insideLeft",offset:3},domain:[0,be=>Math.ceil(be/50)*50],tick:{fontSize:12,fill:"#6b7280"}}),n.jsx(f2,{cursor:{fill:"rgba(0, 0, 0, 0.15)"},wrapperStyle:{outline:"none",zIndex:9999,pointerEvents:"auto"},contentStyle:{backgroundColor:"#ffffff",border:"2px solid #1f2937",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.2)",zIndex:9999,pointerEvents:"auto"},labelFormatter:be=>`Sales: ${be}`,formatter:(be,We,ft)=>{if(!ft||!ft.payload)return[be,We];const yt=ft.payload,Tt=Number(yt.achievement)||0,Et=Number(yt.target)||0,Gt=Math.max(0,Et-Tt),oe=Et>0?(Tt/Et*100).toFixed(1):0;return We==="Achieved"?[`${r}${Tt.toLocaleString()} (${oe}%)`,"Achieved"]:We==="Remaining"?[`${r}${Gt.toLocaleString()}`,"Remaining"]:[be,We]}}),n.jsx(ak,{dataKey:"achievement",stackId:"a",fill:"#10b981",name:"Achieved",label:({x:be,y:We,width:ft,value:yt,payload:Tt})=>{if(!Tt||Tt.target===void 0)return null;const Et=(yt/Tt.target*100).toFixed(0),Gt=We-10<0?10:We-10;return n.jsxs("text",{x:be+ft/2,y:Gt,textAnchor:"middle",fill:"#111827",fontSize:10,fontWeight:500,children:[Et,"%"]})}}),n.jsx(ak,{dataKey:be=>Math.max(0,be.target-be.achievement),stackId:"a",fill:"#e5e7eb",name:"Remaining",radius:[0,4,4,0]})]})})}):n.jsxs("div",{className:"flex flex-col items-center justify-center flex-1 text-gray-400",children:[n.jsx(fie,{size:48,className:"mb-2 opacity-20"}),n.jsx("p",{className:"text-gray-500 font-medium text-center",children:"No sales data available"})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow p-4 md:h-[420px] h-[350px] flex flex-col",children:[n.jsxs("div",{className:"text-center mb-4",children:[n.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Target Distribution by Sales"}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center items-center flex-wrap",children:[n.jsxs("select",{value:F,onChange:be=>{Ne(be.target.value),he(1)},className:"border border-gray-300 rounded px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"annual",children:"Annual"}),n.jsx("option",{value:"semiannual",children:"Every 6 Months"}),n.jsx("option",{value:"trimester",children:"Every 4 Months"}),n.jsx("option",{value:"quarterly",children:"Quarterly"})]}),F!=="annual"&&n.jsxs("select",{value:re,onChange:be=>he(parseInt(be.target.value)),className:"border border-gray-300 rounded px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[F==="semiannual"&&n.jsxs(n.Fragment,{children:[n.jsx("option",{value:1,children:"Jan - Jun"}),n.jsx("option",{value:2,children:"Jul - Dec"})]}),F==="trimester"&&n.jsxs(n.Fragment,{children:[n.jsx("option",{value:1,children:"Jan - Apr"}),n.jsx("option",{value:2,children:"May - Aug"}),n.jsx("option",{value:3,children:"Sep - Dec"})]}),F==="quarterly"&&n.jsxs(n.Fragment,{children:[n.jsx("option",{value:1,children:"Q1 (Jan - Mar)"}),n.jsx("option",{value:2,children:"Q2 (Apr - Jun)"}),n.jsx("option",{value:3,children:"Q3 (Jul - Sep)"}),n.jsx("option",{value:4,children:"Q4 (Oct - Dec)"})]})]})]})]}),Je.length>0?n.jsx("div",{className:"flex-1 min-h-0 w-full",children:n.jsx(n2,{width:"100%",height:"100%",children:n.jsxs(RIe,{children:[n.jsx(f2,{contentStyle:{backgroundColor:"#fff",border:"1px solid #333",borderRadius:"6px",padding:"10px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",outline:"none"},content:({active:be,payload:We})=>{if(be&&We&&We.length>0){const ft=We[0].payload;return n.jsxs("div",{className:"bg-white p-3 border border-gray-300 rounded shadow-lg",children:[n.jsx("p",{className:"text-sm font-semibold text-gray-800",children:ft.name}),n.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[n.jsx("span",{className:"font-semibold",children:"Target Amount:"})," ",r,Number(ft.targetAmount||0).toLocaleString("en-US",{maximumFractionDigits:0})]}),n.jsxs("p",{className:"text-xs text-purple-600 font-semibold mt-2",children:["Distribution: ",ft.percentage,"%"]})]})}return null}}),n.jsx(lX,{data:Je,dataKey:"targetAmount",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:({name:be,percentage:We,fill:ft})=>n.jsxs("text",{fill:ft,fontSize:12,fontWeight:600,children:[be.split(" ")[0],": ",We,"%"]}),labelLine:!1,isAnimationActive:!0,animationDuration:800})]})})}):n.jsxs("div",{className:"flex flex-col items-center justify-center flex-1 text-gray-400",children:[n.jsx(lI,{size:48,className:"mb-2 opacity-20"}),n.jsx("p",{className:"text-gray-500 font-medium text-center",children:"No targets data available"})]})]})]}),ae&&n.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Ht,{className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search targets...",value:p,onChange:be=>x(be.target.value),className:"w-full outline-none"})]})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 font-semibold text-gray-600",children:n.jsxs("tr",{children:[He&&n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:G.length>0&&G.every(be=>de.includes(be.id)),onChange:Se})}),n.jsx("th",{className:"py-3 px-4 text-left",children:"User"}),n.jsx("th",{className:"py-3 px-4 text-left",children:"Target Amount"}),n.jsx("th",{className:"py-3 px-4 text-left",children:"Achieved Amount"}),n.jsx("th",{className:"py-3 px-4 text-left",children:"Achievement %"}),n.jsx("th",{className:"py-3 px-4 text-left",children:"Start Date"}),n.jsx("th",{className:"py-3 px-4 text-left",children:"End Date"}),He&&n.jsx("th",{className:"py-3 px-4 text-center w-24",children:de.length>0?n.jsx("button",{onClick:ue,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${de.length} selected targets`,children:n.jsx(Ut,{size:18})}):""})]})}),n.jsx("tbody",{children:G.length>0?G.map(be=>{const We=Number(be.target_amount)>0?(Number(be.achieved_amount)/Number(be.target_amount)*100).toFixed(1):0;return n.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer border-b border-gray-200",children:[He&&n.jsx("td",{className:"py-3 px-4",onClick:ft=>ft.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:de.includes(be.id),onChange:()=>me(be.id)})}),n.jsx("td",{className:"py-3 px-4 text-left font-medium",onClick:()=>M(be),children:be.user?`${be.user.first_name} ${be.user.last_name}`:"Unknown"}),n.jsxs("td",{className:"py-3 px-4 text-left",onClick:()=>M(be),children:[r,Number(be.target_amount).toLocaleString()]}),n.jsxs("td",{className:"py-3 px-4 text-left",onClick:()=>M(be),children:[r,Number(be.achieved_amount).toLocaleString()]}),n.jsx("td",{className:"py-3 px-4 text-left",onClick:()=>M(be),children:n.jsxs("span",{className:`px-2 py-1 rounded text-white text-xs font-semibold ${We>=100?"bg-green-500":We>=75?"bg-blue-500":We>=50?"bg-yellow-500":"bg-red-500"}`,children:[We,"%"]})}),n.jsx("td",{className:"py-3 px-4 text-left",onClick:()=>M(be),children:be.start_date}),n.jsx("td",{className:"py-3 px-4 text-left",onClick:()=>M(be),children:be.end_date}),n.jsx("td",{})]},be.id)}):n.jsx("tr",{children:n.jsx("td",{colSpan:"8",className:"py-4 px-4 text-center text-gray-500",children:"No targets found"})})})]})}),n.jsx(tn,{className:"mt-4",totalItems:ge.length,pageSize:b,currentPage:v,onPrev:()=>N(be=>Math.max(be-1,1)),onNext:()=>N(be=>Math.min(be+1,Ke)),onPageSizeChange:be=>{C(be),N(1)},pageSizeOptions:[10,20,30,40,50],label:"targets"})]}),je==="leaderboard"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm flex flex-wrap gap-4 items-center",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ct,{className:"text-gray-500"}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filter by Period:"})]}),n.jsx("select",{value:Ye,onChange:be=>B(Number(be.target.value)),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[...Array(5)].map((be,We)=>{const ft=new Date().getFullYear()-We;return n.jsx("option",{value:ft,children:ft},ft)})}),n.jsxs("select",{value:xe,onChange:be=>{_e(be.target.value),Ee(1)},className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[n.jsx("option",{value:"",children:"All Periods"}),n.jsx("option",{value:"MONTHLY",children:"Monthly"}),n.jsx("option",{value:"QUARTERLY",children:"Quarterly"}),n.jsx("option",{value:"SEMIANNUAL",children:"Semi-Annual"}),n.jsx("option",{value:"ANNUAL",children:"Annual"})]}),xe==="QUARTERLY"&&n.jsxs("select",{value:ce,onChange:be=>Ee(Number(be.target.value)),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[n.jsx("option",{value:1,children:"Q1"}),n.jsx("option",{value:2,children:"Q2"}),n.jsx("option",{value:3,children:"Q3"}),n.jsx("option",{value:4,children:"Q4"})]}),xe==="SEMIANNUAL"&&n.jsxs("select",{value:ce,onChange:be=>Ee(Number(be.target.value)),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[n.jsx("option",{value:1,children:"H1 (Jan-Jun)"}),n.jsx("option",{value:2,children:"H2 (Jul-Dec)"})]}),xe==="MONTHLY"&&n.jsx("select",{value:ce,onChange:be=>Ee(Number(be.target.value)),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((be,We)=>n.jsx("option",{value:We+1,children:be},We))}),n.jsx("button",{onClick:ee,className:"bg-blue-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-blue-700",children:"Apply Filter"})]}),Ie&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsx(Ac,{title:"Sales Reps",value:Ie.total_sales_reps,icon:n.jsx(Zn,{size:22}),color:"blue"}),n.jsx(Ac,{title:"Met Quota",value:Ie.above_target_count,icon:n.jsx(Kc,{size:22}),color:"green"}),n.jsx(Ac,{title:"Below Quota",value:Ie.below_target_count,icon:n.jsx(yS,{size:22}),color:"orange"}),n.jsx(Ac,{title:"Team Achievement",value:`${Ie.overall_achievement}%`,icon:n.jsx(tr,{size:22}),color:"purple"})]}),Be?n.jsx(zt,{message:"Loading leaderboard..."}):Me?.entries?.length>0?n.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[n.jsx("div",{className:"p-4 border-b border-gray-200",children:n.jsxs("h2",{className:"text-lg font-semibold flex items-center",children:[n.jsx(xS,{className:"mr-2 text-yellow-500"}),"Sales Leaderboard",Me.period_type!=="ALL"&&n.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-500",children:["(",Me.period_type," ",Me.period_year,")"]})]})}),n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Rank"}),n.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Sales Rep"}),n.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Role"}),n.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Target"}),n.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Achieved"}),n.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Achievement"}),n.jsx("th",{className:"py-3 px-4 text-center font-semibold text-gray-600",children:"Actions"})]})}),n.jsx("tbody",{children:Me.entries.map(be=>n.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`inline-flex items-center justify-center w-8 h-8 rounded-full font-bold text-sm ${be.rank===1?"bg-yellow-100 text-yellow-700":be.rank===2?"bg-gray-100 text-gray-700":be.rank===3?"bg-orange-100 text-orange-700":"bg-gray-50 text-gray-600"}`,children:be.rank})}),n.jsx("td",{className:"py-3 px-4 font-medium",children:be.user_name}),n.jsx("td",{className:"py-3 px-4 text-gray-500",children:be.role}),n.jsxs("td",{className:"py-3 px-4 text-right",children:[r,Number(be.target_amount).toLocaleString()]}),n.jsxs("td",{className:"py-3 px-4 text-right",children:[r,Number(be.achieved_amount).toLocaleString()]}),n.jsx("td",{className:"py-3 px-4 text-right",children:n.jsxs("span",{className:`px-2 py-1 rounded text-white text-xs font-semibold ${be.achievement_percentage>=100?"bg-green-500":be.achievement_percentage>=75?"bg-blue-500":be.achievement_percentage>=50?"bg-yellow-500":"bg-red-500"}`,children:[be.achievement_percentage,"%"]})}),n.jsx("td",{className:"py-3 px-4 text-center",children:n.jsx("button",{onClick:()=>{Ue(be.user_id),De("history")},className:"text-blue-600 hover:text-blue-800 text-sm",children:"View History"})})]},be.user_id))})]})]}):n.jsxs("div",{className:"bg-white rounded-xl p-8 text-center text-gray-500",children:[n.jsx(xS,{size:48,className:"mx-auto mb-4 opacity-20"}),n.jsx("p",{children:"No leaderboard data available for the selected period."})]}),Ie?.needs_attention?.length>0&&n.jsxs("div",{className:"bg-red-50 rounded-xl p-4 border border-red-200",children:[n.jsxs("h3",{className:"text-lg font-semibold text-red-800 mb-3 flex items-center",children:[n.jsx(yS,{className:"mr-2"}),"Needs Attention (Below 50%)"]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:Ie.needs_attention.map(be=>n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-red-100",children:[n.jsx("p",{className:"font-medium text-gray-800",children:be.user_name}),n.jsx("p",{className:"text-sm text-gray-500",children:be.role}),n.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[n.jsxs("span",{className:"text-red-600 font-semibold",children:[be.achievement_percentage,"%"]}),n.jsxs("span",{className:"text-xs text-gray-500",children:[r,Number(be.remaining_amount).toLocaleString()," remaining"]})]})]},be.user_id))})]})]}),je==="history"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Select Sales Rep to View History:"}),n.jsx("div",{className:"flex gap-4 flex-wrap",children:n.jsxs("select",{onChange:be=>be.target.value&&Ue(Number(be.target.value)),className:"border border-gray-300 rounded-lg px-4 py-2 text-sm",value:fe?.user_id||"",children:[n.jsx("option",{value:"",children:"-- Select User --"}),c.map(be=>n.jsxs("option",{value:be.id,children:[be.first_name," ",be.last_name]},be.id))]})})]}),Ae?n.jsx(zt,{message:"Loading history..."}):fe?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:fe.user_name}),fe.current_period&&fe.previous_period&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[n.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Current Period"}),n.jsx("p",{className:"text-xs text-gray-500",children:fe.current_period.period_label}),n.jsxs("p",{className:"text-2xl font-bold text-blue-700 mt-2",children:[fe.current_period.achievement_percentage,"%"]}),n.jsxs("p",{className:"text-sm text-gray-600",children:[r,Number(fe.current_period.achieved_amount).toLocaleString()," / ",r,Number(fe.current_period.target_amount).toLocaleString()]})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Previous Period"}),n.jsx("p",{className:"text-xs text-gray-500",children:fe.previous_period.period_label}),n.jsxs("p",{className:"text-2xl font-bold text-gray-700 mt-2",children:[fe.previous_period.achievement_percentage,"%"]}),n.jsxs("p",{className:"text-sm text-gray-600",children:[r,Number(fe.previous_period.achieved_amount).toLocaleString()," / ",r,Number(fe.previous_period.target_amount).toLocaleString()]})]}),n.jsxs("div",{className:`rounded-lg p-4 ${fe.growth_percentage>=0?"bg-green-50":"bg-red-50"}`,children:[n.jsx("p",{className:"text-sm font-medium",style:{color:fe.growth_percentage>=0?"#16a34a":"#dc2626"},children:"Growth"}),n.jsxs("p",{className:`text-2xl font-bold mt-2 flex items-center ${fe.growth_percentage>=0?"text-green-700":"text-red-700"}`,children:[fe.growth_percentage>=0?n.jsx(Kc,{className:"mr-2"}):n.jsx(yS,{className:"mr-2"}),fe.growth_percentage>=0?"+":"",fe.growth_percentage?.toFixed(1),"%"]}),n.jsxs("p",{className:"text-sm text-gray-600",children:[fe.growth_amount>=0?"+":"",r,Number(fe.growth_amount||0).toLocaleString()]})]})]}),fe.periods?.length>0&&n.jsx("div",{className:"h-64",children:n.jsx(n2,{width:"100%",height:"100%",children:n.jsxs(CIe,{data:[...fe.periods].reverse(),children:[n.jsx(JE,{strokeDasharray:"3 3"}),n.jsx(rk,{dataKey:"period_label",tick:{fontSize:12}}),n.jsx(ok,{tick:{fontSize:12}}),n.jsx(f2,{formatter:(be,We)=>[`${r}${Number(be).toLocaleString()}`,We==="achieved_amount"?"Achieved":"Target"]}),n.jsx(rQ,{}),n.jsx(ek,{type:"monotone",dataKey:"target_amount",stroke:"#6366f1",name:"Target",strokeWidth:2}),n.jsx(ek,{type:"monotone",dataKey:"achieved_amount",stroke:"#22c55e",name:"Achieved",strokeWidth:2})]})})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[n.jsx("div",{className:"p-4 border-b border-gray-200",children:n.jsx("h3",{className:"font-semibold",children:"All Historical Periods"})}),n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Period"}),n.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Date Range"}),n.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Target"}),n.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Achieved"}),n.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Achievement"})]})}),n.jsx("tbody",{children:fe.periods.map((be,We)=>n.jsxs("tr",{className:"border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 font-medium",children:be.period_label}),n.jsxs("td",{className:"py-3 px-4 text-gray-500",children:[be.start_date," - ",be.end_date]}),n.jsxs("td",{className:"py-3 px-4 text-right",children:[r,Number(be.target_amount).toLocaleString()]}),n.jsxs("td",{className:"py-3 px-4 text-right",children:[r,Number(be.achieved_amount).toLocaleString()]}),n.jsx("td",{className:"py-3 px-4 text-right",children:n.jsxs("span",{className:`px-2 py-1 rounded text-white text-xs font-semibold ${be.achievement_percentage>=100?"bg-green-500":be.achievement_percentage>=75?"bg-blue-500":be.achievement_percentage>=50?"bg-yellow-500":"bg-red-500"}`,children:[be.achievement_percentage,"%"]})})]},We))})]})]})]}):n.jsxs("div",{className:"bg-white rounded-xl p-8 text-center text-gray-500",children:[n.jsx(zs,{size:48,className:"mx-auto mb-4 opacity-20"}),n.jsx("p",{children:"Select a sales rep to view their historical performance."})]})]})]}),D&&n.jsx(FIe,{target:D,currencySymbol:r,onClose:()=>M(null),onEdit:()=>te(D),onDelete:()=>Z(D),canEdit:ae,canDelete:He}),w&&ae&&n.jsx(BIe,{formData:R,users:c,isEditing:E,isSubmitting:A,isSubmitted:se,onChange:$,onClose:()=>S(!1),onSubmit:$e,fiscalSettings:Te}),W&&n.jsx(HIe,{...W,loading:z,onConfirm:async()=>{Q(!0),await W.action(),Q(!1),X(null)},onCancel:()=>X(null)})]})}function Ac({title:e,value:t,icon:a,color:s="blue"}){const r={blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",purple:"bg-purple-100 text-purple-600",orange:"bg-orange-100 text-orange-600"};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200",children:[n.jsx("div",{className:`p-3 rounded-full ${r[s]} mr-4`,children:a}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:e}),n.jsx("p",{className:"text-2xl font-bold",children:t})]})]})}function FIe({target:e,onClose:t,onEdit:a,onDelete:s,canEdit:r,canDelete:i,currencySymbol:o}){const l=Number(e.target_amount)>0?(Number(e.achieved_amount)/Number(e.target_amount)*100).toFixed(1):0;return n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",onClick:t,children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:c=>c.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-4 rounded-t-xl",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Target Details"}),n.jsx("button",{onClick:t,className:"text-gray-200 hover:text-white transition cursor-pointer",children:n.jsx(Vt,{size:25})})]}),r&&n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:e.user&&`${e.user.first_name} ${e.user.last_name}`})}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 cursor-pointer",onClick:a,children:[n.jsx(ia,{className:"mr-2"}),"Edit"]}),i&&n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400 cursor-pointer",onClick:s,children:[n.jsx(Ut,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"})]}),n.jsxs("div",{className:"p-4 lg:p-6",children:[n.jsx("div",{className:"flex w-full bg-gray-600 text-white overflow-x-auto",children:n.jsx("button",{className:"flex-1 min-w-[90px] px-4 py-2 lg:text-lg text-sm font-medium text-center text-white",children:"Overview"})}),n.jsx("div",{className:"bg-white rounded-xl shadow-sm sm:p-6 lg:p-5 border border-gray-200 text-sm text-gray-700",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Sales Person:"}),n.jsx("p",{children:e.user?`${e.user.first_name} ${e.user.last_name}`:"Unknown"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Target Amount:"}),n.jsxs("p",{className:"text-green-600 font-semibold",children:[o,Number(e.target_amount).toLocaleString()]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Achieved Amount:"}),n.jsxs("p",{className:"text-blue-600 font-semibold",children:[o,Number(e.achieved_amount).toLocaleString()]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Achievement Rate:"}),n.jsxs("p",{className:`font-semibold ${l>=100?"text-green-600":l>=75?"text-blue-600":l>=50?"text-yellow-600":"text-red-600"}`,children:[l,"%"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Start Date:"}),n.jsx("p",{children:e.start_date})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"End Date:"}),n.jsx("p",{children:e.end_date})]})]})})]})]})})}function BIe({formData:e,users:t,isEditing:a,isSubmitting:s,onChange:r,onClose:i,onSubmit:o,fiscalSettings:l,isSubmitted:c}){const d=l?.fiscal_start_month||1,u=c&&(!e.target_amount||Number(e.target_amount)<=0),f=c&&(e.period_type==="CUSTOM"||!e.period_type),p=C=>{const w=C.getFullYear(),S=String(C.getMonth()+1).padStart(2,"0"),E=String(C.getDate()).padStart(2,"0");return`${w}-${S}-${E}`},x=(C,w,S)=>{let E,k;if(C==="MONTHLY")E=new Date(w,S-1,1),k=new Date(w,S,0);else if(C==="QUARTERLY"){const A=(S-1)*3,T=(d-1+A)%12;let _=w;d>1&&(T>=d-1?_=w-1:_=w),E=new Date(_,T,1);const I=(T+2)%12,R=T+2>=12?_+1:_;k=new Date(R,I+1,0)}else if(C==="SEMIANNUAL"){const A=(S-1)*6,T=(d-1+A)%12;let _=w;d>1&&(T>=d-1?_=w-1:_=w),E=new Date(_,T,1);const I=(T+5)%12,R=T+5>=12?_+1:_;k=new Date(R,I+1,0)}else if(C==="ANNUAL"){const A=d-1;let T=d>1?w-1:w;E=new Date(T,A,1);const _=(d-2+12)%12;k=new Date(T+1,_+1,0)}return{startDate:E,endDate:k}},v=C=>{const w=C.target.value;if(r({target:{name:"period_type",value:w}}),w!=="CUSTOM"){const S=e.period_year||new Date().getFullYear(),E=e.period_number||1,{startDate:k,endDate:A}=x(w,S,E);k&&A&&(r({target:{name:"start_date",value:p(k)}}),r({target:{name:"end_date",value:p(A)}}))}},N=C=>{const w=Number(C.target.value);r({target:{name:"period_number",value:w}});const S=e.period_year||new Date().getFullYear(),E=e.period_type;if(E!=="CUSTOM"){const{startDate:k,endDate:A}=x(E,S,w);k&&A&&(r({target:{name:"start_date",value:p(k)}}),r({target:{name:"end_date",value:p(A)}}))}},b=C=>{const w=Number(C.target.value);r({target:{name:"period_year",value:w}});const S=e.period_type,E=e.period_number||1;if(S!=="CUSTOM"){const{startDate:k,endDate:A}=x(S,w,E);k&&A&&(r({target:{name:"start_date",value:p(k)}}),r({target:{name:"end_date",value:p(A)}}))}};return h.useEffect(()=>{if(e.period_type!=="CUSTOM"&&!e.start_date){const C=e.period_year||new Date().getFullYear(),w=e.period_number||1,{startDate:S,endDate:E}=x(e.period_type,C,w);S&&E&&(r({target:{name:"start_date",value:p(S)}}),r({target:{name:"end_date",value:p(E)}}))}},[l]),n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl p-8 relative overflow-y-auto max-h-[90vh] hide-scrollbar",children:[n.jsx("button",{onClick:i,className:"absolute top-5 right-5",children:n.jsx(Vt,{size:24})}),n.jsx("h2",{className:"text-2xl font-semibold text-center mb-6",children:a?"Edit Target":"Add New Target"}),n.jsxs("form",{onSubmit:o,noValidate:!0,className:"grid gap-4 text-base",children:[n.jsxs("div",{className:"flex flex-col gap-1 relative",children:[n.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Assign User ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(UIe,{name:"user_id",items:t,value:e.user_id,onChange:r,getLabel:C=>`${C.first_name} ${C.last_name}`,placeholder:"Search user...",required:!0,isSubmitted:c})]}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("label",{className:"text-sm font-medium text-gray-700 text-left",children:["Period Type ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("select",{name:"period_type",value:e.period_type,onChange:v,isSubmitted:c,className:`w-full border rounded-lg p-2 text-gray-700 focus:outline-none focus:ring-1
                ${f?"border-red-500 focus:ring-red-400 focus:border-red-400":"border-gray-300 focus:ring-blue-400 focus:border-blue-400"}`,children:zIe.map(C=>n.jsx("option",{value:C.value,children:C.label},C.value))})]}),e.period_type!=="CUSTOM"&&e.period_type!=="ANNUAL"&&n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:e.period_type==="MONTHLY"?"Month":e.period_type==="QUARTERLY"?"Quarter":"Half"}),n.jsxs("select",{name:"period_number",value:e.period_number,onChange:N,required:!0,className:"w-full border text-gray-500 border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400",children:[e.period_type==="MONTHLY"&&["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((C,w)=>n.jsx("option",{value:w+1,children:C},w)),e.period_type==="QUARTERLY"&&[1,2,3,4].map(C=>n.jsxs("option",{value:C,children:["Q",C," ",l?.quarters?.[`Q${C}`]?`(${l.quarters[`Q${C}`]})`:""]},C)),e.period_type==="SEMIANNUAL"&&[1,2].map(C=>n.jsxs("option",{value:C,children:["H",C," ",l?.halves?.[`H${C}`]?`(${l.halves[`H${C}`]})`:`(${C===1?"Jan-Jun":"Jul-Dec"})`]},C))]})]}),e.period_type!=="CUSTOM"&&n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:d!==1?"Fiscal Year":"Year"}),n.jsx("select",{name:"period_year",value:e.period_year,onChange:b,className:"w-full border text-gray-500 border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400",children:[...Array(5)].map((C,w)=>{const S=new Date().getFullYear()+1-w;return n.jsx("option",{value:S,children:d!==1?`FY${S}`:S},S)})})]}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("label",{className:"text-sm font-medium text-gray-700 text-left",children:["Target Amount ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:"flex justify-center w-full",children:n.jsx("input",{type:"number",name:"target_amount",placeholder:"0.00",value:e.target_amount,onChange:r,required:!0,className:`w-full max-w-md border rounded-lg p-2 text-gray-700 focus:outline-none focus:ring-1
        ${u?"border-red-500 focus:ring-red-400 focus:border-red-400":"border-gray-300 focus:ring-blue-400 focus:border-blue-400"}`})})]}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("label",{className:"text-sm font-medium text-gray-700 text-left",children:["Start Date ",e.period_type!=="CUSTOM"&&n.jsx("span",{className:"text-gray-400 text-xs",children:"(auto-calculated)"})]}),n.jsx("div",{className:"flex justify-center w-full",children:n.jsx("input",{type:"date",name:"start_date",value:e.start_date,onChange:r,className:"w-full max-w-md border text-gray-500 border-gray-300 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"})})]}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:"End Date"}),n.jsx("div",{className:"flex justify-center w-full",children:n.jsx("input",{type:"date",name:"end_date",value:e.end_date,onChange:r,className:"w-full max-w-md border text-gray-500 border-gray-300 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"})})]}),n.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[n.jsx("button",{type:"button",onClick:i,className:"bg-red-400 text-white px-5 py-2 rounded-lg",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:s,className:"bg-tertiary text-white px-5 py-2 rounded-lg hover:bg-tertiary/90 disabled:opacity-50",children:s?"Saving...":"Save Target"})]})]})]})})}function HIe({title:e,message:t,confirmLabel:a,cancelLabel:s,variant:r,loading:i,onConfirm:o,onCancel:l}){return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:e}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:t}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{onClick:l,disabled:i,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:s}),n.jsx("button",{onClick:o,disabled:i,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${r==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-tertiary/90 border border-tertiary"}`,children:i?"Processing...":a})]})]})})}function GIe(){const{userRole:e}=Bs();return n.jsx(Dj,{currentUserRole:e,currentUserId:null})}const t7=[{value:"Product",label:"Product"},{value:"Service",label:"Service"}],T2={id:null,item_type:"Product",name:"",description:"",sku:"",variant:"",unit:"pcs",quantity:1,unit_price:0,discount_percent:0,discount_amount:0,line_total:0,sort_order:0},Qy=e=>{const t=parseFloat(e.quantity)||0,a=parseFloat(e.unit_price)||0,s=parseFloat(e.discount_percent)||0,r=t*a,i=r*(s/100),o=r-i;return{discount_amount:i,line_total:o}},Tc=(e,t="")=>{const a=parseFloat(e)||0;return`${t}${a.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`};function od({items:e=[],onChange:t,currencySymbol:a="",readOnly:s=!1,taxRate:r=0,discountType:i=null,discountValue:o=0,onTotalsChange:l}){const[c,d]=h.useState(null),[u,f]=h.useState(null),[p,x]=h.useState(!1),[v,N]=h.useState({...T2});h.useEffect(()=>{if(l){const _=e.reduce((M,W)=>M+(parseFloat(W.line_total)||0),0);let I=0;i==="percentage"&&o?I=_*(parseFloat(o)/100):i==="fixed"&&o&&(I=parseFloat(o));const R=_-I,U=R*(parseFloat(r)/100),D=R+U;l({subtotal:_,discount_amount:I,tax_amount:U,total_amount:D})}},[e,r,i,o,l]);const b=h.useCallback(()=>{if(!v.name.trim()){q.error("Item name is required");return}if(parseFloat(v.unit_price)<=0){q.error("Unit price must be greater than 0");return}if(parseFloat(v.quantity)<=0){q.error("Quantity must be greater than 0");return}const _=Qy(v),I={...v,..._,sort_order:e.length};t([...e,I]),N({...T2}),x(!1),q.success("Item added")},[v,e,t]),C=_=>{if(!u){q.error("No item being edited");return}if(!u.name.trim()){q.error("Item name is required");return}if(parseFloat(u.unit_price)<=0){q.error("Unit price must be greater than 0");return}if(parseFloat(u.quantity)<=0){q.error("Quantity must be greater than 0");return}const I=Qy(u),R={...u,...I},U=e.map((D,M)=>M===_?R:D);t(U),d(null),f(null),q.success("Item updated")},w=h.useCallback(_=>{const I=e.filter((R,U)=>U!==_);I.forEach((R,U)=>{R.sort_order=U}),t(I),q.success("Item removed")},[e,t]),S=h.useCallback((_,I)=>{const R=I==="up"?_-1:_+1;if(R<0||R>=e.length)return;const U=[...e];[U[_],U[R]]=[U[R],U[_]],U.forEach((D,M)=>{D.sort_order=M}),t(U)},[e,t]),E=_=>{d(_),f({...e[_]})},k=()=>{d(null),f(null)},A=e.reduce((_,I)=>_+(parseFloat(I.line_total)||0),0),T=(_,I)=>c===I&&!s?n.jsxs("tr",{className:"bg-blue-50",children:[n.jsx("td",{className:"px-3 py-2",children:n.jsx("select",{value:u.item_type,onChange:U=>f(D=>({...D,item_type:U.target.value})),className:"w-full px-2 py-1 border rounded text-sm",children:t7.map(U=>n.jsx("option",{value:U.value,children:U.label},U.value))})}),n.jsxs("td",{className:"px-3 py-2",children:[n.jsx("input",{type:"text",value:u.name,onChange:U=>f(D=>({...D,name:U.target.value})),className:"w-full px-2 py-1 border rounded text-sm",placeholder:"Name *"}),n.jsx("input",{type:"text",value:u.variant||"",onChange:U=>f(D=>({...D,variant:U.target.value})),className:"w-full px-2 py-1 border rounded text-sm mt-1",placeholder:"Variant (optional)"})]}),n.jsx("td",{className:"px-3 py-2",children:n.jsx("input",{type:"text",value:u.sku||"",onChange:U=>f(D=>({...D,sku:U.target.value})),className:"w-full px-2 py-1 border rounded text-sm",placeholder:"SKU"})}),n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{className:"flex gap-1",children:[n.jsx("input",{type:"number",value:u.quantity,onChange:U=>f(D=>({...D,quantity:U.target.value})),className:"w-16 px-2 py-1 border rounded text-sm text-right",min:"0.01",step:"0.01"}),n.jsx("input",{type:"text",value:u.unit||"",onChange:U=>f(D=>({...D,unit:U.target.value})),className:"w-16 px-2 py-1 border rounded text-sm",placeholder:"Unit"})]})}),n.jsx("td",{className:"px-3 py-2",children:n.jsx("input",{type:"number",value:u.unit_price,onChange:U=>f(D=>({...D,unit_price:U.target.value})),className:"w-24 px-2 py-1 border rounded text-sm text-right",min:"0",step:"0.01"})}),n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("input",{type:"number",value:u.discount_percent||0,onChange:U=>f(D=>({...D,discount_percent:U.target.value})),className:"w-16 px-2 py-1 border rounded text-sm text-right",min:"0",max:"100",step:"0.01"}),n.jsx("span",{className:"text-sm text-gray-500",children:"%"})]})}),n.jsx("td",{className:"px-3 py-2 text-right font-medium",children:Tc(Qy(u).line_total,a)}),n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{type:"button",onClick:()=>C(I),className:"p-1 text-green-600 hover:bg-green-100 rounded",title:"Save",children:n.jsx(Rk,{size:16})}),n.jsx("button",{type:"button",onClick:k,className:"p-1 text-gray-600 hover:bg-gray-100 rounded",title:"Cancel",children:n.jsx(Vt,{size:16})})]})})]},_.id||`edit-${I}`):n.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[n.jsx("td",{className:"px-3 py-2",children:n.jsx("span",{className:`inline-block px-2 py-0.5 rounded text-xs font-medium ${_.item_type==="Service"?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:_.item_type})}),n.jsxs("td",{className:"px-3 py-2",children:[n.jsx("div",{className:"font-medium text-gray-900",children:_.name}),_.variant&&n.jsx("div",{className:"text-xs text-gray-500",children:_.variant}),_.description&&n.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:_.description})]}),n.jsx("td",{className:"px-3 py-2 text-gray-600 text-sm",children:_.sku||"-"}),n.jsxs("td",{className:"px-3 py-2 text-center",children:[n.jsx("span",{className:"font-medium",children:parseFloat(_.quantity).toLocaleString()}),_.unit&&n.jsx("span",{className:"text-gray-500 text-sm ml-1",children:_.unit})]}),n.jsx("td",{className:"px-3 py-2 text-right",children:Tc(_.unit_price,a)}),n.jsx("td",{className:"px-3 py-2 text-right text-sm",children:parseFloat(_.discount_percent)>0?n.jsxs("span",{className:"text-red-600",children:["-",parseFloat(_.discount_percent).toFixed(1),"%"]}):n.jsx("span",{className:"text-gray-400",children:"-"})}),n.jsx("td",{className:"px-3 py-2 text-right font-medium",children:Tc(_.line_total,a)}),!s&&n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{type:"button",onClick:()=>S(I,"up"),disabled:I===0,className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded disabled:opacity-30",title:"Move up",children:n.jsx(gie,{size:14})}),n.jsx("button",{type:"button",onClick:()=>S(I,"down"),disabled:I===e.length-1,className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded disabled:opacity-30",title:"Move down",children:n.jsx(jt,{size:14})}),n.jsx("button",{type:"button",onClick:()=>E(I),className:"p-1 text-blue-600 hover:bg-blue-100 rounded",title:"Edit",children:n.jsx(la,{size:14})}),n.jsx("button",{type:"button",onClick:()=>w(I),className:"p-1 text-red-600 hover:bg-red-100 rounded",title:"Delete",children:n.jsx(Ut,{size:14})})]})})]},_.id||`row-${I}`);return n.jsxs("div",{className:"border border-gray-300 rounded-lg overflow-hidden bg-white",children:[n.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-50 border border-gray-300",children:[n.jsxs("h3",{className:"font-semibold text-gray-800",children:["Line Items ",e.length>0&&n.jsxs("span",{className:"text-gray-500 font-normal",children:["(",e.length,")"]})]}),!s&&!p&&n.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-1.5 px-3 py-1.5 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition",children:[n.jsx(un,{size:14}),"Add Item"]})]}),p&&!s&&n.jsxs("div",{className:"p-4 bg-blue-50 border border-gray-300",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Type"}),n.jsx("select",{value:v.item_type,onChange:_=>N({...v,item_type:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-3 focus:ring-blue-500 focus:border-blue-500",children:t7.map(_=>n.jsx("option",{value:_.value,children:_.label},_.value))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Name *"}),n.jsx("input",{type:"text",value:v.name,onChange:_=>N({...v,name:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-3 focus:ring-blue-500 focus:border-blue-500",placeholder:"Product/Service name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"SKU"}),n.jsx("input",{type:"text",value:v.sku,onChange:_=>N({...v,sku:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-3 focus:ring-blue-500 focus:border-blue-500",placeholder:"Item code"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Variant"}),n.jsx("input",{type:"text",value:v.variant,onChange:_=>N({...v,variant:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-3 focus:ring-blue-500 focus:border-blue-500",placeholder:"Size, color, etc."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Quantity *"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"number",value:v.quantity,onChange:_=>N({...v,quantity:_.target.value}),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-sm text-right focus:ring-3 focus:ring-blue-500 focus:border-blue-500",min:"0.01",step:"0.01"}),n.jsx("input",{type:"text",value:v.unit,onChange:_=>N({...v,unit:_.target.value}),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-3 focus:ring-blue-500 focus:border-blue-500",placeholder:"Unit"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Unit Price *"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:a}),n.jsx("input",{type:"number",value:v.unit_price,onChange:_=>N({...v,unit_price:_.target.value}),className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-lg text-sm text-right focus:ring-3 focus:ring-blue-500 focus:border-blue-500",min:"0",step:"0.01"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Discount %"}),n.jsx("input",{type:"number",value:v.discount_percent,onChange:_=>N({...v,discount_percent:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm text-right focus:ring-3 focus:ring-blue-500 focus:border-blue-500",min:"0",max:"100",step:"0.01"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Line Total"}),n.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded-lg text-sm text-right font-medium",children:Tc(Qy(v).line_total,a)})]})]}),n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Description (optional)"}),n.jsx("textarea",{value:v.description,onChange:_=>N({...v,description:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-3 focus:ring-blue-500 focus:border-blue-500",rows:2,placeholder:"Additional details about this item..."})]}),n.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[n.jsx("button",{onClick:()=>{x(!1),N({...T2})},className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition text-sm",children:"Cancel"}),n.jsx("button",{onClick:b,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition text-sm",children:"Add Item"})]})]}),e.length>0?n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-50 border-b",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600 w-20",children:"Type"}),n.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600",children:"Item"}),n.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600 w-24",children:"SKU"}),n.jsx("th",{className:"px-3 py-2 text-center font-medium text-gray-600 w-28",children:"Qty"}),n.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-600 w-28",children:"Price"}),n.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-600 w-20",children:"Disc."}),n.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-600 w-28",children:"Total"}),!s&&n.jsx("th",{className:"px-3 py-2 w-28"})]})}),n.jsx("tbody",{children:e.map((_,I)=>T(_,I))})]})}):n.jsxs("div",{className:"p-8 text-center text-gray-500",children:[n.jsx("p",{children:"No items added yet."}),!s&&n.jsx("button",{onClick:()=>x(!0),className:"mt-2 text-blue-600 hover:underline text-sm",children:"+ Add your first item"})]}),e.length>0&&n.jsx("div",{className:"border-t bg-gray-50 px-4 py-3",children:n.jsx("div",{className:"flex justify-end",children:n.jsxs("div",{className:"w-64 space-y-1",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),n.jsx("span",{className:"font-medium",children:Tc(A,a)})]}),parseFloat(o)>0&&n.jsxs("div",{className:"flex justify-between text-sm text-red-600",children:[n.jsxs("span",{children:["Discount (",i==="percentage"?`${o}%`:"Fixed","):"]}),n.jsxs("span",{children:["-",Tc(i==="percentage"?A*(parseFloat(o)/100):parseFloat(o),a)]})]}),parseFloat(r)>0&&n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsxs("span",{className:"text-gray-600",children:["Tax (",r,"%):"]}),n.jsx("span",{children:Tc((A-(i==="percentage"?A*(parseFloat(o)/100):parseFloat(o)||0))*(parseFloat(r)/100),a)})]}),n.jsxs("div",{className:"flex justify-between text-base font-semibold pt-1 border-t",children:[n.jsx("span",{children:"Total:"}),n.jsx("span",{children:Tc((()=>{let _=0;i==="percentage"&&o?_=A*(parseFloat(o)/100):i==="fixed"&&o&&(_=parseFloat(o));const I=A-_,R=I*(parseFloat(r)/100);return I+R})(),a)})]})]})})})]})}const E2=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],k2={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:"",subtotal:0,tax_rate:0,tax_amount:0,discount_type:"",discount_value:0,discount_amount:0,currency:"PHP",items:[]},Ai=e=>{if(!e)return"Draft";const t=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[t]||"Draft"},L2=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",WIe=e=>{switch(Ai(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},qIe=e=>{switch(Ai(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},Ky=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",mg=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",VIe=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const t=new Date(e);if(isNaN(t.getTime()))return"";const a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`}catch{return""}},P2=(e,t)=>{if(!e||t==null||t==="")return"";const a=Number(t);if(Number.isNaN(a))return"";const s=new Date(e);return isNaN(s.getTime())?"":(s.setDate(s.getDate()+a),s.toISOString().slice(0,10))},n7=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},a7=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},lw=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},YIe=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const s of e){const r=localStorage.getItem(s);if(r)try{const i=JSON.parse(r),o=lw(i);if(o)return o}catch{}}const t=localStorage.getItem("user_id"),a=lw(t);return a||null},QIe=e=>{if(!e)return"";const a=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""},KIe=e=>{if(!e)return"";const a=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""};function XIe(){const e=bt(),t=Qt(),{user:a}=Xt(),s=a?.company?.currency||"";h.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[r,i]=h.useState([]),[o,l]=h.useState(!1),[c,d]=h.useState([]),[u,f]=h.useState([]),[p,x]=h.useState([]),[v,N]=h.useState([]),[b,C]=h.useState(null),[w,S]=h.useState(null),[E,k]=h.useState(!1),[A,T]=h.useState(!1),[_,I]=h.useState(!1),[R,U]=h.useState(null),[D,M]=h.useState(!1),[W,X]=h.useState(null),[z,Q]=h.useState(k2),[de,Y]=h.useState(""),[se,J]=h.useState("Filter by Status"),[F,Ne]=h.useState(null),[re,he]=h.useState(1),[je,De]=h.useState(10),[Me,ve]=h.useState("Overview"),[Be,ke]=h.useState("Draft"),[fe,ne]=h.useState([]),[Ae,ye]=h.useState(null);h.useEffect(()=>{const H=t.state?.quoteID;if(H){ye(H),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(Ae&&r.length>0&&!o){const L=r.find(H=>H.id===Ae);L?S(L):q.error("Quote not found."),ye(null)}},[Ae,p,o]),h.useEffect(()=>{let L=!0;return(async()=>{const we=YIe();if(we&&L){C(we);return}try{const Pe=await ie.get("/auth/me"),le=lw(Pe?.data);if(le&&L){C(le);return}}catch{}try{const Pe=await ie.get("/users/me"),le=lw(Pe?.data);if(le&&L){C(le);return}}catch{}L&&C(null)})(),()=>{L=!1}},[]);const Ie=h.useCallback(L=>L&&u.find(we=>String(we.id)===String(L))?.name||"",[u]),Ve=h.useCallback(L=>{if(!L)return"";const H=p.find(we=>String(we.id)===String(L));return H?`${H.first_name} ${H.last_name}`.trim():""},[p]),Te=h.useCallback(L=>{if(!L)return"--";const H=c.find(we=>String(we.id)===String(L));return H?.deal_name||H?.name||`Deal #${n7(L)}`},[c]),Fe=h.useCallback(L=>{const H=c.find(le=>String(le.id)===String(L)),we=QIe(H);let Pe=KIe(H);if(!Pe&&we){const le=p.filter(Le=>String(Le.account_id||"")===String(we));if(le.length>0){const Le=[...le].sort((Qe,vt)=>{const gt=`${Qe.first_name||""} ${Qe.last_name||""}`.trim().toLowerCase(),Bt=`${vt.first_name||""} ${vt.last_name||""}`.trim().toLowerCase();return gt.localeCompare(Bt)});Pe=String(Le[0].id)}}if(we&&Pe){const le=p.find(Le=>String(Le.id)===String(Pe));le?.account_id&&String(le.account_id)!==String(we)&&(Pe="")}return{accountId:we||"",contactId:Pe||""}},[c,p]),Ye=h.useCallback(L=>{if(!L)return"--";if(L.deal?.deal_name)return L.deal.deal_name;if(L.deal?.name)return L.deal.name;const H=L.deal_id||L.deal?.id;return H?Te(H):"--"},[Te]),B=h.useCallback(L=>{if(!L)return"--";if(L.account?.name)return L.account.name;let H=L.account_id||L.account?.id;if(!H){const we=L.deal_id||L.deal?.id;we&&(H=Fe(we).accountId)}return H?Ie(H)||`Account #${H}`:"--"},[Fe,Ie]),xe=h.useCallback(L=>{if(!L)return"--";if(L.contact?.first_name||L.contact?.last_name)return`${L.contact?.first_name||""} ${L.contact?.last_name||""}`.trim()||"--";let H=L.contact_id||L.contact?.id;if(!H){const Pe=L.deal_id||L.deal?.id;Pe&&(H=Fe(Pe).contactId)}return(H?Ve(H):"")||(H?`Contact #${H}`:"--")},[Fe,Ve]),_e=h.useCallback(async(L=null)=>{l(!0);try{const H=await ie.get("/quotes/admin/fetch-all"),Pe=[...Array.isArray(H.data)?H.data:[]].sort((le,Le)=>{const Qe=le?.created_at||le?.updated_at||0,vt=Le?.created_at||Le?.updated_at||0;return new Date(vt)-new Date(Qe)});if(i(Pe),L){const le=Pe.find(Le=>Le.id===L);S(le||null)}}catch(H){console.error(H),i([]),H.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch quotes. Please try again later.")}finally{l(!1)}},[]),ce=h.useCallback(async()=>{try{const L=await ie.get("/deals/admin/fetch-all");d(Array.isArray(L.data)?L.data:[])}catch(L){console.error(L),L.response?.status===403&&q.warn("Unable to load deals (permission denied).")}},[]),Ee=h.useCallback(async()=>{try{const L=await ie.get("/accounts/admin/fetch-all");f(Array.isArray(L.data)?L.data:[])}catch(L){console.error(L),L.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},[]),ae=h.useCallback(async()=>{try{const L=await ie.get("/contacts/admin/fetch-all");x(Array.isArray(L.data)?L.data:[])}catch(L){console.error(L),L.response?.status===403&&q.warn("Unable to load contacts (permission denied).")}},[]),He=h.useCallback(async()=>{try{const L=await ie.get("/users/all");N(Array.isArray(L.data)?L.data:[])}catch(L){console.error(L),L.response?.status===403&&q.warn("Unable to load users (permission denied).")}},[]);h.useEffect(()=>{_e(),ce(),Ee(),ae(),He()},[_e,ce,Ee,ae,He]);const Re=h.useMemo(()=>{const L=de.trim().toLowerCase(),H=se.trim();return r.filter(we=>{const Pe=Ye(we),le=B(we),Le=xe(we),Qe=P2(we.presented_date,we.validity_days),vt=[we.quote_id,Pe,le,Le,we.total_amount?.toString(),we.validity_days?.toString(),we.presented_date?mg(we.presented_date):"",Qe?mg(Qe):"",we.assigned_user?.first_name,we.assigned_user?.last_name,we.creator?.first_name,we.creator?.last_name,we.status,we.notes,Ky(we.created_at),Ky(we.updated_at)],gt=L===""||vt.some(wn=>wn==null?!1:wn.toString().toLowerCase().includes(L)),Bt=H==="Filter by Status"||Ai(we.status)===H;return gt&&Bt})},[r,de,se,Ye,B,xe]),it=Math.max(1,Math.ceil(Re.length/je)||1);h.useEffect(()=>he(1),[de,se]),h.useEffect(()=>{he(L=>{const H=Math.max(1,Math.ceil(Re.length/je)||1);return L>H?H:L})},[Re.length,je]);const mt=h.useMemo(()=>{const L=(re-1)*je;return Re.slice(L,L+je)},[Re,re,je]),ee=()=>he(L=>Math.max(L-1,1)),pe=()=>he(L=>Math.min(L+1,it)),Ue=L=>{S(L),ve("Overview"),ke(Ai(L?.status)||"Draft")},Ze=()=>{S(null),ve("Overview")},nt=L=>{L.target.id==="quoteModalBackdrop"&&!D&&Ze()},Je=h.useCallback(()=>{k(!1),T(!1),X(null),Q(k2),I(!1)},[]),Oe=L=>{L.target.id==="modalBackdrop"&&!_&&!D&&Je()},ge=L=>{const{name:H,value:we}=L.target;if(H==="deal_id"){const{accountId:Pe,contactId:le}=Fe(we);Q(Le=>({...Le,deal_id:we,account_id:Pe,contact_id:le}));return}Q(Pe=>({...Pe,[H]:we}))},Ke=()=>{Q(k2),T(!1),X(null),k(!0)},G=L=>{if(!L)return;S(null);const H=L.deal?.id?String(L.deal.id):L.deal_id?String(L.deal_id):"",we=H?Fe(H):{accountId:"",contactId:""},Pe=L.account?.id?String(L.account.id):L.account_id?String(L.account_id):we.accountId,le=L.contact?.id?String(L.contact.id):L.contact_id?String(L.contact_id):we.contactId,Le=L.assigned_user?.id?String(L.assigned_user.id):L.assigned_to?String(L.assigned_to):"";Q({deal_id:H,account_id:Pe||"",contact_id:le||"",total_amount:L.total_amount?.toString()||"",presented_date:VIe(L.presented_date),validity_days:L.validity_days!==null&&L.validity_days!==void 0?String(L.validity_days):"",status:Ai(L.status)||"Draft",assigned_to:Le,notes:L.notes||"",subtotal:parseFloat(L.subtotal)||0,tax_rate:parseFloat(L.tax_rate)||0,tax_amount:parseFloat(L.tax_amount)||0,discount_type:L.discount_type||"",discount_value:parseFloat(L.discount_value)||0,discount_amount:parseFloat(L.discount_amount)||0,currency:L.currency||"PHP",items:Array.isArray(L.items)?L.items.map(Qe=>({id:Qe.id,item_type:Qe.item_type||"Product",name:Qe.name||"",description:Qe.description||"",sku:Qe.sku||"",variant:Qe.variant||"",unit:Qe.unit||"pcs",quantity:parseFloat(Qe.quantity)||1,unit_price:parseFloat(Qe.unit_price)||0,discount_percent:parseFloat(Qe.discount_percent)||0,discount_amount:parseFloat(Qe.discount_amount)||0,line_total:parseFloat(Qe.line_total)||0,sort_order:Qe.sort_order||0})):[]}),T(!0),X(L.id),k(!0)},$=L=>{if(L.target.checked){const H=mt.map(we=>we.id);ne(H)}else ne([])},V=L=>{ne(H=>H.includes(L)?H.filter(we=>we!==L):[...H,L])},te=L=>{if(!L)return;const H=L.quote_id||"this quote";U({title:"Delete Quote",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:H}),"? This action cannot be undone."]}),confirmLabel:"Delete Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:L.id,name:H}})},Z=async()=>{fe.length!==0&&U({title:"Delete Quotes",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:fe.length})," selected quotes? This action cannot be undone."]}),confirmLabel:`Delete ${fe.length} Quote(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",quote_ids:fe}})},[Se,me]=h.useState(!1),ue=L=>{if(L.preventDefault(),me(!0),!b){q.error("Unable to determine current user. Please log in again.");return}if(!z.deal_id){q.error("Deal is required.");return}if(!z.assigned_to){q.error("Assigned To is required.");return}const we=Fe(z.deal_id),Pe=z.items.map((gt,Bt)=>({item_type:gt.item_type||"Product",name:gt.name,description:gt.description||null,sku:gt.sku||null,variant:gt.variant||null,unit:gt.unit||null,quantity:parseFloat(gt.quantity)||1,unit_price:parseFloat(gt.unit_price)||0,discount_percent:parseFloat(gt.discount_percent)||0,sort_order:gt.sort_order??Bt})),le={deal_id:Number(z.deal_id),account_id:we.accountId?Number(we.accountId):null,contact_id:we.contactId?Number(we.contactId):null,subtotal:parseFloat(z.subtotal)||0,tax_rate:parseFloat(z.tax_rate)||0,tax_amount:parseFloat(z.tax_amount)||0,discount_type:z.discount_type||null,discount_value:parseFloat(z.discount_value)||0,discount_amount:parseFloat(z.discount_amount)||0,total_amount:parseFloat(z.total_amount)||0,currency:z.currency||"PHP",presented_date:z.presented_date||null,validity_days:z.validity_days===""?null:Number(z.validity_days),status:z.status||"Draft",assigned_to:z.assigned_to?Number(z.assigned_to):null,notes:z.notes?.trim()||null,items:Pe},Le=A&&W?"update":"create",Qe=Te(z.deal_id),vt=Le==="create"?{...le,created_by_id:Number(b)}:le;U({title:Le==="create"?"Confirm New Quote":"Confirm Update",message:Le==="create"?n.jsxs("span",{children:["Are you sure you want to create a quote for"," ",n.jsx("span",{className:"font-semibold",children:Qe}),"?"]}):n.jsxs("span",{children:["Save changes to"," ",n.jsx("span",{className:"font-semibold",children:Qe}),"?"]}),confirmLabel:Le==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:Le,payload:vt,targetId:W||null,name:Qe}})},$e=async()=>{if(!R?.action){U(null);return}const{action:L}=R,{type:H,payload:we,targetId:Pe,name:le}=L;M(!0);try{if(H==="create")I(!0),await ie.post("/quotes/admin",we),q.success("Quote created successfully."),Je(),await _e();else if(H==="update"){if(!Pe)throw new Error("Missing quote identifier for update.");I(!0),await ie.put(`/quotes/admin/${Pe}`,we),q.success("Quote updated successfully."),Je(),await _e(),w?.id===Pe&&S(null)}else if(H==="delete"){if(!Pe)throw new Error("Missing quote identifier for deletion.");const Le=w?.id;Ne(Pe),await ie.delete(`/quotes/admin/${Pe}`),q.success(`Quote "${le}" deleted successfully.`),await _e(Le&&Le!==Pe?Le:null),Le===Pe&&S(null)}else H==="bulk-delete"&&(await ie.post("/quotes/admin/bulk-delete",{quote_ids:fe}),q.success(`Successfully deleted ${fe.length} quotes`),ne([]),await _e())}catch(Le){console.error(Le);const Qe=H==="create"?"Failed to create quote. Please review the details and try again.":H==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";q.error(Qe),(H==="create"||H==="update")&&I(!1),H==="delete"&&Ne(null)}finally{(H==="create"||H==="update")&&I(!1),H==="delete"&&Ne(null),M(!1),U(null)}},be=()=>{D||U(null)},We=h.useCallback((L,H)=>{const we=L?.deal_id??L?.deal?.id??"",Pe=we?Number(we):null,le=Pe?Fe(String(Pe)):{accountId:"",contactId:""},Le=L?.account_id??L?.account?.id??le.accountId??null,Qe=L?.contact_id??L?.contact?.id??le.contactId??null,vt=L?.total_amount??0,gt=L?.assigned_to??L?.assigned_user?.id??null;return{deal_id:Pe,account_id:Le!=null&&String(Le).trim()!==""?Number(Le):null,contact_id:Qe!=null&&String(Qe).trim()!==""?Number(Qe):null,total_amount:Number(vt),presented_date:L?.presented_date||null,validity_days:L?.validity_days===""||L?.validity_days===void 0||L?.validity_days===null?null:Number(L.validity_days),status:H,assigned_to:gt!=null&&String(gt).trim()!==""?Number(gt):null,notes:L?.notes?.trim()||null}},[Fe]),ft=h.useCallback(async()=>{if(!w?.id)return;const L=Ai(Be),H=[L,L.toLowerCase()],we=async Pe=>ie.patch(`/quotes/admin/${w.id}/status`,{status:Pe},{headers:{"Content-Type":"application/json"}});try{let Pe=!1;for(const le of H)try{await we(le),Pe=!0;break}catch(Le){if(Le?.response?.status===422)continue;throw Le}if(!Pe){const le=We(w,L);if(!le.deal_id){q.error("Cannot update status: missing deal_id on selected quote.");return}if(!le.total_amount||le.total_amount<=0){q.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await ie.put(`/quotes/admin/${w.id}`,le)}q.success(`Quote status updated to ${L}`),S(null),ve("Overview"),await _e()}catch(Pe){console.error(Pe);const le=Pe?.response?.data?.message||(Pe?.response?.data?.errors?Object.values(Pe.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";q.error(le)}},[w,Be,_e,We]),yt=[{label:"Filter by Status",value:"Filter by Status"},...E2.map(L=>({label:L.label,value:L.value}))],Tt=R?.action?.type==="delete"?R.action.targetId:null,Et=w&&(F===w.id||Tt===w.id),Gt=w&&F===w.id,oe=w?n.jsx("div",{id:"quoteModalBackdrop",onClick:nt,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:L=>L.stopPropagation(),children:[n.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:n.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),n.jsx("button",{onClick:Ze,className:"text-gray-500 hover:text-white transition cursor-pointer",children:n.jsx(Wn,{size:25})})]})}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:Ye(w)}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${qIe(w.status)}`,children:L2(w.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>G(w),disabled:D||R?.action?.type==="update"&&R.action.targetId===w.id,children:[n.jsx(ia,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>te(w),disabled:!!Et,children:Gt?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Ut,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-1 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(L=>n.jsx("button",{onClick:()=>ve(L),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${Me===L?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:L},L))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Me==="Overview"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Quote ID:"}),n.jsx("p",{children:a7(w.quote_id)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Deal:"}),n.jsx("p",{children:Ye(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Account:"}),n.jsx("p",{children:B(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact:"}),n.jsx("p",{children:xe(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Total Amount:"}),n.jsx("p",{children:w.total_amount?`${s}${Number(w.total_amount).toLocaleString()}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Presented Date:"}),n.jsx("p",{children:mg(w.presented_date)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Validity Days:"}),n.jsx("p",{children:w.validity_days!==null&&w.validity_days!==void 0?w.validity_days:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),n.jsx("p",{children:mg(P2(w.presented_date,w.validity_days))||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:L2(w.status)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:w.assigned_user?`${w.assigned_user.first_name} ${w.assigned_user.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:w.creator?`${w.creator.first_name} ${w.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:Ky(w.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:Ky(w.updated_at)||"N/A"})]})]}),w.items&&w.items.length>0&&n.jsx("div",{className:"mt-6",children:n.jsx(od,{items:w.items,onChange:()=>{},currencySymbol:s,readOnly:!0,taxRate:parseFloat(w.tax_rate)||0,discountType:w.discount_type,discountValue:parseFloat(w.discount_value)||0})})]}),Me==="Notes"&&n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),n.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:w.notes||"No notes available."})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(At,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Quotes"}}}),children:[n.jsx(Ct,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:Be||Ai(w.status)||"Draft",onChange:L=>ke(L.target.value),children:E2.map(L=>n.jsx("option",{value:L.value,children:L.label},L.value))}),n.jsx("button",{onClick:ft,disabled:Ai(Be)===Ai(w.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Ai(Be)===Ai(w.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,rt=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[o&&n.jsx(zt,{message:"Loading quotes..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(xn,{className:"mr-2 text-blue-600"})," Quotes"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto gap-2",children:n.jsxs("button",{onClick:()=>{Ke(),me(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(un,{className:"mr-2"})," Add Quote"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Ht,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search quotes",value:de,onChange:L=>Y(L.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:se,onChange:L=>J(L.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:yt.map(L=>n.jsx("option",{value:L.value,children:L.label},L.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:mt.length>0&&fe.length===mt.length,onChange:$,className:"cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),n.jsx("th",{className:"py-3 px-4",children:"Deal"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Expiry Date"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:fe.length>0?n.jsx("button",{onClick:Z,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${fe.length} selected items`,children:n.jsx(Ut,{size:18})}):""})]})}),n.jsx("tbody",{children:o?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"Loading quotes..."})}):Re.length>0?mt.map(L=>{const H=P2(L.presented_date,L.validity_days);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>Ue(L),children:[n.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:we=>we.stopPropagation(),children:n.jsx("input",{type:"checkbox",checked:fe.includes(L.id),onChange:()=>V(L.id),className:"cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:a7(L.quote_id)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:Ye(L)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-sm text-gray-700 break-words",children:B(L)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:xe(L)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-700",children:L.total_amount?`${s}${Number(L.total_amount).toLocaleString()}`:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${WIe(L.status)}`,children:L2(L.status)})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{children:L.assigned_user?`${L.assigned_user.first_name} ${L.assigned_user.last_name}`:"Unassigned"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-500 text-xs",children:mg(H)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top text-center w-24"})]},L.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"No quotes found."})})})]})}),n.jsx(tn,{className:"mt-4",totalItems:Re.length,pageSize:je,currentPage:re,onPrev:ee,onNext:pe,onPageSizeChange:L=>{De(L),he(1)},pageSizeOptions:[10,20,30,40,50],label:"quotes"})]}),_t=E?n.jsx("div",{id:"modalBackdrop",onClick:Oe,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:L=>L.stopPropagation(),children:[n.jsx("button",{onClick:()=>{Je(),me(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:_||D,children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:A?"Edit Quote":"Add New Quote"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:ue,children:[n.jsx(i7,{label:"Deal",name:"deal_id",value:z.deal_id,onChange:L=>{const{accountId:H,contactId:we}=Fe(L);Q(Pe=>({...Pe,deal_id:L,account_id:H,contact_id:we}))},items:Array.isArray(c)?c:[],getLabel:L=>`${n7(L?.deal_id??"")} ${L?.name??""}`.trim(),placeholder:"Search deal...",required:!0,isSubmitted:Se,disabled:_||c.length===0,className:"md:col-span-2"}),n.jsx(r7,{label:"Account",value:Ie(z.account_id)||(z.account_id?`Account #${z.account_id}`:""),disabled:!0}),n.jsx(r7,{label:"Contact",value:Ve(z.contact_id)||(z.contact_id?`Contact #${z.contact_id}`:""),disabled:!0}),n.jsx("div",{className:"md:col-span-2 mt-2",children:n.jsx(od,{items:z.items,onChange:L=>Q(H=>({...H,items:L})),currencySymbol:s,readOnly:_,taxRate:z.tax_rate,discountType:z.discount_type,discountValue:z.discount_value,onTotalsChange:L=>{Q(H=>({...H,subtotal:L.subtotal,discount_amount:L.discount_amount,tax_amount:L.tax_amount,total_amount:L.total_amount}))}})}),n.jsxs("div",{className:"md:col-span-2 mt-2 p-4 bg-gray-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Pricing Settings"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Discount Type"}),n.jsxs("select",{value:z.discount_type||"",onChange:L=>Q(H=>({...H,discount_type:L.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",disabled:_,children:[n.jsx("option",{value:"",children:"No Discount"}),n.jsx("option",{value:"percentage",children:"Percentage (%)"}),n.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-600 text-xs mb-1",children:["Discount ",z.discount_type==="percentage"?"%":"Amount"]}),n.jsx("input",{type:"number",value:z.discount_value||"",onChange:L=>Q(H=>({...H,discount_value:L.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:z.discount_type==="percentage"?"100":void 0,step:"0.01",disabled:_||!z.discount_type})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Tax Rate (%)"}),n.jsx("input",{type:"number",value:z.tax_rate||"",onChange:L=>Q(H=>({...H,tax_rate:L.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:"100",step:"0.01",disabled:_})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Total Amount"}),n.jsxs("div",{className:"w-full bg-gray-100 border border-gray-300 rounded-md px-2 py-1.5 text-sm font-medium",children:[s,parseFloat(z.total_amount||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),n.jsx(s7,{label:"Presented Date",name:"presented_date",type:"date",value:z.presented_date,onChange:ge,disabled:_}),n.jsx(s7,{label:"Validity Days",name:"validity_days",type:"number",value:z.validity_days,onChange:ge,placeholder:"30",disabled:_}),n.jsx(i7,{label:"Assigned To",value:z.assigned_to||"",onChange:L=>Q(H=>({...H,assigned_to:L})),items:Array.isArray(v)?v:[],getLabel:L=>{const H=`${L?.first_name??""} ${L?.last_name??""}`.trim();return H?L?.role?`${H} (${L.role})`:H:L?.email||""},placeholder:"Search assignee...",required:!0,isSubmitted:Se,disabled:_}),n.jsx(ZIe,{label:"Status",name:"status",value:z.status,onChange:ge,options:E2,required:!0,disabled:_,className:"md:col-span-2"}),n.jsx(e$e,{label:"Notes",name:"notes",value:z.notes,onChange:ge,placeholder:"Additional details...",rows:3,disabled:_,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{Je(),me(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:_||D,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:_||D,children:_?"Saving...":A?"Update Quote":"Save Quote"})]})]})]})}):null,Nt=R?n.jsx(t$e,{open:!0,title:R.title,message:R.message,confirmLabel:R.confirmLabel,cancelLabel:R.cancelLabel,variant:R.variant,onConfirm:$e,onCancel:be,loading:D}):null;return n.jsxs(n.Fragment,{children:[w?oe:rt,_t,Nt]})}function s7({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function r7({label:e,value:t,className:a="",disabled:s=!0}){return n.jsxs("div",{className:a,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("input",{type:"text",value:t??"",disabled:s,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function ZIe({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){const c=a!=null?String(a):"",u=r.some(f=>String(f.value)===c)?c:"";return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:u,onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(f=>n.jsx("option",{value:String(f.value??""),children:f.label},f.value??f.label))})]})}function i7({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(JIe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function JIe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",N=h.useMemo(()=>{const b=u.trim().toLowerCase();return(b?e.filter(w=>(s(w)||"").toLowerCase().includes(b)):e).slice(0,o)},[e,u,s,o]);return h.useEffect(()=>{const b=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:v,placeholder:r,onFocus:()=>!i&&d(!0),onChange:b=>{f(b.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:N.length>0?N.map(b=>{const C=String(b.id),w=s(b),S=String(t)===C;return n.jsx("button",{type:"button",onClick:()=>{a(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},C)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function e$e({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function t$e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const Oj=[{value:"CEO",label:"CEO"},{value:"Group Manager",label:"Group Manager"},{value:"Manager",label:"Manager"},{value:"Sales",label:"Sales"}],fg={firstName:"",lastName:"",email:"",password:"",role:""},n$e={CEO:"bg-purple-100 text-purple-700",ADMIN:"bg-purple-100 text-purple-700",GROUP_MANAGER:"bg-indigo-100 text-indigo-700",MANAGER:"bg-blue-100 text-blue-700",MARKETING:"bg-yellow-100 text-yellow-700",SALES:"bg-green-100 text-green-700"},go=e=>e?e.toString().trim().replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/\s+/g,"_").toUpperCase():"",a$e=e=>{const t=go(e),a=Oj.find(s=>go(s.value)===t);return a?a.value:e||""},uk=e=>{const t=go(e),a=Oj.find(s=>go(s.value)===t);return a?a.label:typeof e=="string"?e.toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()):"--"},o7=e=>{if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",","")},D2=(e,{size:t="sm"}={})=>{const a=go(e),s=n$e[a]||"bg-gray-100 text-gray-700",r=t==="lg"?"px-3 py-1 text-sm":t==="md"?"px-2.5 py-1 text-sm":"px-2 py-1 text-xs";return n.jsx("span",{className:`${r} font-semibold rounded-md inline-flex items-center justify-center ${s}`,children:uk(e)})},s$e=(e,t)=>{const a=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${a}${s}`.toUpperCase()||"U"},l7=e=>[...e].sort((t,a)=>{const s=t.created_at?new Date(t.created_at).getTime():0;return(a.created_at?new Date(a.created_at).getTime():0)-s});function r$e(){const{user:e,loading:t}=Xt(),[a,s]=h.useState([]),[r,i]=h.useState(!1),[o,l]=h.useState(""),[c,d]=h.useState(""),[u,f]=h.useState(null),[p,x]=h.useState(!1),[v,N]=h.useState(!1),[b,C]=h.useState(null),[w,S]=h.useState(fg),[E,k]=h.useState(!1),[A,T]=h.useState(null),[_,I]=h.useState(!1),[R,U]=h.useState(1),[D,M]=h.useState(10),[W,X]=h.useState("Overview"),[z,Q]=h.useState(""),[de,Y]=h.useState(!1),[se,J]=h.useState([]),F=go(e?.role),Ne=["ADMIN","CEO"].includes(F),re=!t&&Ne,he=h.useMemo(()=>{const ee=Oj.filter(pe=>go(pe.value)!=="CEO");return[{label:"Filter by Roles",value:""},{label:"CEO",value:"CEO"},...ee]},[]),je=h.useCallback(ee=>{ee&&(s(pe=>pe.map(Ue=>Ue.id===ee?{...Ue,highlight:!0}:Ue)),setTimeout(()=>{s(pe=>pe.map(Ue=>Ue.id===ee?{...Ue,highlight:!1}:Ue))},2e3))},[]),De=h.useCallback(async()=>{i(!0);try{const ee=await ie.get("/users/all"),pe=Array.isArray(ee.data)?ee.data:[],Ue=l7(pe);s(Ue),f(Ze=>Ze&&(Ue.find(Je=>Je.id===Ze.id)||null)),console.log(ee.data)}catch(ee){console.error("Error fetching users:",ee);const pe=ee.response?.data?.detail||"Failed to load users. Please try again later.";q.error(pe)}finally{i(!1)}},[]);h.useEffect(()=>{!t&&!Ne&&e&&q.error("You are not authorized to access User Management.")},[Ne,t,e]),h.useEffect(()=>{t||!Ne||De()},[t,Ne,De]),h.useEffect(()=>{document.title="Users | Sari-Sari CRM"},[]);const Me=h.useMemo(()=>{const ee=o.trim().toLowerCase(),pe=go(c);return l7(a.filter(Ue=>{if(!Ue)return!1;const Ze=ee===""||[Ue.first_name,Ue.last_name,`${Ue.first_name||""} ${Ue.last_name||""}`,Ue.email,uk(Ue.role)].filter(Boolean).some(Je=>Je.toString().toLowerCase().includes(ee)),nt=pe===""||pe==="CEO"&&["CEO","ADMIN"].includes(go(Ue.role))||go(Ue.role)===pe;return Ze&&nt}))},[a,o,c]),ve=Math.max(1,Math.ceil(Me.length/D)||1);h.useEffect(()=>{U(1)},[o,c,D]),h.useEffect(()=>{U(ee=>{const pe=Math.max(1,Math.ceil(Me.length/D)||1);return ee>pe?pe:ee})},[Me.length,D]);const Be=h.useMemo(()=>{const ee=(R-1)*D;return Me.slice(ee,ee+D)},[Me,R,D]);Me.length===0||(R-1)*D+1,Math.min(R*D,Me.length);const ke=()=>U(ee=>Math.max(ee-1,1)),fe=()=>U(ee=>Math.min(ee+1,ve)),ne=()=>{S(fg),N(!1),C(null),x(!0)},Ae=ee=>{f(ee),X("Overview"),Q(ee?.is_active?"Active":"Inactive")},ye=ee=>{ee.target.id==="userModalBackdrop"&&!_&&Ie()},Ie=()=>{f(null)},Ve=(ee,pe)=>{S(Ue=>({...Ue,[ee]:pe}))},Te=()=>{const ee="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let pe="";for(let Ue=0;Ue<10;Ue+=1)pe+=ee.charAt(Math.floor(Math.random()*ee.length));Ve("password",pe)},Fe=()=>{E||_||(x(!1),S(fg),C(null),N(!1))},Ye=ee=>{S({firstName:ee.first_name||"",lastName:ee.last_name||"",email:ee.email||"",password:"",role:a$e(ee.role)}),N(!0),C(ee.id),x(!0),f(null)},B=ee=>{T({title:"Delete User",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsxs("span",{className:"font-semibold",children:[ee.first_name," ",ee.last_name]}),"? This action cannot be undone."]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ee.id,name:`${ee.first_name||""} ${ee.last_name||""}`.trim()||ee.email||"user"}})},xe=ee=>{ee.preventDefault();const pe=w.firstName.trim(),Ue=w.lastName.trim(),Ze=w.email.trim(),nt=w.password.trim(),Je=w.role,Oe=!(v&&b);if(!pe||!Ze||!Je){q.warn("Please fill in all required fields.");return}if(Oe&&!nt){q.warn("Please fill in all required fields.");return}if(nt&&nt.length<8){q.warn("Password should be at least 8 characters long.");return}const ge={first_name:pe,last_name:Ue,email:Ze,role:Je};(Oe||nt)&&(ge.password=nt);const Ke=`${pe} ${Ue}`.trim(),G=Oe?"create":"update";T({title:G==="create"?"Confirm New User":"Confirm User Update",message:G==="create"?n.jsxs("span",{children:["Create user ",n.jsx("span",{className:"font-semibold",children:Ke})," with role"," ",n.jsx("span",{className:"font-semibold",children:uk(Je)}),"?"]}):n.jsxs("span",{children:["Save changes for"," ",n.jsx("span",{className:"font-semibold",children:Ke||Ze}),"?"]}),confirmLabel:G==="create"?"Create User":"Update User",cancelLabel:"Cancel",variant:"primary",action:{type:G,payload:ge,targetId:b,name:Ke||Ze}})},_e=async()=>{se.length!==0&&T({title:"Delete Users",message:n.jsxs("span",{children:["Are you sure you want to deactivate"," ",n.jsx("span",{className:"font-semibold",children:se.length})," selected users? This action cannot be undone."]}),confirmLabel:`Deactivate ${se.length} User(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",user_ids:se}})},ce=ee=>{if(ee.target.checked){const pe=Be.map(Ue=>Ue.id);J(pe)}else J([])},Ee=ee=>{J(pe=>pe.includes(ee)?pe.filter(Ue=>Ue!==ee):[...pe,ee])},ae=async()=>{if(!A?.action){T(null);return}const{action:ee}=A,{type:pe,payload:Ue,targetId:Ze,name:nt}=ee;I(!0),(pe==="create"||pe==="update")&&k(!0);try{if(pe==="create"){const Oe=(await ie.post("/users/createuser",Ue)).data;await De(),je(Oe.id),q.success(`User "${nt}" created successfully.`),x(!1),S(fg),C(null),N(!1)}else if(pe==="update"){if(!Ze)throw new Error("Missing user identifier for update.");const Oe=(await ie.put(`/users/updateuser/${Ze}`,Ue)).data;await De(),f(null),je(Oe.id),q.success(`User "${nt}" updated successfully.`),x(!1),S(fg),C(null),N(!1)}else if(pe==="delete"){if(!Ze)throw new Error("Missing user identifier for deletion.");await ie.delete(`/users/deleteuser/${Ze}`),s(Je=>Je.map(Oe=>Oe.id===Ze?{...Oe,is_active:!1}:Oe)),u&&u.id===Ze&&(f(null),Q("")),q.success(`User "${nt}" deactivated successfully.`)}else pe==="bulk-delete"&&(await ie.delete("/users/admin/bulk-delete",{data:{user_ids:ee.user_ids}}),s(Je=>Je.map(Oe=>ee.user_ids.includes(Oe.id)?{...Oe,is_active:!1}:Oe)),u&&ee.user_ids.includes(u.id)&&(f(null),Q("")),q.success(`Successfully deactivated ${ee.user_ids.length} users`),J([]))}catch(Je){console.error("User management error:",Je);const Oe=pe==="create"?"Failed to create user. Please review the details and try again.":pe==="update"?"Failed to update user. Please review the details and try again.":"Failed to delete user. Please try again.",ge=Je.response?.data?.detail||Oe;q.error(ge)}finally{(pe==="create"||pe==="update")&&k(!1),I(!1),T(null)}},He=()=>{_||T(null)},Re=async()=>{if(!u||!z)return;const ee=u.is_active?"Active":"Inactive";if(z===ee)return;const pe=z==="Active";Y(!0);try{const Ze=(await ie.put(`/users/updateuser/${u.id}`,{is_active:pe})).data;s(nt=>nt.map(Je=>Je.id===Ze.id?Ze:Je)),f(null),Q(""),q.success(`User status updated to ${z}`)}catch(Ue){console.error("Failed to update user status:",Ue);const Ze=Ue.response?.data?.detail||"Failed to update user status. Please try again.";q.error(Ze)}finally{Y(!1)}},it=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[(r||t||!re)&&n.jsx(zt,{}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Mw,{className:"mr-2 text-blue-600"}),"User Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:ne,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(Gn,{className:"mr-2"})," Add User"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Ht,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search users",value:o,onChange:ee=>l(ee.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:c,onChange:ee=>d(ee.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:he.map(ee=>n.jsx("option",{value:ee.value,children:ee.label},ee.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:Be.length>0&&Be.every(ee=>se.includes(ee.id)),onChange:ce})}),n.jsx("th",{className:"py-3 px-4",children:"Fullname"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Role"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:se.length>0?n.jsx("button",{onClick:_e,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Deactivate ${se.length} selected users`,children:n.jsx(Ut,{size:18})}):""})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:3,children:"Loading users..."})}):Me.length===0?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-400",colSpan:4,children:"No users found."})}):Be.map(ee=>n.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${ee.highlight?"bg-green-50":""} ${ee.is_active?"":"opacity-60 bg-gray-50"}`,children:[n.jsx("td",{className:"py-3 px-4",onClick:pe=>pe.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:se.includes(ee.id),onChange:()=>Ee(ee.id)})}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>Ae(ee),children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline text-sm",children:[ee.first_name," ",ee.last_name]})}),n.jsx("td",{className:"py-3 px-4 cursor-pointer text-sm",onClick:()=>Ae(ee),children:ee.email}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>Ae(ee),children:D2(ee.role)}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>Ae(ee),children:n.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-md ${ee.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:ee.is_active?"Active":"Inactive"})})]},ee.id))})]})}),n.jsx(tn,{className:"mt-4",totalItems:Me.length,pageSize:D,currentPage:R,onPrev:ke,onNext:fe,onPageSizeChange:ee=>{M(ee),U(1)},label:"users"})]}),mt=u?n.jsx("div",{id:"userModalBackdrop",onClick:ye,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in p-4 sm:p-6 md:p-8 font-inter relative",children:[n.jsx("div",{className:"flex justify-end w-full",children:n.jsx("button",{onClick:Ie,className:"text-gray-500 hover:text-gray-700 transition mb-5 cursor-pointer",children:n.jsx(Wn,{size:30})})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7 mb-4 lg:mb-6 md:mb-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[u.profile_picture?n.jsx("img",{src:u.profile_picture,alt:`${u.first_name} ${u.last_name}`,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover border border-gray-200 shadow-sm"}):n.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-200 text-gray-700 flex items-center justify-center text-lg sm:text-xl font-semibold border border-gray-200 shadow-sm",children:s$e(u.first_name,u.last_name)}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[u.first_name," ",u.last_name]}),n.jsx("p",{className:"text-sm text-gray-500 break-all",children:u.email})]})]}),D2(u.role,{size:"md"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Ye(u),disabled:_,children:[n.jsx(la,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>B(u),disabled:_,children:[n.jsx(Ut,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 mb-6"}),n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview"].map(ee=>n.jsx("button",{onClick:()=>X(ee),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${W===ee?"bg-[#5c636d] text-white border-white":"text-white hover:bg-[#5c636d]"}`,children:ee},ee))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsx("div",{className:"lg:col-span-3",children:W==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:u.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Role:"}),n.jsx("p",{children:D2(u.role,{size:"sm"})})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:u.is_active?"Active":"Inactive"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Auth Provider:"}),n.jsx("p",{children:u.auth_provider?u.auth_provider.toString().replace(/\b\w/g,ee=>ee.toUpperCase()):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:u.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:u.company?.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company Number:"}),n.jsx("p",{children:u.company?.company_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Related to CEO:"}),n.jsx("p",{children:u.manager?`${u.manager.first_name} ${u.manager.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:o7(u.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Login:"}),n.jsx("p",{children:u.last_login?o7(u.last_login):"Never"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Profile Picture:"}),n.jsx("p",{children:u.profile_picture?n.jsx("a",{href:u.profile_picture,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline break-all",children:"View image"}):"N/A"})]})]})})}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsx("div",{className:"flex flex-col gap-2 w-full",children:n.jsxs("button",{type:"button",onClick:()=>{if(!u.email){alert("No email address available");return}const ee=encodeURIComponent(u.email),pe=encodeURIComponent(""),Ue=encodeURIComponent(""),Ze=`https://mail.google.com/mail/?view=cm&fs=1&to=${ee}&su=${pe}&body=${Ue}`;window.open(Ze,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Xn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]})})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:z||(u.is_active?"Active":"Inactive"),onChange:ee=>Q(ee.target.value),children:[n.jsx("option",{value:"Active",children:"Active"}),n.jsx("option",{value:"Inactive",children:"Inactive"})]}),n.jsx("button",{onClick:Re,disabled:de||z===(u.is_active?"Active":"Inactive"),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${de||z===(u.is_active?"Active":"Inactive")?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:de?"Updating...":"Update"})]})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[it,mt,n.jsx(i$e,{open:p,isEditing:v,isSubmitting:E,confirmProcessing:_,formData:w,onClose:Fe,onSubmit:xe,onChange:Ve,onGeneratePassword:Te}),n.jsx(o$e,{open:!!A,title:A?.title,message:A?.message,confirmLabel:A?.confirmLabel,cancelLabel:A?.cancelLabel,variant:A?.variant,loading:_,onConfirm:ae,onCancel:He})]})}function i$e({open:e,isEditing:t,isSubmitting:a,confirmProcessing:s,formData:r,onClose:i,onSubmit:o,onChange:l,onGeneratePassword:c}){if(!e)return null;const d=a||s;return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-lg border border-gray-200 p-6 sm:p-8 relative overflow-y-auto max-h-[90vh]",children:[n.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:d,children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-6 text-center",children:t?"Edit User":"Add New User"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:o,children:[n.jsx(Xy,{label:"First Name",value:r.firstName,onChange:u=>l("firstName",u),placeholder:"John",required:!0,disabled:d}),n.jsx(Xy,{label:"Last Name",value:r.lastName,onChange:u=>l("lastName",u),placeholder:"Doe",required:!0,disabled:d}),n.jsx(Xy,{label:"Email",type:"email",value:r.email,onChange:u=>l("email",u),placeholder:"john.doe@company.com",required:!0,disabled:d||t}),n.jsx(Xy,{label:"Role",type:"select",value:r.role,onChange:u=>l("role",u),options:[{value:"",label:"Select role"},...Oj],required:!0,disabled:d}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Password"}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[n.jsx("input",{type:"text",value:r.password,onChange:u=>l("password",u.target.value),placeholder:t?"Leave blank to keep current password":"Enter or generate password",required:!t,disabled:d,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"}),n.jsx("button",{type:"button",onClick:c,className:"flex items-center justify-center px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-60",disabled:d,children:"Generate"})]}),t?n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Setting a password will reset the user's credentials; leave it blank to keep the current password."}):n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long."})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:i,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:d,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:d,children:a?"Saving...":t?"Update User":"Save User"})]})]})]})})}function Xy({label:e,type:t="text",value:a,onChange:s,placeholder:r,options:i=[],required:o=!1,disabled:l=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t==="select"?n.jsx("select",{value:a??"",onChange:c=>s(c.target.value),required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100",children:i.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))}):n.jsx("input",{type:t,value:a??"",onChange:c=>s(c.target.value),placeholder:r,required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"})]})}function o$e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-black hover:bg-gray-800 border border-black";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("div",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const l$e=(e,t)=>{const a=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${a}${s}`.toUpperCase()||"U"};function c$e(){const{user:e,loading:t,fetchUser:a}=Xt(),[s,r]=h.useState(!1),[i,o]=h.useState(!1),[l,c]=h.useState(!1),[d,u]=h.useState(!1),[f,p]=h.useState(!1),[x,v]=h.useState(null),[N,b]=h.useState(null),C=h.useRef(null),[w,S]=h.useState({firstName:"",lastName:"",email:"",phoneNumber:""}),[E,k]=h.useState({currentPassword:"",newPassword:"",confirmPassword:""});h.useEffect(()=>{e&&(S({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),b(e.profile_picture||null))},[e]),h.useEffect(()=>{document.title="Manage Account | Sari-Sari CRM"},[]);const A=(U,D)=>{S(M=>({...M,[U]:D}))},T=(U,D)=>{k(M=>({...M,[U]:D}))},_=U=>{const D=U.target.files?.[0];if(!D)return;if(!D.type.startsWith("image/")){q.error("Please select an image file");return}if(D.size>5*1024*1024){q.error("Image size should be less than 5MB");return}const M=new FileReader;M.onloadend=()=>{v(M.result),b(M.result)},M.readAsDataURL(D)},I=async U=>{if(U.preventDefault(),!w.firstName.trim()||!w.lastName.trim()){q.warn("Please fill in all required fields.");return}r(!0);try{const D={first_name:w.firstName.trim(),last_name:w.lastName.trim(),phone_number:w.phoneNumber.trim()||null};x!==null&&(D.profile_picture=x),await ie.put("/users/me",D),await a(),o(!1),v(null),window.dispatchEvent(new CustomEvent("userProfileUpdated")),q.success("Account information updated successfully!")}catch(D){console.error("Error updating account:",D);const M=D.response?.data?.detail||"Failed to update account information. Please try again.";q.error(M)}finally{r(!1)}},R=async U=>{if(U.preventDefault(),!E.newPassword||!E.confirmPassword){q.warn("Please fill in all password fields.");return}if(E.newPassword.length<8){q.warn("Password must be at least 8 characters long.");return}if(E.newPassword!==E.confirmPassword){q.warn("New password and confirm password do not match.");return}p(!0);try{const D={password:E.newPassword};await ie.put("/users/me",D),await a(),k({currentPassword:"",newPassword:"",confirmPassword:""}),window.dispatchEvent(new CustomEvent("userProfileUpdated")),p(!1),q.success("Password changed successfully!")}catch(D){console.error("Error changing password:",D);const M=D.response?.data?.detail||"Failed to change password. Please try again.";q.error(M)}finally{p(!1)}};return n.jsxs("div",{className:"p-2 lg:p-8 font-inter relative",children:[(t||!e)&&n.jsx(zt,{}),e&&n.jsxs("div",{children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-gray-800 mb-2",children:"Manage Your Account"}),n.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Update your account information and change your password"})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mb-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:[n.jsx(en,{className:"text-blue-600"}),"Profile Information"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:!i&&n.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition text-sm",children:[n.jsx(la,{}),"Edit Profile"]})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 mb-6 pb-6 border-b border-gray-200",children:[n.jsxs("div",{className:"flex-shrink-0 relative group",children:[N?n.jsx("div",{className:"relative",children:n.jsx("img",{src:N,alt:`${e.first_name} ${e.last_name}`,className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full object-cover border-2 border-gray-200 shadow-sm"})}):n.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 text-white flex items-center justify-center text-2xl sm:text-3xl font-semibold border-2 border-gray-200 shadow-sm",children:l$e(e.first_name,e.last_name)}),i&&n.jsxs("div",{className:"absolute bottom-0 right-0",children:[n.jsx("input",{type:"file",ref:C,accept:"image/*",onChange:_,className:"hidden",id:"profile-picture-upload"}),n.jsx("label",{htmlFor:"profile-picture-upload",className:"cursor-pointer bg-gray-900 text-white p-1.5 rounded-full shadow-lg hover:bg-gray-800 transition flex items-center justify-center border-2 border-white",title:"Change profile picture",children:n.jsx(zH,{size:14})})]})]}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[i?w.firstName:e.first_name," ",i?w.lastName:e.last_name]}),n.jsx("p",{className:"text-gray-600 text-sm",children:e.email}),n.jsx("span",{className:"inline-block mt-2 px-3 py-1 bg-blue-100 text-blue-700 text-xs font-semibold rounded-md",children:e.role})]})]}),i?n.jsxs("form",{onSubmit:I,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["First Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(en,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",value:w.firstName,onChange:U=>A("firstName",U.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(en,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",value:w.lastName,onChange:U=>A("lastName",U.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),n.jsxs("div",{className:"sm:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Email"}),n.jsxs("div",{className:"relative",children:[n.jsx(Xn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"email",value:w.email,disabled:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-600 cursor-not-allowed outline-none",readOnly:!0})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),n.jsxs("div",{className:"sm:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Phone Number"}),n.jsxs("div",{className:"relative",children:[n.jsx(At,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"tel",value:w.phoneNumber,onChange:U=>A("phoneNumber",U.target.value),placeholder:"+1 (555) 123-4567",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t border-gray-200",children:[n.jsx("button",{type:"button",onClick:()=>{o(!1),S({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),v(null),b(e.profile_picture||null),C.current&&(C.current.value="")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition",disabled:s,children:"Cancel"}),n.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:s,children:[n.jsx(Uk,{}),s?"Saving...":"Save Changes"]})]})]}):n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"First Name"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.first_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Name"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.last_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Email"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Phone Number"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.phone_number||"N/A"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[n.jsx(yo,{className:"text-blue-600"}),"Change Password"]}),n.jsxs("form",{onSubmit:R,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["New Password ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(yo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",style:l?void 0:{WebkitTextSecurity:"disc"},value:E.newPassword,onChange:U=>T("newPassword",U.target.value),placeholder:"Enter new password (min. 8 characters)",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),n.jsx("button",{type:"button",onClick:()=>c(U=>!U),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":l?"Hide password":"Show password",children:l?n.jsx(bu,{className:"size-5"}):n.jsx(vu,{className:"size-5"})})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Confirm New Password ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(yo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",style:d?void 0:{WebkitTextSecurity:"disc"},value:E.confirmPassword,onChange:U=>T("confirmPassword",U.target.value),placeholder:"Confirm new password",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),n.jsx("button",{type:"button",onClick:()=>u(U=>!U),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":d?"Hide password":"Show password",children:d?n.jsx(bu,{className:"size-5"}):n.jsx(vu,{className:"size-5"})})]})]}),n.jsx("div",{className:"pt-4 border-t border-gray-200 flex justify-center lg:justify-start",children:n.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:f,children:[n.jsx(yo,{}),f?"Changing Password...":"Change Password"]})})]})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mt-6",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[n.jsx(FH,{className:"text-blue-600"}),"Account Information"]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Role"}),n.jsx("span",{className:"inline-block px-3 py-1 bg-blue-100 text-blue-700 text-sm font-semibold rounded-md",children:e.role})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Status"}),n.jsx("span",{className:`inline-block px-3 py-1 text-sm font-semibold rounded-md ${e.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:e.is_active?"Active":"Inactive"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Company"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.company?.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Auth Provider"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.auth_provider?e.auth_provider.charAt(0).toUpperCase()+e.auth_provider.slice(1):"N/A"})]}),e.created_at&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Account Created"}),n.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),e.last_login&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Login"}),n.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.last_login).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})})]})]})]})]})]})}function WX({selectedDeal:e,onStatusUpdate:t,onClose:a}){const[s,r]=h.useState(e?.stage||""),[i,o]=h.useState(!1),l=bt(),c=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}];h.useEffect(()=>{e?.stage&&r(e.stage)},[e]);const d=async()=>{if(!e||!e.id){q.error("No deal selected");return}if(!s||s===e.stage){q.info("Please select a different stage");return}const u=e.id;o(!0);try{await ie.put(`/deals/admin/${u}`,{stage:s}),a&&a(),t&&setTimeout(async()=>{await t(!0)},100),setTimeout(()=>{q.success("Deal status updated successfully")},300)}catch(f){console.error(f);const p=f.response?.data?.detail||"Failed to update deal status";q.error(p)}finally{o(!1)}};return e?n.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{const u=e.account?.id||e.account_id;l("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:e.name?`Call regarding: ${e.name}`:"",relatedType1:"Account",relatedTo1:u,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assigned_to:e.assigned_deals?.id?String(e.assigned_deals.id):"",assignedTo:e.assigned_to?.id?String(e.assigned_to.id):""}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(At,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const u=encodeURIComponent(e.contact.email),f=encodeURIComponent(""),p=encodeURIComponent(""),x=`mailto:${u}?subject=${f}&body=${p}`;window.location.href=x},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Xn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{const u=e.account?.id||e.account_id;l("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:e.name?`Meeting: ${e.name}`:"",relatedType1:"Account",relatedTo1:u,relatedType2:"Deal",relatedTo2:e.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):""}}})},children:[n.jsx(Ct,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{const u=e.account?.id||e.account_id;l("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:e.name?`Task for: ${e.name}`:"",relatedType1:"Account",relatedTo1:u,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:s,onChange:u=>r(u.target.value),disabled:i,children:c.map(u=>n.jsx("option",{value:u.value,children:u.label},u.value))}),n.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:d,disabled:i||!s||s===e.stage,children:i?"Updating...":"Update"})]})]}):null}function qX({selectedDeal:e,show:t,onClose:a,activeTab:s,setActiveTab:r,onEdit:i,onDelete:o,onStatusUpdate:l,relatedActs:c}){const d=bt(),[u]=Ds(),f=u.get("id"),[p,x]=h.useState(e||null),[v,N]=h.useState(s||"Overview"),[b,C]=h.useState(null),[w,S]=h.useState(""),{userRole:E}=Bs(),k=s!==void 0?s:v;if(h.useEffect(()=>{E.toLowerCase()==="ceo"||E.toLowerCase()==="admin"?S("admin"):E.toLowerCase()==="group manager"||E.toLowerCase()==="group_manager"?S("group-manager"):E.toLowerCase()==="manager"?S("manager"):E.toLowerCase()==="sales"?S("sales"):S("guest")},[E]),h.useEffect(()=>{(async()=>{if(f&&!e)try{const U=((await ie.get("/deals/admin/fetch-all")).data||[]).find(D=>D.id===parseInt(f));if(U){const D={...U,amount:typeof U.amount=="number"?U.amount:parseFloat(U.amount||0),probability:U.probability||0};x(D)}else console.warn("Deal not found with ID:",f)}catch(I){console.error("Error fetching deal:",I)}})()},[f,e]),!p&&!f||f&&!p)return null;const A=_=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[_]||"bg-gray-100 text-gray-700";function T(_){return _?new Date(_).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),n.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:n.jsx("button",{onClick:()=>{a?a():d(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Vt,{size:25})})})]})}),n.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[n.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:p.name}),n.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${A(p.stage)}`,children:p.stage})]}),n.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",T(p.created_at)]})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[n.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[""," ",p.amount?p.amount.toLocaleString():"0"]}),n.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${p.probability}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",p.probability,"% Complete"," "]}),n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[n.jsxs("button",{type:"button",onClick:()=>{i&&i(p)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(la,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),n.jsxs("button",{type:"button",onClick:()=>{o&&o(p)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(Ut,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(_=>n.jsx("button",{onClick:()=>{r?r(_):N(_)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${k===_?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:_},_))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[k==="Overview"&&n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Description:"})," ",p.description]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Expected Close Date:"})," ",p.close_date]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("div",{className:"mt-4 py-3 w-full",children:[n.jsxs("div",{className:"relative flex flex-col w-full",children:[n.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const _=(p?.stage||"PROSPECTING").toUpperCase(),R=(D=>D==="PROSPECTING"?0:D==="QUALIFICATION"?1:D==="PROPOSAL"?2:D==="NEGOTIATION"?3:D==="CLOSED_WON"||D==="CLOSED_LOST"?4:-1)(_);return[0,1,2,3,4].map(D=>R===D?"orange":R>D?"green":"gray").map((D,M)=>n.jsxs(pt.Fragment,{children:[n.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${D==="green"?"bg-green-500 border-green-500":D==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),M<4&&n.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},M))})()}),n.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((_,I)=>n.jsx("span",{className:"text-center flex-1 break-words",children:_},I))})]}),n.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:p.stage})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),n.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Account:"})," ",p.account?.name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Primary Contact:"})," ",p.contact?.first_name," ",p.contact?.last_name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Phone:"})," ",p.contact?.work_phone]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",p.contact?.email]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Assigned To:"})," ",p.assigned_deals?.first_name," ",p.assigned_deals?.last_name]})]})]})]}),k==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:p.description||"No notes available."})]})]}),s==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[c.tasks&&c.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",c.tasks.length,")"]})]}),b==="tasks"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),b==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:c.tasks.map((_,I)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>d(`/${w}/tasks`,{state:{taskID:_.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:_.subject||_.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:_.description||"No description"}),_.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",_.assigned_to.first_name," ",_.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:T(_.due_date||_.created_at)})]},`task-${I}`))})]}),c.meetings&&c.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ct,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",c.meetings.length,")"]})]}),b==="meetings"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),b==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:c.meetings.map((_,I)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>d(`/${w}/meetings`,{state:{meetingID:_.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Ct,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:_.subject||_.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:_.description||_.location||"No description"}),_.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",_.host.first_name," ",_.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:T(_.start_time||_.created_at)})]},`meeting-${I}`))})]}),c.calls&&c.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(At,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",c.calls.length,")"]})]}),b==="calls"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),b==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:c.calls.map((_,I)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>d(`/${w}/calls`,{state:{callID:_.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(At,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:_.subject||_.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:_.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:T(_.call_time||_.created_at)})]},`call-${I}`))})]}),c.quotes&&c.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(xn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",c.quotes.length,")"]})]}),b==="quotes"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),b==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:c.quotes.map((_,I)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>d(`/${w}/quotes`,{state:{quoteID:_.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(xn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(_.quote_id?_.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:_.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:T(_.presented_date)||""})]},`quote-${I}`))})]}),(!c||(!c.tasks||c.tasks.length===0)&&(!c.meetings||c.meetings.length===0)&&(!c.calls||c.calls.length===0)&&(!c.quotes||c.quotes.length===0)&&(!c.deals||c.deals.length===0)&&(!c.contacts||c.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]}),k==="Edit"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),n.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:p.name})]}),n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),n.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:p.description})]}),n.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),n.jsx("div",{className:"w-full lg:w-auto",children:n.jsx(WX,{selectedDeal:p,onStatusUpdate:l,onClose:a})})]})]})]})})}function d$e(){h.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const e=bt(),t=Qt(),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Stage"),[o,l]=h.useState("Filter by Owner"),[c,d]=h.useState(null),[u,f]=h.useState("Overview"),[p,x]=h.useState(!1),[v,N]=h.useState(null),[b,C]=h.useState(!1),[w,S]=h.useState(1),[E,k]=h.useState(10),[A,T]=h.useState(!1),[_,I]=h.useState(null),[R,U]=h.useState(!1),[D,M]=h.useState([]),[W,X]=h.useState(!1),[z,Q]=h.useState(null),[de,Y]=h.useState([]),[se,J]=h.useState([]),[F,Ne]=h.useState([]),[re,he]=h.useState({}),[je,De]=h.useState(null);h.useEffect(()=>{const V=t.state,te=V?.dealID;if(te&&!V?.openDealModal){De(te),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(je&&v?.length>0&&!b){const V=v.find(te=>te.id===je);V?d(V):q.error("Deal not found."),De(null)}},[je,v,b]);const[Me,ve]=h.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),Be={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST","Closed Cancelled Stage":"CLOSED_CANCELLED"},ke=V=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost",CLOSED_CANCELLED:"Closed Cancelled"})[V]||V||"--",fe=V=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700",CLOSED_CANCELLED:"bg-red-100 text-red-700"})[V]||"bg-gray-100 text-gray-700",ne=h.useCallback(async V=>{try{const te=await ie.get(`/activities/deal/${V}`);he(te.data&&typeof te.data=="object"?te.data:{})}catch(te){console.error(te),te.response?.status===404&&(console.warn("No activities found for this account."),he({}))}},[]),Ae=h.useMemo(()=>{const V=a.trim().toLowerCase(),te=r.trim(),Z=o.trim();return(v??[]).filter(Se=>{const me=[Se?.name,Se?.description,Se?.account?.name,Se?.contact?.first_name,Se?.contact?.last_name,Se?.assigned_deals?.first_name,Se?.assigned_deals?.last_name],ue=V===""||me.some(We=>We==null||We===""?!1:We.toString().toLowerCase().includes(V)),$e=te==="Filter by Stage"||te===""||Se.stage===Be[te]||Se.stage===te,be=Z==="Filter by Owner"||Z===""||`${Se.assigned_deals?.first_name||""} ${Se.assigned_deals?.last_name||""}`.trim().toLowerCase()===Z.toLowerCase();return ue&&$e&&be})},[v,a,r,o]),ye=Math.max(1,Math.ceil(Ae.length/E)||1);h.useEffect(()=>{S(1)},[a,r,o,E]),h.useEffect(()=>{S(V=>{const te=Math.max(1,Math.ceil(Ae.length/E)||1);return V>te?te:V})},[Ae.length,E]);const Ie=h.useMemo(()=>{const V=(w-1)*E;return Ae.slice(V,V+E)},[Ae,w,E]),Ve=()=>S(V=>Math.max(V-1,1)),Te=()=>S(V=>Math.min(V+1,ye)),Fe=()=>{ve({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),X(!1),Q(null),x(!0)},Ye=async()=>{C(!0);try{const V=await ie.get("/deals/admin/fetch-all"),Z=[...Array.isArray(V.data)?V.data:[]].sort((Se,me)=>{const ue=Se?.created_at?new Date(Se.created_at).getTime():0;return(me?.created_at?new Date(me.created_at).getTime():0)-ue});N(Z)}catch(V){V.response&&V.response.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch deals. Please try again later."),console.error(V)}finally{C(!1)}},B=async()=>{try{const V=await ie.get("/accounts/admin/fetch-all");Y(Array.isArray(V.data)?V.data:[])}catch(V){console.error(V),V.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},xe=async()=>{try{const V=await ie.get("/contacts/admin/fetch-all");J(Array.isArray(V.data)?V.data:[])}catch(V){console.error(V),V.response?.status===403&&q.warn("Unable to load contacts (permission denied).")}},_e=async()=>{try{const V=await ie.get("/users/all");Ne(Array.isArray(V.data)?V.data:[])}catch(V){console.error(V),V.response?.status===403&&q.warn("Unable to load users (permission denied).")}};h.useEffect(()=>{Ye(),B(),xe(),_e()},[]);const ce=V=>{V&&(ve({id:V.id||null,name:V.name||"",account_id:V.account_id?.toString()||"",primary_contact_id:V.primary_contact_id?.toString()||"",stage:V.stage||"PROPOSAL",amount:V.amount?.toString()||"",close_date:V.close_date?new Date(V.close_date).toISOString().split("T")[0]:"",assigned_to:V.assigned_to?.toString()||"",currency:V.currency||"PHP",description:V.description||""}),X(!0),Q(V.id),d(null),x(!0))},Ee=async(V=!1)=>{try{const te=await ie.get("/deals/admin/fetch-all"),Se=[...Array.isArray(te.data)?te.data:[]].sort((me,ue)=>{const $e=me?.created_at?new Date(me.created_at).getTime():0;return(ue?.created_at?new Date(ue.created_at).getTime():0)-$e});if(N(Se),!V&&c&&c.id){const me=Se.find(ue=>ue.id===c.id);me&&d({...me})}}catch(te){console.error("Failed to refresh deal data:",te),await Ye()}},ae=V=>{const te=V.name.trim();if(!te){q.error("Deal name is required.");return}if(!V.account_id){q.error("Account is required.");return}const Z=W&&z?"update":"create",Se=te;I({title:Z==="create"?"Confirm New Deal":"Confirm Update",message:Z==="create"?n.jsxs("span",{children:["Are you sure you want to create"," ",n.jsx("span",{className:"font-semibold",children:Se}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:Se}),"?"]}),confirmLabel:Z==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:Z,formData:V,targetId:z||null,name:Se}})},He=V=>{if(!V)return;const te=V.name||"this deal";I({title:"Delete Deal",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:te}),"? This action cannot be undone."]}),confirmLabel:"Delete Deal",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:V.id,name:te}})},Re=V=>{if(V.target.checked){const te=Ie.map(Z=>Z.id);M(te)}else M([])},it=V=>{M(te=>te.includes(V)?te.filter(Z=>Z!==V):[...te,V])},mt=async()=>{D.length!==0&&I({title:"Delete Deals",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:D.length})," selected deals? This action cannot be undone."]}),confirmLabel:`Delete ${D.length} Deal(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",dealIds:D}})},ee=async()=>{if(!_?.action){I(null);return}const{action:V}=_,{type:te,formData:Z,targetId:Se,name:me}=V;U(!0);try{if(te==="create"){T(!0);const ue={name:Z.name.trim(),account_id:parseInt(Z.account_id),primary_contact_id:Z.primary_contact_id?parseInt(Z.primary_contact_id):null,stage:Z.stage,amount:Z.amount?parseFloat(Z.amount):null,currency:Z.currency||"PHP",close_date:Z.close_date||null,description:Z.description||null,assigned_to:Z.assigned_to?parseInt(Z.assigned_to):null};await ie.post("/deals/admin/create",ue),q.success(`Deal "${me}" created successfully.`),x(!1),await Ye()}else if(te==="update"){if(!Se)throw new Error("Missing deal identifier for update.");T(!0);const ue={};Z.name!==void 0&&(ue.name=Z.name.trim()),Z.account_id!==void 0&&Z.account_id!==""&&(ue.account_id=parseInt(Z.account_id)),Z.primary_contact_id!==void 0&&(ue.primary_contact_id=Z.primary_contact_id?parseInt(Z.primary_contact_id):null),Z.stage!==void 0&&(ue.stage=Z.stage),Z.amount!==void 0&&Z.amount!==""&&(ue.amount=parseFloat(Z.amount)),Z.currency!==void 0&&(ue.currency=Z.currency),Z.close_date!==void 0&&(ue.close_date=Z.close_date||null),Z.description!==void 0&&(ue.description=Z.description||null),Z.assigned_to!==void 0&&(ue.assigned_to=Z.assigned_to?parseInt(Z.assigned_to):null),await ie.put(`/deals/admin/${Se}`,ue),q.success(`Deal "${me}" updated successfully.`),x(!1),await Ye()}else if(te==="delete"){if(!Se)throw new Error("Missing deal identifier for deletion.");await ie.delete(`/deals/admin/${Se}`),q.success(`Deal "${me}" deleted successfully.`),c?.id===Se&&d(null),await Ye()}else if(te==="bulk-delete"){const{dealIds:ue}=V;await ie.delete("/deals/admin/bulk-delete",{data:{deal_ids:ue}}),q.success(`Successfully deleted ${ue.length} deals`),M([]),await Ye()}}catch(ue){console.error(ue);const $e=te==="create"?"Failed to create deal. Please review the details and try again.":te==="update"?"Failed to update deal. Please review the details and try again.":"Failed to delete deal. Please try again.",be=ue.response?.data?.detail||$e;q.error(be)}finally{(te==="create"||te==="update")&&T(!1),U(!1),I(null)}},pe=()=>{R||I(null)},Ue=()=>{x(!1),ve({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),X(!1),Q(null),T(!1)},Ze=(v??[]).filter(V=>V.stage==="PROSPECTING").length,nt=(v??[]).filter(V=>V.stage==="QUALIFICATION").length,Je=(v??[]).filter(V=>V.stage==="PROPOSAL").length,Oe=(v??[]).filter(V=>V.stage==="NEGOTIATION").length,ge=(v??[]).filter(V=>V.stage==="CLOSED_WON").length,Ke=(v??[]).filter(V=>V.stage==="CLOSED_LOST").length,G=(v??[]).filter(V=>V.stage==="CLOSED_CANCELLED").length,$=[{title:"Prospecting",value:Ze,icon:Iw,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:nt,icon:ia,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:Je,icon:Kt,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:Oe,icon:Kc,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:ge,icon:ba,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:Ke,icon:Ps,color:"text-red-600",bgColor:"bg-red-100"},{title:"Closed Cancelled",value:G,icon:Ps,color:"text-gray-600",bgColor:"bg-gray-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[b&&n.jsx(zt,{message:"Loading deals..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Kt,{className:"mr-2 text-blue-600"}),"Deals"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:Fe,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(un,{className:"mr-2"})," Add Deal"]})})]}),n.jsx("div",{className:"grid grid-cols-1 p-2 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden",children:$.map(V=>n.jsx(m$e,{...V},V.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Ht,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search deals",value:a,onChange:V=>s(V.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[n.jsxs("select",{value:r,onChange:V=>i(V.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),n.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),n.jsx("option",{value:"Qualification Stage",children:"Qualification"}),n.jsx("option",{value:"Proposal Stage",children:"Proposal"}),n.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),n.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),n.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"}),n.jsx("option",{value:"Closed Cancelled Stage",children:"Closed Cancelled"})]}),n.jsxs("select",{value:o,onChange:V=>l(V.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((v??[]).map(V=>`${V.assigned_deals?.first_name} ${V.assigned_deals?.last_name}`))].map((V,te)=>n.jsx("option",{value:V,children:V},te))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:Ie.length>0&&Ie.every(V=>D.includes(V.id)),onChange:Re})}),n.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Stage"}),n.jsx("th",{className:"py-3 px-4",children:"Value"}),n.jsx("th",{className:"py-3 px-4",children:"Close Date"}),n.jsx("th",{className:"py-3 px-4",children:"Owner"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:D.length>0?n.jsx("button",{onClick:mt,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${D.length} selected items`,children:n.jsx(Ut,{size:18})}):""})]})}),n.jsx("tbody",{children:Ae.length>0?Ie.map(V=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{d({...V}),ne(V.id)},children:[n.jsx("td",{className:"py-3 px-4",onClick:te=>te.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:D.includes(V.id),onChange:()=>it(V.id)})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:V.deal_id?V.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:V.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:V.description||"--"})]})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:V.account?.name||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:V.contact?.first_name&&V.contact?.last_name?`${V.contact.first_name} ${V.contact.last_name}`:V.contact?.first_name||V.contact?.last_name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${fe(V.stage)}`,children:ke(V.stage)})}),n.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",V.amount?.toLocaleString()||"0"]}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:V.close_date||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:V.assigned_deals?.first_name&&V.assigned_deals?.last_name?`${V.assigned_deals.first_name} ${V.assigned_deals.last_name}`:V.assigned_deals?.first_name||V.assigned_deals?.last_name||"--"})]},V.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No deals found."})})})]})}),n.jsx(tn,{className:"mt-4",totalItems:Ae.length,pageSize:E,currentPage:w,onPrev:Ve,onNext:Te,onPageSizeChange:V=>{k(V),S(1)},pageSizeOptions:[10,20,30,40,50],label:"deals"}),p&&n.jsx(f$e,{onClose:Ue,formData:Me,setFormData:ve,isEditing:W,onSubmit:ae,isSubmitting:A||R,accounts:de,contacts:se,users:F}),c&&n.jsx(qX,{relatedActs:re,selectedDeal:c,show:!!c,onClose:()=>d(null),activeTab:u,setActiveTab:f,onEdit:ce,onDelete:He,onStatusUpdate:Ee}),_&&n.jsx(u$e,{open:!0,title:_.title,message:_.message,confirmLabel:_.confirmLabel,cancelLabel:_.cancelLabel,variant:_.variant,onConfirm:ee,onCancel:pe,loading:R})]})}function u$e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function m$e({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function f$e({onClose:e,formData:t,setFormData:a,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,accounts:o=[],contacts:l=[],users:c=[]}){const[d,u]=h.useState(!1),f=v=>{if(v.preventDefault(),u(!0),!t.name?.trim()){q.error("Deal name is required.");return}const N=Number(t.amount);if(!t.amount||isNaN(N)||N<=0){q.error("Amount must be a number greater than 0.");return}if(!t.account_id){q.error("Please select an account.");return}if(!t.primary_contact_id){q.error("Please select a primary contact.");return}if(!t.assigned_to){q.error("Please assign this deal to a user.");return}r?.(t)},p=v=>{v.target.id==="modalBackdrop"&&e()},x=h.useMemo(()=>{const v=String(t.account_id||"").trim(),N=Array.isArray(l)?l:[];return v?N.filter(b=>{const w=[b?.account_id,b?.accountId,b?.account?.id,b?.account?.account_id,b?.account?.accountId].find(S=>S!=null&&String(S).trim()!=="");return w?String(w)===v:!1}):N},[l,t.account_id]);return h.useEffect(()=>{const v=String(t.account_id||"").trim(),N=String(t.primary_contact_id||"").trim();if(!N||!v)return;x.some(C=>String(C?.id)===N)||a(C=>({...C,primary_contact_id:""}))},[t.account_id,t.primary_contact_id,x,a]),n.jsx("div",{id:"modalBackdrop",onClick:p,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:v=>v.stopPropagation(),children:[n.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Deal":"Create Deal"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:f,noValidate:!0,children:[n.jsx(O2,{label:"Deal Name",name:"name",value:t.name,onChange:v=>a({...t,name:v.target.value}),placeholder:"Enter deal name",required:!0,isSubmitted:d,className:"md:col-span-2"}),n.jsx(M2,{label:"Account",value:t.account_id||"",onChange:v=>a({...t,account_id:v}),items:o||[],getLabel:v=>v?.name??"",placeholder:"Search account...",disabled:i,required:!0,isSubmitted:d}),n.jsx(M2,{label:"Primary Contact",value:t.primary_contact_id||"",onChange:v=>a({...t,primary_contact_id:v}),items:x||[],getLabel:v=>`${v?.first_name??""} ${v?.last_name??""}`.trim()||v?.email||"",placeholder:"Search contact...",required:!0,isSubmitted:d,disabled:i}),n.jsx(c7,{label:"Stage",name:"stage",value:t.stage,onChange:v=>a({...t,stage:v.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}],disabled:i}),n.jsx(O2,{label:"Amount",name:"amount",type:"number",step:"0.01",value:t.amount,onChange:v=>a({...t,amount:v.target.value}),placeholder:"0",required:!0,isSubmitted:d}),n.jsx(c7,{label:"Currency",name:"currency",value:t.currency||"PHP",onChange:v=>a({...t,currency:v.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),n.jsx(O2,{label:"Close Date",name:"close_date",type:"date",value:t.close_date||"",onChange:v=>a({...t,close_date:v.target.value}),disabled:i}),n.jsx(M2,{label:"Assign To",value:t.assigned_to||"",onChange:v=>a({...t,assigned_to:v}),items:c||[],getLabel:v=>`${v?.first_name??""} ${v?.last_name??""}`.trim()||v?.email||"",placeholder:"Search assignee...",disabled:i,required:!0,isSubmitted:d,className:"md:col-span-2"}),n.jsx(g$e,{label:"Description",name:"description",value:t.description,onChange:v=>a({...t,description:v.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Deal":"Save Deal"})]})]})]})})}function O2({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function c7({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))})]})}function M2({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(h$e,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function h$e({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",N=h.useMemo(()=>{const b=u.trim().toLowerCase();return(b?e.filter(w=>(s(w)||"").toLowerCase().includes(b)):e).slice(0,o)},[e,u,s,o]);return h.useEffect(()=>{const b=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:v,placeholder:r,onFocus:()=>!i&&d(!0),onChange:b=>{f(b.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:N.length>0?N.map(b=>{const C=String(b.id),w=s(b),S=String(t)===C;return n.jsx("button",{type:"button",onClick:()=>{a(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},C)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function g$e({label:e,name:t,value:a,onChange:s,placeholder:r,required:i=!1,disabled:o=!1,className:l="",rows:c=3}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,required:i,disabled:o,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}var p$e=Object.defineProperty,x$e=(e,t,a)=>t in e?p$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,I2=(e,t,a)=>(x$e(e,typeof t!="symbol"?t+"":t,a),a);let y$e=class{constructor(){I2(this,"current",this.detect()),I2(this,"handoffState","pending"),I2(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},So=new y$e;function Jx(e){var t;return So.isServer?null:e==null?document:(t=e?.ownerDocument)!=null?t:document}function mk(e){var t,a;return So.isServer?null:e==null?document:(a=(t=e?.getRootNode)==null?void 0:t.call(e))!=null?a:document}function VX(e){var t,a;return(a=(t=mk(e))==null?void 0:t.activeElement)!=null?a:null}function b$e(e){return VX(e)===e}function Mj(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function ec(){let e=[],t={addEventListener(a,s,r,i){return a.addEventListener(s,r,i),t.add(()=>a.removeEventListener(s,r,i))},requestAnimationFrame(...a){let s=requestAnimationFrame(...a);return t.add(()=>cancelAnimationFrame(s))},nextFrame(...a){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...a))},setTimeout(...a){let s=setTimeout(...a);return t.add(()=>clearTimeout(s))},microTask(...a){let s={current:!0};return Mj(()=>{s.current&&a[0]()}),t.add(()=>{s.current=!1})},style(a,s,r){let i=a.style.getPropertyValue(s);return Object.assign(a.style,{[s]:r}),this.add(()=>{Object.assign(a.style,{[s]:i})})},group(a){let s=ec();return a(s),this.add(()=>s.dispose())},add(a){return e.includes(a)||e.push(a),()=>{let s=e.indexOf(a);if(s>=0)for(let r of e.splice(s,1))r()}},dispose(){for(let a of e.splice(0))a()}};return t}function Ij(){let[e]=h.useState(ec);return h.useEffect(()=>()=>e.dispose(),[e]),e}let or=(e,t)=>{So.isServer?h.useEffect(e,t):h.useLayoutEffect(e,t)};function Yu(e){let t=h.useRef(e);return or(()=>{t.current=e},[e]),t}let Bn=function(e){let t=Yu(e);return pt.useCallback((...a)=>t.current(...a),[t])};function e0(e){return h.useMemo(()=>e,Object.values(e))}let v$e=h.createContext(void 0);function w$e(){return h.useContext(v$e)}function fk(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function zl(e,t,...a){if(e in t){let r=t[e];return typeof r=="function"?r(...a):r}let s=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(r=>`"${r}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,zl),s}var cw=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(cw||{}),Gc=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Gc||{});function wi(){let e=j$e();return h.useCallback(t=>N$e({mergeRefs:e,...t}),[e])}function N$e({ourProps:e,theirProps:t,slot:a,defaultTag:s,features:r,visible:i=!0,name:o,mergeRefs:l}){l=l??C$e;let c=YX(t,e);if(i)return Zy(c,a,s,o,l);let d=r??0;if(d&2){let{static:u=!1,...f}=c;if(u)return Zy(f,a,s,o,l)}if(d&1){let{unmount:u=!0,...f}=c;return zl(u?0:1,{0(){return null},1(){return Zy({...f,hidden:!0,style:{display:"none"}},a,s,o,l)}})}return Zy(c,a,s,o,l)}function Zy(e,t={},a,s,r){let{as:i=a,children:o,refName:l="ref",...c}=$2(e,["unmount","static"]),d=e.ref!==void 0?{[l]:e.ref}:{},u=typeof o=="function"?o(t):o;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(t)),c["aria-labelledby"]&&c["aria-labelledby"]===c.id&&(c["aria-labelledby"]=void 0);let f={};if(t){let p=!1,x=[];for(let[v,N]of Object.entries(t))typeof N=="boolean"&&(p=!0),N===!0&&x.push(v.replace(/([A-Z])/g,b=>`-${b.toLowerCase()}`));if(p){f["data-headlessui-state"]=x.join(" ");for(let v of x)f[`data-${v}`]=""}}if(Vg(i)&&(Object.keys(qd(c)).length>0||Object.keys(qd(f)).length>0))if(!h.isValidElement(u)||Array.isArray(u)&&u.length>1||_$e(u)){if(Object.keys(qd(c)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${s} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(qd(c)).concat(Object.keys(qd(f))).map(p=>`  - ${p}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(p=>`  - ${p}`).join(`
`)].join(`
`))}else{let p=u.props,x=p?.className,v=typeof x=="function"?(...C)=>fk(x(...C),c.className):fk(x,c.className),N=v?{className:v}:{},b=YX(u.props,qd($2(c,["ref"])));for(let C in f)C in b&&delete f[C];return h.cloneElement(u,Object.assign({},b,f,d,{ref:r(S$e(u),d.ref)},N))}return h.createElement(i,Object.assign({},$2(c,["ref"]),!Vg(i)&&d,!Vg(i)&&f),u)}function j$e(){let e=h.useRef([]),t=h.useCallback(a=>{for(let s of e.current)s!=null&&(typeof s=="function"?s(a):s.current=a)},[]);return(...a)=>{if(!a.every(s=>s==null))return e.current=a,t}}function C$e(...e){return e.every(t=>t==null)?void 0:t=>{for(let a of e)a!=null&&(typeof a=="function"?a(t):a.current=t)}}function YX(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},a={};for(let s of e)for(let r in s)r.startsWith("on")&&typeof s[r]=="function"?(a[r]!=null||(a[r]=[]),a[r].push(s[r])):t[r]=s[r];if(t.disabled||t["aria-disabled"])for(let s in a)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(s)&&(a[s]=[r=>{var i;return(i=r?.preventDefault)==null?void 0:i.call(r)}]);for(let s in a)Object.assign(t,{[s](r,...i){let o=a[s];for(let l of o){if((r instanceof Event||r?.nativeEvent instanceof Event)&&r.defaultPrevented)return;l(r,...i)}}});return t}function gr(e){var t;return Object.assign(h.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function qd(e){let t=Object.assign({},e);for(let a in t)t[a]===void 0&&delete t[a];return t}function $2(e,t=[]){let a=Object.assign({},e);for(let s of t)s in a&&delete a[s];return a}function S$e(e){return pt.version.split(".")[0]>="19"?e.props.ref:e.ref}function Vg(e){return e===h.Fragment||e===Symbol.for("react.fragment")}function _$e(e){return Vg(e.type)}let A$e="span";var dw=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(dw||{});function T$e(e,t){var a;let{features:s=1,...r}=e,i={ref:t,"aria-hidden":(s&2)===2?!0:(a=r["aria-hidden"])!=null?a:void 0,hidden:(s&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(s&4)===4&&(s&2)!==2&&{display:"none"}}};return wi()({ourProps:i,theirProps:r,slot:{},defaultTag:A$e,name:"Hidden"})}let hk=gr(T$e);function E$e(e){return typeof e!="object"||e===null?!1:"nodeType"in e}function Xc(e){return E$e(e)&&"tagName"in e}function Mu(e){return Xc(e)&&"accessKey"in e}function Wc(e){return Xc(e)&&"tabIndex"in e}function k$e(e){return Xc(e)&&"style"in e}function L$e(e){return Mu(e)&&e.nodeName==="IFRAME"}function P$e(e){return Mu(e)&&e.nodeName==="INPUT"}let QX=Symbol();function D$e(e,t=!0){return Object.assign(e,{[QX]:t})}function Ro(...e){let t=h.useRef(e);h.useEffect(()=>{t.current=e},[e]);let a=Bn(s=>{for(let r of t.current)r!=null&&(typeof r=="function"?r(s):r.current=s)});return e.every(s=>s==null||s?.[QX])?void 0:a}let hD=h.createContext(null);hD.displayName="DescriptionContext";function KX(){let e=h.useContext(hD);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,KX),t}return e}function O$e(){let[e,t]=h.useState([]);return[e.length>0?e.join(" "):void 0,h.useMemo(()=>function(a){let s=Bn(i=>(t(o=>[...o,i]),()=>t(o=>{let l=o.slice(),c=l.indexOf(i);return c!==-1&&l.splice(c,1),l}))),r=h.useMemo(()=>({register:s,slot:a.slot,name:a.name,props:a.props,value:a.value}),[s,a.slot,a.name,a.props,a.value]);return pt.createElement(hD.Provider,{value:r},a.children)},[t])]}let M$e="p";function I$e(e,t){let a=h.useId(),s=w$e(),{id:r=`headlessui-description-${a}`,...i}=e,o=KX(),l=Ro(t);or(()=>o.register(r),[r,o.register]);let c=e0({...o.slot,disabled:s||!1}),d={ref:l,...o.props,id:r};return wi()({ourProps:d,theirProps:i,slot:c,defaultTag:M$e,name:o.name||"Description"})}let $$e=gr(I$e),R$e=Object.assign($$e,{});var XX=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(XX||{});let z$e=h.createContext(()=>{});function U$e({value:e,children:t}){return pt.createElement(z$e.Provider,{value:e},t)}let ZX=class extends Map{constructor(t){super(),this.factory=t}get(t){let a=super.get(t);return a===void 0&&(a=this.factory(t),this.set(t,a)),a}};var F$e=Object.defineProperty,B$e=(e,t,a)=>t in e?F$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,H$e=(e,t,a)=>(B$e(e,t+"",a),a),JX=(e,t,a)=>{if(!t.has(e))throw TypeError("Cannot "+a)},Xr=(e,t,a)=>(JX(e,t,"read from private field"),a?a.call(e):t.get(e)),R2=(e,t,a)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,a)},d7=(e,t,a,s)=>(JX(e,t,"write to private field"),t.set(e,a),a),oo,Og,Mg;let G$e=class{constructor(t){R2(this,oo,{}),R2(this,Og,new ZX(()=>new Set)),R2(this,Mg,new Set),H$e(this,"disposables",ec()),d7(this,oo,t),So.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return Xr(this,oo)}subscribe(t,a){if(So.isServer)return()=>{};let s={selector:t,callback:a,current:t(Xr(this,oo))};return Xr(this,Mg).add(s),this.disposables.add(()=>{Xr(this,Mg).delete(s)})}on(t,a){return So.isServer?()=>{}:(Xr(this,Og).get(t).add(a),this.disposables.add(()=>{Xr(this,Og).get(t).delete(a)}))}send(t){let a=this.reduce(Xr(this,oo),t);if(a!==Xr(this,oo)){d7(this,oo,a);for(let s of Xr(this,Mg)){let r=s.selector(Xr(this,oo));eZ(s.current,r)||(s.current=r,s.callback(r))}for(let s of Xr(this,Og).get(t.type))s(Xr(this,oo),t)}}};oo=new WeakMap,Og=new WeakMap,Mg=new WeakMap;function eZ(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:Array.isArray(e)&&Array.isArray(t)?e.length!==t.length?!1:z2(e[Symbol.iterator](),t[Symbol.iterator]()):e instanceof Map&&t instanceof Map||e instanceof Set&&t instanceof Set?e.size!==t.size?!1:z2(e.entries(),t.entries()):u7(e)&&u7(t)?z2(Object.entries(e)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()):!1}function z2(e,t){do{let a=e.next(),s=t.next();if(a.done&&s.done)return!0;if(a.done||s.done||!Object.is(a.value,s.value))return!1}while(!0)}function u7(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||Object.getPrototypeOf(t)===null}var W$e=Object.defineProperty,q$e=(e,t,a)=>t in e?W$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,m7=(e,t,a)=>(q$e(e,typeof t!="symbol"?t+"":t,a),a),V$e=(e=>(e[e.Push=0]="Push",e[e.Pop=1]="Pop",e))(V$e||{});let Y$e={0(e,t){let a=t.id,s=e.stack,r=e.stack.indexOf(a);if(r!==-1){let i=e.stack.slice();return i.splice(r,1),i.push(a),s=i,{...e,stack:s}}return{...e,stack:[...e.stack,a]}},1(e,t){let a=t.id,s=e.stack.indexOf(a);if(s===-1)return e;let r=e.stack.slice();return r.splice(s,1),{...e,stack:r}}},Q$e=class tZ extends G$e{constructor(){super(...arguments),m7(this,"actions",{push:t=>this.send({type:0,id:t}),pop:t=>this.send({type:1,id:t})}),m7(this,"selectors",{isTop:(t,a)=>t.stack[t.stack.length-1]===a,inStack:(t,a)=>t.stack.includes(a)})}static new(){return new tZ({stack:[]})}reduce(t,a){return zl(a.type,Y$e,t,a)}};const nZ=new ZX(()=>Q$e.new());function aZ(e,t,a=eZ){return G3e.useSyncExternalStoreWithSelector(Bn(s=>e.subscribe(K$e,s)),Bn(()=>e.state),Bn(()=>e.state),Bn(t),a)}function K$e(e){return e}function t0(e,t){let a=h.useId(),s=nZ.get(t),[r,i]=aZ(s,h.useCallback(o=>[s.selectors.isTop(o,a),s.selectors.inStack(o,a)],[s,a]));return or(()=>{if(e)return s.actions.push(a),()=>s.actions.pop(a)},[s,e,a]),e?i?r:!0:!1}let gk=new Map,Yg=new Map;function f7(e){var t;let a=(t=Yg.get(e))!=null?t:0;return Yg.set(e,a+1),a!==0?()=>h7(e):(gk.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>h7(e))}function h7(e){var t;let a=(t=Yg.get(e))!=null?t:1;if(a===1?Yg.delete(e):Yg.set(e,a-1),a!==1)return;let s=gk.get(e);s&&(s["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",s["aria-hidden"]),e.inert=s.inert,gk.delete(e))}function X$e(e,{allowed:t,disallowed:a}={}){let s=t0(e,"inert-others");or(()=>{var r,i;if(!s)return;let o=ec();for(let c of(r=a?.())!=null?r:[])c&&o.add(f7(c));let l=(i=t?.())!=null?i:[];for(let c of l){if(!c)continue;let d=Jx(c);if(!d)continue;let u=c.parentElement;for(;u&&u!==d.body;){for(let f of u.children)l.some(p=>f.contains(p))||o.add(f7(f));u=u.parentElement}}return o.dispose},[s,t,a])}function Z$e(e,t,a){let s=Yu(r=>{let i=r.getBoundingClientRect();i.x===0&&i.y===0&&i.width===0&&i.height===0&&a()});h.useEffect(()=>{if(!e)return;let r=t===null?null:Mu(t)?t:t.current;if(!r)return;let i=ec();if(typeof ResizeObserver<"u"){let o=new ResizeObserver(()=>s.current(r));o.observe(r),i.add(()=>o.disconnect())}if(typeof IntersectionObserver<"u"){let o=new IntersectionObserver(()=>s.current(r));o.observe(r),i.add(()=>o.disconnect())}return()=>i.dispose()},[t,s,e])}let uw=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","details>summary","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),J$e=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var xl=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(xl||{}),pk=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(pk||{}),e6e=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(e6e||{});function t6e(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(uw)).sort((t,a)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(a.tabIndex||Number.MAX_SAFE_INTEGER)))}function n6e(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(J$e)).sort((t,a)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(a.tabIndex||Number.MAX_SAFE_INTEGER)))}var sZ=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(sZ||{});function a6e(e,t=0){var a;return e===((a=Jx(e))==null?void 0:a.body)?!1:zl(t,{0(){return e.matches(uw)},1(){let s=e;for(;s!==null;){if(s.matches(uw))return!0;s=s.parentElement}return!1}})}var s6e=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(s6e||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Cl(e){e?.focus({preventScroll:!0})}let r6e=["textarea","input"].join(",");function i6e(e){var t,a;return(a=(t=e?.matches)==null?void 0:t.call(e,r6e))!=null?a:!1}function o6e(e,t=a=>a){return e.slice().sort((a,s)=>{let r=t(a),i=t(s);if(r===null||i===null)return 0;let o=r.compareDocumentPosition(i);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Qg(e,t,{sorted:a=!0,relativeTo:s=null,skipElements:r=[]}={}){let i=Array.isArray(e)?e.length>0?mk(e[0]):document:mk(e),o=Array.isArray(e)?a?o6e(e):e:t&64?n6e(e):t6e(e);r.length>0&&o.length>1&&(o=o.filter(x=>!r.some(v=>v!=null&&"current"in v?v?.current===x:v===x))),s=s??i?.activeElement;let l=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,o.indexOf(s))-1;if(t&4)return Math.max(0,o.indexOf(s))+1;if(t&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=t&32?{preventScroll:!0}:{},u=0,f=o.length,p;do{if(u>=f||u+f<=0)return 0;let x=c+u;if(t&16)x=(x+f)%f;else{if(x<0)return 3;if(x>=f)return 1}p=o[x],p?.focus(d),u+=l}while(p!==VX(p));return t&6&&i6e(p)&&p.select(),2}function rZ(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function l6e(){return/Android/gi.test(window.navigator.userAgent)}function g7(){return rZ()||l6e()}function Jy(e,t,a,s){let r=Yu(a);h.useEffect(()=>{if(!e)return;function i(o){r.current(o)}return document.addEventListener(t,i,s),()=>document.removeEventListener(t,i,s)},[e,t,s])}function iZ(e,t,a,s){let r=Yu(a);h.useEffect(()=>{if(!e)return;function i(o){r.current(o)}return window.addEventListener(t,i,s),()=>window.removeEventListener(t,i,s)},[e,t,s])}const p7=30;function c6e(e,t,a){let s=Yu(a),r=h.useCallback(function(l,c){if(l.defaultPrevented)return;let d=c(l);if(d===null||!d.getRootNode().contains(d)||!d.isConnected)return;let u=(function f(p){return typeof p=="function"?f(p()):Array.isArray(p)||p instanceof Set?p:[p]})(t);for(let f of u)if(f!==null&&(f.contains(d)||l.composed&&l.composedPath().includes(f)))return;return!a6e(d,sZ.Loose)&&d.tabIndex!==-1&&l.preventDefault(),s.current(l,d)},[s,t]),i=h.useRef(null);Jy(e,"pointerdown",l=>{var c,d;g7()||(i.current=((d=(c=l.composedPath)==null?void 0:c.call(l))==null?void 0:d[0])||l.target)},!0),Jy(e,"pointerup",l=>{if(g7()||!i.current)return;let c=i.current;return i.current=null,r(l,()=>c)},!0);let o=h.useRef({x:0,y:0});Jy(e,"touchstart",l=>{o.current.x=l.touches[0].clientX,o.current.y=l.touches[0].clientY},!0),Jy(e,"touchend",l=>{let c={x:l.changedTouches[0].clientX,y:l.changedTouches[0].clientY};if(!(Math.abs(c.x-o.current.x)>=p7||Math.abs(c.y-o.current.y)>=p7))return r(l,()=>Wc(l.target)?l.target:null)},!0),iZ(e,"blur",l=>r(l,()=>L$e(window.document.activeElement)?window.document.activeElement:null),!0)}function gD(...e){return h.useMemo(()=>Jx(...e),[...e])}function oZ(e,t,a,s){let r=Yu(a);h.useEffect(()=>{e=e??window;function i(o){r.current(o)}return e.addEventListener(t,i,s),()=>e.removeEventListener(t,i,s)},[e,t,s])}function d6e(e){return h.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}function u6e(e,t){let a=e(),s=new Set;return{getSnapshot(){return a},subscribe(r){return s.add(r),()=>s.delete(r)},dispatch(r,...i){let o=t[r].call(a,...i);o&&(a=o,s.forEach(l=>l()))}}}function m6e(){let e;return{before({doc:t}){var a;let s=t.documentElement,r=(a=t.defaultView)!=null?a:window;e=Math.max(0,r.innerWidth-s.clientWidth)},after({doc:t,d:a}){let s=t.documentElement,r=Math.max(0,s.clientWidth-s.offsetWidth),i=Math.max(0,e-r);a.style(s,"paddingRight",`${i}px`)}}}function f6e(){return rZ()?{before({doc:e,d:t,meta:a}){function s(r){for(let i of a().containers)for(let o of i())if(o.contains(r))return!0;return!1}t.microTask(()=>{var r;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let l=ec();l.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>l.dispose()))}let i=(r=window.scrollY)!=null?r:window.pageYOffset,o=null;t.addEventListener(e,"click",l=>{if(Wc(l.target))try{let c=l.target.closest("a");if(!c)return;let{hash:d}=new URL(c.href),u=e.querySelector(d);Wc(u)&&!s(u)&&(o=u)}catch{}},!0),t.group(l=>{t.addEventListener(e,"touchstart",c=>{if(l.dispose(),Wc(c.target)&&k$e(c.target))if(s(c.target)){let d=c.target;for(;d.parentElement&&s(d.parentElement);)d=d.parentElement;l.style(d,"overscrollBehavior","contain")}else l.style(c.target,"touchAction","none")})}),t.addEventListener(e,"touchmove",l=>{if(Wc(l.target)){if(P$e(l.target))return;if(s(l.target)){let c=l.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&l.preventDefault()}else l.preventDefault()}},{passive:!1}),t.add(()=>{var l;let c=(l=window.scrollY)!=null?l:window.pageYOffset;i!==c&&window.scrollTo(0,i),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function h6e(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function x7(e){let t={};for(let a of e)Object.assign(t,a(t));return t}let ru=u6e(()=>new Map,{PUSH(e,t){var a;let s=(a=this.get(e))!=null?a:{doc:e,count:0,d:ec(),meta:new Set,computedMeta:{}};return s.count++,s.meta.add(t),s.computedMeta=x7(s.meta),this.set(e,s),this},POP(e,t){let a=this.get(e);return a&&(a.count--,a.meta.delete(t),a.computedMeta=x7(a.meta)),this},SCROLL_PREVENT(e){let t={doc:e.doc,d:e.d,meta(){return e.computedMeta}},a=[f6e(),m6e(),h6e()];a.forEach(({before:s})=>s?.(t)),a.forEach(({after:s})=>s?.(t))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});ru.subscribe(()=>{let e=ru.getSnapshot(),t=new Map;for(let[a]of e)t.set(a,a.documentElement.style.overflow);for(let a of e.values()){let s=t.get(a.doc)==="hidden",r=a.count!==0;(r&&!s||!r&&s)&&ru.dispatch(a.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",a),a.count===0&&ru.dispatch("TEARDOWN",a)}});function g6e(e,t,a=()=>({containers:[]})){let s=d6e(ru),r=t?s.get(t):void 0,i=r?r.count>0:!1;return or(()=>{if(!(!t||!e))return ru.dispatch("PUSH",t,a),()=>ru.dispatch("POP",t,a)},[e,t]),i}function p6e(e,t,a=()=>[document.body]){let s=t0(e,"scroll-lock");g6e(s,t,r=>{var i;return{containers:[...(i=r.containers)!=null?i:[],a]}})}function x6e(e=0){let[t,a]=h.useState(e),s=h.useCallback(c=>a(c),[]),r=h.useCallback(c=>a(d=>d|c),[]),i=h.useCallback(c=>(t&c)===c,[t]),o=h.useCallback(c=>a(d=>d&~c),[]),l=h.useCallback(c=>a(d=>d^c),[]);return{flags:t,setFlag:s,addFlag:r,hasFlag:i,removeFlag:o,toggleFlag:l}}var y6e={},y7,b7;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((y7=process==null?void 0:y6e)==null?void 0:y7.NODE_ENV)==="test"&&typeof((b7=Element?.prototype)==null?void 0:b7.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var b6e=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(b6e||{});function v6e(e){let t={};for(let a in e)e[a]===!0&&(t[`data-${a}`]="");return t}function w6e(e,t,a,s){let[r,i]=h.useState(a),{hasFlag:o,addFlag:l,removeFlag:c}=x6e(e&&r?3:0),d=h.useRef(!1),u=h.useRef(!1),f=Ij();return or(()=>{var p;if(e){if(a&&i(!0),!t){a&&l(3);return}return(p=s?.start)==null||p.call(s,a),N6e(t,{inFlight:d,prepare(){u.current?u.current=!1:u.current=d.current,d.current=!0,!u.current&&(a?(l(3),c(4)):(l(4),c(2)))},run(){u.current?a?(c(3),l(4)):(c(4),l(3)):a?c(1):l(1)},done(){var x;u.current&&S6e(t)||(d.current=!1,c(7),a||i(!1),(x=s?.end)==null||x.call(s,a))}})}},[e,a,t,f]),e?[r,{closed:o(1),enter:o(2),leave:o(4),transition:o(2)||o(4)}]:[a,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function N6e(e,{prepare:t,run:a,done:s,inFlight:r}){let i=ec();return C6e(e,{prepare:t,inFlight:r}),i.nextFrame(()=>{a(),i.requestAnimationFrame(()=>{i.add(j6e(e,s))})}),i.dispose}function j6e(e,t){var a,s;let r=ec();if(!e)return r.dispose;let i=!1;r.add(()=>{i=!0});let o=(s=(a=e.getAnimations)==null?void 0:a.call(e).filter(l=>l instanceof CSSTransition))!=null?s:[];return o.length===0?(t(),r.dispose):(Promise.allSettled(o.map(l=>l.finished)).then(()=>{i||t()}),r.dispose)}function C6e(e,{inFlight:t,prepare:a}){if(t!=null&&t.current){a();return}let s=e.style.transition;e.style.transition="none",a(),e.offsetHeight,e.style.transition=s}function S6e(e){var t,a;return((a=(t=e.getAnimations)==null?void 0:t.call(e))!=null?a:[]).some(s=>s instanceof CSSTransition&&s.playState!=="finished")}function pD(e,t){let a=h.useRef([]),s=Bn(e);h.useEffect(()=>{let r=[...a.current];for(let[i,o]of t.entries())if(a.current[i]!==o){let l=s(t,r);return a.current=t,l}},[s,...t])}let $j=h.createContext(null);$j.displayName="OpenClosedContext";var Ii=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Ii||{});function Rj(){return h.useContext($j)}function _6e({value:e,children:t}){return pt.createElement($j.Provider,{value:e},t)}function A6e({children:e}){return pt.createElement($j.Provider,{value:null},e)}function T6e(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let zc=[];T6e(()=>{function e(t){if(!Wc(t.target)||t.target===document.body||zc[0]===t.target)return;let a=t.target;a=a.closest(uw),zc.unshift(a??t.target),zc=zc.filter(s=>s!=null&&s.isConnected),zc.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function lZ(e){let t=Bn(e),a=h.useRef(!1);h.useEffect(()=>(a.current=!1,()=>{a.current=!0,Mj(()=>{a.current&&t()})}),[t])}let cZ=h.createContext(!1);function E6e(){return h.useContext(cZ)}function v7(e){return pt.createElement(cZ.Provider,{value:e.force},e.children)}function k6e(e){let t=E6e(),a=h.useContext(uZ),[s,r]=h.useState(()=>{var i;if(!t&&a!==null)return(i=a.current)!=null?i:null;if(So.isServer)return null;let o=e?.getElementById("headlessui-portal-root");if(o)return o;if(e===null)return null;let l=e.createElement("div");return l.setAttribute("id","headlessui-portal-root"),e.body.appendChild(l)});return h.useEffect(()=>{s!==null&&(e!=null&&e.body.contains(s)||e==null||e.body.appendChild(s))},[s,e]),h.useEffect(()=>{t||a!==null&&r(a.current)},[a,r,t]),s}let dZ=h.Fragment,L6e=gr(function(e,t){let{ownerDocument:a=null,...s}=e,r=h.useRef(null),i=Ro(D$e(p=>{r.current=p}),t),o=gD(r.current),l=a??o,c=k6e(l),d=h.useContext(xk),u=Ij(),f=wi();return lZ(()=>{var p;c&&c.childNodes.length<=0&&((p=c.parentElement)==null||p.removeChild(c))}),c?Mi.createPortal(pt.createElement("div",{"data-headlessui-portal":"",ref:p=>{u.dispose(),d&&p&&u.add(d.register(p))}},f({ourProps:{ref:i},theirProps:s,slot:{},defaultTag:dZ,name:"Portal"})),c):null});function P6e(e,t){let a=Ro(t),{enabled:s=!0,ownerDocument:r,...i}=e,o=wi();return s?pt.createElement(L6e,{...i,ownerDocument:r,ref:a}):o({ourProps:{ref:a},theirProps:i,slot:{},defaultTag:dZ,name:"Portal"})}let D6e=h.Fragment,uZ=h.createContext(null);function O6e(e,t){let{target:a,...s}=e,r={ref:Ro(t)},i=wi();return pt.createElement(uZ.Provider,{value:a},i({ourProps:r,theirProps:s,defaultTag:D6e,name:"Popover.Group"}))}let xk=h.createContext(null);function M6e(){let e=h.useContext(xk),t=h.useRef([]),a=Bn(i=>(t.current.push(i),e&&e.register(i),()=>s(i))),s=Bn(i=>{let o=t.current.indexOf(i);o!==-1&&t.current.splice(o,1),e&&e.unregister(i)}),r=h.useMemo(()=>({register:a,unregister:s,portals:t}),[a,s,t]);return[t,h.useMemo(()=>function({children:i}){return pt.createElement(xk.Provider,{value:r},i)},[r])]}let I6e=gr(P6e),mZ=gr(O6e),$6e=Object.assign(I6e,{Group:mZ});function R6e(e,t=typeof document<"u"?document.defaultView:null,a){let s=t0(e,"escape");oZ(t,"keydown",r=>{s&&(r.defaultPrevented||r.key===XX.Escape&&a(r))})}function z6e(){var e;let[t]=h.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[a,s]=h.useState((e=t?.matches)!=null?e:!1);return or(()=>{if(!t)return;function r(i){s(i.matches)}return t.addEventListener("change",r),()=>t.removeEventListener("change",r)},[t]),a}function U6e({defaultContainers:e=[],portals:t,mainTreeNode:a}={}){let s=Bn(()=>{var r,i;let o=Jx(a),l=[];for(let c of e)c!==null&&(Xc(c)?l.push(c):"current"in c&&Xc(c.current)&&l.push(c.current));if(t!=null&&t.current)for(let c of t.current)l.push(c);for(let c of(r=o?.querySelectorAll("html > *, body > *"))!=null?r:[])c!==document.body&&c!==document.head&&Xc(c)&&c.id!=="headlessui-portal-root"&&(a&&(c.contains(a)||c.contains((i=a?.getRootNode())==null?void 0:i.host))||l.some(d=>c.contains(d))||l.push(c));return l});return{resolveContainers:s,contains:Bn(r=>s().some(i=>i.contains(r)))}}let fZ=h.createContext(null);function w7({children:e,node:t}){let[a,s]=h.useState(null),r=hZ(t??a);return pt.createElement(fZ.Provider,{value:r},e,r===null&&pt.createElement(hk,{features:dw.Hidden,ref:i=>{var o,l;if(i){for(let c of(l=(o=Jx(i))==null?void 0:o.querySelectorAll("html > *, body > *"))!=null?l:[])if(c!==document.body&&c!==document.head&&Xc(c)&&c!=null&&c.contains(i)){s(c);break}}}}))}function hZ(e=null){var t;return(t=h.useContext(fZ))!=null?t:e}function F6e(){let e=typeof document>"u";return"useSyncExternalStore"in pu?(t=>t.useSyncExternalStore)(pu)(()=>()=>{},()=>!1,()=>!e):!1}function zj(){let e=F6e(),[t,a]=h.useState(So.isHandoffComplete);return t&&So.isHandoffComplete===!1&&a(!1),h.useEffect(()=>{t!==!0&&a(!0)},[t]),h.useEffect(()=>So.handoff(),[]),e?!1:t}function xD(){let e=h.useRef(!1);return or(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var Ig=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Ig||{});function B6e(){let e=h.useRef(0);return iZ(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function gZ(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let a of e.current)Xc(a.current)&&t.add(a.current);return t}let H6e="div";var Kd=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(Kd||{});function G6e(e,t){let a=h.useRef(null),s=Ro(a,t),{initialFocus:r,initialFocusFallback:i,containers:o,features:l=15,...c}=e;zj()||(l=0);let d=gD(a.current);Y6e(l,{ownerDocument:d});let u=Q6e(l,{ownerDocument:d,container:a,initialFocus:r,initialFocusFallback:i});K6e(l,{ownerDocument:d,container:a,containers:o,previousActiveElement:u});let f=B6e(),p=Bn(w=>{if(!Mu(a.current))return;let S=a.current;(E=>E())(()=>{zl(f.current,{[Ig.Forwards]:()=>{Qg(S,xl.First,{skipElements:[w.relatedTarget,i]})},[Ig.Backwards]:()=>{Qg(S,xl.Last,{skipElements:[w.relatedTarget,i]})}})})}),x=t0(!!(l&2),"focus-trap#tab-lock"),v=Ij(),N=h.useRef(!1),b={ref:s,onKeyDown(w){w.key=="Tab"&&(N.current=!0,v.requestAnimationFrame(()=>{N.current=!1}))},onBlur(w){if(!(l&4))return;let S=gZ(o);Mu(a.current)&&S.add(a.current);let E=w.relatedTarget;Wc(E)&&E.dataset.headlessuiFocusGuard!=="true"&&(pZ(S,E)||(N.current?Qg(a.current,zl(f.current,{[Ig.Forwards]:()=>xl.Next,[Ig.Backwards]:()=>xl.Previous})|xl.WrapAround,{relativeTo:w.target}):Wc(w.target)&&Cl(w.target)))}},C=wi();return pt.createElement(pt.Fragment,null,x&&pt.createElement(hk,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:dw.Focusable}),C({ourProps:b,theirProps:c,defaultTag:H6e,name:"FocusTrap"}),x&&pt.createElement(hk,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:dw.Focusable}))}let W6e=gr(G6e),q6e=Object.assign(W6e,{features:Kd});function V6e(e=!0){let t=h.useRef(zc.slice());return pD(([a],[s])=>{s===!0&&a===!1&&Mj(()=>{t.current.splice(0)}),s===!1&&a===!0&&(t.current=zc.slice())},[e,zc,t]),Bn(()=>{var a;return(a=t.current.find(s=>s!=null&&s.isConnected))!=null?a:null})}function Y6e(e,{ownerDocument:t}){let a=!!(e&8),s=V6e(a);pD(()=>{a||b$e(t?.body)&&Cl(s())},[a]),lZ(()=>{a&&Cl(s())})}function Q6e(e,{ownerDocument:t,container:a,initialFocus:s,initialFocusFallback:r}){let i=h.useRef(null),o=t0(!!(e&1),"focus-trap#initial-focus"),l=xD();return pD(()=>{if(e===0)return;if(!o){r!=null&&r.current&&Cl(r.current);return}let c=a.current;c&&Mj(()=>{if(!l.current)return;let d=t?.activeElement;if(s!=null&&s.current){if(s?.current===d){i.current=d;return}}else if(c.contains(d)){i.current=d;return}if(s!=null&&s.current)Cl(s.current);else{if(e&16){if(Qg(c,xl.First|xl.AutoFocus)!==pk.Error)return}else if(Qg(c,xl.First)!==pk.Error)return;if(r!=null&&r.current&&(Cl(r.current),t?.activeElement===r.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}i.current=t?.activeElement})},[r,o,e]),i}function K6e(e,{ownerDocument:t,container:a,containers:s,previousActiveElement:r}){let i=xD(),o=!!(e&4);oZ(t?.defaultView,"focus",l=>{if(!o||!i.current)return;let c=gZ(s);Mu(a.current)&&c.add(a.current);let d=r.current;if(!d)return;let u=l.target;Mu(u)?pZ(c,u)?(r.current=u,Cl(u)):(l.preventDefault(),l.stopPropagation(),Cl(d)):Cl(r.current)},!0)}function pZ(e,t){for(let a of e)if(a.contains(t))return!0;return!1}function xZ(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||!Vg((t=e.as)!=null?t:bZ)||pt.Children.count(e.children)===1}let Uj=h.createContext(null);Uj.displayName="TransitionContext";var X6e=(e=>(e.Visible="visible",e.Hidden="hidden",e))(X6e||{});function Z6e(){let e=h.useContext(Uj);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function J6e(){let e=h.useContext(Fj);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let Fj=h.createContext(null);Fj.displayName="NestingContext";function Bj(e){return"children"in e?Bj(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function yZ(e,t){let a=Yu(e),s=h.useRef([]),r=xD(),i=Ij(),o=Bn((x,v=Gc.Hidden)=>{let N=s.current.findIndex(({el:b})=>b===x);N!==-1&&(zl(v,{[Gc.Unmount](){s.current.splice(N,1)},[Gc.Hidden](){s.current[N].state="hidden"}}),i.microTask(()=>{var b;!Bj(s)&&r.current&&((b=a.current)==null||b.call(a))}))}),l=Bn(x=>{let v=s.current.find(({el:N})=>N===x);return v?v.state!=="visible"&&(v.state="visible"):s.current.push({el:x,state:"visible"}),()=>o(x,Gc.Unmount)}),c=h.useRef([]),d=h.useRef(Promise.resolve()),u=h.useRef({enter:[],leave:[]}),f=Bn((x,v,N)=>{c.current.splice(0),t&&(t.chains.current[v]=t.chains.current[v].filter(([b])=>b!==x)),t?.chains.current[v].push([x,new Promise(b=>{c.current.push(b)})]),t?.chains.current[v].push([x,new Promise(b=>{Promise.all(u.current[v].map(([C,w])=>w)).then(()=>b())})]),v==="enter"?d.current=d.current.then(()=>t?.wait.current).then(()=>N(v)):N(v)}),p=Bn((x,v,N)=>{Promise.all(u.current[v].splice(0).map(([b,C])=>C)).then(()=>{var b;(b=c.current.shift())==null||b()}).then(()=>N(v))});return h.useMemo(()=>({children:s,register:l,unregister:o,onStart:f,onStop:p,wait:d,chains:u}),[l,o,s,f,p,u,d])}let bZ=h.Fragment,vZ=cw.RenderStrategy;function eRe(e,t){var a,s;let{transition:r=!0,beforeEnter:i,afterEnter:o,beforeLeave:l,afterLeave:c,enter:d,enterFrom:u,enterTo:f,entered:p,leave:x,leaveFrom:v,leaveTo:N,...b}=e,[C,w]=h.useState(null),S=h.useRef(null),E=xZ(e),k=Ro(...E?[S,t,w]:t===null?[]:[t]),A=(a=b.unmount)==null||a?Gc.Unmount:Gc.Hidden,{show:T,appear:_,initial:I}=Z6e(),[R,U]=h.useState(T?"visible":"hidden"),D=J6e(),{register:M,unregister:W}=D;or(()=>M(S),[M,S]),or(()=>{if(A===Gc.Hidden&&S.current){if(T&&R!=="visible"){U("visible");return}return zl(R,{hidden:()=>W(S),visible:()=>M(S)})}},[R,S,M,W,T,A]);let X=zj();or(()=>{if(E&&X&&R==="visible"&&S.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[S,R,X,E]);let z=I&&!_,Q=_&&T&&I,de=h.useRef(!1),Y=yZ(()=>{de.current||(U("hidden"),W(S))},D),se=Bn(De=>{de.current=!0;let Me=De?"enter":"leave";Y.onStart(S,Me,ve=>{ve==="enter"?i?.():ve==="leave"&&l?.()})}),J=Bn(De=>{let Me=De?"enter":"leave";de.current=!1,Y.onStop(S,Me,ve=>{ve==="enter"?o?.():ve==="leave"&&c?.()}),Me==="leave"&&!Bj(Y)&&(U("hidden"),W(S))});h.useEffect(()=>{E&&r||(se(T),J(T))},[T,E,r]);let F=!(!r||!E||!X||z),[,Ne]=w6e(F,C,T,{start:se,end:J}),re=qd({ref:k,className:((s=fk(b.className,Q&&d,Q&&u,Ne.enter&&d,Ne.enter&&Ne.closed&&u,Ne.enter&&!Ne.closed&&f,Ne.leave&&x,Ne.leave&&!Ne.closed&&v,Ne.leave&&Ne.closed&&N,!Ne.transition&&T&&p))==null?void 0:s.trim())||void 0,...v6e(Ne)}),he=0;R==="visible"&&(he|=Ii.Open),R==="hidden"&&(he|=Ii.Closed),T&&R==="hidden"&&(he|=Ii.Opening),!T&&R==="visible"&&(he|=Ii.Closing);let je=wi();return pt.createElement(Fj.Provider,{value:Y},pt.createElement(_6e,{value:he},je({ourProps:re,theirProps:b,defaultTag:bZ,features:vZ,visible:R==="visible",name:"Transition.Child"})))}function tRe(e,t){let{show:a,appear:s=!1,unmount:r=!0,...i}=e,o=h.useRef(null),l=xZ(e),c=Ro(...l?[o,t]:t===null?[]:[t]);zj();let d=Rj();if(a===void 0&&d!==null&&(a=(d&Ii.Open)===Ii.Open),a===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[u,f]=h.useState(a?"visible":"hidden"),p=yZ(()=>{a||f("hidden")}),[x,v]=h.useState(!0),N=h.useRef([a]);or(()=>{x!==!1&&N.current[N.current.length-1]!==a&&(N.current.push(a),v(!1))},[N,a]);let b=h.useMemo(()=>({show:a,appear:s,initial:x}),[a,s,x]);or(()=>{a?f("visible"):!Bj(p)&&o.current!==null&&f("hidden")},[a,p]);let C={unmount:r},w=Bn(()=>{var k;x&&v(!1),(k=e.beforeEnter)==null||k.call(e)}),S=Bn(()=>{var k;x&&v(!1),(k=e.beforeLeave)==null||k.call(e)}),E=wi();return pt.createElement(Fj.Provider,{value:p},pt.createElement(Uj.Provider,{value:b},E({ourProps:{...C,as:h.Fragment,children:pt.createElement(wZ,{ref:c,...C,...i,beforeEnter:w,beforeLeave:S})},theirProps:{},defaultTag:h.Fragment,features:vZ,visible:u==="visible",name:"Transition"})))}function nRe(e,t){let a=h.useContext(Uj)!==null,s=Rj()!==null;return pt.createElement(pt.Fragment,null,!a&&s?pt.createElement(yk,{ref:t,...e}):pt.createElement(wZ,{ref:t,...e}))}let yk=gr(tRe),wZ=gr(eRe),yD=gr(nRe),Wb=Object.assign(yk,{Child:yD,Root:yk});var aRe=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(aRe||{}),sRe=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(sRe||{});let rRe={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},bD=h.createContext(null);bD.displayName="DialogContext";function Hj(e){let t=h.useContext(bD);if(t===null){let a=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,Hj),a}return t}function iRe(e,t){return zl(t.type,rRe,e,t)}let N7=gr(function(e,t){let a=h.useId(),{id:s=`headlessui-dialog-${a}`,open:r,onClose:i,initialFocus:o,role:l="dialog",autoFocus:c=!0,__demoMode:d=!1,unmount:u=!1,...f}=e,p=h.useRef(!1);l=(function(){return l==="dialog"||l==="alertdialog"?l:(p.current||(p.current=!0,console.warn(`Invalid role [${l}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")})();let x=Rj();r===void 0&&x!==null&&(r=(x&Ii.Open)===Ii.Open);let v=h.useRef(null),N=Ro(v,t),b=gD(v.current),C=r?0:1,[w,S]=h.useReducer(iRe,{titleId:null,descriptionId:null,panelRef:h.createRef()}),E=Bn(()=>i(!1)),k=Bn(Ne=>S({type:0,id:Ne})),A=zj()?C===0:!1,[T,_]=M6e(),I={get current(){var Ne;return(Ne=w.panelRef.current)!=null?Ne:v.current}},R=hZ(),{resolveContainers:U}=U6e({mainTreeNode:R,portals:T,defaultContainers:[I]}),D=x!==null?(x&Ii.Closing)===Ii.Closing:!1;X$e(d||D?!1:A,{allowed:Bn(()=>{var Ne,re;return[(re=(Ne=v.current)==null?void 0:Ne.closest("[data-headlessui-portal]"))!=null?re:null]}),disallowed:Bn(()=>{var Ne;return[(Ne=R?.closest("body > *:not(#headlessui-portal-root)"))!=null?Ne:null]})});let M=nZ.get(null);or(()=>{if(A)return M.actions.push(s),()=>M.actions.pop(s)},[M,s,A]);let W=aZ(M,h.useCallback(Ne=>M.selectors.isTop(Ne,s),[M,s]));c6e(W,U,Ne=>{Ne.preventDefault(),E()}),R6e(W,b?.defaultView,Ne=>{Ne.preventDefault(),Ne.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),E()}),p6e(d||D?!1:A,b,U),Z$e(A,v,E);let[X,z]=O$e(),Q=h.useMemo(()=>[{dialogState:C,close:E,setTitleId:k,unmount:u},w],[C,E,k,u,w]),de=e0({open:C===0}),Y={ref:N,id:s,role:l,tabIndex:-1,"aria-modal":d?void 0:C===0?!0:void 0,"aria-labelledby":w.titleId,"aria-describedby":X,unmount:u},se=!z6e(),J=Kd.None;A&&!d&&(J|=Kd.RestoreFocus,J|=Kd.TabLock,c&&(J|=Kd.AutoFocus),se&&(J|=Kd.InitialFocus));let F=wi();return pt.createElement(A6e,null,pt.createElement(v7,{force:!0},pt.createElement($6e,null,pt.createElement(bD.Provider,{value:Q},pt.createElement(mZ,{target:v},pt.createElement(v7,{force:!1},pt.createElement(z,{slot:de},pt.createElement(_,null,pt.createElement(q6e,{initialFocus:o,initialFocusFallback:v,containers:U,features:J},pt.createElement(U$e,{value:E},F({ourProps:Y,theirProps:f,slot:de,defaultTag:oRe,features:lRe,visible:C===0,name:"Dialog"})))))))))))}),oRe="div",lRe=cw.RenderStrategy|cw.Static;function cRe(e,t){let{transition:a=!1,open:s,...r}=e,i=Rj(),o=e.hasOwnProperty("open")||i!==null,l=e.hasOwnProperty("onClose");if(!o&&!l)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!o)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!l)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!i&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(s!==void 0||a)&&!r.static?pt.createElement(w7,null,pt.createElement(Wb,{show:s,transition:a,unmount:r.unmount},pt.createElement(N7,{ref:t,...r}))):pt.createElement(w7,null,pt.createElement(N7,{ref:t,open:s,...r}))}let dRe="div";function uRe(e,t){let a=h.useId(),{id:s=`headlessui-dialog-panel-${a}`,transition:r=!1,...i}=e,[{dialogState:o,unmount:l},c]=Hj("Dialog.Panel"),d=Ro(t,c.panelRef),u=e0({open:o===0}),f=Bn(b=>{b.stopPropagation()}),p={ref:d,id:s,onClick:f},x=r?yD:h.Fragment,v=r?{unmount:l}:{},N=wi();return pt.createElement(x,{...v},N({ourProps:p,theirProps:i,slot:u,defaultTag:dRe,name:"Dialog.Panel"}))}let mRe="div";function fRe(e,t){let{transition:a=!1,...s}=e,[{dialogState:r,unmount:i}]=Hj("Dialog.Backdrop"),o=e0({open:r===0}),l={ref:t,"aria-hidden":!0},c=a?yD:h.Fragment,d=a?{unmount:i}:{},u=wi();return pt.createElement(c,{...d},u({ourProps:l,theirProps:s,slot:o,defaultTag:mRe,name:"Dialog.Backdrop"}))}let hRe="h2";function gRe(e,t){let a=h.useId(),{id:s=`headlessui-dialog-title-${a}`,...r}=e,[{dialogState:i,setTitleId:o}]=Hj("Dialog.Title"),l=Ro(t);h.useEffect(()=>(o(s),()=>o(null)),[s,o]);let c=e0({open:i===0}),d={ref:l,id:s};return wi()({ourProps:d,theirProps:r,slot:c,defaultTag:hRe,name:"Dialog.Title"})}let pRe=gr(cRe),xRe=gr(uRe);gr(fRe);let yRe=gr(gRe),j7=Object.assign(pRe,{Panel:xRe,Title:yRe,Description:R$e});function n0({isOpen:e,onClose:t,onSave:a,onEdit:s,setFormData:r,formData:i,isEditing:o=!1,viewMode:l=!1,users:c=[],currentUser:d,onDelete:u}){const[f,p]=h.useState([]),[x,v]=h.useState([]),[N,b]=h.useState({}),C=T=>{if(!T)return"";const _=String(T).split("-");return _.length===3?`${_[0]}-${_[2]}`:String(T)},w=T=>{const{name:_,value:I}=T.target;_==="subject"&&I.trim()&&b(R=>({...R,subject:!1})),r(R=>{const U={...R,[_]:I};return _==="relatedType1"&&(U.relatedTo1="",I==="Lead"?(U.relatedType2=null,U.relatedTo2=null,v([])):I==="Account"&&(U.relatedType2="Contact")),_==="relatedType2"&&(U.relatedTo2=""),U})};h.useEffect(()=>{if(!e)return;(async()=>{try{p([]);let _;i.relatedType1==="Lead"?_=await ie.get("/leads/admin/getLeads"):i.relatedType1==="Account"&&(_=await ie.get("/accounts/admin/fetch-all"));let I=[];if(_&&Array.isArray(_.data)&&(I=_.data),o&&i.relatedTo1)try{let R;i.relatedType1==="Lead"?R=await ie.get(`/leads/get/${i.relatedTo1}`):i.relatedType1==="Account"&&(R=await ie.get(`/accounts/get/${i.relatedTo1}`)),R&&R.data&&(I.some(D=>String(D.id)===String(i.relatedTo1))||(I=[R.data,...I]))}catch(R){console.error("Error fetching specific related item:",R)}p(I)}catch(_){console.error("Error fetching related 1 data:",_),p([])}})()},[i.relatedType1,e,o,i.relatedTo1]),h.useEffect(()=>{if(!e||l)return;(async()=>{try{if(v([]),i.relatedType1==="Account"&&i.relatedTo1){let _;i.relatedType2==="Contact"?_=await ie.get(`/contacts/from-acc/${i.relatedTo1}`):i.relatedType2==="Deal"?_=await ie.get(`/deals/from-acc/${i.relatedTo1}`):i.relatedType2==="Quote"&&(_=await ie.get(`/quotes/from-acc/${i.relatedTo1}`));let I=[];if(_&&Array.isArray(_.data)&&(I=_.data),o&&i.relatedTo2)try{let R;i.relatedType2==="Contact"?R=await ie.get(`/contacts/get/${i.relatedTo2}`):i.relatedType2==="Deal"?R=await ie.get(`/deals/get/${i.relatedTo2}`):i.relatedType2==="Quote"&&(R=await ie.get(`/quotes/get/${i.relatedTo2}`)),R&&R.data&&(I.some(D=>String(D.id)===String(i.relatedTo2))||(I=[R.data,...I]))}catch(R){console.error("Error fetching specific related item:",R)}v(I)}}catch(_){console.error("Error fetching related 2 data:",_),v([])}})()},[i.relatedType1,i.relatedTo1,i.relatedType2,i.relatedTo2,e,l,o]);const[S,E]=h.useState(!1);h.useEffect(()=>{e&&(E(!1),b({}))},[e]);const k=T=>{T.preventDefault(),E(!0);const _={};i.subject?.trim()||(_.subject=!0,q.error("Title is required")),b(_),i.relatedTo1||(_.relatedTo1=!0,q.error(`Please select a ${i.relatedType1||"Lead/Account"}.`)),i.assignedTo||(_.assignedTo=!0,q.error("Assigned To is required.")),!(Object.keys(_).length>0)&&a?.(i)},A=l?"Task Details":o?"Edit Task":"Create Task";return n.jsx(Wb,{appear:!0,show:e,as:h.Fragment,children:n.jsxs(j7,{as:"div",className:"relative z-50",onClose:t,children:[n.jsx(Wb.Child,{as:h.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:n.jsx("div",{className:"fixed inset-0 bg-black/40"})}),n.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 overflow-y-auto",children:n.jsx("div",{className:"flex min-h-full items-center justify-center text-center",children:n.jsx(Wb.Child,{as:h.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:n.jsx(j7.Panel,{className:"w-full max-w-full sm:max-w-3xl text-left align-middle transform transition-all",children:n.jsxs("div",{className:"bg-white w-full min-w-sm md:min-w-lg rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] flex flex-col hide-scrollbar",children:[n.jsx("button",{onClick:()=>{t(),E(!1),b({})},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Wn,{size:25})}),n.jsx("h3",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:A}),l&&n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",onClick:t,children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[90vh] overflow-y-auto hide-scrollbar font-manrope relative",onClick:T=>T.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-4 rounded-t-xl",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Tasks"}),n.jsx("button",{onClick:()=>{t(),E(!1)},className:"text-gray-500 hover:text-white transition cursor-pointer",children:n.jsx(Wn,{size:25})})]}),n.jsx("div",{className:"p-6 lg:p-4",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:i.subject||"No Title"})}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 cursor-pointer",onClick:()=>{r&&r(i),typeof s=="function"&&s()},children:"Edit"}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400 cursor-pointer",onClick:()=>u(i),children:[n.jsx(Ut,{className:"mr-2"}),"Delete"]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white overflow-x-auto",children:n.jsx("button",{className:"flex-1 min-w-[90px] px-4 py-2 lg:text-lg text-sm font-medium text-center text-white",children:"Overview"})}),n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 lg:p-5 border border-gray-200 text-sm text-gray-700",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Title:"}),n.jsx("p",{children:i.subject||""})]}),i.relatedType1Text&&i.relatedTo1Text&&n.jsxs("div",{children:[n.jsxs("p",{className:"font-semibold",children:[i.relatedType1Text,":"]}),n.jsx("p",{children:i.relatedTo1Text})]}),i.relatedType2Text&&i.relatedTo2Text&&n.jsxs("div",{children:[n.jsxs("p",{className:"font-semibold",children:[i.relatedType2,":"]}),n.jsx("p",{children:i.relatedTo2Text})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Priority:"}),n.jsx("p",{children:i.priority||""})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:i.status||""})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Due Date:"}),n.jsx("p",{children:i.dueDate||""})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("p",{className:"font-semibold",children:"Description:"}),n.jsx("p",{className:"whitespace-pre-wrap",children:i.description||""})]})]})})]})]})}),!l&&n.jsxs("form",{onSubmit:k,className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm flex-1",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Title ",n.jsx("span",{className:"text-red-500 font-semibold",children:"*"})]}),n.jsx("input",{type:"text",name:"subject",value:i.subject,onChange:w,disabled:l,placeholder:"Enter task title",className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
                            ${N.subject?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
                            ${l?"bg-gray-50 cursor-not-allowed":""}
                          `})]}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("div",{className:"relative w-25",children:[n.jsxs("select",{name:"relatedType1",onChange:w,value:i.relatedType1,disabled:l,className:"w-full pr-6 rounded-md text-sm",children:[n.jsx("option",{value:"Lead",children:"Lead"}),n.jsx("option",{value:"Account",children:"Account"})]}),n.jsx("span",{className:"absolute left-10 md:pl-6 pl-6 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),n.jsx(U2,{disabled:!1,items:Array.isArray(f)?f:[],value:i.relatedTo1??"",placeholder:`Search ${i.relatedType1||"here"}...`,getLabel:T=>i.relatedType1==="Lead"?T.title:T.name??"",onChange:T=>r(_=>({..._,relatedTo1:T})),required:!0,isSubmitted:S})]}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("select",{name:"relatedType2",onChange:w,value:i.relatedType2??"Contact",className:"w-23 rounded-md text-sm focus:ring-2 focus:ring-blue-400 outline-none mb-2 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:l||i.relatedType1==="Lead",children:[n.jsx("option",{value:"Contact",children:"Contact"}),n.jsx("option",{value:"Deal",children:"Deal"}),n.jsx("option",{value:"Quote",children:"Quote"})]}),n.jsx(U2,{disabled:i.relatedType1==="Lead",items:Array.isArray(x)?x:[],value:i.relatedTo2??"",placeholder:i.relatedType1==="Lead"?"":Array.isArray(x)&&x.length>0?`Search ${i.relatedType2||"Contact"}...`:`No ${i.relatedType2||""} data found`,getLabel:T=>i.relatedType2==="Contact"?`${T.first_name??""} ${T.last_name??""}`.trim():i.relatedType2==="Quote"?C(T.quote_id)??"":T.name??"",onChange:T=>r(_=>({..._,relatedTo2:T}))})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Description"}),n.jsx("textarea",{name:"description",value:i.description,onChange:w,disabled:l,placeholder:"Enter task description",rows:3,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${l?"bg-gray-50 cursor-not-allowed":""}`})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Priority"}),n.jsxs("select",{name:"priority",value:i.priority,onChange:w,disabled:l,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${l?"bg-gray-50 cursor-not-allowed":""}`,children:[n.jsx("option",{value:"Low",children:"Low"}),n.jsx("option",{value:"Normal",children:"Normal"}),n.jsx("option",{value:"High",children:"High"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Due Date"}),n.jsx("input",{type:"datetime-local",name:"dueDate",value:i.dueDate,onChange:w,disabled:l,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${l?"bg-gray-50 cursor-not-allowed":""}`})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-500 font-semibold",children:"*"})]}),n.jsx(U2,{items:Array.isArray(c)?c:[],value:i.assignedTo??"",placeholder:"Search an account...",getLabel:T=>`${T.first_name} ${T.last_name}`,onChange:T=>r(_=>({..._,assignedTo:T})),disabled:l||d?.role==="Sales",required:!0,isSubmitted:S})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),n.jsxs("select",{name:"status",value:i.status,onChange:w,disabled:l,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${l?"bg-gray-50 cursor-not-allowed":""}`,children:[n.jsx("option",{value:"Not started",children:"Not started"}),n.jsx("option",{value:"In progress",children:"In Progress"}),n.jsx("option",{value:"Deferred",children:"Deferred"}),n.jsx("option",{value:"Completed",children:"Completed"})]})]}),!l&&n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{t(),E(!1),b({})},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition",children:o?"Update Task":"Create Task"})]})]})]})})})})})]})})}function U2({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,required:l=!1,isSubmitted:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),v=e.find(w=>String(w.id)===String(t)),N=v?s(v):"",b=l&&c&&!t,C=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(E=>(s(E)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${b?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:C.length>0?C.map(w=>{const S=String(w.id),E=s(w),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:E||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const C7=["Not started","In progress","Deferred","Completed"],S7={NOT_STARTED:"Not started","NOT STARTED":"Not started","TO DO":"Not started",IN_PROGRESS:"In progress","IN PROGRESS":"In progress",COMPLETED:"Completed",DEFERRED:"Deferred","Not started":"Not started","In progress":"In progress",Completed:"Completed",Deferred:"Deferred","In Progress":"In progress","To Do":"Not started",Review:"Deferred"},NZ=e=>e&&(S7[e]||S7[String(e).toUpperCase()])||"Not started",bRe=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const a=t.getTimezoneOffset();return new Date(t.getTime()-a*60*1e3).toISOString().slice(0,16)},_7=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},vRe=e=>{const t=e.subject?.trim()??"",a=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),NZ(e.status);let r=null,i=null,o=null,l=null,c=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?o=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Quote"&&e.relatedTo2&&(c=Number(e.relatedTo2)));const d=e.assignedTo?Number(e.assignedTo):null,u=o||l||i||r,f=o?"Contact":l?"Deal":i?"Account":r?"Lead":c?"Quote":null;return{title:t,description:a,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:d,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:o,deal_id:l,quote_id:c,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:u,related_type:f}},wRe=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",a=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",o=W=>{if(!W)return"";const X=String(W).split("-");return X.length===3?`${X[0]}-${X[2]}`:String(W)},l=()=>e.lead?.id||e.lead_id,c=()=>e.account?.id||e.account_id,d=()=>e.contact?.id||e.contact_id,u=()=>e.deal?.id||e.deal_id,f=()=>e.quote?.id||e.quote_id,p=()=>e.task_assign_to?.id||e.assigned_to,x=()=>e.lead?.title||e.lead_id,v=()=>e.account?.name||e.account_id,N=()=>i||e.contact_id,b=()=>e.deal?.name||e.deal_id,C=()=>o(e.quote?.quote_id)||e.id;let w="Lead",S="",E="",k="",A="Lead",T="",_="",I="";const R=c(),U=v(),D=l(),M=x();if(R){w="Account",A="Account",T=U,S=String(R);const W=d(),X=u(),z=N(),Q=b(),de=f(),Y=C();W?(E="Contact",_="Contact",I=z,k=String(W)):X?(_="Deal",E="Deal",I=Q,k=String(X)):de&&(_="Quote",E="Quote",I=Y,k=String(de))}else D?(A="Lead",T=M,w="Lead",S=String(D)):e.related_type==="Account"&&(w="Account",S=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:NZ(e.status),dueDate:s,dateAssigned:r,assignedToId:p()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:a,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:A,relatedTo1Text:T,relatedType2Text:_,relatedTo2Text:I,subject:e.title,relatedType1:w,relatedTo1:S,relatedType2:E,relatedTo2:k}};function NRe(){h.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=Xt(),[a,s]=h.useState("board"),[r,i]=h.useState(!1),[o,l]=h.useState(null),[c,d]=h.useState(!1),[u,f]=h.useState([]),[p,x]=h.useState(!0),[v,N]=h.useState(""),[b,C]=h.useState("Filter by Status"),[w,S]=h.useState("Filter by Priority"),[E,k]=h.useState([]),[A,T]=h.useState(1),[_,I]=h.useState(10),[R,U]=h.useState(null),[D,M]=h.useState(!1),[W,X]=h.useState([]),z=bt(),Q=Qt(),[de,Y]=h.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""}),[se,J]=h.useState(null);h.useEffect(()=>{const B=Q.state?.openTaskModal,xe=Q.state?.initialTaskData,_e=Q.state?.taskID;B?(i(!0),xe&&Y(ce=>({...ce,...xe})),z(Q.pathname,{replace:!0,state:{}})):_e&&(J(_e),z(Q.pathname,{replace:!0,state:{}}))},[Q,z]),h.useEffect(()=>{if(se&&u.length>0&&!p){const B=u.find(xe=>xe.id===se);B?he(B,!0):q.error("Task not found."),J(null)}},[se,u,p]);const F=async()=>{try{const B=await ie.get("/users/all");k(Array.isArray(B.data)?B.data:[])}catch(B){console.error("Failed to fetch users:",B),q.error("Failed to fetch users.")}},Ne=async()=>{try{x(!0);const B=await ie.get("/tasks/all"),_e=(Array.isArray(B.data)?B.data:[]).map(wRe);_e.sort((ce,Ee)=>{const ae=ce.createdAt?new Date(ce.createdAt):0;return(Ee.createdAt?new Date(Ee.createdAt):0)-ae}),f(_e),a==="list"&&T(1)}catch(B){console.error("Failed to load tasks:",B),q.error("Failed to load tasks.")}finally{x(!1)}};h.useEffect(()=>{if(!t&&e){F(),Ne();const B=Jw(e.id),xe=new WebSocket(B);return xe.onopen=()=>{console.log(" Connected to task notifications")},xe.onmessage=_e=>{try{const ce=JSON.parse(_e.data);ce.type==="task_status_updated"&&(q.info(` ${ce.message}`,{position:"top-right",autoClose:4e3}),Ne())}catch(ce){console.error("Error parsing notification:",ce)}},xe.onerror=_e=>{console.error(" WebSocket error:",_e)},xe.onclose=()=>{console.log(" Disconnected from task notifications")},()=>{xe&&xe.readyState===WebSocket.OPEN&&xe.close()}}},[t,e]);const re=()=>{l(null),Y({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},he=(B=null,xe=!1)=>{l(B),d(xe),B?Y({id:B.id,subject:B.title||"",description:B.description||"",priority:B.priority||"Normal",status:B.status||"Not started",dueDate:bRe(B.dueDate),assignedTo:B.assignedToId?String(B.assignedToId):"",notes:B.notes||"",relatedType1Text:B.relatedType1Text||"",relatedTo1Text:B.relatedTo1Text||"",relatedType2Text:B.relatedType2Text||"",relatedTo2Text:B.relatedTo2Text||"",relatedType1:B.relatedType1||"",relatedTo1:B.relatedTo1||"",relatedType2:B.relatedType2||"",relatedTo2:B.relatedTo2||""}):re(),i(!0)},je=()=>{i(!1),l(null),d(!1),re()},De=async B=>{const xe=vRe(B);try{o&&!c?(await ie.put(`/tasks/${o.id}`,xe),q.success("Task updated successfully.")):(await ie.post("/tasks/create",xe),q.success("Task created successfully.")),i(!1),await Ne()}catch(_e){console.error("Failed to save task:",_e);const ce=_e.response?.data?.detail||"Failed to save task.";q.error(ce)}},Me=B=>{B&&U({title:"Delete Task",message:n.jsxs(n.Fragment,{children:["Are you sure you want to delete ",n.jsx("span",{className:"font-semibold",children:B.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:B.id}})},ve=()=>{if(ye.every(B=>W.includes(B.id)))X(W.filter(B=>!ye.map(xe=>xe.id).includes(B)));else{const B=ye.map(xe=>xe.id);X([...new Set([...W,...B])])}},Be=B=>{X(xe=>xe.includes(B)?xe.filter(_e=>_e!==B):[...xe,B])},ke=async()=>{W.length!==0&&U({title:"Delete Tasks",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:W.length})," selected tasks? This action cannot be undone."]}),confirmLabel:`Delete ${W.length} Task(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",task_ids:W}})},fe=async()=>{if(!R?.action){U(null);return}const{action:B}=R;M(!0);try{B.type==="delete"?(await ie.delete(`/tasks/${B.targetId}`),q.success("Task deleted successfully."),await Ne()):B.type==="bulk-delete"&&(await ie.delete("/tasks/admin/bulk-delete",{data:{task_ids:B.task_ids}}),q.success(`Successfully deleted ${B.task_ids.length} tasks`),X([]),await Ne())}catch(xe){console.error("Task action failed:",xe),q.error("Failed to delete task.")}finally{M(!1),U(null)}},ne=()=>{D||U(null)},Ae=h.useMemo(()=>{const B=v.trim().toLowerCase();return[...u].sort((_e,ce)=>{const Ee=_e.createdAt?new Date(_e.createdAt):0;return(ce.createdAt?new Date(ce.createdAt):0)-Ee}).filter(_e=>{const ce=B===""||_e.title?.toLowerCase().includes(B)||_e.description?.toLowerCase().includes(B)||_e.assignedToName?.toLowerCase().includes(B)||_e.createdBy?.toLowerCase().includes(B),Ee=b==="Filter by Status"||_e.status===b,ae=w==="Filter by Priority"||_e.priority===w;return ce&&Ee&&ae})},[u,v,b,w]);h.useEffect(()=>{T(1)},[v,b,w,a,_]),h.useEffect(()=>{if(a==="list"){const B=Ae.length===0?1:Math.ceil(Ae.length/_);A>B&&T(B)}},[Ae.length,A,a,_]);const ye=h.useMemo(()=>{if(a==="board")return Ae;const B=(A-1)*_;return Ae.slice(B,B+_)},[Ae,A,a,_]),Ie=h.useMemo(()=>{const B=new Date;return[{title:"To Do",value:u.filter(xe=>xe.status==="Not started").length,icon:zs,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:u.filter(xe=>xe.status==="In progress").length,icon:Ri,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:u.filter(xe=>xe.status==="Completed").length,icon:ba,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:u.filter(xe=>xe.dueDate&&new Date(xe.dueDate)<B&&xe.status!=="Completed").length,icon:zf,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:u.filter(xe=>xe.priority==="High").length,icon:Bl,color:"text-orange-600",bgColor:"bg-orange-100"}]},[u]),Ve=B=>B.dueDate&&new Date(B.dueDate)<new Date&&B.status!=="Completed",Te=B=>{switch(B.status){case"Not started":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Deferred":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},Fe=B=>{switch(B){case"Not started":return"bg-blue-100 text-blue-700";case"In progress":return"bg-purple-100 text-purple-700";case"Deferred":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},Ye=B=>{switch(B){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&n.jsx(zt,{message:"Loading tasks..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(Ri,{className:"text-blue-600"})," Tasks Board"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:()=>he(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[n.jsx(un,{})," Create Task"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ie.map(B=>n.jsx(jRe,{...B},B.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Ht,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search tasks",value:v,onChange:B=>N(B.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{value:b,onChange:B=>C(B.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Status"}),C7.map(B=>n.jsx("option",{children:B},B))]}),n.jsxs("select",{value:w,onChange:B=>S(B.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Priority"}),n.jsx("option",{children:"High"}),n.jsx("option",{children:"Normal"}),n.jsx("option",{children:"Low"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${a==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),n.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${a==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&a==="board"&&(Ae.length>0?n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:C7.map(B=>{const xe=ye.filter(_e=>_e.status===B);return n.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative rounded-md",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),n.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:B}),n.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:xe.length})]}),n.jsx("div",{className:`space-y-3 ${xe.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:xe.length>0?xe.map(_e=>n.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${Te(_e)}`,onClick:()=>he(_e,!0),children:[n.jsxs("div",{className:"text-left flex-1",children:[n.jsx("p",{className:"font-medium text-gray-800 text-sm",children:_e.title}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",_e.priority]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",_e.assignedToName]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",n.jsx("span",{className:Ve(_e)?"text-red-600":"text-gray-600",children:_e.dateAssigned?_7(_e.dateAssigned):""})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[n.jsx("button",{type:"button",onClick:ce=>{ce.stopPropagation(),he(_e)},className:"text-blue-500 hover:text-blue-700",children:n.jsx(la,{})}),n.jsx("button",{type:"button",onClick:ce=>{ce.stopPropagation(),Me(_e)},className:"text-red-500 hover:text-red-700",children:n.jsx(Ut,{})})]})]},_e.id)):n.jsx("div",{className:"text-center py-10 text-gray-500",children:"No tasks"})})]},B)})}):n.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No tasks found."})),!p&&!t&&a==="list"&&n.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:ye.length>0&&ye.every(B=>W.includes(B.id)),onChange:ve})}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),n.jsx("th",{className:"py-3 px-4 font-medium text-center w-24",children:W.length>0?n.jsx("button",{onClick:ke,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${W.length} selected tasks`,children:n.jsx(Ut,{size:18})}):""})]})}),n.jsx("tbody",{children:ye.length>0?ye.map(B=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",children:[n.jsx("td",{className:"py-3 px-4",onClick:xe=>xe.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:W.includes(B.id),onChange:()=>Be(B.id)})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",onClick:()=>he(B,!0),children:B.title}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>he(B,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Fe(B.status||"Not started")}`,children:B.status||"Not started"})}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>he(B,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Ye(B.priority||"Low")}`,children:B.priority||"Low"})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",onClick:()=>he(B,!0),children:B.assignedToName||"Unassigned"}),n.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${Ve(B)?"text-red-600 font-medium":""}`,onClick:()=>he(B,!0),children:B.dateAssigned?_7(B.dateAssigned):""}),n.jsx("td",{})]},B.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No tasks found."})})})]})})}),!p&&!t&&a==="list"&&n.jsx(tn,{className:"mt-6",totalItems:Ae.length,pageSize:_,currentPage:Ae.length===0?0:A,onPrev:()=>T(B=>Math.max(B-1,1)),onNext:()=>T(B=>Math.min(B+1,Math.max(1,Math.ceil(Ae.length/_)||1))),onPageSizeChange:B=>{I(B),T(1)},pageSizeOptions:[10,20,30,40,50],label:"tasks"}),n.jsx(n0,{isOpen:r,onClose:je,onSave:De,onEdit:()=>d(!1),setFormData:Y,formData:de,isEditing:!c&&!!o,viewMode:c,users:E,currentUser:e,onDelete:Me}),R&&n.jsx(CRe,{open:!0,title:R.title,message:R.message,confirmLabel:R.confirmLabel,cancelLabel:R.cancelLabel,variant:R.variant,onConfirm:fe,onCancel:ne,loading:D})]})}function jRe({icon:e,title:t,value:a,color:s,bgColor:r,onClick:i}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function CRe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r,variant:i,loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function SRe(e){return St({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M235.4 172.2c0-11.4 9.3-19.9 20.5-19.9 11.4 0 20.7 8.5 20.7 19.9s-9.3 20-20.7 20c-11.2 0-20.5-8.6-20.5-20zm1.4 35.7H275V352h-38.2V207.9z"},child:[]},{tag:"path",attr:{d:"M256 76c48.1 0 93.3 18.7 127.3 52.7S436 207.9 436 256s-18.7 93.3-52.7 127.3S304.1 436 256 436c-48.1 0-93.3-18.7-127.3-52.7S76 304.1 76 256s18.7-93.3 52.7-127.3S207.9 76 256 76m0-28C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48z"},child:[]}]})(e)}const F2={name:"",description:"",manager_id:"",user_ids:[],company_id:""};function _Re({label:e,options:t,selectedValues:a,onChange:s,disabled:r=!1,placeholder:i="Select users...",isSubmitted:o=!1,required:l=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null);h.useEffect(()=>{function C(w){p.current&&!p.current.contains(w.target)&&(d(!1),f(""))}return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]);const x=t.filter(C=>C.label.toLowerCase().includes(u.toLowerCase())),v=C=>{const w=a.includes(C);let S;w?S=a.filter(E=>E!==C):S=[...a,C],s(S)},N=(C,w)=>{C.stopPropagation(),s(a.filter(S=>S!==w))},b=t.filter(C=>a.includes(C.value));return n.jsxs("div",{className:"relative",ref:p,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsxs("div",{onClick:()=>!r&&d(!c),className:`w-full border ${l&&o&&a.length===0?"border-red-500 ring-red-500":c?"border-gray-500 ring-1 ring-gray-400":"border-gray-300"} 
  rounded-md px-3 py-2 text-sm bg-white cursor-pointer min-h-[38px] flex flex-wrap items-center gap-2
  ${r?"bg-gray-100 cursor-not-allowed":""}`,children:[a.length===0&&n.jsx("span",{className:"text-gray-400 select-none",children:i}),b.map(C=>n.jsxs("span",{className:"bg-indigo-100 text-indigo-700 px-2 py-0.5 rounded text-xs flex items-center gap-1 border border-indigo-200",children:[C.label,!r&&n.jsx(Vt,{className:"cursor-pointer hover:text-indigo-900",onClick:w=>N(w,C.value)})]},C.value)),n.jsx("div",{className:"ml-auto text-gray-400",children:n.jsx(jt,{})})]}),c&&!r&&n.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden flex flex-col",children:[n.jsx("div",{className:"p-2 border-b border-gray-100 sticky top-0 bg-white",children:n.jsxs("div",{className:"flex items-center px-2 py-1 bg-gray-50 rounded border border-gray-200",children:[n.jsx(Ht,{className:"text-gray-400 mr-2"}),n.jsx("input",{type:"text",className:"bg-transparent outline-none w-full text-sm",placeholder:"Search...",value:u,onChange:C=>f(C.target.value),autoFocus:!0})]})}),n.jsx("div",{className:"overflow-y-auto flex-1",children:x.length>0?x.map(C=>{const w=a.includes(C.value);return n.jsxs("div",{onClick:()=>v(C.value),className:`px-4 py-2 text-sm cursor-pointer flex items-center justify-between hover:bg-gray-50 
                      ${w?"bg-indigo-50 text-indigo-700":"text-gray-700"}`,children:[n.jsx("span",{children:C.label}),w&&n.jsx(Rk,{className:"text-indigo-600"})]},C.value)}):n.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:"No results found"})})]})]})}function Ec(){h.useEffect(()=>{document.title="Territory | Sari-Sari CRM"},[]);const e=bt(),{id:t}=Ul(),[a,s]=h.useState(""),[r,i]=h.useState(""),[o,l]=h.useState(""),[c,d]=h.useState(null),[u,f]=h.useState(!1),[p,x]=h.useState([]),[v,N]=h.useState(!1),[b,C]=h.useState([]),[w,S]=h.useState(F2),[E,k]=h.useState(!1),[A,T]=h.useState(!1),[_,I]=h.useState(null),[R,U]=h.useState(null),[D,M]=h.useState("board"),[W,X]=h.useState(null),[z,Q]=h.useState(!1),[de,Y]=h.useState(null),[se,J]=h.useState(1),[F,Ne]=h.useState(10),[re,he]=h.useState([]),je=h.useRef(!1),{userRole:De}=Bs(),Me=h.useMemo(()=>{const ee=new Map;return p.forEach(pe=>{const Ue=`${pe.name}-${pe.manager_id||"no-manager"}`;if(!ee.has(Ue))ee.set(Ue,{...pe,assigned_users_list:pe.assigned_to?[pe.assigned_to]:[]});else{const Ze=ee.get(Ue);pe.assigned_to&&(Ze.assigned_users_list.some(nt=>nt.id===pe.assigned_to.id)||Ze.assigned_users_list.push(pe.assigned_to))}}),Array.from(ee.values())},[p]),ve=h.useMemo(()=>{const ee=a.trim().toLowerCase(),pe=r.trim().toLowerCase(),Ue=o.trim();return[...Me].sort((nt,Je)=>{const Oe=nt?.created_at?new Date(nt.created_at):0;return(Je?.created_at?new Date(Je.created_at):0)-Oe}).filter(nt=>{const Je=nt.name?.toLowerCase()||"",Oe=nt.description?.toLowerCase()||"",ge=nt.managed_by?`${nt.managed_by.first_name} ${nt.managed_by.last_name}`.toLowerCase():"",Ke=nt.status?.toString().toLowerCase()||"",G=nt.assigned_users_list.map(Se=>`${Se.first_name} ${Se.last_name}`.toLowerCase()).join(" "),V=ee===""||[Je,Oe,ge,Ke,G].some(Se=>Se&&Se.includes(ee)),te=pe===""||Ke===pe,Z=Ue===""||String(nt.managed_by?.id||"")===Ue||nt.assigned_users_list.some(Se=>String(Se.id)===Ue);return V&&te&&Z})},[Me,a,r,o]);h.useEffect(()=>{if(je.current){je.current=!1;return}if(t&&Me.length>0&&!E&&!u&&!A){const ee=Me.find(pe=>pe.id===parseInt(t));ee&&d(ee)}!t&&!E&&!u&&d(null)},[t,Me,E,u,A]),h.useEffect(()=>{J(1)},[a,r,o]),h.useEffect(()=>{J(ee=>{const pe=Math.max(1,Math.ceil(ve.length/F)||1);return ee>pe?pe:ee})},[ve.length,F]);const Be=async()=>{try{const ee=await ie.get("/users/read/territory");C(ee.data)}catch(ee){console.error("Error fetching users:",ee)}},ke=async()=>{N(!0);try{const ee=await ie.get("/territories/fetch"),pe=Array.isArray(ee.data)?ee.data:[];x(pe),console.log(ee.data)}catch(ee){console.error("Error fetching territories:",ee)}finally{N(!1)}};h.useEffect(()=>{Be(),ke()},[]);const fe=ee=>{const{name:pe,value:Ue}=ee.target;S(Ze=>({...Ze,[pe]:Ue}))},ne=ee=>{S(pe=>({...pe,user_ids:ee}))},Ae=()=>{S(F2),k(!1),I(null),f(!0)},ye=(ee=!0)=>{f(!1),k(!1),I(null),S(F2)},Ie=ee=>{if(!ee)return;const pe=ee.assigned_users_list?ee.assigned_users_list.map(Ue=>String(Ue.id)):[];S({name:ee.name||"",description:ee.description||"",manager_id:ee.managed_by?String(ee.managed_by.id):"",user_ids:pe,company_id:ee.company_id?String(ee.company_id):""}),k(!0),I(ee.id),d(null),f(!0)},[Ve,Te]=h.useState(!1),Fe=ee=>{ee.preventDefault(),Te(!0);const pe=w.name.trim();if(!pe){q.error("Territory name is required.");return}if(!w.manager_id){q.error("Territory manager is required.");return}if(w.user_ids.length===0){q.error("Please assign at least one user.");return}let Ue=w.company_id?Number(w.company_id):null;if(!Ue&&w.user_ids.length>0){const Je=w.user_ids[0],Oe=b.find(ge=>String(ge.id)===String(Je));Oe&&Oe.company&&(Ue=Oe.company.id)}const Ze={name:pe,description:w.description?.trim()||"",manager_id:w.manager_id?Number(w.manager_id):null,user_ids:w.user_ids.map(Je=>Number(Je)),company_id:Ue},nt=E&&_?"update":"create";X({title:nt==="create"?"Confirm New Territory":"Confirm Update",message:n.jsxs("span",{children:[nt==="create"?"Create":"Update"," territory ",n.jsx("span",{className:"font-semibold",children:pe})," with ",Ze.user_ids.length," assigned users?"]}),confirmLabel:nt==="create"?"Create":"Update",cancelLabel:"Cancel",variant:"primary",action:{type:nt,payload:Ze,targetId:_,name:pe}})},Ye=ee=>{ee&&X({title:"Delete Territory Group",message:n.jsxs("span",{children:["Are you sure you want to delete ",n.jsx("span",{className:"font-semibold",children:ee.name}),"?",n.jsx("br",{}),n.jsxs("span",{className:"text-xs text-red-500",children:["This will remove assignments for all ",ee.assigned_users_list.length," users in this group."]})]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ee.id,name:ee.name}})},B=async()=>{re.length!==0&&X({title:"Delete Territories",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:re.length})," selected territories? This action cannot be undone."]}),confirmLabel:`Delete ${re.length} Territory(ies)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",territory_ids:re}})},xe=ee=>{if(ee.target.checked){const pe=ae.map(Ue=>Ue.id);he(pe)}else he([])},_e=ee=>{he(pe=>pe.includes(ee)?pe.filter(Ue=>Ue!==ee):[...pe,ee])},ce=async()=>{if(!W?.action){X(null);return}const{action:ee}=W,{type:pe,payload:Ue,targetId:Ze,name:nt}=ee;Q(!0);try{pe==="create"?(T(!0),await ie.post("/territories/assign",Ue),q.success(`Territory "${nt}" created.`),await ke(),await Be(),ye(!1)):pe==="update"?(T(!0),await ie.put(`/territories/${Ze}`,Ue),q.success(`Territory "${nt}" updated.`),je.current=!0,ye(!1),d(null),t&&e("/admin/territory"),await ke(),await Be()):pe==="delete"?(Y(Ze),await ie.delete(`/territories/${Ze}`),q.success(`Territory "${nt}" deleted.`),await ke(),c?.id===Ze&&d(null)):pe==="bulk-delete"&&(await ie.delete("/territories/admin/bulk-delete",{data:{territory_ids:ee.territory_ids}}),q.success(`Successfully deleted ${ee.territory_ids.length} territories`),he([]),await ke())}catch(Je){console.error(Je),q.error("An error occurred.")}finally{T(!1),Te(!1),Y(null),Q(!1),X(null)}},Ee=()=>{z||X(null)},ae=h.useMemo(()=>{if(D==="board")return ve;const ee=(se-1)*F;return ve.slice(ee,ee+F)},[ve,se,F,D]),He=ve.length>0,Re=()=>J(ee=>Math.max(ee-1,1)),it=()=>J(ee=>Math.min(ee+1,Math.ceil(ve.length/F)||1)),mt=ee=>!ee||ee.length===0?"Unassigned":ee.length===1?`${ee[0].first_name} ${ee[0].last_name}`:`${ee[0].first_name} ${ee[0].last_name} +${ee.length-1} more`;return n.jsx(n.Fragment,{children:n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[v&&n.jsx(zt,{message:"Loading territories..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-0 mb-7",children:[n.jsxs("h2",{className:"flex items-center text-2xl font-semibold text-gray-800",children:[n.jsx(Hl,{className:"mr-2 text-blue-600"})," Territory"]}),n.jsx("div",{className:"flex justify-center lg:justify-end md:justify-end w-full",children:["ceo","admin","group manager","group_manager"].includes(De.toLowerCase())&&(Array.isArray(b)&&b.length>0?n.jsxs("button",{onClick:Ae,className:"flex items-center bg-black text-white px-3 py-2 rounded-md hover:bg-gray-800 text-sm",children:[n.jsx(un,{})," Create Territory"]}):n.jsxs("div",{className:"text-xs bg-red-50 p-2 rounded-lg ring ring-red-300 text-red-700 flex items-center gap-1",children:[n.jsx(SRe,{})," Add users to assign territories"]}))})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mt-6 mb-4 flex flex-col md:flex-row items-center gap-2",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full md:w-4/4",children:[n.jsx(Ht,{className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search territory",className:"focus:outline-none w-full",value:a,onChange:ee=>s(ee.target.value)})]}),De.toLowerCase()!=="sales"&&n.jsx("div",{className:"flex flex-col md:flex-row gap-2 w-full md:w-1/2",children:n.jsxs("select",{className:"border border-gray-300 rounded-lg px-3 h-11 w-full text-sm",value:o,onChange:ee=>l(ee.target.value),children:[n.jsx("option",{value:"",children:"Filter by Users"}),b.map(ee=>n.jsxs("option",{value:String(ee.id),children:[ee.first_name," ",ee.last_name]},ee.id))]})})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("button",{onClick:()=>M("board"),className:`px-4 py-2 rounded-full text-sm ${D==="board"?"bg-gray-800 text-white":"bg-gray-100"}`,children:"Board View"}),n.jsx("button",{onClick:()=>M("list"),className:`px-4 py-2 rounded-full text-sm ${D==="list"?"bg-gray-800 text-white":"bg-gray-100"}`,children:"List View"})]}),D==="board"&&n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:He?ae.map(ee=>n.jsxs("div",{onClick:()=>{d(ee);let pe;De.toLowerCase()==="ceo"||De.toLowerCase()==="admin"?pe="admin":De.toLowerCase()==="group manager"||De.toLowerCase()==="group_manager"?pe="group-manager":De.toLowerCase()==="manager"?pe="manager":pe="sales",e(`/${pe}/territory/${ee.id}`)},className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative cursor-pointer hover:shadow-md transition",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),n.jsx("h3",{className:"font-medium text-gray-900 mb-2 pt-7",children:ee.name}),ee.description&&n.jsx("p",{className:"text-xs text-gray-600 mb-2 line-clamp-2",children:ee.description}),n.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-2",children:[n.jsx(en,{})," ",mt(ee.assigned_users_list)]}),n.jsx("div",{className:"h-px bg-gray-200 w-full mb-2"}),n.jsx("div",{className:"text-gray-400 text-xs text-right",children:ee.created_at?new Date(ee.created_at).toLocaleDateString():""})]},ee.id)):n.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No territories found."})}),D==="list"&&n.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:n.jsxs("tr",{children:[De.toLowerCase()!=="sales"&&n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:ae.length>0&&ae.every(ee=>re.includes(ee.id)),onChange:xe})}),n.jsx("th",{className:"py-3 px-4",children:"Territory"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Manager"}),De.toLowerCase()!=="sales"&&n.jsx("th",{className:"py-3 px-4 text-center w-24",children:re.length>0?n.jsx("button",{onClick:B,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${re.length} selected territories`,children:n.jsx(Ut,{size:18})}):""})]})}),n.jsx("tbody",{children:He?ae.map(ee=>n.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",children:[De.toLowerCase()!=="sales"&&n.jsx("td",{className:"py-3 px-4",onClick:pe=>pe.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:re.includes(ee.id),onChange:()=>_e(ee.id)})}),n.jsx("td",{className:"py-3 px-4 font-medium",onClick:()=>{d(ee);let pe;De.toLowerCase()==="ceo"||De.toLowerCase()==="admin"?pe="admin":De.toLowerCase()==="group manager"||De.toLowerCase()==="group_manager"?pe="group-manager":De.toLowerCase()==="manager"?pe="manager":pe="sales",e(`/${pe}/territory/${ee.id}`)},children:ee.name}),n.jsx("td",{className:"py-3 px-4",children:mt(ee.assigned_users_list)}),n.jsx("td",{className:"py-3 px-4",children:ee.managed_by?`${ee.managed_by.first_name}`:""}),n.jsx("td",{})]},ee.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No territories found."})})})]})}),c&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-xl p-8 relative",children:[n.jsx("button",{className:"absolute top-2 right-4 text-gray-500 hover:text-black",onClick:()=>{d(null);let ee;De.toLowerCase()==="ceo"||De.toLowerCase()==="admin"?ee="admin":De.toLowerCase()==="group manager"||De.toLowerCase()==="group_manager"?ee="group-manager":De.toLowerCase()==="manager"?ee="manager":ee="sales",e(`/${ee}/territory`)},children:n.jsx(Vt,{size:24})}),n.jsx("h2",{className:"text-3xl font-semibold mb-1",children:c.name}),n.jsx("div",{className:"h-px bg-gray-200 w-full mb-4"}),n.jsx("p",{className:"text-gray-500 mb-1",children:"Description"}),n.jsx("p",{className:"text-gray-700 text-sm mb-6",children:c.description||""}),n.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6 text-sm",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500",children:"Manager"}),n.jsx("div",{className:"font-medium",children:c.managed_by?`${c.managed_by.first_name} ${c.managed_by.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500",children:"Assigned To"}),n.jsx("div",{className:"flex flex-col gap-1 mt-1 max-h-32 overflow-y-auto",children:c.assigned_users_list&&c.assigned_users_list.length>0?c.assigned_users_list.map(ee=>n.jsxs("div",{className:"flex items-center gap-2 text-gray-800 font-medium",children:[n.jsx(en,{})," ",ee.first_name," ",ee.last_name]},ee.id)):"Unassigned"})]})]}),!["sales","manager"].includes(De.toLowerCase())&&n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsxs("button",{onClick:()=>Ie(c),className:"bg-blue-500 text-white px-4 py-2 rounded flex items-center gap-2",children:[n.jsx(la,{})," Edit"]}),n.jsxs("button",{onClick:()=>Ye(c),className:"bg-red-500 text-white px-4 py-2 rounded flex items-center gap-2",children:[n.jsx(Ut,{})," Delete"]})]})]})}),u&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-lg w-full max-w-xl p-6 relative",children:[n.jsxs("button",{className:"absolute top-4 right-4",onClick:()=>{ye(),Te(!1)},children:[n.jsx(Vt,{size:22})," "]}),n.jsx("h2",{className:"text-xl font-semibold text-center mb-6",children:E?"Edit Territory":"Create Territory"}),n.jsxs("form",{className:"space-y-4",onSubmit:Fe,noValidate:!0,children:[n.jsx(ARe,{label:"Territory Name",name:"name",value:w.name,onChange:fe,required:!0,isSubmitted:Ve}),n.jsx(TRe,{label:"Territory Manager",name:"manager_id",value:w.manager_id,onChange:fe,options:[{value:"",label:"Assign Manager"},...b.map(ee=>({value:String(ee.id),label:`${ee.first_name} ${ee.last_name}`}))],required:!0,isSubmitted:Ve}),n.jsx(_Re,{label:n.jsxs(n.Fragment,{children:["Assign Users ",n.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),placeholder:"Search and select users...",options:b.map(ee=>({value:String(ee.id),label:`${ee.first_name} ${ee.last_name}`})),selectedValues:w.user_ids,onChange:ne,required:!0,isSubmitted:Ve}),n.jsx(ERe,{label:"Description",name:"description",value:w.description,onChange:fe}),n.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[n.jsx("button",{type:"button",onClick:()=>{ye(),Te(!1)},className:"px-4 py-2 bg-red-400 text-white rounded",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:A,className:"px-4 py-2 bg-tertiary text-white rounded",children:A?"Saving...":"Save Territory"})]})]})]})}),D==="list"&&n.jsx(tn,{className:"mt-4",totalItems:ve.length,pageSize:F,currentPage:se,onPrev:Re,onNext:it,onPageSizeChange:ee=>{Ne(ee),J(1)},label:"territories"}),W&&n.jsx(kRe,{open:!0,title:W.title,message:W.message,confirmLabel:W.confirmLabel,cancelLabel:W.cancelLabel,variant:W.variant,onConfirm:ce,onCancel:Ee,loading:z})]})})}function ARe({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&o&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100 ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
${d}
`})]})}function TRe({label:e,name:t,value:a,onChange:s,options:r,disabled:i=!1,required:o=!1,isSubmitted:l=!1}){const c=l&&o&&!a;return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("select",{name:t,value:a??"",onChange:s,disabled:i,className:`w-full border rounded-md px-3 py-2 text-sm bg-white focus:ring-2 outline-none disabled:bg-gray-100 ${c?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-gray-400"}`,children:r.map(d=>n.jsx("option",{value:d.value,children:d.label},d.value))})]})}function ERe({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-gray-400 outline-none disabled:bg-gray-100"})]})}function kRe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const LRe=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"}],PRe=e=>e?String(e).toUpperCase():"",Xd=e=>{const t=PRe(e);return t==="PLANNED"||t==="PENDING"?"PLANNED":t==="HELD"||t==="COMPLETED"?"HELD":t==="NOT HELD"||t==="NOT_HELD"||t==="CANCELLED"?"NOT_HELD":"PLANNED"},B2=e=>{const t=Xd(e);return t==="PLANNED"?"PLANNED":t==="HELD"?"HELD":t==="NOT_HELD"?"NOT HELD":"--"},A7=e=>{switch(Xd(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},T7=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function E7(){const[e,t]=h.useState(!1),[a,s]=h.useState(null),[r,i]=h.useState(null),[o,l]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(null),[v,N]=h.useState(!1),[b,C]=h.useState(null),[w,S]=h.useState(!1),[E,k]=h.useState(!1),[A,T]=h.useState("PLANNED"),[_,I]=h.useState(!1),[R,U]=h.useState(!1),[D,M]=h.useState(10),[W,X]=h.useState(1),[z,Q]=h.useState([]),[de,Y]=h.useState(null);Ds();const se=bt(),J=Qt(),F=$=>{if(!$)return"";const V=String($).split("-");return V.length===3?`${V[0]}-${V[2]}`:String($)},re={subject:"",call_time:(()=>{const $=new Date,V=$.getFullYear(),te=String($.getMonth()+1).padStart(2,"0"),Z=String($.getDate()).padStart(2,"0");return`${V}-${te}-${Z}T08:00`})(),duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[he,je]=h.useState(re);h.useEffect(()=>{const $=J.state,V=$?.callID;if(V&&!$?.openCallModal){Y(V),se(J.pathname,{replace:!0,state:{}});return}!$?.openCallModal||!$?.initialCallData||$.initialCallData.relatedType1==="Lead"&&Array.isArray(o)&&o.length===0||$.initialCallData.relatedType1==="Account"&&(!Array.isArray(o)||o.length===0)||(t(!0),je(te=>({...te,...$.initialCallData,relatedTo1:$.initialCallData.relatedTo1?String($.initialCallData.relatedTo1):"",relatedTo2:$.initialCallData.relatedTo2?String($.initialCallData.relatedTo2):""})),se(J.pathname,{replace:!0,state:{}}))},[J.state,o]),h.useEffect(()=>{if(de&&u.length>0&&!R){const $=u.find(V=>V.id===de);$?s($):q.error("Call not found."),Y(null)}},[de,u,R]);const De=async()=>{try{U(!0);const $=await ie.get("/calls/admin/fetch-all"),te=[...Array.isArray($.data)?$.data:[]].sort((Z,Se)=>{const me=Z?.created_at?new Date(Z.created_at):0;return(Se?.created_at?new Date(Se.created_at):0)-me});f(te)}catch($){console.error("Error fetching calls:",$),q.error("Failed to load calls")}finally{U(!1)}},Me=async()=>{try{const $=await ie.get("/users/all");x($.data)}catch($){console.error("Error fetching users: ",$)}};h.useEffect(()=>{Me(),De()},[]);const[ve,Be]=h.useState(""),[ke,fe]=h.useState("Filter by Status"),[ne,Ae]=h.useState("Filter by Users");h.useEffect(()=>{X(1)},[ve,ke,ne,D]);const ye=h.useMemo(()=>u.filter($=>{const V=!ve||[$.subject,$.notes,$.lead?.title,$.account?.name,$.contact?.first_name,$.contact?.last_name,$.deal?.name].some(me=>me&&String(me).toLowerCase().includes(ve.toLowerCase())),te=ke==="Filter by Status"||Xd($.status)===ke,Z=$.call_assign_to?`${$.call_assign_to.first_name} ${$.call_assign_to.last_name}`:"";return V&&te&&(ne==="Filter by Users"||Z===ne)}),[u,ve,ke,ne]),Ie=h.useMemo(()=>{const $=(W-1)*D;return ye.slice($,$+D)},[ye,W,D]),Ve=Array.isArray(p)?p.map($=>({id:$.id,name:`${$.first_name} ${$.last_name}`})):[],Te=()=>X($=>Math.max(1,$-1)),Fe=()=>X($=>Math.min($+1,Math.ceil(ye.length/D)||1)),Ye=$=>{if($.target.checked){const V=Ie.map(te=>te.id);Q(V)}else Q([])},B=$=>{Q(V=>V.includes($)?V.filter(te=>te!==$):[...V,$])},xe=u.length,_e=u.filter($=>Xd($.status)==="PLANNED").length,ce=u.filter($=>Xd($.status)==="HELD").length,Ee=u.filter($=>Xd($.status)==="NOT_HELD").length,ae=[{title:"Total",value:xe,icon:Ls,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:_e,icon:zs,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:ce,icon:ba,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:Ee,icon:Ps,color:"text-gray-600",bgColor:"bg-gray-100"}],[He,Re]=h.useState("Overview"),it=$=>{const{name:V,value:te}=$.target;je(Z=>{const Se={...Z,[V]:te};return V==="relatedType1"&&(Se.relatedTo1="",te==="Lead"?(Se.relatedType2=null,Se.relatedTo2=null,d([])):te==="Account"&&(Se.relatedType2="Contact")),V==="relatedType2"&&(Se.relatedTo2=""),Se})};h.useEffect(()=>{const $=async()=>{try{l([]);let V;he.relatedType1==="Lead"?V=await ie.get("/leads/admin/getLeads"):he.relatedType1==="Account"&&(V=await ie.get("/accounts/admin/fetch-all")),V&&Array.isArray(V.data)?l(V.data):l([])}catch(V){console.error("Error fetching data:",V),l([])}};he.relatedType1&&$()},[he.relatedType1]),h.useEffect(()=>{const $=async()=>{try{d([]);let V;if(he.relatedType1==="Account"&&he.relatedTo1)he.relatedType2==="Contact"?V=await ie.get(`/contacts/from-acc/${he.relatedTo1}`):he.relatedType2==="Deal"?V=await ie.get(`/deals/from-acc/${he.relatedTo1}`):he.relatedType2==="Quote"&&(V=await ie.get(`/quotes/from-acc/${he.relatedTo1}`));else{d([]);return}V&&Array.isArray(V.data)?d(V.data):d([])}catch(V){console.error("Error fetching data:",V),d([])}};he.relatedType2&&$()},[he.relatedType2,he.relatedTo1,he.relatedType1]);const[mt,ee]=h.useState(!1),pe=$=>{$.preventDefault(),ee(!0);const V=he.subject;if(!V||V.trim()===""){q.error("Subject is required.");return}if(!he.relatedTo1){q.error(`Please select a ${he.relatedType1||"Lead/Account"}.`);return}if(!he.assigned_to){q.error("Subject is required.");return}const Z={...he,duration_minutes:he.duration_minutes?parseInt(he.duration_minutes,10):null,relatedTo1:he.relatedTo1?parseInt(he.relatedTo1,10):null,relatedTo2:he.relatedType1==="Lead"?null:he.relatedTo2?parseInt(he.relatedTo2,10):null,relatedType2:he.relatedType1==="Lead"?null:he.relatedType2,assigned_to:he.assigned_to?parseInt(he.assigned_to,10):null},Se=v&&b?"update":"create",me=(he.subject||"").trim()||"Untitled Call";i({title:Se==="create"?"Confirm New Call":"Confirm Update",message:Se==="create"?`Create "${me}"?`:`Save changes to "${me}"?`,confirmLabel:Se==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:Se,payload:Z,targetId:b||null,name:me}})},Ue=$=>s($),Ze=()=>{t(!1),N(!1),C(null)},nt=async()=>{z.length!==0&&i({title:"Delete Calls",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:z.length})," selected calls? This action cannot be undone."]}),confirmLabel:`Delete ${z.length} Call(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",call_ids:z}})},Je=async()=>{if(!r?.action){i(null);return}const{action:$}=r,{type:V,payload:te,targetId:Z,name:Se}=$;k(!0);try{if(V==="create")S(!0),await ie.post("/calls/create",te),q.success(`Call "${Se}" created successfully.`),t(!1),je(re),N(!1),C(null),await De();else if(V==="update"){if(!Z)throw new Error("Missing call identifier for update.");S(!0),await ie.put(`/calls/${Z}`,te),q.success(`Call "${Se}" updated successfully.`),t(!1),je(re),N(!1),C(null),await De()}else if(V==="delete"){if(!Z)throw new Error("Missing call identifier for deletion.");await ie.delete(`/calls/${Z}`),q.success(`Call "${Se}" deleted successfully.`),a?.id===Z&&s(null),await De()}else V==="bulk-delete"&&(await ie.delete("/calls/admin/bulk-delete",{data:{call_ids:z}}),q.success(`Successfully deleted ${z.length} calls`),Q([]),await De())}catch(me){const ue=V==="create"?"Failed to create call. Please review the details and try again.":V==="update"?"Failed to update call. Please review the details and try again.":"Failed to delete call. Please try again.",$e=me?.response?.data?.detail||ue;q.error($e)}finally{(V==="create"||V==="update")&&S(!1),k(!1),i(null)}},Oe=()=>{E||i(null)},ge=async()=>{if(a?.id)try{I(!0),await ie.put(`/calls/${a.id}`,{status:A}),q.success(`Status updated to ${B2(A)}`),f($=>Array.isArray($)?$.map(V=>V.id===a.id?{...V,status:A}:V):$),s(null)}catch($){const V=$.response?.data?.detail||"Failed to update status.";q.error(V)}finally{I(!1)}};h.useEffect(()=>{a&&T(Xd(a.status))},[a]);const Ke=a?n.jsxs("div",{id:"callModalBackdrop",onClick:$=>$.target.id==="callModalBackdrop"&&s(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[R&&n.jsx(zt,{message:"Loading call details..."}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),n.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:n.jsx(Wn,{size:25})})]}),n.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:a.subject}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${A7(a.status)}`,children:B2(a.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const $=me=>{if(!me)return"";const ue=new Date(me),$e=ue.getFullYear(),be=String(ue.getMonth()+1).padStart(2,"0"),We=String(ue.getDate()).padStart(2,"0"),ft=String(ue.getHours()).padStart(2,"0"),yt=String(ue.getMinutes()).padStart(2,"0");return`${$e}-${be}-${We}T${ft}:${yt}`},V=a.lead?"Lead":a.account?"Account":"Lead",te=a.lead?a.lead.id:a.account?a.account.id:null,Z=V==="Lead"?null:a.contact?"Contact":a.deal?"Deal":a.quote?"Quote":"Contact",Se=V==="Lead"?null:a.contact?a.contact.id:a.deal?a.deal.id:a.quote?a.quote.id:null;je({subject:a.subject||"",call_time:$(a.call_time),duration_minutes:a.duration_minutes?String(a.duration_minutes):"",direction:a.direction||"Outgoing",status:a.status||"Planned",notes:a.notes||"",relatedType1:V,relatedType2:Z,relatedTo1:te?String(te):"",relatedTo2:Se?String(Se):"",assigned_to:a.call_assign_to?.id?String(a.call_assign_to.id):""}),N(!0),C(a.id),s(null),t(!0)},children:[n.jsx(ia,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>{const $=a.subject||"this call";i({title:"Delete Call",message:`Are you sure you want to permanently delete "${$}"? This action cannot be undone.`,confirmLabel:"Delete Call",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:a.id,name:$}})},children:[n.jsx(Ut,{className:"mr-2"}),"Delete"]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map($=>n.jsx("button",{onClick:()=>Re($),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${He===$?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:$},$))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[He==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsx(eo,{label:"Call Time",value:T7(a.call_time)}),n.jsx(eo,{label:"Duration",value:a.duration_minutes?`${a.duration_minutes} min`:null}),n.jsx(eo,{label:"Direction",value:a.direction||"--"}),n.jsx(eo,{label:"Assigned To",value:`${a.call_assign_to.first_name} ${a.call_assign_to.last_name}`}),a.lead&&n.jsx(eo,{label:"Lead",value:a.lead.title}),a.account&&n.jsx(eo,{label:"Account",value:a.account.name}),a.contact&&n.jsx(eo,{label:"Contact",value:`${a.contact.first_name} ${a.contact.last_name}`}),a.deal&&n.jsx(eo,{label:"Deal",value:a.deal.name}),a.quote&&n.jsx(eo,{label:"Quote",value:F(a.quote.quote_id)}),n.jsx(eo,{label:"Created At",value:T7(a.created_at)})]})}),He==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Call Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:a.notes||"No notes available."})]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:A,onChange:$=>T($.target.value),children:[n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),n.jsx("button",{onClick:ge,disabled:_,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:_?"Updating...":"Update"})]})]})]})]})]}):null,G=e?n.jsx("div",{id:"modalBackdrop",onClick:$=>$.target.id==="modalBackdrop"&&Ze(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[n.jsx("button",{onClick:()=>{Ze(),ee(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:v?"Edit Call":"Add New Call"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:pe,noValidate:!0,children:[n.jsx(ORe,{label:"Subject",className:"md:col-span-2",name:"subject",value:he.subject,onChange:it,isSubmitted:mt,required:!0}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("div",{className:"relative w-25",children:[n.jsxs("select",{name:"relatedType1",onChange:it,value:he.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:w||v,children:[n.jsx("option",{value:"Lead",children:"Lead"}),n.jsx("option",{value:"Account",children:"Account"})]}),n.jsx("span",{className:"absolute left-10 md:pl-6 pl-6 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),n.jsx(H2,{items:Array.isArray(o)?o:[],value:he.relatedTo1??"",placeholder:`Search ${he.relatedType1||"here"}...`,getLabel:$=>he.relatedType1==="Lead"?$.title:$.name??"",onChange:$=>je(V=>({...V,relatedTo1:$})),required:!0,isSubmitted:mt,disabled:w||v})]}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("select",{name:"relatedType2",onChange:it,value:he.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:he.relatedType1==="Lead"||w||v,children:[n.jsx("option",{value:"Contact",children:"Contact"}),n.jsx("option",{value:"Deal",children:"Deal"}),n.jsx("option",{value:"Quote",children:"Quote"})]}),n.jsx(H2,{disabled:he.relatedType1==="Lead"||w||v,items:Array.isArray(c)?c:[],value:he.relatedTo2??"",placeholder:he.relatedType1==="Lead"?"":Array.isArray(c)&&c.length>0?`Search ${he.relatedType2||"Contact"}...`:`No ${he.relatedType2||""} data found`,getLabel:$=>he.relatedType2==="Contact"?`${$.first_name??""} ${$.last_name??""}`.trim():he.relatedType2==="Quote"?F($.quote_id)??"":$.name??"",onChange:$=>je(V=>({...V,relatedTo2:$}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),n.jsx("input",{type:"datetime-local",value:he.call_time,onChange:it,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),n.jsxs("div",{className:"w-full",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),n.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[n.jsx("input",{type:"tel",value:he.duration_minutes,onChange:it,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),n.jsx("p",{children:"minutes"})]})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[" Assign To ",n.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),n.jsx(H2,{items:Array.isArray(p)?p:[],value:he.assigned_to??"",placeholder:"Search an account...",getLabel:$=>`${$.first_name} ${$.last_name}`,onChange:$=>je(V=>({...V,assigned_to:$})),required:!0,isSubmitted:mt})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),n.jsxs("select",{name:"direction",onChange:it,value:he.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Incoming",children:"Incoming"}),n.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),n.jsxs("select",{name:"status",onChange:it,value:he.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Planned",children:"Planned"}),n.jsx("option",{value:"Held",children:"Held"}),n.jsx("option",{value:"Not held",children:"Not held"})]})]}),n.jsx(MRe,{className:"col-span-2",label:"Notes",value:he.notes,onChange:it,name:"notes"}),n.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{Ze(),ee(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:w,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:w?"Saving...":v?"Update Call":"Save Call"})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Ls,{className:"mr-2 text-blue-600"})," Calls"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto gap-2",children:n.jsxs("button",{onClick:()=>{je(re),N(!1),C(null),t(!0),ee(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(un,{className:"mr-2"})," Add Call"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:ae.map($=>n.jsx(DRe,{...$},$.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[n.jsx(Ht,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",value:ve,onChange:$=>Be($.target.value)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{value:ke,onChange:$=>fe($.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),LRe.map($=>n.jsx("option",{value:$.value,children:$.label},$.value))]}),n.jsxs("select",{value:ne,onChange:$=>Ae($.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),Ve.map($=>n.jsx("option",{value:$.name,children:$.name},$.id))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:Ie.length>0&&z.length===Ie.length,onChange:Ye,className:"cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Call Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:z.length>0?n.jsx("button",{onClick:nt,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${z.length} selected calls`,children:n.jsx(Ut,{size:18})}):""})]})}),n.jsx("tbody",{children:R?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"py-10",children:n.jsx(zt,{message:"Loading calls..."})})}):Ie.length>0?Ie.map($=>n.jsxs("tr",{onClick:()=>Ue($),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:V=>V.stopPropagation(),children:n.jsx("input",{type:"checkbox",checked:z.includes($.id),onChange:()=>B($.id),className:"cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:$.subject||"--"}),n.jsxs("td",{className:"py-3 px-4",children:[$.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:$.lead.title}),$.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:$.account.name}),$.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[$.contact.first_name," ",$.contact.last_name]}),$.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:$.deal.name}),$.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:F($.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:$.call_time?new Date($.call_time).toLocaleString():"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:$?.call_assign_to?`${$.call_assign_to.first_name} ${$.call_assign_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${A7($.status)}`,children:B2($.status)})}),n.jsx("td",{className:"py-3 px-4"})]},$.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),n.jsx(tn,{totalItems:ye.length,pageSize:D,currentPage:W,onPrev:Te,onNext:Fe,onPageSizeChange:$=>{M($),X(1)},pageSizeOptions:[10,20,30,40,50],label:"calls"})]}),Ke,G,r&&n.jsx(IRe,{open:!0,title:r.title,message:r.message,confirmLabel:r.confirmLabel,cancelLabel:r.cancelLabel,variant:r.variant,onConfirm:Je,onCancel:Oe,loading:E})]})}function DRe({icon:e,title:t,value:a,color:s,bgColor:r}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:22})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function ORe({label:e,name:t,value:a,onChange:s,placeholder:r="",type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&o&&!a;return n.jsxs("div",{className:d,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
        `})]})}function MRe(e){return n.jsxs("div",{className:e.className,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),n.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function eo({label:e,value:t}){return n.jsxs("p",{children:[n.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",n.jsx("br",{}),n.jsx("span",{className:"break-words",children:t||"--"})]})}function IRe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function H2({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,required:l=!1,isSubmitted:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),v=e.find(w=>String(w.id)===String(t)),N=v?s(v):"",b=l&&c&&!t,C=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(E=>(s(E)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${b?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:C.length>0?C.map(w=>{const S=String(w.id),E=s(w),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:E||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const Gj=({onClose:e,formData:t,setFormData:a,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,users:o=[]})=>{const c=(()=>{const T=new Date,_=T.getFullYear(),I=String(T.getMonth()+1).padStart(2,"0"),R=String(T.getDate()).padStart(2,"0");return{startTime:`${_}-${I}-${R}T08:00`,endTime:`${_}-${I}-${R}T09:00`}})(),[d,u]=h.useState({subject:"",startTime:c.startTime,endTime:c.endTime,location:"",status:"Planned",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:"Contact",relatedTo2:""}),[f,p]=h.useState([]),[x,v]=h.useState([]);h.useEffect(()=>{t!==void 0&&a&&(!t.startTime||!t.endTime)&&a(T=>({...T,startTime:T.startTime||c.startTime,endTime:T.endTime||c.endTime}))},[]);const N=T=>{if(!T)return"";const _=String(T).split("-");return _.length===3?`${_[0]}-${_[2]}`:String(T)},b=t!==void 0?t:d,C=a||u,{userRole:w}=Bs();h.useEffect(()=>{const T=async()=>{try{p([]);let _;b.relatedType1==="Lead"?_=await ie.get("/leads/admin/getLeads"):b.relatedType1==="Account"&&(_=await ie.get("/accounts/admin/fetch-all"));let I=[];if(_&&Array.isArray(_.data)&&(I=_.data),s&&b.relatedTo1)try{let R;b.relatedType1==="Lead"?R=await ie.get(`/leads/get/${b.relatedTo1}`):b.relatedType1==="Account"&&(R=await ie.get(`/accounts/get/${b.relatedTo1}`)),R&&R.data&&(I.some(D=>String(D.id)===String(b.relatedTo1))||(I=[R.data,...I]))}catch(R){console.error("Error fetching specific related item:",R)}p(I)}catch(_){console.error("Error fetching relatedTo1 data:",_),p([])}};b.relatedType1&&T()},[b.relatedType1,w,s,b.relatedTo1]),h.useEffect(()=>{const T=async()=>{try{if(v([]),b.relatedType1==="Account"&&b.relatedTo1){let _;b.relatedType2==="Contact"?_=await ie.get(`/contacts/from-acc/${b.relatedTo1}`):b.relatedType2==="Deal"?_=await ie.get(`/deals/from-acc/${b.relatedTo1}`):b.relatedType2==="Quote"&&(_=await ie.get(`/quotes/from-acc/${b.relatedTo1}`)),_&&Array.isArray(_.data)?v(_.data):v([])}else v([])}catch(_){console.error("Error fetching relatedTo2 data:",_),v([])}};b.relatedType2&&T()},[b.relatedType2,b.relatedTo1,b.relatedType1]);const S=T=>{const{name:_,value:I}=T.target;C(R=>{const U={...R,[_]:I};return _==="relatedType1"&&(R.relatedType1!==I&&(U.relatedTo1=""),I==="Lead"?(U.relatedType2=null,U.relatedTo2=null,v([])):I==="Account"&&(U.relatedType2="Contact",U.relatedTo2="")),_==="relatedType2"&&R.relatedType2!==I&&(U.relatedTo2=""),U})},[E,k]=h.useState(!1),A=T=>{if(T.preventDefault(),k(!0),b.status==="--"){q.warn("Please select a valid status.");return}const _=b.subject;if(!_||_.trim()===""){q.error("Subject is required.");return}if(!b.assignedTo){q.error("Assigned To is required.");return}if(!b.relatedTo1){q.error(`Please select a ${b.relatedType1||"Lead/Account"}.`);return}r?r(b):e()};return n.jsx("div",{id:"modalBackdrop",onClick:T=>T.target.id==="modalBackdrop"&&e(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-60 p-2 sm:p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-3 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[n.jsx("button",{onClick:e,className:"absolute top-3 right-3 sm:top-4 sm:right-4 text-gray-500 hover:text-black transition",children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-lg sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 text-center",children:s?"Edit Meeting":"Schedule Meeting"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4 text-sm",onSubmit:A,noValidate:!0,children:[n.jsx(eb,{label:"Subject",name:"subject",value:b.subject,onChange:S,placeholder:"e.g. Meeting with Client",required:!0,isSubmitted:E,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col w-full",children:[n.jsxs("div",{className:"relative w-25",children:[n.jsxs("select",{name:"relatedType1",onChange:S,value:b.relatedType1||"Lead",className:"w-full outline-none cursor-pointer mb-1 rounded text-gray-700 disabled:text-gray-400",disabled:i,children:[n.jsx("option",{value:"Lead",children:"Lead"}),n.jsx("option",{value:"Account",children:"Account"})]}),n.jsx("span",{className:"absolute left-10 md:pl-8 pl-8 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),n.jsx(G2,{items:Array.isArray(f)?f:[],disabled:i,value:b.relatedTo1??"",placeholder:`Search ${b.relatedType1||"here"}...`,getLabel:T=>b.relatedType1==="Lead"?T.title:T.name??"",onChange:T=>C(_=>({..._,relatedTo1:T})),required:!0,isSubmitted:E})]}),n.jsxs("div",{className:"flex flex-col w-full",children:[n.jsx("div",{className:"relative w-25",children:n.jsxs("select",{name:"relatedType2",onChange:S,value:b.relatedType2||"Contact",className:"w-full outline-none cursor-pointer mb-1 rounded text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:i||b.relatedType1==="Lead",children:[n.jsx("option",{value:"Contact",children:"Contact"}),n.jsx("option",{value:"Deal",children:"Deal"}),n.jsx("option",{value:"Quote",children:"Quote"})]})}),n.jsx(G2,{items:Array.isArray(x)?x:[],value:b.relatedTo2??"",placeholder:b.relatedType1==="Lead"?"":x?.length?`Search ${b.relatedType2}...`:`No ${b.relatedType2} data found`,getLabel:T=>b.relatedType2==="Contact"?`${T.first_name??""} ${T.last_name??""}`.trim():b.relatedType2==="Quote"?N(T.quote_id)??"":T.name??"",onChange:T=>C(_=>({..._,relatedTo2:T})),disabled:b.relatedType1==="Lead"})]}),n.jsx(eb,{label:"Location",name:"location",className:"md:col-span-2",value:b.location,onChange:S,disabled:i}),n.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[n.jsx(eb,{label:"Start Time",name:"startTime",type:"datetime-local",value:b.startTime,onChange:S,disabled:i}),n.jsx(eb,{label:"End Time",name:"endTime",type:"datetime-local",value:b.endTime,onChange:S,disabled:i})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),n.jsx(G2,{items:Array.isArray(o)?o:[],value:b.assignedTo??"",placeholder:"Search an account...",getLabel:T=>`${T.first_name} ${T.last_name}`,onChange:T=>C(_=>({..._,assignedTo:T})),disabled:w==="Sales",required:!0,isSubmitted:E})]}),n.jsx($Re,{label:"Status",name:"status",value:b.status,onChange:S,options:["--","Planned","Held","Not held"].map(T=>({value:T,label:T.replace("_"," ")})),disabled:i}),n.jsx(RRe,{label:"Notes",name:"notes",value:b.notes,onChange:S,rows:3,className:"md:col-span-2",disabled:i}),n.jsxs("div",{className:"md:col-span-2 flex flex-col sm:flex-row justify-end gap-2 mt-4",children:[n.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Meeting":"Save Meeting"})]})]})]})})};function eb({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 outline-none disabled:bg-gray-100
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function $Re({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l="",isSubmitted:c=!1}){const d=c&&i&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",i&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,hasError:d,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(u=>n.jsx("option",{value:u.value,children:u.label},u.value))})]})}function RRe({label:e,name:t,value:a,onChange:s,placeholder:r,required:i=!1,disabled:o=!1,className:l="",rows:c=3}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,required:i,disabled:o,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function G2({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,required:l=!1,isSubmitted:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),v=e.find(w=>String(w.id)===String(t)),N=v?s(v):"",b=l&&c&&!t,C=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(E=>(s(E)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${b?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:C.length>0?C.map(w=>{const S=String(w.id),E=s(w),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:E||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const ld=({meeting:e,onClose:t,onEdit:a,onDelete:s,onStatusUpdate:r})=>{bt();const[i,o]=h.useState("Overview"),l=N=>{if(!N)return"";const b=String(N).split("-");return b.length===3?`${b[0]}-${b[2]}`:String(N)},c=N=>{const b=(N||"").toUpperCase();return b==="PLANNED"||b==="IN PROGRESS"?"PLANNED":b==="HELD"||b==="DONE"?"HELD":b==="NOT HELD"?"NOT_HELD":"PLANNED"},d=N=>{const b=(N||"").toUpperCase();return b==="PLANNED"?"PLANNED":b==="HELD"?"HELD":b==="NOT HELD"||b==="NOT_HELD"?"NOT HELD":"PENDING"},[u,f]=h.useState(c(e?.status||"PENDING")),[p,x]=h.useState(!1);if(!e)return null;const v=N=>{const b=(N||"").toUpperCase(),C=b==="PLANNED"?"PENDING":b==="HELD"?"COMPLETED":b==="NOT_HELD"?"CANCELLED":b;switch(b){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:switch(C){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}}};return n.jsx(n.Fragment,{children:n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Meeting"}),n.jsx("button",{onClick:t,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Wn,{size:25})})]}),n.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:e.subject||"Meeting"}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${v(c(e.status))}`,children:c(e.status||"PENDING").replace("_"," ")})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",onClick:()=>{a&&a(e)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(la,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",onClick:()=>{s&&s(e)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(Ut,{className:"mr-2"}),"Delete"]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(N=>n.jsx("button",{onClick:()=>o(N),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${i===N?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:N},N))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[i==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Start Time:"}),n.jsx("p",{children:e.start_time?new Date(e.start_time).toLocaleString():"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"End Time:"}),n.jsx("p",{children:e.end_time?new Date(e.end_time).toLocaleString():"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Meeting Title:"}),n.jsx("p",{children:e.subject||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Location:"}),n.jsx("p",{children:e.location||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsxs("p",{children:[e.meet_assign_to.first_name," ",e.meet_assign_to.last_name]})]}),e.lead&&n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Lead:"}),n.jsx("p",{children:e.lead.title})]}),e.account&&n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Account:"}),n.jsx("p",{children:e.account.name})]}),e.contact&&n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact:"}),n.jsxs("p",{children:[e.contact.first_name," ",e.contact.last_name]})]}),e.deal&&n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Deal:"}),n.jsx("p",{children:e.deal.name})]}),e.quote&&n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Quote:"}),n.jsx("p",{children:l(e.quote.quote_id)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:c(e.status||"PENDING").replace("_"," ")})]})]})}),i==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Meeting Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:e.notes||"No notes available."})]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:u,onChange:N=>f(N.target.value),children:[n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),n.jsx("button",{onClick:async()=>{if(!r||!e?.id)return;const N=d(u);if(c(e.status)!==u){x(!0);try{await r(e.id,N)}catch(b){console.error("Failed to update status:",b)}finally{x(!1)}}},disabled:u===e.status||p,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${u===e.status||p?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:p?"Updating...":"Update"})]})]})]})]})})})},jZ=e=>e?e.toUpperCase():"",tb=e=>{const t=jZ(e);return t==="PLANNED"||t==="IN PROGRESS"?"PLANNED":t==="HELD"||t==="DONE"?"HELD":t==="NOT_HELD"||t==="NOT HELD"?"NOT_HELD":"PLANNED"},zRe=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},URe=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},FRe=e=>{const t=jZ(e);switch(t==="PLANNED"?"PENDING":t==="HELD"?"COMPLETED":t==="NOT_HELD"?"CANCELLED":t){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},W2={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},k7=()=>{const e=bt(),t=Qt(),[a]=Ds(),s=a.get("id"),r=t.pathname==="/admin/meetings/info";h.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[i,o]=h.useState([]),[l,c]=h.useState(!1),[d,u]=h.useState([]),[f,p]=h.useState(""),[x,v]=h.useState("Filter by Status"),[N,b]=h.useState(!1),[C,w]=h.useState(null),[S,E]=h.useState(1),[k,A]=h.useState(10),[T,_]=h.useState(W2),[I,R]=h.useState(!1),[U,D]=h.useState(null),[M,W]=h.useState(!1),[X,z]=h.useState(null),[Q,de]=h.useState(!1),[Y,se]=h.useState([]),[J,F]=h.useState(null);h.useEffect(()=>{const Te=t.state?.openMeetingModal,Fe=t.state?.initialMeetingData?.relatedTo||a.get("id"),Ye=t.state?.meetingID;Te||Fe?(b(!0),t.state?.initialMeetingData&&_(B=>({...B,...t.state.initialMeetingData})),e(t.pathname,{replace:!0,state:{}})):Ye&&(F(Ye),e(t.pathname,{replace:!0,state:{}}))},[t,a,e]),h.useEffect(()=>{if(J&&i.length>0&&!l){const Te=i.find(Fe=>Fe.id===J);Te?w(Te):q.error("Meeting not found."),F(null)}},[J,i,l]);const Ne=async()=>{if(s&&r){const Te=sessionStorage.getItem("meetingDetailData");if(Te)try{const Fe=JSON.parse(Te);if(Fe.id===parseInt(s)){w(Fe),sessionStorage.removeItem("meetingDetailData");return}}catch(Fe){console.error(Fe)}}c(!0);try{const Te=await ie.get("/meetings/admin/fetch-all"),Ye=[...Array.isArray(Te.data)?Te.data:[]].sort((B,xe)=>{const _e=B?.createdAt?new Date(B.createdAt).getTime():0;return(xe?.createdAt?new Date(xe.createdAt).getTime():0)-_e});if(o(Ye),s&&!C){const B=Ye.find(xe=>xe.id===parseInt(s));B&&w(B)}}catch{q.error("Failed to load meetings.")}finally{c(!1)}},re=async()=>{try{const Te=await ie.get("/users/all");u(Array.isArray(Te.data)?Te.data:[])}catch(Te){console.error(Te)}};h.useEffect(()=>{Ne(),re()},[]);const he=Te=>p(Te.target.value),je=Te=>{if(Te.target.checked){const Fe=ve.map(Ye=>Ye.id);se(Fe)}else se([])},De=Te=>{se(Fe=>Fe.includes(Te)?Fe.filter(Ye=>Ye!==Te):[...Fe,Te])},Me=h.useMemo(()=>{const Te=f.trim().toLowerCase(),Fe=x.trim().toUpperCase();return i.filter(Ye=>{const B=[Ye?.activity,Ye?.description,Ye?.relatedTo,Ye?.assignedTo],xe=Te===""||B.some(ce=>ce&&ce.toString().toLowerCase().includes(Te)),_e=Fe==="FILTER BY STATUS"||tb(Ye.status||"PENDING")===Fe;return xe&&_e})},[i,f,x]);h.useEffect(()=>{E(1)},[f,x,k]);const ve=h.useMemo(()=>{const Te=(S-1)*k;return Me.slice(Te,Te+k)},[Me,S,k]),Be=()=>{b(!1),_(W2),R(!1),D(null),W(!1)},ke=()=>{_(W2),R(!1),D(null),b(!0)},fe=Te=>{let Fe="";if(Te.meet_assign_to?.id)Fe=String(Te.meet_assign_to.id);else if(Te.assignedTo){const Re=d.find(it=>`${it.first_name} ${it.last_name}`===Te.assignedTo);Fe=Re?String(Re.id):""}const Ye=Re=>{if(!Re)return"";try{const it=new Date(Re),mt=it.getTimezoneOffset()*6e4;return new Date(it.getTime()-mt).toISOString().slice(0,16)}catch{return""}};let B="Lead",xe="",_e="Contact",ce="";if(Te.lead)B="Lead",xe=String(Te.lead.id);else if(Te.account)B="Account",xe=String(Te.account.id),Te.contact?(_e="Contact",ce=String(Te.contact.id)):Te.deal?(_e="Deal",ce=String(Te.deal.id)):Te.quote&&(_e="Quote",ce=String(Te.quote.id));else if(Te.relatedType||Te.related_type){const Re=Te.relatedType||Te.related_type,it=Te.related_to||Te.relatedToId;Re==="Lead"?(B="Lead",xe=String(it)):(B="Account",xe=Te.account_id?String(Te.account_id):"")}const Ee={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},ae=tb(Te.status),He=Ee[ae]||"Planned";_({subject:Te.subject||Te.activity||"",location:Te.location||"",startTime:Ye(Te.start_time||Te.startTime),endTime:Ye(Te.end_time||Te.endTime),status:He,notes:Te.description||Te.notes||"",assignedTo:Fe,relatedType1:B,relatedTo1:xe,relatedType2:_e,relatedTo2:ce}),R(!0),D(Te.id),w(null),b(!0)},ne=Te=>{if(!Te.subject?.trim())return q.error("Subject is required.");if(!Te.startTime)return q.error("Start time is required.");if(Te.endTime&&!(new Date(Te.endTime)-new Date(Te.startTime)>0))return q.error("End time must be after start time.");Te.relatedType1,Te.relatedTo1,Te.relatedType1==="Account"&&Te.relatedType2&&Te.relatedTo2&&(Te.relatedType2,Te.relatedTo2);const Fe={...Te,assignedTo:parseInt(Te.assignedTo),relatedTo1:parseInt(Te.relatedTo1),relatedTo2:parseInt(Te.relatedTo2)},Ye=I&&U?"update":"create";z({title:Ye==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${Ye} "${Fe.subject}"?`,confirmLabel:Ye==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:Ye,payload:Fe,targetId:U,name:Fe.subject}})},Ae=async()=>{if(!X?.action)return;const{type:Te,payload:Fe,targetId:Ye,name:B}=X.action;de(!0);try{if(Te==="create")W(!0),await ie.post("/meetings/create",Fe),q.success(`Meeting "${B}" created.`),Be(),await Ne();else if(Te==="update")W(!0),await ie.put(`/meetings/${Ye}`,Fe),q.success(`Meeting "${B}" updated.`),Be(),await Ne();else if(Te==="delete")await ie.delete(`/meetings/${Ye}`),q.success(`Meeting "${B}" deleted.`),C?.id===Ye&&w(null),await Ne();else if(Te==="bulk-delete"){const{meeting_ids:xe}=X.action;await ie.delete("/meetings/admin/bulk-delete",{data:{meeting_ids:xe}}),q.success(`${xe.length} meetings deleted.`),se([]),await Ne()}}catch(xe){const _e=xe.response?.data?.detail||"Action failed.";q.error(typeof _e=="string"?_e:JSON.stringify(_e)),console.error(_e)}finally{W(!1),de(!1),z(null)}},ye=async()=>{Y.length!==0&&z({title:"Delete Meetings",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:Y.length})," selected meetings? This action cannot be undone."]}),confirmLabel:`Delete ${Y.length} Meeting(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",meeting_ids:Y}})},Ie=Te=>{z({title:"Delete Meeting",message:`Permanently delete "${Te.activity}"?`,confirmLabel:"Delete",variant:"danger",action:{type:"delete",targetId:Te.id,name:Te.activity}})},Ve=async(Te,Fe)=>{try{await ie.put(`/meetings/${Te}`,{status:Fe}),q.success("Status updated"),Ne(),w(null)}catch{q.error("Failed to update status")}};return r&&s?C?n.jsx(ld,{meeting:C,onClose:()=>{w(null),e("/admin/dashboard")},onEdit:fe,onDelete:Ie,onStatusUpdate:Ve}):n.jsx(zt,{message:"Loading meeting..."}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[l&&n.jsx(zt,{message:"Loading meetings..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[n.jsx(Ct,{className:"mr-2 text-blue-600"})," Meetings"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:ke,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[n.jsx(un,{className:"mr-2"})," Add Meeting"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[n.jsx(Ht,{className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search meetings",value:f,onChange:he,className:"w-full outline-none"})]}),n.jsxs("select",{value:x,onChange:Te=>v(Te.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[n.jsx("option",{children:"Filter by Status"}),n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:ve.length>0&&Y.length===ve.length,onChange:je,className:"cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Start Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:Y.length>0?n.jsx("button",{onClick:ye,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${Y.length} selected items`,children:n.jsx(Ut,{size:18})}):n.jsx("span",{className:"text-gray-400",children:"Actions"})})]})}),n.jsx("tbody",{children:ve.length>0?ve.map(Te=>n.jsxs("tr",{onClick:()=>w(Te),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:Fe=>Fe.stopPropagation(),children:n.jsx("input",{type:"checkbox",checked:Y.includes(Te.id),onChange:()=>De(Te.id),className:"cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:Te.subject}),n.jsxs("td",{className:"py-3 px-4",children:[Te.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Te.lead.title}),Te.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Te.account.name}),Te.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[Te.contact.first_name," ",Te.contact.last_name]}),Te.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Te.deal.name}),Te.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:URe(Te.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4",children:zRe(Te.start_time)}),n.jsxs("td",{className:"py-3 px-4",children:[Te.meet_assign_to.first_name," ",Te.meet_assign_to.last_name]}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${FRe(tb(Te.status))}`,children:tb(Te.status).replace("_"," ")})}),n.jsx("td",{className:"py-3 px-4 text-center"})]},Te.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),n.jsx(tn,{totalItems:Me.length,pageSize:k,currentPage:S,onPrev:()=>E(Te=>Math.max(1,Te-1)),onNext:()=>E(Te=>Math.min(Te+1,Math.ceil(Me.length/k)||1)),onPageSizeChange:A,label:"meetings"}),N&&n.jsx(Gj,{onClose:Be,formData:T,setFormData:_,isEditing:I,onSubmit:ne,isSubmitting:M||Q,users:d}),C&&n.jsx(ld,{meeting:C,onClose:()=>w(null),onEdit:fe,onDelete:Ie,onStatusUpdate:Ve}),X&&n.jsx(BRe,{open:!0,title:X.title,message:X.message,confirmLabel:X.confirmLabel,variant:X.variant,onConfirm:Ae,onCancel:()=>z(null),loading:Q})]})};function BRe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{onClick:c,disabled:o,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),n.jsx("button",{onClick:l,disabled:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${d}`,children:o?"...":s})]})]})})}function HRe(){const{user:e,mutate:t}=Xt(),[a,s]=h.useState(""),[r,i]=h.useState(""),[o,l]=h.useState("January"),[c,d]=h.useState(!1),[u,f]=h.useState({type:"",text:""}),p=["January","February","March","April","May","June","July","August","September","October","November","December"];h.useEffect(()=>{e?.company&&(e.company.company_name&&s(e.company.company_name),e.company.currency&&i(e.company.currency),e.company.quota_period&&l(e.company.quota_period))},[e]);const x=async N=>{N.preventDefault(),d(!0),f({type:"",text:""});try{await ie.put("/company/update-name",{company_name:a,currency:r,quota_period:o}),t&&await t(),f({type:"success",text:"Company settings updated successfully!"})}catch(b){console.error("Update error:",b);const C=b.response?.data?.detail||"Failed to update settings.";f({type:"error",text:C})}finally{d(!1)}},v=["CEO","ADMIN"].includes(e?.role?.toUpperCase());return n.jsxs("div",{className:"max-w-2xl mx-auto mt-10 bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[n.jsxs("div",{className:"bg-[#fbbf24] px-6 py-4",children:[n.jsxs("h2",{className:"text-gray-900 font-bold text-xl flex items-center gap-2",children:[n.jsx(Kt,{})," Company Details"]}),n.jsx("p",{className:"text-gray-700 text-sm",children:"Manage your organization's identity and fiscal settings"})]}),n.jsxs("form",{onSubmit:x,className:"p-6 space-y-6",children:[!v&&n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-amber-50 text-amber-700 rounded-lg text-sm border border-amber-200",children:[n.jsx(zf,{}),n.jsx("span",{children:"You only have view-access. Changes can only be made by an Admin or CEO."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Company Name"}),n.jsx("input",{type:"text",value:a,onChange:N=>s(N.target.value),disabled:!v||c,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fbbf24] focus:border-transparent outline-none transition disabled:bg-gray-50 disabled:cursor-not-allowed",placeholder:"Enter company name",required:!0})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[n.jsx(Ct,{className:"text-gray-500"})," Fiscal Year Start"]}),n.jsxs("div",{className:"relative",children:[n.jsx("select",{value:o,onChange:N=>l(N.target.value),disabled:!v||c,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fbbf24] focus:border-transparent outline-none appearance-none bg-white disabled:bg-gray-50 cursor-pointer",children:p.map(N=>n.jsx("option",{value:N,children:N},N))}),n.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none text-gray-500",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select the month your sales year begins."})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[n.jsx(UH,{className:"text-gray-500"})," Currency"]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("label",{className:`flex-1 flex items-center justify-center gap-1 p-2 border rounded-lg cursor-pointer transition-all ${r===""?"bg-amber-50 border-[#fbbf24] text-amber-900 font-medium ring-1 ring-[#fbbf24]":"border-gray-200 hover:bg-gray-50 text-gray-600"} ${!v||c?"opacity-50 cursor-not-allowed":""}`,children:[n.jsx("input",{type:"radio",name:"currency",value:"",checked:r==="",onChange:()=>i(""),disabled:!v||c,className:"hidden"}),n.jsx("span",{className:"text-lg font-bold",children:""})," PHP"]}),n.jsxs("label",{className:`flex-1 flex items-center justify-center gap-1 p-2 border rounded-lg cursor-pointer transition-all ${r==="$"?"bg-amber-50 border-[#fbbf24] text-amber-900 font-medium ring-1 ring-[#fbbf24]":"border-gray-200 hover:bg-gray-50 text-gray-600"} ${!v||c?"opacity-50 cursor-not-allowed":""}`,children:[n.jsx("input",{type:"radio",name:"currency",value:"$",checked:r==="$",onChange:()=>i("$"),disabled:!v||c,className:"hidden"}),n.jsx("span",{className:"text-lg font-bold",children:"$"})," USD"]})]})]})]}),u.text&&n.jsx("div",{className:`p-3 rounded-lg text-sm border transition-all ${u.type==="success"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"}`,children:u.text}),n.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-100",children:v&&n.jsxs("button",{type:"submit",disabled:c,className:"flex items-center gap-2 bg-[#1e293b] text-white px-6 py-2 rounded-lg font-medium hover:bg-[#334155] disabled:opacity-50 transition shadow-md active:scale-95",children:[n.jsx(Uk,{}),c?"Updating...":"Save Settings"]})})]})]})}function GRe({toggleSidebar:e}){const[t,a]=h.useState(!1),[s,r]=h.useState(!1),[i,o]=h.useState([]),[l,c]=h.useState(0),d=h.useRef(null),u=h.useRef(null),f=Qt(),p=bt(),{logout:x}=Bs(),{user:v,fetchUser:N}=Xt(),C={"/sales/overview":"Dashboard","/sales/accounts":"Accounts","/sales/contacts":"Contacts","/sales/leads":"Leads","/sales/deals":"Deals","/sales/quotes":"Quotes","/sales/targets":"Targets","/sales/reports":"Reports","/sales/tasks":"Tasks"}[f.pathname]||"Sales Panel";h.useEffect(()=>{N();const A=()=>{N()};return window.addEventListener("userProfileUpdated",A),()=>{window.removeEventListener("userProfileUpdated",A)}},[]),h.useEffect(()=>{const A=async()=>{try{const T=await ie.get("/logs/notifications");console.log(" Fetched notifications from DB:",T.data);const _=(T.data||[]).map(I=>{const R=I.entity_id||I.new_data?.id,U=(I.entity_type||"").toLowerCase();return S({id:I.id,type:I.notif_type||I.notification_type||I.type||w(I),title:I.title||I.description,assignedBy:I.assignedBy||I.name,createdAt:I.createdAt||I.timestamp,read:I.is_read??I.read??!1,leadId:U==="lead"?R:I.leadId||I.lead_id,taskId:U==="task"?R:I.taskId||I.task_id,contactId:U==="contact"?R:I.contactId||I.contact_id,dealId:U==="deal"?R:I.dealId||I.deal_id,accountId:U==="account"?R:I.accountId||I.account_id})});o(_),c(_.filter(I=>!I.read).length)}catch(T){console.error("Failed to load history notifications",T)}};v?.id&&A()},[v?.id]);const w=A=>{const T=String(A.action||A.type||"").toUpperCase(),_={TASK_ASSIGNMENT:"task_assignment",LEAD_ASSIGNMENT:"lead_assignment",LEAD_UPDATE:"lead_update",CONTACT_ASSIGNMENT:"contact_assignment",CONTACT_UPDATE:"contact_update",DEAL_ASSIGNMENT:"deal_assignment",DEAL_UPDATE:"deal_update",ACCOUNT_ASSIGNMENT:"account_assignment",ACCOUNT_UPDATE:"account_update",TERRITORY_ASSIGNMENT:"territory_assignment",CREATE:"create",UPDATE:"update",DELETE:"delete"};if(_[T])return _[T];const I=String(A.title||A.description||"").toLowerCase(),R=String(A.entity_type||"").toLowerCase(),U=T.includes("UPDATE"),D=T.includes("CREATE");return T.includes("DELETE"),I.includes("task")||R==="task"?U?"task_update":"task_assignment":I.includes("territory")||R==="territory"?"territory_assignment":I.includes("lead")||R==="lead"?U?"lead_update":D?"lead_assignment":"lead_update":I.includes("contact")||R==="contact"?U?"contact_update":D?"contact_assignment":"contact_update":I.includes("deal")||R==="deal"?U?"deal_update":D?"deal_assignment":"deal_update":I.includes("account")||R==="account"?U?"account_update":D?"account_assignment":"account_update":I.includes("quote")||R==="quote"?"quote":I.includes("meeting")||R==="meeting"?"meeting":I.includes("call")||R==="call"?"call":"info"},S=A=>{const T={...A};switch(T.read=!!T.read,T.type){case"territory_assignment":T.title=T.title||`You have been assigned to ${T.territoryName||"a territory"}`;break;case"lead_assigned":T.type="lead_assignment",T.title=T.title||`New lead assigned: ${T.leadName||T.company||"Lead"}`;break;case"lead_assignment":T.title=T.title||`New lead assigned: ${T.leadName||T.company||"Lead"}`;break;case"lead_update":T.title=T.title||`Lead updated: ${T.leadName||T.company||"Lead"}`;break;case"task_assignment":case"task_update":T.title=T.title||`Task: ${T.taskTitle||"Task"}`;break;case"contact_assignment":T.title=T.title||`New contact assigned: ${T.contactName||T.contact||"Contact"}`;break;case"contact_update":T.title=T.title||`Contact updated: ${T.contactName||T.contact||"Contact"}`;break;case"deal_assignment":T.title=T.title||`New deal assigned: ${T.dealName||T.name||"Deal"}`;break;case"deal_update":T.title=T.title||`Deal updated: ${T.dealName||T.name||"Deal"}`;break;case"account_assignment":T.title=T.title||`New account assigned: ${T.accountName||T.name||"Account"}`;break;case"account_update":T.title=T.title||`Account updated: ${T.accountName||T.name||"Account"}`;break;case"quote":T.title=T.title||"Quote activity";break;case"meeting":T.title=T.title||"Meeting activity";break;case"call":T.title=T.title||"Call activity";break;default:T.title=T.title||"Activity"}return T},E=A=>{switch(A.type){case"task_assignment":p(`/sales/tasks/${A.taskId||A.task_id||""}`);break;case"lead_assignment":case"lead_update":p(`/sales/leads/${A.leadId||A.lead_id||""}`);break;case"contact_assignment":case"contact_update":p(`/sales/contacts/${A.contactId||A.contact_id||""}`);break;case"deal_assignment":case"deal_update":p(`/sales/deals/${A.dealId||A.deal_id||""}`);break;case"account_assignment":case"account_update":p(`/sales/accounts/${A.accountId||A.account_id||""}`);break;default:p("/sales/overview")}},k=async A=>{if(A.read){E(A);return}try{await ie.patch(`/logs/mark-read/${A.id}`),o(T=>T.map(_=>_.id===A.id?{..._,read:!0}:_)),c(T=>T>0?T-1:0),E(A)}catch(T){console.error("Failed to mark notification as read",T),E(A)}};return h.useEffect(()=>{if(!v?.id)return;const A=Jw(v.id);console.log(" Connecting to WebSocket:",A);const T=new WebSocket(A);let _;const I=()=>{_=setTimeout(()=>{console.log(" Attempting WebSocket reconnection...")},3e3)};return T.onopen=()=>{console.log(" Sales WS Connected to:",A),clearTimeout(_)},T.onmessage=R=>{try{const U=JSON.parse(R.data);console.log(" Notification received:",U);const D=S(U);o(M=>[D,...M]),c(M=>M+1)}catch(U){console.error("Error parsing notification:",U)}},T.onclose=()=>{console.log(" Sales WS Disconnected"),I()},T.onerror=R=>{console.error(" Sales WS Error:",R)},()=>{clearTimeout(_),T&&T.readyState===WebSocket.OPEN&&T.close()}},[v?.id]),h.useEffect(()=>{function A(T){d.current&&!d.current.contains(T.target)&&a(!1),u.current&&!u.current.contains(T.target)&&r(!1)}return document.addEventListener("mousedown",A),()=>document.removeEventListener("mousedown",A)},[]),n.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:n.jsx(ex,{className:"text-2xl"})}),n.jsx("h1",{className:"text-lg sm:text-xl font-semibold text-gray-800 truncate max-w-[150px] sm:max-w-none",children:C})]}),n.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[n.jsxs("div",{className:"relative",ref:u,children:[n.jsxs("button",{onClick:()=>r(!s),className:"relative text-gray-600 hover:text-gray-800 transition",children:[n.jsx(Zp,{className:"text-xl sm:text-2xl"}),l>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] w-4 h-4 flex items-center justify-center rounded-full font-semibold",children:l})]}),s&&n.jsxs("div",{className:"absolute right-0 mt-3 w-80 bg-white rounded-xl shadow-lg border z-50 overflow-hidden animate-fade-in",children:[n.jsxs("div",{className:"p-3 border-b bg-gray-50 flex justify-between items-center",children:[n.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:"Notifications"}),i.length>0&&n.jsx("button",{onClick:async()=>{try{await ie.patch("/logs/mark-all-read"),o(A=>A.map(T=>({...T,read:!0}))),c(0)}catch(A){console.error("Failed to mark all notifications as read",A)}},className:"text-xs text-blue-600 hover:underline",children:"Clear all"})]}),n.jsx("div",{className:"max-h-80 overflow-y-auto",children:i.length>0?i.map((A,T)=>n.jsxs("div",{onClick:()=>k(A),className:`p-4 border-b hover:bg-gray-50 cursor-pointer transition ${A.read?"bg-gray-50":"bg-white"}`,children:[n.jsxs("div",{className:"flex justify-between items-center mb-1",children:[n.jsx("span",{className:`text-[10px] px-2 py-1 rounded-full font-semibold uppercase
                            ${A.type==="task_assignment"||A.type==="task_update"?"bg-purple-100 text-purple-700":A.type==="lead_assignment"||A.type==="lead_update"?"bg-green-100 text-green-700":A.type==="contact_assignment"||A.type==="contact_update"?"bg-amber-100 text-amber-700":A.type==="deal_assignment"||A.type==="deal_update"?"bg-indigo-100 text-indigo-700":A.type==="account_assignment"||A.type==="account_update"?"bg-cyan-100 text-cyan-700":A.type==="territory_assignment"?"bg-blue-100 text-blue-700":A.type==="quote"?"bg-pink-100 text-pink-700":A.type==="meeting"?"bg-teal-100 text-teal-700":A.type==="call"?"bg-red-100 text-red-700":A.type==="create"?"bg-emerald-100 text-emerald-700":A.type==="update"?"bg-yellow-100 text-yellow-700":A.type==="delete"?"bg-rose-100 text-rose-700":"bg-gray-100 text-gray-700"}`,children:A.type==="task_assignment"||A.type==="task_update"?"Task":A.type==="lead_assignment"?"Lead":A.type==="lead_update"?"Lead Update":A.type==="contact_assignment"?"Contact":A.type==="contact_update"?"Contact Update":A.type==="deal_assignment"?"Deal":A.type==="deal_update"?"Deal Update":A.type==="account_assignment"?"Account":A.type==="account_update"?"Account Update":A.type==="territory_assignment"?"Territory":A.type==="quote"?"Quote":A.type==="meeting"?"Meeting":A.type==="call"?"Call":A.type==="create"?"Created":A.type==="update"?"Updated":A.type==="delete"?"Deleted":"Activity"}),!A.read&&n.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"font-medium text-gray-800 text-sm",children:A.title}),n.jsx("span",{className:"text-xs text-gray-600 mt-0.5",children:A.assignedBy?`Assigned by ${A.assignedBy}`:"System"}),n.jsx("span",{className:"text-[11px] text-gray-400 mt-1",children:A.createdAt?new Date(A.createdAt).toLocaleString():""})]})]},A.id??T)):n.jsx("div",{className:"p-6 text-center text-gray-500 text-sm",children:"No new notifications"})})]})]}),n.jsxs("div",{className:"relative",ref:d,children:[n.jsxs("button",{onClick:()=>a(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[n.jsx("img",{src:v?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 aspect-square object-cover rounded-full"}),n.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[v?.first_name," ",v?.last_name]})]}),t&&n.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4",children:[n.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[n.jsx("img",{src:v?.profile_picture||"https://via.placeholder.com/80",alt:"Profile",className:"w-16 h-16 rounded-full object-cover"}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[v?.first_name," ",v?.middle_name," ",v?.last_name]}),n.jsx("p",{className:"text-[11px] text-gray-600 font-light w-full truncate",children:"Sales"})]})]}),n.jsxs("div",{className:"mt-4 space-y-1 px-4 text-left",children:[n.jsx("button",{className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-2 rounded text-left",onClick:()=>{p("/sales/manage-account"),a(!1)},children:"Manage Your Account"}),n.jsx("div",{className:"border-t border-gray-200 my-2"}),n.jsx("button",{onClick:x,className:"block w-full text-sm text-red-600 hover:text-red-700 hover:bg-gray-50 py-2 rounded text-left",children:"Logout"})]})]})]})]})]})}function WRe(){const[e,t]=h.useState(!1),[a,s]=h.useState(!1),{user:r}=Xt(),[i,o]=h.useState(!1);h.useEffect(()=>{r&&console.log("Fetched user:",r)},[r]);const l=["/sales/overview","/sales/hub","/sales/accounts","/sales/contacts","/sales/leads","/sales/deals","/sales/quotes","/sales/targets"],c=Qt(),d=l.includes(c.pathname);h.useEffect(()=>{d&&o(!0)},[c.pathname]);const u="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",f="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition";return n.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[n.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
        ${e?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[n.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[n.jsxs("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:[" Sari-Sari.CRM"," ",n.jsx("span",{className:"text-[12px] text-gray-700 font-medium align-bottom",children:"v2"})]}),r&&r.company&&n.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:r.company.company_name})]}),n.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[n.jsxs(Ot,{to:"/sales/overview",className:({isActive:p})=>p?u:f,children:[n.jsx(Jp,{})," Dashboard"]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>o(!i),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Kt,{className:"text-lg"}),"Sales"]}),n.jsx(jt,{className:`transition-transform ${i?"rotate-180":""}`})]}),i&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(Ot,{to:"/sales/accounts",className:({isActive:p})=>p?u:f,children:[n.jsx(dd,{})," Accounts"]}),n.jsxs(Ot,{to:"/sales/contacts",className:({isActive:p})=>p?u:f,children:[n.jsx(en,{})," Contacts"]}),n.jsxs(Ot,{to:"/sales/leads",className:({isActive:p})=>p?u:f,children:[n.jsx(Gn,{})," Leads"]}),n.jsxs(Ot,{to:"/sales/deals",className:({isActive:p})=>p?u:f,children:[n.jsx(Kt,{})," Deals"]}),n.jsxs(Ot,{to:"/sales/quotes",className:({isActive:p})=>p?u:f,children:[n.jsx(xn,{})," Quotes"]}),n.jsxs(Ot,{to:"/sales/targets",className:({isActive:p})=>p?u:f,children:[n.jsx(tr,{})," Targets"]})]})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!a),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(ws,{className:"text-lg"}),"Activity"]}),n.jsx(jt,{className:`transition-transform ${a?"rotate-180":""}`})]}),a&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(Ot,{to:"/sales/tasks",className:({isActive:p})=>p?u:f,children:[n.jsx(qt,{})," Tasks"]}),n.jsxs(Ot,{to:"/sales/meetings",className:({isActive:p})=>p?u:f,children:[n.jsx(Ct,{})," Meetings"]}),n.jsxs(Ot,{to:"/sales/calls",className:({isActive:p})=>p?u:f,children:[n.jsx(Ls,{})," Calls"]}),n.jsxs(Ot,{to:"/sales/audit",className:({isActive:p})=>p?u:f,children:[n.jsx(ws,{})," Audit"]})]})]}),n.jsx("div",{children:n.jsx(Ot,{to:"/sales/territory",className:({isActive:p})=>p?u:f,children:n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Hl,{className:"text-lg"}),"Territory"]})})}),n.jsxs(Ot,{to:"/sales/manage-account",className:({isActive:p})=>p?u:f,children:[n.jsx(en,{className:"text-lg"}),n.jsx("span",{children:"Manage Account"})]})]}),n.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),e&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>t(!1)}),n.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[n.jsx(GRe,{toggleSidebar:()=>t(!0)}),n.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:n.jsx(Gp,{})})]})]})}const qRe=e=>n.jsx(Ht,{...e}),CZ=e=>n.jsx(dd,{...e}),SZ=e=>n.jsx(zs,{...e}),VRe=e=>n.jsx(Xp,{...e}),YRe=e=>n.jsx(Pw,{...e}),QRe=e=>n.jsx(Ct,{...e}),KRe=e=>n.jsx(At,{...e}),XRe=e=>n.jsx(Ow,{...e}),_Z=e=>n.jsx(Dw,{...e}),ZRe=e=>n.jsx(Zn,{...e}),AZ=e=>n.jsx(en,{...e}),JRe=e=>n.jsx(Gn,{...e}),TZ=e=>n.jsx(Kt,{...e}),eze=e=>n.jsx(xn,{...e}),tze=e=>n.jsx(tr,{...e}),nze=e=>n.jsx(ba,{...e}),aze=e=>n.jsx(Ct,{...e}),sze=e=>n.jsx(Ls,{...e}),rze=e=>n.jsx(Hl,{...e}),ize=e=>n.jsx(ws,{...e}),EZ=e=>`P ${new Intl.NumberFormat("en-PH",{minimumFractionDigits:0}).format(e)}`,oze=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},lze=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},cze=e=>{switch(e){case"call":return{Icon:KRe,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:XRe,color:"text-green-600",bgColor:"bg-green-100"};default:return{Icon:QRe,color:"text-blue-500",bgColor:"bg-blue-100"}}},dze=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},uze=({searchQuery:e,onSearchChange:t,searchResults:a,onSearchResultClick:s})=>{const r=bt(),[i,o]=h.useState(!1),l=h.useRef(null),c=[{icon:CZ,label:"Account"},{icon:AZ,label:"Contact"},{icon:JRe,label:"Leads"},{icon:TZ,label:"Deals"},{icon:eze,label:"Quotes"},{icon:tze,label:"Target"},{icon:nze,label:"Task"},{icon:aze,label:"Meeting"},{icon:sze,label:"Call"},{icon:ize,label:"Audit"},{icon:rze,label:"Territory"}];h.useEffect(()=>{const f=p=>{l.current&&!l.current.contains(p.target)&&o(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const d=f=>{t(f.target.value),o(f.target.value.trim().length>0)},u=f=>{s&&s(f),o(!1)};return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[n.jsxs("div",{className:"w-full flex justify-center relative",ref:l,children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-lg lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[n.jsx(qRe,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),n.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:d,onFocus:()=>e.trim().length>0&&o(!0)})]}),i&&Array.isArray(a)&&a.length>0&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:a.map((f,p)=>n.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>u(f),children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:f.name}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:f.type}),f.details&&n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:f.details})]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${f.type==="Lead"?"bg-blue-100 text-blue-600":f.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:f.type})]})},p))}),i&&e.trim().length>0&&(!Array.isArray(a)||a.length===0)&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 p-4 text-center text-sm text-gray-500",children:"No results found"})]}),n.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:n.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:c.map((f,p)=>n.jsxs("div",{className:"relative flex-shrink-0 group flex items-center justify-center",children:[n.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":f.label,title:f.label,onClick:()=>{switch(f.label){case"Account":r("/sales/accounts");break;case"Contact":r("/sales/contacts");break;case"Leads":r("/sales/leads");break;case"Deals":r("/sales/deals");break;case"Quotes":r("/sales/quotes");break;case"Target":r("/sales/targets");break;case"Task":r("/sales/tasks");break;case"Meeting":r("/sales/meetings");break;case"Call":r("/sales/calls");break;case"Audit":r("/sales/audit");break;case"Territory":r("/sales/territory");break;default:console.log(`Clicked ${f.label}`)}},children:n.jsx(f.icon,{size:24,className:"lg:scale-95"})}),n.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-1.5 bg-gray-900 text-white text-xs font-semibold rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-75 ease-in-out z-50 shadow-lg",children:[f.label,n.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]},p))})})]})},mze=({action:e,description:t,entity_type:a,entity_name:s,timestamp:r})=>{const i=bt(),o=u=>{if(!u)return"Unknown";const f=new Date(u),x=new Date-f,v=Math.floor(x/6e4),N=Math.floor(x/36e5),b=Math.floor(x/864e5);return v<1?"Just now":v<60?`${v} min ago`:N<24?`${N} hour${N>1?"s":""} ago`:b<7?`${b} day${b>1?"s":""} ago`:f.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},l=e||t||"Action",c=s||a||"System",d=o(r);return n.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/sales/audit"),children:[n.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[l," ",n.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",c,")"]})]}),n.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:d})]})},fze=({logs:e,loading:t})=>{const a=bt();return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/sales/audit"),children:[n.jsx("span",{children:"See All"}),n.jsx(_Z,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?n.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((s,r)=>n.jsx(mze,{...s},r))}):n.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},hze=({icon:e,title:t,value:a,color:s,bgColor:r,loading:i,onClick:o})=>n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o||(()=>console.log(`Clicked metric card: ${t}`)),children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:20})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a||0})]})]}),gze=({revenueData:e,loading:t})=>{const a=bt(),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=h.useMemo(()=>{if(console.log("=== RevenueChart calculateRevenueData ==="),console.log("revenueData:",e),console.log("revenueData length:",e?.length),!e||e.length===0){console.log("No revenue data, returning empty chart");const b=new Date;b.getFullYear();const C=b.getMonth(),w=[],S=[];for(let E=0;E<=C;E++)w.push(s[E]),S.push(0);return{labels:w,revenues:S,maxRevenue:0}}const l={};let c=0,d=0;console.log("Processing deals:",e.length),e.forEach((b,C)=>{const w=b.close_date||b.closeDate||null,S=w&&w!==null&&w!=="",E=b.stage||"",k=E.toUpperCase()==="CLOSED_WON"||E==="CLOSED_WON";let A=b.amount;A&&typeof A=="object"&&A.toString?A=parseFloat(A.toString()):A=parseFloat(A)||0;const T=A>0;if(k&&(d++,console.log(`Deal ${C+1} (CLOSED_WON):`,{id:b.id,name:b.name,stage:E,close_date:w,close_date_type:typeof w,amount:A,amount_type:typeof b.amount,hasCloseDate:S,hasAmount:T,willBeAdded:S&&T,allFields:Object.keys(b)})),S&&k&&T)try{let _=new Date(w);if(isNaN(_.getTime())){const I=String(w).split("T")[0];_=new Date(I+"T00:00:00")}if(isNaN(_.getTime()))console.warn(` Invalid date for deal ${b.id}:`,w,"Type:",typeof w);else{const I=_.getFullYear(),R=_.getMonth()+1,U=`${I}-${String(R).padStart(2,"0")}`;l[U]||(l[U]=0),l[U]+=A,c++,console.log(` Added deal ${b.id} to month ${U}: ${A}, total: ${l[U]}`),console.log(`  - Close date: ${w} -> Parsed: ${_.toISOString()} -> Month: ${U} (Year: ${I}, Month: ${R})`)}}catch(_){console.error("Error parsing deal date:",w,_)}else k&&console.warn(` Deal ${b.id} is CLOSED_WON but missing data:`,{hasCloseDate:S,hasAmount:T,closeDate:w,amount:A,originalAmount:b.amount})}),console.log("Summary:",{totalDeals:e.length,closedWonDeals:d,validDealsForGraph:c,monthlyRevenue:l});const u=Object.keys(l).map(b=>parseInt(b.split("-")[0])),f=u.length>0?[...new Set(u)].sort():[],p=new Date().getFullYear();new Date().getMonth();const x=[],v=[];for(let b=0;b<12;b++){const C=`${p}-${String(b+1).padStart(2,"0")}`;x.push(s[b]);const w=l[C]||0;v.push(w),w>0&&console.log(`Month ${s[b]} (${C}): ${w}`)}if(f.length>0){const b=Math.max(...f);if(b>p)for(let C=p+1;C<=b;C++)for(let w=0;w<12;w++){const S=`${C}-${String(w+1).padStart(2,"0")}`,E=l[S]||0;x.push(`${s[w]} ${C}`),v.push(E),E>0&&console.log(`Month ${s[w]} ${C} (${S}): ${E}`)}}const N=Math.max(...v,1);return console.log("Final chart data:",{labels:x,revenues:v,maxRevenue:N,hasData:v.some(b=>b>0)}),{labels:x,revenues:v,maxRevenue:N}},[e]),i=r.labels,o=r.revenues;return console.log("=== FINAL CHART DATA ==="),console.log("X Axis (Months):",i),console.log("Y Axis (Revenue):",o),console.log("Has any revenue > 0:",o.some(l=>l>0)),console.log("All revenue values:",o),console.log("Max revenue:",r.maxRevenue),n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/sales/deals"),children:[n.jsx("span",{children:"See All"}),n.jsx(_Z,{size:14,className:"transform -rotate-45"})]})]}),n.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:n.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i&&i.length>0&&o&&o.length>0?n.jsx(BN,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:l=>l>=1e3?`${(l/1e3).toFixed(0)}k`:l.toString()}],series:[{data:o,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%"}}):n.jsxs("div",{className:"text-center text-gray-500",children:[n.jsx("p",{className:"text-sm",children:"No revenue data available"}),n.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},pze=({pipelineData:e,loading:t})=>{const a=bt(),s=o=>{const l=(o||"").toUpperCase(),c={PROSPECTING:{name:"Prospecting",color:"bg-blue-500"},QUALIFICATION:{name:"Qualification",color:"bg-yellow-500"},PROPOSAL:{name:"Proposal",color:"bg-orange-500"},NEGOTIATION:{name:"Negotiation",color:"bg-purple-500"},CLOSED_WON:{name:"Closed Won",color:"bg-green-500"},CLOSED_LOST:{name:"Closed Lost",color:"bg-red-500"}};if(c[l])return c[l];const d=["bg-blue-500","bg-yellow-500","bg-orange-500","bg-purple-500","bg-green-500","bg-red-500"],u=Math.abs(l.split("").reduce((f,p)=>f+p.charCodeAt(0),0))%d.length;return{name:o||"Unknown",color:d[u]}},i=(()=>{if(!e||e.length===0)return["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"].map(f=>{const p=s(f);return{stage:p.name,value:0,deals:0,color:p.color}});const o={};e.forEach(u=>{const f=u.stage||"PROSPECTING";o[f]||(o[f]={deals:0,value:0}),o[f].deals+=1,o[f].value+=parseFloat(u.amount||0)});const l=Math.max(...Object.values(o).map(u=>u.value),1),c=["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"],d=[];return c.forEach(u=>{const f=s(u),p=o[u]||{deals:0,value:0};d.push({stage:f.name,value:p.value,deals:p.deals,color:f.color,percentage:l>0?p.value/l*100:0})}),d})();return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Sales Pipeline"}),n.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:()=>a("/sales/deals"),children:"See All"})]}),n.jsx("div",{className:"space-y-4 flex-grow",children:i.slice(0,6).map(o=>n.jsxs("div",{className:"flex flex-col cursor-pointer hover:opacity-85 transition duration-150",onClick:()=>a("/sales/deals"),children:[n.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[n.jsx("span",{className:"font-medium text-gray-700",children:o.stage}),n.jsx("span",{className:"font-semibold text-gray-800",children:EZ(o.value)})]}),n.jsx("div",{className:"relative h-2 rounded-full bg-gray-200",children:n.jsx("div",{className:`absolute top-0 left-0 h-full rounded-full ${o.color}`,style:{width:`${Math.min(o.percentage,100)}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[o.deals," Deals"]})]},o.stage))})]})},q2=({title:e,items:t,children:a,onSeeAll:s})=>{const r=bt(),i=()=>{if(s)s();else{const o={"Latest Leads":"/sales/leads","Latest Deals":"/sales/deals","Upcoming Activities":"/sales/tasks"};o[e]&&r(o[e])}};return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),n.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),a]})},xze=({first_name:e,last_name:t,company_name:a,source:s,created_at:r,id:i})=>{const o=bt(),{text:l,bg:c}=lze(s||"Website"),d=x=>{if(!x)return"Unknown";const v=new Date(x),b=new Date-v,C=Math.floor(b/6e4),w=Math.floor(b/36e5),S=Math.floor(b/864e5);return C<60?`${C} min ago`:w<24?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):S<7?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):v.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},u=`${e||""} ${t||""}`.trim()||"Unknown",f=a||"Unknown Company",p=d(r);return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&o(`/sales/leads/${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800",children:u}),n.jsx("p",{className:"text-xs text-gray-500",children:f})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-400",children:p}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${l} ${c} px-2 py-0.5 rounded-full`,children:s||"Website"})]})]})})},yze=({name:e,amount:t,account:a,stage:s,created_at:r,id:i,previousAmount:o})=>{const l=bt(),d={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[s]||s||"Unknown",{text:u,bg:f}=oze(d),p=parseFloat(t||0),x=o?p>=o?"up":"down":"up",v=x==="up"?VRe:YRe,N=x==="up"?"text-green-400":"text-red-400",b=a?.name||"Unknown Company";return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&l(`/sales/deals/info?id=${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex-shrink",children:[n.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),n.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:b}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${u} ${f} px-2 py-0.5 rounded-full`,children:d})]}),n.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[n.jsx("p",{className:"text-md font-bold text-gray-800",children:EZ(p)}),n.jsx(v,{size:16,className:`${N} mt-1`})]})]})})},bze=({type:e,title:t,assignedTo:a,dueDate:s,scheduledDate:r,priority:i,id:o,activityType:l,fullData:c})=>{const d=bt(),f=l||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:p,color:x,bgColor:v}=cze(f),{text:N,bg:b}=dze(i||"MEDIUM"),S=(A=>{if(!A)return"No date set";const T=new Date(A),I=T-new Date,R=Math.floor(I/864e5);return R===0?`Today, ${T.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:R===1?`Tomorrow, ${T.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:R===-1?`Yesterday, ${T.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:T.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(s||r),E=a||"Unassigned",k=()=>{o&&(c?f==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(c)),d(`/sales/calls/info?id=${o}`)):f==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(c)),d(`/sales/meetings/info?id=${o}`)):d("/sales/tasks"):d(f==="call"?`/sales/calls/info?id=${o}`:f==="meeting"?`/sales/meetings/info?id=${o}`:"/sales/tasks"))};return n.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:k,children:[n.jsx("div",{className:`p-2 rounded-lg ${v} mr-3 flex-shrink-0 mt-1`,children:n.jsx(p,{size:20,className:`${x}`})}),n.jsxs("div",{className:"flex-grow",children:[n.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[n.jsx("span",{className:"text-xl leading-none mr-2",children:""}),t||"Untitled Activity"]}),n.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[n.jsxs("p",{className:"flex items-center",children:[n.jsx(SZ,{size:14,className:"mr-1.5 text-gray-400"}),S]}),n.jsxs("p",{className:"flex items-center",children:[n.jsx(AZ,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",E]})]})]}),n.jsx("span",{className:`inline-block text-xs font-medium ${N} ${b} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},vze=()=>{const e=bt(),{user:t}=Xt(),[a,s]=h.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0}),[r,i]=h.useState([]),[o,l]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState([]),[p,x]=h.useState([]),[v,N]=h.useState([]),[b,C]=h.useState(!0),[w,S]=h.useState(null),[E,k]=h.useState(""),[A,T]=h.useState([]),[_,I]=h.useState([]),[R,U]=h.useState([]),[D,M]=h.useState(new Date),W=h.useRef(null),X=h.useRef(null),z=h.useMemo(()=>{try{if(!E.trim())return[];const se=E.toLowerCase().trim(),J=[];return Array.isArray(A)&&A.forEach(F=>{const Ne=`${F.first_name||""} ${F.last_name||""}`.trim().toLowerCase(),re=(F.company_name||"").toLowerCase(),he=(F.email||"").toLowerCase(),je=(F.phone||"").toLowerCase();(Ne.includes(se)||re.includes(se)||he.includes(se)||je.includes(se))&&J.push({id:F.id,name:`${F.first_name||""} ${F.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:F.company_name||"No company",route:`/sales/leads/${F.id}`})}),Array.isArray(_)&&_.forEach(F=>{const Ne=(F.name||"").toLowerCase(),re=(F.account?.name||"").toLowerCase(),he=(F.description||"").toLowerCase();(Ne.includes(se)||re.includes(se)||he.includes(se))&&J.push({id:F.id,name:F.name||"Unnamed Deal",type:"Deal",details:F.account?.name||"No account",route:`/sales/deals/info?id=${F.id}`})}),Array.isArray(R)&&R.forEach(F=>{const Ne=(F.name||"").toLowerCase(),re=(F.email||"").toLowerCase(),he=(F.phone||"").toLowerCase(),je=(F.website||"").toLowerCase();(Ne.includes(se)||re.includes(se)||he.includes(se)||je.includes(se))&&J.push({id:F.id,name:F.name||"Unnamed Account",type:"Account",details:F.email||F.phone||"No contact info",route:"/sales/accounts"})}),J.slice(0,10)}catch(se){return console.error("Error in search:",se),[]}},[E,A,_,R]),Q=se=>{se.route&&(e(se.route),k(""))},de=h.useCallback(async()=>{C(!0),S(null);try{const[se,J,F,Ne,re,he,je]=await Promise.all([ie.get("/leads/sales/getLeads").catch(ce=>(console.error("Error fetching leads:",ce),{data:[]})),ie.get("/deals/sales/fetch-all").catch(ce=>(console.error("Error fetching deals:",ce),{data:[]})),ie.get("/accounts/sales/fetch-all").catch(ce=>(console.error("Error fetching accounts:",ce),{data:[]})),ie.get("/tasks/all").catch(ce=>(console.error("Error fetching tasks:",ce),{data:[]})),ie.get("/meetings/sales/fetch-all").catch(ce=>(console.error("Error fetching meetings:",ce),{data:[]})),ie.get("/calls/sales/fetch-all").catch(ce=>(console.error("Error fetching calls:",ce),{data:[]})),ie.get("/logs/read-all").catch(ce=>(console.error("Error fetching logs:",ce),{data:[]}))]),De=Array.isArray(se.data)?se.data:[],Me=Array.isArray(J.data)?J.data:[],ve=Array.isArray(F.data)?F.data:[],Be=Array.isArray(Ne.data)?Ne.data:[],ke=Array.isArray(re.data)?re.data:[],fe=Array.isArray(he.data)?he.data:[],ne=Array.isArray(je.data)?je.data:[];console.log("=== RAW DEALS API RESPONSE ==="),console.log("Deals count:",Me.length),Me.length>0&&(console.log("First deal sample (raw):",JSON.stringify(Me[0],null,2)),console.log("First deal keys:",Object.keys(Me[0]))),T(De),I(Me),U(ve);const Ae=De.filter(ce=>ce.status&&!["Lost","Converted"].includes(ce.status)).length,ye=Be.filter(ce=>!ce.dueDate||ce.status==="Completed"?!1:new Date(ce.dueDate)<new Date).length;s({activeLeads:Ae,totalDeals:Me.length,activeAccounts:ve.length,overdueTasks:ye});const Ie=[...De].sort((ce,Ee)=>new Date(Ee.created_at||0)-new Date(ce.created_at||0)).slice(0,5);i(Ie);const Ve=[...Me].sort((ce,Ee)=>new Date(Ee.created_at||0)-new Date(ce.created_at||0)).slice(0,5);l(Ve);const Te=new Date,Fe=[];fe.forEach(ce=>{const Ee=ce.due_date||ce.call_time,ae=(ce.status||"").toUpperCase();if(Ee){const He=new Date(Ee);ae==="COMPLETED"||ae==="MISSED"||ae==="NOT_HELD"||ae==="HELD"||Fe.push({type:"Call",title:ce.subject||"Untitled Call",assignedTo:ce.assigned_to||(ce.call_assign_to?`${ce.call_assign_to.first_name||""} ${ce.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:Ee,priority:(ce.priority||"MEDIUM").toUpperCase(),id:ce.id,activityType:"call",fullData:ce})}}),ke.forEach(ce=>{const Ee=ce.dueDate||ce.start_time,ae=(ce.status||"").toUpperCase();if(Ee){const He=new Date(Ee);ae==="COMPLETED"||ae==="CANCELLED"||ae==="DONE"||Fe.push({type:"Meeting",title:ce.subject||ce.activity||"Untitled Meeting",assignedTo:ce.assignedTo||(ce.meet_assign_to?`${ce.meet_assign_to.first_name||""} ${ce.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:Ee,priority:(ce.priority||"MEDIUM").toUpperCase(),id:ce.id,activityType:"meeting",fullData:ce})}});const Ye={HIGH:1,MEDIUM:2,LOW:3},B=Fe.sort((ce,Ee)=>{const ae=Ye[ce.priority]||3,He=Ye[Ee.priority]||3;if(ae!==He)return ae-He;const Re=new Date(ce.scheduledDate||0),it=new Date(Ee.scheduledDate||0);return Re-it}).slice(0,5);d(B),f(Me),console.log("=== ALL DEALS DATA ==="),console.log("Total deals:",Me.length);const xe=Me.filter(ce=>(ce.stage||"").toUpperCase()==="CLOSED_WON");console.log("CLOSED_WON deals:",xe.length),xe.length>0?(console.log("=== CLOSED_WON DEALS DETAILS ==="),xe.forEach((ce,Ee)=>{let ae=ce.amount;ae&&typeof ae=="object"?ae.toString?ae=parseFloat(ae.toString()):ae=parseFloat(ae):ae=parseFloat(ae)||0,console.log(`Deal ${Ee+1}:`,{id:ce.id,name:ce.name,stage:ce.stage,stage_upper:(ce.stage||"").toUpperCase(),amount:ce.amount,amount_parsed:ae,amount_type:typeof ce.amount,close_date:ce.close_date,close_date_type:typeof ce.close_date,close_date_value:ce.close_date?new Date(ce.close_date):null,has_close_date:!!ce.close_date,has_amount:ae>0,all_keys:Object.keys(ce),full_deal:ce})})):(console.log(" No CLOSED_WON deals found!"),console.log("All deal stages:",Me.map(ce=>ce.stage))),N(Me);const _e=[...ne].sort((ce,Ee)=>new Date(Ee.timestamp||0)-new Date(ce.timestamp||0));x(_e)}catch(se){console.error("Error fetching dashboard data:",se),S("Failed to load dashboard data. Please refresh the page.")}finally{C(!1)}},[]);h.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",console.log("SalesOverview mounted, fetching data..."),de(),W.current=setInterval(()=>{console.log("Auto-refreshing dashboard data..."),de(),M(new Date)},3e4),()=>{W.current&&clearInterval(W.current)}),[de]),h.useEffect(()=>{if(!t||!t.id)return;let se=0;const J=3;let F=null;const Ne=()=>{const re=window.location.protocol==="https:"?"wss:":"ws:",he=window.location.hostname==="localhost"?"localhost:8000":window.location.host,je=`${re}//${he}/ws/notifications?user_id=${t.id}`;try{const De=new WebSocket(je);X.current=De,De.onopen=()=>{console.log(" WebSocket connected for dashboard updates"),se=0},De.onmessage=Me=>{try{const ve=JSON.parse(Me.data);console.log(" Real-time notification received:",ve),ve.event&&["new_task","task_updated","new_lead","lead_updated","new_deal","deal_updated","new_account","account_updated","new_meeting","meeting_updated","new_call","call_updated"].includes(ve.event)&&(console.log(" Refreshing dashboard due to:",ve.event),de(),M(new Date))}catch(ve){console.error("Error parsing WebSocket message:",ve)}},De.onerror=Me=>{se===0&&console.warn(" WebSocket connection unavailable (this is optional)")},De.onclose=()=>{se<J&&(se++,F=setTimeout(()=>{t&&t.id&&Ne()},5e3))}}catch{console.warn(" WebSocket not available (optional feature)")}};return Ne(),()=>{F&&clearTimeout(F),X.current&&(X.current.close(),X.current=null)}},[t,de]);const Y=[{icon:ZRe,title:"Active Leads",value:a.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/sales/leads")},{icon:TZ,title:"Total Deals",value:a.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/sales/deals")},{icon:CZ,title:"Active Account",value:a.activeAccounts,color:"text-green-600",bgColor:"bg-green-50",onClick:()=>e("/sales/accounts")},{icon:SZ,title:"Overdue Tasks",value:a.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/sales/tasks")}];return console.log("SalesOverview rendering, loading:",b,"error:",w),n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[b&&n.jsx(zt,{}),n.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[w&&n.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:n.jsx("p",{className:"font-medium",children:w})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 mb-8",children:[n.jsxs("div",{className:"lg:col-span-9 flex flex-col space-y-4",children:[n.jsx(uze,{searchQuery:E,onSearchChange:k,searchResults:z,onSearchResultClick:Q}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:Y.map(se=>n.jsx(hze,{...se,loading:b},se.title))})]}),n.jsx("div",{className:"lg:col-span-3",children:n.jsx(fze,{logs:p,loading:b})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[n.jsx("div",{className:"lg:col-span-2",children:n.jsx(gze,{revenueData:v,loading:b})}),n.jsx("div",{children:n.jsx(pze,{pipelineData:u,loading:b})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsx(q2,{title:"Latest Leads",children:r.length>0?r.map((se,J)=>n.jsx(xze,{...se},se.id||J)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),n.jsx(q2,{title:"Latest Deals",children:b?n.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mb-2"}),n.jsx("div",{className:"text-sm text-gray-500",children:"Loading deals..."})]}):o.length>0?o.map((se,J)=>n.jsx(yze,{...se},se.id||J)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),n.jsx(q2,{title:"Upcoming Activities",children:c.length>0?c.map((se,J)=>n.jsx(bze,{...se},se.id||J)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})},V2=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Vendor"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Delete"}],Y2={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",parent_company:"",status:"PROSPECT",territory_id:"",assigned_to:""},jr=e=>e?e.toUpperCase():"",Q2=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",wze=e=>{switch(jr(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},Nze=e=>{switch(jr(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}};function jze(){const e=bt(),{user:t}=Xt(),a=t?.role==="Sales";h.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[s,r]=h.useState(!1),[i,o]=h.useState(!1),[l,c]=h.useState(!1),[d,u]=h.useState(null),[f,p]=h.useState(null),[x,v]=h.useState(Y2),[N,b]=h.useState(null),[C,w]=h.useState([]),[S,E]=h.useState(!1),[k,A]=h.useState([]),[T,_]=h.useState(null),[I,R]=h.useState([]),[U,D]=h.useState([]),[M,W]=h.useState("Filter by Status"),[X,z]=h.useState(""),[Q,de]=h.useState(null),[Y,se]=h.useState(!1),[J,F]=h.useState(1),[Ne,re]=h.useState(10),[he,je]=h.useState("Overview"),[De,Me]=h.useState(""),[ve,Be]=h.useState(!1),[ke,fe]=h.useState([]),[ne,Ae]=h.useState({}),[ye,Ie]=h.useState(null);h.useEffect(()=>{s&&!i&&a&&t&&!x.assigned_to&&v(le=>({...le,assigned_to:t.id}))},[s,i,a,t,x.assigned_to]);const Ve=h.useCallback(async(le=null)=>{E(!0);try{const Le=await ie.get("/accounts/admin/fetch-all"),vt=[...Array.isArray(Le.data)?Le.data:[]].sort((gt,Bt)=>{const wn=gt?.created_at||gt?.updated_at||0,ns=Bt?.created_at||Bt?.updated_at||0;return new Date(ns)-new Date(wn)});if(w(vt),le){const gt=vt.find(Bt=>Bt.id===le);b(gt||null)}}catch(Le){console.error(Le),w([]),Le.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch accounts. Please try again later.")}finally{E(!1)}},[b]),Te=h.useCallback(async()=>{try{const le=await ie.get("/users/all");A(Array.isArray(le.data)?le.data:[])}catch(le){console.error(le),le.response?.status===403&&q.warn("Unable to load users for assignment (permission denied).")}},[]),Fe=h.useCallback(async()=>{try{const le=await ie.get("/territories/fetch");R(Array.isArray(le.data)?le.data:[])}catch(le){console.error(le),le.response?.status===403&&q.warn("Unable to load territories (permission denied).")}},[]),Ye=h.useCallback(async()=>{try{const le=await ie.get("/accounts/admin/parent-companies");D(Array.isArray(le.data)?le.data:[])}catch(le){console.error(le),le.response?.status===403&&q.warn("Unable to load parent companies (permission denied).")}},[]),B=h.useCallback(async le=>{try{const Le=await ie.get(`/activities/accounts/${le}`);Ae(Le.data&&typeof Le.data=="object"?Le.data:{})}catch(Le){console.error(Le),Le.response?.status===404&&(console.warn("No activities found for this account."),Ae({}))}},[]);h.useEffect(()=>{Ve(),Te(),Fe(),Ye()},[Ve,Te,Fe,Ye]),h.useEffect(()=>{N&&Me(jr(N.status)||"PROSPECT")},[N]);const xe=C.filter(le=>le.acc_creator?.id===t?.id&&le.assigned_accs?.id===t?.id),_e=xe.length,ce=h.useMemo(()=>xe.filter(le=>le.status?.toLowerCase()==="customer").length,[xe]),Ee=h.useMemo(()=>xe.filter(le=>le.status?.toLowerCase()==="prospect").length,[xe]),ae=h.useMemo(()=>xe.filter(le=>le.status?.toLowerCase()==="partner").length,[xe]),He=h.useMemo(()=>xe.filter(le=>le.status?.toLowerCase()==="active").length,[xe]),Re=h.useMemo(()=>xe.filter(le=>le.status?.toLowerCase()==="inactive").length,[xe]),it=h.useMemo(()=>xe.filter(le=>le.status?.toLowerCase()==="former").length,[xe]),mt=h.useMemo(()=>[{title:"Total",value:_e,icon:Zn,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:ce,icon:Ao,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:Ee,icon:Gn,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:ae,icon:en,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:He,icon:Ao,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:Re,icon:To,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:it,icon:To,color:"text-orange-600",bgColor:"bg-orange-100"}],[_e,ce,Ee,ae,He,Re,it]),ee=h.useMemo(()=>{const le=X.trim().toLowerCase(),Le=M.trim().toUpperCase();return C.filter(Qe=>{if(!(t?.role==="Admin"||t?.role==="CEO"||t?.role==="MANAGER"||t?.role==="GROUP MANAGER")&&Qe.status?.toUpperCase()==="INACTIVE")return!1;const gt=[Qe?.name,Qe?.website,Qe?.industry,Qe?.territory?.name,Qe?.phone_number],Bt=le===""||gt.some(ns=>ns==null?!1:ns.toString().toLowerCase().includes(le)),wn=Le==="FILTER BY STATUS"||jr(Qe.status)===Le;return Bt&&wn})},[C,X,M,t]),pe=Math.max(1,Math.ceil(ee.length/Ne)||1);h.useEffect(()=>{F(1)},[X,M]),h.useEffect(()=>{F(le=>{const Le=Math.max(1,Math.ceil(ee.length/Ne)||1);return le>Le?Le:le})},[ee.length,Ne]);const Ue=h.useMemo(()=>{const le=(J-1)*Ne;return ee.slice(le,le+Ne)},[ee,J,Ne]),Ze=le=>{if(le.target.checked){const Le=Ue.filter(Qe=>Qe.assigned_accs?.id===t?.id&&Qe.acc_creator?.id===t?.id).map(Qe=>Qe.id);fe(Le)}else fe([])},nt=le=>{fe(Le=>Le.includes(le)?Le.filter(Qe=>Qe!==le):[...Le,le])},Je=async()=>{if(ke.length===0)return;const le=t?.role==="Admin"||t?.role==="CEO"||t?.role==="MANAGER"||t?.role==="GROUP MANAGER",Le=le?"delete":"archive",Qe=le?"This action cannot be undone.":"These accounts will be hidden from your view but admins can still see them.",vt=!le;de({title:`${Le.charAt(0).toUpperCase()+Le.slice(1)} Accounts`,message:n.jsxs("span",{children:["Are you sure you want to ",Le," ",n.jsx("span",{className:"font-semibold",children:ke.length})," selected accounts? ",Qe]}),confirmLabel:`${Le.charAt(0).toUpperCase()+Le.slice(1)} ${ke.length} account(s)`,cancelLabel:"Cancel",variant:"danger",icon:vt?Uc:null,isArchive:vt,action:{type:"bulk-delete",accountIds:ke}})};ee.length===0||(J-1)*Ne+1,Math.min(J*Ne,ee.length);const Oe=()=>F(le=>Math.max(le-1,1)),ge=()=>F(le=>Math.min(le+1,pe)),Ke=le=>{b(le),je("Overview"),Me(jr(le?.status)||"PROSPECT")},G=()=>b(null),$=le=>{le.target.id==="accountModalBackdrop"&&!Y&&G()},V=()=>{r(!1),o(!1),p(null),v(Y2),c(!1),_(null)},te=le=>{le.target.id==="modalBackdrop"&&V()},Z=le=>le?new Date(le).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",Se=le=>{const{name:Le,value:Qe}=le.target;v(vt=>({...vt,[Le]:Qe}))},me=()=>{v(Y2),o(!1),p(null),r(!0)},ue=le=>{b(null),le.assigned_accs?_(le.assigned_accs):_(null),v({name:le.name||"",website:le.website||"",phone_number:le.phone_number||"",billing_address:le.billing_address||"",shipping_address:le.shipping_address||"",industry:le.industry||"",status:jr(le.status)||"PROSPECT",territory_id:le.territory?.id?String(le.territory.id):"",assigned_to:le.assigned_accs?.id?String(le.assigned_accs.id):""}),o(!0),p(le.id),r(!0)},$e=le=>{if(!le)return;const Le=t?.role==="Admin"||t?.role==="CEO"||t?.role==="MANAGER"||t?.role==="GROUP MANAGER",Qe=Le?"delete":"archive",vt=Le?"This action cannot be undone.":"This account will be hidden from your view but admins can still see it.",gt=!Le;de({title:`${Qe.charAt(0).toUpperCase()+Qe.slice(1)} Account`,message:n.jsxs("span",{children:["Are you sure you want to ",Qe," the account"," ",n.jsx("span",{className:"font-semibold",children:le.name}),"? ",vt]}),confirmLabel:`${Qe.charAt(0).toUpperCase()+Qe.slice(1)} Account`,cancelLabel:"Cancel",variant:"danger",icon:gt?Uc:null,isArchive:gt,action:{type:"delete",targetId:le.id,name:le.name}})},be=async()=>{if(!Q?.action){de(null);return}const{action:le}=Q,{type:Le,payload:Qe,targetId:vt,name:gt}=le;se(!0);try{if(Le==="create"){c(!0);const Bt=await ie.post("/accounts/admin",Qe);Ye(),q.success(`Account "${gt}" created successfully.`);const wn=N?.id||null;V(),await Ve(wn),!N&&Bt.data?.id}else if(Le==="update"){if(!vt)throw new Error("Missing account identifier for update.");c(!0),await ie.put(`/accounts/admin/${vt}`,Qe),q.success(`Account "${gt}" updated successfully.`);const Bt=N?.id&&N.id===vt?vt:null;V(),await Ve(Bt),N?.id===vt&&b(null)}else if(Le==="delete"){if(!vt)throw new Error("Missing account identifier for deletion.");const Bt=N?.id;u(vt);const ns=t?.role==="Admin"||t?.role==="CEO"||t?.role==="MANAGER"||t?.role==="GROUP MANAGER"?`Account "${gt}" deleted successfully.`:`Account "${gt}" archived successfully.`;await ie.delete(`/accounts/admin/${vt}`),q.success(ns),await Ve(Bt&&Bt!==vt?Bt:null),Bt===vt&&b(null)}else if(Le==="bulk-delete"){const{accountIds:Bt}=le,ns=t?.role==="Admin"||t?.role==="CEO"||t?.role==="MANAGER"||t?.role==="GROUP MANAGER"?"deleted":"archived";await ie.delete("/accounts/admin/bulk-delete",{data:{account_ids:Bt}}),q.success(`Successfully ${ns} ${Bt.length} accounts`),fe([]),await Ve()}}catch(Bt){console.error(Bt);const wn=Le==="create"?"Failed to create account. Please review the details and try again.":Le==="update"?"Failed to update account. Please review the details and try again.":Le==="bulk-delete"?"Failed to delete selected accounts.":"Failed to delete account. Please try again.",ns=Bt.response?.data?.detail||wn;q.error(ns),(Le==="create"||Le==="update")&&c(!1),Le==="delete"&&u(null)}finally{(Le==="create"||Le==="update")&&c(!1),Le==="delete"&&u(null),se(!1),de(null)}},We=()=>{Y||de(null)},ft=async()=>{if(!N||!De)return;const le=jr(De),Le=jr(N.status);if(le!==Le){Be(!0);try{await ie.put(`/accounts/admin/${N.id}`,{status:le}),q.success(`Account status updated to ${Q2(le)}`),w(Qe=>Qe.map(vt=>vt.id===N.id?{...vt,status:le}:vt)),b(null)}catch(Qe){console.error(Qe);const vt=Qe.response?.data?.detail||"Failed to update account status. Please try again.";q.error(vt)}finally{Be(!1)}}},[yt,Tt]=h.useState(!1),Et=le=>{le.preventDefault(),Tt(!0);const Le=x.name.trim();if(!Le){q.error("Account name is required.");return}if(!x.assigned_to){q.error("Assigned To is required.");return}const vt={name:Le,website:x.website?.trim()||null,phone_number:x.phone_number?.trim()||null,billing_address:x.billing_address?.trim()||null,shipping_address:x.shipping_address?.trim()||null,industry:x.industry?.trim()||null,parent_company:x.parent_company?.trim()||null,status:x.status||"PROSPECT",territory_id:x.territory_id?Number(x.territory_id):null,assigned_to:x.assigned_to?Number(x.assigned_to):null},gt=i&&f?"update":"create";de({title:gt==="create"?"Confirm New Account":"Confirm Update",message:gt==="create"?n.jsxs("span",{children:["Are you sure you want to create the account"," ",n.jsx("span",{className:"font-semibold",children:Le}),"?"]}):n.jsxs("span",{children:["Save changes to the account"," ",n.jsx("span",{className:"font-semibold",children:Le}),"?"]}),confirmLabel:gt==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:gt,payload:vt,targetId:f||null,name:Le}})},Gt=[{label:"Filter by Status",value:"Filter by Status"},...V2.map(le=>({label:le.label,value:le.value}))],oe=Q?.action?.type==="delete"?Q.action.targetId:null,rt=N&&(d===N.id||oe===N.id),_t=N&&d===N.id,Nt=N?wze(N.status):"",L=N?n.jsx("div",{id:"accountModalBackdrop",onClick:$,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:le=>le.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),n.jsx("button",{onClick:G,className:"text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Wn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:N.name}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${Nt}`,children:Q2(N.status)})]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:N.assigned_accs&&N.assigned_accs.id===t?.id&&N.acc_creator&&N.acc_creator.id===t?.id&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>ue(N),disabled:Q?.action?.type==="update"&&Q.action.targetId===N.id,children:[n.jsx(ia,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>$e(N),disabled:!!rt,children:_t?"Archiving...":n.jsxs(n.Fragment,{children:[n.jsx(Uc,{className:"mr-2"}),"Archive"]})})]})})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(le=>n.jsx("button",{onClick:()=>je(le),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${he===le?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:le},le))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[he==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Website:"}),n.jsx("p",{children:N.website?n.jsx("a",{href:N.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:N.website}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Industry:"}),n.jsx("p",{children:N.industry||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Parent Company:"}),n.jsx("p",{children:N.parent_company||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:N.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:N.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Billing Address:"}),n.jsx("p",{children:N.billing_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),n.jsx("p",{children:N.shipping_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:N.assigned_accs?`${N.assigned_accs.first_name} ${N.assigned_accs.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:N.acc_creator?`${N.acc_creator.first_name} ${N.acc_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:Z(N.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:Z(N.updated_at)||"N/A"})]})]})}),he==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:C.notes||"No notes available."})]})]}),he==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[ne.tasks&&ne.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ie(ye==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",ne.tasks.length,")"]})]}),ye==="tasks"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),ye==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ne.tasks.map((le,Le)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/tasks",{state:{taskID:le.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:le.subject||le.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:le.description||"No description"}),le.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",le.assigned_to.first_name," ",le.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Z(le.due_date||le.created_at)})]},`task-${Le}`))})]}),ne.meetings&&ne.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ie(ye==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ct,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",ne.meetings.length,")"]})]}),ye==="meetings"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),ye==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ne.meetings.map((le,Le)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/meetings",{state:{meetingID:le.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Ct,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:le.subject||le.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:le.description||le.location||"No description"}),le.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",le.host.first_name," ",le.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Z(le.start_time||le.created_at)})]},`meeting-${Le}`))})]}),ne.calls&&ne.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ie(ye==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(At,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",ne.calls.length,")"]})]}),ye==="calls"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),ye==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ne.calls.map((le,Le)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/calls",{state:{callID:le.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(At,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:le.subject||le.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:le.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Z(le.call_time||le.created_at)})]},`call-${Le}`))})]}),ne.contacts&&ne.contacts.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ie(ye==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(en,{className:"text-teal-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",ne.contacts.length,")"]})]}),ye==="contacts"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),ye==="contacts"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ne.contacts.map((le,Le)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/contacts",{state:{contactID:le.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-teal-600 mt-1",children:n.jsx(en,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[le.first_name?`${le.first_name} `:"",le.last_name]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:le.title||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Z(le.created_at)})]},`contact-${Le}`))})]}),ne.deals&&ne.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ie(ye==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Kt,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",ne.deals.length,")"]})]}),ye==="deals"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),ye==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ne.deals.map((le,Le)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/deals",{state:{dealID:le.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(Kt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[le.deal_id?le.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",le.name||le.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:le.stage||le.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Z(le.close_date||le.created_at)})]},`deal-${Le}`))})]}),ne.quotes&&ne.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ie(ye==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(xn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",ne.quotes.length,")"]})]}),ye==="quotes"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),ye==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ne.quotes.map((le,Le)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/quotes",{state:{quoteID:le.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(xn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(le.quote_id?le.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:le.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Z(le.presented_date)||""})]},`quote-${Le}`))})]}),(!ne||(!ne.tasks||ne.tasks.length===0)&&(!ne.meetings||ne.meetings.length===0)&&(!ne.calls||ne.calls.length===0)&&(!ne.quotes||ne.quotes.length===0)&&(!ne.deals||ne.deals.length===0)&&(!ne.contacts||ne.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/sales/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${N.name}`,relatedType1:"Account",relatedTo1:String(N.id),relatedType2:null,relatedTo2:null,assigned_to:N.assigned_accs?.id?String(N.assigned_accs.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(At,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/sales/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${N.name}`,relatedType1:"Account",relatedTo1:String(N.id),relatedType2:null,relatedTo2:null,assigned_to:N.assigned_accs?.id?String(N.assigned_accs.id):"",status:"Planned"}}}),children:[n.jsx(Ct,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/sales/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${N.name}`,relatedType1:"Account",relatedTo1:String(N.id),relatedType2:null,relatedTo2:null,assignedTo:N.assigned_accs?.id?String(N.assigned_accs.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:De||jr(N?.status)||"PROSPECT",onChange:le=>Me(le.target.value),children:V2.map(le=>n.jsx("option",{value:le.value,children:le.label},le.value))}),n.jsx("button",{onClick:ft,disabled:ve||!De||jr(De)===jr(N?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${ve||!De||jr(De)===jr(N?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:ve?"Updating...":"Update"})]})]})]})]})]})}):null,H=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[S&&n.jsx(zt,{message:"Loading accounts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Zn,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{me(),Tt(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(un,{className:"mr-2"})," Add Account"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:mt.map(le=>n.jsx(Cze,{...le},le.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Ht,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search accounts",value:X,onChange:le=>z(le.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:M,onChange:le=>W(le.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:Gt.map(le=>n.jsx("option",{value:le.value,children:le.label},le.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-center w-12",children:n.jsx("input",{type:"checkbox",checked:Ue.length>0&&Ue.filter(le=>le.assigned_accs?.id===t?.id&&le.acc_creator?.id===t?.id).every(le=>ke.includes(le.id))&&Ue.some(le=>le.assigned_accs?.id===t?.id&&le.acc_creator?.id===t?.id),onChange:Ze,className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Industry"}),n.jsx("th",{className:"py-3 px-4",children:"Territory"}),n.jsx("th",{className:"py-3 px-4",children:"Phone"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:ke.length>0?n.jsx("button",{onClick:Je,className:"text-orange-600 hover:text-orange-800 transition p-1 rounded-full hover:bg-orange-50",title:`Archive ${ke.length} selected accounts`,children:n.jsx(Uc,{size:18})}):""})]})}),n.jsx("tbody",{children:S?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"Loading accounts..."})}):ee.length>0?Ue.map(le=>n.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>{Ke(le),B(le.id)},children:[n.jsx("td",{className:"py-3 px-4 text-center",children:le.assigned_accs?.id===t?.id&&le.acc_creator?.id===t?.id?n.jsx("input",{type:"checkbox",checked:ke.includes(le.id),onChange:()=>nt(le.id),onClick:Le=>Le.stopPropagation(),className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"}):null}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:le.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:le.website||"--"})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${Nze(le.status)}`,children:Q2(le.status)})}),n.jsx("td",{className:"py-3 px-4 text-sm",children:le.industry||"--"}),n.jsx("td",{className:"py-3 px-4 text-sm",children:le.territory?.name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(At,{className:"text-gray-500"}),n.jsx("span",{children:le.phone_number||"--"})]})}),n.jsx("td",{className:"py-3 px-4"})]},le.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No accounts found."})})})]})}),n.jsx(tn,{className:"mt-4",totalItems:ee.length,pageSize:Ne,currentPage:J,onPrev:Oe,onNext:ge,onPageSizeChange:le=>{re(le),F(1)},pageSizeOptions:[10,20,30,40,50],label:"accounts"})]}),we=s?n.jsx("div",{id:"modalBackdrop",onClick:te,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:le=>le.stopPropagation(),children:[n.jsx("button",{onClick:()=>{V(),Tt(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:l||Y,children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:i?"Edit Account":"Add New Account"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Et,noValidate:!0,children:[n.jsx("div",{className:"md:col-span-2",children:n.jsx(Hm,{label:"Name",name:"name",value:x.name,onChange:Se,placeholder:"Company name",required:!0,isSubmitted:yt})}),n.jsx(P7,{label:"Parent Company",value:x.parent_company,onChange:le=>{v(Le=>({...Le,parent_company:le}))},items:U.map(le=>({id:le,name:le})),getLabel:le=>le?.name||"",placeholder:"Select parent company...",disabled:l}),n.jsx(Hm,{label:"Website",name:"website",value:x.website,onChange:Se,placeholder:"https://example.com",disabled:l}),n.jsx(Hm,{label:"Phone Number",name:"phone_number",value:x.phone_number,onChange:Se,placeholder:"09xx xxx xxxx",type:"tel",disabled:l}),n.jsx(Hm,{label:"Industry",name:"industry",value:x.industry,onChange:Se,placeholder:"Industry",disabled:l}),n.jsx(Hm,{label:"Billing Address",name:"billing_address",value:x.billing_address,onChange:Se,placeholder:"Billing address",disabled:l}),n.jsx(Hm,{label:"Shipping Address",name:"shipping_address",value:x.shipping_address,onChange:Se,placeholder:"Shipping address",disabled:l}),n.jsx(L7,{label:"Status",name:"status",value:x.status,onChange:Se,options:[{value:"",label:"Select status"},...V2],required:!0,disabled:l}),n.jsx(P7,{label:"Assigned To",value:x.assigned_to,onChange:le=>{const Le=k.find(vt=>String(vt.id)===String(le));_(Le);let Qe=null;Le&&Le.assigned_territory&&Le.assigned_territory.length===1&&(Qe=Le.assigned_territory[0].id),v(vt=>({...vt,assigned_to:le,territory_id:Qe}))},items:k||[],getLabel:le=>`${le?.first_name??""} ${le?.last_name??""} (${le?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:yt,disabled:l||k.length===0||a}),n.jsx("div",{className:"md:col-span-2",children:n.jsx(L7,{label:"Territory",name:"territory_id",value:x.territory_id||"",onChange:Se,options:[{value:"",label:T?T.assigned_territory&&T.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"},...T&&T.assigned_territory&&T.assigned_territory.map(le=>({value:String(le.id),label:le.name}))||[]],disabled:l||!T||!T.assigned_territory||T.assigned_territory.length===0})}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{V(),Tt(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:l||Y,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:l||Y,children:l?"Saving...":i?"Update Account":"Save Account"})]})]})]})}):null,Pe=Q?n.jsx(_ze,{open:!0,title:Q.title,message:Q.message,confirmLabel:Q.confirmLabel,cancelLabel:Q.cancelLabel,variant:Q.variant,onConfirm:be,onCancel:We,loading:Y,icon:Q.icon,isArchive:Q.isArchive}):null;return n.jsxs(n.Fragment,{children:[H,L,we,Pe]})}function Cze({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function Hm({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function L7({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(l=>n.jsx("option",{value:l.value,children:l.label},l.value))})]})}function P7({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1,allowFreeText:u=!1}){const f=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(Sze,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:f,allowFreeText:u})]})}function Sze({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1,allowFreeText:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),v=e.find(C=>String(C.id)===String(t)),N=v?s(v):t,b=h.useMemo(()=>{const C=f.trim().toLowerCase();return(C?e.filter(S=>(s(S)||"").toLowerCase().includes(C)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const C=w=>{x.current&&!x.current.contains(w.target)&&u(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:C=>{p(C.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsxs("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:[c&&f.trim()&&!b.some(C=>s(C).toLowerCase()===f.trim().toLowerCase())&&n.jsxs("button",{type:"button",onClick:()=>{a(f.trim()),u(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-green-50 bg-blue-50 font-medium text-blue-700",children:['+ Add "',f.trim(),'" as new parent company']}),b.length>0?b.map(C=>{const w=String(C.id),S=s(C),E=String(t)===w;return n.jsx("button",{type:"button",onClick:()=>{a(w),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${E?"bg-blue-50":""}`,children:S||"--"},w)}):!c||!f.trim()?n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"}):null]}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function _ze({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c,icon:d=null,isArchive:u=!1}){if(!e)return null;const f=u?"bg-orange-500 hover:bg-orange-600 border border-orange-400":i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsxs("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 flex items-center justify-center ${f}`,disabled:o,children:[d&&n.jsx(d,{className:"mr-2",size:18}),o?"Processing...":s]})]})]})})}const K2={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},ol=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),_i=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function Aze(){const e=bt(),t=Qt();h.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[a,s]=h.useState([]),[r,i]=h.useState(!1),[o,l]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState(null),[p,x]=h.useState(!1),[v,N]=h.useState(!1),[b,C]=h.useState(!1),[w,S]=h.useState(null),[E,k]=h.useState(!1),[A,T]=h.useState(null),[_,I]=h.useState(K2),[R,U]=h.useState(""),[D,M]=h.useState("Filter by Accounts"),[W,X]=h.useState(null),[z,Q]=h.useState("Overview"),[de,Y]=h.useState(1),[se,J]=h.useState(10),[F,Ne]=h.useState({}),[re,he]=h.useState(null),[je,De]=h.useState(null),[Me,ve]=h.useState(null),[Be,ke]=h.useState([]);h.useEffect(()=>{const ue=t.state?.contactID;ue&&(ve(ue),e(t.pathname,{replace:!0,state:{}}))},[t,e]),h.useEffect(()=>{if(Me&&a.length>0&&!r){const ue=a.find($e=>$e.id===Me);ue?f(ue):q.error("Contact not found."),ve(null)}},[Me,a,r]),h.useEffect(()=>{async function ue(){try{const $e=await ie.get("/auth/me");De($e.data)}catch($e){console.error("Failed to fetch current user",$e)}}ue()},[]);const fe=h.useCallback(async(ue=null)=>{i(!0);try{const $e=await ie.get("/contacts/admin/fetch-all"),We=[...Array.isArray($e.data)?$e.data:[]].sort((ft,yt)=>{const Tt=ft?.created_at||ft?.updated_at||0,Et=yt?.created_at||yt?.updated_at||0;return new Date(Et)-new Date(Tt)});if(s(We),ue){const ft=We.find(yt=>yt.id===ue);f(ft||null)}}catch($e){console.error($e),s([]),$e.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch contacts. Please try again later.")}finally{i(!1)}},[f]),ne=h.useCallback(async()=>{try{const ue=await ie.get("/accounts/admin/fetch-all"),be=[...Array.isArray(ue.data)?ue.data:[]].sort((We,ft)=>(We?.name||"").localeCompare(ft?.name||""));l(be)}catch(ue){console.error(ue),l([]),ue.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},[]),Ae=h.useCallback(async()=>{try{const ue=await ie.get("/users/all"),be=[...Array.isArray(ue.data)?ue.data:[]].sort((We,ft)=>ol(We).localeCompare(ol(ft)));d(be)}catch(ue){console.error(ue),d([]),ue.response?.status===403&&q.warn("Unable to load users for assignment (permission denied).")}},[]),ye=h.useCallback(async ue=>{try{const $e=await ie.get(`/activities/contact/${ue}`);Ne($e.data&&typeof $e.data=="object"?$e.data:{})}catch($e){console.error($e),$e.response?.status===404&&(console.warn("No activities found for this account."),Ne({}))}},[]);h.useEffect(()=>{fe(),ne(),Ae()},[fe,ne,Ae]);const Ie=h.useMemo(()=>{const ue=new Map;o.forEach(be=>{be?.id&&be?.name&&ue.set(String(be.id),be.name)}),a.forEach(be=>{be?.account_id&&be?.account?.name&&ue.set(String(be.account_id),be.account.name)});const $e=Array.from(ue.entries()).sort((be,We)=>be[1].localeCompare(We[1])).map(([be,We])=>({value:be,label:We}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...$e]},[o,a]),Ve=h.useMemo(()=>{const ue=R.trim().toLowerCase(),$e=D.trim();return a.filter(be=>{const We=[be?.first_name,be?.last_name,be?.email,be?.title,be?.department,be?.account?.name,be?.account?.status,be?.work_phone,be?.mobile_phone_1,be?.mobile_phone_2,be?.assigned_contact?.first_name,be?.assigned_contact?.last_name,be?.contact_creator?.first_name,be?.contact_creator?.last_name,be?.notes,_i(be?.created_at),_i(be?.updated_at)],ft=ue===""||We.some(Tt=>Tt==null?!1:Tt.toString().toLowerCase().includes(ue)),yt=$e==="Filter by Accounts"||String(be.account_id)===$e;return ft&&yt})},[a,R,D]),Te=Math.max(1,Math.ceil(Ve.length/se)||1);h.useEffect(()=>{Y(1)},[R,D]),h.useEffect(()=>{Y(ue=>{const $e=Math.max(1,Math.ceil(Ve.length/se)||1);return ue>$e?$e:ue})},[Ve.length,se]);const Fe=h.useMemo(()=>{const ue=(de-1)*se;return Ve.slice(ue,ue+se)},[Ve,de,se]),Ye=()=>Y(ue=>Math.max(ue-1,1)),B=()=>Y(ue=>Math.min(ue+1,Te)),xe=h.useMemo(()=>{if(!v||!A)return o;const ue=a.find(be=>be.id===A);return!ue||!ue.account||o.some(be=>be.id===ue.account.id)?o:[...o,ue.account]},[o,v,A,a]),_e=h.useCallback(()=>{x(!1),N(!1),T(null),I(K2),C(!1),Ue(!1)},[]),ce=ue=>{ue.target.id==="modalBackdrop"&&!b&&!E&&_e()},Ee=ue=>{const{name:$e,value:be}=ue.target;I(We=>({...We,[$e]:be}))},ae=()=>{I(K2),N(!1),T(null),x(!0),je?.role==="Sales"&&I(ue=>({...ue,assigned_to:je.id}))},He=async ue=>{if(!ue)return;const $e=await ie.get(`/accounts/get/${ue.account_id}`);I({first_name:ue.first_name||"",last_name:ue.last_name||"",account_id:$e.data.id?$e.data.id:"",title:ue.title||"",department:ue.department||"",email:ue.email||"",work_phone:ue.work_phone||"",mobile_phone_1:ue.mobile_phone_1||"",mobile_phone_2:ue.mobile_phone_2||"",notes:ue.notes||"",assigned_to:ue.assigned_to?String(ue.assigned_to):""}),N(!0),T(ue.id),x(!0),f(null)},Re=ue=>{if(!ue)return;const $e=ol(ue)||"this contact",be=je?.role==="Admin"||je?.role==="CEO"||je?.role==="MANAGER"||je?.role==="GROUP MANAGER",We=be?"delete":"archive",ft=be?"This action cannot be undone.":"This contact will be hidden from your view but admins can still see it.",yt=!be;S({title:`${We.charAt(0).toUpperCase()+We.slice(1)} Contact`,message:n.jsxs("span",{children:["Are you sure you want to ",We," ",n.jsx("span",{className:"font-semibold",children:$e}),"? ",ft]}),confirmLabel:`${We.charAt(0).toUpperCase()+We.slice(1)} Contact`,cancelLabel:"Cancel",variant:"danger",icon:yt?Uc:null,isArchive:yt,action:{type:"delete",targetId:ue.id,name:$e}})},it=()=>{const ue=Fe.filter($e=>$e.assigned_contact?.id===je?.id&&$e.contact_creator?.id===je?.id);Be.length===ue.length&&ue.length>0?ke([]):ke(ue.map($e=>$e.id))},mt=ue=>{ke($e=>$e.includes(ue)?$e.filter(be=>be!==ue):[...$e,ue])},ee=async()=>{if(Be.length===0)return;const ue=je?.role==="Admin"||je?.role==="CEO"||je?.role==="MANAGER"||je?.role==="GROUP MANAGER",$e=ue?"delete":"archive",be=ue?"This action cannot be undone.":"These contacts will be hidden from your view but admins can still see them.",We=!ue;S({title:`${$e.charAt(0).toUpperCase()+$e.slice(1)} Contacts`,message:n.jsxs("span",{children:["Are you sure you want to ",$e," ",n.jsx("span",{className:"font-semibold",children:Be.length})," selected contacts? ",be]}),confirmLabel:`${$e.charAt(0).toUpperCase()+$e.slice(1)} ${Be.length} contact(s)`,cancelLabel:"Cancel",variant:"danger",icon:We?Uc:null,isArchive:We,action:{type:"bulk-delete",contactIds:Be}})},[pe,Ue]=h.useState(!1),Ze=ue=>{ue.preventDefault(),Ue(!0);const $e=_.first_name.trim(),be=_.last_name.trim();if(!$e||!be){q.error("First name and last name are required.");return}if(!_.account_id){q.error("Account is required.");return}if(!_.assigned_to){q.error("Assigned To is required.");return}const ft=_.email?.trim();if(!ft){q.error("Email is required.");return}if(!ft.includes("@")){q.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(ft)){q.error("Please enter a valid email address.");return}const Tt={first_name:$e,last_name:be,account_id:Number(_.account_id),title:_.title?.trim()||null,department:_.department?.trim()||null,email:_.email?.trim().toLowerCase()||null,work_phone:_.work_phone?.trim()||null,mobile_phone_1:_.mobile_phone_1?.trim()||null,mobile_phone_2:_.mobile_phone_2?.trim()||null,notes:_.notes?.trim()||null,assigned_to:_.assigned_to?Number(_.assigned_to):null},Et=v&&A?"update":"create",Gt=`${$e} ${be}`.trim();S({title:Et==="create"?"Confirm New Contact":"Confirm Update",message:Et==="create"?n.jsxs("span",{children:["Are you sure you want to add"," ",n.jsx("span",{className:"font-semibold",children:Gt})," to your contacts?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:Gt}),"?"]}),confirmLabel:Et==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:Et,payload:Tt,targetId:A||null,name:Gt}})},nt=async()=>{if(!w?.action){S(null);return}const{action:ue}=w,{type:$e,payload:be,targetId:We,name:ft}=ue;k(!0);try{if($e==="create"){C(!0),await ie.post("/contacts/admin",be),q.success(`Contact "${ft}" created successfully.`);const yt=u?.id||null;_e(),await fe(yt)}else if($e==="update"){if(!We)throw new Error("Missing contact identifier for update.");C(!0),await ie.put(`/contacts/admin/${We}`,be),q.success(`Contact "${ft}" updated successfully.`);const yt=u?.id&&u.id===We?We:u?.id||null;_e(),await fe(yt),u?.id===We&&f(null)}else if($e==="delete"){if(!We)throw new Error("Missing contact identifier for deletion.");const yt=u?.id;X(We);const Et=je?.role==="Admin"||je?.role==="CEO"||je?.role==="MANAGER"||je?.role==="GROUP MANAGER"?`Contact "${ft}" deleted successfully.`:`Contact "${ft}" archived successfully.`;await ie.delete(`/contacts/admin/${We}`),q.success(Et),await fe(yt&&yt!==We?yt:null),yt===We&&f(null)}else if($e==="bulk-delete"){const{contactIds:yt}=ue;if(!yt||yt.length===0)throw new Error("No contacts provided for bulk deletion.");const Et=je?.role==="Admin"||je?.role==="CEO"||je?.role==="MANAGER"||je?.role==="GROUP MANAGER"?`Successfully deleted ${yt.length} contact(s).`:`Successfully archived ${yt.length} contact(s).`;await ie.delete("/contacts/admin/bulk-delete",{data:{contact_ids:yt}}),q.success(Et),ke([]),await fe(),f(null)}}catch(yt){console.error(yt);const Tt=$e==="create"?"Failed to create contact. Please review the details and try again.":$e==="update"?"Failed to update contact. Please review the details and try again.":$e==="bulk-delete"?"Failed to delete contacts. Please try again.":"Failed to delete contact. Please try again.",Et=yt.response?.data?.detail||Tt;q.error(Et)}finally{($e==="create"||$e==="update")&&C(!1),$e==="delete"&&X(null),k(!1),S(null)}},Je=()=>{E||S(null)},Oe=ue=>{f(ue),Q("Overview")},ge=()=>f(null),Ke=ue=>{ue.target.id==="contactModalBackdrop"&&!E&&ge()},G=w?.action?.type==="delete"?w.action.targetId:null,$=u&&(W===u.id||G===u.id),V=u&&W===u.id,te=u?n.jsx("div",{id:"contactModalBackdrop",onClick:Ke,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:ue=>ue.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),n.jsx("button",{onClick:ge,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Wn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:ol(u)||"Unnamed contact"})}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:u.assigned_contact&&u.assigned_contact.id===je?.id&&u.contact_creator&&u.contact_creator.id===je?.id&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>He(u),disabled:E||w?.action?.type==="update"&&w.action.targetId===u.id,children:[n.jsx(ia,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>Re(u),disabled:!!$,children:V?"Archiving...":n.jsxs(n.Fragment,{children:[n.jsx(Uc,{className:"mr-2"}),"Archive"]})})]})})]}),n.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:n.jsx("p",{className:"text-sm text-gray-500",children:u.account?.name||"No associated account"})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(ue=>n.jsx("button",{onClick:()=>Q(ue),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${z===ue?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:ue},ue))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[z==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact Name:"}),n.jsx("p",{children:ol(u)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Title:"}),n.jsx("p",{children:u.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:u.email?n.jsx("a",{href:`mailto:${u.email}`,className:"text-blue-600 hover:underline break-all",children:u.email}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:u.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:u.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:u.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:u.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:u.assigned_contact?`${u.assigned_contact.first_name} ${u.assigned_contact.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:u.contact_creator?`${u.contact_creator.first_name} ${u.contact_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:_i(u.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:_i(u.updated_at)||"N/A"})]})]})}),z==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:u.notes||"No notes available."})]})]}),z==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[F.tasks&&F.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(re==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",F.tasks.length,")"]})]}),re==="tasks"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),re==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:F.tasks.map((ue,$e)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:ue.subject||ue.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:ue.description||"No description"}),ue.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",ue.assigned_to.first_name," ",ue.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:_i(ue.due_date||ue.created_at)})]},`task-${$e}`))})]}),F.meetings&&F.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(re==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ct,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",F.meetings.length,")"]})]}),re==="meetings"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),re==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:F.meetings.map((ue,$e)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Ct,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:ue.subject||ue.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:ue.description||ue.location||"No description"}),ue.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",ue.host.first_name," ",ue.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:_i(ue.start_time||ue.created_at)})]},`meeting-${$e}`))})]}),F.calls&&F.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(re==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(At,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",F.calls.length,")"]})]}),re==="calls"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),re==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:F.calls.map((ue,$e)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(At,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:ue.subject||ue.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:ue.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:_i(ue.call_time||ue.created_at)})]},`call-${$e}`))})]}),F.contacts&&F.contacts.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(re==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(en,{className:"text-teal-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",F.contacts.length,")"]})]}),re==="contacts"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),re==="contacts"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:F.contacts.map((ue,$e)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-teal-600 mt-1",children:n.jsx(en,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[ue.first_name?`${ue.first_name} `:"",ue.last_name]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ue.title||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:_i(ue.created_at)})]},`contact-${$e}`))})]}),F.deals&&F.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(re==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Kt,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",F.deals.length,")"]})]}),re==="deals"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),re==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:F.deals.map((ue,$e)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(Kt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[ue.deal_id?ue.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",ue.name||ue.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:ue.stage||ue.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:_i(ue.close_date||ue.created_at)})]},`deal-${$e}`))})]}),F.quotes&&F.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(re==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(xn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",F.quotes.length,")"]})]}),re==="quotes"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),re==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:F.quotes.map((ue,$e)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(xn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(ue.quote_id?ue.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ue.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:_i(ue.presented_date)||""})]},`quote-${$e}`))})]}),(!F||(!F.tasks||F.tasks.length===0)&&(!F.meetings||F.meetings.length===0)&&(!F.calls||F.calls.length===0)&&(!F.quotes||F.quotes.length===0)&&(!F.deals||F.deals.length===0)&&(!F.contacts||F.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsx("div",{className:"flex flex-col gap-4",children:n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/sales/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${ol(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assigned_to:u?.assigned_contact?.id?String(u.assigned_contact.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(At,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!u?.email){alert("No email address available");return}const ue=encodeURIComponent(u.email),$e=encodeURIComponent(""),be=encodeURIComponent(""),We=`mailto:${ue}?subject=${$e}&body=${be}`;window.location.href=We},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Xn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/sales/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${ol(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assignedTo:u?.assigned_contact?.id?String(u.assigned_contact.id):"",status:"Planned"}}}),children:[n.jsx(Ct,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/sales/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Task for ${ol(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assignedTo:u?.assigned_contact?.id?String(u.assigned_contact.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,Z=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&n.jsx(zt,{message:"Loading contacts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Zn,{className:"mr-2 text-blue-600"})," Contacts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{ae(),Ue(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(un,{className:"mr-2"})," Add Contact"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Ht,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search contacts",value:R,onChange:ue=>U(ue.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:D,onChange:ue=>M(ue.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:Ie.map(ue=>n.jsx("option",{value:ue.value,children:ue.label},ue.value??ue.label))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-center w-12",children:n.jsx("input",{type:"checkbox",checked:Fe.length>0&&Fe.filter(ue=>ue.assigned_contact?.id===je?.id&&ue.contact_creator?.id===je?.id).every(ue=>Be.includes(ue.id))&&Fe.some(ue=>ue.assigned_contact?.id===je?.id&&ue.contact_creator?.id===je?.id),onChange:it,className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),n.jsx("th",{className:"py-3 px-4",children:"Department"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Created"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:Be.length>0?n.jsx("button",{onClick:ee,className:"text-orange-600 hover:text-orange-800 transition p-1 rounded-full hover:bg-orange-50",title:`Archive ${Be.length} selected contacts`,children:n.jsx(Uc,{size:18})}):""})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"Loading contacts..."})}):Ve.length>0?Fe.map(ue=>{const $e=[{Icon:Xn,value:ue.email,key:"email"},{Icon:At,value:ue.work_phone,key:"work_phone"},{Icon:Jc,value:ue.mobile_phone_1,key:"mobile_phone_1"},{Icon:Jc,value:ue.mobile_phone_2,key:"mobile_phone_2"}].filter(be=>!!be.value);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",children:[n.jsx("td",{className:"py-3 px-4 align-top text-center",onClick:be=>be.stopPropagation(),children:ue.assigned_contact&&ue.assigned_contact.id===je?.id&&ue.contact_creator&&ue.contact_creator.id===je?.id?n.jsx("input",{type:"checkbox",checked:Be.includes(ue.id),onChange:()=>mt(ue.id),className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300",onClick:be=>be.stopPropagation()}):null}),n.jsxs("td",{className:"py-3 px-4 align-top",onClick:()=>{Oe(ue),ye(ue.id)},children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:ol(ue)||"--"}),n.jsx("div",{className:"text-xs text-gray-500",children:ue.title||"No title"})]}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{Oe(ue),ye(ue.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[n.jsx(Ex,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"break-words",children:ue.account?.name||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{Oe(ue),ye(ue.id)},children:$e.length>0?n.jsx("div",{className:"space-y-1 text-gray-700",children:$e.map(({Icon:be,value:We,key:ft})=>{const yt=pt.createElement(be,{className:"text-gray-500 flex-shrink-0"});return n.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[yt,n.jsx("span",{children:We})]},ft)})}):n.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{Oe(ue),ye(ue.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[n.jsx(Kt,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:ue.department||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{Oe(ue),ye(ue.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(en,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:ue.assigned_contact?`${ue.assigned_contact.first_name} ${ue.assigned_contact.last_name}`:"Unassigned"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{Oe(ue),ye(ue.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[n.jsx(Ct,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"text-xs",children:_i(ue.created_at)||"--"})]})})]},ue.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No contacts found."})})})]})}),n.jsx(tn,{className:"mt-4",totalItems:Ve.length,pageSize:se,currentPage:de,onPrev:Ye,onNext:B,onPageSizeChange:ue=>{J(ue),Y(1)},pageSizeOptions:[10,20,30,40,50],label:"contacts"})]}),Se=p?n.jsx("div",{id:"modalBackdrop",onClick:ce,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:ue=>ue.stopPropagation(),children:[n.jsx("button",{onClick:()=>{_e(),Ue(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:b||E,children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:v?"Edit Contact":"Add New Contact"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Ze,noValidate:!0,children:[n.jsx(kc,{label:"First Name",name:"first_name",value:_.first_name,onChange:Ee,placeholder:"First name",required:!0,isSubmitted:pe}),n.jsx(kc,{label:"Last Name",name:"last_name",value:_.last_name,onChange:Ee,placeholder:"Last name",required:!0,isSubmitted:pe}),n.jsx(D7,{label:"Account",value:_.account_id,onChange:ue=>I($e=>({...$e,account_id:ue})),items:v?xe:o||[],getLabel:ue=>ue?.name??"",placeholder:"Search account...",disabled:b||(v?xe.length===0:o.length===0),required:!0,isSubmitted:pe}),n.jsx(D7,{label:"Assigned To",value:_.assigned_to,onChange:ue=>I($e=>({...$e,assigned_to:ue})),items:c||[],getLabel:ue=>`${ue?.first_name??""} ${ue?.last_name??""} (${ue?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:pe,disabled:b||c.length===0||je?.role==="Sales"}),n.jsx(kc,{label:"Title",name:"title",value:_.title,onChange:Ee,placeholder:"Job title",disabled:b}),n.jsx(kc,{label:"Department",name:"department",value:_.department,onChange:Ee,placeholder:"Department",disabled:b}),n.jsx(kc,{label:"Email",name:"email",type:"email",value:_.email,onChange:Ee,placeholder:"example@email.com",required:!0,isSubmitted:pe}),n.jsx(kc,{label:"Work Phone",name:"work_phone",value:_.work_phone,onChange:Ee,placeholder:"09xx xxx xxxx",disabled:b}),n.jsx(kc,{label:"Mobile Phone 1",name:"mobile_phone_1",value:_.mobile_phone_1,onChange:Ee,placeholder:"09xx xxx xxxx",disabled:b}),n.jsx(kc,{label:"Mobile Phone 2",name:"mobile_phone_2",value:_.mobile_phone_2,onChange:Ee,placeholder:"09xx xxx xxxx",disabled:b}),n.jsx(Eze,{label:"Notes",name:"notes",value:_.notes,onChange:Ee,placeholder:"Additional details...",rows:3,disabled:b,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{_e(),Ue(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:b||E,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:b||E,children:b?"Saving...":v?"Update Contact":"Save Contact"})]})]})]})}):null,me=w?n.jsx(kze,{open:!0,title:w.title,message:w.message,confirmLabel:w.confirmLabel,cancelLabel:w.cancelLabel,variant:w.variant,onConfirm:nt,onCancel:Je,loading:E,icon:w.icon,isArchive:w.isArchive}):null;return n.jsxs(n.Fragment,{children:[Z,te,Se,me]})}function kc({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${d}
        `})]})}function D7({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(Tze,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function Tze({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",N=h.useMemo(()=>{const b=u.trim().toLowerCase();return(b?e.filter(w=>(s(w)||"").toLowerCase().includes(b)):e).slice(0,o)},[e,u,s,o]);return h.useEffect(()=>{const b=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:v,placeholder:r,onFocus:()=>!i&&d(!0),onChange:b=>{f(b.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:N.length>0?N.map(b=>{const C=String(b.id),w=s(b),S=String(t)===C;return n.jsx("button",{type:"button",onClick:()=>{a(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},C)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function Eze({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function kze({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c,icon:d=null,isArchive:u=!1}){if(!e)return null;const f=u?"bg-orange-500 hover:bg-orange-600 border border-orange-400":i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsxs("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 flex items-center justify-center ${f}`,disabled:o,children:[d&&n.jsx(d,{className:"mr-2",size:18}),o?"Processing...":s]})]})]})})}const X2=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function kZ({lead:e,onBack:t,fetchLeads:a,onEdit:s,onDelete:r,setSelectedLead:i,relatedActs:o}){const l=bt(),{leadID:c}=Ul(),[d,u]=h.useState(e||null),[f,p]=h.useState("Overview"),[x,v]=h.useState(""),N=d?.status?.toUpperCase()==="QUALIFIED",[b,C]=h.useState(null),[w,S]=h.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[E,k]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[A,T]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),_=async()=>{try{if(e){u(e),v(e.status||"New");return}if(!c)return;const M=await ie.get(`/leads/get/${c}`);u(M.data),v(M.data.status||"New"),S({name:M.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:M.data.territory?.id||null,assigned_to:M.data.assigned_to?.id||null,created_by:M.data.creator?.id||null}),k({last_name:M.data.last_name||"",first_name:M.data.first_name||"",account_id:null,title:M.data.title||"",department:M.data.department||"",email:M.data.email||"",work_phone:M.data.work_phone||"",mobile_phone_1:M.data.mobile_phone_1||"",mobile_phone_2:M.data.mobile_phone_2||"",notes:"",assigned_to:M.data.assigned_to?.id||null,created_by:M.data.creator?.id||null}),T({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:M.data.assigned_to?.id||null,created_by:M.data.creator?.id||null})}catch(M){console.error(M)}};h.useEffect(()=>{e?(u(e),v(e.status||"New")):c&&_()},[c,e]);const I=async()=>{try{if(x==="Converted"&&d?.status?.toUpperCase()!=="QUALIFIED"){q.error("Lead must be Qualified before it can be converted.");return}const M=await ie.put(`/leads/${d.id}/update/status`,{status:x});q.success("Lead status updated successfully");const W={...d,status:M.data.status};u(W),i&&i(W),a&&a(),t&&t()}catch(M){console.error(M),q.error("Failed to update lead status")}},R=async M=>{const W={...w,assigned_to:M.assigned_to?.id,billing_address:M.address,shipping_address:M.address,created_by:M.creator?.id,industry:null,name:M.company_name,phone_number:M.work_phone,status:"Prospect",territory_id:M.territory?.id,website:""};console.log("Account data: ",W),console.log("Contact data: ",E),console.log("Deal data: ",A),console.log("Lead data: ",M);try{const z=(await ie.post("/accounts/convertedLead",W)).data.id,Q={...E,account_id:z,assigned_to:M.assigned_to?.id,created_by:M.creator?.id,department:M.department,email:M.email,first_name:M.first_name,last_name:M.last_name,mobile_phone_1:M.mobile_phone_1,mobile_phone_2:M.mobile_phone_2,notes:M.notes,title:M.title,work_phone:M.work_phone},Y=(await ie.post("/contacts/convertedLead",Q)).data.id,se=()=>{switch(A.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},J=A.amount&&A.amount!==""?parseFloat(A.amount):0,F={...A,account_id:z,assigned_to:M.assigned_to?.id,created_by:M.creator?.id,primary_contact_id:Y,probability:se(),stage:"Prospecting"},Ne=await ie.post("/deals/convertedLead",F),re=await ie.put(`/leads/convert/${M.id}`);i&&i(null),a(),q.success("Lead converted successfully!"),t()}catch(X){console.error("Error during conversion:",X);const z=X.response?.data?.detail||X.message||"Failed to convert lead. Please try again.";q.error(z)}},U=M=>{switch((M||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},D=M=>M.toString().toLowerCase().replace(/\b\w/g,W=>W.toUpperCase());return d?n.jsx(n.Fragment,{children:n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),n.jsx("button",{onClick:()=>{t?t():l(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Wn,{size:25})})]})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[d.first_name," ",d.last_name]}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${U(d.status)}`,children:D(d.status||"New")}),n.jsx("div",{className:"flex flex-col",children:n.jsx("button",{onClick:()=>R(d),disabled:!N,title:N?"Convert Lead":"Lead must be Qualified before converting",className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2
      ${N?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-400":"bg-gray-200 text-gray-400 cursor-not-allowed"}
    `,children:"Convert"})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",onClick:()=>{s&&d&&s(d)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(la,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",onClick:()=>{r&&d&&r(d)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(Ut,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-4 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(M=>n.jsx("button",{onClick:()=>p(M),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${f===M?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:M},M))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[f==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Name:"}),n.jsxs("p",{children:[d.first_name," ",d.last_name||"N/A"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:d.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Job Title:"}),n.jsx("p",{children:d.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:d.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:d.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:d.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:d.assigned_to?`${d.assigned_to.first_name} ${d.assigned_to.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:d.creator?`${d.creator.first_name} ${d.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:d.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Source:"}),n.jsx("p",{children:d.source||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Address:"}),n.jsx("p",{children:d.address||"N/A"})]})]})}),f==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]})]}),f==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[o.tasks&&o.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",o.tasks.length,")"]})]}),b==="tasks"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),b==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.tasks.map((M,W)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:M.subject||M.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:M.description||"No description"}),M.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned:"," ",M.assigned_to.first_name," ",M.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:X2(M.due_date||M.created_at)})]},`task-${W}`))})]}),o.meetings&&o.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ct,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",o.meetings.length,")"]})]}),b==="meetings"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),b==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.meetings.map((M,W)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Ct,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:M.subject||M.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:M.description||M.location||"No description"}),M.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",M.host.first_name," ",M.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:X2(M.start_time||M.created_at)})]},`meeting-${W}`))})]}),o.calls&&o.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(At,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",o.calls.length,")"]})]}),b==="calls"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),b==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.calls.map((M,W)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(At,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:M.subject||M.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:M.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:X2(M.call_time||M.created_at)})]},`call-${W}`))})]}),(!o||(!o.tasks||o.tasks.length===0)&&(!o.meetings||o.meetings.length===0)&&(!o.calls||o.calls.length===0)&&(!o.quotes||o.quotes.length===0)&&(!o.deals||o.deals.length===0)&&(!o.contacts||o.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{d&&l("/sales/calls",{state:{openCallModal:!0,initialCallData:{subject:d.title?`Call regarding ${d.title}`:`Call with ${d.first_name} ${d.last_name}`,relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assigned_to:d.assigned_to?.id?String(d.assigned_to.id):"",direction:"Outgoing",status:"Planned"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(At,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const M=encodeURIComponent(d.email),W=encodeURIComponent(""),X=encodeURIComponent(""),z=`mailto:${M}?subject=${W}&body=${X}`;window.location.href=z},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Xn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{d&&l("/sales/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:d.title?`Meeting regarding ${d.title}`:`Meeting with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",status:"Planned"}}})},children:[n.jsx(Ct,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{d&&l("/sales/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:d.title?`Follow up on ${d.title}`:`Follow up with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:x,onChange:M=>v(M.target.value),children:[n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),d?.status?.toUpperCase()==="QUALIFIED"&&n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]}),n.jsx("button",{onClick:I,disabled:x===d.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${x===d.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const Lze=Ff.all(),Z2=Lze.map((e,t)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${t}`})),Pze=e=>e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()),Dze=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},J2={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function Oze(){const e=bt(),{leadID:t}=Ul();Ds();const[a,s]=h.useState(null),[r,i]=h.useState(!1),[o,l]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(!1),[v,N]=h.useState(""),[b,C]=h.useState("Filter by Status"),[w,S]=h.useState(1),[E,k]=h.useState(10),[A,T]=h.useState(J2),[_,I]=h.useState(!1),[R,U]=h.useState(null),[D,M]=h.useState(!1),[W,X]=h.useState(null),[z,Q]=h.useState(!1),[de,Y]=h.useState({});h.useRef(null);const[se,J]=h.useState(!1),[F,Ne]=h.useState(null),[re,he]=h.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[je,De]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[Me,ve]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});h.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const Be=async()=>{try{const G=await ie.get("/leads/getUsers");l(G.data)}catch(G){console.error(`Error fetching users: ${G}`)}},ke=async()=>{x(!0);try{const G=await ie.get("/leads/admin/getLeads");f(G.data),console.log(G.data)}catch(G){console.error(`Error fetching leads: ${G}`)}finally{x(!1)}};h.useEffect(()=>{Be(),ke()},[]);const{user:fe}=Xt(),ne=fe?.role==="Sales";h.useEffect(()=>{r&&!_&&ne&&fe&&!A.lead_owner&&T(G=>({...G,lead_owner:fe.id}))},[r,_,ne,fe,A.lead_owner]),h.useEffect(()=>{if(t&&u.length>0&&!r&&!_){const G=u.find($=>$.id===Number(t));G&&s(G)}else!t&&!a&&s(null)},[t,u,r,_]),h.useEffect(()=>{if(F){const $=(Z=>{if(!Z)return{code:"+63",number:""};const Se=Z.match(/^(\+\d+)\s(.+)$/);if(Se)return{code:Se[1],number:Se[2]};if(Z.startsWith("+")){const me=Z.match(/^(\+\d{1,3})/);if(me)return{code:me[1],number:Z.substring(me[1].length).trim()}}return{code:"+63",number:Z}})(F.work_phone),V=[];F.work_phone&&V.push(`Work: ${F.work_phone}`),F.mobile_phone_1&&V.push(`Mobile 1: ${F.mobile_phone_1}`),F.mobile_phone_2&&V.push(`Mobile 2: ${F.mobile_phone_2}`);const te=V.length>0?V.join(" | "):"";he({name:F.company_name||"",website:"",countryCode:$.code,phone_number:$.number,combinedPhoneNumbers:te,billing_address:F.address||"",shipping_address:F.address||"",industry:"",status:"Prospect",territory_id:F.assigned_to?.territory?.id||null,assigned_to:F.assigned_to?.id||null,created_by:F.creator?.id||null}),De({last_name:F.last_name||"",first_name:F.first_name||"",account_id:null,title:F.title||"",department:F.department||"",email:F.email||"",work_phone:F.work_phone||"",mobile_phone_1:F.mobile_phone_1||"",mobile_phone_2:F.mobile_phone_2||"",notes:F.notes||"",assigned_to:F.assigned_to?.id||null,created_by:F.creator?.id||null}),ve({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:F.assigned_to?.id||null,created_by:F.creator?.id||null})}},[F]);const Ae=G=>N(G.target.value),ye=h.useMemo(()=>{const G=v.trim().toLowerCase(),$=b.trim().toUpperCase();return u.filter(V=>{const te=[V?.first_name,V?.last_name,V?.company_name,V?.title,V?.email,V?.work_phone,V?.assigned_to?`${V.assigned_to.first_name} ${V.assigned_to.last_name}`:""],Z=G===""||te.some(me=>me==null||me===""?!1:me.toString().toLowerCase().includes(G));let Se=!1;return $==="FILTER BY STATUS"?Se=(V.status?V.status.toUpperCase():"")!=="CONVERTED":Se=(V.status?V.status.toUpperCase():"")===$,Z&&Se})},[u,v,b]),Ie=Math.max(1,Math.ceil(ye.length/E)||1);h.useEffect(()=>{S(1)},[v,b]),h.useEffect(()=>{S(G=>{const $=Math.max(1,Math.ceil(ye.length/E)||1);return G>$?$:G})},[ye.length,E]);const Ve=h.useMemo(()=>{const G=(w-1)*E;return ye.slice(G,G+E)},[ye,w,E]),Te=()=>S(G=>Math.max(G-1,1)),Fe=()=>S(G=>Math.min(G+1,Ie)),Ye=h.useCallback(async G=>{try{const $=await ie.get(`/activities/lead/${G}`);Y($.data&&typeof $.data=="object"?$.data:{})}catch($){console.error($),$.response?.status===404&&(console.warn("No activities found for this account."),Y({}))}},[]),B=G=>{s(G),Ye(G.id)},xe=()=>{s(null),t&&e("/admin/leads",{replace:!0})},_e=()=>{i(!1),T(J2),I(!1),U(null),M(!1),d(null),sessionStorage.removeItem("editLeadData")},ce=G=>{G.target.id==="modalBackdrop"&&_e()},Ee=()=>{T(J2),I(!1),U(null),d(null),i(!0)},ae=G=>{if(!G){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",G),console.log("Current state - leadID:",t,"selectedLead:",a,"showModal:",r);const $=me=>{if(!me)return{code:"+63",number:""};const ue=me.match(/^(\+\d+)\s(.+)$/);return ue?{code:ue[1],number:ue[2]}:{code:"+63",number:me}},V=$(G.work_phone),te=$(G.mobile_phone_1),Z=$(G.mobile_phone_2);let Se="";if(G.assigned_to){Se=String(G.assigned_to.id);const me=o?.find(ue=>ue.id===G.assigned_to.id);d(me)}T({first_name:G.first_name||"",last_name:G.last_name||"",company_name:G.company_name||"",title:G.title||"",department:G.department||"",email:G.email||"",work_ccode:V.code,work_phone:V.number,m1_ccode:te.code,mobile_phone_1:te.number,m2_ccode:Z.code,mobile_phone_2:Z.number,address:G.address||"",notes:G.notes||"",source:G.source||"",territory_id:G.territory?.id||null,lead_owner:Se,status:G.status||"New"}),I(!0),U(G.id),a?(console.log("Coming from detail view - closing detail modal and showing edit form"),s(null),i(!0)):(console.log("Already in list view - showing modal"),i(!0))},He=G=>{if(!G){console.error("handleDelete: lead is null or undefined");return}console.log("handleDelete called with lead:",G);const $=`${G.first_name} ${G.last_name}`||"this lead";X({title:"Delete Lead",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:$}),"? This action cannot be undone."]}),confirmLabel:"Delete Lead",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:G.id,name:$}})},Re=G=>{const{name:$,value:V}=G.target;if(T(te=>({...te,[$]:V})),$==="lead_owner"){const te=o.find(Z=>Z.id===parseInt(V));d(te)}},[it,mt]=h.useState(!1),ee=G=>{if(G.preventDefault(),mt(!0),!A.last_name?.trim()){q.error("Last name is required.");return}if(!A.company_name?.trim()){q.error("Company is required.");return}if(!A.email?.trim()){q.error("Email is required.");return}if(!A.email.includes("@")){q.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(A.email)){q.error("Please enter a valid email address with a dot in the domain.");return}if(!A.lead_owner){q.error("Please assign a lead owner.");return}const V={...A,territory_id:A.territory_id?parseInt(A.territory_id):null,lead_owner:parseInt(A.lead_owner),work_phone:`${A.work_ccode} ${A.work_phone}`,mobile_phone_1:`${A.m1_ccode} ${A.mobile_phone_1}`,mobile_phone_2:`${A.m2_ccode} ${A.mobile_phone_2}`},te=_&&R?"update":"create",Z=`${A.first_name} ${A.last_name}`;X({title:te==="create"?"Confirm New Lead":"Confirm Update",message:te==="create"?n.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",n.jsx("span",{className:"font-semibold",children:Z}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:Z}),"?"]}),confirmLabel:te==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:te,payload:V,targetId:R||null,name:Z}})},pe=async()=>{if(!W?.action){X(null);return}const{action:G}=W,{type:$,payload:V,targetId:te,name:Z,lead:Se}=G;console.log(V),Q(!0);try{if($==="create")M(!0),await ie.post("/leads/create",V),q.success(`Lead "${Z}" created successfully.`),_e(),await ke();else if($==="update"){if(!te)throw new Error("Missing lead identifier for update.");M(!0);const me=await ie.put(`/leads/${te}`,V);q.success(`Lead "${Z}" updated successfully.`),a&&a.id===te&&s(null),_e(),await ke()}else if($==="delete"){if(!te)throw new Error("Missing lead identifier for deletion.");await ie.delete(`/leads/${te}`),q.success(`Lead "${Z}" deleted successfully.`),a?.id===te&&s(null),await ke()}}catch(me){console.error(me);const ue=$==="create"?"Failed to create lead. Please review the details and try again.":$==="update"?"Failed to update lead. Please review the details and try again.":"Failed to delete lead. Please try again.",$e=me.response?.data?.detail||ue;q.error($e)}finally{($==="create"||$==="update")&&M(!1),$!=="edit"&&(Q(!1),X(null))}},Ue=()=>{z||X(null)},Ze=u.filter(G=>G.status==="New").length,nt=u.filter(G=>G.status==="Contacted").length,Je=u.filter(G=>G.status==="Qualified").length,Oe=u.filter(G=>G.status==="Converted").length,ge=u.filter(G=>G.status==="Lost").length,Ke=[{title:"New",value:Ze,icon:Gn,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:nt,icon:At,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:Je,icon:ba,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:Oe,icon:Bl,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:ge,icon:Ps,color:"text-red-600",bgColor:"bg-red-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[p&&n.jsx(zt,{message:"Loading leads..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Gn,{className:"mr-2 text-blue-600"}),"Leads"]}),n.jsx("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{Ee(),mt(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(un,{className:"mr-2"})," Add Lead"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ke.map(G=>n.jsx(Ize,{...G},G.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Ht,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search leads",value:v,onChange:Ae,className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:b,onChange:G=>C(G.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Name"}),n.jsx("th",{className:"py-3 px-4",children:"Company"}),n.jsx("th",{className:"py-3 px-4",children:"Job Title"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:ye.length>0?Ve.map(G=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>B(G),children:[n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[G.first_name," ",G.last_name]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:G.company_name||"--"})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:G.title||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:G.email||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:G.assigned_to?`${G.assigned_to.first_name} ${G.assigned_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Dze(G.status||"New")}`,children:Pze(G.status||"New")})})]},G.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No leads found."})})})]})}),n.jsx(tn,{className:"mt-4",totalItems:ye.length,pageSize:E,currentPage:w,onPrev:Te,onNext:Fe,onPageSizeChange:G=>{k(G),S(1)},pageSizeOptions:[10,20,30,40,50],label:"leads"}),r&&n.jsx("div",{id:"modalBackdrop",onClick:ce,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:G=>G.stopPropagation(),children:[n.jsx("button",{onClick:()=>{_e(),mt(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:_?"Edit Lead":"Add New Lead"}),n.jsxs("form",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),n.jsx("input",{type:"text",name:"first_name",value:A.first_name,onChange:Re,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"Smith",name:"last_name",value:A.last_name,onChange:Re,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                      ${it&&!A.last_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Company ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:A.company_name,onChange:Re,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${it&&!A.company_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Job Title",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:A.title,onChange:Re,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${it&&!A.title?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),n.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:A.department,onChange:Re,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Email",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:A.email,onChange:Re,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${it&&!A.email?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"work_ccode",value:A.work_ccode,onChange:Re,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:Z2.map(G=>n.jsx("option",{value:G.code,children:G.code},G.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:A.work_phone,onChange:Re,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m1_ccode",value:A.m1_ccode,onChange:Re,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:Z2.map(G=>n.jsx("option",{value:G.code,children:G.code},G.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:A.mobile_phone_1,onChange:Re,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m2_ccode",value:A.m2_ccode,onChange:Re,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:Z2.map(G=>n.jsx("option",{value:G.code,children:G.code},G.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:A.mobile_phone_2,onChange:Re,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),n.jsx("input",{type:"text",name:"address",value:A.address,onChange:Re,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:`w-full rounded-lg ${it&&!A.lead_owner?"border border-red-400":"border border-gray-300"}`,children:n.jsx($ze,{items:Array.isArray(o)?o:[],value:A.lead_owner??"",placeholder:"Search a user...",disabled:D||ne,getLabel:G=>`${G.first_name} ${G.last_name}`,onChange:G=>{const $=o.find(te=>String(te.id)===String(G));d($);let V=null;$&&$.assigned_territory&&$.assigned_territory.length===1&&(V=$.assigned_territory[0].id),T(te=>({...te,lead_owner:G,territory_id:V}))}})})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),n.jsxs("select",{name:"territory_id",value:A.territory_id||"",onChange:Re,disabled:!c||!c.assigned_territory||c.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[n.jsx("option",{value:"",disabled:!0,children:c?c.assigned_territory&&c.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),c&&c.assigned_territory&&c.assigned_territory.map(G=>n.jsx("option",{value:G.id,children:G.name},G.id))]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),n.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:A.source,onChange:Re,children:[n.jsx("option",{value:"",disabled:!0,children:"Select Source"}),n.jsx("option",{value:"Website",children:"Website"}),n.jsx("option",{value:"Referral",children:"Referral"}),n.jsx("option",{value:"Cold call",children:"Cold call"}),n.jsx("option",{value:"Event",children:"Event"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),n.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:A.notes,onChange:Re,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("button",{type:"button",onClick:()=>{_e(),mt(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:D||z,children:"Cancel"}),n.jsx("button",{type:"submit",onClick:ee,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:D||z,children:D||z?"Processing...":_?"Update Lead":"Save Lead"})]})]})]})}),W&&n.jsx(Mze,{open:!0,title:W.title,message:W.message,confirmLabel:W.confirmLabel,cancelLabel:W.cancelLabel,variant:W.variant,onConfirm:pe,onCancel:Ue,loading:z}),a&&!r&&!_&&n.jsx(kZ,{relatedActs:de,lead:a,onBack:xe,fetchLeads:ke,setSelectedLead:s,onEdit:ae,onDelete:He})]})}function Mze({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function Ize({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function $ze({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=h.useState(!1),[d,u]=h.useState(""),f=h.useRef(null),p=e.find(N=>String(N.id)===String(t)),x=p?s(p):"",v=h.useMemo(()=>{const N=d.trim().toLowerCase();return(N?e.filter(C=>(s(C)||"").toLowerCase().includes(N)):e).slice(0,o)},[e,d,s,o]);return h.useEffect(()=>{const N=b=>{f.current&&!f.current.contains(b.target)&&c(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),h.useEffect(()=>{l||u("")},[l]),n.jsxs("div",{ref:f,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:l?d:x,placeholder:r,onFocus:()=>!i&&c(!0),onChange:N=>{u(N.target.value),l||c(!0)},className:"w-full rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:v.length>0?v.map(N=>{const b=String(N.id),C=s(N),w=String(t)===b;return n.jsx("button",{type:"button",onClick:()=>{a(b),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${w?"bg-blue-50":""}`,children:C||"--"},b)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const nb={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},Ha=({label:e,value:t,name:a,className:s=""})=>n.jsxs("div",{className:`flex flex-col ${s}`,children:[n.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),n.jsx("input",{type:"text",name:a,defaultValue:t,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),Rze=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(Ha,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),n.jsx(Ha,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),n.jsx(Ha,{label:"Industry",name:"industry",value:e.industry})]}),n.jsx(Ha,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),n.jsx(Ha,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),zze=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Ha,{label:"First Name",name:"firstName",value:e.firstName}),n.jsx(Ha,{label:"Last Name",name:"lastName",value:e.lastName}),n.jsx(Ha,{label:"Department",name:"department",value:e.department}),n.jsx(Ha,{label:"Title",name:"title",value:e.title}),n.jsx(Ha,{label:"Work Phone",name:"workPhone",value:e.workPhone}),n.jsx(Ha,{label:"Email",name:"email",value:e.email}),n.jsx(Ha,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),n.jsx(Ha,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),Uze=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Ha,{label:"Deal Name",name:"dealName",value:e.dealName}),n.jsxs("div",{className:"flex",children:[n.jsx(Ha,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),n.jsx("div",{className:"flex flex-col justify-end ml-1",children:n.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),n.jsx(Ha,{label:"Stage",name:"stage",value:e.stage}),n.jsx(Ha,{label:"Territory",name:"territory",value:e.territory})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Ha,{label:"Description",name:"description",value:e.description}),n.jsx(Ha,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function Fze({isOpen:e,onClose:t}){const[a,s]=h.useState(1),r=3;if(!e)return null;const i=()=>{a<r?s(a+1):(t(),s(1))},o=()=>{a>1&&s(a-1)},l=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],c=()=>{switch(a){case 1:return n.jsx(Rze,{data:nb});case 2:return n.jsx(zze,{data:nb});case 3:return n.jsx(Uze,{data:nb});default:return null}};return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:nb.accountName})]}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:n.jsx(VN,{className:"w-6 h-6"})})]}),n.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:l.map(d=>n.jsx("button",{onClick:()=>s(d.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${a===d.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:d.name},d.id))}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c()}),n.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[a>1&&n.jsx("button",{onClick:o,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),a<r?n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}function LZ({selectedDeal:e,onStatusUpdate:t,onClose:a}){const[s,r]=h.useState(e?.stage||""),[i,o]=h.useState(!1),l=bt(),{user:c}=Xt();h.useEffect(()=>{console.log("SalesDealsQuickAction mounted sahdksd",e),console.log("User sadad:",c)},[e,c]);const d=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"}];h.useEffect(()=>{e?.stage&&r(e.stage)},[e]);const u=async()=>{if(!e||!e.id){q.error("No deal selected");return}if(!s||s===e.stage){q.info("Please select a different stage");return}const f=e.id;o(!0);try{await ie.put(`/deals/admin/${f}`,{stage:s}),a&&a(),t&&setTimeout(async()=>{await t(!0)},100),setTimeout(()=>{q.success("Deal status updated successfully")},300)}catch(p){console.error(p);const x=p.response?.data?.detail||"Failed to update deal status";q.error(x)}finally{o(!1)}};return e?n.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{const f=e.account?.id||e.account_id;l("/sales/calls",{state:{openCallModal:!0,initialCallData:{subject:e.name?`Call regarding: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assigned_to:e.assigned_deals?.id?String(e.assigned_deals.id):"",assignedTo:e.assigned_to?.id?String(e.assigned_to.id):""}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(At,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const f=encodeURIComponent(e.contact.email),p=encodeURIComponent(""),x=encodeURIComponent(""),v=`mailto:${f}?subject=${p}&body=${x}`;window.location.href=v},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Xn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{const f=e.account?.id||e.account_id;l("/sales/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:e.name?`Meeting: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):""}}})},children:[n.jsx(Ct,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{const f=e.account?.id||e.account_id;l("/sales/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:e.name?`Task for: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:s,onChange:f=>r(f.target.value),disabled:i||e.created_by!==c?.id&&e.assigned_to!==c?.id,children:d.map(f=>n.jsx("option",{value:f.value,children:f.label},f.value))}),(e.created_by===c?.id||e.assigned_to===c?.id)&&n.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:u,disabled:i||!s||s===e.stage,children:i?"Updating...":"Update"})]})]}):null}function PZ({selectedDeal:e,show:t,onClose:a,activeTab:s,setActiveTab:r,onEdit:i,onDelete:o,onStatusUpdate:l}){const c=bt(),[d]=Ds(),u=d.get("id"),[f,p]=h.useState(e||null),[x,v]=h.useState(s||"Overview"),{user:N}=Xt();h.useEffect(()=>{console.log("SalesDealsInformation mounted",f),console.log("User:",N)},[f,N]);const b=s!==void 0?s:x;if(h.useEffect(()=>{(async()=>{if(u&&!e)try{console.log("Fetching deal from route, ID:",u);const k=(await ie.get("/deals/admin/fetch-all")).data||[];console.log("All deals fetched:",k.length);const A=k.find(T=>T.id===parseInt(u));if(console.log("Found deal:",A),A){console.log("Deal data structure:",{id:A.id,name:A.name,amount:A.amount,stage:A.stage,account:A.account,contact:A.contact,assigned_deals:A.assigned_deals,deal_creator:A.deal_creator,allKeys:Object.keys(A)});const T={...A,amount:typeof A.amount=="number"?A.amount:parseFloat(A.amount||0),probability:A.probability||0};p(T)}else console.warn("Deal not found with ID:",u)}catch(E){console.error("Error fetching deal:",E)}})()},[u,e]),!f&&!u||u&&!f)return null;const C=S=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[S]||"bg-gray-100 text-gray-700";function w(S){return S?new Date(S).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),n.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:n.jsx("button",{onClick:()=>{a?a():c(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Vt,{size:25})})})]})}),n.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[n.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:f.name}),n.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${C(f.stage)}`,children:f.stage})]}),n.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",w(f.created_at)]})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[n.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[" ",f.amount?f.amount.toLocaleString():"0"]}),n.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${f.probability}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",f.probability,"% Complete "]}),(f.created_by===N?.id||f.assigned_to===N?.id)&&n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[n.jsxs("button",{type:"button",onClick:()=>{i&&i(f)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(la,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),n.jsxs("button",{type:"button",onClick:()=>{o&&o(f)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(Ut,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(S=>n.jsx("button",{onClick:()=>{r?r(S):v(S)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${b===S?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:S},S))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[b==="Overview"&&n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Description:"})," ",f.description]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Expected Close Date:"})," ",f.close_date]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("div",{className:"mt-4 py-3 w-full",children:[n.jsxs("div",{className:"relative flex flex-col w-full",children:[n.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const S=(f?.stage||"PROSPECTING").toUpperCase(),k=(T=>T==="PROSPECTING"?0:T==="QUALIFICATION"?1:T==="PROPOSAL"?2:T==="NEGOTIATION"?3:T==="CLOSED_WON"||T==="CLOSED_LOST"?4:-1)(S);return[0,1,2,3,4].map(T=>k===T?"orange":k>T?"green":"gray").map((T,_)=>n.jsxs(pt.Fragment,{children:[n.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${T==="green"?"bg-green-500 border-green-500":T==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),_<4&&n.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},_))})()}),n.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((S,E)=>n.jsx("span",{className:"text-center flex-1 break-words",children:S},E))})]}),n.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:f.stage})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),n.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Account:"})," ",f.account?.name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Primary Contact:"})," ",f.contact?.first_name," ",f.contact?.last_name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Phone:"})," ",f.contact?.work_phone]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",f.contact?.email]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Assigned To:"})," ",f.assigned_deals?.first_name," ",f.assigned_deals?.last_name]})]})]})]}),b==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:f.description||"No notes available."})]})]}),b==="Activities"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:At,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:Ct,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((S,E)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[n.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-gray-600 mt-1",children:n.jsx(S.icon,{size:24})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-gray-900 break-words",children:S.title}),n.jsx("p",{className:"text-sm text-gray-500 break-words",children:S.desc}),n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),n.jsx("p",{className:"text-sm text-gray-700 break-words",children:S.user})]})]})]}),n.jsx("p",{className:"text-sm text-gray-500 break-words",children:S.date})]},E))]}),b==="Edit"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),n.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:f.name})]}),n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),n.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:f.description})]}),n.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),n.jsx("div",{className:"w-full lg:w-auto",children:n.jsx(LZ,{selectedDeal:f,onStatusUpdate:l,onClose:a})})]})]})]})})}function Bze(){h.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const e=bt(),t=Qt(),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Stage"),[o,l]=h.useState("Filter by Owner"),[c,d]=h.useState(null),[u,f]=h.useState("Overview"),[p,x]=h.useState(!1),[v,N]=h.useState(null),[b,C]=h.useState(!1),[w,S]=h.useState(1),[E,k]=h.useState(10),[A,T]=h.useState(!1),[_,I]=h.useState(null),[R,U]=h.useState(!1),[D,M]=h.useState(!1),[W,X]=h.useState(null),[z,Q]=h.useState([]),[de,Y]=h.useState([]),[se,J]=h.useState([]),[F,Ne]=h.useState({}),[re,he]=h.useState(null);h.useEffect(()=>{const te=t.state,Z=te?.dealID;if(Z&&!te?.openDealModal){he(Z),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(re&&v?.length>0&&!b){const te=v.find(Z=>Z.id===re);te?d(te):q.error("Deal not found."),he(null)}},[re,v,b]);const[je,De]=h.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),[Me,ve]=h.useState(null),[Be,ke]=h.useState(null),fe={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST","Closed Cancelled Stage":"CLOSED_CANCELLED"},ne=te=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost",CLOSED_CANCELLED:"Closed Cancelled"})[te]||te||"--",Ae=te=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700",CLOSED_CANCELLED:"bg-red-100 text-red-700"})[te]||"bg-gray-100 text-gray-700",ye=h.useCallback(async te=>{try{const Z=await ie.get(`/activities/deal/${te}`);Ne(Z.data&&typeof Z.data=="object"?Z.data:{})}catch(Z){console.error(Z),Z.response?.status===404&&(console.warn("No activities found for this account."),Ne({}))}},[]),Ie=h.useMemo(()=>{const te=a.trim().toLowerCase(),Z=r.trim(),Se=o.trim();return(v??[]).filter(me=>{const ue=[me?.name,me?.description,me?.account?.name,me?.contact?.first_name,me?.contact?.last_name,me?.assigned_deals?.first_name,me?.assigned_deals?.last_name],$e=te===""||ue.some(ft=>ft==null||ft===""?!1:ft.toString().toLowerCase().includes(te)),be=Z==="Filter by Stage"||Z===""||me.stage===fe[Z]||me.stage===Z,We=Se==="Filter by Owner"||Se===""||`${me.assigned_deals?.first_name||""} ${me.assigned_deals?.last_name||""}`.trim().toLowerCase()===Se.toLowerCase();return $e&&be&&We})},[v,a,r,o]),Ve=Math.max(1,Math.ceil(Ie.length/E)||1);h.useEffect(()=>{S(1)},[a,r,o]),h.useEffect(()=>{S(te=>{const Z=Math.max(1,Math.ceil(Ie.length/E)||1);return te>Z?Z:te})},[Ie.length,E]);const Te=h.useMemo(()=>{const te=(w-1)*E;return Ie.slice(te,te+E)},[Ie,w,E]),Fe=()=>S(te=>Math.max(te-1,1)),Ye=()=>S(te=>Math.min(te+1,Ve)),B=()=>{De({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),M(!1),X(null),x(!0)},xe=async()=>{C(!0);try{const te=await ie.get("/deals/admin/fetch-all"),Se=[...Array.isArray(te.data)?te.data:[]].sort((me,ue)=>{const $e=me?.created_at?new Date(me.created_at).getTime():0;return(ue?.created_at?new Date(ue.created_at).getTime():0)-$e});N(Se)}catch(te){te.response&&te.response.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch deals. Please try again later."),console.error(te)}finally{C(!1)}},_e=async()=>{try{const te=await ie.get("/accounts/admin/fetch-all");Q(Array.isArray(te.data)?te.data:[])}catch(te){console.error(te),te.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},ce=async()=>{try{const te=await ie.get("/contacts/admin/fetch-all");Y(Array.isArray(te.data)?te.data:[])}catch(te){console.error(te),te.response?.status===403&&q.warn("Unable to load contacts (permission denied).")}},Ee=async()=>{try{const te=await ie.get("/users/all");J(Array.isArray(te.data)?te.data:[])}catch(te){console.error(te),te.response?.status===403&&q.warn("Unable to load users (permission denied).")}};h.useEffect(()=>{xe(),_e(),ce(),Ee()},[]);const{user:ae}=Xt(),He=ae?.role==="Sales";h.useEffect(()=>{p&&!D&&He&&ae&&!je.assigned_to&&De(te=>({...te,assigned_to:ae.id}))},[p,D,He,ae,je.assigned_to]);const Re=async te=>{te&&(De({id:te.id||null,name:te.name||"",account_id:te.account_id?.toString()||"",primary_contact_id:te.primary_contact_id?.toString()||"",stage:te.stage||"PROPOSAL",amount:te.amount?.toString()||"",close_date:te.close_date?new Date(te.close_date).toISOString().split("T")[0]:"",assigned_to:te.assigned_to?.toString()||"",currency:te.currency||"PHP",description:te.description||""}),ve(te.account||null),ke(te.contact||null),M(!0),X(te.id),d(null),x(!0))},it=async(te=!1)=>{try{const Z=await ie.get("/deals/admin/fetch-all"),me=[...Array.isArray(Z.data)?Z.data:[]].sort((ue,$e)=>{const be=ue?.created_at?new Date(ue.created_at).getTime():0;return($e?.created_at?new Date($e.created_at).getTime():0)-be});if(N(me),!te&&c&&c.id){const ue=me.find($e=>$e.id===c.id);ue&&d({...ue})}}catch(Z){console.error("Failed to refresh deal data:",Z),await xe()}},mt=te=>{const Z=te.name.trim();if(!Z){q.error("Deal name is required.");return}if(!te.account_id){q.error("Account is required.");return}const Se=D&&W?"update":"create",me=Z;I({title:Se==="create"?"Confirm New Deal":"Confirm Update",message:Se==="create"?n.jsxs("span",{children:["Are you sure you want to create"," ",n.jsx("span",{className:"font-semibold",children:me}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:me}),"?"]}),confirmLabel:Se==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:Se,formData:te,targetId:W||null,name:me}})},ee=te=>{if(!te)return;const Z=te.name||"this deal";I({title:"Delete Deal",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:Z}),"? This action cannot be undone."]}),confirmLabel:"Delete Deal",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:te.id,name:Z}})},pe=async()=>{if(!_?.action){I(null);return}const{action:te}=_,{type:Z,formData:Se,targetId:me,name:ue}=te;U(!0);try{if(Z==="create"){T(!0);const $e={name:Se.name.trim(),account_id:parseInt(Se.account_id),primary_contact_id:Se.primary_contact_id?parseInt(Se.primary_contact_id):null,stage:Se.stage,amount:Se.amount?parseFloat(Se.amount):null,currency:Se.currency||"PHP",close_date:Se.close_date||null,description:Se.description||null,assigned_to:Se.assigned_to?parseInt(Se.assigned_to):null};await ie.post("/deals/admin/create",$e),q.success(`Deal "${ue}" created successfully.`),x(!1),await xe()}else if(Z==="update"){if(!me)throw new Error("Missing deal identifier for update.");T(!0);const $e={};Se.name!==void 0&&($e.name=Se.name.trim()),Se.account_id!==void 0&&Se.account_id!==""&&($e.account_id=parseInt(Se.account_id)),Se.primary_contact_id!==void 0&&($e.primary_contact_id=Se.primary_contact_id?parseInt(Se.primary_contact_id):null),Se.stage!==void 0&&($e.stage=Se.stage),Se.amount!==void 0&&Se.amount!==""&&($e.amount=parseFloat(Se.amount)),Se.currency!==void 0&&($e.currency=Se.currency),Se.close_date!==void 0&&($e.close_date=Se.close_date||null),Se.description!==void 0&&($e.description=Se.description||null),Se.assigned_to!==void 0&&($e.assigned_to=Se.assigned_to?parseInt(Se.assigned_to):null),await ie.put(`/deals/admin/${me}`,$e),q.success(`Deal "${ue}" updated successfully.`),x(!1),await xe()}else if(Z==="delete"){if(!me)throw new Error("Missing deal identifier for deletion.");await ie.delete(`/deals/admin/${me}`),q.success(`Deal "${ue}" deleted successfully.`),c?.id===me&&d(null),await xe()}}catch($e){console.error($e);const be=Z==="create"?"Failed to create deal. Please review the details and try again.":Z==="update"?"Failed to update deal. Please review the details and try again.":"Failed to delete deal. Please try again.",We=$e.response?.data?.detail||be;q.error(We)}finally{(Z==="create"||Z==="update")&&T(!1),U(!1),I(null)}},Ue=()=>{R||I(null)},Ze=()=>{x(!1),De({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),ve(null),ke(null),M(!1),X(null),T(!1)},nt=(v??[]).filter(te=>te.stage==="PROSPECTING").length,Je=(v??[]).filter(te=>te.stage==="QUALIFICATION").length,Oe=(v??[]).filter(te=>te.stage==="PROPOSAL").length,ge=(v??[]).filter(te=>te.stage==="NEGOTIATION").length,Ke=(v??[]).filter(te=>te.stage==="CLOSED_WON").length,G=(v??[]).filter(te=>te.stage==="CLOSED_LOST").length,$=(v??[]).filter(te=>te.stage==="CLOSED_CANCELLED").length,V=[{title:"Prospecting",value:nt,icon:Iw,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:Je,icon:ia,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:Oe,icon:Kt,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:ge,icon:Kc,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:Ke,icon:ba,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:G,icon:Ps,color:"text-red-600",bgColor:"bg-red-100"},{title:"Closed Cancelled",value:$,icon:Ps,color:"text-gray-600",bgColor:"bg-gray-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[b&&n.jsx(zt,{message:"Loading deals..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Kt,{className:"mr-2 text-blue-600"}),"Deals"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:B,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(un,{className:"mr-2"})," Add Deal"]})})]}),n.jsx("div",{className:"grid grid-cols-1 p-2 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden",children:V.map(te=>n.jsx(Gze,{...te},te.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Ht,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search deals",value:a,onChange:te=>s(te.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[n.jsxs("select",{value:r,onChange:te=>i(te.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),n.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),n.jsx("option",{value:"Qualification Stage",children:"Qualification"}),n.jsx("option",{value:"Proposal Stage",children:"Proposal"}),n.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),n.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),n.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"}),n.jsx("option",{value:"Closed Cancelled Stage",children:"Closed Cancelled"})]}),n.jsxs("select",{value:o,onChange:te=>l(te.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((v??[]).map(te=>`${te.assigned_deals?.first_name} ${te.assigned_deals?.last_name}`))].map((te,Z)=>n.jsx("option",{value:te,children:te},Z))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Stage"}),n.jsx("th",{className:"py-3 px-4",children:"Value"}),n.jsx("th",{className:"py-3 px-4",children:"Close Date"}),n.jsx("th",{className:"py-3 px-4",children:"Owner"})]})}),n.jsx("tbody",{children:Ie.length>0?Te.map(te=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{d({...te}),ye(te.id)},children:[n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:te.deal_id?te.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:te.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:te.description||"--"})]})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:te.account?.name||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:te.contact?.first_name&&te.contact?.last_name?`${te.contact.first_name} ${te.contact.last_name}`:te.contact?.first_name||te.contact?.last_name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Ae(te.stage)}`,children:ne(te.stage)})}),n.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",te.amount?.toLocaleString()||"0"]}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:te.close_date||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:te.assigned_deals?.first_name&&te.assigned_deals?.last_name?`${te.assigned_deals.first_name} ${te.assigned_deals.last_name}`:te.assigned_deals?.first_name||te.assigned_deals?.last_name||"--"})]},te.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No deals found."})})})]})}),n.jsx(tn,{className:"mt-4",totalItems:Ie.length,pageSize:E,currentPage:w,onPrev:Fe,onNext:Ye,onPageSizeChange:te=>{k(te),S(1)},pageSizeOptions:[10,20,30,40,50],label:"deals"}),p&&n.jsx(Wze,{onClose:Ze,formData:je,setFormData:De,isEditing:D,onSubmit:mt,isSubmitting:A||R,accounts:z,contacts:de,users:se,currentAccount:Me,currentContact:Be}),c&&n.jsx(PZ,{relatedActs:F,selectedDeal:c,show:!!c,onClose:()=>d(null),activeTab:u,setActiveTab:f,onEdit:Re,onDelete:ee,onStatusUpdate:it}),_&&n.jsx(Hze,{open:!0,title:_.title,message:_.message,confirmLabel:_.confirmLabel,cancelLabel:_.cancelLabel,variant:_.variant,onConfirm:pe,onCancel:Ue,loading:R})]})}function Hze({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function Gze({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function Wze({onClose:e,formData:t,setFormData:a,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,accounts:o=[],contacts:l=[],users:c=[],currentAccount:d=null,currentContact:u=null}){const{user:f}=Xt(),p=f?.role==="Sales";h.useEffect(()=>{!s&&p&&f&&!t.assigned_to&&a(w=>({...w,assigned_to:f.id}))},[s,p,f,t.assigned_to,a]);const[x,v]=h.useState(!1),N=w=>{if(w.preventDefault(),v(!0),!t.name?.trim()){q.error("Deal name is required.");return}const S=Number(t.amount);if(!t.amount||isNaN(S)||S<=0){q.error("Amount must be a number greater than 0.");return}if(!t.account_id){q.error("Please select an account.");return}if(!t.primary_contact_id){q.error("Please select a primary contact.");return}r?.(t)},b=w=>{w.target.id==="modalBackdrop"&&e()},C=h.useMemo(()=>{const w=String(t.account_id||"").trim(),S=Array.isArray(l)?l:[];return w?S.filter(E=>{const A=[E?.account_id,E?.accountId,E?.account?.id,E?.account?.account_id,E?.account?.accountId].find(T=>T!=null&&String(T).trim()!=="");return A?String(A)===w:!1}):S},[l,t.account_id]);return h.useEffect(()=>{const w=String(t.account_id||"").trim(),S=String(t.primary_contact_id||"").trim();if(!S||!w)return;C.some(k=>String(k?.id)===S)||a(k=>({...k,primary_contact_id:""}))},[t.account_id,t.primary_contact_id,C,a]),n.jsx("div",{id:"modalBackdrop",onClick:b,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:w=>w.stopPropagation(),children:[n.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Deal":"Create Deal"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:N,noValidate:!0,children:[n.jsx(eA,{label:"Deal Name",name:"name",value:t.name,onChange:w=>a({...t,name:w.target.value}),placeholder:"Enter deal name",required:!0,isSubmitted:x,className:"md:col-span-2"}),n.jsx(tA,{label:"Account",value:t.account_id||"",onChange:w=>a({...t,account_id:w}),items:o||[],getLabel:w=>w?.name??"",placeholder:"Search account...",disabled:i,currentItem:d,required:!0,isSubmitted:x}),n.jsx(tA,{label:"Primary Contact",value:t.primary_contact_id||"",onChange:w=>a({...t,primary_contact_id:w}),items:C||[],getLabel:w=>`${w?.first_name??""} ${w?.last_name??""}`.trim()||w?.email||"",placeholder:"Search contact...",disabled:i,currentItem:u,required:!0,isSubmitted:x}),n.jsx(O7,{label:"Stage",name:"stage",value:t.stage,onChange:w=>a({...t,stage:w.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}],disabled:i}),n.jsx(eA,{label:"Amount",name:"amount",type:"number",step:"0",value:t.amount,onChange:w=>a({...t,amount:w.target.value}),placeholder:"0",required:!0,isSubmitted:x}),n.jsx(O7,{label:"Currency",name:"currency",value:t.currency||"PHP",onChange:w=>a({...t,currency:w.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),n.jsx(eA,{label:"Close Date",name:"close_date",type:"date",value:t.close_date||"",onChange:w=>a({...t,close_date:w.target.value}),disabled:i}),n.jsx(tA,{label:"Assign To",value:t.assigned_to||"",onChange:w=>a({...t,assigned_to:w}),items:c||[],getLabel:w=>`${w?.first_name??""} ${w?.last_name??""}`.trim()||w?.email||"",placeholder:"Search assignee...",required:!0,disabled:i||p,className:"md:col-span-2"}),n.jsx(Vze,{label:"Description",name:"description",value:t.description,onChange:w=>a({...t,description:w.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Deal":"Save Deal"})]})]})]})})}function eA({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function O7({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))})]})}function tA({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",currentItem:c=null,required:d=!1,isSubmitted:u=!1}){const f=u&&d&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",d&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(qze,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,currentItem:c,hasError:f})]})}function qze({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,currentItem:l=null,hasError:c={hasError:c}}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),N=e.find(w=>String(w.id)===String(t))||l,b=N?s(N):"",C=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(E=>(s(E)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:b,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${c?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:C.length>0?C.map(w=>{const S=String(w.id),E=s(w),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:E||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function Vze({label:e,name:t,value:a,onChange:s,placeholder:r,required:i=!1,disabled:o=!1,className:l="",rows:c=3}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,required:i,disabled:o,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}const nA=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],aA={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:"",subtotal:0,tax_rate:0,tax_amount:0,discount_type:"",discount_value:0,discount_amount:0,currency:"PHP",items:[]},Ti=e=>{if(!e)return"Draft";const t=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[t]||"Draft"},sA=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",Yze=e=>{switch(Ti(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},Qze=e=>{switch(Ti(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},ab=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",hg=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",Kze=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const t=new Date(e);if(isNaN(t.getTime()))return"";const a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`}catch{return""}},rA=(e,t)=>{if(!e||t==null||t==="")return"";const a=Number(t);if(Number.isNaN(a))return"";const s=new Date(e);return isNaN(s.getTime())?"":(s.setDate(s.getDate()+a),s.toISOString().slice(0,10))},M7=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},I7=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},mw=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},Xze=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const s of e){const r=localStorage.getItem(s);if(r)try{const i=JSON.parse(r),o=mw(i);if(o)return o}catch{}}const t=localStorage.getItem("user_id"),a=mw(t);return a||null},Zze=e=>{if(!e)return"";const a=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""},Jze=e=>{if(!e)return"";const a=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""};function eUe(){const e=bt(),t=Qt(),{user:a}=Xt(),s=a?.company?.currency||"";h.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[r,i]=h.useState([]),[o,l]=h.useState(!1),[c,d]=h.useState([]),[u,f]=h.useState([]),[p,x]=h.useState([]),[v,N]=h.useState([]),[b,C]=h.useState(null),[w,S]=h.useState(null),[E,k]=h.useState(!1),[A,T]=h.useState(!1),[_,I]=h.useState(!1),[R,U]=h.useState(null),[D,M]=h.useState(!1),[W,X]=h.useState(null),[z,Q]=h.useState(aA),[de,Y]=h.useState(""),[se,J]=h.useState("Filter by Status"),[F,Ne]=h.useState(null),[re,he]=h.useState(1),[je,De]=h.useState(10),[Me,ve]=h.useState("Overview"),[Be,ke]=h.useState("Draft"),[fe,ne]=h.useState([]),[Ae,ye]=h.useState(null);h.useEffect(()=>{const H=t.state?.quoteID;if(H){ye(H),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(Ae&&r.length>0&&!o){const L=r.find(H=>H.id===Ae);L?S(L):q.error("Quote not found."),ye(null)}},[Ae,p,o]),h.useEffect(()=>{let L=!0;return(async()=>{const we=Xze();if(we&&L){C(we);return}try{const Pe=await ie.get("/auth/me"),le=mw(Pe?.data);if(le&&L){C(le);return}}catch{}try{const Pe=await ie.get("/users/me"),le=mw(Pe?.data);if(le&&L){C(le);return}}catch{}L&&C(null)})(),()=>{L=!1}},[]);const Ie=h.useCallback(L=>L&&u.find(we=>String(we.id)===String(L))?.name||"",[u]),Ve=h.useCallback(L=>{if(!L)return"";const H=p.find(we=>String(we.id)===String(L));return H?`${H.first_name} ${H.last_name}`.trim():""},[p]),Te=h.useCallback(L=>{if(!L)return"--";const H=c.find(we=>String(we.id)===String(L));return H?.deal_name||H?.name||`Deal #${M7(L)}`},[c]),Fe=h.useCallback(L=>{const H=c.find(le=>String(le.id)===String(L)),we=Zze(H);let Pe=Jze(H);if(!Pe&&we){const le=p.filter(Le=>String(Le.account_id||"")===String(we));if(le.length>0){const Le=[...le].sort((Qe,vt)=>{const gt=`${Qe.first_name||""} ${Qe.last_name||""}`.trim().toLowerCase(),Bt=`${vt.first_name||""} ${vt.last_name||""}`.trim().toLowerCase();return gt.localeCompare(Bt)});Pe=String(Le[0].id)}}if(we&&Pe){const le=p.find(Le=>String(Le.id)===String(Pe));le?.account_id&&String(le.account_id)!==String(we)&&(Pe="")}return{accountId:we||"",contactId:Pe||""}},[c,p]),Ye=h.useCallback(L=>{if(!L)return"--";if(L.deal?.deal_name)return L.deal.deal_name;if(L.deal?.name)return L.deal.name;const H=L.deal_id||L.deal?.id;return H?Te(H):"--"},[Te]),B=h.useCallback(L=>{if(!L)return"--";if(L.account?.name)return L.account.name;let H=L.account_id||L.account?.id;if(!H){const we=L.deal_id||L.deal?.id;we&&(H=Fe(we).accountId)}return H?Ie(H)||`Account #${H}`:"--"},[Fe,Ie]),xe=h.useCallback(L=>{if(!L)return"--";if(L.contact?.first_name||L.contact?.last_name)return`${L.contact?.first_name||""} ${L.contact?.last_name||""}`.trim()||"--";let H=L.contact_id||L.contact?.id;if(!H){const Pe=L.deal_id||L.deal?.id;Pe&&(H=Fe(Pe).contactId)}return(H?Ve(H):"")||(H?`Contact #${H}`:"--")},[Fe,Ve]),_e=h.useCallback(async(L=null)=>{l(!0);try{const H=await ie.get("/quotes/admin/fetch-all"),Pe=[...Array.isArray(H.data)?H.data:[]].sort((le,Le)=>{const Qe=le?.created_at||le?.updated_at||0,vt=Le?.created_at||Le?.updated_at||0;return new Date(vt)-new Date(Qe)});if(i(Pe),L){const le=Pe.find(Le=>Le.id===L);S(le||null)}}catch(H){console.error(H),i([]),H.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch quotes. Please try again later.")}finally{l(!1)}},[]),ce=h.useCallback(async()=>{try{const L=await ie.get("/deals/admin/fetch-all");d(Array.isArray(L.data)?L.data:[])}catch(L){console.error(L),L.response?.status===403&&q.warn("Unable to load deals (permission denied).")}},[]),Ee=h.useCallback(async()=>{try{const L=await ie.get("/accounts/admin/fetch-all");f(Array.isArray(L.data)?L.data:[])}catch(L){console.error(L),L.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},[]),ae=h.useCallback(async()=>{try{const L=await ie.get("/contacts/admin/fetch-all");x(Array.isArray(L.data)?L.data:[])}catch(L){console.error(L),L.response?.status===403&&q.warn("Unable to load contacts (permission denied).")}},[]),He=h.useCallback(async()=>{try{const L=await ie.get("/users/all");N(Array.isArray(L.data)?L.data:[])}catch(L){console.error(L),L.response?.status===403&&q.warn("Unable to load users (permission denied).")}},[]);h.useEffect(()=>{_e(),ce(),Ee(),ae(),He()},[_e,ce,Ee,ae,He]);const Re=h.useMemo(()=>{const L=de.trim().toLowerCase(),H=se.trim();return r.filter(we=>{const Pe=Ye(we),le=B(we),Le=xe(we),Qe=rA(we.presented_date,we.validity_days),vt=[we.quote_id,Pe,le,Le,we.total_amount?.toString(),we.validity_days?.toString(),we.presented_date?hg(we.presented_date):"",Qe?hg(Qe):"",we.assigned_user?.first_name,we.assigned_user?.last_name,we.creator?.first_name,we.creator?.last_name,we.status,we.notes,ab(we.created_at),ab(we.updated_at)],gt=L===""||vt.some(wn=>wn==null?!1:wn.toString().toLowerCase().includes(L)),Bt=H==="Filter by Status"||Ti(we.status)===H;return gt&&Bt})},[r,de,se,Ye,B,xe]),it=Math.max(1,Math.ceil(Re.length/je)||1);h.useEffect(()=>he(1),[de,se]),h.useEffect(()=>{he(L=>{const H=Math.max(1,Math.ceil(Re.length/je)||1);return L>H?H:L})},[Re.length,je]);const mt=h.useMemo(()=>{const L=(re-1)*je;return Re.slice(L,L+je)},[Re,re,je]),ee=()=>he(L=>Math.max(L-1,1)),pe=()=>he(L=>Math.min(L+1,it)),Ue=L=>{S(L),ve("Overview"),ke(Ti(L?.status)||"Draft")},Ze=()=>{S(null),ve("Overview")},nt=L=>{L.target.id==="quoteModalBackdrop"&&!D&&Ze()},Je=h.useCallback(()=>{k(!1),T(!1),X(null),Q(aA),I(!1)},[]),Oe=L=>{L.target.id==="modalBackdrop"&&!_&&!D&&Je()},ge=L=>{const{name:H,value:we}=L.target;if(H==="deal_id"){const{accountId:Pe,contactId:le}=Fe(we);Q(Le=>({...Le,deal_id:we,account_id:Pe,contact_id:le}));return}Q(Pe=>({...Pe,[H]:we}))},Ke=()=>{Q(aA),T(!1),X(null),k(!0)},G=L=>{if(!L)return;S(null);const H=L.deal?.id?String(L.deal.id):L.deal_id?String(L.deal_id):"",we=H?Fe(H):{accountId:"",contactId:""},Pe=L.account?.id?String(L.account.id):L.account_id?String(L.account_id):we.accountId,le=L.contact?.id?String(L.contact.id):L.contact_id?String(L.contact_id):we.contactId,Le=L.assigned_user?.id?String(L.assigned_user.id):L.assigned_to?String(L.assigned_to):"";Q({deal_id:H,account_id:Pe||"",contact_id:le||"",total_amount:L.total_amount?.toString()||"",presented_date:Kze(L.presented_date),validity_days:L.validity_days!==null&&L.validity_days!==void 0?String(L.validity_days):"",status:Ti(L.status)||"Draft",assigned_to:Le,notes:L.notes||"",subtotal:parseFloat(L.subtotal)||0,tax_rate:parseFloat(L.tax_rate)||0,tax_amount:parseFloat(L.tax_amount)||0,discount_type:L.discount_type||"",discount_value:parseFloat(L.discount_value)||0,discount_amount:parseFloat(L.discount_amount)||0,currency:L.currency||"PHP",items:Array.isArray(L.items)?L.items.map(Qe=>({id:Qe.id,item_type:Qe.item_type||"Product",name:Qe.name||"",description:Qe.description||"",sku:Qe.sku||"",variant:Qe.variant||"",unit:Qe.unit||"pcs",quantity:parseFloat(Qe.quantity)||1,unit_price:parseFloat(Qe.unit_price)||0,discount_percent:parseFloat(Qe.discount_percent)||0,discount_amount:parseFloat(Qe.discount_amount)||0,line_total:parseFloat(Qe.line_total)||0,sort_order:Qe.sort_order||0})):[]}),T(!0),X(L.id),k(!0)},$=L=>{if(L.target.checked){const H=mt.map(we=>we.id);ne(H)}else ne([])},V=L=>{ne(H=>H.includes(L)?H.filter(we=>we!==L):[...H,L])},te=L=>{if(!L)return;const H=L.quote_id||"this quote";U({title:"Delete Quote",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:H}),"? This action cannot be undone."]}),confirmLabel:"Delete Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:L.id,name:H}})},Z=async()=>{fe.length!==0&&U({title:"Delete Quotes",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:fe.length})," selected quotes? This action cannot be undone."]}),confirmLabel:`Delete ${fe.length} Quote(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",quote_ids:fe}})},[Se,me]=h.useState(!1),ue=L=>{if(L.preventDefault(),me(!0),!b){q.error("Unable to determine current user. Please log in again.");return}if(!z.deal_id){q.error("Deal is required.");return}if(!z.assigned_to){q.error("Assigned To is required.");return}const we=Fe(z.deal_id),Pe=z.items.map((gt,Bt)=>({item_type:gt.item_type||"Product",name:gt.name,description:gt.description||null,sku:gt.sku||null,variant:gt.variant||null,unit:gt.unit||null,quantity:parseFloat(gt.quantity)||1,unit_price:parseFloat(gt.unit_price)||0,discount_percent:parseFloat(gt.discount_percent)||0,sort_order:gt.sort_order??Bt})),le={deal_id:Number(z.deal_id),account_id:we.accountId?Number(we.accountId):null,contact_id:we.contactId?Number(we.contactId):null,subtotal:parseFloat(z.subtotal)||0,tax_rate:parseFloat(z.tax_rate)||0,tax_amount:parseFloat(z.tax_amount)||0,discount_type:z.discount_type||null,discount_value:parseFloat(z.discount_value)||0,discount_amount:parseFloat(z.discount_amount)||0,total_amount:parseFloat(z.total_amount)||0,currency:z.currency||"PHP",presented_date:z.presented_date||null,validity_days:z.validity_days===""?null:Number(z.validity_days),status:z.status||"Draft",assigned_to:z.assigned_to?Number(z.assigned_to):null,notes:z.notes?.trim()||null,items:Pe},Le=A&&W?"update":"create",Qe=Te(z.deal_id),vt=Le==="create"?{...le,created_by_id:Number(b)}:le;U({title:Le==="create"?"Confirm New Quote":"Confirm Update",message:Le==="create"?n.jsxs("span",{children:["Are you sure you want to create a quote for"," ",n.jsx("span",{className:"font-semibold",children:Qe}),"?"]}):n.jsxs("span",{children:["Save changes to"," ",n.jsx("span",{className:"font-semibold",children:Qe}),"?"]}),confirmLabel:Le==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:Le,payload:vt,targetId:W||null,name:Qe}})},$e=async()=>{if(!R?.action){U(null);return}const{action:L}=R,{type:H,payload:we,targetId:Pe,name:le}=L;M(!0);try{if(H==="create")I(!0),await ie.post("/quotes/admin",we),q.success("Quote created successfully."),Je(),await _e();else if(H==="update"){if(!Pe)throw new Error("Missing quote identifier for update.");I(!0),await ie.put(`/quotes/admin/${Pe}`,we),q.success("Quote updated successfully."),Je(),await _e(),w?.id===Pe&&S(null)}else if(H==="delete"){if(!Pe)throw new Error("Missing quote identifier for deletion.");const Le=w?.id;Ne(Pe),await ie.delete(`/quotes/admin/${Pe}`),q.success(`Quote "${le}" deleted successfully.`),await _e(Le&&Le!==Pe?Le:null),Le===Pe&&S(null)}else H==="bulk-delete"&&(await ie.post("/quotes/admin/bulk-delete",{quote_ids:fe}),q.success(`Successfully deleted ${fe.length} quotes`),ne([]),await _e())}catch(Le){console.error(Le);const Qe=H==="create"?"Failed to create quote. Please review the details and try again.":H==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";q.error(Qe),(H==="create"||H==="update")&&I(!1),H==="delete"&&Ne(null)}finally{(H==="create"||H==="update")&&I(!1),H==="delete"&&Ne(null),M(!1),U(null)}},be=()=>{D||U(null)},We=h.useCallback((L,H)=>{const we=L?.deal_id??L?.deal?.id??"",Pe=we?Number(we):null,le=Pe?Fe(String(Pe)):{accountId:"",contactId:""},Le=L?.account_id??L?.account?.id??le.accountId??null,Qe=L?.contact_id??L?.contact?.id??le.contactId??null,vt=L?.total_amount??0,gt=L?.assigned_to??L?.assigned_user?.id??null;return{deal_id:Pe,account_id:Le!=null&&String(Le).trim()!==""?Number(Le):null,contact_id:Qe!=null&&String(Qe).trim()!==""?Number(Qe):null,total_amount:Number(vt),presented_date:L?.presented_date||null,validity_days:L?.validity_days===""||L?.validity_days===void 0||L?.validity_days===null?null:Number(L.validity_days),status:H,assigned_to:gt!=null&&String(gt).trim()!==""?Number(gt):null,notes:L?.notes?.trim()||null}},[Fe]),ft=h.useCallback(async()=>{if(!w?.id)return;const L=Ti(Be),H=[L,L.toLowerCase()],we=async Pe=>ie.patch(`/quotes/admin/${w.id}/status`,{status:Pe},{headers:{"Content-Type":"application/json"}});try{let Pe=!1;for(const le of H)try{await we(le),Pe=!0;break}catch(Le){if(Le?.response?.status===422)continue;throw Le}if(!Pe){const le=We(w,L);if(!le.deal_id){q.error("Cannot update status: missing deal_id on selected quote.");return}if(!le.total_amount||le.total_amount<=0){q.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await ie.put(`/quotes/admin/${w.id}`,le)}q.success(`Quote status updated to ${L}`),S(null),ve("Overview"),await _e()}catch(Pe){console.error(Pe);const le=Pe?.response?.data?.message||(Pe?.response?.data?.errors?Object.values(Pe.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";q.error(le)}},[w,Be,_e,We]),yt=[{label:"Filter by Status",value:"Filter by Status"},...nA.map(L=>({label:L.label,value:L.value}))],Tt=R?.action?.type==="delete"?R.action.targetId:null,Et=w&&(F===w.id||Tt===w.id),Gt=w&&F===w.id,oe=w?n.jsx("div",{id:"quoteModalBackdrop",onClick:nt,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:L=>L.stopPropagation(),children:[n.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:n.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),n.jsx("button",{onClick:Ze,className:"text-gray-500 hover:text-white transition cursor-pointer",children:n.jsx(Wn,{size:25})})]})}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:Ye(w)}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${Qze(w.status)}`,children:sA(w.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>G(w),disabled:D||R?.action?.type==="update"&&R.action.targetId===w.id,children:[n.jsx(ia,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>te(w),disabled:!!Et,children:Gt?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Ut,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-1 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(L=>n.jsx("button",{onClick:()=>ve(L),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${Me===L?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:L},L))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Me==="Overview"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Quote ID:"}),n.jsx("p",{children:I7(w.quote_id)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Deal:"}),n.jsx("p",{children:Ye(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Account:"}),n.jsx("p",{children:B(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact:"}),n.jsx("p",{children:xe(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Total Amount:"}),n.jsx("p",{children:w.total_amount?`${s}${Number(w.total_amount).toLocaleString()}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Presented Date:"}),n.jsx("p",{children:hg(w.presented_date)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Validity Days:"}),n.jsx("p",{children:w.validity_days!==null&&w.validity_days!==void 0?w.validity_days:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),n.jsx("p",{children:hg(rA(w.presented_date,w.validity_days))||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:sA(w.status)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:w.assigned_user?`${w.assigned_user.first_name} ${w.assigned_user.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:w.creator?`${w.creator.first_name} ${w.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:ab(w.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:ab(w.updated_at)||"N/A"})]})]}),w.items&&w.items.length>0&&n.jsx("div",{className:"mt-6",children:n.jsx(od,{items:w.items,onChange:()=>{},currencySymbol:s,readOnly:!0,taxRate:parseFloat(w.tax_rate)||0,discountType:w.discount_type,discountValue:parseFloat(w.discount_value)||0})})]}),Me==="Notes"&&n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),n.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:w.notes||"No notes available."})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(At,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Quotes"}}}),children:[n.jsx(Ct,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:Be||Ti(w.status)||"Draft",onChange:L=>ke(L.target.value),children:nA.map(L=>n.jsx("option",{value:L.value,children:L.label},L.value))}),n.jsx("button",{onClick:ft,disabled:Ti(Be)===Ti(w.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Ti(Be)===Ti(w.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,rt=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[o&&n.jsx(zt,{message:"Loading quotes..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(xn,{className:"mr-2 text-blue-600"})," Quotes"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto gap-2",children:n.jsxs("button",{onClick:()=>{Ke(),me(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(un,{className:"mr-2"})," Add Quote"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Ht,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search quotes",value:de,onChange:L=>Y(L.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:se,onChange:L=>J(L.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:yt.map(L=>n.jsx("option",{value:L.value,children:L.label},L.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:mt.length>0&&fe.length===mt.length,onChange:$,className:"cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),n.jsx("th",{className:"py-3 px-4",children:"Deal"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Expiry Date"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:fe.length>0?n.jsx("button",{onClick:Z,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${fe.length} selected items`,children:n.jsx(Ut,{size:18})}):""})]})}),n.jsx("tbody",{children:o?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"Loading quotes..."})}):Re.length>0?mt.map(L=>{const H=rA(L.presented_date,L.validity_days);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>Ue(L),children:[n.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:we=>we.stopPropagation(),children:n.jsx("input",{type:"checkbox",checked:fe.includes(L.id),onChange:()=>V(L.id),className:"cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:I7(L.quote_id)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:Ye(L)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-sm text-gray-700 break-words",children:B(L)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:xe(L)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-700",children:L.total_amount?`${s}${Number(L.total_amount).toLocaleString()}`:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${Yze(L.status)}`,children:sA(L.status)})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{children:L.assigned_user?`${L.assigned_user.first_name} ${L.assigned_user.last_name}`:"Unassigned"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-500 text-xs",children:hg(H)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top text-center w-24"})]},L.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"No quotes found."})})})]})}),n.jsx(tn,{className:"mt-4",totalItems:Re.length,pageSize:je,currentPage:re,onPrev:ee,onNext:pe,onPageSizeChange:L=>{De(L),he(1)},pageSizeOptions:[10,20,30,40,50],label:"quotes"})]}),_t=E?n.jsx("div",{id:"modalBackdrop",onClick:Oe,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:L=>L.stopPropagation(),children:[n.jsx("button",{onClick:()=>{Je(),me(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:_||D,children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:A?"Edit Quote":"Add New Quote"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:ue,children:[n.jsx(z7,{label:"Deal",name:"deal_id",value:z.deal_id,onChange:L=>{const{accountId:H,contactId:we}=Fe(L);Q(Pe=>({...Pe,deal_id:L,account_id:H,contact_id:we}))},items:Array.isArray(c)?c:[],getLabel:L=>`${M7(L?.deal_id??"")} ${L?.name??""}`.trim(),placeholder:"Search deal...",required:!0,isSubmitted:Se,disabled:_||c.length===0,className:"md:col-span-2"}),n.jsx(R7,{label:"Account",value:Ie(z.account_id)||(z.account_id?`Account #${z.account_id}`:""),disabled:!0}),n.jsx(R7,{label:"Contact",value:Ve(z.contact_id)||(z.contact_id?`Contact #${z.contact_id}`:""),disabled:!0}),n.jsx("div",{className:"md:col-span-2 mt-2",children:n.jsx(od,{items:z.items,onChange:L=>Q(H=>({...H,items:L})),currencySymbol:s,readOnly:_,taxRate:z.tax_rate,discountType:z.discount_type,discountValue:z.discount_value,onTotalsChange:L=>{Q(H=>({...H,subtotal:L.subtotal,discount_amount:L.discount_amount,tax_amount:L.tax_amount,total_amount:L.total_amount}))}})}),n.jsxs("div",{className:"md:col-span-2 mt-2 p-4 bg-gray-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Pricing Settings"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Discount Type"}),n.jsxs("select",{value:z.discount_type||"",onChange:L=>Q(H=>({...H,discount_type:L.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",disabled:_,children:[n.jsx("option",{value:"",children:"No Discount"}),n.jsx("option",{value:"percentage",children:"Percentage (%)"}),n.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-600 text-xs mb-1",children:["Discount ",z.discount_type==="percentage"?"%":"Amount"]}),n.jsx("input",{type:"number",value:z.discount_value||"",onChange:L=>Q(H=>({...H,discount_value:L.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:z.discount_type==="percentage"?"100":void 0,step:"0.01",disabled:_||!z.discount_type})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Tax Rate (%)"}),n.jsx("input",{type:"number",value:z.tax_rate||"",onChange:L=>Q(H=>({...H,tax_rate:L.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:"100",step:"0.01",disabled:_})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Total Amount"}),n.jsxs("div",{className:"w-full bg-gray-100 border border-gray-300 rounded-md px-2 py-1.5 text-sm font-medium",children:[s,parseFloat(z.total_amount||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),n.jsx($7,{label:"Presented Date",name:"presented_date",type:"date",value:z.presented_date,onChange:ge,disabled:_}),n.jsx($7,{label:"Validity Days",name:"validity_days",type:"number",value:z.validity_days,onChange:ge,placeholder:"30",disabled:_}),n.jsx(z7,{label:"Assigned To",value:z.assigned_to||"",onChange:L=>Q(H=>({...H,assigned_to:L})),items:Array.isArray(v)?v:[],getLabel:L=>{const H=`${L?.first_name??""} ${L?.last_name??""}`.trim();return H?L?.role?`${H} (${L.role})`:H:L?.email||""},placeholder:"Search assignee...",required:!0,isSubmitted:Se,disabled:_}),n.jsx(tUe,{label:"Status",name:"status",value:z.status,onChange:ge,options:nA,required:!0,disabled:_,className:"md:col-span-2"}),n.jsx(aUe,{label:"Notes",name:"notes",value:z.notes,onChange:ge,placeholder:"Additional details...",rows:3,disabled:_,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{Je(),me(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:_||D,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:_||D,children:_?"Saving...":A?"Update Quote":"Save Quote"})]})]})]})}):null,Nt=R?n.jsx(sUe,{open:!0,title:R.title,message:R.message,confirmLabel:R.confirmLabel,cancelLabel:R.cancelLabel,variant:R.variant,onConfirm:$e,onCancel:be,loading:D}):null;return n.jsxs(n.Fragment,{children:[w?oe:rt,_t,Nt]})}function $7({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function R7({label:e,value:t,className:a="",disabled:s=!0}){return n.jsxs("div",{className:a,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("input",{type:"text",value:t??"",disabled:s,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function tUe({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){const c=a!=null?String(a):"",u=r.some(f=>String(f.value)===c)?c:"";return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:u,onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(f=>n.jsx("option",{value:String(f.value??""),children:f.label},f.value??f.label))})]})}function z7({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(nUe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function nUe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",N=h.useMemo(()=>{const b=u.trim().toLowerCase();return(b?e.filter(w=>(s(w)||"").toLowerCase().includes(b)):e).slice(0,o)},[e,u,s,o]);return h.useEffect(()=>{const b=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:v,placeholder:r,onFocus:()=>!i&&d(!0),onChange:b=>{f(b.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:N.length>0?N.map(b=>{const C=String(b.id),w=s(b),S=String(t)===C;return n.jsx("button",{type:"button",onClick:()=>{a(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},C)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function aUe({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function sUe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function rUe(){const{userRole:e}=Bs();return n.jsx(Dj,{currentUserRole:e,currentUserId:null})}function iUe(){h.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,t]=h.useState(null),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Actions"),[o,l]=h.useState(1),[c,d]=h.useState(10),u=async()=>{try{const w=await ie.get("/logs/read-all");t(w.data)}catch(w){console.error("Error fetching audit logs:",w)}};h.useEffect(()=>{u()},[]);const f=h.useMemo(()=>{if(!Array.isArray(e))return[];const w=a.trim().toLowerCase(),S=r?.toUpperCase?.()||"ALL";return e.filter(k=>{const A=k.timestamp?new Date(k.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",T=`${k.entity_type||""} ${k.entity_name||k.entity_details?.name||k.entity_details?.title||k.entity_id||""}`,_=`${k.logger?.first_name||""} ${k.logger?.last_name||""}`,I=[A,_,k.action,k.entity_type,T,k.description],R=w===""||I.some(D=>D==null?!1:D.toString().toLowerCase().includes(w)),U=S==="FILTER BY ACTIONS"||(k.action||"").toUpperCase()===S;return R&&U}).sort((k,A)=>{const T=k.timestamp?new Date(k.timestamp).getTime():0;return(A.timestamp?new Date(A.timestamp).getTime():0)-T})},[e,a,r]),p=Math.max(1,Math.ceil(f.length/c)||1);h.useEffect(()=>{l(1)},[a,r]),h.useEffect(()=>{l(w=>{const S=Math.max(1,Math.ceil(f.length/c)||1);return w>S?S:w})},[f.length,c]);const x=h.useMemo(()=>{const w=(o-1)*c;return f.slice(w,w+c)},[f,o,c]);f.length===0||(o-1)*c+1,Math.min(o*c,f.length);const v=()=>l(w=>Math.max(w-1,1)),N=()=>l(w=>Math.min(w+1,p)),b=()=>{if(!f.length){Px.error("No logs to export!");return}const w=["Timestamp","User","Action","Resource","Details"],S=f.map(_=>[new Date(_.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${_.logger?.first_name||""} ${_.logger?.last_name||""}`.trim(),_.action,`${_.entity_type}: ${_.entity_id}`,_.description||""]),E=[w.join(","),...S.map(_=>_.map(I=>`"${String(I).replace(/"/g,'""')}"`).join(","))].join(`
`),k=new Blob([E],{type:"text/csv;charset=utf-8;"}),A=URL.createObjectURL(k),T=document.createElement("a");T.href=A,T.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(T),T.click(),document.body.removeChild(T),URL.revokeObjectURL(A)},C=w=>{switch((w||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&n.jsx(zt,{message:"Loading audit logs..."}),n.jsx(Lx,{toastOptions:{duration:1e3}}),n.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[n.jsx(Ct,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),n.jsxs("p",{className:"text-sm text-blue-700",children:[n.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ws,{className:"text-blue-600",size:20}),n.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:b,children:[n.jsx(Fl,{className:"mr-2"}),"Export Logs"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[n.jsx(Ht,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search audit logs",value:a,onChange:w=>s(w.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:r,onChange:w=>i(w.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),n.jsx("option",{value:"CREATE",children:"CREATE"}),n.jsx("option",{value:"DELETE",children:"DELETE"}),n.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),n.jsx("th",{className:"py-3 px-4",children:"User"}),n.jsx("th",{className:"py-3 px-4",children:"Action"}),n.jsx("th",{className:"py-3 px-4",children:"Resource"}),n.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),n.jsx("tbody",{children:Array.isArray(f)&&f.length>0?x.map((w,S)=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(w.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.name}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${C(w.action)}`,children:w.action})}),n.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[w.entity_type,": ",w.entity_id]}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.description})]},S)):n.jsx("tr",{children:n.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),n.jsx(tn,{className:"mt-4",totalItems:f.length,pageSize:c,currentPage:o,onPrev:v,onNext:N,onPageSizeChange:w=>{d(w),l(1)},pageSizeOptions:[10,20,30,40,50],label:"logs"})]})}const U7=["Not started","In progress","Deferred","Completed"],F7={NOT_STARTED:"Not started","NOT STARTED":"Not started","TO DO":"Not started",IN_PROGRESS:"In progress","IN PROGRESS":"In progress",COMPLETED:"Completed",DEFERRED:"Deferred","Not started":"Not started","In progress":"In progress",Completed:"Completed",Deferred:"Deferred","In Progress":"In progress","To Do":"Not started",Review:"Deferred"},DZ=e=>e&&(F7[e]||F7[String(e).toUpperCase()])||"Not started",oUe=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const a=t.getTimezoneOffset();return new Date(t.getTime()-a*60*1e3).toISOString().slice(0,16)},B7=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},lUe=e=>{const t=e.subject?.trim()??"",a=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),DZ(e.status);let r=null,i=null,o=null,l=null,c=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?o=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Quote"&&e.relatedTo2&&(c=Number(e.relatedTo2)));const d=e.assignedTo?Number(e.assignedTo):null,u=o||l||i||r,f=o?"Contact":l?"Deal":i?"Account":r?"Lead":c?"Quote":null;return{title:t,description:a,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:d,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:o,deal_id:l,quote_id:c,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:u,related_type:f}},cUe=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",a=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",o=W=>{if(!W)return"";const X=String(W).split("-");return X.length===3?`${X[0]}-${X[2]}`:String(W)},l=()=>e.lead?.id||e.lead_id,c=()=>e.account?.id||e.account_id,d=()=>e.contact?.id||e.contact_id,u=()=>e.deal?.id||e.deal_id,f=()=>e.quote?.id||e.quote_id,p=()=>e.task_assign_to?.id||e.assigned_to,x=()=>e.lead?.title||e.lead_id,v=()=>e.account?.name||e.account_id,N=()=>i||e.contact_id,b=()=>e.deal?.name||e.deal_id,C=()=>o(e.quote?.quote_id)||e.id;let w="Lead",S="",E="",k="",A="Lead",T="",_="",I="";const R=c(),U=v(),D=l(),M=x();if(R){w="Account",A="Account",T=U,S=String(R);const W=d(),X=u(),z=N(),Q=b(),de=f(),Y=C();W?(E="Contact",_="Contact",I=z,k=String(W)):X?(_="Deal",E="Deal",I=Q,k=String(X)):de&&(_="Quote",E="Quote",I=Y,k=String(de))}else D?(A="Lead",T=M,w="Lead",S=String(D)):e.related_type==="Account"&&(w="Account",S=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:DZ(e.status),dueDate:s,dateAssigned:r,assignedToId:p()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:a,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:A,relatedTo1Text:T,relatedType2Text:_,relatedTo2Text:I,subject:e.title,relatedType1:w,relatedTo1:S,relatedType2:E,relatedTo2:k}};function dUe(){h.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=Xt(),[a,s]=h.useState("board"),[r,i]=h.useState(!1),[o,l]=h.useState(null),[c,d]=h.useState(!1),[u,f]=h.useState([]),[p,x]=h.useState(!0),[v,N]=h.useState(""),[b,C]=h.useState("Filter by Status"),[w,S]=h.useState("Filter by Priority"),[E,k]=h.useState([]),[A,T]=h.useState(1),[_,I]=h.useState(10),[R,U]=h.useState(null),[D,M]=h.useState(!1),[W,X]=h.useState([]),z=bt(),Q=Qt(),[de,Y]=h.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""}),[se,J]=h.useState(null);h.useEffect(()=>{const B=Q.state?.openTaskModal,xe=Q.state?.initialTaskData,_e=Q.state?.taskID;B?(i(!0),xe&&Y(ce=>({...ce,...xe})),z(Q.pathname,{replace:!0,state:{}})):_e&&(J(_e),z(Q.pathname,{replace:!0,state:{}}))},[Q,z]),h.useEffect(()=>{if(se&&u.length>0&&!p){const B=u.find(xe=>xe.id===se);B?he(B,!0):q.error("Task not found."),J(null)}},[se,u,p]);const F=async()=>{try{const B=await ie.get("/users/all");k(Array.isArray(B.data)?B.data:[])}catch(B){console.error("Failed to fetch users:",B),q.error("Failed to fetch users.")}},Ne=async()=>{try{x(!0);const B=await ie.get("/tasks/all"),_e=(Array.isArray(B.data)?B.data:[]).map(cUe);_e.sort((ce,Ee)=>{const ae=ce.createdAt?new Date(ce.createdAt):0;return(Ee.createdAt?new Date(Ee.createdAt):0)-ae}),f(_e),a==="list"&&T(1)}catch(B){console.error("Failed to load tasks:",B),q.error("Failed to load tasks.")}finally{x(!1)}};h.useEffect(()=>{if(!t&&e){F(),Ne();const B=Jw(e.id),xe=new WebSocket(B);return xe.onopen=()=>{console.log(" Connected to task notifications")},xe.onmessage=_e=>{try{const ce=JSON.parse(_e.data);ce.type==="task_status_updated"&&(q.info(` ${ce.message}`,{position:"top-right",autoClose:4e3}),Ne())}catch(ce){console.error("Error parsing notification:",ce)}},xe.onerror=_e=>{console.error(" WebSocket error:",_e)},xe.onclose=()=>{console.log(" Disconnected from task notifications")},()=>{xe.readyState===WebSocket.OPEN&&xe.close()}}},[t,e]);const re=()=>{l(null),Y({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},he=(B=null,xe=!1)=>{l(B),d(xe),B?Y({id:B.id,subject:B.title||"",description:B.description||"",priority:B.priority||"Normal",status:B.status||"Not started",dueDate:oUe(B.dueDate),assignedTo:B.assignedToId?String(B.assignedToId):"",notes:B.notes||"",relatedType1Text:B.relatedType1Text||"",relatedTo1Text:B.relatedTo1Text||"",relatedType2Text:B.relatedType2Text||"",relatedTo2Text:B.relatedTo2Text||"",relatedType1:B.relatedType1||"",relatedTo1:B.relatedTo1||"",relatedType2:B.relatedType2||"",relatedTo2:B.relatedTo2||""}):re(),i(!0)},je=()=>{i(!1),l(null),d(!1),re()},De=async B=>{const xe=lUe(B);try{o&&!c?(await ie.put(`/tasks/${o.id}`,xe),q.success("Task updated successfully.")):(await ie.post("/tasks/create",xe),q.success("Task created successfully.")),i(!1),await Ne()}catch(_e){console.error("Failed to save task:",_e);const ce=_e.response?.data?.detail||"Failed to save task.";q.error(ce)}},Me=B=>{B&&U({title:"Delete Task",message:n.jsxs(n.Fragment,{children:["Are you sure you want to delete ",n.jsx("span",{className:"font-semibold",children:B.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:B.id}})},ve=()=>{if(ye.every(B=>W.includes(B.id)))X(W.filter(B=>!ye.map(xe=>xe.id).includes(B)));else{const B=ye.map(xe=>xe.id);X([...new Set([...W,...B])])}},Be=B=>{X(xe=>xe.includes(B)?xe.filter(_e=>_e!==B):[...xe,B])},ke=async()=>{W.length!==0&&U({title:"Delete Tasks",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:W.length})," selected tasks? This action cannot be undone."]}),confirmLabel:`Delete ${W.length} Task(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",task_ids:W}})},fe=async()=>{if(!R?.action){U(null);return}const{action:B}=R;M(!0);try{B.type==="delete"?(await ie.delete(`/tasks/${B.targetId}`),q.success("Task deleted successfully."),await Ne()):B.type==="bulk-delete"&&(await ie.delete("/tasks/admin/bulk-delete",{data:{task_ids:B.task_ids}}),q.success(`Successfully deleted ${B.task_ids.length} tasks`),X([]),await Ne())}catch(xe){console.error("Task action failed:",xe),q.error("Failed to delete task.")}finally{M(!1),U(null)}},ne=()=>{D||U(null)},Ae=h.useMemo(()=>{const B=v.trim().toLowerCase();return[...u].sort((_e,ce)=>{const Ee=_e.createdAt?new Date(_e.createdAt):0;return(ce.createdAt?new Date(ce.createdAt):0)-Ee}).filter(_e=>{const ce=B===""||_e.title?.toLowerCase().includes(B)||_e.description?.toLowerCase().includes(B)||_e.assignedToName?.toLowerCase().includes(B)||_e.createdBy?.toLowerCase().includes(B),Ee=b==="Filter by Status"||_e.status===b,ae=w==="Filter by Priority"||_e.priority===w;return ce&&Ee&&ae})},[u,v,b,w]);h.useEffect(()=>{T(1)},[v,b,w,a,_]),h.useEffect(()=>{if(a==="list"){const B=Ae.length===0?1:Math.ceil(Ae.length/_);A>B&&T(B)}},[Ae.length,A,a,_]);const ye=h.useMemo(()=>{if(a==="board")return Ae;const B=(A-1)*_;return Ae.slice(B,B+_)},[Ae,A,a,_]),Ie=h.useMemo(()=>{const B=new Date;return[{title:"To Do",value:u.filter(xe=>xe.status==="Not started").length,icon:zs,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:u.filter(xe=>xe.status==="In progress").length,icon:Ri,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:u.filter(xe=>xe.status==="Completed").length,icon:ba,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:u.filter(xe=>xe.dueDate&&new Date(xe.dueDate)<B&&xe.status!=="Completed").length,icon:zf,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:u.filter(xe=>xe.priority==="High").length,icon:Bl,color:"text-orange-600",bgColor:"bg-orange-100"}]},[u]),Ve=B=>B.dueDate&&new Date(B.dueDate)<new Date&&B.status!=="Completed",Te=B=>{switch(B.status){case"Not started":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Deferred":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},Fe=B=>{switch(B){case"Not started":return"bg-blue-100 text-blue-700";case"In progress":return"bg-purple-100 text-purple-700";case"Deferred":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},Ye=B=>{switch(B){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&n.jsx(zt,{message:"Loading tasks..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(Ri,{className:"text-blue-600"})," Tasks Board"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:()=>he(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[n.jsx(un,{})," Create Task"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ie.map(B=>n.jsx(uUe,{...B},B.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Ht,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search tasks",value:v,onChange:B=>N(B.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{value:b,onChange:B=>C(B.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Status"}),U7.map(B=>n.jsx("option",{children:B},B))]}),n.jsxs("select",{value:w,onChange:B=>S(B.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Priority"}),n.jsx("option",{children:"High"}),n.jsx("option",{children:"Normal"}),n.jsx("option",{children:"Low"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${a==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),n.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${a==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&a==="board"&&(Ae.length>0?n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:U7.map(B=>{const xe=ye.filter(_e=>_e.status===B);return n.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative rounded-md",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),n.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:B}),n.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:xe.length})]}),n.jsx("div",{className:`space-y-3 ${xe.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:xe.length>0?xe.map(_e=>n.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${Te(_e)}`,onClick:()=>he(_e,!0),children:[n.jsxs("div",{className:"text-left flex-1",children:[n.jsx("p",{className:"font-medium text-gray-800 text-sm",children:_e.title}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",_e.priority]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",_e.assignedToName]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",n.jsx("span",{className:Ve(_e)?"text-red-600":"text-gray-600",children:_e.dateAssigned?B7(_e.dateAssigned):""})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[n.jsx("button",{type:"button",onClick:ce=>{ce.stopPropagation(),he(_e)},className:"text-blue-500 hover:text-blue-700",children:n.jsx(la,{})}),n.jsx("button",{type:"button",onClick:ce=>{ce.stopPropagation(),Me(_e)},className:"text-red-500 hover:text-red-700",children:n.jsx(Ut,{})})]})]},_e.id)):n.jsx("div",{className:"text-center py-10 text-gray-500",children:"No tasks"})})]},B)})}):n.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No tasks found."})),!p&&!t&&a==="list"&&n.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:ye.length>0&&ye.every(B=>W.includes(B.id)),onChange:ve})}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),n.jsx("th",{className:"py-3 px-4 font-medium text-center w-24",children:W.length>0?n.jsx("button",{onClick:ke,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${W.length} selected tasks`,children:n.jsx(Ut,{size:18})}):""})]})}),n.jsx("tbody",{children:ye.length>0?ye.map(B=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",children:[n.jsx("td",{className:"py-3 px-4",onClick:xe=>xe.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:W.includes(B.id),onChange:()=>Be(B.id)})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",onClick:()=>he(B,!0),children:B.title}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>he(B,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Fe(B.status||"Not started")}`,children:B.status||"Not started"})}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>he(B,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Ye(B.priority||"Low")}`,children:B.priority||"Low"})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",onClick:()=>he(B,!0),children:B.assignedToName||"Unassigned"}),n.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${Ve(B)?"text-red-600 font-medium":""}`,onClick:()=>he(B,!0),children:B.dateAssigned?B7(B.dateAssigned):""}),n.jsx("td",{})]},B.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No tasks found."})})})]})})}),!p&&!t&&a==="list"&&n.jsx(tn,{className:"mt-6",totalItems:Ae.length,pageSize:_,currentPage:Ae.length===0?0:A,onPrev:()=>T(B=>Math.max(B-1,1)),onNext:()=>T(B=>Math.min(B+1,Math.max(1,Math.ceil(Ae.length/_)||1))),onPageSizeChange:B=>{I(B),T(1)},pageSizeOptions:[10,20,30,40,50],label:"tasks"}),n.jsx(n0,{isOpen:r,onClose:je,onSave:De,onEdit:()=>d(!1),setFormData:Y,formData:de,isEditing:!c&&!!o,viewMode:c,users:E,currentUser:e,onDelete:Me}),R&&n.jsx(mUe,{open:!0,title:R.title,message:R.message,confirmLabel:R.confirmLabel,cancelLabel:R.cancelLabel,variant:R.variant,onConfirm:fe,onCancel:ne,loading:D})]})}function uUe({icon:e,title:t,value:a,color:s,bgColor:r,onClick:i}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function mUe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r,variant:i,loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const OZ=e=>e?e.toUpperCase():"",sb=e=>{const t=OZ(e);return t==="PLANNED"||t==="IN PROGRESS"?"PLANNED":t==="HELD"||t==="DONE"?"HELD":t==="NOT_HELD"||t==="NOT HELD"?"NOT_HELD":"PLANNED"},fUe=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},hUe=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},gUe=e=>{const t=OZ(e);switch(t==="PLANNED"?"PENDING":t==="HELD"?"COMPLETED":t==="NOT_HELD"?"CANCELLED":t){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},iA={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},pUe=()=>{const e=bt(),t=Qt(),{user:a}=Xt(),s=a?.role==="Sales",[r]=Ds(),i=r.get("id"),o=t.pathname==="/admin/meetings/info";h.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[l,c]=h.useState([]),[d,u]=h.useState(!1),[f,p]=h.useState([]),[x,v]=h.useState(""),[N,b]=h.useState("Filter by Status"),[C,w]=h.useState(!1),[S,E]=h.useState(null),[k,A]=h.useState(1),[T,_]=h.useState(10),[I,R]=h.useState(iA),[U,D]=h.useState(!1),[M,W]=h.useState(null),[X,z]=h.useState(!1),[Q,de]=h.useState(null),[Y,se]=h.useState(!1),[J,F]=h.useState(null);h.useEffect(()=>{C&&!U&&s&&a&&!I.assignedTo&&R(ye=>({...ye,assignedTo:a.id}))},[C,U,a,s]),h.useEffect(()=>{const ye=t.state?.openMeetingModal,Ie=t.state?.initialMeetingData?.relatedTo||r.get("id"),Ve=t.state?.meetingID;ye||Ie?(w(!0),t.state?.initialMeetingData&&R(Te=>({...Te,...t.state.initialMeetingData})),e(t.pathname,{replace:!0,state:{}})):Ve&&(F(Ve),e(t.pathname,{replace:!0,state:{}}))},[t,r,e]),h.useEffect(()=>{if(J&&l.length>0&&!d){const ye=l.find(Ie=>Ie.id===J);ye?E(ye):q.error("Meeting not found."),F(null)}},[J,l,d]);const Ne=async()=>{if(i&&o){const ye=sessionStorage.getItem("meetingDetailData");if(ye)try{const Ie=JSON.parse(ye);if(Ie.id===parseInt(i)){E(Ie),sessionStorage.removeItem("meetingDetailData");return}}catch(Ie){console.error(Ie)}}u(!0);try{const ye=await ie.get("/meetings/admin/fetch-all"),Ve=[...Array.isArray(ye.data)?ye.data:[]].sort((Te,Fe)=>{const Ye=Te?.createdAt?new Date(Te.createdAt).getTime():0;return(Fe?.createdAt?new Date(Fe.createdAt).getTime():0)-Ye});if(c(Ve),i&&!S){const Te=Ve.find(Fe=>Fe.id===parseInt(i));Te&&E(Te)}}catch{q.error("Failed to load meetings.")}finally{u(!1)}},re=async()=>{try{const ye=await ie.get("/users/all");p(Array.isArray(ye.data)?ye.data:[])}catch(ye){console.error(ye)}};h.useEffect(()=>{Ne(),re()},[]);const he=ye=>v(ye.target.value),je=h.useMemo(()=>{const ye=x.trim().toLowerCase(),Ie=N.trim().toUpperCase();return l.filter(Ve=>{const Te=[Ve?.activity,Ve?.description,Ve?.relatedTo,Ve?.assignedTo],Fe=ye===""||Te.some(B=>B&&B.toString().toLowerCase().includes(ye)),Ye=Ie==="FILTER BY STATUS"||sb(Ve.status||"PENDING")===Ie;return Fe&&Ye})},[l,x,N]),De=h.useMemo(()=>{const ye=(k-1)*T;return je.slice(ye,ye+T)},[je,k,T]),Me=()=>{w(!1),R(iA),D(!1),W(null),z(!1)},ve=()=>{R(iA),D(!1),W(null),w(!0)},Be=ye=>{let Ie="";if(ye.meet_assign_to?.id)Ie=String(ye.meet_assign_to.id);else if(ye.assignedTo){const Ee=f.find(ae=>`${ae.first_name} ${ae.last_name}`===ye.assignedTo);Ie=Ee?String(Ee.id):""}const Ve=Ee=>{if(!Ee)return"";try{const ae=new Date(Ee),He=ae.getTimezoneOffset()*6e4;return new Date(ae.getTime()-He).toISOString().slice(0,16)}catch{return""}};let Te="Lead",Fe="",Ye="Contact",B="";if(ye.lead)Te="Lead",Fe=String(ye.lead.id);else if(ye.account)Te="Account",Fe=String(ye.account.id),ye.contact?(Ye="Contact",B=String(ye.contact.id)):ye.deal?(Ye="Deal",B=String(ye.deal.id)):ye.quote&&(Ye="Quote",B=String(ye.quote.id));else if(ye.relatedType||ye.related_type){const Ee=ye.relatedType||ye.related_type,ae=ye.related_to||ye.relatedToId;Ee==="Lead"?(Te="Lead",Fe=String(ae)):(Te="Account",Fe=ye.account_id?String(ye.account_id):"")}const xe={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},_e=sb(ye.status),ce=xe[_e]||"Planned";R({subject:ye.subject||ye.activity||"",location:ye.location||"",startTime:Ve(ye.start_time||ye.startTime),endTime:Ve(ye.end_time||ye.endTime),status:ce,notes:ye.description||ye.notes||"",assignedTo:Ie,relatedType1:Te,relatedTo1:Fe,relatedType2:Ye,relatedTo2:B}),D(!0),W(ye.id),E(null),w(!0)},ke=ye=>{if(!ye.subject?.trim())return q.error("Subject is required.");if(!ye.startTime)return q.error("Start time is required.");if(ye.endTime&&!(new Date(ye.endTime)-new Date(ye.startTime)>0))return q.error("End time must be after start time.");ye.relatedType1,ye.relatedTo1,ye.relatedType1==="Account"&&ye.relatedType2&&ye.relatedTo2&&(ye.relatedType2,ye.relatedTo2);const Ie={...ye,assignedTo:parseInt(ye.assignedTo),relatedTo1:parseInt(ye.relatedTo1),relatedTo2:parseInt(ye.relatedTo2)},Ve=U&&M?"update":"create";de({title:Ve==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${Ve} "${Ie.subject}"?`,confirmLabel:Ve==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:Ve,payload:Ie,targetId:M,name:Ie.subject}})},fe=async()=>{if(!Q?.action)return;const{type:ye,payload:Ie,targetId:Ve,name:Te}=Q.action;se(!0);try{ye==="create"?(z(!0),await ie.post("/meetings/create",Ie),q.success(`Meeting "${Te}" created.`),Me(),await Ne()):ye==="update"?(z(!0),await ie.put(`/meetings/${Ve}`,Ie),q.success(`Meeting "${Te}" updated.`),Me(),await Ne()):ye==="delete"&&(await ie.delete(`/meetings/${Ve}`),q.success(`Meeting "${Te}" deleted.`),S?.id===Ve&&E(null),await Ne())}catch(Fe){const Ye=Fe.response?.data?.detail||"Action failed.";q.error(typeof Ye=="string"?Ye:JSON.stringify(Ye)),console.error(Ye)}finally{z(!1),se(!1),de(null)}},ne=ye=>{de({title:"Delete Meeting",message:`Permanently delete "${ye.activity}"?`,confirmLabel:"Delete",variant:"danger",action:{type:"delete",targetId:ye.id,name:ye.activity}})},Ae=async(ye,Ie)=>{try{await ie.put(`/meetings/${ye}`,{status:Ie}),q.success("Status updated"),Ne(),E(null)}catch{q.error("Failed to update status")}};return o&&i?S?n.jsx(ld,{meeting:S,onClose:()=>{E(null),e("/admin/dashboard")},onEdit:Be,onDelete:ne,onStatusUpdate:Ae}):n.jsx(zt,{message:"Loading meeting..."}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[d&&n.jsx(zt,{message:"Loading meetings..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[n.jsx(Ct,{className:"mr-2 text-blue-600"})," Meetings"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:ve,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[n.jsx(un,{className:"mr-2"})," Add Meeting"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[n.jsx(Ht,{className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search meetings",value:x,onChange:he,className:"w-full outline-none"})]}),n.jsxs("select",{value:N,onChange:ye=>b(ye.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[n.jsx("option",{children:"Filter by Status"}),n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Start Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:De.length>0?De.map(ye=>n.jsxs("tr",{onClick:()=>E(ye),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:ye.subject}),n.jsxs("td",{className:"py-3 px-4",children:[ye.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ye.lead.title}),ye.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ye.account.name}),ye.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[ye.contact.first_name," ",ye.contact.last_name]}),ye.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ye.deal.name}),ye.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:fUe(ye.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4",children:hUe(ye.start_time)}),n.jsxs("td",{className:"py-3 px-4",children:[ye.meet_assign_to.first_name," ",ye.meet_assign_to.last_name]}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${gUe(sb(ye.status))}`,children:sb(ye.status).replace("_"," ")})})]},ye.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),n.jsx(tn,{totalItems:je.length,pageSize:T,currentPage:k,onPrev:()=>A(ye=>Math.max(1,ye-1)),onNext:()=>A(ye=>ye+1),onPageSizeChange:ye=>{_(ye),A(1)},pageSizeOptions:[10,20,30,40,50],label:"meetings"}),C&&n.jsx(Gj,{onClose:Me,formData:I,setFormData:R,isEditing:U,onSubmit:ke,isSubmitting:X||Y,users:f,currentUser:a}),S&&n.jsx(ld,{meeting:S,onClose:()=>E(null),onEdit:Be,onDelete:ne,onStatusUpdate:Ae}),Q&&n.jsx(xUe,{open:!0,title:Q.title,message:Q.message,confirmLabel:Q.confirmLabel,variant:Q.variant,onConfirm:fe,onCancel:()=>de(null),loading:Y})]})};function xUe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{onClick:c,disabled:o,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),n.jsx("button",{onClick:l,disabled:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${d}`,children:o?"...":s})]})]})})}const yUe=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"}],bUe=e=>e?String(e).toUpperCase():"",ef=e=>{const t=bUe(e);return t==="PLANNED"||t==="PENDING"?"PLANNED":t==="HELD"||t==="COMPLETED"?"HELD":t==="NOT HELD"||t==="NOT_HELD"||t==="CANCELLED"?"NOT_HELD":"PLANNED"},oA=e=>{const t=ef(e);return t==="PLANNED"?"PLANNED":t==="HELD"?"HELD":t==="NOT_HELD"?"NOT HELD":"--"},H7=e=>{switch(ef(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},lA=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},G7=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function vUe(){const[e,t]=h.useState(!1),[a,s]=h.useState(null),[r,i]=h.useState(null),[o,l]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(null),[v,N]=h.useState(!1),[b,C]=h.useState(null),[w,S]=h.useState(!1),[E,k]=h.useState(!1),[A,T]=h.useState("PLANNED"),[_,I]=h.useState(!1),[R,U]=h.useState(!1),[D,M]=h.useState(1),[W,X]=h.useState(10),[z,Q]=h.useState(null);Ds();const de=bt(),Y=Qt(),{user:se}=Xt(),J=se?.role==="Sales",Ne={subject:"",call_time:(()=>{const pe=new Date,Ue=pe.getFullYear(),Ze=String(pe.getMonth()+1).padStart(2,"0"),nt=String(pe.getDate()).padStart(2,"0");return`${Ue}-${Ze}-${nt}T08:00`})(),duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[re,he]=h.useState(Ne);h.useEffect(()=>{e&&!v&&J&&se&&!re.assigned_to&&he(pe=>({...pe,assigned_to:se.id}))},[e,v,se,J]),h.useEffect(()=>{const pe=Y.state,Ue=pe?.callID;if(Ue&&!pe?.openCallModal){Q(Ue),de(Y.pathname,{replace:!0,state:{}});return}!pe?.openCallModal||!pe?.initialCallData||pe.initialCallData.relatedType1==="Lead"&&Array.isArray(o)&&o.length===0||pe.initialCallData.relatedType1==="Account"&&(!Array.isArray(o)||o.length===0)||(t(!0),he(Ze=>({...Ze,...pe.initialCallData,relatedTo1:pe.initialCallData.relatedTo1?String(pe.initialCallData.relatedTo1):"",relatedTo2:pe.initialCallData.relatedTo2?String(pe.initialCallData.relatedTo2):""})),de(Y.pathname,{replace:!0,state:{}}))},[Y.state,o]),h.useEffect(()=>{if(z&&u.length>0&&!R){const pe=u.find(Ue=>Ue.id===z);pe?s(pe):q.error("Call not found."),Q(null)}},[z,u,R]);const je=async()=>{try{U(!0);const pe=await ie.get("/calls/admin/fetch-all"),Ze=[...Array.isArray(pe.data)?pe.data:[]].sort((nt,Je)=>{const Oe=nt?.created_at?new Date(nt.created_at):0;return(Je?.created_at?new Date(Je.created_at):0)-Oe});f(Ze)}catch(pe){console.error("Error fetching calls:",pe),q.error("Failed to load calls")}finally{U(!1)}},De=async()=>{try{const pe=await ie.get("/users/all");x(pe.data)}catch(pe){console.error("Error fetching users: ",pe)}};h.useEffect(()=>{De(),je()},[]);const Me=[],ve="",Be="Filter by Status",ke="Filter by Users",fe=u,ne=h.useMemo(()=>{const pe=(D-1)*W;return fe.slice(pe,pe+W)},[fe,D,W]),Ae=u.length,ye=u.filter(pe=>ef(pe.status)==="PLANNED").length,Ie=u.filter(pe=>ef(pe.status)==="HELD").length,Ve=u.filter(pe=>ef(pe.status)==="NOT_HELD").length,Te=[{title:"Total",value:Ae,icon:Ls,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:ye,icon:zs,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:Ie,icon:ba,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:Ve,icon:Ps,color:"text-gray-600",bgColor:"bg-gray-100"}],[Fe,Ye]=h.useState("Overview"),B=pe=>{const{name:Ue,value:Ze}=pe.target;he(nt=>{const Je={...nt,[Ue]:Ze};return Ue==="relatedType1"&&(Je.relatedTo1="",Ze==="Lead"?(Je.relatedType2=null,Je.relatedTo2=null,d([])):Ze==="Account"&&(Je.relatedType2="Contact")),Ue==="relatedType2"&&(Je.relatedTo2=""),Je})};h.useEffect(()=>{const pe=async()=>{try{l([]);let Ue;re.relatedType1==="Lead"?Ue=await ie.get("/leads/admin/getLeads"):re.relatedType1==="Account"&&(Ue=await ie.get("/accounts/admin/fetch-all"));let Ze=[];if(Ue&&Array.isArray(Ue.data)?Ze=Ue.data:Ze=[],v&&re.relatedTo1)try{let nt;re.relatedType1==="Lead"?nt=await ie.get(`/leads/get/${re.relatedTo1}`):re.relatedType1==="Account"&&(nt=await ie.get(`/accounts/get/${re.relatedTo1}`)),nt&&nt.data&&(Ze.some(Oe=>String(Oe.id)===String(re.relatedTo1))||(Ze=[nt.data,...Ze]))}catch(nt){console.error("Error fetching specific related item:",nt)}l(Ze)}catch(Ue){console.error("Error fetching data:",Ue),l([])}};re.relatedType1&&pe()},[re.relatedType1,v,re.relatedTo1]),h.useEffect(()=>{const pe=async()=>{try{d([]);let Ue;if(re.relatedType1==="Account"&&re.relatedTo1)re.relatedType2==="Contact"?Ue=await ie.get(`/contacts/from-acc/${re.relatedTo1}`):re.relatedType2==="Deal"?Ue=await ie.get(`/deals/from-acc/${re.relatedTo1}`):re.relatedType2==="Quote"&&(Ue=await ie.get(`/quotes/from-acc/${re.relatedTo1}`));else{d([]);return}Ue&&Array.isArray(Ue.data)?d(Ue.data):d([])}catch(Ue){console.error("Error fetching data:",Ue),d([])}};re.relatedType2&&pe()},[re.relatedType2,re.relatedTo1,re.relatedType1]);const[xe,_e]=h.useState(!1),ce=pe=>{pe.preventDefault(),_e(!0);const Ue=re.subject;if(!Ue||Ue.trim()===""){q.error("Subject is required.");return}if(!re.relatedTo1){q.error(`Please select a ${re.relatedType1||"Lead/Account"}.`);return}if(!re.assigned_to){q.error("Subject is required.");return}const nt={...re,duration_minutes:re.duration_minutes?parseInt(re.duration_minutes,10):null,relatedTo1:re.relatedTo1?parseInt(re.relatedTo1,10):null,relatedTo2:re.relatedType1==="Lead"?null:re.relatedTo2?parseInt(re.relatedTo2,10):null,relatedType2:re.relatedType1==="Lead"?null:re.relatedType2,assigned_to:re.assigned_to?parseInt(re.assigned_to,10):null},Je=v&&b?"update":"create",Oe=(re.subject||"").trim()||"Untitled Call";i({title:Je==="create"?"Confirm New Call":"Confirm Update",message:Je==="create"?`Create "${Oe}"?`:`Save changes to "${Oe}"?`,confirmLabel:Je==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:Je,payload:nt,targetId:b||null,name:Oe}})},Ee=pe=>s(pe),ae=()=>{t(!1),N(!1),C(null)},He=async()=>{if(!r?.action){i(null);return}const{action:pe}=r,{type:Ue,payload:Ze,targetId:nt,name:Je}=pe;k(!0);try{if(Ue==="create")S(!0),await ie.post("/calls/create",Ze),q.success(`Call "${Je}" created successfully.`),t(!1),he(Ne),N(!1),C(null),await je();else if(Ue==="update"){if(!nt)throw new Error("Missing call identifier for update.");S(!0),await ie.put(`/calls/${nt}`,Ze),q.success(`Call "${Je}" updated successfully.`),t(!1),he(Ne),N(!1),C(null),await je()}else if(Ue==="delete"){if(!nt)throw new Error("Missing call identifier for deletion.");await ie.delete(`/calls/${nt}`),q.success(`Call "${Je}" deleted successfully.`),a?.id===nt&&s(null),await je()}}catch(Oe){const ge=Ue==="create"?"Failed to create call. Please review the details and try again.":Ue==="update"?"Failed to update call. Please review the details and try again.":"Failed to delete call. Please try again.",Ke=Oe?.response?.data?.detail||ge;q.error(Ke)}finally{(Ue==="create"||Ue==="update")&&S(!1),k(!1),i(null)}},Re=()=>{E||i(null)},it=async()=>{if(a?.id)try{I(!0),await ie.put(`/calls/${a.id}`,{status:A}),q.success(`Status updated to ${oA(A)}`),f(pe=>Array.isArray(pe)?pe.map(Ue=>Ue.id===a.id?{...Ue,status:A}:Ue):pe),s(null)}catch(pe){const Ue=pe.response?.data?.detail||"Failed to update status.";q.error(Ue)}finally{I(!1)}};h.useEffect(()=>{a&&T(ef(a.status))},[a]);const mt=a?n.jsxs("div",{id:"callModalBackdrop",onClick:pe=>pe.target.id==="callModalBackdrop"&&s(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[R&&n.jsx(zt,{message:"Loading call details..."}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),n.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:n.jsx(Wn,{size:25})})]}),n.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:a.subject}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${H7(a.status)}`,children:oA(a.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const pe=Oe=>{if(!Oe)return"";const ge=new Date(Oe),Ke=ge.getFullYear(),G=String(ge.getMonth()+1).padStart(2,"0"),$=String(ge.getDate()).padStart(2,"0"),V=String(ge.getHours()).padStart(2,"0"),te=String(ge.getMinutes()).padStart(2,"0");return`${Ke}-${G}-${$}T${V}:${te}`},Ue=a.lead?"Lead":a.account?"Account":"Lead",Ze=a.lead?a.lead.id:a.account?a.account.id:null,nt=Ue==="Lead"?null:a.contact?"Contact":a.deal?"Deal":a.quote?"Quote":"Contact",Je=Ue==="Lead"?null:a.contact?a.contact.id:a.deal?a.deal.id:a.quote?a.quote.id:null;he({subject:a.subject||"",call_time:pe(a.call_time),duration_minutes:a.duration_minutes?String(a.duration_minutes):"",direction:a.direction||"Outgoing",status:a.status||"Planned",notes:a.notes||"",relatedType1:Ue,relatedType2:nt,relatedTo1:Ze?String(Ze):"",relatedTo2:Je?String(Je):"",assigned_to:a.call_assign_to?.id?String(a.call_assign_to.id):""}),N(!0),C(a.id),s(null),t(!0)},children:[n.jsx(ia,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>{const pe=a.subject||"this call";i({title:"Delete Call",message:`Are you sure you want to permanently delete "${pe}"? This action cannot be undone.`,confirmLabel:"Delete Call",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:a.id,name:pe}})},children:[n.jsx(Ut,{className:"mr-2"}),"Delete"]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(pe=>n.jsx("button",{onClick:()=>Ye(pe),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${Fe===pe?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:pe},pe))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Fe==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsx(to,{label:"Call Time",value:G7(a.call_time)}),n.jsx(to,{label:"Duration",value:a.duration_minutes?`${a.duration_minutes} min`:null}),n.jsx(to,{label:"Direction",value:a.direction||"--"}),n.jsx(to,{label:"Assigned To",value:`${a.call_assign_to.first_name} ${a.call_assign_to.last_name}`}),a.lead&&n.jsx(to,{label:"Lead",value:a.lead.title}),a.account&&n.jsx(to,{label:"Account",value:a.account.name}),a.contact&&n.jsx(to,{label:"Contact",value:`${a.contact.first_name} ${a.contact.last_name}`}),a.deal&&n.jsx(to,{label:"Deal",value:a.deal.name}),a.quote&&n.jsx(to,{label:"Quote",value:lA(a.quote.quote_id)}),n.jsx(to,{label:"Created At",value:G7(a.created_at)})]})}),Fe==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Call Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:a.notes||"No notes available."})]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:A,onChange:pe=>T(pe.target.value),children:[n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),n.jsx("button",{onClick:it,disabled:_,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:_?"Updating...":"Update"})]})]})]})]})]}):null,ee=e?n.jsx("div",{id:"modalBackdrop",onClick:pe=>pe.target.id==="modalBackdrop"&&ae(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[n.jsx("button",{onClick:()=>{ae(),_e(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:v?"Edit Call":"Add New Call"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:ce,noValidate:!0,children:[n.jsx(NUe,{label:"Subject",className:"md:col-span-2",name:"subject",value:re.subject,onChange:B,isSubmitted:xe,required:!0}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("div",{className:"relative w-25",children:[n.jsxs("select",{name:"relatedType1",onChange:B,value:re.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:w,children:[n.jsx("option",{value:"Lead",children:"Lead"}),n.jsx("option",{value:"Account",children:"Account"})]}),n.jsx("span",{className:"absolute left-10 md:pl-6 pl-6 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),n.jsx(cA,{items:Array.isArray(o)?o:[],value:re.relatedTo1??"",placeholder:`Search ${re.relatedType1||"here"}...`,getLabel:pe=>re.relatedType1==="Lead"?pe.title:pe.name??"",onChange:pe=>he(Ue=>({...Ue,relatedTo1:pe})),required:!0,isSubmitted:xe,disabled:w})]}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("select",{name:"relatedType2",onChange:B,value:re.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:re.relatedType1==="Lead"||w,children:[n.jsx("option",{value:"Contact",children:"Contact"}),n.jsx("option",{value:"Deal",children:"Deal"}),n.jsx("option",{value:"Quote",children:"Quote"})]}),n.jsx(cA,{disabled:re.relatedType1==="Lead"||w,items:Array.isArray(c)?c:[],value:re.relatedTo2??"",placeholder:re.relatedType1==="Lead"?"":Array.isArray(c)&&c.length>0?`Search ${re.relatedType2||"Contact"}...`:`No ${re.relatedType2||""} data found`,getLabel:pe=>re.relatedType2==="Contact"?`${pe.first_name??""} ${pe.last_name??""}`.trim():re.relatedType2==="Quote"?lA(pe.quote_id)??"":pe.name??"",onChange:pe=>he(Ue=>({...Ue,relatedTo2:pe}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),n.jsx("input",{type:"datetime-local",value:re.call_time,onChange:B,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),n.jsxs("div",{className:"w-full",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),n.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[n.jsx("input",{type:"tel",value:re.duration_minutes,onChange:B,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),n.jsx("p",{children:"minutes"})]})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),n.jsx(cA,{items:Array.isArray(p)?p:[],value:re.assigned_to??"",placeholder:"Search an account...",getLabel:pe=>`${pe.first_name} ${pe.last_name}`,onChange:pe=>he(Ue=>({...Ue,assigned_to:pe})),disabled:J,required:!0,isSubmitted:xe})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),n.jsxs("select",{name:"direction",onChange:B,value:re.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Incoming",children:"Incoming"}),n.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),n.jsxs("select",{name:"status",onChange:B,value:re.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Planned",children:"Planned"}),n.jsx("option",{value:"Held",children:"Held"}),n.jsx("option",{value:"Not held",children:"Not held"})]})]}),n.jsx(jUe,{className:"col-span-2",label:"Notes",value:re.notes,onChange:B,name:"notes"}),n.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{ae(),_e(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:w,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:w?"Saving...":v?"Update Call":"Save Call"})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Ls,{className:"mr-2 text-blue-600"})," Calls"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{he(Ne),N(!1),C(null),t(!0),_e(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(un,{className:"mr-2"})," Add Call"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Te.map(pe=>n.jsx(wUe,{...pe},pe.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[n.jsx(Ht,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",defaultValue:ve})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{defaultValue:Be,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),yUe.map(pe=>n.jsx("option",{value:pe.value,children:pe.label},pe.value))]}),n.jsxs("select",{defaultValue:ke,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),Me.map(pe=>n.jsx("option",{value:pe.name,children:pe.name},pe.id))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Call Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:R?n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"py-10",children:n.jsx(zt,{message:"Loading calls..."})})}):ne.length>0?ne.map(pe=>n.jsxs("tr",{onClick:()=>Ee(pe),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:pe.subject||"--"}),n.jsxs("td",{className:"py-3 px-4",children:[pe.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:pe.lead.title}),pe.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:pe.account.name}),pe.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[pe.contact.first_name," ",pe.contact.last_name]}),pe.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:pe.deal.name}),pe.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:lA(pe.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:pe.call_time?new Date(pe.call_time).toLocaleString():"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:pe?.call_assign_to?`${pe.call_assign_to.first_name} ${pe.call_assign_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${H7(pe.status)}`,children:oA(pe.status)})})]},pe.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),n.jsx(tn,{totalItems:fe.length,pageSize:W,currentPage:D,onPrev:()=>M(pe=>Math.max(pe-1,1)),onNext:()=>M(pe=>Math.min(pe+1,Math.max(1,Math.ceil(fe.length/W)||1))),onPageSizeChange:pe=>{X(pe),M(1)},pageSizeOptions:[10,20,30,40,50],label:"calls"})]}),mt,ee,r&&n.jsx(CUe,{open:!0,title:r.title,message:r.message,confirmLabel:r.confirmLabel,onConfirm:He,onCancel:Re,loading:E})]})}function wUe({icon:e,title:t,value:a,color:s,bgColor:r}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:22})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function NUe({label:e,name:t,value:a,onChange:s,placeholder:r="",type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&o&&!a;return n.jsxs("div",{className:d,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
        `})]})}function jUe(e){return n.jsxs("div",{className:e.className,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),n.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function to({label:e,value:t}){return n.jsxs("p",{children:[n.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",n.jsx("br",{}),n.jsx("span",{className:"break-words",children:t||"--"})]})}function CUe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function cA({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,required:l=!1,isSubmitted:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),v=e.find(w=>String(w.id)===String(t)),N=v?s(v):"",b=l&&c&&!t,C=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(E=>(s(E)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${b?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:C.length>0?C.map(w=>{const S=String(w.id),E=s(w),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:E||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function SUe({toggleSidebar:e}){const[t,a]=h.useState(!1),[s,r]=h.useState(!1),[i,o]=h.useState([]),[l,c]=h.useState(0),d=h.useRef(null),u=h.useRef(null),f=Qt(),p=bt(),{logout:x}=Bs(),{user:v,fetchUser:N}=Xt(),C={"/manager/dashboard":"Dashboard","/manager/accounts":"Accounts","/manager/contacts":"Contacts","/reports":"Reports","/leads":"Leads","/manager/Audit":"Audit","/manager/targets":"Targets","/manager/leads":"Leads","/manager/quotes":"Quotes","/manager/users":"Users","/manager/deals":"Deals"}[f.pathname]||"Manager Panel";return h.useEffect(()=>{N()},[]),h.useEffect(()=>{const w=()=>N();return window.addEventListener("userProfileUpdated",w),()=>window.removeEventListener("userProfileUpdated",w)},[N]),h.useEffect(()=>{if(!v?.id)return;const w=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",S=window.location.protocol==="https:"?"wss:":"ws:",E=w?"localhost:8000":window.location.host,k=`${S}//${E}/ws/notifications?user_id=${v.id}`,A=new WebSocket(k);return A.onmessage=T=>{const _=JSON.parse(T.data);o(I=>[_,...I]),c(I=>I+1)},()=>A.close()},[v?.id]),h.useEffect(()=>{function w(S){d.current&&!d.current.contains(S.target)&&a(!1),u.current&&!u.current.contains(S.target)&&r(!1)}return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),n.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative z-50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:n.jsx(ex,{className:"text-2xl"})}),n.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:C})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"relative",ref:u,children:[n.jsxs("button",{onClick:()=>r(!s),className:"relative text-gray-600 hover:text-gray-800 transition",children:[n.jsx(Zp,{className:"text-xl"}),l>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] w-4 h-4 flex items-center justify-center rounded-full font-semibold",children:l})]}),s&&n.jsxs("div",{className:"absolute right-0 mt-3 w-80 bg-white rounded-xl shadow-lg border z-50 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200",children:[n.jsxs("div",{className:"p-3 border-b bg-gray-50 flex justify-between items-center",children:[n.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:"Notifications"}),n.jsx("button",{onClick:()=>{o([]),c(0)},className:"text-xs text-blue-600 hover:underline",children:"Clear All"})]}),n.jsx("div",{className:"max-h-60 overflow-y-auto",children:i.length>0?i.map((w,S)=>n.jsx("div",{className:"p-3 border-b text-sm hover:bg-gray-50 cursor-pointer transition",children:w.title||w.message||"New Notification"},S)):n.jsx("div",{className:"p-4 text-center text-gray-500 text-xs",children:"No notifications"})})]})]}),n.jsxs("div",{className:"relative",ref:d,children:[n.jsxs("button",{onClick:()=>a(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded transition",children:[n.jsx("img",{src:v?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 h-8 object-cover rounded-full border border-gray-200"}),n.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[v?.first_name," ",v?.last_name]})]}),t&&n.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4 animate-in fade-in slide-in-from-top-2 duration-200",children:[n.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[n.jsx("img",{src:v?.profile_picture||"https://via.placeholder.com/80",alt:"Profile Large",className:"w-16 h-16 rounded-full object-cover border-2 border-gray-100"}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[v?.first_name," ",v?.middle_name," ",v?.last_name]}),n.jsx("p",{className:"text-[11px] text-gray-600 font-light w-full truncate",children:"Manager"})]})]}),n.jsxs("div",{className:"mt-6 space-y-1 px-2",children:[n.jsx("button",{onClick:()=>{p("/manager/users"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 p-2 rounded text-left transition",children:"Invite Your Team"}),n.jsx("button",{onClick:()=>{p("/manager/manage-account"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 p-2 rounded text-left transition",children:"Manage Your Account"}),n.jsx("div",{className:"border-t border-gray-100 my-2"}),n.jsx("button",{onClick:x,className:"block w-full text-sm text-red-600 hover:bg-red-50 p-2 rounded text-left transition font-medium",children:"Logout"})]})]})]})]})]})}function _Ue(){const[e,t]=h.useState(!0),[a,s]=h.useState(!1),[r,i]=h.useState(!1),[o,l]=h.useState(!1),c=Qt(),{user:d}=Xt();h.useEffect(()=>{d&&console.log("Fetched user:",d)},[d]),h.useEffect(()=>{document.title="Panel | Sari-Sari CRM"},[]);const u="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",f="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition",x=["/manager/accounts","/manager/contacts","/manager/leads","/manager/deals","/manager/quotes","/manager/targets","/manager/meetings","/manager/manage-account"].includes(c.pathname);return n.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[n.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${o?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[n.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[n.jsxs("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:[" Sari-Sari.CRM"," ",n.jsx("span",{className:"text-[12px] text-gray-700 font-medium align-bottom",children:"v2"})]}),d&&d.company&&n.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:d.company.company_name})]}),n.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[n.jsxs(Ot,{to:"/manager/dashboard",className:({isActive:v})=>v?u:f,children:[n.jsx(Jp,{className:"text-lg"}),n.jsx("span",{children:"Dashboard"})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>t(!e),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Kt,{className:"text-lg"}),"Sales"]}),n.jsx(jt,{className:`transition-transform ${e||x?"rotate-180":""}`})]}),(e||x)&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(Ot,{to:"/manager/accounts",className:({isActive:v})=>v?u:f,children:[n.jsx(dd,{})," Accounts"]}),n.jsxs(Ot,{to:"/manager/contacts",className:({isActive:v})=>v?u:f,children:[n.jsx(en,{})," Contacts"]}),n.jsxs(Ot,{to:"/manager/leads",className:({isActive:v})=>v?u:f,children:[n.jsx(Gn,{})," Leads"]}),n.jsxs(Ot,{to:"/manager/deals",className:({isActive:v})=>v?u:f,children:[n.jsx(Kt,{})," Deals"]}),n.jsxs(Ot,{to:"/manager/quotes",className:({isActive:v})=>v?u:f,children:[n.jsx(xn,{})," Quotes"]}),n.jsxs(Ot,{to:"/manager/targets",className:({isActive:v})=>v?u:f,children:[n.jsx(tr,{})," Targets"]})]})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!a),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(ws,{className:"text-lg"}),"Activity"]}),n.jsx(jt,{className:`transition-transform ${a?"rotate-180":""}`})]}),a&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(Ot,{to:"/manager/tasks",className:({isActive:v})=>v?u:f,children:[n.jsx(qt,{})," Tasks"]}),n.jsxs(Ot,{to:"/manager/meetings",className:({isActive:v})=>v?u:f,children:[n.jsx(Ct,{})," Meetings"]}),n.jsxs(Ot,{to:"/manager/calls",className:({isActive:v})=>v?u:f,children:[n.jsx(Ls,{})," Calls"]}),n.jsxs(Ot,{to:"/manager/audit",className:({isActive:v})=>v?u:f,children:[n.jsx(ws,{})," Audit"]})]})]}),n.jsx("div",{children:n.jsx(Ot,{to:"/manager/territory",className:({isActive:v})=>v?u:f,children:n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Hl,{className:"text-lg"}),"Territory"]})})}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!r),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Fk,{className:"text-lg"}),"User Management"]}),n.jsx(jt,{className:`transition-transform ${r?"rotate-180":""}`})]}),r&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(Ot,{to:"/manager/users",className:({isActive:v})=>v?u:f,children:[n.jsx(Zn,{})," Users"]}),n.jsxs(Ot,{to:"/manager/manage-account",className:({isActive:v})=>v?u:f,children:[n.jsx(en,{})," Manage Account"]})]})]})]}),n.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),o&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>l(!1)}),n.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[n.jsx(SUe,{toggleSidebar:()=>l(!o)}),n.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:n.jsx(Gp,{})})]})]})}const AUe=e=>n.jsx(Ht,{...e}),MZ=e=>n.jsx(dd,{...e}),IZ=e=>n.jsx(zs,{...e}),TUe=e=>n.jsx(Xp,{...e}),EUe=e=>n.jsx(Pw,{...e}),kUe=e=>n.jsx(Ct,{...e}),LUe=e=>n.jsx(At,{...e}),PUe=e=>n.jsx(Ow,{...e}),$Z=e=>n.jsx(Dw,{...e}),DUe=e=>n.jsx(Zn,{...e}),RZ=e=>n.jsx(en,{...e}),OUe=e=>n.jsx(Gn,{...e}),zZ=e=>n.jsx(Kt,{...e}),MUe=e=>n.jsx(xn,{...e}),IUe=e=>n.jsx(tr,{...e}),$Ue=e=>n.jsx(ba,{...e}),RUe=e=>n.jsx(Ct,{...e}),zUe=e=>n.jsx(Ls,{...e}),UUe=e=>n.jsx(Hl,{...e}),FUe=e=>n.jsx(ws,{...e}),UZ=e=>`P ${new Intl.NumberFormat("en-PH",{minimumFractionDigits:0}).format(e)}`,BUe=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},HUe=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},GUe=e=>{switch(e){case"call":return{Icon:LUe,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:PUe,color:"text-green-600",bgColor:"bg-green-100"};default:return{Icon:kUe,color:"text-blue-500",bgColor:"bg-blue-100"}}},WUe=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},qUe=({searchQuery:e,onSearchChange:t,searchResults:a,onSearchResultClick:s})=>{const r=bt(),[i,o]=h.useState(!1),l=h.useRef(null),c=[{icon:MZ,label:"Account"},{icon:RZ,label:"Contact"},{icon:OUe,label:"Leads"},{icon:zZ,label:"Deals"},{icon:MUe,label:"Quotes"},{icon:IUe,label:"Target"},{icon:$Ue,label:"Task"},{icon:RUe,label:"Meeting"},{icon:zUe,label:"Call"},{icon:FUe,label:"Audit"},{icon:UUe,label:"Territory"}];h.useEffect(()=>{const f=p=>{l.current&&!l.current.contains(p.target)&&o(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const d=f=>{t(f.target.value),o(f.target.value.trim().length>0)},u=f=>{s&&s(f),o(!1)};return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[n.jsxs("div",{className:"w-full flex justify-center relative",ref:l,children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-lg lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[n.jsx(AUe,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),n.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:d,onFocus:()=>e.trim().length>0&&o(!0)})]}),i&&Array.isArray(a)&&a.length>0&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:a.map((f,p)=>n.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>u(f),children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:f.name}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:f.type}),f.details&&n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:f.details})]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${f.type==="Lead"?"bg-blue-100 text-blue-600":f.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:f.type})]})},p))}),i&&e.trim().length>0&&(!Array.isArray(a)||a.length===0)&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 p-4 text-center text-sm text-gray-500",children:"No results found"})]}),n.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:n.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:c.map((f,p)=>n.jsxs("div",{className:"relative flex-shrink-0 group",children:[n.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":f.label,title:f.label,onClick:()=>{switch(f.label){case"Account":r("/manager/accounts");break;case"Contact":r("/manager/contacts");break;case"Leads":r("/manager/leads");break;case"Deals":r("/manager/deals");break;case"Quotes":r("/manager/quotes");break;case"Target":r("/manager/targets");break;case"Task":r("/manager/tasks");break;case"Meeting":r("/manager/meetings");break;case"Call":r("/manager/calls");break;case"Audit":r("/manager/audit");break;case"Territory":r("/manager/territory");break;default:console.log(`Clicked ${f.label}`)}},children:n.jsx(f.icon,{size:24,className:"lg:scale-95"})}),n.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-1.5 bg-gray-900 text-white text-xs font-semibold rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-75 ease-in-out z-50 shadow-lg",children:[f.label,n.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]},p))})})]})},VUe=({action:e,description:t,entity_type:a,entity_name:s,timestamp:r})=>{const i=bt(),o=u=>{if(!u)return"Unknown";const f=new Date(u),x=new Date-f,v=Math.floor(x/6e4),N=Math.floor(x/36e5),b=Math.floor(x/864e5);return v<1?"Just now":v<60?`${v} min ago`:N<24?`${N} hour${N>1?"s":""} ago`:b<7?`${b} day${b>1?"s":""} ago`:f.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},l=e||t||"Action",c=s||a||"System",d=o(r);return n.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/manager/audit"),children:[n.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[l," ",n.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",c,")"]})]}),n.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:d})]})},YUe=({logs:e,loading:t})=>{const a=bt();return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/manager/audit"),children:[n.jsx("span",{children:"See All"}),n.jsx($Z,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?n.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((s,r)=>n.jsx(VUe,{...s},r))}):n.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},QUe=({icon:e,title:t,value:a,color:s,bgColor:r,loading:i,onClick:o})=>n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o||(()=>console.log(`Clicked metric card: ${t}`)),children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:20})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a||0})]})]}),KUe=({revenueData:e,loading:t})=>{const a=bt(),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=h.useMemo(()=>{if(console.log("=== RevenueChart calculateRevenueData ==="),console.log("revenueData:",e),console.log("revenueData length:",e?.length),!e||e.length===0){console.log("No revenue data, returning empty chart");const b=new Date;b.getFullYear();const C=b.getMonth(),w=[],S=[];for(let E=0;E<=C;E++)w.push(s[E]),S.push(0);return{labels:w,revenues:S,maxRevenue:0}}const l={};let c=0,d=0;console.log("Processing deals:",e.length),e.forEach((b,C)=>{const w=b.close_date||b.closeDate||null,S=w&&w!==null&&w!=="",E=b.stage||"",k=E.toUpperCase()==="CLOSED_WON"||E==="CLOSED_WON";let A=b.amount;A&&typeof A=="object"&&A.toString?A=parseFloat(A.toString()):A=parseFloat(A)||0;const T=A>0;if(k&&(d++,console.log(`Deal ${C+1} (CLOSED_WON):`,{id:b.id,name:b.name,stage:E,close_date:w,close_date_type:typeof w,amount:A,amount_type:typeof b.amount,hasCloseDate:S,hasAmount:T,willBeAdded:S&&T,allFields:Object.keys(b)})),S&&k&&T)try{let _=new Date(w);if(isNaN(_.getTime())){const I=String(w).split("T")[0];_=new Date(I+"T00:00:00")}if(isNaN(_.getTime()))console.warn(` Invalid date for deal ${b.id}:`,w,"Type:",typeof w);else{const I=_.getFullYear(),R=_.getMonth()+1,U=`${I}-${String(R).padStart(2,"0")}`;l[U]||(l[U]=0),l[U]+=A,c++,console.log(` Added deal ${b.id} to month ${U}: ${A}, total: ${l[U]}`),console.log(`  - Close date: ${w} -> Parsed: ${_.toISOString()} -> Month: ${U} (Year: ${I}, Month: ${R})`)}}catch(_){console.error("Error parsing deal date:",w,_)}else k&&console.warn(` Deal ${b.id} is CLOSED_WON but missing data:`,{hasCloseDate:S,hasAmount:T,closeDate:w,amount:A,originalAmount:b.amount})}),console.log("Summary:",{totalDeals:e.length,closedWonDeals:d,validDealsForGraph:c,monthlyRevenue:l});const u=Object.keys(l).map(b=>parseInt(b.split("-")[0])),f=u.length>0?[...new Set(u)].sort():[],p=new Date().getFullYear();new Date().getMonth();const x=[],v=[];for(let b=0;b<12;b++){const C=`${p}-${String(b+1).padStart(2,"0")}`;x.push(s[b]);const w=l[C]||0;v.push(w),w>0&&console.log(`Month ${s[b]} (${C}): ${w}`)}if(f.length>0){const b=Math.max(...f);if(b>p)for(let C=p+1;C<=b;C++)for(let w=0;w<12;w++){const S=`${C}-${String(w+1).padStart(2,"0")}`,E=l[S]||0;x.push(`${s[w]} ${C}`),v.push(E),E>0&&console.log(`Month ${s[w]} ${C} (${S}): ${E}`)}}const N=Math.max(...v,1);return console.log("Final chart data:",{labels:x,revenues:v,maxRevenue:N,hasData:v.some(b=>b>0)}),{labels:x,revenues:v,maxRevenue:N}},[e]),i=r.labels,o=r.revenues;return console.log("=== FINAL CHART DATA ==="),console.log("X Axis (Months):",i),console.log("Y Axis (Revenue):",o),console.log("Has any revenue > 0:",o.some(l=>l>0)),console.log("All revenue values:",o),console.log("Max revenue:",r.maxRevenue),n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/manager/deals"),children:[n.jsx("span",{children:"See All"}),n.jsx($Z,{size:14,className:"transform -rotate-45"})]})]}),n.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:n.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i&&i.length>0&&o&&o.length>0?n.jsx(BN,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:l=>l>=1e3?`${(l/1e3).toFixed(0)}k`:l.toString()}],series:[{data:o,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%"}}):n.jsxs("div",{className:"text-center text-gray-500",children:[n.jsx("p",{className:"text-sm",children:"No revenue data available"}),n.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},XUe=({pipelineData:e,loading:t})=>{const a=bt(),s=o=>{const l=(o||"").toUpperCase(),c={PROSPECTING:{name:"Prospecting",color:"bg-blue-500"},QUALIFICATION:{name:"Qualification",color:"bg-yellow-500"},PROPOSAL:{name:"Proposal",color:"bg-orange-500"},NEGOTIATION:{name:"Negotiation",color:"bg-purple-500"},CLOSED_WON:{name:"Closed Won",color:"bg-green-500"},CLOSED_LOST:{name:"Closed Lost",color:"bg-red-500"}};if(c[l])return c[l];const d=["bg-blue-500","bg-yellow-500","bg-orange-500","bg-purple-500","bg-green-500","bg-red-500"],u=Math.abs(l.split("").reduce((f,p)=>f+p.charCodeAt(0),0))%d.length;return{name:o||"Unknown",color:d[u]}},i=(()=>{if(!e||e.length===0)return["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"].map(f=>{const p=s(f);return{stage:p.name,value:0,deals:0,color:p.color}});const o={};e.forEach(u=>{const f=u.stage||"PROSPECTING";o[f]||(o[f]={deals:0,value:0}),o[f].deals+=1,o[f].value+=parseFloat(u.amount||0)});const l=Math.max(...Object.values(o).map(u=>u.value),1),c=["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"],d=[];return c.forEach(u=>{const f=s(u),p=o[u]||{deals:0,value:0};d.push({stage:f.name,value:p.value,deals:p.deals,color:f.color,percentage:l>0?p.value/l*100:0})}),d})();return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Sales Pipeline"}),n.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:()=>a("/manager/deals"),children:"See All"})]}),n.jsx("div",{className:"space-y-4 flex-grow",children:i.slice(0,6).map(o=>n.jsxs("div",{className:"flex flex-col cursor-pointer hover:opacity-85 transition duration-150",onClick:()=>a("/manager/deals"),children:[n.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[n.jsx("span",{className:"font-medium text-gray-700",children:o.stage}),n.jsx("span",{className:"font-semibold text-gray-800",children:UZ(o.value)})]}),n.jsx("div",{className:"relative h-2 rounded-full bg-gray-200",children:n.jsx("div",{className:`absolute top-0 left-0 h-full rounded-full ${o.color}`,style:{width:`${Math.min(o.percentage,100)}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[o.deals," Deals"]})]},o.stage))})]})},dA=({title:e,items:t,children:a,onSeeAll:s})=>{const r=bt(),i=()=>{if(s)s();else{const o={"Latest Leads":"/manager/leads","Latest Deals":"/manager/deals","Upcoming Activities":"/manager/tasks"};o[e]&&r(o[e])}};return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),n.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),a]})},ZUe=({first_name:e,last_name:t,company_name:a,source:s,created_at:r,id:i})=>{const o=bt(),{text:l,bg:c}=HUe(s||"Website"),d=x=>{if(!x)return"Unknown";const v=new Date(x),b=new Date-v,C=Math.floor(b/6e4),w=Math.floor(b/36e5),S=Math.floor(b/864e5);return C<60?`${C} min ago`:w<24?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):S<7?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):v.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},u=`${e||""} ${t||""}`.trim()||"Unknown",f=a||"Unknown Company",p=d(r);return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&o(`/manager/leads/${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800",children:u}),n.jsx("p",{className:"text-xs text-gray-500",children:f})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-400",children:p}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${l} ${c} px-2 py-0.5 rounded-full`,children:s||"Website"})]})]})})},JUe=({name:e,amount:t,account:a,stage:s,created_at:r,id:i,previousAmount:o})=>{const l=bt(),d={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[s]||s||"Unknown",{text:u,bg:f}=BUe(d),p=parseFloat(t||0),x=o?p>=o?"up":"down":"up",v=x==="up"?TUe:EUe,N=x==="up"?"text-green-400":"text-red-400",b=a?.name||"Unknown Company";return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&l(`/manager/deals/info?id=${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex-shrink",children:[n.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),n.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:b}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${u} ${f} px-2 py-0.5 rounded-full`,children:d})]}),n.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[n.jsx("p",{className:"text-md font-bold text-gray-800",children:UZ(p)}),n.jsx(v,{size:16,className:`${N} mt-1`})]})]})})},eFe=({type:e,title:t,assignedTo:a,dueDate:s,scheduledDate:r,priority:i,id:o,activityType:l,fullData:c})=>{const d=bt(),f=l||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:p,color:x,bgColor:v}=GUe(f),{text:N,bg:b}=WUe(i||"MEDIUM"),S=(A=>{if(!A)return"No date set";const T=new Date(A),I=T-new Date,R=Math.floor(I/864e5);return R===0?`Today, ${T.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:R===1?`Tomorrow, ${T.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:R===-1?`Yesterday, ${T.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:T.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(s||r),E=a||"Unassigned",k=()=>{o&&(c?f==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(c)),d(`/manager/calls/info?id=${o}`)):f==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(c)),d(`/manager/meetings/info?id=${o}`)):d("/manager/tasks"):d(f==="call"?`/manager/calls/info?id=${o}`:f==="meeting"?`/manager/meetings/info?id=${o}`:"/manager/tasks"))};return n.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:k,children:[n.jsx("div",{className:`p-2 rounded-lg ${v} mr-3 flex-shrink-0 mt-1`,children:n.jsx(p,{size:20,className:`${x}`})}),n.jsxs("div",{className:"flex-grow",children:[n.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[n.jsx("span",{className:"text-xl leading-none mr-2",children:""}),t||"Untitled Activity"]}),n.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[n.jsxs("p",{className:"flex items-center",children:[n.jsx(IZ,{size:14,className:"mr-1.5 text-gray-400"}),S]}),n.jsxs("p",{className:"flex items-center",children:[n.jsx(RZ,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",E]})]})]}),n.jsx("span",{className:`inline-block text-xs font-medium ${N} ${b} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},tFe=()=>{const e=bt(),{user:t}=Xt(),[a,s]=h.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0}),[r,i]=h.useState([]),[o,l]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState([]),[p,x]=h.useState([]),[v,N]=h.useState([]),[b,C]=h.useState(!0),[w,S]=h.useState(null),[E,k]=h.useState(""),[A,T]=h.useState([]),[_,I]=h.useState([]),[R,U]=h.useState([]),[D,M]=h.useState(new Date),W=h.useRef(null),X=h.useRef(null),z=h.useMemo(()=>{try{if(!E.trim())return[];const se=E.toLowerCase().trim(),J=[];return Array.isArray(A)&&A.forEach(F=>{const Ne=`${F.first_name||""} ${F.last_name||""}`.trim().toLowerCase(),re=(F.company_name||"").toLowerCase(),he=(F.email||"").toLowerCase(),je=(F.phone||"").toLowerCase();(Ne.includes(se)||re.includes(se)||he.includes(se)||je.includes(se))&&J.push({id:F.id,name:`${F.first_name||""} ${F.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:F.company_name||"No company",route:`/manager/leads/${F.id}`})}),Array.isArray(_)&&_.forEach(F=>{const Ne=(F.name||"").toLowerCase(),re=(F.account?.name||"").toLowerCase(),he=(F.description||"").toLowerCase();(Ne.includes(se)||re.includes(se)||he.includes(se))&&J.push({id:F.id,name:F.name||"Unnamed Deal",type:"Deal",details:F.account?.name||"No account",route:`/manager/deals/info?id=${F.id}`})}),Array.isArray(R)&&R.forEach(F=>{const Ne=(F.name||"").toLowerCase(),re=(F.email||"").toLowerCase(),he=(F.phone||"").toLowerCase(),je=(F.website||"").toLowerCase();(Ne.includes(se)||re.includes(se)||he.includes(se)||je.includes(se))&&J.push({id:F.id,name:F.name||"Unnamed Account",type:"Account",details:F.email||F.phone||"No contact info",route:"/manager/accounts"})}),J.slice(0,10)}catch(se){return console.error("Error in search:",se),[]}},[E,A,_,R]),Q=se=>{se.route&&(e(se.route),k(""))},de=h.useCallback(async()=>{C(!0),S(null);try{const[se,J,F,Ne,re,he,je]=await Promise.all([ie.get("/leads/manager/getLeads").catch(ce=>(console.error("Error fetching leads:",ce),{data:[]})),ie.get("/deals/manager/fetch-all").catch(ce=>(console.error("Error fetching deals:",ce),{data:[]})),ie.get("/accounts/manager/fetch-all").catch(ce=>(console.error("Error fetching accounts:",ce),{data:[]})),ie.get("/tasks/all").catch(ce=>(console.error("Error fetching tasks:",ce),{data:[]})),ie.get("/meetings/manager/fetch-all").catch(ce=>(console.error("Error fetching meetings:",ce),{data:[]})),ie.get("/calls/manager/fetch-all").catch(ce=>(console.error("Error fetching calls:",ce),{data:[]})),ie.get("/logs/read-all").catch(ce=>(console.error("Error fetching logs:",ce),{data:[]}))]),De=Array.isArray(se.data)?se.data:[],Me=Array.isArray(J.data)?J.data:[],ve=Array.isArray(F.data)?F.data:[],Be=Array.isArray(Ne.data)?Ne.data:[],ke=Array.isArray(re.data)?re.data:[],fe=Array.isArray(he.data)?he.data:[],ne=Array.isArray(je.data)?je.data:[];console.log("=== RAW DEALS API RESPONSE ==="),console.log("Deals count:",Me.length),Me.length>0&&(console.log("First deal sample (raw):",JSON.stringify(Me[0],null,2)),console.log("First deal keys:",Object.keys(Me[0]))),T(De),I(Me),U(ve);const Ae=De.filter(ce=>ce.status&&!["Lost","Converted"].includes(ce.status)).length,ye=Be.filter(ce=>!ce.dueDate||ce.status==="Completed"?!1:new Date(ce.dueDate)<new Date).length;s({activeLeads:Ae,totalDeals:Me.length,activeAccounts:ve.length,overdueTasks:ye});const Ie=[...De].sort((ce,Ee)=>new Date(Ee.created_at||0)-new Date(ce.created_at||0)).slice(0,5);i(Ie);const Ve=[...Me].sort((ce,Ee)=>new Date(Ee.created_at||0)-new Date(ce.created_at||0)).slice(0,5);l(Ve);const Te=new Date,Fe=[];fe.forEach(ce=>{const Ee=ce.due_date||ce.call_time,ae=(ce.status||"").toUpperCase();if(Ee){const He=new Date(Ee);ae==="COMPLETED"||ae==="MISSED"||ae==="NOT_HELD"||ae==="HELD"||Fe.push({type:"Call",title:ce.subject||"Untitled Call",assignedTo:ce.assigned_to||(ce.call_assign_to?`${ce.call_assign_to.first_name||""} ${ce.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:Ee,priority:(ce.priority||"MEDIUM").toUpperCase(),id:ce.id,activityType:"call",fullData:ce})}}),ke.forEach(ce=>{const Ee=ce.dueDate||ce.start_time,ae=(ce.status||"").toUpperCase();if(Ee){const He=new Date(Ee);ae==="COMPLETED"||ae==="CANCELLED"||ae==="DONE"||Fe.push({type:"Meeting",title:ce.subject||ce.activity||"Untitled Meeting",assignedTo:ce.assignedTo||(ce.meet_assign_to?`${ce.meet_assign_to.first_name||""} ${ce.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:Ee,priority:(ce.priority||"MEDIUM").toUpperCase(),id:ce.id,activityType:"meeting",fullData:ce})}});const Ye={HIGH:1,MEDIUM:2,LOW:3},B=Fe.sort((ce,Ee)=>{const ae=Ye[ce.priority]||3,He=Ye[Ee.priority]||3;if(ae!==He)return ae-He;const Re=new Date(ce.scheduledDate||0),it=new Date(Ee.scheduledDate||0);return Re-it}).slice(0,5);d(B),f(Me),console.log("=== ALL DEALS DATA ==="),console.log("Total deals:",Me.length);const xe=Me.filter(ce=>(ce.stage||"").toUpperCase()==="CLOSED_WON");console.log("CLOSED_WON deals:",xe.length),xe.length>0?(console.log("=== CLOSED_WON DEALS DETAILS ==="),xe.forEach((ce,Ee)=>{let ae=ce.amount;ae&&typeof ae=="object"?ae.toString?ae=parseFloat(ae.toString()):ae=parseFloat(ae):ae=parseFloat(ae)||0,console.log(`Deal ${Ee+1}:`,{id:ce.id,name:ce.name,stage:ce.stage,stage_upper:(ce.stage||"").toUpperCase(),amount:ce.amount,amount_parsed:ae,amount_type:typeof ce.amount,close_date:ce.close_date,close_date_type:typeof ce.close_date,close_date_value:ce.close_date?new Date(ce.close_date):null,has_close_date:!!ce.close_date,has_amount:ae>0,all_keys:Object.keys(ce),full_deal:ce})})):(console.log(" No CLOSED_WON deals found!"),console.log("All deal stages:",Me.map(ce=>ce.stage))),N(Me);const _e=[...ne].sort((ce,Ee)=>new Date(Ee.timestamp||0)-new Date(ce.timestamp||0));x(_e)}catch(se){console.error("Error fetching dashboard data:",se),S("Failed to load dashboard data. Please refresh the page.")}finally{C(!1)}},[]);h.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",console.log("ManagerDashboard mounted, fetching data..."),de(),W.current=setInterval(()=>{console.log("Auto-refreshing dashboard data..."),de(),M(new Date)},3e4),()=>{W.current&&clearInterval(W.current)}),[de]),h.useEffect(()=>{if(!t||!t.id)return;let se=0;const J=3;let F=null;const Ne=()=>{const re=window.location.protocol==="https:"?"wss:":"ws:",he=window.location.hostname==="localhost"?"localhost:8000":window.location.host,je=`${re}//${he}/ws/notifications?user_id=${t.id}`;try{const De=new WebSocket(je);X.current=De,De.onopen=()=>{console.log(" WebSocket connected for dashboard updates"),se=0},De.onmessage=Me=>{try{const ve=JSON.parse(Me.data);console.log(" Real-time notification received:",ve),ve.event&&["new_task","task_updated","new_lead","lead_updated","new_deal","deal_updated","new_account","account_updated","new_meeting","meeting_updated","new_call","call_updated"].includes(ve.event)&&(console.log(" Refreshing dashboard due to:",ve.event),de(),M(new Date))}catch(ve){console.error("Error parsing WebSocket message:",ve)}},De.onerror=Me=>{se===0&&console.warn(" WebSocket connection unavailable (this is optional)")},De.onclose=()=>{se<J&&(se++,F=setTimeout(()=>{t&&t.id&&Ne()},5e3))}}catch{console.warn(" WebSocket not available (optional feature)")}};return Ne(),()=>{F&&clearTimeout(F),X.current&&(X.current.close(),X.current=null)}},[t,de]);const Y=[{icon:DUe,title:"Active Leads",value:a.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/manager/leads")},{icon:zZ,title:"Total Deals",value:a.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/manager/deals")},{icon:MZ,title:"Active Account",value:a.activeAccounts,color:"text-green-600",bgColor:"bg-green-50",onClick:()=>e("/manager/accounts")},{icon:IZ,title:"Overdue Tasks",value:a.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/manager/tasks")}];return console.log("ManagerDashboard rendering, loading:",b,"error:",w),n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[b&&n.jsx(zt,{}),n.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[w&&n.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:n.jsx("p",{className:"font-medium",children:w})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 mb-8",children:[n.jsxs("div",{className:"lg:col-span-9 flex flex-col space-y-4",children:[n.jsx(qUe,{searchQuery:E,onSearchChange:k,searchResults:z,onSearchResultClick:Q}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:Y.map(se=>n.jsx(QUe,{...se,loading:b},se.title))})]}),n.jsx("div",{className:"lg:col-span-3",children:n.jsx(YUe,{logs:p,loading:b})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[n.jsx("div",{className:"lg:col-span-2",children:n.jsx(KUe,{revenueData:v,loading:b})}),n.jsx("div",{children:n.jsx(XUe,{pipelineData:u,loading:b})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsx(dA,{title:"Latest Leads",children:r.length>0?r.map((se,J)=>n.jsx(ZUe,{...se},se.id||J)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),n.jsx(dA,{title:"Latest Deals",children:b?n.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mb-2"}),n.jsx("div",{className:"text-sm text-gray-500",children:"Loading deals..."})]}):o.length>0?o.map((se,J)=>n.jsx(JUe,{...se},se.id||J)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),n.jsx(dA,{title:"Upcoming Activities",children:c.length>0?c.map((se,J)=>n.jsx(eFe,{...se},se.id||J)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})},uA=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Vendor"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Delete"}],mA={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",parent_company:"",status:"PROSPECT",territory_id:"",assigned_to:""},Cr=e=>e?e.toUpperCase():"",fA=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",nFe=e=>{switch(Cr(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},aFe=e=>{switch(Cr(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}};function sFe(){const e=bt();h.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[t,a]=h.useState(!1),[s,r]=h.useState(!1),[i,o]=h.useState(!1),[l,c]=h.useState(null),[d,u]=h.useState(null),[f,p]=h.useState(mA),[x,v]=h.useState(null),[N,b]=h.useState([]),[C,w]=h.useState(!1),[S,E]=h.useState([]),[k,A]=h.useState(null),[T,_]=h.useState([]),[I,R]=h.useState([]),[U,D]=h.useState("Filter by Status"),[M,W]=h.useState(""),[X,z]=h.useState(null),[Q,de]=h.useState(!1),[Y,se]=h.useState(1),[J,F]=h.useState(10),[Ne,re]=h.useState("Overview"),[he,je]=h.useState(""),[De,Me]=h.useState(!1),[ve,Be]=h.useState({}),[ke,fe]=h.useState(null),ne=h.useCallback(async(oe=null)=>{w(!0);try{const rt=await ie.get("/accounts/admin/fetch-all"),Nt=[...Array.isArray(rt.data)?rt.data:[]].sort((L,H)=>{const we=L?.created_at||L?.updated_at||0,Pe=H?.created_at||H?.updated_at||0;return new Date(Pe)-new Date(we)});if(b(Nt),console.log("Fetch from backend: ",rt.data),oe){const L=Nt.find(H=>H.id===oe);v(L||null)}}catch(rt){console.error(rt),b([]),rt.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch accounts. Please try again later.")}finally{w(!1)}},[v]),Ae=h.useCallback(async()=>{try{const oe=await ie.get("/users/all");E(Array.isArray(oe.data)?oe.data:[])}catch(oe){console.error(oe),oe.response?.status===403&&q.warn("Unable to load users for assignment (permission denied).")}},[]),ye=h.useCallback(async()=>{try{const oe=await ie.get("/territories/fetch");_(Array.isArray(oe.data)?oe.data:[])}catch(oe){console.error(oe),oe.response?.status===403&&q.warn("Unable to load territories (permission denied).")}},[]),Ie=h.useCallback(async()=>{try{const oe=await ie.get("/accounts/admin/parent-companies");R(Array.isArray(oe.data)?oe.data:[])}catch(oe){console.error(oe),oe.response?.status===403&&q.warn("Unable to load parent companies (permission denied).")}},[]),Ve=h.useCallback(async oe=>{try{const rt=await ie.get(`/activities/accounts/${oe}`);console.log("Related activities: ",rt.data),Be(rt.data&&typeof rt.data=="object"?rt.data:{})}catch(rt){console.error(rt),rt.response?.status===404&&(console.warn("No activities found for this account."),Be({}))}},[]);h.useEffect(()=>{ne(),Ae(),ye(),Ie()},[ne,Ae,ye,Ie]),h.useEffect(()=>{x&&je(Cr(x.status)||"PROSPECT")},[x]);const Te=N.length,Fe=h.useMemo(()=>N.filter(oe=>oe.status?.toLowerCase()==="customer").length,[N]),Ye=h.useMemo(()=>N.filter(oe=>oe.status?.toLowerCase()==="prospect").length,[N]),B=h.useMemo(()=>N.filter(oe=>oe.status?.toLowerCase()==="partner").length,[N]),xe=h.useMemo(()=>N.filter(oe=>oe.status?.toLowerCase()==="active").length,[N]),_e=h.useMemo(()=>N.filter(oe=>oe.status?.toLowerCase()==="inactive").length,[N]),ce=h.useMemo(()=>N.filter(oe=>oe.status?.toLowerCase()==="former").length,[N]),Ee=h.useMemo(()=>[{title:"Total",value:Te,icon:Zn,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:Fe,icon:Ao,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:Ye,icon:Gn,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:B,icon:en,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:xe,icon:Ao,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:_e,icon:To,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:ce,icon:To,color:"text-orange-600",bgColor:"bg-orange-100"}],[Te,Fe,Ye,B,xe,_e,ce]),ae=h.useMemo(()=>{const oe=M.trim().toLowerCase(),rt=U.trim().toUpperCase();return N.filter(_t=>{const Nt=[_t?.name,_t?.website,_t?.industry,_t?.territory?.name,_t?.phone_number],L=oe===""||Nt.some(we=>we==null?!1:we.toString().toLowerCase().includes(oe)),H=rt==="FILTER BY STATUS"||Cr(_t.status)===rt;return L&&H})},[N,M,U]),He=Math.max(1,Math.ceil(ae.length/J)||1);h.useEffect(()=>{se(1)},[M,U]),h.useEffect(()=>{se(oe=>{const rt=Math.max(1,Math.ceil(ae.length/J)||1);return oe>rt?rt:oe})},[ae.length]);const Re=h.useMemo(()=>{const oe=(Y-1)*J;return ae.slice(oe,oe+J)},[ae,Y]);ae.length===0||(Y-1)*J+1,Math.min(Y*J,ae.length);const it=()=>se(oe=>Math.max(oe-1,1)),mt=()=>se(oe=>Math.min(oe+1,He)),ee=oe=>{v(oe),re("Overview"),je(Cr(oe?.status)||"PROSPECT")},pe=()=>v(null),Ue=oe=>{oe.target.id==="accountModalBackdrop"&&!Q&&pe()},Ze=()=>{a(!1),r(!1),u(null),p(mA),o(!1),A(null)},nt=oe=>{oe.target.id==="modalBackdrop"&&Ze()},Je=oe=>oe?new Date(oe).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",Oe=oe=>{const{name:rt,value:_t}=oe.target;p(Nt=>({...Nt,[rt]:_t}))},ge=()=>{p(mA),r(!1),u(null),a(!0)},Ke=oe=>{v(null),console.log("edit: ",oe),oe.assigned_accs?A(oe.assigned_accs):A(null),p({name:oe.name||"",website:oe.website||"",phone_number:oe.phone_number||"",billing_address:oe.billing_address||"",shipping_address:oe.shipping_address||"",industry:oe.industry||"",status:Cr(oe.status)||"PROSPECT",territory_id:oe.territory?.id?String(oe.territory.id):"",assigned_to:oe.assigned_accs?.id?String(oe.assigned_accs.id):""}),r(!0),u(oe.id),a(!0)},G=oe=>{oe&&z({title:"Delete Account",message:n.jsxs("span",{children:["Are you sure you want to permanently delete the account"," ",n.jsx("span",{className:"font-semibold",children:oe.name}),"? This action cannot be undone."]}),confirmLabel:"Delete Account",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:oe.id,name:oe.name}})},$=async()=>{if(!X?.action){z(null);return}const{action:oe}=X,{type:rt,payload:_t,targetId:Nt,name:L}=oe;de(!0);try{if(rt==="create"){o(!0);const H=await ie.post("/accounts/admin",_t);Ie(),q.success(`Account "${L}" created successfully.`);const we=x?.id||null;Ze(),await ne(we),!x&&H.data?.id}else if(rt==="update"){if(!Nt)throw new Error("Missing account identifier for update.");o(!0),await ie.put(`/accounts/admin/${Nt}`,_t),q.success(`Account "${L}" updated successfully.`);const H=x?.id&&x.id===Nt?Nt:null;Ze(),await ne(H),x?.id===Nt&&v(null)}else if(rt==="delete"){if(!Nt)throw new Error("Missing account identifier for deletion.");const H=x?.id;c(Nt),await ie.delete(`/accounts/admin/${Nt}`),q.success(`Account "${L}" deleted successfully.`),await ne(H&&H!==Nt?H:null),H===Nt&&v(null)}}catch(H){console.error(H);const we=rt==="create"?"Failed to create account. Please review the details and try again.":rt==="update"?"Failed to update account. Please review the details and try again.":"Failed to delete account. Please try again.",Pe=H.response?.data?.detail||we;q.error(Pe),(rt==="create"||rt==="update")&&o(!1),rt==="delete"&&c(null)}finally{(rt==="create"||rt==="update")&&o(!1),rt==="delete"&&c(null),de(!1),z(null)}},V=()=>{Q||z(null)},te=async()=>{if(!x||!he)return;const oe=Cr(he),rt=Cr(x.status);if(oe!==rt){Me(!0);try{await ie.put(`/accounts/admin/${x.id}`,{status:oe}),q.success(`Account status updated to ${fA(oe)}`),b(_t=>_t.map(Nt=>Nt.id===x.id?{...Nt,status:oe}:Nt)),v(null)}catch(_t){console.error(_t);const Nt=_t.response?.data?.detail||"Failed to update account status. Please try again.";q.error(Nt)}finally{Me(!1)}}},[Z,Se]=h.useState(!1),me=oe=>{oe.preventDefault(),Se(!0);const rt=f.name.trim();if(!rt){q.error("Account name is required.");return}if(!f.assigned_to){q.error("Assigned To is required.");return}const Nt={name:rt,website:f.website?.trim()||null,phone_number:f.phone_number?.trim()||null,billing_address:f.billing_address?.trim()||null,shipping_address:f.shipping_address?.trim()||null,industry:f.industry?.trim()||null,parent_company:f.parent_company?.trim()||null,status:f.status||"PROSPECT",territory_id:f.territory_id?Number(f.territory_id):null,assigned_to:f.assigned_to?Number(f.assigned_to):null},L=s&&d?"update":"create";z({title:L==="create"?"Confirm New Account":"Confirm Update",message:L==="create"?n.jsxs("span",{children:["Are you sure you want to create the account"," ",n.jsx("span",{className:"font-semibold",children:rt}),"?"]}):n.jsxs("span",{children:["Save changes to the account"," ",n.jsx("span",{className:"font-semibold",children:rt}),"?"]}),confirmLabel:L==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:L,payload:Nt,targetId:d||null,name:rt}})},ue=[{label:"Filter by Status",value:"Filter by Status"},...uA.map(oe=>({label:oe.label,value:oe.value}))],$e=X?.action?.type==="delete"?X.action.targetId:null,be=x&&(l===x.id||$e===x.id),We=x&&l===x.id,ft=x?nFe(x.status):"",yt=x?n.jsx("div",{id:"accountModalBackdrop",onClick:Ue,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:oe=>oe.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),n.jsx("button",{onClick:pe,className:"text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Wn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:x.name}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${ft}`,children:fA(x.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Ke(x),disabled:X?.action?.type==="update"&&X.action.targetId===x.id,children:[n.jsx(ia,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>G(x),disabled:!!be,children:We?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Ut,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(oe=>n.jsx("button",{onClick:()=>re(oe),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${Ne===oe?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:oe},oe))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Ne==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Website:"}),n.jsx("p",{children:x.website?n.jsx("a",{href:x.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:x.website}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Industry:"}),n.jsx("p",{children:x.industry||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Parent Company:"}),n.jsx("p",{children:x.parent_company||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:x.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:x.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Billing Address:"}),n.jsx("p",{children:x.billing_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),n.jsx("p",{children:x.shipping_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:x.assigned_accs?`${x.assigned_accs.first_name} ${x.assigned_accs.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:x.acc_creator?`${x.acc_creator.first_name} ${x.acc_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:Je(x.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:Je(x.updated_at)||"N/A"})]})]})}),Ne==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:N.notes||"No notes available."})]})]}),Ne==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[ve.tasks&&ve.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>fe(ke==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",ve.tasks.length,")"]})]}),ke==="tasks"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),ke==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ve.tasks.map((oe,rt)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/tasks",{state:{taskID:oe.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:oe.subject||oe.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:oe.description||"No description"}),oe.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",oe.assigned_to.first_name," ",oe.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Je(oe.due_date||oe.created_at)})]},`task-${rt}`))})]}),ve.meetings&&ve.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>fe(ke==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ct,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",ve.meetings.length,")"]})]}),ke==="meetings"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),ke==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ve.meetings.map((oe,rt)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/meetings",{state:{meetingID:oe.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Ct,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:oe.subject||oe.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:oe.description||oe.location||"No description"}),oe.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",oe.host.first_name," ",oe.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Je(oe.start_time||oe.created_at)})]},`meeting-${rt}`))})]}),ve.calls&&ve.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>fe(ke==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(At,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",ve.calls.length,")"]})]}),ke==="calls"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),ke==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ve.calls.map((oe,rt)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/calls",{state:{callID:oe.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(At,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:oe.subject||oe.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:oe.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Je(oe.call_time||oe.created_at)})]},`call-${rt}`))})]}),ve.contacts&&ve.contacts.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>fe(ke==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(en,{className:"text-teal-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",ve.contacts.length,")"]})]}),ke==="contacts"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),ke==="contacts"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ve.contacts.map((oe,rt)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/contacts",{state:{contactID:oe.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-teal-600 mt-1",children:n.jsx(en,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[oe.first_name?`${oe.first_name} `:"",oe.last_name]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:oe.title||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Je(oe.created_at)})]},`contact-${rt}`))})]}),ve.deals&&ve.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>fe(ke==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Kt,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",ve.deals.length,")"]})]}),ke==="deals"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),ke==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ve.deals.map((oe,rt)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/deals",{state:{dealID:oe.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(Kt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[oe.deal_id?oe.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",oe.name||oe.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:oe.stage||oe.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Je(oe.close_date||oe.created_at)})]},`deal-${rt}`))})]}),ve.quotes&&ve.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>fe(ke==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(xn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",ve.quotes.length,")"]})]}),ke==="quotes"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),ke==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ve.quotes.map((oe,rt)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/quotes",{state:{quoteID:oe.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(xn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(oe.quote_id?oe.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:oe.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Je(oe.presented_date)||""})]},`quote-${rt}`))})]}),(!ve||(!ve.tasks||ve.tasks.length===0)&&(!ve.meetings||ve.meetings.length===0)&&(!ve.calls||ve.calls.length===0)&&(!ve.quotes||ve.quotes.length===0)&&(!ve.deals||ve.deals.length===0)&&(!ve.contacts||ve.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/manager/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assigned_to:x.assigned_accs?.id?String(x.assigned_accs.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(At,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assignedTo:x.assigned_accs?.id?String(x.assigned_accs.id):"",status:"Planned"}}}),children:[n.jsx(Ct,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assignedTo:x.assigned_accs?.id?String(x.assigned_accs.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:he||Cr(x?.status)||"PROSPECT",onChange:oe=>je(oe.target.value),children:uA.map(oe=>n.jsx("option",{value:oe.value,children:oe.label},oe.value))}),n.jsx("button",{onClick:te,disabled:De||!he||Cr(he)===Cr(x?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${De||!he||Cr(he)===Cr(x?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:De?"Updating...":"Update"})]})]})]})]})]})}):null,Tt=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[C&&n.jsx(zt,{message:"Loading accounts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Zn,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{ge(),Se(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(un,{className:"mr-2"})," Add Account"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ee.map(oe=>n.jsx(rFe,{...oe},oe.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Ht,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search accounts",value:M,onChange:oe=>W(oe.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:U,onChange:oe=>D(oe.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:ue.map(oe=>n.jsx("option",{value:oe.value,children:oe.label},oe.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Industry"}),n.jsx("th",{className:"py-3 px-4",children:"Territory"}),n.jsx("th",{className:"py-3 px-4",children:"Phone"})]})}),n.jsx("tbody",{children:C?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"Loading accounts..."})}):ae.length>0?Re.map(oe=>n.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>{ee(oe),Ve(oe.id)},children:[n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:oe.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:oe.website||"--"})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${aFe(oe.status)}`,children:fA(oe.status)})}),n.jsx("td",{className:"py-3 px-4 text-sm",children:oe.industry||"--"}),n.jsx("td",{className:"py-3 px-4 text-sm",children:oe.territory?.name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(At,{className:"text-gray-500"}),n.jsx("span",{children:oe.phone_number||"--"})]})})]},oe.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"No accounts found."})})})]})}),n.jsx(tn,{className:"mt-4",totalItems:ae.length,pageSize:J,currentPage:Y,onPrev:it,onNext:mt,onPageSizeChange:oe=>{F(oe),se(1)},pageSizeOptions:[10,20,30,40,50],label:"accounts"})]}),Et=t?n.jsx("div",{id:"modalBackdrop",onClick:nt,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:oe=>oe.stopPropagation(),children:[n.jsx("button",{onClick:()=>{Ze(),Se(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:i||Q,children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Account":"Add New Account"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:me,noValidate:!0,children:[n.jsx("div",{className:"md:col-span-2",children:n.jsx(Gm,{label:"Name",name:"name",value:f.name,onChange:Oe,placeholder:"Company name",required:!0,isSubmitted:Z})}),n.jsx(q7,{label:"Parent Company",value:f.parent_company,onChange:oe=>{p(rt=>({...rt,parent_company:oe}))},items:I.map(oe=>({id:oe,name:oe})),getLabel:oe=>oe?.name||"",placeholder:"Select parent company...",disabled:i}),n.jsx(Gm,{label:"Website",name:"website",value:f.website,onChange:Oe,placeholder:"https://example.com",disabled:i}),n.jsx(Gm,{label:"Phone Number",name:"phone_number",value:f.phone_number,onChange:Oe,placeholder:"09xx xxx xxxx",type:"tel",disabled:i}),n.jsx(Gm,{label:"Industry",name:"industry",value:f.industry,onChange:Oe,placeholder:"Industry",disabled:i}),n.jsx(Gm,{label:"Billing Address",name:"billing_address",value:f.billing_address,onChange:Oe,placeholder:"Billing address",disabled:i}),n.jsx(Gm,{label:"Shipping Address",name:"shipping_address",value:f.shipping_address,onChange:Oe,placeholder:"Shipping address",disabled:i}),n.jsx(W7,{label:"Status",name:"status",value:f.status,onChange:Oe,options:[{value:"",label:"Select status"},...uA],required:!0,disabled:i}),n.jsx(q7,{label:"Assigned To",value:f.assigned_to,onChange:oe=>{const rt=S.find(Nt=>String(Nt.id)===String(oe));A(rt);let _t=null;rt&&rt.assigned_territory&&rt.assigned_territory.length===1&&(_t=rt.assigned_territory[0].id),p(Nt=>({...Nt,assigned_to:oe,territory_id:_t}))},items:S||[],getLabel:oe=>`${oe?.first_name??""} ${oe?.last_name??""} (${oe?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:Z,disabled:i||S.length===0}),n.jsx(W7,{label:"Territory",name:"territory_id",value:f.territory_id||"",onChange:Oe,options:[{value:"",label:k?k.assigned_territory&&k.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"},...k&&k.assigned_territory&&k.assigned_territory.map(oe=>({value:String(oe.id),label:oe.name}))||[]],disabled:i||!k||!k.assigned_territory||k.assigned_territory.length===0}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{Ze(),Se(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i||Q,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i||Q,children:i?"Saving...":s?"Update Account":"Save Account"})]})]})]})}):null,Gt=X?n.jsx(oFe,{open:!0,title:X.title,message:X.message,confirmLabel:X.confirmLabel,cancelLabel:X.cancelLabel,variant:X.variant,onConfirm:$,onCancel:V,loading:Q}):null;return n.jsxs(n.Fragment,{children:[Tt,yt,Et,Gt]})}function rFe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function Gm({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function W7({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(l=>n.jsx("option",{value:l.value,children:l.label},l.value))})]})}function q7({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1,allowFreeText:u=!1}){const f=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(iFe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:f,allowFreeText:u})]})}function iFe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1,allowFreeText:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),v=e.find(C=>String(C.id)===String(t)),N=v?s(v):t,b=h.useMemo(()=>{const C=f.trim().toLowerCase();return(C?e.filter(S=>(s(S)||"").toLowerCase().includes(C)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const C=w=>{x.current&&!x.current.contains(w.target)&&u(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:C=>{p(C.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsxs("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:[c&&f.trim()&&!b.some(C=>s(C).toLowerCase()===f.trim().toLowerCase())&&n.jsxs("button",{type:"button",onClick:()=>{a(f.trim()),u(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-green-50 bg-blue-50 font-medium text-blue-700",children:['+ Add "',f.trim(),'" as new parent company']}),b.length>0?b.map(C=>{const w=String(C.id),S=s(C),E=String(t)===w;return n.jsx("button",{type:"button",onClick:()=>{a(w),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${E?"bg-blue-50":""}`,children:S||"--"},w)}):!c||!f.trim()?n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"}):null]}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function oFe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const hA={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},ll=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),no=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function lFe(){const e=bt(),t=Qt();h.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[a,s]=h.useState([]),[r,i]=h.useState(!1),[o,l]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState(null),[p,x]=h.useState(!1),[v,N]=h.useState(!1),[b,C]=h.useState(!1),[w,S]=h.useState(null),[E,k]=h.useState(!1),[A,T]=h.useState(null),[_,I]=h.useState(hA),[R,U]=h.useState(""),[D,M]=h.useState("Filter by Accounts"),[W,X]=h.useState(null),[z,Q]=h.useState("Overview"),[de,Y]=h.useState(1),[se,J]=h.useState(10),[F,Ne]=h.useState({}),[re,he]=h.useState(null),[je,De]=h.useState(null);h.useEffect(()=>{const G=t.state?.contactID;G&&(De(G),e(t.pathname,{replace:!0,state:{}}))},[t,e]),h.useEffect(()=>{if(je&&a.length>0&&!r){const G=a.find($=>$.id===je);G?f(G):q.error("Contact not found."),De(null)}},[je,a,r]);const Me=h.useCallback(async(G=null)=>{i(!0);try{const $=await ie.get("/contacts/admin/fetch-all"),te=[...Array.isArray($.data)?$.data:[]].sort((Z,Se)=>{const me=Z?.created_at||Z?.updated_at||0,ue=Se?.created_at||Se?.updated_at||0;return new Date(ue)-new Date(me)});if(s(te),G){const Z=te.find(Se=>Se.id===G);f(Z||null)}}catch($){console.error($),s([]),$.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch contacts. Please try again later.")}finally{i(!1)}},[f]),ve=h.useCallback(async()=>{try{const G=await ie.get("/accounts/admin/fetch-all"),V=[...Array.isArray(G.data)?G.data:[]].sort((te,Z)=>(te?.name||"").localeCompare(Z?.name||""));l(V)}catch(G){console.error(G),l([]),G.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},[]),Be=h.useCallback(async()=>{try{const G=await ie.get("/users/all"),V=[...Array.isArray(G.data)?G.data:[]].sort((te,Z)=>ll(te).localeCompare(ll(Z)));d(V)}catch(G){console.error(G),d([]),G.response?.status===403&&q.warn("Unable to load users for assignment (permission denied).")}},[]),ke=h.useCallback(async G=>{try{const $=await ie.get(`/activities/contact/${G}`);Ne($.data&&typeof $.data=="object"?$.data:{})}catch($){console.error($),$.response?.status===404&&(console.warn("No activities found for this account."),Ne({}))}},[]);h.useEffect(()=>{Me(),ve(),Be()},[Me,ve,Be]);const fe=h.useMemo(()=>{const G=new Map;o.forEach(V=>{V?.id&&V?.name&&G.set(String(V.id),V.name)}),a.forEach(V=>{V?.account_id&&V?.account?.name&&G.set(String(V.account_id),V.account.name)});const $=Array.from(G.entries()).sort((V,te)=>V[1].localeCompare(te[1])).map(([V,te])=>({value:V,label:te}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...$]},[o,a]),ne=h.useMemo(()=>{const G=R.trim().toLowerCase(),$=D.trim();return a.filter(V=>{const te=[V?.first_name,V?.last_name,V?.email,V?.title,V?.department,V?.account?.name,V?.account?.status,V?.work_phone,V?.mobile_phone_1,V?.mobile_phone_2,V?.assigned_contact?.first_name,V?.assigned_contact?.last_name,V?.contact_creator?.first_name,V?.contact_creator?.last_name,V?.notes,no(V?.created_at),no(V?.updated_at)],Z=G===""||te.some(me=>me==null?!1:me.toString().toLowerCase().includes(G)),Se=$==="Filter by Accounts"||String(V.account_id)===$;return Z&&Se})},[a,R,D]),Ae=Math.max(1,Math.ceil(ne.length/se)||1);h.useEffect(()=>{Y(1)},[R,D]),h.useEffect(()=>{Y(G=>{const $=Math.max(1,Math.ceil(ne.length/se)||1);return G>$?$:G})},[ne.length]);const ye=h.useMemo(()=>{const G=(de-1)*se;return ne.slice(G,G+se)},[ne,de]),Ie=()=>Y(G=>Math.max(G-1,1)),Ve=()=>Y(G=>Math.min(G+1,Ae)),Te=h.useMemo(()=>{if(!v||!A)return o;const G=a.find(V=>V.id===A);return!G||!G.account||o.some(V=>V.id===G.account.id)?o:[...o,G.account]},[o,v,A,a]),Fe=h.useCallback(()=>{x(!1),N(!1),T(null),I(hA),C(!1),ae(!1)},[]),Ye=G=>{G.target.id==="modalBackdrop"&&!b&&!E&&Fe()},B=G=>{const{name:$,value:V}=G.target;I(te=>({...te,[$]:V}))},xe=()=>{I(hA),N(!1),T(null),x(!0)},_e=async G=>{if(!G)return;const $=await ie.get(`/accounts/get/${G.account_id}`);I({first_name:G.first_name||"",last_name:G.last_name||"",account_id:$.data.id?$.data.id:"",title:G.title||"",department:G.department||"",email:G.email||"",work_phone:G.work_phone||"",mobile_phone_1:G.mobile_phone_1||"",mobile_phone_2:G.mobile_phone_2||"",notes:G.notes||"",assigned_to:G.assigned_to?String(G.assigned_to):""}),N(!0),T(G.id),x(!0),f(null)},ce=G=>{if(!G)return;const $=ll(G)||"this contact";S({title:"Delete Contact",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:$}),"? This action cannot be undone."]}),confirmLabel:"Delete Contact",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:G.id,name:$}})},[Ee,ae]=h.useState(!1),He=G=>{G.preventDefault(),ae(!0);const $=_.first_name.trim(),V=_.last_name.trim();if(!$||!V){q.error("First name and last name are required.");return}if(!_.account_id){q.error("Account is required.");return}if(!_.assigned_to){q.error("Assigned To is required.");return}const Z=_.email?.trim();if(!Z){q.error("Email is required.");return}if(!Z.includes("@")){q.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Z)){q.error("Please enter a valid email address.");return}const me={first_name:$,last_name:V,account_id:Number(_.account_id),title:_.title?.trim()||null,department:_.department?.trim()||null,email:_.email?.trim().toLowerCase()||null,work_phone:_.work_phone?.trim()||null,mobile_phone_1:_.mobile_phone_1?.trim()||null,mobile_phone_2:_.mobile_phone_2?.trim()||null,notes:_.notes?.trim()||null,assigned_to:_.assigned_to?Number(_.assigned_to):null},ue=v&&A?"update":"create",$e=`${$} ${V}`.trim();S({title:ue==="create"?"Confirm New Contact":"Confirm Update",message:ue==="create"?n.jsxs("span",{children:["Are you sure you want to add"," ",n.jsx("span",{className:"font-semibold",children:$e})," to your contacts?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:$e}),"?"]}),confirmLabel:ue==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:ue,payload:me,targetId:A||null,name:$e}})},Re=async()=>{if(!w?.action){S(null);return}const{action:G}=w,{type:$,payload:V,targetId:te,name:Z}=G;k(!0);try{if($==="create"){C(!0),await ie.post("/contacts/admin",V),q.success(`Contact "${Z}" created successfully.`);const Se=u?.id||null;Fe(),await Me(Se)}else if($==="update"){if(!te)throw new Error("Missing contact identifier for update.");C(!0),await ie.put(`/contacts/admin/${te}`,V),q.success(`Contact "${Z}" updated successfully.`);const Se=u?.id&&u.id===te?te:u?.id||null;Fe(),await Me(Se),u?.id===te&&f(null)}else if($==="delete"){if(!te)throw new Error("Missing contact identifier for deletion.");const Se=u?.id;X(te),await ie.delete(`/contacts/admin/${te}`),q.success(`Contact "${Z}" deleted successfully.`),await Me(Se&&Se!==te?Se:null),Se===te&&f(null)}}catch(Se){console.error(Se);const me=$==="create"?"Failed to create contact. Please review the details and try again.":$==="update"?"Failed to update contact. Please review the details and try again.":"Failed to delete contact. Please try again.",ue=Se.response?.data?.detail||me;q.error(ue)}finally{($==="create"||$==="update")&&C(!1),$==="delete"&&X(null),k(!1),S(null)}},it=()=>{E||S(null)},mt=G=>{f(G),Q("Overview")},ee=()=>f(null),pe=G=>{G.target.id==="contactModalBackdrop"&&!E&&ee()},Ue=w?.action?.type==="delete"?w.action.targetId:null,Ze=u&&(W===u.id||Ue===u.id),nt=u&&W===u.id,Je=u?n.jsx("div",{id:"contactModalBackdrop",onClick:pe,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:G=>G.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),n.jsx("button",{onClick:ee,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Wn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:ll(u)||"Unnamed contact"})}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>_e(u),disabled:E||w?.action?.type==="update"&&w.action.targetId===u.id,children:[n.jsx(ia,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>ce(u),disabled:!!Ze,children:nt?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Ut,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:n.jsx("p",{className:"text-sm text-gray-500",children:u.account?.name||"No associated account"})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(G=>n.jsx("button",{onClick:()=>Q(G),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${z===G?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:G},G))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[z==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact Name:"}),n.jsx("p",{children:ll(u)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Title:"}),n.jsx("p",{children:u.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:u.email?n.jsx("a",{href:`mailto:${u.email}`,className:"text-blue-600 hover:underline break-all",children:u.email}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:u.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:u.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:u.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:u.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:u.assigned_contact?`${u.assigned_contact.first_name} ${u.assigned_contact.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:u.contact_creator?`${u.contact_creator.first_name} ${u.contact_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:no(u.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:no(u.updated_at)||"N/A"})]})]})}),z==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:u.notes||"No notes available."})]})]}),z==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[F.tasks&&F.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(re==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",F.tasks.length,")"]})]}),re==="tasks"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),re==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:F.tasks.map((G,$)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/tasks",{state:{taskID:G.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:G.subject||G.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:G.description||"No description"}),G.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",G.assigned_to.first_name," ",G.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:no(G.due_date||G.created_at)})]},`task-${$}`))})]}),F.meetings&&F.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(re==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ct,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",F.meetings.length,")"]})]}),re==="meetings"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),re==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:F.meetings.map((G,$)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/meetings",{state:{meetingID:G.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Ct,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:G.subject||G.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:G.description||G.location||"No description"}),G.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",G.host.first_name," ",G.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:no(G.start_time||G.created_at)})]},`meeting-${$}`))})]}),F.calls&&F.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(re==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(At,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",F.calls.length,")"]})]}),re==="calls"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),re==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:F.calls.map((G,$)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/calls",{state:{callID:G.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(At,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:G.subject||G.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:G.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:no(G.call_time||G.created_at)})]},`call-${$}`))})]}),F.deals&&F.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(re==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Kt,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",F.deals.length,")"]})]}),re==="deals"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),re==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:F.deals.map((G,$)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/deals",{state:{dealID:G.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(Kt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[G.deal_id?G.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",G.name||G.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:G.stage||G.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:no(G.close_date||G.created_at)})]},`deal-${$}`))})]}),F.quotes&&F.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(re==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(xn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",F.quotes.length,")"]})]}),re==="quotes"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),re==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:F.quotes.map((G,$)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/quotes",{state:{quoteID:G.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(xn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(G.quote_id?G.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:G.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:no(G.presented_date)||""})]},`quote-${$}`))})]}),(!F||(!F.tasks||F.tasks.length===0)&&(!F.meetings||F.meetings.length===0)&&(!F.calls||F.calls.length===0)&&(!F.quotes||F.quotes.length===0)&&(!F.deals||F.deals.length===0)&&(!F.contacts||F.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsx("div",{className:"flex flex-col gap-4",children:n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/manager/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${ll(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assigned_to:u?.assigned_contact?.id?String(u.assigned_contact.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(At,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!u?.email){alert("No email address available");return}const G=encodeURIComponent(u.email),$=encodeURIComponent(""),V=encodeURIComponent(""),te=`mailto:${G}?subject=${$}&body=${V}`;window.location.href=te},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Xn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${ll(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assignedTo:u?.assigned_contact?.id?String(u.assigned_contact.id):"",status:"Planned"}}}),children:[n.jsx(Ct,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Task for ${ll(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assignedTo:u?.assigned_contact?.id?String(u.assigned_contact.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,Oe=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&n.jsx(zt,{message:"Loading contacts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Zn,{className:"mr-2 text-blue-600"})," Contacts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{xe(),ae(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(un,{className:"mr-2"})," Add Contact"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Ht,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search contacts",value:R,onChange:G=>U(G.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:D,onChange:G=>M(G.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:fe.map(G=>n.jsx("option",{value:G.value,children:G.label},G.value??G.label))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),n.jsx("th",{className:"py-3 px-4",children:"Department"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Created"})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"Loading contacts..."})}):ne.length>0?ye.map(G=>{const $=[{Icon:Xn,value:G.email,key:"email"},{Icon:At,value:G.work_phone,key:"work_phone"},{Icon:Jc,value:G.mobile_phone_1,key:"mobile_phone_1"},{Icon:Jc,value:G.mobile_phone_2,key:"mobile_phone_2"}].filter(V=>!!V.value);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>{mt(G),ke(G.id)},children:[n.jsxs("td",{className:"py-3 px-4 align-top",children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:ll(G)||"--"}),n.jsx("div",{className:"text-xs text-gray-500",children:G.title||"No title"})]}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[n.jsx(Ex,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"break-words",children:G.account?.name||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:$.length>0?n.jsx("div",{className:"space-y-1 text-gray-700",children:$.map(({Icon:V,value:te,key:Z})=>{const Se=pt.createElement(V,{className:"text-gray-500 flex-shrink-0"});return n.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[Se,n.jsx("span",{children:te})]},Z)})}):n.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[n.jsx(Kt,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:G.department||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(en,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:G.assigned_contact?`${G.assigned_contact.first_name} ${G.assigned_contact.last_name}`:"Unassigned"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[n.jsx(Ct,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"text-xs",children:no(G.created_at)||"--"})]})})]},G.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"No contacts found."})})})]})}),n.jsx(tn,{className:"mt-4",totalItems:ne.length,pageSize:se,currentPage:de,onPrev:Ie,onNext:Ve,onPageSizeChange:G=>{J(G),Y(1)},pageSizeOptions:[10,20,30,40,50],label:"contacts"})]}),ge=p?n.jsx("div",{id:"modalBackdrop",onClick:Ye,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:G=>G.stopPropagation(),children:[n.jsx("button",{onClick:()=>{Fe(),ae(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:b||E,children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:v?"Edit Contact":"Add New Contact"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:He,noValidate:!0,children:[n.jsx(Lc,{label:"First Name",name:"first_name",value:_.first_name,onChange:B,placeholder:"First name",required:!0,isSubmitted:Ee}),n.jsx(Lc,{label:"Last Name",name:"last_name",value:_.last_name,onChange:B,placeholder:"Last name",required:!0,isSubmitted:Ee}),n.jsx(V7,{label:"Account",value:_.account_id,onChange:G=>I($=>({...$,account_id:G})),items:v?Te:o||[],getLabel:G=>G?.name??"",placeholder:"Search account...",disabled:b||(v?Te.length===0:o.length===0),required:!0,isSubmitted:Ee}),n.jsx(V7,{label:"Assigned To",value:_.assigned_to,onChange:G=>I($=>({...$,assigned_to:G})),items:c||[],getLabel:G=>`${G?.first_name??""} ${G?.last_name??""} (${G?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:Ee,disabled:b||c.length===0}),n.jsx(Lc,{label:"Title",name:"title",value:_.title,onChange:B,placeholder:"Job title",disabled:b}),n.jsx(Lc,{label:"Department",name:"department",value:_.department,onChange:B,placeholder:"Department",disabled:b}),n.jsx(Lc,{label:"Email",name:"email",type:"email",value:_.email,onChange:B,placeholder:"example@email.com",required:!0,isSubmitted:Ee}),n.jsx(Lc,{label:"Work Phone",name:"work_phone",value:_.work_phone,onChange:B,placeholder:"09xx xxx xxxx",disabled:b}),n.jsx(Lc,{label:"Mobile Phone 1",name:"mobile_phone_1",value:_.mobile_phone_1,onChange:B,placeholder:"09xx xxx xxxx",disabled:b}),n.jsx(Lc,{label:"Mobile Phone 2",name:"mobile_phone_2",value:_.mobile_phone_2,onChange:B,placeholder:"09xx xxx xxxx",disabled:b}),n.jsx(dFe,{label:"Notes",name:"notes",value:_.notes,onChange:B,placeholder:"Additional details...",rows:3,disabled:b,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{Fe(),ae(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:b||E,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:b||E,children:b?"Saving...":v?"Update Contact":"Save Contact"})]})]})]})}):null,Ke=w?n.jsx(uFe,{open:!0,title:w.title,message:w.message,confirmLabel:w.confirmLabel,cancelLabel:w.cancelLabel,variant:w.variant,onConfirm:Re,onCancel:it,loading:E}):null;return n.jsxs(n.Fragment,{children:[Oe,Je,ge,Ke]})}function Lc({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${d}
        `})]})}function V7({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(cFe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function cFe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",N=h.useMemo(()=>{const b=u.trim().toLowerCase();return(b?e.filter(w=>(s(w)||"").toLowerCase().includes(b)):e).slice(0,o)},[e,u,s,o]);return h.useEffect(()=>{const b=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:v,placeholder:r,onFocus:()=>!i&&d(!0),onChange:b=>{f(b.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:N.length>0?N.map(b=>{const C=String(b.id),w=s(b),S=String(t)===C;return n.jsx("button",{type:"button",onClick:()=>{a(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},C)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function dFe({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function uFe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const gA=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function FZ({lead:e,onBack:t,fetchLeads:a,onEdit:s,onDelete:r,setSelectedLead:i,relatedActs:o}){const l=bt(),{leadID:c}=Ul(),[d,u]=h.useState(e||null),[f,p]=h.useState("Overview"),[x,v]=h.useState(""),N=d?.status?.toUpperCase()==="QUALIFIED",[b,C]=h.useState(null),[w,S]=h.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[E,k]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[A,T]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),_=async()=>{try{if(e){u(e),v(e.status||"New");return}if(!c)return;const M=await ie.get(`/leads/get/${c}`);u(M.data),v(M.data.status||"New"),S({name:M.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:M.data.territory?.id||null,assigned_to:M.data.assigned_to?.id||null,created_by:M.data.creator?.id||null}),k({last_name:M.data.last_name||"",first_name:M.data.first_name||"",account_id:null,title:M.data.title||"",department:M.data.department||"",email:M.data.email||"",work_phone:M.data.work_phone||"",mobile_phone_1:M.data.mobile_phone_1||"",mobile_phone_2:M.data.mobile_phone_2||"",notes:"",assigned_to:M.data.assigned_to?.id||null,created_by:M.data.creator?.id||null}),T({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:M.data.assigned_to?.id||null,created_by:M.data.creator?.id||null})}catch(M){console.error(M)}};h.useEffect(()=>{e?(u(e),v(e.status||"New")):c&&_()},[c,e]);const I=async()=>{try{if(x==="Converted"&&d?.status?.toUpperCase()!=="QUALIFIED"){q.error("Lead must be Qualified before it can be converted.");return}const M=await ie.put(`/leads/${d.id}/update/status`,{status:x});q.success("Lead status updated successfully");const W={...d,status:M.data.status};u(W),i&&i(W),a&&a(),t&&t()}catch(M){console.error(M),q.error("Failed to update lead status")}},R=async M=>{const W={...w,assigned_to:M.assigned_to?.id,billing_address:M.address,shipping_address:M.address,created_by:M.creator?.id,industry:null,name:M.company_name,phone_number:M.work_phone,status:"Prospect",territory_id:M.territory?.id,website:""};console.log("Account data: ",W),console.log("Contact data: ",E),console.log("Deal data: ",A),console.log("Lead data: ",M);try{const z=(await ie.post("/accounts/convertedLead",W)).data.id,Q={...E,account_id:z,assigned_to:M.assigned_to?.id,created_by:M.creator?.id,department:M.department,email:M.email,first_name:M.first_name,last_name:M.last_name,mobile_phone_1:M.mobile_phone_1,mobile_phone_2:M.mobile_phone_2,notes:M.notes,title:M.title,work_phone:M.work_phone},Y=(await ie.post("/contacts/convertedLead",Q)).data.id,se=()=>{switch(A.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},J=A.amount&&A.amount!==""?parseFloat(A.amount):0,F={...A,account_id:z,assigned_to:M.assigned_to?.id,created_by:M.creator?.id,primary_contact_id:Y,probability:se(),stage:"Prospecting"},Ne=await ie.post("/deals/convertedLead",F),re=await ie.put(`/leads/convert/${M.id}`);i&&i(null),a(),q.success("Lead converted successfully!"),t()}catch(X){console.error("Error during conversion:",X);const z=X.response?.data?.detail||X.message||"Failed to convert lead. Please try again.";q.error(z)}},U=M=>{switch((M||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},D=M=>M.toString().toLowerCase().replace(/\b\w/g,W=>W.toUpperCase());return d?n.jsx(n.Fragment,{children:n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),n.jsx("button",{onClick:()=>{t?t():l(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Wn,{size:25})})]})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[d.first_name," ",d.last_name]}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${U(d.status)}`,children:D(d.status||"New")}),n.jsx("div",{className:"flex flex-col",children:n.jsx("button",{onClick:()=>R(d),disabled:!N,title:N?"Convert Lead":"Lead must be Qualified before converting",className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2
      ${N?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-400":"bg-gray-200 text-gray-400 cursor-not-allowed"}
    `,children:"Convert"})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",onClick:()=>{s&&d&&s(d)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(la,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",onClick:()=>{r&&d&&r(d)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(Ut,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-4 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(M=>n.jsx("button",{onClick:()=>p(M),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${f===M?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:M},M))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[f==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Name:"}),n.jsxs("p",{children:[d.first_name," ",d.last_name||"N/A"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:d.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Job Title:"}),n.jsx("p",{children:d.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:d.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:d.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:d.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:d.assigned_to?`${d.assigned_to.first_name} ${d.assigned_to.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:d.creator?`${d.creator.first_name} ${d.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:d.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Source:"}),n.jsx("p",{children:d.source||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Address:"}),n.jsx("p",{children:d.address||"N/A"})]})]})}),f==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]})]}),f==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[o.tasks&&o.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",o.tasks.length,")"]})]}),b==="tasks"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),b==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.tasks.map((M,W)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/manager/tasks",{state:{taskID:M.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:M.subject||M.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:M.description||"No description"}),M.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned:"," ",M.assigned_to.first_name," ",M.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:gA(M.due_date||M.created_at)})]},`task-${W}`))})]}),o.meetings&&o.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ct,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",o.meetings.length,")"]})]}),b==="meetings"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),b==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.meetings.map((M,W)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/manager/meetings",{state:{meetingID:M.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Ct,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:M.subject||M.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:M.description||M.location||"No description"}),M.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",M.host.first_name," ",M.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:gA(M.start_time||M.created_at)})]},`meeting-${W}`))})]}),o.calls&&o.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(At,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",o.calls.length,")"]})]}),b==="calls"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),b==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.calls.map((M,W)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/manager/calls",{state:{callID:M.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(At,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:M.subject||M.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:M.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:gA(M.call_time||M.created_at)})]},`call-${W}`))})]}),(!o||(!o.tasks||o.tasks.length===0)&&(!o.meetings||o.meetings.length===0)&&(!o.calls||o.calls.length===0)&&(!o.quotes||o.quotes.length===0)&&(!o.deals||o.deals.length===0)&&(!o.contacts||o.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{d&&l("/manager/calls",{state:{openCallModal:!0,initialCallData:{subject:d.title?`Call regarding ${d.title}`:`Call with ${d.first_name} ${d.last_name}`,relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assigned_to:d.assigned_to?.id?String(d.assigned_to.id):"",direction:"Outgoing",status:"Planned"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(At,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const M=encodeURIComponent(d.email),W=encodeURIComponent(""),X=encodeURIComponent(""),z=`mailto:${M}?subject=${W}&body=${X}`;window.location.href=z},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Xn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{d&&l("/manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:d.title?`Meeting regarding ${d.title}`:`Meeting with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",status:"Planned"}}})},children:[n.jsx(Ct,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{d&&l("/manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:d.title?`Follow up on ${d.title}`:`Follow up with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:x,onChange:M=>v(M.target.value),children:[n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),d?.status?.toUpperCase()==="QUALIFIED"&&n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]}),n.jsx("button",{onClick:I,disabled:x===d.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${x===d.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const mFe=Ff.all(),pA=mFe.map((e,t)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${t}`})),fFe=e=>e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()),hFe=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},xA={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function gFe(){const e=bt(),{leadID:t}=Ul();Ds();const[a,s]=h.useState(null),[r,i]=h.useState(!1),[o,l]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(!1),[v,N]=h.useState(""),[b,C]=h.useState("Filter by Status"),[w,S]=h.useState(1),[E,k]=h.useState(10),[A,T]=h.useState(xA),[_,I]=h.useState(!1),[R,U]=h.useState(null),[D,M]=h.useState(!1),[W,X]=h.useState(null),[z,Q]=h.useState(!1),[de,Y]=h.useState({});h.useRef(null);const[se,J]=h.useState(!1),[F,Ne]=h.useState(null),[re,he]=h.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[je,De]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[Me,ve]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});h.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const Be=async()=>{try{const ge=await ie.get("/leads/getUsers");l(ge.data)}catch(ge){console.error(`Error fetching users: ${ge}`)}},ke=async()=>{x(!0);try{const ge=await ie.get("/leads/admin/getLeads");f(ge.data),console.log(ge.data)}catch(ge){console.error(`Error fetching leads: ${ge}`)}finally{x(!1)}};h.useEffect(()=>{Be(),ke()},[]),h.useEffect(()=>{if(t&&u.length>0&&!r&&!_){const ge=u.find(Ke=>Ke.id===Number(t));ge&&s(ge)}else!t&&!a&&s(null)},[t,u,r,_]),h.useEffect(()=>{if(F){const Ke=(V=>{if(!V)return{code:"+63",number:""};const te=V.match(/^(\+\d+)\s(.+)$/);if(te)return{code:te[1],number:te[2]};if(V.startsWith("+")){const Z=V.match(/^(\+\d{1,3})/);if(Z)return{code:Z[1],number:V.substring(Z[1].length).trim()}}return{code:"+63",number:V}})(F.work_phone),G=[];F.work_phone&&G.push(`Work: ${F.work_phone}`),F.mobile_phone_1&&G.push(`Mobile 1: ${F.mobile_phone_1}`),F.mobile_phone_2&&G.push(`Mobile 2: ${F.mobile_phone_2}`);const $=G.length>0?G.join(" | "):"";he({name:F.company_name||"",website:"",countryCode:Ke.code,phone_number:Ke.number,combinedPhoneNumbers:$,billing_address:F.address||"",shipping_address:F.address||"",industry:"",status:"Prospect",territory_id:F.assigned_to?.territory?.id||null,assigned_to:F.assigned_to?.id||null,created_by:F.creator?.id||null}),De({last_name:F.last_name||"",first_name:F.first_name||"",account_id:null,title:F.title||"",department:F.department||"",email:F.email||"",work_phone:F.work_phone||"",mobile_phone_1:F.mobile_phone_1||"",mobile_phone_2:F.mobile_phone_2||"",notes:F.notes||"",assigned_to:F.assigned_to?.id||null,created_by:F.creator?.id||null}),ve({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:F.assigned_to?.id||null,created_by:F.creator?.id||null})}},[F]);const fe=ge=>N(ge.target.value),ne=h.useMemo(()=>{const ge=v.trim().toLowerCase(),Ke=b.trim().toUpperCase();return u.filter(G=>{const $=[G?.first_name,G?.last_name,G?.company_name,G?.title,G?.email,G?.work_phone,G?.assigned_to?`${G.assigned_to.first_name} ${G.assigned_to.last_name}`:""],V=ge===""||$.some(Z=>Z==null||Z===""?!1:Z.toString().toLowerCase().includes(ge));let te=!1;return Ke==="FILTER BY STATUS"?te=(G.status?G.status.toUpperCase():"")!=="CONVERTED":te=(G.status?G.status.toUpperCase():"")===Ke,V&&te})},[u,v,b]),Ae=Math.max(1,Math.ceil(ne.length/E)||1);h.useEffect(()=>{S(1)},[v,b]),h.useEffect(()=>{S(ge=>{const Ke=Math.max(1,Math.ceil(ne.length/E)||1);return ge>Ke?Ke:ge})},[ne.length]);const ye=h.useMemo(()=>{const ge=(w-1)*E;return ne.slice(ge,ge+E)},[ne,w]),Ie=()=>S(ge=>Math.max(ge-1,1)),Ve=()=>S(ge=>Math.min(ge+1,Ae)),Te=h.useCallback(async ge=>{try{const Ke=await ie.get(`/activities/lead/${ge}`);Y(Ke.data&&typeof Ke.data=="object"?Ke.data:{})}catch(Ke){console.error(Ke),Ke.response?.status===404&&(console.warn("No activities found for this account."),Y({}))}},[]),Fe=ge=>{s(ge),Te(ge.id)},Ye=()=>{s(null),t&&e("/admin/leads",{replace:!0})},B=()=>{i(!1),T(xA),I(!1),U(null),M(!1),d(null),sessionStorage.removeItem("editLeadData")},xe=ge=>{ge.target.id==="modalBackdrop"&&B()},_e=()=>{T(xA),I(!1),U(null),d(null),i(!0)},ce=ge=>{if(!ge){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",ge),console.log("Current state - leadID:",t,"selectedLead:",a,"showModal:",r);const Ke=Z=>{if(!Z)return{code:"+63",number:""};const Se=Z.match(/^(\+\d+)\s(.+)$/);return Se?{code:Se[1],number:Se[2]}:{code:"+63",number:Z}},G=Ke(ge.work_phone),$=Ke(ge.mobile_phone_1),V=Ke(ge.mobile_phone_2);let te="";if(ge.assigned_to){te=String(ge.assigned_to.id);const Z=o?.find(Se=>Se.id===ge.assigned_to.id);d(Z)}T({first_name:ge.first_name||"",last_name:ge.last_name||"",company_name:ge.company_name||"",title:ge.title||"",department:ge.department||"",email:ge.email||"",work_ccode:G.code,work_phone:G.number,m1_ccode:$.code,mobile_phone_1:$.number,m2_ccode:V.code,mobile_phone_2:V.number,address:ge.address||"",notes:ge.notes||"",source:ge.source||"",territory_id:ge.territory?.id||null,lead_owner:te,status:ge.status||"New"}),I(!0),U(ge.id),a?(console.log("Coming from detail view - closing detail modal and showing edit form"),s(null),i(!0)):(console.log("Already in list view - showing modal"),i(!0))},Ee=ge=>{if(!ge){console.error("handleDelete: lead is null or undefined");return}console.log("handleDelete called with lead:",ge);const Ke=`${ge.first_name} ${ge.last_name}`||"this lead";X({title:"Delete Lead",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:Ke}),"? This action cannot be undone."]}),confirmLabel:"Delete Lead",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ge.id,name:Ke}})},ae=ge=>{const{name:Ke,value:G}=ge.target;if(T($=>({...$,[Ke]:G})),Ke==="lead_owner"){const $=o.find(V=>V.id===parseInt(G));d($)}},[He,Re]=h.useState(!1),it=ge=>{if(ge.preventDefault(),Re(!0),!A.last_name?.trim()){q.error("Last name is required.");return}if(!A.company_name?.trim()){q.error("Company is required.");return}if(!A.email?.trim()){q.error("Email is required.");return}if(!A.email.includes("@")){q.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(A.email)){q.error("Please enter a valid email address with a dot in the domain.");return}if(!A.lead_owner){q.error("Please assign a lead owner.");return}const G={...A,territory_id:A.territory_id?parseInt(A.territory_id):null,lead_owner:parseInt(A.lead_owner),work_phone:`${A.work_ccode} ${A.work_phone}`,mobile_phone_1:`${A.m1_ccode} ${A.mobile_phone_1}`,mobile_phone_2:`${A.m2_ccode} ${A.mobile_phone_2}`},$=_&&R?"update":"create",V=`${A.first_name} ${A.last_name}`;X({title:$==="create"?"Confirm New Lead":"Confirm Update",message:$==="create"?n.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",n.jsx("span",{className:"font-semibold",children:V}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:V}),"?"]}),confirmLabel:$==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:$,payload:G,targetId:R||null,name:V}})},mt=async()=>{if(!W?.action){X(null);return}const{action:ge}=W,{type:Ke,payload:G,targetId:$,name:V,lead:te}=ge;console.log(G),Q(!0);try{if(Ke==="create")M(!0),await ie.post("/leads/create",G),q.success(`Lead "${V}" created successfully.`),B(),await ke();else if(Ke==="update"){if(!$)throw new Error("Missing lead identifier for update.");M(!0);const Z=await ie.put(`/leads/${$}`,G);q.success(`Lead "${V}" updated successfully.`),a&&a.id===$&&s(null),B(),await ke()}else if(Ke==="delete"){if(!$)throw new Error("Missing lead identifier for deletion.");await ie.delete(`/leads/${$}`),q.success(`Lead "${V}" deleted successfully.`),a?.id===$&&s(null),await ke()}}catch(Z){console.error(Z);const Se=Ke==="create"?"Failed to create lead. Please review the details and try again.":Ke==="update"?"Failed to update lead. Please review the details and try again.":"Failed to delete lead. Please try again.",me=Z.response?.data?.detail||Se;q.error(me)}finally{(Ke==="create"||Ke==="update")&&M(!1),Ke!=="edit"&&(Q(!1),X(null))}},ee=()=>{z||X(null)},pe=u.filter(ge=>ge.status==="New").length,Ue=u.filter(ge=>ge.status==="Contacted").length,Ze=u.filter(ge=>ge.status==="Qualified").length,nt=u.filter(ge=>ge.status==="Converted").length,Je=u.filter(ge=>ge.status==="Lost").length,Oe=[{title:"New",value:pe,icon:Gn,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:Ue,icon:At,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:Ze,icon:ba,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:nt,icon:Bl,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:Je,icon:Ps,color:"text-red-600",bgColor:"bg-red-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[p&&n.jsx(zt,{message:"Loading leads..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Gn,{className:"mr-2 text-blue-600"}),"Leads"]}),n.jsx("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{_e(),Re(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(un,{className:"mr-2"})," Add Lead"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Oe.map(ge=>n.jsx(xFe,{...ge},ge.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Ht,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search leads",value:v,onChange:fe,className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:b,onChange:ge=>C(ge.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Name"}),n.jsx("th",{className:"py-3 px-4",children:"Company"}),n.jsx("th",{className:"py-3 px-4",children:"Job Title"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:ne.length>0?ye.map(ge=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>Fe(ge),children:[n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[ge.first_name," ",ge.last_name]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:ge.company_name||"--"})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:ge.title||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:ge.email||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:ge.assigned_to?`${ge.assigned_to.first_name} ${ge.assigned_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${hFe(ge.status||"New")}`,children:fFe(ge.status||"New")})})]},ge.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No leads found."})})})]})}),n.jsx(tn,{className:"mt-4",totalItems:ne.length,pageSize:E,currentPage:w,onPrev:Ie,onNext:Ve,onPageSizeChange:ge=>{k(ge),S(1)},pageSizeOptions:[10,20,30,40,50],label:"leads"}),r&&n.jsx("div",{id:"modalBackdrop",onClick:xe,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:ge=>ge.stopPropagation(),children:[n.jsx("button",{onClick:()=>{B(),Re(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:_?"Edit Lead":"Add New Lead"}),n.jsxs("form",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),n.jsx("input",{type:"text",name:"first_name",value:A.first_name,onChange:ae,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"Smith",name:"last_name",value:A.last_name,onChange:ae,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                      ${He&&!A.last_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Company ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:A.company_name,onChange:ae,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${He&&!A.company_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Job Title",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:A.title,onChange:ae,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${He&&!A.title?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),n.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:A.department,onChange:ae,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Email",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:A.email,onChange:ae,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${He&&!A.email?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"work_ccode",value:A.work_ccode,onChange:ae,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:pA.map(ge=>n.jsx("option",{value:ge.code,children:ge.code},ge.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:A.work_phone,onChange:ae,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m1_ccode",value:A.m1_ccode,onChange:ae,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:pA.map(ge=>n.jsx("option",{value:ge.code,children:ge.code},ge.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:A.mobile_phone_1,onChange:ae,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m2_ccode",value:A.m2_ccode,onChange:ae,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:pA.map(ge=>n.jsx("option",{value:ge.code,children:ge.code},ge.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:A.mobile_phone_2,onChange:ae,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),n.jsx("input",{type:"text",name:"address",value:A.address,onChange:ae,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:`w-full rounded-lg ${He&&!A.lead_owner?"border border-red-400":"border border-gray-300"}`,children:n.jsx(yFe,{items:Array.isArray(o)?o:[],value:A.lead_owner??"",placeholder:"Search a user...",getLabel:ge=>`${ge.first_name} ${ge.last_name}`,onChange:ge=>{const Ke=o.find($=>String($.id)===String(ge));d(Ke);let G=null;Ke&&Ke.assigned_territory&&Ke.assigned_territory.length===1&&(G=Ke.assigned_territory[0].id),T($=>({...$,lead_owner:ge,territory_id:G}))}})})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),n.jsxs("select",{name:"territory_id",value:A.territory_id||"",onChange:ae,disabled:!c||!c.assigned_territory||c.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[n.jsx("option",{value:"",disabled:!0,children:c?c.assigned_territory&&c.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),c&&c.assigned_territory&&c.assigned_territory.map(ge=>n.jsx("option",{value:ge.id,children:ge.name},ge.id))]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),n.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:A.source,onChange:ae,children:[n.jsx("option",{value:"",disabled:!0,children:"Select Source"}),n.jsx("option",{value:"Website",children:"Website"}),n.jsx("option",{value:"Referral",children:"Referral"}),n.jsx("option",{value:"Cold call",children:"Cold call"}),n.jsx("option",{value:"Event",children:"Event"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),n.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:A.notes,onChange:ae,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("button",{type:"button",onClick:()=>{B(),Re(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:D||z,children:"Cancel"}),n.jsx("button",{type:"submit",onClick:it,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:D||z,children:D||z?"Processing...":_?"Update Lead":"Save Lead"})]})]})]})}),W&&n.jsx(pFe,{open:!0,title:W.title,message:W.message,confirmLabel:W.confirmLabel,cancelLabel:W.cancelLabel,variant:W.variant,onConfirm:mt,onCancel:ee,loading:z}),a&&!r&&!_&&n.jsx(FZ,{relatedActs:de,lead:a,onBack:Ye,fetchLeads:ke,setSelectedLead:s,onEdit:ce,onDelete:Ee})]})}function pFe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function xFe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function yFe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=h.useState(!1),[d,u]=h.useState(""),f=h.useRef(null),p=e.find(N=>String(N.id)===String(t)),x=p?s(p):"",v=h.useMemo(()=>{const N=d.trim().toLowerCase();return(N?e.filter(C=>(s(C)||"").toLowerCase().includes(N)):e).slice(0,o)},[e,d,s,o]);return h.useEffect(()=>{const N=b=>{f.current&&!f.current.contains(b.target)&&c(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),h.useEffect(()=>{l||u("")},[l]),n.jsxs("div",{ref:f,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:l?d:x,placeholder:r,onFocus:()=>!i&&c(!0),onChange:N=>{u(N.target.value),l||c(!0)},className:"w-full rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:v.length>0?v.map(N=>{const b=String(N.id),C=s(N),w=String(t)===b;return n.jsx("button",{type:"button",onClick:()=>{a(b),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${w?"bg-blue-50":""}`,children:C||"--"},b)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const rb={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},Ga=({label:e,value:t,name:a,className:s=""})=>n.jsxs("div",{className:`flex flex-col ${s}`,children:[n.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),n.jsx("input",{type:"text",name:a,defaultValue:t,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),bFe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(Ga,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),n.jsx(Ga,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),n.jsx(Ga,{label:"Industry",name:"industry",value:e.industry})]}),n.jsx(Ga,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),n.jsx(Ga,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),vFe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Ga,{label:"First Name",name:"firstName",value:e.firstName}),n.jsx(Ga,{label:"Last Name",name:"lastName",value:e.lastName}),n.jsx(Ga,{label:"Department",name:"department",value:e.department}),n.jsx(Ga,{label:"Title",name:"title",value:e.title}),n.jsx(Ga,{label:"Work Phone",name:"workPhone",value:e.workPhone}),n.jsx(Ga,{label:"Email",name:"email",value:e.email}),n.jsx(Ga,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),n.jsx(Ga,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),wFe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Ga,{label:"Deal Name",name:"dealName",value:e.dealName}),n.jsxs("div",{className:"flex",children:[n.jsx(Ga,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),n.jsx("div",{className:"flex flex-col justify-end ml-1",children:n.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),n.jsx(Ga,{label:"Stage",name:"stage",value:e.stage}),n.jsx(Ga,{label:"Territory",name:"territory",value:e.territory})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Ga,{label:"Description",name:"description",value:e.description}),n.jsx(Ga,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function NFe({isOpen:e,onClose:t}){const[a,s]=h.useState(1),r=3;if(!e)return null;const i=()=>{a<r?s(a+1):(t(),s(1))},o=()=>{a>1&&s(a-1)},l=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],c=()=>{switch(a){case 1:return n.jsx(bFe,{data:rb});case 2:return n.jsx(vFe,{data:rb});case 3:return n.jsx(wFe,{data:rb});default:return null}};return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:rb.accountName})]}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:n.jsx(VN,{className:"w-6 h-6"})})]}),n.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:l.map(d=>n.jsx("button",{onClick:()=>s(d.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${a===d.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:d.name},d.id))}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c()}),n.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[a>1&&n.jsx("button",{onClick:o,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),a<r?n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}function BZ({selectedDeal:e,onStatusUpdate:t,onClose:a}){const[s,r]=h.useState(e?.stage||""),[i,o]=h.useState(!1),l=bt(),{user:c}=Xt();h.useEffect(()=>{console.log("ManagerDealsInformation mounted sahdksd",e),console.log("User sadad:",c)},[e,c]);const d=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"}];h.useEffect(()=>{e?.stage&&r(e.stage)},[e]);const u=async()=>{if(!e||!e.id){q.error("No deal selected");return}if(!s||s===e.stage){q.info("Please select a different stage");return}const f=e.id;o(!0);try{await ie.put(`/deals/admin/${f}`,{stage:s}),a&&a(),t&&setTimeout(async()=>{await t(!0)},100),setTimeout(()=>{q.success("Deal status updated successfully")},300)}catch(p){console.error(p);const x=p.response?.data?.detail||"Failed to update deal status";q.error(x)}finally{o(!1)}};return e?n.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{const f=e.account?.id||e.account_id;l("/manager/calls",{state:{openCallModal:!0,initialCallData:{subject:e.name?`Call regarding: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assigned_to:e.assigned_deals?.id?String(e.assigned_deals.id):"",assignedTo:e.assigned_to?.id?String(e.assigned_to.id):""}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(At,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const f=encodeURIComponent(e.contact.email),p=encodeURIComponent(""),x=encodeURIComponent(""),v=`mailto:${f}?subject=${p}&body=${x}`;window.location.href=v},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Xn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{const f=e.account?.id||e.account_id;l("/manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:e.name?`Meeting: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):""}}})},children:[n.jsx(Ct,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{const f=e.account?.id||e.account_id;l("/manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:e.name?`Task for: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:s,onChange:f=>r(f.target.value),disabled:i||e.created_by!==c?.id&&e.assigned_to!==c?.id,children:d.map(f=>n.jsx("option",{value:f.value,children:f.label},f.value))}),(e.created_by===c?.id||e.assigned_to===c?.id)&&n.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:u,disabled:i||!s||s===e.stage,children:i?"Updating...":"Update"})]})]}):null}function HZ({selectedDeal:e,show:t,onClose:a,activeTab:s,setActiveTab:r,onEdit:i,onDelete:o,onStatusUpdate:l}){const c=bt(),[d]=Ds(),u=d.get("id"),[f,p]=h.useState(e||null),[x,v]=h.useState(s||"Overview"),{user:N}=Xt();h.useEffect(()=>{console.log("AdminDealsInformation mounted",f),console.log("User:",N)},[f,N]);const b=s!==void 0?s:x;if(h.useEffect(()=>{(async()=>{if(u&&!e)try{console.log("Fetching deal from route, ID:",u);const k=(await ie.get("/deals/admin/fetch-all")).data||[];console.log("All deals fetched:",k.length);const A=k.find(T=>T.id===parseInt(u));if(console.log("Found deal:",A),A){console.log("Deal data structure:",{id:A.id,name:A.name,amount:A.amount,stage:A.stage,account:A.account,contact:A.contact,assigned_deals:A.assigned_deals,deal_creator:A.deal_creator,allKeys:Object.keys(A)});const T={...A,amount:typeof A.amount=="number"?A.amount:parseFloat(A.amount||0),probability:A.probability||0};p(T)}else console.warn("Deal not found with ID:",u)}catch(E){console.error("Error fetching deal:",E)}})()},[u,e]),!f&&!u||u&&!f)return null;const C=S=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[S]||"bg-gray-100 text-gray-700";function w(S){return S?new Date(S).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),n.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:n.jsx("button",{onClick:()=>{a?a():c(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Vt,{size:25})})})]})}),n.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[n.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:f.name}),n.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${C(f.stage)}`,children:f.stage})]}),n.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",w(f.created_at)]})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[n.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[" ",f.amount?f.amount.toLocaleString():"0"]}),n.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${f.probability}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",f.probability,"% Complete "]}),(f.created_by===N?.id||f.assigned_to===N?.id)&&n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[n.jsxs("button",{type:"button",onClick:()=>{i&&i(f)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(la,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),n.jsxs("button",{type:"button",onClick:()=>{o&&o(f)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(Ut,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(S=>n.jsx("button",{onClick:()=>{r?r(S):v(S)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${b===S?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:S},S))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[b==="Overview"&&n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Description:"})," ",f.description]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Expected Close Date:"})," ",f.close_date]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("div",{className:"mt-4 py-3 w-full",children:[n.jsxs("div",{className:"relative flex flex-col w-full",children:[n.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const S=(f?.stage||"PROSPECTING").toUpperCase(),k=(T=>T==="PROSPECTING"?0:T==="QUALIFICATION"?1:T==="PROPOSAL"?2:T==="NEGOTIATION"?3:T==="CLOSED_WON"||T==="CLOSED_LOST"?4:-1)(S);return[0,1,2,3,4].map(T=>k===T?"orange":k>T?"green":"gray").map((T,_)=>n.jsxs(pt.Fragment,{children:[n.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${T==="green"?"bg-green-500 border-green-500":T==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),_<4&&n.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},_))})()}),n.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((S,E)=>n.jsx("span",{className:"text-center flex-1 break-words",children:S},E))})]}),n.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:f.stage})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),n.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Account:"})," ",f.account?.name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Primary Contact:"})," ",f.contact?.first_name," ",f.contact?.last_name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Phone:"})," ",f.contact?.work_phone]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",f.contact?.email]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Assigned To:"})," ",f.assigned_deals?.first_name," ",f.assigned_deals?.last_name]})]})]})]}),b==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:f.description||"No notes available."})]})]}),b==="Activities"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:At,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:Ct,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((S,E)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[n.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-gray-600 mt-1",children:n.jsx(S.icon,{size:24})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-gray-900 break-words",children:S.title}),n.jsx("p",{className:"text-sm text-gray-500 break-words",children:S.desc}),n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),n.jsx("p",{className:"text-sm text-gray-700 break-words",children:S.user})]})]})]}),n.jsx("p",{className:"text-sm text-gray-500 break-words",children:S.date})]},E))]}),b==="Edit"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),n.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:f.name})]}),n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),n.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:f.description})]}),n.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),n.jsx("div",{className:"w-full lg:w-auto",children:n.jsx(BZ,{selectedDeal:f,onStatusUpdate:l,onClose:a})})]})]})]})})}function jFe(){h.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const e=bt(),t=Qt(),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Stage"),[o,l]=h.useState("Filter by Owner"),[c,d]=h.useState(null),[u,f]=h.useState("Overview"),[p,x]=h.useState(!1),[v,N]=h.useState(null),[b,C]=h.useState(!1),[w,S]=h.useState(1),[E,k]=h.useState(10),[A,T]=h.useState(!1),[_,I]=h.useState(null),[R,U]=h.useState(!1),[D,M]=h.useState(!1),[W,X]=h.useState(null),[z,Q]=h.useState([]),[de,Y]=h.useState([]),[se,J]=h.useState([]),[F,Ne]=h.useState({}),[re,he]=h.useState(null);h.useEffect(()=>{const $=t.state,V=$?.dealID;if(V&&!$?.openDealModal){he(V),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(re&&v?.length>0&&!b){const $=v.find(V=>V.id===re);$?d($):q.error("Deal not found."),he(null)}},[re,v,b]);const[je,De]=h.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),[Me,ve]=h.useState(null),[Be,ke]=h.useState(null),fe={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST","Closed Cancelled Stage":"CLOSED_CANCELLED"},ne=$=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost",CLOSED_CANCELLED:"Closed Cancelled"})[$]||$||"--",Ae=$=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700",CLOSED_CANCELLED:"bg-red-100 text-red-700"})[$]||"bg-gray-100 text-gray-700",ye=h.useCallback(async $=>{try{const V=await ie.get(`/activities/deal/${$}`);Ne(V.data&&typeof V.data=="object"?V.data:{})}catch(V){console.error(V),V.response?.status===404&&(console.warn("No activities found for this account."),Ne({}))}},[]),Ie=h.useMemo(()=>{const $=a.trim().toLowerCase(),V=r.trim(),te=o.trim();return(v??[]).filter(Z=>{const Se=[Z?.name,Z?.description,Z?.account?.name,Z?.contact?.first_name,Z?.contact?.last_name,Z?.assigned_deals?.first_name,Z?.assigned_deals?.last_name],me=$===""||Se.some(be=>be==null||be===""?!1:be.toString().toLowerCase().includes($)),ue=V==="Filter by Stage"||V===""||Z.stage===fe[V]||Z.stage===V,$e=te==="Filter by Owner"||te===""||`${Z.assigned_deals?.first_name||""} ${Z.assigned_deals?.last_name||""}`.trim().toLowerCase()===te.toLowerCase();return me&&ue&&$e})},[v,a,r,o]),Ve=Math.max(1,Math.ceil(Ie.length/E)||1);h.useEffect(()=>{S(1)},[a,r,o]),h.useEffect(()=>{S($=>{const V=Math.max(1,Math.ceil(Ie.length/E)||1);return $>V?V:$})},[Ie.length]);const Te=h.useMemo(()=>{const $=(w-1)*E;return Ie.slice($,$+E)},[Ie,w]),Fe=()=>S($=>Math.max($-1,1)),Ye=()=>S($=>Math.min($+1,Ve)),B=()=>{De({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),M(!1),X(null),x(!0)},xe=async()=>{C(!0);try{const $=await ie.get("/deals/admin/fetch-all"),te=[...Array.isArray($.data)?$.data:[]].sort((Z,Se)=>{const me=Z?.created_at?new Date(Z.created_at).getTime():0;return(Se?.created_at?new Date(Se.created_at).getTime():0)-me});N(te)}catch($){$.response&&$.response.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch deals. Please try again later."),console.error($)}finally{C(!1)}},_e=async()=>{try{const $=await ie.get("/accounts/admin/fetch-all");Q(Array.isArray($.data)?$.data:[])}catch($){console.error($),$.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},ce=async()=>{try{const $=await ie.get("/contacts/admin/fetch-all");Y(Array.isArray($.data)?$.data:[])}catch($){console.error($),$.response?.status===403&&q.warn("Unable to load contacts (permission denied).")}},Ee=async()=>{try{const $=await ie.get("/users/all");J(Array.isArray($.data)?$.data:[])}catch($){console.error($),$.response?.status===403&&q.warn("Unable to load users (permission denied).")}};h.useEffect(()=>{xe(),_e(),ce(),Ee()},[]);const ae=async $=>{$&&(De({id:$.id||null,name:$.name||"",account_id:$.account_id?.toString()||"",primary_contact_id:$.primary_contact_id?.toString()||"",stage:$.stage||"PROPOSAL",amount:$.amount?.toString()||"",close_date:$.close_date?new Date($.close_date).toISOString().split("T")[0]:"",assigned_to:$.assigned_to?.toString()||"",currency:$.currency||"PHP",description:$.description||""}),ve($.account||null),ke($.contact||null),M(!0),X($.id),d(null),x(!0))},He=async($=!1)=>{try{const V=await ie.get("/deals/admin/fetch-all"),Z=[...Array.isArray(V.data)?V.data:[]].sort((Se,me)=>{const ue=Se?.created_at?new Date(Se.created_at).getTime():0;return(me?.created_at?new Date(me.created_at).getTime():0)-ue});if(N(Z),!$&&c&&c.id){const Se=Z.find(me=>me.id===c.id);Se&&d({...Se})}}catch(V){console.error("Failed to refresh deal data:",V),await xe()}},Re=$=>{const V=$.name.trim();if(!V){q.error("Deal name is required.");return}if(!$.account_id){q.error("Account is required.");return}const te=D&&W?"update":"create",Z=V;I({title:te==="create"?"Confirm New Deal":"Confirm Update",message:te==="create"?n.jsxs("span",{children:["Are you sure you want to create"," ",n.jsx("span",{className:"font-semibold",children:Z}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:Z}),"?"]}),confirmLabel:te==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:te,formData:$,targetId:W||null,name:Z}})},it=$=>{if(!$)return;const V=$.name||"this deal";I({title:"Delete Deal",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:V}),"? This action cannot be undone."]}),confirmLabel:"Delete Deal",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:$.id,name:V}})},mt=async()=>{if(!_?.action){I(null);return}const{action:$}=_,{type:V,formData:te,targetId:Z,name:Se}=$;U(!0);try{if(V==="create"){T(!0);const me={name:te.name.trim(),account_id:parseInt(te.account_id),primary_contact_id:te.primary_contact_id?parseInt(te.primary_contact_id):null,stage:te.stage,amount:te.amount?parseFloat(te.amount):null,currency:te.currency||"PHP",close_date:te.close_date||null,description:te.description||null,assigned_to:te.assigned_to?parseInt(te.assigned_to):null};await ie.post("/deals/admin/create",me),q.success(`Deal "${Se}" created successfully.`),x(!1),await xe()}else if(V==="update"){if(!Z)throw new Error("Missing deal identifier for update.");T(!0);const me={};te.name!==void 0&&(me.name=te.name.trim()),te.account_id!==void 0&&te.account_id!==""&&(me.account_id=parseInt(te.account_id)),te.primary_contact_id!==void 0&&(me.primary_contact_id=te.primary_contact_id?parseInt(te.primary_contact_id):null),te.stage!==void 0&&(me.stage=te.stage),te.amount!==void 0&&te.amount!==""&&(me.amount=parseFloat(te.amount)),te.currency!==void 0&&(me.currency=te.currency),te.close_date!==void 0&&(me.close_date=te.close_date||null),te.description!==void 0&&(me.description=te.description||null),te.assigned_to!==void 0&&(me.assigned_to=te.assigned_to?parseInt(te.assigned_to):null),await ie.put(`/deals/admin/${Z}`,me),q.success(`Deal "${Se}" updated successfully.`),x(!1),await xe()}else if(V==="delete"){if(!Z)throw new Error("Missing deal identifier for deletion.");await ie.delete(`/deals/admin/${Z}`),q.success(`Deal "${Se}" deleted successfully.`),c?.id===Z&&d(null),await xe()}}catch(me){console.error(me);const ue=V==="create"?"Failed to create deal. Please review the details and try again.":V==="update"?"Failed to update deal. Please review the details and try again.":"Failed to delete deal. Please try again.",$e=me.response?.data?.detail||ue;q.error($e)}finally{(V==="create"||V==="update")&&T(!1),U(!1),I(null)}},ee=()=>{R||I(null)},pe=()=>{x(!1),De({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),ve(null),ke(null),M(!1),X(null),T(!1)},Ue=(v??[]).filter($=>$.stage==="PROSPECTING").length,Ze=(v??[]).filter($=>$.stage==="QUALIFICATION").length,nt=(v??[]).filter($=>$.stage==="PROPOSAL").length,Je=(v??[]).filter($=>$.stage==="NEGOTIATION").length,Oe=(v??[]).filter($=>$.stage==="CLOSED_WON").length,ge=(v??[]).filter($=>$.stage==="CLOSED_LOST").length,Ke=(v??[]).filter($=>$.stage==="CLOSED_CANCELLED").length,G=[{title:"Prospecting",value:Ue,icon:Iw,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:Ze,icon:ia,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:nt,icon:Kt,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:Je,icon:Kc,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:Oe,icon:ba,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:ge,icon:Ps,color:"text-red-600",bgColor:"bg-red-100"},{title:"Closed Cancelled",value:Ke,icon:Ps,color:"text-gray-600",bgColor:"bg-gray-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[b&&n.jsx(zt,{message:"Loading deals..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Kt,{className:"mr-2 text-blue-600"}),"Deals"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:B,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(un,{className:"mr-2"})," Add Deal"]})})]}),n.jsx("div",{className:"grid grid-cols-1 p-2 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden",children:G.map($=>n.jsx(SFe,{...$},$.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Ht,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search deals",value:a,onChange:$=>s($.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[n.jsxs("select",{value:r,onChange:$=>i($.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),n.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),n.jsx("option",{value:"Qualification Stage",children:"Qualification"}),n.jsx("option",{value:"Proposal Stage",children:"Proposal"}),n.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),n.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),n.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"}),n.jsx("option",{value:"Closed Cancelled Stage",children:"Closed Cancelled"})]}),n.jsxs("select",{value:o,onChange:$=>l($.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((v??[]).map($=>`${$.assigned_deals?.first_name} ${$.assigned_deals?.last_name}`))].map(($,V)=>n.jsx("option",{value:$,children:$},V))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Stage"}),n.jsx("th",{className:"py-3 px-4",children:"Value"}),n.jsx("th",{className:"py-3 px-4",children:"Close Date"}),n.jsx("th",{className:"py-3 px-4",children:"Owner"})]})}),n.jsx("tbody",{children:Ie.length>0?Te.map($=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{d({...$}),ye($.id)},children:[n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:$.deal_id?$.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:$.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:$.description||"--"})]})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:$.account?.name||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:$.contact?.first_name&&$.contact?.last_name?`${$.contact.first_name} ${$.contact.last_name}`:$.contact?.first_name||$.contact?.last_name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Ae($.stage)}`,children:ne($.stage)})}),n.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",$.amount?.toLocaleString()||"0"]}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:$.close_date||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:$.assigned_deals?.first_name&&$.assigned_deals?.last_name?`${$.assigned_deals.first_name} ${$.assigned_deals.last_name}`:$.assigned_deals?.first_name||$.assigned_deals?.last_name||"--"})]},$.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No deals found."})})})]})}),n.jsx(tn,{className:"mt-4",totalItems:Ie.length,pageSize:E,currentPage:w,onPrev:Fe,onNext:Ye,onPageSizeChange:$=>{k($),S(1)},pageSizeOptions:[10,20,30,40,50],label:"deals"}),p&&n.jsx(_Fe,{onClose:pe,formData:je,setFormData:De,isEditing:D,onSubmit:Re,isSubmitting:A||R,accounts:z,contacts:de,users:se,currentAccount:Me,currentContact:Be}),c&&n.jsx(HZ,{relatedActs:F,selectedDeal:c,show:!!c,onClose:()=>d(null),activeTab:u,setActiveTab:f,onEdit:ae,onDelete:it,onStatusUpdate:He}),_&&n.jsx(CFe,{open:!0,title:_.title,message:_.message,confirmLabel:_.confirmLabel,cancelLabel:_.cancelLabel,variant:_.variant,onConfirm:mt,onCancel:ee,loading:R})]})}function CFe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function SFe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function _Fe({onClose:e,formData:t,setFormData:a,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,accounts:o=[],contacts:l=[],users:c=[],currentAccount:d=null,currentContact:u=null}){const[f,p]=h.useState(!1),x=b=>{if(b.preventDefault(),p(!0),!t.name?.trim()){q.error("Deal name is required.");return}const C=Number(t.amount);if(!t.amount||isNaN(C)||C<=0){q.error("Amount must be a number greater than 0.");return}if(!t.account_id){q.error("Please select an account.");return}if(!t.primary_contact_id){q.error("Please select a primary contact.");return}if(!t.assigned_to){q.error("Please assign this deal to a user.");return}r?.(t)},v=b=>{b.target.id==="modalBackdrop"&&e()},N=h.useMemo(()=>{const b=String(t.account_id||"").trim(),C=Array.isArray(l)?l:[];return b?C.filter(w=>{const E=[w?.account_id,w?.accountId,w?.account?.id,w?.account?.account_id,w?.account?.accountId].find(k=>k!=null&&String(k).trim()!=="");return E?String(E)===b:!1}):C},[l,t.account_id]);return h.useEffect(()=>{const b=String(t.account_id||"").trim(),C=String(t.primary_contact_id||"").trim();if(!C||!b)return;N.some(S=>String(S?.id)===C)||a(S=>({...S,primary_contact_id:""}))},[t.account_id,t.primary_contact_id,N,a]),n.jsx("div",{id:"modalBackdrop",onClick:v,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:b=>b.stopPropagation(),children:[n.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Deal":"Create Deal"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:x,noValidate:!0,children:[n.jsx(yA,{label:"Deal Name",name:"name",value:t.name,onChange:b=>a({...t,name:b.target.value}),placeholder:"Enter deal name",required:!0,isSubmitted:f,className:"md:col-span-2"}),n.jsx(bA,{label:"Account",value:t.account_id||"",onChange:b=>a({...t,account_id:b}),items:o||[],getLabel:b=>b?.name??"",placeholder:"Search account...",disabled:i,currentItem:d,required:!0,isSubmitted:f}),n.jsx(bA,{label:"Primary Contact",value:t.primary_contact_id||"",onChange:b=>a({...t,primary_contact_id:b}),items:N||[],getLabel:b=>`${b?.first_name??""} ${b?.last_name??""}`.trim()||b?.email||"",placeholder:"Search contact...",disabled:i,currentItem:u,required:!0,isSubmitted:f}),n.jsx(Y7,{label:"Stage",name:"stage",value:t.stage,onChange:b=>a({...t,stage:b.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}],disabled:i}),n.jsx(yA,{label:"Amount",name:"amount",type:"number",step:"0.01",value:t.amount,onChange:b=>a({...t,amount:b.target.value}),placeholder:"0",required:!0,isSubmitted:f}),n.jsx(Y7,{label:"Currency",name:"currency",value:t.currency||"PHP",onChange:b=>a({...t,currency:b.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),n.jsx(yA,{label:"Close Date",name:"close_date",type:"date",value:t.close_date||"",onChange:b=>a({...t,close_date:b.target.value}),disabled:i}),n.jsx(bA,{label:"Assign To",value:t.assigned_to||"",onChange:b=>a({...t,assigned_to:b}),items:c||[],getLabel:b=>`${b?.first_name??""} ${b?.last_name??""}`.trim()||b?.email||"",placeholder:"Search assignee...",disabled:i,required:!0,isSubmitted:f,className:"md:col-span-2"}),n.jsx(TFe,{label:"Description",name:"description",value:t.description,onChange:b=>a({...t,description:b.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Deal":"Save Deal"})]})]})]})})}function yA({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function Y7({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))})]})}function bA({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",currentItem:c=null,required:d=!1,isSubmitted:u=!1}){const f=u&&d&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",d&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(AFe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,currentItem:c,hasError:f})]})}function AFe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,currentItem:l=null,hasError:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),N=e.find(w=>String(w.id)===String(t))||l,b=N?s(N):"",C=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(E=>(s(E)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:b,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${c?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:C.length>0?C.map(w=>{const S=String(w.id),E=s(w),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:E||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function TFe({label:e,name:t,value:a,onChange:s,placeholder:r,required:i=!1,disabled:o=!1,className:l="",rows:c=3}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,required:i,disabled:o,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}const vA=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],wA={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:"",subtotal:0,tax_rate:0,tax_amount:0,discount_type:"",discount_value:0,discount_amount:0,currency:"PHP",items:[]},Ei=e=>{if(!e)return"Draft";const t=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[t]||"Draft"},NA=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",EFe=e=>{switch(Ei(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},kFe=e=>{switch(Ei(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},ib=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",gg=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",LFe=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const t=new Date(e);if(isNaN(t.getTime()))return"";const a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`}catch{return""}},jA=(e,t)=>{if(!e||t==null||t==="")return"";const a=Number(t);if(Number.isNaN(a))return"";const s=new Date(e);return isNaN(s.getTime())?"":(s.setDate(s.getDate()+a),s.toISOString().slice(0,10))},Q7=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},K7=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},fw=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},PFe=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const s of e){const r=localStorage.getItem(s);if(r)try{const i=JSON.parse(r),o=fw(i);if(o)return o}catch{}}const t=localStorage.getItem("user_id"),a=fw(t);return a||null},DFe=e=>{if(!e)return"";const a=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""},OFe=e=>{if(!e)return"";const a=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""};function MFe(){const e=bt(),t=Qt(),{user:a}=Xt(),s=a?.company?.currency||"";h.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[r,i]=h.useState([]),[o,l]=h.useState(!1),[c,d]=h.useState([]),[u,f]=h.useState([]),[p,x]=h.useState([]),[v,N]=h.useState([]),[b,C]=h.useState(null),[w,S]=h.useState(null),[E,k]=h.useState(!1),[A,T]=h.useState(!1),[_,I]=h.useState(!1),[R,U]=h.useState(null),[D,M]=h.useState(!1),[W,X]=h.useState(null),[z,Q]=h.useState(wA),[de,Y]=h.useState(""),[se,J]=h.useState("Filter by Status"),[F,Ne]=h.useState(null),[re,he]=h.useState(1),[je,De]=h.useState(10),[Me,ve]=h.useState("Overview"),[Be,ke]=h.useState("Draft"),[fe,ne]=h.useState([]),[Ae,ye]=h.useState(null);h.useEffect(()=>{const H=t.state?.quoteID;if(H){ye(H),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(Ae&&r.length>0&&!o){const L=r.find(H=>H.id===Ae);L?S(L):q.error("Quote not found."),ye(null)}},[Ae,p,o]),h.useEffect(()=>{let L=!0;return(async()=>{const we=PFe();if(we&&L){C(we);return}try{const Pe=await ie.get("/auth/me"),le=fw(Pe?.data);if(le&&L){C(le);return}}catch{}try{const Pe=await ie.get("/users/me"),le=fw(Pe?.data);if(le&&L){C(le);return}}catch{}L&&C(null)})(),()=>{L=!1}},[]);const Ie=h.useCallback(L=>L&&u.find(we=>String(we.id)===String(L))?.name||"",[u]),Ve=h.useCallback(L=>{if(!L)return"";const H=p.find(we=>String(we.id)===String(L));return H?`${H.first_name} ${H.last_name}`.trim():""},[p]),Te=h.useCallback(L=>{if(!L)return"--";const H=c.find(we=>String(we.id)===String(L));return H?.deal_name||H?.name||`Deal #${Q7(L)}`},[c]),Fe=h.useCallback(L=>{const H=c.find(le=>String(le.id)===String(L)),we=DFe(H);let Pe=OFe(H);if(!Pe&&we){const le=p.filter(Le=>String(Le.account_id||"")===String(we));if(le.length>0){const Le=[...le].sort((Qe,vt)=>{const gt=`${Qe.first_name||""} ${Qe.last_name||""}`.trim().toLowerCase(),Bt=`${vt.first_name||""} ${vt.last_name||""}`.trim().toLowerCase();return gt.localeCompare(Bt)});Pe=String(Le[0].id)}}if(we&&Pe){const le=p.find(Le=>String(Le.id)===String(Pe));le?.account_id&&String(le.account_id)!==String(we)&&(Pe="")}return{accountId:we||"",contactId:Pe||""}},[c,p]),Ye=h.useCallback(L=>{if(!L)return"--";if(L.deal?.deal_name)return L.deal.deal_name;if(L.deal?.name)return L.deal.name;const H=L.deal_id||L.deal?.id;return H?Te(H):"--"},[Te]),B=h.useCallback(L=>{if(!L)return"--";if(L.account?.name)return L.account.name;let H=L.account_id||L.account?.id;if(!H){const we=L.deal_id||L.deal?.id;we&&(H=Fe(we).accountId)}return H?Ie(H)||`Account #${H}`:"--"},[Fe,Ie]),xe=h.useCallback(L=>{if(!L)return"--";if(L.contact?.first_name||L.contact?.last_name)return`${L.contact?.first_name||""} ${L.contact?.last_name||""}`.trim()||"--";let H=L.contact_id||L.contact?.id;if(!H){const Pe=L.deal_id||L.deal?.id;Pe&&(H=Fe(Pe).contactId)}return(H?Ve(H):"")||(H?`Contact #${H}`:"--")},[Fe,Ve]),_e=h.useCallback(async(L=null)=>{l(!0);try{const H=await ie.get("/quotes/admin/fetch-all"),Pe=[...Array.isArray(H.data)?H.data:[]].sort((le,Le)=>{const Qe=le?.created_at||le?.updated_at||0,vt=Le?.created_at||Le?.updated_at||0;return new Date(vt)-new Date(Qe)});if(i(Pe),L){const le=Pe.find(Le=>Le.id===L);S(le||null)}}catch(H){console.error(H),i([]),H.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch quotes. Please try again later.")}finally{l(!1)}},[]),ce=h.useCallback(async()=>{try{const L=await ie.get("/deals/admin/fetch-all");d(Array.isArray(L.data)?L.data:[])}catch(L){console.error(L),L.response?.status===403&&q.warn("Unable to load deals (permission denied).")}},[]),Ee=h.useCallback(async()=>{try{const L=await ie.get("/accounts/admin/fetch-all");f(Array.isArray(L.data)?L.data:[])}catch(L){console.error(L),L.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},[]),ae=h.useCallback(async()=>{try{const L=await ie.get("/contacts/admin/fetch-all");x(Array.isArray(L.data)?L.data:[])}catch(L){console.error(L),L.response?.status===403&&q.warn("Unable to load contacts (permission denied).")}},[]),He=h.useCallback(async()=>{try{const L=await ie.get("/users/all");N(Array.isArray(L.data)?L.data:[])}catch(L){console.error(L),L.response?.status===403&&q.warn("Unable to load users (permission denied).")}},[]);h.useEffect(()=>{_e(),ce(),Ee(),ae(),He()},[_e,ce,Ee,ae,He]);const Re=h.useMemo(()=>{const L=de.trim().toLowerCase(),H=se.trim();return r.filter(we=>{const Pe=Ye(we),le=B(we),Le=xe(we),Qe=jA(we.presented_date,we.validity_days),vt=[we.quote_id,Pe,le,Le,we.total_amount?.toString(),we.validity_days?.toString(),we.presented_date?gg(we.presented_date):"",Qe?gg(Qe):"",we.assigned_user?.first_name,we.assigned_user?.last_name,we.creator?.first_name,we.creator?.last_name,we.status,we.notes,ib(we.created_at),ib(we.updated_at)],gt=L===""||vt.some(wn=>wn==null?!1:wn.toString().toLowerCase().includes(L)),Bt=H==="Filter by Status"||Ei(we.status)===H;return gt&&Bt})},[r,de,se,Ye,B,xe]),it=Math.max(1,Math.ceil(Re.length/je)||1);h.useEffect(()=>he(1),[de,se]),h.useEffect(()=>{he(L=>{const H=Math.max(1,Math.ceil(Re.length/je)||1);return L>H?H:L})},[Re.length,je]);const mt=h.useMemo(()=>{const L=(re-1)*je;return Re.slice(L,L+je)},[Re,re,je]),ee=()=>he(L=>Math.max(L-1,1)),pe=()=>he(L=>Math.min(L+1,it)),Ue=L=>{S(L),ve("Overview"),ke(Ei(L?.status)||"Draft")},Ze=()=>{S(null),ve("Overview")},nt=L=>{L.target.id==="quoteModalBackdrop"&&!D&&Ze()},Je=h.useCallback(()=>{k(!1),T(!1),X(null),Q(wA),I(!1)},[]),Oe=L=>{L.target.id==="modalBackdrop"&&!_&&!D&&Je()},ge=L=>{const{name:H,value:we}=L.target;if(H==="deal_id"){const{accountId:Pe,contactId:le}=Fe(we);Q(Le=>({...Le,deal_id:we,account_id:Pe,contact_id:le}));return}Q(Pe=>({...Pe,[H]:we}))},Ke=()=>{Q(wA),T(!1),X(null),k(!0)},G=L=>{if(!L)return;S(null);const H=L.deal?.id?String(L.deal.id):L.deal_id?String(L.deal_id):"",we=H?Fe(H):{accountId:"",contactId:""},Pe=L.account?.id?String(L.account.id):L.account_id?String(L.account_id):we.accountId,le=L.contact?.id?String(L.contact.id):L.contact_id?String(L.contact_id):we.contactId,Le=L.assigned_user?.id?String(L.assigned_user.id):L.assigned_to?String(L.assigned_to):"";Q({deal_id:H,account_id:Pe||"",contact_id:le||"",total_amount:L.total_amount?.toString()||"",presented_date:LFe(L.presented_date),validity_days:L.validity_days!==null&&L.validity_days!==void 0?String(L.validity_days):"",status:Ei(L.status)||"Draft",assigned_to:Le,notes:L.notes||"",subtotal:parseFloat(L.subtotal)||0,tax_rate:parseFloat(L.tax_rate)||0,tax_amount:parseFloat(L.tax_amount)||0,discount_type:L.discount_type||"",discount_value:parseFloat(L.discount_value)||0,discount_amount:parseFloat(L.discount_amount)||0,currency:L.currency||"PHP",items:Array.isArray(L.items)?L.items.map(Qe=>({id:Qe.id,item_type:Qe.item_type||"Product",name:Qe.name||"",description:Qe.description||"",sku:Qe.sku||"",variant:Qe.variant||"",unit:Qe.unit||"pcs",quantity:parseFloat(Qe.quantity)||1,unit_price:parseFloat(Qe.unit_price)||0,discount_percent:parseFloat(Qe.discount_percent)||0,discount_amount:parseFloat(Qe.discount_amount)||0,line_total:parseFloat(Qe.line_total)||0,sort_order:Qe.sort_order||0})):[]}),T(!0),X(L.id),k(!0)},$=L=>{if(L.target.checked){const H=mt.map(we=>we.id);ne(H)}else ne([])},V=L=>{ne(H=>H.includes(L)?H.filter(we=>we!==L):[...H,L])},te=L=>{if(!L)return;const H=L.quote_id||"this quote";U({title:"Delete Quote",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:H}),"? This action cannot be undone."]}),confirmLabel:"Delete Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:L.id,name:H}})},Z=async()=>{fe.length!==0&&U({title:"Delete Quotes",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:fe.length})," selected quotes? This action cannot be undone."]}),confirmLabel:`Delete ${fe.length} Quote(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",quote_ids:fe}})},[Se,me]=h.useState(!1),ue=L=>{if(L.preventDefault(),me(!0),!b){q.error("Unable to determine current user. Please log in again.");return}if(!z.deal_id){q.error("Deal is required.");return}if(!z.assigned_to){q.error("Assigned To is required.");return}const we=Fe(z.deal_id),Pe=z.items.map((gt,Bt)=>({item_type:gt.item_type||"Product",name:gt.name,description:gt.description||null,sku:gt.sku||null,variant:gt.variant||null,unit:gt.unit||null,quantity:parseFloat(gt.quantity)||1,unit_price:parseFloat(gt.unit_price)||0,discount_percent:parseFloat(gt.discount_percent)||0,sort_order:gt.sort_order??Bt})),le={deal_id:Number(z.deal_id),account_id:we.accountId?Number(we.accountId):null,contact_id:we.contactId?Number(we.contactId):null,subtotal:parseFloat(z.subtotal)||0,tax_rate:parseFloat(z.tax_rate)||0,tax_amount:parseFloat(z.tax_amount)||0,discount_type:z.discount_type||null,discount_value:parseFloat(z.discount_value)||0,discount_amount:parseFloat(z.discount_amount)||0,total_amount:parseFloat(z.total_amount)||0,currency:z.currency||"PHP",presented_date:z.presented_date||null,validity_days:z.validity_days===""?null:Number(z.validity_days),status:z.status||"Draft",assigned_to:z.assigned_to?Number(z.assigned_to):null,notes:z.notes?.trim()||null,items:Pe},Le=A&&W?"update":"create",Qe=Te(z.deal_id),vt=Le==="create"?{...le,created_by_id:Number(b)}:le;U({title:Le==="create"?"Confirm New Quote":"Confirm Update",message:Le==="create"?n.jsxs("span",{children:["Are you sure you want to create a quote for"," ",n.jsx("span",{className:"font-semibold",children:Qe}),"?"]}):n.jsxs("span",{children:["Save changes to"," ",n.jsx("span",{className:"font-semibold",children:Qe}),"?"]}),confirmLabel:Le==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:Le,payload:vt,targetId:W||null,name:Qe}})},$e=async()=>{if(!R?.action){U(null);return}const{action:L}=R,{type:H,payload:we,targetId:Pe,name:le}=L;M(!0);try{if(H==="create")I(!0),await ie.post("/quotes/admin",we),q.success("Quote created successfully."),Je(),await _e();else if(H==="update"){if(!Pe)throw new Error("Missing quote identifier for update.");I(!0),await ie.put(`/quotes/admin/${Pe}`,we),q.success("Quote updated successfully."),Je(),await _e(),w?.id===Pe&&S(null)}else if(H==="delete"){if(!Pe)throw new Error("Missing quote identifier for deletion.");const Le=w?.id;Ne(Pe),await ie.delete(`/quotes/admin/${Pe}`),q.success(`Quote "${le}" deleted successfully.`),await _e(Le&&Le!==Pe?Le:null),Le===Pe&&S(null)}else H==="bulk-delete"&&(await ie.post("/quotes/admin/bulk-delete",{quote_ids:fe}),q.success(`Successfully deleted ${fe.length} quotes`),ne([]),await _e())}catch(Le){console.error(Le);const Qe=H==="create"?"Failed to create quote. Please review the details and try again.":H==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";q.error(Qe),(H==="create"||H==="update")&&I(!1),H==="delete"&&Ne(null)}finally{(H==="create"||H==="update")&&I(!1),H==="delete"&&Ne(null),M(!1),U(null)}},be=()=>{D||U(null)},We=h.useCallback((L,H)=>{const we=L?.deal_id??L?.deal?.id??"",Pe=we?Number(we):null,le=Pe?Fe(String(Pe)):{accountId:"",contactId:""},Le=L?.account_id??L?.account?.id??le.accountId??null,Qe=L?.contact_id??L?.contact?.id??le.contactId??null,vt=L?.total_amount??0,gt=L?.assigned_to??L?.assigned_user?.id??null;return{deal_id:Pe,account_id:Le!=null&&String(Le).trim()!==""?Number(Le):null,contact_id:Qe!=null&&String(Qe).trim()!==""?Number(Qe):null,total_amount:Number(vt),presented_date:L?.presented_date||null,validity_days:L?.validity_days===""||L?.validity_days===void 0||L?.validity_days===null?null:Number(L.validity_days),status:H,assigned_to:gt!=null&&String(gt).trim()!==""?Number(gt):null,notes:L?.notes?.trim()||null}},[Fe]),ft=h.useCallback(async()=>{if(!w?.id)return;const L=Ei(Be),H=[L,L.toLowerCase()],we=async Pe=>ie.patch(`/quotes/admin/${w.id}/status`,{status:Pe},{headers:{"Content-Type":"application/json"}});try{let Pe=!1;for(const le of H)try{await we(le),Pe=!0;break}catch(Le){if(Le?.response?.status===422)continue;throw Le}if(!Pe){const le=We(w,L);if(!le.deal_id){q.error("Cannot update status: missing deal_id on selected quote.");return}if(!le.total_amount||le.total_amount<=0){q.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await ie.put(`/quotes/admin/${w.id}`,le)}q.success(`Quote status updated to ${L}`),S(null),ve("Overview"),await _e()}catch(Pe){console.error(Pe);const le=Pe?.response?.data?.message||(Pe?.response?.data?.errors?Object.values(Pe.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";q.error(le)}},[w,Be,_e,We]),yt=[{label:"Filter by Status",value:"Filter by Status"},...vA.map(L=>({label:L.label,value:L.value}))],Tt=R?.action?.type==="delete"?R.action.targetId:null,Et=w&&(F===w.id||Tt===w.id),Gt=w&&F===w.id,oe=w?n.jsx("div",{id:"quoteModalBackdrop",onClick:nt,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:L=>L.stopPropagation(),children:[n.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:n.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),n.jsx("button",{onClick:Ze,className:"text-gray-500 hover:text-white transition cursor-pointer",children:n.jsx(Wn,{size:25})})]})}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:Ye(w)}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${kFe(w.status)}`,children:NA(w.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>G(w),disabled:D||R?.action?.type==="update"&&R.action.targetId===w.id,children:[n.jsx(ia,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>te(w),disabled:!!Et,children:Gt?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Ut,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-1 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(L=>n.jsx("button",{onClick:()=>ve(L),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${Me===L?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:L},L))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Me==="Overview"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Quote ID:"}),n.jsx("p",{children:K7(w.quote_id)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Deal:"}),n.jsx("p",{children:Ye(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Account:"}),n.jsx("p",{children:B(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact:"}),n.jsx("p",{children:xe(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Total Amount:"}),n.jsx("p",{children:w.total_amount?`${s}${Number(w.total_amount).toLocaleString()}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Presented Date:"}),n.jsx("p",{children:gg(w.presented_date)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Validity Days:"}),n.jsx("p",{children:w.validity_days!==null&&w.validity_days!==void 0?w.validity_days:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),n.jsx("p",{children:gg(jA(w.presented_date,w.validity_days))||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:NA(w.status)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:w.assigned_user?`${w.assigned_user.first_name} ${w.assigned_user.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:w.creator?`${w.creator.first_name} ${w.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:ib(w.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:ib(w.updated_at)||"N/A"})]})]}),w.items&&w.items.length>0&&n.jsx("div",{className:"mt-6",children:n.jsx(od,{items:w.items,onChange:()=>{},currencySymbol:s,readOnly:!0,taxRate:parseFloat(w.tax_rate)||0,discountType:w.discount_type,discountValue:parseFloat(w.discount_value)||0})})]}),Me==="Notes"&&n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),n.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:w.notes||"No notes available."})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(At,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Quotes"}}}),children:[n.jsx(Ct,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:Be||Ei(w.status)||"Draft",onChange:L=>ke(L.target.value),children:vA.map(L=>n.jsx("option",{value:L.value,children:L.label},L.value))}),n.jsx("button",{onClick:ft,disabled:Ei(Be)===Ei(w.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Ei(Be)===Ei(w.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,rt=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[o&&n.jsx(zt,{message:"Loading quotes..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(xn,{className:"mr-2 text-blue-600"})," Quotes"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto gap-2",children:n.jsxs("button",{onClick:()=>{Ke(),me(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(un,{className:"mr-2"})," Add Quote"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Ht,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search quotes",value:de,onChange:L=>Y(L.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:se,onChange:L=>J(L.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:yt.map(L=>n.jsx("option",{value:L.value,children:L.label},L.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:mt.length>0&&fe.length===mt.length,onChange:$,className:"cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),n.jsx("th",{className:"py-3 px-4",children:"Deal"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Expiry Date"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:fe.length>0?n.jsx("button",{onClick:Z,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${fe.length} selected items`,children:n.jsx(Ut,{size:18})}):""})]})}),n.jsx("tbody",{children:o?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"Loading quotes..."})}):Re.length>0?mt.map(L=>{const H=jA(L.presented_date,L.validity_days);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>Ue(L),children:[n.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:we=>we.stopPropagation(),children:n.jsx("input",{type:"checkbox",checked:fe.includes(L.id),onChange:()=>V(L.id),className:"cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:K7(L.quote_id)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:Ye(L)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-sm text-gray-700 break-words",children:B(L)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:xe(L)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-700",children:L.total_amount?`${s}${Number(L.total_amount).toLocaleString()}`:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${EFe(L.status)}`,children:NA(L.status)})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{children:L.assigned_user?`${L.assigned_user.first_name} ${L.assigned_user.last_name}`:"Unassigned"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-500 text-xs",children:gg(H)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top text-center w-24"})]},L.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"No quotes found."})})})]})}),n.jsx(tn,{className:"mt-4",totalItems:Re.length,pageSize:je,currentPage:re,onPrev:ee,onNext:pe,onPageSizeChange:L=>{De(L),he(1)},pageSizeOptions:[10,20,30,40,50],label:"quotes"})]}),_t=E?n.jsx("div",{id:"modalBackdrop",onClick:Oe,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:L=>L.stopPropagation(),children:[n.jsx("button",{onClick:()=>{Je(),me(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:_||D,children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:A?"Edit Quote":"Add New Quote"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:ue,children:[n.jsx(J7,{label:"Deal",name:"deal_id",value:z.deal_id,onChange:L=>{const{accountId:H,contactId:we}=Fe(L);Q(Pe=>({...Pe,deal_id:L,account_id:H,contact_id:we}))},items:Array.isArray(c)?c:[],getLabel:L=>`${Q7(L?.deal_id??"")} ${L?.name??""}`.trim(),placeholder:"Search deal...",required:!0,isSubmitted:Se,disabled:_||c.length===0,className:"md:col-span-2"}),n.jsx(Z7,{label:"Account",value:Ie(z.account_id)||(z.account_id?`Account #${z.account_id}`:""),disabled:!0}),n.jsx(Z7,{label:"Contact",value:Ve(z.contact_id)||(z.contact_id?`Contact #${z.contact_id}`:""),disabled:!0}),n.jsx("div",{className:"md:col-span-2 mt-2",children:n.jsx(od,{items:z.items,onChange:L=>Q(H=>({...H,items:L})),currencySymbol:s,readOnly:_,taxRate:z.tax_rate,discountType:z.discount_type,discountValue:z.discount_value,onTotalsChange:L=>{Q(H=>({...H,subtotal:L.subtotal,discount_amount:L.discount_amount,tax_amount:L.tax_amount,total_amount:L.total_amount}))}})}),n.jsxs("div",{className:"md:col-span-2 mt-2 p-4 bg-gray-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Pricing Settings"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Discount Type"}),n.jsxs("select",{value:z.discount_type||"",onChange:L=>Q(H=>({...H,discount_type:L.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",disabled:_,children:[n.jsx("option",{value:"",children:"No Discount"}),n.jsx("option",{value:"percentage",children:"Percentage (%)"}),n.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-600 text-xs mb-1",children:["Discount ",z.discount_type==="percentage"?"%":"Amount"]}),n.jsx("input",{type:"number",value:z.discount_value||"",onChange:L=>Q(H=>({...H,discount_value:L.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:z.discount_type==="percentage"?"100":void 0,step:"0.01",disabled:_||!z.discount_type})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Tax Rate (%)"}),n.jsx("input",{type:"number",value:z.tax_rate||"",onChange:L=>Q(H=>({...H,tax_rate:L.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:"100",step:"0.01",disabled:_})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Total Amount"}),n.jsxs("div",{className:"w-full bg-gray-100 border border-gray-300 rounded-md px-2 py-1.5 text-sm font-medium",children:[s,parseFloat(z.total_amount||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),n.jsx(X7,{label:"Presented Date",name:"presented_date",type:"date",value:z.presented_date,onChange:ge,disabled:_}),n.jsx(X7,{label:"Validity Days",name:"validity_days",type:"number",value:z.validity_days,onChange:ge,placeholder:"30",disabled:_}),n.jsx(J7,{label:"Assigned To",value:z.assigned_to||"",onChange:L=>Q(H=>({...H,assigned_to:L})),items:Array.isArray(v)?v:[],getLabel:L=>{const H=`${L?.first_name??""} ${L?.last_name??""}`.trim();return H?L?.role?`${H} (${L.role})`:H:L?.email||""},placeholder:"Search assignee...",required:!0,isSubmitted:Se,disabled:_}),n.jsx(IFe,{label:"Status",name:"status",value:z.status,onChange:ge,options:vA,required:!0,disabled:_,className:"md:col-span-2"}),n.jsx(RFe,{label:"Notes",name:"notes",value:z.notes,onChange:ge,placeholder:"Additional details...",rows:3,disabled:_,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{Je(),me(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:_||D,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:_||D,children:_?"Saving...":A?"Update Quote":"Save Quote"})]})]})]})}):null,Nt=R?n.jsx(zFe,{open:!0,title:R.title,message:R.message,confirmLabel:R.confirmLabel,cancelLabel:R.cancelLabel,variant:R.variant,onConfirm:$e,onCancel:be,loading:D}):null;return n.jsxs(n.Fragment,{children:[w?oe:rt,_t,Nt]})}function X7({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function Z7({label:e,value:t,className:a="",disabled:s=!0}){return n.jsxs("div",{className:a,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("input",{type:"text",value:t??"",disabled:s,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function IFe({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){const c=a!=null?String(a):"",u=r.some(f=>String(f.value)===c)?c:"";return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:u,onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(f=>n.jsx("option",{value:String(f.value??""),children:f.label},f.value??f.label))})]})}function J7({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx($Fe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function $Fe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",N=h.useMemo(()=>{const b=u.trim().toLowerCase();return(b?e.filter(w=>(s(w)||"").toLowerCase().includes(b)):e).slice(0,o)},[e,u,s,o]);return h.useEffect(()=>{const b=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:v,placeholder:r,onFocus:()=>!i&&d(!0),onChange:b=>{f(b.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:N.length>0?N.map(b=>{const C=String(b.id),w=s(b),S=String(t)===C;return n.jsx("button",{type:"button",onClick:()=>{a(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},C)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function RFe({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function zFe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function UFe(){const{userRole:e}=Bs();return n.jsx(Dj,{currentUserRole:e,currentUserId:null})}function FFe(){h.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,t]=h.useState(null),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Actions"),[o,l]=h.useState(1),[c,d]=h.useState(10),u=async()=>{try{const w=await ie.get("/logs/read-all");t(w.data)}catch(w){console.error("Error fetching audit logs:",w)}};h.useEffect(()=>{u()},[]);const f=h.useMemo(()=>{if(!Array.isArray(e))return[];const w=a.trim().toLowerCase(),S=r?.toUpperCase?.()||"ALL";return e.filter(k=>{const A=k.timestamp?new Date(k.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",T=`${k.entity_type||""} ${k.entity_name||k.entity_details?.name||k.entity_details?.title||k.entity_id||""}`,_=`${k.logger?.first_name||""} ${k.logger?.last_name||""}`,I=[A,_,k.action,k.entity_type,T,k.description],R=w===""||I.some(D=>D==null?!1:D.toString().toLowerCase().includes(w)),U=S==="FILTER BY ACTIONS"||(k.action||"").toUpperCase()===S;return R&&U}).sort((k,A)=>{const T=k.timestamp?new Date(k.timestamp).getTime():0;return(A.timestamp?new Date(A.timestamp).getTime():0)-T})},[e,a,r]),p=Math.max(1,Math.ceil(f.length/c)||1);h.useEffect(()=>{l(1)},[a,r]),h.useEffect(()=>{l(w=>{const S=Math.max(1,Math.ceil(f.length/c)||1);return w>S?S:w})},[f.length]);const x=h.useMemo(()=>{const w=(o-1)*c;return f.slice(w,w+c)},[f,o]);f.length===0||(o-1)*c+1,Math.min(o*c,f.length);const v=()=>l(w=>Math.max(w-1,1)),N=()=>l(w=>Math.min(w+1,p)),b=()=>{if(!f.length){Px.error("No logs to export!");return}const w=["Timestamp","User","Action","Resource","Details"],S=f.map(_=>[new Date(_.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${_.logger?.first_name||""} ${_.logger?.last_name||""}`.trim(),_.action,`${_.entity_type}: ${_.entity_id}`,_.description||""]),E=[w.join(","),...S.map(_=>_.map(I=>`"${String(I).replace(/"/g,'""')}"`).join(","))].join(`
`),k=new Blob([E],{type:"text/csv;charset=utf-8;"}),A=URL.createObjectURL(k),T=document.createElement("a");T.href=A,T.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(T),T.click(),document.body.removeChild(T),URL.revokeObjectURL(A)},C=w=>{switch((w||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&n.jsx(zt,{message:"Loading audit logs..."}),n.jsx(Lx,{toastOptions:{duration:1e3}}),n.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[n.jsx(Ct,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),n.jsxs("p",{className:"text-sm text-blue-700",children:[n.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ws,{className:"text-blue-600",size:20}),n.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:b,children:[n.jsx(Fl,{className:"mr-2"}),"Export Logs"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[n.jsx(Ht,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search audit logs",value:a,onChange:w=>s(w.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:r,onChange:w=>i(w.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),n.jsx("option",{value:"CREATE",children:"CREATE"}),n.jsx("option",{value:"DELETE",children:"DELETE"}),n.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),n.jsx("th",{className:"py-3 px-4",children:"User"}),n.jsx("th",{className:"py-3 px-4",children:"Action"}),n.jsx("th",{className:"py-3 px-4",children:"Resource"}),n.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),n.jsx("tbody",{children:Array.isArray(f)&&f.length>0?x.map((w,S)=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(w.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.name}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${C(w.action)}`,children:w.action})}),n.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[w.entity_type,": ",w.entity_id]}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.description})]},S)):n.jsx("tr",{children:n.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),n.jsx(tn,{className:"mt-4",totalItems:f.length,pageSize:c,currentPage:o,onPrev:v,onNext:N,onPageSizeChange:w=>{d(w),l(1)},pageSizeOptions:[10,20,30,40,50],label:"logs"})]})}const BFe=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"}],HFe=e=>e?String(e).toUpperCase():"",tf=e=>{const t=HFe(e);return t==="PLANNED"||t==="PENDING"?"PLANNED":t==="HELD"||t==="COMPLETED"?"HELD":t==="NOT HELD"||t==="NOT_HELD"||t==="CANCELLED"?"NOT_HELD":"PLANNED"},CA=e=>{const t=tf(e);return t==="PLANNED"?"PLANNED":t==="HELD"?"HELD":t==="NOT_HELD"?"NOT HELD":"--"},e8=e=>{switch(tf(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},t8=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function GFe(){const[e,t]=h.useState(!1),[a,s]=h.useState(null),[r,i]=h.useState(null),[o,l]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(null),[v,N]=h.useState(!1),[b,C]=h.useState(null),[w,S]=h.useState(!1),[E,k]=h.useState(!1),[A,T]=h.useState("PLANNED"),[_,I]=h.useState(!1),[R,U]=h.useState(!1),[D,M]=h.useState(null);Ds();const W=bt(),X=Qt(),z=ee=>{if(!ee)return"";const pe=String(ee).split("-");return pe.length===3?`${pe[0]}-${pe[2]}`:String(ee)},de={subject:"",call_time:(()=>{const ee=new Date,pe=ee.getFullYear(),Ue=String(ee.getMonth()+1).padStart(2,"0"),Ze=String(ee.getDate()).padStart(2,"0");return`${pe}-${Ue}-${Ze}T08:00`})(),duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[Y,se]=h.useState(de);h.useEffect(()=>{const ee=X.state,pe=ee?.callID;if(pe&&!ee?.openCallModal){M(pe),W(X.pathname,{replace:!0,state:{}});return}!ee?.openCallModal||!ee?.initialCallData||ee.initialCallData.relatedType1==="Lead"&&Array.isArray(o)&&o.length===0||ee.initialCallData.relatedType1==="Account"&&(!Array.isArray(o)||o.length===0)||(t(!0),se(Ue=>({...Ue,...ee.initialCallData,relatedTo1:ee.initialCallData.relatedTo1?String(ee.initialCallData.relatedTo1):"",relatedTo2:ee.initialCallData.relatedTo2?String(ee.initialCallData.relatedTo2):""})),W(X.pathname,{replace:!0,state:{}}))},[X.state,o]),h.useEffect(()=>{if(D&&u.length>0&&!R){const ee=u.find(pe=>pe.id===D);ee?s(ee):q.error("Call not found."),M(null)}},[D,u,R]);const J=async()=>{try{U(!0);const ee=await ie.get("/calls/admin/fetch-all"),Ue=[...Array.isArray(ee.data)?ee.data:[]].sort((Ze,nt)=>{const Je=Ze?.created_at?new Date(Ze.created_at):0;return(nt?.created_at?new Date(nt.created_at):0)-Je});f(Ue)}catch(ee){console.error("Error fetching calls:",ee),q.error("Failed to load calls")}finally{U(!1)}},F=async()=>{try{const ee=await ie.get("/users/all");x(ee.data)}catch(ee){console.error("Error fetching users: ",ee)}};h.useEffect(()=>{F(),J()},[]);const Ne=[],re="",he="Filter by Status",je="Filter by Users",[De,Me]=h.useState(1),[ve,Be]=h.useState(10),ke=u,fe=u,ne=u.length,Ae=u.filter(ee=>tf(ee.status)==="PLANNED").length,ye=u.filter(ee=>tf(ee.status)==="HELD").length,Ie=u.filter(ee=>tf(ee.status)==="NOT_HELD").length,Ve=[{title:"Total",value:ne,icon:Ls,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:Ae,icon:zs,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:ye,icon:ba,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:Ie,icon:Ps,color:"text-gray-600",bgColor:"bg-gray-100"}],[Te,Fe]=h.useState("Overview"),Ye=ee=>{const{name:pe,value:Ue}=ee.target;se(Ze=>{const nt={...Ze,[pe]:Ue};return pe==="relatedType1"&&(nt.relatedTo1="",Ue==="Lead"?(nt.relatedType2=null,nt.relatedTo2=null,d([])):Ue==="Account"&&(nt.relatedType2="Contact")),pe==="relatedType2"&&(nt.relatedTo2=""),nt})};h.useEffect(()=>{const ee=async()=>{try{l([]);let pe;Y.relatedType1==="Lead"?pe=await ie.get("/leads/admin/getLeads"):Y.relatedType1==="Account"&&(pe=await ie.get("/accounts/admin/fetch-all"));let Ue=[];if(pe&&Array.isArray(pe.data)?Ue=pe.data:Ue=[],v&&Y.relatedTo1)try{let Ze;Y.relatedType1==="Lead"?Ze=await ie.get(`/leads/get/${Y.relatedTo1}`):Y.relatedType1==="Account"&&(Ze=await ie.get(`/accounts/get/${Y.relatedTo1}`)),Ze&&Ze.data&&(Ue.some(Je=>String(Je.id)===String(Y.relatedTo1))||(Ue=[Ze.data,...Ue]))}catch(Ze){console.error("Error fetching specific related item:",Ze)}l(Ue)}catch(pe){console.error("Error fetching data:",pe),l([])}};Y.relatedType1&&ee()},[Y.relatedType1,v,Y.relatedTo1]),h.useEffect(()=>{const ee=async()=>{try{d([]);let pe;if(Y.relatedType1==="Account"&&Y.relatedTo1)Y.relatedType2==="Contact"?pe=await ie.get(`/contacts/from-acc/${Y.relatedTo1}`):Y.relatedType2==="Deal"?pe=await ie.get(`/deals/from-acc/${Y.relatedTo1}`):Y.relatedType2==="Quote"&&(pe=await ie.get(`/quotes/from-acc/${Y.relatedTo1}`));else{d([]);return}pe&&Array.isArray(pe.data)?d(pe.data):d([])}catch(pe){console.error("Error fetching data:",pe),d([])}};Y.relatedType2&&ee()},[Y.relatedType2,Y.relatedTo1,Y.relatedType1]);const[B,xe]=h.useState(!1),_e=ee=>{ee.preventDefault(),xe(!0);const pe=Y.subject;if(!pe||pe.trim()===""){q.error("Subject is required.");return}if(!Y.relatedTo1){q.error(`Please select a ${Y.relatedType1||"Lead/Account"}.`);return}if(!Y.assigned_to){q.error("Subject is required.");return}const Ze={...Y,duration_minutes:Y.duration_minutes?parseInt(Y.duration_minutes,10):null,relatedTo1:Y.relatedTo1?parseInt(Y.relatedTo1,10):null,relatedTo2:Y.relatedType1==="Lead"?null:Y.relatedTo2?parseInt(Y.relatedTo2,10):null,relatedType2:Y.relatedType1==="Lead"?null:Y.relatedType2,assigned_to:Y.assigned_to?parseInt(Y.assigned_to,10):null},nt=v&&b?"update":"create",Je=(Y.subject||"").trim()||"Untitled Call";i({title:nt==="create"?"Confirm New Call":"Confirm Update",message:nt==="create"?`Create "${Je}"?`:`Save changes to "${Je}"?`,confirmLabel:nt==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:nt,payload:Ze,targetId:b||null,name:Je}})},ce=ee=>s(ee),Ee=()=>{t(!1),N(!1),C(null)},ae=async()=>{if(!r?.action){i(null);return}const{action:ee}=r,{type:pe,payload:Ue,targetId:Ze,name:nt}=ee;k(!0);try{if(pe==="create")S(!0),await ie.post("/calls/create",Ue),q.success(`Call "${nt}" created successfully.`),t(!1),se(de),N(!1),C(null),await J();else if(pe==="update"){if(!Ze)throw new Error("Missing call identifier for update.");S(!0),await ie.put(`/calls/${Ze}`,Ue),q.success(`Call "${nt}" updated successfully.`),t(!1),se(de),N(!1),C(null),await J()}else if(pe==="delete"){if(!Ze)throw new Error("Missing call identifier for deletion.");await ie.delete(`/calls/${Ze}`),q.success(`Call "${nt}" deleted successfully.`),a?.id===Ze&&s(null),await J()}}catch(Je){const Oe=pe==="create"?"Failed to create call. Please review the details and try again.":pe==="update"?"Failed to update call. Please review the details and try again.":"Failed to delete call. Please try again.",ge=Je?.response?.data?.detail||Oe;q.error(ge)}finally{(pe==="create"||pe==="update")&&S(!1),k(!1),i(null)}},He=()=>{E||i(null)},Re=async()=>{if(a?.id)try{I(!0),await ie.put(`/calls/${a.id}`,{status:A}),q.success(`Status updated to ${CA(A)}`),f(ee=>Array.isArray(ee)?ee.map(pe=>pe.id===a.id?{...pe,status:A}:pe):ee),s(null)}catch(ee){const pe=ee.response?.data?.detail||"Failed to update status.";q.error(pe)}finally{I(!1)}};h.useEffect(()=>{a&&T(tf(a.status))},[a]);const it=a?n.jsxs("div",{id:"callModalBackdrop",onClick:ee=>ee.target.id==="callModalBackdrop"&&s(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[R&&n.jsx(zt,{message:"Loading call details..."}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),n.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:n.jsx(Wn,{size:25})})]}),n.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:a.subject}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${e8(a.status)}`,children:CA(a.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const ee=Je=>{if(!Je)return"";const Oe=new Date(Je),ge=Oe.getFullYear(),Ke=String(Oe.getMonth()+1).padStart(2,"0"),G=String(Oe.getDate()).padStart(2,"0"),$=String(Oe.getHours()).padStart(2,"0"),V=String(Oe.getMinutes()).padStart(2,"0");return`${ge}-${Ke}-${G}T${$}:${V}`},pe=a.lead?"Lead":a.account?"Account":"Lead",Ue=a.lead?a.lead.id:a.account?a.account.id:null,Ze=pe==="Lead"?null:a.contact?"Contact":a.deal?"Deal":a.quote?"Quote":"Contact",nt=pe==="Lead"?null:a.contact?a.contact.id:a.deal?a.deal.id:a.quote?a.quote.id:null;se({subject:a.subject||"",call_time:ee(a.call_time),duration_minutes:a.duration_minutes?String(a.duration_minutes):"",direction:a.direction||"Outgoing",status:a.status||"Planned",notes:a.notes||"",relatedType1:pe,relatedType2:Ze,relatedTo1:Ue?String(Ue):"",relatedTo2:nt?String(nt):"",assigned_to:a.call_assign_to?.id?String(a.call_assign_to.id):""}),N(!0),C(a.id),s(null),t(!0)},children:[n.jsx(ia,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>{const ee=a.subject||"this call";i({title:"Delete Call",message:`Are you sure you want to permanently delete "${ee}"? This action cannot be undone.`,confirmLabel:"Delete Call",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:a.id,name:ee}})},children:[n.jsx(Ut,{className:"mr-2"}),"Delete"]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(ee=>n.jsx("button",{onClick:()=>Fe(ee),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${Te===ee?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:ee},ee))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Te==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsx(ao,{label:"Call Time",value:t8(a.call_time)}),n.jsx(ao,{label:"Duration",value:a.duration_minutes?`${a.duration_minutes} min`:null}),n.jsx(ao,{label:"Direction",value:a.direction||"--"}),n.jsx(ao,{label:"Assigned To",value:`${a.call_assign_to.first_name} ${a.call_assign_to.last_name}`}),a.lead&&n.jsx(ao,{label:"Lead",value:a.lead.title}),a.account&&n.jsx(ao,{label:"Account",value:a.account.name}),a.contact&&n.jsx(ao,{label:"Contact",value:`${a.contact.first_name} ${a.contact.last_name}`}),a.deal&&n.jsx(ao,{label:"Deal",value:a.deal.name}),a.quote&&n.jsx(ao,{label:"Quote",value:z(a.quote.quote_id)}),n.jsx(ao,{label:"Created At",value:t8(a.created_at)})]})}),Te==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Call Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:a.notes||"No notes available."})]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:A,onChange:ee=>T(ee.target.value),children:[n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),n.jsx("button",{onClick:Re,disabled:_,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:_?"Updating...":"Update"})]})]})]})]})]}):null,mt=e?n.jsx("div",{id:"modalBackdrop",onClick:ee=>ee.target.id==="modalBackdrop"&&Ee(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[n.jsx("button",{onClick:()=>{Ee(),xe(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:v?"Edit Call":"Add New Call"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:_e,noValidate:!0,children:[n.jsx(qFe,{label:"Subject",className:"md:col-span-2",name:"subject",value:Y.subject,onChange:Ye,isSubmitted:B,required:!0}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("div",{className:"relative w-25",children:[n.jsxs("select",{name:"relatedType1",onChange:Ye,value:Y.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:w,children:[n.jsx("option",{value:"Lead",children:"Lead"}),n.jsx("option",{value:"Account",children:"Account"})]}),n.jsx("span",{className:"absolute left-10 md:pl-6 pl-6 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),n.jsx(SA,{items:Array.isArray(o)?o:[],value:Y.relatedTo1??"",placeholder:`Search ${Y.relatedType1||"here"}...`,getLabel:ee=>Y.relatedType1==="Lead"?ee.title:ee.name??"",onChange:ee=>se(pe=>({...pe,relatedTo1:ee})),required:!0,isSubmitted:B,disabled:w})]}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("select",{name:"relatedType2",onChange:Ye,value:Y.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:Y.relatedType1==="Lead"||w,children:[n.jsx("option",{value:"Contact",children:"Contact"}),n.jsx("option",{value:"Deal",children:"Deal"}),n.jsx("option",{value:"Quote",children:"Quote"})]}),n.jsx(SA,{disabled:Y.relatedType1==="Lead"||w,items:Array.isArray(c)?c:[],value:Y.relatedTo2??"",placeholder:Y.relatedType1==="Lead"?"":Array.isArray(c)&&c.length>0?`Search ${Y.relatedType2||"Contact"}...`:`No ${Y.relatedType2||""} data found`,getLabel:ee=>Y.relatedType2==="Contact"?`${ee.first_name??""} ${ee.last_name??""}`.trim():Y.relatedType2==="Quote"?z(ee.quote_id)??"":ee.name??"",onChange:ee=>se(pe=>({...pe,relatedTo2:ee}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),n.jsx("input",{type:"datetime-local",value:Y.call_time,onChange:Ye,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),n.jsxs("div",{className:"w-full",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),n.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[n.jsx("input",{type:"tel",value:Y.duration_minutes,onChange:Ye,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),n.jsx("p",{children:"minutes"})]})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-500 font-semibold",children:"*"})]}),n.jsx(SA,{items:Array.isArray(p)?p:[],value:Y.assigned_to??"",placeholder:"Search an account...",getLabel:ee=>`${ee.first_name} ${ee.last_name}`,onChange:ee=>se(pe=>({...pe,assigned_to:ee})),required:!0,isSubmitted:B})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),n.jsxs("select",{name:"direction",onChange:Ye,value:Y.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Incoming",children:"Incoming"}),n.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),n.jsxs("select",{name:"status",onChange:Ye,value:Y.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Planned",children:"Planned"}),n.jsx("option",{value:"Held",children:"Held"}),n.jsx("option",{value:"Not held",children:"Not held"})]})]}),n.jsx(VFe,{className:"col-span-2",label:"Notes",value:Y.notes,onChange:Ye,name:"notes"}),n.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{Ee(),xe(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:w,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:w?"Saving...":v?"Update Call":"Save Call"})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Ls,{className:"mr-2 text-blue-600"})," Calls"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{se(de),N(!1),C(null),t(!0),xe(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(un,{className:"mr-2"})," Add Call"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ve.map(ee=>n.jsx(WFe,{...ee},ee.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[n.jsx(Ht,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",defaultValue:re})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{defaultValue:he,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),BFe.map(ee=>n.jsx("option",{value:ee.value,children:ee.label},ee.value))]}),n.jsxs("select",{defaultValue:je,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),Ne.map(ee=>n.jsx("option",{value:ee.name,children:ee.name},ee.id))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Call Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:R?n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"py-10",children:n.jsx(zt,{message:"Loading calls..."})})}):fe.length>0?fe.map(ee=>n.jsxs("tr",{onClick:()=>ce(ee),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:ee.subject||"--"}),n.jsxs("td",{className:"py-3 px-4",children:[ee.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ee.lead.title}),ee.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ee.account.name}),ee.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[ee.contact.first_name," ",ee.contact.last_name]}),ee.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ee.deal.name}),ee.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:z(ee.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:ee.call_time?new Date(ee.call_time).toLocaleString():"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:ee?.call_assign_to?`${ee.call_assign_to.first_name} ${ee.call_assign_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${e8(ee.status)}`,children:CA(ee.status)})})]},ee.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),n.jsx(tn,{totalItems:ke.length,pageSize:ve,currentPage:De,onPrev:()=>Me(ee=>Math.max(1,ee-1)),onNext:()=>Me(ee=>ee+1),onPageSizeChange:ee=>{Be(ee),Me(1)},pageSizeOptions:[10,20,30,40,50],label:"calls"})]}),it,mt,r&&n.jsx(YFe,{open:!0,title:r.title,message:r.message,confirmLabel:r.confirmLabel,onConfirm:ae,onCancel:He,loading:E})]})}function WFe({icon:e,title:t,value:a,color:s,bgColor:r}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:22})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function qFe({label:e,name:t,value:a,onChange:s,placeholder:r="",type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&o&&!a;return n.jsxs("div",{className:d,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
        `})]})}function VFe(e){return n.jsxs("div",{className:e.className,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),n.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function ao({label:e,value:t}){return n.jsxs("p",{children:[n.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",n.jsx("br",{}),n.jsx("span",{className:"break-words",children:t||"--"})]})}function YFe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function SA({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,required:l=!1,isSubmitted:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),v=e.find(w=>String(w.id)===String(t)),N=v?s(v):"",b=l&&c&&!t,C=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(E=>(s(E)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${b?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:C.length>0?C.map(w=>{const S=String(w.id),E=s(w),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:E||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const n8=["Not started","In progress","Deferred","Completed"],a8={NOT_STARTED:"Not started","NOT STARTED":"Not started","TO DO":"Not started",IN_PROGRESS:"In progress","IN PROGRESS":"In progress",COMPLETED:"Completed",DEFERRED:"Deferred","Not started":"Not started","In progress":"In progress",Completed:"Completed",Deferred:"Deferred","In Progress":"In progress","To Do":"Not started",Review:"Deferred"},GZ=e=>e&&(a8[e]||a8[String(e).toUpperCase()])||"Not started",QFe=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const a=t.getTimezoneOffset();return new Date(t.getTime()-a*60*1e3).toISOString().slice(0,16)},s8=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},KFe=e=>{const t=e.subject?.trim()??"",a=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),GZ(e.status);let r=null,i=null,o=null,l=null,c=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?o=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Quote"&&e.relatedTo2&&(c=Number(e.relatedTo2)));const d=e.assignedTo?Number(e.assignedTo):null,u=o||l||i||r,f=o?"Contact":l?"Deal":i?"Account":r?"Lead":c?"Quote":null;return{title:t,description:a,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:d,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:o,deal_id:l,quote_id:c,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:u,related_type:f}},XFe=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",a=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",o=W=>{if(!W)return"";const X=String(W).split("-");return X.length===3?`${X[0]}-${X[2]}`:String(W)},l=()=>e.lead?.id||e.lead_id,c=()=>e.account?.id||e.account_id,d=()=>e.contact?.id||e.contact_id,u=()=>e.deal?.id||e.deal_id,f=()=>e.quote?.id||e.quote_id,p=()=>e.task_assign_to?.id||e.assigned_to,x=()=>e.lead?.title||e.lead_id,v=()=>e.account?.name||e.account_id,N=()=>i||e.contact_id,b=()=>e.deal?.name||e.deal_id,C=()=>o(e.quote?.quote_id)||e.id;let w="Lead",S="",E="",k="",A="Lead",T="",_="",I="";const R=c(),U=v(),D=l(),M=x();if(R){w="Account",A="Account",T=U,S=String(R);const W=d(),X=u(),z=N(),Q=b(),de=f(),Y=C();W?(E="Contact",_="Contact",I=z,k=String(W)):X?(_="Deal",E="Deal",I=Q,k=String(X)):de&&(_="Quote",E="Quote",I=Y,k=String(de))}else D?(A="Lead",T=M,w="Lead",S=String(D)):e.related_type==="Account"&&(w="Account",S=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:GZ(e.status),dueDate:s,dateAssigned:r,assignedToId:p()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:a,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:A,relatedTo1Text:T,relatedType2Text:_,relatedTo2Text:I,subject:e.title,relatedType1:w,relatedTo1:S,relatedType2:E,relatedTo2:k}};function ZFe(){h.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=Xt(),[a,s]=h.useState("board"),[r,i]=h.useState(!1),[o,l]=h.useState(null),[c,d]=h.useState(!1),[u,f]=h.useState([]),[p,x]=h.useState(!0),[v,N]=h.useState(""),[b,C]=h.useState("Filter by Status"),[w,S]=h.useState("Filter by Priority"),[E,k]=h.useState([]),[A,T]=h.useState(1),[_,I]=h.useState(10),[R,U]=h.useState(null),[D,M]=h.useState(!1),[W,X]=h.useState([]),z=bt(),Q=Qt(),[de,Y]=h.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""}),[se,J]=h.useState(null);h.useEffect(()=>{const B=Q.state?.openTaskModal,xe=Q.state?.initialTaskData,_e=Q.state?.taskID;B?(i(!0),xe&&Y(ce=>({...ce,...xe})),z(Q.pathname,{replace:!0,state:{}})):_e&&(J(_e),z(Q.pathname,{replace:!0,state:{}}))},[Q,z]),h.useEffect(()=>{if(se&&u.length>0&&!p){const B=u.find(xe=>xe.id===se);B?he(B,!0):q.error("Task not found."),J(null)}},[se,u,p]);const F=async()=>{try{const B=await ie.get("/users/all");k(Array.isArray(B.data)?B.data:[])}catch(B){console.error("Failed to fetch users:",B),q.error("Failed to fetch users.")}},Ne=async()=>{try{x(!0);const B=await ie.get("/tasks/all"),_e=(Array.isArray(B.data)?B.data:[]).map(XFe);_e.sort((ce,Ee)=>{const ae=ce.createdAt?new Date(ce.createdAt):0;return(Ee.createdAt?new Date(Ee.createdAt):0)-ae}),f(_e),a==="list"&&T(1)}catch(B){console.error("Failed to load tasks:",B),q.error("Failed to load tasks.")}finally{x(!1)}};h.useEffect(()=>{!t&&e&&(F(),Ne())},[t,e]);const re=()=>{l(null),Y({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},he=(B=null,xe=!1)=>{l(B),d(xe),B?Y({id:B.id,subject:B.title||"",description:B.description||"",priority:B.priority||"Normal",status:B.status||"Not started",dueDate:QFe(B.dueDate),assignedTo:B.assignedToId?String(B.assignedToId):"",notes:B.notes||"",relatedType1Text:B.relatedType1Text||"",relatedTo1Text:B.relatedTo1Text||"",relatedType2Text:B.relatedType2Text||"",relatedTo2Text:B.relatedTo2Text||"",relatedType1:B.relatedType1||"",relatedTo1:B.relatedTo1||"",relatedType2:B.relatedType2||"",relatedTo2:B.relatedTo2||""}):re(),i(!0)},je=()=>{i(!1),l(null),d(!1),re()},De=async B=>{const xe=KFe(B);try{o&&!c?(await ie.put(`/tasks/${o.id}`,xe),q.success("Task updated successfully.")):(await ie.post("/tasks/create",xe),q.success("Task created successfully.")),i(!1),await Ne()}catch(_e){console.error("Failed to save task:",_e);const ce=_e.response?.data?.detail||"Failed to save task.";q.error(ce)}},Me=B=>{B&&U({title:"Delete Task",message:n.jsxs(n.Fragment,{children:["Are you sure you want to delete ",n.jsx("span",{className:"font-semibold",children:B.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:B.id}})},ve=()=>{if(ye.every(B=>W.includes(B.id)))X(W.filter(B=>!ye.map(xe=>xe.id).includes(B)));else{const B=ye.map(xe=>xe.id);X([...new Set([...W,...B])])}},Be=B=>{X(xe=>xe.includes(B)?xe.filter(_e=>_e!==B):[...xe,B])},ke=async()=>{W.length!==0&&U({title:"Delete Tasks",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:W.length})," selected tasks? This action cannot be undone."]}),confirmLabel:`Delete ${W.length} Task(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",task_ids:W}})},fe=async()=>{if(!R?.action){U(null);return}const{action:B}=R;M(!0);try{B.type==="delete"?(await ie.delete(`/tasks/${B.targetId}`),q.success("Task deleted successfully."),await Ne()):B.type==="bulk-delete"&&(await ie.delete("/tasks/admin/bulk-delete",{data:{task_ids:B.task_ids}}),q.success(`Successfully deleted ${B.task_ids.length} tasks`),X([]),await Ne())}catch(xe){console.error("Task action failed:",xe),q.error("Failed to delete task.")}finally{M(!1),U(null)}},ne=()=>{D||U(null)},Ae=h.useMemo(()=>{const B=v.trim().toLowerCase();return[...u].sort((_e,ce)=>{const Ee=_e.createdAt?new Date(_e.createdAt):0;return(ce.createdAt?new Date(ce.createdAt):0)-Ee}).filter(_e=>{const ce=B===""||_e.title?.toLowerCase().includes(B)||_e.description?.toLowerCase().includes(B)||_e.assignedToName?.toLowerCase().includes(B)||_e.createdBy?.toLowerCase().includes(B),Ee=b==="Filter by Status"||_e.status===b,ae=w==="Filter by Priority"||_e.priority===w;return ce&&Ee&&ae})},[u,v,b,w]);h.useEffect(()=>{T(1)},[v,b,w,a,_]),h.useEffect(()=>{if(a==="list"){const B=Ae.length===0?1:Math.ceil(Ae.length/_);A>B&&T(B)}},[Ae.length,A,a,_]);const ye=h.useMemo(()=>{if(a==="board")return Ae;const B=(A-1)*_;return Ae.slice(B,B+_)},[Ae,A,a,_]),Ie=h.useMemo(()=>{const B=new Date;return[{title:"To Do",value:u.filter(xe=>xe.status==="Not started").length,icon:zs,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:u.filter(xe=>xe.status==="In progress").length,icon:Ri,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:u.filter(xe=>xe.status==="Completed").length,icon:ba,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:u.filter(xe=>xe.dueDate&&new Date(xe.dueDate)<B&&xe.status!=="Completed").length,icon:zf,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:u.filter(xe=>xe.priority==="High").length,icon:Bl,color:"text-orange-600",bgColor:"bg-orange-100"}]},[u]),Ve=B=>B.dueDate&&new Date(B.dueDate)<new Date&&B.status!=="Completed",Te=B=>{switch(B.status){case"Not started":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Deferred":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},Fe=B=>{switch(B){case"Not started":return"bg-blue-100 text-blue-700";case"In progress":return"bg-purple-100 text-purple-700";case"Deferred":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},Ye=B=>{switch(B){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&n.jsx(zt,{message:"Loading tasks..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(Ri,{className:"text-blue-600"})," Tasks Board"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:()=>he(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[n.jsx(un,{})," Create Task"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ie.map(B=>n.jsx(JFe,{...B},B.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Ht,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search tasks",value:v,onChange:B=>N(B.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{value:b,onChange:B=>C(B.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Status"}),n8.map(B=>n.jsx("option",{children:B},B))]}),n.jsxs("select",{value:w,onChange:B=>S(B.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Priority"}),n.jsx("option",{children:"High"}),n.jsx("option",{children:"Normal"}),n.jsx("option",{children:"Low"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${a==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),n.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${a==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&a==="board"&&(Ae.length>0?n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:n8.map(B=>{const xe=ye.filter(_e=>_e.status===B);return n.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative rounded-md",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),n.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:B}),n.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:xe.length})]}),n.jsx("div",{className:`space-y-3 ${xe.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:xe.length>0?xe.map(_e=>n.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${Te(_e)}`,onClick:()=>he(_e,!0),children:[n.jsxs("div",{className:"text-left flex-1",children:[n.jsx("p",{className:"font-medium text-gray-800 text-sm",children:_e.title}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",_e.priority]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",_e.assignedToName]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",n.jsx("span",{className:Ve(_e)?"text-red-600":"text-gray-600",children:_e.dateAssigned?s8(_e.dateAssigned):""})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[n.jsx("button",{type:"button",onClick:ce=>{ce.stopPropagation(),he(_e)},className:"text-blue-500 hover:text-blue-700",children:n.jsx(la,{})}),n.jsx("button",{type:"button",onClick:ce=>{ce.stopPropagation(),Me(_e)},className:"text-red-500 hover:text-red-700",children:n.jsx(Ut,{})})]})]},_e.id)):n.jsx("div",{className:"text-center py-10 text-gray-500",children:"No tasks"})})]},B)})}):n.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No tasks found."})),!p&&!t&&a==="list"&&n.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:ye.length>0&&ye.every(B=>W.includes(B.id)),onChange:ve})}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),n.jsx("th",{className:"py-3 px-4 font-medium text-center w-24",children:W.length>0?n.jsx("button",{onClick:ke,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${W.length} selected tasks`,children:n.jsx(Ut,{size:18})}):""})]})}),n.jsx("tbody",{children:ye.length>0?ye.map(B=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",children:[n.jsx("td",{className:"py-3 px-4",onClick:xe=>xe.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:W.includes(B.id),onChange:()=>Be(B.id)})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",onClick:()=>he(B,!0),children:B.title}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>he(B,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Fe(B.status||"Not started")}`,children:B.status||"Not started"})}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>he(B,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Ye(B.priority||"Low")}`,children:B.priority||"Low"})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",onClick:()=>he(B,!0),children:B.assignedToName||"Unassigned"}),n.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${Ve(B)?"text-red-600 font-medium":""}`,onClick:()=>he(B,!0),children:B.dateAssigned?s8(B.dateAssigned):""}),n.jsx("td",{})]},B.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No tasks found."})})})]})})}),!p&&!t&&a==="list"&&n.jsx(tn,{className:"mt-6",totalItems:Ae.length,pageSize:_,currentPage:Ae.length===0?0:A,onPrev:()=>T(B=>Math.max(B-1,1)),onNext:()=>T(B=>Math.min(B+1,Math.max(1,Math.ceil(Ae.length/_)||1))),onPageSizeChange:B=>{I(B),T(1)},pageSizeOptions:[10,20,30,40,50],label:"tasks"}),n.jsx(n0,{isOpen:r,onClose:je,onSave:De,onEdit:()=>d(!1),setFormData:Y,formData:de,isEditing:!c&&!!o,viewMode:c,users:E,currentUser:e,onDelete:Me}),R&&n.jsx(e7e,{open:!0,title:R.title,message:R.message,confirmLabel:R.confirmLabel,cancelLabel:R.cancelLabel,variant:R.variant,onConfirm:fe,onCancel:ne,loading:D})]})}function JFe({icon:e,title:t,value:a,color:s,bgColor:r,onClick:i}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function e7e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r,variant:i,loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const WZ=e=>e?e.toUpperCase():"",ob=e=>{const t=WZ(e);return t==="PLANNED"||t==="IN PROGRESS"?"PLANNED":t==="HELD"||t==="DONE"?"HELD":t==="NOT_HELD"||t==="NOT HELD"?"NOT_HELD":"PLANNED"},t7e=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},n7e=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},a7e=e=>{const t=WZ(e);switch(t==="PLANNED"?"PENDING":t==="HELD"?"COMPLETED":t==="NOT_HELD"?"CANCELLED":t){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},_A={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},s7e=()=>{const e=bt(),t=Qt(),[a]=Ds(),s=a.get("id"),r=t.pathname==="/admin/meetings/info";h.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[i,o]=h.useState([]),[l,c]=h.useState(!1),[d,u]=h.useState([]),[f,p]=h.useState(""),[x,v]=h.useState("Filter by Status"),[N,b]=h.useState(!1),[C,w]=h.useState(null),[S,E]=h.useState(1),[k,A]=h.useState(10),[T,_]=h.useState(_A),[I,R]=h.useState(!1),[U,D]=h.useState(null),[M,W]=h.useState(!1),[X,z]=h.useState(null),[Q,de]=h.useState(!1),[Y,se]=h.useState(null);h.useEffect(()=>{const ne=t.state?.openMeetingModal,Ae=t.state?.initialMeetingData?.relatedTo||a.get("id"),ye=t.state?.meetingID;ne||Ae?(b(!0),t.state?.initialMeetingData&&_(Ie=>({...Ie,...t.state.initialMeetingData})),e(t.pathname,{replace:!0,state:{}})):ye&&(se(ye),e(t.pathname,{replace:!0,state:{}}))},[t,a,e]),h.useEffect(()=>{if(Y&&i.length>0&&!l){const ne=i.find(Ae=>Ae.id===Y);ne?w(ne):q.error("Meeting not found."),se(null)}},[Y,i,l]);const J=async()=>{if(s&&r){const ne=sessionStorage.getItem("meetingDetailData");if(ne)try{const Ae=JSON.parse(ne);if(Ae.id===parseInt(s)){w(Ae),sessionStorage.removeItem("meetingDetailData");return}}catch(Ae){console.error(Ae)}}c(!0);try{const ne=await ie.get("/meetings/admin/fetch-all"),ye=[...Array.isArray(ne.data)?ne.data:[]].sort((Ie,Ve)=>{const Te=Ie?.createdAt?new Date(Ie.createdAt).getTime():0;return(Ve?.createdAt?new Date(Ve.createdAt).getTime():0)-Te});if(o(ye),s&&!C){const Ie=ye.find(Ve=>Ve.id===parseInt(s));Ie&&w(Ie)}}catch{q.error("Failed to load meetings.")}finally{c(!1)}},F=async()=>{try{const ne=await ie.get("/users/all");u(Array.isArray(ne.data)?ne.data:[])}catch(ne){console.error(ne)}};h.useEffect(()=>{J(),F()},[]);const Ne=ne=>p(ne.target.value),re=h.useMemo(()=>{const ne=f.trim().toLowerCase(),Ae=x.trim().toUpperCase();return i.filter(ye=>{const Ie=[ye?.activity,ye?.description,ye?.relatedTo,ye?.assignedTo],Ve=ne===""||Ie.some(Fe=>Fe&&Fe.toString().toLowerCase().includes(ne)),Te=Ae==="FILTER BY STATUS"||ob(ye.status||"PENDING")===Ae;return Ve&&Te})},[i,f,x]),he=h.useMemo(()=>{const ne=(S-1)*k;return re.slice(ne,ne+k)},[re,S]),je=()=>{b(!1),_(_A),R(!1),D(null),W(!1)},De=()=>{_(_A),R(!1),D(null),b(!0)},Me=ne=>{let Ae="";if(ne.meet_assign_to?.id)Ae=String(ne.meet_assign_to.id);else if(ne.assignedTo){const _e=d.find(ce=>`${ce.first_name} ${ce.last_name}`===ne.assignedTo);Ae=_e?String(_e.id):""}const ye=_e=>{if(!_e)return"";try{const ce=new Date(_e),Ee=ce.getTimezoneOffset()*6e4;return new Date(ce.getTime()-Ee).toISOString().slice(0,16)}catch{return""}};let Ie="Lead",Ve="",Te="Contact",Fe="";if(ne.lead)Ie="Lead",Ve=String(ne.lead.id);else if(ne.account)Ie="Account",Ve=String(ne.account.id),ne.contact?(Te="Contact",Fe=String(ne.contact.id)):ne.deal?(Te="Deal",Fe=String(ne.deal.id)):ne.quote&&(Te="Quote",Fe=String(ne.quote.id));else if(ne.relatedType||ne.related_type){const _e=ne.relatedType||ne.related_type,ce=ne.related_to||ne.relatedToId;_e==="Lead"?(Ie="Lead",Ve=String(ce)):(Ie="Account",Ve=ne.account_id?String(ne.account_id):"")}const Ye={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},B=ob(ne.status),xe=Ye[B]||"Planned";_({subject:ne.subject||ne.activity||"",location:ne.location||"",startTime:ye(ne.start_time||ne.startTime),endTime:ye(ne.end_time||ne.endTime),status:xe,notes:ne.description||ne.notes||"",assignedTo:Ae,relatedType1:Ie,relatedTo1:Ve,relatedType2:Te,relatedTo2:Fe}),R(!0),D(ne.id),w(null),b(!0)},ve=ne=>{if(!ne.subject?.trim())return q.error("Subject is required.");if(!ne.startTime)return q.error("Start time is required.");if(ne.endTime&&!(new Date(ne.endTime)-new Date(ne.startTime)>0))return q.error("End time must be after start time.");ne.relatedType1,ne.relatedTo1,ne.relatedType1==="Account"&&ne.relatedType2&&ne.relatedTo2&&(ne.relatedType2,ne.relatedTo2);const Ae={...ne,assignedTo:parseInt(ne.assignedTo),relatedTo1:parseInt(ne.relatedTo1),relatedTo2:parseInt(ne.relatedTo2)},ye=I&&U?"update":"create";z({title:ye==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${ye} "${Ae.subject}"?`,confirmLabel:ye==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:ye,payload:Ae,targetId:U,name:Ae.subject}})},Be=async()=>{if(!X?.action)return;const{type:ne,payload:Ae,targetId:ye,name:Ie}=X.action;de(!0);try{ne==="create"?(W(!0),await ie.post("/meetings/create",Ae),q.success(`Meeting "${Ie}" created.`),je(),await J()):ne==="update"?(W(!0),await ie.put(`/meetings/${ye}`,Ae),q.success(`Meeting "${Ie}" updated.`),je(),await J()):ne==="delete"&&(await ie.delete(`/meetings/${ye}`),q.success(`Meeting "${Ie}" deleted.`),C?.id===ye&&w(null),await J())}catch(Ve){const Te=Ve.response?.data?.detail||"Action failed.";q.error(typeof Te=="string"?Te:JSON.stringify(Te)),console.error(Te)}finally{W(!1),de(!1),z(null)}},ke=ne=>{z({title:"Delete Meeting",message:`Permanently delete "${ne.activity}"?`,confirmLabel:"Delete",variant:"danger",action:{type:"delete",targetId:ne.id,name:ne.activity}})},fe=async(ne,Ae)=>{try{await ie.put(`/meetings/${ne}`,{status:Ae}),q.success("Status updated"),J(),w(null)}catch{q.error("Failed to update status")}};return r&&s?C?n.jsx(ld,{meeting:C,onClose:()=>{w(null),e("/admin/dashboard")},onEdit:Me,onDelete:ke,onStatusUpdate:fe}):n.jsx(zt,{message:"Loading meeting..."}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[l&&n.jsx(zt,{message:"Loading meetings..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[n.jsx(Ct,{className:"mr-2 text-blue-600"})," Meetings"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:De,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[n.jsx(un,{className:"mr-2"})," Add Meeting"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[n.jsx(Ht,{className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search meetings",value:f,onChange:Ne,className:"w-full outline-none"})]}),n.jsxs("select",{value:x,onChange:ne=>v(ne.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[n.jsx("option",{children:"Filter by Status"}),n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Start Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:he.length>0?he.map(ne=>n.jsxs("tr",{onClick:()=>w(ne),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:ne.subject}),n.jsxs("td",{className:"py-3 px-4",children:[ne.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ne.lead.title}),ne.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ne.account.name}),ne.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[ne.contact.first_name," ",ne.contact.last_name]}),ne.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ne.deal.name}),ne.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:t7e(ne.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4",children:n7e(ne.start_time)}),n.jsxs("td",{className:"py-3 px-4",children:[ne.meet_assign_to.first_name," ",ne.meet_assign_to.last_name]}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${a7e(ob(ne.status))}`,children:ob(ne.status).replace("_"," ")})})]},ne.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),n.jsx(tn,{totalItems:re.length,pageSize:k,currentPage:S,onPrev:()=>E(ne=>Math.max(1,ne-1)),onNext:()=>E(ne=>ne+1),onPageSizeChange:ne=>{A(ne),E(1)},pageSizeOptions:[10,20,30,40,50],label:"meetings"}),N&&n.jsx(Gj,{onClose:je,formData:T,setFormData:_,isEditing:I,onSubmit:ve,isSubmitting:M||Q,users:d}),C&&n.jsx(ld,{meeting:C,onClose:()=>w(null),onEdit:Me,onDelete:ke,onStatusUpdate:fe}),X&&n.jsx(r7e,{open:!0,title:X.title,message:X.message,confirmLabel:X.confirmLabel,variant:X.variant,onConfirm:Be,onCancel:()=>z(null),loading:Q})]})};function r7e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{onClick:c,disabled:o,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),n.jsx("button",{onClick:l,disabled:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${d}`,children:o?"...":s})]})]})})}const Wj=[{value:"CEO",label:"CEO"},{value:"Admin",label:"Admin"},{value:"Group Manager",label:"Group Manager"},{value:"Manager",label:"Manager"},{value:"Marketing",label:"Marketing"},{value:"Sales",label:"Sales"}],pg={firstName:"",lastName:"",email:"",password:"",role:""},i7e={CEO:"bg-purple-100 text-purple-700",ADMIN:"bg-purple-100 text-purple-700",GROUP_MANAGER:"bg-indigo-100 text-indigo-700",MANAGER:"bg-blue-100 text-blue-700",MARKETING:"bg-yellow-100 text-yellow-700",SALES:"bg-green-100 text-green-700"},po=e=>e?e.toString().trim().replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/\s+/g,"_").toUpperCase():"",o7e=e=>{const t=po(e),a=Wj.find(s=>po(s.value)===t);return a?a.value:e||""},bk=e=>{const t=po(e),a=Wj.find(s=>po(s.value)===t);return a?a.label:typeof e=="string"?e.toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()):"--"},r8=e=>{if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",","")},AA=(e,{size:t="sm"}={})=>{const a=po(e),s=i7e[a]||"bg-gray-100 text-gray-700",r=t==="lg"?"px-3 py-1 text-sm":t==="md"?"px-2.5 py-1 text-sm":"px-2 py-1 text-xs";return n.jsx("span",{className:`${r} font-semibold rounded-md inline-flex items-center justify-center ${s}`,children:bk(e)})},l7e=(e,t)=>{const a=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${a}${s}`.toUpperCase()||"U"},i8=e=>[...e].sort((t,a)=>{const s=t.created_at?new Date(t.created_at).getTime():0;return(a.created_at?new Date(a.created_at).getTime():0)-s});function c7e(){const{user:e,loading:t}=Xt(),[a,s]=h.useState([]),[r,i]=h.useState(!1),[o,l]=h.useState(""),[c,d]=h.useState(""),[u,f]=h.useState(null),[p,x]=h.useState(!1),[v,N]=h.useState(!1),[b,C]=h.useState(null),[w,S]=h.useState(pg),[E,k]=h.useState(!1),[A,T]=h.useState(null),[_,I]=h.useState(!1),[R,U]=h.useState(1),[D,M]=h.useState(10),[W,X]=h.useState("Overview"),[z,Q]=h.useState(""),[de,Y]=h.useState(!1),se=po(e?.role),J=["ADMIN","CEO","GROUP MANAGER","MANAGER"].includes(se),F=!t&&J,Ne=h.useMemo(()=>{const ae=Wj.filter(He=>po(He.value)!=="CEO");return[{label:"Filter by Roles",value:""},{label:"CEO",value:"CEO"},...ae]},[]),re=h.useCallback(ae=>{ae&&(s(He=>He.map(Re=>Re.id===ae?{...Re,highlight:!0}:Re)),setTimeout(()=>{s(He=>He.map(Re=>Re.id===ae?{...Re,highlight:!1}:Re))},2e3))},[]),he=h.useCallback(async()=>{i(!0);try{const ae=await ie.get("/users/all"),He=Array.isArray(ae.data)?ae.data:[],Re=i8(He);s(Re),f(it=>it&&(Re.find(ee=>ee.id===it.id)||null)),console.log(ae.data)}catch(ae){console.error("Error fetching users:",ae);const He=ae.response?.data?.detail||"Failed to load users. Please try again later.";q.error(He)}finally{i(!1)}},[]);h.useEffect(()=>{!t&&!J&&e&&q.error("You are not authorized to access User Management.")},[J,t,e]),h.useEffect(()=>{t||!J||he()},[t,J,he]),h.useEffect(()=>{document.title="Users | Sari-Sari CRM"},[]);const je=h.useMemo(()=>{const ae=o.trim().toLowerCase(),He=po(c);return i8(a.filter(Re=>{if(!Re)return!1;const it=ae===""||[Re.first_name,Re.last_name,`${Re.first_name||""} ${Re.last_name||""}`,Re.email,bk(Re.role)].filter(Boolean).some(ee=>ee.toString().toLowerCase().includes(ae)),mt=He===""||He==="CEO"&&["CEO","ADMIN"].includes(po(Re.role))||po(Re.role)===He;return it&&mt}))},[a,o,c]),De=Math.max(1,Math.ceil(je.length/D)||1);h.useEffect(()=>{U(1)},[o,c]),h.useEffect(()=>{U(ae=>{const He=Math.max(1,Math.ceil(je.length/D)||1);return ae>He?He:ae})},[je.length]);const Me=h.useMemo(()=>{const ae=(R-1)*D;return je.slice(ae,ae+D)},[je,R]);je.length===0||(R-1)*D+1,Math.min(R*D,je.length);const ve=()=>U(ae=>Math.max(ae-1,1)),Be=()=>U(ae=>Math.min(ae+1,De)),ke=()=>{S(pg),N(!1),C(null),x(!0)},fe=ae=>{console.log(ae),f(ae),X("Overview"),Q(ae?.is_active?"Active":"Inactive")},ne=ae=>{ae.target.id==="userModalBackdrop"&&!_&&Ae()},Ae=()=>{f(null)},ye=(ae,He)=>{S(Re=>({...Re,[ae]:He}))},Ie=()=>{const ae="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let He="";for(let Re=0;Re<10;Re+=1)He+=ae.charAt(Math.floor(Math.random()*ae.length));ye("password",He)},Ve=()=>{E||_||(x(!1),S(pg),C(null),N(!1))},Te=ae=>{S({firstName:ae.first_name||"",lastName:ae.last_name||"",email:ae.email||"",password:"",role:o7e(ae.role)}),N(!0),C(ae.id),x(!0),f(null)},Fe=ae=>{T({title:"Delete User",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsxs("span",{className:"font-semibold",children:[ae.first_name," ",ae.last_name]}),"? This action cannot be undone."]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ae.id,name:`${ae.first_name||""} ${ae.last_name||""}`.trim()||ae.email||"user"}})},Ye=ae=>{ae.preventDefault();const He=w.firstName.trim(),Re=w.lastName.trim(),it=w.email.trim(),mt=w.password.trim(),ee="Sales",pe=!(v&&b);if(!He||!it||!ee){q.warn("Please fill in all required fields.");return}if(pe&&!mt){q.warn("Please fill in all required fields.");return}if(mt&&mt.length<8){q.warn("Password should be at least 8 characters long.");return}const Ue={first_name:He,last_name:Re,email:it,role:ee};console.log(Ue),(pe||mt)&&(Ue.password=mt);const Ze=`${He} ${Re}`.trim(),nt=pe?"create":"update";T({title:nt==="create"?"Confirm New User":"Confirm User Update",message:nt==="create"?n.jsxs("span",{children:["Create user ",n.jsx("span",{className:"font-semibold",children:Ze})," with role"," ",n.jsx("span",{className:"font-semibold",children:bk(ee)}),"?"]}):n.jsxs("span",{children:["Save changes for"," ",n.jsx("span",{className:"font-semibold",children:Ze||it}),"?"]}),confirmLabel:nt==="create"?"Create User":"Update User",cancelLabel:"Cancel",variant:"primary",action:{type:nt,payload:Ue,targetId:b,name:Ze||it}})},B=async()=>{if(!A?.action){T(null);return}const{action:ae}=A,{type:He,payload:Re,targetId:it,name:mt}=ae;I(!0),(He==="create"||He==="update")&&k(!0);try{if(He==="create"){const pe=(await ie.post("/users/createuser",Re)).data;await he(),re(pe.id),q.success(`User "${mt}" created successfully.`),x(!1),S(pg),C(null),N(!1)}else if(He==="update"){if(!it)throw new Error("Missing user identifier for update.");const pe=(await ie.put(`/users/updateuser/${it}`,Re)).data;await he(),f(null),re(pe.id),q.success(`User "${mt}" updated successfully.`),x(!1),S(pg),C(null),N(!1)}else if(He==="delete"){if(!it)throw new Error("Missing user identifier for deletion.");await ie.delete(`/users/deleteuser/${it}`),s(ee=>ee.map(pe=>pe.id===it?{...pe,is_active:!1}:pe)),u&&u.id===it&&(f(null),Q("")),q.success(`User "${mt}" deactivated successfully.`)}}catch(ee){console.error("User management error:",ee);const pe=He==="create"?"Failed to create user. Please review the details and try again.":He==="update"?"Failed to update user. Please review the details and try again.":"Failed to delete user. Please try again.",Ue=ee.response?.data?.detail||pe;q.error(Ue)}finally{(He==="create"||He==="update")&&k(!1),I(!1),T(null)}},xe=()=>{_||T(null)},_e=async()=>{if(!u||!z)return;const ae=u.is_active?"Active":"Inactive";if(z===ae)return;const He=z==="Active";Y(!0);try{const it=(await ie.put(`/users/updateuser/${u.id}`,{is_active:He})).data;s(mt=>mt.map(ee=>ee.id===it.id?it:ee)),f(null),Q(""),q.success(`User status updated to ${z}`)}catch(Re){console.error("Failed to update user status:",Re);const it=Re.response?.data?.detail||"Failed to update user status. Please try again.";q.error(it)}finally{Y(!1)}},ce=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[(r||t||!F)&&n.jsx(zt,{}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Mw,{className:"mr-2 text-blue-600"}),"User Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:ke,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(Gn,{className:"mr-2"})," Add User"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Ht,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search users",value:o,onChange:ae=>l(ae.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:c,onChange:ae=>d(ae.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:Ne.map(ae=>n.jsx("option",{value:ae.value,children:ae.label},ae.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Fullname"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Role"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:3,children:"Loading users..."})}):je.length===0?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-400",colSpan:4,children:"No users found."})}):Me.map(ae=>n.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${ae.highlight?"bg-green-50":""} ${ae.is_active?"":"opacity-60 bg-gray-50"}`,children:[n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>fe(ae),children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline text-sm",children:[ae.first_name," ",ae.last_name]})}),n.jsx("td",{className:"py-3 px-4 cursor-pointer text-sm",onClick:()=>fe(ae),children:ae.email}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>fe(ae),children:AA(ae.role)}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>fe(ae),children:n.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-md ${ae.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:ae.is_active?"Active":"Inactive"})})]},ae.id))})]})}),n.jsx(tn,{className:"mt-4",totalItems:je.length,pageSize:D,currentPage:R,onPrev:ve,onNext:Be,onPageSizeChange:ae=>{M(ae),U(1)},pageSizeOptions:[10,20,30,40,50],label:"users"})]}),Ee=u?n.jsx("div",{id:"userModalBackdrop",onClick:ne,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in p-4 sm:p-6 md:p-8 font-inter relative",children:[n.jsx("div",{className:"flex justify-end w-full",children:n.jsx("button",{onClick:Ae,className:"text-gray-500 hover:text-gray-700 transition mb-5 cursor-pointer",children:n.jsx(Wn,{size:30})})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7 mb-4 lg:mb-6 md:mb-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[u.profile_picture?n.jsx("img",{src:u.profile_picture,alt:`${u.first_name} ${u.last_name}`,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover border border-gray-200 shadow-sm"}):n.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-200 text-gray-700 flex items-center justify-center text-lg sm:text-xl font-semibold border border-gray-200 shadow-sm",children:l7e(u.first_name,u.last_name)}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[u.first_name," ",u.last_name]}),n.jsx("p",{className:"text-sm text-gray-500 break-all",children:u.email})]})]}),AA(u.role,{size:"md"})]}),!["CEO","ADMIN","GROUP MANAGER","GROUP_MANAGER"].includes(u.role.toUpperCase())&&n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Te(u),disabled:_,children:[n.jsx(la,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>Fe(u),disabled:_,children:[n.jsx(Ut,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 mb-6"}),n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview"].map(ae=>n.jsx("button",{onClick:()=>X(ae),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${W===ae?"bg-[#5c636d] text-white border-white":"text-white hover:bg-[#5c636d]"}`,children:ae},ae))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsx("div",{className:"lg:col-span-3",children:W==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:u.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Role:"}),n.jsx("p",{children:AA(u.role,{size:"sm"})})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:u.is_active?"Active":"Inactive"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Auth Provider:"}),n.jsx("p",{children:u.auth_provider?u.auth_provider.toString().replace(/\b\w/g,ae=>ae.toUpperCase()):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:u.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:u.company?.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company Number:"}),n.jsx("p",{children:u.company?.company_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Related to CEO:"}),n.jsx("p",{children:u.manager?`${u.manager.first_name} ${u.manager.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:r8(u.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Login:"}),n.jsx("p",{children:u.last_login?r8(u.last_login):"Never"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Profile Picture:"}),n.jsx("p",{children:u.profile_picture?n.jsx("a",{href:u.profile_picture,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline break-all",children:"View image"}):"N/A"})]})]})})}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsx("div",{className:"flex flex-col gap-2 w-full",children:n.jsxs("button",{type:"button",onClick:()=>{if(!u.email){alert("No email address available");return}const ae=encodeURIComponent(u.email),He=encodeURIComponent(""),Re=encodeURIComponent(""),it=`https://mail.google.com/mail/?view=cm&fs=1&to=${ae}&su=${He}&body=${Re}`;window.open(it,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Xn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]})})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:z||(u.is_active?"Active":"Inactive"),onChange:ae=>Q(ae.target.value),children:[n.jsx("option",{value:"Active",children:"Active"}),n.jsx("option",{value:"Inactive",children:"Inactive"})]}),n.jsx("button",{onClick:_e,disabled:de||z===(u.is_active?"Active":"Inactive"),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${de||z===(u.is_active?"Active":"Inactive")?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:de?"Updating...":"Update"})]})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[ce,Ee,n.jsx(d7e,{open:p,isEditing:v,isSubmitting:E,confirmProcessing:_,formData:w,onClose:Ve,onSubmit:Ye,onChange:ye,onGeneratePassword:Ie}),n.jsx(u7e,{open:!!A,title:A?.title,message:A?.message,confirmLabel:A?.confirmLabel,cancelLabel:A?.cancelLabel,variant:A?.variant,loading:_,onConfirm:B,onCancel:xe})]})}function d7e({open:e,isEditing:t,isSubmitting:a,confirmProcessing:s,formData:r,onClose:i,onSubmit:o,onChange:l,onGeneratePassword:c}){if(!e)return null;const d=a||s;return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-lg border border-gray-200 p-6 sm:p-8 relative overflow-y-auto max-h-[90vh]",children:[n.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:d,children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-6 text-center",children:t?"Edit User":"Add New User"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:o,children:[n.jsx(lb,{label:"First Name",value:r.firstName,onChange:u=>l("firstName",u),placeholder:"John",required:!0,disabled:d}),n.jsx(lb,{label:"Last Name",value:r.lastName,onChange:u=>l("lastName",u),placeholder:"Doe",required:!0,disabled:d}),n.jsx(lb,{label:"Email",type:"email",value:r.email,onChange:u=>l("email",u),placeholder:"john.doe@company.com",required:!0,disabled:d||t}),n.jsx(lb,{label:"Role",type:"select",disabled:!0,value:"Sales",onChange:u=>l("role",u),options:[{value:"",label:"Select role"},...Wj],required:!0}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Password"}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[n.jsx("input",{type:"text",value:r.password,onChange:u=>l("password",u.target.value),placeholder:t?"Leave blank to keep current password":"Enter or generate password",required:!t,disabled:d,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"}),n.jsx("button",{type:"button",onClick:c,className:"flex items-center justify-center px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-60",disabled:d,children:"Generate"})]}),t?n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Setting a password will reset the user's credentials; leave it blank to keep the current password."}):n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long."})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:i,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:d,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:d,children:a?"Saving...":t?"Update User":"Save User"})]})]})]})})}function lb({label:e,type:t="text",value:a,onChange:s,placeholder:r,options:i=[],required:o=!1,disabled:l=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t==="select"?n.jsx("select",{value:a??"",onChange:c=>s(c.target.value),required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100",children:i.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))}):n.jsx("input",{type:t,value:a??"",onChange:c=>s(c.target.value),placeholder:r,required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"})]})}function u7e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-black hover:bg-gray-800 border border-black";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("div",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function m7e({toggleSidebar:e}){const[t,a]=h.useState(!1),s=h.useRef(null),r=Qt(),{logout:i}=Bs(),{user:o,fetchUser:l}=Xt(),c={"/marketing/dashboard":"Dashboard","/marketing/contacts":"Contacts","/marketing/accounts":"Accounts","/marketing/leads":"Leads","/marketing/tasks":"Tasks","/marketing/campaigns":"Campaign","/marketing/templates":"Templates"};h.useEffect(()=>{l()},[]);const d=c[r.pathname]||"Marketing Panel";return h.useEffect(()=>{function u(f){s.current&&!s.current.contains(f.target)&&a(!1)}return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[]),n.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-6 py-3 border-b relative",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:n.jsx(ex,{className:"text-2xl"})}),n.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:d})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("button",{className:"relative text-gray-600 hover:text-gray-800",children:[n.jsx(Zp,{className:"text-xl"}),n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs w-4 h-4 flex items-center justify-center rounded-full",children:"3"})]}),n.jsxs("div",{className:"relative",ref:s,children:[n.jsxs("button",{onClick:()=>a(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[n.jsx("img",{src:o?.profile_picture,alt:"",className:"w-8 aspect-square object-cover rounded-full"}),n.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[o?.first_name," ",o?.last_name]})]}),t&&n.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-gray-100 shadow-lg rounded border z-50",children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("button",{className:"px-4 py-2 text-sm hover:bg-gray-200 text-left",children:"Manage Account"}),n.jsx("div",{className:"border-t my-1"}),n.jsx("button",{onClick:i,className:"px-4 py-2 text-sm bg-red-500 text-white rounded mx-2 my-2 hover:bg-red-600",children:"Logout"})]})})]})]})]})}function f7e(){const[e,t]=h.useState(!1),[a,s]=h.useState(!1),[r,i]=h.useState(!1),[o,l]=h.useState(!1),c=Qt(),{fetchUser:d}=Xt();h.useEffect(()=>{d()},[]),h.useEffect(()=>{document.title="Panel | Sari-Sari CRM"},[]);const u="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",f="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition",p=["/marketing/campaigns","/marketing/templates"],x=["/marketing/accounts","/marketing/contacts","/marketing/leads"],v=["/marketing/tasks"],N=p.includes(c.pathname),b=x.includes(c.pathname),C=v.includes(c.pathname);return h.useEffect(()=>{N&&t(!0),b&&s(!0),C&&i(!0)},[N,b,C]),n.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[n.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${o?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[n.jsx("div",{className:"bg-[#fbbf24] text-gray-900 font-bold text-xl px-6 py-4.5 tracking-wide",children:"Marketing CRM"}),n.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[n.jsxs(Ot,{to:"/marketing/dashboard",className:({isActive:w})=>w?u:f,children:[n.jsx(Jp,{className:"text-lg"}),n.jsx("span",{children:"Dashboard"})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!a),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Kt,{className:"text-lg"}),"Sales"]}),n.jsx(jt,{className:`transition-transform ${a?"rotate-180":""}`})]}),a&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(Ot,{to:"/marketing/accounts",className:({isActive:w})=>w?u:f,children:[n.jsx(Zn,{})," Accounts"]}),n.jsxs(Ot,{to:"/marketing/contacts",className:({isActive:w})=>w?u:f,children:[n.jsx(en,{})," Contacts"]}),n.jsxs(Ot,{to:"/marketing/leads",className:({isActive:w})=>w?u:f,children:[n.jsx(Gn,{})," Leads"]})]})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>t(!e),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(tr,{className:"text-lg"}),"Tools"]}),n.jsx(jt,{className:`transition-transform ${e?"rotate-180":""}`})]}),e&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(Ot,{to:"/marketing/campaigns",className:({isActive:w})=>w?u:f,children:[n.jsx(yie,{})," Campaign"]}),n.jsxs(Ot,{to:"/marketing/templates",className:({isActive:w})=>w?u:f,children:[n.jsx(zk,{})," Templates"]})]})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!r),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(ws,{className:"text-lg"}),"Activity"]}),n.jsx(jt,{className:`transition-transform ${r?"rotate-180":""}`})]}),r&&n.jsx("div",{className:"ml-6 mt-2 space-y-1",children:n.jsxs(Ot,{to:"/marketing/tasks",className:({isActive:w})=>w?u:f,children:[n.jsx(qt,{})," Tasks"]})})]})]}),n.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Marketing CRM"]})]}),o&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>l(!1)}),n.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[n.jsx(m7e,{toggleSidebar:()=>l(!o)}),n.jsx("main",{className:"flex-1 p-6 overflow-auto",style:{backgroundColor:"#fffeee"},children:n.jsx(Gp,{})})]})]})}function a0(e){return e+.5|0}const qc=(e,t,a)=>Math.max(Math.min(e,a),t);function $g(e){return qc(a0(e*2.55),0,255)}function Zc(e){return qc(a0(e*255),0,255)}function hl(e){return qc(a0(e/2.55)/100,0,1)}function o8(e){return qc(a0(e*100),0,100)}const Zr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},vk=[..."0123456789ABCDEF"],h7e=e=>vk[e&15],g7e=e=>vk[(e&240)>>4]+vk[e&15],cb=e=>(e&240)>>4===(e&15),p7e=e=>cb(e.r)&&cb(e.g)&&cb(e.b)&&cb(e.a);function x7e(e){var t=e.length,a;return e[0]==="#"&&(t===4||t===5?a={r:255&Zr[e[1]]*17,g:255&Zr[e[2]]*17,b:255&Zr[e[3]]*17,a:t===5?Zr[e[4]]*17:255}:(t===7||t===9)&&(a={r:Zr[e[1]]<<4|Zr[e[2]],g:Zr[e[3]]<<4|Zr[e[4]],b:Zr[e[5]]<<4|Zr[e[6]],a:t===9?Zr[e[7]]<<4|Zr[e[8]]:255})),a}const y7e=(e,t)=>e<255?t(e):"";function b7e(e){var t=p7e(e)?h7e:g7e;return e?"#"+t(e.r)+t(e.g)+t(e.b)+y7e(e.a,t):void 0}const v7e=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function qZ(e,t,a){const s=t*Math.min(a,1-a),r=(i,o=(i+e/30)%12)=>a-s*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function w7e(e,t,a){const s=(r,i=(r+e/60)%6)=>a-a*t*Math.max(Math.min(i,4-i,1),0);return[s(5),s(3),s(1)]}function N7e(e,t,a){const s=qZ(e,1,.5);let r;for(t+a>1&&(r=1/(t+a),t*=r,a*=r),r=0;r<3;r++)s[r]*=1-t-a,s[r]+=t;return s}function j7e(e,t,a,s,r){return e===r?(t-a)/s+(t<a?6:0):t===r?(a-e)/s+2:(e-t)/s+4}function vD(e){const a=e.r/255,s=e.g/255,r=e.b/255,i=Math.max(a,s,r),o=Math.min(a,s,r),l=(i+o)/2;let c,d,u;return i!==o&&(u=i-o,d=l>.5?u/(2-i-o):u/(i+o),c=j7e(a,s,r,u,i),c=c*60+.5),[c|0,d||0,l]}function wD(e,t,a,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,a,s)).map(Zc)}function ND(e,t,a){return wD(qZ,e,t,a)}function C7e(e,t,a){return wD(N7e,e,t,a)}function S7e(e,t,a){return wD(w7e,e,t,a)}function VZ(e){return(e%360+360)%360}function _7e(e){const t=v7e.exec(e);let a=255,s;if(!t)return;t[5]!==s&&(a=t[6]?$g(+t[5]):Zc(+t[5]));const r=VZ(+t[2]),i=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?s=C7e(r,i,o):t[1]==="hsv"?s=S7e(r,i,o):s=ND(r,i,o),{r:s[0],g:s[1],b:s[2],a}}function A7e(e,t){var a=vD(e);a[0]=VZ(a[0]+t),a=ND(a),e.r=a[0],e.g=a[1],e.b=a[2]}function T7e(e){if(!e)return;const t=vD(e),a=t[0],s=o8(t[1]),r=o8(t[2]);return e.a<255?`hsla(${a}, ${s}%, ${r}%, ${hl(e.a)})`:`hsl(${a}, ${s}%, ${r}%)`}const l8={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},c8={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function E7e(){const e={},t=Object.keys(c8),a=Object.keys(l8);let s,r,i,o,l;for(s=0;s<t.length;s++){for(o=l=t[s],r=0;r<a.length;r++)i=a[r],l=l.replace(i,l8[i]);i=parseInt(c8[o],16),e[l]=[i>>16&255,i>>8&255,i&255]}return e}let db;function k7e(e){db||(db=E7e(),db.transparent=[0,0,0,0]);const t=db[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const L7e=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function P7e(e){const t=L7e.exec(e);let a=255,s,r,i;if(t){if(t[7]!==s){const o=+t[7];a=t[8]?$g(o):qc(o*255,0,255)}return s=+t[1],r=+t[3],i=+t[5],s=255&(t[2]?$g(s):qc(s,0,255)),r=255&(t[4]?$g(r):qc(r,0,255)),i=255&(t[6]?$g(i):qc(i,0,255)),{r:s,g:r,b:i,a}}}function D7e(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${hl(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const TA=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Wm=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function O7e(e,t,a){const s=Wm(hl(e.r)),r=Wm(hl(e.g)),i=Wm(hl(e.b));return{r:Zc(TA(s+a*(Wm(hl(t.r))-s))),g:Zc(TA(r+a*(Wm(hl(t.g))-r))),b:Zc(TA(i+a*(Wm(hl(t.b))-i))),a:e.a+a*(t.a-e.a)}}function ub(e,t,a){if(e){let s=vD(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*a,t===0?360:1)),s=ND(s),e.r=s[0],e.g=s[1],e.b=s[2]}}function YZ(e,t){return e&&Object.assign(t||{},e)}function d8(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Zc(e[3]))):(t=YZ(e,{r:0,g:0,b:0,a:1}),t.a=Zc(t.a)),t}function M7e(e){return e.charAt(0)==="r"?P7e(e):_7e(e)}class Op{constructor(t){if(t instanceof Op)return t;const a=typeof t;let s;a==="object"?s=d8(t):a==="string"&&(s=x7e(t)||k7e(t)||M7e(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=YZ(this._rgb);return t&&(t.a=hl(t.a)),t}set rgb(t){this._rgb=d8(t)}rgbString(){return this._valid?D7e(this._rgb):void 0}hexString(){return this._valid?b7e(this._rgb):void 0}hslString(){return this._valid?T7e(this._rgb):void 0}mix(t,a){if(t){const s=this.rgb,r=t.rgb;let i;const o=a===i?.5:a,l=2*o-1,c=s.a-r.a,d=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;i=1-d,s.r=255&d*s.r+i*r.r+.5,s.g=255&d*s.g+i*r.g+.5,s.b=255&d*s.b+i*r.b+.5,s.a=o*s.a+(1-o)*r.a,this.rgb=s}return this}interpolate(t,a){return t&&(this._rgb=O7e(this._rgb,t._rgb,a)),this}clone(){return new Op(this.rgb)}alpha(t){return this._rgb.a=Zc(t),this}clearer(t){const a=this._rgb;return a.a*=1-t,this}greyscale(){const t=this._rgb,a=a0(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=a,this}opaquer(t){const a=this._rgb;return a.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return ub(this._rgb,2,t),this}darken(t){return ub(this._rgb,2,-t),this}saturate(t){return ub(this._rgb,1,t),this}desaturate(t){return ub(this._rgb,1,-t),this}rotate(t){return A7e(this._rgb,t),this}}function cl(){}const I7e=(()=>{let e=0;return()=>e++})();function _n(e){return e==null}function Qa(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function pn(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function hi(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function so(e,t){return hi(e)?e:t}function an(e,t){return typeof e>"u"?t:e}const $7e=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,QZ=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Qn(e,t,a){if(e&&typeof e.call=="function")return e.apply(a,t)}function Ln(e,t,a,s){let r,i,o;if(Qa(e))for(i=e.length,r=0;r<i;r++)t.call(a,e[r],r);else if(pn(e))for(o=Object.keys(e),i=o.length,r=0;r<i;r++)t.call(a,e[o[r]],o[r])}function hw(e,t){let a,s,r,i;if(!e||!t||e.length!==t.length)return!1;for(a=0,s=e.length;a<s;++a)if(r=e[a],i=t[a],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function gw(e){if(Qa(e))return e.map(gw);if(pn(e)){const t=Object.create(null),a=Object.keys(e),s=a.length;let r=0;for(;r<s;++r)t[a[r]]=gw(e[a[r]]);return t}return e}function KZ(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function R7e(e,t,a,s){if(!KZ(e))return;const r=t[e],i=a[e];pn(r)&&pn(i)?Mp(r,i,s):t[e]=gw(i)}function Mp(e,t,a){const s=Qa(t)?t:[t],r=s.length;if(!pn(e))return e;a=a||{};const i=a.merger||R7e;let o;for(let l=0;l<r;++l){if(o=s[l],!pn(o))continue;const c=Object.keys(o);for(let d=0,u=c.length;d<u;++d)i(c[d],e,o,a)}return e}function Kg(e,t){return Mp(e,t,{merger:z7e})}function z7e(e,t,a){if(!KZ(e))return;const s=t[e],r=a[e];pn(s)&&pn(r)?Kg(s,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=gw(r))}const u8={"":e=>e,x:e=>e.x,y:e=>e.y};function U7e(e){const t=e.split("."),a=[];let s="";for(const r of t)s+=r,s.endsWith("\\")?s=s.slice(0,-1)+".":(a.push(s),s="");return a}function F7e(e){const t=U7e(e);return a=>{for(const s of t){if(s==="")break;a=a&&a[s]}return a}}function Iu(e,t){return(u8[t]||(u8[t]=F7e(t)))(e)}function jD(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Ip=e=>typeof e<"u",cd=e=>typeof e=="function",m8=(e,t)=>{if(e.size!==t.size)return!1;for(const a of e)if(!t.has(a))return!1;return!0};function B7e(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Dn=Math.PI,ya=2*Dn,H7e=ya+Dn,pw=Number.POSITIVE_INFINITY,G7e=Dn/180,Ka=Dn/2,Rd=Dn/4,f8=Dn*2/3,XZ=Math.log10,_o=Math.sign;function Xg(e,t,a){return Math.abs(e-t)<a}function h8(e){const t=Math.round(e);e=Xg(e,t,e/1e3)?t:e;const a=Math.pow(10,Math.floor(XZ(e))),s=e/a;return(s<=1?1:s<=2?2:s<=5?5:10)*a}function W7e(e){const t=[],a=Math.sqrt(e);let s;for(s=1;s<a;s++)e%s===0&&(t.push(s),t.push(e/s));return a===(a|0)&&t.push(a),t.sort((r,i)=>r-i).pop(),t}function q7e(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function $p(e){return!q7e(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function V7e(e,t){const a=Math.round(e);return a-t<=e&&a+t>=e}function Y7e(e,t,a){let s,r,i;for(s=0,r=e.length;s<r;s++)i=e[s][a],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}function vl(e){return e*(Dn/180)}function Q7e(e){return e*(180/Dn)}function g8(e){if(!hi(e))return;let t=1,a=0;for(;Math.round(e*t)/t!==e;)t*=10,a++;return a}function ZZ(e,t){const a=t.x-e.x,s=t.y-e.y,r=Math.sqrt(a*a+s*s);let i=Math.atan2(s,a);return i<-.5*Dn&&(i+=ya),{angle:i,distance:r}}function wk(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function K7e(e,t){return(e-t+H7e)%ya-Dn}function Li(e){return(e%ya+ya)%ya}function Rp(e,t,a,s){const r=Li(e),i=Li(t),o=Li(a),l=Li(i-r),c=Li(o-r),d=Li(r-i),u=Li(r-o);return r===i||r===o||s&&i===o||l>c&&d<u}function Ts(e,t,a){return Math.max(t,Math.min(a,e))}function X7e(e){return Ts(e,-32768,32767)}function Vc(e,t,a,s=1e-6){return e>=Math.min(t,a)-s&&e<=Math.max(t,a)+s}function CD(e,t,a){a=a||(o=>e[o]<t);let s=e.length-1,r=0,i;for(;s-r>1;)i=r+s>>1,a(i)?r=i:s=i;return{lo:r,hi:s}}const iu=(e,t,a,s)=>CD(e,a,s?r=>{const i=e[r][t];return i<a||i===a&&e[r+1][t]===a}:r=>e[r][t]<a),Z7e=(e,t,a)=>CD(e,a,s=>e[s][t]>=a);function J7e(e,t,a){let s=0,r=e.length;for(;s<r&&e[s]<t;)s++;for(;r>s&&e[r-1]>a;)r--;return s>0||r<e.length?e.slice(s,r):e}const JZ=["push","pop","shift","splice","unshift"];function e8e(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),JZ.forEach(a=>{const s="_onData"+jD(a),r=e[a];Object.defineProperty(e,a,{configurable:!0,enumerable:!1,value(...i){const o=r.apply(this,i);return e._chartjs.listeners.forEach(l=>{typeof l[s]=="function"&&l[s](...i)}),o}})})}function p8(e,t){const a=e._chartjs;if(!a)return;const s=a.listeners,r=s.indexOf(t);r!==-1&&s.splice(r,1),!(s.length>0)&&(JZ.forEach(i=>{delete e[i]}),delete e._chartjs)}function eJ(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const tJ=(function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame})();function nJ(e,t){let a=[],s=!1;return function(...r){a=r,s||(s=!0,tJ.call(window,()=>{s=!1,e.apply(t,a)}))}}function t8e(e,t){let a;return function(...s){return t?(clearTimeout(a),a=setTimeout(e,t,s)):e.apply(this,s),t}}const SD=e=>e==="start"?"left":e==="end"?"right":"center",Cs=(e,t,a)=>e==="start"?t:e==="end"?a:(t+a)/2,n8e=(e,t,a,s)=>e===(s?"left":"right")?a:e==="center"?(t+a)/2:t;function a8e(e,t,a){const s=t.length;let r=0,i=s;if(e._sorted){const{iScale:o,vScale:l,_parsed:c}=e,d=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,u=o.axis,{min:f,max:p,minDefined:x,maxDefined:v}=o.getUserBounds();if(x){if(r=Math.min(iu(c,u,f).lo,a?s:iu(t,u,o.getPixelForValue(f)).lo),d){const N=c.slice(0,r+1).reverse().findIndex(b=>!_n(b[l.axis]));r-=Math.max(0,N)}r=Ts(r,0,s-1)}if(v){let N=Math.max(iu(c,o.axis,p,!0).hi+1,a?0:iu(t,u,o.getPixelForValue(p),!0).hi+1);if(d){const b=c.slice(N-1).findIndex(C=>!_n(C[l.axis]));N+=Math.max(0,b)}i=Ts(N,r,s)-r}else i=s-r}return{start:r,count:i}}function s8e(e){const{xScale:t,yScale:a,_scaleRanges:s}=e,r={xmin:t.min,xmax:t.max,ymin:a.min,ymax:a.max};if(!s)return e._scaleRanges=r,!0;const i=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==a.min||s.ymax!==a.max;return Object.assign(s,r),i}const mb=e=>e===0||e===1,x8=(e,t,a)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*ya/a)),y8=(e,t,a)=>Math.pow(2,-10*e)*Math.sin((e-t)*ya/a)+1,Zg={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*Ka)+1,easeOutSine:e=>Math.sin(e*Ka),easeInOutSine:e=>-.5*(Math.cos(Dn*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>mb(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>mb(e)?e:x8(e,.075,.3),easeOutElastic:e=>mb(e)?e:y8(e,.075,.3),easeInOutElastic(e){return mb(e)?e:e<.5?.5*x8(e*2,.1125,.45):.5+.5*y8(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-Zg.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?Zg.easeInBounce(e*2)*.5:Zg.easeOutBounce(e*2-1)*.5+.5};function _D(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function b8(e){return _D(e)?e:new Op(e)}function EA(e){return _D(e)?e:new Op(e).saturate(.5).darken(.1).hexString()}const r8e=["x","y","borderWidth","radius","tension"],i8e=["color","borderColor","backgroundColor"];function o8e(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:i8e},numbers:{type:"number",properties:r8e}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function l8e(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const v8=new Map;function c8e(e,t){t=t||{};const a=e+JSON.stringify(t);let s=v8.get(a);return s||(s=new Intl.NumberFormat(e,t),v8.set(a,s)),s}function AD(e,t,a){return c8e(t,a).format(e)}const d8e={values(e){return Qa(e)?e:""+e},numeric(e,t,a){if(e===0)return"0";const s=this.chart.options.locale;let r,i=e;if(a.length>1){const d=Math.max(Math.abs(a[0].value),Math.abs(a[a.length-1].value));(d<1e-4||d>1e15)&&(r="scientific"),i=u8e(e,a)}const o=XZ(Math.abs(i)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:r,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),AD(e,s,c)}};function u8e(e,t){let a=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(a)>=1&&e!==Math.floor(e)&&(a=e-Math.floor(e)),a}var aJ={formatters:d8e};function m8e(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,a)=>a.lineWidth,tickColor:(t,a)=>a.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:aJ.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const $u=Object.create(null),Nk=Object.create(null);function Jg(e,t){if(!t)return e;const a=t.split(".");for(let s=0,r=a.length;s<r;++s){const i=a[s];e=e[i]||(e[i]=Object.create(null))}return e}function kA(e,t,a){return typeof t=="string"?Mp(Jg(e,t),a):Mp(Jg(e,""),t)}class f8e{constructor(t,a){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,r)=>EA(r.backgroundColor),this.hoverBorderColor=(s,r)=>EA(r.borderColor),this.hoverColor=(s,r)=>EA(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(a)}set(t,a){return kA(this,t,a)}get(t){return Jg(this,t)}describe(t,a){return kA(Nk,t,a)}override(t,a){return kA($u,t,a)}route(t,a,s,r){const i=Jg(this,t),o=Jg(this,s),l="_"+a;Object.defineProperties(i,{[l]:{value:i[a],writable:!0},[a]:{enumerable:!0,get(){const c=this[l],d=o[r];return pn(c)?Object.assign({},d,c):an(c,d)},set(c){this[l]=c}}})}apply(t){t.forEach(a=>a(this))}}var Ca=new f8e({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[o8e,l8e,m8e]);function h8e(e){return!e||_n(e.size)||_n(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function w8(e,t,a,s,r){let i=t[r];return i||(i=t[r]=e.measureText(r).width,a.push(r)),i>s&&(s=i),s}function zd(e,t,a){const s=e.currentDevicePixelRatio,r=a!==0?Math.max(a/2,.5):0;return Math.round((t-r)*s)/s+r}function N8(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function jk(e,t,a,s){sJ(e,t,a,s,null)}function sJ(e,t,a,s,r){let i,o,l,c,d,u,f,p;const x=t.pointStyle,v=t.rotation,N=t.radius;let b=(v||0)*G7e;if(x&&typeof x=="object"&&(i=x.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){e.save(),e.translate(a,s),e.rotate(b),e.drawImage(x,-x.width/2,-x.height/2,x.width,x.height),e.restore();return}if(!(isNaN(N)||N<=0)){switch(e.beginPath(),x){default:r?e.ellipse(a,s,r/2,N,0,0,ya):e.arc(a,s,N,0,ya),e.closePath();break;case"triangle":u=r?r/2:N,e.moveTo(a+Math.sin(b)*u,s-Math.cos(b)*N),b+=f8,e.lineTo(a+Math.sin(b)*u,s-Math.cos(b)*N),b+=f8,e.lineTo(a+Math.sin(b)*u,s-Math.cos(b)*N),e.closePath();break;case"rectRounded":d=N*.516,c=N-d,o=Math.cos(b+Rd)*c,f=Math.cos(b+Rd)*(r?r/2-d:c),l=Math.sin(b+Rd)*c,p=Math.sin(b+Rd)*(r?r/2-d:c),e.arc(a-f,s-l,d,b-Dn,b-Ka),e.arc(a+p,s-o,d,b-Ka,b),e.arc(a+f,s+l,d,b,b+Ka),e.arc(a-p,s+o,d,b+Ka,b+Dn),e.closePath();break;case"rect":if(!v){c=Math.SQRT1_2*N,u=r?r/2:c,e.rect(a-u,s-c,2*u,2*c);break}b+=Rd;case"rectRot":f=Math.cos(b)*(r?r/2:N),o=Math.cos(b)*N,l=Math.sin(b)*N,p=Math.sin(b)*(r?r/2:N),e.moveTo(a-f,s-l),e.lineTo(a+p,s-o),e.lineTo(a+f,s+l),e.lineTo(a-p,s+o),e.closePath();break;case"crossRot":b+=Rd;case"cross":f=Math.cos(b)*(r?r/2:N),o=Math.cos(b)*N,l=Math.sin(b)*N,p=Math.sin(b)*(r?r/2:N),e.moveTo(a-f,s-l),e.lineTo(a+f,s+l),e.moveTo(a+p,s-o),e.lineTo(a-p,s+o);break;case"star":f=Math.cos(b)*(r?r/2:N),o=Math.cos(b)*N,l=Math.sin(b)*N,p=Math.sin(b)*(r?r/2:N),e.moveTo(a-f,s-l),e.lineTo(a+f,s+l),e.moveTo(a+p,s-o),e.lineTo(a-p,s+o),b+=Rd,f=Math.cos(b)*(r?r/2:N),o=Math.cos(b)*N,l=Math.sin(b)*N,p=Math.sin(b)*(r?r/2:N),e.moveTo(a-f,s-l),e.lineTo(a+f,s+l),e.moveTo(a+p,s-o),e.lineTo(a-p,s+o);break;case"line":o=r?r/2:Math.cos(b)*N,l=Math.sin(b)*N,e.moveTo(a-o,s-l),e.lineTo(a+o,s+l);break;case"dash":e.moveTo(a,s),e.lineTo(a+Math.cos(b)*(r?r/2:N),s+Math.sin(b)*N);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function zp(e,t,a){return a=a||.5,!t||e&&e.x>t.left-a&&e.x<t.right+a&&e.y>t.top-a&&e.y<t.bottom+a}function TD(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function ED(e){e.restore()}function g8e(e,t,a,s,r){if(!t)return e.lineTo(a.x,a.y);if(r==="middle"){const i=(t.x+a.x)/2;e.lineTo(i,t.y),e.lineTo(i,a.y)}else r==="after"!=!!s?e.lineTo(t.x,a.y):e.lineTo(a.x,t.y);e.lineTo(a.x,a.y)}function p8e(e,t,a,s){if(!t)return e.lineTo(a.x,a.y);e.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?a.cp2x:a.cp1x,s?a.cp2y:a.cp1y,a.x,a.y)}function x8e(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),_n(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function y8e(e,t,a,s,r){if(r.strikethrough||r.underline){const i=e.measureText(s),o=t-i.actualBoundingBoxLeft,l=t+i.actualBoundingBoxRight,c=a-i.actualBoundingBoxAscent,d=a+i.actualBoundingBoxDescent,u=r.strikethrough?(c+d)/2:d;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(o,u),e.lineTo(l,u),e.stroke()}}function b8e(e,t){const a=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=a}function Up(e,t,a,s,r,i={}){const o=Qa(t)?t:[t],l=i.strokeWidth>0&&i.strokeColor!=="";let c,d;for(e.save(),e.font=r.string,x8e(e,i),c=0;c<o.length;++c)d=o[c],i.backdrop&&b8e(e,i.backdrop),l&&(i.strokeColor&&(e.strokeStyle=i.strokeColor),_n(i.strokeWidth)||(e.lineWidth=i.strokeWidth),e.strokeText(d,a,s,i.maxWidth)),e.fillText(d,a,s,i.maxWidth),y8e(e,a,s,d,i),s+=Number(r.lineHeight);e.restore()}function xw(e,t){const{x:a,y:s,w:r,h:i,radius:o}=t;e.arc(a+o.topLeft,s+o.topLeft,o.topLeft,1.5*Dn,Dn,!0),e.lineTo(a,s+i-o.bottomLeft),e.arc(a+o.bottomLeft,s+i-o.bottomLeft,o.bottomLeft,Dn,Ka,!0),e.lineTo(a+r-o.bottomRight,s+i),e.arc(a+r-o.bottomRight,s+i-o.bottomRight,o.bottomRight,Ka,0,!0),e.lineTo(a+r,s+o.topRight),e.arc(a+r-o.topRight,s+o.topRight,o.topRight,0,-Ka,!0),e.lineTo(a+o.topLeft,s)}const v8e=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,w8e=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function N8e(e,t){const a=(""+e).match(v8e);if(!a||a[1]==="normal")return t*1.2;switch(e=+a[2],a[3]){case"px":return e;case"%":e/=100;break}return t*e}const j8e=e=>+e||0;function kD(e,t){const a={},s=pn(t),r=s?Object.keys(t):t,i=pn(e)?s?o=>an(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of r)a[o]=j8e(i(o));return a}function rJ(e){return kD(e,{top:"y",right:"x",bottom:"y",left:"x"})}function uf(e){return kD(e,["topLeft","topRight","bottomLeft","bottomRight"])}function gi(e){const t=rJ(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Es(e,t){e=e||{},t=t||Ca.font;let a=an(e.size,t.size);typeof a=="string"&&(a=parseInt(a,10));let s=an(e.style,t.style);s&&!(""+s).match(w8e)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const r={family:an(e.family,t.family),lineHeight:N8e(an(e.lineHeight,t.lineHeight),a),size:a,style:s,weight:an(e.weight,t.weight),string:""};return r.string=h8e(r),r}function fb(e,t,a,s){let r,i,o;for(r=0,i=e.length;r<i;++r)if(o=e[r],o!==void 0&&o!==void 0)return o}function C8e(e,t,a){const{min:s,max:r}=e,i=QZ(t,(r-s)/2),o=(l,c)=>a&&l===0?0:l+c;return{min:o(s,-Math.abs(i)),max:o(r,i)}}function Qu(e,t){return Object.assign(Object.create(e),t)}function LD(e,t=[""],a,s,r=()=>e[0]){const i=a||e;typeof s>"u"&&(s=cJ("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:s,_getTarget:r,override:l=>LD([l,...e],t,i,s)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete l._keys,delete e[0][c],!0},get(l,c){return oJ(l,c,()=>P8e(c,t,e,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(l,c){return C8(l).includes(c)},ownKeys(l){return C8(l)},set(l,c,d){const u=l._storage||(l._storage=r());return l[c]=u[c]=d,delete l._keys,!0}})}function Lf(e,t,a,s){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:a,_stack:new Set,_descriptors:iJ(e,s),setContext:i=>Lf(e,i,a,s),override:i=>Lf(e.override(i),t,a,s)};return new Proxy(r,{deleteProperty(i,o){return delete i[o],delete e[o],!0},get(i,o,l){return oJ(i,o,()=>_8e(i,o,l))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(i,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(i,o,l){return e[o]=l,delete i[o],!0}})}function iJ(e,t={scriptable:!0,indexable:!0}){const{_scriptable:a=t.scriptable,_indexable:s=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:a,indexable:s,isScriptable:cd(a)?a:()=>a,isIndexable:cd(s)?s:()=>s}}const S8e=(e,t)=>e?e+jD(t):t,PD=(e,t)=>pn(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function oJ(e,t,a){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const s=a();return e[t]=s,s}function _8e(e,t,a){const{_proxy:s,_context:r,_subProxy:i,_descriptors:o}=e;let l=s[t];return cd(l)&&o.isScriptable(t)&&(l=A8e(t,l,e,a)),Qa(l)&&l.length&&(l=T8e(t,l,e,o.isIndexable)),PD(t,l)&&(l=Lf(l,r,i&&i[t],o)),l}function A8e(e,t,a,s){const{_proxy:r,_context:i,_subProxy:o,_stack:l}=a;if(l.has(e))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+e);l.add(e);let c=t(i,o||s);return l.delete(e),PD(e,c)&&(c=DD(r._scopes,r,e,c)),c}function T8e(e,t,a,s){const{_proxy:r,_context:i,_subProxy:o,_descriptors:l}=a;if(typeof i.index<"u"&&s(e))return t[i.index%t.length];if(pn(t[0])){const c=t,d=r._scopes.filter(u=>u!==c);t=[];for(const u of c){const f=DD(d,r,e,u);t.push(Lf(f,i,o&&o[e],l))}}return t}function lJ(e,t,a){return cd(e)?e(t,a):e}const E8e=(e,t)=>e===!0?t:typeof e=="string"?Iu(t,e):void 0;function k8e(e,t,a,s,r){for(const i of t){const o=E8e(a,i);if(o){e.add(o);const l=lJ(o._fallback,a,r);if(typeof l<"u"&&l!==a&&l!==s)return l}else if(o===!1&&typeof s<"u"&&a!==s)return null}return!1}function DD(e,t,a,s){const r=t._rootScopes,i=lJ(t._fallback,a,s),o=[...e,...r],l=new Set;l.add(s);let c=j8(l,o,a,i||a,s);return c===null||typeof i<"u"&&i!==a&&(c=j8(l,o,i,c,s),c===null)?!1:LD(Array.from(l),[""],r,i,()=>L8e(t,a,s))}function j8(e,t,a,s,r){for(;a;)a=k8e(e,t,a,s,r);return a}function L8e(e,t,a){const s=e._getTarget();t in s||(s[t]={});const r=s[t];return Qa(r)&&pn(a)?a:r||{}}function P8e(e,t,a,s){let r;for(const i of t)if(r=cJ(S8e(i,e),a),typeof r<"u")return PD(e,r)?DD(a,s,e,r):r}function cJ(e,t){for(const a of t){if(!a)continue;const s=a[e];if(typeof s<"u")return s}}function C8(e){let t=e._keys;return t||(t=e._keys=D8e(e._scopes)),t}function D8e(e){const t=new Set;for(const a of e)for(const s of Object.keys(a).filter(r=>!r.startsWith("_")))t.add(s);return Array.from(t)}const O8e=Number.EPSILON||1e-14,Pf=(e,t)=>t<e.length&&!e[t].skip&&e[t],dJ=e=>e==="x"?"y":"x";function M8e(e,t,a,s){const r=e.skip?t:e,i=t,o=a.skip?t:a,l=wk(i,r),c=wk(o,i);let d=l/(l+c),u=c/(l+c);d=isNaN(d)?0:d,u=isNaN(u)?0:u;const f=s*d,p=s*u;return{previous:{x:i.x-f*(o.x-r.x),y:i.y-f*(o.y-r.y)},next:{x:i.x+p*(o.x-r.x),y:i.y+p*(o.y-r.y)}}}function I8e(e,t,a){const s=e.length;let r,i,o,l,c,d=Pf(e,0);for(let u=0;u<s-1;++u)if(c=d,d=Pf(e,u+1),!(!c||!d)){if(Xg(t[u],0,O8e)){a[u]=a[u+1]=0;continue}r=a[u]/t[u],i=a[u+1]/t[u],l=Math.pow(r,2)+Math.pow(i,2),!(l<=9)&&(o=3/Math.sqrt(l),a[u]=r*o*t[u],a[u+1]=i*o*t[u])}}function $8e(e,t,a="x"){const s=dJ(a),r=e.length;let i,o,l,c=Pf(e,0);for(let d=0;d<r;++d){if(o=l,l=c,c=Pf(e,d+1),!l)continue;const u=l[a],f=l[s];o&&(i=(u-o[a])/3,l[`cp1${a}`]=u-i,l[`cp1${s}`]=f-i*t[d]),c&&(i=(c[a]-u)/3,l[`cp2${a}`]=u+i,l[`cp2${s}`]=f+i*t[d])}}function R8e(e,t="x"){const a=dJ(t),s=e.length,r=Array(s).fill(0),i=Array(s);let o,l,c,d=Pf(e,0);for(o=0;o<s;++o)if(l=c,c=d,d=Pf(e,o+1),!!c){if(d){const u=d[t]-c[t];r[o]=u!==0?(d[a]-c[a])/u:0}i[o]=l?d?_o(r[o-1])!==_o(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}I8e(e,r,i),$8e(e,i,t)}function hb(e,t,a){return Math.max(Math.min(e,a),t)}function z8e(e,t){let a,s,r,i,o,l=zp(e[0],t);for(a=0,s=e.length;a<s;++a)o=i,i=l,l=a<s-1&&zp(e[a+1],t),i&&(r=e[a],o&&(r.cp1x=hb(r.cp1x,t.left,t.right),r.cp1y=hb(r.cp1y,t.top,t.bottom)),l&&(r.cp2x=hb(r.cp2x,t.left,t.right),r.cp2y=hb(r.cp2y,t.top,t.bottom)))}function U8e(e,t,a,s,r){let i,o,l,c;if(t.spanGaps&&(e=e.filter(d=>!d.skip)),t.cubicInterpolationMode==="monotone")R8e(e,r);else{let d=s?e[e.length-1]:e[0];for(i=0,o=e.length;i<o;++i)l=e[i],c=M8e(d,l,e[Math.min(i+1,o-(s?0:1))%o],t.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,d=l}t.capBezierPoints&&z8e(e,a)}function OD(){return typeof window<"u"&&typeof document<"u"}function MD(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function yw(e,t,a){let s;return typeof e=="string"?(s=parseInt(e,10),e.indexOf("%")!==-1&&(s=s/100*t.parentNode[a])):s=e,s}const qj=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function F8e(e,t){return qj(e).getPropertyValue(t)}const B8e=["top","right","bottom","left"];function gu(e,t,a){const s={};a=a?"-"+a:"";for(let r=0;r<4;r++){const i=B8e[r];s[i]=parseFloat(e[t+"-"+i+a])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const H8e=(e,t,a)=>(e>0||t>0)&&(!a||!a.shadowRoot);function G8e(e,t){const a=e.touches,s=a&&a.length?a[0]:e,{offsetX:r,offsetY:i}=s;let o=!1,l,c;if(H8e(r,i,e.target))l=r,c=i;else{const d=t.getBoundingClientRect();l=s.clientX-d.left,c=s.clientY-d.top,o=!0}return{x:l,y:c,box:o}}function Vd(e,t){if("native"in e)return e;const{canvas:a,currentDevicePixelRatio:s}=t,r=qj(a),i=r.boxSizing==="border-box",o=gu(r,"padding"),l=gu(r,"border","width"),{x:c,y:d,box:u}=G8e(e,a),f=o.left+(u&&l.left),p=o.top+(u&&l.top);let{width:x,height:v}=t;return i&&(x-=o.width+l.width,v-=o.height+l.height),{x:Math.round((c-f)/x*a.width/s),y:Math.round((d-p)/v*a.height/s)}}function W8e(e,t,a){let s,r;if(t===void 0||a===void 0){const i=e&&MD(e);if(!i)t=e.clientWidth,a=e.clientHeight;else{const o=i.getBoundingClientRect(),l=qj(i),c=gu(l,"border","width"),d=gu(l,"padding");t=o.width-d.width-c.width,a=o.height-d.height-c.height,s=yw(l.maxWidth,i,"clientWidth"),r=yw(l.maxHeight,i,"clientHeight")}}return{width:t,height:a,maxWidth:s||pw,maxHeight:r||pw}}const Yc=e=>Math.round(e*10)/10;function q8e(e,t,a,s){const r=qj(e),i=gu(r,"margin"),o=yw(r.maxWidth,e,"clientWidth")||pw,l=yw(r.maxHeight,e,"clientHeight")||pw,c=W8e(e,t,a);let{width:d,height:u}=c;if(r.boxSizing==="content-box"){const p=gu(r,"border","width"),x=gu(r,"padding");d-=x.width+p.width,u-=x.height+p.height}return d=Math.max(0,d-i.width),u=Math.max(0,s?d/s:u-i.height),d=Yc(Math.min(d,o,c.maxWidth)),u=Yc(Math.min(u,l,c.maxHeight)),d&&!u&&(u=Yc(d/2)),(t!==void 0||a!==void 0)&&s&&c.height&&u>c.height&&(u=c.height,d=Yc(Math.floor(u*s))),{width:d,height:u}}function S8(e,t,a){const s=t||1,r=Yc(e.height*s),i=Yc(e.width*s);e.height=Yc(e.height),e.width=Yc(e.width);const o=e.canvas;return o.style&&(a||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==s||o.height!==r||o.width!==i?(e.currentDevicePixelRatio=s,o.height=r,o.width=i,e.ctx.setTransform(s,0,0,s,0,0),!0):!1}const V8e=(function(){let e=!1;try{const t={get passive(){return e=!0,!1}};OD()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e})();function _8(e,t){const a=F8e(e,t),s=a&&a.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function Yd(e,t,a,s){return{x:e.x+a*(t.x-e.x),y:e.y+a*(t.y-e.y)}}function Y8e(e,t,a,s){return{x:e.x+a*(t.x-e.x),y:s==="middle"?a<.5?e.y:t.y:s==="after"?a<1?e.y:t.y:a>0?t.y:e.y}}function Q8e(e,t,a,s){const r={x:e.cp2x,y:e.cp2y},i={x:t.cp1x,y:t.cp1y},o=Yd(e,r,a),l=Yd(r,i,a),c=Yd(i,t,a),d=Yd(o,l,a),u=Yd(l,c,a);return Yd(d,u,a)}const K8e=function(e,t){return{x(a){return e+e+t-a},setWidth(a){t=a},textAlign(a){return a==="center"?a:a==="right"?"left":"right"},xPlus(a,s){return a-s},leftForLtr(a,s){return a-s}}},X8e=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function mf(e,t,a){return e?K8e(t,a):X8e()}function uJ(e,t){let a,s;(t==="ltr"||t==="rtl")&&(a=e.canvas.style,s=[a.getPropertyValue("direction"),a.getPropertyPriority("direction")],a.setProperty("direction",t,"important"),e.prevTextDirection=s)}function mJ(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function fJ(e){return e==="angle"?{between:Rp,compare:K7e,normalize:Li}:{between:Vc,compare:(t,a)=>t-a,normalize:t=>t}}function A8({start:e,end:t,count:a,loop:s,style:r}){return{start:e%a,end:t%a,loop:s&&(t-e+1)%a===0,style:r}}function Z8e(e,t,a){const{property:s,start:r,end:i}=a,{between:o,normalize:l}=fJ(s),c=t.length;let{start:d,end:u,loop:f}=e,p,x;if(f){for(d+=c,u+=c,p=0,x=c;p<x&&o(l(t[d%c][s]),r,i);++p)d--,u--;d%=c,u%=c}return u<d&&(u+=c),{start:d,end:u,loop:f,style:e.style}}function J8e(e,t,a){if(!a)return[e];const{property:s,start:r,end:i}=a,o=t.length,{compare:l,between:c,normalize:d}=fJ(s),{start:u,end:f,loop:p,style:x}=Z8e(e,t,a),v=[];let N=!1,b=null,C,w,S;const E=()=>c(r,S,C)&&l(r,S)!==0,k=()=>l(i,C)===0||c(i,S,C),A=()=>N||E(),T=()=>!N||k();for(let _=u,I=u;_<=f;++_)w=t[_%o],!w.skip&&(C=d(w[s]),C!==S&&(N=c(C,r,i),b===null&&A()&&(b=l(C,r)===0?_:I),b!==null&&T()&&(v.push(A8({start:b,end:_,loop:p,count:o,style:x})),b=null),I=_,S=C));return b!==null&&v.push(A8({start:b,end:f,loop:p,count:o,style:x})),v}function eBe(e,t){const a=[],s=e.segments;for(let r=0;r<s.length;r++){const i=J8e(s[r],e.points,t);i.length&&a.push(...i)}return a}function tBe(e,t,a,s){let r=0,i=t-1;if(a&&!s)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,a&&(i+=r);i>r&&e[i%t].skip;)i--;return i%=t,{start:r,end:i}}function nBe(e,t,a,s){const r=e.length,i=[];let o=t,l=e[t],c;for(c=t+1;c<=a;++c){const d=e[c%r];d.skip||d.stop?l.skip||(s=!1,i.push({start:t%r,end:(c-1)%r,loop:s}),t=o=d.stop?c:null):(o=c,l.skip&&(t=c)),l=d}return o!==null&&i.push({start:t%r,end:o%r,loop:s}),i}function aBe(e,t){const a=e.points,s=e.options.spanGaps,r=a.length;if(!r)return[];const i=!!e._loop,{start:o,end:l}=tBe(a,r,i,s);if(s===!0)return T8(e,[{start:o,end:l,loop:i}],a,t);const c=l<o?l+r:l,d=!!e._fullLoop&&o===0&&l===r-1;return T8(e,nBe(a,o,c,d),a,t)}function T8(e,t,a,s){return!s||!s.setContext||!a?t:sBe(e,t,a,s)}function sBe(e,t,a,s){const r=e._chart.getContext(),i=E8(e.options),{_datasetIndex:o,options:{spanGaps:l}}=e,c=a.length,d=[];let u=i,f=t[0].start,p=f;function x(v,N,b,C){const w=l?-1:1;if(v!==N){for(v+=c;a[v%c].skip;)v-=w;for(;a[N%c].skip;)N+=w;v%c!==N%c&&(d.push({start:v%c,end:N%c,loop:b,style:C}),u=C,f=N%c)}}for(const v of t){f=l?f:v.start;let N=a[f%c],b;for(p=f+1;p<=v.end;p++){const C=a[p%c];b=E8(s.setContext(Qu(r,{type:"segment",p0:N,p1:C,p0DataIndex:(p-1)%c,p1DataIndex:p%c,datasetIndex:o}))),rBe(b,u)&&x(f,p-1,v.loop,u),N=C,u=b}f<p-1&&x(f,p-1,v.loop,u)}return d}function E8(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function rBe(e,t){if(!t)return!1;const a=[],s=function(r,i){return _D(i)?(a.includes(i)||a.push(i),a.indexOf(i)):i};return JSON.stringify(e,s)!==JSON.stringify(t,s)}function gb(e,t,a){return e.options.clip?e[a]:t[a]}function iBe(e,t){const{xScale:a,yScale:s}=e;return a&&s?{left:gb(a,t,"left"),right:gb(a,t,"right"),top:gb(s,t,"top"),bottom:gb(s,t,"bottom")}:t}function oBe(e,t){const a=t._clip;if(a.disabled)return!1;const s=iBe(t,e.chartArea);return{left:a.left===!1?0:s.left-(a.left===!0?0:a.left),right:a.right===!1?e.width:s.right+(a.right===!0?0:a.right),top:a.top===!1?0:s.top-(a.top===!0?0:a.top),bottom:a.bottom===!1?e.height:s.bottom+(a.bottom===!0?0:a.bottom)}}class lBe{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,a,s,r){const i=a.listeners[r],o=a.duration;i.forEach(l=>l({chart:t,initial:a.initial,numSteps:o,currentStep:Math.min(s-a.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=tJ.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let a=0;this._charts.forEach((s,r)=>{if(!s.running||!s.items.length)return;const i=s.items;let o=i.length-1,l=!1,c;for(;o>=0;--o)c=i[o],c._active?(c._total>s.duration&&(s.duration=c._total),c.tick(t),l=!0):(i[o]=i[i.length-1],i.pop());l&&(r.draw(),this._notify(r,s,t,"progress")),i.length||(s.running=!1,this._notify(r,s,t,"complete"),s.initial=!1),a+=i.length}),this._lastDate=t,a===0&&(this._running=!1)}_getAnims(t){const a=this._charts;let s=a.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},a.set(t,s)),s}listen(t,a,s){this._getAnims(t).listeners[a].push(s)}add(t,a){!a||!a.length||this._getAnims(t).items.push(...a)}has(t){return this._getAnims(t).items.length>0}start(t){const a=this._charts.get(t);a&&(a.running=!0,a.start=Date.now(),a.duration=a.items.reduce((s,r)=>Math.max(s,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const a=this._charts.get(t);return!(!a||!a.running||!a.items.length)}stop(t){const a=this._charts.get(t);if(!a||!a.items.length)return;const s=a.items;let r=s.length-1;for(;r>=0;--r)s[r].cancel();a.items=[],this._notify(t,a,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var ul=new lBe;const k8="transparent",cBe={boolean(e,t,a){return a>.5?t:e},color(e,t,a){const s=b8(e||k8),r=s.valid&&b8(t||k8);return r&&r.valid?r.mix(s,a).hexString():t},number(e,t,a){return e+(t-e)*a}};class dBe{constructor(t,a,s,r){const i=a[s];r=fb([t.to,r,i,t.from]);const o=fb([t.from,i,r]);this._active=!0,this._fn=t.fn||cBe[t.type||typeof o],this._easing=Zg[t.easing]||Zg.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=a,this._prop=s,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(t,a,s){if(this._active){this._notify(!1);const r=this._target[this._prop],i=s-this._start,o=this._duration-i;this._start=s,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=i,this._loop=!!t.loop,this._to=fb([t.to,a,r,t.from]),this._from=fb([t.from,r,a])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const a=t-this._start,s=this._duration,r=this._prop,i=this._from,o=this._loop,l=this._to;let c;if(this._active=i!==l&&(o||a<s),!this._active){this._target[r]=l,this._notify(!0);return}if(a<0){this._target[r]=i;return}c=a/s%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[r]=this._fn(i,l,c)}wait(){const t=this._promises||(this._promises=[]);return new Promise((a,s)=>{t.push({res:a,rej:s})})}_notify(t){const a=t?"res":"rej",s=this._promises||[];for(let r=0;r<s.length;r++)s[r][a]()}}class hJ{constructor(t,a){this._chart=t,this._properties=new Map,this.configure(a)}configure(t){if(!pn(t))return;const a=Object.keys(Ca.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const i=t[r];if(!pn(i))return;const o={};for(const l of a)o[l]=i[l];(Qa(i.properties)&&i.properties||[r]).forEach(l=>{(l===r||!s.has(l))&&s.set(l,o)})})}_animateOptions(t,a){const s=a.options,r=mBe(t,s);if(!r)return[];const i=this._createAnimations(r,s);return s.$shared&&uBe(t.options.$animations,s).then(()=>{t.options=s},()=>{}),i}_createAnimations(t,a){const s=this._properties,r=[],i=t.$animations||(t.$animations={}),o=Object.keys(a),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const d=o[c];if(d.charAt(0)==="$")continue;if(d==="options"){r.push(...this._animateOptions(t,a));continue}const u=a[d];let f=i[d];const p=s.get(d);if(f)if(p&&f.active()){f.update(p,u,l);continue}else f.cancel();if(!p||!p.duration){t[d]=u;continue}i[d]=f=new dBe(p,t,d,u),r.push(f)}return r}update(t,a){if(this._properties.size===0){Object.assign(t,a);return}const s=this._createAnimations(t,a);if(s.length)return ul.add(this._chart,s),!0}}function uBe(e,t){const a=[],s=Object.keys(t);for(let r=0;r<s.length;r++){const i=e[s[r]];i&&i.active()&&a.push(i.wait())}return Promise.all(a)}function mBe(e,t){if(!t)return;let a=e.options;if(!a){e.options=t;return}return a.$shared&&(e.options=a=Object.assign({},a,{$shared:!1,$animations:{}})),a}function L8(e,t){const a=e&&e.options||{},s=a.reverse,r=a.min===void 0?t:0,i=a.max===void 0?t:0;return{start:s?i:r,end:s?r:i}}function fBe(e,t,a){if(a===!1)return!1;const s=L8(e,a),r=L8(t,a);return{top:r.end,right:s.end,bottom:r.start,left:s.start}}function hBe(e){let t,a,s,r;return pn(e)?(t=e.top,a=e.right,s=e.bottom,r=e.left):t=a=s=r=e,{top:t,right:a,bottom:s,left:r,disabled:e===!1}}function gJ(e,t){const a=[],s=e._getSortedDatasetMetas(t);let r,i;for(r=0,i=s.length;r<i;++r)a.push(s[r].index);return a}function P8(e,t,a,s={}){const r=e.keys,i=s.mode==="single";let o,l,c,d;if(t===null)return;let u=!1;for(o=0,l=r.length;o<l;++o){if(c=+r[o],c===a){if(u=!0,s.all)continue;break}d=e.values[c],hi(d)&&(i||t===0||_o(t)===_o(d))&&(t+=d)}return!u&&!s.all?0:t}function gBe(e,t){const{iScale:a,vScale:s}=t,r=a.axis==="x"?"x":"y",i=s.axis==="x"?"x":"y",o=Object.keys(e),l=new Array(o.length);let c,d,u;for(c=0,d=o.length;c<d;++c)u=o[c],l[c]={[r]:u,[i]:e[u]};return l}function LA(e,t){const a=e&&e.options.stacked;return a||a===void 0&&t.stack!==void 0}function pBe(e,t,a){return`${e.id}.${t.id}.${a.stack||a.type}`}function xBe(e){const{min:t,max:a,minDefined:s,maxDefined:r}=e.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:r?a:Number.POSITIVE_INFINITY}}function yBe(e,t,a){const s=e[t]||(e[t]={});return s[a]||(s[a]={})}function D8(e,t,a,s){for(const r of t.getMatchingVisibleMetas(s).reverse()){const i=e[r.index];if(a&&i>0||!a&&i<0)return r.index}return null}function O8(e,t){const{chart:a,_cachedMeta:s}=e,r=a._stacks||(a._stacks={}),{iScale:i,vScale:o,index:l}=s,c=i.axis,d=o.axis,u=pBe(i,o,s),f=t.length;let p;for(let x=0;x<f;++x){const v=t[x],{[c]:N,[d]:b}=v,C=v._stacks||(v._stacks={});p=C[d]=yBe(r,u,N),p[l]=b,p._top=D8(p,o,!0,s.type),p._bottom=D8(p,o,!1,s.type);const w=p._visualValues||(p._visualValues={});w[l]=b}}function PA(e,t){const a=e.scales;return Object.keys(a).filter(s=>a[s].axis===t).shift()}function bBe(e,t){return Qu(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function vBe(e,t,a){return Qu(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:a,index:t,mode:"default",type:"data"})}function xg(e,t){const a=e.controller.index,s=e.vScale&&e.vScale.axis;if(s){t=t||e._parsed;for(const r of t){const i=r._stacks;if(!i||i[s]===void 0||i[s][a]===void 0)return;delete i[s][a],i[s]._visualValues!==void 0&&i[s]._visualValues[a]!==void 0&&delete i[s]._visualValues[a]}}}const DA=e=>e==="reset"||e==="none",M8=(e,t)=>t?e:Object.assign({},e),wBe=(e,t,a)=>e&&!t.hidden&&t._stacked&&{keys:gJ(a,!0),values:null};class Vj{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,a){this.chart=t,this._ctx=t.ctx,this.index=a,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=LA(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&xg(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,a=this._cachedMeta,s=this.getDataset(),r=(f,p,x,v)=>f==="x"?p:f==="r"?v:x,i=a.xAxisID=an(s.xAxisID,PA(t,"x")),o=a.yAxisID=an(s.yAxisID,PA(t,"y")),l=a.rAxisID=an(s.rAxisID,PA(t,"r")),c=a.indexAxis,d=a.iAxisID=r(c,i,o,l),u=a.vAxisID=r(c,o,i,l);a.xScale=this.getScaleForId(i),a.yScale=this.getScaleForId(o),a.rScale=this.getScaleForId(l),a.iScale=this.getScaleForId(d),a.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const a=this._cachedMeta;return t===a.iScale?a.vScale:a.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&p8(this._data,this),t._stacked&&xg(t)}_dataCheck(){const t=this.getDataset(),a=t.data||(t.data=[]),s=this._data;if(pn(a)){const r=this._cachedMeta;this._data=gBe(a,r)}else if(s!==a){if(s){p8(s,this);const r=this._cachedMeta;xg(r),r._parsed=[]}a&&Object.isExtensible(a)&&e8e(a,this),this._syncList=[],this._data=a}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const a=this._cachedMeta,s=this.getDataset();let r=!1;this._dataCheck();const i=a._stacked;a._stacked=LA(a.vScale,a),a.stack!==s.stack&&(r=!0,xg(a),a.stack=s.stack),this._resyncElements(t),(r||i!==a._stacked)&&(O8(this,a._parsed),a._stacked=LA(a.vScale,a))}configure(){const t=this.chart.config,a=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),a,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,a){const{_cachedMeta:s,_data:r}=this,{iScale:i,_stacked:o}=s,l=i.axis;let c=t===0&&a===r.length?!0:s._sorted,d=t>0&&s._parsed[t-1],u,f,p;if(this._parsing===!1)s._parsed=r,s._sorted=!0,p=r;else{Qa(r[t])?p=this.parseArrayData(s,r,t,a):pn(r[t])?p=this.parseObjectData(s,r,t,a):p=this.parsePrimitiveData(s,r,t,a);const x=()=>f[l]===null||d&&f[l]<d[l];for(u=0;u<a;++u)s._parsed[u+t]=f=p[u],c&&(x()&&(c=!1),d=f);s._sorted=c}o&&O8(this,p)}parsePrimitiveData(t,a,s,r){const{iScale:i,vScale:o}=t,l=i.axis,c=o.axis,d=i.getLabels(),u=i===o,f=new Array(r);let p,x,v;for(p=0,x=r;p<x;++p)v=p+s,f[p]={[l]:u||i.parse(d[v],v),[c]:o.parse(a[v],v)};return f}parseArrayData(t,a,s,r){const{xScale:i,yScale:o}=t,l=new Array(r);let c,d,u,f;for(c=0,d=r;c<d;++c)u=c+s,f=a[u],l[c]={x:i.parse(f[0],u),y:o.parse(f[1],u)};return l}parseObjectData(t,a,s,r){const{xScale:i,yScale:o}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=new Array(r);let u,f,p,x;for(u=0,f=r;u<f;++u)p=u+s,x=a[p],d[u]={x:i.parse(Iu(x,l),p),y:o.parse(Iu(x,c),p)};return d}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,a,s){const r=this.chart,i=this._cachedMeta,o=a[t.axis],l={keys:gJ(r,!0),values:a._stacks[t.axis]._visualValues};return P8(l,o,i.index,{mode:s})}updateRangeFromParsed(t,a,s,r){const i=s[a.axis];let o=i===null?NaN:i;const l=r&&s._stacks[a.axis];r&&l&&(r.values=l,o=P8(r,i,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,a){const s=this._cachedMeta,r=s._parsed,i=s._sorted&&t===s.iScale,o=r.length,l=this._getOtherScale(t),c=wBe(a,s,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:f}=xBe(l);let p,x;function v(){x=r[p];const N=x[l.axis];return!hi(x[t.axis])||u>N||f<N}for(p=0;p<o&&!(!v()&&(this.updateRangeFromParsed(d,t,x,c),i));++p);if(i){for(p=o-1;p>=0;--p)if(!v()){this.updateRangeFromParsed(d,t,x,c);break}}return d}getAllParsedValues(t){const a=this._cachedMeta._parsed,s=[];let r,i,o;for(r=0,i=a.length;r<i;++r)o=a[r][t.axis],hi(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const a=this._cachedMeta,s=a.iScale,r=a.vScale,i=this.getParsed(t);return{label:s?""+s.getLabelForValue(i[s.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(t){const a=this._cachedMeta;this.update(t||"default"),a._clip=hBe(an(this.options.clip,fBe(a.xScale,a.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,a=this.chart,s=this._cachedMeta,r=s.data||[],i=a.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||r.length-l,d=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(t,i,l,c),u=l;u<l+c;++u){const f=r[u];f.hidden||(f.active&&d?o.push(f):f.draw(t,i))}for(u=0;u<o.length;++u)o[u].draw(t,i)}getStyle(t,a){const s=a?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,a,s){const r=this.getDataset();let i;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];i=o.$context||(o.$context=vBe(this.getContext(),t,o)),i.parsed=this.getParsed(t),i.raw=r.data[t],i.index=i.dataIndex=t}else i=this.$context||(this.$context=bBe(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!a,i.mode=s,i}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,a){return this._resolveElementOptions(this.dataElementType.id,a,t)}_resolveElementOptions(t,a="default",s){const r=a==="active",i=this._cachedDataOpts,o=t+"-"+a,l=i[o],c=this.enableOptionSharing&&Ip(s);if(l)return M8(l,c);const d=this.chart.config,u=d.datasetElementScopeKeys(this._type,t),f=r?[`${t}Hover`,"hover",t,""]:[t,""],p=d.getOptionScopes(this.getDataset(),u),x=Object.keys(Ca.elements[t]),v=()=>this.getContext(s,r,a),N=d.resolveNamedOptions(p,x,v,f);return N.$shared&&(N.$shared=c,i[o]=Object.freeze(M8(N,c))),N}_resolveAnimations(t,a,s){const r=this.chart,i=this._cachedDataOpts,o=`animation-${a}`,l=i[o];if(l)return l;let c;if(r.options.animation!==!1){const u=this.chart.config,f=u.datasetAnimationScopeKeys(this._type,a),p=u.getOptionScopes(this.getDataset(),f);c=u.createResolver(p,this.getContext(t,s,a))}const d=new hJ(r,c&&c.animations);return c&&c._cacheable&&(i[o]=Object.freeze(d)),d}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,a){return!a||DA(t)||this.chart._animationsDisabled}_getSharedOptions(t,a){const s=this.resolveDataElementOptions(t,a),r=this._sharedOptions,i=this.getSharedOptions(s),o=this.includeOptions(a,i)||i!==r;return this.updateSharedOptions(i,a,s),{sharedOptions:i,includeOptions:o}}updateElement(t,a,s,r){DA(r)?Object.assign(t,s):this._resolveAnimations(a,r).update(t,s)}updateSharedOptions(t,a,s){t&&!DA(a)&&this._resolveAnimations(void 0,a).update(t,s)}_setStyle(t,a,s,r){t.active=r;const i=this.getStyle(a,r);this._resolveAnimations(a,s,r).update(t,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(t,a,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,a,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const a=this._data,s=this._cachedMeta.data;for(const[l,c,d]of this._syncList)this[l](c,d);this._syncList=[];const r=s.length,i=a.length,o=Math.min(i,r);o&&this.parse(0,o),i>r?this._insertElements(r,i-r,t):i<r&&this._removeElements(i,r-i)}_insertElements(t,a,s=!0){const r=this._cachedMeta,i=r.data,o=t+a;let l;const c=d=>{for(d.length+=a,l=d.length-1;l>=o;l--)d[l]=d[l-a]};for(c(i),l=t;l<o;++l)i[l]=new this.dataElementType;this._parsing&&c(r._parsed),this.parse(t,a),s&&this.updateElements(i,t,a,"reset")}updateElements(t,a,s,r){}_removeElements(t,a){const s=this._cachedMeta;if(this._parsing){const r=s._parsed.splice(t,a);s._stacked&&xg(s,r)}s.data.splice(t,a)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[a,s,r]=t;this[a](s,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,a){a&&this._sync(["_removeElements",t,a]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function NBe(e,t){if(!e._cache.$bar){const a=e.getMatchingVisibleMetas(t);let s=[];for(let r=0,i=a.length;r<i;r++)s=s.concat(a[r].controller.getAllParsedValues(e));e._cache.$bar=eJ(s.sort((r,i)=>r-i))}return e._cache.$bar}function jBe(e){const t=e.iScale,a=NBe(t,e.type);let s=t._length,r,i,o,l;const c=()=>{o===32767||o===-32768||(Ip(l)&&(s=Math.min(s,Math.abs(o-l)||s)),l=o)};for(r=0,i=a.length;r<i;++r)o=t.getPixelForValue(a[r]),c();for(l=void 0,r=0,i=t.ticks.length;r<i;++r)o=t.getPixelForTick(r),c();return s}function CBe(e,t,a,s){const r=a.barThickness;let i,o;return _n(r)?(i=t.min*a.categoryPercentage,o=a.barPercentage):(i=r*s,o=1),{chunk:i/s,ratio:o,start:t.pixels[e]-i/2}}function SBe(e,t,a,s){const r=t.pixels,i=r[e];let o=e>0?r[e-1]:null,l=e<r.length-1?r[e+1]:null;const c=a.categoryPercentage;o===null&&(o=i-(l===null?t.end-t.start:l-i)),l===null&&(l=i+i-o);const d=i-(i-Math.min(o,l))/2*c;return{chunk:Math.abs(l-o)/2*c/s,ratio:a.barPercentage,start:d}}function _Be(e,t,a,s){const r=a.parse(e[0],s),i=a.parse(e[1],s),o=Math.min(r,i),l=Math.max(r,i);let c=o,d=l;Math.abs(o)>Math.abs(l)&&(c=l,d=o),t[a.axis]=d,t._custom={barStart:c,barEnd:d,start:r,end:i,min:o,max:l}}function pJ(e,t,a,s){return Qa(e)?_Be(e,t,a,s):t[a.axis]=a.parse(e,s),t}function I8(e,t,a,s){const r=e.iScale,i=e.vScale,o=r.getLabels(),l=r===i,c=[];let d,u,f,p;for(d=a,u=a+s;d<u;++d)p=t[d],f={},f[r.axis]=l||r.parse(o[d],d),c.push(pJ(p,f,i,d));return c}function OA(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function ABe(e,t,a){return e!==0?_o(e):(t.isHorizontal()?1:-1)*(t.min>=a?1:-1)}function TBe(e){let t,a,s,r,i;return e.horizontal?(t=e.base>e.x,a="left",s="right"):(t=e.base<e.y,a="bottom",s="top"),t?(r="end",i="start"):(r="start",i="end"),{start:a,end:s,reverse:t,top:r,bottom:i}}function EBe(e,t,a,s){let r=t.borderSkipped;const i={};if(!r){e.borderSkipped=i;return}if(r===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:l,reverse:c,top:d,bottom:u}=TBe(e);r==="middle"&&a&&(e.enableBorderRadius=!0,(a._top||0)===s?r=d:(a._bottom||0)===s?r=u:(i[$8(u,o,l,c)]=!0,r=d)),i[$8(r,o,l,c)]=!0,e.borderSkipped=i}function $8(e,t,a,s){return s?(e=kBe(e,t,a),e=R8(e,a,t)):e=R8(e,t,a),e}function kBe(e,t,a){return e===t?a:e===a?t:e}function R8(e,t,a){return e==="start"?t:e==="end"?a:e}function LBe(e,{inflateAmount:t},a){e.inflateAmount=t==="auto"?a===1?.33:0:t}class PBe extends Vj{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,a,s,r){return I8(t,a,s,r)}parseArrayData(t,a,s,r){return I8(t,a,s,r)}parseObjectData(t,a,s,r){const{iScale:i,vScale:o}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=i.axis==="x"?l:c,u=o.axis==="x"?l:c,f=[];let p,x,v,N;for(p=s,x=s+r;p<x;++p)N=a[p],v={},v[i.axis]=i.parse(Iu(N,d),p),f.push(pJ(Iu(N,u),v,o,p));return f}updateRangeFromParsed(t,a,s,r){super.updateRangeFromParsed(t,a,s,r);const i=s._custom;i&&a===this._cachedMeta.vScale&&(t.min=Math.min(t.min,i.min),t.max=Math.max(t.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const a=this._cachedMeta,{iScale:s,vScale:r}=a,i=this.getParsed(t),o=i._custom,l=OA(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+s.getLabelForValue(i[s.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const a=this._cachedMeta;this.updateElements(a.data,0,a.data.length,t)}updateElements(t,a,s,r){const i=r==="reset",{index:o,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),d=l.isHorizontal(),u=this._getRuler(),{sharedOptions:f,includeOptions:p}=this._getSharedOptions(a,r);for(let x=a;x<a+s;x++){const v=this.getParsed(x),N=i||_n(v[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(x),b=this._calculateBarIndexPixels(x,u),C=(v._stacks||{})[l.axis],w={horizontal:d,base:N.base,enableBorderRadius:!C||OA(v._custom)||o===C._top||o===C._bottom,x:d?N.head:b.center,y:d?b.center:N.head,height:d?b.size:Math.abs(N.size),width:d?Math.abs(N.size):b.size};p&&(w.options=f||this.resolveDataElementOptions(x,t[x].active?"active":r));const S=w.options||t[x].options;EBe(w,S,C,o),LBe(w,S,u.ratio),this.updateElement(t[x],x,w,r)}}_getStacks(t,a){const{iScale:s}=this._cachedMeta,r=s.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),i=s.options.stacked,o=[],l=this._cachedMeta.controller.getParsed(a),c=l&&l[s.axis],d=u=>{const f=u._parsed.find(x=>x[s.axis]===c),p=f&&f[u.vScale.axis];if(_n(p)||isNaN(p))return!0};for(const u of r)if(!(a!==void 0&&d(u))&&((i===!1||o.indexOf(u.stack)===-1||i===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,a=this.chart.options.indexAxis;return Object.keys(t).filter(s=>t[s].axis===a).shift()}_getAxis(){const t={},a=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)t[an(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,a)]=!0;return Object.keys(t)}_getStackIndex(t,a,s){const r=this._getStacks(t,s),i=a!==void 0?r.indexOf(a):-1;return i===-1?r.length-1:i}_getRuler(){const t=this.options,a=this._cachedMeta,s=a.iScale,r=[];let i,o;for(i=0,o=a.data.length;i<o;++i)r.push(s.getPixelForValue(this.getParsed(i)[s.axis],i));const l=t.barThickness;return{min:l||jBe(a),pixels:r,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:t.grouped,ratio:l?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:a,_stacked:s,index:r},options:{base:i,minBarLength:o}}=this,l=i||0,c=this.getParsed(t),d=c._custom,u=OA(d);let f=c[a.axis],p=0,x=s?this.applyStack(a,c,s):f,v,N;x!==f&&(p=x-f,x=f),u&&(f=d.barStart,x=d.barEnd-d.barStart,f!==0&&_o(f)!==_o(d.barEnd)&&(p=0),p+=f);const b=!_n(i)&&!u?i:p;let C=a.getPixelForValue(b);if(this.chart.getDataVisibility(t)?v=a.getPixelForValue(p+x):v=C,N=v-C,Math.abs(N)<o){N=ABe(N,a,l)*o,f===l&&(C-=N/2);const w=a.getPixelForDecimal(0),S=a.getPixelForDecimal(1),E=Math.min(w,S),k=Math.max(w,S);C=Math.max(Math.min(C,k),E),v=C+N,s&&!u&&(c._stacks[a.axis]._visualValues[r]=a.getValueForPixel(v)-a.getValueForPixel(C))}if(C===a.getPixelForValue(l)){const w=_o(N)*a.getLineWidthForValue(l)/2;C+=w,N-=w}return{size:N,base:C,head:v,center:v+N/2}}_calculateBarIndexPixels(t,a){const s=a.scale,r=this.options,i=r.skipNull,o=an(r.maxBarThickness,1/0);let l,c;const d=this._getAxisCount();if(a.grouped){const u=i?this._getStackCount(t):a.stackCount,f=r.barThickness==="flex"?SBe(t,a,r,u*d):CBe(t,a,r,u*d),p=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,x=this._getAxis().indexOf(an(p,this.getFirstScaleIdForIndexAxis())),v=this._getStackIndex(this.index,this._cachedMeta.stack,i?t:void 0)+x;l=f.start+f.chunk*v+f.chunk/2,c=Math.min(o,f.chunk*f.ratio)}else l=s.getPixelForValue(this.getParsed(t)[s.axis],t),c=Math.min(o,a.min*a.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const t=this._cachedMeta,a=t.vScale,s=t.data,r=s.length;let i=0;for(;i<r;++i)this.getParsed(i)[a.axis]!==null&&!s[i].hidden&&s[i].draw(this._ctx)}}function DBe(e,t,a){let s=1,r=1,i=0,o=0;if(t<ya){const l=e,c=l+t,d=Math.cos(l),u=Math.sin(l),f=Math.cos(c),p=Math.sin(c),x=(S,E,k)=>Rp(S,l,c,!0)?1:Math.max(E,E*a,k,k*a),v=(S,E,k)=>Rp(S,l,c,!0)?-1:Math.min(E,E*a,k,k*a),N=x(0,d,f),b=x(Ka,u,p),C=v(Dn,d,f),w=v(Dn+Ka,u,p);s=(N-C)/2,r=(b-w)/2,i=-(N+C)/2,o=-(b+w)/2}return{ratioX:s,ratioY:r,offsetX:i,offsetY:o}}class OBe extends Vj{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const a=t.data,{labels:{pointStyle:s,textAlign:r,color:i,useBorderRadius:o,borderRadius:l}}=t.legend.options;return a.labels.length&&a.datasets.length?a.labels.map((c,d)=>{const f=t.getDatasetMeta(0).controller.getStyle(d);return{text:c,fillStyle:f.backgroundColor,fontColor:i,hidden:!t.getDataVisibility(d),lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:f.borderWidth,strokeStyle:f.borderColor,textAlign:r,pointStyle:s,borderRadius:o&&(l||f.borderRadius),index:d}}):[]}},onClick(t,a,s){s.chart.toggleDataVisibility(a.index),s.chart.update()}}}};constructor(t,a){super(t,a),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,a){const s=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=s;else{let i=c=>+s[c];if(pn(s[t])){const{key:c="value"}=this._parsing;i=d=>+Iu(s[d],c)}let o,l;for(o=t,l=t+a;o<l;++o)r._parsed[o]=i(o)}}_getRotation(){return vl(this.options.rotation-90)}_getCircumference(){return vl(this.options.circumference)}_getRotationExtents(){let t=ya,a=-ya;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const r=this.chart.getDatasetMeta(s).controller,i=r._getRotation(),o=r._getCircumference();t=Math.min(t,i),a=Math.max(a,i+o)}return{rotation:t,circumference:a-t}}update(t){const a=this.chart,{chartArea:s}=a,r=this._cachedMeta,i=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,l=Math.max((Math.min(s.width,s.height)-o)/2,0),c=Math.min($7e(this.options.cutout,l),1),d=this._getRingWeight(this.index),{circumference:u,rotation:f}=this._getRotationExtents(),{ratioX:p,ratioY:x,offsetX:v,offsetY:N}=DBe(f,u,c),b=(s.width-o)/p,C=(s.height-o)/x,w=Math.max(Math.min(b,C)/2,0),S=QZ(this.options.radius,w),E=Math.max(S*c,0),k=(S-E)/this._getVisibleDatasetWeightTotal();this.offsetX=v*S,this.offsetY=N*S,r.total=this.calculateTotal(),this.outerRadius=S-k*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-k*d,0),this.updateElements(i,0,i.length,t)}_circumference(t,a){const s=this.options,r=this._cachedMeta,i=this._getCircumference();return a&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||r._parsed[t]===null||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*i/ya)}updateElements(t,a,s,r){const i=r==="reset",o=this.chart,l=o.chartArea,d=o.options.animation,u=(l.left+l.right)/2,f=(l.top+l.bottom)/2,p=i&&d.animateScale,x=p?0:this.innerRadius,v=p?0:this.outerRadius,{sharedOptions:N,includeOptions:b}=this._getSharedOptions(a,r);let C=this._getRotation(),w;for(w=0;w<a;++w)C+=this._circumference(w,i);for(w=a;w<a+s;++w){const S=this._circumference(w,i),E=t[w],k={x:u+this.offsetX,y:f+this.offsetY,startAngle:C,endAngle:C+S,circumference:S,outerRadius:v,innerRadius:x};b&&(k.options=N||this.resolveDataElementOptions(w,E.active?"active":r)),C+=S,this.updateElement(E,w,k,r)}}calculateTotal(){const t=this._cachedMeta,a=t.data;let s=0,r;for(r=0;r<a.length;r++){const i=t._parsed[r];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(r)&&!a[r].hidden&&(s+=Math.abs(i))}return s}calculateCircumference(t){const a=this._cachedMeta.total;return a>0&&!isNaN(t)?ya*(Math.abs(t)/a):0}getLabelAndValue(t){const a=this._cachedMeta,s=this.chart,r=s.data.labels||[],i=AD(a._parsed[t],s.options.locale);return{label:r[t]||"",value:i}}getMaxBorderWidth(t){let a=0;const s=this.chart;let r,i,o,l,c;if(!t){for(r=0,i=s.data.datasets.length;r<i;++r)if(s.isDatasetVisible(r)){o=s.getDatasetMeta(r),t=o.data,l=o.controller;break}}if(!t)return 0;for(r=0,i=t.length;r<i;++r)c=l.resolveDataElementOptions(r),c.borderAlign!=="inner"&&(a=Math.max(a,c.borderWidth||0,c.hoverBorderWidth||0));return a}getMaxOffset(t){let a=0;for(let s=0,r=t.length;s<r;++s){const i=this.resolveDataElementOptions(s);a=Math.max(a,i.offset||0,i.hoverOffset||0)}return a}_getRingWeightOffset(t){let a=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(a+=this._getRingWeight(s));return a}_getRingWeight(t){return Math.max(an(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class MBe extends Vj{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const a=this._cachedMeta,{dataset:s,data:r=[],_dataset:i}=a,o=this.chart._animationsDisabled;let{start:l,count:c}=a8e(a,r,o);this._drawStart=l,this._drawCount=c,s8e(a)&&(l=0,c=r.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!i._decimated,s.points=r;const d=this.resolveDatasetElementOptions(t);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(s,void 0,{animated:!o,options:d},t),this.updateElements(r,l,c,t)}updateElements(t,a,s,r){const i=r==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:d}=this._cachedMeta,{sharedOptions:u,includeOptions:f}=this._getSharedOptions(a,r),p=o.axis,x=l.axis,{spanGaps:v,segment:N}=this.options,b=$p(v)?v:Number.POSITIVE_INFINITY,C=this.chart._animationsDisabled||i||r==="none",w=a+s,S=t.length;let E=a>0&&this.getParsed(a-1);for(let k=0;k<S;++k){const A=t[k],T=C?A:{};if(k<a||k>=w){T.skip=!0;continue}const _=this.getParsed(k),I=_n(_[x]),R=T[p]=o.getPixelForValue(_[p],k),U=T[x]=i||I?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,_,c):_[x],k);T.skip=isNaN(R)||isNaN(U)||I,T.stop=k>0&&Math.abs(_[p]-E[p])>b,N&&(T.parsed=_,T.raw=d.data[k]),f&&(T.options=u||this.resolveDataElementOptions(k,A.active?"active":r)),C||this.updateElement(A,k,T,r),E=_}}getMaxOverflow(){const t=this._cachedMeta,a=t.dataset,s=a.options&&a.options.borderWidth||0,r=t.data||[];if(!r.length)return s;const i=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,i,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}class IBe extends OBe{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}function Ud(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class ID{static override(t){Object.assign(ID.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return Ud()}parse(){return Ud()}format(){return Ud()}add(){return Ud()}diff(){return Ud()}startOf(){return Ud()}endOf(){return Ud()}}var $Be={_date:ID};function RBe(e,t,a,s){const{controller:r,data:i,_sorted:o}=e,l=r._cachedMeta.iScale,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(l&&t===l.axis&&t!=="r"&&o&&i.length){const d=l._reversePixels?Z7e:iu;if(s){if(r._sharedOptions){const u=i[0],f=typeof u.getRange=="function"&&u.getRange(t);if(f){const p=d(i,t,a-f),x=d(i,t,a+f);return{lo:p.lo,hi:x.hi}}}}else{const u=d(i,t,a);if(c){const{vScale:f}=r._cachedMeta,{_parsed:p}=e,x=p.slice(0,u.lo+1).reverse().findIndex(N=>!_n(N[f.axis]));u.lo-=Math.max(0,x);const v=p.slice(u.hi).findIndex(N=>!_n(N[f.axis]));u.hi+=Math.max(0,v)}return u}}return{lo:0,hi:i.length-1}}function Yj(e,t,a,s,r){const i=e.getSortedVisibleDatasetMetas(),o=a[t];for(let l=0,c=i.length;l<c;++l){const{index:d,data:u}=i[l],{lo:f,hi:p}=RBe(i[l],t,o,r);for(let x=f;x<=p;++x){const v=u[x];v.skip||s(v,d,x)}}}function zBe(e){const t=e.indexOf("x")!==-1,a=e.indexOf("y")!==-1;return function(s,r){const i=t?Math.abs(s.x-r.x):0,o=a?Math.abs(s.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function MA(e,t,a,s,r){const i=[];return!r&&!e.isPointInArea(t)||Yj(e,a,t,function(l,c,d){!r&&!zp(l,e.chartArea,0)||l.inRange(t.x,t.y,s)&&i.push({element:l,datasetIndex:c,index:d})},!0),i}function UBe(e,t,a,s){let r=[];function i(o,l,c){const{startAngle:d,endAngle:u}=o.getProps(["startAngle","endAngle"],s),{angle:f}=ZZ(o,{x:t.x,y:t.y});Rp(f,d,u)&&r.push({element:o,datasetIndex:l,index:c})}return Yj(e,a,t,i),r}function FBe(e,t,a,s,r,i){let o=[];const l=zBe(a);let c=Number.POSITIVE_INFINITY;function d(u,f,p){const x=u.inRange(t.x,t.y,r);if(s&&!x)return;const v=u.getCenterPoint(r);if(!(!!i||e.isPointInArea(v))&&!x)return;const b=l(t,v);b<c?(o=[{element:u,datasetIndex:f,index:p}],c=b):b===c&&o.push({element:u,datasetIndex:f,index:p})}return Yj(e,a,t,d),o}function IA(e,t,a,s,r,i){return!i&&!e.isPointInArea(t)?[]:a==="r"&&!s?UBe(e,t,a,r):FBe(e,t,a,s,r,i)}function z8(e,t,a,s,r){const i=[],o=a==="x"?"inXRange":"inYRange";let l=!1;return Yj(e,a,t,(c,d,u)=>{c[o]&&c[o](t[a],r)&&(i.push({element:c,datasetIndex:d,index:u}),l=l||c.inRange(t.x,t.y,r))}),s&&!l?[]:i}var BBe={modes:{index(e,t,a,s){const r=Vd(t,e),i=a.axis||"x",o=a.includeInvisible||!1,l=a.intersect?MA(e,r,i,s,o):IA(e,r,i,!1,s,o),c=[];return l.length?(e.getSortedVisibleDatasetMetas().forEach(d=>{const u=l[0].index,f=d.data[u];f&&!f.skip&&c.push({element:f,datasetIndex:d.index,index:u})}),c):[]},dataset(e,t,a,s){const r=Vd(t,e),i=a.axis||"xy",o=a.includeInvisible||!1;let l=a.intersect?MA(e,r,i,s,o):IA(e,r,i,!1,s,o);if(l.length>0){const c=l[0].datasetIndex,d=e.getDatasetMeta(c).data;l=[];for(let u=0;u<d.length;++u)l.push({element:d[u],datasetIndex:c,index:u})}return l},point(e,t,a,s){const r=Vd(t,e),i=a.axis||"xy",o=a.includeInvisible||!1;return MA(e,r,i,s,o)},nearest(e,t,a,s){const r=Vd(t,e),i=a.axis||"xy",o=a.includeInvisible||!1;return IA(e,r,i,a.intersect,s,o)},x(e,t,a,s){const r=Vd(t,e);return z8(e,r,"x",a.intersect,s)},y(e,t,a,s){const r=Vd(t,e);return z8(e,r,"y",a.intersect,s)}}};const xJ=["left","top","right","bottom"];function yg(e,t){return e.filter(a=>a.pos===t)}function U8(e,t){return e.filter(a=>xJ.indexOf(a.pos)===-1&&a.box.axis===t)}function bg(e,t){return e.sort((a,s)=>{const r=t?s:a,i=t?a:s;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function HBe(e){const t=[];let a,s,r,i,o,l;for(a=0,s=(e||[]).length;a<s;++a)r=e[a],{position:i,options:{stack:o,stackWeight:l=1}}=r,t.push({index:a,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&i+o,stackWeight:l});return t}function GBe(e){const t={};for(const a of e){const{stack:s,pos:r,stackWeight:i}=a;if(!s||!xJ.includes(r))continue;const o=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return t}function WBe(e,t){const a=GBe(e),{vBoxMaxWidth:s,hBoxMaxHeight:r}=t;let i,o,l;for(i=0,o=e.length;i<o;++i){l=e[i];const{fullSize:c}=l.box,d=a[l.stack],u=d&&l.stackWeight/d.weight;l.horizontal?(l.width=u?u*s:c&&t.availableWidth,l.height=r):(l.width=s,l.height=u?u*r:c&&t.availableHeight)}return a}function qBe(e){const t=HBe(e),a=bg(t.filter(d=>d.box.fullSize),!0),s=bg(yg(t,"left"),!0),r=bg(yg(t,"right")),i=bg(yg(t,"top"),!0),o=bg(yg(t,"bottom")),l=U8(t,"x"),c=U8(t,"y");return{fullSize:a,leftAndTop:s.concat(i),rightAndBottom:r.concat(c).concat(o).concat(l),chartArea:yg(t,"chartArea"),vertical:s.concat(r).concat(c),horizontal:i.concat(o).concat(l)}}function F8(e,t,a,s){return Math.max(e[a],t[a])+Math.max(e[s],t[s])}function yJ(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function VBe(e,t,a,s){const{pos:r,box:i}=a,o=e.maxPadding;if(!pn(r)){a.size&&(e[r]-=a.size);const f=s[a.stack]||{size:0,count:1};f.size=Math.max(f.size,a.horizontal?i.height:i.width),a.size=f.size/f.count,e[r]+=a.size}i.getPadding&&yJ(o,i.getPadding());const l=Math.max(0,t.outerWidth-F8(o,e,"left","right")),c=Math.max(0,t.outerHeight-F8(o,e,"top","bottom")),d=l!==e.w,u=c!==e.h;return e.w=l,e.h=c,a.horizontal?{same:d,other:u}:{same:u,other:d}}function YBe(e){const t=e.maxPadding;function a(s){const r=Math.max(t[s]-e[s],0);return e[s]+=r,r}e.y+=a("top"),e.x+=a("left"),a("right"),a("bottom")}function QBe(e,t){const a=t.maxPadding;function s(r){const i={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{i[o]=Math.max(t[o],a[o])}),i}return s(e?["left","right"]:["top","bottom"])}function Rg(e,t,a,s){const r=[];let i,o,l,c,d,u;for(i=0,o=e.length,d=0;i<o;++i){l=e[i],c=l.box,c.update(l.width||t.w,l.height||t.h,QBe(l.horizontal,t));const{same:f,other:p}=VBe(t,a,l,s);d|=f&&r.length,u=u||p,c.fullSize||r.push(l)}return d&&Rg(r,t,a,s)||u}function pb(e,t,a,s,r){e.top=a,e.left=t,e.right=t+s,e.bottom=a+r,e.width=s,e.height=r}function B8(e,t,a,s){const r=a.padding;let{x:i,y:o}=t;for(const l of e){const c=l.box,d=s[l.stack]||{placed:0,weight:1},u=l.stackWeight/d.weight||1;if(l.horizontal){const f=t.w*u,p=d.size||c.height;Ip(d.start)&&(o=d.start),c.fullSize?pb(c,r.left,o,a.outerWidth-r.right-r.left,p):pb(c,t.left+d.placed,o,f,p),d.start=o,d.placed+=f,o=c.bottom}else{const f=t.h*u,p=d.size||c.width;Ip(d.start)&&(i=d.start),c.fullSize?pb(c,i,r.top,p,a.outerHeight-r.bottom-r.top):pb(c,i,t.top+d.placed,p,f),d.start=i,d.placed+=f,i=c.right}}t.x=i,t.y=o}var ii={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(a){t.draw(a)}}]},e.boxes.push(t)},removeBox(e,t){const a=e.boxes?e.boxes.indexOf(t):-1;a!==-1&&e.boxes.splice(a,1)},configure(e,t,a){t.fullSize=a.fullSize,t.position=a.position,t.weight=a.weight},update(e,t,a,s){if(!e)return;const r=gi(e.options.layout.padding),i=Math.max(t-r.width,0),o=Math.max(a-r.height,0),l=qBe(e.boxes),c=l.vertical,d=l.horizontal;Ln(e.boxes,N=>{typeof N.beforeLayout=="function"&&N.beforeLayout()});const u=c.reduce((N,b)=>b.box.options&&b.box.options.display===!1?N:N+1,0)||1,f=Object.freeze({outerWidth:t,outerHeight:a,padding:r,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/u,hBoxMaxHeight:o/2}),p=Object.assign({},r);yJ(p,gi(s));const x=Object.assign({maxPadding:p,w:i,h:o,x:r.left,y:r.top},r),v=WBe(c.concat(d),f);Rg(l.fullSize,x,f,v),Rg(c,x,f,v),Rg(d,x,f,v)&&Rg(c,x,f,v),YBe(x),B8(l.leftAndTop,x,f,v),x.x+=x.w,x.y+=x.h,B8(l.rightAndBottom,x,f,v),e.chartArea={left:x.left,top:x.top,right:x.left+x.w,bottom:x.top+x.h,height:x.h,width:x.w},Ln(l.chartArea,N=>{const b=N.box;Object.assign(b,e.chartArea),b.update(x.w,x.h,{left:0,top:0,right:0,bottom:0})})}};class bJ{acquireContext(t,a){}releaseContext(t){return!1}addEventListener(t,a,s){}removeEventListener(t,a,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,a,s,r){return a=Math.max(0,a||t.width),s=s||t.height,{width:a,height:Math.max(0,r?Math.floor(a/r):s)}}isAttached(t){return!0}updateConfig(t){}}class KBe extends bJ{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const qb="$chartjs",XBe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},H8=e=>e===null||e==="";function ZBe(e,t){const a=e.style,s=e.getAttribute("height"),r=e.getAttribute("width");if(e[qb]={initial:{height:s,width:r,style:{display:a.display,height:a.height,width:a.width}}},a.display=a.display||"block",a.boxSizing=a.boxSizing||"border-box",H8(r)){const i=_8(e,"width");i!==void 0&&(e.width=i)}if(H8(s))if(e.style.height==="")e.height=e.width/(t||2);else{const i=_8(e,"height");i!==void 0&&(e.height=i)}return e}const vJ=V8e?{passive:!0}:!1;function JBe(e,t,a){e&&e.addEventListener(t,a,vJ)}function eHe(e,t,a){e&&e.canvas&&e.canvas.removeEventListener(t,a,vJ)}function tHe(e,t){const a=XBe[e.type]||e.type,{x:s,y:r}=Vd(e,t);return{type:a,chart:t,native:e,x:s!==void 0?s:null,y:r!==void 0?r:null}}function bw(e,t){for(const a of e)if(a===t||a.contains(t))return!0}function nHe(e,t,a){const s=e.canvas,r=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||bw(l.addedNodes,s),o=o&&!bw(l.removedNodes,s);o&&a()});return r.observe(document,{childList:!0,subtree:!0}),r}function aHe(e,t,a){const s=e.canvas,r=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||bw(l.removedNodes,s),o=o&&!bw(l.addedNodes,s);o&&a()});return r.observe(document,{childList:!0,subtree:!0}),r}const Fp=new Map;let G8=0;function wJ(){const e=window.devicePixelRatio;e!==G8&&(G8=e,Fp.forEach((t,a)=>{a.currentDevicePixelRatio!==e&&t()}))}function sHe(e,t){Fp.size||window.addEventListener("resize",wJ),Fp.set(e,t)}function rHe(e){Fp.delete(e),Fp.size||window.removeEventListener("resize",wJ)}function iHe(e,t,a){const s=e.canvas,r=s&&MD(s);if(!r)return;const i=nJ((l,c)=>{const d=r.clientWidth;a(l,c),d<r.clientWidth&&a()},window),o=new ResizeObserver(l=>{const c=l[0],d=c.contentRect.width,u=c.contentRect.height;d===0&&u===0||i(d,u)});return o.observe(r),sHe(e,i),o}function $A(e,t,a){a&&a.disconnect(),t==="resize"&&rHe(e)}function oHe(e,t,a){const s=e.canvas,r=nJ(i=>{e.ctx!==null&&a(tHe(i,e))},e);return JBe(s,t,r),r}class lHe extends bJ{acquireContext(t,a){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(ZBe(t,a),s):null}releaseContext(t){const a=t.canvas;if(!a[qb])return!1;const s=a[qb].initial;["height","width"].forEach(i=>{const o=s[i];_n(o)?a.removeAttribute(i):a.setAttribute(i,o)});const r=s.style||{};return Object.keys(r).forEach(i=>{a.style[i]=r[i]}),a.width=a.width,delete a[qb],!0}addEventListener(t,a,s){this.removeEventListener(t,a);const r=t.$proxies||(t.$proxies={}),o={attach:nHe,detach:aHe,resize:iHe}[a]||oHe;r[a]=o(t,a,s)}removeEventListener(t,a){const s=t.$proxies||(t.$proxies={}),r=s[a];if(!r)return;({attach:$A,detach:$A,resize:$A}[a]||eHe)(t,a,r),s[a]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,a,s,r){return q8e(t,a,s,r)}isAttached(t){const a=t&&MD(t);return!!(a&&a.isConnected)}}function cHe(e){return!OD()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?KBe:lHe}let tc=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:a,y:s}=this.getProps(["x","y"],t);return{x:a,y:s}}hasValue(){return $p(this.x)&&$p(this.y)}getProps(t,a){const s=this.$animations;if(!a||!s)return this;const r={};return t.forEach(i=>{r[i]=s[i]&&s[i].active()?s[i]._to:this[i]}),r}};function dHe(e,t){const a=e.options.ticks,s=uHe(e),r=Math.min(a.maxTicksLimit||s,s),i=a.major.enabled?fHe(t):[],o=i.length,l=i[0],c=i[o-1],d=[];if(o>r)return hHe(t,d,i,o/r),d;const u=mHe(i,t,r);if(o>0){let f,p;const x=o>1?Math.round((c-l)/(o-1)):null;for(xb(t,d,u,_n(x)?0:l-x,l),f=0,p=o-1;f<p;f++)xb(t,d,u,i[f],i[f+1]);return xb(t,d,u,c,_n(x)?t.length:c+x),d}return xb(t,d,u),d}function uHe(e){const t=e.options.offset,a=e._tickSize(),s=e._length/a+(t?0:1),r=e._maxLength/a;return Math.floor(Math.min(s,r))}function mHe(e,t,a){const s=gHe(e),r=t.length/a;if(!s)return Math.max(r,1);const i=W7e(s);for(let o=0,l=i.length-1;o<l;o++){const c=i[o];if(c>r)return c}return Math.max(r,1)}function fHe(e){const t=[];let a,s;for(a=0,s=e.length;a<s;a++)e[a].major&&t.push(a);return t}function hHe(e,t,a,s){let r=0,i=a[0],o;for(s=Math.ceil(s),o=0;o<e.length;o++)o===i&&(t.push(e[o]),r++,i=a[r*s])}function xb(e,t,a,s,r){const i=an(s,0),o=Math.min(an(r,e.length),e.length);let l=0,c,d,u;for(a=Math.ceil(a),r&&(c=r-s,a=c/Math.floor(c/a)),u=i;u<0;)l++,u=Math.round(i+l*a);for(d=Math.max(i,0);d<o;d++)d===u&&(t.push(e[d]),l++,u=Math.round(i+l*a))}function gHe(e){const t=e.length;let a,s;if(t<2)return!1;for(s=e[0],a=1;a<t;++a)if(e[a]-e[a-1]!==s)return!1;return s}const pHe=e=>e==="left"?"right":e==="right"?"left":e,W8=(e,t,a)=>t==="top"||t==="left"?e[t]+a:e[t]-a,q8=(e,t)=>Math.min(t||e,e);function V8(e,t){const a=[],s=e.length/t,r=e.length;let i=0;for(;i<r;i+=s)a.push(e[Math.floor(i)]);return a}function xHe(e,t,a){const s=e.ticks.length,r=Math.min(t,s-1),i=e._startPixel,o=e._endPixel,l=1e-6;let c=e.getPixelForTick(r),d;if(!(a&&(s===1?d=Math.max(c-i,o-c):t===0?d=(e.getPixelForTick(1)-c)/2:d=(c-e.getPixelForTick(r-1))/2,c+=r<t?d:-d,c<i-l||c>o+l)))return c}function yHe(e,t){Ln(e,a=>{const s=a.gc,r=s.length/2;let i;if(r>t){for(i=0;i<r;++i)delete a.data[s[i]];s.splice(0,r)}})}function vg(e){return e.drawTicks?e.tickLength:0}function Y8(e,t){if(!e.display)return 0;const a=Es(e.font,t),s=gi(e.padding);return(Qa(e.text)?e.text.length:1)*a.lineHeight+s.height}function bHe(e,t){return Qu(e,{scale:t,type:"scale"})}function vHe(e,t,a){return Qu(e,{tick:a,index:t,type:"tick"})}function wHe(e,t,a){let s=SD(e);return(a&&t!=="right"||!a&&t==="right")&&(s=pHe(s)),s}function NHe(e,t,a,s){const{top:r,left:i,bottom:o,right:l,chart:c}=e,{chartArea:d,scales:u}=c;let f=0,p,x,v;const N=o-r,b=l-i;if(e.isHorizontal()){if(x=Cs(s,i,l),pn(a)){const C=Object.keys(a)[0],w=a[C];v=u[C].getPixelForValue(w)+N-t}else a==="center"?v=(d.bottom+d.top)/2+N-t:v=W8(e,a,t);p=l-i}else{if(pn(a)){const C=Object.keys(a)[0],w=a[C];x=u[C].getPixelForValue(w)-b+t}else a==="center"?x=(d.left+d.right)/2-b+t:x=W8(e,a,t);v=Cs(s,o,r),f=a==="left"?-Ka:Ka}return{titleX:x,titleY:v,maxWidth:p,rotation:f}}class ih extends tc{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,a){return t}getUserBounds(){let{_userMin:t,_userMax:a,_suggestedMin:s,_suggestedMax:r}=this;return t=so(t,Number.POSITIVE_INFINITY),a=so(a,Number.NEGATIVE_INFINITY),s=so(s,Number.POSITIVE_INFINITY),r=so(r,Number.NEGATIVE_INFINITY),{min:so(t,s),max:so(a,r),minDefined:hi(t),maxDefined:hi(a)}}getMinMax(t){let{min:a,max:s,minDefined:r,maxDefined:i}=this.getUserBounds(),o;if(r&&i)return{min:a,max:s};const l=this.getMatchingVisibleMetas();for(let c=0,d=l.length;c<d;++c)o=l[c].controller.getMinMax(this,t),r||(a=Math.min(a,o.min)),i||(s=Math.max(s,o.max));return a=i&&a>s?s:a,s=r&&a>s?a:s,{min:so(a,so(s,a)),max:so(s,so(a,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Qn(this.options.beforeUpdate,[this])}update(t,a,s){const{beginAtZero:r,grace:i,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=a,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=C8e(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?V8(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=dHe(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,a,s;this.isHorizontal()?(a=this.left,s=this.right):(a=this.top,s=this.bottom,t=!t),this._startPixel=a,this._endPixel=s,this._reversePixels=t,this._length=s-a,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Qn(this.options.afterUpdate,[this])}beforeSetDimensions(){Qn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Qn(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Qn(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Qn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const a=this.options.ticks;let s,r,i;for(s=0,r=t.length;s<r;s++)i=t[s],i.label=Qn(a.callback,[i.value,s,t],this)}afterTickToLabelConversion(){Qn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Qn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,a=t.ticks,s=q8(this.ticks.length,t.ticks.maxTicksLimit),r=a.minRotation||0,i=a.maxRotation;let o=r,l,c,d;if(!this._isVisible()||!a.display||r>=i||s<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),f=u.widest.width,p=u.highest.height,x=Ts(this.chart.width-f,0,this.maxWidth);l=t.offset?this.maxWidth/s:x/(s-1),f+6>l&&(l=x/(s-(t.offset?.5:1)),c=this.maxHeight-vg(t.grid)-a.padding-Y8(t.title,this.chart.options.font),d=Math.sqrt(f*f+p*p),o=Q7e(Math.min(Math.asin(Ts((u.highest.height+6)/l,-1,1)),Math.asin(Ts(c/d,-1,1))-Math.asin(Ts(p/d,-1,1)))),o=Math.max(r,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){Qn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Qn(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:a,options:{ticks:s,title:r,grid:i}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=Y8(r,a.options.font);if(l?(t.width=this.maxWidth,t.height=vg(i)+c):(t.height=this.maxHeight,t.width=vg(i)+c),s.display&&this.ticks.length){const{first:d,last:u,widest:f,highest:p}=this._getLabelSizes(),x=s.padding*2,v=vl(this.labelRotation),N=Math.cos(v),b=Math.sin(v);if(l){const C=s.mirror?0:b*f.width+N*p.height;t.height=Math.min(this.maxHeight,t.height+C+x)}else{const C=s.mirror?0:N*f.width+b*p.height;t.width=Math.min(this.maxWidth,t.width+C+x)}this._calculatePadding(d,u,b,N)}}this._handleMargins(),l?(this.width=this._length=a.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=a.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,a,s,r){const{ticks:{align:i,padding:o},position:l}=this.options,c=this.labelRotation!==0,d=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,x=0;c?d?(p=r*t.width,x=s*a.height):(p=s*t.height,x=r*a.width):i==="start"?x=a.width:i==="end"?p=t.width:i!=="inner"&&(p=t.width/2,x=a.width/2),this.paddingLeft=Math.max((p-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((x-f+o)*this.width/(this.width-f),0)}else{let u=a.height/2,f=t.height/2;i==="start"?(u=0,f=t.height):i==="end"&&(u=a.height,f=0),this.paddingTop=u+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Qn(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:a}=this.options;return a==="top"||a==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let a,s;for(a=0,s=t.length;a<s;a++)_n(t[a].label)&&(t.splice(a,1),s--,a--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const a=this.options.ticks.sampleSize;let s=this.ticks;a<s.length&&(s=V8(s,a)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,a,s){const{ctx:r,_longestTextCache:i}=this,o=[],l=[],c=Math.floor(a/q8(a,s));let d=0,u=0,f,p,x,v,N,b,C,w,S,E,k;for(f=0;f<a;f+=c){if(v=t[f].label,N=this._resolveTickFontOptions(f),r.font=b=N.string,C=i[b]=i[b]||{data:{},gc:[]},w=N.lineHeight,S=E=0,!_n(v)&&!Qa(v))S=w8(r,C.data,C.gc,S,v),E=w;else if(Qa(v))for(p=0,x=v.length;p<x;++p)k=v[p],!_n(k)&&!Qa(k)&&(S=w8(r,C.data,C.gc,S,k),E+=w);o.push(S),l.push(E),d=Math.max(S,d),u=Math.max(E,u)}yHe(i,a);const A=o.indexOf(d),T=l.indexOf(u),_=I=>({width:o[I]||0,height:l[I]||0});return{first:_(0),last:_(a-1),widest:_(A),highest:_(T),widths:o,heights:l}}getLabelForValue(t){return t}getPixelForValue(t,a){return NaN}getValueForPixel(t){}getPixelForTick(t){const a=this.ticks;return t<0||t>a.length-1?null:this.getPixelForValue(a[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const a=this._startPixel+t*this._length;return X7e(this._alignToPixels?zd(this.chart,a,0):a)}getDecimalForPixel(t){const a=(t-this._startPixel)/this._length;return this._reversePixels?1-a:a}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:a}=this;return t<0&&a<0?a:t>0&&a>0?t:0}getContext(t){const a=this.ticks||[];if(t>=0&&t<a.length){const s=a[t];return s.$context||(s.$context=vHe(this.getContext(),t,s))}return this.$context||(this.$context=bHe(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,a=vl(this.labelRotation),s=Math.abs(Math.cos(a)),r=Math.abs(Math.sin(a)),i=this._getLabelSizes(),o=t.autoSkipPadding||0,l=i?i.widest.width+o:0,c=i?i.highest.height+o:0;return this.isHorizontal()?c*s>l*r?l/s:c/r:c*r<l*s?c/s:l/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const a=this.axis,s=this.chart,r=this.options,{grid:i,position:o,border:l}=r,c=i.offset,d=this.isHorizontal(),f=this.ticks.length+(c?1:0),p=vg(i),x=[],v=l.setContext(this.getContext()),N=v.display?v.width:0,b=N/2,C=function(z){return zd(s,z,N)};let w,S,E,k,A,T,_,I,R,U,D,M;if(o==="top")w=C(this.bottom),T=this.bottom-p,I=w-b,U=C(t.top)+b,M=t.bottom;else if(o==="bottom")w=C(this.top),U=t.top,M=C(t.bottom)-b,T=w+b,I=this.top+p;else if(o==="left")w=C(this.right),A=this.right-p,_=w-b,R=C(t.left)+b,D=t.right;else if(o==="right")w=C(this.left),R=t.left,D=C(t.right)-b,A=w+b,_=this.left+p;else if(a==="x"){if(o==="center")w=C((t.top+t.bottom)/2+.5);else if(pn(o)){const z=Object.keys(o)[0],Q=o[z];w=C(this.chart.scales[z].getPixelForValue(Q))}U=t.top,M=t.bottom,T=w+b,I=T+p}else if(a==="y"){if(o==="center")w=C((t.left+t.right)/2);else if(pn(o)){const z=Object.keys(o)[0],Q=o[z];w=C(this.chart.scales[z].getPixelForValue(Q))}A=w-b,_=A-p,R=t.left,D=t.right}const W=an(r.ticks.maxTicksLimit,f),X=Math.max(1,Math.ceil(f/W));for(S=0;S<f;S+=X){const z=this.getContext(S),Q=i.setContext(z),de=l.setContext(z),Y=Q.lineWidth,se=Q.color,J=de.dash||[],F=de.dashOffset,Ne=Q.tickWidth,re=Q.tickColor,he=Q.tickBorderDash||[],je=Q.tickBorderDashOffset;E=xHe(this,S,c),E!==void 0&&(k=zd(s,E,Y),d?A=_=R=D=k:T=I=U=M=k,x.push({tx1:A,ty1:T,tx2:_,ty2:I,x1:R,y1:U,x2:D,y2:M,width:Y,color:se,borderDash:J,borderDashOffset:F,tickWidth:Ne,tickColor:re,tickBorderDash:he,tickBorderDashOffset:je}))}return this._ticksLength=f,this._borderValue=w,x}_computeLabelItems(t){const a=this.axis,s=this.options,{position:r,ticks:i}=s,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:d,padding:u,mirror:f}=i,p=vg(s.grid),x=p+u,v=f?-u:x,N=-vl(this.labelRotation),b=[];let C,w,S,E,k,A,T,_,I,R,U,D,M="middle";if(r==="top")A=this.bottom-v,T=this._getXAxisLabelAlignment();else if(r==="bottom")A=this.top+v,T=this._getXAxisLabelAlignment();else if(r==="left"){const X=this._getYAxisLabelAlignment(p);T=X.textAlign,k=X.x}else if(r==="right"){const X=this._getYAxisLabelAlignment(p);T=X.textAlign,k=X.x}else if(a==="x"){if(r==="center")A=(t.top+t.bottom)/2+x;else if(pn(r)){const X=Object.keys(r)[0],z=r[X];A=this.chart.scales[X].getPixelForValue(z)+x}T=this._getXAxisLabelAlignment()}else if(a==="y"){if(r==="center")k=(t.left+t.right)/2-x;else if(pn(r)){const X=Object.keys(r)[0],z=r[X];k=this.chart.scales[X].getPixelForValue(z)}T=this._getYAxisLabelAlignment(p).textAlign}a==="y"&&(c==="start"?M="top":c==="end"&&(M="bottom"));const W=this._getLabelSizes();for(C=0,w=l.length;C<w;++C){S=l[C],E=S.label;const X=i.setContext(this.getContext(C));_=this.getPixelForTick(C)+i.labelOffset,I=this._resolveTickFontOptions(C),R=I.lineHeight,U=Qa(E)?E.length:1;const z=U/2,Q=X.color,de=X.textStrokeColor,Y=X.textStrokeWidth;let se=T;o?(k=_,T==="inner"&&(C===w-1?se=this.options.reverse?"left":"right":C===0?se=this.options.reverse?"right":"left":se="center"),r==="top"?d==="near"||N!==0?D=-U*R+R/2:d==="center"?D=-W.highest.height/2-z*R+R:D=-W.highest.height+R/2:d==="near"||N!==0?D=R/2:d==="center"?D=W.highest.height/2-z*R:D=W.highest.height-U*R,f&&(D*=-1),N!==0&&!X.showLabelBackdrop&&(k+=R/2*Math.sin(N))):(A=_,D=(1-U)*R/2);let J;if(X.showLabelBackdrop){const F=gi(X.backdropPadding),Ne=W.heights[C],re=W.widths[C];let he=D-F.top,je=0-F.left;switch(M){case"middle":he-=Ne/2;break;case"bottom":he-=Ne;break}switch(T){case"center":je-=re/2;break;case"right":je-=re;break;case"inner":C===w-1?je-=re:C>0&&(je-=re/2);break}J={left:je,top:he,width:re+F.width,height:Ne+F.height,color:X.backdropColor}}b.push({label:E,font:I,textOffset:D,options:{rotation:N,color:Q,strokeColor:de,strokeWidth:Y,textAlign:se,textBaseline:M,translation:[k,A],backdrop:J}})}return b}_getXAxisLabelAlignment(){const{position:t,ticks:a}=this.options;if(-vl(this.labelRotation))return t==="top"?"left":"right";let r="center";return a.align==="start"?r="left":a.align==="end"?r="right":a.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:a,ticks:{crossAlign:s,mirror:r,padding:i}}=this.options,o=this._getLabelSizes(),l=t+i,c=o.widest.width;let d,u;return a==="left"?r?(u=this.right+i,s==="near"?d="left":s==="center"?(d="center",u+=c/2):(d="right",u+=c)):(u=this.right-l,s==="near"?d="right":s==="center"?(d="center",u-=c/2):(d="left",u=this.left)):a==="right"?r?(u=this.left+i,s==="near"?d="right":s==="center"?(d="center",u-=c/2):(d="left",u-=c)):(u=this.left+l,s==="near"?d="left":s==="center"?(d="center",u+=c/2):(d="right",u=this.right)):d="right",{textAlign:d,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,a=this.options.position;if(a==="left"||a==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(a==="top"||a==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:a},left:s,top:r,width:i,height:o}=this;a&&(t.save(),t.fillStyle=a,t.fillRect(s,r,i,o),t.restore())}getLineWidthForValue(t){const a=this.options.grid;if(!this._isVisible()||!a.display)return 0;const r=this.ticks.findIndex(i=>i.value===t);return r>=0?a.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const a=this.options.grid,s=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let i,o;const l=(c,d,u)=>{!u.width||!u.color||(s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset,s.beginPath(),s.moveTo(c.x,c.y),s.lineTo(d.x,d.y),s.stroke(),s.restore())};if(a.display)for(i=0,o=r.length;i<o;++i){const c=r[i];a.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),a.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:a,options:{border:s,grid:r}}=this,i=s.setContext(this.getContext()),o=s.display?i.width:0;if(!o)return;const l=r.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let d,u,f,p;this.isHorizontal()?(d=zd(t,this.left,o)-o/2,u=zd(t,this.right,l)+l/2,f=p=c):(f=zd(t,this.top,o)-o/2,p=zd(t,this.bottom,l)+l/2,d=u=c),a.save(),a.lineWidth=i.width,a.strokeStyle=i.color,a.beginPath(),a.moveTo(d,f),a.lineTo(u,p),a.stroke(),a.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,r=this._computeLabelArea();r&&TD(s,r);const i=this.getLabelItems(t);for(const o of i){const l=o.options,c=o.font,d=o.label,u=o.textOffset;Up(s,d,0,u,c,l)}r&&ED(s)}drawTitle(){const{ctx:t,options:{position:a,title:s,reverse:r}}=this;if(!s.display)return;const i=Es(s.font),o=gi(s.padding),l=s.align;let c=i.lineHeight/2;a==="bottom"||a==="center"||pn(a)?(c+=o.bottom,Qa(s.text)&&(c+=i.lineHeight*(s.text.length-1))):c+=o.top;const{titleX:d,titleY:u,maxWidth:f,rotation:p}=NHe(this,c,a,l);Up(t,s.text,0,0,i,{color:s.color,maxWidth:f,rotation:p,textAlign:wHe(l,a,r),textBaseline:"middle",translation:[d,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,a=t.ticks&&t.ticks.z||0,s=an(t.grid&&t.grid.z,-1),r=an(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==ih.prototype.draw?[{z:a,draw:i=>{this.draw(i)}}]:[{z:s,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:a,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(t){const a=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",r=[];let i,o;for(i=0,o=a.length;i<o;++i){const l=a[i];l[s]===this.id&&(!t||l.type===t)&&r.push(l)}return r}_resolveTickFontOptions(t){const a=this.options.ticks.setContext(this.getContext(t));return Es(a.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class yb{constructor(t,a,s){this.type=t,this.scope=a,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const a=Object.getPrototypeOf(t);let s;SHe(a)&&(s=this.register(a));const r=this.items,i=t.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+t);return i in r||(r[i]=t,jHe(t,o,s),this.override&&Ca.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const a=this.items,s=t.id,r=this.scope;s in a&&delete a[s],r&&s in Ca[r]&&(delete Ca[r][s],this.override&&delete $u[s])}}function jHe(e,t,a){const s=Mp(Object.create(null),[a?Ca.get(a):{},Ca.get(t),e.defaults]);Ca.set(t,s),e.defaultRoutes&&CHe(t,e.defaultRoutes),e.descriptors&&Ca.describe(t,e.descriptors)}function CHe(e,t){Object.keys(t).forEach(a=>{const s=a.split("."),r=s.pop(),i=[e].concat(s).join("."),o=t[a].split("."),l=o.pop(),c=o.join(".");Ca.route(i,r,c,l)})}function SHe(e){return"id"in e&&"defaults"in e}class _He{constructor(){this.controllers=new yb(Vj,"datasets",!0),this.elements=new yb(tc,"elements"),this.plugins=new yb(Object,"plugins"),this.scales=new yb(ih,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,a,s){[...a].forEach(r=>{const i=s||this._getRegistryForType(r);s||i.isForType(r)||i===this.plugins&&r.id?this._exec(t,i,r):Ln(r,o=>{const l=s||this._getRegistryForType(o);this._exec(t,l,o)})})}_exec(t,a,s){const r=jD(t);Qn(s["before"+r],[],s),a[t](s),Qn(s["after"+r],[],s)}_getRegistryForType(t){for(let a=0;a<this._typedRegistries.length;a++){const s=this._typedRegistries[a];if(s.isForType(t))return s}return this.plugins}_get(t,a,s){const r=a.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return r}}var co=new _He;class AHe{constructor(){this._init=void 0}notify(t,a,s,r){if(a==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const i=r?this._descriptors(t).filter(r):this._descriptors(t),o=this._notify(i,t,a,s);return a==="afterDestroy"&&(this._notify(i,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),o}_notify(t,a,s,r){r=r||{};for(const i of t){const o=i.plugin,l=o[s],c=[a,r,i.options];if(Qn(l,c,o)===!1&&r.cancelable)return!1}return!0}invalidate(){_n(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const a=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),a}_createDescriptors(t,a){const s=t&&t.config,r=an(s.options&&s.options.plugins,{}),i=THe(s);return r===!1&&!a?[]:kHe(t,i,r,a)}_notifyStateChanges(t){const a=this._oldCache||[],s=this._cache,r=(i,o)=>i.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(r(a,s),t,"stop"),this._notify(r(s,a),t,"start")}}function THe(e){const t={},a=[],s=Object.keys(co.plugins.items);for(let i=0;i<s.length;i++)a.push(co.getPlugin(s[i]));const r=e.plugins||[];for(let i=0;i<r.length;i++){const o=r[i];a.indexOf(o)===-1&&(a.push(o),t[o.id]=!0)}return{plugins:a,localIds:t}}function EHe(e,t){return!t&&e===!1?null:e===!0?{}:e}function kHe(e,{plugins:t,localIds:a},s,r){const i=[],o=e.getContext();for(const l of t){const c=l.id,d=EHe(s[c],r);d!==null&&i.push({plugin:l,options:LHe(e.config,{plugin:l,local:a[c]},d,o)})}return i}function LHe(e,{plugin:t,local:a},s,r){const i=e.pluginScopeKeys(t),o=e.getOptionScopes(s,i);return a&&t.defaults&&o.push(t.defaults),e.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Ck(e,t){const a=Ca.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||a.indexAxis||"x"}function PHe(e,t){let a=e;return e==="_index_"?a=t:e==="_value_"&&(a=t==="x"?"y":"x"),a}function DHe(e,t){return e===t?"_index_":"_value_"}function Q8(e){if(e==="x"||e==="y"||e==="r")return e}function OHe(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function Sk(e,...t){if(Q8(e))return e;for(const a of t){const s=a.axis||OHe(a.position)||e.length>1&&Q8(e[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function K8(e,t,a){if(a[t+"AxisID"]===e)return{axis:t}}function MHe(e,t){if(t.data&&t.data.datasets){const a=t.data.datasets.filter(s=>s.xAxisID===e||s.yAxisID===e);if(a.length)return K8(e,"x",a[0])||K8(e,"y",a[0])}return{}}function IHe(e,t){const a=$u[e.type]||{scales:{}},s=t.scales||{},r=Ck(e.type,t),i=Object.create(null);return Object.keys(s).forEach(o=>{const l=s[o];if(!pn(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=Sk(o,l,MHe(o,e),Ca.scales[l.type]),d=DHe(c,r),u=a.scales||{};i[o]=Kg(Object.create(null),[{axis:c},l,u[c],u[d]])}),e.data.datasets.forEach(o=>{const l=o.type||e.type,c=o.indexAxis||Ck(l,t),u=($u[l]||{}).scales||{};Object.keys(u).forEach(f=>{const p=PHe(f,c),x=o[p+"AxisID"]||p;i[x]=i[x]||Object.create(null),Kg(i[x],[{axis:p},s[x],u[f]])})}),Object.keys(i).forEach(o=>{const l=i[o];Kg(l,[Ca.scales[l.type],Ca.scale])}),i}function NJ(e){const t=e.options||(e.options={});t.plugins=an(t.plugins,{}),t.scales=IHe(e,t)}function jJ(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function $He(e){return e=e||{},e.data=jJ(e.data),NJ(e),e}const X8=new Map,CJ=new Set;function bb(e,t){let a=X8.get(e);return a||(a=t(),X8.set(e,a),CJ.add(a)),a}const wg=(e,t,a)=>{const s=Iu(t,a);s!==void 0&&e.add(s)};class RHe{constructor(t){this._config=$He(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=jJ(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),NJ(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return bb(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,a){return bb(`${t}.transition.${a}`,()=>[[`datasets.${t}.transitions.${a}`,`transitions.${a}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,a){return bb(`${t}-${a}`,()=>[[`datasets.${t}.elements.${a}`,`datasets.${t}`,`elements.${a}`,""]])}pluginScopeKeys(t){const a=t.id,s=this.type;return bb(`${s}-plugin-${a}`,()=>[[`plugins.${a}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,a){const s=this._scopeCache;let r=s.get(t);return(!r||a)&&(r=new Map,s.set(t,r)),r}getOptionScopes(t,a,s){const{options:r,type:i}=this,o=this._cachedScopes(t,s),l=o.get(a);if(l)return l;const c=new Set;a.forEach(u=>{t&&(c.add(t),u.forEach(f=>wg(c,t,f))),u.forEach(f=>wg(c,r,f)),u.forEach(f=>wg(c,$u[i]||{},f)),u.forEach(f=>wg(c,Ca,f)),u.forEach(f=>wg(c,Nk,f))});const d=Array.from(c);return d.length===0&&d.push(Object.create(null)),CJ.has(a)&&o.set(a,d),d}chartOptionScopes(){const{options:t,type:a}=this;return[t,$u[a]||{},Ca.datasets[a]||{},{type:a},Ca,Nk]}resolveNamedOptions(t,a,s,r=[""]){const i={$shared:!0},{resolver:o,subPrefixes:l}=Z8(this._resolverCache,t,r);let c=o;if(UHe(o,a)){i.$shared=!1,s=cd(s)?s():s;const d=this.createResolver(t,s,l);c=Lf(o,s,d)}for(const d of a)i[d]=c[d];return i}createResolver(t,a,s=[""],r){const{resolver:i}=Z8(this._resolverCache,t,s);return pn(a)?Lf(i,a,void 0,r):i}}function Z8(e,t,a){let s=e.get(t);s||(s=new Map,e.set(t,s));const r=a.join();let i=s.get(r);return i||(i={resolver:LD(t,a),subPrefixes:a.filter(l=>!l.toLowerCase().includes("hover"))},s.set(r,i)),i}const zHe=e=>pn(e)&&Object.getOwnPropertyNames(e).some(t=>cd(e[t]));function UHe(e,t){const{isScriptable:a,isIndexable:s}=iJ(e);for(const r of t){const i=a(r),o=s(r),l=(o||i)&&e[r];if(i&&(cd(l)||zHe(l))||o&&Qa(l))return!0}return!1}var FHe="4.5.1";const BHe=["top","bottom","left","right","chartArea"];function J8(e,t){return e==="top"||e==="bottom"||BHe.indexOf(e)===-1&&t==="x"}function eB(e,t){return function(a,s){return a[e]===s[e]?a[t]-s[t]:a[e]-s[e]}}function tB(e){const t=e.chart,a=t.options.animation;t.notifyPlugins("afterRender"),Qn(a&&a.onComplete,[e],t)}function HHe(e){const t=e.chart,a=t.options.animation;Qn(a&&a.onProgress,[e],t)}function SJ(e){return OD()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Vb={},nB=e=>{const t=SJ(e);return Object.values(Vb).filter(a=>a.canvas===t).pop()};function GHe(e,t,a){const s=Object.keys(e);for(const r of s){const i=+r;if(i>=t){const o=e[r];delete e[r],(a>0||i>t)&&(e[i+a]=o)}}}function WHe(e,t,a,s){return!a||e.type==="mouseout"?null:s?t:e}let Qj=class{static defaults=Ca;static instances=Vb;static overrides=$u;static registry=co;static version=FHe;static getChart=nB;static register(...t){co.add(...t),aB()}static unregister(...t){co.remove(...t),aB()}constructor(t,a){const s=this.config=new RHe(a),r=SJ(t),i=nB(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||cHe(r)),this.platform.updateConfig(s);const l=this.platform.acquireContext(r,o.aspectRatio),c=l&&l.canvas,d=c&&c.height,u=c&&c.width;if(this.id=I7e(),this.ctx=l,this.canvas=c,this.width=u,this.height=d,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new AHe,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=t8e(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],Vb[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}ul.listen(this,"complete",tB),ul.listen(this,"progress",HHe),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:a},width:s,height:r,_aspectRatio:i}=this;return _n(t)?a&&i?i:r?s/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return co}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():S8(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return N8(this.canvas,this.ctx),this}stop(){return ul.stop(this),this}resize(t,a){ul.running(this)?this._resizeBeforeDraw={width:t,height:a}:this._resize(t,a)}_resize(t,a){const s=this.options,r=this.canvas,i=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,t,a,i),l=s.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,S8(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),Qn(s.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const a=this.options.scales||{};Ln(a,(s,r)=>{s.id=r})}buildOrUpdateScales(){const t=this.options,a=t.scales,s=this.scales,r=Object.keys(s).reduce((o,l)=>(o[l]=!1,o),{});let i=[];a&&(i=i.concat(Object.keys(a).map(o=>{const l=a[o],c=Sk(o,l),d=c==="r",u=c==="x";return{options:l,dposition:d?"chartArea":u?"bottom":"left",dtype:d?"radialLinear":u?"category":"linear"}}))),Ln(i,o=>{const l=o.options,c=l.id,d=Sk(c,l),u=an(l.type,o.dtype);(l.position===void 0||J8(l.position,d)!==J8(o.dposition))&&(l.position=o.dposition),r[c]=!0;let f=null;if(c in s&&s[c].type===u)f=s[c];else{const p=co.getScale(u);f=new p({id:c,type:u,ctx:this.ctx,chart:this}),s[f.id]=f}f.init(l,t)}),Ln(r,(o,l)=>{o||delete s[l]}),Ln(s,o=>{ii.configure(this,o,o.options),ii.addBox(this,o)})}_updateMetasets(){const t=this._metasets,a=this.data.datasets.length,s=t.length;if(t.sort((r,i)=>r.index-i.index),s>a){for(let r=a;r<s;++r)this._destroyDatasetMeta(r);t.splice(a,s-a)}this._sortedMetasets=t.slice(0).sort(eB("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:a}}=this;t.length>a.length&&delete this._stacks,t.forEach((s,r)=>{a.filter(i=>i===s._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],a=this.data.datasets;let s,r;for(this._removeUnreferencedMetasets(),s=0,r=a.length;s<r;s++){const i=a[s];let o=this.getDatasetMeta(s);const l=i.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=l,o.indexAxis=i.indexAxis||Ck(l,this.options),o.order=i.order||0,o.index=s,o.label=""+i.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const c=co.getController(l),{datasetElementType:d,dataElementType:u}=Ca.datasets[l];Object.assign(c,{dataElementType:co.getElement(u),datasetElementType:d&&co.getElement(d)}),o.controller=new c(this,s),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){Ln(this.data.datasets,(t,a)=>{this.getDatasetMeta(a).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const a=this.config;a.update();const s=this._options=a.createResolver(a.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let d=0,u=this.data.datasets.length;d<u;d++){const{controller:f}=this.getDatasetMeta(d),p=!r&&i.indexOf(f)===-1;f.buildOrUpdateElements(p),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),r||Ln(i,d=>{d.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(eB("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){Ln(this.scales,t=>{ii.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,a=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!m8(a,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,a=this._getUniformDataChanges()||[];for(const{method:s,start:r,count:i}of a){const o=s==="_removeElements"?-i:i;GHe(t,r,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const a=this.data.datasets.length,s=i=>new Set(t.filter(o=>o[0]===i).map((o,l)=>l+","+o.splice(1).join(","))),r=s(0);for(let i=1;i<a;i++)if(!m8(r,s(i)))return;return Array.from(r).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ii.update(this,this.width,this.height,t);const a=this.chartArea,s=a.width<=0||a.height<=0;this._layers=[],Ln(this.boxes,r=>{s&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,i)=>{r._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let a=0,s=this.data.datasets.length;a<s;++a)this.getDatasetMeta(a).controller.configure();for(let a=0,s=this.data.datasets.length;a<s;++a)this._updateDataset(a,cd(t)?t({datasetIndex:a}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,a){const s=this.getDatasetMeta(t),r={meta:s,index:t,mode:a,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(s.controller._update(a),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ul.has(this)?this.attached&&!ul.running(this)&&ul.start(this):(this.draw(),tB({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const a=this._layers;for(t=0;t<a.length&&a[t].z<=0;++t)a[t].draw(this.chartArea);for(this._drawDatasets();t<a.length;++t)a[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const a=this._sortedMetasets,s=[];let r,i;for(r=0,i=a.length;r<i;++r){const o=a[r];(!t||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let a=t.length-1;a>=0;--a)this._drawDataset(t[a]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const a=this.ctx,s={meta:t,index:t.index,cancelable:!0},r=oBe(this,t);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(r&&TD(a,r),t.controller.draw(),r&&ED(a),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return zp(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,a,s,r){const i=BBe.modes[a];return typeof i=="function"?i(this,t,s,r):[]}getDatasetMeta(t){const a=this.data.datasets[t],s=this._metasets;let r=s.filter(i=>i&&i._dataset===a).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:a&&a.order||0,index:t,_dataset:a,_parsed:[],_sorted:!1},s.push(r)),r}getContext(){return this.$context||(this.$context=Qu(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const a=this.data.datasets[t];if(!a)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!a.hidden}setDatasetVisibility(t,a){const s=this.getDatasetMeta(t);s.hidden=!a}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,a,s){const r=s?"show":"hide",i=this.getDatasetMeta(t),o=i.controller._resolveAnimations(void 0,r);Ip(a)?(i.data[a].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),o.update(i,{visible:s}),this.update(l=>l.datasetIndex===t?r:void 0))}hide(t,a){this._updateVisibility(t,a,!1)}show(t,a){this._updateVisibility(t,a,!0)}_destroyDatasetMeta(t){const a=this._metasets[t];a&&a.controller&&a.controller._destroy(),delete this._metasets[t]}_stop(){let t,a;for(this.stop(),ul.remove(this),t=0,a=this.data.datasets.length;t<a;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:a}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),N8(t,a),this.platform.releaseContext(a),this.canvas=null,this.ctx=null),delete Vb[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,a=this.platform,s=(i,o)=>{a.addEventListener(this,i,o),t[i]=o},r=(i,o,l)=>{i.offsetX=o,i.offsetY=l,this._eventHandler(i)};Ln(this.options.events,i=>s(i,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,a=this.platform,s=(c,d)=>{a.addEventListener(this,c,d),t[c]=d},r=(c,d)=>{t[c]&&(a.removeEventListener(this,c,d),delete t[c])},i=(c,d)=>{this.canvas&&this.resize(c,d)};let o;const l=()=>{r("attach",l),this.attached=!0,this.resize(),s("resize",i),s("detach",o)};o=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),s("attach",l)},a.isAttached(this.canvas)?l():o()}unbindEvents(){Ln(this._listeners,(t,a)=>{this.platform.removeEventListener(this,a,t)}),this._listeners={},Ln(this._responsiveListeners,(t,a)=>{this.platform.removeEventListener(this,a,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,a,s){const r=s?"set":"remove";let i,o,l,c;for(a==="dataset"&&(i=this.getDatasetMeta(t[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),l=0,c=t.length;l<c;++l){o=t[l];const d=o&&this.getDatasetMeta(o.datasetIndex).controller;d&&d[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const a=this._active||[],s=t.map(({datasetIndex:i,index:o})=>{const l=this.getDatasetMeta(i);if(!l)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:l.data[o],index:o}});!hw(s,a)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,a))}notifyPlugins(t,a,s){return this._plugins.notify(this,t,a,s)}isPluginEnabled(t){return this._plugins._cache.filter(a=>a.plugin.id===t).length===1}_updateHoverStyles(t,a,s){const r=this.options.hover,i=(c,d)=>c.filter(u=>!d.some(f=>u.datasetIndex===f.datasetIndex&&u.index===f.index)),o=i(a,t),l=s?t:i(t,a);o.length&&this.updateHoverStyle(o,r.mode,!1),l.length&&r.mode&&this.updateHoverStyle(l,r.mode,!0)}_eventHandler(t,a){const s={event:t,replay:a,cancelable:!0,inChartArea:this.isPointInArea(t)},r=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,r)===!1)return;const i=this._handleEvent(t,a,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,r),(i||s.changed)&&this.render(),this}_handleEvent(t,a,s){const{_active:r=[],options:i}=this,o=a,l=this._getActiveElements(t,r,s,o),c=B7e(t),d=WHe(t,this._lastEvent,s,c);s&&(this._lastEvent=null,Qn(i.onHover,[t,l,this],this),c&&Qn(i.onClick,[t,l,this],this));const u=!hw(l,r);return(u||a)&&(this._active=l,this._updateHoverStyles(l,r,a)),this._lastEvent=d,u}_getActiveElements(t,a,s,r){if(t.type==="mouseout")return[];if(!s)return a;const i=this.options.hover;return this.getElementsAtEventForMode(t,i.mode,i,r)}};function aB(){return Ln(Qj.instances,e=>e._plugins.invalidate())}function qHe(e,t,a){const{startAngle:s,x:r,y:i,outerRadius:o,innerRadius:l,options:c}=t,{borderWidth:d,borderJoinStyle:u}=c,f=Math.min(d/o,Li(s-a));if(e.beginPath(),e.arc(r,i,o-d/2,s+f/2,a-f/2),l>0){const p=Math.min(d/l,Li(s-a));e.arc(r,i,l+d/2,a-p/2,s+p/2,!0)}else{const p=Math.min(d/2,o*Li(s-a));if(u==="round")e.arc(r,i,p,a-Dn/2,s+Dn/2,!0);else if(u==="bevel"){const x=2*p*p,v=-x*Math.cos(a+Dn/2)+r,N=-x*Math.sin(a+Dn/2)+i,b=x*Math.cos(s+Dn/2)+r,C=x*Math.sin(s+Dn/2)+i;e.lineTo(v,N),e.lineTo(b,C)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}function VHe(e,t,a){const{startAngle:s,pixelMargin:r,x:i,y:o,outerRadius:l,innerRadius:c}=t;let d=r/l;e.beginPath(),e.arc(i,o,l,s-d,a+d),c>r?(d=r/c,e.arc(i,o,c,a+d,s-d,!0)):e.arc(i,o,r,a+Ka,s-Ka),e.closePath(),e.clip()}function YHe(e){return kD(e,["outerStart","outerEnd","innerStart","innerEnd"])}function QHe(e,t,a,s){const r=YHe(e.options.borderRadius),i=(a-t)/2,o=Math.min(i,s*t/2),l=c=>{const d=(a-Math.min(i,c))*s/2;return Ts(c,0,Math.min(i,d))};return{outerStart:l(r.outerStart),outerEnd:l(r.outerEnd),innerStart:Ts(r.innerStart,0,o),innerEnd:Ts(r.innerEnd,0,o)}}function qm(e,t,a,s){return{x:a+e*Math.cos(t),y:s+e*Math.sin(t)}}function vw(e,t,a,s,r,i){const{x:o,y:l,startAngle:c,pixelMargin:d,innerRadius:u}=t,f=Math.max(t.outerRadius+s+a-d,0),p=u>0?u+s+a+d:0;let x=0;const v=r-c;if(s){const X=u>0?u-s:0,z=f>0?f-s:0,Q=(X+z)/2,de=Q!==0?v*Q/(Q+s):v;x=(v-de)/2}const N=Math.max(.001,v*f-a/Dn)/f,b=(v-N)/2,C=c+b+x,w=r-b-x,{outerStart:S,outerEnd:E,innerStart:k,innerEnd:A}=QHe(t,p,f,w-C),T=f-S,_=f-E,I=C+S/T,R=w-E/_,U=p+k,D=p+A,M=C+k/U,W=w-A/D;if(e.beginPath(),i){const X=(I+R)/2;if(e.arc(o,l,f,I,X),e.arc(o,l,f,X,R),E>0){const Y=qm(_,R,o,l);e.arc(Y.x,Y.y,E,R,w+Ka)}const z=qm(D,w,o,l);if(e.lineTo(z.x,z.y),A>0){const Y=qm(D,W,o,l);e.arc(Y.x,Y.y,A,w+Ka,W+Math.PI)}const Q=(w-A/p+(C+k/p))/2;if(e.arc(o,l,p,w-A/p,Q,!0),e.arc(o,l,p,Q,C+k/p,!0),k>0){const Y=qm(U,M,o,l);e.arc(Y.x,Y.y,k,M+Math.PI,C-Ka)}const de=qm(T,C,o,l);if(e.lineTo(de.x,de.y),S>0){const Y=qm(T,I,o,l);e.arc(Y.x,Y.y,S,C-Ka,I)}}else{e.moveTo(o,l);const X=Math.cos(I)*f+o,z=Math.sin(I)*f+l;e.lineTo(X,z);const Q=Math.cos(R)*f+o,de=Math.sin(R)*f+l;e.lineTo(Q,de)}e.closePath()}function KHe(e,t,a,s,r){const{fullCircles:i,startAngle:o,circumference:l}=t;let c=t.endAngle;if(i){vw(e,t,a,s,c,r);for(let d=0;d<i;++d)e.fill();isNaN(l)||(c=o+(l%ya||ya))}return vw(e,t,a,s,c,r),e.fill(),c}function XHe(e,t,a,s,r){const{fullCircles:i,startAngle:o,circumference:l,options:c}=t,{borderWidth:d,borderJoinStyle:u,borderDash:f,borderDashOffset:p,borderRadius:x}=c,v=c.borderAlign==="inner";if(!d)return;e.setLineDash(f||[]),e.lineDashOffset=p,v?(e.lineWidth=d*2,e.lineJoin=u||"round"):(e.lineWidth=d,e.lineJoin=u||"bevel");let N=t.endAngle;if(i){vw(e,t,a,s,N,r);for(let b=0;b<i;++b)e.stroke();isNaN(l)||(N=o+(l%ya||ya))}v&&VHe(e,t,N),c.selfJoin&&N-o>=Dn&&x===0&&u!=="miter"&&qHe(e,t,N),i||(vw(e,t,a,s,N,r),e.stroke())}class ZHe extends tc{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,a,s){const r=this.getProps(["x","y"],s),{angle:i,distance:o}=ZZ(r,{x:t,y:a}),{startAngle:l,endAngle:c,innerRadius:d,outerRadius:u,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),p=(this.options.spacing+this.options.borderWidth)/2,x=an(f,c-l),v=Rp(i,l,c)&&l!==c,N=x>=ya||v,b=Vc(o,d+p,u+p);return N&&b}getCenterPoint(t){const{x:a,y:s,startAngle:r,endAngle:i,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:c,spacing:d}=this.options,u=(r+i)/2,f=(o+l+d+c)/2;return{x:a+Math.cos(u)*f,y:s+Math.sin(u)*f}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:a,circumference:s}=this,r=(a.offset||0)/4,i=(a.spacing||0)/2,o=a.circular;if(this.pixelMargin=a.borderAlign==="inner"?.33:0,this.fullCircles=s>ya?Math.floor(s/ya):0,s===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const l=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(l)*r,Math.sin(l)*r);const c=1-Math.sin(Math.min(Dn,s||0)),d=r*c;t.fillStyle=a.backgroundColor,t.strokeStyle=a.borderColor,KHe(t,this,d,i,o),XHe(t,this,d,i,o),t.restore()}}function _J(e,t,a=t){e.lineCap=an(a.borderCapStyle,t.borderCapStyle),e.setLineDash(an(a.borderDash,t.borderDash)),e.lineDashOffset=an(a.borderDashOffset,t.borderDashOffset),e.lineJoin=an(a.borderJoinStyle,t.borderJoinStyle),e.lineWidth=an(a.borderWidth,t.borderWidth),e.strokeStyle=an(a.borderColor,t.borderColor)}function JHe(e,t,a){e.lineTo(a.x,a.y)}function e9e(e){return e.stepped?g8e:e.tension||e.cubicInterpolationMode==="monotone"?p8e:JHe}function AJ(e,t,a={}){const s=e.length,{start:r=0,end:i=s-1}=a,{start:o,end:l}=t,c=Math.max(r,o),d=Math.min(i,l),u=r<o&&i<o||r>l&&i>l;return{count:s,start:c,loop:t.loop,ilen:d<c&&!u?s+d-c:d-c}}function t9e(e,t,a,s){const{points:r,options:i}=t,{count:o,start:l,loop:c,ilen:d}=AJ(r,a,s),u=e9e(i);let{move:f=!0,reverse:p}=s||{},x,v,N;for(x=0;x<=d;++x)v=r[(l+(p?d-x:x))%o],!v.skip&&(f?(e.moveTo(v.x,v.y),f=!1):u(e,N,v,p,i.stepped),N=v);return c&&(v=r[(l+(p?d:0))%o],u(e,N,v,p,i.stepped)),!!c}function n9e(e,t,a,s){const r=t.points,{count:i,start:o,ilen:l}=AJ(r,a,s),{move:c=!0,reverse:d}=s||{};let u=0,f=0,p,x,v,N,b,C;const w=E=>(o+(d?l-E:E))%i,S=()=>{N!==b&&(e.lineTo(u,b),e.lineTo(u,N),e.lineTo(u,C))};for(c&&(x=r[w(0)],e.moveTo(x.x,x.y)),p=0;p<=l;++p){if(x=r[w(p)],x.skip)continue;const E=x.x,k=x.y,A=E|0;A===v?(k<N?N=k:k>b&&(b=k),u=(f*u+E)/++f):(S(),e.lineTo(E,k),v=A,f=0,N=b=k),C=k}S()}function _k(e){const t=e.options,a=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!a?n9e:t9e}function a9e(e){return e.stepped?Y8e:e.tension||e.cubicInterpolationMode==="monotone"?Q8e:Yd}function s9e(e,t,a,s){let r=t._path;r||(r=t._path=new Path2D,t.path(r,a,s)&&r.closePath()),_J(e,t.options),e.stroke(r)}function r9e(e,t,a,s){const{segments:r,options:i}=t,o=_k(t);for(const l of r)_J(e,i,l.style),e.beginPath(),o(e,t,l,{start:a,end:a+s-1})&&e.closePath(),e.stroke()}const i9e=typeof Path2D=="function";function o9e(e,t,a,s){i9e&&!t.options.segment?s9e(e,t,a,s):r9e(e,t,a,s)}class l9e extends tc{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,a){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const r=s.spanGaps?this._loop:this._fullLoop;U8e(this._points,s,t,r,a),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=aBe(this,this.options.segment))}first(){const t=this.segments,a=this.points;return t.length&&a[t[0].start]}last(){const t=this.segments,a=this.points,s=t.length;return s&&a[t[s-1].end]}interpolate(t,a){const s=this.options,r=t[a],i=this.points,o=eBe(this,{property:a,start:r,end:r});if(!o.length)return;const l=[],c=a9e(s);let d,u;for(d=0,u=o.length;d<u;++d){const{start:f,end:p}=o[d],x=i[f],v=i[p];if(x===v){l.push(x);continue}const N=Math.abs((r-x[a])/(v[a]-x[a])),b=c(x,v,N,s.stepped);b[a]=t[a],l.push(b)}return l.length===1?l[0]:l}pathSegment(t,a,s){return _k(this)(t,this,a,s)}path(t,a,s){const r=this.segments,i=_k(this);let o=this._loop;a=a||0,s=s||this.points.length-a;for(const l of r)o&=i(t,this,l,{start:a,end:a+s-1});return!!o}draw(t,a,s,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(t.save(),o9e(t,this,s,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function sB(e,t,a,s){const r=e.options,{[a]:i}=e.getProps([a],s);return Math.abs(t-i)<r.radius+r.hitRadius}class c9e extends tc{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,a,s){const r=this.options,{x:i,y:o}=this.getProps(["x","y"],s);return Math.pow(t-i,2)+Math.pow(a-o,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,a){return sB(this,t,"x",a)}inYRange(t,a){return sB(this,t,"y",a)}getCenterPoint(t){const{x:a,y:s}=this.getProps(["x","y"],t);return{x:a,y:s}}size(t){t=t||this.options||{};let a=t.radius||0;a=Math.max(a,a&&t.hoverRadius||0);const s=a&&t.borderWidth||0;return(a+s)*2}draw(t,a){const s=this.options;this.skip||s.radius<.1||!zp(this,a,this.size(s)/2)||(t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.fillStyle=s.backgroundColor,jk(t,s,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function TJ(e,t){const{x:a,y:s,base:r,width:i,height:o}=e.getProps(["x","y","base","width","height"],t);let l,c,d,u,f;return e.horizontal?(f=o/2,l=Math.min(a,r),c=Math.max(a,r),d=s-f,u=s+f):(f=i/2,l=a-f,c=a+f,d=Math.min(s,r),u=Math.max(s,r)),{left:l,top:d,right:c,bottom:u}}function Qc(e,t,a,s){return e?0:Ts(t,a,s)}function d9e(e,t,a){const s=e.options.borderWidth,r=e.borderSkipped,i=rJ(s);return{t:Qc(r.top,i.top,0,a),r:Qc(r.right,i.right,0,t),b:Qc(r.bottom,i.bottom,0,a),l:Qc(r.left,i.left,0,t)}}function u9e(e,t,a){const{enableBorderRadius:s}=e.getProps(["enableBorderRadius"]),r=e.options.borderRadius,i=uf(r),o=Math.min(t,a),l=e.borderSkipped,c=s||pn(r);return{topLeft:Qc(!c||l.top||l.left,i.topLeft,0,o),topRight:Qc(!c||l.top||l.right,i.topRight,0,o),bottomLeft:Qc(!c||l.bottom||l.left,i.bottomLeft,0,o),bottomRight:Qc(!c||l.bottom||l.right,i.bottomRight,0,o)}}function m9e(e){const t=TJ(e),a=t.right-t.left,s=t.bottom-t.top,r=d9e(e,a/2,s/2),i=u9e(e,a/2,s/2);return{outer:{x:t.left,y:t.top,w:a,h:s,radius:i},inner:{x:t.left+r.l,y:t.top+r.t,w:a-r.l-r.r,h:s-r.t-r.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,i.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(r.b,r.r))}}}}function RA(e,t,a,s){const r=t===null,i=a===null,l=e&&!(r&&i)&&TJ(e,s);return l&&(r||Vc(t,l.left,l.right))&&(i||Vc(a,l.top,l.bottom))}function f9e(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function h9e(e,t){e.rect(t.x,t.y,t.w,t.h)}function zA(e,t,a={}){const s=e.x!==a.x?-t:0,r=e.y!==a.y?-t:0,i=(e.x+e.w!==a.x+a.w?t:0)-s,o=(e.y+e.h!==a.y+a.h?t:0)-r;return{x:e.x+s,y:e.y+r,w:e.w+i,h:e.h+o,radius:e.radius}}class g9e extends tc{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:a,options:{borderColor:s,backgroundColor:r}}=this,{inner:i,outer:o}=m9e(this),l=f9e(o.radius)?xw:h9e;t.save(),(o.w!==i.w||o.h!==i.h)&&(t.beginPath(),l(t,zA(o,a,i)),t.clip(),l(t,zA(i,-a,o)),t.fillStyle=s,t.fill("evenodd")),t.beginPath(),l(t,zA(i,a)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,a,s){return RA(this,t,a,s)}inXRange(t,a){return RA(this,t,null,a)}inYRange(t,a){return RA(this,null,t,a)}getCenterPoint(t){const{x:a,y:s,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],t);return{x:i?(a+r)/2:a,y:i?s:(s+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}const rB=(e,t)=>{let{boxHeight:a=t,boxWidth:s=t}=e;return e.usePointStyle&&(a=Math.min(a,t),s=e.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:a,itemHeight:Math.max(t,a)}},p9e=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class iB extends tc{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,a,s){this.maxWidth=t,this.maxHeight=a,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let a=Qn(t.generateLabels,[this.chart],this)||[];t.filter&&(a=a.filter(s=>t.filter(s,this.chart.data))),t.sort&&(a=a.sort((s,r)=>t.sort(s,r,this.chart.data))),this.options.reverse&&a.reverse(),this.legendItems=a}fit(){const{options:t,ctx:a}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,r=Es(s.font),i=r.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=rB(s,i);let d,u;a.font=r.string,this.isHorizontal()?(d=this.maxWidth,u=this._fitRows(o,i,l,c)+10):(u=this.maxHeight,d=this._fitCols(o,r,l,c)+10),this.width=Math.min(d,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,a,s,r){const{ctx:i,maxWidth:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.lineWidths=[0],u=r+l;let f=t;i.textAlign="left",i.textBaseline="middle";let p=-1,x=-u;return this.legendItems.forEach((v,N)=>{const b=s+a/2+i.measureText(v.text).width;(N===0||d[d.length-1]+b+2*l>o)&&(f+=u,d[d.length-(N>0?0:1)]=0,x+=u,p++),c[N]={left:0,top:x,row:p,width:b,height:r},d[d.length-1]+=b+l}),f}_fitCols(t,a,s,r){const{ctx:i,maxHeight:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.columnSizes=[],u=o-t;let f=l,p=0,x=0,v=0,N=0;return this.legendItems.forEach((b,C)=>{const{itemWidth:w,itemHeight:S}=x9e(s,a,i,b,r);C>0&&x+S+2*l>u&&(f+=p+l,d.push({width:p,height:x}),v+=p+l,N++,p=x=0),c[C]={left:v,top:x,col:N,width:w,height:S},p=Math.max(p,w),x+=S+l}),f+=p,d.push({width:p,height:x}),f}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:a,options:{align:s,labels:{padding:r},rtl:i}}=this,o=mf(i,this.left,this.width);if(this.isHorizontal()){let l=0,c=Cs(s,this.left+r,this.right-this.lineWidths[l]);for(const d of a)l!==d.row&&(l=d.row,c=Cs(s,this.left+r,this.right-this.lineWidths[l])),d.top+=this.top+t+r,d.left=o.leftForLtr(o.x(c),d.width),c+=d.width+r}else{let l=0,c=Cs(s,this.top+t+r,this.bottom-this.columnSizes[l].height);for(const d of a)d.col!==l&&(l=d.col,c=Cs(s,this.top+t+r,this.bottom-this.columnSizes[l].height)),d.top=c,d.left+=this.left+r,d.left=o.leftForLtr(o.x(d.left),d.width),c+=d.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;TD(t,this),this._draw(),ED(t)}}_draw(){const{options:t,columnSizes:a,lineWidths:s,ctx:r}=this,{align:i,labels:o}=t,l=Ca.color,c=mf(t.rtl,this.left,this.width),d=Es(o.font),{padding:u}=o,f=d.size,p=f/2;let x;this.drawTitle(),r.textAlign=c.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=d.string;const{boxWidth:v,boxHeight:N,itemHeight:b}=rB(o,f),C=function(A,T,_){if(isNaN(v)||v<=0||isNaN(N)||N<0)return;r.save();const I=an(_.lineWidth,1);if(r.fillStyle=an(_.fillStyle,l),r.lineCap=an(_.lineCap,"butt"),r.lineDashOffset=an(_.lineDashOffset,0),r.lineJoin=an(_.lineJoin,"miter"),r.lineWidth=I,r.strokeStyle=an(_.strokeStyle,l),r.setLineDash(an(_.lineDash,[])),o.usePointStyle){const R={radius:N*Math.SQRT2/2,pointStyle:_.pointStyle,rotation:_.rotation,borderWidth:I},U=c.xPlus(A,v/2),D=T+p;sJ(r,R,U,D,o.pointStyleWidth&&v)}else{const R=T+Math.max((f-N)/2,0),U=c.leftForLtr(A,v),D=uf(_.borderRadius);r.beginPath(),Object.values(D).some(M=>M!==0)?xw(r,{x:U,y:R,w:v,h:N,radius:D}):r.rect(U,R,v,N),r.fill(),I!==0&&r.stroke()}r.restore()},w=function(A,T,_){Up(r,_.text,A,T+b/2,d,{strikethrough:_.hidden,textAlign:c.textAlign(_.textAlign)})},S=this.isHorizontal(),E=this._computeTitleHeight();S?x={x:Cs(i,this.left+u,this.right-s[0]),y:this.top+u+E,line:0}:x={x:this.left+u,y:Cs(i,this.top+E+u,this.bottom-a[0].height),line:0},uJ(this.ctx,t.textDirection);const k=b+u;this.legendItems.forEach((A,T)=>{r.strokeStyle=A.fontColor,r.fillStyle=A.fontColor;const _=r.measureText(A.text).width,I=c.textAlign(A.textAlign||(A.textAlign=o.textAlign)),R=v+p+_;let U=x.x,D=x.y;c.setWidth(this.width),S?T>0&&U+R+u>this.right&&(D=x.y+=k,x.line++,U=x.x=Cs(i,this.left+u,this.right-s[x.line])):T>0&&D+k>this.bottom&&(U=x.x=U+a[x.line].width+u,x.line++,D=x.y=Cs(i,this.top+E+u,this.bottom-a[x.line].height));const M=c.x(U);if(C(M,D,A),U=n8e(I,U+v+p,S?U+R:this.right,t.rtl),w(c.x(U),D,A),S)x.x+=R+u;else if(typeof A.text!="string"){const W=d.lineHeight;x.y+=EJ(A,W)+u}else x.y+=k}),mJ(this.ctx,t.textDirection)}drawTitle(){const t=this.options,a=t.title,s=Es(a.font),r=gi(a.padding);if(!a.display)return;const i=mf(t.rtl,this.left,this.width),o=this.ctx,l=a.position,c=s.size/2,d=r.top+c;let u,f=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),u=this.top+d,f=Cs(t.align,f,this.right-p);else{const v=this.columnSizes.reduce((N,b)=>Math.max(N,b.height),0);u=d+Cs(t.align,this.top,this.bottom-v-t.labels.padding-this._computeTitleHeight())}const x=Cs(l,f,f+p);o.textAlign=i.textAlign(SD(l)),o.textBaseline="middle",o.strokeStyle=a.color,o.fillStyle=a.color,o.font=s.string,Up(o,a.text,x,u,s)}_computeTitleHeight(){const t=this.options.title,a=Es(t.font),s=gi(t.padding);return t.display?a.lineHeight+s.height:0}_getLegendItemAt(t,a){let s,r,i;if(Vc(t,this.left,this.right)&&Vc(a,this.top,this.bottom)){for(i=this.legendHitBoxes,s=0;s<i.length;++s)if(r=i[s],Vc(t,r.left,r.left+r.width)&&Vc(a,r.top,r.top+r.height))return this.legendItems[s]}return null}handleEvent(t){const a=this.options;if(!v9e(t.type,a))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,i=p9e(r,s);r&&!i&&Qn(a.onLeave,[t,r,this],this),this._hoveredItem=s,s&&!i&&Qn(a.onHover,[t,s,this],this)}else s&&Qn(a.onClick,[t,s,this],this)}}function x9e(e,t,a,s,r){const i=y9e(s,e,t,a),o=b9e(r,s,t.lineHeight);return{itemWidth:i,itemHeight:o}}function y9e(e,t,a,s){let r=e.text;return r&&typeof r!="string"&&(r=r.reduce((i,o)=>i.length>o.length?i:o)),t+a.size/2+s.measureText(r).width}function b9e(e,t,a){let s=e;return typeof t.text!="string"&&(s=EJ(t,a)),s}function EJ(e,t){const a=e.text?e.text.length:0;return t*a}function v9e(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var w9e={id:"legend",_element:iB,start(e,t,a){const s=e.legend=new iB({ctx:e.ctx,options:a,chart:e});ii.configure(e,s,a),ii.addBox(e,s)},stop(e){ii.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,a){const s=e.legend;ii.configure(e,s,a),s.options=a},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,a){const s=t.datasetIndex,r=a.chart;r.isDatasetVisible(s)?(r.hide(s),t.hidden=!0):(r.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:a,pointStyle:s,textAlign:r,color:i,useBorderRadius:o,borderRadius:l}}=e.legend.options;return e._getSortedDatasetMetas().map(c=>{const d=c.controller.getStyle(a?0:void 0),u=gi(d.borderWidth);return{text:t[c.index].label,fillStyle:d.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:d.borderColor,pointStyle:s||d.pointStyle,rotation:d.rotation,textAlign:r||d.textAlign,borderRadius:o&&(l||d.borderRadius),datasetIndex:c.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class kJ extends tc{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,a){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=a;const r=Qa(s.text)?s.text.length:1;this._padding=gi(s.padding);const i=r*Es(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:a,left:s,bottom:r,right:i,options:o}=this,l=o.align;let c=0,d,u,f;return this.isHorizontal()?(u=Cs(l,s,i),f=a+t,d=i-s):(o.position==="left"?(u=s+t,f=Cs(l,r,a),c=Dn*-.5):(u=i-t,f=Cs(l,a,r),c=Dn*.5),d=r-a),{titleX:u,titleY:f,maxWidth:d,rotation:c}}draw(){const t=this.ctx,a=this.options;if(!a.display)return;const s=Es(a.font),i=s.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:c,rotation:d}=this._drawArgs(i);Up(t,a.text,0,0,s,{color:a.color,maxWidth:c,rotation:d,textAlign:SD(a.align),textBaseline:"middle",translation:[o,l]})}}function N9e(e,t){const a=new kJ({ctx:e.ctx,options:t,chart:e});ii.configure(e,a,t),ii.addBox(e,a),e.titleBlock=a}var j9e={id:"title",_element:kJ,start(e,t,a){N9e(e,a)},stop(e){const t=e.titleBlock;ii.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,a){const s=e.titleBlock;ii.configure(e,s,a),s.options=a},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const zg={average(e){if(!e.length)return!1;let t,a,s=new Set,r=0,i=0;for(t=0,a=e.length;t<a;++t){const l=e[t].element;if(l&&l.hasValue()){const c=l.tooltipPosition();s.add(c.x),r+=c.y,++i}}return i===0||s.size===0?!1:{x:[...s].reduce((l,c)=>l+c)/s.size,y:r/i}},nearest(e,t){if(!e.length)return!1;let a=t.x,s=t.y,r=Number.POSITIVE_INFINITY,i,o,l;for(i=0,o=e.length;i<o;++i){const c=e[i].element;if(c&&c.hasValue()){const d=c.getCenterPoint(),u=wk(t,d);u<r&&(r=u,l=c)}}if(l){const c=l.tooltipPosition();a=c.x,s=c.y}return{x:a,y:s}}};function lo(e,t){return t&&(Qa(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function ml(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function C9e(e,t){const{element:a,datasetIndex:s,index:r}=t,i=e.getDatasetMeta(s).controller,{label:o,value:l}=i.getLabelAndValue(r);return{chart:e,label:o,parsed:i.getParsed(r),raw:e.data.datasets[s].data[r],formattedValue:l,dataset:i.getDataset(),dataIndex:r,datasetIndex:s,element:a}}function oB(e,t){const a=e.chart.ctx,{body:s,footer:r,title:i}=e,{boxWidth:o,boxHeight:l}=t,c=Es(t.bodyFont),d=Es(t.titleFont),u=Es(t.footerFont),f=i.length,p=r.length,x=s.length,v=gi(t.padding);let N=v.height,b=0,C=s.reduce((E,k)=>E+k.before.length+k.lines.length+k.after.length,0);if(C+=e.beforeBody.length+e.afterBody.length,f&&(N+=f*d.lineHeight+(f-1)*t.titleSpacing+t.titleMarginBottom),C){const E=t.displayColors?Math.max(l,c.lineHeight):c.lineHeight;N+=x*E+(C-x)*c.lineHeight+(C-1)*t.bodySpacing}p&&(N+=t.footerMarginTop+p*u.lineHeight+(p-1)*t.footerSpacing);let w=0;const S=function(E){b=Math.max(b,a.measureText(E).width+w)};return a.save(),a.font=d.string,Ln(e.title,S),a.font=c.string,Ln(e.beforeBody.concat(e.afterBody),S),w=t.displayColors?o+2+t.boxPadding:0,Ln(s,E=>{Ln(E.before,S),Ln(E.lines,S),Ln(E.after,S)}),w=0,a.font=u.string,Ln(e.footer,S),a.restore(),b+=v.width,{width:b,height:N}}function S9e(e,t){const{y:a,height:s}=t;return a<s/2?"top":a>e.height-s/2?"bottom":"center"}function _9e(e,t,a,s){const{x:r,width:i}=s,o=a.caretSize+a.caretPadding;if(e==="left"&&r+i+o>t.width||e==="right"&&r-i-o<0)return!0}function A9e(e,t,a,s){const{x:r,width:i}=a,{width:o,chartArea:{left:l,right:c}}=e;let d="center";return s==="center"?d=r<=(l+c)/2?"left":"right":r<=i/2?d="left":r>=o-i/2&&(d="right"),_9e(d,e,t,a)&&(d="center"),d}function lB(e,t,a){const s=a.yAlign||t.yAlign||S9e(e,a);return{xAlign:a.xAlign||t.xAlign||A9e(e,t,a,s),yAlign:s}}function T9e(e,t){let{x:a,width:s}=e;return t==="right"?a-=s:t==="center"&&(a-=s/2),a}function E9e(e,t,a){let{y:s,height:r}=e;return t==="top"?s+=a:t==="bottom"?s-=r+a:s-=r/2,s}function cB(e,t,a,s){const{caretSize:r,caretPadding:i,cornerRadius:o}=e,{xAlign:l,yAlign:c}=a,d=r+i,{topLeft:u,topRight:f,bottomLeft:p,bottomRight:x}=uf(o);let v=T9e(t,l);const N=E9e(t,c,d);return c==="center"?l==="left"?v+=d:l==="right"&&(v-=d):l==="left"?v-=Math.max(u,p)+r:l==="right"&&(v+=Math.max(f,x)+r),{x:Ts(v,0,s.width-t.width),y:Ts(N,0,s.height-t.height)}}function vb(e,t,a){const s=gi(a.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-s.right:e.x+s.left}function dB(e){return lo([],ml(e))}function k9e(e,t,a){return Qu(e,{tooltip:t,tooltipItems:a,type:"tooltip"})}function uB(e,t){const a=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return a?e.override(a):e}const LJ={beforeTitle:cl,title(e){if(e.length>0){const t=e[0],a=t.chart.data.labels,s=a?a.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return a[t.dataIndex]}return""},afterTitle:cl,beforeBody:cl,beforeLabel:cl,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const a=e.formattedValue;return _n(a)||(t+=a),t},labelColor(e){const a=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:a.borderColor,backgroundColor:a.backgroundColor,borderWidth:a.borderWidth,borderDash:a.borderDash,borderDashOffset:a.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const a=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:a.pointStyle,rotation:a.rotation}},afterLabel:cl,afterBody:cl,beforeFooter:cl,footer:cl,afterFooter:cl};function Zs(e,t,a,s){const r=e[t].call(a,s);return typeof r>"u"?LJ[t].call(a,s):r}class mB extends tc{static positioners=zg;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const a=this.chart,s=this.options.setContext(this.getContext()),r=s.enabled&&a.options.animation&&s.animations,i=new hJ(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=k9e(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,a){const{callbacks:s}=a,r=Zs(s,"beforeTitle",this,t),i=Zs(s,"title",this,t),o=Zs(s,"afterTitle",this,t);let l=[];return l=lo(l,ml(r)),l=lo(l,ml(i)),l=lo(l,ml(o)),l}getBeforeBody(t,a){return dB(Zs(a.callbacks,"beforeBody",this,t))}getBody(t,a){const{callbacks:s}=a,r=[];return Ln(t,i=>{const o={before:[],lines:[],after:[]},l=uB(s,i);lo(o.before,ml(Zs(l,"beforeLabel",this,i))),lo(o.lines,Zs(l,"label",this,i)),lo(o.after,ml(Zs(l,"afterLabel",this,i))),r.push(o)}),r}getAfterBody(t,a){return dB(Zs(a.callbacks,"afterBody",this,t))}getFooter(t,a){const{callbacks:s}=a,r=Zs(s,"beforeFooter",this,t),i=Zs(s,"footer",this,t),o=Zs(s,"afterFooter",this,t);let l=[];return l=lo(l,ml(r)),l=lo(l,ml(i)),l=lo(l,ml(o)),l}_createItems(t){const a=this._active,s=this.chart.data,r=[],i=[],o=[];let l=[],c,d;for(c=0,d=a.length;c<d;++c)l.push(C9e(this.chart,a[c]));return t.filter&&(l=l.filter((u,f,p)=>t.filter(u,f,p,s))),t.itemSort&&(l=l.sort((u,f)=>t.itemSort(u,f,s))),Ln(l,u=>{const f=uB(t.callbacks,u);r.push(Zs(f,"labelColor",this,u)),i.push(Zs(f,"labelPointStyle",this,u)),o.push(Zs(f,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=l,l}update(t,a){const s=this.options.setContext(this.getContext()),r=this._active;let i,o=[];if(!r.length)this.opacity!==0&&(i={opacity:0});else{const l=zg[s.position].call(this,r,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const c=this._size=oB(this,s),d=Object.assign({},l,c),u=lB(this.chart,s,d),f=cB(s,d,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:f.x,y:f.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:a})}drawCaret(t,a,s,r){const i=this.getCaretPosition(t,s,r);a.lineTo(i.x1,i.y1),a.lineTo(i.x2,i.y2),a.lineTo(i.x3,i.y3)}getCaretPosition(t,a,s){const{xAlign:r,yAlign:i}=this,{caretSize:o,cornerRadius:l}=s,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:f}=uf(l),{x:p,y:x}=t,{width:v,height:N}=a;let b,C,w,S,E,k;return i==="center"?(E=x+N/2,r==="left"?(b=p,C=b-o,S=E+o,k=E-o):(b=p+v,C=b+o,S=E-o,k=E+o),w=b):(r==="left"?C=p+Math.max(c,u)+o:r==="right"?C=p+v-Math.max(d,f)-o:C=this.caretX,i==="top"?(S=x,E=S-o,b=C-o,w=C+o):(S=x+N,E=S+o,b=C+o,w=C-o),k=S),{x1:b,x2:C,x3:w,y1:S,y2:E,y3:k}}drawTitle(t,a,s){const r=this.title,i=r.length;let o,l,c;if(i){const d=mf(s.rtl,this.x,this.width);for(t.x=vb(this,s.titleAlign,s),a.textAlign=d.textAlign(s.titleAlign),a.textBaseline="middle",o=Es(s.titleFont),l=s.titleSpacing,a.fillStyle=s.titleColor,a.font=o.string,c=0;c<i;++c)a.fillText(r[c],d.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+l,c+1===i&&(t.y+=s.titleMarginBottom-l)}}_drawColorBox(t,a,s,r,i){const o=this.labelColors[s],l=this.labelPointStyles[s],{boxHeight:c,boxWidth:d}=i,u=Es(i.bodyFont),f=vb(this,"left",i),p=r.x(f),x=c<u.lineHeight?(u.lineHeight-c)/2:0,v=a.y+x;if(i.usePointStyle){const N={radius:Math.min(d,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},b=r.leftForLtr(p,d)+d/2,C=v+c/2;t.strokeStyle=i.multiKeyBackground,t.fillStyle=i.multiKeyBackground,jk(t,N,b,C),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,jk(t,N,b,C)}else{t.lineWidth=pn(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const N=r.leftForLtr(p,d),b=r.leftForLtr(r.xPlus(p,1),d-2),C=uf(o.borderRadius);Object.values(C).some(w=>w!==0)?(t.beginPath(),t.fillStyle=i.multiKeyBackground,xw(t,{x:N,y:v,w:d,h:c,radius:C}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),xw(t,{x:b,y:v+1,w:d-2,h:c-2,radius:C}),t.fill()):(t.fillStyle=i.multiKeyBackground,t.fillRect(N,v,d,c),t.strokeRect(N,v,d,c),t.fillStyle=o.backgroundColor,t.fillRect(b,v+1,d-2,c-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,a,s){const{body:r}=this,{bodySpacing:i,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:d,boxPadding:u}=s,f=Es(s.bodyFont);let p=f.lineHeight,x=0;const v=mf(s.rtl,this.x,this.width),N=function(_){a.fillText(_,v.x(t.x+x),t.y+p/2),t.y+=p+i},b=v.textAlign(o);let C,w,S,E,k,A,T;for(a.textAlign=o,a.textBaseline="middle",a.font=f.string,t.x=vb(this,b,s),a.fillStyle=s.bodyColor,Ln(this.beforeBody,N),x=l&&b!=="right"?o==="center"?d/2+u:d+2+u:0,E=0,A=r.length;E<A;++E){for(C=r[E],w=this.labelTextColors[E],a.fillStyle=w,Ln(C.before,N),S=C.lines,l&&S.length&&(this._drawColorBox(a,t,E,v,s),p=Math.max(f.lineHeight,c)),k=0,T=S.length;k<T;++k)N(S[k]),p=f.lineHeight;Ln(C.after,N)}x=0,p=f.lineHeight,Ln(this.afterBody,N),t.y-=i}drawFooter(t,a,s){const r=this.footer,i=r.length;let o,l;if(i){const c=mf(s.rtl,this.x,this.width);for(t.x=vb(this,s.footerAlign,s),t.y+=s.footerMarginTop,a.textAlign=c.textAlign(s.footerAlign),a.textBaseline="middle",o=Es(s.footerFont),a.fillStyle=s.footerColor,a.font=o.string,l=0;l<i;++l)a.fillText(r[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+s.footerSpacing}}drawBackground(t,a,s,r){const{xAlign:i,yAlign:o}=this,{x:l,y:c}=t,{width:d,height:u}=s,{topLeft:f,topRight:p,bottomLeft:x,bottomRight:v}=uf(r.cornerRadius);a.fillStyle=r.backgroundColor,a.strokeStyle=r.borderColor,a.lineWidth=r.borderWidth,a.beginPath(),a.moveTo(l+f,c),o==="top"&&this.drawCaret(t,a,s,r),a.lineTo(l+d-p,c),a.quadraticCurveTo(l+d,c,l+d,c+p),o==="center"&&i==="right"&&this.drawCaret(t,a,s,r),a.lineTo(l+d,c+u-v),a.quadraticCurveTo(l+d,c+u,l+d-v,c+u),o==="bottom"&&this.drawCaret(t,a,s,r),a.lineTo(l+x,c+u),a.quadraticCurveTo(l,c+u,l,c+u-x),o==="center"&&i==="left"&&this.drawCaret(t,a,s,r),a.lineTo(l,c+f),a.quadraticCurveTo(l,c,l+f,c),a.closePath(),a.fill(),r.borderWidth>0&&a.stroke()}_updateAnimationTarget(t){const a=this.chart,s=this.$animations,r=s&&s.x,i=s&&s.y;if(r||i){const o=zg[t.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=oB(this,t),c=Object.assign({},o,this._size),d=lB(a,t,c),u=cB(t,c,d,a);(r._to!==u.x||i._to!==u.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(t){const a=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(a);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=gi(a.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;a.enabled&&l&&(t.save(),t.globalAlpha=s,this.drawBackground(i,t,r,a),uJ(t,a.textDirection),i.y+=o.top,this.drawTitle(i,t,a),this.drawBody(i,t,a),this.drawFooter(i,t,a),mJ(t,a.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,a){const s=this._active,r=t.map(({datasetIndex:l,index:c})=>{const d=this.chart.getDatasetMeta(l);if(!d)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:d.data[c],index:c}}),i=!hw(s,r),o=this._positionChanged(r,a);(i||o)&&(this._active=r,this._eventPosition=a,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,a,s=!0){if(a&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],o=this._getActiveElements(t,i,a,s),l=this._positionChanged(o,t),c=a||!hw(o,i)||l;return c&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,a))),c}_getActiveElements(t,a,s,r){const i=this.options;if(t.type==="mouseout")return[];if(!r)return a.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,i.mode,i,s);return i.reverse&&o.reverse(),o}_positionChanged(t,a){const{caretX:s,caretY:r,options:i}=this,o=zg[i.position].call(this,t,a);return o!==!1&&(s!==o.x||r!==o.y)}}var L9e={id:"tooltip",_element:mB,positioners:zg,afterInit(e,t,a){a&&(e.tooltip=new mB({chart:e,options:a}))},beforeUpdate(e,t,a){e.tooltip&&e.tooltip.initialize(a)},reset(e,t,a){e.tooltip&&e.tooltip.initialize(a)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const a={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...a,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",a)}},afterEvent(e,t){if(e.tooltip){const a=t.replay;e.tooltip.handleEvent(t.event,a,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:LJ},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const P9e=(e,t,a,s)=>(typeof t=="string"?(a=e.push(t)-1,s.unshift({index:a,label:t})):isNaN(t)&&(a=null),a);function D9e(e,t,a,s){const r=e.indexOf(t);if(r===-1)return P9e(e,t,a,s);const i=e.lastIndexOf(t);return r!==i?a:r}const O9e=(e,t)=>e===null?null:Ts(Math.round(e),0,t);function fB(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class M9e extends ih{static id="category";static defaults={ticks:{callback:fB}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const a=this._addedLabels;if(a.length){const s=this.getLabels();for(const{index:r,label:i}of a)s[r]===i&&s.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,a){if(_n(t))return null;const s=this.getLabels();return a=isFinite(a)&&s[a]===t?a:D9e(s,t,an(a,t),this._addedLabels),O9e(a,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:a}=this.getUserBounds();let{min:s,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),a||(r=this.getLabels().length-1)),this.min=s,this.max=r}buildTicks(){const t=this.min,a=this.max,s=this.options.offset,r=[];let i=this.getLabels();i=t===0&&a===i.length-1?i:i.slice(t,a+1),this._valueRange=Math.max(i.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=t;o<=a;o++)r.push({value:o});return r}getLabelForValue(t){return fB.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const a=this.ticks;return t<0||t>a.length-1?null:this.getPixelForValue(a[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function I9e(e,t){const a=[],{bounds:r,step:i,min:o,max:l,precision:c,count:d,maxTicks:u,maxDigits:f,includeBounds:p}=e,x=i||1,v=u-1,{min:N,max:b}=t,C=!_n(o),w=!_n(l),S=!_n(d),E=(b-N)/(f+1);let k=h8((b-N)/v/x)*x,A,T,_,I;if(k<1e-14&&!C&&!w)return[{value:N},{value:b}];I=Math.ceil(b/k)-Math.floor(N/k),I>v&&(k=h8(I*k/v/x)*x),_n(c)||(A=Math.pow(10,c),k=Math.ceil(k*A)/A),r==="ticks"?(T=Math.floor(N/k)*k,_=Math.ceil(b/k)*k):(T=N,_=b),C&&w&&i&&V7e((l-o)/i,k/1e3)?(I=Math.round(Math.min((l-o)/k,u)),k=(l-o)/I,T=o,_=l):S?(T=C?o:T,_=w?l:_,I=d-1,k=(_-T)/I):(I=(_-T)/k,Xg(I,Math.round(I),k/1e3)?I=Math.round(I):I=Math.ceil(I));const R=Math.max(g8(k),g8(T));A=Math.pow(10,_n(c)?R:c),T=Math.round(T*A)/A,_=Math.round(_*A)/A;let U=0;for(C&&(p&&T!==o?(a.push({value:o}),T<o&&U++,Xg(Math.round((T+U*k)*A)/A,o,hB(o,E,e))&&U++):T<o&&U++);U<I;++U){const D=Math.round((T+U*k)*A)/A;if(w&&D>l)break;a.push({value:D})}return w&&p&&_!==l?a.length&&Xg(a[a.length-1].value,l,hB(l,E,e))?a[a.length-1].value=l:a.push({value:l}):(!w||_===l)&&a.push({value:_}),a}function hB(e,t,{horizontal:a,minRotation:s}){const r=vl(s),i=(a?Math.sin(r):Math.cos(r))||.001,o=.75*t*(""+e).length;return Math.min(t/i,o)}class $9e extends ih{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,a){return _n(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:a,maxDefined:s}=this.getUserBounds();let{min:r,max:i}=this;const o=c=>r=a?r:c,l=c=>i=s?i:c;if(t){const c=_o(r),d=_o(i);c<0&&d<0?l(0):c>0&&d>0&&o(0)}if(r===i){let c=i===0?1:Math.abs(i*.05);l(i+c),t||o(r-c)}this.min=r,this.max=i}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:a,stepSize:s}=t,r;return s?(r=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),a=a||11),a&&(r=Math.min(a,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,a=t.ticks;let s=this.getTickLimit();s=Math.max(2,s);const r={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:a.precision,step:a.stepSize,count:a.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:a.minRotation||0,includeBounds:a.includeBounds!==!1},i=this._range||this,o=I9e(r,i);return t.bounds==="ticks"&&Y7e(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let a=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){const r=(s-a)/Math.max(t.length-1,1)/2;a-=r,s+=r}this._startValue=a,this._endValue=s,this._valueRange=s-a}getLabelForValue(t){return AD(t,this.chart.options.locale,this.options.ticks.format)}}class R9e extends $9e{static id="linear";static defaults={ticks:{callback:aJ.formatters.numeric}};determineDataLimits(){const{min:t,max:a}=this.getMinMax(!0);this.min=hi(t)?t:0,this.max=hi(a)?a:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),a=t?this.width:this.height,s=vl(this.options.ticks.minRotation),r=(t?Math.sin(s):Math.cos(s))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(a/Math.min(40,i.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const Kj={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},er=Object.keys(Kj);function gB(e,t){return e-t}function pB(e,t){if(_n(t))return null;const a=e._adapter,{parser:s,round:r,isoWeekday:i}=e._parseOpts;let o=t;return typeof s=="function"&&(o=s(o)),hi(o)||(o=typeof s=="string"?a.parse(o,s):a.parse(o)),o===null?null:(r&&(o=r==="week"&&($p(i)||i===!0)?a.startOf(o,"isoWeek",i):a.startOf(o,r)),+o)}function xB(e,t,a,s){const r=er.length;for(let i=er.indexOf(e);i<r-1;++i){const o=Kj[er[i]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((a-t)/(l*o.size))<=s)return er[i]}return er[r-1]}function z9e(e,t,a,s,r){for(let i=er.length-1;i>=er.indexOf(a);i--){const o=er[i];if(Kj[o].common&&e._adapter.diff(r,s,o)>=t-1)return o}return er[a?er.indexOf(a):0]}function U9e(e){for(let t=er.indexOf(e)+1,a=er.length;t<a;++t)if(Kj[er[t]].common)return er[t]}function yB(e,t,a){if(!a)e[t]=!0;else if(a.length){const{lo:s,hi:r}=CD(a,t),i=a[s]>=t?a[s]:a[r];e[i]=!0}}function F9e(e,t,a,s){const r=e._adapter,i=+r.startOf(t[0].value,s),o=t[t.length-1].value;let l,c;for(l=i;l<=o;l=+r.add(l,1,s))c=a[l],c>=0&&(t[c].major=!0);return t}function bB(e,t,a){const s=[],r={},i=t.length;let o,l;for(o=0;o<i;++o)l=t[o],r[l]=o,s.push({value:l,major:!1});return i===0||!a?s:F9e(e,s,r,a)}class vB extends ih{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,a={}){const s=t.time||(t.time={}),r=this._adapter=new $Be._date(t.adapters.date);r.init(a),Kg(s.displayFormats,r.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=a.normalized}parse(t,a){return t===void 0?null:pB(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,a=this._adapter,s=t.time.unit||"day";let{min:r,max:i,minDefined:o,maxDefined:l}=this.getUserBounds();function c(d){!o&&!isNaN(d.min)&&(r=Math.min(r,d.min)),!l&&!isNaN(d.max)&&(i=Math.max(i,d.max))}(!o||!l)&&(c(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&c(this.getMinMax(!1))),r=hi(r)&&!isNaN(r)?r:+a.startOf(Date.now(),s),i=hi(i)&&!isNaN(i)?i:+a.endOf(Date.now(),s)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const t=this.getLabelTimestamps();let a=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(a=t[0],s=t[t.length-1]),{min:a,max:s}}buildTicks(){const t=this.options,a=t.time,s=t.ticks,r=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,o=this.max,l=J7e(r,i,o);return this._unit=a.unit||(s.autoSkip?xB(a.minUnit,this.min,this.max,this._getLabelCapacity(i)):z9e(this,l.length,a.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:U9e(this._unit),this.initOffsets(r),t.reverse&&l.reverse(),bB(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let a=0,s=0,r,i;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?a=1-r:a=(this.getDecimalForValue(t[1])-r)/2,i=this.getDecimalForValue(t[t.length-1]),t.length===1?s=i:s=(i-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;a=Ts(a,0,o),s=Ts(s,0,o),this._offsets={start:a,end:s,factor:1/(a+1+s)}}_generate(){const t=this._adapter,a=this.min,s=this.max,r=this.options,i=r.time,o=i.unit||xB(i.minUnit,a,s,this._getLabelCapacity(a)),l=an(r.ticks.stepSize,1),c=o==="week"?i.isoWeekday:!1,d=$p(c)||c===!0,u={};let f=a,p,x;if(d&&(f=+t.startOf(f,"isoWeek",c)),f=+t.startOf(f,d?"day":o),t.diff(s,a,o)>1e5*l)throw new Error(a+" and "+s+" are too far apart with stepSize of "+l+" "+o);const v=r.ticks.source==="data"&&this.getDataTimestamps();for(p=f,x=0;p<s;p=+t.add(p,l,o),x++)yB(u,p,v);return(p===s||r.bounds==="ticks"||x===1)&&yB(u,p,v),Object.keys(u).sort(gB).map(N=>+N)}getLabelForValue(t){const a=this._adapter,s=this.options.time;return s.tooltipFormat?a.format(t,s.tooltipFormat):a.format(t,s.displayFormats.datetime)}format(t,a){const r=this.options.time.displayFormats,i=this._unit,o=a||r[i];return this._adapter.format(t,o)}_tickFormatFunction(t,a,s,r){const i=this.options,o=i.ticks.callback;if(o)return Qn(o,[t,a,s],this);const l=i.time.displayFormats,c=this._unit,d=this._majorUnit,u=c&&l[c],f=d&&l[d],p=s[a],x=d&&f&&p&&p.major;return this._adapter.format(t,r||(x?f:u))}generateTickLabels(t){let a,s,r;for(a=0,s=t.length;a<s;++a)r=t[a],r.label=this._tickFormatFunction(r.value,a,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const a=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((a.start+s)*a.factor)}getValueForPixel(t){const a=this._offsets,s=this.getDecimalForPixel(t)/a.factor-a.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const a=this.options.ticks,s=this.ctx.measureText(t).width,r=vl(this.isHorizontal()?a.maxRotation:a.minRotation),i=Math.cos(r),o=Math.sin(r),l=this._resolveTickFontOptions(0).size;return{w:s*i+l*o,h:s*o+l*i}}_getLabelCapacity(t){const a=this.options.time,s=a.displayFormats,r=s[a.unit]||s.millisecond,i=this._tickFormatFunction(t,0,bB(this,[t],this._majorUnit),r),o=this._getLabelSize(i),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let t=this._cache.data||[],a,s;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(a=0,s=r.length;a<s;++a)t=t.concat(r[a].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let a,s;if(t.length)return t;const r=this.getLabels();for(a=0,s=r.length;a<s;++a)t.push(pB(this,r[a]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return eJ(t.sort(gB))}}function wb(e,t,a){let s=0,r=e.length-1,i,o,l,c;a?(t>=e[s].pos&&t<=e[r].pos&&({lo:s,hi:r}=iu(e,"pos",t)),{pos:i,time:l}=e[s],{pos:o,time:c}=e[r]):(t>=e[s].time&&t<=e[r].time&&({lo:s,hi:r}=iu(e,"time",t)),{time:i,pos:l}=e[s],{time:o,pos:c}=e[r]);const d=o-i;return d?l+(c-l)*(t-i)/d:l}class oVe extends vB{static id="timeseries";static defaults=vB.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),a=this._table=this.buildLookupTable(t);this._minPos=wb(a,this.min),this._tableRange=wb(a,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:a,max:s}=this,r=[],i=[];let o,l,c,d,u;for(o=0,l=t.length;o<l;++o)d=t[o],d>=a&&d<=s&&r.push(d);if(r.length<2)return[{time:a,pos:0},{time:s,pos:1}];for(o=0,l=r.length;o<l;++o)u=r[o+1],c=r[o-1],d=r[o],Math.round((u+c)/2)!==d&&i.push({time:d,pos:o/(l-1)});return i}_generate(){const t=this.min,a=this.max;let s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(a)||s.length===1)&&s.push(a),s.sort((r,i)=>r-i)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const a=this.getDataTimestamps(),s=this.getLabelTimestamps();return a.length&&s.length?t=this.normalize(a.concat(s)):t=a.length?a:s,t=this._cache.all=t,t}getDecimalForValue(t){return(wb(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const a=this._offsets,s=this.getDecimalForPixel(t)/a.factor-a.end;return wb(this._table,s*this._tableRange+this._minPos,!0)}}const PJ="label";function wB(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function B9e(e,t){const a=e.options;a&&t&&Object.assign(a,t)}function DJ(e,t){e.labels=t}function OJ(e,t,a=PJ){const s=[];e.datasets=t.map(r=>{const i=e.datasets.find(o=>o[a]===r[a]);return!i||!r.data||s.includes(i)?{...r}:(s.push(i),Object.assign(i,r),i)})}function H9e(e,t=PJ){const a={labels:[],datasets:[]};return DJ(a,e.labels),OJ(a,e.datasets,t),a}function G9e(e,t){const{height:a=150,width:s=300,redraw:r=!1,datasetIdKey:i,type:o,data:l,options:c,plugins:d=[],fallbackContent:u,updateMode:f,...p}=e,x=h.useRef(null),v=h.useRef(null),N=()=>{x.current&&(v.current=new Qj(x.current,{type:o,data:H9e(l,i),options:c&&{...c},plugins:d}),wB(t,v.current))},b=()=>{wB(t,null),v.current&&(v.current.destroy(),v.current=null)};return h.useEffect(()=>{!r&&v.current&&c&&B9e(v.current,c)},[r,c]),h.useEffect(()=>{!r&&v.current&&DJ(v.current.config.data,l.labels)},[r,l.labels]),h.useEffect(()=>{!r&&v.current&&l.datasets&&OJ(v.current.config.data,l.datasets,i)},[r,l.datasets]),h.useEffect(()=>{v.current&&(r?(b(),setTimeout(N)):v.current.update(f))},[r,c,l.labels,l.datasets,f]),h.useEffect(()=>{v.current&&(b(),setTimeout(N))},[o]),h.useEffect(()=>(N(),()=>b()),[]),n.jsx("canvas",{ref:x,role:"img",height:a,width:s,...p,children:u})}const W9e=h.forwardRef(G9e);function $D(e,t){return Qj.register(t),h.forwardRef((a,s)=>n.jsx(W9e,{...a,ref:s,type:e}))}const q9e=$D("line",MBe),V9e=$D("bar",PBe),Y9e=$D("pie",IBe);Qj.register(M9e,R9e,g9e,l9e,c9e,ZHe,j9e,L9e,w9e);const MJ=e=>n.jsx(Zn,{...e}),Q9e=e=>n.jsx(UH,{...e}),K9e=e=>n.jsx(Xp,{...e}),X9e=e=>n.jsx(ba,{...e}),IJ=e=>n.jsx(xn,{...e}),Z9e=e=>n.jsx($de,{...e}),J9e=[{icon:MJ,title:"Total Contacts",value:128,color:"text-blue-600",bgColor:"bg-blue-50"},{icon:IJ,title:"Emails Sent",value:450,color:"text-purple-600",bgColor:"bg-purple-50"},{icon:K9e,title:"Active Campaigns",value:9,color:"text-green-600",bgColor:"bg-green-50"},{icon:Q9e,title:"Revenue",value:125e3,color:"text-yellow-600",bgColor:"bg-yellow-50"}],eGe=[{name:"Emma Watty",company:"Tech Interaction Inc.",assignedBy:"Alice Smith",source:"Website",date:"Oct 10, 2:10 PM"},{name:"John Johnny",company:"Capital Business Co.",assignedBy:"Bob Johnson",source:"Referral",date:"Oct 9, 12:00 AM"},{name:"Annie Arnty",company:"Dynamic Systems Inc.",assignedBy:"Catherine Lee",source:"Trade Show",date:"Oct 8, 1:25 PM"},{name:"James Wilson",company:"Global Services LLC",assignedBy:"David Kim",source:"Cold Call",date:"Oct 7, 11:15 AM"}],tGe={labels:["Week 1","Week 2","Week 3","Week 4"],datasets:[{label:"Leads",data:[50,75,60,90],backgroundColor:"rgba(96, 165, 250, 0.6)",borderColor:"rgba(96, 165, 250, 1)",borderWidth:1},{label:"Conversions",data:[10,20,15,25],backgroundColor:"rgba(34, 197, 94, 0.6)",borderColor:"rgba(34, 197, 94, 1)",borderWidth:1}]},nGe={responsive:!0,plugins:{legend:{position:"top",labels:{color:"#374151"}},title:{display:!0,color:"#111827",font:{size:18}}}},aGe={labels:["Leads","Conversions"],datasets:[{label:"Leads Status",data:[75,25],backgroundColor:["rgba(96, 165, 250, 0.6)","rgba(34, 197, 94, 0.6)"],borderColor:["rgba(96, 165, 250, 1)","rgba(34, 197, 94, 1)"],borderWidth:1}]},sGe={responsive:!0,plugins:{legend:{position:"top",labels:{color:"#374151"}},title:{display:!0,color:"#111827",font:{size:18}}}},rGe=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},iGe=()=>{const e=[{icon:MJ,label:"New Contact"},{icon:IJ,label:"New Campaign"},{icon:X9e,label:"New Task"},{icon:Z9e,label:"New Leads"}];return n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 flex flex-col md:flex-row items-center space-y-3 md:space-y-0 md:space-x-4",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 py-2 flex-grow focus-within:ring-2 focus-within:ring-indigo-500 transition w-full md:max-w-3xl",children:[n.jsx(Ht,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search Contacts, Leads, or Campaigns...",className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"flex space-x-3 md:ml-auto",children:e.map((t,a)=>n.jsxs("div",{className:"relative group",children:[n.jsx("button",{className:"p-2 text-gray-500 hover:text-gray-900 transition rounded-full hover:bg-gray-100 focus:outline-none",children:n.jsx(t.icon,{size:20})}),n.jsx("span",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-1 bg-gray-800 text-white text-xs rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition",children:t.label})]},a))})]})},oGe=({icon:e,title:t,value:a,color:s,bgColor:r})=>n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-lg transition duration-300 hover:shadow-xl hover:ring-2 hover:ring-blue-500 cursor-pointer",onClick:()=>console.log(`Clicked metric card: ${t}`),children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:22})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]}),lGe=({name:e,company:t,assignedBy:a,source:s,date:r})=>{const{text:i,bg:o}=rGe(s);return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 px-2 -mx-2 rounded-md",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800",children:e}),n.jsx("p",{className:"text-xs text-gray-500",children:t}),a&&n.jsxs("p",{className:"text-xs text-gray-500",children:["Assigned by:"," ",n.jsx("span",{className:"font-semibold text-gray-700",children:a})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-400",children:r}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${i} ${o} px-2 py-0.5 rounded-full`,children:s})]})]})})},cGe=({title:e,children:t})=>n.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-md flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:e}),n.jsx("span",{className:"text-sm text-indigo-500 cursor-pointer hover:underline",children:"See All"})]}),t]}),dGe=({title:e,chartData:t,chartOptions:a})=>{const[s,r]=h.useState("bar"),i=s==="pie"?aGe:t,o=s==="pie"?sGe:a,l=s==="line"?q9e:s==="pie"?Y9e:V9e,c=s==="pie"?250:300;return n.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md flex flex-col hover:shadow-lg transition",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:e}),n.jsxs("select",{value:s,onChange:d=>r(d.target.value),className:"border border-gray-300 rounded-md px-2 py-1 text-sm",children:[n.jsx("option",{value:"bar",children:"Bar"}),n.jsx("option",{value:"line",children:"Line"}),n.jsx("option",{value:"pie",children:"Pie"})]})]}),n.jsx("div",{className:"w-full flex justify-center",style:{height:c},children:n.jsx(l,{data:i,options:o})})]})};function uGe(){const{user:e}=Xt();return h.useEffect(()=>{document.title="Dashboard | Sari-Sari CRM"},[]),n.jsx("div",{className:"min-h-screen pt-5 pb-10 font-sans",children:n.jsxs("main",{className:"max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"text-xl font-bold mb-4",children:["Welcome back, ",e?.name||"Marketing","! Heres your marketing overview."]}),n.jsx(iGe,{}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6",children:J9e.map(t=>n.jsx(oGe,{...t},t.title))}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[n.jsx(dGe,{title:"Leads & Conversions",chartData:tGe,chartOptions:nGe}),n.jsx(cGe,{title:"Latest Leads",children:eGe.map((t,a)=>n.jsx(lGe,{...t},a))})]})]})})}function mGe(){h.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[e,t]=h.useState(null),[a,s]=h.useState(""),[r,i]=h.useState("All Statuses"),o=h.useMemo(()=>[{company:"Acme Corporation",url:"https://acme.com",status:"CUSTOMER",industry:"Technology",territory:"North Region",phone_number:"+1-555-0100",billing_address:"123 Main St, North City",shipping_address:"456 Elm St, North City",created_by:"John Appleseed",created_date:"2024-01-10",last_updated:"2025-09-25 14:30"},{company:"Beta Solutions",url:"https://beta.com",status:"PROSPECT",industry:"Finance",territory:"South Region",phone_number:"+1-555-0200",billing_address:"789 Pine St, South City",shipping_address:"101 Maple St, South City",created_by:"Jane Doe",created_date:"2024-03-05",last_updated:"2025-10-01 10:15"},{company:"Gamma Partners",url:"https://gamma.com",status:"PARTNER",industry:"Retail",territory:"East Region",phone_number:"+1-555-0300",billing_address:"234 Oak St, East City",shipping_address:"345 Birch St, East City",created_by:"Alice Smith",created_date:"2023-12-20",last_updated:"2025-08-15 09:45"},{company:"Delta Corp",url:"https://delta.com",status:"INACTIVE",industry:"Logistics",territory:"West Region",phone_number:"+1-555-0400",billing_address:"987 Cedar St, West City",shipping_address:"654 Pine St, West City",created_by:"Bob Johnson",created_date:"2023-11-15",last_updated:"2025-06-12 11:20"}],[]),l=f=>t(f),c=()=>t(null),d=h.useMemo(()=>[{title:"Total Accounts",value:o.length,color:"text-yellow-600",bgColor:"bg-yellow-50",icon:Zn},{title:"Customers",value:o.filter(f=>f.status==="CUSTOMER").length,color:"text-green-600",bgColor:"bg-green-50",icon:Ao},{title:"Prospects",value:o.filter(f=>f.status==="PROSPECT").length,color:"text-purple-600",bgColor:"bg-purple-50",icon:Gn},{title:"Partners",value:o.filter(f=>f.status==="PARTNER").length,color:"text-pink-600",bgColor:"bg-pink-50",icon:en},{title:"Active",value:o.filter(f=>f.status==="CUSTOMER"||f.status==="PARTNER").length,color:"text-blue-600",bgColor:"bg-blue-50",icon:Ao},{title:"Inactive",value:o.filter(f=>f.status==="INACTIVE").length,color:"text-gray-600",bgColor:"bg-gray-50",icon:To},{title:"Former",value:o.filter(f=>f.status==="FORMER").length,color:"text-orange-600",bgColor:"bg-orange-50",icon:To}],[o]);if(e)return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("button",{onClick:c,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-4 sm:mb-6 cursor-pointer",children:[n.jsx(Ru,{className:"mr-1 w-4 h-4 sm:w-5 sm:h-5"})," Back"]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:n.jsx("div",{children:n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800 flex items-center gap-2",children:[e.company,n.jsx("span",{className:`inline-block text-xs px-2 py-0.5 rounded ${e.status==="CUSTOMER"?"bg-green-600 text-white":e.status==="PROSPECT"?"bg-purple-600 text-white":e.status==="PARTNER"?"bg-pink-600 text-white":"bg-gray-500 text-white"}`,children:e.status})]})})})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 sm:p-6 shadow-sm overflow-x-auto",children:[n.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4 text-gray-800",children:"Account Details"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm text-gray-700",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Website:"})," ",n.jsx("br",{}),n.jsx("a",{href:e.url,className:"text-blue-600 hover:underline break-words",children:e.url})]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Industry:"})," ",n.jsx("br",{}),e.industry]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Territory:"})," ",n.jsx("br",{}),e.territory]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Phone Number:"})," ",n.jsx("br",{}),e.phone_number]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Billing Address:"})," ",n.jsx("br",{}),e.billing_address]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Shipping Address:"})," ",n.jsx("br",{}),e.shipping_address]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Created By:"})," ",n.jsx("br",{}),e.created_by," on ",e.created_date]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Last Updated:"})," ",n.jsx("br",{}),e.last_updated]})]})]})]});const u=o.filter(f=>{const p=f.company.toLowerCase().includes(a.toLowerCase())||f.url.toLowerCase().includes(a.toLowerCase())||f.industry.toLowerCase().includes(a.toLowerCase())||f.territory.toLowerCase().includes(a.toLowerCase())||f.phone_number.toLowerCase().includes(a.toLowerCase()),x=r==="All Statuses"||r==="Active"&&(f.status==="CUSTOMER"||f.status==="PARTNER")||r==="Inactive"&&f.status==="INACTIVE"||r==="Former"&&f.status==="FORMER"||f.status.toLowerCase()===r.toLowerCase();return p&&x});return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-sans",children:[n.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Zn,{className:"mr-2 text-blue-600"}),"Accounts List"]})}),n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 xl:grid-cols-4 md:grid-cols-4 gap-4 mb-6",children:d.map(f=>n.jsx(fGe,{...f},f.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Ht,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search by company, website, industry, territory, or phone...",value:a,onChange:f=>s(f.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:r,onChange:f=>i(f.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"All Statuses"}),n.jsx("option",{children:"Customer"}),n.jsx("option",{children:"Prospect"}),n.jsx("option",{children:"Partner"}),n.jsx("option",{children:"Active"}),n.jsx("option",{children:"Inactive"}),n.jsx("option",{children:"Former"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Company"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Industry"}),n.jsx("th",{className:"py-3 px-4",children:"Territory"}),n.jsx("th",{className:"py-3 px-4",children:"Phone"})]})}),n.jsxs("tbody",{children:[u.map((f,p)=>n.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>l(f),children:[n.jsx("td",{className:"py-3 px-4 break-words",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-words",children:f.company}),n.jsx("div",{className:"text-gray-500 text-xs break-words",children:f.url})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${f.status==="CUSTOMER"?"bg-green-100 text-green-700":f.status==="PROSPECT"?"bg-purple-100 text-purple-700":f.status==="PARTNER"?"bg-pink-100 text-pink-700":f.status==="INACTIVE"?"bg-gray-100 text-gray-700":"bg-orange-100 text-orange-700"}`,children:f.status})}),n.jsx("td",{className:"py-3 px-4 break-words",children:f.industry}),n.jsx("td",{className:"py-3 px-4 break-words",children:f.territory}),n.jsxs("td",{className:"py-3 px-4 flex items-center space-x-2 break-words",children:[n.jsx(At,{className:"text-gray-500"}),n.jsx("span",{children:f.phone_number})]})]},p)),u.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"py-4 text-center text-gray-500",children:"No accounts match your search/filter."})})]})]})})]})}const fGe=({icon:e,title:t,value:a,color:s,bgColor:r})=>n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md hover:shadow-lg hover:ring-2 hover:ring-blue-500 cursor-pointer transition-all duration-300",onClick:()=>console.log(`Clicked: ${t}`),children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:22})}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]});function hGe(){h.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[e,t]=h.useState(!1),[a,s]=h.useState(null),[r,i]=h.useState(!1),[o,l]=h.useState(""),[c,d]=h.useState("All Contacts"),[u,f]=h.useState([{id:1,name:"John Smith",title:"Marketing Director",account:"Acme Corporation",email:"john.smith@acme.com",phone1:"+1-555-0101",phone2:"+1-555-0102",department:"Marketing",assigned:"Jane Sales",created:"1/10/2024",mobile:"09217229846",workPhone:"(555) 123-4567",createdBy:"John Appleseed",lastUpdated:"2025-09-21 15:30",notes:"Key marketing partner for Q4 campaigns."}]),[p,x]=h.useState({id:null,name:"",email:"",workPhone:"",title:"",department:"",phone1:"",phone2:"",account:"",assigned:"",notes:""}),v=k=>{k.target.id==="modalBackdrop"&&t(!1)},N=k=>{s(k)},b=()=>{s(null)},C=()=>{i(!1),x({id:null,name:"",email:"",workPhone:"",title:"",department:"",phone1:"",phone2:"",account:"",assigned:"",notes:""}),t(!0)},w=(k,A)=>{A.stopPropagation(),i(!0),x(k),t(!0)},S=k=>{const{name:A,value:T}=k.target;x(_=>({..._,[A]:T}))},E=k=>{if(k.preventDefault(),r)f(A=>A.map(T=>T.id===p.id?{...p}:T));else{const A={...p,id:Date.now(),created:new Date().toLocaleDateString(),createdBy:"Admin User"};f(T=>[...T,A])}t(!1)};return a?n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[n.jsxs("button",{onClick:b,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-4 sm:mb-6 cursor-pointer",children:[n.jsx(Ru,{className:"mr-1 w-4 h-4 sm:w-5 sm:h-5"})," Back"]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:a.account}),n.jsx("span",{className:"mt-1 sm:mt-0 bg-blue-600 text-white text-xs sm:text-sm px-2 py-0.5 rounded w-fit",children:"Active"})]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0 mt-3 sm:mt-0",children:n.jsxs("button",{className:"w-full sm:w-auto bg-gray-800 text-white px-5 py-2 rounded-md hover:bg-gray-900 transition flex items-center gap-2",children:[n.jsx(Fl,{}),"Export"]})})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 sm:p-6 w-full max-w-full lg:max-w-6xl shadow-sm overflow-x-auto mx-auto",children:[n.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4 text-gray-800",children:"Contact Details"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 text-sm text-gray-700",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Primary Contact:"})," ",n.jsx("br",{}),a.name]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Email:"})," ",n.jsx("br",{}),a.email]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Created By:"})," ",n.jsx("br",{}),a.createdBy," on ",a.created]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Title:"})," ",n.jsx("br",{}),a.title]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Assigned To:"})," ",n.jsx("br",{}),a.assigned]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Work Phone:"})," ",n.jsx("br",{}),a.workPhone]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Account:"})," ",n.jsx("br",{}),a.account]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Mobile Phone:"})," ",n.jsx("br",{}),a.phone1]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Last Updated:"})," ",n.jsx("br",{}),a.lastUpdated]})]}),n.jsxs("div",{className:"mt-6 border-gray-200 pt-4",children:[n.jsx("h3",{className:"text-md sm:text-lg font-semibold text-gray-800 mb-2",children:"Notes"}),n.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:a.notes?a.notes:"No additional notes were provided for this contact."})]})]})]}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Zn,{className:"mr-2 text-blue-600"})," Contacts Management"]}),n.jsx("button",{onClick:C,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base transition",children:" Add Contact"})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Ht,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search Contacts...",value:o,onChange:k=>l(k.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:c,onChange:k=>d(k.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"All Contacts"}),n.jsx("option",{children:"Option 1"}),n.jsx("option",{children:"Option 2"}),n.jsx("option",{children:"Option 3"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-[600px] w-full border border-gray-200 rounded-lg bg-white shadow-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-sm text-gray-600",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact Info"}),n.jsx("th",{className:"py-3 px-4",children:"Department"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Created"}),n.jsx("th",{className:"py-3 px-4 text-center",children:"Actions"})]})}),n.jsx("tbody",{className:"text-xs text-gray-700",children:u.map((k,A)=>n.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>N(k),children:[n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all",children:k.name}),n.jsx("div",{className:"text-xs text-gray-500",children:k.title})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ex,{className:"text-gray-500"}),n.jsx("span",{children:k.account})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Xn,{className:"text-gray-500"}),n.jsx("span",{children:k.email})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(At,{className:"text-gray-500"}),n.jsx("span",{children:k.phone1})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(At,{className:"text-gray-500"}),n.jsx("span",{children:k.phone2})]})]})}),n.jsx("td",{className:"py-3 px-4",children:k.department}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(en,{className:"text-gray-500"}),n.jsx("span",{children:k.assigned})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ct,{className:"text-gray-500"}),n.jsx("span",{children:k.created})]})}),n.jsx("td",{className:"py-3 px-4 text-center",children:n.jsx("div",{className:"flex justify-center",children:n.jsx("button",{onClick:T=>w(k,T),className:"text-blue-500 hover:text-blue-700",children:n.jsx(ia,{})})})})]},A))})]})}),e&&n.jsx("div",{id:"modalBackdrop",onClick:v,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh]",onClick:k=>k.stopPropagation(),children:[n.jsx("button",{onClick:()=>t(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 text-center",children:r?"Edit Contact":"Add New Contact"}),n.jsxs("form",{onSubmit:E,className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Name"}),n.jsx("input",{type:"text",name:"name",value:p.name,onChange:S,placeholder:"Full name",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Email"}),n.jsx("input",{type:"email",name:"email",value:p.email,onChange:S,placeholder:"example@email.com",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),n.jsx("input",{type:"text",name:"workPhone",value:p.workPhone,onChange:S,placeholder:"09 --- --- ---",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Title"}),n.jsx("input",{type:"text",name:"title",value:p.title,onChange:S,placeholder:"Job title",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),n.jsx("input",{type:"text",name:"department",value:p.department,onChange:S,placeholder:"Marketing / Sales",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Phone Number 1"}),n.jsx("input",{type:"text",name:"phone1",value:p.phone1,onChange:S,placeholder:"09 --- --- ---",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Account"}),n.jsx("input",{type:"text",name:"account",value:p.account,onChange:S,placeholder:"Company name",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Assign To"}),n.jsxs("select",{name:"assigned",value:p.assigned,onChange:S,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",children:[n.jsx("option",{value:"",children:"Assign To"}),n.jsx("option",{value:"Smith",children:"Smith"}),n.jsx("option",{value:"Doe",children:"Doe"}),n.jsx("option",{value:"Jane Sales",children:"Jane Sales"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Phone Number 2"}),n.jsx("input",{type:"text",name:"phone2",value:p.phone2,onChange:S,placeholder:"09 --- --- ---",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 md:col-span-3",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),n.jsx("textarea",{name:"notes",value:p.notes,onChange:S,placeholder:"Additional details...",rows:3,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 md:col-span-3",children:[n.jsx("button",{type:"button",onClick:()=>t(!1),className:"px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 text-white bg-blue-600 border border-blue-500 rounded hover:bg-blue-700 transition",children:"Save Contact"})]})]})]})})]})}const Nb={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},Wa=({label:e,value:t,name:a,className:s=""})=>n.jsxs("div",{className:`flex flex-col ${s}`,children:[n.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),n.jsx("input",{type:"text",name:a,defaultValue:t,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),gGe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(Wa,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),n.jsx(Wa,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),n.jsx(Wa,{label:"Industry",name:"industry",value:e.industry})]}),n.jsx(Wa,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),n.jsx(Wa,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),pGe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Wa,{label:"First Name",name:"firstName",value:e.firstName}),n.jsx(Wa,{label:"Last Name",name:"lastName",value:e.lastName}),n.jsx(Wa,{label:"Department",name:"department",value:e.department}),n.jsx(Wa,{label:"Title",name:"title",value:e.title}),n.jsx(Wa,{label:"Work Phone",name:"workPhone",value:e.workPhone}),n.jsx(Wa,{label:"Email",name:"email",value:e.email}),n.jsx(Wa,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),n.jsx(Wa,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),xGe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Wa,{label:"Deal Name",name:"dealName",value:e.dealName}),n.jsxs("div",{className:"flex",children:[n.jsx(Wa,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),n.jsx("div",{className:"flex flex-col justify-end ml-1",children:n.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),n.jsx(Wa,{label:"Stage",name:"stage",value:e.stage}),n.jsx(Wa,{label:"Territory",name:"territory",value:e.territory})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Wa,{label:"Description",name:"description",value:e.description}),n.jsx(Wa,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function $J({isOpen:e,onClose:t}){const[a,s]=h.useState(1),r=3;if(!e)return null;const i=()=>{a<r?s(a+1):(t(),s(1))},o=()=>{a>1&&s(a-1)},l=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],c=()=>{switch(a){case 1:return n.jsx(gGe,{data:Nb});case 2:return n.jsx(pGe,{data:Nb});case 3:return n.jsx(xGe,{data:Nb});default:return null}};return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:Nb.accountName})]}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:n.jsx(VN,{className:"w-6 h-6"})})]}),n.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:l.map(d=>n.jsx("button",{onClick:()=>s(d.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${a===d.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:d.name},d.id))}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c()}),n.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[a>1&&n.jsx("button",{onClick:o,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),a<r?n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}const yGe={name:"Josh Vergara",status:"New",company:"Josh Inc.",title:"CEO",department:"Administration",email:"josh@joshinc.com",territory:"Cavite",assignedTo:"Admin",createdBy:"Admin",workPhone:"09253677323",phone1:"09253677323",phone2:"0907452874",source:"Website",addressLine1:"#1 Pilar Las Pinas",addressLine2:"Suite 400",city:"Las Pinas",state:"Metro Manila",zipCode:"1740",notes:"Interested in our premium plan."};function RJ({lead:e=yGe,onBack:t}){const[a,s]=h.useState(!1);return e?n.jsxs("div",{className:"p-4 sm:p-6 md:p-8 font-inter min-h-screen",children:[n.jsxs("button",{onClick:t,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-4 sm:mb-6 cursor-pointer",children:[n.jsx(Ru,{className:"mr-1 w-4 h-4 sm:w-5 sm:h-5"})," Back"]}),n.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-6 sm:mb-8 gap-2 sm:gap-4",children:n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold",children:e.name}),n.jsx("span",{className:"bg-blue-100 text-blue-700 text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full",children:e.status}),n.jsx("div",{className:"flex flex-wrap items-center ml-0 sm:ml-1",children:n.jsx("button",{onClick:()=>s(!0),className:"bg-green-600 hover:bg-green-700 text-white px-3 sm:px-5 py-1.5 sm:py-2 rounded-lg font-medium text-xs sm:text-sm",children:"Convert"})})]})}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200 mb-6 sm:mb-8",children:[n.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-4 sm:mb-6",children:"Lead Details"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Name:"}),n.jsx("p",{children:e.name})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:e.company})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Title:"}),n.jsx("p",{children:e.title})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:e.department})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:e.email})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:e.territory})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assign To:"}),n.jsx("p",{children:e.assignedTo})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:e.createdBy})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:e.workPhone})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:e.phone1})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:e.phone2})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Source:"}),n.jsx("p",{children:e.source})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Address:"}),n.jsxs("p",{className:"text-sm text-gray-700 leading-relaxed",children:[e.addressLine1," ",n.jsx("br",{}),e.addressLine2," ",n.jsx("br",{}),e.city,", ",e.state," ",e.zipCode]})]}),n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),n.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:e.notes||"No notes available."})]})]}),n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-4 sm:mb-6",children:"Related Activities"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 sm:gap-8 text-sm",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Tasks (2)"}),n.jsxs("div",{className:"space-y-1 text-gray-700",children:[n.jsx("p",{children:"Schedule follow-up call"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Due: 2025-09-15 | In Progress"}),n.jsx("p",{children:"Schedule follow-up call"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Due: 2025-09-18 | In Progress"})]}),n.jsx("a",{href:"#",className:"text-blue-600 hover:underline text-xs font-medium mt-2 inline-block",children:"View All Tasks"})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Calls (2)"}),n.jsxs("div",{className:"space-y-1 text-gray-700",children:[n.jsx("p",{children:"Initial discovery call"}),n.jsx("p",{className:"text-xs text-gray-500",children:"2025-09-10 | Completed"}),n.jsx("p",{children:"Initial discovery call"}),n.jsx("p",{className:"text-xs text-gray-500",children:"2025-09-11 | Completed"})]}),n.jsx("a",{href:"#",className:"text-blue-600 hover:underline text-xs font-medium mt-2 inline-block",children:"View All Calls"})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Meeting (0)"}),n.jsx("p",{className:"text-gray-500",children:"No meetings associated."}),n.jsx("a",{href:"#",className:"text-blue-600 hover:underline text-xs font-medium mt-2 inline-block",children:"View All Meetings"})]})]})]}),n.jsx($J,{isOpen:a,onClose:()=>s(!1)})]}):null}const bGe=Ff.all(),UA=bGe.map(e=>({code:`+${e.countryCallingCode}`,name:e.countryCode}));function vGe(){const[e,t]=h.useState(null),[a,s]=h.useState(!1),[r,i]=h.useState(null),[o,l]=h.useState([{id:1,first_name:"Jane",last_name:"Doe"},{id:2,first_name:"John",last_name:"Smith"},{id:3,first_name:"Mary",last_name:"Johnson"}]),[c,d]=h.useState([{id:1,name:"Joshua Vergara",status:"Qualified",title:"Marketing Director",email:"sarah.williams@innovateco.com",phone1:"9271229484",phone2:"---------",workPhone:"999123-4567",work_ccode:"+63",m1_ccode:"+63",m2_ccode:"+63",territory:"East Coast",department:"Marketing",company:"Innovate Co.",createdBy:"John Appleseed",createdAt:"2025-09-10 09:30",lastUpdated:"2025-09-12 14:45",source:"Website",assignedTo:"Jane Doe",address:"123 Main St, City, Country",notes:"Important client"}]),[u,f]=h.useState({work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:""});h.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const p=T=>t(T),x=()=>t(null),[v,N]=h.useState(""),[b,C]=h.useState("All Accounts"),w=()=>{s(!1),i(null),f({work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:""})},S=T=>{i(T),s(!0),f({work_ccode:T.work_ccode||"+63",work_phone:T.workPhone||"",m1_ccode:T.m1_ccode||"+63",mobile_phone_1:T.phone1||"",m2_ccode:T.m2_ccode||"+63",mobile_phone_2:T.phone2||""})},E=T=>{window.confirm("Are you sure you want to delete this lead?")&&d(c.filter(_=>_.id!==T))},k=T=>{const{name:_,value:I}=T.target;f(R=>({...R,[_]:I}))},A=T=>{T.preventDefault();const _=new FormData(T.target),I=Object.fromEntries(_.entries());I.name=`${I.firstName} ${I.lastName}`,I.assignedTo=o.find(R=>R.id.toString()===I.assignedTo)?.first_name+" "+o.find(R=>R.id.toString()===I.assignedTo)?.last_name,I.work_ccode=u.work_ccode,I.workPhone=u.work_phone,I.m1_ccode=u.m1_ccode,I.phone1=u.mobile_phone_1,I.m2_ccode=u.m2_ccode,I.phone2=u.mobile_phone_2,d(r?c.map(R=>R.id===r.id?{...R,...I}:R):[...c,{...I,id:c.length+1,createdAt:new Date().toISOString(),lastUpdated:new Date().toISOString()}]),w()};return e?n.jsx(RJ,{lead:e,onBack:x}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-6 gap-3",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Gn,{className:"mr-2 text-blue-600"})," Leads"]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full sm:w-auto",children:[n.jsxs("button",{className:"flex items-center justify-center border border-tertiary text-tertiary px-4 py-2 gap-2 rounded-md hover:bg-gray-800 hover:text-white transition w-full sm:w-auto",children:[n.jsx(Fl,{})," Download"]}),n.jsx("button",{onClick:()=>s(!0),className:"flex items-center justify-center bg-black text-white px-4 py-2 rounded-md hover:bg-gray-800 transition w-full sm:w-auto",children:" Add Leads"})]})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Ht,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search Leads...",value:v,onChange:T=>N(T.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:b,onChange:T=>C(T.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"All Leads"}),n.jsx("option",{children:"New"}),n.jsx("option",{children:"Contacted"}),n.jsx("option",{children:"Qualified"}),n.jsx("option",{children:"Converted"}),n.jsx("option",{children:"Lost"})]})})]}),n.jsxs("div",{className:"bg-white shadow-sm overflow-x-auto rounded-md border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-9 min-w-[800px] bg-gray-100 font-bold text-gray-600 text-sm px-4 py-3",children:[n.jsx("div",{children:"Name"}),n.jsx("div",{children:"Account"}),n.jsx("div",{children:"Title"}),n.jsx("div",{children:"Department"}),n.jsx("div",{children:"Email"}),n.jsx("div",{children:"Work Phone"}),n.jsx("div",{children:"Assigned To"}),n.jsx("div",{children:"Updated"}),n.jsx("div",{className:"text-center",children:"Actions"})]}),c.map(T=>n.jsxs("div",{className:"grid grid-cols-9 min-w-[800px] px-4 py-3 text-xs hover:bg-gray-100 transition cursor-pointer gap-x-4",onClick:()=>p(T),children:[n.jsx("div",{className:"truncate",children:T.name}),n.jsx("div",{className:"truncate",children:T.company}),n.jsx("div",{className:"truncate",children:T.title}),n.jsx("div",{className:"truncate",children:T.department}),n.jsx("div",{className:"truncate",children:T.email}),n.jsxs("div",{className:"truncate",children:[T.work_ccode," ",T.workPhone]}),n.jsx("div",{className:"truncate",children:T.assignedTo}),n.jsx("div",{className:"truncate",children:T.lastUpdated}),n.jsxs("div",{className:"flex justify-center space-x-2",children:[n.jsx("button",{className:"text-blue-500 hover:text-blue-700",onClick:_=>{_.stopPropagation(),S(T)},children:n.jsx(ia,{})}),n.jsx("button",{className:"text-red-500 hover:text-red-700",onClick:_=>{_.stopPropagation(),E(T.id)},children:n.jsx(Ut,{})})]})]},T.id))]}),a&&n.jsx("div",{id:"modalBackdrop",onClick:w,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-3xl rounded-xl shadow-lg p-5 sm:p-6 relative border border-gray-200 my-6 max-h-[90vh] overflow-y-auto",onClick:T=>T.stopPropagation(),children:[n.jsx("button",{onClick:w,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:n.jsx(Vt,{size:20})}),n.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:r?"Edit Lead":"Add New Lead"}),n.jsxs("form",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 text-xs sm:text-sm",onSubmit:A,children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"First Name"}),n.jsx("input",{name:"firstName",type:"text",placeholder:"Joe",defaultValue:r?r.name.split(" ")[0]:"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",required:!0})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Last Name"}),n.jsx("input",{name:"lastName",type:"text",placeholder:"Smith",defaultValue:r?r.name.split(" ")[1]:"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",required:!0})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Company"}),n.jsx("input",{name:"company",type:"text",placeholder:"ABC Company",defaultValue:r?.company||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Title"}),n.jsx("input",{name:"title",type:"text",placeholder:"ABC Agenda",defaultValue:r?.title||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Department"}),n.jsx("input",{name:"department",type:"text",placeholder:"Sales",defaultValue:r?.department||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Email"}),n.jsx("input",{name:"email",type:"text",placeholder:"abc@gmail.com",defaultValue:r?.email||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Work Phone"}),n.jsxs("div",{className:"border border-gray-300 rounded-md flex flex-row w-full gap-1",children:[n.jsx("select",{name:"work_ccode",value:u.work_ccode,onChange:k,className:"outline-none cursor-pointer py-2 border-r border-gray-400 w-15",children:UA.map(T=>n.jsx("option",{value:T.code,children:T.code},T.code))}),n.jsx("input",{type:"text",name:"work_phone",placeholder:"9----------",value:u.work_phone,onChange:k,className:"w-full outline-none"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Mobile Phone 1"}),n.jsxs("div",{className:"border border-gray-300 rounded-md flex flex-row w-full gap-1",children:[n.jsx("select",{name:"m1_ccode",value:u.m1_ccode,onChange:k,className:"outline-none cursor-pointer py-2 border-r border-gray-400 w-15",children:UA.map(T=>n.jsx("option",{value:T.code,children:T.code},T.code))}),n.jsx("input",{type:"text",name:"mobile_phone_1",placeholder:"9----------",value:u.mobile_phone_1,onChange:k,className:"w-full outline-none"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Mobile Phone 2"}),n.jsxs("div",{className:"border border-gray-300 rounded-md flex flex-row w-full gap-1",children:[n.jsx("select",{name:"m2_ccode",value:u.m2_ccode,onChange:k,className:"outline-none cursor-pointer py-2 border-r border-gray-400 w-15",children:UA.map(T=>n.jsx("option",{value:T.code,children:T.code},T.code))}),n.jsx("input",{type:"text",name:"mobile_phone_2",placeholder:"9----------",value:u.mobile_phone_2,onChange:k,className:"w-full outline-none"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Address"}),n.jsx("input",{name:"address",type:"text",placeholder:"Street No., Street Name, City, State/Province, Postal Code",defaultValue:r?.address||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Assign To"}),n.jsxs("select",{name:"assignedTo",defaultValue:o.find(T=>`${T.first_name} ${T.last_name}`===r?.assignedTo)?.id||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",children:[n.jsx("option",{value:"",disabled:!0,children:"Select user"}),o.map(T=>n.jsxs("option",{value:T.id,children:[T.first_name," ",T.last_name]},T.id))]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Territory"}),n.jsx("input",{type:"text",disabled:!0,name:"territory_id",placeholder:"Assign a user",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Source"}),n.jsxs("select",{className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:r?.source||"",name:"source",children:[n.jsx("option",{value:"",disabled:!0,children:"Select Source"}),n.jsx("option",{value:"Website",children:"Website"}),n.jsx("option",{value:"Referral",children:"Referral"}),n.jsx("option",{value:"Cold call",children:"Cold call"}),n.jsx("option",{value:"Event",children:"Event"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Notes"}),n.jsx("textarea",{name:"notes",placeholder:"Additional details...",rows:3,defaultValue:r?.notes||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-2 col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("button",{type:"button",onClick:w,className:"px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition",children:r?"Update Lead":"Save Lead"})]})]})]})})]})}const NB=["To Do","In Progress","Review","Completed"],Ng=10,wGe=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const a=t.getTimezoneOffset();return new Date(t.getTime()-a*60*1e3).toISOString().slice(0,16)},jB=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},NGe=e=>{const t=e.subject?.trim()??"",a=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),e.status&&String(e.status).toUpperCase();let r=null,i=null,o=null,l=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?o=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2&&(l=Number(e.relatedTo2)));const c=e.assignedTo?Number(e.assignedTo):null,d=o||l||i||r,u=o?"Contact":l?"Deal":i?"Account":r?"Lead":null;return{title:t,description:a,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:c,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:o,deal_id:l,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:d,related_type:u}},jGe=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",a=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",o=()=>e.lead?.id||e.lead_id,l=()=>e.account?.id||e.account_id,c=()=>e.contact?.id||e.contact_id,d=()=>e.deal?.id||e.deal_id,u=()=>e.task_assign_to?.id||e.assigned_to,f=()=>e.lead?.title||e.lead_id,p=()=>e.account?.name||e.account_id,x=()=>i||e.contact_id,v=()=>e.deal?.name||e.deal_id;let N="Lead",b="",C="",w="",S="Lead",E="",k="",A="";const T=l(),_=p(),I=o(),R=f();if(T){N="Account",S="Account",E=_,b=String(T);const U=c(),D=d(),M=x(),W=v();U?(C="Contact",k="Contact",A=M,w=String(U)):D&&(k="Deal",C="Deal",A=W,w=String(D))}else I?(S="Lead",E=R,N="Lead",b=String(I)):e.related_type==="Account"&&(N="Account",b=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:e.status||"Not started",dueDate:s,dateAssigned:r,assignedToId:u()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:a,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:S,relatedTo1Text:E,relatedType2Text:k,relatedTo2Text:A,subject:e.title,relatedType1:N,relatedTo1:b,relatedType2:C,relatedTo2:w}};function CGe(){h.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=Xt(),[a,s]=h.useState("board"),[r,i]=h.useState(!1),[o,l]=h.useState(null),[c,d]=h.useState(!1),[u,f]=h.useState([]),[p,x]=h.useState(!0),[v,N]=h.useState(""),[b,C]=h.useState("Filter by Status"),[w,S]=h.useState("Filter by Priority"),[E,k]=h.useState([]),[A,T]=h.useState(1),[_,I]=h.useState(null),[R,U]=h.useState(!1),D=bt(),M=Qt(),[W,X]=h.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""});h.useEffect(()=>{const fe=M.state?.openTaskModal,ne=M.state?.initialTaskData;fe&&(i(!0),ne&&X(Ae=>({...Ae,...ne})),D(M.pathname,{replace:!0,state:{}}))},[M,D]);const z=async()=>{try{const fe=await ie.get("/users/all");k(Array.isArray(fe.data)?fe.data:[])}catch(fe){console.error("Failed to fetch users:",fe),q.error("Failed to fetch users.")}},Q=async()=>{try{x(!0);const fe=await ie.get("/tasks/all"),Ae=(Array.isArray(fe.data)?fe.data:[]).map(jGe);Ae.sort((ye,Ie)=>{const Ve=ye.createdAt?new Date(ye.createdAt):0;return(Ie.createdAt?new Date(Ie.createdAt):0)-Ve}),console.log("Fetched Tasks:",Ae),f(Ae),a==="list"&&T(1)}catch(fe){console.error("Failed to load tasks:",fe),q.error("Failed to load tasks.")}finally{x(!1)}};h.useEffect(()=>{!t&&e&&(z(),Q())},[t,e]);const de=()=>{l(null),X({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},Y=(fe=null,ne=!1)=>{l(fe),d(ne),fe?X({id:fe.id,subject:fe.title||"",description:fe.description||"",priority:fe.priority||"Normal",status:fe.status||"Not started",dueDate:wGe(fe.dueDate),assignedTo:fe.assignedToId?String(fe.assignedToId):"",notes:fe.notes||"",relatedType1Text:fe.relatedType1Text||"",relatedTo1Text:fe.relatedTo1Text||"",relatedType2Text:fe.relatedType2Text||"",relatedTo2Text:fe.relatedTo2Text||"",relatedType1:fe.relatedType1||"",relatedTo1:fe.relatedTo1||"",relatedType2:fe.relatedType2||"",relatedTo2:fe.relatedTo2||""}):de(),i(!0)},se=()=>{i(!1),l(null),d(!1),de()},J=async fe=>{const ne=NGe(fe);try{o&&!c?(await ie.put(`/tasks/${o.id}`,ne),q.success("Task updated successfully.")):(await ie.post("/tasks/create",ne),q.success("Task created successfully.")),i(!1),await Q()}catch(Ae){console.error("Failed to save task:",Ae);const ye=Ae.response?.data?.detail||"Failed to save task.";q.error(ye)}},F=fe=>{fe&&I({title:"Delete Task",message:n.jsxs(n.Fragment,{children:["Are you sure you want to delete ",n.jsx("span",{className:"font-semibold",children:fe.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:fe.id}})},Ne=async()=>{if(!_?.action){I(null);return}const{action:fe}=_;U(!0);try{fe.type==="delete"&&(await ie.delete(`/tasks/${fe.targetId}`),q.success("Task deleted successfully."),await Q())}catch(ne){console.error("Task action failed:",ne),q.error("Failed to delete task.")}finally{U(!1),I(null)}},re=()=>{R||I(null)},he=h.useMemo(()=>{const fe=v.trim().toLowerCase();return[...u].sort((Ae,ye)=>{const Ie=Ae.createdAt?new Date(Ae.createdAt):0;return(ye.createdAt?new Date(ye.createdAt):0)-Ie}).filter(Ae=>{const ye=fe===""||Ae.title?.toLowerCase().includes(fe)||Ae.description?.toLowerCase().includes(fe)||Ae.assignedToName?.toLowerCase().includes(fe)||Ae.createdBy?.toLowerCase().includes(fe),Ie=b==="Filter by Status"||Ae.status===b,Ve=w==="Filter by Priority"||Ae.priority===w;return ye&&Ie&&Ve})},[u,v,b,w]);h.useEffect(()=>{T(1)},[v,b,w,a]),h.useEffect(()=>{if(a==="list"){const fe=he.length===0?1:Math.ceil(he.length/Ng);A>fe&&T(fe)}},[he.length,A,a]);const je=h.useMemo(()=>{if(a==="board")return he;const fe=(A-1)*Ng;return he.slice(fe,fe+Ng)},[he,A,a]),De=h.useMemo(()=>{const fe=new Date;return[{title:"To Do",value:u.filter(ne=>ne.status==="Not started").length,icon:zs,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:u.filter(ne=>ne.status==="In progress").length,icon:Ri,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:u.filter(ne=>ne.status==="Completed").length,icon:ba,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:u.filter(ne=>ne.dueDate&&new Date(ne.dueDate)<fe&&ne.status!=="Completed").length,icon:zf,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:u.filter(ne=>ne.priority==="High").length,icon:Bl,color:"text-orange-600",bgColor:"bg-orange-100"}]},[u]),Me=fe=>fe.dueDate&&new Date(fe.dueDate)<new Date&&fe.status!=="Completed",ve=fe=>{switch(fe.status){case"To Do":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In Progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Review":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},Be=fe=>{switch(fe){case"To Do":return"bg-blue-100 text-blue-700";case"In Progress":return"bg-purple-100 text-purple-700";case"Review":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},ke=fe=>{switch(fe){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&n.jsx(zt,{message:"Loading tasks..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(Ri,{className:"text-blue-600"})," Tasks Board"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:()=>Y(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[n.jsx(un,{})," Create Task"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:De.map(fe=>n.jsx(SGe,{...fe},fe.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Ht,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search tasks",value:v,onChange:fe=>N(fe.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{value:b,onChange:fe=>C(fe.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Status"}),NB.map(fe=>n.jsx("option",{children:fe},fe))]}),n.jsxs("select",{value:w,onChange:fe=>S(fe.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Priority"}),n.jsx("option",{children:"High"}),n.jsx("option",{children:"Normal"}),n.jsx("option",{children:"Low"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${a==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),n.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${a==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&he.length===0&&n.jsx("p",{className:"text-center text-gray-500 mt-10 p-4 bg-white shadow rounded-lg",children:"No tasks found matching current filters."}),!p&&!t&&he.length>0&&a==="board"&&n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:NB.map(fe=>{const ne=je.filter(Ae=>Ae.status===fe);return n.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),n.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:fe}),n.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:ne.length})]}),n.jsx("div",{className:`space-y-3 ${ne.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:ne.length>0?ne.map(Ae=>n.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${ve(Ae)}`,onClick:()=>Y(Ae,!0),children:[n.jsxs("div",{className:"text-left flex-1",children:[n.jsx("p",{className:"font-medium text-gray-800 text-sm",children:Ae.title}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",Ae.priority]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",Ae.assignedToName]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",n.jsx("span",{className:Me(Ae)?"text-red-600":"text-gray-600",children:Ae.dateAssigned?jB(Ae.dateAssigned):""})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[n.jsx("button",{type:"button",onClick:ye=>{ye.stopPropagation(),Y(Ae)},className:"text-blue-500 hover:text-blue-700",children:n.jsx(la,{})}),n.jsx("button",{type:"button",onClick:ye=>{ye.stopPropagation(),F(Ae)},className:"text-red-500 hover:text-red-700",children:n.jsx(Ut,{})})]})]},Ae.id)):n.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No tasks"})})]},fe)})}),!p&&!t&&he.length>0&&a==="list"&&n.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Actions"})]})}),n.jsx("tbody",{children:je.map(fe=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",onClick:()=>{console.log("Opening task in view mode:",fe),Y(fe,!0)},children:[n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",children:fe.title}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Be(fe.status||"To Do")}`,children:fe.status||"To Do"})}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${ke(fe.priority||"Low")}`,children:fe.priority||"Low"})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:fe.assignedToName||"Unassigned"}),n.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${Me(fe)?"text-red-600 font-medium":""}`,children:fe.dateAssigned?jB(fe.dateAssigned):""}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-3",onClick:ne=>ne.stopPropagation(),children:[n.jsxs("button",{type:"button",onClick:()=>Y(fe),className:"text-blue-500 hover:text-blue-700 flex items-center gap-1",children:[n.jsx(la,{})," Edit"]}),n.jsxs("button",{type:"button",onClick:()=>F(fe),className:"text-red-500 hover:text-red-700 flex items-center gap-1",children:[n.jsx(Ut,{})," Delete"]})]})})]},fe.id))})]})})}),!p&&!t&&a==="list"&&n.jsx(tn,{className:"mt-6",totalItems:he.length,pageSize:Ng,currentPage:he.length===0?0:A,onPrev:()=>T(fe=>Math.max(fe-1,1)),onNext:()=>T(fe=>Math.min(fe+1,Math.max(1,Math.ceil(he.length/Ng)||1))),label:"tasks"}),n.jsx(n0,{isOpen:r,onClose:se,onSave:J,onEdit:()=>d(!1),setFormData:X,formData:W,isEditing:!c&&!!o,viewMode:c,users:E,currentUser:e,onDelete:F}),_&&n.jsx(_Ge,{open:!0,title:_.title,message:_.message,confirmLabel:_.confirmLabel,cancelLabel:_.cancelLabel,variant:_.variant,onConfirm:Ne,onCancel:re,loading:R})]})}function SGe({icon:e,title:t,value:a,color:s,bgColor:r,onClick:i}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function _Ge({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r,variant:i,loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function AGe(){h.useEffect(()=>{document.title="Campaign | Sari-Sari CRM"},[]);const[e,t]=h.useState(!1),[a,s]=h.useState(!1),[r,i]=h.useState(null),[o,l]=h.useState(""),[c,d]=h.useState("All Statuses"),[u,f]=h.useState({show:!1,action:null,campaign:null}),[p,x]=h.useState([{id:1,name:"Christmas Promo 2025",subject:" Holiday Discounts Await You!",content:"Spread holiday cheer with exclusive deals this Christmas season!",status:"Scheduled",recipients:1200,scheduleDate:"2025-12-15T10:00",created:"2025-10-20",createdBy:"Marketing Team"},{id:2,name:"New Year Kickoff",subject:"Start 2026 with Big Savings!",content:"Kick off your year right with amazing offers from us!",status:"Draft",recipients:"",scheduleDate:"",created:"2025-10-25",createdBy:"Marketing Team"}]),[v,N]=h.useState({id:null,name:"",subject:"",content:"",status:"Draft",recipients:"",scheduleDate:""}),b=p.filter(U=>{const D=c==="All Statuses"||U.status===c,M=U.name.toLowerCase().includes(o.toLowerCase())||U.subject.toLowerCase().includes(o.toLowerCase());return D&&M}),C=()=>{s(!1),N({id:null,name:"",subject:"",content:"",status:"Draft",recipients:"",scheduleDate:""}),t(!0)},w=(U,D)=>{D.stopPropagation(),s(!0),N(U),t(!0)},S=(U,D)=>{D.stopPropagation(),f({show:!0,action:"delete",campaign:U})},E=U=>{U.preventDefault(),f({show:!0,action:a?"edit":"add",campaign:{...v}})},k=()=>{if(u.action==="add"){const U={...u.campaign,id:Date.now(),created:new Date().toLocaleDateString(),createdBy:"Marketing Team"};x(D=>[...D,U]),t(!1)}else u.action==="edit"?(x(U=>U.map(D=>D.id===u.campaign.id?{...u.campaign}:D)),t(!1)):u.action==="delete"&&x(U=>U.filter(D=>D.id!==u.campaign.id));f({show:!1,action:null,campaign:null})},A=()=>{f({show:!1,action:null,campaign:null})},T=U=>i(U),_=()=>i(null),I=U=>{const{name:D,value:M}=U.target;N(W=>({...W,[D]:M}))},R=U=>{U.target.id==="modalBackdrop"&&t(!1)};return r?n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[n.jsxs("button",{onClick:_,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-6 cursor-pointer",children:[n.jsx(Ru,{className:"mr-1 w-5 h-5"})," Back"]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:r.name}),n.jsx("span",{className:`text-xs sm:text-sm px-2 py-0.5 rounded ${r.status==="Scheduled"?"bg-yellow-100 text-yellow-700":r.status==="Sent"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:r.status})]})}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm",children:[n.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Campaign Information"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm text-gray-700",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Subject:"})," ",n.jsx("br",{}),r.subject]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Created By:"})," ",n.jsx("br",{}),r.createdBy]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Created On:"})," ",n.jsx("br",{}),r.created]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Scheduled Date:"})," ",n.jsx("br",{}),r.scheduleDate?new Date(r.scheduleDate).toLocaleString():""]}),n.jsxs("p",{className:"sm:col-span-2",children:[n.jsx("span",{className:"font-semibold",children:"Email Content:"})," ",n.jsx("br",{}),r.content]}),r.status==="Scheduled"&&n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Recipients:"})," ",n.jsx("br",{}),r.recipients]})]})]})]}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Xn,{className:"mr-2 text-blue-600"})," Email Campaigns"]}),n.jsx("button",{onClick:C,className:"flex items-center bg-black text-white px-4 py-2 rounded-md hover:bg-gray-800 transition text-sm sm:text-base shadow-sm",children:" New Campaign"})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Ht,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search by campaign name or email subject...",value:o,onChange:U=>l(U.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:c,onChange:U=>d(U.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"All Statuses"}),n.jsx("option",{children:"Draft"}),n.jsx("option",{children:"Scheduled"}),n.jsx("option",{children:"Sent"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-[700px] w-full border border-gray-200 rounded-lg bg-white shadow-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-sm text-gray-600",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Campaign Name"}),n.jsx("th",{className:"py-3 px-4",children:"Email Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Recipients"}),n.jsx("th",{className:"py-3 px-4",children:"Scheduled Date"}),n.jsx("th",{className:"py-3 px-4 text-center",children:"Actions"})]})}),n.jsx("tbody",{className:"text-sm text-gray-700",children:b.map((U,D)=>n.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer transition",onClick:()=>T(U),children:[n.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:U.name}),n.jsx("td",{className:"py-3 px-4",children:U.subject}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${U.status==="Scheduled"?"bg-yellow-100 text-yellow-700":U.status==="Sent"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:U.status})}),n.jsx("td",{className:"py-3 px-4",children:U.recipients?`${U.recipients} emails`:""}),n.jsx("td",{className:"py-3 px-4",children:U.scheduleDate?new Date(U.scheduleDate).toLocaleString():""}),n.jsx("td",{className:"py-3 px-4 text-center",onClick:M=>M.stopPropagation(),children:n.jsxs("div",{className:"flex justify-center gap-3",children:[n.jsx("button",{onClick:M=>w(U,M),className:"text-blue-500 hover:text-blue-700",children:n.jsx(ia,{})}),n.jsx("button",{onClick:M=>S(U,M),className:"text-red-500 hover:text-red-700",children:n.jsx(Ut,{})})]})})]},D))})]})}),e&&n.jsx("div",{id:"modalBackdrop",onClick:R,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl shadow-lg p-5 sm:p-6 relative border border-gray-200 my-6 max-h-[90vh] overflow-y-auto",onClick:U=>U.stopPropagation(),children:[n.jsx("button",{onClick:()=>t(!1),className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:n.jsx(Vt,{size:20})}),n.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:a?"Edit Campaign":"Add New Campaign"}),n.jsxs("form",{onSubmit:E,className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Campaign Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"name",value:v.name,onChange:I,placeholder:"e.g. Summer Sale Blast",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Email Subject ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"subject",value:v.subject,onChange:I,placeholder:"e.g. Big discounts await you!",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Campaign Status ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{name:"status",value:v.status,onChange:I,required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",children:[n.jsx("option",{value:"Draft",children:"Draft"}),n.jsx("option",{value:"Scheduled",children:"Scheduled"}),n.jsx("option",{value:"Sent",children:"Sent"})]})]}),v.status==="Scheduled"&&n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:col-span-2",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Scheduled Date ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"datetime-local",name:"scheduleDate",value:v.scheduleDate,onChange:I,required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Recipient Count ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"number",name:"recipients",value:v.recipients,onChange:I,placeholder:"e.g. 500",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),n.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Email Content ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("textarea",{name:"content",rows:4,value:v.content,onChange:I,placeholder:"Write your email message here...",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex justify-end gap-2 sm:col-span-2 pt-3 border-t border-gray-100 mt-2",children:[n.jsx("button",{type:"button",onClick:()=>t(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:"Save Campaign"})]})]})]})}),u.show&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 relative border border-gray-200",children:[n.jsx("button",{onClick:A,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:n.jsx(Vt,{size:20})}),n.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:u.action==="delete"?"Confirm Delete":u.action==="edit"?"Confirm Edit":"Confirm Add"}),n.jsx("p",{className:"text-center text-gray-600 mb-6",children:u.action==="delete"?n.jsxs(n.Fragment,{children:["Are you sure you want to delete the campaign"," ",n.jsx("span",{className:"font-semibold",children:u.campaign.name}),"?"]}):u.action==="edit"?n.jsxs(n.Fragment,{children:["Save changes to"," ",n.jsx("span",{className:"font-semibold",children:u.campaign.name}),"?"]}):n.jsxs(n.Fragment,{children:["Add new campaign"," ",n.jsx("span",{className:"font-semibold",children:u.campaign.name}),"?"]})}),n.jsxs("div",{className:"flex justify-center gap-4",children:[n.jsx("button",{onClick:A,className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),n.jsx("button",{onClick:k,className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:"Confirm"})]})]})})]})}const TGe=[{id:1,name:"Welcome E-mail",category:"Welcome",subject:"Welcome to {company}!",body:`Hi {name}, Welcome to {company}! We're excited to have you on board.

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed vel quam vitae erat venenatis feugiat. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.

Best regards, The Team`,createdBy:"Angel Angelo",date:"12/10/23"},{id:2,name:"Product Demo Follow-up",category:"Follow-up",subject:"Thanks for checking out our demo",body:`Hi {name}, Thank you for taking the time to view our product demo.
Do you have any questions? Let's schedule a call to discuss how we can help {company}.

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed vel quam vitae erat venenatis feugiat. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.

Best, Sales Team`,createdBy:"Angel Angelo",date:"12/10/23"}],CB={Welcome:"bg-orange-100 text-orange-700","Follow-up":"bg-blue-100 text-blue-700",Newsletter:"bg-green-100 text-green-700",Promotional:"bg-purple-100 text-purple-700",default:"bg-gray-100 text-gray-800"};function EGe(){h.useEffect(()=>{document.title="Templates | Sari-Sari CRM"},[]);const[e,t]=h.useState(TGe),[a,s]=h.useState(!1),[r,i]=h.useState(null),[o,l]=h.useState(null),[c,d]=h.useState(""),[u,f]=h.useState("All Categories"),[p,x]=h.useState({name:"",category:"",subject:"",body:""}),[v,N]=h.useState({show:!1,action:null,template:null}),b=()=>{l(null),i(null),s(!1)},C=D=>{x({...p,[D.target.name]:D.target.value})},w=()=>{N({show:!0,action:"add",template:{...p}})},S=D=>{i(D),x({name:D.name,category:D.category,subject:D.subject,body:D.body})},E=()=>{N({show:!0,action:"edit",template:{...p,id:r.id}})},k=D=>{N({show:!0,action:"delete",template:D})},A=D=>{Px.success(`Template "${D.name}" selected for use!`),N({show:!1,action:null,template:null})},T=()=>{const D=v.template;if(v.action==="add"){const M={...D,id:e.length+1,createdBy:"You",date:new Date().toLocaleDateString()};t(W=>[M,...W]),s(!1),x({name:"",category:"",subject:"",body:""})}else v.action==="edit"?(t(M=>M.map(W=>W.id===D.id?{...D}:W).sort((W,X)=>new Date(X.date).getTime()-new Date(W.date).getTime())),i(null),x({name:"",category:"",subject:"",body:""}),l(null)):v.action==="delete"&&(t(M=>M.filter(W=>W.id!==D.id)),l(null));N({show:!1,action:null,template:null})},_=()=>{N({show:!1,action:null,template:null})},I=D=>l(D),R=e.filter(D=>D.name.toLowerCase().includes(c.toLowerCase())&&(u==="All Categories"||D.category===u)),U=(D,M=!1)=>n.jsxs("div",{className:"flex flex-col justify-between h-full",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:D.name}),n.jsx("span",{className:`text-xs px-3 py-1 rounded-md ${CB[D.category]||CB.default}`,children:D.category})]}),n.jsx("p",{className:"text-gray-600 mb-2 text-sm",children:D.subject}),n.jsx("div",{className:`text-gray-800 text-sm p-2 rounded-md ${M?"bg-gray-50 max-h-40 overflow-y-auto":"truncate"} whitespace-pre-line`,style:M?{}:{display:"-webkit-box",WebkitLineClamp:7,WebkitBoxOrient:"vertical",overflow:"hidden"},children:D.body})]}),n.jsxs("div",{className:"flex justify-between items-center mt-4",children:[!M&&n.jsxs("button",{onClick:W=>{W.stopPropagation(),A(D)},className:"flex items-center gap-1 bg-black text-white px-3 py-1 rounded-md text-sm hover:bg-gray-900 transition",children:[n.jsx(xn,{})," Use Template"]}),M&&n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:W=>{W.stopPropagation(),S(D)},className:"flex items-center gap-1 bg-black text-white px-3 py-1 rounded-md text-sm hover:bg-gray-900 transition",children:[n.jsx(la,{})," Edit"]}),n.jsxs("button",{onClick:W=>{W.stopPropagation(),k(D)},className:"flex items-center gap-1 bg-red-500 text-white px-3 py-1 rounded-md text-sm hover:bg-red-600 transition",children:[n.jsx(Ut,{})," Delete"]})]}),n.jsxs("p",{className:"text-gray-400 text-xs text-right",children:["Created by: ",D.createdBy," | ",D.date]})]})]});return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter min-h-screen",children:[n.jsx(Lx,{position:"top-center",reverseOrder:!1}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(xn,{className:"mr-2 text-black"})," Templates"]}),n.jsx("button",{onClick:()=>{s(!0),i(null),x({name:"",category:"",subject:"",body:""})},className:"flex items-center bg-black text-white px-4 py-2 rounded-md hover:bg-gray-800 transition text-sm sm:text-base shadow-sm",children:" New Template"})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Ht,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search by template name...",value:c,onChange:D=>d(D.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:u,onChange:D=>f(D.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"All Categories"}),n.jsx("option",{children:"Welcome"}),n.jsx("option",{children:"Follow-up"}),n.jsx("option",{children:"Newsletter"}),n.jsx("option",{children:"Promotional"})]})})]}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:R.map(D=>n.jsxs("div",{onClick:()=>I(D),className:"bg-white rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl cursor-pointer flex flex-col justify-between h-80 transition",children:[n.jsx("div",{className:"h-2 w-full rounded-t-2xl bg-black"}),n.jsx("div",{className:"p-4 flex-grow",children:U(D)})]},D.id))}),(a||r)&&n.jsx("div",{onClick:b,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl shadow-lg p-5 sm:p-6 relative border border-gray-200 my-6 max-h-[90vh] overflow-y-auto",onClick:D=>D.stopPropagation(),children:[n.jsx("button",{onClick:b,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:n.jsx(Vt,{size:20})}),n.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:r?"Edit Template":"Create New Template"}),n.jsxs("form",{onSubmit:D=>{D.preventDefault(),r?E():w()},className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Template Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"name",value:p.name,onChange:C,placeholder:"e.g. Welcome Email",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Category ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{name:"category",value:p.category,onChange:C,required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none",children:[n.jsx("option",{value:"",children:"Select Category"}),n.jsx("option",{value:"Welcome",children:"Welcome"}),n.jsx("option",{value:"Follow-up",children:"Follow-up"}),n.jsx("option",{value:"Newsletter",children:"Newsletter"}),n.jsx("option",{value:"Promotional",children:"Promotional"})]})]}),n.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Subject Line ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"subject",value:p.subject,onChange:C,placeholder:"e.g. Welcome to our service!",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none"})]}),n.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Email Body ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("textarea",{name:"body",rows:4,value:p.body,onChange:C,placeholder:"Write your email message here...",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none resize-none"})]}),n.jsxs("div",{className:"flex justify-end gap-2 sm:col-span-2 pt-3 border-t border-gray-100 mt-2",children:[n.jsx("button",{type:"button",onClick:b,className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:r?"Update Template":"Create Template"})]})]})]})}),o&&!r&&n.jsx("div",{onClick:b,className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"rounded-2xl shadow-lg cursor-default h-80 w-full max-w-md overflow-hidden flex flex-col",onClick:D=>D.stopPropagation(),children:[n.jsx("div",{className:"h-2 w-full rounded-t-2xl bg-black"}),n.jsx("div",{className:"p-4 flex-grow overflow-y-auto bg-gray-50",children:U(o,!0)})]})}),v.show&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 relative border border-gray-200",children:[n.jsx("button",{onClick:_,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:n.jsx(Vt,{size:20})}),n.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:v.action==="delete"?"Confirm Delete":v.action==="edit"?"Confirm Update":v.action==="add"?"Confirm Add":"Confirm Use"}),n.jsx("p",{className:"text-center text-gray-600 mb-6",children:v.action==="delete"?n.jsxs(n.Fragment,{children:["Are you sure you want to delete the template"," ",n.jsx("span",{className:"font-semibold",children:v.template.name}),"?"]}):v.action==="edit"?n.jsxs(n.Fragment,{children:["Save changes to"," ",n.jsx("span",{className:"font-semibold",children:v.template.name}),"?"]}):v.action==="add"?n.jsxs(n.Fragment,{children:["Add new template"," ",n.jsx("span",{className:"font-semibold",children:v.template.name}),"?"]}):n.jsxs(n.Fragment,{children:["Use template"," ",n.jsx("span",{className:"font-semibold",children:v.template.name}),"?"]})}),n.jsxs("div",{className:"flex justify-center gap-4",children:[n.jsx("button",{onClick:_,className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),n.jsx("button",{onClick:T,className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:"Confirm"})]})]})})]})}function kGe({toggleSidebar:e}){const[t,a]=h.useState(!1),s=h.useRef(null),r=Qt(),i=bt(),{logout:o}=Bs(),{user:l,fetchUser:c}=Xt(),d={"/group-manager/dashboard":"Dashboard","/group-manager/accounts":"Accounts","/group-manager/contacts":"Contacts","/reports":"Reports","/leads":"Leads","/group-manager/Audit":"Audit","/group-manager/targets":"Targets","/group-manager/leads":"Leads","/group-manager/quotes":"Quotes","/group-manager/users":"Users","/group-manager/deals":"Deals"};h.useEffect(()=>{c()},[]),h.useEffect(()=>{const f=()=>{c()};return window.addEventListener("userProfileUpdated",f),()=>{window.removeEventListener("userProfileUpdated",f)}},[c]);const u=d[r.pathname]||"Group Manager Panel";return h.useEffect(()=>{function f(p){s.current&&!s.current.contains(p.target)&&a(!1)}return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]),n.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})})}),n.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:u})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("button",{className:"relative text-gray-600 hover:text-gray-800",children:[n.jsx(Zp,{className:"text-xl"}),n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs w-4 h-4 flex items-center justify-center rounded-full",children:"3"})]}),n.jsxs("div",{className:"relative",ref:s,children:[n.jsxs("button",{onClick:()=>a(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[n.jsx("img",{src:l?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 aspect-square object-cover rounded-full"}),n.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[l?.first_name," ",l?.last_name]})]}),t&&n.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4",children:[n.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[n.jsx("img",{src:l?.profile_picture||"https://via.placeholder.com/80",alt:"Profile",className:"w-16 h-16 rounded-full object-cover"}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[l?.first_name," ",l?.middle_name," ",l?.last_name]}),n.jsx("p",{className:"text-[11px] text-gray-600 font-light w-full truncate",children:"Group Manager"})]})]}),n.jsxs("div",{className:"mt-6 space-y-1 px-4 text-left",children:[n.jsx("button",{onClick:()=>{i("/group-manager/users"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Invite Your Team"}),n.jsx("button",{onClick:()=>{i("/group-manager/manage-account"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Manage Your Account"}),n.jsx("div",{className:"border-t border-gray-200 my-2"}),n.jsx("button",{onClick:o,className:"block w-full text-sm text-red-600 hover:text-red-700 hover:bg-gray-50 py-2 rounded text-left",children:"Logout"})]})]})]})]})]})}function LGe(){const[e,t]=h.useState(!0),[a,s]=h.useState(!1),[r,i]=h.useState(!1),[o,l]=h.useState(!1),c=Qt(),{user:d}=Xt();h.useEffect(()=>{d&&console.log("Fetched user:",d)},[d]),h.useEffect(()=>{console.log("Simulating user fetch... (no backend)")},[]),h.useEffect(()=>{document.title="Panel | Sari-Sari CRM"},[]);const u="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",f="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition",x=["/group-manager/accounts","/group-manager/contacts","/group-manager/leads","/group-manager/deals","/group-manager/quotes","/group-manager/targets","/group-manager/meetings"].includes(c.pathname);return n.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[n.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${o?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[n.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[n.jsxs("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:[" Sari-Sari.CRM"," ",n.jsx("span",{className:"text-[12px] text-gray-700 font-medium align-bottom",children:"v2"})]}),d&&d.company&&n.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:d.company.company_name})]}),n.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[n.jsxs(Ot,{to:"/group-manager/dashboard",className:({isActive:v})=>v?u:f,children:[n.jsx(Jp,{className:"text-lg"}),n.jsx("span",{children:"Dashboard"})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>t(!e),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Kt,{className:"text-lg"}),"Sales"]}),n.jsx(jt,{className:`transition-transform ${e||x?"rotate-180":""}`})]}),(e||x)&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(Ot,{to:"/group-manager/accounts",className:({isActive:v})=>v?u:f,children:[n.jsx(dd,{})," Accounts"]}),n.jsxs(Ot,{to:"/group-manager/contacts",className:({isActive:v})=>v?u:f,children:[n.jsx(en,{})," Contacts"]}),n.jsxs(Ot,{to:"/group-manager/leads",className:({isActive:v})=>v?u:f,children:[n.jsx(Gn,{})," Leads"]}),n.jsxs(Ot,{to:"/group-manager/deals",className:({isActive:v})=>v?u:f,children:[n.jsx(Kt,{})," Deals"]}),n.jsxs(Ot,{to:"/group-manager/quotes",className:({isActive:v})=>v?u:f,children:[n.jsx(xn,{})," Quotes"]}),n.jsxs(Ot,{to:"/group-manager/targets",className:({isActive:v})=>v?u:f,children:[n.jsx(tr,{})," Targets"]})]})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!a),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(ws,{className:"text-lg"}),"Activity"]}),n.jsx(jt,{className:`transition-transform ${a?"rotate-180":""}`})]}),a&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(Ot,{to:"/group-manager/tasks",className:({isActive:v})=>v?u:f,children:[n.jsx(qt,{})," Tasks"]}),n.jsxs(Ot,{to:"/group-manager/meetings",className:({isActive:v})=>v?u:f,children:[n.jsx(Ct,{})," Meetings"]}),n.jsxs(Ot,{to:"/group-manager/calls",className:({isActive:v})=>v?u:f,children:[n.jsx(Ls,{})," Calls"]}),n.jsxs(Ot,{to:"/group-manager/audit",className:({isActive:v})=>v?u:f,children:[n.jsx(ws,{})," Audit"]})]})]}),n.jsx("div",{children:n.jsx(Ot,{to:"/group-manager/territory",className:({isActive:v})=>v?u:f,children:n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Hl,{className:"text-lg"}),"Territory"]})})}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!r),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Fk,{className:"text-lg"}),"User Management"]}),n.jsx(jt,{className:`transition-transform ${r?"rotate-180":""}`})]}),r&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs(Ot,{to:"/group-manager/users",className:({isActive:v})=>v?u:f,children:[n.jsx(Zn,{})," Users"]}),n.jsxs(Ot,{to:"/group-manager/manage-account",className:({isActive:v})=>v?u:f,children:[n.jsx(en,{})," Manage Account"]})]})]})]}),n.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),o&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>l(!1)}),n.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[n.jsx(kGe,{toggleSidebar:()=>l(!o)}),n.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:n.jsx(Gp,{})})]})]})}const PGe=e=>n.jsx(Ht,{...e}),zJ=e=>n.jsx(dd,{...e}),UJ=e=>n.jsx(zs,{...e}),DGe=e=>n.jsx(Xp,{...e}),OGe=e=>n.jsx(Pw,{...e}),MGe=e=>n.jsx(Ct,{...e}),IGe=e=>n.jsx(At,{...e}),$Ge=e=>n.jsx(Ow,{...e}),FJ=e=>n.jsx(Dw,{...e}),RGe=e=>n.jsx(Zn,{...e}),BJ=e=>n.jsx(en,{...e}),zGe=e=>n.jsx(Gn,{...e}),HJ=e=>n.jsx(Kt,{...e}),UGe=e=>n.jsx(xn,{...e}),FGe=e=>n.jsx(tr,{...e}),BGe=e=>n.jsx(ba,{...e}),HGe=e=>n.jsx(Ct,{...e}),GGe=e=>n.jsx(Ls,{...e}),WGe=e=>n.jsx(Hl,{...e}),qGe=e=>n.jsx(ws,{...e}),GJ=e=>`P ${new Intl.NumberFormat("en-PH",{minimumFractionDigits:0}).format(e)}`,VGe=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},YGe=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},QGe=e=>{switch(e){case"call":return{Icon:IGe,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:$Ge,color:"text-green-600",bgColor:"bg-green-100"};default:return{Icon:MGe,color:"text-blue-500",bgColor:"bg-blue-100"}}},KGe=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},XGe=({searchQuery:e,onSearchChange:t,searchResults:a,onSearchResultClick:s})=>{const r=bt(),[i,o]=h.useState(!1),l=h.useRef(null),c=[{icon:zJ,label:"Account"},{icon:BJ,label:"Contact"},{icon:zGe,label:"Leads"},{icon:HJ,label:"Deals"},{icon:UGe,label:"Quotes"},{icon:FGe,label:"Target"},{icon:BGe,label:"Task"},{icon:HGe,label:"Meeting"},{icon:GGe,label:"Call"},{icon:qGe,label:"Audit"},{icon:WGe,label:"Territory"}];h.useEffect(()=>{const f=p=>{l.current&&!l.current.contains(p.target)&&o(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const d=f=>{t(f.target.value),o(f.target.value.trim().length>0)},u=f=>{s&&s(f),o(!1)};return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[n.jsxs("div",{className:"w-full flex justify-center relative",ref:l,children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-lg lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[n.jsx(PGe,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),n.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:d,onFocus:()=>e.trim().length>0&&o(!0)})]}),i&&Array.isArray(a)&&a.length>0&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:a.map((f,p)=>n.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>u(f),children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:f.name}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:f.type}),f.details&&n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:f.details})]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${f.type==="Lead"?"bg-blue-100 text-blue-600":f.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:f.type})]})},p))}),i&&e.trim().length>0&&(!Array.isArray(a)||a.length===0)&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 p-4 text-center text-sm text-gray-500",children:"No results found"})]}),n.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:n.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:c.map((f,p)=>n.jsxs("div",{className:"relative flex-shrink-0 group",children:[n.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":f.label,title:f.label,onClick:()=>{switch(f.label){case"Account":r("/group-manager/accounts");break;case"Contact":r("/group-manager/contacts");break;case"Leads":r("/group-manager/leads");break;case"Deals":r("/group-manager/deals");break;case"Quotes":r("/group-manager/quotes");break;case"Target":r("/group-manager/targets");break;case"Task":r("/group-manager/tasks");break;case"Meeting":r("/group-manager/meetings");break;case"Call":r("/group-manager/calls");break;case"Audit":r("/group-manager/audit");break;case"Territory":r("/group-manager/territory");break;default:console.log(`Clicked ${f.label}`)}},children:n.jsx(f.icon,{size:24,className:"lg:scale-95"})}),n.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-1.5 bg-gray-900 text-white text-xs font-semibold rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-75 ease-in-out z-50 shadow-lg",children:[f.label,n.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]},p))})})]})},ZGe=({action:e,description:t,entity_type:a,entity_name:s,timestamp:r})=>{const i=bt(),o=u=>{if(!u)return"Unknown";const f=new Date(u),x=new Date-f,v=Math.floor(x/6e4),N=Math.floor(x/36e5),b=Math.floor(x/864e5);return v<1?"Just now":v<60?`${v} min ago`:N<24?`${N} hour${N>1?"s":""} ago`:b<7?`${b} day${b>1?"s":""} ago`:f.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},l=e||t||"Action",c=s||a||"System",d=o(r);return n.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/group-manager/audit"),children:[n.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[l," ",n.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",c,")"]})]}),n.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:d})]})},JGe=({logs:e,loading:t})=>{const a=bt();return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/group-manager/audit"),children:[n.jsx("span",{children:"See All"}),n.jsx(FJ,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?n.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((s,r)=>n.jsx(ZGe,{...s},r))}):n.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},eWe=({icon:e,title:t,value:a,color:s,bgColor:r,loading:i,onClick:o})=>n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o||(()=>console.log(`Clicked metric card: ${t}`)),children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:20})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a||0})]})]}),tWe=({revenueData:e,loading:t})=>{const a=bt(),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=h.useMemo(()=>{if(console.log("=== RevenueChart calculateRevenueData ==="),console.log("revenueData:",e),console.log("revenueData length:",e?.length),!e||e.length===0){console.log("No revenue data, returning empty chart");const b=new Date;b.getFullYear();const C=b.getMonth(),w=[],S=[];for(let E=0;E<=C;E++)w.push(s[E]),S.push(0);return{labels:w,revenues:S,maxRevenue:0}}const l={};let c=0,d=0;console.log("Processing deals:",e.length),e.forEach((b,C)=>{const w=b.close_date||b.closeDate||null,S=w&&w!==null&&w!=="",E=b.stage||"",k=E.toUpperCase()==="CLOSED_WON"||E==="CLOSED_WON";let A=b.amount;A&&typeof A=="object"&&A.toString?A=parseFloat(A.toString()):A=parseFloat(A)||0;const T=A>0;if(k&&(d++,console.log(`Deal ${C+1} (CLOSED_WON):`,{id:b.id,name:b.name,stage:E,close_date:w,close_date_type:typeof w,amount:A,amount_type:typeof b.amount,hasCloseDate:S,hasAmount:T,willBeAdded:S&&T,allFields:Object.keys(b)})),S&&k&&T)try{let _=new Date(w);if(isNaN(_.getTime())){const I=String(w).split("T")[0];_=new Date(I+"T00:00:00")}if(isNaN(_.getTime()))console.warn(` Invalid date for deal ${b.id}:`,w,"Type:",typeof w);else{const I=_.getFullYear(),R=_.getMonth()+1,U=`${I}-${String(R).padStart(2,"0")}`;l[U]||(l[U]=0),l[U]+=A,c++,console.log(` Added deal ${b.id} to month ${U}: ${A}, total: ${l[U]}`),console.log(`  - Close date: ${w} -> Parsed: ${_.toISOString()} -> Month: ${U} (Year: ${I}, Month: ${R})`)}}catch(_){console.error("Error parsing deal date:",w,_)}else k&&console.warn(` Deal ${b.id} is CLOSED_WON but missing data:`,{hasCloseDate:S,hasAmount:T,closeDate:w,amount:A,originalAmount:b.amount})}),console.log("Summary:",{totalDeals:e.length,closedWonDeals:d,validDealsForGraph:c,monthlyRevenue:l});const u=Object.keys(l).map(b=>parseInt(b.split("-")[0])),f=u.length>0?[...new Set(u)].sort():[],p=new Date().getFullYear();new Date().getMonth();const x=[],v=[];for(let b=0;b<12;b++){const C=`${p}-${String(b+1).padStart(2,"0")}`;x.push(s[b]);const w=l[C]||0;v.push(w),w>0&&console.log(`Month ${s[b]} (${C}): ${w}`)}if(f.length>0){const b=Math.max(...f);if(b>p)for(let C=p+1;C<=b;C++)for(let w=0;w<12;w++){const S=`${C}-${String(w+1).padStart(2,"0")}`,E=l[S]||0;x.push(`${s[w]} ${C}`),v.push(E),E>0&&console.log(`Month ${s[w]} ${C} (${S}): ${E}`)}}const N=Math.max(...v,1);return console.log("Final chart data:",{labels:x,revenues:v,maxRevenue:N,hasData:v.some(b=>b>0)}),{labels:x,revenues:v,maxRevenue:N}},[e]),i=r.labels,o=r.revenues;return console.log("=== FINAL CHART DATA ==="),console.log("X Axis (Months):",i),console.log("Y Axis (Revenue):",o),console.log("Has any revenue > 0:",o.some(l=>l>0)),console.log("All revenue values:",o),console.log("Max revenue:",r.maxRevenue),n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/group-manager/deals"),children:[n.jsx("span",{children:"See All"}),n.jsx(FJ,{size:14,className:"transform -rotate-45"})]})]}),n.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:n.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i&&i.length>0&&o&&o.length>0?n.jsx(BN,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:l=>l>=1e3?`${(l/1e3).toFixed(0)}k`:l.toString()}],series:[{data:o,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%"}}):n.jsxs("div",{className:"text-center text-gray-500",children:[n.jsx("p",{className:"text-sm",children:"No revenue data available"}),n.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},nWe=({pipelineData:e,loading:t})=>{const a=bt(),s=o=>{const l=(o||"").toUpperCase(),c={PROSPECTING:{name:"Prospecting",color:"bg-blue-500"},QUALIFICATION:{name:"Qualification",color:"bg-yellow-500"},PROPOSAL:{name:"Proposal",color:"bg-orange-500"},NEGOTIATION:{name:"Negotiation",color:"bg-purple-500"},CLOSED_WON:{name:"Closed Won",color:"bg-green-500"},CLOSED_LOST:{name:"Closed Lost",color:"bg-red-500"}};if(c[l])return c[l];const d=["bg-blue-500","bg-yellow-500","bg-orange-500","bg-purple-500","bg-green-500","bg-red-500"],u=Math.abs(l.split("").reduce((f,p)=>f+p.charCodeAt(0),0))%d.length;return{name:o||"Unknown",color:d[u]}},i=(()=>{if(!e||e.length===0)return["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"].map(f=>{const p=s(f);return{stage:p.name,value:0,deals:0,color:p.color}});const o={};e.forEach(u=>{const f=u.stage||"PROSPECTING";o[f]||(o[f]={deals:0,value:0}),o[f].deals+=1,o[f].value+=parseFloat(u.amount||0)});const l=Math.max(...Object.values(o).map(u=>u.value),1),c=["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"],d=[];return c.forEach(u=>{const f=s(u),p=o[u]||{deals:0,value:0};d.push({stage:f.name,value:p.value,deals:p.deals,color:f.color,percentage:l>0?p.value/l*100:0})}),d})();return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Sales Pipeline"}),n.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:()=>a("/group-manager/deals"),children:"See All"})]}),n.jsx("div",{className:"space-y-4 flex-grow",children:i.slice(0,6).map(o=>n.jsxs("div",{className:"flex flex-col cursor-pointer hover:opacity-85 transition duration-150",onClick:()=>a("/group-manager/deals"),children:[n.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[n.jsx("span",{className:"font-medium text-gray-700",children:o.stage}),n.jsx("span",{className:"font-semibold text-gray-800",children:GJ(o.value)})]}),n.jsx("div",{className:"relative h-2 rounded-full bg-gray-200",children:n.jsx("div",{className:`absolute top-0 left-0 h-full rounded-full ${o.color}`,style:{width:`${Math.min(o.percentage,100)}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[o.deals," Deals"]})]},o.stage))})]})},FA=({title:e,items:t,children:a,onSeeAll:s})=>{const r=bt(),i=()=>{if(s)s();else{const o={"Latest Leads":"/group-manager/leads","Latest Deals":"/group-manager/deals","Upcoming Activities":"/group-manager/tasks"};o[e]&&r(o[e])}};return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),n.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),a]})},aWe=({first_name:e,last_name:t,company_name:a,source:s,created_at:r,id:i})=>{const o=bt(),{text:l,bg:c}=YGe(s||"Website"),d=x=>{if(!x)return"Unknown";const v=new Date(x),b=new Date-v,C=Math.floor(b/6e4),w=Math.floor(b/36e5),S=Math.floor(b/864e5);return C<60?`${C} min ago`:w<24?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):S<7?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):v.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},u=`${e||""} ${t||""}`.trim()||"Unknown",f=a||"Unknown Company",p=d(r);return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&o(`/group-manager/leads/${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800",children:u}),n.jsx("p",{className:"text-xs text-gray-500",children:f})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-400",children:p}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${l} ${c} px-2 py-0.5 rounded-full`,children:s||"Website"})]})]})})},sWe=({name:e,amount:t,account:a,stage:s,created_at:r,id:i,previousAmount:o})=>{const l=bt(),d={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[s]||s||"Unknown",{text:u,bg:f}=VGe(d),p=parseFloat(t||0),x=o?p>=o?"up":"down":"up",v=x==="up"?DGe:OGe,N=x==="up"?"text-green-400":"text-red-400",b=a?.name||"Unknown Company";return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&l(`/group-manager/deals/info?id=${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex-shrink",children:[n.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),n.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:b}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${u} ${f} px-2 py-0.5 rounded-full`,children:d})]}),n.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[n.jsx("p",{className:"text-md font-bold text-gray-800",children:GJ(p)}),n.jsx(v,{size:16,className:`${N} mt-1`})]})]})})},rWe=({type:e,title:t,assignedTo:a,dueDate:s,scheduledDate:r,priority:i,id:o,activityType:l,fullData:c})=>{const d=bt(),f=l||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:p,color:x,bgColor:v}=QGe(f),{text:N,bg:b}=KGe(i||"MEDIUM"),S=(A=>{if(!A)return"No date set";const T=new Date(A),I=T-new Date,R=Math.floor(I/864e5);return R===0?`Today, ${T.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:R===1?`Tomorrow, ${T.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:R===-1?`Yesterday, ${T.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:T.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(s||r),E=a||"Unassigned",k=()=>{o&&(c?f==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(c)),d(`/group-manager/calls/info?id=${o}`)):f==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(c)),d(`/group-manager/meetings/info?id=${o}`)):d("/group-manager/tasks"):d(f==="call"?`/group-manager/calls/info?id=${o}`:f==="meeting"?`/group-manager/meetings/info?id=${o}`:"/group-manager/tasks"))};return n.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:k,children:[n.jsx("div",{className:`p-2 rounded-lg ${v} mr-3 flex-shrink-0 mt-1`,children:n.jsx(p,{size:20,className:`${x}`})}),n.jsxs("div",{className:"flex-grow",children:[n.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[n.jsx("span",{className:"text-xl leading-none mr-2",children:""}),t||"Untitled Activity"]}),n.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[n.jsxs("p",{className:"flex items-center",children:[n.jsx(UJ,{size:14,className:"mr-1.5 text-gray-400"}),S]}),n.jsxs("p",{className:"flex items-center",children:[n.jsx(BJ,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",E]})]})]}),n.jsx("span",{className:`inline-block text-xs font-medium ${N} ${b} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},iWe=()=>{const e=bt(),{user:t}=Xt(),[a,s]=h.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0}),[r,i]=h.useState([]),[o,l]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState([]),[p,x]=h.useState([]),[v,N]=h.useState([]),[b,C]=h.useState(!0),[w,S]=h.useState(null),[E,k]=h.useState(""),[A,T]=h.useState([]),[_,I]=h.useState([]),[R,U]=h.useState([]),[D,M]=h.useState(new Date),W=h.useRef(null),X=h.useRef(null),z=h.useMemo(()=>{try{if(!E.trim())return[];const se=E.toLowerCase().trim(),J=[];return Array.isArray(A)&&A.forEach(F=>{const Ne=`${F.first_name||""} ${F.last_name||""}`.trim().toLowerCase(),re=(F.company_name||"").toLowerCase(),he=(F.email||"").toLowerCase(),je=(F.phone||"").toLowerCase();(Ne.includes(se)||re.includes(se)||he.includes(se)||je.includes(se))&&J.push({id:F.id,name:`${F.first_name||""} ${F.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:F.company_name||"No company",route:`/group-manager/leads/${F.id}`})}),Array.isArray(_)&&_.forEach(F=>{const Ne=(F.name||"").toLowerCase(),re=(F.account?.name||"").toLowerCase(),he=(F.description||"").toLowerCase();(Ne.includes(se)||re.includes(se)||he.includes(se))&&J.push({id:F.id,name:F.name||"Unnamed Deal",type:"Deal",details:F.account?.name||"No account",route:`/group-manager/deals/info?id=${F.id}`})}),Array.isArray(R)&&R.forEach(F=>{const Ne=(F.name||"").toLowerCase(),re=(F.email||"").toLowerCase(),he=(F.phone||"").toLowerCase(),je=(F.website||"").toLowerCase();(Ne.includes(se)||re.includes(se)||he.includes(se)||je.includes(se))&&J.push({id:F.id,name:F.name||"Unnamed Account",type:"Account",details:F.email||F.phone||"No contact info",route:"/group-manager/accounts"})}),J.slice(0,10)}catch(se){return console.error("Error in search:",se),[]}},[E,A,_,R]),Q=se=>{se.route&&(e(se.route),k(""))},de=h.useCallback(async()=>{C(!0),S(null);try{const[se,J,F,Ne,re,he,je]=await Promise.all([ie.get("/leads/group-manager/getLeads").catch(ce=>(console.error("Error fetching leads:",ce),{data:[]})),ie.get("/deals/group-manager/fetch-all").catch(ce=>(console.error("Error fetching deals:",ce),{data:[]})),ie.get("/accounts/group-manager/fetch-all").catch(ce=>(console.error("Error fetching accounts:",ce),{data:[]})),ie.get("/tasks/all").catch(ce=>(console.error("Error fetching tasks:",ce),{data:[]})),ie.get("/meetings/group-manager/fetch-all").catch(ce=>(console.error("Error fetching meetings:",ce),{data:[]})),ie.get("/calls/group-manager/fetch-all").catch(ce=>(console.error("Error fetching calls:",ce),{data:[]})),ie.get("/logs/read-all").catch(ce=>(console.error("Error fetching logs:",ce),{data:[]}))]),De=Array.isArray(se.data)?se.data:[],Me=Array.isArray(J.data)?J.data:[],ve=Array.isArray(F.data)?F.data:[],Be=Array.isArray(Ne.data)?Ne.data:[],ke=Array.isArray(re.data)?re.data:[],fe=Array.isArray(he.data)?he.data:[],ne=Array.isArray(je.data)?je.data:[];console.log("=== RAW DEALS API RESPONSE ==="),console.log("Deals count:",Me.length),Me.length>0&&(console.log("First deal sample (raw):",JSON.stringify(Me[0],null,2)),console.log("First deal keys:",Object.keys(Me[0]))),T(De),I(Me),U(ve);const Ae=De.filter(ce=>ce.status&&!["Lost","Converted"].includes(ce.status)).length,ye=Be.filter(ce=>!ce.dueDate||ce.status==="Completed"?!1:new Date(ce.dueDate)<new Date).length;s({activeLeads:Ae,totalDeals:Me.length,activeAccounts:ve.length,overdueTasks:ye});const Ie=[...De].sort((ce,Ee)=>new Date(Ee.created_at||0)-new Date(ce.created_at||0)).slice(0,5);i(Ie);const Ve=[...Me].sort((ce,Ee)=>new Date(Ee.created_at||0)-new Date(ce.created_at||0)).slice(0,5);l(Ve);const Te=new Date,Fe=[];fe.forEach(ce=>{const Ee=ce.due_date||ce.call_time,ae=(ce.status||"").toUpperCase();if(Ee){const He=new Date(Ee);ae==="COMPLETED"||ae==="MISSED"||ae==="NOT_HELD"||ae==="HELD"||Fe.push({type:"Call",title:ce.subject||"Untitled Call",assignedTo:ce.assigned_to||(ce.call_assign_to?`${ce.call_assign_to.first_name||""} ${ce.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:Ee,priority:(ce.priority||"MEDIUM").toUpperCase(),id:ce.id,activityType:"call",fullData:ce})}}),ke.forEach(ce=>{const Ee=ce.dueDate||ce.start_time,ae=(ce.status||"").toUpperCase();if(Ee){const He=new Date(Ee);ae==="COMPLETED"||ae==="CANCELLED"||ae==="DONE"||Fe.push({type:"Meeting",title:ce.subject||ce.activity||"Untitled Meeting",assignedTo:ce.assignedTo||(ce.meet_assign_to?`${ce.meet_assign_to.first_name||""} ${ce.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:Ee,priority:(ce.priority||"MEDIUM").toUpperCase(),id:ce.id,activityType:"meeting",fullData:ce})}});const Ye={HIGH:1,MEDIUM:2,LOW:3},B=Fe.sort((ce,Ee)=>{const ae=Ye[ce.priority]||3,He=Ye[Ee.priority]||3;if(ae!==He)return ae-He;const Re=new Date(ce.scheduledDate||0),it=new Date(Ee.scheduledDate||0);return Re-it}).slice(0,5);d(B),f(Me),console.log("=== ALL DEALS DATA ==="),console.log("Total deals:",Me.length);const xe=Me.filter(ce=>(ce.stage||"").toUpperCase()==="CLOSED_WON");console.log("CLOSED_WON deals:",xe.length),xe.length>0?(console.log("=== CLOSED_WON DEALS DETAILS ==="),xe.forEach((ce,Ee)=>{let ae=ce.amount;ae&&typeof ae=="object"?ae.toString?ae=parseFloat(ae.toString()):ae=parseFloat(ae):ae=parseFloat(ae)||0,console.log(`Deal ${Ee+1}:`,{id:ce.id,name:ce.name,stage:ce.stage,stage_upper:(ce.stage||"").toUpperCase(),amount:ce.amount,amount_parsed:ae,amount_type:typeof ce.amount,close_date:ce.close_date,close_date_type:typeof ce.close_date,close_date_value:ce.close_date?new Date(ce.close_date):null,has_close_date:!!ce.close_date,has_amount:ae>0,all_keys:Object.keys(ce),full_deal:ce})})):(console.log(" No CLOSED_WON deals found!"),console.log("All deal stages:",Me.map(ce=>ce.stage))),N(Me);const _e=[...ne].sort((ce,Ee)=>new Date(Ee.timestamp||0)-new Date(ce.timestamp||0));x(_e)}catch(se){console.error("Error fetching dashboard data:",se),S("Failed to load dashboard data. Please refresh the page.")}finally{C(!1)}},[]);h.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",console.log("TManagerDashboard mounted, fetching data..."),de(),W.current=setInterval(()=>{console.log("Auto-refreshing dashboard data..."),de(),M(new Date)},3e4),()=>{W.current&&clearInterval(W.current)}),[de]),h.useEffect(()=>{if(!t||!t.id)return;let se=0;const J=3;let F=null;const Ne=()=>{const re=window.location.protocol==="https:"?"wss:":"ws:",he=window.location.hostname==="localhost"?"localhost:8000":window.location.host,je=`${re}//${he}/ws/notifications?user_id=${t.id}`;try{const De=new WebSocket(je);X.current=De,De.onopen=()=>{console.log(" WebSocket connected for dashboard updates"),se=0},De.onmessage=Me=>{try{const ve=JSON.parse(Me.data);console.log(" Real-time notification received:",ve),ve.event&&["new_task","task_updated","new_lead","lead_updated","new_deal","deal_updated","new_account","account_updated","new_meeting","meeting_updated","new_call","call_updated"].includes(ve.event)&&(console.log(" Refreshing dashboard due to:",ve.event),de(),M(new Date))}catch(ve){console.error("Error parsing WebSocket message:",ve)}},De.onerror=Me=>{se===0&&console.warn(" WebSocket connection unavailable (this is optional)")},De.onclose=()=>{se<J&&(se++,F=setTimeout(()=>{t&&t.id&&Ne()},5e3))}}catch{console.warn(" WebSocket not available (optional feature)")}};return Ne(),()=>{F&&clearTimeout(F),X.current&&(X.current.close(),X.current=null)}},[t,de]);const Y=[{icon:RGe,title:"Active Leads",value:a.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/group-manager/leads")},{icon:HJ,title:"Total Deals",value:a.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/group-manager/deals")},{icon:zJ,title:"Active Account",value:a.activeAccounts,color:"text-green-600",bgColor:"bg-green-50",onClick:()=>e("/group-manager/accounts")},{icon:UJ,title:"Overdue Tasks",value:a.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/group-manager/tasks")}];return console.log("TManagerDashboard rendering, loading:",b,"error:",w),n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[b&&n.jsx(zt,{}),n.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[w&&n.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:n.jsx("p",{className:"font-medium",children:w})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 mb-8",children:[n.jsxs("div",{className:"lg:col-span-9 flex flex-col space-y-4",children:[n.jsx(XGe,{searchQuery:E,onSearchChange:k,searchResults:z,onSearchResultClick:Q}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:Y.map(se=>n.jsx(eWe,{...se,loading:b},se.title))})]}),n.jsx("div",{className:"lg:col-span-3",children:n.jsx(JGe,{logs:p,loading:b})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[n.jsx("div",{className:"lg:col-span-2",children:n.jsx(tWe,{revenueData:v,loading:b})}),n.jsx("div",{children:n.jsx(nWe,{pipelineData:u,loading:b})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsx(FA,{title:"Latest Leads",children:r.length>0?r.map((se,J)=>n.jsx(aWe,{...se},se.id||J)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),n.jsx(FA,{title:"Latest Deals",children:b?n.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mb-2"}),n.jsx("div",{className:"text-sm text-gray-500",children:"Loading deals..."})]}):o.length>0?o.map((se,J)=>n.jsx(sWe,{...se},se.id||J)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),n.jsx(FA,{title:"Upcoming Activities",children:c.length>0?c.map((se,J)=>n.jsx(rWe,{...se},se.id||J)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})},BA=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Vendor"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Delete"}],HA={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",parent_company:"",status:"PROSPECT",territory_id:"",assigned_to:""},Sr=e=>e?e.toUpperCase():"",GA=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",oWe=e=>{switch(Sr(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},lWe=e=>{switch(Sr(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}};function cWe(){const e=bt();h.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[t,a]=h.useState(!1),[s,r]=h.useState(!1),[i,o]=h.useState(!1),[l,c]=h.useState(null),[d,u]=h.useState(null),[f,p]=h.useState(HA),[x,v]=h.useState(null),[N,b]=h.useState([]),[C,w]=h.useState(!1),[S,E]=h.useState([]),[k,A]=h.useState(null),[T,_]=h.useState([]),[I,R]=h.useState([]),[U,D]=h.useState("Filter by Status"),[M,W]=h.useState(""),[X,z]=h.useState(null),[Q,de]=h.useState(!1),[Y,se]=h.useState(1),[J,F]=h.useState(10),[Ne,re]=h.useState("Overview"),[he,je]=h.useState(""),[De,Me]=h.useState(!1),[ve,Be]=h.useState({}),[ke,fe]=h.useState(null),ne=h.useCallback(async(oe=null)=>{w(!0);try{const rt=await ie.get("/accounts/admin/fetch-all"),Nt=[...Array.isArray(rt.data)?rt.data:[]].sort((L,H)=>{const we=L?.created_at||L?.updated_at||0,Pe=H?.created_at||H?.updated_at||0;return new Date(Pe)-new Date(we)});if(b(Nt),console.log("Fetch from backend: ",rt.data),oe){const L=Nt.find(H=>H.id===oe);v(L||null)}}catch(rt){console.error(rt),b([]),rt.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch accounts. Please try again later.")}finally{w(!1)}},[v]),Ae=h.useCallback(async()=>{try{const oe=await ie.get("/users/all");E(Array.isArray(oe.data)?oe.data:[])}catch(oe){console.error(oe),oe.response?.status===403&&q.warn("Unable to load users for assignment (permission denied).")}},[]),ye=h.useCallback(async()=>{try{const oe=await ie.get("/territories/fetch");_(Array.isArray(oe.data)?oe.data:[])}catch(oe){console.error(oe),oe.response?.status===403&&q.warn("Unable to load territories (permission denied).")}},[]),Ie=h.useCallback(async()=>{try{const oe=await ie.get("/accounts/admin/parent-companies");R(Array.isArray(oe.data)?oe.data:[])}catch(oe){console.error(oe),oe.response?.status===403&&q.warn("Unable to load parent companies (permission denied).")}},[]),Ve=h.useCallback(async oe=>{try{const rt=await ie.get(`/activities/accounts/${oe}`);console.log("Related activities: ",rt.data),Be(rt.data&&typeof rt.data=="object"?rt.data:{})}catch(rt){console.error(rt),rt.response?.status===404&&(console.warn("No activities found for this account."),Be({}))}},[]);h.useEffect(()=>{ne(),Ae(),ye(),Ie()},[ne,Ae,ye,Ie]),h.useEffect(()=>{x&&je(Sr(x.status)||"PROSPECT")},[x]);const Te=N.length,Fe=h.useMemo(()=>N.filter(oe=>oe.status?.toLowerCase()==="customer").length,[N]),Ye=h.useMemo(()=>N.filter(oe=>oe.status?.toLowerCase()==="prospect").length,[N]),B=h.useMemo(()=>N.filter(oe=>oe.status?.toLowerCase()==="partner").length,[N]),xe=h.useMemo(()=>N.filter(oe=>oe.status?.toLowerCase()==="active").length,[N]),_e=h.useMemo(()=>N.filter(oe=>oe.status?.toLowerCase()==="inactive").length,[N]),ce=h.useMemo(()=>N.filter(oe=>oe.status?.toLowerCase()==="former").length,[N]),Ee=h.useMemo(()=>[{title:"Total",value:Te,icon:Zn,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:Fe,icon:Ao,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:Ye,icon:Gn,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:B,icon:en,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:xe,icon:Ao,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:_e,icon:To,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:ce,icon:To,color:"text-orange-600",bgColor:"bg-orange-100"}],[Te,Fe,Ye,B,xe,_e,ce]),ae=h.useMemo(()=>{const oe=M.trim().toLowerCase(),rt=U.trim().toUpperCase();return N.filter(_t=>{const Nt=[_t?.name,_t?.website,_t?.industry,_t?.territory?.name,_t?.phone_number],L=oe===""||Nt.some(we=>we==null?!1:we.toString().toLowerCase().includes(oe)),H=rt==="FILTER BY STATUS"||Sr(_t.status)===rt;return L&&H})},[N,M,U]),He=Math.max(1,Math.ceil(ae.length/J)||1);h.useEffect(()=>{se(1)},[M,U,J]),h.useEffect(()=>{se(oe=>{const rt=Math.max(1,Math.ceil(ae.length/J)||1);return oe>rt?rt:oe})},[ae.length,J]);const Re=h.useMemo(()=>{const oe=(Y-1)*J;return ae.slice(oe,oe+J)},[ae,Y,J]);ae.length===0||(Y-1)*J+1,Math.min(Y*J,ae.length);const it=()=>se(oe=>Math.max(oe-1,1)),mt=()=>se(oe=>Math.min(oe+1,He)),ee=oe=>{v(oe),re("Overview"),je(Sr(oe?.status)||"PROSPECT")},pe=()=>v(null),Ue=oe=>{oe.target.id==="accountModalBackdrop"&&!Q&&pe()},Ze=()=>{a(!1),r(!1),u(null),p(HA),o(!1),A(null)},nt=oe=>{oe.target.id==="modalBackdrop"&&Ze()},Je=oe=>oe?new Date(oe).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",Oe=oe=>{const{name:rt,value:_t}=oe.target;p(Nt=>({...Nt,[rt]:_t}))},ge=()=>{p(HA),r(!1),u(null),a(!0)},Ke=oe=>{v(null),console.log("edit: ",oe),oe.assigned_accs?A(oe.assigned_accs):A(null),p({name:oe.name||"",website:oe.website||"",phone_number:oe.phone_number||"",billing_address:oe.billing_address||"",shipping_address:oe.shipping_address||"",industry:oe.industry||"",status:Sr(oe.status)||"PROSPECT",territory_id:oe.territory?.id?String(oe.territory.id):"",assigned_to:oe.assigned_accs?.id?String(oe.assigned_accs.id):""}),r(!0),u(oe.id),a(!0)},G=oe=>{oe&&z({title:"Delete Account",message:n.jsxs("span",{children:["Are you sure you want to permanently delete the account"," ",n.jsx("span",{className:"font-semibold",children:oe.name}),"? This action cannot be undone."]}),confirmLabel:"Delete Account",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:oe.id,name:oe.name}})},$=async()=>{if(!X?.action){z(null);return}const{action:oe}=X,{type:rt,payload:_t,targetId:Nt,name:L}=oe;de(!0);try{if(rt==="create"){o(!0);const H=await ie.post("/accounts/admin",_t);Ie(),q.success(`Account "${L}" created successfully.`);const we=x?.id||null;Ze(),await ne(we),!x&&H.data?.id}else if(rt==="update"){if(!Nt)throw new Error("Missing account identifier for update.");o(!0),await ie.put(`/accounts/admin/${Nt}`,_t),q.success(`Account "${L}" updated successfully.`);const H=x?.id&&x.id===Nt?Nt:null;Ze(),await ne(H),x?.id===Nt&&v(null)}else if(rt==="delete"){if(!Nt)throw new Error("Missing account identifier for deletion.");const H=x?.id;c(Nt),await ie.delete(`/accounts/admin/${Nt}`),q.success(`Account "${L}" deleted successfully.`),await ne(H&&H!==Nt?H:null),H===Nt&&v(null)}}catch(H){console.error(H);const we=rt==="create"?"Failed to create account. Please review the details and try again.":rt==="update"?"Failed to update account. Please review the details and try again.":"Failed to delete account. Please try again.",Pe=H.response?.data?.detail||we;q.error(Pe),(rt==="create"||rt==="update")&&o(!1),rt==="delete"&&c(null)}finally{(rt==="create"||rt==="update")&&o(!1),rt==="delete"&&c(null),de(!1),z(null)}},V=()=>{Q||z(null)},te=async()=>{if(!x||!he)return;const oe=Sr(he),rt=Sr(x.status);if(oe!==rt){Me(!0);try{await ie.put(`/accounts/admin/${x.id}`,{status:oe}),q.success(`Account status updated to ${GA(oe)}`),b(_t=>_t.map(Nt=>Nt.id===x.id?{...Nt,status:oe}:Nt)),v(null)}catch(_t){console.error(_t);const Nt=_t.response?.data?.detail||"Failed to update account status. Please try again.";q.error(Nt)}finally{Me(!1)}}},[Z,Se]=h.useState(!1),me=oe=>{oe.preventDefault(),Se(!0);const rt=f.name.trim();if(!rt){q.error("Account name is required.");return}if(!f.assigned_to){q.error("Assigned To is required.");return}const Nt={name:rt,website:f.website?.trim()||null,phone_number:f.phone_number?.trim()||null,billing_address:f.billing_address?.trim()||null,shipping_address:f.shipping_address?.trim()||null,industry:f.industry?.trim()||null,parent_company:f.parent_company?.trim()||null,status:f.status||"PROSPECT",territory_id:f.territory_id?Number(f.territory_id):null,assigned_to:f.assigned_to?Number(f.assigned_to):null},L=s&&d?"update":"create";z({title:L==="create"?"Confirm New Account":"Confirm Update",message:L==="create"?n.jsxs("span",{children:["Are you sure you want to create the account"," ",n.jsx("span",{className:"font-semibold",children:rt}),"?"]}):n.jsxs("span",{children:["Save changes to the account"," ",n.jsx("span",{className:"font-semibold",children:rt}),"?"]}),confirmLabel:L==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:L,payload:Nt,targetId:d||null,name:rt}})},ue=[{label:"Filter by Status",value:"Filter by Status"},...BA.map(oe=>({label:oe.label,value:oe.value}))],$e=X?.action?.type==="delete"?X.action.targetId:null,be=x&&(l===x.id||$e===x.id),We=x&&l===x.id,ft=x?oWe(x.status):"",yt=x?n.jsx("div",{id:"accountModalBackdrop",onClick:Ue,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:oe=>oe.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),n.jsx("button",{onClick:pe,className:"text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Wn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:x.name}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${ft}`,children:GA(x.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Ke(x),disabled:X?.action?.type==="update"&&X.action.targetId===x.id,children:[n.jsx(ia,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>G(x),disabled:!!be,children:We?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Ut,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(oe=>n.jsx("button",{onClick:()=>re(oe),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${Ne===oe?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:oe},oe))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Ne==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Website:"}),n.jsx("p",{children:x.website?n.jsx("a",{href:x.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:x.website}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Industry:"}),n.jsx("p",{children:x.industry||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Parent Company:"}),n.jsx("p",{children:x.parent_company||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:x.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:x.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Billing Address:"}),n.jsx("p",{children:x.billing_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),n.jsx("p",{children:x.shipping_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:x.assigned_accs?`${x.assigned_accs.first_name} ${x.assigned_accs.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:x.acc_creator?`${x.acc_creator.first_name} ${x.acc_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:Je(x.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:Je(x.updated_at)||"N/A"})]})]})}),Ne==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:N.notes||"No notes available."})]})]}),Ne==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[ve.tasks&&ve.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>fe(ke==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",ve.tasks.length,")"]})]}),ke==="tasks"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),ke==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ve.tasks.map((oe,rt)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/tasks",{state:{taskID:oe.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:oe.subject||oe.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:oe.description||"No description"}),oe.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",oe.assigned_to.first_name," ",oe.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Je(oe.due_date||oe.created_at)})]},`task-${rt}`))})]}),ve.meetings&&ve.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>fe(ke==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ct,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",ve.meetings.length,")"]})]}),ke==="meetings"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),ke==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ve.meetings.map((oe,rt)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/meetings",{state:{meetingID:oe.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Ct,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:oe.subject||oe.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:oe.description||oe.location||"No description"}),oe.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",oe.host.first_name," ",oe.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Je(oe.start_time||oe.created_at)})]},`meeting-${rt}`))})]}),ve.calls&&ve.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>fe(ke==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(At,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",ve.calls.length,")"]})]}),ke==="calls"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),ke==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ve.calls.map((oe,rt)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/calls",{state:{callID:oe.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(At,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:oe.subject||oe.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:oe.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Je(oe.call_time||oe.created_at)})]},`call-${rt}`))})]}),ve.contacts&&ve.contacts.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>fe(ke==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(en,{className:"text-teal-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",ve.contacts.length,")"]})]}),ke==="contacts"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),ke==="contacts"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ve.contacts.map((oe,rt)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/contacts",{state:{contactID:oe.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-teal-600 mt-1",children:n.jsx(en,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[oe.first_name?`${oe.first_name} `:"",oe.last_name]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:oe.title||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Je(oe.created_at)})]},`contact-${rt}`))})]}),ve.deals&&ve.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>fe(ke==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Kt,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",ve.deals.length,")"]})]}),ke==="deals"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),ke==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ve.deals.map((oe,rt)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/deals",{state:{dealID:oe.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(Kt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[oe.deal_id?oe.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",oe.name||oe.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:oe.stage||oe.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Je(oe.close_date||oe.created_at)})]},`deal-${rt}`))})]}),ve.quotes&&ve.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>fe(ke==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(xn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",ve.quotes.length,")"]})]}),ke==="quotes"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),ke==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ve.quotes.map((oe,rt)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/quotes",{state:{quoteID:oe.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(xn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(oe.quote_id?oe.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:oe.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Je(oe.presented_date)||""})]},`quote-${rt}`))})]}),(!ve||(!ve.tasks||ve.tasks.length===0)&&(!ve.meetings||ve.meetings.length===0)&&(!ve.calls||ve.calls.length===0)&&(!ve.quotes||ve.quotes.length===0)&&(!ve.deals||ve.deals.length===0)&&(!ve.contacts||ve.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/group-manager/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assigned_to:x.assigned_accs?.id?String(x.assigned_accs.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(At,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/group-manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assignedTo:x.assigned_accs?.id?String(x.assigned_accs.id):"",status:"Planned"}}}),children:[n.jsx(Ct,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/group-manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assignedTo:x.assigned_accs?.id?String(x.assigned_accs.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:he||Sr(x?.status)||"PROSPECT",onChange:oe=>je(oe.target.value),children:BA.map(oe=>n.jsx("option",{value:oe.value,children:oe.label},oe.value))}),n.jsx("button",{onClick:te,disabled:De||!he||Sr(he)===Sr(x?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${De||!he||Sr(he)===Sr(x?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:De?"Updating...":"Update"})]})]})]})]})]})}):null,Tt=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[C&&n.jsx(zt,{message:"Loading accounts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Zn,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{ge(),Se(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(un,{className:"mr-2"})," Add Account"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ee.map(oe=>n.jsx(dWe,{...oe},oe.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Ht,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search accounts",value:M,onChange:oe=>W(oe.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:U,onChange:oe=>D(oe.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:ue.map(oe=>n.jsx("option",{value:oe.value,children:oe.label},oe.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Industry"}),n.jsx("th",{className:"py-3 px-4",children:"Territory"}),n.jsx("th",{className:"py-3 px-4",children:"Phone"})]})}),n.jsx("tbody",{children:C?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"Loading accounts..."})}):ae.length>0?Re.map(oe=>n.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>{ee(oe),Ve(oe.id)},children:[n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:oe.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:oe.website||"--"})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${lWe(oe.status)}`,children:GA(oe.status)})}),n.jsx("td",{className:"py-3 px-4 text-sm",children:oe.industry||"--"}),n.jsx("td",{className:"py-3 px-4 text-sm",children:oe.territory?.name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(At,{className:"text-gray-500"}),n.jsx("span",{children:oe.phone_number||"--"})]})})]},oe.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"No accounts found."})})})]})}),n.jsx(tn,{className:"mt-4",totalItems:ae.length,pageSize:J,currentPage:Y,onPrev:it,onNext:mt,onPageSizeChange:F,label:"accounts"})]}),Et=t?n.jsx("div",{id:"modalBackdrop",onClick:nt,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:oe=>oe.stopPropagation(),children:[n.jsx("button",{onClick:()=>{Ze(),Se(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:i||Q,children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Account":"Add New Account"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:me,noValidate:!0,children:[n.jsx("div",{className:"md:col-span-2",children:n.jsx(Vm,{label:"Name",name:"name",value:f.name,onChange:Oe,placeholder:"Company name",required:!0,isSubmitted:Z})}),n.jsx(_B,{label:"Parent Company",value:f.parent_company,onChange:oe=>{p(rt=>({...rt,parent_company:oe}))},items:I.map(oe=>({id:oe,name:oe})),getLabel:oe=>oe?.name||"",placeholder:"Select parent company...",disabled:i}),n.jsx(Vm,{label:"Website",name:"website",value:f.website,onChange:Oe,placeholder:"https://example.com",disabled:i}),n.jsx(Vm,{label:"Phone Number",name:"phone_number",value:f.phone_number,onChange:Oe,placeholder:"09xx xxx xxxx",type:"tel",disabled:i}),n.jsx(Vm,{label:"Industry",name:"industry",value:f.industry,onChange:Oe,placeholder:"Industry",disabled:i}),n.jsx(Vm,{label:"Billing Address",name:"billing_address",value:f.billing_address,onChange:Oe,placeholder:"Billing address",disabled:i}),n.jsx(Vm,{label:"Shipping Address",name:"shipping_address",value:f.shipping_address,onChange:Oe,placeholder:"Shipping address",disabled:i}),n.jsx(SB,{label:"Status",name:"status",value:f.status,onChange:Oe,options:[{value:"",label:"Select status"},...BA],required:!0,disabled:i}),n.jsx(_B,{label:"Assigned To",value:f.assigned_to,onChange:oe=>{const rt=S.find(Nt=>String(Nt.id)===String(oe));A(rt);let _t=null;rt&&rt.assigned_territory&&rt.assigned_territory.length===1&&(_t=rt.assigned_territory[0].id),p(Nt=>({...Nt,assigned_to:oe,territory_id:_t}))},items:S||[],getLabel:oe=>`${oe?.first_name??""} ${oe?.last_name??""} (${oe?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:Z,disabled:i||S.length===0}),n.jsx(SB,{label:"Territory",name:"territory_id",value:f.territory_id||"",onChange:Oe,options:[{value:"",label:k?k.assigned_territory&&k.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"},...k&&k.assigned_territory&&k.assigned_territory.map(oe=>({value:String(oe.id),label:oe.name}))||[]],disabled:i||!k||!k.assigned_territory||k.assigned_territory.length===0}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{Ze(),Se(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i||Q,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i||Q,children:i?"Saving...":s?"Update Account":"Save Account"})]})]})]})}):null,Gt=X?n.jsx(mWe,{open:!0,title:X.title,message:X.message,confirmLabel:X.confirmLabel,cancelLabel:X.cancelLabel,variant:X.variant,onConfirm:$,onCancel:V,loading:Q}):null;return n.jsxs(n.Fragment,{children:[Tt,yt,Et,Gt]})}function dWe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function Vm({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function SB({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(l=>n.jsx("option",{value:l.value,children:l.label},l.value))})]})}function _B({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1,allowFreeText:u=!1}){const f=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(uWe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:f,allowFreeText:u})]})}function uWe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1,allowFreeText:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),v=e.find(C=>String(C.id)===String(t)),N=v?s(v):t,b=h.useMemo(()=>{const C=f.trim().toLowerCase();return(C?e.filter(S=>(s(S)||"").toLowerCase().includes(C)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const C=w=>{x.current&&!x.current.contains(w.target)&&u(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:C=>{p(C.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsxs("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:[c&&f.trim()&&!b.some(C=>s(C).toLowerCase()===f.trim().toLowerCase())&&n.jsxs("button",{type:"button",onClick:()=>{a(f.trim()),u(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-green-50 bg-blue-50 font-medium text-blue-700",children:['+ Add "',f.trim(),'" as new parent company']}),b.length>0?b.map(C=>{const w=String(C.id),S=s(C),E=String(t)===w;return n.jsx("button",{type:"button",onClick:()=>{a(w),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${E?"bg-blue-50":""}`,children:S||"--"},w)}):!c||!f.trim()?n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"}):null]}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function mWe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const WA={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},dl=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),ro=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function fWe(){const e=bt(),t=Qt();h.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[a,s]=h.useState([]),[r,i]=h.useState(!1),[o,l]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState(null),[p,x]=h.useState(!1),[v,N]=h.useState(!1),[b,C]=h.useState(!1),[w,S]=h.useState(null),[E,k]=h.useState(!1),[A,T]=h.useState(null),[_,I]=h.useState(WA),[R,U]=h.useState(""),[D,M]=h.useState("Filter by Accounts"),[W,X]=h.useState(null),[z,Q]=h.useState("Overview"),[de,Y]=h.useState(1),[se,J]=h.useState(10),[F,Ne]=h.useState({}),[re,he]=h.useState(null),[je,De]=h.useState(null);h.useEffect(()=>{const G=t.state?.contactID;G&&(De(G),e(t.pathname,{replace:!0,state:{}}))},[t,e]),h.useEffect(()=>{if(je&&a.length>0&&!r){const G=a.find($=>$.id===je);G?f(G):q.error("Contact not found."),De(null)}},[je,a,r]);const Me=h.useCallback(async(G=null)=>{i(!0);try{const $=await ie.get("/contacts/admin/fetch-all"),te=[...Array.isArray($.data)?$.data:[]].sort((Z,Se)=>{const me=Z?.created_at||Z?.updated_at||0,ue=Se?.created_at||Se?.updated_at||0;return new Date(ue)-new Date(me)});if(s(te),G){const Z=te.find(Se=>Se.id===G);f(Z||null)}}catch($){console.error($),s([]),$.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch contacts. Please try again later.")}finally{i(!1)}},[f]),ve=h.useCallback(async()=>{try{const G=await ie.get("/accounts/admin/fetch-all"),V=[...Array.isArray(G.data)?G.data:[]].sort((te,Z)=>(te?.name||"").localeCompare(Z?.name||""));l(V)}catch(G){console.error(G),l([]),G.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},[]),Be=h.useCallback(async()=>{try{const G=await ie.get("/users/all"),V=[...Array.isArray(G.data)?G.data:[]].sort((te,Z)=>dl(te).localeCompare(dl(Z)));d(V)}catch(G){console.error(G),d([]),G.response?.status===403&&q.warn("Unable to load users for assignment (permission denied).")}},[]),ke=h.useCallback(async G=>{try{const $=await ie.get(`/activities/contact/${G}`);Ne($.data&&typeof $.data=="object"?$.data:{})}catch($){console.error($),$.response?.status===404&&(console.warn("No activities found for this account."),Ne({}))}},[]);h.useEffect(()=>{Me(),ve(),Be()},[Me,ve,Be]);const fe=h.useMemo(()=>{const G=new Map;o.forEach(V=>{V?.id&&V?.name&&G.set(String(V.id),V.name)}),a.forEach(V=>{V?.account_id&&V?.account?.name&&G.set(String(V.account_id),V.account.name)});const $=Array.from(G.entries()).sort((V,te)=>V[1].localeCompare(te[1])).map(([V,te])=>({value:V,label:te}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...$]},[o,a]),ne=h.useMemo(()=>{const G=R.trim().toLowerCase(),$=D.trim();return a.filter(V=>{const te=[V?.first_name,V?.last_name,V?.email,V?.title,V?.department,V?.account?.name,V?.account?.status,V?.work_phone,V?.mobile_phone_1,V?.mobile_phone_2,V?.assigned_contact?.first_name,V?.assigned_contact?.last_name,V?.contact_creator?.first_name,V?.contact_creator?.last_name,V?.notes,ro(V?.created_at),ro(V?.updated_at)],Z=G===""||te.some(me=>me==null?!1:me.toString().toLowerCase().includes(G)),Se=$==="Filter by Accounts"||String(V.account_id)===$;return Z&&Se})},[a,R,D]),Ae=Math.max(1,Math.ceil(ne.length/se)||1);h.useEffect(()=>{Y(1)},[R,D,se]),h.useEffect(()=>{Y(G=>{const $=Math.max(1,Math.ceil(ne.length/se)||1);return G>$?$:G})},[ne.length,se]);const ye=h.useMemo(()=>{const G=(de-1)*se;return ne.slice(G,G+se)},[ne,de,se]),Ie=()=>Y(G=>Math.max(G-1,1)),Ve=()=>Y(G=>Math.min(G+1,Ae)),Te=h.useMemo(()=>{if(!v||!A)return o;const G=a.find(V=>V.id===A);return!G||!G.account||o.some(V=>V.id===G.account.id)?o:[...o,G.account]},[o,v,A,a]),Fe=h.useCallback(()=>{x(!1),N(!1),T(null),I(WA),C(!1),ae(!1)},[]),Ye=G=>{G.target.id==="modalBackdrop"&&!b&&!E&&Fe()},B=G=>{const{name:$,value:V}=G.target;I(te=>({...te,[$]:V}))},xe=()=>{I(WA),N(!1),T(null),x(!0)},_e=async G=>{if(!G)return;const $=await ie.get(`/accounts/get/${G.account_id}`);I({first_name:G.first_name||"",last_name:G.last_name||"",account_id:$.data.id?$.data.id:"",title:G.title||"",department:G.department||"",email:G.email||"",work_phone:G.work_phone||"",mobile_phone_1:G.mobile_phone_1||"",mobile_phone_2:G.mobile_phone_2||"",notes:G.notes||"",assigned_to:G.assigned_to?String(G.assigned_to):""}),N(!0),T(G.id),x(!0),f(null)},ce=G=>{if(!G)return;const $=dl(G)||"this contact";S({title:"Delete Contact",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:$}),"? This action cannot be undone."]}),confirmLabel:"Delete Contact",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:G.id,name:$}})},[Ee,ae]=h.useState(!1),He=G=>{G.preventDefault(),ae(!0);const $=_.first_name.trim(),V=_.last_name.trim();if(!$||!V){q.error("First name and last name are required.");return}if(!_.account_id){q.error("Account is required.");return}if(!_.assigned_to){q.error("Assigned To is required.");return}const Z=_.email?.trim();if(!Z){q.error("Email is required.");return}if(!Z.includes("@")){q.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Z)){q.error("Please enter a valid email address.");return}const me={first_name:$,last_name:V,account_id:Number(_.account_id),title:_.title?.trim()||null,department:_.department?.trim()||null,email:_.email?.trim().toLowerCase()||null,work_phone:_.work_phone?.trim()||null,mobile_phone_1:_.mobile_phone_1?.trim()||null,mobile_phone_2:_.mobile_phone_2?.trim()||null,notes:_.notes?.trim()||null,assigned_to:_.assigned_to?Number(_.assigned_to):null},ue=v&&A?"update":"create",$e=`${$} ${V}`.trim();S({title:ue==="create"?"Confirm New Contact":"Confirm Update",message:ue==="create"?n.jsxs("span",{children:["Are you sure you want to add"," ",n.jsx("span",{className:"font-semibold",children:$e})," to your contacts?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:$e}),"?"]}),confirmLabel:ue==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:ue,payload:me,targetId:A||null,name:$e}})},Re=async()=>{if(!w?.action){S(null);return}const{action:G}=w,{type:$,payload:V,targetId:te,name:Z}=G;k(!0);try{if($==="create"){C(!0),await ie.post("/contacts/admin",V),q.success(`Contact "${Z}" created successfully.`);const Se=u?.id||null;Fe(),await Me(Se)}else if($==="update"){if(!te)throw new Error("Missing contact identifier for update.");C(!0),await ie.put(`/contacts/admin/${te}`,V),q.success(`Contact "${Z}" updated successfully.`);const Se=u?.id&&u.id===te?te:u?.id||null;Fe(),await Me(Se),u?.id===te&&f(null)}else if($==="delete"){if(!te)throw new Error("Missing contact identifier for deletion.");const Se=u?.id;X(te),await ie.delete(`/contacts/admin/${te}`),q.success(`Contact "${Z}" deleted successfully.`),await Me(Se&&Se!==te?Se:null),Se===te&&f(null)}}catch(Se){console.error(Se);const me=$==="create"?"Failed to create contact. Please review the details and try again.":$==="update"?"Failed to update contact. Please review the details and try again.":"Failed to delete contact. Please try again.",ue=Se.response?.data?.detail||me;q.error(ue)}finally{($==="create"||$==="update")&&C(!1),$==="delete"&&X(null),k(!1),S(null)}},it=()=>{E||S(null)},mt=G=>{f(G),Q("Overview")},ee=()=>f(null),pe=G=>{G.target.id==="contactModalBackdrop"&&!E&&ee()},Ue=w?.action?.type==="delete"?w.action.targetId:null,Ze=u&&(W===u.id||Ue===u.id),nt=u&&W===u.id,Je=u?n.jsx("div",{id:"contactModalBackdrop",onClick:pe,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:G=>G.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),n.jsx("button",{onClick:ee,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Wn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:dl(u)||"Unnamed contact"})}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>_e(u),disabled:E||w?.action?.type==="update"&&w.action.targetId===u.id,children:[n.jsx(ia,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>ce(u),disabled:!!Ze,children:nt?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Ut,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:n.jsx("p",{className:"text-sm text-gray-500",children:u.account?.name||"No associated account"})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(G=>n.jsx("button",{onClick:()=>Q(G),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${z===G?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:G},G))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[z==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact Name:"}),n.jsx("p",{children:dl(u)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Title:"}),n.jsx("p",{children:u.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:u.email?n.jsx("a",{href:`mailto:${u.email}`,className:"text-blue-600 hover:underline break-all",children:u.email}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:u.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:u.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:u.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:u.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:u.assigned_contact?`${u.assigned_contact.first_name} ${u.assigned_contact.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:u.contact_creator?`${u.contact_creator.first_name} ${u.contact_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:ro(u.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:ro(u.updated_at)||"N/A"})]})]})}),z==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:u.notes||"No notes available."})]})]}),z==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[F.tasks&&F.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(re==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",F.tasks.length,")"]})]}),re==="tasks"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),re==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:F.tasks.map((G,$)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/tasks",{state:{taskID:G.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:G.subject||G.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:G.description||"No description"}),G.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",G.assigned_to.first_name," ",G.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ro(G.due_date||G.created_at)})]},`task-${$}`))})]}),F.meetings&&F.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(re==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ct,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",F.meetings.length,")"]})]}),re==="meetings"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),re==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:F.meetings.map((G,$)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/meetings",{state:{meetingID:G.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Ct,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:G.subject||G.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:G.description||G.location||"No description"}),G.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",G.host.first_name," ",G.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ro(G.start_time||G.created_at)})]},`meeting-${$}`))})]}),F.calls&&F.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(re==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(At,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",F.calls.length,")"]})]}),re==="calls"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),re==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:F.calls.map((G,$)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/calls",{state:{callID:G.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(At,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:G.subject||G.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:G.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ro(G.call_time||G.created_at)})]},`call-${$}`))})]}),F.deals&&F.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(re==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Kt,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",F.deals.length,")"]})]}),re==="deals"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),re==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:F.deals.map((G,$)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/deals",{state:{dealID:G.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(Kt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[G.deal_id?G.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",G.name||G.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:G.stage||G.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ro(G.close_date||G.created_at)})]},`deal-${$}`))})]}),F.quotes&&F.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>he(re==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(xn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",F.quotes.length,")"]})]}),re==="quotes"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),re==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:F.quotes.map((G,$)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/quotes",{state:{quoteID:G.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(xn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(G.quote_id?G.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:G.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ro(G.presented_date)||""})]},`quote-${$}`))})]}),(!F||(!F.tasks||F.tasks.length===0)&&(!F.meetings||F.meetings.length===0)&&(!F.calls||F.calls.length===0)&&(!F.quotes||F.quotes.length===0)&&(!F.deals||F.deals.length===0)&&(!F.contacts||F.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsx("div",{className:"flex flex-col gap-4",children:n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/group-manager/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${dl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assigned_to:u?.assigned_contact?.id?String(u.assigned_contact.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(At,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!u?.email){alert("No email address available");return}const G=encodeURIComponent(u.email),$=encodeURIComponent(""),V=encodeURIComponent(""),te=`mailto:${G}?subject=${$}&body=${V}`;window.location.href=te},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Xn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/group-manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${dl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assignedTo:u?.assigned_contact?.id?String(u.assigned_contact.id):"",status:"Planned"}}}),children:[n.jsx(Ct,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/group-manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Task for ${dl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assignedTo:u?.assigned_contact?.id?String(u.assigned_contact.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,Oe=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&n.jsx(zt,{message:"Loading contacts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Zn,{className:"mr-2 text-blue-600"})," Contacts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{xe(),ae(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(un,{className:"mr-2"})," Add Contact"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Ht,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search contacts",value:R,onChange:G=>U(G.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:D,onChange:G=>M(G.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:fe.map(G=>n.jsx("option",{value:G.value,children:G.label},G.value??G.label))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),n.jsx("th",{className:"py-3 px-4",children:"Department"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Created"})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"Loading contacts..."})}):ne.length>0?ye.map(G=>{const $=[{Icon:Xn,value:G.email,key:"email"},{Icon:At,value:G.work_phone,key:"work_phone"},{Icon:Jc,value:G.mobile_phone_1,key:"mobile_phone_1"},{Icon:Jc,value:G.mobile_phone_2,key:"mobile_phone_2"}].filter(V=>!!V.value);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>{mt(G),ke(G.id)},children:[n.jsxs("td",{className:"py-3 px-4 align-top",children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:dl(G)||"--"}),n.jsx("div",{className:"text-xs text-gray-500",children:G.title||"No title"})]}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[n.jsx(Ex,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"break-words",children:G.account?.name||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:$.length>0?n.jsx("div",{className:"space-y-1 text-gray-700",children:$.map(({Icon:V,value:te,key:Z})=>{const Se=pt.createElement(V,{className:"text-gray-500 flex-shrink-0"});return n.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[Se,n.jsx("span",{children:te})]},Z)})}):n.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[n.jsx(Kt,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:G.department||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(en,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:G.assigned_contact?`${G.assigned_contact.first_name} ${G.assigned_contact.last_name}`:"Unassigned"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[n.jsx(Ct,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"text-xs",children:ro(G.created_at)||"--"})]})})]},G.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"No contacts found."})})})]})}),n.jsx(tn,{className:"mt-4",totalItems:ne.length,pageSize:se,currentPage:de,onPrev:Ie,onNext:Ve,onPageSizeChange:J,label:"contacts"})]}),ge=p?n.jsx("div",{id:"modalBackdrop",onClick:Ye,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:G=>G.stopPropagation(),children:[n.jsx("button",{onClick:()=>{Fe(),ae(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:b||E,children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:v?"Edit Contact":"Add New Contact"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:He,noValidate:!0,children:[n.jsx(Pc,{label:"First Name",name:"first_name",value:_.first_name,onChange:B,placeholder:"First name",required:!0,isSubmitted:Ee}),n.jsx(Pc,{label:"Last Name",name:"last_name",value:_.last_name,onChange:B,placeholder:"Last name",required:!0,isSubmitted:Ee}),n.jsx(AB,{label:"Account",value:_.account_id,onChange:G=>I($=>({...$,account_id:G})),items:v?Te:o||[],getLabel:G=>G?.name??"",placeholder:"Search account...",disabled:b||(v?Te.length===0:o.length===0),required:!0,isSubmitted:Ee}),n.jsx(AB,{label:"Assigned To",value:_.assigned_to,onChange:G=>I($=>({...$,assigned_to:G})),items:c||[],getLabel:G=>`${G?.first_name??""} ${G?.last_name??""} (${G?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:Ee,disabled:b||c.length===0}),n.jsx(Pc,{label:"Title",name:"title",value:_.title,onChange:B,placeholder:"Job title",disabled:b}),n.jsx(Pc,{label:"Department",name:"department",value:_.department,onChange:B,placeholder:"Department",disabled:b}),n.jsx(Pc,{label:"Email",name:"email",type:"email",value:_.email,onChange:B,placeholder:"example@email.com",required:!0,isSubmitted:Ee}),n.jsx(Pc,{label:"Work Phone",name:"work_phone",value:_.work_phone,onChange:B,placeholder:"09xx xxx xxxx",disabled:b}),n.jsx(Pc,{label:"Mobile Phone 1",name:"mobile_phone_1",value:_.mobile_phone_1,onChange:B,placeholder:"09xx xxx xxxx",disabled:b}),n.jsx(Pc,{label:"Mobile Phone 2",name:"mobile_phone_2",value:_.mobile_phone_2,onChange:B,placeholder:"09xx xxx xxxx",disabled:b}),n.jsx(gWe,{label:"Notes",name:"notes",value:_.notes,onChange:B,placeholder:"Additional details...",rows:3,disabled:b,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{Fe(),ae(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:b||E,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:b||E,children:b?"Saving...":v?"Update Contact":"Save Contact"})]})]})]})}):null,Ke=w?n.jsx(pWe,{open:!0,title:w.title,message:w.message,confirmLabel:w.confirmLabel,cancelLabel:w.cancelLabel,variant:w.variant,onConfirm:Re,onCancel:it,loading:E}):null;return n.jsxs(n.Fragment,{children:[Oe,Je,ge,Ke]})}function Pc({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${d}
        `})]})}function AB({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(hWe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function hWe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",N=h.useMemo(()=>{const b=u.trim().toLowerCase();return(b?e.filter(w=>(s(w)||"").toLowerCase().includes(b)):e).slice(0,o)},[e,u,s,o]);return h.useEffect(()=>{const b=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:v,placeholder:r,onFocus:()=>!i&&d(!0),onChange:b=>{f(b.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:N.length>0?N.map(b=>{const C=String(b.id),w=s(b),S=String(t)===C;return n.jsx("button",{type:"button",onClick:()=>{a(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},C)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function gWe({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function pWe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const qA=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function WJ({lead:e,onBack:t,fetchLeads:a,onEdit:s,onDelete:r,setSelectedLead:i,relatedActs:o}){const l=bt(),{leadID:c}=Ul(),[d,u]=h.useState(e||null),[f,p]=h.useState("Overview"),[x,v]=h.useState(""),N=d?.status?.toUpperCase()==="QUALIFIED",[b,C]=h.useState(null),[w,S]=h.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[E,k]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[A,T]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),_=async()=>{try{if(e){u(e),v(e.status||"New");return}if(!c)return;const M=await ie.get(`/leads/get/${c}`);u(M.data),v(M.data.status||"New"),S({name:M.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:M.data.territory?.id||null,assigned_to:M.data.assigned_to?.id||null,created_by:M.data.creator?.id||null}),k({last_name:M.data.last_name||"",first_name:M.data.first_name||"",account_id:null,title:M.data.title||"",department:M.data.department||"",email:M.data.email||"",work_phone:M.data.work_phone||"",mobile_phone_1:M.data.mobile_phone_1||"",mobile_phone_2:M.data.mobile_phone_2||"",notes:"",assigned_to:M.data.assigned_to?.id||null,created_by:M.data.creator?.id||null}),T({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:M.data.assigned_to?.id||null,created_by:M.data.creator?.id||null})}catch(M){console.error(M)}};h.useEffect(()=>{e?(u(e),v(e.status||"New")):c&&_()},[c,e]);const I=async()=>{try{if(x==="Converted"&&d?.status?.toUpperCase()!=="QUALIFIED"){q.error("Lead must be Qualified before it can be converted.");return}const M=await ie.put(`/leads/${d.id}/update/status`,{status:x});q.success("Lead status updated successfully");const W={...d,status:M.data.status};u(W),i&&i(W),a&&a(),t&&t()}catch(M){console.error(M),q.error("Failed to update lead status")}},R=async M=>{const W={...w,assigned_to:M.assigned_to?.id,billing_address:M.address,shipping_address:M.address,created_by:M.creator?.id,industry:null,name:M.company_name,phone_number:M.work_phone,status:"Prospect",territory_id:M.territory?.id,website:""};console.log("Account data: ",W),console.log("Contact data: ",E),console.log("Deal data: ",A),console.log("Lead data: ",M);try{const z=(await ie.post("/accounts/convertedLead",W)).data.id,Q={...E,account_id:z,assigned_to:M.assigned_to?.id,created_by:M.creator?.id,department:M.department,email:M.email,first_name:M.first_name,last_name:M.last_name,mobile_phone_1:M.mobile_phone_1,mobile_phone_2:M.mobile_phone_2,notes:M.notes,title:M.title,work_phone:M.work_phone},Y=(await ie.post("/contacts/convertedLead",Q)).data.id,se=()=>{switch(A.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},J=A.amount&&A.amount!==""?parseFloat(A.amount):0,F={...A,account_id:z,assigned_to:M.assigned_to?.id,created_by:M.creator?.id,primary_contact_id:Y,probability:se(),stage:"Prospecting"},Ne=await ie.post("/deals/convertedLead",F),re=await ie.put(`/leads/convert/${M.id}`);i&&i(null),a(),q.success("Lead converted successfully!"),t()}catch(X){console.error("Error during conversion:",X);const z=X.response?.data?.detail||X.message||"Failed to convert lead. Please try again.";q.error(z)}},U=M=>{switch((M||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},D=M=>M.toString().toLowerCase().replace(/\b\w/g,W=>W.toUpperCase());return d?n.jsx(n.Fragment,{children:n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),n.jsx("button",{onClick:()=>{t?t():l(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Wn,{size:25})})]})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[d.first_name," ",d.last_name]}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${U(d.status)}`,children:D(d.status||"New")}),n.jsx("div",{className:"flex flex-col",children:n.jsx("button",{onClick:()=>R(d),disabled:!N,title:N?"Convert Lead":"Lead must be Qualified before converting",className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2
      ${N?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-400":"bg-gray-200 text-gray-400 cursor-not-allowed"}
    `,children:"Convert"})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",onClick:()=>{s&&d&&s(d)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(la,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",onClick:()=>{r&&d&&r(d)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(Ut,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-4 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(M=>n.jsx("button",{onClick:()=>p(M),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${f===M?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:M},M))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[f==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Name:"}),n.jsxs("p",{children:[d.first_name," ",d.last_name||"N/A"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:d.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Job Title:"}),n.jsx("p",{children:d.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:d.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:d.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:d.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:d.assigned_to?`${d.assigned_to.first_name} ${d.assigned_to.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:d.creator?`${d.creator.first_name} ${d.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:d.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Source:"}),n.jsx("p",{children:d.source||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Address:"}),n.jsx("p",{children:d.address||"N/A"})]})]})}),f==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]})]}),f==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[o.tasks&&o.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",o.tasks.length,")"]})]}),b==="tasks"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),b==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.tasks.map((M,W)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/group-manager/tasks",{state:{taskID:M.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:M.subject||M.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:M.description||"No description"}),M.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned:"," ",M.assigned_to.first_name," ",M.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:qA(M.due_date||M.created_at)})]},`task-${W}`))})]}),o.meetings&&o.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ct,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",o.meetings.length,")"]})]}),b==="meetings"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),b==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.meetings.map((M,W)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/group-manager/meetings",{state:{meetingID:M.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Ct,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:M.subject||M.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:M.description||M.location||"No description"}),M.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",M.host.first_name," ",M.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:qA(M.start_time||M.created_at)})]},`meeting-${W}`))})]}),o.calls&&o.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(At,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",o.calls.length,")"]})]}),b==="calls"?n.jsx(jt,{className:"text-gray-500"}):n.jsx(It,{className:"text-gray-500"})]}),b==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.calls.map((M,W)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/group-manager/calls",{state:{callID:M.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(At,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:M.subject||M.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:M.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:qA(M.call_time||M.created_at)})]},`call-${W}`))})]}),(!o||(!o.tasks||o.tasks.length===0)&&(!o.meetings||o.meetings.length===0)&&(!o.calls||o.calls.length===0)&&(!o.quotes||o.quotes.length===0)&&(!o.deals||o.deals.length===0)&&(!o.contacts||o.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{d&&l("/group-manager/calls",{state:{openCallModal:!0,initialCallData:{subject:d.title?`Call regarding ${d.title}`:`Call with ${d.first_name} ${d.last_name}`,relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assigned_to:d.assigned_to?.id?String(d.assigned_to.id):"",direction:"Outgoing",status:"Planned"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(At,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const M=encodeURIComponent(d.email),W=encodeURIComponent(""),X=encodeURIComponent(""),z=`mailto:${M}?subject=${W}&body=${X}`;window.location.href=z},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Xn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{d&&l("/group-manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:d.title?`Meeting regarding ${d.title}`:`Meeting with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",status:"Planned"}}})},children:[n.jsx(Ct,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{d&&l("/group-manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:d.title?`Follow up on ${d.title}`:`Follow up with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:x,onChange:M=>v(M.target.value),children:[n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),d?.status?.toUpperCase()==="QUALIFIED"&&n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]}),n.jsx("button",{onClick:I,disabled:x===d.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${x===d.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const xWe=Ff.all(),VA=xWe.map((e,t)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${t}`})),yWe=e=>e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()),bWe=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},YA={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function vWe(){const e=bt(),{leadID:t}=Ul();Ds();const[a,s]=h.useState(null),[r,i]=h.useState(!1),[o,l]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(!1),[v,N]=h.useState(""),[b,C]=h.useState("Filter by Status"),[w,S]=h.useState(1),[E,k]=h.useState(10),[A,T]=h.useState(YA),[_,I]=h.useState(!1),[R,U]=h.useState(null),[D,M]=h.useState(!1),[W,X]=h.useState(null),[z,Q]=h.useState(!1),[de,Y]=h.useState({});h.useRef(null);const[se,J]=h.useState(!1),[F,Ne]=h.useState(null),[re,he]=h.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[je,De]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[Me,ve]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});h.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const Be=async()=>{try{const ge=await ie.get("/leads/getUsers");l(ge.data)}catch(ge){console.error(`Error fetching users: ${ge}`)}},ke=async()=>{x(!0);try{const ge=await ie.get("/leads/admin/getLeads");f(ge.data),console.log(ge.data)}catch(ge){console.error(`Error fetching leads: ${ge}`)}finally{x(!1)}};h.useEffect(()=>{Be(),ke()},[]),h.useEffect(()=>{if(t&&u.length>0&&!r&&!_){const ge=u.find(Ke=>Ke.id===Number(t));ge&&s(ge)}else!t&&!a&&s(null)},[t,u,r,_]),h.useEffect(()=>{if(F){const Ke=(V=>{if(!V)return{code:"+63",number:""};const te=V.match(/^(\+\d+)\s(.+)$/);if(te)return{code:te[1],number:te[2]};if(V.startsWith("+")){const Z=V.match(/^(\+\d{1,3})/);if(Z)return{code:Z[1],number:V.substring(Z[1].length).trim()}}return{code:"+63",number:V}})(F.work_phone),G=[];F.work_phone&&G.push(`Work: ${F.work_phone}`),F.mobile_phone_1&&G.push(`Mobile 1: ${F.mobile_phone_1}`),F.mobile_phone_2&&G.push(`Mobile 2: ${F.mobile_phone_2}`);const $=G.length>0?G.join(" | "):"";he({name:F.company_name||"",website:"",countryCode:Ke.code,phone_number:Ke.number,combinedPhoneNumbers:$,billing_address:F.address||"",shipping_address:F.address||"",industry:"",status:"Prospect",territory_id:F.assigned_to?.territory?.id||null,assigned_to:F.assigned_to?.id||null,created_by:F.creator?.id||null}),De({last_name:F.last_name||"",first_name:F.first_name||"",account_id:null,title:F.title||"",department:F.department||"",email:F.email||"",work_phone:F.work_phone||"",mobile_phone_1:F.mobile_phone_1||"",mobile_phone_2:F.mobile_phone_2||"",notes:F.notes||"",assigned_to:F.assigned_to?.id||null,created_by:F.creator?.id||null}),ve({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:F.assigned_to?.id||null,created_by:F.creator?.id||null})}},[F]);const fe=ge=>N(ge.target.value),ne=h.useMemo(()=>{const ge=v.trim().toLowerCase(),Ke=b.trim().toUpperCase();return u.filter(G=>{const $=[G?.first_name,G?.last_name,G?.company_name,G?.title,G?.email,G?.work_phone,G?.assigned_to?`${G.assigned_to.first_name} ${G.assigned_to.last_name}`:""],V=ge===""||$.some(Z=>Z==null||Z===""?!1:Z.toString().toLowerCase().includes(ge));let te=!1;return Ke==="FILTER BY STATUS"?te=(G.status?G.status.toUpperCase():"")!=="CONVERTED":te=(G.status?G.status.toUpperCase():"")===Ke,V&&te})},[u,v,b]),Ae=Math.max(1,Math.ceil(ne.length/E)||1);h.useEffect(()=>{S(1)},[v,b,E]),h.useEffect(()=>{S(ge=>{const Ke=Math.max(1,Math.ceil(ne.length/E)||1);return ge>Ke?Ke:ge})},[ne.length,E]);const ye=h.useMemo(()=>{const ge=(w-1)*E;return ne.slice(ge,ge+E)},[ne,w,E]),Ie=()=>S(ge=>Math.max(ge-1,1)),Ve=()=>S(ge=>Math.min(ge+1,Ae)),Te=h.useCallback(async ge=>{try{const Ke=await ie.get(`/activities/lead/${ge}`);Y(Ke.data&&typeof Ke.data=="object"?Ke.data:{})}catch(Ke){console.error(Ke),Ke.response?.status===404&&(console.warn("No activities found for this account."),Y({}))}},[]),Fe=ge=>{s(ge),Te(ge.id)},Ye=()=>{s(null),t&&e("/admin/leads",{replace:!0})},B=()=>{i(!1),T(YA),I(!1),U(null),M(!1),d(null),sessionStorage.removeItem("editLeadData")},xe=ge=>{ge.target.id==="modalBackdrop"&&B()},_e=()=>{T(YA),I(!1),U(null),d(null),i(!0)},ce=ge=>{if(!ge){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",ge),console.log("Current state - leadID:",t,"selectedLead:",a,"showModal:",r);const Ke=Z=>{if(!Z)return{code:"+63",number:""};const Se=Z.match(/^(\+\d+)\s(.+)$/);return Se?{code:Se[1],number:Se[2]}:{code:"+63",number:Z}},G=Ke(ge.work_phone),$=Ke(ge.mobile_phone_1),V=Ke(ge.mobile_phone_2);let te="";if(ge.assigned_to){te=String(ge.assigned_to.id);const Z=o?.find(Se=>Se.id===ge.assigned_to.id);d(Z)}T({first_name:ge.first_name||"",last_name:ge.last_name||"",company_name:ge.company_name||"",title:ge.title||"",department:ge.department||"",email:ge.email||"",work_ccode:G.code,work_phone:G.number,m1_ccode:$.code,mobile_phone_1:$.number,m2_ccode:V.code,mobile_phone_2:V.number,address:ge.address||"",notes:ge.notes||"",source:ge.source||"",territory_id:ge.territory?.id||null,lead_owner:te,status:ge.status||"New"}),I(!0),U(ge.id),a?(console.log("Coming from detail view - closing detail modal and showing edit form"),s(null),i(!0)):(console.log("Already in list view - showing modal"),i(!0))},Ee=ge=>{if(!ge){console.error("handleDelete: lead is null or undefined");return}console.log("handleDelete called with lead:",ge);const Ke=`${ge.first_name} ${ge.last_name}`||"this lead";X({title:"Delete Lead",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:Ke}),"? This action cannot be undone."]}),confirmLabel:"Delete Lead",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ge.id,name:Ke}})},ae=ge=>{const{name:Ke,value:G}=ge.target;if(T($=>({...$,[Ke]:G})),Ke==="lead_owner"){const $=o.find(V=>V.id===parseInt(G));d($)}},[He,Re]=h.useState(!1),it=ge=>{if(ge.preventDefault(),Re(!0),!A.last_name?.trim()){q.error("Last name is required.");return}if(!A.company_name?.trim()){q.error("Company is required.");return}if(!A.title?.trim()){q.error("Job title is required.");return}if(!A.email?.trim()){q.error("Email is required.");return}if(!A.email.includes("@")){q.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(A.email)){q.error("Please enter a valid email address with a dot in the domain.");return}if(!A.lead_owner){q.error("Please assign a lead owner.");return}const G={...A,territory_id:A.territory_id?parseInt(A.territory_id):null,lead_owner:parseInt(A.lead_owner),work_phone:`${A.work_ccode} ${A.work_phone}`,mobile_phone_1:`${A.m1_ccode} ${A.mobile_phone_1}`,mobile_phone_2:`${A.m2_ccode} ${A.mobile_phone_2}`},$=_&&R?"update":"create",V=`${A.first_name} ${A.last_name}`;X({title:$==="create"?"Confirm New Lead":"Confirm Update",message:$==="create"?n.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",n.jsx("span",{className:"font-semibold",children:V}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:V}),"?"]}),confirmLabel:$==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:$,payload:G,targetId:R||null,name:V}})},mt=async()=>{if(!W?.action){X(null);return}const{action:ge}=W,{type:Ke,payload:G,targetId:$,name:V,lead:te}=ge;console.log(G),Q(!0);try{if(Ke==="create")M(!0),await ie.post("/leads/create",G),q.success(`Lead "${V}" created successfully.`),B(),await ke();else if(Ke==="update"){if(!$)throw new Error("Missing lead identifier for update.");M(!0);const Z=await ie.put(`/leads/${$}`,G);q.success(`Lead "${V}" updated successfully.`),a&&a.id===$&&s(null),B(),await ke()}else if(Ke==="delete"){if(!$)throw new Error("Missing lead identifier for deletion.");await ie.delete(`/leads/${$}`),q.success(`Lead "${V}" deleted successfully.`),a?.id===$&&s(null),await ke()}}catch(Z){console.error(Z);const Se=Ke==="create"?"Failed to create lead. Please review the details and try again.":Ke==="update"?"Failed to update lead. Please review the details and try again.":"Failed to delete lead. Please try again.",me=Z.response?.data?.detail||Se;q.error(me)}finally{(Ke==="create"||Ke==="update")&&M(!1),Ke!=="edit"&&(Q(!1),X(null))}},ee=()=>{z||X(null)},pe=u.filter(ge=>ge.status==="New").length,Ue=u.filter(ge=>ge.status==="Contacted").length,Ze=u.filter(ge=>ge.status==="Qualified").length,nt=u.filter(ge=>ge.status==="Converted").length,Je=u.filter(ge=>ge.status==="Lost").length,Oe=[{title:"New",value:pe,icon:Gn,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:Ue,icon:At,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:Ze,icon:ba,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:nt,icon:Bl,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:Je,icon:Ps,color:"text-red-600",bgColor:"bg-red-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[p&&n.jsx(zt,{message:"Loading leads..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Gn,{className:"mr-2 text-blue-600"}),"Leads"]}),n.jsxs("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:[n.jsxs("button",{onClick:()=>{q.info("Download functionality coming soon")},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(Fl,{className:"mr-2"})," Download"]}),n.jsxs("button",{onClick:()=>{_e(),Re(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(un,{className:"mr-2"})," Add Lead"]})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Oe.map(ge=>n.jsx(NWe,{...ge},ge.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Ht,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search leads",value:v,onChange:fe,className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:b,onChange:ge=>C(ge.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Name"}),n.jsx("th",{className:"py-3 px-4",children:"Company"}),n.jsx("th",{className:"py-3 px-4",children:"Job Title"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:ne.length>0?ye.map(ge=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>Fe(ge),children:[n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[ge.first_name," ",ge.last_name]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:ge.company_name||"--"})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:ge.title||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:ge.email||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:ge.assigned_to?`${ge.assigned_to.first_name} ${ge.assigned_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${bWe(ge.status||"New")}`,children:yWe(ge.status||"New")})})]},ge.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No leads found."})})})]})}),n.jsx(tn,{className:"mt-4",totalItems:ne.length,pageSize:E,currentPage:w,onPrev:Ie,onNext:Ve,onPageSizeChange:k,label:"leads"}),r&&n.jsx("div",{id:"modalBackdrop",onClick:xe,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:ge=>ge.stopPropagation(),children:[n.jsx("button",{onClick:()=>{B(),Re(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:_?"Edit Lead":"Add New Lead"}),n.jsxs("form",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),n.jsx("input",{type:"text",name:"first_name",value:A.first_name,onChange:ae,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"Smith",name:"last_name",value:A.last_name,onChange:ae,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                      ${He&&!A.last_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Company ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:A.company_name,onChange:ae,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${He&&!A.company_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Job Title",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:A.title,onChange:ae,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${He&&!A.title?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),n.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:A.department,onChange:ae,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Email",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:A.email,onChange:ae,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${He&&!A.email?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"work_ccode",value:A.work_ccode,onChange:ae,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:VA.map(ge=>n.jsx("option",{value:ge.code,children:ge.code},ge.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:A.work_phone,onChange:ae,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m1_ccode",value:A.m1_ccode,onChange:ae,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:VA.map(ge=>n.jsx("option",{value:ge.code,children:ge.code},ge.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:A.mobile_phone_1,onChange:ae,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m2_ccode",value:A.m2_ccode,onChange:ae,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:VA.map(ge=>n.jsx("option",{value:ge.code,children:ge.code},ge.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:A.mobile_phone_2,onChange:ae,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),n.jsx("input",{type:"text",name:"address",value:A.address,onChange:ae,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:`w-full rounded-lg ${He&&!A.lead_owner?"border border-red-400":"border border-gray-300"}`,children:n.jsx(jWe,{items:Array.isArray(o)?o:[],value:A.lead_owner??"",placeholder:"Search a user...",getLabel:ge=>`${ge.first_name} ${ge.last_name}`,onChange:ge=>{const Ke=o.find($=>String($.id)===String(ge));d(Ke);let G=null;Ke&&Ke.assigned_territory&&Ke.assigned_territory.length===1&&(G=Ke.assigned_territory[0].id),T($=>({...$,lead_owner:ge,territory_id:G}))}})})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),n.jsxs("select",{name:"territory_id",value:A.territory_id||"",onChange:ae,disabled:!c||!c.assigned_territory||c.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[n.jsx("option",{value:"",disabled:!0,children:c?c.assigned_territory&&c.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),c&&c.assigned_territory&&c.assigned_territory.map(ge=>n.jsx("option",{value:ge.id,children:ge.name},ge.id))]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),n.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:A.source,onChange:ae,children:[n.jsx("option",{value:"",disabled:!0,children:"Select Source"}),n.jsx("option",{value:"Website",children:"Website"}),n.jsx("option",{value:"Referral",children:"Referral"}),n.jsx("option",{value:"Cold call",children:"Cold call"}),n.jsx("option",{value:"Event",children:"Event"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),n.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:A.notes,onChange:ae,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("button",{type:"button",onClick:()=>{B(),Re(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:D||z,children:"Cancel"}),n.jsx("button",{type:"submit",onClick:it,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:D||z,children:D||z?"Processing...":_?"Update Lead":"Save Lead"})]})]})]})}),W&&n.jsx(wWe,{open:!0,title:W.title,message:W.message,confirmLabel:W.confirmLabel,cancelLabel:W.cancelLabel,variant:W.variant,onConfirm:mt,onCancel:ee,loading:z}),a&&!r&&!_&&n.jsx(WJ,{relatedActs:de,lead:a,onBack:Ye,fetchLeads:ke,setSelectedLead:s,onEdit:ce,onDelete:Ee})]})}function wWe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function NWe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function jWe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=h.useState(!1),[d,u]=h.useState(""),f=h.useRef(null),p=e.find(N=>String(N.id)===String(t)),x=p?s(p):"",v=h.useMemo(()=>{const N=d.trim().toLowerCase();return(N?e.filter(C=>(s(C)||"").toLowerCase().includes(N)):e).slice(0,o)},[e,d,s,o]);return h.useEffect(()=>{const N=b=>{f.current&&!f.current.contains(b.target)&&c(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),h.useEffect(()=>{l||u("")},[l]),n.jsxs("div",{ref:f,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:l?d:x,placeholder:r,onFocus:()=>!i&&c(!0),onChange:N=>{u(N.target.value),l||c(!0)},className:"w-full rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:v.length>0?v.map(N=>{const b=String(N.id),C=s(N),w=String(t)===b;return n.jsx("button",{type:"button",onClick:()=>{a(b),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${w?"bg-blue-50":""}`,children:C||"--"},b)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const jb={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},qa=({label:e,value:t,name:a,className:s=""})=>n.jsxs("div",{className:`flex flex-col ${s}`,children:[n.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),n.jsx("input",{type:"text",name:a,defaultValue:t,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),CWe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(qa,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),n.jsx(qa,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),n.jsx(qa,{label:"Industry",name:"industry",value:e.industry})]}),n.jsx(qa,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),n.jsx(qa,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),SWe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(qa,{label:"First Name",name:"firstName",value:e.firstName}),n.jsx(qa,{label:"Last Name",name:"lastName",value:e.lastName}),n.jsx(qa,{label:"Department",name:"department",value:e.department}),n.jsx(qa,{label:"Title",name:"title",value:e.title}),n.jsx(qa,{label:"Work Phone",name:"workPhone",value:e.workPhone}),n.jsx(qa,{label:"Email",name:"email",value:e.email}),n.jsx(qa,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),n.jsx(qa,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),_We=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(qa,{label:"Deal Name",name:"dealName",value:e.dealName}),n.jsxs("div",{className:"flex",children:[n.jsx(qa,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),n.jsx("div",{className:"flex flex-col justify-end ml-1",children:n.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),n.jsx(qa,{label:"Stage",name:"stage",value:e.stage}),n.jsx(qa,{label:"Territory",name:"territory",value:e.territory})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(qa,{label:"Description",name:"description",value:e.description}),n.jsx(qa,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function AWe({isOpen:e,onClose:t}){const[a,s]=h.useState(1),r=3;if(!e)return null;const i=()=>{a<r?s(a+1):(t(),s(1))},o=()=>{a>1&&s(a-1)},l=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],c=()=>{switch(a){case 1:return n.jsx(CWe,{data:jb});case 2:return n.jsx(SWe,{data:jb});case 3:return n.jsx(_We,{data:jb});default:return null}};return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:jb.accountName})]}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:n.jsx(VN,{className:"w-6 h-6"})})]}),n.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:l.map(d=>n.jsx("button",{onClick:()=>s(d.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${a===d.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:d.name},d.id))}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c()}),n.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[a>1&&n.jsx("button",{onClick:o,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),a<r?n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}function qJ({selectedDeal:e,onStatusUpdate:t,onClose:a}){const[s,r]=h.useState(e?.stage||""),[i,o]=h.useState(!1),l=bt(),{user:c}=Xt();h.useEffect(()=>{console.log("Group Manager DealsInformation mounted sahdksd",e),console.log("User sadad:",c)},[e,c]);const d=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}];h.useEffect(()=>{e?.stage&&r(e.stage)},[e]);const u=async()=>{if(!e||!e.id){q.error("No deal selected");return}if(!s||s===e.stage){q.info("Please select a different stage");return}const f=e.id;o(!0);try{await ie.put(`/deals/admin/${f}`,{stage:s}),a&&a(),t&&setTimeout(async()=>{await t(!0)},100),setTimeout(()=>{q.success("Deal status updated successfully")},300)}catch(p){console.error(p);const x=p.response?.data?.detail||"Failed to update deal status";q.error(x)}finally{o(!1)}};return e?n.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{const f=e.account?.id||e.account_id;l("/group-manager/calls",{state:{openCallModal:!0,initialCallData:{subject:e.name?`Call regarding: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assigned_to:e.assigned_deals?.id?String(e.assigned_deals.id):"",assignedTo:e.assigned_to?.id?String(e.assigned_to.id):""}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(At,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const f=encodeURIComponent(e.contact.email),p=encodeURIComponent(""),x=encodeURIComponent(""),v=`mailto:${f}?subject=${p}&body=${x}`;window.location.href=v},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Xn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{const f=e.account?.id||e.account_id;l("/group-manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:e.name?`Meeting: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):""}}})},children:[n.jsx(Ct,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{const f=e.account?.id||e.account_id;l("/group-manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:e.name?`Task for: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:s,onChange:f=>r(f.target.value),disabled:i||e.created_by!==c?.id&&e.assigned_to!==c?.id,children:d.map(f=>n.jsx("option",{value:f.value,children:f.label},f.value))}),(e.created_by===c?.id||e.assigned_to===c?.id)&&n.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:u,disabled:i||!s||s===e.stage,children:i?"Updating...":"Update"})]})]}):null}function VJ({selectedDeal:e,show:t,onClose:a,activeTab:s,setActiveTab:r,onEdit:i,onDelete:o,onStatusUpdate:l}){const c=bt(),[d]=Ds(),u=d.get("id"),[f,p]=h.useState(e||null),[x,v]=h.useState(s||"Overview"),{user:N}=Xt();h.useEffect(()=>{console.log("AdminDealsInformation mounted",f),console.log("User:",N)},[f,N]);const b=s!==void 0?s:x;if(h.useEffect(()=>{(async()=>{if(u&&!e)try{console.log("Fetching deal from route, ID:",u);const k=(await ie.get("/deals/admin/fetch-all")).data||[];console.log("All deals fetched:",k.length);const A=k.find(T=>T.id===parseInt(u));if(console.log("Found deal:",A),A){console.log("Deal data structure:",{id:A.id,name:A.name,amount:A.amount,stage:A.stage,account:A.account,contact:A.contact,assigned_deals:A.assigned_deals,deal_creator:A.deal_creator,allKeys:Object.keys(A)});const T={...A,amount:typeof A.amount=="number"?A.amount:parseFloat(A.amount||0),probability:A.probability||0};p(T)}else console.warn("Deal not found with ID:",u)}catch(E){console.error("Error fetching deal:",E)}})()},[u,e]),!f&&!u||u&&!f)return null;const C=S=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[S]||"bg-gray-100 text-gray-700";function w(S){return S?new Date(S).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),n.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:n.jsx("button",{onClick:()=>{a?a():c(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Vt,{size:25})})})]})}),n.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[n.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:f.name}),n.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${C(f.stage)}`,children:f.stage})]}),n.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",w(f.created_at)]})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[n.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[" ",f.amount?f.amount.toLocaleString():"0"]}),n.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${f.probability}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",f.probability,"% Complete "]}),(f.created_by===N?.id||f.assigned_to===N?.id)&&n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[n.jsxs("button",{type:"button",onClick:()=>{i&&i(f)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(la,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),n.jsxs("button",{type:"button",onClick:()=>{o&&o(f)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(Ut,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(S=>n.jsx("button",{onClick:()=>{r?r(S):v(S)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${b===S?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:S},S))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[b==="Overview"&&n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Description:"})," ",f.description]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Expected Close Date:"})," ",f.close_date]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("div",{className:"mt-4 py-3 w-full",children:[n.jsxs("div",{className:"relative flex flex-col w-full",children:[n.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const S=(f?.stage||"PROSPECTING").toUpperCase(),k=(T=>T==="PROSPECTING"?0:T==="QUALIFICATION"?1:T==="PROPOSAL"?2:T==="NEGOTIATION"?3:T==="CLOSED_WON"||T==="CLOSED_LOST"?4:-1)(S);return[0,1,2,3,4].map(T=>k===T?"orange":k>T?"green":"gray").map((T,_)=>n.jsxs(pt.Fragment,{children:[n.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${T==="green"?"bg-green-500 border-green-500":T==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),_<4&&n.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},_))})()}),n.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((S,E)=>n.jsx("span",{className:"text-center flex-1 break-words",children:S},E))})]}),n.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:f.stage})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),n.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Account:"})," ",f.account?.name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Primary Contact:"})," ",f.contact?.first_name," ",f.contact?.last_name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Phone:"})," ",f.contact?.work_phone]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",f.contact?.email]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Assigned To:"})," ",f.assigned_deals?.first_name," ",f.assigned_deals?.last_name]})]})]})]}),b==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:f.description||"No notes available."})]})]}),b==="Activities"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:At,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:Ct,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((S,E)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[n.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-gray-600 mt-1",children:n.jsx(S.icon,{size:24})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-gray-900 break-words",children:S.title}),n.jsx("p",{className:"text-sm text-gray-500 break-words",children:S.desc}),n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),n.jsx("p",{className:"text-sm text-gray-700 break-words",children:S.user})]})]})]}),n.jsx("p",{className:"text-sm text-gray-500 break-words",children:S.date})]},E))]}),b==="Edit"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),n.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:f.name})]}),n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),n.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:f.description})]}),n.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),n.jsx("div",{className:"w-full lg:w-auto",children:n.jsx(qJ,{selectedDeal:f,onStatusUpdate:l,onClose:a})})]})]})]})})}const TWe=10;function EWe(){h.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const e=bt(),t=Qt(),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Stage"),[o,l]=h.useState("Filter by Owner"),[c,d]=h.useState(null),[u,f]=h.useState("Overview"),[p,x]=h.useState(!1),[v,N]=h.useState(null),[b,C]=h.useState(!1),[w,S]=h.useState(1),[E,k]=h.useState(10),[A,T]=h.useState(!1),[_,I]=h.useState(null),[R,U]=h.useState(!1),[D,M]=h.useState(!1),[W,X]=h.useState(null),[z,Q]=h.useState([]),[de,Y]=h.useState([]),[se,J]=h.useState([]),[F,Ne]=h.useState({}),[re,he]=h.useState(null);h.useEffect(()=>{const $=t.state,V=$?.dealID;if(V&&!$?.openDealModal){he(V),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(re&&v?.length>0&&!b){const $=v.find(V=>V.id===re);$?d($):q.error("Deal not found."),he(null)}},[re,v,b]);const[je,De]=h.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),[Me,ve]=h.useState(null),[Be,ke]=h.useState(null),fe={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST","Closed Cancelled Stage":"CLOSED_CANCELLED"},ne=$=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost",CLOSED_CANCELLED:"Closed Cancelled"})[$]||$||"--",Ae=$=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700",CLOSED_CANCELLED:"bg-red-100 text-red-700"})[$]||"bg-gray-100 text-gray-700",ye=h.useCallback(async $=>{try{const V=await ie.get(`/activities/deal/${$}`);Ne(V.data&&typeof V.data=="object"?V.data:{})}catch(V){console.error(V),V.response?.status===404&&(console.warn("No activities found for this account."),Ne({}))}},[]),Ie=h.useMemo(()=>{const $=a.trim().toLowerCase(),V=r.trim(),te=o.trim();return(v??[]).filter(Z=>{const Se=[Z?.name,Z?.description,Z?.account?.name,Z?.contact?.first_name,Z?.contact?.last_name,Z?.assigned_deals?.first_name,Z?.assigned_deals?.last_name],me=$===""||Se.some(be=>be==null||be===""?!1:be.toString().toLowerCase().includes($)),ue=V==="Filter by Stage"||V===""||Z.stage===fe[V]||Z.stage===V,$e=te==="Filter by Owner"||te===""||`${Z.assigned_deals?.first_name||""} ${Z.assigned_deals?.last_name||""}`.trim().toLowerCase()===te.toLowerCase();return me&&ue&&$e})},[v,a,r,o]),Ve=Math.max(1,Math.ceil(Ie.length/TWe)||1);h.useEffect(()=>{S(1)},[a,r,o]),h.useEffect(()=>{S($=>{const V=Math.max(1,Math.ceil(Ie.length/E)||1);return $>V?V:$})},[Ie.length,E]);const Te=h.useMemo(()=>{const $=(w-1)*E;return Ie.slice($,$+E)},[Ie,w,E]),Fe=()=>S($=>Math.max($-1,1)),Ye=()=>S($=>Math.min($+1,Ve)),B=()=>{De({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),M(!1),X(null),x(!0)},xe=async()=>{C(!0);try{const $=await ie.get("/deals/admin/fetch-all"),te=[...Array.isArray($.data)?$.data:[]].sort((Z,Se)=>{const me=Z?.created_at?new Date(Z.created_at).getTime():0;return(Se?.created_at?new Date(Se.created_at).getTime():0)-me});N(te)}catch($){$.response&&$.response.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch deals. Please try again later."),console.error($)}finally{C(!1)}},_e=async()=>{try{const $=await ie.get("/accounts/admin/fetch-all");Q(Array.isArray($.data)?$.data:[])}catch($){console.error($),$.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},ce=async()=>{try{const $=await ie.get("/contacts/admin/fetch-all");Y(Array.isArray($.data)?$.data:[])}catch($){console.error($),$.response?.status===403&&q.warn("Unable to load contacts (permission denied).")}},Ee=async()=>{try{const $=await ie.get("/users/all");J(Array.isArray($.data)?$.data:[])}catch($){console.error($),$.response?.status===403&&q.warn("Unable to load users (permission denied).")}};h.useEffect(()=>{xe(),_e(),ce(),Ee()},[]);const ae=async $=>{$&&(De({id:$.id||null,name:$.name||"",account_id:$.account_id?.toString()||"",primary_contact_id:$.primary_contact_id?.toString()||"",stage:$.stage||"PROPOSAL",amount:$.amount?.toString()||"",close_date:$.close_date?new Date($.close_date).toISOString().split("T")[0]:"",assigned_to:$.assigned_to?.toString()||"",currency:$.currency||"PHP",description:$.description||""}),ve($.account||null),ke($.contact||null),M(!0),X($.id),d(null),x(!0))},He=async($=!1)=>{try{const V=await ie.get("/deals/admin/fetch-all"),Z=[...Array.isArray(V.data)?V.data:[]].sort((Se,me)=>{const ue=Se?.created_at?new Date(Se.created_at).getTime():0;return(me?.created_at?new Date(me.created_at).getTime():0)-ue});if(N(Z),!$&&c&&c.id){const Se=Z.find(me=>me.id===c.id);Se&&d({...Se})}}catch(V){console.error("Failed to refresh deal data:",V),await xe()}},Re=$=>{const V=$.name.trim();if(!V){q.error("Deal name is required.");return}if(!$.account_id){q.error("Account is required.");return}const te=D&&W?"update":"create",Z=V;I({title:te==="create"?"Confirm New Deal":"Confirm Update",message:te==="create"?n.jsxs("span",{children:["Are you sure you want to create"," ",n.jsx("span",{className:"font-semibold",children:Z}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:Z}),"?"]}),confirmLabel:te==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:te,formData:$,targetId:W||null,name:Z}})},it=$=>{if(!$)return;const V=$.name||"this deal";I({title:"Delete Deal",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:V}),"? This action cannot be undone."]}),confirmLabel:"Delete Deal",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:$.id,name:V}})},mt=async()=>{if(!_?.action){I(null);return}const{action:$}=_,{type:V,formData:te,targetId:Z,name:Se}=$;U(!0);try{if(V==="create"){T(!0);const me={name:te.name.trim(),account_id:parseInt(te.account_id),primary_contact_id:te.primary_contact_id?parseInt(te.primary_contact_id):null,stage:te.stage,amount:te.amount?parseFloat(te.amount):null,currency:te.currency||"PHP",close_date:te.close_date||null,description:te.description||null,assigned_to:te.assigned_to?parseInt(te.assigned_to):null};await ie.post("/deals/admin/create",me),q.success(`Deal "${Se}" created successfully.`),x(!1),await xe()}else if(V==="update"){if(!Z)throw new Error("Missing deal identifier for update.");T(!0);const me={};te.name!==void 0&&(me.name=te.name.trim()),te.account_id!==void 0&&te.account_id!==""&&(me.account_id=parseInt(te.account_id)),te.primary_contact_id!==void 0&&(me.primary_contact_id=te.primary_contact_id?parseInt(te.primary_contact_id):null),te.stage!==void 0&&(me.stage=te.stage),te.amount!==void 0&&te.amount!==""&&(me.amount=parseFloat(te.amount)),te.currency!==void 0&&(me.currency=te.currency),te.close_date!==void 0&&(me.close_date=te.close_date||null),te.description!==void 0&&(me.description=te.description||null),te.assigned_to!==void 0&&(me.assigned_to=te.assigned_to?parseInt(te.assigned_to):null),await ie.put(`/deals/admin/${Z}`,me),q.success(`Deal "${Se}" updated successfully.`),x(!1),await xe()}else if(V==="delete"){if(!Z)throw new Error("Missing deal identifier for deletion.");await ie.delete(`/deals/admin/${Z}`),q.success(`Deal "${Se}" deleted successfully.`),c?.id===Z&&d(null),await xe()}}catch(me){console.error(me);const ue=V==="create"?"Failed to create deal. Please review the details and try again.":V==="update"?"Failed to update deal. Please review the details and try again.":"Failed to delete deal. Please try again.",$e=me.response?.data?.detail||ue;q.error($e)}finally{(V==="create"||V==="update")&&T(!1),U(!1),I(null)}},ee=()=>{R||I(null)},pe=()=>{x(!1),De({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),ve(null),ke(null),M(!1),X(null),T(!1)},Ue=(v??[]).filter($=>$.stage==="PROSPECTING").length,Ze=(v??[]).filter($=>$.stage==="QUALIFICATION").length,nt=(v??[]).filter($=>$.stage==="PROPOSAL").length,Je=(v??[]).filter($=>$.stage==="NEGOTIATION").length,Oe=(v??[]).filter($=>$.stage==="CLOSED_WON").length,ge=(v??[]).filter($=>$.stage==="CLOSED_LOST").length,Ke=(v??[]).filter($=>$.stage==="CLOSED_CANCELLED").length,G=[{title:"Prospecting",value:Ue,icon:Iw,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:Ze,icon:ia,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:nt,icon:Kt,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:Je,icon:Kc,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:Oe,icon:ba,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:ge,icon:Ps,color:"text-red-600",bgColor:"bg-red-100"},{title:"Closed Cancelled",value:Ke,icon:Ps,color:"text-gray-600",bgColor:"bg-gray-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[b&&n.jsx(zt,{message:"Loading deals..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Kt,{className:"mr-2 text-blue-600"}),"Deals"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:B,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(un,{className:"mr-2"})," Add Deal"]})})]}),n.jsx("div",{className:"grid grid-cols-1 p-2 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden",children:G.map($=>n.jsx(LWe,{...$},$.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Ht,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search deals",value:a,onChange:$=>s($.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[n.jsxs("select",{value:r,onChange:$=>i($.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),n.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),n.jsx("option",{value:"Qualification Stage",children:"Qualification"}),n.jsx("option",{value:"Proposal Stage",children:"Proposal"}),n.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),n.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),n.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"}),n.jsx("option",{value:"Closed Cancelled Stage",children:"Closed Cancelled"})]}),n.jsxs("select",{value:o,onChange:$=>l($.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((v??[]).map($=>`${$.assigned_deals?.first_name} ${$.assigned_deals?.last_name}`))].map(($,V)=>n.jsx("option",{value:$,children:$},V))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Stage"}),n.jsx("th",{className:"py-3 px-4",children:"Value"}),n.jsx("th",{className:"py-3 px-4",children:"Close Date"}),n.jsx("th",{className:"py-3 px-4",children:"Owner"})]})}),n.jsx("tbody",{children:Ie.length>0?Te.map($=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{d({...$}),ye($.id)},children:[n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:$.deal_id?$.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:$.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:$.description||"--"})]})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:$.account?.name||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:$.contact?.first_name&&$.contact?.last_name?`${$.contact.first_name} ${$.contact.last_name}`:$.contact?.first_name||$.contact?.last_name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Ae($.stage)}`,children:ne($.stage)})}),n.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",$.amount?.toLocaleString()||"0"]}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:$.close_date||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:$.assigned_deals?.first_name&&$.assigned_deals?.last_name?`${$.assigned_deals.first_name} ${$.assigned_deals.last_name}`:$.assigned_deals?.first_name||$.assigned_deals?.last_name||"--"})]},$.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No deals found."})})})]})}),n.jsx(tn,{className:"mt-4",totalItems:Ie.length,pageSize:E,currentPage:w,onPrev:Fe,onNext:Ye,onPageSizeChange:k,label:"deals"}),p&&n.jsx(PWe,{onClose:pe,formData:je,setFormData:De,isEditing:D,onSubmit:Re,isSubmitting:A||R,accounts:z,contacts:de,users:se,currentAccount:Me,currentContact:Be}),c&&n.jsx(VJ,{relatedActs:F,selectedDeal:c,show:!!c,onClose:()=>d(null),activeTab:u,setActiveTab:f,onEdit:ae,onDelete:it,onStatusUpdate:He}),_&&n.jsx(kWe,{open:!0,title:_.title,message:_.message,confirmLabel:_.confirmLabel,cancelLabel:_.cancelLabel,variant:_.variant,onConfirm:mt,onCancel:ee,loading:R})]})}function kWe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function LWe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function PWe({onClose:e,formData:t,setFormData:a,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,accounts:o=[],contacts:l=[],users:c=[],currentAccount:d=null,currentContact:u=null}){const[f,p]=h.useState(!1),x=b=>{if(b.preventDefault(),p(!0),!t.name?.trim()){q.error("Deal name is required.");return}const C=Number(t.amount);if(!t.amount||isNaN(C)||C<=0){q.error("Amount must be a number greater than 0.");return}if(!t.account_id){q.error("Please select an account.");return}if(!t.primary_contact_id){q.error("Please select a primary contact.");return}if(!t.assigned_to){q.error("Please assign this deal to a user.");return}r?.(t)},v=b=>{b.target.id==="modalBackdrop"&&e()},N=h.useMemo(()=>{const b=String(t.account_id||"").trim(),C=Array.isArray(l)?l:[];return b?C.filter(w=>{const E=[w?.account_id,w?.accountId,w?.account?.id,w?.account?.account_id,w?.account?.accountId].find(k=>k!=null&&String(k).trim()!=="");return E?String(E)===b:!1}):C},[l,t.account_id]);return h.useEffect(()=>{const b=String(t.account_id||"").trim(),C=String(t.primary_contact_id||"").trim();if(!C||!b)return;N.some(S=>String(S?.id)===C)||a(S=>({...S,primary_contact_id:""}))},[t.account_id,t.primary_contact_id,N,a]),n.jsx("div",{id:"modalBackdrop",onClick:v,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:b=>b.stopPropagation(),children:[n.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Deal":"Create Deal"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:x,noValidate:!0,children:[n.jsx(QA,{label:"Deal Name",name:"name",value:t.name,onChange:b=>a({...t,name:b.target.value}),placeholder:"Enter deal name",required:!0,isSubmitted:f,className:"md:col-span-2"}),n.jsx(KA,{label:"Account",value:t.account_id||"",onChange:b=>a({...t,account_id:b}),items:o||[],getLabel:b=>b?.name??"",placeholder:"Search account...",disabled:i,currentItem:d,required:!0,isSubmitted:f}),n.jsx(KA,{label:"Primary Contact",value:t.primary_contact_id||"",onChange:b=>a({...t,primary_contact_id:b}),items:N||[],getLabel:b=>`${b?.first_name??""} ${b?.last_name??""}`.trim()||b?.email||"",placeholder:"Search contact...",disabled:i,currentItem:u,required:!0,isSubmitted:f}),n.jsx(TB,{label:"Stage",name:"stage",value:t.stage,onChange:b=>a({...t,stage:b.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}],disabled:i}),n.jsx(QA,{label:"Amount",name:"amount",type:"number",step:"0.01",value:t.amount,onChange:b=>a({...t,amount:b.target.value}),placeholder:"0",required:!0,isSubmitted:f}),n.jsx(TB,{label:"Currency",name:"currency",value:t.currency||"PHP",onChange:b=>a({...t,currency:b.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),n.jsx(QA,{label:"Close Date",name:"close_date",type:"date",value:t.close_date||"",onChange:b=>a({...t,close_date:b.target.value}),disabled:i}),n.jsx(KA,{label:"Assign To",value:t.assigned_to||"",onChange:b=>a({...t,assigned_to:b}),items:c||[],getLabel:b=>`${b?.first_name??""} ${b?.last_name??""}`.trim()||b?.email||"",placeholder:"Search assignee...",disabled:i,required:!0,isSubmitted:f,className:"md:col-span-2"}),n.jsx(OWe,{label:"Description",name:"description",value:t.description,onChange:b=>a({...t,description:b.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Deal":"Save Deal"})]})]})]})})}function QA({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function TB({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))})]})}function KA({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",currentItem:c=null,required:d=!1,isSubmitted:u=!1}){const f=u&&d&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",d&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(DWe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,currentItem:c,hasError:f})]})}function DWe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,currentItem:l=null,hasError:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),N=e.find(w=>String(w.id)===String(t))||l,b=N?s(N):"",C=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(E=>(s(E)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:b,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${c?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:C.length>0?C.map(w=>{const S=String(w.id),E=s(w),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:E||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function OWe({label:e,name:t,value:a,onChange:s,placeholder:r,required:i=!1,disabled:o=!1,className:l="",rows:c=3}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,required:i,disabled:o,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}const XA=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],ZA={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:"",subtotal:0,tax_rate:0,tax_amount:0,discount_type:"",discount_value:0,discount_amount:0,currency:"PHP",items:[]},ki=e=>{if(!e)return"Draft";const t=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[t]||"Draft"},JA=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",MWe=e=>{switch(ki(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},IWe=e=>{switch(ki(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},Cb=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",jg=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",$We=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const t=new Date(e);if(isNaN(t.getTime()))return"";const a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`}catch{return""}},eT=(e,t)=>{if(!e||t==null||t==="")return"";const a=Number(t);if(Number.isNaN(a))return"";const s=new Date(e);return isNaN(s.getTime())?"":(s.setDate(s.getDate()+a),s.toISOString().slice(0,10))},EB=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},kB=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},ww=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},RWe=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const s of e){const r=localStorage.getItem(s);if(r)try{const i=JSON.parse(r),o=ww(i);if(o)return o}catch{}}const t=localStorage.getItem("user_id"),a=ww(t);return a||null},zWe=e=>{if(!e)return"";const a=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""},UWe=e=>{if(!e)return"";const a=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""};function FWe(){const e=bt(),t=Qt(),{user:a}=Xt(),s=a?.company?.currency||"";h.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[r,i]=h.useState([]),[o,l]=h.useState(!1),[c,d]=h.useState([]),[u,f]=h.useState([]),[p,x]=h.useState([]),[v,N]=h.useState([]),[b,C]=h.useState(null),[w,S]=h.useState(null),[E,k]=h.useState(!1),[A,T]=h.useState(!1),[_,I]=h.useState(!1),[R,U]=h.useState(null),[D,M]=h.useState(!1),[W,X]=h.useState(null),[z,Q]=h.useState(ZA),[de,Y]=h.useState(""),[se,J]=h.useState("Filter by Status"),[F,Ne]=h.useState(null),[re,he]=h.useState(1),[je,De]=h.useState(10),[Me,ve]=h.useState("Overview"),[Be,ke]=h.useState("Draft"),[fe,ne]=h.useState([]),[Ae,ye]=h.useState(null);h.useEffect(()=>{const H=t.state?.quoteID;if(H){ye(H),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(Ae&&r.length>0&&!o){const L=r.find(H=>H.id===Ae);L?S(L):q.error("Quote not found."),ye(null)}},[Ae,p,o]),h.useEffect(()=>{let L=!0;return(async()=>{const we=RWe();if(we&&L){C(we);return}try{const Pe=await ie.get("/auth/me"),le=ww(Pe?.data);if(le&&L){C(le);return}}catch{}try{const Pe=await ie.get("/users/me"),le=ww(Pe?.data);if(le&&L){C(le);return}}catch{}L&&C(null)})(),()=>{L=!1}},[]);const Ie=h.useCallback(L=>L&&u.find(we=>String(we.id)===String(L))?.name||"",[u]),Ve=h.useCallback(L=>{if(!L)return"";const H=p.find(we=>String(we.id)===String(L));return H?`${H.first_name} ${H.last_name}`.trim():""},[p]),Te=h.useCallback(L=>{if(!L)return"--";const H=c.find(we=>String(we.id)===String(L));return H?.deal_name||H?.name||`Deal #${EB(L)}`},[c]),Fe=h.useCallback(L=>{const H=c.find(le=>String(le.id)===String(L)),we=zWe(H);let Pe=UWe(H);if(!Pe&&we){const le=p.filter(Le=>String(Le.account_id||"")===String(we));if(le.length>0){const Le=[...le].sort((Qe,vt)=>{const gt=`${Qe.first_name||""} ${Qe.last_name||""}`.trim().toLowerCase(),Bt=`${vt.first_name||""} ${vt.last_name||""}`.trim().toLowerCase();return gt.localeCompare(Bt)});Pe=String(Le[0].id)}}if(we&&Pe){const le=p.find(Le=>String(Le.id)===String(Pe));le?.account_id&&String(le.account_id)!==String(we)&&(Pe="")}return{accountId:we||"",contactId:Pe||""}},[c,p]),Ye=h.useCallback(L=>{if(!L)return"--";if(L.deal?.deal_name)return L.deal.deal_name;if(L.deal?.name)return L.deal.name;const H=L.deal_id||L.deal?.id;return H?Te(H):"--"},[Te]),B=h.useCallback(L=>{if(!L)return"--";if(L.account?.name)return L.account.name;let H=L.account_id||L.account?.id;if(!H){const we=L.deal_id||L.deal?.id;we&&(H=Fe(we).accountId)}return H?Ie(H)||`Account #${H}`:"--"},[Fe,Ie]),xe=h.useCallback(L=>{if(!L)return"--";if(L.contact?.first_name||L.contact?.last_name)return`${L.contact?.first_name||""} ${L.contact?.last_name||""}`.trim()||"--";let H=L.contact_id||L.contact?.id;if(!H){const Pe=L.deal_id||L.deal?.id;Pe&&(H=Fe(Pe).contactId)}return(H?Ve(H):"")||(H?`Contact #${H}`:"--")},[Fe,Ve]),_e=h.useCallback(async(L=null)=>{l(!0);try{const H=await ie.get("/quotes/admin/fetch-all"),Pe=[...Array.isArray(H.data)?H.data:[]].sort((le,Le)=>{const Qe=le?.created_at||le?.updated_at||0,vt=Le?.created_at||Le?.updated_at||0;return new Date(vt)-new Date(Qe)});if(i(Pe),L){const le=Pe.find(Le=>Le.id===L);S(le||null)}}catch(H){console.error(H),i([]),H.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch quotes. Please try again later.")}finally{l(!1)}},[]),ce=h.useCallback(async()=>{try{const L=await ie.get("/deals/admin/fetch-all");d(Array.isArray(L.data)?L.data:[])}catch(L){console.error(L),L.response?.status===403&&q.warn("Unable to load deals (permission denied).")}},[]),Ee=h.useCallback(async()=>{try{const L=await ie.get("/accounts/admin/fetch-all");f(Array.isArray(L.data)?L.data:[])}catch(L){console.error(L),L.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},[]),ae=h.useCallback(async()=>{try{const L=await ie.get("/contacts/admin/fetch-all");x(Array.isArray(L.data)?L.data:[])}catch(L){console.error(L),L.response?.status===403&&q.warn("Unable to load contacts (permission denied).")}},[]),He=h.useCallback(async()=>{try{const L=await ie.get("/users/all");N(Array.isArray(L.data)?L.data:[])}catch(L){console.error(L),L.response?.status===403&&q.warn("Unable to load users (permission denied).")}},[]);h.useEffect(()=>{_e(),ce(),Ee(),ae(),He()},[_e,ce,Ee,ae,He]);const Re=h.useMemo(()=>{const L=de.trim().toLowerCase(),H=se.trim();return r.filter(we=>{const Pe=Ye(we),le=B(we),Le=xe(we),Qe=eT(we.presented_date,we.validity_days),vt=[we.quote_id,Pe,le,Le,we.total_amount?.toString(),we.validity_days?.toString(),we.presented_date?jg(we.presented_date):"",Qe?jg(Qe):"",we.assigned_user?.first_name,we.assigned_user?.last_name,we.creator?.first_name,we.creator?.last_name,we.status,we.notes,Cb(we.created_at),Cb(we.updated_at)],gt=L===""||vt.some(wn=>wn==null?!1:wn.toString().toLowerCase().includes(L)),Bt=H==="Filter by Status"||ki(we.status)===H;return gt&&Bt})},[r,de,se,Ye,B,xe]),it=Math.max(1,Math.ceil(Re.length/je)||1);h.useEffect(()=>he(1),[de,se]),h.useEffect(()=>{he(L=>{const H=Math.max(1,Math.ceil(Re.length/je)||1);return L>H?H:L})},[Re.length,je]);const mt=h.useMemo(()=>{const L=(re-1)*je;return Re.slice(L,L+je)},[Re,re,je]),ee=()=>he(L=>Math.max(L-1,1)),pe=()=>he(L=>Math.min(L+1,it)),Ue=L=>{S(L),ve("Overview"),ke(ki(L?.status)||"Draft")},Ze=()=>{S(null),ve("Overview")},nt=L=>{L.target.id==="quoteModalBackdrop"&&!D&&Ze()},Je=h.useCallback(()=>{k(!1),T(!1),X(null),Q(ZA),I(!1)},[]),Oe=L=>{L.target.id==="modalBackdrop"&&!_&&!D&&Je()},ge=L=>{const{name:H,value:we}=L.target;if(H==="deal_id"){const{accountId:Pe,contactId:le}=Fe(we);Q(Le=>({...Le,deal_id:we,account_id:Pe,contact_id:le}));return}Q(Pe=>({...Pe,[H]:we}))},Ke=()=>{Q(ZA),T(!1),X(null),k(!0)},G=L=>{if(!L)return;S(null);const H=L.deal?.id?String(L.deal.id):L.deal_id?String(L.deal_id):"",we=H?Fe(H):{accountId:"",contactId:""},Pe=L.account?.id?String(L.account.id):L.account_id?String(L.account_id):we.accountId,le=L.contact?.id?String(L.contact.id):L.contact_id?String(L.contact_id):we.contactId,Le=L.assigned_user?.id?String(L.assigned_user.id):L.assigned_to?String(L.assigned_to):"";Q({deal_id:H,account_id:Pe||"",contact_id:le||"",total_amount:L.total_amount?.toString()||"",presented_date:$We(L.presented_date),validity_days:L.validity_days!==null&&L.validity_days!==void 0?String(L.validity_days):"",status:ki(L.status)||"Draft",assigned_to:Le,notes:L.notes||"",subtotal:parseFloat(L.subtotal)||0,tax_rate:parseFloat(L.tax_rate)||0,tax_amount:parseFloat(L.tax_amount)||0,discount_type:L.discount_type||"",discount_value:parseFloat(L.discount_value)||0,discount_amount:parseFloat(L.discount_amount)||0,currency:L.currency||"PHP",items:Array.isArray(L.items)?L.items.map(Qe=>({id:Qe.id,item_type:Qe.item_type||"Product",name:Qe.name||"",description:Qe.description||"",sku:Qe.sku||"",variant:Qe.variant||"",unit:Qe.unit||"pcs",quantity:parseFloat(Qe.quantity)||1,unit_price:parseFloat(Qe.unit_price)||0,discount_percent:parseFloat(Qe.discount_percent)||0,discount_amount:parseFloat(Qe.discount_amount)||0,line_total:parseFloat(Qe.line_total)||0,sort_order:Qe.sort_order||0})):[]}),T(!0),X(L.id),k(!0)},$=L=>{if(L.target.checked){const H=mt.map(we=>we.id);ne(H)}else ne([])},V=L=>{ne(H=>H.includes(L)?H.filter(we=>we!==L):[...H,L])},te=L=>{if(!L)return;const H=L.quote_id||"this quote";U({title:"Delete Quote",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:H}),"? This action cannot be undone."]}),confirmLabel:"Delete Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:L.id,name:H}})},Z=async()=>{fe.length!==0&&U({title:"Delete Quotes",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:fe.length})," selected quotes? This action cannot be undone."]}),confirmLabel:`Delete ${fe.length} Quote(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",quote_ids:fe}})},[Se,me]=h.useState(!1),ue=L=>{if(L.preventDefault(),me(!0),!b){q.error("Unable to determine current user. Please log in again.");return}if(!z.deal_id){q.error("Deal is required.");return}if(!z.assigned_to){q.error("Assigned To is required.");return}const we=Fe(z.deal_id),Pe=z.items.map((gt,Bt)=>({item_type:gt.item_type||"Product",name:gt.name,description:gt.description||null,sku:gt.sku||null,variant:gt.variant||null,unit:gt.unit||null,quantity:parseFloat(gt.quantity)||1,unit_price:parseFloat(gt.unit_price)||0,discount_percent:parseFloat(gt.discount_percent)||0,sort_order:gt.sort_order??Bt})),le={deal_id:Number(z.deal_id),account_id:we.accountId?Number(we.accountId):null,contact_id:we.contactId?Number(we.contactId):null,subtotal:parseFloat(z.subtotal)||0,tax_rate:parseFloat(z.tax_rate)||0,tax_amount:parseFloat(z.tax_amount)||0,discount_type:z.discount_type||null,discount_value:parseFloat(z.discount_value)||0,discount_amount:parseFloat(z.discount_amount)||0,total_amount:parseFloat(z.total_amount)||0,currency:z.currency||"PHP",presented_date:z.presented_date||null,validity_days:z.validity_days===""?null:Number(z.validity_days),status:z.status||"Draft",assigned_to:z.assigned_to?Number(z.assigned_to):null,notes:z.notes?.trim()||null,items:Pe},Le=A&&W?"update":"create",Qe=Te(z.deal_id),vt=Le==="create"?{...le,created_by_id:Number(b)}:le;U({title:Le==="create"?"Confirm New Quote":"Confirm Update",message:Le==="create"?n.jsxs("span",{children:["Are you sure you want to create a quote for"," ",n.jsx("span",{className:"font-semibold",children:Qe}),"?"]}):n.jsxs("span",{children:["Save changes to"," ",n.jsx("span",{className:"font-semibold",children:Qe}),"?"]}),confirmLabel:Le==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:Le,payload:vt,targetId:W||null,name:Qe}})},$e=async()=>{if(!R?.action){U(null);return}const{action:L}=R,{type:H,payload:we,targetId:Pe,name:le}=L;M(!0);try{if(H==="create")I(!0),await ie.post("/quotes/admin",we),q.success("Quote created successfully."),Je(),await _e();else if(H==="update"){if(!Pe)throw new Error("Missing quote identifier for update.");I(!0),await ie.put(`/quotes/admin/${Pe}`,we),q.success("Quote updated successfully."),Je(),await _e(),w?.id===Pe&&S(null)}else if(H==="delete"){if(!Pe)throw new Error("Missing quote identifier for deletion.");const Le=w?.id;Ne(Pe),await ie.delete(`/quotes/admin/${Pe}`),q.success(`Quote "${le}" deleted successfully.`),await _e(Le&&Le!==Pe?Le:null),Le===Pe&&S(null)}else H==="bulk-delete"&&(await ie.post("/quotes/admin/bulk-delete",{quote_ids:fe}),q.success(`Successfully deleted ${fe.length} quotes`),ne([]),await _e())}catch(Le){console.error(Le);const Qe=H==="create"?"Failed to create quote. Please review the details and try again.":H==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";q.error(Qe),(H==="create"||H==="update")&&I(!1),H==="delete"&&Ne(null)}finally{(H==="create"||H==="update")&&I(!1),H==="delete"&&Ne(null),M(!1),U(null)}},be=()=>{D||U(null)},We=h.useCallback((L,H)=>{const we=L?.deal_id??L?.deal?.id??"",Pe=we?Number(we):null,le=Pe?Fe(String(Pe)):{accountId:"",contactId:""},Le=L?.account_id??L?.account?.id??le.accountId??null,Qe=L?.contact_id??L?.contact?.id??le.contactId??null,vt=L?.total_amount??0,gt=L?.assigned_to??L?.assigned_user?.id??null;return{deal_id:Pe,account_id:Le!=null&&String(Le).trim()!==""?Number(Le):null,contact_id:Qe!=null&&String(Qe).trim()!==""?Number(Qe):null,total_amount:Number(vt),presented_date:L?.presented_date||null,validity_days:L?.validity_days===""||L?.validity_days===void 0||L?.validity_days===null?null:Number(L.validity_days),status:H,assigned_to:gt!=null&&String(gt).trim()!==""?Number(gt):null,notes:L?.notes?.trim()||null}},[Fe]),ft=h.useCallback(async()=>{if(!w?.id)return;const L=ki(Be),H=[L,L.toLowerCase()],we=async Pe=>ie.patch(`/quotes/admin/${w.id}/status`,{status:Pe},{headers:{"Content-Type":"application/json"}});try{let Pe=!1;for(const le of H)try{await we(le),Pe=!0;break}catch(Le){if(Le?.response?.status===422)continue;throw Le}if(!Pe){const le=We(w,L);if(!le.deal_id){q.error("Cannot update status: missing deal_id on selected quote.");return}if(!le.total_amount||le.total_amount<=0){q.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await ie.put(`/quotes/admin/${w.id}`,le)}q.success(`Quote status updated to ${L}`),S(null),ve("Overview"),await _e()}catch(Pe){console.error(Pe);const le=Pe?.response?.data?.message||(Pe?.response?.data?.errors?Object.values(Pe.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";q.error(le)}},[w,Be,_e,We]),yt=[{label:"Filter by Status",value:"Filter by Status"},...XA.map(L=>({label:L.label,value:L.value}))],Tt=R?.action?.type==="delete"?R.action.targetId:null,Et=w&&(F===w.id||Tt===w.id),Gt=w&&F===w.id,oe=w?n.jsx("div",{id:"quoteModalBackdrop",onClick:nt,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:L=>L.stopPropagation(),children:[n.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:n.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),n.jsx("button",{onClick:Ze,className:"text-gray-500 hover:text-white transition cursor-pointer",children:n.jsx(Wn,{size:25})})]})}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:Ye(w)}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${IWe(w.status)}`,children:JA(w.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>G(w),disabled:D||R?.action?.type==="update"&&R.action.targetId===w.id,children:[n.jsx(ia,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>te(w),disabled:!!Et,children:Gt?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Ut,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-1 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(L=>n.jsx("button",{onClick:()=>ve(L),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${Me===L?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:L},L))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Me==="Overview"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Quote ID:"}),n.jsx("p",{children:kB(w.quote_id)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Deal:"}),n.jsx("p",{children:Ye(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Account:"}),n.jsx("p",{children:B(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact:"}),n.jsx("p",{children:xe(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Total Amount:"}),n.jsx("p",{children:w.total_amount?`${s}${Number(w.total_amount).toLocaleString()}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Presented Date:"}),n.jsx("p",{children:jg(w.presented_date)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Validity Days:"}),n.jsx("p",{children:w.validity_days!==null&&w.validity_days!==void 0?w.validity_days:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),n.jsx("p",{children:jg(eT(w.presented_date,w.validity_days))||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:JA(w.status)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:w.assigned_user?`${w.assigned_user.first_name} ${w.assigned_user.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:w.creator?`${w.creator.first_name} ${w.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:Cb(w.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:Cb(w.updated_at)||"N/A"})]})]}),w.items&&w.items.length>0&&n.jsx("div",{className:"mt-6",children:n.jsx(od,{items:w.items,onChange:()=>{},currencySymbol:s,readOnly:!0,taxRate:parseFloat(w.tax_rate)||0,discountType:w.discount_type,discountValue:parseFloat(w.discount_value)||0})})]}),Me==="Notes"&&n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),n.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:w.notes||"No notes available."})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(At,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Quotes"}}}),children:[n.jsx(Ct,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:Be||ki(w.status)||"Draft",onChange:L=>ke(L.target.value),children:XA.map(L=>n.jsx("option",{value:L.value,children:L.label},L.value))}),n.jsx("button",{onClick:ft,disabled:ki(Be)===ki(w.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${ki(Be)===ki(w.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,rt=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[o&&n.jsx(zt,{message:"Loading quotes..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(xn,{className:"mr-2 text-blue-600"})," Quotes"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto gap-2",children:n.jsxs("button",{onClick:()=>{Ke(),me(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(un,{className:"mr-2"})," Add Quote"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Ht,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search quotes",value:de,onChange:L=>Y(L.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:se,onChange:L=>J(L.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:yt.map(L=>n.jsx("option",{value:L.value,children:L.label},L.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:mt.length>0&&fe.length===mt.length,onChange:$,className:"cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),n.jsx("th",{className:"py-3 px-4",children:"Deal"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Expiry Date"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:fe.length>0?n.jsx("button",{onClick:Z,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${fe.length} selected items`,children:n.jsx(Ut,{size:18})}):""})]})}),n.jsx("tbody",{children:o?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"Loading quotes..."})}):Re.length>0?mt.map(L=>{const H=eT(L.presented_date,L.validity_days);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>Ue(L),children:[n.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:we=>we.stopPropagation(),children:n.jsx("input",{type:"checkbox",checked:fe.includes(L.id),onChange:()=>V(L.id),className:"cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:kB(L.quote_id)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:Ye(L)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-sm text-gray-700 break-words",children:B(L)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:xe(L)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-700",children:L.total_amount?`${s}${Number(L.total_amount).toLocaleString()}`:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${MWe(L.status)}`,children:JA(L.status)})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{children:L.assigned_user?`${L.assigned_user.first_name} ${L.assigned_user.last_name}`:"Unassigned"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-500 text-xs",children:jg(H)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top text-center w-24"})]},L.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"No quotes found."})})})]})}),n.jsx(tn,{className:"mt-4",totalItems:Re.length,pageSize:je,currentPage:re,onPrev:ee,onNext:pe,onPageSizeChange:L=>{De(L),he(1)},pageSizeOptions:[10,20,30,40,50],label:"quotes"})]}),_t=E?n.jsx("div",{id:"modalBackdrop",onClick:Oe,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:L=>L.stopPropagation(),children:[n.jsx("button",{onClick:()=>{Je(),me(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:_||D,children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:A?"Edit Quote":"Add New Quote"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:ue,children:[n.jsx(DB,{label:"Deal",name:"deal_id",value:z.deal_id,onChange:L=>{const{accountId:H,contactId:we}=Fe(L);Q(Pe=>({...Pe,deal_id:L,account_id:H,contact_id:we}))},items:Array.isArray(c)?c:[],getLabel:L=>`${EB(L?.deal_id??"")} ${L?.name??""}`.trim(),placeholder:"Search deal...",required:!0,isSubmitted:Se,disabled:_||c.length===0,className:"md:col-span-2"}),n.jsx(PB,{label:"Account",value:Ie(z.account_id)||(z.account_id?`Account #${z.account_id}`:""),disabled:!0}),n.jsx(PB,{label:"Contact",value:Ve(z.contact_id)||(z.contact_id?`Contact #${z.contact_id}`:""),disabled:!0}),n.jsx("div",{className:"md:col-span-2 mt-2",children:n.jsx(od,{items:z.items,onChange:L=>Q(H=>({...H,items:L})),currencySymbol:s,readOnly:_,taxRate:z.tax_rate,discountType:z.discount_type,discountValue:z.discount_value,onTotalsChange:L=>{Q(H=>({...H,subtotal:L.subtotal,discount_amount:L.discount_amount,tax_amount:L.tax_amount,total_amount:L.total_amount}))}})}),n.jsxs("div",{className:"md:col-span-2 mt-2 p-4 bg-gray-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Pricing Settings"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Discount Type"}),n.jsxs("select",{value:z.discount_type||"",onChange:L=>Q(H=>({...H,discount_type:L.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",disabled:_,children:[n.jsx("option",{value:"",children:"No Discount"}),n.jsx("option",{value:"percentage",children:"Percentage (%)"}),n.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-600 text-xs mb-1",children:["Discount ",z.discount_type==="percentage"?"%":"Amount"]}),n.jsx("input",{type:"number",value:z.discount_value||"",onChange:L=>Q(H=>({...H,discount_value:L.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:z.discount_type==="percentage"?"100":void 0,step:"0.01",disabled:_||!z.discount_type})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Tax Rate (%)"}),n.jsx("input",{type:"number",value:z.tax_rate||"",onChange:L=>Q(H=>({...H,tax_rate:L.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:"100",step:"0.01",disabled:_})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Total Amount"}),n.jsxs("div",{className:"w-full bg-gray-100 border border-gray-300 rounded-md px-2 py-1.5 text-sm font-medium",children:[s,parseFloat(z.total_amount||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),n.jsx(LB,{label:"Presented Date",name:"presented_date",type:"date",value:z.presented_date,onChange:ge,disabled:_}),n.jsx(LB,{label:"Validity Days",name:"validity_days",type:"number",value:z.validity_days,onChange:ge,placeholder:"30",disabled:_}),n.jsx(DB,{label:"Assigned To",value:z.assigned_to||"",onChange:L=>Q(H=>({...H,assigned_to:L})),items:Array.isArray(v)?v:[],getLabel:L=>{const H=`${L?.first_name??""} ${L?.last_name??""}`.trim();return H?L?.role?`${H} (${L.role})`:H:L?.email||""},placeholder:"Search assignee...",required:!0,isSubmitted:Se,disabled:_}),n.jsx(BWe,{label:"Status",name:"status",value:z.status,onChange:ge,options:XA,required:!0,disabled:_,className:"md:col-span-2"}),n.jsx(GWe,{label:"Notes",name:"notes",value:z.notes,onChange:ge,placeholder:"Additional details...",rows:3,disabled:_,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{Je(),me(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:_||D,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:_||D,children:_?"Saving...":A?"Update Quote":"Save Quote"})]})]})]})}):null,Nt=R?n.jsx(WWe,{open:!0,title:R.title,message:R.message,confirmLabel:R.confirmLabel,cancelLabel:R.cancelLabel,variant:R.variant,onConfirm:$e,onCancel:be,loading:D}):null;return n.jsxs(n.Fragment,{children:[w?oe:rt,_t,Nt]})}function LB({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function PB({label:e,value:t,className:a="",disabled:s=!0}){return n.jsxs("div",{className:a,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("input",{type:"text",value:t??"",disabled:s,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function BWe({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){const c=a!=null?String(a):"",u=r.some(f=>String(f.value)===c)?c:"";return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:u,onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(f=>n.jsx("option",{value:String(f.value??""),children:f.label},f.value??f.label))})]})}function DB({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(HWe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function HWe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",N=h.useMemo(()=>{const b=u.trim().toLowerCase();return(b?e.filter(w=>(s(w)||"").toLowerCase().includes(b)):e).slice(0,o)},[e,u,s,o]);return h.useEffect(()=>{const b=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:v,placeholder:r,onFocus:()=>!i&&d(!0),onChange:b=>{f(b.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:N.length>0?N.map(b=>{const C=String(b.id),w=s(b),S=String(t)===C;return n.jsx("button",{type:"button",onClick:()=>{a(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},C)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function GWe({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function WWe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function qWe(){const{userRole:e}=Bs();return n.jsx(Dj,{currentUserRole:e,currentUserId:null})}const OB=["Not started","In progress","Deferred","Completed"],MB={NOT_STARTED:"Not started","NOT STARTED":"Not started","TO DO":"Not started",IN_PROGRESS:"In progress","IN PROGRESS":"In progress",COMPLETED:"Completed",DEFERRED:"Deferred","Not started":"Not started","In progress":"In progress",Completed:"Completed",Deferred:"Deferred","In Progress":"In progress","To Do":"Not started",Review:"Deferred"},YJ=e=>e&&(MB[e]||MB[String(e).toUpperCase()])||"Not started",VWe=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const a=t.getTimezoneOffset();return new Date(t.getTime()-a*60*1e3).toISOString().slice(0,16)},IB=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},YWe=e=>{const t=e.subject?.trim()??"",a=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),YJ(e.status);let r=null,i=null,o=null,l=null,c=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?o=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Quote"&&e.relatedTo2&&(c=Number(e.relatedTo2)));const d=e.assignedTo?Number(e.assignedTo):null,u=o||l||i||r,f=o?"Contact":l?"Deal":i?"Account":r?"Lead":c?"Quote":null;return{title:t,description:a,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:d,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:o,deal_id:l,quote_id:c,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:u,related_type:f}},QWe=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",a=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",o=W=>{if(!W)return"";const X=String(W).split("-");return X.length===3?`${X[0]}-${X[2]}`:String(W)},l=()=>e.lead?.id||e.lead_id,c=()=>e.account?.id||e.account_id,d=()=>e.contact?.id||e.contact_id,u=()=>e.deal?.id||e.deal_id,f=()=>e.quote?.id||e.quote_id,p=()=>e.task_assign_to?.id||e.assigned_to,x=()=>e.lead?.title||e.lead_id,v=()=>e.account?.name||e.account_id,N=()=>i||e.contact_id,b=()=>e.deal?.name||e.deal_id,C=()=>o(e.quote?.quote_id)||e.id;let w="Lead",S="",E="",k="",A="Lead",T="",_="",I="";const R=c(),U=v(),D=l(),M=x();if(R){w="Account",A="Account",T=U,S=String(R);const W=d(),X=u(),z=N(),Q=b(),de=f(),Y=C();W?(E="Contact",_="Contact",I=z,k=String(W)):X?(_="Deal",E="Deal",I=Q,k=String(X)):de&&(_="Quote",E="Quote",I=Y,k=String(de))}else D?(A="Lead",T=M,w="Lead",S=String(D)):e.related_type==="Account"&&(w="Account",S=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:YJ(e.status),dueDate:s,dateAssigned:r,assignedToId:p()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:a,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:A,relatedTo1Text:T,relatedType2Text:_,relatedTo2Text:I,subject:e.title,relatedType1:w,relatedTo1:S,relatedType2:E,relatedTo2:k}};function KWe(){h.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=Xt(),[a,s]=h.useState("board"),[r,i]=h.useState(!1),[o,l]=h.useState(null),[c,d]=h.useState(!1),[u,f]=h.useState([]),[p,x]=h.useState(!0),[v,N]=h.useState(""),[b,C]=h.useState("Filter by Status"),[w,S]=h.useState("Filter by Priority"),[E,k]=h.useState([]),[A,T]=h.useState(1),[_,I]=h.useState(10),[R,U]=h.useState(null),[D,M]=h.useState(!1),[W,X]=h.useState([]),z=bt(),Q=Qt(),[de,Y]=h.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""}),[se,J]=h.useState(null);h.useEffect(()=>{const B=Q.state?.openTaskModal,xe=Q.state?.initialTaskData,_e=Q.state?.taskID;B?(i(!0),xe&&Y(ce=>({...ce,...xe})),z(Q.pathname,{replace:!0,state:{}})):_e&&(J(_e),z(Q.pathname,{replace:!0,state:{}}))},[Q,z]),h.useEffect(()=>{if(se&&u.length>0&&!p){const B=u.find(xe=>xe.id===se);B?he(B,!0):q.error("Task not found."),J(null)}},[se,u,p]);const F=async()=>{try{const B=await ie.get("/users/all");k(Array.isArray(B.data)?B.data:[])}catch(B){console.error("Failed to fetch users:",B),q.error("Failed to fetch users.")}},Ne=async()=>{try{x(!0);const B=await ie.get("/tasks/all"),_e=(Array.isArray(B.data)?B.data:[]).map(QWe);_e.sort((ce,Ee)=>{const ae=ce.createdAt?new Date(ce.createdAt):0;return(Ee.createdAt?new Date(Ee.createdAt):0)-ae}),f(_e),a==="list"&&T(1)}catch(B){console.error("Failed to load tasks:",B),q.error("Failed to load tasks.")}finally{x(!1)}};h.useEffect(()=>{!t&&e&&(F(),Ne())},[t,e]);const re=()=>{l(null),Y({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},he=(B=null,xe=!1)=>{l(B),d(xe),B?Y({id:B.id,subject:B.title||"",description:B.description||"",priority:B.priority||"Normal",status:B.status||"Not started",dueDate:VWe(B.dueDate),assignedTo:B.assignedToId?String(B.assignedToId):"",notes:B.notes||"",relatedType1Text:B.relatedType1Text||"",relatedTo1Text:B.relatedTo1Text||"",relatedType2Text:B.relatedType2Text||"",relatedTo2Text:B.relatedTo2Text||"",relatedType1:B.relatedType1||"",relatedTo1:B.relatedTo1||"",relatedType2:B.relatedType2||"",relatedTo2:B.relatedTo2||""}):re(),i(!0)},je=()=>{i(!1),l(null),d(!1),re()},De=async B=>{const xe=YWe(B);try{o&&!c?(await ie.put(`/tasks/${o.id}`,xe),q.success("Task updated successfully.")):(await ie.post("/tasks/create",xe),q.success("Task created successfully.")),i(!1),await Ne()}catch(_e){console.error("Failed to save task:",_e);const ce=_e.response?.data?.detail||"Failed to save task.";q.error(ce)}},Me=B=>{B&&U({title:"Delete Task",message:n.jsxs(n.Fragment,{children:["Are you sure you want to delete ",n.jsx("span",{className:"font-semibold",children:B.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:B.id}})},ve=()=>{if(ye.every(B=>W.includes(B.id)))X(W.filter(B=>!ye.map(xe=>xe.id).includes(B)));else{const B=ye.map(xe=>xe.id);X([...new Set([...W,...B])])}},Be=B=>{X(xe=>xe.includes(B)?xe.filter(_e=>_e!==B):[...xe,B])},ke=async()=>{W.length!==0&&U({title:"Delete Tasks",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:W.length})," selected tasks? This action cannot be undone."]}),confirmLabel:`Delete ${W.length} Task(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",task_ids:W}})},fe=async()=>{if(!R?.action){U(null);return}const{action:B}=R;M(!0);try{B.type==="delete"?(await ie.delete(`/tasks/${B.targetId}`),q.success("Task deleted successfully."),await Ne()):B.type==="bulk-delete"&&(await ie.delete("/tasks/admin/bulk-delete",{data:{task_ids:B.task_ids}}),q.success(`Successfully deleted ${B.task_ids.length} tasks`),X([]),await Ne())}catch(xe){console.error("Task action failed:",xe),q.error("Failed to delete task.")}finally{M(!1),U(null)}},ne=()=>{D||U(null)},Ae=h.useMemo(()=>{const B=v.trim().toLowerCase();return[...u].sort((_e,ce)=>{const Ee=_e.createdAt?new Date(_e.createdAt):0;return(ce.createdAt?new Date(ce.createdAt):0)-Ee}).filter(_e=>{const ce=B===""||_e.title?.toLowerCase().includes(B)||_e.description?.toLowerCase().includes(B)||_e.assignedToName?.toLowerCase().includes(B)||_e.createdBy?.toLowerCase().includes(B),Ee=b==="Filter by Status"||_e.status===b,ae=w==="Filter by Priority"||_e.priority===w;return ce&&Ee&&ae})},[u,v,b,w]);h.useEffect(()=>{T(1)},[v,b,w,a,_]),h.useEffect(()=>{if(a==="list"){const B=Ae.length===0?1:Math.ceil(Ae.length/_);A>B&&T(B)}},[Ae.length,A,a,_]);const ye=h.useMemo(()=>{if(a==="board")return Ae;const B=(A-1)*_;return Ae.slice(B,B+_)},[Ae,A,a,_]),Ie=h.useMemo(()=>{const B=new Date;return[{title:"To Do",value:u.filter(xe=>xe.status==="Not started").length,icon:zs,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:u.filter(xe=>xe.status==="In progress").length,icon:Ri,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:u.filter(xe=>xe.status==="Completed").length,icon:ba,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:u.filter(xe=>xe.dueDate&&new Date(xe.dueDate)<B&&xe.status!=="Completed").length,icon:zf,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:u.filter(xe=>xe.priority==="High").length,icon:Bl,color:"text-orange-600",bgColor:"bg-orange-100"}]},[u]),Ve=B=>B.dueDate&&new Date(B.dueDate)<new Date&&B.status!=="Completed",Te=B=>{switch(B.status){case"Not started":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Deferred":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},Fe=B=>{switch(B){case"Not started":return"bg-blue-100 text-blue-700";case"In progress":return"bg-purple-100 text-purple-700";case"Deferred":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},Ye=B=>{switch(B){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&n.jsx(zt,{message:"Loading tasks..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(Ri,{className:"text-blue-600"})," Tasks Board"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:()=>he(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[n.jsx(un,{})," Create Task"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ie.map(B=>n.jsx(XWe,{...B},B.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Ht,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search tasks",value:v,onChange:B=>N(B.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{value:b,onChange:B=>C(B.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Status"}),OB.map(B=>n.jsx("option",{children:B},B))]}),n.jsxs("select",{value:w,onChange:B=>S(B.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Priority"}),n.jsx("option",{children:"High"}),n.jsx("option",{children:"Normal"}),n.jsx("option",{children:"Low"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${a==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),n.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${a==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&a==="board"&&(Ae.length>0?n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:OB.map(B=>{const xe=ye.filter(_e=>_e.status===B);return n.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative rounded-md",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),n.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:B}),n.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:xe.length})]}),n.jsx("div",{className:`space-y-3 ${xe.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:xe.length>0?xe.map(_e=>n.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${Te(_e)}`,onClick:()=>he(_e,!0),children:[n.jsxs("div",{className:"text-left flex-1",children:[n.jsx("p",{className:"font-medium text-gray-800 text-sm",children:_e.title}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",_e.priority]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",_e.assignedToName]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",n.jsx("span",{className:Ve(_e)?"text-red-600":"text-gray-600",children:_e.dateAssigned?IB(_e.dateAssigned):""})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[n.jsx("button",{type:"button",onClick:ce=>{ce.stopPropagation(),he(_e)},className:"text-blue-500 hover:text-blue-700",children:n.jsx(la,{})}),n.jsx("button",{type:"button",onClick:ce=>{ce.stopPropagation(),Me(_e)},className:"text-red-500 hover:text-red-700",children:n.jsx(Ut,{})})]})]},_e.id)):n.jsx("div",{className:"text-center py-10 text-gray-500",children:"No tasks"})})]},B)})}):n.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No tasks found."})),!p&&!t&&a==="list"&&n.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:ye.length>0&&ye.every(B=>W.includes(B.id)),onChange:ve})}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),n.jsx("th",{className:"py-3 px-4 font-medium text-center w-24",children:W.length>0?n.jsx("button",{onClick:ke,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${W.length} selected tasks`,children:n.jsx(Ut,{size:18})}):""})]})}),n.jsx("tbody",{children:ye.length>0?ye.map(B=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",children:[n.jsx("td",{className:"py-3 px-4",onClick:xe=>xe.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:W.includes(B.id),onChange:()=>Be(B.id)})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",onClick:()=>he(B,!0),children:B.title}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>he(B,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Fe(B.status||"Not started")}`,children:B.status||"Not started"})}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>he(B,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Ye(B.priority||"Low")}`,children:B.priority||"Low"})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",onClick:()=>he(B,!0),children:B.assignedToName||"Unassigned"}),n.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${Ve(B)?"text-red-600 font-medium":""}`,onClick:()=>he(B,!0),children:B.dateAssigned?IB(B.dateAssigned):""}),n.jsx("td",{})]},B.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No tasks found."})})})]})})}),!p&&!t&&a==="list"&&n.jsx(tn,{className:"mt-6",totalItems:Ae.length,pageSize:_,currentPage:Ae.length===0?0:A,onPrev:()=>T(B=>Math.max(B-1,1)),onNext:()=>T(B=>Math.min(B+1,Math.max(1,Math.ceil(Ae.length/_)||1))),onPageSizeChange:B=>{I(B),T(1)},pageSizeOptions:[10,20,30,40,50],label:"tasks"}),n.jsx(n0,{isOpen:r,onClose:je,onSave:De,onEdit:()=>d(!1),setFormData:Y,formData:de,isEditing:!c&&!!o,viewMode:c,users:E,currentUser:e,onDelete:Me}),R&&n.jsx(ZWe,{open:!0,title:R.title,message:R.message,confirmLabel:R.confirmLabel,cancelLabel:R.cancelLabel,variant:R.variant,onConfirm:fe,onCancel:ne,loading:D})]})}function XWe({icon:e,title:t,value:a,color:s,bgColor:r,onClick:i}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function ZWe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r,variant:i,loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const QJ=e=>e?e.toUpperCase():"",Sb=e=>{const t=QJ(e);return t==="PLANNED"||t==="IN PROGRESS"?"PLANNED":t==="HELD"||t==="DONE"?"HELD":t==="NOT_HELD"||t==="NOT HELD"?"NOT_HELD":"PLANNED"},JWe=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},eqe=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},tqe=e=>{const t=QJ(e);switch(t==="PLANNED"?"PENDING":t==="HELD"?"COMPLETED":t==="NOT_HELD"?"CANCELLED":t){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},tT={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},nqe=()=>{const e=bt(),t=Qt(),[a]=Ds(),s=a.get("id"),r=t.pathname==="/admin/meetings/info";h.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[i,o]=h.useState([]),[l,c]=h.useState(!1),[d,u]=h.useState([]),[f,p]=h.useState(""),[x,v]=h.useState("Filter by Status"),[N,b]=h.useState(!1),[C,w]=h.useState(null),[S,E]=h.useState(1),[k,A]=h.useState(10),[T,_]=h.useState(tT),[I,R]=h.useState(!1),[U,D]=h.useState(null),[M,W]=h.useState(!1),[X,z]=h.useState(null),[Q,de]=h.useState(!1),[Y,se]=h.useState(null);h.useEffect(()=>{const ne=t.state?.openMeetingModal,Ae=t.state?.initialMeetingData?.relatedTo||a.get("id"),ye=t.state?.meetingID;ne||Ae?(b(!0),t.state?.initialMeetingData&&_(Ie=>({...Ie,...t.state.initialMeetingData})),e(t.pathname,{replace:!0,state:{}})):ye&&(se(ye),e(t.pathname,{replace:!0,state:{}}))},[t,a,e]),h.useEffect(()=>{if(Y&&i.length>0&&!l){const ne=i.find(Ae=>Ae.id===Y);ne?w(ne):q.error("Meeting not found."),se(null)}},[Y,i,l]);const J=async()=>{if(s&&r){const ne=sessionStorage.getItem("meetingDetailData");if(ne)try{const Ae=JSON.parse(ne);if(Ae.id===parseInt(s)){w(Ae),sessionStorage.removeItem("meetingDetailData");return}}catch(Ae){console.error(Ae)}}c(!0);try{const ne=await ie.get("/meetings/admin/fetch-all"),ye=[...Array.isArray(ne.data)?ne.data:[]].sort((Ie,Ve)=>{const Te=Ie?.createdAt?new Date(Ie.createdAt).getTime():0;return(Ve?.createdAt?new Date(Ve.createdAt).getTime():0)-Te});if(o(ye),s&&!C){const Ie=ye.find(Ve=>Ve.id===parseInt(s));Ie&&w(Ie)}}catch{q.error("Failed to load meetings.")}finally{c(!1)}},F=async()=>{try{const ne=await ie.get("/users/all");u(Array.isArray(ne.data)?ne.data:[])}catch(ne){console.error(ne)}};h.useEffect(()=>{J(),F()},[]);const Ne=ne=>p(ne.target.value),re=h.useMemo(()=>{const ne=f.trim().toLowerCase(),Ae=x.trim().toUpperCase();return i.filter(ye=>{const Ie=[ye?.activity,ye?.description,ye?.relatedTo,ye?.assignedTo],Ve=ne===""||Ie.some(Fe=>Fe&&Fe.toString().toLowerCase().includes(ne)),Te=Ae==="FILTER BY STATUS"||Sb(ye.status||"PENDING")===Ae;return Ve&&Te})},[i,f,x]),he=h.useMemo(()=>{const ne=(S-1)*k;return re.slice(ne,ne+k)},[re,S,k]),je=()=>{b(!1),_(tT),R(!1),D(null),W(!1)},De=()=>{_(tT),R(!1),D(null),b(!0)},Me=ne=>{let Ae="";if(ne.meet_assign_to?.id)Ae=String(ne.meet_assign_to.id);else if(ne.assignedTo){const _e=d.find(ce=>`${ce.first_name} ${ce.last_name}`===ne.assignedTo);Ae=_e?String(_e.id):""}const ye=_e=>{if(!_e)return"";try{const ce=new Date(_e),Ee=ce.getTimezoneOffset()*6e4;return new Date(ce.getTime()-Ee).toISOString().slice(0,16)}catch{return""}};let Ie="Lead",Ve="",Te="Contact",Fe="";if(ne.lead)Ie="Lead",Ve=String(ne.lead.id);else if(ne.account)Ie="Account",Ve=String(ne.account.id),ne.contact?(Te="Contact",Fe=String(ne.contact.id)):ne.deal?(Te="Deal",Fe=String(ne.deal.id)):ne.quote&&(Te="Quote",Fe=String(ne.quote.id));else if(ne.relatedType||ne.related_type){const _e=ne.relatedType||ne.related_type,ce=ne.related_to||ne.relatedToId;_e==="Lead"?(Ie="Lead",Ve=String(ce)):(Ie="Account",Ve=ne.account_id?String(ne.account_id):"")}const Ye={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},B=Sb(ne.status),xe=Ye[B]||"Planned";_({subject:ne.subject||ne.activity||"",location:ne.location||"",startTime:ye(ne.start_time||ne.startTime),endTime:ye(ne.end_time||ne.endTime),status:xe,notes:ne.description||ne.notes||"",assignedTo:Ae,relatedType1:Ie,relatedTo1:Ve,relatedType2:Te,relatedTo2:Fe}),R(!0),D(ne.id),w(null),b(!0)},ve=ne=>{if(!ne.subject?.trim())return q.error("Subject is required.");if(!ne.startTime)return q.error("Start time is required.");if(ne.endTime&&!(new Date(ne.endTime)-new Date(ne.startTime)>0))return q.error("End time must be after start time.");ne.relatedType1,ne.relatedTo1,ne.relatedType1==="Account"&&ne.relatedType2&&ne.relatedTo2&&(ne.relatedType2,ne.relatedTo2);const Ae={...ne,assignedTo:parseInt(ne.assignedTo),relatedTo1:parseInt(ne.relatedTo1),relatedTo2:parseInt(ne.relatedTo2)},ye=I&&U?"update":"create";z({title:ye==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${ye} "${Ae.subject}"?`,confirmLabel:ye==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:ye,payload:Ae,targetId:U,name:Ae.subject}})},Be=async()=>{if(!X?.action)return;const{type:ne,payload:Ae,targetId:ye,name:Ie}=X.action;de(!0);try{ne==="create"?(W(!0),await ie.post("/meetings/create",Ae),q.success(`Meeting "${Ie}" created.`),je(),await J()):ne==="update"?(W(!0),await ie.put(`/meetings/${ye}`,Ae),q.success(`Meeting "${Ie}" updated.`),je(),await J()):ne==="delete"&&(await ie.delete(`/meetings/${ye}`),q.success(`Meeting "${Ie}" deleted.`),C?.id===ye&&w(null),await J())}catch(Ve){const Te=Ve.response?.data?.detail||"Action failed.";q.error(typeof Te=="string"?Te:JSON.stringify(Te)),console.error(Te)}finally{W(!1),de(!1),z(null)}},ke=ne=>{z({title:"Delete Meeting",message:`Permanently delete "${ne.activity}"?`,confirmLabel:"Delete",variant:"danger",action:{type:"delete",targetId:ne.id,name:ne.activity}})},fe=async(ne,Ae)=>{try{await ie.put(`/meetings/${ne}`,{status:Ae}),q.success("Status updated"),J(),w(null)}catch{q.error("Failed to update status")}};return r&&s?C?n.jsx(ld,{meeting:C,onClose:()=>{w(null),e("/admin/dashboard")},onEdit:Me,onDelete:ke,onStatusUpdate:fe}):n.jsx(zt,{message:"Loading meeting..."}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[l&&n.jsx(zt,{message:"Loading meetings..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[n.jsx(Ct,{className:"mr-2 text-blue-600"})," Meetings"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:De,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[n.jsx(un,{className:"mr-2"})," Add Meeting"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[n.jsx(Ht,{className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search meetings",value:f,onChange:Ne,className:"w-full outline-none"})]}),n.jsxs("select",{value:x,onChange:ne=>v(ne.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[n.jsx("option",{children:"Filter by Status"}),n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Start Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:he.length>0?he.map(ne=>n.jsxs("tr",{onClick:()=>w(ne),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:ne.subject}),n.jsxs("td",{className:"py-3 px-4",children:[ne.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ne.lead.title}),ne.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ne.account.name}),ne.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[ne.contact.first_name," ",ne.contact.last_name]}),ne.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ne.deal.name}),ne.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:JWe(ne.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4",children:eqe(ne.start_time)}),n.jsxs("td",{className:"py-3 px-4",children:[ne.meet_assign_to.first_name," ",ne.meet_assign_to.last_name]}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${tqe(Sb(ne.status))}`,children:Sb(ne.status).replace("_"," ")})})]},ne.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),n.jsx(tn,{totalItems:re.length,pageSize:k,currentPage:S,onPrev:()=>E(ne=>Math.max(1,ne-1)),onNext:()=>E(ne=>ne+1),onPageSizeChange:A,label:"meetings"}),N&&n.jsx(Gj,{onClose:je,formData:T,setFormData:_,isEditing:I,onSubmit:ve,isSubmitting:M||Q,users:d}),C&&n.jsx(ld,{meeting:C,onClose:()=>w(null),onEdit:Me,onDelete:ke,onStatusUpdate:fe}),X&&n.jsx(aqe,{open:!0,title:X.title,message:X.message,confirmLabel:X.confirmLabel,variant:X.variant,onConfirm:Be,onCancel:()=>z(null),loading:Q})]})};function aqe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{onClick:c,disabled:o,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),n.jsx("button",{onClick:l,disabled:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${d}`,children:o?"...":s})]})]})})}const sqe=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"}],rqe=e=>e?String(e).toUpperCase():"",nf=e=>{const t=rqe(e);return t==="PLANNED"||t==="PENDING"?"PLANNED":t==="HELD"||t==="COMPLETED"?"HELD":t==="NOT HELD"||t==="NOT_HELD"||t==="CANCELLED"?"NOT_HELD":"PLANNED"},nT=e=>{const t=nf(e);return t==="PLANNED"?"PLANNED":t==="HELD"?"HELD":t==="NOT_HELD"?"NOT HELD":"--"},$B=e=>{switch(nf(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},RB=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function iqe(){const[e,t]=h.useState(!1),[a,s]=h.useState(null),[r,i]=h.useState(null),[o,l]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(null),[v,N]=h.useState(!1),[b,C]=h.useState(null),[w,S]=h.useState(!1),[E,k]=h.useState(!1),[A,T]=h.useState("PLANNED"),[_,I]=h.useState(!1),[R,U]=h.useState(!1),[D,M]=h.useState(null);Ds();const W=bt(),X=Qt(),z=Oe=>{if(!Oe)return"";const ge=String(Oe).split("-");return ge.length===3?`${ge[0]}-${ge[2]}`:String(Oe)},de={subject:"",call_time:(()=>{const Oe=new Date,ge=Oe.getFullYear(),Ke=String(Oe.getMonth()+1).padStart(2,"0"),G=String(Oe.getDate()).padStart(2,"0");return`${ge}-${Ke}-${G}T08:00`})(),duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[Y,se]=h.useState(de);h.useEffect(()=>{const Oe=X.state,ge=Oe?.callID;if(ge&&!Oe?.openCallModal){M(ge),W(X.pathname,{replace:!0,state:{}});return}!Oe?.openCallModal||!Oe?.initialCallData||Oe.initialCallData.relatedType1==="Lead"&&Array.isArray(o)&&o.length===0||Oe.initialCallData.relatedType1==="Account"&&(!Array.isArray(o)||o.length===0)||(t(!0),se(Ke=>({...Ke,...Oe.initialCallData,relatedTo1:Oe.initialCallData.relatedTo1?String(Oe.initialCallData.relatedTo1):"",relatedTo2:Oe.initialCallData.relatedTo2?String(Oe.initialCallData.relatedTo2):""})),W(X.pathname,{replace:!0,state:{}}))},[X.state,o]),h.useEffect(()=>{if(D&&u.length>0&&!R){const Oe=u.find(ge=>ge.id===D);Oe?s(Oe):q.error("Call not found."),M(null)}},[D,u,R]);const J=async()=>{try{U(!0);const Oe=await ie.get("/calls/admin/fetch-all"),Ke=[...Array.isArray(Oe.data)?Oe.data:[]].sort((G,$)=>{const V=G?.created_at?new Date(G.created_at):0;return($?.created_at?new Date($.created_at):0)-V});f(Ke)}catch(Oe){console.error("Error fetching calls:",Oe),q.error("Failed to load calls")}finally{U(!1)}},F=async()=>{try{const Oe=await ie.get("/users/all");x(Oe.data)}catch(Oe){console.error("Error fetching users: ",Oe)}};h.useEffect(()=>{F(),J()},[]);const Ne=[],[re,he]=h.useState(""),[je,De]=h.useState("Filter by Status"),[Me,ve]=h.useState("Filter by Users"),[Be,ke]=h.useState(1),[fe,ne]=h.useState(10),Ae=u,ye=Math.max(1,Math.ceil(Ae.length/fe)||1);h.useEffect(()=>{ke(1)},[re,je,fe]),h.useEffect(()=>{ke(Oe=>{const ge=Math.max(1,Math.ceil(Ae.length/fe)||1);return Oe>ge?ge:Oe})},[Ae.length,fe]);const Ie=h.useMemo(()=>{const Oe=(Be-1)*fe;return Ae.slice(Oe,Oe+fe)},[Ae,Be,fe]),Ve=()=>ke(Oe=>Math.max(Oe-1,1)),Te=()=>ke(Oe=>Math.min(Oe+1,ye)),Fe=u.length,Ye=u.filter(Oe=>nf(Oe.status)==="PLANNED").length,B=u.filter(Oe=>nf(Oe.status)==="HELD").length,xe=u.filter(Oe=>nf(Oe.status)==="NOT_HELD").length,_e=[{title:"Total",value:Fe,icon:Ls,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:Ye,icon:zs,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:B,icon:ba,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:xe,icon:Ps,color:"text-gray-600",bgColor:"bg-gray-100"}],[ce,Ee]=h.useState("Overview"),ae=Oe=>{const{name:ge,value:Ke}=Oe.target;se(G=>{const $={...G,[ge]:Ke};return ge==="relatedType1"&&($.relatedTo1="",Ke==="Lead"?($.relatedType2=null,$.relatedTo2=null,d([])):Ke==="Account"&&($.relatedType2="Contact")),ge==="relatedType2"&&($.relatedTo2=""),$})};h.useEffect(()=>{const Oe=async()=>{try{l([]);let ge;Y.relatedType1==="Lead"?ge=await ie.get("/leads/admin/getLeads"):Y.relatedType1==="Account"&&(ge=await ie.get("/accounts/admin/fetch-all"));let Ke=[];if(ge&&Array.isArray(ge.data)?Ke=ge.data:Ke=[],v&&Y.relatedTo1)try{let G;Y.relatedType1==="Lead"?G=await ie.get(`/leads/get/${Y.relatedTo1}`):Y.relatedType1==="Account"&&(G=await ie.get(`/accounts/get/${Y.relatedTo1}`)),G&&G.data&&(Ke.some(V=>String(V.id)===String(Y.relatedTo1))||(Ke=[G.data,...Ke]))}catch(G){console.error("Error fetching specific related item:",G)}l(Ke)}catch(ge){console.error("Error fetching data:",ge),l([])}};Y.relatedType1&&Oe()},[Y.relatedType1,v,Y.relatedTo1]),h.useEffect(()=>{const Oe=async()=>{try{d([]);let ge;if(Y.relatedType1==="Account"&&Y.relatedTo1)Y.relatedType2==="Contact"?ge=await ie.get(`/contacts/from-acc/${Y.relatedTo1}`):Y.relatedType2==="Deal"?ge=await ie.get(`/deals/from-acc/${Y.relatedTo1}`):Y.relatedType2==="Quote"&&(ge=await ie.get(`/quotes/from-acc/${Y.relatedTo1}`));else{d([]);return}let Ke=[];if(ge&&Array.isArray(ge.data)?Ke=ge.data:Ke=[],v&&Y.relatedTo2)try{let G;Y.relatedType2==="Contact"?G=await ie.get(`/contacts/get/${Y.relatedTo2}`):Y.relatedType2==="Deal"?G=await ie.get(`/deals/get/${Y.relatedTo2}`):Y.relatedType2==="Quote"&&(G=await ie.get(`/quotes/get/${Y.relatedTo2}`)),G&&G.data&&(Ke.some(V=>String(V.id)===String(Y.relatedTo2))||(Ke=[G.data,...Ke]))}catch(G){console.error("Error fetching specific related item:",G)}d(Ke)}catch(ge){console.error("Error fetching data:",ge),d([])}};Y.relatedType2&&Oe()},[Y.relatedType2,Y.relatedTo1,Y.relatedType1,v,Y.relatedTo2]);const[He,Re]=h.useState(!1),it=Oe=>{Oe.preventDefault(),Re(!0);const ge=Y.subject;if(!ge||ge.trim()===""){q.error("Subject is required.");return}if(!Y.relatedTo1){q.error(`Please select a ${Y.relatedType1||"Lead/Account"}.`);return}if(!Y.assigned_to){q.error("Subject is required.");return}const G={...Y,duration_minutes:Y.duration_minutes?parseInt(Y.duration_minutes,10):null,relatedTo1:Y.relatedTo1?parseInt(Y.relatedTo1,10):null,relatedTo2:Y.relatedType1==="Lead"?null:Y.relatedTo2?parseInt(Y.relatedTo2,10):null,relatedType2:Y.relatedType1==="Lead"?null:Y.relatedType2,assigned_to:Y.assigned_to?parseInt(Y.assigned_to,10):null},$=v&&b?"update":"create",V=(Y.subject||"").trim()||"Untitled Call";i({title:$==="create"?"Confirm New Call":"Confirm Update",message:$==="create"?`Create "${V}"?`:`Save changes to "${V}"?`,confirmLabel:$==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:$,payload:G,targetId:b||null,name:V}})},mt=Oe=>s(Oe),ee=()=>{t(!1),N(!1),C(null)},pe=async()=>{if(!r?.action){i(null);return}const{action:Oe}=r,{type:ge,payload:Ke,targetId:G,name:$}=Oe;k(!0);try{if(ge==="create")S(!0),await ie.post("/calls/create",Ke),q.success(`Call "${$}" created successfully.`),t(!1),se(de),N(!1),C(null),await J();else if(ge==="update"){if(!G)throw new Error("Missing call identifier for update.");S(!0),await ie.put(`/calls/${G}`,Ke),q.success(`Call "${$}" updated successfully.`),t(!1),se(de),N(!1),C(null),await J()}else if(ge==="delete"){if(!G)throw new Error("Missing call identifier for deletion.");await ie.delete(`/calls/${G}`),q.success(`Call "${$}" deleted successfully.`),a?.id===G&&s(null),await J()}}catch(V){const te=ge==="create"?"Failed to create call. Please review the details and try again.":ge==="update"?"Failed to update call. Please review the details and try again.":"Failed to delete call. Please try again.",Z=V?.response?.data?.detail||te;q.error(Z)}finally{(ge==="create"||ge==="update")&&S(!1),k(!1),i(null)}},Ue=()=>{E||i(null)},Ze=async()=>{if(a?.id)try{I(!0),await ie.put(`/calls/${a.id}`,{status:A}),q.success(`Status updated to ${nT(A)}`),f(Oe=>Array.isArray(Oe)?Oe.map(ge=>ge.id===a.id?{...ge,status:A}:ge):Oe),s(null)}catch(Oe){const ge=Oe.response?.data?.detail||"Failed to update status.";q.error(ge)}finally{I(!1)}};h.useEffect(()=>{a&&T(nf(a.status))},[a]);const nt=a?n.jsxs("div",{id:"callModalBackdrop",onClick:Oe=>Oe.target.id==="callModalBackdrop"&&s(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[R&&n.jsx(zt,{message:"Loading call details..."}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),n.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:n.jsx(Wn,{size:25})})]}),n.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:a.subject}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${$B(a.status)}`,children:nT(a.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const Oe=V=>{if(!V)return"";const te=new Date(V),Z=te.getFullYear(),Se=String(te.getMonth()+1).padStart(2,"0"),me=String(te.getDate()).padStart(2,"0"),ue=String(te.getHours()).padStart(2,"0"),$e=String(te.getMinutes()).padStart(2,"0");return`${Z}-${Se}-${me}T${ue}:${$e}`},ge=a.lead?"Lead":a.account?"Account":"Lead",Ke=a.lead?a.lead.id:a.account?a.account.id:null,G=ge==="Lead"?null:a.contact?"Contact":a.deal?"Deal":a.quote?"Quote":"Contact",$=ge==="Lead"?null:a.contact?a.contact.id:a.deal?a.deal.id:a.quote?a.quote.id:null;se({subject:a.subject||"",call_time:Oe(a.call_time),duration_minutes:a.duration_minutes?String(a.duration_minutes):"",direction:a.direction||"Outgoing",status:a.status||"Planned",notes:a.notes||"",relatedType1:ge,relatedType2:G,relatedTo1:Ke?String(Ke):"",relatedTo2:$?String($):"",assigned_to:a.call_assign_to?.id?String(a.call_assign_to.id):""}),N(!0),C(a.id),s(null),t(!0)},children:[n.jsx(ia,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>{const Oe=a.subject||"this call";i({title:"Delete Call",message:`Are you sure you want to permanently delete "${Oe}"? This action cannot be undone.`,confirmLabel:"Delete Call",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:a.id,name:Oe}})},children:[n.jsx(Ut,{className:"mr-2"}),"Delete"]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(Oe=>n.jsx("button",{onClick:()=>Ee(Oe),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${ce===Oe?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:Oe},Oe))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[ce==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsx(io,{label:"Call Time",value:RB(a.call_time)}),n.jsx(io,{label:"Duration",value:a.duration_minutes?`${a.duration_minutes} min`:null}),n.jsx(io,{label:"Direction",value:a.direction||"--"}),n.jsx(io,{label:"Assigned To",value:`${a.call_assign_to.first_name} ${a.call_assign_to.last_name}`}),a.lead&&n.jsx(io,{label:"Lead",value:a.lead.title}),a.account&&n.jsx(io,{label:"Account",value:a.account.name}),a.contact&&n.jsx(io,{label:"Contact",value:`${a.contact.first_name} ${a.contact.last_name}`}),a.deal&&n.jsx(io,{label:"Deal",value:a.deal.name}),a.quote&&n.jsx(io,{label:"Quote",value:z(a.quote.quote_id)}),n.jsx(io,{label:"Created At",value:RB(a.created_at)})]})}),ce==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Call Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:a.notes||"No notes available."})]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:A,onChange:Oe=>T(Oe.target.value),children:[n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),n.jsx("button",{onClick:Ze,disabled:_,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:_?"Updating...":"Update"})]})]})]})]})]}):null,Je=e?n.jsx("div",{id:"modalBackdrop",onClick:Oe=>Oe.target.id==="modalBackdrop"&&ee(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[n.jsx("button",{onClick:()=>{ee(),Re(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:v?"Edit Call":"Add New Call"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:it,noValidate:!0,children:[n.jsx(lqe,{label:"Subject",className:"md:col-span-2",name:"subject",value:Y.subject,onChange:ae,isSubmitted:He,required:!0}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("div",{className:"relative w-25",children:[n.jsxs("select",{name:"relatedType1",onChange:ae,value:Y.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:w,children:[n.jsx("option",{value:"Lead",children:"Lead"}),n.jsx("option",{value:"Account",children:"Account"})]}),n.jsx("span",{className:"absolute left-10 md:pl-6 pl-6 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),n.jsx(aT,{items:Array.isArray(o)?o:[],value:Y.relatedTo1??"",placeholder:`Search ${Y.relatedType1||"here"}...`,getLabel:Oe=>Y.relatedType1==="Lead"?Oe.title:Oe.name??"",onChange:Oe=>se(ge=>({...ge,relatedTo1:Oe})),required:!0,isSubmitted:He,disabled:w})]}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("select",{name:"relatedType2",onChange:ae,value:Y.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:Y.relatedType1==="Lead"||w,children:[n.jsx("option",{value:"Contact",children:"Contact"}),n.jsx("option",{value:"Deal",children:"Deal"}),n.jsx("option",{value:"Quote",children:"Quote"})]}),n.jsx(aT,{disabled:Y.relatedType1==="Lead"||w,items:Array.isArray(c)?c:[],value:Y.relatedTo2??"",placeholder:Y.relatedType1==="Lead"?"":Array.isArray(c)&&c.length>0?`Search ${Y.relatedType2||"Contact"}...`:`No ${Y.relatedType2||""} data found`,getLabel:Oe=>Y.relatedType2==="Contact"?`${Oe.first_name??""} ${Oe.last_name??""}`.trim():Y.relatedType2==="Quote"?z(Oe.quote_id)??"":Oe.name??"",onChange:Oe=>se(ge=>({...ge,relatedTo2:Oe}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),n.jsx("input",{type:"datetime-local",value:Y.call_time,onChange:ae,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),n.jsxs("div",{className:"w-full",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),n.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[n.jsx("input",{type:"tel",value:Y.duration_minutes,onChange:ae,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),n.jsx("p",{children:"minutes"})]})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),n.jsx(aT,{items:Array.isArray(p)?p:[],value:Y.assigned_to??"",placeholder:"Search an account...",getLabel:Oe=>`${Oe.first_name} ${Oe.last_name}`,onChange:Oe=>se(ge=>({...ge,assigned_to:Oe})),required:!0,isSubmitted:He})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),n.jsxs("select",{name:"direction",onChange:ae,value:Y.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Incoming",children:"Incoming"}),n.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),n.jsxs("select",{name:"status",onChange:ae,value:Y.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Planned",children:"Planned"}),n.jsx("option",{value:"Held",children:"Held"}),n.jsx("option",{value:"Not held",children:"Not held"})]})]}),n.jsx(cqe,{className:"col-span-2",label:"Notes",value:Y.notes,onChange:ae,name:"notes"}),n.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{ee(),Re(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:w,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:w?"Saving...":v?"Update Call":"Save Call"})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Ls,{className:"mr-2 text-blue-600"})," Calls"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{se(de),N(!1),C(null),t(!0),Re(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(un,{className:"mr-2"})," Add Call"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:_e.map(Oe=>n.jsx(oqe,{...Oe},Oe.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[n.jsx(Ht,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",defaultValue:re})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{defaultValue:je,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),sqe.map(Oe=>n.jsx("option",{value:Oe.value,children:Oe.label},Oe.value))]}),n.jsxs("select",{defaultValue:Me,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),Ne.map(Oe=>n.jsx("option",{value:Oe.name,children:Oe.name},Oe.id))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Call Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:R?n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"py-10",children:n.jsx(zt,{message:"Loading calls..."})})}):Ie.length>0?Ie.map(Oe=>n.jsxs("tr",{onClick:()=>mt(Oe),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:Oe.subject||"--"}),n.jsxs("td",{className:"py-3 px-4",children:[Oe.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Oe.lead.title}),Oe.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Oe.account.name}),Oe.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[Oe.contact.first_name," ",Oe.contact.last_name]}),Oe.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Oe.deal.name}),Oe.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:z(Oe.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:Oe.call_time?new Date(Oe.call_time).toLocaleString():"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:Oe?.call_assign_to?`${Oe.call_assign_to.first_name} ${Oe.call_assign_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${$B(Oe.status)}`,children:nT(Oe.status)})})]},Oe.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),n.jsx(tn,{totalItems:Ae.length,pageSize:fe,currentPage:Be,onPrev:Ve,onNext:Te,onPageSizeChange:ne,label:"calls"})]}),nt,Je,r&&n.jsx(dqe,{open:!0,title:r.title,message:r.message,confirmLabel:r.confirmLabel,onConfirm:pe,onCancel:Ue,loading:E})]})}function oqe({icon:e,title:t,value:a,color:s,bgColor:r}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:22})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function lqe({label:e,name:t,value:a,onChange:s,placeholder:r="",type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&o&&!a;return n.jsxs("div",{className:d,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
        `})]})}function cqe(e){return n.jsxs("div",{className:e.className,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),n.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function io({label:e,value:t}){return n.jsxs("p",{children:[n.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",n.jsx("br",{}),n.jsx("span",{className:"break-words",children:t||"--"})]})}function dqe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function aT({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,required:l=!1,isSubmitted:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),v=e.find(w=>String(w.id)===String(t)),N=v?s(v):"",b=l&&c&&!t,C=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(E=>(s(E)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${b?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:C.length>0?C.map(w=>{const S=String(w.id),E=s(w),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:E||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function uqe(){h.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,t]=h.useState(null),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Actions"),[o,l]=h.useState(1),[c,d]=h.useState(10),u=async()=>{try{const w=await ie.get("/logs/read-all");t(w.data)}catch(w){console.error("Error fetching audit logs:",w)}};h.useEffect(()=>{u()},[]);const f=h.useMemo(()=>{if(!Array.isArray(e))return[];const w=a.trim().toLowerCase(),S=r?.toUpperCase?.()||"ALL";return e.filter(k=>{const A=k.timestamp?new Date(k.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",T=`${k.entity_type||""} ${k.entity_name||k.entity_details?.name||k.entity_details?.title||k.entity_id||""}`,_=`${k.logger?.first_name||""} ${k.logger?.last_name||""}`,I=[A,_,k.action,k.entity_type,T,k.description],R=w===""||I.some(D=>D==null?!1:D.toString().toLowerCase().includes(w)),U=S==="FILTER BY ACTIONS"||(k.action||"").toUpperCase()===S;return R&&U}).sort((k,A)=>{const T=k.timestamp?new Date(k.timestamp).getTime():0;return(A.timestamp?new Date(A.timestamp).getTime():0)-T})},[e,a,r]),p=Math.max(1,Math.ceil(f.length/c)||1);h.useEffect(()=>{l(1)},[a,c]),h.useEffect(()=>{l(w=>{const S=Math.max(1,Math.ceil(f.length/c)||1);return w>S?S:w})},[f.length,c]);const x=h.useMemo(()=>{const w=(o-1)*c;return f.slice(w,w+c)},[f,o,c]);f.length===0||(o-1)*c+1,Math.min(o*c,f.length);const v=()=>l(w=>Math.max(w-1,1)),N=()=>l(w=>Math.min(w+1,p)),b=()=>{if(!f.length){Px.error("No logs to export!");return}const w=["Timestamp","User","Action","Resource","Details"],S=f.map(_=>[new Date(_.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${_.logger?.first_name||""} ${_.logger?.last_name||""}`.trim(),_.action,`${_.entity_type}: ${_.entity_id}`,_.description||""]),E=[w.join(","),...S.map(_=>_.map(I=>`"${String(I).replace(/"/g,'""')}"`).join(","))].join(`
`),k=new Blob([E],{type:"text/csv;charset=utf-8;"}),A=URL.createObjectURL(k),T=document.createElement("a");T.href=A,T.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(T),T.click(),document.body.removeChild(T),URL.revokeObjectURL(A)},C=w=>{switch((w||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&n.jsx(zt,{message:"Loading audit logs..."}),n.jsx(Lx,{toastOptions:{duration:1e3}}),n.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[n.jsx(Ct,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),n.jsxs("p",{className:"text-sm text-blue-700",children:[n.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ws,{className:"text-blue-600",size:20}),n.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:b,children:[n.jsx(Fl,{className:"mr-2"}),"Export Logs"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[n.jsx(Ht,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search audit logs",value:a,onChange:w=>s(w.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:r,onChange:w=>i(w.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),n.jsx("option",{value:"CREATE",children:"CREATE"}),n.jsx("option",{value:"DELETE",children:"DELETE"}),n.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),n.jsx("th",{className:"py-3 px-4",children:"User"}),n.jsx("th",{className:"py-3 px-4",children:"Action"}),n.jsx("th",{className:"py-3 px-4",children:"Resource"}),n.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),n.jsx("tbody",{children:Array.isArray(f)&&f.length>0?x.map((w,S)=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(w.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.name}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${C(w.action)}`,children:w.action})}),n.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[w.entity_type,": ",w.entity_id]}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.description})]},S)):n.jsx("tr",{children:n.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),n.jsx(tn,{className:"mt-4",totalItems:f.length,pageSize:c,currentPage:o,onPrev:v,onNext:N,onPageSizeChange:d,label:"logs"})]})}const Xj=[{value:"Manager",label:"Manager"},{value:"Sales",label:"Sales"}],Cg={firstName:"",lastName:"",email:"",password:"",role:""},mqe={CEO:"bg-purple-100 text-purple-700",ADMIN:"bg-purple-100 text-purple-700",GROUP_MANAGER:"bg-indigo-100 text-indigo-700",MANAGER:"bg-blue-100 text-blue-700",MARKETING:"bg-yellow-100 text-yellow-700",SALES:"bg-green-100 text-green-700"},xo=e=>e?e.toString().trim().replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/\s+/g,"_").toUpperCase():"",fqe=e=>{const t=xo(e),a=Xj.find(s=>xo(s.value)===t);return a?a.value:e||""},Ak=e=>{const t=xo(e),a=Xj.find(s=>xo(s.value)===t);return a?a.label:typeof e=="string"?e.toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()):"--"},zB=e=>{if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",","")},sT=(e,{size:t="sm"}={})=>{const a=xo(e),s=mqe[a]||"bg-gray-100 text-gray-700",r=t==="lg"?"px-3 py-1 text-sm":t==="md"?"px-2.5 py-1 text-sm":"px-2 py-1 text-xs";return n.jsx("span",{className:`${r} font-semibold rounded-md inline-flex items-center justify-center ${s}`,children:Ak(e)})},hqe=(e,t)=>{const a=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${a}${s}`.toUpperCase()||"U"},UB=e=>[...e].sort((t,a)=>{const s=t.created_at?new Date(t.created_at).getTime():0;return(a.created_at?new Date(a.created_at).getTime():0)-s});function gqe(){const{user:e,loading:t}=Xt(),[a,s]=h.useState([]),[r,i]=h.useState(!1),[o,l]=h.useState(""),[c,d]=h.useState(""),[u,f]=h.useState(null),[p,x]=h.useState(!1),[v,N]=h.useState(!1),[b,C]=h.useState(null),[w,S]=h.useState(Cg),[E,k]=h.useState(!1),[A,T]=h.useState(null),[_,I]=h.useState(!1),[R,U]=h.useState(1),[D,M]=h.useState(10),[W,X]=h.useState("Overview"),[z,Q]=h.useState(""),[de,Y]=h.useState(!1),se=xo(e?.role);console.log("meow",e);const J=["ADMIN","CEO","GROUP_MANAGER"].includes(se),F=!t&&J,Ne=h.useMemo(()=>{const ae=Xj.filter(He=>xo(He.value)!=="CEO");return[{label:"Filter by Roles",value:""},{label:"CEO",value:"CEO"},...ae]},[]),re=h.useCallback(ae=>{ae&&(s(He=>He.map(Re=>Re.id===ae?{...Re,highlight:!0}:Re)),setTimeout(()=>{s(He=>He.map(Re=>Re.id===ae?{...Re,highlight:!1}:Re))},2e3))},[]),he=h.useCallback(async()=>{i(!0);try{const ae=await ie.get("/users/all"),He=Array.isArray(ae.data)?ae.data:[],Re=UB(He);s(Re),f(it=>it&&(Re.find(ee=>ee.id===it.id)||null)),console.log(ae.data)}catch(ae){console.error("Error fetching users:",ae);const He=ae.response?.data?.detail||"Failed to load users. Please try again later.";q.error(He)}finally{i(!1)}},[]);h.useEffect(()=>{!t&&!J&&e&&q.error("You are not authorized to access User Management.")},[J,t,e]),h.useEffect(()=>{t||!J||he()},[t,J,he]),h.useEffect(()=>{document.title="Users | Sari-Sari CRM"},[]);const je=h.useMemo(()=>{const ae=o.trim().toLowerCase(),He=xo(c);return UB(a.filter(Re=>{if(!Re)return!1;const it=ae===""||[Re.first_name,Re.last_name,`${Re.first_name||""} ${Re.last_name||""}`,Re.email,Ak(Re.role)].filter(Boolean).some(ee=>ee.toString().toLowerCase().includes(ae)),mt=He===""||He==="CEO"&&["CEO","ADMIN"].includes(xo(Re.role))||xo(Re.role)===He;return it&&mt}))},[a,o,c]),De=Math.max(1,Math.ceil(je.length/D)||1);h.useEffect(()=>{U(1)},[o,c,D]),h.useEffect(()=>{U(ae=>{const He=Math.max(1,Math.ceil(je.length/D)||1);return ae>He?He:ae})},[je.length,D]);const Me=h.useMemo(()=>{const ae=(R-1)*D;return je.slice(ae,ae+D)},[je,R,D]);je.length===0||(R-1)*D+1,Math.min(R*D,je.length);const ve=()=>U(ae=>Math.max(ae-1,1)),Be=()=>U(ae=>Math.min(ae+1,De)),ke=()=>{S(Cg),N(!1),C(null),x(!0)},fe=ae=>{f(ae),X("Overview"),Q(ae?.is_active?"Active":"Inactive")},ne=ae=>{ae.target.id==="userModalBackdrop"&&!_&&Ae()},Ae=()=>{f(null)},ye=(ae,He)=>{S(Re=>({...Re,[ae]:He}))},Ie=()=>{const ae="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let He="";for(let Re=0;Re<10;Re+=1)He+=ae.charAt(Math.floor(Math.random()*ae.length));ye("password",He)},Ve=()=>{E||_||(x(!1),S(Cg),C(null),N(!1))},Te=ae=>{S({firstName:ae.first_name||"",lastName:ae.last_name||"",email:ae.email||"",password:"",role:fqe(ae.role)}),N(!0),C(ae.id),x(!0),f(null)},Fe=ae=>{T({title:"Delete User",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsxs("span",{className:"font-semibold",children:[ae.first_name," ",ae.last_name]}),"? This action cannot be undone."]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ae.id,name:`${ae.first_name||""} ${ae.last_name||""}`.trim()||ae.email||"user"}})},Ye=ae=>{ae.preventDefault();const He=w.firstName.trim(),Re=w.lastName.trim(),it=w.email.trim(),mt=w.password.trim(),ee=w.role,pe=!(v&&b);if(!He||!it||!ee){q.warn("Please fill in all required fields.");return}if(pe&&!mt){q.warn("Please fill in all required fields.");return}if(mt&&mt.length<8){q.warn("Password should be at least 8 characters long.");return}const Ue={first_name:He,last_name:Re,email:it,role:ee};(pe||mt)&&(Ue.password=mt);const Ze=`${He} ${Re}`.trim(),nt=pe?"create":"update";T({title:nt==="create"?"Confirm New User":"Confirm User Update",message:nt==="create"?n.jsxs("span",{children:["Create user ",n.jsx("span",{className:"font-semibold",children:Ze})," with role"," ",n.jsx("span",{className:"font-semibold",children:Ak(ee)}),"?"]}):n.jsxs("span",{children:["Save changes for"," ",n.jsx("span",{className:"font-semibold",children:Ze||it}),"?"]}),confirmLabel:nt==="create"?"Create User":"Update User",cancelLabel:"Cancel",variant:"primary",action:{type:nt,payload:Ue,targetId:b,name:Ze||it}})},B=async()=>{if(!A?.action){T(null);return}const{action:ae}=A,{type:He,payload:Re,targetId:it,name:mt}=ae;I(!0),(He==="create"||He==="update")&&k(!0);try{if(He==="create"){const pe=(await ie.post("/users/createuser",Re)).data;await he(),re(pe.id),q.success(`User "${mt}" created successfully.`),x(!1),S(Cg),C(null),N(!1)}else if(He==="update"){if(!it)throw new Error("Missing user identifier for update.");const pe=(await ie.put(`/users/updateuser/${it}`,Re)).data;await he(),f(null),re(pe.id),q.success(`User "${mt}" updated successfully.`),x(!1),S(Cg),C(null),N(!1)}else if(He==="delete"){if(!it)throw new Error("Missing user identifier for deletion.");await ie.delete(`/users/deleteuser/${it}`),s(ee=>ee.map(pe=>pe.id===it?{...pe,is_active:!1}:pe)),u&&u.id===it&&(f(null),Q("")),q.success(`User "${mt}" deactivated successfully.`)}}catch(ee){console.error("User management error:",ee);const pe=He==="create"?"Failed to create user. Please review the details and try again.":He==="update"?"Failed to update user. Please review the details and try again.":"Failed to delete user. Please try again.",Ue=ee.response?.data?.detail||pe;q.error(Ue)}finally{(He==="create"||He==="update")&&k(!1),I(!1),T(null)}},xe=()=>{_||T(null)},_e=async()=>{if(!u||!z)return;const ae=u.is_active?"Active":"Inactive";if(z===ae)return;const He=z==="Active";Y(!0);try{const it=(await ie.put(`/users/updateuser/${u.id}`,{is_active:He})).data;s(mt=>mt.map(ee=>ee.id===it.id?it:ee)),f(null),Q(""),q.success(`User status updated to ${z}`)}catch(Re){console.error("Failed to update user status:",Re);const it=Re.response?.data?.detail||"Failed to update user status. Please try again.";q.error(it)}finally{Y(!1)}},ce=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[(r||t||!F)&&n.jsx(zt,{}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Mw,{className:"mr-2 text-blue-600"}),"User Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:ke,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(Gn,{className:"mr-2"})," Add User"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Ht,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search users",value:o,onChange:ae=>l(ae.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:c,onChange:ae=>d(ae.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:Ne.map(ae=>n.jsx("option",{value:ae.value,children:ae.label},ae.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Fullname"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Role"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:3,children:"Loading users..."})}):je.length===0?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-400",colSpan:4,children:"No users found."})}):Me.map(ae=>n.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${ae.highlight?"bg-green-50":""} ${ae.is_active?"":"opacity-60 bg-gray-50"}`,children:[n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>fe(ae),children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline text-sm",children:[ae.first_name," ",ae.last_name]})}),n.jsx("td",{className:"py-3 px-4 cursor-pointer text-sm",onClick:()=>fe(ae),children:ae.email}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>fe(ae),children:sT(ae.role)}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>fe(ae),children:n.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-md ${ae.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:ae.is_active?"Active":"Inactive"})})]},ae.id))})]})}),n.jsx(tn,{className:"mt-4",totalItems:je.length,pageSize:D,currentPage:R,onPrev:ve,onNext:Be,onPageSizeChange:M,label:"users"})]}),Ee=u?n.jsx("div",{id:"userModalBackdrop",onClick:ne,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in p-4 sm:p-6 md:p-8 font-inter relative",children:[n.jsx("div",{className:"flex justify-end w-full",children:n.jsx("button",{onClick:Ae,className:"text-gray-500 hover:text-gray-700 transition mb-5 cursor-pointer",children:n.jsx(Wn,{size:30})})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7 mb-4 lg:mb-6 md:mb-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[u.profile_picture?n.jsx("img",{src:u.profile_picture,alt:`${u.first_name} ${u.last_name}`,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover border border-gray-200 shadow-sm"}):n.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-200 text-gray-700 flex items-center justify-center text-lg sm:text-xl font-semibold border border-gray-200 shadow-sm",children:hqe(u.first_name,u.last_name)}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[u.first_name," ",u.last_name]}),n.jsx("p",{className:"text-sm text-gray-500 break-all",children:u.email})]})]}),sT(u.role,{size:"md"})]}),!["CEO","ADMIN","GROUP MANAGER","GROUP_MANAGER"].includes(u.role.toUpperCase())&&n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Te(u),disabled:_,children:[n.jsx(la,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>Fe(u),disabled:_,children:[n.jsx(Ut,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 mb-6"}),n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview"].map(ae=>n.jsx("button",{onClick:()=>X(ae),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${W===ae?"bg-[#5c636d] text-white border-white":"text-white hover:bg-[#5c636d]"}`,children:ae},ae))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsx("div",{className:"lg:col-span-3",children:W==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:u.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Role:"}),n.jsx("p",{children:sT(u.role,{size:"sm"})})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:u.is_active?"Active":"Inactive"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Auth Provider:"}),n.jsx("p",{children:u.auth_provider?u.auth_provider.toString().replace(/\b\w/g,ae=>ae.toUpperCase()):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:u.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:u.company?.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company Number:"}),n.jsx("p",{children:u.company?.company_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Related to CEO:"}),n.jsx("p",{children:u.manager?`${u.manager.first_name} ${u.manager.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:zB(u.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Login:"}),n.jsx("p",{children:u.last_login?zB(u.last_login):"Never"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Profile Picture:"}),n.jsx("p",{children:u.profile_picture?n.jsx("a",{href:u.profile_picture,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline break-all",children:"View image"}):"N/A"})]})]})})}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsx("div",{className:"flex flex-col gap-2 w-full",children:n.jsxs("button",{type:"button",onClick:()=>{if(!u.email){alert("No email address available");return}const ae=encodeURIComponent(u.email),He=encodeURIComponent(""),Re=encodeURIComponent(""),it=`https://mail.google.com/mail/?view=cm&fs=1&to=${ae}&su=${He}&body=${Re}`;window.open(it,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Xn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]})})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:z||(u.is_active?"Active":"Inactive"),onChange:ae=>Q(ae.target.value),children:[n.jsx("option",{value:"Active",children:"Active"}),n.jsx("option",{value:"Inactive",children:"Inactive"})]}),n.jsx("button",{onClick:_e,disabled:de||z===(u.is_active?"Active":"Inactive"),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${de||z===(u.is_active?"Active":"Inactive")?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:de?"Updating...":"Update"})]})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[ce,Ee,n.jsx(pqe,{open:p,isEditing:v,isSubmitting:E,confirmProcessing:_,formData:w,onClose:Ve,onSubmit:Ye,onChange:ye,onGeneratePassword:Ie}),n.jsx(xqe,{open:!!A,title:A?.title,message:A?.message,confirmLabel:A?.confirmLabel,cancelLabel:A?.cancelLabel,variant:A?.variant,loading:_,onConfirm:B,onCancel:xe})]})}function pqe({open:e,isEditing:t,isSubmitting:a,confirmProcessing:s,formData:r,onClose:i,onSubmit:o,onChange:l,onGeneratePassword:c}){if(!e)return null;const d=a||s;return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-lg border border-gray-200 p-6 sm:p-8 relative overflow-y-auto max-h-[90vh]",children:[n.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:d,children:n.jsx(Vt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-6 text-center",children:t?"Edit User":"Add New User"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:o,children:[n.jsx(_b,{label:"First Name",value:r.firstName,onChange:u=>l("firstName",u),placeholder:"John",required:!0,disabled:d}),n.jsx(_b,{label:"Last Name",value:r.lastName,onChange:u=>l("lastName",u),placeholder:"Doe",required:!0,disabled:d}),n.jsx(_b,{label:"Email",type:"email",value:r.email,onChange:u=>l("email",u),placeholder:"john.doe@company.com",required:!0,disabled:d||t}),n.jsx(_b,{label:"Role",type:"select",value:r.role,onChange:u=>l("role",u),options:[{value:"",label:"Select role"},...Xj],required:!0,disabled:d}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Password"}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[n.jsx("input",{type:"text",value:r.password,onChange:u=>l("password",u.target.value),placeholder:t?"Leave blank to keep current password":"Enter or generate password",required:!t,disabled:d,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"}),n.jsx("button",{type:"button",onClick:c,className:"flex items-center justify-center px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-60",disabled:d,children:"Generate"})]}),t?n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Setting a password will reset the user's credentials; leave it blank to keep the current password."}):n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long."})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:i,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:d,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:d,children:a?"Saving...":t?"Update User":"Save User"})]})]})]})})}function _b({label:e,type:t="text",value:a,onChange:s,placeholder:r,options:i=[],required:o=!1,disabled:l=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t==="select"?n.jsx("select",{value:a??"",onChange:c=>s(c.target.value),required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100",children:i.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))}):n.jsx("input",{type:t,value:a??"",onChange:c=>s(c.target.value),placeholder:r,required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"})]})}function xqe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-black hover:bg-gray-800 border border-black";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("div",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function yqe(){return n.jsxs(Rae,{children:[n.jsx(Ase,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"colored",className:"z-[9999]"}),n.jsxs(fae,{children:[n.jsx(xt,{path:"/",element:n.jsx(Tie,{})}),n.jsx(xt,{path:"/header",element:n.jsx(BH,{})}),n.jsx(xt,{path:"/signup",element:n.jsx(Ade,{})}),n.jsx(xt,{path:"/login",element:n.jsx(Ede,{})}),n.jsx(xt,{path:"/forgot-password",element:n.jsx(Pde,{})}),n.jsxs(xt,{path:"/admin",element:n.jsx(Zh,{requiredRole:"ceo",children:n.jsx(Mde,{})}),children:[n.jsx(xt,{index:!0,element:n.jsx(ti,{to:"dashboard",replace:!0})}),n.jsx(xt,{path:"dashboard",element:n.jsx(v1e,{})}),n.jsx(xt,{path:"accounts",element:n.jsx(z1e,{})}),n.jsx(xt,{path:"contacts",element:n.jsx(H1e,{})}),n.jsx(xt,{path:"leads",element:n.jsx(K1e,{})}),n.jsx(xt,{path:"leads/:leadID",element:n.jsx(DV,{})}),n.jsx(xt,{path:"audit",element:n.jsx(FCe,{})}),n.jsx(xt,{path:"targets",element:n.jsx(GIe,{})}),n.jsx(xt,{path:"quotes",element:n.jsx(XIe,{})}),n.jsx(xt,{path:"users",element:n.jsx(r$e,{})}),n.jsx(xt,{path:"manage-account",element:n.jsx(c$e,{})}),n.jsx(xt,{path:"company-details",element:n.jsx(HRe,{})}),n.jsx(xt,{path:"deals",element:n.jsx(d$e,{})}),n.jsx(xt,{path:"deals/info",element:n.jsx(qX,{})}),n.jsx(xt,{path:"deals/quickaction",element:n.jsx(WX,{})}),n.jsx(xt,{path:"tasks",element:n.jsx(NRe,{})}),n.jsxs(xt,{path:"/admin/territory",children:[n.jsx(xt,{index:!0,element:n.jsx(Ec,{})}),n.jsx(xt,{path:":id",element:n.jsx(Ec,{})})]}),n.jsx(xt,{path:"calls",element:n.jsx(E7,{})}),n.jsx(xt,{path:"calls/info",element:n.jsx(E7,{})}),n.jsx(xt,{path:"meetings",element:n.jsx(k7,{})}),n.jsx(xt,{path:"meetings/info",element:n.jsx(k7,{})})]}),n.jsxs(xt,{path:"/sales",element:n.jsx(Zh,{requiredRole:"sales",children:n.jsx(WRe,{})}),children:[n.jsx(xt,{index:!0,element:n.jsx(ti,{to:"overview",replace:!0})}),n.jsx(xt,{path:"overview",element:n.jsx(vze,{})}),n.jsx(xt,{path:"accounts",element:n.jsx(jze,{})}),n.jsx(xt,{path:"contacts",element:n.jsx(Aze,{})}),n.jsx(xt,{path:"leads",element:n.jsx(Oze,{})}),n.jsx(xt,{path:"leads/info",element:n.jsx(kZ,{})}),n.jsx(xt,{path:"leads/convert",element:n.jsx(Fze,{})}),n.jsx(xt,{path:"deals",element:n.jsx(Bze,{})}),n.jsx(xt,{path:"deals/info",element:n.jsx(PZ,{})}),n.jsx(xt,{path:"deals/quickaction",element:n.jsx(LZ,{})}),n.jsx(xt,{path:"quotes",element:n.jsx(eUe,{})}),n.jsx(xt,{path:"targets",element:n.jsx(rUe,{})}),n.jsx(xt,{path:"audit",element:n.jsx(iUe,{})}),n.jsx(xt,{path:"manage-account",element:n.jsx(Sy,{})}),n.jsxs(xt,{path:"/sales/territory",children:[n.jsx(xt,{index:!0,element:n.jsx(Ec,{})}),n.jsx(xt,{path:":id",element:n.jsx(Ec,{})})]}),n.jsx(xt,{path:"meetings",element:n.jsx(pUe,{})}),n.jsx(xt,{path:"calls",element:n.jsx(vUe,{})}),n.jsx(xt,{path:"tasks",element:n.jsx(dUe,{})})]}),n.jsxs(xt,{path:"/manager",element:n.jsx(Zh,{requiredRole:"manager",children:n.jsx(_Ue,{})}),children:[n.jsx(xt,{index:!0,element:n.jsx(ti,{to:"dashboard",replace:!0})}),n.jsx(xt,{path:"dashboard",element:n.jsx(tFe,{})}),n.jsx(xt,{path:"accounts",element:n.jsx(sFe,{})}),n.jsx(xt,{path:"contacts",element:n.jsx(lFe,{})}),n.jsx(xt,{path:"leads",element:n.jsx(gFe,{})}),n.jsx(xt,{path:"leads/info",element:n.jsx(FZ,{})}),n.jsx(xt,{path:"leads/convert",element:n.jsx(NFe,{})}),n.jsx(xt,{path:"deals",element:n.jsx(jFe,{})}),n.jsx(xt,{path:"deals/info",element:n.jsx(HZ,{})}),n.jsx(xt,{path:"deals/quickaction",element:n.jsx(BZ,{})}),n.jsx(xt,{path:"quotes",element:n.jsx(MFe,{})}),n.jsx(xt,{path:"targets",element:n.jsx(UFe,{})}),n.jsx(xt,{path:"meetings",element:n.jsx(s7e,{})}),n.jsx(xt,{path:"audit",element:n.jsx(FFe,{})}),n.jsx(xt,{path:"calls",element:n.jsx(GFe,{})}),n.jsx(xt,{path:"tasks",element:n.jsx(ZFe,{})}),n.jsxs(xt,{path:"/manager/territory",children:[n.jsx(xt,{index:!0,element:n.jsx(Ec,{})}),n.jsx(xt,{path:":id",element:n.jsx(Ec,{})})]}),n.jsx(xt,{path:"users",element:n.jsx(c7e,{})}),n.jsx(xt,{path:"manage-account",element:n.jsx(Sy,{})})]}),n.jsx(xt,{children:n.jsxs(xt,{path:"/marketing",element:n.jsx(Zh,{requiredRole:"marketing",children:n.jsx(f7e,{})}),children:[n.jsx(xt,{index:!0,element:n.jsx(ti,{to:"dashboard",replace:!0})}),n.jsx(xt,{path:"dashboard",element:n.jsx(uGe,{})}),n.jsx(xt,{path:"accounts",element:n.jsx(mGe,{})}),n.jsx(xt,{path:"contacts",element:n.jsx(hGe,{})}),n.jsx(xt,{path:"leads",element:n.jsx(vGe,{})}),n.jsx(xt,{path:"leads/info",element:n.jsx(RJ,{})}),n.jsx(xt,{path:"leads/convert",element:n.jsx($J,{})}),n.jsx(xt,{path:"tasks",element:n.jsx(CGe,{})}),n.jsx(xt,{path:"campaigns",element:n.jsx(AGe,{})}),n.jsx(xt,{path:"templates",element:n.jsx(EGe,{})}),n.jsx(xt,{path:"manage-account",element:n.jsx(Sy,{})})]})}),n.jsxs(xt,{path:"/group-manager",element:n.jsx(Zh,{requiredRole:"group manager",children:n.jsx(LGe,{})}),children:[n.jsx(xt,{index:!0,element:n.jsx(ti,{to:"dashboard",replace:!0})}),n.jsx(xt,{path:"dashboard",element:n.jsx(iWe,{})}),n.jsx(xt,{path:"accounts",element:n.jsx(cWe,{})}),n.jsx(xt,{path:"contacts",element:n.jsx(fWe,{})}),n.jsx(xt,{path:"leads",element:n.jsx(vWe,{})}),n.jsx(xt,{path:"leads/info",element:n.jsx(WJ,{})}),n.jsx(xt,{path:"leads/convert",element:n.jsx(AWe,{})}),n.jsx(xt,{path:"deals",element:n.jsx(EWe,{})}),n.jsx(xt,{path:"deals/info",element:n.jsx(VJ,{})}),n.jsx(xt,{path:"deals/quickaction",element:n.jsx(qJ,{})}),n.jsx(xt,{path:"quotes",element:n.jsx(FWe,{})}),n.jsx(xt,{path:"targets",element:n.jsx(qWe,{})}),n.jsx(xt,{path:"tasks",element:n.jsx(KWe,{})}),n.jsxs(xt,{path:"/group-manager/territory",children:[n.jsx(xt,{index:!0,element:n.jsx(Ec,{})}),n.jsx(xt,{path:":id",element:n.jsx(Ec,{})})]}),n.jsx(xt,{path:"meetings",element:n.jsx(nqe,{})}),n.jsx(xt,{path:"calls",element:n.jsx(iqe,{})}),n.jsx(xt,{path:"audit",element:n.jsx(uqe,{})}),n.jsx(xt,{path:"users",element:n.jsx(gqe,{})}),n.jsx(xt,{path:"manage-account",element:n.jsx(Sy,{})})]})]})]})}hne.createRoot(document.getElementById("root")).render(n.jsx(h.StrictMode,{children:n.jsx(yqe,{})}));
