function lee(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in e)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function Oi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var AC={exports:{}},Mh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L5;function oee(){if(L5)return Mh;L5=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,r,i){var l=null;if(i!==void 0&&(l=""+i),r.key!==void 0&&(l=""+r.key),"key"in r){i={};for(var o in r)o!=="key"&&(i[o]=r[o])}else i=r;return r=i.ref,{$$typeof:e,type:s,key:l,ref:r!==void 0?r:null,props:i}}return Mh.Fragment=t,Mh.jsx=n,Mh.jsxs=n,Mh}var P5;function cee(){return P5||(P5=1,AC.exports=oee()),AC.exports}var a=cee(),EC={exports:{}},qt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D5;function dee(){if(D5)return qt;D5=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),l=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),p=Symbol.iterator;function x(Z){return Z===null||typeof Z!="object"?null:(Z=p&&Z[p]||Z["@@iterator"],typeof Z=="function"?Z:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,b={};function C(Z,R,ve){this.props=Z,this.context=R,this.refs=b,this.updater=ve||v}C.prototype.isReactComponent={},C.prototype.setState=function(Z,R){if(typeof Z!="object"&&typeof Z!="function"&&Z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Z,R,"setState")},C.prototype.forceUpdate=function(Z){this.updater.enqueueForceUpdate(this,Z,"forceUpdate")};function N(){}N.prototype=C.prototype;function S(Z,R,ve){this.props=Z,this.context=R,this.refs=b,this.updater=ve||v}var A=S.prototype=new N;A.constructor=S,w(A,C.prototype),A.isPureReactComponent=!0;var k=Array.isArray;function _(){}var T={H:null,A:null,T:null,S:null},E=Object.prototype.hasOwnProperty;function I(Z,R,ve){var X=ve.ref;return{$$typeof:e,type:Z,key:R,ref:X!==void 0?X:null,props:ve}}function z(Z,R){return I(Z.type,R,Z.props)}function $(Z){return typeof Z=="object"&&Z!==null&&Z.$$typeof===e}function P(Z){var R={"=":"=0",":":"=2"};return"$"+Z.replace(/[=:]/g,function(ve){return R[ve]})}var O=/\/+/g;function B(Z,R){return typeof Z=="object"&&Z!==null&&Z.key!=null?P(""+Z.key):R.toString(36)}function Q(Z){switch(Z.status){case"fulfilled":return Z.value;case"rejected":throw Z.reason;default:switch(typeof Z.status=="string"?Z.then(_,_):(Z.status="pending",Z.then(function(R){Z.status==="pending"&&(Z.status="fulfilled",Z.value=R)},function(R){Z.status==="pending"&&(Z.status="rejected",Z.reason=R)})),Z.status){case"fulfilled":return Z.value;case"rejected":throw Z.reason}}throw Z}function F(Z,R,ve,X,je){var Ne=typeof Z;(Ne==="undefined"||Ne==="boolean")&&(Z=null);var Oe=!1;if(Z===null)Oe=!0;else switch(Ne){case"bigint":case"string":case"number":Oe=!0;break;case"object":switch(Z.$$typeof){case e:case t:Oe=!0;break;case u:return Oe=Z._init,F(Oe(Z._payload),R,ve,X,je)}}if(Oe)return je=je(Z),Oe=X===""?"."+B(Z,0):X,k(je)?(ve="",Oe!=null&&(ve=Oe.replace(O,"$&/")+"/"),F(je,R,ve,"",function(Be){return Be})):je!=null&&($(je)&&(je=z(je,ve+(je.key==null||Z&&Z.key===je.key?"":(""+je.key).replace(O,"$&/")+"/")+Oe)),R.push(je)),1;Oe=0;var Fe=X===""?".":X+":";if(k(Z))for(var me=0;me<Z.length;me++)X=Z[me],Ne=Fe+B(X,me),Oe+=F(X,R,ve,Ne,je);else if(me=x(Z),typeof me=="function")for(Z=me.call(Z),me=0;!(X=Z.next()).done;)X=X.value,Ne=Fe+B(X,me++),Oe+=F(X,R,ve,Ne,je);else if(Ne==="object"){if(typeof Z.then=="function")return F(Q(Z),R,ve,X,je);throw R=String(Z),Error("Objects are not valid as a React child (found: "+(R==="[object Object]"?"object with keys {"+Object.keys(Z).join(", ")+"}":R)+"). If you meant to render a collection of children, use an array instead.")}return Oe}function ee(Z,R,ve){if(Z==null)return Z;var X=[],je=0;return F(Z,X,"","",function(Ne){return R.call(ve,Ne,je++)}),X}function V(Z){if(Z._status===-1){var R=Z._result;R=R(),R.then(function(ve){(Z._status===0||Z._status===-1)&&(Z._status=1,Z._result=ve)},function(ve){(Z._status===0||Z._status===-1)&&(Z._status=2,Z._result=ve)}),Z._status===-1&&(Z._status=0,Z._result=R)}if(Z._status===1)return Z._result.default;throw Z._result}var de=typeof reportError=="function"?reportError:function(Z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var R=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Z=="object"&&Z!==null&&typeof Z.message=="string"?String(Z.message):String(Z),error:Z});if(!window.dispatchEvent(R))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Z);return}console.error(Z)},oe={map:ee,forEach:function(Z,R,ve){ee(Z,function(){R.apply(this,arguments)},ve)},count:function(Z){var R=0;return ee(Z,function(){R++}),R},toArray:function(Z){return ee(Z,function(R){return R})||[]},only:function(Z){if(!$(Z))throw Error("React.Children.only expected to receive a single React element child.");return Z}};return qt.Activity=f,qt.Children=oe,qt.Component=C,qt.Fragment=n,qt.Profiler=r,qt.PureComponent=S,qt.StrictMode=s,qt.Suspense=c,qt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,qt.__COMPILER_RUNTIME={__proto__:null,c:function(Z){return T.H.useMemoCache(Z)}},qt.cache=function(Z){return function(){return Z.apply(null,arguments)}},qt.cacheSignal=function(){return null},qt.cloneElement=function(Z,R,ve){if(Z==null)throw Error("The argument must be a React element, but you passed "+Z+".");var X=w({},Z.props),je=Z.key;if(R!=null)for(Ne in R.key!==void 0&&(je=""+R.key),R)!E.call(R,Ne)||Ne==="key"||Ne==="__self"||Ne==="__source"||Ne==="ref"&&R.ref===void 0||(X[Ne]=R[Ne]);var Ne=arguments.length-2;if(Ne===1)X.children=ve;else if(1<Ne){for(var Oe=Array(Ne),Fe=0;Fe<Ne;Fe++)Oe[Fe]=arguments[Fe+2];X.children=Oe}return I(Z.type,je,X)},qt.createContext=function(Z){return Z={$$typeof:l,_currentValue:Z,_currentValue2:Z,_threadCount:0,Provider:null,Consumer:null},Z.Provider=Z,Z.Consumer={$$typeof:i,_context:Z},Z},qt.createElement=function(Z,R,ve){var X,je={},Ne=null;if(R!=null)for(X in R.key!==void 0&&(Ne=""+R.key),R)E.call(R,X)&&X!=="key"&&X!=="__self"&&X!=="__source"&&(je[X]=R[X]);var Oe=arguments.length-2;if(Oe===1)je.children=ve;else if(1<Oe){for(var Fe=Array(Oe),me=0;me<Oe;me++)Fe[me]=arguments[me+2];je.children=Fe}if(Z&&Z.defaultProps)for(X in Oe=Z.defaultProps,Oe)je[X]===void 0&&(je[X]=Oe[X]);return I(Z,Ne,je)},qt.createRef=function(){return{current:null}},qt.forwardRef=function(Z){return{$$typeof:o,render:Z}},qt.isValidElement=$,qt.lazy=function(Z){return{$$typeof:u,_payload:{_status:-1,_result:Z},_init:V}},qt.memo=function(Z,R){return{$$typeof:d,type:Z,compare:R===void 0?null:R}},qt.startTransition=function(Z){var R=T.T,ve={};T.T=ve;try{var X=Z(),je=T.S;je!==null&&je(ve,X),typeof X=="object"&&X!==null&&typeof X.then=="function"&&X.then(_,de)}catch(Ne){de(Ne)}finally{R!==null&&ve.types!==null&&(R.types=ve.types),T.T=R}},qt.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},qt.use=function(Z){return T.H.use(Z)},qt.useActionState=function(Z,R,ve){return T.H.useActionState(Z,R,ve)},qt.useCallback=function(Z,R){return T.H.useCallback(Z,R)},qt.useContext=function(Z){return T.H.useContext(Z)},qt.useDebugValue=function(){},qt.useDeferredValue=function(Z,R){return T.H.useDeferredValue(Z,R)},qt.useEffect=function(Z,R){return T.H.useEffect(Z,R)},qt.useEffectEvent=function(Z){return T.H.useEffectEvent(Z)},qt.useId=function(){return T.H.useId()},qt.useImperativeHandle=function(Z,R,ve){return T.H.useImperativeHandle(Z,R,ve)},qt.useInsertionEffect=function(Z,R){return T.H.useInsertionEffect(Z,R)},qt.useLayoutEffect=function(Z,R){return T.H.useLayoutEffect(Z,R)},qt.useMemo=function(Z,R){return T.H.useMemo(Z,R)},qt.useOptimistic=function(Z,R){return T.H.useOptimistic(Z,R)},qt.useReducer=function(Z,R,ve){return T.H.useReducer(Z,R,ve)},qt.useRef=function(Z){return T.H.useRef(Z)},qt.useState=function(Z){return T.H.useState(Z)},qt.useSyncExternalStore=function(Z,R,ve){return T.H.useSyncExternalStore(Z,R,ve)},qt.useTransition=function(){return T.H.useTransition()},qt.version="19.2.0",qt}var O5;function wf(){return O5||(O5=1,EC.exports=dee()),EC.exports}var h=wf();const wt=Oi(h),tu=lee({__proto__:null,default:wt},[h]);var TC={exports:{}},Ih={},kC={exports:{}},LC={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M5;function uee(){return M5||(M5=1,(function(e){function t(F,ee){var V=F.length;F.push(ee);e:for(;0<V;){var de=V-1>>>1,oe=F[de];if(0<r(oe,ee))F[de]=ee,F[V]=oe,V=de;else break e}}function n(F){return F.length===0?null:F[0]}function s(F){if(F.length===0)return null;var ee=F[0],V=F.pop();if(V!==ee){F[0]=V;e:for(var de=0,oe=F.length,Z=oe>>>1;de<Z;){var R=2*(de+1)-1,ve=F[R],X=R+1,je=F[X];if(0>r(ve,V))X<oe&&0>r(je,ve)?(F[de]=je,F[X]=V,de=X):(F[de]=ve,F[R]=V,de=R);else if(X<oe&&0>r(je,V))F[de]=je,F[X]=V,de=X;else break e}}return ee}function r(F,ee){var V=F.sortIndex-ee.sortIndex;return V!==0?V:F.id-ee.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,f=null,p=3,x=!1,v=!1,w=!1,b=!1,C=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function A(F){for(var ee=n(d);ee!==null;){if(ee.callback===null)s(d);else if(ee.startTime<=F)s(d),ee.sortIndex=ee.expirationTime,t(c,ee);else break;ee=n(d)}}function k(F){if(w=!1,A(F),!v)if(n(c)!==null)v=!0,_||(_=!0,P());else{var ee=n(d);ee!==null&&Q(k,ee.startTime-F)}}var _=!1,T=-1,E=5,I=-1;function z(){return b?!0:!(e.unstable_now()-I<E)}function $(){if(b=!1,_){var F=e.unstable_now();I=F;var ee=!0;try{e:{v=!1,w&&(w=!1,N(T),T=-1),x=!0;var V=p;try{t:{for(A(F),f=n(c);f!==null&&!(f.expirationTime>F&&z());){var de=f.callback;if(typeof de=="function"){f.callback=null,p=f.priorityLevel;var oe=de(f.expirationTime<=F);if(F=e.unstable_now(),typeof oe=="function"){f.callback=oe,A(F),ee=!0;break t}f===n(c)&&s(c),A(F)}else s(c);f=n(c)}if(f!==null)ee=!0;else{var Z=n(d);Z!==null&&Q(k,Z.startTime-F),ee=!1}}break e}finally{f=null,p=V,x=!1}ee=void 0}}finally{ee?P():_=!1}}}var P;if(typeof S=="function")P=function(){S($)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,B=O.port2;O.port1.onmessage=$,P=function(){B.postMessage(null)}}else P=function(){C($,0)};function Q(F,ee){T=C(function(){F(e.unstable_now())},ee)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(F){F.callback=null},e.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<F?Math.floor(1e3/F):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(F){switch(p){case 1:case 2:case 3:var ee=3;break;default:ee=p}var V=p;p=ee;try{return F()}finally{p=V}},e.unstable_requestPaint=function(){b=!0},e.unstable_runWithPriority=function(F,ee){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var V=p;p=F;try{return ee()}finally{p=V}},e.unstable_scheduleCallback=function(F,ee,V){var de=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?de+V:de):V=de,F){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=V+oe,F={id:u++,callback:ee,priorityLevel:F,startTime:V,expirationTime:oe,sortIndex:-1},V>de?(F.sortIndex=V,t(d,F),n(c)===null&&F===n(d)&&(w?(N(T),T=-1):w=!0,Q(k,V-de))):(F.sortIndex=oe,t(c,F),v||x||(v=!0,_||(_=!0,P()))),F},e.unstable_shouldYield=z,e.unstable_wrapCallback=function(F){var ee=p;return function(){var V=p;p=ee;try{return F.apply(this,arguments)}finally{p=V}}}})(LC)),LC}var I5;function mee(){return I5||(I5=1,kC.exports=uee()),kC.exports}var PC={exports:{}},bs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $5;function fee(){if($5)return bs;$5=1;var e=wf();function t(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)d+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function i(c,d,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:f==null?null:""+f,children:c,containerInfo:d,implementation:u}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(c,d){if(c==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return bs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,bs.createPortal=function(c,d){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return i(c,d,null,u)},bs.flushSync=function(c){var d=l.T,u=s.p;try{if(l.T=null,s.p=2,c)return c()}finally{l.T=d,s.p=u,s.d.f()}},bs.preconnect=function(c,d){typeof c=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,s.d.C(c,d))},bs.prefetchDNS=function(c){typeof c=="string"&&s.d.D(c)},bs.preinit=function(c,d){if(typeof c=="string"&&d&&typeof d.as=="string"){var u=d.as,f=o(u,d.crossOrigin),p=typeof d.integrity=="string"?d.integrity:void 0,x=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;u==="style"?s.d.S(c,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:f,integrity:p,fetchPriority:x}):u==="script"&&s.d.X(c,{crossOrigin:f,integrity:p,fetchPriority:x,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},bs.preinitModule=function(c,d){if(typeof c=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var u=o(d.as,d.crossOrigin);s.d.M(c,{crossOrigin:u,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&s.d.M(c)},bs.preload=function(c,d){if(typeof c=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var u=d.as,f=o(u,d.crossOrigin);s.d.L(c,u,{crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},bs.preloadModule=function(c,d){if(typeof c=="string")if(d){var u=o(d.as,d.crossOrigin);s.d.m(c,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:u,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else s.d.m(c)},bs.requestFormReset=function(c){s.d.r(c)},bs.unstable_batchedUpdates=function(c,d){return c(d)},bs.useFormState=function(c,d,u){return l.H.useFormState(c,d,u)},bs.useFormStatus=function(){return l.H.useHostTransitionStatus()},bs.version="19.2.0",bs}var R5;function _8(){if(R5)return PC.exports;R5=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),PC.exports=fee(),PC.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z5;function hee(){if(z5)return Ih;z5=1;var e=mee(),t=wf(),n=_8();function s(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)}function i(m){var g=m,y=m;if(m.alternate)for(;g.return;)g=g.return;else{m=g;do g=m,(g.flags&4098)!==0&&(y=g.return),m=g.return;while(m)}return g.tag===3?y:null}function l(m){if(m.tag===13){var g=m.memoizedState;if(g===null&&(m=m.alternate,m!==null&&(g=m.memoizedState)),g!==null)return g.dehydrated}return null}function o(m){if(m.tag===31){var g=m.memoizedState;if(g===null&&(m=m.alternate,m!==null&&(g=m.memoizedState)),g!==null)return g.dehydrated}return null}function c(m){if(i(m)!==m)throw Error(s(188))}function d(m){var g=m.alternate;if(!g){if(g=i(m),g===null)throw Error(s(188));return g!==m?null:m}for(var y=m,j=g;;){var L=y.return;if(L===null)break;var D=L.alternate;if(D===null){if(j=L.return,j!==null){y=j;continue}break}if(L.child===D.child){for(D=L.child;D;){if(D===y)return c(L),m;if(D===j)return c(L),g;D=D.sibling}throw Error(s(188))}if(y.return!==j.return)y=L,j=D;else{for(var q=!1,xe=L.child;xe;){if(xe===y){q=!0,y=L,j=D;break}if(xe===j){q=!0,j=L,y=D;break}xe=xe.sibling}if(!q){for(xe=D.child;xe;){if(xe===y){q=!0,y=D,j=L;break}if(xe===j){q=!0,j=D,y=L;break}xe=xe.sibling}if(!q)throw Error(s(189))}}if(y.alternate!==j)throw Error(s(190))}if(y.tag!==3)throw Error(s(188));return y.stateNode.current===y?m:g}function u(m){var g=m.tag;if(g===5||g===26||g===27||g===6)return m;for(m=m.child;m!==null;){if(g=u(m),g!==null)return g;m=m.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),S=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),$=Symbol.iterator;function P(m){return m===null||typeof m!="object"?null:(m=$&&m[$]||m["@@iterator"],typeof m=="function"?m:null)}var O=Symbol.for("react.client.reference");function B(m){if(m==null)return null;if(typeof m=="function")return m.$$typeof===O?null:m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case w:return"Fragment";case C:return"Profiler";case b:return"StrictMode";case k:return"Suspense";case _:return"SuspenseList";case I:return"Activity"}if(typeof m=="object")switch(m.$$typeof){case v:return"Portal";case S:return m.displayName||"Context";case N:return(m._context.displayName||"Context")+".Consumer";case A:var g=m.render;return m=m.displayName,m||(m=g.displayName||g.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case T:return g=m.displayName||null,g!==null?g:B(m.type)||"Memo";case E:g=m._payload,m=m._init;try{return B(m(g))}catch{}}return null}var Q=Array.isArray,F=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},de=[],oe=-1;function Z(m){return{current:m}}function R(m){0>oe||(m.current=de[oe],de[oe]=null,oe--)}function ve(m,g){oe++,de[oe]=m.current,m.current=g}var X=Z(null),je=Z(null),Ne=Z(null),Oe=Z(null);function Fe(m,g){switch(ve(Ne,g),ve(je,m),ve(X,null),g.nodeType){case 9:case 11:m=(m=g.documentElement)&&(m=m.namespaceURI)?e5(m):0;break;default:if(m=g.tagName,g=g.namespaceURI)g=e5(g),m=t5(g,m);else switch(m){case"svg":m=1;break;case"math":m=2;break;default:m=0}}R(X),ve(X,m)}function me(){R(X),R(je),R(Ne)}function Be(m){m.memoizedState!==null&&ve(Oe,m);var g=X.current,y=t5(g,m.type);g!==y&&(ve(je,m),ve(X,y))}function Pe(m){je.current===m&&(R(X),R(je)),Oe.current===m&&(R(Oe),Lh._currentValue=V)}var we,ne;function Le(m){if(we===void 0)try{throw Error()}catch(y){var g=y.stack.trim().match(/\n( *(at )?)/);we=g&&g[1]||"",ne=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+we+m+ne}var pe=!1;function le(m,g){if(!m||pe)return"";pe=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var j={DetermineComponentFrameRoot:function(){try{if(g){var xt=function(){throw Error()};if(Object.defineProperty(xt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(xt,[])}catch(ct){var rt=ct}Reflect.construct(m,[],xt)}else{try{xt.call()}catch(ct){rt=ct}m.call(xt.prototype)}}else{try{throw Error()}catch(ct){rt=ct}(xt=m())&&typeof xt.catch=="function"&&xt.catch(function(){})}}catch(ct){if(ct&&rt&&typeof ct.stack=="string")return[ct.stack,rt.stack]}return[null,null]}};j.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var L=Object.getOwnPropertyDescriptor(j.DetermineComponentFrameRoot,"name");L&&L.configurable&&Object.defineProperty(j.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var D=j.DetermineComponentFrameRoot(),q=D[0],xe=D[1];if(q&&xe){var Re=q.split(`
`),nt=xe.split(`
`);for(L=j=0;j<Re.length&&!Re[j].includes("DetermineComponentFrameRoot");)j++;for(;L<nt.length&&!nt[L].includes("DetermineComponentFrameRoot");)L++;if(j===Re.length||L===nt.length)for(j=Re.length-1,L=nt.length-1;1<=j&&0<=L&&Re[j]!==nt[L];)L--;for(;1<=j&&0<=L;j--,L--)if(Re[j]!==nt[L]){if(j!==1||L!==1)do if(j--,L--,0>L||Re[j]!==nt[L]){var ut=`
`+Re[j].replace(" at new "," at ");return m.displayName&&ut.includes("<anonymous>")&&(ut=ut.replace("<anonymous>",m.displayName)),ut}while(1<=j&&0<=L);break}}}finally{pe=!1,Error.prepareStackTrace=y}return(y=m?m.displayName||m.name:"")?Le(y):""}function ge(m,g){switch(m.tag){case 26:case 27:case 5:return Le(m.type);case 16:return Le("Lazy");case 13:return m.child!==g&&g!==null?Le("Suspense Fallback"):Le("Suspense");case 19:return Le("SuspenseList");case 0:case 15:return le(m.type,!1);case 11:return le(m.type.render,!1);case 1:return le(m.type,!0);case 31:return Le("Activity");default:return""}}function fe(m){try{var g="",y=null;do g+=ge(m,y),y=m,m=m.return;while(m);return g}catch(j){return`
Error generating stack: `+j.message+`
`+j.stack}}var Te=Object.prototype.hasOwnProperty,Ye=e.unstable_scheduleCallback,Ae=e.unstable_cancelCallback,Ie=e.unstable_shouldYield,Je=e.unstable_requestPaint,he=e.unstable_now,Me=e.unstable_getCurrentPriorityLevel,re=e.unstable_ImmediatePriority,Qe=e.unstable_UserBlockingPriority,We=e.unstable_NormalPriority,dt=e.unstable_LowPriority,ze=e.unstable_IdlePriority,ce=e.log,ye=e.unstable_setDisableYieldValue,Ue=null,et=null;function lt(m){if(typeof ce=="function"&&ye(m),et&&typeof et.setStrictMode=="function")try{et.setStrictMode(Ue,m)}catch{}}var Ee=Math.clz32?Math.clz32:Xe,tt=Math.log,be=Math.LN2;function Xe(m){return m>>>=0,m===0?32:31-(tt(m)/be|0)|0}var M=256,U=262144,Y=4194304;function te(m){var g=m&42;if(g!==0)return g;switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return m&261888;case 262144:case 524288:case 1048576:case 2097152:return m&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return m&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return m}}function K(m,g,y){var j=m.pendingLanes;if(j===0)return 0;var L=0,D=m.suspendedLanes,q=m.pingedLanes;m=m.warmLanes;var xe=j&134217727;return xe!==0?(j=xe&~D,j!==0?L=te(j):(q&=xe,q!==0?L=te(q):y||(y=xe&~m,y!==0&&(L=te(y))))):(xe=j&~D,xe!==0?L=te(xe):q!==0?L=te(q):y||(y=j&~m,y!==0&&(L=te(y)))),L===0?0:g!==0&&g!==L&&(g&D)===0&&(D=L&-L,y=g&-g,D>=y||D===32&&(y&4194048)!==0)?g:L}function Se(m,g){return(m.pendingLanes&~(m.suspendedLanes&~m.pingedLanes)&g)===0}function G(m,g){switch(m){case 1:case 2:case 4:case 8:case 64:return g+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function J(){var m=Y;return Y<<=1,(Y&62914560)===0&&(Y=4194304),m}function De(m){for(var g=[],y=0;31>y;y++)g.push(m);return g}function Ve(m,g){m.pendingLanes|=g,g!==268435456&&(m.suspendedLanes=0,m.pingedLanes=0,m.warmLanes=0)}function ft(m,g,y,j,L,D){var q=m.pendingLanes;m.pendingLanes=y,m.suspendedLanes=0,m.pingedLanes=0,m.warmLanes=0,m.expiredLanes&=y,m.entangledLanes&=y,m.errorRecoveryDisabledLanes&=y,m.shellSuspendCounter=0;var xe=m.entanglements,Re=m.expirationTimes,nt=m.hiddenUpdates;for(y=q&~y;0<y;){var ut=31-Ee(y),xt=1<<ut;xe[ut]=0,Re[ut]=-1;var rt=nt[ut];if(rt!==null)for(nt[ut]=null,ut=0;ut<rt.length;ut++){var ct=rt[ut];ct!==null&&(ct.lane&=-536870913)}y&=~xt}j!==0&&bt(m,j,0),D!==0&&L===0&&m.tag!==0&&(m.suspendedLanes|=D&~(q&~g))}function bt(m,g,y){m.pendingLanes|=g,m.suspendedLanes&=~g;var j=31-Ee(g);m.entangledLanes|=g,m.entanglements[j]=m.entanglements[j]|1073741824|y&261930}function jt(m,g){var y=m.entangledLanes|=g;for(m=m.entanglements;y;){var j=31-Ee(y),L=1<<j;L&g|m[j]&g&&(m[j]|=g),y&=~L}}function ke(m,g){var y=g&-g;return y=(y&42)!==0?1:pt(y),(y&(m.suspendedLanes|g))!==0?0:y}function pt(m){switch(m){case 2:m=1;break;case 8:m=4;break;case 32:m=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:m=128;break;case 268435456:m=134217728;break;default:m=0}return m}function _e(m){return m&=-m,2<m?8<m?(m&134217727)!==0?32:268435456:8:2}function W(){var m=ee.p;return m!==0?m:(m=window.event,m===void 0?32:C5(m.type))}function ae(m,g){var y=ee.p;try{return ee.p=m,g()}finally{ee.p=y}}var $e=Math.random().toString(36).slice(2),Ge="__reactFiber$"+$e,ue="__reactProps$"+$e,se="__reactContainer$"+$e,He="__reactEvents$"+$e,ht="__reactListeners$"+$e,Ce="__reactHandles$"+$e,it="__reactResources$"+$e,Ct="__reactMarker$"+$e;function kt(m){delete m[Ge],delete m[ue],delete m[He],delete m[ht],delete m[Ce]}function Ft(m){var g=m[Ge];if(g)return g;for(var y=m.parentNode;y;){if(g=y[se]||y[Ge]){if(y=g.alternate,g.child!==null||y!==null&&y.child!==null)for(m=o5(m);m!==null;){if(y=m[Ge])return y;m=o5(m)}return g}m=y,y=m.parentNode}return null}function ia(m){if(m=m[Ge]||m[se]){var g=m.tag;if(g===5||g===6||g===13||g===31||g===26||g===27||g===3)return m}return null}function Rn(m){var g=m.tag;if(g===5||g===26||g===27||g===6)return m.stateNode;throw Error(s(33))}function es(m){var g=m[it];return g||(g=m[it]={hoistableStyles:new Map,hoistableScripts:new Map}),g}function zn(m){m[Ct]=!0}var BP=new Set,HP={};function nd(m,g){Mu(m,g),Mu(m+"Capture",g)}function Mu(m,g){for(HP[m]=g,m=0;m<g.length;m++)BP.add(g[m])}var ZX=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),GP={},WP={};function JX(m){return Te.call(WP,m)?!0:Te.call(GP,m)?!1:ZX.test(m)?WP[m]=!0:(GP[m]=!0,!1)}function Ix(m,g,y){if(JX(g))if(y===null)m.removeAttribute(g);else{switch(typeof y){case"undefined":case"function":case"symbol":m.removeAttribute(g);return;case"boolean":var j=g.toLowerCase().slice(0,5);if(j!=="data-"&&j!=="aria-"){m.removeAttribute(g);return}}m.setAttribute(g,""+y)}}function $x(m,g,y){if(y===null)m.removeAttribute(g);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":m.removeAttribute(g);return}m.setAttribute(g,""+y)}}function _l(m,g,y,j){if(j===null)m.removeAttribute(y);else{switch(typeof j){case"undefined":case"function":case"symbol":case"boolean":m.removeAttribute(y);return}m.setAttributeNS(g,y,""+j)}}function Or(m){switch(typeof m){case"bigint":case"boolean":case"number":case"string":case"undefined":return m;case"object":return m;default:return""}}function VP(m){var g=m.type;return(m=m.nodeName)&&m.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function eZ(m,g,y){var j=Object.getOwnPropertyDescriptor(m.constructor.prototype,g);if(!m.hasOwnProperty(g)&&typeof j<"u"&&typeof j.get=="function"&&typeof j.set=="function"){var L=j.get,D=j.set;return Object.defineProperty(m,g,{configurable:!0,get:function(){return L.call(this)},set:function(q){y=""+q,D.call(this,q)}}),Object.defineProperty(m,g,{enumerable:j.enumerable}),{getValue:function(){return y},setValue:function(q){y=""+q},stopTracking:function(){m._valueTracker=null,delete m[g]}}}}function vj(m){if(!m._valueTracker){var g=VP(m)?"checked":"value";m._valueTracker=eZ(m,g,""+m[g])}}function qP(m){if(!m)return!1;var g=m._valueTracker;if(!g)return!0;var y=g.getValue(),j="";return m&&(j=VP(m)?m.checked?"true":"false":m.value),m=j,m!==y?(g.setValue(m),!0):!1}function Rx(m){if(m=m||(typeof document<"u"?document:void 0),typeof m>"u")return null;try{return m.activeElement||m.body}catch{return m.body}}var tZ=/[\n"\\]/g;function Mr(m){return m.replace(tZ,function(g){return"\\"+g.charCodeAt(0).toString(16)+" "})}function wj(m,g,y,j,L,D,q,xe){m.name="",q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?m.type=q:m.removeAttribute("type"),g!=null?q==="number"?(g===0&&m.value===""||m.value!=g)&&(m.value=""+Or(g)):m.value!==""+Or(g)&&(m.value=""+Or(g)):q!=="submit"&&q!=="reset"||m.removeAttribute("value"),g!=null?Nj(m,q,Or(g)):y!=null?Nj(m,q,Or(y)):j!=null&&m.removeAttribute("value"),L==null&&D!=null&&(m.defaultChecked=!!D),L!=null&&(m.checked=L&&typeof L!="function"&&typeof L!="symbol"),xe!=null&&typeof xe!="function"&&typeof xe!="symbol"&&typeof xe!="boolean"?m.name=""+Or(xe):m.removeAttribute("name")}function YP(m,g,y,j,L,D,q,xe){if(D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(m.type=D),g!=null||y!=null){if(!(D!=="submit"&&D!=="reset"||g!=null)){vj(m);return}y=y!=null?""+Or(y):"",g=g!=null?""+Or(g):y,xe||g===m.value||(m.value=g),m.defaultValue=g}j=j??L,j=typeof j!="function"&&typeof j!="symbol"&&!!j,m.checked=xe?m.checked:!!j,m.defaultChecked=!!j,q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"&&(m.name=q),vj(m)}function Nj(m,g,y){g==="number"&&Rx(m.ownerDocument)===m||m.defaultValue===""+y||(m.defaultValue=""+y)}function Iu(m,g,y,j){if(m=m.options,g){g={};for(var L=0;L<y.length;L++)g["$"+y[L]]=!0;for(y=0;y<m.length;y++)L=g.hasOwnProperty("$"+m[y].value),m[y].selected!==L&&(m[y].selected=L),L&&j&&(m[y].defaultSelected=!0)}else{for(y=""+Or(y),g=null,L=0;L<m.length;L++){if(m[L].value===y){m[L].selected=!0,j&&(m[L].defaultSelected=!0);return}g!==null||m[L].disabled||(g=m[L])}g!==null&&(g.selected=!0)}}function KP(m,g,y){if(g!=null&&(g=""+Or(g),g!==m.value&&(m.value=g),y==null)){m.defaultValue!==g&&(m.defaultValue=g);return}m.defaultValue=y!=null?""+Or(y):""}function QP(m,g,y,j){if(g==null){if(j!=null){if(y!=null)throw Error(s(92));if(Q(j)){if(1<j.length)throw Error(s(93));j=j[0]}y=j}y==null&&(y=""),g=y}y=Or(g),m.defaultValue=y,j=m.textContent,j===y&&j!==""&&j!==null&&(m.value=j),vj(m)}function $u(m,g){if(g){var y=m.firstChild;if(y&&y===m.lastChild&&y.nodeType===3){y.nodeValue=g;return}}m.textContent=g}var aZ=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function XP(m,g,y){var j=g.indexOf("--")===0;y==null||typeof y=="boolean"||y===""?j?m.setProperty(g,""):g==="float"?m.cssFloat="":m[g]="":j?m.setProperty(g,y):typeof y!="number"||y===0||aZ.has(g)?g==="float"?m.cssFloat=y:m[g]=(""+y).trim():m[g]=y+"px"}function ZP(m,g,y){if(g!=null&&typeof g!="object")throw Error(s(62));if(m=m.style,y!=null){for(var j in y)!y.hasOwnProperty(j)||g!=null&&g.hasOwnProperty(j)||(j.indexOf("--")===0?m.setProperty(j,""):j==="float"?m.cssFloat="":m[j]="");for(var L in g)j=g[L],g.hasOwnProperty(L)&&y[L]!==j&&XP(m,L,j)}else for(var D in g)g.hasOwnProperty(D)&&XP(m,D,g[D])}function jj(m){if(m.indexOf("-")===-1)return!1;switch(m){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nZ=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),sZ=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function zx(m){return sZ.test(""+m)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":m}function Al(){}var Cj=null;function Sj(m){return m=m.target||m.srcElement||window,m.correspondingUseElement&&(m=m.correspondingUseElement),m.nodeType===3?m.parentNode:m}var Ru=null,zu=null;function JP(m){var g=ia(m);if(g&&(m=g.stateNode)){var y=m[ue]||null;e:switch(m=g.stateNode,g.type){case"input":if(wj(m,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name),g=y.name,y.type==="radio"&&g!=null){for(y=m;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll('input[name="'+Mr(""+g)+'"][type="radio"]'),g=0;g<y.length;g++){var j=y[g];if(j!==m&&j.form===m.form){var L=j[ue]||null;if(!L)throw Error(s(90));wj(j,L.value,L.defaultValue,L.defaultValue,L.checked,L.defaultChecked,L.type,L.name)}}for(g=0;g<y.length;g++)j=y[g],j.form===m.form&&qP(j)}break e;case"textarea":KP(m,y.value,y.defaultValue);break e;case"select":g=y.value,g!=null&&Iu(m,!!y.multiple,g,!1)}}}var _j=!1;function eD(m,g,y){if(_j)return m(g,y);_j=!0;try{var j=m(g);return j}finally{if(_j=!1,(Ru!==null||zu!==null)&&(_0(),Ru&&(g=Ru,m=zu,zu=Ru=null,JP(g),m)))for(g=0;g<m.length;g++)JP(m[g])}}function Yf(m,g){var y=m.stateNode;if(y===null)return null;var j=y[ue]||null;if(j===null)return null;y=j[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(j=!j.disabled)||(m=m.type,j=!(m==="button"||m==="input"||m==="select"||m==="textarea")),m=!j;break e;default:m=!1}if(m)return null;if(y&&typeof y!="function")throw Error(s(231,g,typeof y));return y}var El=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Aj=!1;if(El)try{var Kf={};Object.defineProperty(Kf,"passive",{get:function(){Aj=!0}}),window.addEventListener("test",Kf,Kf),window.removeEventListener("test",Kf,Kf)}catch{Aj=!1}var Go=null,Ej=null,Ux=null;function tD(){if(Ux)return Ux;var m,g=Ej,y=g.length,j,L="value"in Go?Go.value:Go.textContent,D=L.length;for(m=0;m<y&&g[m]===L[m];m++);var q=y-m;for(j=1;j<=q&&g[y-j]===L[D-j];j++);return Ux=L.slice(m,1<j?1-j:void 0)}function Fx(m){var g=m.keyCode;return"charCode"in m?(m=m.charCode,m===0&&g===13&&(m=13)):m=g,m===10&&(m=13),32<=m||m===13?m:0}function Bx(){return!0}function aD(){return!1}function Bs(m){function g(y,j,L,D,q){this._reactName=y,this._targetInst=L,this.type=j,this.nativeEvent=D,this.target=q,this.currentTarget=null;for(var xe in m)m.hasOwnProperty(xe)&&(y=m[xe],this[xe]=y?y(D):D[xe]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?Bx:aD,this.isPropagationStopped=aD,this}return f(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=Bx)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=Bx)},persist:function(){},isPersistent:Bx}),g}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(m){return m.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hx=Bs(sd),Qf=f({},sd,{view:0,detail:0}),rZ=Bs(Qf),Tj,kj,Xf,Gx=f({},Qf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pj,button:0,buttons:0,relatedTarget:function(m){return m.relatedTarget===void 0?m.fromElement===m.srcElement?m.toElement:m.fromElement:m.relatedTarget},movementX:function(m){return"movementX"in m?m.movementX:(m!==Xf&&(Xf&&m.type==="mousemove"?(Tj=m.screenX-Xf.screenX,kj=m.screenY-Xf.screenY):kj=Tj=0,Xf=m),Tj)},movementY:function(m){return"movementY"in m?m.movementY:kj}}),nD=Bs(Gx),iZ=f({},Gx,{dataTransfer:0}),lZ=Bs(iZ),oZ=f({},Qf,{relatedTarget:0}),Lj=Bs(oZ),cZ=f({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),dZ=Bs(cZ),uZ=f({},sd,{clipboardData:function(m){return"clipboardData"in m?m.clipboardData:window.clipboardData}}),mZ=Bs(uZ),fZ=f({},sd,{data:0}),sD=Bs(fZ),hZ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gZ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pZ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xZ(m){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(m):(m=pZ[m])?!!g[m]:!1}function Pj(){return xZ}var yZ=f({},Qf,{key:function(m){if(m.key){var g=hZ[m.key]||m.key;if(g!=="Unidentified")return g}return m.type==="keypress"?(m=Fx(m),m===13?"Enter":String.fromCharCode(m)):m.type==="keydown"||m.type==="keyup"?gZ[m.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pj,charCode:function(m){return m.type==="keypress"?Fx(m):0},keyCode:function(m){return m.type==="keydown"||m.type==="keyup"?m.keyCode:0},which:function(m){return m.type==="keypress"?Fx(m):m.type==="keydown"||m.type==="keyup"?m.keyCode:0}}),bZ=Bs(yZ),vZ=f({},Gx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rD=Bs(vZ),wZ=f({},Qf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pj}),NZ=Bs(wZ),jZ=f({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),CZ=Bs(jZ),SZ=f({},Gx,{deltaX:function(m){return"deltaX"in m?m.deltaX:"wheelDeltaX"in m?-m.wheelDeltaX:0},deltaY:function(m){return"deltaY"in m?m.deltaY:"wheelDeltaY"in m?-m.wheelDeltaY:"wheelDelta"in m?-m.wheelDelta:0},deltaZ:0,deltaMode:0}),_Z=Bs(SZ),AZ=f({},sd,{newState:0,oldState:0}),EZ=Bs(AZ),TZ=[9,13,27,32],Dj=El&&"CompositionEvent"in window,Zf=null;El&&"documentMode"in document&&(Zf=document.documentMode);var kZ=El&&"TextEvent"in window&&!Zf,iD=El&&(!Dj||Zf&&8<Zf&&11>=Zf),lD=" ",oD=!1;function cD(m,g){switch(m){case"keyup":return TZ.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dD(m){return m=m.detail,typeof m=="object"&&"data"in m?m.data:null}var Uu=!1;function LZ(m,g){switch(m){case"compositionend":return dD(g);case"keypress":return g.which!==32?null:(oD=!0,lD);case"textInput":return m=g.data,m===lD&&oD?null:m;default:return null}}function PZ(m,g){if(Uu)return m==="compositionend"||!Dj&&cD(m,g)?(m=tD(),Ux=Ej=Go=null,Uu=!1,m):null;switch(m){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return iD&&g.locale!=="ko"?null:g.data;default:return null}}var DZ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uD(m){var g=m&&m.nodeName&&m.nodeName.toLowerCase();return g==="input"?!!DZ[m.type]:g==="textarea"}function mD(m,g,y,j){Ru?zu?zu.push(j):zu=[j]:Ru=j,g=D0(g,"onChange"),0<g.length&&(y=new Hx("onChange","change",null,y,j),m.push({event:y,listeners:g}))}var Jf=null,eh=null;function OZ(m){YO(m,0)}function Wx(m){var g=Rn(m);if(qP(g))return m}function fD(m,g){if(m==="change")return g}var hD=!1;if(El){var Oj;if(El){var Mj="oninput"in document;if(!Mj){var gD=document.createElement("div");gD.setAttribute("oninput","return;"),Mj=typeof gD.oninput=="function"}Oj=Mj}else Oj=!1;hD=Oj&&(!document.documentMode||9<document.documentMode)}function pD(){Jf&&(Jf.detachEvent("onpropertychange",xD),eh=Jf=null)}function xD(m){if(m.propertyName==="value"&&Wx(eh)){var g=[];mD(g,eh,m,Sj(m)),eD(OZ,g)}}function MZ(m,g,y){m==="focusin"?(pD(),Jf=g,eh=y,Jf.attachEvent("onpropertychange",xD)):m==="focusout"&&pD()}function IZ(m){if(m==="selectionchange"||m==="keyup"||m==="keydown")return Wx(eh)}function $Z(m,g){if(m==="click")return Wx(g)}function RZ(m,g){if(m==="input"||m==="change")return Wx(g)}function zZ(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var mr=typeof Object.is=="function"?Object.is:zZ;function th(m,g){if(mr(m,g))return!0;if(typeof m!="object"||m===null||typeof g!="object"||g===null)return!1;var y=Object.keys(m),j=Object.keys(g);if(y.length!==j.length)return!1;for(j=0;j<y.length;j++){var L=y[j];if(!Te.call(g,L)||!mr(m[L],g[L]))return!1}return!0}function yD(m){for(;m&&m.firstChild;)m=m.firstChild;return m}function bD(m,g){var y=yD(m);m=0;for(var j;y;){if(y.nodeType===3){if(j=m+y.textContent.length,m<=g&&j>=g)return{node:y,offset:g-m};m=j}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=yD(y)}}function vD(m,g){return m&&g?m===g?!0:m&&m.nodeType===3?!1:g&&g.nodeType===3?vD(m,g.parentNode):"contains"in m?m.contains(g):m.compareDocumentPosition?!!(m.compareDocumentPosition(g)&16):!1:!1}function wD(m){m=m!=null&&m.ownerDocument!=null&&m.ownerDocument.defaultView!=null?m.ownerDocument.defaultView:window;for(var g=Rx(m.document);g instanceof m.HTMLIFrameElement;){try{var y=typeof g.contentWindow.location.href=="string"}catch{y=!1}if(y)m=g.contentWindow;else break;g=Rx(m.document)}return g}function Ij(m){var g=m&&m.nodeName&&m.nodeName.toLowerCase();return g&&(g==="input"&&(m.type==="text"||m.type==="search"||m.type==="tel"||m.type==="url"||m.type==="password")||g==="textarea"||m.contentEditable==="true")}var UZ=El&&"documentMode"in document&&11>=document.documentMode,Fu=null,$j=null,ah=null,Rj=!1;function ND(m,g,y){var j=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;Rj||Fu==null||Fu!==Rx(j)||(j=Fu,"selectionStart"in j&&Ij(j)?j={start:j.selectionStart,end:j.selectionEnd}:(j=(j.ownerDocument&&j.ownerDocument.defaultView||window).getSelection(),j={anchorNode:j.anchorNode,anchorOffset:j.anchorOffset,focusNode:j.focusNode,focusOffset:j.focusOffset}),ah&&th(ah,j)||(ah=j,j=D0($j,"onSelect"),0<j.length&&(g=new Hx("onSelect","select",null,g,y),m.push({event:g,listeners:j}),g.target=Fu)))}function rd(m,g){var y={};return y[m.toLowerCase()]=g.toLowerCase(),y["Webkit"+m]="webkit"+g,y["Moz"+m]="moz"+g,y}var Bu={animationend:rd("Animation","AnimationEnd"),animationiteration:rd("Animation","AnimationIteration"),animationstart:rd("Animation","AnimationStart"),transitionrun:rd("Transition","TransitionRun"),transitionstart:rd("Transition","TransitionStart"),transitioncancel:rd("Transition","TransitionCancel"),transitionend:rd("Transition","TransitionEnd")},zj={},jD={};El&&(jD=document.createElement("div").style,"AnimationEvent"in window||(delete Bu.animationend.animation,delete Bu.animationiteration.animation,delete Bu.animationstart.animation),"TransitionEvent"in window||delete Bu.transitionend.transition);function id(m){if(zj[m])return zj[m];if(!Bu[m])return m;var g=Bu[m],y;for(y in g)if(g.hasOwnProperty(y)&&y in jD)return zj[m]=g[y];return m}var CD=id("animationend"),SD=id("animationiteration"),_D=id("animationstart"),FZ=id("transitionrun"),BZ=id("transitionstart"),HZ=id("transitioncancel"),AD=id("transitionend"),ED=new Map,Uj="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Uj.push("scrollEnd");function pi(m,g){ED.set(m,g),nd(g,[m])}var Vx=typeof reportError=="function"?reportError:function(m){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var g=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof m=="object"&&m!==null&&typeof m.message=="string"?String(m.message):String(m),error:m});if(!window.dispatchEvent(g))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",m);return}console.error(m)},Ir=[],Hu=0,Fj=0;function qx(){for(var m=Hu,g=Fj=Hu=0;g<m;){var y=Ir[g];Ir[g++]=null;var j=Ir[g];Ir[g++]=null;var L=Ir[g];Ir[g++]=null;var D=Ir[g];if(Ir[g++]=null,j!==null&&L!==null){var q=j.pending;q===null?L.next=L:(L.next=q.next,q.next=L),j.pending=L}D!==0&&TD(y,L,D)}}function Yx(m,g,y,j){Ir[Hu++]=m,Ir[Hu++]=g,Ir[Hu++]=y,Ir[Hu++]=j,Fj|=j,m.lanes|=j,m=m.alternate,m!==null&&(m.lanes|=j)}function Bj(m,g,y,j){return Yx(m,g,y,j),Kx(m)}function ld(m,g){return Yx(m,null,null,g),Kx(m)}function TD(m,g,y){m.lanes|=y;var j=m.alternate;j!==null&&(j.lanes|=y);for(var L=!1,D=m.return;D!==null;)D.childLanes|=y,j=D.alternate,j!==null&&(j.childLanes|=y),D.tag===22&&(m=D.stateNode,m===null||m._visibility&1||(L=!0)),m=D,D=D.return;return m.tag===3?(D=m.stateNode,L&&g!==null&&(L=31-Ee(y),m=D.hiddenUpdates,j=m[L],j===null?m[L]=[g]:j.push(g),g.lane=y|536870912),D):null}function Kx(m){if(50<Ch)throw Ch=0,X1=null,Error(s(185));for(var g=m.return;g!==null;)m=g,g=m.return;return m.tag===3?m.stateNode:null}var Gu={};function GZ(m,g,y,j){this.tag=m,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=j,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fr(m,g,y,j){return new GZ(m,g,y,j)}function Hj(m){return m=m.prototype,!(!m||!m.isReactComponent)}function Tl(m,g){var y=m.alternate;return y===null?(y=fr(m.tag,g,m.key,m.mode),y.elementType=m.elementType,y.type=m.type,y.stateNode=m.stateNode,y.alternate=m,m.alternate=y):(y.pendingProps=g,y.type=m.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=m.flags&65011712,y.childLanes=m.childLanes,y.lanes=m.lanes,y.child=m.child,y.memoizedProps=m.memoizedProps,y.memoizedState=m.memoizedState,y.updateQueue=m.updateQueue,g=m.dependencies,y.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},y.sibling=m.sibling,y.index=m.index,y.ref=m.ref,y.refCleanup=m.refCleanup,y}function kD(m,g){m.flags&=65011714;var y=m.alternate;return y===null?(m.childLanes=0,m.lanes=g,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=y.childLanes,m.lanes=y.lanes,m.child=y.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=y.memoizedProps,m.memoizedState=y.memoizedState,m.updateQueue=y.updateQueue,m.type=y.type,g=y.dependencies,m.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),m}function Qx(m,g,y,j,L,D){var q=0;if(j=m,typeof m=="function")Hj(m)&&(q=1);else if(typeof m=="string")q=KJ(m,y,X.current)?26:m==="html"||m==="head"||m==="body"?27:5;else e:switch(m){case I:return m=fr(31,y,g,L),m.elementType=I,m.lanes=D,m;case w:return od(y.children,L,D,g);case b:q=8,L|=24;break;case C:return m=fr(12,y,g,L|2),m.elementType=C,m.lanes=D,m;case k:return m=fr(13,y,g,L),m.elementType=k,m.lanes=D,m;case _:return m=fr(19,y,g,L),m.elementType=_,m.lanes=D,m;default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case S:q=10;break e;case N:q=9;break e;case A:q=11;break e;case T:q=14;break e;case E:q=16,j=null;break e}q=29,y=Error(s(130,m===null?"null":typeof m,"")),j=null}return g=fr(q,y,g,L),g.elementType=m,g.type=j,g.lanes=D,g}function od(m,g,y,j){return m=fr(7,m,j,g),m.lanes=y,m}function Gj(m,g,y){return m=fr(6,m,null,g),m.lanes=y,m}function LD(m){var g=fr(18,null,null,0);return g.stateNode=m,g}function Wj(m,g,y){return g=fr(4,m.children!==null?m.children:[],m.key,g),g.lanes=y,g.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},g}var PD=new WeakMap;function $r(m,g){if(typeof m=="object"&&m!==null){var y=PD.get(m);return y!==void 0?y:(g={value:m,source:g,stack:fe(g)},PD.set(m,g),g)}return{value:m,source:g,stack:fe(g)}}var Wu=[],Vu=0,Xx=null,nh=0,Rr=[],zr=0,Wo=null,Ri=1,zi="";function kl(m,g){Wu[Vu++]=nh,Wu[Vu++]=Xx,Xx=m,nh=g}function DD(m,g,y){Rr[zr++]=Ri,Rr[zr++]=zi,Rr[zr++]=Wo,Wo=m;var j=Ri;m=zi;var L=32-Ee(j)-1;j&=~(1<<L),y+=1;var D=32-Ee(g)+L;if(30<D){var q=L-L%5;D=(j&(1<<q)-1).toString(32),j>>=q,L-=q,Ri=1<<32-Ee(g)+L|y<<L|j,zi=D+m}else Ri=1<<D|y<<L|j,zi=m}function Vj(m){m.return!==null&&(kl(m,1),DD(m,1,0))}function qj(m){for(;m===Xx;)Xx=Wu[--Vu],Wu[Vu]=null,nh=Wu[--Vu],Wu[Vu]=null;for(;m===Wo;)Wo=Rr[--zr],Rr[zr]=null,zi=Rr[--zr],Rr[zr]=null,Ri=Rr[--zr],Rr[zr]=null}function OD(m,g){Rr[zr++]=Ri,Rr[zr++]=zi,Rr[zr++]=Wo,Ri=g.id,zi=g.overflow,Wo=m}var ds=null,Wa=null,ua=!1,Vo=null,Ur=!1,Yj=Error(s(519));function qo(m){var g=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw sh($r(g,m)),Yj}function MD(m){var g=m.stateNode,y=m.type,j=m.memoizedProps;switch(g[Ge]=m,g[ue]=j,y){case"dialog":ra("cancel",g),ra("close",g);break;case"iframe":case"object":case"embed":ra("load",g);break;case"video":case"audio":for(y=0;y<_h.length;y++)ra(_h[y],g);break;case"source":ra("error",g);break;case"img":case"image":case"link":ra("error",g),ra("load",g);break;case"details":ra("toggle",g);break;case"input":ra("invalid",g),YP(g,j.value,j.defaultValue,j.checked,j.defaultChecked,j.type,j.name,!0);break;case"select":ra("invalid",g);break;case"textarea":ra("invalid",g),QP(g,j.value,j.defaultValue,j.children)}y=j.children,typeof y!="string"&&typeof y!="number"&&typeof y!="bigint"||g.textContent===""+y||j.suppressHydrationWarning===!0||ZO(g.textContent,y)?(j.popover!=null&&(ra("beforetoggle",g),ra("toggle",g)),j.onScroll!=null&&ra("scroll",g),j.onScrollEnd!=null&&ra("scrollend",g),j.onClick!=null&&(g.onclick=Al),g=!0):g=!1,g||qo(m,!0)}function ID(m){for(ds=m.return;ds;)switch(ds.tag){case 5:case 31:case 13:Ur=!1;return;case 27:case 3:Ur=!0;return;default:ds=ds.return}}function qu(m){if(m!==ds)return!1;if(!ua)return ID(m),ua=!0,!1;var g=m.tag,y;if((y=g!==3&&g!==27)&&((y=g===5)&&(y=m.type,y=!(y!=="form"&&y!=="button")||mC(m.type,m.memoizedProps)),y=!y),y&&Wa&&qo(m),ID(m),g===13){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));Wa=l5(m)}else if(g===31){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));Wa=l5(m)}else g===27?(g=Wa,lc(m.type)?(m=xC,xC=null,Wa=m):Wa=g):Wa=ds?Br(m.stateNode.nextSibling):null;return!0}function cd(){Wa=ds=null,ua=!1}function Kj(){var m=Vo;return m!==null&&(Vs===null?Vs=m:Vs.push.apply(Vs,m),Vo=null),m}function sh(m){Vo===null?Vo=[m]:Vo.push(m)}var Qj=Z(null),dd=null,Ll=null;function Yo(m,g,y){ve(Qj,g._currentValue),g._currentValue=y}function Pl(m){m._currentValue=Qj.current,R(Qj)}function Xj(m,g,y){for(;m!==null;){var j=m.alternate;if((m.childLanes&g)!==g?(m.childLanes|=g,j!==null&&(j.childLanes|=g)):j!==null&&(j.childLanes&g)!==g&&(j.childLanes|=g),m===y)break;m=m.return}}function Zj(m,g,y,j){var L=m.child;for(L!==null&&(L.return=m);L!==null;){var D=L.dependencies;if(D!==null){var q=L.child;D=D.firstContext;e:for(;D!==null;){var xe=D;D=L;for(var Re=0;Re<g.length;Re++)if(xe.context===g[Re]){D.lanes|=y,xe=D.alternate,xe!==null&&(xe.lanes|=y),Xj(D.return,y,m),j||(q=null);break e}D=xe.next}}else if(L.tag===18){if(q=L.return,q===null)throw Error(s(341));q.lanes|=y,D=q.alternate,D!==null&&(D.lanes|=y),Xj(q,y,m),q=null}else q=L.child;if(q!==null)q.return=L;else for(q=L;q!==null;){if(q===m){q=null;break}if(L=q.sibling,L!==null){L.return=q.return,q=L;break}q=q.return}L=q}}function Yu(m,g,y,j){m=null;for(var L=g,D=!1;L!==null;){if(!D){if((L.flags&524288)!==0)D=!0;else if((L.flags&262144)!==0)break}if(L.tag===10){var q=L.alternate;if(q===null)throw Error(s(387));if(q=q.memoizedProps,q!==null){var xe=L.type;mr(L.pendingProps.value,q.value)||(m!==null?m.push(xe):m=[xe])}}else if(L===Oe.current){if(q=L.alternate,q===null)throw Error(s(387));q.memoizedState.memoizedState!==L.memoizedState.memoizedState&&(m!==null?m.push(Lh):m=[Lh])}L=L.return}m!==null&&Zj(g,m,y,j),g.flags|=262144}function Zx(m){for(m=m.firstContext;m!==null;){if(!mr(m.context._currentValue,m.memoizedValue))return!0;m=m.next}return!1}function ud(m){dd=m,Ll=null,m=m.dependencies,m!==null&&(m.firstContext=null)}function us(m){return $D(dd,m)}function Jx(m,g){return dd===null&&ud(m),$D(m,g)}function $D(m,g){var y=g._currentValue;if(g={context:g,memoizedValue:y,next:null},Ll===null){if(m===null)throw Error(s(308));Ll=g,m.dependencies={lanes:0,firstContext:g},m.flags|=524288}else Ll=Ll.next=g;return y}var WZ=typeof AbortController<"u"?AbortController:function(){var m=[],g=this.signal={aborted:!1,addEventListener:function(y,j){m.push(j)}};this.abort=function(){g.aborted=!0,m.forEach(function(y){return y()})}},VZ=e.unstable_scheduleCallback,qZ=e.unstable_NormalPriority,_n={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jj(){return{controller:new WZ,data:new Map,refCount:0}}function rh(m){m.refCount--,m.refCount===0&&VZ(qZ,function(){m.controller.abort()})}var ih=null,e1=0,Ku=0,Qu=null;function YZ(m,g){if(ih===null){var y=ih=[];e1=0,Ku=nC(),Qu={status:"pending",value:void 0,then:function(j){y.push(j)}}}return e1++,g.then(RD,RD),g}function RD(){if(--e1===0&&ih!==null){Qu!==null&&(Qu.status="fulfilled");var m=ih;ih=null,Ku=0,Qu=null;for(var g=0;g<m.length;g++)(0,m[g])()}}function KZ(m,g){var y=[],j={status:"pending",value:null,reason:null,then:function(L){y.push(L)}};return m.then(function(){j.status="fulfilled",j.value=g;for(var L=0;L<y.length;L++)(0,y[L])(g)},function(L){for(j.status="rejected",j.reason=L,L=0;L<y.length;L++)(0,y[L])(void 0)}),j}var zD=F.S;F.S=function(m,g){NO=he(),typeof g=="object"&&g!==null&&typeof g.then=="function"&&YZ(m,g),zD!==null&&zD(m,g)};var md=Z(null);function t1(){var m=md.current;return m!==null?m:$a.pooledCache}function e0(m,g){g===null?ve(md,md.current):ve(md,g.pool)}function UD(){var m=t1();return m===null?null:{parent:_n._currentValue,pool:m}}var Xu=Error(s(460)),a1=Error(s(474)),t0=Error(s(542)),a0={then:function(){}};function FD(m){return m=m.status,m==="fulfilled"||m==="rejected"}function BD(m,g,y){switch(y=m[y],y===void 0?m.push(g):y!==g&&(g.then(Al,Al),g=y),g.status){case"fulfilled":return g.value;case"rejected":throw m=g.reason,GD(m),m;default:if(typeof g.status=="string")g.then(Al,Al);else{if(m=$a,m!==null&&100<m.shellSuspendCounter)throw Error(s(482));m=g,m.status="pending",m.then(function(j){if(g.status==="pending"){var L=g;L.status="fulfilled",L.value=j}},function(j){if(g.status==="pending"){var L=g;L.status="rejected",L.reason=j}})}switch(g.status){case"fulfilled":return g.value;case"rejected":throw m=g.reason,GD(m),m}throw hd=g,Xu}}function fd(m){try{var g=m._init;return g(m._payload)}catch(y){throw y!==null&&typeof y=="object"&&typeof y.then=="function"?(hd=y,Xu):y}}var hd=null;function HD(){if(hd===null)throw Error(s(459));var m=hd;return hd=null,m}function GD(m){if(m===Xu||m===t0)throw Error(s(483))}var Zu=null,lh=0;function n0(m){var g=lh;return lh+=1,Zu===null&&(Zu=[]),BD(Zu,m,g)}function oh(m,g){g=g.props.ref,m.ref=g!==void 0?g:null}function s0(m,g){throw g.$$typeof===p?Error(s(525)):(m=Object.prototype.toString.call(g),Error(s(31,m==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":m)))}function WD(m){function g(Ze,qe){if(m){var at=Ze.deletions;at===null?(Ze.deletions=[qe],Ze.flags|=16):at.push(qe)}}function y(Ze,qe){if(!m)return null;for(;qe!==null;)g(Ze,qe),qe=qe.sibling;return null}function j(Ze){for(var qe=new Map;Ze!==null;)Ze.key!==null?qe.set(Ze.key,Ze):qe.set(Ze.index,Ze),Ze=Ze.sibling;return qe}function L(Ze,qe){return Ze=Tl(Ze,qe),Ze.index=0,Ze.sibling=null,Ze}function D(Ze,qe,at){return Ze.index=at,m?(at=Ze.alternate,at!==null?(at=at.index,at<qe?(Ze.flags|=67108866,qe):at):(Ze.flags|=67108866,qe)):(Ze.flags|=1048576,qe)}function q(Ze){return m&&Ze.alternate===null&&(Ze.flags|=67108866),Ze}function xe(Ze,qe,at,gt){return qe===null||qe.tag!==6?(qe=Gj(at,Ze.mode,gt),qe.return=Ze,qe):(qe=L(qe,at),qe.return=Ze,qe)}function Re(Ze,qe,at,gt){var Ut=at.type;return Ut===w?ut(Ze,qe,at.props.children,gt,at.key):qe!==null&&(qe.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===E&&fd(Ut)===qe.type)?(qe=L(qe,at.props),oh(qe,at),qe.return=Ze,qe):(qe=Qx(at.type,at.key,at.props,null,Ze.mode,gt),oh(qe,at),qe.return=Ze,qe)}function nt(Ze,qe,at,gt){return qe===null||qe.tag!==4||qe.stateNode.containerInfo!==at.containerInfo||qe.stateNode.implementation!==at.implementation?(qe=Wj(at,Ze.mode,gt),qe.return=Ze,qe):(qe=L(qe,at.children||[]),qe.return=Ze,qe)}function ut(Ze,qe,at,gt,Ut){return qe===null||qe.tag!==7?(qe=od(at,Ze.mode,gt,Ut),qe.return=Ze,qe):(qe=L(qe,at),qe.return=Ze,qe)}function xt(Ze,qe,at){if(typeof qe=="string"&&qe!==""||typeof qe=="number"||typeof qe=="bigint")return qe=Gj(""+qe,Ze.mode,at),qe.return=Ze,qe;if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case x:return at=Qx(qe.type,qe.key,qe.props,null,Ze.mode,at),oh(at,qe),at.return=Ze,at;case v:return qe=Wj(qe,Ze.mode,at),qe.return=Ze,qe;case E:return qe=fd(qe),xt(Ze,qe,at)}if(Q(qe)||P(qe))return qe=od(qe,Ze.mode,at,null),qe.return=Ze,qe;if(typeof qe.then=="function")return xt(Ze,n0(qe),at);if(qe.$$typeof===S)return xt(Ze,Jx(Ze,qe),at);s0(Ze,qe)}return null}function rt(Ze,qe,at,gt){var Ut=qe!==null?qe.key:null;if(typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint")return Ut!==null?null:xe(Ze,qe,""+at,gt);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case x:return at.key===Ut?Re(Ze,qe,at,gt):null;case v:return at.key===Ut?nt(Ze,qe,at,gt):null;case E:return at=fd(at),rt(Ze,qe,at,gt)}if(Q(at)||P(at))return Ut!==null?null:ut(Ze,qe,at,gt,null);if(typeof at.then=="function")return rt(Ze,qe,n0(at),gt);if(at.$$typeof===S)return rt(Ze,qe,Jx(Ze,at),gt);s0(Ze,at)}return null}function ct(Ze,qe,at,gt,Ut){if(typeof gt=="string"&&gt!==""||typeof gt=="number"||typeof gt=="bigint")return Ze=Ze.get(at)||null,xe(qe,Ze,""+gt,Ut);if(typeof gt=="object"&&gt!==null){switch(gt.$$typeof){case x:return Ze=Ze.get(gt.key===null?at:gt.key)||null,Re(qe,Ze,gt,Ut);case v:return Ze=Ze.get(gt.key===null?at:gt.key)||null,nt(qe,Ze,gt,Ut);case E:return gt=fd(gt),ct(Ze,qe,at,gt,Ut)}if(Q(gt)||P(gt))return Ze=Ze.get(at)||null,ut(qe,Ze,gt,Ut,null);if(typeof gt.then=="function")return ct(Ze,qe,at,n0(gt),Ut);if(gt.$$typeof===S)return ct(Ze,qe,at,Jx(qe,gt),Ut);s0(qe,gt)}return null}function Pt(Ze,qe,at,gt){for(var Ut=null,pa=null,$t=qe,ea=qe=0,oa=null;$t!==null&&ea<at.length;ea++){$t.index>ea?(oa=$t,$t=null):oa=$t.sibling;var xa=rt(Ze,$t,at[ea],gt);if(xa===null){$t===null&&($t=oa);break}m&&$t&&xa.alternate===null&&g(Ze,$t),qe=D(xa,qe,ea),pa===null?Ut=xa:pa.sibling=xa,pa=xa,$t=oa}if(ea===at.length)return y(Ze,$t),ua&&kl(Ze,ea),Ut;if($t===null){for(;ea<at.length;ea++)$t=xt(Ze,at[ea],gt),$t!==null&&(qe=D($t,qe,ea),pa===null?Ut=$t:pa.sibling=$t,pa=$t);return ua&&kl(Ze,ea),Ut}for($t=j($t);ea<at.length;ea++)oa=ct($t,Ze,ea,at[ea],gt),oa!==null&&(m&&oa.alternate!==null&&$t.delete(oa.key===null?ea:oa.key),qe=D(oa,qe,ea),pa===null?Ut=oa:pa.sibling=oa,pa=oa);return m&&$t.forEach(function(mc){return g(Ze,mc)}),ua&&kl(Ze,ea),Ut}function Ht(Ze,qe,at,gt){if(at==null)throw Error(s(151));for(var Ut=null,pa=null,$t=qe,ea=qe=0,oa=null,xa=at.next();$t!==null&&!xa.done;ea++,xa=at.next()){$t.index>ea?(oa=$t,$t=null):oa=$t.sibling;var mc=rt(Ze,$t,xa.value,gt);if(mc===null){$t===null&&($t=oa);break}m&&$t&&mc.alternate===null&&g(Ze,$t),qe=D(mc,qe,ea),pa===null?Ut=mc:pa.sibling=mc,pa=mc,$t=oa}if(xa.done)return y(Ze,$t),ua&&kl(Ze,ea),Ut;if($t===null){for(;!xa.done;ea++,xa=at.next())xa=xt(Ze,xa.value,gt),xa!==null&&(qe=D(xa,qe,ea),pa===null?Ut=xa:pa.sibling=xa,pa=xa);return ua&&kl(Ze,ea),Ut}for($t=j($t);!xa.done;ea++,xa=at.next())xa=ct($t,Ze,ea,xa.value,gt),xa!==null&&(m&&xa.alternate!==null&&$t.delete(xa.key===null?ea:xa.key),qe=D(xa,qe,ea),pa===null?Ut=xa:pa.sibling=xa,pa=xa);return m&&$t.forEach(function(iee){return g(Ze,iee)}),ua&&kl(Ze,ea),Ut}function Oa(Ze,qe,at,gt){if(typeof at=="object"&&at!==null&&at.type===w&&at.key===null&&(at=at.props.children),typeof at=="object"&&at!==null){switch(at.$$typeof){case x:e:{for(var Ut=at.key;qe!==null;){if(qe.key===Ut){if(Ut=at.type,Ut===w){if(qe.tag===7){y(Ze,qe.sibling),gt=L(qe,at.props.children),gt.return=Ze,Ze=gt;break e}}else if(qe.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===E&&fd(Ut)===qe.type){y(Ze,qe.sibling),gt=L(qe,at.props),oh(gt,at),gt.return=Ze,Ze=gt;break e}y(Ze,qe);break}else g(Ze,qe);qe=qe.sibling}at.type===w?(gt=od(at.props.children,Ze.mode,gt,at.key),gt.return=Ze,Ze=gt):(gt=Qx(at.type,at.key,at.props,null,Ze.mode,gt),oh(gt,at),gt.return=Ze,Ze=gt)}return q(Ze);case v:e:{for(Ut=at.key;qe!==null;){if(qe.key===Ut)if(qe.tag===4&&qe.stateNode.containerInfo===at.containerInfo&&qe.stateNode.implementation===at.implementation){y(Ze,qe.sibling),gt=L(qe,at.children||[]),gt.return=Ze,Ze=gt;break e}else{y(Ze,qe);break}else g(Ze,qe);qe=qe.sibling}gt=Wj(at,Ze.mode,gt),gt.return=Ze,Ze=gt}return q(Ze);case E:return at=fd(at),Oa(Ze,qe,at,gt)}if(Q(at))return Pt(Ze,qe,at,gt);if(P(at)){if(Ut=P(at),typeof Ut!="function")throw Error(s(150));return at=Ut.call(at),Ht(Ze,qe,at,gt)}if(typeof at.then=="function")return Oa(Ze,qe,n0(at),gt);if(at.$$typeof===S)return Oa(Ze,qe,Jx(Ze,at),gt);s0(Ze,at)}return typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint"?(at=""+at,qe!==null&&qe.tag===6?(y(Ze,qe.sibling),gt=L(qe,at),gt.return=Ze,Ze=gt):(y(Ze,qe),gt=Gj(at,Ze.mode,gt),gt.return=Ze,Ze=gt),q(Ze)):y(Ze,qe)}return function(Ze,qe,at,gt){try{lh=0;var Ut=Oa(Ze,qe,at,gt);return Zu=null,Ut}catch($t){if($t===Xu||$t===t0)throw $t;var pa=fr(29,$t,null,Ze.mode);return pa.lanes=gt,pa.return=Ze,pa}finally{}}}var gd=WD(!0),VD=WD(!1),Ko=!1;function n1(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function s1(m,g){m=m.updateQueue,g.updateQueue===m&&(g.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,callbacks:null})}function Qo(m){return{lane:m,tag:0,payload:null,callback:null,next:null}}function Xo(m,g,y){var j=m.updateQueue;if(j===null)return null;if(j=j.shared,(ba&2)!==0){var L=j.pending;return L===null?g.next=g:(g.next=L.next,L.next=g),j.pending=g,g=Kx(m),TD(m,null,y),g}return Yx(m,j,g,y),Kx(m)}function ch(m,g,y){if(g=g.updateQueue,g!==null&&(g=g.shared,(y&4194048)!==0)){var j=g.lanes;j&=m.pendingLanes,y|=j,g.lanes=y,jt(m,y)}}function r1(m,g){var y=m.updateQueue,j=m.alternate;if(j!==null&&(j=j.updateQueue,y===j)){var L=null,D=null;if(y=y.firstBaseUpdate,y!==null){do{var q={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};D===null?L=D=q:D=D.next=q,y=y.next}while(y!==null);D===null?L=D=g:D=D.next=g}else L=D=g;y={baseState:j.baseState,firstBaseUpdate:L,lastBaseUpdate:D,shared:j.shared,callbacks:j.callbacks},m.updateQueue=y;return}m=y.lastBaseUpdate,m===null?y.firstBaseUpdate=g:m.next=g,y.lastBaseUpdate=g}var i1=!1;function dh(){if(i1){var m=Qu;if(m!==null)throw m}}function uh(m,g,y,j){i1=!1;var L=m.updateQueue;Ko=!1;var D=L.firstBaseUpdate,q=L.lastBaseUpdate,xe=L.shared.pending;if(xe!==null){L.shared.pending=null;var Re=xe,nt=Re.next;Re.next=null,q===null?D=nt:q.next=nt,q=Re;var ut=m.alternate;ut!==null&&(ut=ut.updateQueue,xe=ut.lastBaseUpdate,xe!==q&&(xe===null?ut.firstBaseUpdate=nt:xe.next=nt,ut.lastBaseUpdate=Re))}if(D!==null){var xt=L.baseState;q=0,ut=nt=Re=null,xe=D;do{var rt=xe.lane&-536870913,ct=rt!==xe.lane;if(ct?(la&rt)===rt:(j&rt)===rt){rt!==0&&rt===Ku&&(i1=!0),ut!==null&&(ut=ut.next={lane:0,tag:xe.tag,payload:xe.payload,callback:null,next:null});e:{var Pt=m,Ht=xe;rt=g;var Oa=y;switch(Ht.tag){case 1:if(Pt=Ht.payload,typeof Pt=="function"){xt=Pt.call(Oa,xt,rt);break e}xt=Pt;break e;case 3:Pt.flags=Pt.flags&-65537|128;case 0:if(Pt=Ht.payload,rt=typeof Pt=="function"?Pt.call(Oa,xt,rt):Pt,rt==null)break e;xt=f({},xt,rt);break e;case 2:Ko=!0}}rt=xe.callback,rt!==null&&(m.flags|=64,ct&&(m.flags|=8192),ct=L.callbacks,ct===null?L.callbacks=[rt]:ct.push(rt))}else ct={lane:rt,tag:xe.tag,payload:xe.payload,callback:xe.callback,next:null},ut===null?(nt=ut=ct,Re=xt):ut=ut.next=ct,q|=rt;if(xe=xe.next,xe===null){if(xe=L.shared.pending,xe===null)break;ct=xe,xe=ct.next,ct.next=null,L.lastBaseUpdate=ct,L.shared.pending=null}}while(!0);ut===null&&(Re=xt),L.baseState=Re,L.firstBaseUpdate=nt,L.lastBaseUpdate=ut,D===null&&(L.shared.lanes=0),ac|=q,m.lanes=q,m.memoizedState=xt}}function qD(m,g){if(typeof m!="function")throw Error(s(191,m));m.call(g)}function YD(m,g){var y=m.callbacks;if(y!==null)for(m.callbacks=null,m=0;m<y.length;m++)qD(y[m],g)}var Ju=Z(null),r0=Z(0);function KD(m,g){m=Fl,ve(r0,m),ve(Ju,g),Fl=m|g.baseLanes}function l1(){ve(r0,Fl),ve(Ju,Ju.current)}function o1(){Fl=r0.current,R(Ju),R(r0)}var hr=Z(null),Fr=null;function Zo(m){var g=m.alternate;ve(bn,bn.current&1),ve(hr,m),Fr===null&&(g===null||Ju.current!==null||g.memoizedState!==null)&&(Fr=m)}function c1(m){ve(bn,bn.current),ve(hr,m),Fr===null&&(Fr=m)}function QD(m){m.tag===22?(ve(bn,bn.current),ve(hr,m),Fr===null&&(Fr=m)):Jo()}function Jo(){ve(bn,bn.current),ve(hr,hr.current)}function gr(m){R(hr),Fr===m&&(Fr=null),R(bn)}var bn=Z(0);function i0(m){for(var g=m;g!==null;){if(g.tag===13){var y=g.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||gC(y)||pC(y)))return g}else if(g.tag===19&&(g.memoizedProps.revealOrder==="forwards"||g.memoizedProps.revealOrder==="backwards"||g.memoizedProps.revealOrder==="unstable_legacy-backwards"||g.memoizedProps.revealOrder==="together")){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===m)break;for(;g.sibling===null;){if(g.return===null||g.return===m)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var Dl=0,Qt=null,Pa=null,An=null,l0=!1,em=!1,pd=!1,o0=0,mh=0,tm=null,QZ=0;function dn(){throw Error(s(321))}function d1(m,g){if(g===null)return!1;for(var y=0;y<g.length&&y<m.length;y++)if(!mr(m[y],g[y]))return!1;return!0}function u1(m,g,y,j,L,D){return Dl=D,Qt=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,F.H=m===null||m.memoizedState===null?D3:_1,pd=!1,D=y(j,L),pd=!1,em&&(D=ZD(g,y,j,L)),XD(m),D}function XD(m){F.H=gh;var g=Pa!==null&&Pa.next!==null;if(Dl=0,An=Pa=Qt=null,l0=!1,mh=0,tm=null,g)throw Error(s(300));m===null||En||(m=m.dependencies,m!==null&&Zx(m)&&(En=!0))}function ZD(m,g,y,j){Qt=m;var L=0;do{if(em&&(tm=null),mh=0,em=!1,25<=L)throw Error(s(301));if(L+=1,An=Pa=null,m.updateQueue!=null){var D=m.updateQueue;D.lastEffect=null,D.events=null,D.stores=null,D.memoCache!=null&&(D.memoCache.index=0)}F.H=O3,D=g(y,j)}while(em);return D}function XZ(){var m=F.H,g=m.useState()[0];return g=typeof g.then=="function"?fh(g):g,m=m.useState()[0],(Pa!==null?Pa.memoizedState:null)!==m&&(Qt.flags|=1024),g}function m1(){var m=o0!==0;return o0=0,m}function f1(m,g,y){g.updateQueue=m.updateQueue,g.flags&=-2053,m.lanes&=~y}function h1(m){if(l0){for(m=m.memoizedState;m!==null;){var g=m.queue;g!==null&&(g.pending=null),m=m.next}l0=!1}Dl=0,An=Pa=Qt=null,em=!1,mh=o0=0,tm=null}function Ps(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return An===null?Qt.memoizedState=An=m:An=An.next=m,An}function vn(){if(Pa===null){var m=Qt.alternate;m=m!==null?m.memoizedState:null}else m=Pa.next;var g=An===null?Qt.memoizedState:An.next;if(g!==null)An=g,Pa=m;else{if(m===null)throw Qt.alternate===null?Error(s(467)):Error(s(310));Pa=m,m={memoizedState:Pa.memoizedState,baseState:Pa.baseState,baseQueue:Pa.baseQueue,queue:Pa.queue,next:null},An===null?Qt.memoizedState=An=m:An=An.next=m}return An}function c0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fh(m){var g=mh;return mh+=1,tm===null&&(tm=[]),m=BD(tm,m,g),g=Qt,(An===null?g.memoizedState:An.next)===null&&(g=g.alternate,F.H=g===null||g.memoizedState===null?D3:_1),m}function d0(m){if(m!==null&&typeof m=="object"){if(typeof m.then=="function")return fh(m);if(m.$$typeof===S)return us(m)}throw Error(s(438,String(m)))}function g1(m){var g=null,y=Qt.updateQueue;if(y!==null&&(g=y.memoCache),g==null){var j=Qt.alternate;j!==null&&(j=j.updateQueue,j!==null&&(j=j.memoCache,j!=null&&(g={data:j.data.map(function(L){return L.slice()}),index:0})))}if(g==null&&(g={data:[],index:0}),y===null&&(y=c0(),Qt.updateQueue=y),y.memoCache=g,y=g.data[g.index],y===void 0)for(y=g.data[g.index]=Array(m),j=0;j<m;j++)y[j]=z;return g.index++,y}function Ol(m,g){return typeof g=="function"?g(m):g}function u0(m){var g=vn();return p1(g,Pa,m)}function p1(m,g,y){var j=m.queue;if(j===null)throw Error(s(311));j.lastRenderedReducer=y;var L=m.baseQueue,D=j.pending;if(D!==null){if(L!==null){var q=L.next;L.next=D.next,D.next=q}g.baseQueue=L=D,j.pending=null}if(D=m.baseState,L===null)m.memoizedState=D;else{g=L.next;var xe=q=null,Re=null,nt=g,ut=!1;do{var xt=nt.lane&-536870913;if(xt!==nt.lane?(la&xt)===xt:(Dl&xt)===xt){var rt=nt.revertLane;if(rt===0)Re!==null&&(Re=Re.next={lane:0,revertLane:0,gesture:null,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null}),xt===Ku&&(ut=!0);else if((Dl&rt)===rt){nt=nt.next,rt===Ku&&(ut=!0);continue}else xt={lane:0,revertLane:nt.revertLane,gesture:null,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null},Re===null?(xe=Re=xt,q=D):Re=Re.next=xt,Qt.lanes|=rt,ac|=rt;xt=nt.action,pd&&y(D,xt),D=nt.hasEagerState?nt.eagerState:y(D,xt)}else rt={lane:xt,revertLane:nt.revertLane,gesture:nt.gesture,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null},Re===null?(xe=Re=rt,q=D):Re=Re.next=rt,Qt.lanes|=xt,ac|=xt;nt=nt.next}while(nt!==null&&nt!==g);if(Re===null?q=D:Re.next=xe,!mr(D,m.memoizedState)&&(En=!0,ut&&(y=Qu,y!==null)))throw y;m.memoizedState=D,m.baseState=q,m.baseQueue=Re,j.lastRenderedState=D}return L===null&&(j.lanes=0),[m.memoizedState,j.dispatch]}function x1(m){var g=vn(),y=g.queue;if(y===null)throw Error(s(311));y.lastRenderedReducer=m;var j=y.dispatch,L=y.pending,D=g.memoizedState;if(L!==null){y.pending=null;var q=L=L.next;do D=m(D,q.action),q=q.next;while(q!==L);mr(D,g.memoizedState)||(En=!0),g.memoizedState=D,g.baseQueue===null&&(g.baseState=D),y.lastRenderedState=D}return[D,j]}function JD(m,g,y){var j=Qt,L=vn(),D=ua;if(D){if(y===void 0)throw Error(s(407));y=y()}else y=g();var q=!mr((Pa||L).memoizedState,y);if(q&&(L.memoizedState=y,En=!0),L=L.queue,v1(a3.bind(null,j,L,m),[m]),L.getSnapshot!==g||q||An!==null&&An.memoizedState.tag&1){if(j.flags|=2048,am(9,{destroy:void 0},t3.bind(null,j,L,y,g),null),$a===null)throw Error(s(349));D||(Dl&127)!==0||e3(j,g,y)}return y}function e3(m,g,y){m.flags|=16384,m={getSnapshot:g,value:y},g=Qt.updateQueue,g===null?(g=c0(),Qt.updateQueue=g,g.stores=[m]):(y=g.stores,y===null?g.stores=[m]:y.push(m))}function t3(m,g,y,j){g.value=y,g.getSnapshot=j,n3(g)&&s3(m)}function a3(m,g,y){return y(function(){n3(g)&&s3(m)})}function n3(m){var g=m.getSnapshot;m=m.value;try{var y=g();return!mr(m,y)}catch{return!0}}function s3(m){var g=ld(m,2);g!==null&&qs(g,m,2)}function y1(m){var g=Ps();if(typeof m=="function"){var y=m;if(m=y(),pd){lt(!0);try{y()}finally{lt(!1)}}}return g.memoizedState=g.baseState=m,g.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ol,lastRenderedState:m},g}function r3(m,g,y,j){return m.baseState=y,p1(m,Pa,typeof j=="function"?j:Ol)}function ZZ(m,g,y,j,L){if(h0(m))throw Error(s(485));if(m=g.action,m!==null){var D={payload:L,action:m,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(q){D.listeners.push(q)}};F.T!==null?y(!0):D.isTransition=!1,j(D),y=g.pending,y===null?(D.next=g.pending=D,i3(g,D)):(D.next=y.next,g.pending=y.next=D)}}function i3(m,g){var y=g.action,j=g.payload,L=m.state;if(g.isTransition){var D=F.T,q={};F.T=q;try{var xe=y(L,j),Re=F.S;Re!==null&&Re(q,xe),l3(m,g,xe)}catch(nt){b1(m,g,nt)}finally{D!==null&&q.types!==null&&(D.types=q.types),F.T=D}}else try{D=y(L,j),l3(m,g,D)}catch(nt){b1(m,g,nt)}}function l3(m,g,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(j){o3(m,g,j)},function(j){return b1(m,g,j)}):o3(m,g,y)}function o3(m,g,y){g.status="fulfilled",g.value=y,c3(g),m.state=y,g=m.pending,g!==null&&(y=g.next,y===g?m.pending=null:(y=y.next,g.next=y,i3(m,y)))}function b1(m,g,y){var j=m.pending;if(m.pending=null,j!==null){j=j.next;do g.status="rejected",g.reason=y,c3(g),g=g.next;while(g!==j)}m.action=null}function c3(m){m=m.listeners;for(var g=0;g<m.length;g++)(0,m[g])()}function d3(m,g){return g}function u3(m,g){if(ua){var y=$a.formState;if(y!==null){e:{var j=Qt;if(ua){if(Wa){t:{for(var L=Wa,D=Ur;L.nodeType!==8;){if(!D){L=null;break t}if(L=Br(L.nextSibling),L===null){L=null;break t}}D=L.data,L=D==="F!"||D==="F"?L:null}if(L){Wa=Br(L.nextSibling),j=L.data==="F!";break e}}qo(j)}j=!1}j&&(g=y[0])}}return y=Ps(),y.memoizedState=y.baseState=g,j={pending:null,lanes:0,dispatch:null,lastRenderedReducer:d3,lastRenderedState:g},y.queue=j,y=k3.bind(null,Qt,j),j.dispatch=y,j=y1(!1),D=S1.bind(null,Qt,!1,j.queue),j=Ps(),L={state:g,dispatch:null,action:m,pending:null},j.queue=L,y=ZZ.bind(null,Qt,L,D,y),L.dispatch=y,j.memoizedState=m,[g,y,!1]}function m3(m){var g=vn();return f3(g,Pa,m)}function f3(m,g,y){if(g=p1(m,g,d3)[0],m=u0(Ol)[0],typeof g=="object"&&g!==null&&typeof g.then=="function")try{var j=fh(g)}catch(q){throw q===Xu?t0:q}else j=g;g=vn();var L=g.queue,D=L.dispatch;return y!==g.memoizedState&&(Qt.flags|=2048,am(9,{destroy:void 0},JZ.bind(null,L,y),null)),[j,D,m]}function JZ(m,g){m.action=g}function h3(m){var g=vn(),y=Pa;if(y!==null)return f3(g,y,m);vn(),g=g.memoizedState,y=vn();var j=y.queue.dispatch;return y.memoizedState=m,[g,j,!1]}function am(m,g,y,j){return m={tag:m,create:y,deps:j,inst:g,next:null},g=Qt.updateQueue,g===null&&(g=c0(),Qt.updateQueue=g),y=g.lastEffect,y===null?g.lastEffect=m.next=m:(j=y.next,y.next=m,m.next=j,g.lastEffect=m),m}function g3(){return vn().memoizedState}function m0(m,g,y,j){var L=Ps();Qt.flags|=m,L.memoizedState=am(1|g,{destroy:void 0},y,j===void 0?null:j)}function f0(m,g,y,j){var L=vn();j=j===void 0?null:j;var D=L.memoizedState.inst;Pa!==null&&j!==null&&d1(j,Pa.memoizedState.deps)?L.memoizedState=am(g,D,y,j):(Qt.flags|=m,L.memoizedState=am(1|g,D,y,j))}function p3(m,g){m0(8390656,8,m,g)}function v1(m,g){f0(2048,8,m,g)}function eJ(m){Qt.flags|=4;var g=Qt.updateQueue;if(g===null)g=c0(),Qt.updateQueue=g,g.events=[m];else{var y=g.events;y===null?g.events=[m]:y.push(m)}}function x3(m){var g=vn().memoizedState;return eJ({ref:g,nextImpl:m}),function(){if((ba&2)!==0)throw Error(s(440));return g.impl.apply(void 0,arguments)}}function y3(m,g){return f0(4,2,m,g)}function b3(m,g){return f0(4,4,m,g)}function v3(m,g){if(typeof g=="function"){m=m();var y=g(m);return function(){typeof y=="function"?y():g(null)}}if(g!=null)return m=m(),g.current=m,function(){g.current=null}}function w3(m,g,y){y=y!=null?y.concat([m]):null,f0(4,4,v3.bind(null,g,m),y)}function w1(){}function N3(m,g){var y=vn();g=g===void 0?null:g;var j=y.memoizedState;return g!==null&&d1(g,j[1])?j[0]:(y.memoizedState=[m,g],m)}function j3(m,g){var y=vn();g=g===void 0?null:g;var j=y.memoizedState;if(g!==null&&d1(g,j[1]))return j[0];if(j=m(),pd){lt(!0);try{m()}finally{lt(!1)}}return y.memoizedState=[j,g],j}function N1(m,g,y){return y===void 0||(Dl&1073741824)!==0&&(la&261930)===0?m.memoizedState=g:(m.memoizedState=y,m=CO(),Qt.lanes|=m,ac|=m,y)}function C3(m,g,y,j){return mr(y,g)?y:Ju.current!==null?(m=N1(m,y,j),mr(m,g)||(En=!0),m):(Dl&42)===0||(Dl&1073741824)!==0&&(la&261930)===0?(En=!0,m.memoizedState=y):(m=CO(),Qt.lanes|=m,ac|=m,g)}function S3(m,g,y,j,L){var D=ee.p;ee.p=D!==0&&8>D?D:8;var q=F.T,xe={};F.T=xe,S1(m,!1,g,y);try{var Re=L(),nt=F.S;if(nt!==null&&nt(xe,Re),Re!==null&&typeof Re=="object"&&typeof Re.then=="function"){var ut=KZ(Re,j);hh(m,g,ut,yr(m))}else hh(m,g,j,yr(m))}catch(xt){hh(m,g,{then:function(){},status:"rejected",reason:xt},yr())}finally{ee.p=D,q!==null&&xe.types!==null&&(q.types=xe.types),F.T=q}}function tJ(){}function j1(m,g,y,j){if(m.tag!==5)throw Error(s(476));var L=_3(m).queue;S3(m,L,g,V,y===null?tJ:function(){return A3(m),y(j)})}function _3(m){var g=m.memoizedState;if(g!==null)return g;g={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ol,lastRenderedState:V},next:null};var y={};return g.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ol,lastRenderedState:y},next:null},m.memoizedState=g,m=m.alternate,m!==null&&(m.memoizedState=g),g}function A3(m){var g=_3(m);g.next===null&&(g=m.alternate.memoizedState),hh(m,g.next.queue,{},yr())}function C1(){return us(Lh)}function E3(){return vn().memoizedState}function T3(){return vn().memoizedState}function aJ(m){for(var g=m.return;g!==null;){switch(g.tag){case 24:case 3:var y=yr();m=Qo(y);var j=Xo(g,m,y);j!==null&&(qs(j,g,y),ch(j,g,y)),g={cache:Jj()},m.payload=g;return}g=g.return}}function nJ(m,g,y){var j=yr();y={lane:j,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},h0(m)?L3(g,y):(y=Bj(m,g,y,j),y!==null&&(qs(y,m,j),P3(y,g,j)))}function k3(m,g,y){var j=yr();hh(m,g,y,j)}function hh(m,g,y,j){var L={lane:j,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null};if(h0(m))L3(g,L);else{var D=m.alternate;if(m.lanes===0&&(D===null||D.lanes===0)&&(D=g.lastRenderedReducer,D!==null))try{var q=g.lastRenderedState,xe=D(q,y);if(L.hasEagerState=!0,L.eagerState=xe,mr(xe,q))return Yx(m,g,L,0),$a===null&&qx(),!1}catch{}finally{}if(y=Bj(m,g,L,j),y!==null)return qs(y,m,j),P3(y,g,j),!0}return!1}function S1(m,g,y,j){if(j={lane:2,revertLane:nC(),gesture:null,action:j,hasEagerState:!1,eagerState:null,next:null},h0(m)){if(g)throw Error(s(479))}else g=Bj(m,y,j,2),g!==null&&qs(g,m,2)}function h0(m){var g=m.alternate;return m===Qt||g!==null&&g===Qt}function L3(m,g){em=l0=!0;var y=m.pending;y===null?g.next=g:(g.next=y.next,y.next=g),m.pending=g}function P3(m,g,y){if((y&4194048)!==0){var j=g.lanes;j&=m.pendingLanes,y|=j,g.lanes=y,jt(m,y)}}var gh={readContext:us,use:d0,useCallback:dn,useContext:dn,useEffect:dn,useImperativeHandle:dn,useLayoutEffect:dn,useInsertionEffect:dn,useMemo:dn,useReducer:dn,useRef:dn,useState:dn,useDebugValue:dn,useDeferredValue:dn,useTransition:dn,useSyncExternalStore:dn,useId:dn,useHostTransitionStatus:dn,useFormState:dn,useActionState:dn,useOptimistic:dn,useMemoCache:dn,useCacheRefresh:dn};gh.useEffectEvent=dn;var D3={readContext:us,use:d0,useCallback:function(m,g){return Ps().memoizedState=[m,g===void 0?null:g],m},useContext:us,useEffect:p3,useImperativeHandle:function(m,g,y){y=y!=null?y.concat([m]):null,m0(4194308,4,v3.bind(null,g,m),y)},useLayoutEffect:function(m,g){return m0(4194308,4,m,g)},useInsertionEffect:function(m,g){m0(4,2,m,g)},useMemo:function(m,g){var y=Ps();g=g===void 0?null:g;var j=m();if(pd){lt(!0);try{m()}finally{lt(!1)}}return y.memoizedState=[j,g],j},useReducer:function(m,g,y){var j=Ps();if(y!==void 0){var L=y(g);if(pd){lt(!0);try{y(g)}finally{lt(!1)}}}else L=g;return j.memoizedState=j.baseState=L,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:L},j.queue=m,m=m.dispatch=nJ.bind(null,Qt,m),[j.memoizedState,m]},useRef:function(m){var g=Ps();return m={current:m},g.memoizedState=m},useState:function(m){m=y1(m);var g=m.queue,y=k3.bind(null,Qt,g);return g.dispatch=y,[m.memoizedState,y]},useDebugValue:w1,useDeferredValue:function(m,g){var y=Ps();return N1(y,m,g)},useTransition:function(){var m=y1(!1);return m=S3.bind(null,Qt,m.queue,!0,!1),Ps().memoizedState=m,[!1,m]},useSyncExternalStore:function(m,g,y){var j=Qt,L=Ps();if(ua){if(y===void 0)throw Error(s(407));y=y()}else{if(y=g(),$a===null)throw Error(s(349));(la&127)!==0||e3(j,g,y)}L.memoizedState=y;var D={value:y,getSnapshot:g};return L.queue=D,p3(a3.bind(null,j,D,m),[m]),j.flags|=2048,am(9,{destroy:void 0},t3.bind(null,j,D,y,g),null),y},useId:function(){var m=Ps(),g=$a.identifierPrefix;if(ua){var y=zi,j=Ri;y=(j&~(1<<32-Ee(j)-1)).toString(32)+y,g="_"+g+"R_"+y,y=o0++,0<y&&(g+="H"+y.toString(32)),g+="_"}else y=QZ++,g="_"+g+"r_"+y.toString(32)+"_";return m.memoizedState=g},useHostTransitionStatus:C1,useFormState:u3,useActionState:u3,useOptimistic:function(m){var g=Ps();g.memoizedState=g.baseState=m;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return g.queue=y,g=S1.bind(null,Qt,!0,y),y.dispatch=g,[m,g]},useMemoCache:g1,useCacheRefresh:function(){return Ps().memoizedState=aJ.bind(null,Qt)},useEffectEvent:function(m){var g=Ps(),y={impl:m};return g.memoizedState=y,function(){if((ba&2)!==0)throw Error(s(440));return y.impl.apply(void 0,arguments)}}},_1={readContext:us,use:d0,useCallback:N3,useContext:us,useEffect:v1,useImperativeHandle:w3,useInsertionEffect:y3,useLayoutEffect:b3,useMemo:j3,useReducer:u0,useRef:g3,useState:function(){return u0(Ol)},useDebugValue:w1,useDeferredValue:function(m,g){var y=vn();return C3(y,Pa.memoizedState,m,g)},useTransition:function(){var m=u0(Ol)[0],g=vn().memoizedState;return[typeof m=="boolean"?m:fh(m),g]},useSyncExternalStore:JD,useId:E3,useHostTransitionStatus:C1,useFormState:m3,useActionState:m3,useOptimistic:function(m,g){var y=vn();return r3(y,Pa,m,g)},useMemoCache:g1,useCacheRefresh:T3};_1.useEffectEvent=x3;var O3={readContext:us,use:d0,useCallback:N3,useContext:us,useEffect:v1,useImperativeHandle:w3,useInsertionEffect:y3,useLayoutEffect:b3,useMemo:j3,useReducer:x1,useRef:g3,useState:function(){return x1(Ol)},useDebugValue:w1,useDeferredValue:function(m,g){var y=vn();return Pa===null?N1(y,m,g):C3(y,Pa.memoizedState,m,g)},useTransition:function(){var m=x1(Ol)[0],g=vn().memoizedState;return[typeof m=="boolean"?m:fh(m),g]},useSyncExternalStore:JD,useId:E3,useHostTransitionStatus:C1,useFormState:h3,useActionState:h3,useOptimistic:function(m,g){var y=vn();return Pa!==null?r3(y,Pa,m,g):(y.baseState=m,[m,y.queue.dispatch])},useMemoCache:g1,useCacheRefresh:T3};O3.useEffectEvent=x3;function A1(m,g,y,j){g=m.memoizedState,y=y(j,g),y=y==null?g:f({},g,y),m.memoizedState=y,m.lanes===0&&(m.updateQueue.baseState=y)}var E1={enqueueSetState:function(m,g,y){m=m._reactInternals;var j=yr(),L=Qo(j);L.payload=g,y!=null&&(L.callback=y),g=Xo(m,L,j),g!==null&&(qs(g,m,j),ch(g,m,j))},enqueueReplaceState:function(m,g,y){m=m._reactInternals;var j=yr(),L=Qo(j);L.tag=1,L.payload=g,y!=null&&(L.callback=y),g=Xo(m,L,j),g!==null&&(qs(g,m,j),ch(g,m,j))},enqueueForceUpdate:function(m,g){m=m._reactInternals;var y=yr(),j=Qo(y);j.tag=2,g!=null&&(j.callback=g),g=Xo(m,j,y),g!==null&&(qs(g,m,y),ch(g,m,y))}};function M3(m,g,y,j,L,D,q){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(j,D,q):g.prototype&&g.prototype.isPureReactComponent?!th(y,j)||!th(L,D):!0}function I3(m,g,y,j){m=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(y,j),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(y,j),g.state!==m&&E1.enqueueReplaceState(g,g.state,null)}function xd(m,g){var y=g;if("ref"in g){y={};for(var j in g)j!=="ref"&&(y[j]=g[j])}if(m=m.defaultProps){y===g&&(y=f({},y));for(var L in m)y[L]===void 0&&(y[L]=m[L])}return y}function $3(m){Vx(m)}function R3(m){console.error(m)}function z3(m){Vx(m)}function g0(m,g){try{var y=m.onUncaughtError;y(g.value,{componentStack:g.stack})}catch(j){setTimeout(function(){throw j})}}function U3(m,g,y){try{var j=m.onCaughtError;j(y.value,{componentStack:y.stack,errorBoundary:g.tag===1?g.stateNode:null})}catch(L){setTimeout(function(){throw L})}}function T1(m,g,y){return y=Qo(y),y.tag=3,y.payload={element:null},y.callback=function(){g0(m,g)},y}function F3(m){return m=Qo(m),m.tag=3,m}function B3(m,g,y,j){var L=y.type.getDerivedStateFromError;if(typeof L=="function"){var D=j.value;m.payload=function(){return L(D)},m.callback=function(){U3(g,y,j)}}var q=y.stateNode;q!==null&&typeof q.componentDidCatch=="function"&&(m.callback=function(){U3(g,y,j),typeof L!="function"&&(nc===null?nc=new Set([this]):nc.add(this));var xe=j.stack;this.componentDidCatch(j.value,{componentStack:xe!==null?xe:""})})}function sJ(m,g,y,j,L){if(y.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){if(g=y.alternate,g!==null&&Yu(g,y,L,!0),y=hr.current,y!==null){switch(y.tag){case 31:case 13:return Fr===null?A0():y.alternate===null&&un===0&&(un=3),y.flags&=-257,y.flags|=65536,y.lanes=L,j===a0?y.flags|=16384:(g=y.updateQueue,g===null?y.updateQueue=new Set([j]):g.add(j),eC(m,j,L)),!1;case 22:return y.flags|=65536,j===a0?y.flags|=16384:(g=y.updateQueue,g===null?(g={transitions:null,markerInstances:null,retryQueue:new Set([j])},y.updateQueue=g):(y=g.retryQueue,y===null?g.retryQueue=new Set([j]):y.add(j)),eC(m,j,L)),!1}throw Error(s(435,y.tag))}return eC(m,j,L),A0(),!1}if(ua)return g=hr.current,g!==null?((g.flags&65536)===0&&(g.flags|=256),g.flags|=65536,g.lanes=L,j!==Yj&&(m=Error(s(422),{cause:j}),sh($r(m,y)))):(j!==Yj&&(g=Error(s(423),{cause:j}),sh($r(g,y))),m=m.current.alternate,m.flags|=65536,L&=-L,m.lanes|=L,j=$r(j,y),L=T1(m.stateNode,j,L),r1(m,L),un!==4&&(un=2)),!1;var D=Error(s(520),{cause:j});if(D=$r(D,y),jh===null?jh=[D]:jh.push(D),un!==4&&(un=2),g===null)return!0;j=$r(j,y),y=g;do{switch(y.tag){case 3:return y.flags|=65536,m=L&-L,y.lanes|=m,m=T1(y.stateNode,j,m),r1(y,m),!1;case 1:if(g=y.type,D=y.stateNode,(y.flags&128)===0&&(typeof g.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(nc===null||!nc.has(D))))return y.flags|=65536,L&=-L,y.lanes|=L,L=F3(L),B3(L,m,y,j),r1(y,L),!1}y=y.return}while(y!==null);return!1}var k1=Error(s(461)),En=!1;function ms(m,g,y,j){g.child=m===null?VD(g,null,y,j):gd(g,m.child,y,j)}function H3(m,g,y,j,L){y=y.render;var D=g.ref;if("ref"in j){var q={};for(var xe in j)xe!=="ref"&&(q[xe]=j[xe])}else q=j;return ud(g),j=u1(m,g,y,q,D,L),xe=m1(),m!==null&&!En?(f1(m,g,L),Ml(m,g,L)):(ua&&xe&&Vj(g),g.flags|=1,ms(m,g,j,L),g.child)}function G3(m,g,y,j,L){if(m===null){var D=y.type;return typeof D=="function"&&!Hj(D)&&D.defaultProps===void 0&&y.compare===null?(g.tag=15,g.type=D,W3(m,g,D,j,L)):(m=Qx(y.type,null,j,g,g.mode,L),m.ref=g.ref,m.return=g,g.child=m)}if(D=m.child,!R1(m,L)){var q=D.memoizedProps;if(y=y.compare,y=y!==null?y:th,y(q,j)&&m.ref===g.ref)return Ml(m,g,L)}return g.flags|=1,m=Tl(D,j),m.ref=g.ref,m.return=g,g.child=m}function W3(m,g,y,j,L){if(m!==null){var D=m.memoizedProps;if(th(D,j)&&m.ref===g.ref)if(En=!1,g.pendingProps=j=D,R1(m,L))(m.flags&131072)!==0&&(En=!0);else return g.lanes=m.lanes,Ml(m,g,L)}return L1(m,g,y,j,L)}function V3(m,g,y,j){var L=j.children,D=m!==null?m.memoizedState:null;if(m===null&&g.stateNode===null&&(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),j.mode==="hidden"){if((g.flags&128)!==0){if(D=D!==null?D.baseLanes|y:y,m!==null){for(j=g.child=m.child,L=0;j!==null;)L=L|j.lanes|j.childLanes,j=j.sibling;j=L&~D}else j=0,g.child=null;return q3(m,g,D,y,j)}if((y&536870912)!==0)g.memoizedState={baseLanes:0,cachePool:null},m!==null&&e0(g,D!==null?D.cachePool:null),D!==null?KD(g,D):l1(),QD(g);else return j=g.lanes=536870912,q3(m,g,D!==null?D.baseLanes|y:y,y,j)}else D!==null?(e0(g,D.cachePool),KD(g,D),Jo(),g.memoizedState=null):(m!==null&&e0(g,null),l1(),Jo());return ms(m,g,L,y),g.child}function ph(m,g){return m!==null&&m.tag===22||g.stateNode!==null||(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.sibling}function q3(m,g,y,j,L){var D=t1();return D=D===null?null:{parent:_n._currentValue,pool:D},g.memoizedState={baseLanes:y,cachePool:D},m!==null&&e0(g,null),l1(),QD(g),m!==null&&Yu(m,g,j,!0),g.childLanes=L,null}function p0(m,g){return g=y0({mode:g.mode,children:g.children},m.mode),g.ref=m.ref,m.child=g,g.return=m,g}function Y3(m,g,y){return gd(g,m.child,null,y),m=p0(g,g.pendingProps),m.flags|=2,gr(g),g.memoizedState=null,m}function rJ(m,g,y){var j=g.pendingProps,L=(g.flags&128)!==0;if(g.flags&=-129,m===null){if(ua){if(j.mode==="hidden")return m=p0(g,j),g.lanes=536870912,ph(null,m);if(c1(g),(m=Wa)?(m=i5(m,Ur),m=m!==null&&m.data==="&"?m:null,m!==null&&(g.memoizedState={dehydrated:m,treeContext:Wo!==null?{id:Ri,overflow:zi}:null,retryLane:536870912,hydrationErrors:null},y=LD(m),y.return=g,g.child=y,ds=g,Wa=null)):m=null,m===null)throw qo(g);return g.lanes=536870912,null}return p0(g,j)}var D=m.memoizedState;if(D!==null){var q=D.dehydrated;if(c1(g),L)if(g.flags&256)g.flags&=-257,g=Y3(m,g,y);else if(g.memoizedState!==null)g.child=m.child,g.flags|=128,g=null;else throw Error(s(558));else if(En||Yu(m,g,y,!1),L=(y&m.childLanes)!==0,En||L){if(j=$a,j!==null&&(q=ke(j,y),q!==0&&q!==D.retryLane))throw D.retryLane=q,ld(m,q),qs(j,m,q),k1;A0(),g=Y3(m,g,y)}else m=D.treeContext,Wa=Br(q.nextSibling),ds=g,ua=!0,Vo=null,Ur=!1,m!==null&&OD(g,m),g=p0(g,j),g.flags|=4096;return g}return m=Tl(m.child,{mode:j.mode,children:j.children}),m.ref=g.ref,g.child=m,m.return=g,m}function x0(m,g){var y=g.ref;if(y===null)m!==null&&m.ref!==null&&(g.flags|=4194816);else{if(typeof y!="function"&&typeof y!="object")throw Error(s(284));(m===null||m.ref!==y)&&(g.flags|=4194816)}}function L1(m,g,y,j,L){return ud(g),y=u1(m,g,y,j,void 0,L),j=m1(),m!==null&&!En?(f1(m,g,L),Ml(m,g,L)):(ua&&j&&Vj(g),g.flags|=1,ms(m,g,y,L),g.child)}function K3(m,g,y,j,L,D){return ud(g),g.updateQueue=null,y=ZD(g,j,y,L),XD(m),j=m1(),m!==null&&!En?(f1(m,g,D),Ml(m,g,D)):(ua&&j&&Vj(g),g.flags|=1,ms(m,g,y,D),g.child)}function Q3(m,g,y,j,L){if(ud(g),g.stateNode===null){var D=Gu,q=y.contextType;typeof q=="object"&&q!==null&&(D=us(q)),D=new y(j,D),g.memoizedState=D.state!==null&&D.state!==void 0?D.state:null,D.updater=E1,g.stateNode=D,D._reactInternals=g,D=g.stateNode,D.props=j,D.state=g.memoizedState,D.refs={},n1(g),q=y.contextType,D.context=typeof q=="object"&&q!==null?us(q):Gu,D.state=g.memoizedState,q=y.getDerivedStateFromProps,typeof q=="function"&&(A1(g,y,q,j),D.state=g.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof D.getSnapshotBeforeUpdate=="function"||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(q=D.state,typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount(),q!==D.state&&E1.enqueueReplaceState(D,D.state,null),uh(g,j,D,L),dh(),D.state=g.memoizedState),typeof D.componentDidMount=="function"&&(g.flags|=4194308),j=!0}else if(m===null){D=g.stateNode;var xe=g.memoizedProps,Re=xd(y,xe);D.props=Re;var nt=D.context,ut=y.contextType;q=Gu,typeof ut=="object"&&ut!==null&&(q=us(ut));var xt=y.getDerivedStateFromProps;ut=typeof xt=="function"||typeof D.getSnapshotBeforeUpdate=="function",xe=g.pendingProps!==xe,ut||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(xe||nt!==q)&&I3(g,D,j,q),Ko=!1;var rt=g.memoizedState;D.state=rt,uh(g,j,D,L),dh(),nt=g.memoizedState,xe||rt!==nt||Ko?(typeof xt=="function"&&(A1(g,y,xt,j),nt=g.memoizedState),(Re=Ko||M3(g,y,Re,j,rt,nt,q))?(ut||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(g.flags|=4194308)):(typeof D.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=j,g.memoizedState=nt),D.props=j,D.state=nt,D.context=q,j=Re):(typeof D.componentDidMount=="function"&&(g.flags|=4194308),j=!1)}else{D=g.stateNode,s1(m,g),q=g.memoizedProps,ut=xd(y,q),D.props=ut,xt=g.pendingProps,rt=D.context,nt=y.contextType,Re=Gu,typeof nt=="object"&&nt!==null&&(Re=us(nt)),xe=y.getDerivedStateFromProps,(nt=typeof xe=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(q!==xt||rt!==Re)&&I3(g,D,j,Re),Ko=!1,rt=g.memoizedState,D.state=rt,uh(g,j,D,L),dh();var ct=g.memoizedState;q!==xt||rt!==ct||Ko||m!==null&&m.dependencies!==null&&Zx(m.dependencies)?(typeof xe=="function"&&(A1(g,y,xe,j),ct=g.memoizedState),(ut=Ko||M3(g,y,ut,j,rt,ct,Re)||m!==null&&m.dependencies!==null&&Zx(m.dependencies))?(nt||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(j,ct,Re),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(j,ct,Re)),typeof D.componentDidUpdate=="function"&&(g.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof D.componentDidUpdate!="function"||q===m.memoizedProps&&rt===m.memoizedState||(g.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||q===m.memoizedProps&&rt===m.memoizedState||(g.flags|=1024),g.memoizedProps=j,g.memoizedState=ct),D.props=j,D.state=ct,D.context=Re,j=ut):(typeof D.componentDidUpdate!="function"||q===m.memoizedProps&&rt===m.memoizedState||(g.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||q===m.memoizedProps&&rt===m.memoizedState||(g.flags|=1024),j=!1)}return D=j,x0(m,g),j=(g.flags&128)!==0,D||j?(D=g.stateNode,y=j&&typeof y.getDerivedStateFromError!="function"?null:D.render(),g.flags|=1,m!==null&&j?(g.child=gd(g,m.child,null,L),g.child=gd(g,null,y,L)):ms(m,g,y,L),g.memoizedState=D.state,m=g.child):m=Ml(m,g,L),m}function X3(m,g,y,j){return cd(),g.flags|=256,ms(m,g,y,j),g.child}var P1={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function D1(m){return{baseLanes:m,cachePool:UD()}}function O1(m,g,y){return m=m!==null?m.childLanes&~y:0,g&&(m|=xr),m}function Z3(m,g,y){var j=g.pendingProps,L=!1,D=(g.flags&128)!==0,q;if((q=D)||(q=m!==null&&m.memoizedState===null?!1:(bn.current&2)!==0),q&&(L=!0,g.flags&=-129),q=(g.flags&32)!==0,g.flags&=-33,m===null){if(ua){if(L?Zo(g):Jo(),(m=Wa)?(m=i5(m,Ur),m=m!==null&&m.data!=="&"?m:null,m!==null&&(g.memoizedState={dehydrated:m,treeContext:Wo!==null?{id:Ri,overflow:zi}:null,retryLane:536870912,hydrationErrors:null},y=LD(m),y.return=g,g.child=y,ds=g,Wa=null)):m=null,m===null)throw qo(g);return pC(m)?g.lanes=32:g.lanes=536870912,null}var xe=j.children;return j=j.fallback,L?(Jo(),L=g.mode,xe=y0({mode:"hidden",children:xe},L),j=od(j,L,y,null),xe.return=g,j.return=g,xe.sibling=j,g.child=xe,j=g.child,j.memoizedState=D1(y),j.childLanes=O1(m,q,y),g.memoizedState=P1,ph(null,j)):(Zo(g),M1(g,xe))}var Re=m.memoizedState;if(Re!==null&&(xe=Re.dehydrated,xe!==null)){if(D)g.flags&256?(Zo(g),g.flags&=-257,g=I1(m,g,y)):g.memoizedState!==null?(Jo(),g.child=m.child,g.flags|=128,g=null):(Jo(),xe=j.fallback,L=g.mode,j=y0({mode:"visible",children:j.children},L),xe=od(xe,L,y,null),xe.flags|=2,j.return=g,xe.return=g,j.sibling=xe,g.child=j,gd(g,m.child,null,y),j=g.child,j.memoizedState=D1(y),j.childLanes=O1(m,q,y),g.memoizedState=P1,g=ph(null,j));else if(Zo(g),pC(xe)){if(q=xe.nextSibling&&xe.nextSibling.dataset,q)var nt=q.dgst;q=nt,j=Error(s(419)),j.stack="",j.digest=q,sh({value:j,source:null,stack:null}),g=I1(m,g,y)}else if(En||Yu(m,g,y,!1),q=(y&m.childLanes)!==0,En||q){if(q=$a,q!==null&&(j=ke(q,y),j!==0&&j!==Re.retryLane))throw Re.retryLane=j,ld(m,j),qs(q,m,j),k1;gC(xe)||A0(),g=I1(m,g,y)}else gC(xe)?(g.flags|=192,g.child=m.child,g=null):(m=Re.treeContext,Wa=Br(xe.nextSibling),ds=g,ua=!0,Vo=null,Ur=!1,m!==null&&OD(g,m),g=M1(g,j.children),g.flags|=4096);return g}return L?(Jo(),xe=j.fallback,L=g.mode,Re=m.child,nt=Re.sibling,j=Tl(Re,{mode:"hidden",children:j.children}),j.subtreeFlags=Re.subtreeFlags&65011712,nt!==null?xe=Tl(nt,xe):(xe=od(xe,L,y,null),xe.flags|=2),xe.return=g,j.return=g,j.sibling=xe,g.child=j,ph(null,j),j=g.child,xe=m.child.memoizedState,xe===null?xe=D1(y):(L=xe.cachePool,L!==null?(Re=_n._currentValue,L=L.parent!==Re?{parent:Re,pool:Re}:L):L=UD(),xe={baseLanes:xe.baseLanes|y,cachePool:L}),j.memoizedState=xe,j.childLanes=O1(m,q,y),g.memoizedState=P1,ph(m.child,j)):(Zo(g),y=m.child,m=y.sibling,y=Tl(y,{mode:"visible",children:j.children}),y.return=g,y.sibling=null,m!==null&&(q=g.deletions,q===null?(g.deletions=[m],g.flags|=16):q.push(m)),g.child=y,g.memoizedState=null,y)}function M1(m,g){return g=y0({mode:"visible",children:g},m.mode),g.return=m,m.child=g}function y0(m,g){return m=fr(22,m,null,g),m.lanes=0,m}function I1(m,g,y){return gd(g,m.child,null,y),m=M1(g,g.pendingProps.children),m.flags|=2,g.memoizedState=null,m}function J3(m,g,y){m.lanes|=g;var j=m.alternate;j!==null&&(j.lanes|=g),Xj(m.return,g,y)}function $1(m,g,y,j,L,D){var q=m.memoizedState;q===null?m.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:j,tail:y,tailMode:L,treeForkCount:D}:(q.isBackwards=g,q.rendering=null,q.renderingStartTime=0,q.last=j,q.tail=y,q.tailMode=L,q.treeForkCount=D)}function eO(m,g,y){var j=g.pendingProps,L=j.revealOrder,D=j.tail;j=j.children;var q=bn.current,xe=(q&2)!==0;if(xe?(q=q&1|2,g.flags|=128):q&=1,ve(bn,q),ms(m,g,j,y),j=ua?nh:0,!xe&&m!==null&&(m.flags&128)!==0)e:for(m=g.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&J3(m,y,g);else if(m.tag===19)J3(m,y,g);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===g)break e;for(;m.sibling===null;){if(m.return===null||m.return===g)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}switch(L){case"forwards":for(y=g.child,L=null;y!==null;)m=y.alternate,m!==null&&i0(m)===null&&(L=y),y=y.sibling;y=L,y===null?(L=g.child,g.child=null):(L=y.sibling,y.sibling=null),$1(g,!1,L,y,D,j);break;case"backwards":case"unstable_legacy-backwards":for(y=null,L=g.child,g.child=null;L!==null;){if(m=L.alternate,m!==null&&i0(m)===null){g.child=L;break}m=L.sibling,L.sibling=y,y=L,L=m}$1(g,!0,y,null,D,j);break;case"together":$1(g,!1,null,null,void 0,j);break;default:g.memoizedState=null}return g.child}function Ml(m,g,y){if(m!==null&&(g.dependencies=m.dependencies),ac|=g.lanes,(y&g.childLanes)===0)if(m!==null){if(Yu(m,g,y,!1),(y&g.childLanes)===0)return null}else return null;if(m!==null&&g.child!==m.child)throw Error(s(153));if(g.child!==null){for(m=g.child,y=Tl(m,m.pendingProps),g.child=y,y.return=g;m.sibling!==null;)m=m.sibling,y=y.sibling=Tl(m,m.pendingProps),y.return=g;y.sibling=null}return g.child}function R1(m,g){return(m.lanes&g)!==0?!0:(m=m.dependencies,!!(m!==null&&Zx(m)))}function iJ(m,g,y){switch(g.tag){case 3:Fe(g,g.stateNode.containerInfo),Yo(g,_n,m.memoizedState.cache),cd();break;case 27:case 5:Be(g);break;case 4:Fe(g,g.stateNode.containerInfo);break;case 10:Yo(g,g.type,g.memoizedProps.value);break;case 31:if(g.memoizedState!==null)return g.flags|=128,c1(g),null;break;case 13:var j=g.memoizedState;if(j!==null)return j.dehydrated!==null?(Zo(g),g.flags|=128,null):(y&g.child.childLanes)!==0?Z3(m,g,y):(Zo(g),m=Ml(m,g,y),m!==null?m.sibling:null);Zo(g);break;case 19:var L=(m.flags&128)!==0;if(j=(y&g.childLanes)!==0,j||(Yu(m,g,y,!1),j=(y&g.childLanes)!==0),L){if(j)return eO(m,g,y);g.flags|=128}if(L=g.memoizedState,L!==null&&(L.rendering=null,L.tail=null,L.lastEffect=null),ve(bn,bn.current),j)break;return null;case 22:return g.lanes=0,V3(m,g,y,g.pendingProps);case 24:Yo(g,_n,m.memoizedState.cache)}return Ml(m,g,y)}function tO(m,g,y){if(m!==null)if(m.memoizedProps!==g.pendingProps)En=!0;else{if(!R1(m,y)&&(g.flags&128)===0)return En=!1,iJ(m,g,y);En=(m.flags&131072)!==0}else En=!1,ua&&(g.flags&1048576)!==0&&DD(g,nh,g.index);switch(g.lanes=0,g.tag){case 16:e:{var j=g.pendingProps;if(m=fd(g.elementType),g.type=m,typeof m=="function")Hj(m)?(j=xd(m,j),g.tag=1,g=Q3(null,g,m,j,y)):(g.tag=0,g=L1(null,g,m,j,y));else{if(m!=null){var L=m.$$typeof;if(L===A){g.tag=11,g=H3(null,g,m,j,y);break e}else if(L===T){g.tag=14,g=G3(null,g,m,j,y);break e}}throw g=B(m)||m,Error(s(306,g,""))}}return g;case 0:return L1(m,g,g.type,g.pendingProps,y);case 1:return j=g.type,L=xd(j,g.pendingProps),Q3(m,g,j,L,y);case 3:e:{if(Fe(g,g.stateNode.containerInfo),m===null)throw Error(s(387));j=g.pendingProps;var D=g.memoizedState;L=D.element,s1(m,g),uh(g,j,null,y);var q=g.memoizedState;if(j=q.cache,Yo(g,_n,j),j!==D.cache&&Zj(g,[_n],y,!0),dh(),j=q.element,D.isDehydrated)if(D={element:j,isDehydrated:!1,cache:q.cache},g.updateQueue.baseState=D,g.memoizedState=D,g.flags&256){g=X3(m,g,j,y);break e}else if(j!==L){L=$r(Error(s(424)),g),sh(L),g=X3(m,g,j,y);break e}else{switch(m=g.stateNode.containerInfo,m.nodeType){case 9:m=m.body;break;default:m=m.nodeName==="HTML"?m.ownerDocument.body:m}for(Wa=Br(m.firstChild),ds=g,ua=!0,Vo=null,Ur=!0,y=VD(g,null,j,y),g.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling}else{if(cd(),j===L){g=Ml(m,g,y);break e}ms(m,g,j,y)}g=g.child}return g;case 26:return x0(m,g),m===null?(y=m5(g.type,null,g.pendingProps,null))?g.memoizedState=y:ua||(y=g.type,m=g.pendingProps,j=O0(Ne.current).createElement(y),j[Ge]=g,j[ue]=m,fs(j,y,m),zn(j),g.stateNode=j):g.memoizedState=m5(g.type,m.memoizedProps,g.pendingProps,m.memoizedState),null;case 27:return Be(g),m===null&&ua&&(j=g.stateNode=c5(g.type,g.pendingProps,Ne.current),ds=g,Ur=!0,L=Wa,lc(g.type)?(xC=L,Wa=Br(j.firstChild)):Wa=L),ms(m,g,g.pendingProps.children,y),x0(m,g),m===null&&(g.flags|=4194304),g.child;case 5:return m===null&&ua&&((L=j=Wa)&&(j=IJ(j,g.type,g.pendingProps,Ur),j!==null?(g.stateNode=j,ds=g,Wa=Br(j.firstChild),Ur=!1,L=!0):L=!1),L||qo(g)),Be(g),L=g.type,D=g.pendingProps,q=m!==null?m.memoizedProps:null,j=D.children,mC(L,D)?j=null:q!==null&&mC(L,q)&&(g.flags|=32),g.memoizedState!==null&&(L=u1(m,g,XZ,null,null,y),Lh._currentValue=L),x0(m,g),ms(m,g,j,y),g.child;case 6:return m===null&&ua&&((m=y=Wa)&&(y=$J(y,g.pendingProps,Ur),y!==null?(g.stateNode=y,ds=g,Wa=null,m=!0):m=!1),m||qo(g)),null;case 13:return Z3(m,g,y);case 4:return Fe(g,g.stateNode.containerInfo),j=g.pendingProps,m===null?g.child=gd(g,null,j,y):ms(m,g,j,y),g.child;case 11:return H3(m,g,g.type,g.pendingProps,y);case 7:return ms(m,g,g.pendingProps,y),g.child;case 8:return ms(m,g,g.pendingProps.children,y),g.child;case 12:return ms(m,g,g.pendingProps.children,y),g.child;case 10:return j=g.pendingProps,Yo(g,g.type,j.value),ms(m,g,j.children,y),g.child;case 9:return L=g.type._context,j=g.pendingProps.children,ud(g),L=us(L),j=j(L),g.flags|=1,ms(m,g,j,y),g.child;case 14:return G3(m,g,g.type,g.pendingProps,y);case 15:return W3(m,g,g.type,g.pendingProps,y);case 19:return eO(m,g,y);case 31:return rJ(m,g,y);case 22:return V3(m,g,y,g.pendingProps);case 24:return ud(g),j=us(_n),m===null?(L=t1(),L===null&&(L=$a,D=Jj(),L.pooledCache=D,D.refCount++,D!==null&&(L.pooledCacheLanes|=y),L=D),g.memoizedState={parent:j,cache:L},n1(g),Yo(g,_n,L)):((m.lanes&y)!==0&&(s1(m,g),uh(g,null,null,y),dh()),L=m.memoizedState,D=g.memoizedState,L.parent!==j?(L={parent:j,cache:j},g.memoizedState=L,g.lanes===0&&(g.memoizedState=g.updateQueue.baseState=L),Yo(g,_n,j)):(j=D.cache,Yo(g,_n,j),j!==L.cache&&Zj(g,[_n],y,!0))),ms(m,g,g.pendingProps.children,y),g.child;case 29:throw g.pendingProps}throw Error(s(156,g.tag))}function Il(m){m.flags|=4}function z1(m,g,y,j,L){if((g=(m.mode&32)!==0)&&(g=!1),g){if(m.flags|=16777216,(L&335544128)===L)if(m.stateNode.complete)m.flags|=8192;else if(EO())m.flags|=8192;else throw hd=a0,a1}else m.flags&=-16777217}function aO(m,g){if(g.type!=="stylesheet"||(g.state.loading&4)!==0)m.flags&=-16777217;else if(m.flags|=16777216,!x5(g))if(EO())m.flags|=8192;else throw hd=a0,a1}function b0(m,g){g!==null&&(m.flags|=4),m.flags&16384&&(g=m.tag!==22?J():536870912,m.lanes|=g,im|=g)}function xh(m,g){if(!ua)switch(m.tailMode){case"hidden":g=m.tail;for(var y=null;g!==null;)g.alternate!==null&&(y=g),g=g.sibling;y===null?m.tail=null:y.sibling=null;break;case"collapsed":y=m.tail;for(var j=null;y!==null;)y.alternate!==null&&(j=y),y=y.sibling;j===null?g||m.tail===null?m.tail=null:m.tail.sibling=null:j.sibling=null}}function Va(m){var g=m.alternate!==null&&m.alternate.child===m.child,y=0,j=0;if(g)for(var L=m.child;L!==null;)y|=L.lanes|L.childLanes,j|=L.subtreeFlags&65011712,j|=L.flags&65011712,L.return=m,L=L.sibling;else for(L=m.child;L!==null;)y|=L.lanes|L.childLanes,j|=L.subtreeFlags,j|=L.flags,L.return=m,L=L.sibling;return m.subtreeFlags|=j,m.childLanes=y,g}function lJ(m,g,y){var j=g.pendingProps;switch(qj(g),g.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Va(g),null;case 1:return Va(g),null;case 3:return y=g.stateNode,j=null,m!==null&&(j=m.memoizedState.cache),g.memoizedState.cache!==j&&(g.flags|=2048),Pl(_n),me(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(m===null||m.child===null)&&(qu(g)?Il(g):m===null||m.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,Kj())),Va(g),null;case 26:var L=g.type,D=g.memoizedState;return m===null?(Il(g),D!==null?(Va(g),aO(g,D)):(Va(g),z1(g,L,null,j,y))):D?D!==m.memoizedState?(Il(g),Va(g),aO(g,D)):(Va(g),g.flags&=-16777217):(m=m.memoizedProps,m!==j&&Il(g),Va(g),z1(g,L,m,j,y)),null;case 27:if(Pe(g),y=Ne.current,L=g.type,m!==null&&g.stateNode!=null)m.memoizedProps!==j&&Il(g);else{if(!j){if(g.stateNode===null)throw Error(s(166));return Va(g),null}m=X.current,qu(g)?MD(g):(m=c5(L,j,y),g.stateNode=m,Il(g))}return Va(g),null;case 5:if(Pe(g),L=g.type,m!==null&&g.stateNode!=null)m.memoizedProps!==j&&Il(g);else{if(!j){if(g.stateNode===null)throw Error(s(166));return Va(g),null}if(D=X.current,qu(g))MD(g);else{var q=O0(Ne.current);switch(D){case 1:D=q.createElementNS("http://www.w3.org/2000/svg",L);break;case 2:D=q.createElementNS("http://www.w3.org/1998/Math/MathML",L);break;default:switch(L){case"svg":D=q.createElementNS("http://www.w3.org/2000/svg",L);break;case"math":D=q.createElementNS("http://www.w3.org/1998/Math/MathML",L);break;case"script":D=q.createElement("div"),D.innerHTML="<script><\/script>",D=D.removeChild(D.firstChild);break;case"select":D=typeof j.is=="string"?q.createElement("select",{is:j.is}):q.createElement("select"),j.multiple?D.multiple=!0:j.size&&(D.size=j.size);break;default:D=typeof j.is=="string"?q.createElement(L,{is:j.is}):q.createElement(L)}}D[Ge]=g,D[ue]=j;e:for(q=g.child;q!==null;){if(q.tag===5||q.tag===6)D.appendChild(q.stateNode);else if(q.tag!==4&&q.tag!==27&&q.child!==null){q.child.return=q,q=q.child;continue}if(q===g)break e;for(;q.sibling===null;){if(q.return===null||q.return===g)break e;q=q.return}q.sibling.return=q.return,q=q.sibling}g.stateNode=D;e:switch(fs(D,L,j),L){case"button":case"input":case"select":case"textarea":j=!!j.autoFocus;break e;case"img":j=!0;break e;default:j=!1}j&&Il(g)}}return Va(g),z1(g,g.type,m===null?null:m.memoizedProps,g.pendingProps,y),null;case 6:if(m&&g.stateNode!=null)m.memoizedProps!==j&&Il(g);else{if(typeof j!="string"&&g.stateNode===null)throw Error(s(166));if(m=Ne.current,qu(g)){if(m=g.stateNode,y=g.memoizedProps,j=null,L=ds,L!==null)switch(L.tag){case 27:case 5:j=L.memoizedProps}m[Ge]=g,m=!!(m.nodeValue===y||j!==null&&j.suppressHydrationWarning===!0||ZO(m.nodeValue,y)),m||qo(g,!0)}else m=O0(m).createTextNode(j),m[Ge]=g,g.stateNode=m}return Va(g),null;case 31:if(y=g.memoizedState,m===null||m.memoizedState!==null){if(j=qu(g),y!==null){if(m===null){if(!j)throw Error(s(318));if(m=g.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(557));m[Ge]=g}else cd(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;Va(g),m=!1}else y=Kj(),m!==null&&m.memoizedState!==null&&(m.memoizedState.hydrationErrors=y),m=!0;if(!m)return g.flags&256?(gr(g),g):(gr(g),null);if((g.flags&128)!==0)throw Error(s(558))}return Va(g),null;case 13:if(j=g.memoizedState,m===null||m.memoizedState!==null&&m.memoizedState.dehydrated!==null){if(L=qu(g),j!==null&&j.dehydrated!==null){if(m===null){if(!L)throw Error(s(318));if(L=g.memoizedState,L=L!==null?L.dehydrated:null,!L)throw Error(s(317));L[Ge]=g}else cd(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;Va(g),L=!1}else L=Kj(),m!==null&&m.memoizedState!==null&&(m.memoizedState.hydrationErrors=L),L=!0;if(!L)return g.flags&256?(gr(g),g):(gr(g),null)}return gr(g),(g.flags&128)!==0?(g.lanes=y,g):(y=j!==null,m=m!==null&&m.memoizedState!==null,y&&(j=g.child,L=null,j.alternate!==null&&j.alternate.memoizedState!==null&&j.alternate.memoizedState.cachePool!==null&&(L=j.alternate.memoizedState.cachePool.pool),D=null,j.memoizedState!==null&&j.memoizedState.cachePool!==null&&(D=j.memoizedState.cachePool.pool),D!==L&&(j.flags|=2048)),y!==m&&y&&(g.child.flags|=8192),b0(g,g.updateQueue),Va(g),null);case 4:return me(),m===null&&lC(g.stateNode.containerInfo),Va(g),null;case 10:return Pl(g.type),Va(g),null;case 19:if(R(bn),j=g.memoizedState,j===null)return Va(g),null;if(L=(g.flags&128)!==0,D=j.rendering,D===null)if(L)xh(j,!1);else{if(un!==0||m!==null&&(m.flags&128)!==0)for(m=g.child;m!==null;){if(D=i0(m),D!==null){for(g.flags|=128,xh(j,!1),m=D.updateQueue,g.updateQueue=m,b0(g,m),g.subtreeFlags=0,m=y,y=g.child;y!==null;)kD(y,m),y=y.sibling;return ve(bn,bn.current&1|2),ua&&kl(g,j.treeForkCount),g.child}m=m.sibling}j.tail!==null&&he()>C0&&(g.flags|=128,L=!0,xh(j,!1),g.lanes=4194304)}else{if(!L)if(m=i0(D),m!==null){if(g.flags|=128,L=!0,m=m.updateQueue,g.updateQueue=m,b0(g,m),xh(j,!0),j.tail===null&&j.tailMode==="hidden"&&!D.alternate&&!ua)return Va(g),null}else 2*he()-j.renderingStartTime>C0&&y!==536870912&&(g.flags|=128,L=!0,xh(j,!1),g.lanes=4194304);j.isBackwards?(D.sibling=g.child,g.child=D):(m=j.last,m!==null?m.sibling=D:g.child=D,j.last=D)}return j.tail!==null?(m=j.tail,j.rendering=m,j.tail=m.sibling,j.renderingStartTime=he(),m.sibling=null,y=bn.current,ve(bn,L?y&1|2:y&1),ua&&kl(g,j.treeForkCount),m):(Va(g),null);case 22:case 23:return gr(g),o1(),j=g.memoizedState!==null,m!==null?m.memoizedState!==null!==j&&(g.flags|=8192):j&&(g.flags|=8192),j?(y&536870912)!==0&&(g.flags&128)===0&&(Va(g),g.subtreeFlags&6&&(g.flags|=8192)):Va(g),y=g.updateQueue,y!==null&&b0(g,y.retryQueue),y=null,m!==null&&m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(y=m.memoizedState.cachePool.pool),j=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(j=g.memoizedState.cachePool.pool),j!==y&&(g.flags|=2048),m!==null&&R(md),null;case 24:return y=null,m!==null&&(y=m.memoizedState.cache),g.memoizedState.cache!==y&&(g.flags|=2048),Pl(_n),Va(g),null;case 25:return null;case 30:return null}throw Error(s(156,g.tag))}function oJ(m,g){switch(qj(g),g.tag){case 1:return m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 3:return Pl(_n),me(),m=g.flags,(m&65536)!==0&&(m&128)===0?(g.flags=m&-65537|128,g):null;case 26:case 27:case 5:return Pe(g),null;case 31:if(g.memoizedState!==null){if(gr(g),g.alternate===null)throw Error(s(340));cd()}return m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 13:if(gr(g),m=g.memoizedState,m!==null&&m.dehydrated!==null){if(g.alternate===null)throw Error(s(340));cd()}return m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 19:return R(bn),null;case 4:return me(),null;case 10:return Pl(g.type),null;case 22:case 23:return gr(g),o1(),m!==null&&R(md),m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 24:return Pl(_n),null;case 25:return null;default:return null}}function nO(m,g){switch(qj(g),g.tag){case 3:Pl(_n),me();break;case 26:case 27:case 5:Pe(g);break;case 4:me();break;case 31:g.memoizedState!==null&&gr(g);break;case 13:gr(g);break;case 19:R(bn);break;case 10:Pl(g.type);break;case 22:case 23:gr(g),o1(),m!==null&&R(md);break;case 24:Pl(_n)}}function yh(m,g){try{var y=g.updateQueue,j=y!==null?y.lastEffect:null;if(j!==null){var L=j.next;y=L;do{if((y.tag&m)===m){j=void 0;var D=y.create,q=y.inst;j=D(),q.destroy=j}y=y.next}while(y!==L)}}catch(xe){Sa(g,g.return,xe)}}function ec(m,g,y){try{var j=g.updateQueue,L=j!==null?j.lastEffect:null;if(L!==null){var D=L.next;j=D;do{if((j.tag&m)===m){var q=j.inst,xe=q.destroy;if(xe!==void 0){q.destroy=void 0,L=g;var Re=y,nt=xe;try{nt()}catch(ut){Sa(L,Re,ut)}}}j=j.next}while(j!==D)}}catch(ut){Sa(g,g.return,ut)}}function sO(m){var g=m.updateQueue;if(g!==null){var y=m.stateNode;try{YD(g,y)}catch(j){Sa(m,m.return,j)}}}function rO(m,g,y){y.props=xd(m.type,m.memoizedProps),y.state=m.memoizedState;try{y.componentWillUnmount()}catch(j){Sa(m,g,j)}}function bh(m,g){try{var y=m.ref;if(y!==null){switch(m.tag){case 26:case 27:case 5:var j=m.stateNode;break;case 30:j=m.stateNode;break;default:j=m.stateNode}typeof y=="function"?m.refCleanup=y(j):y.current=j}}catch(L){Sa(m,g,L)}}function Ui(m,g){var y=m.ref,j=m.refCleanup;if(y!==null)if(typeof j=="function")try{j()}catch(L){Sa(m,g,L)}finally{m.refCleanup=null,m=m.alternate,m!=null&&(m.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(L){Sa(m,g,L)}else y.current=null}function iO(m){var g=m.type,y=m.memoizedProps,j=m.stateNode;try{e:switch(g){case"button":case"input":case"select":case"textarea":y.autoFocus&&j.focus();break e;case"img":y.src?j.src=y.src:y.srcSet&&(j.srcset=y.srcSet)}}catch(L){Sa(m,m.return,L)}}function U1(m,g,y){try{var j=m.stateNode;kJ(j,m.type,y,g),j[ue]=g}catch(L){Sa(m,m.return,L)}}function lO(m){return m.tag===5||m.tag===3||m.tag===26||m.tag===27&&lc(m.type)||m.tag===4}function F1(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||lO(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&m.tag!==18;){if(m.tag===27&&lc(m.type)||m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function B1(m,g,y){var j=m.tag;if(j===5||j===6)m=m.stateNode,g?(y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y).insertBefore(m,g):(g=y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y,g.appendChild(m),y=y._reactRootContainer,y!=null||g.onclick!==null||(g.onclick=Al));else if(j!==4&&(j===27&&lc(m.type)&&(y=m.stateNode,g=null),m=m.child,m!==null))for(B1(m,g,y),m=m.sibling;m!==null;)B1(m,g,y),m=m.sibling}function v0(m,g,y){var j=m.tag;if(j===5||j===6)m=m.stateNode,g?y.insertBefore(m,g):y.appendChild(m);else if(j!==4&&(j===27&&lc(m.type)&&(y=m.stateNode),m=m.child,m!==null))for(v0(m,g,y),m=m.sibling;m!==null;)v0(m,g,y),m=m.sibling}function oO(m){var g=m.stateNode,y=m.memoizedProps;try{for(var j=m.type,L=g.attributes;L.length;)g.removeAttributeNode(L[0]);fs(g,j,y),g[Ge]=m,g[ue]=y}catch(D){Sa(m,m.return,D)}}var $l=!1,Tn=!1,H1=!1,cO=typeof WeakSet=="function"?WeakSet:Set,ts=null;function cJ(m,g){if(m=m.containerInfo,dC=F0,m=wD(m),Ij(m)){if("selectionStart"in m)var y={start:m.selectionStart,end:m.selectionEnd};else e:{y=(y=m.ownerDocument)&&y.defaultView||window;var j=y.getSelection&&y.getSelection();if(j&&j.rangeCount!==0){y=j.anchorNode;var L=j.anchorOffset,D=j.focusNode;j=j.focusOffset;try{y.nodeType,D.nodeType}catch{y=null;break e}var q=0,xe=-1,Re=-1,nt=0,ut=0,xt=m,rt=null;t:for(;;){for(var ct;xt!==y||L!==0&&xt.nodeType!==3||(xe=q+L),xt!==D||j!==0&&xt.nodeType!==3||(Re=q+j),xt.nodeType===3&&(q+=xt.nodeValue.length),(ct=xt.firstChild)!==null;)rt=xt,xt=ct;for(;;){if(xt===m)break t;if(rt===y&&++nt===L&&(xe=q),rt===D&&++ut===j&&(Re=q),(ct=xt.nextSibling)!==null)break;xt=rt,rt=xt.parentNode}xt=ct}y=xe===-1||Re===-1?null:{start:xe,end:Re}}else y=null}y=y||{start:0,end:0}}else y=null;for(uC={focusedElem:m,selectionRange:y},F0=!1,ts=g;ts!==null;)if(g=ts,m=g.child,(g.subtreeFlags&1028)!==0&&m!==null)m.return=g,ts=m;else for(;ts!==null;){switch(g=ts,D=g.alternate,m=g.flags,g.tag){case 0:if((m&4)!==0&&(m=g.updateQueue,m=m!==null?m.events:null,m!==null))for(y=0;y<m.length;y++)L=m[y],L.ref.impl=L.nextImpl;break;case 11:case 15:break;case 1:if((m&1024)!==0&&D!==null){m=void 0,y=g,L=D.memoizedProps,D=D.memoizedState,j=y.stateNode;try{var Pt=xd(y.type,L);m=j.getSnapshotBeforeUpdate(Pt,D),j.__reactInternalSnapshotBeforeUpdate=m}catch(Ht){Sa(y,y.return,Ht)}}break;case 3:if((m&1024)!==0){if(m=g.stateNode.containerInfo,y=m.nodeType,y===9)hC(m);else if(y===1)switch(m.nodeName){case"HEAD":case"HTML":case"BODY":hC(m);break;default:m.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((m&1024)!==0)throw Error(s(163))}if(m=g.sibling,m!==null){m.return=g.return,ts=m;break}ts=g.return}}function dO(m,g,y){var j=y.flags;switch(y.tag){case 0:case 11:case 15:zl(m,y),j&4&&yh(5,y);break;case 1:if(zl(m,y),j&4)if(m=y.stateNode,g===null)try{m.componentDidMount()}catch(q){Sa(y,y.return,q)}else{var L=xd(y.type,g.memoizedProps);g=g.memoizedState;try{m.componentDidUpdate(L,g,m.__reactInternalSnapshotBeforeUpdate)}catch(q){Sa(y,y.return,q)}}j&64&&sO(y),j&512&&bh(y,y.return);break;case 3:if(zl(m,y),j&64&&(m=y.updateQueue,m!==null)){if(g=null,y.child!==null)switch(y.child.tag){case 27:case 5:g=y.child.stateNode;break;case 1:g=y.child.stateNode}try{YD(m,g)}catch(q){Sa(y,y.return,q)}}break;case 27:g===null&&j&4&&oO(y);case 26:case 5:zl(m,y),g===null&&j&4&&iO(y),j&512&&bh(y,y.return);break;case 12:zl(m,y);break;case 31:zl(m,y),j&4&&fO(m,y);break;case 13:zl(m,y),j&4&&hO(m,y),j&64&&(m=y.memoizedState,m!==null&&(m=m.dehydrated,m!==null&&(y=yJ.bind(null,y),RJ(m,y))));break;case 22:if(j=y.memoizedState!==null||$l,!j){g=g!==null&&g.memoizedState!==null||Tn,L=$l;var D=Tn;$l=j,(Tn=g)&&!D?Ul(m,y,(y.subtreeFlags&8772)!==0):zl(m,y),$l=L,Tn=D}break;case 30:break;default:zl(m,y)}}function uO(m){var g=m.alternate;g!==null&&(m.alternate=null,uO(g)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(g=m.stateNode,g!==null&&kt(g)),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}var Qa=null,Hs=!1;function Rl(m,g,y){for(y=y.child;y!==null;)mO(m,g,y),y=y.sibling}function mO(m,g,y){if(et&&typeof et.onCommitFiberUnmount=="function")try{et.onCommitFiberUnmount(Ue,y)}catch{}switch(y.tag){case 26:Tn||Ui(y,g),Rl(m,g,y),y.memoizedState?y.memoizedState.count--:y.stateNode&&(y=y.stateNode,y.parentNode.removeChild(y));break;case 27:Tn||Ui(y,g);var j=Qa,L=Hs;lc(y.type)&&(Qa=y.stateNode,Hs=!1),Rl(m,g,y),Eh(y.stateNode),Qa=j,Hs=L;break;case 5:Tn||Ui(y,g);case 6:if(j=Qa,L=Hs,Qa=null,Rl(m,g,y),Qa=j,Hs=L,Qa!==null)if(Hs)try{(Qa.nodeType===9?Qa.body:Qa.nodeName==="HTML"?Qa.ownerDocument.body:Qa).removeChild(y.stateNode)}catch(D){Sa(y,g,D)}else try{Qa.removeChild(y.stateNode)}catch(D){Sa(y,g,D)}break;case 18:Qa!==null&&(Hs?(m=Qa,s5(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,y.stateNode),hm(m)):s5(Qa,y.stateNode));break;case 4:j=Qa,L=Hs,Qa=y.stateNode.containerInfo,Hs=!0,Rl(m,g,y),Qa=j,Hs=L;break;case 0:case 11:case 14:case 15:ec(2,y,g),Tn||ec(4,y,g),Rl(m,g,y);break;case 1:Tn||(Ui(y,g),j=y.stateNode,typeof j.componentWillUnmount=="function"&&rO(y,g,j)),Rl(m,g,y);break;case 21:Rl(m,g,y);break;case 22:Tn=(j=Tn)||y.memoizedState!==null,Rl(m,g,y),Tn=j;break;default:Rl(m,g,y)}}function fO(m,g){if(g.memoizedState===null&&(m=g.alternate,m!==null&&(m=m.memoizedState,m!==null))){m=m.dehydrated;try{hm(m)}catch(y){Sa(g,g.return,y)}}}function hO(m,g){if(g.memoizedState===null&&(m=g.alternate,m!==null&&(m=m.memoizedState,m!==null&&(m=m.dehydrated,m!==null))))try{hm(m)}catch(y){Sa(g,g.return,y)}}function dJ(m){switch(m.tag){case 31:case 13:case 19:var g=m.stateNode;return g===null&&(g=m.stateNode=new cO),g;case 22:return m=m.stateNode,g=m._retryCache,g===null&&(g=m._retryCache=new cO),g;default:throw Error(s(435,m.tag))}}function w0(m,g){var y=dJ(m);g.forEach(function(j){if(!y.has(j)){y.add(j);var L=bJ.bind(null,m,j);j.then(L,L)}})}function Gs(m,g){var y=g.deletions;if(y!==null)for(var j=0;j<y.length;j++){var L=y[j],D=m,q=g,xe=q;e:for(;xe!==null;){switch(xe.tag){case 27:if(lc(xe.type)){Qa=xe.stateNode,Hs=!1;break e}break;case 5:Qa=xe.stateNode,Hs=!1;break e;case 3:case 4:Qa=xe.stateNode.containerInfo,Hs=!0;break e}xe=xe.return}if(Qa===null)throw Error(s(160));mO(D,q,L),Qa=null,Hs=!1,D=L.alternate,D!==null&&(D.return=null),L.return=null}if(g.subtreeFlags&13886)for(g=g.child;g!==null;)gO(g,m),g=g.sibling}var xi=null;function gO(m,g){var y=m.alternate,j=m.flags;switch(m.tag){case 0:case 11:case 14:case 15:Gs(g,m),Ws(m),j&4&&(ec(3,m,m.return),yh(3,m),ec(5,m,m.return));break;case 1:Gs(g,m),Ws(m),j&512&&(Tn||y===null||Ui(y,y.return)),j&64&&$l&&(m=m.updateQueue,m!==null&&(j=m.callbacks,j!==null&&(y=m.shared.hiddenCallbacks,m.shared.hiddenCallbacks=y===null?j:y.concat(j))));break;case 26:var L=xi;if(Gs(g,m),Ws(m),j&512&&(Tn||y===null||Ui(y,y.return)),j&4){var D=y!==null?y.memoizedState:null;if(j=m.memoizedState,y===null)if(j===null)if(m.stateNode===null){e:{j=m.type,y=m.memoizedProps,L=L.ownerDocument||L;t:switch(j){case"title":D=L.getElementsByTagName("title")[0],(!D||D[Ct]||D[Ge]||D.namespaceURI==="http://www.w3.org/2000/svg"||D.hasAttribute("itemprop"))&&(D=L.createElement(j),L.head.insertBefore(D,L.querySelector("head > title"))),fs(D,j,y),D[Ge]=m,zn(D),j=D;break e;case"link":var q=g5("link","href",L).get(j+(y.href||""));if(q){for(var xe=0;xe<q.length;xe++)if(D=q[xe],D.getAttribute("href")===(y.href==null||y.href===""?null:y.href)&&D.getAttribute("rel")===(y.rel==null?null:y.rel)&&D.getAttribute("title")===(y.title==null?null:y.title)&&D.getAttribute("crossorigin")===(y.crossOrigin==null?null:y.crossOrigin)){q.splice(xe,1);break t}}D=L.createElement(j),fs(D,j,y),L.head.appendChild(D);break;case"meta":if(q=g5("meta","content",L).get(j+(y.content||""))){for(xe=0;xe<q.length;xe++)if(D=q[xe],D.getAttribute("content")===(y.content==null?null:""+y.content)&&D.getAttribute("name")===(y.name==null?null:y.name)&&D.getAttribute("property")===(y.property==null?null:y.property)&&D.getAttribute("http-equiv")===(y.httpEquiv==null?null:y.httpEquiv)&&D.getAttribute("charset")===(y.charSet==null?null:y.charSet)){q.splice(xe,1);break t}}D=L.createElement(j),fs(D,j,y),L.head.appendChild(D);break;default:throw Error(s(468,j))}D[Ge]=m,zn(D),j=D}m.stateNode=j}else p5(L,m.type,m.stateNode);else m.stateNode=h5(L,j,m.memoizedProps);else D!==j?(D===null?y.stateNode!==null&&(y=y.stateNode,y.parentNode.removeChild(y)):D.count--,j===null?p5(L,m.type,m.stateNode):h5(L,j,m.memoizedProps)):j===null&&m.stateNode!==null&&U1(m,m.memoizedProps,y.memoizedProps)}break;case 27:Gs(g,m),Ws(m),j&512&&(Tn||y===null||Ui(y,y.return)),y!==null&&j&4&&U1(m,m.memoizedProps,y.memoizedProps);break;case 5:if(Gs(g,m),Ws(m),j&512&&(Tn||y===null||Ui(y,y.return)),m.flags&32){L=m.stateNode;try{$u(L,"")}catch(Pt){Sa(m,m.return,Pt)}}j&4&&m.stateNode!=null&&(L=m.memoizedProps,U1(m,L,y!==null?y.memoizedProps:L)),j&1024&&(H1=!0);break;case 6:if(Gs(g,m),Ws(m),j&4){if(m.stateNode===null)throw Error(s(162));j=m.memoizedProps,y=m.stateNode;try{y.nodeValue=j}catch(Pt){Sa(m,m.return,Pt)}}break;case 3:if($0=null,L=xi,xi=M0(g.containerInfo),Gs(g,m),xi=L,Ws(m),j&4&&y!==null&&y.memoizedState.isDehydrated)try{hm(g.containerInfo)}catch(Pt){Sa(m,m.return,Pt)}H1&&(H1=!1,pO(m));break;case 4:j=xi,xi=M0(m.stateNode.containerInfo),Gs(g,m),Ws(m),xi=j;break;case 12:Gs(g,m),Ws(m);break;case 31:Gs(g,m),Ws(m),j&4&&(j=m.updateQueue,j!==null&&(m.updateQueue=null,w0(m,j)));break;case 13:Gs(g,m),Ws(m),m.child.flags&8192&&m.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&(j0=he()),j&4&&(j=m.updateQueue,j!==null&&(m.updateQueue=null,w0(m,j)));break;case 22:L=m.memoizedState!==null;var Re=y!==null&&y.memoizedState!==null,nt=$l,ut=Tn;if($l=nt||L,Tn=ut||Re,Gs(g,m),Tn=ut,$l=nt,Ws(m),j&8192)e:for(g=m.stateNode,g._visibility=L?g._visibility&-2:g._visibility|1,L&&(y===null||Re||$l||Tn||yd(m)),y=null,g=m;;){if(g.tag===5||g.tag===26){if(y===null){Re=y=g;try{if(D=Re.stateNode,L)q=D.style,typeof q.setProperty=="function"?q.setProperty("display","none","important"):q.display="none";else{xe=Re.stateNode;var xt=Re.memoizedProps.style,rt=xt!=null&&xt.hasOwnProperty("display")?xt.display:null;xe.style.display=rt==null||typeof rt=="boolean"?"":(""+rt).trim()}}catch(Pt){Sa(Re,Re.return,Pt)}}}else if(g.tag===6){if(y===null){Re=g;try{Re.stateNode.nodeValue=L?"":Re.memoizedProps}catch(Pt){Sa(Re,Re.return,Pt)}}}else if(g.tag===18){if(y===null){Re=g;try{var ct=Re.stateNode;L?r5(ct,!0):r5(Re.stateNode,!1)}catch(Pt){Sa(Re,Re.return,Pt)}}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===m)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===m)break e;for(;g.sibling===null;){if(g.return===null||g.return===m)break e;y===g&&(y=null),g=g.return}y===g&&(y=null),g.sibling.return=g.return,g=g.sibling}j&4&&(j=m.updateQueue,j!==null&&(y=j.retryQueue,y!==null&&(j.retryQueue=null,w0(m,y))));break;case 19:Gs(g,m),Ws(m),j&4&&(j=m.updateQueue,j!==null&&(m.updateQueue=null,w0(m,j)));break;case 30:break;case 21:break;default:Gs(g,m),Ws(m)}}function Ws(m){var g=m.flags;if(g&2){try{for(var y,j=m.return;j!==null;){if(lO(j)){y=j;break}j=j.return}if(y==null)throw Error(s(160));switch(y.tag){case 27:var L=y.stateNode,D=F1(m);v0(m,D,L);break;case 5:var q=y.stateNode;y.flags&32&&($u(q,""),y.flags&=-33);var xe=F1(m);v0(m,xe,q);break;case 3:case 4:var Re=y.stateNode.containerInfo,nt=F1(m);B1(m,nt,Re);break;default:throw Error(s(161))}}catch(ut){Sa(m,m.return,ut)}m.flags&=-3}g&4096&&(m.flags&=-4097)}function pO(m){if(m.subtreeFlags&1024)for(m=m.child;m!==null;){var g=m;pO(g),g.tag===5&&g.flags&1024&&g.stateNode.reset(),m=m.sibling}}function zl(m,g){if(g.subtreeFlags&8772)for(g=g.child;g!==null;)dO(m,g.alternate,g),g=g.sibling}function yd(m){for(m=m.child;m!==null;){var g=m;switch(g.tag){case 0:case 11:case 14:case 15:ec(4,g,g.return),yd(g);break;case 1:Ui(g,g.return);var y=g.stateNode;typeof y.componentWillUnmount=="function"&&rO(g,g.return,y),yd(g);break;case 27:Eh(g.stateNode);case 26:case 5:Ui(g,g.return),yd(g);break;case 22:g.memoizedState===null&&yd(g);break;case 30:yd(g);break;default:yd(g)}m=m.sibling}}function Ul(m,g,y){for(y=y&&(g.subtreeFlags&8772)!==0,g=g.child;g!==null;){var j=g.alternate,L=m,D=g,q=D.flags;switch(D.tag){case 0:case 11:case 15:Ul(L,D,y),yh(4,D);break;case 1:if(Ul(L,D,y),j=D,L=j.stateNode,typeof L.componentDidMount=="function")try{L.componentDidMount()}catch(nt){Sa(j,j.return,nt)}if(j=D,L=j.updateQueue,L!==null){var xe=j.stateNode;try{var Re=L.shared.hiddenCallbacks;if(Re!==null)for(L.shared.hiddenCallbacks=null,L=0;L<Re.length;L++)qD(Re[L],xe)}catch(nt){Sa(j,j.return,nt)}}y&&q&64&&sO(D),bh(D,D.return);break;case 27:oO(D);case 26:case 5:Ul(L,D,y),y&&j===null&&q&4&&iO(D),bh(D,D.return);break;case 12:Ul(L,D,y);break;case 31:Ul(L,D,y),y&&q&4&&fO(L,D);break;case 13:Ul(L,D,y),y&&q&4&&hO(L,D);break;case 22:D.memoizedState===null&&Ul(L,D,y),bh(D,D.return);break;case 30:break;default:Ul(L,D,y)}g=g.sibling}}function G1(m,g){var y=null;m!==null&&m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(y=m.memoizedState.cachePool.pool),m=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(m=g.memoizedState.cachePool.pool),m!==y&&(m!=null&&m.refCount++,y!=null&&rh(y))}function W1(m,g){m=null,g.alternate!==null&&(m=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==m&&(g.refCount++,m!=null&&rh(m))}function yi(m,g,y,j){if(g.subtreeFlags&10256)for(g=g.child;g!==null;)xO(m,g,y,j),g=g.sibling}function xO(m,g,y,j){var L=g.flags;switch(g.tag){case 0:case 11:case 15:yi(m,g,y,j),L&2048&&yh(9,g);break;case 1:yi(m,g,y,j);break;case 3:yi(m,g,y,j),L&2048&&(m=null,g.alternate!==null&&(m=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==m&&(g.refCount++,m!=null&&rh(m)));break;case 12:if(L&2048){yi(m,g,y,j),m=g.stateNode;try{var D=g.memoizedProps,q=D.id,xe=D.onPostCommit;typeof xe=="function"&&xe(q,g.alternate===null?"mount":"update",m.passiveEffectDuration,-0)}catch(Re){Sa(g,g.return,Re)}}else yi(m,g,y,j);break;case 31:yi(m,g,y,j);break;case 13:yi(m,g,y,j);break;case 23:break;case 22:D=g.stateNode,q=g.alternate,g.memoizedState!==null?D._visibility&2?yi(m,g,y,j):vh(m,g):D._visibility&2?yi(m,g,y,j):(D._visibility|=2,nm(m,g,y,j,(g.subtreeFlags&10256)!==0||!1)),L&2048&&G1(q,g);break;case 24:yi(m,g,y,j),L&2048&&W1(g.alternate,g);break;default:yi(m,g,y,j)}}function nm(m,g,y,j,L){for(L=L&&((g.subtreeFlags&10256)!==0||!1),g=g.child;g!==null;){var D=m,q=g,xe=y,Re=j,nt=q.flags;switch(q.tag){case 0:case 11:case 15:nm(D,q,xe,Re,L),yh(8,q);break;case 23:break;case 22:var ut=q.stateNode;q.memoizedState!==null?ut._visibility&2?nm(D,q,xe,Re,L):vh(D,q):(ut._visibility|=2,nm(D,q,xe,Re,L)),L&&nt&2048&&G1(q.alternate,q);break;case 24:nm(D,q,xe,Re,L),L&&nt&2048&&W1(q.alternate,q);break;default:nm(D,q,xe,Re,L)}g=g.sibling}}function vh(m,g){if(g.subtreeFlags&10256)for(g=g.child;g!==null;){var y=m,j=g,L=j.flags;switch(j.tag){case 22:vh(y,j),L&2048&&G1(j.alternate,j);break;case 24:vh(y,j),L&2048&&W1(j.alternate,j);break;default:vh(y,j)}g=g.sibling}}var wh=8192;function sm(m,g,y){if(m.subtreeFlags&wh)for(m=m.child;m!==null;)yO(m,g,y),m=m.sibling}function yO(m,g,y){switch(m.tag){case 26:sm(m,g,y),m.flags&wh&&m.memoizedState!==null&&QJ(y,xi,m.memoizedState,m.memoizedProps);break;case 5:sm(m,g,y);break;case 3:case 4:var j=xi;xi=M0(m.stateNode.containerInfo),sm(m,g,y),xi=j;break;case 22:m.memoizedState===null&&(j=m.alternate,j!==null&&j.memoizedState!==null?(j=wh,wh=16777216,sm(m,g,y),wh=j):sm(m,g,y));break;default:sm(m,g,y)}}function bO(m){var g=m.alternate;if(g!==null&&(m=g.child,m!==null)){g.child=null;do g=m.sibling,m.sibling=null,m=g;while(m!==null)}}function Nh(m){var g=m.deletions;if((m.flags&16)!==0){if(g!==null)for(var y=0;y<g.length;y++){var j=g[y];ts=j,wO(j,m)}bO(m)}if(m.subtreeFlags&10256)for(m=m.child;m!==null;)vO(m),m=m.sibling}function vO(m){switch(m.tag){case 0:case 11:case 15:Nh(m),m.flags&2048&&ec(9,m,m.return);break;case 3:Nh(m);break;case 12:Nh(m);break;case 22:var g=m.stateNode;m.memoizedState!==null&&g._visibility&2&&(m.return===null||m.return.tag!==13)?(g._visibility&=-3,N0(m)):Nh(m);break;default:Nh(m)}}function N0(m){var g=m.deletions;if((m.flags&16)!==0){if(g!==null)for(var y=0;y<g.length;y++){var j=g[y];ts=j,wO(j,m)}bO(m)}for(m=m.child;m!==null;){switch(g=m,g.tag){case 0:case 11:case 15:ec(8,g,g.return),N0(g);break;case 22:y=g.stateNode,y._visibility&2&&(y._visibility&=-3,N0(g));break;default:N0(g)}m=m.sibling}}function wO(m,g){for(;ts!==null;){var y=ts;switch(y.tag){case 0:case 11:case 15:ec(8,y,g);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var j=y.memoizedState.cachePool.pool;j!=null&&j.refCount++}break;case 24:rh(y.memoizedState.cache)}if(j=y.child,j!==null)j.return=y,ts=j;else e:for(y=m;ts!==null;){j=ts;var L=j.sibling,D=j.return;if(uO(j),j===y){ts=null;break e}if(L!==null){L.return=D,ts=L;break e}ts=D}}}var uJ={getCacheForType:function(m){var g=us(_n),y=g.data.get(m);return y===void 0&&(y=m(),g.data.set(m,y)),y},cacheSignal:function(){return us(_n).controller.signal}},mJ=typeof WeakMap=="function"?WeakMap:Map,ba=0,$a=null,sa=null,la=0,Ca=0,pr=null,tc=!1,rm=!1,V1=!1,Fl=0,un=0,ac=0,bd=0,q1=0,xr=0,im=0,jh=null,Vs=null,Y1=!1,j0=0,NO=0,C0=1/0,S0=null,nc=null,Un=0,sc=null,lm=null,Bl=0,K1=0,Q1=null,jO=null,Ch=0,X1=null;function yr(){return(ba&2)!==0&&la!==0?la&-la:F.T!==null?nC():W()}function CO(){if(xr===0)if((la&536870912)===0||ua){var m=U;U<<=1,(U&3932160)===0&&(U=262144),xr=m}else xr=536870912;return m=hr.current,m!==null&&(m.flags|=32),xr}function qs(m,g,y){(m===$a&&(Ca===2||Ca===9)||m.cancelPendingCommit!==null)&&(om(m,0),rc(m,la,xr,!1)),Ve(m,y),((ba&2)===0||m!==$a)&&(m===$a&&((ba&2)===0&&(bd|=y),un===4&&rc(m,la,xr,!1)),Fi(m))}function SO(m,g,y){if((ba&6)!==0)throw Error(s(327));var j=!y&&(g&127)===0&&(g&m.expiredLanes)===0||Se(m,g),L=j?gJ(m,g):J1(m,g,!0),D=j;do{if(L===0){rm&&!j&&rc(m,g,0,!1);break}else{if(y=m.current.alternate,D&&!fJ(y)){L=J1(m,g,!1),D=!1;continue}if(L===2){if(D=g,m.errorRecoveryDisabledLanes&D)var q=0;else q=m.pendingLanes&-536870913,q=q!==0?q:q&536870912?536870912:0;if(q!==0){g=q;e:{var xe=m;L=jh;var Re=xe.current.memoizedState.isDehydrated;if(Re&&(om(xe,q).flags|=256),q=J1(xe,q,!1),q!==2){if(V1&&!Re){xe.errorRecoveryDisabledLanes|=D,bd|=D,L=4;break e}D=Vs,Vs=L,D!==null&&(Vs===null?Vs=D:Vs.push.apply(Vs,D))}L=q}if(D=!1,L!==2)continue}}if(L===1){om(m,0),rc(m,g,0,!0);break}e:{switch(j=m,D=L,D){case 0:case 1:throw Error(s(345));case 4:if((g&4194048)!==g)break;case 6:rc(j,g,xr,!tc);break e;case 2:Vs=null;break;case 3:case 5:break;default:throw Error(s(329))}if((g&62914560)===g&&(L=j0+300-he(),10<L)){if(rc(j,g,xr,!tc),K(j,0,!0)!==0)break e;Bl=g,j.timeoutHandle=a5(_O.bind(null,j,y,Vs,S0,Y1,g,xr,bd,im,tc,D,"Throttled",-0,0),L);break e}_O(j,y,Vs,S0,Y1,g,xr,bd,im,tc,D,null,-0,0)}}break}while(!0);Fi(m)}function _O(m,g,y,j,L,D,q,xe,Re,nt,ut,xt,rt,ct){if(m.timeoutHandle=-1,xt=g.subtreeFlags,xt&8192||(xt&16785408)===16785408){xt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Al},yO(g,D,xt);var Pt=(D&62914560)===D?j0-he():(D&4194048)===D?NO-he():0;if(Pt=XJ(xt,Pt),Pt!==null){Bl=D,m.cancelPendingCommit=Pt(OO.bind(null,m,g,D,y,j,L,q,xe,Re,ut,xt,null,rt,ct)),rc(m,D,q,!nt);return}}OO(m,g,D,y,j,L,q,xe,Re)}function fJ(m){for(var g=m;;){var y=g.tag;if((y===0||y===11||y===15)&&g.flags&16384&&(y=g.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var j=0;j<y.length;j++){var L=y[j],D=L.getSnapshot;L=L.value;try{if(!mr(D(),L))return!1}catch{return!1}}if(y=g.child,g.subtreeFlags&16384&&y!==null)y.return=g,g=y;else{if(g===m)break;for(;g.sibling===null;){if(g.return===null||g.return===m)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function rc(m,g,y,j){g&=~q1,g&=~bd,m.suspendedLanes|=g,m.pingedLanes&=~g,j&&(m.warmLanes|=g),j=m.expirationTimes;for(var L=g;0<L;){var D=31-Ee(L),q=1<<D;j[D]=-1,L&=~q}y!==0&&bt(m,y,g)}function _0(){return(ba&6)===0?(Sh(0),!1):!0}function Z1(){if(sa!==null){if(Ca===0)var m=sa.return;else m=sa,Ll=dd=null,h1(m),Zu=null,lh=0,m=sa;for(;m!==null;)nO(m.alternate,m),m=m.return;sa=null}}function om(m,g){var y=m.timeoutHandle;y!==-1&&(m.timeoutHandle=-1,DJ(y)),y=m.cancelPendingCommit,y!==null&&(m.cancelPendingCommit=null,y()),Bl=0,Z1(),$a=m,sa=y=Tl(m.current,null),la=g,Ca=0,pr=null,tc=!1,rm=Se(m,g),V1=!1,im=xr=q1=bd=ac=un=0,Vs=jh=null,Y1=!1,(g&8)!==0&&(g|=g&32);var j=m.entangledLanes;if(j!==0)for(m=m.entanglements,j&=g;0<j;){var L=31-Ee(j),D=1<<L;g|=m[L],j&=~D}return Fl=g,qx(),y}function AO(m,g){Qt=null,F.H=gh,g===Xu||g===t0?(g=HD(),Ca=3):g===a1?(g=HD(),Ca=4):Ca=g===k1?8:g!==null&&typeof g=="object"&&typeof g.then=="function"?6:1,pr=g,sa===null&&(un=1,g0(m,$r(g,m.current)))}function EO(){var m=hr.current;return m===null?!0:(la&4194048)===la?Fr===null:(la&62914560)===la||(la&536870912)!==0?m===Fr:!1}function TO(){var m=F.H;return F.H=gh,m===null?gh:m}function kO(){var m=F.A;return F.A=uJ,m}function A0(){un=4,tc||(la&4194048)!==la&&hr.current!==null||(rm=!0),(ac&134217727)===0&&(bd&134217727)===0||$a===null||rc($a,la,xr,!1)}function J1(m,g,y){var j=ba;ba|=2;var L=TO(),D=kO();($a!==m||la!==g)&&(S0=null,om(m,g)),g=!1;var q=un;e:do try{if(Ca!==0&&sa!==null){var xe=sa,Re=pr;switch(Ca){case 8:Z1(),q=6;break e;case 3:case 2:case 9:case 6:hr.current===null&&(g=!0);var nt=Ca;if(Ca=0,pr=null,cm(m,xe,Re,nt),y&&rm){q=0;break e}break;default:nt=Ca,Ca=0,pr=null,cm(m,xe,Re,nt)}}hJ(),q=un;break}catch(ut){AO(m,ut)}while(!0);return g&&m.shellSuspendCounter++,Ll=dd=null,ba=j,F.H=L,F.A=D,sa===null&&($a=null,la=0,qx()),q}function hJ(){for(;sa!==null;)LO(sa)}function gJ(m,g){var y=ba;ba|=2;var j=TO(),L=kO();$a!==m||la!==g?(S0=null,C0=he()+500,om(m,g)):rm=Se(m,g);e:do try{if(Ca!==0&&sa!==null){g=sa;var D=pr;t:switch(Ca){case 1:Ca=0,pr=null,cm(m,g,D,1);break;case 2:case 9:if(FD(D)){Ca=0,pr=null,PO(g);break}g=function(){Ca!==2&&Ca!==9||$a!==m||(Ca=7),Fi(m)},D.then(g,g);break e;case 3:Ca=7;break e;case 4:Ca=5;break e;case 7:FD(D)?(Ca=0,pr=null,PO(g)):(Ca=0,pr=null,cm(m,g,D,7));break;case 5:var q=null;switch(sa.tag){case 26:q=sa.memoizedState;case 5:case 27:var xe=sa;if(q?x5(q):xe.stateNode.complete){Ca=0,pr=null;var Re=xe.sibling;if(Re!==null)sa=Re;else{var nt=xe.return;nt!==null?(sa=nt,E0(nt)):sa=null}break t}}Ca=0,pr=null,cm(m,g,D,5);break;case 6:Ca=0,pr=null,cm(m,g,D,6);break;case 8:Z1(),un=6;break e;default:throw Error(s(462))}}pJ();break}catch(ut){AO(m,ut)}while(!0);return Ll=dd=null,F.H=j,F.A=L,ba=y,sa!==null?0:($a=null,la=0,qx(),un)}function pJ(){for(;sa!==null&&!Ie();)LO(sa)}function LO(m){var g=tO(m.alternate,m,Fl);m.memoizedProps=m.pendingProps,g===null?E0(m):sa=g}function PO(m){var g=m,y=g.alternate;switch(g.tag){case 15:case 0:g=K3(y,g,g.pendingProps,g.type,void 0,la);break;case 11:g=K3(y,g,g.pendingProps,g.type.render,g.ref,la);break;case 5:h1(g);default:nO(y,g),g=sa=kD(g,Fl),g=tO(y,g,Fl)}m.memoizedProps=m.pendingProps,g===null?E0(m):sa=g}function cm(m,g,y,j){Ll=dd=null,h1(g),Zu=null,lh=0;var L=g.return;try{if(sJ(m,L,g,y,la)){un=1,g0(m,$r(y,m.current)),sa=null;return}}catch(D){if(L!==null)throw sa=L,D;un=1,g0(m,$r(y,m.current)),sa=null;return}g.flags&32768?(ua||j===1?m=!0:rm||(la&536870912)!==0?m=!1:(tc=m=!0,(j===2||j===9||j===3||j===6)&&(j=hr.current,j!==null&&j.tag===13&&(j.flags|=16384))),DO(g,m)):E0(g)}function E0(m){var g=m;do{if((g.flags&32768)!==0){DO(g,tc);return}m=g.return;var y=lJ(g.alternate,g,Fl);if(y!==null){sa=y;return}if(g=g.sibling,g!==null){sa=g;return}sa=g=m}while(g!==null);un===0&&(un=5)}function DO(m,g){do{var y=oJ(m.alternate,m);if(y!==null){y.flags&=32767,sa=y;return}if(y=m.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!g&&(m=m.sibling,m!==null)){sa=m;return}sa=m=y}while(m!==null);un=6,sa=null}function OO(m,g,y,j,L,D,q,xe,Re){m.cancelPendingCommit=null;do T0();while(Un!==0);if((ba&6)!==0)throw Error(s(327));if(g!==null){if(g===m.current)throw Error(s(177));if(D=g.lanes|g.childLanes,D|=Fj,ft(m,y,D,q,xe,Re),m===$a&&(sa=$a=null,la=0),lm=g,sc=m,Bl=y,K1=D,Q1=L,jO=j,(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?(m.callbackNode=null,m.callbackPriority=0,vJ(We,function(){return zO(),null})):(m.callbackNode=null,m.callbackPriority=0),j=(g.flags&13878)!==0,(g.subtreeFlags&13878)!==0||j){j=F.T,F.T=null,L=ee.p,ee.p=2,q=ba,ba|=4;try{cJ(m,g,y)}finally{ba=q,ee.p=L,F.T=j}}Un=1,MO(),IO(),$O()}}function MO(){if(Un===1){Un=0;var m=sc,g=lm,y=(g.flags&13878)!==0;if((g.subtreeFlags&13878)!==0||y){y=F.T,F.T=null;var j=ee.p;ee.p=2;var L=ba;ba|=4;try{gO(g,m);var D=uC,q=wD(m.containerInfo),xe=D.focusedElem,Re=D.selectionRange;if(q!==xe&&xe&&xe.ownerDocument&&vD(xe.ownerDocument.documentElement,xe)){if(Re!==null&&Ij(xe)){var nt=Re.start,ut=Re.end;if(ut===void 0&&(ut=nt),"selectionStart"in xe)xe.selectionStart=nt,xe.selectionEnd=Math.min(ut,xe.value.length);else{var xt=xe.ownerDocument||document,rt=xt&&xt.defaultView||window;if(rt.getSelection){var ct=rt.getSelection(),Pt=xe.textContent.length,Ht=Math.min(Re.start,Pt),Oa=Re.end===void 0?Ht:Math.min(Re.end,Pt);!ct.extend&&Ht>Oa&&(q=Oa,Oa=Ht,Ht=q);var Ze=bD(xe,Ht),qe=bD(xe,Oa);if(Ze&&qe&&(ct.rangeCount!==1||ct.anchorNode!==Ze.node||ct.anchorOffset!==Ze.offset||ct.focusNode!==qe.node||ct.focusOffset!==qe.offset)){var at=xt.createRange();at.setStart(Ze.node,Ze.offset),ct.removeAllRanges(),Ht>Oa?(ct.addRange(at),ct.extend(qe.node,qe.offset)):(at.setEnd(qe.node,qe.offset),ct.addRange(at))}}}}for(xt=[],ct=xe;ct=ct.parentNode;)ct.nodeType===1&&xt.push({element:ct,left:ct.scrollLeft,top:ct.scrollTop});for(typeof xe.focus=="function"&&xe.focus(),xe=0;xe<xt.length;xe++){var gt=xt[xe];gt.element.scrollLeft=gt.left,gt.element.scrollTop=gt.top}}F0=!!dC,uC=dC=null}finally{ba=L,ee.p=j,F.T=y}}m.current=g,Un=2}}function IO(){if(Un===2){Un=0;var m=sc,g=lm,y=(g.flags&8772)!==0;if((g.subtreeFlags&8772)!==0||y){y=F.T,F.T=null;var j=ee.p;ee.p=2;var L=ba;ba|=4;try{dO(m,g.alternate,g)}finally{ba=L,ee.p=j,F.T=y}}Un=3}}function $O(){if(Un===4||Un===3){Un=0,Je();var m=sc,g=lm,y=Bl,j=jO;(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?Un=5:(Un=0,lm=sc=null,RO(m,m.pendingLanes));var L=m.pendingLanes;if(L===0&&(nc=null),_e(y),g=g.stateNode,et&&typeof et.onCommitFiberRoot=="function")try{et.onCommitFiberRoot(Ue,g,void 0,(g.current.flags&128)===128)}catch{}if(j!==null){g=F.T,L=ee.p,ee.p=2,F.T=null;try{for(var D=m.onRecoverableError,q=0;q<j.length;q++){var xe=j[q];D(xe.value,{componentStack:xe.stack})}}finally{F.T=g,ee.p=L}}(Bl&3)!==0&&T0(),Fi(m),L=m.pendingLanes,(y&261930)!==0&&(L&42)!==0?m===X1?Ch++:(Ch=0,X1=m):Ch=0,Sh(0)}}function RO(m,g){(m.pooledCacheLanes&=g)===0&&(g=m.pooledCache,g!=null&&(m.pooledCache=null,rh(g)))}function T0(){return MO(),IO(),$O(),zO()}function zO(){if(Un!==5)return!1;var m=sc,g=K1;K1=0;var y=_e(Bl),j=F.T,L=ee.p;try{ee.p=32>y?32:y,F.T=null,y=Q1,Q1=null;var D=sc,q=Bl;if(Un=0,lm=sc=null,Bl=0,(ba&6)!==0)throw Error(s(331));var xe=ba;if(ba|=4,vO(D.current),xO(D,D.current,q,y),ba=xe,Sh(0,!1),et&&typeof et.onPostCommitFiberRoot=="function")try{et.onPostCommitFiberRoot(Ue,D)}catch{}return!0}finally{ee.p=L,F.T=j,RO(m,g)}}function UO(m,g,y){g=$r(y,g),g=T1(m.stateNode,g,2),m=Xo(m,g,2),m!==null&&(Ve(m,2),Fi(m))}function Sa(m,g,y){if(m.tag===3)UO(m,m,y);else for(;g!==null;){if(g.tag===3){UO(g,m,y);break}else if(g.tag===1){var j=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof j.componentDidCatch=="function"&&(nc===null||!nc.has(j))){m=$r(y,m),y=F3(2),j=Xo(g,y,2),j!==null&&(B3(y,j,g,m),Ve(j,2),Fi(j));break}}g=g.return}}function eC(m,g,y){var j=m.pingCache;if(j===null){j=m.pingCache=new mJ;var L=new Set;j.set(g,L)}else L=j.get(g),L===void 0&&(L=new Set,j.set(g,L));L.has(y)||(V1=!0,L.add(y),m=xJ.bind(null,m,g,y),g.then(m,m))}function xJ(m,g,y){var j=m.pingCache;j!==null&&j.delete(g),m.pingedLanes|=m.suspendedLanes&y,m.warmLanes&=~y,$a===m&&(la&y)===y&&(un===4||un===3&&(la&62914560)===la&&300>he()-j0?(ba&2)===0&&om(m,0):q1|=y,im===la&&(im=0)),Fi(m)}function FO(m,g){g===0&&(g=J()),m=ld(m,g),m!==null&&(Ve(m,g),Fi(m))}function yJ(m){var g=m.memoizedState,y=0;g!==null&&(y=g.retryLane),FO(m,y)}function bJ(m,g){var y=0;switch(m.tag){case 31:case 13:var j=m.stateNode,L=m.memoizedState;L!==null&&(y=L.retryLane);break;case 19:j=m.stateNode;break;case 22:j=m.stateNode._retryCache;break;default:throw Error(s(314))}j!==null&&j.delete(g),FO(m,y)}function vJ(m,g){return Ye(m,g)}var k0=null,dm=null,tC=!1,L0=!1,aC=!1,ic=0;function Fi(m){m!==dm&&m.next===null&&(dm===null?k0=dm=m:dm=dm.next=m),L0=!0,tC||(tC=!0,NJ())}function Sh(m,g){if(!aC&&L0){aC=!0;do for(var y=!1,j=k0;j!==null;){if(m!==0){var L=j.pendingLanes;if(L===0)var D=0;else{var q=j.suspendedLanes,xe=j.pingedLanes;D=(1<<31-Ee(42|m)+1)-1,D&=L&~(q&~xe),D=D&201326741?D&201326741|1:D?D|2:0}D!==0&&(y=!0,WO(j,D))}else D=la,D=K(j,j===$a?D:0,j.cancelPendingCommit!==null||j.timeoutHandle!==-1),(D&3)===0||Se(j,D)||(y=!0,WO(j,D));j=j.next}while(y);aC=!1}}function wJ(){BO()}function BO(){L0=tC=!1;var m=0;ic!==0&&PJ()&&(m=ic);for(var g=he(),y=null,j=k0;j!==null;){var L=j.next,D=HO(j,g);D===0?(j.next=null,y===null?k0=L:y.next=L,L===null&&(dm=y)):(y=j,(m!==0||(D&3)!==0)&&(L0=!0)),j=L}Un!==0&&Un!==5||Sh(m),ic!==0&&(ic=0)}function HO(m,g){for(var y=m.suspendedLanes,j=m.pingedLanes,L=m.expirationTimes,D=m.pendingLanes&-62914561;0<D;){var q=31-Ee(D),xe=1<<q,Re=L[q];Re===-1?((xe&y)===0||(xe&j)!==0)&&(L[q]=G(xe,g)):Re<=g&&(m.expiredLanes|=xe),D&=~xe}if(g=$a,y=la,y=K(m,m===g?y:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),j=m.callbackNode,y===0||m===g&&(Ca===2||Ca===9)||m.cancelPendingCommit!==null)return j!==null&&j!==null&&Ae(j),m.callbackNode=null,m.callbackPriority=0;if((y&3)===0||Se(m,y)){if(g=y&-y,g===m.callbackPriority)return g;switch(j!==null&&Ae(j),_e(y)){case 2:case 8:y=Qe;break;case 32:y=We;break;case 268435456:y=ze;break;default:y=We}return j=GO.bind(null,m),y=Ye(y,j),m.callbackPriority=g,m.callbackNode=y,g}return j!==null&&j!==null&&Ae(j),m.callbackPriority=2,m.callbackNode=null,2}function GO(m,g){if(Un!==0&&Un!==5)return m.callbackNode=null,m.callbackPriority=0,null;var y=m.callbackNode;if(T0()&&m.callbackNode!==y)return null;var j=la;return j=K(m,m===$a?j:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),j===0?null:(SO(m,j,g),HO(m,he()),m.callbackNode!=null&&m.callbackNode===y?GO.bind(null,m):null)}function WO(m,g){if(T0())return null;SO(m,g,!0)}function NJ(){OJ(function(){(ba&6)!==0?Ye(re,wJ):BO()})}function nC(){if(ic===0){var m=Ku;m===0&&(m=M,M<<=1,(M&261888)===0&&(M=256)),ic=m}return ic}function VO(m){return m==null||typeof m=="symbol"||typeof m=="boolean"?null:typeof m=="function"?m:zx(""+m)}function qO(m,g){var y=g.ownerDocument.createElement("input");return y.name=g.name,y.value=g.value,m.id&&y.setAttribute("form",m.id),g.parentNode.insertBefore(y,g),m=new FormData(m),y.parentNode.removeChild(y),m}function jJ(m,g,y,j,L){if(g==="submit"&&y&&y.stateNode===L){var D=VO((L[ue]||null).action),q=j.submitter;q&&(g=(g=q[ue]||null)?VO(g.formAction):q.getAttribute("formAction"),g!==null&&(D=g,q=null));var xe=new Hx("action","action",null,j,L);m.push({event:xe,listeners:[{instance:null,listener:function(){if(j.defaultPrevented){if(ic!==0){var Re=q?qO(L,q):new FormData(L);j1(y,{pending:!0,data:Re,method:L.method,action:D},null,Re)}}else typeof D=="function"&&(xe.preventDefault(),Re=q?qO(L,q):new FormData(L),j1(y,{pending:!0,data:Re,method:L.method,action:D},D,Re))},currentTarget:L}]})}}for(var sC=0;sC<Uj.length;sC++){var rC=Uj[sC],CJ=rC.toLowerCase(),SJ=rC[0].toUpperCase()+rC.slice(1);pi(CJ,"on"+SJ)}pi(CD,"onAnimationEnd"),pi(SD,"onAnimationIteration"),pi(_D,"onAnimationStart"),pi("dblclick","onDoubleClick"),pi("focusin","onFocus"),pi("focusout","onBlur"),pi(FZ,"onTransitionRun"),pi(BZ,"onTransitionStart"),pi(HZ,"onTransitionCancel"),pi(AD,"onTransitionEnd"),Mu("onMouseEnter",["mouseout","mouseover"]),Mu("onMouseLeave",["mouseout","mouseover"]),Mu("onPointerEnter",["pointerout","pointerover"]),Mu("onPointerLeave",["pointerout","pointerover"]),nd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),nd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),nd("onBeforeInput",["compositionend","keypress","textInput","paste"]),nd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),nd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),nd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _h="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_J=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_h));function YO(m,g){g=(g&4)!==0;for(var y=0;y<m.length;y++){var j=m[y],L=j.event;j=j.listeners;e:{var D=void 0;if(g)for(var q=j.length-1;0<=q;q--){var xe=j[q],Re=xe.instance,nt=xe.currentTarget;if(xe=xe.listener,Re!==D&&L.isPropagationStopped())break e;D=xe,L.currentTarget=nt;try{D(L)}catch(ut){Vx(ut)}L.currentTarget=null,D=Re}else for(q=0;q<j.length;q++){if(xe=j[q],Re=xe.instance,nt=xe.currentTarget,xe=xe.listener,Re!==D&&L.isPropagationStopped())break e;D=xe,L.currentTarget=nt;try{D(L)}catch(ut){Vx(ut)}L.currentTarget=null,D=Re}}}}function ra(m,g){var y=g[He];y===void 0&&(y=g[He]=new Set);var j=m+"__bubble";y.has(j)||(KO(g,m,2,!1),y.add(j))}function iC(m,g,y){var j=0;g&&(j|=4),KO(y,m,j,g)}var P0="_reactListening"+Math.random().toString(36).slice(2);function lC(m){if(!m[P0]){m[P0]=!0,BP.forEach(function(y){y!=="selectionchange"&&(_J.has(y)||iC(y,!1,m),iC(y,!0,m))});var g=m.nodeType===9?m:m.ownerDocument;g===null||g[P0]||(g[P0]=!0,iC("selectionchange",!1,g))}}function KO(m,g,y,j){switch(C5(g)){case 2:var L=eee;break;case 8:L=tee;break;default:L=NC}y=L.bind(null,g,y,m),L=void 0,!Aj||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(L=!0),j?L!==void 0?m.addEventListener(g,y,{capture:!0,passive:L}):m.addEventListener(g,y,!0):L!==void 0?m.addEventListener(g,y,{passive:L}):m.addEventListener(g,y,!1)}function oC(m,g,y,j,L){var D=j;if((g&1)===0&&(g&2)===0&&j!==null)e:for(;;){if(j===null)return;var q=j.tag;if(q===3||q===4){var xe=j.stateNode.containerInfo;if(xe===L)break;if(q===4)for(q=j.return;q!==null;){var Re=q.tag;if((Re===3||Re===4)&&q.stateNode.containerInfo===L)return;q=q.return}for(;xe!==null;){if(q=Ft(xe),q===null)return;if(Re=q.tag,Re===5||Re===6||Re===26||Re===27){j=D=q;continue e}xe=xe.parentNode}}j=j.return}eD(function(){var nt=D,ut=Sj(y),xt=[];e:{var rt=ED.get(m);if(rt!==void 0){var ct=Hx,Pt=m;switch(m){case"keypress":if(Fx(y)===0)break e;case"keydown":case"keyup":ct=bZ;break;case"focusin":Pt="focus",ct=Lj;break;case"focusout":Pt="blur",ct=Lj;break;case"beforeblur":case"afterblur":ct=Lj;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ct=nD;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ct=lZ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ct=NZ;break;case CD:case SD:case _D:ct=dZ;break;case AD:ct=CZ;break;case"scroll":case"scrollend":ct=rZ;break;case"wheel":ct=_Z;break;case"copy":case"cut":case"paste":ct=mZ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ct=rD;break;case"toggle":case"beforetoggle":ct=EZ}var Ht=(g&4)!==0,Oa=!Ht&&(m==="scroll"||m==="scrollend"),Ze=Ht?rt!==null?rt+"Capture":null:rt;Ht=[];for(var qe=nt,at;qe!==null;){var gt=qe;if(at=gt.stateNode,gt=gt.tag,gt!==5&&gt!==26&&gt!==27||at===null||Ze===null||(gt=Yf(qe,Ze),gt!=null&&Ht.push(Ah(qe,gt,at))),Oa)break;qe=qe.return}0<Ht.length&&(rt=new ct(rt,Pt,null,y,ut),xt.push({event:rt,listeners:Ht}))}}if((g&7)===0){e:{if(rt=m==="mouseover"||m==="pointerover",ct=m==="mouseout"||m==="pointerout",rt&&y!==Cj&&(Pt=y.relatedTarget||y.fromElement)&&(Ft(Pt)||Pt[se]))break e;if((ct||rt)&&(rt=ut.window===ut?ut:(rt=ut.ownerDocument)?rt.defaultView||rt.parentWindow:window,ct?(Pt=y.relatedTarget||y.toElement,ct=nt,Pt=Pt?Ft(Pt):null,Pt!==null&&(Oa=i(Pt),Ht=Pt.tag,Pt!==Oa||Ht!==5&&Ht!==27&&Ht!==6)&&(Pt=null)):(ct=null,Pt=nt),ct!==Pt)){if(Ht=nD,gt="onMouseLeave",Ze="onMouseEnter",qe="mouse",(m==="pointerout"||m==="pointerover")&&(Ht=rD,gt="onPointerLeave",Ze="onPointerEnter",qe="pointer"),Oa=ct==null?rt:Rn(ct),at=Pt==null?rt:Rn(Pt),rt=new Ht(gt,qe+"leave",ct,y,ut),rt.target=Oa,rt.relatedTarget=at,gt=null,Ft(ut)===nt&&(Ht=new Ht(Ze,qe+"enter",Pt,y,ut),Ht.target=at,Ht.relatedTarget=Oa,gt=Ht),Oa=gt,ct&&Pt)t:{for(Ht=AJ,Ze=ct,qe=Pt,at=0,gt=Ze;gt;gt=Ht(gt))at++;gt=0;for(var Ut=qe;Ut;Ut=Ht(Ut))gt++;for(;0<at-gt;)Ze=Ht(Ze),at--;for(;0<gt-at;)qe=Ht(qe),gt--;for(;at--;){if(Ze===qe||qe!==null&&Ze===qe.alternate){Ht=Ze;break t}Ze=Ht(Ze),qe=Ht(qe)}Ht=null}else Ht=null;ct!==null&&QO(xt,rt,ct,Ht,!1),Pt!==null&&Oa!==null&&QO(xt,Oa,Pt,Ht,!0)}}e:{if(rt=nt?Rn(nt):window,ct=rt.nodeName&&rt.nodeName.toLowerCase(),ct==="select"||ct==="input"&&rt.type==="file")var pa=fD;else if(uD(rt))if(hD)pa=RZ;else{pa=IZ;var $t=MZ}else ct=rt.nodeName,!ct||ct.toLowerCase()!=="input"||rt.type!=="checkbox"&&rt.type!=="radio"?nt&&jj(nt.elementType)&&(pa=fD):pa=$Z;if(pa&&(pa=pa(m,nt))){mD(xt,pa,y,ut);break e}$t&&$t(m,rt,nt),m==="focusout"&&nt&&rt.type==="number"&&nt.memoizedProps.value!=null&&Nj(rt,"number",rt.value)}switch($t=nt?Rn(nt):window,m){case"focusin":(uD($t)||$t.contentEditable==="true")&&(Fu=$t,$j=nt,ah=null);break;case"focusout":ah=$j=Fu=null;break;case"mousedown":Rj=!0;break;case"contextmenu":case"mouseup":case"dragend":Rj=!1,ND(xt,y,ut);break;case"selectionchange":if(UZ)break;case"keydown":case"keyup":ND(xt,y,ut)}var ea;if(Dj)e:{switch(m){case"compositionstart":var oa="onCompositionStart";break e;case"compositionend":oa="onCompositionEnd";break e;case"compositionupdate":oa="onCompositionUpdate";break e}oa=void 0}else Uu?cD(m,y)&&(oa="onCompositionEnd"):m==="keydown"&&y.keyCode===229&&(oa="onCompositionStart");oa&&(iD&&y.locale!=="ko"&&(Uu||oa!=="onCompositionStart"?oa==="onCompositionEnd"&&Uu&&(ea=tD()):(Go=ut,Ej="value"in Go?Go.value:Go.textContent,Uu=!0)),$t=D0(nt,oa),0<$t.length&&(oa=new sD(oa,m,null,y,ut),xt.push({event:oa,listeners:$t}),ea?oa.data=ea:(ea=dD(y),ea!==null&&(oa.data=ea)))),(ea=kZ?LZ(m,y):PZ(m,y))&&(oa=D0(nt,"onBeforeInput"),0<oa.length&&($t=new sD("onBeforeInput","beforeinput",null,y,ut),xt.push({event:$t,listeners:oa}),$t.data=ea)),jJ(xt,m,nt,y,ut)}YO(xt,g)})}function Ah(m,g,y){return{instance:m,listener:g,currentTarget:y}}function D0(m,g){for(var y=g+"Capture",j=[];m!==null;){var L=m,D=L.stateNode;if(L=L.tag,L!==5&&L!==26&&L!==27||D===null||(L=Yf(m,y),L!=null&&j.unshift(Ah(m,L,D)),L=Yf(m,g),L!=null&&j.push(Ah(m,L,D))),m.tag===3)return j;m=m.return}return[]}function AJ(m){if(m===null)return null;do m=m.return;while(m&&m.tag!==5&&m.tag!==27);return m||null}function QO(m,g,y,j,L){for(var D=g._reactName,q=[];y!==null&&y!==j;){var xe=y,Re=xe.alternate,nt=xe.stateNode;if(xe=xe.tag,Re!==null&&Re===j)break;xe!==5&&xe!==26&&xe!==27||nt===null||(Re=nt,L?(nt=Yf(y,D),nt!=null&&q.unshift(Ah(y,nt,Re))):L||(nt=Yf(y,D),nt!=null&&q.push(Ah(y,nt,Re)))),y=y.return}q.length!==0&&m.push({event:g,listeners:q})}var EJ=/\r\n?/g,TJ=/\u0000|\uFFFD/g;function XO(m){return(typeof m=="string"?m:""+m).replace(EJ,`
`).replace(TJ,"")}function ZO(m,g){return g=XO(g),XO(m)===g}function Da(m,g,y,j,L,D){switch(y){case"children":typeof j=="string"?g==="body"||g==="textarea"&&j===""||$u(m,j):(typeof j=="number"||typeof j=="bigint")&&g!=="body"&&$u(m,""+j);break;case"className":$x(m,"class",j);break;case"tabIndex":$x(m,"tabindex",j);break;case"dir":case"role":case"viewBox":case"width":case"height":$x(m,y,j);break;case"style":ZP(m,j,D);break;case"data":if(g!=="object"){$x(m,"data",j);break}case"src":case"href":if(j===""&&(g!=="a"||y!=="href")){m.removeAttribute(y);break}if(j==null||typeof j=="function"||typeof j=="symbol"||typeof j=="boolean"){m.removeAttribute(y);break}j=zx(""+j),m.setAttribute(y,j);break;case"action":case"formAction":if(typeof j=="function"){m.setAttribute(y,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof D=="function"&&(y==="formAction"?(g!=="input"&&Da(m,g,"name",L.name,L,null),Da(m,g,"formEncType",L.formEncType,L,null),Da(m,g,"formMethod",L.formMethod,L,null),Da(m,g,"formTarget",L.formTarget,L,null)):(Da(m,g,"encType",L.encType,L,null),Da(m,g,"method",L.method,L,null),Da(m,g,"target",L.target,L,null)));if(j==null||typeof j=="symbol"||typeof j=="boolean"){m.removeAttribute(y);break}j=zx(""+j),m.setAttribute(y,j);break;case"onClick":j!=null&&(m.onclick=Al);break;case"onScroll":j!=null&&ra("scroll",m);break;case"onScrollEnd":j!=null&&ra("scrollend",m);break;case"dangerouslySetInnerHTML":if(j!=null){if(typeof j!="object"||!("__html"in j))throw Error(s(61));if(y=j.__html,y!=null){if(L.children!=null)throw Error(s(60));m.innerHTML=y}}break;case"multiple":m.multiple=j&&typeof j!="function"&&typeof j!="symbol";break;case"muted":m.muted=j&&typeof j!="function"&&typeof j!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(j==null||typeof j=="function"||typeof j=="boolean"||typeof j=="symbol"){m.removeAttribute("xlink:href");break}y=zx(""+j),m.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",y);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":j!=null&&typeof j!="function"&&typeof j!="symbol"?m.setAttribute(y,""+j):m.removeAttribute(y);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":j&&typeof j!="function"&&typeof j!="symbol"?m.setAttribute(y,""):m.removeAttribute(y);break;case"capture":case"download":j===!0?m.setAttribute(y,""):j!==!1&&j!=null&&typeof j!="function"&&typeof j!="symbol"?m.setAttribute(y,j):m.removeAttribute(y);break;case"cols":case"rows":case"size":case"span":j!=null&&typeof j!="function"&&typeof j!="symbol"&&!isNaN(j)&&1<=j?m.setAttribute(y,j):m.removeAttribute(y);break;case"rowSpan":case"start":j==null||typeof j=="function"||typeof j=="symbol"||isNaN(j)?m.removeAttribute(y):m.setAttribute(y,j);break;case"popover":ra("beforetoggle",m),ra("toggle",m),Ix(m,"popover",j);break;case"xlinkActuate":_l(m,"http://www.w3.org/1999/xlink","xlink:actuate",j);break;case"xlinkArcrole":_l(m,"http://www.w3.org/1999/xlink","xlink:arcrole",j);break;case"xlinkRole":_l(m,"http://www.w3.org/1999/xlink","xlink:role",j);break;case"xlinkShow":_l(m,"http://www.w3.org/1999/xlink","xlink:show",j);break;case"xlinkTitle":_l(m,"http://www.w3.org/1999/xlink","xlink:title",j);break;case"xlinkType":_l(m,"http://www.w3.org/1999/xlink","xlink:type",j);break;case"xmlBase":_l(m,"http://www.w3.org/XML/1998/namespace","xml:base",j);break;case"xmlLang":_l(m,"http://www.w3.org/XML/1998/namespace","xml:lang",j);break;case"xmlSpace":_l(m,"http://www.w3.org/XML/1998/namespace","xml:space",j);break;case"is":Ix(m,"is",j);break;case"innerText":case"textContent":break;default:(!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(y=nZ.get(y)||y,Ix(m,y,j))}}function cC(m,g,y,j,L,D){switch(y){case"style":ZP(m,j,D);break;case"dangerouslySetInnerHTML":if(j!=null){if(typeof j!="object"||!("__html"in j))throw Error(s(61));if(y=j.__html,y!=null){if(L.children!=null)throw Error(s(60));m.innerHTML=y}}break;case"children":typeof j=="string"?$u(m,j):(typeof j=="number"||typeof j=="bigint")&&$u(m,""+j);break;case"onScroll":j!=null&&ra("scroll",m);break;case"onScrollEnd":j!=null&&ra("scrollend",m);break;case"onClick":j!=null&&(m.onclick=Al);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!HP.hasOwnProperty(y))e:{if(y[0]==="o"&&y[1]==="n"&&(L=y.endsWith("Capture"),g=y.slice(2,L?y.length-7:void 0),D=m[ue]||null,D=D!=null?D[y]:null,typeof D=="function"&&m.removeEventListener(g,D,L),typeof j=="function")){typeof D!="function"&&D!==null&&(y in m?m[y]=null:m.hasAttribute(y)&&m.removeAttribute(y)),m.addEventListener(g,j,L);break e}y in m?m[y]=j:j===!0?m.setAttribute(y,""):Ix(m,y,j)}}}function fs(m,g,y){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ra("error",m),ra("load",m);var j=!1,L=!1,D;for(D in y)if(y.hasOwnProperty(D)){var q=y[D];if(q!=null)switch(D){case"src":j=!0;break;case"srcSet":L=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,g));default:Da(m,g,D,q,y,null)}}L&&Da(m,g,"srcSet",y.srcSet,y,null),j&&Da(m,g,"src",y.src,y,null);return;case"input":ra("invalid",m);var xe=D=q=L=null,Re=null,nt=null;for(j in y)if(y.hasOwnProperty(j)){var ut=y[j];if(ut!=null)switch(j){case"name":L=ut;break;case"type":q=ut;break;case"checked":Re=ut;break;case"defaultChecked":nt=ut;break;case"value":D=ut;break;case"defaultValue":xe=ut;break;case"children":case"dangerouslySetInnerHTML":if(ut!=null)throw Error(s(137,g));break;default:Da(m,g,j,ut,y,null)}}YP(m,D,xe,Re,nt,q,L,!1);return;case"select":ra("invalid",m),j=q=D=null;for(L in y)if(y.hasOwnProperty(L)&&(xe=y[L],xe!=null))switch(L){case"value":D=xe;break;case"defaultValue":q=xe;break;case"multiple":j=xe;default:Da(m,g,L,xe,y,null)}g=D,y=q,m.multiple=!!j,g!=null?Iu(m,!!j,g,!1):y!=null&&Iu(m,!!j,y,!0);return;case"textarea":ra("invalid",m),D=L=j=null;for(q in y)if(y.hasOwnProperty(q)&&(xe=y[q],xe!=null))switch(q){case"value":j=xe;break;case"defaultValue":L=xe;break;case"children":D=xe;break;case"dangerouslySetInnerHTML":if(xe!=null)throw Error(s(91));break;default:Da(m,g,q,xe,y,null)}QP(m,j,L,D);return;case"option":for(Re in y)if(y.hasOwnProperty(Re)&&(j=y[Re],j!=null))switch(Re){case"selected":m.selected=j&&typeof j!="function"&&typeof j!="symbol";break;default:Da(m,g,Re,j,y,null)}return;case"dialog":ra("beforetoggle",m),ra("toggle",m),ra("cancel",m),ra("close",m);break;case"iframe":case"object":ra("load",m);break;case"video":case"audio":for(j=0;j<_h.length;j++)ra(_h[j],m);break;case"image":ra("error",m),ra("load",m);break;case"details":ra("toggle",m);break;case"embed":case"source":case"link":ra("error",m),ra("load",m);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(nt in y)if(y.hasOwnProperty(nt)&&(j=y[nt],j!=null))switch(nt){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,g));default:Da(m,g,nt,j,y,null)}return;default:if(jj(g)){for(ut in y)y.hasOwnProperty(ut)&&(j=y[ut],j!==void 0&&cC(m,g,ut,j,y,void 0));return}}for(xe in y)y.hasOwnProperty(xe)&&(j=y[xe],j!=null&&Da(m,g,xe,j,y,null))}function kJ(m,g,y,j){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var L=null,D=null,q=null,xe=null,Re=null,nt=null,ut=null;for(ct in y){var xt=y[ct];if(y.hasOwnProperty(ct)&&xt!=null)switch(ct){case"checked":break;case"value":break;case"defaultValue":Re=xt;default:j.hasOwnProperty(ct)||Da(m,g,ct,null,j,xt)}}for(var rt in j){var ct=j[rt];if(xt=y[rt],j.hasOwnProperty(rt)&&(ct!=null||xt!=null))switch(rt){case"type":D=ct;break;case"name":L=ct;break;case"checked":nt=ct;break;case"defaultChecked":ut=ct;break;case"value":q=ct;break;case"defaultValue":xe=ct;break;case"children":case"dangerouslySetInnerHTML":if(ct!=null)throw Error(s(137,g));break;default:ct!==xt&&Da(m,g,rt,ct,j,xt)}}wj(m,q,xe,Re,nt,ut,D,L);return;case"select":ct=q=xe=rt=null;for(D in y)if(Re=y[D],y.hasOwnProperty(D)&&Re!=null)switch(D){case"value":break;case"multiple":ct=Re;default:j.hasOwnProperty(D)||Da(m,g,D,null,j,Re)}for(L in j)if(D=j[L],Re=y[L],j.hasOwnProperty(L)&&(D!=null||Re!=null))switch(L){case"value":rt=D;break;case"defaultValue":xe=D;break;case"multiple":q=D;default:D!==Re&&Da(m,g,L,D,j,Re)}g=xe,y=q,j=ct,rt!=null?Iu(m,!!y,rt,!1):!!j!=!!y&&(g!=null?Iu(m,!!y,g,!0):Iu(m,!!y,y?[]:"",!1));return;case"textarea":ct=rt=null;for(xe in y)if(L=y[xe],y.hasOwnProperty(xe)&&L!=null&&!j.hasOwnProperty(xe))switch(xe){case"value":break;case"children":break;default:Da(m,g,xe,null,j,L)}for(q in j)if(L=j[q],D=y[q],j.hasOwnProperty(q)&&(L!=null||D!=null))switch(q){case"value":rt=L;break;case"defaultValue":ct=L;break;case"children":break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(s(91));break;default:L!==D&&Da(m,g,q,L,j,D)}KP(m,rt,ct);return;case"option":for(var Pt in y)if(rt=y[Pt],y.hasOwnProperty(Pt)&&rt!=null&&!j.hasOwnProperty(Pt))switch(Pt){case"selected":m.selected=!1;break;default:Da(m,g,Pt,null,j,rt)}for(Re in j)if(rt=j[Re],ct=y[Re],j.hasOwnProperty(Re)&&rt!==ct&&(rt!=null||ct!=null))switch(Re){case"selected":m.selected=rt&&typeof rt!="function"&&typeof rt!="symbol";break;default:Da(m,g,Re,rt,j,ct)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ht in y)rt=y[Ht],y.hasOwnProperty(Ht)&&rt!=null&&!j.hasOwnProperty(Ht)&&Da(m,g,Ht,null,j,rt);for(nt in j)if(rt=j[nt],ct=y[nt],j.hasOwnProperty(nt)&&rt!==ct&&(rt!=null||ct!=null))switch(nt){case"children":case"dangerouslySetInnerHTML":if(rt!=null)throw Error(s(137,g));break;default:Da(m,g,nt,rt,j,ct)}return;default:if(jj(g)){for(var Oa in y)rt=y[Oa],y.hasOwnProperty(Oa)&&rt!==void 0&&!j.hasOwnProperty(Oa)&&cC(m,g,Oa,void 0,j,rt);for(ut in j)rt=j[ut],ct=y[ut],!j.hasOwnProperty(ut)||rt===ct||rt===void 0&&ct===void 0||cC(m,g,ut,rt,j,ct);return}}for(var Ze in y)rt=y[Ze],y.hasOwnProperty(Ze)&&rt!=null&&!j.hasOwnProperty(Ze)&&Da(m,g,Ze,null,j,rt);for(xt in j)rt=j[xt],ct=y[xt],!j.hasOwnProperty(xt)||rt===ct||rt==null&&ct==null||Da(m,g,xt,rt,j,ct)}function JO(m){switch(m){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function LJ(){if(typeof performance.getEntriesByType=="function"){for(var m=0,g=0,y=performance.getEntriesByType("resource"),j=0;j<y.length;j++){var L=y[j],D=L.transferSize,q=L.initiatorType,xe=L.duration;if(D&&xe&&JO(q)){for(q=0,xe=L.responseEnd,j+=1;j<y.length;j++){var Re=y[j],nt=Re.startTime;if(nt>xe)break;var ut=Re.transferSize,xt=Re.initiatorType;ut&&JO(xt)&&(Re=Re.responseEnd,q+=ut*(Re<xe?1:(xe-nt)/(Re-nt)))}if(--j,g+=8*(D+q)/(L.duration/1e3),m++,10<m)break}}if(0<m)return g/m/1e6}return navigator.connection&&(m=navigator.connection.downlink,typeof m=="number")?m:5}var dC=null,uC=null;function O0(m){return m.nodeType===9?m:m.ownerDocument}function e5(m){switch(m){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function t5(m,g){if(m===0)switch(g){case"svg":return 1;case"math":return 2;default:return 0}return m===1&&g==="foreignObject"?0:m}function mC(m,g){return m==="textarea"||m==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.children=="bigint"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var fC=null;function PJ(){var m=window.event;return m&&m.type==="popstate"?m===fC?!1:(fC=m,!0):(fC=null,!1)}var a5=typeof setTimeout=="function"?setTimeout:void 0,DJ=typeof clearTimeout=="function"?clearTimeout:void 0,n5=typeof Promise=="function"?Promise:void 0,OJ=typeof queueMicrotask=="function"?queueMicrotask:typeof n5<"u"?function(m){return n5.resolve(null).then(m).catch(MJ)}:a5;function MJ(m){setTimeout(function(){throw m})}function lc(m){return m==="head"}function s5(m,g){var y=g,j=0;do{var L=y.nextSibling;if(m.removeChild(y),L&&L.nodeType===8)if(y=L.data,y==="/$"||y==="/&"){if(j===0){m.removeChild(L),hm(g);return}j--}else if(y==="$"||y==="$?"||y==="$~"||y==="$!"||y==="&")j++;else if(y==="html")Eh(m.ownerDocument.documentElement);else if(y==="head"){y=m.ownerDocument.head,Eh(y);for(var D=y.firstChild;D;){var q=D.nextSibling,xe=D.nodeName;D[Ct]||xe==="SCRIPT"||xe==="STYLE"||xe==="LINK"&&D.rel.toLowerCase()==="stylesheet"||y.removeChild(D),D=q}}else y==="body"&&Eh(m.ownerDocument.body);y=L}while(y);hm(g)}function r5(m,g){var y=m;m=0;do{var j=y.nextSibling;if(y.nodeType===1?g?(y._stashedDisplay=y.style.display,y.style.display="none"):(y.style.display=y._stashedDisplay||"",y.getAttribute("style")===""&&y.removeAttribute("style")):y.nodeType===3&&(g?(y._stashedText=y.nodeValue,y.nodeValue=""):y.nodeValue=y._stashedText||""),j&&j.nodeType===8)if(y=j.data,y==="/$"){if(m===0)break;m--}else y!=="$"&&y!=="$?"&&y!=="$~"&&y!=="$!"||m++;y=j}while(y)}function hC(m){var g=m.firstChild;for(g&&g.nodeType===10&&(g=g.nextSibling);g;){var y=g;switch(g=g.nextSibling,y.nodeName){case"HTML":case"HEAD":case"BODY":hC(y),kt(y);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(y.rel.toLowerCase()==="stylesheet")continue}m.removeChild(y)}}function IJ(m,g,y,j){for(;m.nodeType===1;){var L=y;if(m.nodeName.toLowerCase()!==g.toLowerCase()){if(!j&&(m.nodeName!=="INPUT"||m.type!=="hidden"))break}else if(j){if(!m[Ct])switch(g){case"meta":if(!m.hasAttribute("itemprop"))break;return m;case"link":if(D=m.getAttribute("rel"),D==="stylesheet"&&m.hasAttribute("data-precedence"))break;if(D!==L.rel||m.getAttribute("href")!==(L.href==null||L.href===""?null:L.href)||m.getAttribute("crossorigin")!==(L.crossOrigin==null?null:L.crossOrigin)||m.getAttribute("title")!==(L.title==null?null:L.title))break;return m;case"style":if(m.hasAttribute("data-precedence"))break;return m;case"script":if(D=m.getAttribute("src"),(D!==(L.src==null?null:L.src)||m.getAttribute("type")!==(L.type==null?null:L.type)||m.getAttribute("crossorigin")!==(L.crossOrigin==null?null:L.crossOrigin))&&D&&m.hasAttribute("async")&&!m.hasAttribute("itemprop"))break;return m;default:return m}}else if(g==="input"&&m.type==="hidden"){var D=L.name==null?null:""+L.name;if(L.type==="hidden"&&m.getAttribute("name")===D)return m}else return m;if(m=Br(m.nextSibling),m===null)break}return null}function $J(m,g,y){if(g==="")return null;for(;m.nodeType!==3;)if((m.nodeType!==1||m.nodeName!=="INPUT"||m.type!=="hidden")&&!y||(m=Br(m.nextSibling),m===null))return null;return m}function i5(m,g){for(;m.nodeType!==8;)if((m.nodeType!==1||m.nodeName!=="INPUT"||m.type!=="hidden")&&!g||(m=Br(m.nextSibling),m===null))return null;return m}function gC(m){return m.data==="$?"||m.data==="$~"}function pC(m){return m.data==="$!"||m.data==="$?"&&m.ownerDocument.readyState!=="loading"}function RJ(m,g){var y=m.ownerDocument;if(m.data==="$~")m._reactRetry=g;else if(m.data!=="$?"||y.readyState!=="loading")g();else{var j=function(){g(),y.removeEventListener("DOMContentLoaded",j)};y.addEventListener("DOMContentLoaded",j),m._reactRetry=j}}function Br(m){for(;m!=null;m=m.nextSibling){var g=m.nodeType;if(g===1||g===3)break;if(g===8){if(g=m.data,g==="$"||g==="$!"||g==="$?"||g==="$~"||g==="&"||g==="F!"||g==="F")break;if(g==="/$"||g==="/&")return null}}return m}var xC=null;function l5(m){m=m.nextSibling;for(var g=0;m;){if(m.nodeType===8){var y=m.data;if(y==="/$"||y==="/&"){if(g===0)return Br(m.nextSibling);g--}else y!=="$"&&y!=="$!"&&y!=="$?"&&y!=="$~"&&y!=="&"||g++}m=m.nextSibling}return null}function o5(m){m=m.previousSibling;for(var g=0;m;){if(m.nodeType===8){var y=m.data;if(y==="$"||y==="$!"||y==="$?"||y==="$~"||y==="&"){if(g===0)return m;g--}else y!=="/$"&&y!=="/&"||g++}m=m.previousSibling}return null}function c5(m,g,y){switch(g=O0(y),m){case"html":if(m=g.documentElement,!m)throw Error(s(452));return m;case"head":if(m=g.head,!m)throw Error(s(453));return m;case"body":if(m=g.body,!m)throw Error(s(454));return m;default:throw Error(s(451))}}function Eh(m){for(var g=m.attributes;g.length;)m.removeAttributeNode(g[0]);kt(m)}var Hr=new Map,d5=new Set;function M0(m){return typeof m.getRootNode=="function"?m.getRootNode():m.nodeType===9?m:m.ownerDocument}var Hl=ee.d;ee.d={f:zJ,r:UJ,D:FJ,C:BJ,L:HJ,m:GJ,X:VJ,S:WJ,M:qJ};function zJ(){var m=Hl.f(),g=_0();return m||g}function UJ(m){var g=ia(m);g!==null&&g.tag===5&&g.type==="form"?A3(g):Hl.r(m)}var um=typeof document>"u"?null:document;function u5(m,g,y){var j=um;if(j&&typeof g=="string"&&g){var L=Mr(g);L='link[rel="'+m+'"][href="'+L+'"]',typeof y=="string"&&(L+='[crossorigin="'+y+'"]'),d5.has(L)||(d5.add(L),m={rel:m,crossOrigin:y,href:g},j.querySelector(L)===null&&(g=j.createElement("link"),fs(g,"link",m),zn(g),j.head.appendChild(g)))}}function FJ(m){Hl.D(m),u5("dns-prefetch",m,null)}function BJ(m,g){Hl.C(m,g),u5("preconnect",m,g)}function HJ(m,g,y){Hl.L(m,g,y);var j=um;if(j&&m&&g){var L='link[rel="preload"][as="'+Mr(g)+'"]';g==="image"&&y&&y.imageSrcSet?(L+='[imagesrcset="'+Mr(y.imageSrcSet)+'"]',typeof y.imageSizes=="string"&&(L+='[imagesizes="'+Mr(y.imageSizes)+'"]')):L+='[href="'+Mr(m)+'"]';var D=L;switch(g){case"style":D=mm(m);break;case"script":D=fm(m)}Hr.has(D)||(m=f({rel:"preload",href:g==="image"&&y&&y.imageSrcSet?void 0:m,as:g},y),Hr.set(D,m),j.querySelector(L)!==null||g==="style"&&j.querySelector(Th(D))||g==="script"&&j.querySelector(kh(D))||(g=j.createElement("link"),fs(g,"link",m),zn(g),j.head.appendChild(g)))}}function GJ(m,g){Hl.m(m,g);var y=um;if(y&&m){var j=g&&typeof g.as=="string"?g.as:"script",L='link[rel="modulepreload"][as="'+Mr(j)+'"][href="'+Mr(m)+'"]',D=L;switch(j){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":D=fm(m)}if(!Hr.has(D)&&(m=f({rel:"modulepreload",href:m},g),Hr.set(D,m),y.querySelector(L)===null)){switch(j){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(y.querySelector(kh(D)))return}j=y.createElement("link"),fs(j,"link",m),zn(j),y.head.appendChild(j)}}}function WJ(m,g,y){Hl.S(m,g,y);var j=um;if(j&&m){var L=es(j).hoistableStyles,D=mm(m);g=g||"default";var q=L.get(D);if(!q){var xe={loading:0,preload:null};if(q=j.querySelector(Th(D)))xe.loading=5;else{m=f({rel:"stylesheet",href:m,"data-precedence":g},y),(y=Hr.get(D))&&yC(m,y);var Re=q=j.createElement("link");zn(Re),fs(Re,"link",m),Re._p=new Promise(function(nt,ut){Re.onload=nt,Re.onerror=ut}),Re.addEventListener("load",function(){xe.loading|=1}),Re.addEventListener("error",function(){xe.loading|=2}),xe.loading|=4,I0(q,g,j)}q={type:"stylesheet",instance:q,count:1,state:xe},L.set(D,q)}}}function VJ(m,g){Hl.X(m,g);var y=um;if(y&&m){var j=es(y).hoistableScripts,L=fm(m),D=j.get(L);D||(D=y.querySelector(kh(L)),D||(m=f({src:m,async:!0},g),(g=Hr.get(L))&&bC(m,g),D=y.createElement("script"),zn(D),fs(D,"link",m),y.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},j.set(L,D))}}function qJ(m,g){Hl.M(m,g);var y=um;if(y&&m){var j=es(y).hoistableScripts,L=fm(m),D=j.get(L);D||(D=y.querySelector(kh(L)),D||(m=f({src:m,async:!0,type:"module"},g),(g=Hr.get(L))&&bC(m,g),D=y.createElement("script"),zn(D),fs(D,"link",m),y.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},j.set(L,D))}}function m5(m,g,y,j){var L=(L=Ne.current)?M0(L):null;if(!L)throw Error(s(446));switch(m){case"meta":case"title":return null;case"style":return typeof y.precedence=="string"&&typeof y.href=="string"?(g=mm(y.href),y=es(L).hoistableStyles,j=y.get(g),j||(j={type:"style",instance:null,count:0,state:null},y.set(g,j)),j):{type:"void",instance:null,count:0,state:null};case"link":if(y.rel==="stylesheet"&&typeof y.href=="string"&&typeof y.precedence=="string"){m=mm(y.href);var D=es(L).hoistableStyles,q=D.get(m);if(q||(L=L.ownerDocument||L,q={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},D.set(m,q),(D=L.querySelector(Th(m)))&&!D._p&&(q.instance=D,q.state.loading=5),Hr.has(m)||(y={rel:"preload",as:"style",href:y.href,crossOrigin:y.crossOrigin,integrity:y.integrity,media:y.media,hrefLang:y.hrefLang,referrerPolicy:y.referrerPolicy},Hr.set(m,y),D||YJ(L,m,y,q.state))),g&&j===null)throw Error(s(528,""));return q}if(g&&j!==null)throw Error(s(529,""));return null;case"script":return g=y.async,y=y.src,typeof y=="string"&&g&&typeof g!="function"&&typeof g!="symbol"?(g=fm(y),y=es(L).hoistableScripts,j=y.get(g),j||(j={type:"script",instance:null,count:0,state:null},y.set(g,j)),j):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,m))}}function mm(m){return'href="'+Mr(m)+'"'}function Th(m){return'link[rel="stylesheet"]['+m+"]"}function f5(m){return f({},m,{"data-precedence":m.precedence,precedence:null})}function YJ(m,g,y,j){m.querySelector('link[rel="preload"][as="style"]['+g+"]")?j.loading=1:(g=m.createElement("link"),j.preload=g,g.addEventListener("load",function(){return j.loading|=1}),g.addEventListener("error",function(){return j.loading|=2}),fs(g,"link",y),zn(g),m.head.appendChild(g))}function fm(m){return'[src="'+Mr(m)+'"]'}function kh(m){return"script[async]"+m}function h5(m,g,y){if(g.count++,g.instance===null)switch(g.type){case"style":var j=m.querySelector('style[data-href~="'+Mr(y.href)+'"]');if(j)return g.instance=j,zn(j),j;var L=f({},y,{"data-href":y.href,"data-precedence":y.precedence,href:null,precedence:null});return j=(m.ownerDocument||m).createElement("style"),zn(j),fs(j,"style",L),I0(j,y.precedence,m),g.instance=j;case"stylesheet":L=mm(y.href);var D=m.querySelector(Th(L));if(D)return g.state.loading|=4,g.instance=D,zn(D),D;j=f5(y),(L=Hr.get(L))&&yC(j,L),D=(m.ownerDocument||m).createElement("link"),zn(D);var q=D;return q._p=new Promise(function(xe,Re){q.onload=xe,q.onerror=Re}),fs(D,"link",j),g.state.loading|=4,I0(D,y.precedence,m),g.instance=D;case"script":return D=fm(y.src),(L=m.querySelector(kh(D)))?(g.instance=L,zn(L),L):(j=y,(L=Hr.get(D))&&(j=f({},y),bC(j,L)),m=m.ownerDocument||m,L=m.createElement("script"),zn(L),fs(L,"link",j),m.head.appendChild(L),g.instance=L);case"void":return null;default:throw Error(s(443,g.type))}else g.type==="stylesheet"&&(g.state.loading&4)===0&&(j=g.instance,g.state.loading|=4,I0(j,y.precedence,m));return g.instance}function I0(m,g,y){for(var j=y.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),L=j.length?j[j.length-1]:null,D=L,q=0;q<j.length;q++){var xe=j[q];if(xe.dataset.precedence===g)D=xe;else if(D!==L)break}D?D.parentNode.insertBefore(m,D.nextSibling):(g=y.nodeType===9?y.head:y,g.insertBefore(m,g.firstChild))}function yC(m,g){m.crossOrigin==null&&(m.crossOrigin=g.crossOrigin),m.referrerPolicy==null&&(m.referrerPolicy=g.referrerPolicy),m.title==null&&(m.title=g.title)}function bC(m,g){m.crossOrigin==null&&(m.crossOrigin=g.crossOrigin),m.referrerPolicy==null&&(m.referrerPolicy=g.referrerPolicy),m.integrity==null&&(m.integrity=g.integrity)}var $0=null;function g5(m,g,y){if($0===null){var j=new Map,L=$0=new Map;L.set(y,j)}else L=$0,j=L.get(y),j||(j=new Map,L.set(y,j));if(j.has(m))return j;for(j.set(m,null),y=y.getElementsByTagName(m),L=0;L<y.length;L++){var D=y[L];if(!(D[Ct]||D[Ge]||m==="link"&&D.getAttribute("rel")==="stylesheet")&&D.namespaceURI!=="http://www.w3.org/2000/svg"){var q=D.getAttribute(g)||"";q=m+q;var xe=j.get(q);xe?xe.push(D):j.set(q,[D])}}return j}function p5(m,g,y){m=m.ownerDocument||m,m.head.insertBefore(y,g==="title"?m.querySelector("head > title"):null)}function KJ(m,g,y){if(y===1||g.itemProp!=null)return!1;switch(m){case"meta":case"title":return!0;case"style":if(typeof g.precedence!="string"||typeof g.href!="string"||g.href==="")break;return!0;case"link":if(typeof g.rel!="string"||typeof g.href!="string"||g.href===""||g.onLoad||g.onError)break;switch(g.rel){case"stylesheet":return m=g.disabled,typeof g.precedence=="string"&&m==null;default:return!0}case"script":if(g.async&&typeof g.async!="function"&&typeof g.async!="symbol"&&!g.onLoad&&!g.onError&&g.src&&typeof g.src=="string")return!0}return!1}function x5(m){return!(m.type==="stylesheet"&&(m.state.loading&3)===0)}function QJ(m,g,y,j){if(y.type==="stylesheet"&&(typeof j.media!="string"||matchMedia(j.media).matches!==!1)&&(y.state.loading&4)===0){if(y.instance===null){var L=mm(j.href),D=g.querySelector(Th(L));if(D){g=D._p,g!==null&&typeof g=="object"&&typeof g.then=="function"&&(m.count++,m=R0.bind(m),g.then(m,m)),y.state.loading|=4,y.instance=D,zn(D);return}D=g.ownerDocument||g,j=f5(j),(L=Hr.get(L))&&yC(j,L),D=D.createElement("link"),zn(D);var q=D;q._p=new Promise(function(xe,Re){q.onload=xe,q.onerror=Re}),fs(D,"link",j),y.instance=D}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(y,g),(g=y.state.preload)&&(y.state.loading&3)===0&&(m.count++,y=R0.bind(m),g.addEventListener("load",y),g.addEventListener("error",y))}}var vC=0;function XJ(m,g){return m.stylesheets&&m.count===0&&U0(m,m.stylesheets),0<m.count||0<m.imgCount?function(y){var j=setTimeout(function(){if(m.stylesheets&&U0(m,m.stylesheets),m.unsuspend){var D=m.unsuspend;m.unsuspend=null,D()}},6e4+g);0<m.imgBytes&&vC===0&&(vC=62500*LJ());var L=setTimeout(function(){if(m.waitingForImages=!1,m.count===0&&(m.stylesheets&&U0(m,m.stylesheets),m.unsuspend)){var D=m.unsuspend;m.unsuspend=null,D()}},(m.imgBytes>vC?50:800)+g);return m.unsuspend=y,function(){m.unsuspend=null,clearTimeout(j),clearTimeout(L)}}:null}function R0(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)U0(this,this.stylesheets);else if(this.unsuspend){var m=this.unsuspend;this.unsuspend=null,m()}}}var z0=null;function U0(m,g){m.stylesheets=null,m.unsuspend!==null&&(m.count++,z0=new Map,g.forEach(ZJ,m),z0=null,R0.call(m))}function ZJ(m,g){if(!(g.state.loading&4)){var y=z0.get(m);if(y)var j=y.get(null);else{y=new Map,z0.set(m,y);for(var L=m.querySelectorAll("link[data-precedence],style[data-precedence]"),D=0;D<L.length;D++){var q=L[D];(q.nodeName==="LINK"||q.getAttribute("media")!=="not all")&&(y.set(q.dataset.precedence,q),j=q)}j&&y.set(null,j)}L=g.instance,q=L.getAttribute("data-precedence"),D=y.get(q)||j,D===j&&y.set(null,L),y.set(q,L),this.count++,j=R0.bind(this),L.addEventListener("load",j),L.addEventListener("error",j),D?D.parentNode.insertBefore(L,D.nextSibling):(m=m.nodeType===9?m.head:m,m.insertBefore(L,m.firstChild)),g.state.loading|=4}}var Lh={$$typeof:S,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function JJ(m,g,y,j,L,D,q,xe,Re){this.tag=1,this.containerInfo=m,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=De(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=De(0),this.hiddenUpdates=De(null),this.identifierPrefix=j,this.onUncaughtError=L,this.onCaughtError=D,this.onRecoverableError=q,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Re,this.incompleteTransitions=new Map}function y5(m,g,y,j,L,D,q,xe,Re,nt,ut,xt){return m=new JJ(m,g,y,q,Re,nt,ut,xt,xe),g=1,D===!0&&(g|=24),D=fr(3,null,null,g),m.current=D,D.stateNode=m,g=Jj(),g.refCount++,m.pooledCache=g,g.refCount++,D.memoizedState={element:j,isDehydrated:y,cache:g},n1(D),m}function b5(m){return m?(m=Gu,m):Gu}function v5(m,g,y,j,L,D){L=b5(L),j.context===null?j.context=L:j.pendingContext=L,j=Qo(g),j.payload={element:y},D=D===void 0?null:D,D!==null&&(j.callback=D),y=Xo(m,j,g),y!==null&&(qs(y,m,g),ch(y,m,g))}function w5(m,g){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var y=m.retryLane;m.retryLane=y!==0&&y<g?y:g}}function wC(m,g){w5(m,g),(m=m.alternate)&&w5(m,g)}function N5(m){if(m.tag===13||m.tag===31){var g=ld(m,67108864);g!==null&&qs(g,m,67108864),wC(m,67108864)}}function j5(m){if(m.tag===13||m.tag===31){var g=yr();g=pt(g);var y=ld(m,g);y!==null&&qs(y,m,g),wC(m,g)}}var F0=!0;function eee(m,g,y,j){var L=F.T;F.T=null;var D=ee.p;try{ee.p=2,NC(m,g,y,j)}finally{ee.p=D,F.T=L}}function tee(m,g,y,j){var L=F.T;F.T=null;var D=ee.p;try{ee.p=8,NC(m,g,y,j)}finally{ee.p=D,F.T=L}}function NC(m,g,y,j){if(F0){var L=jC(j);if(L===null)oC(m,g,j,B0,y),S5(m,j);else if(nee(L,m,g,y,j))j.stopPropagation();else if(S5(m,j),g&4&&-1<aee.indexOf(m)){for(;L!==null;){var D=ia(L);if(D!==null)switch(D.tag){case 3:if(D=D.stateNode,D.current.memoizedState.isDehydrated){var q=te(D.pendingLanes);if(q!==0){var xe=D;for(xe.pendingLanes|=2,xe.entangledLanes|=2;q;){var Re=1<<31-Ee(q);xe.entanglements[1]|=Re,q&=~Re}Fi(D),(ba&6)===0&&(C0=he()+500,Sh(0))}}break;case 31:case 13:xe=ld(D,2),xe!==null&&qs(xe,D,2),_0(),wC(D,2)}if(D=jC(j),D===null&&oC(m,g,j,B0,y),D===L)break;L=D}L!==null&&j.stopPropagation()}else oC(m,g,j,null,y)}}function jC(m){return m=Sj(m),CC(m)}var B0=null;function CC(m){if(B0=null,m=Ft(m),m!==null){var g=i(m);if(g===null)m=null;else{var y=g.tag;if(y===13){if(m=l(g),m!==null)return m;m=null}else if(y===31){if(m=o(g),m!==null)return m;m=null}else if(y===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;m=null}else g!==m&&(m=null)}}return B0=m,null}function C5(m){switch(m){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Me()){case re:return 2;case Qe:return 8;case We:case dt:return 32;case ze:return 268435456;default:return 32}default:return 32}}var SC=!1,oc=null,cc=null,dc=null,Ph=new Map,Dh=new Map,uc=[],aee="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function S5(m,g){switch(m){case"focusin":case"focusout":oc=null;break;case"dragenter":case"dragleave":cc=null;break;case"mouseover":case"mouseout":dc=null;break;case"pointerover":case"pointerout":Ph.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dh.delete(g.pointerId)}}function Oh(m,g,y,j,L,D){return m===null||m.nativeEvent!==D?(m={blockedOn:g,domEventName:y,eventSystemFlags:j,nativeEvent:D,targetContainers:[L]},g!==null&&(g=ia(g),g!==null&&N5(g)),m):(m.eventSystemFlags|=j,g=m.targetContainers,L!==null&&g.indexOf(L)===-1&&g.push(L),m)}function nee(m,g,y,j,L){switch(g){case"focusin":return oc=Oh(oc,m,g,y,j,L),!0;case"dragenter":return cc=Oh(cc,m,g,y,j,L),!0;case"mouseover":return dc=Oh(dc,m,g,y,j,L),!0;case"pointerover":var D=L.pointerId;return Ph.set(D,Oh(Ph.get(D)||null,m,g,y,j,L)),!0;case"gotpointercapture":return D=L.pointerId,Dh.set(D,Oh(Dh.get(D)||null,m,g,y,j,L)),!0}return!1}function _5(m){var g=Ft(m.target);if(g!==null){var y=i(g);if(y!==null){if(g=y.tag,g===13){if(g=l(y),g!==null){m.blockedOn=g,ae(m.priority,function(){j5(y)});return}}else if(g===31){if(g=o(y),g!==null){m.blockedOn=g,ae(m.priority,function(){j5(y)});return}}else if(g===3&&y.stateNode.current.memoizedState.isDehydrated){m.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}m.blockedOn=null}function H0(m){if(m.blockedOn!==null)return!1;for(var g=m.targetContainers;0<g.length;){var y=jC(m.nativeEvent);if(y===null){y=m.nativeEvent;var j=new y.constructor(y.type,y);Cj=j,y.target.dispatchEvent(j),Cj=null}else return g=ia(y),g!==null&&N5(g),m.blockedOn=y,!1;g.shift()}return!0}function A5(m,g,y){H0(m)&&y.delete(g)}function see(){SC=!1,oc!==null&&H0(oc)&&(oc=null),cc!==null&&H0(cc)&&(cc=null),dc!==null&&H0(dc)&&(dc=null),Ph.forEach(A5),Dh.forEach(A5)}function G0(m,g){m.blockedOn===g&&(m.blockedOn=null,SC||(SC=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,see)))}var W0=null;function E5(m){W0!==m&&(W0=m,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){W0===m&&(W0=null);for(var g=0;g<m.length;g+=3){var y=m[g],j=m[g+1],L=m[g+2];if(typeof j!="function"){if(CC(j||y)===null)continue;break}var D=ia(y);D!==null&&(m.splice(g,3),g-=3,j1(D,{pending:!0,data:L,method:y.method,action:j},j,L))}}))}function hm(m){function g(Re){return G0(Re,m)}oc!==null&&G0(oc,m),cc!==null&&G0(cc,m),dc!==null&&G0(dc,m),Ph.forEach(g),Dh.forEach(g);for(var y=0;y<uc.length;y++){var j=uc[y];j.blockedOn===m&&(j.blockedOn=null)}for(;0<uc.length&&(y=uc[0],y.blockedOn===null);)_5(y),y.blockedOn===null&&uc.shift();if(y=(m.ownerDocument||m).$$reactFormReplay,y!=null)for(j=0;j<y.length;j+=3){var L=y[j],D=y[j+1],q=L[ue]||null;if(typeof D=="function")q||E5(y);else if(q){var xe=null;if(D&&D.hasAttribute("formAction")){if(L=D,q=D[ue]||null)xe=q.formAction;else if(CC(L)!==null)continue}else xe=q.action;typeof xe=="function"?y[j+1]=xe:(y.splice(j,3),j-=3),E5(y)}}}function T5(){function m(D){D.canIntercept&&D.info==="react-transition"&&D.intercept({handler:function(){return new Promise(function(q){return L=q})},focusReset:"manual",scroll:"manual"})}function g(){L!==null&&(L(),L=null),j||setTimeout(y,20)}function y(){if(!j&&!navigation.transition){var D=navigation.currentEntry;D&&D.url!=null&&navigation.navigate(D.url,{state:D.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var j=!1,L=null;return navigation.addEventListener("navigate",m),navigation.addEventListener("navigatesuccess",g),navigation.addEventListener("navigateerror",g),setTimeout(y,100),function(){j=!0,navigation.removeEventListener("navigate",m),navigation.removeEventListener("navigatesuccess",g),navigation.removeEventListener("navigateerror",g),L!==null&&(L(),L=null)}}}function _C(m){this._internalRoot=m}V0.prototype.render=_C.prototype.render=function(m){var g=this._internalRoot;if(g===null)throw Error(s(409));var y=g.current,j=yr();v5(y,j,m,g,null,null)},V0.prototype.unmount=_C.prototype.unmount=function(){var m=this._internalRoot;if(m!==null){this._internalRoot=null;var g=m.containerInfo;v5(m.current,2,null,m,null,null),_0(),g[se]=null}};function V0(m){this._internalRoot=m}V0.prototype.unstable_scheduleHydration=function(m){if(m){var g=W();m={blockedOn:null,target:m,priority:g};for(var y=0;y<uc.length&&g!==0&&g<uc[y].priority;y++);uc.splice(y,0,m),y===0&&_5(m)}};var k5=t.version;if(k5!=="19.2.0")throw Error(s(527,k5,"19.2.0"));ee.findDOMNode=function(m){var g=m._reactInternals;if(g===void 0)throw typeof m.render=="function"?Error(s(188)):(m=Object.keys(m).join(","),Error(s(268,m)));return m=d(g),m=m!==null?u(m):null,m=m===null?null:m.stateNode,m};var ree={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var q0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!q0.isDisabled&&q0.supportsFiber)try{Ue=q0.inject(ree),et=q0}catch{}}return Ih.createRoot=function(m,g){if(!r(m))throw Error(s(299));var y=!1,j="",L=$3,D=R3,q=z3;return g!=null&&(g.unstable_strictMode===!0&&(y=!0),g.identifierPrefix!==void 0&&(j=g.identifierPrefix),g.onUncaughtError!==void 0&&(L=g.onUncaughtError),g.onCaughtError!==void 0&&(D=g.onCaughtError),g.onRecoverableError!==void 0&&(q=g.onRecoverableError)),g=y5(m,1,!1,null,null,y,j,null,L,D,q,T5),m[se]=g.current,lC(m),new _C(g)},Ih.hydrateRoot=function(m,g,y){if(!r(m))throw Error(s(299));var j=!1,L="",D=$3,q=R3,xe=z3,Re=null;return y!=null&&(y.unstable_strictMode===!0&&(j=!0),y.identifierPrefix!==void 0&&(L=y.identifierPrefix),y.onUncaughtError!==void 0&&(D=y.onUncaughtError),y.onCaughtError!==void 0&&(q=y.onCaughtError),y.onRecoverableError!==void 0&&(xe=y.onRecoverableError),y.formState!==void 0&&(Re=y.formState)),g=y5(m,1,!0,g,y??null,j,L,Re,D,q,xe,T5),g.context=b5(null),y=g.current,j=yr(),j=pt(j),L=Qo(j),L.callback=null,Xo(y,L,j),y=j,g.current.lanes=y,Ve(g,y),Fi(g),m[se]=g.current,lC(m),new V0(g)},Ih.version="19.2.0",Ih}var U5;function gee(){if(U5)return TC.exports;U5=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),TC.exports=hee(),TC.exports}var pee=gee();/**
 * react-router v7.9.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var F5="popstate";function xee(e={}){function t(s,r){let{pathname:i,search:l,hash:o}=s.location;return CA("",{pathname:i,search:l,hash:o},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(s,r){return typeof r=="string"?r:Rg(r)}return bee(t,n,null,e)}function tn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ni(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function yee(){return Math.random().toString(36).substring(2,10)}function B5(e,t){return{usr:e.state,key:e.key,idx:t}}function CA(e,t,n=null,s){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Nf(t):t,state:n,key:t&&t.key||s||yee()}}function Rg({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Nf(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substring(s),e=e.substring(0,s)),e&&(t.pathname=e)}return t}function bee(e,t,n,s={}){let{window:r=document.defaultView,v5Compat:i=!1}=s,l=r.history,o="POP",c=null,d=u();d==null&&(d=0,l.replaceState({...l.state,idx:d},""));function u(){return(l.state||{idx:null}).idx}function f(){o="POP";let b=u(),C=b==null?null:b-d;d=b,c&&c({action:o,location:w.location,delta:C})}function p(b,C){o="PUSH";let N=CA(w.location,b,C);d=u()+1;let S=B5(N,d),A=w.createHref(N);try{l.pushState(S,"",A)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;r.location.assign(A)}i&&c&&c({action:o,location:w.location,delta:1})}function x(b,C){o="REPLACE";let N=CA(w.location,b,C);d=u();let S=B5(N,d),A=w.createHref(N);l.replaceState(S,"",A),i&&c&&c({action:o,location:w.location,delta:0})}function v(b){return vee(b)}let w={get action(){return o},get location(){return e(r,l)},listen(b){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(F5,f),c=b,()=>{r.removeEventListener(F5,f),c=null}},createHref(b){return t(r,b)},createURL:v,encodeLocation(b){let C=v(b);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:p,replace:x,go(b){return l.go(b)}};return w}function vee(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),tn(n,"No window.location.(origin|href) available to create URL");let s=typeof e=="string"?e:Rg(e);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function A8(e,t,n="/"){return wee(e,t,n,!1)}function wee(e,t,n,s){let r=typeof t=="string"?Nf(t):t,i=fo(r.pathname||"/",n);if(i==null)return null;let l=E8(e);Nee(l);let o=null;for(let c=0;o==null&&c<l.length;++c){let d=Dee(i);o=Lee(l[c],d,s)}return o}function E8(e,t=[],n=[],s="",r=!1){let i=(l,o,c=r,d)=>{let u={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(s)&&c)return;tn(u.relativePath.startsWith(s),`Absolute route path "${u.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(s.length)}let f=oo([s,u.relativePath]),p=n.concat(u);l.children&&l.children.length>0&&(tn(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),E8(l.children,t,p,f,c)),!(l.path==null&&!l.index)&&t.push({path:f,score:Tee(f,l.index),routesMeta:p})};return e.forEach((l,o)=>{if(l.path===""||!l.path?.includes("?"))i(l,o);else for(let c of T8(l.path))i(l,o,!0,c)}),t}function T8(e){let t=e.split("/");if(t.length===0)return[];let[n,...s]=t,r=n.endsWith("?"),i=n.replace(/\?$/,"");if(s.length===0)return r?[i,""]:[i];let l=T8(s.join("/")),o=[];return o.push(...l.map(c=>c===""?i:[i,c].join("/"))),r&&o.push(...l),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function Nee(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:kee(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var jee=/^:[\w-]+$/,Cee=3,See=2,_ee=1,Aee=10,Eee=-2,H5=e=>e==="*";function Tee(e,t){let n=e.split("/"),s=n.length;return n.some(H5)&&(s+=Eee),t&&(s+=See),n.filter(r=>!H5(r)).reduce((r,i)=>r+(jee.test(i)?Cee:i===""?_ee:Aee),s)}function kee(e,t){return e.length===t.length&&e.slice(0,-1).every((s,r)=>s===t[r])?e[e.length-1]-t[t.length-1]:0}function Lee(e,t,n=!1){let{routesMeta:s}=e,r={},i="/",l=[];for(let o=0;o<s.length;++o){let c=s[o],d=o===s.length-1,u=i==="/"?t:t.slice(i.length)||"/",f=Sb({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),p=c.route;if(!f&&d&&n&&!s[s.length-1].route.index&&(f=Sb({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!f)return null;Object.assign(r,f.params),l.push({params:r,pathname:oo([i,f.pathname]),pathnameBase:$ee(oo([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=oo([i,f.pathnameBase]))}return l}function Sb(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=Pee(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let i=r[0],l=i.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:s.reduce((d,{paramName:u,isOptional:f},p)=>{if(u==="*"){let v=o[p]||"";l=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const x=o[p];return f&&!x?d[u]=void 0:d[u]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:l,pattern:e}}function Pee(e,t=!1,n=!0){ni(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let s=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,c)=>(s.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(s.push({paramName:"*"}),r+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":e!==""&&e!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),s]}function Dee(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ni(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function fo(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&s!=="/"?null:e.slice(n)||"/"}function Oee(e,t="/"){let{pathname:n,search:s="",hash:r=""}=typeof e=="string"?Nf(e):e;return{pathname:n?n.startsWith("/")?n:Mee(n,t):t,search:Ree(s),hash:zee(r)}}function Mee(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function DC(e,t,n,s){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Iee(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function FT(e){let t=Iee(e);return t.map((n,s)=>s===t.length-1?n.pathname:n.pathnameBase)}function BT(e,t,n,s=!1){let r;typeof e=="string"?r=Nf(e):(r={...e},tn(!r.pathname||!r.pathname.includes("?"),DC("?","pathname","search",r)),tn(!r.pathname||!r.pathname.includes("#"),DC("#","pathname","hash",r)),tn(!r.search||!r.search.includes("#"),DC("#","search","hash",r)));let i=e===""||r.pathname==="",l=i?"/":r.pathname,o;if(l==null)o=n;else{let f=t.length-1;if(!s&&l.startsWith("..")){let p=l.split("/");for(;p[0]==="..";)p.shift(),f-=1;r.pathname=p.join("/")}o=f>=0?t[f]:"/"}let c=Oee(r,o),d=l&&l!=="/"&&l.endsWith("/"),u=(i||l===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}var oo=e=>e.join("/").replace(/\/\/+/g,"/"),$ee=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Ree=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,zee=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Uee(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var k8=["POST","PUT","PATCH","DELETE"];new Set(k8);var Fee=["GET",...k8];new Set(Fee);var jf=h.createContext(null);jf.displayName="DataRouter";var Yv=h.createContext(null);Yv.displayName="DataRouterState";h.createContext(!1);var L8=h.createContext({isTransitioning:!1});L8.displayName="ViewTransition";var Bee=h.createContext(new Map);Bee.displayName="Fetchers";var Hee=h.createContext(null);Hee.displayName="Await";var Mi=h.createContext(null);Mi.displayName="Navigation";var Np=h.createContext(null);Np.displayName="Location";var di=h.createContext({outlet:null,matches:[],isDataRoute:!1});di.displayName="Route";var HT=h.createContext(null);HT.displayName="RouteError";function Gee(e,{relative:t}={}){tn(Cf(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=h.useContext(Mi),{hash:r,pathname:i,search:l}=jp(e,{relative:t}),o=i;return n!=="/"&&(o=i==="/"?n:oo([n,i])),s.createHref({pathname:o,search:l,hash:r})}function Cf(){return h.useContext(Np)!=null}function Yt(){return tn(Cf(),"useLocation() may be used only in the context of a <Router> component."),h.useContext(Np).location}var P8="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function D8(e){h.useContext(Mi).static||h.useLayoutEffect(e)}function vt(){let{isDataRoute:e}=h.useContext(di);return e?rte():Wee()}function Wee(){tn(Cf(),"useNavigate() may be used only in the context of a <Router> component.");let e=h.useContext(jf),{basename:t,navigator:n}=h.useContext(Mi),{matches:s}=h.useContext(di),{pathname:r}=Yt(),i=JSON.stringify(FT(s)),l=h.useRef(!1);return D8(()=>{l.current=!0}),h.useCallback((c,d={})=>{if(ni(l.current,P8),!l.current)return;if(typeof c=="number"){n.go(c);return}let u=BT(c,JSON.parse(i),r,d.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:oo([t,u.pathname])),(d.replace?n.replace:n.push)(u,d.state,d)},[t,n,i,r,e])}var Vee=h.createContext(null);function qee(e){let t=h.useContext(di).outlet;return h.useMemo(()=>t&&h.createElement(Vee.Provider,{value:e},t),[t,e])}function Eo(){let{matches:e}=h.useContext(di),t=e[e.length-1];return t?t.params:{}}function jp(e,{relative:t}={}){let{matches:n}=h.useContext(di),{pathname:s}=Yt(),r=JSON.stringify(FT(n));return h.useMemo(()=>BT(e,JSON.parse(r),s,t==="path"),[e,r,s,t])}function Yee(e,t){return O8(e,t)}function O8(e,t,n,s,r){tn(Cf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=h.useContext(Mi),{matches:l}=h.useContext(di),o=l[l.length-1],c=o?o.params:{},d=o?o.pathname:"/",u=o?o.pathnameBase:"/",f=o&&o.route;{let N=f&&f.path||"";M8(d,!f||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let p=Yt(),x;if(t){let N=typeof t=="string"?Nf(t):t;tn(u==="/"||N.pathname?.startsWith(u),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${N.pathname}" was given in the \`location\` prop.`),x=N}else x=p;let v=x.pathname||"/",w=v;if(u!=="/"){let N=u.replace(/^\//,"").split("/");w="/"+v.replace(/^\//,"").split("/").slice(N.length).join("/")}let b=A8(e,{pathname:w});ni(f||b!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),ni(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=Jee(b&&b.map(N=>Object.assign({},N,{params:Object.assign({},c,N.params),pathname:oo([u,i.encodeLocation?i.encodeLocation(N.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?u:oo([u,i.encodeLocation?i.encodeLocation(N.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathnameBase])})),l,n,s,r);return t&&C?h.createElement(Np.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},C):C}function Kee(){let e=ste(),t=Uee(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},i={padding:"2px 4px",backgroundColor:s},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=h.createElement(h.Fragment,null,h.createElement("p",null," Hey developer "),h.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",h.createElement("code",{style:i},"ErrorBoundary")," or"," ",h.createElement("code",{style:i},"errorElement")," prop on your route.")),h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},t),n?h.createElement("pre",{style:r},n):null,l)}var Qee=h.createElement(Kee,null),Xee=class extends h.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?h.createElement(di.Provider,{value:this.props.routeContext},h.createElement(HT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Zee({routeContext:e,match:t,children:n}){let s=h.useContext(jf);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),h.createElement(di.Provider,{value:e},n)}function Jee(e,t=[],n=null,s=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,l=n?.errors;if(l!=null){let d=i.findIndex(u=>u.route.id&&l?.[u.route.id]!==void 0);tn(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),i=i.slice(0,Math.min(i.length,d+1))}let o=!1,c=-1;if(n)for(let d=0;d<i.length;d++){let u=i[d];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(c=d),u.route.id){let{loaderData:f,errors:p}=n,x=u.route.loader&&!f.hasOwnProperty(u.route.id)&&(!p||p[u.route.id]===void 0);if(u.route.lazy||x){o=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((d,u,f)=>{let p,x=!1,v=null,w=null;n&&(p=l&&u.route.id?l[u.route.id]:void 0,v=u.route.errorElement||Qee,o&&(c<0&&f===0?(M8("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,w=null):c===f&&(x=!0,w=u.route.hydrateFallbackElement||null)));let b=t.concat(i.slice(0,f+1)),C=()=>{let N;return p?N=v:x?N=w:u.route.Component?N=h.createElement(u.route.Component,null):u.route.element?N=u.route.element:N=d,h.createElement(Zee,{match:u,routeContext:{outlet:d,matches:b,isDataRoute:n!=null},children:N})};return n&&(u.route.ErrorBoundary||u.route.errorElement||f===0)?h.createElement(Xee,{location:n.location,revalidation:n.revalidation,component:v,error:p,children:C(),routeContext:{outlet:null,matches:b,isDataRoute:!0},unstable_onError:s}):C()},null)}function GT(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ete(e){let t=h.useContext(jf);return tn(t,GT(e)),t}function tte(e){let t=h.useContext(Yv);return tn(t,GT(e)),t}function ate(e){let t=h.useContext(di);return tn(t,GT(e)),t}function WT(e){let t=ate(e),n=t.matches[t.matches.length-1];return tn(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function nte(){return WT("useRouteId")}function ste(){let e=h.useContext(HT),t=tte("useRouteError"),n=WT("useRouteError");return e!==void 0?e:t.errors?.[n]}function rte(){let{router:e}=ete("useNavigate"),t=WT("useNavigate"),n=h.useRef(!1);return D8(()=>{n.current=!0}),h.useCallback(async(r,i={})=>{ni(n.current,P8),n.current&&(typeof r=="number"?e.navigate(r):await e.navigate(r,{fromRouteId:t,...i}))},[e,t])}var G5={};function M8(e,t,n){!t&&!G5[e]&&(G5[e]=!0,ni(!1,n))}h.memo(ite);function ite({routes:e,future:t,state:n,unstable_onError:s}){return O8(e,void 0,n,s,t)}function Qr({to:e,replace:t,state:n,relative:s}){tn(Cf(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=h.useContext(Mi);ni(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=h.useContext(di),{pathname:l}=Yt(),o=vt(),c=BT(e,FT(i),l,s==="path"),d=JSON.stringify(c);return h.useEffect(()=>{o(JSON.parse(d),{replace:t,state:n,relative:s})},[o,d,s,t,n]),null}function Cp(e){return qee(e.context)}function yt(e){tn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function lte({basename:e="/",children:t=null,location:n,navigationType:s="POP",navigator:r,static:i=!1}){tn(!Cf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),o=h.useMemo(()=>({basename:l,navigator:r,static:i,future:{}}),[l,r,i]);typeof n=="string"&&(n=Nf(n));let{pathname:c="/",search:d="",hash:u="",state:f=null,key:p="default"}=n,x=h.useMemo(()=>{let v=fo(c,l);return v==null?null:{location:{pathname:v,search:d,hash:u,state:f,key:p},navigationType:s}},[l,c,d,u,f,p,s]);return ni(x!=null,`<Router basename="${l}"> is not able to match the URL "${c}${d}${u}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:h.createElement(Mi.Provider,{value:o},h.createElement(Np.Provider,{children:t,value:x}))}function ote({children:e,location:t}){return Yee(SA(e),t)}function SA(e,t=[]){let n=[];return h.Children.forEach(e,(s,r)=>{if(!h.isValidElement(s))return;let i=[...t,r];if(s.type===h.Fragment){n.push.apply(n,SA(s.props.children,i));return}tn(s.type===yt,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),tn(!s.props.index||!s.props.children,"An index route cannot have child routes.");let l={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=SA(s.props.children,i)),n.push(l)}),n}var rb="get",ib="application/x-www-form-urlencoded";function Kv(e){return e!=null&&typeof e.tagName=="string"}function cte(e){return Kv(e)&&e.tagName.toLowerCase()==="button"}function dte(e){return Kv(e)&&e.tagName.toLowerCase()==="form"}function ute(e){return Kv(e)&&e.tagName.toLowerCase()==="input"}function mte(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function fte(e,t){return e.button===0&&(!t||t==="_self")&&!mte(e)}function _A(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let s=e[n];return t.concat(Array.isArray(s)?s.map(r=>[n,r]):[[n,s]])},[]))}function hte(e,t){let n=_A(e);return t&&t.forEach((s,r)=>{n.has(r)||t.getAll(r).forEach(i=>{n.append(r,i)})}),n}var Y0=null;function gte(){if(Y0===null)try{new FormData(document.createElement("form"),0),Y0=!1}catch{Y0=!0}return Y0}var pte=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function OC(e){return e!=null&&!pte.has(e)?(ni(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ib}"`),null):e}function xte(e,t){let n,s,r,i,l;if(dte(e)){let o=e.getAttribute("action");s=o?fo(o,t):null,n=e.getAttribute("method")||rb,r=OC(e.getAttribute("enctype"))||ib,i=new FormData(e)}else if(cte(e)||ute(e)&&(e.type==="submit"||e.type==="image")){let o=e.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||o.getAttribute("action");if(s=c?fo(c,t):null,n=e.getAttribute("formmethod")||o.getAttribute("method")||rb,r=OC(e.getAttribute("formenctype"))||OC(o.getAttribute("enctype"))||ib,i=new FormData(o,e),!gte()){let{name:d,type:u,value:f}=e;if(u==="image"){let p=d?`${d}.`:"";i.append(`${p}x`,"0"),i.append(`${p}y`,"0")}else d&&i.append(d,f)}}else{if(Kv(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=rb,s=null,r=ib,l=e}return i&&r==="text/plain"&&(l=i,i=void 0),{action:s,method:n.toLowerCase(),encType:r,formData:i,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function VT(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function yte(e,t,n){let s=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return s.pathname==="/"?s.pathname=`_root.${n}`:t&&fo(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function bte(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function vte(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function wte(e,t,n){let s=await Promise.all(e.map(async r=>{let i=t.routes[r.route.id];if(i){let l=await bte(i,n);return l.links?l.links():[]}return[]}));return Ste(s.flat(1).filter(vte).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function W5(e,t,n,s,r,i){let l=(c,d)=>n[d]?c.route.id!==n[d].route.id:!0,o=(c,d)=>n[d].pathname!==c.pathname||n[d].route.path?.endsWith("*")&&n[d].params["*"]!==c.params["*"];return i==="assets"?t.filter((c,d)=>l(c,d)||o(c,d)):i==="data"?t.filter((c,d)=>{let u=s.routes[c.route.id];if(!u||!u.hasLoader)return!1;if(l(c,d)||o(c,d))return!0;if(c.route.shouldRevalidate){let f=c.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function Nte(e,t,{includeHydrateFallback:n}={}){return jte(e.map(s=>{let r=t.routes[s.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function jte(e){return[...new Set(e)]}function Cte(e){let t={},n=Object.keys(e).sort();for(let s of n)t[s]=e[s];return t}function Ste(e,t){let n=new Set;return new Set(t),e.reduce((s,r)=>{let i=JSON.stringify(Cte(r));return n.has(i)||(n.add(i),s.push({key:i,link:r})),s},[])}function I8(){let e=h.useContext(jf);return VT(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function _te(){let e=h.useContext(Yv);return VT(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var qT=h.createContext(void 0);qT.displayName="FrameworkContext";function $8(){let e=h.useContext(qT);return VT(e,"You must render this element inside a <HydratedRouter> element"),e}function Ate(e,t){let n=h.useContext(qT),[s,r]=h.useState(!1),[i,l]=h.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:f}=t,p=h.useRef(null);h.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let w=C=>{C.forEach(N=>{l(N.isIntersecting)})},b=new IntersectionObserver(w,{threshold:.5});return p.current&&b.observe(p.current),()=>{b.disconnect()}}},[e]),h.useEffect(()=>{if(s){let w=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(w)}}},[s]);let x=()=>{r(!0)},v=()=>{r(!1),l(!1)};return n?e!=="intent"?[i,p,{}]:[i,p,{onFocus:$h(o,x),onBlur:$h(c,v),onMouseEnter:$h(d,x),onMouseLeave:$h(u,v),onTouchStart:$h(f,x)}]:[!1,p,{}]}function $h(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function Ete({page:e,...t}){let{router:n}=I8(),s=h.useMemo(()=>A8(n.routes,e,n.basename),[n.routes,e,n.basename]);return s?h.createElement(kte,{page:e,matches:s,...t}):null}function Tte(e){let{manifest:t,routeModules:n}=$8(),[s,r]=h.useState([]);return h.useEffect(()=>{let i=!1;return wte(e,t,n).then(l=>{i||r(l)}),()=>{i=!0}},[e,t,n]),s}function kte({page:e,matches:t,...n}){let s=Yt(),{manifest:r,routeModules:i}=$8(),{basename:l}=I8(),{loaderData:o,matches:c}=_te(),d=h.useMemo(()=>W5(e,t,c,r,s,"data"),[e,t,c,r,s]),u=h.useMemo(()=>W5(e,t,c,r,s,"assets"),[e,t,c,r,s]),f=h.useMemo(()=>{if(e===s.pathname+s.search+s.hash)return[];let v=new Set,w=!1;if(t.forEach(C=>{let N=r.routes[C.route.id];!N||!N.hasLoader||(!d.some(S=>S.route.id===C.route.id)&&C.route.id in o&&i[C.route.id]?.shouldRevalidate||N.hasClientLoader?w=!0:v.add(C.route.id))}),v.size===0)return[];let b=yte(e,l,"data");return w&&v.size>0&&b.searchParams.set("_routes",t.filter(C=>v.has(C.route.id)).map(C=>C.route.id).join(",")),[b.pathname+b.search]},[l,o,s,r,d,t,e,i]),p=h.useMemo(()=>Nte(u,r),[u,r]),x=Tte(u);return h.createElement(h.Fragment,null,f.map(v=>h.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...n})),p.map(v=>h.createElement("link",{key:v,rel:"modulepreload",href:v,...n})),x.map(({key:v,link:w})=>h.createElement("link",{key:v,nonce:n.nonce,...w})))}function Lte(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var R8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{R8&&(window.__reactRouterVersion="7.9.3")}catch{}function Pte({basename:e,children:t,window:n}){let s=h.useRef();s.current==null&&(s.current=xee({window:n,v5Compat:!0}));let r=s.current,[i,l]=h.useState({action:r.action,location:r.location}),o=h.useCallback(c=>{h.startTransition(()=>l(c))},[l]);return h.useLayoutEffect(()=>r.listen(o),[r,o]),h.createElement(lte,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:r})}var z8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,U8=h.forwardRef(function({onClick:t,discover:n="render",prefetch:s="none",relative:r,reloadDocument:i,replace:l,state:o,target:c,to:d,preventScrollReset:u,viewTransition:f,...p},x){let{basename:v}=h.useContext(Mi),w=typeof d=="string"&&z8.test(d),b,C=!1;if(typeof d=="string"&&w&&(b=d,R8))try{let I=new URL(window.location.href),z=d.startsWith("//")?new URL(I.protocol+d):new URL(d),$=fo(z.pathname,v);z.origin===I.origin&&$!=null?d=$+z.search+z.hash:C=!0}catch{ni(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let N=Gee(d,{relative:r}),[S,A,k]=Ate(s,p),_=Mte(d,{replace:l,state:o,target:c,preventScrollReset:u,relative:r,viewTransition:f});function T(I){t&&t(I),I.defaultPrevented||_(I)}let E=h.createElement("a",{...p,...k,href:b||N,onClick:C||i?t:T,ref:Lte(x,A),target:c,"data-discover":!w&&n==="render"?"true":void 0});return S&&!w?h.createElement(h.Fragment,null,E,h.createElement(Ete,{page:N})):E});U8.displayName="Link";var Ot=h.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:s="",end:r=!1,style:i,to:l,viewTransition:o,children:c,...d},u){let f=jp(l,{relative:d.relative}),p=Yt(),x=h.useContext(Yv),{navigator:v,basename:w}=h.useContext(Mi),b=x!=null&&Ute(f)&&o===!0,C=v.encodeLocation?v.encodeLocation(f).pathname:f.pathname,N=p.pathname,S=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;n||(N=N.toLowerCase(),S=S?S.toLowerCase():null,C=C.toLowerCase()),S&&w&&(S=fo(S,w)||S);const A=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let k=N===C||!r&&N.startsWith(C)&&N.charAt(A)==="/",_=S!=null&&(S===C||!r&&S.startsWith(C)&&S.charAt(C.length)==="/"),T={isActive:k,isPending:_,isTransitioning:b},E=k?t:void 0,I;typeof s=="function"?I=s(T):I=[s,k?"active":null,_?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let z=typeof i=="function"?i(T):i;return h.createElement(U8,{...d,"aria-current":E,className:I,ref:u,style:z,to:l,viewTransition:o},typeof c=="function"?c(T):c)});Ot.displayName="NavLink";var Dte=h.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:s,replace:r,state:i,method:l=rb,action:o,onSubmit:c,relative:d,preventScrollReset:u,viewTransition:f,...p},x)=>{let v=Rte(),w=zte(o,{relative:d}),b=l.toLowerCase()==="get"?"get":"post",C=typeof o=="string"&&z8.test(o),N=S=>{if(c&&c(S),S.defaultPrevented)return;S.preventDefault();let A=S.nativeEvent.submitter,k=A?.getAttribute("formmethod")||l;v(A||S.currentTarget,{fetcherKey:t,method:k,navigate:n,replace:r,state:i,relative:d,preventScrollReset:u,viewTransition:f})};return h.createElement("form",{ref:x,method:b,action:w,onSubmit:s?c:N,...p,"data-discover":!C&&e==="render"?"true":void 0})});Dte.displayName="Form";function Ote(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function F8(e){let t=h.useContext(jf);return tn(t,Ote(e)),t}function Mte(e,{target:t,replace:n,state:s,preventScrollReset:r,relative:i,viewTransition:l}={}){let o=vt(),c=Yt(),d=jp(e,{relative:i});return h.useCallback(u=>{if(fte(u,t)){u.preventDefault();let f=n!==void 0?n:Rg(c)===Rg(d);o(e,{replace:f,state:s,preventScrollReset:r,relative:i,viewTransition:l})}},[c,o,d,n,s,t,e,r,i,l])}function ks(e){ni(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=h.useRef(_A(e)),n=h.useRef(!1),s=Yt(),r=h.useMemo(()=>hte(s.search,n.current?null:t.current),[s.search]),i=vt(),l=h.useCallback((o,c)=>{const d=_A(typeof o=="function"?o(new URLSearchParams(r)):o);n.current=!0,i("?"+d,c)},[i,r]);return[r,l]}var Ite=0,$te=()=>`__${String(++Ite)}__`;function Rte(){let{router:e}=F8("useSubmit"),{basename:t}=h.useContext(Mi),n=nte();return h.useCallback(async(s,r={})=>{let{action:i,method:l,encType:o,formData:c,body:d}=xte(s,t);if(r.navigate===!1){let u=r.fetcherKey||$te();await e.fetch(u,n,r.action||i,{preventScrollReset:r.preventScrollReset,formData:c,body:d,formMethod:r.method||l,formEncType:r.encType||o,flushSync:r.flushSync})}else await e.navigate(r.action||i,{preventScrollReset:r.preventScrollReset,formData:c,body:d,formMethod:r.method||l,formEncType:r.encType||o,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[e,t,n])}function zte(e,{relative:t}={}){let{basename:n}=h.useContext(Mi),s=h.useContext(di);tn(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),i={...jp(e||".",{relative:t})},l=Yt();if(e==null){i.search=l.search;let o=new URLSearchParams(i.search),c=o.getAll("index");if(c.some(u=>u==="")){o.delete("index"),c.filter(f=>f).forEach(f=>o.append("index",f));let u=o.toString();i.search=u?`?${u}`:""}}return(!e||e===".")&&r.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:oo([n,i.pathname])),Rg(i)}function Ute(e,{relative:t}={}){let n=h.useContext(L8);tn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=F8("useViewTransitionState"),r=jp(e,{relative:t});if(!n.isTransitioning)return!1;let i=fo(n.currentLocation.pathname,s)||n.currentLocation.pathname,l=fo(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Sb(r.pathname,l)!=null||Sb(r.pathname,i)!=null}var Sf=_8();const K0=Oi(Sf);function B8(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=B8(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function Tt(){for(var e,t,n=0,s="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=B8(e))&&(s&&(s+=" "),s+=t);return s}function Fte(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}Fte(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Sp=e=>typeof e=="number"&&!isNaN(e),au=e=>typeof e=="string",ho=e=>typeof e=="function",Bte=e=>au(e)||Sp(e),AA=e=>au(e)||ho(e)?e:null,Hte=(e,t)=>e===!1||Sp(e)&&e>0?e:t,EA=e=>h.isValidElement(e)||au(e)||ho(e)||Sp(e);function Gte(e,t,n=300){let{scrollHeight:s,style:r}=e;requestAnimationFrame(()=>{r.minHeight="initial",r.height=s+"px",r.transition=`all ${n}ms`,requestAnimationFrame(()=>{r.height="0",r.padding="0",r.margin="0",setTimeout(t,n)})})}function Wte({enter:e,exit:t,appendPosition:n=!1,collapse:s=!0,collapseDuration:r=300}){return function({children:i,position:l,preventExitTransition:o,done:c,nodeRef:d,isIn:u,playToast:f}){let p=n?`${e}--${l}`:e,x=n?`${t}--${l}`:t,v=h.useRef(0);return h.useLayoutEffect(()=>{let w=d.current,b=p.split(" "),C=N=>{N.target===d.current&&(f(),w.removeEventListener("animationend",C),w.removeEventListener("animationcancel",C),v.current===0&&N.type!=="animationcancel"&&w.classList.remove(...b))};w.classList.add(...b),w.addEventListener("animationend",C),w.addEventListener("animationcancel",C)},[]),h.useEffect(()=>{let w=d.current,b=()=>{w.removeEventListener("animationend",b),s?Gte(w,c,r):c()};u||(o?b():(v.current=1,w.className+=` ${x}`,w.addEventListener("animationend",b)))},[u]),wt.createElement(wt.Fragment,null,i)}}function V5(e,t){return{content:H8(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function H8(e,t,n=!1){return h.isValidElement(e)&&!au(e.type)?h.cloneElement(e,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:n}):ho(e)?e({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:n}):e}function Vte({closeToast:e,theme:t,ariaLabel:n="close"}){return wt.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:s=>{s.stopPropagation(),e(!0)},"aria-label":n},wt.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},wt.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function qte({delay:e,isRunning:t,closeToast:n,type:s="default",hide:r,className:i,controlledProgress:l,progress:o,rtl:c,isIn:d,theme:u}){let f=r||l&&o===0,p={animationDuration:`${e}ms`,animationPlayState:t?"running":"paused"};l&&(p.transform=`scaleX(${o})`);let x=Tt("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${u}`,`Toastify__progress-bar--${s}`,{"Toastify__progress-bar--rtl":c}),v=ho(i)?i({rtl:c,type:s,defaultClassName:x}):Tt(x,i),w={[l&&o>=1?"onTransitionEnd":"onAnimationEnd"]:l&&o<1?null:()=>{d&&n()}};return wt.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":f},wt.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${u} Toastify__progress-bar--${s}`}),wt.createElement("div",{role:"progressbar","aria-hidden":f?"true":"false","aria-label":"notification timer",className:v,style:p,...w}))}var Yte=1,G8=()=>`${Yte++}`;function Kte(e,t,n){let s=1,r=0,i=[],l=[],o=t,c=new Map,d=new Set,u=N=>(d.add(N),()=>d.delete(N)),f=()=>{l=Array.from(c.values()),d.forEach(N=>N())},p=({containerId:N,toastId:S,updateId:A})=>{let k=N?N!==e:e!==1,_=c.has(S)&&A==null;return k||_},x=(N,S)=>{c.forEach(A=>{var k;(S==null||S===A.props.toastId)&&((k=A.toggle)==null||k.call(A,N))})},v=N=>{var S,A;(A=(S=N.props)==null?void 0:S.onClose)==null||A.call(S,N.removalReason),N.isActive=!1},w=N=>{if(N==null)c.forEach(v);else{let S=c.get(N);S&&v(S)}f()},b=()=>{r-=i.length,i=[]},C=N=>{var S,A;let{toastId:k,updateId:_}=N.props,T=_==null;N.staleId&&c.delete(N.staleId),N.isActive=!0,c.set(k,N),f(),n(V5(N,T?"added":"updated")),T&&((A=(S=N.props).onOpen)==null||A.call(S))};return{id:e,props:o,observe:u,toggle:x,removeToast:w,toasts:c,clearQueue:b,buildToast:(N,S)=>{if(p(S))return;let{toastId:A,updateId:k,data:_,staleId:T,delay:E}=S,I=k==null;I&&r++;let z={...o,style:o.toastStyle,key:s++,...Object.fromEntries(Object.entries(S).filter(([P,O])=>O!=null)),toastId:A,updateId:k,data:_,isIn:!1,className:AA(S.className||o.toastClassName),progressClassName:AA(S.progressClassName||o.progressClassName),autoClose:S.isLoading?!1:Hte(S.autoClose,o.autoClose),closeToast(P){c.get(A).removalReason=P,w(A)},deleteToast(){let P=c.get(A);if(P!=null){if(n(V5(P,"removed")),c.delete(A),r--,r<0&&(r=0),i.length>0){C(i.shift());return}f()}}};z.closeButton=o.closeButton,S.closeButton===!1||EA(S.closeButton)?z.closeButton=S.closeButton:S.closeButton===!0&&(z.closeButton=EA(o.closeButton)?o.closeButton:!0);let $={content:N,props:z,staleId:T};o.limit&&o.limit>0&&r>o.limit&&I?i.push($):Sp(E)?setTimeout(()=>{C($)},E):C($)},setProps(N){o=N},setToggle:(N,S)=>{let A=c.get(N);A&&(A.toggle=S)},isToastActive:N=>{var S;return(S=c.get(N))==null?void 0:S.isActive},getSnapshot:()=>l}}var Os=new Map,zg=[],TA=new Set,Qte=e=>TA.forEach(t=>t(e)),W8=()=>Os.size>0;function Xte(){zg.forEach(e=>q8(e.content,e.options)),zg=[]}var Zte=(e,{containerId:t})=>{var n;return(n=Os.get(t||1))==null?void 0:n.toasts.get(e)};function V8(e,t){var n;if(t)return!!((n=Os.get(t))!=null&&n.isToastActive(e));let s=!1;return Os.forEach(r=>{r.isToastActive(e)&&(s=!0)}),s}function Jte(e){if(!W8()){zg=zg.filter(t=>e!=null&&t.options.toastId!==e);return}if(e==null||Bte(e))Os.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=Os.get(e.containerId);t?t.removeToast(e.id):Os.forEach(n=>{n.removeToast(e.id)})}}var eae=(e={})=>{Os.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})};function q8(e,t){EA(e)&&(W8()||zg.push({content:e,options:t}),Os.forEach(n=>{n.buildToast(e,t)}))}function tae(e){var t;(t=Os.get(e.containerId||1))==null||t.setToggle(e.id,e.fn)}function Y8(e,t){Os.forEach(n=>{(t==null||!(t!=null&&t.containerId)||t?.containerId===n.id)&&n.toggle(e,t?.id)})}function aae(e){let t=e.containerId||1;return{subscribe(n){let s=Kte(t,e,Qte);Os.set(t,s);let r=s.observe(n);return Xte(),()=>{r(),Os.delete(t)}},setProps(n){var s;(s=Os.get(t))==null||s.setProps(n)},getSnapshot(){var n;return(n=Os.get(t))==null?void 0:n.getSnapshot()}}}function nae(e){return TA.add(e),()=>{TA.delete(e)}}function sae(e){return e&&(au(e.toastId)||Sp(e.toastId))?e.toastId:G8()}function _p(e,t){return q8(e,t),t.toastId}function Qv(e,t){return{...t,type:t&&t.type||e,toastId:sae(t)}}function Xv(e){return(t,n)=>_p(t,Qv(e,n))}function H(e,t){return _p(e,Qv("default",t))}H.loading=(e,t)=>_p(e,Qv("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function rae(e,{pending:t,error:n,success:s},r){let i;t&&(i=au(t)?H.loading(t,r):H.loading(t.render,{...r,...t}));let l={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},o=(d,u,f)=>{if(u==null){H.dismiss(i);return}let p={type:d,...l,...r,data:f},x=au(u)?{render:u}:u;return i?H.update(i,{...p,...x}):H(x.render,{...p,...x}),f},c=ho(e)?e():e;return c.then(d=>o("success",s,d)).catch(d=>o("error",n,d)),c}H.promise=rae;H.success=Xv("success");H.info=Xv("info");H.error=Xv("error");H.warning=Xv("warning");H.warn=H.warning;H.dark=(e,t)=>_p(e,Qv("default",{theme:"dark",...t}));function iae(e){Jte(e)}H.dismiss=iae;H.clearWaitingQueue=eae;H.isActive=V8;H.update=(e,t={})=>{let n=Zte(e,t);if(n){let{props:s,content:r}=n,i={delay:100,...s,...t,toastId:t.toastId||e,updateId:G8()};i.toastId!==e&&(i.staleId=e);let l=i.render||r;delete i.render,_p(l,i)}};H.done=e=>{H.update(e,{progress:1})};H.onChange=nae;H.play=e=>Y8(!0,e);H.pause=e=>Y8(!1,e);function lae(e){var t;let{subscribe:n,getSnapshot:s,setProps:r}=h.useRef(aae(e)).current;r(e);let i=(t=h.useSyncExternalStore(n,s,s))==null?void 0:t.slice();function l(o){if(!i)return[];let c=new Map;return e.newestOnTop&&i.reverse(),i.forEach(d=>{let{position:u}=d.props;c.has(u)||c.set(u,[]),c.get(u).push(d)}),Array.from(c,d=>o(d[0],d[1]))}return{getToastToRender:l,isToastActive:V8,count:i?.length}}function oae(e){let[t,n]=h.useState(!1),[s,r]=h.useState(!1),i=h.useRef(null),l=h.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:o,pauseOnHover:c,closeToast:d,onClick:u,closeOnClick:f}=e;tae({id:e.toastId,containerId:e.containerId,fn:n}),h.useEffect(()=>{if(e.pauseOnFocusLoss)return p(),()=>{x()}},[e.pauseOnFocusLoss]);function p(){document.hasFocus()||C(),window.addEventListener("focus",b),window.addEventListener("blur",C)}function x(){window.removeEventListener("focus",b),window.removeEventListener("blur",C)}function v(T){if(e.draggable===!0||e.draggable===T.pointerType){N();let E=i.current;l.canCloseOnClick=!0,l.canDrag=!0,E.style.transition="none",e.draggableDirection==="x"?(l.start=T.clientX,l.removalDistance=E.offsetWidth*(e.draggablePercent/100)):(l.start=T.clientY,l.removalDistance=E.offsetHeight*(e.draggablePercent===80?e.draggablePercent*1.5:e.draggablePercent)/100)}}function w(T){let{top:E,bottom:I,left:z,right:$}=i.current.getBoundingClientRect();T.nativeEvent.type!=="touchend"&&e.pauseOnHover&&T.clientX>=z&&T.clientX<=$&&T.clientY>=E&&T.clientY<=I?C():b()}function b(){n(!0)}function C(){n(!1)}function N(){l.didMove=!1,document.addEventListener("pointermove",A),document.addEventListener("pointerup",k)}function S(){document.removeEventListener("pointermove",A),document.removeEventListener("pointerup",k)}function A(T){let E=i.current;if(l.canDrag&&E){l.didMove=!0,t&&C(),e.draggableDirection==="x"?l.delta=T.clientX-l.start:l.delta=T.clientY-l.start,l.start!==T.clientX&&(l.canCloseOnClick=!1);let I=e.draggableDirection==="x"?`${l.delta}px, var(--y)`:`0, calc(${l.delta}px + var(--y))`;E.style.transform=`translate3d(${I},0)`,E.style.opacity=`${1-Math.abs(l.delta/l.removalDistance)}`}}function k(){S();let T=i.current;if(l.canDrag&&l.didMove&&T){if(l.canDrag=!1,Math.abs(l.delta)>l.removalDistance){r(!0),e.closeToast(!0),e.collapseAll();return}T.style.transition="transform 0.2s, opacity 0.2s",T.style.removeProperty("transform"),T.style.removeProperty("opacity")}}let _={onPointerDown:v,onPointerUp:w};return o&&c&&(_.onMouseEnter=C,e.stacked||(_.onMouseLeave=b)),f&&(_.onClick=T=>{u&&u(T),l.canCloseOnClick&&d(!0)}),{playToast:b,pauseToast:C,isRunning:t,preventExitTransition:s,toastRef:i,eventHandlers:_}}var cae=typeof window<"u"?h.useLayoutEffect:h.useEffect,Zv=({theme:e,type:t,isLoading:n,...s})=>wt.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${t})`,...s});function dae(e){return wt.createElement(Zv,{...e},wt.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function uae(e){return wt.createElement(Zv,{...e},wt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function mae(e){return wt.createElement(Zv,{...e},wt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function fae(e){return wt.createElement(Zv,{...e},wt.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function hae(){return wt.createElement("div",{className:"Toastify__spinner"})}var kA={info:uae,warning:dae,success:mae,error:fae,spinner:hae},gae=e=>e in kA;function pae({theme:e,type:t,isLoading:n,icon:s}){let r=null,i={theme:e,type:t};return s===!1||(ho(s)?r=s({...i,isLoading:n}):h.isValidElement(s)?r=h.cloneElement(s,i):n?r=kA.spinner():gae(t)&&(r=kA[t](i))),r}var xae=e=>{let{isRunning:t,preventExitTransition:n,toastRef:s,eventHandlers:r,playToast:i}=oae(e),{closeButton:l,children:o,autoClose:c,onClick:d,type:u,hideProgressBar:f,closeToast:p,transition:x,position:v,className:w,style:b,progressClassName:C,updateId:N,role:S,progress:A,rtl:k,toastId:_,deleteToast:T,isIn:E,isLoading:I,closeOnClick:z,theme:$,ariaLabel:P}=e,O=Tt("Toastify__toast",`Toastify__toast-theme--${$}`,`Toastify__toast--${u}`,{"Toastify__toast--rtl":k},{"Toastify__toast--close-on-click":z}),B=ho(w)?w({rtl:k,position:v,type:u,defaultClassName:O}):Tt(O,w),Q=pae(e),F=!!A||!c,ee={closeToast:p,type:u,theme:$},V=null;return l===!1||(ho(l)?V=l(ee):h.isValidElement(l)?V=h.cloneElement(l,ee):V=Vte(ee)),wt.createElement(x,{isIn:E,done:T,position:v,preventExitTransition:n,nodeRef:s,playToast:i},wt.createElement("div",{id:_,tabIndex:0,onClick:d,"data-in":E,className:B,...r,style:b,ref:s,...E&&{role:S,"aria-label":P}},Q!=null&&wt.createElement("div",{className:Tt("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!I})},Q),H8(o,e,!t),V,!e.customProgressBar&&wt.createElement(qte,{...N&&!F?{key:`p-${N}`}:{},rtl:k,theme:$,delay:c,isRunning:t,isIn:E,closeToast:p,hide:f,type:u,className:C,controlledProgress:F,progress:A||0})))},yae=(e,t=!1)=>({enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}),bae=Wte(yae("bounce",!0)),vae={position:"top-right",transition:bae,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&e.code==="KeyT"};function wae(e){let t={...vae,...e},n=e.stacked,[s,r]=h.useState(!0),i=h.useRef(null),{getToastToRender:l,isToastActive:o,count:c}=lae(t),{className:d,style:u,rtl:f,containerId:p,hotKeys:x}=t;function v(b){let C=Tt("Toastify__toast-container",`Toastify__toast-container--${b}`,{"Toastify__toast-container--rtl":f});return ho(d)?d({position:b,rtl:f,defaultClassName:C}):Tt(C,AA(d))}function w(){n&&(r(!0),H.play())}return cae(()=>{var b;if(n){let C=i.current.querySelectorAll('[data-in="true"]'),N=12,S=(b=t.position)==null?void 0:b.includes("top"),A=0,k=0;Array.from(C).reverse().forEach((_,T)=>{let E=_;E.classList.add("Toastify__toast--stacked"),T>0&&(E.dataset.collapsed=`${s}`),E.dataset.pos||(E.dataset.pos=S?"top":"bot");let I=A*(s?.2:1)+(s?0:N*T);E.style.setProperty("--y",`${S?I:I*-1}px`),E.style.setProperty("--g",`${N}`),E.style.setProperty("--s",`${1-(s?k:0)}`),A+=E.offsetHeight,k+=.025})}},[s,c,n]),h.useEffect(()=>{function b(C){var N;let S=i.current;x(C)&&((N=S.querySelector('[tabIndex="0"]'))==null||N.focus(),r(!1),H.pause()),C.key==="Escape"&&(document.activeElement===S||S!=null&&S.contains(document.activeElement))&&(r(!0),H.play())}return document.addEventListener("keydown",b),()=>{document.removeEventListener("keydown",b)}},[x]),wt.createElement("section",{ref:i,className:"Toastify",id:p,onMouseEnter:()=>{n&&(r(!1),H.pause())},onMouseLeave:w,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},l((b,C)=>{let N=C.length?{...u}:{...u,pointerEvents:"none"};return wt.createElement("div",{tabIndex:-1,className:v(b),"data-stacked":n,style:N,key:`c-${b}`},C.map(({content:S,props:A})=>wt.createElement(xae,{...A,stacked:n,collapseAll:w,isIn:o(A.toastId,A.containerId),key:`t-${A.key}`},S)))}))}function K8(e,t){return function(){return e.apply(t,arguments)}}const{toString:Nae}=Object.prototype,{getPrototypeOf:YT}=Object,{iterator:Jv,toStringTag:Q8}=Symbol,ew=(e=>t=>{const n=Nae.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ii=e=>(e=e.toLowerCase(),t=>ew(t)===e),tw=e=>t=>typeof t===e,{isArray:_f}=Array,ef=tw("undefined");function Ap(e){return e!==null&&!ef(e)&&e.constructor!==null&&!ef(e.constructor)&&er(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const X8=Ii("ArrayBuffer");function jae(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&X8(e.buffer),t}const Cae=tw("string"),er=tw("function"),Z8=tw("number"),Ep=e=>e!==null&&typeof e=="object",Sae=e=>e===!0||e===!1,lb=e=>{if(ew(e)!=="object")return!1;const t=YT(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Q8 in e)&&!(Jv in e)},_ae=e=>{if(!Ep(e)||Ap(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Aae=Ii("Date"),Eae=Ii("File"),Tae=Ii("Blob"),kae=Ii("FileList"),Lae=e=>Ep(e)&&er(e.pipe),Pae=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||er(e.append)&&((t=ew(e))==="formdata"||t==="object"&&er(e.toString)&&e.toString()==="[object FormData]"))},Dae=Ii("URLSearchParams"),[Oae,Mae,Iae,$ae]=["ReadableStream","Request","Response","Headers"].map(Ii),Rae=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Tp(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let s,r;if(typeof e!="object"&&(e=[e]),_f(e))for(s=0,r=e.length;s<r;s++)t.call(null,e[s],s,e);else{if(Ap(e))return;const i=n?Object.getOwnPropertyNames(e):Object.keys(e),l=i.length;let o;for(s=0;s<l;s++)o=i[s],t.call(null,e[o],o,e)}}function J8(e,t){if(Ap(e))return null;t=t.toLowerCase();const n=Object.keys(e);let s=n.length,r;for(;s-- >0;)if(r=n[s],t===r.toLowerCase())return r;return null}const Id=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,eB=e=>!ef(e)&&e!==Id;function LA(){const{caseless:e,skipUndefined:t}=eB(this)&&this||{},n={},s=(r,i)=>{const l=e&&J8(n,i)||i;lb(n[l])&&lb(r)?n[l]=LA(n[l],r):lb(r)?n[l]=LA({},r):_f(r)?n[l]=r.slice():(!t||!ef(r))&&(n[l]=r)};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Tp(arguments[r],s);return n}const zae=(e,t,n,{allOwnKeys:s}={})=>(Tp(t,(r,i)=>{n&&er(r)?e[i]=K8(r,n):e[i]=r},{allOwnKeys:s}),e),Uae=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Fae=(e,t,n,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Bae=(e,t,n,s)=>{let r,i,l;const o={};if(t=t||{},e==null)return t;do{for(r=Object.getOwnPropertyNames(e),i=r.length;i-- >0;)l=r[i],(!s||s(l,e,t))&&!o[l]&&(t[l]=e[l],o[l]=!0);e=n!==!1&&YT(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},Hae=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const s=e.indexOf(t,n);return s!==-1&&s===n},Gae=e=>{if(!e)return null;if(_f(e))return e;let t=e.length;if(!Z8(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Wae=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&YT(Uint8Array)),Vae=(e,t)=>{const s=(e&&e[Jv]).call(e);let r;for(;(r=s.next())&&!r.done;){const i=r.value;t.call(e,i[0],i[1])}},qae=(e,t)=>{let n;const s=[];for(;(n=e.exec(t))!==null;)s.push(n);return s},Yae=Ii("HTMLFormElement"),Kae=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,r){return s.toUpperCase()+r}),q5=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Qae=Ii("RegExp"),tB=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),s={};Tp(n,(r,i)=>{let l;(l=t(r,i,e))!==!1&&(s[i]=l||r)}),Object.defineProperties(e,s)},Xae=e=>{tB(e,(t,n)=>{if(er(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=e[n];if(er(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Zae=(e,t)=>{const n={},s=r=>{r.forEach(i=>{n[i]=!0})};return _f(e)?s(e):s(String(e).split(t)),n},Jae=()=>{},ene=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function tne(e){return!!(e&&er(e.append)&&e[Q8]==="FormData"&&e[Jv])}const ane=e=>{const t=new Array(10),n=(s,r)=>{if(Ep(s)){if(t.indexOf(s)>=0)return;if(Ap(s))return s;if(!("toJSON"in s)){t[r]=s;const i=_f(s)?[]:{};return Tp(s,(l,o)=>{const c=n(l,r+1);!ef(c)&&(i[o]=c)}),t[r]=void 0,i}}return s};return n(e,0)},nne=Ii("AsyncFunction"),sne=e=>e&&(Ep(e)||er(e))&&er(e.then)&&er(e.catch),aB=((e,t)=>e?setImmediate:t?((n,s)=>(Id.addEventListener("message",({source:r,data:i})=>{r===Id&&i===n&&s.length&&s.shift()()},!1),r=>{s.push(r),Id.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",er(Id.postMessage)),rne=typeof queueMicrotask<"u"?queueMicrotask.bind(Id):typeof process<"u"&&process.nextTick||aB,ine=e=>e!=null&&er(e[Jv]),ot={isArray:_f,isArrayBuffer:X8,isBuffer:Ap,isFormData:Pae,isArrayBufferView:jae,isString:Cae,isNumber:Z8,isBoolean:Sae,isObject:Ep,isPlainObject:lb,isEmptyObject:_ae,isReadableStream:Oae,isRequest:Mae,isResponse:Iae,isHeaders:$ae,isUndefined:ef,isDate:Aae,isFile:Eae,isBlob:Tae,isRegExp:Qae,isFunction:er,isStream:Lae,isURLSearchParams:Dae,isTypedArray:Wae,isFileList:kae,forEach:Tp,merge:LA,extend:zae,trim:Rae,stripBOM:Uae,inherits:Fae,toFlatObject:Bae,kindOf:ew,kindOfTest:Ii,endsWith:Hae,toArray:Gae,forEachEntry:Vae,matchAll:qae,isHTMLForm:Yae,hasOwnProperty:q5,hasOwnProp:q5,reduceDescriptors:tB,freezeMethods:Xae,toObjectSet:Zae,toCamelCase:Kae,noop:Jae,toFiniteNumber:ene,findKey:J8,global:Id,isContextDefined:eB,isSpecCompliantForm:tne,toJSONObject:ane,isAsyncFn:nne,isThenable:sne,setImmediate:aB,asap:rne,isIterable:ine};function Xt(e,t,n,s,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),s&&(this.request=s),r&&(this.response=r,this.status=r.status?r.status:null)}ot.inherits(Xt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ot.toJSONObject(this.config),code:this.code,status:this.status}}});const nB=Xt.prototype,sB={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{sB[e]={value:e}});Object.defineProperties(Xt,sB);Object.defineProperty(nB,"isAxiosError",{value:!0});Xt.from=(e,t,n,s,r,i)=>{const l=Object.create(nB);ot.toFlatObject(e,l,function(u){return u!==Error.prototype},d=>d!=="isAxiosError");const o=e&&e.message?e.message:"Error",c=t==null&&e?e.code:t;return Xt.call(l,o,c,n,s,r),e&&l.cause==null&&Object.defineProperty(l,"cause",{value:e,configurable:!0}),l.name=e&&e.name||"Error",i&&Object.assign(l,i),l};const lne=null;function PA(e){return ot.isPlainObject(e)||ot.isArray(e)}function rB(e){return ot.endsWith(e,"[]")?e.slice(0,-2):e}function Y5(e,t,n){return e?e.concat(t).map(function(r,i){return r=rB(r),!n&&i?"["+r+"]":r}).join(n?".":""):t}function one(e){return ot.isArray(e)&&!e.some(PA)}const cne=ot.toFlatObject(ot,{},null,function(t){return/^is[A-Z]/.test(t)});function aw(e,t,n){if(!ot.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=ot.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,b){return!ot.isUndefined(b[w])});const s=n.metaTokens,r=n.visitor||u,i=n.dots,l=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&ot.isSpecCompliantForm(t);if(!ot.isFunction(r))throw new TypeError("visitor must be a function");function d(v){if(v===null)return"";if(ot.isDate(v))return v.toISOString();if(ot.isBoolean(v))return v.toString();if(!c&&ot.isBlob(v))throw new Xt("Blob is not supported. Use a Buffer instead.");return ot.isArrayBuffer(v)||ot.isTypedArray(v)?c&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function u(v,w,b){let C=v;if(v&&!b&&typeof v=="object"){if(ot.endsWith(w,"{}"))w=s?w:w.slice(0,-2),v=JSON.stringify(v);else if(ot.isArray(v)&&one(v)||(ot.isFileList(v)||ot.endsWith(w,"[]"))&&(C=ot.toArray(v)))return w=rB(w),C.forEach(function(S,A){!(ot.isUndefined(S)||S===null)&&t.append(l===!0?Y5([w],A,i):l===null?w:w+"[]",d(S))}),!1}return PA(v)?!0:(t.append(Y5(b,w,i),d(v)),!1)}const f=[],p=Object.assign(cne,{defaultVisitor:u,convertValue:d,isVisitable:PA});function x(v,w){if(!ot.isUndefined(v)){if(f.indexOf(v)!==-1)throw Error("Circular reference detected in "+w.join("."));f.push(v),ot.forEach(v,function(C,N){(!(ot.isUndefined(C)||C===null)&&r.call(t,C,ot.isString(N)?N.trim():N,w,p))===!0&&x(C,w?w.concat(N):[N])}),f.pop()}}if(!ot.isObject(e))throw new TypeError("data must be an object");return x(e),t}function K5(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function KT(e,t){this._pairs=[],e&&aw(e,this,t)}const iB=KT.prototype;iB.append=function(t,n){this._pairs.push([t,n])};iB.toString=function(t){const n=t?function(s){return t.call(this,s,K5)}:K5;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function dne(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function lB(e,t,n){if(!t)return e;const s=n&&n.encode||dne;ot.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let i;if(r?i=r(t,n):i=ot.isURLSearchParams(t)?t.toString():new KT(t,n).toString(s),i){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class Q5{constructor(){this.handlers=[]}use(t,n,s){return this.handlers.push({fulfilled:t,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ot.forEach(this.handlers,function(s){s!==null&&t(s)})}}const oB={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},une=typeof URLSearchParams<"u"?URLSearchParams:KT,mne=typeof FormData<"u"?FormData:null,fne=typeof Blob<"u"?Blob:null,hne={isBrowser:!0,classes:{URLSearchParams:une,FormData:mne,Blob:fne},protocols:["http","https","file","blob","url","data"]},QT=typeof window<"u"&&typeof document<"u",DA=typeof navigator=="object"&&navigator||void 0,gne=QT&&(!DA||["ReactNative","NativeScript","NS"].indexOf(DA.product)<0),pne=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",xne=QT&&window.location.href||"http://localhost",yne=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:QT,hasStandardBrowserEnv:gne,hasStandardBrowserWebWorkerEnv:pne,navigator:DA,origin:xne},Symbol.toStringTag,{value:"Module"})),Cs={...yne,...hne};function bne(e,t){return aw(e,new Cs.classes.URLSearchParams,{visitor:function(n,s,r,i){return Cs.isNode&&ot.isBuffer(n)?(this.append(s,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function vne(e){return ot.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function wne(e){const t={},n=Object.keys(e);let s;const r=n.length;let i;for(s=0;s<r;s++)i=n[s],t[i]=e[i];return t}function cB(e){function t(n,s,r,i){let l=n[i++];if(l==="__proto__")return!0;const o=Number.isFinite(+l),c=i>=n.length;return l=!l&&ot.isArray(r)?r.length:l,c?(ot.hasOwnProp(r,l)?r[l]=[r[l],s]:r[l]=s,!o):((!r[l]||!ot.isObject(r[l]))&&(r[l]=[]),t(n,s,r[l],i)&&ot.isArray(r[l])&&(r[l]=wne(r[l])),!o)}if(ot.isFormData(e)&&ot.isFunction(e.entries)){const n={};return ot.forEachEntry(e,(s,r)=>{t(vne(s),r,n,0)}),n}return null}function Nne(e,t,n){if(ot.isString(e))try{return(t||JSON.parse)(e),ot.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(e)}const kp={transitional:oB,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const s=n.getContentType()||"",r=s.indexOf("application/json")>-1,i=ot.isObject(t);if(i&&ot.isHTMLForm(t)&&(t=new FormData(t)),ot.isFormData(t))return r?JSON.stringify(cB(t)):t;if(ot.isArrayBuffer(t)||ot.isBuffer(t)||ot.isStream(t)||ot.isFile(t)||ot.isBlob(t)||ot.isReadableStream(t))return t;if(ot.isArrayBufferView(t))return t.buffer;if(ot.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return bne(t,this.formSerializer).toString();if((o=ot.isFileList(t))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return aw(o?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||r?(n.setContentType("application/json",!1),Nne(t)):t}],transformResponse:[function(t){const n=this.transitional||kp.transitional,s=n&&n.forcedJSONParsing,r=this.responseType==="json";if(ot.isResponse(t)||ot.isReadableStream(t))return t;if(t&&ot.isString(t)&&(s&&!this.responseType||r)){const l=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(t,this.parseReviver)}catch(o){if(l)throw o.name==="SyntaxError"?Xt.from(o,Xt.ERR_BAD_RESPONSE,this,null,this.response):o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Cs.classes.FormData,Blob:Cs.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ot.forEach(["delete","get","head","post","put","patch"],e=>{kp.headers[e]={}});const jne=ot.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Cne=e=>{const t={};let n,s,r;return e&&e.split(`
`).forEach(function(l){r=l.indexOf(":"),n=l.substring(0,r).trim().toLowerCase(),s=l.substring(r+1).trim(),!(!n||t[n]&&jne[n])&&(n==="set-cookie"?t[n]?t[n].push(s):t[n]=[s]:t[n]=t[n]?t[n]+", "+s:s)}),t},X5=Symbol("internals");function Rh(e){return e&&String(e).trim().toLowerCase()}function ob(e){return e===!1||e==null?e:ot.isArray(e)?e.map(ob):String(e)}function Sne(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(e);)t[s[1]]=s[2];return t}const _ne=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function MC(e,t,n,s,r){if(ot.isFunction(s))return s.call(this,t,n);if(r&&(t=n),!!ot.isString(t)){if(ot.isString(s))return t.indexOf(s)!==-1;if(ot.isRegExp(s))return s.test(t)}}function Ane(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,s)=>n.toUpperCase()+s)}function Ene(e,t){const n=ot.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+n,{value:function(r,i,l){return this[s].call(this,t,r,i,l)},configurable:!0})})}let tr=class{constructor(t){t&&this.set(t)}set(t,n,s){const r=this;function i(o,c,d){const u=Rh(c);if(!u)throw new Error("header name must be a non-empty string");const f=ot.findKey(r,u);(!f||r[f]===void 0||d===!0||d===void 0&&r[f]!==!1)&&(r[f||c]=ob(o))}const l=(o,c)=>ot.forEach(o,(d,u)=>i(d,u,c));if(ot.isPlainObject(t)||t instanceof this.constructor)l(t,n);else if(ot.isString(t)&&(t=t.trim())&&!_ne(t))l(Cne(t),n);else if(ot.isObject(t)&&ot.isIterable(t)){let o={},c,d;for(const u of t){if(!ot.isArray(u))throw TypeError("Object iterator must return a key-value pair");o[d=u[0]]=(c=o[d])?ot.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}l(o,n)}else t!=null&&i(n,t,s);return this}get(t,n){if(t=Rh(t),t){const s=ot.findKey(this,t);if(s){const r=this[s];if(!n)return r;if(n===!0)return Sne(r);if(ot.isFunction(n))return n.call(this,r,s);if(ot.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Rh(t),t){const s=ot.findKey(this,t);return!!(s&&this[s]!==void 0&&(!n||MC(this,this[s],s,n)))}return!1}delete(t,n){const s=this;let r=!1;function i(l){if(l=Rh(l),l){const o=ot.findKey(s,l);o&&(!n||MC(s,s[o],o,n))&&(delete s[o],r=!0)}}return ot.isArray(t)?t.forEach(i):i(t),r}clear(t){const n=Object.keys(this);let s=n.length,r=!1;for(;s--;){const i=n[s];(!t||MC(this,this[i],i,t,!0))&&(delete this[i],r=!0)}return r}normalize(t){const n=this,s={};return ot.forEach(this,(r,i)=>{const l=ot.findKey(s,i);if(l){n[l]=ob(r),delete n[i];return}const o=t?Ane(i):String(i).trim();o!==i&&delete n[i],n[o]=ob(r),s[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return ot.forEach(this,(s,r)=>{s!=null&&s!==!1&&(n[r]=t&&ot.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const s=new this(t);return n.forEach(r=>s.set(r)),s}static accessor(t){const s=(this[X5]=this[X5]={accessors:{}}).accessors,r=this.prototype;function i(l){const o=Rh(l);s[o]||(Ene(r,l),s[o]=!0)}return ot.isArray(t)?t.forEach(i):i(t),this}};tr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ot.reduceDescriptors(tr.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[n]=s}}});ot.freezeMethods(tr);function IC(e,t){const n=this||kp,s=t||n,r=tr.from(s.headers);let i=s.data;return ot.forEach(e,function(o){i=o.call(n,i,r.normalize(),t?t.status:void 0)}),r.normalize(),i}function dB(e){return!!(e&&e.__CANCEL__)}function Af(e,t,n){Xt.call(this,e??"canceled",Xt.ERR_CANCELED,t,n),this.name="CanceledError"}ot.inherits(Af,Xt,{__CANCEL__:!0});function uB(e,t,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?e(n):t(new Xt("Request failed with status code "+n.status,[Xt.ERR_BAD_REQUEST,Xt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Tne(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function kne(e,t){e=e||10;const n=new Array(e),s=new Array(e);let r=0,i=0,l;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=s[i];l||(l=d),n[r]=c,s[r]=d;let f=i,p=0;for(;f!==r;)p+=n[f++],f=f%e;if(r=(r+1)%e,r===i&&(i=(i+1)%e),d-l<t)return;const x=u&&d-u;return x?Math.round(p*1e3/x):void 0}}function Lne(e,t){let n=0,s=1e3/t,r,i;const l=(d,u=Date.now())=>{n=u,r=null,i&&(clearTimeout(i),i=null),e(...d)};return[(...d)=>{const u=Date.now(),f=u-n;f>=s?l(d,u):(r=d,i||(i=setTimeout(()=>{i=null,l(r)},s-f)))},()=>r&&l(r)]}const _b=(e,t,n=3)=>{let s=0;const r=kne(50,250);return Lne(i=>{const l=i.loaded,o=i.lengthComputable?i.total:void 0,c=l-s,d=r(c),u=l<=o;s=l;const f={loaded:l,total:o,progress:o?l/o:void 0,bytes:c,rate:d||void 0,estimated:d&&o&&u?(o-l)/d:void 0,event:i,lengthComputable:o!=null,[t?"download":"upload"]:!0};e(f)},n)},Z5=(e,t)=>{const n=e!=null;return[s=>t[0]({lengthComputable:n,total:e,loaded:s}),t[1]]},J5=e=>(...t)=>ot.asap(()=>e(...t)),Pne=Cs.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Cs.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Cs.origin),Cs.navigator&&/(msie|trident)/i.test(Cs.navigator.userAgent)):()=>!0,Dne=Cs.hasStandardBrowserEnv?{write(e,t,n,s,r,i){const l=[e+"="+encodeURIComponent(t)];ot.isNumber(n)&&l.push("expires="+new Date(n).toGMTString()),ot.isString(s)&&l.push("path="+s),ot.isString(r)&&l.push("domain="+r),i===!0&&l.push("secure"),document.cookie=l.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function One(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Mne(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function mB(e,t,n){let s=!One(t);return e&&(s||n==!1)?Mne(e,t):t}const eM=e=>e instanceof tr?{...e}:e;function nu(e,t){t=t||{};const n={};function s(d,u,f,p){return ot.isPlainObject(d)&&ot.isPlainObject(u)?ot.merge.call({caseless:p},d,u):ot.isPlainObject(u)?ot.merge({},u):ot.isArray(u)?u.slice():u}function r(d,u,f,p){if(ot.isUndefined(u)){if(!ot.isUndefined(d))return s(void 0,d,f,p)}else return s(d,u,f,p)}function i(d,u){if(!ot.isUndefined(u))return s(void 0,u)}function l(d,u){if(ot.isUndefined(u)){if(!ot.isUndefined(d))return s(void 0,d)}else return s(void 0,u)}function o(d,u,f){if(f in t)return s(d,u);if(f in e)return s(void 0,d)}const c={url:i,method:i,data:i,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:o,headers:(d,u,f)=>r(eM(d),eM(u),f,!0)};return ot.forEach(Object.keys({...e,...t}),function(u){const f=c[u]||r,p=f(e[u],t[u],u);ot.isUndefined(p)&&f!==o||(n[u]=p)}),n}const fB=e=>{const t=nu({},e);let{data:n,withXSRFToken:s,xsrfHeaderName:r,xsrfCookieName:i,headers:l,auth:o}=t;if(t.headers=l=tr.from(l),t.url=lB(mB(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&l.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),ot.isFormData(n)){if(Cs.hasStandardBrowserEnv||Cs.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(ot.isFunction(n.getHeaders)){const c=n.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([u,f])=>{d.includes(u.toLowerCase())&&l.set(u,f)})}}if(Cs.hasStandardBrowserEnv&&(s&&ot.isFunction(s)&&(s=s(t)),s||s!==!1&&Pne(t.url))){const c=r&&i&&Dne.read(i);c&&l.set(r,c)}return t},Ine=typeof XMLHttpRequest<"u",$ne=Ine&&function(e){return new Promise(function(n,s){const r=fB(e);let i=r.data;const l=tr.from(r.headers).normalize();let{responseType:o,onUploadProgress:c,onDownloadProgress:d}=r,u,f,p,x,v;function w(){x&&x(),v&&v(),r.cancelToken&&r.cancelToken.unsubscribe(u),r.signal&&r.signal.removeEventListener("abort",u)}let b=new XMLHttpRequest;b.open(r.method.toUpperCase(),r.url,!0),b.timeout=r.timeout;function C(){if(!b)return;const S=tr.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),k={data:!o||o==="text"||o==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:S,config:e,request:b};uB(function(T){n(T),w()},function(T){s(T),w()},k),b=null}"onloadend"in b?b.onloadend=C:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(C)},b.onabort=function(){b&&(s(new Xt("Request aborted",Xt.ECONNABORTED,e,b)),b=null)},b.onerror=function(A){const k=A&&A.message?A.message:"Network Error",_=new Xt(k,Xt.ERR_NETWORK,e,b);_.event=A||null,s(_),b=null},b.ontimeout=function(){let A=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const k=r.transitional||oB;r.timeoutErrorMessage&&(A=r.timeoutErrorMessage),s(new Xt(A,k.clarifyTimeoutError?Xt.ETIMEDOUT:Xt.ECONNABORTED,e,b)),b=null},i===void 0&&l.setContentType(null),"setRequestHeader"in b&&ot.forEach(l.toJSON(),function(A,k){b.setRequestHeader(k,A)}),ot.isUndefined(r.withCredentials)||(b.withCredentials=!!r.withCredentials),o&&o!=="json"&&(b.responseType=r.responseType),d&&([p,v]=_b(d,!0),b.addEventListener("progress",p)),c&&b.upload&&([f,x]=_b(c),b.upload.addEventListener("progress",f),b.upload.addEventListener("loadend",x)),(r.cancelToken||r.signal)&&(u=S=>{b&&(s(!S||S.type?new Af(null,e,b):S),b.abort(),b=null)},r.cancelToken&&r.cancelToken.subscribe(u),r.signal&&(r.signal.aborted?u():r.signal.addEventListener("abort",u)));const N=Tne(r.url);if(N&&Cs.protocols.indexOf(N)===-1){s(new Xt("Unsupported protocol "+N+":",Xt.ERR_BAD_REQUEST,e));return}b.send(i||null)})},Rne=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let s=new AbortController,r;const i=function(d){if(!r){r=!0,o();const u=d instanceof Error?d:this.reason;s.abort(u instanceof Xt?u:new Af(u instanceof Error?u.message:u))}};let l=t&&setTimeout(()=>{l=null,i(new Xt(`timeout ${t} of ms exceeded`,Xt.ETIMEDOUT))},t);const o=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),e=null)};e.forEach(d=>d.addEventListener("abort",i));const{signal:c}=s;return c.unsubscribe=()=>ot.asap(o),c}},zne=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let s=0,r;for(;s<n;)r=s+t,yield e.slice(s,r),s=r},Une=async function*(e,t){for await(const n of Fne(e))yield*zne(n,t)},Fne=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:s}=await t.read();if(n)break;yield s}}finally{await t.cancel()}},tM=(e,t,n,s)=>{const r=Une(e,t);let i=0,l,o=c=>{l||(l=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await r.next();if(d){o(),c.close();return}let f=u.byteLength;if(n){let p=i+=f;n(p)}c.enqueue(new Uint8Array(u))}catch(d){throw o(d),d}},cancel(c){return o(c),r.return()}},{highWaterMark:2})},aM=64*1024,{isFunction:Q0}=ot,Bne=(({Request:e,Response:t})=>({Request:e,Response:t}))(ot.global),{ReadableStream:nM,TextEncoder:sM}=ot.global,rM=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Hne=e=>{e=ot.merge.call({skipUndefined:!0},Bne,e);const{fetch:t,Request:n,Response:s}=e,r=t?Q0(t):typeof fetch=="function",i=Q0(n),l=Q0(s);if(!r)return!1;const o=r&&Q0(nM),c=r&&(typeof sM=="function"?(v=>w=>v.encode(w))(new sM):async v=>new Uint8Array(await new n(v).arrayBuffer())),d=i&&o&&rM(()=>{let v=!1;const w=new n(Cs.origin,{body:new nM,method:"POST",get duplex(){return v=!0,"half"}}).headers.has("Content-Type");return v&&!w}),u=l&&o&&rM(()=>ot.isReadableStream(new s("").body)),f={stream:u&&(v=>v.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(v=>{!f[v]&&(f[v]=(w,b)=>{let C=w&&w[v];if(C)return C.call(w);throw new Xt(`Response type '${v}' is not supported`,Xt.ERR_NOT_SUPPORT,b)})});const p=async v=>{if(v==null)return 0;if(ot.isBlob(v))return v.size;if(ot.isSpecCompliantForm(v))return(await new n(Cs.origin,{method:"POST",body:v}).arrayBuffer()).byteLength;if(ot.isArrayBufferView(v)||ot.isArrayBuffer(v))return v.byteLength;if(ot.isURLSearchParams(v)&&(v=v+""),ot.isString(v))return(await c(v)).byteLength},x=async(v,w)=>{const b=ot.toFiniteNumber(v.getContentLength());return b??p(w)};return async v=>{let{url:w,method:b,data:C,signal:N,cancelToken:S,timeout:A,onDownloadProgress:k,onUploadProgress:_,responseType:T,headers:E,withCredentials:I="same-origin",fetchOptions:z}=fB(v),$=t||fetch;T=T?(T+"").toLowerCase():"text";let P=Rne([N,S&&S.toAbortSignal()],A),O=null;const B=P&&P.unsubscribe&&(()=>{P.unsubscribe()});let Q;try{if(_&&d&&b!=="get"&&b!=="head"&&(Q=await x(E,C))!==0){let Z=new n(w,{method:"POST",body:C,duplex:"half"}),R;if(ot.isFormData(C)&&(R=Z.headers.get("content-type"))&&E.setContentType(R),Z.body){const[ve,X]=Z5(Q,_b(J5(_)));C=tM(Z.body,aM,ve,X)}}ot.isString(I)||(I=I?"include":"omit");const F=i&&"credentials"in n.prototype,ee={...z,signal:P,method:b.toUpperCase(),headers:E.normalize().toJSON(),body:C,duplex:"half",credentials:F?I:void 0};O=i&&new n(w,ee);let V=await(i?$(O,z):$(w,ee));const de=u&&(T==="stream"||T==="response");if(u&&(k||de&&B)){const Z={};["status","statusText","headers"].forEach(je=>{Z[je]=V[je]});const R=ot.toFiniteNumber(V.headers.get("content-length")),[ve,X]=k&&Z5(R,_b(J5(k),!0))||[];V=new s(tM(V.body,aM,ve,()=>{X&&X(),B&&B()}),Z)}T=T||"text";let oe=await f[ot.findKey(f,T)||"text"](V,v);return!de&&B&&B(),await new Promise((Z,R)=>{uB(Z,R,{data:oe,headers:tr.from(V.headers),status:V.status,statusText:V.statusText,config:v,request:O})})}catch(F){throw B&&B(),F&&F.name==="TypeError"&&/Load failed|fetch/i.test(F.message)?Object.assign(new Xt("Network Error",Xt.ERR_NETWORK,v,O),{cause:F.cause||F}):Xt.from(F,F&&F.code,v,O)}}},Gne=new Map,hB=e=>{let t=e?e.env:{};const{fetch:n,Request:s,Response:r}=t,i=[s,r,n];let l=i.length,o=l,c,d,u=Gne;for(;o--;)c=i[o],d=u.get(c),d===void 0&&u.set(c,d=o?new Map:Hne(t)),u=d;return d};hB();const OA={http:lne,xhr:$ne,fetch:{get:hB}};ot.forEach(OA,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const iM=e=>`- ${e}`,Wne=e=>ot.isFunction(e)||e===null||e===!1,gB={getAdapter:(e,t)=>{e=ot.isArray(e)?e:[e];const{length:n}=e;let s,r;const i={};for(let l=0;l<n;l++){s=e[l];let o;if(r=s,!Wne(s)&&(r=OA[(o=String(s)).toLowerCase()],r===void 0))throw new Xt(`Unknown adapter '${o}'`);if(r&&(ot.isFunction(r)||(r=r.get(t))))break;i[o||"#"+l]=r}if(!r){const l=Object.entries(i).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let o=n?l.length>1?`since :
`+l.map(iM).join(`
`):" "+iM(l[0]):"as no adapter specified";throw new Xt("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:OA};function $C(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Af(null,e)}function lM(e){return $C(e),e.headers=tr.from(e.headers),e.data=IC.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),gB.getAdapter(e.adapter||kp.adapter,e)(e).then(function(s){return $C(e),s.data=IC.call(e,e.transformResponse,s),s.headers=tr.from(s.headers),s},function(s){return dB(s)||($C(e),s&&s.response&&(s.response.data=IC.call(e,e.transformResponse,s.response),s.response.headers=tr.from(s.response.headers))),Promise.reject(s)})}const pB="1.12.2",nw={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{nw[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const oM={};nw.transitional=function(t,n,s){function r(i,l){return"[Axios v"+pB+"] Transitional option '"+i+"'"+l+(s?". "+s:"")}return(i,l,o)=>{if(t===!1)throw new Xt(r(l," has been removed"+(n?" in "+n:"")),Xt.ERR_DEPRECATED);return n&&!oM[l]&&(oM[l]=!0,console.warn(r(l," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(i,l,o):!0}};nw.spelling=function(t){return(n,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function Vne(e,t,n){if(typeof e!="object")throw new Xt("options must be an object",Xt.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let r=s.length;for(;r-- >0;){const i=s[r],l=t[i];if(l){const o=e[i],c=o===void 0||l(o,i,e);if(c!==!0)throw new Xt("option "+i+" must be "+c,Xt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Xt("Unknown option "+i,Xt.ERR_BAD_OPTION)}}const cb={assertOptions:Vne,validators:nw},Bi=cb.validators;let Wd=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Q5,response:new Q5}}async request(t,n){try{return await this._request(t,n)}catch(s){if(s instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const i=r.stack?r.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=nu(this.defaults,n);const{transitional:s,paramsSerializer:r,headers:i}=n;s!==void 0&&cb.assertOptions(s,{silentJSONParsing:Bi.transitional(Bi.boolean),forcedJSONParsing:Bi.transitional(Bi.boolean),clarifyTimeoutError:Bi.transitional(Bi.boolean)},!1),r!=null&&(ot.isFunction(r)?n.paramsSerializer={serialize:r}:cb.assertOptions(r,{encode:Bi.function,serialize:Bi.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),cb.assertOptions(n,{baseUrl:Bi.spelling("baseURL"),withXsrfToken:Bi.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let l=i&&ot.merge(i.common,i[n.method]);i&&ot.forEach(["delete","get","head","post","put","patch","common"],v=>{delete i[v]}),n.headers=tr.concat(l,i);const o=[];let c=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(n)===!1||(c=c&&w.synchronous,o.unshift(w.fulfilled,w.rejected))});const d=[];this.interceptors.response.forEach(function(w){d.push(w.fulfilled,w.rejected)});let u,f=0,p;if(!c){const v=[lM.bind(this),void 0];for(v.unshift(...o),v.push(...d),p=v.length,u=Promise.resolve(n);f<p;)u=u.then(v[f++],v[f++]);return u}p=o.length;let x=n;for(;f<p;){const v=o[f++],w=o[f++];try{x=v(x)}catch(b){w.call(this,b);break}}try{u=lM.call(this,x)}catch(v){return Promise.reject(v)}for(f=0,p=d.length;f<p;)u=u.then(d[f++],d[f++]);return u}getUri(t){t=nu(this.defaults,t);const n=mB(t.baseURL,t.url,t.allowAbsoluteUrls);return lB(n,t.params,t.paramsSerializer)}};ot.forEach(["delete","get","head","options"],function(t){Wd.prototype[t]=function(n,s){return this.request(nu(s||{},{method:t,url:n,data:(s||{}).data}))}});ot.forEach(["post","put","patch"],function(t){function n(s){return function(i,l,o){return this.request(nu(o||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:l}))}}Wd.prototype[t]=n(),Wd.prototype[t+"Form"]=n(!0)});let qne=class xB{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const s=this;this.promise.then(r=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](r);s._listeners=null}),this.promise.then=r=>{let i;const l=new Promise(o=>{s.subscribe(o),i=o}).then(r);return l.cancel=function(){s.unsubscribe(i)},l},t(function(i,l,o){s.reason||(s.reason=new Af(i,l,o),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=s=>{t.abort(s)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new xB(function(r){t=r}),cancel:t}}};function Yne(e){return function(n){return e.apply(null,n)}}function Kne(e){return ot.isObject(e)&&e.isAxiosError===!0}const MA={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(MA).forEach(([e,t])=>{MA[t]=e});function yB(e){const t=new Wd(e),n=K8(Wd.prototype.request,t);return ot.extend(n,Wd.prototype,t,{allOwnKeys:!0}),ot.extend(n,t,null,{allOwnKeys:!0}),n.create=function(r){return yB(nu(e,r))},n}const jn=yB(kp);jn.Axios=Wd;jn.CanceledError=Af;jn.CancelToken=qne;jn.isCancel=dB;jn.VERSION=pB;jn.toFormData=aw;jn.AxiosError=Xt;jn.Cancel=jn.CanceledError;jn.all=function(t){return Promise.all(t)};jn.spread=Yne;jn.isAxiosError=Kne;jn.mergeConfig=nu;jn.AxiosHeaders=tr;jn.formToJSON=e=>cB(ot.isHTMLForm(e)?new FormData(e):e);jn.getAdapter=gB.getAdapter;jn.HttpStatusCode=MA;jn.default=jn;const{Axios:DHe,AxiosError:OHe,CanceledError:MHe,isCancel:IHe,CancelToken:$He,VERSION:RHe,all:zHe,Cancel:UHe,isAxiosError:FHe,spread:BHe,toFormData:HHe,AxiosHeaders:GHe,HttpStatusCode:WHe,formToJSON:VHe,getAdapter:qHe,mergeConfig:YHe}=jn,Qne="https://crm.sari-sari.com",ie=jn.create({baseURL:`${Qne}/api`,withCredentials:!0,headers:{"Content-Type":"application/json"}});ie.interceptors.request.use(e=>(console.log(` [${e.method?.toUpperCase()}] ${e.url}`),e),e=>Promise.reject(e));ie.interceptors.response.use(e=>e,e=>(e.response?.status===401&&(console.warn(" Unauthorized  possible expired token or not logged in."),localStorage.clear(),window.location.href="/login"),Promise.reject(e)));const Xne="isLoggedIn",X0="userRole",zs=()=>{const[e,t]=h.useState(!!localStorage.getItem(X0)),[n,s]=h.useState(localStorage.getItem(X0)||""),r=vt();h.useEffect(()=>{const d=localStorage.getItem(X0);d?(t(!0),s(d)):l()},[]);const i=d=>{localStorage.setItem(X0,d.role),localStorage.setItem(Xne,!0),t(!0),s(d.role)},l=()=>{localStorage.clear(),t(!1),s("")};return{isLoggedIn:e,logout:async()=>{try{await ie.post("/auth/logout")}catch(d){console.log("Failed to logout from server:",d)}l(),r("/")},userRole:n,setUserRole:s,login:d=>{i(d),d.role==="CEO"||d.role==="Admin"?r("/admin"):d.role==="Manager"?r("/manager/dashboard"):r("/")}}},zh=({children:e,requiredRole:t})=>{const{isLoggedIn:n,userRole:s}=zs();if(!n)return a.jsx(Qr,{to:"/",replace:!0});if(!t)return s.toUpperCase()==="ADMIN"||s.toUpperCase()==="CEO"?a.jsx(Qr,{to:"/admin/dashboard",replace:!0}):s==="GROUP MANAGER"?a.jsx(Qr,{to:"/group-manager/dashboard",replace:!0}):s==="MANAGER"?a.jsx(Qr,{to:"/manager/dashboard",replace:!0}):s==="SALES"?a.jsx(Qr,{to:"/sales/dashboard",replace:!0}):a.jsx(Qr,{to:"/",replace:!0});const r=s.toLowerCase(),i=t.toLowerCase();return r!==i?a.jsx(Qr,{to:"/",replace:!0}):e};var bB={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},cM=wt.createContext&&wt.createContext(bB),Zne=["attr","size","title"];function Jne(e,t){if(e==null)return{};var n=ese(e,t),s,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)s=i[r],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function ese(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function Ab(){return Ab=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ab.apply(this,arguments)}function dM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function Eb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dM(Object(n),!0).forEach(function(s){tse(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dM(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function tse(e,t,n){return t=ase(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ase(e){var t=nse(e,"string");return typeof t=="symbol"?t:t+""}function nse(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vB(e){return e&&e.map((t,n)=>wt.createElement(t.tag,Eb({key:n},t.attr),vB(t.child)))}function At(e){return t=>wt.createElement(sse,Ab({attr:Eb({},e.attr)},t),vB(e.child))}function sse(e){var t=n=>{var{attr:s,size:r,title:i}=e,l=Jne(e,Zne),o=r||n.size||"1em",c;return n.className&&(c=n.className),e.className&&(c=(c?c+" ":"")+e.className),wt.createElement("svg",Ab({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,s,l,{className:c,style:Eb(Eb({color:e.color||n.color},n.style),e.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),i&&wt.createElement("title",null,i),e.children)};return cM!==void 0?wt.createElement(cM.Consumer,null,n=>t(n)):t(bB)}function hl(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(e)}function Ef(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(e)}function Ac(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"21 8 21 21 3 21 3 8"},child:[]},{tag:"rect",attr:{x:"1",y:"3",width:"22",height:"5"},child:[]},{tag:"line",attr:{x1:"10",y1:"12",x2:"14",y2:"12"},child:[]}]})(e)}function sw(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"7",y1:"7",x2:"17",y2:"17"},child:[]},{tag:"polyline",attr:{points:"17 7 17 17 7 17"},child:[]}]})(e)}function IA(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"polyline",attr:{points:"19 12 12 19 5 12"},child:[]}]})(e)}function rse(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(e)}function rw(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 5 19 12 12 19"},child:[]}]})(e)}function Lp(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"7",y1:"17",x2:"17",y2:"7"},child:[]},{tag:"polyline",attr:{points:"7 7 17 7 17 17"},child:[]}]})(e)}function ise(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"19",x2:"12",y2:"5"},child:[]},{tag:"polyline",attr:{points:"5 12 12 5 19 12"},child:[]}]})(e)}function RC(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"8",r:"7"},child:[]},{tag:"polyline",attr:{points:"8.21 13.89 7 23 12 20 17 23 15.79 13.88"},child:[]}]})(e)}function lse(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(e)}function Pp(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"},child:[]},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"},child:[]}]})(e)}function iw(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"},child:[]}]})(e)}function Kt(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"},child:[]}]})(e)}function _t(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(e)}function wB(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"13",r:"4"},child:[]}]})(e)}function xn(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(e)}function Gt(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 11 12 14 22 4"},child:[]},{tag:"path",attr:{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"},child:[]}]})(e)}function XT(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(e)}function St(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(e)}function ose(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"},child:[]}]})(e)}function It(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"},child:[]}]})(e)}function cse(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(e)}function ys(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"},child:[]},{tag:"rect",attr:{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"},child:[]}]})(e)}function Is(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(e)}function Tf(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(e)}function To(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"7 10 12 15 17 10"},child:[]},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"},child:[]}]})(e)}function rn(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(e)}function nn(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(e)}function su(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},child:[]},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"},child:[]}]})(e)}function ru(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(e)}function ga(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(e)}function dse(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(e)}function Dp(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(e)}function NB(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"},child:[]}]})(e)}function ZT(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"3",y1:"9",x2:"21",y2:"9"},child:[]},{tag:"line",attr:{x1:"9",y1:"21",x2:"9",y2:"9"},child:[]}]})(e)}function rl(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(e)}function Ka(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(e)}function Op(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(e)}function Es(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M15.05 5A5 5 0 0 1 19 8.95M15.05 1A9 9 0 0 1 23 8.94m-1 7.98v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(e)}function Et(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(e)}function uM(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21.21 15.89A10 10 0 1 1 8 2.83"},child:[]},{tag:"path",attr:{d:"M22 12A10 10 0 0 0 12 2v10z"},child:[]}]})(e)}function da(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(e)}function JT(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},child:[]},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"},child:[]},{tag:"polyline",attr:{points:"7 3 7 8 15 8"},child:[]}]})(e)}function Bt(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(e)}function use(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"},child:[]},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"},child:[]}]})(e)}function ek(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(e)}function lw(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"},child:[]}]})(e)}function zc(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"5",y:"2",width:"14",height:"20",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"12",y1:"18",x2:"12.01",y2:"18"},child:[]}]})(e)}function ko(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"},child:[]}]})(e)}function Zs(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"6"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"2"},child:[]}]})(e)}function Wt(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(e)}function zC(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 18 13.5 8.5 8.5 13.5 1 6"},child:[]},{tag:"polyline",attr:{points:"17 18 23 18 23 12"},child:[]}]})(e)}function Vd(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(e)}function gl(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"polyline",attr:{points:"17 11 19 13 23 9"},child:[]}]})(e)}function Ba(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"20",y1:"8",x2:"20",y2:"14"},child:[]},{tag:"line",attr:{x1:"23",y1:"11",x2:"17",y2:"11"},child:[]}]})(e)}function pl(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"18",y1:"8",x2:"23",y2:"13"},child:[]},{tag:"line",attr:{x1:"23",y1:"8",x2:"18",y2:"13"},child:[]}]})(e)}function Zt(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(e)}function La(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(e)}function Ts(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"15",y1:"9",x2:"9",y2:"15"},child:[]},{tag:"line",attr:{x1:"9",y1:"9",x2:"15",y2:"15"},child:[]}]})(e)}function Vt(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(e)}const jB=()=>{const[e,t]=h.useState(!1),n=h.useRef(null);return h.useEffect(()=>{const s=r=>{n.current&&!n.current.contains(r.target)&&t(!1)};return document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[]),h.useEffect(()=>{const s=()=>{e&&t(!1)};return window.addEventListener("scroll",s),()=>{window.removeEventListener("scroll",s)}},[e]),a.jsx("header",{className:"sticky top-0 z-50 bg-tertiary shadow-xl border-b border-tertiary",children:a.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between h-16",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsxs("span",{className:"text-2xl font-black text-white",children:["Sari-Sari ",a.jsx("span",{className:"text-accent",children:" CRM"})]})}),a.jsxs("nav",{className:"hidden md:flex space-x-8 text-white font-medium",children:[a.jsx("a",{href:"#platform",className:"hover:text-accent transition duration-150",children:"Platform"}),a.jsx("a",{href:"#solutions",className:"hover:text-accent transition duration-150",children:"Solutions"}),a.jsx("a",{href:"#insights",className:"hover:text-accent transition duration-150",children:"Insights"}),a.jsx("a",{href:"#pricing",className:"hover:text-accent transition duration-150",children:"Pricing"})]}),a.jsxs("div",{className:"hidden sm:flex items-center space-x-4",children:[a.jsx("a",{href:"/login",className:"text-sm font-medium text-white hover:text-accent transition duration-500",children:"Log In"}),a.jsx("a",{href:"/signup",className:"inline-flex items-center justify-center px-4 py-2 text-sm font-semibold rounded-full shadow-lg border border-secondary text-white bg-secondary hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-500",children:"Start for Free"})]}),a.jsxs("div",{className:"flex sm:hidden items-center relative",ref:n,children:[a.jsx("button",{onClick:()=>t(!e),children:e?a.jsx(Vt,{className:"w-6 h-6 text-white"}):a.jsx(Op,{className:"w-6 h-6 text-white"})}),e&&a.jsx("div",{className:"absolute top-11 right-0 mt-2 w-48 border border-tertiary rounded-lg shadow-lg z-50 bg-primary",children:a.jsxs("nav",{className:"flex flex-col",children:[a.jsx("a",{href:"/login",className:"block px-4 py-2 text-center text-tertiary bg-white hover:bg-accent hover:text-secondary transition rounded-t-lg",children:"Log In"}),a.jsx("a",{href:"/signup",className:"block px-4 py-2 text-center text-tertiary bg-white hover:bg-secondary hover:text-white transition rounded-b-lg",children:"Start for Free"})]})})]})]})})})};function mse(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m12 14 4-4"},child:[]},{tag:"path",attr:{d:"M3.34 19a10 10 0 1 1 17.32 0"},child:[]}]})(e)}function Lo(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(e)}function fse(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z"},child:[]}]})(e)}function ow(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"10",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M10.3 15H7a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"17",cy:"17",r:"3"},child:[]},{tag:"path",attr:{d:"m21 21-1.9-1.9"},child:[]}]})(e)}function hse(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M22 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(e)}function gse(e){return At({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"},child:[]}]})(e)}const pse=()=>{const e=["/image/Dashboard1.png","/image/lead1.png","/image/dashboard.jpg"],[t,n]=h.useState(0),[s,r]=h.useState(!1),i=h.useRef(null),[l,o]=h.useState(0),[c,d]=h.useState(0);h.useEffect(()=>(s||(i.current=setInterval(()=>{n(x=>(x+1)%e.length)},4e3)),()=>clearInterval(i.current)),[s,e.length]);const u=x=>o(x.targetTouches[0].clientX),f=x=>d(x.targetTouches[0].clientX),p=()=>{l-c>75&&n(x=>(x+1)%e.length),c-l>75&&n(x=>(x-1+e.length)%e.length)};return a.jsx("section",{className:"bg-paper-white text-white py-15 lg:py-32",children:a.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[a.jsxs("div",{className:"lg:text-left text-center",children:[a.jsxs("h1",{className:"text-5xl sm:text-6xl lg:text-7xl font-lg text-secondary mb-6 leading-tight",children:["Sari-Sari"," ",a.jsx("span",{className:"text-accent font-extrabold",children:"CRM"})]}),a.jsx("p",{className:"max-w-xl mx-auto lg:mx-0 text-lg sm:text-xl text-secondary mb-10 italic",children:"The CRM that keeps your customers organized and your sales growing."}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-center lg:justify-start space-y-4 sm:space-y-0 sm:space-x-4",children:[a.jsx("a",{href:"#",className:"px-10 py-3 rounded-lg border border-secondary text-white bg-secondary font-semibold hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-500",children:"Get Started Now"}),a.jsx("a",{href:"#",className:"px-10 py-3 rounded-lg border border-secondary text-white bg-secondary hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-500",children:"Watch Demo (2 min)"})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"hidden lg:block absolute inset-0 -top-10 -bottom-10 right-4 bg-accent rounded-3xl transform rotate-3 z-0"}),a.jsxs("div",{className:"relative z-10 overflow-hidden rounded-xl shadow-2xl border-4 border-gray-800 h-[400px] bg-gray-900 flex items-center justify-center",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),onTouchStart:u,onTouchMove:f,onTouchEnd:p,children:[e.map((x,v)=>a.jsx("img",{src:x,alt:`Slide ${v+1}`,className:`absolute inset-0 w-full h-full object-contain bg-gray-50 transition-opacity duration-1000 ease-in-out ${v===t?"opacity-100":"opacity-0"}`},v)),a.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex space-x-2",children:e.map((x,v)=>a.jsx("button",{onClick:()=>n(v),className:`w-3 h-3 rounded-full transition-all ${v===t?"bg-accent":"bg-gray-400 opacity-50"}`},v))})]})]})]})})},xse=({Icon:e,title:t,description:n})=>a.jsxs("div",{className:"bg-gray-800 p-8 rounded-2xl border border-gray-700 hover:border-accent transition transform hover:-translate-y-1",children:[a.jsx("div",{className:"w-14 h-14 flex items-center justify-center rounded-full text-accent mb-6",children:a.jsx(e,{className:"w-8 h-8"})}),a.jsx("h3",{className:"text-xl font-semibold text-white mb-3",children:t}),a.jsx("p",{className:"text-gray-400",children:n})]}),yse=()=>{const e=[{Icon:gse,title:"Automated Workflows",description:"Automate tasks and focus on engagement."},{Icon:mse,title:"Predictive Analytics",description:"Harness AI to forecast sales and risks."},{Icon:hse,title:"Unified Customer View",description:"360-degree profile for every customer."},{Icon:fse,title:"Multi-Channel Support",description:"Engage across email, chat, and more."}];return a.jsx("section",{id:"platform",className:"py-20 bg-gray-900 border-t border-gray-800",children:a.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[a.jsx("h2",{className:"text-4xl sm:text-5xl font-bold text-white mb-4",children:"Engineered for Enterprise Scale"}),a.jsx("p",{className:"text-xl text-gray-400 mb-16",children:"Pillows is the neural network powering your customer relationships."}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:e.map((t,n)=>a.jsx(xse,{...t},n))})]})})},bse=()=>a.jsxs("section",{id:"pricing",className:"py-20 bg-paper-white border-t border-gray-800 text-center",children:[a.jsx("h2",{className:"text-4xl sm:text-5xl font-bold text-secondary mb-4",children:"Start Building Your Future, Today."}),a.jsx("p",{className:"text-xl text-gray-400 mb-10",children:"Join thousands leveraging Sari-Sari CRM's intelligent platform."}),a.jsx("a",{href:"/signup",className:"px-12 py-4 text-lg font-bold rounded-xl shadow-2xl bg-accent border border-secondary text-white bg-secondary hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-400",children:"Start 15-Day Free Trial"})]}),vse=()=>a.jsx("footer",{className:"bg-secondary text-white border-t py-10",children:a.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 grid grid-cols-2 md:grid-cols-5 gap-8",children:[a.jsxs("div",{children:[a.jsxs("span",{className:"text-xl font-white",children:["Sari-Sari ",a.jsx("span",{className:"text-accent",children:"CRM"})]}),a.jsx("p",{className:"text-sm text-white mt-4",children:" 2025 Sari-Sari CRM"})]}),[{title:"Platform",links:["AI Features","Automation","Integrations","APIs"]},{title:"Resources",links:["Case Studies","Webinars","Security","Support"]},{title:"Company",links:["Leadership","Partnerships","Careers","Newsroom"]},{title:"Legal",links:["Terms","Privacy","SLA","Compliance"]}].map((e,t)=>a.jsxs("div",{children:[a.jsx("h5",{className:"text-md font-semibold mb-4 text-accent",children:e.title}),a.jsx("ul",{className:"space-y-2 text-sm text-white",children:e.links.map((n,s)=>a.jsx("li",{children:a.jsx("a",{href:"#",className:"hover:text-accent",children:n})},s))})]},t))]})}),wse=()=>(h.useEffect(()=>{document.title="Sari-Sari CRM"},[]),a.jsxs("main",{className:"font-inter",children:[a.jsx(jB,{}),a.jsx(pse,{}),a.jsx(yse,{}),a.jsx(bse,{}),a.jsx(vse,{})]}));function ju(e){return At({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"},child:[]}]})(e)}function Ha(e){return At({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(e)}function tk(e){return At({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"},child:[]}]})(e)}class mg extends Error{}mg.prototype.name="InvalidTokenError";function Nse(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,n)=>{let s=n.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}))}function jse(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return Nse(t)}catch{return atob(t)}}function CB(e,t){if(typeof e!="string")throw new mg("Invalid token specified: must be a string");t||(t={});const n=t.header===!0?0:1,s=e.split(".")[n];if(typeof s!="string")throw new mg(`Invalid token specified: missing part #${n+1}`);let r;try{r=jse(s)}catch(i){throw new mg(`Invalid token specified: invalid base64 for part #${n+1} (${i.message})`)}try{return JSON.parse(r)}catch(i){throw new mg(`Invalid token specified: invalid json for part #${n+1} (${i.message})`)}}function Mn(e,t,n=void 0){const s={};for(const r in e){const i=e[r];let l="",o=!0;for(let c=0;c<i.length;c+=1){const d=i[c];d&&(l+=(o===!0?"":" ")+t(d),o=!1,n&&n[d]&&(l+=" "+n[d]))}s[r]=l}return s}function iu(e,...t){const n=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(s=>n.searchParams.append("args[]",s)),`Minified MUI error #${e}; visit ${n} for the full message.`}function Ra(e){if(typeof e!="string")throw new Error(iu(7));return e.charAt(0).toUpperCase()+e.slice(1)}var UC={exports:{}},Ma={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mM;function Cse(){if(mM)return Ma;mM=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),l=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function v(w){if(typeof w=="object"&&w!==null){var b=w.$$typeof;switch(b){case e:switch(w=w.type,w){case n:case r:case s:case c:case d:case p:return w;default:switch(w=w&&w.$$typeof,w){case l:case o:case f:case u:return w;case i:return w;default:return b}}case t:return b}}}return Ma.ContextConsumer=i,Ma.ContextProvider=l,Ma.Element=e,Ma.ForwardRef=o,Ma.Fragment=n,Ma.Lazy=f,Ma.Memo=u,Ma.Portal=t,Ma.Profiler=r,Ma.StrictMode=s,Ma.Suspense=c,Ma.SuspenseList=d,Ma.isContextConsumer=function(w){return v(w)===i},Ma.isContextProvider=function(w){return v(w)===l},Ma.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===e},Ma.isForwardRef=function(w){return v(w)===o},Ma.isFragment=function(w){return v(w)===n},Ma.isLazy=function(w){return v(w)===f},Ma.isMemo=function(w){return v(w)===u},Ma.isPortal=function(w){return v(w)===t},Ma.isProfiler=function(w){return v(w)===r},Ma.isStrictMode=function(w){return v(w)===s},Ma.isSuspense=function(w){return v(w)===c},Ma.isSuspenseList=function(w){return v(w)===d},Ma.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===n||w===r||w===s||w===c||w===d||typeof w=="object"&&w!==null&&(w.$$typeof===f||w.$$typeof===u||w.$$typeof===l||w.$$typeof===i||w.$$typeof===o||w.$$typeof===x||w.getModuleId!==void 0)},Ma.typeOf=v,Ma}var fM;function Sse(){return fM||(fM=1,UC.exports=Cse()),UC.exports}var ak=Sse();function tl(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function SB(e){if(h.isValidElement(e)||ak.isValidElementType(e)||!tl(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=SB(e[n])}),t}function _r(e,t,n={clone:!0}){const s=n.clone?{...e}:e;return tl(e)&&tl(t)&&Object.keys(t).forEach(r=>{h.isValidElement(t[r])||ak.isValidElementType(t[r])?s[r]=t[r]:tl(t[r])&&Object.prototype.hasOwnProperty.call(e,r)&&tl(e[r])?s[r]=_r(e[r],t[r],n):n.clone?s[r]=tl(t[r])?SB(t[r]):t[r]:s[r]=t[r]}),s}function Ag(e,t){return t?_r(e,t,{clone:!1}):e}function hM(e,t){if(!e.containerQueries)return t;const n=Object.keys(t).filter(s=>s.startsWith("@container")).sort((s,r)=>{const i=/min-width:\s*([0-9.]+)/;return+(s.match(i)?.[1]||0)-+(r.match(i)?.[1]||0)});return n.length?n.reduce((s,r)=>{const i=t[r];return delete s[r],s[r]=i,s},{...t}):t}function _se(e,t){return t==="@"||t.startsWith("@")&&(e.some(n=>t.startsWith(`@${n}`))||!!t.match(/^@\d/))}function Ase(e,t){const n=t.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,s,r]=n,i=Number.isNaN(+s)?s||0:+s;return e.containerQueries(r).up(i)}function Ese(e){const t=(i,l)=>i.replace("@media",l?`@container ${l}`:"@container");function n(i,l){i.up=(...o)=>t(e.breakpoints.up(...o),l),i.down=(...o)=>t(e.breakpoints.down(...o),l),i.between=(...o)=>t(e.breakpoints.between(...o),l),i.only=(...o)=>t(e.breakpoints.only(...o),l),i.not=(...o)=>{const c=t(e.breakpoints.not(...o),l);return c.includes("not all and")?c.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):c}}const s={},r=i=>(n(s,i),s);return n(r),{...e,containerQueries:r}}const cw={xs:0,sm:600,md:900,lg:1200,xl:1536},gM={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${cw[e]}px)`},Tse={containerQueries:e=>({up:t=>{let n=typeof t=="number"?t:cw[t]||t;return typeof n=="number"&&(n=`${n}px`),e?`@container ${e} (min-width:${n})`:`@container (min-width:${n})`}})};function go(e,t,n){const s=e.theme||{};if(Array.isArray(t)){const i=s.breakpoints||gM;return t.reduce((l,o,c)=>(l[i.up(i.keys[c])]=n(t[c]),l),{})}if(typeof t=="object"){const i=s.breakpoints||gM;return Object.keys(t).reduce((l,o)=>{if(_se(i.keys,o)){const c=Ase(s.containerQueries?s:Tse,o);c&&(l[c]=n(t[o],o))}else if(Object.keys(i.values||cw).includes(o)){const c=i.up(o);l[c]=n(t[o],o)}else{const c=o;l[c]=t[c]}return l},{})}return n(t)}function kse(e={}){return e.keys?.reduce((n,s)=>{const r=e.up(s);return n[r]={},n},{})||{}}function pM(e,t){return e.reduce((n,s)=>{const r=n[s];return(!r||Object.keys(r).length===0)&&delete n[s],n},t)}function dw(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const s=`vars.${t}`.split(".").reduce((r,i)=>r&&r[i]?r[i]:null,e);if(s!=null)return s}return t.split(".").reduce((s,r)=>s&&s[r]!=null?s[r]:null,e)}function Tb(e,t,n,s=n){let r;return typeof e=="function"?r=e(n):Array.isArray(e)?r=e[n]||s:r=dw(e,n)||s,t&&(r=t(r,s,e)),r}function Cn(e){const{prop:t,cssProperty:n=e.prop,themeKey:s,transform:r}=e,i=l=>{if(l[t]==null)return null;const o=l[t],c=l.theme,d=dw(c,s)||{};return go(l,o,f=>{let p=Tb(d,r,f);return f===p&&typeof f=="string"&&(p=Tb(d,r,`${t}${f==="default"?"":Ra(f)}`,f)),n===!1?p:{[n]:p}})};return i.propTypes={},i.filterProps=[t],i}function Lse(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const Pse={m:"margin",p:"padding"},Dse={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},xM={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Ose=Lse(e=>{if(e.length>2)if(xM[e])e=xM[e];else return[e];const[t,n]=e.split(""),s=Pse[t],r=Dse[n]||"";return Array.isArray(r)?r.map(i=>s+i):[s+r]}),nk=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],sk=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...nk,...sk];function Mp(e,t,n,s){const r=dw(e,t,!0)??n;return typeof r=="number"||typeof r=="string"?i=>typeof i=="string"?i:typeof r=="string"?r.startsWith("var(")&&i===0?0:r.startsWith("var(")&&i===1?r:`calc(${i} * ${r})`:r*i:Array.isArray(r)?i=>{if(typeof i=="string")return i;const l=Math.abs(i),o=r[l];return i>=0?o:typeof o=="number"?-o:typeof o=="string"&&o.startsWith("var(")?`calc(-1 * ${o})`:`-${o}`}:typeof r=="function"?r:()=>{}}function rk(e){return Mp(e,"spacing",8)}function Ip(e,t){return typeof t=="string"||t==null?t:e(t)}function Mse(e,t){return n=>e.reduce((s,r)=>(s[r]=Ip(t,n),s),{})}function Ise(e,t,n,s){if(!t.includes(n))return null;const r=Ose(n),i=Mse(r,s),l=e[n];return go(e,l,i)}function _B(e,t){const n=rk(e.theme);return Object.keys(e).map(s=>Ise(e,t,s,n)).reduce(Ag,{})}function mn(e){return _B(e,nk)}mn.propTypes={};mn.filterProps=nk;function fn(e){return _B(e,sk)}fn.propTypes={};fn.filterProps=sk;function uw(...e){const t=e.reduce((s,r)=>(r.filterProps.forEach(i=>{s[i]=r}),s),{}),n=s=>Object.keys(s).reduce((r,i)=>t[i]?Ag(r,t[i](s)):r,{});return n.propTypes={},n.filterProps=e.reduce((s,r)=>s.concat(r.filterProps),[]),n}function Zr(e){return typeof e!="number"?e:`${e}px solid`}function ui(e,t){return Cn({prop:e,themeKey:"borders",transform:t})}const $se=ui("border",Zr),Rse=ui("borderTop",Zr),zse=ui("borderRight",Zr),Use=ui("borderBottom",Zr),Fse=ui("borderLeft",Zr),Bse=ui("borderColor"),Hse=ui("borderTopColor"),Gse=ui("borderRightColor"),Wse=ui("borderBottomColor"),Vse=ui("borderLeftColor"),qse=ui("outline",Zr),Yse=ui("outlineColor"),mw=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=Mp(e.theme,"shape.borderRadius",4),n=s=>({borderRadius:Ip(t,s)});return go(e,e.borderRadius,n)}return null};mw.propTypes={};mw.filterProps=["borderRadius"];uw($se,Rse,zse,Use,Fse,Bse,Hse,Gse,Wse,Vse,mw,qse,Yse);const fw=e=>{if(e.gap!==void 0&&e.gap!==null){const t=Mp(e.theme,"spacing",8),n=s=>({gap:Ip(t,s)});return go(e,e.gap,n)}return null};fw.propTypes={};fw.filterProps=["gap"];const hw=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=Mp(e.theme,"spacing",8),n=s=>({columnGap:Ip(t,s)});return go(e,e.columnGap,n)}return null};hw.propTypes={};hw.filterProps=["columnGap"];const gw=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=Mp(e.theme,"spacing",8),n=s=>({rowGap:Ip(t,s)});return go(e,e.rowGap,n)}return null};gw.propTypes={};gw.filterProps=["rowGap"];const Kse=Cn({prop:"gridColumn"}),Qse=Cn({prop:"gridRow"}),Xse=Cn({prop:"gridAutoFlow"}),Zse=Cn({prop:"gridAutoColumns"}),Jse=Cn({prop:"gridAutoRows"}),ere=Cn({prop:"gridTemplateColumns"}),tre=Cn({prop:"gridTemplateRows"}),are=Cn({prop:"gridTemplateAreas"}),nre=Cn({prop:"gridArea"});uw(fw,hw,gw,Kse,Qse,Xse,Zse,Jse,ere,tre,are,nre);function Vm(e,t){return t==="grey"?t:e}const sre=Cn({prop:"color",themeKey:"palette",transform:Vm}),rre=Cn({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Vm}),ire=Cn({prop:"backgroundColor",themeKey:"palette",transform:Vm});uw(sre,rre,ire);function jr(e){return e<=1&&e!==0?`${e*100}%`:e}const lre=Cn({prop:"width",transform:jr}),ik=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{const s=e.theme?.breakpoints?.values?.[n]||cw[n];return s?e.theme?.breakpoints?.unit!=="px"?{maxWidth:`${s}${e.theme.breakpoints.unit}`}:{maxWidth:s}:{maxWidth:jr(n)}};return go(e,e.maxWidth,t)}return null};ik.filterProps=["maxWidth"];const ore=Cn({prop:"minWidth",transform:jr}),cre=Cn({prop:"height",transform:jr}),dre=Cn({prop:"maxHeight",transform:jr}),ure=Cn({prop:"minHeight",transform:jr});Cn({prop:"size",cssProperty:"width",transform:jr});Cn({prop:"size",cssProperty:"height",transform:jr});const mre=Cn({prop:"boxSizing"});uw(lre,ik,ore,cre,dre,ure,mre);const $p={border:{themeKey:"borders",transform:Zr},borderTop:{themeKey:"borders",transform:Zr},borderRight:{themeKey:"borders",transform:Zr},borderBottom:{themeKey:"borders",transform:Zr},borderLeft:{themeKey:"borders",transform:Zr},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Zr},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:mw},color:{themeKey:"palette",transform:Vm},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Vm},backgroundColor:{themeKey:"palette",transform:Vm},p:{style:fn},pt:{style:fn},pr:{style:fn},pb:{style:fn},pl:{style:fn},px:{style:fn},py:{style:fn},padding:{style:fn},paddingTop:{style:fn},paddingRight:{style:fn},paddingBottom:{style:fn},paddingLeft:{style:fn},paddingX:{style:fn},paddingY:{style:fn},paddingInline:{style:fn},paddingInlineStart:{style:fn},paddingInlineEnd:{style:fn},paddingBlock:{style:fn},paddingBlockStart:{style:fn},paddingBlockEnd:{style:fn},m:{style:mn},mt:{style:mn},mr:{style:mn},mb:{style:mn},ml:{style:mn},mx:{style:mn},my:{style:mn},margin:{style:mn},marginTop:{style:mn},marginRight:{style:mn},marginBottom:{style:mn},marginLeft:{style:mn},marginX:{style:mn},marginY:{style:mn},marginInline:{style:mn},marginInlineStart:{style:mn},marginInlineEnd:{style:mn},marginBlock:{style:mn},marginBlockStart:{style:mn},marginBlockEnd:{style:mn},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:fw},rowGap:{style:gw},columnGap:{style:hw},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:jr},maxWidth:{style:ik},minWidth:{transform:jr},height:{transform:jr},maxHeight:{transform:jr},minHeight:{transform:jr},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function fre(...e){const t=e.reduce((s,r)=>s.concat(Object.keys(r)),[]),n=new Set(t);return e.every(s=>n.size===Object.keys(s).length)}function hre(e,t){return typeof e=="function"?e(t):e}function gre(){function e(n,s,r,i){const l={[n]:s,theme:r},o=i[n];if(!o)return{[n]:s};const{cssProperty:c=n,themeKey:d,transform:u,style:f}=o;if(s==null)return null;if(d==="typography"&&s==="inherit")return{[n]:s};const p=dw(r,d)||{};return f?f(l):go(l,s,v=>{let w=Tb(p,u,v);return v===w&&typeof v=="string"&&(w=Tb(p,u,`${n}${v==="default"?"":Ra(v)}`,v)),c===!1?w:{[c]:w}})}function t(n){const{sx:s,theme:r={},nested:i}=n||{};if(!s)return null;const l=r.unstable_sxConfig??$p;function o(c){let d=c;if(typeof c=="function")d=c(r);else if(typeof c!="object")return c;if(!d)return null;const u=kse(r.breakpoints),f=Object.keys(u);let p=u;return Object.keys(d).forEach(x=>{const v=hre(d[x],r);if(v!=null)if(typeof v=="object")if(l[x])p=Ag(p,e(x,v,r,l));else{const w=go({theme:r},v,b=>({[x]:b}));fre(w,v)?p[x]=t({sx:v,theme:r,nested:!0}):p=Ag(p,w)}else p=Ag(p,e(x,v,r,l))}),!i&&r.modularCssLayers?{"@layer sx":hM(r,pM(f,p))}:hM(r,pM(f,p))}return Array.isArray(s)?s.map(o):o(s)}return t}const tf=gre();tf.filterProps=["sx"];const pre=e=>{const t={systemProps:{},otherProps:{}},n=e?.theme?.unstable_sxConfig??$p;return Object.keys(e).forEach(s=>{n[s]?t.systemProps[s]=e[s]:t.otherProps[s]=e[s]}),t};function xre(e){const{sx:t,...n}=e,{systemProps:s,otherProps:r}=pre(n);let i;return Array.isArray(t)?i=[s,...t]:typeof t=="function"?i=(...l)=>{const o=t(...l);return tl(o)?{...s,...o}:s}:i={...s,...t},{...r,sx:i}}function Ke(){return Ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ke.apply(null,arguments)}function yre(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function bre(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var vre=(function(){function e(n){var s=this;this._insertTag=function(r){var i;s.tags.length===0?s.insertionPoint?i=s.insertionPoint.nextSibling:s.prepend?i=s.container.firstChild:i=s.before:i=s.tags[s.tags.length-1].nextSibling,s.container.insertBefore(r,i),s.tags.push(r)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(s){s.forEach(this._insertTag)},t.insert=function(s){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(bre(this));var r=this.tags[this.tags.length-1];if(this.isSpeedy){var i=yre(r);try{i.insertRule(s,i.cssRules.length)}catch{}}else r.appendChild(document.createTextNode(s));this.ctr++},t.flush=function(){this.tags.forEach(function(s){var r;return(r=s.parentNode)==null?void 0:r.removeChild(s)}),this.tags=[],this.ctr=0},e})(),vs="-ms-",kb="-moz-",va="-webkit-",AB="comm",lk="rule",ok="decl",wre="@import",EB="@keyframes",Nre="@layer",jre=Math.abs,pw=String.fromCharCode,Cre=Object.assign;function Sre(e,t){return xs(e,0)^45?(((t<<2^xs(e,0))<<2^xs(e,1))<<2^xs(e,2))<<2^xs(e,3):0}function TB(e){return e.trim()}function _re(e,t){return(e=t.exec(e))?e[0]:e}function wa(e,t,n){return e.replace(t,n)}function $A(e,t){return e.indexOf(t)}function xs(e,t){return e.charCodeAt(t)|0}function Ug(e,t,n){return e.slice(t,n)}function Zi(e){return e.length}function ck(e){return e.length}function Z0(e,t){return t.push(e),e}function Are(e,t){return e.map(t).join("")}var xw=1,af=1,kB=0,rr=0,Ln=0,kf="";function yw(e,t,n,s,r,i,l){return{value:e,root:t,parent:n,type:s,props:r,children:i,line:xw,column:af,length:l,return:""}}function Uh(e,t){return Cre(yw("",null,null,"",null,null,0),e,{length:-e.length},t)}function Ere(){return Ln}function Tre(){return Ln=rr>0?xs(kf,--rr):0,af--,Ln===10&&(af=1,xw--),Ln}function Ar(){return Ln=rr<kB?xs(kf,rr++):0,af++,Ln===10&&(af=1,xw++),Ln}function cl(){return xs(kf,rr)}function db(){return rr}function Rp(e,t){return Ug(kf,e,t)}function Fg(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function LB(e){return xw=af=1,kB=Zi(kf=e),rr=0,[]}function PB(e){return kf="",e}function ub(e){return TB(Rp(rr-1,RA(e===91?e+2:e===40?e+1:e)))}function kre(e){for(;(Ln=cl())&&Ln<33;)Ar();return Fg(e)>2||Fg(Ln)>3?"":" "}function Lre(e,t){for(;--t&&Ar()&&!(Ln<48||Ln>102||Ln>57&&Ln<65||Ln>70&&Ln<97););return Rp(e,db()+(t<6&&cl()==32&&Ar()==32))}function RA(e){for(;Ar();)switch(Ln){case e:return rr;case 34:case 39:e!==34&&e!==39&&RA(Ln);break;case 40:e===41&&RA(e);break;case 92:Ar();break}return rr}function Pre(e,t){for(;Ar()&&e+Ln!==57;)if(e+Ln===84&&cl()===47)break;return"/*"+Rp(t,rr-1)+"*"+pw(e===47?e:Ar())}function Dre(e){for(;!Fg(cl());)Ar();return Rp(e,rr)}function Ore(e){return PB(mb("",null,null,null,[""],e=LB(e),0,[0],e))}function mb(e,t,n,s,r,i,l,o,c){for(var d=0,u=0,f=l,p=0,x=0,v=0,w=1,b=1,C=1,N=0,S="",A=r,k=i,_=s,T=S;b;)switch(v=N,N=Ar()){case 40:if(v!=108&&xs(T,f-1)==58){$A(T+=wa(ub(N),"&","&\f"),"&\f")!=-1&&(C=-1);break}case 34:case 39:case 91:T+=ub(N);break;case 9:case 10:case 13:case 32:T+=kre(v);break;case 92:T+=Lre(db()-1,7);continue;case 47:switch(cl()){case 42:case 47:Z0(Mre(Pre(Ar(),db()),t,n),c);break;default:T+="/"}break;case 123*w:o[d++]=Zi(T)*C;case 125*w:case 59:case 0:switch(N){case 0:case 125:b=0;case 59+u:C==-1&&(T=wa(T,/\f/g,"")),x>0&&Zi(T)-f&&Z0(x>32?bM(T+";",s,n,f-1):bM(wa(T," ","")+";",s,n,f-2),c);break;case 59:T+=";";default:if(Z0(_=yM(T,t,n,d,u,r,o,S,A=[],k=[],f),i),N===123)if(u===0)mb(T,t,_,_,A,i,f,o,k);else switch(p===99&&xs(T,3)===110?100:p){case 100:case 108:case 109:case 115:mb(e,_,_,s&&Z0(yM(e,_,_,0,0,r,o,S,r,A=[],f),k),r,k,f,o,s?A:k);break;default:mb(T,_,_,_,[""],k,0,o,k)}}d=u=x=0,w=C=1,S=T="",f=l;break;case 58:f=1+Zi(T),x=v;default:if(w<1){if(N==123)--w;else if(N==125&&w++==0&&Tre()==125)continue}switch(T+=pw(N),N*w){case 38:C=u>0?1:(T+="\f",-1);break;case 44:o[d++]=(Zi(T)-1)*C,C=1;break;case 64:cl()===45&&(T+=ub(Ar())),p=cl(),u=f=Zi(S=T+=Dre(db())),N++;break;case 45:v===45&&Zi(T)==2&&(w=0)}}return i}function yM(e,t,n,s,r,i,l,o,c,d,u){for(var f=r-1,p=r===0?i:[""],x=ck(p),v=0,w=0,b=0;v<s;++v)for(var C=0,N=Ug(e,f+1,f=jre(w=l[v])),S=e;C<x;++C)(S=TB(w>0?p[C]+" "+N:wa(N,/&\f/g,p[C])))&&(c[b++]=S);return yw(e,t,n,r===0?lk:o,c,d,u)}function Mre(e,t,n){return yw(e,t,n,AB,pw(Ere()),Ug(e,2,-2),0)}function bM(e,t,n,s){return yw(e,t,n,ok,Ug(e,0,s),Ug(e,s+1,-1),s)}function qm(e,t){for(var n="",s=ck(e),r=0;r<s;r++)n+=t(e[r],r,e,t)||"";return n}function Ire(e,t,n,s){switch(e.type){case Nre:if(e.children.length)break;case wre:case ok:return e.return=e.return||e.value;case AB:return"";case EB:return e.return=e.value+"{"+qm(e.children,s)+"}";case lk:e.value=e.props.join(",")}return Zi(n=qm(e.children,s))?e.return=e.value+"{"+n+"}":""}function $re(e){var t=ck(e);return function(n,s,r,i){for(var l="",o=0;o<t;o++)l+=e[o](n,s,r,i)||"";return l}}function Rre(e){return function(t){t.root||(t=t.return)&&e(t)}}function DB(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var zre=function(t,n,s){for(var r=0,i=0;r=i,i=cl(),r===38&&i===12&&(n[s]=1),!Fg(i);)Ar();return Rp(t,rr)},Ure=function(t,n){var s=-1,r=44;do switch(Fg(r)){case 0:r===38&&cl()===12&&(n[s]=1),t[s]+=zre(rr-1,n,s);break;case 2:t[s]+=ub(r);break;case 4:if(r===44){t[++s]=cl()===58?"&\f":"",n[s]=t[s].length;break}default:t[s]+=pw(r)}while(r=Ar());return t},Fre=function(t,n){return PB(Ure(LB(t),n))},vM=new WeakMap,Bre=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,s=t.parent,r=t.column===s.column&&t.line===s.line;s.type!=="rule";)if(s=s.parent,!s)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!vM.get(s))&&!r){vM.set(t,!0);for(var i=[],l=Fre(n,i),o=s.props,c=0,d=0;c<l.length;c++)for(var u=0;u<o.length;u++,d++)t.props[d]=i[c]?l[c].replace(/&\f/g,o[u]):o[u]+" "+l[c]}}},Hre=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function OB(e,t){switch(Sre(e,t)){case 5103:return va+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return va+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return va+e+kb+e+vs+e+e;case 6828:case 4268:return va+e+vs+e+e;case 6165:return va+e+vs+"flex-"+e+e;case 5187:return va+e+wa(e,/(\w+).+(:[^]+)/,va+"box-$1$2"+vs+"flex-$1$2")+e;case 5443:return va+e+vs+"flex-item-"+wa(e,/flex-|-self/,"")+e;case 4675:return va+e+vs+"flex-line-pack"+wa(e,/align-content|flex-|-self/,"")+e;case 5548:return va+e+vs+wa(e,"shrink","negative")+e;case 5292:return va+e+vs+wa(e,"basis","preferred-size")+e;case 6060:return va+"box-"+wa(e,"-grow","")+va+e+vs+wa(e,"grow","positive")+e;case 4554:return va+wa(e,/([^-])(transform)/g,"$1"+va+"$2")+e;case 6187:return wa(wa(wa(e,/(zoom-|grab)/,va+"$1"),/(image-set)/,va+"$1"),e,"")+e;case 5495:case 3959:return wa(e,/(image-set\([^]*)/,va+"$1$`$1");case 4968:return wa(wa(e,/(.+:)(flex-)?(.*)/,va+"box-pack:$3"+vs+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+va+e+e;case 4095:case 3583:case 4068:case 2532:return wa(e,/(.+)-inline(.+)/,va+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Zi(e)-1-t>6)switch(xs(e,t+1)){case 109:if(xs(e,t+4)!==45)break;case 102:return wa(e,/(.+:)(.+)-([^]+)/,"$1"+va+"$2-$3$1"+kb+(xs(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~$A(e,"stretch")?OB(wa(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(xs(e,t+1)!==115)break;case 6444:switch(xs(e,Zi(e)-3-(~$A(e,"!important")&&10))){case 107:return wa(e,":",":"+va)+e;case 101:return wa(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+va+(xs(e,14)===45?"inline-":"")+"box$3$1"+va+"$2$3$1"+vs+"$2box$3")+e}break;case 5936:switch(xs(e,t+11)){case 114:return va+e+vs+wa(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return va+e+vs+wa(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return va+e+vs+wa(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return va+e+vs+e+e}return e}var Gre=function(t,n,s,r){if(t.length>-1&&!t.return)switch(t.type){case ok:t.return=OB(t.value,t.length);break;case EB:return qm([Uh(t,{value:wa(t.value,"@","@"+va)})],r);case lk:if(t.length)return Are(t.props,function(i){switch(_re(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return qm([Uh(t,{props:[wa(i,/:(read-\w+)/,":"+kb+"$1")]})],r);case"::placeholder":return qm([Uh(t,{props:[wa(i,/:(plac\w+)/,":"+va+"input-$1")]}),Uh(t,{props:[wa(i,/:(plac\w+)/,":"+kb+"$1")]}),Uh(t,{props:[wa(i,/:(plac\w+)/,vs+"input-$1")]})],r)}return""})}},Wre=[Gre],Vre=function(t){var n=t.key;if(n==="css"){var s=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(s,function(w){var b=w.getAttribute("data-emotion");b.indexOf(" ")!==-1&&(document.head.appendChild(w),w.setAttribute("data-s",""))})}var r=t.stylisPlugins||Wre,i={},l,o=[];l=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(w){for(var b=w.getAttribute("data-emotion").split(" "),C=1;C<b.length;C++)i[b[C]]=!0;o.push(w)});var c,d=[Bre,Hre];{var u,f=[Ire,Rre(function(w){u.insert(w)})],p=$re(d.concat(r,f)),x=function(b){return qm(Ore(b),p)};c=function(b,C,N,S){u=N,x(b?b+"{"+C.styles+"}":C.styles),S&&(v.inserted[C.name]=!0)}}var v={key:n,sheet:new vre({key:n,container:l,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:i,registered:{},insert:c};return v.sheet.hydrate(o),v},FC={exports:{}},Na={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wM;function qre(){if(wM)return Na;wM=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.portal"):60106,s=e?Symbol.for("react.fragment"):60107,r=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,l=e?Symbol.for("react.provider"):60109,o=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,d=e?Symbol.for("react.concurrent_mode"):60111,u=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,p=e?Symbol.for("react.suspense_list"):60120,x=e?Symbol.for("react.memo"):60115,v=e?Symbol.for("react.lazy"):60116,w=e?Symbol.for("react.block"):60121,b=e?Symbol.for("react.fundamental"):60117,C=e?Symbol.for("react.responder"):60118,N=e?Symbol.for("react.scope"):60119;function S(k){if(typeof k=="object"&&k!==null){var _=k.$$typeof;switch(_){case t:switch(k=k.type,k){case c:case d:case s:case i:case r:case f:return k;default:switch(k=k&&k.$$typeof,k){case o:case u:case v:case x:case l:return k;default:return _}}case n:return _}}}function A(k){return S(k)===d}return Na.AsyncMode=c,Na.ConcurrentMode=d,Na.ContextConsumer=o,Na.ContextProvider=l,Na.Element=t,Na.ForwardRef=u,Na.Fragment=s,Na.Lazy=v,Na.Memo=x,Na.Portal=n,Na.Profiler=i,Na.StrictMode=r,Na.Suspense=f,Na.isAsyncMode=function(k){return A(k)||S(k)===c},Na.isConcurrentMode=A,Na.isContextConsumer=function(k){return S(k)===o},Na.isContextProvider=function(k){return S(k)===l},Na.isElement=function(k){return typeof k=="object"&&k!==null&&k.$$typeof===t},Na.isForwardRef=function(k){return S(k)===u},Na.isFragment=function(k){return S(k)===s},Na.isLazy=function(k){return S(k)===v},Na.isMemo=function(k){return S(k)===x},Na.isPortal=function(k){return S(k)===n},Na.isProfiler=function(k){return S(k)===i},Na.isStrictMode=function(k){return S(k)===r},Na.isSuspense=function(k){return S(k)===f},Na.isValidElementType=function(k){return typeof k=="string"||typeof k=="function"||k===s||k===d||k===i||k===r||k===f||k===p||typeof k=="object"&&k!==null&&(k.$$typeof===v||k.$$typeof===x||k.$$typeof===l||k.$$typeof===o||k.$$typeof===u||k.$$typeof===b||k.$$typeof===C||k.$$typeof===N||k.$$typeof===w)},Na.typeOf=S,Na}var NM;function Yre(){return NM||(NM=1,FC.exports=qre()),FC.exports}var BC,jM;function Kre(){if(jM)return BC;jM=1;var e=Yre(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},r={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};i[e.ForwardRef]=s,i[e.Memo]=r;function l(v){return e.isMemo(v)?r:i[v.$$typeof]||t}var o=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;function x(v,w,b){if(typeof w!="string"){if(p){var C=f(w);C&&C!==p&&x(v,C,b)}var N=c(w);d&&(N=N.concat(d(w)));for(var S=l(v),A=l(w),k=0;k<N.length;++k){var _=N[k];if(!n[_]&&!(b&&b[_])&&!(A&&A[_])&&!(S&&S[_])){var T=u(w,_);try{o(v,_,T)}catch{}}}}return v}return BC=x,BC}Kre();var Qre=!0;function MB(e,t,n){var s="";return n.split(" ").forEach(function(r){e[r]!==void 0?t.push(e[r]+";"):r&&(s+=r+" ")}),s}var dk=function(t,n,s){var r=t.key+"-"+n.name;(s===!1||Qre===!1)&&t.registered[r]===void 0&&(t.registered[r]=n.styles)},IB=function(t,n,s){dk(t,n,s);var r=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var i=n;do t.insert(n===i?"."+r:"",i,t.sheet,!0),i=i.next;while(i!==void 0)}};function Xre(e){for(var t=0,n,s=0,r=e.length;r>=4;++s,r-=4)n=e.charCodeAt(s)&255|(e.charCodeAt(++s)&255)<<8|(e.charCodeAt(++s)&255)<<16|(e.charCodeAt(++s)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(r){case 3:t^=(e.charCodeAt(s+2)&255)<<16;case 2:t^=(e.charCodeAt(s+1)&255)<<8;case 1:t^=e.charCodeAt(s)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var Zre={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Jre=/[A-Z]|^ms/g,eie=/_EMO_([^_]+?)_([^]*?)_EMO_/g,$B=function(t){return t.charCodeAt(1)===45},CM=function(t){return t!=null&&typeof t!="boolean"},HC=DB(function(e){return $B(e)?e:e.replace(Jre,"-$&").toLowerCase()}),SM=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(eie,function(s,r,i){return Ji={name:r,styles:i,next:Ji},r})}return Zre[t]!==1&&!$B(t)&&typeof n=="number"&&n!==0?n+"px":n};function Bg(e,t,n){if(n==null)return"";var s=n;if(s.__emotion_styles!==void 0)return s;switch(typeof n){case"boolean":return"";case"object":{var r=n;if(r.anim===1)return Ji={name:r.name,styles:r.styles,next:Ji},r.name;var i=n;if(i.styles!==void 0){var l=i.next;if(l!==void 0)for(;l!==void 0;)Ji={name:l.name,styles:l.styles,next:Ji},l=l.next;var o=i.styles+";";return o}return tie(e,t,n)}case"function":{if(e!==void 0){var c=Ji,d=n(e);return Ji=c,Bg(e,t,d)}break}}var u=n;if(t==null)return u;var f=t[u];return f!==void 0?f:u}function tie(e,t,n){var s="";if(Array.isArray(n))for(var r=0;r<n.length;r++)s+=Bg(e,t,n[r])+";";else for(var i in n){var l=n[i];if(typeof l!="object"){var o=l;t!=null&&t[o]!==void 0?s+=i+"{"+t[o]+"}":CM(o)&&(s+=HC(i)+":"+SM(i,o)+";")}else if(Array.isArray(l)&&typeof l[0]=="string"&&(t==null||t[l[0]]===void 0))for(var c=0;c<l.length;c++)CM(l[c])&&(s+=HC(i)+":"+SM(i,l[c])+";");else{var d=Bg(e,t,l);switch(i){case"animation":case"animationName":{s+=HC(i)+":"+d+";";break}default:s+=i+"{"+d+"}"}}}return s}var _M=/label:\s*([^\s;{]+)\s*(;|$)/g,Ji;function bw(e,t,n){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var s=!0,r="";Ji=void 0;var i=e[0];if(i==null||i.raw===void 0)s=!1,r+=Bg(n,t,i);else{var l=i;r+=l[0]}for(var o=1;o<e.length;o++)if(r+=Bg(n,t,e[o]),s){var c=i;r+=c[o]}_M.lastIndex=0;for(var d="",u;(u=_M.exec(r))!==null;)d+="-"+u[1];var f=Xre(r)+d;return{name:f,styles:r,next:Ji}}var aie=function(t){return t()},nie=tu.useInsertionEffect?tu.useInsertionEffect:!1,RB=nie||aie,zB=h.createContext(typeof HTMLElement<"u"?Vre({key:"css"}):null);zB.Provider;var UB=function(t){return h.forwardRef(function(n,s){var r=h.useContext(zB);return t(n,r,s)})},uk=h.createContext({}),mk={}.hasOwnProperty,zA="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",sie=function(t,n){var s={};for(var r in n)mk.call(n,r)&&(s[r]=n[r]);return s[zA]=t,s},rie=function(t){var n=t.cache,s=t.serialized,r=t.isStringTag;return dk(n,s,r),RB(function(){return IB(n,s,r)}),null},iie=UB(function(e,t,n){var s=e.css;typeof s=="string"&&t.registered[s]!==void 0&&(s=t.registered[s]);var r=e[zA],i=[s],l="";typeof e.className=="string"?l=MB(t.registered,i,e.className):e.className!=null&&(l=e.className+" ");var o=bw(i,void 0,h.useContext(uk));l+=t.key+"-"+o.name;var c={};for(var d in e)mk.call(e,d)&&d!=="css"&&d!==zA&&(c[d]=e[d]);return c.className=l,n&&(c.ref=n),h.createElement(h.Fragment,null,h.createElement(rie,{cache:t,serialized:o,isStringTag:typeof r=="string"}),h.createElement(r,c))}),lie=iie,AM=function(t,n){var s=arguments;if(n==null||!mk.call(n,"css"))return h.createElement.apply(void 0,s);var r=s.length,i=new Array(r);i[0]=lie,i[1]=sie(t,n);for(var l=2;l<r;l++)i[l]=s[l];return h.createElement.apply(null,i)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(AM||(AM={}));function fk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return bw(t)}function zp(){var e=fk.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var oie=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,cie=DB(function(e){return oie.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),die=cie,uie=function(t){return t!=="theme"},EM=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?die:uie},TM=function(t,n,s){var r;if(n){var i=n.shouldForwardProp;r=t.__emotion_forwardProp&&i?function(l){return t.__emotion_forwardProp(l)&&i(l)}:i}return typeof r!="function"&&s&&(r=t.__emotion_forwardProp),r},mie=function(t){var n=t.cache,s=t.serialized,r=t.isStringTag;return dk(n,s,r),RB(function(){return IB(n,s,r)}),null},fie=function e(t,n){var s=t.__emotion_real===t,r=s&&t.__emotion_base||t,i,l;n!==void 0&&(i=n.label,l=n.target);var o=TM(t,n,s),c=o||EM(r),d=!c("as");return function(){var u=arguments,f=s&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(i!==void 0&&f.push("label:"+i+";"),u[0]==null||u[0].raw===void 0)f.push.apply(f,u);else{var p=u[0];f.push(p[0]);for(var x=u.length,v=1;v<x;v++)f.push(u[v],p[v])}var w=UB(function(b,C,N){var S=d&&b.as||r,A="",k=[],_=b;if(b.theme==null){_={};for(var T in b)_[T]=b[T];_.theme=h.useContext(uk)}typeof b.className=="string"?A=MB(C.registered,k,b.className):b.className!=null&&(A=b.className+" ");var E=bw(f.concat(k),C.registered,_);A+=C.key+"-"+E.name,l!==void 0&&(A+=" "+l);var I=d&&o===void 0?EM(S):c,z={};for(var $ in b)d&&$==="as"||I($)&&(z[$]=b[$]);return z.className=A,N&&(z.ref=N),h.createElement(h.Fragment,null,h.createElement(mie,{cache:C,serialized:E,isStringTag:typeof S=="string"}),h.createElement(S,z))});return w.displayName=i!==void 0?i:"Styled("+(typeof r=="string"?r:r.displayName||r.name||"Component")+")",w.defaultProps=t.defaultProps,w.__emotion_real=w,w.__emotion_base=r,w.__emotion_styles=f,w.__emotion_forwardProp=o,Object.defineProperty(w,"toString",{value:function(){return"."+l}}),w.withComponent=function(b,C){var N=e(b,Ke({},n,C,{shouldForwardProp:TM(w,C,!0)}));return N.apply(void 0,f)},w}},hie=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],UA=fie.bind(null);hie.forEach(function(e){UA[e]=UA(e)});function gie(e,t){return UA(e,t)}function pie(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const kM=[];function qd(e){return kM[0]=e,bw(kM)}const xie=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,s)=>n.val-s.val),t.reduce((n,s)=>({...n,[s.key]:s.val}),{})};function yie(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:s=5,...r}=e,i=xie(t),l=Object.keys(i);function o(p){return`@media (min-width:${typeof t[p]=="number"?t[p]:p}${n})`}function c(p){return`@media (max-width:${(typeof t[p]=="number"?t[p]:p)-s/100}${n})`}function d(p,x){const v=l.indexOf(x);return`@media (min-width:${typeof t[p]=="number"?t[p]:p}${n}) and (max-width:${(v!==-1&&typeof t[l[v]]=="number"?t[l[v]]:x)-s/100}${n})`}function u(p){return l.indexOf(p)+1<l.length?d(p,l[l.indexOf(p)+1]):o(p)}function f(p){const x=l.indexOf(p);return x===0?o(l[1]):x===l.length-1?c(l[x]):d(p,l[l.indexOf(p)+1]).replace("@media","@media not all and")}return{keys:l,values:i,up:o,down:c,between:d,only:u,not:f,unit:n,...r}}const bie={borderRadius:4};function FB(e=8,t=rk({spacing:e})){if(e.mui)return e;const n=(...s)=>(s.length===0?[1]:s).map(i=>{const l=t(i);return typeof l=="number"?`${l}px`:l}).join(" ");return n.mui=!0,n}function vie(e,t){const n=this;if(n.vars){if(!n.colorSchemes?.[e]||typeof n.getColorSchemeSelector!="function")return{};let s=n.getColorSchemeSelector(e);return s==="&"?t:((s.includes("data-")||s.includes("."))&&(s=`*:where(${s.replace(/\s*&$/,"")}) &`),{[s]:t})}return n.palette.mode===e?t:{}}function hk(e={},...t){const{breakpoints:n={},palette:s={},spacing:r,shape:i={},...l}=e,o=yie(n),c=FB(r);let d=_r({breakpoints:o,direction:"ltr",components:{},palette:{mode:"light",...s},spacing:c,shape:{...bie,...i}},l);return d=Ese(d),d.applyStyles=vie,d=t.reduce((u,f)=>_r(u,f),d),d.unstable_sxConfig={...$p,...l?.unstable_sxConfig},d.unstable_sx=function(f){return tf({sx:f,theme:this})},d}function wie(e){return Object.keys(e).length===0}function BB(e=null){const t=h.useContext(uk);return!t||wie(t)?e:t}const Nie=hk();function HB(e=Nie){return BB(e)}const LM=e=>e,jie=()=>{let e=LM;return{configure(t){e=t},generate(t){return e(t)},reset(){e=LM}}},Cie=jie(),Sie={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function In(e,t,n="Mui"){const s=Sie[t];return s?`${n}-${s}`:`${Cie.generate(e)}-${t}`}function yn(e,t,n="Mui"){const s={};return t.forEach(r=>{s[r]=In(e,r,n)}),s}function GB(e){const{variants:t,...n}=e,s={variants:t,style:qd(n),isProcessed:!0};return s.style===n||t&&t.forEach(r=>{typeof r.style!="function"&&(r.style=qd(r.style))}),s}const _ie=hk();function fb(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function $d(e,t){return t&&e&&typeof e=="object"&&e.styles&&!e.styles.startsWith("@layer")&&(e.styles=`@layer ${t}{${String(e.styles)}}`),e}function Aie(e){return e?(t,n)=>n[e]:null}function Eie(e,t,n){e.theme=Lie(e.theme)?n:e.theme[t]||e.theme}function hb(e,t,n){const s=typeof t=="function"?t(e):t;if(Array.isArray(s))return s.flatMap(r=>hb(e,r,n));if(Array.isArray(s?.variants)){let r;if(s.isProcessed)r=n?$d(s.style,n):s.style;else{const{variants:i,...l}=s;r=n?$d(qd(l),n):l}return WB(e,s.variants,[r],n)}return s?.isProcessed?n?$d(qd(s.style),n):s.style:n?$d(qd(s),n):s}function WB(e,t,n=[],s=void 0){let r;e:for(let i=0;i<t.length;i+=1){const l=t[i];if(typeof l.props=="function"){if(r??={...e,...e.ownerState,ownerState:e.ownerState},!l.props(r))continue}else for(const o in l.props)if(e[o]!==l.props[o]&&e.ownerState?.[o]!==l.props[o])continue e;typeof l.style=="function"?(r??={...e,...e.ownerState,ownerState:e.ownerState},n.push(s?$d(qd(l.style(r)),s):l.style(r))):n.push(s?$d(qd(l.style),s):l.style)}return n}function Tie(e={}){const{themeId:t,defaultTheme:n=_ie,rootShouldForwardProp:s=fb,slotShouldForwardProp:r=fb}=e;function i(o){Eie(o,t,n)}return(o,c={})=>{pie(o,_=>_.filter(T=>T!==tf));const{name:d,slot:u,skipVariantsResolver:f,skipSx:p,overridesResolver:x=Aie(Die(u)),...v}=c,w=d&&d.startsWith("Mui")||u?"components":"custom",b=f!==void 0?f:u&&u!=="Root"&&u!=="root"||!1,C=p||!1;let N=fb;u==="Root"||u==="root"?N=s:u?N=r:Pie(o)&&(N=void 0);const S=gie(o,{shouldForwardProp:N,label:kie(),...v}),A=_=>{if(_.__emotion_real===_)return _;if(typeof _=="function")return function(E){return hb(E,_,E.theme.modularCssLayers?w:void 0)};if(tl(_)){const T=GB(_);return function(I){return T.variants?hb(I,T,I.theme.modularCssLayers?w:void 0):I.theme.modularCssLayers?$d(T.style,w):T.style}}return _},k=(..._)=>{const T=[],E=_.map(A),I=[];if(T.push(i),d&&x&&I.push(function(O){const Q=O.theme.components?.[d]?.styleOverrides;if(!Q)return null;const F={};for(const ee in Q)F[ee]=hb(O,Q[ee],O.theme.modularCssLayers?"theme":void 0);return x(O,F)}),d&&!b&&I.push(function(O){const Q=O.theme?.components?.[d]?.variants;return Q?WB(O,Q,[],O.theme.modularCssLayers?"theme":void 0):null}),C||I.push(tf),Array.isArray(E[0])){const P=E.shift(),O=new Array(T.length).fill(""),B=new Array(I.length).fill("");let Q;Q=[...O,...P,...B],Q.raw=[...O,...P.raw,...B],T.unshift(Q)}const z=[...T,...E,...I],$=S(...z);return o.muiName&&($.muiName=o.muiName),$};return S.withConfig&&(k.withConfig=S.withConfig),k}}function kie(e,t){return void 0}function Lie(e){for(const t in e)return!1;return!0}function Pie(e){return typeof e=="string"&&e.charCodeAt(0)>96}function Die(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}function lu(e,t,n=!1){const s={...t};for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const i=r;if(i==="components"||i==="slots")s[i]={...e[i],...s[i]};else if(i==="componentsProps"||i==="slotProps"){const l=e[i],o=t[i];if(!o)s[i]=l||{};else if(!l)s[i]=o;else{s[i]={...o};for(const c in l)if(Object.prototype.hasOwnProperty.call(l,c)){const d=c;s[i][d]=lu(l[d],o[d],n)}}}else i==="className"&&n&&t.className?s.className=Tt(e?.className,t?.className):i==="style"&&n&&t.style?s.style={...e?.style,...t?.style}:s[i]===void 0&&(s[i]=e[i])}return s}function VB(e){const{theme:t,name:n,props:s}=e;return!t||!t.components||!t.components[n]||!t.components[n].defaultProps?s:lu(t.components[n].defaultProps,s)}function Oie({props:e,name:t,defaultTheme:n,themeId:s}){let r=HB(n);return r=r[s]||r,VB({theme:r,name:t,props:e})}const Kn=typeof window<"u"?h.useLayoutEffect:h.useEffect;function Mie(e,t,n,s,r){const[i,l]=h.useState(()=>r&&n?n(e).matches:s?s(e).matches:t);return Kn(()=>{if(!n)return;const o=n(e),c=()=>{l(o.matches)};return c(),o.addEventListener("change",c),()=>{o.removeEventListener("change",c)}},[e,n]),i}const Iie={...tu},qB=Iie.useSyncExternalStore;function $ie(e,t,n,s,r){const i=h.useCallback(()=>t,[t]),l=h.useMemo(()=>{if(r&&n)return()=>n(e).matches;if(s!==null){const{matches:u}=s(e);return()=>u}return i},[i,e,s,r,n]),[o,c]=h.useMemo(()=>{if(n===null)return[i,()=>()=>{}];const u=n(e);return[()=>u.matches,f=>(u.addEventListener("change",f),()=>{u.removeEventListener("change",f)})]},[i,n,e]);return qB(c,o,l)}function YB(e={}){const{themeId:t}=e;return function(s,r={}){let i=BB();i&&t&&(i=i[t]||i);const l=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:o=!1,matchMedia:c=l?window.matchMedia:null,ssrMatchMedia:d=null,noSsr:u=!1}=VB({name:"MuiUseMediaQuery",props:r,theme:i});let f=typeof s=="function"?s(i):s;return f=f.replace(/^@media( ?)/m,""),f.includes("print")&&console.warn(["MUI: You have provided a `print` query to the `useMediaQuery` hook.","Using the print media query to modify print styles can lead to unexpected results.","Consider using the `displayPrint` field in the `sx` prop instead.","More information about `displayPrint` on our docs: https://mui.com/system/display/#display-in-print."].join(`
`)),(qB!==void 0?$ie:Mie)(f,o,c,d,u)}}YB();function Rie(e,t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,n))}function gk(e,t=0,n=1){return Rie(e,t,n)}function zie(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(s=>s+s)),n?`rgb${n.length===4?"a":""}(${n.map((s,r)=>r<3?parseInt(s,16):Math.round(parseInt(s,16)/255*1e3)/1e3).join(", ")})`:""}function Uc(e){if(e.type)return e;if(e.charAt(0)==="#")return Uc(zie(e));const t=e.indexOf("("),n=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(iu(9,e));let s=e.substring(t+1,e.length-1),r;if(n==="color"){if(s=s.split(" "),r=s.shift(),s.length===4&&s[3].charAt(0)==="/"&&(s[3]=s[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(r))throw new Error(iu(10,r))}else s=s.split(",");return s=s.map(i=>parseFloat(i)),{type:n,values:s,colorSpace:r}}const Uie=e=>{const t=Uc(e);return t.values.slice(0,3).map((n,s)=>t.type.includes("hsl")&&s!==0?`${n}%`:n).join(" ")},fg=(e,t)=>{try{return Uie(e)}catch{return e}};function vw(e){const{type:t,colorSpace:n}=e;let{values:s}=e;return t.includes("rgb")?s=s.map((r,i)=>i<3?parseInt(r,10):r):t.includes("hsl")&&(s[1]=`${s[1]}%`,s[2]=`${s[2]}%`),t.includes("color")?s=`${n} ${s.join(" ")}`:s=`${s.join(", ")}`,`${t}(${s})`}function KB(e){e=Uc(e);const{values:t}=e,n=t[0],s=t[1]/100,r=t[2]/100,i=s*Math.min(r,1-r),l=(d,u=(d+n/30)%12)=>r-i*Math.max(Math.min(u-3,9-u,1),-1);let o="rgb";const c=[Math.round(l(0)*255),Math.round(l(8)*255),Math.round(l(4)*255)];return e.type==="hsla"&&(o+="a",c.push(t[3])),vw({type:o,values:c})}function FA(e){e=Uc(e);let t=e.type==="hsl"||e.type==="hsla"?Uc(KB(e)).values:e.values;return t=t.map(n=>(e.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function Fie(e,t){const n=FA(e),s=FA(t);return(Math.max(n,s)+.05)/(Math.min(n,s)+.05)}function QB(e,t){return e=Uc(e),t=gk(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,vw(e)}function vd(e,t,n){try{return QB(e,t)}catch{return e}}function ww(e,t){if(e=Uc(e),t=gk(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return vw(e)}function _a(e,t,n){try{return ww(e,t)}catch{return e}}function Nw(e,t){if(e=Uc(e),t=gk(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return vw(e)}function Aa(e,t,n){try{return Nw(e,t)}catch{return e}}function Bie(e,t=.15){return FA(e)>.5?ww(e,t):Nw(e,t)}function J0(e,t,n){try{return Bie(e,t)}catch{return e}}const Hie=h.createContext(),Up=()=>h.useContext(Hie)??!1,Gie=h.createContext(void 0);function Wie(e){const{theme:t,name:n,props:s}=e;if(!t||!t.components||!t.components[n])return s;const r=t.components[n];return r.defaultProps?lu(r.defaultProps,s,t.components.mergeClassNameAndStyle):!r.styleOverrides&&!r.variants?lu(r,s,t.components.mergeClassNameAndStyle):s}function Vie({props:e,name:t}){const n=h.useContext(Gie);return Wie({props:e,name:t,theme:{components:n}})}let PM=0;function qie(e){const[t,n]=h.useState(e),s=e||t;return h.useEffect(()=>{t==null&&(PM+=1,n(`mui-${PM}`))},[t]),s}const Yie={...tu},DM=Yie.useId;function jw(e){if(DM!==void 0){const t=DM();return e??t}return qie(e)}const OM={theme:void 0};function Kie(e){let t,n;return function(r){let i=t;return(i===void 0||r.theme!==n)&&(OM.theme=r.theme,i=GB(e(OM)),t=i,n=r.theme),i}}function Qie(e=""){function t(...s){if(!s.length)return"";const r=s[0];return typeof r=="string"&&!r.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${r}${t(...s.slice(1))})`:`, ${r}`}return(s,...r)=>`var(--${e?`${e}-`:""}${s}${t(...r)})`}const MM=(e,t,n,s=[])=>{let r=e;t.forEach((i,l)=>{l===t.length-1?Array.isArray(r)?r[Number(i)]=n:r&&typeof r=="object"&&(r[i]=n):r&&typeof r=="object"&&(r[i]||(r[i]=s.includes(i)?[]:{}),r=r[i])})},Xie=(e,t,n)=>{function s(r,i=[],l=[]){Object.entries(r).forEach(([o,c])=>{(!n||n&&!n([...i,o]))&&c!=null&&(typeof c=="object"&&Object.keys(c).length>0?s(c,[...i,o],Array.isArray(c)?[...l,o]:l):t([...i,o],c,l))})}s(e)},Zie=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(s=>e.includes(s))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function GC(e,t){const{prefix:n,shouldSkipGeneratingVar:s}=t||{},r={},i={},l={};return Xie(e,(o,c,d)=>{if((typeof c=="string"||typeof c=="number")&&(!s||!s(o,c))){const u=`--${n?`${n}-`:""}${o.join("-")}`,f=Zie(o,c);Object.assign(r,{[u]:f}),MM(i,o,`var(${u})`,d),MM(l,o,`var(${u}, ${f})`,d)}},o=>o[0]==="vars"),{css:r,vars:i,varsWithDefaults:l}}function Jie(e,t={}){const{getSelector:n=C,disableCssColorScheme:s,colorSchemeSelector:r,enableContrastVars:i}=t,{colorSchemes:l={},components:o,defaultColorScheme:c="light",...d}=e,{vars:u,css:f,varsWithDefaults:p}=GC(d,t);let x=p;const v={},{[c]:w,...b}=l;if(Object.entries(b||{}).forEach(([A,k])=>{const{vars:_,css:T,varsWithDefaults:E}=GC(k,t);x=_r(x,E),v[A]={css:T,vars:_}}),w){const{css:A,vars:k,varsWithDefaults:_}=GC(w,t);x=_r(x,_),v[c]={css:A,vars:k}}function C(A,k){let _=r;if(r==="class"&&(_=".%s"),r==="data"&&(_="[data-%s]"),r?.startsWith("data-")&&!r.includes("%s")&&(_=`[${r}="%s"]`),A){if(_==="media")return e.defaultColorScheme===A?":root":{[`@media (prefers-color-scheme: ${l[A]?.palette?.mode||A})`]:{":root":k}};if(_)return e.defaultColorScheme===A?`:root, ${_.replace("%s",String(A))}`:_.replace("%s",String(A))}return":root"}return{vars:x,generateThemeVars:()=>{let A={...u};return Object.entries(v).forEach(([,{vars:k}])=>{A=_r(A,k)}),A},generateStyleSheets:()=>{const A=[],k=e.defaultColorScheme||"light";function _(I,z){Object.keys(z).length&&A.push(typeof I=="string"?{[I]:{...z}}:I)}_(n(void 0,{...f}),f);const{[k]:T,...E}=v;if(T){const{css:I}=T,z=l[k]?.palette?.mode,$=!s&&z?{colorScheme:z,...I}:{...I};_(n(k,{...$}),$)}return Object.entries(E).forEach(([I,{css:z}])=>{const $=l[I]?.palette?.mode,P=!s&&$?{colorScheme:$,...z}:{...z};_(n(I,{...P}),P)}),i&&A.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),A}}}function ele(e){return function(n){return e==="media"?`@media (prefers-color-scheme: ${n})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${n}"] &`:e==="class"?`.${n} &`:e==="data"?`[data-${n}] &`:`${e.replace("%s",n)} &`:"&"}}const Hg={black:"#000",white:"#fff"},tle={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},gm={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},pm={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},Fh={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},xm={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},ym={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},bm={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function XB(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Hg.white,default:Hg.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const ZB=XB();function JB(){return{text:{primary:Hg.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Hg.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const BA=JB();function IM(e,t,n,s){const r=s.light||s,i=s.dark||s*1.5;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=Nw(e.main,r):t==="dark"&&(e.dark=ww(e.main,i)))}function $M(e,t,n,s,r){const i=r.light||r,l=r.dark||r*1.5;t[n]||(t.hasOwnProperty(s)?t[n]=t[s]:n==="light"?t.light=`color-mix(in ${e}, ${t.main}, #fff ${(i*100).toFixed(0)}%)`:n==="dark"&&(t.dark=`color-mix(in ${e}, ${t.main}, #000 ${(l*100).toFixed(0)}%)`))}function ale(e="light"){return e==="dark"?{main:xm[200],light:xm[50],dark:xm[400]}:{main:xm[700],light:xm[400],dark:xm[800]}}function nle(e="light"){return e==="dark"?{main:gm[200],light:gm[50],dark:gm[400]}:{main:gm[500],light:gm[300],dark:gm[700]}}function sle(e="light"){return e==="dark"?{main:pm[500],light:pm[300],dark:pm[700]}:{main:pm[700],light:pm[400],dark:pm[800]}}function rle(e="light"){return e==="dark"?{main:ym[400],light:ym[300],dark:ym[700]}:{main:ym[700],light:ym[500],dark:ym[900]}}function ile(e="light"){return e==="dark"?{main:bm[400],light:bm[300],dark:bm[700]}:{main:bm[800],light:bm[500],dark:bm[900]}}function lle(e="light"){return e==="dark"?{main:Fh[400],light:Fh[300],dark:Fh[700]}:{main:"#ed6c02",light:Fh[500],dark:Fh[900]}}function ole(e){return`oklch(from ${e} var(--__l) 0 h / var(--__a))`}function pk(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:s=.2,colorSpace:r,...i}=e,l=e.primary||ale(t),o=e.secondary||nle(t),c=e.error||sle(t),d=e.info||rle(t),u=e.success||ile(t),f=e.warning||lle(t);function p(b){return r?ole(b):Fie(b,BA.text.primary)>=n?BA.text.primary:ZB.text.primary}const x=({color:b,name:C,mainShade:N=500,lightShade:S=300,darkShade:A=700})=>{if(b={...b},!b.main&&b[N]&&(b.main=b[N]),!b.hasOwnProperty("main"))throw new Error(iu(11,C?` (${C})`:"",N));if(typeof b.main!="string")throw new Error(iu(12,C?` (${C})`:"",JSON.stringify(b.main)));return r?($M(r,b,"light",S,s),$M(r,b,"dark",A,s)):(IM(b,"light",S,s),IM(b,"dark",A,s)),b.contrastText||(b.contrastText=p(b.main)),b};let v;return t==="light"?v=XB():t==="dark"&&(v=JB()),_r({common:{...Hg},mode:t,primary:x({color:l,name:"primary"}),secondary:x({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:x({color:c,name:"error"}),warning:x({color:f,name:"warning"}),info:x({color:d,name:"info"}),success:x({color:u,name:"success"}),grey:tle,contrastThreshold:n,getContrastText:p,augmentColor:x,tonalOffset:s,...v},i)}function cle(e){const t={};return Object.entries(e).forEach(s=>{const[r,i]=s;typeof i=="object"&&(t[r]=`${i.fontStyle?`${i.fontStyle} `:""}${i.fontVariant?`${i.fontVariant} `:""}${i.fontWeight?`${i.fontWeight} `:""}${i.fontStretch?`${i.fontStretch} `:""}${i.fontSize||""}${i.lineHeight?`/${i.lineHeight} `:""}${i.fontFamily||""}`)}),t}function dle(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function ule(e){return Math.round(e*1e5)/1e5}const RM={textTransform:"uppercase"},zM='"Roboto", "Helvetica", "Arial", sans-serif';function mle(e,t){const{fontFamily:n=zM,fontSize:s=14,fontWeightLight:r=300,fontWeightRegular:i=400,fontWeightMedium:l=500,fontWeightBold:o=700,htmlFontSize:c=16,allVariants:d,pxToRem:u,...f}=typeof t=="function"?t(e):t,p=s/14,x=u||(b=>`${b/c*p}rem`),v=(b,C,N,S,A)=>({fontFamily:n,fontWeight:b,fontSize:x(C),lineHeight:N,...n===zM?{letterSpacing:`${ule(S/C)}em`}:{},...A,...d}),w={h1:v(r,96,1.167,-1.5),h2:v(r,60,1.2,-.5),h3:v(i,48,1.167,0),h4:v(i,34,1.235,.25),h5:v(i,24,1.334,0),h6:v(l,20,1.6,.15),subtitle1:v(i,16,1.75,.15),subtitle2:v(l,14,1.57,.1),body1:v(i,16,1.5,.15),body2:v(i,14,1.43,.15),button:v(l,14,1.75,.4,RM),caption:v(i,12,1.66,.4),overline:v(i,12,2.66,1,RM),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return _r({htmlFontSize:c,pxToRem:x,fontFamily:n,fontSize:s,fontWeightLight:r,fontWeightRegular:i,fontWeightMedium:l,fontWeightBold:o,...w},f,{clone:!1})}const fle=.2,hle=.14,gle=.12;function Xa(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${fle})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${hle})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${gle})`].join(",")}const ple=["none",Xa(0,2,1,-1,0,1,1,0,0,1,3,0),Xa(0,3,1,-2,0,2,2,0,0,1,5,0),Xa(0,3,3,-2,0,3,4,0,0,1,8,0),Xa(0,2,4,-1,0,4,5,0,0,1,10,0),Xa(0,3,5,-1,0,5,8,0,0,1,14,0),Xa(0,3,5,-1,0,6,10,0,0,1,18,0),Xa(0,4,5,-2,0,7,10,1,0,2,16,1),Xa(0,5,5,-3,0,8,10,1,0,3,14,2),Xa(0,5,6,-3,0,9,12,1,0,3,16,2),Xa(0,6,6,-3,0,10,14,1,0,4,18,3),Xa(0,6,7,-4,0,11,15,1,0,4,20,3),Xa(0,7,8,-4,0,12,17,2,0,5,22,4),Xa(0,7,8,-4,0,13,19,2,0,5,24,4),Xa(0,7,9,-4,0,14,21,2,0,5,26,4),Xa(0,8,9,-5,0,15,22,2,0,6,28,5),Xa(0,8,10,-5,0,16,24,2,0,6,30,5),Xa(0,8,11,-5,0,17,26,2,0,6,32,5),Xa(0,9,11,-5,0,18,28,2,0,7,34,6),Xa(0,9,12,-6,0,19,29,2,0,7,36,6),Xa(0,10,13,-6,0,20,31,3,0,8,38,7),Xa(0,10,13,-6,0,21,33,3,0,8,40,7),Xa(0,10,14,-6,0,22,35,3,0,8,42,7),Xa(0,11,14,-7,0,23,36,3,0,9,44,8),Xa(0,11,15,-7,0,24,38,3,0,9,46,8)],xle={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},yle={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function UM(e){return`${Math.round(e)}ms`}function ble(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function vle(e){const t={...xle,...e.easing},n={...yle,...e.duration};return{getAutoHeightDuration:ble,create:(r=["all"],i={})=>{const{duration:l=n.standard,easing:o=t.easeInOut,delay:c=0,...d}=i;return(Array.isArray(r)?r:[r]).map(u=>`${u} ${typeof l=="string"?l:UM(l)} ${o} ${typeof c=="string"?c:UM(c)}`).join(",")},...e,easing:t,duration:n}}const wle={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function Nle(e){return tl(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function eH(e={}){const t={...e};function n(s){const r=Object.entries(s);for(let i=0;i<r.length;i++){const[l,o]=r[i];!Nle(o)||l.startsWith("unstable_")?delete s[l]:tl(o)&&(s[l]={...o},n(s[l]))}}return n(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function FM(e){return typeof e=="number"?`${(e*100).toFixed(0)}%`:`calc((${e}) * 100%)`}const jle=e=>{if(!Number.isNaN(+e))return+e;const t=e.match(/\d*\.?\d+/g);if(!t)return 0;let n=0;for(let s=0;s<t.length;s+=1)n+=+t[s];return n};function Cle(e){Object.assign(e,{alpha(t,n){const s=this||e;return s.colorSpace?`oklch(from ${t} l c h / ${typeof n=="string"?`calc(${n})`:n})`:s.vars?`rgba(${t.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${typeof n=="string"?`calc(${n})`:n})`:QB(t,jle(n))},lighten(t,n){const s=this||e;return s.colorSpace?`color-mix(in ${s.colorSpace}, ${t}, #fff ${FM(n)})`:Nw(t,n)},darken(t,n){const s=this||e;return s.colorSpace?`color-mix(in ${s.colorSpace}, ${t}, #000 ${FM(n)})`:ww(t,n)}})}function HA(e={},...t){const{breakpoints:n,mixins:s={},spacing:r,palette:i={},transitions:l={},typography:o={},shape:c,colorSpace:d,...u}=e;if(e.vars&&e.generateThemeVars===void 0)throw new Error(iu(20));const f=pk({...i,colorSpace:d}),p=hk(e);let x=_r(p,{mixins:dle(p.breakpoints,s),palette:f,shadows:ple.slice(),typography:mle(f,o),transitions:vle(l),zIndex:{...wle}});return x=_r(x,u),x=t.reduce((v,w)=>_r(v,w),x),x.unstable_sxConfig={...$p,...u?.unstable_sxConfig},x.unstable_sx=function(w){return tf({sx:w,theme:this})},x.toRuntimeSource=eH,Cle(x),x}function Sle(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const _le=[...Array(25)].map((e,t)=>{if(t===0)return"none";const n=Sle(t);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function tH(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function aH(e){return e==="dark"?_le:[]}function Ale(e){const{palette:t={mode:"light"},opacity:n,overlays:s,colorSpace:r,...i}=e,l=pk({...t,colorSpace:r});return{palette:l,opacity:{...tH(l.mode),...n},overlays:s||aH(l.mode),...i}}function Ele(e){return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!e[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const Tle=e=>[...[...Array(25)].map((t,n)=>`--${e?`${e}-`:""}overlays-${n}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],kle=e=>(t,n)=>{const s=e.rootSelector||":root",r=e.colorSchemeSelector;let i=r;if(r==="class"&&(i=".%s"),r==="data"&&(i="[data-%s]"),r?.startsWith("data-")&&!r.includes("%s")&&(i=`[${r}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const l={};return Tle(e.cssVarPrefix).forEach(o=>{l[o]=n[o],delete n[o]}),i==="media"?{[s]:n,"@media (prefers-color-scheme: dark)":{[s]:l}}:i?{[i.replace("%s",t)]:l,[`${s}, ${i.replace("%s",t)}`]:n}:{[s]:{...n,...l}}}if(i&&i!=="media")return`${s}, ${i.replace("%s",String(t))}`}else if(t){if(i==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[s]:n}};if(i)return i.replace("%s",String(t))}return s};function Lle(e,t){t.forEach(n=>{e[n]||(e[n]={})})}function mt(e,t,n){!e[t]&&n&&(e[t]=n)}function hg(e){return typeof e!="string"||!e.startsWith("hsl")?e:KB(e)}function Gl(e,t){`${t}Channel`in e||(e[`${t}Channel`]=fg(hg(e[t])))}function Ple(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const Hi=e=>{try{return e()}catch{}},Dle=(e="mui")=>Qie(e);function WC(e,t,n,s,r){if(!n)return;n=n===!0?{}:n;const i=r==="dark"?"dark":"light";if(!s){t[r]=Ale({...n,palette:{mode:i,...n?.palette},colorSpace:e});return}const{palette:l,...o}=HA({...s,palette:{mode:i,...n?.palette},colorSpace:e});return t[r]={...n,palette:l,opacity:{...tH(i),...n?.opacity},overlays:n?.overlays||aH(i)},o}function Ole(e={},...t){const{colorSchemes:n={light:!0},defaultColorScheme:s,disableCssColorScheme:r=!1,cssVarPrefix:i="mui",nativeColor:l=!1,shouldSkipGeneratingVar:o=Ele,colorSchemeSelector:c=n.light&&n.dark?"media":void 0,rootSelector:d=":root",...u}=e,f=Object.keys(n)[0],p=s||(n.light&&f!=="light"?"light":f),x=Dle(i),{[p]:v,light:w,dark:b,...C}=n,N={...C};let S=v;if((p==="dark"&&!("dark"in n)||p==="light"&&!("light"in n))&&(S=!0),!S)throw new Error(iu(21,p));let A;l&&(A="oklch");const k=WC(A,N,S,u,p);w&&!N.light&&WC(A,N,w,void 0,"light"),b&&!N.dark&&WC(A,N,b,void 0,"dark");let _={defaultColorScheme:p,...k,cssVarPrefix:i,colorSchemeSelector:c,rootSelector:d,getCssVar:x,colorSchemes:N,font:{...cle(k.typography),...k.font},spacing:Ple(u.spacing)};Object.keys(_.colorSchemes).forEach($=>{const P=_.colorSchemes[$].palette,O=Q=>{const F=Q.split("-"),ee=F[1],V=F[2];return x(Q,P[ee][V])};P.mode==="light"&&(mt(P.common,"background","#fff"),mt(P.common,"onBackground","#000")),P.mode==="dark"&&(mt(P.common,"background","#000"),mt(P.common,"onBackground","#fff"));function B(Q,F,ee){if(A){let V;return Q===vd&&(V=`transparent ${((1-ee)*100).toFixed(0)}%`),Q===_a&&(V=`#000 ${(ee*100).toFixed(0)}%`),Q===Aa&&(V=`#fff ${(ee*100).toFixed(0)}%`),`color-mix(in ${A}, ${F}, ${V})`}return Q(F,ee)}if(Lle(P,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),P.mode==="light"){mt(P.Alert,"errorColor",B(_a,P.error.light,.6)),mt(P.Alert,"infoColor",B(_a,P.info.light,.6)),mt(P.Alert,"successColor",B(_a,P.success.light,.6)),mt(P.Alert,"warningColor",B(_a,P.warning.light,.6)),mt(P.Alert,"errorFilledBg",O("palette-error-main")),mt(P.Alert,"infoFilledBg",O("palette-info-main")),mt(P.Alert,"successFilledBg",O("palette-success-main")),mt(P.Alert,"warningFilledBg",O("palette-warning-main")),mt(P.Alert,"errorFilledColor",Hi(()=>P.getContrastText(P.error.main))),mt(P.Alert,"infoFilledColor",Hi(()=>P.getContrastText(P.info.main))),mt(P.Alert,"successFilledColor",Hi(()=>P.getContrastText(P.success.main))),mt(P.Alert,"warningFilledColor",Hi(()=>P.getContrastText(P.warning.main))),mt(P.Alert,"errorStandardBg",B(Aa,P.error.light,.9)),mt(P.Alert,"infoStandardBg",B(Aa,P.info.light,.9)),mt(P.Alert,"successStandardBg",B(Aa,P.success.light,.9)),mt(P.Alert,"warningStandardBg",B(Aa,P.warning.light,.9)),mt(P.Alert,"errorIconColor",O("palette-error-main")),mt(P.Alert,"infoIconColor",O("palette-info-main")),mt(P.Alert,"successIconColor",O("palette-success-main")),mt(P.Alert,"warningIconColor",O("palette-warning-main")),mt(P.AppBar,"defaultBg",O("palette-grey-100")),mt(P.Avatar,"defaultBg",O("palette-grey-400")),mt(P.Button,"inheritContainedBg",O("palette-grey-300")),mt(P.Button,"inheritContainedHoverBg",O("palette-grey-A100")),mt(P.Chip,"defaultBorder",O("palette-grey-400")),mt(P.Chip,"defaultAvatarColor",O("palette-grey-700")),mt(P.Chip,"defaultIconColor",O("palette-grey-700")),mt(P.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),mt(P.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),mt(P.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),mt(P.LinearProgress,"primaryBg",B(Aa,P.primary.main,.62)),mt(P.LinearProgress,"secondaryBg",B(Aa,P.secondary.main,.62)),mt(P.LinearProgress,"errorBg",B(Aa,P.error.main,.62)),mt(P.LinearProgress,"infoBg",B(Aa,P.info.main,.62)),mt(P.LinearProgress,"successBg",B(Aa,P.success.main,.62)),mt(P.LinearProgress,"warningBg",B(Aa,P.warning.main,.62)),mt(P.Skeleton,"bg",A?B(vd,P.text.primary,.11):`rgba(${O("palette-text-primaryChannel")} / 0.11)`),mt(P.Slider,"primaryTrack",B(Aa,P.primary.main,.62)),mt(P.Slider,"secondaryTrack",B(Aa,P.secondary.main,.62)),mt(P.Slider,"errorTrack",B(Aa,P.error.main,.62)),mt(P.Slider,"infoTrack",B(Aa,P.info.main,.62)),mt(P.Slider,"successTrack",B(Aa,P.success.main,.62)),mt(P.Slider,"warningTrack",B(Aa,P.warning.main,.62));const Q=A?B(_a,P.background.default,.6825):J0(P.background.default,.8);mt(P.SnackbarContent,"bg",Q),mt(P.SnackbarContent,"color",Hi(()=>A?BA.text.primary:P.getContrastText(Q))),mt(P.SpeedDialAction,"fabHoverBg",J0(P.background.paper,.15)),mt(P.StepConnector,"border",O("palette-grey-400")),mt(P.StepContent,"border",O("palette-grey-400")),mt(P.Switch,"defaultColor",O("palette-common-white")),mt(P.Switch,"defaultDisabledColor",O("palette-grey-100")),mt(P.Switch,"primaryDisabledColor",B(Aa,P.primary.main,.62)),mt(P.Switch,"secondaryDisabledColor",B(Aa,P.secondary.main,.62)),mt(P.Switch,"errorDisabledColor",B(Aa,P.error.main,.62)),mt(P.Switch,"infoDisabledColor",B(Aa,P.info.main,.62)),mt(P.Switch,"successDisabledColor",B(Aa,P.success.main,.62)),mt(P.Switch,"warningDisabledColor",B(Aa,P.warning.main,.62)),mt(P.TableCell,"border",B(Aa,B(vd,P.divider,1),.88)),mt(P.Tooltip,"bg",B(vd,P.grey[700],.92))}if(P.mode==="dark"){mt(P.Alert,"errorColor",B(Aa,P.error.light,.6)),mt(P.Alert,"infoColor",B(Aa,P.info.light,.6)),mt(P.Alert,"successColor",B(Aa,P.success.light,.6)),mt(P.Alert,"warningColor",B(Aa,P.warning.light,.6)),mt(P.Alert,"errorFilledBg",O("palette-error-dark")),mt(P.Alert,"infoFilledBg",O("palette-info-dark")),mt(P.Alert,"successFilledBg",O("palette-success-dark")),mt(P.Alert,"warningFilledBg",O("palette-warning-dark")),mt(P.Alert,"errorFilledColor",Hi(()=>P.getContrastText(P.error.dark))),mt(P.Alert,"infoFilledColor",Hi(()=>P.getContrastText(P.info.dark))),mt(P.Alert,"successFilledColor",Hi(()=>P.getContrastText(P.success.dark))),mt(P.Alert,"warningFilledColor",Hi(()=>P.getContrastText(P.warning.dark))),mt(P.Alert,"errorStandardBg",B(_a,P.error.light,.9)),mt(P.Alert,"infoStandardBg",B(_a,P.info.light,.9)),mt(P.Alert,"successStandardBg",B(_a,P.success.light,.9)),mt(P.Alert,"warningStandardBg",B(_a,P.warning.light,.9)),mt(P.Alert,"errorIconColor",O("palette-error-main")),mt(P.Alert,"infoIconColor",O("palette-info-main")),mt(P.Alert,"successIconColor",O("palette-success-main")),mt(P.Alert,"warningIconColor",O("palette-warning-main")),mt(P.AppBar,"defaultBg",O("palette-grey-900")),mt(P.AppBar,"darkBg",O("palette-background-paper")),mt(P.AppBar,"darkColor",O("palette-text-primary")),mt(P.Avatar,"defaultBg",O("palette-grey-600")),mt(P.Button,"inheritContainedBg",O("palette-grey-800")),mt(P.Button,"inheritContainedHoverBg",O("palette-grey-700")),mt(P.Chip,"defaultBorder",O("palette-grey-700")),mt(P.Chip,"defaultAvatarColor",O("palette-grey-300")),mt(P.Chip,"defaultIconColor",O("palette-grey-300")),mt(P.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),mt(P.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),mt(P.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),mt(P.LinearProgress,"primaryBg",B(_a,P.primary.main,.5)),mt(P.LinearProgress,"secondaryBg",B(_a,P.secondary.main,.5)),mt(P.LinearProgress,"errorBg",B(_a,P.error.main,.5)),mt(P.LinearProgress,"infoBg",B(_a,P.info.main,.5)),mt(P.LinearProgress,"successBg",B(_a,P.success.main,.5)),mt(P.LinearProgress,"warningBg",B(_a,P.warning.main,.5)),mt(P.Skeleton,"bg",A?B(vd,P.text.primary,.13):`rgba(${O("palette-text-primaryChannel")} / 0.13)`),mt(P.Slider,"primaryTrack",B(_a,P.primary.main,.5)),mt(P.Slider,"secondaryTrack",B(_a,P.secondary.main,.5)),mt(P.Slider,"errorTrack",B(_a,P.error.main,.5)),mt(P.Slider,"infoTrack",B(_a,P.info.main,.5)),mt(P.Slider,"successTrack",B(_a,P.success.main,.5)),mt(P.Slider,"warningTrack",B(_a,P.warning.main,.5));const Q=A?B(Aa,P.background.default,.985):J0(P.background.default,.98);mt(P.SnackbarContent,"bg",Q),mt(P.SnackbarContent,"color",Hi(()=>A?ZB.text.primary:P.getContrastText(Q))),mt(P.SpeedDialAction,"fabHoverBg",J0(P.background.paper,.15)),mt(P.StepConnector,"border",O("palette-grey-600")),mt(P.StepContent,"border",O("palette-grey-600")),mt(P.Switch,"defaultColor",O("palette-grey-300")),mt(P.Switch,"defaultDisabledColor",O("palette-grey-600")),mt(P.Switch,"primaryDisabledColor",B(_a,P.primary.main,.55)),mt(P.Switch,"secondaryDisabledColor",B(_a,P.secondary.main,.55)),mt(P.Switch,"errorDisabledColor",B(_a,P.error.main,.55)),mt(P.Switch,"infoDisabledColor",B(_a,P.info.main,.55)),mt(P.Switch,"successDisabledColor",B(_a,P.success.main,.55)),mt(P.Switch,"warningDisabledColor",B(_a,P.warning.main,.55)),mt(P.TableCell,"border",B(_a,B(vd,P.divider,1),.68)),mt(P.Tooltip,"bg",B(vd,P.grey[700],.92))}Gl(P.background,"default"),Gl(P.background,"paper"),Gl(P.common,"background"),Gl(P.common,"onBackground"),Gl(P,"divider"),Object.keys(P).forEach(Q=>{const F=P[Q];Q!=="tonalOffset"&&F&&typeof F=="object"&&(F.main&&mt(P[Q],"mainChannel",fg(hg(F.main))),F.light&&mt(P[Q],"lightChannel",fg(hg(F.light))),F.dark&&mt(P[Q],"darkChannel",fg(hg(F.dark))),F.contrastText&&mt(P[Q],"contrastTextChannel",fg(hg(F.contrastText))),Q==="text"&&(Gl(P[Q],"primary"),Gl(P[Q],"secondary")),Q==="action"&&(F.active&&Gl(P[Q],"active"),F.selected&&Gl(P[Q],"selected")))})}),_=t.reduce(($,P)=>_r($,P),_);const T={prefix:i,disableCssColorScheme:r,shouldSkipGeneratingVar:o,getSelector:kle(_),enableContrastVars:l},{vars:E,generateThemeVars:I,generateStyleSheets:z}=Jie(_,T);return _.vars=E,Object.entries(_.colorSchemes[_.defaultColorScheme]).forEach(([$,P])=>{_[$]=P}),_.generateThemeVars=I,_.generateStyleSheets=z,_.generateSpacing=function(){return FB(u.spacing,rk(this))},_.getColorSchemeSelector=ele(c),_.spacing=_.generateSpacing(),_.shouldSkipGeneratingVar=o,_.unstable_sxConfig={...$p,...u?.unstable_sxConfig},_.unstable_sx=function(P){return tf({sx:P,theme:this})},_.toRuntimeSource=eH,_}function BM(e,t,n){e.colorSchemes&&n&&(e.colorSchemes[t]={...n!==!0&&n,palette:pk({...n===!0?{}:n.palette,mode:t})})}function Mle(e={},...t){const{palette:n,cssVariables:s=!1,colorSchemes:r=n?void 0:{light:!0},defaultColorScheme:i=n?.mode,...l}=e,o=i||"light",c=r?.[o],d={...r,...n?{[o]:{...typeof c!="boolean"&&c,palette:n}}:void 0};if(s===!1){if(!("colorSchemes"in e))return HA(e,...t);let u=n;"palette"in e||d[o]&&(d[o]!==!0?u=d[o].palette:o==="dark"&&(u={mode:"dark"}));const f=HA({...e,palette:u},...t);return f.defaultColorScheme=o,f.colorSchemes=d,f.palette.mode==="light"&&(f.colorSchemes.light={...d.light!==!0&&d.light,palette:f.palette},BM(f,"dark",d.dark)),f.palette.mode==="dark"&&(f.colorSchemes.dark={...d.dark!==!0&&d.dark,palette:f.palette},BM(f,"light",d.light)),f}return!n&&!("light"in d)&&o==="light"&&(d.light=!0),Ole({...l,colorSchemes:d,defaultColorScheme:o,...typeof s!="boolean"&&s},...t)}const xk=Mle(),Cw="$$material";function Nl(){const e=HB(xk);return e[Cw]||e}function Ile(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const nH=e=>Ile(e)&&e!=="classes",na=Tie({themeId:Cw,defaultTheme:xk,rootShouldForwardProp:nH});function $le(){return xre}function Kc(e){return Vie(e)}function xl(...e){const t=h.useRef(void 0),n=h.useCallback(s=>{const r=e.map(i=>{if(i==null)return null;if(typeof i=="function"){const l=i,o=l(s);return typeof o=="function"?o:()=>{l(null)}}return i.current=s,()=>{i.current=null}});return()=>{r.forEach(i=>i?.())}},e);return h.useMemo(()=>e.every(s=>s==null)?null:s=>{t.current&&(t.current(),t.current=void 0),s!=null&&(t.current=n(s))},e)}function Rle(e){return typeof e=="string"}function sH(e,t,n){return e===void 0||Rle(e)?t:{...t,ownerState:{...t.ownerState,...n}}}function rH(e,t,n){return typeof e=="function"?e(t,n):e}function zle(e,t=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(s=>s.match(/^on[A-Z]/)&&typeof e[s]=="function"&&!t.includes(s)).forEach(s=>{n[s]=e[s]}),n}function HM(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{t[n]=e[n]}),t}function iH(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:s,externalForwardedProps:r,className:i}=e;if(!t){const x=Tt(n?.className,i,r?.className,s?.className),v={...n?.style,...r?.style,...s?.style},w={...n,...r,...s};return x.length>0&&(w.className=x),Object.keys(v).length>0&&(w.style=v),{props:w,internalRef:void 0}}const l=zle({...r,...s}),o=HM(s),c=HM(r),d=t(l),u=Tt(d?.className,n?.className,i,r?.className,s?.className),f={...d?.style,...n?.style,...r?.style,...s?.style},p={...d,...n,...c,...o};return u.length>0&&(p.className=u),Object.keys(f).length>0&&(p.style=f),{props:p,internalRef:d.ref}}function GM(e,t){const{className:n,elementType:s,ownerState:r,externalForwardedProps:i,internalForwardedProps:l,shouldForwardComponentProp:o=!1,...c}=t,{component:d,slots:u={[e]:void 0},slotProps:f={[e]:void 0},...p}=i,x=u[e]||s,v=rH(f[e],r),{props:{component:w,...b},internalRef:C}=iH({className:n,...c,externalForwardedProps:e==="root"?p:void 0,externalSlotProps:v}),N=xl(C,v?.ref,t.ref),S=e==="root"?w||d:w,A=sH(x,{...e==="root"&&!d&&!u[e]&&l,...e!=="root"&&!u[e]&&l,...b,...S&&!o&&{as:S},...S&&o&&{component:S},ref:N},r);return[x,A]}function ca(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}function GA(e,t){return GA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},GA(e,t)}function lH(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,GA(e,t)}const WM={disabled:!1},Lb=wt.createContext(null);var Ule=function(t){return t.scrollTop},gg="unmounted",Sd="exited",_d="entering",$m="entered",WA="exiting",Po=(function(e){lH(t,e);function t(s,r){var i;i=e.call(this,s,r)||this;var l=r,o=l&&!l.isMounting?s.enter:s.appear,c;return i.appearStatus=null,s.in?o?(c=Sd,i.appearStatus=_d):c=$m:s.unmountOnExit||s.mountOnEnter?c=gg:c=Sd,i.state={status:c},i.nextCallback=null,i}t.getDerivedStateFromProps=function(r,i){var l=r.in;return l&&i.status===gg?{status:Sd}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(r){var i=null;if(r!==this.props){var l=this.state.status;this.props.in?l!==_d&&l!==$m&&(i=_d):(l===_d||l===$m)&&(i=WA)}this.updateStatus(!1,i)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var r=this.props.timeout,i,l,o;return i=l=o=r,r!=null&&typeof r!="number"&&(i=r.exit,l=r.enter,o=r.appear!==void 0?r.appear:l),{exit:i,enter:l,appear:o}},n.updateStatus=function(r,i){if(r===void 0&&(r=!1),i!==null)if(this.cancelNextCallback(),i===_d){if(this.props.unmountOnExit||this.props.mountOnEnter){var l=this.props.nodeRef?this.props.nodeRef.current:K0.findDOMNode(this);l&&Ule(l)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Sd&&this.setState({status:gg})},n.performEnter=function(r){var i=this,l=this.props.enter,o=this.context?this.context.isMounting:r,c=this.props.nodeRef?[o]:[K0.findDOMNode(this),o],d=c[0],u=c[1],f=this.getTimeouts(),p=o?f.appear:f.enter;if(!r&&!l||WM.disabled){this.safeSetState({status:$m},function(){i.props.onEntered(d)});return}this.props.onEnter(d,u),this.safeSetState({status:_d},function(){i.props.onEntering(d,u),i.onTransitionEnd(p,function(){i.safeSetState({status:$m},function(){i.props.onEntered(d,u)})})})},n.performExit=function(){var r=this,i=this.props.exit,l=this.getTimeouts(),o=this.props.nodeRef?void 0:K0.findDOMNode(this);if(!i||WM.disabled){this.safeSetState({status:Sd},function(){r.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:WA},function(){r.props.onExiting(o),r.onTransitionEnd(l.exit,function(){r.safeSetState({status:Sd},function(){r.props.onExited(o)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(r,i){i=this.setNextCallback(i),this.setState(r,i)},n.setNextCallback=function(r){var i=this,l=!0;return this.nextCallback=function(o){l&&(l=!1,i.nextCallback=null,r(o))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},n.onTransitionEnd=function(r,i){this.setNextCallback(i);var l=this.props.nodeRef?this.props.nodeRef.current:K0.findDOMNode(this),o=r==null&&!this.props.addEndListener;if(!l||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var c=this.props.nodeRef?[this.nextCallback]:[l,this.nextCallback],d=c[0],u=c[1];this.props.addEndListener(d,u)}r!=null&&setTimeout(this.nextCallback,r)},n.render=function(){var r=this.state.status;if(r===gg)return null;var i=this.props,l=i.children;i.in,i.mountOnEnter,i.unmountOnExit,i.appear,i.enter,i.exit,i.timeout,i.addEndListener,i.onEnter,i.onEntering,i.onEntered,i.onExit,i.onExiting,i.onExited,i.nodeRef;var o=ca(i,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return wt.createElement(Lb.Provider,{value:null},typeof l=="function"?l(r,o):wt.cloneElement(wt.Children.only(l),o))},t})(wt.Component);Po.contextType=Lb;Po.propTypes={};function vm(){}Po.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:vm,onEntering:vm,onEntered:vm,onExit:vm,onExiting:vm,onExited:vm};Po.UNMOUNTED=gg;Po.EXITED=Sd;Po.ENTERING=_d;Po.ENTERED=$m;Po.EXITING=WA;function Fle(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yk(e,t){var n=function(i){return t&&h.isValidElement(i)?t(i):i},s=Object.create(null);return e&&h.Children.map(e,function(r){return r}).forEach(function(r){s[r.key]=n(r)}),s}function Ble(e,t){e=e||{},t=t||{};function n(u){return u in t?t[u]:e[u]}var s=Object.create(null),r=[];for(var i in e)i in t?r.length&&(s[i]=r,r=[]):r.push(i);var l,o={};for(var c in t){if(s[c])for(l=0;l<s[c].length;l++){var d=s[c][l];o[s[c][l]]=n(d)}o[c]=n(c)}for(l=0;l<r.length;l++)o[r[l]]=n(r[l]);return o}function Rd(e,t,n){return n[t]!=null?n[t]:e.props[t]}function Hle(e,t){return yk(e.children,function(n){return h.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:Rd(n,"appear",e),enter:Rd(n,"enter",e),exit:Rd(n,"exit",e)})})}function Gle(e,t,n){var s=yk(e.children),r=Ble(t,s);return Object.keys(r).forEach(function(i){var l=r[i];if(h.isValidElement(l)){var o=i in t,c=i in s,d=t[i],u=h.isValidElement(d)&&!d.props.in;c&&(!o||u)?r[i]=h.cloneElement(l,{onExited:n.bind(null,l),in:!0,exit:Rd(l,"exit",e),enter:Rd(l,"enter",e)}):!c&&o&&!u?r[i]=h.cloneElement(l,{in:!1}):c&&o&&h.isValidElement(d)&&(r[i]=h.cloneElement(l,{onExited:n.bind(null,l),in:d.props.in,exit:Rd(l,"exit",e),enter:Rd(l,"enter",e)}))}}),r}var Wle=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},Vle={component:"div",childFactory:function(t){return t}},bk=(function(e){lH(t,e);function t(s,r){var i;i=e.call(this,s,r)||this;var l=i.handleExited.bind(Fle(i));return i.state={contextValue:{isMounting:!0},handleExited:l,firstRender:!0},i}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(r,i){var l=i.children,o=i.handleExited,c=i.firstRender;return{children:c?Hle(r,o):Gle(r,l,o),firstRender:!1}},n.handleExited=function(r,i){var l=yk(this.props.children);r.key in l||(r.props.onExited&&r.props.onExited(i),this.mounted&&this.setState(function(o){var c=Ke({},o.children);return delete c[r.key],{children:c}}))},n.render=function(){var r=this.props,i=r.component,l=r.childFactory,o=ca(r,["component","childFactory"]),c=this.state.contextValue,d=Wle(this.state.children).map(l);return delete o.appear,delete o.enter,delete o.exit,i===null?wt.createElement(Lb.Provider,{value:c},d):wt.createElement(Lb.Provider,{value:c},wt.createElement(i,o,d))},t})(wt.Component);bk.propTypes={};bk.defaultProps=Vle;function oH(e){return parseInt(h.version,10)>=19?e?.props?.ref||null:e?.ref||null}const qle=e=>e.scrollTop;function VM(e,t){const{timeout:n,easing:s,style:r={}}=e;return{duration:r.transitionDuration??(typeof n=="number"?n:n[t.mode]||0),easing:r.transitionTimingFunction??(typeof s=="object"?s[t.mode]:s),delay:r.transitionDelay}}const Yle={entering:{opacity:1},entered:{opacity:1}},Kle=h.forwardRef(function(t,n){const s=Nl(),r={enter:s.transitions.duration.enteringScreen,exit:s.transitions.duration.leavingScreen},{addEndListener:i,appear:l=!0,children:o,easing:c,in:d,onEnter:u,onEntered:f,onEntering:p,onExit:x,onExited:v,onExiting:w,style:b,timeout:C=r,TransitionComponent:N=Po,...S}=t,A=h.useRef(null),k=xl(A,oH(o),n),_=B=>Q=>{if(B){const F=A.current;Q===void 0?B(F):B(F,Q)}},T=_(p),E=_((B,Q)=>{qle(B);const F=VM({style:b,timeout:C,easing:c},{mode:"enter"});B.style.webkitTransition=s.transitions.create("opacity",F),B.style.transition=s.transitions.create("opacity",F),u&&u(B,Q)}),I=_(f),z=_(w),$=_(B=>{const Q=VM({style:b,timeout:C,easing:c},{mode:"exit"});B.style.webkitTransition=s.transitions.create("opacity",Q),B.style.transition=s.transitions.create("opacity",Q),x&&x(B)}),P=_(v),O=B=>{i&&i(A.current,B)};return a.jsx(N,{appear:l,in:d,nodeRef:A,onEnter:E,onEntered:I,onEntering:T,onExit:$,onExited:P,onExiting:z,addEndListener:O,timeout:C,...S,children:(B,{ownerState:Q,...F})=>h.cloneElement(o,{style:{opacity:0,visibility:B==="exited"&&!d?"hidden":void 0,...Yle[B],...b,...o.props.style},ref:k,...F})})});function Qle(e){return In("MuiBackdrop",e)}yn("MuiBackdrop",["root","invisible"]);const Xle=e=>{const{classes:t,invisible:n}=e;return Mn({root:["root",n&&"invisible"]},Qle,t)},Zle=na("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),Jle=h.forwardRef(function(t,n){const s=Kc({props:t,name:"MuiBackdrop"}),{children:r,className:i,component:l="div",invisible:o=!1,open:c,components:d={},componentsProps:u={},slotProps:f={},slots:p={},TransitionComponent:x,transitionDuration:v,...w}=s,b={...s,component:l,invisible:o},C=Xle(b),N={transition:x,root:d.Root,...p},S={...u,...f},A={component:l,slots:N,slotProps:S},[k,_]=GM("root",{elementType:Zle,externalForwardedProps:A,className:Tt(C.root,i),ownerState:b}),[T,E]=GM("transition",{elementType:Kle,externalForwardedProps:A,ownerState:b});return a.jsx(T,{in:c,timeout:v,...w,...E,children:a.jsx(k,{"aria-hidden":!0,..._,classes:C,ref:n,children:r})})}),ou=Kie;function eoe(e){return typeof e.main=="string"}function toe(e,t=[]){if(!eoe(e))return!1;for(const n of t)if(!e.hasOwnProperty(n)||typeof e[n]!="string")return!1;return!0}function Gg(e=[]){return([,t])=>t&&toe(t,e)}function aoe(e){return In("MuiCircularProgress",e)}yn("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","track","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const bi=44,VA=zp`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,qA=zp`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,noe=typeof VA!="string"?fk`
        animation: ${VA} 1.4s linear infinite;
      `:null,soe=typeof qA!="string"?fk`
        animation: ${qA} 1.4s ease-in-out infinite;
      `:null,roe=e=>{const{classes:t,variant:n,color:s,disableShrink:r}=e,i={root:["root",n,`color${Ra(s)}`],svg:["svg"],track:["track"],circle:["circle",`circle${Ra(n)}`,r&&"circleDisableShrink"]};return Mn(i,aoe,t)},ioe=na("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${Ra(n.color)}`]]}})(ou(({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:noe||{animation:`${VA} 1.4s linear infinite`}},...Object.entries(e.palette).filter(Gg()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}}))]}))),loe=na("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),ooe=na("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${Ra(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})(ou(({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:soe||{animation:`${qA} 1.4s ease-in-out infinite`}}]}))),coe=na("circle",{name:"MuiCircularProgress",slot:"Track"})(ou(({theme:e})=>({stroke:"currentColor",opacity:(e.vars||e).palette.action.activatedOpacity}))),vk=h.forwardRef(function(t,n){const s=Kc({props:t,name:"MuiCircularProgress"}),{className:r,color:i="primary",disableShrink:l=!1,enableTrackSlot:o=!1,size:c=40,style:d,thickness:u=3.6,value:f=0,variant:p="indeterminate",...x}=s,v={...s,color:i,disableShrink:l,size:c,thickness:u,value:f,variant:p,enableTrackSlot:o},w=roe(v),b={},C={},N={};if(p==="determinate"){const S=2*Math.PI*((bi-u)/2);b.strokeDasharray=S.toFixed(3),N["aria-valuenow"]=Math.round(f),b.strokeDashoffset=`${((100-f)/100*S).toFixed(3)}px`,C.transform="rotate(-90deg)"}return a.jsx(ioe,{className:Tt(w.root,r),style:{width:c,height:c,...C,...d},ownerState:v,ref:n,role:"progressbar",...N,...x,children:a.jsxs(loe,{className:w.svg,ownerState:v,viewBox:`${bi/2} ${bi/2} ${bi} ${bi}`,children:[o?a.jsx(coe,{className:w.track,ownerState:v,cx:bi,cy:bi,r:(bi-u)/2,fill:"none",strokeWidth:u,"aria-hidden":"true"}):null,a.jsx(ooe,{className:w.circle,style:b,ownerState:v,cx:bi,cy:bi,r:(bi-u)/2,fill:"none",strokeWidth:u})]})})});function cH(e){return a.jsx(Jle,{sx:t=>({color:"#fff",zIndex:t.zIndex.drawer+1}),open:e,children:a.jsx(vk,{color:"inherit"})})}var hs={},ey={},qM;function doe(){if(qM)return ey;qM=1,Object.defineProperty(ey,"__esModule",{value:!0});function e(t,n){return t.reduce((s,r)=>{const i=String(r[n]);return s[i]||(s[i]=[]),s[i].push(r),s},{})}return ey.default=e,ey}var ty={},YM;function uoe(){if(YM)return ty;YM=1,Object.defineProperty(ty,"__esModule",{value:!0});function e(t,n){return t.replace(/{([^{}]*)}/g,(s,r)=>{const i=n[r];return typeof i=="string"||typeof i=="number"?i.toString():s})}return ty.default=e,ty}var ay={},KM;function moe(){if(KM)return ay;KM=1,Object.defineProperty(ay,"__esModule",{value:!0});const e=[{countryNameEn:"Andorra",countryNameLocal:"Andorra",countryCode:"AD",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"ca",officialLanguageNameEn:"Catalan, Valencian",officialLanguageNameLocal:"Catal, Valenci",countryCallingCode:"376",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Afghanistan",countryNameLocal:"     ,   ",countryCode:"AF",currencyCode:"AFN",currencyNameEn:"Afghan afghani",tinType:"",tinName:"",officialLanguageCode:"fa",officialLanguageNameEn:"Persian",officialLanguageNameLocal:"",countryCallingCode:"93",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Antigua and Barbuda",countryNameLocal:"Antigua and Barbuda",countryCode:"AG",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1268",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Anguilla",countryNameLocal:"Anguilla",countryCode:"AI",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1264",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Albania",countryNameLocal:"Shqipria",countryCode:"AL",currencyCode:"ALL",currencyNameEn:"Albanian lek",tinType:"NIPT",tinName:"Numri i Identifikimit pr Personin e Tatueshm",officialLanguageCode:"sq",officialLanguageNameEn:"Albanian",officialLanguageNameLocal:"Shqip",countryCallingCode:"355",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Armenia",countryNameLocal:"",countryCode:"AM",currencyCode:"AMD",currencyNameEn:"Armenian dram",tinType:"",tinName:"",officialLanguageCode:"hy",officialLanguageNameEn:"Armenian",officialLanguageNameLocal:"",countryCallingCode:"374",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Angola",countryNameLocal:"Angola",countryCode:"AO",currencyCode:"AOA",currencyNameEn:"Angolan kwanza",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"244",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Antarctica",countryNameLocal:"Antarctica, Antrtico, Antarctique, ",countryCode:"AQ",currencyCode:"",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"672",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Argentina",countryNameLocal:"Argentina",countryCode:"AR",currencyCode:"ARS",currencyNameEn:"Argentine peso",tinType:"CUIT",tinName:"Cdigo nico de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"54",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"American Samoa",countryNameLocal:"American Samoa",countryCode:"AS",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1684",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Austria",countryNameLocal:"sterreich",countryCode:"AT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"UID",tinName:"Umsatzsteuer-Identifikationsnummer",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"43",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Australia",countryNameLocal:"Australia",countryCode:"AU",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"ABN",tinName:"Australian Business Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"61",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Aruba",countryNameLocal:"Aruba",countryCode:"AW",currencyCode:"AWG",currencyNameEn:"Aruban florin",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"297",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"land Islands",countryNameLocal:"land",countryCode:"AX",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"sv",officialLanguageNameEn:"Swedish",officialLanguageNameLocal:"Svenska",countryCallingCode:"358",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Azerbaijan",countryNameLocal:"Azrbaycan",countryCode:"AZ",currencyCode:"AZN",currencyNameEn:"Azerbaijani manat",tinType:"",tinName:"",officialLanguageCode:"az",officialLanguageNameEn:"Azerbaijani",officialLanguageNameLocal:"azrbaycan dili",countryCallingCode:"994",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Bosnia and Herzegovina",countryNameLocal:"Bosna i Hercegovina",countryCode:"BA",currencyCode:"BAM",currencyNameEn:"Bosnia and Herzegovina convertible mark",tinType:"",tinName:"",officialLanguageCode:"bs",officialLanguageNameEn:"Bosnian",officialLanguageNameLocal:"bosanski jezik",countryCallingCode:"387",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Barbados",countryNameLocal:"Barbados",countryCode:"BB",currencyCode:"BBD",currencyNameEn:"Barbados dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1246",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bangladesh",countryNameLocal:" ",countryCode:"BD",currencyCode:"BDT",currencyNameEn:"Bangladeshi taka",tinType:"",tinName:"",officialLanguageCode:"bn",officialLanguageNameEn:"Bengali",officialLanguageNameLocal:"",countryCallingCode:"880",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Belgium",countryNameLocal:"Belgi, Belgique, Belgien",countryCode:"BE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"n TVABTW-nr Mwst-nr",tinName:"BTW identificatienummer / Numro de TVA",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"32",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Burkina Faso",countryNameLocal:"Burkina Faso",countryCode:"BF",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"226",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Bulgaria",countryNameLocal:"",countryCode:"BG",currencyCode:"BGN",currencyNameEn:"Bulgarian lev",tinType:" ",tinName:"   ",officialLanguageCode:"bg",officialLanguageNameEn:"Bulgarian",officialLanguageNameLocal:" ",countryCallingCode:"359",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Bahrain",countryNameLocal:"",countryCode:"BH",currencyCode:"BHD",currencyNameEn:"Bahraini dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"973",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Burundi",countryNameLocal:"Burundi",countryCode:"BI",currencyCode:"BIF",currencyNameEn:"Burundian franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"257",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Benin",countryNameLocal:"Bnin",countryCode:"BJ",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"229",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Saint Barthlemy",countryNameLocal:"Saint-Barthlemy",countryCode:"BL",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"590",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bermuda",countryNameLocal:"Bermuda",countryCode:"BM",currencyCode:"BMD",currencyNameEn:"Bermudian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1441",areaCodes:[],region:"North America",flag:""},{countryNameEn:"Brunei Darussalam",countryNameLocal:"Brunei Darussalam",countryCode:"BN",currencyCode:"BND",currencyNameEn:"Brunei dollar",tinType:"",tinName:"",officialLanguageCode:"ms",officialLanguageNameEn:"Malay",officialLanguageNameLocal:"Bahasa Melayu,  ",countryCallingCode:"673",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Bolivia (Plurinational State of)",countryNameLocal:"Bolivia, Bulibiya, Volvia, Wuliwya",countryCode:"BO",currencyCode:"BOP",currencyNameEn:"",tinType:"NIT",tinName:"Nmero de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"591",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bonaire, Sint Eustatius and Saba",countryNameLocal:"Caribisch Nederland",countryCode:"BQ",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"5997",areaCodes:[],region:"Unknown",flag:""},{countryNameEn:"Brazil",countryNameLocal:"Brasil",countryCode:"BR",currencyCode:"BRL",currencyNameEn:"Brazilian real",tinType:"CNPJ",tinName:"Cadastro Nacional de Pessoa Jurdica",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"55",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bhutan",countryNameLocal:"",countryCode:"BT",currencyCode:"BTN",currencyNameEn:"Bhutanese ngultrum",tinType:"",tinName:"",officialLanguageCode:"dz",officialLanguageNameEn:"Dzongkha",officialLanguageNameLocal:"",countryCallingCode:"975",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Bouvet Island",countryNameLocal:"Bouvetya",countryCode:"BV",currencyCode:"NOK",currencyNameEn:"Norwegian krone",tinType:"",tinName:"",officialLanguageCode:"no",officialLanguageNameEn:"Norwegian",officialLanguageNameLocal:"Norsk",countryCallingCode:"47",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Botswana",countryNameLocal:"Botswana",countryCode:"BW",currencyCode:"BWP",currencyNameEn:"Botswana pula",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"267",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Belarus",countryNameLocal:"",countryCode:"BY",currencyCode:"BYR",currencyNameEn:"",tinType:" (UNP)",tinName:"  ",officialLanguageCode:"be",officialLanguageNameEn:"Belarusian",officialLanguageNameLocal:" ",countryCallingCode:"375",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Belize",countryNameLocal:"Belize",countryCode:"BZ",currencyCode:"BZD",currencyNameEn:"Belize dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"501",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Canada",countryNameLocal:"Canada",countryCode:"CA",currencyCode:"CAD",currencyNameEn:"Canadian dollar",tinType:"BN / NE",tinName:"Business Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:["403","587","780","825","236","250","604","672","778","204","431","506","709","782","902","226","249","289","343","365","416","437","519","548","613","647","705","807","905","367","418","438","450","514","579","581","819","873","306","639","867"],region:"North America",flag:""},{countryNameEn:"Switzerland",countryNameLocal:"Schweiz, Suisse, Svizzera, Svizra",countryCode:"CH",currencyCode:"CHF",currencyNameEn:"Swiss franc",tinType:"MWST/TVA/IVA",tinName:"Mehrwertsteuernummer",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"41",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Cte d'Ivoire",countryNameLocal:"Cte d'Ivoire",countryCode:"CI",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"225",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Chile",countryNameLocal:"Chile",countryCode:"CL",currencyCode:"CLP",currencyNameEn:"Chilean peso",tinType:"RUT",tinName:"Rol nico Tributario",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"56",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Cameroon",countryNameLocal:"Cameroun, Cameroon",countryCode:"CM",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"237",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"China",countryNameLocal:"",countryCode:"CN",currencyCode:"CNY",currencyNameEn:"Renminbi (Chinese) yuan",tinType:"",tinName:"",officialLanguageCode:"zh-hans",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"86",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Colombia",countryNameLocal:"Colombia",countryCode:"CO",currencyCode:"COP",currencyNameEn:"Colombian peso",tinType:"NIT",tinName:"Nmero De Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"57",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Costa Rica",countryNameLocal:"Costa Rica",countryCode:"CR",currencyCode:"CRC",currencyNameEn:"Costa Rican colon",tinType:"",tinName:"Cdula Jurdica",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"506",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Cuba",countryNameLocal:"Cuba",countryCode:"CU",currencyCode:"CUC",currencyNameEn:"Cuban convertible peso",tinType:"",tinName:"",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"53",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Cabo Verde",countryNameLocal:"Cabo Verde",countryCode:"CV",currencyCode:"CVE",currencyNameEn:"Cape Verdean escudo",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"238",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Curaao",countryNameLocal:"Curaao",countryCode:"CW",currencyCode:"ANG",currencyNameEn:"Netherlands Antillean guilder",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"599",areaCodes:[],region:"Unknown",flag:""},{countryNameEn:"Christmas Island",countryNameLocal:"Christmas Island",countryCode:"CX",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"61",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Cyprus",countryNameLocal:", Kibris",countryCode:"CY",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"  ...",officialLanguageCode:"el",officialLanguageNameEn:"Greek, Modern (1453-)",officialLanguageNameLocal:"",countryCallingCode:"357",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Germany",countryNameLocal:"Deutschland",countryCode:"DE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"USt-IdNr.",tinName:"Umsatzsteuer-Identifikationsnummer",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"49",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Djibouti",countryNameLocal:"Djibouti, , Jabuuti, Gabuutih",countryCode:"DJ",currencyCode:"DJF",currencyNameEn:"Djiboutian franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"253",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Denmark",countryNameLocal:"Danmark",countryCode:"DK",currencyCode:"DKK",currencyNameEn:"Danish krone",tinType:"CVR",tinName:"Momsregistreringsnummer",officialLanguageCode:"da",officialLanguageNameEn:"Danish",officialLanguageNameLocal:"dansk",countryCallingCode:"45",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Dominica",countryNameLocal:"Dominica",countryCode:"DM",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"767",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Algeria",countryNameLocal:"",countryCode:"DZ",currencyCode:"DZD",currencyNameEn:"Algerian dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"213",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Ecuador",countryNameLocal:"Ecuador",countryCode:"EC",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"RUC",tinName:"Nmero de Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"593",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Estonia",countryNameLocal:"Eesti",countryCode:"EE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"KMKR",tinName:"Kibemaksukohustuslase number",officialLanguageCode:"et",officialLanguageNameEn:"Estonian",officialLanguageNameLocal:"eesti, eesti keel",countryCallingCode:"372",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Egypt",countryNameLocal:"",countryCode:"EG",currencyCode:"EGP",currencyNameEn:"Egyptian pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"20",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Western Sahara",countryNameLocal:"Sahara Occidental",countryCode:"EH",currencyCode:"MAD",currencyNameEn:"Moroccan dirham",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"212",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Eritrea",countryNameLocal:", , Eritrea",countryCode:"ER",currencyCode:"ERN",currencyNameEn:"Eritrean nakfa",tinType:"",tinName:"",officialLanguageCode:"ti",officialLanguageNameEn:"Tigrinya",officialLanguageNameLocal:"",countryCallingCode:"291",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Spain",countryNameLocal:"Espaa",countryCode:"ES",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"NIF (CIF)",tinName:"Nmero de Identificacin Fiscal (formerly named Cdigo de Identificacin Fiscal)",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"34",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Ethiopia",countryNameLocal:", Itoophiyaa",countryCode:"ET",currencyCode:"ETB",currencyNameEn:"Ethiopian birr",tinType:"",tinName:"",officialLanguageCode:"am",officialLanguageNameEn:"Amharic",officialLanguageNameLocal:"",countryCallingCode:"251",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Finland",countryNameLocal:"Suomi",countryCode:"FI",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"ALV nro",tinName:"Arvonlisveronumero",officialLanguageCode:"fi",officialLanguageNameEn:"Finnish",officialLanguageNameLocal:"suomi, suomen kieli",countryCallingCode:"358",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Fiji",countryNameLocal:"Fiji",countryCode:"FJ",currencyCode:"FJD",currencyNameEn:"Fiji dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"679",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Micronesia (Federated States of)",countryNameLocal:"Micronesia",countryCode:"FM",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"691",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"France",countryNameLocal:"France",countryCode:"FR",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"n TVA",tinName:"Numro d'identification  la taxe sur la valeur ajoute / Numro de TVA intracommunautaire",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"33",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Gabon",countryNameLocal:"Gabon",countryCode:"GA",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"241",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Grenada",countryNameLocal:"Grenada",countryCode:"GD",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1473",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Georgia",countryNameLocal:"",countryCode:"GE",currencyCode:"GEL",currencyNameEn:"Georgian lari",tinType:"",tinName:"",officialLanguageCode:"ka",officialLanguageNameEn:"Georgian",officialLanguageNameLocal:"",countryCallingCode:"995",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"French Guiana",countryNameLocal:"Guyane franaise",countryCode:"GF",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"594",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Guernsey",countryNameLocal:"Guernsey",countryCode:"GG",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Ghana",countryNameLocal:"Ghana",countryCode:"GH",currencyCode:"GHS",currencyNameEn:"Ghanaian cedi",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"233",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Gibraltar",countryNameLocal:"Gibraltar",countryCode:"GI",currencyCode:"GIP",currencyNameEn:"Gibraltar pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"350",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Greenland",countryNameLocal:"Kalaallit Nunaat, Grnland",countryCode:"GL",currencyCode:"DKK",currencyNameEn:"Danish krone",tinType:"",tinName:"",officialLanguageCode:"kl",officialLanguageNameEn:"Kalaallisut, Greenlandic",officialLanguageNameLocal:"kalaallisut, kalaallit oqaasii",countryCallingCode:"299",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Guinea",countryNameLocal:"Guine",countryCode:"GN",currencyCode:"GNF",currencyNameEn:"Guinean franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"224",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Guadeloupe",countryNameLocal:"Guadeloupe",countryCode:"GP",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"590",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Equatorial Guinea",countryNameLocal:"Guiena ecuatorial, Guine quatoriale, Guin Equatorial",countryCode:"GQ",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"240",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Greece",countryNameLocal:"",countryCode:"GR",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"el",officialLanguageNameEn:"Greek, Modern (1453-)",officialLanguageNameLocal:"",countryCallingCode:"30",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"South Georgia and the South Sandwich Islands",countryNameLocal:"South Georgia and the South Sandwich Islands",countryCode:"GS",currencyCode:"",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"500",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Guatemala",countryNameLocal:"Guatemala",countryCode:"GT",currencyCode:"GTQ",currencyNameEn:"Guatemalan quetzal",tinType:"NIT",tinName:"Nmero de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"502",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Guam",countryNameLocal:"Guam, Guhn",countryCode:"GU",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Guinea-Bissau",countryNameLocal:"Guin-Bissau",countryCode:"GW",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"245",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Guyana",countryNameLocal:"Guyana",countryCode:"GY",currencyCode:"GYD",currencyNameEn:"Guyanese dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"592",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Hong Kong",countryNameLocal:", Hong Kong",countryCode:"HK",currencyCode:"HKD",currencyNameEn:"Hong Kong dollar",tinType:"",tinName:"",officialLanguageCode:"zh-hant",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"852",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Honduras",countryNameLocal:"Honduras",countryCode:"HN",currencyCode:"HNL",currencyNameEn:"Honduran lempira",tinType:"RTN",tinName:"Registro Tributario Nacional",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"504",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Croatia",countryNameLocal:"Hrvatska",countryCode:"HR",currencyCode:"HRK",currencyNameEn:"Croatian kuna",tinType:"PDV-ID; OIB",tinName:"PDV Id. Broj OIB",officialLanguageCode:"hr",officialLanguageNameEn:"Croatian",officialLanguageNameLocal:"hrvatski jezik",countryCallingCode:"385",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Haiti",countryNameLocal:"Hati, Ayiti",countryCode:"HT",currencyCode:"HTG",currencyNameEn:"Haitian gourde",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"509",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Hungary",countryNameLocal:"Magyarorszg",countryCode:"HU",currencyCode:"HUF",currencyNameEn:"Hungarian forint",tinType:"ANUM",tinName:"Kzssgi adszm",officialLanguageCode:"hu",officialLanguageNameEn:"Hungarian",officialLanguageNameLocal:"magyar",countryCallingCode:"36",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Indonesia",countryNameLocal:"Indonesia",countryCode:"ID",currencyCode:"IDR",currencyNameEn:"Indonesian rupiah",tinType:"NPWP",tinName:"Nomor Pokok Wajib Pajak",officialLanguageCode:"id",officialLanguageNameEn:"Indonesian",officialLanguageNameLocal:"Bahasa Indonesia",countryCallingCode:"62",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Ireland",countryNameLocal:"Ireland, ire",countryCode:"IE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"VAT or CBL",tinName:"Value added tax identification no.",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"353",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Israel",countryNameLocal:"",countryCode:"IL",currencyCode:"ILS",currencyNameEn:"Israeli new shekel",tinType:"",tinName:`'   / "`,officialLanguageCode:"he",officialLanguageNameEn:"Hebrew",officialLanguageNameLocal:"",countryCallingCode:"972",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Isle of Man",countryNameLocal:"Isle of Man",countryCode:"IM",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"India",countryNameLocal:", India",countryCode:"IN",currencyCode:"INR",currencyNameEn:"Indian rupee",tinType:"VAT TIN / CST TIN",tinName:"Value Added Tax - Taxpayer Identification Number / Central Sales Tax - Taxpayer Identification Number (In most states)Not applicable",officialLanguageCode:"hi",officialLanguageNameEn:"Hindi",officialLanguageNameLocal:", ",countryCallingCode:"91",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"British Indian Ocean Territories",countryNameLocal:"British Indian Ocean Territories",countryCode:"IO",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"246",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"Iraq",countryNameLocal:", Iraq",countryCode:"IQ",currencyCode:"IQD",currencyNameEn:"Iraqi dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"964",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Iran (Islamic Republic of)",countryNameLocal:"",countryCode:"IR",currencyCode:"IRR",currencyNameEn:"Iranian rial",tinType:"",tinName:"",officialLanguageCode:"fa",officialLanguageNameEn:"Persian",officialLanguageNameLocal:"",countryCallingCode:"98",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Iceland",countryNameLocal:"sland",countryCode:"IS",currencyCode:"ISK",currencyNameEn:"Icelandic krna",tinType:"VSK / VASK",tinName:"Virisaukaskattsnmer",officialLanguageCode:"is",officialLanguageNameEn:"Icelandic",officialLanguageNameLocal:"slenska",countryCallingCode:"354",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Italy",countryNameLocal:"Italia",countryCode:"IT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"P.IVA",tinName:"Partita IVA(IVA = Imposta sul Valore Aggiunto)",officialLanguageCode:"it",officialLanguageNameEn:"Italian",officialLanguageNameLocal:"Italiano",countryCallingCode:"39",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Jersey",countryNameLocal:"Jersey",countryCode:"JE",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Jamaica",countryNameLocal:"Jamaica",countryCode:"JM",currencyCode:"JMD",currencyNameEn:"Jamaican dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"876",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Jordan",countryNameLocal:"",countryCode:"JO",currencyCode:"JOD",currencyNameEn:"Jordanian dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"962",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Japan",countryNameLocal:"",countryCode:"JP",currencyCode:"JPY",currencyNameEn:"Japanese yen",tinType:"",tinName:"",officialLanguageCode:"ja",officialLanguageNameEn:"Japanese",officialLanguageNameLocal:" ()",countryCallingCode:"81",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Kenya",countryNameLocal:"Kenya",countryCode:"KE",currencyCode:"KES",currencyNameEn:"Kenyan shilling",tinType:"",tinName:"",officialLanguageCode:"sw",officialLanguageNameEn:"Swahili",officialLanguageNameLocal:"Kiswahili",countryCallingCode:"254",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Kyrgyzstan",countryNameLocal:", ",countryCode:"KG",currencyCode:"KGS",currencyNameEn:"Kyrgyzstani som",tinType:"",tinName:"",officialLanguageCode:"ky",officialLanguageNameEn:"Kirghiz, Kyrgyz",officialLanguageNameLocal:",  ",countryCallingCode:"996",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Cambodia",countryNameLocal:"",countryCode:"KH",currencyCode:"KHR",currencyNameEn:"Cambodian riel",tinType:"",tinName:"",officialLanguageCode:"km",officialLanguageNameEn:"Central Khmer",officialLanguageNameLocal:", , ",countryCallingCode:"855",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"North Korea",countryNameLocal:"",countryCode:"KP",currencyCode:"KPW",currencyNameEn:"North Korean won",tinType:"",tinName:"",officialLanguageCode:"ko",officialLanguageNameEn:"Korean",officialLanguageNameLocal:"",countryCallingCode:"850",areaCodes:[],region:"Asia",flag:""},{countryNameEn:"South Korea",countryNameLocal:"",countryCode:"KR",currencyCode:"KRW",currencyNameEn:"South Korean won",tinType:"",tinName:"",officialLanguageCode:"ko",officialLanguageNameEn:"Korean",officialLanguageNameLocal:"",countryCallingCode:"82",areaCodes:[],region:"Asia",flag:""},{countryNameEn:"Kiribati",countryNameLocal:"Kiribati",countryCode:"KI",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"686",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Saint Kitts and Nevis",countryNameLocal:"Saint Kitts and Nevis",countryCode:"KN",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1869",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Kuwait",countryNameLocal:"",countryCode:"KW",currencyCode:"KWD",currencyNameEn:"Kuwaiti dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"965",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Kazakhstan",countryNameLocal:", ",countryCode:"KZ",currencyCode:"KZT",currencyNameEn:"Kazakhstani tenge",tinType:"",tinName:"",officialLanguageCode:"kk",officialLanguageNameEn:"Kazakh",officialLanguageNameLocal:" ",countryCallingCode:"7",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Lebanon",countryNameLocal:", Liban",countryCode:"LB",currencyCode:"LBP",currencyNameEn:"Lebanese pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"961",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Saint Lucia",countryNameLocal:"Saint Lucia",countryCode:"LC",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1758",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Liechtenstein",countryNameLocal:"Liechtenstein",countryCode:"LI",currencyCode:"CHF",currencyNameEn:"Swiss franc",tinType:"",tinName:"",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"423",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Sri Lanka",countryNameLocal:" , ",countryCode:"LK",currencyCode:"LKR",currencyNameEn:"Sri Lankan rupee",tinType:"",tinName:"",officialLanguageCode:"si",officialLanguageNameEn:"Sinhala, Sinhalese",officialLanguageNameLocal:"",countryCallingCode:"94",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Liberia",countryNameLocal:"Liberia",countryCode:"LR",currencyCode:"LRD",currencyNameEn:"Liberian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"231",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Lesotho",countryNameLocal:"Lesotho",countryCode:"LS",currencyCode:"LSL",currencyNameEn:"Lesotho loti",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"266",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Lithuania",countryNameLocal:"Lietuva",countryCode:"LT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"PVM kodas",tinName:"PVM (abbrev. Pridtins verts mokestis) moktojo kodas",officialLanguageCode:"lt",officialLanguageNameEn:"Lithuanian",officialLanguageNameLocal:"lietuvi kalba",countryCallingCode:"370",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Luxembourg",countryNameLocal:"Ltzebuerg, Luxembourg, Luxemburg",countryCode:"LU",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"No. TVA",tinName:"Numro d'identification  la taxe sur la valeur ajoute",officialLanguageCode:"lb",officialLanguageNameEn:"Luxembourgish, Letzeburgesch",officialLanguageNameLocal:"Ltzebuergesch",countryCallingCode:"352",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Latvia",countryNameLocal:"Latvija",countryCode:"LV",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"PVN",tinName:"Pievienots vrtbas nodoka (PVN) reistrcijas numurs",officialLanguageCode:"lv",officialLanguageNameEn:"Latvian",officialLanguageNameLocal:"latvieu valoda",countryCallingCode:"371",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Libya",countryNameLocal:"",countryCode:"LY",currencyCode:"LYD",currencyNameEn:"Libyan dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"218",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Morocco",countryNameLocal:"Maroc, , ",countryCode:"MA",currencyCode:"MAD",currencyNameEn:"Moroccan dirham",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"212",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Monaco",countryNameLocal:"Monaco",countryCode:"MC",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"377",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Montenegro",countryNameLocal:"Crna Gora,  ",countryCode:"ME",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"srp",officialLanguageNameEn:" ",officialLanguageNameLocal:"",countryCallingCode:"382",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Saint Martin (French part)",countryNameLocal:"Saint-Martin",countryCode:"MF",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"590",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Madagascar",countryNameLocal:"Madagasikara, Madagascar",countryCode:"MG",currencyCode:"MGA",currencyNameEn:"Malagasy ariary",tinType:"",tinName:"",officialLanguageCode:"mg",officialLanguageNameEn:"Malagasy",officialLanguageNameLocal:"fiteny malagasy",countryCallingCode:"261",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Mali",countryNameLocal:"Mali",countryCode:"ML",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"223",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Myanmar",countryNameLocal:"",countryCode:"MM",currencyCode:"MMK",currencyNameEn:"Myanmar kyat",tinType:"",tinName:"",officialLanguageCode:"my",officialLanguageNameEn:"Burmese",officialLanguageNameLocal:"",countryCallingCode:"95",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Mongolia",countryNameLocal:" ",countryCode:"MN",currencyCode:"MNT",currencyNameEn:"Mongolian tgrg",tinType:"",tinName:"",officialLanguageCode:"mn",officialLanguageNameEn:"Mongolian",officialLanguageNameLocal:" ",countryCallingCode:"976",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Macao",countryNameLocal:", Macau",countryCode:"MO",currencyCode:"MOP",currencyNameEn:"Macanese pataca",tinType:"",tinName:"",officialLanguageCode:"zh-hant",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"853",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Martinique",countryNameLocal:"Martinique",countryCode:"MQ",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"596",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Mauritania",countryNameLocal:", Mauritanie",countryCode:"MR",currencyCode:"MRU",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"222",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Montserrat",countryNameLocal:"Montserrat",countryCode:"MS",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1664",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Malta",countryNameLocal:"Malta",countryCode:"MT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"Vat No.",tinName:"Vat reg. no.",officialLanguageCode:"mt",officialLanguageNameEn:"Maltese",officialLanguageNameLocal:"Malti",countryCallingCode:"356",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Mauritius",countryNameLocal:"Maurice, Mauritius",countryCode:"MU",currencyCode:"MUR",currencyNameEn:"Mauritian rupee",tinType:"",tinName:"",officialLanguageCode:"mfe",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"230",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Maldives",countryNameLocal:"",countryCode:"MV",currencyCode:"MVR",currencyNameEn:"Maldivian rufiyaa",tinType:"",tinName:"",officialLanguageCode:"dv",officialLanguageNameEn:"Divehi, Dhivehi, Maldivian",officialLanguageNameLocal:"",countryCallingCode:"960",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Malawi",countryNameLocal:"Malawi",countryCode:"MW",currencyCode:"MWK",currencyNameEn:"Malawian kwacha",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"265",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Mexico",countryNameLocal:"Mxico",countryCode:"MX",currencyCode:"MXN",currencyNameEn:"Mexican peso",tinType:"RFC",tinName:"Registro Federal de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"52",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Malaysia",countryNameLocal:"",countryCode:"MY",currencyCode:"MYR",currencyNameEn:"Malaysian ringgit",tinType:"",tinName:"",officialLanguageCode:"ms",officialLanguageNameEn:"Malay",officialLanguageNameLocal:"Bahasa Melayu,  ",countryCallingCode:"60",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Mozambique",countryNameLocal:"Mozambique",countryCode:"MZ",currencyCode:"MZN",currencyNameEn:"Mozambican metical",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"258",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Namibia",countryNameLocal:"Namibia",countryCode:"NA",currencyCode:"NAD",currencyNameEn:"Namibian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"264",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"New Caledonia",countryNameLocal:"Nouvelle-Caldonie",countryCode:"NC",currencyCode:"XPF",currencyNameEn:"CFP franc (franc Pacifique)",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"687",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Norfolk Island",countryNameLocal:"Norfolk Island",countryCode:"NF",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"672",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Nigeria",countryNameLocal:"Nigeria",countryCode:"NG",currencyCode:"NGN",currencyNameEn:"Nigerian naira",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"234",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Nicaragua",countryNameLocal:"Nicaragua",countryCode:"NI",currencyCode:"NIO",currencyNameEn:"Nicaraguan crdoba",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"505",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Norway",countryNameLocal:"Norge, Noreg",countryCode:"NO",currencyCode:"NOK",currencyNameEn:"Norwegian krone",tinType:"Orgnr",tinName:"Organisasjonsnummer",officialLanguageCode:"nb",officialLanguageNameEn:"Norwegian Bokml",officialLanguageNameLocal:"Norsk Bokml",countryCallingCode:"47",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Nepal",countryNameLocal:"",countryCode:"NP",currencyCode:"NPR",currencyNameEn:"Nepalese rupee",tinType:"",tinName:"",officialLanguageCode:"ne",officialLanguageNameEn:"Nepali",officialLanguageNameLocal:"",countryCallingCode:"977",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Nauru",countryNameLocal:"Nauru",countryCode:"NR",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"na",officialLanguageNameEn:"Nauru",officialLanguageNameLocal:"Dorerin Naoero",countryCallingCode:"674",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Niue",countryNameLocal:"Niue",countryCode:"NU",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"niu",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"683",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"New Zealand",countryNameLocal:"New Zealand",countryCode:"NZ",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"NZBN",tinName:"NZ Business Number",officialLanguageCode:"mi",officialLanguageNameEn:"Maori",officialLanguageNameLocal:"te reo Mori",countryCallingCode:"64",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Oman",countryNameLocal:" ",countryCode:"OM",currencyCode:"OMR",currencyNameEn:"Omani rial",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"968",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Panama",countryNameLocal:"Panama",countryCode:"PA",currencyCode:"PAB",currencyNameEn:"Panamanian balboa",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"507",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Peru",countryNameLocal:"Per",countryCode:"PE",currencyCode:"PEN",currencyNameEn:"Peruvian sol",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"51",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"French Polynesia",countryNameLocal:"Polynsie franaise",countryCode:"PF",currencyCode:"XPF",currencyNameEn:"CFP franc (franc Pacifique)",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"689",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Papua New Guinea",countryNameLocal:"Papua New Guinea",countryCode:"PG",currencyCode:"PGK",currencyNameEn:"Papua New Guinean kina",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"675",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Pakistan",countryNameLocal:"",countryCode:"PK",currencyCode:"PKR",currencyNameEn:"Pakistani rupee",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"92",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Poland",countryNameLocal:"Polska",countryCode:"PL",currencyCode:"PLN",currencyNameEn:"Polish zoty",tinType:"NIP",tinName:"numer identyfikacji podatkowej",officialLanguageCode:"pl",officialLanguageNameEn:"Polish",officialLanguageNameLocal:"jzyk polski, polszczyzna",countryCallingCode:"48",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Saint Pierre and Miquelon",countryNameLocal:"Saint-Pierre-et-Miquelon",countryCode:"PM",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"508",areaCodes:[],region:"North America",flag:""},{countryNameEn:"Pitcairn",countryNameLocal:"Pitcairn",countryCode:"PN",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"64",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Puerto Rico",countryNameLocal:"Puerto Rico",countryCode:"PR",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"1",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Palestine, State of",countryNameLocal:"Palestinian Territory",countryCode:"PS",currencyCode:"",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"970",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Portugal",countryNameLocal:"Portugal",countryCode:"PT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"NIPC",tinName:"Nmero de Identificao de Pessoa Coletiva (NIPC)",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"351",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Palau",countryNameLocal:"Palau",countryCode:"PW",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"680",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Paraguay",countryNameLocal:"Paraguay",countryCode:"PY",currencyCode:"PYG",currencyNameEn:"Paraguayan guaran",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"595",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Qatar",countryNameLocal:"",countryCode:"QA",currencyCode:"QAR",currencyNameEn:"Qatari riyal",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"974",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Runion",countryNameLocal:"La Runion",countryCode:"RE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"262",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Romania",countryNameLocal:"Romnia",countryCode:"RO",currencyCode:"RON",currencyNameEn:"Romanian leu",tinType:"CIF",tinName:"Codul de identificare fiscal",officialLanguageCode:"ro",officialLanguageNameEn:"Romanian, Moldavian, Moldovan",officialLanguageNameLocal:"Romn",countryCallingCode:"40",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Serbia",countryNameLocal:"",countryCode:"RS",currencyCode:"RSD",currencyNameEn:"Serbian dinar",tinType:"PIB",tinName:"Poreski identifikacioni broj",officialLanguageCode:"sr",officialLanguageNameEn:"Serbian",officialLanguageNameLocal:" ",countryCallingCode:"381",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Russia",countryNameLocal:"",countryCode:"RU",currencyCode:"RUB",currencyNameEn:"Russian ruble",tinType:"",tinName:"  ",officialLanguageCode:"ru",officialLanguageNameEn:"Russian",officialLanguageNameLocal:"",countryCallingCode:"7",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Rwanda",countryNameLocal:"Rwanda",countryCode:"RW",currencyCode:"RWF",currencyNameEn:"Rwandan franc",tinType:"",tinName:"",officialLanguageCode:"rw",officialLanguageNameEn:"Kinyarwanda",officialLanguageNameLocal:"Ikinyarwanda",countryCallingCode:"250",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Saudi Arabia",countryNameLocal:"",countryCode:"SA",currencyCode:"SAR",currencyNameEn:"Saudi riyal",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"966",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Solomon Islands",countryNameLocal:"Solomon Islands",countryCode:"SB",currencyCode:"SBD",currencyNameEn:"Solomon Islands dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"677",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Seychelles",countryNameLocal:"Seychelles",countryCode:"SC",currencyCode:"SCR",currencyNameEn:"Seychelles rupee",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"248",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Sweden",countryNameLocal:"Sverige",countryCode:"SE",currencyCode:"SEK",currencyNameEn:"Swedish krona/kronor",tinType:"Momsnr.",tinName:"VAT-nummer",officialLanguageCode:"sv",officialLanguageNameEn:"Swedish",officialLanguageNameLocal:"Svenska",countryCallingCode:"46",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Singapore",countryNameLocal:"Singapore",countryCode:"SG",currencyCode:"SGD",currencyNameEn:"Singapore dollar",tinType:"",tinName:"",officialLanguageCode:"zh-hans",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"65",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Saint Helena, Ascension and Tristan da Cunha",countryNameLocal:"Saint Helena",countryCode:"SH",currencyCode:"SHP",currencyNameEn:"Saint Helena pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"290",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Slovenia",countryNameLocal:"Slovenija",countryCode:"SI",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"ID za DDV",tinName:"Davna tevilka",officialLanguageCode:"sl",officialLanguageNameEn:"Slovenian",officialLanguageNameLocal:"Slovenski Jezik, Slovenina",countryCallingCode:"386",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Svalbard and Jan Mayen",countryNameLocal:"Svalbard and Jan Mayen",countryCode:"SJ",currencyCode:"NOK",currencyNameEn:"Norwegian krone",tinType:"",tinName:"",officialLanguageCode:"no",officialLanguageNameEn:"Norwegian",officialLanguageNameLocal:"Norsk",countryCallingCode:"4779",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Slovakia",countryNameLocal:"Slovensko",countryCode:"SK",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"I DPH",tinName:"Identifikan slo pre da z pridanej hodnoty",officialLanguageCode:"sk",officialLanguageNameEn:"Slovak",officialLanguageNameLocal:"Slovenina, Slovensk Jazyk",countryCallingCode:"421",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Sierra Leone",countryNameLocal:"Sierra Leone",countryCode:"SL",currencyCode:"SLL",currencyNameEn:"Sierra Leonean leone",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"232",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Republic of San Marino",countryNameLocal:"Repubblica di San Marino",countryCode:"SM",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"C.O.E.",tinName:"Codice operatore economico",officialLanguageCode:"it",officialLanguageNameEn:"Italian",officialLanguageNameLocal:"Italiano",countryCallingCode:"378",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Senegal",countryNameLocal:"Sngal",countryCode:"SN",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"221",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Somalia",countryNameLocal:"Somalia, ",countryCode:"SO",currencyCode:"SOS",currencyNameEn:"Somali shilling",tinType:"",tinName:"",officialLanguageCode:"so",officialLanguageNameEn:"Somali",officialLanguageNameLocal:"Soomaaliga, af Soomaali",countryCallingCode:"252",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Suriname",countryNameLocal:"Suriname",countryCode:"SR",currencyCode:"SRD",currencyNameEn:"Surinamese dollar",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"597",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"South Sudan",countryNameLocal:"South Sudan",countryCode:"SS",currencyCode:"SSP",currencyNameEn:"South Sudanese pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"211",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Sao Tome and Principe",countryNameLocal:"So Tom e Prncipe",countryCode:"ST",currencyCode:"STN",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"239",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"El Salvador",countryNameLocal:"El Salvador",countryCode:"SV",currencyCode:"SVC",currencyNameEn:"Salvadoran coln",tinType:"NIT",tinName:"Nmero de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"503",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Sint Maarten (Dutch part)",countryNameLocal:"Sint Maarten",countryCode:"SX",currencyCode:"ANG",currencyNameEn:"Netherlands Antillean guilder",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"1721",areaCodes:[],region:"Unknown",flag:""},{countryNameEn:"Syrian Arab Republic",countryNameLocal:", Sriyya",countryCode:"SY",currencyCode:"SYP",currencyNameEn:"Syrian pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"963",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Chad",countryNameLocal:"Tchad, ",countryCode:"TD",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"235",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Togo",countryNameLocal:"Togo",countryCode:"TG",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"228",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Thailand",countryNameLocal:"",countryCode:"TH",currencyCode:"THB",currencyNameEn:"Thai baht",tinType:"",tinName:"",officialLanguageCode:"th",officialLanguageNameEn:"Thai",officialLanguageNameLocal:"",countryCallingCode:"66",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Tajikistan",countryNameLocal:",",countryCode:"TJ",currencyCode:"TJS",currencyNameEn:"Tajikistani somoni",tinType:"",tinName:"",officialLanguageCode:"tg",officialLanguageNameEn:"Tajik",officialLanguageNameLocal:", toik, ",countryCallingCode:"992",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Tokelau",countryNameLocal:"Tokelau",countryCode:"TK",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"tkl",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"690",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Timor-Leste",countryNameLocal:"Timor-Leste, Timor Lorosa'e",countryCode:"TL",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"670",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Turkmenistan",countryNameLocal:"Trkmenistan",countryCode:"TM",currencyCode:"TMT",currencyNameEn:"Turkmenistan manat",tinType:"",tinName:"",officialLanguageCode:"tk",officialLanguageNameEn:"Turkmen",officialLanguageNameLocal:"Trkmen, ",countryCallingCode:"993",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Tunisia",countryNameLocal:", Tunisie",countryCode:"TN",currencyCode:"TND",currencyNameEn:"Tunisian dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"216",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Tonga",countryNameLocal:"Tonga",countryCode:"TO",currencyCode:"TOP",currencyNameEn:"Tongan paanga",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"676",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Turkey",countryNameLocal:"Trkiye",countryCode:"TR",currencyCode:"TRY",currencyNameEn:"Turkish lira",tinType:"KDV",tinName:"Vergi Kimlik Numaras",officialLanguageCode:"tr",officialLanguageNameEn:"Turkish",officialLanguageNameLocal:"Trke",countryCallingCode:"90",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Trinidad and Tobago",countryNameLocal:"Trinidad and Tobago",countryCode:"TT",currencyCode:"TTD",currencyNameEn:"Trinidad and Tobago dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"868",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Tuvalu",countryNameLocal:"Tuvalu",countryCode:"TV",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"688",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"United Republic of Tanzania",countryNameLocal:"Tanzania",countryCode:"TZ",currencyCode:"TZS",currencyNameEn:"Tanzanian shilling",tinType:"",tinName:"",officialLanguageCode:"sw",officialLanguageNameEn:"Swahili",officialLanguageNameLocal:"Kiswahili",countryCallingCode:"255",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Ukraine",countryNameLocal:"",countryCode:"UA",currencyCode:"UAH",currencyNameEn:"Ukrainian hryvnia",tinType:"",tinName:"   ",officialLanguageCode:"uk",officialLanguageNameEn:"Ukrainian",officialLanguageNameLocal:"",countryCallingCode:"380",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Uganda",countryNameLocal:"Uganda",countryCode:"UG",currencyCode:"UGX",currencyNameEn:"Ugandan shilling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"256",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"United States of America",countryNameLocal:"United States of America",countryCode:"US",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"EIN",tinName:"Tax Identification Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:[],region:"North America",flag:""},{countryNameEn:"Uruguay",countryNameLocal:"Uruguay",countryCode:"UY",currencyCode:"UYU",currencyNameEn:"Uruguayan peso",tinType:"RUT",tinName:"Registro nico Tributario",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"598",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Uzbekistan",countryNameLocal:"",countryCode:"UZ",currencyCode:"UZS",currencyNameEn:"Uzbekistan som",tinType:"",tinName:"   ",officialLanguageCode:"uz",officialLanguageNameEn:"Uzbek",officialLanguageNameLocal:"Ozbek, , ",countryCallingCode:"998",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Saint Vincent and the Grenadines",countryNameLocal:"Saint Vincent and the Grenadines",countryCode:"VC",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1784",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Venezuela (Bolivarian Republic of)",countryNameLocal:"Venezuela",countryCode:"VE",currencyCode:"VES",currencyNameEn:"",tinType:"RIF",tinName:"Registro de Informacion Fiscal",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"58",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Virgin Islands (British)",countryNameLocal:"British Virgin Islands",countryCode:"VG",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1284",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Virgin Islands (U.S.)",countryNameLocal:"United States Virgin Islands",countryCode:"VI",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1340",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Vietnam",countryNameLocal:"Vit Nam",countryCode:"VN",currencyCode:"VND",currencyNameEn:"Vietnamese ng",tinType:"",tinName:"",officialLanguageCode:"vi",officialLanguageNameEn:"Vietnamese",officialLanguageNameLocal:"Ting Vit",countryCallingCode:"84",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Vanuatu",countryNameLocal:"Vanuatu",countryCode:"VU",currencyCode:"VUV",currencyNameEn:"Vanuatu vatu",tinType:"",tinName:"",officialLanguageCode:"bi",officialLanguageNameEn:"Bislama",officialLanguageNameLocal:"Bislama",countryCallingCode:"678",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Wallis and Futuna",countryNameLocal:"Wallis-et-Futuna",countryCode:"WF",currencyCode:"XPF",currencyNameEn:"CFP franc (franc Pacifique)",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"681",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Samoa",countryNameLocal:"Samoa",countryCode:"WS",currencyCode:"WST",currencyNameEn:"Samoan tala",tinType:"",tinName:"",officialLanguageCode:"sm",officialLanguageNameEn:"Samoan",officialLanguageNameLocal:"gagana fa'a Samoa",countryCallingCode:"685",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Yemen",countryNameLocal:"",countryCode:"YE",currencyCode:"YER",currencyNameEn:"Yemeni rial",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"967",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Mayotte",countryNameLocal:"Mayotte",countryCode:"YT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"262",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"South Africa",countryNameLocal:"South Africa",countryCode:"ZA",currencyCode:"ZAR",currencyNameEn:"South African rand",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"27",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Zambia",countryNameLocal:"Zambia",countryCode:"ZM",currencyCode:"ZMW",currencyNameEn:"Zambian kwacha",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"260",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Zimbabwe",countryNameLocal:"Zimbabwe",countryCode:"ZW",currencyCode:"ZWL",currencyNameEn:"Zimbabwean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"263",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Eswatini",countryNameLocal:"Swaziland",countryCode:"SZ",currencyCode:"SZL",currencyNameEn:"Swazi lilangeni",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"268",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"North Macedonia",countryNameLocal:"",countryCode:"MK",currencyCode:"MKD",currencyNameEn:"Macedonian denar",tinType:"",tinName:"",officialLanguageCode:"mk",officialLanguageNameEn:"Macedonian",officialLanguageNameLocal:" ",countryCallingCode:"389",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Philippines",countryNameLocal:"Philippines",countryCode:"PH",currencyCode:"PHP",currencyNameEn:"Philippine peso",tinType:"TIN",tinName:"Tax Identification Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"63",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Netherlands",countryNameLocal:"Nederland",countryCode:"NL",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"Btw-nr.",tinName:"Btw-nummer",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"31",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"United Arab Emirates",countryNameLocal:"   ",countryCode:"AE",currencyCode:"AED",currencyNameEn:"United Arab Emirates dirham",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"971",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Republic of Moldova",countryNameLocal:"Moldova, ",countryCode:"MD",currencyCode:"MDL",currencyNameEn:"Moldovan leu",tinType:"",tinName:"",officialLanguageCode:"ro",officialLanguageNameEn:"Romanian, Moldavian, Moldovan",officialLanguageNameLocal:"Romn",countryCallingCode:"373",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Gambia",countryNameLocal:"The Gambia",countryCode:"GM",currencyCode:"GMD",currencyNameEn:"Gambian dalasi",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"220",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Dominican Republic",countryNameLocal:"Repblica Dominicana",countryCode:"DO",currencyCode:"DOP",currencyNameEn:"Dominican peso",tinType:"RNC",tinName:"Registro Nacional del Contribuyente",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"1",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Sudan",countryNameLocal:"",countryCode:"SD",currencyCode:"SDG",currencyNameEn:"Sudanese pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"249",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Lao People's Democratic Republic",countryNameLocal:"",countryCode:"LA",currencyCode:"LAK",currencyNameEn:"Lao kip",tinType:"",tinName:"",officialLanguageCode:"lo",officialLanguageNameEn:"Lao",officialLanguageNameLocal:"",countryCallingCode:"856",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Taiwan, Province of China",countryNameLocal:"Taiwan",countryCode:"TW",currencyCode:"TWD",currencyNameEn:"New Taiwan dollar",tinType:"",tinName:"",officialLanguageCode:"zh-hant",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"886",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Republic of the Congo",countryNameLocal:"Rpublique du Congo",countryCode:"CG",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"242",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Czechia",countryNameLocal:"esk republika",countryCode:"CZ",currencyCode:"CZK",currencyNameEn:"Czech koruna",tinType:"DI",tinName:"Daov identifikan slo",officialLanguageCode:"cs",officialLanguageNameEn:"Czech",officialLanguageNameLocal:"etina",countryCallingCode:"420",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"United Kingdom",countryNameLocal:"Great Britain",countryCode:"GB",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"VAT Reg No",tinName:"Value added tax registration number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Niger",countryNameLocal:"Niger",countryCode:"NE",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"227",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Democratic Republic of the Congo",countryNameLocal:"Democratic Republic of the Congo",countryCode:"CD",currencyCode:"CDF",currencyNameEn:"Congolese franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"243",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Commonwealth of The Bahamas",countryNameLocal:"Commonwealth of The Bahamas",countryCode:"BS",currencyCode:"BSD",currencyNameEn:"Bahamian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 242",areaCodes:[],region:"Caribbean",flag:""},{countryNameEn:"Cocos (Keeling) Islands",countryNameLocal:"Pulu Kokos (Keeling)",countryCode:"CC",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"61 891",areaCodes:[],region:"Australia",flag:""},{countryNameEn:"Central African Republic",countryNameLocal:"Rpublique centrafricaine",countryCode:"CF",currencyCode:"XAF",currencyNameEn:"Central African CFA",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"236",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Cook Islands",countryNameLocal:"Kki 'irani",countryCode:"CK",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"682",areaCodes:[],region:"South Pacific Ocean",flag:""},{countryNameEn:"Falkland Islands",countryNameLocal:"Falkland Islands",countryCode:"FK",currencyCode:"FKP",currencyNameEn:"Falklands pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"500",areaCodes:[],region:"South Atlantic Ocean",flag:""},{countryNameEn:"Faroe Islands",countryNameLocal:"Frerne",countryCode:"FO",currencyCode:"DKK",currencyNameEn:"Faroese krna",tinType:"",tinName:"",officialLanguageCode:"da",officialLanguageNameEn:"Danish",officialLanguageNameLocal:"dansk",countryCallingCode:"298",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Territory of Heard Island and McDonald Islands",countryNameLocal:"Territory of Heard Island and McDonald Islands",countryCode:"HM",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"672",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"British Indian Ocean Territory",countryNameLocal:"British Indian Ocean Territory",countryCode:"IO",currencyCode:"USD",currencyNameEn:"United States Dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"246",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"Comoros",countryNameLocal:"Umoja wa Komori",countryCode:"KM",currencyCode:"KMF",currencyNameEn:"Comorian franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"269",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"Cayman Islands",countryNameLocal:"Cayman Islands",countryCode:"KY",currencyCode:"KYD",currencyNameEn:"Cayman Islands dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 345",areaCodes:[],region:"Caribbean Sea",flag:""},{countryNameEn:"Republic of the Marshall Islands",countryNameLocal:"Aolepn Aorkin aje",countryCode:"MH",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"692",areaCodes:[],region:"Pacific Ocean",flag:""},{countryNameEn:"Commonwealth of the Northern Mariana Islands",countryNameLocal:"Sankattan Siha Na Islas Marinas",countryCode:"MP",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 670",areaCodes:[],region:"Pacific Ocean",flag:""},{countryNameEn:"Turks and Caicos Islands",countryNameLocal:"Turks and Caicos Islands",countryCode:"TC",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 649",areaCodes:[],region:"Atlantic Ocean",flag:""},{countryNameEn:"French Southern and Antarctic Lands",countryNameLocal:"Terres australes et antarctiques franaises",countryCode:"TF",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"672",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"United States Minor Outlying Islands",countryNameLocal:"United States Minor Outlying Islands",countryCode:"UM",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:[],region:"Pacific Ocean",flag:""},{countryNameEn:"Holy See",countryNameLocal:"Sancta Sedes",countryCode:"VA",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"la",officialLanguageNameEn:"Latin",officialLanguageNameLocal:"lingua latna",countryCallingCode:"39",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Republic of Kosovo",countryNameLocal:"Republika e Kosovs",countryCode:"XK",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"sq",officialLanguageNameEn:"Albanian",officialLanguageNameLocal:"Shqip",countryCallingCode:"383",region:"Europe",flag:""},{countryNameEn:"Netherlands Antilles",countryNameLocal:"Nederlandse Antillen",countryCode:"AN",currencyCode:"ANG",currencyNameEn:"Netherlands Antillean guilder",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"599",region:"Europe",flag:""}];return ay.default=e,ay}var QM;function foe(){if(QM)return hs;QM=1;var e=hs&&hs.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(hs,"__esModule",{value:!0}),hs.customList=hs.customArray=hs.findOne=hs.filter=hs.all=hs.utils=void 0;const t=e(doe()),n=e(uoe()),s=e(moe());hs.utils={groupBy:t.default};function r(){return s.default}hs.all=r;function i(d,u){return s.default.filter(f=>f[d]===u)}hs.filter=i;function l(d,u){return s.default.find(f=>f[d]===u)}hs.findOne=l;function o(d={name:"{countryNameEn} ({countryCode})",value:"{countryCode}"},{sortBy:u,sortDataBy:f,filter:p}={}){const x=[];let v=s.default;if(typeof p=="function"&&(v=v.filter(p)),f){const w=new Intl.Collator([],{sensitivity:"accent"});v.sort((b,C)=>w.compare(b[f],C[f]))}if(v.forEach(w=>{const b={};for(const C in d)b[C]=(0,n.default)(d[C],w);x.push(b)}),u&&d[u]){const w=new Intl.Collator([],{sensitivity:"accent"});x.sort((b,C)=>w.compare(b[u],C[u]))}return x}hs.customArray=o;function c(d="countryCode",u="{countryNameEn} ({countryCode})",{filter:f}={}){const p={};let x=s.default;return typeof f=="function"&&(x=x.filter(f)),x.forEach(v=>{const w=(0,n.default)(u,v);p[String(v[d])]=w}),p}return hs.customList=c,hs}var Lf=foe();const YA=(...e)=>e.flat().filter(Boolean).join(" "),hoe=Lf.all(),dH=hoe.map(e=>({code:`+${e.countryCallingCode}`,name:e.countryCode})),KA=[{id:1,title:"Your Account",subtitle:"Personal & Login Details"},{id:2,title:"Company Setup",subtitle:"Business Information"}],goe=()=>{const e=vt();return a.jsxs("button",{onClick:()=>e("/"),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 transition cursor-pointer",children:[a.jsx(ju,{className:"size-4 mr-1"})," Back to Home"]})},poe=h.memo(({label:e,id:t,placeholder:n,type:s="text",value:r,onChange:i,isVisible:l,onTogglePass:o,error:c,isSelect:d,options:u})=>{const f=t.toLowerCase().includes("password"),p=f?l?"text":"password":s,x=YA("w-full bg-gray-50 border px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:outline-none cursor-pointer",f?"pr-10":"",c?"border-red-500 focus:border-red-500 focus:ring-2 focus:ring-red-500/50":"border-gray-200 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50");return a.jsxs("div",{className:"flex flex-col space-y-2",children:[a.jsx("label",{htmlFor:t,className:"text-sm font-medium text-gray-700 cursor-pointer",children:e}),a.jsxs("div",{className:"relative",children:[d?a.jsx("select",{id:t,value:r,onChange:i,required:!0,className:x,children:u.map(v=>a.jsx("option",{value:v,children:v},v))}):a.jsx("input",{id:t,type:p,placeholder:n,value:r,onChange:i,required:!0,className:x}),f&&a.jsx("button",{type:"button",onClick:()=>o(t),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":l?"Hide password":"Show password",children:l?a.jsx(su,{className:"size-5"}):a.jsx(ru,{className:"size-5"})})]}),c&&a.jsx("p",{className:"mt-1 text-sm text-red-600 font-semibold",children:c})]})}),Dd=poe,xoe=h.memo(({currentStep:e,totalSteps:t})=>a.jsx("div",{className:"flex justify-between items-center mb-10 w-full max-w-xs mx-auto",children:KA.map(n=>a.jsxs(h.Fragment,{children:[a.jsxs("div",{className:"flex flex-col items-center cursor-pointer",children:[a.jsx("div",{className:YA("size-10 flex items-center justify-center rounded-full font-bold transition-all duration-300",n.id===e?"bg-amber-500 text-white shadow-lg":n.id<e?"bg-green-500 text-white":"bg-gray-100 text-gray-500 border-2 border-gray-300"),children:n.id<e?a.jsx(XT,{className:"size-5"}):n.id}),a.jsx("span",{className:YA("mt-2 text-xs font-medium hidden sm:block",n.id===e?"text-amber-600":"text-gray-500"),children:n.title})]}),n.id<t&&a.jsx("div",{className:"flex-1 h-0.5 mx-1 transition-colors duration-300 bg-gray-300"})]},n.id))})),yoe=h.memo(({formData:e,handleChange:t,handleCodeChange:n,handleTogglePass:s,isPassVisible:r,formError:i,signupError:l,termsAccepted:o,handleTerms:c,isButtonDisabled:d,handleSubmit:u,handleGoogleLogin:f})=>a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center my-6",children:[a.jsx("div",{className:"flex-grow border-t border-gray-300"}),a.jsx("span",{className:"flex-shrink mx-4 text-sm text-gray-500",children:"OR"}),a.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"md:flex md:space-x-4 space-y-6 md:space-y-0",children:[a.jsx("div",{className:"md:w-1/2",children:a.jsx(Dd,{label:"First Name",id:"first_name",placeholder:"John",value:e.first_name,onChange:t})}),a.jsx("div",{className:"md:w-1/2",children:a.jsx(Dd,{label:"Last Name",id:"last_name",placeholder:"Doe",value:e.last_name,onChange:t})})]}),a.jsxs("div",{className:"flex flex-col space-y-2",children:[a.jsx("label",{htmlFor:"phoneNumber",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Contact Number"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("select",{id:"countryCode",value:e.countryCode,onChange:n,className:"flex-shrink-0 bg-gray-50 border border-gray-200 px-3 py-2.5 rounded-lg text-gray-800 transition shadow-inner focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer",children:dH.map(p=>a.jsxs("option",{value:p.code,children:[p.name," ",p.code]},p.code))}),a.jsx("input",{id:"phone_number",type:"tel",placeholder:"0000000000",maxLength:10,value:e.phone_number,onChange:t,className:"w-full bg-gray-50 border border-gray-200 px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"})]})]}),a.jsx(Dd,{label:"Email Address",id:"email",type:"email",placeholder:"you@company.com",value:e.email,onChange:t}),a.jsx(Dd,{label:"Password",id:"password",placeholder:"Min 8 characters",value:e.password,onChange:t,isVisible:r.password,onTogglePass:s}),a.jsx(Dd,{label:"Confirm Password",id:"confirmPassword",placeholder:"Confirm your password",value:e.confirmPassword,onChange:t,isVisible:r.confirmPassword,onTogglePass:s,error:i}),l&&a.jsx("div",{className:"bg-red-100 border border-red-300 py-2 px-3 text-red-600",children:l}),a.jsxs("div",{className:"flex items-start pt-2",children:[a.jsx("input",{id:"terms",type:"checkbox",checked:o,onChange:c,className:"size-4 mt-1 rounded text-amber-500 border-gray-300 focus:ring-amber-500 cursor-pointer"}),a.jsxs("label",{htmlFor:"terms",className:"ml-3 text-sm font-medium text-gray-700 cursor-pointer",children:["I accept the ",a.jsx("a",{href:"#",className:"text-amber-600 hover:text-amber-700 font-semibold",children:"Terms"})," and ",a.jsx("a",{href:"#",className:"text-amber-600 hover:text-amber-700 font-semibold",children:"Policy"}),"."]})]})]}),a.jsx("button",{type:"submit",onClick:u,disabled:d,className:"w-full mt-8 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all duration-300 bg-secondary hover:bg-tertiary shadow-lg shadow-tertiary disabled:shadow-none focus-visible:outline-none cursor-pointer",children:"Continue to Company Details"})]})),boe=h.memo(({companyData:e,handleCodeChange1:t,handleSubmit:n,handleCompanyChange:s,formError:r,isSubmitted:i,isButtonDisabled:l,setStep:o,setIsSubmitted:c,setFormError:d})=>a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"space-y-6",children:[a.jsx(Dd,{label:"Company Name",id:"company_name",placeholder:"Acme Corp",value:e.company_name,onChange:s}),a.jsxs("div",{className:"flex flex-col space-y-2",children:[a.jsx("label",{htmlFor:"phoneNumber",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Company Number"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("select",{id:"countryCode",value:e.countryCode,onChange:t,className:"flex-shrink-0 bg-gray-50 border border-gray-200 px-3 py-2.5 rounded-lg text-gray-800 transition shadow-inner focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer",children:dH.map(u=>a.jsxs("option",{value:u.code,children:[u.name," ",u.code]},u.code))}),a.jsx("input",{id:"company_number",type:"tel",placeholder:"0000000000",maxLength:10,value:e.company_number,onChange:s,className:"w-full bg-gray-50 border border-gray-200 px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"})]})]}),a.jsx(Dd,{label:"Company Website",id:"company_website",type:"url",placeholder:"https://www.acme.com",value:e.company_website,onChange:s})]}),r&&a.jsx("div",{className:"p-3 text-sm rounded-lg bg-red-100 text-red-700 border border-red-300 font-medium my-6",children:r}),i&&a.jsx("div",{className:"p-3 text-sm rounded-lg bg-green-100 text-green-700 border border-green-300 font-medium my-6",children:"Account and Company Setup simulated successfully! Welcome aboard."}),a.jsxs("div",{className:"flex space-x-4 mt-8",children:[a.jsxs("button",{type:"button",onClick:()=>{o(1),c(!1),d(null)},className:"flex-1 inline-flex items-center justify-center rounded-lg h-12 px-6 text-gray-700 font-bold tracking-wide border border-gray-300 bg-white hover:bg-tertiary hover:text-white transition-colors focus-visible:ring-2 focus-visible:ring-gray-300 focus-visible:outline-none cursor-pointer",children:[a.jsx(rse,{className:"size-4 mr-2"})," Back"]}),a.jsx("button",{onClick:n,type:"submit",disabled:l,className:"flex-1 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all duration-300 bg-tertiary hover:bg-accent hover:text-secondary shadow-xl shadow-amber-500/30 disabled:shadow-none focus-visible:ring-2 focus-visible:ring-amber-500/50 focus-visible:outline-none cursor-pointer",children:"Create Account"})]})]})),voe=()=>{const e=["first_name","email","password"],t=["company_name","company_number","company_website"],[n,s]=h.useState(1),[r,i]=h.useState({first_name:"",last_name:"",countryCode:"+63",phone_number:"",email:"",password:"",confirmPassword:"",role:"CEO"}),[l,o]=h.useState({company_name:"",company_number:"",company_website:"",countryCode:"+63"}),[c,d]=h.useState({}),[u,f]=h.useState(!1),[p,x]=h.useState(null),[v,w]=h.useState(!1),{login:b}=zs(),[C,N]=h.useState({plan_name:"Free",price:0}),[S,A]=h.useState(!1),[k,_]=h.useState(null);h.useEffect(()=>{document.title="Sign Up | Sari-Sari CRM"},[]),h.useEffect(()=>{const V=()=>{window.google&&window.google.accounts?(window.google.accounts.id.initialize({client_id:"222789237297-r8mebl46fdacgpsnlnjca4eu0crn8hf6.apps.googleusercontent.com",callback:T}),window.google.accounts.id.renderButton(document.getElementById("googleSignupBtn"),{theme:"outline",size:"large",text:"signup_with"})):console.error("Google API not loaded properly.")};if(window.google&&window.google.accounts){V();return}const de=document.createElement("script");de.src="https://accounts.google.com/gsi/client",de.async=!0,de.defer=!0,de.onload=V,document.body.appendChild(de)},[]);const T=async V=>{A(!0);try{const de=CB(V.credential);console.log("Google user:",de);try{await ie.post("/auth/email-check",{email:de.email})}catch(oe){const Z=oe.response?.data?.detail||"An error occurred.";_(Z),A(!1);return}i(oe=>({...oe,email:de.email,first_name:de.given_name||"",last_name:de.family_name||"",password:"",profilePicture:de.picture||"",googleId:de.sub,auth_provider:"google",id_token:V.credential})),s(2)}catch(de){console.error("Google signup error:",de),x("Failed to process Google account. Please try again.")}finally{_(null),x(null),A(!1)}},E=h.useCallback(V=>{const{id:de,value:oe}=V.target;w(!1),i(Z=>{const R={...Z,[de]:oe};if(n===1&&(de==="password"||de==="confirmPassword")){const{password:ve,confirmPassword:X}=R,je=ve.length>0&&X.length>0&&ve!==X?"Password doesn't match. Please try again.":null;x(Ne=>Ne!==je?je:Ne)}return R})},[n]),I=h.useCallback(V=>{const{id:de,value:oe}=V.target;w(!1),o(Z=>({...Z,[de]:oe}))},[]),z=h.useCallback(V=>i(de=>({...de,countryCode:V.target.value})),[]),$=h.useCallback(V=>o(de=>({...de,countryCode:V.target.value})),[]),P=h.useCallback(V=>d(de=>({...de,[V]:!de[V]})),[]),O=h.useCallback(V=>f(V.target.checked),[]),B=async V=>{if(V.preventDefault(),w(!1),x(null),A(!0),n===1){if(!e.every(oe=>r[oe].trim()!=="")||!u){x("Please fill in all required fields and accept the terms.");return}if(r.password!==r.confirmPassword){x("The passwords you entered do not match. Please try again.");return}if(r.auth_provider==="google"){s(2);return}try{(await ie.post("/auth/email-check",{email:r.email})).data.detail==="No existing email"&&(x(null),s(2))}catch(oe){oe.response&&oe.response.data&&oe.response.data.detail?x(oe.response.data.detail):x("Something went wrong. Please try again.")}finally{A(!1)}}else if(n===2){if(!t.every(oe=>(l[oe]||"").trim()!=="")){x("Please fill in all required company details.");return}try{const{confirmPassword:oe,...Z}=r,R={...l,company_number:`${l.countryCode} ${l.company_number}`},X=(await ie.post("/company/create",R)).data.id,je={...Z,company_id:X,phone_number:`${Z.countryCode} ${Z.phone_number}`};if(console.log(" Sending payload:",je),Z.auth_provider==="google"){const Ne=await ie.post("/auth/google/signup",je),Oe={...C,company_id:X,status:"Active"},Fe=await ie.post("/subscription/subscribe",Oe);x(null),w(!0),b(Ne.data)}else{const Ne=await ie.post("/auth/signup",je),Oe={...C,company_id:X,status:"Active"},Fe=await ie.post("/subscription/subscribe",Oe);x(null),w(!0),b(Ne.data)}}catch(oe){if(oe.response?.data?.detail){const Z=oe.response.data.detail;if(Array.isArray(Z)){const R=Z.map(ve=>ve.msg).join(", ");x(R)}else x(typeof Z=="object"?Z.msg||JSON.stringify(Z):Z)}else x("Something went wrong. Please try again.")}finally{A(!1)}}},Q=h.useCallback(()=>{try{window.google.accounts.id.initialize({client_id:"222789237297-r8mebl46fdacgpsnlnjca4eu0crn8hf6.apps.googleusercontent.com",callback:V=>{const{credential:de}=V;i(oe=>({...oe,first_name:de.given_name||"",last_name:de.family_name||"",email:de.email||"",profile_picture:de.picture||"",auth_provider:"google",id_token:de})),s(2)}}),window.google.accounts.id.prompt()}catch(V){console.error("Google login error:",V),x("Google login failed. Please try again.")}},[i,x,s]),F=h.useMemo(()=>{if(n===1){const V=e.every(de=>(r[de]||"").trim()!=="");return!u||!!p||!V}return n===2?!t.every(de=>(l[de]||"").trim()!==""):!0},[n,u,p,r,e,t]),ee=KA.find(V=>V.id===n);return a.jsxs("div",{className:"min-h-screen w-full bg-gray-100 font-sans text-gray-800 flex flex-col items-center",children:[a.jsx("div",{className:"w-full py-6 px-4 sm:px-12 lg:px-20 max-w-7xl",children:a.jsxs("div",{className:"flex items-center text-gray-800",children:[a.jsx(Kt,{className:"size-6 text-amber-500 mr-2"}),a.jsx("span",{className:"text-xl font-extrabold tracking-wider",children:"CRM"})]})}),S&&a.jsx(cH,{isLoading:S}),a.jsx("div",{className:"w-full max-w-lg px-4 pt-6",children:a.jsx(goe,{})}),a.jsx("main",{className:"w-full max-w-lg font-inter mx-auto px-4 pt-3 pb-12",children:a.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-xl p-6 md:p-10",children:[a.jsxs("header",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:ee.title}),a.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:ee.subtitle})]}),a.jsx(xoe,{currentStep:n,totalSteps:KA.length}),n===1&&a.jsx("div",{id:"googleSignupBtn"}),a.jsxs("form",{className:"mt-8",children:[n===1&&a.jsx(yoe,{formData:r,handleChange:E,handleCodeChange:z,handleTogglePass:P,isPassVisible:c,formError:p,signupError:k,termsAccepted:u,handleTerms:O,isButtonDisabled:F,handleSubmit:B,handleGoogleLogin:Q}),n===2&&a.jsx(boe,{handleSubmit:B,companyData:l,handleCompanyChange:I,formError:p,isSubmitted:v,isButtonDisabled:F,setStep:s,setIsSubmitted:w,setFormError:x,handleCodeChange1:$}),n===1&&a.jsx("div",{className:"text-center mt-6",children:a.jsxs("p",{className:"text-sm text-gray-700",children:["Already have an account?",a.jsx("a",{href:"/login",className:"font-bold text-amber-600 hover:text-amber-700 ml-1 cursor-pointer",children:"Log in"})]})})]})]})})]})},woe=()=>{const e=vt();return a.jsxs("button",{onClick:()=>e("/"),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 transition mb-3 cursor-pointer",children:[a.jsx(ju,{className:"size-4 mr-1"})," Back to Home"]})},XM=({label:e,id:t,placeholder:n,type:s="text",value:r,onChange:i,isPassVisible:l,onTogglePass:o})=>{const c=t.toLowerCase().includes("password"),d=c?l?"text":"password":s;return a.jsxs("div",{className:"flex flex-col space-y-2",children:[a.jsx("label",{htmlFor:t,className:"text-sm font-medium text-gray-700",children:e}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:t,type:d,placeholder:n,value:r,onChange:i,required:!0,className:"w-full bg-gray-50 border border-gray-200 px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"}),c&&a.jsx("button",{type:"button",onClick:o,className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":l?"Hide password":"Show password",children:l?a.jsx(su,{className:"size-5"}):a.jsx(ru,{className:"size-5"})})]})]})},Noe=()=>{const[e,t]=h.useState({email:"",password:""}),[n,s]=h.useState(!1),[r,i]=h.useState(null),[l,o]=h.useState(!1),{isLoggedIn:c,login:d,userRole:u}=zs(),f=vt();h.useEffect(()=>{document.title="Login | Sari-Sari CRM"},[]),h.useEffect(()=>{c&&(u==="CEO"||u==="Admin"?f("/admin"):u==="Group Manager"?f("/group-manager"):u==="Manager"?f("/manager"):u==="Marketing"?f("/marketing"):u==="Sales"&&f("/sales"))},[c,f,u]);const p=w=>{const{id:b,value:C}=w.target;t(N=>({...N,[b]:C}))},x=async w=>{w.preventDefault(),i(null);try{const b=await ie.post("/auth/login",e);d(b.data),i(null)}catch(b){b.response&&b.response.data&&b.response.data.detail?i(b.response.data.detail):i("Something went wrong. Please try again.")}};h.useEffect(()=>{const w=document.createElement("script");return w.src="https://accounts.google.com/gsi/client",w.async=!0,w.defer=!0,w.onload=()=>{window.google&&(window.google.accounts.id.initialize({client_id:"222789237297-r8mebl46fdacgpsnlnjca4eu0crn8hf6.apps.googleusercontent.com",callback:v}),window.google.accounts.id.renderButton(document.getElementById("googleLoginBtn"),{theme:"outline",size:"large",text:"signin_with"}))},document.body.appendChild(w),()=>{document.body.contains(w)&&document.body.removeChild(w)}},[]);const v=async w=>{o(!0);try{const b=CB(w.credential),C=await ie.post("/auth/google/login",{id_token:w.credential});d(C.data)}catch(b){console.error("Google login failed:",b);const C=b.response?.data?.detail||"Google login failed. Please try again.";i(C)}finally{o(!1)}};return a.jsxs("div",{className:"min-h-screen w-full bg-gray-100 font-sans text-gray-800 flex flex-col items-center",children:[a.jsx("div",{className:"w-full py-6 px-4 sm:px-12 lg:px-20 max-w-7xl",children:a.jsx("div",{className:"flex items-center text-gray-800",children:a.jsx("span",{className:"text-xl font-extrabold tracking-wider",children:"CRM"})})}),l&&a.jsx(cH,{isLoading:l}),a.jsxs("main",{className:"w-full max-w-lg font-inter mx-auto px-4 pt-6 pb-12",children:[a.jsx(woe,{}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-xl p-6 md:p-10",children:[a.jsxs("header",{className:"text-center mb-6",children:[a.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Login"}),a.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:"Sign in to access your dashboard."})]}),a.jsx("div",{id:"googleLoginBtn"}),a.jsxs("div",{className:"flex items-center my-6",children:[a.jsx("div",{className:"flex-grow border-t border-gray-300"}),a.jsx("span",{className:"flex-shrink mx-4 text-sm text-gray-500",children:"OR"}),a.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),a.jsxs("form",{onSubmit:x,className:"space-y-6 cursor-pointer",children:[a.jsx(XM,{label:"Email",id:"email",type:"email",placeholder:"you@example.com",value:e.email,onChange:p}),a.jsx(XM,{label:"Password",id:"password",type:"password",placeholder:"Enter your password",value:e.password,onChange:p,isPassVisible:n,onTogglePass:()=>s(w=>!w)}),r&&a.jsx("div",{className:"bg-red-100 border border-red-300 py-2 px-3 text-red-600",children:r}),a.jsx("button",{type:"submit",className:"w-full mt-2 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all disabled:opacity-50 bg-secondary text-gray-900 hover:bg-tertiary shadow-xl focus-visible:ring-2 focus-visible:ring-amber-500/50 cursor-pointer",children:"Log In"}),a.jsx("div",{className:"text-center mt-1",children:a.jsx("a",{href:"/forgot-password",className:"text-sm font-medium text-amber-600 hover:text-amber-700 cursor-pointer",children:"Forgot Password?"})})]}),a.jsx("div",{className:"text-center mt-6",children:a.jsxs("p",{className:"text-sm text-gray-700",children:["Don't have an account?",a.jsx("a",{href:"/signup",className:"font-bold text-amber-600 hover:text-amber-700 ml-1 cursor-pointer",children:"Sign Up"})]})})]})]})]})},joe=({onClick:e})=>a.jsxs("button",{onClick:e,className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 transition mb-3 cursor-pointer",children:[a.jsx(ju,{className:"size-4 mr-1"})," Back"]}),VC=({label:e,id:t,placeholder:n,type:s="text",value:r,onChange:i,icon:l})=>{const[o,c]=h.useState(!1),d=s==="password";return a.jsxs("div",{className:"flex flex-col space-y-2",children:[a.jsx("label",{htmlFor:t,className:"text-sm font-medium text-gray-700",children:e}),a.jsxs("div",{className:"relative flex items-center",children:[l&&a.jsx(l,{className:"absolute left-3 text-gray-500 size-5"}),a.jsx("input",{id:t,type:d&&o?"text":s,placeholder:n,value:r,onChange:i,required:!0,className:"w-full bg-gray-50 border border-gray-200 pl-10 pr-10 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"}),d&&a.jsx("button",{type:"button",onClick:()=>c(u=>!u),className:"absolute right-3 text-gray-500",children:o?a.jsx(su,{className:"size-5"}):a.jsx(ru,{className:"size-5"})})]})]})},Coe=({otp:e,setOtp:t})=>a.jsx("div",{className:"flex justify-between gap-2",children:[...Array(6)].map((n,s)=>a.jsx("input",{type:"text",maxLength:"1",className:"w-12 h-12 text-center text-lg font-bold border border-gray-300 rounded-lg focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50",value:e[s]||"",onChange:r=>{const i=r.target.value;if(/\d/.test(i)||i===""){const l=[...e];l[s]=i,t(l)}}},s))}),Soe=()=>{const e=vt(),[t,n]=h.useState(1),[s,r]=h.useState(""),[i,l]=h.useState(["","","","","",""]),[o,c]=h.useState(""),[d,u]=h.useState(""),f=w=>{w.preventDefault(),n(2)},p=w=>{w.preventDefault(),n(3)},x=w=>{if(w.preventDefault(),o!==d){alert("Passwords do not match!");return}alert("Password reset successfully!")},v=()=>{t>1?n(t-1):e("/login")};return a.jsxs("div",{className:"min-h-screen w-full bg-gray-100 font-sans text-gray-800 flex flex-col items-center",children:[a.jsx("div",{className:"w-full py-6 px-4 sm:px-12 lg:px-20 max-w-7xl",children:a.jsx("div",{className:"flex items-center text-gray-800",children:a.jsx("span",{className:"text-xl font-extrabold tracking-wider",children:"CRM"})})}),a.jsxs("main",{className:"w-full max-w-lg font-inter mx-auto px-4 pt-6 pb-12",children:[a.jsx(joe,{onClick:v}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-xl p-6 md:p-10",children:[t===1&&a.jsxs(a.Fragment,{children:[a.jsxs("header",{className:"text-center mb-6",children:[a.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Forgot Password"}),a.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:"Enter your email and we'll send you a verification code."})]}),a.jsxs("form",{onSubmit:f,className:"space-y-6 cursor-pointer",children:[a.jsx(VC,{label:"Email Address",id:"email",type:"email",placeholder:"you@example.com",value:s,onChange:w=>r(w.target.value),icon:Ka}),a.jsx("button",{className:"w-full mt-3 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all bg-secondary text-gray-900 hover:bg-tertiary shadow-xl",children:"Send OTP"})]})]}),t===2&&a.jsxs(a.Fragment,{children:[a.jsxs("header",{className:"text-center mb-6",children:[a.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Enter Verification Code"}),a.jsxs("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:["We've sent a 6-digit code to ",a.jsx("strong",{children:s}),"."]})]}),a.jsxs("form",{onSubmit:p,className:"space-y-6",children:[a.jsx(Coe,{otp:i,setOtp:l}),a.jsx("button",{className:"w-full mt-3 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all bg-secondary text-gray-900 hover:bg-tertiary shadow-xl",children:"Verify Code"})]})]}),t===3&&a.jsxs(a.Fragment,{children:[a.jsxs("header",{className:"text-center mb-6",children:[a.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Reset Password"}),a.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:"Enter your new password below."})]}),a.jsxs("form",{onSubmit:x,className:"space-y-6",children:[a.jsx(VC,{label:"New Password",id:"password",type:"password",placeholder:"Enter new password",value:o,onChange:w=>c(w.target.value),icon:rl}),a.jsx(VC,{label:"Confirm Password",id:"confirm-password",type:"password",placeholder:"Confirm new password",value:d,onChange:w=>u(w.target.value),icon:rl}),a.jsx("button",{className:"w-full mt-3 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all bg-secondary text-gray-900 hover:bg-tertiary shadow-xl",children:"Reset Password"})]})]})]})]})]})},ta=()=>{const[e,t]=h.useState(null),[n,s]=h.useState(!1),[r,i]=h.useState(!0),l=vt(),o=async()=>{try{const d=await ie.get("/auth/me");t(d.data),s(!0)}catch(d){t(null),s(!1),console.warn("Unauthorized  possible expired token or not logged in.",d)}finally{i(!1)}};return h.useEffect(()=>{o()},[]),{user:e,isLoggedIn:n,loading:r,fetchUser:o,logout:async()=>{try{await ie.post("/auth/logout")}catch{}t(null),s(!1),l("/login")}}};function zt({message:e="Loading..."}){return a.jsx("div",{className:"absolute inset-0 bg-primary/90 flex items-center justify-center z-40 lg:flex hidden",children:a.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[a.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0ms",animationDuration:"0.6s"}}),a.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"150ms",animationDuration:"0.6s"}}),a.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"300ms",animationDuration:"0.6s"}})]})})}const _oe=(e,t)=>{const n=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${n}${s}`.toUpperCase()||"U"};function ny(){const{user:e,loading:t,fetchUser:n}=ta(),[s,r]=h.useState(!1),[i,l]=h.useState(!1),[o,c]=h.useState(!1),[d,u]=h.useState(!1),[f,p]=h.useState(!1),[x,v]=h.useState(!1),[w,b]=h.useState(!1),[C,N]=h.useState(!1),[S,A]=h.useState(null),[k,_]=h.useState(null),T=h.useRef(null),[E,I]=h.useState({firstName:"",lastName:"",email:"",phoneNumber:""}),[z,$]=h.useState({currentPassword:"",newPassword:"",confirmPassword:""});h.useEffect(()=>{e&&(I({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),_(e.profile_picture||null))},[e]),h.useEffect(()=>{document.title="Manage Account | Sari-Sari CRM"},[]);const P=(ee,V)=>{I(de=>({...de,[ee]:V}))},O=(ee,V)=>{$(de=>({...de,[ee]:V}))},B=ee=>{const V=ee.target.files?.[0];if(!V)return;if(!V.type.startsWith("image/")){H.error("Please select an image file");return}if(V.size>5*1024*1024){H.error("Image size should be less than 5MB");return}const de=new FileReader;de.onloadend=()=>{A(de.result),_(de.result)},de.readAsDataURL(V)},Q=async ee=>{if(ee.preventDefault(),!E.firstName.trim()||!E.lastName.trim()){H.warn("Please fill in all required fields.");return}l(!0);try{const V={first_name:E.firstName.trim(),last_name:E.lastName.trim(),phone_number:E.phoneNumber.trim()||null};S!==null&&(V.profile_picture=S),await ie.put("/users/me",V),await n(),c(!1),A(null),window.dispatchEvent(new CustomEvent("userProfileUpdated")),H.success("Account information updated successfully!")}catch(V){console.error("Error updating account:",V);const de=V.response?.data?.detail||"Failed to update account information. Please try again.";H.error(de)}finally{l(!1)}},F=async ee=>{if(ee.preventDefault(),!z.newPassword||!z.confirmPassword){H.warn("Please fill in all password fields.");return}if(z.newPassword.length<8){H.warn("Password must be at least 8 characters long.");return}if(z.newPassword!==z.confirmPassword){H.warn("New password and confirm password do not match.");return}N(!0);try{const V={password:z.newPassword};await ie.put("/users/me",V),await n(),$({currentPassword:"",newPassword:"",confirmPassword:""}),window.dispatchEvent(new CustomEvent("userProfileUpdated")),N(!1),H.success("Password changed successfully!")}catch(V){console.error("Error changing password:",V);const de=V.response?.data?.detail||"Failed to change password. Please try again.";H.error(de)}finally{N(!1)}};return a.jsxs("div",{className:"p-2 lg:p-8 font-inter relative",children:[(t||!e)&&a.jsx(zt,{}),e&&a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-gray-800 mb-2",children:"Manage Your Account"}),a.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Update your account information and change your password"})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mb-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:[a.jsx(Zt,{className:"text-blue-600"}),"Profile Information"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:!o&&a.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition text-sm",children:[a.jsx(rn,{}),"Edit Profile"]})})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 mb-6 pb-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex-shrink-0 relative group",children:[k?a.jsx("div",{className:"relative",children:a.jsx("img",{src:k,alt:`${e.first_name} ${e.last_name}`,className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full object-cover border-2 border-gray-200 shadow-sm"})}):a.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 text-white flex items-center justify-center text-2xl sm:text-3xl font-semibold border-2 border-gray-200 shadow-sm",children:_oe(e.first_name,e.last_name)}),o&&a.jsxs("div",{className:"absolute bottom-0 right-0",children:[a.jsx("input",{type:"file",ref:T,accept:"image/*",onChange:B,className:"hidden",id:"profile-picture-upload"}),a.jsx("label",{htmlFor:"profile-picture-upload",className:"cursor-pointer bg-gray-900 text-white p-1.5 rounded-full shadow-lg hover:bg-gray-800 transition flex items-center justify-center border-2 border-white",title:"Change profile picture",children:a.jsx(wB,{size:14})})]})]}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[e.first_name," ",e.last_name]}),a.jsx("p",{className:"text-gray-600 text-sm",children:e.email}),a.jsx("span",{className:"inline-block mt-2 px-3 py-1 bg-blue-100 text-blue-700 text-xs font-semibold rounded-md",children:e.role})]})]}),o?a.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["First Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Zt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",value:E.firstName,onChange:ee=>P("firstName",ee.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Last Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Zt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",value:E.lastName,onChange:ee=>P("lastName",ee.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),a.jsxs("div",{className:"sm:col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Email"}),a.jsxs("div",{className:"relative",children:[a.jsx(Ka,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"email",value:E.email,disabled:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-600 cursor-not-allowed outline-none",readOnly:!0})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),a.jsxs("div",{className:"sm:col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Phone Number"}),a.jsxs("div",{className:"relative",children:[a.jsx(Et,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"tel",value:E.phoneNumber,onChange:ee=>P("phoneNumber",ee.target.value),placeholder:"+1 (555) 123-4567",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t border-gray-200",children:[a.jsx("button",{type:"button",onClick:()=>{c(!1),I({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),A(null),_(e.profile_picture||null),T.current&&(T.current.value="")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition",disabled:i,children:"Cancel"}),a.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:i,children:[a.jsx(JT,{}),i?"Saving...":"Save Changes"]})]})]}):a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"First Name"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.first_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Name"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.last_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Email"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.email||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Phone Number"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.phone_number||"N/A"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[a.jsx(rl,{className:"text-blue-600"}),"Change Password"]}),a.jsxs("form",{onSubmit:F,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["New Password ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(rl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",style:x?void 0:{WebkitTextSecurity:"disc"},value:z.newPassword,onChange:ee=>O("newPassword",ee.target.value),placeholder:"Enter new password (min. 8 characters)",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),a.jsx("button",{type:"button",onClick:()=>v(ee=>!ee),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":x?"Hide password":"Show password",children:x?a.jsx(su,{className:"size-5"}):a.jsx(ru,{className:"size-5"})})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Confirm New Password ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(rl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",style:w?void 0:{WebkitTextSecurity:"disc"},value:z.confirmPassword,onChange:ee=>O("confirmPassword",ee.target.value),placeholder:"Confirm new password",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),a.jsx("button",{type:"button",onClick:()=>b(ee=>!ee),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":w?"Hide password":"Show password",children:w?a.jsx(su,{className:"size-5"}):a.jsx(ru,{className:"size-5"})})]})]}),a.jsx("div",{className:"pt-4 border-t border-gray-200 flex justify-center lg:justify-start",children:a.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:C,children:[a.jsx(rl,{}),C?"Changing Password...":"Change Password"]})})]})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mt-6",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[a.jsx(NB,{className:"text-blue-600"}),"Account Information"]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Role"}),a.jsx("span",{className:"inline-block px-3 py-1 bg-blue-100 text-blue-700 text-sm font-semibold rounded-md",children:e.role})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Status"}),a.jsx("span",{className:`inline-block px-3 py-1 text-sm font-semibold rounded-md ${e.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:e.is_active?"Active":"Inactive"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Company"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.company?.company_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Auth Provider"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.auth_provider?e.auth_provider.charAt(0).toUpperCase()+e.auth_provider.slice(1):"N/A"})]}),e.created_at&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Account Created"}),a.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),e.last_login&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Login"}),a.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.last_login).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})})]})]})]})]})]})}function Aoe({toggleSidebar:e}){const[t,n]=h.useState(!1),[s,r]=h.useState(!1),[i,l]=h.useState([]),[o,c]=h.useState(0),d=h.useRef(null),u=h.useRef(null),f=Yt(),p=vt(),{logout:x}=zs(),{user:v,fetchUser:w}=ta(),C={"/admin/dashboard":"Dashboard","/admin/accounts":"Accounts","/admin/contacts":"Contacts","/reports":"Reports","/leads":"Leads","/admin/Audit":"Audit","/admin/targets":"Targets","/admin/leads":"Leads","/admin/quotes":"Quotes","/admin/users":"Users","/admin/deals":"Deals"}[f.pathname]||"Admin Panel";return h.useEffect(()=>{const N=()=>{w()};return window.addEventListener("userProfileUpdated",N),()=>{window.removeEventListener("userProfileUpdated",N)}},[w]),h.useEffect(()=>{if(!v?.id)return;const N=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",S=window.location.protocol==="https:"?"wss:":"ws:",A=N?"localhost:8000":window.location.host,k=`${S}//${A}/ws/notifications?user_id=${v.id}`,_=new WebSocket(k);return _.onopen=()=>console.log("Admin WS Connected"),_.onmessage=T=>{const E=JSON.parse(T.data);l(I=>[E,...I]),c(I=>I+1)},_.onclose=()=>console.log("Admin WS Disconnected"),()=>_.close()},[v?.id]),h.useEffect(()=>{function N(S){d.current&&!d.current.contains(S.target)&&n(!1),u.current&&!u.current.contains(S.target)&&r(!1)}return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),a.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:a.jsx(Op,{className:"text-2xl"})}),a.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:C})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"relative",ref:u,children:[a.jsxs("button",{onClick:()=>r(!s),className:"relative text-gray-600 hover:text-gray-800 transition",children:[a.jsx(Pp,{className:"text-xl"}),o>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] w-4 h-4 flex items-center justify-center rounded-full font-semibold",children:o})]}),s&&a.jsxs("div",{className:"absolute right-0 mt-3 w-80 bg-white rounded-xl shadow-lg border z-50 overflow-hidden animate-fade-in",children:[a.jsxs("div",{className:"p-3 border-b bg-gray-50 flex justify-between items-center",children:[a.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:"Notifications"}),a.jsx("button",{onClick:()=>{l([]),c(0)},className:"text-xs text-blue-600 hover:underline",children:"Clear"})]}),a.jsx("div",{className:"max-h-60 overflow-y-auto",children:i.length>0?i.map((N,S)=>a.jsx("div",{className:"p-3 border-b text-sm hover:bg-gray-50 cursor-pointer",children:N.title||N.message||"New Update"},S)):a.jsx("div",{className:"p-4 text-center text-gray-500 text-xs",children:"No notifications"})})]})]}),a.jsxs("div",{className:"relative",ref:d,children:[a.jsxs("button",{onClick:()=>n(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[a.jsx("img",{src:v?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 aspect-square object-cover rounded-full"}),a.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[v?.first_name," ",v?.last_name]})]}),t&&a.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4",children:[a.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[a.jsx("img",{src:v?.profile_picture||"https://via.placeholder.com/80",alt:"Profile",className:"w-16 h-16 rounded-full object-cover"}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[v?.first_name," ",v?.middle_name," ",v?.last_name]}),a.jsx("p",{className:"text-[11px] text-gray-600 font-light w-full truncate",children:"Admin"})]})]}),a.jsxs("div",{className:"mt-6 space-y-1 px-4 text-left",children:[a.jsx("button",{onClick:()=>{p("/admin/users"),n(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Invite Your Team"}),a.jsx("button",{onClick:()=>{p("/admin/manage-account"),n(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Manage Your Account"}),a.jsx("div",{className:"border-t border-gray-200 my-2"}),a.jsx("button",{onClick:x,className:"block w-full text-sm text-red-600 hover:text-red-700 hover:bg-gray-50 py-2 rounded text-left",children:"Logout"})]})]})]})]})]})}function Eoe(){const[e,t]=h.useState(!1),[n,s]=h.useState(!1),[r,i]=h.useState(!1),[l,o]=h.useState(!1),c=Yt(),{user:d}=ta();h.useEffect(()=>{d&&console.log("Fetched user:",d)},[d]),h.useEffect(()=>{document.title="Admin Panel | Sari-Sari CRM"},[]);const f=["/admin/accounts","/admin/contacts","/admin/leads","/admin/deals","/admin/quotes","/admin/targets"].includes(c.pathname);h.useEffect(()=>{f&&t(!0)},[c.pathname]);const p="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",x="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition";return a.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[a.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${l?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[a.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[a.jsxs("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:[" Sari-Sari.CRM"," ",a.jsx("span",{className:"text-[12px] text-gray-700 font-medium align-bottom",children:"v2"})]}),d&&d.company&&a.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:d.company.company_name})]}),a.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[a.jsxs(Ot,{to:"/admin/dashboard",className:({isActive:v})=>v?p:x,children:[a.jsx(Dp,{className:"text-lg"}),a.jsx("span",{children:"Dashboard"})]}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>t(!e),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(Kt,{className:"text-lg"}),"Sales"]}),a.jsx(St,{className:`transition-transform ${e?"rotate-180":""}`})]}),e&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(Ot,{to:"/admin/accounts",className:({isActive:v})=>v?p:x,children:[a.jsx(La,{})," Accounts"]}),a.jsxs(Ot,{to:"/admin/contacts",className:({isActive:v})=>v?p:x,children:[a.jsx(Zt,{})," Contacts"]}),a.jsxs(Ot,{to:"/admin/leads",className:({isActive:v})=>v?p:x,children:[a.jsx(Ba,{})," Leads"]}),a.jsxs(Ot,{to:"/admin/deals",className:({isActive:v})=>v?p:x,children:[a.jsx(Kt,{})," Deals"]}),a.jsxs(Ot,{to:"/admin/quotes",className:({isActive:v})=>v?p:x,children:[a.jsx(ga,{})," Quotes"]}),a.jsxs(Ot,{to:"/admin/targets",className:({isActive:v})=>v?p:x,children:[a.jsx(Zs,{})," Targets"]})]})]}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!n),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(ys,{className:"text-lg"}),"Activity"]}),a.jsx(St,{className:`transition-transform ${n?"rotate-180":""}`})]}),n&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(Ot,{to:"/admin/tasks",className:({isActive:v})=>v?p:x,children:[a.jsx(Gt,{})," Tasks"]}),a.jsxs(Ot,{to:"/admin/meetings",className:({isActive:v})=>v?p:x,children:[a.jsx(_t,{})," Meetings"]}),a.jsxs(Ot,{to:"/admin/calls",className:({isActive:v})=>v?p:x,children:[a.jsx(Es,{})," Calls"]}),a.jsxs(Ot,{to:"/admin/audit",className:({isActive:v})=>v?p:x,children:[a.jsx(ys,{})," Audit"]})]})]}),a.jsx("div",{children:a.jsx(Ot,{to:"/admin/territory",className:({isActive:v})=>v?p:x,children:a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(Lo,{className:"text-lg"}),"Territory"]})})}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!r),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(ek,{className:"text-lg"}),"User Management"]}),a.jsx(St,{className:`transition-transform ${r?"rotate-180":""}`})]}),r&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(Ot,{to:"/admin/users",className:({isActive:v})=>v?p:x,children:[a.jsx(La,{})," Users"]}),a.jsxs(Ot,{to:"/admin/manage-account",className:({isActive:v})=>v?p:x,children:[a.jsx(Zt,{})," Manage Account"]}),a.jsxs(Ot,{to:"/admin/company-details",className:({isActive:v})=>v?p:x,children:[a.jsx(lw,{})," Settings"]})]})]})]}),a.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),l&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>o(!1)}),a.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[a.jsx(Aoe,{toggleSidebar:()=>o(!l)}),a.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:a.jsx(Cp,{})})]})]})}function Toe(e){return At({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M160 0c17.7 0 32 14.3 32 32l0 35.7c1.6 .2 3.1 .4 4.7 .7c.4 .1 .7 .1 1.1 .2l48 8.8c17.4 3.2 28.9 19.9 25.7 37.2s-19.9 28.9-37.2 25.7l-47.5-8.7c-31.3-4.6-58.9-1.5-78.3 6.2s-27.2 18.3-29 28.1c-2 10.7-.5 16.7 1.2 20.4c1.8 3.9 5.5 8.3 12.8 13.2c16.3 10.7 41.3 17.7 73.7 26.3l2.9 .8c28.6 7.6 63.6 16.8 89.6 33.8c14.2 9.3 27.6 21.9 35.9 39.5c8.5 17.9 10.3 37.9 6.4 59.2c-6.9 38-33.1 63.4-65.6 76.7c-13.7 5.6-28.6 9.2-44.4 11l0 33.4c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-34.9c-.4-.1-.9-.1-1.3-.2l-.2 0s0 0 0 0c-24.4-3.8-64.5-14.3-91.5-26.3c-16.1-7.2-23.4-26.1-16.2-42.2s26.1-23.4 42.2-16.2c20.9 9.3 55.3 18.5 75.2 21.6c31.9 4.7 58.2 2 76-5.3c16.9-6.9 24.6-16.9 26.8-28.9c1.9-10.6 .4-16.7-1.3-20.4c-1.9-4-5.6-8.4-13-13.3c-16.4-10.7-41.5-17.7-74-26.3l-2.8-.7s0 0 0 0C119.4 279.3 84.4 270 58.4 253c-14.2-9.3-27.5-22-35.8-39.6c-8.4-17.9-10.1-37.9-6.1-59.2C23.7 116 52.3 91.2 84.8 78.3c13.3-5.3 27.9-8.9 43.2-11L128 32c0-17.7 14.3-32 32-32z"},child:[]}]})(e)}function koe(e){return At({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M544 248l0 3.3 69.7-69.7c21.9-21.9 21.9-57.3 0-79.2L535.6 24.4c-21.9-21.9-57.3-21.9-79.2 0L416.3 64.5c-2.7-.3-5.5-.5-8.3-.5L296 64c-37.1 0-67.6 28-71.6 64l-.4 0 0 120c0 22.1 17.9 40 40 40s40-17.9 40-40l0-72c0 0 0-.1 0-.1l0-15.9 16 0 136 0c0 0 0 0 .1 0l7.9 0c44.2 0 80 35.8 80 80l0 8zM336 192l0 56c0 39.8-32.2 72-72 72s-72-32.2-72-72l0-118.6c-35.9 6.2-65.8 32.3-76 68.2L99.5 255.2 26.3 328.4c-21.9 21.9-21.9 57.3 0 79.2l78.1 78.1c21.9 21.9 57.3 21.9 79.2 0l37.7-37.7c.9 0 1.8 .1 2.7 .1l160 0c26.5 0 48-21.5 48-48c0-5.6-1-11-2.7-16l2.7 0c26.5 0 48-21.5 48-48c0-12.8-5-24.4-13.2-33c25.7-5 45.1-27.6 45.2-54.8l0-.4c-.1-30.8-25.1-55.8-56-55.8c0 0 0 0 0 0l-120 0z"},child:[]}]})(e)}function Loe(e){return At({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M64 32C46.3 32 32 46.3 32 64l0 64c-17.7 0-32 14.3-32 32s14.3 32 32 32l0 32c-17.7 0-32 14.3-32 32s14.3 32 32 32l0 64 0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-64 80 0c68.4 0 127.7-39 156.8-96l19.2 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-.7 0c.5-5.3 .7-10.6 .7-16s-.2-10.7-.7-16l.7 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-19.2 0C303.7 71 244.4 32 176 32L64 32zm190.4 96L96 128l0-32 80 0c30.5 0 58.2 12.2 78.4 32zM96 192l190.9 0c.7 5.2 1.1 10.6 1.1 16s-.4 10.8-1.1 16L96 224l0-32zm158.4 96c-20.2 19.8-47.9 32-78.4 32l-80 0 0-32 158.4 0z"},child:[]}]})(e)}function mi({props:e,name:t}){return Oie({props:e,name:t,defaultTheme:xk,themeId:Cw})}function po(e){const{elementType:t,externalSlotProps:n,ownerState:s,skipResolvingSlotProps:r=!1,...i}=e,l=r?{}:rH(n,s),{props:o,internalRef:c}=iH({...i,externalSlotProps:l}),d=xl(c,l?.ref,e.additionalProps?.ref);return sH(t,{...o,ref:d},s)}function rs(e){const t=h.useRef(e);return Kn(()=>{t.current=e}),h.useRef((...n)=>(0,t.current)(...n)).current}var Pb=Symbol("NOT_FOUND");function Poe(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Doe(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Ooe(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(s=>typeof s=="function"?`function ${s.name||"unnamed"}()`:typeof s).join(", ");throw new TypeError(`${t}[${n}]`)}}var ZM=e=>Array.isArray(e)?e:[e];function Moe(e){const t=Array.isArray(e[0])?e[0]:e;return Ooe(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Ioe(e,t){const n=[],{length:s}=e;for(let r=0;r<s;r++)n.push(e[r].apply(null,t));return n}function $oe(e){let t;return{get(n){return t&&e(t.key,n)?t.value:Pb},put(n,s){t={key:n,value:s}},getEntries(){return t?[t]:[]},clear(){t=void 0}}}function Roe(e,t){let n=[];function s(o){const c=n.findIndex(d=>t(o,d.key));if(c>-1){const d=n[c];return c>0&&(n.splice(c,1),n.unshift(d)),d.value}return Pb}function r(o,c){s(o)===Pb&&(n.unshift({key:o,value:c}),n.length>e&&n.pop())}function i(){return n}function l(){n=[]}return{get:s,put:r,getEntries:i,clear:l}}var zoe=(e,t)=>e===t;function Uoe(e){return function(n,s){if(n===null||s===null||n.length!==s.length)return!1;const{length:r}=n;for(let i=0;i<r;i++)if(!e(n[i],s[i]))return!1;return!0}}function Foe(e,t){const n=typeof t=="object"?t:{equalityCheck:t},{equalityCheck:s=zoe,maxSize:r=1,resultEqualityCheck:i}=n,l=Uoe(s);let o=0;const c=r<=1?$oe(l):Roe(r,l);function d(){let u=c.get(arguments);if(u===Pb){if(u=e.apply(null,arguments),o++,i){const p=c.getEntries().find(x=>i(x.value,u));p&&(u=p.value,o!==0&&o--)}c.put(arguments,u)}return u}return d.clearCache=()=>{c.clear(),d.resetResultsCount()},d.resultsCount=()=>o,d.resetResultsCount=()=>{o=0},d}var Boe=class{constructor(e){this.value=e}deref(){return this.value}},Hoe=typeof WeakRef<"u"?WeakRef:Boe,Goe=0,JM=1;function sy(){return{s:Goe,v:void 0,o:null,p:null}}function uH(e,t={}){let n=sy();const{resultEqualityCheck:s}=t;let r,i=0;function l(){let o=n;const{length:c}=arguments;for(let f=0,p=c;f<p;f++){const x=arguments[f];if(typeof x=="function"||typeof x=="object"&&x!==null){let v=o.o;v===null&&(o.o=v=new WeakMap);const w=v.get(x);w===void 0?(o=sy(),v.set(x,o)):o=w}else{let v=o.p;v===null&&(o.p=v=new Map);const w=v.get(x);w===void 0?(o=sy(),v.set(x,o)):o=w}}const d=o;let u;if(o.s===JM)u=o.v;else if(u=e.apply(null,arguments),i++,s){const f=r?.deref?.()??r;f!=null&&s(f,u)&&(u=f,i!==0&&i--),r=typeof u=="object"&&u!==null||typeof u=="function"?new Hoe(u):u}return d.s=JM,d.v=u,u}return l.clearCache=()=>{n=sy(),l.resetResultsCount()},l.resultsCount=()=>i,l.resetResultsCount=()=>{i=0},l}function mH(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,s=(...r)=>{let i=0,l=0,o,c={},d=r.pop();typeof d=="object"&&(c=d,d=r.pop()),Poe(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const u={...n,...c},{memoize:f,memoizeOptions:p=[],argsMemoize:x=uH,argsMemoizeOptions:v=[]}=u,w=ZM(p),b=ZM(v),C=Moe(r),N=f(function(){return i++,d.apply(null,arguments)},...w),S=x(function(){l++;const k=Ioe(C,arguments);return o=N.apply(null,k),o},...b);return Object.assign(S,{resultFunc:d,memoizedResultFunc:N,dependencies:C,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>o,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:f,argsMemoize:x})};return Object.assign(s,{withTypes:()=>s}),s}var st=mH(uH),Woe=Object.assign((e,t=st)=>{Doe(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),s=n.map(i=>e[i]);return t(s,(...i)=>i.reduce((l,o,c)=>(l[n[c]]=o,l),{}))},{withTypes:()=>Woe});const Voe=mH({memoize:Foe,memoizeOptions:{maxSize:1,equalityCheck:Object.is}}),Nt=(e,t,n,s,r,i,l,o,...c)=>{if(c.length>0)throw new Error("Unsupported number of selectors");let d;if(e&&t&&n&&s&&r&&i&&l&&o)d=(u,f,p,x)=>{const v=e(u,f,p,x),w=t(u,f,p,x),b=n(u,f,p,x),C=s(u,f,p,x),N=r(u,f,p,x),S=i(u,f,p,x),A=l(u,f,p,x);return o(v,w,b,C,N,S,A,f,p,x)};else if(e&&t&&n&&s&&r&&i&&l)d=(u,f,p,x)=>{const v=e(u,f,p,x),w=t(u,f,p,x),b=n(u,f,p,x),C=s(u,f,p,x),N=r(u,f,p,x),S=i(u,f,p,x);return l(v,w,b,C,N,S,f,p,x)};else if(e&&t&&n&&s&&r&&i)d=(u,f,p,x)=>{const v=e(u,f,p,x),w=t(u,f,p,x),b=n(u,f,p,x),C=s(u,f,p,x),N=r(u,f,p,x);return i(v,w,b,C,N,f,p,x)};else if(e&&t&&n&&s&&r)d=(u,f,p,x)=>{const v=e(u,f,p,x),w=t(u,f,p,x),b=n(u,f,p,x),C=s(u,f,p,x);return r(v,w,b,C,f,p,x)};else if(e&&t&&n&&s)d=(u,f,p,x)=>{const v=e(u,f,p,x),w=t(u,f,p,x),b=n(u,f,p,x);return s(v,w,b,f,p,x)};else if(e&&t&&n)d=(u,f,p,x)=>{const v=e(u,f,p,x),w=t(u,f,p,x);return n(v,w,f,p,x)};else if(e&&t)d=(u,f,p,x)=>{const v=e(u,f,p,x);return t(v,f,p,x)};else if(e)d=e;else throw new Error("Missing arguments");return d},Sw=e=>(...t)=>{const n=new WeakMap;let s=1;const r=t[t.length-1],i=t.length-1||1,l=Math.max(r.length-i,0);if(l>3)throw new Error("Unsupported number of arguments");return(c,d,u,f)=>{let p=c.__cacheKey__;p||(p={id:s},c.__cacheKey__=p,s+=1);let x=n.get(p);if(!x){const v=t.length===1?[C=>C,r]:t;let w=t;const b=[void 0,void 0,void 0];switch(l){case 0:break;case 1:{w=[...v.slice(0,-1),()=>b[0],r];break}case 2:{w=[...v.slice(0,-1),()=>b[0],()=>b[1],r];break}case 3:{w=[...v.slice(0,-1),()=>b[0],()=>b[1],()=>b[2],r];break}default:throw new Error("Unsupported number of arguments")}e&&(w=[...w,e]),x=Voe(...w),x.selectorArgs=b,n.set(p,x)}switch(l){case 3:x.selectorArgs[2]=f;case 2:x.selectorArgs[1]=u;case 1:x.selectorArgs[0]=d}switch(l){case 0:return x(c);case 1:return x(c,d);case 2:return x(c,d,u);case 3:return x(c,d,u,f);default:throw new Error("unreachable")}}},Sn=Sw();var qC={exports:{}},YC={},KC={exports:{}},QC={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eI;function qoe(){if(eI)return QC;eI=1;var e=wf();function t(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var n=typeof Object.is=="function"?Object.is:t,s=e.useState,r=e.useEffect,i=e.useLayoutEffect,l=e.useDebugValue;function o(f,p){var x=p(),v=s({inst:{value:x,getSnapshot:p}}),w=v[0].inst,b=v[1];return i(function(){w.value=x,w.getSnapshot=p,c(w)&&b({inst:w})},[f,x,p]),r(function(){return c(w)&&b({inst:w}),f(function(){c(w)&&b({inst:w})})},[f]),l(x),x}function c(f){var p=f.getSnapshot;f=f.value;try{var x=p();return!n(f,x)}catch{return!0}}function d(f,p){return p()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:o;return QC.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u,QC}var tI;function Yoe(){return tI||(tI=1,KC.exports=qoe()),KC.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aI;function Koe(){if(aI)return YC;aI=1;var e=wf(),t=Yoe();function n(d,u){return d===u&&(d!==0||1/d===1/u)||d!==d&&u!==u}var s=typeof Object.is=="function"?Object.is:n,r=t.useSyncExternalStore,i=e.useRef,l=e.useEffect,o=e.useMemo,c=e.useDebugValue;return YC.useSyncExternalStoreWithSelector=function(d,u,f,p,x){var v=i(null);if(v.current===null){var w={hasValue:!1,value:null};v.current=w}else w=v.current;v=o(function(){function C(_){if(!N){if(N=!0,S=_,_=p(_),x!==void 0&&w.hasValue){var T=w.value;if(x(T,_))return A=T}return A=_}if(T=A,s(S,_))return T;var E=p(_);return x!==void 0&&x(T,E)?(S=_,T):(S=_,A=E)}var N=!1,S,A,k=f===void 0?null:f;return[function(){return C(u())},k===null?void 0:function(){return C(k())}]},[u,f,p,x]);var b=r(d,v[0],v[1]);return l(function(){w.hasValue=!0,w.value=b},[b]),c(b),b},YC}var nI;function Qoe(){return nI||(nI=1,qC.exports=Koe()),qC.exports}var fH=Qoe();function Xoe(e,t,n,s,r){const i=l=>t(l,n,s,r);return fH.useSyncExternalStoreWithSelector(e.subscribe,e.getSnapshot,e.getSnapshot,i)}const sI={};function _w(e,t){const n=h.useRef(sI);return n.current===sI&&(n.current=e(t)),n}const Zoe=[];function hH(e){h.useEffect(e,Zoe)}const Joe=()=>{};function ece(e,t,n){const s=_w(tce,{store:e,selector:t}).current;s.effect=n,hH(s.onMount)}function tce(e){const{store:t,selector:n}=e;let s=n(t.state);const r={effect:Joe,dispose:null,subscribe:()=>{r.dispose??=t.subscribe(i=>{const l=n(i);if(!Object.is(s,l)){const o=s;s=l,r.effect(o,l)}})},onMount:()=>(r.subscribe(),()=>{r.dispose?.(),r.dispose=null})};return r.subscribe(),r}class wk{static create(t){return new wk(t)}constructor(t){this.state=t,this.listeners=new Set,this.updateTick=0}subscribe=t=>(this.listeners.add(t),()=>{this.listeners.delete(t)});getSnapshot=()=>this.state;setState(t){this.state=t,this.updateTick+=1;const n=this.updateTick,s=this.listeners.values();let r;for(;r=s.next(),!r.done;){if(n!==this.updateTick)return;const i=r.value;i(t)}}update(t){for(const n in t)if(!Object.is(this.state[n],t[n])){this.setState(Ke({},this.state,t));return}}set(t,n){Object.is(this.state[t],n)||this.setState(Ke({},this.state,{[t]:n}))}}const Aw=({params:e,store:t})=>{h.useEffect(()=>{t.set("animation",Ke({},t.state.animation,{skip:e.skipAnimation}))},[t,e.skipAnimation]);const n=h.useCallback(()=>{let s=!1;return t.set("animation",Ke({},t.state.animation,{skipAnimationRequests:t.state.animation.skipAnimationRequests+1})),()=>{s||(s=!0,t.set("animation",Ke({},t.state.animation,{skipAnimationRequests:t.state.animation.skipAnimationRequests-1})))}},[t]);return Kn(()=>{if(typeof window>"u"||!window?.matchMedia)return;let r;const i=o=>{o.matches?r=n():r?.()},l=window.matchMedia("(prefers-reduced-motion)");return i(l),l.addEventListener("change",i),()=>{l.removeEventListener("change",i)}},[n,t]),{instance:{disableAnimation:n}}};Aw.params={skipAnimation:!0};Aw.getDefaultizedParams=({params:e})=>Ke({},e,{skipAnimation:e.skipAnimation??!1});Aw.getInitialState=({skipAnimation:e})=>({animation:{skip:e,skipAnimationRequests:0}});const ace=e=>e.animation,nce=Nt(ace,e=>e.skip||e.skipAnimationRequests>0);function sce(e,t){const n=h.useRef(!0);h.useEffect(()=>{if(n.current){n.current=!1;return}return e()},t)}function QA(e){return e&&e.ownerDocument||document}function rce(e){return QA(e).defaultView||window}const Rt=Xoe,Ew="DEFAULT_X_AXIS_KEY",ice="DEFAULT_Y_AXIS_KEY",lce={top:20,bottom:20,left:20,right:20},oce=45,cce=25,gH=20,jl=e=>e.cartesianAxis?.x,Do=e=>e.cartesianAxis?.y,dce=Nt(Do,function(t){return(t??[]).reduce((n,s)=>s.position==="left"?n+(s.width||0)+(s.zoom?.slider.enabled?s.zoom.slider.size:0):n,0)}),uce=Nt(Do,function(t){return(t??[]).reduce((n,s)=>s.position==="right"?n+(s.width||0)+(s.zoom?.slider.enabled?s.zoom.slider.size:0):n,0)}),mce=Nt(jl,function(t){return(t??[]).reduce((n,s)=>s.position==="top"?n+(s.height||0)+(s.zoom?.slider.enabled?s.zoom.slider.size:0):n,0)}),fce=Nt(jl,function(t){return(t??[]).reduce((n,s)=>s.position==="bottom"?n+(s.height||0)+(s.zoom?.slider.enabled?s.zoom.slider.size:0):n,0)}),hce=Sn(dce,uce,mce,fce,function(t,n,s,r){return{left:t,right:n,top:s,bottom:r}}),Fp=e=>e.dimensions,gce=e=>e.dimensions.margin,ir=Sn(Fp,gce,hce,function({width:t,height:n},{top:s,right:r,bottom:i,left:l},{left:o,right:c,top:d,bottom:u}){return{width:t-l-r-o-c,left:l+o,right:r+c,height:n-s-i-d-u,top:s+d,bottom:i+u}}),pce=Nt(Fp,e=>e.width),xce=Nt(Fp,e=>e.height),pH=Nt(Fp,e=>e.propsWidth),xH=Nt(Fp,e=>e.propsHeight);function yce(e,t){return typeof e=="number"?{top:e,bottom:e,left:e,right:e}:t?Ke({},t,e):e}const bce=10,Tw=({params:e,store:t,svgRef:n})=>{const s=e.width!==void 0&&e.height!==void 0,r=h.useRef({displayError:!1,initialCompute:!0,computeRun:0}),[i,l]=h.useState(0),[o,c]=h.useState(0),d=h.useCallback(()=>{const v=n?.current;if(!v)return{};const b=rce(v).getComputedStyle(v),C=Math.floor(parseFloat(b.height))||0,N=Math.floor(parseFloat(b.width))||0;return(t.state.dimensions.width!==N||t.state.dimensions.height!==C)&&t.set("dimensions",{margin:{top:e.margin.top,right:e.margin.right,bottom:e.margin.bottom,left:e.margin.left},width:e.width??N,height:e.height??C,propsWidth:e.width,propsHeight:e.height}),{height:C,width:N}},[t,n,e.height,e.width,e.margin.left,e.margin.right,e.margin.top,e.margin.bottom]);sce(()=>{const v=e.width??t.state.dimensions.width,w=e.height??t.state.dimensions.height;t.set("dimensions",{margin:{top:e.margin.top,right:e.margin.right,bottom:e.margin.bottom,left:e.margin.left},width:v,height:w,propsHeight:e.height,propsWidth:e.width})},[t,e.height,e.width,e.margin.left,e.margin.right,e.margin.top,e.margin.bottom]),h.useEffect(()=>{r.current.displayError=!0},[]),Kn(()=>{if(s||!r.current.initialCompute||r.current.computeRun>bce)return;const v=d();v.width!==i||v.height!==o?(r.current.computeRun+=1,v.width!==void 0&&l(v.width),v.height!==void 0&&c(v.height)):r.current.initialCompute&&(r.current.initialCompute=!1)},[o,i,d,s]),Kn(()=>{if(s)return()=>{};d();const v=n.current;if(typeof ResizeObserver>"u")return()=>{};let w;const b=new ResizeObserver(()=>{w=requestAnimationFrame(()=>{d()})});return v&&b.observe(v),()=>{w&&cancelAnimationFrame(w),v&&b.unobserve(v)}},[d,s,n]);const u=Rt(t,ir),f=h.useCallback(v=>v>=u.left-1&&v<=u.left+u.width,[u.left,u.width]),p=h.useCallback(v=>v>=u.top-1&&v<=u.top+u.height,[u.height,u.top]);return{instance:{isPointInside:h.useCallback((v,w,b)=>b&&"closest"in b&&b.closest("[data-drawing-container]")?!0:f(v)&&p(w),[f,p]),isXInside:f,isYInside:p}}};Tw.params={width:!0,height:!0,margin:!0};Tw.getDefaultizedParams=({params:e})=>Ke({},e,{margin:yce(e.margin,lce)});Tw.getInitialState=({width:e,height:t,margin:n})=>({dimensions:{margin:n,width:e??0,height:t??0,propsWidth:e,propsHeight:t}});const Nk=({params:e,store:t})=>(Kn(()=>{t.set("experimentalFeatures",e.experimentalFeatures)},[t,e.experimentalFeatures]),{});Nk.params={experimentalFeatures:!0};Nk.getInitialState=({experimentalFeatures:e})=>({experimentalFeatures:e});const vce=e=>e.experimentalFeatures,kw=Nt(vce,e=>!!e?.preferStrictDomainInLineCharts);let rI=0;const wce=()=>(rI+=1,`mui-chart-${rI}`),jk=({params:e,store:t})=>(h.useEffect(()=>{e.id===void 0||e.id===t.state.id.providedChartId&&t.state.id.chartId!==void 0||t.set("id",Ke({},t.state.id,{chartId:e.id??wce()}))},[t,e.id]),{});jk.params={id:!0};jk.getInitialState=({id:e})=>({id:{chartId:e,providedChartId:e}});const Nce=e=>e.id,jce=Nt(Nce,e=>e.chartId),Cce=["#4254FB","#FFB422","#FA4F58","#0DBEFF","#22BF75","#FA83B4","#FF7511"],Sce=["#495AFB","#FFC758","#F35865","#30C8FF","#44CE8D","#F286B3","#FF8C39"],yH=e=>e==="dark"?Sce:Cce,bH=({series:e,colors:t,seriesConfig:n})=>{const s={};return e.forEach((r,i)=>{const l=n[r.type].getSeriesWithDefaultValues(r,i,t),o=l.id;if(s[r.type]===void 0&&(s[r.type]={series:{},seriesOrder:[]}),s[r.type]?.series[o]!==void 0)throw new Error(`MUI X Charts: series' id "${o}" is not unique.`);s[r.type].series[o]=l,s[r.type].seriesOrder.push(o)}),s},_ce=(e,t,n)=>{const s={};return Object.keys(t).forEach(r=>{const i=e[r];i!==void 0&&(s[r]=t[r]?.seriesProcessor?.(i,n)??i)}),s},Lw=({params:e,store:t,seriesConfig:n})=>{const{series:s,dataset:r,theme:i,colors:l}=e,o=h.useRef(!0);return h.useEffect(()=>{if(o.current){o.current=!1;return}t.set("series",Ke({},t.state.series,{defaultizedSeries:bH({series:s,colors:typeof l=="function"?l(i):l,seriesConfig:n}),dataset:r}))},[l,r,s,i,n,t]),{}};Lw.params={dataset:!0,series:!0,colors:!0,theme:!0};const Ace=[];Lw.getDefaultizedParams=({params:e})=>Ke({},e,{series:e.series?.length?e.series:Ace,colors:e.colors??yH,theme:e.theme??"light"});Lw.getInitialState=({series:e=[],colors:t,theme:n,dataset:s},r,i)=>({series:{seriesConfig:i,defaultizedSeries:bH({series:e,colors:typeof t=="function"?t(n):t,seriesConfig:i}),dataset:s}});const Ck=e=>e.series,Ece=Nt(Ck,e=>e.defaultizedSeries),Pr=Nt(Ck,e=>e.seriesConfig),Tce=Nt(Ck,e=>e.dataset),on=Sn(Ece,Pr,Tce,function(t,n,s){return _ce(t,n,s)}),kce={abort:!0,animationcancel:!0,animationend:!0,animationiteration:!0,animationstart:!0,auxclick:!0,beforeinput:!0,beforetoggle:!0,blur:!0,cancel:!0,canplay:!0,canplaythrough:!0,change:!0,click:!0,close:!0,compositionend:!0,compositionstart:!0,compositionupdate:!0,contextlost:!0,contextmenu:!0,contextrestored:!0,copy:!0,cuechange:!0,cut:!0,dblclick:!0,drag:!0,dragend:!0,dragenter:!0,dragleave:!0,dragover:!0,dragstart:!0,drop:!0,durationchange:!0,emptied:!0,ended:!0,error:!0,focus:!0,focusin:!0,focusout:!0,formdata:!0,gotpointercapture:!0,input:!0,invalid:!0,keydown:!0,keypress:!0,keyup:!0,load:!0,loadeddata:!0,loadedmetadata:!0,loadstart:!0,lostpointercapture:!0,mousedown:!0,mouseenter:!0,mouseleave:!0,mousemove:!0,mouseout:!0,mouseover:!0,mouseup:!0,paste:!0,pause:!0,play:!0,playing:!0,pointercancel:!0,pointerdown:!0,pointerenter:!0,pointerleave:!0,pointermove:!0,pointerout:!0,pointerover:!0,pointerup:!0,progress:!0,ratechange:!0,reset:!0,resize:!0,scroll:!0,scrollend:!0,securitypolicyviolation:!0,seeked:!0,seeking:!0,select:!0,selectionchange:!0,selectstart:!0,slotchange:!0,stalled:!0,submit:!0,suspend:!0,timeupdate:!0,toggle:!0,touchcancel:!0,touchend:!0,touchmove:!0,touchstart:!0,transitioncancel:!0,transitionend:!0,transitionrun:!0,transitionstart:!0,volumechange:!0,waiting:!0,webkitanimationend:!0,webkitanimationiteration:!0,webkitanimationstart:!0,webkittransitionend:!0,wheel:!0,beforematch:!0,pointerrawupdate:!0};class vH{customData={};constructor(t){if(!t||!t.name)throw new Error("Gesture must be initialized with a valid name.");if(t.name in kce)throw new Error(`Gesture can't be created with a native event name. Tried to use "${t.name}". Please use a custom name instead.`);this.name=t.name,this.preventDefault=t.preventDefault??!1,this.stopPropagation=t.stopPropagation??!1,this.preventIf=t.preventIf??[],this.requiredKeys=t.requiredKeys??[],this.pointerMode=t.pointerMode??[],this.pointerOptions=t.pointerOptions??{}}init(t,n,s,r){this.element=t,this.pointerManager=n,this.gesturesRegistry=s,this.keyboardManager=r;const i=`${this.name}ChangeOptions`;this.element.addEventListener(i,this.handleOptionsChange);const l=`${this.name}ChangeState`;this.element.addEventListener(l,this.handleStateChange)}handleOptionsChange=t=>{t&&t.detail&&this.updateOptions(t.detail)};updateOptions(t){this.preventDefault=t.preventDefault??this.preventDefault,this.stopPropagation=t.stopPropagation??this.stopPropagation,this.preventIf=t.preventIf??this.preventIf,this.requiredKeys=t.requiredKeys??this.requiredKeys,this.pointerMode=t.pointerMode??this.pointerMode,this.pointerOptions=t.pointerOptions??this.pointerOptions}getBaseConfig(){return{requiredKeys:this.requiredKeys}}getEffectiveConfig(t,n){if(t!=="mouse"&&t!=="touch"&&t!=="pen")return n;const s=this.pointerOptions[t];return s?Ke({},n,s):n}handleStateChange=t=>{t&&t.detail&&this.updateState(t.detail)};updateState(t){Object.assign(this.state,t)}getTargetElement(t){return this.isActive||this.element===t.target||"contains"in this.element&&this.element.contains(t.target)||"getRootNode"in this.element&&this.element.getRootNode()instanceof ShadowRoot&&t.composedPath().includes(this.element)?this.element:null}set isActive(t){t?this.gesturesRegistry.registerActiveGesture(this.element,this):this.gesturesRegistry.unregisterActiveGesture(this.element,this)}get isActive(){return this.gesturesRegistry.isGestureActive(this.element,this)??!1}shouldPreventGesture(t,n){const s=this.getEffectiveConfig(n,this.getBaseConfig());if(!this.keyboardManager.areKeysPressed(s.requiredKeys))return!0;if(this.preventIf.length===0)return!1;const r=this.gesturesRegistry.getActiveGestures(t);return this.preventIf.some(i=>r[i])}isPointerTypeAllowed(t){return!this.pointerMode||this.pointerMode.length===0?!0:this.pointerMode.includes(t)}destroy(){const t=`${this.name}ChangeOptions`;this.element.removeEventListener(t,this.handleOptionsChange);const n=`${this.name}ChangeState`;this.element.removeEventListener(n,this.handleStateChange)}}class Lce{activeGestures=new Map;registerActiveGesture(t,n){this.activeGestures.has(t)||this.activeGestures.set(t,new Set);const s=this.activeGestures.get(t),r={gesture:n,element:t};s.add(r)}unregisterActiveGesture(t,n){const s=this.activeGestures.get(t);s&&(s.forEach(r=>{r.gesture===n&&s.delete(r)}),s.size===0&&this.activeGestures.delete(t))}getActiveGestures(t){const n=this.activeGestures.get(t);return n?Array.from(n).reduce((s,r)=>(s[r.gesture.name]=!0,s),{}):{}}isGestureActive(t,n){const s=this.activeGestures.get(t);return s?Array.from(s).some(r=>r.gesture===n):!1}destroy(){this.activeGestures.clear()}unregisterElement(t){this.activeGestures.delete(t)}}class Pce{pressedKeys=new Set;constructor(){this.initialize()}initialize(){typeof window>"u"||(window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp),window.addEventListener("blur",this.clearKeys))}handleKeyDown=t=>{this.pressedKeys.add(t.key)};handleKeyUp=t=>{this.pressedKeys.delete(t.key)};clearKeys=()=>{this.pressedKeys.clear()};areKeysPressed(t){return!t||t.length===0?!0:t.every(n=>n==="ControlOrMeta"?navigator.platform.includes("Mac")?this.pressedKeys.has("Meta"):this.pressedKeys.has("Control"):this.pressedKeys.has(n))}destroy(){typeof window<"u"&&(window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp),window.removeEventListener("blur",this.clearKeys)),this.clearKeys()}}class Dce{preventEventInterruption=!0;pointers=new Map;gestureHandlers=new Set;constructor(t){this.root=t.root??document.getRootNode({composed:!0})??document.body,this.touchAction=t.touchAction||"auto",this.passive=t.passive??!1,this.preventEventInterruption=t.preventEventInterruption??!0,this.setupEventListeners()}registerGestureHandler(t){return this.gestureHandlers.add(t),()=>{this.gestureHandlers.delete(t)}}getPointers(){return new Map(this.pointers)}setupEventListeners(){this.touchAction!=="auto"&&(this.root.style.touchAction=this.touchAction),this.root.addEventListener("pointerdown",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointermove",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointerup",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointercancel",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("forceCancel",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("blur",this.handleInterruptEvents),this.root.addEventListener("contextmenu",this.handleInterruptEvents)}handleInterruptEvents=t=>{if(this.preventEventInterruption&&"pointerType"in t&&t.pointerType==="touch"){t.preventDefault();return}const n=new PointerEvent("forceCancel",{bubbles:!1,cancelable:!1}),s=this.pointers.values().next().value;if(this.pointers.size>0&&s){Object.defineProperties(n,{clientX:{value:s.clientX},clientY:{value:s.clientY},pointerId:{value:s.pointerId},pointerType:{value:s.pointerType}});for(const[r,i]of this.pointers.entries()){const l=Ke({},i,{type:"forceCancel"});this.pointers.set(r,l)}}this.notifyHandlers(n),this.pointers.clear()};handlePointerEvent=t=>{const{type:n,pointerId:s}=t;if(n==="pointerdown"||n==="pointermove")this.pointers.set(s,this.createPointerData(t));else if(n==="pointerup"||n==="pointercancel"||n==="forceCancel"){this.pointers.set(s,this.createPointerData(t)),this.notifyHandlers(t),this.pointers.delete(s);return}this.notifyHandlers(t)};notifyHandlers(t){this.gestureHandlers.forEach(n=>n(this.pointers,t))}createPointerData(t){return{pointerId:t.pointerId,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,target:t.target,timeStamp:t.timeStamp,type:t.type,isPrimary:t.isPrimary,pressure:t.pressure,width:t.width,height:t.height,pointerType:t.pointerType,srcEvent:t}}destroy(){this.root.removeEventListener("pointerdown",this.handlePointerEvent),this.root.removeEventListener("pointermove",this.handlePointerEvent),this.root.removeEventListener("pointerup",this.handlePointerEvent),this.root.removeEventListener("pointercancel",this.handlePointerEvent),this.root.removeEventListener("forceCancel",this.handlePointerEvent),this.root.removeEventListener("blur",this.handleInterruptEvents),this.root.removeEventListener("contextmenu",this.handleInterruptEvents),this.pointers.clear(),this.gestureHandlers.clear()}}class Oce{gestureTemplates=new Map;elementGestureMap=new Map;activeGesturesRegistry=new Lce;keyboardManager=new Pce;constructor(t){this.pointerManager=new Dce({root:t.root,touchAction:t.touchAction,passive:t.passive}),t.gestures&&t.gestures.length>0&&t.gestures.forEach(n=>{this.addGestureTemplate(n)})}addGestureTemplate(t){this.gestureTemplates.has(t.name)&&console.warn(`Gesture template with name "${t.name}" already exists. It will be overwritten.`),this.gestureTemplates.set(t.name,t)}setGestureOptions(t,n,s){const r=this.elementGestureMap.get(n);if(!r||!r.has(t)){console.error(`Gesture "${t}" not found on the provided element.`);return}const i=new CustomEvent(`${t}ChangeOptions`,{detail:s,bubbles:!1,cancelable:!1,composed:!1});n.dispatchEvent(i)}setGestureState(t,n,s){const r=this.elementGestureMap.get(n);if(!r||!r.has(t)){console.error(`Gesture "${t}" not found on the provided element.`);return}const i=new CustomEvent(`${t}ChangeState`,{detail:s,bubbles:!1,cancelable:!1,composed:!1});n.dispatchEvent(i)}registerElement(t,n,s){return Array.isArray(t)||(t=[t]),t.forEach(r=>{const i=s?.[r];this.registerSingleGesture(r,n,i)}),n}registerSingleGesture(t,n,s){const r=this.gestureTemplates.get(t);if(!r)return console.error(`Gesture template "${t}" not found.`),!1;this.elementGestureMap.has(n)||this.elementGestureMap.set(n,new Map);const i=this.elementGestureMap.get(n);i.has(t)&&(console.warn(`Element already has gesture "${t}" registered. It will be replaced.`),this.unregisterElement(t,n));const l=r.clone(s);return l.init(n,this.pointerManager,this.activeGesturesRegistry,this.keyboardManager),i.set(t,l),!0}unregisterElement(t,n){const s=this.elementGestureMap.get(n);return!s||!s.has(t)?!1:(s.get(t).destroy(),s.delete(t),this.activeGesturesRegistry.unregisterElement(n),s.size===0&&this.elementGestureMap.delete(n),!0)}unregisterAllGestures(t){const n=this.elementGestureMap.get(t);if(n){for(const[,s]of n)s.destroy(),this.activeGesturesRegistry.unregisterElement(t);this.elementGestureMap.delete(t)}}destroy(){for(const[t]of this.elementGestureMap)this.unregisterAllGestures(t);this.gestureTemplates.clear(),this.elementGestureMap.clear(),this.activeGesturesRegistry.destroy(),this.keyboardManager.destroy(),this.pointerManager.destroy()}}class Cu extends vH{unregisterHandler=null;originalTarget=null;constructor(t){super(t),this.minPointers=t.minPointers??1,this.maxPointers=t.maxPointers??1/0}init(t,n,s,r){super.init(t,n,s,r),this.unregisterHandler=this.pointerManager.registerGestureHandler(this.handlePointerEvent)}updateOptions(t){super.updateOptions(t),this.minPointers=t.minPointers??this.minPointers,this.maxPointers=t.maxPointers??this.maxPointers}getBaseConfig(){return{requiredKeys:this.requiredKeys,minPointers:this.minPointers,maxPointers:this.maxPointers}}isWithinPointerCount(t,n){const s=this.getEffectiveConfig(n,this.getBaseConfig());return t.length>=s.minPointers&&t.length<=s.maxPointers}getRelevantPointers(t,n){return t.filter(s=>this.isPointerTypeAllowed(s.pointerType)&&(n===s.target||s.target===this.originalTarget||n===this.originalTarget||"contains"in n&&n.contains(s.target))||"getRootNode"in n&&n.getRootNode()instanceof ShadowRoot&&s.srcEvent.composedPath().includes(n))}destroy(){this.unregisterHandler&&(this.unregisterHandler(),this.unregisterHandler=null),super.destroy()}}function Mce(e,t){const n=t.x-e.x,s=t.y-e.y;return Math.sqrt(n*n+s*s)}function XC(e){if(e.length<2)return 0;let t=0,n=0;for(let s=0;s<e.length;s+=1)for(let r=s+1;r<e.length;r+=1)t+=Mce({x:e[s].clientX,y:e[s].clientY},{x:e[r].clientX,y:e[r].clientY}),n+=1;return n>0?t/n:0}function xo(e){if(e.length===0)return{x:0,y:0};const t=e.reduce((n,s)=>(n.x+=s.clientX,n.y+=s.clientY,n),{x:0,y:0});return{x:t.x/e.length,y:t.y/e.length}}function ti(e,t){return`${e}${t==="ongoing"?"":t.charAt(0).toUpperCase()+t.slice(1)}`}const ry=1e-5,fc=1e-5,iI=.15;function Ice(e,t){const n=t.x-e.x,s=t.y-e.y,r={vertical:null,horizontal:null,mainAxis:null},i=$ce(t,e),l=Math.abs(n)>Math.abs(s)?"horizontal":"vertical",o=i||l==="horizontal"?ry:iI,c=i?ry:l==="horizontal"?iI:ry;return Math.abs(n)>o&&(r.horizontal=n>0?"right":"left"),Math.abs(s)>c&&(r.vertical=s>0?"down":"up"),r.mainAxis=i?"diagonal":l,r}function $ce(e,t){const n=t.x-e.x,s=t.y-e.y,r=Math.atan2(s,n)*180/Math.PI;return r>=-45+fc&&r<=-22.5+fc||r>=22.5+fc&&r<=45+fc||r>=135+fc&&r<=157.5+fc||r>=-157.5+fc&&r<=-135+fc}function Rce(e,t){if(!e.vertical&&!e.horizontal)return!1;if(t.length===0)return!0;const n=e.vertical===null||t.includes(e.vertical),s=e.horizontal===null||t.includes(e.horizontal);return n&&s}const lI=0,zce=e=>e>lI?1:e<-lI?-1:0,wc=e=>{e.cancelable&&e.preventDefault()};class Sk extends Cu{state={lastPosition:null};constructor(t){super(t),this.threshold=t.threshold||0}clone(t){return new Sk(Ke({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}init(t,n,s,r){super.init(t,n,s,r),this.element.addEventListener("pointerenter",this.handleElementEnter),this.element.addEventListener("pointerleave",this.handleElementLeave)}destroy(){this.element.removeEventListener("pointerenter",this.handleElementEnter),this.element.removeEventListener("pointerleave",this.handleElementLeave),this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t)}resetState(){this.isActive=!1,this.state={lastPosition:null}}handleElementEnter=t=>{if(t.pointerType!=="mouse"&&t.pointerType!=="pen")return;const n=this.pointerManager.getPointers()||new Map,s=Array.from(n.values());if(this.isWithinPointerCount(s,t.pointerType)){this.isActive=!0;const r={x:t.clientX,y:t.clientY};this.state.lastPosition=r,this.emitMoveEvent(this.element,"start",s,t),this.emitMoveEvent(this.element,"ongoing",s,t)}};handleElementLeave=t=>{if(t.pointerType!=="mouse"&&t.pointerType!=="pen"||!this.isActive)return;const n=this.pointerManager.getPointers()||new Map,s=Array.from(n.values());this.emitMoveEvent(this.element,"end",s,t),this.resetState()};handlePointerEvent=(t,n)=>{if(n.type!=="pointermove"||n.pointerType!=="mouse"&&n.pointerType!=="pen")return;this.preventDefault&&n.preventDefault(),this.stopPropagation&&n.stopPropagation();const s=Array.from(t.values()),r=this.getTargetElement(n);if(!r||!this.isWithinPointerCount(s,n.pointerType))return;if(this.shouldPreventGesture(r,n.pointerType)){if(!this.isActive)return;this.resetState(),this.emitMoveEvent(r,"end",s,n);return}const i={x:n.clientX,y:n.clientY};this.state.lastPosition=i,this.isActive||(this.isActive=!0,this.emitMoveEvent(r,"start",s,n)),this.emitMoveEvent(r,"ongoing",s,n)};emitMoveEvent(t,n,s,r){const i=this.state.lastPosition||xo(s),l=this.gesturesRegistry.getActiveGestures(t),o={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:n,pointers:s,timeStamp:r.timeStamp,activeGestures:l,customData:this.customData},c=ti(this.name,n),d=new CustomEvent(c,{bubbles:!0,cancelable:!0,composed:!0,detail:o});t.dispatchEvent(d)}}class Yd extends Cu{state={startPointers:new Map,startCentroid:null,lastCentroid:null,movementThresholdReached:!1,totalDeltaX:0,totalDeltaY:0,activeDeltaX:0,activeDeltaY:0,lastDirection:{vertical:null,horizontal:null,mainAxis:null},lastDeltas:null};constructor(t){super(t),this.direction=t.direction||["up","down","left","right"],this.threshold=t.threshold||0}clone(t){return new Yd(Ke({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,direction:[...this.direction],requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}destroy(){this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t),this.direction=t.direction||this.direction,this.threshold=t.threshold??this.threshold}resetState(){this.isActive=!1,this.state=Ke({},this.state,{startPointers:new Map,startCentroid:null,lastCentroid:null,lastDeltas:null,activeDeltaX:0,activeDeltaY:0,movementThresholdReached:!1,lastDirection:{vertical:null,horizontal:null,mainAxis:null}})}handlePointerEvent=(t,n)=>{const s=Array.from(t.values());if(n.type==="forceCancel"){this.cancel(n.target,s,n);return}const r=this.getTargetElement(n);if(!r)return;if(this.shouldPreventGesture(r,n.pointerType)){this.cancel(r,s,n);return}const i=this.getRelevantPointers(s,r);if(!this.isWithinPointerCount(i,n.pointerType)){this.cancel(r,i,n);return}switch(n.type){case"pointerdown":!this.isActive&&!this.state.startCentroid&&(i.forEach(l=>{this.state.startPointers.set(l.pointerId,l)}),this.originalTarget=r,this.state.startCentroid=xo(i),this.state.lastCentroid=Ke({},this.state.startCentroid));break;case"pointermove":if(this.state.startCentroid&&this.isWithinPointerCount(s,n.pointerType)){const l=xo(i),o=l.x-this.state.startCentroid.x,c=l.y-this.state.startCentroid.y,d=Math.sqrt(o*o+c*c),u=Ice(this.state.lastCentroid??this.state.startCentroid,l),f=this.state.lastCentroid?l.x-this.state.lastCentroid.x:0,p=this.state.lastCentroid?l.y-this.state.lastCentroid.y:0;!this.state.movementThresholdReached&&d>=this.threshold&&Rce(u,this.direction)?(this.state.movementThresholdReached=!0,this.isActive=!0,this.state.lastDeltas={x:f,y:p},this.state.totalDeltaX+=f,this.state.totalDeltaY+=p,this.state.activeDeltaX+=f,this.state.activeDeltaY+=p,this.emitPanEvent(r,"start",i,n,l),this.emitPanEvent(r,"ongoing",i,n,l)):this.state.movementThresholdReached&&this.isActive&&(this.state.lastDeltas={x:f,y:p},this.state.totalDeltaX+=f,this.state.totalDeltaY+=p,this.state.activeDeltaX+=f,this.state.activeDeltaY+=p,this.emitPanEvent(r,"ongoing",i,n,l)),this.state.lastCentroid=l,this.state.lastDirection=u}break;case"pointerup":case"pointercancel":case"forceCancel":if(this.isActive&&this.state.movementThresholdReached){const l=i.filter(o=>o.type!=="pointerup"&&o.type!=="pointercancel");if(!this.isWithinPointerCount(l,n.pointerType)){const o=this.state.lastCentroid||this.state.startCentroid;n.type==="pointercancel"&&this.emitPanEvent(r,"cancel",i,n,o),this.emitPanEvent(r,"end",i,n,o),this.resetState()}}else this.resetState();break}};emitPanEvent(t,n,s,r,i){if(!this.state.startCentroid)return;const l=this.state.lastDeltas?.x??0,o=this.state.lastDeltas?.y??0,c=this.state.startPointers.values().next().value,d=c?(r.timeStamp-c.timeStamp)/1e3:0,u=d>0?l/d:0,f=d>0?o/d:0,p=Math.sqrt(u*u+f*f),x=this.gesturesRegistry.getActiveGestures(t),v={gestureName:this.name,initialCentroid:this.state.startCentroid,centroid:i,target:r.target,srcEvent:r,phase:n,pointers:s,timeStamp:r.timeStamp,deltaX:l,deltaY:o,direction:this.state.lastDirection,velocityX:u,velocityY:f,velocity:p,totalDeltaX:this.state.totalDeltaX,totalDeltaY:this.state.totalDeltaY,activeDeltaX:this.state.activeDeltaX,activeDeltaY:this.state.activeDeltaY,activeGestures:x,customData:this.customData},w=ti(this.name,n),b=new CustomEvent(w,{bubbles:!0,cancelable:!0,composed:!0,detail:v});t.dispatchEvent(b),this.preventDefault&&r.preventDefault(),this.stopPropagation&&r.stopPropagation()}cancel(t,n,s){if(this.isActive){const r=t??this.element;this.emitPanEvent(r,"cancel",n,s,this.state.lastCentroid),this.emitPanEvent(r,"end",n,s,this.state.lastCentroid)}this.resetState()}}class _k extends Cu{state={startDistance:0,lastDistance:0,lastScale:1,lastTime:0,velocity:0,totalScale:1,deltaScale:0};constructor(t){super(Ke({},t,{minPointers:t.minPointers??2})),this.threshold=t.threshold??0}clone(t){return new _k(Ke({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}destroy(){this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t)}resetState(){this.isActive=!1,this.state=Ke({},this.state,{startDistance:0,lastDistance:0,lastScale:1,lastTime:0,velocity:0,deltaScale:0})}handlePointerEvent=(t,n)=>{const s=Array.from(t.values()),r=this.getTargetElement(n);if(!r)return;if(this.shouldPreventGesture(r,n.pointerType)){this.isActive&&(this.emitPinchEvent(r,"cancel",s,n),this.resetState());return}const i=this.getRelevantPointers(s,r);switch(n.type){case"pointerdown":if(i.length>=2&&!this.isActive){const l=XC(i);this.state.startDistance=l,this.state.lastDistance=l,this.state.lastTime=n.timeStamp,this.originalTarget=r}break;case"pointermove":if(this.state.startDistance&&this.isWithinPointerCount(i,n.pointerType)){const l=XC(i),o=Math.abs(l-this.state.lastDistance);if(o!==0&&o>=this.threshold){const c=this.state.startDistance?l/this.state.startDistance:1,d=c/this.state.lastScale;this.state.totalScale*=d;const u=(n.timeStamp-this.state.lastTime)/1e3;if(this.state.lastDistance){const p=(l-this.state.lastDistance)/u;this.state.velocity=Number.isNaN(p)?0:p}this.state.lastDistance=l,this.state.deltaScale=c-this.state.lastScale,this.state.lastScale=c,this.state.lastTime=n.timeStamp,this.isActive?this.emitPinchEvent(r,"ongoing",i,n):(this.isActive=!0,this.emitPinchEvent(r,"start",i,n),this.emitPinchEvent(r,"ongoing",i,n))}}break;case"pointerup":case"pointercancel":case"forceCancel":if(this.isActive){const l=i.filter(o=>o.type!=="pointerup"&&o.type!=="pointercancel");if(!this.isWithinPointerCount(l,n.pointerType))n.type==="pointercancel"&&this.emitPinchEvent(r,"cancel",i,n),this.emitPinchEvent(r,"end",i,n),this.resetState();else if(l.length>=2){const o=XC(l);this.state.startDistance=o/this.state.lastScale}}break}};emitPinchEvent(t,n,s,r){const i=xo(s),l=this.state.lastDistance,o=this.state.lastScale,c=this.gesturesRegistry.getActiveGestures(t),d={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:n,pointers:s,timeStamp:r.timeStamp,scale:o,deltaScale:this.state.deltaScale,totalScale:this.state.totalScale,distance:l,velocity:this.state.velocity,activeGestures:c,direction:zce(this.state.velocity),customData:this.customData};this.preventDefault&&r.preventDefault(),this.stopPropagation&&r.stopPropagation();const u=ti(this.name,n),f=new CustomEvent(u,{bubbles:!0,cancelable:!0,composed:!0,detail:d});t.dispatchEvent(f)}}class Pw extends Cu{state={startCentroid:null,lastPosition:null,timerId:null,startTime:0,pressThresholdReached:!1};constructor(t){super(t),this.duration=t.duration??500,this.maxDistance=t.maxDistance??10}clone(t){return new Pw(Ke({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,duration:this.duration,maxDistance:this.maxDistance,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}destroy(){this.clearPressTimer(),this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t),this.duration=t.duration??this.duration,this.maxDistance=t.maxDistance??this.maxDistance}resetState(){this.clearPressTimer(),this.isActive=!1,this.state=Ke({},this.state,{startCentroid:null,lastPosition:null,timerId:null,startTime:0,pressThresholdReached:!1})}clearPressTimer(){this.state.timerId!==null&&(clearTimeout(this.state.timerId),this.state.timerId=null)}handlePointerEvent=(t,n)=>{const s=Array.from(t.values());if(n.type==="forceCancel"){this.cancelPress(n.target,s,n);return}const r=this.getTargetElement(n);if(!r)return;if(this.shouldPreventGesture(r,n.pointerType)){this.isActive&&this.cancelPress(r,s,n);return}const i=this.getRelevantPointers(s,r);if(!this.isWithinPointerCount(i,n.pointerType)){this.isActive&&this.cancelPress(r,i,n);return}switch(n.type){case"pointerdown":!this.isActive&&!this.state.startCentroid&&(this.state.startCentroid=xo(i),this.state.lastPosition=Ke({},this.state.startCentroid),this.state.startTime=n.timeStamp,this.isActive=!0,this.originalTarget=r,this.clearPressTimer(),this.state.timerId=setTimeout(()=>{if(this.isActive&&this.state.startCentroid){this.state.pressThresholdReached=!0;const l=this.state.lastPosition;this.emitPressEvent(r,"start",i,n,l),this.emitPressEvent(r,"ongoing",i,n,l)}},this.duration));break;case"pointermove":if(this.isActive&&this.state.startCentroid){const l=xo(i);this.state.lastPosition=l;const o=l.x-this.state.startCentroid.x,c=l.y-this.state.startCentroid.y;Math.sqrt(o*o+c*c)>this.maxDistance&&this.cancelPress(r,i,n)}break;case"pointerup":if(this.isActive){if(this.state.pressThresholdReached){const l=this.state.lastPosition||this.state.startCentroid;this.emitPressEvent(r,"end",i,n,l)}this.resetState()}break;case"pointercancel":case"forceCancel":this.cancelPress(r,i,n);break}};emitPressEvent(t,n,s,r,i){const l=this.gesturesRegistry.getActiveGestures(t),o=r.timeStamp-this.state.startTime,c={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:n,pointers:s,timeStamp:r.timeStamp,x:i.x,y:i.y,duration:o,activeGestures:l,customData:this.customData},d=ti(this.name,n),u=new CustomEvent(d,{bubbles:!0,cancelable:!0,composed:!0,detail:c});t.dispatchEvent(u),this.preventDefault&&r.preventDefault(),this.stopPropagation&&r.stopPropagation()}cancelPress(t,n,s){if(this.isActive&&this.state.pressThresholdReached){const r=this.state.lastPosition||this.state.startCentroid;this.emitPressEvent(t??this.element,"cancel",n,s,r),this.emitPressEvent(t??this.element,"end",n,s,r)}this.resetState()}}class Ak extends Cu{state={phase:"waitingForPress",dragTimeoutId:null};constructor(t){super(t),this.pressDuration=t.pressDuration??500,this.pressMaxDistance=t.pressMaxDistance??10,this.dragTimeout=t.dragTimeout??1e3,this.dragThreshold=t.dragThreshold??0,this.dragDirection=t.dragDirection||["up","down","left","right"],this.pressGesture=new Pw({name:`${this.name}-press`,duration:this.pressDuration,maxDistance:this.pressMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}),this.panGesture=new Yd({name:`${this.name}-pan`,minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)})}clone(t){return new Ak(Ke({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,pressDuration:this.pressDuration,pressMaxDistance:this.pressMaxDistance,dragTimeout:this.dragTimeout,dragThreshold:this.dragThreshold,dragDirection:[...this.dragDirection],requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}init(t,n,s,r){super.init(t,n,s,r),this.pressGesture.init(t,n,s,r),this.panGesture.init(t,n,s,r),this.element.addEventListener(this.pressGesture.name,this.pressHandler),this.element.addEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.addEventListener(this.panGesture.name,this.dragMoveHandler),this.element.addEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.addEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler)}destroy(){this.resetState(),this.pressGesture.destroy(),this.panGesture.destroy(),this.element.removeEventListener(this.pressGesture.name,this.pressHandler),this.element.removeEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.removeEventListener(this.panGesture.name,this.dragMoveHandler),this.element.removeEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.removeEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler),super.destroy()}updateOptions(t){super.updateOptions(t),this.pressDuration=t.pressDuration??this.pressDuration,this.pressMaxDistance=t.pressMaxDistance??this.pressMaxDistance,this.dragTimeout=t.dragTimeout??this.dragTimeout,this.dragThreshold=t.dragThreshold??this.dragThreshold,this.dragDirection=t.dragDirection||this.dragDirection,this.element.dispatchEvent(new CustomEvent(`${this.panGesture.name}ChangeOptions`,{detail:{minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}})),this.element.dispatchEvent(new CustomEvent(`${this.pressGesture.name}ChangeOptions`,{detail:{duration:this.pressDuration,maxDistance:this.pressMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}}))}resetState(){this.state.dragTimeoutId!==null&&clearTimeout(this.state.dragTimeoutId),this.restoreTouchAction(),this.isActive=!1,this.state={phase:"waitingForPress",dragTimeoutId:null}}handlePointerEvent(){}pressHandler=()=>{this.state.phase==="waitingForPress"&&(this.state.phase="pressDetected",this.setTouchAction(),this.state.dragTimeoutId=setTimeout(()=>{this.resetState()},this.dragTimeout))};dragStartHandler=t=>{this.state.phase==="pressDetected"&&(this.state.dragTimeoutId!==null&&(clearTimeout(this.state.dragTimeoutId),this.state.dragTimeoutId=null),this.restoreTouchAction(),this.state.phase="dragging",this.isActive=!0,this.element.dispatchEvent(new CustomEvent(ti(this.name,t.detail.phase),t)))};dragMoveHandler=t=>{this.state.phase==="dragging"&&this.element.dispatchEvent(new CustomEvent(ti(this.name,t.detail.phase),t))};dragEndHandler=t=>{this.state.phase==="dragging"&&(this.resetState(),this.element.dispatchEvent(new CustomEvent(ti(this.name,t.detail.phase),t)))};setTouchAction(){this.element.addEventListener("touchstart",wc,{passive:!1}),this.element.addEventListener("touchmove",wc,{passive:!1}),this.element.addEventListener("touchend",wc,{passive:!1})}restoreTouchAction(){this.element.removeEventListener("touchstart",wc),this.element.removeEventListener("touchmove",wc),this.element.removeEventListener("touchend",wc)}}class Wg extends Cu{state={startCentroid:null,currentTapCount:0,lastTapTime:0,lastPosition:null};constructor(t){super(t),this.maxDistance=t.maxDistance??10,this.taps=t.taps??1}clone(t){return new Wg(Ke({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,maxDistance:this.maxDistance,taps:this.taps,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}destroy(){this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t),this.maxDistance=t.maxDistance??this.maxDistance,this.taps=t.taps??this.taps}resetState(){this.isActive=!1,this.state={startCentroid:null,currentTapCount:0,lastTapTime:0,lastPosition:null}}handlePointerEvent=(t,n)=>{const s=Array.from(t.values()),r=this.getTargetElement(n);if(!r)return;const i=this.getRelevantPointers(s,r);if(this.shouldPreventGesture(r,n.pointerType)||!this.isWithinPointerCount(i,n.pointerType)){this.isActive&&this.cancelTap(r,i,n);return}switch(n.type){case"pointerdown":this.isActive||(this.state.startCentroid=xo(i),this.state.lastPosition=Ke({},this.state.startCentroid),this.isActive=!0,this.originalTarget=r);break;case"pointermove":if(this.isActive&&this.state.startCentroid){const l=xo(i);this.state.lastPosition=l;const o=l.x-this.state.startCentroid.x,c=l.y-this.state.startCentroid.y;Math.sqrt(o*o+c*c)>this.maxDistance&&this.cancelTap(r,i,n)}break;case"pointerup":if(this.isActive){this.state.currentTapCount+=1;const l=this.state.lastPosition||this.state.startCentroid;if(!l){this.cancelTap(r,i,n);return}this.state.currentTapCount>=this.taps?(this.fireTapEvent(r,i,n,l),this.resetState()):(this.state.lastTapTime=n.timeStamp,this.isActive=!1,this.state.startCentroid=null,setTimeout(()=>{this.state&&this.state.currentTapCount>0&&this.state.currentTapCount<this.taps&&(this.state.currentTapCount=0)},300))}break;case"pointercancel":case"forceCancel":this.cancelTap(r,i,n);break}};fireTapEvent(t,n,s,r){const i=this.gesturesRegistry.getActiveGestures(t),l={gestureName:this.name,centroid:r,target:s.target,srcEvent:s,phase:"end",pointers:n,timeStamp:s.timeStamp,x:r.x,y:r.y,tapCount:this.state.currentTapCount,activeGestures:i,customData:this.customData},o=new CustomEvent(this.name,{bubbles:!0,cancelable:!0,composed:!0,detail:l});t.dispatchEvent(o),this.preventDefault&&s.preventDefault(),this.stopPropagation&&s.stopPropagation()}cancelTap(t,n,s){if(this.state.startCentroid||this.state.lastPosition){const r=this.state.lastPosition||this.state.startCentroid,i=this.gesturesRegistry.getActiveGestures(t),l={gestureName:this.name,centroid:r,target:s.target,srcEvent:s,phase:"cancel",pointers:n,timeStamp:s.timeStamp,x:r.x,y:r.y,tapCount:this.state.currentTapCount,activeGestures:i,customData:this.customData},o=ti(this.name,"cancel"),c=new CustomEvent(o,{bubbles:!0,cancelable:!0,composed:!0,detail:l});t.dispatchEvent(c)}this.resetState()}}class Ek extends Cu{state={phase:"waitingForTap",dragTimeoutId:null};constructor(t){super(t),this.tapMaxDistance=t.tapMaxDistance??10,this.dragTimeout=t.dragTimeout??1e3,this.dragThreshold=t.dragThreshold??0,this.dragDirection=t.dragDirection||["up","down","left","right"],this.tapGesture=new Wg({name:`${this.name}-tap`,maxDistance:this.tapMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}),this.panGesture=new Yd({name:`${this.name}-pan`,minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)})}clone(t){return new Ek(Ke({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,tapMaxDistance:this.tapMaxDistance,dragTimeout:this.dragTimeout,dragThreshold:this.dragThreshold,dragDirection:[...this.dragDirection],requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}init(t,n,s,r){super.init(t,n,s,r),this.tapGesture.init(t,n,s,r),this.panGesture.init(t,n,s,r),this.element.addEventListener(this.tapGesture.name,this.tapHandler),this.element.addEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.addEventListener(this.panGesture.name,this.dragMoveHandler),this.element.addEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.addEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler)}destroy(){this.resetState(),this.tapGesture.destroy(),this.panGesture.destroy(),this.element.removeEventListener(this.tapGesture.name,this.tapHandler),this.element.removeEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.removeEventListener(this.panGesture.name,this.dragMoveHandler),this.element.removeEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.removeEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler),super.destroy()}updateOptions(t){super.updateOptions(t),this.tapMaxDistance=t.tapMaxDistance??this.tapMaxDistance,this.dragTimeout=t.dragTimeout??this.dragTimeout,this.dragThreshold=t.dragThreshold??this.dragThreshold,this.dragDirection=t.dragDirection||this.dragDirection,this.element.dispatchEvent(new CustomEvent(`${this.panGesture.name}ChangeOptions`,{detail:{minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}})),this.element.dispatchEvent(new CustomEvent(`${this.tapGesture.name}ChangeOptions`,{detail:{maxDistance:this.tapMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}}))}resetState(){this.state.dragTimeoutId!==null&&clearTimeout(this.state.dragTimeoutId),this.restoreTouchAction(),this.isActive=!1,this.state={phase:"waitingForTap",dragTimeoutId:null}}handlePointerEvent(){}tapHandler=()=>{this.state.phase==="waitingForTap"&&(this.state.phase="tapDetected",this.setTouchAction(),this.state.dragTimeoutId=setTimeout(()=>{this.resetState()},this.dragTimeout))};dragStartHandler=t=>{this.state.phase==="tapDetected"&&(this.state.dragTimeoutId!==null&&(clearTimeout(this.state.dragTimeoutId),this.state.dragTimeoutId=null),this.restoreTouchAction(),this.state.phase="dragging",this.isActive=!0,this.element.dispatchEvent(new CustomEvent(ti(this.name,t.detail.phase),t)))};dragMoveHandler=t=>{this.state.phase==="dragging"&&this.element.dispatchEvent(new CustomEvent(ti(this.name,t.detail.phase),t))};dragEndHandler=t=>{this.state.phase==="dragging"&&(this.resetState(),this.element.dispatchEvent(new CustomEvent(ti(this.name,t.detail.phase),t)))};setTouchAction(){this.element.addEventListener("touchstart",wc,{passive:!1})}restoreTouchAction(){this.element.removeEventListener("touchstart",wc)}}class Db extends vH{state={totalDeltaX:0,totalDeltaY:0,totalDeltaZ:0};constructor(t){super(t),this.sensitivity=t.sensitivity??1,this.max=t.max??Number.MAX_SAFE_INTEGER,this.min=t.min??Number.MIN_SAFE_INTEGER,this.initialDelta=t.initialDelta??0,this.invert=t.invert??!1,this.state.totalDeltaX=this.initialDelta,this.state.totalDeltaY=this.initialDelta,this.state.totalDeltaZ=this.initialDelta}clone(t){return new Db(Ke({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,sensitivity:this.sensitivity,max:this.max,min:this.min,initialDelta:this.initialDelta,invert:this.invert,requiredKeys:[...this.requiredKeys],preventIf:[...this.preventIf]},t))}init(t,n,s,r){super.init(t,n,s,r),this.element.addEventListener("wheel",this.handleWheelEvent)}destroy(){this.element.removeEventListener("wheel",this.handleWheelEvent),this.resetState(),super.destroy()}resetState(){this.isActive=!1,this.state={totalDeltaX:0,totalDeltaY:0,totalDeltaZ:0}}updateOptions(t){super.updateOptions(t),this.sensitivity=t.sensitivity??this.sensitivity,this.max=t.max??this.max,this.min=t.min??this.min,this.initialDelta=t.initialDelta??this.initialDelta,this.invert=t.invert??this.invert}handleWheelEvent=t=>{if(this.shouldPreventGesture(this.element,"mouse"))return;const n=this.pointerManager.getPointers()||new Map,s=Array.from(n.values());this.state.totalDeltaX+=t.deltaX*this.sensitivity*(this.invert?-1:1),this.state.totalDeltaY+=t.deltaY*this.sensitivity*(this.invert?-1:1),this.state.totalDeltaZ+=t.deltaZ*this.sensitivity*(this.invert?-1:1),["totalDeltaX","totalDeltaY","totalDeltaZ"].forEach(r=>{this.state[r]<this.min&&(this.state[r]=this.min),this.state[r]>this.max&&(this.state[r]=this.max)}),this.emitWheelEvent(s,t)};emitWheelEvent(t,n){const s=t.length>0?xo(t):{x:n.clientX,y:n.clientY},r=this.gesturesRegistry.getActiveGestures(this.element),i={gestureName:this.name,centroid:s,target:n.target,srcEvent:n,phase:"ongoing",pointers:t,timeStamp:n.timeStamp,deltaX:n.deltaX*this.sensitivity*(this.invert?-1:1),deltaY:n.deltaY*this.sensitivity*(this.invert?-1:1),deltaZ:n.deltaZ*this.sensitivity*(this.invert?-1:1),deltaMode:n.deltaMode,totalDeltaX:this.state.totalDeltaX,totalDeltaY:this.state.totalDeltaY,totalDeltaZ:this.state.totalDeltaZ,activeGestures:r,customData:this.customData};this.preventDefault&&n.preventDefault(),this.stopPropagation&&n.stopPropagation();const l=ti(this.name,"ongoing"),o=new CustomEvent(l,{bubbles:!0,cancelable:!0,composed:!0,detail:i});this.element.dispatchEvent(o)}}const wm=e=>e.preventDefault(),Tk=({svgRef:e})=>{const t=h.useRef(null);h.useEffect(()=>{const r=e.current;t.current||(t.current=new Oce({gestures:[new Yd({name:"pan",threshold:0,maxPointers:1}),new Sk({name:"move",preventIf:["pan","zoomPinch","zoomPan"]}),new Wg({name:"tap",preventIf:["pan","zoomPinch","zoomPan"]}),new Pw({name:"quickPress",duration:50}),new Yd({name:"brush",threshold:0,maxPointers:1}),new Yd({name:"zoomPan",threshold:0,preventIf:["zoomTapAndDrag","zoomPressAndDrag"]}),new _k({name:"zoomPinch",threshold:5}),new Db({name:"zoomTurnWheel",sensitivity:.01,initialDelta:1}),new Db({name:"panTurnWheel",sensitivity:.5}),new Ek({name:"zoomTapAndDrag",dragThreshold:10}),new Ak({name:"zoomPressAndDrag",dragThreshold:10,preventIf:["zoomPinch"]}),new Wg({name:"zoomDoubleTapReset",taps:2})]}));const i=t.current;if(!(!r||!i))return i.registerElement(["pan","move","zoomPinch","zoomPan","zoomTurnWheel","panTurnWheel","tap","quickPress","zoomTapAndDrag","zoomPressAndDrag","zoomDoubleTapReset","brush"],r),()=>{i.unregisterAllGestures(r)}},[e,t]);const n=h.useCallback((r,i,l)=>{const o=e.current;return o?.addEventListener(r,i,l),{cleanup:()=>o?.removeEventListener(r,i)}},[e]),s=h.useCallback((r,i)=>{const l=e.current,o=t.current;!o||!l||o.setGestureOptions(r,l,i??{})},[e,t]);return h.useEffect(()=>{const r=e.current;return r?.addEventListener("gesturestart",wm),r?.addEventListener("gesturechange",wm),r?.addEventListener("gestureend",wm),()=>{r?.removeEventListener("gesturestart",wm),r?.removeEventListener("gesturechange",wm),r?.removeEventListener("gestureend",wm)}},[e]),{instance:{addInteractionListener:n,updateZoomInteractionListeners:s}}};Tk.params={};Tk.getInitialState=()=>({});const Uce=[jk,Nk,Tw,Lw,Tk,Aw],Fce=["apiRef"],Bce=e=>{let{plugins:t}=e,n=ca(e.props,Fce);const s={};t.forEach(l=>{Object.assign(s,l.params)});const r={};return Object.keys(n).forEach(l=>{const o=n[l];s[l]&&(r[l]=o)}),t.reduce((l,o)=>o.getDefaultizedParams?o.getDefaultizedParams({params:l}):l,r)};let oI=0;function Hce(e,t,n){const s=jw(),r=h.useMemo(()=>[...Uce,...e],[e]),i=Bce({plugins:r,props:t});i.id=i.id??s;const o=h.useRef({}).current,c=Wce(t.apiRef),d=h.useRef(null),u=h.useRef(null),f=h.useRef(null);if(f.current==null){oI+=1;const v={cacheKey:{id:oI}};r.forEach(w=>{w.getInitialState&&Object.assign(v,w.getInitialState(i,v,n))}),f.current=new wk(v)}const p=v=>{const w=v({instance:o,params:i,plugins:r,store:f.current,svgRef:u,chartRootRef:d,seriesConfig:n});w.publicAPI&&Object.assign(c.current,w.publicAPI),w.instance&&Object.assign(o,w.instance)};return r.forEach(p),{contextValue:h.useMemo(()=>({store:f.current,publicAPI:c.current,instance:o,svgRef:u,chartRootRef:d}),[o,c])}}function Gce(e){return e.current==null&&(e.current={}),e}function Wce(e){const t=h.useRef({});return e?Gce(e):t}const wH=h.createContext(null);const NH=()=>{},jH=4,CH=20+2*jH,Vce=40+2*jH,qce="hover",iy={minStart:0,maxEnd:100,step:5,minSpan:10,maxSpan:100,panning:!0,filterMode:"keep",reverse:!1,slider:{enabled:!1,preview:!1,size:CH,showTooltip:qce}},kk=(e,t,n,s)=>{if(e)return e===!0?Ke({axisId:t,axisDirection:n},iy,{reverse:s??!1}):Ke({axisId:t,axisDirection:n},iy,{reverse:s??!1},e,{slider:Ke({},iy.slider,{size:e.slider?.preview??iy.slider.preview?Vce:CH},e.slider)})};function SH(e,t){const n={top:0,bottom:0,none:0};return(e&&e.length>0?e:[{id:Ew,scaleType:"linear"}]).map((i,l)=>{const o=i.dataKey,c=l===0?"bottom":"none",d=i.position??c,u=cce+(i.label?gH:0),f=i.id??`defaultized-x-axis-${l}`,p=Ke({offset:n[d]},i,{id:f,position:d,height:i.height??u,zoom:kk(i.zoom,f,"x",i.reverse)});if(d!=="none"&&(n[d]+=p.height,p.zoom?.slider.enabled&&(n[d]+=p.zoom.slider.size)),o===void 0||i.data!==void 0)return p;if(t===void 0)throw new Error("MUI X Charts: x-axis uses `dataKey` but no `dataset` is provided.");return Ke({},p,{data:t.map(x=>x[o])})})}function _H(e,t){const n={right:0,left:0,none:0};return(e&&e.length>0?e:[{id:ice,scaleType:"linear"}]).map((i,l)=>{const o=i.dataKey,c=l===0?"left":"none",d=i.position??c,u=oce+(i.label?gH:0),f=i.id??`defaultized-y-axis-${l}`,p=Ke({offset:n[d]},i,{id:f,position:d,width:i.width??u,zoom:kk(i.zoom,f,"y",i.reverse)});if(d!=="none"&&(n[d]+=p.width,p.zoom?.slider.enabled&&(n[d]+=p.zoom.slider.size)),o===void 0||i.data!==void 0)return p;if(t===void 0)throw new Error("MUI X Charts: y-axis uses `dataKey` but no `dataset` is provided.");return Ke({},p,{data:t.map(x=>x[o])})})}function Yce(e,t){return function(s,r){if(r.location==="tick"){const i=r.scale.domain();return i[0]===i[1]?r.scale.tickFormat(1)(s):r.scale.tickFormat(e)(s)}return r.location==="zoom-slider-tooltip"?t.tickFormat(2)(s):`${s}`}}function Su(e){return e.scaleType==="band"}function _u(e){return e.scaleType==="point"}function Kce(e){return e.scaleType!=="point"&&e.scaleType!=="band"}function Qce(e){return e.scaleType==="symlog"}function Bp(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Lk(e){let t=e,n=e;e.length===1&&(t=(l,o)=>e(l)-o,n=Xce(e));function s(l,o,c,d){for(c==null&&(c=0),d==null&&(d=l.length);c<d;){const u=c+d>>>1;n(l[u],o)<0?c=u+1:d=u}return c}function r(l,o,c,d){for(c==null&&(c=0),d==null&&(d=l.length);c<d;){const u=c+d>>>1;n(l[u],o)>0?d=u:c=u+1}return c}function i(l,o,c,d){c==null&&(c=0),d==null&&(d=l.length);const u=s(l,o,c,d-1);return u>c&&t(l[u-1],o)>-t(l[u],o)?u-1:u}return{left:s,center:i,right:r}}function Xce(e){return(t,n)=>Bp(e(t),n)}function AH(e){return e===null?NaN:+e}function*Zce(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const Jce=Lk(Bp),Hp=Jce.right;Lk(AH).center;class Ob extends Map{constructor(t,n=ade){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[s,r]of t)this.set(s,r)}get(t){return super.get(cI(this,t))}has(t){return super.has(cI(this,t))}set(t,n){return super.set(ede(this,t),n)}delete(t){return super.delete(tde(this,t))}}function cI({_intern:e,_key:t},n){const s=t(n);return e.has(s)?e.get(s):n}function ede({_intern:e,_key:t},n){const s=t(n);return e.has(s)?e.get(s):(e.set(s,n),n)}function tde({_intern:e,_key:t},n){const s=t(n);return e.has(s)&&(n=e.get(n),e.delete(s)),n}function ade(e){return e!==null&&typeof e=="object"?e.valueOf():e}var XA=Math.sqrt(50),ZA=Math.sqrt(10),JA=Math.sqrt(2);function eE(e,t,n){var s,r=-1,i,l,o;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((s=t<e)&&(i=e,e=t,t=i),(o=EH(e,t,n))===0||!isFinite(o))return[];if(o>0){let c=Math.round(e/o),d=Math.round(t/o);for(c*o<e&&++c,d*o>t&&--d,l=new Array(i=d-c+1);++r<i;)l[r]=(c+r)*o}else{o=-o;let c=Math.round(e*o),d=Math.round(t*o);for(c/o<e&&++c,d/o>t&&--d,l=new Array(i=d-c+1);++r<i;)l[r]=(c+r)/o}return s&&l.reverse(),l}function EH(e,t,n){var s=(t-e)/Math.max(0,n),r=Math.floor(Math.log(s)/Math.LN10),i=s/Math.pow(10,r);return r>=0?(i>=XA?10:i>=ZA?5:i>=JA?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(i>=XA?10:i>=ZA?5:i>=JA?2:1)}function tE(e,t,n){var s=Math.abs(t-e)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(s)/Math.LN10)),i=s/r;return i>=XA?r*=10:i>=ZA?r*=5:i>=JA&&(r*=2),t<e?-r:r}function dI(e,t){let n;for(const s of e)s!=null&&(n<s||n===void 0&&s>=s)&&(n=s);return n}function uI(e,t){let n;for(const s of e)s!=null&&(n>s||n===void 0&&s>=s)&&(n=s);return n}function TH(e,t,n=0,s=e.length-1,r=Bp){for(;s>n;){if(s-n>600){const c=s-n+1,d=t-n+1,u=Math.log(c),f=.5*Math.exp(2*u/3),p=.5*Math.sqrt(u*f*(c-f)/c)*(d-c/2<0?-1:1),x=Math.max(n,Math.floor(t-d*f/c+p)),v=Math.min(s,Math.floor(t+(c-d)*f/c+p));TH(e,t,x,v,r)}const i=e[t];let l=n,o=s;for(Bh(e,n,t),r(e[s],i)>0&&Bh(e,n,s);l<o;){for(Bh(e,l,o),++l,--o;r(e[l],i)<0;)++l;for(;r(e[o],i)>0;)--o}r(e[n],i)===0?Bh(e,n,o):(++o,Bh(e,o,s)),o<=t&&(n=o+1),t<=o&&(s=o-1)}return e}function Bh(e,t,n){const s=e[t];e[t]=e[n],e[n]=s}function nde(e,t,n){if(e=Float64Array.from(Zce(e)),!!(s=e.length)){if((t=+t)<=0||s<2)return uI(e);if(t>=1)return dI(e);var s,r=(s-1)*t,i=Math.floor(r),l=dI(TH(e,i).subarray(0,i+1)),o=uI(e.subarray(i+1));return l+(o-l)*(r-i)}}function sde(e,t,n=AH){if(s=e.length){if((t=+t)<=0||s<2)return+n(e[0],0,e);if(t>=1)return+n(e[s-1],s-1,e);var s,r=(s-1)*t,i=Math.floor(r),l=+n(e[i],i,e),o=+n(e[i+1],i+1,e);return l+(o-l)*(r-i)}}function kH(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var s=-1,r=Math.max(0,Math.ceil((t-e)/n))|0,i=new Array(r);++s<r;)i[s]=e+s*n;return i}function fi(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Oo(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const aE=Symbol("implicit");function Vg(){var e=new Ob,t=[],n=[],s=aE;function r(i){let l=e.get(i);if(l===void 0){if(s!==aE)return s;e.set(i,l=t.push(i)-1)}return n[l%n.length]}return r.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new Ob;for(const l of i)e.has(l)||e.set(l,t.push(l)-1);return r},r.range=function(i){return arguments.length?(n=Array.from(i),r):n.slice()},r.unknown=function(i){return arguments.length?(s=i,r):s},r.copy=function(){return Vg(t,n).unknown(s)},fi.apply(r,arguments),r}function Pk(){var e=Vg().unknown(void 0),t=e.domain,n=e.range,s=0,r=1,i,l,o=!1,c=0,d=0,u=.5;delete e.unknown;function f(){var p=t().length,x=r<s,v=x?r:s,w=x?s:r;i=(w-v)/Math.max(1,p-c+d*2),o&&(i=Math.floor(i)),v+=(w-v-i*(p-c))*u,l=i*(1-c),o&&(v=Math.round(v),l=Math.round(l));var b=kH(p).map(function(C){return v+i*C});return n(x?b.reverse():b)}return e.domain=function(p){return arguments.length?(t(p),f()):t()},e.range=function(p){return arguments.length?([s,r]=p,s=+s,r=+r,f()):[s,r]},e.rangeRound=function(p){return[s,r]=p,s=+s,r=+r,o=!0,f()},e.bandwidth=function(){return l},e.step=function(){return i},e.round=function(p){return arguments.length?(o=!!p,f()):o},e.padding=function(p){return arguments.length?(c=Math.min(1,d=+p),f()):c},e.paddingInner=function(p){return arguments.length?(c=Math.min(1,p),f()):c},e.paddingOuter=function(p){return arguments.length?(d=+p,f()):d},e.align=function(p){return arguments.length?(u=Math.max(0,Math.min(1,p)),f()):u},e.copy=function(){return Pk(t(),[s,r]).round(o).paddingInner(c).paddingOuter(d).align(u)},fi.apply(f(),arguments)}function LH(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return LH(t())},e}function rde(){return LH(Pk.apply(null,arguments).paddingInner(1))}function Dk(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function PH(e,t){var n=Object.create(e.prototype);for(var s in t)n[s]=t[s];return n}function Gp(){}var qg=.7,Mb=1/qg,Ym="\\s*([+-]?\\d+)\\s*",Yg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",dl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ide=/^#([0-9a-f]{3,8})$/,lde=new RegExp(`^rgb\\(${Ym},${Ym},${Ym}\\)$`),ode=new RegExp(`^rgb\\(${dl},${dl},${dl}\\)$`),cde=new RegExp(`^rgba\\(${Ym},${Ym},${Ym},${Yg}\\)$`),dde=new RegExp(`^rgba\\(${dl},${dl},${dl},${Yg}\\)$`),ude=new RegExp(`^hsl\\(${Yg},${dl},${dl}\\)$`),mde=new RegExp(`^hsla\\(${Yg},${dl},${dl},${Yg}\\)$`),mI={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Dk(Gp,Kg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:fI,formatHex:fI,formatHex8:fde,formatHsl:hde,formatRgb:hI,toString:hI});function fI(){return this.rgb().formatHex()}function fde(){return this.rgb().formatHex8()}function hde(){return DH(this).formatHsl()}function hI(){return this.rgb().formatRgb()}function Kg(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ide.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?gI(t):n===3?new Js(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?ly(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?ly(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=lde.exec(e))?new Js(t[1],t[2],t[3],1):(t=ode.exec(e))?new Js(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=cde.exec(e))?ly(t[1],t[2],t[3],t[4]):(t=dde.exec(e))?ly(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ude.exec(e))?yI(t[1],t[2]/100,t[3]/100,1):(t=mde.exec(e))?yI(t[1],t[2]/100,t[3]/100,t[4]):mI.hasOwnProperty(e)?gI(mI[e]):e==="transparent"?new Js(NaN,NaN,NaN,0):null}function gI(e){return new Js(e>>16&255,e>>8&255,e&255,1)}function ly(e,t,n,s){return s<=0&&(e=t=n=NaN),new Js(e,t,n,s)}function gde(e){return e instanceof Gp||(e=Kg(e)),e?(e=e.rgb(),new Js(e.r,e.g,e.b,e.opacity)):new Js}function nE(e,t,n,s){return arguments.length===1?gde(e):new Js(e,t,n,s??1)}function Js(e,t,n,s){this.r=+e,this.g=+t,this.b=+n,this.opacity=+s}Dk(Js,nE,PH(Gp,{brighter(e){return e=e==null?Mb:Math.pow(Mb,e),new Js(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?qg:Math.pow(qg,e),new Js(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Js(Kd(this.r),Kd(this.g),Kd(this.b),Ib(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:pI,formatHex:pI,formatHex8:pde,formatRgb:xI,toString:xI}));function pI(){return`#${zd(this.r)}${zd(this.g)}${zd(this.b)}`}function pde(){return`#${zd(this.r)}${zd(this.g)}${zd(this.b)}${zd((isNaN(this.opacity)?1:this.opacity)*255)}`}function xI(){const e=Ib(this.opacity);return`${e===1?"rgb(":"rgba("}${Kd(this.r)}, ${Kd(this.g)}, ${Kd(this.b)}${e===1?")":`, ${e})`}`}function Ib(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Kd(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function zd(e){return e=Kd(e),(e<16?"0":"")+e.toString(16)}function yI(e,t,n,s){return s<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new _i(e,t,n,s)}function DH(e){if(e instanceof _i)return new _i(e.h,e.s,e.l,e.opacity);if(e instanceof Gp||(e=Kg(e)),!e)return new _i;if(e instanceof _i)return e;e=e.rgb();var t=e.r/255,n=e.g/255,s=e.b/255,r=Math.min(t,n,s),i=Math.max(t,n,s),l=NaN,o=i-r,c=(i+r)/2;return o?(t===i?l=(n-s)/o+(n<s)*6:n===i?l=(s-t)/o+2:l=(t-n)/o+4,o/=c<.5?i+r:2-i-r,l*=60):o=c>0&&c<1?0:l,new _i(l,o,c,e.opacity)}function xde(e,t,n,s){return arguments.length===1?DH(e):new _i(e,t,n,s??1)}function _i(e,t,n,s){this.h=+e,this.s=+t,this.l=+n,this.opacity=+s}Dk(_i,xde,PH(Gp,{brighter(e){return e=e==null?Mb:Math.pow(Mb,e),new _i(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?qg:Math.pow(qg,e),new _i(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,s=n+(n<.5?n:1-n)*t,r=2*n-s;return new Js(ZC(e>=240?e-240:e+120,r,s),ZC(e,r,s),ZC(e<120?e+240:e-120,r,s),this.opacity)},clamp(){return new _i(bI(this.h),oy(this.s),oy(this.l),Ib(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ib(this.opacity);return`${e===1?"hsl(":"hsla("}${bI(this.h)}, ${oy(this.s)*100}%, ${oy(this.l)*100}%${e===1?")":`, ${e})`}`}}));function bI(e){return e=(e||0)%360,e<0?e+360:e}function oy(e){return Math.max(0,Math.min(1,e||0))}function ZC(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ok=e=>()=>e;function yde(e,t){return function(n){return e+n*t}}function bde(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(s){return Math.pow(e+s*t,n)}}function vde(e){return(e=+e)==1?OH:function(t,n){return n-t?bde(t,n,e):Ok(isNaN(t)?n:t)}}function OH(e,t){var n=t-e;return n?yde(e,n):Ok(isNaN(e)?t:e)}const vI=(function e(t){var n=vde(t);function s(r,i){var l=n((r=nE(r)).r,(i=nE(i)).r),o=n(r.g,i.g),c=n(r.b,i.b),d=OH(r.opacity,i.opacity);return function(u){return r.r=l(u),r.g=o(u),r.b=c(u),r.opacity=d(u),r+""}}return s.gamma=e,s})(1);function wde(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,s=t.slice(),r;return function(i){for(r=0;r<n;++r)s[r]=e[r]*(1-i)+t[r]*i;return s}}function Nde(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function jde(e,t){var n=t?t.length:0,s=e?Math.min(n,e.length):0,r=new Array(s),i=new Array(n),l;for(l=0;l<s;++l)r[l]=Pf(e[l],t[l]);for(;l<n;++l)i[l]=t[l];return function(o){for(l=0;l<s;++l)i[l]=r[l](o);return i}}function Mk(e,t){var n=new Date;return e=+e,t=+t,function(s){return n.setTime(e*(1-s)+t*s),n}}function nf(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Cde(e,t){var n={},s={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=Pf(e[r],t[r]):s[r]=t[r];return function(i){for(r in n)s[r]=n[r](i);return s}}var sE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,JC=new RegExp(sE.source,"g");function Sde(e){return function(){return e}}function _de(e){return function(t){return e(t)+""}}function Ik(e,t){var n=sE.lastIndex=JC.lastIndex=0,s,r,i,l=-1,o=[],c=[];for(e=e+"",t=t+"";(s=sE.exec(e))&&(r=JC.exec(t));)(i=r.index)>n&&(i=t.slice(n,i),o[l]?o[l]+=i:o[++l]=i),(s=s[0])===(r=r[0])?o[l]?o[l]+=r:o[++l]=r:(o[++l]=null,c.push({i:l,x:nf(s,r)})),n=JC.lastIndex;return n<t.length&&(i=t.slice(n),o[l]?o[l]+=i:o[++l]=i),o.length<2?c[0]?_de(c[0].x):Sde(t):(t=c.length,function(d){for(var u=0,f;u<t;++u)o[(f=c[u]).i]=f.x(d);return o.join("")})}function Pf(e,t){var n=typeof t,s;return t==null||n==="boolean"?Ok(t):(n==="number"?nf:n==="string"?(s=Kg(t))?(t=s,vI):Ik:t instanceof Kg?vI:t instanceof Date?Mk:Nde(t)?wde:Array.isArray(t)?jde:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Cde:nf)(e,t)}function $k(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Ade(e,t){t===void 0&&(t=e,e=Pf);for(var n=0,s=t.length-1,r=t[0],i=new Array(s<0?0:s);n<s;)i[n]=e(r,r=t[++n]);return function(l){var o=Math.max(0,Math.min(s-1,Math.floor(l*=s)));return i[o](l-o)}}function Ede(e){return function(){return e}}function $b(e){return+e}var wI=[0,1];function Ms(e){return e}function rE(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Ede(isNaN(t)?NaN:.5)}function Tde(e,t){var n;return e>t&&(n=e,e=t,t=n),function(s){return Math.max(e,Math.min(t,s))}}function kde(e,t,n){var s=e[0],r=e[1],i=t[0],l=t[1];return r<s?(s=rE(r,s),i=n(l,i)):(s=rE(s,r),i=n(i,l)),function(o){return i(s(o))}}function Lde(e,t,n){var s=Math.min(e.length,t.length)-1,r=new Array(s),i=new Array(s),l=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<s;)r[l]=rE(e[l],e[l+1]),i[l]=n(t[l],t[l+1]);return function(o){var c=Hp(e,o,1,s)-1;return i[c](r[c](o))}}function Wp(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Dw(){var e=wI,t=wI,n=Pf,s,r,i,l=Ms,o,c,d;function u(){var p=Math.min(e.length,t.length);return l!==Ms&&(l=Tde(e[0],e[p-1])),o=p>2?Lde:kde,c=d=null,f}function f(p){return p==null||isNaN(p=+p)?i:(c||(c=o(e.map(s),t,n)))(s(l(p)))}return f.invert=function(p){return l(r((d||(d=o(t,e.map(s),nf)))(p)))},f.domain=function(p){return arguments.length?(e=Array.from(p,$b),u()):e.slice()},f.range=function(p){return arguments.length?(t=Array.from(p),u()):t.slice()},f.rangeRound=function(p){return t=Array.from(p),n=$k,u()},f.clamp=function(p){return arguments.length?(l=p?!0:Ms,u()):l!==Ms},f.interpolate=function(p){return arguments.length?(n=p,u()):n},f.unknown=function(p){return arguments.length?(i=p,f):i},function(p,x){return s=p,r=x,u()}}function Rk(){return Dw()(Ms,Ms)}function Pde(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Rb(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,s=e.slice(0,n);return[s.length>1?s[0]+s.slice(2):s,+e.slice(n+1)]}function sf(e){return e=Rb(Math.abs(e)),e?e[1]:NaN}function Dde(e,t){return function(n,s){for(var r=n.length,i=[],l=0,o=e[0],c=0;r>0&&o>0&&(c+o+1>s&&(o=Math.max(1,s-c)),i.push(n.substring(r-=o,r+o)),!((c+=o+1)>s));)o=e[l=(l+1)%e.length];return i.reverse().join(t)}}function Ode(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Mde=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Qg(e){if(!(t=Mde.exec(e)))throw new Error("invalid format: "+e);var t;return new zk({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Qg.prototype=zk.prototype;function zk(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}zk.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Ide(e){e:for(var t=e.length,n=1,s=-1,r;n<t;++n)switch(e[n]){case".":s=r=n;break;case"0":s===0&&(s=n),r=n;break;default:if(!+e[n])break e;s>0&&(s=0);break}return s>0?e.slice(0,s)+e.slice(r+1):e}var MH;function $de(e,t){var n=Rb(e,t);if(!n)return e+"";var s=n[0],r=n[1],i=r-(MH=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,l=s.length;return i===l?s:i>l?s+new Array(i-l+1).join("0"):i>0?s.slice(0,i)+"."+s.slice(i):"0."+new Array(1-i).join("0")+Rb(e,Math.max(0,t+i-1))[0]}function NI(e,t){var n=Rb(e,t);if(!n)return e+"";var s=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+s:s.length>r+1?s.slice(0,r+1)+"."+s.slice(r+1):s+new Array(r-s.length+2).join("0")}const jI={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Pde,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>NI(e*100,t),r:NI,s:$de,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function CI(e){return e}var SI=Array.prototype.map,_I=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Rde(e){var t=e.grouping===void 0||e.thousands===void 0?CI:Dde(SI.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",s=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?CI:Ode(SI.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(f){f=Qg(f);var p=f.fill,x=f.align,v=f.sign,w=f.symbol,b=f.zero,C=f.width,N=f.comma,S=f.precision,A=f.trim,k=f.type;k==="n"?(N=!0,k="g"):jI[k]||(S===void 0&&(S=12),A=!0,k="g"),(b||p==="0"&&x==="=")&&(b=!0,p="0",x="=");var _=w==="$"?n:w==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",T=w==="$"?s:/[%p]/.test(k)?l:"",E=jI[k],I=/[defgprs%]/.test(k);S=S===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function z($){var P=_,O=T,B,Q,F;if(k==="c")O=E($)+O,$="";else{$=+$;var ee=$<0||1/$<0;if($=isNaN($)?c:E(Math.abs($),S),A&&($=Ide($)),ee&&+$==0&&v!=="+"&&(ee=!1),P=(ee?v==="("?v:o:v==="-"||v==="("?"":v)+P,O=(k==="s"?_I[8+MH/3]:"")+O+(ee&&v==="("?")":""),I){for(B=-1,Q=$.length;++B<Q;)if(F=$.charCodeAt(B),48>F||F>57){O=(F===46?r+$.slice(B+1):$.slice(B))+O,$=$.slice(0,B);break}}}N&&!b&&($=t($,1/0));var V=P.length+$.length+O.length,de=V<C?new Array(C-V+1).join(p):"";switch(N&&b&&($=t(de+$,de.length?C-O.length:1/0),de=""),x){case"<":$=P+$+O+de;break;case"=":$=P+de+$+O;break;case"^":$=de.slice(0,V=de.length>>1)+P+$+O+de.slice(V);break;default:$=de+P+$+O;break}return i($)}return z.toString=function(){return f+""},z}function u(f,p){var x=d((f=Qg(f),f.type="f",f)),v=Math.max(-8,Math.min(8,Math.floor(sf(p)/3)))*3,w=Math.pow(10,-v),b=_I[8+v/3];return function(C){return x(w*C)+b}}return{format:d,formatPrefix:u}}var cy,Uk,IH;zde({thousands:",",grouping:[3],currency:["$",""]});function zde(e){return cy=Rde(e),Uk=cy.format,IH=cy.formatPrefix,cy}function Ude(e){return Math.max(0,-sf(Math.abs(e)))}function Fde(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(sf(t)/3)))*3-sf(Math.abs(e)))}function Bde(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,sf(t)-sf(e))+1}function $H(e,t,n,s){var r=tE(e,t,n),i;switch(s=Qg(s??",f"),s.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return s.precision==null&&!isNaN(i=Fde(r,l))&&(s.precision=i),IH(s,l)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(i=Bde(r,Math.max(Math.abs(e),Math.abs(t))))&&(s.precision=i-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(i=Ude(r))&&(s.precision=i-(s.type==="%")*2);break}}return Uk(s)}function Qc(e){var t=e.domain;return e.ticks=function(n){var s=t();return eE(s[0],s[s.length-1],n??10)},e.tickFormat=function(n,s){var r=t();return $H(r[0],r[r.length-1],n??10,s)},e.nice=function(n){n==null&&(n=10);var s=t(),r=0,i=s.length-1,l=s[r],o=s[i],c,d,u=10;for(o<l&&(d=l,l=o,o=d,d=r,r=i,i=d);u-- >0;){if(d=EH(l,o,n),d===c)return s[r]=l,s[i]=o,t(s);if(d>0)l=Math.floor(l/d)*d,o=Math.ceil(o/d)*d;else if(d<0)l=Math.ceil(l*d)/d,o=Math.floor(o*d)/d;else break;c=d}return e},e}function Ow(){var e=Rk();return e.copy=function(){return Wp(e,Ow())},fi.apply(e,arguments),Qc(e)}function RH(e){var t;function n(s){return s==null||isNaN(s=+s)?t:s}return n.invert=n,n.domain=n.range=function(s){return arguments.length?(e=Array.from(s,$b),n):e.slice()},n.unknown=function(s){return arguments.length?(t=s,n):t},n.copy=function(){return RH(e).unknown(t)},e=arguments.length?Array.from(e,$b):[0,1],Qc(n)}function zH(e,t){e=e.slice();var n=0,s=e.length-1,r=e[n],i=e[s],l;return i<r&&(l=n,n=s,s=l,l=r,r=i,i=l),e[n]=t.floor(r),e[s]=t.ceil(i),e}function AI(e){return Math.log(e)}function EI(e){return Math.exp(e)}function Hde(e){return-Math.log(-e)}function Gde(e){return-Math.exp(-e)}function Wde(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Vde(e){return e===10?Wde:e===Math.E?Math.exp:t=>Math.pow(e,t)}function qde(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function TI(e){return(t,n)=>-e(-t,n)}function Fk(e){const t=e(AI,EI),n=t.domain;let s=10,r,i;function l(){return r=qde(s),i=Vde(s),n()[0]<0?(r=TI(r),i=TI(i),e(Hde,Gde)):e(AI,EI),t}return t.base=function(o){return arguments.length?(s=+o,l()):s},t.domain=function(o){return arguments.length?(n(o),l()):n()},t.ticks=o=>{const c=n();let d=c[0],u=c[c.length-1];const f=u<d;f&&([d,u]=[u,d]);let p=r(d),x=r(u),v,w;const b=o==null?10:+o;let C=[];if(!(s%1)&&x-p<b){if(p=Math.floor(p),x=Math.ceil(x),d>0){for(;p<=x;++p)for(v=1;v<s;++v)if(w=p<0?v/i(-p):v*i(p),!(w<d)){if(w>u)break;C.push(w)}}else for(;p<=x;++p)for(v=s-1;v>=1;--v)if(w=p>0?v/i(-p):v*i(p),!(w<d)){if(w>u)break;C.push(w)}C.length*2<b&&(C=eE(d,u,b))}else C=eE(p,x,Math.min(x-p,b)).map(i);return f?C.reverse():C},t.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=s===10?"s":","),typeof c!="function"&&(!(s%1)&&(c=Qg(c)).precision==null&&(c.trim=!0),c=Uk(c)),o===1/0)return c;const d=Math.max(1,s*o/t.ticks().length);return u=>{let f=u/i(Math.round(r(u)));return f*s<s-.5&&(f*=s),f<=d?c(u):""}},t.nice=()=>n(zH(n(),{floor:o=>i(Math.floor(r(o))),ceil:o=>i(Math.ceil(r(o)))})),t}function Xg(){const e=Fk(Dw()).domain([1,10]);return e.copy=()=>Wp(e,Xg()).base(e.base()),fi.apply(e,arguments),e}function kI(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function LI(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Bk(e){var t=1,n=e(kI(t),LI(t));return n.constant=function(s){return arguments.length?e(kI(t=+s),LI(t)):t},Qc(n)}function Hk(){var e=Bk(Dw());return e.copy=function(){return Wp(e,Hk()).constant(e.constant())},fi.apply(e,arguments)}function PI(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Yde(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Kde(e){return e<0?-e*e:e*e}function Gk(e){var t=e(Ms,Ms),n=1;function s(){return n===1?e(Ms,Ms):n===.5?e(Yde,Kde):e(PI(n),PI(1/n))}return t.exponent=function(r){return arguments.length?(n=+r,s()):n},Qc(t)}function Mw(){var e=Gk(Dw());return e.copy=function(){return Wp(e,Mw()).exponent(e.exponent())},fi.apply(e,arguments),e}function UH(){return Mw.apply(null,arguments).exponent(.5)}function DI(e){return Math.sign(e)*e*e}function Qde(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function FH(){var e=Rk(),t=[0,1],n=!1,s;function r(i){var l=Qde(e(i));return isNaN(l)?s:n?Math.round(l):l}return r.invert=function(i){return e.invert(DI(i))},r.domain=function(i){return arguments.length?(e.domain(i),r):e.domain()},r.range=function(i){return arguments.length?(e.range((t=Array.from(i,$b)).map(DI)),r):t.slice()},r.rangeRound=function(i){return r.range(i).round(!0)},r.round=function(i){return arguments.length?(n=!!i,r):n},r.clamp=function(i){return arguments.length?(e.clamp(i),r):e.clamp()},r.unknown=function(i){return arguments.length?(s=i,r):s},r.copy=function(){return FH(e.domain(),t).round(n).clamp(e.clamp()).unknown(s)},fi.apply(r,arguments),Qc(r)}function BH(){var e=[],t=[],n=[],s;function r(){var l=0,o=Math.max(1,t.length);for(n=new Array(o-1);++l<o;)n[l-1]=sde(e,l/o);return i}function i(l){return l==null||isNaN(l=+l)?s:t[Hp(n,l)]}return i.invertExtent=function(l){var o=t.indexOf(l);return o<0?[NaN,NaN]:[o>0?n[o-1]:e[0],o<n.length?n[o]:e[e.length-1]]},i.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let o of l)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(Bp),r()},i.range=function(l){return arguments.length?(t=Array.from(l),r()):t.slice()},i.unknown=function(l){return arguments.length?(s=l,i):s},i.quantiles=function(){return n.slice()},i.copy=function(){return BH().domain(e).range(t).unknown(s)},fi.apply(i,arguments)}function HH(){var e=0,t=1,n=1,s=[.5],r=[0,1],i;function l(c){return c!=null&&c<=c?r[Hp(s,c,0,n)]:i}function o(){var c=-1;for(s=new Array(n);++c<n;)s[c]=((c+1)*t-(c-n)*e)/(n+1);return l}return l.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,o()):[e,t]},l.range=function(c){return arguments.length?(n=(r=Array.from(c)).length-1,o()):r.slice()},l.invertExtent=function(c){var d=r.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,s[0]]:d>=n?[s[n-1],t]:[s[d-1],s[d]]},l.unknown=function(c){return arguments.length&&(i=c),l},l.thresholds=function(){return s.slice()},l.copy=function(){return HH().domain([e,t]).range(r).unknown(i)},fi.apply(Qc(l),arguments)}function Wk(){var e=[.5],t=[0,1],n,s=1;function r(i){return i!=null&&i<=i?t[Hp(e,i,0,s)]:n}return r.domain=function(i){return arguments.length?(e=Array.from(i),s=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(i){return arguments.length?(t=Array.from(i),s=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(i){var l=t.indexOf(i);return[e[l-1],e[l]]},r.unknown=function(i){return arguments.length?(n=i,r):n},r.copy=function(){return Wk().domain(e).range(t).unknown(n)},fi.apply(r,arguments)}const eS=new Date,tS=new Date;function Qn(e,t,n,s){function r(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return r.floor=i=>(e(i=new Date(+i)),i),r.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),r.round=i=>{const l=r(i),o=r.ceil(i);return i-l<o-i?l:o},r.offset=(i,l)=>(t(i=new Date(+i),l==null?1:Math.floor(l)),i),r.range=(i,l,o)=>{const c=[];if(i=r.ceil(i),o=o==null?1:Math.floor(o),!(i<l)||!(o>0))return c;let d;do c.push(d=new Date(+i)),t(i,o),e(i);while(d<i&&i<l);return c},r.filter=i=>Qn(l=>{if(l>=l)for(;e(l),!i(l);)l.setTime(l-1)},(l,o)=>{if(l>=l)if(o<0)for(;++o<=0;)for(;t(l,-1),!i(l););else for(;--o>=0;)for(;t(l,1),!i(l););}),n&&(r.count=(i,l)=>(eS.setTime(+i),tS.setTime(+l),e(eS),e(tS),Math.floor(n(eS,tS))),r.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?r.filter(s?l=>s(l)%i===0:l=>r.count(0,l)%i===0):r)),r}const zb=Qn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);zb.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Qn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):zb);zb.range;const ro=1e3,Jr=ro*60,io=Jr*60,yo=io*24,Vk=yo*7,OI=yo*30,aS=yo*365,Ud=Qn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ro)},(e,t)=>(t-e)/ro,e=>e.getUTCSeconds());Ud.range;const qk=Qn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ro)},(e,t)=>{e.setTime(+e+t*Jr)},(e,t)=>(t-e)/Jr,e=>e.getMinutes());qk.range;const Yk=Qn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Jr)},(e,t)=>(t-e)/Jr,e=>e.getUTCMinutes());Yk.range;const Kk=Qn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ro-e.getMinutes()*Jr)},(e,t)=>{e.setTime(+e+t*io)},(e,t)=>(t-e)/io,e=>e.getHours());Kk.range;const Qk=Qn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*io)},(e,t)=>(t-e)/io,e=>e.getUTCHours());Qk.range;const Vp=Qn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Jr)/yo,e=>e.getDate()-1);Vp.range;const Iw=Qn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/yo,e=>e.getUTCDate()-1);Iw.range;const GH=Qn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/yo,e=>Math.floor(e/yo));GH.range;function Au(e){return Qn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Jr)/Vk)}const $w=Au(0),Ub=Au(1),Xde=Au(2),Zde=Au(3),rf=Au(4),Jde=Au(5),eue=Au(6);$w.range;Ub.range;Xde.range;Zde.range;rf.range;Jde.range;eue.range;function Eu(e){return Qn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Vk)}const Rw=Eu(0),Fb=Eu(1),tue=Eu(2),aue=Eu(3),lf=Eu(4),nue=Eu(5),sue=Eu(6);Rw.range;Fb.range;tue.range;aue.range;lf.range;nue.range;sue.range;const Xk=Qn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Xk.range;const Zk=Qn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Zk.range;const bo=Qn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());bo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Qn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});bo.range;const vo=Qn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());vo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Qn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});vo.range;function WH(e,t,n,s,r,i){const l=[[Ud,1,ro],[Ud,5,5*ro],[Ud,15,15*ro],[Ud,30,30*ro],[i,1,Jr],[i,5,5*Jr],[i,15,15*Jr],[i,30,30*Jr],[r,1,io],[r,3,3*io],[r,6,6*io],[r,12,12*io],[s,1,yo],[s,2,2*yo],[n,1,Vk],[t,1,OI],[t,3,3*OI],[e,1,aS]];function o(d,u,f){const p=u<d;p&&([d,u]=[u,d]);const x=f&&typeof f.range=="function"?f:c(d,u,f),v=x?x.range(d,+u+1):[];return p?v.reverse():v}function c(d,u,f){const p=Math.abs(u-d)/f,x=Lk(([,,b])=>b).right(l,p);if(x===l.length)return e.every(tE(d/aS,u/aS,f));if(x===0)return zb.every(Math.max(tE(d,u,f),1));const[v,w]=l[p/l[x-1][2]<l[x][2]/p?x-1:x];return v.every(w)}return[o,c]}const[rue,iue]=WH(vo,Zk,Rw,GH,Qk,Yk),[lue,oue]=WH(bo,Xk,$w,Vp,Kk,qk);function nS(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function sS(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Hh(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function cue(e){var t=e.dateTime,n=e.date,s=e.time,r=e.periods,i=e.days,l=e.shortDays,o=e.months,c=e.shortMonths,d=Gh(r),u=Wh(r),f=Gh(i),p=Wh(i),x=Gh(l),v=Wh(l),w=Gh(o),b=Wh(o),C=Gh(c),N=Wh(c),S={a:ee,A:V,b:de,B:oe,c:null,d:UI,e:UI,f:Pue,g:Bue,G:Gue,H:Tue,I:kue,j:Lue,L:VH,m:Due,M:Oue,p:Z,q:R,Q:HI,s:GI,S:Mue,u:Iue,U:$ue,V:Rue,w:zue,W:Uue,x:null,X:null,y:Fue,Y:Hue,Z:Wue,"%":BI},A={a:ve,A:X,b:je,B:Ne,c:null,d:FI,e:FI,f:Kue,g:rme,G:lme,H:Vue,I:que,j:Yue,L:YH,m:Que,M:Xue,p:Oe,q:Fe,Q:HI,s:GI,S:Zue,u:Jue,U:eme,V:tme,w:ame,W:nme,x:null,X:null,y:sme,Y:ime,Z:ome,"%":BI},k={a:z,A:$,b:P,B:O,c:B,d:RI,e:RI,f:Sue,g:$I,G:II,H:zI,I:zI,j:wue,L:Cue,m:vue,M:Nue,p:I,q:bue,Q:Aue,s:Eue,S:jue,u:hue,U:gue,V:pue,w:fue,W:xue,x:Q,X:F,y:$I,Y:II,Z:yue,"%":_ue};S.x=_(n,S),S.X=_(s,S),S.c=_(t,S),A.x=_(n,A),A.X=_(s,A),A.c=_(t,A);function _(me,Be){return function(Pe){var we=[],ne=-1,Le=0,pe=me.length,le,ge,fe;for(Pe instanceof Date||(Pe=new Date(+Pe));++ne<pe;)me.charCodeAt(ne)===37&&(we.push(me.slice(Le,ne)),(ge=MI[le=me.charAt(++ne)])!=null?le=me.charAt(++ne):ge=le==="e"?" ":"0",(fe=Be[le])&&(le=fe(Pe,ge)),we.push(le),Le=ne+1);return we.push(me.slice(Le,ne)),we.join("")}}function T(me,Be){return function(Pe){var we=Hh(1900,void 0,1),ne=E(we,me,Pe+="",0),Le,pe;if(ne!=Pe.length)return null;if("Q"in we)return new Date(we.Q);if("s"in we)return new Date(we.s*1e3+("L"in we?we.L:0));if(Be&&!("Z"in we)&&(we.Z=0),"p"in we&&(we.H=we.H%12+we.p*12),we.m===void 0&&(we.m="q"in we?we.q:0),"V"in we){if(we.V<1||we.V>53)return null;"w"in we||(we.w=1),"Z"in we?(Le=sS(Hh(we.y,0,1)),pe=Le.getUTCDay(),Le=pe>4||pe===0?Fb.ceil(Le):Fb(Le),Le=Iw.offset(Le,(we.V-1)*7),we.y=Le.getUTCFullYear(),we.m=Le.getUTCMonth(),we.d=Le.getUTCDate()+(we.w+6)%7):(Le=nS(Hh(we.y,0,1)),pe=Le.getDay(),Le=pe>4||pe===0?Ub.ceil(Le):Ub(Le),Le=Vp.offset(Le,(we.V-1)*7),we.y=Le.getFullYear(),we.m=Le.getMonth(),we.d=Le.getDate()+(we.w+6)%7)}else("W"in we||"U"in we)&&("w"in we||(we.w="u"in we?we.u%7:"W"in we?1:0),pe="Z"in we?sS(Hh(we.y,0,1)).getUTCDay():nS(Hh(we.y,0,1)).getDay(),we.m=0,we.d="W"in we?(we.w+6)%7+we.W*7-(pe+5)%7:we.w+we.U*7-(pe+6)%7);return"Z"in we?(we.H+=we.Z/100|0,we.M+=we.Z%100,sS(we)):nS(we)}}function E(me,Be,Pe,we){for(var ne=0,Le=Be.length,pe=Pe.length,le,ge;ne<Le;){if(we>=pe)return-1;if(le=Be.charCodeAt(ne++),le===37){if(le=Be.charAt(ne++),ge=k[le in MI?Be.charAt(ne++):le],!ge||(we=ge(me,Pe,we))<0)return-1}else if(le!=Pe.charCodeAt(we++))return-1}return we}function I(me,Be,Pe){var we=d.exec(Be.slice(Pe));return we?(me.p=u.get(we[0].toLowerCase()),Pe+we[0].length):-1}function z(me,Be,Pe){var we=x.exec(Be.slice(Pe));return we?(me.w=v.get(we[0].toLowerCase()),Pe+we[0].length):-1}function $(me,Be,Pe){var we=f.exec(Be.slice(Pe));return we?(me.w=p.get(we[0].toLowerCase()),Pe+we[0].length):-1}function P(me,Be,Pe){var we=C.exec(Be.slice(Pe));return we?(me.m=N.get(we[0].toLowerCase()),Pe+we[0].length):-1}function O(me,Be,Pe){var we=w.exec(Be.slice(Pe));return we?(me.m=b.get(we[0].toLowerCase()),Pe+we[0].length):-1}function B(me,Be,Pe){return E(me,t,Be,Pe)}function Q(me,Be,Pe){return E(me,n,Be,Pe)}function F(me,Be,Pe){return E(me,s,Be,Pe)}function ee(me){return l[me.getDay()]}function V(me){return i[me.getDay()]}function de(me){return c[me.getMonth()]}function oe(me){return o[me.getMonth()]}function Z(me){return r[+(me.getHours()>=12)]}function R(me){return 1+~~(me.getMonth()/3)}function ve(me){return l[me.getUTCDay()]}function X(me){return i[me.getUTCDay()]}function je(me){return c[me.getUTCMonth()]}function Ne(me){return o[me.getUTCMonth()]}function Oe(me){return r[+(me.getUTCHours()>=12)]}function Fe(me){return 1+~~(me.getUTCMonth()/3)}return{format:function(me){var Be=_(me+="",S);return Be.toString=function(){return me},Be},parse:function(me){var Be=T(me+="",!1);return Be.toString=function(){return me},Be},utcFormat:function(me){var Be=_(me+="",A);return Be.toString=function(){return me},Be},utcParse:function(me){var Be=T(me+="",!0);return Be.toString=function(){return me},Be}}}var MI={"-":"",_:" ",0:"0"},os=/^\s*\d+/,due=/^%/,uue=/[\\^$*+?|[\]().{}]/g;function ya(e,t,n){var s=e<0?"-":"",r=(s?-e:e)+"",i=r.length;return s+(i<n?new Array(n-i+1).join(t)+r:r)}function mue(e){return e.replace(uue,"\\$&")}function Gh(e){return new RegExp("^(?:"+e.map(mue).join("|")+")","i")}function Wh(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function fue(e,t,n){var s=os.exec(t.slice(n,n+1));return s?(e.w=+s[0],n+s[0].length):-1}function hue(e,t,n){var s=os.exec(t.slice(n,n+1));return s?(e.u=+s[0],n+s[0].length):-1}function gue(e,t,n){var s=os.exec(t.slice(n,n+2));return s?(e.U=+s[0],n+s[0].length):-1}function pue(e,t,n){var s=os.exec(t.slice(n,n+2));return s?(e.V=+s[0],n+s[0].length):-1}function xue(e,t,n){var s=os.exec(t.slice(n,n+2));return s?(e.W=+s[0],n+s[0].length):-1}function II(e,t,n){var s=os.exec(t.slice(n,n+4));return s?(e.y=+s[0],n+s[0].length):-1}function $I(e,t,n){var s=os.exec(t.slice(n,n+2));return s?(e.y=+s[0]+(+s[0]>68?1900:2e3),n+s[0].length):-1}function yue(e,t,n){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return s?(e.Z=s[1]?0:-(s[2]+(s[3]||"00")),n+s[0].length):-1}function bue(e,t,n){var s=os.exec(t.slice(n,n+1));return s?(e.q=s[0]*3-3,n+s[0].length):-1}function vue(e,t,n){var s=os.exec(t.slice(n,n+2));return s?(e.m=s[0]-1,n+s[0].length):-1}function RI(e,t,n){var s=os.exec(t.slice(n,n+2));return s?(e.d=+s[0],n+s[0].length):-1}function wue(e,t,n){var s=os.exec(t.slice(n,n+3));return s?(e.m=0,e.d=+s[0],n+s[0].length):-1}function zI(e,t,n){var s=os.exec(t.slice(n,n+2));return s?(e.H=+s[0],n+s[0].length):-1}function Nue(e,t,n){var s=os.exec(t.slice(n,n+2));return s?(e.M=+s[0],n+s[0].length):-1}function jue(e,t,n){var s=os.exec(t.slice(n,n+2));return s?(e.S=+s[0],n+s[0].length):-1}function Cue(e,t,n){var s=os.exec(t.slice(n,n+3));return s?(e.L=+s[0],n+s[0].length):-1}function Sue(e,t,n){var s=os.exec(t.slice(n,n+6));return s?(e.L=Math.floor(s[0]/1e3),n+s[0].length):-1}function _ue(e,t,n){var s=due.exec(t.slice(n,n+1));return s?n+s[0].length:-1}function Aue(e,t,n){var s=os.exec(t.slice(n));return s?(e.Q=+s[0],n+s[0].length):-1}function Eue(e,t,n){var s=os.exec(t.slice(n));return s?(e.s=+s[0],n+s[0].length):-1}function UI(e,t){return ya(e.getDate(),t,2)}function Tue(e,t){return ya(e.getHours(),t,2)}function kue(e,t){return ya(e.getHours()%12||12,t,2)}function Lue(e,t){return ya(1+Vp.count(bo(e),e),t,3)}function VH(e,t){return ya(e.getMilliseconds(),t,3)}function Pue(e,t){return VH(e,t)+"000"}function Due(e,t){return ya(e.getMonth()+1,t,2)}function Oue(e,t){return ya(e.getMinutes(),t,2)}function Mue(e,t){return ya(e.getSeconds(),t,2)}function Iue(e){var t=e.getDay();return t===0?7:t}function $ue(e,t){return ya($w.count(bo(e)-1,e),t,2)}function qH(e){var t=e.getDay();return t>=4||t===0?rf(e):rf.ceil(e)}function Rue(e,t){return e=qH(e),ya(rf.count(bo(e),e)+(bo(e).getDay()===4),t,2)}function zue(e){return e.getDay()}function Uue(e,t){return ya(Ub.count(bo(e)-1,e),t,2)}function Fue(e,t){return ya(e.getFullYear()%100,t,2)}function Bue(e,t){return e=qH(e),ya(e.getFullYear()%100,t,2)}function Hue(e,t){return ya(e.getFullYear()%1e4,t,4)}function Gue(e,t){var n=e.getDay();return e=n>=4||n===0?rf(e):rf.ceil(e),ya(e.getFullYear()%1e4,t,4)}function Wue(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ya(t/60|0,"0",2)+ya(t%60,"0",2)}function FI(e,t){return ya(e.getUTCDate(),t,2)}function Vue(e,t){return ya(e.getUTCHours(),t,2)}function que(e,t){return ya(e.getUTCHours()%12||12,t,2)}function Yue(e,t){return ya(1+Iw.count(vo(e),e),t,3)}function YH(e,t){return ya(e.getUTCMilliseconds(),t,3)}function Kue(e,t){return YH(e,t)+"000"}function Que(e,t){return ya(e.getUTCMonth()+1,t,2)}function Xue(e,t){return ya(e.getUTCMinutes(),t,2)}function Zue(e,t){return ya(e.getUTCSeconds(),t,2)}function Jue(e){var t=e.getUTCDay();return t===0?7:t}function eme(e,t){return ya(Rw.count(vo(e)-1,e),t,2)}function KH(e){var t=e.getUTCDay();return t>=4||t===0?lf(e):lf.ceil(e)}function tme(e,t){return e=KH(e),ya(lf.count(vo(e),e)+(vo(e).getUTCDay()===4),t,2)}function ame(e){return e.getUTCDay()}function nme(e,t){return ya(Fb.count(vo(e)-1,e),t,2)}function sme(e,t){return ya(e.getUTCFullYear()%100,t,2)}function rme(e,t){return e=KH(e),ya(e.getUTCFullYear()%100,t,2)}function ime(e,t){return ya(e.getUTCFullYear()%1e4,t,4)}function lme(e,t){var n=e.getUTCDay();return e=n>=4||n===0?lf(e):lf.ceil(e),ya(e.getUTCFullYear()%1e4,t,4)}function ome(){return"+0000"}function BI(){return"%"}function HI(e){return+e}function GI(e){return Math.floor(+e/1e3)}var Nm,QH,XH;cme({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function cme(e){return Nm=cue(e),QH=Nm.format,Nm.parse,XH=Nm.utcFormat,Nm.utcParse,Nm}function dme(e){return new Date(e)}function ume(e){return e instanceof Date?+e:+new Date(+e)}function Jk(e,t,n,s,r,i,l,o,c,d){var u=Rk(),f=u.invert,p=u.domain,x=d(".%L"),v=d(":%S"),w=d("%I:%M"),b=d("%I %p"),C=d("%a %d"),N=d("%b %d"),S=d("%B"),A=d("%Y");function k(_){return(c(_)<_?x:o(_)<_?v:l(_)<_?w:i(_)<_?b:s(_)<_?r(_)<_?C:N:n(_)<_?S:A)(_)}return u.invert=function(_){return new Date(f(_))},u.domain=function(_){return arguments.length?p(Array.from(_,ume)):p().map(dme)},u.ticks=function(_){var T=p();return e(T[0],T[T.length-1],_??10)},u.tickFormat=function(_,T){return T==null?k:d(T)},u.nice=function(_){var T=p();return(!_||typeof _.range!="function")&&(_=t(T[0],T[T.length-1],_??10)),_?p(zH(T,_)):u},u.copy=function(){return Wp(u,Jk(e,t,n,s,r,i,l,o,c,d))},u}function eL(){return fi.apply(Jk(lue,oue,bo,Xk,$w,Vp,Kk,qk,Ud,QH).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ZH(){return fi.apply(Jk(rue,iue,vo,Zk,Rw,Iw,Qk,Yk,Ud,XH).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function zw(){var e=0,t=1,n,s,r,i,l=Ms,o=!1,c;function d(f){return f==null||isNaN(f=+f)?c:l(r===0?.5:(f=(i(f)-n)*r,o?Math.max(0,Math.min(1,f)):f))}d.domain=function(f){return arguments.length?([e,t]=f,n=i(e=+e),s=i(t=+t),r=n===s?0:1/(s-n),d):[e,t]},d.clamp=function(f){return arguments.length?(o=!!f,d):o},d.interpolator=function(f){return arguments.length?(l=f,d):l};function u(f){return function(p){var x,v;return arguments.length?([x,v]=p,l=f(x,v),d):[l(0),l(1)]}}return d.range=u(Pf),d.rangeRound=u($k),d.unknown=function(f){return arguments.length?(c=f,d):c},function(f){return i=f,n=f(e),s=f(t),r=n===s?0:1/(s-n),d}}function Xc(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function tL(){var e=Qc(zw()(Ms));return e.copy=function(){return Xc(e,tL())},Oo.apply(e,arguments)}function JH(){var e=Fk(zw()).domain([1,10]);return e.copy=function(){return Xc(e,JH()).base(e.base())},Oo.apply(e,arguments)}function e9(){var e=Bk(zw());return e.copy=function(){return Xc(e,e9()).constant(e.constant())},Oo.apply(e,arguments)}function aL(){var e=Gk(zw());return e.copy=function(){return Xc(e,aL()).exponent(e.exponent())},Oo.apply(e,arguments)}function mme(){return aL.apply(null,arguments).exponent(.5)}function t9(){var e=[],t=Ms;function n(s){if(s!=null&&!isNaN(s=+s))return t((Hp(e,s,1)-1)/(e.length-1))}return n.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let r of s)r!=null&&!isNaN(r=+r)&&e.push(r);return e.sort(Bp),n},n.interpolator=function(s){return arguments.length?(t=s,n):t},n.range=function(){return e.map((s,r)=>t(r/(e.length-1)))},n.quantiles=function(s){return Array.from({length:s+1},(r,i)=>nde(e,i/s))},n.copy=function(){return t9(t).domain(e)},Oo.apply(n,arguments)}function Uw(){var e=0,t=.5,n=1,s=1,r,i,l,o,c,d=Ms,u,f=!1,p;function x(w){return isNaN(w=+w)?p:(w=.5+((w=+u(w))-i)*(s*w<s*i?o:c),d(f?Math.max(0,Math.min(1,w)):w))}x.domain=function(w){return arguments.length?([e,t,n]=w,r=u(e=+e),i=u(t=+t),l=u(n=+n),o=r===i?0:.5/(i-r),c=i===l?0:.5/(l-i),s=i<r?-1:1,x):[e,t,n]},x.clamp=function(w){return arguments.length?(f=!!w,x):f},x.interpolator=function(w){return arguments.length?(d=w,x):d};function v(w){return function(b){var C,N,S;return arguments.length?([C,N,S]=b,d=Ade(w,[C,N,S]),x):[d(0),d(.5),d(1)]}}return x.range=v(Pf),x.rangeRound=v($k),x.unknown=function(w){return arguments.length?(p=w,x):p},function(w){return u=w,r=w(e),i=w(t),l=w(n),o=r===i?0:.5/(i-r),c=i===l?0:.5/(l-i),s=i<r?-1:1,x}}function a9(){var e=Qc(Uw()(Ms));return e.copy=function(){return Xc(e,a9())},Oo.apply(e,arguments)}function n9(){var e=Fk(Uw()).domain([.1,1,10]);return e.copy=function(){return Xc(e,n9()).base(e.base())},Oo.apply(e,arguments)}function s9(){var e=Bk(Uw());return e.copy=function(){return Xc(e,s9()).constant(e.constant())},Oo.apply(e,arguments)}function nL(){var e=Gk(Uw());return e.copy=function(){return Xc(e,nL()).exponent(e.exponent())},Oo.apply(e,arguments)}function fme(){return nL.apply(null,arguments).exponent(.5)}function r9(e){return e.type==="piecewise"?Wk(e.thresholds,e.colors):tL([e.min??0,e.max??100],e.color)}function of(e){return e.values?Vg(e.values,e.colors).unknown(e.unknownColor??null):Vg(e.colors.map((t,n)=>n),e.colors).unknown(e.unknownColor??null)}function Km(e){return e.type==="ordinal"?of(e):r9(e)}function i9(e,t,n){const{tickMaxStep:s,tickMinStep:r,tickNumber:i}=e,l=r===void 0?999:Math.floor(Math.abs(t[1]-t[0])/r),o=s===void 0?2:Math.ceil(Math.abs(t[1]-t[0])/s);return Math.min(l,Math.max(o,i??n))}function l9(e,t){return t[1]-t[0]===0?1:e/((t[1]-t[0])/100)}function sL(e){return Math.floor(Math.abs(e)/50)}function WI(e){return Array.isArray(e)?JSON.stringify(e):typeof e=="object"&&e!==null?e.valueOf():e}function Fw(...e){let t=new Ob(void 0,WI),n=[],s=[],r=0,i=1,l,o,c=!1,d=0,u=0,f=.5;const p=b=>{const C=t.get(b);if(C!==void 0)return s[C%s.length]},x=()=>{const b=n.length,C=i<r,N=C?i:r,S=C?r:i;l=(S-N)/Math.max(1,b-d+u*2),c&&(l=Math.floor(l));const A=N+(S-N-l*(b-d))*f;o=l*(1-d);const k=c?Math.round(A):A;o=c?Math.round(o):o;const T=kH(b).map(E=>k+l*E);return s=C?T.reverse():T,p};p.domain=function(b){if(!arguments.length)return n.slice();n=[],t=new Ob(void 0,WI);for(const C of b)t.has(C)||t.set(C,n.push(C)-1);return x()},p.range=function(b){if(!arguments.length)return[r,i];const[C,N]=b;return r=+C,i=+N,x()},p.rangeRound=function(b){const[C,N]=b;return r=+C,i=+N,c=!0,x()},p.bandwidth=function(){return o},p.step=function(){return l},p.round=function(b){return arguments.length?(c=!!b,x()):c},p.padding=function(b){return arguments.length?(d=Math.min(1,u=+b),x()):d},p.paddingInner=function(b){return arguments.length?(d=Math.min(1,b),x()):d},p.paddingOuter=function(b){return arguments.length?(u=+b,x()):u},p.align=function(b){return arguments.length?(f=Math.max(0,Math.min(1,b)),x()):f},p.copy=()=>Fw(n,[r,i]).round(c).paddingInner(d).paddingOuter(u).align(f);const[v,w]=e;return e.length>1?(p.domain(v),p.range(w)):v?p.range(v):x(),p}function o9(...e){const t=Fw(...e).paddingInner(1),n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=()=>{const s=n();return s.padding=s.paddingOuter,delete s.paddingInner,delete s.paddingOuter,s.copy=t.copy,s},t}function c9(...e){const t=Hk(...e),n=t.ticks,{negativeScale:s,linearScale:r,positiveScale:i}=hme(t);return t.ticks=l=>{const o=n(l),c=t.constant();let d=0,u=0,f=0;o.forEach(x=>{x>-c&&x<c&&(u+=1),x<=-c&&(d+=1),x>=c&&(f+=1)});const p=[];if(d>0&&p.push(...s.ticks(d)),u>0){const x=r.ticks(u);p.at(-1)===x[0]?p.push(...x.slice(1)):p.push(...x)}if(f>0){const x=i.ticks(f);p.at(-1)===x[0]?p.push(...x.slice(1)):p.push(...x)}return p},t.tickFormat=(l=10,o)=>{const c=t.constant(),[d,u]=t.domain(),f=u-d,p=s.domain(),x=p[1]-p[0],w=(f===0?0:x/f)*l,b=r.domain(),C=b[1]-b[0],S=(f===0?0:C/f)*l,A=i.domain(),k=A[1]-A[0],T=(f===0?0:k/f)*l,E=s.tickFormat(w,o),I=r.tickFormat(S,o),z=i.tickFormat(T,o);return $=>($.valueOf()<=-c?E:$.valueOf()>=c?z:I)($)},t.copy=()=>c9(t.domain(),t.range()).constant(t.constant()),t}function hme(e){const t=e.constant(),n=e.domain(),s=[n[0],Math.min(n[1],-t)],r=Xg(s,e.range()),i=[Math.max(n[0],-t),Math.min(n[1],t)],l=Ow(i,e.range()),o=[Math.max(n[0],t),n[1]],c=Xg(o,e.range());return{negativeScale:r,linearScale:l,positiveScale:c}}function Bw(e,t,n){switch(e){case"log":return Xg(t,n);case"pow":return Mw(t,n);case"sqrt":return UH(t,n);case"time":return eL(t,n);case"utc":return ZH(t,n);case"symlog":return c9(t,n);default:return Ow(t,n)}}const iE=e=>e?.[0]instanceof Date;function lE(e,t,n){const s=eL(e,t);return(r,{location:i})=>i==="tick"?s.tickFormat(n)(r):`${r.toLocaleString()}`}let VI,qI;class gme{types=new Set;constructor(){if(VI)throw new Error("You can only create one instance!");VI=this.types}addType(t){this.types.add(t)}getTypes(){return this.types}}class pme{types=new Set;constructor(){if(qI)throw new Error("You can only create one instance!");qI=this.types}addType(t){this.types.add(t)}getTypes(){return this.types}}const Hw=new gme;Hw.addType("bar");Hw.addType("line");Hw.addType("scatter");const d9=new pme;d9.addType("radar");function Gw(e){return Hw.getTypes().has(e)}function Bb(e){return Gw(e.type)}const xme=(e,t,n,s)=>{const r=new Set;return Object.keys(t).filter(Gw).forEach(l=>{const o=n[l]?.series??{},c=t[l].axisTooltipGetter?.(o);c!==void 0&&c.forEach(({axisId:d,direction:u})=>{u===e&&r.add(d??s)})}),r};function cs(e){return e.bandwidth!==void 0}function yme(e){return cs(e)&&e.paddingOuter!==void 0}function bme(e,t,n){const s=t==="x"?[e.left,e.left+e.width]:[e.top+e.height,e.top];return n?[s[1],s[0]]:s}const vme=.2,wme=.1;function u9({scales:e,drawingArea:t,formattedSeries:n,axis:s,seriesConfig:r,axisDirection:i,zoomMap:l,domains:o}){if(s===void 0)return{axis:{},axisIds:[]};const c=xme(i,r,n,s[0].id),d={};return s.forEach(u=>{const f=u,p=e[f.id],x=l?.get(f.id),v=x?[x.start,x.end]:[0,100],w=bme(t,i,f.reverse??!1),b=!f.ignoreTooltip&&c.has(f.id),C=f.data??[];if(cs(p)){const _=i==="y"?[w[1],w[0]]:w;if(yme(p)&&Su(f)){const T=f.categoryGapRatio??vme,E=f.barGapRatio??wme;d[f.id]=Ke({offset:0,height:0,categoryGapRatio:T,barGapRatio:E,triggerTooltip:b},f,{data:C,scale:p,tickNumber:f.data.length,colorScale:f.colorMap&&(f.colorMap.type==="ordinal"?of(Ke({values:f.data},f.colorMap)):Km(f.colorMap))})}if(_u(f)&&(d[f.id]=Ke({offset:0,height:0,triggerTooltip:b},f,{data:C,scale:p,tickNumber:f.data.length,colorScale:f.colorMap&&(f.colorMap.type==="ordinal"?of(Ke({values:f.data},f.colorMap)):Km(f.colorMap))})),iE(f.data)){const T=lE(f.data,_,f.tickNumber);d[f.id].valueFormatter=f.valueFormatter??T}return}if(f.scaleType==="band"||f.scaleType==="point")return;const N=o[f.id].tickNumber,S=f,A=S.scaleType??"linear",k=l9(N,v);d[f.id]=Ke({offset:0,height:0,triggerTooltip:b},S,{data:C,scaleType:A,scale:p,tickNumber:k,colorScale:S.colorMap&&r9(S.colorMap),valueFormatter:f.valueFormatter??Yce(k,Bw(A,w.map(_=>p.invert(_)),w))})}),{axis:d,axisIds:s.map(({id:u})=>u)}}function Nme(e){return e!=null}function jme(e,t,n,s){const r=e?.length??0,i=Math.floor(t*r/100),l=Math.ceil(n*r/100);return function(c,d){return(c[s]??e?.[d])==null?!0:d>=i&&d<l}}function Cme(e,t,n,s,r){const i=e[0].valueOf(),l=e[1].valueOf(),o=i+t*(l-i)/100,c=i+n*(l-i)/100;return function(u,f){const p=u[s]??r?.[f];return p==null?!0:p>=o&&p<=c}}const Sme=e=>({currentAxisId:t,seriesXAxisId:n,seriesYAxisId:s,isDefaultAxis:r})=>(i,l)=>!(t===n?s:n)||r?Object.values(e??{})[0]?.(i,l)??!0:[s,n].filter(d=>d!==t).map(d=>e[d??""]).filter(Nme).every(d=>d(i,l)),YI=e=>(t=[])=>t.reduce((n,s)=>{const{zoom:r,id:i,reverse:l}=s,o=kk(r,i,e,l);return o&&(n[i]=o),n},{}),_me=.2;function m9(e,t,n){const s=t==="x"?[e.left,e.left+e.width]:[e.top+e.height,e.top];return n.reverse?[s[1],s[0]]:s}function f9(e,t){const n=[0,1];if(Su(e)){const i=e.categoryGapRatio??_me;return Fw(t,n).paddingInner(i).paddingOuter(i/2)}if(_u(e))return o9(t,n);const s=e.scaleType??"linear",r=Bw(s,t,n);return Qce(e)&&e.constant!=null&&r.constant(e.constant),r}const h9=(e,t)=>{const n=e[1]-e[0],s=t[1]-t[0],r=e[0]-t[0]*n/s,i=e[1]+(100-t[1])*n/s;return[r,i]},Ame=(e,t,n,s,r,i,l)=>{const o=n==="x"?s[e].xExtremumGetter:s[e].yExtremumGetter,c=i[e]?.series??{};return o?.({series:c,axis:t,axisIndex:r,isDefaultAxis:r===0,getFilters:l})??[1/0,-1/0]};function Ww(e,t,n,s,r,i){const l=Object.keys(n).filter(Gw);let o=[1/0,-1/0];for(const c of l){const[d,u]=Ame(c,e,t,n,s,r,i);o=[Math.min(o[0],d),Math.max(o[1],u)]}return Number.isNaN(o[0])||Number.isNaN(o[1])?[1/0,-1/0]:o}const Eme=(e,t,n,s)=>{if(e.domainLimit!==void 0)return e.domainLimit;if(t==="x")for(const r of s.line?.seriesOrder??[]){const i=s.line.series[r];if(i.xAxisId===e.id||i.xAxisId===void 0&&n===0)return"strict"}return"nice"};function g9(e,t,n){return Bw(e??"linear",t,[0,1]).nice(n).domain()}function p9(e,t,n,s,[r,i],l,o){const c=y9(e,t,n,s,o);let d=b9(e,r,i);if(typeof c=="function"){const{min:f,max:p}=c(r.valueOf(),i.valueOf());d[0]=f,d[1]=p}const u=i9(e,d,l);return c==="nice"&&(d=g9(e.scaleType,d,u)),d=["min"in e?e.min??d[0]:d[0],"max"in e?e.max??d[1]:d[1]],{domain:d,tickNumber:u}}function x9(e,t,n,s,[r,i],l,o){const c=y9(e,t,n,s,o);let d=b9(e,r,i);if(typeof c=="function"){const{min:u,max:f}=c(r.valueOf(),i.valueOf());d[0]=u,d[1]=f}return c==="nice"&&(d=g9(e.scaleType,d,l)),[e.min??d[0],e.max??d[1]]}function y9(e,t,n,s,r){return r?Eme(e,t,n,s):e.domainLimit??"nice"}function b9(e,t,n){let s=t,r=n;return"max"in e&&e.max!=null&&e.max<t&&(s=e.max),"min"in e&&e.min!=null&&e.min>t&&(r=e.min),!("min"in e)&&!("max"in e)?[s,r]:[e.min??s,e.max??r]}class Tme{constructor(){this.ids=[],this.values=[],this.length=0}clear(){this.length=0}push(t,n){let s=this.length++;for(;s>0;){const r=s-1>>1,i=this.values[r];if(n>=i)break;this.ids[s]=this.ids[r],this.values[s]=i,s=r}this.ids[s]=t,this.values[s]=n}pop(){if(this.length===0)return;const t=this.ids,n=this.values,s=t[0],r=--this.length;if(r>0){const i=t[r],l=n[r];let o=0;const c=r>>1;for(;o<c;){const d=(o<<1)+1,u=d+1,f=d+(+(u<r)&+(n[u]<n[d]));if(n[f]>=l)break;t[o]=t[f],n[o]=n[f],o=f}t[o]=i,n[o]=l}return s}peek(){return this.length>0?this.ids[0]:void 0}peekValue(){return this.length>0?this.values[0]:void 0}shrink(){this.ids.length=this.values.length=this.length}}const KI=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],rS=3;class rL{static from(t,n=0){if(n%8!==0)throw new Error("byteOffset must be 8-byte aligned.");if(!t||t.byteLength===void 0||t.buffer)throw new Error("Data must be an instance of ArrayBuffer or SharedArrayBuffer.");const[s,r]=new Uint8Array(t,n+0,2);if(s!==251)throw new Error("Data does not appear to be in a Flatbush format.");const i=r>>4;if(i!==rS)throw new Error(`Got v${i} data when expected v${rS}.`);const l=KI[r&15];if(!l)throw new Error("Unrecognized array type.");const[o]=new Uint16Array(t,n+2,1),[c]=new Uint32Array(t,n+4,1);return new rL(c,o,l,void 0,t,n)}constructor(t,n=16,s=Float64Array,r=ArrayBuffer,i,l=0){if(t===void 0)throw new Error("Missing required argument: numItems.");if(isNaN(t)||t<=0)throw new Error(`Unexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+n,2),65535),this.byteOffset=l;let o=t,c=o;this._levelBounds=[o*4];do o=Math.ceil(o/this.nodeSize),c+=o,this._levelBounds.push(c*4);while(o!==1);this.ArrayType=s,this.IndexArrayType=c<16384?Uint16Array:Uint32Array;const d=KI.indexOf(s),u=c*4*s.BYTES_PER_ELEMENT;if(d<0)throw new Error(`Unexpected typed array class: ${s}.`);if(i)this.data=i,this._boxes=new s(i,l+8,c*4),this._indices=new this.IndexArrayType(i,l+8+u,c),this._pos=c*4,this.minX=this._boxes[this._pos-4],this.minY=this._boxes[this._pos-3],this.maxX=this._boxes[this._pos-2],this.maxY=this._boxes[this._pos-1];else{const f=this.data=new r(8+u+c*this.IndexArrayType.BYTES_PER_ELEMENT);this._boxes=new s(f,8,c*4),this._indices=new this.IndexArrayType(f,8+u,c),this._pos=0,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,new Uint8Array(f,0,2).set([251,(rS<<4)+d]),new Uint16Array(f,2,1)[0]=n,new Uint32Array(f,4,1)[0]=t}this._queue=new Tme}add(t,n,s=t,r=n){const i=this._pos>>2,l=this._boxes;return this._indices[i]=i,l[this._pos++]=t,l[this._pos++]=n,l[this._pos++]=s,l[this._pos++]=r,t<this.minX&&(this.minX=t),n<this.minY&&(this.minY=n),s>this.maxX&&(this.maxX=s),r>this.maxY&&(this.maxY=r),i}finish(){if(this._pos>>2!==this.numItems)throw new Error(`Added ${this._pos>>2} items when expected ${this.numItems}.`);const t=this._boxes;if(this.numItems<=this.nodeSize){t[this._pos++]=this.minX,t[this._pos++]=this.minY,t[this._pos++]=this.maxX,t[this._pos++]=this.maxY;return}const n=this.maxX-this.minX||1,s=this.maxY-this.minY||1,r=new Uint32Array(this.numItems),i=65535;for(let l=0,o=0;l<this.numItems;l++){const c=t[o++],d=t[o++],u=t[o++],f=t[o++],p=Math.floor(i*((c+u)/2-this.minX)/n),x=Math.floor(i*((d+f)/2-this.minY)/s);r[l]=Pme(p,x)}oE(r,t,this._indices,0,this.numItems-1,this.nodeSize);for(let l=0,o=0;l<this._levelBounds.length-1;l++){const c=this._levelBounds[l];for(;o<c;){const d=o;let u=t[o++],f=t[o++],p=t[o++],x=t[o++];for(let v=1;v<this.nodeSize&&o<c;v++)u=Math.min(u,t[o++]),f=Math.min(f,t[o++]),p=Math.max(p,t[o++]),x=Math.max(x,t[o++]);this._indices[this._pos>>2]=d,t[this._pos++]=u,t[this._pos++]=f,t[this._pos++]=p,t[this._pos++]=x}}}search(t,n,s,r,i){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let l=this._boxes.length-4;const o=[],c=[];for(;l!==void 0;){const d=Math.min(l+this.nodeSize*4,QI(l,this._levelBounds));for(let u=l;u<d;u+=4){if(s<this._boxes[u]||r<this._boxes[u+1]||t>this._boxes[u+2]||n>this._boxes[u+3])continue;const f=this._indices[u>>2]|0;l>=this.numItems*4?o.push(f):(i===void 0||i(f))&&(c.push(f),c.push(this._boxes[u]),c.push(this._boxes[u+1]))}l=o.pop()}return c}neighbors(t,n,s=1/0,r=1/0,i,l=kme){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let o=this._boxes.length-4;const c=this._queue,d=[];e:for(;o!==void 0;){const u=Math.min(o+this.nodeSize*4,QI(o,this._levelBounds));for(let f=o;f<u;f+=4){const p=this._indices[f>>2]|0,x=this._boxes[f],v=this._boxes[f+1],w=this._boxes[f+2],b=this._boxes[f+3],C=t<x?x-t:t>w?t-w:0,N=n<v?v-n:n>b?n-b:0,S=l(C,N);S>r||(o>=this.numItems*4?c.push(p<<1,S):(i===void 0||i(p))&&c.push((p<<1)+1,S))}for(;c.length&&c.peek()&1;)if(c.peekValue()>r||(d.push(c.pop()>>1),d.length===s))break e;o=c.length?c.pop()>>1:void 0}return c.clear(),d}}function kme(e,t){return e*e+t*t}function QI(e,t){let n=0,s=t.length-1;for(;n<s;){const r=n+s>>1;t[r]>e?s=r:n=r+1}return t[n]}function oE(e,t,n,s,r,i){if(Math.floor(s/i)>=Math.floor(r/i))return;const l=e[s],o=e[s+r>>1],c=e[r];let d=c;const u=Math.max(l,o);c>u?d=u:u===l?d=Math.max(o,c):u===o&&(d=Math.max(l,c));let f=s-1,p=r+1;for(;;){do f++;while(e[f]<d);do p--;while(e[p]>d);if(f>=p)break;Lme(e,t,n,f,p)}oE(e,t,n,s,p,i),oE(e,t,n,p+1,r,i)}function Lme(e,t,n,s,r){const i=e[s];e[s]=e[r],e[r]=i;const l=4*s,o=4*r,c=t[l],d=t[l+1],u=t[l+2],f=t[l+3];t[l]=t[o],t[l+1]=t[o+1],t[l+2]=t[o+2],t[l+3]=t[o+3],t[o]=c,t[o+1]=d,t[o+2]=u,t[o+3]=f;const p=n[s];n[s]=n[r],n[r]=p}function Pme(e,t){let n=e^t,s=65535^n,r=65535^(e|t),i=e&(t^65535),l=n|s>>1,o=n>>1^n,c=r>>1^s&i>>1^r,d=n&r>>1^i>>1^i;n=l,s=o,r=c,i=d,l=n&n>>2^s&s>>2,o=n&s>>2^s&(n^s)>>2,c^=n&r>>2^s&i>>2,d^=s&r>>2^(n^s)&i>>2,n=l,s=o,r=c,i=d,l=n&n>>4^s&s>>4,o=n&s>>4^s&(n^s)>>4,c^=n&r>>4^s&i>>4,d^=s&r>>4^(n^s)&i>>4,n=l,s=o,r=c,i=d,c^=n&r>>8^s&i>>8,d^=s&r>>8^(n^s)&i>>8,n=c^c>>1,s=d^d>>1;let u=e^t,f=s|65535^(u|n);return u=(u|u<<8)&16711935,u=(u|u<<4)&252645135,u=(u|u<<2)&858993459,u=(u|u<<1)&1431655765,f=(f|f<<8)&16711935,f=(f|f<<4)&252645135,f=(f|f<<2)&858993459,f=(f|f<<1)&1431655765,(f<<1|u)>>>0}const Dme=e=>{const t=new Map;return e.forEach(n=>{t.set(n.axisId,n)}),t},v9=e=>e.zoom,Ome=Nt(jl,Do,(e,t)=>e?.some(n=>!!n.zoom)||t?.some(n=>!!n.zoom)||!1),w9=Nt(v9,e=>e?.isInteracting),Zc=Sn(v9,function(t){return t?.zoomData&&Dme(t?.zoomData)}),XI=Nt(Zc,(e,t)=>e?.get(t)),qp=Sn(jl,Do,function(t,n){return Ke({},YI("x")(t),YI("y")(n))});Nt(qp,(e,t)=>e[t]);const Mme=Nt(ir,function(t){return sL(t.width)}),Ime=Nt(ir,function(t){return sL(t.height)}),iL=Sn(jl,on,Pr,kw,Mme,function(t,n,s,r,i){const o={};return t?.forEach((c,d)=>{const u=c;if(Su(u)||_u(u)){o[u.id]={domain:u.data};return}const f=Ww(u,"x",s,d,n);o[u.id]=p9(u,"x",d,n,f,i,r)}),{axes:t,domains:o}}),lL=Sn(Do,on,Pr,kw,Ime,function(t,n,s,r,i){const o={};return t?.forEach((c,d)=>{const u=c;if(Su(u)||_u(u)){o[u.id]={domain:u.data};return}const f=Ww(u,"y",s,d,n);o[u.id]=p9(u,"y",d,n,f,i,r)}),{axes:t,domains:o}}),N9=Sn(Zc,qp,iL,lL,function(t,n,{axes:s,domains:r},{axes:i,domains:l}){if(!t||!n)return;let o=!1;const c={},d=[...s??[],...i??[]];for(let u=0;u<d.length;u+=1){const f=d[u];if(!n[f.id]||n[f.id].filterMode!=="discard")continue;const p=t.get(f.id);if(p===void 0||p.start<=0&&p.end>=100)continue;const x=u<(s?.length??0)?"x":"y";if(f.scaleType==="band"||f.scaleType==="point")c[f.id]=jme(f.data,p.start,p.end,x);else{const{domain:v}=x==="x"?r[f.id]:l[f.id];c[f.id]=Cme(v,p.start,p.end,x,f.data)}o=!0}if(o)return Sme(c)}),$me=Sn(on,Pr,Zc,qp,N9,kw,iL,function(t,n,s,r,i,l,{axes:o,domains:c}){const d={};return o?.forEach((u,f)=>{const p=c[u.id].domain;if(Su(u)||_u(u)){d[u.id]=p;return}const x=s?.get(u.id),v=r?.[u.id],w=x===void 0&&!v?i:void 0;if(!w){d[u.id]=p;return}const b=c[u.id].tickNumber,C=Ww(u,"x",n,f,t,w);d[u.id]=x9(u,"x",f,t,C,b,l)}),d}),Rme=Sn(on,Pr,Zc,qp,N9,kw,lL,function(t,n,s,r,i,l,{axes:o,domains:c}){const d={};return o?.forEach((u,f)=>{const p=c[u.id].domain;if(Su(u)||_u(u)){d[u.id]=p;return}const x=s?.get(u.id),v=r?.[u.id],w=x===void 0&&!v?i:void 0;if(!w){d[u.id]=p;return}const b=c[u.id].tickNumber,C=Ww(u,"y",n,f,t,w);d[u.id]=x9(u,"y",f,t,C,b,l)}),d}),j9=Sn(jl,$me,function(t,n){const s={};return t?.forEach(r=>{const i=r,l=n[i.id];s[i.id]=f9(i,l)}),s}),C9=Sn(Do,Rme,function(t,n){const s={};return t?.forEach(r=>{const i=r,l=n[i.id];s[i.id]=f9(i,l)}),s}),zme=Sn(jl,j9,ir,Zc,function(t,n,s,r){const i={};return t?.forEach(l=>{const o=l,c=r?.get(o.id),d=c?[c.start,c.end]:[0,100],u=m9(s,"x",o),f=n[o.id].copy(),p=h9(u,d);f.range(p),i[o.id]=f}),i}),Ume=Sn(Do,C9,ir,Zc,function(t,n,s,r){const i={};return t?.forEach(l=>{const o=l,c=r?.get(o.id),d=c?[c.start,c.end]:[0,100],u=m9(s,"y",o),f=n[o.id].copy(),p=cs(f)?u.reverse():u,x=h9(p,d);f.range(x),i[o.id]=f}),i}),Us=Sn(ir,on,Pr,Zc,iL,zme,function(t,n,s,r,{axes:i,domains:l},o){return u9({scales:o,drawingArea:t,formattedSeries:n,axis:i,seriesConfig:s,axisDirection:"x",zoomMap:r,domains:l})}),Fs=Sn(ir,on,Pr,Zc,lL,Ume,function(t,n,s,r,{axes:i,domains:l},o){return u9({scales:o,drawingArea:t,formattedSeries:n,axis:i,seriesConfig:s,axisDirection:"y",zoomMap:r,domains:l})});Nt(Us,Fs,(e,t,n)=>e?.axis[n]??t?.axis[n]);Nt(jl,Do,(e,t,n)=>{const s=e?.find(r=>r.id===n)??t?.find(r=>r.id===n)??null;if(s)return s});const Fme=Nt(jl,e=>e[0].id),Bme=Nt(Do,e=>e[0].id),Hme=new Map,Gme=()=>Hme,Wme=Sn(on,j9,C9,Fme,Bme,function(t,n,s,r,i){const l=t.scatter,o=new Map;return l&&l.seriesOrder.forEach(c=>{const{data:d,xAxisId:u=r,yAxisId:f=i}=l.series[c],p=new rL(d.length),x=n[u],v=s[f];for(const w of d)p.add(x(w.x),v(w.y));p.finish(),o.set(c,p)}),o});function jm(e){return e instanceof Date?e.getTime():e}function cf(e,t){const{scale:n,data:s,reverse:r}=e;if(!cs(n)){const l=n.invert(t);if(s===void 0)return-1;const o=jm(l);return s?.findIndex((d,u)=>{const f=jm(d);return f>o&&(u===0||Math.abs(o-f)<=Math.abs(o-jm(s[u-1])))||f<=o&&(u===s.length-1||Math.abs(jm(l)-f)<Math.abs(jm(l)-jm(s[u+1])))})}const i=n.bandwidth()===0?Math.floor((t-Math.min(...n.range())+n.step()/2)/n.step()):Math.floor((t-Math.min(...n.range()))/n.step());return i<0||i>=s.length?-1:r?s.length-1-i:i}function ZI(e,t,n,s){if(!cs(e)){if(s===null){const r=e.invert(n);return Number.isNaN(r)?null:r}return t[s]}return s===null||s<0||s>=t.length?null:t[s]}function Zg(e,t){const n=e.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,n.matrixTransform(e.getScreenCTM().inverse())}const Vme=Object.is;function S9(e,t){if(e===t)return!0;if(!(e instanceof Object)||!(t instanceof Object))return!1;let n=0,s=0;for(const r in e)if(n+=1,!Vme(e[r],t[r])||!(r in t))return!1;for(const r in t)s+=1;return n===s}const Yp=({store:e})=>{const t=rs(function(){e.set("interaction",Ke({},e.state.interaction,{pointer:null,item:null}))}),n=rs(function(l){const o=e.state.interaction.item;if(!l){o!==null&&e.set("interaction",Ke({},e.state.interaction,{item:null}));return}o===null||Object.keys(l).some(c=>l[c]!==o[c])||e.set("interaction",Ke({},e.state.interaction,{item:null}))}),s=rs(function(l,o){S9(e.state.interaction.item,l)||e.set("interaction",Ke({},e.state.interaction,{lastUpdate:o.interaction,item:l}))}),r=rs(function(l){e.set("interaction",Ke({},e.state.interaction,{pointer:l,lastUpdate:l!==null?"pointer":e.state.interaction.lastUpdate}))});return{instance:{cleanInteraction:t,setItemInteraction:s,removeItemInteraction:n,setPointerCoordinate:r}}};Yp.getInitialState=()=>({interaction:{item:null,pointer:null,lastUpdate:"pointer"}});Yp.params={};const Vw=e=>e.interaction,qme=Nt(Vw,e=>e!==void 0),_9=Nt(Vw,e=>e?.item??null),A9=Nt(Vw,e=>e?.pointer??null),Kp=Nt(A9,e=>e&&e.x),Qp=Nt(A9,e=>e&&e.y),Yme=Nt(_9,e=>e!==null),Xp=Nt(Vw,e=>e?.lastUpdate),Kme=new Set(["bar","line","scatter","pie"]);function E9(e){return Kme.has(e)}function T9(e,t,n){const s=Object.keys(e),r=t!==void 0&&e[t]?s.indexOf(t):0,i=t!==void 0&&n!==void 0&&e[t]&&e[t].series[n]?e[t].seriesOrder.indexOf(n):-1,l=s.filter(E9);for(let u=0;u<l.length;u+=1){const f=(r+u)%l.length,p=e[l[f]],x=u===0?i+1:0;for(let v=x;v<p.seriesOrder.length;v+=1)if(p.series[p.seriesOrder[v]].data.length>0)return{type:l[f],seriesId:p.seriesOrder[v]}}const o=r,c=e[l[o]],d=i;for(let u=0;u<d;u+=1)if(c.series[c.seriesOrder[u]].data.length>0)return{type:l[o],seriesId:c.seriesOrder[u]};return null}function k9(e,t,n){const s=Object.keys(e),r=t!==void 0&&e[t]?s.indexOf(t):0,i=t!==void 0&&n!==void 0&&e[t]&&e[t].series[n]?e[t].seriesOrder.indexOf(n):1,l=s.filter(E9);for(let u=0;u<l.length;u+=1){const f=(l.length+r-u)%l.length,p=e[l[f]],x=u===0?i+1:p.seriesOrder.length;for(let v=1;v<x;v+=1){const w=(p.seriesOrder.length+i-v)%p.seriesOrder.length;if(p.series[p.seriesOrder[w]].data.length>0)return{type:l[f],seriesId:p.seriesOrder[w]}}}const o=r,c=e[l[o]],d=c.seriesOrder;for(let u=d.length-1;u>i;u-=1)if(c.series[c.seriesOrder[u]].data.length>0)return{type:l[o],seriesId:c.seriesOrder[u]};return null}function L9(e,t,n){if(t==="sankey")return!1;const s=e[t]?.series[n]?.data;return s&&s.length>0}function Qme(e){const t=on(e);let{type:n,seriesId:s}=e.keyboardNavigation.item??{};if(n===void 0||n==="sankey"||s===void 0||!L9(t,n,s)){const i=T9(t,n,s);if(i===null)return null;n=i.type,s=i.seriesId}const r=t[n].series[s].data.length;return{type:n,seriesId:s,dataIndex:((e.keyboardNavigation.item?.dataIndex??-1)+1)%r}}function Xme(e){const t=on(e);let{type:n,seriesId:s}=e.keyboardNavigation.item??{};if(n===void 0||n==="sankey"||s===void 0||!L9(t,n,s)){const i=k9(t,n,s);if(i===null)return null;n=i.type,s=i.seriesId}const r=t[n].series[s].data.length;return{type:n,seriesId:s,dataIndex:(r+(e.keyboardNavigation.item?.dataIndex??1)-1)%r}}function Zme(e){const t=on(e);let{type:n,seriesId:s}=e.keyboardNavigation.item??{};const r=T9(t,n,s);if(r===null)return null;n=r.type,s=r.seriesId;const i=t[n].series[s].data.length;return{type:n,seriesId:s,dataIndex:Math.min(i-1,e.keyboardNavigation.item?.dataIndex??0)}}function Jme(e){const t=on(e);let{type:n,seriesId:s}=e.keyboardNavigation.item??{};const r=k9(t,n,s);if(r===null)return null;n=r.type,s=r.seriesId;const i=t[n].series[s].data.length;return{type:n,seriesId:s,dataIndex:Math.min(i-1,e.keyboardNavigation.item?.dataIndex??0)}}const qw=({params:e,store:t,svgRef:n})=>{const s=rs(function(){t.state.keyboardNavigation.item!==null&&t.set("keyboardNavigation",Ke({},t.state.keyboardNavigation,{item:null}))});return h.useEffect(()=>{const r=n.current;if(!r||!e.enableKeyboardNavigation)return;function i(l){let o=t.state.keyboardNavigation.item;switch(l.key){case"ArrowRight":o=Qme(t.state);break;case"ArrowLeft":o=Xme(t.state);break;case"ArrowDown":{o=Jme(t.state);break}case"ArrowUp":{o=Zme(t.state);break}}o!==t.state.keyboardNavigation.item&&(l.preventDefault(),t.update(Ke({},t.state.highlight&&{highlight:Ke({},t.state.highlight,{lastUpdate:"keyboard"})},t.state.interaction&&{interaction:Ke({},t.state.interaction,{lastUpdate:"keyboard"})},{keyboardNavigation:Ke({},t.state.keyboardNavigation,{item:o})})))}return r.addEventListener("keydown",i),r.addEventListener("blur",s),()=>{r.removeEventListener("keydown",i),r.removeEventListener("blur",s)}},[n,s,e.enableKeyboardNavigation,t]),Kn(()=>{t.state.keyboardNavigation.enableKeyboardNavigation!==e.enableKeyboardNavigation&&t.set("keyboardNavigation",Ke({},t.state.keyboardNavigation,{enableKeyboardNavigation:!!e.enableKeyboardNavigation}))},[t,e.enableKeyboardNavigation]),{}};qw.getInitialState=e=>({keyboardNavigation:{item:null,enableKeyboardNavigation:!!e.enableKeyboardNavigation}});qw.params={enableKeyboardNavigation:!0};const Tu=e=>e.keyboardNavigation;Nt(Tu,(e,t)=>e?.item!=null&&e.item.type===t.seriesType&&e.item.seriesId===t.seriesId&&e.item.dataIndex===t.dataIndex);const efe=Nt(Tu,e=>e?.item!=null),Yw=Nt(Tu,e=>e?.item?.type),Kw=Nt(Tu,e=>e?.item?.seriesId),Qw=Nt(Tu,e=>e?.item?.dataIndex),tfe=Nt(Tu,e=>!!e?.enableKeyboardNavigation),P9=e=>(t,n,s,r,i)=>{if(t===void 0||n===void 0||s===void 0)return;const l=i[t]?.series[n];if(!l)return;let o=e==="x"?"xAxisId"in l&&l.xAxisId:"yAxisId"in l&&l.yAxisId;return(o===void 0||o===!1)&&(o=r.axisIds[0]),{axisId:o,dataIndex:s}},afe=Nt(Yw,Kw,Qw,Us,on,P9("x")),nfe=Nt(Yw,Kw,Qw,Fs,on,P9("y")),D9=Nt(Tu,function(t){if(t?.item==null)return null;const{type:n,seriesId:s}=t.item;return n===void 0||s===void 0?null:t.item}),sfe=Nt(Yw,Kw,Qw,function(t,n,s){return n!==void 0&&s!==void 0}),O9=Nt(Xp,_9,D9,(e,t,n)=>e==="keyboard"?n:t??null),rfe=Nt(Xp,Yme,sfe,(e,t,n)=>e==="keyboard"?n:t),ife=Nt(O9,ir,Pr,Us,Fs,on,function(t,n,s,{axis:r,axisIds:i},{axis:l,axisIds:o},c,d="top"){if(!t)return null;const u=c[t.type]?.series[t.seriesId];if(u){const f={},p=Bb(u)?u.xAxisId??i[0]:void 0,x=Bb(u)?u.yAxisId??o[0]:void 0;return p!==void 0&&(f.x=r[p]),x!==void 0&&(f.y=l[x]),s[u.type].tooltipItemPositionGetter?.({series:c,drawingArea:n,axesConfig:f,identifier:t,placement:d})??null}return null});function Qm(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;if(Array.isArray(e)){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;i+=1)if(!Qm(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;const r=Array.from(e.entries());for(let i=0;i<r.length;i+=1)if(!t.has(r[i][0]))return!1;for(let i=0;i<r.length;i+=1){const l=r[i];if(!Qm(l[1],t.get(l[0])))return!1}return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;const r=Array.from(e.entries());for(let i=0;i<r.length;i+=1)if(!t.has(r[i][0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;i+=1)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();const n=Object.keys(e),s=n.length;if(s!==Object.keys(t).length)return!1;for(let r=0;r<s;r+=1)if(!Object.prototype.hasOwnProperty.call(t,n[r]))return!1;for(let r=0;r<s;r+=1){const i=n[r];if(!Qm(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function cE(e,t,n=t.axisIds[0]){return Array.isArray(n)?n.map(s=>cf(t.axis[s],e)):cf(t.axis[n],e)}const M9=(e,t,n)=>{if(e===null)return null;const s=cE(e,t,n);return s===-1?null:s},oL=Nt(Kp,Us,M9),cL=Nt(Qp,Fs,M9),lfe=Nt(Kp,Qp,Us,Fs,(e,t,n,s)=>[...e===null?[]:n.axisIds.map(r=>({axisId:r,dataIndex:cE(e,n,r)})),...t===null?[]:s.axisIds.map(r=>({axisId:r,dataIndex:cE(t,s,r)}))].filter(r=>r.dataIndex!==null&&r.dataIndex>=0));function I9(e,t,n,s=t.axisIds[0]){return Array.isArray(s)?s.map((r,i)=>{const l=t.axis[r];return ZI(l.scale,l.data,e,n[i])}):ZI(t.axis[s].scale,t.axis[s].data,e,n)}const ofe=Nt(Kp,Us,oL,(e,t,n,s)=>e===null||t.axisIds.length===0?null:I9(e,t,n,s)),cfe=Nt(Qp,Fs,cL,(e,t,n,s)=>e===null||t.axisIds.length===0?null:I9(e,t,n,s)),$9=[],R9=Sw({memoizeOptions:{resultEqualityCheck:Qm}})(Kp,Us,(e,t)=>e===null?$9:t.axisIds.filter(n=>t.axis[n].triggerTooltip).map(n=>({axisId:n,dataIndex:cf(t.axis[n],e)})).filter(({dataIndex:n})=>n>=0)),z9=Sw({memoizeOptions:{resultEqualityCheck:Qm}})(Qp,Fs,(e,t)=>e===null?$9:t.axisIds.filter(n=>t.axis[n].triggerTooltip).map(n=>({axisId:n,dataIndex:cf(t.axis[n],e)})).filter(({dataIndex:n})=>n>=0)),dfe=Nt(R9,z9,(e,t)=>e.length>0||t.length>0);function ufe(e){return e.setPointerCoordinate!==void 0}const Df=({params:e,store:t,seriesConfig:n,svgRef:s,instance:r})=>{const{xAxis:i,yAxis:l,dataset:o,onHighlightedAxisChange:c}=e,d=Rt(t,ir),u=Rt(t,on),f=Rt(t,qme),{axis:p,axisIds:x}=Rt(t,Us),{axis:v,axisIds:w}=Rt(t,Fs);NH({controlled:e.highlightedAxis}),Kn(()=>{e.highlightedAxis!==void 0&&t.set("controlledCartesianAxisHighlight",e.highlightedAxis)},[t,e.highlightedAxis]);const b=h.useRef(!0);h.useEffect(()=>{if(b.current){b.current=!1;return}t.set("cartesianAxis",{x:SH(i,o),y:_H(l,o)})},[n,d,i,l,o,t]);const C=x[0],N=w[0];ece(t,lfe,(A,k)=>{if(c&&!Object.is(A,k)){if(A.length!==k.length){c(k);return}A?.some(({axisId:_,dataIndex:T},E)=>k[E].axisId!==_||k[E].dataIndex!==T)&&c(k)}});const S=ufe(r);return h.useEffect(()=>{const A=s.current;if(!f||!S||!A||e.disableAxisListener)return()=>{};const k=r.addInteractionListener("moveEnd",P=>{P.detail.activeGestures.pan||r.cleanInteraction()}),_=r.addInteractionListener("panEnd",P=>{P.detail.activeGestures.move||r.cleanInteraction()}),T=r.addInteractionListener("quickPressEnd",P=>{!P.detail.activeGestures.move&&!P.detail.activeGestures.pan&&r.cleanInteraction()}),E=P=>{const O=P.detail.srcEvent,B=P.detail.target,Q=Zg(A,O);if(P.detail.srcEvent.buttons>=1&&B?.hasPointerCapture(P.detail.srcEvent.pointerId)&&!B?.closest("[data-charts-zoom-slider]")&&B?.releasePointerCapture(P.detail.srcEvent.pointerId),!r.isPointInside(Q.x,Q.y,B)){r.cleanInteraction?.();return}r.setPointerCoordinate(Q)},I=r.addInteractionListener("move",E),z=r.addInteractionListener("pan",E),$=r.addInteractionListener("quickPress",E);return()=>{I.cleanup(),k.cleanup(),z.cleanup(),_.cleanup(),$.cleanup(),T.cleanup()}},[s,t,p,C,v,N,r,e.disableAxisListener,f,S]),h.useEffect(()=>{const A=s.current,k=e.onAxisClick;if(A===null||!k)return()=>{};const _=r.addInteractionListener("tap",T=>{let E=null,I=!1;const z=Zg(A,T.detail.srcEvent),$=cf(p[C],z.x);I=$!==-1,E=I?$:cf(v[N],z.y);const P=I?x[0]:w[0];if(E==null||E===-1)return;const O=(I?p:v)[P].data[E],B={};Object.keys(u).filter(Q=>["bar","line"].includes(Q)).forEach(Q=>{u[Q]?.seriesOrder.forEach(F=>{const ee=u[Q].series[F],V=ee.xAxisId,de=ee.yAxisId,oe=I?V:de;(oe===void 0||oe===P)&&(B[F]=ee.data[E])})}),k(T.detail.srcEvent,{dataIndex:E,axisValue:O,seriesValues:B})});return()=>{_.cleanup()}},[e.onAxisClick,u,s,p,x,v,w,C,N,r]),{}};Df.params={xAxis:!0,yAxis:!0,dataset:!0,onAxisClick:!0,disableAxisListener:!0,onHighlightedAxisChange:!0,highlightedAxis:!0};Df.getDefaultizedParams=({params:e})=>Ke({},e,{colors:e.colors??yH,theme:e.theme??"light",defaultizedXAxis:SH(e.xAxis,e.dataset),defaultizedYAxis:_H(e.yAxis,e.dataset)});Df.getInitialState=e=>Ke({cartesianAxis:{x:e.defaultizedXAxis,y:e.defaultizedYAxis}},e.highlightedAxis===void 0?{}:{controlledCartesianAxisHighlight:e.highlightedAxis});const Cl=e=>e.brush;Nt(Cl,e=>e?.start);Nt(Cl,e=>e?.current);const mfe=Nt(Cl,e=>e?.start?.x??null),ffe=Nt(Cl,e=>e?.start?.y??null),hfe=Nt(Cl,e=>e?.current?.x??null),gfe=Nt(Cl,e=>e?.current?.y??null);Nt(mfe,ffe,hfe,gfe,(e,t,n,s)=>e===null||t===null||n===null||s===null?null:{start:{x:e,y:t},current:{x:n,y:s}});const pfe=Nt(on,e=>{let t=!1,n=!1;return e&&Object.entries(e).forEach(([s,r])=>{Object.values(r.series).some(i=>i.layout==="horizontal")&&(t=!0),s==="scatter"&&r.seriesOrder.length>0&&(n=!0)}),n?"xy":t?"y":"x"}),xfe=Nt(qp,function(t){let n=!1,s=!1;return Object.values(t).forEach(r=>{r.axisDirection==="y"&&(s=!0),r.axisDirection==="x"&&(n=!0)}),n&&s?"xy":s?"y":n?"x":null});Nt(pfe,xfe,(e,t)=>t??e);const U9=Nt(Cl,e=>e?.enabled||e?.isZoomBrushEnabled),F9=Nt(U9,Cl,(e,t)=>e&&t?.start!==null&&t?.current!==null),Xw=Nt(Cl,F9,(e,t)=>t&&e?.preventHighlight),yfe=Nt(Cl,F9,(e,t)=>t&&e?.preventTooltip),Zp=({store:e,svgRef:t,instance:n,params:s})=>{const r=Rt(e,U9);Kn(()=>{e.set("brush",Ke({},e.state.brush,{enabled:s.brushConfig.enabled,preventTooltip:s.brushConfig.preventTooltip,preventHighlight:s.brushConfig.preventHighlight}))},[e,s.brushConfig.enabled,s.brushConfig.preventTooltip,s.brushConfig.preventHighlight]);const i=rs(function(d){e.set("brush",Ke({},e.state.brush,{start:e.state.brush.start??d,current:d}))}),l=rs(function(){e.set("brush",Ke({},e.state.brush,{start:null,current:null}))}),o=rs(function(d){e.state.brush.isZoomBrushEnabled!==d&&e.set("brush",Ke({},e.state.brush,{isZoomBrushEnabled:d}))});return h.useEffect(()=>{const c=t.current;if(c===null||!r)return()=>{};const d=w=>{if(w.detail.target?.closest("[data-charts-zoom-slider]"))return;const b=Zg(c,{clientX:w.detail.initialCentroid.x,clientY:w.detail.initialCentroid.y});i(b)},u=w=>{const b=Zg(c,{clientX:w.detail.centroid.x,clientY:w.detail.centroid.y});i(b)},f=n.addInteractionListener("brushStart",d),p=n.addInteractionListener("brush",u),x=n.addInteractionListener("brushCancel",l),v=n.addInteractionListener("brushEnd",l);return()=>{f.cleanup(),p.cleanup(),v.cleanup(),x.cleanup()}},[t,n,e,l,i,r]),{instance:{setBrushCoordinates:i,clearBrush:l,setZoomBrushEnabled:o}}};Zp.params={brushConfig:!0};Zp.getDefaultizedParams=({params:e})=>Ke({},e,{brushConfig:{enabled:e?.brushConfig?.enabled??!1,preventTooltip:e?.brushConfig?.preventTooltip??!0,preventHighlight:e?.brushConfig?.preventHighlight??!0}});Zp.getInitialState=e=>({brush:{enabled:e.brushConfig.enabled,isZoomBrushEnabled:!1,preventTooltip:e.brushConfig.preventTooltip,preventHighlight:e.brushConfig.preventHighlight,start:null,current:null}});const Of=e=>e.controlledCartesianAxisHighlight,B9=(e,t,n,s)=>s?[]:n!==void 0?n.filter(r=>t.axis[r.axisId]!==void 0).map(r=>r):e===null?[]:[{axisId:t.axisIds[0],dataIndex:e}],H9=Sn(oL,Us,Of,Xw,B9);Sn(cL,Fs,Of,Xw,B9);const G9=(e,t,n,s,r,i,l)=>{if(l)return[];if(s!==void 0)return s.map(u=>Ke({},u,{value:n.axis[u.axisId]?.data?.[u.dataIndex]})).filter(({value:u})=>u!==void 0);const o=t!==null&&{axisId:n.axisIds[0],dataIndex:e,value:t},c=r&&n.axis[r.axisId]?.data?.[r.dataIndex],d=r&&c!=null&&Ke({},r,{value:c});if(i==="pointer"){if(o)return[o];if(d)return[d]}if(i==="keyboard"){if(d)return[d];if(o)return[o]}return[]},bfe=Nt(oL,ofe,Us,Of,afe,Xp,Xw,G9),vfe=Nt(cL,cfe,Fs,Of,nfe,Xp,Xw,G9),W9=(e,t)=>e===void 0?[t.axis[t.axisIds[0]]]:e.map(s=>t.axis[s.axisId]??null).filter(s=>s!==null);Nt(Of,Us,W9);Nt(Of,Fs,W9);function JI(e,t){return e.id!==void 0?e:Ke({id:t},e)}function e$(e){return e.colorMap?Ke({},e,{colorScale:e.colorMap.type==="ordinal"&&e.data?of(Ke({values:e.data},e.colorMap)):Km(e.colorMap.type==="continuous"?Ke({min:e.min,max:e.max},e.colorMap):e.colorMap)}):e}function V9(e,t){if(!e||e.length===0)return{axis:{},axisIds:[]};const n={},s=[];return e.forEach((r,i)=>{const l=r.dataKey,o=r.id??`defaultized-z-axis-${i}`;if(l===void 0||r.data!==void 0){n[o]=e$(JI(r,o)),s.push(o);return}if(t===void 0)throw new Error("MUI X Charts: z-axis uses `dataKey` but no `dataset` is provided.");n[o]=e$(JI(Ke({},r,{data:t.map(c=>c[l])}),o)),s.push(o)}),{axis:n,axisIds:s}}const Jp=({params:e,store:t})=>{const{zAxis:n,dataset:s}=e,r=h.useRef(!0);return h.useEffect(()=>{if(r.current){r.current=!1;return}t.set("zAxis",V9(n,s))},[n,s,t]),{}};Jp.params={zAxis:!0,dataset:!0};Jp.getInitialState=e=>({zAxis:V9(e.zAxis,e.dataset)});const wfe=e=>e,Nfe=Nt(wfe,e=>e.zAxis),ex=({store:e,params:t})=>{NH({controlled:t.highlightedItem}),Kn(()=>{e.state.highlight.item!==t.highlightedItem&&e.set("highlight",Ke({},e.state.highlight,{item:t.highlightedItem}))},[e,t.highlightedItem]);const n=rs(()=>{t.onHighlightChange?.(null);const r=e.getSnapshot().highlight;r.item===null||r.isControlled||e.set("highlight",{item:null,lastUpdate:"pointer",isControlled:!1})}),s=rs(r=>{const i=e.getSnapshot().highlight;i.isControlled||S9(i.item,r)||(t.onHighlightChange?.(r),e.set("highlight",{item:r,lastUpdate:"pointer",isControlled:!1}))});return{instance:{clearHighlight:n,setHighlight:s}}};ex.getInitialState=e=>({highlight:{item:e.highlightedItem,lastUpdate:"pointer",isControlled:e.highlightedItem!==void 0}});ex.params={highlightedItem:!0,onHighlightChange:!0};function Hb(e){let t=1/0,n=-1/0;for(const s of e??[])s<t&&(t=s),s>n&&(n=s);return[t,n]}const t$=(e,t)=>t==="x"?{x:e,y:null}:{x:null,y:e},q9=e=>{const{axis:t,getFilters:n,isDefaultAxis:s}=e,r=n?.({currentAxisId:t.id,isDefaultAxis:s}),i=r?t.data?.filter((l,o)=>r({x:null,y:null},o)):t.data;return Hb(i??[])},Y9=e=>t=>{const{series:n,axis:s,getFilters:r,isDefaultAxis:i}=t;return Object.keys(n).filter(l=>{const o=e==="x"?n[l].xAxisId:n[l].yAxisId;return o===s.id||i&&o===void 0}).reduce((l,o)=>{const{stackedData:c}=n[o],d=r?.({currentAxisId:s.id,isDefaultAxis:i,seriesXAxisId:n[o].xAxisId,seriesYAxisId:n[o].yAxisId}),[u,f]=c?.reduce((p,x,v)=>d&&(!d(t$(x[0],e),v)||!d(t$(x[1],e),v))?p:[Math.min(...x,p[0]),Math.max(...x,p[1])],[1/0,-1/0])??[1/0,-1/0];return[Math.min(u,l[0]),Math.max(f,l[1])]},[1/0,-1/0])},jfe=e=>Object.keys(e.series).some(n=>e.series[n].layout==="horizontal")?Y9("x")(e):q9(e),Cfe=e=>Object.keys(e.series).some(n=>e.series[n].layout==="horizontal")?q9(e):Y9("y")(e);function fa(e){return function(){return e}}const K9=Math.cos,Gb=Math.sin,$i=Math.sqrt,a$=1e-12,Wb=Math.PI,Qd=2*Wb,dE=Math.PI,uE=2*dE,Ad=1e-6,Sfe=uE-Ad;function Q9(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function _fe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Q9;const n=10**t;return function(s){this._+=s[0];for(let r=1,i=s.length;r<i;++r)this._+=Math.round(arguments[r]*n)/n+s[r]}}class Afe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Q9:_fe(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,s,r){this._append`Q${+t},${+n},${this._x1=+s},${this._y1=+r}`}bezierCurveTo(t,n,s,r,i,l){this._append`C${+t},${+n},${+s},${+r},${this._x1=+i},${this._y1=+l}`}arcTo(t,n,s,r,i){if(t=+t,n=+n,s=+s,r=+r,i=+i,i<0)throw new Error(`negative radius: ${i}`);let l=this._x1,o=this._y1,c=s-t,d=r-n,u=l-t,f=o-n,p=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(p>Ad)if(!(Math.abs(f*c-d*u)>Ad)||!i)this._append`L${this._x1=t},${this._y1=n}`;else{let x=s-l,v=r-o,w=c*c+d*d,b=x*x+v*v,C=Math.sqrt(w),N=Math.sqrt(p),S=i*Math.tan((dE-Math.acos((w+p-b)/(2*C*N)))/2),A=S/N,k=S/C;Math.abs(A-1)>Ad&&this._append`L${t+A*u},${n+A*f}`,this._append`A${i},${i},0,0,${+(f*x>u*v)},${this._x1=t+k*c},${this._y1=n+k*d}`}}arc(t,n,s,r,i,l){if(t=+t,n=+n,s=+s,l=!!l,s<0)throw new Error(`negative radius: ${s}`);let o=s*Math.cos(r),c=s*Math.sin(r),d=t+o,u=n+c,f=1^l,p=l?r-i:i-r;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>Ad||Math.abs(this._y1-u)>Ad)&&this._append`L${d},${u}`,s&&(p<0&&(p=p%uE+uE),p>Sfe?this._append`A${s},${s},0,1,${f},${t-o},${n-c}A${s},${s},0,1,${f},${this._x1=d},${this._y1=u}`:p>Ad&&this._append`A${s},${s},0,${+(p>=dE)},${f},${this._x1=t+s*Math.cos(i)},${this._y1=n+s*Math.sin(i)}`)}rect(t,n,s,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${s=+s}v${+r}h${-s}Z`}toString(){return this._}}function dL(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const s=Math.floor(n);if(!(s>=0))throw new RangeError(`invalid digits: ${n}`);t=s}return e},()=>new Afe(t)}function Zw(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function X9(e){this._context=e}X9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function tx(e){return new X9(e)}function Z9(e){return e[0]}function J9(e){return e[1]}function uL(e,t){var n=fa(!0),s=null,r=tx,i=null,l=dL(o);e=typeof e=="function"?e:e===void 0?Z9:fa(e),t=typeof t=="function"?t:t===void 0?J9:fa(t);function o(c){var d,u=(c=Zw(c)).length,f,p=!1,x;for(s==null&&(i=r(x=l())),d=0;d<=u;++d)!(d<u&&n(f=c[d],d,c))===p&&((p=!p)?i.lineStart():i.lineEnd()),p&&i.point(+e(f,d,c),+t(f,d,c));if(x)return i=null,x+""||null}return o.x=function(c){return arguments.length?(e=typeof c=="function"?c:fa(+c),o):e},o.y=function(c){return arguments.length?(t=typeof c=="function"?c:fa(+c),o):t},o.defined=function(c){return arguments.length?(n=typeof c=="function"?c:fa(!!c),o):n},o.curve=function(c){return arguments.length?(r=c,s!=null&&(i=r(s)),o):r},o.context=function(c){return arguments.length?(c==null?s=i=null:i=r(s=c),o):s},o}function pg(e,t,n){var s=null,r=fa(!0),i=null,l=tx,o=null,c=dL(d);e=typeof e=="function"?e:e===void 0?Z9:fa(+e),t=typeof t=="function"?t:fa(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?J9:fa(+n);function d(f){var p,x,v,w=(f=Zw(f)).length,b,C=!1,N,S=new Array(w),A=new Array(w);for(i==null&&(o=l(N=c())),p=0;p<=w;++p){if(!(p<w&&r(b=f[p],p,f))===C)if(C=!C)x=p,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),v=p-1;v>=x;--v)o.point(S[v],A[v]);o.lineEnd(),o.areaEnd()}C&&(S[p]=+e(b,p,f),A[p]=+t(b,p,f),o.point(s?+s(b,p,f):S[p],n?+n(b,p,f):A[p]))}if(N)return o=null,N+""||null}function u(){return uL().defined(r).curve(l).context(i)}return d.x=function(f){return arguments.length?(e=typeof f=="function"?f:fa(+f),s=null,d):e},d.x0=function(f){return arguments.length?(e=typeof f=="function"?f:fa(+f),d):e},d.x1=function(f){return arguments.length?(s=f==null?null:typeof f=="function"?f:fa(+f),d):s},d.y=function(f){return arguments.length?(t=typeof f=="function"?f:fa(+f),n=null,d):t},d.y0=function(f){return arguments.length?(t=typeof f=="function"?f:fa(+f),d):t},d.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:fa(+f),d):n},d.lineX0=d.lineY0=function(){return u().x(e).y(t)},d.lineY1=function(){return u().x(e).y(n)},d.lineX1=function(){return u().x(s).y(t)},d.defined=function(f){return arguments.length?(r=typeof f=="function"?f:fa(!!f),d):r},d.curve=function(f){return arguments.length?(l=f,i!=null&&(o=l(i)),d):l},d.context=function(f){return arguments.length?(f==null?i=o=null:o=l(i=f),d):i},d}function Efe(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function Tfe(e){return e}function kfe(){var e=Tfe,t=Efe,n=null,s=fa(0),r=fa(Qd),i=fa(0);function l(o){var c,d=(o=Zw(o)).length,u,f,p=0,x=new Array(d),v=new Array(d),w=+s.apply(this,arguments),b=Math.min(Qd,Math.max(-Qd,r.apply(this,arguments)-w)),C,N=Math.min(Math.abs(b)/d,i.apply(this,arguments)),S=N*(b<0?-1:1),A;for(c=0;c<d;++c)(A=v[x[c]=c]=+e(o[c],c,o))>0&&(p+=A);for(t!=null?x.sort(function(k,_){return t(v[k],v[_])}):n!=null&&x.sort(function(k,_){return n(o[k],o[_])}),c=0,f=p?(b-d*S)/p:0;c<d;++c,w=C)u=x[c],A=v[u],C=w+(A>0?A*f:0)+S,v[u]={data:o[u],index:c,value:A,startAngle:w,endAngle:C,padAngle:N};return v}return l.value=function(o){return arguments.length?(e=typeof o=="function"?o:fa(+o),l):e},l.sortValues=function(o){return arguments.length?(t=o,n=null,l):t},l.sort=function(o){return arguments.length?(n=o,t=null,l):n},l.startAngle=function(o){return arguments.length?(s=typeof o=="function"?o:fa(+o),l):s},l.endAngle=function(o){return arguments.length?(r=typeof o=="function"?o:fa(+o),l):r},l.padAngle=function(o){return arguments.length?(i=typeof o=="function"?o:fa(+o),l):i},l}class eG{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function tG(e){return new eG(e,!0)}function aG(e){return new eG(e,!1)}const Jw={draw(e,t){const n=$i(t/Wb);e.moveTo(n,0),e.arc(0,0,n,0,Qd)}},nG={draw(e,t){const n=$i(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},sG=$i(1/3),Lfe=sG*2,rG={draw(e,t){const n=$i(t/Lfe),s=n*sG;e.moveTo(0,-n),e.lineTo(s,0),e.lineTo(0,n),e.lineTo(-s,0),e.closePath()}},iG={draw(e,t){const n=$i(t),s=-n/2;e.rect(s,s,n,n)}},Pfe=.8908130915292852,lG=Gb(Wb/10)/Gb(7*Wb/10),Dfe=Gb(Qd/10)*lG,Ofe=-K9(Qd/10)*lG,oG={draw(e,t){const n=$i(t*Pfe),s=Dfe*n,r=Ofe*n;e.moveTo(0,-n),e.lineTo(s,r);for(let i=1;i<5;++i){const l=Qd*i/5,o=K9(l),c=Gb(l);e.lineTo(c*n,-o*n),e.lineTo(o*s-c*r,c*s+o*r)}e.closePath()}},iS=$i(3),cG={draw(e,t){const n=-$i(t/(iS*3));e.moveTo(0,n*2),e.lineTo(-iS*n,-n),e.lineTo(iS*n,-n),e.closePath()}},Gr=-.5,Wr=$i(3)/2,mE=1/$i(12),Mfe=(mE/2+1)*3,dG={draw(e,t){const n=$i(t/Mfe),s=n/2,r=n*mE,i=s,l=n*mE+n,o=-i,c=l;e.moveTo(s,r),e.lineTo(i,l),e.lineTo(o,c),e.lineTo(Gr*s-Wr*r,Wr*s+Gr*r),e.lineTo(Gr*i-Wr*l,Wr*i+Gr*l),e.lineTo(Gr*o-Wr*c,Wr*o+Gr*c),e.lineTo(Gr*s+Wr*r,Gr*r-Wr*s),e.lineTo(Gr*i+Wr*l,Gr*l-Wr*i),e.lineTo(Gr*o+Wr*c,Gr*c-Wr*o),e.closePath()}},uG=[Jw,nG,rG,iG,oG,cG,dG];function mL(e,t){let n=null,s=dL(r);e=typeof e=="function"?e:fa(e||Jw),t=typeof t=="function"?t:fa(t===void 0?64:+t);function r(){let i;if(n||(n=i=s()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+""||null}return r.type=function(i){return arguments.length?(e=typeof i=="function"?i:fa(i),r):e},r.size=function(i){return arguments.length?(t=typeof i=="function"?i:fa(+i),r):t},r.context=function(i){return arguments.length?(n=i??null,r):n},r}function Vb(){}function qb(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function mG(e){this._context=e}mG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:qb(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:qb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Ife(e){return new mG(e)}function fG(e){this._context=e}fG.prototype={areaStart:Vb,areaEnd:Vb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:qb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function $fe(e){return new fG(e)}function hG(e){this._context=e}hG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,s=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,s):this._context.moveTo(n,s);break;case 3:this._point=4;default:qb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Rfe(e){return new hG(e)}function n$(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function fL(e,t){this._context=e,this._k=(1-t)/6}fL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:n$(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:n$(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};(function e(t){function n(s){return new fL(s,t)}return n.tension=function(s){return e(+s)},n})(0);function zfe(e,t,n){var s=e._x1,r=e._y1,i=e._x2,l=e._y2;if(e._l01_a>a$){var o=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,c=3*e._l01_a*(e._l01_a+e._l12_a);s=(s*o-e._x0*e._l12_2a+e._x2*e._l01_2a)/c,r=(r*o-e._y0*e._l12_2a+e._y2*e._l01_2a)/c}if(e._l23_a>a$){var d=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);i=(i*d+e._x1*e._l23_2a-t*e._l12_2a)/u,l=(l*d+e._y1*e._l23_2a-n*e._l12_2a)/u}e._context.bezierCurveTo(s,r,i,l,e._x2,e._y2)}function gG(e,t){this._context=e,this._alpha=t}gG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,s=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+s*s,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:zfe(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Ufe=(function e(t){function n(s){return t?new gG(s,t):new fL(s,0)}return n.alpha=function(s){return e(+s)},n})(.5);function pG(e){this._context=e}pG.prototype={areaStart:Vb,areaEnd:Vb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Ffe(e){return new pG(e)}function s$(e){return e<0?-1:1}function r$(e,t,n){var s=e._x1-e._x0,r=t-e._x1,i=(e._y1-e._y0)/(s||r<0&&-0),l=(n-e._y1)/(r||s<0&&-0),o=(i*r+l*s)/(s+r);return(s$(i)+s$(l))*Math.min(Math.abs(i),Math.abs(l),.5*Math.abs(o))||0}function i$(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function lS(e,t,n){var s=e._x0,r=e._y0,i=e._x1,l=e._y1,o=(i-s)/3;e._context.bezierCurveTo(s+o,r+o*t,i-o,l-o*n,i,l)}function Yb(e){this._context=e}Yb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:lS(this,this._t0,i$(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,lS(this,i$(this,n=r$(this,e,t)),n);break;default:lS(this,this._t0,n=r$(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function xG(e){this._context=new yG(e)}(xG.prototype=Object.create(Yb.prototype)).point=function(e,t){Yb.prototype.point.call(this,t,e)};function yG(e){this._context=e}yG.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,s,r,i){this._context.bezierCurveTo(t,e,s,n,i,r)}};function fE(e){return new Yb(e)}function bG(e){return new xG(e)}function vG(e){this._context=e}vG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var s=l$(e),r=l$(t),i=0,l=1;l<n;++i,++l)this._context.bezierCurveTo(s[0][i],r[0][i],s[1][i],r[1][i],e[l],t[l]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function l$(e){var t,n=e.length-1,s,r=new Array(n),i=new Array(n),l=new Array(n);for(r[0]=0,i[0]=2,l[0]=e[0]+2*e[1],t=1;t<n-1;++t)r[t]=1,i[t]=4,l[t]=4*e[t]+2*e[t+1];for(r[n-1]=2,i[n-1]=7,l[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)s=r[t]/i[t-1],i[t]-=s,l[t]-=s*l[t-1];for(r[n-1]=l[n-1]/i[n-1],t=n-2;t>=0;--t)r[t]=(l[t]-r[t+1])/i[t];for(i[n-1]=(e[n]+r[n-1])/2,t=0;t<n-1;++t)i[t]=2*e[t+1]-r[t+1];return[r,i]}function wG(e){return new vG(e)}function eN(e,t){this._context=e,this._t=t}eN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function NG(e){return new eN(e,.5)}function jG(e){return new eN(e,0)}function CG(e){return new eN(e,1)}function Fc(e,t){if((l=e.length)>1)for(var n=1,s,r,i=e[t[0]],l,o=i.length;n<l;++n)for(r=i,i=e[t[n]],s=0;s<o;++s)i[s][1]+=i[s][0]=isNaN(r[s][1])?r[s][0]:r[s][1]}function cu(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Bfe(e,t){return e[t]}function Hfe(e){const t=[];return t.key=e,t}function hL(){var e=fa([]),t=cu,n=Fc,s=Bfe;function r(i){var l=Array.from(e.apply(this,arguments),Hfe),o,c=l.length,d=-1,u;for(const f of i)for(o=0,++d;o<c;++o)(l[o][d]=[0,+s(f,l[o].key,d,i)]).data=f;for(o=0,u=Zw(t(l));o<c;++o)l[u[o]].index=o;return n(l,u),l}return r.keys=function(i){return arguments.length?(e=typeof i=="function"?i:fa(Array.from(i)),r):e},r.value=function(i){return arguments.length?(s=typeof i=="function"?i:fa(+i),r):s},r.order=function(i){return arguments.length?(t=i==null?cu:typeof i=="function"?i:fa(Array.from(i)),r):t},r.offset=function(i){return arguments.length?(n=i??Fc,r):n},r}function SG(e,t){if((s=e.length)>0){for(var n,s,r=0,i=e[0].length,l;r<i;++r){for(l=n=0;n<s;++n)l+=e[n][r][1]||0;if(l)for(n=0;n<s;++n)e[n][r][1]/=l}Fc(e,t)}}function Gfe(e,t){if((c=e.length)>0)for(var n,s=0,r,i,l,o,c,d=e[t[0]].length;s<d;++s)for(l=o=0,n=0;n<c;++n)(i=(r=e[t[n]][s])[1]-r[0])>0?(r[0]=l,r[1]=l+=i):i<0?(r[1]=o,r[0]=o+=i):(r[0]=0,r[1]=i)}function _G(e,t){if((r=e.length)>0){for(var n=0,s=e[t[0]],r,i=s.length;n<i;++n){for(var l=0,o=0;l<r;++l)o+=e[l][n][1]||0;s[n][1]+=s[n][0]=-o/2}Fc(e,t)}}function AG(e,t){if(!(!((l=e.length)>0)||!((i=(r=e[t[0]]).length)>0))){for(var n=0,s=1,r,i,l;s<i;++s){for(var o=0,c=0,d=0;o<l;++o){for(var u=e[t[o]],f=u[s][1]||0,p=u[s-1][1]||0,x=(f-p)/2,v=0;v<o;++v){var w=e[t[v]],b=w[s][1]||0,C=w[s-1][1]||0;x+=b-C}c+=f,d+=x*f}r[s-1][1]+=r[s-1][0]=n,c&&(n-=d/c)}r[s-1][1]+=r[s-1][0]=n,Fc(e,t)}}function EG(e){var t=e.map(Wfe);return cu(e).sort(function(n,s){return t[n]-t[s]})}function Wfe(e){for(var t=-1,n=0,s=e.length,r,i=-1/0;++t<s;)(r=+e[t][1])>i&&(i=r,n=t);return n}function TG(e){var t=e.map(kG);return cu(e).sort(function(n,s){return t[n]-t[s]})}function kG(e){for(var t=0,n=-1,s=e.length,r;++n<s;)(r=+e[n][1])&&(t+=r);return t}function Vfe(e){return TG(e).reverse()}function qfe(e){var t=e.length,n,s,r=e.map(kG),i=EG(e),l=0,o=0,c=[],d=[];for(n=0;n<t;++n)s=i[n],l<o?(l+=r[s],c.push(s)):(o+=r[s],d.push(s));return d.reverse().concat(c)}function Yfe(e){return cu(e).reverse()}const oS={appearance:EG,ascending:TG,descending:Vfe,insideOut:qfe,none:cu,reverse:Yfe},cS={expand:SG,diverging:Gfe,none:Fc,silhouette:_G,wiggle:AG},LG=e=>{const{series:t,seriesOrder:n,defaultStrategy:s}=e,r=[],i={};return n.forEach(l=>{const{stack:o,stackOrder:c,stackOffset:d}=t[l];o===void 0?r.push({ids:[l],stackingOrder:oS.none,stackingOffset:cS.none}):i[o]===void 0?(i[o]=r.length,r.push({ids:[l],stackingOrder:oS[c??s?.stackOrder??"none"],stackingOffset:cS[d??s?.stackOffset??"diverging"]})):(r[i[o]].ids.push(l),c!==void 0&&(r[i[o]].stackingOrder=oS[c]),d!==void 0&&(r[i[o]].stackingOffset=cS[d]))}),r},Kfe=e=>e==null?"":e.toLocaleString(),Qfe=(e,t)=>{const{seriesOrder:n,series:s}=e,r=LG(e),i=t??[];n.forEach(o=>{const c=s[o].data;if(c!==void 0)c.forEach((d,u)=>{i.length<=u?i.push({[o]:d}):i[u][o]=d});else if(t===void 0)throw new Error([`MUI X Charts: bar series with id='${o}' has no data.`,"Either provide a data property to the series or use the dataset prop."].join(`
`))});const l={};return r.forEach(o=>{const{ids:c,stackingOffset:d,stackingOrder:u}=o,f=hL().keys(c.map(p=>{const x=s[p].dataKey;return s[p].data===void 0&&x!==void 0?x:p})).value((p,x)=>p[x]??0).order(u).offset(d)(i);c.forEach((p,x)=>{const v=s[p].dataKey;l[p]=Ke({layout:"vertical",labelMarkType:"square",minBarSize:0,valueFormatter:s[p].valueFormatter??Kfe},s[p],{data:v?t.map(w=>{const b=w[v];return typeof b=="number"?b:null}):s[p].data,stackedData:f[x].map(([w,b])=>[w,b])})})}),{seriesOrder:n,stackingGroups:r,series:l}};function Li(e,t){return typeof e=="function"?e(t):e}const Xfe=e=>{const{seriesOrder:t,series:n}=e;return t.reduce((s,r)=>{const i=Li(n[r].label,"legend");return i===void 0||s.push({markType:n[r].labelMarkType,id:r,seriesId:r,color:n[r].color,label:i}),s},[])};function gL(e){return e.colorGetter?e.colorGetter:()=>e.color}const Zfe=(e,t,n)=>{const s=e.layout==="vertical",r=s?t?.colorScale:n?.colorScale,i=s?n?.colorScale:t?.colorScale,l=s?t?.data:n?.data,o=gL(e);return i?c=>{if(c===void 0)return e.color;const d=e.data[c],u=d===null?o({value:d,dataIndex:c}):i(d);return u===null?o({value:d,dataIndex:c}):u}:r&&l?c=>{if(c===void 0)return e.color;const d=l[c],u=d===null?o({value:d,dataIndex:c}):r(d);return u===null?o({value:d,dataIndex:c}):u}:c=>{if(c===void 0)return e.color;const d=e.data[c];return o({value:d,dataIndex:c})}},Jfe=e=>{const{series:t,getColor:n,identifier:s}=e;if(!s||s.dataIndex===void 0)return null;const r=Li(t.label,"tooltip"),i=t.data[s.dataIndex];if(i==null)return null;const l=t.valueFormatter(i,{dataIndex:s.dataIndex});return{identifier:s,color:n(s.dataIndex),label:r,value:i,formattedValue:l,markType:t.labelMarkType}},ehe=e=>Object.values(e).map(t=>t.layout==="horizontal"?{direction:"y",axisId:t.yAxisId}:{direction:"x",axisId:t.xAxisId});function Fa(){const e=Dr();if(!e)throw new Error(["MUI X Charts: Could not find the charts context.","It looks like you rendered your component outside of a ChartContainer parent component."].join(`
`));return e.store}function hi(){const e=Fa();return Rt(e,ir)}function tN(){const e=Fa();return Rt(e,jce)}function pL(e){return d9.getTypes().has(e)}const the=(e,t,n,s,r,i,l)=>{const o=s==="rotation"?r[t].rotationExtremumGetter:r[t].radiusExtremumGetter,c=l[t]?.series??{},[d,u]=o?.({series:c,axis:n,axisIndex:i,isDefaultAxis:i===0})??[1/0,-1/0],[f,p]=e;return[Math.min(d,f),Math.max(u,p)]},ahe=(e,t,n,s,r)=>{const l=Object.keys(n).filter(pL).reduce((o,c)=>the(o,c,e,t,n,s,r),[1/0,-1/0]);return Number.isNaN(l[0])||Number.isNaN(l[1])?[1/0,-1/0]:l},Ec=(e,t)=>e===void 0?t:Math.PI*e/180,nhe=(e,t,n,s)=>{const r=new Set;return Object.keys(t).filter(pL).forEach(l=>{const o=n[l]?.series??{},c=t[l].axisTooltipGetter?.(o);c!==void 0&&c.forEach(({axisId:d,direction:u})=>{u===e&&r.add(d??s)})}),r};function she(e,t,n){if(t==="rotation"){if(n.scaleType==="point"){const s=[Ec(n.startAngle,0),Ec(n.endAngle,2*Math.PI)],r=s[1]-s[0];return r>Math.PI*2-.1&&(s[1]-=r/n.data.length),s}return[Ec(n.startAngle,0),Ec(n.endAngle,2*Math.PI)]}return[0,Math.min(e.height,e.width)/2]}const rhe=.2,ihe=.1;function PG({drawingArea:e,formattedSeries:t,axis:n,seriesConfig:s,axisDirection:r}){if(n===void 0)return{axis:{},axisIds:[]};const i=nhe(r,s,t,n[0].id),l={};return n.forEach((o,c)=>{const d=o,u=she(e,r,d),[f,p]=ahe(d,r,s,c,t),x=!d.ignoreTooltip&&i.has(d.id),v=d.data??[];if(Su(d)){const I=d.categoryGapRatio??rhe,z=d.barGapRatio??ihe;if(l[d.id]=Ke({offset:0,categoryGapRatio:I,barGapRatio:z,triggerTooltip:x},d,{data:v,scale:Fw(d.data,u).paddingInner(I).paddingOuter(I/2),tickNumber:d.data.length,colorScale:d.colorMap&&(d.colorMap.type==="ordinal"?of(Ke({values:d.data},d.colorMap)):Km(d.colorMap))}),iE(d.data)){const $=lE(d.data,u,d.tickNumber);l[d.id].valueFormatter=d.valueFormatter??$}}if(_u(d)&&(l[d.id]=Ke({offset:0,triggerTooltip:x},d,{data:v,scale:o9(d.data,u),tickNumber:d.data.length,colorScale:d.colorMap&&(d.colorMap.type==="ordinal"?of(Ke({values:d.data},d.colorMap)):Km(d.colorMap))}),iE(d.data))){const I=lE(d.data,u,d.tickNumber);l[d.id].valueFormatter=d.valueFormatter??I}if(!Kce(d))return;const w=d.scaleType??"linear",b=d.domainLimit??"nice",C=[d.min??f,d.max??p];if(typeof b=="function"){const{min:I,max:z}=b(f,p);C[0]=I,C[1]=z}const N=i9(d,C,sL(Math.abs(u[1]-u[0]))),S=l9(N,u),A=Bw(w,C,u),k=b==="nice"?A.nice(N):A,[_,T]=k.domain(),E=[d.min??_,d.max??T];l[d.id]=Ke({offset:0,triggerTooltip:x},d,{data:v,scaleType:w,scale:k.domain(E),tickNumber:S,colorScale:d.colorMap&&Km(d.colorMap)})}),{axis:l,axisIds:n.map(({id:o})=>o)}}const DG=e=>e.polarAxis,OG=Nt(DG,e=>e?.rotation),lhe=Nt(DG,e=>e?.radius),ku=Nt(OG,ir,on,Pr,(e,t,n,s)=>PG({drawingArea:t,formattedSeries:n,axis:e,seriesConfig:s,axisDirection:"rotation"}));Nt(lhe,ir,on,Pr,(e,t,n,s)=>PG({drawingArea:t,formattedSeries:n,axis:e,seriesConfig:s,axisDirection:"radius"}));const ohe=Nt(ir,e=>({cx:e.left+e.width/2,cy:e.top+e.height/2})),che=e=>(t,n)=>Math.atan2(t-e.cx,e.cy-n);function aN(e){return(e%360+360)%360}const dS=2*Math.PI;function dhe(e){return(e%dS+dS)%dS}function o$(e,t){const{scale:n,data:s,reverse:r}=e;if(!cs(n))throw new Error("MUI X Charts: getAxisValue is not implemented for polare continuous axes.");if(!s)return-1;const i=dhe(t-Math.min(...n.range())),l=n.bandwidth()===0?Math.floor((i+n.step()/2)/n.step())%s.length:Math.floor(i/n.step());return l<0||l>=s.length?-1:r?s.length-1-l:l}function lr(){const e=Fa(),{axis:t,axisIds:n}=Rt(e,Us);return{xAxis:t,xAxisIds:n}}function or(){const e=Fa(),{axis:t,axisIds:n}=Rt(e,Fs);return{yAxis:t,yAxisIds:n}}function uhe(e){const t=Fa(),{axis:n,axisIds:s}=Rt(t,Us),r=s[0];return n[r]}function mhe(e){const t=Fa(),{axis:n,axisIds:s}=Rt(t,Fs),r=s[0];return n[r]}function MG(){const e=Fa(),{axis:t,axisIds:n}=Rt(e,ku);return{rotationAxis:t,rotationAxisIds:n}}function fhe(e){const t=Fa(),{axis:n,axisIds:s}=Rt(t,ku),r=s[0];return n[r]}function Mf(e){if(cs(e))return n=>(e(n)??0)+e.bandwidth()/2;const t=e.domain();return t[0]===t[1]?n=>n===t[0]?e(n):NaN:n=>e(n)}function xL(){const e=Fa(),{axis:t,axisIds:n}=Rt(e,Nfe)??{axis:{},axisIds:[]};return{zAxis:t,zAxisIds:n}}function yL(){const e=Dr();if(!e)throw new Error(["MUI X Charts: Could not find the svg ref context.","It looks like you rendered your component outside of a ChartContainer parent component."].join(`
`));return e.svgRef}function nN(){const e=Fa();return Rt(e,on)}const hhe=Nt(on,(e,t)=>e[t]);Sn(on,(e,t,n)=>{if(!n||Array.isArray(n)&&n.length===0)return e[t]?.seriesOrder?.map(r=>e[t]?.series[r])??[];if(!Array.isArray(n))return e[t]?.series?.[n];const s=[];for(const r of n){const i=e[t]?.series?.[r];i&&s.push(i)}return s});const ghe=e=>{const t=Fa();return Rt(t,hhe,e)};function ax(){return ghe("line")}function phe(){return!1}function IG(e,t){return!e||!t?phe:function(s){return s?e.highlight==="series"?s.seriesId===t.seriesId:e.highlight==="item"?s.dataIndex===t.dataIndex&&s.seriesId===t.seriesId:!1:!1}}function xhe(){return!1}function $G(e,t){return!e||!t?xhe:function(s){return s?e.fade==="series"?s.seriesId===t.seriesId&&s.dataIndex!==t.dataIndex:e.fade==="global"?s.seriesId!==t.seriesId||s.dataIndex!==t.dataIndex:!1:!1}}function bL(e,t,n){return e?.highlight==="series"&&t?.seriesId===n}function yhe(e,t,n){return bL(e,t,n)?!1:e?.fade==="global"&&t!=null||e?.fade==="series"&&t?.seriesId===n}function RG(e,t,n){return e?.highlight==="item"&&t?.seriesId===n?t.dataIndex:null}function bhe(e,t,n){return bL(e,t,n)||RG(e,t,n)===t?.dataIndex?null:(e?.fade==="series"||e?.fade==="global")&&t?.seriesId===n?t.dataIndex:null}const vhe=e=>e.highlight,whe=Nt(on,e=>{const t=new Map;return Object.keys(e).forEach(n=>{const s=e[n];s?.seriesOrder?.forEach(r=>{const i=s?.series[r];t.set(r,i?.highlightScope)})}),t}),Mo=Sn(vhe,D9,function(t,n){return t.isControlled||t.lastUpdate==="pointer"?t.item:n}),Jc=Nt(whe,Mo,function(t,n){if(!n)return null;const s=t.get(n.seriesId);return s===void 0?null:s}),Nhe=Nt(Jc,Mo,IG),jhe=Nt(Jc,Mo,$G),Che=Nt(Jc,Mo,function(t,n,s){return IG(t,n)(s)});Nt(Jc,Mo,bL);Nt(Jc,Mo,yhe);Nt(Jc,Mo,bhe);Nt(Jc,Mo,RG);const She=Nt(Jc,Mo,function(t,n,s){return $G(t,n)(s)});function zG(e){const t=Fa(),n=Rt(t,Che,e),s=Rt(t,She,e);return{isHighlighted:n,isFaded:!n&&s}}function _he(){const e=Fa(),t=Rt(e,Nhe),n=Rt(e,jhe);return{isHighlighted:t,isFaded:n}}function Ahe(e,t){return Object.keys(e).flatMap(n=>{const s=t[n].legendGetter;return s===void 0?[]:s(e[n])})}function Ehe(){const e=nN(),t=Fa(),n=Rt(t,Pr);return{items:Ahe(e,n)}}function vL(){const e=tN();return h.useCallback(t=>`${e}-gradient-${t}`,[e])}function The(){const e=tN();return h.useCallback(t=>`${e}-gradient-${t}-object-bound`,[e])}var uS,c$;function khe(){if(c$)return uS;c$=1;var e=4,t=.001,n=1e-7,s=10,r=11,i=1/(r-1),l=typeof Float32Array=="function";function o(w,b){return 1-3*b+3*w}function c(w,b){return 3*b-6*w}function d(w){return 3*w}function u(w,b,C){return((o(b,C)*w+c(b,C))*w+d(b))*w}function f(w,b,C){return 3*o(b,C)*w*w+2*c(b,C)*w+d(b)}function p(w,b,C,N,S){var A,k,_=0;do k=b+(C-b)/2,A=u(k,N,S)-w,A>0?C=k:b=k;while(Math.abs(A)>n&&++_<s);return k}function x(w,b,C,N){for(var S=0;S<e;++S){var A=f(b,C,N);if(A===0)return b;var k=u(b,C,N)-w;b-=k/A}return b}function v(w){return w}return uS=function(b,C,N,S){if(!(0<=b&&b<=1&&0<=N&&N<=1))throw new Error("bezier x values must be in [0, 1] range");if(b===C&&N===S)return v;for(var A=l?new Float32Array(r):new Array(r),k=0;k<r;++k)A[k]=u(k*i,b,N);function _(T){for(var E=0,I=1,z=r-1;I!==z&&A[I]<=T;++I)E+=i;--I;var $=(T-A[I])/(A[I+1]-A[I]),P=E+$*i,O=f(P,b,N);return O>=t?x(T,P,b,N):O===0?P:p(T,E,E+i,b,N)}return function(E){return E===0?0:E===1?1:u(_(E),C,S)}},uS}var Lhe=khe();const Phe=Oi(Lhe),sN=300,wL="cubic-bezier(0.66, 0, 0.34, 1)",Dhe=Phe(.66,0,.34,1);var df=0,xg=0,Vh=0,UG=1e3,Kb,yg,Qb=0,du=0,rN=0,Jg=typeof performance=="object"&&performance.now?performance:Date,FG=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function NL(){return du||(FG(Ohe),du=Jg.now()+rN)}function Ohe(){du=0}function Xb(){this._call=this._time=this._next=null}Xb.prototype=BG.prototype={constructor:Xb,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?NL():+n)+(t==null?0:+t),!this._next&&yg!==this&&(yg?yg._next=this:Kb=this,yg=this),this._call=e,this._time=n,hE()},stop:function(){this._call&&(this._call=null,this._time=1/0,hE())}};function BG(e,t,n){var s=new Xb;return s.restart(e,t,n),s}function Mhe(){NL(),++df;for(var e=Kb,t;e;)(t=du-e._time)>=0&&e._call.call(void 0,t),e=e._next;--df}function d$(){du=(Qb=Jg.now())+rN,df=xg=0;try{Mhe()}finally{df=0,$he(),du=0}}function Ihe(){var e=Jg.now(),t=e-Qb;t>UG&&(rN-=t,Qb=e)}function $he(){for(var e,t=Kb,n,s=1/0;t;)t._call?(s>t._time&&(s=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Kb=n);yg=e,hE(s)}function hE(e){if(!df){xg&&(xg=clearTimeout(xg));var t=e-du;t>24?(e<1/0&&(xg=setTimeout(d$,e-Jg.now()-rN)),Vh&&(Vh=clearInterval(Vh))):(Vh||(Qb=Jg.now(),Vh=setInterval(Ihe,UG)),df=1,FG(d$))}}function Rhe(e,t,n){var s=new Xb;return t=t==null?0:+t,s.restart(r=>{s.stop(),e(r+t)},t,n),s}class zhe{elapsed=0;timer=null;constructor(t,n,s){this.duration=t,this.easingFn=n,this.onTickCallback=s,this.resume()}get running(){return this.timer!==null}timerCallback(t){this.elapsed=Math.min(t,this.duration);const n=this.duration===0?1:this.elapsed/this.duration,s=this.easingFn(n);this.onTickCallback(s),this.elapsed>=this.duration&&this.stop()}resume(){if(this.running||this.elapsed>=this.duration)return this;const t=NL()-this.elapsed;return this.timer=BG(n=>this.timerCallback(n),0,t),this}stop(){return this.running?(this.timer&&(this.timer.stop(),this.timer=null),this):this}finish(){return this.stop(),Rhe(()=>this.timerCallback(this.duration)),this}}function Uhe(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(let r=0;r<n.length;r+=1){const i=n[r];if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(e[i],t[i]))return!1}return!0}function Fhe(e,{createInterpolator:t,applyProps:n,skip:s,initialProps:r=e}){const i=h.useRef(r),l=h.useRef(null),o=h.useRef(null),c=h.useRef(e);Kn(()=>{c.current=e},[e]),Kn(()=>{s&&(l.current?.finish(),l.current=null,o.current=null,i.current=e)},[e,s]);const d=h.useCallback(f=>{const p=i.current,x=t(p,e);l.current=new zhe(sN,Dhe,v=>{const w=x(v);i.current=w,n(f,w)})},[n,t,e]);return[h.useCallback(f=>{if(f===null){l.current?.stop();return}const p=o.current;if(p===f){if(Uhe(c.current,e)){l.current?.resume();return}l.current?.stop()}p&&l.current?.stop(),o.current=f,(l.current||!s)&&d(f)},[d,e,s]),i.current]}function HG(e,{createInterpolator:t,transformProps:n,applyProps:s,skip:r,initialProps:i=e,ref:l}){const o=n??(f=>f),[c,d]=Fhe(e,{initialProps:i,createInterpolator:t,applyProps:(f,p)=>s(f,o(p)),skip:r}),u=n(r?e:d);return Ke({},u,{ref:xl(c,l)})}function Bhe(e){return HG({d:e.d},{createInterpolator:(t,n)=>{const s=Ik(t.d,n.d);return r=>({d:s(r)})},applyProps:(t,{d:n})=>t.setAttribute("d",n),transformProps:t=>t,skip:e.skipAnimation,ref:e.ref})}function Hhe(e){return HG({d:e.d},{createInterpolator:(t,n)=>{const s=Ik(t.d,n.d);return r=>({d:s(r)})},applyProps:(t,{d:n})=>t.setAttribute("d",n),skip:e.skipAnimation,transformProps:t=>t,ref:e.ref})}function Ghe(){return Dr().chartRootRef}const Whe={"image/png":"PNG","image/jpeg":"JPEG","image/webp":"WebP"},Vhe=e=>({components:{MuiChartsLocalizationProvider:{defaultProps:{localeText:Ke({},e)}}}}),GG={loading:"Loading data",noData:"No data to display",zoomIn:"Zoom in",zoomOut:"Zoom out",toolbarExport:"Export",toolbarExportPrint:"Print",toolbarExportImage:e=>`Export as ${Whe[e]??e}`,chartTypeBar:"Bar",chartTypeColumn:"Column",chartTypeLine:"Line",chartTypeArea:"Area",chartTypePie:"Pie",chartPaletteLabel:"Color palette",chartPaletteNameRainbowSurge:"Rainbow Surge",chartPaletteNameBlueberryTwilight:"Blueberry Twilight",chartPaletteNameMangoFusion:"Mango Fusion",chartPaletteNameCheerfulFiesta:"Cheerful Fiesta",chartPaletteNameStrawberrySky:"Strawberry Sky",chartPaletteNameBlue:"Blue",chartPaletteNameGreen:"Green",chartPaletteNamePurple:"Purple",chartPaletteNameRed:"Red",chartPaletteNameOrange:"Orange",chartPaletteNameYellow:"Yellow",chartPaletteNameCyan:"Cyan",chartPaletteNamePink:"Pink",chartConfigurationSectionChart:"Chart",chartConfigurationSectionColumns:"Columns",chartConfigurationSectionBars:"Bars",chartConfigurationSectionAxes:"Axes",chartConfigurationGrid:"Grid",chartConfigurationBorderRadius:"Border radius",chartConfigurationCategoryGapRatio:"Category gap ratio",chartConfigurationBarGapRatio:"Series gap ratio",chartConfigurationStacked:"Stacked",chartConfigurationShowToolbar:"Show toolbar",chartConfigurationSkipAnimation:"Skip animation",chartConfigurationInnerRadius:"Inner radius",chartConfigurationOuterRadius:"Outer radius",chartConfigurationColors:"Colors",chartConfigurationHideLegend:"Hide legend",chartConfigurationShowMark:"Show mark",chartConfigurationHeight:"Height",chartConfigurationWidth:"Width",chartConfigurationSeriesGap:"Series gap",chartConfigurationTickPlacement:"Tick placement",chartConfigurationTickLabelPlacement:"Tick label placement",chartConfigurationCategoriesAxisLabel:"Categories axis label",chartConfigurationSeriesAxisLabel:"Series axis label",chartConfigurationXAxisPosition:"X-axis position",chartConfigurationYAxisPosition:"Y-axis position",chartConfigurationSeriesAxisReverse:"Reverse series axis",chartConfigurationTooltipPlacement:"Placement",chartConfigurationTooltipTrigger:"Trigger",chartConfigurationLegendPosition:"Position",chartConfigurationLegendDirection:"Direction",chartConfigurationBarLabels:"Bar labels",chartConfigurationColumnLabels:"Column labels",chartConfigurationInterpolation:"Interpolation",chartConfigurationSectionTooltip:"Tooltip",chartConfigurationSectionLegend:"Legend",chartConfigurationSectionLines:"Lines",chartConfigurationSectionAreas:"Areas",chartConfigurationSectionArcs:"Arcs",chartConfigurationPaddingAngle:"Padding angle",chartConfigurationCornerRadius:"Corner radius",chartConfigurationArcLabels:"Arc labels",chartConfigurationStartAngle:"Start angle",chartConfigurationEndAngle:"End angle",chartConfigurationPieTooltipTrigger:"Trigger",chartConfigurationPieLegendPosition:"Position",chartConfigurationPieLegendDirection:"Direction",chartConfigurationOptionNone:"None",chartConfigurationOptionValue:"Value",chartConfigurationOptionAuto:"Auto",chartConfigurationOptionTop:"Top",chartConfigurationOptionTopLeft:"Top Left",chartConfigurationOptionTopRight:"Top Right",chartConfigurationOptionBottom:"Bottom",chartConfigurationOptionBottomLeft:"Bottom Left",chartConfigurationOptionBottomRight:"Bottom Right",chartConfigurationOptionLeft:"Left",chartConfigurationOptionRight:"Right",chartConfigurationOptionAxis:"Axis",chartConfigurationOptionItem:"Item",chartConfigurationOptionHorizontal:"Horizontal",chartConfigurationOptionVertical:"Vertical",chartConfigurationOptionBoth:"Both",chartConfigurationOptionStart:"Start",chartConfigurationOptionMiddle:"Middle",chartConfigurationOptionEnd:"End",chartConfigurationOptionExtremities:"Extremities",chartConfigurationOptionTick:"Tick",chartConfigurationOptionMonotoneX:"Monotone X",chartConfigurationOptionMonotoneY:"Monotone Y",chartConfigurationOptionCatmullRom:"Catmull-Rom",chartConfigurationOptionLinear:"Linear",chartConfigurationOptionNatural:"Natural",chartConfigurationOptionStep:"Step",chartConfigurationOptionStepBefore:"Step Before",chartConfigurationOptionStepAfter:"Step After",chartConfigurationOptionBumpX:"Bump X",chartConfigurationOptionBumpY:"Bump Y"},qhe=GG;Vhe(GG);const Yhe=["localeText"],gE=h.createContext(null);function Khe(e){const{localeText:t}=e,n=ca(e,Yhe),{localeText:s}=h.useContext(gE)??{localeText:void 0},r=mi({props:n,name:"MuiChartsLocalizationProvider"}),{children:i,localeText:l}=r,o=h.useMemo(()=>Ke({},qhe,l,s,t),[l,s,t]),c=h.useMemo(()=>({localeText:o}),[o]);return a.jsx(gE.Provider,{value:c,children:i})}const WG=()=>{const e=h.useContext(gE);if(e===null)throw new Error(["MUI X Charts: Can not find the charts localization context.","It looks like you forgot to wrap your component in ChartsLocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-charts` package"].join(`
`));return e};function Qhe({bandWidth:e,numberOfGroups:t,gapRatio:n}){if(n===0)return{barWidth:e/t,offset:0};const s=e/(t+(t-1)*n),r=n*s;return{barWidth:s,offset:r}}function Xhe(e,t,n){const s=e&&t>0,r=!e&&t<0,i=s||r;return n?!i:i}function Zhe(e){const{verticalLayout:t,xAxisConfig:n,yAxisConfig:s,series:r,dataIndex:i,numberOfGroups:l,groupIndex:o}=e,c=t?n:s,d=(t?s.reverse:n.reverse)??!1,{barWidth:u,offset:f}=Qhe({bandWidth:c.scale.bandwidth(),numberOfGroups:l,gapRatio:c.barGapRatio}),p=o*(u+f),x=n.scale,v=s.scale,w=c.data[i],b=r.data[i];if(b==null)return null;const N=r.stackedData[i].map(T=>t?v(T):x(T)),S=Math.round(Math.min(...N)),A=Math.round(Math.max(...N)),k=b===0?0:Math.max(r.minBarSize,A-S),_=Xhe(t,b,d)?A-k:S;return{x:t?x(w)+p:_,y:t?_:v(w)+p,height:t?k:u,width:t?u:k}}const Jhe=e=>{const{series:t,identifier:n,axesConfig:s,placement:r}=e;if(!n||n.dataIndex===void 0)return null;const i=t.bar?.series[n.seriesId];if(t.bar==null||i==null||s.x===void 0||s.y===void 0)return null;const l=Zhe({verticalLayout:i.layout==="vertical",xAxisConfig:s.x,yAxisConfig:s.y,series:i,dataIndex:n.dataIndex,numberOfGroups:t.bar.stackingGroups.length,groupIndex:t.bar.stackingGroups.findIndex(f=>f.ids.includes(i.id))});if(l==null)return null;const{x:o,y:c,width:d,height:u}=l;switch(r){case"right":return{x:o+d,y:c+u/2};case"bottom":return{x:o+d/2,y:c+u};case"left":return{x:o,y:c+u/2};case"top":default:return{x:o+d/2,y:c}}},ege=(e,t,n)=>Ke({},e,{id:e.id??`auto-generated-id-${t}`,color:e.color??n[t%n.length]}),tge={seriesProcessor:Qfe,colorProcessor:Zfe,legendGetter:Xfe,tooltipGetter:Jfe,tooltipItemPositionGetter:Jhe,axisTooltipGetter:ehe,xExtremumGetter:jfe,yExtremumGetter:Cfe,getSeriesWithDefaultValues:ege},age=e=>{const{series:t,axis:n,isDefaultAxis:s,getFilters:r}=e;let i=1/0,l=-1/0;for(const o in t){if(!Object.hasOwn(t,o))continue;const c=t[o].xAxisId;if(!(c===n.id||c===void 0&&s))continue;const d=r?.({currentAxisId:n.id,isDefaultAxis:s,seriesXAxisId:t[o].xAxisId,seriesYAxisId:t[o].yAxisId}),u=t[o].data??[];for(let f=0;f<u.length;f+=1){const p=u[f];d&&!d(p,f)||p.x!==null&&(p.x<i&&(i=p.x),p.x>l&&(l=p.x))}}return[i,l]},nge=e=>{const{series:t,axis:n,isDefaultAxis:s,getFilters:r}=e;let i=1/0,l=-1/0;for(const o in t){if(!Object.hasOwn(t,o))continue;const c=t[o].yAxisId;if(!(c===n.id||c===void 0&&s))continue;const d=r?.({currentAxisId:n.id,isDefaultAxis:s,seriesXAxisId:t[o].xAxisId,seriesYAxisId:t[o].yAxisId}),u=t[o].data??[];for(let f=0;f<u.length;f+=1){const p=u[f];d&&!d(p,f)||p.y!==null&&(p.y<i&&(i=p.y),p.y>l&&(l=p.y))}}return[i,l]},sge=({series:e,seriesOrder:t},n)=>({series:Object.fromEntries(Object.entries(e).map(([r,i])=>{const l=i?.datasetKeys,o=["x","y"].filter(d=>typeof l?.[d]!="string");if(i?.datasetKeys&&o.length>0)throw new Error([`MUI X Charts: scatter series with id='${r}' has incomplete datasetKeys.`,`Properties ${o.map(d=>`"${d}"`).join(", ")} are missing.`].join(`
`));const c=l?n?.map(d=>({x:d[l.x]??null,y:d[l.y]??null,z:l.z&&d[l.z],id:l.id&&d[l.id]}))??[]:i.data??[];return[r,Ke({labelMarkType:"circle",markerSize:4},i,{preview:Ke({markerSize:1},i?.preview),data:c,valueFormatter:i.valueFormatter??(d=>d&&`(${d.x}, ${d.y})`)})]})),seriesOrder:t}),rge=(e,t,n,s)=>{const r=s?.colorScale,i=n?.colorScale,l=t?.colorScale,o=gL(e);return r?c=>{if(c===void 0)return e.color;if(s?.data?.[c]!==void 0){const f=r(s?.data?.[c]);if(f!==null)return f}const d=e.data[c],u=d===null?o({value:d,dataIndex:c}):r(d.z);return u===null?o({value:d,dataIndex:c}):u}:i?c=>{if(c===void 0)return e.color;const d=e.data[c],u=d===null?o({value:d,dataIndex:c}):i(d.y);return u===null?o({value:d,dataIndex:c}):u}:l?c=>{if(c===void 0)return e.color;const d=e.data[c],u=d===null?o({value:d,dataIndex:c}):l(d.x);return u===null?o({value:d,dataIndex:c}):u}:c=>{if(c===void 0)return e.color;const d=e.data[c];return o({value:d,dataIndex:c})}},ige=e=>{const{seriesOrder:t,series:n}=e;return t.reduce((s,r)=>{const i=Li(n[r].label,"legend");return i===void 0||s.push({markType:n[r].labelMarkType,id:r,seriesId:r,color:n[r].color,label:i}),s},[])},lge=e=>{const{series:t,getColor:n,identifier:s}=e;if(!s||s.dataIndex===void 0)return null;const r=Li(t.label,"tooltip"),i=t.data[s.dataIndex],l=t.valueFormatter(i,{dataIndex:s.dataIndex});return{identifier:s,color:n(s.dataIndex),label:r,value:i,formattedValue:l,markType:t.labelMarkType}},oge=(e,t,n)=>Ke({},e,{id:e.id??`auto-generated-id-${t}`,color:e.color??n[t%n.length]}),cge=e=>{const{series:t,identifier:n,axesConfig:s}=e;if(!n||n.dataIndex===void 0)return null;const r=t.scatter?.series[n.seriesId];if(r==null||s.x===void 0||s.y===void 0)return null;const i=r.data?.[n.dataIndex].x,l=r.data?.[n.dataIndex].y;return i==null||l==null?null:{x:s.x.scale(i),y:s.y.scale(l)}},dge={seriesProcessor:sge,colorProcessor:rge,legendGetter:ige,tooltipGetter:lge,tooltipItemPositionGetter:cge,xExtremumGetter:age,yExtremumGetter:nge,getSeriesWithDefaultValues:oge},uge=e=>{const{axis:t}=e;return Hb(t.data??[])};function mge(e,t,n,s){return n.reduce((r,i,l)=>{if(t[l]===null)return r;const[o,c]=e(i);return s&&(!s({y:o,x:null},l)||!s({y:c,x:null},l))?r:[Math.min(o,c,r[0]),Math.max(o,c,r[1])]},[1/0,-1/0])}const fge=e=>{const{series:t,axis:n,isDefaultAxis:s,getFilters:r}=e;return Object.keys(t).filter(i=>{const l=t[i].yAxisId;return l===n.id||s&&l===void 0}).reduce((i,l)=>{const{area:o,stackedData:c,data:d}=t[l],u=o!==void 0,f=r?.({currentAxisId:n.id,isDefaultAxis:s,seriesXAxisId:t[l].xAxisId,seriesYAxisId:t[l].yAxisId}),p=u&&n.scaleType!=="log"&&typeof t[l].baseline!="string"?b=>b:b=>[b[1],b[1]],x=mge(p,d,c,f),[v,w]=x;return[Math.min(v,i[0]),Math.max(w,i[1])]},[1/0,-1/0])};function hge(e,t){const n={};return Object.keys(e).forEach(s=>{n[s]=Ke({},e[s],{valueFormatter:e[s].valueFormatter??t})}),n}const gge=(e,t)=>{const{seriesOrder:n,series:s}=e,r=LG(Ke({},e,{defaultStrategy:{stackOffset:"none"}})),i=t??[];n.forEach(o=>{const c=s[o].data;c!==void 0&&c.forEach((d,u)=>{i.length<=u?i.push({[o]:d}):i[u][o]=d})});const l={};return r.forEach(o=>{const{ids:c,stackingOrder:d,stackingOffset:u}=o,f=hL().keys(c.map(p=>{const x=s[p].dataKey;return s[p].data===void 0&&x!==void 0?x:p})).value((p,x)=>p[x]??0).order(d).offset(u)(i);c.forEach((p,x)=>{const v=s[p].dataKey;l[p]=Ke({labelMarkType:"line"},s[p],{data:v?t.map(w=>{const b=w[v];return typeof b=="number"?b:null}):s[p].data,stackedData:f[x].map(([w,b])=>[w,b])})})}),{seriesOrder:n,stackingGroups:r,series:hge(l,o=>o==null?"":o.toLocaleString())}},jL=(e,t,n)=>{const s=n?.colorScale,r=t?.colorScale,i=gL(e);return s?l=>{if(l===void 0)return e.color;const o=e.data[l],c=o===null?i({value:o,dataIndex:l}):s(o);return c===null?i({value:o,dataIndex:l}):c}:r?l=>{if(l===void 0)return e.color;const o=t.data?.[l],c=o===null?i({value:o,dataIndex:l}):r(o);return c===null?i({value:o,dataIndex:l}):c}:l=>{if(l===void 0)return e.color;const o=e.data[l];return i({value:o,dataIndex:l})}},pge=e=>{const{seriesOrder:t,series:n}=e;return t.reduce((s,r)=>{const i=Li(n[r].label,"legend");return i===void 0||s.push({markType:n[r].labelMarkType,id:r,seriesId:r,color:n[r].color,label:i}),s},[])},xge=e=>{const{series:t,getColor:n,identifier:s}=e;if(!s||s.dataIndex===void 0)return null;const r=Li(t.label,"tooltip"),i=t.data[s.dataIndex],l=t.valueFormatter(i,{dataIndex:s.dataIndex});return{identifier:s,color:n(s.dataIndex),label:r,value:i,formattedValue:l,markType:t.labelMarkType}},yge=e=>Object.values(e).map(t=>({direction:"x",axisId:t.xAxisId})),bge=(e,t,n)=>Ke({},e,{id:e.id??`auto-generated-id-${t}`,color:e.color??n[t%n.length]}),vge=e=>{const{series:t,identifier:n,axesConfig:s}=e;if(!n||n.dataIndex===void 0)return null;const r=t.line?.series[n.seriesId];if(r==null||s.x===void 0||s.y===void 0)return null;const i=s.x.data?.[n.dataIndex],l=r.data[n.dataIndex];return i==null||l==null?null:{x:s.x.scale(i),y:s.y.scale(l)}},wge={colorProcessor:jL,seriesProcessor:gge,legendGetter:pge,tooltipGetter:xge,tooltipItemPositionGetter:vge,axisTooltipGetter:yge,xExtremumGetter:uge,yExtremumGetter:fge,getSeriesWithDefaultValues:bge},Nge=(e="none")=>{if(typeof e=="function")return e;switch(e){case"none":return null;case"desc":return(t,n)=>n-t;case"asc":return(t,n)=>t-n;default:return null}},jge=e=>{const{seriesOrder:t,series:n}=e,s={};return t.forEach(r=>{const i=kfe().startAngle(Ec(n[r].startAngle??0)).endAngle(Ec(n[r].endAngle??360)).padAngle(Ec(n[r].paddingAngle??0)).sortValues(Nge(n[r].sortingValues??"none"))(n[r].data.map(l=>l.value));s[r]=Ke({labelMarkType:"circle",valueFormatter:l=>l.value.toLocaleString()},n[r],{data:n[r].data.map((l,o)=>Ke({},l,{id:l.id??`auto-generated-pie-id-${r}-${o}`},i[o])).map((l,o)=>Ke({labelMarkType:"circle"},l,{formattedValue:n[r].valueFormatter?.(Ke({},l,{label:Li(l.label,"arc")}),{dataIndex:o})??l.value.toLocaleString()}))})}),{seriesOrder:t,series:s}},Cge=e=>t=>e.data[t].color,Sge=e=>{const{seriesOrder:t,series:n}=e;return t.reduce((s,r)=>(n[r].data.forEach((i,l)=>{const o=Li(i.label,"legend");o!==void 0&&s.push({markType:i.labelMarkType??n[r].labelMarkType,id:i.id??l,seriesId:r,color:i.color,label:o,itemId:i.id??l})}),s),[])},_ge=e=>{const{series:t,getColor:n,identifier:s}=e;if(!s||s.dataIndex===void 0)return null;const r=t.data[s.dataIndex];if(r==null)return null;const i=Li(r.label,"tooltip"),l=Ke({},r,{label:i}),o=t.valueFormatter(l,{dataIndex:s.dataIndex});return{identifier:s,color:n(s.dataIndex),label:i,value:l,formattedValue:o,markType:r.labelMarkType??t.labelMarkType}},Age=(e,t,n)=>Ke({},e,{id:e.id??`auto-generated-id-${t}`,data:e.data.map((s,r)=>Ke({},s,{color:s.color??n[r%n.length]}))});function Zb(e,t){if(typeof e=="number")return e;if(e==="100%")return t;if(e.endsWith("%")){const n=Number.parseFloat(e.slice(0,e.length-1));if(!Number.isNaN(n))return n*t/100}if(e.endsWith("px")){const n=Number.parseFloat(e.slice(0,e.length-2));if(!Number.isNaN(n))return n}throw new Error(`MUI X Charts: Received an unknown value "${e}". It should be a number, or a string with a percentage value.`)}function Ege(e,t){const{height:n,width:s}=t,{cx:r,cy:i}=e,l=Math.min(s,n)/2,o=Zb(r??"50%",s),c=Zb(i??"50%",n);return{cx:o,cy:c,availableRadius:l}}const Tge=e=>{const{series:t,drawingArea:n,identifier:s,placement:r}=e;if(!s||s.dataIndex===void 0)return null;const i=t.pie?.series[s.seriesId];if(i==null)return null;const{cx:l,cy:o,availableRadius:c}=Ege({cx:i.cx,cy:i.cy},n),{data:d,innerRadius:u=0,outerRadius:f}=i,p=Math.max(0,Zb(u??0,c)),x=Math.max(0,Zb(f??c,c)),v=d[s.dataIndex];if(!v)return null;const w=[[p,v.startAngle],[p,v.endAngle],[x,v.startAngle],[x,v.endAngle]].map(([A,k])=>({x:l+A*Math.sin(k),y:o-A*Math.cos(k)})),[b,C]=Hb(w.map(A=>A.x)),[N,S]=Hb(w.map(A=>A.y));switch(r){case"bottom":return{x:(C+b)/2,y:S};case"left":return{x:b,y:(S+N)/2};case"right":return{x:C,y:(S+N)/2};case"top":default:return{x:(C+b)/2,y:N}}},kge={colorProcessor:Cge,seriesProcessor:jge,legendGetter:Sge,tooltipGetter:_ge,tooltipItemPositionGetter:Tge,getSeriesWithDefaultValues:Age},Lge={bar:tge,scatter:dge,line:wge,pie:kge},Pge=[Jp,Yp,Df,ex];function Dge(e){const{children:t,plugins:n=Pge,pluginParams:s={},seriesConfig:r=Lge}=e,{contextValue:i}=Hce(n,s,r);return a.jsx(wH.Provider,{value:i,children:t})}const Dr=()=>{const e=h.useContext(wH);if(e==null)throw new Error(["MUI X Charts: Could not find the Chart context.","It looks like you rendered your component outside of a ChartDataProvider.","This can also happen if you are bundling multiple versions of the library."].join(`
`));return e};function Oge(e){"hasPointerCapture"in e.currentTarget&&e.currentTarget.hasPointerCapture(e.pointerId)&&e.currentTarget.releasePointerCapture(e.pointerId)}const iN=(e,t)=>{const{instance:n}=Dr(),s=h.useRef(!1),r=rs(()=>{s.current=!0,n.setItemInteraction(e,{interaction:"pointer"}),n.setHighlight(e)}),i=rs(()=>{s.current=!1,n.removeItemInteraction(e),n.clearHighlight()});return h.useEffect(()=>()=>{s.current&&i()},[i]),h.useMemo(()=>({onPointerEnter:r,onPointerLeave:i,onPointerDown:Oge}),[t,r,i])};function VG(e){return e.replace(" ","_")}const qG=yn("MuiAppearingMask",["animate"]),Mge=na("rect")({animationName:"animate-width",animationTimingFunction:wL,animationDuration:"0s",[`&.${qG.animate}`]:{animationDuration:`${sN}ms`},"@keyframes animate-width":{from:{width:0}}});function YG(e){const t=hi(),n=tN(),s=VG(`${n}-${e.id}`);return a.jsxs(h.Fragment,{children:[a.jsx("clipPath",{id:s,children:a.jsx(Mge,{className:e.skipAnimation?"":qG.animate,x:0,y:0,width:t.left+t.width+t.right,height:t.top+t.height+t.bottom})}),a.jsx("g",{clipPath:`url(#${s})`,children:e.children})]})}const Ige=["skipAnimation","ownerState"];function $ge(e){const{skipAnimation:t,ownerState:n}=e,s=ca(e,Ige),r=Bhe(e);return a.jsx(YG,{skipAnimation:t,id:`${n.id}-area-clip`,children:a.jsx("path",Ke({fill:n.gradientId?`url(#${n.gradientId})`:n.color,filter:n.isHighlighted?"brightness(140%)":n.gradientId?void 0:"brightness(120%)",opacity:n.isFaded?.3:1,stroke:"none","data-series":n.id,"data-highlighted":n.isHighlighted||void 0,"data-faded":n.isFaded||void 0},s,r))})}const Rge=["id","classes","color","gradientId","slots","slotProps","onClick"];function zge(e){return In("MuiAreaElement",e)}const Uge=yn("MuiAreaElement",["root","highlighted","faded","series"]),Fge=e=>{const{classes:t,id:n,isFaded:s,isHighlighted:r}=e,i={root:["root",`series-${n}`,r&&"highlighted",s&&"faded"]};return Mn(i,zge,t)};function Bge(e){const{id:t,classes:n,color:s,gradientId:r,slots:i,slotProps:l,onClick:o}=e,c=ca(e,Rge),d=iN({type:"line",seriesId:t}),{isFaded:u,isHighlighted:f}=zG({seriesId:t}),p={id:t,classes:n,color:s,gradientId:r,isFaded:u,isHighlighted:f},x=Fge(p),v=i?.area??$ge,w=po({elementType:v,externalSlotProps:l?.area,additionalProps:Ke({},d,{onClick:o,cursor:o?"pointer":"unset"}),className:x.root,ownerState:p});return a.jsx(v,Ke({},c,w))}function CL(e){const t=Fa(),n=Rt(t,nce);return e||n}function SL(){const e=Fa();return Rt(e,w9)}function KG(e){switch(e){case"catmullRom":return Ufe.alpha(.5);case"linear":return tx;case"monotoneX":return fE;case"monotoneY":return bG;case"natural":return wG;case"step":return NG;case"stepBefore":return jG;case"stepAfter":return CG;case"bumpY":return aG;case"bumpX":return tG;default:return fE}}function Hge(e,t){const n=ax(),s=lr().xAxisIds[0],r=or().yAxisIds[0],i=vL();return h.useMemo(()=>{if(n===void 0)return[];const{series:o,stackingGroups:c}=n,d=[];for(const u of c){const f=u.ids;for(let p=f.length-1;p>=0;p-=1){const x=f[p],{xAxisId:v=s,yAxisId:w=r,stackedData:b,data:C,connectNulls:N,baseline:S,curve:A,strictStepCurve:k,area:_}=o[x];if(!_||!(v in e)||!(w in t))continue;const T=e[v].scale,E=Mf(T),I=t[w].scale,z=e[v].data,$=t[w].colorScale&&i(w)||e[v].colorScale&&i(v)||void 0,P=A?.includes("step")&&!k&&cs(T),O=z?.flatMap((ee,V)=>{const de=C[V]==null;if(P){const oe=[{x:ee,y:b[V],nullData:de,isExtension:!1}];return!de&&(V===0||C[V-1]==null)&&oe.unshift({x:(T(ee)??0)-(T.step()-T.bandwidth())/2,y:b[V],nullData:de,isExtension:!0}),!de&&(V===C.length-1||C[V+1]==null)&&oe.push({x:(T(ee)??0)+(T.step()+T.bandwidth())/2,y:b[V],nullData:de,isExtension:!0}),oe}return{x:ee,y:b[V],nullData:de}})??[],B=N?O.filter(ee=>!ee.nullData):O,F=pg().x(ee=>ee.isExtension?ee.x:E(ee.x)).defined(ee=>N||!ee.nullData||!!ee.isExtension).y0(ee=>{if(typeof S=="number")return I(S);if(S==="max")return I.range()[1];if(S==="min")return I.range()[0];const V=ee.y&&I(ee.y[0]);return Number.isNaN(V)?I.range()[0]:V}).y1(ee=>ee.y&&I(ee.y[1])).curve(KG(A))(B)||"";d.push({area:o[x].area,color:o[x].color,gradientId:$,d:F,seriesId:x})}}return d},[n,s,r,e,t,i])}const Gge=["slots","slotProps","onItemClick","skipAnimation"],Wge=na("g",{name:"MuiAreaPlot",slot:"Root"})({[`& .${Uge.root}`]:{transition:"opacity 0.2s ease-in, fill 0.2s ease-in"}}),Vge=()=>{const{xAxis:e}=lr(),{yAxis:t}=or();return Hge(e,t)};function qge(e){const{slots:t,slotProps:n,onItemClick:s,skipAnimation:r}=e,i=ca(e,Gge),l=SL(),o=CL(l||r),c=Vge();return a.jsx(Wge,Ke({},i,{children:c.map(({d,seriesId:u,color:f,area:p,gradientId:x})=>!!p&&a.jsx(Bge,{id:u,d,color:f,gradientId:x,slots:t,slotProps:n,onClick:s&&(v=>s(v,{type:"line",seriesId:u})),skipAnimation:o},u))}))}const Yge=["skipAnimation","ownerState"],Kge=h.forwardRef(function(t,n){const{skipAnimation:s,ownerState:r}=t,i=ca(t,Yge),l=Hhe(Ke({},t,{ref:n}));return a.jsx(YG,{skipAnimation:s,id:`${r.id}-line-clip`,children:a.jsx("path",Ke({stroke:r.gradientId?`url(#${r.gradientId})`:r.color,strokeWidth:2,strokeLinejoin:"round",fill:"none",filter:r.isHighlighted?"brightness(120%)":void 0,opacity:r.isFaded?.3:1,"data-series":r.id,"data-highlighted":r.isHighlighted||void 0,"data-faded":r.isFaded||void 0},i,l))})}),Qge=["id","classes","color","gradientId","slots","slotProps","onClick"];function Xge(e){return In("MuiLineElement",e)}const Zge=yn("MuiLineElement",["root","highlighted","faded","series"]),Jge=e=>{const{classes:t,id:n,isFaded:s,isHighlighted:r}=e,i={root:["root",`series-${n}`,r&&"highlighted",s&&"faded"]};return Mn(i,Xge,t)};function epe(e){const{id:t,classes:n,color:s,gradientId:r,slots:i,slotProps:l,onClick:o}=e,c=ca(e,Qge),d=iN({type:"line",seriesId:t}),{isFaded:u,isHighlighted:f}=zG({seriesId:t}),p={id:t,classes:n,color:s,gradientId:r,isFaded:u,isHighlighted:f},x=Jge(p),v=i?.line??Kge,w=po({elementType:v,externalSlotProps:l?.line,additionalProps:Ke({},d,{onClick:o,cursor:o?"pointer":"unset"}),className:x.root,ownerState:p});return a.jsx(v,Ke({},c,w))}function tpe(e,t){const n=ax(),s=lr().xAxisIds[0],r=or().yAxisIds[0],i=vL();return h.useMemo(()=>{if(n===void 0)return[];const{series:o,stackingGroups:c}=n,d=[];for(const u of c){const f=u.ids;for(const p of f){const{xAxisId:x=s,yAxisId:v=r,stackedData:w,data:b,connectNulls:C,curve:N,strictStepCurve:S}=o[p];if(!(x in e)||!(v in t))continue;const A=e[x].scale,k=Mf(A),_=t[v].scale,T=e[x].data,E=t[v].colorScale&&i(v)||e[x].colorScale&&i(x)||void 0,I=N?.includes("step")&&!S&&cs(A),z=T?.flatMap((B,Q)=>{const F=b[Q]==null;if(I){const ee=[{x:B,y:w[Q],nullData:F,isExtension:!1}];return!F&&(Q===0||b[Q-1]==null)&&ee.unshift({x:(A(B)??0)-(A.step()-A.bandwidth())/2,y:w[Q],nullData:F,isExtension:!0}),!F&&(Q===b.length-1||b[Q+1]==null)&&ee.push({x:(A(B)??0)+(A.step()+A.bandwidth())/2,y:w[Q],nullData:F,isExtension:!0}),ee}return{x:B,y:w[Q],nullData:F}})??[],$=C?z.filter(B=>!B.nullData):z,O=uL().x(B=>B.isExtension?B.x:k(B.x)).defined(B=>C||!B.nullData||!!B.isExtension).y(B=>_(B.y[1])).curve(KG(N))($)||"";d.push({color:o[p].color,gradientId:E,d:O,seriesId:p})}}return d},[n,s,r,e,t,i])}const ape=["slots","slotProps","skipAnimation","onItemClick"],npe=na("g",{name:"MuiAreaPlot",slot:"Root"})({[`& .${Zge.root}`]:{transition:"opacity 0.2s ease-in, fill 0.2s ease-in"}}),spe=()=>{const{xAxis:e}=lr(),{yAxis:t}=or();return tpe(e,t)};function rpe(e){const{slots:t,slotProps:n,skipAnimation:s,onItemClick:r}=e,i=ca(e,ape),l=SL(),o=CL(l||s),c=spe();return a.jsx(npe,Ke({},i,{children:c.map(({d,seriesId:u,color:f,gradientId:p})=>a.jsx(epe,{id:u,d,color:f,gradientId:p,skipAnimation:o,slots:t,slotProps:n,onClick:r&&(x=>r(x,{type:"line",seriesId:u}))},u))}))}function ipe(e){return In("MuiMarkElement",e)}const QG=yn("MuiMarkElement",["root","highlighted","faded","animate","series"]),XG=e=>{const{classes:t,id:n,isFaded:s,isHighlighted:r,skipAnimation:i}=e,l={root:["root",`series-${n}`,r&&"highlighted",s&&"faded",i?void 0:"animate"]};return Mn(l,ipe,t)},lpe=["x","y","id","classes","color","dataIndex","onClick","skipAnimation","isFaded","isHighlighted"],ope=na("circle")({[`&.${QG.animate}`]:{transitionDuration:`${sN}ms`,transitionProperty:"cx, cy",transitionTimingFunction:wL}});function cpe(e){const{x:t,y:n,id:s,classes:r,color:i,dataIndex:l,onClick:o,skipAnimation:c,isFaded:d=!1,isHighlighted:u=!1}=e,f=ca(e,lpe),p=Nl(),x=iN({type:"line",seriesId:s,dataIndex:l}),w=XG({id:s,classes:r,isHighlighted:u,isFaded:d,skipAnimation:c});return a.jsx(ope,Ke({},f,{cx:t,cy:n,r:5,fill:(p.vars||p).palette.background.paper,stroke:i,strokeWidth:2,className:w.root,onClick:o,cursor:o?"pointer":"unset"},x,{"data-highlighted":u||void 0,"data-faded":d||void 0}))}function ZG(e){switch(e){case"circle":return 0;case"cross":return 1;case"diamond":return 2;case"square":return 3;case"star":return 4;case"triangle":return 5;case"wye":return 6;default:return 0}}const dpe=["x","y","id","classes","color","shape","dataIndex","onClick","skipAnimation","isFaded","isHighlighted"],upe=na("path",{name:"MuiMarkElement",slot:"Root"})(({ownerState:e,theme:t})=>({fill:(t.vars||t).palette.background.paper,stroke:e.color,strokeWidth:2,[`&.${QG.animate}`]:{transitionDuration:`${sN}ms`,transitionProperty:"transform, transform-origin",transitionTimingFunction:wL}}));function mpe(e){const{x:t,y:n,id:s,classes:r,color:i,shape:l,dataIndex:o,onClick:c,skipAnimation:d,isFaded:u=!1,isHighlighted:f=!1}=e,p=ca(e,dpe),x=iN({type:"line",seriesId:s,dataIndex:o}),v={id:s,classes:r,isHighlighted:f,isFaded:u,color:i,skipAnimation:d},w=XG(v);return a.jsx(upe,Ke({},p,{style:{transform:`translate(${t}px, ${n}px)`,transformOrigin:`${t}px ${n}px`},ownerState:v,className:w.root,d:mL(uG[ZG(l)])(),onClick:c,cursor:c?"pointer":"unset"},x,{"data-highlighted":f||void 0,"data-faded":u||void 0}))}const fpe=["slots","slotProps","skipAnimation","onItemClick"];function hpe(e){const{slots:t,slotProps:n,skipAnimation:s,onItemClick:r}=e,i=ca(e,fpe),l=SL(),o=CL(l||s),c=ax(),{xAxis:d,xAxisIds:u}=lr(),{yAxis:f,yAxisIds:p}=or(),x=tN(),{instance:v,store:w}=Dr(),{isFaded:b,isHighlighted:C}=_he(),N=Rt(w,H9),S=h.useMemo(()=>{const E={};for(const{dataIndex:I,axisId:z}of N)E[z]===void 0?E[z]=new Set([I]):E[z].add(I);return E},[N]);if(c===void 0)return null;const{series:A,stackingGroups:k}=c,_=u[0],T=p[0];return a.jsx("g",Ke({},i,{children:k.flatMap(({ids:E})=>E.map(I=>{const{xAxisId:z=_,yAxisId:$=T,stackedData:P,data:O,showMark:B=!0,shape:Q="circle"}=A[I];if(B===!1)return null;const F=Mf(d[z].scale),ee=f[$].scale,V=d[z].data;if(V===void 0)throw new Error(`MUI X Charts: ${z===Ew?"The first `xAxis`":`The x-axis with id "${z}"`} should have data property to be able to display a line plot.`);const de=VG(`${x}-${I}-line-clip`),oe=jL(A[I],d[z],f[$]),Z=t?.mark??(Q==="circle"?cpe:mpe),R=C({seriesId:I}),ve=!R&&b({seriesId:I});return a.jsx("g",{clipPath:`url(#${de})`,"data-series":I,children:V?.map((X,je)=>{const Ne=O[je]==null?null:P[je][1];return{x:F(X),y:Ne===null?null:ee(Ne),position:X,value:Ne,index:je}}).filter(({x:X,y:je,index:Ne,position:Oe,value:Fe})=>Fe===null||je===null||!v.isPointInside(X,je)?!1:B===!0?!0:B({x:X,y:je,index:Ne,position:Oe,value:Fe})).map(({x:X,y:je,index:Ne})=>a.jsx(Z,Ke({id:I,dataIndex:Ne,shape:Q,color:oe(Ne),x:X,y:je,skipAnimation:o,onClick:r&&(Oe=>r(Oe,{type:"line",seriesId:I,dataIndex:Ne})),isHighlighted:S[z]?.has(Ne)||R,isFaded:ve},n?.mark),`${I}-${Ne}`))},I)}))}))}function lN(){const[e,t]=h.useState(typeof window<"u"||!1);return h.useEffect(()=>{t(!0)},[]),e}function _L(e){return typeof e=="number"&&!Number.isFinite(e)}const pE={start:0,extremities:0,end:1,middle:.5};function mS(e,t,n){return e(t)-(e.step()-e.bandwidth())/2+pE[n]*e.step()}function gpe(e){const{scale:t,tickNumber:n,valueFormatter:s,tickInterval:r,tickPlacement:i="extremities",tickLabelPlacement:l,isInside:o}=e;if(cs(t)){const p=t.domain(),x=l??"middle";if(t.bandwidth()>0){const w=typeof r=="function"&&p.filter(r)||typeof r=="object"&&r||p,b=t.range()[0]>t.range()[1],C=w.findIndex(S=>o(mS(t,S,b?"start":"end"))),N=w.findLastIndex(S=>o(mS(t,S,b?"end":"start")));return[...w.slice(C,N+1).map(S=>{const A=`${S}`;return{value:S,formattedValue:s?.(S,{location:"tick",scale:t,tickNumber:n,defaultTickLabel:A})??A,offset:mS(t,S,i),labelOffset:x==="tick"?0:t.step()*(pE[x]-pE[i])}}),...i==="extremities"&&N===p.length-1&&o(t.range()[1])?[{formattedValue:void 0,offset:t.range()[1],labelOffset:0}]:[]]}return(typeof r=="function"&&p.filter(r)||typeof r=="object"&&r||p).map(w=>{const b=`${w}`;return{value:w,formattedValue:s?.(w,{location:"tick",scale:t,tickNumber:n,defaultTickLabel:b})??b,offset:t(w),labelOffset:0}})}if(t.domain().some(_L))return[];const d=l,u=typeof r=="object"?r:ppe(t,n),f=[];for(let p=0;p<u.length;p+=1){const x=u[p],v=t(x);if(o(v)){const w=t.tickFormat(n)(x);f.push({value:x,formattedValue:s?.(x,{location:"tick",scale:t,tickNumber:n,defaultTickLabel:w})??w,offset:v,labelOffset:d==="middle"?t(u[p-1]??0)-(v+t(u[p-1]??0))/2:0})}}return f}function ppe(e,t){const n=e.domain();return n[0]===n[1]?[n[0]]:e.ticks(t)}function oN(e){const{scale:t,tickNumber:n,valueFormatter:s,tickInterval:r,tickPlacement:i="extremities",tickLabelPlacement:l,direction:o}=e,{instance:c}=Dr(),d=o==="x"?c.isXInside:c.isYInside;return h.useMemo(()=>gpe({scale:t,tickNumber:n,tickPlacement:i,tickInterval:r,tickLabelPlacement:l,valueFormatter:s,isInside:d}),[t,n,i,r,l,s,d])}function xpe(e=!1){const[t,n]=h.useState(!1);return Kn(()=>{e||n(!0)},[e]),h.useEffect(()=>{e&&n(!0)},[e]),t}const JG=typeof window<"u"&&"Intl"in window&&"Segmenter"in Intl?new Intl.Segmenter(void 0,{granularity:"grapheme"}):null;function ype(e){return e.length}function bpe(e){const t=JG.segment(e);let n=0;for(const s of t)n+=1;return n}const vpe=JG?bpe:ype;function wpe(e){return e*(Math.PI/180)}const eW=typeof window<"u"&&"Intl"in window&&"Segmenter"in Intl?new Intl.Segmenter(void 0,{granularity:"grapheme"}):null;function Npe(e,t){return e.slice(0,t)}function jpe(e,t){const n=eW.segment(e);let s="",r=0;for(const i of n)if(s+=i.segment,r+=1,r>=t)break;return s}const Cpe=eW?jpe:Npe,u$="";function tW(e,t){const{width:n,height:s,measureText:r}=t,i=wpe(t.angle),l=r(e),o=Math.abs(l.width*Math.cos(i))+Math.abs(l.height*Math.sin(i)),c=Math.abs(l.width*Math.sin(i))+Math.abs(l.height*Math.cos(i));return o<=n&&c<=s}function aW(e,t){if(t(e))return e;let n=e,s=1,r=1/2;const i=vpe(e);let l=i,o=i,c=null;do{if(o=l,l=Math.floor(i*r),l===0)break;n=Cpe(e,l).trim();const d=t(n+u$);s+=1,d?(c=n,r+=1/2**s):r-=1/2**s}while(Math.abs(l-o)!==1);return c?c+u$:""}function nW(){return typeof window>"u"}const Tc=new Map,sW=2e3,Spe=new Set(["minWidth","maxWidth","width","minHeight","maxHeight","height","top","left","fontSize","padding","margin","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom"]);function AL(e,t){return Spe.has(e)&&t===+t?`${t}px`:t}const _pe=/([A-Z])/g;function EL(e){return String(e).replace(_pe,t=>`-${t.toLowerCase()}`)}function rW(e){let t="";for(const n in e)if(Object.hasOwn(e,n)){const s=n,r=e[s];if(r===void 0)continue;t+=`${EL(s)}:${AL(s,r)};`}return t}const nx=(e,t={})=>{if(e==null||nW())return{width:0,height:0};const n=String(e),s=rW(t),r=`${n}-${s}`,i=Tc.get(r);if(i)return i;try{const l=lW(),o=document.createElementNS("http://www.w3.org/2000/svg","text");Object.keys(t).map(d=>(o.style[EL(d)]=AL(d,t[d]),d)),o.textContent=n,l.replaceChildren(o);const c=iW(o);return Tc.set(r,c),Tc.size+1>sW&&Tc.clear(),c}catch{return{width:0,height:0}}};function Ape(e,t={}){if(nW())return new Map(Array.from(e).map(c=>[c,{width:0,height:0}]));const n=new Map,s=[],r=rW(t);for(const c of e){const d=`${c}-${r}`,u=Tc.get(d);u?n.set(c,u):s.push(c)}const i=lW(),l=Ke({},t);Object.keys(l).map(c=>(i.style[EL(c)]=AL(c,l[c]),c));const o=[];for(const c of s){const d=document.createElementNS("http://www.w3.org/2000/svg","text");d.textContent=`${c}`,o.push(d)}i.replaceChildren(...o);for(let c=0;c<s.length;c+=1){const d=s[c],u=i.children[c],f=iW(u),p=`${d}-${r}`;Tc.set(p,f),n.set(d,f)}return Tc.size+1>sW&&Tc.clear(),n}function iW(e){try{const t=e.getBBox();return{width:t.width,height:t.height}}catch{const t=e.getBoundingClientRect();return{width:t.width,height:t.height}}}let Ys=null;function lW(){return Ys===null&&(Ys=document.createElementNS("http://www.w3.org/2000/svg","svg"),Ys.setAttribute("aria-hidden","true"),Ys.style.position="absolute",Ys.style.top="-20000px",Ys.style.left="0",Ys.style.padding="0",Ys.style.margin="0",Ys.style.border="none",Ys.style.pointerEvents="none",Ys.style.visibility="hidden",Ys.style.contain="strict",document.body.appendChild(Ys)),Ys}function Epe(e,t,n,s,r){const i=new Map,l=aN(r?.angle??0);let o=1,c=1;r?.textAnchor==="start"?(o=1/0,c=1):r?.textAnchor==="end"?(o=1,c=1/0):(o=2,c=2),l>90&&l<270&&([o,c]=[c,o]),s&&([o,c]=[c,o]);for(const d of e)if(d.formattedValue){const u=Math.min((d.offset+d.labelOffset)*o,(t.left+t.width+t.right-d.offset-d.labelOffset)*c),f=p=>tW(p,{width:u,height:n,angle:l,measureText:x=>nx(x,r)});i.set(d,aW(d.formattedValue.toString(),f))}return i}const m$=5;function Tpe(e,t,n=0){const s=Math.min(Math.abs(n)%180,Math.abs(Math.abs(n)%180-180)%180);if(s<m$)return e;if(s>90-m$)return t;const r=Ec(s),i=Math.atan2(t,e);return r<i?e/Math.cos(r):t/Math.sin(r)}function kpe(e,{tickLabelStyle:t,tickLabelInterval:n,tickLabelMinGap:s,reverse:r,isMounted:i,isXInside:l}){if(typeof n=="function")return new Set(e.filter((f,p)=>n(f.value,p)));let o=0;const c=r?-1:1,d=e.filter(f=>{const{offset:p,labelOffset:x,formattedValue:v}=f;if(v==="")return!1;const w=p+x;return l(w)}),u=Ppe(d,t);return new Set(d.filter((f,p)=>{const{offset:x,labelOffset:v}=f,w=x+v;if(p>0&&c*w<c*(o+s))return!1;const{width:b,height:C}=i?Lpe(u,f):{width:0,height:0},N=Tpe(b,C,t?.angle),S=w-c*N/2;return p>0&&c*S<c*(o+s)?!1:(o=w+c*N/2,!0)}))}function Lpe(e,t){if(t.formattedValue===void 0)return{width:0,height:0};let n=0,s=0;for(const r of t.formattedValue.split(`
`)){const i=e.get(r);i&&(n=Math.max(n,i.width),s+=i.height)}return{width:n,height:s}}function Ppe(e,t){const n=new Set;for(const s of e)s.formattedValue&&s.formattedValue.split(`
`).forEach(r=>n.add(r));return Ape(n,t)}function oW(e){return In("MuiChartsAxis",e)}const dy=yn("MuiChartsAxis",["root","line","tickContainer","tick","tickLabel","label","directionX","directionY","top","bottom","left","right","id"]),cW=e=>{const{classes:t,position:n,id:s}=e,r={root:["root","directionX",n,`id-${s}`],line:["line"],tickContainer:["tickContainer"],tick:["tick"],tickLabel:["tickLabel"],label:["label"]};return Mn(r,oW,t)},xE=3,Dpe=4,dW={disableLine:!1,disableTicks:!1,tickSize:6,tickLabelMinGap:4};function Ope({style:e,needsComputation:t,text:n}){return n.split(`
`).map(s=>Ke({text:s},t?nx(s,e):{width:0,height:0}))}const Mpe=["x","y","style","text","ownerState"],Ipe=["angle","textAnchor","dominantBaseline"];function cN(e){const{x:t,y:n,style:s,text:r}=e,i=ca(e,Mpe),l=s??{},{angle:o,textAnchor:c,dominantBaseline:d}=l,u=ca(l,Ipe),f=lN(),p=h.useMemo(()=>Ope({style:u,needsComputation:f&&r.includes(`
`),text:r}),[u,r,f]);let x;switch(d){case"hanging":case"text-before-edge":x=0;break;case"central":x=(p.length-1)/2*-p[0].height;break;default:x=(p.length-1)*-p[0].height;break}return a.jsx("text",Ke({},i,{transform:o?`rotate(${o}, ${t}, ${n})`:void 0,x:t,y:n,textAnchor:c,dominantBaseline:d,style:u,children:p.map((v,w)=>a.jsx("tspan",{x:t,dy:`${w===0?x:p[0].height}px`,dominantBaseline:d,children:v.text},w))}))}function uW(e){const t=aN(e);return t<=30||t>=330||t<=210&&t>=150?"middle":t<=180?"end":"start"}function mW(e){const t=aN(e);return t<=30||t>=330?"hanging":t<=210&&t>=150?"auto":"central"}function fW(e){switch(e){case"start":return"end";case"end":return"start";default:return e}}const $pe=["scale","tickNumber","reverse"];function hW(e){const{xAxis:t,xAxisIds:n}=lr(),s=t[e.axisId??n[0]],{scale:r,tickNumber:i,reverse:l}=s,o=ca(s,$pe),c=mi({props:Ke({},o,e),name:"MuiChartsXAxis"}),d=Ke({},dW,c),{position:u,tickLabelStyle:f,slots:p,slotProps:x}=d,v=Nl(),w=Up(),b=cW(d),C=u==="bottom"?1:-1,N=p?.axisTick??"line",S=p?.axisTickLabel??cN,A=uW((u==="bottom"?0:180)-(f?.angle??0)),k=mW((u==="bottom"?0:180)-(f?.angle??0)),_=po({elementType:S,externalSlotProps:x?.axisTickLabel,additionalProps:{style:Ke({},v.typography.caption,{fontSize:12,lineHeight:1.25,textAnchor:w?fW(A):A,dominantBaseline:k},f)},className:b.tickLabel,ownerState:{}});return{xScale:r,defaultizedProps:d,tickNumber:i,positionSign:C,classes:b,Tick:N,TickLabel:S,axisTickLabelProps:_,reverse:l}}function Rpe(e){const{axisLabelHeight:t}=e,{xScale:n,defaultizedProps:s,tickNumber:r,positionSign:i,classes:l,Tick:o,TickLabel:c,axisTickLabelProps:d,reverse:u}=hW(e),f=Up(),p=xpe(),{disableTicks:x,tickSize:v,valueFormatter:w,slotProps:b,tickInterval:C,tickLabelInterval:N,tickPlacement:S,tickLabelPlacement:A,tickLabelMinGap:k,height:_}=s,T=hi(),{instance:E}=Dr(),I=lN(),z=x?4:v,$=oN({scale:n,tickNumber:r,valueFormatter:w,tickInterval:C,tickPlacement:S,tickLabelPlacement:A,direction:"x"}),P=kpe($,{tickLabelStyle:d.style,tickLabelInterval:N,tickLabelMinGap:k,reverse:u,isMounted:p,isXInside:E.isXInside}),O=Math.max(0,_-(t>0?t+Dpe:0)-z-xE),B=I?Epe(P,T,O,f,d.style):new Map(Array.from(P).map(Q=>[Q,Q.formattedValue]));return a.jsx(h.Fragment,{children:$.map((Q,F)=>{const{offset:ee,labelOffset:V}=Q,de=V??0,oe=i*(z+xE),Z=E.isXInside(ee),R=B.get(Q),ve=P.has(Q);return a.jsxs("g",{transform:`translate(${ee}, 0)`,className:l.tickContainer,children:[!x&&Z&&a.jsx(o,Ke({y2:i*z,className:l.tick},b?.axisTick)),R!==void 0&&ve&&a.jsx(c,Ke({x:de,y:oe},d,{text:R}))]},F)})})}const qh={start:0,extremities:0,end:1,middle:.5,tick:0};function gW(e){const{scale:t,tickInterval:n,tickLabelPlacement:s="middle",tickPlacement:r="extremities",groups:i}=e;return h.useMemo(()=>{const l=t.domain(),o=typeof n=="function"&&l.filter(n)||typeof n=="object"&&n||l;if(t.bandwidth()>0){const c=f$(o,i,r,s,t);return c[0]&&(c[0].ignoreTick=!0),[{formattedValue:void 0,offset:t.range()[0],labelOffset:0,groupIndex:i.length-1},...c,{formattedValue:void 0,offset:t.range()[1],labelOffset:0,groupIndex:i.length-1}]}return f$(o,i,r,s,t)},[t,n,i,r,s])}function f$(e,t,n,s,r){const i=[],l=new Map;let o=0;for(let c=0;c<t.length;c+=1)for(let d=0;d<e.length;d+=1){const u=e[d],f=t[c].getValue(u,d),p=i[i.length-1];if(p?.value!==f||p?.groupIndex!==c){o=1;const v=cs(r)?r(u)-(r.step()-r.bandwidth())/2+qh[n]*r.step():r(u),w=r.step()*o*(qh[s]-qh[n]);i.push({value:f,formattedValue:`${f}`,offset:v,groupIndex:c,dataIndex:d,ignoreTick:!1,labelOffset:w}),l.has(d)||l.set(d,new Set);const b=l.get(d);for(const C of b.values())i[C].ignoreTick=!0;b.add(i.length-1)}else{o+=1;const v=r.step()*o*(qh[s]-qh[n]);p.labelOffset=v}}return i}const h$={tickSize:6},zpe=(e,t,n)=>{const s=e[t]??{},r=n??h$.tickSize,i=r*t*2+r;return Ke({},h$,s,{tickSize:s.tickSize??i})};function Upe(e){const{xScale:t,defaultizedProps:n,positionSign:s,classes:r,Tick:i,TickLabel:l,axisTickLabelProps:o}=hW(e);if(!cs(t))throw new Error("MUI X Charts: ChartsGroupedXAxis only supports the `band` and `point` scale types.");const{disableTicks:c,tickSize:d,valueFormatter:u,slotProps:f,tickInterval:p,tickPlacement:x,tickLabelPlacement:v}=n,w=n.groups,{instance:b}=Dr(),C=gW({scale:t,tickInterval:p,tickPlacement:x,tickLabelPlacement:v,groups:w});return a.jsx(h.Fragment,{children:C.map((N,S)=>{const{offset:A,labelOffset:k}=N,_=k??0,T=b.isXInside(A),E=N.formattedValue,I=N.ignoreTick??!1,z=N.groupIndex??0,$=zpe(w,z,d),P=s*$.tickSize,O=s*($.tickSize+xE);return a.jsxs("g",{transform:`translate(${A}, 0)`,className:r.tickContainer,"data-group-index":z,children:[!c&&!I&&T&&a.jsx(i,Ke({y2:P,className:r.tick},f?.axisTick)),E!==void 0&&a.jsx(l,Ke({x:_,y:O},o,{style:Ke({},o.style,$.tickLabelStyle),text:E}))]},S)})})}const pW=na("g",{name:"MuiChartsAxis",slot:"Root"})(({theme:e})=>({[`& .${dy.tickLabel}`]:Ke({},e.typography.caption,{fill:(e.vars||e).palette.text.primary}),[`& .${dy.label}`]:{fill:(e.vars||e).palette.text.primary},[`& .${dy.line}`]:{stroke:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges",strokeWidth:1},[`& .${dy.tick}`]:{stroke:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges"}})),Fpe=["axis"],Bpe=["scale","tickNumber","reverse"],Hpe=na(pW,{name:"MuiChartsXAxis",slot:"Root"})({});function Gpe(e){let{axis:t}=e,n=ca(e,Fpe);const{scale:s}=t,r=ca(t,Bpe),i=mi({props:Ke({},r,n),name:"MuiChartsXAxis"}),l=Ke({},dW,i),{position:o,labelStyle:c,offset:d,slots:u,slotProps:f,sx:p,disableLine:x,label:v,height:w}=l,b=Nl(),C=cW(l),{left:N,top:S,width:A,height:k}=hi(),_=o==="bottom"?1:-1,T=u?.axisLine??"line",E=u?.axisLabel??cN,I=po({elementType:E,externalSlotProps:f?.axisLabel,additionalProps:{style:Ke({},b.typography.body1,{lineHeight:1,fontSize:14,textAnchor:"middle",dominantBaseline:o==="bottom"?"text-after-edge":"text-before-edge"},c)},ownerState:{}});if(o==="none")return null;const z=v?nx(v,I.style).height:0,$=s.domain(),O=cs(s)?$.length===0:$.some(_L);let B=null;O||(B="groups"in t&&Array.isArray(t.groups)?a.jsx(Upe,Ke({},n)):a.jsx(Rpe,Ke({},n,{axisLabelHeight:z})));const Q={x:N+A/2,y:_*w};return a.jsxs(Hpe,{transform:`translate(0, ${o==="bottom"?S+k+d:S-d})`,className:C.root,sx:p,children:[!x&&a.jsx(T,Ke({x1:N,x2:N+A,className:C.line},f?.axisLine)),B,v&&a.jsx("g",{className:C.label,children:a.jsx(E,Ke({},Q,I,{text:v}))})]})}function Wpe(e){const{xAxis:t,xAxisIds:n}=lr(),s=t[e.axisId??n[0]];return s?a.jsx(Gpe,Ke({},e,{axis:s})):(`${e.axisId}`,null)}function Vpe(e,t,n,s,r){const i=new Map,l=aN(r?.angle??0);let o=1,c=1;r?.textAnchor==="start"?(o=1/0,c=1):r?.textAnchor==="end"?(o=1,c=1/0):(o=2,c=2),l>180&&([o,c]=[c,o]),s&&([o,c]=[c,o]);for(const d of e)if(d.formattedValue){const u=Math.min((d.offset+d.labelOffset)*o,(t.top+t.height+t.bottom-d.offset-d.labelOffset)*c),f=p=>tW(p,{width:n,height:u,angle:l,measureText:x=>nx(x,r)});i.set(d,aW(d.formattedValue.toString(),f))}return i}const xW=e=>{const{classes:t,position:n,id:s}=e,r={root:["root","directionY",n,`id-${s}`],line:["line"],tickContainer:["tickContainer"],tick:["tick"],tickLabel:["tickLabel"],label:["label"]};return Mn(r,oW,t)},yE=2,qpe=2,yW={disableLine:!1,disableTicks:!1,tickSize:6},Ype=["scale","tickNumber","reverse"];function bW(e){const{yAxis:t,yAxisIds:n}=or(),s=t[e.axisId??n[0]],{scale:r,tickNumber:i}=s,l=ca(s,Ype),o=mi({props:Ke({},l,e),name:"MuiChartsYAxis"}),c=Ke({},yW,o),{position:d,tickLabelStyle:u,slots:f,slotProps:p}=c,x=Nl(),v=Up(),w=xW(c),b=d==="right"?1:-1,C=typeof u?.fontSize=="number"?u.fontSize:12,N=f?.axisTick??"line",S=f?.axisTickLabel??cN,A=uW((d==="right"?-90:90)-(u?.angle??0)),k=mW((d==="right"?-90:90)-(u?.angle??0)),_=po({elementType:S,externalSlotProps:p?.axisTickLabel,additionalProps:{style:Ke({},x.typography.caption,{fontSize:C,textAnchor:v?fW(A):A,dominantBaseline:k},u)},className:w.tickLabel,ownerState:{}});return{yScale:r,defaultizedProps:c,tickNumber:i,positionSign:b,classes:w,Tick:N,TickLabel:S,axisTickLabelProps:_}}function Kpe(e){const{axisLabelHeight:t}=e,{yScale:n,defaultizedProps:s,tickNumber:r,positionSign:i,classes:l,Tick:o,TickLabel:c,axisTickLabelProps:d}=bW(e),u=Up(),{disableTicks:f,tickSize:p,valueFormatter:x,slotProps:v,tickPlacement:w,tickLabelPlacement:b,tickInterval:C,tickLabelInterval:N,width:S}=s,A=hi(),{instance:k}=Dr(),_=lN(),T=f?4:p,E=oN({scale:n,tickNumber:r,valueFormatter:x,tickPlacement:w,tickLabelPlacement:b,tickInterval:C,direction:"y"}),I=Math.max(0,S-(t>0?t+qpe:0)-T-yE),z=_?Vpe(E,A,I,u,d.style):new Map(Array.from(E).map($=>[$,$.formattedValue]));return a.jsx(h.Fragment,{children:E.map(($,P)=>{const{offset:O,labelOffset:B,value:Q}=$,F=i*(T+yE),ee=B,V=typeof N=="function"&&!N?.(Q,P),de=k.isYInside(O),oe=z.get($);return de?a.jsxs("g",{transform:`translate(0, ${O})`,className:l.tickContainer,children:[!f&&a.jsx(o,Ke({x2:i*T,className:l.tick},v?.axisTick)),oe!==void 0&&!V&&a.jsx(c,Ke({x:F,y:ee,text:oe},d))]},P):null})})}const g$={tickSize:6},Qpe=(e,t,n)=>{const s=e[t]??{},r=n??g$.tickSize,i=r*t*2+r;return Ke({},g$,s,{tickSize:s.tickSize??i})};function Xpe(e){const{yScale:t,defaultizedProps:n,positionSign:s,classes:r,Tick:i,TickLabel:l,axisTickLabelProps:o}=bW(e);if(!cs(t))throw new Error("MUI X Charts: ChartsGroupedYAxis only supports the `band` and `point` scale types.");const{disableTicks:c,tickSize:d,valueFormatter:u,slotProps:f,tickInterval:p,tickPlacement:x,tickLabelPlacement:v}=n,w=n.groups,{instance:b}=Dr(),C=gW({scale:t,tickInterval:p,tickPlacement:x,tickLabelPlacement:v,groups:w});return a.jsx(h.Fragment,{children:C.map((N,S)=>{const{offset:A,labelOffset:k}=N,_=k??0,T=b.isYInside(A),E=N.formattedValue,I=N.ignoreTick??!1,z=N.groupIndex??0,$=Qpe(w,z,d),P=s*$.tickSize,O=s*($.tickSize+yE);return a.jsxs("g",{transform:`translate(0, ${A})`,className:r.tickContainer,"data-group-index":z,children:[!c&&!I&&T&&a.jsx(i,Ke({x2:P,className:r.tick},f?.axisTick)),E!==void 0&&a.jsx(l,Ke({x:O,y:_},o,{style:Ke({},o.style,$.tickLabelStyle),text:E}))]},S)})})}const Zpe=["axis"],Jpe=["scale","tickNumber","reverse"],exe=na(pW,{name:"MuiChartsYAxis",slot:"Root"})({});function txe(e){let{axis:t}=e,n=ca(e,Zpe);const{scale:s}=t,r=ca(t,Jpe),i=lN(),l=mi({props:Ke({},r,n),name:"MuiChartsYAxis"}),o=Ke({},yW,l),{position:c,disableLine:d,label:u,labelStyle:f,offset:p,width:x,sx:v,slots:w,slotProps:b}=o,C=Nl(),N=xW(o),{left:S,top:A,width:k,height:_}=hi(),T=c==="right"?1:-1,E=w?.axisLine??"line",I=w?.axisLabel??cN,z=po({elementType:E,externalSlotProps:b?.axisLine,additionalProps:{strokeLinecap:"square"},ownerState:{}}),$=po({elementType:I,externalSlotProps:b?.axisLabel,additionalProps:{style:Ke({},C.typography.body1,{lineHeight:1,fontSize:14,angle:T*90,textAnchor:"middle",dominantBaseline:"text-before-edge"},f)},ownerState:{}});if(c==="none")return null;const P={x:T*x,y:A+_/2},O=u==null?0:nx(u,$.style).height,B=s.domain(),F=cs(s)?B.length===0:B.some(_L);let ee=null;return F||(ee="groups"in t&&Array.isArray(t.groups)?a.jsx(Xpe,Ke({},n)):a.jsx(Kpe,Ke({},n,{axisLabelHeight:O}))),a.jsxs(exe,{transform:`translate(${c==="right"?S+k+p:S-p}, 0)`,className:N.root,sx:v,children:[!d&&a.jsx(E,Ke({y1:A,y2:A+_,className:N.line},z)),ee,u&&i&&a.jsx("g",{className:N.label,children:a.jsx(I,Ke({},P,$,{text:u}))})]})}function axe(e){const{yAxis:t,yAxisIds:n}=or(),s=t[e.axisId??n[0]];return s?a.jsx(txe,Ke({},e,{axis:s})):(`${e.axisId}`,null)}function nxe(e){const{slots:t,slotProps:n}=e,{xAxisIds:s,xAxis:r}=lr(),{yAxisIds:i,yAxis:l}=or();return a.jsxs(h.Fragment,{children:[s.map(o=>!r[o].position||r[o].position==="none"?null:a.jsx(Wpe,{slots:t,slotProps:n,axisId:o},o)),i.map(o=>!l[o].position||l[o].position==="none"?null:a.jsx(axe,{slots:t,slotProps:n,axisId:o},o))]})}function sxe(e){return In("MuiTypography",e)}yn("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const rxe={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},ixe=$le(),lxe=e=>{const{align:t,gutterBottom:n,noWrap:s,paragraph:r,variant:i,classes:l}=e,o={root:["root",i,e.align!=="inherit"&&`align${Ra(t)}`,n&&"gutterBottom",s&&"noWrap",r&&"paragraph"]};return Mn(o,sxe,l)},oxe=na("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],n.align!=="inherit"&&t[`align${Ra(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(ou(({theme:e})=>({margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(e.typography).filter(([t,n])=>t!=="inherit"&&n&&typeof n=="object").map(([t,n])=>({props:{variant:t},style:n})),...Object.entries(e.palette).filter(Gg()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette?.text||{}).filter(([,t])=>typeof t=="string").map(([t])=>({props:{color:`text${Ra(t)}`},style:{color:(e.vars||e).palette.text[t]}})),{props:({ownerState:t})=>t.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:t})=>t.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:t})=>t.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:t})=>t.paragraph,style:{marginBottom:16}}]}))),p$={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},TL=h.forwardRef(function(t,n){const{color:s,...r}=Kc({props:t,name:"MuiTypography"}),i=!rxe[s],l=ixe({...r,...i&&{color:s}}),{align:o="inherit",className:c,component:d,gutterBottom:u=!1,noWrap:f=!1,paragraph:p=!1,variant:x="body1",variantMapping:v=p$,...w}=l,b={...l,align:o,color:s,className:c,component:d,gutterBottom:u,noWrap:f,paragraph:p,variant:x,variantMapping:v},C=d||(p?"p":v[x]||p$[x])||"span",N=lxe(b);return a.jsx(oxe,{as:C,ref:n,className:Tt(N.root,c),...w,ownerState:b,style:{...o!=="inherit"&&{"--Typography-textAlign":o},...w.style}})});function cxe(e){return In("MuiChartsTooltip",e)}const Rm=yn("MuiChartsTooltip",["root","paper","table","row","cell","mark","markContainer","labelCell","valueCell","axisValueCell"]),dN=e=>Mn({root:["root"],paper:["paper"],table:["table"],row:["row"],cell:["cell"],mark:["mark"],markContainer:["markContainer"],labelCell:["labelCell"],valueCell:["valueCell"],axisValueCell:["axisValueCell"]},cxe,e);function dxe(){const e=Fa(),t=Rt(e,O9),n=Rt(e,Pr),s=nN(),{xAxis:r,xAxisIds:i}=lr(),{yAxis:l,yAxisIds:o}=or(),{zAxis:c,zAxisIds:d}=xL(),{rotationAxis:u,rotationAxisIds:f}=MG();if(!t)return null;const p=s[t.type]?.series[t.seriesId];if(!p)return null;const x=Bb(p)?p.xAxisId??i[0]:void 0,v=Bb(p)?p.yAxisId??o[0]:void 0,w="zAxisId"in p?p.zAxisId??d[0]:d[0],b=f[0],C=n[p.type].colorProcessor?.(p,x!==void 0?r[x]:void 0,v!==void 0?l[v]:void 0,w!==void 0?c[w]:void 0)??(()=>""),N={};return x!==void 0&&(N.x=r[x]),v!==void 0&&(N.y=l[v]),b!==void 0&&(N.rotation=u[b]),n[p.type].tooltipGetter({series:p,axesConfig:N,getColor:C,identifier:t})}const bE=na("div",{name:"MuiChartsTooltip",slot:"Container",overridesResolver:(e,t)=>t.paper})(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,borderRadius:(e.vars||e).shape?.borderRadius,border:`solid ${(e.vars||e).palette.divider} 1px`})),vE=na("table",{name:"MuiChartsTooltip",slot:"Table"})(({theme:e})=>({borderSpacing:0,[`& .${Rm.markContainer}`]:{display:"inline-block",width:`calc(20px + ${e.spacing(1.5)})`,verticalAlign:"middle"},"& caption":{borderBottom:`solid ${(e.vars||e).palette.divider} 1px`,padding:e.spacing(.5,1.5),textAlign:"start",whiteSpace:"nowrap","& span":{marginRight:e.spacing(1.5)}}})),wE=na("tr",{name:"MuiChartsTooltip",slot:"Row"})(({theme:e})=>({"tr:first-of-type& td":{paddingTop:e.spacing(.5)},"tr:last-of-type& td":{paddingBottom:e.spacing(.5)}})),Um=na(TL,{name:"MuiChartsTooltip",slot:"Cell"})(({theme:e})=>({verticalAlign:"middle",color:(e.vars||e).palette.text.secondary,textAlign:"start",[`&.${Rm.cell}`]:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)},[`&.${Rm.labelCell}`]:{whiteSpace:"nowrap",fontWeight:e.typography.fontWeightRegular},[`&.${Rm.valueCell}, &.${Rm.axisValueCell}`]:{color:(e.vars||e).palette.text.primary,fontWeight:e.typography.fontWeightMedium},[`&.${Rm.valueCell}`]:{paddingLeft:e.spacing(1.5),paddingRight:e.spacing(1.5)},"td:first-of-type&, th:first-of-type&":{paddingLeft:e.spacing(1.5)},"td:last-of-type&, th:last-of-type&":{paddingRight:e.spacing(1.5)}}));function uxe(e){return In("MuiChartsLabelMark",e)}const Cm=yn("MuiChartsLabelMark",["root","line","square","circle","mask","fill"]),mxe=e=>{const{type:t}=e;return Mn({root:typeof t=="function"?["root"]:["root",t],mask:["mask"],fill:["fill"]},uxe,e.classes)},vW=(e,t,n)=>h.forwardRef(function(r,i){const l=mi({props:r,name:e}),o=typeof t.defaultProps=="function"?t.defaultProps(l):t.defaultProps??{},c=lu(o,l),d=Nl(),u=t.classesResolver?.(c,d),f=h.forwardRef(n);return a.jsx(f,Ke({},c,{classes:u,ref:i}))}),fxe=["type","color","className","classes"],hxe=na("div",{name:"MuiChartsLabelMark",slot:"Root"})(()=>({display:"flex",width:14,height:14,[`&.${Cm.line}`]:{width:16,height:"unset",alignItems:"center",[`.${Cm.mask}`]:{height:4,width:"100%",borderRadius:1,overflow:"hidden"}},[`&.${Cm.square}`]:{height:13,width:13,borderRadius:2,overflow:"hidden"},[`&.${Cm.circle}`]:{height:15,width:15},svg:{display:"block"},[`& .${Cm.mask} > *`]:{height:"100%",width:"100%"},[`& .${Cm.mask}`]:{height:"100%",width:"100%"}})),Jb=vW("MuiChartsLabelMark",{defaultProps:{type:"square"},classesResolver:mxe},function(t,n){const{type:s,color:r,className:i,classes:l}=t,o=ca(t,fxe),c=s;return a.jsx(hxe,Ke({className:Tt(l?.root,i),ownerState:t,"aria-hidden":"true",ref:n},o,{children:a.jsx("div",{className:l?.mask,children:typeof c=="function"?a.jsx(c,{className:l?.fill,color:r}):a.jsx("svg",{viewBox:"0 0 24 24",preserveAspectRatio:s==="line"?"none":void 0,children:s==="circle"?a.jsx("circle",{className:l?.fill,r:"12",cx:"12",cy:"12",fill:r}):a.jsx("rect",{className:l?.fill,width:"24",height:"24",fill:r})})})}))});function gxe(e){const{classes:t,sx:n}=e,s=dxe(),r=dN(t);if(!s)return null;if("values"in s){const{label:d,color:u,markType:f}=s;return a.jsx(bE,{sx:n,className:r.paper,children:a.jsxs(vE,{className:r.table,children:[a.jsxs(TL,{component:"caption",children:[a.jsx("div",{className:r.markContainer,children:a.jsx(Jb,{type:f,color:u,className:r.mark})}),d]}),a.jsx("tbody",{children:s.values.map(({formattedValue:p,label:x})=>a.jsxs(wE,{className:r.row,children:[a.jsx(Um,{className:Tt(r.labelCell,r.cell),component:"th",children:x}),a.jsx(Um,{className:Tt(r.valueCell,r.cell),component:"td",children:p})]},x))})]})})}const{color:i,label:l,formattedValue:o,markType:c}=s;return a.jsx(bE,{sx:n,className:r.paper,children:a.jsx(vE,{className:r.table,children:a.jsx("tbody",{children:a.jsxs(wE,{className:r.row,children:[a.jsxs(Um,{className:Tt(r.labelCell,r.cell),component:"th",children:[a.jsx("div",{className:r.markContainer,children:a.jsx(Jb,{type:c,color:i,className:r.mark})}),l]}),a.jsx(Um,{className:Tt(r.valueCell,r.cell),component:"td",children:o})]})})})})}function pxe(e){const t=Fa(),n=Rt(t,Pr);return h.useMemo(()=>{const r={};return Object.keys(n).forEach(i=>{r[i]=n[i].colorProcessor}),r},[n])}const xxe=YB({themeId:Cw});function yxe(){const e=yL(),[t,n]=h.useState(null);return h.useEffect(()=>{const s=e.current;if(s===null)return()=>{};const r=l=>{l.pointerType!=="mouse"&&n(null)},i=l=>{n({pointerType:l.pointerType})};return s.addEventListener("pointerenter",i),s.addEventListener("pointerup",r),()=>{s.removeEventListener("pointerenter",i),s.removeEventListener("pointerup",r)}},[e]),t}function bxe(e){return e instanceof Date?e.toUTCString():e.toLocaleString()}const vxe="@media (pointer: fine)",wxe=()=>xxe(vxe,{defaultMatches:!0}),wW=(e,t)=>t,NW=(e,t)=>t;function jW(e,t,n){return Array.isArray(n)?n.map(s=>o$(t.axis[s],e)):o$(t.axis[n],e)}const CW=Nt(Kp,Qp,ohe,(e,t,n)=>e===null||t===null?null:che(n)(e,t)),Nxe=Nt(CW,ku,wW,(e,t,n=t.axisIds[0])=>e===null?null:jW(e,t,n)),SW=Nt(CW,ku,NW,(e,t,n=t.axisIds)=>e===null?null:jW(e,t,n));Nt(ku,Nxe,wW,(e,t,n=e.axisIds[0])=>{if(t===null||t===-1||e.axisIds.length===0)return null;const s=e.axis[n]?.data;return s?s[t]:null});Nt(ku,SW,NW,(e,t,n=e.axisIds)=>t===null?null:n.map((s,r)=>{const i=t[r];return i===-1?null:e.axis[s].data?.[i]}));const _W=Sw({memoizeOptions:{resultEqualityCheck:Qm}})(SW,ku,(e,t)=>e===null?[]:t.axisIds.map((n,s)=>({axisId:n,dataIndex:e[s]})).filter(({axisId:n,dataIndex:s})=>t.axis[n].triggerTooltip&&s>=0)),jxe=Nt(_W,e=>e.length>0);function fS(e,t,n){const s=e.data?.[t]??null,i=(e.valueFormatter??(l=>e.scaleType==="utc"?bxe(l):l.toLocaleString()))(s,{location:"tooltip",scale:e.scale});return{axisDirection:n,axisId:e.id,mainAxis:e,dataIndex:t,axisValue:s,axisFormattedValue:i,seriesItems:[]}}function Cxe(e={}){const{multipleAxes:t,directions:n}=e,s=uhe(),r=mhe(),i=fhe(),l=Fa(),o=Rt(l,R9),c=Rt(l,z9),d=Rt(l,_W),u=nN(),{xAxis:f}=lr(),{yAxis:p}=or(),{zAxis:x,zAxisIds:v}=xL(),{rotationAxis:w}=MG(),b=pxe();if(o.length===0&&c.length===0&&d.length===0)return null;const C=[];return(n===void 0||n.includes("x"))&&o.forEach(({axisId:N,dataIndex:S})=>{!t&&C.length>1||C.push(fS(f[N],S,"x"))}),(n===void 0||n.includes("y"))&&c.forEach(({axisId:N,dataIndex:S})=>{!t&&C.length>1||C.push(fS(p[N],S,"y"))}),(n===void 0||n.includes("rotation"))&&d.forEach(({axisId:N,dataIndex:S})=>{!t&&C.length>1||C.push(fS(w[N],S,"rotation"))}),Object.keys(u).filter(Gw).forEach(N=>{const S=u[N];return S?S.seriesOrder.forEach(A=>{const k=S.series[A],_=k.xAxisId??s.id,T=k.yAxisId??r.id,E=C.findIndex(({axisDirection:I,axisId:z})=>I==="x"&&z===_||I==="y"&&z===T);if(E>=0){const I="zAxisId"in k?k.zAxisId:v[0],{dataIndex:z}=C[E],$=b[N]?.(k,f[_],p[T],I?x[I]:void 0)(z)??"",P=k.data[z]??null,O=k.valueFormatter(P,{dataIndex:z}),B=Li(k.label,"tooltip")??null;C[E].seriesItems.push({seriesId:A,color:$,value:P,formattedValue:O,formattedLabel:B,markType:k.labelMarkType})}}):[]}),Object.keys(u).filter(pL).forEach(N=>{const S=u[N];return S?S.seriesOrder.forEach(A=>{const k=S.series[A],_=k.rotationAxisId??i?.id,T=C.findIndex(({axisDirection:E,axisId:I})=>E==="rotation"&&I===_);if(T>=0){const{dataIndex:E}=C[T],I=b[N]?.(k)(E)??"",z=k.data[E]??null,$=k.valueFormatter(z,{dataIndex:E}),P=Li(k.label,"tooltip")??null;C[T].seriesItems.push({seriesId:A,color:I,value:z,formattedValue:$,formattedLabel:P,markType:k.labelMarkType})}}):[]}),t?C:C.length===0?C[0]:null}function Sxe(e){return Cxe(Ke({},e,{multipleAxes:!0}))}function _xe(e){const t=dN(e.classes),n=Sxe();return n===null?null:a.jsx(bE,{sx:e.sx,className:t.paper,children:n.map(({axisId:s,mainAxis:r,axisValue:i,axisFormattedValue:l,seriesItems:o})=>a.jsxs(vE,{className:t.table,children:[i!=null&&!r.hideTooltip&&a.jsx(TL,{component:"caption",children:l}),a.jsx("tbody",{children:o.map(({seriesId:c,color:d,formattedValue:u,formattedLabel:f,markType:p})=>u==null?null:a.jsxs(wE,{className:t.row,children:[a.jsxs(Um,{className:Tt(t.labelCell,t.cell),component:"th",children:[a.jsx("div",{className:t.markContainer,children:a.jsx(Jb,{type:p,color:d,className:t.mark})}),f||null]}),a.jsx(Um,{className:Tt(t.valueCell,t.cell),component:"td",children:u})]},c))})]},s))})}var ar="top",si="bottom",ri="right",nr="left",kL="auto",sx=[ar,si,ri,nr],uf="start",ep="end",Axe="clippingParents",AW="viewport",Yh="popper",Exe="reference",x$=sx.reduce(function(e,t){return e.concat([t+"-"+uf,t+"-"+ep])},[]),EW=[].concat(sx,[kL]).reduce(function(e,t){return e.concat([t,t+"-"+uf,t+"-"+ep])},[]),Txe="beforeRead",kxe="read",Lxe="afterRead",Pxe="beforeMain",Dxe="main",Oxe="afterMain",Mxe="beforeWrite",Ixe="write",$xe="afterWrite",Rxe=[Txe,kxe,Lxe,Pxe,Dxe,Oxe,Mxe,Ixe,$xe];function yl(e){return e?(e.nodeName||"").toLowerCase():null}function Tr(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function uu(e){var t=Tr(e).Element;return e instanceof t||e instanceof Element}function ai(e){var t=Tr(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function LL(e){if(typeof ShadowRoot>"u")return!1;var t=Tr(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function zxe(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var s=t.styles[n]||{},r=t.attributes[n]||{},i=t.elements[n];!ai(i)||!yl(i)||(Object.assign(i.style,s),Object.keys(r).forEach(function(l){var o=r[l];o===!1?i.removeAttribute(l):i.setAttribute(l,o===!0?"":o)}))})}function Uxe(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(s){var r=t.elements[s],i=t.attributes[s]||{},l=Object.keys(t.styles.hasOwnProperty(s)?t.styles[s]:n[s]),o=l.reduce(function(c,d){return c[d]="",c},{});!ai(r)||!yl(r)||(Object.assign(r.style,o),Object.keys(i).forEach(function(c){r.removeAttribute(c)}))})}}const Fxe={name:"applyStyles",enabled:!0,phase:"write",fn:zxe,effect:Uxe,requires:["computeStyles"]};function ul(e){return e.split("-")[0]}var Xd=Math.max,ev=Math.min,mf=Math.round;function NE(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function TW(){return!/^((?!chrome|android).)*safari/i.test(NE())}function ff(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var s=e.getBoundingClientRect(),r=1,i=1;t&&ai(e)&&(r=e.offsetWidth>0&&mf(s.width)/e.offsetWidth||1,i=e.offsetHeight>0&&mf(s.height)/e.offsetHeight||1);var l=uu(e)?Tr(e):window,o=l.visualViewport,c=!TW()&&n,d=(s.left+(c&&o?o.offsetLeft:0))/r,u=(s.top+(c&&o?o.offsetTop:0))/i,f=s.width/r,p=s.height/i;return{width:f,height:p,top:u,right:d+f,bottom:u+p,left:d,x:d,y:u}}function PL(e){var t=ff(e),n=e.offsetWidth,s=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:s}}function kW(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&LL(n)){var s=t;do{if(s&&e.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function wo(e){return Tr(e).getComputedStyle(e)}function Bxe(e){return["table","td","th"].indexOf(yl(e))>=0}function ed(e){return((uu(e)?e.ownerDocument:e.document)||window.document).documentElement}function uN(e){return yl(e)==="html"?e:e.assignedSlot||e.parentNode||(LL(e)?e.host:null)||ed(e)}function y$(e){return!ai(e)||wo(e).position==="fixed"?null:e.offsetParent}function Hxe(e){var t=/firefox/i.test(NE()),n=/Trident/i.test(NE());if(n&&ai(e)){var s=wo(e);if(s.position==="fixed")return null}var r=uN(e);for(LL(r)&&(r=r.host);ai(r)&&["html","body"].indexOf(yl(r))<0;){var i=wo(r);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||t&&i.willChange==="filter"||t&&i.filter&&i.filter!=="none")return r;r=r.parentNode}return null}function rx(e){for(var t=Tr(e),n=y$(e);n&&Bxe(n)&&wo(n).position==="static";)n=y$(n);return n&&(yl(n)==="html"||yl(n)==="body"&&wo(n).position==="static")?t:n||Hxe(e)||t}function DL(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Eg(e,t,n){return Xd(e,ev(t,n))}function Gxe(e,t,n){var s=Eg(e,t,n);return s>n?n:s}function LW(){return{top:0,right:0,bottom:0,left:0}}function PW(e){return Object.assign({},LW(),e)}function DW(e,t){return t.reduce(function(n,s){return n[s]=e,n},{})}var Wxe=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,PW(typeof t!="number"?t:DW(t,sx))};function Vxe(e){var t,n=e.state,s=e.name,r=e.options,i=n.elements.arrow,l=n.modifiersData.popperOffsets,o=ul(n.placement),c=DL(o),d=[nr,ri].indexOf(o)>=0,u=d?"height":"width";if(!(!i||!l)){var f=Wxe(r.padding,n),p=PL(i),x=c==="y"?ar:nr,v=c==="y"?si:ri,w=n.rects.reference[u]+n.rects.reference[c]-l[c]-n.rects.popper[u],b=l[c]-n.rects.reference[c],C=rx(i),N=C?c==="y"?C.clientHeight||0:C.clientWidth||0:0,S=w/2-b/2,A=f[x],k=N-p[u]-f[v],_=N/2-p[u]/2+S,T=Eg(A,_,k),E=c;n.modifiersData[s]=(t={},t[E]=T,t.centerOffset=T-_,t)}}function qxe(e){var t=e.state,n=e.options,s=n.element,r=s===void 0?"[data-popper-arrow]":s;r!=null&&(typeof r=="string"&&(r=t.elements.popper.querySelector(r),!r)||kW(t.elements.popper,r)&&(t.elements.arrow=r))}const Yxe={name:"arrow",enabled:!0,phase:"main",fn:Vxe,effect:qxe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function hf(e){return e.split("-")[1]}var Kxe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Qxe(e,t){var n=e.x,s=e.y,r=t.devicePixelRatio||1;return{x:mf(n*r)/r||0,y:mf(s*r)/r||0}}function b$(e){var t,n=e.popper,s=e.popperRect,r=e.placement,i=e.variation,l=e.offsets,o=e.position,c=e.gpuAcceleration,d=e.adaptive,u=e.roundOffsets,f=e.isFixed,p=l.x,x=p===void 0?0:p,v=l.y,w=v===void 0?0:v,b=typeof u=="function"?u({x,y:w}):{x,y:w};x=b.x,w=b.y;var C=l.hasOwnProperty("x"),N=l.hasOwnProperty("y"),S=nr,A=ar,k=window;if(d){var _=rx(n),T="clientHeight",E="clientWidth";if(_===Tr(n)&&(_=ed(n),wo(_).position!=="static"&&o==="absolute"&&(T="scrollHeight",E="scrollWidth")),_=_,r===ar||(r===nr||r===ri)&&i===ep){A=si;var I=f&&_===k&&k.visualViewport?k.visualViewport.height:_[T];w-=I-s.height,w*=c?1:-1}if(r===nr||(r===ar||r===si)&&i===ep){S=ri;var z=f&&_===k&&k.visualViewport?k.visualViewport.width:_[E];x-=z-s.width,x*=c?1:-1}}var $=Object.assign({position:o},d&&Kxe),P=u===!0?Qxe({x,y:w},Tr(n)):{x,y:w};if(x=P.x,w=P.y,c){var O;return Object.assign({},$,(O={},O[A]=N?"0":"",O[S]=C?"0":"",O.transform=(k.devicePixelRatio||1)<=1?"translate("+x+"px, "+w+"px)":"translate3d("+x+"px, "+w+"px, 0)",O))}return Object.assign({},$,(t={},t[A]=N?w+"px":"",t[S]=C?x+"px":"",t.transform="",t))}function Xxe(e){var t=e.state,n=e.options,s=n.gpuAcceleration,r=s===void 0?!0:s,i=n.adaptive,l=i===void 0?!0:i,o=n.roundOffsets,c=o===void 0?!0:o,d={placement:ul(t.placement),variation:hf(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,b$(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:l,roundOffsets:c})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,b$(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const Zxe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Xxe,data:{}};var uy={passive:!0};function Jxe(e){var t=e.state,n=e.instance,s=e.options,r=s.scroll,i=r===void 0?!0:r,l=s.resize,o=l===void 0?!0:l,c=Tr(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&d.forEach(function(u){u.addEventListener("scroll",n.update,uy)}),o&&c.addEventListener("resize",n.update,uy),function(){i&&d.forEach(function(u){u.removeEventListener("scroll",n.update,uy)}),o&&c.removeEventListener("resize",n.update,uy)}}const e0e={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Jxe,data:{}};var t0e={left:"right",right:"left",bottom:"top",top:"bottom"};function gb(e){return e.replace(/left|right|bottom|top/g,function(t){return t0e[t]})}var a0e={start:"end",end:"start"};function v$(e){return e.replace(/start|end/g,function(t){return a0e[t]})}function OL(e){var t=Tr(e),n=t.pageXOffset,s=t.pageYOffset;return{scrollLeft:n,scrollTop:s}}function ML(e){return ff(ed(e)).left+OL(e).scrollLeft}function n0e(e,t){var n=Tr(e),s=ed(e),r=n.visualViewport,i=s.clientWidth,l=s.clientHeight,o=0,c=0;if(r){i=r.width,l=r.height;var d=TW();(d||!d&&t==="fixed")&&(o=r.offsetLeft,c=r.offsetTop)}return{width:i,height:l,x:o+ML(e),y:c}}function s0e(e){var t,n=ed(e),s=OL(e),r=(t=e.ownerDocument)==null?void 0:t.body,i=Xd(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),l=Xd(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),o=-s.scrollLeft+ML(e),c=-s.scrollTop;return wo(r||n).direction==="rtl"&&(o+=Xd(n.clientWidth,r?r.clientWidth:0)-i),{width:i,height:l,x:o,y:c}}function IL(e){var t=wo(e),n=t.overflow,s=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+s)}function OW(e){return["html","body","#document"].indexOf(yl(e))>=0?e.ownerDocument.body:ai(e)&&IL(e)?e:OW(uN(e))}function Tg(e,t){var n;t===void 0&&(t=[]);var s=OW(e),r=s===((n=e.ownerDocument)==null?void 0:n.body),i=Tr(s),l=r?[i].concat(i.visualViewport||[],IL(s)?s:[]):s,o=t.concat(l);return r?o:o.concat(Tg(uN(l)))}function jE(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function r0e(e,t){var n=ff(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function w$(e,t,n){return t===AW?jE(n0e(e,n)):uu(t)?r0e(t,n):jE(s0e(ed(e)))}function i0e(e){var t=Tg(uN(e)),n=["absolute","fixed"].indexOf(wo(e).position)>=0,s=n&&ai(e)?rx(e):e;return uu(s)?t.filter(function(r){return uu(r)&&kW(r,s)&&yl(r)!=="body"}):[]}function l0e(e,t,n,s){var r=t==="clippingParents"?i0e(e):[].concat(t),i=[].concat(r,[n]),l=i[0],o=i.reduce(function(c,d){var u=w$(e,d,s);return c.top=Xd(u.top,c.top),c.right=ev(u.right,c.right),c.bottom=ev(u.bottom,c.bottom),c.left=Xd(u.left,c.left),c},w$(e,l,s));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function MW(e){var t=e.reference,n=e.element,s=e.placement,r=s?ul(s):null,i=s?hf(s):null,l=t.x+t.width/2-n.width/2,o=t.y+t.height/2-n.height/2,c;switch(r){case ar:c={x:l,y:t.y-n.height};break;case si:c={x:l,y:t.y+t.height};break;case ri:c={x:t.x+t.width,y:o};break;case nr:c={x:t.x-n.width,y:o};break;default:c={x:t.x,y:t.y}}var d=r?DL(r):null;if(d!=null){var u=d==="y"?"height":"width";switch(i){case uf:c[d]=c[d]-(t[u]/2-n[u]/2);break;case ep:c[d]=c[d]+(t[u]/2-n[u]/2);break}}return c}function tp(e,t){t===void 0&&(t={});var n=t,s=n.placement,r=s===void 0?e.placement:s,i=n.strategy,l=i===void 0?e.strategy:i,o=n.boundary,c=o===void 0?Axe:o,d=n.rootBoundary,u=d===void 0?AW:d,f=n.elementContext,p=f===void 0?Yh:f,x=n.altBoundary,v=x===void 0?!1:x,w=n.padding,b=w===void 0?0:w,C=PW(typeof b!="number"?b:DW(b,sx)),N=p===Yh?Exe:Yh,S=e.rects.popper,A=e.elements[v?N:p],k=l0e(uu(A)?A:A.contextElement||ed(e.elements.popper),c,u,l),_=ff(e.elements.reference),T=MW({reference:_,element:S,placement:r}),E=jE(Object.assign({},S,T)),I=p===Yh?E:_,z={top:k.top-I.top+C.top,bottom:I.bottom-k.bottom+C.bottom,left:k.left-I.left+C.left,right:I.right-k.right+C.right},$=e.modifiersData.offset;if(p===Yh&&$){var P=$[r];Object.keys(z).forEach(function(O){var B=[ri,si].indexOf(O)>=0?1:-1,Q=[ar,si].indexOf(O)>=0?"y":"x";z[O]+=P[Q]*B})}return z}function o0e(e,t){t===void 0&&(t={});var n=t,s=n.placement,r=n.boundary,i=n.rootBoundary,l=n.padding,o=n.flipVariations,c=n.allowedAutoPlacements,d=c===void 0?EW:c,u=hf(s),f=u?o?x$:x$.filter(function(v){return hf(v)===u}):sx,p=f.filter(function(v){return d.indexOf(v)>=0});p.length===0&&(p=f);var x=p.reduce(function(v,w){return v[w]=tp(e,{placement:w,boundary:r,rootBoundary:i,padding:l})[ul(w)],v},{});return Object.keys(x).sort(function(v,w){return x[v]-x[w]})}function c0e(e){if(ul(e)===kL)return[];var t=gb(e);return[v$(e),t,v$(t)]}function d0e(e){var t=e.state,n=e.options,s=e.name;if(!t.modifiersData[s]._skip){for(var r=n.mainAxis,i=r===void 0?!0:r,l=n.altAxis,o=l===void 0?!0:l,c=n.fallbackPlacements,d=n.padding,u=n.boundary,f=n.rootBoundary,p=n.altBoundary,x=n.flipVariations,v=x===void 0?!0:x,w=n.allowedAutoPlacements,b=t.options.placement,C=ul(b),N=C===b,S=c||(N||!v?[gb(b)]:c0e(b)),A=[b].concat(S).reduce(function(X,je){return X.concat(ul(je)===kL?o0e(t,{placement:je,boundary:u,rootBoundary:f,padding:d,flipVariations:v,allowedAutoPlacements:w}):je)},[]),k=t.rects.reference,_=t.rects.popper,T=new Map,E=!0,I=A[0],z=0;z<A.length;z++){var $=A[z],P=ul($),O=hf($)===uf,B=[ar,si].indexOf(P)>=0,Q=B?"width":"height",F=tp(t,{placement:$,boundary:u,rootBoundary:f,altBoundary:p,padding:d}),ee=B?O?ri:nr:O?si:ar;k[Q]>_[Q]&&(ee=gb(ee));var V=gb(ee),de=[];if(i&&de.push(F[P]<=0),o&&de.push(F[ee]<=0,F[V]<=0),de.every(function(X){return X})){I=$,E=!1;break}T.set($,de)}if(E)for(var oe=v?3:1,Z=function(je){var Ne=A.find(function(Oe){var Fe=T.get(Oe);if(Fe)return Fe.slice(0,je).every(function(me){return me})});if(Ne)return I=Ne,"break"},R=oe;R>0;R--){var ve=Z(R);if(ve==="break")break}t.placement!==I&&(t.modifiersData[s]._skip=!0,t.placement=I,t.reset=!0)}}const u0e={name:"flip",enabled:!0,phase:"main",fn:d0e,requiresIfExists:["offset"],data:{_skip:!1}};function N$(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function j$(e){return[ar,ri,si,nr].some(function(t){return e[t]>=0})}function m0e(e){var t=e.state,n=e.name,s=t.rects.reference,r=t.rects.popper,i=t.modifiersData.preventOverflow,l=tp(t,{elementContext:"reference"}),o=tp(t,{altBoundary:!0}),c=N$(l,s),d=N$(o,r,i),u=j$(c),f=j$(d);t.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:d,isReferenceHidden:u,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":f})}const f0e={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:m0e};function h0e(e,t,n){var s=ul(e),r=[nr,ar].indexOf(s)>=0?-1:1,i=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,l=i[0],o=i[1];return l=l||0,o=(o||0)*r,[nr,ri].indexOf(s)>=0?{x:o,y:l}:{x:l,y:o}}function g0e(e){var t=e.state,n=e.options,s=e.name,r=n.offset,i=r===void 0?[0,0]:r,l=EW.reduce(function(u,f){return u[f]=h0e(f,t.rects,i),u},{}),o=l[t.placement],c=o.x,d=o.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=d),t.modifiersData[s]=l}const p0e={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:g0e};function x0e(e){var t=e.state,n=e.name;t.modifiersData[n]=MW({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const y0e={name:"popperOffsets",enabled:!0,phase:"read",fn:x0e,data:{}};function b0e(e){return e==="x"?"y":"x"}function v0e(e){var t=e.state,n=e.options,s=e.name,r=n.mainAxis,i=r===void 0?!0:r,l=n.altAxis,o=l===void 0?!1:l,c=n.boundary,d=n.rootBoundary,u=n.altBoundary,f=n.padding,p=n.tether,x=p===void 0?!0:p,v=n.tetherOffset,w=v===void 0?0:v,b=tp(t,{boundary:c,rootBoundary:d,padding:f,altBoundary:u}),C=ul(t.placement),N=hf(t.placement),S=!N,A=DL(C),k=b0e(A),_=t.modifiersData.popperOffsets,T=t.rects.reference,E=t.rects.popper,I=typeof w=="function"?w(Object.assign({},t.rects,{placement:t.placement})):w,z=typeof I=="number"?{mainAxis:I,altAxis:I}:Object.assign({mainAxis:0,altAxis:0},I),$=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,P={x:0,y:0};if(_){if(i){var O,B=A==="y"?ar:nr,Q=A==="y"?si:ri,F=A==="y"?"height":"width",ee=_[A],V=ee+b[B],de=ee-b[Q],oe=x?-E[F]/2:0,Z=N===uf?T[F]:E[F],R=N===uf?-E[F]:-T[F],ve=t.elements.arrow,X=x&&ve?PL(ve):{width:0,height:0},je=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:LW(),Ne=je[B],Oe=je[Q],Fe=Eg(0,T[F],X[F]),me=S?T[F]/2-oe-Fe-Ne-z.mainAxis:Z-Fe-Ne-z.mainAxis,Be=S?-T[F]/2+oe+Fe+Oe+z.mainAxis:R+Fe+Oe+z.mainAxis,Pe=t.elements.arrow&&rx(t.elements.arrow),we=Pe?A==="y"?Pe.clientTop||0:Pe.clientLeft||0:0,ne=(O=$?.[A])!=null?O:0,Le=ee+me-ne-we,pe=ee+Be-ne,le=Eg(x?ev(V,Le):V,ee,x?Xd(de,pe):de);_[A]=le,P[A]=le-ee}if(o){var ge,fe=A==="x"?ar:nr,Te=A==="x"?si:ri,Ye=_[k],Ae=k==="y"?"height":"width",Ie=Ye+b[fe],Je=Ye-b[Te],he=[ar,nr].indexOf(C)!==-1,Me=(ge=$?.[k])!=null?ge:0,re=he?Ie:Ye-T[Ae]-E[Ae]-Me+z.altAxis,Qe=he?Ye+T[Ae]+E[Ae]-Me-z.altAxis:Je,We=x&&he?Gxe(re,Ye,Qe):Eg(x?re:Ie,Ye,x?Qe:Je);_[k]=We,P[k]=We-Ye}t.modifiersData[s]=P}}const w0e={name:"preventOverflow",enabled:!0,phase:"main",fn:v0e,requiresIfExists:["offset"]};function N0e(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function j0e(e){return e===Tr(e)||!ai(e)?OL(e):N0e(e)}function C0e(e){var t=e.getBoundingClientRect(),n=mf(t.width)/e.offsetWidth||1,s=mf(t.height)/e.offsetHeight||1;return n!==1||s!==1}function S0e(e,t,n){n===void 0&&(n=!1);var s=ai(t),r=ai(t)&&C0e(t),i=ed(t),l=ff(e,r,n),o={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(s||!s&&!n)&&((yl(t)!=="body"||IL(i))&&(o=j0e(t)),ai(t)?(c=ff(t,!0),c.x+=t.clientLeft,c.y+=t.clientTop):i&&(c.x=ML(i))),{x:l.left+o.scrollLeft-c.x,y:l.top+o.scrollTop-c.y,width:l.width,height:l.height}}function _0e(e){var t=new Map,n=new Set,s=[];e.forEach(function(i){t.set(i.name,i)});function r(i){n.add(i.name);var l=[].concat(i.requires||[],i.requiresIfExists||[]);l.forEach(function(o){if(!n.has(o)){var c=t.get(o);c&&r(c)}}),s.push(i)}return e.forEach(function(i){n.has(i.name)||r(i)}),s}function A0e(e){var t=_0e(e);return Rxe.reduce(function(n,s){return n.concat(t.filter(function(r){return r.phase===s}))},[])}function E0e(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function T0e(e){var t=e.reduce(function(n,s){var r=n[s.name];return n[s.name]=r?Object.assign({},r,s,{options:Object.assign({},r.options,s.options),data:Object.assign({},r.data,s.data)}):s,n},{});return Object.keys(t).map(function(n){return t[n]})}var C$={placement:"bottom",modifiers:[],strategy:"absolute"};function S$(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function k0e(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,s=n===void 0?[]:n,r=t.defaultOptions,i=r===void 0?C$:r;return function(o,c,d){d===void 0&&(d=i);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},C$,i),modifiersData:{},elements:{reference:o,popper:c},attributes:{},styles:{}},f=[],p=!1,x={state:u,setOptions:function(C){var N=typeof C=="function"?C(u.options):C;w(),u.options=Object.assign({},i,u.options,N),u.scrollParents={reference:uu(o)?Tg(o):o.contextElement?Tg(o.contextElement):[],popper:Tg(c)};var S=A0e(T0e([].concat(s,u.options.modifiers)));return u.orderedModifiers=S.filter(function(A){return A.enabled}),v(),x.update()},forceUpdate:function(){if(!p){var C=u.elements,N=C.reference,S=C.popper;if(S$(N,S)){u.rects={reference:S0e(N,rx(S),u.options.strategy==="fixed"),popper:PL(S)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(z){return u.modifiersData[z.name]=Object.assign({},z.data)});for(var A=0;A<u.orderedModifiers.length;A++){if(u.reset===!0){u.reset=!1,A=-1;continue}var k=u.orderedModifiers[A],_=k.fn,T=k.options,E=T===void 0?{}:T,I=k.name;typeof _=="function"&&(u=_({state:u,options:E,name:I,instance:x})||u)}}}},update:E0e(function(){return new Promise(function(b){x.forceUpdate(),b(u)})}),destroy:function(){w(),p=!0}};if(!S$(o,c))return x;x.setOptions(d).then(function(b){!p&&d.onFirstUpdate&&d.onFirstUpdate(b)});function v(){u.orderedModifiers.forEach(function(b){var C=b.name,N=b.options,S=N===void 0?{}:N,A=b.effect;if(typeof A=="function"){var k=A({state:u,name:C,instance:x,options:S}),_=function(){};f.push(k||_)}})}function w(){f.forEach(function(b){return b()}),f=[]}return x}}var L0e=[e0e,y0e,Zxe,Fxe,p0e,u0e,w0e,Yxe,f0e],P0e=k0e({defaultModifiers:L0e});function _$(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function D0e(e){return typeof e=="function"?e():e}const O0e=h.forwardRef(function(t,n){const{children:s,container:r,disablePortal:i=!1}=t,[l,o]=h.useState(null),c=xl(h.isValidElement(s)?oH(s):null,n);if(Kn(()=>{i||o(D0e(r)||document.body)},[r,i]),Kn(()=>{if(l&&!i)return _$(n,l),()=>{_$(n,null)}},[n,l,i]),i){if(h.isValidElement(s)){const d={ref:c};return h.cloneElement(s,d)}return s}return l&&Sf.createPortal(s,l)});function M0e(e){return In("MuiPopper",e)}yn("MuiPopper",["root"]);function I0e(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function CE(e){return typeof e=="function"?e():e}function $0e(e){return e.nodeType!==void 0}const R0e=e=>{const{classes:t}=e;return Mn({root:["root"]},M0e,t)},z0e={},U0e=h.forwardRef(function(t,n){const{anchorEl:s,children:r,direction:i,disablePortal:l,modifiers:o,open:c,placement:d,popperOptions:u,popperRef:f,slotProps:p={},slots:x={},TransitionProps:v,ownerState:w,...b}=t,C=h.useRef(null),N=xl(C,n),S=h.useRef(null),A=xl(S,f),k=h.useRef(A);Kn(()=>{k.current=A},[A]),h.useImperativeHandle(f,()=>S.current,[]);const _=I0e(d,i),[T,E]=h.useState(_),[I,z]=h.useState(CE(s));h.useEffect(()=>{S.current&&S.current.forceUpdate()}),h.useEffect(()=>{s&&z(CE(s))},[s]),Kn(()=>{if(!I||!c)return;const Q=V=>{E(V.placement)};let F=[{name:"preventOverflow",options:{altBoundary:l}},{name:"flip",options:{altBoundary:l}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:V})=>{Q(V)}}];o!=null&&(F=F.concat(o)),u&&u.modifiers!=null&&(F=F.concat(u.modifiers));const ee=P0e(I,C.current,{placement:_,...u,modifiers:F});return k.current(ee),()=>{ee.destroy(),k.current(null)}},[I,l,o,c,u,_]);const $={placement:T};v!==null&&($.TransitionProps=v);const P=R0e(t),O=x.root??"div",B=po({elementType:O,externalSlotProps:p.root,externalForwardedProps:b,additionalProps:{role:"tooltip",ref:N},ownerState:t,className:P.root});return a.jsx(O,{...B,children:typeof r=="function"?r($):r})}),F0e=h.forwardRef(function(t,n){const{anchorEl:s,children:r,container:i,direction:l="ltr",disablePortal:o=!1,keepMounted:c=!1,modifiers:d,open:u,placement:f="bottom",popperOptions:p=z0e,popperRef:x,style:v,transition:w=!1,slotProps:b={},slots:C={},...N}=t,[S,A]=h.useState(!0),k=()=>{A(!1)},_=()=>{A(!0)};if(!c&&!u&&(!w||S))return null;let T;if(i)T=i;else if(s){const z=CE(s);T=z&&$0e(z)?QA(z).body:QA(null).body}const E=!u&&c&&(!w||S)?"none":void 0,I=w?{in:u,onEnter:k,onExited:_}:void 0;return a.jsx(O0e,{disablePortal:o,container:T,children:a.jsx(U0e,{anchorEl:s,direction:l,disablePortal:o,modifiers:d,ref:n,open:w?!S:u,placement:f,popperOptions:p,popperRef:x,slotProps:b,slots:C,...N,style:{position:"fixed",top:0,left:0,display:E,...v},TransitionProps:I,children:r})})}),B0e=na(F0e,{name:"MuiPopper",slot:"Root"})({}),H0e=h.forwardRef(function(t,n){const s=Up(),r=Kc({props:t,name:"MuiPopper"}),{anchorEl:i,component:l,components:o,componentsProps:c,container:d,disablePortal:u,keepMounted:f,modifiers:p,open:x,placement:v,popperOptions:w,popperRef:b,transition:C,slots:N,slotProps:S,...A}=r,k=N?.root??o?.Root,_={anchorEl:i,container:d,disablePortal:u,keepMounted:f,modifiers:p,open:x,placement:v,popperOptions:w,popperRef:b,transition:C,...A};return a.jsx(B0e,{as:l,direction:s?"rtl":"ltr",slots:{root:k},slotProps:S??c,..._,ref:n})});function G0e(e){const{children:t,defer:n=!1,fallback:s=null}=e,[r,i]=h.useState(!1);return Kn(()=>{n||i(!0)},[n]),h.useEffect(()=>{n&&i(!0)},[n]),r?t:s}function A$(e){let t,n;const s=()=>{n=null,e(...t)};function r(...i){t=i,n||(n=requestAnimationFrame(s))}return r.clear=()=>{n&&(cancelAnimationFrame(n),n=null)},r}function W0e(){const e=Fa(),t=Rt(e,OG),n=Rt(e,jl);return t!==void 0?"polar":n!==void 0?"cartesian":"none"}const V0e=["trigger","position","anchor","classes","children"],E$=()=>!1;function q0e(e,t,n){return n?E$:e==="item"?rfe:t==="polar"?jxe:t==="cartesian"?dfe:E$}const Y0e=na(H0e,{name:"MuiChartsTooltip",slot:"Root"})(({theme:e})=>({pointerEvents:"none",zIndex:e.zIndex.modal}));function K0e(e){const t=mi({props:e,name:"MuiChartsTooltipContainer"}),{trigger:n="axis",position:s,anchor:r="pointer",classes:i,children:l}=t,o=ca(t,V0e),c=yL(),d=dN(i),u=yxe(),f=wxe(),p=h.useRef(null),x=_w(()=>({x:0,y:0})),v=W0e(),w=Fa(),b=Rt(w,yfe),C=Rt(w,q0e(n,v,b)),S=Rt(w,Xp)==="keyboard"?"node":r,A=Rt(w,n==="item"&&S==="node"?ife:()=>null,s);h.useEffect(()=>{const I=c.current;if(I===null)return()=>{};if(A!==null){const P=A$(()=>{x.current={x:I.getBoundingClientRect().left+(A?.x??0),y:I.getBoundingClientRect().top+(A?.y??0)},p.current?.update()});return P(),()=>P.clear()}const z=A$((P,O)=>{x.current={x:P,y:O},p.current?.update()}),$=P=>{z(P.clientX,P.clientY)};return I.addEventListener("pointerdown",$),I.addEventListener("pointermove",$),I.addEventListener("pointerenter",$),()=>{I.removeEventListener("pointerdown",$),I.removeEventListener("pointermove",$),I.removeEventListener("pointerenter",$),z.clear()}},[c,x,A]);const k=h.useMemo(()=>({getBoundingClientRect:()=>({x:x.current.x,y:x.current.y,top:x.current.y,left:x.current.x,right:x.current.x,bottom:x.current.y,width:0,height:0,toJSON:()=>""})}),[x]),_=u?.pointerType==="mouse"||f,T=u?.pointerType==="touch"||!f,E=h.useMemo(()=>[{name:"offset",options:{offset:()=>T?[0,64]:[0,8]}},..._?[]:[{name:"flip",options:{fallbackPlacements:["top-end","top-start","bottom-end","bottom"]}}],{name:"preventOverflow",options:{altAxis:!0}}],[_,T]);return n==="none"?null:a.jsx(G0e,{children:C&&a.jsx(Y0e,Ke({},o,{className:d?.root,open:C,placement:o.placement??s??(_?"right-start":"top"),popperRef:p,anchorEl:k,modifiers:E,children:l}))})}function Q0e(e){const{classes:t,trigger:n="axis"}=e,s=dN(t);return a.jsx(K0e,Ke({},e,{classes:t,children:n==="axis"?a.jsx(_xe,{classes:s}):a.jsx(gxe,{classes:s})}))}const X0e=e=>({type:"series",color:e.color,label:e.label,seriesId:e.seriesId,itemId:e.itemId});function Z0e(e){return In("MuiChartsLegend",e)}const J0e=e=>{const{classes:t,direction:n}=e;return Mn({root:["root",n],item:["item"],mark:["mark"],label:["label"],series:["series"]},Z0e,t)},T$=yn("MuiChartsLegend",["root","item","series","mark","label","vertical","horizontal"]),eye=["slots","slotProps"],tye=["ownerState"],aye=(e,t,n,s)=>{function r(i,l){const o=mi({props:i,name:e}),c=typeof n.defaultProps=="function"?n.defaultProps(o):n.defaultProps??{},d=lu(c,o),u=d,{slots:f,slotProps:p}=u,x=ca(u,eye),v=Nl(),w=n.classesResolver?.(d,v),b=f?.[t]??s,C=n.propagateSlots&&!f?.[t],N=po({elementType:b,externalSlotProps:p?.[t],additionalProps:Ke({},x,{classes:w},C&&{slots:f,slotProps:p}),ownerState:{}}),S=ca(N,tye),A=Ke({},S);for(const k of n.omitProps??[])delete A[k];return a.jsx(b,Ke({},A,{ref:l}))}return h.forwardRef(r)};function nye(e){return In("MuiChartsLabel",e)}yn("MuiChartsLabel",["root"]);const sye=e=>Mn({root:["root"]},nye,e.classes),rye=["children","className","classes"],iye=vW("MuiChartsLabel",{classesResolver:sye},function(t,n){const{children:s,className:r,classes:i}=t,l=ca(t,rye);return a.jsx("span",Ke({className:Tt(i?.root,r),ref:n},l,{children:s}))}),lye=["direction","onItemClick","className","classes"],oye=na("ul",{name:"MuiChartsLegend",slot:"Root"})(({ownerState:e,theme:t})=>Ke({},t.typography.caption,{color:(t.vars||t).palette.text.primary,lineHeight:"100%",display:"flex",flexDirection:e.direction==="vertical"?"column":"row",alignItems:e.direction==="vertical"?void 0:"center",flexShrink:0,gap:t.spacing(2),listStyleType:"none",paddingInlineStart:0,marginBlock:t.spacing(1),marginInline:t.spacing(1),flexWrap:"wrap",li:{display:e.direction==="horizontal"?"inline-flex":void 0},[`button.${T$.series}`]:{background:"none",border:"none",padding:0,fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",letterSpacing:"inherit",color:"inherit"},[`& .${T$.series}`]:{display:e.direction==="vertical"?"flex":"inline-flex",alignItems:"center",gap:t.spacing(1)},gridArea:"legend"})),cye=aye("MuiChartsLegend","legend",{defaultProps:{direction:"horizontal"},omitProps:["position"],classesResolver:J0e},h.forwardRef(function(t,n){const s=Ehe(),{onItemClick:r,className:i,classes:l}=t,o=ca(t,lye);if(s.items.length===0)return null;const c=r?"button":"div";return a.jsx(oye,Ke({className:Tt(l?.root,i),ref:n},o,{ownerState:t,children:s.items.map((d,u)=>a.jsx("li",{className:l?.item,"data-series":d.id,children:a.jsxs(c,{className:l?.series,role:r?"button":void 0,type:r?"button":void 0,onClick:r?(f=>r(f,X0e(d),u)):void 0,children:[a.jsx(Jb,{className:l?.mark,color:d.color,type:d.markType}),a.jsx(iye,{className:l?.label,children:d.label})]})},d.id))}))}));function dye(e){return In("MuiChartsAxisHighlight",e)}yn("MuiChartsAxisHighlight",["root"]);const tv=na("path",{name:"MuiChartsAxisHighlight",slot:"Root"})(({theme:e})=>({pointerEvents:"none",variants:[{props:{axisHighlight:"band"},style:Ke({fill:"white",fillOpacity:.1},e.applyStyles("light",{fill:"gray"}))},{props:{axisHighlight:"line"},style:Ke({strokeDasharray:"5 2",stroke:"#ffffff"},e.applyStyles("light",{stroke:"#000000"}))}]}));function uye(e){const{type:t,classes:n}=e,{left:s,width:r}=hi(),i=Fa(),l=Rt(i,vfe),o=Rt(i,Fs);return l.length===0?null:l.map(({axisId:c,value:d})=>{const f=o.axis[c].scale,p=Mf(f),x=t==="band"&&d!==null&&cs(f);return a.jsxs(h.Fragment,{children:[x&&f(d)!==void 0&&a.jsx(tv,{d:`M ${s} ${f(d)-(f.step()-f.bandwidth())/2} l 0 ${f.step()} l ${r} 0 l 0 ${-f.step()} Z`,className:n.root,ownerState:{axisHighlight:"band"}}),t==="line"&&d!==null&&a.jsx(tv,{d:`M ${s} ${p(d)} L ${s+r} ${p(d)}`,className:n.root,ownerState:{axisHighlight:"line"}})]},`${c}-${d}`)})}function mye(e){const{type:t,classes:n}=e,{top:s,height:r}=hi(),i=Fa(),l=Rt(i,bfe),o=Rt(i,Us);return l.length===0?null:l.map(({axisId:c,value:d})=>{const f=o.axis[c].scale,p=Mf(f),x=t==="band"&&d!==null&&cs(f);return a.jsxs(h.Fragment,{children:[x&&f(d)!==void 0&&a.jsx(tv,{d:`M ${f(d)-(f.step()-f.bandwidth())/2} ${s} l ${f.step()} 0 l 0 ${r} l ${-f.step()} 0 Z`,className:n.root,ownerState:{axisHighlight:"band"}}),t==="line"&&d!==null&&a.jsx(tv,{d:`M ${p(d)} ${s} L ${p(d)} ${s+r}`,className:n.root,ownerState:{axisHighlight:"line"}})]},`${c}-${d}`)})}const fye=()=>Mn({root:["root"]},dye);function hye(e){const{x:t,y:n}=e,s=fye();return a.jsxs(h.Fragment,{children:[t&&t!=="none"&&a.jsx(mye,{type:t,classes:s}),n&&n!=="none"&&a.jsx(uye,{type:n,classes:s})]})}function gye(e){const{id:t,offset:n}=e,{left:s,top:r,width:i,height:l}=hi(),o=Ke({top:0,right:0,bottom:0,left:0},n);return a.jsx("clipPath",{id:t,children:a.jsx("rect",{x:s-o.left,y:r-o.top,width:i+o.left+o.right,height:l+o.top+o.bottom})})}const pye=parseInt(h.version,10),xye=["x","y","id","classes","color","shape"];function yye(e){return In("MuiHighlightElement",e)}yn("MuiHighlightElement",["root"]);const bye=e=>{const{classes:t,id:n}=e,s={root:["root",`series-${n}`]};return Mn(s,yye,t)};function vye(e){const{x:t,y:n,color:s,shape:r}=e,i=ca(e,xye),l=bye(e),o=r==="circle"?"circle":"path",c=r==="circle"?{cx:0,cy:0,r:i.r===void 0?5:i.r}:{d:mL(uG[ZG(r)])()},d=pye>18?{transformOrigin:`${t} ${n}`}:{"transform-origin":`${t} ${n}`};return a.jsx(o,Ke({pointerEvents:"none",className:l.root,transform:`translate(${t} ${n})`,fill:s},d,c,i))}const wye=["slots","slotProps"];function Nye(e){const{slots:t,slotProps:n}=e,s=ca(e,wye),r=ax(),{xAxis:i,xAxisIds:l}=lr(),{yAxis:o,yAxisIds:c}=or(),{instance:d}=Dr(),u=Fa(),f=Rt(u,H9);if(f.length===0||r===void 0)return null;const{series:p,stackingGroups:x}=r,v=l[0],w=c[0],b=t?.lineHighlight??vye;return a.jsx("g",Ke({},s,{children:f.flatMap(({dataIndex:C,axisId:N})=>x.flatMap(({ids:S})=>S.flatMap(A=>{const{xAxisId:k=v,yAxisId:_=w,stackedData:T,data:E,disableHighlight:I,shape:z="circle"}=p[A];if(I||E[C]==null||N!==k)return null;const $=Mf(i[k].scale),P=o[_].scale,O=i[k].data;if(O===void 0)throw new Error(`MUI X Charts: ${k===Ew?"The first `xAxis`":`The x-axis with id "${k}"`} should have data property to be able to display a line plot.`);const B=$(O[C]),Q=P(T[C][1]);if(!d.isPointInside(B,Q))return null;const F=jL(p[A],i[k],o[_]);return a.jsx(b,Ke({id:A,color:F(C),x:B,y:Q,shape:z},n?.lineHighlight),`${A}`)})))}))}function jye(e){return In("MuiChartsGrid",e)}const k$=yn("MuiChartsGrid",["root","line","horizontalLine","verticalLine"]),Cye=na("g",{name:"MuiChartsGrid",slot:"Root",overridesResolver:(e,t)=>[{[`&.${k$.verticalLine}`]:t.verticalLine},{[`&.${k$.horizontalLine}`]:t.horizontalLine},t.root]})({}),IW=na("line",{name:"MuiChartsGrid",slot:"Line"})(({theme:e})=>({stroke:(e.vars||e).palette.divider,shapeRendering:"crispEdges",strokeWidth:1}));function Sye(e){const{instance:t}=Dr(),{axis:n,start:s,end:r,classes:i}=e,{scale:l,tickNumber:o,tickInterval:c}=n,d=oN({scale:l,tickNumber:o,tickInterval:c,direction:"x"});return a.jsx(h.Fragment,{children:d.map(({value:u,offset:f})=>t.isXInside(f)?a.jsx(IW,{y1:s,y2:r,x1:f,x2:f,className:i.verticalLine},`vertical-${u?.getTime?.()??u}`):null)})}function _ye(e){const{instance:t}=Dr(),{axis:n,start:s,end:r,classes:i}=e,{scale:l,tickNumber:o,tickInterval:c}=n,d=oN({scale:l,tickNumber:o,tickInterval:c,direction:"y"});return a.jsx(h.Fragment,{children:d.map(({value:u,offset:f})=>t.isYInside(f)?a.jsx(IW,{y1:f,y2:f,x1:s,x2:r,className:i.horizontalLine},`horizontal-${u?.getTime?.()??u}`):null)})}const Aye=["vertical","horizontal"],Eye=({classes:e})=>Mn({root:["root"],verticalLine:["line","verticalLine"],horizontalLine:["line","horizontalLine"]},jye,e);function Tye(e){const t=mi({props:e,name:"MuiChartsGrid"}),n=hi(),{vertical:s,horizontal:r}=t,i=ca(t,Aye),{xAxis:l,xAxisIds:o}=lr(),{yAxis:c,yAxisIds:d}=or(),u=Eye(t),f=c[d[0]],p=l[o[0]];return a.jsxs(Cye,Ke({},i,{className:u.root,children:[s&&a.jsx(Sye,{axis:p,start:n.top,end:n.height+n.top,classes:u}),r&&a.jsx(_ye,{axis:f,start:n.left,end:n.width+n.left,classes:u})]}))}const kye=["message"],Lye=na("text")(({theme:e})=>Ke({},e.typography.body2,{stroke:"none",fill:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges",textAnchor:"middle",dominantBaseline:"middle"}));function Pye(e){const{message:t}=e,n=ca(e,kye),{top:s,left:r,height:i,width:l}=hi(),{localeText:o}=WG();return a.jsx(Lye,Ke({x:r+l/2,y:s+i/2},n,{children:t??o.loading}))}const Dye=["message"],Oye=na("text")(({theme:e})=>Ke({},e.typography.body2,{stroke:"none",fill:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges",textAnchor:"middle",dominantBaseline:"middle"}));function Mye(e){const{message:t}=e,n=ca(e,Dye),{top:s,left:r,height:i,width:l}=hi(),{localeText:o}=WG();return a.jsx(Oye,Ke({x:r+l/2,y:s+i/2},n,{children:t??o.noData}))}function Iye(){const e=nN();return Object.values(e).every(t=>{if(!t)return!0;const{series:n,seriesOrder:s}=t;return s.every(r=>{const i=n[r];return i.type==="sankey"?i.data.links.length===0:i.data.length===0})})}function $ye(e){const t=Iye();if(e.loading){const n=e.slots?.loadingOverlay??Pye;return a.jsx(n,Ke({},e.slotProps?.loadingOverlay))}if(t){const n=e.slots?.noDataOverlay??Mye;return a.jsx(n,Ke({},e.slotProps?.noDataOverlay))}return null}const Rye=[Jp,Zp,Yp,Df,ex,qw],zye=["xAxis","yAxis","series","width","height","margin","colors","dataset","sx","onAreaClick","onLineClick","onMarkClick","axisHighlight","disableLineItemHighlight","hideLegend","grid","children","slots","slotProps","skipAnimation","loading","highlightedItem","onHighlightChange","className","showToolbar","brushConfig"],Uye=e=>{const{xAxis:t,yAxis:n,series:s,width:r,height:i,margin:l,colors:o,dataset:c,sx:d,onAreaClick:u,onLineClick:f,onMarkClick:p,axisHighlight:x,disableLineItemHighlight:v,grid:w,children:b,slots:C,slotProps:N,skipAnimation:S,loading:A,highlightedItem:k,onHighlightChange:_,className:T,brushConfig:E}=e,I=ca(e,zye),$=`${jw()}-clip-path`,P=h.useMemo(()=>s.map(Ne=>Ke({disableHighlight:!!v,type:"line"},Ne)),[v,s]),O=Ke({},I,{series:P,width:r,height:i,margin:l,colors:o,dataset:c,xAxis:t??[{id:Ew,scaleType:"point",data:Array.from({length:Math.max(...s.map(Ne=>(Ne.data??c??[]).length))},(Ne,Oe)=>Oe)}],yAxis:n,highlightedItem:k,onHighlightChange:_,disableAxisListener:N?.tooltip?.trigger!=="axis"&&x?.x==="none"&&x?.y==="none",className:T,skipAnimation:S,brushConfig:E,plugins:Rye}),B={vertical:w?.vertical,horizontal:w?.horizontal},Q={clipPath:`url(#${$})`},F={id:$},ee={slots:C,slotProps:N,onItemClick:u},V={slots:C,slotProps:N,onItemClick:f},de={slots:C,slotProps:N,onItemClick:p,skipAnimation:S},oe={slots:C,slotProps:N,loading:A},Z={slots:C,slotProps:N},R=Ke({x:"line"},x),ve={slots:C,slotProps:N},X={slots:C,slotProps:N};return{chartsWrapperProps:{sx:d,legendPosition:e.slotProps?.legend?.position,legendDirection:e.slotProps?.legend?.direction,hideLegend:e.hideLegend??!1},chartContainerProps:O,gridProps:B,clipPathProps:F,clipPathGroupProps:Q,areaPlotProps:ee,linePlotProps:V,markPlotProps:de,overlayProps:oe,chartsAxisProps:Z,axisHighlightProps:R,lineHighlightPlotProps:ve,legendProps:X,children:b}};function Fye(e,t,n,s,r,i,l,o,c,d,u,f=1/0,p=1){const x=s.copy(),v=r.copy();x.range([0,1]),v.range([0,1]);const w=function(E){const I=x(n[E].x),z=v(n[E].y);return I>=i&&I<=l&&z>=o&&z<=c},b=s.range()[1]-s.range()[0],C=r.range()[1]-r.range()[0],N=b*b,S=C*C;function A(T,E){return N*T*T+S*E*E}const k=x(L$(s,d,T=>n[T]?.x)),_=v(L$(r,u,T=>n[T]?.y));return e.neighbors(k,_,p,f!=null?f*f:1/0,w,A)}function L$(e,t,n){if(cs(e)){const s=e.bandwidth()===0?Math.floor((t-Math.min(...e.range())+e.step()/2)/e.step()):Math.floor((t-Math.min(...e.range()))/e.step());return n(s)}return e.invert(t)}const mN=({svgRef:e,params:t,store:n,instance:s})=>{const{disableVoronoi:r,voronoiMaxRadius:i,onItemClick:l}=t,o=Rt(n,ir),{axis:c,axisIds:d}=Rt(n,Us),{axis:u,axisIds:f}=Rt(n,Fs),p=Rt(n,w9),{series:x,seriesOrder:v}=Rt(n,on)?.scatter??{},w=Rt(n,p?Gme:Wme),b=d[0],C=f[0];Kn(()=>{n.set("voronoi",{isVoronoiEnabled:!r})},[n,r]),h.useEffect(()=>{if(e.current===null||r)return;const A=e.current;function k(B){const Q=Zg(A,B);if(!s.isPointInside(Q.x,Q.y))return"outside-chart";let F;for(const ee of v??[]){const V=(x??{})[ee],de=w.get(ee);if(!de)continue;const oe=V.xAxisId??b,Z=V.yAxisId??C,R=XI(n.getSnapshot(),oe),ve=XI(n.getSnapshot(),Z),X=i==="item"?V.markerSize:i,je=(R?.start??0)/100,Ne=(R?.end??100)/100,Oe=(ve?.start??0)/100,Fe=(ve?.end??100)/100,me=c[oe].scale,Be=u[Z].scale,Pe=Fye(de,o,V.data,me,Be,je,Ne,Oe,Fe,Q.x,Q.y,X)[0];if(Pe===void 0)continue;const we=V.data[Pe],ne=me(we.x),Le=Be(we.y),pe=(ne-Q.x)**2+(Le-Q.y)**2;(F===void 0||pe<F.distanceSq)&&(F={dataIndex:Pe,seriesId:ee,distanceSq:pe})}return F===void 0?"no-point-found":{seriesId:F.seriesId,dataIndex:F.dataIndex}}const _=s.addInteractionListener("moveEnd",B=>{B.detail.activeGestures.pan||(s.cleanInteraction?.(),s.clearHighlight?.())}),T=s.addInteractionListener("panEnd",B=>{B.detail.activeGestures.move||(s.cleanInteraction?.(),s.clearHighlight?.())}),E=s.addInteractionListener("quickPressEnd",B=>{!B.detail.activeGestures.move&&!B.detail.activeGestures.pan&&(s.cleanInteraction?.(),s.clearHighlight?.())}),I=B=>{const Q=k(B.detail.srcEvent);if(Q==="outside-chart"){s.cleanInteraction?.(),s.clearHighlight?.();return}if(Q==="outside-voronoi-max-radius"||Q==="no-point-found"){s.removeItemInteraction?.(),s.clearHighlight?.();return}const{seriesId:F,dataIndex:ee}=Q;s.setItemInteraction?.({type:"scatter",seriesId:F,dataIndex:ee},{interaction:"pointer"}),s.setHighlight?.({seriesId:F,dataIndex:ee})},z=s.addInteractionListener("tap",B=>{const Q=k(B.detail.srcEvent);if(typeof Q!="string"&&l){const{seriesId:F,dataIndex:ee}=Q;l(B.detail.srcEvent,{type:"scatter",seriesId:F,dataIndex:ee})}}),$=s.addInteractionListener("move",I),P=s.addInteractionListener("pan",I),O=s.addInteractionListener("quickPress",I);return()=>{z.cleanup(),$.cleanup(),_.cleanup(),P.cleanup(),T.cleanup(),O.cleanup(),E.cleanup()}},[e,u,c,i,l,r,o,s,v,x,w,b,C,n]);const N=rs(()=>{n.set("voronoi",{isVoronoiEnabled:!0})}),S=rs(()=>{n.set("voronoi",{isVoronoiEnabled:!1})});return{instance:{enableVoronoi:N,disableVoronoi:S}}};mN.getDefaultizedParams=({params:e})=>Ke({},e,{disableVoronoi:e.disableVoronoi??!e.series.some(t=>t.type==="scatter")});mN.getInitialState=e=>({voronoi:{isVoronoiEnabled:!e.disableVoronoi}});mN.params={disableVoronoi:!0,voronoiMaxRadius:!0,onItemClick:!0};const $W=[Jp,Zp,Yp,Df,ex,mN,qw],Bye=["width","height","margin","children","series","colors","dataset","desc","onAxisClick","highlightedAxis","onHighlightedAxisChange","disableVoronoi","voronoiMaxRadius","onItemClick","disableAxisListener","highlightedItem","onHighlightChange","sx","title","xAxis","yAxis","zAxis","rotationAxis","radiusAxis","skipAnimation","seriesConfig","plugins","localeText","slots","slotProps","experimentalFeatures","enableKeyboardNavigation","brushConfig"],Hye=(e,t)=>{const n=e,{width:s,height:r,margin:i,children:l,series:o,colors:c,dataset:d,desc:u,onAxisClick:f,highlightedAxis:p,onHighlightedAxisChange:x,disableVoronoi:v,voronoiMaxRadius:w,onItemClick:b,disableAxisListener:C,highlightedItem:N,onHighlightChange:S,sx:A,title:k,xAxis:_,yAxis:T,zAxis:E,rotationAxis:I,radiusAxis:z,skipAnimation:$,seriesConfig:P,plugins:O,localeText:B,slots:Q,slotProps:F,experimentalFeatures:ee,enableKeyboardNavigation:V,brushConfig:de}=n,oe=ca(n,Bye),Z=Ke({title:k,desc:u,sx:A,ref:t},oe);return{chartDataProviderProps:{margin:i,series:o,colors:c,dataset:d,disableAxisListener:C,highlightedItem:N,onHighlightChange:S,onAxisClick:f,highlightedAxis:p,onHighlightedAxisChange:x,disableVoronoi:v,voronoiMaxRadius:w,onItemClick:b,xAxis:_,yAxis:T,zAxis:E,rotationAxis:I,radiusAxis:z,skipAnimation:$,width:s,height:r,localeText:B,seriesConfig:P,experimentalFeatures:ee,enableKeyboardNavigation:V,brushConfig:de,plugins:O??$W,slots:Q,slotProps:F},chartsSurfaceProps:Z,children:l}};function P$(e){try{return e.matches(":focus-visible")}catch{}return!1}class av{static create(){return new av}static use(){const t=_w(av.create).current,[n,s]=h.useState(!1);return t.shouldMount=n,t.setShouldMount=s,h.useEffect(t.mountEffect,[n]),t}constructor(){this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=Wye(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}mountEffect=()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())};start(...t){this.mount().then(()=>this.ref.current?.start(...t))}stop(...t){this.mount().then(()=>this.ref.current?.stop(...t))}pulsate(...t){this.mount().then(()=>this.ref.current?.pulsate(...t))}}function Gye(){return av.use()}function Wye(){let e,t;const n=new Promise((s,r)=>{e=s,t=r});return n.resolve=e,n.reject=t,n}class $L{static create(){return new $L}currentId=null;start(t,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},t)}clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function Vye(){const e=_w($L.create).current;return hH(e.disposeEffect),e}function qye(e){const{className:t,classes:n,pulsate:s=!1,rippleX:r,rippleY:i,rippleSize:l,in:o,onExited:c,timeout:d}=e,[u,f]=h.useState(!1),p=Tt(t,n.ripple,n.rippleVisible,s&&n.ripplePulsate),x={width:l,height:l,top:-(l/2)+i,left:-(l/2)+r},v=Tt(n.child,u&&n.childLeaving,s&&n.childPulsate);return!o&&!u&&f(!0),h.useEffect(()=>{if(!o&&c!=null){const w=setTimeout(c,d);return()=>{clearTimeout(w)}}},[c,o,d]),a.jsx("span",{className:p,style:x,children:a.jsx("span",{className:v})})}const Xr=yn("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),SE=550,Yye=80,Kye=zp`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,Qye=zp`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,Xye=zp`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,Zye=na("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Jye=na(qye,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${Xr.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${Kye};
    animation-duration: ${SE}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  &.${Xr.ripplePulsate} {
    animation-duration: ${({theme:e})=>e.transitions.duration.shorter}ms;
  }

  & .${Xr.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${Xr.childLeaving} {
    opacity: 0;
    animation-name: ${Qye};
    animation-duration: ${SE}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  & .${Xr.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${Xye};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,ebe=h.forwardRef(function(t,n){const s=Kc({props:t,name:"MuiTouchRipple"}),{center:r=!1,classes:i={},className:l,...o}=s,[c,d]=h.useState([]),u=h.useRef(0),f=h.useRef(null);h.useEffect(()=>{f.current&&(f.current(),f.current=null)},[c]);const p=h.useRef(!1),x=Vye(),v=h.useRef(null),w=h.useRef(null),b=h.useCallback(A=>{const{pulsate:k,rippleX:_,rippleY:T,rippleSize:E,cb:I}=A;d(z=>[...z,a.jsx(Jye,{classes:{ripple:Tt(i.ripple,Xr.ripple),rippleVisible:Tt(i.rippleVisible,Xr.rippleVisible),ripplePulsate:Tt(i.ripplePulsate,Xr.ripplePulsate),child:Tt(i.child,Xr.child),childLeaving:Tt(i.childLeaving,Xr.childLeaving),childPulsate:Tt(i.childPulsate,Xr.childPulsate)},timeout:SE,pulsate:k,rippleX:_,rippleY:T,rippleSize:E},u.current)]),u.current+=1,f.current=I},[i]),C=h.useCallback((A={},k={},_=()=>{})=>{const{pulsate:T=!1,center:E=r||k.pulsate,fakeElement:I=!1}=k;if(A?.type==="mousedown"&&p.current){p.current=!1;return}A?.type==="touchstart"&&(p.current=!0);const z=I?null:w.current,$=z?z.getBoundingClientRect():{width:0,height:0,left:0,top:0};let P,O,B;if(E||A===void 0||A.clientX===0&&A.clientY===0||!A.clientX&&!A.touches)P=Math.round($.width/2),O=Math.round($.height/2);else{const{clientX:Q,clientY:F}=A.touches&&A.touches.length>0?A.touches[0]:A;P=Math.round(Q-$.left),O=Math.round(F-$.top)}if(E)B=Math.sqrt((2*$.width**2+$.height**2)/3),B%2===0&&(B+=1);else{const Q=Math.max(Math.abs((z?z.clientWidth:0)-P),P)*2+2,F=Math.max(Math.abs((z?z.clientHeight:0)-O),O)*2+2;B=Math.sqrt(Q**2+F**2)}A?.touches?v.current===null&&(v.current=()=>{b({pulsate:T,rippleX:P,rippleY:O,rippleSize:B,cb:_})},x.start(Yye,()=>{v.current&&(v.current(),v.current=null)})):b({pulsate:T,rippleX:P,rippleY:O,rippleSize:B,cb:_})},[r,b,x]),N=h.useCallback(()=>{C({},{pulsate:!0})},[C]),S=h.useCallback((A,k)=>{if(x.clear(),A?.type==="touchend"&&v.current){v.current(),v.current=null,x.start(0,()=>{S(A,k)});return}v.current=null,d(_=>_.length>0?_.slice(1):_),f.current=k},[x]);return h.useImperativeHandle(n,()=>({pulsate:N,start:C,stop:S}),[N,C,S]),a.jsx(Zye,{className:Tt(Xr.root,i.root,l),ref:w,...o,children:a.jsx(bk,{component:null,exit:!0,children:c})})});function tbe(e){return In("MuiButtonBase",e)}const abe=yn("MuiButtonBase",["root","disabled","focusVisible"]),nbe=e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:s,classes:r}=e,l=Mn({root:["root",t&&"disabled",n&&"focusVisible"]},tbe,r);return n&&s&&(l.root+=` ${s}`),l},sbe=na("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${abe.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),RW=h.forwardRef(function(t,n){const s=Kc({props:t,name:"MuiButtonBase"}),{action:r,centerRipple:i=!1,children:l,className:o,component:c="button",disabled:d=!1,disableRipple:u=!1,disableTouchRipple:f=!1,focusRipple:p=!1,focusVisibleClassName:x,LinkComponent:v="a",onBlur:w,onClick:b,onContextMenu:C,onDragLeave:N,onFocus:S,onFocusVisible:A,onKeyDown:k,onKeyUp:_,onMouseDown:T,onMouseLeave:E,onMouseUp:I,onTouchEnd:z,onTouchMove:$,onTouchStart:P,tabIndex:O=0,TouchRippleProps:B,touchRippleRef:Q,type:F,...ee}=s,V=h.useRef(null),de=Gye(),oe=xl(de.ref,Q),[Z,R]=h.useState(!1);d&&Z&&R(!1),h.useImperativeHandle(r,()=>({focusVisible:()=>{R(!0),V.current.focus()}}),[]);const ve=de.shouldMount&&!u&&!d;h.useEffect(()=>{Z&&p&&!u&&de.pulsate()},[u,p,Z,de]);const X=Wl(de,"start",T,f),je=Wl(de,"stop",C,f),Ne=Wl(de,"stop",N,f),Oe=Wl(de,"stop",I,f),Fe=Wl(de,"stop",Ie=>{Z&&Ie.preventDefault(),E&&E(Ie)},f),me=Wl(de,"start",P,f),Be=Wl(de,"stop",z,f),Pe=Wl(de,"stop",$,f),we=Wl(de,"stop",Ie=>{P$(Ie.target)||R(!1),w&&w(Ie)},!1),ne=rs(Ie=>{V.current||(V.current=Ie.currentTarget),P$(Ie.target)&&(R(!0),A&&A(Ie)),S&&S(Ie)}),Le=()=>{const Ie=V.current;return c&&c!=="button"&&!(Ie.tagName==="A"&&Ie.href)},pe=rs(Ie=>{p&&!Ie.repeat&&Z&&Ie.key===" "&&de.stop(Ie,()=>{de.start(Ie)}),Ie.target===Ie.currentTarget&&Le()&&Ie.key===" "&&Ie.preventDefault(),k&&k(Ie),Ie.target===Ie.currentTarget&&Le()&&Ie.key==="Enter"&&!d&&(Ie.preventDefault(),b&&b(Ie))}),le=rs(Ie=>{p&&Ie.key===" "&&Z&&!Ie.defaultPrevented&&de.stop(Ie,()=>{de.pulsate(Ie)}),_&&_(Ie),b&&Ie.target===Ie.currentTarget&&Le()&&Ie.key===" "&&!Ie.defaultPrevented&&b(Ie)});let ge=c;ge==="button"&&(ee.href||ee.to)&&(ge=v);const fe={};ge==="button"?(fe.type=F===void 0?"button":F,fe.disabled=d):(!ee.href&&!ee.to&&(fe.role="button"),d&&(fe["aria-disabled"]=d));const Te=xl(n,V),Ye={...s,centerRipple:i,component:c,disabled:d,disableRipple:u,disableTouchRipple:f,focusRipple:p,tabIndex:O,focusVisible:Z},Ae=nbe(Ye);return a.jsxs(sbe,{as:ge,className:Tt(Ae.root,o),ownerState:Ye,onBlur:we,onClick:b,onContextMenu:je,onFocus:ne,onKeyDown:pe,onKeyUp:le,onMouseDown:X,onMouseLeave:Fe,onMouseUp:Oe,onDragLeave:Ne,onTouchEnd:Be,onTouchMove:Pe,onTouchStart:me,ref:Te,tabIndex:d?-1:O,type:F,...fe,...ee,children:[l,ve?a.jsx(ebe,{ref:oe,center:i,...B}):null]})});function Wl(e,t,n,s=!1){return rs(r=>(n&&n(r),s||e[t](r),!0))}function rbe(e){return In("MuiIconButton",e)}const D$=yn("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),ibe=e=>{const{classes:t,disabled:n,color:s,edge:r,size:i,loading:l}=e,o={root:["root",l&&"loading",n&&"disabled",s!=="default"&&`color${Ra(s)}`,r&&`edge${Ra(r)}`,`size${Ra(i)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return Mn(o,rbe,t)},lbe=na(RW,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.loading&&t.loading,n.color!=="default"&&t[`color${Ra(n.color)}`],n.edge&&t[`edge${Ra(n.edge)}`],t[`size${Ra(n.size)}`]]}})(ou(({theme:e})=>({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),variants:[{props:t=>!t.disableRipple,style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),ou(({theme:e})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(e.palette).filter(Gg()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette).filter(Gg()).map(([t])=>({props:{color:t},style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:e.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:e.typography.pxToRem(28)}}],[`&.${D$.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled},[`&.${D$.loading}`]:{color:"transparent"}}))),obe=na("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(e.vars||e).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),cbe=h.forwardRef(function(t,n){const s=Kc({props:t,name:"MuiIconButton"}),{edge:r=!1,children:i,className:l,color:o="default",disabled:c=!1,disableFocusRipple:d=!1,size:u="medium",id:f,loading:p=null,loadingIndicator:x,...v}=s,w=jw(f),b=x??a.jsx(vk,{"aria-labelledby":w,color:"inherit",size:16}),C={...s,edge:r,color:o,disabled:c,disableFocusRipple:d,loading:p,loadingIndicator:b,size:u},N=ibe(C);return a.jsxs(lbe,{id:p?w:f,className:Tt(N.root,l),centerRipple:!0,focusRipple:!d,disabled:c||p,ref:n,...v,ownerState:C,children:[typeof p=="boolean"&&a.jsx("span",{className:N.loadingWrapper,style:{display:"contents"},children:a.jsx(obe,{className:N.loadingIndicator,ownerState:C,children:p&&b})}),i]})});function dbe(e){return In("MuiButton",e)}const wd=yn("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),ube=h.createContext({}),mbe=h.createContext(void 0),fbe=e=>{const{color:t,disableElevation:n,fullWidth:s,size:r,variant:i,loading:l,loadingPosition:o,classes:c}=e,d={root:["root",l&&"loading",i,`${i}${Ra(t)}`,`size${Ra(r)}`,`${i}Size${Ra(r)}`,`color${Ra(t)}`,n&&"disableElevation",s&&"fullWidth",l&&`loadingPosition${Ra(o)}`],startIcon:["icon","startIcon",`iconSize${Ra(r)}`],endIcon:["icon","endIcon",`iconSize${Ra(r)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},u=Mn(d,dbe,c);return{...c,...u}},zW=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],hbe=na(RW,{shouldForwardProp:e=>nH(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${Ra(n.color)}`],t[`size${Ra(n.size)}`],t[`${n.variant}Size${Ra(n.size)}`],n.color==="inherit"&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth,n.loading&&t.loading]}})(ou(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],n=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return{...e.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${wd.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(e.vars||e).shadows[2],"&:hover":{boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2]}},"&:active":{boxShadow:(e.vars||e).shadows[8]},[`&.${wd.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},[`&.${wd.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${wd.disabled}`]:{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(e.palette).filter(Gg()).map(([s])=>({props:{color:s},style:{"--variant-textColor":(e.vars||e).palette[s].main,"--variant-outlinedColor":(e.vars||e).palette[s].main,"--variant-outlinedBorder":e.alpha((e.vars||e).palette[s].main,.5),"--variant-containedColor":(e.vars||e).palette[s].contrastText,"--variant-containedBg":(e.vars||e).palette[s].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(e.vars||e).palette[s].dark,"--variant-textBg":e.alpha((e.vars||e).palette[s].main,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBorder":(e.vars||e).palette[s].main,"--variant-outlinedBg":e.alpha((e.vars||e).palette[s].main,(e.vars||e).palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedBg:t,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedHoverBg:n,"--variant-textBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${wd.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${wd.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),[`&.${wd.loading}`]:{color:"transparent"}}}]}})),gbe=na("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,n.loading&&t.startIconLoadingStart,t[`iconSize${Ra(n.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...zW]})),pbe=na("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,n.loading&&t.endIconLoadingEnd,t[`iconSize${Ra(n.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...zW]})),xbe=na("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(e.vars||e).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),O$=na("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),ybe=h.forwardRef(function(t,n){const s=h.useContext(ube),r=h.useContext(mbe),i=lu(s,t),l=Kc({props:i,name:"MuiButton"}),{children:o,color:c="primary",component:d="button",className:u,disabled:f=!1,disableElevation:p=!1,disableFocusRipple:x=!1,endIcon:v,focusVisibleClassName:w,fullWidth:b=!1,id:C,loading:N=null,loadingIndicator:S,loadingPosition:A="center",size:k="medium",startIcon:_,type:T,variant:E="text",...I}=l,z=jw(C),$=S??a.jsx(vk,{"aria-labelledby":z,color:"inherit",size:16}),P={...l,color:c,component:d,disabled:f,disableElevation:p,disableFocusRipple:x,fullWidth:b,loading:N,loadingIndicator:$,loadingPosition:A,size:k,type:T,variant:E},O=fbe(P),B=(_||N&&A==="start")&&a.jsx(gbe,{className:O.startIcon,ownerState:P,children:_||a.jsx(O$,{className:O.loadingIconPlaceholder,ownerState:P})}),Q=(v||N&&A==="end")&&a.jsx(pbe,{className:O.endIcon,ownerState:P,children:v||a.jsx(O$,{className:O.loadingIconPlaceholder,ownerState:P})}),F=r||"",ee=typeof N=="boolean"?a.jsx("span",{className:O.loadingWrapper,style:{display:"contents"},children:N&&a.jsx(xbe,{className:O.loadingIndicator,ownerState:P,children:$})}):null;return a.jsxs(hbe,{ownerState:P,className:Tt(s.className,O.root,u,F),component:d,disabled:f||N,focusRipple:!x,focusVisibleClassName:Tt(O.focusVisible,w),ref:n,type:T,id:N?z:C,...I,classes:O,children:[B,A!=="end"&&ee,o,A==="end"&&ee,Q]})}),bbe={baseButton:ybe,baseIconButton:cbe},vbe={},wbe=Ke({},bbe,vbe),Nbe=h.createContext(null);function jbe(e){const{slots:t,slotProps:n={},defaultSlots:s,children:r}=e,i=h.useMemo(()=>({slots:Ke({},s,t),slotProps:n}),[s,t,n]);return a.jsx(Nbe.Provider,{value:i,children:r})}const Cbe=["children","localeText","plugins","seriesConfig","slots","slotProps"],Sbe=e=>{const t=mi({props:e,name:"MuiChartDataProvider"}),{children:n,localeText:s,plugins:r=$W,seriesConfig:i,slots:l,slotProps:o}=t,c=ca(t,Cbe),d=Nl(),u={plugins:r,seriesConfig:i,pluginParams:Ke({theme:d.palette.mode},c)};return{children:n,localeText:s,chartProviderProps:u,slots:l,slotProps:o}};function _be(e){const{children:t,localeText:n,chartProviderProps:s,slots:r,slotProps:i}=Sbe(e);return a.jsx(Dge,Ke({},s,{children:a.jsx(Khe,{localeText:n,children:a.jsx(jbe,{slots:r,slotProps:i,defaultSlots:wbe,children:t})})}))}function M$(e){const{isReversed:t,gradientId:n,size:s,direction:r,scale:i,colorMap:l}=e;return s<=0?null:a.jsx("linearGradient",{id:n,x1:"0",x2:"0",y1:"0",y2:"0",[`${r}${t?1:2}`]:`${s}px`,gradientUnits:"userSpaceOnUse",children:l.thresholds.map((o,c)=>{const d=i(o);if(d===void 0)return null;const u=t?1-d/s:d/s;return Number.isNaN(u)?null:a.jsxs(h.Fragment,{children:[a.jsx("stop",{offset:u,stopColor:l.colors[c],stopOpacity:1}),a.jsx("stop",{offset:u,stopColor:l.colors[c+1],stopOpacity:1})]},o.toString()+c)})})}const Abe=10;function I$(e){const{gradientUnits:t,isReversed:n,gradientId:s,size:r,direction:i,scale:l,colorScale:o,colorMap:c}=e,d=[c.min??0,c.max??100],u=d.map(l).filter(v=>v!==void 0);if(u.length!==2)return null;const f=typeof d[0]=="number"?nf(d[0],d[1]):Mk(d[0],d[1]),p=Math.round((Math.max(...u)-Math.min(...u))/Abe),x=`${d[0]}-${d[1]}-`;return a.jsx("linearGradient",{id:s,x1:"0",x2:"0",y1:"0",y2:"0",[`${i}${n?1:2}`]:t==="objectBoundingBox"?1:`${r}px`,gradientUnits:t??"userSpaceOnUse",children:Array.from({length:p+1},(v,w)=>{const b=f(w/p);if(b===void 0)return null;const C=l(b);if(C===void 0)return null;const N=n?1-C/r:C/r,S=o(b);return S===null?null:a.jsx("stop",{offset:N,stopColor:S,stopOpacity:1},x+w)})})}const Ebe=10,Tbe=e=>e?{x1:"1",x2:"0",y1:"0",y2:"0"}:{x1:"0",x2:"1",y1:"0",y2:"0"};function hS(e){const{isReversed:t,gradientId:n,colorScale:s,colorMap:r}=e,i=[r.min??0,r.max??100],l=typeof i[0]=="number"?nf(i[0],i[1]):Mk(i[0],i[1]),o=Ebe,c=`${i[0]}-${i[1]}-`;return a.jsx("linearGradient",Ke({id:n},Tbe(t),{gradientUnits:"objectBoundingBox",children:Array.from({length:o+1},(d,u)=>{const f=u/o,p=l(f);if(p===void 0)return null;const x=s(p);return x===null?null:a.jsx("stop",{offset:f,stopColor:x,stopOpacity:1},c+u)})}))}function kbe(){const{top:e,height:t,bottom:n,left:s,width:r,right:i}=hi(),l=e+t+n,o=s+r+i,c=vL(),d=The(),{xAxis:u,xAxisIds:f}=lr(),{yAxis:p,yAxisIds:x}=or(),{zAxis:v,zAxisIds:w}=xL(),b=x.filter(S=>p[S].colorMap!==void 0),C=f.filter(S=>u[S].colorMap!==void 0),N=w.filter(S=>v[S].colorMap!==void 0);return b.length===0&&C.length===0&&N.length===0?null:a.jsxs("defs",{children:[b.map(S=>{const A=c(S),k=d(S),{colorMap:_,scale:T,colorScale:E,reverse:I}=p[S];return _?.type==="piecewise"?a.jsx(M$,{isReversed:!I,scale:T,colorMap:_,size:l,gradientId:A,direction:"y"},A):_?.type==="continuous"?a.jsxs(h.Fragment,{children:[a.jsx(I$,{isReversed:!I,scale:T,colorScale:E,colorMap:_,size:l,gradientId:A,direction:"y"}),a.jsx(hS,{isReversed:I,colorScale:E,colorMap:_,gradientId:k})]},A):null}),C.map(S=>{const A=c(S),k=d(S),{colorMap:_,scale:T,reverse:E,colorScale:I}=u[S];return _?.type==="piecewise"?a.jsx(M$,{isReversed:E,scale:T,colorMap:_,size:o,gradientId:A,direction:"x"},A):_?.type==="continuous"?a.jsxs(h.Fragment,{children:[a.jsx(I$,{isReversed:E,scale:T,colorScale:I,colorMap:_,size:o,gradientId:A,direction:"x"}),a.jsx(hS,{isReversed:E,colorScale:I,colorMap:_,gradientId:k})]},A):null}),N.map(S=>{const A=d(S),{colorMap:k,colorScale:_}=v[S];return k?.type==="continuous"?a.jsx(hS,{colorScale:_,colorMap:k,gradientId:A},A):null})]})}function Lbe(e){return In("MuiChartsSurface",e)}const Pbe=()=>Mn({root:["root"]},Lbe);yn("MuiChartsSurface",["root"]);const Dbe=["children","className","title","desc"],Obe=na("svg",{name:"MuiChartsSurface",slot:"Root"})(({ownerState:e,theme:t})=>({width:e.width??"100%",height:e.height??"100%",display:"flex",position:"relative",flexDirection:"column",alignItems:"center",justifyContent:"center",overflow:"hidden",touchAction:e.hasZoom?"pan-y":void 0,userSelect:"none",gridArea:"chart","&:focus":{outline:"none"},"&:focus-visible":{outline:`${(t.vars??t).palette.text.primary} solid 2px`,"&[data-has-focused-item=true]":{outline:"none"}},"& [data-focused=true]":{outline:`${(t.vars??t).palette.text.primary} solid 2px`}})),Mbe=h.forwardRef(function(t,n){const s=Fa(),r=Rt(s,pce),i=Rt(s,xce),l=Rt(s,pH),o=Rt(s,xH),c=Rt(s,tfe),d=Rt(s,efe),u=Rt(s,Ome),f=yL(),p=xl(f,n),x=mi({props:t,name:"MuiChartsSurface"}),{children:v,className:w,title:b,desc:C}=x,N=ca(x,Dbe),S=Pbe(),A=i>0&&r>0;return a.jsxs(Obe,Ke({ownerState:{width:l,height:o,hasZoom:u},viewBox:`0 0 ${r} ${i}`,className:Tt(S.root,w),tabIndex:c?0:void 0,"data-has-focused-item":d||void 0},N,{ref:p,children:[b&&a.jsx("title",{children:b}),C&&a.jsx("desc",{children:C}),a.jsx(kbe,{}),A&&v]}))}),$$=yn("MuiChartsToolbar",["root"]),Ibe=e=>e?.horizontal==="start"?"start":e?.horizontal==="end"?"end":"center",$be=e=>e?.vertical==="top"?"flex-start":e?.vertical==="bottom"?"flex-end":"center",Rbe=(e,t,n)=>e?'"chart"':t==="vertical"?n?.horizontal==="start"?'"legend chart"':'"chart legend"':n?.vertical==="bottom"?`"chart"
            "legend"`:`"legend"
          "chart"`,zbe=(e=!1,t="horizontal",n="end",s=void 0)=>{const r=s?"auto":"1fr";return t==="horizontal"||e?r:n==="start"?`auto ${r}`:`${r} auto`},Ube=(e=!1,t="horizontal",n="top")=>t==="vertical"||e?"1fr":n==="bottom"?"1fr auto":"auto 1fr",Fbe=na("div",{name:"MuiChartsWrapper",slot:"Root",shouldForwardProp:e=>fb(e)&&e!=="extendVertically"&&e!=="width"})(({ownerState:e,width:t})=>{const n=zbe(e.hideLegend,e.legendDirection,e.legendPosition?.horizontal,t),s=Ube(e.hideLegend,e.legendDirection,e.legendPosition?.vertical),r=Rbe(e.hideLegend,e.legendDirection,e.legendPosition);return{variants:[{props:{extendVertically:!0},style:{height:"100%",minHeight:0}}],flex:1,display:"grid",gridTemplateColumns:n,gridTemplateRows:s,gridTemplateAreas:r,[`&:has(.${$$.root})`]:{gridTemplateRows:`auto ${s}`,gridTemplateAreas:`"${n.split(" ").map(()=>"toolbar").join(" ")}"
        ${r}`},[`& .${$$.root}`]:{gridArea:"toolbar",justifySelf:"center"},justifyContent:"safe center",justifyItems:Ibe(e.legendPosition),alignItems:$be(e.legendPosition)}});function Bbe(e){const{children:t,sx:n,extendVertically:s}=e,r=Ghe(),i=Fa(),l=Rt(i,pH),o=Rt(i,xH);return a.jsx(Fbe,{ref:r,ownerState:e,sx:n,extendVertically:s??o===void 0,width:l,children:t})}function Hbe(){const e=Fa(),t=Rt(e,Yw),n=Rt(e,Kw),s=Rt(e,Qw);return h.useMemo(()=>t===void 0||n===void 0||s===void 0?null:{seriesType:t,seriesId:n,dataIndex:s},[t,n,s])}const my=6;function Gbe(){const e=Nl(),t=Hbe(),n=ax(),{xAxis:s,xAxisIds:r}=lr(),{yAxis:i,yAxisIds:l}=or();if(t===null||t.seriesType!=="line"||!n)return null;const o=n?.series[t.seriesId],c=o.xAxisId??r[0],d=o.yAxisId??l[0];return a.jsx("rect",{fill:"none",stroke:(e.vars??e).palette.text.primary,strokeWidth:2,x:s[c].scale(s[c].data[t.dataIndex])-my,y:i[d].scale(o.stackedData[t.dataIndex][1])-my,width:2*my,height:2*my,rx:3,ry:3})}const fN=h.forwardRef(function(t,n){const s=mi({props:t,name:"MuiLineChart"}),{chartsWrapperProps:r,chartContainerProps:i,gridProps:l,clipPathProps:o,clipPathGroupProps:c,areaPlotProps:d,linePlotProps:u,markPlotProps:f,overlayProps:p,chartsAxisProps:x,axisHighlightProps:v,lineHighlightPlotProps:w,legendProps:b,children:C}=Uye(s),{chartDataProviderProps:N,chartsSurfaceProps:S}=Hye(i,n),A=s.slots?.tooltip??Q0e,k=s.slots?.toolbar;return a.jsx(_be,Ke({},N,{children:a.jsxs(Bbe,Ke({},r,{children:[s.showToolbar&&k?a.jsx(k,Ke({},s.slotProps?.toolbar)):null,!s.hideLegend&&a.jsx(cye,Ke({},b)),a.jsxs(Mbe,Ke({},S,{children:[a.jsx(Tye,Ke({},l)),a.jsxs("g",Ke({},c,{children:[a.jsx(qge,Ke({},d)),a.jsx(rpe,Ke({},u)),a.jsx($ye,Ke({},p)),a.jsx(hye,Ke({},v))]})),a.jsx(Gbe,{}),a.jsx(nxe,Ke({},x)),a.jsx("g",{"data-drawing-container":!0,children:a.jsx(hpe,Ke({},f))}),a.jsx(Nye,Ke({},w)),a.jsx(gye,Ke({},o)),C]})),!s.loading&&a.jsx(A,Ke({},s.slotProps?.tooltip))]}))}))}),il=(e,t="")=>`${t} ${new Intl.NumberFormat("en-US",{minimumFractionDigits:0}).format(e||0)}`,UW=e=>e?new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",Wbe=e=>{if(!e)return 0;const t=new Date-new Date(e);return Math.floor(t/(1e3*60*60*24))},Vbe=(e,t)=>{if(!e||e.length===0)return;const n=e.map(c=>({ID:c.id,Name:c.name||`${c.first_name} ${c.last_name}`,Company:c.company_name||c.account?.name||"",Stage:c.stage||c.status,Amount:c.amount||0,Date:UW(c.created_at)})),s=Object.keys(n[0]).join(","),r=n.map(c=>Object.values(c).map(d=>typeof d=="string"?`"${d.replace(/"/g,'""')}"`:d).join(",")),i="data:text/csv;charset=utf-8,"+[s,...r].join(`
`),l=encodeURI(i),o=document.createElement("a");o.setAttribute("href",l),o.setAttribute("download",`${t}.csv`),document.body.appendChild(o),o.click(),document.body.removeChild(o)},FW=({label:e,count:t,value:n,width:s,color:r,onClick:i,isActive:l,isLead:o,weightedValue:c,currencySymbol:d,conversionRate:u,compact:f=!1})=>a.jsxs("div",{className:"flex flex-col items-center w-full",children:[u&&a.jsx("div",{className:`flex justify-center relative z-0 ${f?"-my-1":"-my-2 mb-1"}`,children:a.jsxs("div",{className:`bg-gray-100 text-gray-500 font-bold rounded-full border border-white shadow-sm flex items-center ${f?"text-[8px] px-1.5":"text-[10px] px-2 py-0.5"}`,children:[a.jsx(IA,{className:"mr-1"})," ",u,"%"]})}),a.jsxs("div",{onClick:i,className:`w-full relative group cursor-pointer transition-all duration-300 transform ${l?"scale-105 z-10":"hover:scale-102 hover:opacity-90"}`,children:[a.jsxs("div",{className:"flex justify-between items-end mb-1 px-1",children:[a.jsx("span",{className:`${f?"text-[10px]":"text-xs"} font-bold uppercase tracking-wider ${l?"text-blue-700":"text-gray-500"}`,children:e}),a.jsx("span",{className:`${f?"text-[10px]":"text-xs"} text-gray-400`,children:t})]}),a.jsxs("div",{className:`${f?"h-6":"h-10"} w-full bg-gray-100 rounded-r-lg overflow-hidden flex items-center relative shadow-sm`,children:[a.jsx("div",{className:`h-full ${r} transition-all duration-700 ease-out flex items-center px-2 text-white font-bold relative overflow-hidden`,style:{width:s},children:a.jsx("span",{className:`z-10 drop-shadow-md ${f?"text-xs":"text-sm"}`,children:o?t:il(n,d)})}),!o&&c>0&&a.jsx("div",{className:"absolute left-0 top-0 h-full bg-white opacity-20 z-20",style:{width:`${c/n*parseFloat(s)}%`}})]})]})]}),qbe=({user:e,metrics:t,stages:n,currencySymbol:s,target:r})=>{const i=t.filteredDeals.reduce((d,u)=>d+parseFloat(u.amount||0)*((u.probability||0)/100),0),l=t.metrics.CLOSED_WON?.value||0,o=t.metrics.CLOSED_WON.count>0?(t.metrics.CLOSED_WON.count/(t.metrics.CLOSED_WON.count+t.metrics.CLOSED_LOST.count)*100).toFixed(0):0,c=r>0?l/r*100:0;return a.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md border border-gray-100 flex flex-col h-full hover:shadow-lg transition-shadow",children:[a.jsxs("div",{className:"flex flex-col mb-4 pb-4 border-b border-gray-100",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-bold mr-3 flex-shrink-0",children:e.name.charAt(0)}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-gray-800 text-sm",children:e.name}),a.jsxs("div",{className:"flex gap-2 text-[10px] mt-1",children:[a.jsxs("span",{className:"text-green-600 bg-green-50 px-1.5 py-0.5 rounded border border-green-100",children:["Win: ",o,"%"]}),a.jsxs("span",{className:"text-blue-600 bg-blue-50 px-1.5 py-0.5 rounded border border-blue-100",children:["Fcst: ",il(i,s)]})]})]})]}),r>0?a.jsxs("div",{className:"w-full mt-2 bg-gray-50 p-2 rounded-lg border border-gray-100",children:[a.jsxs("div",{className:"flex justify-between items-center text-[10px] text-gray-500 mb-1",children:[a.jsx("span",{className:"font-semibold text-gray-600",children:"Target Achievement"}),a.jsxs("span",{className:c>=100?"text-green-600 font-bold":"text-blue-600 font-bold",children:[c.toFixed(0),"%"]})]}),a.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden mb-1",children:a.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${c>=100?"bg-green-500":"bg-blue-500"}`,style:{width:`${Math.min(c,100)}%`}})}),a.jsxs("div",{className:"flex justify-between text-[9px] text-gray-400",children:[a.jsxs("span",{children:["Achieved: ",a.jsx("span",{className:"text-gray-700 font-medium",children:il(l,s)})]}),a.jsxs("span",{children:["Target: ",il(r,s)]})]})]}):a.jsx("div",{className:"text-[10px] text-gray-400 italic mt-1 text-center bg-gray-50 p-1 rounded",children:"No target assigned"})]}),a.jsx("div",{className:"flex-grow space-y-2",children:n.map((d,u)=>{const f=t.metrics[d.key];let p=null;if(u>0){const x=n[u-1].key,v=t.metrics[x].count;v>0&&(p=(f.count/v*100).toFixed(0))}return a.jsx(FW,{label:d.label,count:f.count,value:f.value,width:f.width,color:f.color,isLead:!d.isDeal,weightedValue:f.weightedValue,currencySymbol:s,conversionRate:p,compact:!0,onClick:()=>{},isActive:!1},d.key)})})]})},Ybe=({data:e,stageKey:t,currencySymbol:n})=>{const s=vt(),[r,i]=h.useState({key:null,direction:"desc"}),l=t==="LEADS",o=t==="CLOSED_WON",c=!l&&!o&&t!=="CLOSED_LOST",d=h.useMemo(()=>r.key?[...e].sort((p,x)=>{let v=p[r.key],w=x[r.key];return(r.key==="amount"||r.key==="probability")&&(v=parseFloat(p[r.key]||0),w=parseFloat(x[r.key]||0)),v<w?r.direction==="asc"?-1:1:v>w?r.direction==="asc"?1:-1:0}):e,[e,r]),u=p=>{i({key:p,direction:r.key===p&&r.direction==="desc"?"asc":"desc"})},f=({columnKey:p})=>r.key!==p?a.jsx(IA,{className:"inline ml-1 opacity-0 group-hover:opacity-30"}):r.direction==="asc"?a.jsx(ise,{className:"inline ml-1 text-blue-600"}):a.jsx(IA,{className:"inline ml-1 text-blue-600"});return!e||e.length===0?a.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-400 bg-gray-50 rounded-xl border-2 border-dashed border-gray-200",children:[a.jsx(ZT,{size:48,className:"mb-4 opacity-50"}),a.jsx("p",{className:"font-medium",children:"No records in this stage"})]}):a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden flex flex-col h-full",children:a.jsx("div",{className:"overflow-x-auto flex-grow",children:a.jsxs("table",{className:"w-full text-left border-collapse",children:[a.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:a.jsxs("tr",{children:[a.jsxs("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer group",onClick:()=>u("name"),children:["Name ",a.jsx(f,{columnKey:"name"})]}),a.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Company"}),l&&a.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Contact Info"}),c&&a.jsxs(a.Fragment,{children:[a.jsxs("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right cursor-pointer group",onClick:()=>u("amount"),children:["Value ",a.jsx(f,{columnKey:"amount"})]}),a.jsxs("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-center cursor-pointer group",onClick:()=>u("probability"),children:["Prob. ",a.jsx(f,{columnKey:"probability"})]}),a.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-center",children:"Age"})]}),o&&a.jsxs("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right text-green-600 cursor-pointer group",onClick:()=>u("amount"),children:["Booked ",a.jsx(f,{columnKey:"amount"})]}),a.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right",children:"Owner"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-100",children:d.map(p=>{const x=l?0:Wbe(p.stage_updated_at||p.created_at),v=x>30&&c;return a.jsxs("tr",{className:"hover:bg-blue-50 transition-colors cursor-pointer group",onClick:()=>s(l?`/admin/leads/${p.id}`:`/admin/deals/info?id=${p.id}`),children:[a.jsxs("td",{className:"p-4",children:[a.jsx("p",{className:"font-bold text-gray-800 text-sm group-hover:text-blue-600 transition-colors",children:l?`${p.first_name} ${p.last_name}`:p.name}),a.jsx("p",{className:"text-xs text-gray-400 mt-0.5",children:UW(p.created_at)})]}),a.jsx("td",{className:"p-4 text-sm text-gray-600",children:l?p.company_name:p.account?.name}),l&&a.jsxs("td",{className:"p-4 text-xs text-gray-500",children:[p.email&&a.jsxs("div",{className:"flex items-center mb-1",children:[a.jsx(Ka,{className:"mr-1"})," ",p.email]}),p.phone&&a.jsxs("div",{className:"flex items-center",children:[a.jsx(Et,{className:"mr-1"})," ",p.phone]})]}),c&&a.jsxs(a.Fragment,{children:[a.jsx("td",{className:"p-4 text-right font-medium text-gray-700",children:il(p.amount,n)}),a.jsx("td",{className:"p-4 text-center",children:a.jsxs("span",{className:`inline-block px-2 py-1 rounded text-xs font-bold ${p.probability>=80?"bg-green-100 text-green-700":p.probability>=50?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-600"}`,children:[p.probability,"%"]})}),a.jsx("td",{className:"p-4 text-center",children:v?a.jsxs("div",{className:"flex items-center justify-center text-red-600 bg-red-50 px-2 py-1 rounded border border-red-100",title:"Stuck for >30 days",children:[a.jsx(FiAlertCircle,{size:14,className:"mr-1"}),a.jsxs("span",{className:"text-xs font-bold",children:[x,"d"]})]}):a.jsxs("span",{className:"text-xs text-gray-400",children:[x,"d"]})})]}),o&&a.jsx("td",{className:"p-4 text-right font-bold text-green-700",children:il(p.amount,n)}),a.jsx("td",{className:"p-4 text-right",children:a.jsxs("div",{className:"flex items-center justify-end text-gray-500 text-xs",children:[a.jsx(Zt,{className:"mr-1"}),l?p.lead_owner?.first_name||p.owner?.first_name||p.assigned_to?.first_name||"Unassigned":p.assigned_deals?.first_name||p.deal_creator?.first_name||"Unassigned"]})})]},p.id)})})]})})})},Kbe=({leads:e,deals:t,currencySymbol:n,targets:s=[]})=>{const[r,i]=h.useState("ALL"),[l,o]=h.useState("ALL"),[c,d]=h.useState("ALL"),[u,f]=h.useState("AGGREGATE"),p=h.useMemo(()=>{const N=new Date;if(l==="THIS_MONTH")return{start:new Date(N.getFullYear(),N.getMonth(),1),end:new Date(N.getFullYear(),N.getMonth()+1,0)};if(l==="THIS_QUARTER"){const S=Math.floor(N.getMonth()/3)*3;return{start:new Date(N.getFullYear(),S,1),end:new Date(N.getFullYear(),S+3,0)}}return l==="THIS_YEAR"?{start:new Date(N.getFullYear(),0,1),end:new Date(N.getFullYear(),11,31)}:null},[l]),x=h.useMemo(()=>s.filter(N=>{if(c!=="ALL"){const S=N.user?.id||N.user_id||N.assigned_to;if(parseInt(S)!==parseInt(c))return!1}if(p){const S=new Date(N.start_date),A=new Date(N.end_date);return S<=p.end&&A>=p.start}return!0}),[s,c,p]),v=h.useMemo(()=>{const N=new Map,S=A=>{A&&A.id&&N.set(A.id,`${A.first_name} ${A.last_name}`)};return e.forEach(A=>S(A.lead_owner||A.owner||A.assigned_to)),t.forEach(A=>{S(A.assigned_deals),S(A.deal_creator)}),Array.from(N.entries()).map(([A,k])=>({id:A,name:k}))},[e,t]),w=h.useMemo(()=>{const N=new Date;let S=null;l==="THIS_MONTH"?S=new Date(N.getFullYear(),N.getMonth(),1):l==="THIS_QUARTER"?S=new Date(N.getFullYear(),Math.floor(N.getMonth()/3)*3,1):l==="THIS_YEAR"&&(S=new Date(N.getFullYear(),0,1));const A=$=>{const P=new Date($.created_at);if(S&&P<S)return!1;if(c!=="ALL"){const O=parseInt(c);return!!($.lead_owner&&($.lead_owner.id||$.lead_owner)===O||$.assigned_to?.id===O||$.owner?.id===O||$.assigned_deals?.id===O||$.created_by===O)}return!0},k=e.filter(A),_=t.filter(A),T=[{key:"LEADS",label:"Top Leads",color:"bg-blue-400",isDeal:!1},{key:"PROSPECTING",label:"Prospecting",color:"bg-blue-600",isDeal:!0},{key:"QUALIFICATION",label:"Qualification",color:"bg-indigo-600",isDeal:!0},{key:"PROPOSAL",label:"Proposal",color:"bg-purple-600",isDeal:!0},{key:"NEGOTIATION",label:"Negotiation",color:"bg-pink-600",isDeal:!0},{key:"CLOSED_WON",label:"Closed Won",color:"bg-emerald-500",isDeal:!0},{key:"CLOSED_LOST",label:"Closed Lost",color:"bg-red-500",isDeal:!0}],E=($,P)=>{const O=T.reduce((Q,F)=>(Q[F.key]={...F,count:0,value:0,weightedValue:0,items:[]},Q),{});O.LEADS.count=$.length,O.LEADS.items=$,P.forEach(Q=>{const F=(Q.stage||"").toUpperCase();if(O[F]){O[F].count++,O[F].items.push(Q);const ee=parseFloat(Q.amount||0);O[F].value+=ee,O[F].weightedValue+=ee*((Q.probability||0)/100)}});const B=Math.max(...Object.values(O).map(Q=>Q.count),1);return Object.keys(O).forEach(Q=>{const F=O[Q];F.width=F.count===0?"0%":`${Math.max(F.count/B*100,15)}%`}),{metrics:O,filteredDeals:P,filteredLeads:$}},I=E(k,_),z=[];return u==="COMPARE"&&(c==="ALL"?v:v.filter(P=>P.id===parseInt(c))).forEach(P=>{const O=parseInt(P.id),B=k.filter(V=>(V.lead_owner?.id||V.lead_owner||V.assigned_to?.id||V.owner?.id)===O),Q=_.filter(V=>(V.assigned_deals?.id||V.created_by)===O),F=x.find(V=>{const de=V.user?.id||V.user_id||V.assigned_to;return parseInt(de)===O}),ee=parseFloat(F?.amount||F?.target_amount||F?.value||0);(B.length>0||Q.length>0||ee>0)&&z.push({user:P,data:E(B,Q),target:ee})}),{stages:T,aggregate:I,userGroups:z}},[t,e,l,c,u,v,x]),b=h.useMemo(()=>{const N=x.reduce((k,_)=>k+parseFloat(_.amount||_.target_amount||_.value||0),0),S=w.aggregate.filteredDeals.filter(k=>(k.stage||"").toUpperCase()==="CLOSED_WON").reduce((k,_)=>k+parseFloat(_.amount||0),0),A=N>0?S/N*100:0;return{totalTarget:N,totalAchieved:S,progress:A}},[x,w]),C=h.useMemo(()=>r==="ALL"?[]:w.aggregate.metrics[r]?.items||[],[r,w]);return a.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 flex flex-col h-full",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center",children:[a.jsx(ZT,{className:"mr-2"})," Pipeline Intelligence"]}),a.jsx("p",{className:"text-sm text-gray-500",children:"Analyze pipeline velocity and bottlenecks."})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 mt-4 md:mt-0",children:[a.jsxs("select",{value:l,onChange:N=>o(N.target.value),className:"bg-gray-50 border border-gray-200 text-gray-700 text-xs rounded-lg p-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"ALL",children:"All Time"}),a.jsx("option",{value:"THIS_MONTH",children:"This Month"}),a.jsx("option",{value:"THIS_QUARTER",children:"This Quarter"}),a.jsx("option",{value:"THIS_YEAR",children:"This Year"})]}),a.jsxs("select",{value:c,onChange:N=>d(N.target.value),className:"bg-gray-50 border border-gray-200 text-gray-700 text-xs rounded-lg p-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"ALL",children:"All Users"}),v.map(N=>a.jsx("option",{value:N.id,children:N.name},N.id))]}),a.jsxs("div",{className:"flex bg-gray-100 p-0.5 rounded-lg",children:[a.jsx("button",{onClick:()=>f("AGGREGATE"),className:`px-2 py-1 rounded-md text-xs font-medium transition-all ${u==="AGGREGATE"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Aggregate"}),a.jsx("button",{onClick:()=>f("COMPARE"),className:`px-2 py-1 rounded-md text-xs font-medium transition-all ${u==="COMPARE"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Compare"})]})]})]}),u==="COMPARE"?a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 overflow-x-auto pb-4",children:[w.userGroups.map(N=>a.jsx(qbe,{user:N.user,metrics:N.data,stages:w.stages.filter(S=>S.key!=="CLOSED_LOST"),currencySymbol:n,target:N.target},N.user.id)),w.userGroups.length===0&&a.jsx("div",{className:"col-span-full text-center py-10 text-gray-400",children:"No data for selected filters."})]}):a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[a.jsxs("div",{className:"lg:col-span-4 flex flex-col space-y-2 relative",children:[a.jsx("div",{className:"absolute left-6 top-4 bottom-24 w-0.5 bg-gray-100 -z-0"}),w.stages.filter(N=>N.key!=="CLOSED_LOST").map((N,S)=>{const A=w.aggregate.metrics[N.key];let k=null;if(S>0){const _=w.stages[S-1].key,T=w.aggregate.metrics[_].count;T>0&&(k=(A.count/T*100).toFixed(0))}return a.jsx(FW,{label:N.label,count:A.count,value:A.value,width:A.width,color:A.color,isLead:!N.isDeal,weightedValue:A.weightedValue,currencySymbol:n,isActive:r===N.key,conversionRate:k,onClick:()=>i(N.key)},N.key)}),a.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center mb-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] text-gray-400 uppercase font-bold",children:"Pipeline Value"}),a.jsx("p",{className:"text-md font-bold text-gray-800",children:il(w.aggregate.filteredDeals.reduce((N,S)=>N+parseFloat(S.amount||0),0),n)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] text-blue-500 uppercase font-bold",children:"Forecast"}),a.jsx("p",{className:"text-md font-bold text-blue-600",children:il(w.aggregate.filteredDeals.reduce((N,S)=>N+parseFloat(S.amount||0)*((S.probability||0)/100),0),n)})]})]}),a.jsxs("div",{className:"bg-gray-50 p-2 rounded-lg border border-gray-100",children:[a.jsxs("div",{className:"flex justify-between items-center text-[10px] mb-1",children:[a.jsxs("span",{className:"font-bold text-gray-600 flex items-center",children:[a.jsx(Zs,{className:"mr-1"})," Total Target"]}),a.jsxs("span",{className:b.progress>=100?"text-green-600 font-bold":"text-blue-600 font-bold",children:[b.progress.toFixed(0),"%"]})]}),a.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden mb-1",children:a.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${b.progress>=100?"bg-green-500":"bg-blue-500"}`,style:{width:`${Math.min(b.progress,100)}%`}})}),a.jsxs("div",{className:"flex justify-between text-[9px] text-gray-400",children:[a.jsxs("span",{children:["Achieved: ",a.jsx("span",{className:"text-gray-700 font-medium",children:il(b.totalAchieved,n)})]}),a.jsxs("span",{children:["Goal: ",il(b.totalTarget,n)]})]})]})]})]}),a.jsxs("div",{className:"lg:col-span-8 h-[500px] flex flex-col",children:[a.jsxs("div",{className:"bg-gray-50 p-3 rounded-t-xl border-b border-gray-200 flex justify-between items-center",children:[a.jsx("h3",{className:"text-sm font-bold text-gray-800 flex items-center",children:r==="ALL"?a.jsx("span",{children:"Select a stage to view details"}):a.jsxs(a.Fragment,{children:[a.jsx("span",{className:`w-2.5 h-2.5 rounded-full mr-2 ${w.aggregate.metrics[r]?.color}`}),w.stages.find(N=>N.key===r)?.label," Details",a.jsxs("span",{className:"ml-2 px-2 py-0.5 bg-white border border-gray-200 text-gray-600 text-[10px] rounded-full",children:[C.length," records"]})]})}),r!=="ALL"&&C.length>0&&a.jsxs("button",{onClick:()=>Vbe(C,`Funnel_${r}`),className:"text-[10px] font-bold text-blue-600 hover:bg-blue-100 px-2 py-1 rounded transition-colors flex items-center",children:[a.jsx(To,{className:"mr-1"})," Export"]})]}),r==="ALL"?a.jsxs("div",{className:"bg-white flex-grow rounded-b-xl border border-gray-100 flex flex-col items-center justify-center p-12 text-center text-gray-400",children:[a.jsx(dse,{size:48,className:"mb-4 text-blue-100"}),a.jsx("p",{children:"Click on any stage bar on the left to inspect records."})]}):a.jsx(Ybe,{data:C,stageKey:r,currencySymbol:n})]})]})]})},Qbe=e=>a.jsx(Bt,{...e}),Xbe=e=>a.jsx(Tf,{...e}),RL=e=>a.jsx(Is,{...e}),Zbe=e=>a.jsx(Lp,{...e}),Jbe=e=>a.jsx(sw,{...e}),eve=e=>a.jsx(_t,{...e}),tve=e=>a.jsx(Et,{...e}),ave=e=>a.jsx(iw,{...e}),BW=e=>a.jsx(rw,{...e}),HW=e=>a.jsx(La,{...e}),GW=e=>a.jsx(Zt,{...e}),nve=e=>a.jsx(Ba,{...e}),sve=e=>a.jsx(Kt,{...e}),rve=e=>a.jsx(ga,{...e}),WW=e=>a.jsx(Zs,{...e}),ive=e=>a.jsx(xn,{...e}),lve=e=>a.jsx(_t,{...e}),ove=e=>a.jsx(Es,{...e}),cve=e=>a.jsx(Lo,{...e}),dve=e=>a.jsx(ys,{...e}),VW=(e,t="")=>`${t} ${new Intl.NumberFormat("en-US",{minimumFractionDigits:0}).format(e)}`,uve=e=>{if(!e)return 0;const t=new Date-new Date(e);return Math.floor(t/(1e3*60*60*24))},mve=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},fve=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},hve=e=>{switch(e){case"call":return{Icon:tve,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:ave,color:"text-green-600",bgColor:"bg-green-100"};case"meeting":default:return{Icon:eve,color:"text-blue-500",bgColor:"bg-blue-100"}}},gve=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},pve=({searchQuery:e,onSearchChange:t,searchResults:n,onSearchResultClick:s})=>{const r=vt(),[i,l]=h.useState(!1),o=h.useRef(null),c=[{icon:HW,label:"Account"},{icon:GW,label:"Contact"},{icon:nve,label:"Leads"},{icon:sve,label:"Deals"},{icon:rve,label:"Quotes"},{icon:WW,label:"Target"},{icon:ive,label:"Task"},{icon:lve,label:"Meeting"},{icon:ove,label:"Call"},{icon:dve,label:"Audit"},{icon:cve,label:"Territory"}];h.useEffect(()=>{const f=p=>{o.current&&!o.current.contains(p.target)&&l(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const d=f=>{t(f.target.value),l(f.target.value.trim().length>0)},u=f=>{s&&s(f),l(!1)};return a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[a.jsxs("div",{className:"w-full flex justify-center relative",ref:o,children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-2xl lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[a.jsx(Qbe,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),a.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:d,onFocus:()=>e.trim().length>0&&l(!0)})]}),i&&Array.isArray(n)&&n.length>0&&a.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:n.map((f,p)=>a.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>u(f),children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:f.name}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:f.type}),f.details&&a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:f.details})]}),a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${f.type==="Lead"?"bg-blue-100 text-blue-600":f.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:f.type})]})},p))})]}),a.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:a.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:c.map((f,p)=>a.jsxs("div",{className:"relative flex-shrink-0 group",children:[a.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":f.label,title:f.label,onClick:()=>{const x={Account:"/admin/accounts",Contact:"/admin/contacts",Leads:"/admin/leads",Deals:"/admin/deals",Quotes:"/admin/quotes",Target:"/admin/targets",Task:"/admin/tasks",Meeting:"/admin/meetings",Call:"/admin/calls",Audit:"/admin/audit",Territory:"/admin/territory"};x[f.label]&&r(x[f.label])},children:a.jsx(f.icon,{size:24,className:"lg:scale-95"})}),a.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-1.5 bg-gray-900 text-white text-xs font-semibold rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-75 ease-in-out z-50 shadow-lg",children:[f.label,a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]},p))})})]})},xve=({action:e,description:t,entity_type:n,entity_name:s,timestamp:r})=>{const i=vt(),l=u=>{if(!u)return"Unknown";const f=new Date(u),x=new Date-f,v=Math.floor(x/6e4),w=Math.floor(x/36e5),b=Math.floor(x/864e5);return v<1?"Just now":v<60?`${v} min ago`:w<24?`${w} hour${w>1?"s":""} ago`:b<7?`${b} day${b>1?"s":""} ago`:f.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},o=e||t||"Action",c=s||n||"System",d=l(r);return a.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/admin/audit"),children:[a.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[o," ",a.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",c,")"]})]}),a.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:d})]})},yve=({logs:e,loading:t})=>{const n=vt();return a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),a.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>n("/admin/audit"),children:[a.jsx("span",{children:"See All"}),a.jsx(BW,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?a.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((s,r)=>a.jsx(xve,{...s},r))}):a.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},bve=({icon:e,title:t,value:n,color:s,bgColor:r,loading:i,onClick:l})=>a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l||(()=>console.log(`Clicked metric card: ${t}`)),children:[a.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:a.jsx(e,{size:20})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n||0})]})]}),vve=({revenueData:e,loading:t})=>{const n=vt(),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=h.useMemo(()=>{if(!e||e.length===0){const w=new Date().getMonth(),b=[],C=[];for(let N=0;N<=w;N++)b.push(s[N]),C.push(0);return{labels:b,revenues:C,maxRevenue:0}}const o={};e.forEach(v=>{const w=v.close_date||v.closeDate||null,b=v.stage||"",C=b.toUpperCase()==="CLOSED_WON"||b==="CLOSED_WON";let N=v.amount;N&&typeof N=="object"&&N.toString?N=parseFloat(N.toString()):N=parseFloat(N)||0;const S=N>0;if(w&&w!==null&&C&&S)try{let A=new Date(w);if(isNaN(A.getTime())){const k=String(w).split("T")[0];A=new Date(k+"T00:00:00")}if(!isNaN(A.getTime())){const k=A.getFullYear(),_=A.getMonth()+1,T=`${k}-${String(_).padStart(2,"0")}`;o[T]||(o[T]=0),o[T]+=N}}catch(A){console.error("Error parsing deal date:",w,A)}});const c=Object.keys(o).map(v=>parseInt(v.split("-")[0])),d=c.length>0?[...new Set(c)].sort():[],u=new Date().getFullYear(),f=[],p=[];for(let v=0;v<12;v++){const w=`${u}-${String(v+1).padStart(2,"0")}`;f.push(s[v]),p.push(o[w]||0)}if(d.length>0){const v=Math.max(...d);if(v>u)for(let w=u+1;w<=v;w++)for(let b=0;b<12;b++){const C=`${w}-${String(b+1).padStart(2,"0")}`,N=o[C]||0;f.push(`${s[b]} ${w}`),p.push(N)}}const x=Math.max(...p,1);return{labels:f,revenues:p,maxRevenue:x}},[e]),i=r.labels,l=r.revenues;return a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),a.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>n("/admin/deals"),children:[a.jsx("span",{children:"See All"}),a.jsx(BW,{size:14,className:"transform -rotate-45"})]})]}),a.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:a.jsx("div",{className:"w-full h-full flex items-center justify-start lg:justify-center overflow-x-auto sm:overflow-x-hidden",children:i&&i.length>0&&l&&l.length>0?a.jsx(fN,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:o=>o>=1e3?`${(o/1e3).toFixed(0)}k`:o.toString()}],series:[{data:l,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%",minWidth:{xs:600,lg:"100%"}}}):a.jsxs("div",{className:"text-center text-gray-500",children:[a.jsx("p",{className:"text-sm",children:"No revenue data available"}),a.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},gS=({title:e,items:t,children:n,onSeeAll:s})=>{const r=vt(),i=()=>{if(s)s();else{const l={"Latest Leads":"/admin/leads","Latest Deals":"/admin/deals","Upcoming Activities":"/admin/tasks"};l[e]&&r(l[e])}};return a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col h-full",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),a.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),n]})},wve=({first_name:e,last_name:t,company_name:n,source:s,created_at:r,id:i})=>{const l=vt(),{text:o,bg:c}=fve(s||"Website"),d=x=>{if(!x)return"Unknown";const v=new Date(x),b=new Date-v,C=Math.floor(b/6e4),N=Math.floor(b/36e5),S=Math.floor(b/864e5);return C<60?`${C} min ago`:N<24?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):S<7?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):v.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},u=`${e||""} ${t||""}`.trim()||"Unknown",f=n||"Unknown Company",p=d(r);return a.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&l(`/admin/leads/${i}`),children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:u}),a.jsx("p",{className:"text-xs text-gray-500",children:f})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs text-gray-400",children:p}),a.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${o} ${c} px-2 py-0.5 rounded-full`,children:s||"Website"})]})]})})},Nve=({name:e,amount:t,account:n,stage:s,created_at:r,stage_updated_at:i,id:l,previousAmount:o,currencySymbol:c})=>{const d=vt(),f={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[s]||s||"Unknown",{text:p,bg:x}=mve(f),v=uve(i||r),w=v>30&&s!=="CLOSED_WON"&&s!=="CLOSED_LOST",b=parseFloat(t||0),C=o?b>=o?"up":"down":"up",N=C==="up"?Zbe:Jbe,S=C==="up"?"text-green-400":"text-red-400",A=n?.name||"Unknown Company";return a.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>l&&d(`/admin/deals/info?id=${l}`),children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex-shrink",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),w&&a.jsxs("span",{className:"text-[10px] bg-red-100 text-red-600 px-1.5 py-0.5 rounded border border-red-200 font-bold flex items-center",children:[a.jsx(RL,{size:10,className:"mr-1"})," ",v," days stuck"]})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:A}),a.jsx("div",{className:"mt-1 flex items-center space-x-2",children:a.jsx("span",{className:`inline-block text-xs font-medium ${p} ${x} px-2 py-0.5 rounded-full`,children:f})})]}),a.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[a.jsx("p",{className:"text-md font-bold text-gray-800",children:VW(b,c)}),a.jsx(N,{size:16,className:`${S} mt-1`})]})]})})},jve=({type:e,title:t,assignedTo:n,dueDate:s,scheduledDate:r,priority:i,id:l,activityType:o,fullData:c})=>{const d=vt(),f=o||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:p,color:x,bgColor:v}=hve(f),{text:w,bg:b}=gve(i||"MEDIUM"),S=(_=>{if(!_)return"No date set";const T=new Date(_),I=T-new Date,z=Math.floor(I/864e5);return z===0?`Today, ${T.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:z===1?`Tomorrow, ${T.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:z===-1?`Yesterday, ${T.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:T.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(s||r),A=n||"Unassigned",k=()=>{l&&(c?f==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(c)),d(`/admin/calls/info?id=${l}`)):f==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(c)),d(`/admin/meetings/info?id=${l}`)):d("/admin/tasks"):d(f==="call"?`/admin/calls/info?id=${l}`:f==="meeting"?`/admin/meetings/info?id=${l}`:"/admin/tasks"))};return a.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:k,children:[a.jsx("div",{className:`p-2 rounded-lg ${v} mr-3 flex-shrink-0 mt-1`,children:a.jsx(p,{size:20,className:`${x}`})}),a.jsxs("div",{className:"flex-grow",children:[a.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[a.jsx("span",{className:"text-xl leading-none mr-2",children:""}),t||"Untitled Activity"]}),a.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[a.jsxs("p",{className:"flex items-center",children:[a.jsx(RL,{size:14,className:"mr-1.5 text-gray-400"}),S]}),a.jsxs("p",{className:"flex items-center",children:[a.jsx(GW,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",A]})]})]}),a.jsx("span",{className:`inline-block text-xs font-medium ${w} ${b} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},Cve=()=>{const e=vt(),{user:t}=ta(),n=t?.company?.currency||"",[s,r]=h.useState([]),[i,l]=h.useState(0),[o,c]=h.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0}),[d,u]=h.useState([]),[f,p]=h.useState([]),[x,v]=h.useState([]),[w,b]=h.useState([]),[C,N]=h.useState([]),[S,A]=h.useState(!0),[k,_]=h.useState(null),[T,E]=h.useState(""),[I,z]=h.useState([]),[$,P]=h.useState([]),[O,B]=h.useState([]),[Q,F]=h.useState(new Date),ee=h.useRef(null);h.useRef(null);const V=h.useMemo(()=>{try{if(!T.trim())return[];const R=T.toLowerCase().trim(),ve=[];return Array.isArray(I)&&I.forEach(X=>{const je=`${X.first_name||""} ${X.last_name||""}`.trim().toLowerCase(),Ne=(X.company_name||"").toLowerCase(),Oe=(X.email||"").toLowerCase(),Fe=(X.phone||"").toLowerCase();(je.includes(R)||Ne.includes(R)||Oe.includes(R)||Fe.includes(R))&&ve.push({id:X.id,name:`${X.first_name||""} ${X.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:X.company_name||"No company",route:`/admin/leads/${X.id}`})}),Array.isArray($)&&$.forEach(X=>{const je=(X.name||"").toLowerCase(),Ne=(X.account?.name||"").toLowerCase(),Oe=(X.description||"").toLowerCase();(je.includes(R)||Ne.includes(R)||Oe.includes(R))&&ve.push({id:X.id,name:X.name||"Unnamed Deal",type:"Deal",details:X.account?.name||"No account",route:`/admin/deals/info?id=${X.id}`})}),Array.isArray(O)&&O.forEach(X=>{const je=(X.name||"").toLowerCase(),Ne=(X.email||"").toLowerCase(),Oe=(X.phone||"").toLowerCase(),Fe=(X.website||"").toLowerCase();(je.includes(R)||Ne.includes(R)||Oe.includes(R)||Fe.includes(R))&&ve.push({id:X.id,name:X.name||"Unnamed Account",type:"Account",details:X.email||X.phone||"No contact info",route:"/admin/accounts"})}),ve.slice(0,10)}catch(R){return console.error("Error in search:",R),[]}},[T,I,$,O]),de=R=>{R.route&&(e(R.route),E(""))},oe=h.useCallback(async()=>{A(!0),_(null);try{const[R,ve,X,je,Ne,Oe,Fe,me]=await Promise.all([ie.get("/leads/admin/getLeads").catch(Me=>(console.error("Error fetching leads:",Me),{data:[]})),ie.get("/deals/admin/fetch-all").catch(Me=>(console.error("Error fetching deals:",Me),{data:[]})),ie.get("/accounts/admin/fetch-all").catch(Me=>(console.error("Error fetching accounts:",Me),{data:[]})),ie.get("/tasks/all").catch(Me=>(console.error("Error fetching tasks:",Me),{data:[]})),ie.get("/meetings/admin/fetch-all").catch(Me=>(console.error("Error fetching meetings:",Me),{data:[]})),ie.get("/calls/admin/fetch-all").catch(Me=>(console.error("Error fetching calls:",Me),{data:[]})),ie.get("/logs/read-all").catch(Me=>(console.error("Error fetching logs:",Me),{data:[]})),ie.get("/targets/admin/fetch-all").catch(Me=>(console.error("Error fetching targets:",Me),{data:[]}))]),Be=Array.isArray(R.data)?R.data:[],Pe=Array.isArray(ve.data)?ve.data:[],we=Array.isArray(X.data)?X.data:[],ne=Array.isArray(je.data)?je.data:[],Le=Array.isArray(Ne.data)?Ne.data:[],pe=Array.isArray(Oe.data)?Oe.data:[],le=Array.isArray(Fe.data)?Fe.data:[],ge=Array.isArray(me.data)?me.data:[];z(Be),P(Pe),B(we),r(ge);const fe=ge.reduce((Me,re)=>Me+parseFloat(re.amount||re.value||0),0);l(fe),c({activeLeads:Be.filter(Me=>Me.status&&!["Lost","Converted"].includes(Me.status)).length,totalDeals:Pe.length,activeAccounts:we.length,overdueTasks:ne.filter(Me=>!Me.dueDate||Me.status==="Completed"?!1:new Date(Me.dueDate)<new Date).length});const Te=[...Be].sort((Me,re)=>new Date(re.created_at||0)-new Date(Me.created_at||0)).slice(0,5);u(Te);const Ye=[...Pe].sort((Me,re)=>new Date(re.created_at||0)-new Date(Me.created_at||0)).slice(0,5);p(Ye);const Ae=[];pe.forEach(Me=>{const re=Me.due_date||Me.call_time,Qe=(Me.status||"").toUpperCase();re&&!["COMPLETED","MISSED","NOT_HELD","HELD"].includes(Qe)&&Ae.push({type:"Call",title:Me.subject||"Untitled Call",assignedTo:Me.assigned_to||(Me.call_assign_to?`${Me.call_assign_to.first_name||""} ${Me.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:re,priority:(Me.priority||"MEDIUM").toUpperCase(),id:Me.id,activityType:"call",fullData:Me})}),Le.forEach(Me=>{const re=Me.dueDate||Me.start_time,Qe=(Me.status||"").toUpperCase();re&&!["COMPLETED","CANCELLED","DONE"].includes(Qe)&&Ae.push({type:"Meeting",title:Me.subject||Me.activity||"Untitled Meeting",assignedTo:Me.assignedTo||(Me.meet_assign_to?`${Me.meet_assign_to.first_name||""} ${Me.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:re,priority:(Me.priority||"MEDIUM").toUpperCase(),id:Me.id,activityType:"meeting",fullData:Me})});const Ie={HIGH:1,MEDIUM:2,LOW:3},Je=Ae.sort((Me,re)=>{const Qe=Ie[Me.priority]||3,We=Ie[re.priority]||3;return Qe!==We?Qe-We:new Date(Me.scheduledDate||0)-new Date(re.scheduledDate||0)}).slice(0,5);v(Je),N(Pe);const he=[...le].sort((Me,re)=>new Date(re.timestamp||0)-new Date(Me.timestamp||0));b(he)}catch(R){console.error("Error fetching dashboard data:",R),_("Failed to load dashboard data. Please refresh the page.")}finally{A(!1)}},[]);h.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",oe(),ee.current=setInterval(()=>{oe(),F(new Date)},3e4),()=>{ee.current&&clearInterval(ee.current)}),[oe]);const Z=[{icon:HW,title:"Active Leads",value:o.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/admin/leads")},{icon:WW,title:"Total Targets",value:VW(i,n),color:"text-purple-600",bgColor:"bg-purple-50",onClick:()=>e("/admin/targets")},{icon:Xbe,title:"Total Deals",value:o.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/admin/deals")},{icon:RL,title:"Overdue Tasks",value:o.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/admin/tasks")}];return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[S&&a.jsx(zt,{}),a.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[k&&a.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:a.jsx("p",{className:"font-medium",children:k})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 mb-8",children:[a.jsxs("div",{className:"lg:col-span-9 flex flex-col space-y-4",children:[a.jsx(pve,{searchQuery:T,onSearchChange:E,searchResults:V,onSearchResultClick:de}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4",children:Z.map(R=>a.jsx(bve,{...R,loading:S},R.title))})]}),a.jsx("div",{className:"lg:col-span-3",children:a.jsx(yve,{logs:w,loading:S})})]}),a.jsx("div",{className:"mb-8",children:a.jsx(Kbe,{leads:I,deals:$,targets:s,currencySymbol:n})}),a.jsx("div",{className:"grid grid-cols-1 mb-8",children:a.jsx(vve,{revenueData:C,loading:S})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx(gS,{title:"Latest Leads",children:d.length>0?d.map((R,ve)=>a.jsx(wve,{...R},R.id||ve)):a.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),a.jsx(gS,{title:"Latest Deals",children:f.length>0?f.map((R,ve)=>a.jsx(Nve,{...R,stage_updated_at:R.stage_updated_at,currencySymbol:n},R.id||ve)):a.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),a.jsx(gS,{title:"Upcoming Activities",children:x.length>0?x.map((R,ve)=>a.jsx(jve,{...R},R.id||ve)):a.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})};function Jt({totalItems:e=0,pageSize:t=10,currentPage:n=1,onPrev:s,onNext:r,onPageSizeChange:i,pageSizeOptions:l=[10,20,30,40,50],className:o="",label:c="records"}){const d=e===0?1:Math.ceil(e/t),u=e===0?0:(n-1)*t+1,f=Math.min(n*t,e),p=n<=1||e===0,x=n>=d||e===0,v="inline-flex items-center gap-1 px-3 sm:px-4 py-2 text-sm font-semibold rounded-lg transition focus:outline-none focus:ring-2 focus:ring-offset-1",w="bg-black text-white hover:bg-gray-900",b="bg-gray-200 text-gray-500 cursor-not-allowed focus:ring-transparent";return a.jsxs("div",{className:`flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 ${o}`,children:[a.jsxs("div",{className:"text-sm text-gray-600 font-medium text-center sm:text-left w-full sm:w-auto order-1",children:["Showing ",e===0?0:u,"-",f," of ",e," ",c]}),i&&a.jsxs("div",{className:"flex items-center justify-center gap-2 w-full sm:w-auto order-3 sm:order-2",children:[a.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"Rows per page"}),a.jsx("select",{value:t,onChange:C=>i(Number(C.target.value)),className:"border border-gray-300 rounded-md text-sm py-1 pl-2 pr-6 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:l.map(C=>a.jsx("option",{value:C,children:C},C))})]}),a.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-end w-full sm:w-auto order-2 sm:order-3",children:[a.jsxs("button",{type:"button",onClick:s,disabled:p,className:`${v} ${p?b:w}`,children:[a.jsx(ose,{className:"text-base"}),"Prev"]}),a.jsxs("div",{className:"text-sm font-semibold text-white bg-gray-900 border border-gray-900 shadow-sm px-3 py-1.5 rounded-full",children:["Page ",e===0?0:n," of"," ",e===0?0:d]}),a.jsxs("button",{type:"button",onClick:r,disabled:x,className:`${v} ${x?b:w}`,children:["Next",a.jsx(It,{className:"text-base"})]})]})]})}/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sve=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_ve=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,s)=>s?s.toUpperCase():n.toLowerCase()),R$=e=>{const t=_ve(e);return t.charAt(0).toUpperCase()+t.slice(1)},qW=(...e)=>e.filter((t,n,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===n).join(" ").trim(),Ave=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Eve={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tve=h.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:r="",children:i,iconNode:l,...o},c)=>h.createElement("svg",{ref:c,...Eve,width:t,height:t,stroke:e,strokeWidth:s?Number(n)*24/Number(t):n,className:qW("lucide",r),...!i&&!Ave(o)&&{"aria-hidden":"true"},...o},[...l.map(([d,u])=>h.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const If=(e,t)=>{const n=h.forwardRef(({className:s,...r},i)=>h.createElement(Tve,{ref:i,iconNode:t,className:qW(`lucide-${Sve(R$(e))}`,`lucide-${e}`,s),...r}));return n.displayName=R$(e),n};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kve=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Lve=If("globe",kve);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pve=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],z$=If("lock",Pve);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dve=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Ove=If("message-circle",Dve);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mve=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Ive=If("message-square",Mve);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ve=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Rve=If("send",$ve);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zve=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],hN=If("x",zve);function Uve({comments:e=[],onAddComment:t,currentUser:n}){const[s,r]=h.useState(""),[i,l]=h.useState(!1),[o,c]=h.useState(!1),d=async u=>{if(u.preventDefault(),!!s.trim()){c(!0);try{t&&await t({comment:s.trim(),is_private:i}),r("")}catch(f){console.error("Failed to add comment:",f)}finally{c(!1)}}};return a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200 mt-5",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2 flex items-center gap-2",children:[a.jsx(Ive,{className:"w-5 h-5 text-gray-600"}),"Comments",e.length>0&&a.jsxs("span",{className:"text-sm font-normal text-gray-500",children:["(",e.length,")"]})]}),a.jsx("div",{className:"mt-4",children:e.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:a.jsx(Ove,{className:"w-8 h-8 text-gray-400"})}),a.jsx("h4",{className:"text-lg font-medium text-gray-700 mb-1",children:"No comments yet"}),a.jsx("p",{className:"text-sm text-gray-500 max-w-sm",children:"Be the first to share your thoughts. Start a conversation by adding a comment below."})]}):a.jsx("div",{className:"space-y-4",children:e.map(u=>a.jsxs("div",{className:"flex gap-3 p-4 bg-gray-50 rounded-lg border border-gray-100",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold text-sm",children:u.comment_creator?.first_name?.[0]||u.comment_creator?.email?.[0]?.toUpperCase()||"U"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsx("span",{className:"font-medium text-gray-800",children:u.comment_creator?.first_name||u.comment_creator?.email||"Unknown User"}),a.jsx("span",{className:"text-xs text-gray-400",children:new Date(u.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}),u.is_private&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-amber-100 text-amber-700 rounded-full text-xs font-medium",children:[a.jsx(z$,{className:"w-3 h-3"}),"Private"]})]}),a.jsx("p",{className:"mt-1 text-gray-600 whitespace-pre-wrap break-words",children:u.comment})]})]},u.id))})}),a.jsxs("form",{onSubmit:d,className:"mt-6 pt-4 border-t border-gray-200",children:[a.jsx("div",{className:"relative",children:a.jsx("textarea",{value:s,onChange:u=>r(u.target.value),placeholder:"Write a comment...",rows:2,className:"w-full px-4 py-3 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-700 placeholder-gray-400"})}),a.jsxs("div",{className:"flex items-center justify-between mt-3",children:[a.jsx("button",{type:"button",onClick:()=>l(!i),className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-all duration-200 ${i?"bg-amber-100 text-amber-700 hover:bg-amber-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:i?a.jsxs(a.Fragment,{children:[a.jsx(z$,{className:"w-4 h-4"}),"Private"]}):a.jsxs(a.Fragment,{children:[a.jsx(Lve,{className:"w-4 h-4"}),"Public"]})}),a.jsxs("button",{type:"submit",disabled:!s.trim()||o,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[a.jsx(Rve,{className:"w-4 h-4"}),o?"Posting...":"Post Comment"]})]})]})]})}const pS=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Active"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Former"}],xS={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",parent_company:"",status:"PROSPECT",territory_id:"",assigned_to:""},Qs=e=>e?e.toUpperCase():"",yS=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",Fve=e=>{switch(Qs(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},Bve=e=>{switch(Qs(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}};function Hve(){const e=vt();h.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[t,n]=h.useState(!1),[s,r]=h.useState(!1),[i,l]=h.useState(!1),[o,c]=h.useState(null),[d,u]=h.useState(null),[f,p]=h.useState(xS),[x,v]=h.useState(null),[w,b]=h.useState([]),[C,N]=h.useState(!1),[S,A]=h.useState([]),[k,_]=h.useState(null),[T,E]=h.useState([]),[I,z]=h.useState([]),[$,P]=h.useState("Filter by Status"),[O,B]=h.useState(""),[Q,F]=h.useState(null),[ee,V]=h.useState(!1),[de,oe]=h.useState(1),[Z,R]=h.useState(10),[ve,X]=h.useState("Overview"),[je,Ne]=h.useState(""),[Oe,Fe]=h.useState(!1),[me,Be]=h.useState([]),[Pe,we]=h.useState({}),[ne,Le]=h.useState(null),pe=h.useCallback(async(se=null)=>{N(!0);try{const He=await ie.get("/accounts/admin/fetch-all"),Ce=[...Array.isArray(He.data)?He.data:[]].sort((it,Ct)=>{const kt=it?.created_at||it?.updated_at||0,Ft=Ct?.created_at||Ct?.updated_at||0;return new Date(Ft)-new Date(kt)});if(b(Ce),se){const it=Ce.find(Ct=>Ct.id===se);v(it||null)}}catch(He){console.error(He),b([]),He.response?.status===403?H.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):H.error("Failed to fetch accounts. Please try again later.")}finally{N(!1)}},[v]),le=h.useCallback(async()=>{try{const se=await ie.get("/users/all");A(Array.isArray(se.data)?se.data:[])}catch(se){console.error(se),se.response?.status===403&&H.warn("Unable to load users for assignment (permission denied).")}},[]),ge=h.useCallback(async()=>{try{const se=await ie.get("/territories/fetch");E(Array.isArray(se.data)?se.data:[])}catch(se){console.error(se),se.response?.status===403&&H.warn("Unable to load territories (permission denied).")}},[]),fe=h.useCallback(async()=>{try{const se=await ie.get("/accounts/admin/parent-companies");z(Array.isArray(se.data)?se.data:[])}catch(se){console.error(se),se.response?.status===403&&H.warn("Unable to load parent companies (permission denied).")}},[]),Te=h.useCallback(async se=>{try{const He=await ie.get(`/activities/accounts/${se}`);we(He.data&&typeof He.data=="object"?He.data:{})}catch(He){console.error(He),He.response?.status===404&&(console.warn("No activities found for this account."),we({}))}},[]);h.useEffect(()=>{pe(),le(),ge(),fe()},[pe,le,ge,fe]),h.useEffect(()=>{oe(1)},[O,$,Z]);const Ye=h.useMemo(()=>{const se=O.toLowerCase(),He=$;return w.filter(ht=>{const Ce=ht.name?.toLowerCase().includes(se)||ht.website?.toLowerCase().includes(se)||ht.phone_number?.toLowerCase().includes(se)||ht.industry?.toLowerCase().includes(se)||ht.parent_company?.toLowerCase().includes(se)||ht.territory?.name?.toLowerCase().includes(se),it=He==="Filter by Status"||Qs(ht.status)===Qs(He);return Ce&&it})},[w,O,$]),Ae=Math.max(1,Math.ceil(Ye.length/Z)||1);h.useEffect(()=>{oe(se=>{const He=Math.max(1,Math.ceil(Ye.length/Z)||1);return se>He?He:se})},[Ye.length,Z]);const Ie=h.useMemo(()=>{const se=(de-1)*Z;return Ye.slice(se,se+Z)},[Ye,de,Z]),Je=se=>{if(se.target.checked){const He=Ie.map(ht=>ht.id);Be(He)}else Be([])},he=se=>{Be(He=>He.includes(se)?He.filter(ht=>ht!==se):[...He,se])},Me=async()=>{me.length!==0&&F({title:"Delete Accounts",message:a.jsxs("span",{children:["Are you sure you want to delete"," ",a.jsx("span",{className:"font-semibold",children:me.length})," selected accounts? This action cannot be undone."]}),confirmLabel:`Delete ${me.length} Account(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",accountIds:me}})};Ye.length===0||(de-1)*Z+1,Math.min(de*Z,Ye.length);const re=()=>oe(se=>Math.max(se-1,1)),Qe=()=>oe(se=>Math.min(se+1,Ae));h.useEffect(()=>{x&&Ne(Qs(x.status)||"PROSPECT")},[x]);const We=w.length,dt=h.useMemo(()=>w.filter(se=>se.status?.toLowerCase()==="customer").length,[w]),ze=h.useMemo(()=>w.filter(se=>se.status?.toLowerCase()==="prospect").length,[w]),ce=h.useMemo(()=>w.filter(se=>se.status?.toLowerCase()==="partner").length,[w]),ye=h.useMemo(()=>w.filter(se=>se.status?.toLowerCase()==="active").length,[w]),Ue=h.useMemo(()=>w.filter(se=>se.status?.toLowerCase()==="inactive").length,[w]),et=h.useMemo(()=>w.filter(se=>se.status?.toLowerCase()==="former").length,[w]),lt=h.useMemo(()=>[{title:"Total",value:We,icon:La,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:dt,icon:gl,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:ze,icon:Ba,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:ce,icon:Zt,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:ye,icon:gl,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:Ue,icon:pl,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:et,icon:pl,color:"text-orange-600",bgColor:"bg-orange-100"}],[We,dt,ze,ce,ye,Ue,et]),Ee=se=>{v(se),X("Overview"),Ne(Qs(se?.status)||"PROSPECT")},tt=()=>v(null),be=se=>{se.target.id==="accountModalBackdrop"&&!ee&&tt()},Xe=()=>{n(!1),r(!1),u(null),p(xS),l(!1),_(null)},M=se=>{se.target.id==="modalBackdrop"&&Xe()},U=se=>se?new Date(se).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",Y=se=>{const{name:He,value:ht}=se.target;p(Ce=>({...Ce,[He]:ht}))},te=()=>{p(xS),r(!1),u(null),n(!0)},K=se=>{v(null),se.assigned_accs?_(se.assigned_accs):_(null),p({name:se.name||"",website:se.website||"",phone_number:se.phone_number||"",billing_address:se.billing_address||"",shipping_address:se.shipping_address||"",industry:se.industry||"",status:Qs(se.status)||"PROSPECT",territory_id:se.territory?.id?String(se.territory.id):"",assigned_to:se.assigned_accs?.id?String(se.assigned_accs.id):""}),r(!0),u(se.id),n(!0)},Se=se=>{se&&F({title:"Delete Account",message:a.jsxs("span",{children:["Are you sure you want to permanently delete the account"," ",a.jsx("span",{className:"font-semibold",children:se.name}),"? This action cannot be undone."]}),confirmLabel:"Delete Account",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:se.id,name:se.name}})},G=async()=>{if(!Q?.action){F(null);return}const{action:se}=Q,{type:He,payload:ht,targetId:Ce,name:it,accountIds:Ct}=se;V(!0);try{if(He==="create"){l(!0);const kt=await ie.post("/accounts/admin",ht);fe(),H.success(`Account "${it}" created successfully.`);const Ft=x?.id||null;Xe(),await pe(Ft),!x&&kt.data?.id}else if(He==="update"){if(!Ce)throw new Error("Missing account identifier for update.");l(!0),await ie.put(`/accounts/admin/${Ce}`,ht),H.success(`Account "${it}" updated successfully.`);const kt=x?.id&&x.id===Ce?Ce:null;Xe(),await pe(kt),x?.id===Ce&&v(null)}else if(He==="delete"){if(!Ce)throw new Error("Missing account identifier for deletion.");const kt=x?.id;c(Ce),await ie.delete(`/accounts/admin/${Ce}`),H.success(`Account "${it}" deleted successfully.`),await pe(kt&&kt!==Ce?kt:null),kt===Ce&&v(null)}else He==="bulk-delete"&&(await ie.delete("/accounts/admin/bulk-delete",{data:{account_ids:Ct}}),H.success(`Successfully deleted ${Ct.length} accounts`),Be([]),await pe())}catch(kt){console.error(kt);const Ft=He==="create"?"Failed to create account. Please review the details and try again.":He==="update"?"Failed to update account. Please review the details and try again.":He==="bulk-delete"?"Failed to delete selected accounts.":"Failed to delete account. Please try again.",ia=kt.response?.data?.detail||Ft;H.error(ia),(He==="create"||He==="update")&&l(!1),He==="delete"&&c(null)}finally{(He==="create"||He==="update")&&l(!1),He==="delete"&&c(null),V(!1),F(null)}},J=()=>{ee||F(null)},De=async()=>{if(!x||!je)return;const se=Qs(je),He=Qs(x.status);if(se!==He){Fe(!0);try{await ie.put(`/accounts/admin/${x.id}`,{status:se}),H.success(`Account status updated to ${yS(se)}`),b(ht=>ht.map(Ce=>Ce.id===x.id?{...Ce,status:se}:Ce)),v(null)}catch(ht){console.error(ht);const Ce=ht.response?.data?.detail||"Failed to update account status. Please try again.";H.error(Ce)}finally{Fe(!1)}}},[Ve,ft]=h.useState(!1),bt=se=>{se.preventDefault(),ft(!0);const He=f.name.trim();if(!He){H.error("Account name is required.");return}if(!f.assigned_to){H.error("Assigned To is required.");return}const Ce={name:He,website:f.website?.trim()||null,phone_number:f.phone_number?.trim()||null,billing_address:f.billing_address?.trim()||null,shipping_address:f.shipping_address?.trim()||null,industry:f.industry?.trim()||null,parent_company:f.parent_company?.trim()||null,status:f.status||"PROSPECT",territory_id:f.territory_id?Number(f.territory_id):null,assigned_to:f.assigned_to?Number(f.assigned_to):null},it=s&&d?"update":"create";F({title:it==="create"?"Confirm New Account":"Confirm Update",message:it==="create"?a.jsxs("span",{children:["Are you sure you want to create the account"," ",a.jsx("span",{className:"font-semibold",children:He}),"?"]}):a.jsxs("span",{children:["Save changes to the account"," ",a.jsx("span",{className:"font-semibold",children:He}),"?"]}),confirmLabel:it==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:it,payload:Ce,targetId:d||null,name:He}})},jt=[{label:"Filter by Status",value:"Filter by Status"},...pS.map(se=>({label:se.label,value:se.value}))],ke=Q?.action?.type==="delete"?Q.action.targetId:null,pt=x&&(o===x.id||ke===x.id),_e=x&&o===x.id,W=x?Fve(x.status):"",ae=x?a.jsx("div",{id:"accountModalBackdrop",onClick:be,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:se=>se.stopPropagation(),children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),a.jsx("button",{onClick:tt,className:"text-gray-400 hover:text-white cursor-pointer",children:a.jsx(Ha,{size:25})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:x.name}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${W}`,children:yS(x.status)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>K(x),disabled:Q?.action?.type==="update"&&Q.action.targetId===x.id,children:[a.jsx(nn,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>Se(x),disabled:!!pt,children:_e?"Deleting...":a.jsxs(a.Fragment,{children:[a.jsx(Wt,{className:"mr-2"}),"Delete"]})})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(se=>a.jsx("button",{onClick:()=>X(se),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${ve===se?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:se},se))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[ve==="Overview"&&a.jsxs("div",{className:"h-full max-h-100 md:max-h-70 overflow-y-auto hide-scrollbar",children:[a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Website:"}),a.jsx("p",{children:x.website?a.jsx("a",{href:x.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:x.website}):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Industry:"}),a.jsx("p",{children:x.industry||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Parent Company:"}),a.jsx("p",{children:x.parent_company||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Territory:"}),a.jsx("p",{children:x.territory?.name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Phone Number:"}),a.jsx("p",{children:x.phone_number||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Billing Address:"}),a.jsx("p",{children:x.billing_address||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),a.jsx("p",{children:x.shipping_address||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:x.assigned_accs?`${x.assigned_accs.first_name} ${x.assigned_accs.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:x.acc_creator?`${x.acc_creator.first_name} ${x.acc_creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:U(x.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:U(x.updated_at)||"N/A"})]})]})}),a.jsx(Uve,{})]}),ve==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:w.notes||"No notes available."})]})]}),ve==="Activities"&&a.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[Pe.tasks&&Pe.tasks.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>Le(ne==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Gt,{className:"text-blue-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",Pe.tasks.length,")"]})]}),ne==="tasks"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),ne==="tasks"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Pe.tasks.map((se,He)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/tasks",{state:{taskID:se.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-blue-600 mt-1",children:a.jsx(Gt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:se.subject||se.title||"Task"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:se.description||"No description"}),se.assigned_to&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",se.assigned_to.first_name," ",se.assigned_to.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:U(se.due_date||se.created_at)})]},`task-${He}`))})]}),Pe.meetings&&Pe.meetings.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>Le(ne==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_t,{className:"text-green-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",Pe.meetings.length,")"]})]}),ne==="meetings"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),ne==="meetings"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Pe.meetings.map((se,He)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/meetings",{state:{meetingID:se.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-green-600 mt-1",children:a.jsx(_t,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:se.subject||se.title||"Meeting"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:se.description||se.location||"No description"}),se.host&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",se.host.first_name," ",se.host.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:U(se.start_time||se.created_at)})]},`meeting-${He}`))})]}),Pe.calls&&Pe.calls.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>Le(ne==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Et,{className:"text-purple-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",Pe.calls.length,")"]})]}),ne==="calls"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),ne==="calls"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Pe.calls.map((se,He)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/calls",{state:{callID:se.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-purple-600 mt-1",children:a.jsx(Et,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:se.subject||se.title||"Call"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:se.direction||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:U(se.call_time||se.created_at)})]},`call-${He}`))})]}),Pe.contacts&&Pe.contacts.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>Le(ne==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Zt,{className:"text-teal-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",Pe.contacts.length,")"]})]}),ne==="contacts"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),ne==="contacts"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Pe.contacts.map((se,He)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/contacts",{state:{contactID:se.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-teal-600 mt-1",children:a.jsx(Zt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[se.first_name?`${se.first_name} `:"",se.last_name]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:se.title||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:U(se.created_at)})]},`contact-${He}`))})]}),Pe.deals&&Pe.deals.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>Le(ne==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Kt,{className:"text-indigo-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",Pe.deals.length,")"]})]}),ne==="deals"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),ne==="deals"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Pe.deals.map((se,He)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/deals",{state:{dealID:se.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-indigo-600 mt-1",children:a.jsx(Kt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[se.deal_id?se.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",se.name||se.title||"Deal"]}),a.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:se.stage||se.description||"No description"})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:U(se.close_date||se.created_at)})]},`deal-${He}`))})]}),Pe.quotes&&Pe.quotes.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>Le(ne==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ga,{className:"text-orange-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",Pe.quotes.length,")"]})]}),ne==="quotes"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),ne==="quotes"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Pe.quotes.map((se,He)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/quotes",{state:{quoteID:se.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-orange-600 mt-1",children:a.jsx(ga,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(se.quote_id?se.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:se.status||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:U(se.presented_date)||""})]},`quote-${He}`))})]}),(!Pe||(!Pe.tasks||Pe.tasks.length===0)&&(!Pe.meetings||Pe.meetings.length===0)&&(!Pe.calls||Pe.calls.length===0)&&(!Pe.quotes||Pe.quotes.length===0)&&(!Pe.deals||Pe.deals.length===0)&&(!Pe.contacts||Pe.contacts.length===0))&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No related activities found for this account."})})]})]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assigned_to:x.assigned_accs?.id?String(x.assigned_accs.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assigned_to:x.assigned_accs?.id?String(x.assigned_accs.id):"",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(_t,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assigned_to:x.assigned_accs?.id?String(x.assigned_accs.id):"",priority:"MEDIUM",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Gt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:je||Qs(x?.status)||"PROSPECT",onChange:se=>Ne(se.target.value),children:pS.map(se=>a.jsx("option",{value:se.value,children:se.label},se.value))}),a.jsx("button",{onClick:De,disabled:Oe||!je||Qs(je)===Qs(x?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Oe||!je||Qs(je)===Qs(x?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:Oe?"Updating...":"Update"})]})]})]})]})]})}):null,$e=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[C&&a.jsx(zt,{message:"Loading accounts..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(La,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{te(),ft(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(da,{className:"mr-2"})," Add Account"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:lt.map(se=>a.jsx(Gve,{...se},se.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search accounts",value:O,onChange:se=>B(se.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:$,onChange:se=>P(se.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:jt.map(se=>a.jsx("option",{value:se.value,children:se.label},se.value))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 text-center w-12",children:a.jsx("input",{type:"checkbox",checked:Ie.length>0&&Ie.every(se=>me.includes(se.id)),onChange:Je,className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4",children:"Industry"}),a.jsx("th",{className:"py-3 px-4",children:"Territory"}),a.jsx("th",{className:"py-3 px-4",children:"Phone"}),a.jsx("th",{className:"py-3 px-4 text-center w-24",children:me.length>0?a.jsx("button",{onClick:Me,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${me.length} selected items`,children:a.jsx(Wt,{size:18})}):""})]})}),a.jsx("tbody",{children:C?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"Loading accounts..."})}):Ye.length>0?Ie.map(se=>a.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>{Ee(se),Te(se.id)},children:[a.jsx("td",{className:"py-3 px-4 text-center",children:a.jsx("input",{type:"checkbox",checked:me.includes(se.id),onChange:()=>he(se.id),onClick:He=>He.stopPropagation(),className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:se.name}),a.jsx("div",{className:"text-gray-500 text-xs break-all",children:se.website||"--"})]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${Bve(se.status)}`,children:yS(se.status)})}),a.jsx("td",{className:"py-3 px-4 text-sm",children:se.industry||"--"}),a.jsx("td",{className:"py-3 px-4 text-sm",children:se.territory?.name||"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[a.jsx(Et,{className:"text-gray-500"}),a.jsx("span",{children:se.phone_number||"--"})]})}),a.jsx("td",{className:"py-3 px-4 text-center"})]},se.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No accounts found."})})})]})}),a.jsx(Jt,{className:"mt-4",totalItems:Ye.length,pageSize:Z,currentPage:de,onPrev:re,onNext:Qe,onPageSizeChange:se=>{R(se),oe(1)},pageSizeOptions:[10,20,30,40,50],label:"accounts"})]}),Ge=t?a.jsx("div",{id:"modalBackdrop",onClick:M,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:se=>se.stopPropagation(),children:[a.jsx("button",{onClick:()=>{Xe(),ft(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:i||ee,children:a.jsx(Vt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Account":"Add New Account"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:bt,noValidate:!0,children:[a.jsx("div",{className:"md:col-span-2",children:a.jsx(Sm,{label:"Name",name:"name",value:f.name,onChange:Y,placeholder:"Company name",required:!0,isSubmitted:Ve})}),a.jsx(F$,{label:"Parent Company",value:f.parent_company,onChange:se=>{p(He=>({...He,parent_company:se}))},items:I.map(se=>({id:se,name:se})),getLabel:se=>se?.name||"",placeholder:"Select or type parent company...",disabled:i,allowFreeText:!0}),a.jsx(Sm,{label:"Website",name:"website",value:f.website,onChange:Y,placeholder:"https://example.com",disabled:i}),a.jsx(Sm,{label:"Phone Number",name:"phone_number",value:f.phone_number,onChange:Y,placeholder:"09xx xxx xxxx",type:"tel",disabled:i}),a.jsx(Sm,{label:"Industry",name:"industry",value:f.industry,onChange:Y,placeholder:"Industry",disabled:i}),a.jsx(Sm,{label:"Billing Address",name:"billing_address",value:f.billing_address,onChange:Y,placeholder:"Billing address",disabled:i}),a.jsx(Sm,{label:"Shipping Address",name:"shipping_address",value:f.shipping_address,onChange:Y,placeholder:"Shipping address",disabled:i}),a.jsx(U$,{label:"Status",name:"status",value:f.status,onChange:Y,options:[{value:"",label:"Select status"},...pS],required:!0,disabled:i}),a.jsx(F$,{label:"Assigned To",value:f.assigned_to,onChange:se=>{const He=S.find(Ce=>String(Ce.id)===String(se));_(He);let ht=null;He&&He.assigned_territory&&He.assigned_territory.length===1&&(ht=He.assigned_territory[0].id),p(Ce=>({...Ce,assigned_to:se,territory_id:ht}))},items:S||[],getLabel:se=>`${se?.first_name??""} ${se?.last_name??""} (${se?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:Ve,disabled:i||S.length===0}),a.jsx("div",{className:"md:col-span-2",children:a.jsx(U$,{label:"Territory",name:"territory_id",value:f.territory_id||"",onChange:Y,options:[{value:"",label:k?k.assigned_territory&&k.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"},...k&&k.assigned_territory&&k.assigned_territory.map(se=>({value:String(se.id),label:se.name}))||[]],disabled:i||!k||!k.assigned_territory||k.assigned_territory.length===0})}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[a.jsx("button",{type:"button",onClick:()=>{Xe(),ft(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i||ee,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i||ee,children:i?"Saving...":s?"Update Account":"Save Account"})]})]})]})}):null,ue=Q?a.jsx(Vve,{open:!0,title:Q.title,message:Q.message,confirmLabel:Q.confirmLabel,cancelLabel:Q.cancelLabel,variant:Q.variant,onConfirm:G,onCancel:J,loading:ee}):null;return a.jsxs(a.Fragment,{children:[$e,ae,Ge,ue]})}function Gve({icon:e,title:t,value:n,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function Sm({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,className:c="",isSubmitted:d=!1}){const u=d&&!n?.trim();return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function U$({label:e,name:t,value:n,onChange:s,options:r,required:i=!1,disabled:l=!1}){return a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:n??"",onChange:s,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(o=>a.jsx("option",{value:o.value,children:o.label},o.value))})]})}function F$({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",required:c=!1,isSubmitted:d=!1,allowFreeText:u=!1}){const f=d&&c&&!n;return a.jsxs("div",{className:o,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(Wve,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:l,hasError:f,allowFreeText:u})]})}function Wve({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,hasError:o=!1,allowFreeText:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),v=e.find(C=>String(C.id)===String(t)),w=v?s(v):t,b=h.useMemo(()=>{const C=f.trim().toLowerCase();return(C?e.filter(S=>(s(S)||"").toLowerCase().includes(C)):e).slice(0,l)},[e,f,s,l]);return h.useEffect(()=>{const C=N=>{x.current&&!x.current.contains(N.target)&&u(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]),h.useEffect(()=>{d||p("")},[d]),a.jsxs("div",{ref:x,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:d?f:w,placeholder:r,onFocus:()=>!i&&u(!0),onChange:C=>{p(C.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${o?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsxs("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:[c&&f.trim()&&!b.some(C=>s(C).toLowerCase()===f.trim().toLowerCase())&&a.jsxs("button",{type:"button",onClick:()=>{n(f.trim()),u(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-green-50 bg-blue-50 font-medium text-blue-700",children:['+ Add "',f.trim(),'" as new parent company']}),b.length>0?b.map(C=>{const N=String(C.id),S=s(C),A=String(t)===N;return a.jsx("button",{type:"button",onClick:()=>{n(N),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${A?"bg-blue-50":""}`,children:S||"--"},N)}):!c||!f.trim()?a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"}):null]}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function Vve({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}function ix(e){return At({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M4 2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm3 0a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm3.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zM4 5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zM7.5 5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm2.5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zM4.5 8a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm2.5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm3.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5z"},child:[]},{tag:"path",attr:{d:"M2 1a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1zm11 0H3v14h3v-2.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5V15h3z"},child:[]}]})(e)}const bS={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},_m=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),Gi=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function qve(){const e=vt(),t=Yt();h.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[n,s]=h.useState([]),[r,i]=h.useState(!1),[l,o]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState(null),[p,x]=h.useState(!1),[v,w]=h.useState(!1),[b,C]=h.useState(!1),[N,S]=h.useState(null),[A,k]=h.useState(!1),[_,T]=h.useState(null),[E,I]=h.useState(bS),[z,$]=h.useState(""),[P,O]=h.useState("Filter by Accounts"),[B,Q]=h.useState(null),[F,ee]=h.useState("Overview"),[V,de]=h.useState(1),[oe,Z]=h.useState(10),[R,ve]=h.useState({}),[X,je]=h.useState(null),[Ne,Oe]=h.useState([]),[Fe,me]=h.useState(null);h.useEffect(()=>{const K=t.state?.contactID;K&&(me(K),e(t.pathname,{replace:!0,state:{}}))},[t,e]),h.useEffect(()=>{if(Fe&&n.length>0&&!r){const K=n.find(Se=>Se.id===Fe);K?f(K):H.error("Contact not found."),me(null)}},[Fe,n,r]);const Be=h.useCallback(async(K=null)=>{i(!0);try{const Se=await ie.get("/contacts/admin/fetch-all"),J=[...Array.isArray(Se.data)?Se.data:[]].sort((De,Ve)=>{const ft=De?.created_at||De?.updated_at||0,bt=Ve?.created_at||Ve?.updated_at||0;return new Date(bt)-new Date(ft)});if(s(J),K){const De=J.find(Ve=>Ve.id===K);f(De||null)}}catch(Se){console.error(Se),s([]),Se.response?.status===403?H.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):H.error("Failed to fetch contacts. Please try again later.")}finally{i(!1)}},[f]),Pe=h.useCallback(async()=>{try{const K=await ie.get("/accounts/admin/fetch-all"),G=[...Array.isArray(K.data)?K.data:[]].sort((J,De)=>(J?.name||"").localeCompare(De?.name||""));o(G)}catch(K){console.error(K),o([]),K.response?.status===403&&H.warn("Unable to load accounts (permission denied).")}},[]),we=h.useCallback(async()=>{try{const K=await ie.get("/users/all"),G=[...Array.isArray(K.data)?K.data:[]].sort((J,De)=>_m(J).localeCompare(_m(De)));d(G)}catch(K){console.error(K),d([]),K.response?.status===403&&H.warn("Unable to load users for assignment (permission denied).")}},[]),ne=h.useCallback(async K=>{try{const Se=await ie.get(`/activities/contact/${K}`);ve(Se.data&&typeof Se.data=="object"?Se.data:{})}catch(Se){console.error(Se),Se.response?.status===404&&(console.warn("No activities found for this account."),ve({}))}},[]);h.useEffect(()=>{Be(),Pe(),we()},[Be,Pe,we]);const Le=h.useMemo(()=>{const K=new Map;l.forEach(G=>{G?.id&&G?.name&&K.set(String(G.id),G.name)}),n.forEach(G=>{G?.account_id&&G?.account?.name&&K.set(String(G.account_id),G.account.name)});const Se=Array.from(K.entries()).sort((G,J)=>G[1].localeCompare(J[1])).map(([G,J])=>({value:G,label:J}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...Se]},[l,n]),pe=h.useMemo(()=>{const K=z.trim().toLowerCase(),Se=P.trim();return n.filter(G=>{const J=[G?.first_name,G?.last_name,G?.email,G?.title,G?.department,G?.account?.name,G?.account?.status,G?.work_phone,G?.mobile_phone_1,G?.mobile_phone_2,G?.assigned_contact?.first_name,G?.assigned_contact?.last_name,G?.contact_creator?.first_name,G?.contact_creator?.last_name,G?.notes,Gi(G?.created_at),Gi(G?.updated_at)],De=K===""||J.some(ft=>ft==null?!1:ft.toString().toLowerCase().includes(K)),Ve=Se==="Filter by Accounts"||String(G.account_id)===Se;return De&&Ve})},[n,z,P]),le=Math.max(1,Math.ceil(pe.length/oe)||1);h.useEffect(()=>{de(1)},[z,P,oe]),h.useEffect(()=>{de(K=>{const Se=Math.max(1,Math.ceil(pe.length/oe)||1);return K>Se?Se:K})},[pe.length,oe]);const ge=h.useMemo(()=>{const K=(V-1)*oe;return pe.slice(K,K+oe)},[pe,V,oe]),fe=()=>de(K=>Math.max(K-1,1)),Te=()=>de(K=>Math.min(K+1,le)),Ye=K=>{if(K.target.checked){const Se=ge.map(G=>G.id);Oe(Se)}else Oe([])},Ae=K=>{Oe(Se=>Se.includes(K)?Se.filter(G=>G!==K):[...Se,K])},Ie=async()=>{Ne.length!==0&&S({title:"Delete Contacts",message:a.jsxs("span",{children:["Are you sure you want to delete"," ",a.jsx("span",{className:"font-semibold",children:Ne.length})," selected contacts? This action cannot be undone."]}),confirmLabel:`Delete ${Ne.length} Contact(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",contact_ids:Ne}})},Je=h.useCallback(()=>{x(!1),w(!1),T(null),I(bS),C(!1),ze(!1)},[]),he=K=>{K.target.id==="modalBackdrop"&&!b&&!A&&Je()},Me=K=>{const{name:Se,value:G}=K.target;I(J=>({...J,[Se]:G}))},re=()=>{I(bS),w(!1),T(null),x(!0)},Qe=K=>{K&&(I({first_name:K.first_name||"",last_name:K.last_name||"",account_id:K.account_id?String(K.account_id):"",title:K.title||"",department:K.department||"",email:K.email||"",work_phone:K.work_phone||"",mobile_phone_1:K.mobile_phone_1||"",mobile_phone_2:K.mobile_phone_2||"",notes:K.notes||"",assigned_to:K.assigned_to?String(K.assigned_to):""}),w(!0),T(K.id),x(!0),f(null))},We=K=>{if(!K)return;const Se=_m(K)||"this contact";S({title:"Delete Contact",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:Se}),"? This action cannot be undone."]}),confirmLabel:"Delete Contact",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:K.id,name:Se}})},[dt,ze]=h.useState(!1),ce=K=>{K.preventDefault(),ze(!0);const Se=E.first_name.trim(),G=E.last_name.trim();if(!Se||!G){H.error("First name and last name are required.");return}if(!E.account_id){H.error("Account is required.");return}if(!E.assigned_to){H.error("Assigned To is required.");return}const De=E.email?.trim();if(!De){H.error("Email is required.");return}if(!De.includes("@")){H.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(De)){H.error("Please enter a valid email address.");return}const ft={first_name:Se,last_name:G,account_id:Number(E.account_id),title:E.title?.trim()||null,department:E.department?.trim()||null,email:E.email?.trim().toLowerCase()||null,work_phone:E.work_phone?.trim()||null,mobile_phone_1:E.mobile_phone_1?.trim()||null,mobile_phone_2:E.mobile_phone_2?.trim()||null,notes:E.notes?.trim()||null,assigned_to:E.assigned_to?Number(E.assigned_to):null},bt=v&&_?"update":"create",jt=`${Se} ${G}`.trim();S({title:bt==="create"?"Confirm New Contact":"Confirm Update",message:bt==="create"?a.jsxs("span",{children:["Are you sure you want to add"," ",a.jsx("span",{className:"font-semibold",children:jt})," to your contacts?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:jt}),"?"]}),confirmLabel:bt==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:bt,payload:ft,targetId:_||null,name:jt}})},ye=async()=>{if(!N?.action){S(null);return}const{action:K}=N,{type:Se,payload:G,targetId:J,name:De}=K;k(!0);try{if(Se==="create"){C(!0),await ie.post("/contacts/admin",G),H.success(`Contact "${De}" created successfully.`);const Ve=u?.id||null;Je(),await Be(Ve)}else if(Se==="update"){if(!J)throw new Error("Missing contact identifier for update.");C(!0),await ie.put(`/contacts/admin/${J}`,G),H.success(`Contact "${De}" updated successfully.`);const Ve=u?.id&&u.id===J?J:u?.id||null;Je(),await Be(Ve),u?.id===J&&f(null)}else if(Se==="delete"){if(!J)throw new Error("Missing contact identifier for deletion.");const Ve=u?.id;Q(J),await ie.delete(`/contacts/admin/${J}`),H.success(`Contact "${De}" deleted successfully.`),await Be(Ve&&Ve!==J?Ve:null),Ve===J&&f(null)}else if(Se==="bulk-delete"){const Ve=K.contact_ids;await ie.delete("/contacts/admin/bulk-delete",{data:{contact_ids:Ve}}),H.success(`Successfully deleted ${Ve.length} contacts`),Oe([]),await Be()}}catch(Ve){console.error(Ve);const ft=Se==="create"?"Failed to create contact. Please review the details and try again.":Se==="update"?"Failed to update contact. Please review the details and try again.":Se==="bulk-delete"?"Failed to delete selected contacts.":"Failed to delete contact. Please try again.",bt=Ve.response?.data?.detail||ft;H.error(bt)}finally{(Se==="create"||Se==="update")&&C(!1),Se==="delete"&&Q(null),k(!1),S(null)}},Ue=()=>{A||S(null)},et=K=>{f(K),ee("Overview")},lt=()=>f(null),Ee=K=>{K.target.id==="contactModalBackdrop"&&!A&&lt()},tt=N?.action?.type==="delete"?N.action.targetId:null,be=u&&(B===u.id||tt===u.id),Xe=u&&B===u.id,M=u?a.jsx("div",{id:"contactModalBackdrop",onClick:Ee,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:K=>K.stopPropagation(),children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),a.jsx("button",{onClick:lt,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:a.jsx(Ha,{size:25})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:_m(u)||"Unnamed contact"})}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Qe(u),disabled:A||N?.action?.type==="update"&&N.action.targetId===u.id,children:[a.jsx(nn,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>We(u),disabled:!!be,children:Xe?"Deleting...":a.jsxs(a.Fragment,{children:[a.jsx(Wt,{className:"mr-2"}),"Delete"]})})]})]}),a.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:a.jsx("p",{className:"text-sm text-gray-500",children:u.account?.name||"No associated account"})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(K=>a.jsx("button",{onClick:()=>ee(K),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${F===K?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:K},K))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[F==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Contact Name:"}),a.jsx("p",{children:_m(u)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Title:"}),a.jsx("p",{children:u.title||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:u.email?a.jsx("a",{href:`mailto:${u.email}`,className:"text-blue-600 hover:underline break-all",children:u.email}):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Department:"}),a.jsx("p",{children:u.department||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Work Phone:"}),a.jsx("p",{children:u.work_phone||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),a.jsx("p",{children:u.mobile_phone_1||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),a.jsx("p",{children:u.mobile_phone_2||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:u.assigned_contact?`${u.assigned_contact.first_name} ${u.assigned_contact.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:u.contact_creator?`${u.contact_creator.first_name} ${u.contact_creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:Gi(u.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:Gi(u.updated_at)||"N/A"})]})]})}),F==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:u.notes||"No notes available."})]})]}),F==="Activities"&&a.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[R.tasks&&R.tasks.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>je(X==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Gt,{className:"text-blue-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",R.tasks.length,")"]})]}),X==="tasks"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),X==="tasks"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:R.tasks.map((K,Se)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/tasks",{state:{taskID:K.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-blue-600 mt-1",children:a.jsx(Gt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:K.subject||K.title||"Task"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:K.description||"No description"}),K.assigned_to&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",K.assigned_to.first_name," ",K.assigned_to.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Gi(K.due_date||K.created_at)})]},`task-${Se}`))})]}),R.meetings&&R.meetings.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>je(X==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_t,{className:"text-green-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",R.meetings.length,")"]})]}),X==="meetings"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),X==="meetings"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:R.meetings.map((K,Se)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/meetings",{state:{meetingID:K.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-green-600 mt-1",children:a.jsx(_t,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:K.subject||K.title||"Meeting"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:K.description||K.location||"No description"}),K.host&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",K.host.first_name," ",K.host.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Gi(K.start_time||K.created_at)})]},`meeting-${Se}`))})]}),R.calls&&R.calls.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>je(X==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Et,{className:"text-purple-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",R.calls.length,")"]})]}),X==="calls"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),X==="calls"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:R.calls.map((K,Se)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/calls",{state:{callID:K.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-purple-600 mt-1",children:a.jsx(Et,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:K.subject||K.title||"Call"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:K.direction||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Gi(K.call_time||K.created_at)})]},`call-${Se}`))})]}),R.deals&&R.deals.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>je(X==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Kt,{className:"text-indigo-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",R.deals.length,")"]})]}),X==="deals"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),X==="deals"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:R.deals.map((K,Se)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/deals",{state:{dealID:K.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-indigo-600 mt-1",children:a.jsx(Kt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[K.deal_id?K.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",K.name||K.title||"Deal"]}),a.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:K.stage||K.description||"No description"})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Gi(K.close_date||K.created_at)})]},`deal-${Se}`))})]}),R.quotes&&R.quotes.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>je(X==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ga,{className:"text-orange-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",R.quotes.length,")"]})]}),X==="quotes"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),X==="quotes"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:R.quotes.map((K,Se)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/quotes",{state:{quoteID:K.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-orange-600 mt-1",children:a.jsx(ga,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(K.quote_id?K.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:K.status||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Gi(K.presented_date)||""})]},`quote-${Se}`))})]}),(!R||(!R.tasks||R.tasks.length===0)&&(!R.meetings||R.meetings.length===0)&&(!R.calls||R.calls.length===0)&&(!R.quotes||R.quotes.length===0)&&(!R.deals||R.deals.length===0)&&(!R.contacts||R.contacts.length===0))&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No related activities found for this account."})})]})]})]}),a.jsx("div",{className:"flex flex-col gap-4",children:a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Contact"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!u?.email){alert("No email address available");return}const K=encodeURIComponent(u.email),Se=encodeURIComponent(""),G=encodeURIComponent(""),J=`mailto:${K}?subject=${Se}&body=${G}`;window.location.href=J},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Ka,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Contact"}}}),children:[a.jsx(_t,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Contact"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Gt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,U=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&a.jsx(zt,{message:"Loading contacts..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(La,{className:"mr-2 text-blue-600"})," Contacts Management"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{re(),ze(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(da,{className:"mr-2"})," Add Contact"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search contacts",value:z,onChange:K=>$(K.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:P,onChange:K=>O(K.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:Le.map(K=>a.jsx("option",{value:K.value,children:K.label},K.value??K.label))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 text-center w-12",children:a.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer",checked:ge.length>0&&Ne.length===ge.length,onChange:Ye})}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),a.jsx("th",{className:"py-3 px-4",children:"Department"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Created"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4 text-center w-24",children:Ne.length>0?a.jsx("button",{onClick:Ie,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${Ne.length} selected items`,children:a.jsx(Wt,{size:18})}):""})]})}),a.jsx("tbody",{children:r?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:9,children:"Loading contacts..."})}):pe.length>0?ge.map(K=>{const Se=[{Icon:Ka,value:K.email,key:"email"},{Icon:Et,value:K.work_phone,key:"work_phone"},{Icon:zc,value:K.mobile_phone_1,key:"mobile_phone_1"},{Icon:zc,value:K.mobile_phone_2,key:"mobile_phone_2"}].filter(G=>!!G.value);return a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:G=>{G.target.closest('input[type="checkbox"]')||G.target.closest("button")||(et(K),ne(K.id))},children:[a.jsx("td",{className:"py-3 px-4 text-center align-top",children:a.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer",checked:Ne.includes(K.id),onChange:()=>Ae(K.id)})}),a.jsxs("td",{className:"py-3 px-4 align-top",children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:_m(K)||"--"}),a.jsx("div",{className:"text-xs text-gray-500",children:K.title||"No title"})]}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[a.jsx(ix,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{className:"break-words",children:K.account?.name||"--"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",children:Se.length>0?a.jsx("div",{className:"space-y-1 text-gray-700",children:Se.map(({Icon:G,value:J,key:De})=>{const Ve=wt.createElement(G,{className:"text-gray-500 flex-shrink-0"});return a.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[Ve,a.jsx("span",{children:J})]},De)})}):a.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[a.jsx(Kt,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{children:K.department||"--"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[a.jsx(Zt,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{children:K.assigned_contact?`${K.assigned_contact.first_name} ${K.assigned_contact.last_name}`:"Unassigned"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[a.jsx(_t,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{className:"text-xs",children:Gi(K.created_at)||"--"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${K.status==="Inactive"?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:K.status||"Active"})}),a.jsx("td",{className:"py-3 px-4 align-top"})]},K.id)}):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:9,children:"No contacts found."})})})]})}),a.jsx(Jt,{className:"mt-4",totalItems:pe.length,pageSize:oe,currentPage:V,onPrev:fe,onNext:Te,onPageSizeChange:K=>{Z(K),de(1)},pageSizeOptions:[10,20,30,40,50],label:"contacts"})]}),Y=p?a.jsx("div",{id:"modalBackdrop",onClick:he,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:K=>K.stopPropagation(),children:[a.jsx("button",{onClick:()=>{Je(),ze(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:b||A,children:a.jsx(Vt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:v?"Edit Contact":"Add New Contact"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:ce,noValidate:!0,children:[a.jsx(hc,{label:"First Name",name:"first_name",value:E.first_name,onChange:Me,placeholder:"First name",required:!0,isSubmitted:dt}),a.jsx(hc,{label:"Last Name",name:"last_name",value:E.last_name,onChange:Me,placeholder:"Last name",required:!0,isSubmitted:dt}),a.jsx(B$,{label:"Account",value:E.account_id,onChange:K=>I(Se=>({...Se,account_id:K})),items:l||[],getLabel:K=>K?.name??"",placeholder:"Search account...",required:!0,isSubmitted:dt,disabled:b||l.length===0}),a.jsx(B$,{label:"Assigned To",value:E.assigned_to,onChange:K=>I(Se=>({...Se,assigned_to:K})),items:c||[],getLabel:K=>`${K?.first_name??""} ${K?.last_name??""} (${K?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:dt,disabled:b||c.length===0}),a.jsx(hc,{label:"Title",name:"title",value:E.title,onChange:Me,placeholder:"Job title",disabled:b}),a.jsx(hc,{label:"Department",name:"department",value:E.department,onChange:Me,placeholder:"Department",disabled:b}),a.jsx(hc,{label:"Email",name:"email",type:"email",value:E.email,onChange:Me,placeholder:"example@email.com",required:!0,isSubmitted:dt}),a.jsx(hc,{label:"Work Phone",name:"work_phone",value:E.work_phone,onChange:Me,placeholder:"09xx xxx xxxx",disabled:b}),a.jsx(hc,{label:"Mobile Phone 1",name:"mobile_phone_1",value:E.mobile_phone_1,onChange:Me,placeholder:"09xx xxx xxxx",disabled:b}),a.jsx(hc,{label:"Mobile Phone 2",name:"mobile_phone_2",value:E.mobile_phone_2,onChange:Me,placeholder:"09xx xxx xxxx",disabled:b}),a.jsx(Kve,{label:"Notes",name:"notes",value:E.notes,onChange:Me,placeholder:"Additional details...",rows:3,disabled:b,className:"md:col-span-2"}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:()=>{Je(),ze(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:b||A,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:b||A,children:b?"Saving...":v?"Update Contact":"Save Contact"})]})]})]})}):null,te=N?a.jsx(Qve,{open:!0,title:N.title,message:N.message,confirmLabel:N.confirmLabel,cancelLabel:N.cancelLabel,variant:N.variant,onConfirm:ye,onCancel:Ue,loading:A}):null;return a.jsxs(a.Fragment,{children:[U,M,Y,te]})}function hc({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,isSubmitted:c=!1,className:d=""}){const u=c&&!n?.trim();return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${d}
        `})]})}function B$({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!n;return a.jsxs("div",{className:o,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(Yve,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:l,hasError:u})]})}function Yve({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,hasError:o=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",w=h.useMemo(()=>{const b=u.trim().toLowerCase();return(b?e.filter(N=>(s(N)||"").toLowerCase().includes(b)):e).slice(0,l)},[e,u,s,l]);return h.useEffect(()=>{const b=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),h.useEffect(()=>{c||f("")},[c]),a.jsxs("div",{ref:p,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:c?u:v,placeholder:r,onFocus:()=>!i&&d(!0),onChange:b=>{f(b.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${o?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:w.length>0?w.map(b=>{const C=String(b.id),N=s(b),S=String(t)===C;return a.jsx("button",{type:"button",onClick:()=>{n(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:N||"--"},C)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function Kve({label:e,name:t,value:n,onChange:s,placeholder:r,rows:i=3,disabled:l=!1,className:o=""}){return a.jsxs("div",{className:o,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:s,placeholder:r,rows:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function Qve({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}const vS=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function YW({lead:e,onBack:t,fetchLeads:n,onEdit:s,onDelete:r,setSelectedLead:i,relatedActs:l}){const o=vt(),{leadID:c}=Eo(),[d,u]=h.useState(e||null),[f,p]=h.useState("Overview"),[x,v]=h.useState(""),w=d?.status?.toUpperCase()==="QUALIFIED",[b,C]=h.useState(null),[N,S]=h.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[A,k]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[_,T]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),E=async()=>{try{if(e){u(e),v(e.status||"New");return}if(!c)return;const O=await ie.get(`/leads/get/${c}`);u(O.data),v(O.data.status||"New"),S({name:O.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:O.data.territory?.id||null,assigned_to:O.data.assigned_to?.id||null,created_by:O.data.creator?.id||null}),k({last_name:O.data.last_name||"",first_name:O.data.first_name||"",account_id:null,title:O.data.title||"",department:O.data.department||"",email:O.data.email||"",work_phone:O.data.work_phone||"",mobile_phone_1:O.data.mobile_phone_1||"",mobile_phone_2:O.data.mobile_phone_2||"",notes:"",assigned_to:O.data.assigned_to?.id||null,created_by:O.data.creator?.id||null}),T({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:O.data.assigned_to?.id||null,created_by:O.data.creator?.id||null})}catch(O){console.error(O)}};h.useEffect(()=>{e?(u(e),v(e.status||"New")):c&&E()},[c,e]);const I=async()=>{try{if(x==="Converted"&&d?.status?.toUpperCase()!=="QUALIFIED"){H.error("Lead must be Qualified before it can be converted.");return}const O=await ie.put(`/leads/${d.id}/update/status`,{status:x});H.success("Lead status updated successfully");const B={...d,status:O.data.status};u(B),i&&i(B),n&&n(),t&&t()}catch(O){console.error(O),H.error("Failed to update lead status")}},z=async O=>{const B={...N,assigned_to:O.assigned_to?.id,billing_address:O.address,shipping_address:O.address,created_by:O.creator?.id,industry:null,name:O.company_name,phone_number:O.work_phone,status:"Prospect",territory_id:O.territory?.id,website:""};console.log("Account data: ",B),console.log("Contact data: ",A),console.log("Deal data: ",_),console.log("Lead data: ",O);try{const F=(await ie.post("/accounts/convertedLead",B)).data.id,ee={...A,account_id:F,assigned_to:O.assigned_to?.id,created_by:O.creator?.id,department:O.department,email:O.email,first_name:O.first_name,last_name:O.last_name,mobile_phone_1:O.mobile_phone_1,mobile_phone_2:O.mobile_phone_2,notes:O.notes,title:O.title,work_phone:O.work_phone},de=(await ie.post("/contacts/convertedLead",ee)).data.id,oe=()=>{switch(_.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},Z=_.amount&&_.amount!==""?parseFloat(_.amount):0,R={..._,account_id:F,assigned_to:O.assigned_to?.id,created_by:O.creator?.id,primary_contact_id:de,probability:oe(),stage:"Prospecting"},ve=await ie.post("/deals/convertedLead",R),X=await ie.put(`/leads/convert/${O.id}`);i&&i(null),n(),H.success("Lead converted successfully!"),t()}catch(Q){console.error("Error during conversion:",Q);const F=Q.response?.data?.detail||Q.message||"Failed to convert lead. Please try again.";H.error(F)}},$=O=>{switch((O||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},P=O=>O.toString().toLowerCase().replace(/\b\w/g,B=>B.toUpperCase());return d?a.jsx(a.Fragment,{children:a.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:a.jsxs("div",{className:"flex items-start justify-between w-full",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),a.jsx("button",{onClick:()=>{t?t():o(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:a.jsx(Ha,{size:25})})]})}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[d.first_name," ",d.last_name]}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${$(d.status)}`,children:P(d.status||"New")}),a.jsx("div",{className:"flex flex-col",children:a.jsx("button",{onClick:()=>z(d),disabled:!w,title:w?"Convert Lead":"Lead must be Qualified before converting",className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2
      ${w?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-400":"bg-gray-200 text-gray-400 cursor-not-allowed"}
    `,children:"Convert"})})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{type:"button",onClick:()=>{s&&d&&s(d)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[a.jsx(rn,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{type:"button",onClick:()=>{r&&d&&r(d)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[a.jsx(Wt,{className:"mr-2"}),"Delete"]})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-4 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(O=>a.jsx("button",{onClick:()=>p(O),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${f===O?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:O},O))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[f==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Name:"}),a.jsxs("p",{children:[d.first_name," ",d.last_name||"N/A"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Company:"}),a.jsx("p",{children:d.company_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Job Title:"}),a.jsx("p",{children:d.title||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Department:"}),a.jsx("p",{children:d.department||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:d.email||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Territory:"}),a.jsx("p",{children:d.territory?.name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:d.assigned_to?`${d.assigned_to.first_name} ${d.assigned_to.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:d.creator?`${d.creator.first_name} ${d.creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Work Phone:"}),a.jsx("p",{children:d.work_phone||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),a.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),a.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Source:"}),a.jsx("p",{children:d.source||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Address:"}),a.jsx("p",{children:d.address||"N/A"})]})]})}),f==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]})]}),f==="Activities"&&a.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[l.tasks&&l.tasks.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>C(b==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Gt,{className:"text-blue-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",l.tasks.length,")"]})]}),b==="tasks"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),b==="tasks"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:l.tasks.map((O,B)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>o("/admin/tasks",{state:{taskID:O.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-blue-600 mt-1",children:a.jsx(Gt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:O.subject||O.title||"Task"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:O.description||"No description"}),O.assigned_to&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned:"," ",O.assigned_to.first_name," ",O.assigned_to.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:vS(O.due_date||O.created_at)})]},`task-${B}`))})]}),l.meetings&&l.meetings.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>C(b==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_t,{className:"text-green-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",l.meetings.length,")"]})]}),b==="meetings"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),b==="meetings"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:l.meetings.map((O,B)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>o("/admin/meetings",{state:{meetingID:O.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-green-600 mt-1",children:a.jsx(_t,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:O.subject||O.title||"Meeting"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:O.description||O.location||"No description"}),O.host&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",O.host.first_name," ",O.host.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:vS(O.start_time||O.created_at)})]},`meeting-${B}`))})]}),l.calls&&l.calls.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>C(b==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Et,{className:"text-purple-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",l.calls.length,")"]})]}),b==="calls"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),b==="calls"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:l.calls.map((O,B)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>o("/admin/calls",{state:{callID:O.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-purple-600 mt-1",children:a.jsx(Et,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:O.subject||O.title||"Call"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:O.direction||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:vS(O.call_time||O.created_at)})]},`call-${B}`))})]}),(!l||(!l.tasks||l.tasks.length===0)&&(!l.meetings||l.meetings.length===0)&&(!l.calls||l.calls.length===0)&&(!l.quotes||l.quotes.length===0)&&(!l.deals||l.deals.length===0)&&(!l.contacts||l.contacts.length===0))&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No related activities found for this account."})})]})]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>{d&&o("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:d.title?`Call regarding ${d.title}`:`Call with ${d.first_name} ${d.last_name}`,relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assigned_to:d.assigned_to?.id?String(d.assigned_to.id):"",direction:"Outgoing",status:"Planned"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const O=encodeURIComponent(d.email),B=encodeURIComponent(""),Q=encodeURIComponent(""),F=`mailto:${O}?subject=${B}&body=${Q}`;window.location.href=F},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Ka,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{d&&o("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:d.title?`Meeting regarding ${d.title}`:`Meeting with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assigned_to:d.assigned_to?.id?String(d.assigned_to.id):"",status:"Planned"}}})},children:[a.jsx(_t,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>{d&&o("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:d.title?`Follow up on ${d.title}`:`Follow up with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assigned_to:d.assigned_to?.id?String(d.assigned_to.id):"",priority:"MEDIUM",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Gt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:x,onChange:O=>v(O.target.value),children:[a.jsx("option",{value:"New",children:"New"}),a.jsx("option",{value:"Contacted",children:"Contacted"}),a.jsx("option",{value:"Qualified",children:"Qualified"}),d?.status?.toUpperCase()==="QUALIFIED"&&a.jsx("option",{value:"Converted",children:"Converted"}),a.jsx("option",{value:"Lost",children:"Lost"})]}),a.jsx("button",{onClick:I,disabled:x===d.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${x===d.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const Xve=Lf.all(),wS=Xve.map((e,t)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${t}`})),Zve=e=>e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()),Jve=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},NS={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function ewe(){const e=vt(),{leadID:t}=Eo();ks();const[n,s]=h.useState(null),[r,i]=h.useState(!1),[l,o]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(!1),[v,w]=h.useState(""),[b,C]=h.useState("Filter by Status"),[N,S]=h.useState(""),[A,k]=h.useState(1),[_,T]=h.useState(10),[E,I]=h.useState(NS),[z,$]=h.useState(!1),[P,O]=h.useState(null),[B,Q]=h.useState(!1),[F,ee]=h.useState(null),[V,de]=h.useState(!1),[oe,Z]=h.useState([]),[R,ve]=h.useState({});h.useRef(null);const[X,je]=h.useState(!1),[Ne,Oe]=h.useState(null),[Fe,me]=h.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[Be,Pe]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[we,ne]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});h.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const Le=async()=>{try{const G=await ie.get("/leads/getUsers");o(G.data)}catch(G){console.error(`Error fetching users: ${G}`)}},pe=async()=>{x(!0);try{const G=await ie.get("/leads/admin/getLeads");f(G.data),console.log(G.data)}catch(G){console.error(`Error fetching leads: ${G}`)}finally{x(!1)}};h.useEffect(()=>{Le(),pe()},[]),h.useEffect(()=>{if(t&&u.length>0&&!r&&!z){const G=u.find(J=>J.id===Number(t));G&&s(G)}else!t&&!n&&s(null)},[t,u,r,z]),h.useEffect(()=>{if(Ne){const J=(ft=>{if(!ft)return{code:"+63",number:""};const bt=ft.match(/^(\+\d+)\s(.+)$/);if(bt)return{code:bt[1],number:bt[2]};if(ft.startsWith("+")){const jt=ft.match(/^(\+\d{1,3})/);if(jt)return{code:jt[1],number:ft.substring(jt[1].length).trim()}}return{code:"+63",number:ft}})(Ne.work_phone),De=[];Ne.work_phone&&De.push(`Work: ${Ne.work_phone}`),Ne.mobile_phone_1&&De.push(`Mobile 1: ${Ne.mobile_phone_1}`),Ne.mobile_phone_2&&De.push(`Mobile 2: ${Ne.mobile_phone_2}`);const Ve=De.length>0?De.join(" | "):"";me({name:Ne.company_name||"",website:"",countryCode:J.code,phone_number:J.number,combinedPhoneNumbers:Ve,billing_address:Ne.address||"",shipping_address:Ne.address||"",industry:"",status:"Prospect",territory_id:Ne.assigned_to?.territory?.id||null,assigned_to:Ne.assigned_to?.id||null,created_by:Ne.creator?.id||null}),Pe({last_name:Ne.last_name||"",first_name:Ne.first_name||"",account_id:null,title:Ne.title||"",department:Ne.department||"",email:Ne.email||"",work_phone:Ne.work_phone||"",mobile_phone_1:Ne.mobile_phone_1||"",mobile_phone_2:Ne.mobile_phone_2||"",notes:Ne.notes||"",assigned_to:Ne.assigned_to?.id||null,created_by:Ne.creator?.id||null}),ne({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:Ne.assigned_to?.id||null,created_by:Ne.creator?.id||null})}},[Ne]);const le=G=>w(G.target.value),ge=h.useMemo(()=>{let G=[...u];const J=v.trim().toLowerCase();J&&(G=G.filter(Ve=>[Ve?.first_name,Ve?.last_name,Ve?.company_name,Ve?.title,Ve?.email,Ve?.work_phone,Ve?.assigned_to?`${Ve.assigned_to.first_name} ${Ve.assigned_to.last_name}`:""].some(bt=>bt&&bt.toString().toLowerCase().includes(J))));const De=b.trim().toUpperCase();return De&&De!=="FILTER BY STATUS"?G=G.filter(Ve=>(Ve.status?Ve.status.toUpperCase():"")===De):G=G.filter(Ve=>(Ve.status?Ve.status.toUpperCase():"")!=="CONVERTED"),N&&G.sort((Ve,ft)=>{const bt=`${Ve.first_name} ${Ve.last_name}`,jt=`${ft.first_name} ${ft.last_name}`;return N==="asc"?bt.localeCompare(jt):jt.localeCompare(bt)}),G},[u,v,b,N]),fe=Math.max(1,Math.ceil(ge.length/_)||1);h.useEffect(()=>{k(1)},[v,b]),h.useEffect(()=>{k(G=>{const J=Math.max(1,Math.ceil(ge.length/_)||1);return G>J?J:G})},[ge.length,_]);const Te=h.useMemo(()=>{const G=(A-1)*_;return ge.slice(G,G+_)},[ge,A,_]),Ye=()=>k(G=>Math.max(G-1,1)),Ae=()=>k(G=>Math.min(G+1,fe)),Ie=G=>{T(G),k(1)},Je=h.useCallback(async G=>{try{const J=await ie.get(`/activities/lead/${G}`);ve(J.data&&typeof J.data=="object"?J.data:{})}catch(J){console.error(J),J.response?.status===404&&(console.warn("No activities found for this account."),ve({}))}},[]),he=G=>{s(G),Je(G.id)},Me=()=>{s(null),t&&e("/admin/leads",{replace:!0})},re=()=>{i(!1),I(NS),$(!1),O(null),Q(!1),d(null),sessionStorage.removeItem("editLeadData")},Qe=G=>{G.target.id==="modalBackdrop"&&re()},We=()=>{I(NS),$(!1),O(null),d(null),i(!0)},dt=G=>{if(!G){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",G),console.log("Current state - leadID:",t,"selectedLead:",n,"showModal:",r);const J=jt=>{if(!jt)return{code:"+63",number:""};const ke=jt.match(/^(\+\d+)\s(.+)$/);return ke?{code:ke[1],number:ke[2]}:{code:"+63",number:jt}},De=J(G.work_phone),Ve=J(G.mobile_phone_1),ft=J(G.mobile_phone_2);let bt="";if(G.assigned_to){bt=String(G.assigned_to.id);const jt=l?.find(ke=>ke.id===G.assigned_to.id);d(jt)}I({first_name:G.first_name||"",last_name:G.last_name||"",company_name:G.company_name||"",title:G.title||"",department:G.department||"",email:G.email||"",work_ccode:De.code,work_phone:De.number,m1_ccode:Ve.code,mobile_phone_1:Ve.number,m2_ccode:ft.code,mobile_phone_2:ft.number,address:G.address||"",notes:G.notes||"",source:G.source||"",territory_id:G.territory?.id||null,lead_owner:bt,status:G.status||"New"}),$(!0),O(G.id),n?(console.log("Coming from detail view - closing detail modal and showing edit form"),s(null),i(!0)):(console.log("Already in list view - showing modal"),i(!0))},ze=G=>{if(!G){console.error("handleDelete: lead is null or undefined");return}console.log("handleDelete called with lead:",G);const J=`${G.first_name} ${G.last_name}`||"this lead";ee({title:"Delete Lead",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:J}),"? This action cannot be undone."]}),confirmLabel:"Delete Lead",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:G.id,name:J}})},ce=G=>{const{name:J,value:De}=G.target;if(I(Ve=>({...Ve,[J]:De})),J==="lead_owner"){const Ve=l.find(ft=>ft.id===parseInt(De));d(Ve)}},[ye,Ue]=h.useState(!1),et=G=>{if(G.preventDefault(),Ue(!0),!E.last_name?.trim()){H.error("Last name is required.");return}if(!E.company_name?.trim()){H.error("Company is required.");return}if(!E.title?.trim()){H.error("Job title is required.");return}if(!E.email?.trim()){H.error("Email is required.");return}if(!E.email.includes("@")){H.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(E.email)){H.error("Please enter a valid email address with a dot in the domain.");return}if(!E.lead_owner){H.error("Please assign a lead owner.");return}const De={...E,territory_id:E.territory_id?parseInt(E.territory_id):null,lead_owner:parseInt(E.lead_owner),work_phone:`${E.work_ccode} ${E.work_phone}`,mobile_phone_1:`${E.m1_ccode} ${E.mobile_phone_1}`,mobile_phone_2:`${E.m2_ccode} ${E.mobile_phone_2}`},Ve=z&&P?"update":"create",ft=`${E.first_name} ${E.last_name}`;ee({title:Ve==="create"?"Confirm New Lead":"Confirm Update",message:Ve==="create"?a.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",a.jsx("span",{className:"font-semibold",children:ft}),"?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:ft}),"?"]}),confirmLabel:Ve==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:Ve,payload:De,targetId:P||null,name:ft}})},lt=G=>{if(G.target.checked){const J=Te.map(De=>De.id);Z(J)}else Z([])},Ee=G=>{Z(J=>J.includes(G)?J.filter(De=>De!==G):[...J,G])},tt=async()=>{oe.length!==0&&ee({title:"Delete Leads",message:a.jsxs("span",{children:["Are you sure you want to delete"," ",a.jsx("span",{className:"font-semibold",children:oe.length})," selected leads? This action cannot be undone."]}),confirmLabel:`Delete ${oe.length} Lead(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",leadIds:oe}})},be=async()=>{if(!F?.action){ee(null);return}const{action:G}=F,{type:J,payload:De,targetId:Ve,name:ft,lead:bt,leadIds:jt}=G;console.log(De),de(!0);try{if(J==="create")Q(!0),await ie.post("/leads/create",De),H.success(`Lead "${ft}" created successfully.`),re(),await pe();else if(J==="update"){if(!Ve)throw new Error("Missing lead identifier for update.");Q(!0);const ke=await ie.put(`/leads/${Ve}`,De);H.success(`Lead "${ft}" updated successfully.`),n&&n.id===Ve&&s(null),re(),await pe()}else if(J==="delete"){if(!Ve)throw new Error("Missing lead identifier for deletion.");await ie.delete(`/leads/${Ve}`),H.success(`Lead "${ft}" deleted successfully.`),n?.id===Ve&&s(null),await pe()}else J==="bulk-delete"&&(await ie.delete("/leads/admin/bulk-delete",{data:{lead_ids:jt}}),H.success(`Successfully deleted ${jt.length} leads`),Z([]),await pe())}catch(ke){console.error(ke);const pt=J==="create"?"Failed to create lead. Please review the details and try again.":J==="update"?"Failed to update lead. Please review the details and try again.":"Failed to delete lead. Please try again.",_e=ke.response?.data?.detail||pt;H.error(_e)}finally{(J==="create"||J==="update")&&Q(!1),J!=="edit"&&(de(!1),ee(null))}},Xe=()=>{V||ee(null)},M=u.filter(G=>G.status==="New").length,U=u.filter(G=>G.status==="Contacted").length,Y=u.filter(G=>G.status==="Qualified").length,te=u.filter(G=>G.status==="Converted").length,K=u.filter(G=>G.status==="Lost").length,Se=[{title:"New",value:M,icon:Ba,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:U,icon:Et,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:Y,icon:xn,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:te,icon:ko,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:K,icon:Ts,color:"text-red-600",bgColor:"bg-red-100"}];return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[p&&a.jsx(zt,{message:"Loading leads..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(Ba,{className:"mr-2 text-blue-600"}),"Leads"]}),a.jsxs("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:[a.jsxs("button",{onClick:()=>{H.info("Download functionality coming soon")},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(To,{className:"mr-2"})," Download"]}),a.jsxs("button",{onClick:()=>{We(),Ue(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(da,{className:"mr-2"})," Add Lead"]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Se.map(G=>a.jsx(awe,{...G},G.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search leads",value:v,onChange:le,className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:b,onChange:G=>C(G.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),a.jsx("option",{value:"New",children:"New"}),a.jsx("option",{value:"Contacted",children:"Contacted"}),a.jsx("option",{value:"Qualified",children:"Qualified"}),a.jsx("option",{value:"Converted",children:"Converted"}),a.jsx("option",{value:"Lost",children:"Lost"})]})}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:N,onChange:G=>S(G.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"",children:"Sort by Name"}),a.jsx("option",{value:"asc",children:"A-Z"}),a.jsx("option",{value:"desc",children:"Z-A"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-10",children:a.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:Te.length>0&&Te.every(G=>oe.includes(G.id)),onChange:lt})}),a.jsx("th",{className:"py-3 px-4",children:"Name"}),a.jsx("th",{className:"py-3 px-4",children:"Company"}),a.jsx("th",{className:"py-3 px-4",children:"Job Title"}),a.jsx("th",{className:"py-3 px-4",children:"Email"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4 text-center w-24",children:oe.length>0?a.jsx("button",{onClick:tt,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${oe.length} selected leads`,children:a.jsx(Wt,{size:18})}):""})]})}),a.jsx("tbody",{children:ge.length>0?Te.map(G=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",children:[a.jsx("td",{className:"py-3 px-4",onClick:J=>J.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:oe.includes(G.id),onChange:()=>Ee(G.id)})}),a.jsx("td",{className:"py-3 px-4",onClick:()=>he(G),children:a.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[G.first_name," ",G.last_name]})}),a.jsx("td",{className:"py-3 px-4",onClick:()=>he(G),children:a.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:G.company_name||"--"})}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",onClick:()=>he(G),children:G.title||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",onClick:()=>he(G),children:G.email||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",onClick:()=>he(G),children:G.assigned_to?`${G.assigned_to.first_name} ${G.assigned_to.last_name}`:"--"}),a.jsx("td",{className:"py-3 px-4",onClick:()=>he(G),children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Jve(G.status||"New")}`,children:Zve(G.status||"New")})}),a.jsx("td",{})]},G.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No leads found."})})})]})}),a.jsx(Jt,{className:"mt-4",totalItems:ge.length,pageSize:_,currentPage:A,onPrev:Ye,onNext:Ae,onPageSizeChange:Ie,label:"leads"}),r&&a.jsx("div",{id:"modalBackdrop",onClick:Qe,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:G=>G.stopPropagation(),children:[a.jsx("button",{onClick:()=>{re(),Ue(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(Vt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:z?"Edit Lead":"Add New Lead"}),a.jsxs("form",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),a.jsx("input",{type:"text",name:"first_name",value:E.first_name,onChange:ce,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Last Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"last_name",placeholder:"Smith",value:E.last_name,onChange:ce,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
              ${ye&&!E.last_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
          focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Company ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:E.company_name,onChange:ce,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${ye&&!E.company_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Job Title",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:E.title,onChange:ce,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${ye&&!E.title?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),a.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:E.department,onChange:ce,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Email",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:E.email,onChange:ce,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${ye&&!E.email?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"work_ccode",value:E.work_ccode,onChange:ce,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:wS.map(G=>a.jsx("option",{value:G.code,children:G.code},G.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:E.work_phone,onChange:ce,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"m1_ccode",value:E.m1_ccode,onChange:ce,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:wS.map(G=>a.jsx("option",{value:G.code,children:G.code},G.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:E.mobile_phone_1,onChange:ce,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"m2_ccode",value:E.m2_ccode,onChange:ce,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:wS.map(G=>a.jsx("option",{value:G.code,children:G.code},G.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:E.mobile_phone_2,onChange:ce,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),a.jsx("input",{type:"text",name:"address",value:E.address,onChange:ce,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("div",{className:`w-full rounded-lg ${ye&&!E.lead_owner?"border border-red-400":"border border-gray-300"}`,children:a.jsx(nwe,{items:Array.isArray(l)?l:[],value:E.lead_owner??"",placeholder:"Search a user...",getLabel:G=>`${G.first_name} ${G.last_name}`,onChange:G=>{const J=l.find(Ve=>String(Ve.id)===String(G));d(J);let De=null;J&&J.assigned_territory&&J.assigned_territory.length===1&&(De=J.assigned_territory[0].id),I(Ve=>({...Ve,lead_owner:G,territory_id:De}))}})})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),a.jsxs("select",{name:"territory_id",value:E.territory_id||"",onChange:ce,disabled:!c||!c.assigned_territory||c.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[a.jsx("option",{value:"",disabled:!0,children:c?c.assigned_territory&&c.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),c&&c.assigned_territory&&c.assigned_territory.map(G=>a.jsx("option",{value:G.id,children:G.name},G.id))]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),a.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:E.source,onChange:ce,children:[a.jsx("option",{value:"",disabled:!0,children:"Select Source"}),a.jsx("option",{value:"Website",children:"Website"}),a.jsx("option",{value:"Referral",children:"Referral"}),a.jsx("option",{value:"Cold call",children:"Cold call"}),a.jsx("option",{value:"Event",children:"Event"}),a.jsx("option",{value:"Other",children:"Other"})]})]}),a.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),a.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:E.notes,onChange:ce,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("button",{type:"button",onClick:()=>{re(),Ue(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:B||V,children:"Cancel"}),a.jsx("button",{type:"submit",onClick:et,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:B||V,children:B||V?"Processing...":z?"Update Lead":"Save Lead"})]})]})]})}),F&&a.jsx(twe,{open:!0,title:F.title,message:F.message,confirmLabel:F.confirmLabel,cancelLabel:F.cancelLabel,variant:F.variant,onConfirm:be,onCancel:Xe,loading:V}),n&&!r&&!z&&a.jsx(YW,{relatedActs:R,lead:n,onBack:Me,fetchLeads:pe,setSelectedLead:s,onEdit:dt,onDelete:ze})]})}function twe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}function awe({icon:e,title:t,value:n,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function nwe({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200}){const[o,c]=h.useState(!1),[d,u]=h.useState(""),f=h.useRef(null),p=e.find(w=>String(w.id)===String(t)),x=p?s(p):"",v=h.useMemo(()=>{const w=d.trim().toLowerCase();return(w?e.filter(C=>(s(C)||"").toLowerCase().includes(w)):e).slice(0,l)},[e,d,s,l]);return h.useEffect(()=>{const w=b=>{f.current&&!f.current.contains(b.target)&&c(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{o||u("")},[o]),a.jsxs("div",{ref:f,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:o?d:x,placeholder:r,onFocus:()=>!i&&c(!0),onChange:w=>{u(w.target.value),o||c(!0)},className:"w-full rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),o&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:v.length>0?v.map(w=>{const b=String(w.id),C=s(w),N=String(t)===b;return a.jsx("button",{type:"button",onClick:()=>{n(b),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${N?"bg-blue-50":""}`,children:C||"--"},b)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}let swe={data:""},rwe=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||swe},iwe=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,lwe=/\/\*[^]*?\*\/|  +/g,H$=/\n+/g,Cc=(e,t)=>{let n="",s="",r="";for(let i in e){let l=e[i];i[0]=="@"?i[1]=="i"?n=i+" "+l+";":s+=i[1]=="f"?Cc(l,i):i+"{"+Cc(l,i[1]=="k"?"":t)+"}":typeof l=="object"?s+=Cc(l,t?t.replace(/([^,])+/g,o=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,o):o?o+" "+c:c)):i):l!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=Cc.p?Cc.p(i,l):i+":"+l+";")}return n+(t&&r?t+"{"+r+"}":r)+s},Vl={},KW=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+KW(e[n]);return t}return e},owe=(e,t,n,s,r)=>{let i=KW(e),l=Vl[i]||(Vl[i]=(c=>{let d=0,u=11;for(;d<c.length;)u=101*u+c.charCodeAt(d++)>>>0;return"go"+u})(i));if(!Vl[l]){let c=i!==e?e:(d=>{let u,f,p=[{}];for(;u=iwe.exec(d.replace(lwe,""));)u[4]?p.shift():u[3]?(f=u[3].replace(H$," ").trim(),p.unshift(p[0][f]=p[0][f]||{})):p[0][u[1]]=u[2].replace(H$," ").trim();return p[0]})(e);Vl[l]=Cc(r?{["@keyframes "+l]:c}:c,n?"":"."+l)}let o=n&&Vl.g?Vl.g:null;return n&&(Vl.g=Vl[l]),((c,d,u,f)=>{f?d.data=d.data.replace(f,c):d.data.indexOf(c)===-1&&(d.data=u?c+d.data:d.data+c)})(Vl[l],t,s,o),l},cwe=(e,t,n)=>e.reduce((s,r,i)=>{let l=t[i];if(l&&l.call){let o=l(n),c=o&&o.props&&o.props.className||/^go/.test(o)&&o;l=c?"."+c:o&&typeof o=="object"?o.props?"":Cc(o,""):o===!1?"":o}return s+r+(l??"")},"");function gN(e){let t=this||{},n=e.call?e(t.p):e;return owe(n.unshift?n.raw?cwe(n,[].slice.call(arguments,1),t.p):n.reduce((s,r)=>Object.assign(s,r&&r.call?r(t.p):r),{}):n,rwe(t.target),t.g,t.o,t.k)}let QW,_E,AE;gN.bind({g:1});let No=gN.bind({k:1});function dwe(e,t,n,s){Cc.p=t,QW=e,_E=n,AE=s}function td(e,t){let n=this||{};return function(){let s=arguments;function r(i,l){let o=Object.assign({},i),c=o.className||r.className;n.p=Object.assign({theme:_E&&_E()},o),n.o=/ *go\d+/.test(c),o.className=gN.apply(n,s)+(c?" "+c:"");let d=e;return e[0]&&(d=o.as||e,delete o.as),AE&&d[0]&&AE(o),QW(d,o)}return r}}var uwe=e=>typeof e=="function",nv=(e,t)=>uwe(e)?e(t):e,mwe=(()=>{let e=0;return()=>(++e).toString()})(),XW=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),fwe=20,zL="default",ZW=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,n)};case 1:return{...e,toasts:e.toasts.map(l=>l.id===t.toast.id?{...l,...t.toast}:l)};case 2:let{toast:s}=t;return ZW(e,{type:e.toasts.find(l=>l.id===s.id)?1:0,toast:s});case 3:let{toastId:r}=t;return{...e,toasts:e.toasts.map(l=>l.id===r||r===void 0?{...l,dismissed:!0,visible:!1}:l)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(l=>l.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(l=>({...l,pauseDuration:l.pauseDuration+i}))}}},pb=[],JW={toasts:[],pausedAt:void 0,settings:{toastLimit:fwe}},ll={},eV=(e,t=zL)=>{ll[t]=ZW(ll[t]||JW,e),pb.forEach(([n,s])=>{n===t&&s(ll[t])})},tV=e=>Object.keys(ll).forEach(t=>eV(e,t)),hwe=e=>Object.keys(ll).find(t=>ll[t].toasts.some(n=>n.id===e)),pN=(e=zL)=>t=>{eV(t,e)},gwe={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},pwe=(e={},t=zL)=>{let[n,s]=h.useState(ll[t]||JW),r=h.useRef(ll[t]);h.useEffect(()=>(r.current!==ll[t]&&s(ll[t]),pb.push([t,s]),()=>{let l=pb.findIndex(([o])=>o===t);l>-1&&pb.splice(l,1)}),[t]);let i=n.toasts.map(l=>{var o,c,d;return{...e,...e[l.type],...l,removeDelay:l.removeDelay||((o=e[l.type])==null?void 0:o.removeDelay)||e?.removeDelay,duration:l.duration||((c=e[l.type])==null?void 0:c.duration)||e?.duration||gwe[l.type],style:{...e.style,...(d=e[l.type])==null?void 0:d.style,...l.style}}});return{...n,toasts:i}},xwe=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:n?.id||mwe()}),lx=e=>(t,n)=>{let s=xwe(t,e,n);return pN(s.toasterId||hwe(s.id))({type:2,toast:s}),s.id},Vn=(e,t)=>lx("blank")(e,t);Vn.error=lx("error");Vn.success=lx("success");Vn.loading=lx("loading");Vn.custom=lx("custom");Vn.dismiss=(e,t)=>{let n={type:3,toastId:e};t?pN(t)(n):tV(n)};Vn.dismissAll=e=>Vn.dismiss(void 0,e);Vn.remove=(e,t)=>{let n={type:4,toastId:e};t?pN(t)(n):tV(n)};Vn.removeAll=e=>Vn.remove(void 0,e);Vn.promise=(e,t,n)=>{let s=Vn.loading(t.loading,{...n,...n?.loading});return typeof e=="function"&&(e=e()),e.then(r=>{let i=t.success?nv(t.success,r):void 0;return i?Vn.success(i,{id:s,...n,...n?.success}):Vn.dismiss(s),r}).catch(r=>{let i=t.error?nv(t.error,r):void 0;i?Vn.error(i,{id:s,...n,...n?.error}):Vn.dismiss(s)}),e};var ywe=1e3,bwe=(e,t="default")=>{let{toasts:n,pausedAt:s}=pwe(e,t),r=h.useRef(new Map).current,i=h.useCallback((f,p=ywe)=>{if(r.has(f))return;let x=setTimeout(()=>{r.delete(f),l({type:4,toastId:f})},p);r.set(f,x)},[]);h.useEffect(()=>{if(s)return;let f=Date.now(),p=n.map(x=>{if(x.duration===1/0)return;let v=(x.duration||0)+x.pauseDuration-(f-x.createdAt);if(v<0){x.visible&&Vn.dismiss(x.id);return}return setTimeout(()=>Vn.dismiss(x.id,t),v)});return()=>{p.forEach(x=>x&&clearTimeout(x))}},[n,s,t]);let l=h.useCallback(pN(t),[t]),o=h.useCallback(()=>{l({type:5,time:Date.now()})},[l]),c=h.useCallback((f,p)=>{l({type:1,toast:{id:f,height:p}})},[l]),d=h.useCallback(()=>{s&&l({type:6,time:Date.now()})},[s,l]),u=h.useCallback((f,p)=>{let{reverseOrder:x=!1,gutter:v=8,defaultPosition:w}=p||{},b=n.filter(S=>(S.position||w)===(f.position||w)&&S.height),C=b.findIndex(S=>S.id===f.id),N=b.filter((S,A)=>A<C&&S.visible).length;return b.filter(S=>S.visible).slice(...x?[N+1]:[0,N]).reduce((S,A)=>S+(A.height||0)+v,0)},[n]);return h.useEffect(()=>{n.forEach(f=>{if(f.dismissed)i(f.id,f.removeDelay);else{let p=r.get(f.id);p&&(clearTimeout(p),r.delete(f.id))}})},[n,i]),{toasts:n,handlers:{updateHeight:c,startPause:o,endPause:d,calculateOffset:u}}},vwe=No`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,wwe=No`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Nwe=No`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,jwe=td("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${vwe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${wwe} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Nwe} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Cwe=No`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Swe=td("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${Cwe} 1s linear infinite;
`,_we=No`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Awe=No`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Ewe=td("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${_we} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Awe} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Twe=td("div")`
  position: absolute;
`,kwe=td("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Lwe=No`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Pwe=td("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Lwe} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Dwe=({toast:e})=>{let{icon:t,type:n,iconTheme:s}=e;return t!==void 0?typeof t=="string"?h.createElement(Pwe,null,t):t:n==="blank"?null:h.createElement(kwe,null,h.createElement(Swe,{...s}),n!=="loading"&&h.createElement(Twe,null,n==="error"?h.createElement(jwe,{...s}):h.createElement(Ewe,{...s})))},Owe=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Mwe=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,Iwe="0%{opacity:0;} 100%{opacity:1;}",$we="0%{opacity:1;} 100%{opacity:0;}",Rwe=td("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,zwe=td("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Uwe=(e,t)=>{let n=e.includes("top")?1:-1,[s,r]=XW()?[Iwe,$we]:[Owe(n),Mwe(n)];return{animation:t?`${No(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${No(r)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Fwe=h.memo(({toast:e,position:t,style:n,children:s})=>{let r=e.height?Uwe(e.position||t||"top-center",e.visible):{opacity:0},i=h.createElement(Dwe,{toast:e}),l=h.createElement(zwe,{...e.ariaProps},nv(e.message,e));return h.createElement(Rwe,{className:e.className,style:{...r,...n,...e.style}},typeof s=="function"?s({icon:i,message:l}):h.createElement(h.Fragment,null,i,l))});dwe(h.createElement);var Bwe=({id:e,className:t,style:n,onHeightUpdate:s,children:r})=>{let i=h.useCallback(l=>{if(l){let o=()=>{let c=l.getBoundingClientRect().height;s(e,c)};o(),new MutationObserver(o).observe(l,{subtree:!0,childList:!0,characterData:!0})}},[e,s]);return h.createElement("div",{ref:i,className:t,style:n},r)},Hwe=(e,t)=>{let n=e.includes("top"),s=n?{top:0}:{bottom:0},r=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:XW()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...s,...r}},Gwe=gN`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,fy=16,ox=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:s,children:r,toasterId:i,containerStyle:l,containerClassName:o})=>{let{toasts:c,handlers:d}=bwe(n,i);return h.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:fy,left:fy,right:fy,bottom:fy,pointerEvents:"none",...l},className:o,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map(u=>{let f=u.position||t,p=d.calculateOffset(u,{reverseOrder:e,gutter:s,defaultPosition:t}),x=Hwe(f,p);return h.createElement(Bwe,{id:u.id,key:u.id,onHeightUpdate:d.updateHeight,className:u.visible?Gwe:"",style:x},u.type==="custom"?nv(u.message,u):r?r(u):h.createElement(Fwe,{toast:u,position:f}))}))},cx=Vn;function Wwe(){h.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,t]=h.useState(null),[n,s]=h.useState(""),[r,i]=h.useState("Filter by Actions"),[l,o]=h.useState(1),[c,d]=h.useState(10),u=async()=>{try{const N=await ie.get("/logs/read-all");t(N.data)}catch(N){console.error("Error fetching audit logs:",N)}};h.useEffect(()=>{u()},[]);const f=h.useMemo(()=>{if(!Array.isArray(e))return[];const N=n.trim().toLowerCase(),S=r?.toUpperCase?.()||"ALL";return e.filter(k=>{const _=k.timestamp?new Date(k.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",T=`${k.entity_type||""} ${k.entity_name||k.entity_details?.name||k.entity_details?.title||k.entity_id||""}`,E=`${k.logger?.first_name||""} ${k.logger?.last_name||""}`,I=[_,E,k.action,k.entity_type,T,k.description],z=N===""||I.some(P=>P==null?!1:P.toString().toLowerCase().includes(N)),$=S==="FILTER BY ACTIONS"||(k.action||"").toUpperCase()===S;return z&&$}).sort((k,_)=>{const T=k.timestamp?new Date(k.timestamp).getTime():0;return(_.timestamp?new Date(_.timestamp).getTime():0)-T})},[e,n,r]),p=Math.max(1,Math.ceil(f.length/c)||1);h.useEffect(()=>{o(1)},[n,r]),h.useEffect(()=>{o(N=>{const S=Math.max(1,Math.ceil(f.length/c)||1);return N>S?S:N})},[f.length,c]);const x=h.useMemo(()=>{const N=(l-1)*c;return f.slice(N,N+c)},[f,l,c]);f.length===0||(l-1)*c+1,Math.min(l*c,f.length);const v=()=>o(N=>Math.max(N-1,1)),w=()=>o(N=>Math.min(N+1,p)),b=()=>{if(!f.length){cx.error("No logs to export!");return}const N=["Timestamp","User","Action","Resource","Details"],S=f.map(E=>[new Date(E.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${E.logger?.first_name||""} ${E.logger?.last_name||""}`.trim(),E.action,`${E.entity_type}: ${E.entity_id}`,E.description||""]),A=[N.join(","),...S.map(E=>E.map(I=>`"${String(I).replace(/"/g,'""')}"`).join(","))].join(`
`),k=new Blob([A],{type:"text/csv;charset=utf-8;"}),_=URL.createObjectURL(k),T=document.createElement("a");T.href=_,T.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(T),T.click(),document.body.removeChild(T),URL.revokeObjectURL(_)},C=N=>{switch((N||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&a.jsx(zt,{message:"Loading audit logs..."}),a.jsx(ox,{toastOptions:{duration:1e3}}),a.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[a.jsx(_t,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),a.jsxs("p",{className:"text-sm text-blue-700",children:[a.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ys,{className:"text-blue-600",size:20}),a.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:b,children:[a.jsx(To,{className:"mr-2"}),"Export Logs"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[a.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search audit logs",value:n,onChange:N=>s(N.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:r,onChange:N=>i(N.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),a.jsx("option",{value:"CREATE",children:"CREATE"}),a.jsx("option",{value:"DELETE",children:"DELETE"}),a.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),a.jsx("th",{className:"py-3 px-4",children:"User"}),a.jsx("th",{className:"py-3 px-4",children:"Action"}),a.jsx("th",{className:"py-3 px-4",children:"Resource"}),a.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),a.jsx("tbody",{children:Array.isArray(f)&&f.length>0?x.map((N,S)=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(N.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),a.jsx("td",{className:"py-3 px-4 text-gray-700",children:N.name}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${C(N.action)}`,children:N.action})}),a.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[N.entity_type,": ",N.entity_id]}),a.jsx("td",{className:"py-3 px-4 text-gray-700",children:N.description})]},S)):a.jsx("tr",{children:a.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),a.jsx(Jt,{className:"mt-4",totalItems:f.length,pageSize:c,currentPage:l,onPrev:v,onNext:w,onPageSizeChange:N=>{d(N),o(1)},pageSizeOptions:[10,20,30,40,50],label:"logs"})]})}var Vwe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function UL(e){if(typeof e!="string")return!1;var t=Vwe;return t.includes(e)}var qwe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Ywe=new Set(qwe);function aV(e){return typeof e!="string"?!1:Ywe.has(e)}function nV(e){return typeof e=="string"&&e.startsWith("data-")}function kr(e){if(typeof e!="object"||e===null)return{};var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(aV(n)||nV(n))&&(t[n]=e[n]);return t}function mu(e){if(e==null)return null;if(h.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return kr(t)}return typeof e=="object"&&!Array.isArray(e)?kr(e):null}function $s(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(aV(n)||nV(n)||UL(n))&&(t[n]=e[n]);return t}function Kwe(e){return e==null?null:h.isValidElement(e)?$s(e.props):typeof e=="object"&&!Array.isArray(e)?$s(e):null}var Qwe=["children","width","height","viewBox","className","style","title","desc"];function EE(){return EE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},EE.apply(null,arguments)}function Xwe(e,t){if(e==null)return{};var n,s,r=Zwe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Zwe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}var FL=h.forwardRef((e,t)=>{var{children:n,width:s,height:r,viewBox:i,className:l,style:o,title:c,desc:d}=e,u=Xwe(e,Qwe),f=i||{width:s,height:r,x:0,y:0},p=Tt("recharts-surface",l);return h.createElement("svg",EE({},$s(u),{className:p,width:s,height:r,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),h.createElement("title",null,c),h.createElement("desc",null,d),n)}),Jwe=["children","className"];function TE(){return TE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},TE.apply(null,arguments)}function eNe(e,t){if(e==null)return{};var n,s,r=tNe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function tNe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}var ls=h.forwardRef((e,t)=>{var{children:n,className:s}=e,r=eNe(e,Jwe),i=Tt("recharts-layer",s);return h.createElement("g",TE({className:i},$s(r),{ref:t}),n)}),sV=h.createContext(null),aNe=()=>h.useContext(sV),jS={},CS={},G$;function nNe(){return G$||(G$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(CS)),CS}var SS={},W$;function rV(){return W$||(W$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(SS)),SS}var _S={},V$;function BL(){return V$||(V$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}e.toKey=t})(_S)),_S}var AS={},ES={},q$;function sNe(){return q$||(q$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(t).join(",");const s=String(n);return s==="0"&&Object.is(Number(n),-0)?"-0":s}e.toString=t})(ES)),ES}var Y$;function HL(){return Y$||(Y$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sNe(),n=BL();function s(r){if(Array.isArray(r))return r.map(n.toKey);if(typeof r=="symbol")return[r];r=t.toString(r);const i=[],l=r.length;if(l===0)return i;let o=0,c="",d="",u=!1;for(r.charCodeAt(0)===46&&(i.push(""),o++);o<l;){const f=r[o];d?f==="\\"&&o+1<l?(o++,c+=r[o]):f===d?d="":c+=f:u?f==='"'||f==="'"?d=f:f==="]"?(u=!1,i.push(c),c=""):c+=f:f==="["?(u=!0,c&&(i.push(c),c="")):f==="."?c&&(i.push(c),c=""):c+=f,o++}return c&&i.push(c),i}e.toPath=s})(AS)),AS}var K$;function GL(){return K$||(K$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nNe(),n=rV(),s=BL(),r=HL();function i(o,c,d){if(o==null)return d;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return d;const u=o[c];return u===void 0?n.isDeepKey(c)?i(o,r.toPath(c),d):d:u}case"number":case"symbol":{typeof c=="number"&&(c=s.toKey(c));const u=o[c];return u===void 0?d:u}default:{if(Array.isArray(c))return l(o,c,d);if(Object.is(c?.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return d;const u=o[c];return u===void 0?d:u}}}function l(o,c,d){if(c.length===0)return d;let u=o;for(let f=0;f<c.length;f++){if(u==null||t.isUnsafeProperty(c[f]))return d;u=u[c[f]]}return u===void 0?d:u}e.get=i})(jS)),jS}var TS,Q$;function rNe(){return Q$||(Q$=1,TS=GL().get),TS}var iNe=rNe();const fu=Oi(iNe);var lNe=4;function kc(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:lNe,n=10**t,s=Math.round(e*n)/n;return Object.is(s,-0)?0:s}function hn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return e.reduce((r,i,l)=>{var o=n[l-1];return typeof o=="string"?r+o+i:o!==void 0?r+kc(o)+i:r+i},"")}var is=e=>e===0?0:e>0?1:-1,Pi=e=>typeof e=="number"&&e!=+e,jo=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Dt=e=>(typeof e=="number"||e instanceof Number)&&!Pi(e),bl=e=>Dt(e)||typeof e=="string",oNe=0,ap=e=>{var t=++oNe;return"".concat(e||"").concat(t)},As=function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Dt(t)&&typeof t!="string")return s;var i;if(jo(t)){if(n==null)return s;var l=t.indexOf("%");i=n*parseFloat(t.slice(0,l))/100}else i=+t;return Pi(i)&&(i=s),r&&n!=null&&i>n&&(i=n),i},iV=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},s=0;s<t;s++)if(!n[String(e[s])])n[String(e[s])]=!0;else return!0;return!1};function Ja(e,t,n){return Dt(e)&&Dt(t)?kc(e+n*(t-e)):t}function lV(e,t,n){if(!(!e||!e.length))return e.find(s=>s&&(typeof t=="function"?t(s):fu(s,t))===n)}var an=e=>e===null||typeof e>"u",dx=e=>an(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function cNe(e){return e!=null}function ux(){}var dNe=["type","size","sizeType"];function kE(){return kE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},kE.apply(null,arguments)}function X$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function Z$(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?X$(Object(n),!0).forEach(function(s){uNe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X$(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function uNe(e,t,n){return(t=mNe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mNe(e){var t=fNe(e,"string");return typeof t=="symbol"?t:t+""}function fNe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hNe(e,t){if(e==null)return{};var n,s,r=gNe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function gNe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}var oV={symbolCircle:Jw,symbolCross:nG,symbolDiamond:rG,symbolSquare:iG,symbolStar:oG,symbolTriangle:cG,symbolWye:dG},pNe=Math.PI/180,xNe=e=>{var t="symbol".concat(dx(e));return oV[t]||Jw},yNe=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var s=18*pNe;return 1.25*e*e*(Math.tan(s)-Math.tan(s*2)*Math.tan(s)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},bNe=(e,t)=>{oV["symbol".concat(dx(e))]=t},WL=e=>{var{type:t="circle",size:n=64,sizeType:s="area"}=e,r=hNe(e,dNe),i=Z$(Z$({},r),{},{type:t,size:n,sizeType:s}),l="circle";typeof t=="string"&&(l=t);var o=()=>{var p=xNe(l),x=mL().type(p).size(yNe(n,s,l)),v=x();if(v!==null)return v},{className:c,cx:d,cy:u}=i,f=$s(i);return Dt(d)&&Dt(u)&&Dt(n)?h.createElement("path",kE({},f,{className:Tt("recharts-symbols",c),transform:"translate(".concat(d,", ").concat(u,")"),d:o()})):null};WL.registerSymbol=bNe;var cV=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,VL=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(h.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var s={};return Object.keys(n).forEach(r=>{UL(r)&&(s[r]=(i=>n[r](n,i)))}),s},vNe=(e,t,n)=>s=>(e(t,n,s),null),mx=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var s=null;return Object.keys(e).forEach(r=>{var i=e[r];UL(r)&&typeof i=="function"&&(s||(s={}),s[r]=vNe(i,t,n))}),s};function J$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function wNe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?J$(Object(n),!0).forEach(function(s){NNe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J$(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function NNe(e,t,n){return(t=jNe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jNe(e){var t=CNe(e,"string");return typeof t=="symbol"?t:t+""}function CNe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $n(e,t){var n=wNe({},e),s=t,r=Object.keys(t),i=r.reduce((l,o)=>(l[o]===void 0&&s[o]!==void 0&&(l[o]=s[o]),l),n);return i}function sv(){return sv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},sv.apply(null,arguments)}function e6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function SNe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?e6(Object(n),!0).forEach(function(s){_Ne(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e6(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function _Ne(e,t,n){return(t=ANe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ANe(e){var t=ENe(e,"string");return typeof t=="symbol"?t:t+""}function ENe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Kr=32,TNe={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function kNe(e){var{data:t,iconType:n,inactiveColor:s}=e,r=Kr/2,i=Kr/6,l=Kr/3,o=t.inactive?s:t.color,c=n??t.type;if(c==="none")return null;if(c==="plainline"){var d;return h.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:(d=t.payload)===null||d===void 0?void 0:d.strokeDasharray,x1:0,y1:r,x2:Kr,y2:r,className:"recharts-legend-icon"})}if(c==="line")return h.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(r,"h").concat(l,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*l,",").concat(r,`
            H`).concat(Kr,"M").concat(2*l,",").concat(r,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(l,",").concat(r),className:"recharts-legend-icon"});if(c==="rect")return h.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(Kr/8,"h").concat(Kr,"v").concat(Kr*3/4,"h").concat(-Kr,"z"),className:"recharts-legend-icon"});if(h.isValidElement(t.legendIcon)){var u=SNe({},t);return delete u.legendIcon,h.cloneElement(t.legendIcon,u)}return h.createElement(WL,{fill:o,cx:r,cy:r,size:Kr,sizeType:"diameter",type:c})}function LNe(e){var{payload:t,iconSize:n,layout:s,formatter:r,inactiveColor:i,iconType:l}=e,o={x:0,y:0,width:Kr,height:Kr},c={display:s==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((u,f)=>{var p=u.formatter||r,x=Tt({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:u.inactive});if(u.type==="none")return null;var v=u.inactive?i:u.color,w=p?p(u.value,u,f):u.value;return h.createElement("li",sv({className:x,style:c,key:"legend-item-".concat(f)},mx(e,u,f)),h.createElement(FL,{width:n,height:n,viewBox:o,style:d,"aria-label":"".concat(w," legend icon")},h.createElement(kNe,{data:u,iconType:l,inactiveColor:i})),h.createElement("span",{className:"recharts-legend-item-text",style:{color:v}},w))})}var PNe=e=>{var t=$n(e,TNe),{payload:n,layout:s,align:r}=t;if(!n||!n.length)return null;var i={padding:0,margin:0,textAlign:s==="horizontal"?r:"left"};return h.createElement("ul",{className:"recharts-default-legend",style:i},h.createElement(LNe,sv({},t,{payload:n})))},kS={},LS={},t6;function DNe(){return t6||(t6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,s){const r=new Map;for(let i=0;i<n.length;i++){const l=n[i],o=s(l);r.has(o)||r.set(o,l)}return Array.from(r.values())}e.uniqBy=t})(LS)),LS}var PS={},a6;function dV(){return a6||(a6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(PS)),PS}var DS={},OS={},MS={},n6;function ONe(){return n6||(n6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(MS)),MS}var s6;function qL(){return s6||(s6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ONe();function n(s){return s!=null&&typeof s!="function"&&t.isLength(s.length)}e.isArrayLike=n})(OS)),OS}var IS={},r6;function MNe(){return r6||(r6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(IS)),IS}var i6;function INe(){return i6||(i6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qL(),n=MNe();function s(r){return n.isObjectLike(r)&&t.isArrayLike(r)}e.isArrayLikeObject=s})(DS)),DS}var $S={},RS={},l6;function $Ne(){return l6||(l6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GL();function n(s){return function(r){return t.get(r,s)}}e.property=n})(RS)),RS}var zS={},US={},FS={},BS={},o6;function uV(){return o6||(o6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(BS)),BS}var HS={},c6;function mV(){return c6||(c6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(HS)),HS}var GS={},d6;function fV(){return d6||(d6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,s){return n===s||Number.isNaN(n)&&Number.isNaN(s)}e.eq=t})(GS)),GS}var u6;function RNe(){return u6||(u6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uV(),n=mV(),s=fV();function r(u,f,p){return typeof p!="function"?r(u,f,()=>{}):i(u,f,function x(v,w,b,C,N,S){const A=p(v,w,b,C,N,S);return A!==void 0?!!A:i(v,w,x,S)},new Map)}function i(u,f,p,x){if(f===u)return!0;switch(typeof f){case"object":return l(u,f,p,x);case"function":return Object.keys(f).length>0?i(u,{...f},p,x):s.eq(u,f);default:return t.isObject(u)?typeof f=="string"?f==="":!0:s.eq(u,f)}}function l(u,f,p,x){if(f==null)return!0;if(Array.isArray(f))return c(u,f,p,x);if(f instanceof Map)return o(u,f,p,x);if(f instanceof Set)return d(u,f,p,x);const v=Object.keys(f);if(u==null||n.isPrimitive(u))return v.length===0;if(v.length===0)return!0;if(x?.has(f))return x.get(f)===u;x?.set(f,u);try{for(let w=0;w<v.length;w++){const b=v[w];if(!n.isPrimitive(u)&&!(b in u)||f[b]===void 0&&u[b]!==void 0||f[b]===null&&u[b]!==null||!p(u[b],f[b],b,u,f,x))return!1}return!0}finally{x?.delete(f)}}function o(u,f,p,x){if(f.size===0)return!0;if(!(u instanceof Map))return!1;for(const[v,w]of f.entries()){const b=u.get(v);if(p(b,w,v,u,f,x)===!1)return!1}return!0}function c(u,f,p,x){if(f.length===0)return!0;if(!Array.isArray(u))return!1;const v=new Set;for(let w=0;w<f.length;w++){const b=f[w];let C=!1;for(let N=0;N<u.length;N++){if(v.has(N))continue;const S=u[N];let A=!1;if(p(S,b,w,u,f,x)&&(A=!0),A){v.add(N),C=!0;break}}if(!C)return!1}return!0}function d(u,f,p,x){return f.size===0?!0:u instanceof Set?c([...u],[...f],p,x):!1}e.isMatchWith=r,e.isSetMatch=d})(FS)),FS}var m6;function hV(){return m6||(m6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RNe();function n(s,r){return t.isMatchWith(s,r,()=>{})}e.isMatch=n})(US)),US}var WS={},VS={},qS={},f6;function zNe(){return f6||(f6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(s=>Object.prototype.propertyIsEnumerable.call(n,s))}e.getSymbols=t})(qS)),qS}var YS={},h6;function gV(){return h6||(h6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(YS)),YS}var KS={},g6;function pV(){return g6||(g6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",s="[object Number]",r="[object Boolean]",i="[object Arguments]",l="[object Symbol]",o="[object Date]",c="[object Map]",d="[object Set]",u="[object Array]",f="[object Function]",p="[object ArrayBuffer]",x="[object Object]",v="[object Error]",w="[object DataView]",b="[object Uint8Array]",C="[object Uint8ClampedArray]",N="[object Uint16Array]",S="[object Uint32Array]",A="[object BigUint64Array]",k="[object Int8Array]",_="[object Int16Array]",T="[object Int32Array]",E="[object BigInt64Array]",I="[object Float32Array]",z="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=p,e.arrayTag=u,e.bigInt64ArrayTag=E,e.bigUint64ArrayTag=A,e.booleanTag=r,e.dataViewTag=w,e.dateTag=o,e.errorTag=v,e.float32ArrayTag=I,e.float64ArrayTag=z,e.functionTag=f,e.int16ArrayTag=_,e.int32ArrayTag=T,e.int8ArrayTag=k,e.mapTag=c,e.numberTag=s,e.objectTag=x,e.regexpTag=t,e.setTag=d,e.stringTag=n,e.symbolTag=l,e.uint16ArrayTag=N,e.uint32ArrayTag=S,e.uint8ArrayTag=b,e.uint8ClampedArrayTag=C})(KS)),KS}var QS={},p6;function UNe(){return p6||(p6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(QS)),QS}var x6;function xV(){return x6||(x6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zNe(),n=gV(),s=pV(),r=mV(),i=UNe();function l(u,f){return o(u,void 0,u,new Map,f)}function o(u,f,p,x=new Map,v=void 0){const w=v?.(u,f,p,x);if(w!==void 0)return w;if(r.isPrimitive(u))return u;if(x.has(u))return x.get(u);if(Array.isArray(u)){const b=new Array(u.length);x.set(u,b);for(let C=0;C<u.length;C++)b[C]=o(u[C],C,p,x,v);return Object.hasOwn(u,"index")&&(b.index=u.index),Object.hasOwn(u,"input")&&(b.input=u.input),b}if(u instanceof Date)return new Date(u.getTime());if(u instanceof RegExp){const b=new RegExp(u.source,u.flags);return b.lastIndex=u.lastIndex,b}if(u instanceof Map){const b=new Map;x.set(u,b);for(const[C,N]of u)b.set(C,o(N,C,p,x,v));return b}if(u instanceof Set){const b=new Set;x.set(u,b);for(const C of u)b.add(o(C,void 0,p,x,v));return b}if(typeof Buffer<"u"&&Buffer.isBuffer(u))return u.subarray();if(i.isTypedArray(u)){const b=new(Object.getPrototypeOf(u)).constructor(u.length);x.set(u,b);for(let C=0;C<u.length;C++)b[C]=o(u[C],C,p,x,v);return b}if(u instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&u instanceof SharedArrayBuffer)return u.slice(0);if(u instanceof DataView){const b=new DataView(u.buffer.slice(0),u.byteOffset,u.byteLength);return x.set(u,b),c(b,u,p,x,v),b}if(typeof File<"u"&&u instanceof File){const b=new File([u],u.name,{type:u.type});return x.set(u,b),c(b,u,p,x,v),b}if(typeof Blob<"u"&&u instanceof Blob){const b=new Blob([u],{type:u.type});return x.set(u,b),c(b,u,p,x,v),b}if(u instanceof Error){const b=new u.constructor;return x.set(u,b),b.message=u.message,b.name=u.name,b.stack=u.stack,b.cause=u.cause,c(b,u,p,x,v),b}if(u instanceof Boolean){const b=new Boolean(u.valueOf());return x.set(u,b),c(b,u,p,x,v),b}if(u instanceof Number){const b=new Number(u.valueOf());return x.set(u,b),c(b,u,p,x,v),b}if(u instanceof String){const b=new String(u.valueOf());return x.set(u,b),c(b,u,p,x,v),b}if(typeof u=="object"&&d(u)){const b=Object.create(Object.getPrototypeOf(u));return x.set(u,b),c(b,u,p,x,v),b}return u}function c(u,f,p=u,x,v){const w=[...Object.keys(f),...t.getSymbols(f)];for(let b=0;b<w.length;b++){const C=w[b],N=Object.getOwnPropertyDescriptor(u,C);(N==null||N.writable)&&(u[C]=o(f[C],C,p,x,v))}}function d(u){switch(n.getTag(u)){case s.argumentsTag:case s.arrayTag:case s.arrayBufferTag:case s.dataViewTag:case s.booleanTag:case s.dateTag:case s.float32ArrayTag:case s.float64ArrayTag:case s.int8ArrayTag:case s.int16ArrayTag:case s.int32ArrayTag:case s.mapTag:case s.numberTag:case s.objectTag:case s.regexpTag:case s.setTag:case s.stringTag:case s.symbolTag:case s.uint8ArrayTag:case s.uint8ClampedArrayTag:case s.uint16ArrayTag:case s.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=o,e.copyProperties=c})(VS)),VS}var y6;function FNe(){return y6||(y6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xV();function n(s){return t.cloneDeepWithImpl(s,void 0,s,new Map,void 0)}e.cloneDeep=n})(WS)),WS}var b6;function BNe(){return b6||(b6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hV(),n=FNe();function s(r){return r=n.cloneDeep(r),i=>t.isMatch(i,r)}e.matches=s})(zS)),zS}var XS={},ZS={},JS={},v6;function HNe(){return v6||(v6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xV(),n=pV();function s(r,i){return t.cloneDeepWith(r,(l,o,c,d)=>{const u=i?.(l,o,c,d);if(u!==void 0)return u;if(typeof r=="object")switch(Object.prototype.toString.call(r)){case n.numberTag:case n.stringTag:case n.booleanTag:{const f=new r.constructor(r?.valueOf());return t.copyProperties(f,r),f}case n.argumentsTag:{const f={};return t.copyProperties(f,r),f.length=r.length,f[Symbol.iterator]=r[Symbol.iterator],f}default:return}})}e.cloneDeepWith=s})(JS)),JS}var w6;function GNe(){return w6||(w6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HNe();function n(s){return t.cloneDeepWith(s)}e.cloneDeep=n})(ZS)),ZS}var e2={},t2={},N6;function yV(){return N6||(N6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(s,r=Number.MAX_SAFE_INTEGER){switch(typeof s){case"number":return Number.isInteger(s)&&s>=0&&s<r;case"symbol":return!1;case"string":return t.test(s)}}e.isIndex=n})(t2)),t2}var a2={},j6;function WNe(){return j6||(j6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gV();function n(s){return s!==null&&typeof s=="object"&&t.getTag(s)==="[object Arguments]"}e.isArguments=n})(a2)),a2}var C6;function VNe(){return C6||(C6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rV(),n=yV(),s=WNe(),r=HL();function i(l,o){let c;if(Array.isArray(o)?c=o:typeof o=="string"&&t.isDeepKey(o)&&l?.[o]==null?c=r.toPath(o):c=[o],c.length===0)return!1;let d=l;for(let u=0;u<c.length;u++){const f=c[u];if((d==null||!Object.hasOwn(d,f))&&!((Array.isArray(d)||s.isArguments(d))&&n.isIndex(f)&&f<d.length))return!1;d=d[f]}return!0}e.has=i})(e2)),e2}var S6;function qNe(){return S6||(S6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hV(),n=BL(),s=GNe(),r=GL(),i=VNe();function l(o,c){switch(typeof o){case"object":{Object.is(o?.valueOf(),-0)&&(o="-0");break}case"number":{o=n.toKey(o);break}}return c=s.cloneDeep(c),function(d){const u=r.get(d,o);return u===void 0?i.has(d,o):c===void 0?u===void 0:t.isMatch(u,c)}}e.matchesProperty=l})(XS)),XS}var _6;function YNe(){return _6||(_6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dV(),n=$Ne(),s=BNe(),r=qNe();function i(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?r.matchesProperty(l[0],l[1]):s.matches(l);case"string":case"symbol":case"number":return n.property(l)}}e.iteratee=i})($S)),$S}var A6;function KNe(){return A6||(A6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=DNe(),n=dV(),s=INe(),r=YNe();function i(l,o=n.identity){return s.isArrayLikeObject(l)?t.uniqBy(Array.from(l),r.iteratee(o)):[]}e.uniqBy=i})(kS)),kS}var n2,E6;function QNe(){return E6||(E6=1,n2=KNe().uniqBy),n2}var XNe=QNe();const T6=Oi(XNe);function bV(e,t,n){return t===!0?T6(e,n):typeof t=="function"?T6(e,t):e}var YL=h.createContext(null),ZNe=e=>e,Ga=()=>{var e=h.useContext(YL);return e?e.store.dispatch:ZNe},xb=()=>{},JNe=()=>xb,eje=(e,t)=>e===t;function Mt(e){var t=h.useContext(YL);return fH.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:JNe,t?t.store.getState:xb,t?t.store.getState:xb,t?e:xb,eje)}var s2={},r2={},i2={},k6;function tje(){return k6||(k6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return typeof s=="symbol"?1:s===null?2:s===void 0?3:s!==s?4:0}const n=(s,r,i)=>{if(s!==r){const l=t(s),o=t(r);if(l===o&&l===0){if(s<r)return i==="desc"?1:-1;if(s>r)return i==="desc"?-1:1}return i==="desc"?o-l:l-o}return 0};e.compareValues=n})(i2)),i2}var l2={},o2={},L6;function vV(){return L6||(L6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(o2)),o2}var P6;function aje(){return P6||(P6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vV(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;function r(i,l){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(s.test(i)||!n.test(i))||l!=null&&Object.hasOwn(l,i)}e.isKey=r})(l2)),l2}var D6;function nje(){return D6||(D6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tje(),n=aje(),s=HL();function r(i,l,o,c){if(i==null)return[];o=c?void 0:o,Array.isArray(i)||(i=Object.values(i)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(x=>String(x));const d=(x,v)=>{let w=x;for(let b=0;b<v.length&&w!=null;++b)w=w[v[b]];return w},u=(x,v)=>v==null||x==null?v:typeof x=="object"&&"key"in x?Object.hasOwn(v,x.key)?v[x.key]:d(v,x.path):typeof x=="function"?x(v):Array.isArray(x)?d(v,x):typeof v=="object"?v[x]:v,f=l.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||n.isKey(x)?x:{key:x,path:s.toPath(x)}));return i.map(x=>({original:x,criteria:f.map(v=>u(v,x))})).slice().sort((x,v)=>{for(let w=0;w<f.length;w++){const b=t.compareValues(x.criteria[w],v.criteria[w],o[w]);if(b!==0)return b}return 0}).map(x=>x.original)}e.orderBy=r})(r2)),r2}var c2={},O6;function sje(){return O6||(O6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,s=1){const r=[],i=Math.floor(s),l=(o,c)=>{for(let d=0;d<o.length;d++){const u=o[d];Array.isArray(u)&&c<i?l(u,c+1):r.push(u)}};return l(n,0),r}e.flatten=t})(c2)),c2}var d2={},M6;function wV(){return M6||(M6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yV(),n=qL(),s=uV(),r=fV();function i(l,o,c){return s.isObject(c)&&(typeof o=="number"&&n.isArrayLike(c)&&t.isIndex(o)&&o<c.length||typeof o=="string"&&o in c)?r.eq(c[o],l):!1}e.isIterateeCall=i})(d2)),d2}var I6;function rje(){return I6||(I6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nje(),n=sje(),s=wV();function r(i,...l){const o=l.length;return o>1&&s.isIterateeCall(i,l[0],l[1])?l=[]:o>2&&s.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(i,n.flatten(l),["asc"])}e.sortBy=r})(s2)),s2}var u2,$6;function ije(){return $6||($6=1,u2=rje().sortBy),u2}var lje=ije();const xN=Oi(lje);var NV=e=>e.legend.settings,oje=e=>e.legend.size,cje=e=>e.legend.payload,dje=st([cje,NV],(e,t)=>{var{itemSorter:n}=t,s=e.flat(1);return n?xN(s,n):s});function uje(){return Mt(dje)}var hy=1;function jV(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=h.useState({height:0,left:0,top:0,width:0}),s=h.useCallback(r=>{if(r!=null){var i=r.getBoundingClientRect(),l={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(l.height-t.height)>hy||Math.abs(l.left-t.left)>hy||Math.abs(l.top-t.top)>hy||Math.abs(l.width-t.width)>hy)&&n({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,s]}function gs(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var mje=typeof Symbol=="function"&&Symbol.observable||"@@observable",R6=mje,m2=()=>Math.random().toString(36).substring(7).split("").join("."),fje={INIT:`@@redux/INIT${m2()}`,REPLACE:`@@redux/REPLACE${m2()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${m2()}`},rv=fje;function KL(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function CV(e,t,n){if(typeof e!="function")throw new Error(gs(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(gs(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(gs(1));return n(CV)(e,t)}let s=e,r=t,i=new Map,l=i,o=0,c=!1;function d(){l===i&&(l=new Map,i.forEach((b,C)=>{l.set(C,b)}))}function u(){if(c)throw new Error(gs(3));return r}function f(b){if(typeof b!="function")throw new Error(gs(4));if(c)throw new Error(gs(5));let C=!0;d();const N=o++;return l.set(N,b),function(){if(C){if(c)throw new Error(gs(6));C=!1,d(),l.delete(N),i=null}}}function p(b){if(!KL(b))throw new Error(gs(7));if(typeof b.type>"u")throw new Error(gs(8));if(typeof b.type!="string")throw new Error(gs(17));if(c)throw new Error(gs(9));try{c=!0,r=s(r,b)}finally{c=!1}return(i=l).forEach(N=>{N()}),b}function x(b){if(typeof b!="function")throw new Error(gs(10));s=b,p({type:rv.REPLACE})}function v(){const b=f;return{subscribe(C){if(typeof C!="object"||C===null)throw new Error(gs(11));function N(){const A=C;A.next&&A.next(u())}return N(),{unsubscribe:b(N)}},[R6](){return this}}}return p({type:rv.INIT}),{dispatch:p,subscribe:f,getState:u,replaceReducer:x,[R6]:v}}function hje(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:rv.INIT})>"u")throw new Error(gs(12));if(typeof n(void 0,{type:rv.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(gs(13))})}function SV(e){const t=Object.keys(e),n={};for(let i=0;i<t.length;i++){const l=t[i];typeof e[l]=="function"&&(n[l]=e[l])}const s=Object.keys(n);let r;try{hje(n)}catch(i){r=i}return function(l={},o){if(r)throw r;let c=!1;const d={};for(let u=0;u<s.length;u++){const f=s[u],p=n[f],x=l[f],v=p(x,o);if(typeof v>"u")throw o&&o.type,new Error(gs(14));d[f]=v,c=c||v!==x}return c=c||s.length!==Object.keys(l).length,c?d:l}}function iv(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...s)=>t(n(...s)))}function gje(...e){return t=>(n,s)=>{const r=t(n,s);let i=()=>{throw new Error(gs(15))};const l={getState:r.getState,dispatch:(c,...d)=>i(c,...d)},o=e.map(c=>c(l));return i=iv(...o)(r.dispatch),{...r,dispatch:i}}}function _V(e){return KL(e)&&"type"in e&&typeof e.type=="string"}var AV=Symbol.for("immer-nothing"),z6=Symbol.for("immer-draftable"),Rs=Symbol.for("immer-state");function Ai(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Sr=Object,gf=Sr.getPrototypeOf,lv="constructor",yN="prototype",LE="configurable",ov="enumerable",yb="writable",np="value",Co=e=>!!e&&!!e[Rs];function Di(e){return e?EV(e)||bN(e)||!!e[z6]||!!e[lv]?.[z6]||vN(e)||wN(e):!1}var pje=Sr[yN][lv].toString(),U6=new WeakMap;function EV(e){if(!e||!QL(e))return!1;const t=gf(e);if(t===null||t===Sr[yN])return!0;const n=Sr.hasOwnProperty.call(t,lv)&&t[lv];if(n===Object)return!0;if(!zm(n))return!1;let s=U6.get(n);return s===void 0&&(s=Function.toString.call(n),U6.set(n,s)),s===pje}function fx(e,t,n=!0){hx(e)===0?(n?Reflect.ownKeys(e):Sr.keys(e)).forEach(r=>{t(r,e[r],e)}):e.forEach((s,r)=>t(r,s,e))}function hx(e){const t=e[Rs];return t?t.type_:bN(e)?1:vN(e)?2:wN(e)?3:0}var F6=(e,t,n=hx(e))=>n===2?e.has(t):Sr[yN].hasOwnProperty.call(e,t),PE=(e,t,n=hx(e))=>n===2?e.get(t):e[t],cv=(e,t,n,s=hx(e))=>{s===2?e.set(t,n):s===3?e.add(n):e[t]=n};function xje(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var bN=Array.isArray,vN=e=>e instanceof Map,wN=e=>e instanceof Set,QL=e=>typeof e=="object",zm=e=>typeof e=="function",f2=e=>typeof e=="boolean";function yje(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var eo=e=>e.copy_||e.base_,XL=e=>e.modified_?e.copy_:e.base_;function DE(e,t){if(vN(e))return new Map(e);if(wN(e))return new Set(e);if(bN(e))return Array[yN].slice.call(e);const n=EV(e);if(t===!0||t==="class_only"&&!n){const s=Sr.getOwnPropertyDescriptors(e);delete s[Rs];let r=Reflect.ownKeys(s);for(let i=0;i<r.length;i++){const l=r[i],o=s[l];o[yb]===!1&&(o[yb]=!0,o[LE]=!0),(o.get||o.set)&&(s[l]={[LE]:!0,[yb]:!0,[ov]:o[ov],[np]:e[l]})}return Sr.create(gf(e),s)}else{const s=gf(e);if(s!==null&&n)return{...e};const r=Sr.create(s);return Sr.assign(r,e)}}function ZL(e,t=!1){return NN(e)||Co(e)||!Di(e)||(hx(e)>1&&Sr.defineProperties(e,{set:gy,add:gy,clear:gy,delete:gy}),Sr.freeze(e),t&&fx(e,(n,s)=>{ZL(s,!0)},!1)),e}function bje(){Ai(2)}var gy={[np]:bje};function NN(e){return e===null||!QL(e)?!0:Sr.isFrozen(e)}var dv="MapSet",OE="Patches",B6="ArrayMethods",TV={};function hu(e){const t=TV[e];return t||Ai(0,e),t}var H6=e=>!!TV[e],sp,kV=()=>sp,vje=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:H6(dv)?hu(dv):void 0,arrayMethodsPlugin_:H6(B6)?hu(B6):void 0});function G6(e,t){t&&(e.patchPlugin_=hu(OE),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function ME(e){IE(e),e.drafts_.forEach(wje),e.drafts_=null}function IE(e){e===sp&&(sp=e.parent_)}var W6=e=>sp=vje(sp,e);function wje(e){const t=e[Rs];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function V6(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(e!==void 0&&e!==n){n[Rs].modified_&&(ME(t),Ai(4)),Di(e)&&(e=q6(t,e));const{patchPlugin_:r}=t;r&&r.generateReplacementPatches_(n[Rs].base_,e,t)}else e=q6(t,n);return Nje(t,e,!0),ME(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==AV?e:void 0}function q6(e,t){if(NN(t))return t;const n=t[Rs];if(!n)return JL(t,e.handledSet_,e);if(!jN(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:s}=n;if(s)for(;s.length>0;)s.pop()(e);DV(n,e)}return n.copy_}function Nje(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&ZL(t,n)}function LV(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var jN=(e,t)=>e.scope_===t,jje=[];function PV(e,t,n,s){const r=eo(e),i=e.type_;if(s!==void 0&&PE(r,s,i)===t){cv(r,s,n,i);return}if(!e.draftLocations_){const o=e.draftLocations_=new Map;fx(r,(c,d)=>{if(Co(d)){const u=o.get(d)||[];u.push(c),o.set(d,u)}})}const l=e.draftLocations_.get(t)??jje;for(const o of l)cv(r,o,n,i)}function Cje(e,t,n){e.callbacks_.push(function(r){const i=t;if(!i||!jN(i,r))return;r.mapSetPlugin_?.fixSetContents(i);const l=XL(i);PV(e,i.draft_??i,l,n),DV(i,r)})}function DV(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){const{patchPlugin_:s}=t;if(s){const r=s.getPath(e);r&&s.generatePatches_(e,r,t)}LV(e)}}function Sje(e,t,n){const{scope_:s}=e;if(Co(n)){const r=n[Rs];jN(r,s)&&r.callbacks_.push(function(){bb(e);const l=XL(r);PV(e,n,l,t)})}else Di(n)&&e.callbacks_.push(function(){const i=eo(e);PE(i,t,e.type_)===n&&s.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&JL(PE(e.copy_,t,e.type_),s.handledSet_,s)})}function JL(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Co(e)||t.has(e)||!Di(e)||NN(e)||(t.add(e),fx(e,(s,r)=>{if(Co(r)){const i=r[Rs];if(jN(i,n)){const l=XL(i);cv(e,s,l,e.type_),LV(i)}}else Di(r)&&JL(r,t,n)})),e}function _je(e,t){const n=bN(e),s={type_:n?1:0,scope_:t?t.scope_:kV(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let r=s,i=e4;n&&(r=[s],i=rp);const{revoke:l,proxy:o}=Proxy.revocable(r,i);return s.draft_=o,s.revoke_=l,[o,s]}var e4={get(e,t){if(t===Rs)return e;let n=e.scope_.arrayMethodsPlugin_;const s=e.type_===1&&typeof t=="string";if(s&&n?.isArrayOperationMethod(t))return n.createMethodInterceptor(e,t);const r=eo(e);if(!F6(r,t,e.type_))return Aje(e,r,t);const i=r[t];if(e.finalized_||!Di(i)||s&&e.operationMethod&&n?.isMutatingArrayMethod(e.operationMethod)&&yje(t))return i;if(i===h2(e.base_,t)){bb(e);const l=e.type_===1?+t:t,o=RE(e.scope_,i,e,l);return e.copy_[l]=o}return i},has(e,t){return t in eo(e)},ownKeys(e){return Reflect.ownKeys(eo(e))},set(e,t,n){const s=OV(eo(e),t);if(s?.set)return s.set.call(e.draft_,n),!0;if(!e.modified_){const r=h2(eo(e),t),i=r?.[Rs];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(xje(n,r)&&(n!==void 0||F6(e.base_,t,e.type_)))return!0;bb(e),$E(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),Sje(e,t,n)),!0},deleteProperty(e,t){return bb(e),h2(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),$E(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=eo(e),s=Reflect.getOwnPropertyDescriptor(n,t);return s&&{[yb]:!0,[LE]:e.type_!==1||t!=="length",[ov]:s[ov],[np]:n[t]}},defineProperty(){Ai(11)},getPrototypeOf(e){return gf(e.base_)},setPrototypeOf(){Ai(12)}},rp={};fx(e4,(e,t)=>{rp[e]=function(){const n=arguments;return n[0]=n[0][0],t.apply(this,n)}});rp.deleteProperty=function(e,t){return rp.set.call(this,e,t,void 0)};rp.set=function(e,t,n){return e4.set.call(this,e[0],t,n,e[0])};function h2(e,t){const n=e[Rs];return(n?eo(n):e)[t]}function Aje(e,t,n){const s=OV(t,n);return s?np in s?s[np]:s.get?.call(e.draft_):void 0}function OV(e,t){if(!(t in e))return;let n=gf(e);for(;n;){const s=Object.getOwnPropertyDescriptor(n,t);if(s)return s;n=gf(n)}}function $E(e){e.modified_||(e.modified_=!0,e.parent_&&$E(e.parent_))}function bb(e){e.copy_||(e.assigned_=new Map,e.copy_=DE(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Eje=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,s,r)=>{if(zm(n)&&!zm(s)){const l=s;s=n;const o=this;return function(d=l,...u){return o.produce(d,f=>s.call(this,f,...u))}}zm(s)||Ai(6),r!==void 0&&!zm(r)&&Ai(7);let i;if(Di(n)){const l=W6(this),o=RE(l,n,void 0);let c=!0;try{i=s(o),c=!1}finally{c?ME(l):IE(l)}return G6(l,r),V6(i,l)}else if(!n||!QL(n)){if(i=s(n),i===void 0&&(i=n),i===AV&&(i=void 0),this.autoFreeze_&&ZL(i,!0),r){const l=[],o=[];hu(OE).generateReplacementPatches_(n,i,{patches_:l,inversePatches_:o}),r(l,o)}return i}else Ai(1,n)},this.produceWithPatches=(n,s)=>{if(zm(n))return(o,...c)=>this.produceWithPatches(o,d=>n(d,...c));let r,i;return[this.produce(n,s,(o,c)=>{r=o,i=c}),r,i]},f2(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),f2(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),f2(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Di(t)||Ai(8),Co(t)&&(t=ki(t));const n=W6(this),s=RE(n,t,void 0);return s[Rs].isManual_=!0,IE(n),s}finishDraft(t,n){const s=t&&t[Rs];(!s||!s.isManual_)&&Ai(9);const{scope_:r}=s;return G6(r,n),V6(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,n){let s;for(s=n.length-1;s>=0;s--){const i=n[s];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}s>-1&&(n=n.slice(s+1));const r=hu(OE).applyPatches_;return Co(t)?r(t,n):this.produce(t,i=>r(i,n))}};function RE(e,t,n,s){const[r,i]=vN(t)?hu(dv).proxyMap_(t,n):wN(t)?hu(dv).proxySet_(t,n):_je(t,n);return(n?.scope_??kV()).drafts_.push(r),i.callbacks_=n?.callbacks_??[],i.key_=s,n&&s!==void 0?Cje(n,i,s):i.callbacks_.push(function(c){c.mapSetPlugin_?.fixSetContents(i);const{patchPlugin_:d}=c;i.modified_&&d&&d.generatePatches_(i,[],c)}),r}function ki(e){return Co(e)||Ai(10,e),MV(e)}function MV(e){if(!Di(e)||NN(e))return e;const t=e[Rs];let n,s=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=DE(e,t.scope_.immer_.useStrictShallowCopy_),s=t.scope_.immer_.shouldUseStrictIteration()}else n=DE(e,!0);return fx(n,(r,i)=>{cv(n,r,MV(i))},s),t&&(t.finalized_=!1),n}var Tje=new Eje,IV=Tje.produce;function $V(e){return({dispatch:n,getState:s})=>r=>i=>typeof i=="function"?i(n,s,e):r(i)}var kje=$V(),Lje=$V,Pje=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?iv:iv.apply(null,arguments)};function ii(e,t){function n(...s){if(t){let r=t(...s);if(!r)throw new Error(Er(0));return{type:e,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:e,payload:s[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=s=>_V(s)&&s.type===e,n}var RV=class bg extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,bg.prototype)}static get[Symbol.species](){return bg}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new bg(...t[0].concat(this)):new bg(...t.concat(this))}};function Y6(e){return Di(e)?IV(e,()=>{}):e}function py(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function Dje(e){return typeof e=="boolean"}var Oje=()=>function(t){const{thunk:n=!0,immutableCheck:s=!0,serializableCheck:r=!0,actionCreatorCheck:i=!0}=t??{};let l=new RV;return n&&(Dje(n)?l.push(kje):l.push(Lje(n.extraArgument))),l},zV="RTK_autoBatch",Za=()=>e=>({payload:e,meta:{[zV]:!0}}),K6=e=>t=>{setTimeout(t,e)},UV=(e={type:"raf"})=>t=>(...n)=>{const s=t(...n);let r=!0,i=!1,l=!1;const o=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:K6(10):e.type==="callback"?e.queueNotification:K6(e.timeout),d=()=>{l=!1,i&&(i=!1,o.forEach(u=>u()))};return Object.assign({},s,{subscribe(u){const f=()=>r&&u(),p=s.subscribe(f);return o.add(u),()=>{p(),o.delete(u)}},dispatch(u){try{return r=!u?.meta?.[zV],i=!r,i&&(l||(l=!0,c(d))),s.dispatch(u)}finally{r=!0}}})},Mje=e=>function(n){const{autoBatch:s=!0}=n??{};let r=new RV(e);return s&&r.push(UV(typeof s=="object"?s:void 0)),r};function Ije(e){const t=Oje(),{reducer:n=void 0,middleware:s,devTools:r=!0,preloadedState:i=void 0,enhancers:l=void 0}=e||{};let o;if(typeof n=="function")o=n;else if(KL(n))o=SV(n);else throw new Error(Er(1));let c;typeof s=="function"?c=s(t):c=t();let d=iv;r&&(d=Pje({trace:!1,...typeof r=="object"&&r}));const u=gje(...c),f=Mje(u);let p=typeof l=="function"?l(f):f();const x=d(...p);return CV(o,i,x)}function FV(e){const t={},n=[];let s;const r={addCase(i,l){const o=typeof i=="string"?i:i.type;if(!o)throw new Error(Er(28));if(o in t)throw new Error(Er(29));return t[o]=l,r},addAsyncThunk(i,l){return l.pending&&(t[i.pending.type]=l.pending),l.rejected&&(t[i.rejected.type]=l.rejected),l.fulfilled&&(t[i.fulfilled.type]=l.fulfilled),l.settled&&n.push({matcher:i.settled,reducer:l.settled}),r},addMatcher(i,l){return n.push({matcher:i,reducer:l}),r},addDefaultCase(i){return s=i,r}};return e(r),[t,n,s]}function $je(e){return typeof e=="function"}function Rje(e,t){let[n,s,r]=FV(t),i;if($je(e))i=()=>Y6(e());else{const o=Y6(e);i=()=>o}function l(o=i(),c){let d=[n[c.type],...s.filter(({matcher:u})=>u(c)).map(({reducer:u})=>u)];return d.filter(u=>!!u).length===0&&(d=[r]),d.reduce((u,f)=>{if(f)if(Co(u)){const x=f(u,c);return x===void 0?u:x}else{if(Di(u))return IV(u,p=>f(p,c));{const p=f(u,c);if(p===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return p}}return u},o)}return l.getInitialState=i,l}var zje="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Uje=(e=21)=>{let t="",n=e;for(;n--;)t+=zje[Math.random()*64|0];return t},Fje=Symbol.for("rtk-slice-createasyncthunk");function Bje(e,t){return`${e}/${t}`}function Hje({creators:e}={}){const t=e?.asyncThunk?.[Fje];return function(s){const{name:r,reducerPath:i=r}=s;if(!r)throw new Error(Er(11));const l=(typeof s.reducers=="function"?s.reducers(Wje()):s.reducers)||{},o=Object.keys(l),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(S,A){const k=typeof S=="string"?S:S.type;if(!k)throw new Error(Er(12));if(k in c.sliceCaseReducersByType)throw new Error(Er(13));return c.sliceCaseReducersByType[k]=A,d},addMatcher(S,A){return c.sliceMatchers.push({matcher:S,reducer:A}),d},exposeAction(S,A){return c.actionCreators[S]=A,d},exposeCaseReducer(S,A){return c.sliceCaseReducersByName[S]=A,d}};o.forEach(S=>{const A=l[S],k={reducerName:S,type:Bje(r,S),createNotation:typeof s.reducers=="function"};qje(A)?Kje(k,A,d,t):Vje(k,A,d)});function u(){const[S={},A=[],k=void 0]=typeof s.extraReducers=="function"?FV(s.extraReducers):[s.extraReducers],_={...S,...c.sliceCaseReducersByType};return Rje(s.initialState,T=>{for(let E in _)T.addCase(E,_[E]);for(let E of c.sliceMatchers)T.addMatcher(E.matcher,E.reducer);for(let E of A)T.addMatcher(E.matcher,E.reducer);k&&T.addDefaultCase(k)})}const f=S=>S,p=new Map,x=new WeakMap;let v;function w(S,A){return v||(v=u()),v(S,A)}function b(){return v||(v=u()),v.getInitialState()}function C(S,A=!1){function k(T){let E=T[S];return typeof E>"u"&&A&&(E=py(x,k,b)),E}function _(T=f){const E=py(p,A,()=>new WeakMap);return py(E,T,()=>{const I={};for(const[z,$]of Object.entries(s.selectors??{}))I[z]=Gje($,T,()=>py(x,T,b),A);return I})}return{reducerPath:S,getSelectors:_,get selectors(){return _(k)},selectSlice:k}}const N={name:r,reducer:w,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:b,...C(i),injectInto(S,{reducerPath:A,...k}={}){const _=A??i;return S.inject({reducerPath:_,reducer:w},k),{...N,...C(_,!0)}}};return N}}function Gje(e,t,n,s){function r(i,...l){let o=t(i);return typeof o>"u"&&s&&(o=n()),e(o,...l)}return r.unwrapped=e,r}var cr=Hje();function Wje(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function Vje({type:e,reducerName:t,createNotation:n},s,r){let i,l;if("reducer"in s){if(n&&!Yje(s))throw new Error(Er(17));i=s.reducer,l=s.prepare}else i=s;r.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,l?ii(e,l):ii(e))}function qje(e){return e._reducerDefinitionType==="asyncThunk"}function Yje(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Kje({type:e,reducerName:t},n,s,r){if(!r)throw new Error(Er(18));const{payloadCreator:i,fulfilled:l,pending:o,rejected:c,settled:d,options:u}=n,f=r(e,i,u);s.exposeAction(t,f),l&&s.addCase(f.fulfilled,l),o&&s.addCase(f.pending,o),c&&s.addCase(f.rejected,c),d&&s.addMatcher(f.settled,d),s.exposeCaseReducer(t,{fulfilled:l||xy,pending:o||xy,rejected:c||xy,settled:d||xy})}function xy(){}var Qje="task",BV="listener",HV="completed",t4="cancelled",Xje=`task-${t4}`,Zje=`task-${HV}`,zE=`${BV}-${t4}`,Jje=`${BV}-${HV}`,CN=class{constructor(e){this.code=e,this.message=`${Qje} ${t4} (reason: ${e})`}name="TaskAbortError";message},a4=(e,t)=>{if(typeof e!="function")throw new TypeError(Er(32))},uv=()=>{},GV=(e,t=uv)=>(e.catch(t),e),WV=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Zd=e=>{if(e.aborted)throw new CN(e.reason)};function VV(e,t){let n=uv;return new Promise((s,r)=>{const i=()=>r(new CN(e.reason));if(e.aborted){i();return}n=WV(e,i),t.finally(()=>n()).then(s,r)}).finally(()=>{n=uv})}var e1e=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof CN?"cancelled":"rejected",error:n}}finally{t?.()}},mv=e=>t=>GV(VV(e,t).then(n=>(Zd(e),n))),qV=e=>{const t=mv(e);return n=>t(new Promise(s=>setTimeout(s,n)))},{assign:Xm}=Object,Q6={},SN="listenerMiddleware",t1e=(e,t)=>{const n=s=>WV(e,()=>s.abort(e.reason));return(s,r)=>{a4(s);const i=new AbortController;n(i);const l=e1e(async()=>{Zd(e),Zd(i.signal);const o=await s({pause:mv(i.signal),delay:qV(i.signal),signal:i.signal});return Zd(i.signal),o},()=>i.abort(Zje));return r?.autoJoin&&t.push(l.catch(uv)),{result:mv(e)(l),cancel(){i.abort(Xje)}}}},a1e=(e,t)=>{const n=async(s,r)=>{Zd(t);let i=()=>{};const o=[new Promise((c,d)=>{let u=e({predicate:s,effect:(f,p)=>{p.unsubscribe(),c([f,p.getState(),p.getOriginalState()])}});i=()=>{u(),d()}})];r!=null&&o.push(new Promise(c=>setTimeout(c,r,null)));try{const c=await VV(t,Promise.race(o));return Zd(t),c}finally{i()}};return(s,r)=>GV(n(s,r))},YV=e=>{let{type:t,actionCreator:n,matcher:s,predicate:r,effect:i}=e;if(t)r=ii(t).match;else if(n)t=n.type,r=n.match;else if(s)r=s;else if(!r)throw new Error(Er(21));return a4(i),{predicate:r,type:t,effect:i}},KV=Xm(e=>{const{type:t,predicate:n,effect:s}=YV(e);return{id:Uje(),effect:s,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Er(22))}}},{withTypes:()=>KV}),X6=(e,t)=>{const{type:n,effect:s,predicate:r}=YV(t);return Array.from(e.values()).find(i=>(typeof n=="string"?i.type===n:i.predicate===r)&&i.effect===s)},UE=e=>{e.pending.forEach(t=>{t.abort(zE)})},n1e=(e,t)=>()=>{for(const n of t.keys())UE(n);e.clear()},Z6=(e,t,n)=>{try{e(t,n)}catch(s){setTimeout(()=>{throw s},0)}},QV=Xm(ii(`${SN}/add`),{withTypes:()=>QV}),s1e=ii(`${SN}/removeAll`),XV=Xm(ii(`${SN}/remove`),{withTypes:()=>XV}),r1e=(...e)=>{console.error(`${SN}/error`,...e)},gx=(e={})=>{const t=new Map,n=new Map,s=x=>{const v=n.get(x)??0;n.set(x,v+1)},r=x=>{const v=n.get(x)??1;v===1?n.delete(x):n.set(x,v-1)},{extra:i,onError:l=r1e}=e;a4(l);const o=x=>(x.unsubscribe=()=>t.delete(x.id),t.set(x.id,x),v=>{x.unsubscribe(),v?.cancelActive&&UE(x)}),c=x=>{const v=X6(t,x)??KV(x);return o(v)};Xm(c,{withTypes:()=>c});const d=x=>{const v=X6(t,x);return v&&(v.unsubscribe(),x.cancelActive&&UE(v)),!!v};Xm(d,{withTypes:()=>d});const u=async(x,v,w,b)=>{const C=new AbortController,N=a1e(c,C.signal),S=[];try{x.pending.add(C),s(x),await Promise.resolve(x.effect(v,Xm({},w,{getOriginalState:b,condition:(A,k)=>N(A,k).then(Boolean),take:N,delay:qV(C.signal),pause:mv(C.signal),extra:i,signal:C.signal,fork:t1e(C.signal,S),unsubscribe:x.unsubscribe,subscribe:()=>{t.set(x.id,x)},cancelActiveListeners:()=>{x.pending.forEach((A,k,_)=>{A!==C&&(A.abort(zE),_.delete(A))})},cancel:()=>{C.abort(zE),x.pending.delete(C)},throwIfCancelled:()=>{Zd(C.signal)}})))}catch(A){A instanceof CN||Z6(l,A,{raisedBy:"effect"})}finally{await Promise.all(S),C.abort(Jje),r(x),x.pending.delete(C)}},f=n1e(t,n);return{middleware:x=>v=>w=>{if(!_V(w))return v(w);if(QV.match(w))return c(w.payload);if(s1e.match(w)){f();return}if(XV.match(w))return d(w.payload);let b=x.getState();const C=()=>{if(b===Q6)throw new Error(Er(23));return b};let N;try{if(N=v(w),t.size>0){const S=x.getState(),A=Array.from(t.values());for(const k of A){let _=!1;try{_=k.predicate(w,S,b)}catch(T){_=!1,Z6(l,T,{raisedBy:"predicate"})}_&&u(k,w,x,C)}}}finally{b=Q6}return N},startListening:c,stopListening:d,clearListeners:f}};function Er(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var i1e={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},ZV=cr({name:"chartLayout",initialState:i1e,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,s,r,i;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(s=t.payload.right)!==null&&s!==void 0?s:0,e.margin.bottom=(r=t.payload.bottom)!==null&&r!==void 0?r:0,e.margin.left=(i=t.payload.left)!==null&&i!==void 0?i:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:l1e,setLayout:o1e,setChartSize:c1e,setScale:d1e}=ZV.actions,u1e=ZV.reducer;function JV(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function ln(e){return Number.isFinite(e)}function vl(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function J6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function Fm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?J6(Object(n),!0).forEach(function(s){m1e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J6(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function m1e(e,t,n){return(t=f1e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f1e(e){var t=h1e(e,"string");return typeof t=="symbol"?t:t+""}function h1e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ia(e,t,n){return an(e)||an(t)?n:bl(t)?fu(e,t,n):typeof t=="function"?t(e):n}var g1e=(e,t,n)=>{if(t&&n){var{width:s,height:r}=n,{align:i,verticalAlign:l,layout:o}=t;if((o==="vertical"||o==="horizontal"&&l==="middle")&&i!=="center"&&Dt(e[i]))return Fm(Fm({},e),{},{[i]:e[i]+(s||0)});if((o==="horizontal"||o==="vertical"&&i==="center")&&l!=="middle"&&Dt(e[l]))return Fm(Fm({},e),{},{[l]:e[l]+(r||0)})}return e},ad=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",eq=(e,t,n,s)=>{if(s)return e.map(o=>o.coordinate);var r,i,l=e.map(o=>(o.coordinate===t&&(r=!0),o.coordinate===n&&(i=!0),o.coordinate));return r||l.push(t),i||l.push(n),l},tq=(e,t,n)=>{if(!e)return null;var{duplicateDomain:s,type:r,range:i,scale:l,realScaleType:o,isCategorical:c,categoricalDomain:d,tickCount:u,ticks:f,niceTicks:p,axisType:x}=e;if(!l)return null;var v=o==="scaleBand"&&l.bandwidth?l.bandwidth()/2:2,w=r==="category"&&l.bandwidth?l.bandwidth()/v:0;if(w=x==="angleAxis"&&i&&i.length>=2?is(i[0]-i[1])*2*w:w,f||p){var b=(f||p||[]).map((C,N)=>{var S=s?s.indexOf(C):C;return{coordinate:l(S)+w,value:C,offset:w,index:N}});return b.filter(C=>!Pi(C.coordinate))}return c&&d?d.map((C,N)=>({coordinate:l(C)+w,value:C,index:N,offset:w})):l.ticks&&u!=null?l.ticks(u).map((C,N)=>({coordinate:l(C)+w,value:C,offset:w,index:N})):l.domain().map((C,N)=>({coordinate:l(C)+w,value:s?s[C]:C,index:N,offset:w}))},eR=1e-4,p1e=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,s=e.range(),r=Math.min(s[0],s[1])-eR,i=Math.max(s[0],s[1])+eR,l=e(t[0]),o=e(t[n-1]);(l<r||l>i||o<r||o>i)&&e.domain([t[0],t[n-1]])}},x1e=(e,t)=>{if(!t||t.length!==2||!Dt(t[0])||!Dt(t[1]))return e;var n=Math.min(t[0],t[1]),s=Math.max(t[0],t[1]),r=[e[0],e[1]];return(!Dt(e[0])||e[0]<n)&&(r[0]=n),(!Dt(e[1])||e[1]>s)&&(r[1]=s),r[0]>s&&(r[0]=s),r[1]<n&&(r[1]=n),r},y1e=e=>{var t,n=e.length;if(!(n<=0)){var s=(t=e[0])===null||t===void 0?void 0:t.length;if(!(s==null||s<=0))for(var r=0;r<s;++r)for(var i=0,l=0,o=0;o<n;++o){var c=e[o],d=c?.[r];if(d!=null){var u=d[1],f=d[0],p=Pi(u)?f:u;p>=0?(d[0]=i,d[1]=i+p,i=u):(d[0]=l,d[1]=l+p,l=u)}}}},b1e=e=>{var t,n=e.length;if(!(n<=0)){var s=(t=e[0])===null||t===void 0?void 0:t.length;if(!(s==null||s<=0))for(var r=0;r<s;++r)for(var i=0,l=0;l<n;++l){var o=e[l],c=o?.[r];if(c!=null){var d=Pi(c[1])?c[0]:c[1];d>=0?(c[0]=i,c[1]=i+d,i=c[1]):(c[0]=0,c[1]=0)}}}},v1e={sign:y1e,expand:SG,none:Fc,silhouette:_G,wiggle:AG,positive:b1e},w1e=(e,t,n)=>{var s,r=(s=v1e[n])!==null&&s!==void 0?s:Fc,i=hL().keys(t).value((o,c)=>Number(Ia(o,c,0))).order(cu).offset(r),l=i(e);return l.forEach((o,c)=>{o.forEach((d,u)=>{var f=Ia(e[u],t[c],0);Array.isArray(f)&&f.length===2&&Dt(f[0])&&Dt(f[1])&&(d[0]=f[0],d[1]=f[1])})}),l};function N1e(e){return e==null?void 0:String(e)}function tR(e){var{axis:t,ticks:n,bandSize:s,entry:r,index:i,dataKey:l}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!an(r[t.dataKey])){var o=lV(n,"value",r[t.dataKey]);if(o)return o.coordinate+s/2}return n[i]?n[i].coordinate+s/2:null}var c=Ia(r,an(l)?t.dataKey:l);return an(c)?null:t.scale(c)}var aR=e=>{var{axis:t,ticks:n,offset:s,bandSize:r,entry:i,index:l}=e;if(t.type==="category")return n[l]?n[l].coordinate+s:null;var o=Ia(i,t.dataKey,t.scale.domain()[l]);return an(o)?null:t.scale(o)-r/2+s},j1e=e=>{var{numericAxis:t}=e,n=t.scale.domain();if(t.type==="number"){var s=Math.min(n[0],n[1]),r=Math.max(n[0],n[1]);return s<=0&&r>=0?0:r<0?r:s}return n[0]},C1e=e=>{var t=e.flat(2).filter(Dt);return[Math.min(...t),Math.max(...t)]},S1e=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],_1e=(e,t,n)=>{if(e!=null)return S1e(Object.keys(e).reduce((s,r)=>{var i=e[r];if(!i)return s;var{stackedData:l}=i,o=l.reduce((c,d)=>{var u=JV(d,t,n),f=C1e(u);return!ln(f[0])||!ln(f[1])?c:[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(o[0],s[0]),Math.max(o[1],s[1])]},[1/0,-1/0]))},nR=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,sR=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,pf=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var s=e.scale.bandwidth();if(!n||s>0)return s}if(e&&t&&t.length>=2){for(var r=xN(t,u=>u.coordinate),i=1/0,l=1,o=r.length;l<o;l++){var c=r[l],d=r[l-1];i=Math.min((c?.coordinate||0)-(d?.coordinate||0),i)}return i===1/0?0:i}return n?void 0:0};function rR(e){var{tooltipEntrySettings:t,dataKey:n,payload:s,value:r,name:i}=e;return Fm(Fm({},t),{},{dataKey:n,payload:s,value:r,name:i})}function $f(e,t){if(e)return String(e);if(typeof t=="string")return t}var A1e=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},E1e=(e,t)=>t==="centric"?e.angle:e.radius,Io=e=>e.layout.width,$o=e=>e.layout.height,T1e=e=>e.layout.scale,aq=e=>e.layout.margin,_N=st(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),AN=st(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),nq="data-recharts-item-index",sq="data-recharts-item-id",px=60;function iR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function yy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iR(Object(n),!0).forEach(function(s){k1e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function k1e(e,t,n){return(t=L1e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L1e(e){var t=P1e(e,"string");return typeof t=="symbol"?t:t+""}function P1e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var D1e=e=>e.brush.height;function O1e(e){var t=AN(e);return t.reduce((n,s)=>{if(s.orientation==="left"&&!s.mirror&&!s.hide){var r=typeof s.width=="number"?s.width:px;return n+r}return n},0)}function M1e(e){var t=AN(e);return t.reduce((n,s)=>{if(s.orientation==="right"&&!s.mirror&&!s.hide){var r=typeof s.width=="number"?s.width:px;return n+r}return n},0)}function I1e(e){var t=_N(e);return t.reduce((n,s)=>s.orientation==="top"&&!s.mirror&&!s.hide?n+s.height:n,0)}function $1e(e){var t=_N(e);return t.reduce((n,s)=>s.orientation==="bottom"&&!s.mirror&&!s.hide?n+s.height:n,0)}var Xn=st([Io,$o,aq,D1e,O1e,M1e,I1e,$1e,NV,oje],(e,t,n,s,r,i,l,o,c,d)=>{var u={left:(n.left||0)+r,right:(n.right||0)+i},f={top:(n.top||0)+l,bottom:(n.bottom||0)+o},p=yy(yy({},f),u),x=p.bottom;p.bottom+=s,p=g1e(p,c,d);var v=e-p.left-p.right,w=t-p.top-p.bottom;return yy(yy({brushBottom:x},p),{},{width:Math.max(v,0),height:Math.max(w,0)})}),R1e=st(Xn,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),n4=st(Io,$o,(e,t)=>({x:0,y:0,width:e,height:t})),z1e=h.createContext(null),Ls=()=>h.useContext(z1e)!=null,EN=e=>e.brush,TN=st([EN,Xn,aq],(e,t,n)=>({height:e.height,x:Dt(e.x)?e.x:t.left,y:Dt(e.y)?e.y:t.top+t.height+t.brushBottom-(n?.bottom||0),width:Dt(e.width)?e.width:t.width})),g2={},p2={},x2={},lR;function U1e(){return lR||(lR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,s,{signal:r,edges:i}={}){let l,o=null;const c=i!=null&&i.includes("leading"),d=i==null||i.includes("trailing"),u=()=>{o!==null&&(n.apply(l,o),l=void 0,o=null)},f=()=>{d&&u(),w()};let p=null;const x=()=>{p!=null&&clearTimeout(p),p=setTimeout(()=>{p=null,f()},s)},v=()=>{p!==null&&(clearTimeout(p),p=null)},w=()=>{v(),l=void 0,o=null},b=()=>{u()},C=function(...N){if(r?.aborted)return;l=this,o=N;const S=p==null;x(),c&&S&&u()};return C.schedule=x,C.cancel=w,C.flush=b,r?.addEventListener("abort",w,{once:!0}),C}e.debounce=t})(x2)),x2}var oR;function F1e(){return oR||(oR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=U1e();function n(s,r=0,i={}){typeof i!="object"&&(i={});const{leading:l=!1,trailing:o=!0,maxWait:c}=i,d=Array(2);l&&(d[0]="leading"),o&&(d[1]="trailing");let u,f=null;const p=t.debounce(function(...w){u=s.apply(this,w),f=null},r,{edges:d}),x=function(...w){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(u=s.apply(this,w),f=Date.now(),p.cancel(),p.schedule(),u):(p.apply(this,w),u)},v=()=>(p.flush(),u);return x.cancel=p.cancel,x.flush=v,x}e.debounce=n})(p2)),p2}var cR;function B1e(){return cR||(cR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=F1e();function n(s,r=0,i={}){const{leading:l=!0,trailing:o=!0}=i;return t.debounce(s,r,{leading:l,maxWait:r,trailing:o})}e.throttle=n})(g2)),g2}var y2,dR;function H1e(){return dR||(dR=1,y2=B1e().throttle),y2}var G1e=H1e();const W1e=Oi(G1e);var fv=function(t,n){for(var s=arguments.length,r=new Array(s>2?s-2:0),i=2;i<s;i++)r[i-2]=arguments[i];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=0;console.warn(n.replace(/%s/g,()=>r[l++]))}},rq=(e,t,n)=>{var{width:s="100%",height:r="100%",aspect:i,maxHeight:l}=n,o=jo(s)?e:Number(s),c=jo(r)?t:Number(r);return i&&i>0&&(o?c=o/i:c&&(o=c*i),l&&c!=null&&c>l&&(c=l)),{calculatedWidth:o,calculatedHeight:c}},V1e={width:0,height:0,overflow:"visible"},q1e={width:0,overflowX:"visible"},Y1e={height:0,overflowY:"visible"},K1e={},Q1e=e=>{var{width:t,height:n}=e,s=jo(t),r=jo(n);return s&&r?V1e:s?q1e:r?Y1e:K1e};function X1e(e){var{width:t,height:n,aspect:s}=e,r=t,i=n;return r===void 0&&i===void 0?(r="100%",i="100%"):r===void 0?r=s&&s>0?void 0:"100%":i===void 0&&(i=s&&s>0?void 0:"100%"),{width:r,height:i}}function FE(){return FE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},FE.apply(null,arguments)}function uR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function mR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uR(Object(n),!0).forEach(function(s){Z1e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Z1e(e,t,n){return(t=J1e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J1e(e){var t=eCe(e,"string");return typeof t=="symbol"?t:t+""}function eCe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var iq=h.createContext({width:-1,height:-1});function tCe(e){return vl(e.width)&&vl(e.height)}function lq(e){var{children:t,width:n,height:s}=e,r=h.useMemo(()=>({width:n,height:s}),[n,s]);return tCe(r)?h.createElement(iq.Provider,{value:r},t):null}var s4=()=>h.useContext(iq),aCe=h.forwardRef((e,t)=>{var{aspect:n,initialDimension:s={width:-1,height:-1},width:r,height:i,minWidth:l=0,minHeight:o,maxHeight:c,children:d,debounce:u=0,id:f,className:p,onResize:x,style:v={}}=e,w=h.useRef(null),b=h.useRef();b.current=x,h.useImperativeHandle(t,()=>w.current);var[C,N]=h.useState({containerWidth:s.width,containerHeight:s.height}),S=h.useCallback((E,I)=>{N(z=>{var $=Math.round(E),P=Math.round(I);return z.containerWidth===$&&z.containerHeight===P?z:{containerWidth:$,containerHeight:P}})},[]);h.useEffect(()=>{if(w.current==null||typeof ResizeObserver>"u")return ux;var E=P=>{var O,{width:B,height:Q}=P[0].contentRect;S(B,Q),(O=b.current)===null||O===void 0||O.call(b,B,Q)};u>0&&(E=W1e(E,u,{trailing:!0,leading:!1}));var I=new ResizeObserver(E),{width:z,height:$}=w.current.getBoundingClientRect();return S(z,$),I.observe(w.current),()=>{I.disconnect()}},[S,u]);var{containerWidth:A,containerHeight:k}=C;fv(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:_,calculatedHeight:T}=rq(A,k,{width:r,height:i,aspect:n,maxHeight:c});return fv(_!=null&&_>0||T!=null&&T>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,_,T,r,i,l,o,n),h.createElement("div",{id:f?"".concat(f):void 0,className:Tt("recharts-responsive-container",p),style:mR(mR({},v),{},{width:r,height:i,minWidth:l,minHeight:o,maxHeight:c}),ref:w},h.createElement("div",{style:Q1e({width:r,height:i})},h.createElement(lq,{width:_,height:T},d)))}),b2=h.forwardRef((e,t)=>{var n=s4();if(vl(n.width)&&vl(n.height))return e.children;var{width:s,height:r}=X1e({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:i,calculatedHeight:l}=rq(void 0,void 0,{width:s,height:r,aspect:e.aspect,maxHeight:e.maxHeight});return Dt(i)&&Dt(l)?h.createElement(lq,{width:i,height:l},e.children):h.createElement(aCe,FE({},e,{width:s,height:r,ref:t}))});function oq(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var kN=()=>{var e,t=Ls(),n=Mt(R1e),s=Mt(TN),r=(e=Mt(EN))===null||e===void 0?void 0:e.padding;return!t||!s||!r?n:{width:s.width-r.left-r.right,height:s.height-r.top-r.bottom,x:r.left,y:r.top}},nCe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},cq=()=>{var e;return(e=Mt(Xn))!==null&&e!==void 0?e:nCe},r4=()=>Mt(Io),i4=()=>Mt($o),sCe=()=>Mt(e=>e.layout.margin),ma=e=>e.layout.layoutType,Rf=()=>Mt(ma),rCe=()=>{var e=Rf();return e!==void 0},LN=e=>{var t=Ga(),n=Ls(),{width:s,height:r}=e,i=s4(),l=s,o=r;return i&&(l=i.width>0?i.width:s,o=i.height>0?i.height:r),h.useEffect(()=>{!n&&vl(l)&&vl(o)&&t(c1e({width:l,height:o}))},[t,n,l,o]),null},dq=Symbol.for("immer-nothing"),fR=Symbol.for("immer-draftable"),Lr=Symbol.for("immer-state");function Ei(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var ip=Object.getPrototypeOf;function xf(e){return!!e&&!!e[Lr]}function gu(e){return e?uq(e)||Array.isArray(e)||!!e[fR]||!!e.constructor?.[fR]||xx(e)||DN(e):!1}var iCe=Object.prototype.constructor.toString(),hR=new WeakMap;function uq(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let s=hR.get(n);return s===void 0&&(s=Function.toString.call(n),hR.set(n,s)),s===iCe}function hv(e,t,n=!0){PN(e)===0?(n?Reflect.ownKeys(e):Object.keys(e)).forEach(r=>{t(r,e[r],e)}):e.forEach((s,r)=>t(r,s,e))}function PN(e){const t=e[Lr];return t?t.type_:Array.isArray(e)?1:xx(e)?2:DN(e)?3:0}function BE(e,t){return PN(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function mq(e,t,n){const s=PN(e);s===2?e.set(t,n):s===3?e.add(n):e[t]=n}function lCe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function xx(e){return e instanceof Map}function DN(e){return e instanceof Set}function Ed(e){return e.copy_||e.base_}function HE(e,t){if(xx(e))return new Map(e);if(DN(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=uq(e);if(t===!0||t==="class_only"&&!n){const s=Object.getOwnPropertyDescriptors(e);delete s[Lr];let r=Reflect.ownKeys(s);for(let i=0;i<r.length;i++){const l=r[i],o=s[l];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(s[l]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[l]})}return Object.create(ip(e),s)}else{const s=ip(e);if(s!==null&&n)return{...e};const r=Object.create(s);return Object.assign(r,e)}}function l4(e,t=!1){return ON(e)||xf(e)||!gu(e)||(PN(e)>1&&Object.defineProperties(e,{set:by,add:by,clear:by,delete:by}),Object.freeze(e),t&&Object.values(e).forEach(n=>l4(n,!0))),e}function oCe(){Ei(2)}var by={value:oCe};function ON(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var cCe={};function pu(e){const t=cCe[e];return t||Ei(0,e),t}var lp;function fq(){return lp}function dCe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function gR(e,t){t&&(pu("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function GE(e){WE(e),e.drafts_.forEach(uCe),e.drafts_=null}function WE(e){e===lp&&(lp=e.parent_)}function pR(e){return lp=dCe(lp,e)}function uCe(e){const t=e[Lr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function xR(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Lr].modified_&&(GE(t),Ei(4)),gu(e)&&(e=gv(t,e),t.parent_||pv(t,e)),t.patches_&&pu("Patches").generateReplacementPatches_(n[Lr].base_,e,t.patches_,t.inversePatches_)):e=gv(t,n,[]),GE(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==dq?e:void 0}function gv(e,t,n){if(ON(t))return t;const s=e.immer_.shouldUseStrictIteration(),r=t[Lr];if(!r)return hv(t,(i,l)=>yR(e,r,t,i,l,n),s),t;if(r.scope_!==e)return t;if(!r.modified_)return pv(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let l=i,o=!1;r.type_===3&&(l=new Set(i),i.clear(),o=!0),hv(l,(c,d)=>yR(e,r,i,c,d,n,o),s),pv(e,i,!1),n&&e.patches_&&pu("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function yR(e,t,n,s,r,i,l){if(r==null||typeof r!="object"&&!l)return;const o=ON(r);if(!(o&&!l)){if(xf(r)){const c=i&&t&&t.type_!==3&&!BE(t.assigned_,s)?i.concat(s):void 0,d=gv(e,r,c);if(mq(n,s,d),xf(d))e.canAutoFreeze_=!1;else return}else l&&n.add(r);if(gu(r)&&!o){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[s]===r&&o)return;gv(e,r),(!t||!t.scope_.parent_)&&typeof s!="symbol"&&(xx(n)?n.has(s):Object.prototype.propertyIsEnumerable.call(n,s))&&pv(e,r)}}}function pv(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&l4(t,n)}function mCe(e,t){const n=Array.isArray(e),s={type_:n?1:0,scope_:t?t.scope_:fq(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=s,i=o4;n&&(r=[s],i=op);const{revoke:l,proxy:o}=Proxy.revocable(r,i);return s.draft_=o,s.revoke_=l,o}var o4={get(e,t){if(t===Lr)return e;const n=Ed(e);if(!BE(n,t))return fCe(e,n,t);const s=n[t];return e.finalized_||!gu(s)?s:s===v2(e.base_,t)?(w2(e),e.copy_[t]=qE(s,e)):s},has(e,t){return t in Ed(e)},ownKeys(e){return Reflect.ownKeys(Ed(e))},set(e,t,n){const s=hq(Ed(e),t);if(s?.set)return s.set.call(e.draft_,n),!0;if(!e.modified_){const r=v2(Ed(e),t),i=r?.[Lr];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(lCe(n,r)&&(n!==void 0||BE(e.base_,t)))return!0;w2(e),VE(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return v2(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,w2(e),VE(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Ed(e),s=Reflect.getOwnPropertyDescriptor(n,t);return s&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:s.enumerable,value:n[t]}},defineProperty(){Ei(11)},getPrototypeOf(e){return ip(e.base_)},setPrototypeOf(){Ei(12)}},op={};hv(o4,(e,t)=>{op[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});op.deleteProperty=function(e,t){return op.set.call(this,e,t,void 0)};op.set=function(e,t,n){return o4.set.call(this,e[0],t,n,e[0])};function v2(e,t){const n=e[Lr];return(n?Ed(n):e)[t]}function fCe(e,t,n){const s=hq(t,n);return s?"value"in s?s.value:s.get?.call(e.draft_):void 0}function hq(e,t){if(!(t in e))return;let n=ip(e);for(;n;){const s=Object.getOwnPropertyDescriptor(n,t);if(s)return s;n=ip(n)}}function VE(e){e.modified_||(e.modified_=!0,e.parent_&&VE(e.parent_))}function w2(e){e.copy_||(e.copy_=HE(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var hCe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,n,s)=>{if(typeof t=="function"&&typeof n!="function"){const i=n;n=t;const l=this;return function(c=i,...d){return l.produce(c,u=>n.call(this,u,...d))}}typeof n!="function"&&Ei(6),s!==void 0&&typeof s!="function"&&Ei(7);let r;if(gu(t)){const i=pR(this),l=qE(t,void 0);let o=!0;try{r=n(l),o=!1}finally{o?GE(i):WE(i)}return gR(i,s),xR(r,i)}else if(!t||typeof t!="object"){if(r=n(t),r===void 0&&(r=t),r===dq&&(r=void 0),this.autoFreeze_&&l4(r,!0),s){const i=[],l=[];pu("Patches").generateReplacementPatches_(t,r,i,l),s(i,l)}return r}else Ei(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(l,...o)=>this.produceWithPatches(l,c=>t(c,...o));let s,r;return[this.produce(t,n,(l,o)=>{s=l,r=o}),s,r]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){gu(e)||Ei(8),xf(e)&&(e=gCe(e));const t=pR(this),n=qE(e,void 0);return n[Lr].isManual_=!0,WE(t),n}finishDraft(e,t){const n=e&&e[Lr];(!n||!n.isManual_)&&Ei(9);const{scope_:s}=n;return gR(s,t),xR(void 0,s)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(r.path.length===0&&r.op==="replace"){e=r.value;break}}n>-1&&(t=t.slice(n+1));const s=pu("Patches").applyPatches_;return xf(e)?s(e,t):this.produce(e,r=>s(r,t))}};function qE(e,t){const n=xx(e)?pu("MapSet").proxyMap_(e,t):DN(e)?pu("MapSet").proxySet_(e,t):mCe(e,t);return(t?t.scope_:fq()).drafts_.push(n),n}function gCe(e){return xf(e)||Ei(10,e),gq(e)}function gq(e){if(!gu(e)||ON(e))return e;const t=e[Lr];let n,s=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=HE(e,t.scope_.immer_.useStrictShallowCopy_),s=t.scope_.immer_.shouldUseStrictIteration()}else n=HE(e,!0);return hv(n,(r,i)=>{mq(n,r,gq(i))},s),t&&(t.finalized_=!1),n}var pCe=new hCe;pCe.produce;var xCe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},pq=cr({name:"legend",initialState:xCe,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Za()},replaceLegendPayload:{reducer(e,t){var{prev:n,next:s}=t.payload,r=ki(e).payload.indexOf(n);r>-1&&(e.payload[r]=s)},prepare:Za()},removeLegendPayload:{reducer(e,t){var n=ki(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)},prepare:Za()}}}),{setLegendSize:bR,setLegendSettings:yCe,addLegendPayload:xq,replaceLegendPayload:yq,removeLegendPayload:bq}=pq.actions,bCe=pq.reducer,vCe=["contextPayload"];function YE(){return YE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},YE.apply(null,arguments)}function vR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function yf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vR(Object(n),!0).forEach(function(s){wCe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function wCe(e,t,n){return(t=NCe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NCe(e){var t=jCe(e,"string");return typeof t=="symbol"?t:t+""}function jCe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function CCe(e,t){if(e==null)return{};var n,s,r=SCe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function SCe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}function _Ce(e){return e.value}function ACe(e){var{contextPayload:t}=e,n=CCe(e,vCe),s=bV(t,e.payloadUniqBy,_Ce),r=yf(yf({},n),{},{payload:s});return h.isValidElement(e.content)?h.cloneElement(e.content,r):typeof e.content=="function"?h.createElement(e.content,r):h.createElement(PNe,r)}function ECe(e,t,n,s,r,i){var{layout:l,align:o,verticalAlign:c}=t,d,u;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(o==="center"&&l==="vertical"?d={left:((s||0)-i.width)/2}:d=o==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?u={top:((r||0)-i.height)/2}:u=c==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),yf(yf({},d),u)}function TCe(e){var t=Ga();return h.useEffect(()=>{t(yCe(e))},[t,e]),null}function kCe(e){var t=Ga();return h.useEffect(()=>(t(bR(e)),()=>{t(bR({width:0,height:0}))}),[t,e]),null}function LCe(e,t,n,s){return e==="vertical"&&Dt(t)?{height:t}:e==="horizontal"?{width:n||s}:null}var PCe={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function vq(e){var t=$n(e,PCe),n=uje(),s=aNe(),r=sCe(),{width:i,height:l,wrapperStyle:o,portal:c}=t,[d,u]=jV([n]),f=r4(),p=i4();if(f==null||p==null)return null;var x=f-(r?.left||0)-(r?.right||0),v=LCe(t.layout,l,i,x),w=c?o:yf(yf({position:"absolute",width:v?.width||i||"auto",height:v?.height||l||"auto"},ECe(o,t,r,f,p,d)),o),b=c??s;if(b==null||n==null)return null;var C=h.createElement("div",{className:"recharts-legend-wrapper",style:w,ref:u},h.createElement(TCe,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!c&&h.createElement(kCe,{width:d.width,height:d.height}),h.createElement(ACe,YE({},t,v,{margin:r,chartWidth:f,chartHeight:p,contextPayload:n})));return Sf.createPortal(C,b)}vq.displayName="Legend";function KE(){return KE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},KE.apply(null,arguments)}function wR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function N2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wR(Object(n),!0).forEach(function(s){DCe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function DCe(e,t,n){return(t=OCe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OCe(e){var t=MCe(e,"string");return typeof t=="symbol"?t:t+""}function MCe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ICe(e){return Array.isArray(e)&&bl(e[0])&&bl(e[1])?e.join(" ~ "):e}var $Ce=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:s={},labelStyle:r={},payload:i,formatter:l,itemSorter:o,wrapperClassName:c,labelClassName:d,label:u,labelFormatter:f,accessibilityLayer:p=!1}=e,x=()=>{if(i&&i.length){var k={padding:0,margin:0},_=(o?xN(i,o):i).map((T,E)=>{if(T.type==="none")return null;var I=T.formatter||l||ICe,{value:z,name:$}=T,P=z,O=$;if(I){var B=I(z,$,T,E,i);if(Array.isArray(B))[P,O]=B;else if(B!=null)P=B;else return null}var Q=N2({display:"block",paddingTop:4,paddingBottom:4,color:T.color||"#000"},s);return h.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(E),style:Q},bl(O)?h.createElement("span",{className:"recharts-tooltip-item-name"},O):null,bl(O)?h.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,h.createElement("span",{className:"recharts-tooltip-item-value"},P),h.createElement("span",{className:"recharts-tooltip-item-unit"},T.unit||""))});return h.createElement("ul",{className:"recharts-tooltip-item-list",style:k},_)}return null},v=N2({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),w=N2({margin:0},r),b=!an(u),C=b?u:"",N=Tt("recharts-default-tooltip",c),S=Tt("recharts-tooltip-label",d);b&&f&&i!==void 0&&i!==null&&(C=f(u,i));var A=p?{role:"status","aria-live":"assertive"}:{};return h.createElement("div",KE({className:N,style:v},A),h.createElement("p",{className:S,style:w},h.isValidElement(C)?C:"".concat(C)),x())},Kh="recharts-tooltip-wrapper",RCe={visibility:"hidden"};function zCe(e){var{coordinate:t,translateX:n,translateY:s}=e;return Tt(Kh,{["".concat(Kh,"-right")]:Dt(n)&&t&&Dt(t.x)&&n>=t.x,["".concat(Kh,"-left")]:Dt(n)&&t&&Dt(t.x)&&n<t.x,["".concat(Kh,"-bottom")]:Dt(s)&&t&&Dt(t.y)&&s>=t.y,["".concat(Kh,"-top")]:Dt(s)&&t&&Dt(t.y)&&s<t.y})}function NR(e){var{allowEscapeViewBox:t,coordinate:n,key:s,offsetTopLeft:r,position:i,reverseDirection:l,tooltipDimension:o,viewBox:c,viewBoxDimension:d}=e;if(i&&Dt(i[s]))return i[s];var u=n[s]-o-(r>0?r:0),f=n[s]+r;if(t[s])return l[s]?u:f;var p=c[s];if(p==null)return 0;if(l[s]){var x=u,v=p;return x<v?Math.max(f,p):Math.max(u,p)}if(d==null)return 0;var w=f+o,b=p+d;return w>b?Math.max(u,p):Math.max(f,p)}function UCe(e){var{translateX:t,translateY:n,useTranslate3d:s}=e;return{transform:s?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function FCe(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:s,position:r,reverseDirection:i,tooltipBox:l,useTranslate3d:o,viewBox:c}=e,d,u,f;return l.height>0&&l.width>0&&n?(u=NR({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:s,position:r,reverseDirection:i,tooltipDimension:l.width,viewBox:c,viewBoxDimension:c.width}),f=NR({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:s,position:r,reverseDirection:i,tooltipDimension:l.height,viewBox:c,viewBoxDimension:c.height}),d=UCe({translateX:u,translateY:f,useTranslate3d:o})):d=RCe,{cssProperties:d,cssClasses:zCe({translateX:u,translateY:f,coordinate:n})}}function jR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function vy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jR(Object(n),!0).forEach(function(s){QE(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function QE(e,t,n){return(t=BCe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BCe(e){var t=HCe(e,"string");return typeof t=="symbol"?t:t+""}function HCe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class GCe extends h.PureComponent{constructor(){super(...arguments),QE(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),QE(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,s,r,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(s=this.props.coordinate)===null||s===void 0?void 0:s.x)!==null&&n!==void 0?n:0,y:(r=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&r!==void 0?r:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:s,animationEasing:r,children:i,coordinate:l,hasPayload:o,isAnimationActive:c,offset:d,position:u,reverseDirection:f,useTranslate3d:p,viewBox:x,wrapperStyle:v,lastBoundingBox:w,innerRef:b,hasPortalFromProps:C}=this.props,{cssClasses:N,cssProperties:S}=FCe({allowEscapeViewBox:n,coordinate:l,offsetTopLeft:d,position:u,reverseDirection:f,tooltipBox:{height:w.height,width:w.width},useTranslate3d:p,viewBox:x}),A=C?{}:vy(vy({transition:c&&t?"transform ".concat(s,"ms ").concat(r):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&o?"visible":"hidden",position:"absolute",top:0,left:0}),k=vy(vy({},A),{},{visibility:!this.state.dismissed&&t&&o?"visible":"hidden"},v);return h.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:N,style:k,ref:b},i)}}var wq=()=>{var e;return(e=Mt(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function XE(){return XE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},XE.apply(null,arguments)}function CR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function SR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CR(Object(n),!0).forEach(function(s){WCe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function WCe(e,t,n){return(t=VCe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VCe(e){var t=qCe(e,"string");return typeof t=="symbol"?t:t+""}function qCe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _R={curveBasisClosed:$fe,curveBasisOpen:Rfe,curveBasis:Ife,curveBumpX:tG,curveBumpY:aG,curveLinearClosed:Ffe,curveLinear:tx,curveMonotoneX:fE,curveMonotoneY:bG,curveNatural:wG,curveStep:NG,curveStepAfter:CG,curveStepBefore:jG},xv=e=>ln(e.x)&&ln(e.y),AR=e=>e.base!=null&&xv(e.base)&&xv(e),Qh=e=>e.x,Xh=e=>e.y,YCe=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(dx(e));return(n==="curveMonotone"||n==="curveBump")&&t?_R["".concat(n).concat(t==="vertical"?"Y":"X")]:_R[n]||tx},KCe=e=>{var{type:t="linear",points:n=[],baseLine:s,layout:r,connectNulls:i=!1}=e,l=YCe(t,r),o=i?n.filter(xv):n,c;if(Array.isArray(s)){var d=n.map((x,v)=>SR(SR({},x),{},{base:s[v]}));r==="vertical"?c=pg().y(Xh).x1(Qh).x0(x=>x.base.x):c=pg().x(Qh).y1(Xh).y0(x=>x.base.y);var u=c.defined(AR).curve(l),f=i?d.filter(AR):d;return u(f)}r==="vertical"&&Dt(s)?c=pg().y(Xh).x1(Qh).x0(s):Dt(s)?c=pg().x(Qh).y1(Xh).y0(s):c=uL().x(Qh).y(Xh);var p=c.defined(xv).curve(l);return p(o)},c4=e=>{var{className:t,points:n,path:s,pathRef:r}=e,i=Rf();if((!n||!n.length)&&!s)return null;var l={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||i,connectNulls:e.connectNulls},o=n&&n.length?KCe(l):s;return h.createElement("path",XE({},kr(e),VL(e),{className:Tt("recharts-curve",t),d:o===null?void 0:o,ref:r}))},QCe=["x","y","top","left","width","height","className"];function ZE(){return ZE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ZE.apply(null,arguments)}function ER(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function XCe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ER(Object(n),!0).forEach(function(s){ZCe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ER(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function ZCe(e,t,n){return(t=JCe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JCe(e){var t=eSe(e,"string");return typeof t=="symbol"?t:t+""}function eSe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tSe(e,t){if(e==null)return{};var n,s,r=aSe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function aSe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}var nSe=(e,t,n,s,r,i)=>"M".concat(e,",").concat(r,"v").concat(s,"M").concat(i,",").concat(t,"h").concat(n),sSe=e=>{var{x:t=0,y:n=0,top:s=0,left:r=0,width:i=0,height:l=0,className:o}=e,c=tSe(e,QCe),d=XCe({x:t,y:n,top:s,left:r,width:i,height:l},c);return!Dt(t)||!Dt(n)||!Dt(i)||!Dt(l)||!Dt(s)||!Dt(r)?null:h.createElement("path",ZE({},$s(d),{className:Tt("recharts-cross",o),d:nSe(t,n,i,l,s,r)}))};function rSe(e,t,n,s){var r=s/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-r:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-r,width:e==="horizontal"?s:n.width-1,height:e==="horizontal"?n.height-1:s}}function TR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function kR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TR(Object(n),!0).forEach(function(s){iSe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function iSe(e,t,n){return(t=lSe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lSe(e){var t=oSe(e,"string");return typeof t=="symbol"?t:t+""}function oSe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cSe=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),Nq=(e,t,n)=>e.map(s=>"".concat(cSe(s)," ").concat(t,"ms ").concat(n)).join(","),dSe=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,s)=>n.filter(r=>s.includes(r))),cp=(e,t)=>Object.keys(t).reduce((n,s)=>kR(kR({},n),{},{[s]:e(s,t[s])}),{});function LR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function Fn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LR(Object(n),!0).forEach(function(s){uSe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function uSe(e,t,n){return(t=mSe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mSe(e){var t=fSe(e,"string");return typeof t=="symbol"?t:t+""}function fSe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yv=(e,t,n)=>e+(t-e)*n,JE=e=>{var{from:t,to:n}=e;return t!==n},jq=(e,t,n)=>{var s=cp((r,i)=>{if(JE(i)){var[l,o]=e(i.from,i.to,i.velocity);return Fn(Fn({},i),{},{from:l,velocity:o})}return i},t);return n<1?cp((r,i)=>JE(i)&&s[r]!=null?Fn(Fn({},i),{},{velocity:yv(i.velocity,s[r].velocity,n),from:yv(i.from,s[r].from,n)}):i,t):jq(e,s,n-1)};function hSe(e,t,n,s,r,i){var l,o=s.reduce((p,x)=>Fn(Fn({},p),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),c=()=>cp((p,x)=>x.from,o),d=()=>!Object.values(o).filter(JE).length,u=null,f=p=>{l||(l=p);var x=p-l,v=x/n.dt;o=jq(n,o,v),r(Fn(Fn(Fn({},e),t),c())),l=p,d()||(u=i.setTimeout(f))};return()=>(u=i.setTimeout(f),()=>{var p;(p=u)===null||p===void 0||p()})}function gSe(e,t,n,s,r,i,l){var o=null,c=r.reduce((f,p)=>{var x=e[p],v=t[p];return x==null||v==null?f:Fn(Fn({},f),{},{[p]:[x,v]})},{}),d,u=f=>{d||(d=f);var p=(f-d)/s,x=cp((w,b)=>yv(...b,n(p)),c);if(i(Fn(Fn(Fn({},e),t),x)),p<1)o=l.setTimeout(u);else{var v=cp((w,b)=>yv(...b,n(1)),c);i(Fn(Fn(Fn({},e),t),v))}};return()=>(o=l.setTimeout(u),()=>{var f;(f=o)===null||f===void 0||f()})}const pSe=(e,t,n,s,r,i)=>{var l=dSe(e,t);return n==null?()=>(r(Fn(Fn({},e),t)),()=>{}):n.isStepper===!0?hSe(e,t,n,l,r,i):gSe(e,t,n,s,l,r,i)};var bv=1e-4,Cq=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],Sq=(e,t)=>e.map((n,s)=>n*t**s).reduce((n,s)=>n+s),PR=(e,t)=>n=>{var s=Cq(e,t);return Sq(s,n)},xSe=(e,t)=>n=>{var s=Cq(e,t),r=[...s.map((i,l)=>i*l).slice(1),0];return Sq(r,n)},ySe=e=>{var t,n=e.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var s=(t=n[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(s==null||s.length!==4)return null;var r=s.map(i=>parseFloat(i));return[r[0],r[1],r[2],r[3]]},bSe=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var r=ySe(n[0]);if(r)return r}}return n.length===4?n:[0,0,1,1]},vSe=(e,t,n,s)=>{var r=PR(e,n),i=PR(t,s),l=xSe(e,n),o=d=>d>1?1:d<0?0:d,c=d=>{for(var u=d>1?1:d,f=u,p=0;p<8;++p){var x=r(f)-u,v=l(f);if(Math.abs(x-u)<bv||v<bv)return i(f);f=o(f-x/v)}return i(f)};return c.isStepper=!1,c},DR=function(){return vSe(...bSe(...arguments))},wSe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:s=8,dt:r=17}=t,i=(l,o,c)=>{var d=-(l-o)*n,u=c*s,f=c+(d-u)*r/1e3,p=c*r/1e3+l;return Math.abs(p-o)<bv&&Math.abs(f)<bv?[o,0]:[p,f]};return i.isStepper=!0,i.dt=r,i},NSe=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return DR(e);case"spring":return wSe();default:if(e.split("(")[0]==="cubic-bezier")return DR(e)}return typeof e=="function"?e:null};function jSe(e){var t,n=()=>null,s=!1,r=null,i=l=>{if(!s){if(Array.isArray(l)){if(!l.length)return;var o=l,[c,...d]=o;if(typeof c=="number"){r=e.setTimeout(i.bind(null,d),c);return}i(c),r=e.setTimeout(i.bind(null,d));return}typeof l=="string"&&(t=l,n(t)),typeof l=="object"&&(t=l,n(t)),typeof l=="function"&&l()}};return{stop:()=>{s=!0},start:l=>{s=!1,r&&(r(),r=null),i(l)},subscribe:l=>(n=l,()=>{n=()=>null}),getTimeoutController:()=>e}}class CSe{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=performance.now(),r=null,i=l=>{l-s>=n?t(l):typeof requestAnimationFrame=="function"&&(r=requestAnimationFrame(i))};return r=requestAnimationFrame(i),()=>{r!=null&&cancelAnimationFrame(r)}}}function SSe(){return jSe(new CSe)}var _Se=h.createContext(SSe);function ASe(e,t){var n=h.useContext(_Se);return h.useMemo(()=>t??n(e),[e,t,n])}var ESe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),MN={isSsr:ESe()},TSe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},OR={t:0},j2={t:1};function yx(e){var t=$n(e,TSe),{isActive:n,canBegin:s,duration:r,easing:i,begin:l,onAnimationEnd:o,onAnimationStart:c,children:d}=t,u=n==="auto"?!MN.isSsr:n,f=ASe(t.animationId,t.animationManager),[p,x]=h.useState(u?OR:j2),v=h.useRef(null);return h.useEffect(()=>{u||x(j2)},[u]),h.useEffect(()=>{if(!u||!s)return ux;var w=pSe(OR,j2,NSe(i),r,x,f.getTimeoutController()),b=()=>{v.current=w()};return f.start([c,l,b,r,o]),()=>{f.stop(),v.current&&v.current(),o()}},[u,s,r,i,l,c,o,f]),d(p.t)}function bx(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=h.useRef(ap(t)),s=h.useRef(e);return s.current!==e&&(n.current=ap(t),s.current=e),n.current}var kSe=["radius"],LSe=["radius"],MR,IR,$R,RR,zR,UR,FR,BR,HR,GR;function WR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function VR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?WR(Object(n),!0).forEach(function(s){PSe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function PSe(e,t,n){return(t=DSe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DSe(e){var t=OSe(e,"string");return typeof t=="symbol"?t:t+""}function OSe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vv(){return vv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},vv.apply(null,arguments)}function qR(e,t){if(e==null)return{};var n,s,r=MSe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function MSe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}function Wi(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var YR=(e,t,n,s,r)=>{var i=kc(n),l=kc(s),o=Math.min(Math.abs(i)/2,Math.abs(l)/2),c=l>=0?1:-1,d=i>=0?1:-1,u=l>=0&&i>=0||l<0&&i<0?1:0,f;if(o>0&&r instanceof Array){for(var p=[0,0,0,0],x=0,v=4;x<v;x++)p[x]=r[x]>o?o:r[x];f=hn(MR||(MR=Wi(["M",",",""])),e,t+c*p[0]),p[0]>0&&(f+=hn(IR||(IR=Wi(["A ",",",",0,0,",",",",",""])),p[0],p[0],u,e+d*p[0],t)),f+=hn($R||($R=Wi(["L ",",",""])),e+n-d*p[1],t),p[1]>0&&(f+=hn(RR||(RR=Wi(["A ",",",",0,0,",`,
        `,",",""])),p[1],p[1],u,e+n,t+c*p[1])),f+=hn(zR||(zR=Wi(["L ",",",""])),e+n,t+s-c*p[2]),p[2]>0&&(f+=hn(UR||(UR=Wi(["A ",",",",0,0,",`,
        `,",",""])),p[2],p[2],u,e+n-d*p[2],t+s)),f+=hn(FR||(FR=Wi(["L ",",",""])),e+d*p[3],t+s),p[3]>0&&(f+=hn(BR||(BR=Wi(["A ",",",",0,0,",`,
        `,",",""])),p[3],p[3],u,e,t+s-c*p[3])),f+="Z"}else if(o>0&&r===+r&&r>0){var w=Math.min(o,r);f=hn(HR||(HR=Wi(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+c*w,w,w,u,e+d*w,t,e+n-d*w,t,w,w,u,e+n,t+c*w,e+n,t+s-c*w,w,w,u,e+n-d*w,t+s,e+d*w,t+s,w,w,u,e,t+s-c*w)}else f=hn(GR||(GR=Wi(["M ",","," h "," v "," h "," Z"])),e,t,n,s,-n);return f},KR={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},_q=e=>{var t=$n(e,KR),n=h.useRef(null),[s,r]=h.useState(-1);h.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var ee=n.current.getTotalLength();ee&&r(ee)}catch{}},[]);var{x:i,y:l,width:o,height:c,radius:d,className:u}=t,{animationEasing:f,animationDuration:p,animationBegin:x,isAnimationActive:v,isUpdateAnimationActive:w}=t,b=h.useRef(o),C=h.useRef(c),N=h.useRef(i),S=h.useRef(l),A=h.useMemo(()=>({x:i,y:l,width:o,height:c,radius:d}),[i,l,o,c,d]),k=bx(A,"rectangle-");if(i!==+i||l!==+l||o!==+o||c!==+c||o===0||c===0)return null;var _=Tt("recharts-rectangle",u);if(!w){var T=$s(t),{radius:E}=T,I=qR(T,kSe);return h.createElement("path",vv({},I,{x:kc(i),y:kc(l),width:kc(o),height:kc(c),radius:typeof d=="number"?d:void 0,className:_,d:YR(i,l,o,c,d)}))}var z=b.current,$=C.current,P=N.current,O=S.current,B="0px ".concat(s===-1?1:s,"px"),Q="".concat(s,"px 0px"),F=Nq(["strokeDasharray"],p,typeof f=="string"?f:KR.animationEasing);return h.createElement(yx,{animationId:k,key:k,canBegin:s>0,duration:p,easing:f,isActive:w,begin:x},ee=>{var V=Ja(z,o,ee),de=Ja($,c,ee),oe=Ja(P,i,ee),Z=Ja(O,l,ee);n.current&&(b.current=V,C.current=de,N.current=oe,S.current=Z);var R;v?ee>0?R={transition:F,strokeDasharray:Q}:R={strokeDasharray:B}:R={strokeDasharray:Q};var ve=$s(t),{radius:X}=ve,je=qR(ve,LSe);return h.createElement("path",vv({},je,{radius:typeof d=="number"?d:void 0,className:_,d:YR(oe,Z,V,de,d),ref:n,style:VR(VR({},R),t.style)}))})};function QR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function XR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QR(Object(n),!0).forEach(function(s){ISe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function ISe(e,t,n){return(t=$Se(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $Se(e){var t=RSe(e,"string");return typeof t=="symbol"?t:t+""}function RSe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wv=Math.PI/180,zSe=e=>e*180/Math.PI,Pn=(e,t,n,s)=>({x:e+Math.cos(-wv*s)*n,y:t+Math.sin(-wv*s)*n}),Aq=function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(s.left||0)-(s.right||0)),Math.abs(n-(s.top||0)-(s.bottom||0)))/2},USe=(e,t)=>{var{x:n,y:s}=e,{x:r,y:i}=t;return Math.sqrt((n-r)**2+(s-i)**2)},FSe=(e,t)=>{var{x:n,y:s}=e,{cx:r,cy:i}=t,l=USe({x:n,y:s},{x:r,y:i});if(l<=0)return{radius:l,angle:0};var o=(n-r)/l,c=Math.acos(o);return s>i&&(c=2*Math.PI-c),{radius:l,angle:zSe(c),angleInRadian:c}},BSe=e=>{var{startAngle:t,endAngle:n}=e,s=Math.floor(t/360),r=Math.floor(n/360),i=Math.min(s,r);return{startAngle:t-i*360,endAngle:n-i*360}},HSe=(e,t)=>{var{startAngle:n,endAngle:s}=t,r=Math.floor(n/360),i=Math.floor(s/360),l=Math.min(r,i);return e+l*360},GSe=(e,t)=>{var{chartX:n,chartY:s}=e,{radius:r,angle:i}=FSe({x:n,y:s},t),{innerRadius:l,outerRadius:o}=t;if(r<l||r>o||r===0)return null;var{startAngle:c,endAngle:d}=BSe(t),u=i,f;if(c<=d){for(;u>d;)u-=360;for(;u<c;)u+=360;f=u>=c&&u<=d}else{for(;u>c;)u-=360;for(;u<d;)u+=360;f=u>=d&&u<=c}return f?XR(XR({},t),{},{radius:r,angle:HSe(u,t)}):null};function Eq(e){var{cx:t,cy:n,radius:s,startAngle:r,endAngle:i}=e,l=Pn(t,n,s,r),o=Pn(t,n,s,i);return{points:[l,o],cx:t,cy:n,radius:s,startAngle:r,endAngle:i}}var ZR,JR,ez,tz,az,nz,sz;function eT(){return eT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},eT.apply(null,arguments)}function Fd(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var WSe=(e,t)=>{var n=is(t-e),s=Math.min(Math.abs(t-e),359.999);return n*s},wy=e=>{var{cx:t,cy:n,radius:s,angle:r,sign:i,isExternal:l,cornerRadius:o,cornerIsExternal:c}=e,d=o*(l?1:-1)+s,u=Math.asin(o/d)/wv,f=c?r:r+i*u,p=Pn(t,n,d,f),x=Pn(t,n,s,f),v=c?r-i*u:r,w=Pn(t,n,d*Math.cos(u*wv),v);return{center:p,circleTangency:x,lineTangency:w,theta:u}},Tq=e=>{var{cx:t,cy:n,innerRadius:s,outerRadius:r,startAngle:i,endAngle:l}=e,o=WSe(i,l),c=i+o,d=Pn(t,n,r,i),u=Pn(t,n,r,c),f=hn(ZR||(ZR=Fd(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),d.x,d.y,r,r,+(Math.abs(o)>180),+(i>c),u.x,u.y);if(s>0){var p=Pn(t,n,s,i),x=Pn(t,n,s,c);f+=hn(JR||(JR=Fd(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),x.x,x.y,s,s,+(Math.abs(o)>180),+(i<=c),p.x,p.y)}else f+=hn(ez||(ez=Fd(["L ",","," Z"])),t,n);return f},VSe=e=>{var{cx:t,cy:n,innerRadius:s,outerRadius:r,cornerRadius:i,forceCornerRadius:l,cornerIsExternal:o,startAngle:c,endAngle:d}=e,u=is(d-c),{circleTangency:f,lineTangency:p,theta:x}=wy({cx:t,cy:n,radius:r,angle:c,sign:u,cornerRadius:i,cornerIsExternal:o}),{circleTangency:v,lineTangency:w,theta:b}=wy({cx:t,cy:n,radius:r,angle:d,sign:-u,cornerRadius:i,cornerIsExternal:o}),C=o?Math.abs(c-d):Math.abs(c-d)-x-b;if(C<0)return l?hn(tz||(tz=Fd(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),p.x,p.y,i,i,i*2,i,i,-i*2):Tq({cx:t,cy:n,innerRadius:s,outerRadius:r,startAngle:c,endAngle:d});var N=hn(az||(az=Fd(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),p.x,p.y,i,i,+(u<0),f.x,f.y,r,r,+(C>180),+(u<0),v.x,v.y,i,i,+(u<0),w.x,w.y);if(s>0){var{circleTangency:S,lineTangency:A,theta:k}=wy({cx:t,cy:n,radius:s,angle:c,sign:u,isExternal:!0,cornerRadius:i,cornerIsExternal:o}),{circleTangency:_,lineTangency:T,theta:E}=wy({cx:t,cy:n,radius:s,angle:d,sign:-u,isExternal:!0,cornerRadius:i,cornerIsExternal:o}),I=o?Math.abs(c-d):Math.abs(c-d)-k-E;if(I<0&&i===0)return"".concat(N,"L").concat(t,",").concat(n,"Z");N+=hn(nz||(nz=Fd(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),T.x,T.y,i,i,+(u<0),_.x,_.y,s,s,+(I>180),+(u>0),S.x,S.y,i,i,+(u<0),A.x,A.y)}else N+=hn(sz||(sz=Fd(["L",",","Z"])),t,n);return N},qSe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},kq=e=>{var t=$n(e,qSe),{cx:n,cy:s,innerRadius:r,outerRadius:i,cornerRadius:l,forceCornerRadius:o,cornerIsExternal:c,startAngle:d,endAngle:u,className:f}=t;if(i<r||d===u)return null;var p=Tt("recharts-sector",f),x=i-r,v=As(l,x,0,!0),w;return v>0&&Math.abs(d-u)<360?w=VSe({cx:n,cy:s,innerRadius:r,outerRadius:i,cornerRadius:Math.min(v,x/2),forceCornerRadius:o,cornerIsExternal:c,startAngle:d,endAngle:u}):w=Tq({cx:n,cy:s,innerRadius:r,outerRadius:i,startAngle:d,endAngle:u}),h.createElement("path",eT({},$s(t),{className:p,d:w}))};function YSe(e,t,n){if(e==="horizontal")return[{x:t.x,y:n.top},{x:t.x,y:n.top+n.height}];if(e==="vertical")return[{x:n.left,y:t.y},{x:n.left+n.width,y:t.y}];if(cV(t)){if(e==="centric"){var{cx:s,cy:r,innerRadius:i,outerRadius:l,angle:o}=t,c=Pn(s,r,i,o),d=Pn(s,r,l,o);return[{x:c.x,y:c.y},{x:d.x,y:d.y}]}return Eq(t)}}var C2={},S2={},_2={},rz;function KSe(){return rz||(rz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vV();function n(s){return t.isSymbol(s)?NaN:Number(s)}e.toNumber=n})(_2)),_2}var iz;function QSe(){return iz||(iz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=KSe();function n(s){return s?(s=t.toNumber(s),s===1/0||s===-1/0?(s<0?-1:1)*Number.MAX_VALUE:s===s?s:0):s===0?s:0}e.toFinite=n})(S2)),S2}var lz;function XSe(){return lz||(lz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wV(),n=QSe();function s(r,i,l){l&&typeof l!="number"&&t.isIterateeCall(r,i,l)&&(i=l=void 0),r=n.toFinite(r),i===void 0?(i=r,r=0):i=n.toFinite(i),l=l===void 0?r<i?1:-1:n.toFinite(l);const o=Math.max(Math.ceil((i-r)/(l||1)),0),c=new Array(o);for(let d=0;d<o;d++)c[d]=r,r+=l;return c}e.range=s})(C2)),C2}var A2,oz;function ZSe(){return oz||(oz=1,A2=XSe().range),A2}var JSe=ZSe();const Lq=Oi(JSe),vg=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Pk,scaleDiverging:a9,scaleDivergingLog:n9,scaleDivergingPow:nL,scaleDivergingSqrt:fme,scaleDivergingSymlog:s9,scaleIdentity:RH,scaleImplicit:aE,scaleLinear:Ow,scaleLog:Xg,scaleOrdinal:Vg,scalePoint:rde,scalePow:Mw,scaleQuantile:BH,scaleQuantize:HH,scaleRadial:FH,scaleSequential:tL,scaleSequentialLog:JH,scaleSequentialPow:aL,scaleSequentialQuantile:t9,scaleSequentialSqrt:mme,scaleSequentialSymlog:e9,scaleSqrt:UH,scaleSymlog:Hk,scaleThreshold:Wk,scaleTime:eL,scaleUtc:ZH,tickFormat:$H},Symbol.toStringTag,{value:"Module"}));var Ro=e=>e.chartData,IN=st([Ro],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),d4=(e,t,n,s)=>s?IN(e):Ro(e),e2e=(e,t,n)=>n?IN(e):Ro(e);function Bc(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(ln(t)&&ln(n))return!0}return!1}function cz(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function Pq(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,s]=e,r,i;if(ln(n))r=n;else if(typeof n=="function")return;if(ln(s))i=s;else if(typeof s=="function")return;var l=[r,i];if(Bc(l))return l}}function t2e(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var s=e(t,n);if(Bc(s))return cz(s,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[r,i]=e,l,o;if(r==="auto")t!=null&&(l=Math.min(...t));else if(Dt(r))l=r;else if(typeof r=="function")try{t!=null&&(l=r(t?.[0]))}catch{}else if(typeof r=="string"&&nR.test(r)){var c=nR.exec(r);if(c==null||c[1]==null||t==null)l=void 0;else{var d=+c[1];l=t[0]-d}}else l=t?.[0];if(i==="auto")t!=null&&(o=Math.max(...t));else if(Dt(i))o=i;else if(typeof i=="function")try{t!=null&&(o=i(t?.[1]))}catch{}else if(typeof i=="string"&&sR.test(i)){var u=sR.exec(i);if(u==null||u[1]==null||t==null)o=void 0;else{var f=+u[1];o=t[1]+f}}else o=t?.[1];var p=[l,o];if(Bc(p))return t==null?p:cz(p,t,n)}}}var zf=1e9,a2e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},m4,en=!0,li="[DecimalError] ",Jd=li+"Invalid argument: ",u4=li+"Exponent out of range: ",Uf=Math.floor,Td=Math.pow,n2e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Cr,ss=1e7,Ya=7,Dq=9007199254740991,Nv=Uf(Dq/Ya),Lt={};Lt.absoluteValue=Lt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Lt.comparedTo=Lt.cmp=function(e){var t,n,s,r,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(s=i.d.length,r=e.d.length,t=0,n=s<r?s:r;t<n;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return s===r?0:s>r^i.s<0?1:-1};Lt.decimalPlaces=Lt.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Ya;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};Lt.dividedBy=Lt.div=function(e){return co(this,new this.constructor(e))};Lt.dividedToIntegerBy=Lt.idiv=function(e){var t=this,n=t.constructor;return za(co(t,new n(e),0,1),n.precision)};Lt.equals=Lt.eq=function(e){return!this.cmp(e)};Lt.exponent=function(){return On(this)};Lt.greaterThan=Lt.gt=function(e){return this.cmp(e)>0};Lt.greaterThanOrEqualTo=Lt.gte=function(e){return this.cmp(e)>=0};Lt.isInteger=Lt.isint=function(){return this.e>this.d.length-2};Lt.isNegative=Lt.isneg=function(){return this.s<0};Lt.isPositive=Lt.ispos=function(){return this.s>0};Lt.isZero=function(){return this.s===0};Lt.lessThan=Lt.lt=function(e){return this.cmp(e)<0};Lt.lessThanOrEqualTo=Lt.lte=function(e){return this.cmp(e)<1};Lt.logarithm=Lt.log=function(e){var t,n=this,s=n.constructor,r=s.precision,i=r+5;if(e===void 0)e=new s(10);else if(e=new s(e),e.s<1||e.eq(Cr))throw Error(li+"NaN");if(n.s<1)throw Error(li+(n.s?"NaN":"-Infinity"));return n.eq(Cr)?new s(0):(en=!1,t=co(dp(n,i),dp(e,i),i),en=!0,za(t,r))};Lt.minus=Lt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Iq(t,e):Oq(t,(e.s=-e.s,e))};Lt.modulo=Lt.mod=function(e){var t,n=this,s=n.constructor,r=s.precision;if(e=new s(e),!e.s)throw Error(li+"NaN");return n.s?(en=!1,t=co(n,e,0,1).times(e),en=!0,n.minus(t)):za(new s(n),r)};Lt.naturalExponential=Lt.exp=function(){return Mq(this)};Lt.naturalLogarithm=Lt.ln=function(){return dp(this)};Lt.negated=Lt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Lt.plus=Lt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Oq(t,e):Iq(t,(e.s=-e.s,e))};Lt.precision=Lt.sd=function(e){var t,n,s,r=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Jd+e);if(t=On(r)+1,s=r.d.length-1,n=s*Ya+1,s=r.d[s],s){for(;s%10==0;s/=10)n--;for(s=r.d[0];s>=10;s/=10)n++}return e&&t>n?t:n};Lt.squareRoot=Lt.sqrt=function(){var e,t,n,s,r,i,l,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(li+"NaN")}for(e=On(o),en=!1,r=Math.sqrt(+o),r==0||r==1/0?(t=ol(o.d),(t.length+e)%2==0&&(t+="0"),r=Math.sqrt(t),e=Uf((e+1)/2)-(e<0||e%2),r==1/0?t="5e"+e:(t=r.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),s=new c(t)):s=new c(r.toString()),n=c.precision,r=l=n+3;;)if(i=s,s=i.plus(co(o,i,l+2)).times(.5),ol(i.d).slice(0,l)===(t=ol(s.d)).slice(0,l)){if(t=t.slice(l-3,l+1),r==l&&t=="4999"){if(za(i,n+1,0),i.times(i).eq(o)){s=i;break}}else if(t!="9999")break;l+=4}return en=!0,za(s,n)};Lt.times=Lt.mul=function(e){var t,n,s,r,i,l,o,c,d,u=this,f=u.constructor,p=u.d,x=(e=new f(e)).d;if(!u.s||!e.s)return new f(0);for(e.s*=u.s,n=u.e+e.e,c=p.length,d=x.length,c<d&&(i=p,p=x,x=i,l=c,c=d,d=l),i=[],l=c+d,s=l;s--;)i.push(0);for(s=d;--s>=0;){for(t=0,r=c+s;r>s;)o=i[r]+x[s]*p[r-s-1]+t,i[r--]=o%ss|0,t=o/ss|0;i[r]=(i[r]+t)%ss|0}for(;!i[--l];)i.pop();return t?++n:i.shift(),e.d=i,e.e=n,en?za(e,f.precision):e};Lt.toDecimalPlaces=Lt.todp=function(e,t){var n=this,s=n.constructor;return n=new s(n),e===void 0?n:(wl(e,0,zf),t===void 0?t=s.rounding:wl(t,0,8),za(n,e+On(n)+1,t))};Lt.toExponential=function(e,t){var n,s=this,r=s.constructor;return e===void 0?n=xu(s,!0):(wl(e,0,zf),t===void 0?t=r.rounding:wl(t,0,8),s=za(new r(s),e+1,t),n=xu(s,!0,e+1)),n};Lt.toFixed=function(e,t){var n,s,r=this,i=r.constructor;return e===void 0?xu(r):(wl(e,0,zf),t===void 0?t=i.rounding:wl(t,0,8),s=za(new i(r),e+On(r)+1,t),n=xu(s.abs(),!1,e+On(s)+1),r.isneg()&&!r.isZero()?"-"+n:n)};Lt.toInteger=Lt.toint=function(){var e=this,t=e.constructor;return za(new t(e),On(e)+1,t.rounding)};Lt.toNumber=function(){return+this};Lt.toPower=Lt.pow=function(e){var t,n,s,r,i,l,o=this,c=o.constructor,d=12,u=+(e=new c(e));if(!e.s)return new c(Cr);if(o=new c(o),!o.s){if(e.s<1)throw Error(li+"Infinity");return o}if(o.eq(Cr))return o;if(s=c.precision,e.eq(Cr))return za(o,s);if(t=e.e,n=e.d.length-1,l=t>=n,i=o.s,l){if((n=u<0?-u:u)<=Dq){for(r=new c(Cr),t=Math.ceil(s/Ya+4),en=!1;n%2&&(r=r.times(o),uz(r.d,t)),n=Uf(n/2),n!==0;)o=o.times(o),uz(o.d,t);return en=!0,e.s<0?new c(Cr).div(r):za(r,s)}}else if(i<0)throw Error(li+"NaN");return i=i<0&&e.d[Math.max(t,n)]&1?-1:1,o.s=1,en=!1,r=e.times(dp(o,s+d)),en=!0,r=Mq(r),r.s=i,r};Lt.toPrecision=function(e,t){var n,s,r=this,i=r.constructor;return e===void 0?(n=On(r),s=xu(r,n<=i.toExpNeg||n>=i.toExpPos)):(wl(e,1,zf),t===void 0?t=i.rounding:wl(t,0,8),r=za(new i(r),e,t),n=On(r),s=xu(r,e<=n||n<=i.toExpNeg,e)),s};Lt.toSignificantDigits=Lt.tosd=function(e,t){var n=this,s=n.constructor;return e===void 0?(e=s.precision,t=s.rounding):(wl(e,1,zf),t===void 0?t=s.rounding:wl(t,0,8)),za(new s(n),e,t)};Lt.toString=Lt.valueOf=Lt.val=Lt.toJSON=Lt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=On(e),n=e.constructor;return xu(e,t<=n.toExpNeg||t>=n.toExpPos)};function Oq(e,t){var n,s,r,i,l,o,c,d,u=e.constructor,f=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),en?za(t,f):t;if(c=e.d,d=t.d,l=e.e,r=t.e,c=c.slice(),i=l-r,i){for(i<0?(s=c,i=-i,o=d.length):(s=d,r=l,o=c.length),l=Math.ceil(f/Ya),o=l>o?l+1:o+1,i>o&&(i=o,s.length=1),s.reverse();i--;)s.push(0);s.reverse()}for(o=c.length,i=d.length,o-i<0&&(i=o,s=d,d=c,c=s),n=0;i;)n=(c[--i]=c[i]+d[i]+n)/ss|0,c[i]%=ss;for(n&&(c.unshift(n),++r),o=c.length;c[--o]==0;)c.pop();return t.d=c,t.e=r,en?za(t,f):t}function wl(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Jd+e)}function ol(e){var t,n,s,r=e.length-1,i="",l=e[0];if(r>0){for(i+=l,t=1;t<r;t++)s=e[t]+"",n=Ya-s.length,n&&(i+=Nc(n)),i+=s;l=e[t],s=l+"",n=Ya-s.length,n&&(i+=Nc(n))}else if(l===0)return"0";for(;l%10===0;)l/=10;return i+l}var co=(function(){function e(s,r){var i,l=0,o=s.length;for(s=s.slice();o--;)i=s[o]*r+l,s[o]=i%ss|0,l=i/ss|0;return l&&s.unshift(l),s}function t(s,r,i,l){var o,c;if(i!=l)c=i>l?1:-1;else for(o=c=0;o<i;o++)if(s[o]!=r[o]){c=s[o]>r[o]?1:-1;break}return c}function n(s,r,i){for(var l=0;i--;)s[i]-=l,l=s[i]<r[i]?1:0,s[i]=l*ss+s[i]-r[i];for(;!s[0]&&s.length>1;)s.shift()}return function(s,r,i,l){var o,c,d,u,f,p,x,v,w,b,C,N,S,A,k,_,T,E,I=s.constructor,z=s.s==r.s?1:-1,$=s.d,P=r.d;if(!s.s)return new I(s);if(!r.s)throw Error(li+"Division by zero");for(c=s.e-r.e,T=P.length,k=$.length,x=new I(z),v=x.d=[],d=0;P[d]==($[d]||0);)++d;if(P[d]>($[d]||0)&&--c,i==null?N=i=I.precision:l?N=i+(On(s)-On(r))+1:N=i,N<0)return new I(0);if(N=N/Ya+2|0,d=0,T==1)for(u=0,P=P[0],N++;(d<k||u)&&N--;d++)S=u*ss+($[d]||0),v[d]=S/P|0,u=S%P|0;else{for(u=ss/(P[0]+1)|0,u>1&&(P=e(P,u),$=e($,u),T=P.length,k=$.length),A=T,w=$.slice(0,T),b=w.length;b<T;)w[b++]=0;E=P.slice(),E.unshift(0),_=P[0],P[1]>=ss/2&&++_;do u=0,o=t(P,w,T,b),o<0?(C=w[0],T!=b&&(C=C*ss+(w[1]||0)),u=C/_|0,u>1?(u>=ss&&(u=ss-1),f=e(P,u),p=f.length,b=w.length,o=t(f,w,p,b),o==1&&(u--,n(f,T<p?E:P,p))):(u==0&&(o=u=1),f=P.slice()),p=f.length,p<b&&f.unshift(0),n(w,f,b),o==-1&&(b=w.length,o=t(P,w,T,b),o<1&&(u++,n(w,T<b?E:P,b))),b=w.length):o===0&&(u++,w=[0]),v[d++]=u,o&&w[0]?w[b++]=$[A]||0:(w=[$[A]],b=1);while((A++<k||w[0]!==void 0)&&N--)}return v[0]||v.shift(),x.e=c,za(x,l?i+On(x)+1:i)}})();function Mq(e,t){var n,s,r,i,l,o,c=0,d=0,u=e.constructor,f=u.precision;if(On(e)>16)throw Error(u4+On(e));if(!e.s)return new u(Cr);for(en=!1,o=f,l=new u(.03125);e.abs().gte(.1);)e=e.times(l),d+=5;for(s=Math.log(Td(2,d))/Math.LN10*2+5|0,o+=s,n=r=i=new u(Cr),u.precision=o;;){if(r=za(r.times(e),o),n=n.times(++c),l=i.plus(co(r,n,o)),ol(l.d).slice(0,o)===ol(i.d).slice(0,o)){for(;d--;)i=za(i.times(i),o);return u.precision=f,t==null?(en=!0,za(i,f)):i}i=l}}function On(e){for(var t=e.e*Ya,n=e.d[0];n>=10;n/=10)t++;return t}function E2(e,t,n){if(t>e.LN10.sd())throw en=!0,n&&(e.precision=n),Error(li+"LN10 precision limit exceeded");return za(new e(e.LN10),t)}function Nc(e){for(var t="";e--;)t+="0";return t}function dp(e,t){var n,s,r,i,l,o,c,d,u,f=1,p=10,x=e,v=x.d,w=x.constructor,b=w.precision;if(x.s<1)throw Error(li+(x.s?"NaN":"-Infinity"));if(x.eq(Cr))return new w(0);if(t==null?(en=!1,d=b):d=t,x.eq(10))return t==null&&(en=!0),E2(w,d);if(d+=p,w.precision=d,n=ol(v),s=n.charAt(0),i=On(x),Math.abs(i)<15e14){for(;s<7&&s!=1||s==1&&n.charAt(1)>3;)x=x.times(e),n=ol(x.d),s=n.charAt(0),f++;i=On(x),s>1?(x=new w("0."+n),i++):x=new w(s+"."+n.slice(1))}else return c=E2(w,d+2,b).times(i+""),x=dp(new w(s+"."+n.slice(1)),d-p).plus(c),w.precision=b,t==null?(en=!0,za(x,b)):x;for(o=l=x=co(x.minus(Cr),x.plus(Cr),d),u=za(x.times(x),d),r=3;;){if(l=za(l.times(u),d),c=o.plus(co(l,new w(r),d)),ol(c.d).slice(0,d)===ol(o.d).slice(0,d))return o=o.times(2),i!==0&&(o=o.plus(E2(w,d+2,b).times(i+""))),o=co(o,new w(f),d),w.precision=b,t==null?(en=!0,za(o,b)):o;o=c,r+=2}}function dz(e,t){var n,s,r;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(s=t.search(/e/i))>0?(n<0&&(n=s),n+=+t.slice(s+1),t=t.substring(0,s)):n<0&&(n=t.length),s=0;t.charCodeAt(s)===48;)++s;for(r=t.length;t.charCodeAt(r-1)===48;)--r;if(t=t.slice(s,r),t){if(r-=s,n=n-s-1,e.e=Uf(n/Ya),e.d=[],s=(n+1)%Ya,n<0&&(s+=Ya),s<r){for(s&&e.d.push(+t.slice(0,s)),r-=Ya;s<r;)e.d.push(+t.slice(s,s+=Ya));t=t.slice(s),s=Ya-t.length}else s-=r;for(;s--;)t+="0";if(e.d.push(+t),en&&(e.e>Nv||e.e<-Nv))throw Error(u4+n)}else e.s=0,e.e=0,e.d=[0];return e}function za(e,t,n){var s,r,i,l,o,c,d,u,f=e.d;for(l=1,i=f[0];i>=10;i/=10)l++;if(s=t-l,s<0)s+=Ya,r=t,d=f[u=0];else{if(u=Math.ceil((s+1)/Ya),i=f.length,u>=i)return e;for(d=i=f[u],l=1;i>=10;i/=10)l++;s%=Ya,r=s-Ya+l}if(n!==void 0&&(i=Td(10,l-r-1),o=d/i%10|0,c=t<0||f[u+1]!==void 0||d%i,c=n<4?(o||c)&&(n==0||n==(e.s<0?3:2)):o>5||o==5&&(n==4||c||n==6&&(s>0?r>0?d/Td(10,l-r):0:f[u-1])%10&1||n==(e.s<0?8:7))),t<1||!f[0])return c?(i=On(e),f.length=1,t=t-i-1,f[0]=Td(10,(Ya-t%Ya)%Ya),e.e=Uf(-t/Ya)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(s==0?(f.length=u,i=1,u--):(f.length=u+1,i=Td(10,Ya-s),f[u]=r>0?(d/Td(10,l-r)%Td(10,r)|0)*i:0),c)for(;;)if(u==0){(f[0]+=i)==ss&&(f[0]=1,++e.e);break}else{if(f[u]+=i,f[u]!=ss)break;f[u--]=0,i=1}for(s=f.length;f[--s]===0;)f.pop();if(en&&(e.e>Nv||e.e<-Nv))throw Error(u4+On(e));return e}function Iq(e,t){var n,s,r,i,l,o,c,d,u,f,p=e.constructor,x=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),en?za(t,x):t;if(c=e.d,f=t.d,s=t.e,d=e.e,c=c.slice(),l=d-s,l){for(u=l<0,u?(n=c,l=-l,o=f.length):(n=f,s=d,o=c.length),r=Math.max(Math.ceil(x/Ya),o)+2,l>r&&(l=r,n.length=1),n.reverse(),r=l;r--;)n.push(0);n.reverse()}else{for(r=c.length,o=f.length,u=r<o,u&&(o=r),r=0;r<o;r++)if(c[r]!=f[r]){u=c[r]<f[r];break}l=0}for(u&&(n=c,c=f,f=n,t.s=-t.s),o=c.length,r=f.length-o;r>0;--r)c[o++]=0;for(r=f.length;r>l;){if(c[--r]<f[r]){for(i=r;i&&c[--i]===0;)c[i]=ss-1;--c[i],c[r]+=ss}c[r]-=f[r]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--s;return c[0]?(t.d=c,t.e=s,en?za(t,x):t):new p(0)}function xu(e,t,n){var s,r=On(e),i=ol(e.d),l=i.length;return t?(n&&(s=n-l)>0?i=i.charAt(0)+"."+i.slice(1)+Nc(s):l>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(r<0?"e":"e+")+r):r<0?(i="0."+Nc(-r-1)+i,n&&(s=n-l)>0&&(i+=Nc(s))):r>=l?(i+=Nc(r+1-l),n&&(s=n-r-1)>0&&(i=i+"."+Nc(s))):((s=r+1)<l&&(i=i.slice(0,s)+"."+i.slice(s)),n&&(s=n-l)>0&&(r+1===l&&(i+="."),i+=Nc(s))),e.s<0?"-"+i:i}function uz(e,t){if(e.length>t)return e.length=t,!0}function $q(e){var t,n,s;function r(i){var l=this;if(!(l instanceof r))return new r(i);if(l.constructor=r,i instanceof r){l.s=i.s,l.e=i.e,l.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Jd+i);if(i>0)l.s=1;else if(i<0)i=-i,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(i===~~i&&i<1e7){l.e=0,l.d=[i];return}return dz(l,i.toString())}else if(typeof i!="string")throw Error(Jd+i);if(i.charCodeAt(0)===45?(i=i.slice(1),l.s=-1):l.s=1,n2e.test(i))dz(l,i);else throw Error(Jd+i)}if(r.prototype=Lt,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.clone=$q,r.config=r.set=s2e,e===void 0&&(e={}),e)for(s=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<s.length;)e.hasOwnProperty(n=s[t++])||(e[n]=this[n]);return r.config(e),r}function s2e(e){if(!e||typeof e!="object")throw Error(li+"Object expected");var t,n,s,r=["precision",1,zf,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<r.length;t+=3)if((s=e[n=r[t]])!==void 0)if(Uf(s)===s&&s>=r[t+1]&&s<=r[t+2])this[n]=s;else throw Error(Jd+n+": "+s);if((s=e[n="LN10"])!==void 0)if(s==Math.LN10)this[n]=new this(s);else throw Error(Jd+n+": "+s);return this}var m4=$q(a2e);Cr=new m4(1);const Ta=m4;var r2e=e=>e,Rq={},zq=e=>e===Rq,mz=e=>function t(){return arguments.length===0||arguments.length===1&&zq(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},Uq=(e,t)=>e===1?t:mz(function(){for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];var i=s.filter(l=>l!==Rq).length;return i>=e?t(...s):Uq(e-i,mz(function(){for(var l=arguments.length,o=new Array(l),c=0;c<l;c++)o[c]=arguments[c];var d=s.map(u=>zq(u)?o.shift():u);return t(...d,...o)}))}),i2e=e=>Uq(e.length,e),tT=(e,t)=>{for(var n=[],s=e;s<t;++s)n[s-e]=s;return n},l2e=i2e((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),o2e=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];if(!n.length)return r2e;var r=n.reverse(),i=r[0],l=r.slice(1);return function(){return l.reduce((o,c)=>c(o),i(...arguments))}};function Fq(e){var t;return e===0?t=1:t=Math.floor(new Ta(e).abs().log(10).toNumber())+1,t}function Bq(e,t,n){for(var s=new Ta(e),r=0,i=[];s.lt(t)&&r<1e5;)i.push(s.toNumber()),s=s.add(n),r++;return i}var Hq=e=>{var[t,n]=e,[s,r]=[t,n];return t>n&&([s,r]=[n,t]),[s,r]},Gq=(e,t,n)=>{if(e.lte(0))return new Ta(0);var s=Fq(e.toNumber()),r=new Ta(10).pow(s),i=e.div(r),l=s!==1?.05:.1,o=new Ta(Math.ceil(i.div(l).toNumber())).add(n).mul(l),c=o.mul(r);return t?new Ta(c.toNumber()):new Ta(Math.ceil(c.toNumber()))},c2e=(e,t,n)=>{var s=new Ta(1),r=new Ta(e);if(!r.isint()&&n){var i=Math.abs(e);i<1?(s=new Ta(10).pow(Fq(e)-1),r=new Ta(Math.floor(r.div(s).toNumber())).mul(s)):i>1&&(r=new Ta(Math.floor(e)))}else e===0?r=new Ta(Math.floor((t-1)/2)):n||(r=new Ta(Math.floor(e)));var l=Math.floor((t-1)/2),o=o2e(l2e(c=>r.add(new Ta(c-l).mul(s)).toNumber()),tT);return o(0,t)},Wq=function(t,n,s,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(s-1)))return{step:new Ta(0),tickMin:new Ta(0),tickMax:new Ta(0)};var l=Gq(new Ta(n).sub(t).div(s-1),r,i),o;t<=0&&n>=0?o=new Ta(0):(o=new Ta(t).add(n).div(2),o=o.sub(new Ta(o).mod(l)));var c=Math.ceil(o.sub(t).div(l).toNumber()),d=Math.ceil(new Ta(n).sub(o).div(l).toNumber()),u=c+d+1;return u>s?Wq(t,n,s,r,i+1):(u<s&&(d=n>0?d+(s-u):d,c=n>0?c:c+(s-u)),{step:l,tickMin:o.sub(new Ta(c).mul(l)),tickMax:o.add(new Ta(d).mul(l))})},d2e=function(t){var[n,s]=t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=Math.max(r,2),[o,c]=Hq([n,s]);if(o===-1/0||c===1/0){var d=c===1/0?[o,...tT(0,r-1).map(()=>1/0)]:[...tT(0,r-1).map(()=>-1/0),c];return n>s?d.reverse():d}if(o===c)return c2e(o,r,i);var{step:u,tickMin:f,tickMax:p}=Wq(o,c,l,i,0),x=Bq(f,p.add(new Ta(.1).mul(u)),u);return n>s?x.reverse():x},u2e=function(t,n){var[s,r]=t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[l,o]=Hq([s,r]);if(l===-1/0||o===1/0)return[s,r];if(l===o)return[l];var c=Math.max(n,2),d=Gq(new Ta(o).sub(l).div(c-1),i,0),u=[...Bq(new Ta(l),new Ta(o),d),o];return i===!1&&(u=u.map(f=>Math.round(f))),s>r?u.reverse():u},Vq=e=>e.rootProps.maxBarSize,m2e=e=>e.rootProps.barGap,qq=e=>e.rootProps.barCategoryGap,f2e=e=>e.rootProps.barSize,vx=e=>e.rootProps.stackOffset,Yq=e=>e.rootProps.reverseStackOrder,f4=e=>e.options.chartName,h4=e=>e.rootProps.syncId,Kq=e=>e.rootProps.syncMethod,g4=e=>e.options.eventEmitter,Dn={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},ao={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Nr={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},$N=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},h2e={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:ao.angleAxisId,includeHidden:!1,name:void 0,reversed:ao.reversed,scale:ao.scale,tick:ao.tick,tickCount:void 0,ticks:void 0,type:ao.type,unit:void 0},g2e={allowDataOverflow:Nr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Nr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Nr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Nr.scale,tick:Nr.tick,tickCount:Nr.tickCount,ticks:void 0,type:Nr.type,unit:void 0},p2e={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:ao.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ao.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ao.scale,tick:ao.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},x2e={allowDataOverflow:Nr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Nr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Nr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Nr.scale,tick:Nr.tick,tickCount:Nr.tickCount,ticks:void 0,type:"category",unit:void 0},p4=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?p2e:h2e,x4=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?x2e:g2e,RN=e=>e.polarOptions,y4=st([Io,$o,Xn],Aq),Qq=st([RN,y4],(e,t)=>{if(e!=null)return As(e.innerRadius,t,0)}),Xq=st([RN,y4],(e,t)=>{if(e!=null)return As(e.outerRadius,t,t*.8)}),y2e=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},Zq=st([RN],y2e);st([p4,Zq],$N);var Jq=st([y4,Qq,Xq],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});st([x4,Jq],$N);var eY=st([ma,RN,Qq,Xq,Io,$o],(e,t,n,s,r,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||s==null)){var{cx:l,cy:o,startAngle:c,endAngle:d}=t;return{cx:As(l,r,r/2),cy:As(o,i,i/2),innerRadius:n,outerRadius:s,startAngle:c,endAngle:d,clockWise:!1}}}),sn=(e,t)=>t,wx=(e,t,n)=>n;function b4(e){return e?.id}function tY(e,t,n){var{chartData:s=[]}=t,{allowDuplicatedCategory:r,dataKey:i}=n,l=new Map;return e.forEach(o=>{var c,d=(c=o.data)!==null&&c!==void 0?c:s;if(!(d==null||d.length===0)){var u=b4(o);d.forEach((f,p)=>{var x=i==null||r?p:String(Ia(f,i,null)),v=Ia(f,o.dataKey,0),w;l.has(x)?w=l.get(x):w={},Object.assign(w,{[u]:v}),l.set(x,w)})}}),Array.from(l.values())}function zN(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var UN=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function FN(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function b2e(e,t){if(e.length===t.length){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return!1}var Zn=e=>{var t=ma(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Ff=e=>e.tooltip.settings.axisId;function fz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function jv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fz(Object(n),!0).forEach(function(s){v2e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fz(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function v2e(e,t,n){return(t=w2e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w2e(e){var t=N2e(e,"string");return typeof t=="symbol"?t:t+""}function N2e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aT=[0,"auto"],as={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},aY=(e,t)=>e.cartesianAxis.xAxis[t],zo=(e,t)=>{var n=aY(e,t);return n??as},ns={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:aT,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:px},nY=(e,t)=>e.cartesianAxis.yAxis[t],Uo=(e,t)=>{var n=nY(e,t);return n??ns},j2e={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},v4=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??j2e},cn=(e,t,n)=>{switch(t){case"xAxis":return zo(e,n);case"yAxis":return Uo(e,n);case"zAxis":return v4(e,n);case"angleAxis":return p4(e,n);case"radiusAxis":return x4(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},C2e=(e,t,n)=>{switch(t){case"xAxis":return zo(e,n);case"yAxis":return Uo(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},Nx=(e,t,n)=>{switch(t){case"xAxis":return zo(e,n);case"yAxis":return Uo(e,n);case"angleAxis":return p4(e,n);case"radiusAxis":return x4(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},sY=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function w4(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var BN=e=>e.graphicalItems.cartesianItems,S2e=st([sn,wx],w4),N4=(e,t,n)=>e.filter(n).filter(s=>t?.includeHidden===!0?!0:!s.hide),jx=st([BN,cn,S2e],N4,{memoizeOptions:{resultEqualityCheck:FN}}),rY=st([jx],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(zN)),iY=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),_2e=st([jx],iY),j4=e=>e.map(t=>t.data).filter(Boolean).flat(1),A2e=st([jx],j4,{memoizeOptions:{resultEqualityCheck:FN}}),C4=(e,t)=>{var{chartData:n=[],dataStartIndex:s,dataEndIndex:r}=t;return e.length>0?e:n.slice(s,r+1)},S4=st([A2e,d4],C4),_4=(e,t,n)=>t?.dataKey!=null?e.map(s=>({value:Ia(s,t.dataKey)})):n.length>0?n.map(s=>s.dataKey).flatMap(s=>e.map(r=>({value:Ia(r,s)}))):e.map(s=>({value:s})),HN=st([S4,cn,jx],_4);function lY(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function vb(e){if(bl(e)||e instanceof Date){var t=Number(e);if(ln(t))return t}}function hz(e){if(Array.isArray(e)){var t=[vb(e[0]),vb(e[1])];return Bc(t)?t:void 0}var n=vb(e);if(n!=null)return[n,n]}function So(e){return e.map(vb).filter(cNe)}function E2e(e,t,n){return!n||typeof t!="number"||Pi(t)?[]:n.length?So(n.flatMap(s=>{var r=Ia(e,s.dataKey),i,l;if(Array.isArray(r)?[i,l]=r:i=l=r,!(!ln(i)||!ln(l)))return[t-i,t+l]})):[]}var Jn=e=>{var t=Zn(e),n=Ff(e);return Nx(e,t,n)},Cx=st([Jn],e=>e?.dataKey),T2e=st([rY,d4,Jn],tY),oY=(e,t,n,s)=>{var r={},i=t.reduce((l,o)=>{if(o.stackId==null)return l;var c=l[o.stackId];return c==null&&(c=[]),c.push(o),l[o.stackId]=c,l},r);return Object.fromEntries(Object.entries(i).map(l=>{var[o,c]=l,d=s?[...c].reverse():c,u=d.map(b4);return[o,{stackedData:w1e(e,u,n),graphicalItems:d}]}))},nT=st([T2e,rY,vx,Yq],oY),cY=(e,t,n,s)=>{var{dataStartIndex:r,dataEndIndex:i}=t;if(s==null&&n!=="zAxis"){var l=_1e(e,r,i);if(!(l!=null&&l[0]===0&&l[1]===0))return l}},k2e=st([cn],e=>e.allowDataOverflow),A4=e=>{var t;if(e==null||!("domain"in e))return aT;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var n=So(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:aT},E4=st([cn],A4),T4=st([E4,k2e],Pq),L2e=st([nT,Ro,sn,T4],cY,{memoizeOptions:{resultEqualityCheck:UN}}),GN=e=>e.errorBars,P2e=(e,t,n)=>e.flatMap(s=>t[s.id]).filter(Boolean).filter(s=>lY(n,s)),Cv=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];var r=n.filter(Boolean);if(r.length!==0){var i=r.flat(),l=Math.min(...i),o=Math.max(...i);return[l,o]}},k4=(e,t,n,s,r)=>{var i,l;if(n.length>0&&e.forEach(o=>{n.forEach(c=>{var d,u,f=(d=s[c.id])===null||d===void 0?void 0:d.filter(C=>lY(r,C)),p=Ia(o,(u=t.dataKey)!==null&&u!==void 0?u:c.dataKey),x=E2e(o,p,f);if(x.length>=2){var v=Math.min(...x),w=Math.max(...x);(i==null||v<i)&&(i=v),(l==null||w>l)&&(l=w)}var b=hz(p);b!=null&&(i=i==null?b[0]:Math.min(i,b[0]),l=l==null?b[1]:Math.max(l,b[1]))})}),t?.dataKey!=null&&e.forEach(o=>{var c=hz(Ia(o,t.dataKey));c!=null&&(i=i==null?c[0]:Math.min(i,c[0]),l=l==null?c[1]:Math.max(l,c[1]))}),ln(i)&&ln(l))return[i,l]},D2e=st([S4,cn,_2e,GN,sn],k4,{memoizeOptions:{resultEqualityCheck:UN}});function O2e(e){var{value:t}=e;if(bl(t)||t instanceof Date)return t}var M2e=(e,t,n)=>{var s=e.map(O2e).filter(r=>r!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&iV(s))?Lq(0,e.length):t.allowDuplicatedCategory?s:Array.from(new Set(s))},dY=e=>e.referenceElements.dots,Bf=(e,t,n)=>e.filter(s=>s.ifOverflow==="extendDomain").filter(s=>t==="xAxis"?s.xAxisId===n:s.yAxisId===n),I2e=st([dY,sn,wx],Bf),uY=e=>e.referenceElements.areas,$2e=st([uY,sn,wx],Bf),mY=e=>e.referenceElements.lines,R2e=st([mY,sn,wx],Bf),fY=(e,t)=>{if(e!=null){var n=So(e.map(s=>t==="xAxis"?s.x:s.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},z2e=st(I2e,sn,fY),hY=(e,t)=>{if(e!=null){var n=So(e.flatMap(s=>[t==="xAxis"?s.x1:s.y1,t==="xAxis"?s.x2:s.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},U2e=st([$2e,sn],hY);function F2e(e){var t;if(e.x!=null)return So([e.x]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(s=>s.x);return n==null||n.length===0?[]:So(n)}function B2e(e){var t;if(e.y!=null)return So([e.y]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(s=>s.y);return n==null||n.length===0?[]:So(n)}var gY=(e,t)=>{if(e!=null){var n=e.flatMap(s=>t==="xAxis"?F2e(s):B2e(s));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},H2e=st([R2e,sn],gY),G2e=st(z2e,H2e,U2e,(e,t,n)=>Cv(e,n,t)),L4=(e,t,n,s,r,i,l,o)=>{if(n!=null)return n;var c=l==="vertical"&&o==="xAxis"||l==="horizontal"&&o==="yAxis",d=c?Cv(s,i,r):Cv(i,r);return t2e(t,d,e.allowDataOverflow)},W2e=st([cn,E4,T4,L2e,D2e,G2e,ma,sn],L4,{memoizeOptions:{resultEqualityCheck:UN}}),V2e=[0,1],P4=(e,t,n,s,r,i,l)=>{if(!((e==null||n==null||n.length===0)&&l===void 0)){var{dataKey:o,type:c}=e,d=ad(t,i);if(d&&o==null){var u;return Lq(0,(u=n?.length)!==null&&u!==void 0?u:0)}return c==="category"?M2e(s,e,d):r==="expand"?V2e:l}},D4=st([cn,ma,S4,HN,vx,sn,W2e],P4),pY=(e,t,n,s,r)=>{if(e!=null){var{scale:i,type:l}=e;if(i==="auto")return t==="radial"&&r==="radiusAxis"?"band":t==="radial"&&r==="angleAxis"?"linear":l==="category"&&s&&(s.indexOf("LineChart")>=0||s.indexOf("AreaChart")>=0||s.indexOf("ComposedChart")>=0&&!n)?"point":l==="category"?"band":"linear";if(typeof i=="string"){var o="scale".concat(dx(i));return o in vg?o:"point"}}},Hf=st([cn,ma,sY,f4,sn],pY);function q2e(e){if(e!=null){if(e in vg)return vg[e]();var t="scale".concat(dx(e));if(t in vg)return vg[t]()}}function O4(e,t,n,s){if(!(n==null||s==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(s);var r=q2e(t);if(r!=null){var i=r.domain(n).range(s);return p1e(i),i}}}var M4=(e,t,n)=>{var s=A4(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(s)&&(s[0]==="auto"||s[1]==="auto")&&Bc(e))return d2e(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Bc(e))return u2e(e,t.tickCount,t.allowDecimals)}},I4=st([D4,Nx,Hf],M4),$4=(e,t,n,s)=>{if(s!=="angleAxis"&&e?.type==="number"&&Bc(t)&&Array.isArray(n)&&n.length>0){var r=t[0],i=n[0],l=t[1],o=n[n.length-1];return[Math.min(r,i),Math.max(l,o)]}return t},Y2e=st([cn,D4,I4,sn],$4),K2e=st(HN,cn,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,s=Array.from(So(e.map(f=>f.value))).sort((f,p)=>f-p),r=s[0],i=s[s.length-1];if(r==null||i==null)return 1/0;var l=i-r;if(l===0)return 1/0;for(var o=0;o<s.length-1;o++){var c=s[o],d=s[o+1];if(!(c==null||d==null)){var u=d-c;n=Math.min(n,u)}}return n/l}}),xY=st(K2e,ma,qq,Xn,(e,t,n,s,r)=>r,(e,t,n,s,r)=>{if(!ln(e))return 0;var i=t==="vertical"?s.height:s.width;if(r==="gap")return e*i/2;if(r==="no-gap"){var l=As(n,e*i),o=e*i/2;return o-l-(o-l)/i*l}return 0}),Q2e=(e,t,n)=>{var s=zo(e,t);return s==null||typeof s.padding!="string"?0:xY(e,"xAxis",t,n,s.padding)},X2e=(e,t,n)=>{var s=Uo(e,t);return s==null||typeof s.padding!="string"?0:xY(e,"yAxis",t,n,s.padding)},Z2e=st(zo,Q2e,(e,t)=>{var n,s;if(e==null)return{left:0,right:0};var{padding:r}=e;return typeof r=="string"?{left:t,right:t}:{left:((n=r.left)!==null&&n!==void 0?n:0)+t,right:((s=r.right)!==null&&s!==void 0?s:0)+t}}),J2e=st(Uo,X2e,(e,t)=>{var n,s;if(e==null)return{top:0,bottom:0};var{padding:r}=e;return typeof r=="string"?{top:t,bottom:t}:{top:((n=r.top)!==null&&n!==void 0?n:0)+t,bottom:((s=r.bottom)!==null&&s!==void 0?s:0)+t}}),e_e=st([Xn,Z2e,TN,EN,(e,t,n)=>n],(e,t,n,s,r)=>{var{padding:i}=s;return r?[i.left,n.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),t_e=st([Xn,ma,J2e,TN,EN,(e,t,n)=>n],(e,t,n,s,r,i)=>{var{padding:l}=r;return i?[s.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),Sx=(e,t,n,s)=>{var r;switch(t){case"xAxis":return e_e(e,n,s);case"yAxis":return t_e(e,n,s);case"zAxis":return(r=v4(e,n))===null||r===void 0?void 0:r.range;case"angleAxis":return Zq(e);case"radiusAxis":return Jq(e,n);default:return}},yY=st([cn,Sx],$N),WN=st([cn,Hf,Y2e,yY],O4);st([jx,GN,sn],P2e);function bY(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var VN=(e,t)=>t,qN=(e,t,n)=>n,a_e=st(_N,VN,qN,(e,t,n)=>e.filter(s=>s.orientation===t).filter(s=>s.mirror===n).sort(bY)),n_e=st(AN,VN,qN,(e,t,n)=>e.filter(s=>s.orientation===t).filter(s=>s.mirror===n).sort(bY)),vY=(e,t)=>({width:e.width,height:t.height}),s_e=(e,t)=>{var n=typeof t.width=="number"?t.width:px;return{width:n,height:e.height}},wY=st(Xn,zo,vY),r_e=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},i_e=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},l_e=st($o,Xn,a_e,VN,qN,(e,t,n,s,r)=>{var i={},l;return n.forEach(o=>{var c=vY(t,o);l==null&&(l=r_e(t,s,e));var d=s==="top"&&!r||s==="bottom"&&r;i[o.id]=l-Number(d)*c.height,l+=(d?-1:1)*c.height}),i}),o_e=st(Io,Xn,n_e,VN,qN,(e,t,n,s,r)=>{var i={},l;return n.forEach(o=>{var c=s_e(t,o);l==null&&(l=i_e(t,s,e));var d=s==="left"&&!r||s==="right"&&r;i[o.id]=l-Number(d)*c.width,l+=(d?-1:1)*c.width}),i}),c_e=(e,t)=>{var n=zo(e,t);if(n!=null)return l_e(e,n.orientation,n.mirror)},d_e=st([Xn,zo,c_e,(e,t)=>t],(e,t,n,s)=>{if(t!=null){var r=n?.[s];return r==null?{x:e.left,y:0}:{x:e.left,y:r}}}),u_e=(e,t)=>{var n=Uo(e,t);if(n!=null)return o_e(e,n.orientation,n.mirror)},m_e=st([Xn,Uo,u_e,(e,t)=>t],(e,t,n,s)=>{if(t!=null){var r=n?.[s];return r==null?{x:0,y:e.top}:{x:r,y:e.top}}}),NY=st(Xn,Uo,(e,t)=>{var n=typeof t.width=="number"?t.width:px;return{width:n,height:e.height}}),gz=(e,t,n)=>{switch(t){case"xAxis":return wY(e,n).width;case"yAxis":return NY(e,n).height;default:return}},jY=(e,t,n,s)=>{if(n!=null){var{allowDuplicatedCategory:r,type:i,dataKey:l}=n,o=ad(e,s),c=t.map(d=>d.value);if(l&&o&&i==="category"&&r&&iV(c))return c}},R4=st([ma,HN,cn,sn],jY),CY=(e,t,n,s)=>{if(!(n==null||n.dataKey==null)){var{type:r,scale:i}=n,l=ad(e,s);if(l&&(r==="number"||i!=="auto"))return t.map(o=>o.value)}},z4=st([ma,HN,Nx,sn],CY),pz=st([ma,C2e,Hf,WN,R4,z4,Sx,I4,sn],(e,t,n,s,r,i,l,o,c)=>{if(t!=null){var d=ad(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:i,duplicateDomain:r,isCategorical:d,niceTicks:o,range:l,realScaleType:n,scale:s}}}),f_e=(e,t,n,s,r,i,l,o,c)=>{if(!(t==null||s==null)){var d=ad(e,c),{type:u,ticks:f,tickCount:p}=t,x=n==="scaleBand"&&typeof s.bandwidth=="function"?s.bandwidth()/2:2,v=u==="category"&&s.bandwidth?s.bandwidth()/x:0;v=c==="angleAxis"&&i!=null&&i.length>=2?is(i[0]-i[1])*2*v:v;var w=f||r;if(w){var b=w.map((C,N)=>{var S=l?l.indexOf(C):C;return{index:N,coordinate:s(S)+v,value:C,offset:v}});return b.filter(C=>ln(C.coordinate))}return d&&o?o.map((C,N)=>({coordinate:s(C)+v,value:C,index:N,offset:v})).filter(C=>ln(C.coordinate)):s.ticks?s.ticks(p).map(C=>({coordinate:s(C)+v,value:C,offset:v})):s.domain().map((C,N)=>({coordinate:s(C)+v,value:l?l[C]:C,index:N,offset:v}))}},SY=st([ma,Nx,Hf,WN,I4,Sx,R4,z4,sn],f_e),h_e=(e,t,n,s,r,i,l)=>{if(!(t==null||n==null||s==null||s[0]===s[1])){var o=ad(e,l),{tickCount:c}=t,d=0;return d=l==="angleAxis"&&s?.length>=2?is(s[0]-s[1])*2*d:d,o&&i?i.map((u,f)=>({coordinate:n(u)+d,value:u,index:f,offset:d})):n.ticks?n.ticks(c).map(u=>({coordinate:n(u)+d,value:u,offset:d})):n.domain().map((u,f)=>({coordinate:n(u)+d,value:r?r[u]:u,index:f,offset:d}))}},Hc=st([ma,Nx,WN,Sx,R4,z4,sn],h_e),Gc=st(cn,WN,(e,t)=>{if(!(e==null||t==null))return jv(jv({},e),{},{scale:t})}),g_e=st([cn,Hf,D4,yY],O4);st((e,t,n)=>v4(e,n),g_e,(e,t)=>{if(!(e==null||t==null))return jv(jv({},e),{},{scale:t})});var p_e=st([ma,_N,AN],(e,t,n)=>{switch(e){case"horizontal":return t.some(s=>s.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(s=>s.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),_Y=e=>e.options.defaultTooltipEventType,AY=e=>e.options.validateTooltipEventTypes;function EY(e,t,n){if(e==null)return t;var s=e?"axis":"item";return n==null?t:n.includes(s)?s:t}function U4(e,t){var n=_Y(e),s=AY(e);return EY(t,n,s)}function x_e(e){return Mt(t=>U4(t,e))}var TY=(e,t)=>{var n,s=Number(t);if(!(Pi(s)||t==null))return s>=0?e==null||(n=e[s])===null||n===void 0?void 0:n.value:void 0},y_e=e=>e.tooltip.settings,Sc={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},b_e={itemInteraction:{click:Sc,hover:Sc},axisInteraction:{click:Sc,hover:Sc},keyboardInteraction:Sc,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},kY=cr({name:"tooltip",initialState:b_e,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Za()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:n,next:s}=t.payload,r=ki(e).tooltipItemPayloads.indexOf(n);r>-1&&(e.tooltipItemPayloads[r]=s)},prepare:Za()},removeTooltipEntrySettings:{reducer(e,t){var n=ki(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},prepare:Za()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:v_e,replaceTooltipEntrySettings:w_e,removeTooltipEntrySettings:N_e,setTooltipSettingsState:j_e,setActiveMouseOverItemIndex:LY,mouseLeaveItem:C_e,mouseLeaveChart:PY,setActiveClickItemIndex:S_e,setMouseOverAxisIndex:DY,setMouseClickAxisIndex:__e,setSyncInteraction:sT,setKeyboardInteraction:rT}=kY.actions,A_e=kY.reducer;function xz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function Ny(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xz(Object(n),!0).forEach(function(s){E_e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xz(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function E_e(e,t,n){return(t=T_e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T_e(e){var t=k_e(e,"string");return typeof t=="symbol"?t:t+""}function k_e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function L_e(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function P_e(e){return e.index!=null}var OY=(e,t,n,s)=>{if(t==null)return Sc;var r=L_e(e,t,n);if(r==null)return Sc;if(r.active)return r;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(P_e(r)){if(i)return Ny(Ny({},r),{},{active:!0})}else if(s!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:s,graphicalItemId:void 0};return Ny(Ny({},Sc),{},{coordinate:r.coordinate})};function D_e(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var n=Number(e);return Number.isFinite(n)?n:void 0}function O_e(e,t){var n=D_e(e),s=t[0],r=t[1];if(n===void 0)return!1;var i=Math.min(s,r),l=Math.max(s,r);return n>=i&&n<=l}function M_e(e,t,n){if(n==null||t==null)return!0;var s=Ia(e,t);return s==null||!Bc(n)?!0:O_e(s,n)}var F4=(e,t,n,s)=>{var r=e?.index;if(r==null)return null;var i=Number(r);if(!ln(i))return r;var l=0,o=1/0;t.length>0&&(o=t.length-1);var c=Math.max(l,Math.min(i,o)),d=t[c];return d==null||M_e(d,n,s)?String(c):null},MY=(e,t,n,s,r,i,l,o)=>{if(!(i==null||o==null)){var c=l[0],d=c==null?void 0:o(c.positions,i);if(d!=null)return d;var u=r?.[Number(i)];if(u)switch(n){case"horizontal":return{x:u.coordinate,y:(s.top+t)/2};default:return{x:(s.left+e)/2,y:u.coordinate}}}},IY=(e,t,n,s)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var r;if(n==="hover"?r=e.itemInteraction.hover.graphicalItemId:r=e.itemInteraction.click.graphicalItemId,r==null&&s!=null){var i=e.tooltipItemPayloads[0];return i!=null?[i]:[]}return e.tooltipItemPayloads.filter(l=>{var o;return((o=l.settings)===null||o===void 0?void 0:o.graphicalItemId)===r})},_x=e=>e.options.tooltipPayloadSearcher,Gf=e=>e.tooltip;function yz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function bz(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yz(Object(n),!0).forEach(function(s){I_e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yz(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function I_e(e,t,n){return(t=$_e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $_e(e){var t=R_e(e,"string");return typeof t=="symbol"?t:t+""}function R_e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function z_e(e,t){return e??t}var $Y=(e,t,n,s,r,i,l)=>{if(!(t==null||i==null)){var{chartData:o,computedData:c,dataStartIndex:d,dataEndIndex:u}=n,f=[];return e.reduce((p,x)=>{var v,{dataDefinedOnItem:w,settings:b}=x,C=z_e(w,o),N=Array.isArray(C)?JV(C,d,u):C,S=(v=b?.dataKey)!==null&&v!==void 0?v:s,A=b?.nameKey,k;if(s&&Array.isArray(N)&&!Array.isArray(N[0])&&l==="axis"?k=lV(N,s,r):k=i(N,t,c,A),Array.isArray(k))k.forEach(T=>{var E=bz(bz({},b),{},{name:T.name,unit:T.unit,color:void 0,fill:void 0});p.push(rR({tooltipEntrySettings:E,dataKey:T.dataKey,payload:T.payload,value:Ia(T.payload,T.dataKey),name:T.name}))});else{var _;p.push(rR({tooltipEntrySettings:b,dataKey:S,payload:k,value:Ia(k,S),name:(_=Ia(k,A))!==null&&_!==void 0?_:b?.name}))}return p},f)}},B4=st([Jn,ma,sY,f4,Zn],pY),U_e=st([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),F_e=st([Zn,Ff],w4),Wf=st([U_e,Jn,F_e],N4,{memoizeOptions:{resultEqualityCheck:FN}}),B_e=st([Wf],e=>e.filter(zN)),H_e=st([Wf],j4,{memoizeOptions:{resultEqualityCheck:FN}}),Vf=st([H_e,Ro],C4),G_e=st([B_e,Ro,Jn],tY),H4=st([Vf,Jn,Wf],_4),RY=st([Jn],A4),W_e=st([Jn],e=>e.allowDataOverflow),zY=st([RY,W_e],Pq),V_e=st([Wf],e=>e.filter(zN)),q_e=st([G_e,V_e,vx,Yq],oY),Y_e=st([q_e,Ro,Zn,zY],cY),K_e=st([Wf],iY),Q_e=st([Vf,Jn,K_e,GN,Zn],k4,{memoizeOptions:{resultEqualityCheck:UN}}),X_e=st([dY,Zn,Ff],Bf),Z_e=st([X_e,Zn],fY),J_e=st([uY,Zn,Ff],Bf),eAe=st([J_e,Zn],hY),tAe=st([mY,Zn,Ff],Bf),aAe=st([tAe,Zn],gY),nAe=st([Z_e,aAe,eAe],Cv),sAe=st([Jn,RY,zY,Y_e,Q_e,nAe,ma,Zn],L4),Ax=st([Jn,ma,Vf,H4,vx,Zn,sAe],P4),rAe=st([Ax,Jn,B4],M4),iAe=st([Jn,Ax,rAe,Zn],$4),UY=e=>{var t=Zn(e),n=Ff(e),s=!1;return Sx(e,t,n,s)},FY=st([Jn,UY],$N),BY=st([Jn,B4,iAe,FY],O4),lAe=st([ma,H4,Jn,Zn],jY),oAe=st([ma,H4,Jn,Zn],CY),cAe=(e,t,n,s,r,i,l,o)=>{if(t){var{type:c}=t,d=ad(e,o);if(s){var u=n==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,f=c==="category"&&s.bandwidth?s.bandwidth()/u:0;return f=o==="angleAxis"&&r!=null&&r?.length>=2?is(r[0]-r[1])*2*f:f,d&&l?l.map((p,x)=>({coordinate:s(p)+f,value:p,index:x,offset:f})):s.domain().map((p,x)=>({coordinate:s(p)+f,value:i?i[p]:p,index:x,offset:f}))}}},Fo=st([ma,Jn,B4,BY,UY,lAe,oAe,Zn],cAe),G4=st([_Y,AY,y_e],(e,t,n)=>EY(n.shared,e,t)),HY=e=>e.tooltip.settings.trigger,W4=e=>e.tooltip.settings.defaultIndex,Ex=st([Gf,G4,HY,W4],OY),Wc=st([Ex,Vf,Cx,Ax],F4),GY=st([Fo,Wc],TY),V4=st([Ex],e=>{if(e)return e.dataKey}),dAe=st([Ex],e=>{if(e)return e.graphicalItemId}),WY=st([Gf,G4,HY,W4],IY),uAe=st([Io,$o,ma,Xn,Fo,W4,WY,_x],MY),mAe=st([Ex,uAe],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),fAe=st([Ex],e=>{var t;return(t=e?.active)!==null&&t!==void 0?t:!1}),hAe=st([WY,Wc,Ro,Cx,GY,_x,G4],$Y),gAe=st([hAe],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function vz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function wz(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vz(Object(n),!0).forEach(function(s){pAe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vz(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function pAe(e,t,n){return(t=xAe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xAe(e){var t=yAe(e,"string");return typeof t=="symbol"?t:t+""}function yAe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bAe=()=>Mt(Jn),vAe=()=>{var e=bAe(),t=Mt(Fo),n=Mt(BY);return pf(!e||!n?void 0:wz(wz({},e),{},{scale:n}),t)};function Nz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function Am(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Nz(Object(n),!0).forEach(function(s){wAe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nz(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function wAe(e,t,n){return(t=NAe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NAe(e){var t=jAe(e,"string");return typeof t=="symbol"?t:t+""}function jAe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var CAe=(e,t,n,s)=>{var r=t.find(i=>i&&i.index===n);if(r){if(e==="horizontal")return{x:r.coordinate,y:s.chartY};if(e==="vertical")return{x:s.chartX,y:r.coordinate}}return{x:0,y:0}},SAe=(e,t,n,s)=>{var r=t.find(d=>d&&d.index===n);if(r){if(e==="centric"){var i=r.coordinate,{radius:l}=s;return Am(Am(Am({},s),Pn(s.cx,s.cy,l,i)),{},{angle:i,radius:l})}var o=r.coordinate,{angle:c}=s;return Am(Am(Am({},s),Pn(s.cx,s.cy,o,c)),{},{angle:c,radius:o})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function _Ae(e,t){var{chartX:n,chartY:s}=e;return n>=t.left&&n<=t.left+t.width&&s>=t.top&&s<=t.top+t.height}var VY=(e,t,n,s,r)=>{var i,l=(i=t?.length)!==null&&i!==void 0?i:0;if(l<=1||e==null)return 0;if(s==="angleAxis"&&r!=null&&Math.abs(Math.abs(r[1]-r[0])-360)<=1e-6)for(var o=0;o<l;o++){var c,d,u,f,p,x=o>0?(c=n[o-1])===null||c===void 0?void 0:c.coordinate:(d=n[l-1])===null||d===void 0?void 0:d.coordinate,v=(u=n[o])===null||u===void 0?void 0:u.coordinate,w=o>=l-1?(f=n[0])===null||f===void 0?void 0:f.coordinate:(p=n[o+1])===null||p===void 0?void 0:p.coordinate,b=void 0;if(!(x==null||v==null||w==null))if(is(v-x)!==is(w-v)){var C=[];if(is(w-v)===is(r[1]-r[0])){b=w;var N=v+r[1]-r[0];C[0]=Math.min(N,(N+x)/2),C[1]=Math.max(N,(N+x)/2)}else{b=x;var S=w+r[1]-r[0];C[0]=Math.min(v,(S+v)/2),C[1]=Math.max(v,(S+v)/2)}var A=[Math.min(v,(b+v)/2),Math.max(v,(b+v)/2)];if(e>A[0]&&e<=A[1]||e>=C[0]&&e<=C[1]){var k;return(k=n[o])===null||k===void 0?void 0:k.index}}else{var _=Math.min(x,w),T=Math.max(x,w);if(e>(_+v)/2&&e<=(T+v)/2){var E;return(E=n[o])===null||E===void 0?void 0:E.index}}}else if(t)for(var I=0;I<l;I++){var z=t[I];if(z!=null){var $=t[I+1],P=t[I-1];if(I===0&&$!=null&&e<=(z.coordinate+$.coordinate)/2||I===l-1&&P!=null&&e>(z.coordinate+P.coordinate)/2||I>0&&I<l-1&&P!=null&&$!=null&&e>(z.coordinate+P.coordinate)/2&&e<=(z.coordinate+$.coordinate)/2)return z.index}}return-1},AAe=()=>Mt(f4),q4=(e,t)=>t,qY=(e,t,n)=>n,Y4=(e,t,n,s)=>s,EAe=st(Fo,e=>xN(e,t=>t.coordinate)),K4=st([Gf,q4,qY,Y4],OY),Q4=st([K4,Vf,Cx,Ax],F4),TAe=(e,t,n)=>{if(t!=null){var s=Gf(e);return t==="axis"?n==="hover"?s.axisInteraction.hover.dataKey:s.axisInteraction.click.dataKey:n==="hover"?s.itemInteraction.hover.dataKey:s.itemInteraction.click.dataKey}},YY=st([Gf,q4,qY,Y4],IY),Sv=st([Io,$o,ma,Xn,Fo,Y4,YY,_x],MY),kAe=st([K4,Sv],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),KY=st([Fo,Q4],TY),LAe=st([YY,Q4,Ro,Cx,KY,_x,q4],$Y),PAe=st([K4,Q4],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),DAe=(e,t,n,s,r,i,l)=>{if(!(!e||!n||!s||!r)&&_Ae(e,l)){var o=A1e(e,t),c=VY(o,i,r,n,s),d=CAe(t,r,c,e);return{activeIndex:String(c),activeCoordinate:d}}},OAe=(e,t,n,s,r,i,l)=>{if(!(!e||!s||!r||!i||!n)){var o=GSe(e,n);if(o){var c=E1e(o,t),d=VY(c,l,i,s,r),u=SAe(t,i,d,o);return{activeIndex:String(d),activeCoordinate:u}}}},MAe=(e,t,n,s,r,i,l,o)=>{if(!(!e||!t||!s||!r||!i))return t==="horizontal"||t==="vertical"?DAe(e,t,s,r,i,l,o):OAe(e,t,n,s,r,i,l)},IAe=st(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,n)=>n,(e,t,n)=>{if(t!=null){var s=e[t];if(s!=null)return n?s.panoramaElement:s.element}}),$Ae=st(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(s=>parseInt(s,10)).concat(Object.values(Dn)),n=Array.from(new Set(t));return n.sort((s,r)=>s-r)},{memoizeOptions:{resultEqualityCheck:b2e}});function jz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function Cz(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jz(Object(n),!0).forEach(function(s){RAe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jz(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function RAe(e,t,n){return(t=zAe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zAe(e){var t=UAe(e,"string");return typeof t=="symbol"?t:t+""}function UAe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var FAe={},BAe={zIndexMap:Object.values(Dn).reduce((e,t)=>Cz(Cz({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),FAe)},HAe=new Set(Object.values(Dn));function GAe(e){return HAe.has(e)}var QY=cr({name:"zIndex",initialState:BAe,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]?e.zIndexMap[n].consumers+=1:e.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Za()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(e.zIndexMap[n].consumers-=1,e.zIndexMap[n].consumers<=0&&!GAe(n)&&delete e.zIndexMap[n])},prepare:Za()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:n,element:s,isPanorama:r}=t.payload;e.zIndexMap[n]?r?e.zIndexMap[n].panoramaElement=s:e.zIndexMap[n].element=s:e.zIndexMap[n]={consumers:0,element:r?void 0:s,panoramaElement:r?s:void 0}},prepare:Za()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(t.payload.isPanorama?e.zIndexMap[n].panoramaElement=void 0:e.zIndexMap[n].element=void 0)},prepare:Za()}}}),{registerZIndexPortal:WAe,unregisterZIndexPortal:VAe,registerZIndexPortalElement:qAe,unregisterZIndexPortalElement:YAe}=QY.actions,KAe=QY.reducer;function dr(e){var{zIndex:t,children:n}=e,s=rCe(),r=s&&t!==void 0&&t!==0,i=Ls(),l=Ga();h.useLayoutEffect(()=>r?(l(WAe({zIndex:t})),()=>{l(VAe({zIndex:t}))}):ux,[l,t,r]);var o=Mt(c=>IAe(c,t,i));return r?o?Sf.createPortal(n,o):null:n}function iT(){return iT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},iT.apply(null,arguments)}function Sz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function jy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Sz(Object(n),!0).forEach(function(s){QAe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sz(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function QAe(e,t,n){return(t=XAe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XAe(e){var t=ZAe(e,"string");return typeof t=="symbol"?t:t+""}function ZAe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function JAe(e){var{cursor:t,cursorComp:n,cursorProps:s}=e;return h.isValidElement(t)?h.cloneElement(t,s):h.createElement(n,s)}function eEe(e){var t,{coordinate:n,payload:s,index:r,offset:i,tooltipAxisBandSize:l,layout:o,cursor:c,tooltipEventType:d,chartName:u}=e,f=n,p=s,x=r;if(!c||!f||u!=="ScatterChart"&&d!=="axis")return null;var v,w,b;if(u==="ScatterChart")v=f,w=sSe,b=Dn.cursorLine;else if(u==="BarChart")v=rSe(o,f,i,l),w=_q,b=Dn.cursorRectangle;else if(o==="radial"&&cV(f)){var{cx:C,cy:N,radius:S,startAngle:A,endAngle:k}=Eq(f);v={cx:C,cy:N,startAngle:A,endAngle:k,innerRadius:S,outerRadius:S},w=kq,b=Dn.cursorLine}else v={points:YSe(o,f,i)},w=c4,b=Dn.cursorLine;var _=typeof c=="object"&&"className"in c?c.className:void 0,T=jy(jy(jy(jy({stroke:"#ccc",pointerEvents:"none"},i),v),mu(c)),{},{payload:p,payloadIndex:x,className:Tt("recharts-tooltip-cursor",_)});return h.createElement(dr,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:b},h.createElement(JAe,{cursor:c,cursorComp:w,cursorProps:T}))}function tEe(e){var t=vAe(),n=cq(),s=Rf(),r=AAe();return t==null||n==null||s==null||r==null?null:h.createElement(eEe,iT({},e,{offset:n,layout:s,tooltipAxisBandSize:t,chartName:r}))}var XY=h.createContext(null),aEe=()=>h.useContext(XY),T2={exports:{}},_z;function nEe(){return _z||(_z=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(n=!1));function r(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function i(c,d,u,f,p){if(typeof u!="function")throw new TypeError("The listener must be a function");var x=new r(u,f||c,p),v=n?n+d:d;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],x]:c._events[v].push(x):(c._events[v]=x,c._eventsCount++),c}function l(c,d){--c._eventsCount===0?c._events=new s:delete c._events[d]}function o(){this._events=new s,this._eventsCount=0}o.prototype.eventNames=function(){var d=[],u,f;if(this._eventsCount===0)return d;for(f in u=this._events)t.call(u,f)&&d.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},o.prototype.listeners=function(d){var u=n?n+d:d,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,x=f.length,v=new Array(x);p<x;p++)v[p]=f[p].fn;return v},o.prototype.listenerCount=function(d){var u=n?n+d:d,f=this._events[u];return f?f.fn?1:f.length:0},o.prototype.emit=function(d,u,f,p,x,v){var w=n?n+d:d;if(!this._events[w])return!1;var b=this._events[w],C=arguments.length,N,S;if(b.fn){switch(b.once&&this.removeListener(d,b.fn,void 0,!0),C){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,u),!0;case 3:return b.fn.call(b.context,u,f),!0;case 4:return b.fn.call(b.context,u,f,p),!0;case 5:return b.fn.call(b.context,u,f,p,x),!0;case 6:return b.fn.call(b.context,u,f,p,x,v),!0}for(S=1,N=new Array(C-1);S<C;S++)N[S-1]=arguments[S];b.fn.apply(b.context,N)}else{var A=b.length,k;for(S=0;S<A;S++)switch(b[S].once&&this.removeListener(d,b[S].fn,void 0,!0),C){case 1:b[S].fn.call(b[S].context);break;case 2:b[S].fn.call(b[S].context,u);break;case 3:b[S].fn.call(b[S].context,u,f);break;case 4:b[S].fn.call(b[S].context,u,f,p);break;default:if(!N)for(k=1,N=new Array(C-1);k<C;k++)N[k-1]=arguments[k];b[S].fn.apply(b[S].context,N)}}return!0},o.prototype.on=function(d,u,f){return i(this,d,u,f,!1)},o.prototype.once=function(d,u,f){return i(this,d,u,f,!0)},o.prototype.removeListener=function(d,u,f,p){var x=n?n+d:d;if(!this._events[x])return this;if(!u)return l(this,x),this;var v=this._events[x];if(v.fn)v.fn===u&&(!p||v.once)&&(!f||v.context===f)&&l(this,x);else{for(var w=0,b=[],C=v.length;w<C;w++)(v[w].fn!==u||p&&!v[w].once||f&&v[w].context!==f)&&b.push(v[w]);b.length?this._events[x]=b.length===1?b[0]:b:l(this,x)}return this},o.prototype.removeAllListeners=function(d){var u;return d?(u=n?n+d:d,this._events[u]&&l(this,u)):(this._events=new s,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o})(T2)),T2.exports}var sEe=nEe();const rEe=Oi(sEe);var up=new rEe,lT="recharts.syncEvent.tooltip",Az="recharts.syncEvent.brush";function X4(e,t){if(t){var n=Number.parseInt(t,10);if(!Pi(n))return e?.[n]}}var iEe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},ZY=cr({name:"options",initialState:iEe,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),lEe=ZY.reducer,{createEventEmitter:oEe}=ZY.actions;function cEe(e){return e.tooltip.syncInteraction}var dEe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},JY=cr({name:"chartData",initialState:dEe,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:s}=t.payload;n!=null&&(e.dataStartIndex=n),s!=null&&(e.dataEndIndex=s)}}}),{setChartData:Ez,setDataStartEndIndexes:uEe,setComputedData:QHe}=JY.actions,mEe=JY.reducer,fEe=["x","y"];function Tz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function Em(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Tz(Object(n),!0).forEach(function(s){hEe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tz(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function hEe(e,t,n){return(t=gEe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gEe(e){var t=pEe(e,"string");return typeof t=="symbol"?t:t+""}function pEe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xEe(e,t){if(e==null)return{};var n,s,r=yEe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function yEe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}function bEe(){var e=Mt(h4),t=Mt(g4),n=Ga(),s=Mt(Kq),r=Mt(Fo),i=Rf(),l=kN(),o=Mt(c=>c.rootProps.className);h.useEffect(()=>{if(e==null)return ux;var c=(d,u,f)=>{if(t!==f&&e===d){if(s==="index"){var p;if(l&&u!==null&&u!==void 0&&(p=u.payload)!==null&&p!==void 0&&p.coordinate&&u.payload.sourceViewBox){var x=u.payload.coordinate,{x:v,y:w}=x,b=xEe(x,fEe),{x:C,y:N,width:S,height:A}=u.payload.sourceViewBox,k=Em(Em({},b),{},{x:l.x+(S?(v-C)/S:0)*l.width,y:l.y+(A?(w-N)/A:0)*l.height});n(Em(Em({},u),{},{payload:Em(Em({},u.payload),{},{coordinate:k})}))}else n(u);return}if(r!=null){var _;if(typeof s=="function"){var T={activeTooltipIndex:u.payload.index==null?void 0:Number(u.payload.index),isTooltipActive:u.payload.active,activeIndex:u.payload.index==null?void 0:Number(u.payload.index),activeLabel:u.payload.label,activeDataKey:u.payload.dataKey,activeCoordinate:u.payload.coordinate},E=s(r,T);_=r[E]}else s==="value"&&(_=r.find(F=>String(F.value)===u.payload.label));var{coordinate:I}=u.payload;if(_==null||u.payload.active===!1||I==null||l==null){n(sT({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:z,y:$}=I,P=Math.min(z,l.x+l.width),O=Math.min($,l.y+l.height),B={x:i==="horizontal"?_.coordinate:P,y:i==="horizontal"?O:_.coordinate},Q=sT({active:u.payload.active,coordinate:B,dataKey:u.payload.dataKey,index:String(_.index),label:u.payload.label,sourceViewBox:u.payload.sourceViewBox,graphicalItemId:u.payload.graphicalItemId});n(Q)}}};return up.on(lT,c),()=>{up.off(lT,c)}},[o,n,t,e,s,r,i,l])}function vEe(){var e=Mt(h4),t=Mt(g4),n=Ga();h.useEffect(()=>{if(e==null)return ux;var s=(r,i,l)=>{t!==l&&e===r&&n(uEe(i))};return up.on(Az,s),()=>{up.off(Az,s)}},[n,t,e])}function wEe(){var e=Ga();h.useEffect(()=>{e(oEe())},[e]),bEe(),vEe()}function NEe(e,t,n,s,r,i){var l=Mt(x=>TAe(x,e,t)),o=Mt(g4),c=Mt(h4),d=Mt(Kq),u=Mt(cEe),f=u?.active,p=kN();h.useEffect(()=>{if(!f&&c!=null&&o!=null){var x=sT({active:i,coordinate:n,dataKey:l,index:r,label:typeof s=="number"?String(s):s,sourceViewBox:p,graphicalItemId:void 0});up.emit(lT,c,x,o)}},[f,n,l,r,s,o,c,d,i,p])}function kz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function Lz(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kz(Object(n),!0).forEach(function(s){jEe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kz(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function jEe(e,t,n){return(t=CEe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CEe(e){var t=SEe(e,"string");return typeof t=="symbol"?t:t+""}function SEe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _Ee(e){return e.dataKey}function AEe(e,t){return h.isValidElement(e)?h.cloneElement(e,t):typeof e=="function"?h.createElement(e,t):h.createElement($Ce,t)}var Pz=[],EEe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function k2(e){var t,n,s=$n(e,EEe),{active:r,allowEscapeViewBox:i,animationDuration:l,animationEasing:o,content:c,filterNull:d,isAnimationActive:u,offset:f,payloadUniqBy:p,position:x,reverseDirection:v,useTranslate3d:w,wrapperStyle:b,cursor:C,shared:N,trigger:S,defaultIndex:A,portal:k,axisId:_}=s,T=Ga(),E=typeof A=="number"?String(A):A;h.useEffect(()=>{T(j_e({shared:N,trigger:S,axisId:_,active:r,defaultIndex:E}))},[T,N,S,_,r,E]);var I=kN(),z=wq(),$=x_e(N),{activeIndex:P,isActive:O}=(t=Mt(Oe=>PAe(Oe,$,S,E)))!==null&&t!==void 0?t:{},B=Mt(Oe=>LAe(Oe,$,S,E)),Q=Mt(Oe=>KY(Oe,$,S,E)),F=Mt(Oe=>kAe(Oe,$,S,E)),ee=B,V=aEe(),de=(n=r??O)!==null&&n!==void 0?n:!1,[oe,Z]=jV([ee,de]),R=$==="axis"?Q:void 0;NEe($,S,F,R,P,de);var ve=k??V;if(ve==null||I==null||$==null)return null;var X=ee??Pz;de||(X=Pz),d&&X.length&&(X=bV(X.filter(Oe=>Oe.value!=null&&(Oe.hide!==!0||s.includeHidden)),p,_Ee));var je=X.length>0,Ne=h.createElement(GCe,{allowEscapeViewBox:i,animationDuration:l,animationEasing:o,isAnimationActive:u,active:de,coordinate:F,hasPayload:je,offset:f,position:x,reverseDirection:v,useTranslate3d:w,viewBox:I,wrapperStyle:b,lastBoundingBox:oe,innerRef:Z,hasPortalFromProps:!!k},AEe(c,Lz(Lz({},s),{},{payload:X,label:R,active:de,activeIndex:P,coordinate:F,accessibilityLayer:z})));return h.createElement(h.Fragment,null,Sf.createPortal(Ne,ve),de&&h.createElement(tEe,{cursor:C,tooltipEventType:$,coordinate:F,payload:X,index:P}))}var YN=e=>null;YN.displayName="Cell";function TEe(e,t,n){return(t=kEe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kEe(e){var t=LEe(e,"string");return typeof t=="symbol"?t:t+""}function LEe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class PEe{constructor(t){TEe(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var s=this.cache.keys().next().value;s!=null&&this.cache.delete(s)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function Dz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function DEe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Dz(Object(n),!0).forEach(function(s){OEe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dz(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function OEe(e,t,n){return(t=MEe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MEe(e){var t=IEe(e,"string");return typeof t=="symbol"?t:t+""}function IEe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $Ee={cacheSize:2e3,enableCache:!0},eK=DEe({},$Ee),Oz=new PEe(eK.cacheSize),REe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Mz="recharts_measurement_span";function zEe(e,t){var n=t.fontSize||"",s=t.fontFamily||"",r=t.fontWeight||"",i=t.fontStyle||"",l=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(s,"|").concat(r,"|").concat(i,"|").concat(l,"|").concat(o)}var Iz=(e,t)=>{try{var n=document.getElementById(Mz);n||(n=document.createElement("span"),n.setAttribute("id",Mz),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,REe,t),n.textContent="".concat(e);var s=n.getBoundingClientRect();return{width:s.width,height:s.height}}catch{return{width:0,height:0}}},kg=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||MN.isSsr)return{width:0,height:0};if(!eK.enableCache)return Iz(t,n);var s=zEe(t,n),r=Oz.get(s);if(r)return r;var i=Iz(t,n);return Oz.set(s,i),i},tK;function UEe(e,t,n){return(t=FEe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FEe(e){var t=BEe(e,"string");return typeof t=="symbol"?t:t+""}function BEe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $z=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Rz=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,HEe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,GEe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,WEe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},VEe=["cm","mm","pt","pc","in","Q","px"];function qEe(e){return VEe.includes(e)}var Bm="NaN";function YEe(e,t){return e*WEe[t]}class ps{static parse(t){var n,[,s,r]=(n=GEe.exec(t))!==null&&n!==void 0?n:[];return s==null?ps.NaN:new ps(parseFloat(s),r??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,Pi(t)&&(this.unit=""),n!==""&&!HEe.test(n)&&(this.num=NaN,this.unit=""),qEe(n)&&(this.num=YEe(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new ps(NaN,""):new ps(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new ps(NaN,""):new ps(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ps(NaN,""):new ps(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ps(NaN,""):new ps(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Pi(this.num)}}tK=ps;UEe(ps,"NaN",new tK(NaN,""));function aK(e){if(e==null||e.includes(Bm))return Bm;for(var t=e;t.includes("*")||t.includes("/");){var n,[,s,r,i]=(n=$z.exec(t))!==null&&n!==void 0?n:[],l=ps.parse(s??""),o=ps.parse(i??""),c=r==="*"?l.multiply(o):l.divide(o);if(c.isNaN())return Bm;t=t.replace($z,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,[,u,f,p]=(d=Rz.exec(t))!==null&&d!==void 0?d:[],x=ps.parse(u??""),v=ps.parse(p??""),w=f==="+"?x.add(v):x.subtract(v);if(w.isNaN())return Bm;t=t.replace(Rz,w.toString())}return t}var zz=/\(([^()]*)\)/;function KEe(e){for(var t=e,n;(n=zz.exec(t))!=null;){var[,s]=n;t=t.replace(zz,aK(s))}return t}function QEe(e){var t=e.replace(/\s+/g,"");return t=KEe(t),t=aK(t),t}function XEe(e){try{return QEe(e)}catch{return Bm}}function L2(e){var t=XEe(e.slice(5,-1));return t===Bm?"":t}var ZEe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],JEe=["dx","dy","angle","className","breakAll"];function oT(){return oT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},oT.apply(null,arguments)}function Uz(e,t){if(e==null)return{};var n,s,r=eTe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function eTe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}var nK=/[ \f\n\r\t\v\u2028\u2029]+/,sK=e=>{var{children:t,breakAll:n,style:s}=e;try{var r=[];an(t)||(n?r=t.toString().split(""):r=t.toString().split(nK));var i=r.map(o=>({word:o,width:kg(o,s).width})),l=n?0:kg("",s).width;return{wordsWithComputedWidth:i,spaceWidth:l}}catch{return null}};function tTe(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var rK=(e,t,n,s)=>e.reduce((r,i)=>{var{word:l,width:o}=i,c=r[r.length-1];if(c&&o!=null&&(t==null||s||c.width+o+n<Number(t)))c.words.push(l),c.width+=o+n;else{var d={words:[l],width:o};r.push(d)}return r},[]),iK=e=>e.reduce((t,n)=>t.width>n.width?t:n),aTe="",Fz=(e,t,n,s,r,i,l,o)=>{var c=e.slice(0,t),d=sK({breakAll:n,style:s,children:c+aTe});if(!d)return[!1,[]];var u=rK(d.wordsWithComputedWidth,i,l,o),f=u.length>r||iK(u).width>Number(i);return[f,u]},nTe=(e,t,n,s,r)=>{var{maxLines:i,children:l,style:o,breakAll:c}=e,d=Dt(i),u=String(l),f=rK(t,s,n,r);if(!d||r)return f;var p=f.length>i||iK(f).width>Number(s);if(!p)return f;for(var x=0,v=u.length-1,w=0,b;x<=v&&w<=u.length-1;){var C=Math.floor((x+v)/2),N=C-1,[S,A]=Fz(u,N,c,o,i,s,n,r),[k]=Fz(u,C,c,o,i,s,n,r);if(!S&&!k&&(x=C+1),S&&k&&(v=C-1),!S&&k){b=A;break}w++}return b||f},Bz=e=>{var t=an(e)?[]:e.toString().split(nK);return[{words:t,width:void 0}]},sTe=e=>{var{width:t,scaleToFit:n,children:s,style:r,breakAll:i,maxLines:l}=e;if((t||n)&&!MN.isSsr){var o,c,d=sK({breakAll:i,children:s,style:r});if(d){var{wordsWithComputedWidth:u,spaceWidth:f}=d;o=u,c=f}else return Bz(s);return nTe({breakAll:i,children:s,maxLines:l,style:r},o,c,t,!!n)}return Bz(s)},lK="#808080",rTe={angle:0,breakAll:!1,capHeight:"0.71em",fill:lK,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},KN=h.forwardRef((e,t)=>{var n=$n(e,rTe),{x:s,y:r,lineHeight:i,capHeight:l,fill:o,scaleToFit:c,textAnchor:d,verticalAnchor:u}=n,f=Uz(n,ZEe),p=h.useMemo(()=>sTe({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:c,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,c,f.style,f.width]),{dx:x,dy:v,angle:w,className:b,breakAll:C}=f,N=Uz(f,JEe);if(!bl(s)||!bl(r)||p.length===0)return null;var S=Number(s)+(Dt(x)?x:0),A=Number(r)+(Dt(v)?v:0);if(!ln(S)||!ln(A))return null;var k;switch(u){case"start":k=L2("calc(".concat(l,")"));break;case"middle":k=L2("calc(".concat((p.length-1)/2," * -").concat(i," + (").concat(l," / 2))"));break;default:k=L2("calc(".concat(p.length-1," * -").concat(i,")"));break}var _=[];if(c){var T=p[0].width,{width:E}=f;_.push("scale(".concat(Dt(E)&&Dt(T)?E/T:1,")"))}return w&&_.push("rotate(".concat(w,", ").concat(S,", ").concat(A,")")),_.length&&(N.transform=_.join(" ")),h.createElement("text",oT({},$s(N),{ref:t,x:S,y:A,className:Tt("recharts-text",b),textAnchor:d,fill:o.includes("url")?lK:o}),p.map((I,z)=>{var $=I.words.join(C?"":" ");return h.createElement("tspan",{x:S,dy:z===0?k:i,key:"".concat($,"-").concat(z)},$)}))});KN.displayName="Text";var iTe=["labelRef"],lTe=["content"];function Hz(e,t){if(e==null)return{};var n,s,r=oTe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function oTe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}function Gz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function wn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Gz(Object(n),!0).forEach(function(s){cTe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gz(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function cTe(e,t,n){return(t=dTe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dTe(e){var t=uTe(e,"string");return typeof t=="symbol"?t:t+""}function uTe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function no(){return no=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},no.apply(null,arguments)}var oK=h.createContext(null),mTe=e=>{var{x:t,y:n,upperWidth:s,lowerWidth:r,width:i,height:l,children:o}=e,c=h.useMemo(()=>({x:t,y:n,upperWidth:s,lowerWidth:r,width:i,height:l}),[t,n,s,r,i,l]);return h.createElement(oK.Provider,{value:c},o)},cK=()=>{var e=h.useContext(oK),t=kN();return e||oq(t)},fTe=h.createContext(null),hTe=()=>{var e=h.useContext(fTe),t=Mt(eY);return e||t},gTe=e=>{var{value:t,formatter:n}=e,s=an(e.children)?t:e.children;return typeof n=="function"?n(s):s},Z4=e=>e!=null&&typeof e=="function",pTe=(e,t)=>{var n=is(t-e),s=Math.min(Math.abs(t-e),360);return n*s},xTe=(e,t,n,s,r)=>{var{offset:i,className:l}=e,{cx:o,cy:c,innerRadius:d,outerRadius:u,startAngle:f,endAngle:p,clockWise:x}=r,v=(d+u)/2,w=pTe(f,p),b=w>=0?1:-1,C,N;switch(t){case"insideStart":C=f+b*i,N=x;break;case"insideEnd":C=p-b*i,N=!x;break;case"end":C=p+b*i,N=x;break;default:throw new Error("Unsupported position ".concat(t))}N=w<=0?N:!N;var S=Pn(o,c,v,C),A=Pn(o,c,v,C+(N?1:-1)*359),k="M".concat(S.x,",").concat(S.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(N?0:1,`,
    `).concat(A.x,",").concat(A.y),_=an(e.id)?ap("recharts-radial-line-"):e.id;return h.createElement("text",no({},s,{dominantBaseline:"central",className:Tt("recharts-radial-bar-label",l)}),h.createElement("defs",null,h.createElement("path",{id:_,d:k})),h.createElement("textPath",{xlinkHref:"#".concat(_)},n))},yTe=(e,t,n)=>{var{cx:s,cy:r,innerRadius:i,outerRadius:l,startAngle:o,endAngle:c}=e,d=(o+c)/2;if(n==="outside"){var{x:u,y:f}=Pn(s,r,l+t,d);return{x:u,y:f,textAnchor:u>=s?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:s,y:r,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:s,y:r,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:s,y:r,textAnchor:"middle",verticalAnchor:"end"};var p=(i+l)/2,{x,y:v}=Pn(s,r,p,d);return{x,y:v,textAnchor:"middle",verticalAnchor:"middle"}},cT=e=>"cx"in e&&Dt(e.cx),bTe=(e,t)=>{var{parentViewBox:n,offset:s,position:r}=e,i;n!=null&&!cT(n)&&(i=n);var{x:l,y:o,upperWidth:c,lowerWidth:d,height:u}=t,f=l,p=l+(c-d)/2,x=(f+p)/2,v=(c+d)/2,w=f+c/2,b=u>=0?1:-1,C=b*s,N=b>0?"end":"start",S=b>0?"start":"end",A=c>=0?1:-1,k=A*s,_=A>0?"end":"start",T=A>0?"start":"end";if(r==="top"){var E={x:f+c/2,y:o-C,textAnchor:"middle",verticalAnchor:N};return wn(wn({},E),i?{height:Math.max(o-i.y,0),width:c}:{})}if(r==="bottom"){var I={x:p+d/2,y:o+u+C,textAnchor:"middle",verticalAnchor:S};return wn(wn({},I),i?{height:Math.max(i.y+i.height-(o+u),0),width:d}:{})}if(r==="left"){var z={x:x-k,y:o+u/2,textAnchor:_,verticalAnchor:"middle"};return wn(wn({},z),i?{width:Math.max(z.x-i.x,0),height:u}:{})}if(r==="right"){var $={x:x+v+k,y:o+u/2,textAnchor:T,verticalAnchor:"middle"};return wn(wn({},$),i?{width:Math.max(i.x+i.width-$.x,0),height:u}:{})}var P=i?{width:v,height:u}:{};return r==="insideLeft"?wn({x:x+k,y:o+u/2,textAnchor:T,verticalAnchor:"middle"},P):r==="insideRight"?wn({x:x+v-k,y:o+u/2,textAnchor:_,verticalAnchor:"middle"},P):r==="insideTop"?wn({x:f+c/2,y:o+C,textAnchor:"middle",verticalAnchor:S},P):r==="insideBottom"?wn({x:p+d/2,y:o+u-C,textAnchor:"middle",verticalAnchor:N},P):r==="insideTopLeft"?wn({x:f+k,y:o+C,textAnchor:T,verticalAnchor:S},P):r==="insideTopRight"?wn({x:f+c-k,y:o+C,textAnchor:_,verticalAnchor:S},P):r==="insideBottomLeft"?wn({x:p+k,y:o+u-C,textAnchor:T,verticalAnchor:N},P):r==="insideBottomRight"?wn({x:p+d-k,y:o+u-C,textAnchor:_,verticalAnchor:N},P):r&&typeof r=="object"&&(Dt(r.x)||jo(r.x))&&(Dt(r.y)||jo(r.y))?wn({x:l+As(r.x,v),y:o+As(r.y,u),textAnchor:"end",verticalAnchor:"end"},P):wn({x:w,y:o+u/2,textAnchor:"middle",verticalAnchor:"middle"},P)},vTe={angle:0,offset:5,zIndex:Dn.label,position:"middle",textBreakAll:!1};function jc(e){var t=$n(e,vTe),{viewBox:n,position:s,value:r,children:i,content:l,className:o="",textBreakAll:c,labelRef:d}=t,u=hTe(),f=cK(),p=s==="center"?f:u??f,x,v,w;if(n==null?x=p:cT(n)?x=n:x=oq(n),!x||an(r)&&an(i)&&!h.isValidElement(l)&&typeof l!="function")return null;var b=wn(wn({},t),{},{viewBox:x});if(h.isValidElement(l)){var{labelRef:C}=b,N=Hz(b,iTe);return h.cloneElement(l,N)}if(typeof l=="function"){var{content:S}=b,A=Hz(b,lTe);if(v=h.createElement(l,A),h.isValidElement(v))return v}else v=gTe(t);var k=$s(t);if(cT(x)){if(s==="insideStart"||s==="insideEnd"||s==="end")return xTe(t,s,v,k,x);w=yTe(x,t.offset,t.position)}else w=bTe(t,x);return h.createElement(dr,{zIndex:t.zIndex},h.createElement(KN,no({ref:d,className:Tt("recharts-label",o)},k,w,{textAnchor:tTe(k.textAnchor)?k.textAnchor:w.textAnchor,breakAll:c}),v))}jc.displayName="Label";var wTe=(e,t,n)=>{if(!e)return null;var s={viewBox:t,labelRef:n};return e===!0?h.createElement(jc,no({key:"label-implicit"},s)):bl(e)?h.createElement(jc,no({key:"label-implicit",value:e},s)):h.isValidElement(e)?e.type===jc?h.cloneElement(e,wn({key:"label-implicit"},s)):h.createElement(jc,no({key:"label-implicit",content:e},s)):Z4(e)?h.createElement(jc,no({key:"label-implicit",content:e},s)):e&&typeof e=="object"?h.createElement(jc,no({},e,{key:"label-implicit"},s)):null};function NTe(e){var{label:t,labelRef:n}=e,s=cK();return wTe(t,s,n)||null}var P2={},D2={},Wz;function jTe(){return Wz||(Wz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(D2)),D2}var O2={},Vz;function CTe(){return Vz||(Vz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(O2)),O2}var qz;function STe(){return qz||(qz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jTe(),n=CTe(),s=qL();function r(i){if(s.isArrayLike(i))return t.last(n.toArray(i))}e.last=r})(P2)),P2}var M2,Yz;function _Te(){return Yz||(Yz=1,M2=STe().last),M2}var ATe=_Te();const ETe=Oi(ATe);var TTe=["valueAccessor"],kTe=["dataKey","clockWise","id","textBreakAll","zIndex"];function _v(){return _v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},_v.apply(null,arguments)}function Kz(e,t){if(e==null)return{};var n,s,r=LTe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function LTe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}var PTe=e=>Array.isArray(e.value)?ETe(e.value):e.value,dK=h.createContext(void 0),uK=dK.Provider,mK=h.createContext(void 0),DTe=mK.Provider;function OTe(){return h.useContext(dK)}function MTe(){return h.useContext(mK)}function wb(e){var{valueAccessor:t=PTe}=e,n=Kz(e,TTe),{dataKey:s,clockWise:r,id:i,textBreakAll:l,zIndex:o}=n,c=Kz(n,kTe),d=OTe(),u=MTe(),f=d||u;return!f||!f.length?null:h.createElement(dr,{zIndex:o??Dn.label},h.createElement(ls,{className:"recharts-label-list"},f.map((p,x)=>{var v,w=an(s)?t(p,x):Ia(p&&p.payload,s),b=an(i)?{}:{id:"".concat(i,"-").concat(x)};return h.createElement(jc,_v({key:"label-".concat(x)},$s(p),c,b,{fill:(v=n.fill)!==null&&v!==void 0?v:p.fill,parentViewBox:p.parentViewBox,value:w,textBreakAll:l,viewBox:p.viewBox,index:x,zIndex:0}))})))}wb.displayName="LabelList";function J4(e){var{label:t}=e;return t?t===!0?h.createElement(wb,{key:"labelList-implicit"}):h.isValidElement(t)||Z4(t)?h.createElement(wb,{key:"labelList-implicit",content:t}):typeof t=="object"?h.createElement(wb,_v({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function dT(){return dT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},dT.apply(null,arguments)}var fK=e=>{var{cx:t,cy:n,r:s,className:r}=e,i=Tt("recharts-dot",r);return Dt(t)&&Dt(n)&&Dt(s)?h.createElement("circle",dT({},kr(e),VL(e),{className:i,cx:t,cy:n,r:s})):null},hK=e=>e.graphicalItems.polarItems,ITe=st([sn,wx],w4),QN=st([hK,cn,ITe],N4),$Te=st([QN],j4),XN=st([$Te,IN],C4),RTe=st([XN,cn,QN],_4);st([XN,cn,QN],(e,t,n)=>n.length>0?e.flatMap(s=>n.flatMap(r=>{var i,l=Ia(s,(i=t.dataKey)!==null&&i!==void 0?i:r.dataKey);return{value:l,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(s=>({value:Ia(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})));var Qz=()=>{},zTe=st([XN,cn,QN,GN,sn],k4),UTe=st([cn,E4,T4,Qz,zTe,Qz,ma,sn],L4),gK=st([cn,ma,XN,RTe,vx,sn,UTe],P4),FTe=st([gK,cn,Hf],M4);st([cn,gK,FTe,sn],$4);var BTe={radiusAxis:{},angleAxis:{}},pK=cr({name:"polarAxis",initialState:BTe,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:XHe,removeRadiusAxis:ZHe,addAngleAxis:JHe,removeAngleAxis:e9e}=pK.actions,HTe=pK.reducer;function Xz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function Zz(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Xz(Object(n),!0).forEach(function(s){GTe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xz(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function GTe(e,t,n){return(t=WTe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WTe(e){var t=VTe(e,"string");return typeof t=="symbol"?t:t+""}function VTe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qTe=(e,t)=>t,eP=st([hK,qTe],(e,t)=>e.filter(n=>n.type==="pie").find(n=>n.id===t)),YTe=[],tP=(e,t,n)=>n?.length===0?YTe:n,xK=st([IN,eP,tP],(e,t,n)=>{var{chartData:s}=e;if(t!=null){var r;if(t?.data!=null&&t.data.length>0?r=t.data:r=s,(!r||!r.length)&&n!=null&&(r=n.map(i=>Zz(Zz({},t.presentationProps),i.props))),r!=null)return r}}),KTe=st([xK,eP,tP],(e,t,n)=>{if(!(e==null||t==null))return e.map((s,r)=>{var i,l=Ia(s,t.nameKey,t.name),o;return n!=null&&(i=n[r])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?o=n[r].props.fill:typeof s=="object"&&s!=null&&"fill"in s?o=s.fill:o=t.fill,{value:$f(l,t.dataKey),color:o,payload:s,type:t.legendType}})}),QTe=st([xK,eP,tP,Xn],(e,t,n,s)=>{if(!(t==null||e==null))return Kke({offset:s,pieSettings:t,displayedData:e,cells:n})}),Jz=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",eU=null,I2=null,yK=e=>{if(e===eU&&Array.isArray(I2))return I2;var t=[];return h.Children.forEach(e,n=>{an(n)||(ak.isFragment(n)?t=t.concat(yK(n.props.children)):t.push(n))}),I2=t,eU=e,t};function aP(e,t){var n=[],s=[];return Array.isArray(t)?s=t.map(r=>Jz(r)):s=[Jz(t)],yK(e).forEach(r=>{var i=fu(r,"type.displayName")||fu(r,"type.name");i&&s.indexOf(i)!==-1&&n.push(r)}),n}var bK=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,$2={},tU;function XTe(){return tU||(tU=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const r=n[Symbol.toStringTag];return r==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${r}]`}let s=n;for(;Object.getPrototypeOf(s)!==null;)s=Object.getPrototypeOf(s);return Object.getPrototypeOf(n)===s}e.isPlainObject=t})($2)),$2}var R2,aU;function ZTe(){return aU||(aU=1,R2=XTe().isPlainObject),R2}var JTe=ZTe();const eke=Oi(JTe);var nU,sU,rU,iU,lU;function oU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function cU(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oU(Object(n),!0).forEach(function(s){tke(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oU(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function tke(e,t,n){return(t=ake(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ake(e){var t=nke(e,"string");return typeof t=="symbol"?t:t+""}function nke(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Av(){return Av=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Av.apply(null,arguments)}function Zh(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var dU=(e,t,n,s,r)=>{var i=n-s,l;return l=hn(nU||(nU=Zh(["M ",",",""])),e,t),l+=hn(sU||(sU=Zh(["L ",",",""])),e+n,t),l+=hn(rU||(rU=Zh(["L ",",",""])),e+n-i/2,t+r),l+=hn(iU||(iU=Zh(["L ",",",""])),e+n-i/2-s,t+r),l+=hn(lU||(lU=Zh(["L ",","," Z"])),e,t),l},ske={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},rke=e=>{var t=$n(e,ske),{x:n,y:s,upperWidth:r,lowerWidth:i,height:l,className:o}=t,{animationEasing:c,animationDuration:d,animationBegin:u,isUpdateAnimationActive:f}=t,p=h.useRef(null),[x,v]=h.useState(-1),w=h.useRef(r),b=h.useRef(i),C=h.useRef(l),N=h.useRef(n),S=h.useRef(s),A=bx(e,"trapezoid-");if(h.useEffect(()=>{if(p.current&&p.current.getTotalLength)try{var B=p.current.getTotalLength();B&&v(B)}catch{}},[]),n!==+n||s!==+s||r!==+r||i!==+i||l!==+l||r===0&&i===0||l===0)return null;var k=Tt("recharts-trapezoid",o);if(!f)return h.createElement("g",null,h.createElement("path",Av({},$s(t),{className:k,d:dU(n,s,r,i,l)})));var _=w.current,T=b.current,E=C.current,I=N.current,z=S.current,$="0px ".concat(x===-1?1:x,"px"),P="".concat(x,"px 0px"),O=Nq(["strokeDasharray"],d,c);return h.createElement(yx,{animationId:A,key:A,canBegin:x>0,duration:d,easing:c,isActive:f,begin:u},B=>{var Q=Ja(_,r,B),F=Ja(T,i,B),ee=Ja(E,l,B),V=Ja(I,n,B),de=Ja(z,s,B);p.current&&(w.current=Q,b.current=F,C.current=ee,N.current=V,S.current=de);var oe=B>0?{transition:O,strokeDasharray:P}:{strokeDasharray:$};return h.createElement("path",Av({},$s(t),{className:k,d:dU(V,de,Q,F,ee),ref:p,style:cU(cU({},oe),t.style)}))})},ike=["option","shapeType","activeClassName"];function lke(e,t){if(e==null)return{};var n,s,r=oke(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function oke(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}function uU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function Ev(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uU(Object(n),!0).forEach(function(s){cke(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uU(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function cke(e,t,n){return(t=dke(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dke(e){var t=uke(e,"string");return typeof t=="symbol"?t:t+""}function uke(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mke(e,t){return Ev(Ev({},t),e)}function fke(e,t){return e==="symbols"}function mU(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return h.createElement(_q,n);case"trapezoid":return h.createElement(rke,n);case"sector":return h.createElement(kq,n);case"symbols":if(fke(t))return h.createElement(WL,n);break;case"curve":return h.createElement(c4,n);default:return null}}function hke(e){return h.isValidElement(e)?e.props:e}function nP(e){var{option:t,shapeType:n,activeClassName:s="recharts-active-shape"}=e,r=lke(e,ike),i;if(h.isValidElement(t))i=h.cloneElement(t,Ev(Ev({},r),hke(t)));else if(typeof t=="function")i=t(r,r.index);else if(eke(t)&&typeof t!="boolean"){var l=mke(t,r);i=h.createElement(mU,{shapeType:n,elementProps:l})}else{var o=r;i=h.createElement(mU,{shapeType:n,elementProps:o})}return r.isActive?h.createElement(ls,{className:s},i):i}var sP=(e,t,n)=>{var s=Ga();return(r,i)=>l=>{e?.(r,i,l),s(LY({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition,activeGraphicalItemId:n}))}},rP=e=>{var t=Ga();return(n,s)=>r=>{e?.(n,s,r),t(C_e())}},iP=(e,t,n)=>{var s=Ga();return(r,i)=>l=>{e?.(r,i,l),s(S_e({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition,activeGraphicalItemId:n}))}};function lP(e){var{tooltipEntrySettings:t}=e,n=Ga(),s=Ls(),r=h.useRef(null);return h.useLayoutEffect(()=>{s||(r.current===null?n(v_e(t)):r.current!==t&&n(w_e({prev:r.current,next:t})),r.current=t)},[t,n,s]),h.useLayoutEffect(()=>()=>{r.current&&(n(N_e(r.current)),r.current=null)},[n]),null}function vK(e){var{legendPayload:t}=e,n=Ga(),s=Ls(),r=h.useRef(null);return h.useLayoutEffect(()=>{s||(r.current===null?n(xq(t)):r.current!==t&&n(yq({prev:r.current,next:t})),r.current=t)},[n,s,t]),h.useLayoutEffect(()=>()=>{r.current&&(n(bq(r.current)),r.current=null)},[n]),null}function gke(e){var{legendPayload:t}=e,n=Ga(),s=Mt(ma),r=h.useRef(null);return h.useLayoutEffect(()=>{s!=="centric"&&s!=="radial"||(r.current===null?n(xq(t)):r.current!==t&&n(yq({prev:r.current,next:t})),r.current=t)},[n,s,t]),h.useLayoutEffect(()=>()=>{r.current&&(n(bq(r.current)),r.current=null)},[n]),null}var z2,pke=()=>{var[e]=h.useState(()=>ap("uid-"));return e},xke=(z2=tu.useId)!==null&&z2!==void 0?z2:pke;function yke(e,t){var n=xke();return t||(e?"".concat(e,"-").concat(n):n)}var bke=h.createContext(void 0),oP=e=>{var{id:t,type:n,children:s}=e,r=yke("recharts-".concat(n),t);return h.createElement(bke.Provider,{value:r},s(r))},vke={cartesianItems:[],polarItems:[]},wK=cr({name:"graphicalItems",initialState:vke,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Za()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:n,next:s}=t.payload,r=ki(e).cartesianItems.indexOf(n);r>-1&&(e.cartesianItems[r]=s)},prepare:Za()},removeCartesianGraphicalItem:{reducer(e,t){var n=ki(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},prepare:Za()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Za()},removePolarGraphicalItem:{reducer(e,t){var n=ki(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)},prepare:Za()}}}),{addCartesianGraphicalItem:wke,replaceCartesianGraphicalItem:Nke,removeCartesianGraphicalItem:jke,addPolarGraphicalItem:Cke,removePolarGraphicalItem:Ske}=wK.actions,_ke=wK.reducer,Ake=e=>{var t=Ga(),n=h.useRef(null);return h.useLayoutEffect(()=>{n.current===null?t(wke(e)):n.current!==e&&t(Nke({prev:n.current,next:e})),n.current=e},[t,e]),h.useLayoutEffect(()=>()=>{n.current&&(t(jke(n.current)),n.current=null)},[t]),null},NK=h.memo(Ake);function Eke(e){var t=Ga();return h.useLayoutEffect(()=>(t(Cke(e)),()=>{t(Ske(e))}),[t,e]),null}var Tke=["key"],kke=["onMouseEnter","onClick","onMouseLeave"],Lke=["id"],Pke=["id"];function fU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function gn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fU(Object(n),!0).forEach(function(s){Dke(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fU(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Dke(e,t,n){return(t=Oke(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oke(e){var t=Mke(e,"string");return typeof t=="symbol"?t:t+""}function Mke(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vc(){return Vc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Vc.apply(null,arguments)}function ZN(e,t){if(e==null)return{};var n,s,r=Ike(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ike(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}function $ke(e){var t=h.useMemo(()=>aP(e.children,YN),[e.children]),n=Mt(s=>KTe(s,e.id,t));return n==null?null:h.createElement(gke,{legendPayload:n})}var Rke=h.memo(e=>{var{dataKey:t,nameKey:n,sectors:s,stroke:r,strokeWidth:i,fill:l,name:o,hide:c,tooltipType:d,id:u}=e,f={dataDefinedOnItem:s.map(p=>p.tooltipPayload),positions:s.map(p=>p.tooltipPosition),settings:{stroke:r,strokeWidth:i,fill:l,dataKey:t,nameKey:n,name:$f(o,t),hide:c,type:d,color:l,unit:"",graphicalItemId:u}};return h.createElement(lP,{tooltipEntrySettings:f})}),zke=(e,t)=>e>t?"start":e<t?"end":"middle",Uke=(e,t,n)=>As(typeof t=="function"?t(e):t,n,n*.8),Fke=(e,t,n)=>{var{top:s,left:r,width:i,height:l}=t,o=Aq(i,l),c=r+As(e.cx,i,i/2),d=s+As(e.cy,l,l/2),u=As(e.innerRadius,o,0),f=Uke(n,e.outerRadius,o),p=e.maxRadius||Math.sqrt(i*i+l*l)/2;return{cx:c,cy:d,innerRadius:u,outerRadius:f,maxRadius:p}},Bke=(e,t)=>{var n=is(t-e),s=Math.min(Math.abs(t-e),360);return n*s};function Hke(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var Gke=(e,t)=>{if(h.isValidElement(e))return h.cloneElement(e,t);if(typeof e=="function")return e(t);var n=Tt("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:s}=t,r=ZN(t,Tke);return h.createElement(c4,Vc({},r,{type:"linear",className:n}))},Wke=(e,t,n)=>{if(h.isValidElement(e))return h.cloneElement(e,t);var s=n;if(typeof e=="function"&&(s=e(t),h.isValidElement(s)))return s;var r=Tt("recharts-pie-label-text",Hke(e));return h.createElement(KN,Vc({},t,{alignmentBaseline:"middle",className:r}),s)};function Vke(e){var{sectors:t,props:n,showLabels:s}=e,{label:r,labelLine:i,dataKey:l}=n;if(!s||!r||!t)return null;var o=kr(n),c=mu(r),d=mu(i),u=typeof r=="object"&&"offsetRadius"in r&&typeof r.offsetRadius=="number"&&r.offsetRadius||20,f=t.map((p,x)=>{var v=(p.startAngle+p.endAngle)/2,w=Pn(p.cx,p.cy,p.outerRadius+u,v),b=gn(gn(gn(gn({},o),p),{},{stroke:"none"},c),{},{index:x,textAnchor:zke(w.x,p.cx)},w),C=gn(gn(gn(gn({},o),p),{},{fill:"none",stroke:p.fill},d),{},{index:x,points:[Pn(p.cx,p.cy,p.outerRadius,v),w],key:"line"});return h.createElement(dr,{zIndex:Dn.label,key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(x)},h.createElement(ls,null,i&&Gke(i,C),Wke(r,b,Ia(p,l))))});return h.createElement(ls,{className:"recharts-pie-labels"},f)}function qke(e){var{sectors:t,props:n,showLabels:s}=e,{label:r}=n;return typeof r=="object"&&r!=null&&"position"in r?h.createElement(J4,{label:r}):h.createElement(Vke,{sectors:t,props:n,showLabels:s})}function Yke(e){var{sectors:t,activeShape:n,inactiveShape:s,allOtherPieProps:r,shape:i,id:l}=e,o=Mt(Wc),c=Mt(V4),d=Mt(dAe),{onMouseEnter:u,onClick:f,onMouseLeave:p}=r,x=ZN(r,kke),v=sP(u,r.dataKey,l),w=rP(p),b=iP(f,r.dataKey,l);return t==null||t.length===0?null:h.createElement(h.Fragment,null,t.map((C,N)=>{if(C?.startAngle===0&&C?.endAngle===0&&t.length!==1)return null;var S=d==null||d===l,A=String(N)===o&&(c==null||r.dataKey===c)&&S,k=o?s:null,_=n&&A?n:k,T=gn(gn({},C),{},{stroke:C.stroke,tabIndex:-1,[nq]:N,[sq]:l});return h.createElement(ls,Vc({key:"sector-".concat(C?.startAngle,"-").concat(C?.endAngle,"-").concat(C.midAngle,"-").concat(N),tabIndex:-1,className:"recharts-pie-sector"},mx(x,C,N),{onMouseEnter:v(C,N),onMouseLeave:w(C,N),onClick:b(C,N)}),h.createElement(nP,Vc({option:i??_,index:N,shapeType:"sector",isActive:A},T)))}))}function Kke(e){var t,{pieSettings:n,displayedData:s,cells:r,offset:i}=e,{cornerRadius:l,startAngle:o,endAngle:c,dataKey:d,nameKey:u,tooltipType:f}=n,p=Math.abs(n.minAngle),x=Bke(o,c),v=Math.abs(x),w=s.length<=1?0:(t=n.paddingAngle)!==null&&t!==void 0?t:0,b=s.filter(_=>Ia(_,d,0)!==0).length,C=(v>=360?b:b-1)*w,N=v-b*p-C,S=s.reduce((_,T)=>{var E=Ia(T,d,0);return _+(Dt(E)?E:0)},0),A;if(S>0){var k;A=s.map((_,T)=>{var E=Ia(_,d,0),I=Ia(_,u,T),z=Fke(n,i,_),$=(Dt(E)?E:0)/S,P,O=gn(gn({},_),r&&r[T]&&r[T].props);T?P=k.endAngle+is(x)*w*(E!==0?1:0):P=o;var B=P+is(x)*((E!==0?p:0)+$*N),Q=(P+B)/2,F=(z.innerRadius+z.outerRadius)/2,ee=[{name:I,value:E,payload:O,dataKey:d,type:f,graphicalItemId:n.id}],V=Pn(z.cx,z.cy,F,Q);return k=gn(gn(gn(gn({},n.presentationProps),{},{percent:$,cornerRadius:typeof l=="string"?parseFloat(l):l,name:I,tooltipPayload:ee,midAngle:Q,middleRadius:F,tooltipPosition:V},O),z),{},{value:E,dataKey:d,startAngle:P,endAngle:B,payload:O,paddingAngle:is(x)*w}),k})}return A}function Qke(e){var{showLabels:t,sectors:n,children:s}=e,r=h.useMemo(()=>!t||!n?[]:n.map(i=>({value:i.value,payload:i.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:i.cx,cy:i.cy,innerRadius:i.innerRadius,outerRadius:i.outerRadius,startAngle:i.startAngle,endAngle:i.endAngle,clockWise:!1},fill:i.fill})),[n,t]);return h.createElement(DTe,{value:t?r:void 0},s)}function Xke(e){var{props:t,previousSectorsRef:n,id:s}=e,{sectors:r,isAnimationActive:i,animationBegin:l,animationDuration:o,animationEasing:c,activeShape:d,inactiveShape:u,onAnimationStart:f,onAnimationEnd:p}=t,x=bx(t,"recharts-pie-"),v=n.current,[w,b]=h.useState(!1),C=h.useCallback(()=>{typeof p=="function"&&p(),b(!1)},[p]),N=h.useCallback(()=>{typeof f=="function"&&f(),b(!0)},[f]);return h.createElement(Qke,{showLabels:!w,sectors:r},h.createElement(yx,{animationId:x,begin:l,duration:o,isActive:i,easing:c,onAnimationStart:N,onAnimationEnd:C,key:x},S=>{var A=[],k=r&&r[0],_=k?.startAngle;return r?.forEach((T,E)=>{var I=v&&v[E],z=E>0?fu(T,"paddingAngle",0):0;if(I){var $=Ja(I.endAngle-I.startAngle,T.endAngle-T.startAngle,S),P=gn(gn({},T),{},{startAngle:_+z,endAngle:_+$+z});A.push(P),_=P.endAngle}else{var{endAngle:O,startAngle:B}=T,Q=Ja(0,O-B,S),F=gn(gn({},T),{},{startAngle:_+z,endAngle:_+Q+z});A.push(F),_=F.endAngle}}),n.current=A,h.createElement(ls,null,h.createElement(Yke,{sectors:A,activeShape:d,inactiveShape:u,allOtherPieProps:t,shape:t.shape,id:s}))}),h.createElement(qke,{showLabels:!w,sectors:r,props:t}),t.children)}var Zke={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Dn.area};function Jke(e){var{id:t}=e,n=ZN(e,Lke),{hide:s,className:r,rootTabIndex:i}=e,l=h.useMemo(()=>aP(e.children,YN),[e.children]),o=Mt(u=>QTe(u,t,l)),c=h.useRef(null),d=Tt("recharts-pie",r);return s||o==null?(c.current=null,h.createElement(ls,{tabIndex:i,className:d})):h.createElement(dr,{zIndex:e.zIndex},h.createElement(Rke,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:o,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),h.createElement(ls,{tabIndex:i,className:d},h.createElement(Xke,{props:gn(gn({},n),{},{sectors:o}),previousSectorsRef:c,id:t})))}function jK(e){var t=$n(e,Zke),{id:n}=t,s=ZN(t,Pke),r=kr(s);return h.createElement(oP,{id:n,type:"pie"},i=>h.createElement(h.Fragment,null,h.createElement(Eke,{type:"pie",id:i,data:s.data,dataKey:s.dataKey,hide:s.hide,angleAxisId:0,radiusAxisId:0,name:s.name,nameKey:s.nameKey,tooltipType:s.tooltipType,legendType:s.legendType,fill:s.fill,cx:s.cx,cy:s.cy,startAngle:s.startAngle,endAngle:s.endAngle,paddingAngle:s.paddingAngle,minAngle:s.minAngle,innerRadius:s.innerRadius,outerRadius:s.outerRadius,cornerRadius:s.cornerRadius,presentationProps:r,maxRadius:t.maxRadius}),h.createElement($ke,Vc({},s,{id:i})),h.createElement(Jke,Vc({},s,{id:i}))))}jK.displayName="Pie";var eLe=["points"];function hU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function U2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hU(Object(n),!0).forEach(function(s){tLe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hU(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function tLe(e,t,n){return(t=aLe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aLe(e){var t=nLe(e,"string");return typeof t=="symbol"?t:t+""}function nLe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tv(){return Tv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Tv.apply(null,arguments)}function sLe(e,t){if(e==null)return{};var n,s,r=rLe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function rLe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}function iLe(e){var{option:t,dotProps:n,className:s}=e;if(h.isValidElement(t))return h.cloneElement(t,n);if(typeof t=="function")return t(n);var r=Tt(s,typeof t!="boolean"?t.className:""),i=n??{},{points:l}=i,o=sLe(i,eLe);return h.createElement(fK,Tv({},o,{className:r}))}function lLe(e,t){return e==null?!1:t?!0:e.length===1}function oLe(e){var{points:t,dot:n,className:s,dotClassName:r,dataKey:i,baseProps:l,needClip:o,clipPathId:c,zIndex:d=Dn.scatter}=e;if(!lLe(t,n))return null;var u=bK(n),f=Kwe(n),p=t.map((v,w)=>{var b,C,N=U2(U2(U2({r:3},l),f),{},{index:w,cx:(b=v.x)!==null&&b!==void 0?b:void 0,cy:(C=v.y)!==null&&C!==void 0?C:void 0,dataKey:i,value:v.value,payload:v.payload,points:t});return h.createElement(iLe,{key:"dot-".concat(w),option:n,dotProps:N,className:r})}),x={};return o&&c!=null&&(x.clipPath="url(#clipPath-".concat(u?"":"dots-").concat(c,")")),h.createElement(dr,{zIndex:d},h.createElement(ls,Tv({className:s},x),p))}function gU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function pU(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gU(Object(n),!0).forEach(function(s){cLe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gU(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function cLe(e,t,n){return(t=dLe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dLe(e){var t=uLe(e,"string");return typeof t=="symbol"?t:t+""}function uLe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var CK=0,mLe={xAxis:{},yAxis:{},zAxis:{}},SK=cr({name:"cartesianAxis",initialState:mLe,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Za()},replaceXAxis:{reducer(e,t){var{prev:n,next:s}=t.payload;e.xAxis[n.id]!==void 0&&(n.id!==s.id&&delete e.xAxis[n.id],e.xAxis[s.id]=s)},prepare:Za()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Za()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Za()},replaceYAxis:{reducer(e,t){var{prev:n,next:s}=t.payload;e.yAxis[n.id]!==void 0&&(n.id!==s.id&&delete e.yAxis[n.id],e.yAxis[s.id]=s)},prepare:Za()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Za()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Za()},replaceZAxis:{reducer(e,t){var{prev:n,next:s}=t.payload;e.zAxis[n.id]!==void 0&&(n.id!==s.id&&delete e.zAxis[n.id],e.zAxis[s.id]=s)},prepare:Za()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Za()},updateYAxisWidth(e,t){var{id:n,width:s}=t.payload,r=e.yAxis[n];if(r){var i=r.widthHistory||[];if(i.length===3&&i[0]===i[2]&&s===i[1]&&s!==r.width&&Math.abs(s-i[0])<=1)return;var l=[...i,s].slice(-3);e.yAxis[n]=pU(pU({},e.yAxis[n]),{},{width:s,widthHistory:l})}}}}),{addXAxis:fLe,replaceXAxis:hLe,removeXAxis:gLe,addYAxis:pLe,replaceYAxis:xLe,removeYAxis:yLe,addZAxis:t9e,replaceZAxis:a9e,removeZAxis:n9e,updateYAxisWidth:bLe}=SK.actions,vLe=SK.reducer,wLe=st([Xn],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),NLe=st([wLe,Io,$o],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),cP=()=>Mt(NLe),jLe=()=>Mt(gAe);function xU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function F2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xU(Object(n),!0).forEach(function(s){CLe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xU(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function CLe(e,t,n){return(t=SLe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function SLe(e){var t=_Le(e,"string");return typeof t=="symbol"?t:t+""}function _Le(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ALe=e=>{var{point:t,childIndex:n,mainColor:s,activeDot:r,dataKey:i,clipPath:l}=e;if(r===!1||t.x==null||t.y==null)return null;var o={index:n,dataKey:i,cx:t.x,cy:t.y,r:4,fill:s??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},c=F2(F2(F2({},o),mu(r)),VL(r)),d;return h.isValidElement(r)?d=h.cloneElement(r,c):typeof r=="function"?d=r(c):d=h.createElement(fK,c),h.createElement(ls,{className:"recharts-active-dot",clipPath:l},d)};function ELe(e){var{points:t,mainColor:n,activeDot:s,itemDataKey:r,clipPath:i,zIndex:l=Dn.activeDot}=e,o=Mt(Wc),c=jLe();if(t==null||c==null)return null;var d=t.find(u=>c.includes(u.payload));return an(d)?null:h.createElement(dr,{zIndex:l},h.createElement(ALe,{point:d,childIndex:Number(o),mainColor:n,dataKey:r,activeDot:s,clipPath:i}))}var yU=(e,t,n)=>{var s=n??e;if(!an(s))return As(s,t,0)},TLe=(e,t,n)=>{var s={},r=e.filter(zN),i=e.filter(d=>d.stackId==null),l=r.reduce((d,u)=>(d[u.stackId]||(d[u.stackId]=[]),d[u.stackId].push(u),d),s),o=Object.entries(l).map(d=>{var[u,f]=d,p=f.map(v=>v.dataKey),x=yU(t,n,f[0].barSize);return{stackId:u,dataKeys:p,barSize:x}}),c=i.map(d=>{var u=[d.dataKey].filter(p=>p!=null),f=yU(t,n,d.barSize);return{stackId:void 0,dataKeys:u,barSize:f}});return[...o,...c]};function bU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function Cy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bU(Object(n),!0).forEach(function(s){kLe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bU(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function kLe(e,t,n){return(t=LLe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LLe(e){var t=PLe(e,"string");return typeof t=="symbol"?t:t+""}function PLe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function DLe(e,t,n,s,r){var i=s.length;if(!(i<1)){var l=As(e,n,0,!0),o,c=[];if(ln(s[0].barSize)){var d=!1,u=n/i,f=s.reduce((C,N)=>C+(N.barSize||0),0);f+=(i-1)*l,f>=n&&(f-=(i-1)*l,l=0),f>=n&&u>0&&(d=!0,u*=.9,f=i*u);var p=(n-f)/2>>0,x={offset:p-l,size:0};o=s.reduce((C,N)=>{var S,A={stackId:N.stackId,dataKeys:N.dataKeys,position:{offset:x.offset+x.size+l,size:d?u:(S=N.barSize)!==null&&S!==void 0?S:0}},k=[...C,A];return x=k[k.length-1].position,k},c)}else{var v=As(t,n,0,!0);n-2*v-(i-1)*l<=0&&(l=0);var w=(n-2*v-(i-1)*l)/i;w>1&&(w>>=0);var b=ln(r)?Math.min(w,r):w;o=s.reduce((C,N,S)=>[...C,{stackId:N.stackId,dataKeys:N.dataKeys,position:{offset:v+(w+l)*S+(w-b)/2,size:b}}],c)}return o}}var OLe=(e,t,n,s,r,i,l)=>{var o=an(l)?t:l,c=DLe(n,s,r!==i?r:i,e,o);return r!==i&&c!=null&&(c=c.map(d=>Cy(Cy({},d),{},{position:Cy(Cy({},d.position),{},{offset:d.position.offset-r/2})}))),c},MLe=(e,t)=>{var n=b4(t);if(!(!e||n==null||t==null)){var{stackId:s}=t;if(s!=null){var r=e[s];if(r){var{stackedData:i}=r;if(i)return i.find(l=>l.key===n)}}}};function ILe(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&ln(e.zIndex)?e.zIndex:t}var _K=e=>{var{chartData:t}=e,n=Ga(),s=Ls();return h.useEffect(()=>s?()=>{}:(n(Ez(t)),()=>{n(Ez(void 0))}),[t,n,s]),null},vU={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},AK=cr({name:"brush",initialState:vU,reducers:{setBrushSettings(e,t){return t.payload==null?vU:t.payload}}}),{setBrushSettings:s9e}=AK.actions,$Le=AK.reducer;function RLe(e,t,n){return(t=zLe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zLe(e){var t=ULe(e,"string");return typeof t=="symbol"?t:t+""}function ULe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class dP{static create(t){return new dP(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(s)switch(s){case"start":return this.scale(t);case"middle":{var r=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+r}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(n){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var n=this.range(),s=n[0],r=n[n.length-1];return s<=r?t>=s&&t<=r:t>=r&&t<=s}}RLe(dP,"EPS",1e-4);function FLe(e){return(e%180+180)%180}var BLe=function(t){var{width:n,height:s}=t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=FLe(r),l=i*Math.PI/180,o=Math.atan(s/n),c=l>o&&l<Math.PI-o?s/Math.sin(l):n/Math.cos(l);return Math.abs(c)},HLe={dots:[],areas:[],lines:[]},EK=cr({name:"referenceElements",initialState:HLe,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=ki(e).dots.findIndex(s=>s===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=ki(e).areas.findIndex(s=>s===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=ki(e).lines.findIndex(s=>s===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:r9e,removeDot:i9e,addArea:l9e,removeArea:o9e,addLine:c9e,removeLine:d9e}=EK.actions,GLe=EK.reducer,WLe=h.createContext(void 0),VLe=e=>{var{children:t}=e,[n]=h.useState("".concat(ap("recharts"),"-clip")),s=cP();if(s==null)return null;var{x:r,y:i,width:l,height:o}=s;return h.createElement(WLe.Provider,{value:n},h.createElement("defs",null,h.createElement("clipPath",{id:n},h.createElement("rect",{x:r,y:i,height:o,width:l}))),t)};function TK(e,t){if(t<1)return[];if(t===1)return e;for(var n=[],s=0;s<e.length;s+=t){var r=e[s];r!==void 0&&n.push(r)}return n}function qLe(e,t,n){var s={width:e.width+t.width,height:e.height+t.height};return BLe(s,n)}function YLe(e,t,n){var s=n==="width",{x:r,y:i,width:l,height:o}=e;return t===1?{start:s?r:i,end:s?r+l:i+o}:{start:s?r+l:i+o,end:s?r:i}}function mp(e,t,n,s,r){if(e*t<e*s||e*t>e*r)return!1;var i=n();return e*(t-e*i/2-s)>=0&&e*(t+e*i/2-r)<=0}function KLe(e,t){return TK(e,t+1)}function QLe(e,t,n,s,r){for(var i=(s||[]).slice(),{start:l,end:o}=t,c=0,d=1,u=l,f=function(){var v=s?.[c];if(v===void 0)return{v:TK(s,d)};var w=c,b,C=()=>(b===void 0&&(b=n(v,w)),b),N=v.coordinate,S=c===0||mp(e,N,C,u,o);S||(c=0,u=l,d+=1),S&&(u=N+e*(C()/2+r),c+=d)},p;d<=i.length;)if(p=f(),p)return p.v;return[]}function XLe(e,t,n,s,r){var i=(s||[]).slice(),l=i.length;if(l===0)return[];for(var{start:o,end:c}=t,d=1;d<=l;d++){for(var u=(l-1)%d,f=o,p=!0,x=function(){var N=s[v],S=v,A,k=()=>(A===void 0&&(A=n(N,S)),A),_=N.coordinate,T=v===u||mp(e,_,k,f,c);if(!T)return p=!1,1;T&&(f=_+e*(k()/2+r))},v=u;v<l&&!x();v+=d);if(p){for(var w=[],b=u;b<l;b+=d)w.push(s[b]);return w}}return[]}function wU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function Ns(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wU(Object(n),!0).forEach(function(s){ZLe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wU(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function ZLe(e,t,n){return(t=JLe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JLe(e){var t=e4e(e,"string");return typeof t=="symbol"?t:t+""}function e4e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function t4e(e,t,n,s,r){for(var i=(s||[]).slice(),l=i.length,{start:o}=t,{end:c}=t,d=function(p){var x=i[p],v,w=()=>(v===void 0&&(v=n(x,p)),v);if(p===l-1){var b=e*(x.coordinate+e*w()/2-c);i[p]=x=Ns(Ns({},x),{},{tickCoord:b>0?x.coordinate-b*e:x.coordinate})}else i[p]=x=Ns(Ns({},x),{},{tickCoord:x.coordinate});if(x.tickCoord!=null){var C=mp(e,x.tickCoord,w,o,c);C&&(c=x.tickCoord-e*(w()/2+r),i[p]=Ns(Ns({},x),{},{isShow:!0}))}},u=l-1;u>=0;u--)d(u);return i}function a4e(e,t,n,s,r,i){var l=(s||[]).slice(),o=l.length,{start:c,end:d}=t;if(i){var u=s[o-1],f=n(u,o-1),p=e*(u.coordinate+e*f/2-d);if(l[o-1]=u=Ns(Ns({},u),{},{tickCoord:p>0?u.coordinate-p*e:u.coordinate}),u.tickCoord!=null){var x=mp(e,u.tickCoord,()=>f,c,d);x&&(d=u.tickCoord-e*(f/2+r),l[o-1]=Ns(Ns({},u),{},{isShow:!0}))}}for(var v=i?o-1:o,w=function(N){var S=l[N],A,k=()=>(A===void 0&&(A=n(S,N)),A);if(N===0){var _=e*(S.coordinate-e*k()/2-c);l[N]=S=Ns(Ns({},S),{},{tickCoord:_<0?S.coordinate-_*e:S.coordinate})}else l[N]=S=Ns(Ns({},S),{},{tickCoord:S.coordinate});if(S.tickCoord!=null){var T=mp(e,S.tickCoord,k,c,d);T&&(c=S.tickCoord+e*(k()/2+r),l[N]=Ns(Ns({},S),{},{isShow:!0}))}},b=0;b<v;b++)w(b);return l}function uP(e,t,n){var{tick:s,ticks:r,viewBox:i,minTickGap:l,orientation:o,interval:c,tickFormatter:d,unit:u,angle:f}=e;if(!r||!r.length||!s)return[];if(Dt(c)||MN.isSsr){var p;return(p=KLe(r,Dt(c)?c:0))!==null&&p!==void 0?p:[]}var x=[],v=o==="top"||o==="bottom"?"width":"height",w=u&&v==="width"?kg(u,{fontSize:t,letterSpacing:n}):{width:0,height:0},b=(S,A)=>{var k=typeof d=="function"?d(S.value,A):S.value;return v==="width"?qLe(kg(k,{fontSize:t,letterSpacing:n}),w,f):kg(k,{fontSize:t,letterSpacing:n})[v]},C=r.length>=2?is(r[1].coordinate-r[0].coordinate):1,N=YLe(i,C,v);return c==="equidistantPreserveStart"?QLe(C,N,b,r,l):c==="equidistantPreserveEnd"?XLe(C,N,b,r,l):(c==="preserveStart"||c==="preserveStartEnd"?x=a4e(C,N,b,r,l,c==="preserveStartEnd"):x=t4e(C,N,b,r,l),x.filter(S=>S.isShow))}var n4e=e=>{var{ticks:t,label:n,labelGapWithTick:s=5,tickSize:r=0,tickMargin:i=0}=e,l=0;if(t){Array.from(t).forEach(u=>{if(u){var f=u.getBoundingClientRect();f.width>l&&(l=f.width)}});var o=n?n.getBoundingClientRect().width:0,c=r+i,d=l+c+o+(n?s:0);return Math.round(d)}return 0},s4e=["axisLine","width","height","className","hide","ticks","axisType"];function r4e(e,t){if(e==null)return{};var n,s,r=i4e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function i4e(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}function yu(){return yu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},yu.apply(null,arguments)}function NU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function kn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NU(Object(n),!0).forEach(function(s){l4e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NU(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function l4e(e,t,n){return(t=o4e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o4e(e){var t=c4e(e,"string");return typeof t=="symbol"?t:t+""}function c4e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uo={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Dn.axis};function d4e(e){var{x:t,y:n,width:s,height:r,orientation:i,mirror:l,axisLine:o,otherSvgProps:c}=e;if(!o)return null;var d=kn(kn(kn({},c),kr(o)),{},{fill:"none"});if(i==="top"||i==="bottom"){var u=+(i==="top"&&!l||i==="bottom"&&l);d=kn(kn({},d),{},{x1:t,y1:n+u*r,x2:t+s,y2:n+u*r})}else{var f=+(i==="left"&&!l||i==="right"&&l);d=kn(kn({},d),{},{x1:t+f*s,y1:n,x2:t+f*s,y2:n+r})}return h.createElement("line",yu({},d,{className:Tt("recharts-cartesian-axis-line",fu(o,"className"))}))}function u4e(e,t,n,s,r,i,l,o,c){var d,u,f,p,x,v,w=o?-1:1,b=e.tickSize||l,C=Dt(e.tickCoord)?e.tickCoord:e.coordinate;switch(i){case"top":d=u=e.coordinate,p=n+ +!o*r,f=p-w*b,v=f-w*c,x=C;break;case"left":f=p=e.coordinate,u=t+ +!o*s,d=u-w*b,x=d-w*c,v=C;break;case"right":f=p=e.coordinate,u=t+ +o*s,d=u+w*b,x=d+w*c,v=C;break;default:d=u=e.coordinate,p=n+ +o*r,f=p+w*b,v=f+w*c,x=C;break}return{line:{x1:d,y1:f,x2:u,y2:p},tick:{x,y:v}}}function m4e(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function f4e(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function h4e(e){var{option:t,tickProps:n,value:s}=e,r,i=Tt(n.className,"recharts-cartesian-axis-tick-value");if(h.isValidElement(t))r=h.cloneElement(t,kn(kn({},n),{},{className:i}));else if(typeof t=="function")r=t(kn(kn({},n),{},{className:i}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=Tt(l,t?.className)),r=h.createElement(KN,yu({},n,{className:l}),s)}return r}var g4e=h.forwardRef((e,t)=>{var{ticks:n=[],tick:s,tickLine:r,stroke:i,tickFormatter:l,unit:o,padding:c,tickTextProps:d,orientation:u,mirror:f,x:p,y:x,width:v,height:w,tickSize:b,tickMargin:C,fontSize:N,letterSpacing:S,getTicksConfig:A,events:k,axisType:_}=e,T=uP(kn(kn({},A),{},{ticks:n}),N,S),E=m4e(u,f),I=f4e(u,f),z=kr(A),$=mu(s),P={};typeof r=="object"&&(P=r);var O=kn(kn({},z),{},{fill:"none"},P),B=T.map(ee=>kn({entry:ee},u4e(ee,p,x,v,w,u,b,f,C))),Q=B.map(ee=>{var{entry:V,line:de}=ee;return h.createElement(ls,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(V.value,"-").concat(V.coordinate,"-").concat(V.tickCoord)},r&&h.createElement("line",yu({},O,de,{className:Tt("recharts-cartesian-axis-tick-line",fu(r,"className"))})))}),F=B.map((ee,V)=>{var{entry:de,tick:oe}=ee,Z=kn(kn(kn(kn({textAnchor:E,verticalAnchor:I},z),{},{stroke:"none",fill:i},$),oe),{},{index:V,payload:de,visibleTicksCount:T.length,tickFormatter:l,padding:c},d);return h.createElement(ls,yu({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(de.value,"-").concat(de.coordinate,"-").concat(de.tickCoord)},mx(k,de,V)),s&&h.createElement(h4e,{option:s,tickProps:Z,value:"".concat(typeof l=="function"?l(de.value,V):de.value).concat(o||"")}))});return h.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(_,"-ticks")},F.length>0&&h.createElement(dr,{zIndex:Dn.label},h.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(_,"-tick-labels"),ref:t},F)),Q.length>0&&h.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(_,"-tick-lines")},Q))}),p4e=h.forwardRef((e,t)=>{var{axisLine:n,width:s,height:r,className:i,hide:l,ticks:o,axisType:c}=e,d=r4e(e,s4e),[u,f]=h.useState(""),[p,x]=h.useState(""),v=h.useRef(null);h.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var b;return n4e({ticks:v.current,label:(b=e.labelRef)===null||b===void 0?void 0:b.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var w=h.useCallback(b=>{if(b){var C=b.getElementsByClassName("recharts-cartesian-axis-tick-value");v.current=C;var N=C[0];if(N){var S=window.getComputedStyle(N),A=S.fontSize,k=S.letterSpacing;(A!==u||k!==p)&&(f(A),x(k))}}},[u,p]);return l||s!=null&&s<=0||r!=null&&r<=0?null:h.createElement(dr,{zIndex:e.zIndex},h.createElement(ls,{className:Tt("recharts-cartesian-axis",i)},h.createElement(d4e,{x:e.x,y:e.y,width:s,height:r,orientation:e.orientation,mirror:e.mirror,axisLine:n,otherSvgProps:kr(e)}),h.createElement(g4e,{ref:w,axisType:c,events:d,fontSize:u,getTicksConfig:e,height:e.height,letterSpacing:p,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:o,unit:e.unit,width:e.width,x:e.x,y:e.y}),h.createElement(mTe,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},h.createElement(NTe,{label:e.label,labelRef:e.labelRef}),e.children)))}),mP=h.forwardRef((e,t)=>{var n=$n(e,uo);return h.createElement(p4e,yu({},n,{ref:t}))});mP.displayName="CartesianAxis";var x4e=["x1","y1","x2","y2","key"],y4e=["offset"],b4e=["xAxisId","yAxisId"],v4e=["xAxisId","yAxisId"];function jU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function js(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jU(Object(n),!0).forEach(function(s){w4e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jU(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function w4e(e,t,n){return(t=N4e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N4e(e){var t=j4e(e,"string");return typeof t=="symbol"?t:t+""}function j4e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bd(){return Bd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Bd.apply(null,arguments)}function kv(e,t){if(e==null)return{};var n,s,r=C4e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function C4e(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}var S4e=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:s,y:r,width:i,height:l,ry:o}=e;return h.createElement("rect",{x:s,y:r,ry:o,width:i,height:l,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function kK(e){var{option:t,lineItemProps:n}=e,s;if(h.isValidElement(t))s=h.cloneElement(t,n);else if(typeof t=="function")s=t(n);else{var r,{x1:i,y1:l,x2:o,y2:c,key:d}=n,u=kv(n,x4e),f=(r=kr(u))!==null&&r!==void 0?r:{},{offset:p}=f,x=kv(f,y4e);s=h.createElement("line",Bd({},x,{x1:i,y1:l,x2:o,y2:c,fill:"none",key:d}))}return s}function _4e(e){var{x:t,width:n,horizontal:s=!0,horizontalPoints:r}=e;if(!s||!r||!r.length)return null;var{xAxisId:i,yAxisId:l}=e,o=kv(e,b4e),c=r.map((d,u)=>{var f=js(js({},o),{},{x1:t,y1:d,x2:t+n,y2:d,key:"line-".concat(u),index:u});return h.createElement(kK,{key:"line-".concat(u),option:s,lineItemProps:f})});return h.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function A4e(e){var{y:t,height:n,vertical:s=!0,verticalPoints:r}=e;if(!s||!r||!r.length)return null;var{xAxisId:i,yAxisId:l}=e,o=kv(e,v4e),c=r.map((d,u)=>{var f=js(js({},o),{},{x1:d,y1:t,x2:d,y2:t+n,key:"line-".concat(u),index:u});return h.createElement(kK,{option:s,lineItemProps:f,key:"line-".concat(u)})});return h.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function E4e(e){var{horizontalFill:t,fillOpacity:n,x:s,y:r,width:i,height:l,horizontalPoints:o,horizontal:c=!0}=e;if(!c||!t||!t.length||o==null)return null;var d=o.map(f=>Math.round(f+r-r)).sort((f,p)=>f-p);r!==d[0]&&d.unshift(0);var u=d.map((f,p)=>{var x=!d[p+1],v=x?r+l-f:d[p+1]-f;if(v<=0)return null;var w=p%t.length;return h.createElement("rect",{key:"react-".concat(p),y:f,x:s,height:v,width:i,stroke:"none",fill:t[w],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return h.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function T4e(e){var{vertical:t=!0,verticalFill:n,fillOpacity:s,x:r,y:i,width:l,height:o,verticalPoints:c}=e;if(!t||!n||!n.length)return null;var d=c.map(f=>Math.round(f+r-r)).sort((f,p)=>f-p);r!==d[0]&&d.unshift(0);var u=d.map((f,p)=>{var x=!d[p+1],v=x?r+l-f:d[p+1]-f;if(v<=0)return null;var w=p%n.length;return h.createElement("rect",{key:"react-".concat(p),x:f,y:i,width:v,height:o,stroke:"none",fill:n[w],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return h.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var k4e=(e,t)=>{var{xAxis:n,width:s,height:r,offset:i}=e;return eq(uP(js(js(js({},uo),n),{},{ticks:tq(n),viewBox:{x:0,y:0,width:s,height:r}})),i.left,i.left+i.width,t)},L4e=(e,t)=>{var{yAxis:n,width:s,height:r,offset:i}=e;return eq(uP(js(js(js({},uo),n),{},{ticks:tq(n),viewBox:{x:0,y:0,width:s,height:r}})),i.top,i.top+i.height,t)},P4e={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Dn.grid};function uT(e){var t=r4(),n=i4(),s=cq(),r=js(js({},$n(e,P4e)),{},{x:Dt(e.x)?e.x:s.left,y:Dt(e.y)?e.y:s.top,width:Dt(e.width)?e.width:s.width,height:Dt(e.height)?e.height:s.height}),{xAxisId:i,yAxisId:l,x:o,y:c,width:d,height:u,syncWithTicks:f,horizontalValues:p,verticalValues:x}=r,v=Ls(),w=Mt(I=>pz(I,"xAxis",i,v)),b=Mt(I=>pz(I,"yAxis",l,v));if(!vl(d)||!vl(u)||!Dt(o)||!Dt(c))return null;var C=r.verticalCoordinatesGenerator||k4e,N=r.horizontalCoordinatesGenerator||L4e,{horizontalPoints:S,verticalPoints:A}=r;if((!S||!S.length)&&typeof N=="function"){var k=p&&p.length,_=N({yAxis:b?js(js({},b),{},{ticks:k?p:b.ticks}):void 0,width:t??d,height:n??u,offset:s},k?!0:f);fv(Array.isArray(_),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof _,"]")),Array.isArray(_)&&(S=_)}if((!A||!A.length)&&typeof C=="function"){var T=x&&x.length,E=C({xAxis:w?js(js({},w),{},{ticks:T?x:w.ticks}):void 0,width:t??d,height:n??u,offset:s},T?!0:f);fv(Array.isArray(E),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof E,"]")),Array.isArray(E)&&(A=E)}return h.createElement(dr,{zIndex:r.zIndex},h.createElement("g",{className:"recharts-cartesian-grid"},h.createElement(S4e,{fill:r.fill,fillOpacity:r.fillOpacity,x:r.x,y:r.y,width:r.width,height:r.height,ry:r.ry}),h.createElement(E4e,Bd({},r,{horizontalPoints:S})),h.createElement(T4e,Bd({},r,{verticalPoints:A})),h.createElement(_4e,Bd({},r,{offset:s,horizontalPoints:S,xAxis:w,yAxis:b})),h.createElement(A4e,Bd({},r,{offset:s,verticalPoints:A,xAxis:w,yAxis:b}))))}uT.displayName="CartesianGrid";var D4e={},LK=cr({name:"errorBars",initialState:D4e,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:s}=t.payload;e[n]||(e[n]=[]),e[n].push(s)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:s,next:r}=t.payload;e[n]&&(e[n]=e[n].map(i=>i.dataKey===s.dataKey&&i.direction===s.direction?r:i))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:s}=t.payload;e[n]&&(e[n]=e[n].filter(r=>r.dataKey!==s.dataKey||r.direction!==s.direction))}}}),{addErrorBar:u9e,replaceErrorBar:m9e,removeErrorBar:f9e}=LK.actions,O4e=LK.reducer,M4e=["children"];function I4e(e,t){if(e==null)return{};var n,s,r=$4e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function $4e(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}var R4e={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},z4e=h.createContext(R4e);function PK(e){var{children:t}=e,n=I4e(e,M4e);return h.createElement(z4e.Provider,{value:n},t)}function fP(e,t){var n,s,r=Mt(d=>zo(d,e)),i=Mt(d=>Uo(d,t)),l=(n=r?.allowDataOverflow)!==null&&n!==void 0?n:as.allowDataOverflow,o=(s=i?.allowDataOverflow)!==null&&s!==void 0?s:ns.allowDataOverflow,c=l||o;return{needClip:c,needClipX:l,needClipY:o}}function DK(e){var{xAxisId:t,yAxisId:n,clipPathId:s}=e,r=cP(),{needClipX:i,needClipY:l,needClip:o}=fP(t,n);if(!o||!r)return null;var{x:c,y:d,width:u,height:f}=r;return h.createElement("clipPath",{id:"clipPath-".concat(s)},h.createElement("rect",{x:i?c:c-u/2,y:l?d:d-f/2,width:i?u:u*2,height:l?f:f*2}))}var OK=(e,t,n,s)=>Gc(e,"xAxis",t,s),MK=(e,t,n,s)=>Hc(e,"xAxis",t,s),IK=(e,t,n,s)=>Gc(e,"yAxis",n,s),$K=(e,t,n,s)=>Hc(e,"yAxis",n,s),U4e=st([ma,OK,IK,MK,$K],(e,t,n,s,r)=>ad(e,"xAxis")?pf(t,s,!1):pf(n,r,!1)),F4e=(e,t,n,s,r)=>r;function B4e(e){return e.type==="line"}var H4e=st([BN,F4e],(e,t)=>e.filter(B4e).find(n=>n.id===t)),G4e=st([ma,OK,IK,MK,$K,H4e,U4e,d4],(e,t,n,s,r,i,l,o)=>{var{chartData:c,dataStartIndex:d,dataEndIndex:u}=o;if(!(i==null||t==null||n==null||s==null||r==null||s.length===0||r.length===0||l==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:f,data:p}=i,x;if(p!=null&&p.length>0?x=p:x=c?.slice(d,u+1),x!=null)return PPe({layout:e,xAxis:t,yAxis:n,xAxisTicks:s,yAxisTicks:r,dataKey:f,bandSize:l,displayedData:x})}});function W4e(e){var t=mu(e),n=3,s=2;if(t!=null){var{r,strokeWidth:i}=t,l=Number(r),o=Number(i);return(Number.isNaN(l)||l<0)&&(l=n),(Number.isNaN(o)||o<0)&&(o=s),{r:l,strokeWidth:o}}return{r:n,strokeWidth:s}}var B2={exports:{}},H2={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CU;function V4e(){if(CU)return H2;CU=1;var e=wf();function t(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var n=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,r=e.useRef,i=e.useEffect,l=e.useMemo,o=e.useDebugValue;return H2.useSyncExternalStoreWithSelector=function(c,d,u,f,p){var x=r(null);if(x.current===null){var v={hasValue:!1,value:null};x.current=v}else v=x.current;x=l(function(){function b(k){if(!C){if(C=!0,N=k,k=f(k),p!==void 0&&v.hasValue){var _=v.value;if(p(_,k))return S=_}return S=k}if(_=S,n(N,k))return _;var T=f(k);return p!==void 0&&p(_,T)?(N=k,_):(N=k,S=T)}var C=!1,N,S,A=u===void 0?null:u;return[function(){return b(d())},A===null?void 0:function(){return b(A())}]},[d,u,f,p]);var w=s(c,x[0],x[1]);return i(function(){v.hasValue=!0,v.value=w},[w]),o(w),w},H2}var SU;function q4e(){return SU||(SU=1,B2.exports=V4e()),B2.exports}var Y4e=q4e();function K4e(e){e()}function Q4e(){let e=null,t=null;return{clear(){e=null,t=null},notify(){K4e(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let s=e;for(;s;)n.push(s),s=s.next;return n},subscribe(n){let s=!0;const r=t={callback:n,next:null,prev:t};return r.prev?r.prev.next=r:e=r,function(){!s||e===null||(s=!1,r.next?r.next.prev=r.prev:t=r.prev,r.prev?r.prev.next=r.next:e=r.next)}}}}var _U={notify(){},get:()=>[]};function X4e(e,t){let n,s=_U,r=0,i=!1;function l(w){u();const b=s.subscribe(w);let C=!1;return()=>{C||(C=!0,b(),f())}}function o(){s.notify()}function c(){v.onStateChange&&v.onStateChange()}function d(){return i}function u(){r++,n||(n=e.subscribe(c),s=Q4e())}function f(){r--,n&&r===0&&(n(),n=void 0,s.clear(),s=_U)}function p(){i||(i=!0,u())}function x(){i&&(i=!1,f())}const v={addNestedSub:l,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:d,trySubscribe:p,tryUnsubscribe:x,getListeners:()=>s};return v}var Z4e=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",J4e=Z4e(),ePe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",tPe=ePe(),aPe=()=>J4e||tPe?h.useLayoutEffect:h.useEffect,nPe=aPe();function AU(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function sPe(e,t){if(AU(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!AU(e[n[r]],t[n[r]]))return!1;return!0}var rPe=Symbol.for("react-redux-context"),iPe=typeof globalThis<"u"?globalThis:{};function lPe(){if(!h.createContext)return{};const e=iPe[rPe]??=new Map;let t=e.get(h.createContext);return t||(t=h.createContext(null),e.set(h.createContext,t)),t}var oPe=lPe();function cPe(e){const{children:t,context:n,serverState:s,store:r}=e,i=h.useMemo(()=>{const c=X4e(r);return{store:r,subscription:c,getServerState:s?()=>s:void 0}},[r,s]),l=h.useMemo(()=>r.getState(),[r]);nPe(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),l!==r.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,l]);const o=n||oPe;return h.createElement(o.Provider,{value:i},t)}var dPe=cPe,uPe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function mPe(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function JN(e,t){var n=new Set([...Object.keys(e),...Object.keys(t)]);for(var s of n)if(uPe.has(s)){if(e[s]==null&&t[s]==null)continue;if(!sPe(e[s],t[s]))return!1}else if(!mPe(e[s],t[s]))return!1;return!0}var fPe=["id"],hPe=["type","layout","connectNulls","needClip","shape"],gPe=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function fp(){return fp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},fp.apply(null,arguments)}function EU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function el(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?EU(Object(n),!0).forEach(function(s){pPe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EU(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function pPe(e,t,n){return(t=xPe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xPe(e){var t=yPe(e,"string");return typeof t=="symbol"?t:t+""}function yPe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hP(e,t){if(e==null)return{};var n,s,r=bPe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function bPe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}var vPe=e=>{var{dataKey:t,name:n,stroke:s,legendType:r,hide:i}=e;return[{inactive:i,dataKey:t,type:r,color:s,value:$f(n,t),payload:e}]},wPe=h.memo(e=>{var{dataKey:t,data:n,stroke:s,strokeWidth:r,fill:i,name:l,hide:o,unit:c,tooltipType:d,id:u}=e,f={dataDefinedOnItem:n,positions:void 0,settings:{stroke:s,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:$f(l,t),hide:o,type:d,color:s,unit:c,graphicalItemId:u}};return h.createElement(lP,{tooltipEntrySettings:f})}),RK=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function NPe(e,t){for(var n=e.length%2!==0?[...e,0]:e,s=[],r=0;r<t;++r)s=[...s,...n];return s}var jPe=(e,t,n)=>{var s=n.reduce((f,p)=>f+p);if(!s)return RK(t,e);for(var r=Math.floor(e/s),i=e%s,l=t-e,o=[],c=0,d=0;c<n.length;d+=n[c],++c)if(d+n[c]>i){o=[...n.slice(0,c),i-d];break}var u=o.length%2===0?[0,l]:[l];return[...NPe(n,r),...o,...u].map(f=>"".concat(f,"px")).join(", ")};function CPe(e){var{clipPathId:t,points:n,props:s}=e,{dot:r,dataKey:i,needClip:l}=s,{id:o}=s,c=hP(s,fPe),d=kr(c);return h.createElement(oLe,{points:n,dot:r,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:i,baseProps:d,needClip:l,clipPathId:t})}function SPe(e){var{showLabels:t,children:n,points:s}=e,r=h.useMemo(()=>s?.map(i=>{var l,o,c={x:(l=i.x)!==null&&l!==void 0?l:0,y:(o=i.y)!==null&&o!==void 0?o:0,width:0,lowerWidth:0,upperWidth:0,height:0};return el(el({},c),{},{value:i.value,payload:i.payload,viewBox:c,parentViewBox:void 0,fill:void 0})}),[s]);return h.createElement(uK,{value:t?r:void 0},n)}function TU(e){var{clipPathId:t,pathRef:n,points:s,strokeDasharray:r,props:i}=e,{type:l,layout:o,connectNulls:c,needClip:d,shape:u}=i,f=hP(i,hPe),p=el(el({},$s(f)),{},{fill:"none",className:"recharts-line-curve",clipPath:d?"url(#clipPath-".concat(t,")"):void 0,points:s,type:l,layout:o,connectNulls:c,strokeDasharray:r??i.strokeDasharray});return h.createElement(h.Fragment,null,s?.length>1&&h.createElement(nP,fp({shapeType:"curve",option:u},p,{pathRef:n})),h.createElement(CPe,{points:s,clipPathId:t,props:i}))}function _Pe(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function APe(e){var{clipPathId:t,props:n,pathRef:s,previousPointsRef:r,longestAnimatedLengthRef:i}=e,{points:l,strokeDasharray:o,isAnimationActive:c,animationBegin:d,animationDuration:u,animationEasing:f,animateNewValues:p,width:x,height:v,onAnimationEnd:w,onAnimationStart:b}=n,C=r.current,N=bx(l,"recharts-line-"),S=h.useRef(N),[A,k]=h.useState(!1),_=!A,T=h.useCallback(()=>{typeof w=="function"&&w(),k(!1)},[w]),E=h.useCallback(()=>{typeof b=="function"&&b(),k(!0)},[b]),I=_Pe(s.current),z=h.useRef(0);S.current!==N&&(z.current=i.current,S.current=N);var $=z.current;return h.createElement(SPe,{points:l,showLabels:_},n.children,h.createElement(yx,{animationId:N,begin:d,duration:u,isActive:c,easing:f,onAnimationEnd:T,onAnimationStart:E,key:N},P=>{var O=Ja($,I+$,P),B=Math.min(O,I),Q;if(c)if(o){var F="".concat(o).split(/[,\s]+/gim).map(de=>parseFloat(de));Q=jPe(B,I,F)}else Q=RK(I,B);else Q=o==null?void 0:String(o);if(P>0&&I>0&&(r.current=l,i.current=Math.max(i.current,B)),C){var ee=C.length/l.length,V=P===1?l:l.map((de,oe)=>{var Z=Math.floor(oe*ee);if(C[Z]){var R=C[Z];return el(el({},de),{},{x:Ja(R.x,de.x,P),y:Ja(R.y,de.y,P)})}return p?el(el({},de),{},{x:Ja(x*2,de.x,P),y:Ja(v/2,de.y,P)}):el(el({},de),{},{x:de.x,y:de.y})});return r.current=V,h.createElement(TU,{props:n,points:V,clipPathId:t,pathRef:s,strokeDasharray:Q})}return h.createElement(TU,{props:n,points:l,clipPathId:t,pathRef:s,strokeDasharray:Q})}),h.createElement(J4,{label:n.label}))}function EPe(e){var{clipPathId:t,props:n}=e,s=h.useRef(null),r=h.useRef(0),i=h.useRef(null);return h.createElement(APe,{props:n,clipPathId:t,previousPointsRef:s,longestAnimatedLengthRef:r,pathRef:i})}var TPe=(e,t)=>{var n,s;return{x:(n=e.x)!==null&&n!==void 0?n:void 0,y:(s=e.y)!==null&&s!==void 0?s:void 0,value:e.value,errorVal:Ia(e.payload,t)}};class kPe extends h.Component{render(){var{hide:t,dot:n,points:s,className:r,xAxisId:i,yAxisId:l,top:o,left:c,width:d,height:u,id:f,needClip:p,zIndex:x}=this.props;if(t)return null;var v=Tt("recharts-line",r),w=f,{r:b,strokeWidth:C}=W4e(n),N=bK(n),S=b*2+C,A=p?"url(#clipPath-".concat(N?"":"dots-").concat(w,")"):void 0;return h.createElement(dr,{zIndex:x},h.createElement(ls,{className:v},p&&h.createElement("defs",null,h.createElement(DK,{clipPathId:w,xAxisId:i,yAxisId:l}),!N&&h.createElement("clipPath",{id:"clipPath-dots-".concat(w)},h.createElement("rect",{x:c-S/2,y:o-S/2,width:d+S,height:u+S}))),h.createElement(PK,{xAxisId:i,yAxisId:l,data:s,dataPointFormatter:TPe,errorBarOffset:0},h.createElement(EPe,{props:this.props,clipPathId:w}))),h.createElement(ELe,{activeDot:this.props.activeDot,points:s,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:A}))}}var zK={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:Dn.line,type:"linear"};function LPe(e){var t=$n(e,zK),{activeDot:n,animateNewValues:s,animationBegin:r,animationDuration:i,animationEasing:l,connectNulls:o,dot:c,hide:d,isAnimationActive:u,label:f,legendType:p,xAxisId:x,yAxisId:v,id:w}=t,b=hP(t,gPe),{needClip:C}=fP(x,v),N=cP(),S=Rf(),A=Ls(),k=Mt(z=>G4e(z,x,v,A,w));if(S!=="horizontal"&&S!=="vertical"||k==null||N==null)return null;var{height:_,width:T,x:E,y:I}=N;return h.createElement(kPe,fp({},b,{id:w,connectNulls:o,dot:c,activeDot:n,animateNewValues:s,animationBegin:r,animationDuration:i,animationEasing:l,isAnimationActive:u,hide:d,label:f,legendType:p,xAxisId:x,yAxisId:v,points:k,layout:S,height:_,width:T,left:E,top:I,needClip:C}))}function PPe(e){var{layout:t,xAxis:n,yAxis:s,xAxisTicks:r,yAxisTicks:i,dataKey:l,bandSize:o,displayedData:c}=e;return c.map((d,u)=>{var f=Ia(d,l);if(t==="horizontal"){var p=tR({axis:n,ticks:r,bandSize:o,entry:d,index:u}),x=an(f)?null:s.scale(f);return{x:p,y:x,value:f,payload:d}}var v=an(f)?null:n.scale(f),w=tR({axis:s,ticks:i,bandSize:o,entry:d,index:u});return v==null||w==null?null:{x:v,y:w,value:f,payload:d}}).filter(Boolean)}function DPe(e){var t=$n(e,zK),n=Ls();return h.createElement(oP,{id:t.id,type:"line"},s=>h.createElement(h.Fragment,null,h.createElement(vK,{legendPayload:vPe(t)}),h.createElement(wPe,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:s}),h.createElement(NK,{type:"line",id:s,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:n}),h.createElement(LPe,fp({},t,{id:s}))))}var mT=h.memo(DPe,JN);mT.displayName="Line";function Lu(e,t){var n,s;return(n=(s=e.graphicalItems.cartesianItems.find(r=>r.id===t))===null||s===void 0?void 0:s.xAxisId)!==null&&n!==void 0?n:CK}function Pu(e,t){var n,s;return(n=(s=e.graphicalItems.cartesianItems.find(r=>r.id===t))===null||s===void 0?void 0:s.yAxisId)!==null&&n!==void 0?n:CK}var OPe="Invariant failed";function MPe(e,t){throw new Error(OPe)}function fT(){return fT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},fT.apply(null,arguments)}function Lv(e){return h.createElement(nP,fT({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var IPe=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(s,r)=>{if(Dt(t))return t;var i=Dt(s)||an(s);return i?t(s,r):(i||MPe(),n)}},$Pe=(e,t,n)=>n,RPe=(e,t)=>t,Tx=st([BN,RPe],(e,t)=>e.filter(n=>n.type==="bar").find(n=>n.id===t)),zPe=st([Tx],e=>e?.maxBarSize),UPe=(e,t,n,s)=>s,FPe=st([ma,BN,Lu,Pu,$Pe],(e,t,n,s,r)=>t.filter(i=>e==="horizontal"?i.xAxisId===n:i.yAxisId===s).filter(i=>i.isPanorama===r).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),BPe=(e,t,n)=>{var s=ma(e),r=Lu(e,t),i=Pu(e,t);if(!(r==null||i==null))return s==="horizontal"?nT(e,"yAxis",i,n):nT(e,"xAxis",r,n)},HPe=(e,t)=>{var n=ma(e),s=Lu(e,t),r=Pu(e,t);if(!(s==null||r==null))return n==="horizontal"?gz(e,"xAxis",s):gz(e,"yAxis",r)},GPe=st([FPe,f2e,HPe],TLe),WPe=(e,t,n)=>{var s,r,i=Tx(e,t);if(i!=null){var l=Lu(e,t),o=Pu(e,t);if(!(l==null||o==null)){var c=ma(e),d=Vq(e),{maxBarSize:u}=i,f=an(u)?d:u,p,x;return c==="horizontal"?(p=Gc(e,"xAxis",l,n),x=Hc(e,"xAxis",l,n)):(p=Gc(e,"yAxis",o,n),x=Hc(e,"yAxis",o,n)),(s=(r=pf(p,x,!0))!==null&&r!==void 0?r:f)!==null&&s!==void 0?s:0}}},UK=(e,t,n)=>{var s=ma(e),r=Lu(e,t),i=Pu(e,t);if(!(r==null||i==null)){var l,o;return s==="horizontal"?(l=Gc(e,"xAxis",r,n),o=Hc(e,"xAxis",r,n)):(l=Gc(e,"yAxis",i,n),o=Hc(e,"yAxis",i,n)),pf(l,o)}},VPe=st([GPe,Vq,m2e,qq,WPe,UK,zPe],OLe),qPe=(e,t,n)=>{var s=Lu(e,t);if(s!=null)return Gc(e,"xAxis",s,n)},YPe=(e,t,n)=>{var s=Pu(e,t);if(s!=null)return Gc(e,"yAxis",s,n)},KPe=(e,t,n)=>{var s=Lu(e,t);if(s!=null)return Hc(e,"xAxis",s,n)},QPe=(e,t,n)=>{var s=Pu(e,t);if(s!=null)return Hc(e,"yAxis",s,n)},XPe=st([VPe,Tx],(e,t)=>{if(!(e==null||t==null)){var n=e.find(s=>s.stackId===t.stackId&&t.dataKey!=null&&s.dataKeys.includes(t.dataKey));if(n!=null)return n.position}}),ZPe=st([BPe,Tx],MLe),JPe=st([Xn,n4,qPe,YPe,KPe,QPe,XPe,ma,e2e,UK,ZPe,Tx,UPe],(e,t,n,s,r,i,l,o,c,d,u,f,p)=>{var{chartData:x,dataStartIndex:v,dataEndIndex:w}=c;if(!(f==null||l==null||t==null||o!=="horizontal"&&o!=="vertical"||n==null||s==null||r==null||i==null||d==null)){var{data:b}=f,C;if(b!=null&&b.length>0?C=b:C=x?.slice(v,w+1),C!=null)return EDe({layout:o,barSettings:f,pos:l,parentViewBox:t,bandSize:d,xAxis:n,yAxis:s,xAxisTicks:r,yAxisTicks:i,stackedData:u,displayedData:C,offset:e,cells:p,dataStartIndex:v})}}),eDe=["index"];function hT(){return hT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},hT.apply(null,arguments)}function tDe(e,t){if(e==null)return{};var n,s,r=aDe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function aDe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}var FK=h.createContext(void 0),nDe=e=>{var t=h.useContext(FK);if(t!=null)return t.stackId;if(e!=null)return N1e(e)},sDe=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),rDe=e=>{var t=h.useContext(FK);if(t!=null){var{stackId:n}=t;return"url(#".concat(sDe(n,e),")")}},iDe=e=>{var{index:t}=e,n=tDe(e,eDe),s=rDe(t);return h.createElement(ls,hT({className:"recharts-bar-stack-layer",clipPath:s},n))},lDe=["onMouseEnter","onMouseLeave","onClick"],oDe=["value","background","tooltipPosition"],cDe=["id"],dDe=["onMouseEnter","onClick","onMouseLeave"];function _o(){return _o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},_o.apply(null,arguments)}function kU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function Ds(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kU(Object(n),!0).forEach(function(s){uDe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kU(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function uDe(e,t,n){return(t=mDe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mDe(e){var t=fDe(e,"string");return typeof t=="symbol"?t:t+""}function fDe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pv(e,t){if(e==null)return{};var n,s,r=hDe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function hDe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}var gDe=e=>{var{dataKey:t,name:n,fill:s,legendType:r,hide:i}=e;return[{inactive:i,dataKey:t,type:r,color:s,value:$f(n,t),payload:e}]},pDe=h.memo(e=>{var{dataKey:t,stroke:n,strokeWidth:s,fill:r,name:i,hide:l,unit:o,tooltipType:c,id:d}=e,u={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:s,fill:r,dataKey:t,nameKey:void 0,name:$f(i,t),hide:l,type:c,color:r,unit:o,graphicalItemId:d}};return h.createElement(lP,{tooltipEntrySettings:u})});function xDe(e){var t=Mt(Wc),{data:n,dataKey:s,background:r,allOtherBarProps:i}=e,{onMouseEnter:l,onMouseLeave:o,onClick:c}=i,d=Pv(i,lDe),u=sP(l,s,i.id),f=rP(o),p=iP(c,s,i.id);if(!r||n==null)return null;var x=mu(r);return h.createElement(dr,{zIndex:ILe(r,Dn.barBackground)},n.map((v,w)=>{var{value:b,background:C,tooltipPosition:N}=v,S=Pv(v,oDe);if(!C)return null;var A=u(v,w),k=f(v,w),_=p(v,w),T=Ds(Ds(Ds(Ds(Ds({option:r,isActive:String(w)===t},S),{},{fill:"#eee"},C),x),mx(d,v,w)),{},{onMouseEnter:A,onMouseLeave:k,onClick:_,dataKey:s,index:w,className:"recharts-bar-background-rectangle"});return h.createElement(Lv,_o({key:"background-bar-".concat(w)},T))}))}function yDe(e){var{showLabels:t,children:n,rects:s}=e,r=s?.map(i=>{var l={x:i.x,y:i.y,width:i.width,lowerWidth:i.width,upperWidth:i.width,height:i.height};return Ds(Ds({},l),{},{value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:l,fill:i.fill})});return h.createElement(uK,{value:t?r:void 0},n)}function bDe(e){var{shape:t,activeBar:n,baseProps:s,entry:r,index:i,dataKey:l}=e,o=Mt(Wc),c=Mt(V4),d=n&&String(i)===o&&(c==null||l===c),u=d?n:t;return d?h.createElement(dr,{zIndex:Dn.activeBar},h.createElement(Lv,_o({},s,{name:String(s.name)},r,{isActive:d,option:u,index:i,dataKey:l}))):h.createElement(Lv,_o({},s,{name:String(s.name)},r,{isActive:d,option:u,index:i,dataKey:l}))}function vDe(e){var{shape:t,baseProps:n,entry:s,index:r,dataKey:i}=e;return h.createElement(Lv,_o({},n,{name:String(n.name)},s,{isActive:!1,option:t,index:r,dataKey:i}))}function wDe(e){var t,{data:n,props:s}=e,r=(t=kr(s))!==null&&t!==void 0?t:{},{id:i}=r,l=Pv(r,cDe),{shape:o,dataKey:c,activeBar:d}=s,{onMouseEnter:u,onClick:f,onMouseLeave:p}=s,x=Pv(s,dDe),v=sP(u,c,i),w=rP(p),b=iP(f,c,i);return n?h.createElement(h.Fragment,null,n.map((C,N)=>h.createElement(iDe,_o({index:N,key:"rectangle-".concat(C?.x,"-").concat(C?.y,"-").concat(C?.value,"-").concat(N),className:"recharts-bar-rectangle"},mx(x,C,N),{onMouseEnter:v(C,N),onMouseLeave:w(C,N),onClick:b(C,N)}),d?h.createElement(bDe,{shape:o,activeBar:d,baseProps:l,entry:C,index:N,dataKey:c}):h.createElement(vDe,{shape:o,baseProps:l,entry:C,index:N,dataKey:c})))):null}function NDe(e){var{props:t,previousRectanglesRef:n}=e,{data:s,layout:r,isAnimationActive:i,animationBegin:l,animationDuration:o,animationEasing:c,onAnimationEnd:d,onAnimationStart:u}=t,f=n.current,p=bx(t,"recharts-bar-"),[x,v]=h.useState(!1),w=!x,b=h.useCallback(()=>{typeof d=="function"&&d(),v(!1)},[d]),C=h.useCallback(()=>{typeof u=="function"&&u(),v(!0)},[u]);return h.createElement(yDe,{showLabels:w,rects:s},h.createElement(yx,{animationId:p,begin:l,duration:o,isActive:i,easing:c,onAnimationEnd:b,onAnimationStart:C,key:p},N=>{var S=N===1?s:s?.map((A,k)=>{var _=f&&f[k];if(_)return Ds(Ds({},A),{},{x:Ja(_.x,A.x,N),y:Ja(_.y,A.y,N),width:Ja(_.width,A.width,N),height:Ja(_.height,A.height,N)});if(r==="horizontal"){var T=Ja(0,A.height,N),E=Ja(A.stackedBarStart,A.y,N);return Ds(Ds({},A),{},{y:E,height:T})}var I=Ja(0,A.width,N),z=Ja(A.stackedBarStart,A.x,N);return Ds(Ds({},A),{},{width:I,x:z})});return N>0&&(n.current=S??null),S==null?null:h.createElement(ls,null,h.createElement(wDe,{props:t,data:S}))}),h.createElement(J4,{label:t.label}),t.children)}function jDe(e){var t=h.useRef(null);return h.createElement(NDe,{previousRectanglesRef:t,props:e})}var BK=0,CDe=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:Ia(e,t)}};class SDe extends h.PureComponent{render(){var{hide:t,data:n,dataKey:s,className:r,xAxisId:i,yAxisId:l,needClip:o,background:c,id:d}=this.props;if(t||n==null)return null;var u=Tt("recharts-bar",r),f=d;return h.createElement(ls,{className:u,id:d},o&&h.createElement("defs",null,h.createElement(DK,{clipPathId:f,xAxisId:i,yAxisId:l})),h.createElement(ls,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(f,")"):void 0},h.createElement(xDe,{data:n,dataKey:s,background:c,allOtherBarProps:this.props}),h.createElement(jDe,this.props)))}}var _De={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:BK,xAxisId:0,yAxisId:0,zIndex:Dn.bar};function ADe(e){var{xAxisId:t,yAxisId:n,hide:s,legendType:r,minPointSize:i,activeBar:l,animationBegin:o,animationDuration:c,animationEasing:d,isAnimationActive:u}=e,{needClip:f}=fP(t,n),p=Rf(),x=Ls(),v=aP(e.children,YN),w=Mt(N=>JPe(N,e.id,x,v));if(p!=="vertical"&&p!=="horizontal")return null;var b,C=w?.[0];return C==null||C.height==null||C.width==null?b=0:b=p==="vertical"?C.height/2:C.width/2,h.createElement(PK,{xAxisId:t,yAxisId:n,data:w,dataPointFormatter:CDe,errorBarOffset:b},h.createElement(SDe,_o({},e,{layout:p,needClip:f,data:w,xAxisId:t,yAxisId:n,hide:s,legendType:r,minPointSize:i,activeBar:l,animationBegin:o,animationDuration:c,animationEasing:d,isAnimationActive:u})))}function EDe(e){var{layout:t,barSettings:{dataKey:n,minPointSize:s},pos:r,bandSize:i,xAxis:l,yAxis:o,xAxisTicks:c,yAxisTicks:d,stackedData:u,displayedData:f,offset:p,cells:x,parentViewBox:v,dataStartIndex:w}=e,b=t==="horizontal"?o:l,C=u?b.scale.domain():null,N=j1e({numericAxis:b}),S=b.scale(N);return f.map((A,k)=>{var _,T,E,I,z,$;if(u){var P=u[k+w];if(P==null)return null;_=x1e(P,C)}else _=Ia(A,n),Array.isArray(_)||(_=[N,_]);var O=IPe(s,BK)(_[1],k);if(t==="horizontal"){var B,[Q,F]=[o.scale(_[0]),o.scale(_[1])];T=aR({axis:l,ticks:c,bandSize:i,offset:r.offset,entry:A,index:k}),E=(B=F??Q)!==null&&B!==void 0?B:void 0,I=r.size;var ee=Q-F;if(z=Pi(ee)?0:ee,$={x:T,y:p.top,width:I,height:p.height},Math.abs(O)>0&&Math.abs(z)<Math.abs(O)){var V=is(z||O)*(Math.abs(O)-Math.abs(z));E-=V,z+=V}}else{var[de,oe]=[l.scale(_[0]),l.scale(_[1])];if(T=de,E=aR({axis:o,ticks:d,bandSize:i,offset:r.offset,entry:A,index:k}),I=oe-de,z=r.size,$={x:p.left,y:E,width:p.width,height:z},Math.abs(O)>0&&Math.abs(I)<Math.abs(O)){var Z=is(I||O)*(Math.abs(O)-Math.abs(I));I+=Z}}if(T==null||E==null||I==null||z==null)return null;var R=Ds(Ds({},A),{},{stackedBarStart:S,x:T,y:E,width:I,height:z,value:u?_:_[1],payload:A,background:$,tooltipPosition:{x:T+I/2,y:E+z/2},parentViewBox:v},x&&x[k]&&x[k].props);return R}).filter(Boolean)}function TDe(e){var t=$n(e,_De),n=nDe(t.stackId),s=Ls();return h.createElement(oP,{id:t.id,type:"bar"},r=>h.createElement(h.Fragment,null,h.createElement(vK,{legendPayload:gDe(t)}),h.createElement(pDe,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:r}),h.createElement(NK,{type:"bar",id:r,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:n,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:s}),h.createElement(dr,{zIndex:t.zIndex},h.createElement(ADe,_o({},t,{id:r})))))}var gT=h.memo(TDe,JN);gT.displayName="Bar";var kDe=["domain","range"],LDe=["domain","range"];function LU(e,t){if(e==null)return{};var n,s,r=PDe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function PDe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}function PU(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function HK(e,t){if(e===t)return!0;var{domain:n,range:s}=e,r=LU(e,kDe),{domain:i,range:l}=t,o=LU(t,LDe);return!PU(n,i)||!PU(s,l)?!1:JN(r,o)}var DDe=["dangerouslySetInnerHTML","ticks","scale"],ODe=["id","scale"];function pT(){return pT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},pT.apply(null,arguments)}function DU(e,t){if(e==null)return{};var n,s,r=MDe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function MDe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}function IDe(e){var t=Ga(),n=h.useRef(null);return h.useLayoutEffect(()=>{n.current===null?t(fLe(e)):n.current!==e&&t(hLe({prev:n.current,next:e})),n.current=e},[e,t]),h.useLayoutEffect(()=>()=>{n.current&&(t(gLe(n.current)),n.current=null)},[t]),null}var $De=e=>{var{xAxisId:t,className:n}=e,s=Mt(n4),r=Ls(),i="xAxis",l=Mt(C=>SY(C,i,t,r)),o=Mt(C=>wY(C,t)),c=Mt(C=>d_e(C,t)),d=Mt(C=>aY(C,t));if(o==null||c==null||d==null)return null;var{dangerouslySetInnerHTML:u,ticks:f,scale:p}=e,x=DU(e,DDe),{id:v,scale:w}=d,b=DU(d,ODe);return h.createElement(mP,pT({},x,b,{x:c.x,y:c.y,width:o.width,height:o.height,className:Tt("recharts-".concat(i," ").concat(i),n),viewBox:s,ticks:l,axisType:i}))},RDe={allowDataOverflow:as.allowDataOverflow,allowDecimals:as.allowDecimals,allowDuplicatedCategory:as.allowDuplicatedCategory,angle:as.angle,axisLine:uo.axisLine,height:as.height,hide:!1,includeHidden:as.includeHidden,interval:as.interval,minTickGap:as.minTickGap,mirror:as.mirror,orientation:as.orientation,padding:as.padding,reversed:as.reversed,scale:as.scale,tick:as.tick,tickCount:as.tickCount,tickLine:uo.tickLine,tickSize:uo.tickSize,type:as.type,xAxisId:0},zDe=e=>{var t=$n(e,RDe);return h.createElement(h.Fragment,null,h.createElement(IDe,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),h.createElement($De,t))},xT=h.memo(zDe,HK);xT.displayName="XAxis";var UDe=["dangerouslySetInnerHTML","ticks","scale"],FDe=["id","scale"];function yT(){return yT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},yT.apply(null,arguments)}function OU(e,t){if(e==null)return{};var n,s,r=BDe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function BDe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}function HDe(e){var t=Ga(),n=h.useRef(null);return h.useLayoutEffect(()=>{n.current===null?t(pLe(e)):n.current!==e&&t(xLe({prev:n.current,next:e})),n.current=e},[e,t]),h.useLayoutEffect(()=>()=>{n.current&&(t(yLe(n.current)),n.current=null)},[t]),null}var GDe=e=>{var{yAxisId:t,className:n,width:s,label:r}=e,i=h.useRef(null),l=h.useRef(null),o=Mt(n4),c=Ls(),d=Ga(),u="yAxis",f=Mt(_=>NY(_,t)),p=Mt(_=>m_e(_,t)),x=Mt(_=>SY(_,u,t,c)),v=Mt(_=>nY(_,t));if(h.useLayoutEffect(()=>{if(!(s!=="auto"||!f||Z4(r)||h.isValidElement(r)||v==null)){var _=i.current;if(_){var T=_.getCalculatedWidth();Math.round(f.width)!==Math.round(T)&&d(bLe({id:t,width:T}))}}},[x,f,d,r,t,s,v]),f==null||p==null||v==null)return null;var{dangerouslySetInnerHTML:w,ticks:b,scale:C}=e,N=OU(e,UDe),{id:S,scale:A}=v,k=OU(v,FDe);return h.createElement(mP,yT({},N,k,{ref:i,labelRef:l,x:p.x,y:p.y,tickTextProps:s==="auto"?{width:void 0}:{width:s},width:f.width,height:f.height,className:Tt("recharts-".concat(u," ").concat(u),n),viewBox:o,ticks:x,axisType:u}))},WDe={allowDataOverflow:ns.allowDataOverflow,allowDecimals:ns.allowDecimals,allowDuplicatedCategory:ns.allowDuplicatedCategory,angle:ns.angle,axisLine:uo.axisLine,hide:!1,includeHidden:ns.includeHidden,interval:ns.interval,minTickGap:ns.minTickGap,mirror:ns.mirror,orientation:ns.orientation,padding:ns.padding,reversed:ns.reversed,scale:ns.scale,tick:ns.tick,tickCount:ns.tickCount,tickLine:uo.tickLine,tickSize:uo.tickSize,type:ns.type,width:ns.width,yAxisId:0},VDe=e=>{var t=$n(e,WDe);return h.createElement(h.Fragment,null,h.createElement(HDe,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),h.createElement(GDe,t))},bT=h.memo(VDe,HK);bT.displayName="YAxis";var qDe=(e,t)=>t,gP=st([qDe,ma,eY,Zn,FY,Fo,EAe,Xn],MAe),pP=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,s=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/s)}},GK=ii("mouseClick"),WK=gx();WK.startListening({actionCreator:GK,effect:(e,t)=>{var n=e.payload,s=gP(t.getState(),pP(n));s?.activeIndex!=null&&t.dispatch(__e({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}});var vT=ii("mouseMove"),VK=gx(),Sy=null;VK.startListening({actionCreator:vT,effect:(e,t)=>{var n=e.payload;Sy!==null&&cancelAnimationFrame(Sy);var s=pP(n);Sy=requestAnimationFrame(()=>{var r=t.getState(),i=U4(r,r.tooltip.settings.shared);if(i==="axis"){var l=gP(r,s);l?.activeIndex!=null?t.dispatch(DY({activeIndex:l.activeIndex,activeDataKey:void 0,activeCoordinate:l.activeCoordinate})):t.dispatch(PY())}Sy=null})}});function YDe(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var MU={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},qK=cr({name:"rootProps",initialState:MU,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:MU.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),KDe=qK.reducer,{updateOptions:QDe}=qK.actions,YK=cr({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:XDe}=YK.actions,ZDe=YK.reducer,KK=ii("keyDown"),QK=ii("focus"),xP=gx();xP.startListening({actionCreator:KK,effect:(e,t)=>{var n=t.getState(),s=n.rootProps.accessibilityLayer!==!1;if(s){var{keyboardInteraction:r}=n.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var l=F4(r,Vf(n),Cx(n),Ax(n)),o=l==null?-1:Number(l);if(!(!Number.isFinite(o)||o<0)){var c=Fo(n);if(i==="Enter"){var d=Sv(n,"axis","hover",String(r.index));t.dispatch(rT({active:!r.active,activeIndex:r.index,activeCoordinate:d}));return}var u=p_e(n),f=u==="left-to-right"?1:-1,p=i==="ArrowRight"?1:-1,x=o+p*f;if(!(c==null||x>=c.length||x<0)){var v=Sv(n,"axis","hover",String(x));t.dispatch(rT({active:!0,activeIndex:x.toString(),activeCoordinate:v}))}}}}}});xP.startListening({actionCreator:QK,effect:(e,t)=>{var n=t.getState(),s=n.rootProps.accessibilityLayer!==!1;if(s){var{keyboardInteraction:r}=n.tooltip;if(!r.active&&r.index==null){var i="0",l=Sv(n,"axis","hover",String(i));t.dispatch(rT({active:!0,activeIndex:i,activeCoordinate:l}))}}}});var Yr=ii("externalEvent"),XK=gx(),G2=new Map;XK.startListening({actionCreator:Yr,effect:(e,t)=>{var{handler:n,reactEvent:s}=e.payload;if(n!=null){s.persist();var r=s.type,i=G2.get(r);i!==void 0&&cancelAnimationFrame(i);var l=requestAnimationFrame(()=>{try{var o=t.getState(),c={activeCoordinate:mAe(o),activeDataKey:V4(o),activeIndex:Wc(o),activeLabel:GY(o),activeTooltipIndex:Wc(o),isTooltipActive:fAe(o)};n(c,s)}finally{G2.delete(r)}});G2.set(r,l)}}});var JDe=st([Gf],e=>e.tooltipItemPayloads),e3e=st([JDe,_x,(e,t)=>t,(e,t,n)=>n],(e,t,n,s)=>{var r=e.find(o=>o.settings.graphicalItemId===s);if(r!=null){var{positions:i}=r;if(i!=null){var l=t(i,n);return l}}}),ZK=ii("touchMove"),JK=gx();JK.startListening({actionCreator:ZK,effect:(e,t)=>{var n=e.payload;if(!(n.touches==null||n.touches.length===0)){var s=t.getState(),r=U4(s,s.tooltip.settings.shared);if(r==="axis"){var i=n.touches[0];if(i==null)return;var l=gP(s,pP({clientX:i.clientX,clientY:i.clientY,currentTarget:n.currentTarget}));l?.activeIndex!=null&&t.dispatch(DY({activeIndex:l.activeIndex,activeDataKey:void 0,activeCoordinate:l.activeCoordinate}))}else if(r==="item"){var o,c=n.touches[0];if(document.elementFromPoint==null||c==null)return;var d=document.elementFromPoint(c.clientX,c.clientY);if(!d||!d.getAttribute)return;var u=d.getAttribute(nq),f=(o=d.getAttribute(sq))!==null&&o!==void 0?o:void 0,p=Wf(s).find(w=>w.id===f);if(u==null||p==null||f==null)return;var{dataKey:x}=p,v=e3e(s,u,f);t.dispatch(LY({activeDataKey:x,activeIndex:u,activeCoordinate:v,activeGraphicalItemId:f}))}}}});var t3e=SV({brush:$Le,cartesianAxis:vLe,chartData:mEe,errorBars:O4e,graphicalItems:_ke,layout:u1e,legend:bCe,options:lEe,polarAxis:HTe,polarOptions:ZDe,referenceElements:GLe,rootProps:KDe,tooltip:A_e,zIndex:KAe}),a3e=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return Ije({reducer:t3e,preloadedState:t,middleware:s=>{var r;return s({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((r="es6")!==null&&r!==void 0?r:"")}).concat([WK.middleware,VK.middleware,xP.middleware,XK.middleware,JK.middleware])},enhancers:s=>{var r=s;return typeof s=="function"&&(r=s()),r.concat(UV({type:"raf"}))},devTools:{serialize:{replacer:YDe},name:"recharts-".concat(n)}})};function eQ(e){var{preloadedState:t,children:n,reduxStoreName:s}=e,r=Ls(),i=h.useRef(null);if(r)return n;i.current==null&&(i.current=a3e(t,s));var l=YL;return h.createElement(dPe,{context:l,store:i.current},n)}function n3e(e){var{layout:t,margin:n}=e,s=Ga(),r=Ls();return h.useEffect(()=>{r||(s(o1e(t)),s(l1e(n)))},[s,r,t,n]),null}var tQ=h.memo(n3e,JN);function aQ(e){var t=Ga();return h.useEffect(()=>{t(QDe(e))},[t,e]),null}function IU(e){var{zIndex:t,isPanorama:n}=e,s=h.useRef(null),r=Ga();return h.useLayoutEffect(()=>(s.current&&r(qAe({zIndex:t,element:s.current,isPanorama:n})),()=>{r(YAe({zIndex:t,isPanorama:n}))}),[r,t,n]),h.createElement("g",{tabIndex:-1,ref:s})}function $U(e){var{children:t,isPanorama:n}=e,s=Mt($Ae);if(!s||s.length===0)return t;var r=s.filter(l=>l<0),i=s.filter(l=>l>0);return h.createElement(h.Fragment,null,r.map(l=>h.createElement(IU,{key:l,zIndex:l,isPanorama:n})),t,i.map(l=>h.createElement(IU,{key:l,zIndex:l,isPanorama:n})))}var s3e=["children"];function r3e(e,t){if(e==null)return{};var n,s,r=i3e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function i3e(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}function Dv(){return Dv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Dv.apply(null,arguments)}var l3e={width:"100%",height:"100%",display:"block"},o3e=h.forwardRef((e,t)=>{var n=r4(),s=i4(),r=wq();if(!vl(n)||!vl(s))return null;var{children:i,otherAttributes:l,title:o,desc:c}=e,d,u;return l!=null&&(typeof l.tabIndex=="number"?d=l.tabIndex:d=r?0:void 0,typeof l.role=="string"?u=l.role:u=r?"application":void 0),h.createElement(FL,Dv({},l,{title:o,desc:c,role:u,tabIndex:d,width:n,height:s,style:l3e,ref:t}),i)}),c3e=e=>{var{children:t}=e,n=Mt(TN);if(!n)return null;var{width:s,height:r,y:i,x:l}=n;return h.createElement(FL,{width:s,height:r,x:l,y:i},t)},RU=h.forwardRef((e,t)=>{var{children:n}=e,s=r3e(e,s3e),r=Ls();return r?h.createElement(c3e,null,h.createElement($U,{isPanorama:!0},n)):h.createElement(o3e,Dv({ref:t},s),h.createElement($U,{isPanorama:!1},n))});function d3e(){var e=Ga(),[t,n]=h.useState(null),s=Mt(T1e);return h.useEffect(()=>{if(t!=null){var r=t.getBoundingClientRect(),i=r.width/t.offsetWidth;ln(i)&&i!==s&&e(d1e(i))}},[t,e,s]),n}function zU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function u3e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zU(Object(n),!0).forEach(function(s){m3e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zU(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function m3e(e,t,n){return(t=f3e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f3e(e){var t=h3e(e,"string");return typeof t=="symbol"?t:t+""}function h3e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bu(){return bu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},bu.apply(null,arguments)}var g3e=()=>(wEe(),null);function Ov(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var p3e=h.forwardRef((e,t)=>{var n,s,r=h.useRef(null),[i,l]=h.useState({containerWidth:Ov((n=e.style)===null||n===void 0?void 0:n.width),containerHeight:Ov((s=e.style)===null||s===void 0?void 0:s.height)}),o=h.useCallback((d,u)=>{l(f=>{var p=Math.round(d),x=Math.round(u);return f.containerWidth===p&&f.containerHeight===x?f:{containerWidth:p,containerHeight:x}})},[]),c=h.useCallback(d=>{if(typeof t=="function"&&t(d),d!=null&&typeof ResizeObserver<"u"){var{width:u,height:f}=d.getBoundingClientRect();o(u,f);var p=v=>{var{width:w,height:b}=v[0].contentRect;o(w,b)},x=new ResizeObserver(p);x.observe(d),r.current=x}},[t,o]);return h.useEffect(()=>()=>{var d=r.current;d?.disconnect()},[o]),h.createElement(h.Fragment,null,h.createElement(LN,{width:i.containerWidth,height:i.containerHeight}),h.createElement("div",bu({ref:c},e)))}),x3e=h.forwardRef((e,t)=>{var{width:n,height:s}=e,[r,i]=h.useState({containerWidth:Ov(n),containerHeight:Ov(s)}),l=h.useCallback((c,d)=>{i(u=>{var f=Math.round(c),p=Math.round(d);return u.containerWidth===f&&u.containerHeight===p?u:{containerWidth:f,containerHeight:p}})},[]),o=h.useCallback(c=>{if(typeof t=="function"&&t(c),c!=null){var{width:d,height:u}=c.getBoundingClientRect();l(d,u)}},[t,l]);return h.createElement(h.Fragment,null,h.createElement(LN,{width:r.containerWidth,height:r.containerHeight}),h.createElement("div",bu({ref:o},e)))}),y3e=h.forwardRef((e,t)=>{var{width:n,height:s}=e;return h.createElement(h.Fragment,null,h.createElement(LN,{width:n,height:s}),h.createElement("div",bu({ref:t},e)))}),b3e=h.forwardRef((e,t)=>{var{width:n,height:s}=e;return jo(n)||jo(s)?h.createElement(x3e,bu({},e,{ref:t})):h.createElement(y3e,bu({},e,{ref:t}))});function v3e(e){return e===!0?p3e:b3e}var w3e=h.forwardRef((e,t)=>{var{children:n,className:s,height:r,onClick:i,onContextMenu:l,onDoubleClick:o,onMouseDown:c,onMouseEnter:d,onMouseLeave:u,onMouseMove:f,onMouseUp:p,onTouchEnd:x,onTouchMove:v,onTouchStart:w,style:b,width:C,responsive:N,dispatchTouchEvents:S=!0}=e,A=h.useRef(null),k=Ga(),[_,T]=h.useState(null),[E,I]=h.useState(null),z=d3e(),$=s4(),P=$?.width>0?$.width:C,O=$?.height>0?$.height:r,B=h.useCallback(me=>{z(me),typeof t=="function"&&t(me),T(me),I(me),me!=null&&(A.current=me)},[z,t,T,I]),Q=h.useCallback(me=>{k(GK(me)),k(Yr({handler:i,reactEvent:me}))},[k,i]),F=h.useCallback(me=>{k(vT(me)),k(Yr({handler:d,reactEvent:me}))},[k,d]),ee=h.useCallback(me=>{k(PY()),k(Yr({handler:u,reactEvent:me}))},[k,u]),V=h.useCallback(me=>{k(vT(me)),k(Yr({handler:f,reactEvent:me}))},[k,f]),de=h.useCallback(()=>{k(QK())},[k]),oe=h.useCallback(me=>{k(KK(me.key))},[k]),Z=h.useCallback(me=>{k(Yr({handler:l,reactEvent:me}))},[k,l]),R=h.useCallback(me=>{k(Yr({handler:o,reactEvent:me}))},[k,o]),ve=h.useCallback(me=>{k(Yr({handler:c,reactEvent:me}))},[k,c]),X=h.useCallback(me=>{k(Yr({handler:p,reactEvent:me}))},[k,p]),je=h.useCallback(me=>{k(Yr({handler:w,reactEvent:me}))},[k,w]),Ne=h.useCallback(me=>{S&&k(ZK(me)),k(Yr({handler:v,reactEvent:me}))},[k,S,v]),Oe=h.useCallback(me=>{k(Yr({handler:x,reactEvent:me}))},[k,x]),Fe=v3e(N);return h.createElement(XY.Provider,{value:_},h.createElement(sV.Provider,{value:E},h.createElement(Fe,{width:P??b?.width,height:O??b?.height,className:Tt("recharts-wrapper",s),style:u3e({position:"relative",cursor:"default",width:P,height:O},b),onClick:Q,onContextMenu:Z,onDoubleClick:R,onFocus:de,onKeyDown:oe,onMouseDown:ve,onMouseEnter:F,onMouseLeave:ee,onMouseMove:V,onMouseUp:X,onTouchEnd:Oe,onTouchMove:Ne,onTouchStart:je,ref:B},h.createElement(g3e,null),n)))}),N3e=["width","height","responsive","children","className","style","compact","title","desc"];function j3e(e,t){if(e==null)return{};var n,s,r=C3e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function C3e(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}var nQ=h.forwardRef((e,t)=>{var{width:n,height:s,responsive:r,children:i,className:l,style:o,compact:c,title:d,desc:u}=e,f=j3e(e,N3e),p=kr(f);return c?h.createElement(h.Fragment,null,h.createElement(LN,{width:n,height:s}),h.createElement(RU,{otherAttributes:p,title:d,desc:u},i)):h.createElement(w3e,{className:l,style:o,width:n,height:s,responsive:r??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},h.createElement(RU,{otherAttributes:p,title:d,desc:u,ref:t},h.createElement(VLe,null,i)))});function wT(){return wT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},wT.apply(null,arguments)}var S3e={top:5,right:5,bottom:5,left:5},_3e={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:S3e,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},sQ=h.forwardRef(function(t,n){var s,r=$n(t.categoricalChartProps,_3e),{chartName:i,defaultTooltipEventType:l,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,categoricalChartProps:d}=t,u={chartName:i,defaultTooltipEventType:l,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,eventEmitter:void 0};return h.createElement(eQ,{preloadedState:{options:u},reduxStoreName:(s=d.id)!==null&&s!==void 0?s:i},h.createElement(_K,{chartData:d.data}),h.createElement(tQ,{layout:r.layout,margin:r.margin}),h.createElement(aQ,{baseValue:r.baseValue,accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className,reverseStackOrder:r.reverseStackOrder}),h.createElement(nQ,wT({},r,{ref:n})))}),A3e=["axis"],E3e=h.forwardRef((e,t)=>h.createElement(sQ,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:A3e,tooltipPayloadSearcher:X4,categoricalChartProps:e,ref:t})),T3e=["axis","item"],k3e=h.forwardRef((e,t)=>h.createElement(sQ,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:T3e,tooltipPayloadSearcher:X4,categoricalChartProps:e,ref:t}));function L3e(e){var t=Ga();return h.useEffect(()=>{t(XDe(e))},[t,e]),null}var P3e=["layout"];function NT(){return NT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},NT.apply(null,arguments)}function D3e(e,t){if(e==null)return{};var n,s,r=O3e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function O3e(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}var M3e={top:5,right:5,bottom:5,left:5},rQ={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:M3e,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},I3e=h.forwardRef(function(t,n){var s,r=$n(t.categoricalChartProps,rQ),{layout:i}=r,l=D3e(r,P3e),{chartName:o,defaultTooltipEventType:c,validateTooltipEventTypes:d,tooltipPayloadSearcher:u}=t,f={chartName:o,defaultTooltipEventType:c,validateTooltipEventTypes:d,tooltipPayloadSearcher:u,eventEmitter:void 0};return h.createElement(eQ,{preloadedState:{options:f},reduxStoreName:(s=r.id)!==null&&s!==void 0?s:o},h.createElement(_K,{chartData:r.data}),h.createElement(tQ,{layout:i,margin:r.margin}),h.createElement(aQ,{baseValue:void 0,accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className,reverseStackOrder:r.reverseStackOrder}),h.createElement(L3e,{cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius}),h.createElement(nQ,NT({},l,{ref:n})))});function UU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function FU(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?UU(Object(n),!0).forEach(function(s){$3e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UU(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function $3e(e,t,n){return(t=R3e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R3e(e){var t=z3e(e,"string");return typeof t=="symbol"?t:t+""}function z3e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var U3e=["item"],F3e=FU(FU({},rQ),{},{layout:"centric",startAngle:0,endAngle:360}),B3e=h.forwardRef((e,t)=>{var n=$n(e,F3e);return h.createElement(I3e,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:U3e,tooltipPayloadSearcher:X4,categoricalChartProps:n,ref:t})});const BU={user_id:"",start_date:"",end_date:"",target_amount:"",period_type:"CUSTOM",period_year:new Date().getFullYear(),period_number:1},H3e=[{value:"MONTHLY",label:"Monthly"},{value:"QUARTERLY",label:"Quarterly"},{value:"SEMIANNUAL",label:"Semi-Annual"},{value:"ANNUAL",label:"Annual"},{value:"CUSTOM",label:"Custom"}],HU=["#6366f1","#22c55e","#f97316","#0ea5e9","#a855f7","#f43f5e","#eab308","#8b5cf6","#10b981","#ec4899","#14b8a6","#f59e0b"];function G3e({name:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search..."}){const[l,o]=h.useState(!1),[c,d]=h.useState(""),u=h.useRef(null),f=t.find(v=>String(v.id)===String(n)),p=f?r(f):"",x=h.useMemo(()=>{const v=c.toLowerCase();return v?t.filter(w=>r(w).toLowerCase().includes(v)):t},[t,c,r]);return h.useEffect(()=>{const v=w=>{u.current&&!u.current.contains(w.target)&&o(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),a.jsxs("div",{ref:u,className:"relative flex justify-center w-full",children:[a.jsx("input",{value:l?c:p,placeholder:i,onFocus:()=>o(!0),onChange:v=>{d(v.target.value),o(!0)},className:"w-full max-w-md border text-gray-500 border-gray-300 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"}),l&&a.jsx("div",{className:"absolute top-full left-0 z-50 mt-1 w-full bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:x.length?x.map(v=>a.jsx("button",{type:"button",onClick:()=>{s({target:{name:e,value:String(v.id)}}),o(!1),d("")},className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-50",children:r(v)},v.id)):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results found"})})]})}function ej({currentUserRole:e,currentUserId:t}){const{user:n,mutate:s}=ta(),r=n?.company?.currency||"",i=r==="$"?Toe:Loe;h.useEffect(()=>{s&&s()},[s]),h.useEffect(()=>{n?.company&&console.log("Dashboard detected Company Settings:",n.company)},[n]),h.useEffect(()=>{document.title="Targets | Sari-Sari CRM"},[]);const[l,o]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState(!1),[p,x]=h.useState(""),[v,w]=h.useState(1),[b,C]=h.useState(10),[N,S]=h.useState(!1),[A,k]=h.useState(!1),[_,T]=h.useState(!1),[E,I]=h.useState(null),[z,$]=h.useState(BU),[P,O]=h.useState(null),[B,Q]=h.useState(null),[F,ee]=h.useState(!1),[V,de]=h.useState([]),[oe,Z]=h.useState("annual"),[R,ve]=h.useState(1),[X,je]=h.useState("overview"),[Ne,Oe]=h.useState(null),[Fe,me]=h.useState(!1),[Be,Pe]=h.useState(null),[we,ne]=h.useState(!1),[Le,pe]=h.useState(null),[le,ge]=h.useState(null),[fe,Te]=h.useState(new Date().getFullYear()),[Ye,Ae]=h.useState(""),[Ie,Je]=h.useState(1),he=h.useMemo(()=>["CEO","ADMIN","GROUP MANAGER","MANAGER","SALES"].includes(e?.toUpperCase()),[e]),Me=h.useCallback(async()=>{f(!0);try{const G=await ie.get("/targets/admin/fetch-all");o(G.data)}catch(G){console.error(G),H.error("Failed to load targets.")}finally{f(!1)}},[]),re=h.useCallback(async()=>{try{if(he){const G=await ie.get("/targets/admin/get-users");d(G.data)}}catch(G){console.error(G)}},[he]),Qe=h.useCallback(async()=>{try{const G=await ie.get("/targets/fiscal-settings");ge(G.data)}catch(G){console.error("Failed to fetch fiscal settings:",G)}},[]),We=h.useCallback(async()=>{me(!0);try{const G=new URLSearchParams;Ye&&G.append("period_type",Ye),fe&&G.append("period_year",fe),Ie&&G.append("period_number",Ie);const J=await ie.get(`/targets/leaderboard?${G.toString()}`);Oe(J.data)}catch(G){console.error(G),H.error("Failed to load leaderboard.")}finally{me(!1)}},[Ye,fe,Ie]),dt=h.useCallback(async()=>{try{const G=new URLSearchParams;Ye&&G.append("period_type",Ye),fe&&G.append("period_year",fe),Ie&&G.append("period_number",Ie);const J=await ie.get(`/targets/team-summary?${G.toString()}`);pe(J.data)}catch(G){console.error(G)}},[Ye,fe,Ie]),ze=h.useCallback(async G=>{ne(!0);try{const J=await ie.get(`/targets/history/${G}`);Pe(J.data)}catch(J){console.error(J),H.error("Failed to load user history.")}finally{ne(!1)}},[]);h.useEffect(()=>{Me(),re(),Qe()},[Me,re,Qe]),h.useEffect(()=>{X==="leaderboard"&&(We(),dt())},[X,We,dt]);const ce=h.useMemo(()=>{const G=l.reduce((ft,bt)=>ft+(Number(bt.target_amount)||0),0),J=l.reduce((ft,bt)=>ft+(Number(bt.achieved_amount)||0),0),De=G>0?(J/G*100).toFixed(1):0,Ve=Math.max(0,G-J);return{totalTarget:G,totalAchieved:J,achievement:De,remaining:Ve,totalCount:l.length}},[l]),ye=h.useCallback(()=>(J=>oe==="annual"?J:J.filter(De=>{const Ve=new Date(De.start_date),ft=new Date(De.end_date),bt=Ve.getMonth(),jt=ft.getMonth();let ke=!1;if(oe==="semiannual")R===1?ke=bt<=5&&jt>=0:ke=bt<=11&&jt>=6;else if(oe==="trimester"){const _e=[{start:0,end:3},{start:4,end:7},{start:8,end:11}][R-1];ke=bt<=_e.end&&jt>=_e.start}else if(oe==="quarterly"){const _e=[{start:0,end:2},{start:3,end:5},{start:6,end:8},{start:9,end:11}][R-1];ke=bt<=_e.end&&jt>=_e.start}return ke}))(l),[l,oe,R]),Ue=h.useMemo(()=>{const G=ye(),J={};G.forEach(bt=>{const jt=bt.user_id,ke=bt.user?`${bt.user.first_name} ${bt.user.last_name}`:"Unknown";J[jt]||(J[jt]={userId:jt,name:ke,targetAmount:0,achievedAmount:0}),J[jt].targetAmount+=Number(bt.target_amount)||0,J[jt].achievedAmount+=Number(bt.achieved_amount)||0});const De=Object.values(J).map((bt,jt)=>({...bt,fill:HU[jt%HU.length]})),Ve=De.reduce((bt,jt)=>bt+jt.targetAmount,0);return De.map(bt=>({...bt,percentage:Ve>0?(bt.targetAmount/Ve*100).toFixed(1):0}))},[ye]),et=h.useMemo(()=>Ue.slice(0,8).map(G=>({name:G.name.split(" ")[0],achievement:Number(G.achievedAmount),target:Number(G.targetAmount)})),[Ue]),lt=h.useMemo(()=>{const G=p.toLowerCase();return l.filter(J=>(J.user?`${J.user.first_name} ${J.user.last_name}`.toLowerCase():"").includes(G)||J.start_date?.includes(G)||J.end_date?.includes(G))},[l,p]),Ee=Math.max(1,Math.ceil(lt.length/b)),tt=h.useMemo(()=>{const G=(v-1)*b;return lt.slice(G,G+b)},[lt,v,b]),be=G=>{const{name:J,value:De}=G.target;$(Ve=>({...Ve,[J]:De}))},Xe=()=>{$(BU),k(!1),I(null),S(!0)},M=G=>{$({user_id:G.user?.id?String(G.user.id):"",start_date:G.start_date||"",end_date:G.end_date||"",target_amount:G.target_amount?.toString()||"",period_type:G.period_type||"CUSTOM",period_year:G.period_year||new Date().getFullYear(),period_number:G.period_number||1}),k(!0),I(G.id),S(!0),O(null)},U=G=>{const J=G.user?`${G.user.first_name} ${G.user.last_name}`:"Unknown";Q({title:"Delete Target",message:a.jsxs("span",{children:["Are you sure you want to delete the target for"," ",a.jsx("span",{className:"font-semibold",children:J}),"?"]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:async()=>{await ie.delete(`/targets/admin/${G.id}`),H.success("Target deleted successfully."),Me(),O(null)}})},Y=()=>{if(tt.every(G=>V.includes(G.id)))de(V.filter(G=>!tt.map(J=>J.id).includes(G)));else{const G=tt.map(J=>J.id);de([...new Set([...V,...G])])}},te=G=>{de(J=>J.includes(G)?J.filter(De=>De!==G):[...J,G])},K=async()=>{V.length!==0&&Q({title:"Delete Targets",message:a.jsxs("span",{children:["Are you sure you want to delete"," ",a.jsx("span",{className:"font-semibold",children:V.length})," selected targets? This action cannot be undone."]}),confirmLabel:`Delete ${V.length} Target(s)`,cancelLabel:"Cancel",variant:"danger",action:async()=>{await ie.post("/targets/admin/bulk-delete",{target_ids:V}),H.success(`Successfully deleted ${V.length} targets`),de([]),Me()}})},Se=G=>{if(G.preventDefault(),!z.user_id||!z.start_date||!z.end_date||!z.target_amount){H.error("All fields are required.");return}if(new Date(z.end_date)<new Date(z.start_date)){H.error("End date must be after start date.");return}const J={user_id:Number(z.user_id),target_amount:Number(z.target_amount),start_date:z.start_date,end_date:z.end_date,period_type:z.period_type||"CUSTOM",period_year:z.period_year||new Date().getFullYear(),period_number:z.period_number||null},De=A?"Update Target":"Create Target";Q({title:De,message:"Are you sure you want to proceed?",confirmLabel:De,cancelLabel:"Cancel",variant:"primary",action:async()=>{T(!0);try{A?(await ie.put(`/targets/admin/${E}`,J),H.success("Target updated successfully.")):(await ie.post("/targets/admin/create",J),H.success("Target created successfully.")),S(!1),Me()}catch(Ve){console.error(Ve);const ft=Ve.response?.data?.detail||Ve.message||"Operation failed.";H.error(ft)}finally{T(!1)}}})};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[u&&a.jsx(zt,{message:"Loading targets..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold",children:[a.jsx(Zs,{className:"mr-2 text-blue-600"})," Targets"]}),he&&e.toLowerCase()!=="sales"&&a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:Xe,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(da,{className:"mr-2"})," Add Target"]})})]}),e?.toUpperCase()!=="SALES"&&a.jsxs("div",{className:"flex border-b border-gray-200 mb-6",children:[a.jsxs("button",{onClick:()=>je("overview"),className:`px-4 py-3 text-sm font-medium border-b-2 transition ${X==="overview"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[a.jsx(uM,{className:"inline mr-2"}),"Overview"]}),a.jsxs("button",{onClick:()=>je("leaderboard"),className:`px-4 py-3 text-sm font-medium border-b-2 transition ${X==="leaderboard"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[a.jsx(RC,{className:"inline mr-2"}),"Leaderboard"]}),a.jsxs("button",{onClick:()=>je("history"),className:`px-4 py-3 text-sm font-medium border-b-2 transition ${X==="history"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[a.jsx(Is,{className:"inline mr-2"}),"History"]})]}),X==="overview"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[a.jsx(gc,{title:"Total Targets",value:ce.totalCount,icon:a.jsx(Zs,{size:22}),color:"blue"}),a.jsx(gc,{title:"Target Amount",value:`${r}${ce.totalTarget.toLocaleString("en-US",{maximumFractionDigits:0})}`,icon:a.jsx(i,{size:22}),color:"green"}),a.jsx(gc,{title:"Achieved Amount",value:`${r}${ce.totalAchieved.toLocaleString("en-US",{maximumFractionDigits:0})}`,icon:a.jsx(Vd,{size:22}),color:"purple"}),a.jsx(gc,{title:"Achievement Rate",value:`${ce.achievement}%`,icon:a.jsx(Zs,{size:22}),color:"orange"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow p-4 md:h-[420px] h-[350px] flex flex-col",children:[a.jsxs("div",{className:"mb-4 text-center",children:[a.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Sales Achievement"}),a.jsx("div",{className:"h-[38px] w-full invisible"})]}),et.length>0?a.jsx("div",{className:"flex-1 min-h-0 w-full",children:a.jsx(b2,{width:"100%",height:"100%",children:a.jsxs(k3e,{data:et,children:[a.jsx(uT,{strokeDasharray:"3 3",vertical:!1}),a.jsx(xT,{dataKey:"name",tickLine:!1,axisLine:!1,tick:{fontSize:12,fill:"#6b7280"}}),a.jsx(bT,{tickLine:!1,axisLine:!1,label:{value:"Amount",angle:-90,position:"insideLeft",offset:3},domain:[0,G=>Math.ceil(G/50)*50],tick:{fontSize:12,fill:"#6b7280"}}),a.jsx(k2,{cursor:{fill:"rgba(0, 0, 0, 0.15)"},wrapperStyle:{outline:"none",zIndex:9999,pointerEvents:"auto"},contentStyle:{backgroundColor:"#ffffff",border:"2px solid #1f2937",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.2)",zIndex:9999,pointerEvents:"auto"},labelFormatter:G=>`Sales: ${G}`,formatter:(G,J,De)=>{if(!De||!De.payload)return[G,J];const Ve=De.payload,ft=Number(Ve.achievement)||0,bt=Number(Ve.target)||0,jt=Math.max(0,bt-ft),ke=bt>0?(ft/bt*100).toFixed(1):0;return J==="Achieved"?[`${r}${ft.toLocaleString()} (${ke}%)`,"Achieved"]:J==="Remaining"?[`${r}${jt.toLocaleString()}`,"Remaining"]:[G,J]}}),a.jsx(gT,{dataKey:"achievement",stackId:"a",fill:"#10b981",name:"Achieved",label:({x:G,y:J,width:De,value:Ve,payload:ft})=>{if(!ft||ft.target===void 0)return null;const bt=(Ve/ft.target*100).toFixed(0),jt=J-10<0?10:J-10;return a.jsxs("text",{x:G+De/2,y:jt,textAnchor:"middle",fill:"#111827",fontSize:10,fontWeight:500,children:[bt,"%"]})}}),a.jsx(gT,{dataKey:G=>Math.max(0,G.target-G.achievement),stackId:"a",fill:"#e5e7eb",name:"Remaining",radius:[0,4,4,0]})]})})}):a.jsxs("div",{className:"flex flex-col items-center justify-center flex-1 text-gray-400",children:[a.jsx(lse,{size:48,className:"mb-2 opacity-20"}),a.jsx("p",{className:"text-gray-500 font-medium text-center",children:"No sales data available"})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow p-4 md:h-[420px] h-[350px] flex flex-col",children:[a.jsxs("div",{className:"text-center mb-4",children:[a.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Target Distribution by Sales"}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center items-center flex-wrap",children:[a.jsxs("select",{value:oe,onChange:G=>{Z(G.target.value),ve(1)},className:"border border-gray-300 rounded px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"annual",children:"Annual"}),a.jsx("option",{value:"semiannual",children:"Every 6 Months"}),a.jsx("option",{value:"trimester",children:"Every 4 Months"}),a.jsx("option",{value:"quarterly",children:"Quarterly"})]}),oe!=="annual"&&a.jsxs("select",{value:R,onChange:G=>ve(parseInt(G.target.value)),className:"border border-gray-300 rounded px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[oe==="semiannual"&&a.jsxs(a.Fragment,{children:[a.jsx("option",{value:1,children:"Jan - Jun"}),a.jsx("option",{value:2,children:"Jul - Dec"})]}),oe==="trimester"&&a.jsxs(a.Fragment,{children:[a.jsx("option",{value:1,children:"Jan - Apr"}),a.jsx("option",{value:2,children:"May - Aug"}),a.jsx("option",{value:3,children:"Sep - Dec"})]}),oe==="quarterly"&&a.jsxs(a.Fragment,{children:[a.jsx("option",{value:1,children:"Q1 (Jan - Mar)"}),a.jsx("option",{value:2,children:"Q2 (Apr - Jun)"}),a.jsx("option",{value:3,children:"Q3 (Jul - Sep)"}),a.jsx("option",{value:4,children:"Q4 (Oct - Dec)"})]})]})]})]}),Ue.length>0?a.jsx("div",{className:"flex-1 min-h-0 w-full",children:a.jsx(b2,{width:"100%",height:"100%",children:a.jsxs(B3e,{children:[a.jsx(k2,{contentStyle:{backgroundColor:"#fff",border:"1px solid #333",borderRadius:"6px",padding:"10px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",outline:"none"},content:({active:G,payload:J})=>{if(G&&J&&J.length>0){const De=J[0].payload;return a.jsxs("div",{className:"bg-white p-3 border border-gray-300 rounded shadow-lg",children:[a.jsx("p",{className:"text-sm font-semibold text-gray-800",children:De.name}),a.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[a.jsx("span",{className:"font-semibold",children:"Target Amount:"})," ",r,Number(De.targetAmount||0).toLocaleString("en-US",{maximumFractionDigits:0})]}),a.jsxs("p",{className:"text-xs text-purple-600 font-semibold mt-2",children:["Distribution: ",De.percentage,"%"]})]})}return null}}),a.jsx(jK,{data:Ue,dataKey:"targetAmount",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:({name:G,percentage:J,fill:De})=>a.jsxs("text",{fill:De,fontSize:12,fontWeight:600,children:[G.split(" ")[0],": ",J,"%"]}),labelLine:!1,isAnimationActive:!0,animationDuration:800})]})})}):a.jsxs("div",{className:"flex flex-col items-center justify-center flex-1 text-gray-400",children:[a.jsx(uM,{size:48,className:"mb-2 opacity-20"}),a.jsx("p",{className:"text-gray-500 font-medium text-center",children:"No targets data available"})]})]})]}),he&&e.toLowerCase()!=="sales"&&a.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Bt,{className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search targets...",value:p,onChange:G=>x(G.target.value),className:"w-full outline-none"})]})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 font-semibold text-gray-600",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-10",children:a.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:tt.length>0&&tt.every(G=>V.includes(G.id)),onChange:Y})}),a.jsx("th",{className:"py-3 px-4 text-left",children:"User"}),a.jsx("th",{className:"py-3 px-4 text-left",children:"Target Amount"}),a.jsx("th",{className:"py-3 px-4 text-left",children:"Achieved Amount"}),a.jsx("th",{className:"py-3 px-4 text-left",children:"Achievement %"}),a.jsx("th",{className:"py-3 px-4 text-left",children:"Start Date"}),a.jsx("th",{className:"py-3 px-4 text-left",children:"End Date"}),a.jsx("th",{className:"py-3 px-4 text-center w-24",children:V.length>0?a.jsx("button",{onClick:K,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${V.length} selected targets`,children:a.jsx(Wt,{size:18})}):""})]})}),a.jsx("tbody",{children:tt.length>0?tt.map(G=>{const J=Number(G.target_amount)>0?(Number(G.achieved_amount)/Number(G.target_amount)*100).toFixed(1):0;return a.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer border-b border-gray-200",children:[a.jsx("td",{className:"py-3 px-4",onClick:De=>De.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:V.includes(G.id),onChange:()=>te(G.id)})}),a.jsx("td",{className:"py-3 px-4 text-left font-medium",onClick:()=>O(G),children:G.user?`${G.user.first_name} ${G.user.last_name}`:"Unknown"}),a.jsxs("td",{className:"py-3 px-4 text-left",onClick:()=>O(G),children:[r,Number(G.target_amount).toLocaleString()]}),a.jsxs("td",{className:"py-3 px-4 text-left",onClick:()=>O(G),children:[r,Number(G.achieved_amount).toLocaleString()]}),a.jsx("td",{className:"py-3 px-4 text-left",onClick:()=>O(G),children:a.jsxs("span",{className:`px-2 py-1 rounded text-white text-xs font-semibold ${J>=100?"bg-green-500":J>=75?"bg-blue-500":J>=50?"bg-yellow-500":"bg-red-500"}`,children:[J,"%"]})}),a.jsx("td",{className:"py-3 px-4 text-left",onClick:()=>O(G),children:G.start_date}),a.jsx("td",{className:"py-3 px-4 text-left",onClick:()=>O(G),children:G.end_date}),a.jsx("td",{})]},G.id)}):a.jsx("tr",{children:a.jsx("td",{colSpan:"8",className:"py-4 px-4 text-center text-gray-500",children:"No targets found"})})})]})}),a.jsx(Jt,{className:"mt-4",totalItems:lt.length,pageSize:b,currentPage:v,onPrev:()=>w(G=>Math.max(G-1,1)),onNext:()=>w(G=>Math.min(G+1,Ee)),onPageSizeChange:G=>{C(G),w(1)},pageSizeOptions:[10,20,30,40,50],label:"targets"})]}),X==="leaderboard"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm flex flex-wrap gap-4 items-center",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_t,{className:"text-gray-500"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filter by Period:"})]}),a.jsx("select",{value:fe,onChange:G=>Te(Number(G.target.value)),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[...Array(5)].map((G,J)=>{const De=new Date().getFullYear()-J;return a.jsx("option",{value:De,children:De},De)})}),a.jsxs("select",{value:Ye,onChange:G=>{Ae(G.target.value),Je(1)},className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[a.jsx("option",{value:"",children:"All Periods"}),a.jsx("option",{value:"MONTHLY",children:"Monthly"}),a.jsx("option",{value:"QUARTERLY",children:"Quarterly"}),a.jsx("option",{value:"SEMIANNUAL",children:"Semi-Annual"}),a.jsx("option",{value:"ANNUAL",children:"Annual"})]}),Ye==="QUARTERLY"&&a.jsxs("select",{value:Ie,onChange:G=>Je(Number(G.target.value)),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[a.jsx("option",{value:1,children:"Q1"}),a.jsx("option",{value:2,children:"Q2"}),a.jsx("option",{value:3,children:"Q3"}),a.jsx("option",{value:4,children:"Q4"})]}),Ye==="SEMIANNUAL"&&a.jsxs("select",{value:Ie,onChange:G=>Je(Number(G.target.value)),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[a.jsx("option",{value:1,children:"H1 (Jan-Jun)"}),a.jsx("option",{value:2,children:"H2 (Jul-Dec)"})]}),Ye==="MONTHLY"&&a.jsx("select",{value:Ie,onChange:G=>Je(Number(G.target.value)),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((G,J)=>a.jsx("option",{value:J+1,children:G},J))}),a.jsx("button",{onClick:We,className:"bg-blue-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-blue-700",children:"Apply Filter"})]}),Le&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx(gc,{title:"Sales Reps",value:Le.total_sales_reps,icon:a.jsx(La,{size:22}),color:"blue"}),a.jsx(gc,{title:"Met Quota",value:Le.above_target_count,icon:a.jsx(Vd,{size:22}),color:"green"}),a.jsx(gc,{title:"Below Quota",value:Le.below_target_count,icon:a.jsx(zC,{size:22}),color:"orange"}),a.jsx(gc,{title:"Team Achievement",value:`${Le.overall_achievement}%`,icon:a.jsx(Zs,{size:22}),color:"purple"})]}),Fe?a.jsx(zt,{message:"Loading leaderboard..."}):Ne?.entries?.length>0?a.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsxs("h2",{className:"text-lg font-semibold flex items-center",children:[a.jsx(RC,{className:"mr-2 text-yellow-500"}),"Sales Leaderboard",Ne.period_type!=="ALL"&&a.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-500",children:["(",Ne.period_type," ",Ne.period_year,")"]})]})}),a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Rank"}),a.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Sales Rep"}),a.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Role"}),a.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Target"}),a.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Achieved"}),a.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Achievement"}),a.jsx("th",{className:"py-3 px-4 text-center font-semibold text-gray-600",children:"Actions"})]})}),a.jsx("tbody",{children:Ne.entries.map(G=>a.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`inline-flex items-center justify-center w-8 h-8 rounded-full font-bold text-sm ${G.rank===1?"bg-yellow-100 text-yellow-700":G.rank===2?"bg-gray-100 text-gray-700":G.rank===3?"bg-orange-100 text-orange-700":"bg-gray-50 text-gray-600"}`,children:G.rank})}),a.jsx("td",{className:"py-3 px-4 font-medium",children:G.user_name}),a.jsx("td",{className:"py-3 px-4 text-gray-500",children:G.role}),a.jsxs("td",{className:"py-3 px-4 text-right",children:[r,Number(G.target_amount).toLocaleString()]}),a.jsxs("td",{className:"py-3 px-4 text-right",children:[r,Number(G.achieved_amount).toLocaleString()]}),a.jsx("td",{className:"py-3 px-4 text-right",children:a.jsxs("span",{className:`px-2 py-1 rounded text-white text-xs font-semibold ${G.achievement_percentage>=100?"bg-green-500":G.achievement_percentage>=75?"bg-blue-500":G.achievement_percentage>=50?"bg-yellow-500":"bg-red-500"}`,children:[G.achievement_percentage,"%"]})}),a.jsx("td",{className:"py-3 px-4 text-center",children:a.jsx("button",{onClick:()=>{ze(G.user_id),je("history")},className:"text-blue-600 hover:text-blue-800 text-sm",children:"View History"})})]},G.user_id))})]})]}):a.jsxs("div",{className:"bg-white rounded-xl p-8 text-center text-gray-500",children:[a.jsx(RC,{size:48,className:"mx-auto mb-4 opacity-20"}),a.jsx("p",{children:"No leaderboard data available for the selected period."})]}),Le?.needs_attention?.length>0&&a.jsxs("div",{className:"bg-red-50 rounded-xl p-4 border border-red-200",children:[a.jsxs("h3",{className:"text-lg font-semibold text-red-800 mb-3 flex items-center",children:[a.jsx(zC,{className:"mr-2"}),"Needs Attention (Below 50%)"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:Le.needs_attention.map(G=>a.jsxs("div",{className:"bg-white rounded-lg p-3 border border-red-100",children:[a.jsx("p",{className:"font-medium text-gray-800",children:G.user_name}),a.jsx("p",{className:"text-sm text-gray-500",children:G.role}),a.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[a.jsxs("span",{className:"text-red-600 font-semibold",children:[G.achievement_percentage,"%"]}),a.jsxs("span",{className:"text-xs text-gray-500",children:[r,Number(G.remaining_amount).toLocaleString()," remaining"]})]})]},G.user_id))})]})]}),X==="history"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Select Sales Rep to View History:"}),a.jsx("div",{className:"flex gap-4 flex-wrap",children:a.jsxs("select",{onChange:G=>G.target.value&&ze(Number(G.target.value)),className:"border border-gray-300 rounded-lg px-4 py-2 text-sm",value:Be?.user_id||"",children:[a.jsx("option",{value:"",children:"-- Select User --"}),c.map(G=>a.jsxs("option",{value:G.id,children:[G.first_name," ",G.last_name]},G.id))]})})]}),we?a.jsx(zt,{message:"Loading history..."}):Be?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:Be.user_name}),Be.current_period&&Be.previous_period&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Current Period"}),a.jsx("p",{className:"text-xs text-gray-500",children:Be.current_period.period_label}),a.jsxs("p",{className:"text-2xl font-bold text-blue-700 mt-2",children:[Be.current_period.achievement_percentage,"%"]}),a.jsxs("p",{className:"text-sm text-gray-600",children:[r,Number(Be.current_period.achieved_amount).toLocaleString()," / ",r,Number(Be.current_period.target_amount).toLocaleString()]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Previous Period"}),a.jsx("p",{className:"text-xs text-gray-500",children:Be.previous_period.period_label}),a.jsxs("p",{className:"text-2xl font-bold text-gray-700 mt-2",children:[Be.previous_period.achievement_percentage,"%"]}),a.jsxs("p",{className:"text-sm text-gray-600",children:[r,Number(Be.previous_period.achieved_amount).toLocaleString()," / ",r,Number(Be.previous_period.target_amount).toLocaleString()]})]}),a.jsxs("div",{className:`rounded-lg p-4 ${Be.growth_percentage>=0?"bg-green-50":"bg-red-50"}`,children:[a.jsx("p",{className:"text-sm font-medium",style:{color:Be.growth_percentage>=0?"#16a34a":"#dc2626"},children:"Growth"}),a.jsxs("p",{className:`text-2xl font-bold mt-2 flex items-center ${Be.growth_percentage>=0?"text-green-700":"text-red-700"}`,children:[Be.growth_percentage>=0?a.jsx(Vd,{className:"mr-2"}):a.jsx(zC,{className:"mr-2"}),Be.growth_percentage>=0?"+":"",Be.growth_percentage?.toFixed(1),"%"]}),a.jsxs("p",{className:"text-sm text-gray-600",children:[Be.growth_amount>=0?"+":"",r,Number(Be.growth_amount||0).toLocaleString()]})]})]}),Be.periods?.length>0&&a.jsx("div",{className:"h-64",children:a.jsx(b2,{width:"100%",height:"100%",children:a.jsxs(E3e,{data:[...Be.periods].reverse(),children:[a.jsx(uT,{strokeDasharray:"3 3"}),a.jsx(xT,{dataKey:"period_label",tick:{fontSize:12}}),a.jsx(bT,{tick:{fontSize:12}}),a.jsx(k2,{formatter:(G,J)=>[`${r}${Number(G).toLocaleString()}`,J==="achieved_amount"?"Achieved":"Target"]}),a.jsx(vq,{}),a.jsx(mT,{type:"monotone",dataKey:"target_amount",stroke:"#6366f1",name:"Target",strokeWidth:2}),a.jsx(mT,{type:"monotone",dataKey:"achieved_amount",stroke:"#22c55e",name:"Achieved",strokeWidth:2})]})})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsx("h3",{className:"font-semibold",children:"All Historical Periods"})}),a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Period"}),a.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Date Range"}),a.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Target"}),a.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Achieved"}),a.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Achievement"})]})}),a.jsx("tbody",{children:Be.periods.map((G,J)=>a.jsxs("tr",{className:"border-b border-gray-100",children:[a.jsx("td",{className:"py-3 px-4 font-medium",children:G.period_label}),a.jsxs("td",{className:"py-3 px-4 text-gray-500",children:[G.start_date," - ",G.end_date]}),a.jsxs("td",{className:"py-3 px-4 text-right",children:[r,Number(G.target_amount).toLocaleString()]}),a.jsxs("td",{className:"py-3 px-4 text-right",children:[r,Number(G.achieved_amount).toLocaleString()]}),a.jsx("td",{className:"py-3 px-4 text-right",children:a.jsxs("span",{className:`px-2 py-1 rounded text-white text-xs font-semibold ${G.achievement_percentage>=100?"bg-green-500":G.achievement_percentage>=75?"bg-blue-500":G.achievement_percentage>=50?"bg-yellow-500":"bg-red-500"}`,children:[G.achievement_percentage,"%"]})})]},J))})]})]})]}):a.jsxs("div",{className:"bg-white rounded-xl p-8 text-center text-gray-500",children:[a.jsx(Is,{size:48,className:"mx-auto mb-4 opacity-20"}),a.jsx("p",{children:"Select a sales rep to view their historical performance."})]})]})]}),P&&a.jsx(W3e,{target:P,currencySymbol:r,onClose:()=>O(null),onEdit:()=>M(P),onDelete:()=>U(P),canEdit:he}),N&&he&&a.jsx(V3e,{formData:z,users:c,isEditing:A,isSubmitting:_,onChange:be,onClose:()=>S(!1),onSubmit:Se,fiscalSettings:le}),B&&a.jsx(q3e,{...B,loading:F,onConfirm:async()=>{ee(!0),await B.action(),ee(!1),Q(null)},onCancel:()=>Q(null)})]})}function gc({title:e,value:t,icon:n,color:s="blue"}){const r={blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",purple:"bg-purple-100 text-purple-600",orange:"bg-orange-100 text-orange-600"};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200",children:[a.jsx("div",{className:`p-3 rounded-full ${r[s]} mr-4`,children:n}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:e}),a.jsx("p",{className:"text-2xl font-bold",children:t})]})]})}function W3e({target:e,onClose:t,onEdit:n,onDelete:s,canEdit:r,currencySymbol:i}){const l=Number(e.target_amount)>0?(Number(e.achieved_amount)/Number(e.target_amount)*100).toFixed(1):0;return a.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",onClick:t,children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:o=>o.stopPropagation(),children:[a.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-4 rounded-t-xl",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Target Details"}),a.jsx("button",{onClick:t,className:"text-gray-200 hover:text-white transition cursor-pointer",children:a.jsx(Vt,{size:25})})]}),r&&a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:e.user&&`${e.user.first_name} ${e.user.last_name}`})}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 cursor-pointer",onClick:n,children:[a.jsx(nn,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400 cursor-pointer",onClick:s,children:[a.jsx(Wt,{className:"mr-2"}),"Delete"]})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"})]}),a.jsxs("div",{className:"p-4 lg:p-6",children:[a.jsx("div",{className:"flex w-full bg-gray-600 text-white overflow-x-auto",children:a.jsx("button",{className:"flex-1 min-w-[90px] px-4 py-2 lg:text-lg text-sm font-medium text-center text-white",children:"Overview"})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm sm:p-6 lg:p-5 border border-gray-200 text-sm text-gray-700",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-900",children:"Sales Person:"}),a.jsx("p",{children:e.user?`${e.user.first_name} ${e.user.last_name}`:"Unknown"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-900",children:"Target Amount:"}),a.jsxs("p",{className:"text-green-600 font-semibold",children:[i,Number(e.target_amount).toLocaleString()]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-900",children:"Achieved Amount:"}),a.jsxs("p",{className:"text-blue-600 font-semibold",children:[i,Number(e.achieved_amount).toLocaleString()]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-900",children:"Achievement Rate:"}),a.jsxs("p",{className:`font-semibold ${l>=100?"text-green-600":l>=75?"text-blue-600":l>=50?"text-yellow-600":"text-red-600"}`,children:[l,"%"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-900",children:"Start Date:"}),a.jsx("p",{children:e.start_date})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-900",children:"End Date:"}),a.jsx("p",{children:e.end_date})]})]})})]})]})})}function V3e({formData:e,users:t,isEditing:n,isSubmitting:s,onChange:r,onClose:i,onSubmit:l,fiscalSettings:o}){const c=o?.fiscal_start_month||1,d=v=>{const w=v.getFullYear(),b=String(v.getMonth()+1).padStart(2,"0"),C=String(v.getDate()).padStart(2,"0");return`${w}-${b}-${C}`},u=(v,w,b)=>{let C,N;if(v==="MONTHLY")C=new Date(w,b-1,1),N=new Date(w,b,0);else if(v==="QUARTERLY"){const S=(b-1)*3,A=(c-1+S)%12;let k=w;c>1&&(A>=c-1?k=w-1:k=w),C=new Date(k,A,1);const _=(A+2)%12,T=A+2>=12?k+1:k;N=new Date(T,_+1,0)}else if(v==="SEMIANNUAL"){const S=(b-1)*6,A=(c-1+S)%12;let k=w;c>1&&(A>=c-1?k=w-1:k=w),C=new Date(k,A,1);const _=(A+5)%12,T=A+5>=12?k+1:k;N=new Date(T,_+1,0)}else if(v==="ANNUAL"){const S=c-1;let A=c>1?w-1:w;C=new Date(A,S,1);const k=(c-2+12)%12;N=new Date(A+1,k+1,0)}return{startDate:C,endDate:N}},f=v=>{const w=v.target.value;if(r({target:{name:"period_type",value:w}}),w!=="CUSTOM"){const b=e.period_year||new Date().getFullYear(),C=e.period_number||1,{startDate:N,endDate:S}=u(w,b,C);N&&S&&(r({target:{name:"start_date",value:d(N)}}),r({target:{name:"end_date",value:d(S)}}))}},p=v=>{const w=Number(v.target.value);r({target:{name:"period_number",value:w}});const b=e.period_year||new Date().getFullYear(),C=e.period_type;if(C!=="CUSTOM"){const{startDate:N,endDate:S}=u(C,b,w);N&&S&&(r({target:{name:"start_date",value:d(N)}}),r({target:{name:"end_date",value:d(S)}}))}},x=v=>{const w=Number(v.target.value);r({target:{name:"period_year",value:w}});const b=e.period_type,C=e.period_number||1;if(b!=="CUSTOM"){const{startDate:N,endDate:S}=u(b,w,C);N&&S&&(r({target:{name:"start_date",value:d(N)}}),r({target:{name:"end_date",value:d(S)}}))}};return h.useEffect(()=>{if(e.period_type!=="CUSTOM"&&!e.start_date){const v=e.period_year||new Date().getFullYear(),w=e.period_number||1,{startDate:b,endDate:C}=u(e.period_type,v,w);b&&C&&(r({target:{name:"start_date",value:d(b)}}),r({target:{name:"end_date",value:d(C)}}))}},[o]),a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl p-8 relative overflow-y-auto max-h-[90vh]",children:[a.jsx("button",{onClick:i,className:"absolute top-5 right-5",children:a.jsx(Vt,{size:24})}),a.jsx("h2",{className:"text-2xl font-semibold text-center mb-6",children:n?"Edit Target":"Add New Target"}),a.jsxs("form",{onSubmit:l,className:"grid gap-4 text-base",children:[a.jsxs("div",{className:"flex flex-col gap-1 relative",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Assign User"}),a.jsx(G3e,{name:"user_id",items:t,value:e.user_id,onChange:r,getLabel:v=>`${v.first_name} ${v.last_name}`,placeholder:"Search user..."})]}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:"Period Type"}),a.jsx("select",{name:"period_type",value:e.period_type,onChange:f,className:"w-full border text-gray-500 border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400",children:H3e.map(v=>a.jsx("option",{value:v.value,children:v.label},v.value))})]}),e.period_type!=="CUSTOM"&&e.period_type!=="ANNUAL"&&a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:e.period_type==="MONTHLY"?"Month":e.period_type==="QUARTERLY"?"Quarter":"Half"}),a.jsxs("select",{name:"period_number",value:e.period_number,onChange:p,className:"w-full border text-gray-500 border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400",children:[e.period_type==="MONTHLY"&&["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((v,w)=>a.jsx("option",{value:w+1,children:v},w)),e.period_type==="QUARTERLY"&&[1,2,3,4].map(v=>a.jsxs("option",{value:v,children:["Q",v," ",o?.quarters?.[`Q${v}`]?`(${o.quarters[`Q${v}`]})`:""]},v)),e.period_type==="SEMIANNUAL"&&[1,2].map(v=>a.jsxs("option",{value:v,children:["H",v," ",o?.halves?.[`H${v}`]?`(${o.halves[`H${v}`]})`:`(${v===1?"Jan-Jun":"Jul-Dec"})`]},v))]})]}),e.period_type!=="CUSTOM"&&a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:c!==1?"Fiscal Year":"Year"}),a.jsx("select",{name:"period_year",value:e.period_year,onChange:x,className:"w-full border text-gray-500 border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400",children:[...Array(5)].map((v,w)=>{const b=new Date().getFullYear()+1-w;return a.jsx("option",{value:b,children:c!==1?`FY${b}`:b},b)})})]}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:"Target Amount"}),a.jsx("div",{className:"flex justify-center w-full",children:a.jsx("input",{type:"number",name:"target_amount",placeholder:"0.00",value:e.target_amount,onChange:r,required:!0,className:"w-full max-w-md border text-gray-500 border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"})})]}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs("label",{className:"text-sm font-medium text-gray-700 text-left",children:["Start Date ",e.period_type!=="CUSTOM"&&a.jsx("span",{className:"text-gray-400 text-xs",children:"(auto-calculated)"})]}),a.jsx("div",{className:"flex justify-center w-full",children:a.jsx("input",{type:"date",name:"start_date",value:e.start_date,onChange:r,required:!0,className:"w-full max-w-md border text-gray-500 border-gray-300 text-gray-500 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"})})]}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:"End Date"}),a.jsx("div",{className:"flex justify-center w-full",children:a.jsx("input",{type:"date",name:"end_date",value:e.end_date,onChange:r,required:!0,className:"w-full max-w-md border text-gray-500 border-gray-300 text-gray-500 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"})})]}),a.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[a.jsx("button",{type:"button",onClick:i,className:"bg-red-400 text-white px-5 py-2 rounded-lg",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:s,className:"bg-tertiary text-white px-5 py-2 rounded-lg hover:bg-tertiary/90 disabled:opacity-50",children:s?"Saving...":"Save Target"})]})]})]})})}function q3e({title:e,message:t,confirmLabel:n,cancelLabel:s,variant:r,loading:i,onConfirm:l,onCancel:o}){return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:e}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:t}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{onClick:o,disabled:i,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:s}),a.jsx("button",{onClick:l,disabled:i,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${r==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-tertiary/90 border border-tertiary"}`,children:i?"Processing...":n})]})]})})}function Y3e(){const{userRole:e}=zs();return a.jsx(ej,{currentUserRole:e,currentUserId:null})}const GU=[{value:"Product",label:"Product"},{value:"Service",label:"Service"}],W2={id:null,item_type:"Product",name:"",description:"",sku:"",variant:"",unit:"pcs",quantity:1,unit_price:0,discount_percent:0,discount_amount:0,line_total:0,sort_order:0},_y=e=>{const t=parseFloat(e.quantity)||0,n=parseFloat(e.unit_price)||0,s=parseFloat(e.discount_percent)||0,r=t*n,i=r*(s/100),l=r-i;return{discount_amount:i,line_total:l}},pc=(e,t="")=>{const n=parseFloat(e)||0;return`${t}${n.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`};function WU({items:e=[],onChange:t,currencySymbol:n="",readOnly:s=!1,taxRate:r=0,discountType:i=null,discountValue:l=0,onTotalsChange:o}){const[c,d]=h.useState(null),[u,f]=h.useState(null),[p,x]=h.useState(!1),[v,w]=h.useState({...W2});h.useEffect(()=>{if(o){const E=e.reduce((O,B)=>O+(parseFloat(B.line_total)||0),0);let I=0;i==="percentage"&&l?I=E*(parseFloat(l)/100):i==="fixed"&&l&&(I=parseFloat(l));const z=E-I,$=z*(parseFloat(r)/100),P=z+$;o({subtotal:E,discount_amount:I,tax_amount:$,total_amount:P})}},[e,r,i,l,o]);const b=h.useCallback(()=>{if(!v.name.trim()){H.error("Item name is required");return}if(parseFloat(v.unit_price)<=0){H.error("Unit price must be greater than 0");return}if(parseFloat(v.quantity)<=0){H.error("Quantity must be greater than 0");return}const E=_y(v),I={...v,...E,sort_order:e.length};t([...e,I]),w({...W2}),x(!1),H.success("Item added")},[v,e,t]),C=E=>{if(!u){H.error("No item being edited");return}if(!u.name.trim()){H.error("Item name is required");return}if(parseFloat(u.unit_price)<=0){H.error("Unit price must be greater than 0");return}if(parseFloat(u.quantity)<=0){H.error("Quantity must be greater than 0");return}const I=_y(u),z={...u,...I},$=e.map((P,O)=>O===E?z:P);t($),d(null),f(null),H.success("Item updated")},N=h.useCallback(E=>{const I=e.filter((z,$)=>$!==E);I.forEach((z,$)=>{z.sort_order=$}),t(I),H.success("Item removed")},[e,t]),S=h.useCallback((E,I)=>{const z=I==="up"?E-1:E+1;if(z<0||z>=e.length)return;const $=[...e];[$[E],$[z]]=[$[z],$[E]],$.forEach((P,O)=>{P.sort_order=O}),t($)},[e,t]),A=E=>{d(E),f({...e[E]})},k=()=>{d(null),f(null)},_=e.reduce((E,I)=>E+(parseFloat(I.line_total)||0),0),T=(E,I)=>c===I&&!s?a.jsxs("tr",{className:"bg-blue-50",children:[a.jsx("td",{className:"px-3 py-2",children:a.jsx("select",{value:u.item_type,onChange:$=>f(P=>({...P,item_type:$.target.value})),className:"w-full px-2 py-1 border rounded text-sm",children:GU.map($=>a.jsx("option",{value:$.value,children:$.label},$.value))})}),a.jsxs("td",{className:"px-3 py-2",children:[a.jsx("input",{type:"text",value:u.name,onChange:$=>f(P=>({...P,name:$.target.value})),className:"w-full px-2 py-1 border rounded text-sm",placeholder:"Name *"}),a.jsx("input",{type:"text",value:u.variant||"",onChange:$=>f(P=>({...P,variant:$.target.value})),className:"w-full px-2 py-1 border rounded text-sm mt-1",placeholder:"Variant (optional)"})]}),a.jsx("td",{className:"px-3 py-2",children:a.jsx("input",{type:"text",value:u.sku||"",onChange:$=>f(P=>({...P,sku:$.target.value})),className:"w-full px-2 py-1 border rounded text-sm",placeholder:"SKU"})}),a.jsx("td",{className:"px-3 py-2",children:a.jsxs("div",{className:"flex gap-1",children:[a.jsx("input",{type:"number",value:u.quantity,onChange:$=>f(P=>({...P,quantity:$.target.value})),className:"w-16 px-2 py-1 border rounded text-sm text-right",min:"0.01",step:"0.01"}),a.jsx("input",{type:"text",value:u.unit||"",onChange:$=>f(P=>({...P,unit:$.target.value})),className:"w-16 px-2 py-1 border rounded text-sm",placeholder:"Unit"})]})}),a.jsx("td",{className:"px-3 py-2",children:a.jsx("input",{type:"number",value:u.unit_price,onChange:$=>f(P=>({...P,unit_price:$.target.value})),className:"w-24 px-2 py-1 border rounded text-sm text-right",min:"0",step:"0.01"})}),a.jsx("td",{className:"px-3 py-2",children:a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("input",{type:"number",value:u.discount_percent||0,onChange:$=>f(P=>({...P,discount_percent:$.target.value})),className:"w-16 px-2 py-1 border rounded text-sm text-right",min:"0",max:"100",step:"0.01"}),a.jsx("span",{className:"text-sm text-gray-500",children:"%"})]})}),a.jsx("td",{className:"px-3 py-2 text-right font-medium",children:pc(_y(u).line_total,n)}),a.jsx("td",{className:"px-3 py-2",children:a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{type:"button",onClick:()=>C(I),className:"p-1 text-green-600 hover:bg-green-100 rounded",title:"Save",children:a.jsx(XT,{size:16})}),a.jsx("button",{type:"button",onClick:k,className:"p-1 text-gray-600 hover:bg-gray-100 rounded",title:"Cancel",children:a.jsx(Vt,{size:16})})]})})]},E.id||`edit-${I}`):a.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[a.jsx("td",{className:"px-3 py-2",children:a.jsx("span",{className:`inline-block px-2 py-0.5 rounded text-xs font-medium ${E.item_type==="Service"?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:E.item_type})}),a.jsxs("td",{className:"px-3 py-2",children:[a.jsx("div",{className:"font-medium text-gray-900",children:E.name}),E.variant&&a.jsx("div",{className:"text-xs text-gray-500",children:E.variant}),E.description&&a.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:E.description})]}),a.jsx("td",{className:"px-3 py-2 text-gray-600 text-sm",children:E.sku||"-"}),a.jsxs("td",{className:"px-3 py-2 text-center",children:[a.jsx("span",{className:"font-medium",children:parseFloat(E.quantity).toLocaleString()}),E.unit&&a.jsx("span",{className:"text-gray-500 text-sm ml-1",children:E.unit})]}),a.jsx("td",{className:"px-3 py-2 text-right",children:pc(E.unit_price,n)}),a.jsx("td",{className:"px-3 py-2 text-right text-sm",children:parseFloat(E.discount_percent)>0?a.jsxs("span",{className:"text-red-600",children:["-",parseFloat(E.discount_percent).toFixed(1),"%"]}):a.jsx("span",{className:"text-gray-400",children:"-"})}),a.jsx("td",{className:"px-3 py-2 text-right font-medium",children:pc(E.line_total,n)}),!s&&a.jsx("td",{className:"px-3 py-2",children:a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{type:"button",onClick:()=>S(I,"up"),disabled:I===0,className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded disabled:opacity-30",title:"Move up",children:a.jsx(cse,{size:14})}),a.jsx("button",{type:"button",onClick:()=>S(I,"down"),disabled:I===e.length-1,className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded disabled:opacity-30",title:"Move down",children:a.jsx(St,{size:14})}),a.jsx("button",{type:"button",onClick:()=>A(I),className:"p-1 text-blue-600 hover:bg-blue-100 rounded",title:"Edit",children:a.jsx(rn,{size:14})}),a.jsx("button",{type:"button",onClick:()=>N(I),className:"p-1 text-red-600 hover:bg-red-100 rounded",title:"Delete",children:a.jsx(Wt,{size:14})})]})})]},E.id||`row-${I}`);return a.jsxs("div",{className:"border rounded-lg overflow-hidden bg-white",children:[a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-50 border-b",children:[a.jsxs("h3",{className:"font-semibold text-gray-800",children:["Line Items ",e.length>0&&a.jsxs("span",{className:"text-gray-500 font-normal",children:["(",e.length,")"]})]}),!s&&!p&&a.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-1.5 px-3 py-1.5 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition",children:[a.jsx(da,{size:14}),"Add Item"]})]}),p&&!s&&a.jsxs("div",{className:"p-4 bg-blue-50 border-b",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Type"}),a.jsx("select",{value:v.item_type,onChange:E=>w({...v,item_type:E.target.value}),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:GU.map(E=>a.jsx("option",{value:E.value,children:E.label},E.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Name *"}),a.jsx("input",{type:"text",value:v.name,onChange:E=>w({...v,name:E.target.value}),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Product/Service name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"SKU"}),a.jsx("input",{type:"text",value:v.sku,onChange:E=>w({...v,sku:E.target.value}),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Item code"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Variant"}),a.jsx("input",{type:"text",value:v.variant,onChange:E=>w({...v,variant:E.target.value}),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Size, color, etc."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Quantity *"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"number",value:v.quantity,onChange:E=>w({...v,quantity:E.target.value}),className:"w-20 px-3 py-2 border rounded-lg text-sm text-right focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"0.01",step:"0.01"}),a.jsx("input",{type:"text",value:v.unit,onChange:E=>w({...v,unit:E.target.value}),className:"w-20 px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Unit"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Unit Price *"}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:n}),a.jsx("input",{type:"number",value:v.unit_price,onChange:E=>w({...v,unit_price:E.target.value}),className:"w-full pl-8 pr-3 py-2 border rounded-lg text-sm text-right focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"0",step:"0.01"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Discount %"}),a.jsx("input",{type:"number",value:v.discount_percent,onChange:E=>w({...v,discount_percent:E.target.value}),className:"w-full px-3 py-2 border rounded-lg text-sm text-right focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"0",max:"100",step:"0.01"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Line Total"}),a.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded-lg text-sm text-right font-medium",children:pc(_y(v).line_total,n)})]})]}),a.jsxs("div",{className:"mt-3",children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Description (optional)"}),a.jsx("textarea",{value:v.description,onChange:E=>w({...v,description:E.target.value}),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:2,placeholder:"Additional details about this item..."})]}),a.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[a.jsx("button",{onClick:()=>{x(!1),w({...W2})},className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition text-sm",children:"Cancel"}),a.jsx("button",{onClick:b,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition text-sm",children:"Add Item"})]})]}),e.length>0?a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-50 border-b",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600 w-20",children:"Type"}),a.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600",children:"Item"}),a.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600 w-24",children:"SKU"}),a.jsx("th",{className:"px-3 py-2 text-center font-medium text-gray-600 w-28",children:"Qty"}),a.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-600 w-28",children:"Price"}),a.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-600 w-20",children:"Disc."}),a.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-600 w-28",children:"Total"}),!s&&a.jsx("th",{className:"px-3 py-2 w-28"})]})}),a.jsx("tbody",{children:e.map((E,I)=>T(E,I))})]})}):a.jsxs("div",{className:"p-8 text-center text-gray-500",children:[a.jsx("p",{children:"No items added yet."}),!s&&a.jsx("button",{onClick:()=>x(!0),className:"mt-2 text-blue-600 hover:underline text-sm",children:"+ Add your first item"})]}),e.length>0&&a.jsx("div",{className:"border-t bg-gray-50 px-4 py-3",children:a.jsx("div",{className:"flex justify-end",children:a.jsxs("div",{className:"w-64 space-y-1",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),a.jsx("span",{className:"font-medium",children:pc(_,n)})]}),parseFloat(l)>0&&a.jsxs("div",{className:"flex justify-between text-sm text-red-600",children:[a.jsxs("span",{children:["Discount (",i==="percentage"?`${l}%`:"Fixed","):"]}),a.jsxs("span",{children:["-",pc(i==="percentage"?_*(parseFloat(l)/100):parseFloat(l),n)]})]}),parseFloat(r)>0&&a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsxs("span",{className:"text-gray-600",children:["Tax (",r,"%):"]}),a.jsx("span",{children:pc((_-(i==="percentage"?_*(parseFloat(l)/100):parseFloat(l)||0))*(parseFloat(r)/100),n)})]}),a.jsxs("div",{className:"flex justify-between text-base font-semibold pt-1 border-t",children:[a.jsx("span",{children:"Total:"}),a.jsx("span",{children:pc((()=>{let E=0;i==="percentage"&&l?E=_*(parseFloat(l)/100):i==="fixed"&&l&&(E=parseFloat(l));const I=_-E,z=I*(parseFloat(r)/100);return I+z})(),n)})]})]})})})]})}const V2=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],q2={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:"",subtotal:0,tax_rate:0,tax_amount:0,discount_type:"",discount_value:0,discount_amount:0,currency:"PHP",items:[]},wi=e=>{if(!e)return"Draft";const t=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[t]||"Draft"},Y2=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",K3e=e=>{switch(wi(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},Q3e=e=>{switch(wi(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},Ay=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",Jh=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",X3e=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const t=new Date(e);if(isNaN(t.getTime()))return"";const n=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${n}-${s}-${r}`}catch{return""}},K2=(e,t)=>{if(!e||t==null||t==="")return"";const n=Number(t);if(Number.isNaN(n))return"";const s=new Date(e);return isNaN(s.getTime())?"":(s.setDate(s.getDate()+n),s.toISOString().slice(0,10))},VU=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},qU=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},Mv=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},Z3e=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const s of e){const r=localStorage.getItem(s);if(r)try{const i=JSON.parse(r),l=Mv(i);if(l)return l}catch{}}const t=localStorage.getItem("user_id"),n=Mv(t);return n||null},J3e=e=>{if(!e)return"";const n=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(s=>s!=null&&String(s).trim()!=="");return n?String(n):""},eOe=e=>{if(!e)return"";const n=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(s=>s!=null&&String(s).trim()!=="");return n?String(n):""};function tOe(){const e=vt(),t=Yt(),{user:n}=ta(),s=n?.company?.currency||"";h.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[r,i]=h.useState([]),[l,o]=h.useState(!1),[c,d]=h.useState([]),[u,f]=h.useState([]),[p,x]=h.useState([]),[v,w]=h.useState([]),[b,C]=h.useState(null),[N,S]=h.useState(null),[A,k]=h.useState(!1),[_,T]=h.useState(!1),[E,I]=h.useState(!1),[z,$]=h.useState(null),[P,O]=h.useState(!1),[B,Q]=h.useState(null),[F,ee]=h.useState(q2),[V,de]=h.useState(""),[oe,Z]=h.useState("Filter by Status"),[R,ve]=h.useState(null),[X,je]=h.useState(1),[Ne,Oe]=h.useState(10),[Fe,me]=h.useState("Overview"),[Be,Pe]=h.useState("Draft"),[we,ne]=h.useState([]),[Le,pe]=h.useState(null);h.useEffect(()=>{const se=t.state?.quoteID;if(se){pe(se),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(Le&&r.length>0&&!l){const ue=r.find(se=>se.id===Le);ue?S(ue):H.error("Quote not found."),pe(null)}},[Le,p,l]),h.useEffect(()=>{let ue=!0;return(async()=>{const He=Z3e();if(He&&ue){C(He);return}try{const ht=await ie.get("/auth/me"),Ce=Mv(ht?.data);if(Ce&&ue){C(Ce);return}}catch{}try{const ht=await ie.get("/users/me"),Ce=Mv(ht?.data);if(Ce&&ue){C(Ce);return}}catch{}ue&&C(null)})(),()=>{ue=!1}},[]);const le=h.useCallback(ue=>ue&&u.find(He=>String(He.id)===String(ue))?.name||"",[u]),ge=h.useCallback(ue=>{if(!ue)return"";const se=p.find(He=>String(He.id)===String(ue));return se?`${se.first_name} ${se.last_name}`.trim():""},[p]),fe=h.useCallback(ue=>{if(!ue)return"--";const se=c.find(He=>String(He.id)===String(ue));return se?.deal_name||se?.name||`Deal #${VU(ue)}`},[c]),Te=h.useCallback(ue=>{const se=c.find(Ce=>String(Ce.id)===String(ue)),He=J3e(se);let ht=eOe(se);if(!ht&&He){const Ce=p.filter(it=>String(it.account_id||"")===String(He));if(Ce.length>0){const it=[...Ce].sort((Ct,kt)=>{const Ft=`${Ct.first_name||""} ${Ct.last_name||""}`.trim().toLowerCase(),ia=`${kt.first_name||""} ${kt.last_name||""}`.trim().toLowerCase();return Ft.localeCompare(ia)});ht=String(it[0].id)}}if(He&&ht){const Ce=p.find(it=>String(it.id)===String(ht));Ce?.account_id&&String(Ce.account_id)!==String(He)&&(ht="")}return{accountId:He||"",contactId:ht||""}},[c,p]),Ye=h.useCallback(ue=>{if(!ue)return"--";if(ue.deal?.deal_name)return ue.deal.deal_name;if(ue.deal?.name)return ue.deal.name;const se=ue.deal_id||ue.deal?.id;return se?fe(se):"--"},[fe]),Ae=h.useCallback(ue=>{if(!ue)return"--";if(ue.account?.name)return ue.account.name;let se=ue.account_id||ue.account?.id;if(!se){const He=ue.deal_id||ue.deal?.id;He&&(se=Te(He).accountId)}return se?le(se)||`Account #${se}`:"--"},[Te,le]),Ie=h.useCallback(ue=>{if(!ue)return"--";if(ue.contact?.first_name||ue.contact?.last_name)return`${ue.contact?.first_name||""} ${ue.contact?.last_name||""}`.trim()||"--";let se=ue.contact_id||ue.contact?.id;if(!se){const ht=ue.deal_id||ue.deal?.id;ht&&(se=Te(ht).contactId)}return(se?ge(se):"")||(se?`Contact #${se}`:"--")},[Te,ge]),Je=h.useCallback(async(ue=null)=>{o(!0);try{const se=await ie.get("/quotes/admin/fetch-all"),ht=[...Array.isArray(se.data)?se.data:[]].sort((Ce,it)=>{const Ct=Ce?.created_at||Ce?.updated_at||0,kt=it?.created_at||it?.updated_at||0;return new Date(kt)-new Date(Ct)});if(i(ht),ue){const Ce=ht.find(it=>it.id===ue);S(Ce||null)}}catch(se){console.error(se),i([]),se.response?.status===403?H.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):H.error("Failed to fetch quotes. Please try again later.")}finally{o(!1)}},[]),he=h.useCallback(async()=>{try{const ue=await ie.get("/deals/admin/fetch-all");d(Array.isArray(ue.data)?ue.data:[])}catch(ue){console.error(ue),ue.response?.status===403&&H.warn("Unable to load deals (permission denied).")}},[]),Me=h.useCallback(async()=>{try{const ue=await ie.get("/accounts/admin/fetch-all");f(Array.isArray(ue.data)?ue.data:[])}catch(ue){console.error(ue),ue.response?.status===403&&H.warn("Unable to load accounts (permission denied).")}},[]),re=h.useCallback(async()=>{try{const ue=await ie.get("/contacts/admin/fetch-all");x(Array.isArray(ue.data)?ue.data:[])}catch(ue){console.error(ue),ue.response?.status===403&&H.warn("Unable to load contacts (permission denied).")}},[]),Qe=h.useCallback(async()=>{try{const ue=await ie.get("/users/all");w(Array.isArray(ue.data)?ue.data:[])}catch(ue){console.error(ue),ue.response?.status===403&&H.warn("Unable to load users (permission denied).")}},[]);h.useEffect(()=>{Je(),he(),Me(),re(),Qe()},[Je,he,Me,re,Qe]);const We=h.useMemo(()=>{const ue=V.trim().toLowerCase(),se=oe.trim();return r.filter(He=>{const ht=Ye(He),Ce=Ae(He),it=Ie(He),Ct=K2(He.presented_date,He.validity_days),kt=[He.quote_id,ht,Ce,it,He.total_amount?.toString(),He.validity_days?.toString(),He.presented_date?Jh(He.presented_date):"",Ct?Jh(Ct):"",He.assigned_user?.first_name,He.assigned_user?.last_name,He.creator?.first_name,He.creator?.last_name,He.status,He.notes,Ay(He.created_at),Ay(He.updated_at)],Ft=ue===""||kt.some(Rn=>Rn==null?!1:Rn.toString().toLowerCase().includes(ue)),ia=se==="Filter by Status"||wi(He.status)===se;return Ft&&ia})},[r,V,oe,Ye,Ae,Ie]),dt=Math.max(1,Math.ceil(We.length/Ne)||1);h.useEffect(()=>je(1),[V,oe]),h.useEffect(()=>{je(ue=>{const se=Math.max(1,Math.ceil(We.length/Ne)||1);return ue>se?se:ue})},[We.length,Ne]);const ze=h.useMemo(()=>{const ue=(X-1)*Ne;return We.slice(ue,ue+Ne)},[We,X,Ne]),ce=()=>je(ue=>Math.max(ue-1,1)),ye=()=>je(ue=>Math.min(ue+1,dt)),Ue=ue=>{S(ue),me("Overview"),Pe(wi(ue?.status)||"Draft")},et=()=>{S(null),me("Overview")},lt=ue=>{ue.target.id==="quoteModalBackdrop"&&!P&&et()},Ee=h.useCallback(()=>{k(!1),T(!1),Q(null),ee(q2),I(!1)},[]),tt=ue=>{ue.target.id==="modalBackdrop"&&!E&&!P&&Ee()},be=ue=>{const{name:se,value:He}=ue.target;if(se==="deal_id"){const{accountId:ht,contactId:Ce}=Te(He);ee(it=>({...it,deal_id:He,account_id:ht,contact_id:Ce}));return}ee(ht=>({...ht,[se]:He}))},Xe=()=>{ee(q2),T(!1),Q(null),k(!0)},M=ue=>{if(!ue)return;S(null);const se=ue.deal?.id?String(ue.deal.id):ue.deal_id?String(ue.deal_id):"",He=se?Te(se):{accountId:"",contactId:""},ht=ue.account?.id?String(ue.account.id):ue.account_id?String(ue.account_id):He.accountId,Ce=ue.contact?.id?String(ue.contact.id):ue.contact_id?String(ue.contact_id):He.contactId,it=ue.assigned_user?.id?String(ue.assigned_user.id):ue.assigned_to?String(ue.assigned_to):"";ee({deal_id:se,account_id:ht||"",contact_id:Ce||"",total_amount:ue.total_amount?.toString()||"",presented_date:X3e(ue.presented_date),validity_days:ue.validity_days!==null&&ue.validity_days!==void 0?String(ue.validity_days):"",status:wi(ue.status)||"Draft",assigned_to:it,notes:ue.notes||"",subtotal:parseFloat(ue.subtotal)||0,tax_rate:parseFloat(ue.tax_rate)||0,tax_amount:parseFloat(ue.tax_amount)||0,discount_type:ue.discount_type||"",discount_value:parseFloat(ue.discount_value)||0,discount_amount:parseFloat(ue.discount_amount)||0,currency:ue.currency||"PHP",items:Array.isArray(ue.items)?ue.items.map(Ct=>({id:Ct.id,item_type:Ct.item_type||"Product",name:Ct.name||"",description:Ct.description||"",sku:Ct.sku||"",variant:Ct.variant||"",unit:Ct.unit||"pcs",quantity:parseFloat(Ct.quantity)||1,unit_price:parseFloat(Ct.unit_price)||0,discount_percent:parseFloat(Ct.discount_percent)||0,discount_amount:parseFloat(Ct.discount_amount)||0,line_total:parseFloat(Ct.line_total)||0,sort_order:Ct.sort_order||0})):[]}),T(!0),Q(ue.id),k(!0)},U=ue=>{if(ue.target.checked){const se=ze.map(He=>He.id);ne(se)}else ne([])},Y=ue=>{ne(se=>se.includes(ue)?se.filter(He=>He!==ue):[...se,ue])},te=ue=>{if(!ue)return;const se=ue.quote_id||"this quote";$({title:"Delete Quote",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:se}),"? This action cannot be undone."]}),confirmLabel:"Delete Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ue.id,name:se}})},K=async()=>{we.length!==0&&$({title:"Delete Quotes",message:a.jsxs("span",{children:["Are you sure you want to delete"," ",a.jsx("span",{className:"font-semibold",children:we.length})," selected quotes? This action cannot be undone."]}),confirmLabel:`Delete ${we.length} Quote(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",quote_ids:we}})},[Se,G]=h.useState(!1),J=ue=>{if(ue.preventDefault(),G(!0),!b){H.error("Unable to determine current user. Please log in again.");return}if(!F.deal_id){H.error("Deal is required.");return}if(!F.assigned_to){H.error("Assigned To is required.");return}const He=Te(F.deal_id),ht=F.items.map((Ft,ia)=>({item_type:Ft.item_type||"Product",name:Ft.name,description:Ft.description||null,sku:Ft.sku||null,variant:Ft.variant||null,unit:Ft.unit||null,quantity:parseFloat(Ft.quantity)||1,unit_price:parseFloat(Ft.unit_price)||0,discount_percent:parseFloat(Ft.discount_percent)||0,sort_order:Ft.sort_order??ia})),Ce={deal_id:Number(F.deal_id),account_id:He.accountId?Number(He.accountId):null,contact_id:He.contactId?Number(He.contactId):null,subtotal:parseFloat(F.subtotal)||0,tax_rate:parseFloat(F.tax_rate)||0,tax_amount:parseFloat(F.tax_amount)||0,discount_type:F.discount_type||null,discount_value:parseFloat(F.discount_value)||0,discount_amount:parseFloat(F.discount_amount)||0,total_amount:parseFloat(F.total_amount)||0,currency:F.currency||"PHP",presented_date:F.presented_date||null,validity_days:F.validity_days===""?null:Number(F.validity_days),status:F.status||"Draft",assigned_to:F.assigned_to?Number(F.assigned_to):null,notes:F.notes?.trim()||null,items:ht},it=_&&B?"update":"create",Ct=fe(F.deal_id),kt=it==="create"?{...Ce,created_by_id:Number(b)}:Ce;$({title:it==="create"?"Confirm New Quote":"Confirm Update",message:it==="create"?a.jsxs("span",{children:["Are you sure you want to create a quote for"," ",a.jsx("span",{className:"font-semibold",children:Ct}),"?"]}):a.jsxs("span",{children:["Save changes to"," ",a.jsx("span",{className:"font-semibold",children:Ct}),"?"]}),confirmLabel:it==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:it,payload:kt,targetId:B||null,name:Ct}})},De=async()=>{if(!z?.action){$(null);return}const{action:ue}=z,{type:se,payload:He,targetId:ht,name:Ce}=ue;O(!0);try{if(se==="create")I(!0),await ie.post("/quotes/admin",He),H.success("Quote created successfully."),Ee(),await Je();else if(se==="update"){if(!ht)throw new Error("Missing quote identifier for update.");I(!0),await ie.put(`/quotes/admin/${ht}`,He),H.success("Quote updated successfully."),Ee(),await Je(),N?.id===ht&&S(null)}else if(se==="delete"){if(!ht)throw new Error("Missing quote identifier for deletion.");const it=N?.id;ve(ht),await ie.delete(`/quotes/admin/${ht}`),H.success(`Quote "${Ce}" deleted successfully.`),await Je(it&&it!==ht?it:null),it===ht&&S(null)}else se==="bulk-delete"&&(await ie.post("/quotes/admin/bulk-delete",{quote_ids:we}),H.success(`Successfully deleted ${we.length} quotes`),ne([]),await Je())}catch(it){console.error(it);const Ct=se==="create"?"Failed to create quote. Please review the details and try again.":se==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";H.error(Ct),(se==="create"||se==="update")&&I(!1),se==="delete"&&ve(null)}finally{(se==="create"||se==="update")&&I(!1),se==="delete"&&ve(null),O(!1),$(null)}},Ve=()=>{P||$(null)},ft=h.useCallback((ue,se)=>{const He=ue?.deal_id??ue?.deal?.id??"",ht=He?Number(He):null,Ce=ht?Te(String(ht)):{accountId:"",contactId:""},it=ue?.account_id??ue?.account?.id??Ce.accountId??null,Ct=ue?.contact_id??ue?.contact?.id??Ce.contactId??null,kt=ue?.total_amount??0,Ft=ue?.assigned_to??ue?.assigned_user?.id??null;return{deal_id:ht,account_id:it!=null&&String(it).trim()!==""?Number(it):null,contact_id:Ct!=null&&String(Ct).trim()!==""?Number(Ct):null,total_amount:Number(kt),presented_date:ue?.presented_date||null,validity_days:ue?.validity_days===""||ue?.validity_days===void 0||ue?.validity_days===null?null:Number(ue.validity_days),status:se,assigned_to:Ft!=null&&String(Ft).trim()!==""?Number(Ft):null,notes:ue?.notes?.trim()||null}},[Te]),bt=h.useCallback(async()=>{if(!N?.id)return;const ue=wi(Be),se=[ue,ue.toLowerCase()],He=async ht=>ie.patch(`/quotes/admin/${N.id}/status`,{status:ht},{headers:{"Content-Type":"application/json"}});try{let ht=!1;for(const Ce of se)try{await He(Ce),ht=!0;break}catch(it){if(it?.response?.status===422)continue;throw it}if(!ht){const Ce=ft(N,ue);if(!Ce.deal_id){H.error("Cannot update status: missing deal_id on selected quote.");return}if(!Ce.total_amount||Ce.total_amount<=0){H.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await ie.put(`/quotes/admin/${N.id}`,Ce)}H.success(`Quote status updated to ${ue}`),S(null),me("Overview"),await Je()}catch(ht){console.error(ht);const Ce=ht?.response?.data?.message||(ht?.response?.data?.errors?Object.values(ht.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";H.error(Ce)}},[N,Be,Je,ft]),jt=[{label:"Filter by Status",value:"Filter by Status"},...V2.map(ue=>({label:ue.label,value:ue.value}))],ke=z?.action?.type==="delete"?z.action.targetId:null,pt=N&&(R===N.id||ke===N.id),_e=N&&R===N.id,W=N?a.jsx("div",{id:"quoteModalBackdrop",onClick:lt,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:ue=>ue.stopPropagation(),children:[a.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:a.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),a.jsx("button",{onClick:et,className:"text-gray-500 hover:text-white transition cursor-pointer",children:a.jsx(Ha,{size:25})})]})}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:Ye(N)}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${Q3e(N.status)}`,children:Y2(N.status)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>M(N),disabled:P||z?.action?.type==="update"&&z.action.targetId===N.id,children:[a.jsx(nn,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>te(N),disabled:!!pt,children:_e?"Deleting...":a.jsxs(a.Fragment,{children:[a.jsx(Wt,{className:"mr-2"}),"Delete"]})})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-1 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(ue=>a.jsx("button",{onClick:()=>me(ue),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${Fe===ue?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:ue},ue))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[Fe==="Overview"&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Quote ID:"}),a.jsx("p",{children:qU(N.quote_id)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Deal:"}),a.jsx("p",{children:Ye(N)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Account:"}),a.jsx("p",{children:Ae(N)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Contact:"}),a.jsx("p",{children:Ie(N)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Total Amount:"}),a.jsx("p",{children:N.total_amount?`${s}${Number(N.total_amount).toLocaleString()}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Presented Date:"}),a.jsx("p",{children:Jh(N.presented_date)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Validity Days:"}),a.jsx("p",{children:N.validity_days!==null&&N.validity_days!==void 0?N.validity_days:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),a.jsx("p",{children:Jh(K2(N.presented_date,N.validity_days))||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Status:"}),a.jsx("p",{children:Y2(N.status)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:N.assigned_user?`${N.assigned_user.first_name} ${N.assigned_user.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:N.creator?`${N.creator.first_name} ${N.creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:Ay(N.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:Ay(N.updated_at)||"N/A"})]})]}),N.items&&N.items.length>0&&a.jsx("div",{className:"mt-6",children:a.jsx(WU,{items:N.items,onChange:()=>{},currencySymbol:s,readOnly:!0,taxRate:parseFloat(N.tax_rate)||0,discountType:N.discount_type,discountValue:parseFloat(N.discount_value)||0})})]}),Fe==="Notes"&&a.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),a.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:N.notes||"No notes available."})]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Quotes"}}}),children:[a.jsx(_t,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Gt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:Be||wi(N.status)||"Draft",onChange:ue=>Pe(ue.target.value),children:V2.map(ue=>a.jsx("option",{value:ue.value,children:ue.label},ue.value))}),a.jsx("button",{onClick:bt,disabled:wi(Be)===wi(N.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${wi(Be)===wi(N.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,ae=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[l&&a.jsx(zt,{message:"Loading quotes..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(ga,{className:"mr-2 text-blue-600"})," Quotes"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto gap-2",children:a.jsxs("button",{onClick:()=>{Xe(),G(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(da,{className:"mr-2"})," Add Quote"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search quotes",value:V,onChange:ue=>de(ue.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:oe,onChange:ue=>Z(ue.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:jt.map(ue=>a.jsx("option",{value:ue.value,children:ue.label},ue.value))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-12",children:a.jsx("input",{type:"checkbox",checked:ze.length>0&&we.length===ze.length,onChange:U,className:"cursor-pointer"})}),a.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),a.jsx("th",{className:"py-3 px-4",children:"Deal"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Expiry Date"}),a.jsx("th",{className:"py-3 px-4 text-center w-24",children:we.length>0?a.jsx("button",{onClick:K,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${we.length} selected items`,children:a.jsx(Wt,{size:18})}):""})]})}),a.jsx("tbody",{children:l?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"Loading quotes..."})}):We.length>0?ze.map(ue=>{const se=K2(ue.presented_date,ue.validity_days);return a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>Ue(ue),children:[a.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:He=>He.stopPropagation(),children:a.jsx("input",{type:"checkbox",checked:we.includes(ue.id),onChange:()=>Y(ue.id),className:"cursor-pointer"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:qU(ue.quote_id)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"break-words",children:Ye(ue)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-sm text-gray-700 break-words",children:Ae(ue)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"break-words",children:Ie(ue)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-gray-700",children:ue.total_amount?`${s}${Number(ue.total_amount).toLocaleString()}`:"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${K3e(ue.status)}`,children:Y2(ue.status)})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{children:ue.assigned_user?`${ue.assigned_user.first_name} ${ue.assigned_user.last_name}`:"Unassigned"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-gray-500 text-xs",children:Jh(se)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top text-center w-24"})]},ue.id)}):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"No quotes found."})})})]})}),a.jsx(Jt,{className:"mt-4",totalItems:We.length,pageSize:Ne,currentPage:X,onPrev:ce,onNext:ye,onPageSizeChange:ue=>{Oe(ue),je(1)},pageSizeOptions:[10,20,30,40,50],label:"quotes"})]}),$e=A?a.jsx("div",{id:"modalBackdrop",onClick:tt,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:ue=>ue.stopPropagation(),children:[a.jsx("button",{onClick:()=>{Ee(),G(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:E||P,children:a.jsx(Vt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:_?"Edit Quote":"Add New Quote"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:J,children:[a.jsx(QU,{label:"Deal",name:"deal_id",value:F.deal_id,onChange:ue=>{const{accountId:se,contactId:He}=Te(ue);ee(ht=>({...ht,deal_id:ue,account_id:se,contact_id:He}))},items:Array.isArray(c)?c:[],getLabel:ue=>`${VU(ue?.deal_id??"")} ${ue?.name??""}`.trim(),placeholder:"Search deal...",required:!0,isSubmitted:Se,disabled:E||c.length===0,className:"md:col-span-2"}),a.jsx(KU,{label:"Account",value:le(F.account_id)||(F.account_id?`Account #${F.account_id}`:""),disabled:!0}),a.jsx(KU,{label:"Contact",value:ge(F.contact_id)||(F.contact_id?`Contact #${F.contact_id}`:""),disabled:!0}),a.jsx("div",{className:"md:col-span-2 mt-2",children:a.jsx(WU,{items:F.items,onChange:ue=>ee(se=>({...se,items:ue})),currencySymbol:s,readOnly:E,taxRate:F.tax_rate,discountType:F.discount_type,discountValue:F.discount_value,onTotalsChange:ue=>{ee(se=>({...se,subtotal:ue.subtotal,discount_amount:ue.discount_amount,tax_amount:ue.tax_amount,total_amount:ue.total_amount}))}})}),a.jsxs("div",{className:"md:col-span-2 mt-2 p-4 bg-gray-50 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Pricing Settings"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Discount Type"}),a.jsxs("select",{value:F.discount_type||"",onChange:ue=>ee(se=>({...se,discount_type:ue.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",disabled:E,children:[a.jsx("option",{value:"",children:"No Discount"}),a.jsx("option",{value:"percentage",children:"Percentage (%)"}),a.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-600 text-xs mb-1",children:["Discount ",F.discount_type==="percentage"?"%":"Amount"]}),a.jsx("input",{type:"number",value:F.discount_value||"",onChange:ue=>ee(se=>({...se,discount_value:ue.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:F.discount_type==="percentage"?"100":void 0,step:"0.01",disabled:E||!F.discount_type})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Tax Rate (%)"}),a.jsx("input",{type:"number",value:F.tax_rate||"",onChange:ue=>ee(se=>({...se,tax_rate:ue.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:"100",step:"0.01",disabled:E})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Total Amount"}),a.jsxs("div",{className:"w-full bg-gray-100 border border-gray-300 rounded-md px-2 py-1.5 text-sm font-medium",children:[s,parseFloat(F.total_amount||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),a.jsx(YU,{label:"Presented Date",name:"presented_date",type:"date",value:F.presented_date,onChange:be,disabled:E}),a.jsx(YU,{label:"Validity Days",name:"validity_days",type:"number",value:F.validity_days,onChange:be,placeholder:"30",disabled:E}),a.jsx(QU,{label:"Assigned To",value:F.assigned_to||"",onChange:ue=>ee(se=>({...se,assigned_to:ue})),items:Array.isArray(v)?v:[],getLabel:ue=>{const se=`${ue?.first_name??""} ${ue?.last_name??""}`.trim();return se?ue?.role?`${se} (${ue.role})`:se:ue?.email||""},placeholder:"Search assignee...",required:!0,isSubmitted:Se,disabled:E}),a.jsx(aOe,{label:"Status",name:"status",value:F.status,onChange:be,options:V2,required:!0,disabled:E,className:"md:col-span-2"}),a.jsx(sOe,{label:"Notes",name:"notes",value:F.notes,onChange:be,placeholder:"Additional details...",rows:3,disabled:E,className:"md:col-span-2"}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:()=>{Ee(),G(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:E||P,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:E||P,children:E?"Saving...":_?"Update Quote":"Save Quote"})]})]})]})}):null,Ge=z?a.jsx(rOe,{open:!0,title:z.title,message:z.message,confirmLabel:z.confirmLabel,cancelLabel:z.cancelLabel,variant:z.variant,onConfirm:De,onCancel:Ve,loading:P}):null;return a.jsxs(a.Fragment,{children:[N?W:ae,$e,Ge]})}function YU({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,className:c="",isSubmitted:d=!1}){const u=d&&!n?.trim();return a.jsxs("div",{className:c,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function KU({label:e,value:t,className:n="",disabled:s=!0}){return a.jsxs("div",{className:n,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("input",{type:"text",value:t??"",disabled:s,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function aOe({label:e,name:t,value:n,onChange:s,options:r,required:i=!1,disabled:l=!1,className:o=""}){const c=n!=null?String(n):"",u=r.some(f=>String(f.value)===c)?c:"";return a.jsxs("div",{className:o,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:u,onChange:s,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(f=>a.jsx("option",{value:String(f.value??""),children:f.label},f.value??f.label))})]})}function QU({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!n;return a.jsxs("div",{className:o,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(nOe,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:l,hasError:u})]})}function nOe({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,hasError:o=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",w=h.useMemo(()=>{const b=u.trim().toLowerCase();return(b?e.filter(N=>(s(N)||"").toLowerCase().includes(b)):e).slice(0,l)},[e,u,s,l]);return h.useEffect(()=>{const b=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),h.useEffect(()=>{c||f("")},[c]),a.jsxs("div",{ref:p,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:c?u:v,placeholder:r,onFocus:()=>!i&&d(!0),onChange:b=>{f(b.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${o?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:w.length>0?w.map(b=>{const C=String(b.id),N=s(b),S=String(t)===C;return a.jsx("button",{type:"button",onClick:()=>{n(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:N||"--"},C)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function sOe({label:e,name:t,value:n,onChange:s,placeholder:r,rows:i=3,disabled:l=!1,className:o=""}){return a.jsxs("div",{className:o,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:s,placeholder:r,rows:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function rOe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}const tj=[{value:"CEO",label:"CEO"},{value:"Group Manager",label:"Group Manager"},{value:"Manager",label:"Manager"},{value:"Sales",label:"Sales"}],eg={firstName:"",lastName:"",email:"",password:"",role:""},iOe={CEO:"bg-purple-100 text-purple-700",ADMIN:"bg-purple-100 text-purple-700",GROUP_MANAGER:"bg-indigo-100 text-indigo-700",MANAGER:"bg-blue-100 text-blue-700",MARKETING:"bg-yellow-100 text-yellow-700",SALES:"bg-green-100 text-green-700"},al=e=>e?e.toString().trim().replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/\s+/g,"_").toUpperCase():"",lOe=e=>{const t=al(e),n=tj.find(s=>al(s.value)===t);return n?n.value:e||""},jT=e=>{const t=al(e),n=tj.find(s=>al(s.value)===t);return n?n.label:typeof e=="string"?e.toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()):"--"},XU=e=>{if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",","")},Q2=(e,{size:t="sm"}={})=>{const n=al(e),s=iOe[n]||"bg-gray-100 text-gray-700",r=t==="lg"?"px-3 py-1 text-sm":t==="md"?"px-2.5 py-1 text-sm":"px-2 py-1 text-xs";return a.jsx("span",{className:`${r} font-semibold rounded-md inline-flex items-center justify-center ${s}`,children:jT(e)})},oOe=(e,t)=>{const n=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${n}${s}`.toUpperCase()||"U"},ZU=e=>[...e].sort((t,n)=>{const s=t.created_at?new Date(t.created_at).getTime():0;return(n.created_at?new Date(n.created_at).getTime():0)-s});function cOe(){const{user:e,loading:t}=ta(),[n,s]=h.useState([]),[r,i]=h.useState(!1),[l,o]=h.useState(""),[c,d]=h.useState(""),[u,f]=h.useState(null),[p,x]=h.useState(!1),[v,w]=h.useState(!1),[b,C]=h.useState(null),[N,S]=h.useState(eg),[A,k]=h.useState(!1),[_,T]=h.useState(null),[E,I]=h.useState(!1),[z,$]=h.useState(1),[P,O]=h.useState(10),[B,Q]=h.useState("Overview"),[F,ee]=h.useState(""),[V,de]=h.useState(!1),[oe,Z]=h.useState([]),R=al(e?.role),ve=["ADMIN","CEO"].includes(R),X=!t&&ve,je=h.useMemo(()=>{const ce=tj.filter(ye=>al(ye.value)!=="CEO");return[{label:"Filter by Roles",value:""},{label:"CEO",value:"CEO"},...ce]},[]),Ne=h.useCallback(ce=>{ce&&(s(ye=>ye.map(Ue=>Ue.id===ce?{...Ue,highlight:!0}:Ue)),setTimeout(()=>{s(ye=>ye.map(Ue=>Ue.id===ce?{...Ue,highlight:!1}:Ue))},2e3))},[]),Oe=h.useCallback(async()=>{i(!0);try{const ce=await ie.get("/users/all"),ye=Array.isArray(ce.data)?ce.data:[],Ue=ZU(ye);s(Ue),f(et=>et&&(Ue.find(Ee=>Ee.id===et.id)||null)),console.log(ce.data)}catch(ce){console.error("Error fetching users:",ce);const ye=ce.response?.data?.detail||"Failed to load users. Please try again later.";H.error(ye)}finally{i(!1)}},[]);h.useEffect(()=>{!t&&!ve&&e&&H.error("You are not authorized to access User Management.")},[ve,t,e]),h.useEffect(()=>{t||!ve||Oe()},[t,ve,Oe]),h.useEffect(()=>{document.title="Users | Sari-Sari CRM"},[]);const Fe=h.useMemo(()=>{const ce=l.trim().toLowerCase(),ye=al(c);return ZU(n.filter(Ue=>{if(!Ue)return!1;const et=ce===""||[Ue.first_name,Ue.last_name,`${Ue.first_name||""} ${Ue.last_name||""}`,Ue.email,jT(Ue.role)].filter(Boolean).some(Ee=>Ee.toString().toLowerCase().includes(ce)),lt=ye===""||ye==="CEO"&&["CEO","ADMIN"].includes(al(Ue.role))||al(Ue.role)===ye;return et&&lt}))},[n,l,c]),me=Math.max(1,Math.ceil(Fe.length/P)||1);h.useEffect(()=>{$(1)},[l,c,P]),h.useEffect(()=>{$(ce=>{const ye=Math.max(1,Math.ceil(Fe.length/P)||1);return ce>ye?ye:ce})},[Fe.length,P]);const Be=h.useMemo(()=>{const ce=(z-1)*P;return Fe.slice(ce,ce+P)},[Fe,z,P]);Fe.length===0||(z-1)*P+1,Math.min(z*P,Fe.length);const Pe=()=>$(ce=>Math.max(ce-1,1)),we=()=>$(ce=>Math.min(ce+1,me)),ne=()=>{S(eg),w(!1),C(null),x(!0)},Le=ce=>{f(ce),Q("Overview"),ee(ce?.is_active?"Active":"Inactive")},pe=ce=>{ce.target.id==="userModalBackdrop"&&!E&&le()},le=()=>{f(null)},ge=(ce,ye)=>{S(Ue=>({...Ue,[ce]:ye}))},fe=()=>{const ce="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let ye="";for(let Ue=0;Ue<10;Ue+=1)ye+=ce.charAt(Math.floor(Math.random()*ce.length));ge("password",ye)},Te=()=>{A||E||(x(!1),S(eg),C(null),w(!1))},Ye=ce=>{S({firstName:ce.first_name||"",lastName:ce.last_name||"",email:ce.email||"",password:"",role:lOe(ce.role)}),w(!0),C(ce.id),x(!0),f(null)},Ae=ce=>{T({title:"Delete User",message:a.jsxs("span",{children:["Are you sure you want to delete"," ",a.jsxs("span",{className:"font-semibold",children:[ce.first_name," ",ce.last_name]}),"? This action cannot be undone."]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ce.id,name:`${ce.first_name||""} ${ce.last_name||""}`.trim()||ce.email||"user"}})},Ie=ce=>{ce.preventDefault();const ye=N.firstName.trim(),Ue=N.lastName.trim(),et=N.email.trim(),lt=N.password.trim(),Ee=N.role,tt=!(v&&b);if(!ye||!et||!Ee){H.warn("Please fill in all required fields.");return}if(tt&&!lt){H.warn("Please fill in all required fields.");return}if(lt&&lt.length<8){H.warn("Password should be at least 8 characters long.");return}const be={first_name:ye,last_name:Ue,email:et,role:Ee};(tt||lt)&&(be.password=lt);const Xe=`${ye} ${Ue}`.trim(),M=tt?"create":"update";T({title:M==="create"?"Confirm New User":"Confirm User Update",message:M==="create"?a.jsxs("span",{children:["Create user ",a.jsx("span",{className:"font-semibold",children:Xe})," with role"," ",a.jsx("span",{className:"font-semibold",children:jT(Ee)}),"?"]}):a.jsxs("span",{children:["Save changes for"," ",a.jsx("span",{className:"font-semibold",children:Xe||et}),"?"]}),confirmLabel:M==="create"?"Create User":"Update User",cancelLabel:"Cancel",variant:"primary",action:{type:M,payload:be,targetId:b,name:Xe||et}})},Je=async()=>{oe.length!==0&&T({title:"Delete Users",message:a.jsxs("span",{children:["Are you sure you want to deactivate"," ",a.jsx("span",{className:"font-semibold",children:oe.length})," selected users? This action cannot be undone."]}),confirmLabel:`Deactivate ${oe.length} User(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",user_ids:oe}})},he=ce=>{if(ce.target.checked){const ye=Be.map(Ue=>Ue.id);Z(ye)}else Z([])},Me=ce=>{Z(ye=>ye.includes(ce)?ye.filter(Ue=>Ue!==ce):[...ye,ce])},re=async()=>{if(!_?.action){T(null);return}const{action:ce}=_,{type:ye,payload:Ue,targetId:et,name:lt}=ce;I(!0),(ye==="create"||ye==="update")&&k(!0);try{if(ye==="create"){const tt=(await ie.post("/users/createuser",Ue)).data;await Oe(),Ne(tt.id),H.success(`User "${lt}" created successfully.`),x(!1),S(eg),C(null),w(!1)}else if(ye==="update"){if(!et)throw new Error("Missing user identifier for update.");const tt=(await ie.put(`/users/updateuser/${et}`,Ue)).data;await Oe(),f(null),Ne(tt.id),H.success(`User "${lt}" updated successfully.`),x(!1),S(eg),C(null),w(!1)}else if(ye==="delete"){if(!et)throw new Error("Missing user identifier for deletion.");await ie.delete(`/users/deleteuser/${et}`),s(Ee=>Ee.map(tt=>tt.id===et?{...tt,is_active:!1}:tt)),u&&u.id===et&&(f(null),ee("")),H.success(`User "${lt}" deactivated successfully.`)}else ye==="bulk-delete"&&(await ie.delete("/users/admin/bulk-delete",{data:{user_ids:ce.user_ids}}),s(Ee=>Ee.map(tt=>ce.user_ids.includes(tt.id)?{...tt,is_active:!1}:tt)),u&&ce.user_ids.includes(u.id)&&(f(null),ee("")),H.success(`Successfully deactivated ${ce.user_ids.length} users`),Z([]))}catch(Ee){console.error("User management error:",Ee);const tt=ye==="create"?"Failed to create user. Please review the details and try again.":ye==="update"?"Failed to update user. Please review the details and try again.":"Failed to delete user. Please try again.",be=Ee.response?.data?.detail||tt;H.error(be)}finally{(ye==="create"||ye==="update")&&k(!1),I(!1),T(null)}},Qe=()=>{E||T(null)},We=async()=>{if(!u||!F)return;const ce=u.is_active?"Active":"Inactive";if(F===ce)return;const ye=F==="Active";de(!0);try{const et=(await ie.put(`/users/updateuser/${u.id}`,{is_active:ye})).data;s(lt=>lt.map(Ee=>Ee.id===et.id?et:Ee)),f(null),ee(""),H.success(`User status updated to ${F}`)}catch(Ue){console.error("Failed to update user status:",Ue);const et=Ue.response?.data?.detail||"Failed to update user status. Please try again.";H.error(et)}finally{de(!1)}},dt=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[(r||t||!X)&&a.jsx(zt,{}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(lw,{className:"mr-2 text-blue-600"}),"User Management"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{type:"button",onClick:ne,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(Ba,{className:"mr-2"})," Add User"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search users",value:l,onChange:ce=>o(ce.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:c,onChange:ce=>d(ce.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:je.map(ce=>a.jsx("option",{value:ce.value,children:ce.label},ce.value))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-10",children:a.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:Be.length>0&&Be.every(ce=>oe.includes(ce.id)),onChange:he})}),a.jsx("th",{className:"py-3 px-4",children:"Fullname"}),a.jsx("th",{className:"py-3 px-4",children:"Email"}),a.jsx("th",{className:"py-3 px-4",children:"Role"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4 text-center w-24",children:oe.length>0?a.jsx("button",{onClick:Je,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Deactivate ${oe.length} selected users`,children:a.jsx(Wt,{size:18})}):""})]})}),a.jsx("tbody",{children:r?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:3,children:"Loading users..."})}):Fe.length===0?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-400",colSpan:4,children:"No users found."})}):Be.map(ce=>a.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${ce.highlight?"bg-green-50":""} ${ce.is_active?"":"opacity-60 bg-gray-50"}`,children:[a.jsx("td",{className:"py-3 px-4",onClick:ye=>ye.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:oe.includes(ce.id),onChange:()=>Me(ce.id)})}),a.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>Le(ce),children:a.jsxs("div",{className:"font-medium text-blue-600 hover:underline text-sm",children:[ce.first_name," ",ce.last_name]})}),a.jsx("td",{className:"py-3 px-4 cursor-pointer text-sm",onClick:()=>Le(ce),children:ce.email}),a.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>Le(ce),children:Q2(ce.role)}),a.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>Le(ce),children:a.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-md ${ce.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:ce.is_active?"Active":"Inactive"})})]},ce.id))})]})}),a.jsx(Jt,{className:"mt-4",totalItems:Fe.length,pageSize:P,currentPage:z,onPrev:Pe,onNext:we,onPageSizeChange:ce=>{O(ce),$(1)},label:"users"})]}),ze=u?a.jsx("div",{id:"userModalBackdrop",onClick:pe,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in p-4 sm:p-6 md:p-8 font-inter relative",children:[a.jsx("div",{className:"flex justify-end w-full",children:a.jsx("button",{onClick:le,className:"text-gray-500 hover:text-gray-700 transition mb-5 cursor-pointer",children:a.jsx(Ha,{size:30})})}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7 mb-4 lg:mb-6 md:mb-4",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[u.profile_picture?a.jsx("img",{src:u.profile_picture,alt:`${u.first_name} ${u.last_name}`,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover border border-gray-200 shadow-sm"}):a.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-200 text-gray-700 flex items-center justify-center text-lg sm:text-xl font-semibold border border-gray-200 shadow-sm",children:oOe(u.first_name,u.last_name)}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[u.first_name," ",u.last_name]}),a.jsx("p",{className:"text-sm text-gray-500 break-all",children:u.email})]})]}),Q2(u.role,{size:"md"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Ye(u),disabled:E,children:[a.jsx(rn,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>Ae(u),disabled:E,children:[a.jsx(Wt,{className:"mr-2"}),"Delete"]})]})]}),a.jsx("div",{className:"border-b border-gray-200 mb-6"}),a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview"].map(ce=>a.jsx("button",{onClick:()=>Q(ce),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${B===ce?"bg-[#5c636d] text-white border-white":"text-white hover:bg-[#5c636d]"}`,children:ce},ce))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsx("div",{className:"lg:col-span-3",children:B==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:u.email||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Role:"}),a.jsx("p",{children:Q2(u.role,{size:"sm"})})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Status:"}),a.jsx("p",{children:u.is_active?"Active":"Inactive"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Auth Provider:"}),a.jsx("p",{children:u.auth_provider?u.auth_provider.toString().replace(/\b\w/g,ce=>ce.toUpperCase()):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Phone Number:"}),a.jsx("p",{children:u.phone_number||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Company:"}),a.jsx("p",{children:u.company?.company_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Company Number:"}),a.jsx("p",{children:u.company?.company_number||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Related to CEO:"}),a.jsx("p",{children:u.manager?`${u.manager.first_name} ${u.manager.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:XU(u.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Login:"}),a.jsx("p",{children:u.last_login?XU(u.last_login):"Never"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Profile Picture:"}),a.jsx("p",{children:u.profile_picture?a.jsx("a",{href:u.profile_picture,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline break-all",children:"View image"}):"N/A"})]})]})})}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsx("div",{className:"flex flex-col gap-2 w-full",children:a.jsxs("button",{type:"button",onClick:()=>{if(!u.email){alert("No email address available");return}const ce=encodeURIComponent(u.email),ye=encodeURIComponent(""),Ue=encodeURIComponent(""),et=`https://mail.google.com/mail/?view=cm&fs=1&to=${ce}&su=${ye}&body=${Ue}`;window.open(et,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Ka,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]})})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:F||(u.is_active?"Active":"Inactive"),onChange:ce=>ee(ce.target.value),children:[a.jsx("option",{value:"Active",children:"Active"}),a.jsx("option",{value:"Inactive",children:"Inactive"})]}),a.jsx("button",{onClick:We,disabled:V||F===(u.is_active?"Active":"Inactive"),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${V||F===(u.is_active?"Active":"Inactive")?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:V?"Updating...":"Update"})]})]})]})]})}):null;return a.jsxs(a.Fragment,{children:[dt,ze,a.jsx(dOe,{open:p,isEditing:v,isSubmitting:A,confirmProcessing:E,formData:N,onClose:Te,onSubmit:Ie,onChange:ge,onGeneratePassword:fe}),a.jsx(uOe,{open:!!_,title:_?.title,message:_?.message,confirmLabel:_?.confirmLabel,cancelLabel:_?.cancelLabel,variant:_?.variant,loading:E,onConfirm:re,onCancel:Qe})]})}function dOe({open:e,isEditing:t,isSubmitting:n,confirmProcessing:s,formData:r,onClose:i,onSubmit:l,onChange:o,onGeneratePassword:c}){if(!e)return null;const d=n||s;return a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-lg border border-gray-200 p-6 sm:p-8 relative overflow-y-auto max-h-[90vh]",children:[a.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:d,children:a.jsx(Vt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-6 text-center",children:t?"Edit User":"Add New User"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:l,children:[a.jsx(Ey,{label:"First Name",value:r.firstName,onChange:u=>o("firstName",u),placeholder:"John",required:!0,disabled:d}),a.jsx(Ey,{label:"Last Name",value:r.lastName,onChange:u=>o("lastName",u),placeholder:"Doe",required:!0,disabled:d}),a.jsx(Ey,{label:"Email",type:"email",value:r.email,onChange:u=>o("email",u),placeholder:"john.doe@company.com",required:!0,disabled:d||t}),a.jsx(Ey,{label:"Role",type:"select",value:r.role,onChange:u=>o("role",u),options:[{value:"",label:"Select role"},...tj],required:!0,disabled:d}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Password"}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[a.jsx("input",{type:"text",value:r.password,onChange:u=>o("password",u.target.value),placeholder:t?"Leave blank to keep current password":"Enter or generate password",required:!t,disabled:d,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"}),a.jsx("button",{type:"button",onClick:c,className:"flex items-center justify-center px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-60",disabled:d,children:"Generate"})]}),t?a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Setting a password will reset the user's credentials; leave it blank to keep the current password."}):a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long."})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:i,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:d,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:d,children:n?"Saving...":t?"Update User":"Save User"})]})]})]})})}function Ey({label:e,type:t="text",value:n,onChange:s,placeholder:r,options:i=[],required:l=!1,disabled:o=!1}){return a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t==="select"?a.jsx("select",{value:n??"",onChange:c=>s(c.target.value),required:l,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100",children:i.map(c=>a.jsx("option",{value:c.value,children:c.label},c.value))}):a.jsx("input",{type:t,value:n??"",onChange:c=>s(c.target.value),placeholder:r,required:l,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"})]})}function uOe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-black hover:bg-gray-800 border border-black";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("div",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}const mOe=(e,t)=>{const n=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${n}${s}`.toUpperCase()||"U"};function fOe(){const{user:e,loading:t,fetchUser:n}=ta(),[s,r]=h.useState(!1),[i,l]=h.useState(!1),[o,c]=h.useState(!1),[d,u]=h.useState(!1),[f,p]=h.useState(!1),[x,v]=h.useState(null),[w,b]=h.useState(null),C=h.useRef(null),[N,S]=h.useState({firstName:"",lastName:"",email:"",phoneNumber:""}),[A,k]=h.useState({currentPassword:"",newPassword:"",confirmPassword:""});h.useEffect(()=>{e&&(S({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),b(e.profile_picture||null))},[e]),h.useEffect(()=>{document.title="Manage Account | Sari-Sari CRM"},[]);const _=($,P)=>{S(O=>({...O,[$]:P}))},T=($,P)=>{k(O=>({...O,[$]:P}))},E=$=>{const P=$.target.files?.[0];if(!P)return;if(!P.type.startsWith("image/")){H.error("Please select an image file");return}if(P.size>5*1024*1024){H.error("Image size should be less than 5MB");return}const O=new FileReader;O.onloadend=()=>{v(O.result),b(O.result)},O.readAsDataURL(P)},I=async $=>{if($.preventDefault(),!N.firstName.trim()||!N.lastName.trim()){H.warn("Please fill in all required fields.");return}r(!0);try{const P={first_name:N.firstName.trim(),last_name:N.lastName.trim(),phone_number:N.phoneNumber.trim()||null};x!==null&&(P.profile_picture=x),await ie.put("/users/me",P),await n(),l(!1),v(null),window.dispatchEvent(new CustomEvent("userProfileUpdated")),H.success("Account information updated successfully!")}catch(P){console.error("Error updating account:",P);const O=P.response?.data?.detail||"Failed to update account information. Please try again.";H.error(O)}finally{r(!1)}},z=async $=>{if($.preventDefault(),!A.newPassword||!A.confirmPassword){H.warn("Please fill in all password fields.");return}if(A.newPassword.length<8){H.warn("Password must be at least 8 characters long.");return}if(A.newPassword!==A.confirmPassword){H.warn("New password and confirm password do not match.");return}p(!0);try{const P={password:A.newPassword};await ie.put("/users/me",P),await n(),k({currentPassword:"",newPassword:"",confirmPassword:""}),window.dispatchEvent(new CustomEvent("userProfileUpdated")),p(!1),H.success("Password changed successfully!")}catch(P){console.error("Error changing password:",P);const O=P.response?.data?.detail||"Failed to change password. Please try again.";H.error(O)}finally{p(!1)}};return a.jsxs("div",{className:"p-2 lg:p-8 font-inter relative",children:[(t||!e)&&a.jsx(zt,{}),e&&a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-gray-800 mb-2",children:"Manage Your Account"}),a.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Update your account information and change your password"})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mb-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:[a.jsx(Zt,{className:"text-blue-600"}),"Profile Information"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:!i&&a.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition text-sm",children:[a.jsx(rn,{}),"Edit Profile"]})})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 mb-6 pb-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex-shrink-0 relative group",children:[w?a.jsx("div",{className:"relative",children:a.jsx("img",{src:w,alt:`${e.first_name} ${e.last_name}`,className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full object-cover border-2 border-gray-200 shadow-sm"})}):a.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 text-white flex items-center justify-center text-2xl sm:text-3xl font-semibold border-2 border-gray-200 shadow-sm",children:mOe(e.first_name,e.last_name)}),i&&a.jsxs("div",{className:"absolute bottom-0 right-0",children:[a.jsx("input",{type:"file",ref:C,accept:"image/*",onChange:E,className:"hidden",id:"profile-picture-upload"}),a.jsx("label",{htmlFor:"profile-picture-upload",className:"cursor-pointer bg-gray-900 text-white p-1.5 rounded-full shadow-lg hover:bg-gray-800 transition flex items-center justify-center border-2 border-white",title:"Change profile picture",children:a.jsx(wB,{size:14})})]})]}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[i?N.firstName:e.first_name," ",i?N.lastName:e.last_name]}),a.jsx("p",{className:"text-gray-600 text-sm",children:e.email}),a.jsx("span",{className:"inline-block mt-2 px-3 py-1 bg-blue-100 text-blue-700 text-xs font-semibold rounded-md",children:e.role})]})]}),i?a.jsxs("form",{onSubmit:I,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["First Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Zt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",value:N.firstName,onChange:$=>_("firstName",$.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Last Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Zt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",value:N.lastName,onChange:$=>_("lastName",$.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),a.jsxs("div",{className:"sm:col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Email"}),a.jsxs("div",{className:"relative",children:[a.jsx(Ka,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"email",value:N.email,disabled:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-600 cursor-not-allowed outline-none",readOnly:!0})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),a.jsxs("div",{className:"sm:col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Phone Number"}),a.jsxs("div",{className:"relative",children:[a.jsx(Et,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"tel",value:N.phoneNumber,onChange:$=>_("phoneNumber",$.target.value),placeholder:"+1 (555) 123-4567",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t border-gray-200",children:[a.jsx("button",{type:"button",onClick:()=>{l(!1),S({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),v(null),b(e.profile_picture||null),C.current&&(C.current.value="")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition",disabled:s,children:"Cancel"}),a.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:s,children:[a.jsx(JT,{}),s?"Saving...":"Save Changes"]})]})]}):a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"First Name"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.first_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Name"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.last_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Email"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.email||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Phone Number"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.phone_number||"N/A"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[a.jsx(rl,{className:"text-blue-600"}),"Change Password"]}),a.jsxs("form",{onSubmit:z,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["New Password ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(rl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",style:o?void 0:{WebkitTextSecurity:"disc"},value:A.newPassword,onChange:$=>T("newPassword",$.target.value),placeholder:"Enter new password (min. 8 characters)",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),a.jsx("button",{type:"button",onClick:()=>c($=>!$),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":o?"Hide password":"Show password",children:o?a.jsx(su,{className:"size-5"}):a.jsx(ru,{className:"size-5"})})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Confirm New Password ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(rl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",style:d?void 0:{WebkitTextSecurity:"disc"},value:A.confirmPassword,onChange:$=>T("confirmPassword",$.target.value),placeholder:"Confirm new password",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),a.jsx("button",{type:"button",onClick:()=>u($=>!$),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":d?"Hide password":"Show password",children:d?a.jsx(su,{className:"size-5"}):a.jsx(ru,{className:"size-5"})})]})]}),a.jsx("div",{className:"pt-4 border-t border-gray-200 flex justify-center lg:justify-start",children:a.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:f,children:[a.jsx(rl,{}),f?"Changing Password...":"Change Password"]})})]})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mt-6",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[a.jsx(NB,{className:"text-blue-600"}),"Account Information"]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Role"}),a.jsx("span",{className:"inline-block px-3 py-1 bg-blue-100 text-blue-700 text-sm font-semibold rounded-md",children:e.role})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Status"}),a.jsx("span",{className:`inline-block px-3 py-1 text-sm font-semibold rounded-md ${e.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:e.is_active?"Active":"Inactive"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Company"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.company?.company_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Auth Provider"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.auth_provider?e.auth_provider.charAt(0).toUpperCase()+e.auth_provider.slice(1):"N/A"})]}),e.created_at&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Account Created"}),a.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),e.last_login&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Login"}),a.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.last_login).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})})]})]})]})]})]})}function iQ({selectedDeal:e,onStatusUpdate:t,onClose:n}){const[s,r]=h.useState(e?.stage||""),[i,l]=h.useState(!1),o=vt(),c=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}];h.useEffect(()=>{e?.stage&&r(e.stage)},[e]);const d=async()=>{if(!e||!e.id){H.error("No deal selected");return}if(!s||s===e.stage){H.info("Please select a different stage");return}const u=e.id;l(!0);try{await ie.put(`/deals/admin/${u}`,{stage:s}),n&&n(),t&&setTimeout(async()=>{await t(!0)},100),setTimeout(()=>{H.success("Deal status updated successfully")},300)}catch(f){console.error(f);const p=f.response?.data?.detail||"Failed to update deal status";H.error(p)}finally{l(!1)}};return e?a.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>{const u=e.account?.id||e.account_id;o("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:e.title?`Call regarding: ${e.title}`:"",relatedType1:"Account",relatedTo1:u,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const u=encodeURIComponent(e.contact.email),f=encodeURIComponent(""),p=encodeURIComponent(""),x=`mailto:${u}?subject=${f}&body=${p}`;window.location.href=x},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Ka,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{const u=e.account?.id||e.account_id;o("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{title:e.title?`Meeting: ${e.title}`:"",relatedType1:"Account",relatedTo1:u,relatedType2:"Deal",relatedTo2:e.id}}})},children:[a.jsx(_t,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>{const u=e.account?.id||e.account_id;o("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{title:e.title?`Task for: ${e.title}`:"",relatedType1:"Account",relatedTo1:u,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Gt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:s,onChange:u=>r(u.target.value),disabled:i,children:c.map(u=>a.jsx("option",{value:u.value,children:u.label},u.value))}),a.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:d,disabled:i||!s||s===e.stage,children:i?"Updating...":"Update"})]})]}):null}function kx({selectedDeal:e,show:t,onClose:n,activeTab:s,setActiveTab:r,onEdit:i,onDelete:l,onStatusUpdate:o,relatedActs:c}){const d=vt(),[u]=ks(),f=u.get("id"),[p,x]=h.useState(e||null),[v,w]=h.useState(s||"Overview"),[b,C]=h.useState(null),[N,S]=h.useState(""),{userRole:A}=zs(),k=s!==void 0?s:v;if(h.useEffect(()=>{A.toLowerCase()==="ceo"||A.toLowerCase()==="admin"?S("admin"):A.toLowerCase()==="group manager"||A.toLowerCase()==="group_manager"?S("group-manager"):A.toLowerCase()==="manager"?S("manager"):A.toLowerCase()==="sales"?S("sales"):S("guest")},[A]),h.useEffect(()=>{(async()=>{if(f&&!e)try{const $=((await ie.get("/deals/admin/fetch-all")).data||[]).find(P=>P.id===parseInt(f));if($){const P={...$,amount:typeof $.amount=="number"?$.amount:parseFloat($.amount||0),probability:$.probability||0};x(P)}else console.warn("Deal not found with ID:",f)}catch(I){console.error("Error fetching deal:",I)}})()},[f,e]),!p&&!f||f&&!p)return null;const _=E=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[E]||"bg-gray-100 text-gray-700";function T(E){return E?new Date(E).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:a.jsxs("div",{className:"flex items-start justify-between w-full",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),a.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:a.jsx("button",{onClick:()=>{n?n():d(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:a.jsx(Vt,{size:25})})})]})}),a.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:a.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[a.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:p.name}),a.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${_(p.stage)}`,children:p.stage})]}),a.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",T(p.created_at)]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-2",children:[a.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[""," ",p.amount?p.amount.toLocaleString():"0"]}),a.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${p.probability}%`}})}),a.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",p.probability,"% Complete"," "]}),a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[a.jsxs("button",{type:"button",onClick:()=>{i&&i(p)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[a.jsx(rn,{className:"mr-1 sm:mr-2",size:16}),a.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),a.jsxs("button",{type:"button",onClick:()=>{l&&l(p)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[a.jsx(Wt,{className:"mr-1 sm:mr-2",size:16}),a.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(E=>a.jsx("button",{onClick:()=>{r?r(E):w(E)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${k===E?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:E},E))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[k==="Overview"&&a.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),a.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[a.jsx("strong",{children:"Description:"})," ",p.description]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[a.jsx("strong",{children:"Expected Close Date:"})," ",p.close_date]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("div",{className:"mt-4 py-3 w-full",children:[a.jsxs("div",{className:"relative flex flex-col w-full",children:[a.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const E=(p?.stage||"PROSPECTING").toUpperCase(),z=(P=>P==="PROSPECTING"?0:P==="QUALIFICATION"?1:P==="PROPOSAL"?2:P==="NEGOTIATION"?3:P==="CLOSED_WON"||P==="CLOSED_LOST"?4:-1)(E);return[0,1,2,3,4].map(P=>z===P?"orange":z>P?"green":"gray").map((P,O)=>a.jsxs(wt.Fragment,{children:[a.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${P==="green"?"bg-green-500 border-green-500":P==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),O<4&&a.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},O))})()}),a.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((E,I)=>a.jsx("span",{className:"text-center flex-1 break-words",children:E},I))})]}),a.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:p.stage})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),a.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Account:"})," ",p.account?.name]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Primary Contact:"})," ",p.contact?.first_name," ",p.contact?.last_name]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Phone:"})," ",p.contact?.work_phone]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Email:"})," ",p.contact?.email]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Assigned To:"})," ",p.assigned_deals?.first_name," ",p.assigned_deals?.last_name]})]})]})]}),k==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:p.description||"No notes available."})]})]}),s==="Activities"&&a.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[c.tasks&&c.tasks.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>C(b==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Gt,{className:"text-blue-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",c.tasks.length,")"]})]}),b==="tasks"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),b==="tasks"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:c.tasks.map((E,I)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>d(`/${N}/tasks`,{state:{taskID:E.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-blue-600 mt-1",children:a.jsx(Gt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:E.subject||E.title||"Task"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:E.description||"No description"}),E.assigned_to&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",E.assigned_to.first_name," ",E.assigned_to.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:T(E.due_date||E.created_at)})]},`task-${I}`))})]}),c.meetings&&c.meetings.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>C(b==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_t,{className:"text-green-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",c.meetings.length,")"]})]}),b==="meetings"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),b==="meetings"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:c.meetings.map((E,I)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>d(`/${N}/meetings`,{state:{meetingID:E.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-green-600 mt-1",children:a.jsx(_t,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:E.subject||E.title||"Meeting"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:E.description||E.location||"No description"}),E.host&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",E.host.first_name," ",E.host.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:T(E.start_time||E.created_at)})]},`meeting-${I}`))})]}),c.calls&&c.calls.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>C(b==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Et,{className:"text-purple-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",c.calls.length,")"]})]}),b==="calls"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),b==="calls"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:c.calls.map((E,I)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>d(`/${N}/calls`,{state:{callID:E.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-purple-600 mt-1",children:a.jsx(Et,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:E.subject||E.title||"Call"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:E.direction||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:T(E.call_time||E.created_at)})]},`call-${I}`))})]}),c.quotes&&c.quotes.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>C(b==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ga,{className:"text-orange-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",c.quotes.length,")"]})]}),b==="quotes"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),b==="quotes"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:c.quotes.map((E,I)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>d(`/${N}/quotes`,{state:{quoteID:E.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-orange-600 mt-1",children:a.jsx(ga,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(E.quote_id?E.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:E.status||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:T(E.presented_date)||""})]},`quote-${I}`))})]}),(!c||(!c.tasks||c.tasks.length===0)&&(!c.meetings||c.meetings.length===0)&&(!c.calls||c.calls.length===0)&&(!c.quotes||c.quotes.length===0)&&(!c.deals||c.deals.length===0)&&(!c.contacts||c.contacts.length===0))&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No related activities found for this account."})})]})]}),k==="Edit"&&a.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[a.jsxs("label",{className:"block mb-3 break-words",children:[a.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),a.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:p.name})]}),a.jsxs("label",{className:"block mb-3 break-words",children:[a.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),a.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:p.description})]}),a.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),a.jsx("div",{className:"w-full lg:w-auto",children:a.jsx(iQ,{selectedDeal:p,onStatusUpdate:o,onClose:n})})]})]})]})})}function hOe(){h.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const e=vt(),t=Yt(),[n,s]=h.useState(""),[r,i]=h.useState("Filter by Stage"),[l,o]=h.useState("Filter by Owner"),[c,d]=h.useState(null),[u,f]=h.useState("Overview"),[p,x]=h.useState(!1),[v,w]=h.useState(null),[b,C]=h.useState(!1),[N,S]=h.useState(1),[A,k]=h.useState(10),[_,T]=h.useState(!1),[E,I]=h.useState(null),[z,$]=h.useState(!1),[P,O]=h.useState([]),[B,Q]=h.useState(!1),[F,ee]=h.useState(null),[V,de]=h.useState([]),[oe,Z]=h.useState([]),[R,ve]=h.useState([]),[X,je]=h.useState({}),[Ne,Oe]=h.useState(null);h.useEffect(()=>{const Y=t.state,te=Y?.dealID;if(te&&!Y?.openDealModal){Oe(te),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(Ne&&v?.length>0&&!b){const Y=v.find(te=>te.id===Ne);Y?d(Y):H.error("Deal not found."),Oe(null)}},[Ne,v,b]);const[Fe,me]=h.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),Be={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST","Closed Cancelled Stage":"CLOSED_CANCELLED"},Pe=Y=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost",CLOSED_CANCELLED:"Closed Cancelled"})[Y]||Y||"--",we=Y=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700",CLOSED_CANCELLED:"bg-red-100 text-red-700"})[Y]||"bg-gray-100 text-gray-700",ne=h.useCallback(async Y=>{try{const te=await ie.get(`/activities/deal/${Y}`);je(te.data&&typeof te.data=="object"?te.data:{})}catch(te){console.error(te),te.response?.status===404&&(console.warn("No activities found for this account."),je({}))}},[]),Le=h.useMemo(()=>{const Y=n.trim().toLowerCase(),te=r.trim(),K=l.trim();return(v??[]).filter(Se=>{const G=[Se?.name,Se?.description,Se?.account?.name,Se?.contact?.first_name,Se?.contact?.last_name,Se?.assigned_deals?.first_name,Se?.assigned_deals?.last_name],J=Y===""||G.some(ft=>ft==null||ft===""?!1:ft.toString().toLowerCase().includes(Y)),De=te==="Filter by Stage"||te===""||Se.stage===Be[te]||Se.stage===te,Ve=K==="Filter by Owner"||K===""||`${Se.assigned_deals?.first_name||""} ${Se.assigned_deals?.last_name||""}`.trim().toLowerCase()===K.toLowerCase();return J&&De&&Ve})},[v,n,r,l]),pe=Math.max(1,Math.ceil(Le.length/A)||1);h.useEffect(()=>{S(1)},[n,r,l,A]),h.useEffect(()=>{S(Y=>{const te=Math.max(1,Math.ceil(Le.length/A)||1);return Y>te?te:Y})},[Le.length,A]);const le=h.useMemo(()=>{const Y=(N-1)*A;return Le.slice(Y,Y+A)},[Le,N,A]),ge=()=>S(Y=>Math.max(Y-1,1)),fe=()=>S(Y=>Math.min(Y+1,pe)),Te=()=>{me({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),Q(!1),ee(null),x(!0)},Ye=async()=>{C(!0);try{const Y=await ie.get("/deals/admin/fetch-all"),K=[...Array.isArray(Y.data)?Y.data:[]].sort((Se,G)=>{const J=Se?.created_at?new Date(Se.created_at).getTime():0;return(G?.created_at?new Date(G.created_at).getTime():0)-J});w(K)}catch(Y){Y.response&&Y.response.status===403?H.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):H.error("Failed to fetch deals. Please try again later."),console.error(Y)}finally{C(!1)}},Ae=async()=>{try{const Y=await ie.get("/accounts/admin/fetch-all");de(Array.isArray(Y.data)?Y.data:[])}catch(Y){console.error(Y),Y.response?.status===403&&H.warn("Unable to load accounts (permission denied).")}},Ie=async()=>{try{const Y=await ie.get("/contacts/admin/fetch-all");Z(Array.isArray(Y.data)?Y.data:[])}catch(Y){console.error(Y),Y.response?.status===403&&H.warn("Unable to load contacts (permission denied).")}},Je=async()=>{try{const Y=await ie.get("/users/all");ve(Array.isArray(Y.data)?Y.data:[])}catch(Y){console.error(Y),Y.response?.status===403&&H.warn("Unable to load users (permission denied).")}};h.useEffect(()=>{Ye(),Ae(),Ie(),Je()},[]);const he=Y=>{Y&&(me({id:Y.id||null,name:Y.name||"",account_id:Y.account_id?.toString()||"",primary_contact_id:Y.primary_contact_id?.toString()||"",stage:Y.stage||"PROPOSAL",amount:Y.amount?.toString()||"",close_date:Y.close_date?new Date(Y.close_date).toISOString().split("T")[0]:"",assigned_to:Y.assigned_to?.toString()||"",currency:Y.currency||"PHP",description:Y.description||""}),Q(!0),ee(Y.id),d(null),x(!0))},Me=async(Y=!1)=>{try{const te=await ie.get("/deals/admin/fetch-all"),Se=[...Array.isArray(te.data)?te.data:[]].sort((G,J)=>{const De=G?.created_at?new Date(G.created_at).getTime():0;return(J?.created_at?new Date(J.created_at).getTime():0)-De});if(w(Se),!Y&&c&&c.id){const G=Se.find(J=>J.id===c.id);G&&d({...G})}}catch(te){console.error("Failed to refresh deal data:",te),await Ye()}},re=Y=>{const te=Y.name.trim();if(!te){H.error("Deal name is required.");return}if(!Y.account_id){H.error("Account is required.");return}const K=B&&F?"update":"create",Se=te;I({title:K==="create"?"Confirm New Deal":"Confirm Update",message:K==="create"?a.jsxs("span",{children:["Are you sure you want to create"," ",a.jsx("span",{className:"font-semibold",children:Se}),"?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:Se}),"?"]}),confirmLabel:K==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:K,formData:Y,targetId:F||null,name:Se}})},Qe=Y=>{if(!Y)return;const te=Y.name||"this deal";I({title:"Delete Deal",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:te}),"? This action cannot be undone."]}),confirmLabel:"Delete Deal",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:Y.id,name:te}})},We=Y=>{if(Y.target.checked){const te=le.map(K=>K.id);O(te)}else O([])},dt=Y=>{O(te=>te.includes(Y)?te.filter(K=>K!==Y):[...te,Y])},ze=async()=>{P.length!==0&&I({title:"Delete Deals",message:a.jsxs("span",{children:["Are you sure you want to delete"," ",a.jsx("span",{className:"font-semibold",children:P.length})," selected deals? This action cannot be undone."]}),confirmLabel:`Delete ${P.length} Deal(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",dealIds:P}})},ce=async()=>{if(!E?.action){I(null);return}const{action:Y}=E,{type:te,formData:K,targetId:Se,name:G}=Y;$(!0);try{if(te==="create"){T(!0);const J={name:K.name.trim(),account_id:parseInt(K.account_id),primary_contact_id:K.primary_contact_id?parseInt(K.primary_contact_id):null,stage:K.stage,amount:K.amount?parseFloat(K.amount):null,currency:K.currency||"PHP",close_date:K.close_date||null,description:K.description||null,assigned_to:K.assigned_to?parseInt(K.assigned_to):null};await ie.post("/deals/admin/create",J),H.success(`Deal "${G}" created successfully.`),x(!1),await Ye()}else if(te==="update"){if(!Se)throw new Error("Missing deal identifier for update.");T(!0);const J={};K.name!==void 0&&(J.name=K.name.trim()),K.account_id!==void 0&&K.account_id!==""&&(J.account_id=parseInt(K.account_id)),K.primary_contact_id!==void 0&&(J.primary_contact_id=K.primary_contact_id?parseInt(K.primary_contact_id):null),K.stage!==void 0&&(J.stage=K.stage),K.amount!==void 0&&K.amount!==""&&(J.amount=parseFloat(K.amount)),K.currency!==void 0&&(J.currency=K.currency),K.close_date!==void 0&&(J.close_date=K.close_date||null),K.description!==void 0&&(J.description=K.description||null),K.assigned_to!==void 0&&(J.assigned_to=K.assigned_to?parseInt(K.assigned_to):null),await ie.put(`/deals/admin/${Se}`,J),H.success(`Deal "${G}" updated successfully.`),x(!1),await Ye()}else if(te==="delete"){if(!Se)throw new Error("Missing deal identifier for deletion.");await ie.delete(`/deals/admin/${Se}`),H.success(`Deal "${G}" deleted successfully.`),c?.id===Se&&d(null),await Ye()}else if(te==="bulk-delete"){const{dealIds:J}=Y;await ie.delete("/deals/admin/bulk-delete",{data:{deal_ids:J}}),H.success(`Successfully deleted ${J.length} deals`),O([]),await Ye()}}catch(J){console.error(J);const De=te==="create"?"Failed to create deal. Please review the details and try again.":te==="update"?"Failed to update deal. Please review the details and try again.":"Failed to delete deal. Please try again.",Ve=J.response?.data?.detail||De;H.error(Ve)}finally{(te==="create"||te==="update")&&T(!1),$(!1),I(null)}},ye=()=>{z||I(null)},Ue=()=>{x(!1),me({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),Q(!1),ee(null),T(!1)},et=(v??[]).filter(Y=>Y.stage==="PROSPECTING").length,lt=(v??[]).filter(Y=>Y.stage==="QUALIFICATION").length,Ee=(v??[]).filter(Y=>Y.stage==="PROPOSAL").length,tt=(v??[]).filter(Y=>Y.stage==="NEGOTIATION").length,be=(v??[]).filter(Y=>Y.stage==="CLOSED_WON").length,Xe=(v??[]).filter(Y=>Y.stage==="CLOSED_LOST").length,M=(v??[]).filter(Y=>Y.stage==="CLOSED_CANCELLED").length,U=[{title:"Prospecting",value:et,icon:ow,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:lt,icon:nn,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:Ee,icon:Kt,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:tt,icon:Vd,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:be,icon:xn,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:Xe,icon:Ts,color:"text-red-600",bgColor:"bg-red-100"},{title:"Closed Cancelled",value:M,icon:Ts,color:"text-gray-600",bgColor:"bg-gray-100"}];return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[b&&a.jsx(zt,{message:"Loading deals..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(Kt,{className:"mr-2 text-blue-600"}),"Deals"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:Te,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(da,{className:"mr-2"})," Add Deal"]})})]}),a.jsx("div",{className:"grid grid-cols-1 p-2 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden",children:U.map(Y=>a.jsx(pOe,{...Y},Y.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search deals",value:n,onChange:Y=>s(Y.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[a.jsxs("select",{value:r,onChange:Y=>i(Y.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),a.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),a.jsx("option",{value:"Qualification Stage",children:"Qualification"}),a.jsx("option",{value:"Proposal Stage",children:"Proposal"}),a.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),a.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),a.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"}),a.jsx("option",{value:"Closed Cancelled Stage",children:"Closed Cancelled"})]}),a.jsxs("select",{value:l,onChange:Y=>o(Y.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((v??[]).map(Y=>`${Y.assigned_deals?.first_name} ${Y.assigned_deals?.last_name}`))].map((Y,te)=>a.jsx("option",{value:Y,children:Y},te))]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-10",children:a.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:le.length>0&&le.every(Y=>P.includes(Y.id)),onChange:We})}),a.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Stage"}),a.jsx("th",{className:"py-3 px-4",children:"Value"}),a.jsx("th",{className:"py-3 px-4",children:"Close Date"}),a.jsx("th",{className:"py-3 px-4",children:"Owner"}),a.jsx("th",{className:"py-3 px-4 text-center w-24",children:P.length>0?a.jsx("button",{onClick:ze,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${P.length} selected items`,children:a.jsx(Wt,{size:18})}):""})]})}),a.jsx("tbody",{children:Le.length>0?le.map(Y=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{d({...Y}),ne(Y.id)},children:[a.jsx("td",{className:"py-3 px-4",onClick:te=>te.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:P.includes(Y.id),onChange:()=>dt(Y.id)})}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:Y.deal_id?Y.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:Y.name}),a.jsx("div",{className:"text-gray-500 text-xs break-all",children:Y.description||"--"})]})}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:Y.account?.name||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:Y.contact?.first_name&&Y.contact?.last_name?`${Y.contact.first_name} ${Y.contact.last_name}`:Y.contact?.first_name||Y.contact?.last_name||"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${we(Y.stage)}`,children:Pe(Y.stage)})}),a.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",Y.amount?.toLocaleString()||"0"]}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:Y.close_date||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:Y.assigned_deals?.first_name&&Y.assigned_deals?.last_name?`${Y.assigned_deals.first_name} ${Y.assigned_deals.last_name}`:Y.assigned_deals?.first_name||Y.assigned_deals?.last_name||"--"})]},Y.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No deals found."})})})]})}),a.jsx(Jt,{className:"mt-4",totalItems:Le.length,pageSize:A,currentPage:N,onPrev:ge,onNext:fe,onPageSizeChange:Y=>{k(Y),S(1)},pageSizeOptions:[10,20,30,40,50],label:"deals"}),p&&a.jsx(xOe,{onClose:Ue,formData:Fe,setFormData:me,isEditing:B,onSubmit:re,isSubmitting:_||z,accounts:V,contacts:oe,users:R}),c&&a.jsx(kx,{relatedActs:X,selectedDeal:c,show:!!c,onClose:()=>d(null),activeTab:u,setActiveTab:f,onEdit:he,onDelete:Qe,onStatusUpdate:Me}),E&&a.jsx(gOe,{open:!0,title:E.title,message:E.message,confirmLabel:E.confirmLabel,cancelLabel:E.cancelLabel,variant:E.variant,onConfirm:ce,onCancel:ye,loading:z})]})}function gOe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}function pOe({icon:e,title:t,value:n,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function xOe({onClose:e,formData:t,setFormData:n,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,accounts:l=[],contacts:o=[],users:c=[]}){const[d,u]=h.useState(!1),f=v=>{if(v.preventDefault(),u(!0),!t.name?.trim()){H.error("Deal name is required.");return}const w=Number(t.amount);if(!t.amount||isNaN(w)||w<=0){H.error("Amount must be a number greater than 0.");return}if(!t.account_id){H.error("Please select an account.");return}if(!t.primary_contact_id){H.error("Please select a primary contact.");return}if(!t.assigned_to){H.error("Please assign this deal to a user.");return}r?.(t)},p=v=>{v.target.id==="modalBackdrop"&&e()},x=h.useMemo(()=>{const v=String(t.account_id||"").trim(),w=Array.isArray(o)?o:[];return v?w.filter(b=>{const N=[b?.account_id,b?.accountId,b?.account?.id,b?.account?.account_id,b?.account?.accountId].find(S=>S!=null&&String(S).trim()!=="");return N?String(N)===v:!1}):w},[o,t.account_id]);return h.useEffect(()=>{const v=String(t.account_id||"").trim(),w=String(t.primary_contact_id||"").trim();if(!w||!v)return;x.some(C=>String(C?.id)===w)||n(C=>({...C,primary_contact_id:""}))},[t.account_id,t.primary_contact_id,x,n]),a.jsx("div",{id:"modalBackdrop",onClick:p,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:v=>v.stopPropagation(),children:[a.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(Vt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Deal":"Create Deal"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:f,noValidate:!0,children:[a.jsx(X2,{label:"Deal Name",name:"name",value:t.name,onChange:v=>n({...t,name:v.target.value}),placeholder:"Enter deal name",required:!0,isSubmitted:d,className:"md:col-span-2"}),a.jsx(Z2,{label:"Account",value:t.account_id||"",onChange:v=>n({...t,account_id:v}),items:l||[],getLabel:v=>v?.name??"",placeholder:"Search account...",disabled:i,required:!0,isSubmitted:d}),a.jsx(Z2,{label:"Primary Contact",value:t.primary_contact_id||"",onChange:v=>n({...t,primary_contact_id:v}),items:x||[],getLabel:v=>`${v?.first_name??""} ${v?.last_name??""}`.trim()||v?.email||"",placeholder:"Search contact...",required:!0,isSubmitted:d,disabled:i}),a.jsx(JU,{label:"Stage",name:"stage",value:t.stage,onChange:v=>n({...t,stage:v.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}],disabled:i}),a.jsx(X2,{label:"Amount",name:"amount",type:"number",step:"0.01",value:t.amount,onChange:v=>n({...t,amount:v.target.value}),placeholder:"0",required:!0,isSubmitted:d}),a.jsx(JU,{label:"Currency",name:"currency",value:t.currency||"PHP",onChange:v=>n({...t,currency:v.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),a.jsx(X2,{label:"Close Date",name:"close_date",type:"date",value:t.close_date||"",onChange:v=>n({...t,close_date:v.target.value}),disabled:i}),a.jsx(Z2,{label:"Assign To",value:t.assigned_to||"",onChange:v=>n({...t,assigned_to:v}),items:c||[],getLabel:v=>`${v?.first_name??""} ${v?.last_name??""}`.trim()||v?.email||"",placeholder:"Search assignee...",disabled:i,required:!0,isSubmitted:d,className:"md:col-span-2"}),a.jsx(bOe,{label:"Description",name:"description",value:t.description,onChange:v=>n({...t,description:v.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Deal":"Save Deal"})]})]})]})})}function X2({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,className:c="",isSubmitted:d=!1}){const u=d&&!n?.trim();return a.jsxs("div",{className:c,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function JU({label:e,name:t,value:n,onChange:s,options:r,required:i=!1,disabled:l=!1,className:o=""}){return a.jsxs("div",{className:o,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:n??"",onChange:s,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(c=>a.jsx("option",{value:c.value,children:c.label},c.value))})]})}function Z2({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!n;return a.jsxs("div",{className:o,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(yOe,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:l,hasError:u})]})}function yOe({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,hasError:o=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",w=h.useMemo(()=>{const b=u.trim().toLowerCase();return(b?e.filter(N=>(s(N)||"").toLowerCase().includes(b)):e).slice(0,l)},[e,u,s,l]);return h.useEffect(()=>{const b=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),h.useEffect(()=>{c||f("")},[c]),a.jsxs("div",{ref:p,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:c?u:v,placeholder:r,onFocus:()=>!i&&d(!0),onChange:b=>{f(b.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${o?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:w.length>0?w.map(b=>{const C=String(b.id),N=s(b),S=String(t)===C;return a.jsx("button",{type:"button",onClick:()=>{n(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:N||"--"},C)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function bOe({label:e,name:t,value:n,onChange:s,placeholder:r,required:i=!1,disabled:l=!1,className:o="",rows:c=3}){return a.jsxs("div",{className:o,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:s,placeholder:r,required:i,disabled:l,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}var vOe=Object.defineProperty,wOe=(e,t,n)=>t in e?vOe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,J2=(e,t,n)=>(wOe(e,typeof t!="symbol"?t+"":t,n),n);let NOe=class{constructor(){J2(this,"current",this.detect()),J2(this,"handoffState","pending"),J2(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},ml=new NOe;function Lx(e){var t;return ml.isServer?null:e==null?document:(t=e?.ownerDocument)!=null?t:document}function CT(e){var t,n;return ml.isServer?null:e==null?document:(n=(t=e?.getRootNode)==null?void 0:t.call(e))!=null?n:document}function lQ(e){var t,n;return(n=(t=CT(e))==null?void 0:t.activeElement)!=null?n:null}function jOe(e){return lQ(e)===e}function aj(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Bo(){let e=[],t={addEventListener(n,s,r,i){return n.addEventListener(s,r,i),t.add(()=>n.removeEventListener(s,r,i))},requestAnimationFrame(...n){let s=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(s))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let s=setTimeout(...n);return t.add(()=>clearTimeout(s))},microTask(...n){let s={current:!0};return aj(()=>{s.current&&n[0]()}),t.add(()=>{s.current=!1})},style(n,s,r){let i=n.style.getPropertyValue(s);return Object.assign(n.style,{[s]:r}),this.add(()=>{Object.assign(n.style,{[s]:i})})},group(n){let s=Bo();return n(s),this.add(()=>s.dispose())},add(n){return e.includes(n)||e.push(n),()=>{let s=e.indexOf(n);if(s>=0)for(let r of e.splice(s,1))r()}},dispose(){for(let n of e.splice(0))n()}};return t}function nj(){let[e]=h.useState(Bo);return h.useEffect(()=>()=>e.dispose(),[e]),e}let sr=(e,t)=>{ml.isServer?h.useEffect(e,t):h.useLayoutEffect(e,t)};function Du(e){let t=h.useRef(e);return sr(()=>{t.current=e},[e]),t}let Ua=function(e){let t=Du(e);return wt.useCallback((...n)=>t.current(...n),[t])};function Px(e){return h.useMemo(()=>e,Object.values(e))}let COe=h.createContext(void 0);function SOe(){return h.useContext(COe)}function ST(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function Ao(e,t,...n){if(e in t){let r=t[e];return typeof r=="function"?r(...n):r}let s=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(r=>`"${r}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,Ao),s}var Iv=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Iv||{}),Lc=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Lc||{});function gi(){let e=AOe();return h.useCallback(t=>_Oe({mergeRefs:e,...t}),[e])}function _Oe({ourProps:e,theirProps:t,slot:n,defaultTag:s,features:r,visible:i=!0,name:l,mergeRefs:o}){o=o??EOe;let c=oQ(t,e);if(i)return Ty(c,n,s,l,o);let d=r??0;if(d&2){let{static:u=!1,...f}=c;if(u)return Ty(f,n,s,l,o)}if(d&1){let{unmount:u=!0,...f}=c;return Ao(u?0:1,{0(){return null},1(){return Ty({...f,hidden:!0,style:{display:"none"}},n,s,l,o)}})}return Ty(c,n,s,l,o)}function Ty(e,t={},n,s,r){let{as:i=n,children:l,refName:o="ref",...c}=e_(e,["unmount","static"]),d=e.ref!==void 0?{[o]:e.ref}:{},u=typeof l=="function"?l(t):l;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(t)),c["aria-labelledby"]&&c["aria-labelledby"]===c.id&&(c["aria-labelledby"]=void 0);let f={};if(t){let p=!1,x=[];for(let[v,w]of Object.entries(t))typeof w=="boolean"&&(p=!0),w===!0&&x.push(v.replace(/([A-Z])/g,b=>`-${b.toLowerCase()}`));if(p){f["data-headlessui-state"]=x.join(" ");for(let v of x)f[`data-${v}`]=""}}if(Lg(i)&&(Object.keys(kd(c)).length>0||Object.keys(kd(f)).length>0))if(!h.isValidElement(u)||Array.isArray(u)&&u.length>1||kOe(u)){if(Object.keys(kd(c)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${s} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(kd(c)).concat(Object.keys(kd(f))).map(p=>`  - ${p}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(p=>`  - ${p}`).join(`
`)].join(`
`))}else{let p=u.props,x=p?.className,v=typeof x=="function"?(...C)=>ST(x(...C),c.className):ST(x,c.className),w=v?{className:v}:{},b=oQ(u.props,kd(e_(c,["ref"])));for(let C in f)C in b&&delete f[C];return h.cloneElement(u,Object.assign({},b,f,d,{ref:r(TOe(u),d.ref)},w))}return h.createElement(i,Object.assign({},e_(c,["ref"]),!Lg(i)&&d,!Lg(i)&&f),u)}function AOe(){let e=h.useRef([]),t=h.useCallback(n=>{for(let s of e.current)s!=null&&(typeof s=="function"?s(n):s.current=n)},[]);return(...n)=>{if(!n.every(s=>s==null))return e.current=n,t}}function EOe(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function oQ(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let s of e)for(let r in s)r.startsWith("on")&&typeof s[r]=="function"?(n[r]!=null||(n[r]=[]),n[r].push(s[r])):t[r]=s[r];if(t.disabled||t["aria-disabled"])for(let s in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(s)&&(n[s]=[r=>{var i;return(i=r?.preventDefault)==null?void 0:i.call(r)}]);for(let s in n)Object.assign(t,{[s](r,...i){let l=n[s];for(let o of l){if((r instanceof Event||r?.nativeEvent instanceof Event)&&r.defaultPrevented)return;o(r,...i)}}});return t}function ur(e){var t;return Object.assign(h.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function kd(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function e_(e,t=[]){let n=Object.assign({},e);for(let s of t)s in n&&delete n[s];return n}function TOe(e){return wt.version.split(".")[0]>="19"?e.props.ref:e.ref}function Lg(e){return e===h.Fragment||e===Symbol.for("react.fragment")}function kOe(e){return Lg(e.type)}let LOe="span";var $v=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))($v||{});function POe(e,t){var n;let{features:s=1,...r}=e,i={ref:t,"aria-hidden":(s&2)===2?!0:(n=r["aria-hidden"])!=null?n:void 0,hidden:(s&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(s&4)===4&&(s&2)!==2&&{display:"none"}}};return gi()({ourProps:i,theirProps:r,slot:{},defaultTag:LOe,name:"Hidden"})}let _T=ur(POe);function DOe(e){return typeof e!="object"||e===null?!1:"nodeType"in e}function $c(e){return DOe(e)&&"tagName"in e}function vu(e){return $c(e)&&"accessKey"in e}function Pc(e){return $c(e)&&"tabIndex"in e}function OOe(e){return $c(e)&&"style"in e}function MOe(e){return vu(e)&&e.nodeName==="IFRAME"}function IOe(e){return vu(e)&&e.nodeName==="INPUT"}let cQ=Symbol();function $Oe(e,t=!0){return Object.assign(e,{[cQ]:t})}function Sl(...e){let t=h.useRef(e);h.useEffect(()=>{t.current=e},[e]);let n=Ua(s=>{for(let r of t.current)r!=null&&(typeof r=="function"?r(s):r.current=s)});return e.every(s=>s==null||s?.[cQ])?void 0:n}let yP=h.createContext(null);yP.displayName="DescriptionContext";function dQ(){let e=h.useContext(yP);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,dQ),t}return e}function ROe(){let[e,t]=h.useState([]);return[e.length>0?e.join(" "):void 0,h.useMemo(()=>function(n){let s=Ua(i=>(t(l=>[...l,i]),()=>t(l=>{let o=l.slice(),c=o.indexOf(i);return c!==-1&&o.splice(c,1),o}))),r=h.useMemo(()=>({register:s,slot:n.slot,name:n.name,props:n.props,value:n.value}),[s,n.slot,n.name,n.props,n.value]);return wt.createElement(yP.Provider,{value:r},n.children)},[t])]}let zOe="p";function UOe(e,t){let n=h.useId(),s=SOe(),{id:r=`headlessui-description-${n}`,...i}=e,l=dQ(),o=Sl(t);sr(()=>l.register(r),[r,l.register]);let c=Px({...l.slot,disabled:s||!1}),d={ref:o,...l.props,id:r};return gi()({ourProps:d,theirProps:i,slot:c,defaultTag:zOe,name:l.name||"Description"})}let FOe=ur(UOe),BOe=Object.assign(FOe,{});var uQ=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(uQ||{});let HOe=h.createContext(()=>{});function GOe({value:e,children:t}){return wt.createElement(HOe.Provider,{value:e},t)}let mQ=class extends Map{constructor(t){super(),this.factory=t}get(t){let n=super.get(t);return n===void 0&&(n=this.factory(t),this.set(t,n)),n}};var WOe=Object.defineProperty,VOe=(e,t,n)=>t in e?WOe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qOe=(e,t,n)=>(VOe(e,t+"",n),n),fQ=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Vr=(e,t,n)=>(fQ(e,t,"read from private field"),n?n.call(e):t.get(e)),t_=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},e7=(e,t,n,s)=>(fQ(e,t,"write to private field"),t.set(e,n),n),Ki,wg,Ng;let YOe=class{constructor(t){t_(this,Ki,{}),t_(this,wg,new mQ(()=>new Set)),t_(this,Ng,new Set),qOe(this,"disposables",Bo()),e7(this,Ki,t),ml.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return Vr(this,Ki)}subscribe(t,n){if(ml.isServer)return()=>{};let s={selector:t,callback:n,current:t(Vr(this,Ki))};return Vr(this,Ng).add(s),this.disposables.add(()=>{Vr(this,Ng).delete(s)})}on(t,n){return ml.isServer?()=>{}:(Vr(this,wg).get(t).add(n),this.disposables.add(()=>{Vr(this,wg).get(t).delete(n)}))}send(t){let n=this.reduce(Vr(this,Ki),t);if(n!==Vr(this,Ki)){e7(this,Ki,n);for(let s of Vr(this,Ng)){let r=s.selector(Vr(this,Ki));hQ(s.current,r)||(s.current=r,s.callback(r))}for(let s of Vr(this,wg).get(t.type))s(Vr(this,Ki),t)}}};Ki=new WeakMap,wg=new WeakMap,Ng=new WeakMap;function hQ(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:Array.isArray(e)&&Array.isArray(t)?e.length!==t.length?!1:a_(e[Symbol.iterator](),t[Symbol.iterator]()):e instanceof Map&&t instanceof Map||e instanceof Set&&t instanceof Set?e.size!==t.size?!1:a_(e.entries(),t.entries()):t7(e)&&t7(t)?a_(Object.entries(e)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()):!1}function a_(e,t){do{let n=e.next(),s=t.next();if(n.done&&s.done)return!0;if(n.done||s.done||!Object.is(n.value,s.value))return!1}while(!0)}function t7(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||Object.getPrototypeOf(t)===null}var KOe=Object.defineProperty,QOe=(e,t,n)=>t in e?KOe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,a7=(e,t,n)=>(QOe(e,typeof t!="symbol"?t+"":t,n),n),XOe=(e=>(e[e.Push=0]="Push",e[e.Pop=1]="Pop",e))(XOe||{});let ZOe={0(e,t){let n=t.id,s=e.stack,r=e.stack.indexOf(n);if(r!==-1){let i=e.stack.slice();return i.splice(r,1),i.push(n),s=i,{...e,stack:s}}return{...e,stack:[...e.stack,n]}},1(e,t){let n=t.id,s=e.stack.indexOf(n);if(s===-1)return e;let r=e.stack.slice();return r.splice(s,1),{...e,stack:r}}},JOe=class gQ extends YOe{constructor(){super(...arguments),a7(this,"actions",{push:t=>this.send({type:0,id:t}),pop:t=>this.send({type:1,id:t})}),a7(this,"selectors",{isTop:(t,n)=>t.stack[t.stack.length-1]===n,inStack:(t,n)=>t.stack.includes(n)})}static new(){return new gQ({stack:[]})}reduce(t,n){return Ao(n.type,ZOe,t,n)}};const pQ=new mQ(()=>JOe.new());function xQ(e,t,n=hQ){return Y4e.useSyncExternalStoreWithSelector(Ua(s=>e.subscribe(e5e,s)),Ua(()=>e.state),Ua(()=>e.state),Ua(t),n)}function e5e(e){return e}function Dx(e,t){let n=h.useId(),s=pQ.get(t),[r,i]=xQ(s,h.useCallback(l=>[s.selectors.isTop(l,n),s.selectors.inStack(l,n)],[s,n]));return sr(()=>{if(e)return s.actions.push(n),()=>s.actions.pop(n)},[s,e,n]),e?i?r:!0:!1}let AT=new Map,Pg=new Map;function n7(e){var t;let n=(t=Pg.get(e))!=null?t:0;return Pg.set(e,n+1),n!==0?()=>s7(e):(AT.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>s7(e))}function s7(e){var t;let n=(t=Pg.get(e))!=null?t:1;if(n===1?Pg.delete(e):Pg.set(e,n-1),n!==1)return;let s=AT.get(e);s&&(s["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",s["aria-hidden"]),e.inert=s.inert,AT.delete(e))}function t5e(e,{allowed:t,disallowed:n}={}){let s=Dx(e,"inert-others");sr(()=>{var r,i;if(!s)return;let l=Bo();for(let c of(r=n?.())!=null?r:[])c&&l.add(n7(c));let o=(i=t?.())!=null?i:[];for(let c of o){if(!c)continue;let d=Lx(c);if(!d)continue;let u=c.parentElement;for(;u&&u!==d.body;){for(let f of u.children)o.some(p=>f.contains(p))||l.add(n7(f));u=u.parentElement}}return l.dispose},[s,t,n])}function a5e(e,t,n){let s=Du(r=>{let i=r.getBoundingClientRect();i.x===0&&i.y===0&&i.width===0&&i.height===0&&n()});h.useEffect(()=>{if(!e)return;let r=t===null?null:vu(t)?t:t.current;if(!r)return;let i=Bo();if(typeof ResizeObserver<"u"){let l=new ResizeObserver(()=>s.current(r));l.observe(r),i.add(()=>l.disconnect())}if(typeof IntersectionObserver<"u"){let l=new IntersectionObserver(()=>s.current(r));l.observe(r),i.add(()=>l.disconnect())}return()=>i.dispose()},[t,s,e])}let Rv=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","details>summary","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),n5e=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var so=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(so||{}),ET=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(ET||{}),s5e=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(s5e||{});function r5e(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Rv)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function i5e(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(n5e)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var yQ=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(yQ||{});function l5e(e,t=0){var n;return e===((n=Lx(e))==null?void 0:n.body)?!1:Ao(t,{0(){return e.matches(Rv)},1(){let s=e;for(;s!==null;){if(s.matches(Rv))return!0;s=s.parentElement}return!1}})}var o5e=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(o5e||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function mo(e){e?.focus({preventScroll:!0})}let c5e=["textarea","input"].join(",");function d5e(e){var t,n;return(n=(t=e?.matches)==null?void 0:t.call(e,c5e))!=null?n:!1}function u5e(e,t=n=>n){return e.slice().sort((n,s)=>{let r=t(n),i=t(s);if(r===null||i===null)return 0;let l=r.compareDocumentPosition(i);return l&Node.DOCUMENT_POSITION_FOLLOWING?-1:l&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Dg(e,t,{sorted:n=!0,relativeTo:s=null,skipElements:r=[]}={}){let i=Array.isArray(e)?e.length>0?CT(e[0]):document:CT(e),l=Array.isArray(e)?n?u5e(e):e:t&64?i5e(e):r5e(e);r.length>0&&l.length>1&&(l=l.filter(x=>!r.some(v=>v!=null&&"current"in v?v?.current===x:v===x))),s=s??i?.activeElement;let o=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,l.indexOf(s))-1;if(t&4)return Math.max(0,l.indexOf(s))+1;if(t&8)return l.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=t&32?{preventScroll:!0}:{},u=0,f=l.length,p;do{if(u>=f||u+f<=0)return 0;let x=c+u;if(t&16)x=(x+f)%f;else{if(x<0)return 3;if(x>=f)return 1}p=l[x],p?.focus(d),u+=o}while(p!==lQ(p));return t&6&&d5e(p)&&p.select(),2}function bQ(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function m5e(){return/Android/gi.test(window.navigator.userAgent)}function r7(){return bQ()||m5e()}function ky(e,t,n,s){let r=Du(n);h.useEffect(()=>{if(!e)return;function i(l){r.current(l)}return document.addEventListener(t,i,s),()=>document.removeEventListener(t,i,s)},[e,t,s])}function vQ(e,t,n,s){let r=Du(n);h.useEffect(()=>{if(!e)return;function i(l){r.current(l)}return window.addEventListener(t,i,s),()=>window.removeEventListener(t,i,s)},[e,t,s])}const i7=30;function f5e(e,t,n){let s=Du(n),r=h.useCallback(function(o,c){if(o.defaultPrevented)return;let d=c(o);if(d===null||!d.getRootNode().contains(d)||!d.isConnected)return;let u=(function f(p){return typeof p=="function"?f(p()):Array.isArray(p)||p instanceof Set?p:[p]})(t);for(let f of u)if(f!==null&&(f.contains(d)||o.composed&&o.composedPath().includes(f)))return;return!l5e(d,yQ.Loose)&&d.tabIndex!==-1&&o.preventDefault(),s.current(o,d)},[s,t]),i=h.useRef(null);ky(e,"pointerdown",o=>{var c,d;r7()||(i.current=((d=(c=o.composedPath)==null?void 0:c.call(o))==null?void 0:d[0])||o.target)},!0),ky(e,"pointerup",o=>{if(r7()||!i.current)return;let c=i.current;return i.current=null,r(o,()=>c)},!0);let l=h.useRef({x:0,y:0});ky(e,"touchstart",o=>{l.current.x=o.touches[0].clientX,l.current.y=o.touches[0].clientY},!0),ky(e,"touchend",o=>{let c={x:o.changedTouches[0].clientX,y:o.changedTouches[0].clientY};if(!(Math.abs(c.x-l.current.x)>=i7||Math.abs(c.y-l.current.y)>=i7))return r(o,()=>Pc(o.target)?o.target:null)},!0),vQ(e,"blur",o=>r(o,()=>MOe(window.document.activeElement)?window.document.activeElement:null),!0)}function bP(...e){return h.useMemo(()=>Lx(...e),[...e])}function wQ(e,t,n,s){let r=Du(n);h.useEffect(()=>{e=e??window;function i(l){r.current(l)}return e.addEventListener(t,i,s),()=>e.removeEventListener(t,i,s)},[e,t,s])}function h5e(e){return h.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}function g5e(e,t){let n=e(),s=new Set;return{getSnapshot(){return n},subscribe(r){return s.add(r),()=>s.delete(r)},dispatch(r,...i){let l=t[r].call(n,...i);l&&(n=l,s.forEach(o=>o()))}}}function p5e(){let e;return{before({doc:t}){var n;let s=t.documentElement,r=(n=t.defaultView)!=null?n:window;e=Math.max(0,r.innerWidth-s.clientWidth)},after({doc:t,d:n}){let s=t.documentElement,r=Math.max(0,s.clientWidth-s.offsetWidth),i=Math.max(0,e-r);n.style(s,"paddingRight",`${i}px`)}}}function x5e(){return bQ()?{before({doc:e,d:t,meta:n}){function s(r){for(let i of n().containers)for(let l of i())if(l.contains(r))return!0;return!1}t.microTask(()=>{var r;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let o=Bo();o.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>o.dispose()))}let i=(r=window.scrollY)!=null?r:window.pageYOffset,l=null;t.addEventListener(e,"click",o=>{if(Pc(o.target))try{let c=o.target.closest("a");if(!c)return;let{hash:d}=new URL(c.href),u=e.querySelector(d);Pc(u)&&!s(u)&&(l=u)}catch{}},!0),t.group(o=>{t.addEventListener(e,"touchstart",c=>{if(o.dispose(),Pc(c.target)&&OOe(c.target))if(s(c.target)){let d=c.target;for(;d.parentElement&&s(d.parentElement);)d=d.parentElement;o.style(d,"overscrollBehavior","contain")}else o.style(c.target,"touchAction","none")})}),t.addEventListener(e,"touchmove",o=>{if(Pc(o.target)){if(IOe(o.target))return;if(s(o.target)){let c=o.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&o.preventDefault()}else o.preventDefault()}},{passive:!1}),t.add(()=>{var o;let c=(o=window.scrollY)!=null?o:window.pageYOffset;i!==c&&window.scrollTo(0,i),l&&l.isConnected&&(l.scrollIntoView({block:"nearest"}),l=null)})})}}:{}}function y5e(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function l7(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let Hd=g5e(()=>new Map,{PUSH(e,t){var n;let s=(n=this.get(e))!=null?n:{doc:e,count:0,d:Bo(),meta:new Set,computedMeta:{}};return s.count++,s.meta.add(t),s.computedMeta=l7(s.meta),this.set(e,s),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t),n.computedMeta=l7(n.meta)),this},SCROLL_PREVENT(e){let t={doc:e.doc,d:e.d,meta(){return e.computedMeta}},n=[x5e(),p5e(),y5e()];n.forEach(({before:s})=>s?.(t)),n.forEach(({after:s})=>s?.(t))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});Hd.subscribe(()=>{let e=Hd.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let s=t.get(n.doc)==="hidden",r=n.count!==0;(r&&!s||!r&&s)&&Hd.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&Hd.dispatch("TEARDOWN",n)}});function b5e(e,t,n=()=>({containers:[]})){let s=h5e(Hd),r=t?s.get(t):void 0,i=r?r.count>0:!1;return sr(()=>{if(!(!t||!e))return Hd.dispatch("PUSH",t,n),()=>Hd.dispatch("POP",t,n)},[e,t]),i}function v5e(e,t,n=()=>[document.body]){let s=Dx(e,"scroll-lock");b5e(s,t,r=>{var i;return{containers:[...(i=r.containers)!=null?i:[],n]}})}function w5e(e=0){let[t,n]=h.useState(e),s=h.useCallback(c=>n(c),[]),r=h.useCallback(c=>n(d=>d|c),[]),i=h.useCallback(c=>(t&c)===c,[t]),l=h.useCallback(c=>n(d=>d&~c),[]),o=h.useCallback(c=>n(d=>d^c),[]);return{flags:t,setFlag:s,addFlag:r,hasFlag:i,removeFlag:l,toggleFlag:o}}var N5e={},o7,c7;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((o7=process==null?void 0:N5e)==null?void 0:o7.NODE_ENV)==="test"&&typeof((c7=Element?.prototype)==null?void 0:c7.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var j5e=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(j5e||{});function C5e(e){let t={};for(let n in e)e[n]===!0&&(t[`data-${n}`]="");return t}function S5e(e,t,n,s){let[r,i]=h.useState(n),{hasFlag:l,addFlag:o,removeFlag:c}=w5e(e&&r?3:0),d=h.useRef(!1),u=h.useRef(!1),f=nj();return sr(()=>{var p;if(e){if(n&&i(!0),!t){n&&o(3);return}return(p=s?.start)==null||p.call(s,n),_5e(t,{inFlight:d,prepare(){u.current?u.current=!1:u.current=d.current,d.current=!0,!u.current&&(n?(o(3),c(4)):(o(4),c(2)))},run(){u.current?n?(c(3),o(4)):(c(4),o(3)):n?c(1):o(1)},done(){var x;u.current&&T5e(t)||(d.current=!1,c(7),n||i(!1),(x=s?.end)==null||x.call(s,n))}})}},[e,n,t,f]),e?[r,{closed:l(1),enter:l(2),leave:l(4),transition:l(2)||l(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function _5e(e,{prepare:t,run:n,done:s,inFlight:r}){let i=Bo();return E5e(e,{prepare:t,inFlight:r}),i.nextFrame(()=>{n(),i.requestAnimationFrame(()=>{i.add(A5e(e,s))})}),i.dispose}function A5e(e,t){var n,s;let r=Bo();if(!e)return r.dispose;let i=!1;r.add(()=>{i=!0});let l=(s=(n=e.getAnimations)==null?void 0:n.call(e).filter(o=>o instanceof CSSTransition))!=null?s:[];return l.length===0?(t(),r.dispose):(Promise.allSettled(l.map(o=>o.finished)).then(()=>{i||t()}),r.dispose)}function E5e(e,{inFlight:t,prepare:n}){if(t!=null&&t.current){n();return}let s=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=s}function T5e(e){var t,n;return((n=(t=e.getAnimations)==null?void 0:t.call(e))!=null?n:[]).some(s=>s instanceof CSSTransition&&s.playState!=="finished")}function vP(e,t){let n=h.useRef([]),s=Ua(e);h.useEffect(()=>{let r=[...n.current];for(let[i,l]of t.entries())if(n.current[i]!==l){let o=s(t,r);return n.current=t,o}},[s,...t])}let sj=h.createContext(null);sj.displayName="OpenClosedContext";var Ti=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Ti||{});function rj(){return h.useContext(sj)}function k5e({value:e,children:t}){return wt.createElement(sj.Provider,{value:e},t)}function L5e({children:e}){return wt.createElement(sj.Provider,{value:null},e)}function P5e(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let _c=[];P5e(()=>{function e(t){if(!Pc(t.target)||t.target===document.body||_c[0]===t.target)return;let n=t.target;n=n.closest(Rv),_c.unshift(n??t.target),_c=_c.filter(s=>s!=null&&s.isConnected),_c.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function NQ(e){let t=Ua(e),n=h.useRef(!1);h.useEffect(()=>(n.current=!1,()=>{n.current=!0,aj(()=>{n.current&&t()})}),[t])}let jQ=h.createContext(!1);function D5e(){return h.useContext(jQ)}function d7(e){return wt.createElement(jQ.Provider,{value:e.force},e.children)}function O5e(e){let t=D5e(),n=h.useContext(SQ),[s,r]=h.useState(()=>{var i;if(!t&&n!==null)return(i=n.current)!=null?i:null;if(ml.isServer)return null;let l=e?.getElementById("headlessui-portal-root");if(l)return l;if(e===null)return null;let o=e.createElement("div");return o.setAttribute("id","headlessui-portal-root"),e.body.appendChild(o)});return h.useEffect(()=>{s!==null&&(e!=null&&e.body.contains(s)||e==null||e.body.appendChild(s))},[s,e]),h.useEffect(()=>{t||n!==null&&r(n.current)},[n,r,t]),s}let CQ=h.Fragment,M5e=ur(function(e,t){let{ownerDocument:n=null,...s}=e,r=h.useRef(null),i=Sl($Oe(p=>{r.current=p}),t),l=bP(r.current),o=n??l,c=O5e(o),d=h.useContext(TT),u=nj(),f=gi();return NQ(()=>{var p;c&&c.childNodes.length<=0&&((p=c.parentElement)==null||p.removeChild(c))}),c?Sf.createPortal(wt.createElement("div",{"data-headlessui-portal":"",ref:p=>{u.dispose(),d&&p&&u.add(d.register(p))}},f({ourProps:{ref:i},theirProps:s,slot:{},defaultTag:CQ,name:"Portal"})),c):null});function I5e(e,t){let n=Sl(t),{enabled:s=!0,ownerDocument:r,...i}=e,l=gi();return s?wt.createElement(M5e,{...i,ownerDocument:r,ref:n}):l({ourProps:{ref:n},theirProps:i,slot:{},defaultTag:CQ,name:"Portal"})}let $5e=h.Fragment,SQ=h.createContext(null);function R5e(e,t){let{target:n,...s}=e,r={ref:Sl(t)},i=gi();return wt.createElement(SQ.Provider,{value:n},i({ourProps:r,theirProps:s,defaultTag:$5e,name:"Popover.Group"}))}let TT=h.createContext(null);function z5e(){let e=h.useContext(TT),t=h.useRef([]),n=Ua(i=>(t.current.push(i),e&&e.register(i),()=>s(i))),s=Ua(i=>{let l=t.current.indexOf(i);l!==-1&&t.current.splice(l,1),e&&e.unregister(i)}),r=h.useMemo(()=>({register:n,unregister:s,portals:t}),[n,s,t]);return[t,h.useMemo(()=>function({children:i}){return wt.createElement(TT.Provider,{value:r},i)},[r])]}let U5e=ur(I5e),_Q=ur(R5e),F5e=Object.assign(U5e,{Group:_Q});function B5e(e,t=typeof document<"u"?document.defaultView:null,n){let s=Dx(e,"escape");wQ(t,"keydown",r=>{s&&(r.defaultPrevented||r.key===uQ.Escape&&n(r))})}function H5e(){var e;let[t]=h.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,s]=h.useState((e=t?.matches)!=null?e:!1);return sr(()=>{if(!t)return;function r(i){s(i.matches)}return t.addEventListener("change",r),()=>t.removeEventListener("change",r)},[t]),n}function G5e({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let s=Ua(()=>{var r,i;let l=Lx(n),o=[];for(let c of e)c!==null&&($c(c)?o.push(c):"current"in c&&$c(c.current)&&o.push(c.current));if(t!=null&&t.current)for(let c of t.current)o.push(c);for(let c of(r=l?.querySelectorAll("html > *, body > *"))!=null?r:[])c!==document.body&&c!==document.head&&$c(c)&&c.id!=="headlessui-portal-root"&&(n&&(c.contains(n)||c.contains((i=n?.getRootNode())==null?void 0:i.host))||o.some(d=>c.contains(d))||o.push(c));return o});return{resolveContainers:s,contains:Ua(r=>s().some(i=>i.contains(r)))}}let AQ=h.createContext(null);function u7({children:e,node:t}){let[n,s]=h.useState(null),r=EQ(t??n);return wt.createElement(AQ.Provider,{value:r},e,r===null&&wt.createElement(_T,{features:$v.Hidden,ref:i=>{var l,o;if(i){for(let c of(o=(l=Lx(i))==null?void 0:l.querySelectorAll("html > *, body > *"))!=null?o:[])if(c!==document.body&&c!==document.head&&$c(c)&&c!=null&&c.contains(i)){s(c);break}}}}))}function EQ(e=null){var t;return(t=h.useContext(AQ))!=null?t:e}function W5e(){let e=typeof document>"u";return"useSyncExternalStore"in tu?(t=>t.useSyncExternalStore)(tu)(()=>()=>{},()=>!1,()=>!e):!1}function ij(){let e=W5e(),[t,n]=h.useState(ml.isHandoffComplete);return t&&ml.isHandoffComplete===!1&&n(!1),h.useEffect(()=>{t!==!0&&n(!0)},[t]),h.useEffect(()=>ml.handoff(),[]),e?!1:t}function wP(){let e=h.useRef(!1);return sr(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var jg=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(jg||{});function V5e(){let e=h.useRef(0);return vQ(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function TQ(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)$c(n.current)&&t.add(n.current);return t}let q5e="div";var Od=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(Od||{});function Y5e(e,t){let n=h.useRef(null),s=Sl(n,t),{initialFocus:r,initialFocusFallback:i,containers:l,features:o=15,...c}=e;ij()||(o=0);let d=bP(n.current);Z5e(o,{ownerDocument:d});let u=J5e(o,{ownerDocument:d,container:n,initialFocus:r,initialFocusFallback:i});eMe(o,{ownerDocument:d,container:n,containers:l,previousActiveElement:u});let f=V5e(),p=Ua(N=>{if(!vu(n.current))return;let S=n.current;(A=>A())(()=>{Ao(f.current,{[jg.Forwards]:()=>{Dg(S,so.First,{skipElements:[N.relatedTarget,i]})},[jg.Backwards]:()=>{Dg(S,so.Last,{skipElements:[N.relatedTarget,i]})}})})}),x=Dx(!!(o&2),"focus-trap#tab-lock"),v=nj(),w=h.useRef(!1),b={ref:s,onKeyDown(N){N.key=="Tab"&&(w.current=!0,v.requestAnimationFrame(()=>{w.current=!1}))},onBlur(N){if(!(o&4))return;let S=TQ(l);vu(n.current)&&S.add(n.current);let A=N.relatedTarget;Pc(A)&&A.dataset.headlessuiFocusGuard!=="true"&&(kQ(S,A)||(w.current?Dg(n.current,Ao(f.current,{[jg.Forwards]:()=>so.Next,[jg.Backwards]:()=>so.Previous})|so.WrapAround,{relativeTo:N.target}):Pc(N.target)&&mo(N.target)))}},C=gi();return wt.createElement(wt.Fragment,null,x&&wt.createElement(_T,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:$v.Focusable}),C({ourProps:b,theirProps:c,defaultTag:q5e,name:"FocusTrap"}),x&&wt.createElement(_T,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:$v.Focusable}))}let K5e=ur(Y5e),Q5e=Object.assign(K5e,{features:Od});function X5e(e=!0){let t=h.useRef(_c.slice());return vP(([n],[s])=>{s===!0&&n===!1&&aj(()=>{t.current.splice(0)}),s===!1&&n===!0&&(t.current=_c.slice())},[e,_c,t]),Ua(()=>{var n;return(n=t.current.find(s=>s!=null&&s.isConnected))!=null?n:null})}function Z5e(e,{ownerDocument:t}){let n=!!(e&8),s=X5e(n);vP(()=>{n||jOe(t?.body)&&mo(s())},[n]),NQ(()=>{n&&mo(s())})}function J5e(e,{ownerDocument:t,container:n,initialFocus:s,initialFocusFallback:r}){let i=h.useRef(null),l=Dx(!!(e&1),"focus-trap#initial-focus"),o=wP();return vP(()=>{if(e===0)return;if(!l){r!=null&&r.current&&mo(r.current);return}let c=n.current;c&&aj(()=>{if(!o.current)return;let d=t?.activeElement;if(s!=null&&s.current){if(s?.current===d){i.current=d;return}}else if(c.contains(d)){i.current=d;return}if(s!=null&&s.current)mo(s.current);else{if(e&16){if(Dg(c,so.First|so.AutoFocus)!==ET.Error)return}else if(Dg(c,so.First)!==ET.Error)return;if(r!=null&&r.current&&(mo(r.current),t?.activeElement===r.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}i.current=t?.activeElement})},[r,l,e]),i}function eMe(e,{ownerDocument:t,container:n,containers:s,previousActiveElement:r}){let i=wP(),l=!!(e&4);wQ(t?.defaultView,"focus",o=>{if(!l||!i.current)return;let c=TQ(s);vu(n.current)&&c.add(n.current);let d=r.current;if(!d)return;let u=o.target;vu(u)?kQ(c,u)?(r.current=u,mo(u)):(o.preventDefault(),o.stopPropagation(),mo(d)):mo(r.current)},!0)}function kQ(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function LQ(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||!Lg((t=e.as)!=null?t:DQ)||wt.Children.count(e.children)===1}let lj=h.createContext(null);lj.displayName="TransitionContext";var tMe=(e=>(e.Visible="visible",e.Hidden="hidden",e))(tMe||{});function aMe(){let e=h.useContext(lj);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function nMe(){let e=h.useContext(oj);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let oj=h.createContext(null);oj.displayName="NestingContext";function cj(e){return"children"in e?cj(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function PQ(e,t){let n=Du(e),s=h.useRef([]),r=wP(),i=nj(),l=Ua((x,v=Lc.Hidden)=>{let w=s.current.findIndex(({el:b})=>b===x);w!==-1&&(Ao(v,{[Lc.Unmount](){s.current.splice(w,1)},[Lc.Hidden](){s.current[w].state="hidden"}}),i.microTask(()=>{var b;!cj(s)&&r.current&&((b=n.current)==null||b.call(n))}))}),o=Ua(x=>{let v=s.current.find(({el:w})=>w===x);return v?v.state!=="visible"&&(v.state="visible"):s.current.push({el:x,state:"visible"}),()=>l(x,Lc.Unmount)}),c=h.useRef([]),d=h.useRef(Promise.resolve()),u=h.useRef({enter:[],leave:[]}),f=Ua((x,v,w)=>{c.current.splice(0),t&&(t.chains.current[v]=t.chains.current[v].filter(([b])=>b!==x)),t?.chains.current[v].push([x,new Promise(b=>{c.current.push(b)})]),t?.chains.current[v].push([x,new Promise(b=>{Promise.all(u.current[v].map(([C,N])=>N)).then(()=>b())})]),v==="enter"?d.current=d.current.then(()=>t?.wait.current).then(()=>w(v)):w(v)}),p=Ua((x,v,w)=>{Promise.all(u.current[v].splice(0).map(([b,C])=>C)).then(()=>{var b;(b=c.current.shift())==null||b()}).then(()=>w(v))});return h.useMemo(()=>({children:s,register:o,unregister:l,onStart:f,onStop:p,wait:d,chains:u}),[o,l,s,f,p,u,d])}let DQ=h.Fragment,OQ=Iv.RenderStrategy;function sMe(e,t){var n,s;let{transition:r=!0,beforeEnter:i,afterEnter:l,beforeLeave:o,afterLeave:c,enter:d,enterFrom:u,enterTo:f,entered:p,leave:x,leaveFrom:v,leaveTo:w,...b}=e,[C,N]=h.useState(null),S=h.useRef(null),A=LQ(e),k=Sl(...A?[S,t,N]:t===null?[]:[t]),_=(n=b.unmount)==null||n?Lc.Unmount:Lc.Hidden,{show:T,appear:E,initial:I}=aMe(),[z,$]=h.useState(T?"visible":"hidden"),P=nMe(),{register:O,unregister:B}=P;sr(()=>O(S),[O,S]),sr(()=>{if(_===Lc.Hidden&&S.current){if(T&&z!=="visible"){$("visible");return}return Ao(z,{hidden:()=>B(S),visible:()=>O(S)})}},[z,S,O,B,T,_]);let Q=ij();sr(()=>{if(A&&Q&&z==="visible"&&S.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[S,z,Q,A]);let F=I&&!E,ee=E&&T&&I,V=h.useRef(!1),de=PQ(()=>{V.current||($("hidden"),B(S))},P),oe=Ua(Oe=>{V.current=!0;let Fe=Oe?"enter":"leave";de.onStart(S,Fe,me=>{me==="enter"?i?.():me==="leave"&&o?.()})}),Z=Ua(Oe=>{let Fe=Oe?"enter":"leave";V.current=!1,de.onStop(S,Fe,me=>{me==="enter"?l?.():me==="leave"&&c?.()}),Fe==="leave"&&!cj(de)&&($("hidden"),B(S))});h.useEffect(()=>{A&&r||(oe(T),Z(T))},[T,A,r]);let R=!(!r||!A||!Q||F),[,ve]=S5e(R,C,T,{start:oe,end:Z}),X=kd({ref:k,className:((s=ST(b.className,ee&&d,ee&&u,ve.enter&&d,ve.enter&&ve.closed&&u,ve.enter&&!ve.closed&&f,ve.leave&&x,ve.leave&&!ve.closed&&v,ve.leave&&ve.closed&&w,!ve.transition&&T&&p))==null?void 0:s.trim())||void 0,...C5e(ve)}),je=0;z==="visible"&&(je|=Ti.Open),z==="hidden"&&(je|=Ti.Closed),T&&z==="hidden"&&(je|=Ti.Opening),!T&&z==="visible"&&(je|=Ti.Closing);let Ne=gi();return wt.createElement(oj.Provider,{value:de},wt.createElement(k5e,{value:je},Ne({ourProps:X,theirProps:b,defaultTag:DQ,features:OQ,visible:z==="visible",name:"Transition.Child"})))}function rMe(e,t){let{show:n,appear:s=!1,unmount:r=!0,...i}=e,l=h.useRef(null),o=LQ(e),c=Sl(...o?[l,t]:t===null?[]:[t]);ij();let d=rj();if(n===void 0&&d!==null&&(n=(d&Ti.Open)===Ti.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[u,f]=h.useState(n?"visible":"hidden"),p=PQ(()=>{n||f("hidden")}),[x,v]=h.useState(!0),w=h.useRef([n]);sr(()=>{x!==!1&&w.current[w.current.length-1]!==n&&(w.current.push(n),v(!1))},[w,n]);let b=h.useMemo(()=>({show:n,appear:s,initial:x}),[n,s,x]);sr(()=>{n?f("visible"):!cj(p)&&l.current!==null&&f("hidden")},[n,p]);let C={unmount:r},N=Ua(()=>{var k;x&&v(!1),(k=e.beforeEnter)==null||k.call(e)}),S=Ua(()=>{var k;x&&v(!1),(k=e.beforeLeave)==null||k.call(e)}),A=gi();return wt.createElement(oj.Provider,{value:p},wt.createElement(lj.Provider,{value:b},A({ourProps:{...C,as:h.Fragment,children:wt.createElement(MQ,{ref:c,...C,...i,beforeEnter:N,beforeLeave:S})},theirProps:{},defaultTag:h.Fragment,features:OQ,visible:u==="visible",name:"Transition"})))}function iMe(e,t){let n=h.useContext(lj)!==null,s=rj()!==null;return wt.createElement(wt.Fragment,null,!n&&s?wt.createElement(kT,{ref:t,...e}):wt.createElement(MQ,{ref:t,...e}))}let kT=ur(rMe),MQ=ur(sMe),NP=ur(iMe),Nb=Object.assign(kT,{Child:NP,Root:kT});var lMe=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(lMe||{}),oMe=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(oMe||{});let cMe={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},jP=h.createContext(null);jP.displayName="DialogContext";function dj(e){let t=h.useContext(jP);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,dj),n}return t}function dMe(e,t){return Ao(t.type,cMe,e,t)}let m7=ur(function(e,t){let n=h.useId(),{id:s=`headlessui-dialog-${n}`,open:r,onClose:i,initialFocus:l,role:o="dialog",autoFocus:c=!0,__demoMode:d=!1,unmount:u=!1,...f}=e,p=h.useRef(!1);o=(function(){return o==="dialog"||o==="alertdialog"?o:(p.current||(p.current=!0,console.warn(`Invalid role [${o}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")})();let x=rj();r===void 0&&x!==null&&(r=(x&Ti.Open)===Ti.Open);let v=h.useRef(null),w=Sl(v,t),b=bP(v.current),C=r?0:1,[N,S]=h.useReducer(dMe,{titleId:null,descriptionId:null,panelRef:h.createRef()}),A=Ua(()=>i(!1)),k=Ua(ve=>S({type:0,id:ve})),_=ij()?C===0:!1,[T,E]=z5e(),I={get current(){var ve;return(ve=N.panelRef.current)!=null?ve:v.current}},z=EQ(),{resolveContainers:$}=G5e({mainTreeNode:z,portals:T,defaultContainers:[I]}),P=x!==null?(x&Ti.Closing)===Ti.Closing:!1;t5e(d||P?!1:_,{allowed:Ua(()=>{var ve,X;return[(X=(ve=v.current)==null?void 0:ve.closest("[data-headlessui-portal]"))!=null?X:null]}),disallowed:Ua(()=>{var ve;return[(ve=z?.closest("body > *:not(#headlessui-portal-root)"))!=null?ve:null]})});let O=pQ.get(null);sr(()=>{if(_)return O.actions.push(s),()=>O.actions.pop(s)},[O,s,_]);let B=xQ(O,h.useCallback(ve=>O.selectors.isTop(ve,s),[O,s]));f5e(B,$,ve=>{ve.preventDefault(),A()}),B5e(B,b?.defaultView,ve=>{ve.preventDefault(),ve.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),A()}),v5e(d||P?!1:_,b,$),a5e(_,v,A);let[Q,F]=ROe(),ee=h.useMemo(()=>[{dialogState:C,close:A,setTitleId:k,unmount:u},N],[C,A,k,u,N]),V=Px({open:C===0}),de={ref:w,id:s,role:o,tabIndex:-1,"aria-modal":d?void 0:C===0?!0:void 0,"aria-labelledby":N.titleId,"aria-describedby":Q,unmount:u},oe=!H5e(),Z=Od.None;_&&!d&&(Z|=Od.RestoreFocus,Z|=Od.TabLock,c&&(Z|=Od.AutoFocus),oe&&(Z|=Od.InitialFocus));let R=gi();return wt.createElement(L5e,null,wt.createElement(d7,{force:!0},wt.createElement(F5e,null,wt.createElement(jP.Provider,{value:ee},wt.createElement(_Q,{target:v},wt.createElement(d7,{force:!1},wt.createElement(F,{slot:V},wt.createElement(E,null,wt.createElement(Q5e,{initialFocus:l,initialFocusFallback:v,containers:$,features:Z},wt.createElement(GOe,{value:A},R({ourProps:de,theirProps:f,slot:V,defaultTag:uMe,features:mMe,visible:C===0,name:"Dialog"})))))))))))}),uMe="div",mMe=Iv.RenderStrategy|Iv.Static;function fMe(e,t){let{transition:n=!1,open:s,...r}=e,i=rj(),l=e.hasOwnProperty("open")||i!==null,o=e.hasOwnProperty("onClose");if(!l&&!o)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!l)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!o)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!i&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(s!==void 0||n)&&!r.static?wt.createElement(u7,null,wt.createElement(Nb,{show:s,transition:n,unmount:r.unmount},wt.createElement(m7,{ref:t,...r}))):wt.createElement(u7,null,wt.createElement(m7,{ref:t,open:s,...r}))}let hMe="div";function gMe(e,t){let n=h.useId(),{id:s=`headlessui-dialog-panel-${n}`,transition:r=!1,...i}=e,[{dialogState:l,unmount:o},c]=dj("Dialog.Panel"),d=Sl(t,c.panelRef),u=Px({open:l===0}),f=Ua(b=>{b.stopPropagation()}),p={ref:d,id:s,onClick:f},x=r?NP:h.Fragment,v=r?{unmount:o}:{},w=gi();return wt.createElement(x,{...v},w({ourProps:p,theirProps:i,slot:u,defaultTag:hMe,name:"Dialog.Panel"}))}let pMe="div";function xMe(e,t){let{transition:n=!1,...s}=e,[{dialogState:r,unmount:i}]=dj("Dialog.Backdrop"),l=Px({open:r===0}),o={ref:t,"aria-hidden":!0},c=n?NP:h.Fragment,d=n?{unmount:i}:{},u=gi();return wt.createElement(c,{...d},u({ourProps:o,theirProps:s,slot:l,defaultTag:pMe,name:"Dialog.Backdrop"}))}let yMe="h2";function bMe(e,t){let n=h.useId(),{id:s=`headlessui-dialog-title-${n}`,...r}=e,[{dialogState:i,setTitleId:l}]=dj("Dialog.Title"),o=Sl(t);h.useEffect(()=>(l(s),()=>l(null)),[s,l]);let c=Px({open:i===0}),d={ref:o,id:s};return gi()({ourProps:d,theirProps:r,slot:c,defaultTag:yMe,name:"Dialog.Title"})}let vMe=ur(fMe),wMe=ur(gMe);ur(xMe);let NMe=ur(bMe),f7=Object.assign(vMe,{Panel:wMe,Title:NMe,Description:BOe});function Ox({isOpen:e,onClose:t,onSave:n,onEdit:s,setFormData:r,formData:i,isEditing:l=!1,viewMode:o=!1,users:c=[],currentUser:d,onDelete:u}){const[f,p]=h.useState([]),[x,v]=h.useState([]),[w,b]=h.useState({}),C=_=>{const{name:T,value:E}=_.target;T==="subject"&&E.trim()&&b(I=>({...I,subject:!1})),r(I=>{const z={...I,[T]:E};return T==="relatedType1"&&(z.relatedTo1="",E==="Lead"?(z.relatedType2=null,z.relatedTo2=null,v([])):E==="Account"&&(z.relatedType2="Contact")),T==="relatedType2"&&(z.relatedTo2=""),z})};h.useEffect(()=>{if(!e)return;(async()=>{try{p([]);let T;i.relatedType1==="Lead"?T=await ie.get("/leads/admin/getLeads"):i.relatedType1==="Account"&&(T=await ie.get("/accounts/admin/fetch-all"));let E=[];if(T&&Array.isArray(T.data)&&(E=T.data),l&&i.relatedTo1)try{let I;i.relatedType1==="Lead"?I=await ie.get(`/leads/get/${i.relatedTo1}`):i.relatedType1==="Account"&&(I=await ie.get(`/accounts/get/${i.relatedTo1}`)),I&&I.data&&(E.some($=>String($.id)===String(i.relatedTo1))||(E=[I.data,...E]))}catch(I){console.error("Error fetching specific related item:",I)}p(E)}catch(T){console.error("Error fetching related 1 data:",T),p([])}})()},[i.relatedType1,e,l,i.relatedTo1]),h.useEffect(()=>{if(!e||o)return;(async()=>{try{if(v([]),i.relatedType1==="Account"&&i.relatedTo1){let T;i.relatedType2==="Contact"?T=await ie.get(`/contacts/from-acc/${i.relatedTo1}`):i.relatedType2==="Deal"&&(T=await ie.get(`/deals/from-acc/${i.relatedTo1}`));let E=[];if(T&&Array.isArray(T.data)&&(E=T.data),l&&i.relatedTo2)try{let I;i.relatedType2==="Contact"?I=await ie.get(`/contacts/get/${i.relatedTo2}`):i.relatedType2==="Deal"&&(I=await ie.get(`/deals/get/${i.relatedTo2}`)),I&&I.data&&(E.some($=>String($.id)===String(i.relatedTo2))||(E=[I.data,...E]))}catch(I){console.error("Error fetching specific related item:",I)}v(E)}}catch(T){console.error("Error fetching related 2 data:",T),v([])}})()},[i.relatedType1,i.relatedTo1,i.relatedType2,i.relatedTo2,e,o,l]);const[N,S]=h.useState(!1);h.useEffect(()=>{e&&(S(!1),b({}))},[e]);const A=_=>{_.preventDefault(),S(!0);const T={};i.subject?.trim()||(T.subject=!0,H.error("Title is required")),b(T),i.relatedTo1||(T.relatedTo1=!0,H.error(`Please select a ${i.relatedType1||"Lead/Account"}.`)),i.assignedTo||(T.assignedTo=!0,H.error("Assigned To is required.")),!(Object.keys(T).length>0)&&n?.(i)},k=o?"Task Details":l?"Edit Task":"Create Task";return a.jsx(Nb,{appear:!0,show:e,as:h.Fragment,children:a.jsxs(f7,{as:"div",className:"relative z-50",onClose:t,children:[a.jsx(Nb.Child,{as:h.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:a.jsx("div",{className:"fixed inset-0 bg-black/40"})}),a.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 overflow-y-auto",children:a.jsx("div",{className:"flex min-h-full items-center justify-center text-center",children:a.jsx(Nb.Child,{as:h.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:a.jsx(f7.Panel,{className:"w-full max-w-full sm:max-w-3xl text-left align-middle transform transition-all",children:a.jsxs("div",{className:"bg-white w-full min-w-sm md:min-w-lg rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] flex flex-col hide-scrollbar",children:[a.jsx("button",{onClick:()=>{t(),S(!1),b({})},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(Ha,{size:25})}),a.jsx("h3",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:k}),o&&a.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",onClick:t,children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[90vh] overflow-y-auto hide-scrollbar font-manrope relative",onClick:_=>_.stopPropagation(),children:[a.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-4 rounded-t-xl",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Tasks"}),a.jsx("button",{onClick:()=>{t(),S(!1)},className:"text-gray-500 hover:text-white transition cursor-pointer",children:a.jsx(Ha,{size:25})})]}),a.jsx("div",{className:"p-6 lg:p-4",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:i.subject||"No Title"})}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 cursor-pointer",onClick:()=>{r&&r(i),typeof s=="function"&&s()},children:"Edit"}),a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400 cursor-pointer",onClick:()=>u(i),children:[a.jsx(Wt,{className:"mr-2"}),"Delete"]})]})]})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white overflow-x-auto",children:a.jsx("button",{className:"flex-1 min-w-[90px] px-4 py-2 lg:text-lg text-sm font-medium text-center text-white",children:"Overview"})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 lg:p-5 border border-gray-200 text-sm text-gray-700",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Title:"}),a.jsx("p",{children:i.subject||""})]}),i.relatedType1Text&&i.relatedTo1Text&&a.jsxs("div",{children:[a.jsxs("p",{className:"font-semibold",children:[i.relatedType1Text,":"]}),a.jsx("p",{children:i.relatedTo1Text})]}),i.relatedType2Text&&i.relatedTo2Text&&a.jsxs("div",{children:[a.jsxs("p",{className:"font-semibold",children:[i.relatedType2,":"]}),a.jsx("p",{children:i.relatedTo2Text})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Priority:"}),a.jsx("p",{children:i.priority||""})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Status:"}),a.jsx("p",{children:i.status||""})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Due Date:"}),a.jsx("p",{children:i.dueDate||""})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("p",{className:"font-semibold",children:"Description:"}),a.jsx("p",{className:"whitespace-pre-wrap",children:i.description||""})]})]})})]})]})}),!o&&a.jsxs("form",{onSubmit:A,className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm flex-1",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Title ",a.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),a.jsx("input",{type:"text",name:"subject",value:i.subject,onChange:C,disabled:o,placeholder:"Enter task title",className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
                            ${w.subject?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
                            ${o?"bg-gray-50 cursor-not-allowed":""}
                          `})]}),a.jsxs("div",{className:"w-full flex flex-col",children:[a.jsxs("select",{name:"relatedType1",onChange:C,value:i.relatedType1,disabled:o,className:`w-23 rounded-md text-sm focus:ring-2 focus:ring-blue-400 outline-none mb-2 disabled:text-gray-400 ${o?"cursor-not-allowed":""}`,children:[a.jsx("option",{value:"Lead",children:"Lead"}),a.jsx("option",{value:"Account",children:"Account"})]}),a.jsx(n_,{disabled:!1,items:Array.isArray(f)?f:[],value:i.relatedTo1??"",placeholder:`Search ${i.relatedType1||"here"}...`,getLabel:_=>i.relatedType1==="Lead"?_.title:_.name??"",onChange:_=>r(T=>({...T,relatedTo1:_})),required:!0,isSubmitted:N})]}),a.jsxs("div",{className:"w-full flex flex-col",children:[a.jsxs("select",{name:"relatedType2",onChange:C,value:i.relatedType2??"Contact",className:"w-23 rounded-md text-sm focus:ring-2 focus:ring-blue-400 outline-none mb-2 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:o||i.relatedType1==="Lead",children:[a.jsx("option",{value:"Contact",children:"Contact"}),a.jsx("option",{value:"Deal",children:"Deal"})]}),a.jsx(n_,{disabled:i.relatedType1==="Lead",items:Array.isArray(x)?x:[],value:i.relatedTo2??"",placeholder:i.relatedType1==="Lead"?"":Array.isArray(x)&&x.length>0?`Search ${i.relatedType2||"Contact"}...`:`No ${i.relatedType2||""} data found`,getLabel:_=>i.relatedType2==="Contact"?`${_.first_name??""} ${_.last_name??""}`.trim():_.name??"",onChange:_=>r(T=>({...T,relatedTo2:_}))})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Description"}),a.jsx("textarea",{name:"description",value:i.description,onChange:C,disabled:o,placeholder:"Enter task description",rows:3,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${o?"bg-gray-50 cursor-not-allowed":""}`})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Priority"}),a.jsxs("select",{name:"priority",value:i.priority,onChange:C,disabled:o,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${o?"bg-gray-50 cursor-not-allowed":""}`,children:[a.jsx("option",{value:"Low",children:"Low"}),a.jsx("option",{value:"Normal",children:"Normal"}),a.jsx("option",{value:"High",children:"High"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Due Date"}),a.jsx("input",{type:"datetime-local",name:"dueDate",value:i.dueDate,onChange:C,disabled:o,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${o?"bg-gray-50 cursor-not-allowed":""}`})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",a.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),a.jsx(n_,{items:Array.isArray(c)?c:[],value:i.assignedTo??"",placeholder:"Search an account...",getLabel:_=>`${_.first_name} ${_.last_name}`,onChange:_=>r(T=>({...T,assignedTo:_})),disabled:o||d?.role==="Sales",required:!0,isSubmitted:N})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),a.jsxs("select",{name:"status",value:i.status,onChange:C,disabled:o,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${o?"bg-gray-50 cursor-not-allowed":""}`,children:[a.jsx("option",{value:"Not started",children:"Not started"}),a.jsx("option",{value:"In progress",children:"In Progress"}),a.jsx("option",{value:"Deferred",children:"Deferred"}),a.jsx("option",{value:"Completed",children:"Completed"})]})]}),!o&&a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[a.jsx("button",{type:"button",onClick:()=>{t(),S(!1),b({})},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition",children:l?"Update Task":"Create Task"})]})]})]})})})})})]})})}function n_({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,required:o=!1,isSubmitted:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),v=e.find(N=>String(N.id)===String(t)),w=v?s(v):"",b=o&&c&&!t,C=h.useMemo(()=>{const N=f.trim().toLowerCase();return(N?e.filter(A=>(s(A)||"").toLowerCase().includes(N)):e).slice(0,l)},[e,f,s,l]);return h.useEffect(()=>{const N=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),h.useEffect(()=>{d||p("")},[d]),a.jsxs("div",{ref:x,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:d?f:w,placeholder:r,onFocus:()=>!i&&u(!0),onChange:N=>{p(N.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${b?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:C.length>0?C.map(N=>{const S=String(N.id),A=s(N),k=String(t)===S;return a.jsx("button",{type:"button",onClick:()=>{n(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:A||"--"},S)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}const h7=["Not started","In progress","Deferred","Completed"],g7={NOT_STARTED:"Not started","NOT STARTED":"Not started","TO DO":"Not started",IN_PROGRESS:"In progress","IN PROGRESS":"In progress",COMPLETED:"Completed",DEFERRED:"Deferred","Not started":"Not started","In progress":"In progress",Completed:"Completed",Deferred:"Deferred","In Progress":"In progress","To Do":"Not started",Review:"Deferred"},IQ=e=>e&&(g7[e]||g7[String(e).toUpperCase()])||"Not started",jMe=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const n=t.getTimezoneOffset();return new Date(t.getTime()-n*60*1e3).toISOString().slice(0,16)},p7=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},CMe=e=>{const t=e.subject?.trim()??"",n=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),IQ(e.status);let r=null,i=null,l=null,o=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2&&(o=Number(e.relatedTo2)));const c=e.assignedTo?Number(e.assignedTo):null,d=l||o||i||r,u=l?"Contact":o?"Deal":i?"Account":r?"Lead":null;return{title:t,description:n,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:c,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:l,deal_id:o,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:d,related_type:u}},SMe=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",n=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",l=()=>e.lead?.id||e.lead_id,o=()=>e.account?.id||e.account_id,c=()=>e.contact?.id||e.contact_id,d=()=>e.deal?.id||e.deal_id,u=()=>e.task_assign_to?.id||e.assigned_to,f=()=>e.lead?.title||e.lead_id,p=()=>e.account?.name||e.account_id,x=()=>i||e.contact_id,v=()=>e.deal?.name||e.deal_id;let w="Lead",b="",C="",N="",S="Lead",A="",k="",_="";const T=o(),E=p(),I=l(),z=f();if(T){w="Account",S="Account",A=E,b=String(T);const $=c(),P=d(),O=x(),B=v();$?(C="Contact",k="Contact",_=O,N=String($)):P&&(k="Deal",C="Deal",_=B,N=String(P))}else I?(S="Lead",A=z,w="Lead",b=String(I)):e.related_type==="Account"&&(w="Account",b=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:IQ(e.status),dueDate:s,dateAssigned:r,assignedToId:u()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:n,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:S,relatedTo1Text:A,relatedType2Text:k,relatedTo2Text:_,subject:e.title,relatedType1:w,relatedTo1:b,relatedType2:C,relatedTo2:N}};function _Me(){h.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=ta(),[n,s]=h.useState("board"),[r,i]=h.useState(!1),[l,o]=h.useState(null),[c,d]=h.useState(!1),[u,f]=h.useState([]),[p,x]=h.useState(!0),[v,w]=h.useState(""),[b,C]=h.useState("Filter by Status"),[N,S]=h.useState("Filter by Priority"),[A,k]=h.useState([]),[_,T]=h.useState(1),[E,I]=h.useState(10),[z,$]=h.useState(null),[P,O]=h.useState(!1),[B,Q]=h.useState([]),F=vt(),ee=Yt(),[V,de]=h.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""}),[oe,Z]=h.useState(null);h.useEffect(()=>{const Ae=ee.state?.openTaskModal,Ie=ee.state?.initialTaskData,Je=ee.state?.taskID;Ae?(i(!0),Ie&&de(he=>({...he,...Ie})),F(ee.pathname,{replace:!0,state:{}})):Je&&(Z(Je),F(ee.pathname,{replace:!0,state:{}}))},[ee,F]),h.useEffect(()=>{if(oe&&u.length>0&&!p){const Ae=u.find(Ie=>Ie.id===oe);Ae?je(Ae,!0):H.error("Task not found."),Z(null)}},[oe,u,p]);const R=async()=>{try{const Ae=await ie.get("/users/all");k(Array.isArray(Ae.data)?Ae.data:[])}catch(Ae){console.error("Failed to fetch users:",Ae),H.error("Failed to fetch users.")}},ve=async()=>{try{x(!0);const Ae=await ie.get("/tasks/all"),Je=(Array.isArray(Ae.data)?Ae.data:[]).map(SMe);Je.sort((he,Me)=>{const re=he.createdAt?new Date(he.createdAt):0;return(Me.createdAt?new Date(Me.createdAt):0)-re}),console.log("Fetched Tasks:",Je),f(Je),n==="list"&&T(1)}catch(Ae){console.error("Failed to load tasks:",Ae),H.error("Failed to load tasks.")}finally{x(!1)}};h.useEffect(()=>{!t&&e&&(R(),ve())},[t,e]);const X=()=>{o(null),de({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},je=(Ae=null,Ie=!1)=>{o(Ae),d(Ie),Ae?de({id:Ae.id,subject:Ae.title||"",description:Ae.description||"",priority:Ae.priority||"Normal",status:Ae.status||"Not started",dueDate:jMe(Ae.dueDate),assignedTo:Ae.assignedToId?String(Ae.assignedToId):"",notes:Ae.notes||"",relatedType1Text:Ae.relatedType1Text||"",relatedTo1Text:Ae.relatedTo1Text||"",relatedType2Text:Ae.relatedType2Text||"",relatedTo2Text:Ae.relatedTo2Text||"",relatedType1:Ae.relatedType1||"",relatedTo1:Ae.relatedTo1||"",relatedType2:Ae.relatedType2||"",relatedTo2:Ae.relatedTo2||""}):X(),i(!0)},Ne=()=>{i(!1),o(null),d(!1),X()},Oe=async Ae=>{const Ie=CMe(Ae);try{l&&!c?(await ie.put(`/tasks/${l.id}`,Ie),H.success("Task updated successfully.")):(await ie.post("/tasks/create",Ie),H.success("Task created successfully.")),i(!1),await ve()}catch(Je){console.error("Failed to save task:",Je);const he=Je.response?.data?.detail||"Failed to save task.";H.error(he)}},Fe=Ae=>{Ae&&$({title:"Delete Task",message:a.jsxs(a.Fragment,{children:["Are you sure you want to delete ",a.jsx("span",{className:"font-semibold",children:Ae.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:Ae.id}})},me=()=>{if(pe.every(Ae=>B.includes(Ae.id)))Q(B.filter(Ae=>!pe.map(Ie=>Ie.id).includes(Ae)));else{const Ae=pe.map(Ie=>Ie.id);Q([...new Set([...B,...Ae])])}},Be=Ae=>{Q(Ie=>Ie.includes(Ae)?Ie.filter(Je=>Je!==Ae):[...Ie,Ae])},Pe=async()=>{B.length!==0&&$({title:"Delete Tasks",message:a.jsxs("span",{children:["Are you sure you want to delete"," ",a.jsx("span",{className:"font-semibold",children:B.length})," selected tasks? This action cannot be undone."]}),confirmLabel:`Delete ${B.length} Task(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",task_ids:B}})},we=async()=>{if(!z?.action){$(null);return}const{action:Ae}=z;O(!0);try{Ae.type==="delete"?(await ie.delete(`/tasks/${Ae.targetId}`),H.success("Task deleted successfully."),await ve()):Ae.type==="bulk-delete"&&(await ie.delete("/tasks/admin/bulk-delete",{data:{task_ids:Ae.task_ids}}),H.success(`Successfully deleted ${Ae.task_ids.length} tasks`),Q([]),await ve())}catch(Ie){console.error("Task action failed:",Ie),H.error("Failed to delete task.")}finally{O(!1),$(null)}},ne=()=>{P||$(null)},Le=h.useMemo(()=>{const Ae=v.trim().toLowerCase();return[...u].sort((Je,he)=>{const Me=Je.createdAt?new Date(Je.createdAt):0;return(he.createdAt?new Date(he.createdAt):0)-Me}).filter(Je=>{const he=Ae===""||Je.title?.toLowerCase().includes(Ae)||Je.description?.toLowerCase().includes(Ae)||Je.assignedToName?.toLowerCase().includes(Ae)||Je.createdBy?.toLowerCase().includes(Ae),Me=b==="Filter by Status"||Je.status===b,re=N==="Filter by Priority"||Je.priority===N;return he&&Me&&re})},[u,v,b,N]);h.useEffect(()=>{T(1)},[v,b,N,n,E]),h.useEffect(()=>{if(n==="list"){const Ae=Le.length===0?1:Math.ceil(Le.length/E);_>Ae&&T(Ae)}},[Le.length,_,n,E]);const pe=h.useMemo(()=>{if(n==="board")return Le;const Ae=(_-1)*E;return Le.slice(Ae,Ae+E)},[Le,_,n,E]),le=h.useMemo(()=>{const Ae=new Date;return[{title:"To Do",value:u.filter(Ie=>Ie.status==="Not started").length,icon:Is,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:u.filter(Ie=>Ie.status==="In progress").length,icon:hl,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:u.filter(Ie=>Ie.status==="Completed").length,icon:xn,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:u.filter(Ie=>Ie.dueDate&&new Date(Ie.dueDate)<Ae&&Ie.status!=="Completed").length,icon:Ef,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:u.filter(Ie=>Ie.priority==="High").length,icon:ko,color:"text-orange-600",bgColor:"bg-orange-100"}]},[u]),ge=Ae=>Ae.dueDate&&new Date(Ae.dueDate)<new Date&&Ae.status!=="Completed",fe=Ae=>{switch(Ae.status){case"Not started":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Deferred":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},Te=Ae=>{switch(Ae){case"Not started":return"bg-blue-100 text-blue-700";case"In progress":return"bg-purple-100 text-purple-700";case"Deferred":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},Ye=Ae=>{switch(Ae){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&a.jsx(zt,{message:"Loading tasks..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(hl,{className:"text-blue-600"})," Tasks Board"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{type:"button",onClick:()=>je(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[a.jsx(da,{})," Create Task"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:le.map(Ae=>a.jsx(AMe,{...Ae},Ae.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search tasks",value:v,onChange:Ae=>w(Ae.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[a.jsxs("select",{value:b,onChange:Ae=>C(Ae.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"Filter by Status"}),h7.map(Ae=>a.jsx("option",{children:Ae},Ae))]}),a.jsxs("select",{value:N,onChange:Ae=>S(Ae.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"Filter by Priority"}),a.jsx("option",{children:"High"}),a.jsx("option",{children:"Normal"}),a.jsx("option",{children:"Low"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${n==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),a.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${n==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&n==="board"&&(Le.length>0?a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:h7.map(Ae=>{const Ie=pe.filter(Je=>Je.status===Ae);return a.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative rounded-md",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),a.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:Ae}),a.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:Ie.length})]}),a.jsx("div",{className:`space-y-3 ${Ie.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:Ie.length>0?Ie.map(Je=>a.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${fe(Je)}`,onClick:()=>je(Je,!0),children:[a.jsxs("div",{className:"text-left flex-1",children:[a.jsx("p",{className:"font-medium text-gray-800 text-sm",children:Je.title}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",Je.priority]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",Je.assignedToName]}),a.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",a.jsx("span",{className:ge(Je)?"text-red-600":"text-gray-600",children:Je.dateAssigned?p7(Je.dateAssigned):""})]})]}),a.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[a.jsx("button",{type:"button",onClick:he=>{he.stopPropagation(),je(Je)},className:"text-blue-500 hover:text-blue-700",children:a.jsx(rn,{})}),a.jsx("button",{type:"button",onClick:he=>{he.stopPropagation(),Fe(Je)},className:"text-red-500 hover:text-red-700",children:a.jsx(Wt,{})})]})]},Je.id)):a.jsx("div",{className:"text-center py-10 text-gray-500",children:"No tasks"})})]},Ae)})}):a.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No tasks found."})),!p&&!t&&n==="list"&&a.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-10",children:a.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:pe.length>0&&pe.every(Ae=>B.includes(Ae.id)),onChange:me})}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),a.jsx("th",{className:"py-3 px-4 font-medium text-center w-24",children:B.length>0?a.jsx("button",{onClick:Pe,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${B.length} selected tasks`,children:a.jsx(Wt,{size:18})}):""})]})}),a.jsx("tbody",{children:pe.length>0?pe.map(Ae=>a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",children:[a.jsx("td",{className:"py-3 px-4",onClick:Ie=>Ie.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:B.includes(Ae.id),onChange:()=>Be(Ae.id)})}),a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",onClick:()=>je(Ae,!0),children:Ae.title}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>je(Ae,!0),children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Te(Ae.status||"Not started")}`,children:Ae.status||"Not started"})}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>je(Ae,!0),children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Ye(Ae.priority||"Low")}`,children:Ae.priority||"Low"})}),a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",onClick:()=>je(Ae,!0),children:Ae.assignedToName||"Unassigned"}),a.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${ge(Ae)?"text-red-600 font-medium":""}`,onClick:()=>je(Ae,!0),children:Ae.dateAssigned?p7(Ae.dateAssigned):""}),a.jsx("td",{})]},Ae.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No tasks found."})})})]})})}),!p&&!t&&n==="list"&&a.jsx(Jt,{className:"mt-6",totalItems:Le.length,pageSize:E,currentPage:Le.length===0?0:_,onPrev:()=>T(Ae=>Math.max(Ae-1,1)),onNext:()=>T(Ae=>Math.min(Ae+1,Math.max(1,Math.ceil(Le.length/E)||1))),onPageSizeChange:Ae=>{I(Ae),T(1)},pageSizeOptions:[10,20,30,40,50],label:"tasks"}),a.jsx(Ox,{isOpen:r,onClose:Ne,onSave:Oe,onEdit:()=>d(!1),setFormData:de,formData:V,isEditing:!c&&!!l,viewMode:c,users:A,currentUser:e,onDelete:Fe}),z&&a.jsx(EMe,{open:!0,title:z.title,message:z.message,confirmLabel:z.confirmLabel,cancelLabel:z.cancelLabel,variant:z.variant,onConfirm:we,onCancel:ne,loading:P})]})}function AMe({icon:e,title:t,value:n,color:s,bgColor:r,onClick:i}){return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function EMe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r,variant:i,loading:l,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}function TMe(e){return At({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M235.4 172.2c0-11.4 9.3-19.9 20.5-19.9 11.4 0 20.7 8.5 20.7 19.9s-9.3 20-20.7 20c-11.2 0-20.5-8.6-20.5-20zm1.4 35.7H275V352h-38.2V207.9z"},child:[]},{tag:"path",attr:{d:"M256 76c48.1 0 93.3 18.7 127.3 52.7S436 207.9 436 256s-18.7 93.3-52.7 127.3S304.1 436 256 436c-48.1 0-93.3-18.7-127.3-52.7S76 304.1 76 256s18.7-93.3 52.7-127.3S207.9 76 256 76m0-28C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48z"},child:[]}]})(e)}const s_={name:"",description:"",manager_id:"",user_ids:[],company_id:""};function kMe({label:e,options:t,selectedValues:n,onChange:s,disabled:r=!1,placeholder:i="Select users...",isSubmitted:l=!1,required:o=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null);h.useEffect(()=>{function C(N){p.current&&!p.current.contains(N.target)&&(d(!1),f(""))}return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]);const x=t.filter(C=>C.label.toLowerCase().includes(u.toLowerCase())),v=C=>{const N=n.includes(C);let S;N?S=n.filter(A=>A!==C):S=[...n,C],s(S)},w=(C,N)=>{C.stopPropagation(),s(n.filter(S=>S!==N))},b=t.filter(C=>n.includes(C.value));return a.jsxs("div",{className:"relative",ref:p,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsxs("div",{onClick:()=>!r&&d(!c),className:`w-full border ${o&&l&&n.length===0?"border-red-500 ring-red-500":c?"border-gray-500 ring-1 ring-gray-400":"border-gray-300"} 
  rounded-md px-3 py-2 text-sm bg-white cursor-pointer min-h-[38px] flex flex-wrap items-center gap-2
  ${r?"bg-gray-100 cursor-not-allowed":""}`,children:[n.length===0&&a.jsx("span",{className:"text-gray-400 select-none",children:i}),b.map(C=>a.jsxs("span",{className:"bg-indigo-100 text-indigo-700 px-2 py-0.5 rounded text-xs flex items-center gap-1 border border-indigo-200",children:[C.label,!r&&a.jsx(Vt,{className:"cursor-pointer hover:text-indigo-900",onClick:N=>w(N,C.value)})]},C.value)),a.jsx("div",{className:"ml-auto text-gray-400",children:a.jsx(St,{})})]}),c&&!r&&a.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden flex flex-col",children:[a.jsx("div",{className:"p-2 border-b border-gray-100 sticky top-0 bg-white",children:a.jsxs("div",{className:"flex items-center px-2 py-1 bg-gray-50 rounded border border-gray-200",children:[a.jsx(Bt,{className:"text-gray-400 mr-2"}),a.jsx("input",{type:"text",className:"bg-transparent outline-none w-full text-sm",placeholder:"Search...",value:u,onChange:C=>f(C.target.value),autoFocus:!0})]})}),a.jsx("div",{className:"overflow-y-auto flex-1",children:x.length>0?x.map(C=>{const N=n.includes(C.value);return a.jsxs("div",{onClick:()=>v(C.value),className:`px-4 py-2 text-sm cursor-pointer flex items-center justify-between hover:bg-gray-50 
                      ${N?"bg-indigo-50 text-indigo-700":"text-gray-700"}`,children:[a.jsx("span",{children:C.label}),N&&a.jsx(XT,{className:"text-indigo-600"})]},C.value)}):a.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:"No results found"})})]})]})}function xc(){h.useEffect(()=>{document.title="Territory | Sari-Sari CRM"},[]);const e=vt(),{id:t}=Eo(),[n,s]=h.useState(""),[r,i]=h.useState(""),[l,o]=h.useState(""),[c,d]=h.useState(null),[u,f]=h.useState(!1),[p,x]=h.useState([]),[v,w]=h.useState(!1),[b,C]=h.useState([]),[N,S]=h.useState(s_),[A,k]=h.useState(!1),[_,T]=h.useState(!1),[E,I]=h.useState(null),[z,$]=h.useState(null),[P,O]=h.useState("board"),[B,Q]=h.useState(null),[F,ee]=h.useState(!1),[V,de]=h.useState(null),[oe,Z]=h.useState(1),[R,ve]=h.useState(10),[X,je]=h.useState([]),Ne=h.useRef(!1),{userRole:Oe}=zs(),Fe=h.useMemo(()=>{const ce=new Map;return p.forEach(ye=>{const Ue=`${ye.name}-${ye.manager_id||"no-manager"}`;if(!ce.has(Ue))ce.set(Ue,{...ye,assigned_users_list:ye.assigned_to?[ye.assigned_to]:[]});else{const et=ce.get(Ue);ye.assigned_to&&(et.assigned_users_list.some(lt=>lt.id===ye.assigned_to.id)||et.assigned_users_list.push(ye.assigned_to))}}),Array.from(ce.values())},[p]),me=h.useMemo(()=>{const ce=n.trim().toLowerCase(),ye=r.trim().toLowerCase(),Ue=l.trim();return[...Fe].sort((lt,Ee)=>{const tt=lt?.created_at?new Date(lt.created_at):0;return(Ee?.created_at?new Date(Ee.created_at):0)-tt}).filter(lt=>{const Ee=lt.name?.toLowerCase()||"",tt=lt.description?.toLowerCase()||"",be=lt.managed_by?`${lt.managed_by.first_name} ${lt.managed_by.last_name}`.toLowerCase():"",Xe=lt.status?.toString().toLowerCase()||"",M=lt.assigned_users_list.map(Se=>`${Se.first_name} ${Se.last_name}`.toLowerCase()).join(" "),Y=ce===""||[Ee,tt,be,Xe,M].some(Se=>Se&&Se.includes(ce)),te=ye===""||Xe===ye,K=Ue===""||String(lt.managed_by?.id||"")===Ue||lt.assigned_users_list.some(Se=>String(Se.id)===Ue);return Y&&te&&K})},[Fe,n,r,l]);h.useEffect(()=>{if(Ne.current){Ne.current=!1;return}if(t&&Fe.length>0&&!A&&!u&&!_){const ce=Fe.find(ye=>ye.id===parseInt(t));ce&&d(ce)}!t&&!A&&!u&&d(null)},[t,Fe,A,u,_]),h.useEffect(()=>{Z(1)},[n,r,l]),h.useEffect(()=>{Z(ce=>{const ye=Math.max(1,Math.ceil(me.length/R)||1);return ce>ye?ye:ce})},[me.length,R]);const Be=async()=>{try{const ce=await ie.get("/users/read/territory");C(ce.data)}catch(ce){console.error("Error fetching users:",ce)}},Pe=async()=>{w(!0);try{const ce=await ie.get("/territories/fetch"),ye=Array.isArray(ce.data)?ce.data:[];x(ye),console.log(ce.data)}catch(ce){console.error("Error fetching territories:",ce)}finally{w(!1)}};h.useEffect(()=>{Be(),Pe()},[]);const we=ce=>{const{name:ye,value:Ue}=ce.target;S(et=>({...et,[ye]:Ue}))},ne=ce=>{S(ye=>({...ye,user_ids:ce}))},Le=()=>{S(s_),k(!1),I(null),f(!0)},pe=(ce=!0)=>{f(!1),k(!1),I(null),S(s_)},le=ce=>{if(!ce)return;const ye=ce.assigned_users_list?ce.assigned_users_list.map(Ue=>String(Ue.id)):[];S({name:ce.name||"",description:ce.description||"",manager_id:ce.managed_by?String(ce.managed_by.id):"",user_ids:ye,company_id:ce.company_id?String(ce.company_id):""}),k(!0),I(ce.id),d(null),f(!0)},[ge,fe]=h.useState(!1),Te=ce=>{ce.preventDefault(),fe(!0);const ye=N.name.trim();if(!ye){H.error("Territory name is required.");return}if(!N.manager_id){H.error("Territory manager is required.");return}if(N.user_ids.length===0){H.error("Please assign at least one user.");return}let Ue=N.company_id?Number(N.company_id):null;if(!Ue&&N.user_ids.length>0){const Ee=N.user_ids[0],tt=b.find(be=>String(be.id)===String(Ee));tt&&tt.company&&(Ue=tt.company.id)}const et={name:ye,description:N.description?.trim()||"",manager_id:N.manager_id?Number(N.manager_id):null,user_ids:N.user_ids.map(Ee=>Number(Ee)),company_id:Ue},lt=A&&E?"update":"create";Q({title:lt==="create"?"Confirm New Territory":"Confirm Update",message:a.jsxs("span",{children:[lt==="create"?"Create":"Update"," territory ",a.jsx("span",{className:"font-semibold",children:ye})," with ",et.user_ids.length," assigned users?"]}),confirmLabel:lt==="create"?"Create":"Update",cancelLabel:"Cancel",variant:"primary",action:{type:lt,payload:et,targetId:E,name:ye}})},Ye=ce=>{ce&&Q({title:"Delete Territory Group",message:a.jsxs("span",{children:["Are you sure you want to delete ",a.jsx("span",{className:"font-semibold",children:ce.name}),"?",a.jsx("br",{}),a.jsxs("span",{className:"text-xs text-red-500",children:["This will remove assignments for all ",ce.assigned_users_list.length," users in this group."]})]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ce.id,name:ce.name}})},Ae=async()=>{X.length!==0&&Q({title:"Delete Territories",message:a.jsxs("span",{children:["Are you sure you want to delete"," ",a.jsx("span",{className:"font-semibold",children:X.length})," selected territories? This action cannot be undone."]}),confirmLabel:`Delete ${X.length} Territory(ies)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",territory_ids:X}})},Ie=ce=>{if(ce.target.checked){const ye=re.map(Ue=>Ue.id);je(ye)}else je([])},Je=ce=>{je(ye=>ye.includes(ce)?ye.filter(Ue=>Ue!==ce):[...ye,ce])},he=async()=>{if(!B?.action){Q(null);return}const{action:ce}=B,{type:ye,payload:Ue,targetId:et,name:lt}=ce;ee(!0);try{ye==="create"?(T(!0),await ie.post("/territories/assign",Ue),H.success(`Territory "${lt}" created.`),await Pe(),await Be(),pe(!1)):ye==="update"?(T(!0),await ie.put(`/territories/${et}`,Ue),H.success(`Territory "${lt}" updated.`),Ne.current=!0,pe(!1),d(null),t&&e("/admin/territory"),await Pe(),await Be()):ye==="delete"?(de(et),await ie.delete(`/territories/${et}`),H.success(`Territory "${lt}" deleted.`),await Pe(),c?.id===et&&d(null)):ye==="bulk-delete"&&(await ie.delete("/territories/admin/bulk-delete",{data:{territory_ids:ce.territory_ids}}),H.success(`Successfully deleted ${ce.territory_ids.length} territories`),je([]),await Pe())}catch(Ee){console.error(Ee),H.error("An error occurred.")}finally{T(!1),fe(!1),de(null),ee(!1),Q(null)}},Me=()=>{F||Q(null)},re=h.useMemo(()=>{if(P==="board")return me;const ce=(oe-1)*R;return me.slice(ce,ce+R)},[me,oe,R,P]),Qe=me.length>0,We=()=>Z(ce=>Math.max(ce-1,1)),dt=()=>Z(ce=>Math.min(ce+1,Math.ceil(me.length/R)||1)),ze=ce=>!ce||ce.length===0?"Unassigned":ce.length===1?`${ce[0].first_name} ${ce[0].last_name}`:`${ce[0].first_name} ${ce[0].last_name} +${ce.length-1} more`;return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[v&&a.jsx(zt,{message:"Loading territories..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-0 mb-7",children:[a.jsxs("h2",{className:"flex items-center text-2xl font-semibold text-gray-800",children:[a.jsx(Lo,{className:"mr-2 text-blue-600"})," Territory"]}),a.jsx("div",{className:"flex justify-center lg:justify-end md:justify-end w-full",children:["ceo","admin","group manager","group_manager"].includes(Oe.toLowerCase())&&(Array.isArray(b)&&b.length>0?a.jsxs("button",{onClick:Le,className:"flex items-center bg-black text-white px-3 py-2 rounded-md hover:bg-gray-800 text-sm",children:[a.jsx(da,{})," Create Territory"]}):a.jsxs("div",{className:"text-xs bg-red-50 p-2 rounded-lg ring ring-red-300 text-red-700 flex items-center gap-1",children:[a.jsx(TMe,{})," Add users to assign territories"]}))})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mt-6 mb-4 flex flex-col md:flex-row items-center gap-2",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full md:w-4/4",children:[a.jsx(Bt,{className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search territory",className:"focus:outline-none w-full",value:n,onChange:ce=>s(ce.target.value)})]}),Oe.toLowerCase()!=="sales"&&a.jsx("div",{className:"flex flex-col md:flex-row gap-2 w-full md:w-1/2",children:a.jsxs("select",{className:"border border-gray-300 rounded-lg px-3 h-11 w-full text-sm",value:l,onChange:ce=>o(ce.target.value),children:[a.jsx("option",{value:"",children:"Filter by Users"}),b.map(ce=>a.jsxs("option",{value:String(ce.id),children:[ce.first_name," ",ce.last_name]},ce.id))]})})]}),a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("button",{onClick:()=>O("board"),className:`px-4 py-2 rounded-full text-sm ${P==="board"?"bg-gray-800 text-white":"bg-gray-100"}`,children:"Board View"}),a.jsx("button",{onClick:()=>O("list"),className:`px-4 py-2 rounded-full text-sm ${P==="list"?"bg-gray-800 text-white":"bg-gray-100"}`,children:"List View"})]}),P==="board"&&a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:Qe?re.map(ce=>a.jsxs("div",{onClick:()=>{d(ce);let ye;Oe.toLowerCase()==="ceo"||Oe.toLowerCase()==="admin"?ye="admin":Oe.toLowerCase()==="group manager"||Oe.toLowerCase()==="group_manager"?ye="group-manager":Oe.toLowerCase()==="manager"?ye="manager":ye="sales",e(`/${ye}/territory/${ce.id}`)},className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative cursor-pointer hover:shadow-md transition",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),a.jsx("h3",{className:"font-medium text-gray-900 mb-2 pt-7",children:ce.name}),ce.description&&a.jsx("p",{className:"text-xs text-gray-600 mb-2 line-clamp-2",children:ce.description}),a.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-2",children:[a.jsx(Zt,{})," ",ze(ce.assigned_users_list)]}),a.jsx("div",{className:"h-px bg-gray-200 w-full mb-2"}),a.jsx("div",{className:"text-gray-400 text-xs text-right",children:ce.created_at?new Date(ce.created_at).toLocaleDateString():""})]},ce.id)):a.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No territories found."})}),P==="list"&&a.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-10",children:a.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:re.length>0&&re.every(ce=>X.includes(ce.id)),onChange:Ie})}),a.jsx("th",{className:"py-3 px-4",children:"Territory"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Manager"}),a.jsx("th",{className:"py-3 px-4 text-center w-24",children:X.length>0?a.jsx("button",{onClick:Ae,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${X.length} selected territories`,children:a.jsx(Wt,{size:18})}):""})]})}),a.jsx("tbody",{children:Qe?re.map(ce=>a.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",children:[a.jsx("td",{className:"py-3 px-4",onClick:ye=>ye.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:X.includes(ce.id),onChange:()=>Je(ce.id)})}),a.jsx("td",{className:"py-3 px-4 font-medium",onClick:()=>{d(ce);let ye;Oe.toLowerCase()==="ceo"||Oe.toLowerCase()==="admin"?ye="admin":Oe.toLowerCase()==="group manager"||Oe.toLowerCase()==="group_manager"?ye="group-manager":Oe.toLowerCase()==="manager"?ye="manager":ye="sales",e(`/${ye}/territory/${ce.id}`)},children:ce.name}),a.jsx("td",{className:"py-3 px-4",children:ze(ce.assigned_users_list)}),a.jsx("td",{className:"py-3 px-4",children:ce.managed_by?`${ce.managed_by.first_name}`:""}),a.jsx("td",{})]},ce.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No territories found."})})})]})}),c&&a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-xl p-8 relative",children:[a.jsx("button",{className:"absolute top-2 right-4 text-gray-500 hover:text-black",onClick:()=>{d(null);let ce;Oe.toLowerCase()==="ceo"||Oe.toLowerCase()==="admin"?ce="admin":Oe.toLowerCase()==="group manager"||Oe.toLowerCase()==="group_manager"?ce="group-manager":Oe.toLowerCase()==="manager"?ce="manager":ce="sales",e(`/${ce}/territory`)},children:a.jsx(Vt,{size:24})}),a.jsx("h2",{className:"text-3xl font-semibold mb-1",children:c.name}),a.jsx("div",{className:"h-px bg-gray-200 w-full mb-4"}),a.jsx("p",{className:"text-gray-500 mb-1",children:"Description"}),a.jsx("p",{className:"text-gray-700 text-sm mb-6",children:c.description||""}),a.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500",children:"Manager"}),a.jsx("div",{className:"font-medium",children:c.managed_by?`${c.managed_by.first_name} ${c.managed_by.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500",children:"Assigned To"}),a.jsx("div",{className:"flex flex-col gap-1 mt-1 max-h-32 overflow-y-auto",children:c.assigned_users_list&&c.assigned_users_list.length>0?c.assigned_users_list.map(ce=>a.jsxs("div",{className:"flex items-center gap-2 text-gray-800 font-medium",children:[a.jsx(Zt,{})," ",ce.first_name," ",ce.last_name]},ce.id)):"Unassigned"})]})]}),!["sales","manager"].includes(Oe.toLowerCase())&&a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsxs("button",{onClick:()=>le(c),className:"bg-blue-500 text-white px-4 py-2 rounded flex items-center gap-2",children:[a.jsx(rn,{})," Edit"]}),a.jsxs("button",{onClick:()=>Ye(c),className:"bg-red-500 text-white px-4 py-2 rounded flex items-center gap-2",children:[a.jsx(Wt,{})," Delete"]})]})]})}),u&&a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg w-full max-w-xl p-6 relative",children:[a.jsxs("button",{className:"absolute top-4 right-4",onClick:()=>{pe(),fe(!1)},children:[a.jsx(Vt,{size:22})," "]}),a.jsx("h2",{className:"text-xl font-semibold text-center mb-6",children:A?"Edit Territory":"Create Territory"}),a.jsxs("form",{className:"space-y-4",onSubmit:Te,noValidate:!0,children:[a.jsx(LMe,{label:"Territory Name",name:"name",value:N.name,onChange:we,required:!0,isSubmitted:ge}),a.jsx(PMe,{label:"Territory Manager",name:"manager_id",value:N.manager_id,onChange:we,options:[{value:"",label:"Assign Manager"},...b.map(ce=>({value:String(ce.id),label:`${ce.first_name} ${ce.last_name}`}))],required:!0,isSubmitted:ge}),a.jsx(kMe,{label:a.jsxs(a.Fragment,{children:["Assign Users ",a.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),placeholder:"Search and select users...",options:b.map(ce=>({value:String(ce.id),label:`${ce.first_name} ${ce.last_name}`})),selectedValues:N.user_ids,onChange:ne,required:!0,isSubmitted:ge}),a.jsx(DMe,{label:"Description",name:"description",value:N.description,onChange:we}),a.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[a.jsx("button",{type:"button",onClick:()=>{pe(),fe(!1)},className:"px-4 py-2 bg-red-400 text-white rounded",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:_,className:"px-4 py-2 bg-tertiary text-white rounded",children:_?"Saving...":"Save Territory"})]})]})]})}),P==="list"&&a.jsx(Jt,{className:"mt-4",totalItems:me.length,pageSize:R,currentPage:oe,onPrev:We,onNext:dt,onPageSizeChange:ce=>{ve(ce),Z(1)},label:"territories"}),B&&a.jsx(OMe,{open:!0,title:B.title,message:B.message,confirmLabel:B.confirmLabel,cancelLabel:B.cancelLabel,variant:B.variant,onConfirm:he,onCancel:Me,loading:F})]})})}function LMe({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,isSubmitted:c=!1,className:d=""}){const u=c&&l&&!n?.trim();return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100 ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
${d}
`})]})}function PMe({label:e,name:t,value:n,onChange:s,options:r,disabled:i=!1,required:l=!1,isSubmitted:o=!1}){const c=o&&l&&!n;return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("select",{name:t,value:n??"",onChange:s,disabled:i,className:`w-full border rounded-md px-3 py-2 text-sm bg-white focus:ring-2 outline-none disabled:bg-gray-100 ${c?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-gray-400"}`,children:r.map(d=>a.jsx("option",{value:d.value,children:d.label},d.value))})]})}function DMe({label:e,name:t,value:n,onChange:s,placeholder:r,rows:i=3,disabled:l=!1}){return a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:s,placeholder:r,rows:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-gray-400 outline-none disabled:bg-gray-100"})]})}function OMe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}const MMe=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"}],IMe=e=>e?String(e).toUpperCase():"",Md=e=>{const t=IMe(e);return t==="PLANNED"||t==="PENDING"?"PLANNED":t==="HELD"||t==="COMPLETED"?"HELD":t==="NOT HELD"||t==="NOT_HELD"||t==="CANCELLED"?"NOT_HELD":"PLANNED"},r_=e=>{const t=Md(e);return t==="PLANNED"?"PLANNED":t==="HELD"?"HELD":t==="NOT_HELD"?"NOT HELD":"--"},x7=e=>{switch(Md(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},y7=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function b7(){const[e,t]=h.useState(!1),[n,s]=h.useState(null),[r,i]=h.useState(null),[l,o]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(null),[v,w]=h.useState(!1),[b,C]=h.useState(null),[N,S]=h.useState(!1),[A,k]=h.useState(!1),[_,T]=h.useState("PLANNED"),[E,I]=h.useState(!1),[z,$]=h.useState(!1),[P,O]=h.useState(10),[B,Q]=h.useState(1),[F,ee]=h.useState([]),[V,de]=h.useState(null);ks();const oe=vt(),Z=Yt(),ve={subject:"",call_time:(()=>{const M=new Date,U=M.getFullYear(),Y=String(M.getMonth()+1).padStart(2,"0"),te=String(M.getDate()).padStart(2,"0");return`${U}-${Y}-${te}T08:00`})(),duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[X,je]=h.useState(ve);h.useEffect(()=>{const M=Z.state,U=M?.callID;if(U&&!M?.openCallModal){de(U),oe(Z.pathname,{replace:!0,state:{}});return}!M?.openCallModal||!M?.initialCallData||M.initialCallData.relatedType1==="Lead"&&Array.isArray(l)&&l.length===0||M.initialCallData.relatedType1==="Account"&&(!Array.isArray(l)||l.length===0)||(t(!0),je(Y=>({...Y,...M.initialCallData,relatedTo1:M.initialCallData.relatedTo1?String(M.initialCallData.relatedTo1):"",relatedTo2:M.initialCallData.relatedTo2?String(M.initialCallData.relatedTo2):""})),oe(Z.pathname,{replace:!0,state:{}}))},[Z.state,l]),h.useEffect(()=>{if(V&&u.length>0&&!z){const M=u.find(U=>U.id===V);M?s(M):H.error("Call not found."),de(null)}},[V,u,z]);const Ne=async()=>{try{$(!0);const M=await ie.get("/calls/admin/fetch-all"),Y=[...Array.isArray(M.data)?M.data:[]].sort((te,K)=>{const Se=te?.created_at?new Date(te.created_at):0;return(K?.created_at?new Date(K.created_at):0)-Se});f(Y)}catch(M){console.error("Error fetching calls:",M),H.error("Failed to load calls")}finally{$(!1)}},Oe=async()=>{try{const M=await ie.get("/users/all");x(M.data)}catch(M){console.error("Error fetching users: ",M)}};h.useEffect(()=>{Oe(),Ne()},[]);const[Fe,me]=h.useState(""),[Be,Pe]=h.useState("Filter by Status"),[we,ne]=h.useState("Filter by Users");h.useEffect(()=>{Q(1)},[Fe,Be,we,P]);const Le=h.useMemo(()=>u.filter(M=>{const U=!Fe||[M.subject,M.notes,M.lead?.title,M.account?.name,M.contact?.first_name,M.contact?.last_name,M.deal?.name].some(Se=>Se&&String(Se).toLowerCase().includes(Fe.toLowerCase())),Y=Be==="Filter by Status"||Md(M.status)===Be,te=M.call_assign_to?`${M.call_assign_to.first_name} ${M.call_assign_to.last_name}`:"";return U&&Y&&(we==="Filter by Users"||te===we)}),[u,Fe,Be,we]),pe=h.useMemo(()=>{const M=(B-1)*P;return Le.slice(M,M+P)},[Le,B,P]),le=Array.isArray(p)?p.map(M=>({id:M.id,name:`${M.first_name} ${M.last_name}`})):[],ge=()=>Q(M=>Math.max(1,M-1)),fe=()=>Q(M=>Math.min(M+1,Math.ceil(Le.length/P)||1)),Te=M=>{if(M.target.checked){const U=pe.map(Y=>Y.id);ee(U)}else ee([])},Ye=M=>{ee(U=>U.includes(M)?U.filter(Y=>Y!==M):[...U,M])},Ae=u.length,Ie=u.filter(M=>Md(M.status)==="PLANNED").length,Je=u.filter(M=>Md(M.status)==="HELD").length,he=u.filter(M=>Md(M.status)==="NOT_HELD").length,Me=[{title:"Total",value:Ae,icon:Es,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:Ie,icon:Is,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:Je,icon:xn,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:he,icon:Ts,color:"text-gray-600",bgColor:"bg-gray-100"}],[re,Qe]=h.useState("Overview"),We=M=>{const{name:U,value:Y}=M.target;je(te=>{const K={...te,[U]:Y};return U==="relatedType1"&&(K.relatedTo1="",Y==="Lead"?(K.relatedType2=null,K.relatedTo2=null,d([])):Y==="Account"&&(K.relatedType2="Contact")),U==="relatedType2"&&(K.relatedTo2=""),K})};h.useEffect(()=>{const M=async()=>{try{o([]);let U;X.relatedType1==="Lead"?U=await ie.get("/leads/admin/getLeads"):X.relatedType1==="Account"&&(U=await ie.get("/accounts/admin/fetch-all")),U&&Array.isArray(U.data)?o(U.data):o([])}catch(U){console.error("Error fetching data:",U),o([])}};X.relatedType1&&M()},[X.relatedType1]),h.useEffect(()=>{const M=async()=>{try{d([]);let U;if(X.relatedType1==="Account"&&X.relatedTo1)X.relatedType2==="Contact"?U=await ie.get(`/contacts/from-acc/${X.relatedTo1}`):X.relatedType2==="Deal"&&(U=await ie.get(`/deals/from-acc/${X.relatedTo1}`));else{d([]);return}U&&Array.isArray(U.data)?d(U.data):d([])}catch(U){console.error("Error fetching data:",U),d([])}};X.relatedType2&&M()},[X.relatedType2,X.relatedTo1,X.relatedType1]);const[dt,ze]=h.useState(!1),ce=M=>{M.preventDefault(),ze(!0);const U=X.subject;if(!U||U.trim()===""){H.error("Subject is required.");return}if(!X.relatedTo1){H.error(`Please select a ${X.relatedType1||"Lead/Account"}.`);return}if(!X.assigned_to){H.error("Subject is required.");return}const te={...X,duration_minutes:X.duration_minutes?parseInt(X.duration_minutes,10):null,relatedTo1:X.relatedTo1?parseInt(X.relatedTo1,10):null,relatedTo2:X.relatedType1==="Lead"?null:X.relatedTo2?parseInt(X.relatedTo2,10):null,relatedType2:X.relatedType1==="Lead"?null:X.relatedType2,assigned_to:X.assigned_to?parseInt(X.assigned_to,10):null},K=v&&b?"update":"create",Se=(X.subject||"").trim()||"Untitled Call";i({title:K==="create"?"Confirm New Call":"Confirm Update",message:K==="create"?`Create "${Se}"?`:`Save changes to "${Se}"?`,confirmLabel:K==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:K,payload:te,targetId:b||null,name:Se}})},ye=M=>s(M),Ue=()=>{t(!1),w(!1),C(null)},et=async()=>{F.length!==0&&i({title:"Delete Calls",message:a.jsxs("span",{children:["Are you sure you want to delete"," ",a.jsx("span",{className:"font-semibold",children:F.length})," selected calls? This action cannot be undone."]}),confirmLabel:`Delete ${F.length} Call(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",call_ids:F}})},lt=async()=>{if(!r?.action){i(null);return}const{action:M}=r,{type:U,payload:Y,targetId:te,name:K}=M;k(!0);try{if(U==="create")S(!0),await ie.post("/calls/create",Y),H.success(`Call "${K}" created successfully.`),t(!1),je(ve),w(!1),C(null),await Ne();else if(U==="update"){if(!te)throw new Error("Missing call identifier for update.");S(!0),await ie.put(`/calls/${te}`,Y),H.success(`Call "${K}" updated successfully.`),t(!1),je(ve),w(!1),C(null),await Ne()}else if(U==="delete"){if(!te)throw new Error("Missing call identifier for deletion.");await ie.delete(`/calls/${te}`),H.success(`Call "${K}" deleted successfully.`),n?.id===te&&s(null),await Ne()}else U==="bulk-delete"&&(await ie.delete("/calls/admin/bulk-delete",{data:{call_ids:F}}),H.success(`Successfully deleted ${F.length} calls`),ee([]),await Ne())}catch(Se){const G=U==="create"?"Failed to create call. Please review the details and try again.":U==="update"?"Failed to update call. Please review the details and try again.":"Failed to delete call. Please try again.",J=Se?.response?.data?.detail||G;H.error(J)}finally{(U==="create"||U==="update")&&S(!1),k(!1),i(null)}},Ee=()=>{A||i(null)},tt=async()=>{if(n?.id)try{I(!0),await ie.put(`/calls/${n.id}`,{status:_}),H.success(`Status updated to ${r_(_)}`),f(M=>Array.isArray(M)?M.map(U=>U.id===n.id?{...U,status:_}:U):M),s(null)}catch(M){const U=M.response?.data?.detail||"Failed to update status.";H.error(U)}finally{I(!1)}};h.useEffect(()=>{n&&T(Md(n.status))},[n]);const be=n?a.jsxs("div",{id:"callModalBackdrop",onClick:M=>M.target.id==="callModalBackdrop"&&s(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[z&&a.jsx(zt,{message:"Loading call details..."}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),a.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:a.jsx(Ha,{size:25})})]}),a.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:n.subject}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${x7(n.status)}`,children:r_(n.status)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const M=Se=>{if(!Se)return"";const G=new Date(Se),J=G.getFullYear(),De=String(G.getMonth()+1).padStart(2,"0"),Ve=String(G.getDate()).padStart(2,"0"),ft=String(G.getHours()).padStart(2,"0"),bt=String(G.getMinutes()).padStart(2,"0");return`${J}-${De}-${Ve}T${ft}:${bt}`},U=n.lead?"Lead":n.account?"Account":"Lead",Y=n.lead?n.lead.id:n.account?n.account.id:null,te=U==="Lead"?null:n.contact?"Contact":n.deal?"Deal":"Contact",K=U==="Lead"?null:n.contact?n.contact.id:n.deal?n.deal.id:null;je({subject:n.subject||"",call_time:M(n.call_time),duration_minutes:n.duration_minutes?String(n.duration_minutes):"",direction:n.direction||"Outgoing",status:n.status||"Planned",notes:n.notes||"",relatedType1:U,relatedType2:te,relatedTo1:Y?String(Y):"",relatedTo2:K?String(K):"",assigned_to:n.call_assign_to?.id?String(n.call_assign_to.id):""}),w(!0),C(n.id),s(null),t(!0)},children:[a.jsx(nn,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>{const M=n.subject||"this call";i({title:"Delete Call",message:`Are you sure you want to permanently delete "${M}"? This action cannot be undone.`,confirmLabel:"Delete Call",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:n.id,name:M}})},children:[a.jsx(Wt,{className:"mr-2"}),"Delete"]})]})]})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(M=>a.jsx("button",{onClick:()=>Qe(M),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${re===M?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:M},M))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[re==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsx(ql,{label:"Call Time",value:y7(n.call_time)}),a.jsx(ql,{label:"Duration",value:n.duration_minutes?`${n.duration_minutes} min`:null}),a.jsx(ql,{label:"Direction",value:n.direction||"--"}),a.jsx(ql,{label:"Assigned To",value:`${n.call_assign_to.first_name} ${n.call_assign_to.last_name}`}),n.lead&&a.jsx(ql,{label:"Lead",value:n.lead.title}),n.account&&a.jsx(ql,{label:"Account",value:n.account.name}),n.contact&&a.jsx(ql,{label:"Contact",value:`${n.contact.first_name} ${n.contact.last_name}`}),n.deal&&a.jsx(ql,{label:"Deal",value:n.deal.name}),a.jsx(ql,{label:"Created At",value:y7(n.created_at)})]})}),re==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Call Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:n.notes||"No notes available."})]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:_,onChange:M=>T(M.target.value),children:[a.jsx("option",{value:"PLANNED",children:"PLANNED"}),a.jsx("option",{value:"HELD",children:"HELD"}),a.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),a.jsx("button",{onClick:tt,disabled:E,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:E?"Updating...":"Update"})]})]})]})]})]}):null,Xe=e?a.jsx("div",{id:"modalBackdrop",onClick:M=>M.target.id==="modalBackdrop"&&Ue(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[a.jsx("button",{onClick:()=>{Ue(),ze(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(Vt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:v?"Edit Call":"Add New Call"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:ce,noValidate:!0,children:[a.jsx(RMe,{label:"Subject",className:"md:col-span-2",name:"subject",value:X.subject,onChange:We,isSubmitted:dt,required:!0}),a.jsxs("div",{className:"w-full flex flex-col",children:[a.jsxs("select",{name:"relatedType1",onChange:We,value:X.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:N||v,children:[a.jsx("option",{value:"Lead",children:"Lead"}),a.jsx("option",{value:"Account",children:"Account"})]}),a.jsx(i_,{items:Array.isArray(l)?l:[],value:X.relatedTo1??"",placeholder:`Search ${X.relatedType1||"here"}...`,getLabel:M=>X.relatedType1==="Lead"?M.title:M.name??"",onChange:M=>je(U=>({...U,relatedTo1:M})),required:!0,isSubmitted:dt,disabled:N||v})]}),a.jsxs("div",{className:"w-full flex flex-col",children:[a.jsxs("select",{name:"relatedType2",onChange:We,value:X.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:X.relatedType1==="Lead"||N||v,children:[a.jsx("option",{value:"Contact",children:"Contact"}),a.jsx("option",{value:"Deal",children:"Deal"})]}),a.jsx(i_,{disabled:X.relatedType1==="Lead"||N||v,items:Array.isArray(c)?c:[],value:X.relatedTo2??"",placeholder:X.relatedType1==="Lead"?"":Array.isArray(c)&&c.length>0?`Search ${X.relatedType2||"Contact"}...`:`No ${X.relatedType2||""} data found`,getLabel:M=>X.relatedType2==="Contact"?`${M.first_name??""} ${M.last_name??""}`.trim():M.name??"",onChange:M=>je(U=>({...U,relatedTo2:M}))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),a.jsx("input",{type:"datetime-local",value:X.call_time,onChange:We,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),a.jsxs("div",{className:"w-full",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),a.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[a.jsx("input",{type:"tel",value:X.duration_minutes,onChange:We,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),a.jsx("p",{children:"minutes"})]})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[" Assign To ",a.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),a.jsx(i_,{items:Array.isArray(p)?p:[],value:X.assigned_to??"",placeholder:"Search an account...",getLabel:M=>`${M.first_name} ${M.last_name}`,onChange:M=>je(U=>({...U,assigned_to:M})),required:!0,isSubmitted:dt})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),a.jsxs("select",{name:"direction",onChange:We,value:X.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[a.jsx("option",{value:"Incoming",children:"Incoming"}),a.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),a.jsxs("select",{name:"status",onChange:We,value:X.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[a.jsx("option",{value:"Planned",children:"Planned"}),a.jsx("option",{value:"Held",children:"Held"}),a.jsx("option",{value:"Not held",children:"Not held"})]})]}),a.jsx(zMe,{className:"col-span-2",label:"Notes",value:X.notes,onChange:We,name:"notes"}),a.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[a.jsx("button",{type:"button",onClick:()=>{Ue(),ze(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:N,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:N?"Saving...":v?"Update Call":"Save Call"})]})]})]})}):null;return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(Es,{className:"mr-2 text-blue-600"})," Calls"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto gap-2",children:a.jsxs("button",{onClick:()=>{je(ve),w(!1),C(null),t(!0),ze(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(da,{className:"mr-2"})," Add Call"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Me.map(M=>a.jsx($Me,{...M},M.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[a.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",value:Fe,onChange:M=>me(M.target.value)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[a.jsxs("select",{value:Be,onChange:M=>Pe(M.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[a.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),MMe.map(M=>a.jsx("option",{value:M.value,children:M.label},M.value))]}),a.jsxs("select",{value:we,onChange:M=>ne(M.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[a.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),le.map(M=>a.jsx("option",{value:M.name,children:M.name},M.id))]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-12",children:a.jsx("input",{type:"checkbox",checked:pe.length>0&&F.length===pe.length,onChange:Te,className:"cursor-pointer"})}),a.jsx("th",{className:"py-3 px-4",children:"Subject"}),a.jsx("th",{className:"py-3 px-4",children:"Related To"}),a.jsx("th",{className:"py-3 px-4",children:"Call Time"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4 text-center w-24",children:F.length>0?a.jsx("button",{onClick:et,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${F.length} selected calls`,children:a.jsx(Wt,{size:18})}):""})]})}),a.jsx("tbody",{children:z?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"py-10",children:a.jsx(zt,{message:"Loading calls..."})})}):pe.length>0?pe.map(M=>a.jsxs("tr",{onClick:()=>ye(M),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[a.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:U=>U.stopPropagation(),children:a.jsx("input",{type:"checkbox",checked:F.includes(M.id),onChange:()=>Ye(M.id),className:"cursor-pointer"})}),a.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:M.subject||"--"}),a.jsxs("td",{className:"py-3 px-4",children:[M.lead&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:M.lead.title}),M.account&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:M.account.name}),M.contact&&a.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[M.contact.first_name," ",M.contact.last_name]}),M.deal&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:M.deal.name})]}),a.jsx("td",{className:"py-3 px-4 text-gray-800",children:M.call_time?new Date(M.call_time).toLocaleString():"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800",children:M?.call_assign_to?`${M.call_assign_to.first_name} ${M.call_assign_to.last_name}`:"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${x7(M.status)}`,children:r_(M.status)})}),a.jsx("td",{className:"py-3 px-4"})]},M.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),a.jsx(Jt,{totalItems:Le.length,pageSize:P,currentPage:B,onPrev:ge,onNext:fe,onPageSizeChange:M=>{O(M),Q(1)},pageSizeOptions:[10,20,30,40,50],label:"calls"})]}),be,Xe,r&&a.jsx(UMe,{open:!0,title:r.title,message:r.message,confirmLabel:r.confirmLabel,cancelLabel:r.cancelLabel,variant:r.variant,onConfirm:lt,onCancel:Ee,loading:A})]})}function $Me({icon:e,title:t,value:n,color:s,bgColor:r}){return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[a.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:a.jsx(e,{size:22})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function RMe({label:e,name:t,value:n,onChange:s,placeholder:r="",type:i="text",required:l=!1,disabled:o=!1,isSubmitted:c=!1,className:d=""}){const u=c&&l&&!n;return a.jsxs("div",{className:d,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
        `})]})}function zMe(e){return a.jsxs("div",{className:e.className,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),a.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function ql({label:e,value:t}){return a.jsxs("p",{children:[a.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",a.jsx("br",{}),a.jsx("span",{className:"break-words",children:t||"--"})]})}function UMe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}function i_({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,required:o=!1,isSubmitted:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),v=e.find(N=>String(N.id)===String(t)),w=v?s(v):"",b=o&&c&&!t,C=h.useMemo(()=>{const N=f.trim().toLowerCase();return(N?e.filter(A=>(s(A)||"").toLowerCase().includes(N)):e).slice(0,l)},[e,f,s,l]);return h.useEffect(()=>{const N=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),h.useEffect(()=>{d||p("")},[d]),a.jsxs("div",{ref:x,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:d?f:w,placeholder:r,onFocus:()=>!i&&u(!0),onChange:N=>{p(N.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${b?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:C.length>0?C.map(N=>{const S=String(N.id),A=s(N),k=String(t)===S;return a.jsx("button",{type:"button",onClick:()=>{n(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:A||"--"},S)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}const uj=({onClose:e,formData:t,setFormData:n,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,users:l=[]})=>{const c=(()=>{const _=new Date,T=_.getFullYear(),E=String(_.getMonth()+1).padStart(2,"0"),I=String(_.getDate()).padStart(2,"0");return{startTime:`${T}-${E}-${I}T08:00`,endTime:`${T}-${E}-${I}T09:00`}})(),[d,u]=h.useState({subject:"",startTime:c.startTime,endTime:c.endTime,location:"",status:"Planned",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:"Contact",relatedTo2:""}),[f,p]=h.useState([]),[x,v]=h.useState([]);h.useEffect(()=>{t!==void 0&&n&&(!t.startTime||!t.endTime)&&n(_=>({..._,startTime:_.startTime||c.startTime,endTime:_.endTime||c.endTime}))},[]);const w=t!==void 0?t:d,b=n||u,{userRole:C}=zs();h.useEffect(()=>{const _=async()=>{try{p([]);let T;w.relatedType1==="Lead"?T=await ie.get("/leads/admin/getLeads"):w.relatedType1==="Account"&&(T=await ie.get("/accounts/admin/fetch-all"));let E=[];if(T&&Array.isArray(T.data)&&(E=T.data),s&&w.relatedTo1)try{let I;w.relatedType1==="Lead"?I=await ie.get(`/leads/get/${w.relatedTo1}`):w.relatedType1==="Account"&&(I=await ie.get(`/accounts/get/${w.relatedTo1}`)),I&&I.data&&(E.some($=>String($.id)===String(w.relatedTo1))||(E=[I.data,...E]))}catch(I){console.error("Error fetching specific related item:",I)}p(E)}catch(T){console.error("Error fetching relatedTo1 data:",T),p([])}};w.relatedType1&&_()},[w.relatedType1,C,s,w.relatedTo1]),h.useEffect(()=>{const _=async()=>{try{if(v([]),w.relatedType1==="Account"&&w.relatedTo1){let T;w.relatedType2==="Contact"?T=await ie.get(`/contacts/from-acc/${w.relatedTo1}`):w.relatedType2==="Deal"&&(T=await ie.get(`/deals/from-acc/${w.relatedTo1}`)),T&&Array.isArray(T.data)?v(T.data):v([])}else v([])}catch(T){console.error("Error fetching relatedTo2 data:",T),v([])}};w.relatedType2&&_()},[w.relatedType2,w.relatedTo1,w.relatedType1]);const N=_=>{const{name:T,value:E}=_.target;b(I=>{const z={...I,[T]:E};return T==="relatedType1"&&(I.relatedType1!==E&&(z.relatedTo1=""),E==="Lead"?(z.relatedType2=null,z.relatedTo2=null,v([])):E==="Account"&&(z.relatedType2="Contact",z.relatedTo2="")),T==="relatedType2"&&I.relatedType2!==E&&(z.relatedTo2=""),z})},[S,A]=h.useState(!1),k=_=>{if(_.preventDefault(),A(!0),w.status==="--"){H.warn("Please select a valid status.");return}const T=w.subject;if(!T||T.trim()===""){H.error("Subject is required.");return}if(!w.assignedTo){H.error("Assigned To is required.");return}if(!w.relatedTo1){H.error(`Please select a ${w.relatedType1||"Lead/Account"}.`);return}r?r(w):(console.log("Meeting Scheduled:",w),e())};return a.jsx("div",{id:"modalBackdrop",onClick:_=>_.target.id==="modalBackdrop"&&e(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-60 p-2 sm:p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-3 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[a.jsx("button",{onClick:e,className:"absolute top-3 right-3 sm:top-4 sm:right-4 text-gray-500 hover:text-black transition",children:a.jsx(Vt,{size:22})}),a.jsx("h2",{className:"text-lg sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 text-center",children:s?"Edit Meeting":"Schedule Meeting"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4 text-sm",onSubmit:k,noValidate:!0,children:[a.jsx(Ly,{label:"Subject",name:"subject",value:w.subject,onChange:N,placeholder:"e.g. Meeting with Client",required:!0,isSubmitted:S,className:"md:col-span-2"}),a.jsxs("div",{className:"flex flex-col w-full",children:[a.jsxs("select",{name:"relatedType1",onChange:N,value:w.relatedType1||"Lead",className:"w-full outline-none cursor-pointer mb-1 rounded p-2 text-gray-700 disabled:text-gray-400",disabled:i,children:[a.jsx("option",{value:"Lead",children:"Lead"}),a.jsx("option",{value:"Account",children:"Account"})]}),a.jsx(l_,{items:Array.isArray(f)?f:[],disabled:i,value:w.relatedTo1??"",placeholder:`Search ${w.relatedType1||"here"}...`,getLabel:_=>w.relatedType1==="Lead"?_.title:_.name??"",onChange:_=>b(T=>({...T,relatedTo1:_})),required:!0,isSubmitted:S})]}),a.jsxs("div",{className:"flex flex-col w-full",children:[a.jsxs("select",{name:"relatedType2",onChange:N,value:w.relatedType2||"Contact",className:"w-full outline-none cursor-pointer mb-1 rounded p-2 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:i||w.relatedType1==="Lead",children:[a.jsx("option",{value:"Contact",children:"Contact"}),a.jsx("option",{value:"Deal",children:"Deal"})]}),a.jsx(l_,{items:Array.isArray(x)?x:[],value:w.relatedTo2??"",placeholder:w.relatedType1==="Lead"?"":x?.length?`Search ${w.relatedType2}...`:`No ${w.relatedType2} data found`,getLabel:_=>w.relatedType2==="Contact"?`${_.first_name??""} ${_.last_name??""}`.trim():_.name??"",onChange:_=>b(T=>({...T,relatedTo2:_})),disabled:w.relatedType1==="Lead"})]}),a.jsx(Ly,{label:"Location",name:"location",className:"md:col-span-2",value:w.location,onChange:N,disabled:i}),a.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[a.jsx(Ly,{label:"Start Time",name:"startTime",type:"datetime-local",value:w.startTime,onChange:N,disabled:i}),a.jsx(Ly,{label:"End Time",name:"endTime",type:"datetime-local",value:w.endTime,onChange:N,disabled:i})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",a.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),a.jsx(l_,{items:Array.isArray(l)?l:[],value:w.assignedTo??"",placeholder:"Search an account...",getLabel:_=>`${_.first_name} ${_.last_name}`,onChange:_=>b(T=>({...T,assignedTo:_})),disabled:C==="Sales",required:!0,isSubmitted:S})]}),a.jsx(FMe,{label:"Status",name:"status",value:w.status,onChange:N,options:["--","Planned","Held","Not held"].map(_=>({value:_,label:_.replace("_"," ")})),disabled:i}),a.jsx(BMe,{label:"Notes",name:"notes",value:w.notes,onChange:N,rows:3,className:"md:col-span-2",disabled:i}),a.jsxs("div",{className:"md:col-span-2 flex flex-col sm:flex-row justify-end gap-2 mt-4",children:[a.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Meeting":"Save Meeting"})]})]})]})})};function Ly({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,className:c="",isSubmitted:d=!1}){const u=d&&!n?.trim();return a.jsxs("div",{className:c,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 outline-none disabled:bg-gray-100
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function FMe({label:e,name:t,value:n,onChange:s,options:r,required:i=!1,disabled:l=!1,className:o="",isSubmitted:c=!1}){const d=c&&i&&!n;return a.jsxs("div",{className:o,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",i&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("select",{name:t,value:n??"",onChange:s,required:i,disabled:l,hasError:d,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(u=>a.jsx("option",{value:u.value,children:u.label},u.value))})]})}function BMe({label:e,name:t,value:n,onChange:s,placeholder:r,required:i=!1,disabled:l=!1,className:o="",rows:c=3}){return a.jsxs("div",{className:o,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:s,placeholder:r,required:i,disabled:l,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function l_({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,required:o=!1,isSubmitted:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),v=e.find(N=>String(N.id)===String(t)),w=v?s(v):"",b=o&&c&&!t,C=h.useMemo(()=>{const N=f.trim().toLowerCase();return(N?e.filter(A=>(s(A)||"").toLowerCase().includes(N)):e).slice(0,l)},[e,f,s,l]);return h.useEffect(()=>{const N=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),h.useEffect(()=>{d||p("")},[d]),a.jsxs("div",{ref:x,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:d?f:w,placeholder:r,onFocus:()=>!i&&u(!0),onChange:N=>{p(N.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${b?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:C.length>0?C.map(N=>{const S=String(N.id),A=s(N),k=String(t)===S;return a.jsx("button",{type:"button",onClick:()=>{n(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:A||"--"},S)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}const qc=({meeting:e,onClose:t,onEdit:n,onDelete:s,onStatusUpdate:r})=>{vt();const[i,l]=h.useState("Overview"),o=v=>{const w=(v||"").toUpperCase();return w==="PLANNED"||w==="IN PROGRESS"?"PLANNED":w==="HELD"||w==="DONE"?"HELD":w==="NOT HELD"?"NOT_HELD":"PLANNED"},c=v=>{const w=(v||"").toUpperCase();return w==="PLANNED"?"PLANNED":w==="HELD"?"HELD":w==="NOT HELD"||w==="NOT_HELD"?"NOT HELD":"PENDING"},[d,u]=h.useState(o(e?.status||"PENDING")),[f,p]=h.useState(!1);if(!e)return null;const x=v=>{const w=(v||"").toUpperCase(),b=w==="PLANNED"?"PENDING":w==="HELD"?"COMPLETED":w==="NOT_HELD"?"CANCELLED":w;switch(w){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:switch(b){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}}};return a.jsx(a.Fragment,{children:a.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Meeting"}),a.jsx("button",{onClick:t,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:a.jsx(Ha,{size:25})})]}),a.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:e.subject||"Meeting"}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${x(o(e.status))}`,children:o(e.status||"PENDING").replace("_"," ")})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{type:"button",onClick:()=>{n&&n(e)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[a.jsx(rn,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{type:"button",onClick:()=>{s&&s(e)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[a.jsx(Wt,{className:"mr-2"}),"Delete"]})]})]})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(v=>a.jsx("button",{onClick:()=>l(v),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${i===v?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:v},v))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[i==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Start Time:"}),a.jsx("p",{children:e.start_time?new Date(e.start_time).toLocaleString():"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"End Time:"}),a.jsx("p",{children:e.end_time?new Date(e.end_time).toLocaleString():"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Meeting Title:"}),a.jsx("p",{children:e.subject||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Location:"}),a.jsx("p",{children:e.location||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsxs("p",{children:[e.meet_assign_to.first_name," ",e.meet_assign_to.last_name]})]}),e.lead&&a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Lead:"}),a.jsx("p",{children:e.lead.title})]}),e.account&&a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Account:"}),a.jsx("p",{children:e.account.name})]}),e.contact&&a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Contact:"}),a.jsxs("p",{children:[e.contact.first_name," ",e.contact.last_name]})]}),e.deal&&a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Deal:"}),a.jsx("p",{children:e.deal.name})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Status:"}),a.jsx("p",{children:o(e.status||"PENDING").replace("_"," ")})]})]})}),i==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Meeting Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:e.notes||"No notes available."})]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:d,onChange:v=>u(v.target.value),children:[a.jsx("option",{value:"PLANNED",children:"PLANNED"}),a.jsx("option",{value:"HELD",children:"HELD"}),a.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),a.jsx("button",{onClick:async()=>{if(!r||!e?.id)return;const v=c(d);if(o(e.status)!==d){p(!0);try{await r(e.id,v)}catch(w){console.error("Failed to update status:",w)}finally{p(!1)}}},disabled:d===e.status||f,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${d===e.status||f?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:f?"Updating...":"Update"})]})]})]})]})})})},$Q=e=>e?e.toUpperCase():"",Py=e=>{const t=$Q(e);return t==="PLANNED"||t==="IN PROGRESS"?"PLANNED":t==="HELD"||t==="DONE"?"HELD":t==="NOT_HELD"||t==="NOT HELD"?"NOT_HELD":"PLANNED"},HMe=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},GMe=e=>{const t=$Q(e);switch(t==="PLANNED"?"PENDING":t==="HELD"?"COMPLETED":t==="NOT_HELD"?"CANCELLED":t){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},o_={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},v7=()=>{const e=vt(),t=Yt(),[n]=ks(),s=n.get("id"),r=t.pathname==="/admin/meetings/info";h.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[i,l]=h.useState([]),[o,c]=h.useState(!1),[d,u]=h.useState([]),[f,p]=h.useState(""),[x,v]=h.useState("Filter by Status"),[w,b]=h.useState(!1),[C,N]=h.useState(null),[S,A]=h.useState(1),[k,_]=h.useState(10),[T,E]=h.useState(o_),[I,z]=h.useState(!1),[$,P]=h.useState(null),[O,B]=h.useState(!1),[Q,F]=h.useState(null),[ee,V]=h.useState(!1),[de,oe]=h.useState([]),[Z,R]=h.useState(null);h.useEffect(()=>{const fe=t.state?.openMeetingModal,Te=t.state?.initialMeetingData?.relatedTo||n.get("id"),Ye=t.state?.meetingID;fe||Te?(b(!0),t.state?.initialMeetingData&&E(Ae=>({...Ae,...t.state.initialMeetingData})),e(t.pathname,{replace:!0,state:{}})):Ye&&(R(Ye),e(t.pathname,{replace:!0,state:{}}))},[t,n,e]),h.useEffect(()=>{if(Z&&i.length>0&&!o){const fe=i.find(Te=>Te.id===Z);fe?N(fe):H.error("Meeting not found."),R(null)}},[Z,i,o]);const ve=async()=>{if(s&&r){const fe=sessionStorage.getItem("meetingDetailData");if(fe)try{const Te=JSON.parse(fe);if(Te.id===parseInt(s)){N(Te),sessionStorage.removeItem("meetingDetailData");return}}catch(Te){console.error(Te)}}c(!0);try{const fe=await ie.get("/meetings/admin/fetch-all"),Ye=[...Array.isArray(fe.data)?fe.data:[]].sort((Ae,Ie)=>{const Je=Ae?.createdAt?new Date(Ae.createdAt).getTime():0;return(Ie?.createdAt?new Date(Ie.createdAt).getTime():0)-Je});if(l(Ye),s&&!C){const Ae=Ye.find(Ie=>Ie.id===parseInt(s));Ae&&N(Ae)}console.log(fe.data)}catch{H.error("Failed to load meetings.")}finally{c(!1)}},X=async()=>{try{const fe=await ie.get("/users/all");u(Array.isArray(fe.data)?fe.data:[])}catch(fe){console.error(fe)}};h.useEffect(()=>{ve(),X()},[]);const je=fe=>p(fe.target.value),Ne=fe=>{if(fe.target.checked){const Te=me.map(Ye=>Ye.id);oe(Te)}else oe([])},Oe=fe=>{oe(Te=>Te.includes(fe)?Te.filter(Ye=>Ye!==fe):[...Te,fe])},Fe=h.useMemo(()=>{const fe=f.trim().toLowerCase(),Te=x.trim().toUpperCase();return i.filter(Ye=>{const Ae=[Ye?.activity,Ye?.description,Ye?.relatedTo,Ye?.assignedTo],Ie=fe===""||Ae.some(he=>he&&he.toString().toLowerCase().includes(fe)),Je=Te==="FILTER BY STATUS"||Py(Ye.status||"PENDING")===Te;return Ie&&Je})},[i,f,x]);h.useEffect(()=>{A(1)},[f,x,k]);const me=h.useMemo(()=>{const fe=(S-1)*k;return Fe.slice(fe,fe+k)},[Fe,S,k]),Be=()=>{b(!1),E(o_),z(!1),P(null),B(!1)},Pe=()=>{E(o_),z(!1),P(null),b(!0)},we=fe=>{let Te="";if(fe.meet_assign_to?.id)Te=String(fe.meet_assign_to.id);else if(fe.assignedTo){const We=d.find(dt=>`${dt.first_name} ${dt.last_name}`===fe.assignedTo);Te=We?String(We.id):""}const Ye=We=>{if(!We)return"";try{const dt=new Date(We),ze=dt.getTimezoneOffset()*6e4;return new Date(dt.getTime()-ze).toISOString().slice(0,16)}catch{return""}};let Ae="Lead",Ie="",Je="Contact",he="";if(fe.lead)Ae="Lead",Ie=String(fe.lead.id);else if(fe.account)Ae="Account",Ie=String(fe.account.id),fe.contact?(Je="Contact",he=String(fe.contact.id)):fe.deal&&(Je="Deal",he=String(fe.deal.id));else if(fe.relatedType||fe.related_type){const We=fe.relatedType||fe.related_type,dt=fe.related_to||fe.relatedToId;We==="Lead"?(Ae="Lead",Ie=String(dt)):(Ae="Account",Ie=fe.account_id?String(fe.account_id):"")}const Me={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},re=Py(fe.status),Qe=Me[re]||"Planned";E({subject:fe.subject||fe.activity||"",location:fe.location||"",startTime:Ye(fe.start_time||fe.startTime),endTime:Ye(fe.end_time||fe.endTime),status:Qe,notes:fe.description||fe.notes||"",assignedTo:Te,relatedType1:Ae,relatedTo1:Ie,relatedType2:Je,relatedTo2:he}),z(!0),P(fe.id),N(null),b(!0)},ne=fe=>{if(!fe.subject?.trim())return H.error("Subject is required.");if(!fe.startTime)return H.error("Start time is required.");if(fe.endTime&&!(new Date(fe.endTime)-new Date(fe.startTime)>0))return H.error("End time must be after start time.");fe.relatedType1,fe.relatedTo1,fe.relatedType1==="Account"&&fe.relatedType2&&fe.relatedTo2&&(fe.relatedType2,fe.relatedTo2);const Te={...fe,assignedTo:parseInt(fe.assignedTo),relatedTo1:parseInt(fe.relatedTo1),relatedTo2:parseInt(fe.relatedTo2)},Ye=I&&$?"update":"create";F({title:Ye==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${Ye} "${Te.subject}"?`,confirmLabel:Ye==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:Ye,payload:Te,targetId:$,name:Te.subject}})},Le=async()=>{if(!Q?.action)return;const{type:fe,payload:Te,targetId:Ye,name:Ae}=Q.action;console.log(Te),V(!0);try{if(fe==="create")B(!0),await ie.post("/meetings/create",Te),H.success(`Meeting "${Ae}" created.`),Be(),await ve();else if(fe==="update")B(!0),await ie.put(`/meetings/${Ye}`,Te),H.success(`Meeting "${Ae}" updated.`),Be(),await ve();else if(fe==="delete")await ie.delete(`/meetings/${Ye}`),H.success(`Meeting "${Ae}" deleted.`),C?.id===Ye&&N(null),await ve();else if(fe==="bulk-delete"){const{meeting_ids:Ie}=Q.action;await ie.delete("/meetings/admin/bulk-delete",{data:{meeting_ids:Ie}}),H.success(`${Ie.length} meetings deleted.`),oe([]),await ve()}}catch(Ie){const Je=Ie.response?.data?.detail||"Action failed.";H.error(typeof Je=="string"?Je:JSON.stringify(Je)),console.error(Je)}finally{B(!1),V(!1),F(null)}},pe=async()=>{de.length!==0&&F({title:"Delete Meetings",message:a.jsxs("span",{children:["Are you sure you want to delete"," ",a.jsx("span",{className:"font-semibold",children:de.length})," selected meetings? This action cannot be undone."]}),confirmLabel:`Delete ${de.length} Meeting(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",meeting_ids:de}})},le=fe=>{F({title:"Delete Meeting",message:`Permanently delete "${fe.activity}"?`,confirmLabel:"Delete",variant:"danger",action:{type:"delete",targetId:fe.id,name:fe.activity}})},ge=async(fe,Te)=>{try{await ie.put(`/meetings/${fe}`,{status:Te}),H.success("Status updated"),ve(),N(null)}catch{H.error("Failed to update status")}};return r&&s?C?a.jsx(qc,{meeting:C,onClose:()=>{N(null),e("/admin/dashboard")},onEdit:we,onDelete:le,onStatusUpdate:ge}):a.jsx(zt,{message:"Loading meeting..."}):a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[o&&a.jsx(zt,{message:"Loading meetings..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[a.jsx(_t,{className:"mr-2 text-blue-600"})," Meetings"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:Pe,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[a.jsx(da,{className:"mr-2"})," Add Meeting"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[a.jsx(Bt,{className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search meetings",value:f,onChange:je,className:"w-full outline-none"})]}),a.jsxs("select",{value:x,onChange:fe=>v(fe.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[a.jsx("option",{children:"Filter by Status"}),a.jsx("option",{value:"PLANNED",children:"PLANNED"}),a.jsx("option",{value:"HELD",children:"HELD"}),a.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-12",children:a.jsx("input",{type:"checkbox",checked:me.length>0&&de.length===me.length,onChange:Ne,className:"cursor-pointer"})}),a.jsx("th",{className:"py-3 px-4",children:"Subject"}),a.jsx("th",{className:"py-3 px-4",children:"Related To"}),a.jsx("th",{className:"py-3 px-4",children:"Start Time"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4 text-center w-24",children:de.length>0?a.jsx("button",{onClick:pe,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${de.length} selected items`,children:a.jsx(Wt,{size:18})}):a.jsx("span",{className:"text-gray-400",children:"Actions"})})]})}),a.jsx("tbody",{children:me.length>0?me.map(fe=>a.jsxs("tr",{onClick:()=>N(fe),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[a.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:Te=>Te.stopPropagation(),children:a.jsx("input",{type:"checkbox",checked:de.includes(fe.id),onChange:()=>Oe(fe.id),className:"cursor-pointer"})}),a.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:fe.subject}),a.jsxs("td",{className:"py-3 px-4",children:[fe.lead&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:fe.lead.title}),fe.account&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:fe.account.name}),fe.contact&&a.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[fe.contact.first_name," ",fe.contact.last_name]}),fe.deal&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:fe.deal.name})]}),a.jsx("td",{className:"py-3 px-4",children:HMe(fe.start_time)}),a.jsxs("td",{className:"py-3 px-4",children:[fe.meet_assign_to.first_name," ",fe.meet_assign_to.last_name]}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${GMe(Py(fe.status))}`,children:Py(fe.status).replace("_"," ")})}),a.jsx("td",{className:"py-3 px-4 text-center"})]},fe.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),a.jsx(Jt,{totalItems:Fe.length,pageSize:k,currentPage:S,onPrev:()=>A(fe=>Math.max(1,fe-1)),onNext:()=>A(fe=>Math.min(fe+1,Math.ceil(Fe.length/k)||1)),onPageSizeChange:_,label:"meetings"}),w&&a.jsx(uj,{onClose:Be,formData:T,setFormData:E,isEditing:I,onSubmit:ne,isSubmitting:O||ee,users:d}),C&&a.jsx(qc,{meeting:C,onClose:()=>N(null),onEdit:we,onDelete:le,onStatusUpdate:ge}),Q&&a.jsx(WMe,{open:!0,title:Q.title,message:Q.message,confirmLabel:Q.confirmLabel,variant:Q.variant,onConfirm:Le,onCancel:()=>F(null),loading:ee})]})};function WMe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{onClick:c,disabled:l,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),a.jsx("button",{onClick:o,disabled:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${d}`,children:l?"...":s})]})]})})}function VMe(){const{user:e,mutate:t}=ta(),[n,s]=h.useState(""),[r,i]=h.useState(""),[l,o]=h.useState("January"),[c,d]=h.useState(!1),[u,f]=h.useState({type:"",text:""}),p=["January","February","March","April","May","June","July","August","September","October","November","December"];h.useEffect(()=>{e?.company&&(e.company.company_name&&s(e.company.company_name),e.company.currency&&i(e.company.currency),e.company.quota_period&&o(e.company.quota_period))},[e]);const x=async w=>{w.preventDefault(),d(!0),f({type:"",text:""});try{await ie.put("/company/update-name",{company_name:n,currency:r,quota_period:l}),t&&await t(),f({type:"success",text:"Company settings updated successfully!"})}catch(b){console.error("Update error:",b);const C=b.response?.data?.detail||"Failed to update settings.";f({type:"error",text:C})}finally{d(!1)}},v=["CEO","ADMIN"].includes(e?.role?.toUpperCase());return a.jsxs("div",{className:"max-w-2xl mx-auto mt-10 bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[a.jsxs("div",{className:"bg-[#fbbf24] px-6 py-4",children:[a.jsxs("h2",{className:"text-gray-900 font-bold text-xl flex items-center gap-2",children:[a.jsx(Kt,{})," Company Details"]}),a.jsx("p",{className:"text-gray-700 text-sm",children:"Manage your organization's identity and fiscal settings"})]}),a.jsxs("form",{onSubmit:x,className:"p-6 space-y-6",children:[!v&&a.jsxs("div",{className:"flex items-center gap-2 p-3 bg-amber-50 text-amber-700 rounded-lg text-sm border border-amber-200",children:[a.jsx(Ef,{}),a.jsx("span",{children:"You only have view-access. Changes can only be made by an Admin or CEO."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Company Name"}),a.jsx("input",{type:"text",value:n,onChange:w=>s(w.target.value),disabled:!v||c,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fbbf24] focus:border-transparent outline-none transition disabled:bg-gray-50 disabled:cursor-not-allowed",placeholder:"Enter company name",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[a.jsx(_t,{className:"text-gray-500"})," Fiscal Year Start"]}),a.jsxs("div",{className:"relative",children:[a.jsx("select",{value:l,onChange:w=>o(w.target.value),disabled:!v||c,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fbbf24] focus:border-transparent outline-none appearance-none bg-white disabled:bg-gray-50 cursor-pointer",children:p.map(w=>a.jsx("option",{value:w,children:w},w))}),a.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none text-gray-500",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select the month your sales year begins."})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[a.jsx(Tf,{className:"text-gray-500"})," Currency"]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("label",{className:`flex-1 flex items-center justify-center gap-1 p-2 border rounded-lg cursor-pointer transition-all ${r===""?"bg-amber-50 border-[#fbbf24] text-amber-900 font-medium ring-1 ring-[#fbbf24]":"border-gray-200 hover:bg-gray-50 text-gray-600"} ${!v||c?"opacity-50 cursor-not-allowed":""}`,children:[a.jsx("input",{type:"radio",name:"currency",value:"",checked:r==="",onChange:()=>i(""),disabled:!v||c,className:"hidden"}),a.jsx("span",{className:"text-lg font-bold",children:""})," PHP"]}),a.jsxs("label",{className:`flex-1 flex items-center justify-center gap-1 p-2 border rounded-lg cursor-pointer transition-all ${r==="$"?"bg-amber-50 border-[#fbbf24] text-amber-900 font-medium ring-1 ring-[#fbbf24]":"border-gray-200 hover:bg-gray-50 text-gray-600"} ${!v||c?"opacity-50 cursor-not-allowed":""}`,children:[a.jsx("input",{type:"radio",name:"currency",value:"$",checked:r==="$",onChange:()=>i("$"),disabled:!v||c,className:"hidden"}),a.jsx("span",{className:"text-lg font-bold",children:"$"})," USD"]})]})]})]}),u.text&&a.jsx("div",{className:`p-3 rounded-lg text-sm border transition-all ${u.type==="success"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"}`,children:u.text}),a.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-100",children:v&&a.jsxs("button",{type:"submit",disabled:c,className:"flex items-center gap-2 bg-[#1e293b] text-white px-6 py-2 rounded-lg font-medium hover:bg-[#334155] disabled:opacity-50 transition shadow-md active:scale-95",children:[a.jsx(JT,{}),c?"Updating...":"Save Settings"]})})]})]})}function qMe({toggleSidebar:e}){const[t,n]=h.useState(!1),[s,r]=h.useState(!1),[i,l]=h.useState([]),[o,c]=h.useState(0),d=h.useRef(null),u=h.useRef(null),f=Yt(),p=vt(),{logout:x}=zs(),{user:v,fetchUser:w}=ta(),C={"/sales/overview":"Dashboard","/sales/accounts":"Accounts","/sales/contacts":"Contacts","/sales/leads":"Leads","/sales/deals":"Deals","/sales/quotes":"Quotes","/sales/targets":"Targets","/sales/reports":"Reports","/sales/tasks":"Tasks"}[f.pathname]||"Sales Panel";h.useEffect(()=>{w();const _=()=>{w()};return window.addEventListener("userProfileUpdated",_),()=>{window.removeEventListener("userProfileUpdated",_)}},[]);const N=_=>{const T=String(_.action||_.type||"").toLowerCase(),E=String(_.title||_.description||"").toLowerCase(),I=T.includes("create"),z=T.includes("update");return E.includes("task")?"task_assignment":E.includes("territory")?"territory_assignment":E.includes("lead")?I?"lead_assignment":"lead_update":E.includes("contact")?I?"contact_assignment":"contact_update":E.includes("deal")?I?"deal_assignment":"deal_update":E.includes("account")?I?"account_assignment":"account_update":"info"},S=_=>{const T={..._};switch(T.read=!!T.read,T.type){case"territory_assignment":T.title=T.title||`You have been assigned to ${T.territoryName||"a territory"}`;break;case"lead_assigned":T.type="lead_assignment",T.title=T.title||`New lead assigned: ${T.leadName||T.company||"Lead"}`;break;case"lead_assignment":T.title=T.title||`New lead assigned: ${T.leadName||T.company||"Lead"}`;break;case"lead_update":T.title=T.title||`Lead updated: ${T.leadName||T.company||"Lead"}`;break;case"task_assignment":T.title=T.title||`New Task Assigned: ${T.taskTitle||"Task"}`;break;case"contact_assignment":T.title=T.title||`New contact assigned: ${T.contactName||T.contact||"Contact"}`;break;case"contact_update":T.title=T.title||`Contact updated: ${T.contactName||T.contact||"Contact"}`;break;case"deal_assignment":T.title=T.title||`New deal assigned: ${T.dealName||T.name||"Deal"}`;break;case"deal_update":T.title=T.title||`Deal updated: ${T.dealName||T.name||"Deal"}`;break;case"account_assignment":T.title=T.title||`New account assigned: ${T.accountName||T.name||"Account"}`;break;case"account_update":T.title=T.title||`Account updated: ${T.accountName||T.name||"Account"}`;break;default:T.title=T.title||"New Notification"}return T},A=_=>{switch(_.type){case"task_assignment":p(`/sales/hub/${_.taskId||_.task_id||""}`);break;case"lead_assignment":case"lead_update":p(`/sales/leads/${_.leadId||_.lead_id||""}`);break;case"contact_assignment":case"contact_update":p(`/sales/contacts/${_.contactId||_.contact_id||""}`);break;case"deal_assignment":case"deal_update":p(`/sales/deals/${_.dealId||_.deal_id||""}`);break;case"account_assignment":case"account_update":p(`/sales/accounts/${_.accountId||_.account_id||""}`);break;default:p("/sales/overview")}},k=async _=>{if(_.read){A(_);return}try{await ie.patch(`/logs/mark-read/${_.id}`),l(T=>T.map(E=>E.id===_.id?{...E,read:!0}:E)),c(T=>T>0?T-1:0),A(_)}catch(T){console.error("Failed to mark notification as read",T),A(_)}};return h.useEffect(()=>{if(!v?.id)return;const _=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",T=window.location.protocol==="https:"?"wss:":"ws:",E=_?"localhost:8000":window.location.host,I=`${T}//${E}/ws/notifications?user_id=${v.id}`,z=new WebSocket(I);return z.onopen=()=>console.log("WS Connected to:",I),z.onmessage=$=>{const P=JSON.parse($.data),O=S(P);l(B=>[O,...B]),c(B=>B+1)},z.onclose=()=>console.log("WS Disconnected"),z.onerror=$=>console.error("WS Error",$),()=>z.close()},[v?.id]),h.useEffect(()=>{const _=async()=>{try{const E=((await ie.get("/logs/read-all")).data||[]).map(I=>S({id:I.id,type:I.notif_type||I.notification_type||I.type||N(I),title:I.title||I.description,assignedBy:I.assignedBy||I.name,createdAt:I.createdAt||I.timestamp,read:I.is_read??I.read??!1,leadId:I.leadId||I.lead_id,taskId:I.taskId||I.task_id,contactId:I.contactId||I.contact_id,dealId:I.dealId||I.deal_id,accountId:I.accountId||I.account_id}));l(E),c(E.filter(I=>!I.read).length)}catch(T){console.error("Failed to load history notifications",T)}};v?.id&&_()},[v?.id]),h.useEffect(()=>{function _(T){d.current&&!d.current.contains(T.target)&&n(!1),u.current&&!u.current.contains(T.target)&&r(!1)}return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]),a.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:a.jsx(Op,{className:"text-2xl"})}),a.jsx("h1",{className:"text-lg sm:text-xl font-semibold text-gray-800 truncate max-w-[150px] sm:max-w-none",children:C})]}),a.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[a.jsxs("div",{className:"relative",ref:u,children:[a.jsxs("button",{onClick:()=>r(!s),className:"relative text-gray-600 hover:text-gray-800 transition",children:[a.jsx(Pp,{className:"text-xl sm:text-2xl"}),o>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] w-4 h-4 flex items-center justify-center rounded-full font-semibold",children:o})]}),s&&a.jsxs("div",{className:"absolute right-0 mt-3 w-80 bg-white rounded-xl shadow-lg border z-50 overflow-hidden animate-fade-in",children:[a.jsxs("div",{className:"p-3 border-b bg-gray-50 flex justify-between items-center",children:[a.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:"Notifications"}),i.length>0&&a.jsx("button",{onClick:()=>{l([]),c(0)},className:"text-xs text-blue-600 hover:underline",children:"Clear all"})]}),a.jsx("div",{className:"max-h-80 overflow-y-auto",children:i.length>0?i.map((_,T)=>a.jsxs("div",{onClick:()=>k(_),className:`p-4 border-b hover:bg-gray-50 cursor-pointer transition ${_.read?"bg-gray-50":"bg-white"}`,children:[a.jsxs("div",{className:"flex justify-between items-center mb-1",children:[a.jsx("span",{className:`text-[10px] px-2 py-1 rounded-full font-semibold uppercase
                            ${_.type==="task_assignment"?"bg-purple-100 text-purple-700":_.type==="lead_assignment"||_.type==="lead_update"?"bg-green-100 text-green-700":_.type==="contact_assignment"||_.type==="contact_update"?"bg-amber-100 text-amber-700":_.type==="deal_assignment"||_.type==="deal_update"?"bg-indigo-100 text-indigo-700":_.type==="account_assignment"||_.type==="account_update"?"bg-cyan-100 text-cyan-700":_.type==="territory_assignment"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:_.type==="task_assignment"?"Task":_.type==="lead_assignment"?"Lead":_.type==="lead_update"?"Lead Update":_.type==="contact_assignment"?"Contact":_.type==="contact_update"?"Contact Update":_.type==="deal_assignment"?"Deal":_.type==="deal_update"?"Deal Update":_.type==="account_assignment"?"Account":_.type==="account_update"?"Account Update":_.type==="territory_assignment"?"Territory":"Info"}),!_.read&&a.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"font-medium text-gray-800 text-sm",children:_.title}),a.jsx("span",{className:"text-xs text-gray-600 mt-0.5",children:_.assignedBy?`Assigned by ${_.assignedBy}`:"System"}),a.jsx("span",{className:"text-[11px] text-gray-400 mt-1",children:_.createdAt?new Date(_.createdAt).toLocaleString():""})]})]},_.id??T)):a.jsx("div",{className:"p-6 text-center text-gray-500 text-sm",children:"No new notifications"})})]})]}),a.jsxs("div",{className:"relative",ref:d,children:[a.jsxs("button",{onClick:()=>n(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[a.jsx("img",{src:v?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 aspect-square object-cover rounded-full"}),a.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[v?.first_name," ",v?.last_name]})]}),t&&a.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4",children:[a.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[a.jsx("img",{src:v?.profile_picture||"https://via.placeholder.com/80",alt:"Profile",className:"w-16 h-16 rounded-full object-cover"}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[v?.first_name," ",v?.middle_name," ",v?.last_name]}),a.jsx("p",{className:"text-[11px] text-gray-600 font-light w-full truncate",children:"Sales"})]})]}),a.jsxs("div",{className:"mt-4 space-y-1 px-4 text-left",children:[a.jsx("button",{className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-2 rounded text-left",onClick:()=>{p("/sales/manage-account"),n(!1)},children:"Manage Your Account"}),a.jsx("div",{className:"border-t border-gray-200 my-2"}),a.jsx("button",{onClick:x,className:"block w-full text-sm text-red-600 hover:text-red-700 hover:bg-gray-50 py-2 rounded text-left",children:"Logout"})]})]})]})]})]})}function YMe(){const[e,t]=h.useState(!1),[n,s]=h.useState(!1),{user:r}=ta(),[i,l]=h.useState(!1);h.useEffect(()=>{r&&console.log("Fetched user:",r)},[r]);const o=["/sales/overview","/sales/hub","/sales/accounts","/sales/contacts","/sales/leads","/sales/deals","/sales/quotes","/sales/targets"],c=Yt(),d=o.includes(c.pathname);h.useEffect(()=>{d&&l(!0)},[c.pathname]);const u="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",f="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition";return a.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[a.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
        ${e?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[a.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[a.jsxs("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:[" Sari-Sari.CRM"," ",a.jsx("span",{className:"text-[12px] text-gray-700 font-medium align-bottom",children:"v2"})]}),r&&r.company&&a.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:r.company.company_name})]}),a.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[a.jsxs(Ot,{to:"/sales/overview",className:({isActive:p})=>p?u:f,children:[a.jsx(Dp,{})," Dashboard"]}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>l(!i),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(Kt,{className:"text-lg"}),"Sales"]}),a.jsx(St,{className:`transition-transform ${i?"rotate-180":""}`})]}),i&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(Ot,{to:"/sales/accounts",className:({isActive:p})=>p?u:f,children:[a.jsx(La,{})," Accounts"]}),a.jsxs(Ot,{to:"/sales/contacts",className:({isActive:p})=>p?u:f,children:[a.jsx(Zt,{})," Contacts"]}),a.jsxs(Ot,{to:"/sales/leads",className:({isActive:p})=>p?u:f,children:[a.jsx(Ba,{})," Leads"]}),a.jsxs(Ot,{to:"/sales/deals",className:({isActive:p})=>p?u:f,children:[a.jsx(Kt,{})," Deals"]}),a.jsxs(Ot,{to:"/sales/quotes",className:({isActive:p})=>p?u:f,children:[a.jsx(ga,{})," Quotes"]}),a.jsxs(Ot,{to:"/sales/targets",className:({isActive:p})=>p?u:f,children:[a.jsx(Zs,{})," Targets"]})]})]}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!n),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(ys,{className:"text-lg"}),"Activity"]}),a.jsx(St,{className:`transition-transform ${n?"rotate-180":""}`})]}),n&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(Ot,{to:"/sales/tasks",className:({isActive:p})=>p?u:f,children:[a.jsx(Gt,{})," Tasks"]}),a.jsxs(Ot,{to:"/sales/meetings",className:({isActive:p})=>p?u:f,children:[a.jsx(_t,{})," Meetings"]}),a.jsxs(Ot,{to:"/sales/calls",className:({isActive:p})=>p?u:f,children:[a.jsx(Es,{})," Calls"]}),a.jsxs(Ot,{to:"/sales/audit",className:({isActive:p})=>p?u:f,children:[a.jsx(ys,{})," Audit"]})]})]}),a.jsx("div",{children:a.jsx(Ot,{to:"/sales/territory",className:({isActive:p})=>p?u:f,children:a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(Lo,{className:"text-lg"}),"Territory"]})})}),a.jsxs(Ot,{to:"/sales/manage-account",className:({isActive:p})=>p?u:f,children:[a.jsx(Zt,{className:"text-lg"}),a.jsx("span",{children:"Manage Account"})]})]}),a.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),e&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>t(!1)}),a.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[a.jsx(qMe,{toggleSidebar:()=>t(!0)}),a.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:a.jsx(Cp,{})})]})]})}const KMe=e=>a.jsx(Bt,{...e}),QMe=e=>a.jsx(Tf,{...e}),XMe=e=>a.jsx(tk,{...e}),RQ=e=>a.jsx(Is,{...e}),ZMe=e=>a.jsx(Lp,{...e}),JMe=e=>a.jsx(sw,{...e}),eIe=e=>a.jsx(_t,{...e}),tIe=e=>a.jsx(Et,{...e}),aIe=e=>a.jsx(iw,{...e}),zQ=e=>a.jsx(rw,{...e}),UQ=e=>a.jsx(La,{...e}),FQ=e=>a.jsx(Zt,{...e}),nIe=e=>a.jsx(Ba,{...e}),sIe=e=>a.jsx(Kt,{...e}),rIe=e=>a.jsx(ga,{...e}),iIe=e=>a.jsx(Zs,{...e}),lIe=e=>a.jsx(xn,{...e}),oIe=e=>a.jsx(_t,{...e}),cIe=e=>a.jsx(Es,{...e}),dIe=e=>a.jsx(Lo,{...e}),uIe=e=>a.jsx(ys,{...e}),BQ=e=>`P ${new Intl.NumberFormat("en-PH",{minimumFractionDigits:0}).format(e)}`,mIe=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},fIe=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},hIe=e=>{switch(e){case"call":return{Icon:tIe,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:aIe,color:"text-green-600",bgColor:"bg-green-100"};case"meeting":default:return{Icon:eIe,color:"text-blue-500",bgColor:"bg-blue-100"}}},gIe=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},pIe=({searchQuery:e,onSearchChange:t,searchResults:n,onSearchResultClick:s})=>{const r=vt(),[i,l]=h.useState(!1),o=h.useRef(null),c=[{icon:UQ,label:"Account"},{icon:FQ,label:"Contact"},{icon:nIe,label:"Leads"},{icon:sIe,label:"Deals"},{icon:rIe,label:"Quotes"},{icon:iIe,label:"Target"},{icon:lIe,label:"Task"},{icon:oIe,label:"Meeting"},{icon:cIe,label:"Call"},{icon:uIe,label:"Audit"},{icon:dIe,label:"Territory"}];h.useEffect(()=>{const f=p=>{o.current&&!o.current.contains(p.target)&&l(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const d=f=>{t(f.target.value),l(f.target.value.trim().length>0)},u=f=>{s&&s(f),l(!1)};return a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[a.jsxs("div",{className:"w-full flex justify-center relative",ref:o,children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-lg lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[a.jsx(KMe,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),a.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:d,onFocus:()=>e.trim().length>0&&l(!0)})]}),i&&Array.isArray(n)&&n.length>0&&a.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:n.map((f,p)=>a.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>u(f),children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:f.name}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:f.type}),f.details&&a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:f.details})]}),a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${f.type==="Lead"?"bg-blue-100 text-blue-600":f.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:f.type})]})},p))}),i&&e.trim().length>0&&(!Array.isArray(n)||n.length===0)&&a.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 p-4 text-center text-sm text-gray-500",children:"No results found"})]}),a.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:a.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:c.map((f,p)=>a.jsxs("div",{className:"relative flex-shrink-0 group flex items-center justify-center",children:[a.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":f.label,title:f.label,onClick:()=>{switch(f.label){case"Account":r("/sales/accounts");break;case"Contact":r("/sales/contacts");break;case"Leads":r("/sales/leads");break;case"Deals":r("/sales/deals");break;case"Quotes":r("/sales/quotes");break;case"Target":r("/sales/targets");break;case"Task":r("/sales/tasks");break;case"Meeting":r("/sales/meetings");break;case"Call":r("/sales/calls");break;case"Audit":r("/sales/audit");break;case"Territory":r("/sales/territory");break;default:console.log(`Clicked ${f.label}`)}},children:a.jsx(f.icon,{size:24,className:"lg:scale-95"})}),a.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-1.5 bg-gray-900 text-white text-xs font-semibold rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-75 ease-in-out z-50 shadow-lg",children:[f.label,a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]},p))})})]})},xIe=({action:e,description:t,entity_type:n,entity_name:s,timestamp:r})=>{const i=vt(),l=u=>{if(!u)return"Unknown";const f=new Date(u),x=new Date-f,v=Math.floor(x/6e4),w=Math.floor(x/36e5),b=Math.floor(x/864e5);return v<1?"Just now":v<60?`${v} min ago`:w<24?`${w} hour${w>1?"s":""} ago`:b<7?`${b} day${b>1?"s":""} ago`:f.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},o=e||t||"Action",c=s||n||"System",d=l(r);return a.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/sales/audit"),children:[a.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[o," ",a.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",c,")"]})]}),a.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:d})]})},yIe=({logs:e,loading:t})=>{const n=vt();return a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),a.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>n("/sales/audit"),children:[a.jsx("span",{children:"See All"}),a.jsx(zQ,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?a.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((s,r)=>a.jsx(xIe,{...s},r))}):a.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},bIe=({icon:e,title:t,value:n,color:s,bgColor:r,loading:i,onClick:l})=>a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l||(()=>console.log(`Clicked metric card: ${t}`)),children:[a.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:a.jsx(e,{size:20})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n||0})]})]}),vIe=({revenueData:e,loading:t})=>{const n=vt(),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=h.useMemo(()=>{if(console.log("=== RevenueChart calculateRevenueData ==="),console.log("revenueData:",e),console.log("revenueData length:",e?.length),!e||e.length===0){console.log("No revenue data, returning empty chart");const b=new Date;b.getFullYear();const C=b.getMonth(),N=[],S=[];for(let A=0;A<=C;A++)N.push(s[A]),S.push(0);return{labels:N,revenues:S,maxRevenue:0}}const o={};let c=0,d=0;console.log("Processing deals:",e.length),e.forEach((b,C)=>{const N=b.close_date||b.closeDate||null,S=N&&N!==null&&N!=="",A=b.stage||"",k=A.toUpperCase()==="CLOSED_WON"||A==="CLOSED_WON";let _=b.amount;_&&typeof _=="object"&&_.toString?_=parseFloat(_.toString()):_=parseFloat(_)||0;const T=_>0;if(k&&(d++,console.log(`Deal ${C+1} (CLOSED_WON):`,{id:b.id,name:b.name,stage:A,close_date:N,close_date_type:typeof N,amount:_,amount_type:typeof b.amount,hasCloseDate:S,hasAmount:T,willBeAdded:S&&T,allFields:Object.keys(b)})),S&&k&&T)try{let E=new Date(N);if(isNaN(E.getTime())){const I=String(N).split("T")[0];E=new Date(I+"T00:00:00")}if(isNaN(E.getTime()))console.warn(` Invalid date for deal ${b.id}:`,N,"Type:",typeof N);else{const I=E.getFullYear(),z=E.getMonth()+1,$=`${I}-${String(z).padStart(2,"0")}`;o[$]||(o[$]=0),o[$]+=_,c++,console.log(` Added deal ${b.id} to month ${$}: ${_}, total: ${o[$]}`),console.log(`  - Close date: ${N} -> Parsed: ${E.toISOString()} -> Month: ${$} (Year: ${I}, Month: ${z})`)}}catch(E){console.error("Error parsing deal date:",N,E)}else k&&console.warn(` Deal ${b.id} is CLOSED_WON but missing data:`,{hasCloseDate:S,hasAmount:T,closeDate:N,amount:_,originalAmount:b.amount})}),console.log("Summary:",{totalDeals:e.length,closedWonDeals:d,validDealsForGraph:c,monthlyRevenue:o});const u=Object.keys(o).map(b=>parseInt(b.split("-")[0])),f=u.length>0?[...new Set(u)].sort():[],p=new Date().getFullYear();new Date().getMonth();const x=[],v=[];for(let b=0;b<12;b++){const C=`${p}-${String(b+1).padStart(2,"0")}`;x.push(s[b]);const N=o[C]||0;v.push(N),N>0&&console.log(`Month ${s[b]} (${C}): ${N}`)}if(f.length>0){const b=Math.max(...f);if(b>p)for(let C=p+1;C<=b;C++)for(let N=0;N<12;N++){const S=`${C}-${String(N+1).padStart(2,"0")}`,A=o[S]||0;x.push(`${s[N]} ${C}`),v.push(A),A>0&&console.log(`Month ${s[N]} ${C} (${S}): ${A}`)}}const w=Math.max(...v,1);return console.log("Final chart data:",{labels:x,revenues:v,maxRevenue:w,hasData:v.some(b=>b>0)}),{labels:x,revenues:v,maxRevenue:w}},[e]),i=r.labels,l=r.revenues;return console.log("=== FINAL CHART DATA ==="),console.log("X Axis (Months):",i),console.log("Y Axis (Revenue):",l),console.log("Has any revenue > 0:",l.some(o=>o>0)),console.log("All revenue values:",l),console.log("Max revenue:",r.maxRevenue),a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),a.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>n("/sales/deals"),children:[a.jsx("span",{children:"See All"}),a.jsx(zQ,{size:14,className:"transform -rotate-45"})]})]}),a.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:a.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i&&i.length>0&&l&&l.length>0?a.jsx(fN,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:o=>o>=1e3?`${(o/1e3).toFixed(0)}k`:o.toString()}],series:[{data:l,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%"}}):a.jsxs("div",{className:"text-center text-gray-500",children:[a.jsx("p",{className:"text-sm",children:"No revenue data available"}),a.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},wIe=({pipelineData:e,loading:t})=>{const n=vt(),s=l=>{const o=(l||"").toUpperCase(),c={PROSPECTING:{name:"Prospecting",color:"bg-blue-500"},QUALIFICATION:{name:"Qualification",color:"bg-yellow-500"},PROPOSAL:{name:"Proposal",color:"bg-orange-500"},NEGOTIATION:{name:"Negotiation",color:"bg-purple-500"},CLOSED_WON:{name:"Closed Won",color:"bg-green-500"},CLOSED_LOST:{name:"Closed Lost",color:"bg-red-500"}};if(c[o])return c[o];const d=["bg-blue-500","bg-yellow-500","bg-orange-500","bg-purple-500","bg-green-500","bg-red-500"],u=Math.abs(o.split("").reduce((f,p)=>f+p.charCodeAt(0),0))%d.length;return{name:l||"Unknown",color:d[u]}},i=(()=>{if(!e||e.length===0)return["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"].map(f=>{const p=s(f);return{stage:p.name,value:0,deals:0,color:p.color}});const l={};e.forEach(u=>{const f=u.stage||"PROSPECTING";l[f]||(l[f]={deals:0,value:0}),l[f].deals+=1,l[f].value+=parseFloat(u.amount||0)});const o=Math.max(...Object.values(l).map(u=>u.value),1),c=["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"],d=[];return c.forEach(u=>{const f=s(u),p=l[u]||{deals:0,value:0};d.push({stage:f.name,value:p.value,deals:p.deals,color:f.color,percentage:o>0?p.value/o*100:0})}),d})();return a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Sales Pipeline"}),a.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:()=>n("/sales/deals"),children:"See All"})]}),a.jsx("div",{className:"space-y-4 flex-grow",children:i.slice(0,6).map(l=>a.jsxs("div",{className:"flex flex-col cursor-pointer hover:opacity-85 transition duration-150",onClick:()=>n("/sales/deals"),children:[a.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[a.jsx("span",{className:"font-medium text-gray-700",children:l.stage}),a.jsx("span",{className:"font-semibold text-gray-800",children:BQ(l.value)})]}),a.jsx("div",{className:"relative h-2 rounded-full bg-gray-200",children:a.jsx("div",{className:`absolute top-0 left-0 h-full rounded-full ${l.color}`,style:{width:`${Math.min(l.percentage,100)}%`}})}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[l.deals," Deals"]})]},l.stage))})]})},c_=({title:e,items:t,children:n,onSeeAll:s})=>{const r=vt(),i=()=>{if(s)s();else{const l={"Latest Leads":"/sales/leads","Latest Deals":"/sales/deals","Upcoming Activities":"/sales/tasks"};l[e]&&r(l[e])}};return a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),a.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),n]})},NIe=({first_name:e,last_name:t,company_name:n,source:s,created_at:r,id:i})=>{const l=vt(),{text:o,bg:c}=fIe(s||"Website"),d=x=>{if(!x)return"Unknown";const v=new Date(x),b=new Date-v,C=Math.floor(b/6e4),N=Math.floor(b/36e5),S=Math.floor(b/864e5);return C<60?`${C} min ago`:N<24?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):S<7?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):v.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},u=`${e||""} ${t||""}`.trim()||"Unknown",f=n||"Unknown Company",p=d(r);return a.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&l(`/sales/leads/${i}`),children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:u}),a.jsx("p",{className:"text-xs text-gray-500",children:f})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs text-gray-400",children:p}),a.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${o} ${c} px-2 py-0.5 rounded-full`,children:s||"Website"})]})]})})},jIe=({name:e,amount:t,account:n,stage:s,created_at:r,id:i,previousAmount:l})=>{const o=vt(),d={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[s]||s||"Unknown",{text:u,bg:f}=mIe(d),p=parseFloat(t||0),x=l?p>=l?"up":"down":"up",v=x==="up"?ZMe:JMe,w=x==="up"?"text-green-400":"text-red-400",b=n?.name||"Unknown Company";return a.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&o(`/sales/deals/info?id=${i}`),children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex-shrink",children:[a.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),a.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:b}),a.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${u} ${f} px-2 py-0.5 rounded-full`,children:d})]}),a.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[a.jsx("p",{className:"text-md font-bold text-gray-800",children:BQ(p)}),a.jsx(v,{size:16,className:`${w} mt-1`})]})]})})},CIe=({type:e,title:t,assignedTo:n,dueDate:s,scheduledDate:r,priority:i,id:l,activityType:o,fullData:c})=>{const d=vt(),f=o||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:p,color:x,bgColor:v}=hIe(f),{text:w,bg:b}=gIe(i||"MEDIUM"),S=(_=>{if(!_)return"No date set";const T=new Date(_),I=T-new Date,z=Math.floor(I/864e5);return z===0?`Today, ${T.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:z===1?`Tomorrow, ${T.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:z===-1?`Yesterday, ${T.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:T.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(s||r),A=n||"Unassigned",k=()=>{l&&(c?f==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(c)),d(`/sales/calls/info?id=${l}`)):f==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(c)),d(`/sales/meetings/info?id=${l}`)):d("/sales/tasks"):d(f==="call"?`/sales/calls/info?id=${l}`:f==="meeting"?`/sales/meetings/info?id=${l}`:"/sales/tasks"))};return a.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:k,children:[a.jsx("div",{className:`p-2 rounded-lg ${v} mr-3 flex-shrink-0 mt-1`,children:a.jsx(p,{size:20,className:`${x}`})}),a.jsxs("div",{className:"flex-grow",children:[a.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[a.jsx("span",{className:"text-xl leading-none mr-2",children:""}),t||"Untitled Activity"]}),a.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[a.jsxs("p",{className:"flex items-center",children:[a.jsx(RQ,{size:14,className:"mr-1.5 text-gray-400"}),S]}),a.jsxs("p",{className:"flex items-center",children:[a.jsx(FQ,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",A]})]})]}),a.jsx("span",{className:`inline-block text-xs font-medium ${w} ${b} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},SIe=()=>{const e=vt(),{user:t}=ta(),[n,s]=h.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0}),[r,i]=h.useState([]),[l,o]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState([]),[p,x]=h.useState([]),[v,w]=h.useState([]),[b,C]=h.useState(!0),[N,S]=h.useState(null),[A,k]=h.useState(""),[_,T]=h.useState([]),[E,I]=h.useState([]),[z,$]=h.useState([]),[P,O]=h.useState(new Date),B=h.useRef(null),Q=h.useRef(null),F=h.useMemo(()=>{try{if(!A.trim())return[];const oe=A.toLowerCase().trim(),Z=[];return Array.isArray(_)&&_.forEach(R=>{const ve=`${R.first_name||""} ${R.last_name||""}`.trim().toLowerCase(),X=(R.company_name||"").toLowerCase(),je=(R.email||"").toLowerCase(),Ne=(R.phone||"").toLowerCase();(ve.includes(oe)||X.includes(oe)||je.includes(oe)||Ne.includes(oe))&&Z.push({id:R.id,name:`${R.first_name||""} ${R.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:R.company_name||"No company",route:`/sales/leads/${R.id}`})}),Array.isArray(E)&&E.forEach(R=>{const ve=(R.name||"").toLowerCase(),X=(R.account?.name||"").toLowerCase(),je=(R.description||"").toLowerCase();(ve.includes(oe)||X.includes(oe)||je.includes(oe))&&Z.push({id:R.id,name:R.name||"Unnamed Deal",type:"Deal",details:R.account?.name||"No account",route:`/sales/deals/info?id=${R.id}`})}),Array.isArray(z)&&z.forEach(R=>{const ve=(R.name||"").toLowerCase(),X=(R.email||"").toLowerCase(),je=(R.phone||"").toLowerCase(),Ne=(R.website||"").toLowerCase();(ve.includes(oe)||X.includes(oe)||je.includes(oe)||Ne.includes(oe))&&Z.push({id:R.id,name:R.name||"Unnamed Account",type:"Account",details:R.email||R.phone||"No contact info",route:"/sales/accounts"})}),Z.slice(0,10)}catch(oe){return console.error("Error in search:",oe),[]}},[A,_,E,z]),ee=oe=>{oe.route&&(e(oe.route),k(""))},V=h.useCallback(async()=>{C(!0),S(null);try{const[oe,Z,R,ve,X,je,Ne]=await Promise.all([ie.get("/leads/sales/getLeads").catch(he=>(console.error("Error fetching leads:",he),{data:[]})),ie.get("/deals/sales/fetch-all").catch(he=>(console.error("Error fetching deals:",he),{data:[]})),ie.get("/accounts/sales/fetch-all").catch(he=>(console.error("Error fetching accounts:",he),{data:[]})),ie.get("/tasks/all").catch(he=>(console.error("Error fetching tasks:",he),{data:[]})),ie.get("/meetings/sales/fetch-all").catch(he=>(console.error("Error fetching meetings:",he),{data:[]})),ie.get("/calls/sales/fetch-all").catch(he=>(console.error("Error fetching calls:",he),{data:[]})),ie.get("/logs/read-all").catch(he=>(console.error("Error fetching logs:",he),{data:[]}))]),Oe=Array.isArray(oe.data)?oe.data:[],Fe=Array.isArray(Z.data)?Z.data:[],me=Array.isArray(R.data)?R.data:[],Be=Array.isArray(ve.data)?ve.data:[],Pe=Array.isArray(X.data)?X.data:[],we=Array.isArray(je.data)?je.data:[],ne=Array.isArray(Ne.data)?Ne.data:[];console.log("=== RAW DEALS API RESPONSE ==="),console.log("Deals count:",Fe.length),Fe.length>0&&(console.log("First deal sample (raw):",JSON.stringify(Fe[0],null,2)),console.log("First deal keys:",Object.keys(Fe[0]))),T(Oe),I(Fe),$(me);const Le=Oe.filter(he=>he.status&&!["Lost","Converted"].includes(he.status)).length,pe=Be.filter(he=>!he.dueDate||he.status==="Completed"?!1:new Date(he.dueDate)<new Date).length;s({activeLeads:Le,totalDeals:Fe.length,activeAccounts:me.length,overdueTasks:pe});const le=[...Oe].sort((he,Me)=>new Date(Me.created_at||0)-new Date(he.created_at||0)).slice(0,5);i(le);const ge=[...Fe].sort((he,Me)=>new Date(Me.created_at||0)-new Date(he.created_at||0)).slice(0,5);o(ge);const fe=new Date,Te=[];we.forEach(he=>{const Me=he.due_date||he.call_time,re=(he.status||"").toUpperCase();if(Me){const Qe=new Date(Me);re==="COMPLETED"||re==="MISSED"||re==="NOT_HELD"||re==="HELD"||Te.push({type:"Call",title:he.subject||"Untitled Call",assignedTo:he.assigned_to||(he.call_assign_to?`${he.call_assign_to.first_name||""} ${he.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:Me,priority:(he.priority||"MEDIUM").toUpperCase(),id:he.id,activityType:"call",fullData:he})}}),Pe.forEach(he=>{const Me=he.dueDate||he.start_time,re=(he.status||"").toUpperCase();if(Me){const Qe=new Date(Me);re==="COMPLETED"||re==="CANCELLED"||re==="DONE"||Te.push({type:"Meeting",title:he.subject||he.activity||"Untitled Meeting",assignedTo:he.assignedTo||(he.meet_assign_to?`${he.meet_assign_to.first_name||""} ${he.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:Me,priority:(he.priority||"MEDIUM").toUpperCase(),id:he.id,activityType:"meeting",fullData:he})}});const Ye={HIGH:1,MEDIUM:2,LOW:3},Ae=Te.sort((he,Me)=>{const re=Ye[he.priority]||3,Qe=Ye[Me.priority]||3;if(re!==Qe)return re-Qe;const We=new Date(he.scheduledDate||0),dt=new Date(Me.scheduledDate||0);return We-dt}).slice(0,5);d(Ae),f(Fe),console.log("=== ALL DEALS DATA ==="),console.log("Total deals:",Fe.length);const Ie=Fe.filter(he=>(he.stage||"").toUpperCase()==="CLOSED_WON");console.log("CLOSED_WON deals:",Ie.length),Ie.length>0?(console.log("=== CLOSED_WON DEALS DETAILS ==="),Ie.forEach((he,Me)=>{let re=he.amount;re&&typeof re=="object"?re.toString?re=parseFloat(re.toString()):re=parseFloat(re):re=parseFloat(re)||0,console.log(`Deal ${Me+1}:`,{id:he.id,name:he.name,stage:he.stage,stage_upper:(he.stage||"").toUpperCase(),amount:he.amount,amount_parsed:re,amount_type:typeof he.amount,close_date:he.close_date,close_date_type:typeof he.close_date,close_date_value:he.close_date?new Date(he.close_date):null,has_close_date:!!he.close_date,has_amount:re>0,all_keys:Object.keys(he),full_deal:he})})):(console.log(" No CLOSED_WON deals found!"),console.log("All deal stages:",Fe.map(he=>he.stage))),w(Fe);const Je=[...ne].sort((he,Me)=>new Date(Me.timestamp||0)-new Date(he.timestamp||0));x(Je)}catch(oe){console.error("Error fetching dashboard data:",oe),S("Failed to load dashboard data. Please refresh the page.")}finally{C(!1)}},[]);h.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",console.log("SalesOverview mounted, fetching data..."),V(),B.current=setInterval(()=>{console.log("Auto-refreshing dashboard data..."),V(),O(new Date)},3e4),()=>{B.current&&clearInterval(B.current)}),[V]),h.useEffect(()=>{if(!t||!t.id)return;let oe=0;const Z=3;let R=null;const ve=()=>{const X=window.location.protocol==="https:"?"wss:":"ws:",je=window.location.hostname==="localhost"?"localhost:8000":window.location.host,Ne=`${X}//${je}/ws/notifications?user_id=${t.id}`;try{const Oe=new WebSocket(Ne);Q.current=Oe,Oe.onopen=()=>{console.log(" WebSocket connected for dashboard updates"),oe=0},Oe.onmessage=Fe=>{try{const me=JSON.parse(Fe.data);console.log(" Real-time notification received:",me),me.event&&["new_task","task_updated","new_lead","lead_updated","new_deal","deal_updated","new_account","account_updated","new_meeting","meeting_updated","new_call","call_updated"].includes(me.event)&&(console.log(" Refreshing dashboard due to:",me.event),V(),O(new Date))}catch(me){console.error("Error parsing WebSocket message:",me)}},Oe.onerror=Fe=>{oe===0&&console.warn(" WebSocket connection unavailable (this is optional)")},Oe.onclose=()=>{oe<Z&&(oe++,R=setTimeout(()=>{t&&t.id&&ve()},5e3))}}catch{console.warn(" WebSocket not available (optional feature)")}};return ve(),()=>{R&&clearTimeout(R),Q.current&&(Q.current.close(),Q.current=null)}},[t,V]);const de=[{icon:UQ,title:"Active Leads",value:n.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/sales/leads")},{icon:QMe,title:"Total Deals",value:n.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/sales/deals")},{icon:XMe,title:"Active Account",value:n.activeAccounts,color:"text-green-600",bgColor:"bg-green-50",onClick:()=>e("/sales/accounts")},{icon:RQ,title:"Overdue Tasks",value:n.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/sales/tasks")}];return console.log("SalesOverview rendering, loading:",b,"error:",N),a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[b&&a.jsx(zt,{}),a.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[N&&a.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:a.jsx("p",{className:"font-medium",children:N})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 mb-8",children:[a.jsxs("div",{className:"lg:col-span-9 flex flex-col space-y-4",children:[a.jsx(pIe,{searchQuery:A,onSearchChange:k,searchResults:F,onSearchResultClick:ee}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:de.map(oe=>a.jsx(bIe,{...oe,loading:b},oe.title))})]}),a.jsx("div",{className:"lg:col-span-3",children:a.jsx(yIe,{logs:p,loading:b})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsx(vIe,{revenueData:v,loading:b})}),a.jsx("div",{children:a.jsx(wIe,{pipelineData:u,loading:b})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx(c_,{title:"Latest Leads",children:r.length>0?r.map((oe,Z)=>a.jsx(NIe,{...oe},oe.id||Z)):a.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),a.jsx(c_,{title:"Latest Deals",children:b?a.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mb-2"}),a.jsx("div",{className:"text-sm text-gray-500",children:"Loading deals..."})]}):l.length>0?l.map((oe,Z)=>a.jsx(jIe,{...oe},oe.id||Z)):a.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),a.jsx(c_,{title:"Upcoming Activities",children:c.length>0?c.map((oe,Z)=>a.jsx(CIe,{...oe},oe.id||Z)):a.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})},d_=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Active"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Former"}],u_={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",parent_company:"",status:"PROSPECT",territory_id:"",assigned_to:""},br=e=>e?e.toUpperCase():"",m_=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",_Ie=e=>{switch(br(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},AIe=e=>{switch(br(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}};function EIe(){const e=vt(),{user:t}=ta(),n=t?.role==="Sales";h.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[s,r]=h.useState(!1),[i,l]=h.useState(!1),[o,c]=h.useState(!1),[d,u]=h.useState(null),[f,p]=h.useState(null),[x,v]=h.useState(u_),[w,b]=h.useState(null),[C,N]=h.useState([]),[S,A]=h.useState(!1),[k,_]=h.useState([]),[T,E]=h.useState(null),[I,z]=h.useState([]),[$,P]=h.useState([]),[O,B]=h.useState("Filter by Status"),[Q,F]=h.useState(""),[ee,V]=h.useState(null),[de,oe]=h.useState(!1),[Z,R]=h.useState(1),[ve,X]=h.useState(10),[je,Ne]=h.useState("Overview"),[Oe,Fe]=h.useState(""),[me,Be]=h.useState(!1),[Pe,we]=h.useState([]),[ne,Le]=h.useState({}),[pe,le]=h.useState(null);h.useEffect(()=>{s&&!i&&n&&t&&!x.assigned_to&&v(Ce=>({...Ce,assigned_to:t.id}))},[s,i,n,t,x.assigned_to]);const ge=h.useCallback(async(Ce=null)=>{A(!0);try{const it=await ie.get("/accounts/admin/fetch-all"),kt=[...Array.isArray(it.data)?it.data:[]].sort((Ft,ia)=>{const Rn=Ft?.created_at||Ft?.updated_at||0,es=ia?.created_at||ia?.updated_at||0;return new Date(es)-new Date(Rn)});if(N(kt),Ce){const Ft=kt.find(ia=>ia.id===Ce);b(Ft||null)}}catch(it){console.error(it),N([]),it.response?.status===403?H.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):H.error("Failed to fetch accounts. Please try again later.")}finally{A(!1)}},[b]),fe=h.useCallback(async()=>{try{const Ce=await ie.get("/users/all");_(Array.isArray(Ce.data)?Ce.data:[])}catch(Ce){console.error(Ce),Ce.response?.status===403&&H.warn("Unable to load users for assignment (permission denied).")}},[]),Te=h.useCallback(async()=>{try{const Ce=await ie.get("/territories/fetch");z(Array.isArray(Ce.data)?Ce.data:[])}catch(Ce){console.error(Ce),Ce.response?.status===403&&H.warn("Unable to load territories (permission denied).")}},[]),Ye=h.useCallback(async()=>{try{const Ce=await ie.get("/accounts/admin/parent-companies");P(Array.isArray(Ce.data)?Ce.data:[])}catch(Ce){console.error(Ce),Ce.response?.status===403&&H.warn("Unable to load parent companies (permission denied).")}},[]),Ae=h.useCallback(async Ce=>{try{const it=await ie.get(`/activities/accounts/${Ce}`);Le(it.data&&typeof it.data=="object"?it.data:{})}catch(it){console.error(it),it.response?.status===404&&(console.warn("No activities found for this account."),Le({}))}},[]);h.useEffect(()=>{ge(),fe(),Te(),Ye()},[ge,fe,Te,Ye]),h.useEffect(()=>{w&&Fe(br(w.status)||"PROSPECT")},[w]);const Ie=C.filter(Ce=>Ce.acc_creator?.id===t?.id&&Ce.assigned_accs?.id===t?.id),Je=Ie.length,he=h.useMemo(()=>Ie.filter(Ce=>Ce.status?.toLowerCase()==="customer").length,[Ie]),Me=h.useMemo(()=>Ie.filter(Ce=>Ce.status?.toLowerCase()==="prospect").length,[Ie]),re=h.useMemo(()=>Ie.filter(Ce=>Ce.status?.toLowerCase()==="partner").length,[Ie]),Qe=h.useMemo(()=>Ie.filter(Ce=>Ce.status?.toLowerCase()==="active").length,[Ie]),We=h.useMemo(()=>Ie.filter(Ce=>Ce.status?.toLowerCase()==="inactive").length,[Ie]),dt=h.useMemo(()=>Ie.filter(Ce=>Ce.status?.toLowerCase()==="former").length,[Ie]),ze=h.useMemo(()=>[{title:"Total",value:Je,icon:La,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:he,icon:gl,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:Me,icon:Ba,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:re,icon:Zt,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:Qe,icon:gl,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:We,icon:pl,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:dt,icon:pl,color:"text-orange-600",bgColor:"bg-orange-100"}],[Je,he,Me,re,Qe,We,dt]),ce=h.useMemo(()=>{const Ce=Q.trim().toLowerCase(),it=O.trim().toUpperCase();return C.filter(Ct=>{if(!(t?.role==="Admin"||t?.role==="CEO"||t?.role==="MANAGER"||t?.role==="GROUP MANAGER")&&Ct.status?.toUpperCase()==="INACTIVE")return!1;const Ft=[Ct?.name,Ct?.website,Ct?.industry,Ct?.territory?.name,Ct?.phone_number],ia=Ce===""||Ft.some(es=>es==null?!1:es.toString().toLowerCase().includes(Ce)),Rn=it==="FILTER BY STATUS"||br(Ct.status)===it;return ia&&Rn})},[C,Q,O,t]),ye=Math.max(1,Math.ceil(ce.length/ve)||1);h.useEffect(()=>{R(1)},[Q,O]),h.useEffect(()=>{R(Ce=>{const it=Math.max(1,Math.ceil(ce.length/ve)||1);return Ce>it?it:Ce})},[ce.length,ve]);const Ue=h.useMemo(()=>{const Ce=(Z-1)*ve;return ce.slice(Ce,Ce+ve)},[ce,Z,ve]),et=Ce=>{if(Ce.target.checked){const it=Ue.filter(Ct=>Ct.assigned_accs?.id===t?.id&&Ct.acc_creator?.id===t?.id).map(Ct=>Ct.id);we(it)}else we([])},lt=Ce=>{we(it=>it.includes(Ce)?it.filter(Ct=>Ct!==Ce):[...it,Ce])},Ee=async()=>{if(Pe.length===0)return;const Ce=t?.role==="Admin"||t?.role==="CEO"||t?.role==="MANAGER"||t?.role==="GROUP MANAGER",it=Ce?"delete":"archive",Ct=Ce?"This action cannot be undone.":"These accounts will be hidden from your view but admins can still see them.",kt=!Ce;V({title:`${it.charAt(0).toUpperCase()+it.slice(1)} Accounts`,message:a.jsxs("span",{children:["Are you sure you want to ",it," ",a.jsx("span",{className:"font-semibold",children:Pe.length})," selected accounts? ",Ct]}),confirmLabel:`${it.charAt(0).toUpperCase()+it.slice(1)} ${Pe.length} account(s)`,cancelLabel:"Cancel",variant:"danger",icon:kt?Ac:null,isArchive:kt,action:{type:"bulk-delete",accountIds:Pe}})};ce.length===0||(Z-1)*ve+1,Math.min(Z*ve,ce.length);const tt=()=>R(Ce=>Math.max(Ce-1,1)),be=()=>R(Ce=>Math.min(Ce+1,ye)),Xe=Ce=>{b(Ce),Ne("Overview"),Fe(br(Ce?.status)||"PROSPECT")},M=()=>b(null),U=Ce=>{Ce.target.id==="accountModalBackdrop"&&!de&&M()},Y=()=>{r(!1),l(!1),p(null),v(u_),c(!1),E(null)},te=Ce=>{Ce.target.id==="modalBackdrop"&&Y()},K=Ce=>Ce?new Date(Ce).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",Se=Ce=>{const{name:it,value:Ct}=Ce.target;v(kt=>({...kt,[it]:Ct}))},G=()=>{v(u_),l(!1),p(null),r(!0)},J=Ce=>{b(null),Ce.assigned_accs?E(Ce.assigned_accs):E(null),v({name:Ce.name||"",website:Ce.website||"",phone_number:Ce.phone_number||"",billing_address:Ce.billing_address||"",shipping_address:Ce.shipping_address||"",industry:Ce.industry||"",status:br(Ce.status)||"PROSPECT",territory_id:Ce.territory?.id?String(Ce.territory.id):"",assigned_to:Ce.assigned_accs?.id?String(Ce.assigned_accs.id):""}),l(!0),p(Ce.id),r(!0)},De=Ce=>{if(!Ce)return;const it=t?.role==="Admin"||t?.role==="CEO"||t?.role==="MANAGER"||t?.role==="GROUP MANAGER",Ct=it?"delete":"archive",kt=it?"This action cannot be undone.":"This account will be hidden from your view but admins can still see it.",Ft=!it;V({title:`${Ct.charAt(0).toUpperCase()+Ct.slice(1)} Account`,message:a.jsxs("span",{children:["Are you sure you want to ",Ct," the account"," ",a.jsx("span",{className:"font-semibold",children:Ce.name}),"? ",kt]}),confirmLabel:`${Ct.charAt(0).toUpperCase()+Ct.slice(1)} Account`,cancelLabel:"Cancel",variant:"danger",icon:Ft?Ac:null,isArchive:Ft,action:{type:"delete",targetId:Ce.id,name:Ce.name}})},Ve=async()=>{if(!ee?.action){V(null);return}const{action:Ce}=ee,{type:it,payload:Ct,targetId:kt,name:Ft}=Ce;oe(!0);try{if(it==="create"){c(!0);const ia=await ie.post("/accounts/admin",Ct);Ye(),H.success(`Account "${Ft}" created successfully.`);const Rn=w?.id||null;Y(),await ge(Rn),!w&&ia.data?.id}else if(it==="update"){if(!kt)throw new Error("Missing account identifier for update.");c(!0),await ie.put(`/accounts/admin/${kt}`,Ct),H.success(`Account "${Ft}" updated successfully.`);const ia=w?.id&&w.id===kt?kt:null;Y(),await ge(ia),w?.id===kt&&b(null)}else if(it==="delete"){if(!kt)throw new Error("Missing account identifier for deletion.");const ia=w?.id;u(kt);const es=t?.role==="Admin"||t?.role==="CEO"||t?.role==="MANAGER"||t?.role==="GROUP MANAGER"?`Account "${Ft}" deleted successfully.`:`Account "${Ft}" archived successfully.`;await ie.delete(`/accounts/admin/${kt}`),H.success(es),await ge(ia&&ia!==kt?ia:null),ia===kt&&b(null)}else if(it==="bulk-delete"){const{accountIds:ia}=Ce,es=t?.role==="Admin"||t?.role==="CEO"||t?.role==="MANAGER"||t?.role==="GROUP MANAGER"?"deleted":"archived";await ie.delete("/accounts/admin/bulk-delete",{data:{account_ids:ia}}),H.success(`Successfully ${es} ${ia.length} accounts`),we([]),await ge()}}catch(ia){console.error(ia);const Rn=it==="create"?"Failed to create account. Please review the details and try again.":it==="update"?"Failed to update account. Please review the details and try again.":it==="bulk-delete"?"Failed to delete selected accounts.":"Failed to delete account. Please try again.",es=ia.response?.data?.detail||Rn;H.error(es),(it==="create"||it==="update")&&c(!1),it==="delete"&&u(null)}finally{(it==="create"||it==="update")&&c(!1),it==="delete"&&u(null),oe(!1),V(null)}},ft=()=>{de||V(null)},bt=async()=>{if(!w||!Oe)return;const Ce=br(Oe),it=br(w.status);if(Ce!==it){Be(!0);try{await ie.put(`/accounts/admin/${w.id}`,{status:Ce}),H.success(`Account status updated to ${m_(Ce)}`),N(Ct=>Ct.map(kt=>kt.id===w.id?{...kt,status:Ce}:kt)),b(null)}catch(Ct){console.error(Ct);const kt=Ct.response?.data?.detail||"Failed to update account status. Please try again.";H.error(kt)}finally{Be(!1)}}},[jt,ke]=h.useState(!1),pt=Ce=>{Ce.preventDefault(),ke(!0);const it=x.name.trim();if(!it){H.error("Account name is required.");return}if(!x.assigned_to){H.error("Assigned To is required.");return}const kt={name:it,website:x.website?.trim()||null,phone_number:x.phone_number?.trim()||null,billing_address:x.billing_address?.trim()||null,shipping_address:x.shipping_address?.trim()||null,industry:x.industry?.trim()||null,parent_company:x.parent_company?.trim()||null,status:x.status||"PROSPECT",territory_id:x.territory_id?Number(x.territory_id):null,assigned_to:x.assigned_to?Number(x.assigned_to):null},Ft=i&&f?"update":"create";V({title:Ft==="create"?"Confirm New Account":"Confirm Update",message:Ft==="create"?a.jsxs("span",{children:["Are you sure you want to create the account"," ",a.jsx("span",{className:"font-semibold",children:it}),"?"]}):a.jsxs("span",{children:["Save changes to the account"," ",a.jsx("span",{className:"font-semibold",children:it}),"?"]}),confirmLabel:Ft==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:Ft,payload:kt,targetId:f||null,name:it}})},_e=[{label:"Filter by Status",value:"Filter by Status"},...d_.map(Ce=>({label:Ce.label,value:Ce.value}))],W=ee?.action?.type==="delete"?ee.action.targetId:null,ae=w&&(d===w.id||W===w.id),$e=w&&d===w.id,Ge=w?_Ie(w.status):"",ue=w?a.jsx("div",{id:"accountModalBackdrop",onClick:U,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:Ce=>Ce.stopPropagation(),children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),a.jsx("button",{onClick:M,className:"text-gray-400 hover:text-white cursor-pointer",children:a.jsx(Ha,{size:25})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:w.name}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${Ge}`,children:m_(w.status)})]}),a.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:w.assigned_accs&&w.assigned_accs.id===t?.id&&w.acc_creator&&w.acc_creator.id===t?.id&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>J(w),disabled:ee?.action?.type==="update"&&ee.action.targetId===w.id,children:[a.jsx(nn,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>De(w),disabled:!!ae,children:$e?"Archiving...":a.jsxs(a.Fragment,{children:[a.jsx(Ac,{className:"mr-2"}),"Archive"]})})]})})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(Ce=>a.jsx("button",{onClick:()=>Ne(Ce),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${je===Ce?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:Ce},Ce))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[je==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Website:"}),a.jsx("p",{children:w.website?a.jsx("a",{href:w.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:w.website}):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Industry:"}),a.jsx("p",{children:w.industry||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Parent Company:"}),a.jsx("p",{children:w.parent_company||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Territory:"}),a.jsx("p",{children:w.territory?.name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Phone Number:"}),a.jsx("p",{children:w.phone_number||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Billing Address:"}),a.jsx("p",{children:w.billing_address||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),a.jsx("p",{children:w.shipping_address||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:w.assigned_accs?`${w.assigned_accs.first_name} ${w.assigned_accs.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:w.acc_creator?`${w.acc_creator.first_name} ${w.acc_creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:K(w.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:K(w.updated_at)||"N/A"})]})]})}),je==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:C.notes||"No notes available."})]})]}),je==="Activities"&&a.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[ne.tasks&&ne.tasks.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>le(pe==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Gt,{className:"text-blue-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",ne.tasks.length,")"]})]}),pe==="tasks"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),pe==="tasks"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ne.tasks.map((Ce,it)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/tasks",{state:{taskID:Ce.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-blue-600 mt-1",children:a.jsx(Gt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:Ce.subject||Ce.title||"Task"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:Ce.description||"No description"}),Ce.assigned_to&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",Ce.assigned_to.first_name," ",Ce.assigned_to.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:K(Ce.due_date||Ce.created_at)})]},`task-${it}`))})]}),ne.meetings&&ne.meetings.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>le(pe==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_t,{className:"text-green-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",ne.meetings.length,")"]})]}),pe==="meetings"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),pe==="meetings"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ne.meetings.map((Ce,it)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/meetings",{state:{meetingID:Ce.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-green-600 mt-1",children:a.jsx(_t,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:Ce.subject||Ce.title||"Meeting"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:Ce.description||Ce.location||"No description"}),Ce.host&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",Ce.host.first_name," ",Ce.host.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:K(Ce.start_time||Ce.created_at)})]},`meeting-${it}`))})]}),ne.calls&&ne.calls.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>le(pe==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Et,{className:"text-purple-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",ne.calls.length,")"]})]}),pe==="calls"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),pe==="calls"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ne.calls.map((Ce,it)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/calls",{state:{callID:Ce.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-purple-600 mt-1",children:a.jsx(Et,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:Ce.subject||Ce.title||"Call"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:Ce.direction||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:K(Ce.call_time||Ce.created_at)})]},`call-${it}`))})]}),ne.contacts&&ne.contacts.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>le(pe==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Zt,{className:"text-teal-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",ne.contacts.length,")"]})]}),pe==="contacts"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),pe==="contacts"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ne.contacts.map((Ce,it)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/contacts",{state:{contactID:Ce.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-teal-600 mt-1",children:a.jsx(Zt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[Ce.first_name?`${Ce.first_name} `:"",Ce.last_name]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ce.title||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:K(Ce.created_at)})]},`contact-${it}`))})]}),ne.deals&&ne.deals.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>le(pe==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Kt,{className:"text-indigo-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",ne.deals.length,")"]})]}),pe==="deals"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),pe==="deals"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ne.deals.map((Ce,it)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/deals",{state:{dealID:Ce.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-indigo-600 mt-1",children:a.jsx(Kt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[Ce.deal_id?Ce.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",Ce.name||Ce.title||"Deal"]}),a.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:Ce.stage||Ce.description||"No description"})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:K(Ce.close_date||Ce.created_at)})]},`deal-${it}`))})]}),ne.quotes&&ne.quotes.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>le(pe==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ga,{className:"text-orange-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",ne.quotes.length,")"]})]}),pe==="quotes"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),pe==="quotes"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ne.quotes.map((Ce,it)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/quotes",{state:{quoteID:Ce.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-orange-600 mt-1",children:a.jsx(ga,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(Ce.quote_id?Ce.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ce.status||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:K(Ce.presented_date)||""})]},`quote-${it}`))})]}),(!ne||(!ne.tasks||ne.tasks.length===0)&&(!ne.meetings||ne.meetings.length===0)&&(!ne.calls||ne.calls.length===0)&&(!ne.quotes||ne.quotes.length===0)&&(!ne.deals||ne.deals.length===0)&&(!ne.contacts||ne.contacts.length===0))&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No related activities found for this account."})})]})]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Account"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Account"}}}),children:[a.jsx(_t,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Account"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Gt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:Oe||br(w?.status)||"PROSPECT",onChange:Ce=>Fe(Ce.target.value),children:d_.map(Ce=>a.jsx("option",{value:Ce.value,children:Ce.label},Ce.value))}),a.jsx("button",{onClick:bt,disabled:me||!Oe||br(Oe)===br(w?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${me||!Oe||br(Oe)===br(w?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:me?"Updating...":"Update"})]})]})]})]})]})}):null,se=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[S&&a.jsx(zt,{message:"Loading accounts..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(La,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{G(),ke(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(da,{className:"mr-2"})," Add Account"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:ze.map(Ce=>a.jsx(TIe,{...Ce},Ce.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search accounts",value:Q,onChange:Ce=>F(Ce.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:O,onChange:Ce=>B(Ce.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:_e.map(Ce=>a.jsx("option",{value:Ce.value,children:Ce.label},Ce.value))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 text-center w-12",children:a.jsx("input",{type:"checkbox",checked:Ue.length>0&&Ue.filter(Ce=>Ce.assigned_accs?.id===t?.id&&Ce.acc_creator?.id===t?.id).every(Ce=>Pe.includes(Ce.id))&&Ue.some(Ce=>Ce.assigned_accs?.id===t?.id&&Ce.acc_creator?.id===t?.id),onChange:et,className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4",children:"Industry"}),a.jsx("th",{className:"py-3 px-4",children:"Territory"}),a.jsx("th",{className:"py-3 px-4",children:"Phone"}),a.jsx("th",{className:"py-3 px-4 text-center w-24",children:Pe.length>0?a.jsx("button",{onClick:Ee,className:"text-orange-600 hover:text-orange-800 transition p-1 rounded-full hover:bg-orange-50",title:`Archive ${Pe.length} selected accounts`,children:a.jsx(Ac,{size:18})}):""})]})}),a.jsx("tbody",{children:S?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"Loading accounts..."})}):ce.length>0?Ue.map(Ce=>a.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>{Xe(Ce),Ae(Ce.id)},children:[a.jsx("td",{className:"py-3 px-4 text-center",children:Ce.assigned_accs?.id===t?.id&&Ce.acc_creator?.id===t?.id?a.jsx("input",{type:"checkbox",checked:Pe.includes(Ce.id),onChange:()=>lt(Ce.id),onClick:it=>it.stopPropagation(),className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"}):null}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:Ce.name}),a.jsx("div",{className:"text-gray-500 text-xs break-all",children:Ce.website||"--"})]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${AIe(Ce.status)}`,children:m_(Ce.status)})}),a.jsx("td",{className:"py-3 px-4 text-sm",children:Ce.industry||"--"}),a.jsx("td",{className:"py-3 px-4 text-sm",children:Ce.territory?.name||"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[a.jsx(Et,{className:"text-gray-500"}),a.jsx("span",{children:Ce.phone_number||"--"})]})}),a.jsx("td",{className:"py-3 px-4"})]},Ce.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No accounts found."})})})]})}),a.jsx(Jt,{className:"mt-4",totalItems:ce.length,pageSize:ve,currentPage:Z,onPrev:tt,onNext:be,onPageSizeChange:Ce=>{X(Ce),R(1)},pageSizeOptions:[10,20,30,40,50],label:"accounts"})]}),He=s?a.jsx("div",{id:"modalBackdrop",onClick:te,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:Ce=>Ce.stopPropagation(),children:[a.jsx("button",{onClick:()=>{Y(),ke(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:o||de,children:a.jsx(Vt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:i?"Edit Account":"Add New Account"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:pt,noValidate:!0,children:[a.jsx("div",{className:"md:col-span-2",children:a.jsx(Tm,{label:"Name",name:"name",value:x.name,onChange:Se,placeholder:"Company name",required:!0,isSubmitted:jt})}),a.jsx(N7,{label:"Parent Company",value:x.parent_company,onChange:Ce=>{v(it=>({...it,parent_company:Ce}))},items:$.map(Ce=>({id:Ce,name:Ce})),getLabel:Ce=>Ce?.name||"",placeholder:"Select or type parent company...",disabled:o,allowFreeText:!0}),a.jsx(Tm,{label:"Website",name:"website",value:x.website,onChange:Se,placeholder:"https://example.com",disabled:o}),a.jsx(Tm,{label:"Phone Number",name:"phone_number",value:x.phone_number,onChange:Se,placeholder:"09xx xxx xxxx",type:"tel",disabled:o}),a.jsx(Tm,{label:"Industry",name:"industry",value:x.industry,onChange:Se,placeholder:"Industry",disabled:o}),a.jsx(Tm,{label:"Billing Address",name:"billing_address",value:x.billing_address,onChange:Se,placeholder:"Billing address",disabled:o}),a.jsx(Tm,{label:"Shipping Address",name:"shipping_address",value:x.shipping_address,onChange:Se,placeholder:"Shipping address",disabled:o}),a.jsx(w7,{label:"Status",name:"status",value:x.status,onChange:Se,options:[{value:"",label:"Select status"},...d_],required:!0,disabled:o}),a.jsx(N7,{label:"Assigned To",value:x.assigned_to,onChange:Ce=>{const it=k.find(kt=>String(kt.id)===String(Ce));E(it);let Ct=null;it&&it.assigned_territory&&it.assigned_territory.length===1&&(Ct=it.assigned_territory[0].id),v(kt=>({...kt,assigned_to:Ce,territory_id:Ct}))},items:k||[],getLabel:Ce=>`${Ce?.first_name??""} ${Ce?.last_name??""} (${Ce?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:jt,disabled:o||k.length===0||n}),a.jsx("div",{className:"md:col-span-2",children:a.jsx(w7,{label:"Territory",name:"territory_id",value:x.territory_id||"",onChange:Se,options:[{value:"",label:T?T.assigned_territory&&T.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"},...T&&T.assigned_territory&&T.assigned_territory.map(Ce=>({value:String(Ce.id),label:Ce.name}))||[]],disabled:o||!T||!T.assigned_territory||T.assigned_territory.length===0})}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[a.jsx("button",{type:"button",onClick:()=>{Y(),ke(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:o||de,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:o||de,children:o?"Saving...":i?"Update Account":"Save Account"})]})]})]})}):null,ht=ee?a.jsx(LIe,{open:!0,title:ee.title,message:ee.message,confirmLabel:ee.confirmLabel,cancelLabel:ee.cancelLabel,variant:ee.variant,onConfirm:Ve,onCancel:ft,loading:de,icon:ee.icon,isArchive:ee.isArchive}):null;return a.jsxs(a.Fragment,{children:[se,ue,He,ht]})}function TIe({icon:e,title:t,value:n,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function Tm({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,className:c="",isSubmitted:d=!1}){const u=d&&!n?.trim();return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function w7({label:e,name:t,value:n,onChange:s,options:r,required:i=!1,disabled:l=!1}){return a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:n??"",onChange:s,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(o=>a.jsx("option",{value:o.value,children:o.label},o.value))})]})}function N7({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",required:c=!1,isSubmitted:d=!1,allowFreeText:u=!1}){const f=d&&c&&!n;return a.jsxs("div",{className:o,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(kIe,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:l,hasError:f,allowFreeText:u})]})}function kIe({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,hasError:o=!1,allowFreeText:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),v=e.find(C=>String(C.id)===String(t)),w=v?s(v):t,b=h.useMemo(()=>{const C=f.trim().toLowerCase();return(C?e.filter(S=>(s(S)||"").toLowerCase().includes(C)):e).slice(0,l)},[e,f,s,l]);return h.useEffect(()=>{const C=N=>{x.current&&!x.current.contains(N.target)&&u(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]),h.useEffect(()=>{d||p("")},[d]),a.jsxs("div",{ref:x,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:d?f:w,placeholder:r,onFocus:()=>!i&&u(!0),onChange:C=>{p(C.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${o?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsxs("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:[c&&f.trim()&&!b.some(C=>s(C).toLowerCase()===f.trim().toLowerCase())&&a.jsxs("button",{type:"button",onClick:()=>{n(f.trim()),u(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-green-50 bg-blue-50 font-medium text-blue-700",children:['+ Add "',f.trim(),'" as new parent company']}),b.length>0?b.map(C=>{const N=String(C.id),S=s(C),A=String(t)===N;return a.jsx("button",{type:"button",onClick:()=>{n(N),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${A?"bg-blue-50":""}`,children:S||"--"},N)}):!c||!f.trim()?a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"}):null]}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function LIe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c,icon:d=null,isArchive:u=!1}){if(!e)return null;const f=u?"bg-orange-500 hover:bg-orange-600 border border-orange-400":i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsxs("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 flex items-center justify-center ${f}`,disabled:l,children:[d&&a.jsx(d,{className:"mr-2",size:18}),l?"Processing...":s]})]})]})})}const f_={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},km=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),vi=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function PIe(){const e=vt(),t=Yt();h.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[n,s]=h.useState([]),[r,i]=h.useState(!1),[l,o]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState(null),[p,x]=h.useState(!1),[v,w]=h.useState(!1),[b,C]=h.useState(!1),[N,S]=h.useState(null),[A,k]=h.useState(!1),[_,T]=h.useState(null),[E,I]=h.useState(f_),[z,$]=h.useState(""),[P,O]=h.useState("Filter by Accounts"),[B,Q]=h.useState(null),[F,ee]=h.useState("Overview"),[V,de]=h.useState(1),[oe,Z]=h.useState(10),[R,ve]=h.useState({}),[X,je]=h.useState(null),[Ne,Oe]=h.useState(null),[Fe,me]=h.useState(null),[Be,Pe]=h.useState([]);h.useEffect(()=>{const J=t.state?.contactID;J&&(me(J),e(t.pathname,{replace:!0,state:{}}))},[t,e]),h.useEffect(()=>{if(Fe&&n.length>0&&!r){const J=n.find(De=>De.id===Fe);J?f(J):H.error("Contact not found."),me(null)}},[Fe,n,r]),h.useEffect(()=>{async function J(){try{const De=await ie.get("/auth/me");Oe(De.data)}catch(De){console.error("Failed to fetch current user",De)}}J()},[]);const we=h.useCallback(async(J=null)=>{i(!0);try{const De=await ie.get("/contacts/admin/fetch-all"),ft=[...Array.isArray(De.data)?De.data:[]].sort((bt,jt)=>{const ke=bt?.created_at||bt?.updated_at||0,pt=jt?.created_at||jt?.updated_at||0;return new Date(pt)-new Date(ke)});if(s(ft),J){const bt=ft.find(jt=>jt.id===J);f(bt||null)}}catch(De){console.error(De),s([]),De.response?.status===403?H.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):H.error("Failed to fetch contacts. Please try again later.")}finally{i(!1)}},[f]),ne=h.useCallback(async()=>{try{const J=await ie.get("/accounts/admin/fetch-all"),Ve=[...Array.isArray(J.data)?J.data:[]].sort((ft,bt)=>(ft?.name||"").localeCompare(bt?.name||""));o(Ve)}catch(J){console.error(J),o([]),J.response?.status===403&&H.warn("Unable to load accounts (permission denied).")}},[]),Le=h.useCallback(async()=>{try{const J=await ie.get("/users/all"),Ve=[...Array.isArray(J.data)?J.data:[]].sort((ft,bt)=>km(ft).localeCompare(km(bt)));d(Ve)}catch(J){console.error(J),d([]),J.response?.status===403&&H.warn("Unable to load users for assignment (permission denied).")}},[]),pe=h.useCallback(async J=>{try{const De=await ie.get(`/activities/contact/${J}`);ve(De.data&&typeof De.data=="object"?De.data:{})}catch(De){console.error(De),De.response?.status===404&&(console.warn("No activities found for this account."),ve({}))}},[]);h.useEffect(()=>{we(),ne(),Le()},[we,ne,Le]);const le=h.useMemo(()=>{const J=new Map;l.forEach(Ve=>{Ve?.id&&Ve?.name&&J.set(String(Ve.id),Ve.name)}),n.forEach(Ve=>{Ve?.account_id&&Ve?.account?.name&&J.set(String(Ve.account_id),Ve.account.name)});const De=Array.from(J.entries()).sort((Ve,ft)=>Ve[1].localeCompare(ft[1])).map(([Ve,ft])=>({value:Ve,label:ft}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...De]},[l,n]),ge=h.useMemo(()=>{const J=z.trim().toLowerCase(),De=P.trim();return n.filter(Ve=>{const ft=[Ve?.first_name,Ve?.last_name,Ve?.email,Ve?.title,Ve?.department,Ve?.account?.name,Ve?.account?.status,Ve?.work_phone,Ve?.mobile_phone_1,Ve?.mobile_phone_2,Ve?.assigned_contact?.first_name,Ve?.assigned_contact?.last_name,Ve?.contact_creator?.first_name,Ve?.contact_creator?.last_name,Ve?.notes,vi(Ve?.created_at),vi(Ve?.updated_at)],bt=J===""||ft.some(ke=>ke==null?!1:ke.toString().toLowerCase().includes(J)),jt=De==="Filter by Accounts"||String(Ve.account_id)===De;return bt&&jt})},[n,z,P]),fe=Math.max(1,Math.ceil(ge.length/oe)||1);h.useEffect(()=>{de(1)},[z,P]),h.useEffect(()=>{de(J=>{const De=Math.max(1,Math.ceil(ge.length/oe)||1);return J>De?De:J})},[ge.length,oe]);const Te=h.useMemo(()=>{const J=(V-1)*oe;return ge.slice(J,J+oe)},[ge,V,oe]),Ye=()=>de(J=>Math.max(J-1,1)),Ae=()=>de(J=>Math.min(J+1,fe)),Ie=h.useMemo(()=>{if(!v||!_)return l;const J=n.find(Ve=>Ve.id===_);return!J||!J.account||l.some(Ve=>Ve.id===J.account.id)?l:[...l,J.account]},[l,v,_,n]),Je=h.useCallback(()=>{x(!1),w(!1),T(null),I(f_),C(!1),Ue(!1)},[]),he=J=>{J.target.id==="modalBackdrop"&&!b&&!A&&Je()},Me=J=>{const{name:De,value:Ve}=J.target;I(ft=>({...ft,[De]:Ve}))},re=()=>{I(f_),w(!1),T(null),x(!0),Ne?.role==="Sales"&&I(J=>({...J,assigned_to:Ne.id}))},Qe=async J=>{if(!J)return;const De=await ie.get(`/accounts/get/${J.account_id}`);I({first_name:J.first_name||"",last_name:J.last_name||"",account_id:De.data.id?De.data.id:"",title:J.title||"",department:J.department||"",email:J.email||"",work_phone:J.work_phone||"",mobile_phone_1:J.mobile_phone_1||"",mobile_phone_2:J.mobile_phone_2||"",notes:J.notes||"",assigned_to:J.assigned_to?String(J.assigned_to):""}),w(!0),T(J.id),x(!0),f(null)},We=J=>{if(!J)return;const De=km(J)||"this contact",Ve=Ne?.role==="Admin"||Ne?.role==="CEO"||Ne?.role==="MANAGER"||Ne?.role==="GROUP MANAGER",ft=Ve?"delete":"archive",bt=Ve?"This action cannot be undone.":"This contact will be hidden from your view but admins can still see it.",jt=!Ve;S({title:`${ft.charAt(0).toUpperCase()+ft.slice(1)} Contact`,message:a.jsxs("span",{children:["Are you sure you want to ",ft," ",a.jsx("span",{className:"font-semibold",children:De}),"? ",bt]}),confirmLabel:`${ft.charAt(0).toUpperCase()+ft.slice(1)} Contact`,cancelLabel:"Cancel",variant:"danger",icon:jt?Ac:null,isArchive:jt,action:{type:"delete",targetId:J.id,name:De}})},dt=()=>{const J=Te.filter(De=>De.assigned_contact?.id===Ne?.id&&De.contact_creator?.id===Ne?.id);Be.length===J.length&&J.length>0?Pe([]):Pe(J.map(De=>De.id))},ze=J=>{Pe(De=>De.includes(J)?De.filter(Ve=>Ve!==J):[...De,J])},ce=async()=>{if(Be.length===0)return;const J=Ne?.role==="Admin"||Ne?.role==="CEO"||Ne?.role==="MANAGER"||Ne?.role==="GROUP MANAGER",De=J?"delete":"archive",Ve=J?"This action cannot be undone.":"These contacts will be hidden from your view but admins can still see them.",ft=!J;S({title:`${De.charAt(0).toUpperCase()+De.slice(1)} Contacts`,message:a.jsxs("span",{children:["Are you sure you want to ",De," ",a.jsx("span",{className:"font-semibold",children:Be.length})," selected contacts? ",Ve]}),confirmLabel:`${De.charAt(0).toUpperCase()+De.slice(1)} ${Be.length} contact(s)`,cancelLabel:"Cancel",variant:"danger",icon:ft?Ac:null,isArchive:ft,action:{type:"bulk-delete",contactIds:Be}})},[ye,Ue]=h.useState(!1),et=J=>{J.preventDefault(),Ue(!0);const De=E.first_name.trim(),Ve=E.last_name.trim();if(!De||!Ve){H.error("First name and last name are required.");return}if(!E.account_id){H.error("Account is required.");return}if(!E.assigned_to){H.error("Assigned To is required.");return}const bt=E.email?.trim();if(!bt){H.error("Email is required.");return}if(!bt.includes("@")){H.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(bt)){H.error("Please enter a valid email address.");return}const ke={first_name:De,last_name:Ve,account_id:Number(E.account_id),title:E.title?.trim()||null,department:E.department?.trim()||null,email:E.email?.trim().toLowerCase()||null,work_phone:E.work_phone?.trim()||null,mobile_phone_1:E.mobile_phone_1?.trim()||null,mobile_phone_2:E.mobile_phone_2?.trim()||null,notes:E.notes?.trim()||null,assigned_to:E.assigned_to?Number(E.assigned_to):null},pt=v&&_?"update":"create",_e=`${De} ${Ve}`.trim();S({title:pt==="create"?"Confirm New Contact":"Confirm Update",message:pt==="create"?a.jsxs("span",{children:["Are you sure you want to add"," ",a.jsx("span",{className:"font-semibold",children:_e})," to your contacts?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:_e}),"?"]}),confirmLabel:pt==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:pt,payload:ke,targetId:_||null,name:_e}})},lt=async()=>{if(!N?.action){S(null);return}const{action:J}=N,{type:De,payload:Ve,targetId:ft,name:bt}=J;k(!0);try{if(De==="create"){C(!0),await ie.post("/contacts/admin",Ve),H.success(`Contact "${bt}" created successfully.`);const jt=u?.id||null;Je(),await we(jt)}else if(De==="update"){if(!ft)throw new Error("Missing contact identifier for update.");C(!0),await ie.put(`/contacts/admin/${ft}`,Ve),H.success(`Contact "${bt}" updated successfully.`);const jt=u?.id&&u.id===ft?ft:u?.id||null;Je(),await we(jt),u?.id===ft&&f(null)}else if(De==="delete"){if(!ft)throw new Error("Missing contact identifier for deletion.");const jt=u?.id;Q(ft);const pt=Ne?.role==="Admin"||Ne?.role==="CEO"||Ne?.role==="MANAGER"||Ne?.role==="GROUP MANAGER"?`Contact "${bt}" deleted successfully.`:`Contact "${bt}" archived successfully.`;await ie.delete(`/contacts/admin/${ft}`),H.success(pt),await we(jt&&jt!==ft?jt:null),jt===ft&&f(null)}else if(De==="bulk-delete"){const{contactIds:jt}=J;if(!jt||jt.length===0)throw new Error("No contacts provided for bulk deletion.");const pt=Ne?.role==="Admin"||Ne?.role==="CEO"||Ne?.role==="MANAGER"||Ne?.role==="GROUP MANAGER"?`Successfully deleted ${jt.length} contact(s).`:`Successfully archived ${jt.length} contact(s).`;await ie.delete("/contacts/admin/bulk-delete",{data:{contact_ids:jt}}),H.success(pt),Pe([]),await we(),f(null)}}catch(jt){console.error(jt);const ke=De==="create"?"Failed to create contact. Please review the details and try again.":De==="update"?"Failed to update contact. Please review the details and try again.":De==="bulk-delete"?"Failed to delete contacts. Please try again.":"Failed to delete contact. Please try again.",pt=jt.response?.data?.detail||ke;H.error(pt)}finally{(De==="create"||De==="update")&&C(!1),De==="delete"&&Q(null),k(!1),S(null)}},Ee=()=>{A||S(null)},tt=J=>{f(J),ee("Overview")},be=()=>f(null),Xe=J=>{J.target.id==="contactModalBackdrop"&&!A&&be()},M=N?.action?.type==="delete"?N.action.targetId:null,U=u&&(B===u.id||M===u.id),Y=u&&B===u.id,te=u?a.jsx("div",{id:"contactModalBackdrop",onClick:Xe,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:J=>J.stopPropagation(),children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),a.jsx("button",{onClick:be,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:a.jsx(Ha,{size:25})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:km(u)||"Unnamed contact"})}),a.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:u.assigned_contact&&u.assigned_contact.id===Ne?.id&&u.contact_creator&&u.contact_creator.id===Ne?.id&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Qe(u),disabled:A||N?.action?.type==="update"&&N.action.targetId===u.id,children:[a.jsx(nn,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>We(u),disabled:!!U,children:Y?"Archiving...":a.jsxs(a.Fragment,{children:[a.jsx(Ac,{className:"mr-2"}),"Archive"]})})]})})]}),a.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:a.jsx("p",{className:"text-sm text-gray-500",children:u.account?.name||"No associated account"})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(J=>a.jsx("button",{onClick:()=>ee(J),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${F===J?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:J},J))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[F==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Contact Name:"}),a.jsx("p",{children:km(u)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Title:"}),a.jsx("p",{children:u.title||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:u.email?a.jsx("a",{href:`mailto:${u.email}`,className:"text-blue-600 hover:underline break-all",children:u.email}):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Department:"}),a.jsx("p",{children:u.department||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Work Phone:"}),a.jsx("p",{children:u.work_phone||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),a.jsx("p",{children:u.mobile_phone_1||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),a.jsx("p",{children:u.mobile_phone_2||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:u.assigned_contact?`${u.assigned_contact.first_name} ${u.assigned_contact.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:u.contact_creator?`${u.contact_creator.first_name} ${u.contact_creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:vi(u.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:vi(u.updated_at)||"N/A"})]})]})}),F==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:u.notes||"No notes available."})]})]}),F==="Activities"&&a.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[R.tasks&&R.tasks.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>je(X==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Gt,{className:"text-blue-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",R.tasks.length,")"]})]}),X==="tasks"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),X==="tasks"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:R.tasks.map((J,De)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-blue-600 mt-1",children:a.jsx(Gt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:J.subject||J.title||"Task"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:J.description||"No description"}),J.assigned_to&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",J.assigned_to.first_name," ",J.assigned_to.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:vi(J.due_date||J.created_at)})]},`task-${De}`))})]}),R.meetings&&R.meetings.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>je(X==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_t,{className:"text-green-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",R.meetings.length,")"]})]}),X==="meetings"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),X==="meetings"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:R.meetings.map((J,De)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-green-600 mt-1",children:a.jsx(_t,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:J.subject||J.title||"Meeting"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:J.description||J.location||"No description"}),J.host&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",J.host.first_name," ",J.host.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:vi(J.start_time||J.created_at)})]},`meeting-${De}`))})]}),R.calls&&R.calls.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>je(X==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Et,{className:"text-purple-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",R.calls.length,")"]})]}),X==="calls"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),X==="calls"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:R.calls.map((J,De)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-purple-600 mt-1",children:a.jsx(Et,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:J.subject||J.title||"Call"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:J.direction||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:vi(J.call_time||J.created_at)})]},`call-${De}`))})]}),R.contacts&&R.contacts.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>je(X==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Zt,{className:"text-teal-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",R.contacts.length,")"]})]}),X==="contacts"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),X==="contacts"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:R.contacts.map((J,De)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-teal-600 mt-1",children:a.jsx(Zt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[J.first_name?`${J.first_name} `:"",J.last_name]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:J.title||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:vi(J.created_at)})]},`contact-${De}`))})]}),R.deals&&R.deals.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>je(X==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Kt,{className:"text-indigo-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",R.deals.length,")"]})]}),X==="deals"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),X==="deals"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:R.deals.map((J,De)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-indigo-600 mt-1",children:a.jsx(Kt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[J.deal_id?J.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",J.name||J.title||"Deal"]}),a.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:J.stage||J.description||"No description"})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:vi(J.close_date||J.created_at)})]},`deal-${De}`))})]}),R.quotes&&R.quotes.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>je(X==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ga,{className:"text-orange-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",R.quotes.length,")"]})]}),X==="quotes"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),X==="quotes"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:R.quotes.map((J,De)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-orange-600 mt-1",children:a.jsx(ga,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(J.quote_id?J.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:J.status||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:vi(J.presented_date)||""})]},`quote-${De}`))})]}),(!R||(!R.tasks||R.tasks.length===0)&&(!R.meetings||R.meetings.length===0)&&(!R.calls||R.calls.length===0)&&(!R.quotes||R.quotes.length===0)&&(!R.deals||R.deals.length===0)&&(!R.contacts||R.contacts.length===0))&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No related activities found for this account."})})]})]})]}),a.jsx("div",{className:"flex flex-col gap-4",children:a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Contact"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!u?.email){alert("No email address available");return}const J=encodeURIComponent(u.email),De=encodeURIComponent(""),Ve=encodeURIComponent(""),ft=`https://mail.google.com/mail/?view=cm&fs=1&to=${J}&su=${De}&body=${Ve}`;window.open(ft,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Ka,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Contact"}}}),children:[a.jsx(_t,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Contact"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Gt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,K=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&a.jsx(zt,{message:"Loading contacts..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(La,{className:"mr-2 text-blue-600"})," Contacts Management"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{re(),Ue(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(da,{className:"mr-2"})," Add Contact"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search contacts",value:z,onChange:J=>$(J.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:P,onChange:J=>O(J.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:le.map(J=>a.jsx("option",{value:J.value,children:J.label},J.value??J.label))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 text-center w-12",children:a.jsx("input",{type:"checkbox",checked:Te.length>0&&Te.filter(J=>J.assigned_contact?.id===Ne?.id&&J.contact_creator?.id===Ne?.id).every(J=>Be.includes(J.id))&&Te.some(J=>J.assigned_contact?.id===Ne?.id&&J.contact_creator?.id===Ne?.id),onChange:dt,className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),a.jsx("th",{className:"py-3 px-4",children:"Department"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Created"}),a.jsx("th",{className:"py-3 px-4 text-center w-24",children:Be.length>0?a.jsx("button",{onClick:ce,className:"text-orange-600 hover:text-orange-800 transition p-1 rounded-full hover:bg-orange-50",title:`Archive ${Be.length} selected contacts`,children:a.jsx(Ac,{size:18})}):""})]})}),a.jsx("tbody",{children:r?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"Loading contacts..."})}):ge.length>0?Te.map(J=>{const De=[{Icon:Ka,value:J.email,key:"email"},{Icon:Et,value:J.work_phone,key:"work_phone"},{Icon:zc,value:J.mobile_phone_1,key:"mobile_phone_1"},{Icon:zc,value:J.mobile_phone_2,key:"mobile_phone_2"}].filter(Ve=>!!Ve.value);return a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",children:[a.jsx("td",{className:"py-3 px-4 align-top text-center",onClick:Ve=>Ve.stopPropagation(),children:J.assigned_contact&&J.assigned_contact.id===Ne?.id&&J.contact_creator&&J.contact_creator.id===Ne?.id?a.jsx("input",{type:"checkbox",checked:Be.includes(J.id),onChange:()=>ze(J.id),className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300",onClick:Ve=>Ve.stopPropagation()}):null}),a.jsxs("td",{className:"py-3 px-4 align-top",onClick:()=>{tt(J),pe(J.id)},children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:km(J)||"--"}),a.jsx("div",{className:"text-xs text-gray-500",children:J.title||"No title"})]}),a.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{tt(J),pe(J.id)},children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[a.jsx(ix,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{className:"break-words",children:J.account?.name||"--"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{tt(J),pe(J.id)},children:De.length>0?a.jsx("div",{className:"space-y-1 text-gray-700",children:De.map(({Icon:Ve,value:ft,key:bt})=>{const jt=wt.createElement(Ve,{className:"text-gray-500 flex-shrink-0"});return a.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[jt,a.jsx("span",{children:ft})]},bt)})}):a.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{tt(J),pe(J.id)},children:a.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[a.jsx(Kt,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{children:J.department||"--"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{tt(J),pe(J.id)},children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[a.jsx(Zt,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{children:J.assigned_contact?`${J.assigned_contact.first_name} ${J.assigned_contact.last_name}`:"Unassigned"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{tt(J),pe(J.id)},children:a.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[a.jsx(_t,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{className:"text-xs",children:vi(J.created_at)||"--"})]})})]},J.id)}):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No contacts found."})})})]})}),a.jsx(Jt,{className:"mt-4",totalItems:ge.length,pageSize:oe,currentPage:V,onPrev:Ye,onNext:Ae,onPageSizeChange:J=>{Z(J),de(1)},pageSizeOptions:[10,20,30,40,50],label:"contacts"})]}),Se=p?a.jsx("div",{id:"modalBackdrop",onClick:he,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:J=>J.stopPropagation(),children:[a.jsx("button",{onClick:()=>{Je(),Ue(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:b||A,children:a.jsx(Vt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:v?"Edit Contact":"Add New Contact"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:et,noValidate:!0,children:[a.jsx(yc,{label:"First Name",name:"first_name",value:E.first_name,onChange:Me,placeholder:"First name",required:!0,isSubmitted:ye}),a.jsx(yc,{label:"Last Name",name:"last_name",value:E.last_name,onChange:Me,placeholder:"Last name",required:!0,isSubmitted:ye}),a.jsx(j7,{label:"Account",value:E.account_id,onChange:J=>I(De=>({...De,account_id:J})),items:v?Ie:l||[],getLabel:J=>J?.name??"",placeholder:"Search account...",disabled:b||(v?Ie.length===0:l.length===0),required:!0,isSubmitted:ye}),a.jsx(j7,{label:"Assigned To",value:E.assigned_to,onChange:J=>I(De=>({...De,assigned_to:J})),items:c||[],getLabel:J=>`${J?.first_name??""} ${J?.last_name??""} (${J?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:ye,disabled:b||c.length===0||Ne?.role==="Sales"}),a.jsx(yc,{label:"Title",name:"title",value:E.title,onChange:Me,placeholder:"Job title",disabled:b}),a.jsx(yc,{label:"Department",name:"department",value:E.department,onChange:Me,placeholder:"Department",disabled:b}),a.jsx(yc,{label:"Email",name:"email",type:"email",value:E.email,onChange:Me,placeholder:"example@email.com",required:!0,isSubmitted:ye}),a.jsx(yc,{label:"Work Phone",name:"work_phone",value:E.work_phone,onChange:Me,placeholder:"09xx xxx xxxx",disabled:b}),a.jsx(yc,{label:"Mobile Phone 1",name:"mobile_phone_1",value:E.mobile_phone_1,onChange:Me,placeholder:"09xx xxx xxxx",disabled:b}),a.jsx(yc,{label:"Mobile Phone 2",name:"mobile_phone_2",value:E.mobile_phone_2,onChange:Me,placeholder:"09xx xxx xxxx",disabled:b}),a.jsx(OIe,{label:"Notes",name:"notes",value:E.notes,onChange:Me,placeholder:"Additional details...",rows:3,disabled:b,className:"md:col-span-2"}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:()=>{Je(),Ue(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:b||A,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:b||A,children:b?"Saving...":v?"Update Contact":"Save Contact"})]})]})]})}):null,G=N?a.jsx(MIe,{open:!0,title:N.title,message:N.message,confirmLabel:N.confirmLabel,cancelLabel:N.cancelLabel,variant:N.variant,onConfirm:lt,onCancel:Ee,loading:A,icon:N.icon,isArchive:N.isArchive}):null;return a.jsxs(a.Fragment,{children:[K,te,Se,G]})}function yc({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,isSubmitted:c=!1,className:d=""}){const u=c&&!n?.trim();return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${d}
        `})]})}function j7({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!n;return a.jsxs("div",{className:o,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(DIe,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:l,hasError:u})]})}function DIe({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,hasError:o=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",w=h.useMemo(()=>{const b=u.trim().toLowerCase();return(b?e.filter(N=>(s(N)||"").toLowerCase().includes(b)):e).slice(0,l)},[e,u,s,l]);return h.useEffect(()=>{const b=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),h.useEffect(()=>{c||f("")},[c]),a.jsxs("div",{ref:p,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:c?u:v,placeholder:r,onFocus:()=>!i&&d(!0),onChange:b=>{f(b.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${o?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:w.length>0?w.map(b=>{const C=String(b.id),N=s(b),S=String(t)===C;return a.jsx("button",{type:"button",onClick:()=>{n(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:N||"--"},C)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function OIe({label:e,name:t,value:n,onChange:s,placeholder:r,rows:i=3,disabled:l=!1,className:o=""}){return a.jsxs("div",{className:o,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:s,placeholder:r,rows:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function MIe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c,icon:d=null,isArchive:u=!1}){if(!e)return null;const f=u?"bg-orange-500 hover:bg-orange-600 border border-orange-400":i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsxs("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 flex items-center justify-center ${f}`,disabled:l,children:[d&&a.jsx(d,{className:"mr-2",size:18}),l?"Processing...":s]})]})]})})}const h_=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function HQ({lead:e,onBack:t,fetchLeads:n,onEdit:s,onDelete:r,setSelectedLead:i,relatedActs:l}){const o=vt(),{leadID:c}=Eo(),[d,u]=h.useState(e||null),[f,p]=h.useState("Overview"),[x,v]=h.useState(""),w=d?.status?.toUpperCase()==="QUALIFIED",[b,C]=h.useState(null),[N,S]=h.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[A,k]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[_,T]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),E=async()=>{try{if(e){u(e),v(e.status||"New");return}if(!c)return;const O=await ie.get(`/leads/get/${c}`);u(O.data),v(O.data.status||"New"),S({name:O.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:O.data.territory?.id||null,assigned_to:O.data.assigned_to?.id||null,created_by:O.data.creator?.id||null}),k({last_name:O.data.last_name||"",first_name:O.data.first_name||"",account_id:null,title:O.data.title||"",department:O.data.department||"",email:O.data.email||"",work_phone:O.data.work_phone||"",mobile_phone_1:O.data.mobile_phone_1||"",mobile_phone_2:O.data.mobile_phone_2||"",notes:"",assigned_to:O.data.assigned_to?.id||null,created_by:O.data.creator?.id||null}),T({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:O.data.assigned_to?.id||null,created_by:O.data.creator?.id||null})}catch(O){console.error(O)}};h.useEffect(()=>{e?(u(e),v(e.status||"New")):c&&E()},[c,e]);const I=async()=>{try{if(x==="Converted"&&d?.status?.toUpperCase()!=="QUALIFIED"){H.error("Lead must be Qualified before it can be converted.");return}const O=await ie.put(`/leads/${d.id}/update/status`,{status:x});H.success("Lead status updated successfully");const B={...d,status:O.data.status};u(B),i&&i(B),n&&n(),t&&t()}catch(O){console.error(O),H.error("Failed to update lead status")}},z=async O=>{const B={...N,assigned_to:O.assigned_to?.id,billing_address:O.address,shipping_address:O.address,created_by:O.creator?.id,industry:null,name:O.company_name,phone_number:O.work_phone,status:"Prospect",territory_id:O.territory?.id,website:""};console.log("Account data: ",B),console.log("Contact data: ",A),console.log("Deal data: ",_),console.log("Lead data: ",O);try{const F=(await ie.post("/accounts/convertedLead",B)).data.id,ee={...A,account_id:F,assigned_to:O.assigned_to?.id,created_by:O.creator?.id,department:O.department,email:O.email,first_name:O.first_name,last_name:O.last_name,mobile_phone_1:O.mobile_phone_1,mobile_phone_2:O.mobile_phone_2,notes:O.notes,title:O.title,work_phone:O.work_phone},de=(await ie.post("/contacts/convertedLead",ee)).data.id,oe=()=>{switch(_.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},Z=_.amount&&_.amount!==""?parseFloat(_.amount):0,R={..._,account_id:F,assigned_to:O.assigned_to?.id,created_by:O.creator?.id,primary_contact_id:de,probability:oe(),stage:"Prospecting"},ve=await ie.post("/deals/convertedLead",R),X=await ie.put(`/leads/convert/${O.id}`);i&&i(null),n(),H.success("Lead converted successfully!"),t()}catch(Q){console.error("Error during conversion:",Q);const F=Q.response?.data?.detail||Q.message||"Failed to convert lead. Please try again.";H.error(F)}},$=O=>{switch((O||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},P=O=>O.toString().toLowerCase().replace(/\b\w/g,B=>B.toUpperCase());return d?a.jsx(a.Fragment,{children:a.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:a.jsxs("div",{className:"flex items-start justify-between w-full",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),a.jsx("button",{onClick:()=>{t?t():o(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:a.jsx(Ha,{size:25})})]})}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[d.first_name," ",d.last_name]}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${$(d.status)}`,children:P(d.status||"New")}),a.jsx("div",{className:"flex flex-col",children:a.jsx("button",{onClick:()=>z(d),disabled:!w,title:w?"Convert Lead":"Lead must be Qualified before converting",className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2
      ${w?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-400":"bg-gray-200 text-gray-400 cursor-not-allowed"}
    `,children:"Convert"})})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{type:"button",onClick:()=>{s&&d&&s(d)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[a.jsx(rn,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{type:"button",onClick:()=>{r&&d&&r(d)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[a.jsx(Wt,{className:"mr-2"}),"Delete"]})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-4 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(O=>a.jsx("button",{onClick:()=>p(O),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${f===O?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:O},O))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[f==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Name:"}),a.jsxs("p",{children:[d.first_name," ",d.last_name||"N/A"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Company:"}),a.jsx("p",{children:d.company_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Job Title:"}),a.jsx("p",{children:d.title||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Department:"}),a.jsx("p",{children:d.department||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:d.email||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Territory:"}),a.jsx("p",{children:d.territory?.name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:d.assigned_to?`${d.assigned_to.first_name} ${d.assigned_to.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:d.creator?`${d.creator.first_name} ${d.creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Work Phone:"}),a.jsx("p",{children:d.work_phone||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),a.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),a.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Source:"}),a.jsx("p",{children:d.source||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Address:"}),a.jsx("p",{children:d.address||"N/A"})]})]})}),f==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]})]}),f==="Activities"&&a.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[l.tasks&&l.tasks.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>C(b==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Gt,{className:"text-blue-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",l.tasks.length,")"]})]}),b==="tasks"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),b==="tasks"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:l.tasks.map((O,B)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-blue-600 mt-1",children:a.jsx(Gt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:O.subject||O.title||"Task"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:O.description||"No description"}),O.assigned_to&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned:"," ",O.assigned_to.first_name," ",O.assigned_to.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:h_(O.due_date||O.created_at)})]},`task-${B}`))})]}),l.meetings&&l.meetings.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>C(b==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_t,{className:"text-green-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",l.meetings.length,")"]})]}),b==="meetings"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),b==="meetings"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:l.meetings.map((O,B)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-green-600 mt-1",children:a.jsx(_t,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:O.subject||O.title||"Meeting"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:O.description||O.location||"No description"}),O.host&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",O.host.first_name," ",O.host.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:h_(O.start_time||O.created_at)})]},`meeting-${B}`))})]}),l.calls&&l.calls.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>C(b==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Et,{className:"text-purple-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",l.calls.length,")"]})]}),b==="calls"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),b==="calls"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:l.calls.map((O,B)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-purple-600 mt-1",children:a.jsx(Et,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:O.subject||O.title||"Call"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:O.direction||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:h_(O.call_time||O.created_at)})]},`call-${B}`))})]}),(!l||(!l.tasks||l.tasks.length===0)&&(!l.meetings||l.meetings.length===0)&&(!l.calls||l.calls.length===0)&&(!l.quotes||l.quotes.length===0)&&(!l.deals||l.deals.length===0)&&(!l.contacts||l.contacts.length===0))&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No related activities found for this account."})})]})]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>{d&&o("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:d.title?`Call regarding ${d.title}`:`Call with ${d.first_name} ${d.last_name}`,relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assigned_to:d.assigned_to?.id?String(d.assigned_to.id):"",direction:"Outgoing",status:"Planned"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const O=encodeURIComponent(d.email),B=encodeURIComponent(""),Q=encodeURIComponent(""),F=`mailto:${O}?subject=${B}&body=${Q}`;window.location.href=F},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Ka,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{d&&o("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:d.title?`Meeting regarding ${d.title}`:`Meeting with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assigned_to:d.assigned_to?.id?String(d.assigned_to.id):"",status:"Planned"}}})},children:[a.jsx(_t,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>{d&&o("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:d.title?`Follow up on ${d.title}`:`Follow up with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assigned_to:d.assigned_to?.id?String(d.assigned_to.id):"",priority:"MEDIUM",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Gt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:x,onChange:O=>v(O.target.value),children:[a.jsx("option",{value:"New",children:"New"}),a.jsx("option",{value:"Contacted",children:"Contacted"}),a.jsx("option",{value:"Qualified",children:"Qualified"}),d?.status?.toUpperCase()==="QUALIFIED"&&a.jsx("option",{value:"Converted",children:"Converted"}),a.jsx("option",{value:"Lost",children:"Lost"})]}),a.jsx("button",{onClick:I,disabled:x===d.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${x===d.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const IIe=Lf.all(),g_=IIe.map((e,t)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${t}`})),$Ie=e=>e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()),RIe=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},p_={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function zIe(){const e=vt(),{leadID:t}=Eo();ks();const[n,s]=h.useState(null),[r,i]=h.useState(!1),[l,o]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(!1),[v,w]=h.useState(""),[b,C]=h.useState("Filter by Status"),[N,S]=h.useState(1),[A,k]=h.useState(10),[_,T]=h.useState(p_),[E,I]=h.useState(!1),[z,$]=h.useState(null),[P,O]=h.useState(!1),[B,Q]=h.useState(null),[F,ee]=h.useState(!1),[V,de]=h.useState({});h.useRef(null);const[oe,Z]=h.useState(!1),[R,ve]=h.useState(null),[X,je]=h.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[Ne,Oe]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[Fe,me]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});h.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const Be=async()=>{try{const M=await ie.get("/leads/getUsers");o(M.data)}catch(M){console.error(`Error fetching users: ${M}`)}},Pe=async()=>{x(!0);try{const M=await ie.get("/leads/admin/getLeads");f(M.data),console.log(M.data)}catch(M){console.error(`Error fetching leads: ${M}`)}finally{x(!1)}};h.useEffect(()=>{Be(),Pe()},[]);const{user:we}=ta(),ne=we?.role==="Sales";h.useEffect(()=>{r&&!E&&ne&&we&&!_.lead_owner&&T(M=>({...M,lead_owner:we.id}))},[r,E,ne,we,_.lead_owner]),h.useEffect(()=>{if(t&&u.length>0&&!r&&!E){const M=u.find(U=>U.id===Number(t));M&&s(M)}else!t&&!n&&s(null)},[t,u,r,E]),h.useEffect(()=>{if(R){const U=(K=>{if(!K)return{code:"+63",number:""};const Se=K.match(/^(\+\d+)\s(.+)$/);if(Se)return{code:Se[1],number:Se[2]};if(K.startsWith("+")){const G=K.match(/^(\+\d{1,3})/);if(G)return{code:G[1],number:K.substring(G[1].length).trim()}}return{code:"+63",number:K}})(R.work_phone),Y=[];R.work_phone&&Y.push(`Work: ${R.work_phone}`),R.mobile_phone_1&&Y.push(`Mobile 1: ${R.mobile_phone_1}`),R.mobile_phone_2&&Y.push(`Mobile 2: ${R.mobile_phone_2}`);const te=Y.length>0?Y.join(" | "):"";je({name:R.company_name||"",website:"",countryCode:U.code,phone_number:U.number,combinedPhoneNumbers:te,billing_address:R.address||"",shipping_address:R.address||"",industry:"",status:"Prospect",territory_id:R.assigned_to?.territory?.id||null,assigned_to:R.assigned_to?.id||null,created_by:R.creator?.id||null}),Oe({last_name:R.last_name||"",first_name:R.first_name||"",account_id:null,title:R.title||"",department:R.department||"",email:R.email||"",work_phone:R.work_phone||"",mobile_phone_1:R.mobile_phone_1||"",mobile_phone_2:R.mobile_phone_2||"",notes:R.notes||"",assigned_to:R.assigned_to?.id||null,created_by:R.creator?.id||null}),me({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:R.assigned_to?.id||null,created_by:R.creator?.id||null})}},[R]);const Le=M=>w(M.target.value),pe=h.useMemo(()=>{const M=v.trim().toLowerCase(),U=b.trim().toUpperCase();return u.filter(Y=>{const te=[Y?.first_name,Y?.last_name,Y?.company_name,Y?.title,Y?.email,Y?.work_phone,Y?.assigned_to?`${Y.assigned_to.first_name} ${Y.assigned_to.last_name}`:""],K=M===""||te.some(G=>G==null||G===""?!1:G.toString().toLowerCase().includes(M));let Se=!1;return U==="FILTER BY STATUS"?Se=(Y.status?Y.status.toUpperCase():"")!=="CONVERTED":Se=(Y.status?Y.status.toUpperCase():"")===U,K&&Se})},[u,v,b]),le=Math.max(1,Math.ceil(pe.length/A)||1);h.useEffect(()=>{S(1)},[v,b]),h.useEffect(()=>{S(M=>{const U=Math.max(1,Math.ceil(pe.length/A)||1);return M>U?U:M})},[pe.length,A]);const ge=h.useMemo(()=>{const M=(N-1)*A;return pe.slice(M,M+A)},[pe,N,A]),fe=()=>S(M=>Math.max(M-1,1)),Te=()=>S(M=>Math.min(M+1,le)),Ye=h.useCallback(async M=>{try{const U=await ie.get(`/activities/lead/${M}`);de(U.data&&typeof U.data=="object"?U.data:{})}catch(U){console.error(U),U.response?.status===404&&(console.warn("No activities found for this account."),de({}))}},[]),Ae=M=>{s(M),Ye(M.id)},Ie=()=>{s(null),t&&e("/admin/leads",{replace:!0})},Je=()=>{i(!1),T(p_),I(!1),$(null),O(!1),d(null),sessionStorage.removeItem("editLeadData")},he=M=>{M.target.id==="modalBackdrop"&&Je()},Me=()=>{T(p_),I(!1),$(null),d(null),i(!0)},re=M=>{if(!M){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",M),console.log("Current state - leadID:",t,"selectedLead:",n,"showModal:",r);const U=G=>{if(!G)return{code:"+63",number:""};const J=G.match(/^(\+\d+)\s(.+)$/);return J?{code:J[1],number:J[2]}:{code:"+63",number:G}},Y=U(M.work_phone),te=U(M.mobile_phone_1),K=U(M.mobile_phone_2);let Se="";if(M.assigned_to){Se=String(M.assigned_to.id);const G=l?.find(J=>J.id===M.assigned_to.id);d(G)}T({first_name:M.first_name||"",last_name:M.last_name||"",company_name:M.company_name||"",title:M.title||"",department:M.department||"",email:M.email||"",work_ccode:Y.code,work_phone:Y.number,m1_ccode:te.code,mobile_phone_1:te.number,m2_ccode:K.code,mobile_phone_2:K.number,address:M.address||"",notes:M.notes||"",source:M.source||"",territory_id:M.territory?.id||null,lead_owner:Se,status:M.status||"New"}),I(!0),$(M.id),n?(console.log("Coming from detail view - closing detail modal and showing edit form"),s(null),i(!0)):(console.log("Already in list view - showing modal"),i(!0))},Qe=M=>{if(!M){console.error("handleDelete: lead is null or undefined");return}console.log("handleDelete called with lead:",M);const U=`${M.first_name} ${M.last_name}`||"this lead";Q({title:"Delete Lead",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:U}),"? This action cannot be undone."]}),confirmLabel:"Delete Lead",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:M.id,name:U}})},We=M=>{const{name:U,value:Y}=M.target;if(T(te=>({...te,[U]:Y})),U==="lead_owner"){const te=l.find(K=>K.id===parseInt(Y));d(te)}},[dt,ze]=h.useState(!1),ce=M=>{if(M.preventDefault(),ze(!0),!_.last_name?.trim()){H.error("Last name is required.");return}if(!_.company_name?.trim()){H.error("Company is required.");return}if(!_.email?.trim()){H.error("Email is required.");return}if(!_.email.includes("@")){H.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(_.email)){H.error("Please enter a valid email address with a dot in the domain.");return}if(!_.lead_owner){H.error("Please assign a lead owner.");return}const Y={..._,territory_id:_.territory_id?parseInt(_.territory_id):null,lead_owner:parseInt(_.lead_owner),work_phone:`${_.work_ccode} ${_.work_phone}`,mobile_phone_1:`${_.m1_ccode} ${_.mobile_phone_1}`,mobile_phone_2:`${_.m2_ccode} ${_.mobile_phone_2}`},te=E&&z?"update":"create",K=`${_.first_name} ${_.last_name}`;Q({title:te==="create"?"Confirm New Lead":"Confirm Update",message:te==="create"?a.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",a.jsx("span",{className:"font-semibold",children:K}),"?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:K}),"?"]}),confirmLabel:te==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:te,payload:Y,targetId:z||null,name:K}})},ye=async()=>{if(!B?.action){Q(null);return}const{action:M}=B,{type:U,payload:Y,targetId:te,name:K,lead:Se}=M;console.log(Y),ee(!0);try{if(U==="create")O(!0),await ie.post("/leads/create",Y),H.success(`Lead "${K}" created successfully.`),Je(),await Pe();else if(U==="update"){if(!te)throw new Error("Missing lead identifier for update.");O(!0);const G=await ie.put(`/leads/${te}`,Y);H.success(`Lead "${K}" updated successfully.`),n&&n.id===te&&s(null),Je(),await Pe()}else if(U==="delete"){if(!te)throw new Error("Missing lead identifier for deletion.");await ie.delete(`/leads/${te}`),H.success(`Lead "${K}" deleted successfully.`),n?.id===te&&s(null),await Pe()}}catch(G){console.error(G);const J=U==="create"?"Failed to create lead. Please review the details and try again.":U==="update"?"Failed to update lead. Please review the details and try again.":"Failed to delete lead. Please try again.",De=G.response?.data?.detail||J;H.error(De)}finally{(U==="create"||U==="update")&&O(!1),U!=="edit"&&(ee(!1),Q(null))}},Ue=()=>{F||Q(null)},et=u.filter(M=>M.status==="New").length,lt=u.filter(M=>M.status==="Contacted").length,Ee=u.filter(M=>M.status==="Qualified").length,tt=u.filter(M=>M.status==="Converted").length,be=u.filter(M=>M.status==="Lost").length,Xe=[{title:"New",value:et,icon:Ba,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:lt,icon:Et,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:Ee,icon:xn,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:tt,icon:ko,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:be,icon:Ts,color:"text-red-600",bgColor:"bg-red-100"}];return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[p&&a.jsx(zt,{message:"Loading leads..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(Ba,{className:"mr-2 text-blue-600"}),"Leads"]}),a.jsx("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{Me(),ze(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(da,{className:"mr-2"})," Add Lead"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Xe.map(M=>a.jsx(FIe,{...M},M.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search leads",value:v,onChange:Le,className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:b,onChange:M=>C(M.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),a.jsx("option",{value:"New",children:"New"}),a.jsx("option",{value:"Contacted",children:"Contacted"}),a.jsx("option",{value:"Qualified",children:"Qualified"}),a.jsx("option",{value:"Converted",children:"Converted"}),a.jsx("option",{value:"Lost",children:"Lost"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Name"}),a.jsx("th",{className:"py-3 px-4",children:"Company"}),a.jsx("th",{className:"py-3 px-4",children:"Job Title"}),a.jsx("th",{className:"py-3 px-4",children:"Email"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),a.jsx("tbody",{children:pe.length>0?ge.map(M=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>Ae(M),children:[a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[M.first_name," ",M.last_name]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:M.company_name||"--"})}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:M.title||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:M.email||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:M.assigned_to?`${M.assigned_to.first_name} ${M.assigned_to.last_name}`:"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${RIe(M.status||"New")}`,children:$Ie(M.status||"New")})})]},M.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No leads found."})})})]})}),a.jsx(Jt,{className:"mt-4",totalItems:pe.length,pageSize:A,currentPage:N,onPrev:fe,onNext:Te,onPageSizeChange:M=>{k(M),S(1)},pageSizeOptions:[10,20,30,40,50],label:"leads"}),r&&a.jsx("div",{id:"modalBackdrop",onClick:he,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:M=>M.stopPropagation(),children:[a.jsx("button",{onClick:()=>{Je(),ze(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(Vt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:E?"Edit Lead":"Add New Lead"}),a.jsxs("form",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),a.jsx("input",{type:"text",name:"first_name",value:_.first_name,onChange:We,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Last Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"Smith",name:"last_name",value:_.last_name,onChange:We,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                      ${dt&&!_.last_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Company ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:_.company_name,onChange:We,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${dt&&!_.company_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Job Title",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:_.title,onChange:We,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${dt&&!_.title?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),a.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:_.department,onChange:We,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Email",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:_.email,onChange:We,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${dt&&!_.email?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"work_ccode",value:_.work_ccode,onChange:We,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:g_.map(M=>a.jsx("option",{value:M.code,children:M.code},M.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:_.work_phone,onChange:We,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"m1_ccode",value:_.m1_ccode,onChange:We,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:g_.map(M=>a.jsx("option",{value:M.code,children:M.code},M.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:_.mobile_phone_1,onChange:We,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"m2_ccode",value:_.m2_ccode,onChange:We,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:g_.map(M=>a.jsx("option",{value:M.code,children:M.code},M.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:_.mobile_phone_2,onChange:We,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),a.jsx("input",{type:"text",name:"address",value:_.address,onChange:We,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("div",{className:`w-full rounded-lg ${dt&&!_.lead_owner?"border border-red-400":"border border-gray-300"}`,children:a.jsx(BIe,{items:Array.isArray(l)?l:[],value:_.lead_owner??"",placeholder:"Search a user...",disabled:P||ne,getLabel:M=>`${M.first_name} ${M.last_name}`,onChange:M=>{const U=l.find(te=>String(te.id)===String(M));d(U);let Y=null;U&&U.assigned_territory&&U.assigned_territory.length===1&&(Y=U.assigned_territory[0].id),T(te=>({...te,lead_owner:M,territory_id:Y}))}})})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),a.jsxs("select",{name:"territory_id",value:_.territory_id||"",onChange:We,disabled:!c||!c.assigned_territory||c.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[a.jsx("option",{value:"",disabled:!0,children:c?c.assigned_territory&&c.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),c&&c.assigned_territory&&c.assigned_territory.map(M=>a.jsx("option",{value:M.id,children:M.name},M.id))]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),a.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:_.source,onChange:We,children:[a.jsx("option",{value:"",disabled:!0,children:"Select Source"}),a.jsx("option",{value:"Website",children:"Website"}),a.jsx("option",{value:"Referral",children:"Referral"}),a.jsx("option",{value:"Cold call",children:"Cold call"}),a.jsx("option",{value:"Event",children:"Event"}),a.jsx("option",{value:"Other",children:"Other"})]})]}),a.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),a.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:_.notes,onChange:We,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("button",{type:"button",onClick:()=>{Je(),ze(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:P||F,children:"Cancel"}),a.jsx("button",{type:"submit",onClick:ce,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:P||F,children:P||F?"Processing...":E?"Update Lead":"Save Lead"})]})]})]})}),B&&a.jsx(UIe,{open:!0,title:B.title,message:B.message,confirmLabel:B.confirmLabel,cancelLabel:B.cancelLabel,variant:B.variant,onConfirm:ye,onCancel:Ue,loading:F}),n&&!r&&!E&&a.jsx(HQ,{relatedActs:V,lead:n,onBack:Ie,fetchLeads:Pe,setSelectedLead:s,onEdit:re,onDelete:Qe})]})}function UIe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}function FIe({icon:e,title:t,value:n,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function BIe({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200}){const[o,c]=h.useState(!1),[d,u]=h.useState(""),f=h.useRef(null),p=e.find(w=>String(w.id)===String(t)),x=p?s(p):"",v=h.useMemo(()=>{const w=d.trim().toLowerCase();return(w?e.filter(C=>(s(C)||"").toLowerCase().includes(w)):e).slice(0,l)},[e,d,s,l]);return h.useEffect(()=>{const w=b=>{f.current&&!f.current.contains(b.target)&&c(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{o||u("")},[o]),a.jsxs("div",{ref:f,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:o?d:x,placeholder:r,onFocus:()=>!i&&c(!0),onChange:w=>{u(w.target.value),o||c(!0)},className:"w-full rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),o&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:v.length>0?v.map(w=>{const b=String(w.id),C=s(w),N=String(t)===b;return a.jsx("button",{type:"button",onClick:()=>{n(b),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${N?"bg-blue-50":""}`,children:C||"--"},b)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}const Dy={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},Bn=({label:e,value:t,name:n,className:s=""})=>a.jsxs("div",{className:`flex flex-col ${s}`,children:[a.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),a.jsx("input",{type:"text",name:n,defaultValue:t,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),HIe=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(Bn,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),a.jsx(Bn,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),a.jsx(Bn,{label:"Industry",name:"industry",value:e.industry})]}),a.jsx(Bn,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),a.jsx(Bn,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),GIe=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(Bn,{label:"First Name",name:"firstName",value:e.firstName}),a.jsx(Bn,{label:"Last Name",name:"lastName",value:e.lastName}),a.jsx(Bn,{label:"Department",name:"department",value:e.department}),a.jsx(Bn,{label:"Title",name:"title",value:e.title}),a.jsx(Bn,{label:"Work Phone",name:"workPhone",value:e.workPhone}),a.jsx(Bn,{label:"Email",name:"email",value:e.email}),a.jsx(Bn,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),a.jsx(Bn,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),WIe=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(Bn,{label:"Deal Name",name:"dealName",value:e.dealName}),a.jsxs("div",{className:"flex",children:[a.jsx(Bn,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),a.jsx("div",{className:"flex flex-col justify-end ml-1",children:a.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),a.jsx(Bn,{label:"Stage",name:"stage",value:e.stage}),a.jsx(Bn,{label:"Territory",name:"territory",value:e.territory})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(Bn,{label:"Description",name:"description",value:e.description}),a.jsx(Bn,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function VIe({isOpen:e,onClose:t}){const[n,s]=h.useState(1),r=3;if(!e)return null;const i=()=>{n<r?s(n+1):(t(),s(1))},l=()=>{n>1&&s(n-1)},o=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],c=()=>{switch(n){case 1:return a.jsx(HIe,{data:Dy});case 2:return a.jsx(GIe,{data:Dy});case 3:return a.jsx(WIe,{data:Dy});default:return null}};return a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:Dy.accountName})]}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:a.jsx(hN,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:o.map(d=>a.jsx("button",{onClick:()=>s(d.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${n===d.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:d.name},d.id))}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c()}),a.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[n>1&&a.jsx("button",{onClick:l,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),n<r?a.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):a.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}function qIe(){h.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const e=vt(),t=Yt(),[n,s]=h.useState(""),[r,i]=h.useState("Filter by Stage"),[l,o]=h.useState("Filter by Owner"),[c,d]=h.useState(null),[u,f]=h.useState("Overview"),[p,x]=h.useState(!1),[v,w]=h.useState(null),[b,C]=h.useState(!1),[N,S]=h.useState(1),[A,k]=h.useState(10),[_,T]=h.useState(!1),[E,I]=h.useState(null),[z,$]=h.useState(!1),[P,O]=h.useState(!1),[B,Q]=h.useState(null),[F,ee]=h.useState([]),[V,de]=h.useState([]),[oe,Z]=h.useState([]),[R,ve]=h.useState({}),[X,je]=h.useState(null);h.useEffect(()=>{const te=t.state,K=te?.dealID;if(K&&!te?.openDealModal){je(K),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(X&&v?.length>0&&!b){const te=v.find(K=>K.id===X);te?d(te):H.error("Deal not found."),je(null)}},[X,v,b]);const[Ne,Oe]=h.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),[Fe,me]=h.useState(null),[Be,Pe]=h.useState(null),we={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST","Closed Cancelled Stage":"CLOSED_CANCELLED"},ne=te=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost",CLOSED_CANCELLED:"Closed Cancelled"})[te]||te||"--",Le=te=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700",CLOSED_CANCELLED:"bg-red-100 text-red-700"})[te]||"bg-gray-100 text-gray-700",pe=h.useCallback(async te=>{try{const K=await ie.get(`/activities/deal/${te}`);ve(K.data&&typeof K.data=="object"?K.data:{})}catch(K){console.error(K),K.response?.status===404&&(console.warn("No activities found for this account."),ve({}))}},[]),le=h.useMemo(()=>{const te=n.trim().toLowerCase(),K=r.trim(),Se=l.trim();return(v??[]).filter(G=>{const J=[G?.name,G?.description,G?.account?.name,G?.contact?.first_name,G?.contact?.last_name,G?.assigned_deals?.first_name,G?.assigned_deals?.last_name],De=te===""||J.some(bt=>bt==null||bt===""?!1:bt.toString().toLowerCase().includes(te)),Ve=K==="Filter by Stage"||K===""||G.stage===we[K]||G.stage===K,ft=Se==="Filter by Owner"||Se===""||`${G.assigned_deals?.first_name||""} ${G.assigned_deals?.last_name||""}`.trim().toLowerCase()===Se.toLowerCase();return De&&Ve&&ft})},[v,n,r,l]),ge=Math.max(1,Math.ceil(le.length/A)||1);h.useEffect(()=>{S(1)},[n,r,l]),h.useEffect(()=>{S(te=>{const K=Math.max(1,Math.ceil(le.length/A)||1);return te>K?K:te})},[le.length,A]);const fe=h.useMemo(()=>{const te=(N-1)*A;return le.slice(te,te+A)},[le,N,A]),Te=()=>S(te=>Math.max(te-1,1)),Ye=()=>S(te=>Math.min(te+1,ge)),Ae=()=>{Oe({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),O(!1),Q(null),x(!0)},Ie=async()=>{C(!0);try{const te=await ie.get("/deals/admin/fetch-all"),Se=[...Array.isArray(te.data)?te.data:[]].sort((G,J)=>{const De=G?.created_at?new Date(G.created_at).getTime():0;return(J?.created_at?new Date(J.created_at).getTime():0)-De});w(Se)}catch(te){te.response&&te.response.status===403?H.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):H.error("Failed to fetch deals. Please try again later."),console.error(te)}finally{C(!1)}},Je=async()=>{try{const te=await ie.get("/accounts/admin/fetch-all");ee(Array.isArray(te.data)?te.data:[])}catch(te){console.error(te),te.response?.status===403&&H.warn("Unable to load accounts (permission denied).")}},he=async()=>{try{const te=await ie.get("/contacts/admin/fetch-all");de(Array.isArray(te.data)?te.data:[])}catch(te){console.error(te),te.response?.status===403&&H.warn("Unable to load contacts (permission denied).")}},Me=async()=>{try{const te=await ie.get("/users/all");Z(Array.isArray(te.data)?te.data:[])}catch(te){console.error(te),te.response?.status===403&&H.warn("Unable to load users (permission denied).")}};h.useEffect(()=>{Ie(),Je(),he(),Me()},[]);const{user:re}=ta(),Qe=re?.role==="Sales";h.useEffect(()=>{p&&!P&&Qe&&re&&!Ne.assigned_to&&Oe(te=>({...te,assigned_to:re.id}))},[p,P,Qe,re,Ne.assigned_to]);const We=async te=>{te&&(Oe({id:te.id||null,name:te.name||"",account_id:te.account_id?.toString()||"",primary_contact_id:te.primary_contact_id?.toString()||"",stage:te.stage||"PROPOSAL",amount:te.amount?.toString()||"",close_date:te.close_date?new Date(te.close_date).toISOString().split("T")[0]:"",assigned_to:te.assigned_to?.toString()||"",currency:te.currency||"PHP",description:te.description||""}),me(te.account||null),Pe(te.contact||null),O(!0),Q(te.id),d(null),x(!0))},dt=async(te=!1)=>{try{const K=await ie.get("/deals/admin/fetch-all"),G=[...Array.isArray(K.data)?K.data:[]].sort((J,De)=>{const Ve=J?.created_at?new Date(J.created_at).getTime():0;return(De?.created_at?new Date(De.created_at).getTime():0)-Ve});if(w(G),!te&&c&&c.id){const J=G.find(De=>De.id===c.id);J&&d({...J})}}catch(K){console.error("Failed to refresh deal data:",K),await Ie()}},ze=te=>{const K=te.name.trim();if(!K){H.error("Deal name is required.");return}if(!te.account_id){H.error("Account is required.");return}const Se=P&&B?"update":"create",G=K;I({title:Se==="create"?"Confirm New Deal":"Confirm Update",message:Se==="create"?a.jsxs("span",{children:["Are you sure you want to create"," ",a.jsx("span",{className:"font-semibold",children:G}),"?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:G}),"?"]}),confirmLabel:Se==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:Se,formData:te,targetId:B||null,name:G}})},ce=te=>{if(!te)return;const K=te.name||"this deal";I({title:"Delete Deal",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:K}),"? This action cannot be undone."]}),confirmLabel:"Delete Deal",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:te.id,name:K}})},ye=async()=>{if(!E?.action){I(null);return}const{action:te}=E,{type:K,formData:Se,targetId:G,name:J}=te;$(!0);try{if(K==="create"){T(!0);const De={name:Se.name.trim(),account_id:parseInt(Se.account_id),primary_contact_id:Se.primary_contact_id?parseInt(Se.primary_contact_id):null,stage:Se.stage,amount:Se.amount?parseFloat(Se.amount):null,currency:Se.currency||"PHP",close_date:Se.close_date||null,description:Se.description||null,assigned_to:Se.assigned_to?parseInt(Se.assigned_to):null};await ie.post("/deals/admin/create",De),H.success(`Deal "${J}" created successfully.`),x(!1),await Ie()}else if(K==="update"){if(!G)throw new Error("Missing deal identifier for update.");T(!0);const De={};Se.name!==void 0&&(De.name=Se.name.trim()),Se.account_id!==void 0&&Se.account_id!==""&&(De.account_id=parseInt(Se.account_id)),Se.primary_contact_id!==void 0&&(De.primary_contact_id=Se.primary_contact_id?parseInt(Se.primary_contact_id):null),Se.stage!==void 0&&(De.stage=Se.stage),Se.amount!==void 0&&Se.amount!==""&&(De.amount=parseFloat(Se.amount)),Se.currency!==void 0&&(De.currency=Se.currency),Se.close_date!==void 0&&(De.close_date=Se.close_date||null),Se.description!==void 0&&(De.description=Se.description||null),Se.assigned_to!==void 0&&(De.assigned_to=Se.assigned_to?parseInt(Se.assigned_to):null),await ie.put(`/deals/admin/${G}`,De),H.success(`Deal "${J}" updated successfully.`),x(!1),await Ie()}else if(K==="delete"){if(!G)throw new Error("Missing deal identifier for deletion.");await ie.delete(`/deals/admin/${G}`),H.success(`Deal "${J}" deleted successfully.`),c?.id===G&&d(null),await Ie()}}catch(De){console.error(De);const Ve=K==="create"?"Failed to create deal. Please review the details and try again.":K==="update"?"Failed to update deal. Please review the details and try again.":"Failed to delete deal. Please try again.",ft=De.response?.data?.detail||Ve;H.error(ft)}finally{(K==="create"||K==="update")&&T(!1),$(!1),I(null)}},Ue=()=>{z||I(null)},et=()=>{x(!1),Oe({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),me(null),Pe(null),O(!1),Q(null),T(!1)},lt=(v??[]).filter(te=>te.stage==="PROSPECTING").length,Ee=(v??[]).filter(te=>te.stage==="QUALIFICATION").length,tt=(v??[]).filter(te=>te.stage==="PROPOSAL").length,be=(v??[]).filter(te=>te.stage==="NEGOTIATION").length,Xe=(v??[]).filter(te=>te.stage==="CLOSED_WON").length,M=(v??[]).filter(te=>te.stage==="CLOSED_LOST").length,U=(v??[]).filter(te=>te.stage==="CLOSED_CANCELLED").length,Y=[{title:"Prospecting",value:lt,icon:ow,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:Ee,icon:nn,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:tt,icon:Kt,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:be,icon:Vd,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:Xe,icon:xn,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:M,icon:Ts,color:"text-red-600",bgColor:"bg-red-100"},{title:"Closed Cancelled",value:U,icon:Ts,color:"text-gray-600",bgColor:"bg-gray-100"}];return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[b&&a.jsx(zt,{message:"Loading deals..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(Kt,{className:"mr-2 text-blue-600"}),"Deals"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:Ae,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(da,{className:"mr-2"})," Add Deal"]})})]}),a.jsx("div",{className:"grid grid-cols-1 p-2 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden",children:Y.map(te=>a.jsx(KIe,{...te},te.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search deals",value:n,onChange:te=>s(te.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[a.jsxs("select",{value:r,onChange:te=>i(te.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),a.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),a.jsx("option",{value:"Qualification Stage",children:"Qualification"}),a.jsx("option",{value:"Proposal Stage",children:"Proposal"}),a.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),a.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),a.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"}),a.jsx("option",{value:"Closed Cancelled Stage",children:"Closed Cancelled"})]}),a.jsxs("select",{value:l,onChange:te=>o(te.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((v??[]).map(te=>`${te.assigned_deals?.first_name} ${te.assigned_deals?.last_name}`))].map((te,K)=>a.jsx("option",{value:te,children:te},K))]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Stage"}),a.jsx("th",{className:"py-3 px-4",children:"Value"}),a.jsx("th",{className:"py-3 px-4",children:"Close Date"}),a.jsx("th",{className:"py-3 px-4",children:"Owner"})]})}),a.jsx("tbody",{children:le.length>0?fe.map(te=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{d({...te}),pe(te.id)},children:[a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:te.deal_id?te.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:te.name}),a.jsx("div",{className:"text-gray-500 text-xs break-all",children:te.description||"--"})]})}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:te.account?.name||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:te.contact?.first_name&&te.contact?.last_name?`${te.contact.first_name} ${te.contact.last_name}`:te.contact?.first_name||te.contact?.last_name||"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Le(te.stage)}`,children:ne(te.stage)})}),a.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",te.amount?.toLocaleString()||"0"]}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:te.close_date||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:te.assigned_deals?.first_name&&te.assigned_deals?.last_name?`${te.assigned_deals.first_name} ${te.assigned_deals.last_name}`:te.assigned_deals?.first_name||te.assigned_deals?.last_name||"--"})]},te.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No deals found."})})})]})}),a.jsx(Jt,{className:"mt-4",totalItems:le.length,pageSize:A,currentPage:N,onPrev:Te,onNext:Ye,onPageSizeChange:te=>{k(te),S(1)},pageSizeOptions:[10,20,30,40,50],label:"deals"}),p&&a.jsx(QIe,{onClose:et,formData:Ne,setFormData:Oe,isEditing:P,onSubmit:ze,isSubmitting:_||z,accounts:F,contacts:V,users:oe,currentAccount:Fe,currentContact:Be}),c&&a.jsx(kx,{relatedActs:R,selectedDeal:c,show:!!c,onClose:()=>d(null),activeTab:u,setActiveTab:f,onEdit:We,onDelete:ce,onStatusUpdate:dt}),E&&a.jsx(YIe,{open:!0,title:E.title,message:E.message,confirmLabel:E.confirmLabel,cancelLabel:E.cancelLabel,variant:E.variant,onConfirm:ye,onCancel:Ue,loading:z})]})}function YIe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}function KIe({icon:e,title:t,value:n,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function QIe({onClose:e,formData:t,setFormData:n,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,accounts:l=[],contacts:o=[],users:c=[],currentAccount:d=null,currentContact:u=null}){const{user:f}=ta(),p=f?.role==="Sales";h.useEffect(()=>{!s&&p&&f&&!t.assigned_to&&n(N=>({...N,assigned_to:f.id}))},[s,p,f,t.assigned_to,n]);const[x,v]=h.useState(!1),w=N=>{if(N.preventDefault(),v(!0),!t.name?.trim()){H.error("Deal name is required.");return}const S=Number(t.amount);if(!t.amount||isNaN(S)||S<=0){H.error("Amount must be a number greater than 0.");return}if(!t.account_id){H.error("Please select an account.");return}if(!t.primary_contact_id){H.error("Please select a primary contact.");return}r?.(t)},b=N=>{N.target.id==="modalBackdrop"&&e()},C=h.useMemo(()=>{const N=String(t.account_id||"").trim(),S=Array.isArray(o)?o:[];return N?S.filter(A=>{const _=[A?.account_id,A?.accountId,A?.account?.id,A?.account?.account_id,A?.account?.accountId].find(T=>T!=null&&String(T).trim()!=="");return _?String(_)===N:!1}):S},[o,t.account_id]);return h.useEffect(()=>{const N=String(t.account_id||"").trim(),S=String(t.primary_contact_id||"").trim();if(!S||!N)return;C.some(k=>String(k?.id)===S)||n(k=>({...k,primary_contact_id:""}))},[t.account_id,t.primary_contact_id,C,n]),a.jsx("div",{id:"modalBackdrop",onClick:b,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:N=>N.stopPropagation(),children:[a.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(Vt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Deal":"Create Deal"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:w,noValidate:!0,children:[a.jsx(x_,{label:"Deal Name",name:"name",value:t.name,onChange:N=>n({...t,name:N.target.value}),placeholder:"Enter deal name",required:!0,isSubmitted:x,className:"md:col-span-2"}),a.jsx(y_,{label:"Account",value:t.account_id||"",onChange:N=>n({...t,account_id:N}),items:l||[],getLabel:N=>N?.name??"",placeholder:"Search account...",disabled:i,currentItem:d,required:!0,isSubmitted:x}),a.jsx(y_,{label:"Primary Contact",value:t.primary_contact_id||"",onChange:N=>n({...t,primary_contact_id:N}),items:C||[],getLabel:N=>`${N?.first_name??""} ${N?.last_name??""}`.trim()||N?.email||"",placeholder:"Search contact...",disabled:i,currentItem:u,required:!0,isSubmitted:x}),a.jsx(C7,{label:"Stage",name:"stage",value:t.stage,onChange:N=>n({...t,stage:N.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}],disabled:i}),a.jsx(x_,{label:"Amount",name:"amount",type:"number",step:"0",value:t.amount,onChange:N=>n({...t,amount:N.target.value}),placeholder:"0",required:!0,isSubmitted:x}),a.jsx(C7,{label:"Currency",name:"currency",value:t.currency||"PHP",onChange:N=>n({...t,currency:N.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),a.jsx(x_,{label:"Close Date",name:"close_date",type:"date",value:t.close_date||"",onChange:N=>n({...t,close_date:N.target.value}),disabled:i}),a.jsx(y_,{label:"Assign To",value:t.assigned_to||"",onChange:N=>n({...t,assigned_to:N}),items:c||[],getLabel:N=>`${N?.first_name??""} ${N?.last_name??""}`.trim()||N?.email||"",placeholder:"Search assignee...",required:!0,disabled:i||p,className:"md:col-span-2"}),a.jsx(ZIe,{label:"Description",name:"description",value:t.description,onChange:N=>n({...t,description:N.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Deal":"Save Deal"})]})]})]})})}function x_({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,className:c="",isSubmitted:d=!1}){const u=d&&!n?.trim();return a.jsxs("div",{className:c,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function C7({label:e,name:t,value:n,onChange:s,options:r,required:i=!1,disabled:l=!1,className:o=""}){return a.jsxs("div",{className:o,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:n??"",onChange:s,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(c=>a.jsx("option",{value:c.value,children:c.label},c.value))})]})}function y_({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",currentItem:c=null,required:d=!1,isSubmitted:u=!1}){const f=u&&d&&!n;return a.jsxs("div",{className:o,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",d&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(XIe,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:l,currentItem:c,hasError:f})]})}function XIe({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,currentItem:o=null,hasError:c={hasError:c}}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),w=e.find(N=>String(N.id)===String(t))||o,b=w?s(w):"",C=h.useMemo(()=>{const N=f.trim().toLowerCase();return(N?e.filter(A=>(s(A)||"").toLowerCase().includes(N)):e).slice(0,l)},[e,f,s,l]);return h.useEffect(()=>{const N=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),h.useEffect(()=>{d||p("")},[d]),a.jsxs("div",{ref:x,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:d?f:b,placeholder:r,onFocus:()=>!i&&u(!0),onChange:N=>{p(N.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${c?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:C.length>0?C.map(N=>{const S=String(N.id),A=s(N),k=String(t)===S;return a.jsx("button",{type:"button",onClick:()=>{n(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:A||"--"},S)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function ZIe({label:e,name:t,value:n,onChange:s,placeholder:r,required:i=!1,disabled:l=!1,className:o="",rows:c=3}){return a.jsxs("div",{className:o,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:s,placeholder:r,required:i,disabled:l,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function mj({selectedDeal:e,onStatusUpdate:t,onClose:n}){const[s,r]=h.useState(e?.stage||""),[i,l]=h.useState(!1),o=vt(),{user:c}=ta();h.useEffect(()=>{console.log("AdminDealsInformation mounted sahdksd",e),console.log("User sadad:",c)},[e,c]);const d=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}];h.useEffect(()=>{e?.stage&&r(e.stage)},[e]);const u=async()=>{if(!e||!e.id){H.error("No deal selected");return}if(!s||s===e.stage){H.info("Please select a different stage");return}const f=e.id;l(!0);try{await ie.put(`/deals/admin/${f}`,{stage:s}),n&&n(),t&&setTimeout(async()=>{await t(!0)},100),setTimeout(()=>{H.success("Deal status updated successfully")},300)}catch(p){console.error(p);const x=p.response?.data?.detail||"Failed to update deal status";H.error(x)}finally{l(!1)}};return e?a.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>o("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Deal"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const f=encodeURIComponent(e.contact.email),p=encodeURIComponent(""),x=encodeURIComponent(""),v=`mailto:${f}?subject=${p}&body=${x}`;window.location.href=v},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Ka,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>o("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Deal"}}}),children:[a.jsx(_t,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>o("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Deal"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Gt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:s,onChange:f=>r(f.target.value),disabled:i||e.created_by!==c?.id&&e.assigned_to!==c?.id,children:d.map(f=>a.jsx("option",{value:f.value,children:f.label},f.value))}),(e.created_by===c?.id||e.assigned_to===c?.id)&&a.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:u,disabled:i||!s||s===e.stage,children:i?"Updating...":"Update"})]})]}):null}function JIe({selectedDeal:e,show:t,onClose:n,activeTab:s,setActiveTab:r,onEdit:i,onDelete:l,onStatusUpdate:o}){const c=vt(),[d]=ks(),u=d.get("id"),[f,p]=h.useState(e||null),[x,v]=h.useState(s||"Overview"),{user:w}=ta();h.useEffect(()=>{console.log("SalesDealsInformation mounted",f),console.log("User:",w)},[f,w]);const b=s!==void 0?s:x;if(h.useEffect(()=>{(async()=>{if(u&&!e)try{console.log("Fetching deal from route, ID:",u);const k=(await ie.get("/deals/admin/fetch-all")).data||[];console.log("All deals fetched:",k.length);const _=k.find(T=>T.id===parseInt(u));if(console.log("Found deal:",_),_){console.log("Deal data structure:",{id:_.id,name:_.name,amount:_.amount,stage:_.stage,account:_.account,contact:_.contact,assigned_deals:_.assigned_deals,deal_creator:_.deal_creator,allKeys:Object.keys(_)});const T={..._,amount:typeof _.amount=="number"?_.amount:parseFloat(_.amount||0),probability:_.probability||0};p(T)}else console.warn("Deal not found with ID:",u)}catch(A){console.error("Error fetching deal:",A)}})()},[u,e]),!f&&!u||u&&!f)return null;const C=S=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[S]||"bg-gray-100 text-gray-700";function N(S){return S?new Date(S).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:a.jsxs("div",{className:"flex items-start justify-between w-full",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),a.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:a.jsx("button",{onClick:()=>{n?n():c(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:a.jsx(Vt,{size:25})})})]})}),a.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:a.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[a.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:f.name}),a.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${C(f.stage)}`,children:f.stage})]}),a.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",N(f.created_at)]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-2",children:[a.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[" ",f.amount?f.amount.toLocaleString():"0"]}),a.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${f.probability}%`}})}),a.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",f.probability,"% Complete "]}),(f.created_by===w?.id||f.assigned_to===w?.id)&&a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[a.jsxs("button",{type:"button",onClick:()=>{i&&i(f)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[a.jsx(rn,{className:"mr-1 sm:mr-2",size:16}),a.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),a.jsxs("button",{type:"button",onClick:()=>{l&&l(f)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[a.jsx(Wt,{className:"mr-1 sm:mr-2",size:16}),a.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(S=>a.jsx("button",{onClick:()=>{r?r(S):v(S)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${b===S?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:S},S))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[b==="Overview"&&a.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),a.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[a.jsx("strong",{children:"Description:"})," ",f.description]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[a.jsx("strong",{children:"Expected Close Date:"})," ",f.close_date]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("div",{className:"mt-4 py-3 w-full",children:[a.jsxs("div",{className:"relative flex flex-col w-full",children:[a.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const S=(f?.stage||"PROSPECTING").toUpperCase(),k=(T=>T==="PROSPECTING"?0:T==="QUALIFICATION"?1:T==="PROPOSAL"?2:T==="NEGOTIATION"?3:T==="CLOSED_WON"||T==="CLOSED_LOST"?4:-1)(S);return[0,1,2,3,4].map(T=>k===T?"orange":k>T?"green":"gray").map((T,E)=>a.jsxs(wt.Fragment,{children:[a.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${T==="green"?"bg-green-500 border-green-500":T==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),E<4&&a.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},E))})()}),a.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((S,A)=>a.jsx("span",{className:"text-center flex-1 break-words",children:S},A))})]}),a.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:f.stage})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),a.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Account:"})," ",f.account?.name]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Primary Contact:"})," ",f.contact?.first_name," ",f.contact?.last_name]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Phone:"})," ",f.contact?.work_phone]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Email:"})," ",f.contact?.email]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Assigned To:"})," ",f.assigned_deals?.first_name," ",f.assigned_deals?.last_name]})]})]})]}),b==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:f.description||"No notes available."})]})]}),b==="Activities"&&a.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:Et,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:_t,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((S,A)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[a.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-gray-600 mt-1",children:a.jsx(S.icon,{size:24})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-gray-900 break-words",children:S.title}),a.jsx("p",{className:"text-sm text-gray-500 break-words",children:S.desc}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),a.jsx("p",{className:"text-sm text-gray-700 break-words",children:S.user})]})]})]}),a.jsx("p",{className:"text-sm text-gray-500 break-words",children:S.date})]},A))]}),b==="Edit"&&a.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[a.jsxs("label",{className:"block mb-3 break-words",children:[a.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),a.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:f.name})]}),a.jsxs("label",{className:"block mb-3 break-words",children:[a.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),a.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:f.description})]}),a.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),a.jsx("div",{className:"w-full lg:w-auto",children:a.jsx(mj,{selectedDeal:f,onStatusUpdate:o,onClose:n})})]})]})]})})}function e$e({selectedDeal:e,onStatusUpdate:t,onClose:n}){const[s,r]=h.useState(e?.stage||""),[i,l]=h.useState(!1),o=vt(),{user:c}=ta();h.useEffect(()=>{console.log("AdminDealsInformation mounted sahdksd",e),console.log("User sadad:",c)},[e,c]);const d=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"}];h.useEffect(()=>{e?.stage&&r(e.stage)},[e]);const u=async()=>{if(!e||!e.id){H.error("No deal selected");return}if(!s||s===e.stage){H.info("Please select a different stage");return}const f=e.id;l(!0);try{await ie.put(`/deals/admin/${f}`,{stage:s}),n&&n(),t&&setTimeout(async()=>{await t(!0)},100),setTimeout(()=>{H.success("Deal status updated successfully")},300)}catch(p){console.error(p);const x=p.response?.data?.detail||"Failed to update deal status";H.error(x)}finally{l(!1)}};return e?a.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>o("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Deal"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const f=encodeURIComponent(e.contact.email),p=encodeURIComponent(""),x=encodeURIComponent(""),v=`https://mail.google.com/mail/?view=cm&fs=1&to=${f}&su=${p}&body=${x}`;window.open(v,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Ka,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>o("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Deal"}}}),children:[a.jsx(_t,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>o("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Deal"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Gt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:s,onChange:f=>r(f.target.value),disabled:i||e.created_by!==c?.id&&e.assigned_to!==c?.id,children:d.map(f=>a.jsx("option",{value:f.value,children:f.label},f.value))}),(e.created_by===c?.id||e.assigned_to===c?.id)&&a.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:u,disabled:i||!s||s===e.stage,children:i?"Updating...":"Update"})]})]}):null}const b_=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],v_={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:"",subtotal:0,tax_rate:0,tax_amount:0,discount_type:"",discount_value:0,discount_amount:0,currency:"PHP",items:[]},Ni=e=>{if(!e)return"Draft";const t=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[t]||"Draft"},w_=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",t$e=e=>{switch(Ni(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},a$e=e=>{switch(Ni(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},Oy=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",tg=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",n$e=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const t=new Date(e);if(isNaN(t.getTime()))return"";const n=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${n}-${s}-${r}`}catch{return""}},N_=(e,t)=>{if(!e||t==null||t==="")return"";const n=Number(t);if(Number.isNaN(n))return"";const s=new Date(e);return isNaN(s.getTime())?"":(s.setDate(s.getDate()+n),s.toISOString().slice(0,10))},S7=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},_7=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},LT=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},s$e=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const s of e){const r=localStorage.getItem(s);if(r)try{const i=JSON.parse(r),l=LT(i);if(l)return l}catch{}}const t=localStorage.getItem("user_id"),n=LT(t);return n||null},r$e=e=>{if(!e)return"";const n=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(s=>s!=null&&String(s).trim()!=="");return n?String(n):""},i$e=e=>{if(!e)return"";const n=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(s=>s!=null&&String(s).trim()!=="");return n?String(n):""};function l$e(){const e=vt(),t=Yt(),{user:n}=ta(),s=n?.company?.currency||"";h.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[r,i]=h.useState([]),[l,o]=h.useState(!1),[c,d]=h.useState([]),[u,f]=h.useState([]),[p,x]=h.useState([]),[v,w]=h.useState([]),[b,C]=h.useState(null),[N,S]=h.useState(null),[A,k]=h.useState(!1),[_,T]=h.useState(!1),[E,I]=h.useState(!1),[z,$]=h.useState(null),[P,O]=h.useState(!1),[B,Q]=h.useState(null),[F,ee]=h.useState(v_),[V,de]=h.useState(""),[oe,Z]=h.useState("Filter by Status"),[R,ve]=h.useState(null),[X,je]=h.useState(1),[Ne,Oe]=h.useState(10),[Fe,me]=h.useState("Overview"),[Be,Pe]=h.useState("Draft"),[we,ne]=h.useState(null);h.useEffect(()=>{const $e=t.state?.quoteID;if($e){ne($e),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(we&&r.length>0&&!l){const ae=r.find($e=>$e.id===we);ae?S(ae):H.error("Quote not found."),ne(null)}},[we,p,l]);const[Le,pe]=h.useState(null);h.useEffect(()=>{async function ae(){try{const $e=await ie.get("/auth/me");pe($e.data)}catch($e){console.error($e)}}ae()},[]),h.useEffect(()=>{let ae=!0;return(async()=>{const Ge=s$e();if(Ge&&ae){C(Ge);return}try{const ue=await ie.get("/auth/me"),se=LT(ue?.data);if(se&&ae){C(se);return}}catch{}ae&&C(null)})(),()=>{ae=!1}},[]);const le=h.useCallback(ae=>ae&&u.find(Ge=>String(Ge.id)===String(ae))?.name||"",[u]),ge=h.useCallback(ae=>{if(!ae)return"";const $e=p.find(Ge=>String(Ge.id)===String(ae));return $e?`${$e.first_name} ${$e.last_name}`.trim():""},[p]),fe=h.useCallback(ae=>{if(!ae)return"--";const $e=c.find(Ge=>String(Ge.id)===String(ae));return $e?.deal_name||$e?.name||`Deal #${S7(ae)}`},[c]),Te=h.useCallback(ae=>{const $e=c.find(se=>String(se.id)===String(ae)),Ge=r$e($e);let ue=i$e($e);if(!ue&&Ge){const se=p.filter(He=>String(He.account_id||"")===String(Ge));if(se.length>0){const He=[...se].sort((ht,Ce)=>{const it=`${ht.first_name||""} ${ht.last_name||""}`.trim().toLowerCase(),Ct=`${Ce.first_name||""} ${Ce.last_name||""}`.trim().toLowerCase();return it.localeCompare(Ct)});ue=String(He[0].id)}}if(Ge&&ue){const se=p.find(He=>String(He.id)===String(ue));se?.account_id&&String(se.account_id)!==String(Ge)&&(ue="")}return{accountId:Ge||"",contactId:ue||""}},[c,p]),Ye=h.useCallback(ae=>{if(!ae)return"--";if(ae.deal?.deal_name)return ae.deal.deal_name;if(ae.deal?.name)return ae.deal.name;const $e=ae.deal_id||ae.deal?.id;return $e?fe($e):"--"},[fe]),Ae=h.useCallback(ae=>{if(!ae)return"--";if(ae.account?.name)return ae.account.name;let $e=ae.account_id||ae.account?.id;if(!$e){const Ge=ae.deal_id||ae.deal?.id;Ge&&($e=Te(Ge).accountId)}return $e?le($e)||`Account #${$e}`:"--"},[Te,le]),Ie=h.useCallback(ae=>{if(!ae)return"--";if(ae.contact?.first_name||ae.contact?.last_name)return`${ae.contact?.first_name||""} ${ae.contact?.last_name||""}`.trim()||"--";let $e=ae.contact_id||ae.contact?.id;if(!$e){const ue=ae.deal_id||ae.deal?.id;ue&&($e=Te(ue).contactId)}return($e?ge($e):"")||($e?`Contact #${$e}`:"--")},[Te,ge]),Je=h.useCallback(async(ae=null)=>{o(!0);try{const $e=await ie.get("/quotes/admin/fetch-all"),ue=[...Array.isArray($e.data)?$e.data:[]].sort((se,He)=>{const ht=se?.created_at||se?.updated_at||0,Ce=He?.created_at||He?.updated_at||0;return new Date(Ce)-new Date(ht)});if(i(ue),ae){const se=ue.find(He=>He.id===ae);S(se||null)}}catch($e){console.error($e),i([]),$e.response?.status===403?H.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):H.error("Failed to fetch quotes. Please try again later.")}finally{o(!1)}},[]),he=h.useCallback(async()=>{try{const ae=await ie.get("/deals/admin/fetch-all");d(Array.isArray(ae.data)?ae.data:[])}catch(ae){console.error(ae),ae.response?.status===403&&H.warn("Unable to load deals (permission denied).")}},[]),Me=h.useCallback(async()=>{try{const ae=await ie.get("/accounts/admin/fetch-all");f(Array.isArray(ae.data)?ae.data:[])}catch(ae){console.error(ae),ae.response?.status===403&&H.warn("Unable to load accounts (permission denied).")}},[]),re=h.useCallback(async()=>{try{const ae=await ie.get("/contacts/admin/fetch-all");x(Array.isArray(ae.data)?ae.data:[])}catch(ae){console.error(ae),ae.response?.status===403&&H.warn("Unable to load contacts (permission denied).")}},[]),Qe=h.useCallback(async()=>{try{const ae=await ie.get("/users/all");w(Array.isArray(ae.data)?ae.data:[])}catch(ae){console.error(ae),ae.response?.status===403&&H.warn("Unable to load users (permission denied).")}},[]);h.useEffect(()=>{Je(),he(),Me(),re(),Qe()},[Je,he,Me,re,Qe]);const We=h.useMemo(()=>{const ae=V.trim().toLowerCase(),$e=oe.trim();return r.filter(Ge=>{const ue=Ye(Ge),se=Ae(Ge),He=Ie(Ge),ht=N_(Ge.presented_date,Ge.validity_days),Ce=[Ge.quote_id,ue,se,He,Ge.total_amount?.toString(),Ge.validity_days?.toString(),Ge.presented_date?tg(Ge.presented_date):"",ht?tg(ht):"",Ge.assigned_user?.first_name,Ge.assigned_user?.last_name,Ge.creator?.first_name,Ge.creator?.last_name,Ge.status,Ge.notes,Oy(Ge.created_at),Oy(Ge.updated_at)],it=ae===""||Ce.some(kt=>kt==null?!1:kt.toString().toLowerCase().includes(ae)),Ct=$e==="Filter by Status"||Ni(Ge.status)===$e;return it&&Ct})},[r,V,oe,Ye,Ae,Ie]),dt=Math.max(1,Math.ceil(We.length/Ne)||1);h.useEffect(()=>je(1),[V,oe]),h.useEffect(()=>{je(ae=>{const $e=Math.max(1,Math.ceil(We.length/Ne)||1);return ae>$e?$e:ae})},[We.length,Ne]);const ze=h.useMemo(()=>{const ae=(X-1)*Ne;return We.slice(ae,ae+Ne)},[We,X,Ne]),ce=()=>je(ae=>Math.max(ae-1,1)),ye=()=>je(ae=>Math.min(ae+1,dt)),Ue=ae=>{S(ae),me("Overview"),Pe(Ni(ae?.status)||"Draft")},et=()=>{S(null),me("Overview")},lt=ae=>{ae.target.id==="quoteModalBackdrop"&&!P&&et()},Ee=h.useCallback(()=>{k(!1),T(!1),Q(null),ee(v_),I(!1)},[]),tt=ae=>{ae.target.id==="modalBackdrop"&&!E&&!P&&Ee()},be=ae=>{const{name:$e,value:Ge}=ae.target;if($e==="deal_id"){const{accountId:ue,contactId:se}=Te(Ge);ee(He=>({...He,deal_id:Ge,account_id:ue,contact_id:se}));return}ee(ue=>({...ue,[$e]:Ge}))},Xe=()=>{ee(v_),T(!1),Q(null),k(!0),Le?.role==="Sales"&&ee(ae=>({...ae,assigned_to:Le.id}))},M=ae=>{if(!ae)return;S(null);const $e=ae.deal?.id?String(ae.deal.id):ae.deal_id?String(ae.deal_id):"",Ge=$e?Te($e):{accountId:"",contactId:""},ue=ae.account?.id?String(ae.account.id):ae.account_id?String(ae.account_id):Ge.accountId,se=ae.contact?.id?String(ae.contact.id):ae.contact_id?String(ae.contact_id):Ge.contactId,He=ae.assigned_user?.id?String(ae.assigned_user.id):ae.assigned_to?String(ae.assigned_to):"";ee({deal_id:$e,account_id:ue||"",contact_id:se||"",total_amount:ae.total_amount?.toString()||"",presented_date:n$e(ae.presented_date),validity_days:ae.validity_days!==null&&ae.validity_days!==void 0?String(ae.validity_days):"",status:Ni(ae.status)||"Draft",assigned_to:He,notes:ae.notes||""}),T(!0),Q(ae.id),k(!0)},U=ae=>{if(!ae)return;const $e=ae.quote_id||"this quote";$({title:"Delete Quote",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:$e}),"? This action cannot be undone."]}),confirmLabel:"Delete Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ae.id,name:$e}})},[Y,te]=h.useState(!1),K=ae=>{if(ae.preventDefault(),te(!0),!b){H.error("Unable to determine current user. Please log in again.");return}if(!F.deal_id){H.error("Deal is required.");return}if(!F.assigned_to){H.error("Assigned To is required.");return}const Ge=Te(F.deal_id),ue={deal_id:Number(F.deal_id),account_id:Ge.accountId?Number(Ge.accountId):null,contact_id:Ge.contactId?Number(Ge.contactId):null,total_amount:Number(F.total_amount),presented_date:F.presented_date||null,validity_days:F.validity_days===""?null:Number(F.validity_days),status:F.status||"Draft",assigned_to:F.assigned_to?Number(F.assigned_to):null,notes:F.notes?.trim()||null},se=_&&B?"update":"create",He=fe(F.deal_id),ht=se==="create"?{...ue,created_by_id:Number(b)}:ue;$({title:se==="create"?"Confirm New Quote":"Confirm Update",message:se==="create"?a.jsxs("span",{children:["Are you sure you want to create a quote for"," ",a.jsx("span",{className:"font-semibold",children:He}),"?"]}):a.jsxs("span",{children:["Save changes to"," ",a.jsx("span",{className:"font-semibold",children:He}),"?"]}),confirmLabel:se==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:se,payload:ht,targetId:B||null,name:He}})},Se=async()=>{if(!z?.action){$(null);return}const{action:ae}=z,{type:$e,payload:Ge,targetId:ue,name:se}=ae;O(!0);try{if($e==="create")I(!0),await ie.post("/quotes/admin",Ge),H.success("Quote created successfully."),Ee(),await Je();else if($e==="update"){if(!ue)throw new Error("Missing quote identifier for update.");I(!0),await ie.put(`/quotes/admin/${ue}`,Ge),H.success("Quote updated successfully."),Ee(),await Je(),N?.id===ue&&S(null)}else if($e==="delete"){if(!ue)throw new Error("Missing quote identifier for deletion.");const He=N?.id;ve(ue),await ie.delete(`/quotes/admin/${ue}`),H.success(`Quote "${se}" deleted successfully.`),await Je(He&&He!==ue?He:null),He===ue&&S(null)}}catch(He){console.error(He);const ht=$e==="create"?"Failed to create quote. Please review the details and try again.":$e==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";H.error(ht),($e==="create"||$e==="update")&&I(!1),$e==="delete"&&ve(null)}finally{($e==="create"||$e==="update")&&I(!1),$e==="delete"&&ve(null),O(!1),$(null)}},G=()=>{P||$(null)},J=h.useCallback((ae,$e)=>{const Ge=ae?.deal_id??ae?.deal?.id??"",ue=Ge?Number(Ge):null,se=ue?Te(String(ue)):{accountId:"",contactId:""},He=ae?.account_id??ae?.account?.id??se.accountId??null,ht=ae?.contact_id??ae?.contact?.id??se.contactId??null,Ce=ae?.total_amount??0,it=ae?.assigned_to??ae?.assigned_user?.id??null;return{deal_id:ue,account_id:He!=null&&String(He).trim()!==""?Number(He):null,contact_id:ht!=null&&String(ht).trim()!==""?Number(ht):null,total_amount:Number(Ce),presented_date:ae?.presented_date||null,validity_days:ae?.validity_days===""||ae?.validity_days===void 0||ae?.validity_days===null?null:Number(ae.validity_days),status:$e,assigned_to:it!=null&&String(it).trim()!==""?Number(it):null,notes:ae?.notes?.trim()||null}},[Te]),De=h.useCallback(async()=>{if(!N?.id)return;const ae=Ni(Be),$e=[ae,ae.toLowerCase()],Ge=async ue=>ie.patch(`/quotes/admin/${N.id}/status`,{status:ue},{headers:{"Content-Type":"application/json"}});try{let ue=!1;for(const se of $e)try{await Ge(se),ue=!0;break}catch(He){if(He?.response?.status===422)continue;throw He}if(!ue){const se=J(N,ae);if(!se.deal_id){H.error("Cannot update status: missing deal_id on selected quote.");return}if(!se.total_amount||se.total_amount<=0){H.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await ie.put(`/quotes/admin/${N.id}`,se)}H.success(`Quote status updated to ${ae}`),S(null),me("Overview"),await Je()}catch(ue){console.error(ue);const se=ue?.response?.data?.message||(ue?.response?.data?.errors?Object.values(ue.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";H.error(se)}},[N,Be,Je,J]),Ve=[{label:"Filter by Status",value:"Filter by Status"},...b_.map(ae=>({label:ae.label,value:ae.value}))],ft=z?.action?.type==="delete"?z.action.targetId:null,bt=N&&(R===N.id||ft===N.id),jt=N&&R===N.id,ke=N?a.jsx("div",{id:"quoteModalBackdrop",onClick:lt,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:ae=>ae.stopPropagation(),children:[a.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:a.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),a.jsx("button",{onClick:et,className:"text-gray-500 hover:text-white transition cursor-pointer",children:a.jsx(Ha,{size:25})})]})}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:Ye(N)}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${a$e(N.status)}`,children:w_(N.status)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>M(N),disabled:P||z?.action?.type==="update"&&z.action.targetId===N.id,children:[a.jsx(nn,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>U(N),disabled:!!bt,children:jt?"Deleting...":a.jsxs(a.Fragment,{children:[a.jsx(Wt,{className:"mr-2"}),"Delete"]})})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-1 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(ae=>a.jsx("button",{onClick:()=>me(ae),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${Fe===ae?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:ae},ae))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[Fe==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Quote ID:"}),a.jsx("p",{children:_7(N.quote_id)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Deal:"}),a.jsx("p",{children:Ye(N)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Account:"}),a.jsx("p",{children:Ae(N)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Contact:"}),a.jsx("p",{children:Ie(N)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Total Amount:"}),a.jsx("p",{children:N.total_amount?`${s}${Number(N.total_amount).toLocaleString()}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Presented Date:"}),a.jsx("p",{children:tg(N.presented_date)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Validity Days:"}),a.jsx("p",{children:N.validity_days!==null&&N.validity_days!==void 0?N.validity_days:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),a.jsx("p",{children:tg(N_(N.presented_date,N.validity_days))||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Status:"}),a.jsx("p",{children:w_(N.status)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:N.assigned_user?`${N.assigned_user.first_name} ${N.assigned_user.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:N.creator?`${N.creator.first_name} ${N.creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:Oy(N.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:Oy(N.updated_at)||"N/A"})]})]})}),Fe==="Notes"&&a.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),a.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:N.notes||"No notes available."})]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/sales/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/sales/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Quotes"}}}),children:[a.jsx(_t,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/sales/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Gt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:Be||Ni(N.status)||"Draft",onChange:ae=>Pe(ae.target.value),children:b_.map(ae=>a.jsx("option",{value:ae.value,children:ae.label},ae.value))}),a.jsx("button",{onClick:De,disabled:Ni(Be)===Ni(N.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Ni(Be)===Ni(N.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,pt=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[l&&a.jsx(zt,{message:"Loading quotes..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(ga,{className:"mr-2 text-blue-600"})," Quotes"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{Xe(),te(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(da,{className:"mr-2"})," Add Quote"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search quotes",value:V,onChange:ae=>de(ae.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:oe,onChange:ae=>Z(ae.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:Ve.map(ae=>a.jsx("option",{value:ae.value,children:ae.label},ae.value))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),a.jsx("th",{className:"py-3 px-4",children:"Deal"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Expiry Date"})]})}),a.jsx("tbody",{children:l?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"Loading quotes..."})}):We.length>0?ze.map(ae=>{const $e=N_(ae.presented_date,ae.validity_days);return a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>Ue(ae),children:[a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:_7(ae.quote_id)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"break-words",children:Ye(ae)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-sm text-gray-700 break-words",children:Ae(ae)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"break-words",children:Ie(ae)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-gray-700",children:ae.total_amount?`${s}${Number(ae.total_amount).toLocaleString()}`:"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${t$e(ae.status)}`,children:w_(ae.status)})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{children:ae.assigned_user?`${ae.assigned_user.first_name} ${ae.assigned_user.last_name}`:"Unassigned"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-gray-500 text-xs",children:tg($e)||"--"})})]},ae.id)}):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No quotes found."})})})]})}),a.jsx(Jt,{className:"mt-4",totalItems:We.length,pageSize:Ne,currentPage:X,onPrev:ce,onNext:ye,onPageSizeChange:ae=>{Oe(ae),je(1)},pageSizeOptions:[10,20,30,40,50],label:"quotes"})]}),_e=A?a.jsx("div",{id:"modalBackdrop",onClick:tt,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:ae=>ae.stopPropagation(),children:[a.jsx("button",{onClick:()=>{Ee(),te(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:E||P,children:a.jsx(Vt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:_?"Edit Quote":"Add New Quote"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:K,children:[a.jsx(E7,{label:"Deal",name:"deal_id",value:F.deal_id,onChange:ae=>{const{accountId:$e,contactId:Ge}=Te(ae);ee(ue=>({...ue,deal_id:ae,account_id:$e,contact_id:Ge}))},items:Array.isArray(c)?c:[],getLabel:ae=>`${S7(ae?.deal_id??"")} ${ae?.name??""}`.trim(),placeholder:"Search deal...",required:!0,isSubmitted:Y,disabled:E||c.length===0,className:"md:col-span-2"}),a.jsx(A7,{label:"Account",value:le(F.account_id)||(F.account_id?`Account #${F.account_id}`:""),disabled:!0}),a.jsx(A7,{label:"Contact",value:ge(F.contact_id)||(F.contact_id?`Contact #${F.contact_id}`:""),disabled:!0}),a.jsx(j_,{label:"Total Amount",name:"total_amount",type:"number",value:F.total_amount,onChange:be,placeholder:"0.00",disabled:E}),a.jsx(j_,{label:"Presented Date",name:"presented_date",type:"date",value:F.presented_date,onChange:be,disabled:E}),a.jsx(j_,{label:"Validity Days",name:"validity_days",type:"number",value:F.validity_days,onChange:be,placeholder:"30",disabled:E}),a.jsx(E7,{label:"Assigned To",value:F.assigned_to||"",onChange:ae=>ee($e=>({...$e,assigned_to:ae})),items:Array.isArray(v)?v:[],getLabel:ae=>{const $e=`${ae?.first_name??""} ${ae?.last_name??""}`.trim();return $e?ae?.role?`${$e} (${ae.role})`:$e:ae?.email||""},placeholder:"Search assignee...",required:!0,isSubmitted:Y,disabled:E||Le?.role==="Sales"}),a.jsx(o$e,{label:"Status",name:"status",value:F.status,onChange:be,options:b_,required:!0,disabled:E,className:"md:col-span-2"}),a.jsx(d$e,{label:"Notes",name:"notes",value:F.notes,onChange:be,placeholder:"Additional details...",rows:3,disabled:E,className:"md:col-span-2"}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:()=>{Ee(),te(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:E||P,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:E||P,children:E?"Saving...":_?"Update Quote":"Save Quote"})]})]})]})}):null,W=z?a.jsx(u$e,{open:!0,title:z.title,message:z.message,confirmLabel:z.confirmLabel,cancelLabel:z.cancelLabel,variant:z.variant,onConfirm:Se,onCancel:G,loading:P}):null;return a.jsxs(a.Fragment,{children:[N?ke:pt,_e,W]})}function j_({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,className:c="",isSubmitted:d=!1}){const u=d&&!n?.trim();return a.jsxs("div",{className:c,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function A7({label:e,value:t,className:n="",disabled:s=!0}){return a.jsxs("div",{className:n,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("input",{type:"text",value:t??"",disabled:s,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function o$e({label:e,name:t,value:n,onChange:s,options:r,required:i=!1,disabled:l=!1,className:o=""}){const c=n!=null?String(n):"",u=r.some(f=>String(f.value)===c)?c:"";return a.jsxs("div",{className:o,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:u,onChange:s,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(f=>a.jsx("option",{value:String(f.value??""),children:f.label},f.value??f.label))})]})}function E7({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!n;return a.jsxs("div",{className:o,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(c$e,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:l,hasError:u})]})}function c$e({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,hasError:o=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",w=h.useMemo(()=>{const b=u.trim().toLowerCase();return(b?e.filter(N=>(s(N)||"").toLowerCase().includes(b)):e).slice(0,l)},[e,u,s,l]);return h.useEffect(()=>{const b=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),h.useEffect(()=>{c||f("")},[c]),a.jsxs("div",{ref:p,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:c?u:v,placeholder:r,onFocus:()=>!i&&d(!0),onChange:b=>{f(b.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${o?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:w.length>0?w.map(b=>{const C=String(b.id),N=s(b),S=String(t)===C;return a.jsx("button",{type:"button",onClick:()=>{n(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:N||"--"},C)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function d$e({label:e,name:t,value:n,onChange:s,placeholder:r,rows:i=3,disabled:l=!1,className:o=""}){return a.jsxs("div",{className:o,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:s,placeholder:r,rows:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function u$e({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}function m$e(){const{userRole:e}=zs();return a.jsx(ej,{currentUserRole:e,currentUserId:null})}function f$e(){h.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,t]=h.useState(null),[n,s]=h.useState(""),[r,i]=h.useState("Filter by Actions"),[l,o]=h.useState(1),[c,d]=h.useState(10),u=async()=>{try{const N=await ie.get("/logs/read-all");t(N.data)}catch(N){console.error("Error fetching audit logs:",N)}};h.useEffect(()=>{u()},[]);const f=h.useMemo(()=>{if(!Array.isArray(e))return[];const N=n.trim().toLowerCase(),S=r?.toUpperCase?.()||"ALL";return e.filter(k=>{const _=k.timestamp?new Date(k.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",T=`${k.entity_type||""} ${k.entity_name||k.entity_details?.name||k.entity_details?.title||k.entity_id||""}`,E=`${k.logger?.first_name||""} ${k.logger?.last_name||""}`,I=[_,E,k.action,k.entity_type,T,k.description],z=N===""||I.some(P=>P==null?!1:P.toString().toLowerCase().includes(N)),$=S==="FILTER BY ACTIONS"||(k.action||"").toUpperCase()===S;return z&&$}).sort((k,_)=>{const T=k.timestamp?new Date(k.timestamp).getTime():0;return(_.timestamp?new Date(_.timestamp).getTime():0)-T})},[e,n,r]),p=Math.max(1,Math.ceil(f.length/c)||1);h.useEffect(()=>{o(1)},[n,r]),h.useEffect(()=>{o(N=>{const S=Math.max(1,Math.ceil(f.length/c)||1);return N>S?S:N})},[f.length,c]);const x=h.useMemo(()=>{const N=(l-1)*c;return f.slice(N,N+c)},[f,l,c]);f.length===0||(l-1)*c+1,Math.min(l*c,f.length);const v=()=>o(N=>Math.max(N-1,1)),w=()=>o(N=>Math.min(N+1,p)),b=()=>{if(!f.length){cx.error("No logs to export!");return}const N=["Timestamp","User","Action","Resource","Details"],S=f.map(E=>[new Date(E.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${E.logger?.first_name||""} ${E.logger?.last_name||""}`.trim(),E.action,`${E.entity_type}: ${E.entity_id}`,E.description||""]),A=[N.join(","),...S.map(E=>E.map(I=>`"${String(I).replace(/"/g,'""')}"`).join(","))].join(`
`),k=new Blob([A],{type:"text/csv;charset=utf-8;"}),_=URL.createObjectURL(k),T=document.createElement("a");T.href=_,T.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(T),T.click(),document.body.removeChild(T),URL.revokeObjectURL(_)},C=N=>{switch((N||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&a.jsx(zt,{message:"Loading audit logs..."}),a.jsx(ox,{toastOptions:{duration:1e3}}),a.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[a.jsx(_t,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),a.jsxs("p",{className:"text-sm text-blue-700",children:[a.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ys,{className:"text-blue-600",size:20}),a.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:b,children:[a.jsx(To,{className:"mr-2"}),"Export Logs"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[a.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search audit logs",value:n,onChange:N=>s(N.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:r,onChange:N=>i(N.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),a.jsx("option",{value:"CREATE",children:"CREATE"}),a.jsx("option",{value:"DELETE",children:"DELETE"}),a.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),a.jsx("th",{className:"py-3 px-4",children:"User"}),a.jsx("th",{className:"py-3 px-4",children:"Action"}),a.jsx("th",{className:"py-3 px-4",children:"Resource"}),a.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),a.jsx("tbody",{children:Array.isArray(f)&&f.length>0?x.map((N,S)=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(N.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),a.jsx("td",{className:"py-3 px-4 text-gray-700",children:N.name}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${C(N.action)}`,children:N.action})}),a.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[N.entity_type,": ",N.entity_id]}),a.jsx("td",{className:"py-3 px-4 text-gray-700",children:N.description})]},S)):a.jsx("tr",{children:a.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),a.jsx(Jt,{className:"mt-4",totalItems:f.length,pageSize:c,currentPage:l,onPrev:v,onNext:w,onPageSizeChange:N=>{d(N),o(1)},pageSizeOptions:[10,20,30,40,50],label:"logs"})]})}const T7=["Not started","In Progress","Deferred","Completed"],My=e=>{if(!e)return"Not started";const t=e.toLowerCase();return t==="not started"||t==="to do"?"Not started":t==="in progress"?"In Progress":t==="review"||t==="deferred"?"Deferred":t==="completed"?"Completed":"Not started"},h$e=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const n=t.getTimezoneOffset();return new Date(t.getTime()-n*60*1e3).toISOString().slice(0,16)},k7=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},g$e=e=>{const t=e.subject?.trim()??"",n=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),e.status&&String(e.status).toUpperCase();let r=null,i=null,l=null,o=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2&&(o=Number(e.relatedTo2)));const c=e.assignedTo?Number(e.assignedTo):null,d=l||o||i||r,u=l?"Contact":o?"Deal":i?"Account":r?"Lead":null;return{title:t,description:n,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:c,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:l,deal_id:o,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:d,related_type:u}},p$e=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",n=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",l=()=>e.lead?.id||e.lead_id,o=()=>e.account?.id||e.account_id,c=()=>e.contact?.id||e.contact_id,d=()=>e.deal?.id||e.deal_id,u=()=>e.task_assign_to?.id||e.assigned_to,f=()=>e.lead?.title||e.lead_id,p=()=>e.account?.name||e.account_id,x=()=>i||e.contact_id,v=()=>e.deal?.name||e.deal_id;let w="Lead",b="",C="",N="",S="Lead",A="",k="",_="";const T=o(),E=p(),I=l(),z=f();if(T){w="Account",S="Account",A=E,b=String(T);const $=c(),P=d(),O=x(),B=v();$?(C="Contact",k="Contact",_=O,N=String($)):P&&(k="Deal",C="Deal",_=B,N=String(P))}else I?(S="Lead",A=z,w="Lead",b=String(I)):e.related_type==="Account"&&(w="Account",b=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:e.status||"Not started",dueDate:s,dateAssigned:r,assignedToId:u()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:n,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:S,relatedTo1Text:A,relatedType2Text:k,relatedTo2Text:_,subject:e.title,relatedType1:w,relatedTo1:b,relatedType2:C,relatedTo2:N}};function x$e(){h.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=ta(),n=e?.role==="Sales",[s,r]=h.useState("board"),[i,l]=h.useState(!1),[o,c]=h.useState(null),[d,u]=h.useState(!1),[f,p]=h.useState([]),[x,v]=h.useState(!0),[w,b]=h.useState(""),[C,N]=h.useState("Filter by Status"),[S,A]=h.useState("Filter by Priority"),[k,_]=h.useState([]),[T,E]=h.useState(1),[I,z]=h.useState(10),[$,P]=h.useState(null),[O,B]=h.useState(!1),Q=vt(),F=Yt(),[ee,V]=h.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""}),[de,oe]=h.useState(null);h.useEffect(()=>{i&&!ee.id&&n&&e&&!ee.assignedTo&&V(ge=>({...ge,assignedTo:e.id}))},[i,ee.id,e,n]),h.useEffect(()=>{const ge=F.state?.openTaskModal,fe=F.state?.initialTaskData,Te=F.state?.taskID;ge?(l(!0),fe&&V(Ye=>({...Ye,...fe})),Q(F.pathname,{replace:!0,state:{}})):Te&&(oe(Te),Q(F.pathname,{replace:!0,state:{}}))},[F,Q]),h.useEffect(()=>{if(de&&f.length>0&&!x){const ge=f.find(fe=>fe.id===de);ge?X(ge,!0):H.error("Task not found."),oe(null)}},[de,f,x]);const Z=async()=>{try{const ge=await ie.get("/users/all");_(Array.isArray(ge.data)?ge.data:[])}catch(ge){console.error("Failed to fetch users:",ge),H.error("Failed to fetch users.")}},R=async()=>{try{v(!0);const ge=await ie.get("/tasks/all"),Te=(Array.isArray(ge.data)?ge.data:[]).map(p$e);Te.sort((Ye,Ae)=>{const Ie=Ye.createdAt?new Date(Ye.createdAt):0;return(Ae.createdAt?new Date(Ae.createdAt):0)-Ie}),console.log("Fetched Tasks:",Te),p(Te),s==="list"&&E(1)}catch(ge){console.error("Failed to load tasks:",ge),H.error("Failed to load tasks.")}finally{v(!1)}};h.useEffect(()=>{!t&&e&&(Z(),R())},[t,e]);const ve=()=>{c(null),V({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},X=(ge=null,fe=!1)=>{c(ge),u(fe),ge?V({id:ge.id,subject:ge.title||"",description:ge.description||"",priority:ge.priority||"Normal",status:ge.status||"Not started",dueDate:h$e(ge.dueDate),assignedTo:ge.assignedToId?String(ge.assignedToId):"",notes:ge.notes||"",relatedType1Text:ge.relatedType1Text||"",relatedTo1Text:ge.relatedTo1Text||"",relatedType2Text:ge.relatedType2Text||"",relatedTo2Text:ge.relatedTo2Text||"",relatedType1:ge.relatedType1||"",relatedTo1:ge.relatedTo1||"",relatedType2:ge.relatedType2||"",relatedTo2:ge.relatedTo2||""}):ve(),l(!0)},je=()=>{l(!1),c(null),u(!1),ve()},Ne=async ge=>{const fe=g$e(ge);try{o&&!d?(await ie.put(`/tasks/${o.id}`,fe),H.success("Task updated successfully.")):(await ie.post("/tasks/create",fe),H.success("Task created successfully.")),l(!1),await R()}catch(Te){console.error("Failed to save task:",Te);const Ye=Te.response?.data?.detail||"Failed to save task.";H.error(Ye)}},Oe=ge=>{ge&&P({title:"Delete Task",message:a.jsxs(a.Fragment,{children:["Are you sure you want to delete ",a.jsx("span",{className:"font-semibold",children:ge.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ge.id}})},Fe=async()=>{if(!$?.action){P(null);return}const{action:ge}=$;B(!0);try{ge.type==="delete"&&(await ie.delete(`/tasks/${ge.targetId}`),H.success("Task deleted successfully."),await R())}catch(fe){console.error("Task action failed:",fe),H.error("Failed to delete task.")}finally{B(!1),P(null)}},me=()=>{O||P(null)},Be=h.useMemo(()=>{const ge=w.trim().toLowerCase();return[...f].sort((Te,Ye)=>{const Ae=Te.createdAt?new Date(Te.createdAt):0;return(Ye.createdAt?new Date(Ye.createdAt):0)-Ae}).filter(Te=>{const Ye=ge===""||Te.title?.toLowerCase().includes(ge)||Te.description?.toLowerCase().includes(ge)||Te.assignedToName?.toLowerCase().includes(ge)||Te.createdBy?.toLowerCase().includes(ge),Ae=C==="Filter by Status"||My(Te.status)===C,Ie=S==="Filter by Priority"||Te.priority===S;return Ye&&Ae&&Ie})},[f,w,C,S]);h.useEffect(()=>{E(1)},[w,C,S,s]),h.useEffect(()=>{if(s==="list"){const ge=Be.length===0?1:Math.ceil(Be.length/I);T>ge&&E(ge)}},[Be.length,T,s,I]);const Pe=h.useMemo(()=>{if(s==="board")return Be;const ge=(T-1)*I;return Be.slice(ge,ge+I)},[Be,T,s,I]),we=h.useMemo(()=>{const ge=new Date;return[{title:"To Do",value:f.filter(fe=>fe.status==="Not started").length,icon:Is,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:f.filter(fe=>fe.status==="In progress").length,icon:hl,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:f.filter(fe=>fe.status==="Completed").length,icon:xn,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:f.filter(fe=>fe.dueDate&&new Date(fe.dueDate)<ge&&fe.status!=="Completed").length,icon:Ef,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:f.filter(fe=>fe.priority==="High").length,icon:ko,color:"text-orange-600",bgColor:"bg-orange-100"}]},[f]),ne=ge=>ge.dueDate&&new Date(ge.dueDate)<new Date&&ge.status!=="Completed",Le=ge=>{switch(My(ge.status)){case"Not started":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In Progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Deferred":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},pe=ge=>{switch(My(ge)){case"Not started":return"bg-blue-100 text-blue-700";case"In Progress":return"bg-purple-100 text-purple-700";case"Deferred":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},le=ge=>{switch(ge){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(x||t)&&a.jsx(zt,{message:"Loading tasks..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(hl,{className:"text-blue-600"})," Tasks Board"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{type:"button",onClick:()=>X(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[a.jsx(da,{})," Create Task"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:we.map(ge=>a.jsx(y$e,{...ge},ge.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search tasks",value:w,onChange:ge=>b(ge.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[a.jsxs("select",{value:C,onChange:ge=>N(ge.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"Filter by Status"}),T7.map(ge=>a.jsx("option",{children:ge},ge))]}),a.jsxs("select",{value:S,onChange:ge=>A(ge.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"Filter by Priority"}),a.jsx("option",{children:"High"}),a.jsx("option",{children:"Normal"}),a.jsx("option",{children:"Low"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("button",{type:"button",onClick:()=>r("board"),className:`px-4 py-2 rounded-full text-sm ${s==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),a.jsx("button",{type:"button",onClick:()=>r("list"),className:`px-4 py-2 rounded-full text-sm ${s==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!x&&!t&&s==="board"&&(Be.length>0?a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:T7.map(ge=>{const fe=Pe.filter(Te=>My(Te.status)===ge);return a.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),a.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:ge}),a.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:fe.length})]}),a.jsx("div",{className:`space-y-3 ${fe.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:fe.length>0?fe.map(Te=>a.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${Le(Te)}`,onClick:()=>X(Te,!0),children:[a.jsxs("div",{className:"text-left flex-1",children:[a.jsx("p",{className:"font-medium text-gray-800 text-sm",children:Te.title}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",Te.priority]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",Te.assignedToName]}),a.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",a.jsx("span",{className:ne(Te)?"text-red-600":"text-gray-600",children:Te.dateAssigned?k7(Te.dateAssigned):""})]})]}),a.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[a.jsx("button",{type:"button",onClick:Ye=>{Ye.stopPropagation(),X(Te)},className:"text-blue-500 hover:text-blue-700",children:a.jsx(rn,{})}),a.jsx("button",{type:"button",onClick:Ye=>{Ye.stopPropagation(),Oe(Te)},className:"text-red-500 hover:text-red-700",children:a.jsx(Wt,{})})]})]},Te.id)):a.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No tasks"})})]},ge)})}):a.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No tasks found."})),!x&&!t&&s==="list"&&a.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"})]})}),a.jsx("tbody",{children:Pe.length>0?Pe.map(ge=>a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",onClick:()=>{console.log("Opening task in view mode:",ge),X(ge,!0)},children:[a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",children:ge.title}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${pe(ge.status||"To Do")}`,children:ge.status||"To Do"})}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${le(ge.priority||"Low")}`,children:ge.priority||"Low"})}),a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:ge.assignedToName||"Unassigned"}),a.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${ne(ge)?"text-red-600 font-medium":""}`,children:ge.dateAssigned?k7(ge.dateAssigned):""})]},ge.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No tasks found."})})})]})})}),!x&&!t&&s==="list"&&a.jsx(Jt,{className:"mt-6",totalItems:Be.length,pageSize:I,currentPage:Be.length===0?0:T,onPrev:()=>E(ge=>Math.max(ge-1,1)),onNext:()=>E(ge=>Math.min(ge+1,Math.max(1,Math.ceil(Be.length/I)||1))),onPageSizeChange:ge=>{z(ge),E(1)},pageSizeOptions:[10,20,30,40,50],label:"tasks"}),a.jsx(Ox,{isOpen:i,onClose:je,onSave:Ne,onEdit:()=>u(!1),setFormData:V,formData:ee,isEditing:!d&&!!o,viewMode:d,users:k,currentUser:e,onDelete:Oe}),$&&a.jsx(b$e,{open:!0,title:$.title,message:$.message,confirmLabel:$.confirmLabel,cancelLabel:$.cancelLabel,variant:$.variant,onConfirm:Fe,onCancel:me,loading:O})]})}function y$e({icon:e,title:t,value:n,color:s,bgColor:r,onClick:i}){return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function b$e({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r,variant:i,loading:l,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}const GQ=e=>e?e.toUpperCase():"",Iy=e=>{const t=GQ(e);return t==="PLANNED"||t==="IN PROGRESS"?"PLANNED":t==="HELD"||t==="DONE"?"HELD":t==="NOT_HELD"||t==="NOT HELD"?"NOT_HELD":"PLANNED"},v$e=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},w$e=e=>{const t=GQ(e);switch(t==="PLANNED"?"PENDING":t==="HELD"?"COMPLETED":t==="NOT_HELD"?"CANCELLED":t){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},C_={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},N$e=()=>{const e=vt(),t=Yt(),{user:n}=ta(),s=n?.role==="Sales",[r]=ks(),i=r.get("id"),l=t.pathname==="/admin/meetings/info";h.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[o,c]=h.useState([]),[d,u]=h.useState(!1),[f,p]=h.useState([]),[x,v]=h.useState(""),[w,b]=h.useState("Filter by Status"),[C,N]=h.useState(!1),[S,A]=h.useState(null),[k,_]=h.useState(1),[T,E]=h.useState(10),[I,z]=h.useState(C_),[$,P]=h.useState(!1),[O,B]=h.useState(null),[Q,F]=h.useState(!1),[ee,V]=h.useState(null),[de,oe]=h.useState(!1),[Z,R]=h.useState(null);h.useEffect(()=>{C&&!$&&s&&n&&!I.assignedTo&&z(pe=>({...pe,assignedTo:n.id}))},[C,$,n,s]),h.useEffect(()=>{const pe=t.state?.openMeetingModal,le=t.state?.initialMeetingData?.relatedTo||r.get("id"),ge=t.state?.meetingID;pe||le?(N(!0),t.state?.initialMeetingData&&z(fe=>({...fe,...t.state.initialMeetingData})),e(t.pathname,{replace:!0,state:{}})):ge&&(R(ge),e(t.pathname,{replace:!0,state:{}}))},[t,r,e]),h.useEffect(()=>{if(Z&&o.length>0&&!d){const pe=o.find(le=>le.id===Z);pe?A(pe):H.error("Meeting not found."),R(null)}},[Z,o,d]);const ve=async()=>{if(i&&l){const pe=sessionStorage.getItem("meetingDetailData");if(pe)try{const le=JSON.parse(pe);if(le.id===parseInt(i)){A(le),sessionStorage.removeItem("meetingDetailData");return}}catch(le){console.error(le)}}u(!0);try{const pe=await ie.get("/meetings/admin/fetch-all"),ge=[...Array.isArray(pe.data)?pe.data:[]].sort((fe,Te)=>{const Ye=fe?.createdAt?new Date(fe.createdAt).getTime():0;return(Te?.createdAt?new Date(Te.createdAt).getTime():0)-Ye});if(c(ge),i&&!S){const fe=ge.find(Te=>Te.id===parseInt(i));fe&&A(fe)}}catch{H.error("Failed to load meetings.")}finally{u(!1)}},X=async()=>{try{const pe=await ie.get("/users/all");p(Array.isArray(pe.data)?pe.data:[])}catch(pe){console.error(pe)}};h.useEffect(()=>{ve(),X()},[]);const je=pe=>v(pe.target.value),Ne=h.useMemo(()=>{const pe=x.trim().toLowerCase(),le=w.trim().toUpperCase();return o.filter(ge=>{const fe=[ge?.activity,ge?.description,ge?.relatedTo,ge?.assignedTo],Te=pe===""||fe.some(Ae=>Ae&&Ae.toString().toLowerCase().includes(pe)),Ye=le==="FILTER BY STATUS"||Iy(ge.status||"PENDING")===le;return Te&&Ye})},[o,x,w]),Oe=h.useMemo(()=>{const pe=(k-1)*T;return Ne.slice(pe,pe+T)},[Ne,k,T]),Fe=()=>{N(!1),z(C_),P(!1),B(null),F(!1)},me=()=>{z(C_),P(!1),B(null),N(!0)},Be=pe=>{let le="";if(pe.meet_assign_to?.id)le=String(pe.meet_assign_to.id);else if(pe.assignedTo){const Me=f.find(re=>`${re.first_name} ${re.last_name}`===pe.assignedTo);le=Me?String(Me.id):""}const ge=Me=>{if(!Me)return"";try{const re=new Date(Me),Qe=re.getTimezoneOffset()*6e4;return new Date(re.getTime()-Qe).toISOString().slice(0,16)}catch{return""}};let fe="Lead",Te="",Ye="Contact",Ae="";if(pe.lead)fe="Lead",Te=String(pe.lead.id);else if(pe.account)fe="Account",Te=String(pe.account.id),pe.contact?(Ye="Contact",Ae=String(pe.contact.id)):pe.deal&&(Ye="Deal",Ae=String(pe.deal.id));else if(pe.relatedType||pe.related_type){const Me=pe.relatedType||pe.related_type,re=pe.related_to||pe.relatedToId;Me==="Lead"?(fe="Lead",Te=String(re)):(fe="Account",Te=pe.account_id?String(pe.account_id):"")}const Ie={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},Je=Iy(pe.status),he=Ie[Je]||"Planned";z({subject:pe.subject||pe.activity||"",location:pe.location||"",startTime:ge(pe.start_time||pe.startTime),endTime:ge(pe.end_time||pe.endTime),status:he,notes:pe.description||pe.notes||"",assignedTo:le,relatedType1:fe,relatedTo1:Te,relatedType2:Ye,relatedTo2:Ae}),P(!0),B(pe.id),A(null),N(!0)},Pe=pe=>{if(!pe.subject?.trim())return H.error("Subject is required.");if(!pe.startTime)return H.error("Start time is required.");if(pe.endTime&&!(new Date(pe.endTime)-new Date(pe.startTime)>0))return H.error("End time must be after start time.");pe.relatedType1,pe.relatedTo1,pe.relatedType1==="Account"&&pe.relatedType2&&pe.relatedTo2&&(pe.relatedType2,pe.relatedTo2);const le={...pe,assignedTo:parseInt(pe.assignedTo),relatedTo1:parseInt(pe.relatedTo1),relatedTo2:parseInt(pe.relatedTo2)},ge=$&&O?"update":"create";V({title:ge==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${ge} "${le.subject}"?`,confirmLabel:ge==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:ge,payload:le,targetId:O,name:le.subject}})},we=async()=>{if(!ee?.action)return;const{type:pe,payload:le,targetId:ge,name:fe}=ee.action;oe(!0);try{pe==="create"?(F(!0),await ie.post("/meetings/create",le),H.success(`Meeting "${fe}" created.`),Fe(),await ve()):pe==="update"?(F(!0),await ie.put(`/meetings/${ge}`,le),H.success(`Meeting "${fe}" updated.`),Fe(),await ve()):pe==="delete"&&(await ie.delete(`/meetings/${ge}`),H.success(`Meeting "${fe}" deleted.`),S?.id===ge&&A(null),await ve())}catch(Te){const Ye=Te.response?.data?.detail||"Action failed.";H.error(typeof Ye=="string"?Ye:JSON.stringify(Ye)),console.error(Ye)}finally{F(!1),oe(!1),V(null)}},ne=pe=>{V({title:"Delete Meeting",message:`Permanently delete "${pe.activity}"?`,confirmLabel:"Delete",variant:"danger",action:{type:"delete",targetId:pe.id,name:pe.activity}})},Le=async(pe,le)=>{try{await ie.put(`/meetings/${pe}`,{status:le}),H.success("Status updated"),ve(),A(null)}catch{H.error("Failed to update status")}};return l&&i?S?a.jsx(qc,{meeting:S,onClose:()=>{A(null),e("/admin/dashboard")},onEdit:Be,onDelete:ne,onStatusUpdate:Le}):a.jsx(zt,{message:"Loading meeting..."}):a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[d&&a.jsx(zt,{message:"Loading meetings..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[a.jsx(_t,{className:"mr-2 text-blue-600"})," Meetings"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:me,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[a.jsx(da,{className:"mr-2"})," Add Meeting"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[a.jsx(Bt,{className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search meetings",value:x,onChange:je,className:"w-full outline-none"})]}),a.jsxs("select",{value:w,onChange:pe=>b(pe.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[a.jsx("option",{children:"Filter by Status"}),a.jsx("option",{value:"PLANNED",children:"PLANNED"}),a.jsx("option",{value:"HELD",children:"HELD"}),a.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Subject"}),a.jsx("th",{className:"py-3 px-4",children:"Related To"}),a.jsx("th",{className:"py-3 px-4",children:"Start Time"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned"}),a.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),a.jsx("tbody",{children:Oe.length>0?Oe.map(pe=>a.jsxs("tr",{onClick:()=>A(pe),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[a.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:pe.subject}),a.jsxs("td",{className:"py-3 px-4",children:[pe.lead&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:pe.lead.title}),pe.account&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:pe.account.name}),pe.contact&&a.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[pe.contact.first_name," ",pe.contact.last_name]}),pe.deal&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:pe.deal.name})]}),a.jsx("td",{className:"py-3 px-4",children:v$e(pe.start_time)}),a.jsxs("td",{className:"py-3 px-4",children:[pe.meet_assign_to.first_name," ",pe.meet_assign_to.last_name]}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${w$e(Iy(pe.status))}`,children:Iy(pe.status).replace("_"," ")})})]},pe.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),a.jsx(Jt,{totalItems:Ne.length,pageSize:T,currentPage:k,onPrev:()=>_(pe=>Math.max(1,pe-1)),onNext:()=>_(pe=>pe+1),onPageSizeChange:pe=>{E(pe),_(1)},pageSizeOptions:[10,20,30,40,50],label:"meetings"}),C&&a.jsx(uj,{onClose:Fe,formData:I,setFormData:z,isEditing:$,onSubmit:Pe,isSubmitting:Q||de,users:f,currentUser:n}),S&&a.jsx(qc,{meeting:S,onClose:()=>A(null),onEdit:Be,onDelete:ne,onStatusUpdate:Le}),ee&&a.jsx(j$e,{open:!0,title:ee.title,message:ee.message,confirmLabel:ee.confirmLabel,variant:ee.variant,onConfirm:we,onCancel:()=>V(null),loading:de})]})};function j$e({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{onClick:c,disabled:l,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),a.jsx("button",{onClick:o,disabled:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${d}`,children:l?"...":s})]})]})})}const C$e=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"}],S$e=e=>e?String(e).toUpperCase():"",Hm=e=>{const t=S$e(e);return t==="PLANNED"||t==="PENDING"?"PLANNED":t==="HELD"||t==="COMPLETED"?"HELD":t==="NOT HELD"||t==="NOT_HELD"||t==="CANCELLED"?"NOT_HELD":"PLANNED"},S_=e=>{const t=Hm(e);return t==="PLANNED"?"PLANNED":t==="HELD"?"HELD":t==="NOT_HELD"?"NOT HELD":"--"},L7=e=>{switch(Hm(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},P7=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function _$e(){const[e,t]=h.useState(!1),[n,s]=h.useState(null),[r,i]=h.useState(null),[l,o]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(null),[v,w]=h.useState(!1),[b,C]=h.useState(null),[N,S]=h.useState(!1),[A,k]=h.useState(!1),[_,T]=h.useState("PLANNED"),[E,I]=h.useState(!1),[z,$]=h.useState(!1),[P,O]=h.useState(1),[B,Q]=h.useState(10),[F,ee]=h.useState(null);ks();const V=vt(),de=Yt(),{user:oe}=ta(),Z=oe?.role==="Sales",ve={subject:"",call_time:(()=>{const ye=new Date,Ue=ye.getFullYear(),et=String(ye.getMonth()+1).padStart(2,"0"),lt=String(ye.getDate()).padStart(2,"0");return`${Ue}-${et}-${lt}T08:00`})(),duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[X,je]=h.useState(ve);h.useEffect(()=>{e&&!v&&Z&&oe&&!X.assigned_to&&je(ye=>({...ye,assigned_to:oe.id}))},[e,v,oe,Z]),h.useEffect(()=>{const ye=de.state,Ue=ye?.callID;if(Ue&&!ye?.openCallModal){ee(Ue),V(de.pathname,{replace:!0,state:{}});return}!ye?.openCallModal||!ye?.initialCallData||ye.initialCallData.relatedType1==="Lead"&&Array.isArray(l)&&l.length===0||ye.initialCallData.relatedType1==="Account"&&(!Array.isArray(l)||l.length===0)||(t(!0),je(et=>({...et,...ye.initialCallData,relatedTo1:ye.initialCallData.relatedTo1?String(ye.initialCallData.relatedTo1):"",relatedTo2:ye.initialCallData.relatedTo2?String(ye.initialCallData.relatedTo2):""})),V(de.pathname,{replace:!0,state:{}}))},[de.state,l]),h.useEffect(()=>{if(F&&u.length>0&&!z){const ye=u.find(Ue=>Ue.id===F);ye?s(ye):H.error("Call not found."),ee(null)}},[F,u,z]);const Ne=async()=>{try{$(!0);const ye=await ie.get("/calls/admin/fetch-all"),et=[...Array.isArray(ye.data)?ye.data:[]].sort((lt,Ee)=>{const tt=lt?.created_at?new Date(lt.created_at):0;return(Ee?.created_at?new Date(Ee.created_at):0)-tt});f(et)}catch(ye){console.error("Error fetching calls:",ye),H.error("Failed to load calls")}finally{$(!1)}},Oe=async()=>{try{const ye=await ie.get("/users/all");x(ye.data)}catch(ye){console.error("Error fetching users: ",ye)}};h.useEffect(()=>{Oe(),Ne()},[]);const Fe=[],me="",Be="Filter by Status",Pe="Filter by Users",we=u,ne=h.useMemo(()=>{const ye=(P-1)*B;return we.slice(ye,ye+B)},[we,P,B]),Le=u.length,pe=u.filter(ye=>Hm(ye.status)==="PLANNED").length,le=u.filter(ye=>Hm(ye.status)==="HELD").length,ge=u.filter(ye=>Hm(ye.status)==="NOT_HELD").length,fe=[{title:"Total",value:Le,icon:Es,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:pe,icon:Is,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:le,icon:xn,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:ge,icon:Ts,color:"text-gray-600",bgColor:"bg-gray-100"}],[Te,Ye]=h.useState("Overview"),Ae=ye=>{const{name:Ue,value:et}=ye.target;je(lt=>{const Ee={...lt,[Ue]:et};return Ue==="relatedType1"&&(Ee.relatedTo1="",et==="Lead"?(Ee.relatedType2=null,Ee.relatedTo2=null,d([])):et==="Account"&&(Ee.relatedType2="Contact")),Ue==="relatedType2"&&(Ee.relatedTo2=""),Ee})};h.useEffect(()=>{const ye=async()=>{try{o([]);let Ue;X.relatedType1==="Lead"?Ue=await ie.get("/leads/admin/getLeads"):X.relatedType1==="Account"&&(Ue=await ie.get("/accounts/admin/fetch-all"));let et=[];if(Ue&&Array.isArray(Ue.data)?et=Ue.data:et=[],v&&X.relatedTo1)try{let lt;X.relatedType1==="Lead"?lt=await ie.get(`/leads/get/${X.relatedTo1}`):X.relatedType1==="Account"&&(lt=await ie.get(`/accounts/get/${X.relatedTo1}`)),lt&&lt.data&&(et.some(tt=>String(tt.id)===String(X.relatedTo1))||(et=[lt.data,...et]))}catch(lt){console.error("Error fetching specific related item:",lt)}o(et)}catch(Ue){console.error("Error fetching data:",Ue),o([])}};X.relatedType1&&ye()},[X.relatedType1,v,X.relatedTo1]),h.useEffect(()=>{const ye=async()=>{try{d([]);let Ue;if(X.relatedType1==="Account"&&X.relatedTo1)X.relatedType2==="Contact"?Ue=await ie.get(`/contacts/from-acc/${X.relatedTo1}`):X.relatedType2==="Deal"&&(Ue=await ie.get(`/deals/from-acc/${X.relatedTo1}`));else{d([]);return}Ue&&Array.isArray(Ue.data)?d(Ue.data):d([])}catch(Ue){console.error("Error fetching data:",Ue),d([])}};X.relatedType2&&ye()},[X.relatedType2,X.relatedTo1,X.relatedType1]);const[Ie,Je]=h.useState(!1),he=ye=>{ye.preventDefault(),Je(!0);const Ue=X.subject;if(!Ue||Ue.trim()===""){H.error("Subject is required.");return}if(!X.relatedTo1){H.error(`Please select a ${X.relatedType1||"Lead/Account"}.`);return}if(!X.assigned_to){H.error("Subject is required.");return}const lt={...X,duration_minutes:X.duration_minutes?parseInt(X.duration_minutes,10):null,relatedTo1:X.relatedTo1?parseInt(X.relatedTo1,10):null,relatedTo2:X.relatedType1==="Lead"?null:X.relatedTo2?parseInt(X.relatedTo2,10):null,relatedType2:X.relatedType1==="Lead"?null:X.relatedType2,assigned_to:X.assigned_to?parseInt(X.assigned_to,10):null},Ee=v&&b?"update":"create",tt=(X.subject||"").trim()||"Untitled Call";i({title:Ee==="create"?"Confirm New Call":"Confirm Update",message:Ee==="create"?`Create "${tt}"?`:`Save changes to "${tt}"?`,confirmLabel:Ee==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:Ee,payload:lt,targetId:b||null,name:tt}})},Me=ye=>s(ye),re=()=>{t(!1),w(!1),C(null)},Qe=async()=>{if(!r?.action){i(null);return}const{action:ye}=r,{type:Ue,payload:et,targetId:lt,name:Ee}=ye;k(!0);try{if(Ue==="create")S(!0),await ie.post("/calls/create",et),H.success(`Call "${Ee}" created successfully.`),t(!1),je(ve),w(!1),C(null),await Ne();else if(Ue==="update"){if(!lt)throw new Error("Missing call identifier for update.");S(!0),await ie.put(`/calls/${lt}`,et),H.success(`Call "${Ee}" updated successfully.`),t(!1),je(ve),w(!1),C(null),await Ne()}else if(Ue==="delete"){if(!lt)throw new Error("Missing call identifier for deletion.");await ie.delete(`/calls/${lt}`),H.success(`Call "${Ee}" deleted successfully.`),n?.id===lt&&s(null),await Ne()}}catch(tt){const be=Ue==="create"?"Failed to create call. Please review the details and try again.":Ue==="update"?"Failed to update call. Please review the details and try again.":"Failed to delete call. Please try again.",Xe=tt?.response?.data?.detail||be;H.error(Xe)}finally{(Ue==="create"||Ue==="update")&&S(!1),k(!1),i(null)}},We=()=>{A||i(null)},dt=async()=>{if(n?.id)try{I(!0),await ie.put(`/calls/${n.id}`,{status:_}),H.success(`Status updated to ${S_(_)}`),f(ye=>Array.isArray(ye)?ye.map(Ue=>Ue.id===n.id?{...Ue,status:_}:Ue):ye),s(null)}catch(ye){const Ue=ye.response?.data?.detail||"Failed to update status.";H.error(Ue)}finally{I(!1)}};h.useEffect(()=>{n&&T(Hm(n.status))},[n]);const ze=n?a.jsxs("div",{id:"callModalBackdrop",onClick:ye=>ye.target.id==="callModalBackdrop"&&s(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[z&&a.jsx(zt,{message:"Loading call details..."}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),a.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:a.jsx(Ha,{size:25})})]}),a.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:n.subject}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${L7(n.status)}`,children:S_(n.status)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const ye=tt=>{if(!tt)return"";const be=new Date(tt),Xe=be.getFullYear(),M=String(be.getMonth()+1).padStart(2,"0"),U=String(be.getDate()).padStart(2,"0"),Y=String(be.getHours()).padStart(2,"0"),te=String(be.getMinutes()).padStart(2,"0");return`${Xe}-${M}-${U}T${Y}:${te}`},Ue=n.lead?"Lead":n.account?"Account":"Lead",et=n.lead?n.lead.id:n.account?n.account.id:null,lt=Ue==="Lead"?null:n.contact?"Contact":n.deal?"Deal":"Contact",Ee=Ue==="Lead"?null:n.contact?n.contact.id:n.deal?n.deal.id:null;je({subject:n.subject||"",call_time:ye(n.call_time),duration_minutes:n.duration_minutes?String(n.duration_minutes):"",direction:n.direction||"Outgoing",status:n.status||"Planned",notes:n.notes||"",relatedType1:Ue,relatedType2:lt,relatedTo1:et?String(et):"",relatedTo2:Ee?String(Ee):"",assigned_to:n.call_assign_to?.id?String(n.call_assign_to.id):""}),w(!0),C(n.id),s(null),t(!0)},children:[a.jsx(nn,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>{const ye=n.subject||"this call";i({title:"Delete Call",message:`Are you sure you want to permanently delete "${ye}"? This action cannot be undone.`,confirmLabel:"Delete Call",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:n.id,name:ye}})},children:[a.jsx(Wt,{className:"mr-2"}),"Delete"]})]})]})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(ye=>a.jsx("button",{onClick:()=>Ye(ye),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${Te===ye?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:ye},ye))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[Te==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsx(Yl,{label:"Call Time",value:P7(n.call_time)}),a.jsx(Yl,{label:"Duration",value:n.duration_minutes?`${n.duration_minutes} min`:null}),a.jsx(Yl,{label:"Direction",value:n.direction||"--"}),a.jsx(Yl,{label:"Assigned To",value:`${n.call_assign_to.first_name} ${n.call_assign_to.last_name}`}),n.lead&&a.jsx(Yl,{label:"Lead",value:n.lead.title}),n.account&&a.jsx(Yl,{label:"Account",value:n.account.name}),n.contact&&a.jsx(Yl,{label:"Contact",value:`${n.contact.first_name} ${n.contact.last_name}`}),n.deal&&a.jsx(Yl,{label:"Deal",value:n.deal.name}),a.jsx(Yl,{label:"Created At",value:P7(n.created_at)})]})}),Te==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Call Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:n.notes||"No notes available."})]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:_,onChange:ye=>T(ye.target.value),children:[a.jsx("option",{value:"PLANNED",children:"PLANNED"}),a.jsx("option",{value:"HELD",children:"HELD"}),a.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),a.jsx("button",{onClick:dt,disabled:E,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:E?"Updating...":"Update"})]})]})]})]})]}):null,ce=e?a.jsx("div",{id:"modalBackdrop",onClick:ye=>ye.target.id==="modalBackdrop"&&re(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[a.jsx("button",{onClick:()=>{re(),Je(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(Vt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:v?"Edit Call":"Add New Call"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:he,noValidate:!0,children:[a.jsx(E$e,{label:"Subject",className:"md:col-span-2",name:"subject",value:X.subject,onChange:Ae,isSubmitted:Ie,required:!0}),a.jsxs("div",{className:"w-full flex flex-col",children:[a.jsxs("select",{name:"relatedType1",onChange:Ae,value:X.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:N,children:[a.jsx("option",{value:"Lead",children:"Lead"}),a.jsx("option",{value:"Account",children:"Account"})]}),a.jsx(__,{items:Array.isArray(l)?l:[],value:X.relatedTo1??"",placeholder:`Search ${X.relatedType1||"here"}...`,getLabel:ye=>X.relatedType1==="Lead"?ye.title:ye.name??"",onChange:ye=>je(Ue=>({...Ue,relatedTo1:ye})),required:!0,isSubmitted:Ie,disabled:N})]}),a.jsxs("div",{className:"w-full flex flex-col",children:[a.jsxs("select",{name:"relatedType2",onChange:Ae,value:X.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:X.relatedType1==="Lead"||N,children:[a.jsx("option",{value:"Contact",children:"Contact"}),a.jsx("option",{value:"Deal",children:"Deal"})]}),a.jsx(__,{disabled:X.relatedType1==="Lead"||N,items:Array.isArray(c)?c:[],value:X.relatedTo2??"",placeholder:X.relatedType1==="Lead"?"":Array.isArray(c)&&c.length>0?`Search ${X.relatedType2||"Contact"}...`:`No ${X.relatedType2||""} data found`,getLabel:ye=>X.relatedType2==="Contact"?`${ye.first_name??""} ${ye.last_name??""}`.trim():ye.name??"",onChange:ye=>je(Ue=>({...Ue,relatedTo2:ye}))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),a.jsx("input",{type:"datetime-local",value:X.call_time,onChange:Ae,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),a.jsxs("div",{className:"w-full",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),a.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[a.jsx("input",{type:"tel",value:X.duration_minutes,onChange:Ae,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),a.jsx("p",{children:"minutes"})]})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",a.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),a.jsx(__,{items:Array.isArray(p)?p:[],value:X.assigned_to??"",placeholder:"Search an account...",getLabel:ye=>`${ye.first_name} ${ye.last_name}`,onChange:ye=>je(Ue=>({...Ue,assigned_to:ye})),disabled:Z,required:!0,isSubmitted:Ie})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),a.jsxs("select",{name:"direction",onChange:Ae,value:X.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[a.jsx("option",{value:"Incoming",children:"Incoming"}),a.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),a.jsxs("select",{name:"status",onChange:Ae,value:X.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[a.jsx("option",{value:"Planned",children:"Planned"}),a.jsx("option",{value:"Held",children:"Held"}),a.jsx("option",{value:"Not held",children:"Not held"})]})]}),a.jsx(T$e,{className:"col-span-2",label:"Notes",value:X.notes,onChange:Ae,name:"notes"}),a.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[a.jsx("button",{type:"button",onClick:()=>{re(),Je(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:N,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:N?"Saving...":v?"Update Call":"Save Call"})]})]})]})}):null;return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(Es,{className:"mr-2 text-blue-600"})," Calls"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{je(ve),w(!1),C(null),t(!0),Je(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(da,{className:"mr-2"})," Add Call"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:fe.map(ye=>a.jsx(A$e,{...ye},ye.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[a.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",defaultValue:me})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[a.jsxs("select",{defaultValue:Be,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[a.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),C$e.map(ye=>a.jsx("option",{value:ye.value,children:ye.label},ye.value))]}),a.jsxs("select",{defaultValue:Pe,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[a.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),Fe.map(ye=>a.jsx("option",{value:ye.name,children:ye.name},ye.id))]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Subject"}),a.jsx("th",{className:"py-3 px-4",children:"Related To"}),a.jsx("th",{className:"py-3 px-4",children:"Call Time"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),a.jsx("tbody",{children:z?a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"py-10",children:a.jsx(zt,{message:"Loading calls..."})})}):ne.length>0?ne.map(ye=>a.jsxs("tr",{onClick:()=>Me(ye),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[a.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:ye.subject||"--"}),a.jsxs("td",{className:"py-3 px-4",children:[ye.lead&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ye.lead.title}),ye.account&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ye.account.name}),ye.contact&&a.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[ye.contact.first_name," ",ye.contact.last_name]}),ye.deal&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ye.deal.name})]}),a.jsx("td",{className:"py-3 px-4 text-gray-800",children:ye.call_time?new Date(ye.call_time).toLocaleString():"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800",children:ye?.call_assign_to?`${ye.call_assign_to.first_name} ${ye.call_assign_to.last_name}`:"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${L7(ye.status)}`,children:S_(ye.status)})})]},ye.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),a.jsx(Jt,{totalItems:we.length,pageSize:B,currentPage:P,onPrev:()=>O(ye=>Math.max(ye-1,1)),onNext:()=>O(ye=>Math.min(ye+1,Math.max(1,Math.ceil(we.length/B)||1))),onPageSizeChange:ye=>{Q(ye),O(1)},pageSizeOptions:[10,20,30,40,50],label:"calls"})]}),ze,ce,r&&a.jsx(k$e,{open:!0,title:r.title,message:r.message,confirmLabel:r.confirmLabel,onConfirm:Qe,onCancel:We,loading:A})]})}function A$e({icon:e,title:t,value:n,color:s,bgColor:r}){return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[a.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:a.jsx(e,{size:22})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function E$e({label:e,name:t,value:n,onChange:s,placeholder:r="",type:i="text",required:l=!1,disabled:o=!1,isSubmitted:c=!1,className:d=""}){const u=c&&l&&!n;return a.jsxs("div",{className:d,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
        `})]})}function T$e(e){return a.jsxs("div",{className:e.className,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),a.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function Yl({label:e,value:t}){return a.jsxs("p",{children:[a.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",a.jsx("br",{}),a.jsx("span",{className:"break-words",children:t||"--"})]})}function k$e({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}function __({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,required:o=!1,isSubmitted:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),v=e.find(N=>String(N.id)===String(t)),w=v?s(v):"",b=o&&c&&!t,C=h.useMemo(()=>{const N=f.trim().toLowerCase();return(N?e.filter(A=>(s(A)||"").toLowerCase().includes(N)):e).slice(0,l)},[e,f,s,l]);return h.useEffect(()=>{const N=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),h.useEffect(()=>{d||p("")},[d]),a.jsxs("div",{ref:x,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:d?f:w,placeholder:r,onFocus:()=>!i&&u(!0),onChange:N=>{p(N.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${b?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:C.length>0?C.map(N=>{const S=String(N.id),A=s(N),k=String(t)===S;return a.jsx("button",{type:"button",onClick:()=>{n(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:A||"--"},S)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function L$e({toggleSidebar:e}){const[t,n]=h.useState(!1),[s,r]=h.useState(!1),[i,l]=h.useState([]),[o,c]=h.useState(0),d=h.useRef(null),u=h.useRef(null),f=Yt(),p=vt(),{logout:x}=zs(),{user:v,fetchUser:w}=ta(),C={"/manager/dashboard":"Dashboard","/manager/accounts":"Accounts","/manager/contacts":"Contacts","/reports":"Reports","/leads":"Leads","/manager/Audit":"Audit","/manager/targets":"Targets","/manager/leads":"Leads","/manager/quotes":"Quotes","/manager/users":"Users","/manager/deals":"Deals"}[f.pathname]||"Manager Panel";return h.useEffect(()=>{w()},[]),h.useEffect(()=>{const N=()=>w();return window.addEventListener("userProfileUpdated",N),()=>window.removeEventListener("userProfileUpdated",N)},[w]),h.useEffect(()=>{if(!v?.id)return;const N=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",S=window.location.protocol==="https:"?"wss:":"ws:",A=N?"localhost:8000":window.location.host,k=`${S}//${A}/ws/notifications?user_id=${v.id}`,_=new WebSocket(k);return _.onmessage=T=>{const E=JSON.parse(T.data);l(I=>[E,...I]),c(I=>I+1)},()=>_.close()},[v?.id]),h.useEffect(()=>{function N(S){d.current&&!d.current.contains(S.target)&&n(!1),u.current&&!u.current.contains(S.target)&&r(!1)}return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),a.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative z-50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:a.jsx(Op,{className:"text-2xl"})}),a.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:C})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"relative",ref:u,children:[a.jsxs("button",{onClick:()=>r(!s),className:"relative text-gray-600 hover:text-gray-800 transition",children:[a.jsx(Pp,{className:"text-xl"}),o>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] w-4 h-4 flex items-center justify-center rounded-full font-semibold",children:o})]}),s&&a.jsxs("div",{className:"absolute right-0 mt-3 w-80 bg-white rounded-xl shadow-lg border z-50 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200",children:[a.jsxs("div",{className:"p-3 border-b bg-gray-50 flex justify-between items-center",children:[a.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:"Notifications"}),a.jsx("button",{onClick:()=>{l([]),c(0)},className:"text-xs text-blue-600 hover:underline",children:"Clear All"})]}),a.jsx("div",{className:"max-h-60 overflow-y-auto",children:i.length>0?i.map((N,S)=>a.jsx("div",{className:"p-3 border-b text-sm hover:bg-gray-50 cursor-pointer transition",children:N.title||N.message||"New Notification"},S)):a.jsx("div",{className:"p-4 text-center text-gray-500 text-xs",children:"No notifications"})})]})]}),a.jsxs("div",{className:"relative",ref:d,children:[a.jsxs("button",{onClick:()=>n(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded transition",children:[a.jsx("img",{src:v?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 h-8 object-cover rounded-full border border-gray-200"}),a.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[v?.first_name," ",v?.last_name]})]}),t&&a.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4 animate-in fade-in slide-in-from-top-2 duration-200",children:[a.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[a.jsx("img",{src:v?.profile_picture||"https://via.placeholder.com/80",alt:"Profile Large",className:"w-16 h-16 rounded-full object-cover border-2 border-gray-100"}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[v?.first_name," ",v?.middle_name," ",v?.last_name]}),a.jsx("p",{className:"text-[11px] text-gray-600 font-light w-full truncate",children:"Manager"})]})]}),a.jsxs("div",{className:"mt-6 space-y-1 px-2",children:[a.jsx("button",{onClick:()=>{p("/manager/users"),n(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 p-2 rounded text-left transition",children:"Invite Your Team"}),a.jsx("button",{onClick:()=>{p("/manager/manage-account"),n(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 p-2 rounded text-left transition",children:"Manage Your Account"}),a.jsx("div",{className:"border-t border-gray-100 my-2"}),a.jsx("button",{onClick:x,className:"block w-full text-sm text-red-600 hover:bg-red-50 p-2 rounded text-left transition font-medium",children:"Logout"})]})]})]})]})]})}function P$e(){const[e,t]=h.useState(!0),[n,s]=h.useState(!1),[r,i]=h.useState(!1),[l,o]=h.useState(!1),c=Yt(),{user:d}=ta();h.useEffect(()=>{d&&console.log("Fetched user:",d)},[d]),h.useEffect(()=>{document.title="Panel | Sari-Sari CRM"},[]);const u="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",f="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition",x=["/manager/accounts","/manager/contacts","/manager/leads","/manager/deals","/manager/quotes","/manager/targets","/manager/meetings","/manager/manage-account"].includes(c.pathname);return a.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[a.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${l?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[a.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[a.jsxs("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:[" Sari-Sari.CRM"," ",a.jsx("span",{className:"text-[12px] text-gray-700 font-medium align-bottom",children:"v2"})]}),d&&d.company&&a.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:d.company.company_name})]}),a.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[a.jsxs(Ot,{to:"/manager/dashboard",className:({isActive:v})=>v?u:f,children:[a.jsx(Dp,{className:"text-lg"}),a.jsx("span",{children:"Dashboard"})]}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>t(!e),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(Kt,{className:"text-lg"}),"Sales"]}),a.jsx(St,{className:`transition-transform ${e||x?"rotate-180":""}`})]}),(e||x)&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(Ot,{to:"/manager/accounts",className:({isActive:v})=>v?u:f,children:[a.jsx(La,{})," Accounts"]}),a.jsxs(Ot,{to:"/manager/contacts",className:({isActive:v})=>v?u:f,children:[a.jsx(Zt,{})," Contacts"]}),a.jsxs(Ot,{to:"/manager/leads",className:({isActive:v})=>v?u:f,children:[a.jsx(Ba,{})," Leads"]}),a.jsxs(Ot,{to:"/manager/deals",className:({isActive:v})=>v?u:f,children:[a.jsx(Kt,{})," Deals"]}),a.jsxs(Ot,{to:"/manager/quotes",className:({isActive:v})=>v?u:f,children:[a.jsx(ga,{})," Quotes"]}),a.jsxs(Ot,{to:"/manager/targets",className:({isActive:v})=>v?u:f,children:[a.jsx(Zs,{})," Targets"]})]})]}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!n),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(ys,{className:"text-lg"}),"Activity"]}),a.jsx(St,{className:`transition-transform ${n?"rotate-180":""}`})]}),n&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(Ot,{to:"/manager/tasks",className:({isActive:v})=>v?u:f,children:[a.jsx(Gt,{})," Tasks"]}),a.jsxs(Ot,{to:"/manager/meetings",className:({isActive:v})=>v?u:f,children:[a.jsx(_t,{})," Meetings"]}),a.jsxs(Ot,{to:"/manager/calls",className:({isActive:v})=>v?u:f,children:[a.jsx(Es,{})," Calls"]}),a.jsxs(Ot,{to:"/manager/audit",className:({isActive:v})=>v?u:f,children:[a.jsx(ys,{})," Audit"]})]})]}),a.jsx("div",{children:a.jsx(Ot,{to:"/manager/territory",className:({isActive:v})=>v?u:f,children:a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(Lo,{className:"text-lg"}),"Territory"]})})}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!r),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(ek,{className:"text-lg"}),"User Management"]}),a.jsx(St,{className:`transition-transform ${r?"rotate-180":""}`})]}),r&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(Ot,{to:"/manager/users",className:({isActive:v})=>v?u:f,children:[a.jsx(La,{})," Users"]}),a.jsxs(Ot,{to:"/manager/manage-account",className:({isActive:v})=>v?u:f,children:[a.jsx(Zt,{})," Manage Account"]})]})]})]}),a.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),l&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>o(!1)}),a.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[a.jsx(L$e,{toggleSidebar:()=>o(!l)}),a.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:a.jsx(Cp,{})})]})]})}const D$e=e=>a.jsx(Bt,{...e}),O$e=e=>a.jsx(Tf,{...e}),M$e=e=>a.jsx(tk,{...e}),WQ=e=>a.jsx(Is,{...e}),I$e=e=>a.jsx(Lp,{...e}),$$e=e=>a.jsx(sw,{...e}),R$e=e=>a.jsx(_t,{...e}),z$e=e=>a.jsx(Et,{...e}),U$e=e=>a.jsx(iw,{...e}),VQ=e=>a.jsx(rw,{...e}),qQ=e=>a.jsx(La,{...e}),YQ=e=>a.jsx(Zt,{...e}),F$e=e=>a.jsx(Ba,{...e}),B$e=e=>a.jsx(Kt,{...e}),H$e=e=>a.jsx(ga,{...e}),G$e=e=>a.jsx(Zs,{...e}),W$e=e=>a.jsx(xn,{...e}),V$e=e=>a.jsx(_t,{...e}),q$e=e=>a.jsx(Es,{...e}),Y$e=e=>a.jsx(Lo,{...e}),K$e=e=>a.jsx(ys,{...e}),KQ=e=>`P ${new Intl.NumberFormat("en-PH",{minimumFractionDigits:0}).format(e)}`,Q$e=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},X$e=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},Z$e=e=>{switch(e){case"call":return{Icon:z$e,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:U$e,color:"text-green-600",bgColor:"bg-green-100"};case"meeting":default:return{Icon:R$e,color:"text-blue-500",bgColor:"bg-blue-100"}}},J$e=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},e6e=({searchQuery:e,onSearchChange:t,searchResults:n,onSearchResultClick:s})=>{const r=vt(),[i,l]=h.useState(!1),o=h.useRef(null),c=[{icon:qQ,label:"Account"},{icon:YQ,label:"Contact"},{icon:F$e,label:"Leads"},{icon:B$e,label:"Deals"},{icon:H$e,label:"Quotes"},{icon:G$e,label:"Target"},{icon:W$e,label:"Task"},{icon:V$e,label:"Meeting"},{icon:q$e,label:"Call"},{icon:K$e,label:"Audit"},{icon:Y$e,label:"Territory"}];h.useEffect(()=>{const f=p=>{o.current&&!o.current.contains(p.target)&&l(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const d=f=>{t(f.target.value),l(f.target.value.trim().length>0)},u=f=>{s&&s(f),l(!1)};return a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[a.jsxs("div",{className:"w-full flex justify-center relative",ref:o,children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-lg lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[a.jsx(D$e,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),a.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:d,onFocus:()=>e.trim().length>0&&l(!0)})]}),i&&Array.isArray(n)&&n.length>0&&a.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:n.map((f,p)=>a.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>u(f),children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:f.name}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:f.type}),f.details&&a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:f.details})]}),a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${f.type==="Lead"?"bg-blue-100 text-blue-600":f.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:f.type})]})},p))}),i&&e.trim().length>0&&(!Array.isArray(n)||n.length===0)&&a.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 p-4 text-center text-sm text-gray-500",children:"No results found"})]}),a.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:a.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:c.map((f,p)=>a.jsxs("div",{className:"relative flex-shrink-0 group",children:[a.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":f.label,title:f.label,onClick:()=>{switch(f.label){case"Account":r("/manager/accounts");break;case"Contact":r("/manager/contacts");break;case"Leads":r("/manager/leads");break;case"Deals":r("/manager/deals");break;case"Quotes":r("/manager/quotes");break;case"Target":r("/manager/targets");break;case"Task":r("/manager/tasks");break;case"Meeting":r("/manager/meetings");break;case"Call":r("/manager/calls");break;case"Audit":r("/manager/audit");break;case"Territory":r("/manager/territory");break;default:console.log(`Clicked ${f.label}`)}},children:a.jsx(f.icon,{size:24,className:"lg:scale-95"})}),a.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-1.5 bg-gray-900 text-white text-xs font-semibold rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-75 ease-in-out z-50 shadow-lg",children:[f.label,a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]},p))})})]})},t6e=({action:e,description:t,entity_type:n,entity_name:s,timestamp:r})=>{const i=vt(),l=u=>{if(!u)return"Unknown";const f=new Date(u),x=new Date-f,v=Math.floor(x/6e4),w=Math.floor(x/36e5),b=Math.floor(x/864e5);return v<1?"Just now":v<60?`${v} min ago`:w<24?`${w} hour${w>1?"s":""} ago`:b<7?`${b} day${b>1?"s":""} ago`:f.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},o=e||t||"Action",c=s||n||"System",d=l(r);return a.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/manager/audit"),children:[a.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[o," ",a.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",c,")"]})]}),a.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:d})]})},a6e=({logs:e,loading:t})=>{const n=vt();return a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),a.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>n("/manager/audit"),children:[a.jsx("span",{children:"See All"}),a.jsx(VQ,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?a.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((s,r)=>a.jsx(t6e,{...s},r))}):a.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},n6e=({icon:e,title:t,value:n,color:s,bgColor:r,loading:i,onClick:l})=>a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l||(()=>console.log(`Clicked metric card: ${t}`)),children:[a.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:a.jsx(e,{size:20})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n||0})]})]}),s6e=({revenueData:e,loading:t})=>{const n=vt(),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=h.useMemo(()=>{if(console.log("=== RevenueChart calculateRevenueData ==="),console.log("revenueData:",e),console.log("revenueData length:",e?.length),!e||e.length===0){console.log("No revenue data, returning empty chart");const b=new Date;b.getFullYear();const C=b.getMonth(),N=[],S=[];for(let A=0;A<=C;A++)N.push(s[A]),S.push(0);return{labels:N,revenues:S,maxRevenue:0}}const o={};let c=0,d=0;console.log("Processing deals:",e.length),e.forEach((b,C)=>{const N=b.close_date||b.closeDate||null,S=N&&N!==null&&N!=="",A=b.stage||"",k=A.toUpperCase()==="CLOSED_WON"||A==="CLOSED_WON";let _=b.amount;_&&typeof _=="object"&&_.toString?_=parseFloat(_.toString()):_=parseFloat(_)||0;const T=_>0;if(k&&(d++,console.log(`Deal ${C+1} (CLOSED_WON):`,{id:b.id,name:b.name,stage:A,close_date:N,close_date_type:typeof N,amount:_,amount_type:typeof b.amount,hasCloseDate:S,hasAmount:T,willBeAdded:S&&T,allFields:Object.keys(b)})),S&&k&&T)try{let E=new Date(N);if(isNaN(E.getTime())){const I=String(N).split("T")[0];E=new Date(I+"T00:00:00")}if(isNaN(E.getTime()))console.warn(` Invalid date for deal ${b.id}:`,N,"Type:",typeof N);else{const I=E.getFullYear(),z=E.getMonth()+1,$=`${I}-${String(z).padStart(2,"0")}`;o[$]||(o[$]=0),o[$]+=_,c++,console.log(` Added deal ${b.id} to month ${$}: ${_}, total: ${o[$]}`),console.log(`  - Close date: ${N} -> Parsed: ${E.toISOString()} -> Month: ${$} (Year: ${I}, Month: ${z})`)}}catch(E){console.error("Error parsing deal date:",N,E)}else k&&console.warn(` Deal ${b.id} is CLOSED_WON but missing data:`,{hasCloseDate:S,hasAmount:T,closeDate:N,amount:_,originalAmount:b.amount})}),console.log("Summary:",{totalDeals:e.length,closedWonDeals:d,validDealsForGraph:c,monthlyRevenue:o});const u=Object.keys(o).map(b=>parseInt(b.split("-")[0])),f=u.length>0?[...new Set(u)].sort():[],p=new Date().getFullYear();new Date().getMonth();const x=[],v=[];for(let b=0;b<12;b++){const C=`${p}-${String(b+1).padStart(2,"0")}`;x.push(s[b]);const N=o[C]||0;v.push(N),N>0&&console.log(`Month ${s[b]} (${C}): ${N}`)}if(f.length>0){const b=Math.max(...f);if(b>p)for(let C=p+1;C<=b;C++)for(let N=0;N<12;N++){const S=`${C}-${String(N+1).padStart(2,"0")}`,A=o[S]||0;x.push(`${s[N]} ${C}`),v.push(A),A>0&&console.log(`Month ${s[N]} ${C} (${S}): ${A}`)}}const w=Math.max(...v,1);return console.log("Final chart data:",{labels:x,revenues:v,maxRevenue:w,hasData:v.some(b=>b>0)}),{labels:x,revenues:v,maxRevenue:w}},[e]),i=r.labels,l=r.revenues;return console.log("=== FINAL CHART DATA ==="),console.log("X Axis (Months):",i),console.log("Y Axis (Revenue):",l),console.log("Has any revenue > 0:",l.some(o=>o>0)),console.log("All revenue values:",l),console.log("Max revenue:",r.maxRevenue),a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),a.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>n("/manager/deals"),children:[a.jsx("span",{children:"See All"}),a.jsx(VQ,{size:14,className:"transform -rotate-45"})]})]}),a.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:a.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i&&i.length>0&&l&&l.length>0?a.jsx(fN,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:o=>o>=1e3?`${(o/1e3).toFixed(0)}k`:o.toString()}],series:[{data:l,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%"}}):a.jsxs("div",{className:"text-center text-gray-500",children:[a.jsx("p",{className:"text-sm",children:"No revenue data available"}),a.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},r6e=({pipelineData:e,loading:t})=>{const n=vt(),s=l=>{const o=(l||"").toUpperCase(),c={PROSPECTING:{name:"Prospecting",color:"bg-blue-500"},QUALIFICATION:{name:"Qualification",color:"bg-yellow-500"},PROPOSAL:{name:"Proposal",color:"bg-orange-500"},NEGOTIATION:{name:"Negotiation",color:"bg-purple-500"},CLOSED_WON:{name:"Closed Won",color:"bg-green-500"},CLOSED_LOST:{name:"Closed Lost",color:"bg-red-500"}};if(c[o])return c[o];const d=["bg-blue-500","bg-yellow-500","bg-orange-500","bg-purple-500","bg-green-500","bg-red-500"],u=Math.abs(o.split("").reduce((f,p)=>f+p.charCodeAt(0),0))%d.length;return{name:l||"Unknown",color:d[u]}},i=(()=>{if(!e||e.length===0)return["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"].map(f=>{const p=s(f);return{stage:p.name,value:0,deals:0,color:p.color}});const l={};e.forEach(u=>{const f=u.stage||"PROSPECTING";l[f]||(l[f]={deals:0,value:0}),l[f].deals+=1,l[f].value+=parseFloat(u.amount||0)});const o=Math.max(...Object.values(l).map(u=>u.value),1),c=["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"],d=[];return c.forEach(u=>{const f=s(u),p=l[u]||{deals:0,value:0};d.push({stage:f.name,value:p.value,deals:p.deals,color:f.color,percentage:o>0?p.value/o*100:0})}),d})();return a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Sales Pipeline"}),a.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:()=>n("/manager/deals"),children:"See All"})]}),a.jsx("div",{className:"space-y-4 flex-grow",children:i.slice(0,6).map(l=>a.jsxs("div",{className:"flex flex-col cursor-pointer hover:opacity-85 transition duration-150",onClick:()=>n("/manager/deals"),children:[a.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[a.jsx("span",{className:"font-medium text-gray-700",children:l.stage}),a.jsx("span",{className:"font-semibold text-gray-800",children:KQ(l.value)})]}),a.jsx("div",{className:"relative h-2 rounded-full bg-gray-200",children:a.jsx("div",{className:`absolute top-0 left-0 h-full rounded-full ${l.color}`,style:{width:`${Math.min(l.percentage,100)}%`}})}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[l.deals," Deals"]})]},l.stage))})]})},A_=({title:e,items:t,children:n,onSeeAll:s})=>{const r=vt(),i=()=>{if(s)s();else{const l={"Latest Leads":"/manager/leads","Latest Deals":"/manager/deals","Upcoming Activities":"/manager/tasks"};l[e]&&r(l[e])}};return a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),a.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),n]})},i6e=({first_name:e,last_name:t,company_name:n,source:s,created_at:r,id:i})=>{const l=vt(),{text:o,bg:c}=X$e(s||"Website"),d=x=>{if(!x)return"Unknown";const v=new Date(x),b=new Date-v,C=Math.floor(b/6e4),N=Math.floor(b/36e5),S=Math.floor(b/864e5);return C<60?`${C} min ago`:N<24?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):S<7?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):v.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},u=`${e||""} ${t||""}`.trim()||"Unknown",f=n||"Unknown Company",p=d(r);return a.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&l(`/manager/leads/${i}`),children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:u}),a.jsx("p",{className:"text-xs text-gray-500",children:f})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs text-gray-400",children:p}),a.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${o} ${c} px-2 py-0.5 rounded-full`,children:s||"Website"})]})]})})},l6e=({name:e,amount:t,account:n,stage:s,created_at:r,id:i,previousAmount:l})=>{const o=vt(),d={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[s]||s||"Unknown",{text:u,bg:f}=Q$e(d),p=parseFloat(t||0),x=l?p>=l?"up":"down":"up",v=x==="up"?I$e:$$e,w=x==="up"?"text-green-400":"text-red-400",b=n?.name||"Unknown Company";return a.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&o(`/manager/deals/info?id=${i}`),children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex-shrink",children:[a.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),a.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:b}),a.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${u} ${f} px-2 py-0.5 rounded-full`,children:d})]}),a.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[a.jsx("p",{className:"text-md font-bold text-gray-800",children:KQ(p)}),a.jsx(v,{size:16,className:`${w} mt-1`})]})]})})},o6e=({type:e,title:t,assignedTo:n,dueDate:s,scheduledDate:r,priority:i,id:l,activityType:o,fullData:c})=>{const d=vt(),f=o||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:p,color:x,bgColor:v}=Z$e(f),{text:w,bg:b}=J$e(i||"MEDIUM"),S=(_=>{if(!_)return"No date set";const T=new Date(_),I=T-new Date,z=Math.floor(I/864e5);return z===0?`Today, ${T.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:z===1?`Tomorrow, ${T.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:z===-1?`Yesterday, ${T.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:T.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(s||r),A=n||"Unassigned",k=()=>{l&&(c?f==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(c)),d(`/manager/calls/info?id=${l}`)):f==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(c)),d(`/manager/meetings/info?id=${l}`)):d("/manager/tasks"):d(f==="call"?`/manager/calls/info?id=${l}`:f==="meeting"?`/manager/meetings/info?id=${l}`:"/manager/tasks"))};return a.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:k,children:[a.jsx("div",{className:`p-2 rounded-lg ${v} mr-3 flex-shrink-0 mt-1`,children:a.jsx(p,{size:20,className:`${x}`})}),a.jsxs("div",{className:"flex-grow",children:[a.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[a.jsx("span",{className:"text-xl leading-none mr-2",children:""}),t||"Untitled Activity"]}),a.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[a.jsxs("p",{className:"flex items-center",children:[a.jsx(WQ,{size:14,className:"mr-1.5 text-gray-400"}),S]}),a.jsxs("p",{className:"flex items-center",children:[a.jsx(YQ,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",A]})]})]}),a.jsx("span",{className:`inline-block text-xs font-medium ${w} ${b} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},c6e=()=>{const e=vt(),{user:t}=ta(),[n,s]=h.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0}),[r,i]=h.useState([]),[l,o]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState([]),[p,x]=h.useState([]),[v,w]=h.useState([]),[b,C]=h.useState(!0),[N,S]=h.useState(null),[A,k]=h.useState(""),[_,T]=h.useState([]),[E,I]=h.useState([]),[z,$]=h.useState([]),[P,O]=h.useState(new Date),B=h.useRef(null),Q=h.useRef(null),F=h.useMemo(()=>{try{if(!A.trim())return[];const oe=A.toLowerCase().trim(),Z=[];return Array.isArray(_)&&_.forEach(R=>{const ve=`${R.first_name||""} ${R.last_name||""}`.trim().toLowerCase(),X=(R.company_name||"").toLowerCase(),je=(R.email||"").toLowerCase(),Ne=(R.phone||"").toLowerCase();(ve.includes(oe)||X.includes(oe)||je.includes(oe)||Ne.includes(oe))&&Z.push({id:R.id,name:`${R.first_name||""} ${R.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:R.company_name||"No company",route:`/manager/leads/${R.id}`})}),Array.isArray(E)&&E.forEach(R=>{const ve=(R.name||"").toLowerCase(),X=(R.account?.name||"").toLowerCase(),je=(R.description||"").toLowerCase();(ve.includes(oe)||X.includes(oe)||je.includes(oe))&&Z.push({id:R.id,name:R.name||"Unnamed Deal",type:"Deal",details:R.account?.name||"No account",route:`/manager/deals/info?id=${R.id}`})}),Array.isArray(z)&&z.forEach(R=>{const ve=(R.name||"").toLowerCase(),X=(R.email||"").toLowerCase(),je=(R.phone||"").toLowerCase(),Ne=(R.website||"").toLowerCase();(ve.includes(oe)||X.includes(oe)||je.includes(oe)||Ne.includes(oe))&&Z.push({id:R.id,name:R.name||"Unnamed Account",type:"Account",details:R.email||R.phone||"No contact info",route:"/manager/accounts"})}),Z.slice(0,10)}catch(oe){return console.error("Error in search:",oe),[]}},[A,_,E,z]),ee=oe=>{oe.route&&(e(oe.route),k(""))},V=h.useCallback(async()=>{C(!0),S(null);try{const[oe,Z,R,ve,X,je,Ne]=await Promise.all([ie.get("/leads/manager/getLeads").catch(he=>(console.error("Error fetching leads:",he),{data:[]})),ie.get("/deals/manager/fetch-all").catch(he=>(console.error("Error fetching deals:",he),{data:[]})),ie.get("/accounts/manager/fetch-all").catch(he=>(console.error("Error fetching accounts:",he),{data:[]})),ie.get("/tasks/all").catch(he=>(console.error("Error fetching tasks:",he),{data:[]})),ie.get("/meetings/manager/fetch-all").catch(he=>(console.error("Error fetching meetings:",he),{data:[]})),ie.get("/calls/manager/fetch-all").catch(he=>(console.error("Error fetching calls:",he),{data:[]})),ie.get("/logs/read-all").catch(he=>(console.error("Error fetching logs:",he),{data:[]}))]),Oe=Array.isArray(oe.data)?oe.data:[],Fe=Array.isArray(Z.data)?Z.data:[],me=Array.isArray(R.data)?R.data:[],Be=Array.isArray(ve.data)?ve.data:[],Pe=Array.isArray(X.data)?X.data:[],we=Array.isArray(je.data)?je.data:[],ne=Array.isArray(Ne.data)?Ne.data:[];console.log("=== RAW DEALS API RESPONSE ==="),console.log("Deals count:",Fe.length),Fe.length>0&&(console.log("First deal sample (raw):",JSON.stringify(Fe[0],null,2)),console.log("First deal keys:",Object.keys(Fe[0]))),T(Oe),I(Fe),$(me);const Le=Oe.filter(he=>he.status&&!["Lost","Converted"].includes(he.status)).length,pe=Be.filter(he=>!he.dueDate||he.status==="Completed"?!1:new Date(he.dueDate)<new Date).length;s({activeLeads:Le,totalDeals:Fe.length,activeAccounts:me.length,overdueTasks:pe});const le=[...Oe].sort((he,Me)=>new Date(Me.created_at||0)-new Date(he.created_at||0)).slice(0,5);i(le);const ge=[...Fe].sort((he,Me)=>new Date(Me.created_at||0)-new Date(he.created_at||0)).slice(0,5);o(ge);const fe=new Date,Te=[];we.forEach(he=>{const Me=he.due_date||he.call_time,re=(he.status||"").toUpperCase();if(Me){const Qe=new Date(Me);re==="COMPLETED"||re==="MISSED"||re==="NOT_HELD"||re==="HELD"||Te.push({type:"Call",title:he.subject||"Untitled Call",assignedTo:he.assigned_to||(he.call_assign_to?`${he.call_assign_to.first_name||""} ${he.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:Me,priority:(he.priority||"MEDIUM").toUpperCase(),id:he.id,activityType:"call",fullData:he})}}),Pe.forEach(he=>{const Me=he.dueDate||he.start_time,re=(he.status||"").toUpperCase();if(Me){const Qe=new Date(Me);re==="COMPLETED"||re==="CANCELLED"||re==="DONE"||Te.push({type:"Meeting",title:he.subject||he.activity||"Untitled Meeting",assignedTo:he.assignedTo||(he.meet_assign_to?`${he.meet_assign_to.first_name||""} ${he.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:Me,priority:(he.priority||"MEDIUM").toUpperCase(),id:he.id,activityType:"meeting",fullData:he})}});const Ye={HIGH:1,MEDIUM:2,LOW:3},Ae=Te.sort((he,Me)=>{const re=Ye[he.priority]||3,Qe=Ye[Me.priority]||3;if(re!==Qe)return re-Qe;const We=new Date(he.scheduledDate||0),dt=new Date(Me.scheduledDate||0);return We-dt}).slice(0,5);d(Ae),f(Fe),console.log("=== ALL DEALS DATA ==="),console.log("Total deals:",Fe.length);const Ie=Fe.filter(he=>(he.stage||"").toUpperCase()==="CLOSED_WON");console.log("CLOSED_WON deals:",Ie.length),Ie.length>0?(console.log("=== CLOSED_WON DEALS DETAILS ==="),Ie.forEach((he,Me)=>{let re=he.amount;re&&typeof re=="object"?re.toString?re=parseFloat(re.toString()):re=parseFloat(re):re=parseFloat(re)||0,console.log(`Deal ${Me+1}:`,{id:he.id,name:he.name,stage:he.stage,stage_upper:(he.stage||"").toUpperCase(),amount:he.amount,amount_parsed:re,amount_type:typeof he.amount,close_date:he.close_date,close_date_type:typeof he.close_date,close_date_value:he.close_date?new Date(he.close_date):null,has_close_date:!!he.close_date,has_amount:re>0,all_keys:Object.keys(he),full_deal:he})})):(console.log(" No CLOSED_WON deals found!"),console.log("All deal stages:",Fe.map(he=>he.stage))),w(Fe);const Je=[...ne].sort((he,Me)=>new Date(Me.timestamp||0)-new Date(he.timestamp||0));x(Je)}catch(oe){console.error("Error fetching dashboard data:",oe),S("Failed to load dashboard data. Please refresh the page.")}finally{C(!1)}},[]);h.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",console.log("ManagerDashboard mounted, fetching data..."),V(),B.current=setInterval(()=>{console.log("Auto-refreshing dashboard data..."),V(),O(new Date)},3e4),()=>{B.current&&clearInterval(B.current)}),[V]),h.useEffect(()=>{if(!t||!t.id)return;let oe=0;const Z=3;let R=null;const ve=()=>{const X=window.location.protocol==="https:"?"wss:":"ws:",je=window.location.hostname==="localhost"?"localhost:8000":window.location.host,Ne=`${X}//${je}/ws/notifications?user_id=${t.id}`;try{const Oe=new WebSocket(Ne);Q.current=Oe,Oe.onopen=()=>{console.log(" WebSocket connected for dashboard updates"),oe=0},Oe.onmessage=Fe=>{try{const me=JSON.parse(Fe.data);console.log(" Real-time notification received:",me),me.event&&["new_task","task_updated","new_lead","lead_updated","new_deal","deal_updated","new_account","account_updated","new_meeting","meeting_updated","new_call","call_updated"].includes(me.event)&&(console.log(" Refreshing dashboard due to:",me.event),V(),O(new Date))}catch(me){console.error("Error parsing WebSocket message:",me)}},Oe.onerror=Fe=>{oe===0&&console.warn(" WebSocket connection unavailable (this is optional)")},Oe.onclose=()=>{oe<Z&&(oe++,R=setTimeout(()=>{t&&t.id&&ve()},5e3))}}catch{console.warn(" WebSocket not available (optional feature)")}};return ve(),()=>{R&&clearTimeout(R),Q.current&&(Q.current.close(),Q.current=null)}},[t,V]);const de=[{icon:qQ,title:"Active Leads",value:n.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/manager/leads")},{icon:O$e,title:"Total Deals",value:n.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/manager/deals")},{icon:M$e,title:"Active Account",value:n.activeAccounts,color:"text-green-600",bgColor:"bg-green-50",onClick:()=>e("/manager/accounts")},{icon:WQ,title:"Overdue Tasks",value:n.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/manager/tasks")}];return console.log("ManagerDashboard rendering, loading:",b,"error:",N),a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[b&&a.jsx(zt,{}),a.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[N&&a.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:a.jsx("p",{className:"font-medium",children:N})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 mb-8",children:[a.jsxs("div",{className:"lg:col-span-9 flex flex-col space-y-4",children:[a.jsx(e6e,{searchQuery:A,onSearchChange:k,searchResults:F,onSearchResultClick:ee}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:de.map(oe=>a.jsx(n6e,{...oe,loading:b},oe.title))})]}),a.jsx("div",{className:"lg:col-span-3",children:a.jsx(a6e,{logs:p,loading:b})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsx(s6e,{revenueData:v,loading:b})}),a.jsx("div",{children:a.jsx(r6e,{pipelineData:u,loading:b})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx(A_,{title:"Latest Leads",children:r.length>0?r.map((oe,Z)=>a.jsx(i6e,{...oe},oe.id||Z)):a.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),a.jsx(A_,{title:"Latest Deals",children:b?a.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mb-2"}),a.jsx("div",{className:"text-sm text-gray-500",children:"Loading deals..."})]}):l.length>0?l.map((oe,Z)=>a.jsx(l6e,{...oe},oe.id||Z)):a.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),a.jsx(A_,{title:"Upcoming Activities",children:c.length>0?c.map((oe,Z)=>a.jsx(o6e,{...oe},oe.id||Z)):a.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})},E_=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Active"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Former"}],T_={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",parent_company:"",status:"PROSPECT",territory_id:"",assigned_to:""},vr=e=>e?e.toUpperCase():"",k_=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",d6e=e=>{switch(vr(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},u6e=e=>{switch(vr(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}};function m6e(){const e=vt();h.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[t,n]=h.useState(!1),[s,r]=h.useState(!1),[i,l]=h.useState(!1),[o,c]=h.useState(null),[d,u]=h.useState(null),[f,p]=h.useState(T_),[x,v]=h.useState(null),[w,b]=h.useState([]),[C,N]=h.useState(!1),[S,A]=h.useState([]),[k,_]=h.useState(null),[T,E]=h.useState([]),[I,z]=h.useState([]),[$,P]=h.useState("Filter by Status"),[O,B]=h.useState(""),[Q,F]=h.useState(null),[ee,V]=h.useState(!1),[de,oe]=h.useState(1),[Z,R]=h.useState(10),[ve,X]=h.useState("Overview"),[je,Ne]=h.useState(""),[Oe,Fe]=h.useState(!1),[me,Be]=h.useState({}),[Pe,we]=h.useState(null),ne=h.useCallback(async(W=null)=>{N(!0);try{const ae=await ie.get("/accounts/admin/fetch-all"),Ge=[...Array.isArray(ae.data)?ae.data:[]].sort((ue,se)=>{const He=ue?.created_at||ue?.updated_at||0,ht=se?.created_at||se?.updated_at||0;return new Date(ht)-new Date(He)});if(b(Ge),console.log("Fetch from backend: ",ae.data),W){const ue=Ge.find(se=>se.id===W);v(ue||null)}}catch(ae){console.error(ae),b([]),ae.response?.status===403?H.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):H.error("Failed to fetch accounts. Please try again later.")}finally{N(!1)}},[v]),Le=h.useCallback(async()=>{try{const W=await ie.get("/users/all");A(Array.isArray(W.data)?W.data:[])}catch(W){console.error(W),W.response?.status===403&&H.warn("Unable to load users for assignment (permission denied).")}},[]),pe=h.useCallback(async()=>{try{const W=await ie.get("/territories/fetch");E(Array.isArray(W.data)?W.data:[])}catch(W){console.error(W),W.response?.status===403&&H.warn("Unable to load territories (permission denied).")}},[]),le=h.useCallback(async()=>{try{const W=await ie.get("/accounts/admin/parent-companies");z(Array.isArray(W.data)?W.data:[])}catch(W){console.error(W),W.response?.status===403&&H.warn("Unable to load parent companies (permission denied).")}},[]),ge=h.useCallback(async W=>{try{const ae=await ie.get(`/activities/accounts/${W}`);console.log("Related activities: ",ae.data),Be(ae.data&&typeof ae.data=="object"?ae.data:{})}catch(ae){console.error(ae),ae.response?.status===404&&(console.warn("No activities found for this account."),Be({}))}},[]);h.useEffect(()=>{ne(),Le(),pe(),le()},[ne,Le,pe,le]),h.useEffect(()=>{x&&Ne(vr(x.status)||"PROSPECT")},[x]);const fe=w.length,Te=h.useMemo(()=>w.filter(W=>W.status?.toLowerCase()==="customer").length,[w]),Ye=h.useMemo(()=>w.filter(W=>W.status?.toLowerCase()==="prospect").length,[w]),Ae=h.useMemo(()=>w.filter(W=>W.status?.toLowerCase()==="partner").length,[w]),Ie=h.useMemo(()=>w.filter(W=>W.status?.toLowerCase()==="active").length,[w]),Je=h.useMemo(()=>w.filter(W=>W.status?.toLowerCase()==="inactive").length,[w]),he=h.useMemo(()=>w.filter(W=>W.status?.toLowerCase()==="former").length,[w]),Me=h.useMemo(()=>[{title:"Total",value:fe,icon:La,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:Te,icon:gl,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:Ye,icon:Ba,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:Ae,icon:Zt,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:Ie,icon:gl,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:Je,icon:pl,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:he,icon:pl,color:"text-orange-600",bgColor:"bg-orange-100"}],[fe,Te,Ye,Ae,Ie,Je,he]),re=h.useMemo(()=>{const W=O.trim().toLowerCase(),ae=$.trim().toUpperCase();return w.filter($e=>{const Ge=[$e?.name,$e?.website,$e?.industry,$e?.territory?.name,$e?.phone_number],ue=W===""||Ge.some(He=>He==null?!1:He.toString().toLowerCase().includes(W)),se=ae==="FILTER BY STATUS"||vr($e.status)===ae;return ue&&se})},[w,O,$]),Qe=Math.max(1,Math.ceil(re.length/Z)||1);h.useEffect(()=>{oe(1)},[O,$]),h.useEffect(()=>{oe(W=>{const ae=Math.max(1,Math.ceil(re.length/Z)||1);return W>ae?ae:W})},[re.length]);const We=h.useMemo(()=>{const W=(de-1)*Z;return re.slice(W,W+Z)},[re,de]);re.length===0||(de-1)*Z+1,Math.min(de*Z,re.length);const dt=()=>oe(W=>Math.max(W-1,1)),ze=()=>oe(W=>Math.min(W+1,Qe)),ce=W=>{v(W),X("Overview"),Ne(vr(W?.status)||"PROSPECT")},ye=()=>v(null),Ue=W=>{W.target.id==="accountModalBackdrop"&&!ee&&ye()},et=()=>{n(!1),r(!1),u(null),p(T_),l(!1),_(null)},lt=W=>{W.target.id==="modalBackdrop"&&et()},Ee=W=>W?new Date(W).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",tt=W=>{const{name:ae,value:$e}=W.target;p(Ge=>({...Ge,[ae]:$e}))},be=()=>{p(T_),r(!1),u(null),n(!0)},Xe=W=>{v(null),console.log("edit: ",W),W.assigned_accs?_(W.assigned_accs):_(null),p({name:W.name||"",website:W.website||"",phone_number:W.phone_number||"",billing_address:W.billing_address||"",shipping_address:W.shipping_address||"",industry:W.industry||"",status:vr(W.status)||"PROSPECT",territory_id:W.territory?.id?String(W.territory.id):"",assigned_to:W.assigned_accs?.id?String(W.assigned_accs.id):""}),r(!0),u(W.id),n(!0)},M=W=>{W&&F({title:"Delete Account",message:a.jsxs("span",{children:["Are you sure you want to permanently delete the account"," ",a.jsx("span",{className:"font-semibold",children:W.name}),"? This action cannot be undone."]}),confirmLabel:"Delete Account",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:W.id,name:W.name}})},U=async()=>{if(!Q?.action){F(null);return}const{action:W}=Q,{type:ae,payload:$e,targetId:Ge,name:ue}=W;V(!0);try{if(ae==="create"){l(!0);const se=await ie.post("/accounts/admin",$e);le(),H.success(`Account "${ue}" created successfully.`);const He=x?.id||null;et(),await ne(He),!x&&se.data?.id}else if(ae==="update"){if(!Ge)throw new Error("Missing account identifier for update.");l(!0),await ie.put(`/accounts/admin/${Ge}`,$e),H.success(`Account "${ue}" updated successfully.`);const se=x?.id&&x.id===Ge?Ge:null;et(),await ne(se),x?.id===Ge&&v(null)}else if(ae==="delete"){if(!Ge)throw new Error("Missing account identifier for deletion.");const se=x?.id;c(Ge),await ie.delete(`/accounts/admin/${Ge}`),H.success(`Account "${ue}" deleted successfully.`),await ne(se&&se!==Ge?se:null),se===Ge&&v(null)}}catch(se){console.error(se);const He=ae==="create"?"Failed to create account. Please review the details and try again.":ae==="update"?"Failed to update account. Please review the details and try again.":"Failed to delete account. Please try again.",ht=se.response?.data?.detail||He;H.error(ht),(ae==="create"||ae==="update")&&l(!1),ae==="delete"&&c(null)}finally{(ae==="create"||ae==="update")&&l(!1),ae==="delete"&&c(null),V(!1),F(null)}},Y=()=>{ee||F(null)},te=async()=>{if(!x||!je)return;const W=vr(je),ae=vr(x.status);if(W!==ae){Fe(!0);try{await ie.put(`/accounts/admin/${x.id}`,{status:W}),H.success(`Account status updated to ${k_(W)}`),b($e=>$e.map(Ge=>Ge.id===x.id?{...Ge,status:W}:Ge)),v(null)}catch($e){console.error($e);const Ge=$e.response?.data?.detail||"Failed to update account status. Please try again.";H.error(Ge)}finally{Fe(!1)}}},[K,Se]=h.useState(!1),G=W=>{W.preventDefault(),Se(!0);const ae=f.name.trim();if(!ae){H.error("Account name is required.");return}if(!f.assigned_to){H.error("Assigned To is required.");return}const Ge={name:ae,website:f.website?.trim()||null,phone_number:f.phone_number?.trim()||null,billing_address:f.billing_address?.trim()||null,shipping_address:f.shipping_address?.trim()||null,industry:f.industry?.trim()||null,parent_company:f.parent_company?.trim()||null,status:f.status||"PROSPECT",territory_id:f.territory_id?Number(f.territory_id):null,assigned_to:f.assigned_to?Number(f.assigned_to):null},ue=s&&d?"update":"create";F({title:ue==="create"?"Confirm New Account":"Confirm Update",message:ue==="create"?a.jsxs("span",{children:["Are you sure you want to create the account"," ",a.jsx("span",{className:"font-semibold",children:ae}),"?"]}):a.jsxs("span",{children:["Save changes to the account"," ",a.jsx("span",{className:"font-semibold",children:ae}),"?"]}),confirmLabel:ue==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:ue,payload:Ge,targetId:d||null,name:ae}})},J=[{label:"Filter by Status",value:"Filter by Status"},...E_.map(W=>({label:W.label,value:W.value}))],De=Q?.action?.type==="delete"?Q.action.targetId:null,Ve=x&&(o===x.id||De===x.id),ft=x&&o===x.id,bt=x?d6e(x.status):"",jt=x?a.jsx("div",{id:"accountModalBackdrop",onClick:Ue,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:W=>W.stopPropagation(),children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),a.jsx("button",{onClick:ye,className:"text-gray-400 hover:text-white cursor-pointer",children:a.jsx(Ha,{size:25})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:x.name}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${bt}`,children:k_(x.status)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Xe(x),disabled:Q?.action?.type==="update"&&Q.action.targetId===x.id,children:[a.jsx(nn,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>M(x),disabled:!!Ve,children:ft?"Deleting...":a.jsxs(a.Fragment,{children:[a.jsx(Wt,{className:"mr-2"}),"Delete"]})})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(W=>a.jsx("button",{onClick:()=>X(W),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${ve===W?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:W},W))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[ve==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Website:"}),a.jsx("p",{children:x.website?a.jsx("a",{href:x.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:x.website}):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Industry:"}),a.jsx("p",{children:x.industry||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Parent Company:"}),a.jsx("p",{children:x.parent_company||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Territory:"}),a.jsx("p",{children:x.territory?.name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Phone Number:"}),a.jsx("p",{children:x.phone_number||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Billing Address:"}),a.jsx("p",{children:x.billing_address||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),a.jsx("p",{children:x.shipping_address||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:x.assigned_accs?`${x.assigned_accs.first_name} ${x.assigned_accs.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:x.acc_creator?`${x.acc_creator.first_name} ${x.acc_creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:Ee(x.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:Ee(x.updated_at)||"N/A"})]})]})}),ve==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:w.notes||"No notes available."})]})]}),ve==="Activities"&&a.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[me.tasks&&me.tasks.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>we(Pe==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Gt,{className:"text-blue-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",me.tasks.length,")"]})]}),Pe==="tasks"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),Pe==="tasks"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:me.tasks.map((W,ae)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/tasks",{state:{taskID:W.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-blue-600 mt-1",children:a.jsx(Gt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:W.subject||W.title||"Task"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:W.description||"No description"}),W.assigned_to&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",W.assigned_to.first_name," ",W.assigned_to.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ee(W.due_date||W.created_at)})]},`task-${ae}`))})]}),me.meetings&&me.meetings.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>we(Pe==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_t,{className:"text-green-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",me.meetings.length,")"]})]}),Pe==="meetings"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),Pe==="meetings"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:me.meetings.map((W,ae)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/meetings",{state:{meetingID:W.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-green-600 mt-1",children:a.jsx(_t,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:W.subject||W.title||"Meeting"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:W.description||W.location||"No description"}),W.host&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",W.host.first_name," ",W.host.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ee(W.start_time||W.created_at)})]},`meeting-${ae}`))})]}),me.calls&&me.calls.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>we(Pe==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Et,{className:"text-purple-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",me.calls.length,")"]})]}),Pe==="calls"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),Pe==="calls"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:me.calls.map((W,ae)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/calls",{state:{callID:W.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-purple-600 mt-1",children:a.jsx(Et,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:W.subject||W.title||"Call"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:W.direction||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ee(W.call_time||W.created_at)})]},`call-${ae}`))})]}),me.contacts&&me.contacts.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>we(Pe==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Zt,{className:"text-teal-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",me.contacts.length,")"]})]}),Pe==="contacts"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),Pe==="contacts"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:me.contacts.map((W,ae)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/contacts",{state:{contactID:W.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-teal-600 mt-1",children:a.jsx(Zt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[W.first_name?`${W.first_name} `:"",W.last_name]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:W.title||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ee(W.created_at)})]},`contact-${ae}`))})]}),me.deals&&me.deals.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>we(Pe==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Kt,{className:"text-indigo-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",me.deals.length,")"]})]}),Pe==="deals"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),Pe==="deals"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:me.deals.map((W,ae)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/deals",{state:{dealID:W.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-indigo-600 mt-1",children:a.jsx(Kt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[W.deal_id?W.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",W.name||W.title||"Deal"]}),a.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:W.stage||W.description||"No description"})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ee(W.close_date||W.created_at)})]},`deal-${ae}`))})]}),me.quotes&&me.quotes.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>we(Pe==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ga,{className:"text-orange-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",me.quotes.length,")"]})]}),Pe==="quotes"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),Pe==="quotes"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:me.quotes.map((W,ae)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/quotes",{state:{quoteID:W.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-orange-600 mt-1",children:a.jsx(ga,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(W.quote_id?W.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:W.status||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ee(W.presented_date)||""})]},`quote-${ae}`))})]}),(!me||(!me.tasks||me.tasks.length===0)&&(!me.meetings||me.meetings.length===0)&&(!me.calls||me.calls.length===0)&&(!me.quotes||me.quotes.length===0)&&(!me.deals||me.deals.length===0)&&(!me.contacts||me.contacts.length===0))&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No related activities found for this account."})})]})]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Account"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Account"}}}),children:[a.jsx(_t,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Account"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Gt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:je||vr(x?.status)||"PROSPECT",onChange:W=>Ne(W.target.value),children:E_.map(W=>a.jsx("option",{value:W.value,children:W.label},W.value))}),a.jsx("button",{onClick:te,disabled:Oe||!je||vr(je)===vr(x?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Oe||!je||vr(je)===vr(x?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:Oe?"Updating...":"Update"})]})]})]})]})]})}):null,ke=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[C&&a.jsx(zt,{message:"Loading accounts..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(La,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{be(),Se(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(da,{className:"mr-2"})," Add Account"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Me.map(W=>a.jsx(f6e,{...W},W.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search accounts",value:O,onChange:W=>B(W.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:$,onChange:W=>P(W.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:J.map(W=>a.jsx("option",{value:W.value,children:W.label},W.value))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4",children:"Industry"}),a.jsx("th",{className:"py-3 px-4",children:"Territory"}),a.jsx("th",{className:"py-3 px-4",children:"Phone"})]})}),a.jsx("tbody",{children:C?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"Loading accounts..."})}):re.length>0?We.map(W=>a.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>{ce(W),ge(W.id)},children:[a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:W.name}),a.jsx("div",{className:"text-gray-500 text-xs break-all",children:W.website||"--"})]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${u6e(W.status)}`,children:k_(W.status)})}),a.jsx("td",{className:"py-3 px-4 text-sm",children:W.industry||"--"}),a.jsx("td",{className:"py-3 px-4 text-sm",children:W.territory?.name||"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[a.jsx(Et,{className:"text-gray-500"}),a.jsx("span",{children:W.phone_number||"--"})]})})]},W.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"No accounts found."})})})]})}),a.jsx(Jt,{className:"mt-4",totalItems:re.length,pageSize:Z,currentPage:de,onPrev:dt,onNext:ze,onPageSizeChange:W=>{R(W),oe(1)},pageSizeOptions:[10,20,30,40,50],label:"accounts"})]}),pt=t?a.jsx("div",{id:"modalBackdrop",onClick:lt,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:W=>W.stopPropagation(),children:[a.jsx("button",{onClick:()=>{et(),Se(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:i||ee,children:a.jsx(Vt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Account":"Add New Account"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:G,noValidate:!0,children:[a.jsx("div",{className:"md:col-span-2",children:a.jsx(Lm,{label:"Name",name:"name",value:f.name,onChange:tt,placeholder:"Company name",required:!0,isSubmitted:K})}),a.jsx(O7,{label:"Parent Company",value:f.parent_company,onChange:W=>{p(ae=>({...ae,parent_company:W}))},items:I.map(W=>({id:W,name:W})),getLabel:W=>W?.name||"",placeholder:"Select or type parent company...",disabled:i,allowFreeText:!0}),a.jsx(Lm,{label:"Website",name:"website",value:f.website,onChange:tt,placeholder:"https://example.com",disabled:i}),a.jsx(Lm,{label:"Phone Number",name:"phone_number",value:f.phone_number,onChange:tt,placeholder:"09xx xxx xxxx",type:"tel",disabled:i}),a.jsx(Lm,{label:"Industry",name:"industry",value:f.industry,onChange:tt,placeholder:"Industry",disabled:i}),a.jsx(Lm,{label:"Billing Address",name:"billing_address",value:f.billing_address,onChange:tt,placeholder:"Billing address",disabled:i}),a.jsx(Lm,{label:"Shipping Address",name:"shipping_address",value:f.shipping_address,onChange:tt,placeholder:"Shipping address",disabled:i}),a.jsx(D7,{label:"Status",name:"status",value:f.status,onChange:tt,options:[{value:"",label:"Select status"},...E_],required:!0,disabled:i}),a.jsx(O7,{label:"Assigned To",value:f.assigned_to,onChange:W=>{const ae=S.find(Ge=>String(Ge.id)===String(W));_(ae);let $e=null;ae&&ae.assigned_territory&&ae.assigned_territory.length===1&&($e=ae.assigned_territory[0].id),p(Ge=>({...Ge,assigned_to:W,territory_id:$e}))},items:S||[],getLabel:W=>`${W?.first_name??""} ${W?.last_name??""} (${W?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:K,disabled:i||S.length===0}),a.jsx(D7,{label:"Territory",name:"territory_id",value:f.territory_id||"",onChange:tt,options:[{value:"",label:k?k.assigned_territory&&k.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"},...k&&k.assigned_territory&&k.assigned_territory.map(W=>({value:String(W.id),label:W.name}))||[]],disabled:i||!k||!k.assigned_territory||k.assigned_territory.length===0}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[a.jsx("button",{type:"button",onClick:()=>{et(),Se(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i||ee,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i||ee,children:i?"Saving...":s?"Update Account":"Save Account"})]})]})]})}):null,_e=Q?a.jsx(g6e,{open:!0,title:Q.title,message:Q.message,confirmLabel:Q.confirmLabel,cancelLabel:Q.cancelLabel,variant:Q.variant,onConfirm:U,onCancel:Y,loading:ee}):null;return a.jsxs(a.Fragment,{children:[ke,jt,pt,_e]})}function f6e({icon:e,title:t,value:n,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function Lm({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,className:c="",isSubmitted:d=!1}){const u=d&&!n?.trim();return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function D7({label:e,name:t,value:n,onChange:s,options:r,required:i=!1,disabled:l=!1}){return a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:n??"",onChange:s,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(o=>a.jsx("option",{value:o.value,children:o.label},o.value))})]})}function O7({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",required:c=!1,isSubmitted:d=!1,allowFreeText:u=!1}){const f=d&&c&&!n;return a.jsxs("div",{className:o,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(h6e,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:l,hasError:f,allowFreeText:u})]})}function h6e({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,hasError:o=!1,allowFreeText:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),v=e.find(C=>String(C.id)===String(t)),w=v?s(v):t,b=h.useMemo(()=>{const C=f.trim().toLowerCase();return(C?e.filter(S=>(s(S)||"").toLowerCase().includes(C)):e).slice(0,l)},[e,f,s,l]);return h.useEffect(()=>{const C=N=>{x.current&&!x.current.contains(N.target)&&u(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]),h.useEffect(()=>{d||p("")},[d]),a.jsxs("div",{ref:x,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:d?f:w,placeholder:r,onFocus:()=>!i&&u(!0),onChange:C=>{p(C.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${o?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsxs("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:[c&&f.trim()&&!b.some(C=>s(C).toLowerCase()===f.trim().toLowerCase())&&a.jsxs("button",{type:"button",onClick:()=>{n(f.trim()),u(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-green-50 bg-blue-50 font-medium text-blue-700",children:['+ Add "',f.trim(),'" as new parent company']}),b.length>0?b.map(C=>{const N=String(C.id),S=s(C),A=String(t)===N;return a.jsx("button",{type:"button",onClick:()=>{n(N),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${A?"bg-blue-50":""}`,children:S||"--"},N)}):!c||!f.trim()?a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"}):null]}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function g6e({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}const L_={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},Pm=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),Vi=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function p6e(){const e=vt(),t=Yt();h.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[n,s]=h.useState([]),[r,i]=h.useState(!1),[l,o]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState(null),[p,x]=h.useState(!1),[v,w]=h.useState(!1),[b,C]=h.useState(!1),[N,S]=h.useState(null),[A,k]=h.useState(!1),[_,T]=h.useState(null),[E,I]=h.useState(L_),[z,$]=h.useState(""),[P,O]=h.useState("Filter by Accounts"),[B,Q]=h.useState(null),[F,ee]=h.useState("Overview"),[V,de]=h.useState(1),[oe,Z]=h.useState(10),[R,ve]=h.useState({}),[X,je]=h.useState(null),[Ne,Oe]=h.useState(null);h.useEffect(()=>{const M=t.state?.contactID;M&&(Oe(M),e(t.pathname,{replace:!0,state:{}}))},[t,e]),h.useEffect(()=>{if(Ne&&n.length>0&&!r){const M=n.find(U=>U.id===Ne);M?f(M):H.error("Contact not found."),Oe(null)}},[Ne,n,r]);const Fe=h.useCallback(async(M=null)=>{i(!0);try{const U=await ie.get("/contacts/admin/fetch-all"),te=[...Array.isArray(U.data)?U.data:[]].sort((K,Se)=>{const G=K?.created_at||K?.updated_at||0,J=Se?.created_at||Se?.updated_at||0;return new Date(J)-new Date(G)});if(s(te),M){const K=te.find(Se=>Se.id===M);f(K||null)}}catch(U){console.error(U),s([]),U.response?.status===403?H.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):H.error("Failed to fetch contacts. Please try again later.")}finally{i(!1)}},[f]),me=h.useCallback(async()=>{try{const M=await ie.get("/accounts/admin/fetch-all"),Y=[...Array.isArray(M.data)?M.data:[]].sort((te,K)=>(te?.name||"").localeCompare(K?.name||""));o(Y)}catch(M){console.error(M),o([]),M.response?.status===403&&H.warn("Unable to load accounts (permission denied).")}},[]),Be=h.useCallback(async()=>{try{const M=await ie.get("/users/all"),Y=[...Array.isArray(M.data)?M.data:[]].sort((te,K)=>Pm(te).localeCompare(Pm(K)));d(Y)}catch(M){console.error(M),d([]),M.response?.status===403&&H.warn("Unable to load users for assignment (permission denied).")}},[]),Pe=h.useCallback(async M=>{try{const U=await ie.get(`/activities/contact/${M}`);ve(U.data&&typeof U.data=="object"?U.data:{})}catch(U){console.error(U),U.response?.status===404&&(console.warn("No activities found for this account."),ve({}))}},[]);h.useEffect(()=>{Fe(),me(),Be()},[Fe,me,Be]);const we=h.useMemo(()=>{const M=new Map;l.forEach(Y=>{Y?.id&&Y?.name&&M.set(String(Y.id),Y.name)}),n.forEach(Y=>{Y?.account_id&&Y?.account?.name&&M.set(String(Y.account_id),Y.account.name)});const U=Array.from(M.entries()).sort((Y,te)=>Y[1].localeCompare(te[1])).map(([Y,te])=>({value:Y,label:te}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...U]},[l,n]),ne=h.useMemo(()=>{const M=z.trim().toLowerCase(),U=P.trim();return n.filter(Y=>{const te=[Y?.first_name,Y?.last_name,Y?.email,Y?.title,Y?.department,Y?.account?.name,Y?.account?.status,Y?.work_phone,Y?.mobile_phone_1,Y?.mobile_phone_2,Y?.assigned_contact?.first_name,Y?.assigned_contact?.last_name,Y?.contact_creator?.first_name,Y?.contact_creator?.last_name,Y?.notes,Vi(Y?.created_at),Vi(Y?.updated_at)],K=M===""||te.some(G=>G==null?!1:G.toString().toLowerCase().includes(M)),Se=U==="Filter by Accounts"||String(Y.account_id)===U;return K&&Se})},[n,z,P]),Le=Math.max(1,Math.ceil(ne.length/oe)||1);h.useEffect(()=>{de(1)},[z,P]),h.useEffect(()=>{de(M=>{const U=Math.max(1,Math.ceil(ne.length/oe)||1);return M>U?U:M})},[ne.length]);const pe=h.useMemo(()=>{const M=(V-1)*oe;return ne.slice(M,M+oe)},[ne,V]),le=()=>de(M=>Math.max(M-1,1)),ge=()=>de(M=>Math.min(M+1,Le)),fe=h.useMemo(()=>{if(!v||!_)return l;const M=n.find(Y=>Y.id===_);return!M||!M.account||l.some(Y=>Y.id===M.account.id)?l:[...l,M.account]},[l,v,_,n]),Te=h.useCallback(()=>{x(!1),w(!1),T(null),I(L_),C(!1),re(!1)},[]),Ye=M=>{M.target.id==="modalBackdrop"&&!b&&!A&&Te()},Ae=M=>{const{name:U,value:Y}=M.target;I(te=>({...te,[U]:Y}))},Ie=()=>{I(L_),w(!1),T(null),x(!0)},Je=async M=>{if(!M)return;const U=await ie.get(`/accounts/get/${M.account_id}`);I({first_name:M.first_name||"",last_name:M.last_name||"",account_id:U.data.id?U.data.id:"",title:M.title||"",department:M.department||"",email:M.email||"",work_phone:M.work_phone||"",mobile_phone_1:M.mobile_phone_1||"",mobile_phone_2:M.mobile_phone_2||"",notes:M.notes||"",assigned_to:M.assigned_to?String(M.assigned_to):""}),w(!0),T(M.id),x(!0),f(null)},he=M=>{if(!M)return;const U=Pm(M)||"this contact";S({title:"Delete Contact",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:U}),"? This action cannot be undone."]}),confirmLabel:"Delete Contact",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:M.id,name:U}})},[Me,re]=h.useState(!1),Qe=M=>{M.preventDefault(),re(!0);const U=E.first_name.trim(),Y=E.last_name.trim();if(!U||!Y){H.error("First name and last name are required.");return}if(!E.account_id){H.error("Account is required.");return}if(!E.assigned_to){H.error("Assigned To is required.");return}const K=E.email?.trim();if(!K){H.error("Email is required.");return}if(!K.includes("@")){H.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(K)){H.error("Please enter a valid email address.");return}const G={first_name:U,last_name:Y,account_id:Number(E.account_id),title:E.title?.trim()||null,department:E.department?.trim()||null,email:E.email?.trim().toLowerCase()||null,work_phone:E.work_phone?.trim()||null,mobile_phone_1:E.mobile_phone_1?.trim()||null,mobile_phone_2:E.mobile_phone_2?.trim()||null,notes:E.notes?.trim()||null,assigned_to:E.assigned_to?Number(E.assigned_to):null},J=v&&_?"update":"create",De=`${U} ${Y}`.trim();S({title:J==="create"?"Confirm New Contact":"Confirm Update",message:J==="create"?a.jsxs("span",{children:["Are you sure you want to add"," ",a.jsx("span",{className:"font-semibold",children:De})," to your contacts?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:De}),"?"]}),confirmLabel:J==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:J,payload:G,targetId:_||null,name:De}})},We=async()=>{if(!N?.action){S(null);return}const{action:M}=N,{type:U,payload:Y,targetId:te,name:K}=M;k(!0);try{if(U==="create"){C(!0),await ie.post("/contacts/admin",Y),H.success(`Contact "${K}" created successfully.`);const Se=u?.id||null;Te(),await Fe(Se)}else if(U==="update"){if(!te)throw new Error("Missing contact identifier for update.");C(!0),await ie.put(`/contacts/admin/${te}`,Y),H.success(`Contact "${K}" updated successfully.`);const Se=u?.id&&u.id===te?te:u?.id||null;Te(),await Fe(Se),u?.id===te&&f(null)}else if(U==="delete"){if(!te)throw new Error("Missing contact identifier for deletion.");const Se=u?.id;Q(te),await ie.delete(`/contacts/admin/${te}`),H.success(`Contact "${K}" deleted successfully.`),await Fe(Se&&Se!==te?Se:null),Se===te&&f(null)}}catch(Se){console.error(Se);const G=U==="create"?"Failed to create contact. Please review the details and try again.":U==="update"?"Failed to update contact. Please review the details and try again.":"Failed to delete contact. Please try again.",J=Se.response?.data?.detail||G;H.error(J)}finally{(U==="create"||U==="update")&&C(!1),U==="delete"&&Q(null),k(!1),S(null)}},dt=()=>{A||S(null)},ze=M=>{f(M),ee("Overview")},ce=()=>f(null),ye=M=>{M.target.id==="contactModalBackdrop"&&!A&&ce()},Ue=N?.action?.type==="delete"?N.action.targetId:null,et=u&&(B===u.id||Ue===u.id),lt=u&&B===u.id,Ee=u?a.jsx("div",{id:"contactModalBackdrop",onClick:ye,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:M=>M.stopPropagation(),children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),a.jsx("button",{onClick:ce,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:a.jsx(Ha,{size:25})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:Pm(u)||"Unnamed contact"})}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Je(u),disabled:A||N?.action?.type==="update"&&N.action.targetId===u.id,children:[a.jsx(nn,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>he(u),disabled:!!et,children:lt?"Deleting...":a.jsxs(a.Fragment,{children:[a.jsx(Wt,{className:"mr-2"}),"Delete"]})})]})]}),a.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:a.jsx("p",{className:"text-sm text-gray-500",children:u.account?.name||"No associated account"})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(M=>a.jsx("button",{onClick:()=>ee(M),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${F===M?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:M},M))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[F==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Contact Name:"}),a.jsx("p",{children:Pm(u)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Title:"}),a.jsx("p",{children:u.title||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:u.email?a.jsx("a",{href:`mailto:${u.email}`,className:"text-blue-600 hover:underline break-all",children:u.email}):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Department:"}),a.jsx("p",{children:u.department||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Work Phone:"}),a.jsx("p",{children:u.work_phone||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),a.jsx("p",{children:u.mobile_phone_1||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),a.jsx("p",{children:u.mobile_phone_2||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:u.assigned_contact?`${u.assigned_contact.first_name} ${u.assigned_contact.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:u.contact_creator?`${u.contact_creator.first_name} ${u.contact_creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:Vi(u.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:Vi(u.updated_at)||"N/A"})]})]})}),F==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:u.notes||"No notes available."})]})]}),F==="Activities"&&a.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[R.tasks&&R.tasks.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>je(X==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Gt,{className:"text-blue-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",R.tasks.length,")"]})]}),X==="tasks"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),X==="tasks"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:R.tasks.map((M,U)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/tasks",{state:{taskID:M.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-blue-600 mt-1",children:a.jsx(Gt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:M.subject||M.title||"Task"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:M.description||"No description"}),M.assigned_to&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",M.assigned_to.first_name," ",M.assigned_to.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Vi(M.due_date||M.created_at)})]},`task-${U}`))})]}),R.meetings&&R.meetings.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>je(X==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_t,{className:"text-green-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",R.meetings.length,")"]})]}),X==="meetings"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),X==="meetings"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:R.meetings.map((M,U)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/meetings",{state:{meetingID:M.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-green-600 mt-1",children:a.jsx(_t,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:M.subject||M.title||"Meeting"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:M.description||M.location||"No description"}),M.host&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",M.host.first_name," ",M.host.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Vi(M.start_time||M.created_at)})]},`meeting-${U}`))})]}),R.calls&&R.calls.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>je(X==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Et,{className:"text-purple-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",R.calls.length,")"]})]}),X==="calls"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),X==="calls"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:R.calls.map((M,U)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/calls",{state:{callID:M.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-purple-600 mt-1",children:a.jsx(Et,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:M.subject||M.title||"Call"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:M.direction||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Vi(M.call_time||M.created_at)})]},`call-${U}`))})]}),R.deals&&R.deals.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>je(X==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Kt,{className:"text-indigo-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",R.deals.length,")"]})]}),X==="deals"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),X==="deals"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:R.deals.map((M,U)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/deals",{state:{dealID:M.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-indigo-600 mt-1",children:a.jsx(Kt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[M.deal_id?M.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",M.name||M.title||"Deal"]}),a.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:M.stage||M.description||"No description"})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Vi(M.close_date||M.created_at)})]},`deal-${U}`))})]}),R.quotes&&R.quotes.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>je(X==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ga,{className:"text-orange-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",R.quotes.length,")"]})]}),X==="quotes"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),X==="quotes"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:R.quotes.map((M,U)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/quotes",{state:{quoteID:M.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-orange-600 mt-1",children:a.jsx(ga,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(M.quote_id?M.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:M.status||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Vi(M.presented_date)||""})]},`quote-${U}`))})]}),(!R||(!R.tasks||R.tasks.length===0)&&(!R.meetings||R.meetings.length===0)&&(!R.calls||R.calls.length===0)&&(!R.quotes||R.quotes.length===0)&&(!R.deals||R.deals.length===0)&&(!R.contacts||R.contacts.length===0))&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No related activities found for this account."})})]})]})]}),a.jsx("div",{className:"flex flex-col gap-4",children:a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Contact"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!u?.email){alert("No email address available");return}const M=encodeURIComponent(u.email),U=encodeURIComponent(""),Y=encodeURIComponent(""),te=`mailto:${M}?subject=${U}&body=${Y}`;window.location.href=te},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Ka,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Contact"}}}),children:[a.jsx(_t,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Contact"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Gt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,tt=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&a.jsx(zt,{message:"Loading contacts..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(La,{className:"mr-2 text-blue-600"})," Contacts Management"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{Ie(),re(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(da,{className:"mr-2"})," Add Contact"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search contacts",value:z,onChange:M=>$(M.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:P,onChange:M=>O(M.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:we.map(M=>a.jsx("option",{value:M.value,children:M.label},M.value??M.label))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),a.jsx("th",{className:"py-3 px-4",children:"Department"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Created"})]})}),a.jsx("tbody",{children:r?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"Loading contacts..."})}):ne.length>0?pe.map(M=>{const U=[{Icon:Ka,value:M.email,key:"email"},{Icon:Et,value:M.work_phone,key:"work_phone"},{Icon:zc,value:M.mobile_phone_1,key:"mobile_phone_1"},{Icon:zc,value:M.mobile_phone_2,key:"mobile_phone_2"}].filter(Y=>!!Y.value);return a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>{ze(M),Pe(M.id)},children:[a.jsxs("td",{className:"py-3 px-4 align-top",children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:Pm(M)||"--"}),a.jsx("div",{className:"text-xs text-gray-500",children:M.title||"No title"})]}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[a.jsx(ix,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{className:"break-words",children:M.account?.name||"--"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",children:U.length>0?a.jsx("div",{className:"space-y-1 text-gray-700",children:U.map(({Icon:Y,value:te,key:K})=>{const Se=wt.createElement(Y,{className:"text-gray-500 flex-shrink-0"});return a.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[Se,a.jsx("span",{children:te})]},K)})}):a.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[a.jsx(Kt,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{children:M.department||"--"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[a.jsx(Zt,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{children:M.assigned_contact?`${M.assigned_contact.first_name} ${M.assigned_contact.last_name}`:"Unassigned"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[a.jsx(_t,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{className:"text-xs",children:Vi(M.created_at)||"--"})]})})]},M.id)}):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"No contacts found."})})})]})}),a.jsx(Jt,{className:"mt-4",totalItems:ne.length,pageSize:oe,currentPage:V,onPrev:le,onNext:ge,onPageSizeChange:M=>{Z(M),de(1)},pageSizeOptions:[10,20,30,40,50],label:"contacts"})]}),be=p?a.jsx("div",{id:"modalBackdrop",onClick:Ye,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:M=>M.stopPropagation(),children:[a.jsx("button",{onClick:()=>{Te(),re(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:b||A,children:a.jsx(Vt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:v?"Edit Contact":"Add New Contact"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Qe,noValidate:!0,children:[a.jsx(bc,{label:"First Name",name:"first_name",value:E.first_name,onChange:Ae,placeholder:"First name",required:!0,isSubmitted:Me}),a.jsx(bc,{label:"Last Name",name:"last_name",value:E.last_name,onChange:Ae,placeholder:"Last name",required:!0,isSubmitted:Me}),a.jsx(M7,{label:"Account",value:E.account_id,onChange:M=>I(U=>({...U,account_id:M})),items:v?fe:l||[],getLabel:M=>M?.name??"",placeholder:"Search account...",disabled:b||(v?fe.length===0:l.length===0),required:!0,isSubmitted:Me}),a.jsx(M7,{label:"Assigned To",value:E.assigned_to,onChange:M=>I(U=>({...U,assigned_to:M})),items:c||[],getLabel:M=>`${M?.first_name??""} ${M?.last_name??""} (${M?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:Me,disabled:b||c.length===0}),a.jsx(bc,{label:"Title",name:"title",value:E.title,onChange:Ae,placeholder:"Job title",disabled:b}),a.jsx(bc,{label:"Department",name:"department",value:E.department,onChange:Ae,placeholder:"Department",disabled:b}),a.jsx(bc,{label:"Email",name:"email",type:"email",value:E.email,onChange:Ae,placeholder:"example@email.com",required:!0,isSubmitted:Me}),a.jsx(bc,{label:"Work Phone",name:"work_phone",value:E.work_phone,onChange:Ae,placeholder:"09xx xxx xxxx",disabled:b}),a.jsx(bc,{label:"Mobile Phone 1",name:"mobile_phone_1",value:E.mobile_phone_1,onChange:Ae,placeholder:"09xx xxx xxxx",disabled:b}),a.jsx(bc,{label:"Mobile Phone 2",name:"mobile_phone_2",value:E.mobile_phone_2,onChange:Ae,placeholder:"09xx xxx xxxx",disabled:b}),a.jsx(y6e,{label:"Notes",name:"notes",value:E.notes,onChange:Ae,placeholder:"Additional details...",rows:3,disabled:b,className:"md:col-span-2"}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:()=>{Te(),re(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:b||A,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:b||A,children:b?"Saving...":v?"Update Contact":"Save Contact"})]})]})]})}):null,Xe=N?a.jsx(b6e,{open:!0,title:N.title,message:N.message,confirmLabel:N.confirmLabel,cancelLabel:N.cancelLabel,variant:N.variant,onConfirm:We,onCancel:dt,loading:A}):null;return a.jsxs(a.Fragment,{children:[tt,Ee,be,Xe]})}function bc({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,isSubmitted:c=!1,className:d=""}){const u=c&&!n?.trim();return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${d}
        `})]})}function M7({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!n;return a.jsxs("div",{className:o,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(x6e,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:l,hasError:u})]})}function x6e({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,hasError:o=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",w=h.useMemo(()=>{const b=u.trim().toLowerCase();return(b?e.filter(N=>(s(N)||"").toLowerCase().includes(b)):e).slice(0,l)},[e,u,s,l]);return h.useEffect(()=>{const b=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),h.useEffect(()=>{c||f("")},[c]),a.jsxs("div",{ref:p,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:c?u:v,placeholder:r,onFocus:()=>!i&&d(!0),onChange:b=>{f(b.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${o?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:w.length>0?w.map(b=>{const C=String(b.id),N=s(b),S=String(t)===C;return a.jsx("button",{type:"button",onClick:()=>{n(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:N||"--"},C)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function y6e({label:e,name:t,value:n,onChange:s,placeholder:r,rows:i=3,disabled:l=!1,className:o=""}){return a.jsxs("div",{className:o,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:s,placeholder:r,rows:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function b6e({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}const P_=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function QQ({lead:e,onBack:t,fetchLeads:n,onEdit:s,onDelete:r,setSelectedLead:i,relatedActs:l}){const o=vt(),{leadID:c}=Eo(),[d,u]=h.useState(e||null),[f,p]=h.useState("Overview"),[x,v]=h.useState(""),w=d?.status?.toUpperCase()==="QUALIFIED",[b,C]=h.useState(null),[N,S]=h.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[A,k]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[_,T]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),E=async()=>{try{if(e){u(e),v(e.status||"New");return}if(!c)return;const O=await ie.get(`/leads/get/${c}`);u(O.data),v(O.data.status||"New"),S({name:O.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:O.data.territory?.id||null,assigned_to:O.data.assigned_to?.id||null,created_by:O.data.creator?.id||null}),k({last_name:O.data.last_name||"",first_name:O.data.first_name||"",account_id:null,title:O.data.title||"",department:O.data.department||"",email:O.data.email||"",work_phone:O.data.work_phone||"",mobile_phone_1:O.data.mobile_phone_1||"",mobile_phone_2:O.data.mobile_phone_2||"",notes:"",assigned_to:O.data.assigned_to?.id||null,created_by:O.data.creator?.id||null}),T({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:O.data.assigned_to?.id||null,created_by:O.data.creator?.id||null})}catch(O){console.error(O)}};h.useEffect(()=>{e?(u(e),v(e.status||"New")):c&&E()},[c,e]);const I=async()=>{try{if(x==="Converted"&&d?.status?.toUpperCase()!=="QUALIFIED"){H.error("Lead must be Qualified before it can be converted.");return}const O=await ie.put(`/leads/${d.id}/update/status`,{status:x});H.success("Lead status updated successfully");const B={...d,status:O.data.status};u(B),i&&i(B),n&&n(),t&&t()}catch(O){console.error(O),H.error("Failed to update lead status")}},z=async O=>{const B={...N,assigned_to:O.assigned_to?.id,billing_address:O.address,shipping_address:O.address,created_by:O.creator?.id,industry:null,name:O.company_name,phone_number:O.work_phone,status:"Prospect",territory_id:O.territory?.id,website:""};console.log("Account data: ",B),console.log("Contact data: ",A),console.log("Deal data: ",_),console.log("Lead data: ",O);try{const F=(await ie.post("/accounts/convertedLead",B)).data.id,ee={...A,account_id:F,assigned_to:O.assigned_to?.id,created_by:O.creator?.id,department:O.department,email:O.email,first_name:O.first_name,last_name:O.last_name,mobile_phone_1:O.mobile_phone_1,mobile_phone_2:O.mobile_phone_2,notes:O.notes,title:O.title,work_phone:O.work_phone},de=(await ie.post("/contacts/convertedLead",ee)).data.id,oe=()=>{switch(_.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},Z=_.amount&&_.amount!==""?parseFloat(_.amount):0,R={..._,account_id:F,assigned_to:O.assigned_to?.id,created_by:O.creator?.id,primary_contact_id:de,probability:oe(),stage:"Prospecting"},ve=await ie.post("/deals/convertedLead",R),X=await ie.put(`/leads/convert/${O.id}`);i&&i(null),n(),H.success("Lead converted successfully!"),t()}catch(Q){console.error("Error during conversion:",Q);const F=Q.response?.data?.detail||Q.message||"Failed to convert lead. Please try again.";H.error(F)}},$=O=>{switch((O||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},P=O=>O.toString().toLowerCase().replace(/\b\w/g,B=>B.toUpperCase());return d?a.jsx(a.Fragment,{children:a.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:a.jsxs("div",{className:"flex items-start justify-between w-full",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),a.jsx("button",{onClick:()=>{t?t():o(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:a.jsx(Ha,{size:25})})]})}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[d.first_name," ",d.last_name]}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${$(d.status)}`,children:P(d.status||"New")}),a.jsx("div",{className:"flex flex-col",children:a.jsx("button",{onClick:()=>z(d),disabled:!w,title:w?"Convert Lead":"Lead must be Qualified before converting",className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2
      ${w?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-400":"bg-gray-200 text-gray-400 cursor-not-allowed"}
    `,children:"Convert"})})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{type:"button",onClick:()=>{s&&d&&s(d)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[a.jsx(rn,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{type:"button",onClick:()=>{r&&d&&r(d)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[a.jsx(Wt,{className:"mr-2"}),"Delete"]})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-4 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(O=>a.jsx("button",{onClick:()=>p(O),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${f===O?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:O},O))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[f==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Name:"}),a.jsxs("p",{children:[d.first_name," ",d.last_name||"N/A"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Company:"}),a.jsx("p",{children:d.company_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Job Title:"}),a.jsx("p",{children:d.title||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Department:"}),a.jsx("p",{children:d.department||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:d.email||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Territory:"}),a.jsx("p",{children:d.territory?.name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:d.assigned_to?`${d.assigned_to.first_name} ${d.assigned_to.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:d.creator?`${d.creator.first_name} ${d.creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Work Phone:"}),a.jsx("p",{children:d.work_phone||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),a.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),a.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Source:"}),a.jsx("p",{children:d.source||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Address:"}),a.jsx("p",{children:d.address||"N/A"})]})]})}),f==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]})]}),f==="Activities"&&a.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[l.tasks&&l.tasks.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>C(b==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Gt,{className:"text-blue-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",l.tasks.length,")"]})]}),b==="tasks"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),b==="tasks"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:l.tasks.map((O,B)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>o("/manager/tasks",{state:{taskID:O.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-blue-600 mt-1",children:a.jsx(Gt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:O.subject||O.title||"Task"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:O.description||"No description"}),O.assigned_to&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned:"," ",O.assigned_to.first_name," ",O.assigned_to.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:P_(O.due_date||O.created_at)})]},`task-${B}`))})]}),l.meetings&&l.meetings.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>C(b==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_t,{className:"text-green-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",l.meetings.length,")"]})]}),b==="meetings"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),b==="meetings"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:l.meetings.map((O,B)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>o("/manager/meetings",{state:{meetingID:O.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-green-600 mt-1",children:a.jsx(_t,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:O.subject||O.title||"Meeting"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:O.description||O.location||"No description"}),O.host&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",O.host.first_name," ",O.host.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:P_(O.start_time||O.created_at)})]},`meeting-${B}`))})]}),l.calls&&l.calls.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>C(b==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Et,{className:"text-purple-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",l.calls.length,")"]})]}),b==="calls"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),b==="calls"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:l.calls.map((O,B)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>o("/manager/calls",{state:{callID:O.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-purple-600 mt-1",children:a.jsx(Et,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:O.subject||O.title||"Call"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:O.direction||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:P_(O.call_time||O.created_at)})]},`call-${B}`))})]}),(!l||(!l.tasks||l.tasks.length===0)&&(!l.meetings||l.meetings.length===0)&&(!l.calls||l.calls.length===0)&&(!l.quotes||l.quotes.length===0)&&(!l.deals||l.deals.length===0)&&(!l.contacts||l.contacts.length===0))&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No related activities found for this account."})})]})]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>{d&&o("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:d.title?`Call regarding ${d.title}`:`Call with ${d.first_name} ${d.last_name}`,relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assigned_to:d.assigned_to?.id?String(d.assigned_to.id):"",direction:"Outgoing",status:"Planned"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const O=encodeURIComponent(d.email),B=encodeURIComponent(""),Q=encodeURIComponent(""),F=`mailto:${O}?subject=${B}&body=${Q}`;window.location.href=F},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Ka,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{d&&o("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:d.title?`Meeting regarding ${d.title}`:`Meeting with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assigned_to:d.assigned_to?.id?String(d.assigned_to.id):"",status:"Planned"}}})},children:[a.jsx(_t,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>{d&&o("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:d.title?`Follow up on ${d.title}`:`Follow up with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assigned_to:d.assigned_to?.id?String(d.assigned_to.id):"",priority:"MEDIUM",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Gt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:x,onChange:O=>v(O.target.value),children:[a.jsx("option",{value:"New",children:"New"}),a.jsx("option",{value:"Contacted",children:"Contacted"}),a.jsx("option",{value:"Qualified",children:"Qualified"}),d?.status?.toUpperCase()==="QUALIFIED"&&a.jsx("option",{value:"Converted",children:"Converted"}),a.jsx("option",{value:"Lost",children:"Lost"})]}),a.jsx("button",{onClick:I,disabled:x===d.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${x===d.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const v6e=Lf.all(),D_=v6e.map((e,t)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${t}`})),w6e=e=>e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()),N6e=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},O_={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function j6e(){const e=vt(),{leadID:t}=Eo();ks();const[n,s]=h.useState(null),[r,i]=h.useState(!1),[l,o]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(!1),[v,w]=h.useState(""),[b,C]=h.useState("Filter by Status"),[N,S]=h.useState(1),[A,k]=h.useState(10),[_,T]=h.useState(O_),[E,I]=h.useState(!1),[z,$]=h.useState(null),[P,O]=h.useState(!1),[B,Q]=h.useState(null),[F,ee]=h.useState(!1),[V,de]=h.useState({});h.useRef(null);const[oe,Z]=h.useState(!1),[R,ve]=h.useState(null),[X,je]=h.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[Ne,Oe]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[Fe,me]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});h.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const Be=async()=>{try{const be=await ie.get("/leads/getUsers");o(be.data)}catch(be){console.error(`Error fetching users: ${be}`)}},Pe=async()=>{x(!0);try{const be=await ie.get("/leads/admin/getLeads");f(be.data),console.log(be.data)}catch(be){console.error(`Error fetching leads: ${be}`)}finally{x(!1)}};h.useEffect(()=>{Be(),Pe()},[]),h.useEffect(()=>{if(t&&u.length>0&&!r&&!E){const be=u.find(Xe=>Xe.id===Number(t));be&&s(be)}else!t&&!n&&s(null)},[t,u,r,E]),h.useEffect(()=>{if(R){const Xe=(Y=>{if(!Y)return{code:"+63",number:""};const te=Y.match(/^(\+\d+)\s(.+)$/);if(te)return{code:te[1],number:te[2]};if(Y.startsWith("+")){const K=Y.match(/^(\+\d{1,3})/);if(K)return{code:K[1],number:Y.substring(K[1].length).trim()}}return{code:"+63",number:Y}})(R.work_phone),M=[];R.work_phone&&M.push(`Work: ${R.work_phone}`),R.mobile_phone_1&&M.push(`Mobile 1: ${R.mobile_phone_1}`),R.mobile_phone_2&&M.push(`Mobile 2: ${R.mobile_phone_2}`);const U=M.length>0?M.join(" | "):"";je({name:R.company_name||"",website:"",countryCode:Xe.code,phone_number:Xe.number,combinedPhoneNumbers:U,billing_address:R.address||"",shipping_address:R.address||"",industry:"",status:"Prospect",territory_id:R.assigned_to?.territory?.id||null,assigned_to:R.assigned_to?.id||null,created_by:R.creator?.id||null}),Oe({last_name:R.last_name||"",first_name:R.first_name||"",account_id:null,title:R.title||"",department:R.department||"",email:R.email||"",work_phone:R.work_phone||"",mobile_phone_1:R.mobile_phone_1||"",mobile_phone_2:R.mobile_phone_2||"",notes:R.notes||"",assigned_to:R.assigned_to?.id||null,created_by:R.creator?.id||null}),me({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:R.assigned_to?.id||null,created_by:R.creator?.id||null})}},[R]);const we=be=>w(be.target.value),ne=h.useMemo(()=>{const be=v.trim().toLowerCase(),Xe=b.trim().toUpperCase();return u.filter(M=>{const U=[M?.first_name,M?.last_name,M?.company_name,M?.title,M?.email,M?.work_phone,M?.assigned_to?`${M.assigned_to.first_name} ${M.assigned_to.last_name}`:""],Y=be===""||U.some(K=>K==null||K===""?!1:K.toString().toLowerCase().includes(be));let te=!1;return Xe==="FILTER BY STATUS"?te=(M.status?M.status.toUpperCase():"")!=="CONVERTED":te=(M.status?M.status.toUpperCase():"")===Xe,Y&&te})},[u,v,b]),Le=Math.max(1,Math.ceil(ne.length/A)||1);h.useEffect(()=>{S(1)},[v,b]),h.useEffect(()=>{S(be=>{const Xe=Math.max(1,Math.ceil(ne.length/A)||1);return be>Xe?Xe:be})},[ne.length]);const pe=h.useMemo(()=>{const be=(N-1)*A;return ne.slice(be,be+A)},[ne,N]),le=()=>S(be=>Math.max(be-1,1)),ge=()=>S(be=>Math.min(be+1,Le)),fe=h.useCallback(async be=>{try{const Xe=await ie.get(`/activities/lead/${be}`);de(Xe.data&&typeof Xe.data=="object"?Xe.data:{})}catch(Xe){console.error(Xe),Xe.response?.status===404&&(console.warn("No activities found for this account."),de({}))}},[]),Te=be=>{s(be),fe(be.id)},Ye=()=>{s(null),t&&e("/admin/leads",{replace:!0})},Ae=()=>{i(!1),T(O_),I(!1),$(null),O(!1),d(null),sessionStorage.removeItem("editLeadData")},Ie=be=>{be.target.id==="modalBackdrop"&&Ae()},Je=()=>{T(O_),I(!1),$(null),d(null),i(!0)},he=be=>{if(!be){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",be),console.log("Current state - leadID:",t,"selectedLead:",n,"showModal:",r);const Xe=K=>{if(!K)return{code:"+63",number:""};const Se=K.match(/^(\+\d+)\s(.+)$/);return Se?{code:Se[1],number:Se[2]}:{code:"+63",number:K}},M=Xe(be.work_phone),U=Xe(be.mobile_phone_1),Y=Xe(be.mobile_phone_2);let te="";if(be.assigned_to){te=String(be.assigned_to.id);const K=l?.find(Se=>Se.id===be.assigned_to.id);d(K)}T({first_name:be.first_name||"",last_name:be.last_name||"",company_name:be.company_name||"",title:be.title||"",department:be.department||"",email:be.email||"",work_ccode:M.code,work_phone:M.number,m1_ccode:U.code,mobile_phone_1:U.number,m2_ccode:Y.code,mobile_phone_2:Y.number,address:be.address||"",notes:be.notes||"",source:be.source||"",territory_id:be.territory?.id||null,lead_owner:te,status:be.status||"New"}),I(!0),$(be.id),n?(console.log("Coming from detail view - closing detail modal and showing edit form"),s(null),i(!0)):(console.log("Already in list view - showing modal"),i(!0))},Me=be=>{if(!be){console.error("handleDelete: lead is null or undefined");return}console.log("handleDelete called with lead:",be);const Xe=`${be.first_name} ${be.last_name}`||"this lead";Q({title:"Delete Lead",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:Xe}),"? This action cannot be undone."]}),confirmLabel:"Delete Lead",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:be.id,name:Xe}})},re=be=>{const{name:Xe,value:M}=be.target;if(T(U=>({...U,[Xe]:M})),Xe==="lead_owner"){const U=l.find(Y=>Y.id===parseInt(M));d(U)}},[Qe,We]=h.useState(!1),dt=be=>{if(be.preventDefault(),We(!0),!_.last_name?.trim()){H.error("Last name is required.");return}if(!_.company_name?.trim()){H.error("Company is required.");return}if(!_.email?.trim()){H.error("Email is required.");return}if(!_.email.includes("@")){H.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(_.email)){H.error("Please enter a valid email address with a dot in the domain.");return}if(!_.lead_owner){H.error("Please assign a lead owner.");return}const M={..._,territory_id:_.territory_id?parseInt(_.territory_id):null,lead_owner:parseInt(_.lead_owner),work_phone:`${_.work_ccode} ${_.work_phone}`,mobile_phone_1:`${_.m1_ccode} ${_.mobile_phone_1}`,mobile_phone_2:`${_.m2_ccode} ${_.mobile_phone_2}`},U=E&&z?"update":"create",Y=`${_.first_name} ${_.last_name}`;Q({title:U==="create"?"Confirm New Lead":"Confirm Update",message:U==="create"?a.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",a.jsx("span",{className:"font-semibold",children:Y}),"?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:Y}),"?"]}),confirmLabel:U==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:U,payload:M,targetId:z||null,name:Y}})},ze=async()=>{if(!B?.action){Q(null);return}const{action:be}=B,{type:Xe,payload:M,targetId:U,name:Y,lead:te}=be;console.log(M),ee(!0);try{if(Xe==="create")O(!0),await ie.post("/leads/create",M),H.success(`Lead "${Y}" created successfully.`),Ae(),await Pe();else if(Xe==="update"){if(!U)throw new Error("Missing lead identifier for update.");O(!0);const K=await ie.put(`/leads/${U}`,M);H.success(`Lead "${Y}" updated successfully.`),n&&n.id===U&&s(null),Ae(),await Pe()}else if(Xe==="delete"){if(!U)throw new Error("Missing lead identifier for deletion.");await ie.delete(`/leads/${U}`),H.success(`Lead "${Y}" deleted successfully.`),n?.id===U&&s(null),await Pe()}}catch(K){console.error(K);const Se=Xe==="create"?"Failed to create lead. Please review the details and try again.":Xe==="update"?"Failed to update lead. Please review the details and try again.":"Failed to delete lead. Please try again.",G=K.response?.data?.detail||Se;H.error(G)}finally{(Xe==="create"||Xe==="update")&&O(!1),Xe!=="edit"&&(ee(!1),Q(null))}},ce=()=>{F||Q(null)},ye=u.filter(be=>be.status==="New").length,Ue=u.filter(be=>be.status==="Contacted").length,et=u.filter(be=>be.status==="Qualified").length,lt=u.filter(be=>be.status==="Converted").length,Ee=u.filter(be=>be.status==="Lost").length,tt=[{title:"New",value:ye,icon:Ba,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:Ue,icon:Et,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:et,icon:xn,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:lt,icon:ko,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:Ee,icon:Ts,color:"text-red-600",bgColor:"bg-red-100"}];return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[p&&a.jsx(zt,{message:"Loading leads..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(Ba,{className:"mr-2 text-blue-600"}),"Leads"]}),a.jsx("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{Je(),We(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(da,{className:"mr-2"})," Add Lead"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:tt.map(be=>a.jsx(S6e,{...be},be.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search leads",value:v,onChange:we,className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:b,onChange:be=>C(be.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),a.jsx("option",{value:"New",children:"New"}),a.jsx("option",{value:"Contacted",children:"Contacted"}),a.jsx("option",{value:"Qualified",children:"Qualified"}),a.jsx("option",{value:"Converted",children:"Converted"}),a.jsx("option",{value:"Lost",children:"Lost"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Name"}),a.jsx("th",{className:"py-3 px-4",children:"Company"}),a.jsx("th",{className:"py-3 px-4",children:"Job Title"}),a.jsx("th",{className:"py-3 px-4",children:"Email"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),a.jsx("tbody",{children:ne.length>0?pe.map(be=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>Te(be),children:[a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[be.first_name," ",be.last_name]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:be.company_name||"--"})}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:be.title||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:be.email||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:be.assigned_to?`${be.assigned_to.first_name} ${be.assigned_to.last_name}`:"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${N6e(be.status||"New")}`,children:w6e(be.status||"New")})})]},be.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No leads found."})})})]})}),a.jsx(Jt,{className:"mt-4",totalItems:ne.length,pageSize:A,currentPage:N,onPrev:le,onNext:ge,onPageSizeChange:be=>{k(be),S(1)},pageSizeOptions:[10,20,30,40,50],label:"leads"}),r&&a.jsx("div",{id:"modalBackdrop",onClick:Ie,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:be=>be.stopPropagation(),children:[a.jsx("button",{onClick:()=>{Ae(),We(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(Vt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:E?"Edit Lead":"Add New Lead"}),a.jsxs("form",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),a.jsx("input",{type:"text",name:"first_name",value:_.first_name,onChange:re,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Last Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"Smith",name:"last_name",value:_.last_name,onChange:re,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                      ${Qe&&!_.last_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Company ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:_.company_name,onChange:re,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Qe&&!_.company_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Job Title",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:_.title,onChange:re,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Qe&&!_.title?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),a.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:_.department,onChange:re,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Email",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:_.email,onChange:re,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Qe&&!_.email?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"work_ccode",value:_.work_ccode,onChange:re,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:D_.map(be=>a.jsx("option",{value:be.code,children:be.code},be.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:_.work_phone,onChange:re,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"m1_ccode",value:_.m1_ccode,onChange:re,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:D_.map(be=>a.jsx("option",{value:be.code,children:be.code},be.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:_.mobile_phone_1,onChange:re,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"m2_ccode",value:_.m2_ccode,onChange:re,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:D_.map(be=>a.jsx("option",{value:be.code,children:be.code},be.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:_.mobile_phone_2,onChange:re,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),a.jsx("input",{type:"text",name:"address",value:_.address,onChange:re,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("div",{className:`w-full rounded-lg ${Qe&&!_.lead_owner?"border border-red-400":"border border-gray-300"}`,children:a.jsx(_6e,{items:Array.isArray(l)?l:[],value:_.lead_owner??"",placeholder:"Search a user...",getLabel:be=>`${be.first_name} ${be.last_name}`,onChange:be=>{const Xe=l.find(U=>String(U.id)===String(be));d(Xe);let M=null;Xe&&Xe.assigned_territory&&Xe.assigned_territory.length===1&&(M=Xe.assigned_territory[0].id),T(U=>({...U,lead_owner:be,territory_id:M}))}})})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),a.jsxs("select",{name:"territory_id",value:_.territory_id||"",onChange:re,disabled:!c||!c.assigned_territory||c.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[a.jsx("option",{value:"",disabled:!0,children:c?c.assigned_territory&&c.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),c&&c.assigned_territory&&c.assigned_territory.map(be=>a.jsx("option",{value:be.id,children:be.name},be.id))]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),a.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:_.source,onChange:re,children:[a.jsx("option",{value:"",disabled:!0,children:"Select Source"}),a.jsx("option",{value:"Website",children:"Website"}),a.jsx("option",{value:"Referral",children:"Referral"}),a.jsx("option",{value:"Cold call",children:"Cold call"}),a.jsx("option",{value:"Event",children:"Event"}),a.jsx("option",{value:"Other",children:"Other"})]})]}),a.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),a.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:_.notes,onChange:re,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("button",{type:"button",onClick:()=>{Ae(),We(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:P||F,children:"Cancel"}),a.jsx("button",{type:"submit",onClick:dt,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:P||F,children:P||F?"Processing...":E?"Update Lead":"Save Lead"})]})]})]})}),B&&a.jsx(C6e,{open:!0,title:B.title,message:B.message,confirmLabel:B.confirmLabel,cancelLabel:B.cancelLabel,variant:B.variant,onConfirm:ze,onCancel:ce,loading:F}),n&&!r&&!E&&a.jsx(QQ,{relatedActs:V,lead:n,onBack:Ye,fetchLeads:Pe,setSelectedLead:s,onEdit:he,onDelete:Me})]})}function C6e({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}function S6e({icon:e,title:t,value:n,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function _6e({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200}){const[o,c]=h.useState(!1),[d,u]=h.useState(""),f=h.useRef(null),p=e.find(w=>String(w.id)===String(t)),x=p?s(p):"",v=h.useMemo(()=>{const w=d.trim().toLowerCase();return(w?e.filter(C=>(s(C)||"").toLowerCase().includes(w)):e).slice(0,l)},[e,d,s,l]);return h.useEffect(()=>{const w=b=>{f.current&&!f.current.contains(b.target)&&c(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{o||u("")},[o]),a.jsxs("div",{ref:f,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:o?d:x,placeholder:r,onFocus:()=>!i&&c(!0),onChange:w=>{u(w.target.value),o||c(!0)},className:"w-full rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),o&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:v.length>0?v.map(w=>{const b=String(w.id),C=s(w),N=String(t)===b;return a.jsx("button",{type:"button",onClick:()=>{n(b),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${N?"bg-blue-50":""}`,children:C||"--"},b)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}const $y={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},Hn=({label:e,value:t,name:n,className:s=""})=>a.jsxs("div",{className:`flex flex-col ${s}`,children:[a.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),a.jsx("input",{type:"text",name:n,defaultValue:t,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),A6e=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(Hn,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),a.jsx(Hn,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),a.jsx(Hn,{label:"Industry",name:"industry",value:e.industry})]}),a.jsx(Hn,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),a.jsx(Hn,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),E6e=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(Hn,{label:"First Name",name:"firstName",value:e.firstName}),a.jsx(Hn,{label:"Last Name",name:"lastName",value:e.lastName}),a.jsx(Hn,{label:"Department",name:"department",value:e.department}),a.jsx(Hn,{label:"Title",name:"title",value:e.title}),a.jsx(Hn,{label:"Work Phone",name:"workPhone",value:e.workPhone}),a.jsx(Hn,{label:"Email",name:"email",value:e.email}),a.jsx(Hn,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),a.jsx(Hn,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),T6e=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(Hn,{label:"Deal Name",name:"dealName",value:e.dealName}),a.jsxs("div",{className:"flex",children:[a.jsx(Hn,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),a.jsx("div",{className:"flex flex-col justify-end ml-1",children:a.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),a.jsx(Hn,{label:"Stage",name:"stage",value:e.stage}),a.jsx(Hn,{label:"Territory",name:"territory",value:e.territory})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(Hn,{label:"Description",name:"description",value:e.description}),a.jsx(Hn,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function k6e({isOpen:e,onClose:t}){const[n,s]=h.useState(1),r=3;if(!e)return null;const i=()=>{n<r?s(n+1):(t(),s(1))},l=()=>{n>1&&s(n-1)},o=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],c=()=>{switch(n){case 1:return a.jsx(A6e,{data:$y});case 2:return a.jsx(E6e,{data:$y});case 3:return a.jsx(T6e,{data:$y});default:return null}};return a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:$y.accountName})]}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:a.jsx(hN,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:o.map(d=>a.jsx("button",{onClick:()=>s(d.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${n===d.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:d.name},d.id))}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c()}),a.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[n>1&&a.jsx("button",{onClick:l,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),n<r?a.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):a.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}function L6e(){h.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const e=vt(),t=Yt(),[n,s]=h.useState(""),[r,i]=h.useState("Filter by Stage"),[l,o]=h.useState("Filter by Owner"),[c,d]=h.useState(null),[u,f]=h.useState("Overview"),[p,x]=h.useState(!1),[v,w]=h.useState(null),[b,C]=h.useState(!1),[N,S]=h.useState(1),[A,k]=h.useState(10),[_,T]=h.useState(!1),[E,I]=h.useState(null),[z,$]=h.useState(!1),[P,O]=h.useState(!1),[B,Q]=h.useState(null),[F,ee]=h.useState([]),[V,de]=h.useState([]),[oe,Z]=h.useState([]),[R,ve]=h.useState({}),[X,je]=h.useState(null);h.useEffect(()=>{const U=t.state,Y=U?.dealID;if(Y&&!U?.openDealModal){je(Y),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(X&&v?.length>0&&!b){const U=v.find(Y=>Y.id===X);U?d(U):H.error("Deal not found."),je(null)}},[X,v,b]);const[Ne,Oe]=h.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),[Fe,me]=h.useState(null),[Be,Pe]=h.useState(null),we={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST","Closed Cancelled Stage":"CLOSED_CANCELLED"},ne=U=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost",CLOSED_CANCELLED:"Closed Cancelled"})[U]||U||"--",Le=U=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700",CLOSED_CANCELLED:"bg-red-100 text-red-700"})[U]||"bg-gray-100 text-gray-700",pe=h.useCallback(async U=>{try{const Y=await ie.get(`/activities/deal/${U}`);ve(Y.data&&typeof Y.data=="object"?Y.data:{})}catch(Y){console.error(Y),Y.response?.status===404&&(console.warn("No activities found for this account."),ve({}))}},[]),le=h.useMemo(()=>{const U=n.trim().toLowerCase(),Y=r.trim(),te=l.trim();return(v??[]).filter(K=>{const Se=[K?.name,K?.description,K?.account?.name,K?.contact?.first_name,K?.contact?.last_name,K?.assigned_deals?.first_name,K?.assigned_deals?.last_name],G=U===""||Se.some(Ve=>Ve==null||Ve===""?!1:Ve.toString().toLowerCase().includes(U)),J=Y==="Filter by Stage"||Y===""||K.stage===we[Y]||K.stage===Y,De=te==="Filter by Owner"||te===""||`${K.assigned_deals?.first_name||""} ${K.assigned_deals?.last_name||""}`.trim().toLowerCase()===te.toLowerCase();return G&&J&&De})},[v,n,r,l]),ge=Math.max(1,Math.ceil(le.length/A)||1);h.useEffect(()=>{S(1)},[n,r,l]),h.useEffect(()=>{S(U=>{const Y=Math.max(1,Math.ceil(le.length/A)||1);return U>Y?Y:U})},[le.length]);const fe=h.useMemo(()=>{const U=(N-1)*A;return le.slice(U,U+A)},[le,N]),Te=()=>S(U=>Math.max(U-1,1)),Ye=()=>S(U=>Math.min(U+1,ge)),Ae=()=>{Oe({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),O(!1),Q(null),x(!0)},Ie=async()=>{C(!0);try{const U=await ie.get("/deals/admin/fetch-all"),te=[...Array.isArray(U.data)?U.data:[]].sort((K,Se)=>{const G=K?.created_at?new Date(K.created_at).getTime():0;return(Se?.created_at?new Date(Se.created_at).getTime():0)-G});w(te)}catch(U){U.response&&U.response.status===403?H.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):H.error("Failed to fetch deals. Please try again later."),console.error(U)}finally{C(!1)}},Je=async()=>{try{const U=await ie.get("/accounts/admin/fetch-all");ee(Array.isArray(U.data)?U.data:[])}catch(U){console.error(U),U.response?.status===403&&H.warn("Unable to load accounts (permission denied).")}},he=async()=>{try{const U=await ie.get("/contacts/admin/fetch-all");de(Array.isArray(U.data)?U.data:[])}catch(U){console.error(U),U.response?.status===403&&H.warn("Unable to load contacts (permission denied).")}},Me=async()=>{try{const U=await ie.get("/users/all");Z(Array.isArray(U.data)?U.data:[])}catch(U){console.error(U),U.response?.status===403&&H.warn("Unable to load users (permission denied).")}};h.useEffect(()=>{Ie(),Je(),he(),Me()},[]);const re=async U=>{U&&(Oe({id:U.id||null,name:U.name||"",account_id:U.account_id?.toString()||"",primary_contact_id:U.primary_contact_id?.toString()||"",stage:U.stage||"PROPOSAL",amount:U.amount?.toString()||"",close_date:U.close_date?new Date(U.close_date).toISOString().split("T")[0]:"",assigned_to:U.assigned_to?.toString()||"",currency:U.currency||"PHP",description:U.description||""}),me(U.account||null),Pe(U.contact||null),O(!0),Q(U.id),d(null),x(!0))},Qe=async(U=!1)=>{try{const Y=await ie.get("/deals/admin/fetch-all"),K=[...Array.isArray(Y.data)?Y.data:[]].sort((Se,G)=>{const J=Se?.created_at?new Date(Se.created_at).getTime():0;return(G?.created_at?new Date(G.created_at).getTime():0)-J});if(w(K),!U&&c&&c.id){const Se=K.find(G=>G.id===c.id);Se&&d({...Se})}}catch(Y){console.error("Failed to refresh deal data:",Y),await Ie()}},We=U=>{const Y=U.name.trim();if(!Y){H.error("Deal name is required.");return}if(!U.account_id){H.error("Account is required.");return}const te=P&&B?"update":"create",K=Y;I({title:te==="create"?"Confirm New Deal":"Confirm Update",message:te==="create"?a.jsxs("span",{children:["Are you sure you want to create"," ",a.jsx("span",{className:"font-semibold",children:K}),"?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:K}),"?"]}),confirmLabel:te==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:te,formData:U,targetId:B||null,name:K}})},dt=U=>{if(!U)return;const Y=U.name||"this deal";I({title:"Delete Deal",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:Y}),"? This action cannot be undone."]}),confirmLabel:"Delete Deal",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:U.id,name:Y}})},ze=async()=>{if(!E?.action){I(null);return}const{action:U}=E,{type:Y,formData:te,targetId:K,name:Se}=U;$(!0);try{if(Y==="create"){T(!0);const G={name:te.name.trim(),account_id:parseInt(te.account_id),primary_contact_id:te.primary_contact_id?parseInt(te.primary_contact_id):null,stage:te.stage,amount:te.amount?parseFloat(te.amount):null,currency:te.currency||"PHP",close_date:te.close_date||null,description:te.description||null,assigned_to:te.assigned_to?parseInt(te.assigned_to):null};await ie.post("/deals/admin/create",G),H.success(`Deal "${Se}" created successfully.`),x(!1),await Ie()}else if(Y==="update"){if(!K)throw new Error("Missing deal identifier for update.");T(!0);const G={};te.name!==void 0&&(G.name=te.name.trim()),te.account_id!==void 0&&te.account_id!==""&&(G.account_id=parseInt(te.account_id)),te.primary_contact_id!==void 0&&(G.primary_contact_id=te.primary_contact_id?parseInt(te.primary_contact_id):null),te.stage!==void 0&&(G.stage=te.stage),te.amount!==void 0&&te.amount!==""&&(G.amount=parseFloat(te.amount)),te.currency!==void 0&&(G.currency=te.currency),te.close_date!==void 0&&(G.close_date=te.close_date||null),te.description!==void 0&&(G.description=te.description||null),te.assigned_to!==void 0&&(G.assigned_to=te.assigned_to?parseInt(te.assigned_to):null),await ie.put(`/deals/admin/${K}`,G),H.success(`Deal "${Se}" updated successfully.`),x(!1),await Ie()}else if(Y==="delete"){if(!K)throw new Error("Missing deal identifier for deletion.");await ie.delete(`/deals/admin/${K}`),H.success(`Deal "${Se}" deleted successfully.`),c?.id===K&&d(null),await Ie()}}catch(G){console.error(G);const J=Y==="create"?"Failed to create deal. Please review the details and try again.":Y==="update"?"Failed to update deal. Please review the details and try again.":"Failed to delete deal. Please try again.",De=G.response?.data?.detail||J;H.error(De)}finally{(Y==="create"||Y==="update")&&T(!1),$(!1),I(null)}},ce=()=>{z||I(null)},ye=()=>{x(!1),Oe({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),me(null),Pe(null),O(!1),Q(null),T(!1)},Ue=(v??[]).filter(U=>U.stage==="PROSPECTING").length,et=(v??[]).filter(U=>U.stage==="QUALIFICATION").length,lt=(v??[]).filter(U=>U.stage==="PROPOSAL").length,Ee=(v??[]).filter(U=>U.stage==="NEGOTIATION").length,tt=(v??[]).filter(U=>U.stage==="CLOSED_WON").length,be=(v??[]).filter(U=>U.stage==="CLOSED_LOST").length,Xe=(v??[]).filter(U=>U.stage==="CLOSED_CANCELLED").length,M=[{title:"Prospecting",value:Ue,icon:ow,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:et,icon:nn,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:lt,icon:Kt,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:Ee,icon:Vd,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:tt,icon:xn,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:be,icon:Ts,color:"text-red-600",bgColor:"bg-red-100"},{title:"Closed Cancelled",value:Xe,icon:Ts,color:"text-gray-600",bgColor:"bg-gray-100"}];return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[b&&a.jsx(zt,{message:"Loading deals..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(Kt,{className:"mr-2 text-blue-600"}),"Deals"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:Ae,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(da,{className:"mr-2"})," Add Deal"]})})]}),a.jsx("div",{className:"grid grid-cols-1 p-2 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden",children:M.map(U=>a.jsx(D6e,{...U},U.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search deals",value:n,onChange:U=>s(U.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[a.jsxs("select",{value:r,onChange:U=>i(U.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),a.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),a.jsx("option",{value:"Qualification Stage",children:"Qualification"}),a.jsx("option",{value:"Proposal Stage",children:"Proposal"}),a.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),a.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),a.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"}),a.jsx("option",{value:"Closed Cancelled Stage",children:"Closed Cancelled"})]}),a.jsxs("select",{value:l,onChange:U=>o(U.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((v??[]).map(U=>`${U.assigned_deals?.first_name} ${U.assigned_deals?.last_name}`))].map((U,Y)=>a.jsx("option",{value:U,children:U},Y))]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Stage"}),a.jsx("th",{className:"py-3 px-4",children:"Value"}),a.jsx("th",{className:"py-3 px-4",children:"Close Date"}),a.jsx("th",{className:"py-3 px-4",children:"Owner"})]})}),a.jsx("tbody",{children:le.length>0?fe.map(U=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{d({...U}),pe(U.id)},children:[a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:U.deal_id?U.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:U.name}),a.jsx("div",{className:"text-gray-500 text-xs break-all",children:U.description||"--"})]})}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:U.account?.name||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:U.contact?.first_name&&U.contact?.last_name?`${U.contact.first_name} ${U.contact.last_name}`:U.contact?.first_name||U.contact?.last_name||"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Le(U.stage)}`,children:ne(U.stage)})}),a.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",U.amount?.toLocaleString()||"0"]}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:U.close_date||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:U.assigned_deals?.first_name&&U.assigned_deals?.last_name?`${U.assigned_deals.first_name} ${U.assigned_deals.last_name}`:U.assigned_deals?.first_name||U.assigned_deals?.last_name||"--"})]},U.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No deals found."})})})]})}),a.jsx(Jt,{className:"mt-4",totalItems:le.length,pageSize:A,currentPage:N,onPrev:Te,onNext:Ye,onPageSizeChange:U=>{k(U),S(1)},pageSizeOptions:[10,20,30,40,50],label:"deals"}),p&&a.jsx(O6e,{onClose:ye,formData:Ne,setFormData:Oe,isEditing:P,onSubmit:We,isSubmitting:_||z,accounts:F,contacts:V,users:oe,currentAccount:Fe,currentContact:Be}),c&&a.jsx(kx,{relatedActs:R,selectedDeal:c,show:!!c,onClose:()=>d(null),activeTab:u,setActiveTab:f,onEdit:re,onDelete:dt,onStatusUpdate:Qe}),E&&a.jsx(P6e,{open:!0,title:E.title,message:E.message,confirmLabel:E.confirmLabel,cancelLabel:E.cancelLabel,variant:E.variant,onConfirm:ze,onCancel:ce,loading:z})]})}function P6e({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}function D6e({icon:e,title:t,value:n,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function O6e({onClose:e,formData:t,setFormData:n,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,accounts:l=[],contacts:o=[],users:c=[],currentAccount:d=null,currentContact:u=null}){const[f,p]=h.useState(!1),x=b=>{if(b.preventDefault(),p(!0),!t.name?.trim()){H.error("Deal name is required.");return}const C=Number(t.amount);if(!t.amount||isNaN(C)||C<=0){H.error("Amount must be a number greater than 0.");return}if(!t.account_id){H.error("Please select an account.");return}if(!t.primary_contact_id){H.error("Please select a primary contact.");return}if(!t.assigned_to){H.error("Please assign this deal to a user.");return}r?.(t)},v=b=>{b.target.id==="modalBackdrop"&&e()},w=h.useMemo(()=>{const b=String(t.account_id||"").trim(),C=Array.isArray(o)?o:[];return b?C.filter(N=>{const A=[N?.account_id,N?.accountId,N?.account?.id,N?.account?.account_id,N?.account?.accountId].find(k=>k!=null&&String(k).trim()!=="");return A?String(A)===b:!1}):C},[o,t.account_id]);return h.useEffect(()=>{const b=String(t.account_id||"").trim(),C=String(t.primary_contact_id||"").trim();if(!C||!b)return;w.some(S=>String(S?.id)===C)||n(S=>({...S,primary_contact_id:""}))},[t.account_id,t.primary_contact_id,w,n]),a.jsx("div",{id:"modalBackdrop",onClick:v,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:b=>b.stopPropagation(),children:[a.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(Vt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Deal":"Create Deal"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:x,noValidate:!0,children:[a.jsx(M_,{label:"Deal Name",name:"name",value:t.name,onChange:b=>n({...t,name:b.target.value}),placeholder:"Enter deal name",required:!0,isSubmitted:f,className:"md:col-span-2"}),a.jsx(I_,{label:"Account",value:t.account_id||"",onChange:b=>n({...t,account_id:b}),items:l||[],getLabel:b=>b?.name??"",placeholder:"Search account...",disabled:i,currentItem:d,required:!0,isSubmitted:f}),a.jsx(I_,{label:"Primary Contact",value:t.primary_contact_id||"",onChange:b=>n({...t,primary_contact_id:b}),items:w||[],getLabel:b=>`${b?.first_name??""} ${b?.last_name??""}`.trim()||b?.email||"",placeholder:"Search contact...",disabled:i,currentItem:u,required:!0,isSubmitted:f}),a.jsx(I7,{label:"Stage",name:"stage",value:t.stage,onChange:b=>n({...t,stage:b.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}],disabled:i}),a.jsx(M_,{label:"Amount",name:"amount",type:"number",step:"0.01",value:t.amount,onChange:b=>n({...t,amount:b.target.value}),placeholder:"0",required:!0,isSubmitted:f}),a.jsx(I7,{label:"Currency",name:"currency",value:t.currency||"PHP",onChange:b=>n({...t,currency:b.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),a.jsx(M_,{label:"Close Date",name:"close_date",type:"date",value:t.close_date||"",onChange:b=>n({...t,close_date:b.target.value}),disabled:i}),a.jsx(I_,{label:"Assign To",value:t.assigned_to||"",onChange:b=>n({...t,assigned_to:b}),items:c||[],getLabel:b=>`${b?.first_name??""} ${b?.last_name??""}`.trim()||b?.email||"",placeholder:"Search assignee...",disabled:i,required:!0,isSubmitted:f,className:"md:col-span-2"}),a.jsx(I6e,{label:"Description",name:"description",value:t.description,onChange:b=>n({...t,description:b.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Deal":"Save Deal"})]})]})]})})}function M_({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,className:c="",isSubmitted:d=!1}){const u=d&&!n?.trim();return a.jsxs("div",{className:c,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function I7({label:e,name:t,value:n,onChange:s,options:r,required:i=!1,disabled:l=!1,className:o=""}){return a.jsxs("div",{className:o,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:n??"",onChange:s,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(c=>a.jsx("option",{value:c.value,children:c.label},c.value))})]})}function I_({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",currentItem:c=null,required:d=!1,isSubmitted:u=!1}){const f=u&&d&&!n;return a.jsxs("div",{className:o,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",d&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(M6e,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:l,currentItem:c,hasError:f})]})}function M6e({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,currentItem:o=null,hasError:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),w=e.find(N=>String(N.id)===String(t))||o,b=w?s(w):"",C=h.useMemo(()=>{const N=f.trim().toLowerCase();return(N?e.filter(A=>(s(A)||"").toLowerCase().includes(N)):e).slice(0,l)},[e,f,s,l]);return h.useEffect(()=>{const N=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),h.useEffect(()=>{d||p("")},[d]),a.jsxs("div",{ref:x,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:d?f:b,placeholder:r,onFocus:()=>!i&&u(!0),onChange:N=>{p(N.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${c?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:C.length>0?C.map(N=>{const S=String(N.id),A=s(N),k=String(t)===S;return a.jsx("button",{type:"button",onClick:()=>{n(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:A||"--"},S)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function I6e({label:e,name:t,value:n,onChange:s,placeholder:r,required:i=!1,disabled:l=!1,className:o="",rows:c=3}){return a.jsxs("div",{className:o,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:s,placeholder:r,required:i,disabled:l,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function $6e({selectedDeal:e,show:t,onClose:n,activeTab:s,setActiveTab:r,onEdit:i,onDelete:l,onStatusUpdate:o}){const c=vt(),[d]=ks(),u=d.get("id"),[f,p]=h.useState(e||null),[x,v]=h.useState(s||"Overview"),{user:w}=ta();h.useEffect(()=>{console.log("AdminDealsInformation mounted",f),console.log("User:",w)},[f,w]);const b=s!==void 0?s:x;if(h.useEffect(()=>{(async()=>{if(u&&!e)try{console.log("Fetching deal from route, ID:",u);const k=(await ie.get("/deals/admin/fetch-all")).data||[];console.log("All deals fetched:",k.length);const _=k.find(T=>T.id===parseInt(u));if(console.log("Found deal:",_),_){console.log("Deal data structure:",{id:_.id,name:_.name,amount:_.amount,stage:_.stage,account:_.account,contact:_.contact,assigned_deals:_.assigned_deals,deal_creator:_.deal_creator,allKeys:Object.keys(_)});const T={..._,amount:typeof _.amount=="number"?_.amount:parseFloat(_.amount||0),probability:_.probability||0};p(T)}else console.warn("Deal not found with ID:",u)}catch(A){console.error("Error fetching deal:",A)}})()},[u,e]),!f&&!u||u&&!f)return null;const C=S=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[S]||"bg-gray-100 text-gray-700";function N(S){return S?new Date(S).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:a.jsxs("div",{className:"flex items-start justify-between w-full",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),a.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:a.jsx("button",{onClick:()=>{n?n():c(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:a.jsx(Vt,{size:25})})})]})}),a.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:a.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[a.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:f.name}),a.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${C(f.stage)}`,children:f.stage})]}),a.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",N(f.created_at)]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-2",children:[a.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[" ",f.amount?f.amount.toLocaleString():"0"]}),a.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${f.probability}%`}})}),a.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",f.probability,"% Complete "]}),(f.created_by===w?.id||f.assigned_to===w?.id)&&a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[a.jsxs("button",{type:"button",onClick:()=>{i&&i(f)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[a.jsx(rn,{className:"mr-1 sm:mr-2",size:16}),a.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),a.jsxs("button",{type:"button",onClick:()=>{l&&l(f)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[a.jsx(Wt,{className:"mr-1 sm:mr-2",size:16}),a.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(S=>a.jsx("button",{onClick:()=>{r?r(S):v(S)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${b===S?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:S},S))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[b==="Overview"&&a.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),a.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[a.jsx("strong",{children:"Description:"})," ",f.description]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[a.jsx("strong",{children:"Expected Close Date:"})," ",f.close_date]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("div",{className:"mt-4 py-3 w-full",children:[a.jsxs("div",{className:"relative flex flex-col w-full",children:[a.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const S=(f?.stage||"PROSPECTING").toUpperCase(),k=(T=>T==="PROSPECTING"?0:T==="QUALIFICATION"?1:T==="PROPOSAL"?2:T==="NEGOTIATION"?3:T==="CLOSED_WON"||T==="CLOSED_LOST"?4:-1)(S);return[0,1,2,3,4].map(T=>k===T?"orange":k>T?"green":"gray").map((T,E)=>a.jsxs(wt.Fragment,{children:[a.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${T==="green"?"bg-green-500 border-green-500":T==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),E<4&&a.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},E))})()}),a.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((S,A)=>a.jsx("span",{className:"text-center flex-1 break-words",children:S},A))})]}),a.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:f.stage})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),a.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Account:"})," ",f.account?.name]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Primary Contact:"})," ",f.contact?.first_name," ",f.contact?.last_name]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Phone:"})," ",f.contact?.work_phone]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Email:"})," ",f.contact?.email]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Assigned To:"})," ",f.assigned_deals?.first_name," ",f.assigned_deals?.last_name]})]})]})]}),b==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:f.description||"No notes available."})]})]}),b==="Activities"&&a.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:Et,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:_t,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((S,A)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[a.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-gray-600 mt-1",children:a.jsx(S.icon,{size:24})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-gray-900 break-words",children:S.title}),a.jsx("p",{className:"text-sm text-gray-500 break-words",children:S.desc}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),a.jsx("p",{className:"text-sm text-gray-700 break-words",children:S.user})]})]})]}),a.jsx("p",{className:"text-sm text-gray-500 break-words",children:S.date})]},A))]}),b==="Edit"&&a.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[a.jsxs("label",{className:"block mb-3 break-words",children:[a.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),a.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:f.name})]}),a.jsxs("label",{className:"block mb-3 break-words",children:[a.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),a.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:f.description})]}),a.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),a.jsx("div",{className:"w-full lg:w-auto",children:a.jsx(mj,{selectedDeal:f,onStatusUpdate:o,onClose:n})})]})]})]})})}function R6e({selectedDeal:e,onStatusUpdate:t,onClose:n}){const[s,r]=h.useState(e?.stage||""),[i,l]=h.useState(!1),o=vt(),{user:c}=ta();h.useEffect(()=>{console.log("AdminDealsInformation mounted sahdksd",e),console.log("User sadad:",c)},[e,c]);const d=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"}];h.useEffect(()=>{e?.stage&&r(e.stage)},[e]);const u=async()=>{if(!e||!e.id){H.error("No deal selected");return}if(!s||s===e.stage){H.info("Please select a different stage");return}const f=e.id;l(!0);try{await ie.put(`/deals/admin/${f}`,{stage:s}),n&&n(),t&&setTimeout(async()=>{await t(!0)},100),setTimeout(()=>{H.success("Deal status updated successfully")},300)}catch(p){console.error(p);const x=p.response?.data?.detail||"Failed to update deal status";H.error(x)}finally{l(!1)}};return e?a.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>o("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Deal"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const f=encodeURIComponent(e.contact.email),p=encodeURIComponent(""),x=encodeURIComponent(""),v=`https://mail.google.com/mail/?view=cm&fs=1&to=${f}&su=${p}&body=${x}`;window.open(v,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Ka,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>o("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Deal"}}}),children:[a.jsx(_t,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>o("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Deal"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Gt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:s,onChange:f=>r(f.target.value),disabled:i||e.created_by!==c?.id&&e.assigned_to!==c?.id,children:d.map(f=>a.jsx("option",{value:f.value,children:f.label},f.value))}),(e.created_by===c?.id||e.assigned_to===c?.id)&&a.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:u,disabled:i||!s||s===e.stage,children:i?"Updating...":"Update"})]})]}):null}const $_=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],R_={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:"",subtotal:0,tax_rate:0,tax_amount:0,discount_type:"",discount_value:0,discount_amount:0,currency:"PHP",items:[]},ji=e=>{if(!e)return"Draft";const t=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[t]||"Draft"},z_=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",z6e=e=>{switch(ji(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},U6e=e=>{switch(ji(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},Ry=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",ag=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",F6e=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const t=new Date(e);if(isNaN(t.getTime()))return"";const n=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${n}-${s}-${r}`}catch{return""}},U_=(e,t)=>{if(!e||t==null||t==="")return"";const n=Number(t);if(Number.isNaN(n))return"";const s=new Date(e);return isNaN(s.getTime())?"":(s.setDate(s.getDate()+n),s.toISOString().slice(0,10))},$7=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},R7=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},zv=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},B6e=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const s of e){const r=localStorage.getItem(s);if(r)try{const i=JSON.parse(r),l=zv(i);if(l)return l}catch{}}const t=localStorage.getItem("user_id"),n=zv(t);return n||null},H6e=e=>{if(!e)return"";const n=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(s=>s!=null&&String(s).trim()!=="");return n?String(n):""},G6e=e=>{if(!e)return"";const n=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(s=>s!=null&&String(s).trim()!=="");return n?String(n):""};function W6e(){const e=vt(),t=Yt();h.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[n,s]=h.useState([]),[r,i]=h.useState(!1),[l,o]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState([]),[p,x]=h.useState([]),[v,w]=h.useState(null),[b,C]=h.useState(null),[N,S]=h.useState(!1),[A,k]=h.useState(!1),[_,T]=h.useState(!1),[E,I]=h.useState(null),[z,$]=h.useState(!1),[P,O]=h.useState(null),[B,Q]=h.useState(R_),[F,ee]=h.useState(""),[V,de]=h.useState("Filter by Status"),[oe,Z]=h.useState(null),[R,ve]=h.useState(1),[X,je]=h.useState(10),[Ne,Oe]=h.useState("Overview"),[Fe,me]=h.useState("Draft"),[Be,Pe]=h.useState(null);h.useEffect(()=>{const W=t.state?.quoteID;if(W){Pe(W),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(Be&&n.length>0&&!r){const _e=n.find(W=>W.id===Be);_e?C(_e):H.error("Quote not found."),Pe(null)}},[Be,u,r]);const[we,ne]=h.useState(null);h.useEffect(()=>{async function _e(){try{const W=await ie.get("/auth/me");ne(W.data)}catch(W){console.error(W)}}_e()},[]),h.useEffect(()=>{let _e=!0;return(async()=>{const ae=B6e();if(ae&&_e){w(ae);return}try{const $e=await ie.get("/auth/me"),Ge=zv($e?.data);if(Ge&&_e){w(Ge);return}}catch{}try{const $e=await ie.get("/users/me"),Ge=zv($e?.data);if(Ge&&_e){w(Ge);return}}catch{}_e&&w(null)})(),()=>{_e=!1}},[]);const Le=h.useCallback(_e=>_e&&c.find(ae=>String(ae.id)===String(_e))?.name||"",[c]),pe=h.useCallback(_e=>{if(!_e)return"";const W=u.find(ae=>String(ae.id)===String(_e));return W?`${W.first_name} ${W.last_name}`.trim():""},[u]),le=h.useCallback(_e=>{if(!_e)return"--";const W=l.find(ae=>String(ae.id)===String(_e));return W?.deal_name||W?.name||`Deal #${$7(_e)}`},[l]),ge=h.useCallback(_e=>{const W=l.find(Ge=>String(Ge.id)===String(_e)),ae=H6e(W);let $e=G6e(W);if(!$e&&ae){const Ge=u.filter(ue=>String(ue.account_id||"")===String(ae));if(Ge.length>0){const ue=[...Ge].sort((se,He)=>{const ht=`${se.first_name||""} ${se.last_name||""}`.trim().toLowerCase(),Ce=`${He.first_name||""} ${He.last_name||""}`.trim().toLowerCase();return ht.localeCompare(Ce)});$e=String(ue[0].id)}}if(ae&&$e){const Ge=u.find(ue=>String(ue.id)===String($e));Ge?.account_id&&String(Ge.account_id)!==String(ae)&&($e="")}return{accountId:ae||"",contactId:$e||""}},[l,u]),fe=h.useCallback(_e=>{if(!_e)return"--";if(_e.deal?.deal_name)return _e.deal.deal_name;if(_e.deal?.name)return _e.deal.name;const W=_e.deal_id||_e.deal?.id;return W?le(W):"--"},[le]),Te=h.useCallback(_e=>{if(!_e)return"--";if(_e.account?.name)return _e.account.name;let W=_e.account_id||_e.account?.id;if(!W){const ae=_e.deal_id||_e.deal?.id;ae&&(W=ge(ae).accountId)}return W?Le(W)||`Account #${W}`:"--"},[ge,Le]),Ye=h.useCallback(_e=>{if(!_e)return"--";if(_e.contact?.first_name||_e.contact?.last_name)return`${_e.contact?.first_name||""} ${_e.contact?.last_name||""}`.trim()||"--";let W=_e.contact_id||_e.contact?.id;if(!W){const $e=_e.deal_id||_e.deal?.id;$e&&(W=ge($e).contactId)}return(W?pe(W):"")||(W?`Contact #${W}`:"--")},[ge,pe]),Ae=h.useCallback(async(_e=null)=>{i(!0);try{const W=await ie.get("/quotes/admin/fetch-all"),$e=[...Array.isArray(W.data)?W.data:[]].sort((Ge,ue)=>{const se=Ge?.created_at||Ge?.updated_at||0,He=ue?.created_at||ue?.updated_at||0;return new Date(He)-new Date(se)});if(s($e),_e){const Ge=$e.find(ue=>ue.id===_e);C(Ge||null)}}catch(W){console.error(W),s([]),W.response?.status===403?H.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):H.error("Failed to fetch quotes. Please try again later.")}finally{i(!1)}},[]),Ie=h.useCallback(async()=>{try{const _e=await ie.get("/deals/admin/fetch-all");o(Array.isArray(_e.data)?_e.data:[])}catch(_e){console.error(_e),_e.response?.status===403&&H.warn("Unable to load deals (permission denied).")}},[]),Je=h.useCallback(async()=>{try{const _e=await ie.get("/accounts/admin/fetch-all");d(Array.isArray(_e.data)?_e.data:[])}catch(_e){console.error(_e),_e.response?.status===403&&H.warn("Unable to load accounts (permission denied).")}},[]),he=h.useCallback(async()=>{try{const _e=await ie.get("/contacts/admin/fetch-all");f(Array.isArray(_e.data)?_e.data:[])}catch(_e){console.error(_e),_e.response?.status===403&&H.warn("Unable to load contacts (permission denied).")}},[]),Me=h.useCallback(async()=>{try{const _e=await ie.get("/users/all");x(Array.isArray(_e.data)?_e.data:[])}catch(_e){console.error(_e),_e.response?.status===403&&H.warn("Unable to load users (permission denied).")}},[]);h.useEffect(()=>{Ae(),Ie(),Je(),he(),Me()},[Ae,Ie,Je,he,Me]);const re=h.useMemo(()=>{const _e=F.trim().toLowerCase(),W=V.trim();return n.filter(ae=>{const $e=fe(ae),Ge=Te(ae),ue=Ye(ae),se=U_(ae.presented_date,ae.validity_days),He=[ae.quote_id,$e,Ge,ue,ae.total_amount?.toString(),ae.validity_days?.toString(),ae.presented_date?ag(ae.presented_date):"",se?ag(se):"",ae.assigned_user?.first_name,ae.assigned_user?.last_name,ae.creator?.first_name,ae.creator?.last_name,ae.status,ae.notes,Ry(ae.created_at),Ry(ae.updated_at)],ht=_e===""||He.some(it=>it==null?!1:it.toString().toLowerCase().includes(_e)),Ce=W==="Filter by Status"||ji(ae.status)===W;return ht&&Ce})},[n,F,V,fe,Te,Ye]),Qe=Math.max(1,Math.ceil(re.length/X)||1);h.useEffect(()=>ve(1),[F,V]),h.useEffect(()=>{ve(_e=>{const W=Math.max(1,Math.ceil(re.length/X)||1);return _e>W?W:_e})},[re.length]);const We=h.useMemo(()=>{const _e=(R-1)*X;return re.slice(_e,_e+X)},[re,R]),dt=()=>ve(_e=>Math.max(_e-1,1)),ze=()=>ve(_e=>Math.min(_e+1,Qe)),ce=_e=>{C(_e),Oe("Overview"),me(ji(_e?.status)||"Draft")},ye=()=>{C(null),Oe("Overview")},Ue=_e=>{_e.target.id==="quoteModalBackdrop"&&!z&&ye()},et=h.useCallback(()=>{S(!1),k(!1),O(null),Q(R_),T(!1)},[]),lt=_e=>{_e.target.id==="modalBackdrop"&&!_&&!z&&et()},Ee=_e=>{const{name:W,value:ae}=_e.target;if(W==="deal_id"){const{accountId:$e,contactId:Ge}=ge(ae);Q(ue=>({...ue,deal_id:ae,account_id:$e,contact_id:Ge}));return}Q($e=>({...$e,[W]:ae}))},tt=()=>{Q(R_),k(!1),O(null),S(!0)},be=_e=>{if(!_e)return;C(null);const W=_e.deal?.id?String(_e.deal.id):_e.deal_id?String(_e.deal_id):"",ae=W?ge(W):{accountId:"",contactId:""},$e=_e.account?.id?String(_e.account.id):_e.account_id?String(_e.account_id):ae.accountId,Ge=_e.contact?.id?String(_e.contact.id):_e.contact_id?String(_e.contact_id):ae.contactId,ue=_e.assigned_user?.id?String(_e.assigned_user.id):_e.assigned_to?String(_e.assigned_to):"";Q({deal_id:W,account_id:$e||"",contact_id:Ge||"",total_amount:_e.total_amount?.toString()||"",presented_date:F6e(_e.presented_date),validity_days:_e.validity_days!==null&&_e.validity_days!==void 0?String(_e.validity_days):"",status:ji(_e.status)||"Draft",assigned_to:ue,notes:_e.notes||""}),k(!0),O(_e.id),S(!0)},Xe=_e=>{if(!_e)return;const W=_e.quote_id||"this quote";I({title:"Delete Quote",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:W}),"? This action cannot be undone."]}),confirmLabel:"Delete Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:_e.id,name:W}})},[M,U]=h.useState(!1),Y=_e=>{if(_e.preventDefault(),U(!0),!v){H.error("Unable to determine current user. Please log in again.");return}if(!B.deal_id){H.error("Deal is required.");return}if(!B.assigned_to){H.error("Assigned To is required.");return}const ae=ge(B.deal_id),$e={deal_id:Number(B.deal_id),account_id:ae.accountId?Number(ae.accountId):null,contact_id:ae.contactId?Number(ae.contactId):null,total_amount:Number(B.total_amount),presented_date:B.presented_date||null,validity_days:B.validity_days===""?null:Number(B.validity_days),status:B.status||"Draft",assigned_to:B.assigned_to?Number(B.assigned_to):null,notes:B.notes?.trim()||null},Ge=A&&P?"update":"create",ue=le(B.deal_id),se=Ge==="create"?{...$e,created_by_id:Number(v)}:$e;I({title:Ge==="create"?"Confirm New Quote":"Confirm Update",message:Ge==="create"?a.jsxs("span",{children:["Are you sure you want to create a quote for"," ",a.jsx("span",{className:"font-semibold",children:ue}),"?"]}):a.jsxs("span",{children:["Save changes to"," ",a.jsx("span",{className:"font-semibold",children:ue}),"?"]}),confirmLabel:Ge==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:Ge,payload:se,targetId:P||null,name:ue}})},te=async()=>{if(!E?.action){I(null);return}const{action:_e}=E,{type:W,payload:ae,targetId:$e,name:Ge}=_e;$(!0);try{if(W==="create")T(!0),await ie.post("/quotes/admin",ae),H.success("Quote created successfully."),et(),await Ae();else if(W==="update"){if(!$e)throw new Error("Missing quote identifier for update.");T(!0),await ie.put(`/quotes/admin/${$e}`,ae),H.success("Quote updated successfully."),et(),await Ae(),b?.id===$e&&C(null)}else if(W==="delete"){if(!$e)throw new Error("Missing quote identifier for deletion.");const ue=b?.id;Z($e),await ie.delete(`/quotes/admin/${$e}`),H.success(`Quote "${Ge}" deleted successfully.`),await Ae(ue&&ue!==$e?ue:null),ue===$e&&C(null)}}catch(ue){console.error(ue);const se=W==="create"?"Failed to create quote. Please review the details and try again.":W==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";H.error(se),(W==="create"||W==="update")&&T(!1),W==="delete"&&Z(null)}finally{(W==="create"||W==="update")&&T(!1),W==="delete"&&Z(null),$(!1),I(null)}},K=()=>{z||I(null)},Se=h.useCallback((_e,W)=>{const ae=_e?.deal_id??_e?.deal?.id??"",$e=ae?Number(ae):null,Ge=$e?ge(String($e)):{accountId:"",contactId:""},ue=_e?.account_id??_e?.account?.id??Ge.accountId??null,se=_e?.contact_id??_e?.contact?.id??Ge.contactId??null,He=_e?.total_amount??0,ht=_e?.assigned_to??_e?.assigned_user?.id??null;return{deal_id:$e,account_id:ue!=null&&String(ue).trim()!==""?Number(ue):null,contact_id:se!=null&&String(se).trim()!==""?Number(se):null,total_amount:Number(He),presented_date:_e?.presented_date||null,validity_days:_e?.validity_days===""||_e?.validity_days===void 0||_e?.validity_days===null?null:Number(_e.validity_days),status:W,assigned_to:ht!=null&&String(ht).trim()!==""?Number(ht):null,notes:_e?.notes?.trim()||null}},[ge]),G=h.useCallback(async()=>{if(!b?.id)return;const _e=ji(Fe),W=[_e,_e.toLowerCase()],ae=async $e=>ie.patch(`/quotes/admin/${b.id}/status`,{status:$e},{headers:{"Content-Type":"application/json"}});try{let $e=!1;for(const Ge of W)try{await ae(Ge),$e=!0;break}catch(ue){if(ue?.response?.status===422)continue;throw ue}if(!$e){const Ge=Se(b,_e);if(!Ge.deal_id){H.error("Cannot update status: missing deal_id on selected quote.");return}if(!Ge.total_amount||Ge.total_amount<=0){H.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await ie.put(`/quotes/admin/${b.id}`,Ge)}H.success(`Quote status updated to ${_e}`),C(null),Oe("Overview"),await Ae()}catch($e){console.error($e);const Ge=$e?.response?.data?.message||($e?.response?.data?.errors?Object.values($e.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";H.error(Ge)}},[b,Fe,Ae,Se]),J=[{label:"Filter by Status",value:"Filter by Status"},...$_.map(_e=>({label:_e.label,value:_e.value}))],De=E?.action?.type==="delete"?E.action.targetId:null,Ve=b&&(oe===b.id||De===b.id),ft=b&&oe===b.id,bt=b?a.jsx("div",{id:"quoteModalBackdrop",onClick:Ue,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:_e=>_e.stopPropagation(),children:[a.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:a.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),a.jsx("button",{onClick:ye,className:"text-gray-500 hover:text-white transition cursor-pointer",children:a.jsx(Ha,{size:25})})]})}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:fe(b)}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${U6e(b.status)}`,children:z_(b.status)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>be(b),disabled:z||E?.action?.type==="update"&&E.action.targetId===b.id,children:[a.jsx(nn,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>Xe(b),disabled:!!Ve,children:ft?"Deleting...":a.jsxs(a.Fragment,{children:[a.jsx(Wt,{className:"mr-2"}),"Delete"]})})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-1 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(_e=>a.jsx("button",{onClick:()=>Oe(_e),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${Ne===_e?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:_e},_e))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[Ne==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Quote ID:"}),a.jsx("p",{children:R7(b.quote_id)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Deal:"}),a.jsx("p",{children:fe(b)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Account:"}),a.jsx("p",{children:Te(b)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Contact:"}),a.jsx("p",{children:Ye(b)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Total Amount:"}),a.jsx("p",{children:b.total_amount?`${Number(b.total_amount).toLocaleString()}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Presented Date:"}),a.jsx("p",{children:ag(b.presented_date)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Validity Days:"}),a.jsx("p",{children:b.validity_days!==null&&b.validity_days!==void 0?b.validity_days:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),a.jsx("p",{children:ag(U_(b.presented_date,b.validity_days))||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Status:"}),a.jsx("p",{children:z_(b.status)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:b.assigned_user?`${b.assigned_user.first_name} ${b.assigned_user.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:b.creator?`${b.creator.first_name} ${b.creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:Ry(b.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:Ry(b.updated_at)||"N/A"})]})]})}),Ne==="Notes"&&a.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),a.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:b.notes||"No notes available."})]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/manager/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Quotes"}}}),children:[a.jsx(_t,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/manager/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Gt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:Fe||ji(b.status)||"Draft",onChange:_e=>me(_e.target.value),children:$_.map(_e=>a.jsx("option",{value:_e.value,children:_e.label},_e.value))}),a.jsx("button",{onClick:G,disabled:ji(Fe)===ji(b.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${ji(Fe)===ji(b.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,jt=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&a.jsx(zt,{message:"Loading quotes..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(ga,{className:"mr-2 text-blue-600"})," Quotes"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{tt(),U(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(da,{className:"mr-2"})," Add Quote"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search quotes",value:F,onChange:_e=>ee(_e.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:V,onChange:_e=>de(_e.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:J.map(_e=>a.jsx("option",{value:_e.value,children:_e.label},_e.value))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),a.jsx("th",{className:"py-3 px-4",children:"Deal"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Expiry Date"})]})}),a.jsx("tbody",{children:r?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"Loading quotes..."})}):re.length>0?We.map(_e=>{const W=U_(_e.presented_date,_e.validity_days);return a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>ce(_e),children:[a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:R7(_e.quote_id)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"break-words",children:fe(_e)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-sm text-gray-700 break-words",children:Te(_e)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"break-words",children:Ye(_e)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-gray-700",children:_e.total_amount?`${Number(_e.total_amount).toLocaleString()}`:"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${z6e(_e.status)}`,children:z_(_e.status)})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{children:_e.assigned_user?`${_e.assigned_user.first_name} ${_e.assigned_user.last_name}`:"Unassigned"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-gray-500 text-xs",children:ag(W)||"--"})})]},_e.id)}):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No quotes found."})})})]})}),a.jsx(Jt,{className:"mt-4",totalItems:re.length,pageSize:X,currentPage:R,onPrev:dt,onNext:ze,onPageSizeChange:_e=>{je(_e),ve(1)},pageSizeOptions:[10,20,30,40,50],label:"quotes"})]}),ke=N?a.jsx("div",{id:"modalBackdrop",onClick:lt,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:_e=>_e.stopPropagation(),children:[a.jsx("button",{onClick:()=>{et(),U(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:_||z,children:a.jsx(Vt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:A?"Edit Quote":"Add New Quote"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Y,children:[a.jsx(U7,{label:"Deal",name:"deal_id",value:B.deal_id,onChange:_e=>{const{accountId:W,contactId:ae}=ge(_e);Q($e=>({...$e,deal_id:_e,account_id:W,contact_id:ae}))},items:Array.isArray(l)?l:[],getLabel:_e=>`${$7(_e?.deal_id??"")} ${_e?.name??""}`.trim(),placeholder:"Search deal...",required:!0,isSubmitted:M,disabled:_||l.length===0,className:"md:col-span-2"}),a.jsx(z7,{label:"Account",value:Le(B.account_id)||(B.account_id?`Account #${B.account_id}`:""),disabled:!0}),a.jsx(z7,{label:"Contact",value:pe(B.contact_id)||(B.contact_id?`Contact #${B.contact_id}`:""),disabled:!0}),a.jsx(F_,{label:"Total Amount",name:"total_amount",type:"number",value:B.total_amount,onChange:Ee,placeholder:"0.00",disabled:_}),a.jsx(F_,{label:"Presented Date",name:"presented_date",type:"date",value:B.presented_date,onChange:Ee,disabled:_}),a.jsx(F_,{label:"Validity Days",name:"validity_days",type:"number",value:B.validity_days,onChange:Ee,placeholder:"30",disabled:_}),a.jsx(U7,{label:"Assigned To",value:B.assigned_to||"",onChange:_e=>Q(W=>({...W,assigned_to:_e})),items:Array.isArray(p)?p:[],getLabel:_e=>{const W=`${_e?.first_name??""} ${_e?.last_name??""}`.trim();return W?_e?.role?`${W} (${_e.role})`:W:_e?.email||""},placeholder:"Search assignee...",required:!0,isSubmitted:M,disabled:_}),a.jsx(V6e,{label:"Status",name:"status",value:B.status,onChange:Ee,options:$_,required:!0,disabled:_,className:"md:col-span-2"}),a.jsx(Y6e,{label:"Notes",name:"notes",value:B.notes,onChange:Ee,placeholder:"Additional details...",rows:3,disabled:_,className:"md:col-span-2"}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:()=>{et(),U(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:_||z,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:_||z,children:_?"Saving...":A?"Update Quote":"Save Quote"})]})]})]})}):null,pt=E?a.jsx(K6e,{open:!0,title:E.title,message:E.message,confirmLabel:E.confirmLabel,cancelLabel:E.cancelLabel,variant:E.variant,onConfirm:te,onCancel:K,loading:z}):null;return a.jsxs(a.Fragment,{children:[b?bt:jt,ke,pt]})}function F_({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,className:c="",isSubmitted:d=!1}){const u=d&&!n?.trim();return a.jsxs("div",{className:c,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function z7({label:e,value:t,className:n="",disabled:s=!0}){return a.jsxs("div",{className:n,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("input",{type:"text",value:t??"",disabled:s,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function V6e({label:e,name:t,value:n,onChange:s,options:r,required:i=!1,disabled:l=!1,className:o=""}){const c=n!=null?String(n):"",u=r.some(f=>String(f.value)===c)?c:"";return a.jsxs("div",{className:o,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:u,onChange:s,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(f=>a.jsx("option",{value:String(f.value??""),children:f.label},f.value??f.label))})]})}function U7({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!n;return a.jsxs("div",{className:o,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(q6e,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:l,hasError:u})]})}function q6e({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,hasError:o=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",w=h.useMemo(()=>{const b=u.trim().toLowerCase();return(b?e.filter(N=>(s(N)||"").toLowerCase().includes(b)):e).slice(0,l)},[e,u,s,l]);return h.useEffect(()=>{const b=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),h.useEffect(()=>{c||f("")},[c]),a.jsxs("div",{ref:p,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:c?u:v,placeholder:r,onFocus:()=>!i&&d(!0),onChange:b=>{f(b.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${o?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:w.length>0?w.map(b=>{const C=String(b.id),N=s(b),S=String(t)===C;return a.jsx("button",{type:"button",onClick:()=>{n(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:N||"--"},C)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function Y6e({label:e,name:t,value:n,onChange:s,placeholder:r,rows:i=3,disabled:l=!1,className:o=""}){return a.jsxs("div",{className:o,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:s,placeholder:r,rows:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function K6e({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}function Q6e(){const{userRole:e}=zs();return a.jsx(ej,{currentUserRole:e,currentUserId:null})}function X6e(){h.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,t]=h.useState(null),[n,s]=h.useState(""),[r,i]=h.useState("Filter by Actions"),[l,o]=h.useState(1),[c,d]=h.useState(10),u=async()=>{try{const N=await ie.get("/logs/read-all");t(N.data)}catch(N){console.error("Error fetching audit logs:",N)}};h.useEffect(()=>{u()},[]);const f=h.useMemo(()=>{if(!Array.isArray(e))return[];const N=n.trim().toLowerCase(),S=r?.toUpperCase?.()||"ALL";return e.filter(k=>{const _=k.timestamp?new Date(k.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",T=`${k.entity_type||""} ${k.entity_name||k.entity_details?.name||k.entity_details?.title||k.entity_id||""}`,E=`${k.logger?.first_name||""} ${k.logger?.last_name||""}`,I=[_,E,k.action,k.entity_type,T,k.description],z=N===""||I.some(P=>P==null?!1:P.toString().toLowerCase().includes(N)),$=S==="FILTER BY ACTIONS"||(k.action||"").toUpperCase()===S;return z&&$}).sort((k,_)=>{const T=k.timestamp?new Date(k.timestamp).getTime():0;return(_.timestamp?new Date(_.timestamp).getTime():0)-T})},[e,n,r]),p=Math.max(1,Math.ceil(f.length/c)||1);h.useEffect(()=>{o(1)},[n,r]),h.useEffect(()=>{o(N=>{const S=Math.max(1,Math.ceil(f.length/c)||1);return N>S?S:N})},[f.length]);const x=h.useMemo(()=>{const N=(l-1)*c;return f.slice(N,N+c)},[f,l]);f.length===0||(l-1)*c+1,Math.min(l*c,f.length);const v=()=>o(N=>Math.max(N-1,1)),w=()=>o(N=>Math.min(N+1,p)),b=()=>{if(!f.length){cx.error("No logs to export!");return}const N=["Timestamp","User","Action","Resource","Details"],S=f.map(E=>[new Date(E.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${E.logger?.first_name||""} ${E.logger?.last_name||""}`.trim(),E.action,`${E.entity_type}: ${E.entity_id}`,E.description||""]),A=[N.join(","),...S.map(E=>E.map(I=>`"${String(I).replace(/"/g,'""')}"`).join(","))].join(`
`),k=new Blob([A],{type:"text/csv;charset=utf-8;"}),_=URL.createObjectURL(k),T=document.createElement("a");T.href=_,T.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(T),T.click(),document.body.removeChild(T),URL.revokeObjectURL(_)},C=N=>{switch((N||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&a.jsx(zt,{message:"Loading audit logs..."}),a.jsx(ox,{toastOptions:{duration:1e3}}),a.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[a.jsx(_t,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),a.jsxs("p",{className:"text-sm text-blue-700",children:[a.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ys,{className:"text-blue-600",size:20}),a.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:b,children:[a.jsx(To,{className:"mr-2"}),"Export Logs"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[a.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search audit logs",value:n,onChange:N=>s(N.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:r,onChange:N=>i(N.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),a.jsx("option",{value:"CREATE",children:"CREATE"}),a.jsx("option",{value:"DELETE",children:"DELETE"}),a.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),a.jsx("th",{className:"py-3 px-4",children:"User"}),a.jsx("th",{className:"py-3 px-4",children:"Action"}),a.jsx("th",{className:"py-3 px-4",children:"Resource"}),a.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),a.jsx("tbody",{children:Array.isArray(f)&&f.length>0?x.map((N,S)=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(N.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),a.jsx("td",{className:"py-3 px-4 text-gray-700",children:N.name}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${C(N.action)}`,children:N.action})}),a.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[N.entity_type,": ",N.entity_id]}),a.jsx("td",{className:"py-3 px-4 text-gray-700",children:N.description})]},S)):a.jsx("tr",{children:a.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),a.jsx(Jt,{className:"mt-4",totalItems:f.length,pageSize:c,currentPage:l,onPrev:v,onNext:w,onPageSizeChange:N=>{d(N),o(1)},pageSizeOptions:[10,20,30,40,50],label:"logs"})]})}const Z6e=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"}],J6e=e=>e?String(e).toUpperCase():"",Gm=e=>{const t=J6e(e);return t==="PLANNED"||t==="PENDING"?"PLANNED":t==="HELD"||t==="COMPLETED"?"HELD":t==="NOT HELD"||t==="NOT_HELD"||t==="CANCELLED"?"NOT_HELD":"PLANNED"},B_=e=>{const t=Gm(e);return t==="PLANNED"?"PLANNED":t==="HELD"?"HELD":t==="NOT_HELD"?"NOT HELD":"--"},F7=e=>{switch(Gm(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},B7=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function eRe(){const[e,t]=h.useState(!1),[n,s]=h.useState(null),[r,i]=h.useState(null),[l,o]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(null),[v,w]=h.useState(!1),[b,C]=h.useState(null),[N,S]=h.useState(!1),[A,k]=h.useState(!1),[_,T]=h.useState("PLANNED"),[E,I]=h.useState(!1),[z,$]=h.useState(!1),[P,O]=h.useState(null);ks();const B=vt(),Q=Yt(),ee={subject:"",call_time:(()=>{const ze=new Date,ce=ze.getFullYear(),ye=String(ze.getMonth()+1).padStart(2,"0"),Ue=String(ze.getDate()).padStart(2,"0");return`${ce}-${ye}-${Ue}T08:00`})(),duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[V,de]=h.useState(ee);h.useEffect(()=>{const ze=Q.state,ce=ze?.callID;if(ce&&!ze?.openCallModal){O(ce),B(Q.pathname,{replace:!0,state:{}});return}!ze?.openCallModal||!ze?.initialCallData||ze.initialCallData.relatedType1==="Lead"&&Array.isArray(l)&&l.length===0||ze.initialCallData.relatedType1==="Account"&&(!Array.isArray(l)||l.length===0)||(t(!0),de(ye=>({...ye,...ze.initialCallData,relatedTo1:ze.initialCallData.relatedTo1?String(ze.initialCallData.relatedTo1):"",relatedTo2:ze.initialCallData.relatedTo2?String(ze.initialCallData.relatedTo2):""})),B(Q.pathname,{replace:!0,state:{}}))},[Q.state,l]),h.useEffect(()=>{if(P&&u.length>0&&!z){const ze=u.find(ce=>ce.id===P);ze?s(ze):H.error("Call not found."),O(null)}},[P,u,z]);const oe=async()=>{try{$(!0);const ze=await ie.get("/calls/admin/fetch-all"),ye=[...Array.isArray(ze.data)?ze.data:[]].sort((Ue,et)=>{const lt=Ue?.created_at?new Date(Ue.created_at):0;return(et?.created_at?new Date(et.created_at):0)-lt});f(ye)}catch(ze){console.error("Error fetching calls:",ze),H.error("Failed to load calls")}finally{$(!1)}},Z=async()=>{try{const ze=await ie.get("/users/all");x(ze.data)}catch(ze){console.error("Error fetching users: ",ze)}};h.useEffect(()=>{Z(),oe()},[]);const R=[],ve="",X="Filter by Status",je="Filter by Users",[Ne,Oe]=h.useState(1),[Fe,me]=h.useState(10),Be=u,Pe=u,we=u.length,ne=u.filter(ze=>Gm(ze.status)==="PLANNED").length,Le=u.filter(ze=>Gm(ze.status)==="HELD").length,pe=u.filter(ze=>Gm(ze.status)==="NOT_HELD").length,le=[{title:"Total",value:we,icon:Es,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:ne,icon:Is,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:Le,icon:xn,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:pe,icon:Ts,color:"text-gray-600",bgColor:"bg-gray-100"}],[ge,fe]=h.useState("Overview"),Te=ze=>{const{name:ce,value:ye}=ze.target;de(Ue=>{const et={...Ue,[ce]:ye};return ce==="relatedType1"&&(et.relatedTo1="",ye==="Lead"?(et.relatedType2=null,et.relatedTo2=null,d([])):ye==="Account"&&(et.relatedType2="Contact")),ce==="relatedType2"&&(et.relatedTo2=""),et})};h.useEffect(()=>{const ze=async()=>{try{o([]);let ce;V.relatedType1==="Lead"?ce=await ie.get("/leads/admin/getLeads"):V.relatedType1==="Account"&&(ce=await ie.get("/accounts/admin/fetch-all"));let ye=[];if(ce&&Array.isArray(ce.data)?ye=ce.data:ye=[],v&&V.relatedTo1)try{let Ue;V.relatedType1==="Lead"?Ue=await ie.get(`/leads/get/${V.relatedTo1}`):V.relatedType1==="Account"&&(Ue=await ie.get(`/accounts/get/${V.relatedTo1}`)),Ue&&Ue.data&&(ye.some(lt=>String(lt.id)===String(V.relatedTo1))||(ye=[Ue.data,...ye]))}catch(Ue){console.error("Error fetching specific related item:",Ue)}o(ye)}catch(ce){console.error("Error fetching data:",ce),o([])}};V.relatedType1&&ze()},[V.relatedType1,v,V.relatedTo1]),h.useEffect(()=>{const ze=async()=>{try{d([]);let ce;if(V.relatedType1==="Account"&&V.relatedTo1)V.relatedType2==="Contact"?ce=await ie.get(`/contacts/from-acc/${V.relatedTo1}`):V.relatedType2==="Deal"&&(ce=await ie.get(`/deals/from-acc/${V.relatedTo1}`));else{d([]);return}ce&&Array.isArray(ce.data)?d(ce.data):d([])}catch(ce){console.error("Error fetching data:",ce),d([])}};V.relatedType2&&ze()},[V.relatedType2,V.relatedTo1,V.relatedType1]);const[Ye,Ae]=h.useState(!1),Ie=ze=>{ze.preventDefault(),Ae(!0);const ce=V.subject;if(!ce||ce.trim()===""){H.error("Subject is required.");return}if(!V.relatedTo1){H.error(`Please select a ${V.relatedType1||"Lead/Account"}.`);return}if(!V.assigned_to){H.error("Subject is required.");return}const Ue={...V,duration_minutes:V.duration_minutes?parseInt(V.duration_minutes,10):null,relatedTo1:V.relatedTo1?parseInt(V.relatedTo1,10):null,relatedTo2:V.relatedType1==="Lead"?null:V.relatedTo2?parseInt(V.relatedTo2,10):null,relatedType2:V.relatedType1==="Lead"?null:V.relatedType2,assigned_to:V.assigned_to?parseInt(V.assigned_to,10):null},et=v&&b?"update":"create",lt=(V.subject||"").trim()||"Untitled Call";i({title:et==="create"?"Confirm New Call":"Confirm Update",message:et==="create"?`Create "${lt}"?`:`Save changes to "${lt}"?`,confirmLabel:et==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:et,payload:Ue,targetId:b||null,name:lt}})},Je=ze=>s(ze),he=()=>{t(!1),w(!1),C(null)},Me=async()=>{if(!r?.action){i(null);return}const{action:ze}=r,{type:ce,payload:ye,targetId:Ue,name:et}=ze;k(!0);try{if(ce==="create")S(!0),await ie.post("/calls/create",ye),H.success(`Call "${et}" created successfully.`),t(!1),de(ee),w(!1),C(null),await oe();else if(ce==="update"){if(!Ue)throw new Error("Missing call identifier for update.");S(!0),await ie.put(`/calls/${Ue}`,ye),H.success(`Call "${et}" updated successfully.`),t(!1),de(ee),w(!1),C(null),await oe()}else if(ce==="delete"){if(!Ue)throw new Error("Missing call identifier for deletion.");await ie.delete(`/calls/${Ue}`),H.success(`Call "${et}" deleted successfully.`),n?.id===Ue&&s(null),await oe()}}catch(lt){const Ee=ce==="create"?"Failed to create call. Please review the details and try again.":ce==="update"?"Failed to update call. Please review the details and try again.":"Failed to delete call. Please try again.",tt=lt?.response?.data?.detail||Ee;H.error(tt)}finally{(ce==="create"||ce==="update")&&S(!1),k(!1),i(null)}},re=()=>{A||i(null)},Qe=async()=>{if(n?.id)try{I(!0),await ie.put(`/calls/${n.id}`,{status:_}),H.success(`Status updated to ${B_(_)}`),f(ze=>Array.isArray(ze)?ze.map(ce=>ce.id===n.id?{...ce,status:_}:ce):ze),s(null)}catch(ze){const ce=ze.response?.data?.detail||"Failed to update status.";H.error(ce)}finally{I(!1)}};h.useEffect(()=>{n&&T(Gm(n.status))},[n]);const We=n?a.jsxs("div",{id:"callModalBackdrop",onClick:ze=>ze.target.id==="callModalBackdrop"&&s(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[z&&a.jsx(zt,{message:"Loading call details..."}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),a.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:a.jsx(Ha,{size:25})})]}),a.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:n.subject}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${F7(n.status)}`,children:B_(n.status)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const ze=lt=>{if(!lt)return"";const Ee=new Date(lt),tt=Ee.getFullYear(),be=String(Ee.getMonth()+1).padStart(2,"0"),Xe=String(Ee.getDate()).padStart(2,"0"),M=String(Ee.getHours()).padStart(2,"0"),U=String(Ee.getMinutes()).padStart(2,"0");return`${tt}-${be}-${Xe}T${M}:${U}`},ce=n.lead?"Lead":n.account?"Account":"Lead",ye=n.lead?n.lead.id:n.account?n.account.id:null,Ue=ce==="Lead"?null:n.contact?"Contact":n.deal?"Deal":"Contact",et=ce==="Lead"?null:n.contact?n.contact.id:n.deal?n.deal.id:null;de({subject:n.subject||"",call_time:ze(n.call_time),duration_minutes:n.duration_minutes?String(n.duration_minutes):"",direction:n.direction||"Outgoing",status:n.status||"Planned",notes:n.notes||"",relatedType1:ce,relatedType2:Ue,relatedTo1:ye?String(ye):"",relatedTo2:et?String(et):"",assigned_to:n.call_assign_to?.id?String(n.call_assign_to.id):""}),w(!0),C(n.id),s(null),t(!0)},children:[a.jsx(nn,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>{const ze=n.subject||"this call";i({title:"Delete Call",message:`Are you sure you want to permanently delete "${ze}"? This action cannot be undone.`,confirmLabel:"Delete Call",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:n.id,name:ze}})},children:[a.jsx(Wt,{className:"mr-2"}),"Delete"]})]})]})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(ze=>a.jsx("button",{onClick:()=>fe(ze),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${ge===ze?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:ze},ze))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[ge==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsx(Kl,{label:"Call Time",value:B7(n.call_time)}),a.jsx(Kl,{label:"Duration",value:n.duration_minutes?`${n.duration_minutes} min`:null}),a.jsx(Kl,{label:"Direction",value:n.direction||"--"}),a.jsx(Kl,{label:"Assigned To",value:`${n.call_assign_to.first_name} ${n.call_assign_to.last_name}`}),n.lead&&a.jsx(Kl,{label:"Lead",value:n.lead.title}),n.account&&a.jsx(Kl,{label:"Account",value:n.account.name}),n.contact&&a.jsx(Kl,{label:"Contact",value:`${n.contact.first_name} ${n.contact.last_name}`}),n.deal&&a.jsx(Kl,{label:"Deal",value:n.deal.name}),a.jsx(Kl,{label:"Created At",value:B7(n.created_at)})]})}),ge==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Call Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:n.notes||"No notes available."})]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:_,onChange:ze=>T(ze.target.value),children:[a.jsx("option",{value:"PLANNED",children:"PLANNED"}),a.jsx("option",{value:"HELD",children:"HELD"}),a.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),a.jsx("button",{onClick:Qe,disabled:E,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:E?"Updating...":"Update"})]})]})]})]})]}):null,dt=e?a.jsx("div",{id:"modalBackdrop",onClick:ze=>ze.target.id==="modalBackdrop"&&he(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[a.jsx("button",{onClick:()=>{he(),Ae(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(Vt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:v?"Edit Call":"Add New Call"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:Ie,noValidate:!0,children:[a.jsx(aRe,{label:"Subject",className:"md:col-span-2",name:"subject",value:V.subject,onChange:Te,isSubmitted:Ye,required:!0}),a.jsxs("div",{className:"w-full flex flex-col",children:[a.jsxs("select",{name:"relatedType1",onChange:Te,value:V.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:N,children:[a.jsx("option",{value:"Lead",children:"Lead"}),a.jsx("option",{value:"Account",children:"Account"})]}),a.jsx(H_,{items:Array.isArray(l)?l:[],value:V.relatedTo1??"",placeholder:`Search ${V.relatedType1||"here"}...`,getLabel:ze=>V.relatedType1==="Lead"?ze.title:ze.name??"",onChange:ze=>de(ce=>({...ce,relatedTo1:ze})),required:!0,isSubmitted:Ye,disabled:N})]}),a.jsxs("div",{className:"w-full flex flex-col",children:[a.jsxs("select",{name:"relatedType2",onChange:Te,value:V.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:V.relatedType1==="Lead"||N,children:[a.jsx("option",{value:"Contact",children:"Contact"}),a.jsx("option",{value:"Deal",children:"Deal"})]}),a.jsx(H_,{disabled:V.relatedType1==="Lead"||N,items:Array.isArray(c)?c:[],value:V.relatedTo2??"",placeholder:V.relatedType1==="Lead"?"":Array.isArray(c)&&c.length>0?`Search ${V.relatedType2||"Contact"}...`:`No ${V.relatedType2||""} data found`,getLabel:ze=>V.relatedType2==="Contact"?`${ze.first_name??""} ${ze.last_name??""}`.trim():ze.name??"",onChange:ze=>de(ce=>({...ce,relatedTo2:ze}))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),a.jsx("input",{type:"datetime-local",value:V.call_time,onChange:Te,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),a.jsxs("div",{className:"w-full",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),a.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[a.jsx("input",{type:"tel",value:V.duration_minutes,onChange:Te,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),a.jsx("p",{children:"minutes"})]})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",a.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),a.jsx(H_,{items:Array.isArray(p)?p:[],value:V.assigned_to??"",placeholder:"Search an account...",getLabel:ze=>`${ze.first_name} ${ze.last_name}`,onChange:ze=>de(ce=>({...ce,assigned_to:ze})),required:!0,isSubmitted:Ye})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),a.jsxs("select",{name:"direction",onChange:Te,value:V.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[a.jsx("option",{value:"Incoming",children:"Incoming"}),a.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),a.jsxs("select",{name:"status",onChange:Te,value:V.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[a.jsx("option",{value:"Planned",children:"Planned"}),a.jsx("option",{value:"Held",children:"Held"}),a.jsx("option",{value:"Not held",children:"Not held"})]})]}),a.jsx(nRe,{className:"col-span-2",label:"Notes",value:V.notes,onChange:Te,name:"notes"}),a.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[a.jsx("button",{type:"button",onClick:()=>{he(),Ae(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:N,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:N?"Saving...":v?"Update Call":"Save Call"})]})]})]})}):null;return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(Es,{className:"mr-2 text-blue-600"})," Calls"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{de(ee),w(!1),C(null),t(!0),Ae(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(da,{className:"mr-2"})," Add Call"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:le.map(ze=>a.jsx(tRe,{...ze},ze.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[a.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",defaultValue:ve})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[a.jsxs("select",{defaultValue:X,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[a.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),Z6e.map(ze=>a.jsx("option",{value:ze.value,children:ze.label},ze.value))]}),a.jsxs("select",{defaultValue:je,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[a.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),R.map(ze=>a.jsx("option",{value:ze.name,children:ze.name},ze.id))]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Subject"}),a.jsx("th",{className:"py-3 px-4",children:"Related To"}),a.jsx("th",{className:"py-3 px-4",children:"Call Time"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),a.jsx("tbody",{children:z?a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"py-10",children:a.jsx(zt,{message:"Loading calls..."})})}):Pe.length>0?Pe.map(ze=>a.jsxs("tr",{onClick:()=>Je(ze),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[a.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:ze.subject||"--"}),a.jsxs("td",{className:"py-3 px-4",children:[ze.lead&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ze.lead.title}),ze.account&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ze.account.name}),ze.contact&&a.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[ze.contact.first_name," ",ze.contact.last_name]}),ze.deal&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ze.deal.name})]}),a.jsx("td",{className:"py-3 px-4 text-gray-800",children:ze.call_time?new Date(ze.call_time).toLocaleString():"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800",children:ze?.call_assign_to?`${ze.call_assign_to.first_name} ${ze.call_assign_to.last_name}`:"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${F7(ze.status)}`,children:B_(ze.status)})})]},ze.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),a.jsx(Jt,{totalItems:Be.length,pageSize:Fe,currentPage:Ne,onPrev:()=>Oe(ze=>Math.max(1,ze-1)),onNext:()=>Oe(ze=>ze+1),onPageSizeChange:ze=>{me(ze),Oe(1)},pageSizeOptions:[10,20,30,40,50],label:"calls"})]}),We,dt,r&&a.jsx(sRe,{open:!0,title:r.title,message:r.message,confirmLabel:r.confirmLabel,onConfirm:Me,onCancel:re,loading:A})]})}function tRe({icon:e,title:t,value:n,color:s,bgColor:r}){return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[a.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:a.jsx(e,{size:22})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function aRe({label:e,name:t,value:n,onChange:s,placeholder:r="",type:i="text",required:l=!1,disabled:o=!1,isSubmitted:c=!1,className:d=""}){const u=c&&l&&!n;return a.jsxs("div",{className:d,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
        `})]})}function nRe(e){return a.jsxs("div",{className:e.className,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),a.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function Kl({label:e,value:t}){return a.jsxs("p",{children:[a.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",a.jsx("br",{}),a.jsx("span",{className:"break-words",children:t||"--"})]})}function sRe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}function H_({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,required:o=!1,isSubmitted:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),v=e.find(N=>String(N.id)===String(t)),w=v?s(v):"",b=o&&c&&!t,C=h.useMemo(()=>{const N=f.trim().toLowerCase();return(N?e.filter(A=>(s(A)||"").toLowerCase().includes(N)):e).slice(0,l)},[e,f,s,l]);return h.useEffect(()=>{const N=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),h.useEffect(()=>{d||p("")},[d]),a.jsxs("div",{ref:x,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:d?f:w,placeholder:r,onFocus:()=>!i&&u(!0),onChange:N=>{p(N.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${b?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:C.length>0?C.map(N=>{const S=String(N.id),A=s(N),k=String(t)===S;return a.jsx("button",{type:"button",onClick:()=>{n(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:A||"--"},S)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}const H7=["Not started","In progress","Deferred","Completed"],G7={NOT_STARTED:"Not started","NOT STARTED":"Not started","TO DO":"Not started",IN_PROGRESS:"In progress","IN PROGRESS":"In progress",COMPLETED:"Completed",DEFERRED:"Deferred","Not started":"Not started","In progress":"In progress",Completed:"Completed",Deferred:"Deferred","In Progress":"In progress","To Do":"Not started",Review:"Deferred"},rRe=e=>e&&(G7[e]||G7[String(e).toUpperCase()])||"Not started",iRe=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const n=t.getTimezoneOffset();return new Date(t.getTime()-n*60*1e3).toISOString().slice(0,16)},W7=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},lRe=e=>{const t=e.subject?.trim()??"",n=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),e.status&&String(e.status).toUpperCase();let r=null,i=null,l=null,o=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2&&(o=Number(e.relatedTo2)));const c=e.assignedTo?Number(e.assignedTo):null,d=l||o||i||r,u=l?"Contact":o?"Deal":i?"Account":r?"Lead":null;return{title:t,description:n,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:c,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:l,deal_id:o,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:d,related_type:u}},oRe=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",n=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",l=()=>e.lead?.id||e.lead_id,o=()=>e.account?.id||e.account_id,c=()=>e.contact?.id||e.contact_id,d=()=>e.deal?.id||e.deal_id,u=()=>e.task_assign_to?.id||e.assigned_to,f=()=>e.lead?.title||e.lead_id,p=()=>e.account?.name||e.account_id,x=()=>i||e.contact_id,v=()=>e.deal?.name||e.deal_id;let w="Lead",b="",C="",N="",S="Lead",A="",k="",_="";const T=o(),E=p(),I=l(),z=f();if(T){w="Account",S="Account",A=E,b=String(T);const P=c(),O=d(),B=x(),Q=v();P?(C="Contact",k="Contact",_=B,N=String(P)):O&&(k="Deal",C="Deal",_=Q,N=String(O))}else I?(S="Lead",A=z,w="Lead",b=String(I)):e.related_type==="Account"&&(w="Account",b=String(e.related_to));const $=rRe(e.status);return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:$,dueDate:s,dateAssigned:r,assignedToId:u()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:n,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:S,relatedTo1Text:A,relatedType2Text:k,relatedTo2Text:_,subject:e.title,relatedType1:w,relatedTo1:b,relatedType2:C,relatedTo2:N}};function cRe(){h.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=ta(),[n,s]=h.useState("board"),[r,i]=h.useState(!1),[l,o]=h.useState(null),[c,d]=h.useState(!1),[u,f]=h.useState([]),[p,x]=h.useState(!0),[v,w]=h.useState(""),[b,C]=h.useState("Filter by Status"),[N,S]=h.useState("Filter by Priority"),[A,k]=h.useState([]),[_,T]=h.useState(1),[E,I]=h.useState(10),[z,$]=h.useState(null),[P,O]=h.useState(!1),[B,Q]=h.useState(null),F=vt(),ee=Yt(),[V,de]=h.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""});h.useEffect(()=>{const le=ee.state?.openTaskModal,ge=ee.state?.initialTaskData,fe=ee.state?.taskID;le?(i(!0),ge&&de(Te=>({...Te,...ge})),F(ee.pathname,{replace:!0,state:{}})):fe&&(Q(fe),F(ee.pathname,{replace:!0,state:{}}))},[ee,F]),h.useEffect(()=>{if(B&&u.length>0&&!p){const le=u.find(ge=>ge.id===B);le?ve(le,!0):H.error("Task not found."),Q(null)}},[B,u,p]);const oe=async()=>{try{const le=await ie.get("/users/all");k(Array.isArray(le.data)?le.data:[])}catch(le){console.error("Failed to fetch users:",le),H.error("Failed to fetch users.")}},Z=async()=>{try{x(!0);const le=await ie.get("/tasks/all"),fe=(Array.isArray(le.data)?le.data:[]).map(oRe);fe.sort((Te,Ye)=>{const Ae=Te.createdAt?new Date(Te.createdAt):0;return(Ye.createdAt?new Date(Ye.createdAt):0)-Ae}),f(fe),n==="list"&&T(1)}catch(le){console.error("Failed to load tasks:",le),H.error("Failed to load tasks.")}finally{x(!1)}};h.useEffect(()=>{!t&&e&&(oe(),Z())},[t,e]);const R=()=>{o(null),de({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},ve=(le=null,ge=!1)=>{o(le),d(ge),le?de({id:le.id,subject:le.title||"",description:le.description||"",priority:le.priority||"Normal",status:le.status||"Not started",dueDate:iRe(le.dueDate),assignedTo:le.assignedToId?String(le.assignedToId):"",notes:le.notes||"",relatedType1Text:le.relatedType1Text||"",relatedTo1Text:le.relatedTo1Text||"",relatedType2Text:le.relatedType2Text||"",relatedTo2Text:le.relatedTo2Text||"",relatedType1:le.relatedType1||"",relatedTo1:le.relatedTo1||"",relatedType2:le.relatedType2||"",relatedTo2:le.relatedTo2||""}):R(),i(!0)},X=()=>{i(!1),o(null),d(!1),R()},je=async le=>{const ge=lRe(le);try{l&&!c?(await ie.put(`/tasks/${l.id}`,ge),H.success("Task updated successfully.")):(await ie.post("/tasks/create",ge),H.success("Task created successfully.")),i(!1),await Z()}catch(fe){console.error("Failed to save task:",fe);const Te=fe.response?.data?.detail||"Failed to save task.";H.error(Te)}},Ne=le=>{le&&$({title:"Delete Task",message:a.jsxs(a.Fragment,{children:["Are you sure you want to delete ",a.jsx("span",{className:"font-semibold",children:le.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:le.id}})},Oe=async()=>{if(!z?.action){$(null);return}const{action:le}=z;O(!0);try{le.type==="delete"&&(await ie.delete(`/tasks/${le.targetId}`),H.success("Task deleted successfully."),await Z())}catch(ge){console.error("Task action failed:",ge),H.error("Failed to delete task.")}finally{O(!1),$(null)}},Fe=()=>{P||$(null)},me=h.useMemo(()=>{const le=v.trim().toLowerCase();return[...u].sort((fe,Te)=>{const Ye=fe.createdAt?new Date(fe.createdAt):0;return(Te.createdAt?new Date(Te.createdAt):0)-Ye}).filter(fe=>{const Te=le===""||fe.title?.toLowerCase().includes(le)||fe.description?.toLowerCase().includes(le)||fe.assignedToName?.toLowerCase().includes(le)||fe.createdBy?.toLowerCase().includes(le),Ye=b==="Filter by Status"||fe.status===b,Ae=N==="Filter by Priority"||fe.priority===N;return Te&&Ye&&Ae})},[u,v,b,N]);h.useEffect(()=>{T(1)},[v,b,N,n]),h.useEffect(()=>{if(n==="list"){const le=me.length===0?1:Math.ceil(me.length/E);_>le&&T(le)}},[me.length,_,n]);const Be=h.useMemo(()=>{if(n==="board")return me;const le=(_-1)*E;return me.slice(le,le+E)},[me,_,n]),Pe=h.useMemo(()=>{const le=new Date;return[{title:"To Do",value:u.filter(ge=>ge.status==="Not started").length,icon:Is,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:u.filter(ge=>ge.status==="In progress").length,icon:hl,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:u.filter(ge=>ge.status==="Completed").length,icon:xn,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:u.filter(ge=>ge.dueDate&&new Date(ge.dueDate)<le&&ge.status!=="Completed").length,icon:Ef,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:u.filter(ge=>ge.priority==="High").length,icon:ko,color:"text-orange-600",bgColor:"bg-orange-100"}]},[u]),we=le=>le.dueDate&&new Date(le.dueDate)<new Date&&le.status!=="Completed",ne=le=>{switch(le.status){case"Not started":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Deferred":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},Le=le=>{switch(le){case"Not started":return"bg-blue-100 text-blue-700";case"In progress":return"bg-purple-100 text-purple-700";case"Deferred":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},pe=le=>{switch(le){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&a.jsx(zt,{message:"Loading tasks..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(hl,{className:"text-blue-600"})," Tasks Board"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{type:"button",onClick:()=>ve(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[a.jsx(da,{})," Create Task"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Pe.map(le=>a.jsx(dRe,{...le},le.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search tasks",value:v,onChange:le=>w(le.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[a.jsxs("select",{value:b,onChange:le=>C(le.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"Filter by Status"}),H7.map(le=>a.jsx("option",{children:le},le))]}),a.jsxs("select",{value:N,onChange:le=>S(le.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"Filter by Priority"}),a.jsx("option",{children:"High"}),a.jsx("option",{children:"Normal"}),a.jsx("option",{children:"Low"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${n==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),a.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${n==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&n==="board"&&(me.length>0?a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:H7.map(le=>{const ge=Be.filter(fe=>fe.status===le);return a.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative rounded-md",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),a.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:le}),a.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:ge.length})]}),a.jsx("div",{className:`space-y-3 ${ge.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:ge.length>0?ge.map(fe=>a.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${ne(fe)}`,onClick:()=>ve(fe,!0),children:[a.jsxs("div",{className:"text-left flex-1",children:[a.jsx("p",{className:"font-medium text-gray-800 text-sm",children:fe.title}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",fe.priority]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",fe.assignedToName]}),a.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",a.jsx("span",{className:we(fe)?"text-red-600":"text-gray-600",children:fe.dateAssigned?W7(fe.dateAssigned):""})]})]}),a.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[a.jsx("button",{type:"button",onClick:Te=>{Te.stopPropagation(),ve(fe)},className:"text-blue-500 hover:text-blue-700",children:a.jsx(rn,{})}),a.jsx("button",{type:"button",onClick:Te=>{Te.stopPropagation(),Ne(fe)},className:"text-red-500 hover:text-red-700",children:a.jsx(Wt,{})})]})]},fe.id)):a.jsx("div",{className:"text-center py-10 text-gray-500",children:"No tasks"})})]},le)})}):a.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No tasks found."})),!p&&!t&&n==="list"&&a.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"})]})}),a.jsx("tbody",{children:Be.length>0?Be.map(le=>a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",onClick:()=>{ve(le,!0)},children:[a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",children:le.title}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Le(le.status||"Not started")}`,children:le.status||"Not started"})}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${pe(le.priority||"Low")}`,children:le.priority||"Low"})}),a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:le.assignedToName||"Unassigned"}),a.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${we(le)?"text-red-600 font-medium":""}`,children:le.dateAssigned?W7(le.dateAssigned):""})]},le.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No tasks found."})})})]})})}),!p&&!t&&n==="list"&&a.jsx(Jt,{className:"mt-6",totalItems:me.length,pageSize:E,currentPage:me.length===0?0:_,onPrev:()=>T(le=>Math.max(le-1,1)),onNext:()=>T(le=>Math.min(le+1,Math.max(1,Math.ceil(me.length/E)||1))),onPageSizeChange:le=>{I(le),T(1)},pageSizeOptions:[10,20,30,40,50],label:"tasks"}),a.jsx(Ox,{isOpen:r,onClose:X,onSave:je,onEdit:()=>d(!1),setFormData:de,formData:V,isEditing:!c&&!!l,viewMode:c,users:A,currentUser:e,onDelete:Ne}),z&&a.jsx(uRe,{open:!0,title:z.title,message:z.message,confirmLabel:z.confirmLabel,cancelLabel:z.cancelLabel,variant:z.variant,onConfirm:Oe,onCancel:Fe,loading:P})]})}function dRe({icon:e,title:t,value:n,color:s,bgColor:r,onClick:i}){return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function uRe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r,variant:i,loading:l,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}const XQ=e=>e?e.toUpperCase():"",zy=e=>{const t=XQ(e);return t==="PLANNED"||t==="IN PROGRESS"?"PLANNED":t==="HELD"||t==="DONE"?"HELD":t==="NOT_HELD"||t==="NOT HELD"?"NOT_HELD":"PLANNED"},mRe=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},fRe=e=>{const t=XQ(e);switch(t==="PLANNED"?"PENDING":t==="HELD"?"COMPLETED":t==="NOT_HELD"?"CANCELLED":t){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},G_={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},hRe=()=>{const e=vt(),t=Yt(),[n]=ks(),s=n.get("id"),r=t.pathname==="/admin/meetings/info";h.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[i,l]=h.useState([]),[o,c]=h.useState(!1),[d,u]=h.useState([]),[f,p]=h.useState(""),[x,v]=h.useState("Filter by Status"),[w,b]=h.useState(!1),[C,N]=h.useState(null),[S,A]=h.useState(1),[k,_]=h.useState(10),[T,E]=h.useState(G_),[I,z]=h.useState(!1),[$,P]=h.useState(null),[O,B]=h.useState(!1),[Q,F]=h.useState(null),[ee,V]=h.useState(!1),[de,oe]=h.useState(null);h.useEffect(()=>{const ne=t.state?.openMeetingModal,Le=t.state?.initialMeetingData?.relatedTo||n.get("id"),pe=t.state?.meetingID;ne||Le?(b(!0),t.state?.initialMeetingData&&E(le=>({...le,...t.state.initialMeetingData})),e(t.pathname,{replace:!0,state:{}})):pe&&(oe(pe),e(t.pathname,{replace:!0,state:{}}))},[t,n,e]),h.useEffect(()=>{if(de&&i.length>0&&!o){const ne=i.find(Le=>Le.id===de);ne?N(ne):H.error("Meeting not found."),oe(null)}},[de,i,o]);const Z=async()=>{if(s&&r){const ne=sessionStorage.getItem("meetingDetailData");if(ne)try{const Le=JSON.parse(ne);if(Le.id===parseInt(s)){N(Le),sessionStorage.removeItem("meetingDetailData");return}}catch(Le){console.error(Le)}}c(!0);try{const ne=await ie.get("/meetings/admin/fetch-all"),pe=[...Array.isArray(ne.data)?ne.data:[]].sort((le,ge)=>{const fe=le?.createdAt?new Date(le.createdAt).getTime():0;return(ge?.createdAt?new Date(ge.createdAt).getTime():0)-fe});if(l(pe),s&&!C){const le=pe.find(ge=>ge.id===parseInt(s));le&&N(le)}console.log(ne.data)}catch{H.error("Failed to load meetings.")}finally{c(!1)}},R=async()=>{try{const ne=await ie.get("/users/all");u(Array.isArray(ne.data)?ne.data:[])}catch(ne){console.error(ne)}};h.useEffect(()=>{Z(),R()},[]);const ve=ne=>p(ne.target.value),X=h.useMemo(()=>{const ne=f.trim().toLowerCase(),Le=x.trim().toUpperCase();return i.filter(pe=>{const le=[pe?.activity,pe?.description,pe?.relatedTo,pe?.assignedTo],ge=ne===""||le.some(Te=>Te&&Te.toString().toLowerCase().includes(ne)),fe=Le==="FILTER BY STATUS"||zy(pe.status||"PENDING")===Le;return ge&&fe})},[i,f,x]),je=h.useMemo(()=>{const ne=(S-1)*k;return X.slice(ne,ne+k)},[X,S]),Ne=()=>{b(!1),E(G_),z(!1),P(null),B(!1)},Oe=()=>{E(G_),z(!1),P(null),b(!0)},Fe=ne=>{let Le="";if(ne.meet_assign_to?.id)Le=String(ne.meet_assign_to.id);else if(ne.assignedTo){const Je=d.find(he=>`${he.first_name} ${he.last_name}`===ne.assignedTo);Le=Je?String(Je.id):""}const pe=Je=>{if(!Je)return"";try{const he=new Date(Je),Me=he.getTimezoneOffset()*6e4;return new Date(he.getTime()-Me).toISOString().slice(0,16)}catch{return""}};let le="Lead",ge="",fe="Contact",Te="";if(ne.lead)le="Lead",ge=String(ne.lead.id);else if(ne.account)le="Account",ge=String(ne.account.id),ne.contact?(fe="Contact",Te=String(ne.contact.id)):ne.deal&&(fe="Deal",Te=String(ne.deal.id));else if(ne.relatedType||ne.related_type){const Je=ne.relatedType||ne.related_type,he=ne.related_to||ne.relatedToId;Je==="Lead"?(le="Lead",ge=String(he)):(le="Account",ge=ne.account_id?String(ne.account_id):"")}const Ye={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},Ae=zy(ne.status),Ie=Ye[Ae]||"Planned";E({subject:ne.subject||ne.activity||"",location:ne.location||"",startTime:pe(ne.start_time||ne.startTime),endTime:pe(ne.end_time||ne.endTime),status:Ie,notes:ne.description||ne.notes||"",assignedTo:Le,relatedType1:le,relatedTo1:ge,relatedType2:fe,relatedTo2:Te}),z(!0),P(ne.id),N(null),b(!0)},me=ne=>{if(!ne.subject?.trim())return H.error("Subject is required.");if(!ne.startTime)return H.error("Start time is required.");if(ne.endTime&&!(new Date(ne.endTime)-new Date(ne.startTime)>0))return H.error("End time must be after start time.");ne.relatedType1,ne.relatedTo1,ne.relatedType1==="Account"&&ne.relatedType2&&ne.relatedTo2&&(ne.relatedType2,ne.relatedTo2);const Le={...ne,assignedTo:parseInt(ne.assignedTo),relatedTo1:parseInt(ne.relatedTo1),relatedTo2:parseInt(ne.relatedTo2)},pe=I&&$?"update":"create";F({title:pe==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${pe} "${Le.subject}"?`,confirmLabel:pe==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:pe,payload:Le,targetId:$,name:Le.subject}})},Be=async()=>{if(!Q?.action)return;const{type:ne,payload:Le,targetId:pe,name:le}=Q.action;console.log(Le),V(!0);try{ne==="create"?(B(!0),await ie.post("/meetings/create",Le),H.success(`Meeting "${le}" created.`),Ne(),await Z()):ne==="update"?(B(!0),await ie.put(`/meetings/${pe}`,Le),H.success(`Meeting "${le}" updated.`),Ne(),await Z()):ne==="delete"&&(await ie.delete(`/meetings/${pe}`),H.success(`Meeting "${le}" deleted.`),C?.id===pe&&N(null),await Z())}catch(ge){const fe=ge.response?.data?.detail||"Action failed.";H.error(typeof fe=="string"?fe:JSON.stringify(fe)),console.error(fe)}finally{B(!1),V(!1),F(null)}},Pe=ne=>{F({title:"Delete Meeting",message:`Permanently delete "${ne.activity}"?`,confirmLabel:"Delete",variant:"danger",action:{type:"delete",targetId:ne.id,name:ne.activity}})},we=async(ne,Le)=>{try{await ie.put(`/meetings/${ne}`,{status:Le}),H.success("Status updated"),Z(),N(null)}catch{H.error("Failed to update status")}};return r&&s?C?a.jsx(qc,{meeting:C,onClose:()=>{N(null),e("/admin/dashboard")},onEdit:Fe,onDelete:Pe,onStatusUpdate:we}):a.jsx(zt,{message:"Loading meeting..."}):a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[o&&a.jsx(zt,{message:"Loading meetings..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[a.jsx(_t,{className:"mr-2 text-blue-600"})," Meetings"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:Oe,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[a.jsx(da,{className:"mr-2"})," Add Meeting"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[a.jsx(Bt,{className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search meetings",value:f,onChange:ve,className:"w-full outline-none"})]}),a.jsxs("select",{value:x,onChange:ne=>v(ne.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[a.jsx("option",{children:"Filter by Status"}),a.jsx("option",{value:"PLANNED",children:"PLANNED"}),a.jsx("option",{value:"HELD",children:"HELD"}),a.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Subject"}),a.jsx("th",{className:"py-3 px-4",children:"Related To"}),a.jsx("th",{className:"py-3 px-4",children:"Start Time"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned"}),a.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),a.jsx("tbody",{children:je.length>0?je.map(ne=>a.jsxs("tr",{onClick:()=>N(ne),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[a.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:ne.subject}),a.jsxs("td",{className:"py-3 px-4",children:[ne.lead&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ne.lead.title}),ne.account&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ne.account.name}),ne.contact&&a.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[ne.contact.first_name," ",ne.contact.last_name]}),ne.deal&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ne.deal.name})]}),a.jsx("td",{className:"py-3 px-4",children:mRe(ne.start_time)}),a.jsxs("td",{className:"py-3 px-4",children:[ne.meet_assign_to.first_name," ",ne.meet_assign_to.last_name]}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${fRe(zy(ne.status))}`,children:zy(ne.status).replace("_"," ")})})]},ne.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),a.jsx(Jt,{totalItems:X.length,pageSize:k,currentPage:S,onPrev:()=>A(ne=>Math.max(1,ne-1)),onNext:()=>A(ne=>ne+1),onPageSizeChange:ne=>{_(ne),A(1)},pageSizeOptions:[10,20,30,40,50],label:"meetings"}),w&&a.jsx(uj,{onClose:Ne,formData:T,setFormData:E,isEditing:I,onSubmit:me,isSubmitting:O||ee,users:d}),C&&a.jsx(qc,{meeting:C,onClose:()=>N(null),onEdit:Fe,onDelete:Pe,onStatusUpdate:we}),Q&&a.jsx(gRe,{open:!0,title:Q.title,message:Q.message,confirmLabel:Q.confirmLabel,variant:Q.variant,onConfirm:Be,onCancel:()=>F(null),loading:ee})]})};function gRe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{onClick:c,disabled:l,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),a.jsx("button",{onClick:o,disabled:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${d}`,children:l?"...":s})]})]})})}const fj=[{value:"CEO",label:"CEO"},{value:"Admin",label:"Admin"},{value:"Group Manager",label:"Group Manager"},{value:"Manager",label:"Manager"},{value:"Marketing",label:"Marketing"},{value:"Sales",label:"Sales"}],ng={firstName:"",lastName:"",email:"",password:"",role:""},pRe={CEO:"bg-purple-100 text-purple-700",ADMIN:"bg-purple-100 text-purple-700",GROUP_MANAGER:"bg-indigo-100 text-indigo-700",MANAGER:"bg-blue-100 text-blue-700",MARKETING:"bg-yellow-100 text-yellow-700",SALES:"bg-green-100 text-green-700"},nl=e=>e?e.toString().trim().replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/\s+/g,"_").toUpperCase():"",xRe=e=>{const t=nl(e),n=fj.find(s=>nl(s.value)===t);return n?n.value:e||""},PT=e=>{const t=nl(e),n=fj.find(s=>nl(s.value)===t);return n?n.label:typeof e=="string"?e.toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()):"--"},V7=e=>{if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",","")},W_=(e,{size:t="sm"}={})=>{const n=nl(e),s=pRe[n]||"bg-gray-100 text-gray-700",r=t==="lg"?"px-3 py-1 text-sm":t==="md"?"px-2.5 py-1 text-sm":"px-2 py-1 text-xs";return a.jsx("span",{className:`${r} font-semibold rounded-md inline-flex items-center justify-center ${s}`,children:PT(e)})},yRe=(e,t)=>{const n=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${n}${s}`.toUpperCase()||"U"},q7=e=>[...e].sort((t,n)=>{const s=t.created_at?new Date(t.created_at).getTime():0;return(n.created_at?new Date(n.created_at).getTime():0)-s});function bRe(){const{user:e,loading:t}=ta(),[n,s]=h.useState([]),[r,i]=h.useState(!1),[l,o]=h.useState(""),[c,d]=h.useState(""),[u,f]=h.useState(null),[p,x]=h.useState(!1),[v,w]=h.useState(!1),[b,C]=h.useState(null),[N,S]=h.useState(ng),[A,k]=h.useState(!1),[_,T]=h.useState(null),[E,I]=h.useState(!1),[z,$]=h.useState(1),[P,O]=h.useState(10),[B,Q]=h.useState("Overview"),[F,ee]=h.useState(""),[V,de]=h.useState(!1),oe=nl(e?.role),Z=["ADMIN","CEO","GROUP MANAGER","MANAGER"].includes(oe),R=!t&&Z,ve=h.useMemo(()=>{const re=fj.filter(Qe=>nl(Qe.value)!=="CEO");return[{label:"Filter by Roles",value:""},{label:"CEO",value:"CEO"},...re]},[]),X=h.useCallback(re=>{re&&(s(Qe=>Qe.map(We=>We.id===re?{...We,highlight:!0}:We)),setTimeout(()=>{s(Qe=>Qe.map(We=>We.id===re?{...We,highlight:!1}:We))},2e3))},[]),je=h.useCallback(async()=>{i(!0);try{const re=await ie.get("/users/all"),Qe=Array.isArray(re.data)?re.data:[],We=q7(Qe);s(We),f(dt=>dt&&(We.find(ce=>ce.id===dt.id)||null)),console.log(re.data)}catch(re){console.error("Error fetching users:",re);const Qe=re.response?.data?.detail||"Failed to load users. Please try again later.";H.error(Qe)}finally{i(!1)}},[]);h.useEffect(()=>{!t&&!Z&&e&&H.error("You are not authorized to access User Management.")},[Z,t,e]),h.useEffect(()=>{t||!Z||je()},[t,Z,je]),h.useEffect(()=>{document.title="Users | Sari-Sari CRM"},[]);const Ne=h.useMemo(()=>{const re=l.trim().toLowerCase(),Qe=nl(c);return q7(n.filter(We=>{if(!We)return!1;const dt=re===""||[We.first_name,We.last_name,`${We.first_name||""} ${We.last_name||""}`,We.email,PT(We.role)].filter(Boolean).some(ce=>ce.toString().toLowerCase().includes(re)),ze=Qe===""||Qe==="CEO"&&["CEO","ADMIN"].includes(nl(We.role))||nl(We.role)===Qe;return dt&&ze}))},[n,l,c]),Oe=Math.max(1,Math.ceil(Ne.length/P)||1);h.useEffect(()=>{$(1)},[l,c]),h.useEffect(()=>{$(re=>{const Qe=Math.max(1,Math.ceil(Ne.length/P)||1);return re>Qe?Qe:re})},[Ne.length]);const Fe=h.useMemo(()=>{const re=(z-1)*P;return Ne.slice(re,re+P)},[Ne,z]);Ne.length===0||(z-1)*P+1,Math.min(z*P,Ne.length);const me=()=>$(re=>Math.max(re-1,1)),Be=()=>$(re=>Math.min(re+1,Oe)),Pe=()=>{S(ng),w(!1),C(null),x(!0)},we=re=>{console.log(re),f(re),Q("Overview"),ee(re?.is_active?"Active":"Inactive")},ne=re=>{re.target.id==="userModalBackdrop"&&!E&&Le()},Le=()=>{f(null)},pe=(re,Qe)=>{S(We=>({...We,[re]:Qe}))},le=()=>{const re="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let Qe="";for(let We=0;We<10;We+=1)Qe+=re.charAt(Math.floor(Math.random()*re.length));pe("password",Qe)},ge=()=>{A||E||(x(!1),S(ng),C(null),w(!1))},fe=re=>{S({firstName:re.first_name||"",lastName:re.last_name||"",email:re.email||"",password:"",role:xRe(re.role)}),w(!0),C(re.id),x(!0),f(null)},Te=re=>{T({title:"Delete User",message:a.jsxs("span",{children:["Are you sure you want to delete"," ",a.jsxs("span",{className:"font-semibold",children:[re.first_name," ",re.last_name]}),"? This action cannot be undone."]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:re.id,name:`${re.first_name||""} ${re.last_name||""}`.trim()||re.email||"user"}})},Ye=re=>{re.preventDefault();const Qe=N.firstName.trim(),We=N.lastName.trim(),dt=N.email.trim(),ze=N.password.trim(),ce="Sales",ye=!(v&&b);if(!Qe||!dt||!ce){H.warn("Please fill in all required fields.");return}if(ye&&!ze){H.warn("Please fill in all required fields.");return}if(ze&&ze.length<8){H.warn("Password should be at least 8 characters long.");return}const Ue={first_name:Qe,last_name:We,email:dt,role:ce};console.log(Ue),(ye||ze)&&(Ue.password=ze);const et=`${Qe} ${We}`.trim(),lt=ye?"create":"update";T({title:lt==="create"?"Confirm New User":"Confirm User Update",message:lt==="create"?a.jsxs("span",{children:["Create user ",a.jsx("span",{className:"font-semibold",children:et})," with role"," ",a.jsx("span",{className:"font-semibold",children:PT(ce)}),"?"]}):a.jsxs("span",{children:["Save changes for"," ",a.jsx("span",{className:"font-semibold",children:et||dt}),"?"]}),confirmLabel:lt==="create"?"Create User":"Update User",cancelLabel:"Cancel",variant:"primary",action:{type:lt,payload:Ue,targetId:b,name:et||dt}})},Ae=async()=>{if(!_?.action){T(null);return}const{action:re}=_,{type:Qe,payload:We,targetId:dt,name:ze}=re;I(!0),(Qe==="create"||Qe==="update")&&k(!0);try{if(Qe==="create"){const ye=(await ie.post("/users/createuser",We)).data;await je(),X(ye.id),H.success(`User "${ze}" created successfully.`),x(!1),S(ng),C(null),w(!1)}else if(Qe==="update"){if(!dt)throw new Error("Missing user identifier for update.");const ye=(await ie.put(`/users/updateuser/${dt}`,We)).data;await je(),f(null),X(ye.id),H.success(`User "${ze}" updated successfully.`),x(!1),S(ng),C(null),w(!1)}else if(Qe==="delete"){if(!dt)throw new Error("Missing user identifier for deletion.");await ie.delete(`/users/deleteuser/${dt}`),s(ce=>ce.map(ye=>ye.id===dt?{...ye,is_active:!1}:ye)),u&&u.id===dt&&(f(null),ee("")),H.success(`User "${ze}" deactivated successfully.`)}}catch(ce){console.error("User management error:",ce);const ye=Qe==="create"?"Failed to create user. Please review the details and try again.":Qe==="update"?"Failed to update user. Please review the details and try again.":"Failed to delete user. Please try again.",Ue=ce.response?.data?.detail||ye;H.error(Ue)}finally{(Qe==="create"||Qe==="update")&&k(!1),I(!1),T(null)}},Ie=()=>{E||T(null)},Je=async()=>{if(!u||!F)return;const re=u.is_active?"Active":"Inactive";if(F===re)return;const Qe=F==="Active";de(!0);try{const dt=(await ie.put(`/users/updateuser/${u.id}`,{is_active:Qe})).data;s(ze=>ze.map(ce=>ce.id===dt.id?dt:ce)),f(null),ee(""),H.success(`User status updated to ${F}`)}catch(We){console.error("Failed to update user status:",We);const dt=We.response?.data?.detail||"Failed to update user status. Please try again.";H.error(dt)}finally{de(!1)}},he=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[(r||t||!R)&&a.jsx(zt,{}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(lw,{className:"mr-2 text-blue-600"}),"User Management"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{type:"button",onClick:Pe,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(Ba,{className:"mr-2"})," Add User"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search users",value:l,onChange:re=>o(re.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:c,onChange:re=>d(re.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:ve.map(re=>a.jsx("option",{value:re.value,children:re.label},re.value))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Fullname"}),a.jsx("th",{className:"py-3 px-4",children:"Email"}),a.jsx("th",{className:"py-3 px-4",children:"Role"}),a.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),a.jsx("tbody",{children:r?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:3,children:"Loading users..."})}):Ne.length===0?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-400",colSpan:4,children:"No users found."})}):Fe.map(re=>a.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${re.highlight?"bg-green-50":""} ${re.is_active?"":"opacity-60 bg-gray-50"}`,children:[a.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>we(re),children:a.jsxs("div",{className:"font-medium text-blue-600 hover:underline text-sm",children:[re.first_name," ",re.last_name]})}),a.jsx("td",{className:"py-3 px-4 cursor-pointer text-sm",onClick:()=>we(re),children:re.email}),a.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>we(re),children:W_(re.role)}),a.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>we(re),children:a.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-md ${re.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:re.is_active?"Active":"Inactive"})})]},re.id))})]})}),a.jsx(Jt,{className:"mt-4",totalItems:Ne.length,pageSize:P,currentPage:z,onPrev:me,onNext:Be,onPageSizeChange:re=>{O(re),$(1)},pageSizeOptions:[10,20,30,40,50],label:"users"})]}),Me=u?a.jsx("div",{id:"userModalBackdrop",onClick:ne,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in p-4 sm:p-6 md:p-8 font-inter relative",children:[a.jsx("div",{className:"flex justify-end w-full",children:a.jsx("button",{onClick:Le,className:"text-gray-500 hover:text-gray-700 transition mb-5 cursor-pointer",children:a.jsx(Ha,{size:30})})}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7 mb-4 lg:mb-6 md:mb-4",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[u.profile_picture?a.jsx("img",{src:u.profile_picture,alt:`${u.first_name} ${u.last_name}`,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover border border-gray-200 shadow-sm"}):a.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-200 text-gray-700 flex items-center justify-center text-lg sm:text-xl font-semibold border border-gray-200 shadow-sm",children:yRe(u.first_name,u.last_name)}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[u.first_name," ",u.last_name]}),a.jsx("p",{className:"text-sm text-gray-500 break-all",children:u.email})]})]}),W_(u.role,{size:"md"})]}),!["CEO","ADMIN","GROUP MANAGER","GROUP_MANAGER"].includes(u.role.toUpperCase())&&a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>fe(u),disabled:E,children:[a.jsx(rn,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>Te(u),disabled:E,children:[a.jsx(Wt,{className:"mr-2"}),"Delete"]})]})]}),a.jsx("div",{className:"border-b border-gray-200 mb-6"}),a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview"].map(re=>a.jsx("button",{onClick:()=>Q(re),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${B===re?"bg-[#5c636d] text-white border-white":"text-white hover:bg-[#5c636d]"}`,children:re},re))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsx("div",{className:"lg:col-span-3",children:B==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:u.email||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Role:"}),a.jsx("p",{children:W_(u.role,{size:"sm"})})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Status:"}),a.jsx("p",{children:u.is_active?"Active":"Inactive"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Auth Provider:"}),a.jsx("p",{children:u.auth_provider?u.auth_provider.toString().replace(/\b\w/g,re=>re.toUpperCase()):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Phone Number:"}),a.jsx("p",{children:u.phone_number||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Company:"}),a.jsx("p",{children:u.company?.company_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Company Number:"}),a.jsx("p",{children:u.company?.company_number||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Related to CEO:"}),a.jsx("p",{children:u.manager?`${u.manager.first_name} ${u.manager.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:V7(u.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Login:"}),a.jsx("p",{children:u.last_login?V7(u.last_login):"Never"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Profile Picture:"}),a.jsx("p",{children:u.profile_picture?a.jsx("a",{href:u.profile_picture,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline break-all",children:"View image"}):"N/A"})]})]})})}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsx("div",{className:"flex flex-col gap-2 w-full",children:a.jsxs("button",{type:"button",onClick:()=>{if(!u.email){alert("No email address available");return}const re=encodeURIComponent(u.email),Qe=encodeURIComponent(""),We=encodeURIComponent(""),dt=`https://mail.google.com/mail/?view=cm&fs=1&to=${re}&su=${Qe}&body=${We}`;window.open(dt,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Ka,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]})})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:F||(u.is_active?"Active":"Inactive"),onChange:re=>ee(re.target.value),children:[a.jsx("option",{value:"Active",children:"Active"}),a.jsx("option",{value:"Inactive",children:"Inactive"})]}),a.jsx("button",{onClick:Je,disabled:V||F===(u.is_active?"Active":"Inactive"),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${V||F===(u.is_active?"Active":"Inactive")?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:V?"Updating...":"Update"})]})]})]})]})}):null;return a.jsxs(a.Fragment,{children:[he,Me,a.jsx(vRe,{open:p,isEditing:v,isSubmitting:A,confirmProcessing:E,formData:N,onClose:ge,onSubmit:Ye,onChange:pe,onGeneratePassword:le}),a.jsx(wRe,{open:!!_,title:_?.title,message:_?.message,confirmLabel:_?.confirmLabel,cancelLabel:_?.cancelLabel,variant:_?.variant,loading:E,onConfirm:Ae,onCancel:Ie})]})}function vRe({open:e,isEditing:t,isSubmitting:n,confirmProcessing:s,formData:r,onClose:i,onSubmit:l,onChange:o,onGeneratePassword:c}){if(!e)return null;const d=n||s;return a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-lg border border-gray-200 p-6 sm:p-8 relative overflow-y-auto max-h-[90vh]",children:[a.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:d,children:a.jsx(Vt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-6 text-center",children:t?"Edit User":"Add New User"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:l,children:[a.jsx(Uy,{label:"First Name",value:r.firstName,onChange:u=>o("firstName",u),placeholder:"John",required:!0,disabled:d}),a.jsx(Uy,{label:"Last Name",value:r.lastName,onChange:u=>o("lastName",u),placeholder:"Doe",required:!0,disabled:d}),a.jsx(Uy,{label:"Email",type:"email",value:r.email,onChange:u=>o("email",u),placeholder:"john.doe@company.com",required:!0,disabled:d||t}),a.jsx(Uy,{label:"Role",type:"select",disabled:!0,value:"Sales",onChange:u=>o("role",u),options:[{value:"",label:"Select role"},...fj],required:!0}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Password"}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[a.jsx("input",{type:"text",value:r.password,onChange:u=>o("password",u.target.value),placeholder:t?"Leave blank to keep current password":"Enter or generate password",required:!t,disabled:d,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"}),a.jsx("button",{type:"button",onClick:c,className:"flex items-center justify-center px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-60",disabled:d,children:"Generate"})]}),t?a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Setting a password will reset the user's credentials; leave it blank to keep the current password."}):a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long."})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:i,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:d,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:d,children:n?"Saving...":t?"Update User":"Save User"})]})]})]})})}function Uy({label:e,type:t="text",value:n,onChange:s,placeholder:r,options:i=[],required:l=!1,disabled:o=!1}){return a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t==="select"?a.jsx("select",{value:n??"",onChange:c=>s(c.target.value),required:l,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100",children:i.map(c=>a.jsx("option",{value:c.value,children:c.label},c.value))}):a.jsx("input",{type:t,value:n??"",onChange:c=>s(c.target.value),placeholder:r,required:l,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"})]})}function wRe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-black hover:bg-gray-800 border border-black";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("div",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}function NRe({toggleSidebar:e}){const[t,n]=h.useState(!1),s=h.useRef(null),r=Yt(),{logout:i}=zs(),{user:l,fetchUser:o}=ta(),c={"/marketing/dashboard":"Dashboard","/marketing/contacts":"Contacts","/marketing/accounts":"Accounts","/marketing/leads":"Leads","/marketing/tasks":"Tasks","/marketing/campaigns":"Campaign","/marketing/templates":"Templates"};h.useEffect(()=>{o()},[]);const d=c[r.pathname]||"Marketing Panel";return h.useEffect(()=>{function u(f){s.current&&!s.current.contains(f.target)&&n(!1)}return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[]),a.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-6 py-3 border-b relative",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:a.jsx(Op,{className:"text-2xl"})}),a.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:d})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("button",{className:"relative text-gray-600 hover:text-gray-800",children:[a.jsx(Pp,{className:"text-xl"}),a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs w-4 h-4 flex items-center justify-center rounded-full",children:"3"})]}),a.jsxs("div",{className:"relative",ref:s,children:[a.jsxs("button",{onClick:()=>n(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[a.jsx("img",{src:l?.profile_picture,alt:"",className:"w-8 aspect-square object-cover rounded-full"}),a.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[l?.first_name," ",l?.last_name]})]}),t&&a.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-gray-100 shadow-lg rounded border z-50",children:a.jsxs("div",{className:"flex flex-col",children:[a.jsx("button",{className:"px-4 py-2 text-sm hover:bg-gray-200 text-left",children:"Manage Account"}),a.jsx("div",{className:"border-t my-1"}),a.jsx("button",{onClick:i,className:"px-4 py-2 text-sm bg-red-500 text-white rounded mx-2 my-2 hover:bg-red-600",children:"Logout"})]})})]})]})]})}function jRe(){const[e,t]=h.useState(!1),[n,s]=h.useState(!1),[r,i]=h.useState(!1),[l,o]=h.useState(!1),c=Yt(),{fetchUser:d}=ta();h.useEffect(()=>{d()},[]),h.useEffect(()=>{document.title="Panel | Sari-Sari CRM"},[]);const u="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",f="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition",p=["/marketing/campaigns","/marketing/templates"],x=["/marketing/accounts","/marketing/contacts","/marketing/leads"],v=["/marketing/tasks"],w=p.includes(c.pathname),b=x.includes(c.pathname),C=v.includes(c.pathname);return h.useEffect(()=>{w&&t(!0),b&&s(!0),C&&i(!0)},[w,b,C]),a.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[a.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${l?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[a.jsx("div",{className:"bg-[#fbbf24] text-gray-900 font-bold text-xl px-6 py-4.5 tracking-wide",children:"Marketing CRM"}),a.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[a.jsxs(Ot,{to:"/marketing/dashboard",className:({isActive:N})=>N?u:f,children:[a.jsx(Dp,{className:"text-lg"}),a.jsx("span",{children:"Dashboard"})]}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!n),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(Kt,{className:"text-lg"}),"Sales"]}),a.jsx(St,{className:`transition-transform ${n?"rotate-180":""}`})]}),n&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(Ot,{to:"/marketing/accounts",className:({isActive:N})=>N?u:f,children:[a.jsx(La,{})," Accounts"]}),a.jsxs(Ot,{to:"/marketing/contacts",className:({isActive:N})=>N?u:f,children:[a.jsx(Zt,{})," Contacts"]}),a.jsxs(Ot,{to:"/marketing/leads",className:({isActive:N})=>N?u:f,children:[a.jsx(Ba,{})," Leads"]})]})]}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>t(!e),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(Zs,{className:"text-lg"}),"Tools"]}),a.jsx(St,{className:`transition-transform ${e?"rotate-180":""}`})]}),e&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(Ot,{to:"/marketing/campaigns",className:({isActive:N})=>N?u:f,children:[a.jsx(use,{})," Campaign"]}),a.jsxs(Ot,{to:"/marketing/templates",className:({isActive:N})=>N?u:f,children:[a.jsx(ZT,{})," Templates"]})]})]}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!r),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(ys,{className:"text-lg"}),"Activity"]}),a.jsx(St,{className:`transition-transform ${r?"rotate-180":""}`})]}),r&&a.jsx("div",{className:"ml-6 mt-2 space-y-1",children:a.jsxs(Ot,{to:"/marketing/tasks",className:({isActive:N})=>N?u:f,children:[a.jsx(Gt,{})," Tasks"]})})]})]}),a.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Marketing CRM"]})]}),l&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>o(!1)}),a.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[a.jsx(NRe,{toggleSidebar:()=>o(!l)}),a.jsx("main",{className:"flex-1 p-6 overflow-auto",style:{backgroundColor:"#fffeee"},children:a.jsx(Cp,{})})]})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Mx(e){return e+.5|0}const Dc=(e,t,n)=>Math.max(Math.min(e,n),t);function Cg(e){return Dc(Mx(e*2.55),0,255)}function Rc(e){return Dc(Mx(e*255),0,255)}function to(e){return Dc(Mx(e/2.55)/100,0,1)}function Y7(e){return Dc(Mx(e*100),0,100)}const qr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},DT=[..."0123456789ABCDEF"],CRe=e=>DT[e&15],SRe=e=>DT[(e&240)>>4]+DT[e&15],Fy=e=>(e&240)>>4===(e&15),_Re=e=>Fy(e.r)&&Fy(e.g)&&Fy(e.b)&&Fy(e.a);function ARe(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&qr[e[1]]*17,g:255&qr[e[2]]*17,b:255&qr[e[3]]*17,a:t===5?qr[e[4]]*17:255}:(t===7||t===9)&&(n={r:qr[e[1]]<<4|qr[e[2]],g:qr[e[3]]<<4|qr[e[4]],b:qr[e[5]]<<4|qr[e[6]],a:t===9?qr[e[7]]<<4|qr[e[8]]:255})),n}const ERe=(e,t)=>e<255?t(e):"";function TRe(e){var t=_Re(e)?CRe:SRe;return e?"#"+t(e.r)+t(e.g)+t(e.b)+ERe(e.a,t):void 0}const kRe=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function ZQ(e,t,n){const s=t*Math.min(n,1-n),r=(i,l=(i+e/30)%12)=>n-s*Math.max(Math.min(l-3,9-l,1),-1);return[r(0),r(8),r(4)]}function LRe(e,t,n){const s=(r,i=(r+e/60)%6)=>n-n*t*Math.max(Math.min(i,4-i,1),0);return[s(5),s(3),s(1)]}function PRe(e,t,n){const s=ZQ(e,1,.5);let r;for(t+n>1&&(r=1/(t+n),t*=r,n*=r),r=0;r<3;r++)s[r]*=1-t-n,s[r]+=t;return s}function DRe(e,t,n,s,r){return e===r?(t-n)/s+(t<n?6:0):t===r?(n-e)/s+2:(e-t)/s+4}function CP(e){const n=e.r/255,s=e.g/255,r=e.b/255,i=Math.max(n,s,r),l=Math.min(n,s,r),o=(i+l)/2;let c,d,u;return i!==l&&(u=i-l,d=o>.5?u/(2-i-l):u/(i+l),c=DRe(n,s,r,u,i),c=c*60+.5),[c|0,d||0,o]}function SP(e,t,n,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,s)).map(Rc)}function _P(e,t,n){return SP(ZQ,e,t,n)}function ORe(e,t,n){return SP(PRe,e,t,n)}function MRe(e,t,n){return SP(LRe,e,t,n)}function JQ(e){return(e%360+360)%360}function IRe(e){const t=kRe.exec(e);let n=255,s;if(!t)return;t[5]!==s&&(n=t[6]?Cg(+t[5]):Rc(+t[5]));const r=JQ(+t[2]),i=+t[3]/100,l=+t[4]/100;return t[1]==="hwb"?s=ORe(r,i,l):t[1]==="hsv"?s=MRe(r,i,l):s=_P(r,i,l),{r:s[0],g:s[1],b:s[2],a:n}}function $Re(e,t){var n=CP(e);n[0]=JQ(n[0]+t),n=_P(n),e.r=n[0],e.g=n[1],e.b=n[2]}function RRe(e){if(!e)return;const t=CP(e),n=t[0],s=Y7(t[1]),r=Y7(t[2]);return e.a<255?`hsla(${n}, ${s}%, ${r}%, ${to(e.a)})`:`hsl(${n}, ${s}%, ${r}%)`}const K7={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Q7={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function zRe(){const e={},t=Object.keys(Q7),n=Object.keys(K7);let s,r,i,l,o;for(s=0;s<t.length;s++){for(l=o=t[s],r=0;r<n.length;r++)i=n[r],o=o.replace(i,K7[i]);i=parseInt(Q7[l],16),e[o]=[i>>16&255,i>>8&255,i&255]}return e}let By;function URe(e){By||(By=zRe(),By.transparent=[0,0,0,0]);const t=By[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const FRe=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function BRe(e){const t=FRe.exec(e);let n=255,s,r,i;if(t){if(t[7]!==s){const l=+t[7];n=t[8]?Cg(l):Dc(l*255,0,255)}return s=+t[1],r=+t[3],i=+t[5],s=255&(t[2]?Cg(s):Dc(s,0,255)),r=255&(t[4]?Cg(r):Dc(r,0,255)),i=255&(t[6]?Cg(i):Dc(i,0,255)),{r:s,g:r,b:i,a:n}}}function HRe(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${to(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const V_=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Dm=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function GRe(e,t,n){const s=Dm(to(e.r)),r=Dm(to(e.g)),i=Dm(to(e.b));return{r:Rc(V_(s+n*(Dm(to(t.r))-s))),g:Rc(V_(r+n*(Dm(to(t.g))-r))),b:Rc(V_(i+n*(Dm(to(t.b))-i))),a:e.a+n*(t.a-e.a)}}function Hy(e,t,n){if(e){let s=CP(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*n,t===0?360:1)),s=_P(s),e.r=s[0],e.g=s[1],e.b=s[2]}}function eX(e,t){return e&&Object.assign(t||{},e)}function X7(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Rc(e[3]))):(t=eX(e,{r:0,g:0,b:0,a:1}),t.a=Rc(t.a)),t}function WRe(e){return e.charAt(0)==="r"?BRe(e):IRe(e)}class hp{constructor(t){if(t instanceof hp)return t;const n=typeof t;let s;n==="object"?s=X7(t):n==="string"&&(s=ARe(t)||URe(t)||WRe(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=eX(this._rgb);return t&&(t.a=to(t.a)),t}set rgb(t){this._rgb=X7(t)}rgbString(){return this._valid?HRe(this._rgb):void 0}hexString(){return this._valid?TRe(this._rgb):void 0}hslString(){return this._valid?RRe(this._rgb):void 0}mix(t,n){if(t){const s=this.rgb,r=t.rgb;let i;const l=n===i?.5:n,o=2*l-1,c=s.a-r.a,d=((o*c===-1?o:(o+c)/(1+o*c))+1)/2;i=1-d,s.r=255&d*s.r+i*r.r+.5,s.g=255&d*s.g+i*r.g+.5,s.b=255&d*s.b+i*r.b+.5,s.a=l*s.a+(1-l)*r.a,this.rgb=s}return this}interpolate(t,n){return t&&(this._rgb=GRe(this._rgb,t._rgb,n)),this}clone(){return new hp(this.rgb)}alpha(t){return this._rgb.a=Rc(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=Mx(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Hy(this._rgb,2,t),this}darken(t){return Hy(this._rgb,2,-t),this}saturate(t){return Hy(this._rgb,1,t),this}desaturate(t){return Hy(this._rgb,1,-t),this}rotate(t){return $Re(this._rgb,t),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Ql(){}const VRe=(()=>{let e=0;return()=>e++})();function ja(e){return e==null}function qn(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function ha(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function oi(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function qi(e,t){return oi(e)?e:t}function aa(e,t){return typeof e>"u"?t:e}const qRe=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,tX=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function qa(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function Ea(e,t,n,s){let r,i,l;if(qn(e))for(i=e.length,r=0;r<i;r++)t.call(n,e[r],r);else if(ha(e))for(l=Object.keys(e),i=l.length,r=0;r<i;r++)t.call(n,e[l[r]],l[r])}function Uv(e,t){let n,s,r,i;if(!e||!t||e.length!==t.length)return!1;for(n=0,s=e.length;n<s;++n)if(r=e[n],i=t[n],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function Fv(e){if(qn(e))return e.map(Fv);if(ha(e)){const t=Object.create(null),n=Object.keys(e),s=n.length;let r=0;for(;r<s;++r)t[n[r]]=Fv(e[n[r]]);return t}return e}function aX(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function YRe(e,t,n,s){if(!aX(e))return;const r=t[e],i=n[e];ha(r)&&ha(i)?gp(r,i,s):t[e]=Fv(i)}function gp(e,t,n){const s=qn(t)?t:[t],r=s.length;if(!ha(e))return e;n=n||{};const i=n.merger||YRe;let l;for(let o=0;o<r;++o){if(l=s[o],!ha(l))continue;const c=Object.keys(l);for(let d=0,u=c.length;d<u;++d)i(c[d],e,l,n)}return e}function Og(e,t){return gp(e,t,{merger:KRe})}function KRe(e,t,n){if(!aX(e))return;const s=t[e],r=n[e];ha(s)&&ha(r)?Og(s,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Fv(r))}const Z7={"":e=>e,x:e=>e.x,y:e=>e.y};function QRe(e){const t=e.split("."),n=[];let s="";for(const r of t)s+=r,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function XRe(e){const t=QRe(e);return n=>{for(const s of t){if(s==="")break;n=n&&n[s]}return n}}function wu(e,t){return(Z7[t]||(Z7[t]=XRe(t)))(e)}function AP(e){return e.charAt(0).toUpperCase()+e.slice(1)}const pp=e=>typeof e<"u",Yc=e=>typeof e=="function",J7=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function ZRe(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const ka=Math.PI,pn=2*ka,JRe=pn+ka,Bv=Number.POSITIVE_INFINITY,eze=ka/180,Yn=ka/2,Nd=ka/4,eF=ka*2/3,nX=Math.log10,fl=Math.sign;function Mg(e,t,n){return Math.abs(e-t)<n}function tF(e){const t=Math.round(e);e=Mg(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(nX(e))),s=e/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function tze(e){const t=[],n=Math.sqrt(e);let s;for(s=1;s<n;s++)e%s===0&&(t.push(s),t.push(e/s));return n===(n|0)&&t.push(n),t.sort((r,i)=>r-i).pop(),t}function aze(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function xp(e){return!aze(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function nze(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function sze(e,t,n){let s,r,i;for(s=0,r=e.length;s<r;s++)i=e[s][n],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}function lo(e){return e*(ka/180)}function rze(e){return e*(180/ka)}function aF(e){if(!oi(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function sX(e,t){const n=t.x-e.x,s=t.y-e.y,r=Math.sqrt(n*n+s*s);let i=Math.atan2(s,n);return i<-.5*ka&&(i+=pn),{angle:i,distance:r}}function OT(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function ize(e,t){return(e-t+JRe)%pn-ka}function Si(e){return(e%pn+pn)%pn}function yp(e,t,n,s){const r=Si(e),i=Si(t),l=Si(n),o=Si(i-r),c=Si(l-r),d=Si(r-i),u=Si(r-l);return r===i||r===l||s&&i===l||o>c&&d<u}function Ss(e,t,n){return Math.max(t,Math.min(n,e))}function lze(e){return Ss(e,-32768,32767)}function Oc(e,t,n,s=1e-6){return e>=Math.min(t,n)-s&&e<=Math.max(t,n)+s}function EP(e,t,n){n=n||(l=>e[l]<t);let s=e.length-1,r=0,i;for(;s-r>1;)i=r+s>>1,n(i)?r=i:s=i;return{lo:r,hi:s}}const Gd=(e,t,n,s)=>EP(e,n,s?r=>{const i=e[r][t];return i<n||i===n&&e[r+1][t]===n}:r=>e[r][t]<n),oze=(e,t,n)=>EP(e,n,s=>e[s][t]>=n);function cze(e,t,n){let s=0,r=e.length;for(;s<r&&e[s]<t;)s++;for(;r>s&&e[r-1]>n;)r--;return s>0||r<e.length?e.slice(s,r):e}const rX=["push","pop","shift","splice","unshift"];function dze(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),rX.forEach(n=>{const s="_onData"+AP(n),r=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...i){const l=r.apply(this,i);return e._chartjs.listeners.forEach(o=>{typeof o[s]=="function"&&o[s](...i)}),l}})})}function nF(e,t){const n=e._chartjs;if(!n)return;const s=n.listeners,r=s.indexOf(t);r!==-1&&s.splice(r,1),!(s.length>0)&&(rX.forEach(i=>{delete e[i]}),delete e._chartjs)}function iX(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const lX=(function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame})();function oX(e,t){let n=[],s=!1;return function(...r){n=r,s||(s=!0,lX.call(window,()=>{s=!1,e.apply(t,n)}))}}function uze(e,t){let n;return function(...s){return t?(clearTimeout(n),n=setTimeout(e,t,s)):e.apply(this,s),t}}const TP=e=>e==="start"?"left":e==="end"?"right":"center",ws=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,mze=(e,t,n,s)=>e===(s?"left":"right")?n:e==="center"?(t+n)/2:t;function fze(e,t,n){const s=t.length;let r=0,i=s;if(e._sorted){const{iScale:l,vScale:o,_parsed:c}=e,d=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,u=l.axis,{min:f,max:p,minDefined:x,maxDefined:v}=l.getUserBounds();if(x){if(r=Math.min(Gd(c,u,f).lo,n?s:Gd(t,u,l.getPixelForValue(f)).lo),d){const w=c.slice(0,r+1).reverse().findIndex(b=>!ja(b[o.axis]));r-=Math.max(0,w)}r=Ss(r,0,s-1)}if(v){let w=Math.max(Gd(c,l.axis,p,!0).hi+1,n?0:Gd(t,u,l.getPixelForValue(p),!0).hi+1);if(d){const b=c.slice(w-1).findIndex(C=>!ja(C[o.axis]));w+=Math.max(0,b)}i=Ss(w,r,s)-r}else i=s-r}return{start:r,count:i}}function hze(e){const{xScale:t,yScale:n,_scaleRanges:s}=e,r={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!s)return e._scaleRanges=r,!0;const i=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,r),i}const Gy=e=>e===0||e===1,sF=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*pn/n)),rF=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*pn/n)+1,Ig={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*Yn)+1,easeOutSine:e=>Math.sin(e*Yn),easeInOutSine:e=>-.5*(Math.cos(ka*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>Gy(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Gy(e)?e:sF(e,.075,.3),easeOutElastic:e=>Gy(e)?e:rF(e,.075,.3),easeInOutElastic(e){return Gy(e)?e:e<.5?.5*sF(e*2,.1125,.45):.5+.5*rF(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-Ig.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?Ig.easeInBounce(e*2)*.5:Ig.easeOutBounce(e*2-1)*.5+.5};function kP(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function iF(e){return kP(e)?e:new hp(e)}function q_(e){return kP(e)?e:new hp(e).saturate(.5).darken(.1).hexString()}const gze=["x","y","borderWidth","radius","tension"],pze=["color","borderColor","backgroundColor"];function xze(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:pze},numbers:{type:"number",properties:gze}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function yze(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const lF=new Map;function bze(e,t){t=t||{};const n=e+JSON.stringify(t);let s=lF.get(n);return s||(s=new Intl.NumberFormat(e,t),lF.set(n,s)),s}function LP(e,t,n){return bze(t,n).format(e)}const vze={values(e){return qn(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const s=this.chart.options.locale;let r,i=e;if(n.length>1){const d=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(d<1e-4||d>1e15)&&(r="scientific"),i=wze(e,n)}const l=nX(Math.abs(i)),o=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),c={notation:r,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(c,this.options.ticks.format),LP(e,s,c)}};function wze(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var cX={formatters:vze};function Nze(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:cX.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Nu=Object.create(null),MT=Object.create(null);function $g(e,t){if(!t)return e;const n=t.split(".");for(let s=0,r=n.length;s<r;++s){const i=n[s];e=e[i]||(e[i]=Object.create(null))}return e}function Y_(e,t,n){return typeof t=="string"?gp($g(e,t),n):gp($g(e,""),t)}class jze{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,r)=>q_(r.backgroundColor),this.hoverBorderColor=(s,r)=>q_(r.borderColor),this.hoverColor=(s,r)=>q_(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return Y_(this,t,n)}get(t){return $g(this,t)}describe(t,n){return Y_(MT,t,n)}override(t,n){return Y_(Nu,t,n)}route(t,n,s,r){const i=$g(this,t),l=$g(this,s),o="_"+n;Object.defineProperties(i,{[o]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const c=this[o],d=l[r];return ha(c)?Object.assign({},d,c):aa(c,d)},set(c){this[o]=c}}})}apply(t){t.forEach(n=>n(this))}}var Nn=new jze({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[xze,yze,Nze]);function Cze(e){return!e||ja(e.size)||ja(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function oF(e,t,n,s,r){let i=t[r];return i||(i=t[r]=e.measureText(r).width,n.push(r)),i>s&&(s=i),s}function jd(e,t,n){const s=e.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((t-r)*s)/s+r}function cF(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function IT(e,t,n,s){dX(e,t,n,s,null)}function dX(e,t,n,s,r){let i,l,o,c,d,u,f,p;const x=t.pointStyle,v=t.rotation,w=t.radius;let b=(v||0)*eze;if(x&&typeof x=="object"&&(i=x.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){e.save(),e.translate(n,s),e.rotate(b),e.drawImage(x,-x.width/2,-x.height/2,x.width,x.height),e.restore();return}if(!(isNaN(w)||w<=0)){switch(e.beginPath(),x){default:r?e.ellipse(n,s,r/2,w,0,0,pn):e.arc(n,s,w,0,pn),e.closePath();break;case"triangle":u=r?r/2:w,e.moveTo(n+Math.sin(b)*u,s-Math.cos(b)*w),b+=eF,e.lineTo(n+Math.sin(b)*u,s-Math.cos(b)*w),b+=eF,e.lineTo(n+Math.sin(b)*u,s-Math.cos(b)*w),e.closePath();break;case"rectRounded":d=w*.516,c=w-d,l=Math.cos(b+Nd)*c,f=Math.cos(b+Nd)*(r?r/2-d:c),o=Math.sin(b+Nd)*c,p=Math.sin(b+Nd)*(r?r/2-d:c),e.arc(n-f,s-o,d,b-ka,b-Yn),e.arc(n+p,s-l,d,b-Yn,b),e.arc(n+f,s+o,d,b,b+Yn),e.arc(n-p,s+l,d,b+Yn,b+ka),e.closePath();break;case"rect":if(!v){c=Math.SQRT1_2*w,u=r?r/2:c,e.rect(n-u,s-c,2*u,2*c);break}b+=Nd;case"rectRot":f=Math.cos(b)*(r?r/2:w),l=Math.cos(b)*w,o=Math.sin(b)*w,p=Math.sin(b)*(r?r/2:w),e.moveTo(n-f,s-o),e.lineTo(n+p,s-l),e.lineTo(n+f,s+o),e.lineTo(n-p,s+l),e.closePath();break;case"crossRot":b+=Nd;case"cross":f=Math.cos(b)*(r?r/2:w),l=Math.cos(b)*w,o=Math.sin(b)*w,p=Math.sin(b)*(r?r/2:w),e.moveTo(n-f,s-o),e.lineTo(n+f,s+o),e.moveTo(n+p,s-l),e.lineTo(n-p,s+l);break;case"star":f=Math.cos(b)*(r?r/2:w),l=Math.cos(b)*w,o=Math.sin(b)*w,p=Math.sin(b)*(r?r/2:w),e.moveTo(n-f,s-o),e.lineTo(n+f,s+o),e.moveTo(n+p,s-l),e.lineTo(n-p,s+l),b+=Nd,f=Math.cos(b)*(r?r/2:w),l=Math.cos(b)*w,o=Math.sin(b)*w,p=Math.sin(b)*(r?r/2:w),e.moveTo(n-f,s-o),e.lineTo(n+f,s+o),e.moveTo(n+p,s-l),e.lineTo(n-p,s+l);break;case"line":l=r?r/2:Math.cos(b)*w,o=Math.sin(b)*w,e.moveTo(n-l,s-o),e.lineTo(n+l,s+o);break;case"dash":e.moveTo(n,s),e.lineTo(n+Math.cos(b)*(r?r/2:w),s+Math.sin(b)*w);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function bp(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function PP(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function DP(e){e.restore()}function Sze(e,t,n,s,r){if(!t)return e.lineTo(n.x,n.y);if(r==="middle"){const i=(t.x+n.x)/2;e.lineTo(i,t.y),e.lineTo(i,n.y)}else r==="after"!=!!s?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function _ze(e,t,n,s){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function Aze(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),ja(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function Eze(e,t,n,s,r){if(r.strikethrough||r.underline){const i=e.measureText(s),l=t-i.actualBoundingBoxLeft,o=t+i.actualBoundingBoxRight,c=n-i.actualBoundingBoxAscent,d=n+i.actualBoundingBoxDescent,u=r.strikethrough?(c+d)/2:d;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(l,u),e.lineTo(o,u),e.stroke()}}function Tze(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function vp(e,t,n,s,r,i={}){const l=qn(t)?t:[t],o=i.strokeWidth>0&&i.strokeColor!=="";let c,d;for(e.save(),e.font=r.string,Aze(e,i),c=0;c<l.length;++c)d=l[c],i.backdrop&&Tze(e,i.backdrop),o&&(i.strokeColor&&(e.strokeStyle=i.strokeColor),ja(i.strokeWidth)||(e.lineWidth=i.strokeWidth),e.strokeText(d,n,s,i.maxWidth)),e.fillText(d,n,s,i.maxWidth),Eze(e,n,s,d,i),s+=Number(r.lineHeight);e.restore()}function Hv(e,t){const{x:n,y:s,w:r,h:i,radius:l}=t;e.arc(n+l.topLeft,s+l.topLeft,l.topLeft,1.5*ka,ka,!0),e.lineTo(n,s+i-l.bottomLeft),e.arc(n+l.bottomLeft,s+i-l.bottomLeft,l.bottomLeft,ka,Yn,!0),e.lineTo(n+r-l.bottomRight,s+i),e.arc(n+r-l.bottomRight,s+i-l.bottomRight,l.bottomRight,Yn,0,!0),e.lineTo(n+r,s+l.topRight),e.arc(n+r-l.topRight,s+l.topRight,l.topRight,0,-Yn,!0),e.lineTo(n+l.topLeft,s)}const kze=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Lze=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Pze(e,t){const n=(""+e).match(kze);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const Dze=e=>+e||0;function OP(e,t){const n={},s=ha(t),r=s?Object.keys(t):t,i=ha(e)?s?l=>aa(e[l],e[t[l]]):l=>e[l]:()=>e;for(const l of r)n[l]=Dze(i(l));return n}function uX(e){return OP(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Zm(e){return OP(e,["topLeft","topRight","bottomLeft","bottomRight"])}function ci(e){const t=uX(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function _s(e,t){e=e||{},t=t||Nn.font;let n=aa(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let s=aa(e.style,t.style);s&&!(""+s).match(Lze)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const r={family:aa(e.family,t.family),lineHeight:Pze(aa(e.lineHeight,t.lineHeight),n),size:n,style:s,weight:aa(e.weight,t.weight),string:""};return r.string=Cze(r),r}function Wy(e,t,n,s){let r,i,l;for(r=0,i=e.length;r<i;++r)if(l=e[r],l!==void 0&&l!==void 0)return l}function Oze(e,t,n){const{min:s,max:r}=e,i=tX(t,(r-s)/2),l=(o,c)=>n&&o===0?0:o+c;return{min:l(s,-Math.abs(i)),max:l(r,i)}}function Ou(e,t){return Object.assign(Object.create(e),t)}function MP(e,t=[""],n,s,r=()=>e[0]){const i=n||e;typeof s>"u"&&(s=gX("_fallback",e));const l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:s,_getTarget:r,override:o=>MP([o,...e],t,i,s)};return new Proxy(l,{deleteProperty(o,c){return delete o[c],delete o._keys,delete e[0][c],!0},get(o,c){return fX(o,c,()=>Bze(c,t,e,o))},getOwnPropertyDescriptor(o,c){return Reflect.getOwnPropertyDescriptor(o._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(o,c){return uF(o).includes(c)},ownKeys(o){return uF(o)},set(o,c,d){const u=o._storage||(o._storage=r());return o[c]=u[c]=d,delete o._keys,!0}})}function bf(e,t,n,s){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:mX(e,s),setContext:i=>bf(e,i,n,s),override:i=>bf(e.override(i),t,n,s)};return new Proxy(r,{deleteProperty(i,l){return delete i[l],delete e[l],!0},get(i,l,o){return fX(i,l,()=>Ize(i,l,o))},getOwnPropertyDescriptor(i,l){return i._descriptors.allKeys?Reflect.has(e,l)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,l)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(i,l){return Reflect.has(e,l)},ownKeys(){return Reflect.ownKeys(e)},set(i,l,o){return e[l]=o,delete i[l],!0}})}function mX(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:s=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:n,indexable:s,isScriptable:Yc(n)?n:()=>n,isIndexable:Yc(s)?s:()=>s}}const Mze=(e,t)=>e?e+AP(t):t,IP=(e,t)=>ha(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function fX(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const s=n();return e[t]=s,s}function Ize(e,t,n){const{_proxy:s,_context:r,_subProxy:i,_descriptors:l}=e;let o=s[t];return Yc(o)&&l.isScriptable(t)&&(o=$ze(t,o,e,n)),qn(o)&&o.length&&(o=Rze(t,o,e,l.isIndexable)),IP(t,o)&&(o=bf(o,r,i&&i[t],l)),o}function $ze(e,t,n,s){const{_proxy:r,_context:i,_subProxy:l,_stack:o}=n;if(o.has(e))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+e);o.add(e);let c=t(i,l||s);return o.delete(e),IP(e,c)&&(c=$P(r._scopes,r,e,c)),c}function Rze(e,t,n,s){const{_proxy:r,_context:i,_subProxy:l,_descriptors:o}=n;if(typeof i.index<"u"&&s(e))return t[i.index%t.length];if(ha(t[0])){const c=t,d=r._scopes.filter(u=>u!==c);t=[];for(const u of c){const f=$P(d,r,e,u);t.push(bf(f,i,l&&l[e],o))}}return t}function hX(e,t,n){return Yc(e)?e(t,n):e}const zze=(e,t)=>e===!0?t:typeof e=="string"?wu(t,e):void 0;function Uze(e,t,n,s,r){for(const i of t){const l=zze(n,i);if(l){e.add(l);const o=hX(l._fallback,n,r);if(typeof o<"u"&&o!==n&&o!==s)return o}else if(l===!1&&typeof s<"u"&&n!==s)return null}return!1}function $P(e,t,n,s){const r=t._rootScopes,i=hX(t._fallback,n,s),l=[...e,...r],o=new Set;o.add(s);let c=dF(o,l,n,i||n,s);return c===null||typeof i<"u"&&i!==n&&(c=dF(o,l,i,c,s),c===null)?!1:MP(Array.from(o),[""],r,i,()=>Fze(t,n,s))}function dF(e,t,n,s,r){for(;n;)n=Uze(e,t,n,s,r);return n}function Fze(e,t,n){const s=e._getTarget();t in s||(s[t]={});const r=s[t];return qn(r)&&ha(n)?n:r||{}}function Bze(e,t,n,s){let r;for(const i of t)if(r=gX(Mze(i,e),n),typeof r<"u")return IP(e,r)?$P(n,s,e,r):r}function gX(e,t){for(const n of t){if(!n)continue;const s=n[e];if(typeof s<"u")return s}}function uF(e){let t=e._keys;return t||(t=e._keys=Hze(e._scopes)),t}function Hze(e){const t=new Set;for(const n of e)for(const s of Object.keys(n).filter(r=>!r.startsWith("_")))t.add(s);return Array.from(t)}const Gze=Number.EPSILON||1e-14,vf=(e,t)=>t<e.length&&!e[t].skip&&e[t],pX=e=>e==="x"?"y":"x";function Wze(e,t,n,s){const r=e.skip?t:e,i=t,l=n.skip?t:n,o=OT(i,r),c=OT(l,i);let d=o/(o+c),u=c/(o+c);d=isNaN(d)?0:d,u=isNaN(u)?0:u;const f=s*d,p=s*u;return{previous:{x:i.x-f*(l.x-r.x),y:i.y-f*(l.y-r.y)},next:{x:i.x+p*(l.x-r.x),y:i.y+p*(l.y-r.y)}}}function Vze(e,t,n){const s=e.length;let r,i,l,o,c,d=vf(e,0);for(let u=0;u<s-1;++u)if(c=d,d=vf(e,u+1),!(!c||!d)){if(Mg(t[u],0,Gze)){n[u]=n[u+1]=0;continue}r=n[u]/t[u],i=n[u+1]/t[u],o=Math.pow(r,2)+Math.pow(i,2),!(o<=9)&&(l=3/Math.sqrt(o),n[u]=r*l*t[u],n[u+1]=i*l*t[u])}}function qze(e,t,n="x"){const s=pX(n),r=e.length;let i,l,o,c=vf(e,0);for(let d=0;d<r;++d){if(l=o,o=c,c=vf(e,d+1),!o)continue;const u=o[n],f=o[s];l&&(i=(u-l[n])/3,o[`cp1${n}`]=u-i,o[`cp1${s}`]=f-i*t[d]),c&&(i=(c[n]-u)/3,o[`cp2${n}`]=u+i,o[`cp2${s}`]=f+i*t[d])}}function Yze(e,t="x"){const n=pX(t),s=e.length,r=Array(s).fill(0),i=Array(s);let l,o,c,d=vf(e,0);for(l=0;l<s;++l)if(o=c,c=d,d=vf(e,l+1),!!c){if(d){const u=d[t]-c[t];r[l]=u!==0?(d[n]-c[n])/u:0}i[l]=o?d?fl(r[l-1])!==fl(r[l])?0:(r[l-1]+r[l])/2:r[l-1]:r[l]}Vze(e,r,i),qze(e,i,t)}function Vy(e,t,n){return Math.max(Math.min(e,n),t)}function Kze(e,t){let n,s,r,i,l,o=bp(e[0],t);for(n=0,s=e.length;n<s;++n)l=i,i=o,o=n<s-1&&bp(e[n+1],t),i&&(r=e[n],l&&(r.cp1x=Vy(r.cp1x,t.left,t.right),r.cp1y=Vy(r.cp1y,t.top,t.bottom)),o&&(r.cp2x=Vy(r.cp2x,t.left,t.right),r.cp2y=Vy(r.cp2y,t.top,t.bottom)))}function Qze(e,t,n,s,r){let i,l,o,c;if(t.spanGaps&&(e=e.filter(d=>!d.skip)),t.cubicInterpolationMode==="monotone")Yze(e,r);else{let d=s?e[e.length-1]:e[0];for(i=0,l=e.length;i<l;++i)o=e[i],c=Wze(d,o,e[Math.min(i+1,l-(s?0:1))%l],t.tension),o.cp1x=c.previous.x,o.cp1y=c.previous.y,o.cp2x=c.next.x,o.cp2y=c.next.y,d=o}t.capBezierPoints&&Kze(e,n)}function RP(){return typeof window<"u"&&typeof document<"u"}function zP(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Gv(e,t,n){let s;return typeof e=="string"?(s=parseInt(e,10),e.indexOf("%")!==-1&&(s=s/100*t.parentNode[n])):s=e,s}const hj=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function Xze(e,t){return hj(e).getPropertyValue(t)}const Zze=["top","right","bottom","left"];function eu(e,t,n){const s={};n=n?"-"+n:"";for(let r=0;r<4;r++){const i=Zze[r];s[i]=parseFloat(e[t+"-"+i+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const Jze=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function eUe(e,t){const n=e.touches,s=n&&n.length?n[0]:e,{offsetX:r,offsetY:i}=s;let l=!1,o,c;if(Jze(r,i,e.target))o=r,c=i;else{const d=t.getBoundingClientRect();o=s.clientX-d.left,c=s.clientY-d.top,l=!0}return{x:o,y:c,box:l}}function Ld(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:s}=t,r=hj(n),i=r.boxSizing==="border-box",l=eu(r,"padding"),o=eu(r,"border","width"),{x:c,y:d,box:u}=eUe(e,n),f=l.left+(u&&o.left),p=l.top+(u&&o.top);let{width:x,height:v}=t;return i&&(x-=l.width+o.width,v-=l.height+o.height),{x:Math.round((c-f)/x*n.width/s),y:Math.round((d-p)/v*n.height/s)}}function tUe(e,t,n){let s,r;if(t===void 0||n===void 0){const i=e&&zP(e);if(!i)t=e.clientWidth,n=e.clientHeight;else{const l=i.getBoundingClientRect(),o=hj(i),c=eu(o,"border","width"),d=eu(o,"padding");t=l.width-d.width-c.width,n=l.height-d.height-c.height,s=Gv(o.maxWidth,i,"clientWidth"),r=Gv(o.maxHeight,i,"clientHeight")}}return{width:t,height:n,maxWidth:s||Bv,maxHeight:r||Bv}}const Mc=e=>Math.round(e*10)/10;function aUe(e,t,n,s){const r=hj(e),i=eu(r,"margin"),l=Gv(r.maxWidth,e,"clientWidth")||Bv,o=Gv(r.maxHeight,e,"clientHeight")||Bv,c=tUe(e,t,n);let{width:d,height:u}=c;if(r.boxSizing==="content-box"){const p=eu(r,"border","width"),x=eu(r,"padding");d-=x.width+p.width,u-=x.height+p.height}return d=Math.max(0,d-i.width),u=Math.max(0,s?d/s:u-i.height),d=Mc(Math.min(d,l,c.maxWidth)),u=Mc(Math.min(u,o,c.maxHeight)),d&&!u&&(u=Mc(d/2)),(t!==void 0||n!==void 0)&&s&&c.height&&u>c.height&&(u=c.height,d=Mc(Math.floor(u*s))),{width:d,height:u}}function mF(e,t,n){const s=t||1,r=Mc(e.height*s),i=Mc(e.width*s);e.height=Mc(e.height),e.width=Mc(e.width);const l=e.canvas;return l.style&&(n||!l.style.height&&!l.style.width)&&(l.style.height=`${e.height}px`,l.style.width=`${e.width}px`),e.currentDevicePixelRatio!==s||l.height!==r||l.width!==i?(e.currentDevicePixelRatio=s,l.height=r,l.width=i,e.ctx.setTransform(s,0,0,s,0,0),!0):!1}const nUe=(function(){let e=!1;try{const t={get passive(){return e=!0,!1}};RP()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e})();function fF(e,t){const n=Xze(e,t),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function Pd(e,t,n,s){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function sUe(e,t,n,s){return{x:e.x+n*(t.x-e.x),y:s==="middle"?n<.5?e.y:t.y:s==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function rUe(e,t,n,s){const r={x:e.cp2x,y:e.cp2y},i={x:t.cp1x,y:t.cp1y},l=Pd(e,r,n),o=Pd(r,i,n),c=Pd(i,t,n),d=Pd(l,o,n),u=Pd(o,c,n);return Pd(d,u,n)}const iUe=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},lUe=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function Jm(e,t,n){return e?iUe(t,n):lUe()}function xX(e,t){let n,s;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=s)}function yX(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function bX(e){return e==="angle"?{between:yp,compare:ize,normalize:Si}:{between:Oc,compare:(t,n)=>t-n,normalize:t=>t}}function hF({start:e,end:t,count:n,loop:s,style:r}){return{start:e%n,end:t%n,loop:s&&(t-e+1)%n===0,style:r}}function oUe(e,t,n){const{property:s,start:r,end:i}=n,{between:l,normalize:o}=bX(s),c=t.length;let{start:d,end:u,loop:f}=e,p,x;if(f){for(d+=c,u+=c,p=0,x=c;p<x&&l(o(t[d%c][s]),r,i);++p)d--,u--;d%=c,u%=c}return u<d&&(u+=c),{start:d,end:u,loop:f,style:e.style}}function cUe(e,t,n){if(!n)return[e];const{property:s,start:r,end:i}=n,l=t.length,{compare:o,between:c,normalize:d}=bX(s),{start:u,end:f,loop:p,style:x}=oUe(e,t,n),v=[];let w=!1,b=null,C,N,S;const A=()=>c(r,S,C)&&o(r,S)!==0,k=()=>o(i,C)===0||c(i,S,C),_=()=>w||A(),T=()=>!w||k();for(let E=u,I=u;E<=f;++E)N=t[E%l],!N.skip&&(C=d(N[s]),C!==S&&(w=c(C,r,i),b===null&&_()&&(b=o(C,r)===0?E:I),b!==null&&T()&&(v.push(hF({start:b,end:E,loop:p,count:l,style:x})),b=null),I=E,S=C));return b!==null&&v.push(hF({start:b,end:f,loop:p,count:l,style:x})),v}function dUe(e,t){const n=[],s=e.segments;for(let r=0;r<s.length;r++){const i=cUe(s[r],e.points,t);i.length&&n.push(...i)}return n}function uUe(e,t,n,s){let r=0,i=t-1;if(n&&!s)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,n&&(i+=r);i>r&&e[i%t].skip;)i--;return i%=t,{start:r,end:i}}function mUe(e,t,n,s){const r=e.length,i=[];let l=t,o=e[t],c;for(c=t+1;c<=n;++c){const d=e[c%r];d.skip||d.stop?o.skip||(s=!1,i.push({start:t%r,end:(c-1)%r,loop:s}),t=l=d.stop?c:null):(l=c,o.skip&&(t=c)),o=d}return l!==null&&i.push({start:t%r,end:l%r,loop:s}),i}function fUe(e,t){const n=e.points,s=e.options.spanGaps,r=n.length;if(!r)return[];const i=!!e._loop,{start:l,end:o}=uUe(n,r,i,s);if(s===!0)return gF(e,[{start:l,end:o,loop:i}],n,t);const c=o<l?o+r:o,d=!!e._fullLoop&&l===0&&o===r-1;return gF(e,mUe(n,l,c,d),n,t)}function gF(e,t,n,s){return!s||!s.setContext||!n?t:hUe(e,t,n,s)}function hUe(e,t,n,s){const r=e._chart.getContext(),i=pF(e.options),{_datasetIndex:l,options:{spanGaps:o}}=e,c=n.length,d=[];let u=i,f=t[0].start,p=f;function x(v,w,b,C){const N=o?-1:1;if(v!==w){for(v+=c;n[v%c].skip;)v-=N;for(;n[w%c].skip;)w+=N;v%c!==w%c&&(d.push({start:v%c,end:w%c,loop:b,style:C}),u=C,f=w%c)}}for(const v of t){f=o?f:v.start;let w=n[f%c],b;for(p=f+1;p<=v.end;p++){const C=n[p%c];b=pF(s.setContext(Ou(r,{type:"segment",p0:w,p1:C,p0DataIndex:(p-1)%c,p1DataIndex:p%c,datasetIndex:l}))),gUe(b,u)&&x(f,p-1,v.loop,u),w=C,u=b}f<p-1&&x(f,p-1,v.loop,u)}return d}function pF(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function gUe(e,t){if(!t)return!1;const n=[],s=function(r,i){return kP(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(e,s)!==JSON.stringify(t,s)}function qy(e,t,n){return e.options.clip?e[n]:t[n]}function pUe(e,t){const{xScale:n,yScale:s}=e;return n&&s?{left:qy(n,t,"left"),right:qy(n,t,"right"),top:qy(s,t,"top"),bottom:qy(s,t,"bottom")}:t}function xUe(e,t){const n=t._clip;if(n.disabled)return!1;const s=pUe(t,e.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?e.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?e.height:s.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class yUe{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,s,r){const i=n.listeners[r],l=n.duration;i.forEach(o=>o({chart:t,initial:n.initial,numSteps:l,currentStep:Math.min(s-n.start,l)}))}_refresh(){this._request||(this._running=!0,this._request=lX.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((s,r)=>{if(!s.running||!s.items.length)return;const i=s.items;let l=i.length-1,o=!1,c;for(;l>=0;--l)c=i[l],c._active?(c._total>s.duration&&(s.duration=c._total),c.tick(t),o=!0):(i[l]=i[i.length-1],i.pop());o&&(r.draw(),this._notify(r,s,t,"progress")),i.length||(s.running=!1,this._notify(r,s,t,"complete"),s.initial=!1),n+=i.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let s=n.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,s)),s}listen(t,n,s){this._getAnims(t).listeners[n].push(s)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,r)=>Math.max(s,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const s=n.items;let r=s.length-1;for(;r>=0;--r)s[r].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Zl=new yUe;const xF="transparent",bUe={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const s=iF(e||xF),r=s.valid&&iF(t||xF);return r&&r.valid?r.mix(s,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class vUe{constructor(t,n,s,r){const i=n[s];r=Wy([t.to,r,i,t.from]);const l=Wy([t.from,i,r]);this._active=!0,this._fn=t.fn||bUe[t.type||typeof l],this._easing=Ig[t.easing]||Ig.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=s,this._from=l,this._to=r,this._promises=void 0}active(){return this._active}update(t,n,s){if(this._active){this._notify(!1);const r=this._target[this._prop],i=s-this._start,l=this._duration-i;this._start=s,this._duration=Math.floor(Math.max(l,t.duration)),this._total+=i,this._loop=!!t.loop,this._to=Wy([t.to,n,r,t.from]),this._from=Wy([t.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,s=this._duration,r=this._prop,i=this._from,l=this._loop,o=this._to;let c;if(this._active=i!==o&&(l||n<s),!this._active){this._target[r]=o,this._notify(!0);return}if(n<0){this._target[r]=i;return}c=n/s%2,c=l&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[r]=this._fn(i,o,c)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,s)=>{t.push({res:n,rej:s})})}_notify(t){const n=t?"res":"rej",s=this._promises||[];for(let r=0;r<s.length;r++)s[r][n]()}}class vX{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!ha(t))return;const n=Object.keys(Nn.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const i=t[r];if(!ha(i))return;const l={};for(const o of n)l[o]=i[o];(qn(i.properties)&&i.properties||[r]).forEach(o=>{(o===r||!s.has(o))&&s.set(o,l)})})}_animateOptions(t,n){const s=n.options,r=NUe(t,s);if(!r)return[];const i=this._createAnimations(r,s);return s.$shared&&wUe(t.options.$animations,s).then(()=>{t.options=s},()=>{}),i}_createAnimations(t,n){const s=this._properties,r=[],i=t.$animations||(t.$animations={}),l=Object.keys(n),o=Date.now();let c;for(c=l.length-1;c>=0;--c){const d=l[c];if(d.charAt(0)==="$")continue;if(d==="options"){r.push(...this._animateOptions(t,n));continue}const u=n[d];let f=i[d];const p=s.get(d);if(f)if(p&&f.active()){f.update(p,u,o);continue}else f.cancel();if(!p||!p.duration){t[d]=u;continue}i[d]=f=new vUe(p,t,d,u),r.push(f)}return r}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const s=this._createAnimations(t,n);if(s.length)return Zl.add(this._chart,s),!0}}function wUe(e,t){const n=[],s=Object.keys(t);for(let r=0;r<s.length;r++){const i=e[s[r]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function NUe(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function yF(e,t){const n=e&&e.options||{},s=n.reverse,r=n.min===void 0?t:0,i=n.max===void 0?t:0;return{start:s?i:r,end:s?r:i}}function jUe(e,t,n){if(n===!1)return!1;const s=yF(e,n),r=yF(t,n);return{top:r.end,right:s.end,bottom:r.start,left:s.start}}function CUe(e){let t,n,s,r;return ha(e)?(t=e.top,n=e.right,s=e.bottom,r=e.left):t=n=s=r=e,{top:t,right:n,bottom:s,left:r,disabled:e===!1}}function wX(e,t){const n=[],s=e._getSortedDatasetMetas(t);let r,i;for(r=0,i=s.length;r<i;++r)n.push(s[r].index);return n}function bF(e,t,n,s={}){const r=e.keys,i=s.mode==="single";let l,o,c,d;if(t===null)return;let u=!1;for(l=0,o=r.length;l<o;++l){if(c=+r[l],c===n){if(u=!0,s.all)continue;break}d=e.values[c],oi(d)&&(i||t===0||fl(t)===fl(d))&&(t+=d)}return!u&&!s.all?0:t}function SUe(e,t){const{iScale:n,vScale:s}=t,r=n.axis==="x"?"x":"y",i=s.axis==="x"?"x":"y",l=Object.keys(e),o=new Array(l.length);let c,d,u;for(c=0,d=l.length;c<d;++c)u=l[c],o[c]={[r]:u,[i]:e[u]};return o}function K_(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function _Ue(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function AUe(e){const{min:t,max:n,minDefined:s,maxDefined:r}=e.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function EUe(e,t,n){const s=e[t]||(e[t]={});return s[n]||(s[n]={})}function vF(e,t,n,s){for(const r of t.getMatchingVisibleMetas(s).reverse()){const i=e[r.index];if(n&&i>0||!n&&i<0)return r.index}return null}function wF(e,t){const{chart:n,_cachedMeta:s}=e,r=n._stacks||(n._stacks={}),{iScale:i,vScale:l,index:o}=s,c=i.axis,d=l.axis,u=_Ue(i,l,s),f=t.length;let p;for(let x=0;x<f;++x){const v=t[x],{[c]:w,[d]:b}=v,C=v._stacks||(v._stacks={});p=C[d]=EUe(r,u,w),p[o]=b,p._top=vF(p,l,!0,s.type),p._bottom=vF(p,l,!1,s.type);const N=p._visualValues||(p._visualValues={});N[o]=b}}function Q_(e,t){const n=e.scales;return Object.keys(n).filter(s=>n[s].axis===t).shift()}function TUe(e,t){return Ou(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function kUe(e,t,n){return Ou(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function sg(e,t){const n=e.controller.index,s=e.vScale&&e.vScale.axis;if(s){t=t||e._parsed;for(const r of t){const i=r._stacks;if(!i||i[s]===void 0||i[s][n]===void 0)return;delete i[s][n],i[s]._visualValues!==void 0&&i[s]._visualValues[n]!==void 0&&delete i[s]._visualValues[n]}}}const X_=e=>e==="reset"||e==="none",NF=(e,t)=>t?e:Object.assign({},e),LUe=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:wX(n,!0),values:null};class gj{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=K_(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&sg(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,s=this.getDataset(),r=(f,p,x,v)=>f==="x"?p:f==="r"?v:x,i=n.xAxisID=aa(s.xAxisID,Q_(t,"x")),l=n.yAxisID=aa(s.yAxisID,Q_(t,"y")),o=n.rAxisID=aa(s.rAxisID,Q_(t,"r")),c=n.indexAxis,d=n.iAxisID=r(c,i,l,o),u=n.vAxisID=r(c,l,i,o);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(l),n.rScale=this.getScaleForId(o),n.iScale=this.getScaleForId(d),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&nF(this._data,this),t._stacked&&sg(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),s=this._data;if(ha(n)){const r=this._cachedMeta;this._data=SUe(n,r)}else if(s!==n){if(s){nF(s,this);const r=this._cachedMeta;sg(r),r._parsed=[]}n&&Object.isExtensible(n)&&dze(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,s=this.getDataset();let r=!1;this._dataCheck();const i=n._stacked;n._stacked=K_(n.vScale,n),n.stack!==s.stack&&(r=!0,sg(n),n.stack=s.stack),this._resyncElements(t),(r||i!==n._stacked)&&(wF(this,n._parsed),n._stacked=K_(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:s,_data:r}=this,{iScale:i,_stacked:l}=s,o=i.axis;let c=t===0&&n===r.length?!0:s._sorted,d=t>0&&s._parsed[t-1],u,f,p;if(this._parsing===!1)s._parsed=r,s._sorted=!0,p=r;else{qn(r[t])?p=this.parseArrayData(s,r,t,n):ha(r[t])?p=this.parseObjectData(s,r,t,n):p=this.parsePrimitiveData(s,r,t,n);const x=()=>f[o]===null||d&&f[o]<d[o];for(u=0;u<n;++u)s._parsed[u+t]=f=p[u],c&&(x()&&(c=!1),d=f);s._sorted=c}l&&wF(this,p)}parsePrimitiveData(t,n,s,r){const{iScale:i,vScale:l}=t,o=i.axis,c=l.axis,d=i.getLabels(),u=i===l,f=new Array(r);let p,x,v;for(p=0,x=r;p<x;++p)v=p+s,f[p]={[o]:u||i.parse(d[v],v),[c]:l.parse(n[v],v)};return f}parseArrayData(t,n,s,r){const{xScale:i,yScale:l}=t,o=new Array(r);let c,d,u,f;for(c=0,d=r;c<d;++c)u=c+s,f=n[u],o[c]={x:i.parse(f[0],u),y:l.parse(f[1],u)};return o}parseObjectData(t,n,s,r){const{xScale:i,yScale:l}=t,{xAxisKey:o="x",yAxisKey:c="y"}=this._parsing,d=new Array(r);let u,f,p,x;for(u=0,f=r;u<f;++u)p=u+s,x=n[p],d[u]={x:i.parse(wu(x,o),p),y:l.parse(wu(x,c),p)};return d}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,s){const r=this.chart,i=this._cachedMeta,l=n[t.axis],o={keys:wX(r,!0),values:n._stacks[t.axis]._visualValues};return bF(o,l,i.index,{mode:s})}updateRangeFromParsed(t,n,s,r){const i=s[n.axis];let l=i===null?NaN:i;const o=r&&s._stacks[n.axis];r&&o&&(r.values=o,l=bF(r,i,this._cachedMeta.index)),t.min=Math.min(t.min,l),t.max=Math.max(t.max,l)}getMinMax(t,n){const s=this._cachedMeta,r=s._parsed,i=s._sorted&&t===s.iScale,l=r.length,o=this._getOtherScale(t),c=LUe(n,s,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:f}=AUe(o);let p,x;function v(){x=r[p];const w=x[o.axis];return!oi(x[t.axis])||u>w||f<w}for(p=0;p<l&&!(!v()&&(this.updateRangeFromParsed(d,t,x,c),i));++p);if(i){for(p=l-1;p>=0;--p)if(!v()){this.updateRangeFromParsed(d,t,x,c);break}}return d}getAllParsedValues(t){const n=this._cachedMeta._parsed,s=[];let r,i,l;for(r=0,i=n.length;r<i;++r)l=n[r][t.axis],oi(l)&&s.push(l);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,s=n.iScale,r=n.vScale,i=this.getParsed(t);return{label:s?""+s.getLabelForValue(i[s.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=CUe(aa(this.options.clip,jUe(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,s=this._cachedMeta,r=s.data||[],i=n.chartArea,l=[],o=this._drawStart||0,c=this._drawCount||r.length-o,d=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(t,i,o,c),u=o;u<o+c;++u){const f=r[u];f.hidden||(f.active&&d?l.push(f):f.draw(t,i))}for(u=0;u<l.length;++u)l[u].draw(t,i)}getStyle(t,n){const s=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,n,s){const r=this.getDataset();let i;if(t>=0&&t<this._cachedMeta.data.length){const l=this._cachedMeta.data[t];i=l.$context||(l.$context=kUe(this.getContext(),t,l)),i.parsed=this.getParsed(t),i.raw=r.data[t],i.index=i.dataIndex=t}else i=this.$context||(this.$context=TUe(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=s,i}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",s){const r=n==="active",i=this._cachedDataOpts,l=t+"-"+n,o=i[l],c=this.enableOptionSharing&&pp(s);if(o)return NF(o,c);const d=this.chart.config,u=d.datasetElementScopeKeys(this._type,t),f=r?[`${t}Hover`,"hover",t,""]:[t,""],p=d.getOptionScopes(this.getDataset(),u),x=Object.keys(Nn.elements[t]),v=()=>this.getContext(s,r,n),w=d.resolveNamedOptions(p,x,v,f);return w.$shared&&(w.$shared=c,i[l]=Object.freeze(NF(w,c))),w}_resolveAnimations(t,n,s){const r=this.chart,i=this._cachedDataOpts,l=`animation-${n}`,o=i[l];if(o)return o;let c;if(r.options.animation!==!1){const u=this.chart.config,f=u.datasetAnimationScopeKeys(this._type,n),p=u.getOptionScopes(this.getDataset(),f);c=u.createResolver(p,this.getContext(t,s,n))}const d=new vX(r,c&&c.animations);return c&&c._cacheable&&(i[l]=Object.freeze(d)),d}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||X_(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const s=this.resolveDataElementOptions(t,n),r=this._sharedOptions,i=this.getSharedOptions(s),l=this.includeOptions(n,i)||i!==r;return this.updateSharedOptions(i,n,s),{sharedOptions:i,includeOptions:l}}updateElement(t,n,s,r){X_(r)?Object.assign(t,s):this._resolveAnimations(n,r).update(t,s)}updateSharedOptions(t,n,s){t&&!X_(n)&&this._resolveAnimations(void 0,n).update(t,s)}_setStyle(t,n,s,r){t.active=r;const i=this.getStyle(n,r);this._resolveAnimations(n,s,r).update(t,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(t,n,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,n,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,s=this._cachedMeta.data;for(const[o,c,d]of this._syncList)this[o](c,d);this._syncList=[];const r=s.length,i=n.length,l=Math.min(i,r);l&&this.parse(0,l),i>r?this._insertElements(r,i-r,t):i<r&&this._removeElements(i,r-i)}_insertElements(t,n,s=!0){const r=this._cachedMeta,i=r.data,l=t+n;let o;const c=d=>{for(d.length+=n,o=d.length-1;o>=l;o--)d[o]=d[o-n]};for(c(i),o=t;o<l;++o)i[o]=new this.dataElementType;this._parsing&&c(r._parsed),this.parse(t,n),s&&this.updateElements(i,t,n,"reset")}updateElements(t,n,s,r){}_removeElements(t,n){const s=this._cachedMeta;if(this._parsing){const r=s._parsed.splice(t,n);s._stacked&&sg(s,r)}s.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,s,r]=t;this[n](s,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function PUe(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let s=[];for(let r=0,i=n.length;r<i;r++)s=s.concat(n[r].controller.getAllParsedValues(e));e._cache.$bar=iX(s.sort((r,i)=>r-i))}return e._cache.$bar}function DUe(e){const t=e.iScale,n=PUe(t,e.type);let s=t._length,r,i,l,o;const c=()=>{l===32767||l===-32768||(pp(o)&&(s=Math.min(s,Math.abs(l-o)||s)),o=l)};for(r=0,i=n.length;r<i;++r)l=t.getPixelForValue(n[r]),c();for(o=void 0,r=0,i=t.ticks.length;r<i;++r)l=t.getPixelForTick(r),c();return s}function OUe(e,t,n,s){const r=n.barThickness;let i,l;return ja(r)?(i=t.min*n.categoryPercentage,l=n.barPercentage):(i=r*s,l=1),{chunk:i/s,ratio:l,start:t.pixels[e]-i/2}}function MUe(e,t,n,s){const r=t.pixels,i=r[e];let l=e>0?r[e-1]:null,o=e<r.length-1?r[e+1]:null;const c=n.categoryPercentage;l===null&&(l=i-(o===null?t.end-t.start:o-i)),o===null&&(o=i+i-l);const d=i-(i-Math.min(l,o))/2*c;return{chunk:Math.abs(o-l)/2*c/s,ratio:n.barPercentage,start:d}}function IUe(e,t,n,s){const r=n.parse(e[0],s),i=n.parse(e[1],s),l=Math.min(r,i),o=Math.max(r,i);let c=l,d=o;Math.abs(l)>Math.abs(o)&&(c=o,d=l),t[n.axis]=d,t._custom={barStart:c,barEnd:d,start:r,end:i,min:l,max:o}}function NX(e,t,n,s){return qn(e)?IUe(e,t,n,s):t[n.axis]=n.parse(e,s),t}function jF(e,t,n,s){const r=e.iScale,i=e.vScale,l=r.getLabels(),o=r===i,c=[];let d,u,f,p;for(d=n,u=n+s;d<u;++d)p=t[d],f={},f[r.axis]=o||r.parse(l[d],d),c.push(NX(p,f,i,d));return c}function Z_(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function $Ue(e,t,n){return e!==0?fl(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}function RUe(e){let t,n,s,r,i;return e.horizontal?(t=e.base>e.x,n="left",s="right"):(t=e.base<e.y,n="bottom",s="top"),t?(r="end",i="start"):(r="start",i="end"),{start:n,end:s,reverse:t,top:r,bottom:i}}function zUe(e,t,n,s){let r=t.borderSkipped;const i={};if(!r){e.borderSkipped=i;return}if(r===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:l,end:o,reverse:c,top:d,bottom:u}=RUe(e);r==="middle"&&n&&(e.enableBorderRadius=!0,(n._top||0)===s?r=d:(n._bottom||0)===s?r=u:(i[CF(u,l,o,c)]=!0,r=d)),i[CF(r,l,o,c)]=!0,e.borderSkipped=i}function CF(e,t,n,s){return s?(e=UUe(e,t,n),e=SF(e,n,t)):e=SF(e,t,n),e}function UUe(e,t,n){return e===t?n:e===n?t:e}function SF(e,t,n){return e==="start"?t:e==="end"?n:e}function FUe(e,{inflateAmount:t},n){e.inflateAmount=t==="auto"?n===1?.33:0:t}class BUe extends gj{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,n,s,r){return jF(t,n,s,r)}parseArrayData(t,n,s,r){return jF(t,n,s,r)}parseObjectData(t,n,s,r){const{iScale:i,vScale:l}=t,{xAxisKey:o="x",yAxisKey:c="y"}=this._parsing,d=i.axis==="x"?o:c,u=l.axis==="x"?o:c,f=[];let p,x,v,w;for(p=s,x=s+r;p<x;++p)w=n[p],v={},v[i.axis]=i.parse(wu(w,d),p),f.push(NX(wu(w,u),v,l,p));return f}updateRangeFromParsed(t,n,s,r){super.updateRangeFromParsed(t,n,s,r);const i=s._custom;i&&n===this._cachedMeta.vScale&&(t.min=Math.min(t.min,i.min),t.max=Math.max(t.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const n=this._cachedMeta,{iScale:s,vScale:r}=n,i=this.getParsed(t),l=i._custom,o=Z_(l)?"["+l.start+", "+l.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+s.getLabelForValue(i[s.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,t)}updateElements(t,n,s,r){const i=r==="reset",{index:l,_cachedMeta:{vScale:o}}=this,c=o.getBasePixel(),d=o.isHorizontal(),u=this._getRuler(),{sharedOptions:f,includeOptions:p}=this._getSharedOptions(n,r);for(let x=n;x<n+s;x++){const v=this.getParsed(x),w=i||ja(v[o.axis])?{base:c,head:c}:this._calculateBarValuePixels(x),b=this._calculateBarIndexPixels(x,u),C=(v._stacks||{})[o.axis],N={horizontal:d,base:w.base,enableBorderRadius:!C||Z_(v._custom)||l===C._top||l===C._bottom,x:d?w.head:b.center,y:d?b.center:w.head,height:d?b.size:Math.abs(w.size),width:d?Math.abs(w.size):b.size};p&&(N.options=f||this.resolveDataElementOptions(x,t[x].active?"active":r));const S=N.options||t[x].options;zUe(N,S,C,l),FUe(N,S,u.ratio),this.updateElement(t[x],x,N,r)}}_getStacks(t,n){const{iScale:s}=this._cachedMeta,r=s.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),i=s.options.stacked,l=[],o=this._cachedMeta.controller.getParsed(n),c=o&&o[s.axis],d=u=>{const f=u._parsed.find(x=>x[s.axis]===c),p=f&&f[u.vScale.axis];if(ja(p)||isNaN(p))return!0};for(const u of r)if(!(n!==void 0&&d(u))&&((i===!1||l.indexOf(u.stack)===-1||i===void 0&&u.stack===void 0)&&l.push(u.stack),u.index===t))break;return l.length||l.push(void 0),l}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(t).filter(s=>t[s].axis===n).shift()}_getAxis(){const t={},n=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)t[aa(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,n)]=!0;return Object.keys(t)}_getStackIndex(t,n,s){const r=this._getStacks(t,s),i=n!==void 0?r.indexOf(n):-1;return i===-1?r.length-1:i}_getRuler(){const t=this.options,n=this._cachedMeta,s=n.iScale,r=[];let i,l;for(i=0,l=n.data.length;i<l;++i)r.push(s.getPixelForValue(this.getParsed(i)[s.axis],i));const o=t.barThickness;return{min:o||DUe(n),pixels:r,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:t.grouped,ratio:o?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:n,_stacked:s,index:r},options:{base:i,minBarLength:l}}=this,o=i||0,c=this.getParsed(t),d=c._custom,u=Z_(d);let f=c[n.axis],p=0,x=s?this.applyStack(n,c,s):f,v,w;x!==f&&(p=x-f,x=f),u&&(f=d.barStart,x=d.barEnd-d.barStart,f!==0&&fl(f)!==fl(d.barEnd)&&(p=0),p+=f);const b=!ja(i)&&!u?i:p;let C=n.getPixelForValue(b);if(this.chart.getDataVisibility(t)?v=n.getPixelForValue(p+x):v=C,w=v-C,Math.abs(w)<l){w=$Ue(w,n,o)*l,f===o&&(C-=w/2);const N=n.getPixelForDecimal(0),S=n.getPixelForDecimal(1),A=Math.min(N,S),k=Math.max(N,S);C=Math.max(Math.min(C,k),A),v=C+w,s&&!u&&(c._stacks[n.axis]._visualValues[r]=n.getValueForPixel(v)-n.getValueForPixel(C))}if(C===n.getPixelForValue(o)){const N=fl(w)*n.getLineWidthForValue(o)/2;C+=N,w-=N}return{size:w,base:C,head:v,center:v+w/2}}_calculateBarIndexPixels(t,n){const s=n.scale,r=this.options,i=r.skipNull,l=aa(r.maxBarThickness,1/0);let o,c;const d=this._getAxisCount();if(n.grouped){const u=i?this._getStackCount(t):n.stackCount,f=r.barThickness==="flex"?MUe(t,n,r,u*d):OUe(t,n,r,u*d),p=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,x=this._getAxis().indexOf(aa(p,this.getFirstScaleIdForIndexAxis())),v=this._getStackIndex(this.index,this._cachedMeta.stack,i?t:void 0)+x;o=f.start+f.chunk*v+f.chunk/2,c=Math.min(l,f.chunk*f.ratio)}else o=s.getPixelForValue(this.getParsed(t)[s.axis],t),c=Math.min(l,n.min*n.ratio);return{base:o-c/2,head:o+c/2,center:o,size:c}}draw(){const t=this._cachedMeta,n=t.vScale,s=t.data,r=s.length;let i=0;for(;i<r;++i)this.getParsed(i)[n.axis]!==null&&!s[i].hidden&&s[i].draw(this._ctx)}}function HUe(e,t,n){let s=1,r=1,i=0,l=0;if(t<pn){const o=e,c=o+t,d=Math.cos(o),u=Math.sin(o),f=Math.cos(c),p=Math.sin(c),x=(S,A,k)=>yp(S,o,c,!0)?1:Math.max(A,A*n,k,k*n),v=(S,A,k)=>yp(S,o,c,!0)?-1:Math.min(A,A*n,k,k*n),w=x(0,d,f),b=x(Yn,u,p),C=v(ka,d,f),N=v(ka+Yn,u,p);s=(w-C)/2,r=(b-N)/2,i=-(w+C)/2,l=-(b+N)/2}return{ratioX:s,ratioY:r,offsetX:i,offsetY:l}}class GUe extends gj{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data,{labels:{pointStyle:s,textAlign:r,color:i,useBorderRadius:l,borderRadius:o}}=t.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((c,d)=>{const f=t.getDatasetMeta(0).controller.getStyle(d);return{text:c,fillStyle:f.backgroundColor,fontColor:i,hidden:!t.getDataVisibility(d),lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:f.borderWidth,strokeStyle:f.borderColor,textAlign:r,pointStyle:s,borderRadius:l&&(o||f.borderRadius),index:d}}):[]}},onClick(t,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}};constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const s=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=s;else{let i=c=>+s[c];if(ha(s[t])){const{key:c="value"}=this._parsing;i=d=>+wu(s[d],c)}let l,o;for(l=t,o=t+n;l<o;++l)r._parsed[l]=i(l)}}_getRotation(){return lo(this.options.rotation-90)}_getCircumference(){return lo(this.options.circumference)}_getRotationExtents(){let t=pn,n=-pn;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const r=this.chart.getDatasetMeta(s).controller,i=r._getRotation(),l=r._getCircumference();t=Math.min(t,i),n=Math.max(n,i+l)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:s}=n,r=this._cachedMeta,i=r.data,l=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,o=Math.max((Math.min(s.width,s.height)-l)/2,0),c=Math.min(qRe(this.options.cutout,o),1),d=this._getRingWeight(this.index),{circumference:u,rotation:f}=this._getRotationExtents(),{ratioX:p,ratioY:x,offsetX:v,offsetY:w}=HUe(f,u,c),b=(s.width-l)/p,C=(s.height-l)/x,N=Math.max(Math.min(b,C)/2,0),S=tX(this.options.radius,N),A=Math.max(S*c,0),k=(S-A)/this._getVisibleDatasetWeightTotal();this.offsetX=v*S,this.offsetY=w*S,r.total=this.calculateTotal(),this.outerRadius=S-k*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-k*d,0),this.updateElements(i,0,i.length,t)}_circumference(t,n){const s=this.options,r=this._cachedMeta,i=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||r._parsed[t]===null||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*i/pn)}updateElements(t,n,s,r){const i=r==="reset",l=this.chart,o=l.chartArea,d=l.options.animation,u=(o.left+o.right)/2,f=(o.top+o.bottom)/2,p=i&&d.animateScale,x=p?0:this.innerRadius,v=p?0:this.outerRadius,{sharedOptions:w,includeOptions:b}=this._getSharedOptions(n,r);let C=this._getRotation(),N;for(N=0;N<n;++N)C+=this._circumference(N,i);for(N=n;N<n+s;++N){const S=this._circumference(N,i),A=t[N],k={x:u+this.offsetX,y:f+this.offsetY,startAngle:C,endAngle:C+S,circumference:S,outerRadius:v,innerRadius:x};b&&(k.options=w||this.resolveDataElementOptions(N,A.active?"active":r)),C+=S,this.updateElement(A,N,k,r)}}calculateTotal(){const t=this._cachedMeta,n=t.data;let s=0,r;for(r=0;r<n.length;r++){const i=t._parsed[r];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(r)&&!n[r].hidden&&(s+=Math.abs(i))}return s}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?pn*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,s=this.chart,r=s.data.labels||[],i=LP(n._parsed[t],s.options.locale);return{label:r[t]||"",value:i}}getMaxBorderWidth(t){let n=0;const s=this.chart;let r,i,l,o,c;if(!t){for(r=0,i=s.data.datasets.length;r<i;++r)if(s.isDatasetVisible(r)){l=s.getDatasetMeta(r),t=l.data,o=l.controller;break}}if(!t)return 0;for(r=0,i=t.length;r<i;++r)c=o.resolveDataElementOptions(r),c.borderAlign!=="inner"&&(n=Math.max(n,c.borderWidth||0,c.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let s=0,r=t.length;s<r;++s){const i=this.resolveDataElementOptions(s);n=Math.max(n,i.offset||0,i.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(t){return Math.max(aa(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class WUe extends gj{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:s,data:r=[],_dataset:i}=n,l=this.chart._animationsDisabled;let{start:o,count:c}=fze(n,r,l);this._drawStart=o,this._drawCount=c,hze(n)&&(o=0,c=r.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!i._decimated,s.points=r;const d=this.resolveDatasetElementOptions(t);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(s,void 0,{animated:!l,options:d},t),this.updateElements(r,o,c,t)}updateElements(t,n,s,r){const i=r==="reset",{iScale:l,vScale:o,_stacked:c,_dataset:d}=this._cachedMeta,{sharedOptions:u,includeOptions:f}=this._getSharedOptions(n,r),p=l.axis,x=o.axis,{spanGaps:v,segment:w}=this.options,b=xp(v)?v:Number.POSITIVE_INFINITY,C=this.chart._animationsDisabled||i||r==="none",N=n+s,S=t.length;let A=n>0&&this.getParsed(n-1);for(let k=0;k<S;++k){const _=t[k],T=C?_:{};if(k<n||k>=N){T.skip=!0;continue}const E=this.getParsed(k),I=ja(E[x]),z=T[p]=l.getPixelForValue(E[p],k),$=T[x]=i||I?o.getBasePixel():o.getPixelForValue(c?this.applyStack(o,E,c):E[x],k);T.skip=isNaN(z)||isNaN($)||I,T.stop=k>0&&Math.abs(E[p]-A[p])>b,w&&(T.parsed=E,T.raw=d.data[k]),f&&(T.options=u||this.resolveDataElementOptions(k,_.active?"active":r)),C||this.updateElement(_,k,T,r),A=E}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,s=n.options&&n.options.borderWidth||0,r=t.data||[];if(!r.length)return s;const i=r[0].size(this.resolveDataElementOptions(0)),l=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,i,l)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}class VUe extends GUe{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}function Cd(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class UP{static override(t){Object.assign(UP.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return Cd()}parse(){return Cd()}format(){return Cd()}add(){return Cd()}diff(){return Cd()}startOf(){return Cd()}endOf(){return Cd()}}var qUe={_date:UP};function YUe(e,t,n,s){const{controller:r,data:i,_sorted:l}=e,o=r._cachedMeta.iScale,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(o&&t===o.axis&&t!=="r"&&l&&i.length){const d=o._reversePixels?oze:Gd;if(s){if(r._sharedOptions){const u=i[0],f=typeof u.getRange=="function"&&u.getRange(t);if(f){const p=d(i,t,n-f),x=d(i,t,n+f);return{lo:p.lo,hi:x.hi}}}}else{const u=d(i,t,n);if(c){const{vScale:f}=r._cachedMeta,{_parsed:p}=e,x=p.slice(0,u.lo+1).reverse().findIndex(w=>!ja(w[f.axis]));u.lo-=Math.max(0,x);const v=p.slice(u.hi).findIndex(w=>!ja(w[f.axis]));u.hi+=Math.max(0,v)}return u}}return{lo:0,hi:i.length-1}}function pj(e,t,n,s,r){const i=e.getSortedVisibleDatasetMetas(),l=n[t];for(let o=0,c=i.length;o<c;++o){const{index:d,data:u}=i[o],{lo:f,hi:p}=YUe(i[o],t,l,r);for(let x=f;x<=p;++x){const v=u[x];v.skip||s(v,d,x)}}}function KUe(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(s,r){const i=t?Math.abs(s.x-r.x):0,l=n?Math.abs(s.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(l,2))}}function J_(e,t,n,s,r){const i=[];return!r&&!e.isPointInArea(t)||pj(e,n,t,function(o,c,d){!r&&!bp(o,e.chartArea,0)||o.inRange(t.x,t.y,s)&&i.push({element:o,datasetIndex:c,index:d})},!0),i}function QUe(e,t,n,s){let r=[];function i(l,o,c){const{startAngle:d,endAngle:u}=l.getProps(["startAngle","endAngle"],s),{angle:f}=sX(l,{x:t.x,y:t.y});yp(f,d,u)&&r.push({element:l,datasetIndex:o,index:c})}return pj(e,n,t,i),r}function XUe(e,t,n,s,r,i){let l=[];const o=KUe(n);let c=Number.POSITIVE_INFINITY;function d(u,f,p){const x=u.inRange(t.x,t.y,r);if(s&&!x)return;const v=u.getCenterPoint(r);if(!(!!i||e.isPointInArea(v))&&!x)return;const b=o(t,v);b<c?(l=[{element:u,datasetIndex:f,index:p}],c=b):b===c&&l.push({element:u,datasetIndex:f,index:p})}return pj(e,n,t,d),l}function eA(e,t,n,s,r,i){return!i&&!e.isPointInArea(t)?[]:n==="r"&&!s?QUe(e,t,n,r):XUe(e,t,n,s,r,i)}function _F(e,t,n,s,r){const i=[],l=n==="x"?"inXRange":"inYRange";let o=!1;return pj(e,n,t,(c,d,u)=>{c[l]&&c[l](t[n],r)&&(i.push({element:c,datasetIndex:d,index:u}),o=o||c.inRange(t.x,t.y,r))}),s&&!o?[]:i}var ZUe={modes:{index(e,t,n,s){const r=Ld(t,e),i=n.axis||"x",l=n.includeInvisible||!1,o=n.intersect?J_(e,r,i,s,l):eA(e,r,i,!1,s,l),c=[];return o.length?(e.getSortedVisibleDatasetMetas().forEach(d=>{const u=o[0].index,f=d.data[u];f&&!f.skip&&c.push({element:f,datasetIndex:d.index,index:u})}),c):[]},dataset(e,t,n,s){const r=Ld(t,e),i=n.axis||"xy",l=n.includeInvisible||!1;let o=n.intersect?J_(e,r,i,s,l):eA(e,r,i,!1,s,l);if(o.length>0){const c=o[0].datasetIndex,d=e.getDatasetMeta(c).data;o=[];for(let u=0;u<d.length;++u)o.push({element:d[u],datasetIndex:c,index:u})}return o},point(e,t,n,s){const r=Ld(t,e),i=n.axis||"xy",l=n.includeInvisible||!1;return J_(e,r,i,s,l)},nearest(e,t,n,s){const r=Ld(t,e),i=n.axis||"xy",l=n.includeInvisible||!1;return eA(e,r,i,n.intersect,s,l)},x(e,t,n,s){const r=Ld(t,e);return _F(e,r,"x",n.intersect,s)},y(e,t,n,s){const r=Ld(t,e);return _F(e,r,"y",n.intersect,s)}}};const jX=["left","top","right","bottom"];function rg(e,t){return e.filter(n=>n.pos===t)}function AF(e,t){return e.filter(n=>jX.indexOf(n.pos)===-1&&n.box.axis===t)}function ig(e,t){return e.sort((n,s)=>{const r=t?s:n,i=t?n:s;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function JUe(e){const t=[];let n,s,r,i,l,o;for(n=0,s=(e||[]).length;n<s;++n)r=e[n],{position:i,options:{stack:l,stackWeight:o=1}}=r,t.push({index:n,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:l&&i+l,stackWeight:o});return t}function e7e(e){const t={};for(const n of e){const{stack:s,pos:r,stackWeight:i}=n;if(!s||!jX.includes(r))continue;const l=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=i}return t}function t7e(e,t){const n=e7e(e),{vBoxMaxWidth:s,hBoxMaxHeight:r}=t;let i,l,o;for(i=0,l=e.length;i<l;++i){o=e[i];const{fullSize:c}=o.box,d=n[o.stack],u=d&&o.stackWeight/d.weight;o.horizontal?(o.width=u?u*s:c&&t.availableWidth,o.height=r):(o.width=s,o.height=u?u*r:c&&t.availableHeight)}return n}function a7e(e){const t=JUe(e),n=ig(t.filter(d=>d.box.fullSize),!0),s=ig(rg(t,"left"),!0),r=ig(rg(t,"right")),i=ig(rg(t,"top"),!0),l=ig(rg(t,"bottom")),o=AF(t,"x"),c=AF(t,"y");return{fullSize:n,leftAndTop:s.concat(i),rightAndBottom:r.concat(c).concat(l).concat(o),chartArea:rg(t,"chartArea"),vertical:s.concat(r).concat(c),horizontal:i.concat(l).concat(o)}}function EF(e,t,n,s){return Math.max(e[n],t[n])+Math.max(e[s],t[s])}function CX(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function n7e(e,t,n,s){const{pos:r,box:i}=n,l=e.maxPadding;if(!ha(r)){n.size&&(e[r]-=n.size);const f=s[n.stack]||{size:0,count:1};f.size=Math.max(f.size,n.horizontal?i.height:i.width),n.size=f.size/f.count,e[r]+=n.size}i.getPadding&&CX(l,i.getPadding());const o=Math.max(0,t.outerWidth-EF(l,e,"left","right")),c=Math.max(0,t.outerHeight-EF(l,e,"top","bottom")),d=o!==e.w,u=c!==e.h;return e.w=o,e.h=c,n.horizontal?{same:d,other:u}:{same:u,other:d}}function s7e(e){const t=e.maxPadding;function n(s){const r=Math.max(t[s]-e[s],0);return e[s]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function r7e(e,t){const n=t.maxPadding;function s(r){const i={left:0,top:0,right:0,bottom:0};return r.forEach(l=>{i[l]=Math.max(t[l],n[l])}),i}return s(e?["left","right"]:["top","bottom"])}function Sg(e,t,n,s){const r=[];let i,l,o,c,d,u;for(i=0,l=e.length,d=0;i<l;++i){o=e[i],c=o.box,c.update(o.width||t.w,o.height||t.h,r7e(o.horizontal,t));const{same:f,other:p}=n7e(t,n,o,s);d|=f&&r.length,u=u||p,c.fullSize||r.push(o)}return d&&Sg(r,t,n,s)||u}function Yy(e,t,n,s,r){e.top=n,e.left=t,e.right=t+s,e.bottom=n+r,e.width=s,e.height=r}function TF(e,t,n,s){const r=n.padding;let{x:i,y:l}=t;for(const o of e){const c=o.box,d=s[o.stack]||{placed:0,weight:1},u=o.stackWeight/d.weight||1;if(o.horizontal){const f=t.w*u,p=d.size||c.height;pp(d.start)&&(l=d.start),c.fullSize?Yy(c,r.left,l,n.outerWidth-r.right-r.left,p):Yy(c,t.left+d.placed,l,f,p),d.start=l,d.placed+=f,l=c.bottom}else{const f=t.h*u,p=d.size||c.width;pp(d.start)&&(i=d.start),c.fullSize?Yy(c,i,r.top,p,n.outerHeight-r.bottom-r.top):Yy(c,i,t.top+d.placed,p,f),d.start=i,d.placed+=f,i=c.right}}t.x=i,t.y=l}var ei={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,s){if(!e)return;const r=ci(e.options.layout.padding),i=Math.max(t-r.width,0),l=Math.max(n-r.height,0),o=a7e(e.boxes),c=o.vertical,d=o.horizontal;Ea(e.boxes,w=>{typeof w.beforeLayout=="function"&&w.beforeLayout()});const u=c.reduce((w,b)=>b.box.options&&b.box.options.display===!1?w:w+1,0)||1,f=Object.freeze({outerWidth:t,outerHeight:n,padding:r,availableWidth:i,availableHeight:l,vBoxMaxWidth:i/2/u,hBoxMaxHeight:l/2}),p=Object.assign({},r);CX(p,ci(s));const x=Object.assign({maxPadding:p,w:i,h:l,x:r.left,y:r.top},r),v=t7e(c.concat(d),f);Sg(o.fullSize,x,f,v),Sg(c,x,f,v),Sg(d,x,f,v)&&Sg(c,x,f,v),s7e(x),TF(o.leftAndTop,x,f,v),x.x+=x.w,x.y+=x.h,TF(o.rightAndBottom,x,f,v),e.chartArea={left:x.left,top:x.top,right:x.left+x.w,bottom:x.top+x.h,height:x.h,width:x.w},Ea(o.chartArea,w=>{const b=w.box;Object.assign(b,e.chartArea),b.update(x.w,x.h,{left:0,top:0,right:0,bottom:0})})}};class SX{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,s){}removeEventListener(t,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,s,r){return n=Math.max(0,n||t.width),s=s||t.height,{width:n,height:Math.max(0,r?Math.floor(n/r):s)}}isAttached(t){return!0}updateConfig(t){}}class i7e extends SX{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const jb="$chartjs",l7e={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},kF=e=>e===null||e==="";function o7e(e,t){const n=e.style,s=e.getAttribute("height"),r=e.getAttribute("width");if(e[jb]={initial:{height:s,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",kF(r)){const i=fF(e,"width");i!==void 0&&(e.width=i)}if(kF(s))if(e.style.height==="")e.height=e.width/(t||2);else{const i=fF(e,"height");i!==void 0&&(e.height=i)}return e}const _X=nUe?{passive:!0}:!1;function c7e(e,t,n){e&&e.addEventListener(t,n,_X)}function d7e(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,_X)}function u7e(e,t){const n=l7e[e.type]||e.type,{x:s,y:r}=Ld(e,t);return{type:n,chart:t,native:e,x:s!==void 0?s:null,y:r!==void 0?r:null}}function Wv(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function m7e(e,t,n){const s=e.canvas,r=new MutationObserver(i=>{let l=!1;for(const o of i)l=l||Wv(o.addedNodes,s),l=l&&!Wv(o.removedNodes,s);l&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function f7e(e,t,n){const s=e.canvas,r=new MutationObserver(i=>{let l=!1;for(const o of i)l=l||Wv(o.removedNodes,s),l=l&&!Wv(o.addedNodes,s);l&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const wp=new Map;let LF=0;function AX(){const e=window.devicePixelRatio;e!==LF&&(LF=e,wp.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function h7e(e,t){wp.size||window.addEventListener("resize",AX),wp.set(e,t)}function g7e(e){wp.delete(e),wp.size||window.removeEventListener("resize",AX)}function p7e(e,t,n){const s=e.canvas,r=s&&zP(s);if(!r)return;const i=oX((o,c)=>{const d=r.clientWidth;n(o,c),d<r.clientWidth&&n()},window),l=new ResizeObserver(o=>{const c=o[0],d=c.contentRect.width,u=c.contentRect.height;d===0&&u===0||i(d,u)});return l.observe(r),h7e(e,i),l}function tA(e,t,n){n&&n.disconnect(),t==="resize"&&g7e(e)}function x7e(e,t,n){const s=e.canvas,r=oX(i=>{e.ctx!==null&&n(u7e(i,e))},e);return c7e(s,t,r),r}class y7e extends SX{acquireContext(t,n){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(o7e(t,n),s):null}releaseContext(t){const n=t.canvas;if(!n[jb])return!1;const s=n[jb].initial;["height","width"].forEach(i=>{const l=s[i];ja(l)?n.removeAttribute(i):n.setAttribute(i,l)});const r=s.style||{};return Object.keys(r).forEach(i=>{n.style[i]=r[i]}),n.width=n.width,delete n[jb],!0}addEventListener(t,n,s){this.removeEventListener(t,n);const r=t.$proxies||(t.$proxies={}),l={attach:m7e,detach:f7e,resize:p7e}[n]||x7e;r[n]=l(t,n,s)}removeEventListener(t,n){const s=t.$proxies||(t.$proxies={}),r=s[n];if(!r)return;({attach:tA,detach:tA,resize:tA}[n]||d7e)(t,n,r),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,s,r){return aUe(t,n,s,r)}isAttached(t){const n=t&&zP(t);return!!(n&&n.isConnected)}}function b7e(e){return!RP()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?i7e:y7e}let Ho=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:n,y:s}=this.getProps(["x","y"],t);return{x:n,y:s}}hasValue(){return xp(this.x)&&xp(this.y)}getProps(t,n){const s=this.$animations;if(!n||!s)return this;const r={};return t.forEach(i=>{r[i]=s[i]&&s[i].active()?s[i]._to:this[i]}),r}};function v7e(e,t){const n=e.options.ticks,s=w7e(e),r=Math.min(n.maxTicksLimit||s,s),i=n.major.enabled?j7e(t):[],l=i.length,o=i[0],c=i[l-1],d=[];if(l>r)return C7e(t,d,i,l/r),d;const u=N7e(i,t,r);if(l>0){let f,p;const x=l>1?Math.round((c-o)/(l-1)):null;for(Ky(t,d,u,ja(x)?0:o-x,o),f=0,p=l-1;f<p;f++)Ky(t,d,u,i[f],i[f+1]);return Ky(t,d,u,c,ja(x)?t.length:c+x),d}return Ky(t,d,u),d}function w7e(e){const t=e.options.offset,n=e._tickSize(),s=e._length/n+(t?0:1),r=e._maxLength/n;return Math.floor(Math.min(s,r))}function N7e(e,t,n){const s=S7e(e),r=t.length/n;if(!s)return Math.max(r,1);const i=tze(s);for(let l=0,o=i.length-1;l<o;l++){const c=i[l];if(c>r)return c}return Math.max(r,1)}function j7e(e){const t=[];let n,s;for(n=0,s=e.length;n<s;n++)e[n].major&&t.push(n);return t}function C7e(e,t,n,s){let r=0,i=n[0],l;for(s=Math.ceil(s),l=0;l<e.length;l++)l===i&&(t.push(e[l]),r++,i=n[r*s])}function Ky(e,t,n,s,r){const i=aa(s,0),l=Math.min(aa(r,e.length),e.length);let o=0,c,d,u;for(n=Math.ceil(n),r&&(c=r-s,n=c/Math.floor(c/n)),u=i;u<0;)o++,u=Math.round(i+o*n);for(d=Math.max(i,0);d<l;d++)d===u&&(t.push(e[d]),o++,u=Math.round(i+o*n))}function S7e(e){const t=e.length;let n,s;if(t<2)return!1;for(s=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==s)return!1;return s}const _7e=e=>e==="left"?"right":e==="right"?"left":e,PF=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,DF=(e,t)=>Math.min(t||e,e);function OF(e,t){const n=[],s=e.length/t,r=e.length;let i=0;for(;i<r;i+=s)n.push(e[Math.floor(i)]);return n}function A7e(e,t,n){const s=e.ticks.length,r=Math.min(t,s-1),i=e._startPixel,l=e._endPixel,o=1e-6;let c=e.getPixelForTick(r),d;if(!(n&&(s===1?d=Math.max(c-i,l-c):t===0?d=(e.getPixelForTick(1)-c)/2:d=(c-e.getPixelForTick(r-1))/2,c+=r<t?d:-d,c<i-o||c>l+o)))return c}function E7e(e,t){Ea(e,n=>{const s=n.gc,r=s.length/2;let i;if(r>t){for(i=0;i<r;++i)delete n.data[s[i]];s.splice(0,r)}})}function lg(e){return e.drawTicks?e.tickLength:0}function MF(e,t){if(!e.display)return 0;const n=_s(e.font,t),s=ci(e.padding);return(qn(e.text)?e.text.length:1)*n.lineHeight+s.height}function T7e(e,t){return Ou(e,{scale:t,type:"scale"})}function k7e(e,t,n){return Ou(e,{tick:n,index:t,type:"tick"})}function L7e(e,t,n){let s=TP(e);return(n&&t!=="right"||!n&&t==="right")&&(s=_7e(s)),s}function P7e(e,t,n,s){const{top:r,left:i,bottom:l,right:o,chart:c}=e,{chartArea:d,scales:u}=c;let f=0,p,x,v;const w=l-r,b=o-i;if(e.isHorizontal()){if(x=ws(s,i,o),ha(n)){const C=Object.keys(n)[0],N=n[C];v=u[C].getPixelForValue(N)+w-t}else n==="center"?v=(d.bottom+d.top)/2+w-t:v=PF(e,n,t);p=o-i}else{if(ha(n)){const C=Object.keys(n)[0],N=n[C];x=u[C].getPixelForValue(N)-b+t}else n==="center"?x=(d.left+d.right)/2-b+t:x=PF(e,n,t);v=ws(s,l,r),f=n==="left"?-Yn:Yn}return{titleX:x,titleY:v,maxWidth:p,rotation:f}}class qf extends Ho{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:s,_suggestedMax:r}=this;return t=qi(t,Number.POSITIVE_INFINITY),n=qi(n,Number.NEGATIVE_INFINITY),s=qi(s,Number.POSITIVE_INFINITY),r=qi(r,Number.NEGATIVE_INFINITY),{min:qi(t,s),max:qi(n,r),minDefined:oi(t),maxDefined:oi(n)}}getMinMax(t){let{min:n,max:s,minDefined:r,maxDefined:i}=this.getUserBounds(),l;if(r&&i)return{min:n,max:s};const o=this.getMatchingVisibleMetas();for(let c=0,d=o.length;c<d;++c)l=o[c].controller.getMinMax(this,t),r||(n=Math.min(n,l.min)),i||(s=Math.max(s,l.max));return n=i&&n>s?s:n,s=r&&n>s?n:s,{min:qi(n,qi(s,n)),max:qi(s,qi(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){qa(this.options.beforeUpdate,[this])}update(t,n,s){const{beginAtZero:r,grace:i,ticks:l}=this.options,o=l.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Oze(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=o<this.ticks.length;this._convertTicksToLabels(c?OF(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),l.display&&(l.autoSkip||l.source==="auto")&&(this.ticks=v7e(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,t=!t),this._startPixel=n,this._endPixel=s,this._reversePixels=t,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){qa(this.options.afterUpdate,[this])}beforeSetDimensions(){qa(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){qa(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),qa(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){qa(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let s,r,i;for(s=0,r=t.length;s<r;s++)i=t[s],i.label=qa(n.callback,[i.value,s,t],this)}afterTickToLabelConversion(){qa(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){qa(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,s=DF(this.ticks.length,t.ticks.maxTicksLimit),r=n.minRotation||0,i=n.maxRotation;let l=r,o,c,d;if(!this._isVisible()||!n.display||r>=i||s<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),f=u.widest.width,p=u.highest.height,x=Ss(this.chart.width-f,0,this.maxWidth);o=t.offset?this.maxWidth/s:x/(s-1),f+6>o&&(o=x/(s-(t.offset?.5:1)),c=this.maxHeight-lg(t.grid)-n.padding-MF(t.title,this.chart.options.font),d=Math.sqrt(f*f+p*p),l=rze(Math.min(Math.asin(Ss((u.highest.height+6)/o,-1,1)),Math.asin(Ss(c/d,-1,1))-Math.asin(Ss(p/d,-1,1)))),l=Math.max(r,Math.min(i,l))),this.labelRotation=l}afterCalculateLabelRotation(){qa(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){qa(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:s,title:r,grid:i}}=this,l=this._isVisible(),o=this.isHorizontal();if(l){const c=MF(r,n.options.font);if(o?(t.width=this.maxWidth,t.height=lg(i)+c):(t.height=this.maxHeight,t.width=lg(i)+c),s.display&&this.ticks.length){const{first:d,last:u,widest:f,highest:p}=this._getLabelSizes(),x=s.padding*2,v=lo(this.labelRotation),w=Math.cos(v),b=Math.sin(v);if(o){const C=s.mirror?0:b*f.width+w*p.height;t.height=Math.min(this.maxHeight,t.height+C+x)}else{const C=s.mirror?0:w*f.width+b*p.height;t.width=Math.min(this.maxWidth,t.width+C+x)}this._calculatePadding(d,u,b,w)}}this._handleMargins(),o?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,s,r){const{ticks:{align:i,padding:l},position:o}=this.options,c=this.labelRotation!==0,d=o!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,x=0;c?d?(p=r*t.width,x=s*n.height):(p=s*t.height,x=r*n.width):i==="start"?x=n.width:i==="end"?p=t.width:i!=="inner"&&(p=t.width/2,x=n.width/2),this.paddingLeft=Math.max((p-u+l)*this.width/(this.width-u),0),this.paddingRight=Math.max((x-f+l)*this.width/(this.width-f),0)}else{let u=n.height/2,f=t.height/2;i==="start"?(u=0,f=t.height):i==="end"&&(u=n.height,f=0),this.paddingTop=u+l,this.paddingBottom=f+l}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){qa(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,s;for(n=0,s=t.length;n<s;n++)ja(t[n].label)&&(t.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=OF(s,n)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,s){const{ctx:r,_longestTextCache:i}=this,l=[],o=[],c=Math.floor(n/DF(n,s));let d=0,u=0,f,p,x,v,w,b,C,N,S,A,k;for(f=0;f<n;f+=c){if(v=t[f].label,w=this._resolveTickFontOptions(f),r.font=b=w.string,C=i[b]=i[b]||{data:{},gc:[]},N=w.lineHeight,S=A=0,!ja(v)&&!qn(v))S=oF(r,C.data,C.gc,S,v),A=N;else if(qn(v))for(p=0,x=v.length;p<x;++p)k=v[p],!ja(k)&&!qn(k)&&(S=oF(r,C.data,C.gc,S,k),A+=N);l.push(S),o.push(A),d=Math.max(S,d),u=Math.max(A,u)}E7e(i,n);const _=l.indexOf(d),T=o.indexOf(u),E=I=>({width:l[I]||0,height:o[I]||0});return{first:E(0),last:E(n-1),widest:E(_),highest:E(T),widths:l,heights:o}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return lze(this._alignToPixels?jd(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const s=n[t];return s.$context||(s.$context=k7e(this.getContext(),t,s))}return this.$context||(this.$context=T7e(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=lo(this.labelRotation),s=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),i=this._getLabelSizes(),l=t.autoSkipPadding||0,o=i?i.widest.width+l:0,c=i?i.highest.height+l:0;return this.isHorizontal()?c*s>o*r?o/s:c/r:c*r<o*s?c/s:o/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,s=this.chart,r=this.options,{grid:i,position:l,border:o}=r,c=i.offset,d=this.isHorizontal(),f=this.ticks.length+(c?1:0),p=lg(i),x=[],v=o.setContext(this.getContext()),w=v.display?v.width:0,b=w/2,C=function(F){return jd(s,F,w)};let N,S,A,k,_,T,E,I,z,$,P,O;if(l==="top")N=C(this.bottom),T=this.bottom-p,I=N-b,$=C(t.top)+b,O=t.bottom;else if(l==="bottom")N=C(this.top),$=t.top,O=C(t.bottom)-b,T=N+b,I=this.top+p;else if(l==="left")N=C(this.right),_=this.right-p,E=N-b,z=C(t.left)+b,P=t.right;else if(l==="right")N=C(this.left),z=t.left,P=C(t.right)-b,_=N+b,E=this.left+p;else if(n==="x"){if(l==="center")N=C((t.top+t.bottom)/2+.5);else if(ha(l)){const F=Object.keys(l)[0],ee=l[F];N=C(this.chart.scales[F].getPixelForValue(ee))}$=t.top,O=t.bottom,T=N+b,I=T+p}else if(n==="y"){if(l==="center")N=C((t.left+t.right)/2);else if(ha(l)){const F=Object.keys(l)[0],ee=l[F];N=C(this.chart.scales[F].getPixelForValue(ee))}_=N-b,E=_-p,z=t.left,P=t.right}const B=aa(r.ticks.maxTicksLimit,f),Q=Math.max(1,Math.ceil(f/B));for(S=0;S<f;S+=Q){const F=this.getContext(S),ee=i.setContext(F),V=o.setContext(F),de=ee.lineWidth,oe=ee.color,Z=V.dash||[],R=V.dashOffset,ve=ee.tickWidth,X=ee.tickColor,je=ee.tickBorderDash||[],Ne=ee.tickBorderDashOffset;A=A7e(this,S,c),A!==void 0&&(k=jd(s,A,de),d?_=E=z=P=k:T=I=$=O=k,x.push({tx1:_,ty1:T,tx2:E,ty2:I,x1:z,y1:$,x2:P,y2:O,width:de,color:oe,borderDash:Z,borderDashOffset:R,tickWidth:ve,tickColor:X,tickBorderDash:je,tickBorderDashOffset:Ne}))}return this._ticksLength=f,this._borderValue=N,x}_computeLabelItems(t){const n=this.axis,s=this.options,{position:r,ticks:i}=s,l=this.isHorizontal(),o=this.ticks,{align:c,crossAlign:d,padding:u,mirror:f}=i,p=lg(s.grid),x=p+u,v=f?-u:x,w=-lo(this.labelRotation),b=[];let C,N,S,A,k,_,T,E,I,z,$,P,O="middle";if(r==="top")_=this.bottom-v,T=this._getXAxisLabelAlignment();else if(r==="bottom")_=this.top+v,T=this._getXAxisLabelAlignment();else if(r==="left"){const Q=this._getYAxisLabelAlignment(p);T=Q.textAlign,k=Q.x}else if(r==="right"){const Q=this._getYAxisLabelAlignment(p);T=Q.textAlign,k=Q.x}else if(n==="x"){if(r==="center")_=(t.top+t.bottom)/2+x;else if(ha(r)){const Q=Object.keys(r)[0],F=r[Q];_=this.chart.scales[Q].getPixelForValue(F)+x}T=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")k=(t.left+t.right)/2-x;else if(ha(r)){const Q=Object.keys(r)[0],F=r[Q];k=this.chart.scales[Q].getPixelForValue(F)}T=this._getYAxisLabelAlignment(p).textAlign}n==="y"&&(c==="start"?O="top":c==="end"&&(O="bottom"));const B=this._getLabelSizes();for(C=0,N=o.length;C<N;++C){S=o[C],A=S.label;const Q=i.setContext(this.getContext(C));E=this.getPixelForTick(C)+i.labelOffset,I=this._resolveTickFontOptions(C),z=I.lineHeight,$=qn(A)?A.length:1;const F=$/2,ee=Q.color,V=Q.textStrokeColor,de=Q.textStrokeWidth;let oe=T;l?(k=E,T==="inner"&&(C===N-1?oe=this.options.reverse?"left":"right":C===0?oe=this.options.reverse?"right":"left":oe="center"),r==="top"?d==="near"||w!==0?P=-$*z+z/2:d==="center"?P=-B.highest.height/2-F*z+z:P=-B.highest.height+z/2:d==="near"||w!==0?P=z/2:d==="center"?P=B.highest.height/2-F*z:P=B.highest.height-$*z,f&&(P*=-1),w!==0&&!Q.showLabelBackdrop&&(k+=z/2*Math.sin(w))):(_=E,P=(1-$)*z/2);let Z;if(Q.showLabelBackdrop){const R=ci(Q.backdropPadding),ve=B.heights[C],X=B.widths[C];let je=P-R.top,Ne=0-R.left;switch(O){case"middle":je-=ve/2;break;case"bottom":je-=ve;break}switch(T){case"center":Ne-=X/2;break;case"right":Ne-=X;break;case"inner":C===N-1?Ne-=X:C>0&&(Ne-=X/2);break}Z={left:Ne,top:je,width:X+R.width,height:ve+R.height,color:Q.backdropColor}}b.push({label:A,font:I,textOffset:P,options:{rotation:w,color:ee,strokeColor:V,strokeWidth:de,textAlign:oe,textBaseline:O,translation:[k,_],backdrop:Z}})}return b}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-lo(this.labelRotation))return t==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:s,mirror:r,padding:i}}=this.options,l=this._getLabelSizes(),o=t+i,c=l.widest.width;let d,u;return n==="left"?r?(u=this.right+i,s==="near"?d="left":s==="center"?(d="center",u+=c/2):(d="right",u+=c)):(u=this.right-o,s==="near"?d="right":s==="center"?(d="center",u-=c/2):(d="left",u=this.left)):n==="right"?r?(u=this.left+i,s==="near"?d="right":s==="center"?(d="center",u-=c/2):(d="left",u-=c)):(u=this.left+o,s==="near"?d="left":s==="center"?(d="center",u+=c/2):(d="right",u=this.right)):d="right",{textAlign:d,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:s,top:r,width:i,height:l}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(s,r,i,l),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(i=>i.value===t);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const n=this.options.grid,s=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let i,l;const o=(c,d,u)=>{!u.width||!u.color||(s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset,s.beginPath(),s.moveTo(c.x,c.y),s.lineTo(d.x,d.y),s.stroke(),s.restore())};if(n.display)for(i=0,l=r.length;i<l;++i){const c=r[i];n.drawOnChartArea&&o({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),n.drawTicks&&o({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:s,grid:r}}=this,i=s.setContext(this.getContext()),l=s.display?i.width:0;if(!l)return;const o=r.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let d,u,f,p;this.isHorizontal()?(d=jd(t,this.left,l)-l/2,u=jd(t,this.right,o)+o/2,f=p=c):(f=jd(t,this.top,l)-l/2,p=jd(t,this.bottom,o)+o/2,d=u=c),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(d,f),n.lineTo(u,p),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,r=this._computeLabelArea();r&&PP(s,r);const i=this.getLabelItems(t);for(const l of i){const o=l.options,c=l.font,d=l.label,u=l.textOffset;vp(s,d,0,u,c,o)}r&&DP(s)}drawTitle(){const{ctx:t,options:{position:n,title:s,reverse:r}}=this;if(!s.display)return;const i=_s(s.font),l=ci(s.padding),o=s.align;let c=i.lineHeight/2;n==="bottom"||n==="center"||ha(n)?(c+=l.bottom,qn(s.text)&&(c+=i.lineHeight*(s.text.length-1))):c+=l.top;const{titleX:d,titleY:u,maxWidth:f,rotation:p}=P7e(this,c,n,o);vp(t,s.text,0,0,i,{color:s.color,maxWidth:f,rotation:p,textAlign:L7e(o,n,r),textBaseline:"middle",translation:[d,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,s=aa(t.grid&&t.grid.z,-1),r=aa(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==qf.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:s,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",r=[];let i,l;for(i=0,l=n.length;i<l;++i){const o=n[i];o[s]===this.id&&(!t||o.type===t)&&r.push(o)}return r}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return _s(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Qy{constructor(t,n,s){this.type=t,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let s;M7e(n)&&(s=this.register(n));const r=this.items,i=t.id,l=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+t);return i in r||(r[i]=t,D7e(t,l,s),this.override&&Nn.override(t.id,t.overrides)),l}get(t){return this.items[t]}unregister(t){const n=this.items,s=t.id,r=this.scope;s in n&&delete n[s],r&&s in Nn[r]&&(delete Nn[r][s],this.override&&delete Nu[s])}}function D7e(e,t,n){const s=gp(Object.create(null),[n?Nn.get(n):{},Nn.get(t),e.defaults]);Nn.set(t,s),e.defaultRoutes&&O7e(t,e.defaultRoutes),e.descriptors&&Nn.describe(t,e.descriptors)}function O7e(e,t){Object.keys(t).forEach(n=>{const s=n.split("."),r=s.pop(),i=[e].concat(s).join("."),l=t[n].split("."),o=l.pop(),c=l.join(".");Nn.route(i,r,c,o)})}function M7e(e){return"id"in e&&"defaults"in e}class I7e{constructor(){this.controllers=new Qy(gj,"datasets",!0),this.elements=new Qy(Ho,"elements"),this.plugins=new Qy(Object,"plugins"),this.scales=new Qy(qf,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,s){[...n].forEach(r=>{const i=s||this._getRegistryForType(r);s||i.isForType(r)||i===this.plugins&&r.id?this._exec(t,i,r):Ea(r,l=>{const o=s||this._getRegistryForType(l);this._exec(t,o,l)})})}_exec(t,n,s){const r=AP(t);qa(s["before"+r],[],s),n[t](s),qa(s["after"+r],[],s)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(t))return s}return this.plugins}_get(t,n,s){const r=n.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return r}}var Xi=new I7e;class $7e{constructor(){this._init=void 0}notify(t,n,s,r){if(n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const i=r?this._descriptors(t).filter(r):this._descriptors(t),l=this._notify(i,t,n,s);return n==="afterDestroy"&&(this._notify(i,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),l}_notify(t,n,s,r){r=r||{};for(const i of t){const l=i.plugin,o=l[s],c=[n,r,i.options];if(qa(o,c,l)===!1&&r.cancelable)return!1}return!0}invalidate(){ja(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const s=t&&t.config,r=aa(s.options&&s.options.plugins,{}),i=R7e(s);return r===!1&&!n?[]:U7e(t,i,r,n)}_notifyStateChanges(t){const n=this._oldCache||[],s=this._cache,r=(i,l)=>i.filter(o=>!l.some(c=>o.plugin.id===c.plugin.id));this._notify(r(n,s),t,"stop"),this._notify(r(s,n),t,"start")}}function R7e(e){const t={},n=[],s=Object.keys(Xi.plugins.items);for(let i=0;i<s.length;i++)n.push(Xi.getPlugin(s[i]));const r=e.plugins||[];for(let i=0;i<r.length;i++){const l=r[i];n.indexOf(l)===-1&&(n.push(l),t[l.id]=!0)}return{plugins:n,localIds:t}}function z7e(e,t){return!t&&e===!1?null:e===!0?{}:e}function U7e(e,{plugins:t,localIds:n},s,r){const i=[],l=e.getContext();for(const o of t){const c=o.id,d=z7e(s[c],r);d!==null&&i.push({plugin:o,options:F7e(e.config,{plugin:o,local:n[c]},d,l)})}return i}function F7e(e,{plugin:t,local:n},s,r){const i=e.pluginScopeKeys(t),l=e.getOptionScopes(s,i);return n&&t.defaults&&l.push(t.defaults),e.createResolver(l,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function $T(e,t){const n=Nn.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function B7e(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function H7e(e,t){return e===t?"_index_":"_value_"}function IF(e){if(e==="x"||e==="y"||e==="r")return e}function G7e(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function RT(e,...t){if(IF(e))return e;for(const n of t){const s=n.axis||G7e(n.position)||e.length>1&&IF(e[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function $F(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function W7e(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(s=>s.xAxisID===e||s.yAxisID===e);if(n.length)return $F(e,"x",n[0])||$F(e,"y",n[0])}return{}}function V7e(e,t){const n=Nu[e.type]||{scales:{}},s=t.scales||{},r=$T(e.type,t),i=Object.create(null);return Object.keys(s).forEach(l=>{const o=s[l];if(!ha(o))return console.error(`Invalid scale configuration for scale: ${l}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const c=RT(l,o,W7e(l,e),Nn.scales[o.type]),d=H7e(c,r),u=n.scales||{};i[l]=Og(Object.create(null),[{axis:c},o,u[c],u[d]])}),e.data.datasets.forEach(l=>{const o=l.type||e.type,c=l.indexAxis||$T(o,t),u=(Nu[o]||{}).scales||{};Object.keys(u).forEach(f=>{const p=B7e(f,c),x=l[p+"AxisID"]||p;i[x]=i[x]||Object.create(null),Og(i[x],[{axis:p},s[x],u[f]])})}),Object.keys(i).forEach(l=>{const o=i[l];Og(o,[Nn.scales[o.type],Nn.scale])}),i}function EX(e){const t=e.options||(e.options={});t.plugins=aa(t.plugins,{}),t.scales=V7e(e,t)}function TX(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function q7e(e){return e=e||{},e.data=TX(e.data),EX(e),e}const RF=new Map,kX=new Set;function Xy(e,t){let n=RF.get(e);return n||(n=t(),RF.set(e,n),kX.add(n)),n}const og=(e,t,n)=>{const s=wu(t,n);s!==void 0&&e.add(s)};class Y7e{constructor(t){this._config=q7e(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=TX(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),EX(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Xy(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return Xy(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return Xy(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,s=this.type;return Xy(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const s=this._scopeCache;let r=s.get(t);return(!r||n)&&(r=new Map,s.set(t,r)),r}getOptionScopes(t,n,s){const{options:r,type:i}=this,l=this._cachedScopes(t,s),o=l.get(n);if(o)return o;const c=new Set;n.forEach(u=>{t&&(c.add(t),u.forEach(f=>og(c,t,f))),u.forEach(f=>og(c,r,f)),u.forEach(f=>og(c,Nu[i]||{},f)),u.forEach(f=>og(c,Nn,f)),u.forEach(f=>og(c,MT,f))});const d=Array.from(c);return d.length===0&&d.push(Object.create(null)),kX.has(n)&&l.set(n,d),d}chartOptionScopes(){const{options:t,type:n}=this;return[t,Nu[n]||{},Nn.datasets[n]||{},{type:n},Nn,MT]}resolveNamedOptions(t,n,s,r=[""]){const i={$shared:!0},{resolver:l,subPrefixes:o}=zF(this._resolverCache,t,r);let c=l;if(Q7e(l,n)){i.$shared=!1,s=Yc(s)?s():s;const d=this.createResolver(t,s,o);c=bf(l,s,d)}for(const d of n)i[d]=c[d];return i}createResolver(t,n,s=[""],r){const{resolver:i}=zF(this._resolverCache,t,s);return ha(n)?bf(i,n,void 0,r):i}}function zF(e,t,n){let s=e.get(t);s||(s=new Map,e.set(t,s));const r=n.join();let i=s.get(r);return i||(i={resolver:MP(t,n),subPrefixes:n.filter(o=>!o.toLowerCase().includes("hover"))},s.set(r,i)),i}const K7e=e=>ha(e)&&Object.getOwnPropertyNames(e).some(t=>Yc(e[t]));function Q7e(e,t){const{isScriptable:n,isIndexable:s}=mX(e);for(const r of t){const i=n(r),l=s(r),o=(l||i)&&e[r];if(i&&(Yc(o)||K7e(o))||l&&qn(o))return!0}return!1}var X7e="4.5.1";const Z7e=["top","bottom","left","right","chartArea"];function UF(e,t){return e==="top"||e==="bottom"||Z7e.indexOf(e)===-1&&t==="x"}function FF(e,t){return function(n,s){return n[e]===s[e]?n[t]-s[t]:n[e]-s[e]}}function BF(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),qa(n&&n.onComplete,[e],t)}function J7e(e){const t=e.chart,n=t.options.animation;qa(n&&n.onProgress,[e],t)}function LX(e){return RP()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Cb={},HF=e=>{const t=LX(e);return Object.values(Cb).filter(n=>n.canvas===t).pop()};function eFe(e,t,n){const s=Object.keys(e);for(const r of s){const i=+r;if(i>=t){const l=e[r];delete e[r],(n>0||i>t)&&(e[i+n]=l)}}}function tFe(e,t,n,s){return!n||e.type==="mouseout"?null:s?t:e}let xj=class{static defaults=Nn;static instances=Cb;static overrides=Nu;static registry=Xi;static version=X7e;static getChart=HF;static register(...t){Xi.add(...t),GF()}static unregister(...t){Xi.remove(...t),GF()}constructor(t,n){const s=this.config=new Y7e(n),r=LX(t),i=HF(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const l=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||b7e(r)),this.platform.updateConfig(s);const o=this.platform.acquireContext(r,l.aspectRatio),c=o&&o.canvas,d=c&&c.height,u=c&&c.width;if(this.id=VRe(),this.ctx=o,this.canvas=c,this.width=u,this.height=d,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new $7e,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=uze(f=>this.update(f),l.resizeDelay||0),this._dataChanges=[],Cb[this.id]=this,!o||!c){console.error("Failed to create chart: can't acquire context from the given item");return}Zl.listen(this,"complete",BF),Zl.listen(this,"progress",J7e),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:s,height:r,_aspectRatio:i}=this;return ja(t)?n&&i?i:r?s/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Xi}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():mF(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return cF(this.canvas,this.ctx),this}stop(){return Zl.stop(this),this}resize(t,n){Zl.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const s=this.options,r=this.canvas,i=s.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(r,t,n,i),o=s.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,mF(this,o,!0)&&(this.notifyPlugins("resize",{size:l}),qa(s.onResize,[this,l],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Ea(n,(s,r)=>{s.id=r})}buildOrUpdateScales(){const t=this.options,n=t.scales,s=this.scales,r=Object.keys(s).reduce((l,o)=>(l[o]=!1,l),{});let i=[];n&&(i=i.concat(Object.keys(n).map(l=>{const o=n[l],c=RT(l,o),d=c==="r",u=c==="x";return{options:o,dposition:d?"chartArea":u?"bottom":"left",dtype:d?"radialLinear":u?"category":"linear"}}))),Ea(i,l=>{const o=l.options,c=o.id,d=RT(c,o),u=aa(o.type,l.dtype);(o.position===void 0||UF(o.position,d)!==UF(l.dposition))&&(o.position=l.dposition),r[c]=!0;let f=null;if(c in s&&s[c].type===u)f=s[c];else{const p=Xi.getScale(u);f=new p({id:c,type:u,ctx:this.ctx,chart:this}),s[f.id]=f}f.init(o,t)}),Ea(r,(l,o)=>{l||delete s[o]}),Ea(s,l=>{ei.configure(this,l,l.options),ei.addBox(this,l)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,s=t.length;if(t.sort((r,i)=>r.index-i.index),s>n){for(let r=n;r<s;++r)this._destroyDatasetMeta(r);t.splice(n,s-n)}this._sortedMetasets=t.slice(0).sort(FF("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((s,r)=>{n.filter(i=>i===s._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let s,r;for(this._removeUnreferencedMetasets(),s=0,r=n.length;s<r;s++){const i=n[s];let l=this.getDatasetMeta(s);const o=i.type||this.config.type;if(l.type&&l.type!==o&&(this._destroyDatasetMeta(s),l=this.getDatasetMeta(s)),l.type=o,l.indexAxis=i.indexAxis||$T(o,this.options),l.order=i.order||0,l.index=s,l.label=""+i.label,l.visible=this.isDatasetVisible(s),l.controller)l.controller.updateIndex(s),l.controller.linkScales();else{const c=Xi.getController(o),{datasetElementType:d,dataElementType:u}=Nn.datasets[o];Object.assign(c,{dataElementType:Xi.getElement(u),datasetElementType:d&&Xi.getElement(d)}),l.controller=new c(this,s),t.push(l.controller)}}return this._updateMetasets(),t}_resetElements(){Ea(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let d=0,u=this.data.datasets.length;d<u;d++){const{controller:f}=this.getDatasetMeta(d),p=!r&&i.indexOf(f)===-1;f.buildOrUpdateElements(p),l=Math.max(+f.getMaxOverflow(),l)}l=this._minPadding=s.layout.autoPadding?l:0,this._updateLayout(l),r||Ea(i,d=>{d.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(FF("z","_idx"));const{_active:o,_lastEvent:c}=this;c?this._eventHandler(c,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){Ea(this.scales,t=>{ei.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!J7(n,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:r,count:i}of n){const l=s==="_removeElements"?-i:i;eFe(t,r,l)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=i=>new Set(t.filter(l=>l[0]===i).map((l,o)=>o+","+l.splice(1).join(","))),r=s(0);for(let i=1;i<n;i++)if(!J7(r,s(i)))return;return Array.from(r).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ei.update(this,this.width,this.height,t);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],Ea(this.boxes,r=>{s&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,i)=>{r._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,Yc(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const s=this.getDatasetMeta(t),r={meta:s,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(s.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Zl.has(this)?this.attached&&!Zl.running(this)&&Zl.start(this):(this.draw(),BF({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,s=[];let r,i;for(r=0,i=n.length;r<i;++r){const l=n[r];(!t||l.visible)&&s.push(l)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,s={meta:t,index:t.index,cancelable:!0},r=xUe(this,t);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(r&&PP(n,r),t.controller.draw(),r&&DP(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return bp(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,s,r){const i=ZUe.modes[n];return typeof i=="function"?i(this,t,s,r):[]}getDatasetMeta(t){const n=this.data.datasets[t],s=this._metasets;let r=s.filter(i=>i&&i._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},s.push(r)),r}getContext(){return this.$context||(this.$context=Ou(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(t,n){const s=this.getDatasetMeta(t);s.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,s){const r=s?"show":"hide",i=this.getDatasetMeta(t),l=i.controller._resolveAnimations(void 0,r);pp(n)?(i.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),l.update(i,{visible:s}),this.update(o=>o.datasetIndex===t?r:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),Zl.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),cF(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Cb[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,s=(i,l)=>{n.addEventListener(this,i,l),t[i]=l},r=(i,l,o)=>{i.offsetX=l,i.offsetY=o,this._eventHandler(i)};Ea(this.options.events,i=>s(i,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,s=(c,d)=>{n.addEventListener(this,c,d),t[c]=d},r=(c,d)=>{t[c]&&(n.removeEventListener(this,c,d),delete t[c])},i=(c,d)=>{this.canvas&&this.resize(c,d)};let l;const o=()=>{r("attach",o),this.attached=!0,this.resize(),s("resize",i),s("detach",l)};l=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),s("attach",o)},n.isAttached(this.canvas)?o():l()}unbindEvents(){Ea(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},Ea(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,s){const r=s?"set":"remove";let i,l,o,c;for(n==="dataset"&&(i=this.getDatasetMeta(t[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),o=0,c=t.length;o<c;++o){l=t[o];const d=l&&this.getDatasetMeta(l.datasetIndex).controller;d&&d[r+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],s=t.map(({datasetIndex:i,index:l})=>{const o=this.getDatasetMeta(i);if(!o)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:o.data[l],index:l}});!Uv(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(t,n,s){return this._plugins.notify(this,t,n,s)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,s){const r=this.options.hover,i=(c,d)=>c.filter(u=>!d.some(f=>u.datasetIndex===f.datasetIndex&&u.index===f.index)),l=i(n,t),o=s?t:i(t,n);l.length&&this.updateHoverStyle(l,r.mode,!1),o.length&&r.mode&&this.updateHoverStyle(o,r.mode,!0)}_eventHandler(t,n){const s={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},r=l=>(l.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,r)===!1)return;const i=this._handleEvent(t,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,r),(i||s.changed)&&this.render(),this}_handleEvent(t,n,s){const{_active:r=[],options:i}=this,l=n,o=this._getActiveElements(t,r,s,l),c=ZRe(t),d=tFe(t,this._lastEvent,s,c);s&&(this._lastEvent=null,qa(i.onHover,[t,o,this],this),c&&qa(i.onClick,[t,o,this],this));const u=!Uv(o,r);return(u||n)&&(this._active=o,this._updateHoverStyles(o,r,n)),this._lastEvent=d,u}_getActiveElements(t,n,s,r){if(t.type==="mouseout")return[];if(!s)return n;const i=this.options.hover;return this.getElementsAtEventForMode(t,i.mode,i,r)}};function GF(){return Ea(xj.instances,e=>e._plugins.invalidate())}function aFe(e,t,n){const{startAngle:s,x:r,y:i,outerRadius:l,innerRadius:o,options:c}=t,{borderWidth:d,borderJoinStyle:u}=c,f=Math.min(d/l,Si(s-n));if(e.beginPath(),e.arc(r,i,l-d/2,s+f/2,n-f/2),o>0){const p=Math.min(d/o,Si(s-n));e.arc(r,i,o+d/2,n-p/2,s+p/2,!0)}else{const p=Math.min(d/2,l*Si(s-n));if(u==="round")e.arc(r,i,p,n-ka/2,s+ka/2,!0);else if(u==="bevel"){const x=2*p*p,v=-x*Math.cos(n+ka/2)+r,w=-x*Math.sin(n+ka/2)+i,b=x*Math.cos(s+ka/2)+r,C=x*Math.sin(s+ka/2)+i;e.lineTo(v,w),e.lineTo(b,C)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}function nFe(e,t,n){const{startAngle:s,pixelMargin:r,x:i,y:l,outerRadius:o,innerRadius:c}=t;let d=r/o;e.beginPath(),e.arc(i,l,o,s-d,n+d),c>r?(d=r/c,e.arc(i,l,c,n+d,s-d,!0)):e.arc(i,l,r,n+Yn,s-Yn),e.closePath(),e.clip()}function sFe(e){return OP(e,["outerStart","outerEnd","innerStart","innerEnd"])}function rFe(e,t,n,s){const r=sFe(e.options.borderRadius),i=(n-t)/2,l=Math.min(i,s*t/2),o=c=>{const d=(n-Math.min(i,c))*s/2;return Ss(c,0,Math.min(i,d))};return{outerStart:o(r.outerStart),outerEnd:o(r.outerEnd),innerStart:Ss(r.innerStart,0,l),innerEnd:Ss(r.innerEnd,0,l)}}function Om(e,t,n,s){return{x:n+e*Math.cos(t),y:s+e*Math.sin(t)}}function Vv(e,t,n,s,r,i){const{x:l,y:o,startAngle:c,pixelMargin:d,innerRadius:u}=t,f=Math.max(t.outerRadius+s+n-d,0),p=u>0?u+s+n+d:0;let x=0;const v=r-c;if(s){const Q=u>0?u-s:0,F=f>0?f-s:0,ee=(Q+F)/2,V=ee!==0?v*ee/(ee+s):v;x=(v-V)/2}const w=Math.max(.001,v*f-n/ka)/f,b=(v-w)/2,C=c+b+x,N=r-b-x,{outerStart:S,outerEnd:A,innerStart:k,innerEnd:_}=rFe(t,p,f,N-C),T=f-S,E=f-A,I=C+S/T,z=N-A/E,$=p+k,P=p+_,O=C+k/$,B=N-_/P;if(e.beginPath(),i){const Q=(I+z)/2;if(e.arc(l,o,f,I,Q),e.arc(l,o,f,Q,z),A>0){const de=Om(E,z,l,o);e.arc(de.x,de.y,A,z,N+Yn)}const F=Om(P,N,l,o);if(e.lineTo(F.x,F.y),_>0){const de=Om(P,B,l,o);e.arc(de.x,de.y,_,N+Yn,B+Math.PI)}const ee=(N-_/p+(C+k/p))/2;if(e.arc(l,o,p,N-_/p,ee,!0),e.arc(l,o,p,ee,C+k/p,!0),k>0){const de=Om($,O,l,o);e.arc(de.x,de.y,k,O+Math.PI,C-Yn)}const V=Om(T,C,l,o);if(e.lineTo(V.x,V.y),S>0){const de=Om(T,I,l,o);e.arc(de.x,de.y,S,C-Yn,I)}}else{e.moveTo(l,o);const Q=Math.cos(I)*f+l,F=Math.sin(I)*f+o;e.lineTo(Q,F);const ee=Math.cos(z)*f+l,V=Math.sin(z)*f+o;e.lineTo(ee,V)}e.closePath()}function iFe(e,t,n,s,r){const{fullCircles:i,startAngle:l,circumference:o}=t;let c=t.endAngle;if(i){Vv(e,t,n,s,c,r);for(let d=0;d<i;++d)e.fill();isNaN(o)||(c=l+(o%pn||pn))}return Vv(e,t,n,s,c,r),e.fill(),c}function lFe(e,t,n,s,r){const{fullCircles:i,startAngle:l,circumference:o,options:c}=t,{borderWidth:d,borderJoinStyle:u,borderDash:f,borderDashOffset:p,borderRadius:x}=c,v=c.borderAlign==="inner";if(!d)return;e.setLineDash(f||[]),e.lineDashOffset=p,v?(e.lineWidth=d*2,e.lineJoin=u||"round"):(e.lineWidth=d,e.lineJoin=u||"bevel");let w=t.endAngle;if(i){Vv(e,t,n,s,w,r);for(let b=0;b<i;++b)e.stroke();isNaN(o)||(w=l+(o%pn||pn))}v&&nFe(e,t,w),c.selfJoin&&w-l>=ka&&x===0&&u!=="miter"&&aFe(e,t,w),i||(Vv(e,t,n,s,w,r),e.stroke())}class oFe extends Ho{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,n,s){const r=this.getProps(["x","y"],s),{angle:i,distance:l}=sX(r,{x:t,y:n}),{startAngle:o,endAngle:c,innerRadius:d,outerRadius:u,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),p=(this.options.spacing+this.options.borderWidth)/2,x=aa(f,c-o),v=yp(i,o,c)&&o!==c,w=x>=pn||v,b=Oc(l,d+p,u+p);return w&&b}getCenterPoint(t){const{x:n,y:s,startAngle:r,endAngle:i,innerRadius:l,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:c,spacing:d}=this.options,u=(r+i)/2,f=(l+o+d+c)/2;return{x:n+Math.cos(u)*f,y:s+Math.sin(u)*f}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:n,circumference:s}=this,r=(n.offset||0)/4,i=(n.spacing||0)/2,l=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=s>pn?Math.floor(s/pn):0,s===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const o=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(o)*r,Math.sin(o)*r);const c=1-Math.sin(Math.min(ka,s||0)),d=r*c;t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,iFe(t,this,d,i,l),lFe(t,this,d,i,l),t.restore()}}function PX(e,t,n=t){e.lineCap=aa(n.borderCapStyle,t.borderCapStyle),e.setLineDash(aa(n.borderDash,t.borderDash)),e.lineDashOffset=aa(n.borderDashOffset,t.borderDashOffset),e.lineJoin=aa(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=aa(n.borderWidth,t.borderWidth),e.strokeStyle=aa(n.borderColor,t.borderColor)}function cFe(e,t,n){e.lineTo(n.x,n.y)}function dFe(e){return e.stepped?Sze:e.tension||e.cubicInterpolationMode==="monotone"?_ze:cFe}function DX(e,t,n={}){const s=e.length,{start:r=0,end:i=s-1}=n,{start:l,end:o}=t,c=Math.max(r,l),d=Math.min(i,o),u=r<l&&i<l||r>o&&i>o;return{count:s,start:c,loop:t.loop,ilen:d<c&&!u?s+d-c:d-c}}function uFe(e,t,n,s){const{points:r,options:i}=t,{count:l,start:o,loop:c,ilen:d}=DX(r,n,s),u=dFe(i);let{move:f=!0,reverse:p}=s||{},x,v,w;for(x=0;x<=d;++x)v=r[(o+(p?d-x:x))%l],!v.skip&&(f?(e.moveTo(v.x,v.y),f=!1):u(e,w,v,p,i.stepped),w=v);return c&&(v=r[(o+(p?d:0))%l],u(e,w,v,p,i.stepped)),!!c}function mFe(e,t,n,s){const r=t.points,{count:i,start:l,ilen:o}=DX(r,n,s),{move:c=!0,reverse:d}=s||{};let u=0,f=0,p,x,v,w,b,C;const N=A=>(l+(d?o-A:A))%i,S=()=>{w!==b&&(e.lineTo(u,b),e.lineTo(u,w),e.lineTo(u,C))};for(c&&(x=r[N(0)],e.moveTo(x.x,x.y)),p=0;p<=o;++p){if(x=r[N(p)],x.skip)continue;const A=x.x,k=x.y,_=A|0;_===v?(k<w?w=k:k>b&&(b=k),u=(f*u+A)/++f):(S(),e.lineTo(A,k),v=_,f=0,w=b=k),C=k}S()}function zT(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?mFe:uFe}function fFe(e){return e.stepped?sUe:e.tension||e.cubicInterpolationMode==="monotone"?rUe:Pd}function hFe(e,t,n,s){let r=t._path;r||(r=t._path=new Path2D,t.path(r,n,s)&&r.closePath()),PX(e,t.options),e.stroke(r)}function gFe(e,t,n,s){const{segments:r,options:i}=t,l=zT(t);for(const o of r)PX(e,i,o.style),e.beginPath(),l(e,t,o,{start:n,end:n+s-1})&&e.closePath(),e.stroke()}const pFe=typeof Path2D=="function";function xFe(e,t,n,s){pFe&&!t.options.segment?hFe(e,t,n,s):gFe(e,t,n,s)}class yFe extends Ho{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const r=s.spanGaps?this._loop:this._fullLoop;Qze(this._points,s,t,r,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=fUe(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,s=t.length;return s&&n[t[s-1].end]}interpolate(t,n){const s=this.options,r=t[n],i=this.points,l=dUe(this,{property:n,start:r,end:r});if(!l.length)return;const o=[],c=fFe(s);let d,u;for(d=0,u=l.length;d<u;++d){const{start:f,end:p}=l[d],x=i[f],v=i[p];if(x===v){o.push(x);continue}const w=Math.abs((r-x[n])/(v[n]-x[n])),b=c(x,v,w,s.stepped);b[n]=t[n],o.push(b)}return o.length===1?o[0]:o}pathSegment(t,n,s){return zT(this)(t,this,n,s)}path(t,n,s){const r=this.segments,i=zT(this);let l=this._loop;n=n||0,s=s||this.points.length-n;for(const o of r)l&=i(t,this,o,{start:n,end:n+s-1});return!!l}draw(t,n,s,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(t.save(),xFe(t,this,s,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function WF(e,t,n,s){const r=e.options,{[n]:i}=e.getProps([n],s);return Math.abs(t-i)<r.radius+r.hitRadius}class bFe extends Ho{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,n,s){const r=this.options,{x:i,y:l}=this.getProps(["x","y"],s);return Math.pow(t-i,2)+Math.pow(n-l,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,n){return WF(this,t,"x",n)}inYRange(t,n){return WF(this,t,"y",n)}getCenterPoint(t){const{x:n,y:s}=this.getProps(["x","y"],t);return{x:n,y:s}}size(t){t=t||this.options||{};let n=t.radius||0;n=Math.max(n,n&&t.hoverRadius||0);const s=n&&t.borderWidth||0;return(n+s)*2}draw(t,n){const s=this.options;this.skip||s.radius<.1||!bp(this,n,this.size(s)/2)||(t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.fillStyle=s.backgroundColor,IT(t,s,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function OX(e,t){const{x:n,y:s,base:r,width:i,height:l}=e.getProps(["x","y","base","width","height"],t);let o,c,d,u,f;return e.horizontal?(f=l/2,o=Math.min(n,r),c=Math.max(n,r),d=s-f,u=s+f):(f=i/2,o=n-f,c=n+f,d=Math.min(s,r),u=Math.max(s,r)),{left:o,top:d,right:c,bottom:u}}function Ic(e,t,n,s){return e?0:Ss(t,n,s)}function vFe(e,t,n){const s=e.options.borderWidth,r=e.borderSkipped,i=uX(s);return{t:Ic(r.top,i.top,0,n),r:Ic(r.right,i.right,0,t),b:Ic(r.bottom,i.bottom,0,n),l:Ic(r.left,i.left,0,t)}}function wFe(e,t,n){const{enableBorderRadius:s}=e.getProps(["enableBorderRadius"]),r=e.options.borderRadius,i=Zm(r),l=Math.min(t,n),o=e.borderSkipped,c=s||ha(r);return{topLeft:Ic(!c||o.top||o.left,i.topLeft,0,l),topRight:Ic(!c||o.top||o.right,i.topRight,0,l),bottomLeft:Ic(!c||o.bottom||o.left,i.bottomLeft,0,l),bottomRight:Ic(!c||o.bottom||o.right,i.bottomRight,0,l)}}function NFe(e){const t=OX(e),n=t.right-t.left,s=t.bottom-t.top,r=vFe(e,n/2,s/2),i=wFe(e,n/2,s/2);return{outer:{x:t.left,y:t.top,w:n,h:s,radius:i},inner:{x:t.left+r.l,y:t.top+r.t,w:n-r.l-r.r,h:s-r.t-r.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,i.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(r.b,r.r))}}}}function aA(e,t,n,s){const r=t===null,i=n===null,o=e&&!(r&&i)&&OX(e,s);return o&&(r||Oc(t,o.left,o.right))&&(i||Oc(n,o.top,o.bottom))}function jFe(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function CFe(e,t){e.rect(t.x,t.y,t.w,t.h)}function nA(e,t,n={}){const s=e.x!==n.x?-t:0,r=e.y!==n.y?-t:0,i=(e.x+e.w!==n.x+n.w?t:0)-s,l=(e.y+e.h!==n.y+n.h?t:0)-r;return{x:e.x+s,y:e.y+r,w:e.w+i,h:e.h+l,radius:e.radius}}class SFe extends Ho{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:n,options:{borderColor:s,backgroundColor:r}}=this,{inner:i,outer:l}=NFe(this),o=jFe(l.radius)?Hv:CFe;t.save(),(l.w!==i.w||l.h!==i.h)&&(t.beginPath(),o(t,nA(l,n,i)),t.clip(),o(t,nA(i,-n,l)),t.fillStyle=s,t.fill("evenodd")),t.beginPath(),o(t,nA(i,n)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,n,s){return aA(this,t,n,s)}inXRange(t,n){return aA(this,t,null,n)}inYRange(t,n){return aA(this,null,t,n)}getCenterPoint(t){const{x:n,y:s,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],t);return{x:i?(n+r)/2:n,y:i?s:(s+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}const VF=(e,t)=>{let{boxHeight:n=t,boxWidth:s=t}=e;return e.usePointStyle&&(n=Math.min(n,t),s=e.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(t,n)}},_Fe=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class qF extends Ho{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,s){this.maxWidth=t,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=qa(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(s=>t.filter(s,this.chart.data))),t.sort&&(n=n.sort((s,r)=>t.sort(s,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,r=_s(s.font),i=r.size,l=this._computeTitleHeight(),{boxWidth:o,itemHeight:c}=VF(s,i);let d,u;n.font=r.string,this.isHorizontal()?(d=this.maxWidth,u=this._fitRows(l,i,o,c)+10):(u=this.maxHeight,d=this._fitCols(l,r,o,c)+10),this.width=Math.min(d,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,n,s,r){const{ctx:i,maxWidth:l,options:{labels:{padding:o}}}=this,c=this.legendHitBoxes=[],d=this.lineWidths=[0],u=r+o;let f=t;i.textAlign="left",i.textBaseline="middle";let p=-1,x=-u;return this.legendItems.forEach((v,w)=>{const b=s+n/2+i.measureText(v.text).width;(w===0||d[d.length-1]+b+2*o>l)&&(f+=u,d[d.length-(w>0?0:1)]=0,x+=u,p++),c[w]={left:0,top:x,row:p,width:b,height:r},d[d.length-1]+=b+o}),f}_fitCols(t,n,s,r){const{ctx:i,maxHeight:l,options:{labels:{padding:o}}}=this,c=this.legendHitBoxes=[],d=this.columnSizes=[],u=l-t;let f=o,p=0,x=0,v=0,w=0;return this.legendItems.forEach((b,C)=>{const{itemWidth:N,itemHeight:S}=AFe(s,n,i,b,r);C>0&&x+S+2*o>u&&(f+=p+o,d.push({width:p,height:x}),v+=p+o,w++,p=x=0),c[C]={left:v,top:x,col:w,width:N,height:S},p=Math.max(p,N),x+=S+o}),f+=p,d.push({width:p,height:x}),f}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:r},rtl:i}}=this,l=Jm(i,this.left,this.width);if(this.isHorizontal()){let o=0,c=ws(s,this.left+r,this.right-this.lineWidths[o]);for(const d of n)o!==d.row&&(o=d.row,c=ws(s,this.left+r,this.right-this.lineWidths[o])),d.top+=this.top+t+r,d.left=l.leftForLtr(l.x(c),d.width),c+=d.width+r}else{let o=0,c=ws(s,this.top+t+r,this.bottom-this.columnSizes[o].height);for(const d of n)d.col!==o&&(o=d.col,c=ws(s,this.top+t+r,this.bottom-this.columnSizes[o].height)),d.top=c,d.left+=this.left+r,d.left=l.leftForLtr(l.x(d.left),d.width),c+=d.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;PP(t,this),this._draw(),DP(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:s,ctx:r}=this,{align:i,labels:l}=t,o=Nn.color,c=Jm(t.rtl,this.left,this.width),d=_s(l.font),{padding:u}=l,f=d.size,p=f/2;let x;this.drawTitle(),r.textAlign=c.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=d.string;const{boxWidth:v,boxHeight:w,itemHeight:b}=VF(l,f),C=function(_,T,E){if(isNaN(v)||v<=0||isNaN(w)||w<0)return;r.save();const I=aa(E.lineWidth,1);if(r.fillStyle=aa(E.fillStyle,o),r.lineCap=aa(E.lineCap,"butt"),r.lineDashOffset=aa(E.lineDashOffset,0),r.lineJoin=aa(E.lineJoin,"miter"),r.lineWidth=I,r.strokeStyle=aa(E.strokeStyle,o),r.setLineDash(aa(E.lineDash,[])),l.usePointStyle){const z={radius:w*Math.SQRT2/2,pointStyle:E.pointStyle,rotation:E.rotation,borderWidth:I},$=c.xPlus(_,v/2),P=T+p;dX(r,z,$,P,l.pointStyleWidth&&v)}else{const z=T+Math.max((f-w)/2,0),$=c.leftForLtr(_,v),P=Zm(E.borderRadius);r.beginPath(),Object.values(P).some(O=>O!==0)?Hv(r,{x:$,y:z,w:v,h:w,radius:P}):r.rect($,z,v,w),r.fill(),I!==0&&r.stroke()}r.restore()},N=function(_,T,E){vp(r,E.text,_,T+b/2,d,{strikethrough:E.hidden,textAlign:c.textAlign(E.textAlign)})},S=this.isHorizontal(),A=this._computeTitleHeight();S?x={x:ws(i,this.left+u,this.right-s[0]),y:this.top+u+A,line:0}:x={x:this.left+u,y:ws(i,this.top+A+u,this.bottom-n[0].height),line:0},xX(this.ctx,t.textDirection);const k=b+u;this.legendItems.forEach((_,T)=>{r.strokeStyle=_.fontColor,r.fillStyle=_.fontColor;const E=r.measureText(_.text).width,I=c.textAlign(_.textAlign||(_.textAlign=l.textAlign)),z=v+p+E;let $=x.x,P=x.y;c.setWidth(this.width),S?T>0&&$+z+u>this.right&&(P=x.y+=k,x.line++,$=x.x=ws(i,this.left+u,this.right-s[x.line])):T>0&&P+k>this.bottom&&($=x.x=$+n[x.line].width+u,x.line++,P=x.y=ws(i,this.top+A+u,this.bottom-n[x.line].height));const O=c.x($);if(C(O,P,_),$=mze(I,$+v+p,S?$+z:this.right,t.rtl),N(c.x($),P,_),S)x.x+=z+u;else if(typeof _.text!="string"){const B=d.lineHeight;x.y+=MX(_,B)+u}else x.y+=k}),yX(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,s=_s(n.font),r=ci(n.padding);if(!n.display)return;const i=Jm(t.rtl,this.left,this.width),l=this.ctx,o=n.position,c=s.size/2,d=r.top+c;let u,f=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),u=this.top+d,f=ws(t.align,f,this.right-p);else{const v=this.columnSizes.reduce((w,b)=>Math.max(w,b.height),0);u=d+ws(t.align,this.top,this.bottom-v-t.labels.padding-this._computeTitleHeight())}const x=ws(o,f,f+p);l.textAlign=i.textAlign(TP(o)),l.textBaseline="middle",l.strokeStyle=n.color,l.fillStyle=n.color,l.font=s.string,vp(l,n.text,x,u,s)}_computeTitleHeight(){const t=this.options.title,n=_s(t.font),s=ci(t.padding);return t.display?n.lineHeight+s.height:0}_getLegendItemAt(t,n){let s,r,i;if(Oc(t,this.left,this.right)&&Oc(n,this.top,this.bottom)){for(i=this.legendHitBoxes,s=0;s<i.length;++s)if(r=i[s],Oc(t,r.left,r.left+r.width)&&Oc(n,r.top,r.top+r.height))return this.legendItems[s]}return null}handleEvent(t){const n=this.options;if(!kFe(t.type,n))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,i=_Fe(r,s);r&&!i&&qa(n.onLeave,[t,r,this],this),this._hoveredItem=s,s&&!i&&qa(n.onHover,[t,s,this],this)}else s&&qa(n.onClick,[t,s,this],this)}}function AFe(e,t,n,s,r){const i=EFe(s,e,t,n),l=TFe(r,s,t.lineHeight);return{itemWidth:i,itemHeight:l}}function EFe(e,t,n,s){let r=e.text;return r&&typeof r!="string"&&(r=r.reduce((i,l)=>i.length>l.length?i:l)),t+n.size/2+s.measureText(r).width}function TFe(e,t,n){let s=e;return typeof t.text!="string"&&(s=MX(t,n)),s}function MX(e,t){const n=e.text?e.text.length:0;return t*n}function kFe(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var LFe={id:"legend",_element:qF,start(e,t,n){const s=e.legend=new qF({ctx:e.ctx,options:n,chart:e});ei.configure(e,s,n),ei.addBox(e,s)},stop(e){ei.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const s=e.legend;ei.configure(e,s,n),s.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const s=t.datasetIndex,r=n.chart;r.isDatasetVisible(s)?(r.hide(s),t.hidden=!0):(r.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:r,color:i,useBorderRadius:l,borderRadius:o}}=e.legend.options;return e._getSortedDatasetMetas().map(c=>{const d=c.controller.getStyle(n?0:void 0),u=ci(d.borderWidth);return{text:t[c.index].label,fillStyle:d.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:d.borderColor,pointStyle:s||d.pointStyle,rotation:d.rotation,textAlign:r||d.textAlign,borderRadius:l&&(o||d.borderRadius),datasetIndex:c.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class IX extends Ho{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const r=qn(s.text)?s.text.length:1;this._padding=ci(s.padding);const i=r*_s(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:s,bottom:r,right:i,options:l}=this,o=l.align;let c=0,d,u,f;return this.isHorizontal()?(u=ws(o,s,i),f=n+t,d=i-s):(l.position==="left"?(u=s+t,f=ws(o,r,n),c=ka*-.5):(u=i-t,f=ws(o,n,r),c=ka*.5),d=r-n),{titleX:u,titleY:f,maxWidth:d,rotation:c}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const s=_s(n.font),i=s.lineHeight/2+this._padding.top,{titleX:l,titleY:o,maxWidth:c,rotation:d}=this._drawArgs(i);vp(t,n.text,0,0,s,{color:n.color,maxWidth:c,rotation:d,textAlign:TP(n.align),textBaseline:"middle",translation:[l,o]})}}function PFe(e,t){const n=new IX({ctx:e.ctx,options:t,chart:e});ei.configure(e,n,t),ei.addBox(e,n),e.titleBlock=n}var DFe={id:"title",_element:IX,start(e,t,n){PFe(e,n)},stop(e){const t=e.titleBlock;ei.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const s=e.titleBlock;ei.configure(e,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const _g={average(e){if(!e.length)return!1;let t,n,s=new Set,r=0,i=0;for(t=0,n=e.length;t<n;++t){const o=e[t].element;if(o&&o.hasValue()){const c=o.tooltipPosition();s.add(c.x),r+=c.y,++i}}return i===0||s.size===0?!1:{x:[...s].reduce((o,c)=>o+c)/s.size,y:r/i}},nearest(e,t){if(!e.length)return!1;let n=t.x,s=t.y,r=Number.POSITIVE_INFINITY,i,l,o;for(i=0,l=e.length;i<l;++i){const c=e[i].element;if(c&&c.hasValue()){const d=c.getCenterPoint(),u=OT(t,d);u<r&&(r=u,o=c)}}if(o){const c=o.tooltipPosition();n=c.x,s=c.y}return{x:n,y:s}}};function Qi(e,t){return t&&(qn(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Jl(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function OFe(e,t){const{element:n,datasetIndex:s,index:r}=t,i=e.getDatasetMeta(s).controller,{label:l,value:o}=i.getLabelAndValue(r);return{chart:e,label:l,parsed:i.getParsed(r),raw:e.data.datasets[s].data[r],formattedValue:o,dataset:i.getDataset(),dataIndex:r,datasetIndex:s,element:n}}function YF(e,t){const n=e.chart.ctx,{body:s,footer:r,title:i}=e,{boxWidth:l,boxHeight:o}=t,c=_s(t.bodyFont),d=_s(t.titleFont),u=_s(t.footerFont),f=i.length,p=r.length,x=s.length,v=ci(t.padding);let w=v.height,b=0,C=s.reduce((A,k)=>A+k.before.length+k.lines.length+k.after.length,0);if(C+=e.beforeBody.length+e.afterBody.length,f&&(w+=f*d.lineHeight+(f-1)*t.titleSpacing+t.titleMarginBottom),C){const A=t.displayColors?Math.max(o,c.lineHeight):c.lineHeight;w+=x*A+(C-x)*c.lineHeight+(C-1)*t.bodySpacing}p&&(w+=t.footerMarginTop+p*u.lineHeight+(p-1)*t.footerSpacing);let N=0;const S=function(A){b=Math.max(b,n.measureText(A).width+N)};return n.save(),n.font=d.string,Ea(e.title,S),n.font=c.string,Ea(e.beforeBody.concat(e.afterBody),S),N=t.displayColors?l+2+t.boxPadding:0,Ea(s,A=>{Ea(A.before,S),Ea(A.lines,S),Ea(A.after,S)}),N=0,n.font=u.string,Ea(e.footer,S),n.restore(),b+=v.width,{width:b,height:w}}function MFe(e,t){const{y:n,height:s}=t;return n<s/2?"top":n>e.height-s/2?"bottom":"center"}function IFe(e,t,n,s){const{x:r,width:i}=s,l=n.caretSize+n.caretPadding;if(e==="left"&&r+i+l>t.width||e==="right"&&r-i-l<0)return!0}function $Fe(e,t,n,s){const{x:r,width:i}=n,{width:l,chartArea:{left:o,right:c}}=e;let d="center";return s==="center"?d=r<=(o+c)/2?"left":"right":r<=i/2?d="left":r>=l-i/2&&(d="right"),IFe(d,e,t,n)&&(d="center"),d}function KF(e,t,n){const s=n.yAlign||t.yAlign||MFe(e,n);return{xAlign:n.xAlign||t.xAlign||$Fe(e,t,n,s),yAlign:s}}function RFe(e,t){let{x:n,width:s}=e;return t==="right"?n-=s:t==="center"&&(n-=s/2),n}function zFe(e,t,n){let{y:s,height:r}=e;return t==="top"?s+=n:t==="bottom"?s-=r+n:s-=r/2,s}function QF(e,t,n,s){const{caretSize:r,caretPadding:i,cornerRadius:l}=e,{xAlign:o,yAlign:c}=n,d=r+i,{topLeft:u,topRight:f,bottomLeft:p,bottomRight:x}=Zm(l);let v=RFe(t,o);const w=zFe(t,c,d);return c==="center"?o==="left"?v+=d:o==="right"&&(v-=d):o==="left"?v-=Math.max(u,p)+r:o==="right"&&(v+=Math.max(f,x)+r),{x:Ss(v,0,s.width-t.width),y:Ss(w,0,s.height-t.height)}}function Zy(e,t,n){const s=ci(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-s.right:e.x+s.left}function XF(e){return Qi([],Jl(e))}function UFe(e,t,n){return Ou(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function ZF(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const $X={beforeTitle:Ql,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return n[t.dataIndex]}return""},afterTitle:Ql,beforeBody:Ql,beforeLabel:Ql,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return ja(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Ql,afterBody:Ql,beforeFooter:Ql,footer:Ql,afterFooter:Ql};function Ks(e,t,n,s){const r=e[t].call(n,s);return typeof r>"u"?$X[t].call(n,s):r}class JF extends Ho{static positioners=_g;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,s=this.options.setContext(this.getContext()),r=s.enabled&&n.options.animation&&s.animations,i=new vX(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=UFe(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:s}=n,r=Ks(s,"beforeTitle",this,t),i=Ks(s,"title",this,t),l=Ks(s,"afterTitle",this,t);let o=[];return o=Qi(o,Jl(r)),o=Qi(o,Jl(i)),o=Qi(o,Jl(l)),o}getBeforeBody(t,n){return XF(Ks(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:s}=n,r=[];return Ea(t,i=>{const l={before:[],lines:[],after:[]},o=ZF(s,i);Qi(l.before,Jl(Ks(o,"beforeLabel",this,i))),Qi(l.lines,Ks(o,"label",this,i)),Qi(l.after,Jl(Ks(o,"afterLabel",this,i))),r.push(l)}),r}getAfterBody(t,n){return XF(Ks(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:s}=n,r=Ks(s,"beforeFooter",this,t),i=Ks(s,"footer",this,t),l=Ks(s,"afterFooter",this,t);let o=[];return o=Qi(o,Jl(r)),o=Qi(o,Jl(i)),o=Qi(o,Jl(l)),o}_createItems(t){const n=this._active,s=this.chart.data,r=[],i=[],l=[];let o=[],c,d;for(c=0,d=n.length;c<d;++c)o.push(OFe(this.chart,n[c]));return t.filter&&(o=o.filter((u,f,p)=>t.filter(u,f,p,s))),t.itemSort&&(o=o.sort((u,f)=>t.itemSort(u,f,s))),Ea(o,u=>{const f=ZF(t.callbacks,u);r.push(Ks(f,"labelColor",this,u)),i.push(Ks(f,"labelPointStyle",this,u)),l.push(Ks(f,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=l,this.dataPoints=o,o}update(t,n){const s=this.options.setContext(this.getContext()),r=this._active;let i,l=[];if(!r.length)this.opacity!==0&&(i={opacity:0});else{const o=_g[s.position].call(this,r,this._eventPosition);l=this._createItems(s),this.title=this.getTitle(l,s),this.beforeBody=this.getBeforeBody(l,s),this.body=this.getBody(l,s),this.afterBody=this.getAfterBody(l,s),this.footer=this.getFooter(l,s);const c=this._size=YF(this,s),d=Object.assign({},o,c),u=KF(this.chart,s,d),f=QF(s,d,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:f.x,y:f.y,width:c.width,height:c.height,caretX:o.x,caretY:o.y}}this._tooltipItems=l,this.$context=void 0,i&&this._resolveAnimations().update(this,i),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,s,r){const i=this.getCaretPosition(t,s,r);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(t,n,s){const{xAlign:r,yAlign:i}=this,{caretSize:l,cornerRadius:o}=s,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:f}=Zm(o),{x:p,y:x}=t,{width:v,height:w}=n;let b,C,N,S,A,k;return i==="center"?(A=x+w/2,r==="left"?(b=p,C=b-l,S=A+l,k=A-l):(b=p+v,C=b+l,S=A-l,k=A+l),N=b):(r==="left"?C=p+Math.max(c,u)+l:r==="right"?C=p+v-Math.max(d,f)-l:C=this.caretX,i==="top"?(S=x,A=S-l,b=C-l,N=C+l):(S=x+w,A=S+l,b=C+l,N=C-l),k=S),{x1:b,x2:C,x3:N,y1:S,y2:A,y3:k}}drawTitle(t,n,s){const r=this.title,i=r.length;let l,o,c;if(i){const d=Jm(s.rtl,this.x,this.width);for(t.x=Zy(this,s.titleAlign,s),n.textAlign=d.textAlign(s.titleAlign),n.textBaseline="middle",l=_s(s.titleFont),o=s.titleSpacing,n.fillStyle=s.titleColor,n.font=l.string,c=0;c<i;++c)n.fillText(r[c],d.x(t.x),t.y+l.lineHeight/2),t.y+=l.lineHeight+o,c+1===i&&(t.y+=s.titleMarginBottom-o)}}_drawColorBox(t,n,s,r,i){const l=this.labelColors[s],o=this.labelPointStyles[s],{boxHeight:c,boxWidth:d}=i,u=_s(i.bodyFont),f=Zy(this,"left",i),p=r.x(f),x=c<u.lineHeight?(u.lineHeight-c)/2:0,v=n.y+x;if(i.usePointStyle){const w={radius:Math.min(d,c)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},b=r.leftForLtr(p,d)+d/2,C=v+c/2;t.strokeStyle=i.multiKeyBackground,t.fillStyle=i.multiKeyBackground,IT(t,w,b,C),t.strokeStyle=l.borderColor,t.fillStyle=l.backgroundColor,IT(t,w,b,C)}else{t.lineWidth=ha(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,t.strokeStyle=l.borderColor,t.setLineDash(l.borderDash||[]),t.lineDashOffset=l.borderDashOffset||0;const w=r.leftForLtr(p,d),b=r.leftForLtr(r.xPlus(p,1),d-2),C=Zm(l.borderRadius);Object.values(C).some(N=>N!==0)?(t.beginPath(),t.fillStyle=i.multiKeyBackground,Hv(t,{x:w,y:v,w:d,h:c,radius:C}),t.fill(),t.stroke(),t.fillStyle=l.backgroundColor,t.beginPath(),Hv(t,{x:b,y:v+1,w:d-2,h:c-2,radius:C}),t.fill()):(t.fillStyle=i.multiKeyBackground,t.fillRect(w,v,d,c),t.strokeRect(w,v,d,c),t.fillStyle=l.backgroundColor,t.fillRect(b,v+1,d-2,c-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,n,s){const{body:r}=this,{bodySpacing:i,bodyAlign:l,displayColors:o,boxHeight:c,boxWidth:d,boxPadding:u}=s,f=_s(s.bodyFont);let p=f.lineHeight,x=0;const v=Jm(s.rtl,this.x,this.width),w=function(E){n.fillText(E,v.x(t.x+x),t.y+p/2),t.y+=p+i},b=v.textAlign(l);let C,N,S,A,k,_,T;for(n.textAlign=l,n.textBaseline="middle",n.font=f.string,t.x=Zy(this,b,s),n.fillStyle=s.bodyColor,Ea(this.beforeBody,w),x=o&&b!=="right"?l==="center"?d/2+u:d+2+u:0,A=0,_=r.length;A<_;++A){for(C=r[A],N=this.labelTextColors[A],n.fillStyle=N,Ea(C.before,w),S=C.lines,o&&S.length&&(this._drawColorBox(n,t,A,v,s),p=Math.max(f.lineHeight,c)),k=0,T=S.length;k<T;++k)w(S[k]),p=f.lineHeight;Ea(C.after,w)}x=0,p=f.lineHeight,Ea(this.afterBody,w),t.y-=i}drawFooter(t,n,s){const r=this.footer,i=r.length;let l,o;if(i){const c=Jm(s.rtl,this.x,this.width);for(t.x=Zy(this,s.footerAlign,s),t.y+=s.footerMarginTop,n.textAlign=c.textAlign(s.footerAlign),n.textBaseline="middle",l=_s(s.footerFont),n.fillStyle=s.footerColor,n.font=l.string,o=0;o<i;++o)n.fillText(r[o],c.x(t.x),t.y+l.lineHeight/2),t.y+=l.lineHeight+s.footerSpacing}}drawBackground(t,n,s,r){const{xAlign:i,yAlign:l}=this,{x:o,y:c}=t,{width:d,height:u}=s,{topLeft:f,topRight:p,bottomLeft:x,bottomRight:v}=Zm(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(o+f,c),l==="top"&&this.drawCaret(t,n,s,r),n.lineTo(o+d-p,c),n.quadraticCurveTo(o+d,c,o+d,c+p),l==="center"&&i==="right"&&this.drawCaret(t,n,s,r),n.lineTo(o+d,c+u-v),n.quadraticCurveTo(o+d,c+u,o+d-v,c+u),l==="bottom"&&this.drawCaret(t,n,s,r),n.lineTo(o+x,c+u),n.quadraticCurveTo(o,c+u,o,c+u-x),l==="center"&&i==="left"&&this.drawCaret(t,n,s,r),n.lineTo(o,c+f),n.quadraticCurveTo(o,c,o+f,c),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,s=this.$animations,r=s&&s.x,i=s&&s.y;if(r||i){const l=_g[t.position].call(this,this._active,this._eventPosition);if(!l)return;const o=this._size=YF(this,t),c=Object.assign({},l,this._size),d=KF(n,t,c),u=QF(t,c,d,n);(r._to!==u.x||i._to!==u.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=o.width,this.height=o.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const l=ci(n.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&o&&(t.save(),t.globalAlpha=s,this.drawBackground(i,t,r,n),xX(t,n.textDirection),i.y+=l.top,this.drawTitle(i,t,n),this.drawBody(i,t,n),this.drawFooter(i,t,n),yX(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const s=this._active,r=t.map(({datasetIndex:o,index:c})=>{const d=this.chart.getDatasetMeta(o);if(!d)throw new Error("Cannot find a dataset at index "+o);return{datasetIndex:o,element:d.data[c],index:c}}),i=!Uv(s,r),l=this._positionChanged(r,n);(i||l)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],l=this._getActiveElements(t,i,n,s),o=this._positionChanged(l,t),c=n||!Uv(l,i)||o;return c&&(this._active=l,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),c}_getActiveElements(t,n,s,r){const i=this.options;if(t.type==="mouseout")return[];if(!r)return n.filter(o=>this.chart.data.datasets[o.datasetIndex]&&this.chart.getDatasetMeta(o.datasetIndex).controller.getParsed(o.index)!==void 0);const l=this.chart.getElementsAtEventForMode(t,i.mode,i,s);return i.reverse&&l.reverse(),l}_positionChanged(t,n){const{caretX:s,caretY:r,options:i}=this,l=_g[i.position].call(this,t,n);return l!==!1&&(s!==l.x||r!==l.y)}}var FFe={id:"tooltip",_element:JF,positioners:_g,afterInit(e,t,n){n&&(e.tooltip=new JF({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:$X},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const BFe=(e,t,n,s)=>(typeof t=="string"?(n=e.push(t)-1,s.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function HFe(e,t,n,s){const r=e.indexOf(t);if(r===-1)return BFe(e,t,n,s);const i=e.lastIndexOf(t);return r!==i?n:r}const GFe=(e,t)=>e===null?null:Ss(Math.round(e),0,t);function e8(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class WFe extends qf{static id="category";static defaults={ticks:{callback:e8}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:r,label:i}of n)s[r]===i&&s.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(ja(t))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===t?n:HFe(s,t,aa(n,t),this._addedLabels),GFe(n,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:s,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),n||(r=this.getLabels().length-1)),this.min=s,this.max=r}buildTicks(){const t=this.min,n=this.max,s=this.options.offset,r=[];let i=this.getLabels();i=t===0&&n===i.length-1?i:i.slice(t,n+1),this._valueRange=Math.max(i.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let l=t;l<=n;l++)r.push({value:l});return r}getLabelForValue(t){return e8.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function VFe(e,t){const n=[],{bounds:r,step:i,min:l,max:o,precision:c,count:d,maxTicks:u,maxDigits:f,includeBounds:p}=e,x=i||1,v=u-1,{min:w,max:b}=t,C=!ja(l),N=!ja(o),S=!ja(d),A=(b-w)/(f+1);let k=tF((b-w)/v/x)*x,_,T,E,I;if(k<1e-14&&!C&&!N)return[{value:w},{value:b}];I=Math.ceil(b/k)-Math.floor(w/k),I>v&&(k=tF(I*k/v/x)*x),ja(c)||(_=Math.pow(10,c),k=Math.ceil(k*_)/_),r==="ticks"?(T=Math.floor(w/k)*k,E=Math.ceil(b/k)*k):(T=w,E=b),C&&N&&i&&nze((o-l)/i,k/1e3)?(I=Math.round(Math.min((o-l)/k,u)),k=(o-l)/I,T=l,E=o):S?(T=C?l:T,E=N?o:E,I=d-1,k=(E-T)/I):(I=(E-T)/k,Mg(I,Math.round(I),k/1e3)?I=Math.round(I):I=Math.ceil(I));const z=Math.max(aF(k),aF(T));_=Math.pow(10,ja(c)?z:c),T=Math.round(T*_)/_,E=Math.round(E*_)/_;let $=0;for(C&&(p&&T!==l?(n.push({value:l}),T<l&&$++,Mg(Math.round((T+$*k)*_)/_,l,t8(l,A,e))&&$++):T<l&&$++);$<I;++$){const P=Math.round((T+$*k)*_)/_;if(N&&P>o)break;n.push({value:P})}return N&&p&&E!==o?n.length&&Mg(n[n.length-1].value,o,t8(o,A,e))?n[n.length-1].value=o:n.push({value:o}):(!N||E===o)&&n.push({value:E}),n}function t8(e,t,{horizontal:n,minRotation:s}){const r=lo(s),i=(n?Math.sin(r):Math.cos(r))||.001,l=.75*t*(""+e).length;return Math.min(t/i,l)}class qFe extends qf{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return ja(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:r,max:i}=this;const l=c=>r=n?r:c,o=c=>i=s?i:c;if(t){const c=fl(r),d=fl(i);c<0&&d<0?o(0):c>0&&d>0&&l(0)}if(r===i){let c=i===0?1:Math.abs(i*.05);o(i+c),t||l(r-c)}this.min=r,this.max=i}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=t,r;return s?(r=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let s=this.getTickLimit();s=Math.max(2,s);const r={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,l=VFe(r,i);return t.bounds==="ticks"&&sze(l,this,"value"),t.reverse?(l.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),l}configure(){const t=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){const r=(s-n)/Math.max(t.length-1,1)/2;n-=r,s+=r}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(t){return LP(t,this.chart.options.locale,this.options.ticks.format)}}class YFe extends qFe{static id="linear";static defaults={ticks:{callback:cX.formatters.numeric}};determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=oi(t)?t:0,this.max=oi(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,s=lo(this.options.ticks.minRotation),r=(t?Math.sin(s):Math.cos(s))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const yj={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Xs=Object.keys(yj);function a8(e,t){return e-t}function n8(e,t){if(ja(t))return null;const n=e._adapter,{parser:s,round:r,isoWeekday:i}=e._parseOpts;let l=t;return typeof s=="function"&&(l=s(l)),oi(l)||(l=typeof s=="string"?n.parse(l,s):n.parse(l)),l===null?null:(r&&(l=r==="week"&&(xp(i)||i===!0)?n.startOf(l,"isoWeek",i):n.startOf(l,r)),+l)}function s8(e,t,n,s){const r=Xs.length;for(let i=Xs.indexOf(e);i<r-1;++i){const l=yj[Xs[i]],o=l.steps?l.steps:Number.MAX_SAFE_INTEGER;if(l.common&&Math.ceil((n-t)/(o*l.size))<=s)return Xs[i]}return Xs[r-1]}function KFe(e,t,n,s,r){for(let i=Xs.length-1;i>=Xs.indexOf(n);i--){const l=Xs[i];if(yj[l].common&&e._adapter.diff(r,s,l)>=t-1)return l}return Xs[n?Xs.indexOf(n):0]}function QFe(e){for(let t=Xs.indexOf(e)+1,n=Xs.length;t<n;++t)if(yj[Xs[t]].common)return Xs[t]}function r8(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:s,hi:r}=EP(n,t),i=n[s]>=t?n[s]:n[r];e[i]=!0}}function XFe(e,t,n,s){const r=e._adapter,i=+r.startOf(t[0].value,s),l=t[t.length-1].value;let o,c;for(o=i;o<=l;o=+r.add(o,1,s))c=n[o],c>=0&&(t[c].major=!0);return t}function i8(e,t,n){const s=[],r={},i=t.length;let l,o;for(l=0;l<i;++l)o=t[l],r[o]=l,s.push({value:o,major:!1});return i===0||!n?s:XFe(e,s,r,n)}class l8 extends qf{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const s=t.time||(t.time={}),r=this._adapter=new qUe._date(t.adapters.date);r.init(n),Og(s.displayFormats,r.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:n8(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,s=t.time.unit||"day";let{min:r,max:i,minDefined:l,maxDefined:o}=this.getUserBounds();function c(d){!l&&!isNaN(d.min)&&(r=Math.min(r,d.min)),!o&&!isNaN(d.max)&&(i=Math.max(i,d.max))}(!l||!o)&&(c(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&c(this.getMinMax(!1))),r=oi(r)&&!isNaN(r)?r:+n.startOf(Date.now(),s),i=oi(i)&&!isNaN(i)?i:+n.endOf(Date.now(),s)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],s=t[t.length-1]),{min:n,max:s}}buildTicks(){const t=this.options,n=t.time,s=t.ticks,r=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,l=this.max,o=cze(r,i,l);return this._unit=n.unit||(s.autoSkip?s8(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):KFe(this,o.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:QFe(this._unit),this.initOffsets(r),t.reverse&&o.reverse(),i8(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,s=0,r,i;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?n=1-r:n=(this.getDecimalForValue(t[1])-r)/2,i=this.getDecimalForValue(t[t.length-1]),t.length===1?s=i:s=(i-this.getDecimalForValue(t[t.length-2]))/2);const l=t.length<3?.5:.25;n=Ss(n,0,l),s=Ss(s,0,l),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const t=this._adapter,n=this.min,s=this.max,r=this.options,i=r.time,l=i.unit||s8(i.minUnit,n,s,this._getLabelCapacity(n)),o=aa(r.ticks.stepSize,1),c=l==="week"?i.isoWeekday:!1,d=xp(c)||c===!0,u={};let f=n,p,x;if(d&&(f=+t.startOf(f,"isoWeek",c)),f=+t.startOf(f,d?"day":l),t.diff(s,n,l)>1e5*o)throw new Error(n+" and "+s+" are too far apart with stepSize of "+o+" "+l);const v=r.ticks.source==="data"&&this.getDataTimestamps();for(p=f,x=0;p<s;p=+t.add(p,o,l),x++)r8(u,p,v);return(p===s||r.bounds==="ticks"||x===1)&&r8(u,p,v),Object.keys(u).sort(a8).map(w=>+w)}getLabelForValue(t){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(t,s.tooltipFormat):n.format(t,s.displayFormats.datetime)}format(t,n){const r=this.options.time.displayFormats,i=this._unit,l=n||r[i];return this._adapter.format(t,l)}_tickFormatFunction(t,n,s,r){const i=this.options,l=i.ticks.callback;if(l)return qa(l,[t,n,s],this);const o=i.time.displayFormats,c=this._unit,d=this._majorUnit,u=c&&o[c],f=d&&o[d],p=s[n],x=d&&f&&p&&p.major;return this._adapter.format(t,r||(x?f:u))}generateTickLabels(t){let n,s,r;for(n=0,s=t.length;n<s;++n)r=t[n],r.label=this._tickFormatFunction(r.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,s=this.ctx.measureText(t).width,r=lo(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(r),l=Math.sin(r),o=this._resolveTickFontOptions(0).size;return{w:s*i+o*l,h:s*l+o*i}}_getLabelCapacity(t){const n=this.options.time,s=n.displayFormats,r=s[n.unit]||s.millisecond,i=this._tickFormatFunction(t,0,i8(this,[t],this._majorUnit),r),l=this._getLabelSize(i),o=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return o>0?o:1}getDataTimestamps(){let t=this._cache.data||[],n,s;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,s=r.length;n<s;++n)t=t.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,s;if(t.length)return t;const r=this.getLabels();for(n=0,s=r.length;n<s;++n)t.push(n8(this,r[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return iX(t.sort(a8))}}function Jy(e,t,n){let s=0,r=e.length-1,i,l,o,c;n?(t>=e[s].pos&&t<=e[r].pos&&({lo:s,hi:r}=Gd(e,"pos",t)),{pos:i,time:o}=e[s],{pos:l,time:c}=e[r]):(t>=e[s].time&&t<=e[r].time&&({lo:s,hi:r}=Gd(e,"time",t)),{time:i,pos:o}=e[s],{time:l,pos:c}=e[r]);const d=l-i;return d?o+(c-o)*(t-i)/d:o}class b9e extends l8{static id="timeseries";static defaults=l8.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=Jy(n,this.min),this._tableRange=Jy(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:s}=this,r=[],i=[];let l,o,c,d,u;for(l=0,o=t.length;l<o;++l)d=t[l],d>=n&&d<=s&&r.push(d);if(r.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(l=0,o=r.length;l<o;++l)u=r[l+1],c=r[l-1],d=r[l],Math.round((u+c)/2)!==d&&i.push({time:d,pos:l/(o-1)});return i}_generate(){const t=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((r,i)=>r-i)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?t=this.normalize(n.concat(s)):t=n.length?n:s,t=this._cache.all=t,t}getDecimalForValue(t){return(Jy(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return Jy(this._table,s*this._tableRange+this._minPos,!0)}}const RX="label";function o8(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function ZFe(e,t){const n=e.options;n&&t&&Object.assign(n,t)}function zX(e,t){e.labels=t}function UX(e,t,n=RX){const s=[];e.datasets=t.map(r=>{const i=e.datasets.find(l=>l[n]===r[n]);return!i||!r.data||s.includes(i)?{...r}:(s.push(i),Object.assign(i,r),i)})}function JFe(e,t=RX){const n={labels:[],datasets:[]};return zX(n,e.labels),UX(n,e.datasets,t),n}function e8e(e,t){const{height:n=150,width:s=300,redraw:r=!1,datasetIdKey:i,type:l,data:o,options:c,plugins:d=[],fallbackContent:u,updateMode:f,...p}=e,x=h.useRef(null),v=h.useRef(null),w=()=>{x.current&&(v.current=new xj(x.current,{type:l,data:JFe(o,i),options:c&&{...c},plugins:d}),o8(t,v.current))},b=()=>{o8(t,null),v.current&&(v.current.destroy(),v.current=null)};return h.useEffect(()=>{!r&&v.current&&c&&ZFe(v.current,c)},[r,c]),h.useEffect(()=>{!r&&v.current&&zX(v.current.config.data,o.labels)},[r,o.labels]),h.useEffect(()=>{!r&&v.current&&o.datasets&&UX(v.current.config.data,o.datasets,i)},[r,o.datasets]),h.useEffect(()=>{v.current&&(r?(b(),setTimeout(w)):v.current.update(f))},[r,c,o.labels,o.datasets,f]),h.useEffect(()=>{v.current&&(b(),setTimeout(w))},[l]),h.useEffect(()=>(w(),()=>b()),[]),a.jsx("canvas",{ref:x,role:"img",height:n,width:s,...p,children:u})}const t8e=h.forwardRef(e8e);function FP(e,t){return xj.register(t),h.forwardRef((n,s)=>a.jsx(t8e,{...n,ref:s,type:e}))}const a8e=FP("line",WUe),n8e=FP("bar",BUe),s8e=FP("pie",VUe);xj.register(WFe,YFe,SFe,yFe,bFe,oFe,DFe,FFe,LFe);const FX=e=>a.jsx(La,{...e}),r8e=e=>a.jsx(Tf,{...e}),i8e=e=>a.jsx(Lp,{...e}),l8e=e=>a.jsx(xn,{...e}),BX=e=>a.jsx(ga,{...e}),o8e=e=>a.jsx(koe,{...e}),c8e=[{icon:FX,title:"Total Contacts",value:128,color:"text-blue-600",bgColor:"bg-blue-50"},{icon:BX,title:"Emails Sent",value:450,color:"text-purple-600",bgColor:"bg-purple-50"},{icon:i8e,title:"Active Campaigns",value:9,color:"text-green-600",bgColor:"bg-green-50"},{icon:r8e,title:"Revenue",value:125e3,color:"text-yellow-600",bgColor:"bg-yellow-50"}],d8e=[{name:"Emma Watty",company:"Tech Interaction Inc.",assignedBy:"Alice Smith",source:"Website",date:"Oct 10, 2:10 PM"},{name:"John Johnny",company:"Capital Business Co.",assignedBy:"Bob Johnson",source:"Referral",date:"Oct 9, 12:00 AM"},{name:"Annie Arnty",company:"Dynamic Systems Inc.",assignedBy:"Catherine Lee",source:"Trade Show",date:"Oct 8, 1:25 PM"},{name:"James Wilson",company:"Global Services LLC",assignedBy:"David Kim",source:"Cold Call",date:"Oct 7, 11:15 AM"}],u8e={labels:["Week 1","Week 2","Week 3","Week 4"],datasets:[{label:"Leads",data:[50,75,60,90],backgroundColor:"rgba(96, 165, 250, 0.6)",borderColor:"rgba(96, 165, 250, 1)",borderWidth:1},{label:"Conversions",data:[10,20,15,25],backgroundColor:"rgba(34, 197, 94, 0.6)",borderColor:"rgba(34, 197, 94, 1)",borderWidth:1}]},m8e={responsive:!0,plugins:{legend:{position:"top",labels:{color:"#374151"}},title:{display:!0,color:"#111827",font:{size:18}}}},f8e={labels:["Leads","Conversions"],datasets:[{label:"Leads Status",data:[75,25],backgroundColor:["rgba(96, 165, 250, 0.6)","rgba(34, 197, 94, 0.6)"],borderColor:["rgba(96, 165, 250, 1)","rgba(34, 197, 94, 1)"],borderWidth:1}]},h8e={responsive:!0,plugins:{legend:{position:"top",labels:{color:"#374151"}},title:{display:!0,color:"#111827",font:{size:18}}}},g8e=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},p8e=()=>{const e=[{icon:FX,label:"New Contact"},{icon:BX,label:"New Campaign"},{icon:l8e,label:"New Task"},{icon:o8e,label:"New Leads"}];return a.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 flex flex-col md:flex-row items-center space-y-3 md:space-y-0 md:space-x-4",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 py-2 flex-grow focus-within:ring-2 focus-within:ring-indigo-500 transition w-full md:max-w-3xl",children:[a.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search Contacts, Leads, or Campaigns...",className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"flex space-x-3 md:ml-auto",children:e.map((t,n)=>a.jsxs("div",{className:"relative group",children:[a.jsx("button",{className:"p-2 text-gray-500 hover:text-gray-900 transition rounded-full hover:bg-gray-100 focus:outline-none",children:a.jsx(t.icon,{size:20})}),a.jsx("span",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-1 bg-gray-800 text-white text-xs rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition",children:t.label})]},n))})]})},x8e=({icon:e,title:t,value:n,color:s,bgColor:r})=>a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-lg transition duration-300 hover:shadow-xl hover:ring-2 hover:ring-blue-500 cursor-pointer",onClick:()=>console.log(`Clicked metric card: ${t}`),children:[a.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:a.jsx(e,{size:22})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]}),y8e=({name:e,company:t,assignedBy:n,source:s,date:r})=>{const{text:i,bg:l}=g8e(s);return a.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 px-2 -mx-2 rounded-md",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:e}),a.jsx("p",{className:"text-xs text-gray-500",children:t}),n&&a.jsxs("p",{className:"text-xs text-gray-500",children:["Assigned by:"," ",a.jsx("span",{className:"font-semibold text-gray-700",children:n})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs text-gray-400",children:r}),a.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${i} ${l} px-2 py-0.5 rounded-full`,children:s})]})]})})},b8e=({title:e,children:t})=>a.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-md flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:e}),a.jsx("span",{className:"text-sm text-indigo-500 cursor-pointer hover:underline",children:"See All"})]}),t]}),v8e=({title:e,chartData:t,chartOptions:n})=>{const[s,r]=h.useState("bar"),i=s==="pie"?f8e:t,l=s==="pie"?h8e:n,o=s==="line"?a8e:s==="pie"?s8e:n8e,c=s==="pie"?250:300;return a.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md flex flex-col hover:shadow-lg transition",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:e}),a.jsxs("select",{value:s,onChange:d=>r(d.target.value),className:"border border-gray-300 rounded-md px-2 py-1 text-sm",children:[a.jsx("option",{value:"bar",children:"Bar"}),a.jsx("option",{value:"line",children:"Line"}),a.jsx("option",{value:"pie",children:"Pie"})]})]}),a.jsx("div",{className:"w-full flex justify-center",style:{height:c},children:a.jsx(o,{data:i,options:l})})]})};function w8e(){const{user:e}=ta();return h.useEffect(()=>{document.title="Dashboard | Sari-Sari CRM"},[]),a.jsx("div",{className:"min-h-screen pt-5 pb-10 font-sans",children:a.jsxs("main",{className:"max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"text-xl font-bold mb-4",children:["Welcome back, ",e?.name||"Marketing","! Heres your marketing overview."]}),a.jsx(p8e,{}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6",children:c8e.map(t=>a.jsx(x8e,{...t},t.title))}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[a.jsx(v8e,{title:"Leads & Conversions",chartData:u8e,chartOptions:m8e}),a.jsx(b8e,{title:"Latest Leads",children:d8e.map((t,n)=>a.jsx(y8e,{...t},n))})]})]})})}function N8e(){h.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[e,t]=h.useState(null),[n,s]=h.useState(""),[r,i]=h.useState("All Statuses"),l=h.useMemo(()=>[{company:"Acme Corporation",url:"https://acme.com",status:"CUSTOMER",industry:"Technology",territory:"North Region",phone_number:"+1-555-0100",billing_address:"123 Main St, North City",shipping_address:"456 Elm St, North City",created_by:"John Appleseed",created_date:"2024-01-10",last_updated:"2025-09-25 14:30"},{company:"Beta Solutions",url:"https://beta.com",status:"PROSPECT",industry:"Finance",territory:"South Region",phone_number:"+1-555-0200",billing_address:"789 Pine St, South City",shipping_address:"101 Maple St, South City",created_by:"Jane Doe",created_date:"2024-03-05",last_updated:"2025-10-01 10:15"},{company:"Gamma Partners",url:"https://gamma.com",status:"PARTNER",industry:"Retail",territory:"East Region",phone_number:"+1-555-0300",billing_address:"234 Oak St, East City",shipping_address:"345 Birch St, East City",created_by:"Alice Smith",created_date:"2023-12-20",last_updated:"2025-08-15 09:45"},{company:"Delta Corp",url:"https://delta.com",status:"INACTIVE",industry:"Logistics",territory:"West Region",phone_number:"+1-555-0400",billing_address:"987 Cedar St, West City",shipping_address:"654 Pine St, West City",created_by:"Bob Johnson",created_date:"2023-11-15",last_updated:"2025-06-12 11:20"}],[]),o=f=>t(f),c=()=>t(null),d=h.useMemo(()=>[{title:"Total Accounts",value:l.length,color:"text-yellow-600",bgColor:"bg-yellow-50",icon:La},{title:"Customers",value:l.filter(f=>f.status==="CUSTOMER").length,color:"text-green-600",bgColor:"bg-green-50",icon:gl},{title:"Prospects",value:l.filter(f=>f.status==="PROSPECT").length,color:"text-purple-600",bgColor:"bg-purple-50",icon:Ba},{title:"Partners",value:l.filter(f=>f.status==="PARTNER").length,color:"text-pink-600",bgColor:"bg-pink-50",icon:Zt},{title:"Active",value:l.filter(f=>f.status==="CUSTOMER"||f.status==="PARTNER").length,color:"text-blue-600",bgColor:"bg-blue-50",icon:gl},{title:"Inactive",value:l.filter(f=>f.status==="INACTIVE").length,color:"text-gray-600",bgColor:"bg-gray-50",icon:pl},{title:"Former",value:l.filter(f=>f.status==="FORMER").length,color:"text-orange-600",bgColor:"bg-orange-50",icon:pl}],[l]);if(e)return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("button",{onClick:c,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-4 sm:mb-6 cursor-pointer",children:[a.jsx(ju,{className:"mr-1 w-4 h-4 sm:w-5 sm:h-5"})," Back"]}),a.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:a.jsx("div",{children:a.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800 flex items-center gap-2",children:[e.company,a.jsx("span",{className:`inline-block text-xs px-2 py-0.5 rounded ${e.status==="CUSTOMER"?"bg-green-600 text-white":e.status==="PROSPECT"?"bg-purple-600 text-white":e.status==="PARTNER"?"bg-pink-600 text-white":"bg-gray-500 text-white"}`,children:e.status})]})})})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 sm:p-6 shadow-sm overflow-x-auto",children:[a.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4 text-gray-800",children:"Account Details"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm text-gray-700",children:[a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Website:"})," ",a.jsx("br",{}),a.jsx("a",{href:e.url,className:"text-blue-600 hover:underline break-words",children:e.url})]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Industry:"})," ",a.jsx("br",{}),e.industry]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Territory:"})," ",a.jsx("br",{}),e.territory]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Phone Number:"})," ",a.jsx("br",{}),e.phone_number]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Billing Address:"})," ",a.jsx("br",{}),e.billing_address]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Shipping Address:"})," ",a.jsx("br",{}),e.shipping_address]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Created By:"})," ",a.jsx("br",{}),e.created_by," on ",e.created_date]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Last Updated:"})," ",a.jsx("br",{}),e.last_updated]})]})]})]});const u=l.filter(f=>{const p=f.company.toLowerCase().includes(n.toLowerCase())||f.url.toLowerCase().includes(n.toLowerCase())||f.industry.toLowerCase().includes(n.toLowerCase())||f.territory.toLowerCase().includes(n.toLowerCase())||f.phone_number.toLowerCase().includes(n.toLowerCase()),x=r==="All Statuses"||r==="Active"&&(f.status==="CUSTOMER"||f.status==="PARTNER")||r==="Inactive"&&f.status==="INACTIVE"||r==="Former"&&f.status==="FORMER"||f.status.toLowerCase()===r.toLowerCase();return p&&x});return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-sans",children:[a.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(La,{className:"mr-2 text-blue-600"}),"Accounts List"]})}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 xl:grid-cols-4 md:grid-cols-4 gap-4 mb-6",children:d.map(f=>a.jsx(j8e,{...f},f.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search by company, website, industry, territory, or phone...",value:n,onChange:f=>s(f.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:r,onChange:f=>i(f.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"All Statuses"}),a.jsx("option",{children:"Customer"}),a.jsx("option",{children:"Prospect"}),a.jsx("option",{children:"Partner"}),a.jsx("option",{children:"Active"}),a.jsx("option",{children:"Inactive"}),a.jsx("option",{children:"Former"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Company"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4",children:"Industry"}),a.jsx("th",{className:"py-3 px-4",children:"Territory"}),a.jsx("th",{className:"py-3 px-4",children:"Phone"})]})}),a.jsxs("tbody",{children:[u.map((f,p)=>a.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>o(f),children:[a.jsx("td",{className:"py-3 px-4 break-words",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-words",children:f.company}),a.jsx("div",{className:"text-gray-500 text-xs break-words",children:f.url})]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${f.status==="CUSTOMER"?"bg-green-100 text-green-700":f.status==="PROSPECT"?"bg-purple-100 text-purple-700":f.status==="PARTNER"?"bg-pink-100 text-pink-700":f.status==="INACTIVE"?"bg-gray-100 text-gray-700":"bg-orange-100 text-orange-700"}`,children:f.status})}),a.jsx("td",{className:"py-3 px-4 break-words",children:f.industry}),a.jsx("td",{className:"py-3 px-4 break-words",children:f.territory}),a.jsxs("td",{className:"py-3 px-4 flex items-center space-x-2 break-words",children:[a.jsx(Et,{className:"text-gray-500"}),a.jsx("span",{children:f.phone_number})]})]},p)),u.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"py-4 text-center text-gray-500",children:"No accounts match your search/filter."})})]})]})})]})}const j8e=({icon:e,title:t,value:n,color:s,bgColor:r})=>a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md hover:shadow-lg hover:ring-2 hover:ring-blue-500 cursor-pointer transition-all duration-300",onClick:()=>console.log(`Clicked: ${t}`),children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:a.jsx(e,{size:22})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]});function C8e(){h.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[e,t]=h.useState(!1),[n,s]=h.useState(null),[r,i]=h.useState(!1),[l,o]=h.useState(""),[c,d]=h.useState("All Contacts"),[u,f]=h.useState([{id:1,name:"John Smith",title:"Marketing Director",account:"Acme Corporation",email:"john.smith@acme.com",phone1:"+1-555-0101",phone2:"+1-555-0102",department:"Marketing",assigned:"Jane Sales",created:"1/10/2024",mobile:"09217229846",workPhone:"(555) 123-4567",createdBy:"John Appleseed",lastUpdated:"2025-09-21 15:30",notes:"Key marketing partner for Q4 campaigns."}]),[p,x]=h.useState({id:null,name:"",email:"",workPhone:"",title:"",department:"",phone1:"",phone2:"",account:"",assigned:"",notes:""}),v=k=>{k.target.id==="modalBackdrop"&&t(!1)},w=k=>{s(k)},b=()=>{s(null)},C=()=>{i(!1),x({id:null,name:"",email:"",workPhone:"",title:"",department:"",phone1:"",phone2:"",account:"",assigned:"",notes:""}),t(!0)},N=(k,_)=>{_.stopPropagation(),i(!0),x(k),t(!0)},S=k=>{const{name:_,value:T}=k.target;x(E=>({...E,[_]:T}))},A=k=>{if(k.preventDefault(),r)f(_=>_.map(T=>T.id===p.id?{...p}:T));else{const _={...p,id:Date.now(),created:new Date().toLocaleDateString(),createdBy:"Admin User"};f(T=>[...T,_])}t(!1)};return n?a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[a.jsxs("button",{onClick:b,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-4 sm:mb-6 cursor-pointer",children:[a.jsx(ju,{className:"mr-1 w-4 h-4 sm:w-5 sm:h-5"})," Back"]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:n.account}),a.jsx("span",{className:"mt-1 sm:mt-0 bg-blue-600 text-white text-xs sm:text-sm px-2 py-0.5 rounded w-fit",children:"Active"})]}),a.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0 mt-3 sm:mt-0",children:a.jsxs("button",{className:"w-full sm:w-auto bg-gray-800 text-white px-5 py-2 rounded-md hover:bg-gray-900 transition flex items-center gap-2",children:[a.jsx(To,{}),"Export"]})})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 sm:p-6 w-full max-w-full lg:max-w-6xl shadow-sm overflow-x-auto mx-auto",children:[a.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4 text-gray-800",children:"Contact Details"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 text-sm text-gray-700",children:[a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Primary Contact:"})," ",a.jsx("br",{}),n.name]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Email:"})," ",a.jsx("br",{}),n.email]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Created By:"})," ",a.jsx("br",{}),n.createdBy," on ",n.created]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Title:"})," ",a.jsx("br",{}),n.title]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Assigned To:"})," ",a.jsx("br",{}),n.assigned]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Work Phone:"})," ",a.jsx("br",{}),n.workPhone]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Account:"})," ",a.jsx("br",{}),n.account]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Mobile Phone:"})," ",a.jsx("br",{}),n.phone1]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Last Updated:"})," ",a.jsx("br",{}),n.lastUpdated]})]}),a.jsxs("div",{className:"mt-6 border-gray-200 pt-4",children:[a.jsx("h3",{className:"text-md sm:text-lg font-semibold text-gray-800 mb-2",children:"Notes"}),a.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:n.notes?n.notes:"No additional notes were provided for this contact."})]})]})]}):a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(La,{className:"mr-2 text-blue-600"})," Contacts Management"]}),a.jsx("button",{onClick:C,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base transition",children:" Add Contact"})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search Contacts...",value:l,onChange:k=>o(k.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:c,onChange:k=>d(k.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"All Contacts"}),a.jsx("option",{children:"Option 1"}),a.jsx("option",{children:"Option 2"}),a.jsx("option",{children:"Option 3"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-[600px] w-full border border-gray-200 rounded-lg bg-white shadow-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-sm text-gray-600",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Contact Info"}),a.jsx("th",{className:"py-3 px-4",children:"Department"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Created"}),a.jsx("th",{className:"py-3 px-4 text-center",children:"Actions"})]})}),a.jsx("tbody",{className:"text-xs text-gray-700",children:u.map((k,_)=>a.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>w(k),children:[a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all",children:k.name}),a.jsx("div",{className:"text-xs text-gray-500",children:k.title})]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ix,{className:"text-gray-500"}),a.jsx("span",{children:k.account})]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ka,{className:"text-gray-500"}),a.jsx("span",{children:k.email})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Et,{className:"text-gray-500"}),a.jsx("span",{children:k.phone1})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Et,{className:"text-gray-500"}),a.jsx("span",{children:k.phone2})]})]})}),a.jsx("td",{className:"py-3 px-4",children:k.department}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Zt,{className:"text-gray-500"}),a.jsx("span",{children:k.assigned})]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(_t,{className:"text-gray-500"}),a.jsx("span",{children:k.created})]})}),a.jsx("td",{className:"py-3 px-4 text-center",children:a.jsx("div",{className:"flex justify-center",children:a.jsx("button",{onClick:T=>N(k,T),className:"text-blue-500 hover:text-blue-700",children:a.jsx(nn,{})})})})]},_))})]})}),e&&a.jsx("div",{id:"modalBackdrop",onClick:v,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh]",onClick:k=>k.stopPropagation(),children:[a.jsx("button",{onClick:()=>t(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(Vt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 text-center",children:r?"Edit Contact":"Add New Contact"}),a.jsxs("form",{onSubmit:A,className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Name"}),a.jsx("input",{type:"text",name:"name",value:p.name,onChange:S,placeholder:"Full name",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Email"}),a.jsx("input",{type:"email",name:"email",value:p.email,onChange:S,placeholder:"example@email.com",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),a.jsx("input",{type:"text",name:"workPhone",value:p.workPhone,onChange:S,placeholder:"09 --- --- ---",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Title"}),a.jsx("input",{type:"text",name:"title",value:p.title,onChange:S,placeholder:"Job title",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),a.jsx("input",{type:"text",name:"department",value:p.department,onChange:S,placeholder:"Marketing / Sales",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Phone Number 1"}),a.jsx("input",{type:"text",name:"phone1",value:p.phone1,onChange:S,placeholder:"09 --- --- ---",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Account"}),a.jsx("input",{type:"text",name:"account",value:p.account,onChange:S,placeholder:"Company name",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Assign To"}),a.jsxs("select",{name:"assigned",value:p.assigned,onChange:S,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",children:[a.jsx("option",{value:"",children:"Assign To"}),a.jsx("option",{value:"Smith",children:"Smith"}),a.jsx("option",{value:"Doe",children:"Doe"}),a.jsx("option",{value:"Jane Sales",children:"Jane Sales"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Phone Number 2"}),a.jsx("input",{type:"text",name:"phone2",value:p.phone2,onChange:S,placeholder:"09 --- --- ---",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),a.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 md:col-span-3",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),a.jsx("textarea",{name:"notes",value:p.notes,onChange:S,placeholder:"Additional details...",rows:3,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 md:col-span-3",children:[a.jsx("button",{type:"button",onClick:()=>t(!1),className:"px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 text-white bg-blue-600 border border-blue-500 rounded hover:bg-blue-700 transition",children:"Save Contact"})]})]})]})})]})}const eb={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},Gn=({label:e,value:t,name:n,className:s=""})=>a.jsxs("div",{className:`flex flex-col ${s}`,children:[a.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),a.jsx("input",{type:"text",name:n,defaultValue:t,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),S8e=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(Gn,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),a.jsx(Gn,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),a.jsx(Gn,{label:"Industry",name:"industry",value:e.industry})]}),a.jsx(Gn,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),a.jsx(Gn,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),_8e=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(Gn,{label:"First Name",name:"firstName",value:e.firstName}),a.jsx(Gn,{label:"Last Name",name:"lastName",value:e.lastName}),a.jsx(Gn,{label:"Department",name:"department",value:e.department}),a.jsx(Gn,{label:"Title",name:"title",value:e.title}),a.jsx(Gn,{label:"Work Phone",name:"workPhone",value:e.workPhone}),a.jsx(Gn,{label:"Email",name:"email",value:e.email}),a.jsx(Gn,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),a.jsx(Gn,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),A8e=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(Gn,{label:"Deal Name",name:"dealName",value:e.dealName}),a.jsxs("div",{className:"flex",children:[a.jsx(Gn,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),a.jsx("div",{className:"flex flex-col justify-end ml-1",children:a.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),a.jsx(Gn,{label:"Stage",name:"stage",value:e.stage}),a.jsx(Gn,{label:"Territory",name:"territory",value:e.territory})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(Gn,{label:"Description",name:"description",value:e.description}),a.jsx(Gn,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function HX({isOpen:e,onClose:t}){const[n,s]=h.useState(1),r=3;if(!e)return null;const i=()=>{n<r?s(n+1):(t(),s(1))},l=()=>{n>1&&s(n-1)},o=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],c=()=>{switch(n){case 1:return a.jsx(S8e,{data:eb});case 2:return a.jsx(_8e,{data:eb});case 3:return a.jsx(A8e,{data:eb});default:return null}};return a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:eb.accountName})]}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:a.jsx(hN,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:o.map(d=>a.jsx("button",{onClick:()=>s(d.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${n===d.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:d.name},d.id))}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c()}),a.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[n>1&&a.jsx("button",{onClick:l,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),n<r?a.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):a.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}const E8e={name:"Josh Vergara",status:"New",company:"Josh Inc.",title:"CEO",department:"Administration",email:"josh@joshinc.com",territory:"Cavite",assignedTo:"Admin",createdBy:"Admin",workPhone:"09253677323",phone1:"09253677323",phone2:"0907452874",source:"Website",addressLine1:"#1 Pilar Las Pinas",addressLine2:"Suite 400",city:"Las Pinas",state:"Metro Manila",zipCode:"1740",notes:"Interested in our premium plan."};function GX({lead:e=E8e,onBack:t}){const[n,s]=h.useState(!1);return e?a.jsxs("div",{className:"p-4 sm:p-6 md:p-8 font-inter min-h-screen",children:[a.jsxs("button",{onClick:t,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-4 sm:mb-6 cursor-pointer",children:[a.jsx(ju,{className:"mr-1 w-4 h-4 sm:w-5 sm:h-5"})," Back"]}),a.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-6 sm:mb-8 gap-2 sm:gap-4",children:a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold",children:e.name}),a.jsx("span",{className:"bg-blue-100 text-blue-700 text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full",children:e.status}),a.jsx("div",{className:"flex flex-wrap items-center ml-0 sm:ml-1",children:a.jsx("button",{onClick:()=>s(!0),className:"bg-green-600 hover:bg-green-700 text-white px-3 sm:px-5 py-1.5 sm:py-2 rounded-lg font-medium text-xs sm:text-sm",children:"Convert"})})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200 mb-6 sm:mb-8",children:[a.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-4 sm:mb-6",children:"Lead Details"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Name:"}),a.jsx("p",{children:e.name})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Company:"}),a.jsx("p",{children:e.company})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Title:"}),a.jsx("p",{children:e.title})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Department:"}),a.jsx("p",{children:e.department})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:e.email})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Territory:"}),a.jsx("p",{children:e.territory})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assign To:"}),a.jsx("p",{children:e.assignedTo})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:e.createdBy})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Work Phone:"}),a.jsx("p",{children:e.workPhone})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),a.jsx("p",{children:e.phone1})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),a.jsx("p",{children:e.phone2})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Source:"}),a.jsx("p",{children:e.source})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[a.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200",children:[a.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Address:"}),a.jsxs("p",{className:"text-sm text-gray-700 leading-relaxed",children:[e.addressLine1," ",a.jsx("br",{}),e.addressLine2," ",a.jsx("br",{}),e.city,", ",e.state," ",e.zipCode]})]}),a.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200",children:[a.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),a.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:e.notes||"No notes available."})]})]}),a.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200",children:[a.jsx("h3",{className:"font-semibold text-gray-800 mb-4 sm:mb-6",children:"Related Activities"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 sm:gap-8 text-sm",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-2",children:"Tasks (2)"}),a.jsxs("div",{className:"space-y-1 text-gray-700",children:[a.jsx("p",{children:"Schedule follow-up call"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Due: 2025-09-15 | In Progress"}),a.jsx("p",{children:"Schedule follow-up call"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Due: 2025-09-18 | In Progress"})]}),a.jsx("a",{href:"#",className:"text-blue-600 hover:underline text-xs font-medium mt-2 inline-block",children:"View All Tasks"})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-2",children:"Calls (2)"}),a.jsxs("div",{className:"space-y-1 text-gray-700",children:[a.jsx("p",{children:"Initial discovery call"}),a.jsx("p",{className:"text-xs text-gray-500",children:"2025-09-10 | Completed"}),a.jsx("p",{children:"Initial discovery call"}),a.jsx("p",{className:"text-xs text-gray-500",children:"2025-09-11 | Completed"})]}),a.jsx("a",{href:"#",className:"text-blue-600 hover:underline text-xs font-medium mt-2 inline-block",children:"View All Calls"})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-2",children:"Meeting (0)"}),a.jsx("p",{className:"text-gray-500",children:"No meetings associated."}),a.jsx("a",{href:"#",className:"text-blue-600 hover:underline text-xs font-medium mt-2 inline-block",children:"View All Meetings"})]})]})]}),a.jsx(HX,{isOpen:n,onClose:()=>s(!1)})]}):null}const T8e=Lf.all(),sA=T8e.map(e=>({code:`+${e.countryCallingCode}`,name:e.countryCode}));function k8e(){const[e,t]=h.useState(null),[n,s]=h.useState(!1),[r,i]=h.useState(null),[l,o]=h.useState([{id:1,first_name:"Jane",last_name:"Doe"},{id:2,first_name:"John",last_name:"Smith"},{id:3,first_name:"Mary",last_name:"Johnson"}]),[c,d]=h.useState([{id:1,name:"Joshua Vergara",status:"Qualified",title:"Marketing Director",email:"sarah.williams@innovateco.com",phone1:"9271229484",phone2:"---------",workPhone:"999123-4567",work_ccode:"+63",m1_ccode:"+63",m2_ccode:"+63",territory:"East Coast",department:"Marketing",company:"Innovate Co.",createdBy:"John Appleseed",createdAt:"2025-09-10 09:30",lastUpdated:"2025-09-12 14:45",source:"Website",assignedTo:"Jane Doe",address:"123 Main St, City, Country",notes:"Important client"}]),[u,f]=h.useState({work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:""});h.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const p=T=>t(T),x=()=>t(null),[v,w]=h.useState(""),[b,C]=h.useState("All Accounts"),N=()=>{s(!1),i(null),f({work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:""})},S=T=>{i(T),s(!0),f({work_ccode:T.work_ccode||"+63",work_phone:T.workPhone||"",m1_ccode:T.m1_ccode||"+63",mobile_phone_1:T.phone1||"",m2_ccode:T.m2_ccode||"+63",mobile_phone_2:T.phone2||""})},A=T=>{window.confirm("Are you sure you want to delete this lead?")&&d(c.filter(E=>E.id!==T))},k=T=>{const{name:E,value:I}=T.target;f(z=>({...z,[E]:I}))},_=T=>{T.preventDefault();const E=new FormData(T.target),I=Object.fromEntries(E.entries());I.name=`${I.firstName} ${I.lastName}`,I.assignedTo=l.find(z=>z.id.toString()===I.assignedTo)?.first_name+" "+l.find(z=>z.id.toString()===I.assignedTo)?.last_name,I.work_ccode=u.work_ccode,I.workPhone=u.work_phone,I.m1_ccode=u.m1_ccode,I.phone1=u.mobile_phone_1,I.m2_ccode=u.m2_ccode,I.phone2=u.mobile_phone_2,d(r?c.map(z=>z.id===r.id?{...z,...I}:z):[...c,{...I,id:c.length+1,createdAt:new Date().toISOString(),lastUpdated:new Date().toISOString()}]),N()};return e?a.jsx(GX,{lead:e,onBack:x}):a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-6 gap-3",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(Ba,{className:"mr-2 text-blue-600"})," Leads"]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full sm:w-auto",children:[a.jsxs("button",{className:"flex items-center justify-center border border-tertiary text-tertiary px-4 py-2 gap-2 rounded-md hover:bg-gray-800 hover:text-white transition w-full sm:w-auto",children:[a.jsx(To,{})," Download"]}),a.jsx("button",{onClick:()=>s(!0),className:"flex items-center justify-center bg-black text-white px-4 py-2 rounded-md hover:bg-gray-800 transition w-full sm:w-auto",children:" Add Leads"})]})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search Leads...",value:v,onChange:T=>w(T.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:b,onChange:T=>C(T.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"All Leads"}),a.jsx("option",{children:"New"}),a.jsx("option",{children:"Contacted"}),a.jsx("option",{children:"Qualified"}),a.jsx("option",{children:"Converted"}),a.jsx("option",{children:"Lost"})]})})]}),a.jsxs("div",{className:"bg-white shadow-sm overflow-x-auto rounded-md border border-gray-200",children:[a.jsxs("div",{className:"grid grid-cols-9 min-w-[800px] bg-gray-100 font-bold text-gray-600 text-sm px-4 py-3",children:[a.jsx("div",{children:"Name"}),a.jsx("div",{children:"Account"}),a.jsx("div",{children:"Title"}),a.jsx("div",{children:"Department"}),a.jsx("div",{children:"Email"}),a.jsx("div",{children:"Work Phone"}),a.jsx("div",{children:"Assigned To"}),a.jsx("div",{children:"Updated"}),a.jsx("div",{className:"text-center",children:"Actions"})]}),c.map(T=>a.jsxs("div",{className:"grid grid-cols-9 min-w-[800px] px-4 py-3 text-xs hover:bg-gray-100 transition cursor-pointer gap-x-4",onClick:()=>p(T),children:[a.jsx("div",{className:"truncate",children:T.name}),a.jsx("div",{className:"truncate",children:T.company}),a.jsx("div",{className:"truncate",children:T.title}),a.jsx("div",{className:"truncate",children:T.department}),a.jsx("div",{className:"truncate",children:T.email}),a.jsxs("div",{className:"truncate",children:[T.work_ccode," ",T.workPhone]}),a.jsx("div",{className:"truncate",children:T.assignedTo}),a.jsx("div",{className:"truncate",children:T.lastUpdated}),a.jsxs("div",{className:"flex justify-center space-x-2",children:[a.jsx("button",{className:"text-blue-500 hover:text-blue-700",onClick:E=>{E.stopPropagation(),S(T)},children:a.jsx(nn,{})}),a.jsx("button",{className:"text-red-500 hover:text-red-700",onClick:E=>{E.stopPropagation(),A(T.id)},children:a.jsx(Wt,{})})]})]},T.id))]}),n&&a.jsx("div",{id:"modalBackdrop",onClick:N,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-3xl rounded-xl shadow-lg p-5 sm:p-6 relative border border-gray-200 my-6 max-h-[90vh] overflow-y-auto",onClick:T=>T.stopPropagation(),children:[a.jsx("button",{onClick:N,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:a.jsx(Vt,{size:20})}),a.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:r?"Edit Lead":"Add New Lead"}),a.jsxs("form",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 text-xs sm:text-sm",onSubmit:_,children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"First Name"}),a.jsx("input",{name:"firstName",type:"text",placeholder:"Joe",defaultValue:r?r.name.split(" ")[0]:"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",required:!0})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Last Name"}),a.jsx("input",{name:"lastName",type:"text",placeholder:"Smith",defaultValue:r?r.name.split(" ")[1]:"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",required:!0})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Company"}),a.jsx("input",{name:"company",type:"text",placeholder:"ABC Company",defaultValue:r?.company||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Title"}),a.jsx("input",{name:"title",type:"text",placeholder:"ABC Agenda",defaultValue:r?.title||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Department"}),a.jsx("input",{name:"department",type:"text",placeholder:"Sales",defaultValue:r?.department||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Email"}),a.jsx("input",{name:"email",type:"text",placeholder:"abc@gmail.com",defaultValue:r?.email||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Work Phone"}),a.jsxs("div",{className:"border border-gray-300 rounded-md flex flex-row w-full gap-1",children:[a.jsx("select",{name:"work_ccode",value:u.work_ccode,onChange:k,className:"outline-none cursor-pointer py-2 border-r border-gray-400 w-15",children:sA.map(T=>a.jsx("option",{value:T.code,children:T.code},T.code))}),a.jsx("input",{type:"text",name:"work_phone",placeholder:"9----------",value:u.work_phone,onChange:k,className:"w-full outline-none"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Mobile Phone 1"}),a.jsxs("div",{className:"border border-gray-300 rounded-md flex flex-row w-full gap-1",children:[a.jsx("select",{name:"m1_ccode",value:u.m1_ccode,onChange:k,className:"outline-none cursor-pointer py-2 border-r border-gray-400 w-15",children:sA.map(T=>a.jsx("option",{value:T.code,children:T.code},T.code))}),a.jsx("input",{type:"text",name:"mobile_phone_1",placeholder:"9----------",value:u.mobile_phone_1,onChange:k,className:"w-full outline-none"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Mobile Phone 2"}),a.jsxs("div",{className:"border border-gray-300 rounded-md flex flex-row w-full gap-1",children:[a.jsx("select",{name:"m2_ccode",value:u.m2_ccode,onChange:k,className:"outline-none cursor-pointer py-2 border-r border-gray-400 w-15",children:sA.map(T=>a.jsx("option",{value:T.code,children:T.code},T.code))}),a.jsx("input",{type:"text",name:"mobile_phone_2",placeholder:"9----------",value:u.mobile_phone_2,onChange:k,className:"w-full outline-none"})]})]}),a.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Address"}),a.jsx("input",{name:"address",type:"text",placeholder:"Street No., Street Name, City, State/Province, Postal Code",defaultValue:r?.address||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Assign To"}),a.jsxs("select",{name:"assignedTo",defaultValue:l.find(T=>`${T.first_name} ${T.last_name}`===r?.assignedTo)?.id||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",children:[a.jsx("option",{value:"",disabled:!0,children:"Select user"}),l.map(T=>a.jsxs("option",{value:T.id,children:[T.first_name," ",T.last_name]},T.id))]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Territory"}),a.jsx("input",{type:"text",disabled:!0,name:"territory_id",placeholder:"Assign a user",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Source"}),a.jsxs("select",{className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:r?.source||"",name:"source",children:[a.jsx("option",{value:"",disabled:!0,children:"Select Source"}),a.jsx("option",{value:"Website",children:"Website"}),a.jsx("option",{value:"Referral",children:"Referral"}),a.jsx("option",{value:"Cold call",children:"Cold call"}),a.jsx("option",{value:"Event",children:"Event"}),a.jsx("option",{value:"Other",children:"Other"})]})]}),a.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Notes"}),a.jsx("textarea",{name:"notes",placeholder:"Additional details...",rows:3,defaultValue:r?.notes||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-2 col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("button",{type:"button",onClick:N,className:"px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition",children:r?"Update Lead":"Save Lead"})]})]})]})})]})}const c8=["To Do","In Progress","Review","Completed"],cg=10,L8e=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const n=t.getTimezoneOffset();return new Date(t.getTime()-n*60*1e3).toISOString().slice(0,16)},d8=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},P8e=e=>{const t=e.subject?.trim()??"",n=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),e.status&&String(e.status).toUpperCase();let r=null,i=null,l=null,o=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2&&(o=Number(e.relatedTo2)));const c=e.assignedTo?Number(e.assignedTo):null,d=l||o||i||r,u=l?"Contact":o?"Deal":i?"Account":r?"Lead":null;return{title:t,description:n,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:c,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:l,deal_id:o,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:d,related_type:u}},D8e=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",n=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",l=()=>e.lead?.id||e.lead_id,o=()=>e.account?.id||e.account_id,c=()=>e.contact?.id||e.contact_id,d=()=>e.deal?.id||e.deal_id,u=()=>e.task_assign_to?.id||e.assigned_to,f=()=>e.lead?.title||e.lead_id,p=()=>e.account?.name||e.account_id,x=()=>i||e.contact_id,v=()=>e.deal?.name||e.deal_id;let w="Lead",b="",C="",N="",S="Lead",A="",k="",_="";const T=o(),E=p(),I=l(),z=f();if(T){w="Account",S="Account",A=E,b=String(T);const $=c(),P=d(),O=x(),B=v();$?(C="Contact",k="Contact",_=O,N=String($)):P&&(k="Deal",C="Deal",_=B,N=String(P))}else I?(S="Lead",A=z,w="Lead",b=String(I)):e.related_type==="Account"&&(w="Account",b=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:e.status||"Not started",dueDate:s,dateAssigned:r,assignedToId:u()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:n,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:S,relatedTo1Text:A,relatedType2Text:k,relatedTo2Text:_,subject:e.title,relatedType1:w,relatedTo1:b,relatedType2:C,relatedTo2:N}};function O8e(){h.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=ta(),[n,s]=h.useState("board"),[r,i]=h.useState(!1),[l,o]=h.useState(null),[c,d]=h.useState(!1),[u,f]=h.useState([]),[p,x]=h.useState(!0),[v,w]=h.useState(""),[b,C]=h.useState("Filter by Status"),[N,S]=h.useState("Filter by Priority"),[A,k]=h.useState([]),[_,T]=h.useState(1),[E,I]=h.useState(null),[z,$]=h.useState(!1),P=vt(),O=Yt(),[B,Q]=h.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""});h.useEffect(()=>{const we=O.state?.openTaskModal,ne=O.state?.initialTaskData;we&&(i(!0),ne&&Q(Le=>({...Le,...ne})),P(O.pathname,{replace:!0,state:{}}))},[O,P]);const F=async()=>{try{const we=await ie.get("/users/all");k(Array.isArray(we.data)?we.data:[])}catch(we){console.error("Failed to fetch users:",we),H.error("Failed to fetch users.")}},ee=async()=>{try{x(!0);const we=await ie.get("/tasks/all"),Le=(Array.isArray(we.data)?we.data:[]).map(D8e);Le.sort((pe,le)=>{const ge=pe.createdAt?new Date(pe.createdAt):0;return(le.createdAt?new Date(le.createdAt):0)-ge}),console.log("Fetched Tasks:",Le),f(Le),n==="list"&&T(1)}catch(we){console.error("Failed to load tasks:",we),H.error("Failed to load tasks.")}finally{x(!1)}};h.useEffect(()=>{!t&&e&&(F(),ee())},[t,e]);const V=()=>{o(null),Q({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},de=(we=null,ne=!1)=>{o(we),d(ne),we?Q({id:we.id,subject:we.title||"",description:we.description||"",priority:we.priority||"Normal",status:we.status||"Not started",dueDate:L8e(we.dueDate),assignedTo:we.assignedToId?String(we.assignedToId):"",notes:we.notes||"",relatedType1Text:we.relatedType1Text||"",relatedTo1Text:we.relatedTo1Text||"",relatedType2Text:we.relatedType2Text||"",relatedTo2Text:we.relatedTo2Text||"",relatedType1:we.relatedType1||"",relatedTo1:we.relatedTo1||"",relatedType2:we.relatedType2||"",relatedTo2:we.relatedTo2||""}):V(),i(!0)},oe=()=>{i(!1),o(null),d(!1),V()},Z=async we=>{const ne=P8e(we);try{l&&!c?(await ie.put(`/tasks/${l.id}`,ne),H.success("Task updated successfully.")):(await ie.post("/tasks/create",ne),H.success("Task created successfully.")),i(!1),await ee()}catch(Le){console.error("Failed to save task:",Le);const pe=Le.response?.data?.detail||"Failed to save task.";H.error(pe)}},R=we=>{we&&I({title:"Delete Task",message:a.jsxs(a.Fragment,{children:["Are you sure you want to delete ",a.jsx("span",{className:"font-semibold",children:we.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:we.id}})},ve=async()=>{if(!E?.action){I(null);return}const{action:we}=E;$(!0);try{we.type==="delete"&&(await ie.delete(`/tasks/${we.targetId}`),H.success("Task deleted successfully."),await ee())}catch(ne){console.error("Task action failed:",ne),H.error("Failed to delete task.")}finally{$(!1),I(null)}},X=()=>{z||I(null)},je=h.useMemo(()=>{const we=v.trim().toLowerCase();return[...u].sort((Le,pe)=>{const le=Le.createdAt?new Date(Le.createdAt):0;return(pe.createdAt?new Date(pe.createdAt):0)-le}).filter(Le=>{const pe=we===""||Le.title?.toLowerCase().includes(we)||Le.description?.toLowerCase().includes(we)||Le.assignedToName?.toLowerCase().includes(we)||Le.createdBy?.toLowerCase().includes(we),le=b==="Filter by Status"||Le.status===b,ge=N==="Filter by Priority"||Le.priority===N;return pe&&le&&ge})},[u,v,b,N]);h.useEffect(()=>{T(1)},[v,b,N,n]),h.useEffect(()=>{if(n==="list"){const we=je.length===0?1:Math.ceil(je.length/cg);_>we&&T(we)}},[je.length,_,n]);const Ne=h.useMemo(()=>{if(n==="board")return je;const we=(_-1)*cg;return je.slice(we,we+cg)},[je,_,n]),Oe=h.useMemo(()=>{const we=new Date;return[{title:"To Do",value:u.filter(ne=>ne.status==="Not started").length,icon:Is,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:u.filter(ne=>ne.status==="In progress").length,icon:hl,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:u.filter(ne=>ne.status==="Completed").length,icon:xn,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:u.filter(ne=>ne.dueDate&&new Date(ne.dueDate)<we&&ne.status!=="Completed").length,icon:Ef,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:u.filter(ne=>ne.priority==="High").length,icon:ko,color:"text-orange-600",bgColor:"bg-orange-100"}]},[u]),Fe=we=>we.dueDate&&new Date(we.dueDate)<new Date&&we.status!=="Completed",me=we=>{switch(we.status){case"To Do":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In Progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Review":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},Be=we=>{switch(we){case"To Do":return"bg-blue-100 text-blue-700";case"In Progress":return"bg-purple-100 text-purple-700";case"Review":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},Pe=we=>{switch(we){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&a.jsx(zt,{message:"Loading tasks..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(hl,{className:"text-blue-600"})," Tasks Board"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{type:"button",onClick:()=>de(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[a.jsx(da,{})," Create Task"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Oe.map(we=>a.jsx(M8e,{...we},we.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search tasks",value:v,onChange:we=>w(we.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[a.jsxs("select",{value:b,onChange:we=>C(we.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"Filter by Status"}),c8.map(we=>a.jsx("option",{children:we},we))]}),a.jsxs("select",{value:N,onChange:we=>S(we.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"Filter by Priority"}),a.jsx("option",{children:"High"}),a.jsx("option",{children:"Normal"}),a.jsx("option",{children:"Low"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${n==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),a.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${n==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&je.length===0&&a.jsx("p",{className:"text-center text-gray-500 mt-10 p-4 bg-white shadow rounded-lg",children:"No tasks found matching current filters."}),!p&&!t&&je.length>0&&n==="board"&&a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:c8.map(we=>{const ne=Ne.filter(Le=>Le.status===we);return a.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),a.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:we}),a.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:ne.length})]}),a.jsx("div",{className:`space-y-3 ${ne.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:ne.length>0?ne.map(Le=>a.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${me(Le)}`,onClick:()=>de(Le,!0),children:[a.jsxs("div",{className:"text-left flex-1",children:[a.jsx("p",{className:"font-medium text-gray-800 text-sm",children:Le.title}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",Le.priority]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",Le.assignedToName]}),a.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",a.jsx("span",{className:Fe(Le)?"text-red-600":"text-gray-600",children:Le.dateAssigned?d8(Le.dateAssigned):""})]})]}),a.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[a.jsx("button",{type:"button",onClick:pe=>{pe.stopPropagation(),de(Le)},className:"text-blue-500 hover:text-blue-700",children:a.jsx(rn,{})}),a.jsx("button",{type:"button",onClick:pe=>{pe.stopPropagation(),R(Le)},className:"text-red-500 hover:text-red-700",children:a.jsx(Wt,{})})]})]},Le.id)):a.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No tasks"})})]},we)})}),!p&&!t&&je.length>0&&n==="list"&&a.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Actions"})]})}),a.jsx("tbody",{children:Ne.map(we=>a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",onClick:()=>{console.log("Opening task in view mode:",we),de(we,!0)},children:[a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",children:we.title}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Be(we.status||"To Do")}`,children:we.status||"To Do"})}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Pe(we.priority||"Low")}`,children:we.priority||"Low"})}),a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:we.assignedToName||"Unassigned"}),a.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${Fe(we)?"text-red-600 font-medium":""}`,children:we.dateAssigned?d8(we.dateAssigned):""}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-3",onClick:ne=>ne.stopPropagation(),children:[a.jsxs("button",{type:"button",onClick:()=>de(we),className:"text-blue-500 hover:text-blue-700 flex items-center gap-1",children:[a.jsx(rn,{})," Edit"]}),a.jsxs("button",{type:"button",onClick:()=>R(we),className:"text-red-500 hover:text-red-700 flex items-center gap-1",children:[a.jsx(Wt,{})," Delete"]})]})})]},we.id))})]})})}),!p&&!t&&n==="list"&&a.jsx(Jt,{className:"mt-6",totalItems:je.length,pageSize:cg,currentPage:je.length===0?0:_,onPrev:()=>T(we=>Math.max(we-1,1)),onNext:()=>T(we=>Math.min(we+1,Math.max(1,Math.ceil(je.length/cg)||1))),label:"tasks"}),a.jsx(Ox,{isOpen:r,onClose:oe,onSave:Z,onEdit:()=>d(!1),setFormData:Q,formData:B,isEditing:!c&&!!l,viewMode:c,users:A,currentUser:e,onDelete:R}),E&&a.jsx(I8e,{open:!0,title:E.title,message:E.message,confirmLabel:E.confirmLabel,cancelLabel:E.cancelLabel,variant:E.variant,onConfirm:ve,onCancel:X,loading:z})]})}function M8e({icon:e,title:t,value:n,color:s,bgColor:r,onClick:i}){return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function I8e({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r,variant:i,loading:l,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}function $8e(){h.useEffect(()=>{document.title="Campaign | Sari-Sari CRM"},[]);const[e,t]=h.useState(!1),[n,s]=h.useState(!1),[r,i]=h.useState(null),[l,o]=h.useState(""),[c,d]=h.useState("All Statuses"),[u,f]=h.useState({show:!1,action:null,campaign:null}),[p,x]=h.useState([{id:1,name:"Christmas Promo 2025",subject:" Holiday Discounts Await You!",content:"Spread holiday cheer with exclusive deals this Christmas season!",status:"Scheduled",recipients:1200,scheduleDate:"2025-12-15T10:00",created:"2025-10-20",createdBy:"Marketing Team"},{id:2,name:"New Year Kickoff",subject:"Start 2026 with Big Savings!",content:"Kick off your year right with amazing offers from us!",status:"Draft",recipients:"",scheduleDate:"",created:"2025-10-25",createdBy:"Marketing Team"}]),[v,w]=h.useState({id:null,name:"",subject:"",content:"",status:"Draft",recipients:"",scheduleDate:""}),b=p.filter($=>{const P=c==="All Statuses"||$.status===c,O=$.name.toLowerCase().includes(l.toLowerCase())||$.subject.toLowerCase().includes(l.toLowerCase());return P&&O}),C=()=>{s(!1),w({id:null,name:"",subject:"",content:"",status:"Draft",recipients:"",scheduleDate:""}),t(!0)},N=($,P)=>{P.stopPropagation(),s(!0),w($),t(!0)},S=($,P)=>{P.stopPropagation(),f({show:!0,action:"delete",campaign:$})},A=$=>{$.preventDefault(),f({show:!0,action:n?"edit":"add",campaign:{...v}})},k=()=>{if(u.action==="add"){const $={...u.campaign,id:Date.now(),created:new Date().toLocaleDateString(),createdBy:"Marketing Team"};x(P=>[...P,$]),t(!1)}else u.action==="edit"?(x($=>$.map(P=>P.id===u.campaign.id?{...u.campaign}:P)),t(!1)):u.action==="delete"&&x($=>$.filter(P=>P.id!==u.campaign.id));f({show:!1,action:null,campaign:null})},_=()=>{f({show:!1,action:null,campaign:null})},T=$=>i($),E=()=>i(null),I=$=>{const{name:P,value:O}=$.target;w(B=>({...B,[P]:O}))},z=$=>{$.target.id==="modalBackdrop"&&t(!1)};return r?a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[a.jsxs("button",{onClick:E,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-6 cursor-pointer",children:[a.jsx(ju,{className:"mr-1 w-5 h-5"})," Back"]}),a.jsx("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:r.name}),a.jsx("span",{className:`text-xs sm:text-sm px-2 py-0.5 rounded ${r.status==="Scheduled"?"bg-yellow-100 text-yellow-700":r.status==="Sent"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:r.status})]})}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Campaign Information"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm text-gray-700",children:[a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Subject:"})," ",a.jsx("br",{}),r.subject]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Created By:"})," ",a.jsx("br",{}),r.createdBy]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Created On:"})," ",a.jsx("br",{}),r.created]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Scheduled Date:"})," ",a.jsx("br",{}),r.scheduleDate?new Date(r.scheduleDate).toLocaleString():""]}),a.jsxs("p",{className:"sm:col-span-2",children:[a.jsx("span",{className:"font-semibold",children:"Email Content:"})," ",a.jsx("br",{}),r.content]}),r.status==="Scheduled"&&a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Recipients:"})," ",a.jsx("br",{}),r.recipients]})]})]})]}):a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(Ka,{className:"mr-2 text-blue-600"})," Email Campaigns"]}),a.jsx("button",{onClick:C,className:"flex items-center bg-black text-white px-4 py-2 rounded-md hover:bg-gray-800 transition text-sm sm:text-base shadow-sm",children:" New Campaign"})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search by campaign name or email subject...",value:l,onChange:$=>o($.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:c,onChange:$=>d($.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"All Statuses"}),a.jsx("option",{children:"Draft"}),a.jsx("option",{children:"Scheduled"}),a.jsx("option",{children:"Sent"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-[700px] w-full border border-gray-200 rounded-lg bg-white shadow-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-sm text-gray-600",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Campaign Name"}),a.jsx("th",{className:"py-3 px-4",children:"Email Subject"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4",children:"Recipients"}),a.jsx("th",{className:"py-3 px-4",children:"Scheduled Date"}),a.jsx("th",{className:"py-3 px-4 text-center",children:"Actions"})]})}),a.jsx("tbody",{className:"text-sm text-gray-700",children:b.map(($,P)=>a.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer transition",onClick:()=>T($),children:[a.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:$.name}),a.jsx("td",{className:"py-3 px-4",children:$.subject}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${$.status==="Scheduled"?"bg-yellow-100 text-yellow-700":$.status==="Sent"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:$.status})}),a.jsx("td",{className:"py-3 px-4",children:$.recipients?`${$.recipients} emails`:""}),a.jsx("td",{className:"py-3 px-4",children:$.scheduleDate?new Date($.scheduleDate).toLocaleString():""}),a.jsx("td",{className:"py-3 px-4 text-center",onClick:O=>O.stopPropagation(),children:a.jsxs("div",{className:"flex justify-center gap-3",children:[a.jsx("button",{onClick:O=>N($,O),className:"text-blue-500 hover:text-blue-700",children:a.jsx(nn,{})}),a.jsx("button",{onClick:O=>S($,O),className:"text-red-500 hover:text-red-700",children:a.jsx(Wt,{})})]})})]},P))})]})}),e&&a.jsx("div",{id:"modalBackdrop",onClick:z,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl shadow-lg p-5 sm:p-6 relative border border-gray-200 my-6 max-h-[90vh] overflow-y-auto",onClick:$=>$.stopPropagation(),children:[a.jsx("button",{onClick:()=>t(!1),className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:a.jsx(Vt,{size:20})}),a.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:n?"Edit Campaign":"Add New Campaign"}),a.jsxs("form",{onSubmit:A,className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Campaign Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"name",value:v.name,onChange:I,placeholder:"e.g. Summer Sale Blast",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Email Subject ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"subject",value:v.subject,onChange:I,placeholder:"e.g. Big discounts await you!",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[a.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Campaign Status ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{name:"status",value:v.status,onChange:I,required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",children:[a.jsx("option",{value:"Draft",children:"Draft"}),a.jsx("option",{value:"Scheduled",children:"Scheduled"}),a.jsx("option",{value:"Sent",children:"Sent"})]})]}),v.status==="Scheduled"&&a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:col-span-2",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Scheduled Date ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"datetime-local",name:"scheduleDate",value:v.scheduleDate,onChange:I,required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Recipient Count ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"number",name:"recipients",value:v.recipients,onChange:I,placeholder:"e.g. 500",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),a.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[a.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Email Content ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("textarea",{name:"content",rows:4,value:v.content,onChange:I,placeholder:"Write your email message here...",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),a.jsxs("div",{className:"flex justify-end gap-2 sm:col-span-2 pt-3 border-t border-gray-100 mt-2",children:[a.jsx("button",{type:"button",onClick:()=>t(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:"Save Campaign"})]})]})]})}),u.show&&a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 relative border border-gray-200",children:[a.jsx("button",{onClick:_,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:a.jsx(Vt,{size:20})}),a.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:u.action==="delete"?"Confirm Delete":u.action==="edit"?"Confirm Edit":"Confirm Add"}),a.jsx("p",{className:"text-center text-gray-600 mb-6",children:u.action==="delete"?a.jsxs(a.Fragment,{children:["Are you sure you want to delete the campaign"," ",a.jsx("span",{className:"font-semibold",children:u.campaign.name}),"?"]}):u.action==="edit"?a.jsxs(a.Fragment,{children:["Save changes to"," ",a.jsx("span",{className:"font-semibold",children:u.campaign.name}),"?"]}):a.jsxs(a.Fragment,{children:["Add new campaign"," ",a.jsx("span",{className:"font-semibold",children:u.campaign.name}),"?"]})}),a.jsxs("div",{className:"flex justify-center gap-4",children:[a.jsx("button",{onClick:_,className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),a.jsx("button",{onClick:k,className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:"Confirm"})]})]})})]})}const R8e=[{id:1,name:"Welcome E-mail",category:"Welcome",subject:"Welcome to {company}!",body:`Hi {name}, Welcome to {company}! We're excited to have you on board.

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed vel quam vitae erat venenatis feugiat. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.

Best regards, The Team`,createdBy:"Angel Angelo",date:"12/10/23"},{id:2,name:"Product Demo Follow-up",category:"Follow-up",subject:"Thanks for checking out our demo",body:`Hi {name}, Thank you for taking the time to view our product demo.
Do you have any questions? Let's schedule a call to discuss how we can help {company}.

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed vel quam vitae erat venenatis feugiat. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.

Best, Sales Team`,createdBy:"Angel Angelo",date:"12/10/23"}],u8={Welcome:"bg-orange-100 text-orange-700","Follow-up":"bg-blue-100 text-blue-700",Newsletter:"bg-green-100 text-green-700",Promotional:"bg-purple-100 text-purple-700",default:"bg-gray-100 text-gray-800"};function z8e(){h.useEffect(()=>{document.title="Templates | Sari-Sari CRM"},[]);const[e,t]=h.useState(R8e),[n,s]=h.useState(!1),[r,i]=h.useState(null),[l,o]=h.useState(null),[c,d]=h.useState(""),[u,f]=h.useState("All Categories"),[p,x]=h.useState({name:"",category:"",subject:"",body:""}),[v,w]=h.useState({show:!1,action:null,template:null}),b=()=>{o(null),i(null),s(!1)},C=P=>{x({...p,[P.target.name]:P.target.value})},N=()=>{w({show:!0,action:"add",template:{...p}})},S=P=>{i(P),x({name:P.name,category:P.category,subject:P.subject,body:P.body})},A=()=>{w({show:!0,action:"edit",template:{...p,id:r.id}})},k=P=>{w({show:!0,action:"delete",template:P})},_=P=>{cx.success(`Template "${P.name}" selected for use!`),w({show:!1,action:null,template:null})},T=()=>{const P=v.template;if(v.action==="add"){const O={...P,id:e.length+1,createdBy:"You",date:new Date().toLocaleDateString()};t(B=>[O,...B]),s(!1),x({name:"",category:"",subject:"",body:""})}else v.action==="edit"?(t(O=>O.map(B=>B.id===P.id?{...P}:B).sort((B,Q)=>new Date(Q.date).getTime()-new Date(B.date).getTime())),i(null),x({name:"",category:"",subject:"",body:""}),o(null)):v.action==="delete"&&(t(O=>O.filter(B=>B.id!==P.id)),o(null));w({show:!1,action:null,template:null})},E=()=>{w({show:!1,action:null,template:null})},I=P=>o(P),z=e.filter(P=>P.name.toLowerCase().includes(c.toLowerCase())&&(u==="All Categories"||P.category===u)),$=(P,O=!1)=>a.jsxs("div",{className:"flex flex-col justify-between h-full",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:P.name}),a.jsx("span",{className:`text-xs px-3 py-1 rounded-md ${u8[P.category]||u8.default}`,children:P.category})]}),a.jsx("p",{className:"text-gray-600 mb-2 text-sm",children:P.subject}),a.jsx("div",{className:`text-gray-800 text-sm p-2 rounded-md ${O?"bg-gray-50 max-h-40 overflow-y-auto":"truncate"} whitespace-pre-line`,style:O?{}:{display:"-webkit-box",WebkitLineClamp:7,WebkitBoxOrient:"vertical",overflow:"hidden"},children:P.body})]}),a.jsxs("div",{className:"flex justify-between items-center mt-4",children:[!O&&a.jsxs("button",{onClick:B=>{B.stopPropagation(),_(P)},className:"flex items-center gap-1 bg-black text-white px-3 py-1 rounded-md text-sm hover:bg-gray-900 transition",children:[a.jsx(ga,{})," Use Template"]}),O&&a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:B=>{B.stopPropagation(),S(P)},className:"flex items-center gap-1 bg-black text-white px-3 py-1 rounded-md text-sm hover:bg-gray-900 transition",children:[a.jsx(rn,{})," Edit"]}),a.jsxs("button",{onClick:B=>{B.stopPropagation(),k(P)},className:"flex items-center gap-1 bg-red-500 text-white px-3 py-1 rounded-md text-sm hover:bg-red-600 transition",children:[a.jsx(Wt,{})," Delete"]})]}),a.jsxs("p",{className:"text-gray-400 text-xs text-right",children:["Created by: ",P.createdBy," | ",P.date]})]})]});return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter min-h-screen",children:[a.jsx(ox,{position:"top-center",reverseOrder:!1}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(ga,{className:"mr-2 text-black"})," Templates"]}),a.jsx("button",{onClick:()=>{s(!0),i(null),x({name:"",category:"",subject:"",body:""})},className:"flex items-center bg-black text-white px-4 py-2 rounded-md hover:bg-gray-800 transition text-sm sm:text-base shadow-sm",children:" New Template"})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search by template name...",value:c,onChange:P=>d(P.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:u,onChange:P=>f(P.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"All Categories"}),a.jsx("option",{children:"Welcome"}),a.jsx("option",{children:"Follow-up"}),a.jsx("option",{children:"Newsletter"}),a.jsx("option",{children:"Promotional"})]})})]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:z.map(P=>a.jsxs("div",{onClick:()=>I(P),className:"bg-white rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl cursor-pointer flex flex-col justify-between h-80 transition",children:[a.jsx("div",{className:"h-2 w-full rounded-t-2xl bg-black"}),a.jsx("div",{className:"p-4 flex-grow",children:$(P)})]},P.id))}),(n||r)&&a.jsx("div",{onClick:b,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl shadow-lg p-5 sm:p-6 relative border border-gray-200 my-6 max-h-[90vh] overflow-y-auto",onClick:P=>P.stopPropagation(),children:[a.jsx("button",{onClick:b,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:a.jsx(Vt,{size:20})}),a.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:r?"Edit Template":"Create New Template"}),a.jsxs("form",{onSubmit:P=>{P.preventDefault(),r?A():N()},className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Template Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"name",value:p.name,onChange:C,placeholder:"e.g. Welcome Email",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Category ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{name:"category",value:p.category,onChange:C,required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none",children:[a.jsx("option",{value:"",children:"Select Category"}),a.jsx("option",{value:"Welcome",children:"Welcome"}),a.jsx("option",{value:"Follow-up",children:"Follow-up"}),a.jsx("option",{value:"Newsletter",children:"Newsletter"}),a.jsx("option",{value:"Promotional",children:"Promotional"})]})]}),a.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[a.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Subject Line ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"subject",value:p.subject,onChange:C,placeholder:"e.g. Welcome to our service!",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none"})]}),a.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[a.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Email Body ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("textarea",{name:"body",rows:4,value:p.body,onChange:C,placeholder:"Write your email message here...",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none resize-none"})]}),a.jsxs("div",{className:"flex justify-end gap-2 sm:col-span-2 pt-3 border-t border-gray-100 mt-2",children:[a.jsx("button",{type:"button",onClick:b,className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:r?"Update Template":"Create Template"})]})]})]})}),l&&!r&&a.jsx("div",{onClick:b,className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"rounded-2xl shadow-lg cursor-default h-80 w-full max-w-md overflow-hidden flex flex-col",onClick:P=>P.stopPropagation(),children:[a.jsx("div",{className:"h-2 w-full rounded-t-2xl bg-black"}),a.jsx("div",{className:"p-4 flex-grow overflow-y-auto bg-gray-50",children:$(l,!0)})]})}),v.show&&a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 relative border border-gray-200",children:[a.jsx("button",{onClick:E,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:a.jsx(Vt,{size:20})}),a.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:v.action==="delete"?"Confirm Delete":v.action==="edit"?"Confirm Update":v.action==="add"?"Confirm Add":"Confirm Use"}),a.jsx("p",{className:"text-center text-gray-600 mb-6",children:v.action==="delete"?a.jsxs(a.Fragment,{children:["Are you sure you want to delete the template"," ",a.jsx("span",{className:"font-semibold",children:v.template.name}),"?"]}):v.action==="edit"?a.jsxs(a.Fragment,{children:["Save changes to"," ",a.jsx("span",{className:"font-semibold",children:v.template.name}),"?"]}):v.action==="add"?a.jsxs(a.Fragment,{children:["Add new template"," ",a.jsx("span",{className:"font-semibold",children:v.template.name}),"?"]}):a.jsxs(a.Fragment,{children:["Use template"," ",a.jsx("span",{className:"font-semibold",children:v.template.name}),"?"]})}),a.jsxs("div",{className:"flex justify-center gap-4",children:[a.jsx("button",{onClick:E,className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),a.jsx("button",{onClick:T,className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:"Confirm"})]})]})})]})}function U8e({toggleSidebar:e}){const[t,n]=h.useState(!1),s=h.useRef(null),r=Yt(),i=vt(),{logout:l}=zs(),{user:o,fetchUser:c}=ta(),d={"/group-manager/dashboard":"Dashboard","/group-manager/accounts":"Accounts","/group-manager/contacts":"Contacts","/reports":"Reports","/leads":"Leads","/group-manager/Audit":"Audit","/group-manager/targets":"Targets","/group-manager/leads":"Leads","/group-manager/quotes":"Quotes","/group-manager/users":"Users","/group-manager/deals":"Deals"};h.useEffect(()=>{c()},[]),h.useEffect(()=>{const f=()=>{c()};return window.addEventListener("userProfileUpdated",f),()=>{window.removeEventListener("userProfileUpdated",f)}},[c]);const u=d[r.pathname]||"Group Manager Panel";return h.useEffect(()=>{function f(p){s.current&&!s.current.contains(p.target)&&n(!1)}return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]),a.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})})}),a.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:u})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("button",{className:"relative text-gray-600 hover:text-gray-800",children:[a.jsx(Pp,{className:"text-xl"}),a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs w-4 h-4 flex items-center justify-center rounded-full",children:"3"})]}),a.jsxs("div",{className:"relative",ref:s,children:[a.jsxs("button",{onClick:()=>n(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[a.jsx("img",{src:o?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 aspect-square object-cover rounded-full"}),a.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[o?.first_name," ",o?.last_name]})]}),t&&a.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4",children:[a.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[a.jsx("img",{src:o?.profile_picture||"https://via.placeholder.com/80",alt:"Profile",className:"w-16 h-16 rounded-full object-cover"}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[o?.first_name," ",o?.middle_name," ",o?.last_name]}),a.jsx("p",{className:"text-[11px] text-gray-600 font-light w-full truncate",children:"Group Manager"})]})]}),a.jsxs("div",{className:"mt-6 space-y-1 px-4 text-left",children:[a.jsx("button",{onClick:()=>{i("/group-manager/users"),n(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Invite Your Team"}),a.jsx("button",{onClick:()=>{i("/group-manager/manage-account"),n(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Manage Your Account"}),a.jsx("div",{className:"border-t border-gray-200 my-2"}),a.jsx("button",{onClick:l,className:"block w-full text-sm text-red-600 hover:text-red-700 hover:bg-gray-50 py-2 rounded text-left",children:"Logout"})]})]})]})]})]})}function F8e(){const[e,t]=h.useState(!0),[n,s]=h.useState(!1),[r,i]=h.useState(!1),[l,o]=h.useState(!1),c=Yt(),{user:d}=ta();h.useEffect(()=>{d&&console.log("Fetched user:",d)},[d]),h.useEffect(()=>{console.log("Simulating user fetch... (no backend)")},[]),h.useEffect(()=>{document.title="Panel | Sari-Sari CRM"},[]);const u="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",f="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition",x=["/group-manager/accounts","/group-manager/contacts","/group-manager/leads","/group-manager/deals","/group-manager/quotes","/group-manager/targets","/group-manager/meetings"].includes(c.pathname);return a.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[a.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${l?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[a.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[a.jsxs("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:[" Sari-Sari.CRM"," ",a.jsx("span",{className:"text-[12px] text-gray-700 font-medium align-bottom",children:"v2"})]}),d&&d.company&&a.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:d.company.company_name})]}),a.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[a.jsxs(Ot,{to:"/group-manager/dashboard",className:({isActive:v})=>v?u:f,children:[a.jsx(Dp,{className:"text-lg"}),a.jsx("span",{children:"Dashboard"})]}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>t(!e),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(Kt,{className:"text-lg"}),"Sales"]}),a.jsx(St,{className:`transition-transform ${e||x?"rotate-180":""}`})]}),(e||x)&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(Ot,{to:"/group-manager/accounts",className:({isActive:v})=>v?u:f,children:[a.jsx(La,{})," Accounts"]}),a.jsxs(Ot,{to:"/group-manager/contacts",className:({isActive:v})=>v?u:f,children:[a.jsx(Zt,{})," Contacts"]}),a.jsxs(Ot,{to:"/group-manager/leads",className:({isActive:v})=>v?u:f,children:[a.jsx(Ba,{})," Leads"]}),a.jsxs(Ot,{to:"/group-manager/deals",className:({isActive:v})=>v?u:f,children:[a.jsx(Kt,{})," Deals"]}),a.jsxs(Ot,{to:"/group-manager/quotes",className:({isActive:v})=>v?u:f,children:[a.jsx(ga,{})," Quotes"]}),a.jsxs(Ot,{to:"/group-manager/targets",className:({isActive:v})=>v?u:f,children:[a.jsx(Zs,{})," Targets"]})]})]}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!n),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(ys,{className:"text-lg"}),"Activity"]}),a.jsx(St,{className:`transition-transform ${n?"rotate-180":""}`})]}),n&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(Ot,{to:"/group-manager/tasks",className:({isActive:v})=>v?u:f,children:[a.jsx(Gt,{})," Tasks"]}),a.jsxs(Ot,{to:"/group-manager/meetings",className:({isActive:v})=>v?u:f,children:[a.jsx(_t,{})," Meetings"]}),a.jsxs(Ot,{to:"/group-manager/calls",className:({isActive:v})=>v?u:f,children:[a.jsx(Es,{})," Calls"]}),a.jsxs(Ot,{to:"/group-manager/audit",className:({isActive:v})=>v?u:f,children:[a.jsx(ys,{})," Audit"]})]})]}),a.jsx("div",{children:a.jsx(Ot,{to:"/group-manager/territory",className:({isActive:v})=>v?u:f,children:a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(Lo,{className:"text-lg"}),"Territory"]})})}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!r),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(ek,{className:"text-lg"}),"User Management"]}),a.jsx(St,{className:`transition-transform ${r?"rotate-180":""}`})]}),r&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(Ot,{to:"/group-manager/users",className:({isActive:v})=>v?u:f,children:[a.jsx(La,{})," Users"]}),a.jsxs(Ot,{to:"/group-manager/manage-account",className:({isActive:v})=>v?u:f,children:[a.jsx(Zt,{})," Manage Account"]})]})]})]}),a.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),l&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>o(!1)}),a.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[a.jsx(U8e,{toggleSidebar:()=>o(!l)}),a.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:a.jsx(Cp,{})})]})]})}const B8e=e=>a.jsx(Bt,{...e}),H8e=e=>a.jsx(Tf,{...e}),G8e=e=>a.jsx(tk,{...e}),WX=e=>a.jsx(Is,{...e}),W8e=e=>a.jsx(Lp,{...e}),V8e=e=>a.jsx(sw,{...e}),q8e=e=>a.jsx(_t,{...e}),Y8e=e=>a.jsx(Et,{...e}),K8e=e=>a.jsx(iw,{...e}),VX=e=>a.jsx(rw,{...e}),qX=e=>a.jsx(La,{...e}),YX=e=>a.jsx(Zt,{...e}),Q8e=e=>a.jsx(Ba,{...e}),X8e=e=>a.jsx(Kt,{...e}),Z8e=e=>a.jsx(ga,{...e}),J8e=e=>a.jsx(Zs,{...e}),eBe=e=>a.jsx(xn,{...e}),tBe=e=>a.jsx(_t,{...e}),aBe=e=>a.jsx(Es,{...e}),nBe=e=>a.jsx(Lo,{...e}),sBe=e=>a.jsx(ys,{...e}),KX=e=>`P ${new Intl.NumberFormat("en-PH",{minimumFractionDigits:0}).format(e)}`,rBe=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},iBe=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},lBe=e=>{switch(e){case"call":return{Icon:Y8e,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:K8e,color:"text-green-600",bgColor:"bg-green-100"};case"meeting":default:return{Icon:q8e,color:"text-blue-500",bgColor:"bg-blue-100"}}},oBe=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},cBe=({searchQuery:e,onSearchChange:t,searchResults:n,onSearchResultClick:s})=>{const r=vt(),[i,l]=h.useState(!1),o=h.useRef(null),c=[{icon:qX,label:"Account"},{icon:YX,label:"Contact"},{icon:Q8e,label:"Leads"},{icon:X8e,label:"Deals"},{icon:Z8e,label:"Quotes"},{icon:J8e,label:"Target"},{icon:eBe,label:"Task"},{icon:tBe,label:"Meeting"},{icon:aBe,label:"Call"},{icon:sBe,label:"Audit"},{icon:nBe,label:"Territory"}];h.useEffect(()=>{const f=p=>{o.current&&!o.current.contains(p.target)&&l(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const d=f=>{t(f.target.value),l(f.target.value.trim().length>0)},u=f=>{s&&s(f),l(!1)};return a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[a.jsxs("div",{className:"w-full flex justify-center relative",ref:o,children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-lg lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[a.jsx(B8e,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),a.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:d,onFocus:()=>e.trim().length>0&&l(!0)})]}),i&&Array.isArray(n)&&n.length>0&&a.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:n.map((f,p)=>a.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>u(f),children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:f.name}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:f.type}),f.details&&a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:f.details})]}),a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${f.type==="Lead"?"bg-blue-100 text-blue-600":f.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:f.type})]})},p))}),i&&e.trim().length>0&&(!Array.isArray(n)||n.length===0)&&a.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 p-4 text-center text-sm text-gray-500",children:"No results found"})]}),a.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:a.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:c.map((f,p)=>a.jsxs("div",{className:"relative flex-shrink-0 group",children:[a.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":f.label,title:f.label,onClick:()=>{switch(f.label){case"Account":r("/group-manager/accounts");break;case"Contact":r("/group-manager/contacts");break;case"Leads":r("/group-manager/leads");break;case"Deals":r("/group-manager/deals");break;case"Quotes":r("/group-manager/quotes");break;case"Target":r("/group-manager/targets");break;case"Task":r("/group-manager/tasks");break;case"Meeting":r("/group-manager/meetings");break;case"Call":r("/group-manager/calls");break;case"Audit":r("/group-manager/audit");break;case"Territory":r("/group-manager/territory");break;default:console.log(`Clicked ${f.label}`)}},children:a.jsx(f.icon,{size:24,className:"lg:scale-95"})}),a.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-1.5 bg-gray-900 text-white text-xs font-semibold rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-75 ease-in-out z-50 shadow-lg",children:[f.label,a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]},p))})})]})},dBe=({action:e,description:t,entity_type:n,entity_name:s,timestamp:r})=>{const i=vt(),l=u=>{if(!u)return"Unknown";const f=new Date(u),x=new Date-f,v=Math.floor(x/6e4),w=Math.floor(x/36e5),b=Math.floor(x/864e5);return v<1?"Just now":v<60?`${v} min ago`:w<24?`${w} hour${w>1?"s":""} ago`:b<7?`${b} day${b>1?"s":""} ago`:f.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},o=e||t||"Action",c=s||n||"System",d=l(r);return a.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/group-manager/audit"),children:[a.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[o," ",a.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",c,")"]})]}),a.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:d})]})},uBe=({logs:e,loading:t})=>{const n=vt();return a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),a.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>n("/group-manager/audit"),children:[a.jsx("span",{children:"See All"}),a.jsx(VX,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?a.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((s,r)=>a.jsx(dBe,{...s},r))}):a.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},mBe=({icon:e,title:t,value:n,color:s,bgColor:r,loading:i,onClick:l})=>a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l||(()=>console.log(`Clicked metric card: ${t}`)),children:[a.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:a.jsx(e,{size:20})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n||0})]})]}),fBe=({revenueData:e,loading:t})=>{const n=vt(),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=h.useMemo(()=>{if(console.log("=== RevenueChart calculateRevenueData ==="),console.log("revenueData:",e),console.log("revenueData length:",e?.length),!e||e.length===0){console.log("No revenue data, returning empty chart");const b=new Date;b.getFullYear();const C=b.getMonth(),N=[],S=[];for(let A=0;A<=C;A++)N.push(s[A]),S.push(0);return{labels:N,revenues:S,maxRevenue:0}}const o={};let c=0,d=0;console.log("Processing deals:",e.length),e.forEach((b,C)=>{const N=b.close_date||b.closeDate||null,S=N&&N!==null&&N!=="",A=b.stage||"",k=A.toUpperCase()==="CLOSED_WON"||A==="CLOSED_WON";let _=b.amount;_&&typeof _=="object"&&_.toString?_=parseFloat(_.toString()):_=parseFloat(_)||0;const T=_>0;if(k&&(d++,console.log(`Deal ${C+1} (CLOSED_WON):`,{id:b.id,name:b.name,stage:A,close_date:N,close_date_type:typeof N,amount:_,amount_type:typeof b.amount,hasCloseDate:S,hasAmount:T,willBeAdded:S&&T,allFields:Object.keys(b)})),S&&k&&T)try{let E=new Date(N);if(isNaN(E.getTime())){const I=String(N).split("T")[0];E=new Date(I+"T00:00:00")}if(isNaN(E.getTime()))console.warn(` Invalid date for deal ${b.id}:`,N,"Type:",typeof N);else{const I=E.getFullYear(),z=E.getMonth()+1,$=`${I}-${String(z).padStart(2,"0")}`;o[$]||(o[$]=0),o[$]+=_,c++,console.log(` Added deal ${b.id} to month ${$}: ${_}, total: ${o[$]}`),console.log(`  - Close date: ${N} -> Parsed: ${E.toISOString()} -> Month: ${$} (Year: ${I}, Month: ${z})`)}}catch(E){console.error("Error parsing deal date:",N,E)}else k&&console.warn(` Deal ${b.id} is CLOSED_WON but missing data:`,{hasCloseDate:S,hasAmount:T,closeDate:N,amount:_,originalAmount:b.amount})}),console.log("Summary:",{totalDeals:e.length,closedWonDeals:d,validDealsForGraph:c,monthlyRevenue:o});const u=Object.keys(o).map(b=>parseInt(b.split("-")[0])),f=u.length>0?[...new Set(u)].sort():[],p=new Date().getFullYear();new Date().getMonth();const x=[],v=[];for(let b=0;b<12;b++){const C=`${p}-${String(b+1).padStart(2,"0")}`;x.push(s[b]);const N=o[C]||0;v.push(N),N>0&&console.log(`Month ${s[b]} (${C}): ${N}`)}if(f.length>0){const b=Math.max(...f);if(b>p)for(let C=p+1;C<=b;C++)for(let N=0;N<12;N++){const S=`${C}-${String(N+1).padStart(2,"0")}`,A=o[S]||0;x.push(`${s[N]} ${C}`),v.push(A),A>0&&console.log(`Month ${s[N]} ${C} (${S}): ${A}`)}}const w=Math.max(...v,1);return console.log("Final chart data:",{labels:x,revenues:v,maxRevenue:w,hasData:v.some(b=>b>0)}),{labels:x,revenues:v,maxRevenue:w}},[e]),i=r.labels,l=r.revenues;return console.log("=== FINAL CHART DATA ==="),console.log("X Axis (Months):",i),console.log("Y Axis (Revenue):",l),console.log("Has any revenue > 0:",l.some(o=>o>0)),console.log("All revenue values:",l),console.log("Max revenue:",r.maxRevenue),a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),a.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>n("/group-manager/deals"),children:[a.jsx("span",{children:"See All"}),a.jsx(VX,{size:14,className:"transform -rotate-45"})]})]}),a.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:a.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i&&i.length>0&&l&&l.length>0?a.jsx(fN,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:o=>o>=1e3?`${(o/1e3).toFixed(0)}k`:o.toString()}],series:[{data:l,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%"}}):a.jsxs("div",{className:"text-center text-gray-500",children:[a.jsx("p",{className:"text-sm",children:"No revenue data available"}),a.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},hBe=({pipelineData:e,loading:t})=>{const n=vt(),s=l=>{const o=(l||"").toUpperCase(),c={PROSPECTING:{name:"Prospecting",color:"bg-blue-500"},QUALIFICATION:{name:"Qualification",color:"bg-yellow-500"},PROPOSAL:{name:"Proposal",color:"bg-orange-500"},NEGOTIATION:{name:"Negotiation",color:"bg-purple-500"},CLOSED_WON:{name:"Closed Won",color:"bg-green-500"},CLOSED_LOST:{name:"Closed Lost",color:"bg-red-500"}};if(c[o])return c[o];const d=["bg-blue-500","bg-yellow-500","bg-orange-500","bg-purple-500","bg-green-500","bg-red-500"],u=Math.abs(o.split("").reduce((f,p)=>f+p.charCodeAt(0),0))%d.length;return{name:l||"Unknown",color:d[u]}},i=(()=>{if(!e||e.length===0)return["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"].map(f=>{const p=s(f);return{stage:p.name,value:0,deals:0,color:p.color}});const l={};e.forEach(u=>{const f=u.stage||"PROSPECTING";l[f]||(l[f]={deals:0,value:0}),l[f].deals+=1,l[f].value+=parseFloat(u.amount||0)});const o=Math.max(...Object.values(l).map(u=>u.value),1),c=["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"],d=[];return c.forEach(u=>{const f=s(u),p=l[u]||{deals:0,value:0};d.push({stage:f.name,value:p.value,deals:p.deals,color:f.color,percentage:o>0?p.value/o*100:0})}),d})();return a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Sales Pipeline"}),a.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:()=>n("/group-manager/deals"),children:"See All"})]}),a.jsx("div",{className:"space-y-4 flex-grow",children:i.slice(0,6).map(l=>a.jsxs("div",{className:"flex flex-col cursor-pointer hover:opacity-85 transition duration-150",onClick:()=>n("/group-manager/deals"),children:[a.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[a.jsx("span",{className:"font-medium text-gray-700",children:l.stage}),a.jsx("span",{className:"font-semibold text-gray-800",children:KX(l.value)})]}),a.jsx("div",{className:"relative h-2 rounded-full bg-gray-200",children:a.jsx("div",{className:`absolute top-0 left-0 h-full rounded-full ${l.color}`,style:{width:`${Math.min(l.percentage,100)}%`}})}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[l.deals," Deals"]})]},l.stage))})]})},rA=({title:e,items:t,children:n,onSeeAll:s})=>{const r=vt(),i=()=>{if(s)s();else{const l={"Latest Leads":"/group-manager/leads","Latest Deals":"/group-manager/deals","Upcoming Activities":"/group-manager/tasks"};l[e]&&r(l[e])}};return a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),a.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),n]})},gBe=({first_name:e,last_name:t,company_name:n,source:s,created_at:r,id:i})=>{const l=vt(),{text:o,bg:c}=iBe(s||"Website"),d=x=>{if(!x)return"Unknown";const v=new Date(x),b=new Date-v,C=Math.floor(b/6e4),N=Math.floor(b/36e5),S=Math.floor(b/864e5);return C<60?`${C} min ago`:N<24?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):S<7?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):v.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},u=`${e||""} ${t||""}`.trim()||"Unknown",f=n||"Unknown Company",p=d(r);return a.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&l(`/group-manager/leads/${i}`),children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:u}),a.jsx("p",{className:"text-xs text-gray-500",children:f})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs text-gray-400",children:p}),a.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${o} ${c} px-2 py-0.5 rounded-full`,children:s||"Website"})]})]})})},pBe=({name:e,amount:t,account:n,stage:s,created_at:r,id:i,previousAmount:l})=>{const o=vt(),d={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[s]||s||"Unknown",{text:u,bg:f}=rBe(d),p=parseFloat(t||0),x=l?p>=l?"up":"down":"up",v=x==="up"?W8e:V8e,w=x==="up"?"text-green-400":"text-red-400",b=n?.name||"Unknown Company";return a.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&o(`/group-manager/deals/info?id=${i}`),children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex-shrink",children:[a.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),a.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:b}),a.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${u} ${f} px-2 py-0.5 rounded-full`,children:d})]}),a.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[a.jsx("p",{className:"text-md font-bold text-gray-800",children:KX(p)}),a.jsx(v,{size:16,className:`${w} mt-1`})]})]})})},xBe=({type:e,title:t,assignedTo:n,dueDate:s,scheduledDate:r,priority:i,id:l,activityType:o,fullData:c})=>{const d=vt(),f=o||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:p,color:x,bgColor:v}=lBe(f),{text:w,bg:b}=oBe(i||"MEDIUM"),S=(_=>{if(!_)return"No date set";const T=new Date(_),I=T-new Date,z=Math.floor(I/864e5);return z===0?`Today, ${T.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:z===1?`Tomorrow, ${T.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:z===-1?`Yesterday, ${T.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:T.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(s||r),A=n||"Unassigned",k=()=>{l&&(c?f==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(c)),d(`/group-manager/calls/info?id=${l}`)):f==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(c)),d(`/group-manager/meetings/info?id=${l}`)):d("/group-manager/tasks"):d(f==="call"?`/group-manager/calls/info?id=${l}`:f==="meeting"?`/group-manager/meetings/info?id=${l}`:"/group-manager/tasks"))};return a.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:k,children:[a.jsx("div",{className:`p-2 rounded-lg ${v} mr-3 flex-shrink-0 mt-1`,children:a.jsx(p,{size:20,className:`${x}`})}),a.jsxs("div",{className:"flex-grow",children:[a.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[a.jsx("span",{className:"text-xl leading-none mr-2",children:""}),t||"Untitled Activity"]}),a.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[a.jsxs("p",{className:"flex items-center",children:[a.jsx(WX,{size:14,className:"mr-1.5 text-gray-400"}),S]}),a.jsxs("p",{className:"flex items-center",children:[a.jsx(YX,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",A]})]})]}),a.jsx("span",{className:`inline-block text-xs font-medium ${w} ${b} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},yBe=()=>{const e=vt(),{user:t}=ta(),[n,s]=h.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0}),[r,i]=h.useState([]),[l,o]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState([]),[p,x]=h.useState([]),[v,w]=h.useState([]),[b,C]=h.useState(!0),[N,S]=h.useState(null),[A,k]=h.useState(""),[_,T]=h.useState([]),[E,I]=h.useState([]),[z,$]=h.useState([]),[P,O]=h.useState(new Date),B=h.useRef(null),Q=h.useRef(null),F=h.useMemo(()=>{try{if(!A.trim())return[];const oe=A.toLowerCase().trim(),Z=[];return Array.isArray(_)&&_.forEach(R=>{const ve=`${R.first_name||""} ${R.last_name||""}`.trim().toLowerCase(),X=(R.company_name||"").toLowerCase(),je=(R.email||"").toLowerCase(),Ne=(R.phone||"").toLowerCase();(ve.includes(oe)||X.includes(oe)||je.includes(oe)||Ne.includes(oe))&&Z.push({id:R.id,name:`${R.first_name||""} ${R.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:R.company_name||"No company",route:`/group-manager/leads/${R.id}`})}),Array.isArray(E)&&E.forEach(R=>{const ve=(R.name||"").toLowerCase(),X=(R.account?.name||"").toLowerCase(),je=(R.description||"").toLowerCase();(ve.includes(oe)||X.includes(oe)||je.includes(oe))&&Z.push({id:R.id,name:R.name||"Unnamed Deal",type:"Deal",details:R.account?.name||"No account",route:`/group-manager/deals/info?id=${R.id}`})}),Array.isArray(z)&&z.forEach(R=>{const ve=(R.name||"").toLowerCase(),X=(R.email||"").toLowerCase(),je=(R.phone||"").toLowerCase(),Ne=(R.website||"").toLowerCase();(ve.includes(oe)||X.includes(oe)||je.includes(oe)||Ne.includes(oe))&&Z.push({id:R.id,name:R.name||"Unnamed Account",type:"Account",details:R.email||R.phone||"No contact info",route:"/group-manager/accounts"})}),Z.slice(0,10)}catch(oe){return console.error("Error in search:",oe),[]}},[A,_,E,z]),ee=oe=>{oe.route&&(e(oe.route),k(""))},V=h.useCallback(async()=>{C(!0),S(null);try{const[oe,Z,R,ve,X,je,Ne]=await Promise.all([ie.get("/leads/group-manager/getLeads").catch(he=>(console.error("Error fetching leads:",he),{data:[]})),ie.get("/deals/group-manager/fetch-all").catch(he=>(console.error("Error fetching deals:",he),{data:[]})),ie.get("/accounts/group-manager/fetch-all").catch(he=>(console.error("Error fetching accounts:",he),{data:[]})),ie.get("/tasks/all").catch(he=>(console.error("Error fetching tasks:",he),{data:[]})),ie.get("/meetings/group-manager/fetch-all").catch(he=>(console.error("Error fetching meetings:",he),{data:[]})),ie.get("/calls/group-manager/fetch-all").catch(he=>(console.error("Error fetching calls:",he),{data:[]})),ie.get("/logs/read-all").catch(he=>(console.error("Error fetching logs:",he),{data:[]}))]),Oe=Array.isArray(oe.data)?oe.data:[],Fe=Array.isArray(Z.data)?Z.data:[],me=Array.isArray(R.data)?R.data:[],Be=Array.isArray(ve.data)?ve.data:[],Pe=Array.isArray(X.data)?X.data:[],we=Array.isArray(je.data)?je.data:[],ne=Array.isArray(Ne.data)?Ne.data:[];console.log("=== RAW DEALS API RESPONSE ==="),console.log("Deals count:",Fe.length),Fe.length>0&&(console.log("First deal sample (raw):",JSON.stringify(Fe[0],null,2)),console.log("First deal keys:",Object.keys(Fe[0]))),T(Oe),I(Fe),$(me);const Le=Oe.filter(he=>he.status&&!["Lost","Converted"].includes(he.status)).length,pe=Be.filter(he=>!he.dueDate||he.status==="Completed"?!1:new Date(he.dueDate)<new Date).length;s({activeLeads:Le,totalDeals:Fe.length,activeAccounts:me.length,overdueTasks:pe});const le=[...Oe].sort((he,Me)=>new Date(Me.created_at||0)-new Date(he.created_at||0)).slice(0,5);i(le);const ge=[...Fe].sort((he,Me)=>new Date(Me.created_at||0)-new Date(he.created_at||0)).slice(0,5);o(ge);const fe=new Date,Te=[];we.forEach(he=>{const Me=he.due_date||he.call_time,re=(he.status||"").toUpperCase();if(Me){const Qe=new Date(Me);re==="COMPLETED"||re==="MISSED"||re==="NOT_HELD"||re==="HELD"||Te.push({type:"Call",title:he.subject||"Untitled Call",assignedTo:he.assigned_to||(he.call_assign_to?`${he.call_assign_to.first_name||""} ${he.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:Me,priority:(he.priority||"MEDIUM").toUpperCase(),id:he.id,activityType:"call",fullData:he})}}),Pe.forEach(he=>{const Me=he.dueDate||he.start_time,re=(he.status||"").toUpperCase();if(Me){const Qe=new Date(Me);re==="COMPLETED"||re==="CANCELLED"||re==="DONE"||Te.push({type:"Meeting",title:he.subject||he.activity||"Untitled Meeting",assignedTo:he.assignedTo||(he.meet_assign_to?`${he.meet_assign_to.first_name||""} ${he.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:Me,priority:(he.priority||"MEDIUM").toUpperCase(),id:he.id,activityType:"meeting",fullData:he})}});const Ye={HIGH:1,MEDIUM:2,LOW:3},Ae=Te.sort((he,Me)=>{const re=Ye[he.priority]||3,Qe=Ye[Me.priority]||3;if(re!==Qe)return re-Qe;const We=new Date(he.scheduledDate||0),dt=new Date(Me.scheduledDate||0);return We-dt}).slice(0,5);d(Ae),f(Fe),console.log("=== ALL DEALS DATA ==="),console.log("Total deals:",Fe.length);const Ie=Fe.filter(he=>(he.stage||"").toUpperCase()==="CLOSED_WON");console.log("CLOSED_WON deals:",Ie.length),Ie.length>0?(console.log("=== CLOSED_WON DEALS DETAILS ==="),Ie.forEach((he,Me)=>{let re=he.amount;re&&typeof re=="object"?re.toString?re=parseFloat(re.toString()):re=parseFloat(re):re=parseFloat(re)||0,console.log(`Deal ${Me+1}:`,{id:he.id,name:he.name,stage:he.stage,stage_upper:(he.stage||"").toUpperCase(),amount:he.amount,amount_parsed:re,amount_type:typeof he.amount,close_date:he.close_date,close_date_type:typeof he.close_date,close_date_value:he.close_date?new Date(he.close_date):null,has_close_date:!!he.close_date,has_amount:re>0,all_keys:Object.keys(he),full_deal:he})})):(console.log(" No CLOSED_WON deals found!"),console.log("All deal stages:",Fe.map(he=>he.stage))),w(Fe);const Je=[...ne].sort((he,Me)=>new Date(Me.timestamp||0)-new Date(he.timestamp||0));x(Je)}catch(oe){console.error("Error fetching dashboard data:",oe),S("Failed to load dashboard data. Please refresh the page.")}finally{C(!1)}},[]);h.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",console.log("TManagerDashboard mounted, fetching data..."),V(),B.current=setInterval(()=>{console.log("Auto-refreshing dashboard data..."),V(),O(new Date)},3e4),()=>{B.current&&clearInterval(B.current)}),[V]),h.useEffect(()=>{if(!t||!t.id)return;let oe=0;const Z=3;let R=null;const ve=()=>{const X=window.location.protocol==="https:"?"wss:":"ws:",je=window.location.hostname==="localhost"?"localhost:8000":window.location.host,Ne=`${X}//${je}/ws/notifications?user_id=${t.id}`;try{const Oe=new WebSocket(Ne);Q.current=Oe,Oe.onopen=()=>{console.log(" WebSocket connected for dashboard updates"),oe=0},Oe.onmessage=Fe=>{try{const me=JSON.parse(Fe.data);console.log(" Real-time notification received:",me),me.event&&["new_task","task_updated","new_lead","lead_updated","new_deal","deal_updated","new_account","account_updated","new_meeting","meeting_updated","new_call","call_updated"].includes(me.event)&&(console.log(" Refreshing dashboard due to:",me.event),V(),O(new Date))}catch(me){console.error("Error parsing WebSocket message:",me)}},Oe.onerror=Fe=>{oe===0&&console.warn(" WebSocket connection unavailable (this is optional)")},Oe.onclose=()=>{oe<Z&&(oe++,R=setTimeout(()=>{t&&t.id&&ve()},5e3))}}catch{console.warn(" WebSocket not available (optional feature)")}};return ve(),()=>{R&&clearTimeout(R),Q.current&&(Q.current.close(),Q.current=null)}},[t,V]);const de=[{icon:qX,title:"Active Leads",value:n.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/group-manager/leads")},{icon:H8e,title:"Total Deals",value:n.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/group-manager/deals")},{icon:G8e,title:"Active Account",value:n.activeAccounts,color:"text-green-600",bgColor:"bg-green-50",onClick:()=>e("/group-manager/accounts")},{icon:WX,title:"Overdue Tasks",value:n.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/group-manager/tasks")}];return console.log("TManagerDashboard rendering, loading:",b,"error:",N),a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[b&&a.jsx(zt,{}),a.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[N&&a.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:a.jsx("p",{className:"font-medium",children:N})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 mb-8",children:[a.jsxs("div",{className:"lg:col-span-9 flex flex-col space-y-4",children:[a.jsx(cBe,{searchQuery:A,onSearchChange:k,searchResults:F,onSearchResultClick:ee}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:de.map(oe=>a.jsx(mBe,{...oe,loading:b},oe.title))})]}),a.jsx("div",{className:"lg:col-span-3",children:a.jsx(uBe,{logs:p,loading:b})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsx(fBe,{revenueData:v,loading:b})}),a.jsx("div",{children:a.jsx(hBe,{pipelineData:u,loading:b})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx(rA,{title:"Latest Leads",children:r.length>0?r.map((oe,Z)=>a.jsx(gBe,{...oe},oe.id||Z)):a.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),a.jsx(rA,{title:"Latest Deals",children:b?a.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mb-2"}),a.jsx("div",{className:"text-sm text-gray-500",children:"Loading deals..."})]}):l.length>0?l.map((oe,Z)=>a.jsx(pBe,{...oe},oe.id||Z)):a.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),a.jsx(rA,{title:"Upcoming Activities",children:c.length>0?c.map((oe,Z)=>a.jsx(xBe,{...oe},oe.id||Z)):a.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})},iA=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Active"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Former"}],lA={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",parent_company:"",status:"PROSPECT",territory_id:"",assigned_to:""},wr=e=>e?e.toUpperCase():"",oA=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",bBe=e=>{switch(wr(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},vBe=e=>{switch(wr(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}};function wBe(){const e=vt();h.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[t,n]=h.useState(!1),[s,r]=h.useState(!1),[i,l]=h.useState(!1),[o,c]=h.useState(null),[d,u]=h.useState(null),[f,p]=h.useState(lA),[x,v]=h.useState(null),[w,b]=h.useState([]),[C,N]=h.useState(!1),[S,A]=h.useState([]),[k,_]=h.useState(null),[T,E]=h.useState([]),[I,z]=h.useState([]),[$,P]=h.useState("Filter by Status"),[O,B]=h.useState(""),[Q,F]=h.useState(null),[ee,V]=h.useState(!1),[de,oe]=h.useState(1),[Z,R]=h.useState(10),[ve,X]=h.useState("Overview"),[je,Ne]=h.useState(""),[Oe,Fe]=h.useState(!1),[me,Be]=h.useState({}),[Pe,we]=h.useState(null),ne=h.useCallback(async(W=null)=>{N(!0);try{const ae=await ie.get("/accounts/admin/fetch-all"),Ge=[...Array.isArray(ae.data)?ae.data:[]].sort((ue,se)=>{const He=ue?.created_at||ue?.updated_at||0,ht=se?.created_at||se?.updated_at||0;return new Date(ht)-new Date(He)});if(b(Ge),console.log("Fetch from backend: ",ae.data),W){const ue=Ge.find(se=>se.id===W);v(ue||null)}}catch(ae){console.error(ae),b([]),ae.response?.status===403?H.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):H.error("Failed to fetch accounts. Please try again later.")}finally{N(!1)}},[v]),Le=h.useCallback(async()=>{try{const W=await ie.get("/users/all");A(Array.isArray(W.data)?W.data:[])}catch(W){console.error(W),W.response?.status===403&&H.warn("Unable to load users for assignment (permission denied).")}},[]),pe=h.useCallback(async()=>{try{const W=await ie.get("/territories/fetch");E(Array.isArray(W.data)?W.data:[])}catch(W){console.error(W),W.response?.status===403&&H.warn("Unable to load territories (permission denied).")}},[]),le=h.useCallback(async()=>{try{const W=await ie.get("/accounts/admin/parent-companies");z(Array.isArray(W.data)?W.data:[])}catch(W){console.error(W),W.response?.status===403&&H.warn("Unable to load parent companies (permission denied).")}},[]),ge=h.useCallback(async W=>{try{const ae=await ie.get(`/activities/accounts/${W}`);console.log("Related activities: ",ae.data),Be(ae.data&&typeof ae.data=="object"?ae.data:{})}catch(ae){console.error(ae),ae.response?.status===404&&(console.warn("No activities found for this account."),Be({}))}},[]);h.useEffect(()=>{ne(),Le(),pe(),le()},[ne,Le,pe,le]),h.useEffect(()=>{x&&Ne(wr(x.status)||"PROSPECT")},[x]);const fe=w.length,Te=h.useMemo(()=>w.filter(W=>W.status?.toLowerCase()==="customer").length,[w]),Ye=h.useMemo(()=>w.filter(W=>W.status?.toLowerCase()==="prospect").length,[w]),Ae=h.useMemo(()=>w.filter(W=>W.status?.toLowerCase()==="partner").length,[w]),Ie=h.useMemo(()=>w.filter(W=>W.status?.toLowerCase()==="active").length,[w]),Je=h.useMemo(()=>w.filter(W=>W.status?.toLowerCase()==="inactive").length,[w]),he=h.useMemo(()=>w.filter(W=>W.status?.toLowerCase()==="former").length,[w]),Me=h.useMemo(()=>[{title:"Total",value:fe,icon:La,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:Te,icon:gl,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:Ye,icon:Ba,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:Ae,icon:Zt,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:Ie,icon:gl,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:Je,icon:pl,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:he,icon:pl,color:"text-orange-600",bgColor:"bg-orange-100"}],[fe,Te,Ye,Ae,Ie,Je,he]),re=h.useMemo(()=>{const W=O.trim().toLowerCase(),ae=$.trim().toUpperCase();return w.filter($e=>{const Ge=[$e?.name,$e?.website,$e?.industry,$e?.territory?.name,$e?.phone_number],ue=W===""||Ge.some(He=>He==null?!1:He.toString().toLowerCase().includes(W)),se=ae==="FILTER BY STATUS"||wr($e.status)===ae;return ue&&se})},[w,O,$]),Qe=Math.max(1,Math.ceil(re.length/Z)||1);h.useEffect(()=>{oe(1)},[O,$,Z]),h.useEffect(()=>{oe(W=>{const ae=Math.max(1,Math.ceil(re.length/Z)||1);return W>ae?ae:W})},[re.length,Z]);const We=h.useMemo(()=>{const W=(de-1)*Z;return re.slice(W,W+Z)},[re,de,Z]);re.length===0||(de-1)*Z+1,Math.min(de*Z,re.length);const dt=()=>oe(W=>Math.max(W-1,1)),ze=()=>oe(W=>Math.min(W+1,Qe)),ce=W=>{v(W),X("Overview"),Ne(wr(W?.status)||"PROSPECT")},ye=()=>v(null),Ue=W=>{W.target.id==="accountModalBackdrop"&&!ee&&ye()},et=()=>{n(!1),r(!1),u(null),p(lA),l(!1),_(null)},lt=W=>{W.target.id==="modalBackdrop"&&et()},Ee=W=>W?new Date(W).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",tt=W=>{const{name:ae,value:$e}=W.target;p(Ge=>({...Ge,[ae]:$e}))},be=()=>{p(lA),r(!1),u(null),n(!0)},Xe=W=>{v(null),console.log("edit: ",W),W.assigned_accs?_(W.assigned_accs):_(null),p({name:W.name||"",website:W.website||"",phone_number:W.phone_number||"",billing_address:W.billing_address||"",shipping_address:W.shipping_address||"",industry:W.industry||"",status:wr(W.status)||"PROSPECT",territory_id:W.territory?.id?String(W.territory.id):"",assigned_to:W.assigned_accs?.id?String(W.assigned_accs.id):""}),r(!0),u(W.id),n(!0)},M=W=>{W&&F({title:"Delete Account",message:a.jsxs("span",{children:["Are you sure you want to permanently delete the account"," ",a.jsx("span",{className:"font-semibold",children:W.name}),"? This action cannot be undone."]}),confirmLabel:"Delete Account",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:W.id,name:W.name}})},U=async()=>{if(!Q?.action){F(null);return}const{action:W}=Q,{type:ae,payload:$e,targetId:Ge,name:ue}=W;V(!0);try{if(ae==="create"){l(!0);const se=await ie.post("/accounts/admin",$e);le(),H.success(`Account "${ue}" created successfully.`);const He=x?.id||null;et(),await ne(He),!x&&se.data?.id}else if(ae==="update"){if(!Ge)throw new Error("Missing account identifier for update.");l(!0),await ie.put(`/accounts/admin/${Ge}`,$e),H.success(`Account "${ue}" updated successfully.`);const se=x?.id&&x.id===Ge?Ge:null;et(),await ne(se),x?.id===Ge&&v(null)}else if(ae==="delete"){if(!Ge)throw new Error("Missing account identifier for deletion.");const se=x?.id;c(Ge),await ie.delete(`/accounts/admin/${Ge}`),H.success(`Account "${ue}" deleted successfully.`),await ne(se&&se!==Ge?se:null),se===Ge&&v(null)}}catch(se){console.error(se);const He=ae==="create"?"Failed to create account. Please review the details and try again.":ae==="update"?"Failed to update account. Please review the details and try again.":"Failed to delete account. Please try again.",ht=se.response?.data?.detail||He;H.error(ht),(ae==="create"||ae==="update")&&l(!1),ae==="delete"&&c(null)}finally{(ae==="create"||ae==="update")&&l(!1),ae==="delete"&&c(null),V(!1),F(null)}},Y=()=>{ee||F(null)},te=async()=>{if(!x||!je)return;const W=wr(je),ae=wr(x.status);if(W!==ae){Fe(!0);try{await ie.put(`/accounts/admin/${x.id}`,{status:W}),H.success(`Account status updated to ${oA(W)}`),b($e=>$e.map(Ge=>Ge.id===x.id?{...Ge,status:W}:Ge)),v(null)}catch($e){console.error($e);const Ge=$e.response?.data?.detail||"Failed to update account status. Please try again.";H.error(Ge)}finally{Fe(!1)}}},[K,Se]=h.useState(!1),G=W=>{W.preventDefault(),Se(!0);const ae=f.name.trim();if(!ae){H.error("Account name is required.");return}if(!f.assigned_to){H.error("Assigned To is required.");return}const Ge={name:ae,website:f.website?.trim()||null,phone_number:f.phone_number?.trim()||null,billing_address:f.billing_address?.trim()||null,shipping_address:f.shipping_address?.trim()||null,industry:f.industry?.trim()||null,parent_company:f.parent_company?.trim()||null,status:f.status||"PROSPECT",territory_id:f.territory_id?Number(f.territory_id):null,assigned_to:f.assigned_to?Number(f.assigned_to):null},ue=s&&d?"update":"create";F({title:ue==="create"?"Confirm New Account":"Confirm Update",message:ue==="create"?a.jsxs("span",{children:["Are you sure you want to create the account"," ",a.jsx("span",{className:"font-semibold",children:ae}),"?"]}):a.jsxs("span",{children:["Save changes to the account"," ",a.jsx("span",{className:"font-semibold",children:ae}),"?"]}),confirmLabel:ue==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:ue,payload:Ge,targetId:d||null,name:ae}})},J=[{label:"Filter by Status",value:"Filter by Status"},...iA.map(W=>({label:W.label,value:W.value}))],De=Q?.action?.type==="delete"?Q.action.targetId:null,Ve=x&&(o===x.id||De===x.id),ft=x&&o===x.id,bt=x?bBe(x.status):"",jt=x?a.jsx("div",{id:"accountModalBackdrop",onClick:Ue,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:W=>W.stopPropagation(),children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),a.jsx("button",{onClick:ye,className:"text-gray-400 hover:text-white cursor-pointer",children:a.jsx(Ha,{size:25})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:x.name}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${bt}`,children:oA(x.status)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Xe(x),disabled:Q?.action?.type==="update"&&Q.action.targetId===x.id,children:[a.jsx(nn,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>M(x),disabled:!!Ve,children:ft?"Deleting...":a.jsxs(a.Fragment,{children:[a.jsx(Wt,{className:"mr-2"}),"Delete"]})})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(W=>a.jsx("button",{onClick:()=>X(W),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${ve===W?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:W},W))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[ve==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Website:"}),a.jsx("p",{children:x.website?a.jsx("a",{href:x.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:x.website}):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Industry:"}),a.jsx("p",{children:x.industry||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Parent Company:"}),a.jsx("p",{children:x.parent_company||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Territory:"}),a.jsx("p",{children:x.territory?.name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Phone Number:"}),a.jsx("p",{children:x.phone_number||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Billing Address:"}),a.jsx("p",{children:x.billing_address||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),a.jsx("p",{children:x.shipping_address||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:x.assigned_accs?`${x.assigned_accs.first_name} ${x.assigned_accs.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:x.acc_creator?`${x.acc_creator.first_name} ${x.acc_creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:Ee(x.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:Ee(x.updated_at)||"N/A"})]})]})}),ve==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:w.notes||"No notes available."})]})]}),ve==="Activities"&&a.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[me.tasks&&me.tasks.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>we(Pe==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Gt,{className:"text-blue-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",me.tasks.length,")"]})]}),Pe==="tasks"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),Pe==="tasks"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:me.tasks.map((W,ae)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/tasks",{state:{taskID:W.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-blue-600 mt-1",children:a.jsx(Gt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:W.subject||W.title||"Task"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:W.description||"No description"}),W.assigned_to&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",W.assigned_to.first_name," ",W.assigned_to.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ee(W.due_date||W.created_at)})]},`task-${ae}`))})]}),me.meetings&&me.meetings.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>we(Pe==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_t,{className:"text-green-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",me.meetings.length,")"]})]}),Pe==="meetings"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),Pe==="meetings"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:me.meetings.map((W,ae)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/meetings",{state:{meetingID:W.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-green-600 mt-1",children:a.jsx(_t,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:W.subject||W.title||"Meeting"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:W.description||W.location||"No description"}),W.host&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",W.host.first_name," ",W.host.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ee(W.start_time||W.created_at)})]},`meeting-${ae}`))})]}),me.calls&&me.calls.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>we(Pe==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Et,{className:"text-purple-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",me.calls.length,")"]})]}),Pe==="calls"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),Pe==="calls"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:me.calls.map((W,ae)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/calls",{state:{callID:W.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-purple-600 mt-1",children:a.jsx(Et,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:W.subject||W.title||"Call"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:W.direction||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ee(W.call_time||W.created_at)})]},`call-${ae}`))})]}),me.contacts&&me.contacts.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>we(Pe==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Zt,{className:"text-teal-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",me.contacts.length,")"]})]}),Pe==="contacts"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),Pe==="contacts"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:me.contacts.map((W,ae)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/contacts",{state:{contactID:W.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-teal-600 mt-1",children:a.jsx(Zt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[W.first_name?`${W.first_name} `:"",W.last_name]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:W.title||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ee(W.created_at)})]},`contact-${ae}`))})]}),me.deals&&me.deals.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>we(Pe==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Kt,{className:"text-indigo-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",me.deals.length,")"]})]}),Pe==="deals"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),Pe==="deals"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:me.deals.map((W,ae)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/deals",{state:{dealID:W.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-indigo-600 mt-1",children:a.jsx(Kt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[W.deal_id?W.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",W.name||W.title||"Deal"]}),a.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:W.stage||W.description||"No description"})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ee(W.close_date||W.created_at)})]},`deal-${ae}`))})]}),me.quotes&&me.quotes.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>we(Pe==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ga,{className:"text-orange-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",me.quotes.length,")"]})]}),Pe==="quotes"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),Pe==="quotes"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:me.quotes.map((W,ae)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/quotes",{state:{quoteID:W.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-orange-600 mt-1",children:a.jsx(ga,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(W.quote_id?W.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:W.status||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ee(W.presented_date)||""})]},`quote-${ae}`))})]}),(!me||(!me.tasks||me.tasks.length===0)&&(!me.meetings||me.meetings.length===0)&&(!me.calls||me.calls.length===0)&&(!me.quotes||me.quotes.length===0)&&(!me.deals||me.deals.length===0)&&(!me.contacts||me.contacts.length===0))&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No related activities found for this account."})})]})]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/group-manager/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Account"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/group-manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Account"}}}),children:[a.jsx(_t,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/group-manager/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Account"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Gt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:je||wr(x?.status)||"PROSPECT",onChange:W=>Ne(W.target.value),children:iA.map(W=>a.jsx("option",{value:W.value,children:W.label},W.value))}),a.jsx("button",{onClick:te,disabled:Oe||!je||wr(je)===wr(x?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Oe||!je||wr(je)===wr(x?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:Oe?"Updating...":"Update"})]})]})]})]})]})}):null,ke=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[C&&a.jsx(zt,{message:"Loading accounts..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(La,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{be(),Se(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(da,{className:"mr-2"})," Add Account"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Me.map(W=>a.jsx(NBe,{...W},W.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search accounts",value:O,onChange:W=>B(W.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:$,onChange:W=>P(W.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:J.map(W=>a.jsx("option",{value:W.value,children:W.label},W.value))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4",children:"Industry"}),a.jsx("th",{className:"py-3 px-4",children:"Territory"}),a.jsx("th",{className:"py-3 px-4",children:"Phone"})]})}),a.jsx("tbody",{children:C?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"Loading accounts..."})}):re.length>0?We.map(W=>a.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>{ce(W),ge(W.id)},children:[a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:W.name}),a.jsx("div",{className:"text-gray-500 text-xs break-all",children:W.website||"--"})]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${vBe(W.status)}`,children:oA(W.status)})}),a.jsx("td",{className:"py-3 px-4 text-sm",children:W.industry||"--"}),a.jsx("td",{className:"py-3 px-4 text-sm",children:W.territory?.name||"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[a.jsx(Et,{className:"text-gray-500"}),a.jsx("span",{children:W.phone_number||"--"})]})})]},W.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"No accounts found."})})})]})}),a.jsx(Jt,{className:"mt-4",totalItems:re.length,pageSize:Z,currentPage:de,onPrev:dt,onNext:ze,onPageSizeChange:R,label:"accounts"})]}),pt=t?a.jsx("div",{id:"modalBackdrop",onClick:lt,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:W=>W.stopPropagation(),children:[a.jsx("button",{onClick:()=>{et(),Se(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:i||ee,children:a.jsx(Vt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Account":"Add New Account"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:G,noValidate:!0,children:[a.jsx("div",{className:"md:col-span-2",children:a.jsx(Mm,{label:"Name",name:"name",value:f.name,onChange:tt,placeholder:"Company name",required:!0,isSubmitted:K})}),a.jsx(f8,{label:"Parent Company",value:f.parent_company,onChange:W=>{p(ae=>({...ae,parent_company:W}))},items:I.map(W=>({id:W,name:W})),getLabel:W=>W?.name||"",placeholder:"Select or type parent company...",disabled:i,allowFreeText:!0}),a.jsx(Mm,{label:"Website",name:"website",value:f.website,onChange:tt,placeholder:"https://example.com",disabled:i}),a.jsx(Mm,{label:"Phone Number",name:"phone_number",value:f.phone_number,onChange:tt,placeholder:"09xx xxx xxxx",type:"tel",disabled:i}),a.jsx(Mm,{label:"Industry",name:"industry",value:f.industry,onChange:tt,placeholder:"Industry",disabled:i}),a.jsx(Mm,{label:"Billing Address",name:"billing_address",value:f.billing_address,onChange:tt,placeholder:"Billing address",disabled:i}),a.jsx(Mm,{label:"Shipping Address",name:"shipping_address",value:f.shipping_address,onChange:tt,placeholder:"Shipping address",disabled:i}),a.jsx(m8,{label:"Status",name:"status",value:f.status,onChange:tt,options:[{value:"",label:"Select status"},...iA],required:!0,disabled:i}),a.jsx(f8,{label:"Assigned To",value:f.assigned_to,onChange:W=>{const ae=S.find(Ge=>String(Ge.id)===String(W));_(ae);let $e=null;ae&&ae.assigned_territory&&ae.assigned_territory.length===1&&($e=ae.assigned_territory[0].id),p(Ge=>({...Ge,assigned_to:W,territory_id:$e}))},items:S||[],getLabel:W=>`${W?.first_name??""} ${W?.last_name??""} (${W?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:K,disabled:i||S.length===0}),a.jsx(m8,{label:"Territory",name:"territory_id",value:f.territory_id||"",onChange:tt,options:[{value:"",label:k?k.assigned_territory&&k.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"},...k&&k.assigned_territory&&k.assigned_territory.map(W=>({value:String(W.id),label:W.name}))||[]],disabled:i||!k||!k.assigned_territory||k.assigned_territory.length===0}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[a.jsx("button",{type:"button",onClick:()=>{et(),Se(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i||ee,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i||ee,children:i?"Saving...":s?"Update Account":"Save Account"})]})]})]})}):null,_e=Q?a.jsx(CBe,{open:!0,title:Q.title,message:Q.message,confirmLabel:Q.confirmLabel,cancelLabel:Q.cancelLabel,variant:Q.variant,onConfirm:U,onCancel:Y,loading:ee}):null;return a.jsxs(a.Fragment,{children:[ke,jt,pt,_e]})}function NBe({icon:e,title:t,value:n,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function Mm({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,className:c="",isSubmitted:d=!1}){const u=d&&!n?.trim();return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function m8({label:e,name:t,value:n,onChange:s,options:r,required:i=!1,disabled:l=!1}){return a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:n??"",onChange:s,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(o=>a.jsx("option",{value:o.value,children:o.label},o.value))})]})}function f8({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",required:c=!1,isSubmitted:d=!1,allowFreeText:u=!1}){const f=d&&c&&!n;return a.jsxs("div",{className:o,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(jBe,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:l,hasError:f,allowFreeText:u})]})}function jBe({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,hasError:o=!1,allowFreeText:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),v=e.find(C=>String(C.id)===String(t)),w=v?s(v):t,b=h.useMemo(()=>{const C=f.trim().toLowerCase();return(C?e.filter(S=>(s(S)||"").toLowerCase().includes(C)):e).slice(0,l)},[e,f,s,l]);return h.useEffect(()=>{const C=N=>{x.current&&!x.current.contains(N.target)&&u(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]),h.useEffect(()=>{d||p("")},[d]),a.jsxs("div",{ref:x,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:d?f:w,placeholder:r,onFocus:()=>!i&&u(!0),onChange:C=>{p(C.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${o?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsxs("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:[c&&f.trim()&&!b.some(C=>s(C).toLowerCase()===f.trim().toLowerCase())&&a.jsxs("button",{type:"button",onClick:()=>{n(f.trim()),u(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-green-50 bg-blue-50 font-medium text-blue-700",children:['+ Add "',f.trim(),'" as new parent company']}),b.length>0?b.map(C=>{const N=String(C.id),S=s(C),A=String(t)===N;return a.jsx("button",{type:"button",onClick:()=>{n(N),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${A?"bg-blue-50":""}`,children:S||"--"},N)}):!c||!f.trim()?a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"}):null]}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function CBe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}const cA={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},Im=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),Yi=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function SBe(){const e=vt(),t=Yt();h.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[n,s]=h.useState([]),[r,i]=h.useState(!1),[l,o]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState(null),[p,x]=h.useState(!1),[v,w]=h.useState(!1),[b,C]=h.useState(!1),[N,S]=h.useState(null),[A,k]=h.useState(!1),[_,T]=h.useState(null),[E,I]=h.useState(cA),[z,$]=h.useState(""),[P,O]=h.useState("Filter by Accounts"),[B,Q]=h.useState(null),[F,ee]=h.useState("Overview"),[V,de]=h.useState(1),[oe,Z]=h.useState(10),[R,ve]=h.useState({}),[X,je]=h.useState(null),[Ne,Oe]=h.useState(null);h.useEffect(()=>{const M=t.state?.contactID;M&&(Oe(M),e(t.pathname,{replace:!0,state:{}}))},[t,e]),h.useEffect(()=>{if(Ne&&n.length>0&&!r){const M=n.find(U=>U.id===Ne);M?f(M):H.error("Contact not found."),Oe(null)}},[Ne,n,r]);const Fe=h.useCallback(async(M=null)=>{i(!0);try{const U=await ie.get("/contacts/admin/fetch-all"),te=[...Array.isArray(U.data)?U.data:[]].sort((K,Se)=>{const G=K?.created_at||K?.updated_at||0,J=Se?.created_at||Se?.updated_at||0;return new Date(J)-new Date(G)});if(s(te),M){const K=te.find(Se=>Se.id===M);f(K||null)}}catch(U){console.error(U),s([]),U.response?.status===403?H.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):H.error("Failed to fetch contacts. Please try again later.")}finally{i(!1)}},[f]),me=h.useCallback(async()=>{try{const M=await ie.get("/accounts/admin/fetch-all"),Y=[...Array.isArray(M.data)?M.data:[]].sort((te,K)=>(te?.name||"").localeCompare(K?.name||""));o(Y)}catch(M){console.error(M),o([]),M.response?.status===403&&H.warn("Unable to load accounts (permission denied).")}},[]),Be=h.useCallback(async()=>{try{const M=await ie.get("/users/all"),Y=[...Array.isArray(M.data)?M.data:[]].sort((te,K)=>Im(te).localeCompare(Im(K)));d(Y)}catch(M){console.error(M),d([]),M.response?.status===403&&H.warn("Unable to load users for assignment (permission denied).")}},[]),Pe=h.useCallback(async M=>{try{const U=await ie.get(`/activities/contact/${M}`);ve(U.data&&typeof U.data=="object"?U.data:{})}catch(U){console.error(U),U.response?.status===404&&(console.warn("No activities found for this account."),ve({}))}},[]);h.useEffect(()=>{Fe(),me(),Be()},[Fe,me,Be]);const we=h.useMemo(()=>{const M=new Map;l.forEach(Y=>{Y?.id&&Y?.name&&M.set(String(Y.id),Y.name)}),n.forEach(Y=>{Y?.account_id&&Y?.account?.name&&M.set(String(Y.account_id),Y.account.name)});const U=Array.from(M.entries()).sort((Y,te)=>Y[1].localeCompare(te[1])).map(([Y,te])=>({value:Y,label:te}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...U]},[l,n]),ne=h.useMemo(()=>{const M=z.trim().toLowerCase(),U=P.trim();return n.filter(Y=>{const te=[Y?.first_name,Y?.last_name,Y?.email,Y?.title,Y?.department,Y?.account?.name,Y?.account?.status,Y?.work_phone,Y?.mobile_phone_1,Y?.mobile_phone_2,Y?.assigned_contact?.first_name,Y?.assigned_contact?.last_name,Y?.contact_creator?.first_name,Y?.contact_creator?.last_name,Y?.notes,Yi(Y?.created_at),Yi(Y?.updated_at)],K=M===""||te.some(G=>G==null?!1:G.toString().toLowerCase().includes(M)),Se=U==="Filter by Accounts"||String(Y.account_id)===U;return K&&Se})},[n,z,P]),Le=Math.max(1,Math.ceil(ne.length/oe)||1);h.useEffect(()=>{de(1)},[z,P,oe]),h.useEffect(()=>{de(M=>{const U=Math.max(1,Math.ceil(ne.length/oe)||1);return M>U?U:M})},[ne.length,oe]);const pe=h.useMemo(()=>{const M=(V-1)*oe;return ne.slice(M,M+oe)},[ne,V,oe]),le=()=>de(M=>Math.max(M-1,1)),ge=()=>de(M=>Math.min(M+1,Le)),fe=h.useMemo(()=>{if(!v||!_)return l;const M=n.find(Y=>Y.id===_);return!M||!M.account||l.some(Y=>Y.id===M.account.id)?l:[...l,M.account]},[l,v,_,n]),Te=h.useCallback(()=>{x(!1),w(!1),T(null),I(cA),C(!1),re(!1)},[]),Ye=M=>{M.target.id==="modalBackdrop"&&!b&&!A&&Te()},Ae=M=>{const{name:U,value:Y}=M.target;I(te=>({...te,[U]:Y}))},Ie=()=>{I(cA),w(!1),T(null),x(!0)},Je=async M=>{if(!M)return;const U=await ie.get(`/accounts/get/${M.account_id}`);I({first_name:M.first_name||"",last_name:M.last_name||"",account_id:U.data.id?U.data.id:"",title:M.title||"",department:M.department||"",email:M.email||"",work_phone:M.work_phone||"",mobile_phone_1:M.mobile_phone_1||"",mobile_phone_2:M.mobile_phone_2||"",notes:M.notes||"",assigned_to:M.assigned_to?String(M.assigned_to):""}),w(!0),T(M.id),x(!0),f(null)},he=M=>{if(!M)return;const U=Im(M)||"this contact";S({title:"Delete Contact",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:U}),"? This action cannot be undone."]}),confirmLabel:"Delete Contact",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:M.id,name:U}})},[Me,re]=h.useState(!1),Qe=M=>{M.preventDefault(),re(!0);const U=E.first_name.trim(),Y=E.last_name.trim();if(!U||!Y){H.error("First name and last name are required.");return}if(!E.account_id){H.error("Account is required.");return}if(!E.assigned_to){H.error("Assigned To is required.");return}const K=E.email?.trim();if(!K){H.error("Email is required.");return}if(!K.includes("@")){H.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(K)){H.error("Please enter a valid email address.");return}const G={first_name:U,last_name:Y,account_id:Number(E.account_id),title:E.title?.trim()||null,department:E.department?.trim()||null,email:E.email?.trim().toLowerCase()||null,work_phone:E.work_phone?.trim()||null,mobile_phone_1:E.mobile_phone_1?.trim()||null,mobile_phone_2:E.mobile_phone_2?.trim()||null,notes:E.notes?.trim()||null,assigned_to:E.assigned_to?Number(E.assigned_to):null},J=v&&_?"update":"create",De=`${U} ${Y}`.trim();S({title:J==="create"?"Confirm New Contact":"Confirm Update",message:J==="create"?a.jsxs("span",{children:["Are you sure you want to add"," ",a.jsx("span",{className:"font-semibold",children:De})," to your contacts?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:De}),"?"]}),confirmLabel:J==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:J,payload:G,targetId:_||null,name:De}})},We=async()=>{if(!N?.action){S(null);return}const{action:M}=N,{type:U,payload:Y,targetId:te,name:K}=M;k(!0);try{if(U==="create"){C(!0),await ie.post("/contacts/admin",Y),H.success(`Contact "${K}" created successfully.`);const Se=u?.id||null;Te(),await Fe(Se)}else if(U==="update"){if(!te)throw new Error("Missing contact identifier for update.");C(!0),await ie.put(`/contacts/admin/${te}`,Y),H.success(`Contact "${K}" updated successfully.`);const Se=u?.id&&u.id===te?te:u?.id||null;Te(),await Fe(Se),u?.id===te&&f(null)}else if(U==="delete"){if(!te)throw new Error("Missing contact identifier for deletion.");const Se=u?.id;Q(te),await ie.delete(`/contacts/admin/${te}`),H.success(`Contact "${K}" deleted successfully.`),await Fe(Se&&Se!==te?Se:null),Se===te&&f(null)}}catch(Se){console.error(Se);const G=U==="create"?"Failed to create contact. Please review the details and try again.":U==="update"?"Failed to update contact. Please review the details and try again.":"Failed to delete contact. Please try again.",J=Se.response?.data?.detail||G;H.error(J)}finally{(U==="create"||U==="update")&&C(!1),U==="delete"&&Q(null),k(!1),S(null)}},dt=()=>{A||S(null)},ze=M=>{f(M),ee("Overview")},ce=()=>f(null),ye=M=>{M.target.id==="contactModalBackdrop"&&!A&&ce()},Ue=N?.action?.type==="delete"?N.action.targetId:null,et=u&&(B===u.id||Ue===u.id),lt=u&&B===u.id,Ee=u?a.jsx("div",{id:"contactModalBackdrop",onClick:ye,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:M=>M.stopPropagation(),children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),a.jsx("button",{onClick:ce,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:a.jsx(Ha,{size:25})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:Im(u)||"Unnamed contact"})}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Je(u),disabled:A||N?.action?.type==="update"&&N.action.targetId===u.id,children:[a.jsx(nn,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>he(u),disabled:!!et,children:lt?"Deleting...":a.jsxs(a.Fragment,{children:[a.jsx(Wt,{className:"mr-2"}),"Delete"]})})]})]}),a.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:a.jsx("p",{className:"text-sm text-gray-500",children:u.account?.name||"No associated account"})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(M=>a.jsx("button",{onClick:()=>ee(M),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${F===M?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:M},M))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[F==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Contact Name:"}),a.jsx("p",{children:Im(u)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Title:"}),a.jsx("p",{children:u.title||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:u.email?a.jsx("a",{href:`mailto:${u.email}`,className:"text-blue-600 hover:underline break-all",children:u.email}):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Department:"}),a.jsx("p",{children:u.department||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Work Phone:"}),a.jsx("p",{children:u.work_phone||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),a.jsx("p",{children:u.mobile_phone_1||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),a.jsx("p",{children:u.mobile_phone_2||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:u.assigned_contact?`${u.assigned_contact.first_name} ${u.assigned_contact.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:u.contact_creator?`${u.contact_creator.first_name} ${u.contact_creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:Yi(u.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:Yi(u.updated_at)||"N/A"})]})]})}),F==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:u.notes||"No notes available."})]})]}),F==="Activities"&&a.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[R.tasks&&R.tasks.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>je(X==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Gt,{className:"text-blue-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",R.tasks.length,")"]})]}),X==="tasks"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),X==="tasks"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:R.tasks.map((M,U)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/tasks",{state:{taskID:M.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-blue-600 mt-1",children:a.jsx(Gt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:M.subject||M.title||"Task"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:M.description||"No description"}),M.assigned_to&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",M.assigned_to.first_name," ",M.assigned_to.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Yi(M.due_date||M.created_at)})]},`task-${U}`))})]}),R.meetings&&R.meetings.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>je(X==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_t,{className:"text-green-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",R.meetings.length,")"]})]}),X==="meetings"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),X==="meetings"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:R.meetings.map((M,U)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/meetings",{state:{meetingID:M.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-green-600 mt-1",children:a.jsx(_t,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:M.subject||M.title||"Meeting"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:M.description||M.location||"No description"}),M.host&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",M.host.first_name," ",M.host.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Yi(M.start_time||M.created_at)})]},`meeting-${U}`))})]}),R.calls&&R.calls.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>je(X==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Et,{className:"text-purple-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",R.calls.length,")"]})]}),X==="calls"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),X==="calls"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:R.calls.map((M,U)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/calls",{state:{callID:M.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-purple-600 mt-1",children:a.jsx(Et,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:M.subject||M.title||"Call"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:M.direction||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Yi(M.call_time||M.created_at)})]},`call-${U}`))})]}),R.deals&&R.deals.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>je(X==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Kt,{className:"text-indigo-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",R.deals.length,")"]})]}),X==="deals"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),X==="deals"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:R.deals.map((M,U)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/deals",{state:{dealID:M.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-indigo-600 mt-1",children:a.jsx(Kt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[M.deal_id?M.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",M.name||M.title||"Deal"]}),a.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:M.stage||M.description||"No description"})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Yi(M.close_date||M.created_at)})]},`deal-${U}`))})]}),R.quotes&&R.quotes.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>je(X==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ga,{className:"text-orange-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",R.quotes.length,")"]})]}),X==="quotes"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),X==="quotes"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:R.quotes.map((M,U)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/quotes",{state:{quoteID:M.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-orange-600 mt-1",children:a.jsx(ga,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(M.quote_id?M.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:M.status||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Yi(M.presented_date)||""})]},`quote-${U}`))})]}),(!R||(!R.tasks||R.tasks.length===0)&&(!R.meetings||R.meetings.length===0)&&(!R.calls||R.calls.length===0)&&(!R.quotes||R.quotes.length===0)&&(!R.deals||R.deals.length===0)&&(!R.contacts||R.contacts.length===0))&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No related activities found for this account."})})]})]})]}),a.jsx("div",{className:"flex flex-col gap-4",children:a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Contact"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!u?.email){alert("No email address available");return}const M=encodeURIComponent(u.email),U=encodeURIComponent(""),Y=encodeURIComponent(""),te=`https://mail.google.com/mail/?view=cm&fs=1&to=${M}&su=${U}&body=${Y}`;window.open(te,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Ka,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Contact"}}}),children:[a.jsx(_t,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Contact"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Gt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,tt=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&a.jsx(zt,{message:"Loading contacts..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(La,{className:"mr-2 text-blue-600"})," Contacts Management"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{Ie(),re(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(da,{className:"mr-2"})," Add Contact"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search contacts",value:z,onChange:M=>$(M.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:P,onChange:M=>O(M.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:we.map(M=>a.jsx("option",{value:M.value,children:M.label},M.value??M.label))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),a.jsx("th",{className:"py-3 px-4",children:"Department"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Created"})]})}),a.jsx("tbody",{children:r?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"Loading contacts..."})}):ne.length>0?pe.map(M=>{const U=[{Icon:Ka,value:M.email,key:"email"},{Icon:Et,value:M.work_phone,key:"work_phone"},{Icon:zc,value:M.mobile_phone_1,key:"mobile_phone_1"},{Icon:zc,value:M.mobile_phone_2,key:"mobile_phone_2"}].filter(Y=>!!Y.value);return a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>{ze(M),Pe(M.id)},children:[a.jsxs("td",{className:"py-3 px-4 align-top",children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:Im(M)||"--"}),a.jsx("div",{className:"text-xs text-gray-500",children:M.title||"No title"})]}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[a.jsx(ix,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{className:"break-words",children:M.account?.name||"--"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",children:U.length>0?a.jsx("div",{className:"space-y-1 text-gray-700",children:U.map(({Icon:Y,value:te,key:K})=>{const Se=wt.createElement(Y,{className:"text-gray-500 flex-shrink-0"});return a.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[Se,a.jsx("span",{children:te})]},K)})}):a.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[a.jsx(Kt,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{children:M.department||"--"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[a.jsx(Zt,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{children:M.assigned_contact?`${M.assigned_contact.first_name} ${M.assigned_contact.last_name}`:"Unassigned"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[a.jsx(_t,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{className:"text-xs",children:Yi(M.created_at)||"--"})]})})]},M.id)}):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"No contacts found."})})})]})}),a.jsx(Jt,{className:"mt-4",totalItems:ne.length,pageSize:oe,currentPage:V,onPrev:le,onNext:ge,onPageSizeChange:Z,label:"contacts"})]}),be=p?a.jsx("div",{id:"modalBackdrop",onClick:Ye,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:M=>M.stopPropagation(),children:[a.jsx("button",{onClick:()=>{Te(),re(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:b||A,children:a.jsx(Vt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:v?"Edit Contact":"Add New Contact"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Qe,noValidate:!0,children:[a.jsx(vc,{label:"First Name",name:"first_name",value:E.first_name,onChange:Ae,placeholder:"First name",required:!0,isSubmitted:Me}),a.jsx(vc,{label:"Last Name",name:"last_name",value:E.last_name,onChange:Ae,placeholder:"Last name",required:!0,isSubmitted:Me}),a.jsx(h8,{label:"Account",value:E.account_id,onChange:M=>I(U=>({...U,account_id:M})),items:v?fe:l||[],getLabel:M=>M?.name??"",placeholder:"Search account...",disabled:b||(v?fe.length===0:l.length===0),required:!0,isSubmitted:Me}),a.jsx(h8,{label:"Assigned To",value:E.assigned_to,onChange:M=>I(U=>({...U,assigned_to:M})),items:c||[],getLabel:M=>`${M?.first_name??""} ${M?.last_name??""} (${M?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:Me,disabled:b||c.length===0}),a.jsx(vc,{label:"Title",name:"title",value:E.title,onChange:Ae,placeholder:"Job title",disabled:b}),a.jsx(vc,{label:"Department",name:"department",value:E.department,onChange:Ae,placeholder:"Department",disabled:b}),a.jsx(vc,{label:"Email",name:"email",type:"email",value:E.email,onChange:Ae,placeholder:"example@email.com",required:!0,isSubmitted:Me}),a.jsx(vc,{label:"Work Phone",name:"work_phone",value:E.work_phone,onChange:Ae,placeholder:"09xx xxx xxxx",disabled:b}),a.jsx(vc,{label:"Mobile Phone 1",name:"mobile_phone_1",value:E.mobile_phone_1,onChange:Ae,placeholder:"09xx xxx xxxx",disabled:b}),a.jsx(vc,{label:"Mobile Phone 2",name:"mobile_phone_2",value:E.mobile_phone_2,onChange:Ae,placeholder:"09xx xxx xxxx",disabled:b}),a.jsx(ABe,{label:"Notes",name:"notes",value:E.notes,onChange:Ae,placeholder:"Additional details...",rows:3,disabled:b,className:"md:col-span-2"}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:()=>{Te(),re(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:b||A,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:b||A,children:b?"Saving...":v?"Update Contact":"Save Contact"})]})]})]})}):null,Xe=N?a.jsx(EBe,{open:!0,title:N.title,message:N.message,confirmLabel:N.confirmLabel,cancelLabel:N.cancelLabel,variant:N.variant,onConfirm:We,onCancel:dt,loading:A}):null;return a.jsxs(a.Fragment,{children:[tt,Ee,be,Xe]})}function vc({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,isSubmitted:c=!1,className:d=""}){const u=c&&!n?.trim();return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${d}
        `})]})}function h8({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!n;return a.jsxs("div",{className:o,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(_Be,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:l,hasError:u})]})}function _Be({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,hasError:o=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",w=h.useMemo(()=>{const b=u.trim().toLowerCase();return(b?e.filter(N=>(s(N)||"").toLowerCase().includes(b)):e).slice(0,l)},[e,u,s,l]);return h.useEffect(()=>{const b=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),h.useEffect(()=>{c||f("")},[c]),a.jsxs("div",{ref:p,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:c?u:v,placeholder:r,onFocus:()=>!i&&d(!0),onChange:b=>{f(b.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${o?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:w.length>0?w.map(b=>{const C=String(b.id),N=s(b),S=String(t)===C;return a.jsx("button",{type:"button",onClick:()=>{n(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:N||"--"},C)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function ABe({label:e,name:t,value:n,onChange:s,placeholder:r,rows:i=3,disabled:l=!1,className:o=""}){return a.jsxs("div",{className:o,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:s,placeholder:r,rows:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function EBe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}const dA=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function QX({lead:e,onBack:t,fetchLeads:n,onEdit:s,onDelete:r,setSelectedLead:i,relatedActs:l}){const o=vt(),{leadID:c}=Eo(),[d,u]=h.useState(e||null),[f,p]=h.useState("Overview"),[x,v]=h.useState(""),w=d?.status?.toUpperCase()==="QUALIFIED",[b,C]=h.useState(null),[N,S]=h.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[A,k]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[_,T]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),E=async()=>{try{if(e){u(e),v(e.status||"New");return}if(!c)return;const O=await ie.get(`/leads/get/${c}`);u(O.data),v(O.data.status||"New"),S({name:O.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:O.data.territory?.id||null,assigned_to:O.data.assigned_to?.id||null,created_by:O.data.creator?.id||null}),k({last_name:O.data.last_name||"",first_name:O.data.first_name||"",account_id:null,title:O.data.title||"",department:O.data.department||"",email:O.data.email||"",work_phone:O.data.work_phone||"",mobile_phone_1:O.data.mobile_phone_1||"",mobile_phone_2:O.data.mobile_phone_2||"",notes:"",assigned_to:O.data.assigned_to?.id||null,created_by:O.data.creator?.id||null}),T({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:O.data.assigned_to?.id||null,created_by:O.data.creator?.id||null})}catch(O){console.error(O)}};h.useEffect(()=>{e?(u(e),v(e.status||"New")):c&&E()},[c,e]);const I=async()=>{try{if(x==="Converted"&&d?.status?.toUpperCase()!=="QUALIFIED"){H.error("Lead must be Qualified before it can be converted.");return}const O=await ie.put(`/leads/${d.id}/update/status`,{status:x});H.success("Lead status updated successfully");const B={...d,status:O.data.status};u(B),i&&i(B),n&&n(),t&&t()}catch(O){console.error(O),H.error("Failed to update lead status")}},z=async O=>{const B={...N,assigned_to:O.assigned_to?.id,billing_address:O.address,shipping_address:O.address,created_by:O.creator?.id,industry:null,name:O.company_name,phone_number:O.work_phone,status:"Prospect",territory_id:O.territory?.id,website:""};console.log("Account data: ",B),console.log("Contact data: ",A),console.log("Deal data: ",_),console.log("Lead data: ",O);try{const F=(await ie.post("/accounts/convertedLead",B)).data.id,ee={...A,account_id:F,assigned_to:O.assigned_to?.id,created_by:O.creator?.id,department:O.department,email:O.email,first_name:O.first_name,last_name:O.last_name,mobile_phone_1:O.mobile_phone_1,mobile_phone_2:O.mobile_phone_2,notes:O.notes,title:O.title,work_phone:O.work_phone},de=(await ie.post("/contacts/convertedLead",ee)).data.id,oe=()=>{switch(_.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},Z=_.amount&&_.amount!==""?parseFloat(_.amount):0,R={..._,account_id:F,assigned_to:O.assigned_to?.id,created_by:O.creator?.id,primary_contact_id:de,probability:oe(),stage:"Prospecting"},ve=await ie.post("/deals/convertedLead",R),X=await ie.put(`/leads/convert/${O.id}`);i&&i(null),n(),H.success("Lead converted successfully!"),t()}catch(Q){console.error("Error during conversion:",Q);const F=Q.response?.data?.detail||Q.message||"Failed to convert lead. Please try again.";H.error(F)}},$=O=>{switch((O||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},P=O=>O.toString().toLowerCase().replace(/\b\w/g,B=>B.toUpperCase());return d?a.jsx(a.Fragment,{children:a.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:a.jsxs("div",{className:"flex items-start justify-between w-full",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),a.jsx("button",{onClick:()=>{t?t():o(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:a.jsx(Ha,{size:25})})]})}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[d.first_name," ",d.last_name]}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${$(d.status)}`,children:P(d.status||"New")}),a.jsx("div",{className:"flex flex-col",children:a.jsx("button",{onClick:()=>z(d),disabled:!w,title:w?"Convert Lead":"Lead must be Qualified before converting",className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2
      ${w?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-400":"bg-gray-200 text-gray-400 cursor-not-allowed"}
    `,children:"Convert"})})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{type:"button",onClick:()=>{s&&d&&s(d)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[a.jsx(rn,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{type:"button",onClick:()=>{r&&d&&r(d)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[a.jsx(Wt,{className:"mr-2"}),"Delete"]})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-4 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(O=>a.jsx("button",{onClick:()=>p(O),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${f===O?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:O},O))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[f==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Name:"}),a.jsxs("p",{children:[d.first_name," ",d.last_name||"N/A"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Company:"}),a.jsx("p",{children:d.company_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Job Title:"}),a.jsx("p",{children:d.title||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Department:"}),a.jsx("p",{children:d.department||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:d.email||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Territory:"}),a.jsx("p",{children:d.territory?.name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:d.assigned_to?`${d.assigned_to.first_name} ${d.assigned_to.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:d.creator?`${d.creator.first_name} ${d.creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Work Phone:"}),a.jsx("p",{children:d.work_phone||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),a.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),a.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Source:"}),a.jsx("p",{children:d.source||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Address:"}),a.jsx("p",{children:d.address||"N/A"})]})]})}),f==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]})]}),f==="Activities"&&a.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[l.tasks&&l.tasks.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>C(b==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Gt,{className:"text-blue-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",l.tasks.length,")"]})]}),b==="tasks"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),b==="tasks"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:l.tasks.map((O,B)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>o("/group-manager/tasks",{state:{taskID:O.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-blue-600 mt-1",children:a.jsx(Gt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:O.subject||O.title||"Task"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:O.description||"No description"}),O.assigned_to&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned:"," ",O.assigned_to.first_name," ",O.assigned_to.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:dA(O.due_date||O.created_at)})]},`task-${B}`))})]}),l.meetings&&l.meetings.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>C(b==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_t,{className:"text-green-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",l.meetings.length,")"]})]}),b==="meetings"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),b==="meetings"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:l.meetings.map((O,B)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>o("/group-manager/meetings",{state:{meetingID:O.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-green-600 mt-1",children:a.jsx(_t,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:O.subject||O.title||"Meeting"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:O.description||O.location||"No description"}),O.host&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",O.host.first_name," ",O.host.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:dA(O.start_time||O.created_at)})]},`meeting-${B}`))})]}),l.calls&&l.calls.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>C(b==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Et,{className:"text-purple-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",l.calls.length,")"]})]}),b==="calls"?a.jsx(St,{className:"text-gray-500"}):a.jsx(It,{className:"text-gray-500"})]}),b==="calls"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:l.calls.map((O,B)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>o("/group-manager/calls",{state:{callID:O.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-purple-600 mt-1",children:a.jsx(Et,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:O.subject||O.title||"Call"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:O.direction||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:dA(O.call_time||O.created_at)})]},`call-${B}`))})]}),(!l||(!l.tasks||l.tasks.length===0)&&(!l.meetings||l.meetings.length===0)&&(!l.calls||l.calls.length===0)&&(!l.quotes||l.quotes.length===0)&&(!l.deals||l.deals.length===0)&&(!l.contacts||l.contacts.length===0))&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No related activities found for this account."})})]})]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>{d&&o("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:d.title?`Call regarding ${d.title}`:`Call with ${d.first_name} ${d.last_name}`,relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assigned_to:d.assigned_to?.id?String(d.assigned_to.id):"",direction:"Outgoing",status:"Planned"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const O=encodeURIComponent(d.email),B=encodeURIComponent(""),Q=encodeURIComponent(""),F=`mailto:${O}?subject=${B}&body=${Q}`;window.location.href=F},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Ka,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{d&&o("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:d.title?`Meeting regarding ${d.title}`:`Meeting with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assigned_to:d.assigned_to?.id?String(d.assigned_to.id):"",status:"Planned"}}})},children:[a.jsx(_t,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>{d&&o("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:d.title?`Follow up on ${d.title}`:`Follow up with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assigned_to:d.assigned_to?.id?String(d.assigned_to.id):"",priority:"MEDIUM",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Gt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:x,onChange:O=>v(O.target.value),children:[a.jsx("option",{value:"New",children:"New"}),a.jsx("option",{value:"Contacted",children:"Contacted"}),a.jsx("option",{value:"Qualified",children:"Qualified"}),d?.status?.toUpperCase()==="QUALIFIED"&&a.jsx("option",{value:"Converted",children:"Converted"}),a.jsx("option",{value:"Lost",children:"Lost"})]}),a.jsx("button",{onClick:I,disabled:x===d.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${x===d.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const TBe=Lf.all(),uA=TBe.map((e,t)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${t}`})),kBe=e=>e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()),LBe=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},mA={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function PBe(){const e=vt(),{leadID:t}=Eo();ks();const[n,s]=h.useState(null),[r,i]=h.useState(!1),[l,o]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(!1),[v,w]=h.useState(""),[b,C]=h.useState("Filter by Status"),[N,S]=h.useState(1),[A,k]=h.useState(10),[_,T]=h.useState(mA),[E,I]=h.useState(!1),[z,$]=h.useState(null),[P,O]=h.useState(!1),[B,Q]=h.useState(null),[F,ee]=h.useState(!1),[V,de]=h.useState({});h.useRef(null);const[oe,Z]=h.useState(!1),[R,ve]=h.useState(null),[X,je]=h.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[Ne,Oe]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[Fe,me]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});h.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const Be=async()=>{try{const be=await ie.get("/leads/getUsers");o(be.data)}catch(be){console.error(`Error fetching users: ${be}`)}},Pe=async()=>{x(!0);try{const be=await ie.get("/leads/admin/getLeads");f(be.data),console.log(be.data)}catch(be){console.error(`Error fetching leads: ${be}`)}finally{x(!1)}};h.useEffect(()=>{Be(),Pe()},[]),h.useEffect(()=>{if(t&&u.length>0&&!r&&!E){const be=u.find(Xe=>Xe.id===Number(t));be&&s(be)}else!t&&!n&&s(null)},[t,u,r,E]),h.useEffect(()=>{if(R){const Xe=(Y=>{if(!Y)return{code:"+63",number:""};const te=Y.match(/^(\+\d+)\s(.+)$/);if(te)return{code:te[1],number:te[2]};if(Y.startsWith("+")){const K=Y.match(/^(\+\d{1,3})/);if(K)return{code:K[1],number:Y.substring(K[1].length).trim()}}return{code:"+63",number:Y}})(R.work_phone),M=[];R.work_phone&&M.push(`Work: ${R.work_phone}`),R.mobile_phone_1&&M.push(`Mobile 1: ${R.mobile_phone_1}`),R.mobile_phone_2&&M.push(`Mobile 2: ${R.mobile_phone_2}`);const U=M.length>0?M.join(" | "):"";je({name:R.company_name||"",website:"",countryCode:Xe.code,phone_number:Xe.number,combinedPhoneNumbers:U,billing_address:R.address||"",shipping_address:R.address||"",industry:"",status:"Prospect",territory_id:R.assigned_to?.territory?.id||null,assigned_to:R.assigned_to?.id||null,created_by:R.creator?.id||null}),Oe({last_name:R.last_name||"",first_name:R.first_name||"",account_id:null,title:R.title||"",department:R.department||"",email:R.email||"",work_phone:R.work_phone||"",mobile_phone_1:R.mobile_phone_1||"",mobile_phone_2:R.mobile_phone_2||"",notes:R.notes||"",assigned_to:R.assigned_to?.id||null,created_by:R.creator?.id||null}),me({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:R.assigned_to?.id||null,created_by:R.creator?.id||null})}},[R]);const we=be=>w(be.target.value),ne=h.useMemo(()=>{const be=v.trim().toLowerCase(),Xe=b.trim().toUpperCase();return u.filter(M=>{const U=[M?.first_name,M?.last_name,M?.company_name,M?.title,M?.email,M?.work_phone,M?.assigned_to?`${M.assigned_to.first_name} ${M.assigned_to.last_name}`:""],Y=be===""||U.some(K=>K==null||K===""?!1:K.toString().toLowerCase().includes(be));let te=!1;return Xe==="FILTER BY STATUS"?te=(M.status?M.status.toUpperCase():"")!=="CONVERTED":te=(M.status?M.status.toUpperCase():"")===Xe,Y&&te})},[u,v,b]),Le=Math.max(1,Math.ceil(ne.length/A)||1);h.useEffect(()=>{S(1)},[v,b,A]),h.useEffect(()=>{S(be=>{const Xe=Math.max(1,Math.ceil(ne.length/A)||1);return be>Xe?Xe:be})},[ne.length,A]);const pe=h.useMemo(()=>{const be=(N-1)*A;return ne.slice(be,be+A)},[ne,N,A]),le=()=>S(be=>Math.max(be-1,1)),ge=()=>S(be=>Math.min(be+1,Le)),fe=h.useCallback(async be=>{try{const Xe=await ie.get(`/activities/lead/${be}`);de(Xe.data&&typeof Xe.data=="object"?Xe.data:{})}catch(Xe){console.error(Xe),Xe.response?.status===404&&(console.warn("No activities found for this account."),de({}))}},[]),Te=be=>{s(be),fe(be.id)},Ye=()=>{s(null),t&&e("/admin/leads",{replace:!0})},Ae=()=>{i(!1),T(mA),I(!1),$(null),O(!1),d(null),sessionStorage.removeItem("editLeadData")},Ie=be=>{be.target.id==="modalBackdrop"&&Ae()},Je=()=>{T(mA),I(!1),$(null),d(null),i(!0)},he=be=>{if(!be){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",be),console.log("Current state - leadID:",t,"selectedLead:",n,"showModal:",r);const Xe=K=>{if(!K)return{code:"+63",number:""};const Se=K.match(/^(\+\d+)\s(.+)$/);return Se?{code:Se[1],number:Se[2]}:{code:"+63",number:K}},M=Xe(be.work_phone),U=Xe(be.mobile_phone_1),Y=Xe(be.mobile_phone_2);let te="";if(be.assigned_to){te=String(be.assigned_to.id);const K=l?.find(Se=>Se.id===be.assigned_to.id);d(K)}T({first_name:be.first_name||"",last_name:be.last_name||"",company_name:be.company_name||"",title:be.title||"",department:be.department||"",email:be.email||"",work_ccode:M.code,work_phone:M.number,m1_ccode:U.code,mobile_phone_1:U.number,m2_ccode:Y.code,mobile_phone_2:Y.number,address:be.address||"",notes:be.notes||"",source:be.source||"",territory_id:be.territory?.id||null,lead_owner:te,status:be.status||"New"}),I(!0),$(be.id),n?(console.log("Coming from detail view - closing detail modal and showing edit form"),s(null),i(!0)):(console.log("Already in list view - showing modal"),i(!0))},Me=be=>{if(!be){console.error("handleDelete: lead is null or undefined");return}console.log("handleDelete called with lead:",be);const Xe=`${be.first_name} ${be.last_name}`||"this lead";Q({title:"Delete Lead",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:Xe}),"? This action cannot be undone."]}),confirmLabel:"Delete Lead",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:be.id,name:Xe}})},re=be=>{const{name:Xe,value:M}=be.target;if(T(U=>({...U,[Xe]:M})),Xe==="lead_owner"){const U=l.find(Y=>Y.id===parseInt(M));d(U)}},[Qe,We]=h.useState(!1),dt=be=>{if(be.preventDefault(),We(!0),!_.last_name?.trim()){H.error("Last name is required.");return}if(!_.company_name?.trim()){H.error("Company is required.");return}if(!_.title?.trim()){H.error("Job title is required.");return}if(!_.email?.trim()){H.error("Email is required.");return}if(!_.email.includes("@")){H.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(_.email)){H.error("Please enter a valid email address with a dot in the domain.");return}if(!_.lead_owner){H.error("Please assign a lead owner.");return}const M={..._,territory_id:_.territory_id?parseInt(_.territory_id):null,lead_owner:parseInt(_.lead_owner),work_phone:`${_.work_ccode} ${_.work_phone}`,mobile_phone_1:`${_.m1_ccode} ${_.mobile_phone_1}`,mobile_phone_2:`${_.m2_ccode} ${_.mobile_phone_2}`},U=E&&z?"update":"create",Y=`${_.first_name} ${_.last_name}`;Q({title:U==="create"?"Confirm New Lead":"Confirm Update",message:U==="create"?a.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",a.jsx("span",{className:"font-semibold",children:Y}),"?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:Y}),"?"]}),confirmLabel:U==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:U,payload:M,targetId:z||null,name:Y}})},ze=async()=>{if(!B?.action){Q(null);return}const{action:be}=B,{type:Xe,payload:M,targetId:U,name:Y,lead:te}=be;console.log(M),ee(!0);try{if(Xe==="create")O(!0),await ie.post("/leads/create",M),H.success(`Lead "${Y}" created successfully.`),Ae(),await Pe();else if(Xe==="update"){if(!U)throw new Error("Missing lead identifier for update.");O(!0);const K=await ie.put(`/leads/${U}`,M);H.success(`Lead "${Y}" updated successfully.`),n&&n.id===U&&s(null),Ae(),await Pe()}else if(Xe==="delete"){if(!U)throw new Error("Missing lead identifier for deletion.");await ie.delete(`/leads/${U}`),H.success(`Lead "${Y}" deleted successfully.`),n?.id===U&&s(null),await Pe()}}catch(K){console.error(K);const Se=Xe==="create"?"Failed to create lead. Please review the details and try again.":Xe==="update"?"Failed to update lead. Please review the details and try again.":"Failed to delete lead. Please try again.",G=K.response?.data?.detail||Se;H.error(G)}finally{(Xe==="create"||Xe==="update")&&O(!1),Xe!=="edit"&&(ee(!1),Q(null))}},ce=()=>{F||Q(null)},ye=u.filter(be=>be.status==="New").length,Ue=u.filter(be=>be.status==="Contacted").length,et=u.filter(be=>be.status==="Qualified").length,lt=u.filter(be=>be.status==="Converted").length,Ee=u.filter(be=>be.status==="Lost").length,tt=[{title:"New",value:ye,icon:Ba,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:Ue,icon:Et,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:et,icon:xn,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:lt,icon:ko,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:Ee,icon:Ts,color:"text-red-600",bgColor:"bg-red-100"}];return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[p&&a.jsx(zt,{message:"Loading leads..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(Ba,{className:"mr-2 text-blue-600"}),"Leads"]}),a.jsxs("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:[a.jsxs("button",{onClick:()=>{H.info("Download functionality coming soon")},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(To,{className:"mr-2"})," Download"]}),a.jsxs("button",{onClick:()=>{Je(),We(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(da,{className:"mr-2"})," Add Lead"]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:tt.map(be=>a.jsx(OBe,{...be},be.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search leads",value:v,onChange:we,className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:b,onChange:be=>C(be.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),a.jsx("option",{value:"New",children:"New"}),a.jsx("option",{value:"Contacted",children:"Contacted"}),a.jsx("option",{value:"Qualified",children:"Qualified"}),a.jsx("option",{value:"Converted",children:"Converted"}),a.jsx("option",{value:"Lost",children:"Lost"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Name"}),a.jsx("th",{className:"py-3 px-4",children:"Company"}),a.jsx("th",{className:"py-3 px-4",children:"Job Title"}),a.jsx("th",{className:"py-3 px-4",children:"Email"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),a.jsx("tbody",{children:ne.length>0?pe.map(be=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>Te(be),children:[a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[be.first_name," ",be.last_name]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:be.company_name||"--"})}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:be.title||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:be.email||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:be.assigned_to?`${be.assigned_to.first_name} ${be.assigned_to.last_name}`:"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${LBe(be.status||"New")}`,children:kBe(be.status||"New")})})]},be.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No leads found."})})})]})}),a.jsx(Jt,{className:"mt-4",totalItems:ne.length,pageSize:A,currentPage:N,onPrev:le,onNext:ge,onPageSizeChange:k,label:"leads"}),r&&a.jsx("div",{id:"modalBackdrop",onClick:Ie,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:be=>be.stopPropagation(),children:[a.jsx("button",{onClick:()=>{Ae(),We(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(Vt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:E?"Edit Lead":"Add New Lead"}),a.jsxs("form",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),a.jsx("input",{type:"text",name:"first_name",value:_.first_name,onChange:re,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Last Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"Smith",name:"last_name",value:_.last_name,onChange:re,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                      ${Qe&&!_.last_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Company ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:_.company_name,onChange:re,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Qe&&!_.company_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Job Title",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:_.title,onChange:re,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Qe&&!_.title?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),a.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:_.department,onChange:re,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Email",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:_.email,onChange:re,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Qe&&!_.email?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"work_ccode",value:_.work_ccode,onChange:re,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:uA.map(be=>a.jsx("option",{value:be.code,children:be.code},be.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:_.work_phone,onChange:re,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"m1_ccode",value:_.m1_ccode,onChange:re,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:uA.map(be=>a.jsx("option",{value:be.code,children:be.code},be.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:_.mobile_phone_1,onChange:re,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"m2_ccode",value:_.m2_ccode,onChange:re,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:uA.map(be=>a.jsx("option",{value:be.code,children:be.code},be.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:_.mobile_phone_2,onChange:re,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),a.jsx("input",{type:"text",name:"address",value:_.address,onChange:re,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("div",{className:`w-full rounded-lg ${Qe&&!_.lead_owner?"border border-red-400":"border border-gray-300"}`,children:a.jsx(MBe,{items:Array.isArray(l)?l:[],value:_.lead_owner??"",placeholder:"Search a user...",getLabel:be=>`${be.first_name} ${be.last_name}`,onChange:be=>{const Xe=l.find(U=>String(U.id)===String(be));d(Xe);let M=null;Xe&&Xe.assigned_territory&&Xe.assigned_territory.length===1&&(M=Xe.assigned_territory[0].id),T(U=>({...U,lead_owner:be,territory_id:M}))}})})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),a.jsxs("select",{name:"territory_id",value:_.territory_id||"",onChange:re,disabled:!c||!c.assigned_territory||c.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[a.jsx("option",{value:"",disabled:!0,children:c?c.assigned_territory&&c.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),c&&c.assigned_territory&&c.assigned_territory.map(be=>a.jsx("option",{value:be.id,children:be.name},be.id))]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),a.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:_.source,onChange:re,children:[a.jsx("option",{value:"",disabled:!0,children:"Select Source"}),a.jsx("option",{value:"Website",children:"Website"}),a.jsx("option",{value:"Referral",children:"Referral"}),a.jsx("option",{value:"Cold call",children:"Cold call"}),a.jsx("option",{value:"Event",children:"Event"}),a.jsx("option",{value:"Other",children:"Other"})]})]}),a.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),a.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:_.notes,onChange:re,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("button",{type:"button",onClick:()=>{Ae(),We(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:P||F,children:"Cancel"}),a.jsx("button",{type:"submit",onClick:dt,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:P||F,children:P||F?"Processing...":E?"Update Lead":"Save Lead"})]})]})]})}),B&&a.jsx(DBe,{open:!0,title:B.title,message:B.message,confirmLabel:B.confirmLabel,cancelLabel:B.cancelLabel,variant:B.variant,onConfirm:ze,onCancel:ce,loading:F}),n&&!r&&!E&&a.jsx(QX,{relatedActs:V,lead:n,onBack:Ye,fetchLeads:Pe,setSelectedLead:s,onEdit:he,onDelete:Me})]})}function DBe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}function OBe({icon:e,title:t,value:n,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function MBe({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200}){const[o,c]=h.useState(!1),[d,u]=h.useState(""),f=h.useRef(null),p=e.find(w=>String(w.id)===String(t)),x=p?s(p):"",v=h.useMemo(()=>{const w=d.trim().toLowerCase();return(w?e.filter(C=>(s(C)||"").toLowerCase().includes(w)):e).slice(0,l)},[e,d,s,l]);return h.useEffect(()=>{const w=b=>{f.current&&!f.current.contains(b.target)&&c(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{o||u("")},[o]),a.jsxs("div",{ref:f,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:o?d:x,placeholder:r,onFocus:()=>!i&&c(!0),onChange:w=>{u(w.target.value),o||c(!0)},className:"w-full rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),o&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:v.length>0?v.map(w=>{const b=String(w.id),C=s(w),N=String(t)===b;return a.jsx("button",{type:"button",onClick:()=>{n(b),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${N?"bg-blue-50":""}`,children:C||"--"},b)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}const tb={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},Wn=({label:e,value:t,name:n,className:s=""})=>a.jsxs("div",{className:`flex flex-col ${s}`,children:[a.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),a.jsx("input",{type:"text",name:n,defaultValue:t,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),IBe=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(Wn,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),a.jsx(Wn,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),a.jsx(Wn,{label:"Industry",name:"industry",value:e.industry})]}),a.jsx(Wn,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),a.jsx(Wn,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),$Be=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(Wn,{label:"First Name",name:"firstName",value:e.firstName}),a.jsx(Wn,{label:"Last Name",name:"lastName",value:e.lastName}),a.jsx(Wn,{label:"Department",name:"department",value:e.department}),a.jsx(Wn,{label:"Title",name:"title",value:e.title}),a.jsx(Wn,{label:"Work Phone",name:"workPhone",value:e.workPhone}),a.jsx(Wn,{label:"Email",name:"email",value:e.email}),a.jsx(Wn,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),a.jsx(Wn,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),RBe=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(Wn,{label:"Deal Name",name:"dealName",value:e.dealName}),a.jsxs("div",{className:"flex",children:[a.jsx(Wn,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),a.jsx("div",{className:"flex flex-col justify-end ml-1",children:a.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),a.jsx(Wn,{label:"Stage",name:"stage",value:e.stage}),a.jsx(Wn,{label:"Territory",name:"territory",value:e.territory})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(Wn,{label:"Description",name:"description",value:e.description}),a.jsx(Wn,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function zBe({isOpen:e,onClose:t}){const[n,s]=h.useState(1),r=3;if(!e)return null;const i=()=>{n<r?s(n+1):(t(),s(1))},l=()=>{n>1&&s(n-1)},o=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],c=()=>{switch(n){case 1:return a.jsx(IBe,{data:tb});case 2:return a.jsx($Be,{data:tb});case 3:return a.jsx(RBe,{data:tb});default:return null}};return a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:tb.accountName})]}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:a.jsx(hN,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:o.map(d=>a.jsx("button",{onClick:()=>s(d.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${n===d.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:d.name},d.id))}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c()}),a.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[n>1&&a.jsx("button",{onClick:l,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),n<r?a.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):a.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}const UBe=10;function FBe(){h.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const e=vt(),t=Yt(),[n,s]=h.useState(""),[r,i]=h.useState("Filter by Stage"),[l,o]=h.useState("Filter by Owner"),[c,d]=h.useState(null),[u,f]=h.useState("Overview"),[p,x]=h.useState(!1),[v,w]=h.useState(null),[b,C]=h.useState(!1),[N,S]=h.useState(1),[A,k]=h.useState(10),[_,T]=h.useState(!1),[E,I]=h.useState(null),[z,$]=h.useState(!1),[P,O]=h.useState(!1),[B,Q]=h.useState(null),[F,ee]=h.useState([]),[V,de]=h.useState([]),[oe,Z]=h.useState([]),[R,ve]=h.useState({}),[X,je]=h.useState(null);h.useEffect(()=>{const U=t.state,Y=U?.dealID;if(Y&&!U?.openDealModal){je(Y),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(X&&v?.length>0&&!b){const U=v.find(Y=>Y.id===X);U?d(U):H.error("Deal not found."),je(null)}},[X,v,b]);const[Ne,Oe]=h.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),[Fe,me]=h.useState(null),[Be,Pe]=h.useState(null),we={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST","Closed Cancelled Stage":"CLOSED_CANCELLED"},ne=U=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost",CLOSED_CANCELLED:"Closed Cancelled"})[U]||U||"--",Le=U=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700",CLOSED_CANCELLED:"bg-red-100 text-red-700"})[U]||"bg-gray-100 text-gray-700",pe=h.useCallback(async U=>{try{const Y=await ie.get(`/activities/deal/${U}`);ve(Y.data&&typeof Y.data=="object"?Y.data:{})}catch(Y){console.error(Y),Y.response?.status===404&&(console.warn("No activities found for this account."),ve({}))}},[]),le=h.useMemo(()=>{const U=n.trim().toLowerCase(),Y=r.trim(),te=l.trim();return(v??[]).filter(K=>{const Se=[K?.name,K?.description,K?.account?.name,K?.contact?.first_name,K?.contact?.last_name,K?.assigned_deals?.first_name,K?.assigned_deals?.last_name],G=U===""||Se.some(Ve=>Ve==null||Ve===""?!1:Ve.toString().toLowerCase().includes(U)),J=Y==="Filter by Stage"||Y===""||K.stage===we[Y]||K.stage===Y,De=te==="Filter by Owner"||te===""||`${K.assigned_deals?.first_name||""} ${K.assigned_deals?.last_name||""}`.trim().toLowerCase()===te.toLowerCase();return G&&J&&De})},[v,n,r,l]),ge=Math.max(1,Math.ceil(le.length/UBe)||1);h.useEffect(()=>{S(1)},[n,r,l]),h.useEffect(()=>{S(U=>{const Y=Math.max(1,Math.ceil(le.length/A)||1);return U>Y?Y:U})},[le.length,A]);const fe=h.useMemo(()=>{const U=(N-1)*A;return le.slice(U,U+A)},[le,N,A]),Te=()=>S(U=>Math.max(U-1,1)),Ye=()=>S(U=>Math.min(U+1,ge)),Ae=()=>{Oe({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),O(!1),Q(null),x(!0)},Ie=async()=>{C(!0);try{const U=await ie.get("/deals/admin/fetch-all"),te=[...Array.isArray(U.data)?U.data:[]].sort((K,Se)=>{const G=K?.created_at?new Date(K.created_at).getTime():0;return(Se?.created_at?new Date(Se.created_at).getTime():0)-G});w(te)}catch(U){U.response&&U.response.status===403?H.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):H.error("Failed to fetch deals. Please try again later."),console.error(U)}finally{C(!1)}},Je=async()=>{try{const U=await ie.get("/accounts/admin/fetch-all");ee(Array.isArray(U.data)?U.data:[])}catch(U){console.error(U),U.response?.status===403&&H.warn("Unable to load accounts (permission denied).")}},he=async()=>{try{const U=await ie.get("/contacts/admin/fetch-all");de(Array.isArray(U.data)?U.data:[])}catch(U){console.error(U),U.response?.status===403&&H.warn("Unable to load contacts (permission denied).")}},Me=async()=>{try{const U=await ie.get("/users/all");Z(Array.isArray(U.data)?U.data:[])}catch(U){console.error(U),U.response?.status===403&&H.warn("Unable to load users (permission denied).")}};h.useEffect(()=>{Ie(),Je(),he(),Me()},[]);const re=async U=>{U&&(Oe({id:U.id||null,name:U.name||"",account_id:U.account_id?.toString()||"",primary_contact_id:U.primary_contact_id?.toString()||"",stage:U.stage||"PROPOSAL",amount:U.amount?.toString()||"",close_date:U.close_date?new Date(U.close_date).toISOString().split("T")[0]:"",assigned_to:U.assigned_to?.toString()||"",currency:U.currency||"PHP",description:U.description||""}),me(U.account||null),Pe(U.contact||null),O(!0),Q(U.id),d(null),x(!0))},Qe=async(U=!1)=>{try{const Y=await ie.get("/deals/admin/fetch-all"),K=[...Array.isArray(Y.data)?Y.data:[]].sort((Se,G)=>{const J=Se?.created_at?new Date(Se.created_at).getTime():0;return(G?.created_at?new Date(G.created_at).getTime():0)-J});if(w(K),!U&&c&&c.id){const Se=K.find(G=>G.id===c.id);Se&&d({...Se})}}catch(Y){console.error("Failed to refresh deal data:",Y),await Ie()}},We=U=>{const Y=U.name.trim();if(!Y){H.error("Deal name is required.");return}if(!U.account_id){H.error("Account is required.");return}const te=P&&B?"update":"create",K=Y;I({title:te==="create"?"Confirm New Deal":"Confirm Update",message:te==="create"?a.jsxs("span",{children:["Are you sure you want to create"," ",a.jsx("span",{className:"font-semibold",children:K}),"?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:K}),"?"]}),confirmLabel:te==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:te,formData:U,targetId:B||null,name:K}})},dt=U=>{if(!U)return;const Y=U.name||"this deal";I({title:"Delete Deal",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:Y}),"? This action cannot be undone."]}),confirmLabel:"Delete Deal",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:U.id,name:Y}})},ze=async()=>{if(!E?.action){I(null);return}const{action:U}=E,{type:Y,formData:te,targetId:K,name:Se}=U;$(!0);try{if(Y==="create"){T(!0);const G={name:te.name.trim(),account_id:parseInt(te.account_id),primary_contact_id:te.primary_contact_id?parseInt(te.primary_contact_id):null,stage:te.stage,amount:te.amount?parseFloat(te.amount):null,currency:te.currency||"PHP",close_date:te.close_date||null,description:te.description||null,assigned_to:te.assigned_to?parseInt(te.assigned_to):null};await ie.post("/deals/admin/create",G),H.success(`Deal "${Se}" created successfully.`),x(!1),await Ie()}else if(Y==="update"){if(!K)throw new Error("Missing deal identifier for update.");T(!0);const G={};te.name!==void 0&&(G.name=te.name.trim()),te.account_id!==void 0&&te.account_id!==""&&(G.account_id=parseInt(te.account_id)),te.primary_contact_id!==void 0&&(G.primary_contact_id=te.primary_contact_id?parseInt(te.primary_contact_id):null),te.stage!==void 0&&(G.stage=te.stage),te.amount!==void 0&&te.amount!==""&&(G.amount=parseFloat(te.amount)),te.currency!==void 0&&(G.currency=te.currency),te.close_date!==void 0&&(G.close_date=te.close_date||null),te.description!==void 0&&(G.description=te.description||null),te.assigned_to!==void 0&&(G.assigned_to=te.assigned_to?parseInt(te.assigned_to):null),await ie.put(`/deals/admin/${K}`,G),H.success(`Deal "${Se}" updated successfully.`),x(!1),await Ie()}else if(Y==="delete"){if(!K)throw new Error("Missing deal identifier for deletion.");await ie.delete(`/deals/admin/${K}`),H.success(`Deal "${Se}" deleted successfully.`),c?.id===K&&d(null),await Ie()}}catch(G){console.error(G);const J=Y==="create"?"Failed to create deal. Please review the details and try again.":Y==="update"?"Failed to update deal. Please review the details and try again.":"Failed to delete deal. Please try again.",De=G.response?.data?.detail||J;H.error(De)}finally{(Y==="create"||Y==="update")&&T(!1),$(!1),I(null)}},ce=()=>{z||I(null)},ye=()=>{x(!1),Oe({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),me(null),Pe(null),O(!1),Q(null),T(!1)},Ue=(v??[]).filter(U=>U.stage==="PROSPECTING").length,et=(v??[]).filter(U=>U.stage==="QUALIFICATION").length,lt=(v??[]).filter(U=>U.stage==="PROPOSAL").length,Ee=(v??[]).filter(U=>U.stage==="NEGOTIATION").length,tt=(v??[]).filter(U=>U.stage==="CLOSED_WON").length,be=(v??[]).filter(U=>U.stage==="CLOSED_LOST").length,Xe=(v??[]).filter(U=>U.stage==="CLOSED_CANCELLED").length,M=[{title:"Prospecting",value:Ue,icon:ow,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:et,icon:nn,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:lt,icon:Kt,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:Ee,icon:Vd,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:tt,icon:xn,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:be,icon:Ts,color:"text-red-600",bgColor:"bg-red-100"},{title:"Closed Cancelled",value:Xe,icon:Ts,color:"text-gray-600",bgColor:"bg-gray-100"}];return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[b&&a.jsx(zt,{message:"Loading deals..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(Kt,{className:"mr-2 text-blue-600"}),"Deals"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:Ae,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(da,{className:"mr-2"})," Add Deal"]})})]}),a.jsx("div",{className:"grid grid-cols-1 p-2 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden",children:M.map(U=>a.jsx(HBe,{...U},U.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search deals",value:n,onChange:U=>s(U.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[a.jsxs("select",{value:r,onChange:U=>i(U.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),a.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),a.jsx("option",{value:"Qualification Stage",children:"Qualification"}),a.jsx("option",{value:"Proposal Stage",children:"Proposal"}),a.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),a.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),a.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"}),a.jsx("option",{value:"Closed Cancelled Stage",children:"Closed Cancelled"})]}),a.jsxs("select",{value:l,onChange:U=>o(U.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((v??[]).map(U=>`${U.assigned_deals?.first_name} ${U.assigned_deals?.last_name}`))].map((U,Y)=>a.jsx("option",{value:U,children:U},Y))]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Stage"}),a.jsx("th",{className:"py-3 px-4",children:"Value"}),a.jsx("th",{className:"py-3 px-4",children:"Close Date"}),a.jsx("th",{className:"py-3 px-4",children:"Owner"})]})}),a.jsx("tbody",{children:le.length>0?fe.map(U=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{d({...U}),pe(U.id)},children:[a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:U.deal_id?U.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:U.name}),a.jsx("div",{className:"text-gray-500 text-xs break-all",children:U.description||"--"})]})}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:U.account?.name||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:U.contact?.first_name&&U.contact?.last_name?`${U.contact.first_name} ${U.contact.last_name}`:U.contact?.first_name||U.contact?.last_name||"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Le(U.stage)}`,children:ne(U.stage)})}),a.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",U.amount?.toLocaleString()||"0"]}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:U.close_date||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:U.assigned_deals?.first_name&&U.assigned_deals?.last_name?`${U.assigned_deals.first_name} ${U.assigned_deals.last_name}`:U.assigned_deals?.first_name||U.assigned_deals?.last_name||"--"})]},U.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No deals found."})})})]})}),a.jsx(Jt,{className:"mt-4",totalItems:le.length,pageSize:A,currentPage:N,onPrev:Te,onNext:Ye,onPageSizeChange:k,label:"deals"}),p&&a.jsx(GBe,{onClose:ye,formData:Ne,setFormData:Oe,isEditing:P,onSubmit:We,isSubmitting:_||z,accounts:F,contacts:V,users:oe,currentAccount:Fe,currentContact:Be}),c&&a.jsx(kx,{relatedActs:R,selectedDeal:c,show:!!c,onClose:()=>d(null),activeTab:u,setActiveTab:f,onEdit:re,onDelete:dt,onStatusUpdate:Qe}),E&&a.jsx(BBe,{open:!0,title:E.title,message:E.message,confirmLabel:E.confirmLabel,cancelLabel:E.cancelLabel,variant:E.variant,onConfirm:ze,onCancel:ce,loading:z})]})}function BBe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}function HBe({icon:e,title:t,value:n,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function GBe({onClose:e,formData:t,setFormData:n,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,accounts:l=[],contacts:o=[],users:c=[],currentAccount:d=null,currentContact:u=null}){const[f,p]=h.useState(!1),x=b=>{if(b.preventDefault(),p(!0),!t.name?.trim()){H.error("Deal name is required.");return}const C=Number(t.amount);if(!t.amount||isNaN(C)||C<=0){H.error("Amount must be a number greater than 0.");return}if(!t.account_id){H.error("Please select an account.");return}if(!t.primary_contact_id){H.error("Please select a primary contact.");return}if(!t.assigned_to){H.error("Please assign this deal to a user.");return}r?.(t)},v=b=>{b.target.id==="modalBackdrop"&&e()},w=h.useMemo(()=>{const b=String(t.account_id||"").trim(),C=Array.isArray(o)?o:[];return b?C.filter(N=>{const A=[N?.account_id,N?.accountId,N?.account?.id,N?.account?.account_id,N?.account?.accountId].find(k=>k!=null&&String(k).trim()!=="");return A?String(A)===b:!1}):C},[o,t.account_id]);return h.useEffect(()=>{const b=String(t.account_id||"").trim(),C=String(t.primary_contact_id||"").trim();if(!C||!b)return;w.some(S=>String(S?.id)===C)||n(S=>({...S,primary_contact_id:""}))},[t.account_id,t.primary_contact_id,w,n]),a.jsx("div",{id:"modalBackdrop",onClick:v,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:b=>b.stopPropagation(),children:[a.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(Vt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Deal":"Create Deal"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:x,noValidate:!0,children:[a.jsx(fA,{label:"Deal Name",name:"name",value:t.name,onChange:b=>n({...t,name:b.target.value}),placeholder:"Enter deal name",required:!0,isSubmitted:f,className:"md:col-span-2"}),a.jsx(hA,{label:"Account",value:t.account_id||"",onChange:b=>n({...t,account_id:b}),items:l||[],getLabel:b=>b?.name??"",placeholder:"Search account...",disabled:i,currentItem:d,required:!0,isSubmitted:f}),a.jsx(hA,{label:"Primary Contact",value:t.primary_contact_id||"",onChange:b=>n({...t,primary_contact_id:b}),items:w||[],getLabel:b=>`${b?.first_name??""} ${b?.last_name??""}`.trim()||b?.email||"",placeholder:"Search contact...",disabled:i,currentItem:u,required:!0,isSubmitted:f}),a.jsx(g8,{label:"Stage",name:"stage",value:t.stage,onChange:b=>n({...t,stage:b.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}],disabled:i}),a.jsx(fA,{label:"Amount",name:"amount",type:"number",step:"0.01",value:t.amount,onChange:b=>n({...t,amount:b.target.value}),placeholder:"0",required:!0,isSubmitted:f}),a.jsx(g8,{label:"Currency",name:"currency",value:t.currency||"PHP",onChange:b=>n({...t,currency:b.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),a.jsx(fA,{label:"Close Date",name:"close_date",type:"date",value:t.close_date||"",onChange:b=>n({...t,close_date:b.target.value}),disabled:i}),a.jsx(hA,{label:"Assign To",value:t.assigned_to||"",onChange:b=>n({...t,assigned_to:b}),items:c||[],getLabel:b=>`${b?.first_name??""} ${b?.last_name??""}`.trim()||b?.email||"",placeholder:"Search assignee...",disabled:i,required:!0,isSubmitted:f,className:"md:col-span-2"}),a.jsx(VBe,{label:"Description",name:"description",value:t.description,onChange:b=>n({...t,description:b.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Deal":"Save Deal"})]})]})]})})}function fA({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,className:c="",isSubmitted:d=!1}){const u=d&&!n?.trim();return a.jsxs("div",{className:c,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function g8({label:e,name:t,value:n,onChange:s,options:r,required:i=!1,disabled:l=!1,className:o=""}){return a.jsxs("div",{className:o,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:n??"",onChange:s,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(c=>a.jsx("option",{value:c.value,children:c.label},c.value))})]})}function hA({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",currentItem:c=null,required:d=!1,isSubmitted:u=!1}){const f=u&&d&&!n;return a.jsxs("div",{className:o,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",d&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(WBe,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:l,currentItem:c,hasError:f})]})}function WBe({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,currentItem:o=null,hasError:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),w=e.find(N=>String(N.id)===String(t))||o,b=w?s(w):"",C=h.useMemo(()=>{const N=f.trim().toLowerCase();return(N?e.filter(A=>(s(A)||"").toLowerCase().includes(N)):e).slice(0,l)},[e,f,s,l]);return h.useEffect(()=>{const N=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),h.useEffect(()=>{d||p("")},[d]),a.jsxs("div",{ref:x,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:d?f:b,placeholder:r,onFocus:()=>!i&&u(!0),onChange:N=>{p(N.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${c?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:C.length>0?C.map(N=>{const S=String(N.id),A=s(N),k=String(t)===S;return a.jsx("button",{type:"button",onClick:()=>{n(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:A||"--"},S)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function VBe({label:e,name:t,value:n,onChange:s,placeholder:r,required:i=!1,disabled:l=!1,className:o="",rows:c=3}){return a.jsxs("div",{className:o,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:s,placeholder:r,required:i,disabled:l,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function qBe({selectedDeal:e,show:t,onClose:n,activeTab:s,setActiveTab:r,onEdit:i,onDelete:l,onStatusUpdate:o}){const c=vt(),[d]=ks(),u=d.get("id"),[f,p]=h.useState(e||null),[x,v]=h.useState(s||"Overview"),{user:w}=ta();h.useEffect(()=>{console.log("AdminDealsInformation mounted",f),console.log("User:",w)},[f,w]);const b=s!==void 0?s:x;if(h.useEffect(()=>{(async()=>{if(u&&!e)try{console.log("Fetching deal from route, ID:",u);const k=(await ie.get("/deals/admin/fetch-all")).data||[];console.log("All deals fetched:",k.length);const _=k.find(T=>T.id===parseInt(u));if(console.log("Found deal:",_),_){console.log("Deal data structure:",{id:_.id,name:_.name,amount:_.amount,stage:_.stage,account:_.account,contact:_.contact,assigned_deals:_.assigned_deals,deal_creator:_.deal_creator,allKeys:Object.keys(_)});const T={..._,amount:typeof _.amount=="number"?_.amount:parseFloat(_.amount||0),probability:_.probability||0};p(T)}else console.warn("Deal not found with ID:",u)}catch(A){console.error("Error fetching deal:",A)}})()},[u,e]),!f&&!u||u&&!f)return null;const C=S=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[S]||"bg-gray-100 text-gray-700";function N(S){return S?new Date(S).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:a.jsxs("div",{className:"flex items-start justify-between w-full",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),a.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:a.jsx("button",{onClick:()=>{n?n():c(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:a.jsx(Vt,{size:25})})})]})}),a.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:a.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[a.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:f.name}),a.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${C(f.stage)}`,children:f.stage})]}),a.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",N(f.created_at)]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-2",children:[a.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[" ",f.amount?f.amount.toLocaleString():"0"]}),a.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${f.probability}%`}})}),a.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",f.probability,"% Complete "]}),(f.created_by===w?.id||f.assigned_to===w?.id)&&a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[a.jsxs("button",{type:"button",onClick:()=>{i&&i(f)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[a.jsx(rn,{className:"mr-1 sm:mr-2",size:16}),a.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),a.jsxs("button",{type:"button",onClick:()=>{l&&l(f)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[a.jsx(Wt,{className:"mr-1 sm:mr-2",size:16}),a.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(S=>a.jsx("button",{onClick:()=>{r?r(S):v(S)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${b===S?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:S},S))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[b==="Overview"&&a.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),a.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[a.jsx("strong",{children:"Description:"})," ",f.description]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[a.jsx("strong",{children:"Expected Close Date:"})," ",f.close_date]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("div",{className:"mt-4 py-3 w-full",children:[a.jsxs("div",{className:"relative flex flex-col w-full",children:[a.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const S=(f?.stage||"PROSPECTING").toUpperCase(),k=(T=>T==="PROSPECTING"?0:T==="QUALIFICATION"?1:T==="PROPOSAL"?2:T==="NEGOTIATION"?3:T==="CLOSED_WON"||T==="CLOSED_LOST"?4:-1)(S);return[0,1,2,3,4].map(T=>k===T?"orange":k>T?"green":"gray").map((T,E)=>a.jsxs(wt.Fragment,{children:[a.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${T==="green"?"bg-green-500 border-green-500":T==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),E<4&&a.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},E))})()}),a.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((S,A)=>a.jsx("span",{className:"text-center flex-1 break-words",children:S},A))})]}),a.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:f.stage})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),a.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Account:"})," ",f.account?.name]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Primary Contact:"})," ",f.contact?.first_name," ",f.contact?.last_name]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Phone:"})," ",f.contact?.work_phone]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Email:"})," ",f.contact?.email]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Assigned To:"})," ",f.assigned_deals?.first_name," ",f.assigned_deals?.last_name]})]})]})]}),b==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:f.description||"No notes available."})]})]}),b==="Activities"&&a.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:Et,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:_t,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((S,A)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[a.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-gray-600 mt-1",children:a.jsx(S.icon,{size:24})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-gray-900 break-words",children:S.title}),a.jsx("p",{className:"text-sm text-gray-500 break-words",children:S.desc}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),a.jsx("p",{className:"text-sm text-gray-700 break-words",children:S.user})]})]})]}),a.jsx("p",{className:"text-sm text-gray-500 break-words",children:S.date})]},A))]}),b==="Edit"&&a.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[a.jsxs("label",{className:"block mb-3 break-words",children:[a.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),a.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:f.name})]}),a.jsxs("label",{className:"block mb-3 break-words",children:[a.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),a.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:f.description})]}),a.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),a.jsx("div",{className:"w-full lg:w-auto",children:a.jsx(mj,{selectedDeal:f,onStatusUpdate:o,onClose:n})})]})]})]})})}const gA=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],pA={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:"",subtotal:0,tax_rate:0,tax_amount:0,discount_type:"",discount_value:0,discount_amount:0,currency:"PHP",items:[]},Ci=e=>{if(!e)return"Draft";const t=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[t]||"Draft"},xA=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",YBe=e=>{switch(Ci(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},KBe=e=>{switch(Ci(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},ab=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",dg=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",QBe=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const t=new Date(e);if(isNaN(t.getTime()))return"";const n=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${n}-${s}-${r}`}catch{return""}},yA=(e,t)=>{if(!e||t==null||t==="")return"";const n=Number(t);if(Number.isNaN(n))return"";const s=new Date(e);return isNaN(s.getTime())?"":(s.setDate(s.getDate()+n),s.toISOString().slice(0,10))},p8=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},x8=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},qv=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},XBe=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const s of e){const r=localStorage.getItem(s);if(r)try{const i=JSON.parse(r),l=qv(i);if(l)return l}catch{}}const t=localStorage.getItem("user_id"),n=qv(t);return n||null},ZBe=e=>{if(!e)return"";const n=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(s=>s!=null&&String(s).trim()!=="");return n?String(n):""},JBe=e=>{if(!e)return"";const n=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(s=>s!=null&&String(s).trim()!=="");return n?String(n):""};function eHe(){const e=vt(),t=Yt();h.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[n,s]=h.useState([]),[r,i]=h.useState(!1),[l,o]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState([]),[p,x]=h.useState([]),[v,w]=h.useState(null),[b,C]=h.useState(null),[N,S]=h.useState(!1),[A,k]=h.useState(!1),[_,T]=h.useState(!1),[E,I]=h.useState(null),[z,$]=h.useState(!1),[P,O]=h.useState(null),[B,Q]=h.useState(pA),[F,ee]=h.useState(""),[V,de]=h.useState("Filter by Status"),[oe,Z]=h.useState(null),[R,ve]=h.useState(1),[X,je]=h.useState(10),[Ne,Oe]=h.useState("Overview"),[Fe,me]=h.useState("Draft"),[Be,Pe]=h.useState(null);h.useEffect(()=>{const pt=t.state?.quoteID;if(pt){Pe(pt),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(Be&&n.length>0&&!r){const ke=n.find(pt=>pt.id===Be);ke?C(ke):H.error("Quote not found."),Pe(null)}},[Be,u,r]),h.useEffect(()=>{let ke=!0;return(async()=>{const _e=XBe();if(_e&&ke){w(_e);return}try{const W=await ie.get("/auth/me"),ae=qv(W?.data);if(ae&&ke){w(ae);return}}catch{}try{const W=await ie.get("/users/me"),ae=qv(W?.data);if(ae&&ke){w(ae);return}}catch{}ke&&w(null)})(),()=>{ke=!1}},[]);const we=h.useCallback(ke=>ke&&c.find(_e=>String(_e.id)===String(ke))?.name||"",[c]),ne=h.useCallback(ke=>{if(!ke)return"";const pt=u.find(_e=>String(_e.id)===String(ke));return pt?`${pt.first_name} ${pt.last_name}`.trim():""},[u]),Le=h.useCallback(ke=>{if(!ke)return"--";const pt=l.find(_e=>String(_e.id)===String(ke));return pt?.deal_name||pt?.name||`Deal #${p8(ke)}`},[l]),pe=h.useCallback(ke=>{const pt=l.find(ae=>String(ae.id)===String(ke)),_e=ZBe(pt);let W=JBe(pt);if(!W&&_e){const ae=u.filter($e=>String($e.account_id||"")===String(_e));if(ae.length>0){const $e=[...ae].sort((Ge,ue)=>{const se=`${Ge.first_name||""} ${Ge.last_name||""}`.trim().toLowerCase(),He=`${ue.first_name||""} ${ue.last_name||""}`.trim().toLowerCase();return se.localeCompare(He)});W=String($e[0].id)}}if(_e&&W){const ae=u.find($e=>String($e.id)===String(W));ae?.account_id&&String(ae.account_id)!==String(_e)&&(W="")}return{accountId:_e||"",contactId:W||""}},[l,u]),le=h.useCallback(ke=>{if(!ke)return"--";if(ke.deal?.deal_name)return ke.deal.deal_name;if(ke.deal?.name)return ke.deal.name;const pt=ke.deal_id||ke.deal?.id;return pt?Le(pt):"--"},[Le]),ge=h.useCallback(ke=>{if(!ke)return"--";if(ke.account?.name)return ke.account.name;let pt=ke.account_id||ke.account?.id;if(!pt){const _e=ke.deal_id||ke.deal?.id;_e&&(pt=pe(_e).accountId)}return pt?we(pt)||`Account #${pt}`:"--"},[pe,we]),fe=h.useCallback(ke=>{if(!ke)return"--";if(ke.contact?.first_name||ke.contact?.last_name)return`${ke.contact?.first_name||""} ${ke.contact?.last_name||""}`.trim()||"--";let pt=ke.contact_id||ke.contact?.id;if(!pt){const W=ke.deal_id||ke.deal?.id;W&&(pt=pe(W).contactId)}return(pt?ne(pt):"")||(pt?`Contact #${pt}`:"--")},[pe,ne]),Te=h.useCallback(async(ke=null)=>{i(!0);try{const pt=await ie.get("/quotes/admin/fetch-all"),W=[...Array.isArray(pt.data)?pt.data:[]].sort((ae,$e)=>{const Ge=ae?.created_at||ae?.updated_at||0,ue=$e?.created_at||$e?.updated_at||0;return new Date(ue)-new Date(Ge)});if(s(W),ke){const ae=W.find($e=>$e.id===ke);C(ae||null)}}catch(pt){console.error(pt),s([]),pt.response?.status===403?H.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):H.error("Failed to fetch quotes. Please try again later.")}finally{i(!1)}},[]),Ye=h.useCallback(async()=>{try{const ke=await ie.get("/deals/admin/fetch-all");o(Array.isArray(ke.data)?ke.data:[])}catch(ke){console.error(ke),ke.response?.status===403&&H.warn("Unable to load deals (permission denied).")}},[]),Ae=h.useCallback(async()=>{try{const ke=await ie.get("/accounts/admin/fetch-all");d(Array.isArray(ke.data)?ke.data:[])}catch(ke){console.error(ke),ke.response?.status===403&&H.warn("Unable to load accounts (permission denied).")}},[]),Ie=h.useCallback(async()=>{try{const ke=await ie.get("/contacts/admin/fetch-all");f(Array.isArray(ke.data)?ke.data:[])}catch(ke){console.error(ke),ke.response?.status===403&&H.warn("Unable to load contacts (permission denied).")}},[]),Je=h.useCallback(async()=>{try{const ke=await ie.get("/users/all");x(Array.isArray(ke.data)?ke.data:[])}catch(ke){console.error(ke),ke.response?.status===403&&H.warn("Unable to load users (permission denied).")}},[]);h.useEffect(()=>{Te(),Ye(),Ae(),Ie(),Je()},[Te,Ye,Ae,Ie,Je]);const he=h.useMemo(()=>{const ke=F.trim().toLowerCase(),pt=V.trim();return n.filter(_e=>{const W=le(_e),ae=ge(_e),$e=fe(_e),Ge=yA(_e.presented_date,_e.validity_days),ue=[_e.quote_id,W,ae,$e,_e.total_amount?.toString(),_e.validity_days?.toString(),_e.presented_date?dg(_e.presented_date):"",Ge?dg(Ge):"",_e.assigned_user?.first_name,_e.assigned_user?.last_name,_e.creator?.first_name,_e.creator?.last_name,_e.status,_e.notes,ab(_e.created_at),ab(_e.updated_at)],se=ke===""||ue.some(ht=>ht==null?!1:ht.toString().toLowerCase().includes(ke)),He=pt==="Filter by Status"||Ci(_e.status)===pt;return se&&He})},[n,F,V,le,ge,fe]),Me=Math.max(1,Math.ceil(he.length/X)||1);h.useEffect(()=>ve(1),[F,V,X]),h.useEffect(()=>{ve(ke=>{const pt=Math.max(1,Math.ceil(he.length/X)||1);return ke>pt?pt:ke})},[he.length,X]);const re=h.useMemo(()=>{const ke=(R-1)*X;return he.slice(ke,ke+X)},[he,R,X]),Qe=()=>ve(ke=>Math.max(ke-1,1)),We=()=>ve(ke=>Math.min(ke+1,Me)),dt=ke=>{C(ke),Oe("Overview"),me(Ci(ke?.status)||"Draft")},ze=()=>{C(null),Oe("Overview")},ce=ke=>{ke.target.id==="quoteModalBackdrop"&&!z&&ze()},ye=h.useCallback(()=>{S(!1),k(!1),O(null),Q(pA),T(!1)},[]),Ue=ke=>{ke.target.id==="modalBackdrop"&&!_&&!z&&ye()},et=ke=>{const{name:pt,value:_e}=ke.target;if(pt==="deal_id"){const{accountId:W,contactId:ae}=pe(_e);Q($e=>({...$e,deal_id:_e,account_id:W,contact_id:ae}));return}Q(W=>({...W,[pt]:_e}))},lt=()=>{Q(pA),k(!1),O(null),S(!0)},Ee=ke=>{if(!ke)return;C(null);const pt=ke.deal?.id?String(ke.deal.id):ke.deal_id?String(ke.deal_id):"",_e=pt?pe(pt):{accountId:"",contactId:""},W=ke.account?.id?String(ke.account.id):ke.account_id?String(ke.account_id):_e.accountId,ae=ke.contact?.id?String(ke.contact.id):ke.contact_id?String(ke.contact_id):_e.contactId,$e=ke.assigned_user?.id?String(ke.assigned_user.id):ke.assigned_to?String(ke.assigned_to):"";Q({deal_id:pt,account_id:W||"",contact_id:ae||"",total_amount:ke.total_amount?.toString()||"",presented_date:QBe(ke.presented_date),validity_days:ke.validity_days!==null&&ke.validity_days!==void 0?String(ke.validity_days):"",status:Ci(ke.status)||"Draft",assigned_to:$e,notes:ke.notes||""}),k(!0),O(ke.id),S(!0)},tt=ke=>{if(!ke)return;const pt=ke.quote_id||"this quote";I({title:"Delete Quote",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:pt}),"? This action cannot be undone."]}),confirmLabel:"Delete Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ke.id,name:pt}})},[be,Xe]=h.useState(!1),M=ke=>{if(ke.preventDefault(),Xe(!0),!v){H.error("Unable to determine current user. Please log in again.");return}if(!B.deal_id){H.error("Deal is required.");return}if(!B.assigned_to){H.error("Assigned To is required.");return}const _e=pe(B.deal_id),W={deal_id:Number(B.deal_id),account_id:_e.accountId?Number(_e.accountId):null,contact_id:_e.contactId?Number(_e.contactId):null,total_amount:Number(B.total_amount),presented_date:B.presented_date||null,validity_days:B.validity_days===""?null:Number(B.validity_days),status:B.status||"Draft",assigned_to:B.assigned_to?Number(B.assigned_to):null,notes:B.notes?.trim()||null},ae=A&&P?"update":"create",$e=Le(B.deal_id),Ge=ae==="create"?{...W,created_by_id:Number(v)}:W;I({title:ae==="create"?"Confirm New Quote":"Confirm Update",message:ae==="create"?a.jsxs("span",{children:["Are you sure you want to create a quote for"," ",a.jsx("span",{className:"font-semibold",children:$e}),"?"]}):a.jsxs("span",{children:["Save changes to"," ",a.jsx("span",{className:"font-semibold",children:$e}),"?"]}),confirmLabel:ae==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:ae,payload:Ge,targetId:P||null,name:$e}})},U=async()=>{if(!E?.action){I(null);return}const{action:ke}=E,{type:pt,payload:_e,targetId:W,name:ae}=ke;$(!0);try{if(pt==="create")T(!0),await ie.post("/quotes/admin",_e),H.success("Quote created successfully."),ye(),await Te();else if(pt==="update"){if(!W)throw new Error("Missing quote identifier for update.");T(!0),await ie.put(`/quotes/admin/${W}`,_e),H.success("Quote updated successfully."),ye(),await Te(),b?.id===W&&C(null)}else if(pt==="delete"){if(!W)throw new Error("Missing quote identifier for deletion.");const $e=b?.id;Z(W),await ie.delete(`/quotes/admin/${W}`),H.success(`Quote "${ae}" deleted successfully.`),await Te($e&&$e!==W?$e:null),$e===W&&C(null)}}catch($e){console.error($e);const Ge=pt==="create"?"Failed to create quote. Please review the details and try again.":pt==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";H.error(Ge),(pt==="create"||pt==="update")&&T(!1),pt==="delete"&&Z(null)}finally{(pt==="create"||pt==="update")&&T(!1),pt==="delete"&&Z(null),$(!1),I(null)}},Y=()=>{z||I(null)},te=h.useCallback((ke,pt)=>{const _e=ke?.deal_id??ke?.deal?.id??"",W=_e?Number(_e):null,ae=W?pe(String(W)):{accountId:"",contactId:""},$e=ke?.account_id??ke?.account?.id??ae.accountId??null,Ge=ke?.contact_id??ke?.contact?.id??ae.contactId??null,ue=ke?.total_amount??0,se=ke?.assigned_to??ke?.assigned_user?.id??null;return{deal_id:W,account_id:$e!=null&&String($e).trim()!==""?Number($e):null,contact_id:Ge!=null&&String(Ge).trim()!==""?Number(Ge):null,total_amount:Number(ue),presented_date:ke?.presented_date||null,validity_days:ke?.validity_days===""||ke?.validity_days===void 0||ke?.validity_days===null?null:Number(ke.validity_days),status:pt,assigned_to:se!=null&&String(se).trim()!==""?Number(se):null,notes:ke?.notes?.trim()||null}},[pe]),K=h.useCallback(async()=>{if(!b?.id)return;const ke=Ci(Fe),pt=[ke,ke.toLowerCase()],_e=async W=>ie.patch(`/quotes/admin/${b.id}/status`,{status:W},{headers:{"Content-Type":"application/json"}});try{let W=!1;for(const ae of pt)try{await _e(ae),W=!0;break}catch($e){if($e?.response?.status===422)continue;throw $e}if(!W){const ae=te(b,ke);if(!ae.deal_id){H.error("Cannot update status: missing deal_id on selected quote.");return}if(!ae.total_amount||ae.total_amount<=0){H.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await ie.put(`/quotes/admin/${b.id}`,ae)}H.success(`Quote status updated to ${ke}`),C(null),Oe("Overview"),await Te()}catch(W){console.error(W);const ae=W?.response?.data?.message||(W?.response?.data?.errors?Object.values(W.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";H.error(ae)}},[b,Fe,Te,te]),Se=[{label:"Filter by Status",value:"Filter by Status"},...gA.map(ke=>({label:ke.label,value:ke.value}))],G=E?.action?.type==="delete"?E.action.targetId:null,J=b&&(oe===b.id||G===b.id),De=b&&oe===b.id,Ve=b?a.jsx("div",{id:"quoteModalBackdrop",onClick:ce,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:ke=>ke.stopPropagation(),children:[a.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:a.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),a.jsx("button",{onClick:ze,className:"text-gray-500 hover:text-white transition cursor-pointer",children:a.jsx(Ha,{size:25})})]})}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:le(b)}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${KBe(b.status)}`,children:xA(b.status)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Ee(b),disabled:z||E?.action?.type==="update"&&E.action.targetId===b.id,children:[a.jsx(nn,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>tt(b),disabled:!!J,children:De?"Deleting...":a.jsxs(a.Fragment,{children:[a.jsx(Wt,{className:"mr-2"}),"Delete"]})})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-1 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(ke=>a.jsx("button",{onClick:()=>Oe(ke),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${Ne===ke?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:ke},ke))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[Ne==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Quote ID:"}),a.jsx("p",{children:x8(b.quote_id)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Deal:"}),a.jsx("p",{children:le(b)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Account:"}),a.jsx("p",{children:ge(b)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Contact:"}),a.jsx("p",{children:fe(b)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Total Amount:"}),a.jsx("p",{children:b.total_amount?`${Number(b.total_amount).toLocaleString()}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Presented Date:"}),a.jsx("p",{children:dg(b.presented_date)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Validity Days:"}),a.jsx("p",{children:b.validity_days!==null&&b.validity_days!==void 0?b.validity_days:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),a.jsx("p",{children:dg(yA(b.presented_date,b.validity_days))||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Status:"}),a.jsx("p",{children:xA(b.status)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:b.assigned_user?`${b.assigned_user.first_name} ${b.assigned_user.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:b.creator?`${b.creator.first_name} ${b.creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:ab(b.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:ab(b.updated_at)||"N/A"})]})]})}),Ne==="Notes"&&a.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),a.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:b.notes||"No notes available."})]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/group-manager/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/group-manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Quotes"}}}),children:[a.jsx(_t,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/group-manager/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Gt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:Fe||Ci(b.status)||"Draft",onChange:ke=>me(ke.target.value),children:gA.map(ke=>a.jsx("option",{value:ke.value,children:ke.label},ke.value))}),a.jsx("button",{onClick:K,disabled:Ci(Fe)===Ci(b.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Ci(Fe)===Ci(b.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,ft=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&a.jsx(zt,{message:"Loading quotes..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(ga,{className:"mr-2 text-blue-600"})," Quotes"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{lt(),Xe(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(da,{className:"mr-2"})," Add Quote"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search quotes",value:F,onChange:ke=>ee(ke.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:V,onChange:ke=>de(ke.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:Se.map(ke=>a.jsx("option",{value:ke.value,children:ke.label},ke.value))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),a.jsx("th",{className:"py-3 px-4",children:"Deal"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Expiry Date"})]})}),a.jsx("tbody",{children:r?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"Loading quotes..."})}):he.length>0?re.map(ke=>{const pt=yA(ke.presented_date,ke.validity_days);return a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>dt(ke),children:[a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:x8(ke.quote_id)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"break-words",children:le(ke)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-sm text-gray-700 break-words",children:ge(ke)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"break-words",children:fe(ke)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-gray-700",children:ke.total_amount?`${Number(ke.total_amount).toLocaleString()}`:"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${YBe(ke.status)}`,children:xA(ke.status)})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{children:ke.assigned_user?`${ke.assigned_user.first_name} ${ke.assigned_user.last_name}`:"Unassigned"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-gray-500 text-xs",children:dg(pt)||"--"})})]},ke.id)}):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No quotes found."})})})]})}),a.jsx(Jt,{className:"mt-4",totalItems:he.length,pageSize:X,currentPage:R,onPrev:Qe,onNext:We,onPageSizeChange:je,label:"quotes"})]}),bt=N?a.jsx("div",{id:"modalBackdrop",onClick:Ue,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:ke=>ke.stopPropagation(),children:[a.jsx("button",{onClick:()=>{ye(),Xe(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:_||z,children:a.jsx(Vt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:A?"Edit Quote":"Add New Quote"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:M,children:[a.jsx(b8,{label:"Deal",name:"deal_id",value:B.deal_id,onChange:ke=>{const{accountId:pt,contactId:_e}=pe(ke);Q(W=>({...W,deal_id:ke,account_id:pt,contact_id:_e}))},items:Array.isArray(l)?l:[],getLabel:ke=>`${p8(ke?.deal_id??"")} ${ke?.name??""}`.trim(),placeholder:"Search deal...",required:!0,isSubmitted:be,disabled:_||l.length===0,className:"md:col-span-2"}),a.jsx(y8,{label:"Account",value:we(B.account_id)||(B.account_id?`Account #${B.account_id}`:""),disabled:!0}),a.jsx(y8,{label:"Contact",value:ne(B.contact_id)||(B.contact_id?`Contact #${B.contact_id}`:""),disabled:!0}),a.jsx(bA,{label:"Total Amount",name:"total_amount",type:"number",value:B.total_amount,onChange:et,placeholder:"0.00",disabled:_}),a.jsx(bA,{label:"Presented Date",name:"presented_date",type:"date",value:B.presented_date,onChange:et,disabled:_}),a.jsx(bA,{label:"Validity Days",name:"validity_days",type:"number",value:B.validity_days,onChange:et,placeholder:"30",disabled:_}),a.jsx(b8,{label:"Assigned To",value:B.assigned_to||"",onChange:ke=>Q(pt=>({...pt,assigned_to:ke})),items:Array.isArray(p)?p:[],getLabel:ke=>{const pt=`${ke?.first_name??""} ${ke?.last_name??""}`.trim();return pt?ke?.role?`${pt} (${ke.role})`:pt:ke?.email||""},placeholder:"Search assignee...",required:!0,isSubmitted:be,disabled:_}),a.jsx(aHe,{label:"Status",name:"status",value:B.status,onChange:et,options:gA,required:!0,disabled:_,className:"md:col-span-2"}),a.jsx(nHe,{label:"Notes",name:"notes",value:B.notes,onChange:et,placeholder:"Additional details...",rows:3,disabled:_,className:"md:col-span-2"}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:()=>{ye(),Xe(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:_||z,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:_||z,children:_?"Saving...":A?"Update Quote":"Save Quote"})]})]})]})}):null,jt=E?a.jsx(sHe,{open:!0,title:E.title,message:E.message,confirmLabel:E.confirmLabel,cancelLabel:E.cancelLabel,variant:E.variant,onConfirm:U,onCancel:Y,loading:z}):null;return a.jsxs(a.Fragment,{children:[b?Ve:ft,bt,jt]})}function bA({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,className:c="",isSubmitted:d=!1}){const u=d&&!n?.trim();return a.jsxs("div",{className:c,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function y8({label:e,value:t,className:n="",disabled:s=!0}){return a.jsxs("div",{className:n,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("input",{type:"text",value:t??"",disabled:s,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function b8({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!n;return a.jsxs("div",{className:o,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(tHe,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:l,hasError:u})]})}function tHe({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,hasError:o=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",w=h.useMemo(()=>{const b=u.trim().toLowerCase();return(b?e.filter(N=>(s(N)||"").toLowerCase().includes(b)):e).slice(0,l)},[e,u,s,l]);return h.useEffect(()=>{const b=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),h.useEffect(()=>{c||f("")},[c]),a.jsxs("div",{ref:p,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:c?u:v,placeholder:r,onFocus:()=>!i&&d(!0),onChange:b=>{f(b.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${o?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:w.length>0?w.map(b=>{const C=String(b.id),N=s(b),S=String(t)===C;return a.jsx("button",{type:"button",onClick:()=>{n(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:N||"--"},C)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function aHe({label:e,name:t,value:n,onChange:s,options:r,required:i=!1,disabled:l=!1,className:o=""}){const c=n!=null?String(n):"",u=r.some(f=>String(f.value)===c)?c:"";return a.jsxs("div",{className:o,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:u,onChange:s,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(f=>a.jsx("option",{value:String(f.value??""),children:f.label},f.value??f.label))})]})}function nHe({label:e,name:t,value:n,onChange:s,placeholder:r,rows:i=3,disabled:l=!1,className:o=""}){return a.jsxs("div",{className:o,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:s,placeholder:r,rows:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function sHe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}function rHe(){const{userRole:e}=zs();return a.jsx(ej,{currentUserRole:e,currentUserId:null})}const v8=["Not started","In progress","Deferred","Completed"],iHe=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const n=t.getTimezoneOffset();return new Date(t.getTime()-n*60*1e3).toISOString().slice(0,16)},w8=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},lHe=e=>{const t=e.subject?.trim()??"",n=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),e.status&&String(e.status).toUpperCase();let r=null,i=null,l=null,o=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2&&(o=Number(e.relatedTo2)));const c=e.assignedTo?Number(e.assignedTo):null,d=l||o||i||r,u=l?"Contact":o?"Deal":i?"Account":r?"Lead":null;return{title:t,description:n,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:c,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:l,deal_id:o,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:d,related_type:u}},oHe=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",n=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",l=()=>e.lead?.id||e.lead_id,o=()=>e.account?.id||e.account_id,c=()=>e.contact?.id||e.contact_id,d=()=>e.deal?.id||e.deal_id,u=()=>e.task_assign_to?.id||e.assigned_to,f=()=>e.lead?.title||e.lead_id,p=()=>e.account?.name||e.account_id,x=()=>i||e.contact_id,v=()=>e.deal?.name||e.deal_id;let w="Lead",b="",C="",N="",S="Lead",A="",k="",_="";const T=o(),E=p(),I=l(),z=f();if(T){w="Account",S="Account",A=E,b=String(T);const $=c(),P=d(),O=x(),B=v();$?(C="Contact",k="Contact",_=O,N=String($)):P&&(k="Deal",C="Deal",_=B,N=String(P))}else I?(S="Lead",A=z,w="Lead",b=String(I)):e.related_type==="Account"&&(w="Account",b=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:e.status||"Not started",dueDate:s,dateAssigned:r,assignedToId:u()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:n,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:S,relatedTo1Text:A,relatedType2Text:k,relatedTo2Text:_,subject:e.title,relatedType1:w,relatedTo1:b,relatedType2:C,relatedTo2:N}};function cHe(){h.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=ta(),[n,s]=h.useState("board"),[r,i]=h.useState(!1),[l,o]=h.useState(null),[c,d]=h.useState(!1),[u,f]=h.useState([]),[p,x]=h.useState(!0),[v,w]=h.useState(""),[b,C]=h.useState("Filter by Status"),[N,S]=h.useState("Filter by Priority"),[A,k]=h.useState([]),[_,T]=h.useState(1),[E,I]=h.useState(10),[z,$]=h.useState(null),[P,O]=h.useState(!1),[B,Q]=h.useState(null),F=vt(),ee=Yt(),[V,de]=h.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""});h.useEffect(()=>{const le=ee.state?.openTaskModal,ge=ee.state?.initialTaskData,fe=ee.state?.taskID;le?(i(!0),ge&&de(Te=>({...Te,...ge})),F(ee.pathname,{replace:!0,state:{}})):fe&&(Q(fe),F(ee.pathname,{replace:!0,state:{}}))},[ee,F]),h.useEffect(()=>{if(B&&u.length>0&&!p){const le=u.find(ge=>ge.id===B);le?ve(le,!0):H.error("Task not found."),Q(null)}},[B,u,p]);const oe=async()=>{try{const le=await ie.get("/users/all");k(Array.isArray(le.data)?le.data:[])}catch(le){console.error("Failed to fetch users:",le),H.error("Failed to fetch users.")}},Z=async()=>{try{x(!0);const le=await ie.get("/tasks/all"),fe=(Array.isArray(le.data)?le.data:[]).map(oHe);fe.sort((Te,Ye)=>{const Ae=Te.createdAt?new Date(Te.createdAt):0;return(Ye.createdAt?new Date(Ye.createdAt):0)-Ae}),f(fe),n==="list"&&T(1)}catch(le){console.error("Failed to load tasks:",le),H.error("Failed to load tasks.")}finally{x(!1)}};h.useEffect(()=>{!t&&e&&(oe(),Z())},[t,e]);const R=()=>{o(null),de({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},ve=(le=null,ge=!1)=>{o(le),d(ge),le?de({id:le.id,subject:le.title||"",description:le.description||"",priority:le.priority||"Normal",status:le.status||"Not started",dueDate:iHe(le.dueDate),assignedTo:le.assignedToId?String(le.assignedToId):"",notes:le.notes||"",relatedType1Text:le.relatedType1Text||"",relatedTo1Text:le.relatedTo1Text||"",relatedType2Text:le.relatedType2Text||"",relatedTo2Text:le.relatedTo2Text||"",relatedType1:le.relatedType1||"",relatedTo1:le.relatedTo1||"",relatedType2:le.relatedType2||"",relatedTo2:le.relatedTo2||""}):R(),i(!0)},X=()=>{i(!1),o(null),d(!1),R()},je=async le=>{const ge=lHe(le);try{l&&!c?(await ie.put(`/tasks/${l.id}`,ge),H.success("Task updated successfully.")):(await ie.post("/tasks/create",ge),H.success("Task created successfully.")),i(!1),await Z()}catch(fe){console.error("Failed to save task:",fe);const Te=fe.response?.data?.detail||"Failed to save task.";H.error(Te)}},Ne=le=>{le&&$({title:"Delete Task",message:a.jsxs(a.Fragment,{children:["Are you sure you want to delete ",a.jsx("span",{className:"font-semibold",children:le.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:le.id}})},Oe=async()=>{if(!z?.action){$(null);return}const{action:le}=z;O(!0);try{le.type==="delete"&&(await ie.delete(`/tasks/${le.targetId}`),H.success("Task deleted successfully."),await Z())}catch(ge){console.error("Task action failed:",ge),H.error("Failed to delete task.")}finally{O(!1),$(null)}},Fe=()=>{P||$(null)},me=h.useMemo(()=>{const le=v.trim().toLowerCase();return[...u].sort((fe,Te)=>{const Ye=fe.createdAt?new Date(fe.createdAt):0;return(Te.createdAt?new Date(Te.createdAt):0)-Ye}).filter(fe=>{const Te=le===""||fe.title?.toLowerCase().includes(le)||fe.description?.toLowerCase().includes(le)||fe.assignedToName?.toLowerCase().includes(le)||fe.createdBy?.toLowerCase().includes(le),Ye=b==="Filter by Status"||fe.status===b,Ae=N==="Filter by Priority"||fe.priority===N;return Te&&Ye&&Ae})},[u,v,b,N]);h.useEffect(()=>{T(1)},[v,b,N,n,E]),h.useEffect(()=>{if(n==="list"){const le=me.length===0?1:Math.ceil(me.length/E);_>le&&T(le)}},[me.length,_,n,E]);const Be=h.useMemo(()=>{if(n==="board")return me;const le=(_-1)*E;return me.slice(le,le+E)},[me,_,n,E]),Pe=h.useMemo(()=>{const le=new Date;return[{title:"To Do",value:u.filter(ge=>ge.status==="Not started").length,icon:Is,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:u.filter(ge=>ge.status==="In progress").length,icon:hl,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:u.filter(ge=>ge.status==="Completed").length,icon:xn,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:u.filter(ge=>ge.dueDate&&new Date(ge.dueDate)<le&&ge.status!=="Completed").length,icon:Ef,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:u.filter(ge=>ge.priority==="High").length,icon:ko,color:"text-orange-600",bgColor:"bg-orange-100"}]},[u]),we=le=>le.dueDate&&new Date(le.dueDate)<new Date&&le.status!=="Completed",ne=le=>{switch(le.status){case"Not started":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Deferred":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},Le=le=>{switch(le){case"Not started":return"bg-blue-100 text-blue-700";case"In progress":return"bg-purple-100 text-purple-700";case"Deferred":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},pe=le=>{switch(le){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&a.jsx(zt,{message:"Loading tasks..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(hl,{className:"text-blue-600"})," Tasks Board"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{type:"button",onClick:()=>ve(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[a.jsx(da,{})," Create Task"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Pe.map(le=>a.jsx(dHe,{...le},le.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search tasks",value:v,onChange:le=>w(le.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[a.jsxs("select",{value:b,onChange:le=>C(le.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"Filter by Status"}),v8.map(le=>a.jsx("option",{children:le},le))]}),a.jsxs("select",{value:N,onChange:le=>S(le.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"Filter by Priority"}),a.jsx("option",{children:"High"}),a.jsx("option",{children:"Normal"}),a.jsx("option",{children:"Low"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${n==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),a.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${n==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&n==="board"&&(me.length>0?a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:v8.map(le=>{const ge=Be.filter(fe=>fe.status===le);return a.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),a.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:le}),a.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:ge.length})]}),a.jsx("div",{className:`space-y-3 ${ge.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:ge.length>0?ge.map(fe=>a.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${ne(fe)}`,onClick:()=>ve(fe,!0),children:[a.jsxs("div",{className:"text-left flex-1",children:[a.jsx("p",{className:"font-medium text-gray-800 text-sm",children:fe.title}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",fe.priority]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",fe.assignedToName]}),a.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",a.jsx("span",{className:we(fe)?"text-red-600":"text-gray-600",children:fe.dateAssigned?w8(fe.dateAssigned):""})]})]}),a.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[a.jsx("button",{type:"button",onClick:Te=>{Te.stopPropagation(),ve(fe)},className:"text-blue-500 hover:text-blue-700",children:a.jsx(rn,{})}),a.jsx("button",{type:"button",onClick:Te=>{Te.stopPropagation(),Ne(fe)},className:"text-red-500 hover:text-red-700",children:a.jsx(Wt,{})})]})]},fe.id)):a.jsx("div",{className:"text-center py-10 text-gray-500",children:"No tasks"})})]},le)})}):a.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No tasks found."})),!p&&!t&&n==="list"&&a.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"})]})}),a.jsx("tbody",{children:Be.length>0?Be.map(le=>a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",onClick:()=>{ve(le,!0)},children:[a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",children:le.title}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Le(le.status||"Not started")}`,children:le.status||"Not started"})}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${pe(le.priority||"Low")}`,children:le.priority||"Low"})}),a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:le.assignedToName||"Unassigned"}),a.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${we(le)?"text-red-600 font-medium":""}`,children:le.dateAssigned?w8(le.dateAssigned):""})]},le.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No tasks found."})})})]})})}),!p&&!t&&n==="list"&&a.jsx(Jt,{className:"mt-6",totalItems:me.length,pageSize:E,currentPage:me.length===0?0:_,onPrev:()=>T(le=>Math.max(le-1,1)),onNext:()=>T(le=>Math.min(le+1,Math.max(1,Math.ceil(me.length/E)||1))),onPageSizeChange:I,label:"tasks"}),a.jsx(Ox,{isOpen:r,onClose:X,onSave:je,onEdit:()=>d(!1),setFormData:de,formData:V,isEditing:!c&&!!l,viewMode:c,users:A,currentUser:e,onDelete:Ne}),z&&a.jsx(uHe,{open:!0,title:z.title,message:z.message,confirmLabel:z.confirmLabel,cancelLabel:z.cancelLabel,variant:z.variant,onConfirm:Oe,onCancel:Fe,loading:P})]})}function dHe({icon:e,title:t,value:n,color:s,bgColor:r,onClick:i}){return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function uHe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r,variant:i,loading:l,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}const XX=e=>e?e.toUpperCase():"",nb=e=>{const t=XX(e);return t==="PLANNED"||t==="IN PROGRESS"?"PLANNED":t==="HELD"||t==="DONE"?"HELD":t==="NOT_HELD"||t==="NOT HELD"?"NOT_HELD":"PLANNED"},mHe=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},fHe=e=>{const t=XX(e);switch(t==="PLANNED"?"PENDING":t==="HELD"?"COMPLETED":t==="NOT_HELD"?"CANCELLED":t){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},vA={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},hHe=()=>{const e=vt(),t=Yt(),[n]=ks(),s=n.get("id"),r=t.pathname==="/admin/meetings/info";h.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[i,l]=h.useState([]),[o,c]=h.useState(!1),[d,u]=h.useState([]),[f,p]=h.useState(""),[x,v]=h.useState("Filter by Status"),[w,b]=h.useState(!1),[C,N]=h.useState(null),[S,A]=h.useState(1),[k,_]=h.useState(10),[T,E]=h.useState(vA),[I,z]=h.useState(!1),[$,P]=h.useState(null),[O,B]=h.useState(!1),[Q,F]=h.useState(null),[ee,V]=h.useState(!1),[de,oe]=h.useState(null);h.useEffect(()=>{const ne=t.state?.openMeetingModal,Le=t.state?.initialMeetingData?.relatedTo||n.get("id"),pe=t.state?.meetingID;ne||Le?(b(!0),t.state?.initialMeetingData&&E(le=>({...le,...t.state.initialMeetingData})),e(t.pathname,{replace:!0,state:{}})):pe&&(oe(pe),e(t.pathname,{replace:!0,state:{}}))},[t,n,e]),h.useEffect(()=>{if(de&&i.length>0&&!o){const ne=i.find(Le=>Le.id===de);ne?N(ne):H.error("Meeting not found."),oe(null)}},[de,i,o]);const Z=async()=>{if(s&&r){const ne=sessionStorage.getItem("meetingDetailData");if(ne)try{const Le=JSON.parse(ne);if(Le.id===parseInt(s)){N(Le),sessionStorage.removeItem("meetingDetailData");return}}catch(Le){console.error(Le)}}c(!0);try{const ne=await ie.get("/meetings/admin/fetch-all"),pe=[...Array.isArray(ne.data)?ne.data:[]].sort((le,ge)=>{const fe=le?.createdAt?new Date(le.createdAt).getTime():0;return(ge?.createdAt?new Date(ge.createdAt).getTime():0)-fe});if(l(pe),s&&!C){const le=pe.find(ge=>ge.id===parseInt(s));le&&N(le)}}catch{H.error("Failed to load meetings.")}finally{c(!1)}},R=async()=>{try{const ne=await ie.get("/users/all");u(Array.isArray(ne.data)?ne.data:[])}catch(ne){console.error(ne)}};h.useEffect(()=>{Z(),R()},[]);const ve=ne=>p(ne.target.value),X=h.useMemo(()=>{const ne=f.trim().toLowerCase(),Le=x.trim().toUpperCase();return i.filter(pe=>{const le=[pe?.activity,pe?.description,pe?.relatedTo,pe?.assignedTo],ge=ne===""||le.some(Te=>Te&&Te.toString().toLowerCase().includes(ne)),fe=Le==="FILTER BY STATUS"||nb(pe.status||"PENDING")===Le;return ge&&fe})},[i,f,x]),je=h.useMemo(()=>{const ne=(S-1)*k;return X.slice(ne,ne+k)},[X,S,k]),Ne=()=>{b(!1),E(vA),z(!1),P(null),B(!1)},Oe=()=>{E(vA),z(!1),P(null),b(!0)},Fe=ne=>{let Le="";if(ne.meet_assign_to?.id)Le=String(ne.meet_assign_to.id);else if(ne.assignedTo){const Je=d.find(he=>`${he.first_name} ${he.last_name}`===ne.assignedTo);Le=Je?String(Je.id):""}const pe=Je=>{if(!Je)return"";try{const he=new Date(Je),Me=he.getTimezoneOffset()*6e4;return new Date(he.getTime()-Me).toISOString().slice(0,16)}catch{return""}};let le="Lead",ge="",fe="Contact",Te="";if(ne.lead)le="Lead",ge=String(ne.lead.id);else if(ne.account)le="Account",ge=String(ne.account.id),ne.contact?(fe="Contact",Te=String(ne.contact.id)):ne.deal&&(fe="Deal",Te=String(ne.deal.id));else if(ne.relatedType||ne.related_type){const Je=ne.relatedType||ne.related_type,he=ne.related_to||ne.relatedToId;Je==="Lead"?(le="Lead",ge=String(he)):(le="Account",ge=ne.account_id?String(ne.account_id):"")}const Ye={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},Ae=nb(ne.status),Ie=Ye[Ae]||"Planned";E({subject:ne.subject||ne.activity||"",location:ne.location||"",startTime:pe(ne.start_time||ne.startTime),endTime:pe(ne.end_time||ne.endTime),status:Ie,notes:ne.description||ne.notes||"",assignedTo:Le,relatedType1:le,relatedTo1:ge,relatedType2:fe,relatedTo2:Te}),z(!0),P(ne.id),N(null),b(!0)},me=ne=>{if(!ne.subject?.trim())return H.error("Subject is required.");if(!ne.startTime)return H.error("Start time is required.");if(ne.endTime&&!(new Date(ne.endTime)-new Date(ne.startTime)>0))return H.error("End time must be after start time.");ne.relatedType1,ne.relatedTo1,ne.relatedType1==="Account"&&ne.relatedType2&&ne.relatedTo2&&(ne.relatedType2,ne.relatedTo2);const Le={...ne,assignedTo:parseInt(ne.assignedTo),relatedTo1:parseInt(ne.relatedTo1),relatedTo2:parseInt(ne.relatedTo2)},pe=I&&$?"update":"create";F({title:pe==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${pe} "${Le.subject}"?`,confirmLabel:pe==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:pe,payload:Le,targetId:$,name:Le.subject}})},Be=async()=>{if(!Q?.action)return;const{type:ne,payload:Le,targetId:pe,name:le}=Q.action;V(!0);try{ne==="create"?(B(!0),await ie.post("/meetings/create",Le),H.success(`Meeting "${le}" created.`),Ne(),await Z()):ne==="update"?(B(!0),await ie.put(`/meetings/${pe}`,Le),H.success(`Meeting "${le}" updated.`),Ne(),await Z()):ne==="delete"&&(await ie.delete(`/meetings/${pe}`),H.success(`Meeting "${le}" deleted.`),C?.id===pe&&N(null),await Z())}catch(ge){const fe=ge.response?.data?.detail||"Action failed.";H.error(typeof fe=="string"?fe:JSON.stringify(fe)),console.error(fe)}finally{B(!1),V(!1),F(null)}},Pe=ne=>{F({title:"Delete Meeting",message:`Permanently delete "${ne.activity}"?`,confirmLabel:"Delete",variant:"danger",action:{type:"delete",targetId:ne.id,name:ne.activity}})},we=async(ne,Le)=>{try{await ie.put(`/meetings/${ne}`,{status:Le}),H.success("Status updated"),Z(),N(null)}catch{H.error("Failed to update status")}};return r&&s?C?a.jsx(qc,{meeting:C,onClose:()=>{N(null),e("/admin/dashboard")},onEdit:Fe,onDelete:Pe,onStatusUpdate:we}):a.jsx(zt,{message:"Loading meeting..."}):a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[o&&a.jsx(zt,{message:"Loading meetings..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[a.jsx(_t,{className:"mr-2 text-blue-600"})," Meetings"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:Oe,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[a.jsx(da,{className:"mr-2"})," Add Meeting"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[a.jsx(Bt,{className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search meetings",value:f,onChange:ve,className:"w-full outline-none"})]}),a.jsxs("select",{value:x,onChange:ne=>v(ne.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[a.jsx("option",{children:"Filter by Status"}),a.jsx("option",{value:"PLANNED",children:"PLANNED"}),a.jsx("option",{value:"HELD",children:"HELD"}),a.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Subject"}),a.jsx("th",{className:"py-3 px-4",children:"Related To"}),a.jsx("th",{className:"py-3 px-4",children:"Start Time"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned"}),a.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),a.jsx("tbody",{children:je.length>0?je.map(ne=>a.jsxs("tr",{onClick:()=>N(ne),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[a.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:ne.subject}),a.jsxs("td",{className:"py-3 px-4",children:[ne.lead&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ne.lead.title}),ne.account&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ne.account.name}),ne.contact&&a.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[ne.contact.first_name," ",ne.contact.last_name]}),ne.deal&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ne.deal.name})]}),a.jsx("td",{className:"py-3 px-4",children:mHe(ne.start_time)}),a.jsxs("td",{className:"py-3 px-4",children:[ne.meet_assign_to.first_name," ",ne.meet_assign_to.last_name]}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${fHe(nb(ne.status))}`,children:nb(ne.status).replace("_"," ")})})]},ne.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),a.jsx(Jt,{totalItems:X.length,pageSize:k,currentPage:S,onPrev:()=>A(ne=>Math.max(1,ne-1)),onNext:()=>A(ne=>ne+1),onPageSizeChange:_,label:"meetings"}),w&&a.jsx(uj,{onClose:Ne,formData:T,setFormData:E,isEditing:I,onSubmit:me,isSubmitting:O||ee,users:d}),C&&a.jsx(qc,{meeting:C,onClose:()=>N(null),onEdit:Fe,onDelete:Pe,onStatusUpdate:we}),Q&&a.jsx(gHe,{open:!0,title:Q.title,message:Q.message,confirmLabel:Q.confirmLabel,variant:Q.variant,onConfirm:Be,onCancel:()=>F(null),loading:ee})]})};function gHe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{onClick:c,disabled:l,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),a.jsx("button",{onClick:o,disabled:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${d}`,children:l?"...":s})]})]})})}const pHe=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"}],xHe=e=>e?String(e).toUpperCase():"",Wm=e=>{const t=xHe(e);return t==="PLANNED"||t==="PENDING"?"PLANNED":t==="HELD"||t==="COMPLETED"?"HELD":t==="NOT HELD"||t==="NOT_HELD"||t==="CANCELLED"?"NOT_HELD":"PLANNED"},wA=e=>{const t=Wm(e);return t==="PLANNED"?"PLANNED":t==="HELD"?"HELD":t==="NOT_HELD"?"NOT HELD":"--"},N8=e=>{switch(Wm(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},j8=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function yHe(){const[e,t]=h.useState(!1),[n,s]=h.useState(null),[r,i]=h.useState(null),[l,o]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(null),[v,w]=h.useState(!1),[b,C]=h.useState(null),[N,S]=h.useState(!1),[A,k]=h.useState(!1),[_,T]=h.useState("PLANNED"),[E,I]=h.useState(!1),[z,$]=h.useState(!1),[P,O]=h.useState(null);ks();const B=vt(),Q=Yt(),ee={subject:"",call_time:(()=>{const Ee=new Date,tt=Ee.getFullYear(),be=String(Ee.getMonth()+1).padStart(2,"0"),Xe=String(Ee.getDate()).padStart(2,"0");return`${tt}-${be}-${Xe}T08:00`})(),duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[V,de]=h.useState(ee);h.useEffect(()=>{const Ee=Q.state,tt=Ee?.callID;if(tt&&!Ee?.openCallModal){O(tt),B(Q.pathname,{replace:!0,state:{}});return}!Ee?.openCallModal||!Ee?.initialCallData||Ee.initialCallData.relatedType1==="Lead"&&Array.isArray(l)&&l.length===0||Ee.initialCallData.relatedType1==="Account"&&(!Array.isArray(l)||l.length===0)||(t(!0),de(be=>({...be,...Ee.initialCallData,relatedTo1:Ee.initialCallData.relatedTo1?String(Ee.initialCallData.relatedTo1):"",relatedTo2:Ee.initialCallData.relatedTo2?String(Ee.initialCallData.relatedTo2):""})),B(Q.pathname,{replace:!0,state:{}}))},[Q.state,l]),h.useEffect(()=>{if(P&&u.length>0&&!z){const Ee=u.find(tt=>tt.id===P);Ee?s(Ee):H.error("Call not found."),O(null)}},[P,u,z]);const oe=async()=>{try{$(!0);const Ee=await ie.get("/calls/admin/fetch-all"),be=[...Array.isArray(Ee.data)?Ee.data:[]].sort((Xe,M)=>{const U=Xe?.created_at?new Date(Xe.created_at):0;return(M?.created_at?new Date(M.created_at):0)-U});f(be)}catch(Ee){console.error("Error fetching calls:",Ee),H.error("Failed to load calls")}finally{$(!1)}},Z=async()=>{try{const Ee=await ie.get("/users/all");x(Ee.data)}catch(Ee){console.error("Error fetching users: ",Ee)}};h.useEffect(()=>{Z(),oe()},[]);const R=[],[ve,X]=h.useState(""),[je,Ne]=h.useState("Filter by Status"),[Oe,Fe]=h.useState("Filter by Users"),[me,Be]=h.useState(1),[Pe,we]=h.useState(10),ne=u,Le=Math.max(1,Math.ceil(ne.length/Pe)||1);h.useEffect(()=>{Be(1)},[ve,je,Pe]),h.useEffect(()=>{Be(Ee=>{const tt=Math.max(1,Math.ceil(ne.length/Pe)||1);return Ee>tt?tt:Ee})},[ne.length,Pe]);const pe=h.useMemo(()=>{const Ee=(me-1)*Pe;return ne.slice(Ee,Ee+Pe)},[ne,me,Pe]),le=()=>Be(Ee=>Math.max(Ee-1,1)),ge=()=>Be(Ee=>Math.min(Ee+1,Le)),fe=u.length,Te=u.filter(Ee=>Wm(Ee.status)==="PLANNED").length,Ye=u.filter(Ee=>Wm(Ee.status)==="HELD").length,Ae=u.filter(Ee=>Wm(Ee.status)==="NOT_HELD").length,Ie=[{title:"Total",value:fe,icon:Es,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:Te,icon:Is,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:Ye,icon:xn,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:Ae,icon:Ts,color:"text-gray-600",bgColor:"bg-gray-100"}],[Je,he]=h.useState("Overview"),Me=Ee=>{const{name:tt,value:be}=Ee.target;de(Xe=>{const M={...Xe,[tt]:be};return tt==="relatedType1"&&(M.relatedTo1="",be==="Lead"?(M.relatedType2=null,M.relatedTo2=null,d([])):be==="Account"&&(M.relatedType2="Contact")),tt==="relatedType2"&&(M.relatedTo2=""),M})};h.useEffect(()=>{const Ee=async()=>{try{o([]);let tt;V.relatedType1==="Lead"?tt=await ie.get("/leads/admin/getLeads"):V.relatedType1==="Account"&&(tt=await ie.get("/accounts/admin/fetch-all"));let be=[];if(tt&&Array.isArray(tt.data)?be=tt.data:be=[],v&&V.relatedTo1)try{let Xe;V.relatedType1==="Lead"?Xe=await ie.get(`/leads/get/${V.relatedTo1}`):V.relatedType1==="Account"&&(Xe=await ie.get(`/accounts/get/${V.relatedTo1}`)),Xe&&Xe.data&&(be.some(U=>String(U.id)===String(V.relatedTo1))||(be=[Xe.data,...be]))}catch(Xe){console.error("Error fetching specific related item:",Xe)}o(be)}catch(tt){console.error("Error fetching data:",tt),o([])}};V.relatedType1&&Ee()},[V.relatedType1,v,V.relatedTo1]),h.useEffect(()=>{const Ee=async()=>{try{d([]);let tt;if(V.relatedType1==="Account"&&V.relatedTo1)V.relatedType2==="Contact"?tt=await ie.get(`/contacts/from-acc/${V.relatedTo1}`):V.relatedType2==="Deal"&&(tt=await ie.get(`/deals/from-acc/${V.relatedTo1}`));else{d([]);return}let be=[];if(tt&&Array.isArray(tt.data)?be=tt.data:be=[],v&&V.relatedTo2)try{let Xe;V.relatedType2==="Contact"?Xe=await ie.get(`/contacts/get/${V.relatedTo2}`):V.relatedType2==="Deal"&&(Xe=await ie.get(`/deals/get/${V.relatedTo2}`)),Xe&&Xe.data&&(be.some(U=>String(U.id)===String(V.relatedTo2))||(be=[Xe.data,...be]))}catch(Xe){console.error("Error fetching specific related item:",Xe)}d(be)}catch(tt){console.error("Error fetching data:",tt),d([])}};V.relatedType2&&Ee()},[V.relatedType2,V.relatedTo1,V.relatedType1,v,V.relatedTo2]);const[re,Qe]=h.useState(!1),We=Ee=>{Ee.preventDefault(),Qe(!0);const tt=V.subject;if(!tt||tt.trim()===""){H.error("Subject is required.");return}if(!V.relatedTo1){H.error(`Please select a ${V.relatedType1||"Lead/Account"}.`);return}if(!V.assigned_to){H.error("Subject is required.");return}const Xe={...V,duration_minutes:V.duration_minutes?parseInt(V.duration_minutes,10):null,relatedTo1:V.relatedTo1?parseInt(V.relatedTo1,10):null,relatedTo2:V.relatedType1==="Lead"?null:V.relatedTo2?parseInt(V.relatedTo2,10):null,relatedType2:V.relatedType1==="Lead"?null:V.relatedType2,assigned_to:V.assigned_to?parseInt(V.assigned_to,10):null},M=v&&b?"update":"create",U=(V.subject||"").trim()||"Untitled Call";i({title:M==="create"?"Confirm New Call":"Confirm Update",message:M==="create"?`Create "${U}"?`:`Save changes to "${U}"?`,confirmLabel:M==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:M,payload:Xe,targetId:b||null,name:U}})},dt=Ee=>s(Ee),ze=()=>{t(!1),w(!1),C(null)},ce=async()=>{if(!r?.action){i(null);return}const{action:Ee}=r,{type:tt,payload:be,targetId:Xe,name:M}=Ee;k(!0);try{if(tt==="create")S(!0),await ie.post("/calls/create",be),H.success(`Call "${M}" created successfully.`),t(!1),de(ee),w(!1),C(null),await oe();else if(tt==="update"){if(!Xe)throw new Error("Missing call identifier for update.");S(!0),await ie.put(`/calls/${Xe}`,be),H.success(`Call "${M}" updated successfully.`),t(!1),de(ee),w(!1),C(null),await oe()}else if(tt==="delete"){if(!Xe)throw new Error("Missing call identifier for deletion.");await ie.delete(`/calls/${Xe}`),H.success(`Call "${M}" deleted successfully.`),n?.id===Xe&&s(null),await oe()}}catch(U){const Y=tt==="create"?"Failed to create call. Please review the details and try again.":tt==="update"?"Failed to update call. Please review the details and try again.":"Failed to delete call. Please try again.",te=U?.response?.data?.detail||Y;H.error(te)}finally{(tt==="create"||tt==="update")&&S(!1),k(!1),i(null)}},ye=()=>{A||i(null)},Ue=async()=>{if(n?.id)try{I(!0),await ie.put(`/calls/${n.id}`,{status:_}),H.success(`Status updated to ${wA(_)}`),f(Ee=>Array.isArray(Ee)?Ee.map(tt=>tt.id===n.id?{...tt,status:_}:tt):Ee),s(null)}catch(Ee){const tt=Ee.response?.data?.detail||"Failed to update status.";H.error(tt)}finally{I(!1)}};h.useEffect(()=>{n&&T(Wm(n.status))},[n]);const et=n?a.jsxs("div",{id:"callModalBackdrop",onClick:Ee=>Ee.target.id==="callModalBackdrop"&&s(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[z&&a.jsx(zt,{message:"Loading call details..."}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),a.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:a.jsx(Ha,{size:25})})]}),a.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:n.subject}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${N8(n.status)}`,children:wA(n.status)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const Ee=U=>{if(!U)return"";const Y=new Date(U),te=Y.getFullYear(),K=String(Y.getMonth()+1).padStart(2,"0"),Se=String(Y.getDate()).padStart(2,"0"),G=String(Y.getHours()).padStart(2,"0"),J=String(Y.getMinutes()).padStart(2,"0");return`${te}-${K}-${Se}T${G}:${J}`},tt=n.lead?"Lead":n.account?"Account":"Lead",be=n.lead?n.lead.id:n.account?n.account.id:null,Xe=tt==="Lead"?null:n.contact?"Contact":n.deal?"Deal":"Contact",M=tt==="Lead"?null:n.contact?n.contact.id:n.deal?n.deal.id:null;de({subject:n.subject||"",call_time:Ee(n.call_time),duration_minutes:n.duration_minutes?String(n.duration_minutes):"",direction:n.direction||"Outgoing",status:n.status||"Planned",notes:n.notes||"",relatedType1:tt,relatedType2:Xe,relatedTo1:be?String(be):"",relatedTo2:M?String(M):"",assigned_to:n.call_assign_to?.id?String(n.call_assign_to.id):""}),w(!0),C(n.id),s(null),t(!0)},children:[a.jsx(nn,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>{const Ee=n.subject||"this call";i({title:"Delete Call",message:`Are you sure you want to permanently delete "${Ee}"? This action cannot be undone.`,confirmLabel:"Delete Call",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:n.id,name:Ee}})},children:[a.jsx(Wt,{className:"mr-2"}),"Delete"]})]})]})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(Ee=>a.jsx("button",{onClick:()=>he(Ee),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${Je===Ee?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:Ee},Ee))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[Je==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsx(Xl,{label:"Call Time",value:j8(n.call_time)}),a.jsx(Xl,{label:"Duration",value:n.duration_minutes?`${n.duration_minutes} min`:null}),a.jsx(Xl,{label:"Direction",value:n.direction||"--"}),a.jsx(Xl,{label:"Assigned To",value:`${n.call_assign_to.first_name} ${n.call_assign_to.last_name}`}),n.lead&&a.jsx(Xl,{label:"Lead",value:n.lead.title}),n.account&&a.jsx(Xl,{label:"Account",value:n.account.name}),n.contact&&a.jsx(Xl,{label:"Contact",value:`${n.contact.first_name} ${n.contact.last_name}`}),n.deal&&a.jsx(Xl,{label:"Deal",value:n.deal.name}),a.jsx(Xl,{label:"Created At",value:j8(n.created_at)})]})}),Je==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Call Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:n.notes||"No notes available."})]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:_,onChange:Ee=>T(Ee.target.value),children:[a.jsx("option",{value:"PLANNED",children:"PLANNED"}),a.jsx("option",{value:"HELD",children:"HELD"}),a.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),a.jsx("button",{onClick:Ue,disabled:E,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:E?"Updating...":"Update"})]})]})]})]})]}):null,lt=e?a.jsx("div",{id:"modalBackdrop",onClick:Ee=>Ee.target.id==="modalBackdrop"&&ze(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[a.jsx("button",{onClick:()=>{ze(),Qe(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(Vt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:v?"Edit Call":"Add New Call"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:We,noValidate:!0,children:[a.jsx(vHe,{label:"Subject",className:"md:col-span-2",name:"subject",value:V.subject,onChange:Me,isSubmitted:re,required:!0}),a.jsxs("div",{className:"w-full flex flex-col",children:[a.jsxs("select",{name:"relatedType1",onChange:Me,value:V.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:N,children:[a.jsx("option",{value:"Lead",children:"Lead"}),a.jsx("option",{value:"Account",children:"Account"})]}),a.jsx(NA,{items:Array.isArray(l)?l:[],value:V.relatedTo1??"",placeholder:`Search ${V.relatedType1||"here"}...`,getLabel:Ee=>V.relatedType1==="Lead"?Ee.title:Ee.name??"",onChange:Ee=>de(tt=>({...tt,relatedTo1:Ee})),required:!0,isSubmitted:re,disabled:N})]}),a.jsxs("div",{className:"w-full flex flex-col",children:[a.jsxs("select",{name:"relatedType2",onChange:Me,value:V.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:V.relatedType1==="Lead"||N,children:[a.jsx("option",{value:"Contact",children:"Contact"}),a.jsx("option",{value:"Deal",children:"Deal"})]}),a.jsx(NA,{disabled:V.relatedType1==="Lead"||N,items:Array.isArray(c)?c:[],value:V.relatedTo2??"",placeholder:V.relatedType1==="Lead"?"":Array.isArray(c)&&c.length>0?`Search ${V.relatedType2||"Contact"}...`:`No ${V.relatedType2||""} data found`,getLabel:Ee=>V.relatedType2==="Contact"?`${Ee.first_name??""} ${Ee.last_name??""}`.trim():Ee.name??"",onChange:Ee=>de(tt=>({...tt,relatedTo2:Ee}))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),a.jsx("input",{type:"datetime-local",value:V.call_time,onChange:Me,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),a.jsxs("div",{className:"w-full",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),a.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[a.jsx("input",{type:"tel",value:V.duration_minutes,onChange:Me,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),a.jsx("p",{children:"minutes"})]})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",a.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),a.jsx(NA,{items:Array.isArray(p)?p:[],value:V.assigned_to??"",placeholder:"Search an account...",getLabel:Ee=>`${Ee.first_name} ${Ee.last_name}`,onChange:Ee=>de(tt=>({...tt,assigned_to:Ee})),required:!0,isSubmitted:re})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),a.jsxs("select",{name:"direction",onChange:Me,value:V.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[a.jsx("option",{value:"Incoming",children:"Incoming"}),a.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),a.jsxs("select",{name:"status",onChange:Me,value:V.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[a.jsx("option",{value:"Planned",children:"Planned"}),a.jsx("option",{value:"Held",children:"Held"}),a.jsx("option",{value:"Not held",children:"Not held"})]})]}),a.jsx(wHe,{className:"col-span-2",label:"Notes",value:V.notes,onChange:Me,name:"notes"}),a.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[a.jsx("button",{type:"button",onClick:()=>{ze(),Qe(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:N,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:N?"Saving...":v?"Update Call":"Save Call"})]})]})]})}):null;return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(Es,{className:"mr-2 text-blue-600"})," Calls"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{de(ee),w(!1),C(null),t(!0),Qe(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(da,{className:"mr-2"})," Add Call"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ie.map(Ee=>a.jsx(bHe,{...Ee},Ee.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[a.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",defaultValue:ve})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[a.jsxs("select",{defaultValue:je,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[a.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),pHe.map(Ee=>a.jsx("option",{value:Ee.value,children:Ee.label},Ee.value))]}),a.jsxs("select",{defaultValue:Oe,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[a.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),R.map(Ee=>a.jsx("option",{value:Ee.name,children:Ee.name},Ee.id))]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Subject"}),a.jsx("th",{className:"py-3 px-4",children:"Related To"}),a.jsx("th",{className:"py-3 px-4",children:"Call Time"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),a.jsx("tbody",{children:z?a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"py-10",children:a.jsx(zt,{message:"Loading calls..."})})}):pe.length>0?pe.map(Ee=>a.jsxs("tr",{onClick:()=>dt(Ee),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[a.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:Ee.subject||"--"}),a.jsxs("td",{className:"py-3 px-4",children:[Ee.lead&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Ee.lead.title}),Ee.account&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Ee.account.name}),Ee.contact&&a.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[Ee.contact.first_name," ",Ee.contact.last_name]}),Ee.deal&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Ee.deal.name})]}),a.jsx("td",{className:"py-3 px-4 text-gray-800",children:Ee.call_time?new Date(Ee.call_time).toLocaleString():"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800",children:Ee?.call_assign_to?`${Ee.call_assign_to.first_name} ${Ee.call_assign_to.last_name}`:"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${N8(Ee.status)}`,children:wA(Ee.status)})})]},Ee.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),a.jsx(Jt,{totalItems:ne.length,pageSize:Pe,currentPage:me,onPrev:le,onNext:ge,onPageSizeChange:we,label:"calls"})]}),et,lt,r&&a.jsx(NHe,{open:!0,title:r.title,message:r.message,confirmLabel:r.confirmLabel,onConfirm:ce,onCancel:ye,loading:A})]})}function bHe({icon:e,title:t,value:n,color:s,bgColor:r}){return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[a.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:a.jsx(e,{size:22})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function vHe({label:e,name:t,value:n,onChange:s,placeholder:r="",type:i="text",required:l=!1,disabled:o=!1,isSubmitted:c=!1,className:d=""}){const u=c&&l&&!n;return a.jsxs("div",{className:d,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
        `})]})}function wHe(e){return a.jsxs("div",{className:e.className,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),a.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function Xl({label:e,value:t}){return a.jsxs("p",{children:[a.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",a.jsx("br",{}),a.jsx("span",{className:"break-words",children:t||"--"})]})}function NHe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}function NA({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,required:o=!1,isSubmitted:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),v=e.find(N=>String(N.id)===String(t)),w=v?s(v):"",b=o&&c&&!t,C=h.useMemo(()=>{const N=f.trim().toLowerCase();return(N?e.filter(A=>(s(A)||"").toLowerCase().includes(N)):e).slice(0,l)},[e,f,s,l]);return h.useEffect(()=>{const N=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),h.useEffect(()=>{d||p("")},[d]),a.jsxs("div",{ref:x,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:d?f:w,placeholder:r,onFocus:()=>!i&&u(!0),onChange:N=>{p(N.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${b?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:C.length>0?C.map(N=>{const S=String(N.id),A=s(N),k=String(t)===S;return a.jsx("button",{type:"button",onClick:()=>{n(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:A||"--"},S)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function jHe(){h.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,t]=h.useState(null),[n,s]=h.useState(""),[r,i]=h.useState("Filter by Actions"),[l,o]=h.useState(1),[c,d]=h.useState(10),u=async()=>{try{const N=await ie.get("/logs/read-all");t(N.data)}catch(N){console.error("Error fetching audit logs:",N)}};h.useEffect(()=>{u()},[]);const f=h.useMemo(()=>{if(!Array.isArray(e))return[];const N=n.trim().toLowerCase(),S=r?.toUpperCase?.()||"ALL";return e.filter(k=>{const _=k.timestamp?new Date(k.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",T=`${k.entity_type||""} ${k.entity_name||k.entity_details?.name||k.entity_details?.title||k.entity_id||""}`,E=`${k.logger?.first_name||""} ${k.logger?.last_name||""}`,I=[_,E,k.action,k.entity_type,T,k.description],z=N===""||I.some(P=>P==null?!1:P.toString().toLowerCase().includes(N)),$=S==="FILTER BY ACTIONS"||(k.action||"").toUpperCase()===S;return z&&$}).sort((k,_)=>{const T=k.timestamp?new Date(k.timestamp).getTime():0;return(_.timestamp?new Date(_.timestamp).getTime():0)-T})},[e,n,r]),p=Math.max(1,Math.ceil(f.length/c)||1);h.useEffect(()=>{o(1)},[n,c]),h.useEffect(()=>{o(N=>{const S=Math.max(1,Math.ceil(f.length/c)||1);return N>S?S:N})},[f.length,c]);const x=h.useMemo(()=>{const N=(l-1)*c;return f.slice(N,N+c)},[f,l,c]);f.length===0||(l-1)*c+1,Math.min(l*c,f.length);const v=()=>o(N=>Math.max(N-1,1)),w=()=>o(N=>Math.min(N+1,p)),b=()=>{if(!f.length){cx.error("No logs to export!");return}const N=["Timestamp","User","Action","Resource","Details"],S=f.map(E=>[new Date(E.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${E.logger?.first_name||""} ${E.logger?.last_name||""}`.trim(),E.action,`${E.entity_type}: ${E.entity_id}`,E.description||""]),A=[N.join(","),...S.map(E=>E.map(I=>`"${String(I).replace(/"/g,'""')}"`).join(","))].join(`
`),k=new Blob([A],{type:"text/csv;charset=utf-8;"}),_=URL.createObjectURL(k),T=document.createElement("a");T.href=_,T.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(T),T.click(),document.body.removeChild(T),URL.revokeObjectURL(_)},C=N=>{switch((N||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&a.jsx(zt,{message:"Loading audit logs..."}),a.jsx(ox,{toastOptions:{duration:1e3}}),a.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[a.jsx(_t,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),a.jsxs("p",{className:"text-sm text-blue-700",children:[a.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ys,{className:"text-blue-600",size:20}),a.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:b,children:[a.jsx(To,{className:"mr-2"}),"Export Logs"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[a.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search audit logs",value:n,onChange:N=>s(N.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:r,onChange:N=>i(N.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),a.jsx("option",{value:"CREATE",children:"CREATE"}),a.jsx("option",{value:"DELETE",children:"DELETE"}),a.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),a.jsx("th",{className:"py-3 px-4",children:"User"}),a.jsx("th",{className:"py-3 px-4",children:"Action"}),a.jsx("th",{className:"py-3 px-4",children:"Resource"}),a.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),a.jsx("tbody",{children:Array.isArray(f)&&f.length>0?x.map((N,S)=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(N.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),a.jsx("td",{className:"py-3 px-4 text-gray-700",children:N.name}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${C(N.action)}`,children:N.action})}),a.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[N.entity_type,": ",N.entity_id]}),a.jsx("td",{className:"py-3 px-4 text-gray-700",children:N.description})]},S)):a.jsx("tr",{children:a.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),a.jsx(Jt,{className:"mt-4",totalItems:f.length,pageSize:c,currentPage:l,onPrev:v,onNext:w,onPageSizeChange:d,label:"logs"})]})}const bj=[{value:"Manager",label:"Manager"},{value:"Sales",label:"Sales"}],ug={firstName:"",lastName:"",email:"",password:"",role:""},CHe={CEO:"bg-purple-100 text-purple-700",ADMIN:"bg-purple-100 text-purple-700",GROUP_MANAGER:"bg-indigo-100 text-indigo-700",MANAGER:"bg-blue-100 text-blue-700",MARKETING:"bg-yellow-100 text-yellow-700",SALES:"bg-green-100 text-green-700"},sl=e=>e?e.toString().trim().replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/\s+/g,"_").toUpperCase():"",SHe=e=>{const t=sl(e),n=bj.find(s=>sl(s.value)===t);return n?n.value:e||""},UT=e=>{const t=sl(e),n=bj.find(s=>sl(s.value)===t);return n?n.label:typeof e=="string"?e.toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()):"--"},C8=e=>{if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",","")},jA=(e,{size:t="sm"}={})=>{const n=sl(e),s=CHe[n]||"bg-gray-100 text-gray-700",r=t==="lg"?"px-3 py-1 text-sm":t==="md"?"px-2.5 py-1 text-sm":"px-2 py-1 text-xs";return a.jsx("span",{className:`${r} font-semibold rounded-md inline-flex items-center justify-center ${s}`,children:UT(e)})},_He=(e,t)=>{const n=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${n}${s}`.toUpperCase()||"U"},S8=e=>[...e].sort((t,n)=>{const s=t.created_at?new Date(t.created_at).getTime():0;return(n.created_at?new Date(n.created_at).getTime():0)-s});function AHe(){const{user:e,loading:t}=ta(),[n,s]=h.useState([]),[r,i]=h.useState(!1),[l,o]=h.useState(""),[c,d]=h.useState(""),[u,f]=h.useState(null),[p,x]=h.useState(!1),[v,w]=h.useState(!1),[b,C]=h.useState(null),[N,S]=h.useState(ug),[A,k]=h.useState(!1),[_,T]=h.useState(null),[E,I]=h.useState(!1),[z,$]=h.useState(1),[P,O]=h.useState(10),[B,Q]=h.useState("Overview"),[F,ee]=h.useState(""),[V,de]=h.useState(!1),oe=sl(e?.role);console.log("meow",e);const Z=["ADMIN","CEO","GROUP_MANAGER"].includes(oe),R=!t&&Z,ve=h.useMemo(()=>{const re=bj.filter(Qe=>sl(Qe.value)!=="CEO");return[{label:"Filter by Roles",value:""},{label:"CEO",value:"CEO"},...re]},[]),X=h.useCallback(re=>{re&&(s(Qe=>Qe.map(We=>We.id===re?{...We,highlight:!0}:We)),setTimeout(()=>{s(Qe=>Qe.map(We=>We.id===re?{...We,highlight:!1}:We))},2e3))},[]),je=h.useCallback(async()=>{i(!0);try{const re=await ie.get("/users/all"),Qe=Array.isArray(re.data)?re.data:[],We=S8(Qe);s(We),f(dt=>dt&&(We.find(ce=>ce.id===dt.id)||null)),console.log(re.data)}catch(re){console.error("Error fetching users:",re);const Qe=re.response?.data?.detail||"Failed to load users. Please try again later.";H.error(Qe)}finally{i(!1)}},[]);h.useEffect(()=>{!t&&!Z&&e&&H.error("You are not authorized to access User Management.")},[Z,t,e]),h.useEffect(()=>{t||!Z||je()},[t,Z,je]),h.useEffect(()=>{document.title="Users | Sari-Sari CRM"},[]);const Ne=h.useMemo(()=>{const re=l.trim().toLowerCase(),Qe=sl(c);return S8(n.filter(We=>{if(!We)return!1;const dt=re===""||[We.first_name,We.last_name,`${We.first_name||""} ${We.last_name||""}`,We.email,UT(We.role)].filter(Boolean).some(ce=>ce.toString().toLowerCase().includes(re)),ze=Qe===""||Qe==="CEO"&&["CEO","ADMIN"].includes(sl(We.role))||sl(We.role)===Qe;return dt&&ze}))},[n,l,c]),Oe=Math.max(1,Math.ceil(Ne.length/P)||1);h.useEffect(()=>{$(1)},[l,c,P]),h.useEffect(()=>{$(re=>{const Qe=Math.max(1,Math.ceil(Ne.length/P)||1);return re>Qe?Qe:re})},[Ne.length,P]);const Fe=h.useMemo(()=>{const re=(z-1)*P;return Ne.slice(re,re+P)},[Ne,z,P]);Ne.length===0||(z-1)*P+1,Math.min(z*P,Ne.length);const me=()=>$(re=>Math.max(re-1,1)),Be=()=>$(re=>Math.min(re+1,Oe)),Pe=()=>{S(ug),w(!1),C(null),x(!0)},we=re=>{f(re),Q("Overview"),ee(re?.is_active?"Active":"Inactive")},ne=re=>{re.target.id==="userModalBackdrop"&&!E&&Le()},Le=()=>{f(null)},pe=(re,Qe)=>{S(We=>({...We,[re]:Qe}))},le=()=>{const re="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let Qe="";for(let We=0;We<10;We+=1)Qe+=re.charAt(Math.floor(Math.random()*re.length));pe("password",Qe)},ge=()=>{A||E||(x(!1),S(ug),C(null),w(!1))},fe=re=>{S({firstName:re.first_name||"",lastName:re.last_name||"",email:re.email||"",password:"",role:SHe(re.role)}),w(!0),C(re.id),x(!0),f(null)},Te=re=>{T({title:"Delete User",message:a.jsxs("span",{children:["Are you sure you want to delete"," ",a.jsxs("span",{className:"font-semibold",children:[re.first_name," ",re.last_name]}),"? This action cannot be undone."]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:re.id,name:`${re.first_name||""} ${re.last_name||""}`.trim()||re.email||"user"}})},Ye=re=>{re.preventDefault();const Qe=N.firstName.trim(),We=N.lastName.trim(),dt=N.email.trim(),ze=N.password.trim(),ce=N.role,ye=!(v&&b);if(!Qe||!dt||!ce){H.warn("Please fill in all required fields.");return}if(ye&&!ze){H.warn("Please fill in all required fields.");return}if(ze&&ze.length<8){H.warn("Password should be at least 8 characters long.");return}const Ue={first_name:Qe,last_name:We,email:dt,role:ce};(ye||ze)&&(Ue.password=ze);const et=`${Qe} ${We}`.trim(),lt=ye?"create":"update";T({title:lt==="create"?"Confirm New User":"Confirm User Update",message:lt==="create"?a.jsxs("span",{children:["Create user ",a.jsx("span",{className:"font-semibold",children:et})," with role"," ",a.jsx("span",{className:"font-semibold",children:UT(ce)}),"?"]}):a.jsxs("span",{children:["Save changes for"," ",a.jsx("span",{className:"font-semibold",children:et||dt}),"?"]}),confirmLabel:lt==="create"?"Create User":"Update User",cancelLabel:"Cancel",variant:"primary",action:{type:lt,payload:Ue,targetId:b,name:et||dt}})},Ae=async()=>{if(!_?.action){T(null);return}const{action:re}=_,{type:Qe,payload:We,targetId:dt,name:ze}=re;I(!0),(Qe==="create"||Qe==="update")&&k(!0);try{if(Qe==="create"){const ye=(await ie.post("/users/createuser",We)).data;await je(),X(ye.id),H.success(`User "${ze}" created successfully.`),x(!1),S(ug),C(null),w(!1)}else if(Qe==="update"){if(!dt)throw new Error("Missing user identifier for update.");const ye=(await ie.put(`/users/updateuser/${dt}`,We)).data;await je(),f(null),X(ye.id),H.success(`User "${ze}" updated successfully.`),x(!1),S(ug),C(null),w(!1)}else if(Qe==="delete"){if(!dt)throw new Error("Missing user identifier for deletion.");await ie.delete(`/users/deleteuser/${dt}`),s(ce=>ce.map(ye=>ye.id===dt?{...ye,is_active:!1}:ye)),u&&u.id===dt&&(f(null),ee("")),H.success(`User "${ze}" deactivated successfully.`)}}catch(ce){console.error("User management error:",ce);const ye=Qe==="create"?"Failed to create user. Please review the details and try again.":Qe==="update"?"Failed to update user. Please review the details and try again.":"Failed to delete user. Please try again.",Ue=ce.response?.data?.detail||ye;H.error(Ue)}finally{(Qe==="create"||Qe==="update")&&k(!1),I(!1),T(null)}},Ie=()=>{E||T(null)},Je=async()=>{if(!u||!F)return;const re=u.is_active?"Active":"Inactive";if(F===re)return;const Qe=F==="Active";de(!0);try{const dt=(await ie.put(`/users/updateuser/${u.id}`,{is_active:Qe})).data;s(ze=>ze.map(ce=>ce.id===dt.id?dt:ce)),f(null),ee(""),H.success(`User status updated to ${F}`)}catch(We){console.error("Failed to update user status:",We);const dt=We.response?.data?.detail||"Failed to update user status. Please try again.";H.error(dt)}finally{de(!1)}},he=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[(r||t||!R)&&a.jsx(zt,{}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(lw,{className:"mr-2 text-blue-600"}),"User Management"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{type:"button",onClick:Pe,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(Ba,{className:"mr-2"})," Add User"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Bt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search users",value:l,onChange:re=>o(re.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:c,onChange:re=>d(re.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:ve.map(re=>a.jsx("option",{value:re.value,children:re.label},re.value))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Fullname"}),a.jsx("th",{className:"py-3 px-4",children:"Email"}),a.jsx("th",{className:"py-3 px-4",children:"Role"}),a.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),a.jsx("tbody",{children:r?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:3,children:"Loading users..."})}):Ne.length===0?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-400",colSpan:4,children:"No users found."})}):Fe.map(re=>a.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${re.highlight?"bg-green-50":""} ${re.is_active?"":"opacity-60 bg-gray-50"}`,children:[a.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>we(re),children:a.jsxs("div",{className:"font-medium text-blue-600 hover:underline text-sm",children:[re.first_name," ",re.last_name]})}),a.jsx("td",{className:"py-3 px-4 cursor-pointer text-sm",onClick:()=>we(re),children:re.email}),a.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>we(re),children:jA(re.role)}),a.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>we(re),children:a.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-md ${re.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:re.is_active?"Active":"Inactive"})})]},re.id))})]})}),a.jsx(Jt,{className:"mt-4",totalItems:Ne.length,pageSize:P,currentPage:z,onPrev:me,onNext:Be,onPageSizeChange:O,label:"users"})]}),Me=u?a.jsx("div",{id:"userModalBackdrop",onClick:ne,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in p-4 sm:p-6 md:p-8 font-inter relative",children:[a.jsx("div",{className:"flex justify-end w-full",children:a.jsx("button",{onClick:Le,className:"text-gray-500 hover:text-gray-700 transition mb-5 cursor-pointer",children:a.jsx(Ha,{size:30})})}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7 mb-4 lg:mb-6 md:mb-4",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[u.profile_picture?a.jsx("img",{src:u.profile_picture,alt:`${u.first_name} ${u.last_name}`,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover border border-gray-200 shadow-sm"}):a.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-200 text-gray-700 flex items-center justify-center text-lg sm:text-xl font-semibold border border-gray-200 shadow-sm",children:_He(u.first_name,u.last_name)}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[u.first_name," ",u.last_name]}),a.jsx("p",{className:"text-sm text-gray-500 break-all",children:u.email})]})]}),jA(u.role,{size:"md"})]}),!["CEO","ADMIN","GROUP MANAGER","GROUP_MANAGER"].includes(u.role.toUpperCase())&&a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>fe(u),disabled:E,children:[a.jsx(rn,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>Te(u),disabled:E,children:[a.jsx(Wt,{className:"mr-2"}),"Delete"]})]})]}),a.jsx("div",{className:"border-b border-gray-200 mb-6"}),a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview"].map(re=>a.jsx("button",{onClick:()=>Q(re),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${B===re?"bg-[#5c636d] text-white border-white":"text-white hover:bg-[#5c636d]"}`,children:re},re))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsx("div",{className:"lg:col-span-3",children:B==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:u.email||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Role:"}),a.jsx("p",{children:jA(u.role,{size:"sm"})})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Status:"}),a.jsx("p",{children:u.is_active?"Active":"Inactive"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Auth Provider:"}),a.jsx("p",{children:u.auth_provider?u.auth_provider.toString().replace(/\b\w/g,re=>re.toUpperCase()):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Phone Number:"}),a.jsx("p",{children:u.phone_number||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Company:"}),a.jsx("p",{children:u.company?.company_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Company Number:"}),a.jsx("p",{children:u.company?.company_number||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Related to CEO:"}),a.jsx("p",{children:u.manager?`${u.manager.first_name} ${u.manager.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:C8(u.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Login:"}),a.jsx("p",{children:u.last_login?C8(u.last_login):"Never"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Profile Picture:"}),a.jsx("p",{children:u.profile_picture?a.jsx("a",{href:u.profile_picture,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline break-all",children:"View image"}):"N/A"})]})]})})}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsx("div",{className:"flex flex-col gap-2 w-full",children:a.jsxs("button",{type:"button",onClick:()=>{if(!u.email){alert("No email address available");return}const re=encodeURIComponent(u.email),Qe=encodeURIComponent(""),We=encodeURIComponent(""),dt=`https://mail.google.com/mail/?view=cm&fs=1&to=${re}&su=${Qe}&body=${We}`;window.open(dt,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Ka,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]})})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:F||(u.is_active?"Active":"Inactive"),onChange:re=>ee(re.target.value),children:[a.jsx("option",{value:"Active",children:"Active"}),a.jsx("option",{value:"Inactive",children:"Inactive"})]}),a.jsx("button",{onClick:Je,disabled:V||F===(u.is_active?"Active":"Inactive"),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${V||F===(u.is_active?"Active":"Inactive")?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:V?"Updating...":"Update"})]})]})]})]})}):null;return a.jsxs(a.Fragment,{children:[he,Me,a.jsx(EHe,{open:p,isEditing:v,isSubmitting:A,confirmProcessing:E,formData:N,onClose:ge,onSubmit:Ye,onChange:pe,onGeneratePassword:le}),a.jsx(THe,{open:!!_,title:_?.title,message:_?.message,confirmLabel:_?.confirmLabel,cancelLabel:_?.cancelLabel,variant:_?.variant,loading:E,onConfirm:Ae,onCancel:Ie})]})}function EHe({open:e,isEditing:t,isSubmitting:n,confirmProcessing:s,formData:r,onClose:i,onSubmit:l,onChange:o,onGeneratePassword:c}){if(!e)return null;const d=n||s;return a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-lg border border-gray-200 p-6 sm:p-8 relative overflow-y-auto max-h-[90vh]",children:[a.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:d,children:a.jsx(Vt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-6 text-center",children:t?"Edit User":"Add New User"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:l,children:[a.jsx(sb,{label:"First Name",value:r.firstName,onChange:u=>o("firstName",u),placeholder:"John",required:!0,disabled:d}),a.jsx(sb,{label:"Last Name",value:r.lastName,onChange:u=>o("lastName",u),placeholder:"Doe",required:!0,disabled:d}),a.jsx(sb,{label:"Email",type:"email",value:r.email,onChange:u=>o("email",u),placeholder:"john.doe@company.com",required:!0,disabled:d||t}),a.jsx(sb,{label:"Role",type:"select",value:r.role,onChange:u=>o("role",u),options:[{value:"",label:"Select role"},...bj],required:!0,disabled:d}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Password"}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[a.jsx("input",{type:"text",value:r.password,onChange:u=>o("password",u.target.value),placeholder:t?"Leave blank to keep current password":"Enter or generate password",required:!t,disabled:d,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"}),a.jsx("button",{type:"button",onClick:c,className:"flex items-center justify-center px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-60",disabled:d,children:"Generate"})]}),t?a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Setting a password will reset the user's credentials; leave it blank to keep the current password."}):a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long."})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:i,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:d,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:d,children:n?"Saving...":t?"Update User":"Save User"})]})]})]})})}function sb({label:e,type:t="text",value:n,onChange:s,placeholder:r,options:i=[],required:l=!1,disabled:o=!1}){return a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t==="select"?a.jsx("select",{value:n??"",onChange:c=>s(c.target.value),required:l,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100",children:i.map(c=>a.jsx("option",{value:c.value,children:c.label},c.value))}):a.jsx("input",{type:t,value:n??"",onChange:c=>s(c.target.value),placeholder:r,required:l,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"})]})}function THe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-black hover:bg-gray-800 border border-black";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("div",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:l,children:l?"Processing...":s})]})]})})}function kHe(){return a.jsxs(Pte,{children:[a.jsx(wae,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"colored",className:"z-[9999]"}),a.jsxs(ote,{children:[a.jsx(yt,{path:"/",element:a.jsx(wse,{})}),a.jsx(yt,{path:"/header",element:a.jsx(jB,{})}),a.jsx(yt,{path:"/signup",element:a.jsx(voe,{})}),a.jsx(yt,{path:"/login",element:a.jsx(Noe,{})}),a.jsx(yt,{path:"/forgot-password",element:a.jsx(Soe,{})}),a.jsxs(yt,{path:"/admin",element:a.jsx(zh,{requiredRole:"ceo",children:a.jsx(Eoe,{})}),children:[a.jsx(yt,{index:!0,element:a.jsx(Qr,{to:"dashboard",replace:!0})}),a.jsx(yt,{path:"dashboard",element:a.jsx(Cve,{})}),a.jsx(yt,{path:"accounts",element:a.jsx(Hve,{})}),a.jsx(yt,{path:"contacts",element:a.jsx(qve,{})}),a.jsx(yt,{path:"leads",element:a.jsx(ewe,{})}),a.jsx(yt,{path:"leads/:leadID",element:a.jsx(YW,{})}),a.jsx(yt,{path:"audit",element:a.jsx(Wwe,{})}),a.jsx(yt,{path:"targets",element:a.jsx(Y3e,{})}),a.jsx(yt,{path:"quotes",element:a.jsx(tOe,{})}),a.jsx(yt,{path:"users",element:a.jsx(cOe,{})}),a.jsx(yt,{path:"manage-account",element:a.jsx(fOe,{})}),a.jsx(yt,{path:"company-details",element:a.jsx(VMe,{})}),a.jsx(yt,{path:"deals",element:a.jsx(hOe,{})}),a.jsx(yt,{path:"deals/info",element:a.jsx(kx,{})}),a.jsx(yt,{path:"deals/quickaction",element:a.jsx(iQ,{})}),a.jsx(yt,{path:"tasks",element:a.jsx(_Me,{})}),a.jsxs(yt,{path:"/admin/territory",children:[a.jsx(yt,{index:!0,element:a.jsx(xc,{})}),a.jsx(yt,{path:":id",element:a.jsx(xc,{})})]}),a.jsx(yt,{path:"calls",element:a.jsx(b7,{})}),a.jsx(yt,{path:"calls/info",element:a.jsx(b7,{})}),a.jsx(yt,{path:"meetings",element:a.jsx(v7,{})}),a.jsx(yt,{path:"meetings/info",element:a.jsx(v7,{})})]}),a.jsxs(yt,{path:"/sales",element:a.jsx(zh,{requiredRole:"sales",children:a.jsx(YMe,{})}),children:[a.jsx(yt,{index:!0,element:a.jsx(Qr,{to:"overview",replace:!0})}),a.jsx(yt,{path:"overview",element:a.jsx(SIe,{})}),a.jsx(yt,{path:"accounts",element:a.jsx(EIe,{})}),a.jsx(yt,{path:"contacts",element:a.jsx(PIe,{})}),a.jsx(yt,{path:"leads",element:a.jsx(zIe,{})}),a.jsx(yt,{path:"leads/info",element:a.jsx(HQ,{})}),a.jsx(yt,{path:"leads/convert",element:a.jsx(VIe,{})}),a.jsx(yt,{path:"deals",element:a.jsx(qIe,{})}),a.jsx(yt,{path:"deals/info",element:a.jsx(JIe,{})}),a.jsx(yt,{path:"deals/quickaction",element:a.jsx(e$e,{})}),a.jsx(yt,{path:"quotes",element:a.jsx(l$e,{})}),a.jsx(yt,{path:"targets",element:a.jsx(m$e,{})}),a.jsx(yt,{path:"audit",element:a.jsx(f$e,{})}),a.jsx(yt,{path:"manage-account",element:a.jsx(ny,{})}),a.jsxs(yt,{path:"/sales/territory",children:[a.jsx(yt,{index:!0,element:a.jsx(xc,{})}),a.jsx(yt,{path:":id",element:a.jsx(xc,{})})]}),a.jsx(yt,{path:"meetings",element:a.jsx(N$e,{})}),a.jsx(yt,{path:"calls",element:a.jsx(_$e,{})}),a.jsx(yt,{path:"tasks",element:a.jsx(x$e,{})})]}),a.jsxs(yt,{path:"/manager",element:a.jsx(zh,{requiredRole:"manager",children:a.jsx(P$e,{})}),children:[a.jsx(yt,{index:!0,element:a.jsx(Qr,{to:"dashboard",replace:!0})}),a.jsx(yt,{path:"dashboard",element:a.jsx(c6e,{})}),a.jsx(yt,{path:"accounts",element:a.jsx(m6e,{})}),a.jsx(yt,{path:"contacts",element:a.jsx(p6e,{})}),a.jsx(yt,{path:"leads",element:a.jsx(j6e,{})}),a.jsx(yt,{path:"leads/info",element:a.jsx(QQ,{})}),a.jsx(yt,{path:"leads/convert",element:a.jsx(k6e,{})}),a.jsx(yt,{path:"deals",element:a.jsx(L6e,{})}),a.jsx(yt,{path:"deals/info",element:a.jsx($6e,{})}),a.jsx(yt,{path:"deals/quickaction",element:a.jsx(R6e,{})}),a.jsx(yt,{path:"quotes",element:a.jsx(W6e,{})}),a.jsx(yt,{path:"targets",element:a.jsx(Q6e,{})}),a.jsx(yt,{path:"meetings",element:a.jsx(hRe,{})}),a.jsx(yt,{path:"audit",element:a.jsx(X6e,{})}),a.jsx(yt,{path:"calls",element:a.jsx(eRe,{})}),a.jsx(yt,{path:"tasks",element:a.jsx(cRe,{})}),a.jsxs(yt,{path:"/manager/territory",children:[a.jsx(yt,{index:!0,element:a.jsx(xc,{})}),a.jsx(yt,{path:":id",element:a.jsx(xc,{})})]}),a.jsx(yt,{path:"users",element:a.jsx(bRe,{})}),a.jsx(yt,{path:"manage-account",element:a.jsx(ny,{})})]}),a.jsx(yt,{children:a.jsxs(yt,{path:"/marketing",element:a.jsx(zh,{requiredRole:"marketing",children:a.jsx(jRe,{})}),children:[a.jsx(yt,{index:!0,element:a.jsx(Qr,{to:"dashboard",replace:!0})}),a.jsx(yt,{path:"dashboard",element:a.jsx(w8e,{})}),a.jsx(yt,{path:"accounts",element:a.jsx(N8e,{})}),a.jsx(yt,{path:"contacts",element:a.jsx(C8e,{})}),a.jsx(yt,{path:"leads",element:a.jsx(k8e,{})}),a.jsx(yt,{path:"leads/info",element:a.jsx(GX,{})}),a.jsx(yt,{path:"leads/convert",element:a.jsx(HX,{})}),a.jsx(yt,{path:"tasks",element:a.jsx(O8e,{})}),a.jsx(yt,{path:"campaigns",element:a.jsx($8e,{})}),a.jsx(yt,{path:"templates",element:a.jsx(z8e,{})}),a.jsx(yt,{path:"manage-account",element:a.jsx(ny,{})})]})}),a.jsxs(yt,{path:"/group-manager",element:a.jsx(zh,{requiredRole:"group manager",children:a.jsx(F8e,{})}),children:[a.jsx(yt,{index:!0,element:a.jsx(Qr,{to:"dashboard",replace:!0})}),a.jsx(yt,{path:"dashboard",element:a.jsx(yBe,{})}),a.jsx(yt,{path:"accounts",element:a.jsx(wBe,{})}),a.jsx(yt,{path:"contacts",element:a.jsx(SBe,{})}),a.jsx(yt,{path:"leads",element:a.jsx(PBe,{})}),a.jsx(yt,{path:"leads/info",element:a.jsx(QX,{})}),a.jsx(yt,{path:"leads/convert",element:a.jsx(zBe,{})}),a.jsx(yt,{path:"deals",element:a.jsx(FBe,{})}),a.jsx(yt,{path:"deals/info",element:a.jsx(qBe,{})}),a.jsx(yt,{path:"deals/quickaction",element:a.jsx(mj,{})}),a.jsx(yt,{path:"quotes",element:a.jsx(eHe,{})}),a.jsx(yt,{path:"targets",element:a.jsx(rHe,{})}),a.jsx(yt,{path:"tasks",element:a.jsx(cHe,{})}),a.jsxs(yt,{path:"/group-manager/territory",children:[a.jsx(yt,{index:!0,element:a.jsx(xc,{})}),a.jsx(yt,{path:":id",element:a.jsx(xc,{})})]}),a.jsx(yt,{path:"meetings",element:a.jsx(hHe,{})}),a.jsx(yt,{path:"calls",element:a.jsx(yHe,{})}),a.jsx(yt,{path:"audit",element:a.jsx(jHe,{})}),a.jsx(yt,{path:"users",element:a.jsx(AHe,{})}),a.jsx(yt,{path:"manage-account",element:a.jsx(ny,{})})]})]})]})}pee.createRoot(document.getElementById("root")).render(a.jsx(h.StrictMode,{children:a.jsx(kHe,{})}));
