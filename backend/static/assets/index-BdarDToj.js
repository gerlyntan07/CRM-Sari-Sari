function F7(e,s){for(var a=0;a<s.length;a++){const n=s[a];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in e)){const i=Object.getOwnPropertyDescriptor(n,r);i&&Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function a(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=a(r);fetch(r.href,i)}})();function KC(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var tN={exports:{}},um={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tA;function B7(){if(tA)return um;tA=1;var e=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function a(n,r,i){var l=null;if(i!==void 0&&(l=""+i),r.key!==void 0&&(l=""+r.key),"key"in r){i={};for(var c in r)c!=="key"&&(i[c]=r[c])}else i=r;return r=i.ref,{$$typeof:e,type:n,key:l,ref:r!==void 0?r:null,props:i}}return um.Fragment=s,um.jsx=a,um.jsxs=a,um}var sA;function H7(){return sA||(sA=1,tN.exports=B7()),tN.exports}var t=H7(),sN={exports:{}},St={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aA;function G7(){if(aA)return St;aA=1;var e=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.for("react.activity"),y=Symbol.iterator;function N(W){return W===null||typeof W!="object"?null:(W=y&&W[y]||W["@@iterator"],typeof W=="function"?W:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,v={};function C(W,ee,J){this.props=W,this.context=ee,this.refs=v,this.updater=J||w}C.prototype.isReactComponent={},C.prototype.setState=function(W,ee){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,ee,"setState")},C.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function j(){}j.prototype=C.prototype;function _(W,ee,J){this.props=W,this.context=ee,this.refs=v,this.updater=J||w}var T=_.prototype=new j;T.constructor=_,p(T,C.prototype),T.isPureReactComponent=!0;var k=Array.isArray;function E(){}var A={H:null,A:null,T:null,S:null},U=Object.prototype.hasOwnProperty;function B(W,ee,J){var he=J.ref;return{$$typeof:e,type:W,key:ee,ref:he!==void 0?he:null,props:J}}function X(W,ee){return B(W.type,ee,W.props)}function $(W){return typeof W=="object"&&W!==null&&W.$$typeof===e}function O(W){var ee={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(J){return ee[J]})}var G=/\/+/g;function K(W,ee){return typeof W=="object"&&W!==null&&W.key!=null?O(""+W.key):ee.toString(36)}function ae(W){switch(W.status){case"fulfilled":return W.value;case"rejected":throw W.reason;default:switch(typeof W.status=="string"?W.then(E,E):(W.status="pending",W.then(function(ee){W.status==="pending"&&(W.status="fulfilled",W.value=ee)},function(ee){W.status==="pending"&&(W.status="rejected",W.reason=ee)})),W.status){case"fulfilled":return W.value;case"rejected":throw W.reason}}throw W}function R(W,ee,J,he,be){var Le=typeof W;(Le==="undefined"||Le==="boolean")&&(W=null);var Me=!1;if(W===null)Me=!0;else switch(Le){case"bigint":case"string":case"number":Me=!0;break;case"object":switch(W.$$typeof){case e:case s:Me=!0;break;case f:return Me=W._init,R(Me(W._payload),ee,J,he,be)}}if(Me)return be=be(W),Me=he===""?"."+K(W,0):he,k(be)?(J="",Me!=null&&(J=Me.replace(G,"$&/")+"/"),R(be,ee,J,"",function(ve){return ve})):be!=null&&($(be)&&(be=X(be,J+(be.key==null||W&&W.key===be.key?"":(""+be.key).replace(G,"$&/")+"/")+Me)),ee.push(be)),1;Me=0;var ke=he===""?".":he+":";if(k(W))for(var F=0;F<W.length;F++)he=W[F],Le=ke+K(he,F),Me+=R(he,ee,J,Le,be);else if(F=N(W),typeof F=="function")for(W=F.call(W),F=0;!(he=W.next()).done;)he=he.value,Le=ke+K(he,F++),Me+=R(he,ee,J,Le,be);else if(Le==="object"){if(typeof W.then=="function")return R(ae(W),ee,J,he,be);throw ee=String(W),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return Me}function Z(W,ee,J){if(W==null)return W;var he=[],be=0;return R(W,he,"","",function(Le){return ee.call(J,Le,be++)}),he}function te(W){if(W._status===-1){var ee=W._result;ee=ee(),ee.then(function(J){(W._status===0||W._status===-1)&&(W._status=1,W._result=J)},function(J){(W._status===0||W._status===-1)&&(W._status=2,W._result=J)}),W._status===-1&&(W._status=0,W._result=ee)}if(W._status===1)return W._result.default;throw W._result}var ge=typeof reportError=="function"?reportError:function(W){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof W=="object"&&W!==null&&typeof W.message=="string"?String(W.message):String(W),error:W});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",W);return}console.error(W)},le={map:Z,forEach:function(W,ee,J){Z(W,function(){ee.apply(this,arguments)},J)},count:function(W){var ee=0;return Z(W,function(){ee++}),ee},toArray:function(W){return Z(W,function(ee){return ee})||[]},only:function(W){if(!$(W))throw Error("React.Children.only expected to receive a single React element child.");return W}};return St.Activity=h,St.Children=le,St.Component=C,St.Fragment=a,St.Profiler=r,St.PureComponent=_,St.StrictMode=n,St.Suspense=d,St.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,St.__COMPILER_RUNTIME={__proto__:null,c:function(W){return A.H.useMemoCache(W)}},St.cache=function(W){return function(){return W.apply(null,arguments)}},St.cacheSignal=function(){return null},St.cloneElement=function(W,ee,J){if(W==null)throw Error("The argument must be a React element, but you passed "+W+".");var he=p({},W.props),be=W.key;if(ee!=null)for(Le in ee.key!==void 0&&(be=""+ee.key),ee)!U.call(ee,Le)||Le==="key"||Le==="__self"||Le==="__source"||Le==="ref"&&ee.ref===void 0||(he[Le]=ee[Le]);var Le=arguments.length-2;if(Le===1)he.children=J;else if(1<Le){for(var Me=Array(Le),ke=0;ke<Le;ke++)Me[ke]=arguments[ke+2];he.children=Me}return B(W.type,be,he)},St.createContext=function(W){return W={$$typeof:l,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null},W.Provider=W,W.Consumer={$$typeof:i,_context:W},W},St.createElement=function(W,ee,J){var he,be={},Le=null;if(ee!=null)for(he in ee.key!==void 0&&(Le=""+ee.key),ee)U.call(ee,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(be[he]=ee[he]);var Me=arguments.length-2;if(Me===1)be.children=J;else if(1<Me){for(var ke=Array(Me),F=0;F<Me;F++)ke[F]=arguments[F+2];be.children=ke}if(W&&W.defaultProps)for(he in Me=W.defaultProps,Me)be[he]===void 0&&(be[he]=Me[he]);return B(W,Le,be)},St.createRef=function(){return{current:null}},St.forwardRef=function(W){return{$$typeof:c,render:W}},St.isValidElement=$,St.lazy=function(W){return{$$typeof:f,_payload:{_status:-1,_result:W},_init:te}},St.memo=function(W,ee){return{$$typeof:m,type:W,compare:ee===void 0?null:ee}},St.startTransition=function(W){var ee=A.T,J={};A.T=J;try{var he=W(),be=A.S;be!==null&&be(J,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(E,ge)}catch(Le){ge(Le)}finally{ee!==null&&J.types!==null&&(ee.types=J.types),A.T=ee}},St.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},St.use=function(W){return A.H.use(W)},St.useActionState=function(W,ee,J){return A.H.useActionState(W,ee,J)},St.useCallback=function(W,ee){return A.H.useCallback(W,ee)},St.useContext=function(W){return A.H.useContext(W)},St.useDebugValue=function(){},St.useDeferredValue=function(W,ee){return A.H.useDeferredValue(W,ee)},St.useEffect=function(W,ee){return A.H.useEffect(W,ee)},St.useEffectEvent=function(W){return A.H.useEffectEvent(W)},St.useId=function(){return A.H.useId()},St.useImperativeHandle=function(W,ee,J){return A.H.useImperativeHandle(W,ee,J)},St.useInsertionEffect=function(W,ee){return A.H.useInsertionEffect(W,ee)},St.useLayoutEffect=function(W,ee){return A.H.useLayoutEffect(W,ee)},St.useMemo=function(W,ee){return A.H.useMemo(W,ee)},St.useOptimistic=function(W,ee){return A.H.useOptimistic(W,ee)},St.useReducer=function(W,ee,J){return A.H.useReducer(W,ee,J)},St.useRef=function(W){return A.H.useRef(W)},St.useState=function(W){return A.H.useState(W)},St.useSyncExternalStore=function(W,ee,J){return A.H.useSyncExternalStore(W,ee,J)},St.useTransition=function(){return A.H.useTransition()},St.version="19.2.0",St}var nA;function cu(){return nA||(nA=1,sN.exports=G7()),sN.exports}var g=cu();const at=KC(g),Hd=F7({__proto__:null,default:at},[g]);var aN={exports:{}},mm={},nN={exports:{}},rN={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rA;function V7(){return rA||(rA=1,(function(e){function s(R,Z){var te=R.length;R.push(Z);e:for(;0<te;){var ge=te-1>>>1,le=R[ge];if(0<r(le,Z))R[ge]=Z,R[te]=le,te=ge;else break e}}function a(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var Z=R[0],te=R.pop();if(te!==Z){R[0]=te;e:for(var ge=0,le=R.length,W=le>>>1;ge<W;){var ee=2*(ge+1)-1,J=R[ee],he=ee+1,be=R[he];if(0>r(J,te))he<le&&0>r(be,J)?(R[ge]=be,R[he]=te,ge=he):(R[ge]=J,R[ee]=te,ge=ee);else if(he<le&&0>r(be,te))R[ge]=be,R[he]=te,ge=he;else break e}}return Z}function r(R,Z){var te=R.sortIndex-Z.sortIndex;return te!==0?te:R.id-Z.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,c=l.now();e.unstable_now=function(){return l.now()-c}}var d=[],m=[],f=1,h=null,y=3,N=!1,w=!1,p=!1,v=!1,C=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function T(R){for(var Z=a(m);Z!==null;){if(Z.callback===null)n(m);else if(Z.startTime<=R)n(m),Z.sortIndex=Z.expirationTime,s(d,Z);else break;Z=a(m)}}function k(R){if(p=!1,T(R),!w)if(a(d)!==null)w=!0,E||(E=!0,O());else{var Z=a(m);Z!==null&&ae(k,Z.startTime-R)}}var E=!1,A=-1,U=5,B=-1;function X(){return v?!0:!(e.unstable_now()-B<U)}function $(){if(v=!1,E){var R=e.unstable_now();B=R;var Z=!0;try{e:{w=!1,p&&(p=!1,j(A),A=-1),N=!0;var te=y;try{t:{for(T(R),h=a(d);h!==null&&!(h.expirationTime>R&&X());){var ge=h.callback;if(typeof ge=="function"){h.callback=null,y=h.priorityLevel;var le=ge(h.expirationTime<=R);if(R=e.unstable_now(),typeof le=="function"){h.callback=le,T(R),Z=!0;break t}h===a(d)&&n(d),T(R)}else n(d);h=a(d)}if(h!==null)Z=!0;else{var W=a(m);W!==null&&ae(k,W.startTime-R),Z=!1}}break e}finally{h=null,y=te,N=!1}Z=void 0}}finally{Z?O():E=!1}}}var O;if(typeof _=="function")O=function(){_($)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,K=G.port2;G.port1.onmessage=$,O=function(){K.postMessage(null)}}else O=function(){C($,0)};function ae(R,Z){A=C(function(){R(e.unstable_now())},Z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_next=function(R){switch(y){case 1:case 2:case 3:var Z=3;break;default:Z=y}var te=y;y=Z;try{return R()}finally{y=te}},e.unstable_requestPaint=function(){v=!0},e.unstable_runWithPriority=function(R,Z){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var te=y;y=R;try{return Z()}finally{y=te}},e.unstable_scheduleCallback=function(R,Z,te){var ge=e.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ge+te:ge):te=ge,R){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=te+le,R={id:f++,callback:Z,priorityLevel:R,startTime:te,expirationTime:le,sortIndex:-1},te>ge?(R.sortIndex=te,s(m,R),a(d)===null&&R===a(m)&&(p?(j(A),A=-1):p=!0,ae(k,te-ge))):(R.sortIndex=le,s(d,R),w||N||(w=!0,E||(E=!0,O()))),R},e.unstable_shouldYield=X,e.unstable_wrapCallback=function(R){var Z=y;return function(){var te=y;y=Z;try{return R.apply(this,arguments)}finally{y=te}}}})(rN)),rN}var iA;function W7(){return iA||(iA=1,nN.exports=V7()),nN.exports}var iN={exports:{}},va={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lA;function Y7(){if(lA)return va;lA=1;var e=cu();function s(d){var m="https://react.dev/errors/"+d;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)m+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+d+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var n={d:{f:a,r:function(){throw Error(s(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},r=Symbol.for("react.portal");function i(d,m,f){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:h==null?null:""+h,children:d,containerInfo:m,implementation:f}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,m){if(d==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return va.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,va.createPortal=function(d,m){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(s(299));return i(d,m,null,f)},va.flushSync=function(d){var m=l.T,f=n.p;try{if(l.T=null,n.p=2,d)return d()}finally{l.T=m,n.p=f,n.d.f()}},va.preconnect=function(d,m){typeof d=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,n.d.C(d,m))},va.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},va.preinit=function(d,m){if(typeof d=="string"&&m&&typeof m.as=="string"){var f=m.as,h=c(f,m.crossOrigin),y=typeof m.integrity=="string"?m.integrity:void 0,N=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;f==="style"?n.d.S(d,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:h,integrity:y,fetchPriority:N}):f==="script"&&n.d.X(d,{crossOrigin:h,integrity:y,fetchPriority:N,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},va.preinitModule=function(d,m){if(typeof d=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var f=c(m.as,m.crossOrigin);n.d.M(d,{crossOrigin:f,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&n.d.M(d)},va.preload=function(d,m){if(typeof d=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var f=m.as,h=c(f,m.crossOrigin);n.d.L(d,f,{crossOrigin:h,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},va.preloadModule=function(d,m){if(typeof d=="string")if(m){var f=c(m.as,m.crossOrigin);n.d.m(d,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:f,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else n.d.m(d)},va.requestFormReset=function(d){n.d.r(d)},va.unstable_batchedUpdates=function(d,m){return d(m)},va.useFormState=function(d,m,f){return l.H.useFormState(d,m,f)},va.useFormStatus=function(){return l.H.useHostTransitionStatus()},va.version="19.2.0",va}var oA;function OD(){if(oA)return iN.exports;oA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(s){console.error(s)}}return e(),iN.exports=Y7(),iN.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cA;function Q7(){if(cA)return mm;cA=1;var e=W7(),s=cu(),a=OD();function n(o){var u="https://react.dev/errors/"+o;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)u+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+o+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function i(o){var u=o,x=o;if(o.alternate)for(;u.return;)u=u.return;else{o=u;do u=o,(u.flags&4098)!==0&&(x=u.return),o=u.return;while(o)}return u.tag===3?x:null}function l(o){if(o.tag===13){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function c(o){if(o.tag===31){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function d(o){if(i(o)!==o)throw Error(n(188))}function m(o){var u=o.alternate;if(!u){if(u=i(o),u===null)throw Error(n(188));return u!==o?null:o}for(var x=o,b=u;;){var S=x.return;if(S===null)break;var L=S.alternate;if(L===null){if(b=S.return,b!==null){x=b;continue}break}if(S.child===L.child){for(L=S.child;L;){if(L===x)return d(S),o;if(L===b)return d(S),u;L=L.sibling}throw Error(n(188))}if(x.return!==b.return)x=S,b=L;else{for(var Y=!1,ce=S.child;ce;){if(ce===x){Y=!0,x=S,b=L;break}if(ce===b){Y=!0,b=S,x=L;break}ce=ce.sibling}if(!Y){for(ce=L.child;ce;){if(ce===x){Y=!0,x=L,b=S;break}if(ce===b){Y=!0,b=L,x=S;break}ce=ce.sibling}if(!Y)throw Error(n(189))}}if(x.alternate!==b)throw Error(n(190))}if(x.tag!==3)throw Error(n(188));return x.stateNode.current===x?o:u}function f(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o;for(o=o.child;o!==null;){if(u=f(o),u!==null)return u;o=o.sibling}return null}var h=Object.assign,y=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),j=Symbol.for("react.consumer"),_=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),X=Symbol.for("react.memo_cache_sentinel"),$=Symbol.iterator;function O(o){return o===null||typeof o!="object"?null:(o=$&&o[$]||o["@@iterator"],typeof o=="function"?o:null)}var G=Symbol.for("react.client.reference");function K(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===G?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case p:return"Fragment";case C:return"Profiler";case v:return"StrictMode";case k:return"Suspense";case E:return"SuspenseList";case B:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case w:return"Portal";case _:return o.displayName||"Context";case j:return(o._context.displayName||"Context")+".Consumer";case T:var u=o.render;return o=o.displayName,o||(o=u.displayName||u.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case A:return u=o.displayName||null,u!==null?u:K(o.type)||"Memo";case U:u=o._payload,o=o._init;try{return K(o(u))}catch{}}return null}var ae=Array.isArray,R=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},ge=[],le=-1;function W(o){return{current:o}}function ee(o){0>le||(o.current=ge[le],ge[le]=null,le--)}function J(o,u){le++,ge[le]=o.current,o.current=u}var he=W(null),be=W(null),Le=W(null),Me=W(null);function ke(o,u){switch(J(Le,u),J(be,o),J(he,null),u.nodeType){case 9:case 11:o=(o=u.documentElement)&&(o=o.namespaceURI)?CE(o):0;break;default:if(o=u.tagName,u=u.namespaceURI)u=CE(u),o=SE(u,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}ee(he),J(he,o)}function F(){ee(he),ee(be),ee(Le)}function ve(o){o.memoizedState!==null&&J(Me,o);var u=he.current,x=SE(u,o.type);u!==x&&(J(be,o),J(he,x))}function Ce(o){be.current===o&&(ee(he),ee(be)),Me.current===o&&(ee(Me),lm._currentValue=te)}var D,re;function oe(o){if(D===void 0)try{throw Error()}catch(x){var u=x.stack.trim().match(/\n( *(at )?)/);D=u&&u[1]||"",re=-1<x.stack.indexOf(`
    at`)?" (<anonymous>)":-1<x.stack.indexOf("@")?"@unknown:0:0":""}return`
`+D+o+re}var je=!1;function Re(o,u){if(!o||je)return"";je=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var b={DetermineComponentFrameRoot:function(){try{if(u){var Je=function(){throw Error()};if(Object.defineProperty(Je.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Je,[])}catch(Ve){var Be=Ve}Reflect.construct(o,[],Je)}else{try{Je.call()}catch(Ve){Be=Ve}o.call(Je.prototype)}}else{try{throw Error()}catch(Ve){Be=Ve}(Je=o())&&typeof Je.catch=="function"&&Je.catch(function(){})}}catch(Ve){if(Ve&&Be&&typeof Ve.stack=="string")return[Ve.stack,Be.stack]}return[null,null]}};b.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var S=Object.getOwnPropertyDescriptor(b.DetermineComponentFrameRoot,"name");S&&S.configurable&&Object.defineProperty(b.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var L=b.DetermineComponentFrameRoot(),Y=L[0],ce=L[1];if(Y&&ce){var Ee=Y.split(`
`),Fe=ce.split(`
`);for(S=b=0;b<Ee.length&&!Ee[b].includes("DetermineComponentFrameRoot");)b++;for(;S<Fe.length&&!Fe[S].includes("DetermineComponentFrameRoot");)S++;if(b===Ee.length||S===Fe.length)for(b=Ee.length-1,S=Fe.length-1;1<=b&&0<=S&&Ee[b]!==Fe[S];)S--;for(;1<=b&&0<=S;b--,S--)if(Ee[b]!==Fe[S]){if(b!==1||S!==1)do if(b--,S--,0>S||Ee[b]!==Fe[S]){var Ye=`
`+Ee[b].replace(" at new "," at ");return o.displayName&&Ye.includes("<anonymous>")&&(Ye=Ye.replace("<anonymous>",o.displayName)),Ye}while(1<=b&&0<=S);break}}}finally{je=!1,Error.prepareStackTrace=x}return(x=o?o.displayName||o.name:"")?oe(x):""}function Ke(o,u){switch(o.tag){case 26:case 27:case 5:return oe(o.type);case 16:return oe("Lazy");case 13:return o.child!==u&&u!==null?oe("Suspense Fallback"):oe("Suspense");case 19:return oe("SuspenseList");case 0:case 15:return Re(o.type,!1);case 11:return Re(o.type.render,!1);case 1:return Re(o.type,!0);case 31:return oe("Activity");default:return""}}function et(o){try{var u="",x=null;do u+=Ke(o,x),x=o,o=o.return;while(o);return u}catch(b){return`
Error generating stack: `+b.message+`
`+b.stack}}var qe=Object.prototype.hasOwnProperty,Ze=e.unstable_scheduleCallback,we=e.unstable_cancelCallback,V=e.unstable_shouldYield,pe=e.unstable_requestPaint,z=e.unstable_now,ie=e.unstable_getCurrentPriorityLevel,ue=e.unstable_ImmediatePriority,M=e.unstable_UserBlockingPriority,xe=e.unstable_NormalPriority,ne=e.unstable_LowPriority,Te=e.unstable_IdlePriority,Q=e.log,ye=e.unstable_setDisableYieldValue,P=null,fe=null;function me(o){if(typeof Q=="function"&&ye(o),fe&&typeof fe.setStrictMode=="function")try{fe.setStrictMode(P,o)}catch{}}var Se=Math.clz32?Math.clz32:rt,$e=Math.log,We=Math.LN2;function rt(o){return o>>>=0,o===0?32:31-($e(o)/We|0)|0}var wt=256,Ut=262144,ze=4194304;function Pe(o){var u=o&42;if(u!==0)return u;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function lt(o,u,x){var b=o.pendingLanes;if(b===0)return 0;var S=0,L=o.suspendedLanes,Y=o.pingedLanes;o=o.warmLanes;var ce=b&134217727;return ce!==0?(b=ce&~L,b!==0?S=Pe(b):(Y&=ce,Y!==0?S=Pe(Y):x||(x=ce&~o,x!==0&&(S=Pe(x))))):(ce=b&~L,ce!==0?S=Pe(ce):Y!==0?S=Pe(Y):x||(x=b&~o,x!==0&&(S=Pe(x)))),S===0?0:u!==0&&u!==S&&(u&L)===0&&(L=S&-S,x=u&-u,L>=x||L===32&&(x&4194048)!==0)?u:S}function ot(o,u){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&u)===0}function I(o,u){switch(o){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ne(){var o=ze;return ze<<=1,(ze&62914560)===0&&(ze=4194304),o}function H(o){for(var u=[],x=0;31>x;x++)u.push(o);return u}function de(o,u){o.pendingLanes|=u,u!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function _e(o,u,x,b,S,L){var Y=o.pendingLanes;o.pendingLanes=x,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=x,o.entangledLanes&=x,o.errorRecoveryDisabledLanes&=x,o.shellSuspendCounter=0;var ce=o.entanglements,Ee=o.expirationTimes,Fe=o.hiddenUpdates;for(x=Y&~x;0<x;){var Ye=31-Se(x),Je=1<<Ye;ce[Ye]=0,Ee[Ye]=-1;var Be=Fe[Ye];if(Be!==null)for(Fe[Ye]=null,Ye=0;Ye<Be.length;Ye++){var Ve=Be[Ye];Ve!==null&&(Ve.lane&=-536870913)}x&=~Je}b!==0&&Ae(o,b,0),L!==0&&S===0&&o.tag!==0&&(o.suspendedLanes|=L&~(Y&~u))}function Ae(o,u,x){o.pendingLanes|=u,o.suspendedLanes&=~u;var b=31-Se(u);o.entangledLanes|=u,o.entanglements[b]=o.entanglements[b]|1073741824|x&261930}function He(o,u){var x=o.entangledLanes|=u;for(o=o.entanglements;x;){var b=31-Se(x),S=1<<b;S&u|o[b]&u&&(o[b]|=u),x&=~S}}function st(o,u){var x=u&-u;return x=(x&42)!==0?1:bt(x),(x&(o.suspendedLanes|u))!==0?0:x}function bt(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function ss(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function cs(){var o=Z.p;return o!==0?o:(o=window.event,o===void 0?32:QE(o.type))}function wr(o,u){var x=Z.p;try{return Z.p=o,u()}finally{Z.p=x}}var ba=Math.random().toString(36).slice(2),ua="__reactFiber$"+ba,$a="__reactProps$"+ba,Sc="__reactContainer$"+ba,Wy="__reactEvents$"+ba,L6="__reactListeners$"+ba,k6="__reactHandles$"+ba,uS="__reactResources$"+ba,wu="__reactMarker$"+ba;function Yy(o){delete o[ua],delete o[$a],delete o[Wy],delete o[L6],delete o[k6]}function _c(o){var u=o[ua];if(u)return u;for(var x=o.parentNode;x;){if(u=x[Sc]||x[ua]){if(x=u.alternate,u.child!==null||x!==null&&x.child!==null)for(o=DE(o);o!==null;){if(x=o[ua])return x;o=DE(o)}return u}o=x,x=o.parentNode}return null}function Tc(o){if(o=o[ua]||o[Sc]){var u=o.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return o}return null}function ju(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o.stateNode;throw Error(n(33))}function Ec(o){var u=o[uS];return u||(u=o[uS]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function ia(o){o[wu]=!0}var mS=new Set,fS={};function Zl(o,u){Ac(o,u),Ac(o+"Capture",u)}function Ac(o,u){for(fS[o]=u,o=0;o<u.length;o++)mS.add(u[o])}var D6=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),hS={},gS={};function M6(o){return qe.call(gS,o)?!0:qe.call(hS,o)?!1:D6.test(o)?gS[o]=!0:(hS[o]=!0,!1)}function Hh(o,u,x){if(M6(u))if(x===null)o.removeAttribute(u);else{switch(typeof x){case"undefined":case"function":case"symbol":o.removeAttribute(u);return;case"boolean":var b=u.toLowerCase().slice(0,5);if(b!=="data-"&&b!=="aria-"){o.removeAttribute(u);return}}o.setAttribute(u,""+x)}}function Gh(o,u,x){if(x===null)o.removeAttribute(u);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(u);return}o.setAttribute(u,""+x)}}function ti(o,u,x,b){if(b===null)o.removeAttribute(x);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(x);return}o.setAttributeNS(u,x,""+b)}}function _n(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function xS(o){var u=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function P6(o,u,x){var b=Object.getOwnPropertyDescriptor(o.constructor.prototype,u);if(!o.hasOwnProperty(u)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var S=b.get,L=b.set;return Object.defineProperty(o,u,{configurable:!0,get:function(){return S.call(this)},set:function(Y){x=""+Y,L.call(this,Y)}}),Object.defineProperty(o,u,{enumerable:b.enumerable}),{getValue:function(){return x},setValue:function(Y){x=""+Y},stopTracking:function(){o._valueTracker=null,delete o[u]}}}}function Qy(o){if(!o._valueTracker){var u=xS(o)?"checked":"value";o._valueTracker=P6(o,u,""+o[u])}}function pS(o){if(!o)return!1;var u=o._valueTracker;if(!u)return!0;var x=u.getValue(),b="";return o&&(b=xS(o)?o.checked?"true":"false":o.value),o=b,o!==x?(u.setValue(o),!0):!1}function Vh(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var O6=/[\n"\\]/g;function Tn(o){return o.replace(O6,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function qy(o,u,x,b,S,L,Y,ce){o.name="",Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"?o.type=Y:o.removeAttribute("type"),u!=null?Y==="number"?(u===0&&o.value===""||o.value!=u)&&(o.value=""+_n(u)):o.value!==""+_n(u)&&(o.value=""+_n(u)):Y!=="submit"&&Y!=="reset"||o.removeAttribute("value"),u!=null?Xy(o,Y,_n(u)):x!=null?Xy(o,Y,_n(x)):b!=null&&o.removeAttribute("value"),S==null&&L!=null&&(o.defaultChecked=!!L),S!=null&&(o.checked=S&&typeof S!="function"&&typeof S!="symbol"),ce!=null&&typeof ce!="function"&&typeof ce!="symbol"&&typeof ce!="boolean"?o.name=""+_n(ce):o.removeAttribute("name")}function yS(o,u,x,b,S,L,Y,ce){if(L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"&&(o.type=L),u!=null||x!=null){if(!(L!=="submit"&&L!=="reset"||u!=null)){Qy(o);return}x=x!=null?""+_n(x):"",u=u!=null?""+_n(u):x,ce||u===o.value||(o.value=u),o.defaultValue=u}b=b??S,b=typeof b!="function"&&typeof b!="symbol"&&!!b,o.checked=ce?o.checked:!!b,o.defaultChecked=!!b,Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"&&(o.name=Y),Qy(o)}function Xy(o,u,x){u==="number"&&Vh(o.ownerDocument)===o||o.defaultValue===""+x||(o.defaultValue=""+x)}function Lc(o,u,x,b){if(o=o.options,u){u={};for(var S=0;S<x.length;S++)u["$"+x[S]]=!0;for(x=0;x<o.length;x++)S=u.hasOwnProperty("$"+o[x].value),o[x].selected!==S&&(o[x].selected=S),S&&b&&(o[x].defaultSelected=!0)}else{for(x=""+_n(x),u=null,S=0;S<o.length;S++){if(o[S].value===x){o[S].selected=!0,b&&(o[S].defaultSelected=!0);return}u!==null||o[S].disabled||(u=o[S])}u!==null&&(u.selected=!0)}}function bS(o,u,x){if(u!=null&&(u=""+_n(u),u!==o.value&&(o.value=u),x==null)){o.defaultValue!==u&&(o.defaultValue=u);return}o.defaultValue=x!=null?""+_n(x):""}function vS(o,u,x,b){if(u==null){if(b!=null){if(x!=null)throw Error(n(92));if(ae(b)){if(1<b.length)throw Error(n(93));b=b[0]}x=b}x==null&&(x=""),u=x}x=_n(u),o.defaultValue=x,b=o.textContent,b===x&&b!==""&&b!==null&&(o.value=b),Qy(o)}function kc(o,u){if(u){var x=o.firstChild;if(x&&x===o.lastChild&&x.nodeType===3){x.nodeValue=u;return}}o.textContent=u}var I6=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function NS(o,u,x){var b=u.indexOf("--")===0;x==null||typeof x=="boolean"||x===""?b?o.setProperty(u,""):u==="float"?o.cssFloat="":o[u]="":b?o.setProperty(u,x):typeof x!="number"||x===0||I6.has(u)?u==="float"?o.cssFloat=x:o[u]=(""+x).trim():o[u]=x+"px"}function wS(o,u,x){if(u!=null&&typeof u!="object")throw Error(n(62));if(o=o.style,x!=null){for(var b in x)!x.hasOwnProperty(b)||u!=null&&u.hasOwnProperty(b)||(b.indexOf("--")===0?o.setProperty(b,""):b==="float"?o.cssFloat="":o[b]="");for(var S in u)b=u[S],u.hasOwnProperty(S)&&x[S]!==b&&NS(o,S,b)}else for(var L in u)u.hasOwnProperty(L)&&NS(o,L,u[L])}function Ky(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $6=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),R6=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wh(o){return R6.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function si(){}var Zy=null;function Jy(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Dc=null,Mc=null;function jS(o){var u=Tc(o);if(u&&(o=u.stateNode)){var x=o[$a]||null;e:switch(o=u.stateNode,u.type){case"input":if(qy(o,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name),u=x.name,x.type==="radio"&&u!=null){for(x=o;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll('input[name="'+Tn(""+u)+'"][type="radio"]'),u=0;u<x.length;u++){var b=x[u];if(b!==o&&b.form===o.form){var S=b[$a]||null;if(!S)throw Error(n(90));qy(b,S.value,S.defaultValue,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name)}}for(u=0;u<x.length;u++)b=x[u],b.form===o.form&&pS(b)}break e;case"textarea":bS(o,x.value,x.defaultValue);break e;case"select":u=x.value,u!=null&&Lc(o,!!x.multiple,u,!1)}}}var eb=!1;function CS(o,u,x){if(eb)return o(u,x);eb=!0;try{var b=o(u);return b}finally{if(eb=!1,(Dc!==null||Mc!==null)&&(Mg(),Dc&&(u=Dc,o=Mc,Mc=Dc=null,jS(u),o)))for(u=0;u<o.length;u++)jS(o[u])}}function Cu(o,u){var x=o.stateNode;if(x===null)return null;var b=x[$a]||null;if(b===null)return null;x=b[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(o=o.type,b=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!b;break e;default:o=!1}if(o)return null;if(x&&typeof x!="function")throw Error(n(231,u,typeof x));return x}var ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tb=!1;if(ai)try{var Su={};Object.defineProperty(Su,"passive",{get:function(){tb=!0}}),window.addEventListener("test",Su,Su),window.removeEventListener("test",Su,Su)}catch{tb=!1}var tl=null,sb=null,Yh=null;function SS(){if(Yh)return Yh;var o,u=sb,x=u.length,b,S="value"in tl?tl.value:tl.textContent,L=S.length;for(o=0;o<x&&u[o]===S[o];o++);var Y=x-o;for(b=1;b<=Y&&u[x-b]===S[L-b];b++);return Yh=S.slice(o,1<b?1-b:void 0)}function Qh(o){var u=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&u===13&&(o=13)):o=u,o===10&&(o=13),32<=o||o===13?o:0}function qh(){return!0}function _S(){return!1}function Ra(o){function u(x,b,S,L,Y){this._reactName=x,this._targetInst=S,this.type=b,this.nativeEvent=L,this.target=Y,this.currentTarget=null;for(var ce in o)o.hasOwnProperty(ce)&&(x=o[ce],this[ce]=x?x(L):L[ce]);return this.isDefaultPrevented=(L.defaultPrevented!=null?L.defaultPrevented:L.returnValue===!1)?qh:_S,this.isPropagationStopped=_S,this}return h(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=qh)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=qh)},persist:function(){},isPersistent:qh}),u}var Jl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xh=Ra(Jl),_u=h({},Jl,{view:0,detail:0}),U6=Ra(_u),ab,nb,Tu,Kh=h({},_u,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ib,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Tu&&(Tu&&o.type==="mousemove"?(ab=o.screenX-Tu.screenX,nb=o.screenY-Tu.screenY):nb=ab=0,Tu=o),ab)},movementY:function(o){return"movementY"in o?o.movementY:nb}}),TS=Ra(Kh),z6=h({},Kh,{dataTransfer:0}),F6=Ra(z6),B6=h({},_u,{relatedTarget:0}),rb=Ra(B6),H6=h({},Jl,{animationName:0,elapsedTime:0,pseudoElement:0}),G6=Ra(H6),V6=h({},Jl,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),W6=Ra(V6),Y6=h({},Jl,{data:0}),ES=Ra(Y6),Q6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},q6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},X6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function K6(o){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(o):(o=X6[o])?!!u[o]:!1}function ib(){return K6}var Z6=h({},_u,{key:function(o){if(o.key){var u=Q6[o.key]||o.key;if(u!=="Unidentified")return u}return o.type==="keypress"?(o=Qh(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?q6[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ib,charCode:function(o){return o.type==="keypress"?Qh(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Qh(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),J6=Ra(Z6),eR=h({},Kh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),AS=Ra(eR),tR=h({},_u,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ib}),sR=Ra(tR),aR=h({},Jl,{propertyName:0,elapsedTime:0,pseudoElement:0}),nR=Ra(aR),rR=h({},Kh,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),iR=Ra(rR),lR=h({},Jl,{newState:0,oldState:0}),oR=Ra(lR),cR=[9,13,27,32],lb=ai&&"CompositionEvent"in window,Eu=null;ai&&"documentMode"in document&&(Eu=document.documentMode);var dR=ai&&"TextEvent"in window&&!Eu,LS=ai&&(!lb||Eu&&8<Eu&&11>=Eu),kS=" ",DS=!1;function MS(o,u){switch(o){case"keyup":return cR.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function PS(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Pc=!1;function uR(o,u){switch(o){case"compositionend":return PS(u);case"keypress":return u.which!==32?null:(DS=!0,kS);case"textInput":return o=u.data,o===kS&&DS?null:o;default:return null}}function mR(o,u){if(Pc)return o==="compositionend"||!lb&&MS(o,u)?(o=SS(),Yh=sb=tl=null,Pc=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return LS&&u.locale!=="ko"?null:u.data;default:return null}}var fR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function OS(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u==="input"?!!fR[o.type]:u==="textarea"}function IS(o,u,x,b){Dc?Mc?Mc.push(b):Mc=[b]:Dc=b,u=zg(u,"onChange"),0<u.length&&(x=new Xh("onChange","change",null,x,b),o.push({event:x,listeners:u}))}var Au=null,Lu=null;function hR(o){yE(o,0)}function Zh(o){var u=ju(o);if(pS(u))return o}function $S(o,u){if(o==="change")return u}var RS=!1;if(ai){var ob;if(ai){var cb="oninput"in document;if(!cb){var US=document.createElement("div");US.setAttribute("oninput","return;"),cb=typeof US.oninput=="function"}ob=cb}else ob=!1;RS=ob&&(!document.documentMode||9<document.documentMode)}function zS(){Au&&(Au.detachEvent("onpropertychange",FS),Lu=Au=null)}function FS(o){if(o.propertyName==="value"&&Zh(Lu)){var u=[];IS(u,Lu,o,Jy(o)),CS(hR,u)}}function gR(o,u,x){o==="focusin"?(zS(),Au=u,Lu=x,Au.attachEvent("onpropertychange",FS)):o==="focusout"&&zS()}function xR(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Zh(Lu)}function pR(o,u){if(o==="click")return Zh(u)}function yR(o,u){if(o==="input"||o==="change")return Zh(u)}function bR(o,u){return o===u&&(o!==0||1/o===1/u)||o!==o&&u!==u}var on=typeof Object.is=="function"?Object.is:bR;function ku(o,u){if(on(o,u))return!0;if(typeof o!="object"||o===null||typeof u!="object"||u===null)return!1;var x=Object.keys(o),b=Object.keys(u);if(x.length!==b.length)return!1;for(b=0;b<x.length;b++){var S=x[b];if(!qe.call(u,S)||!on(o[S],u[S]))return!1}return!0}function BS(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function HS(o,u){var x=BS(o);o=0;for(var b;x;){if(x.nodeType===3){if(b=o+x.textContent.length,o<=u&&b>=u)return{node:x,offset:u-o};o=b}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=BS(x)}}function GS(o,u){return o&&u?o===u?!0:o&&o.nodeType===3?!1:u&&u.nodeType===3?GS(o,u.parentNode):"contains"in o?o.contains(u):o.compareDocumentPosition?!!(o.compareDocumentPosition(u)&16):!1:!1}function VS(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var u=Vh(o.document);u instanceof o.HTMLIFrameElement;){try{var x=typeof u.contentWindow.location.href=="string"}catch{x=!1}if(x)o=u.contentWindow;else break;u=Vh(o.document)}return u}function db(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u&&(u==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||u==="textarea"||o.contentEditable==="true")}var vR=ai&&"documentMode"in document&&11>=document.documentMode,Oc=null,ub=null,Du=null,mb=!1;function WS(o,u,x){var b=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;mb||Oc==null||Oc!==Vh(b)||(b=Oc,"selectionStart"in b&&db(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),Du&&ku(Du,b)||(Du=b,b=zg(ub,"onSelect"),0<b.length&&(u=new Xh("onSelect","select",null,u,x),o.push({event:u,listeners:b}),u.target=Oc)))}function eo(o,u){var x={};return x[o.toLowerCase()]=u.toLowerCase(),x["Webkit"+o]="webkit"+u,x["Moz"+o]="moz"+u,x}var Ic={animationend:eo("Animation","AnimationEnd"),animationiteration:eo("Animation","AnimationIteration"),animationstart:eo("Animation","AnimationStart"),transitionrun:eo("Transition","TransitionRun"),transitionstart:eo("Transition","TransitionStart"),transitioncancel:eo("Transition","TransitionCancel"),transitionend:eo("Transition","TransitionEnd")},fb={},YS={};ai&&(YS=document.createElement("div").style,"AnimationEvent"in window||(delete Ic.animationend.animation,delete Ic.animationiteration.animation,delete Ic.animationstart.animation),"TransitionEvent"in window||delete Ic.transitionend.transition);function to(o){if(fb[o])return fb[o];if(!Ic[o])return o;var u=Ic[o],x;for(x in u)if(u.hasOwnProperty(x)&&x in YS)return fb[o]=u[x];return o}var QS=to("animationend"),qS=to("animationiteration"),XS=to("animationstart"),NR=to("transitionrun"),wR=to("transitionstart"),jR=to("transitioncancel"),KS=to("transitionend"),ZS=new Map,hb="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");hb.push("scrollEnd");function ir(o,u){ZS.set(o,u),Zl(u,[o])}var Jh=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},En=[],$c=0,gb=0;function eg(){for(var o=$c,u=gb=$c=0;u<o;){var x=En[u];En[u++]=null;var b=En[u];En[u++]=null;var S=En[u];En[u++]=null;var L=En[u];if(En[u++]=null,b!==null&&S!==null){var Y=b.pending;Y===null?S.next=S:(S.next=Y.next,Y.next=S),b.pending=S}L!==0&&JS(x,S,L)}}function tg(o,u,x,b){En[$c++]=o,En[$c++]=u,En[$c++]=x,En[$c++]=b,gb|=b,o.lanes|=b,o=o.alternate,o!==null&&(o.lanes|=b)}function xb(o,u,x,b){return tg(o,u,x,b),sg(o)}function so(o,u){return tg(o,null,null,u),sg(o)}function JS(o,u,x){o.lanes|=x;var b=o.alternate;b!==null&&(b.lanes|=x);for(var S=!1,L=o.return;L!==null;)L.childLanes|=x,b=L.alternate,b!==null&&(b.childLanes|=x),L.tag===22&&(o=L.stateNode,o===null||o._visibility&1||(S=!0)),o=L,L=L.return;return o.tag===3?(L=o.stateNode,S&&u!==null&&(S=31-Se(x),o=L.hiddenUpdates,b=o[S],b===null?o[S]=[u]:b.push(u),u.lane=x|536870912),L):null}function sg(o){if(50<em)throw em=0,Sv=null,Error(n(185));for(var u=o.return;u!==null;)o=u,u=o.return;return o.tag===3?o.stateNode:null}var Rc={};function CR(o,u,x,b){this.tag=o,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cn(o,u,x,b){return new CR(o,u,x,b)}function pb(o){return o=o.prototype,!(!o||!o.isReactComponent)}function ni(o,u){var x=o.alternate;return x===null?(x=cn(o.tag,u,o.key,o.mode),x.elementType=o.elementType,x.type=o.type,x.stateNode=o.stateNode,x.alternate=o,o.alternate=x):(x.pendingProps=u,x.type=o.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=o.flags&65011712,x.childLanes=o.childLanes,x.lanes=o.lanes,x.child=o.child,x.memoizedProps=o.memoizedProps,x.memoizedState=o.memoizedState,x.updateQueue=o.updateQueue,u=o.dependencies,x.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},x.sibling=o.sibling,x.index=o.index,x.ref=o.ref,x.refCleanup=o.refCleanup,x}function e_(o,u){o.flags&=65011714;var x=o.alternate;return x===null?(o.childLanes=0,o.lanes=u,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=x.childLanes,o.lanes=x.lanes,o.child=x.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=x.memoizedProps,o.memoizedState=x.memoizedState,o.updateQueue=x.updateQueue,o.type=x.type,u=x.dependencies,o.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),o}function ag(o,u,x,b,S,L){var Y=0;if(b=o,typeof o=="function")pb(o)&&(Y=1);else if(typeof o=="string")Y=A7(o,x,he.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case B:return o=cn(31,x,u,S),o.elementType=B,o.lanes=L,o;case p:return ao(x.children,S,L,u);case v:Y=8,S|=24;break;case C:return o=cn(12,x,u,S|2),o.elementType=C,o.lanes=L,o;case k:return o=cn(13,x,u,S),o.elementType=k,o.lanes=L,o;case E:return o=cn(19,x,u,S),o.elementType=E,o.lanes=L,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case _:Y=10;break e;case j:Y=9;break e;case T:Y=11;break e;case A:Y=14;break e;case U:Y=16,b=null;break e}Y=29,x=Error(n(130,o===null?"null":typeof o,"")),b=null}return u=cn(Y,x,u,S),u.elementType=o,u.type=b,u.lanes=L,u}function ao(o,u,x,b){return o=cn(7,o,b,u),o.lanes=x,o}function yb(o,u,x){return o=cn(6,o,null,u),o.lanes=x,o}function t_(o){var u=cn(18,null,null,0);return u.stateNode=o,u}function bb(o,u,x){return u=cn(4,o.children!==null?o.children:[],o.key,u),u.lanes=x,u.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},u}var s_=new WeakMap;function An(o,u){if(typeof o=="object"&&o!==null){var x=s_.get(o);return x!==void 0?x:(u={value:o,source:u,stack:et(u)},s_.set(o,u),u)}return{value:o,source:u,stack:et(u)}}var Uc=[],zc=0,ng=null,Mu=0,Ln=[],kn=0,sl=null,jr=1,Cr="";function ri(o,u){Uc[zc++]=Mu,Uc[zc++]=ng,ng=o,Mu=u}function a_(o,u,x){Ln[kn++]=jr,Ln[kn++]=Cr,Ln[kn++]=sl,sl=o;var b=jr;o=Cr;var S=32-Se(b)-1;b&=~(1<<S),x+=1;var L=32-Se(u)+S;if(30<L){var Y=S-S%5;L=(b&(1<<Y)-1).toString(32),b>>=Y,S-=Y,jr=1<<32-Se(u)+S|x<<S|b,Cr=L+o}else jr=1<<L|x<<S|b,Cr=o}function vb(o){o.return!==null&&(ri(o,1),a_(o,1,0))}function Nb(o){for(;o===ng;)ng=Uc[--zc],Uc[zc]=null,Mu=Uc[--zc],Uc[zc]=null;for(;o===sl;)sl=Ln[--kn],Ln[kn]=null,Cr=Ln[--kn],Ln[kn]=null,jr=Ln[--kn],Ln[kn]=null}function n_(o,u){Ln[kn++]=jr,Ln[kn++]=Cr,Ln[kn++]=sl,jr=u.id,Cr=u.overflow,sl=o}var ma=null,vs=null,Rt=!1,al=null,Dn=!1,wb=Error(n(519));function nl(o){var u=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Pu(An(u,o)),wb}function r_(o){var u=o.stateNode,x=o.type,b=o.memoizedProps;switch(u[ua]=o,u[$a]=b,x){case"dialog":Mt("cancel",u),Mt("close",u);break;case"iframe":case"object":case"embed":Mt("load",u);break;case"video":case"audio":for(x=0;x<sm.length;x++)Mt(sm[x],u);break;case"source":Mt("error",u);break;case"img":case"image":case"link":Mt("error",u),Mt("load",u);break;case"details":Mt("toggle",u);break;case"input":Mt("invalid",u),yS(u,b.value,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name,!0);break;case"select":Mt("invalid",u);break;case"textarea":Mt("invalid",u),vS(u,b.value,b.defaultValue,b.children)}x=b.children,typeof x!="string"&&typeof x!="number"&&typeof x!="bigint"||u.textContent===""+x||b.suppressHydrationWarning===!0||wE(u.textContent,x)?(b.popover!=null&&(Mt("beforetoggle",u),Mt("toggle",u)),b.onScroll!=null&&Mt("scroll",u),b.onScrollEnd!=null&&Mt("scrollend",u),b.onClick!=null&&(u.onclick=si),u=!0):u=!1,u||nl(o,!0)}function i_(o){for(ma=o.return;ma;)switch(ma.tag){case 5:case 31:case 13:Dn=!1;return;case 27:case 3:Dn=!0;return;default:ma=ma.return}}function Fc(o){if(o!==ma)return!1;if(!Rt)return i_(o),Rt=!0,!1;var u=o.tag,x;if((x=u!==3&&u!==27)&&((x=u===5)&&(x=o.type,x=!(x!=="form"&&x!=="button")||zv(o.type,o.memoizedProps)),x=!x),x&&vs&&nl(o),i_(o),u===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));vs=kE(o)}else if(u===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));vs=kE(o)}else u===27?(u=vs,yl(o.type)?(o=Vv,Vv=null,vs=o):vs=u):vs=ma?Pn(o.stateNode.nextSibling):null;return!0}function no(){vs=ma=null,Rt=!1}function jb(){var o=al;return o!==null&&(Ba===null?Ba=o:Ba.push.apply(Ba,o),al=null),o}function Pu(o){al===null?al=[o]:al.push(o)}var Cb=W(null),ro=null,ii=null;function rl(o,u,x){J(Cb,u._currentValue),u._currentValue=x}function li(o){o._currentValue=Cb.current,ee(Cb)}function Sb(o,u,x){for(;o!==null;){var b=o.alternate;if((o.childLanes&u)!==u?(o.childLanes|=u,b!==null&&(b.childLanes|=u)):b!==null&&(b.childLanes&u)!==u&&(b.childLanes|=u),o===x)break;o=o.return}}function _b(o,u,x,b){var S=o.child;for(S!==null&&(S.return=o);S!==null;){var L=S.dependencies;if(L!==null){var Y=S.child;L=L.firstContext;e:for(;L!==null;){var ce=L;L=S;for(var Ee=0;Ee<u.length;Ee++)if(ce.context===u[Ee]){L.lanes|=x,ce=L.alternate,ce!==null&&(ce.lanes|=x),Sb(L.return,x,o),b||(Y=null);break e}L=ce.next}}else if(S.tag===18){if(Y=S.return,Y===null)throw Error(n(341));Y.lanes|=x,L=Y.alternate,L!==null&&(L.lanes|=x),Sb(Y,x,o),Y=null}else Y=S.child;if(Y!==null)Y.return=S;else for(Y=S;Y!==null;){if(Y===o){Y=null;break}if(S=Y.sibling,S!==null){S.return=Y.return,Y=S;break}Y=Y.return}S=Y}}function Bc(o,u,x,b){o=null;for(var S=u,L=!1;S!==null;){if(!L){if((S.flags&524288)!==0)L=!0;else if((S.flags&262144)!==0)break}if(S.tag===10){var Y=S.alternate;if(Y===null)throw Error(n(387));if(Y=Y.memoizedProps,Y!==null){var ce=S.type;on(S.pendingProps.value,Y.value)||(o!==null?o.push(ce):o=[ce])}}else if(S===Me.current){if(Y=S.alternate,Y===null)throw Error(n(387));Y.memoizedState.memoizedState!==S.memoizedState.memoizedState&&(o!==null?o.push(lm):o=[lm])}S=S.return}o!==null&&_b(u,o,x,b),u.flags|=262144}function rg(o){for(o=o.firstContext;o!==null;){if(!on(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function io(o){ro=o,ii=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function fa(o){return l_(ro,o)}function ig(o,u){return ro===null&&io(o),l_(o,u)}function l_(o,u){var x=u._currentValue;if(u={context:u,memoizedValue:x,next:null},ii===null){if(o===null)throw Error(n(308));ii=u,o.dependencies={lanes:0,firstContext:u},o.flags|=524288}else ii=ii.next=u;return x}var SR=typeof AbortController<"u"?AbortController:function(){var o=[],u=this.signal={aborted:!1,addEventListener:function(x,b){o.push(b)}};this.abort=function(){u.aborted=!0,o.forEach(function(x){return x()})}},_R=e.unstable_scheduleCallback,TR=e.unstable_NormalPriority,Hs={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Tb(){return{controller:new SR,data:new Map,refCount:0}}function Ou(o){o.refCount--,o.refCount===0&&_R(TR,function(){o.controller.abort()})}var Iu=null,Eb=0,Hc=0,Gc=null;function ER(o,u){if(Iu===null){var x=Iu=[];Eb=0,Hc=kv(),Gc={status:"pending",value:void 0,then:function(b){x.push(b)}}}return Eb++,u.then(o_,o_),u}function o_(){if(--Eb===0&&Iu!==null){Gc!==null&&(Gc.status="fulfilled");var o=Iu;Iu=null,Hc=0,Gc=null;for(var u=0;u<o.length;u++)(0,o[u])()}}function AR(o,u){var x=[],b={status:"pending",value:null,reason:null,then:function(S){x.push(S)}};return o.then(function(){b.status="fulfilled",b.value=u;for(var S=0;S<x.length;S++)(0,x[S])(u)},function(S){for(b.status="rejected",b.reason=S,S=0;S<x.length;S++)(0,x[S])(void 0)}),b}var c_=R.S;R.S=function(o,u){WT=z(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&ER(o,u),c_!==null&&c_(o,u)};var lo=W(null);function Ab(){var o=lo.current;return o!==null?o:gs.pooledCache}function lg(o,u){u===null?J(lo,lo.current):J(lo,u.pool)}function d_(){var o=Ab();return o===null?null:{parent:Hs._currentValue,pool:o}}var Vc=Error(n(460)),Lb=Error(n(474)),og=Error(n(542)),cg={then:function(){}};function u_(o){return o=o.status,o==="fulfilled"||o==="rejected"}function m_(o,u,x){switch(x=o[x],x===void 0?o.push(u):x!==u&&(u.then(si,si),u=x),u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,h_(o),o;default:if(typeof u.status=="string")u.then(si,si);else{if(o=gs,o!==null&&100<o.shellSuspendCounter)throw Error(n(482));o=u,o.status="pending",o.then(function(b){if(u.status==="pending"){var S=u;S.status="fulfilled",S.value=b}},function(b){if(u.status==="pending"){var S=u;S.status="rejected",S.reason=b}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,h_(o),o}throw co=u,Vc}}function oo(o){try{var u=o._init;return u(o._payload)}catch(x){throw x!==null&&typeof x=="object"&&typeof x.then=="function"?(co=x,Vc):x}}var co=null;function f_(){if(co===null)throw Error(n(459));var o=co;return co=null,o}function h_(o){if(o===Vc||o===og)throw Error(n(483))}var Wc=null,$u=0;function dg(o){var u=$u;return $u+=1,Wc===null&&(Wc=[]),m_(Wc,o,u)}function Ru(o,u){u=u.props.ref,o.ref=u!==void 0?u:null}function ug(o,u){throw u.$$typeof===y?Error(n(525)):(o=Object.prototype.toString.call(u),Error(n(31,o==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":o)))}function g_(o){function u(Ie,De){if(o){var Ue=Ie.deletions;Ue===null?(Ie.deletions=[De],Ie.flags|=16):Ue.push(De)}}function x(Ie,De){if(!o)return null;for(;De!==null;)u(Ie,De),De=De.sibling;return null}function b(Ie){for(var De=new Map;Ie!==null;)Ie.key!==null?De.set(Ie.key,Ie):De.set(Ie.index,Ie),Ie=Ie.sibling;return De}function S(Ie,De){return Ie=ni(Ie,De),Ie.index=0,Ie.sibling=null,Ie}function L(Ie,De,Ue){return Ie.index=Ue,o?(Ue=Ie.alternate,Ue!==null?(Ue=Ue.index,Ue<De?(Ie.flags|=67108866,De):Ue):(Ie.flags|=67108866,De)):(Ie.flags|=1048576,De)}function Y(Ie){return o&&Ie.alternate===null&&(Ie.flags|=67108866),Ie}function ce(Ie,De,Ue,Xe){return De===null||De.tag!==6?(De=yb(Ue,Ie.mode,Xe),De.return=Ie,De):(De=S(De,Ue),De.return=Ie,De)}function Ee(Ie,De,Ue,Xe){var pt=Ue.type;return pt===p?Ye(Ie,De,Ue.props.children,Xe,Ue.key):De!==null&&(De.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===U&&oo(pt)===De.type)?(De=S(De,Ue.props),Ru(De,Ue),De.return=Ie,De):(De=ag(Ue.type,Ue.key,Ue.props,null,Ie.mode,Xe),Ru(De,Ue),De.return=Ie,De)}function Fe(Ie,De,Ue,Xe){return De===null||De.tag!==4||De.stateNode.containerInfo!==Ue.containerInfo||De.stateNode.implementation!==Ue.implementation?(De=bb(Ue,Ie.mode,Xe),De.return=Ie,De):(De=S(De,Ue.children||[]),De.return=Ie,De)}function Ye(Ie,De,Ue,Xe,pt){return De===null||De.tag!==7?(De=ao(Ue,Ie.mode,Xe,pt),De.return=Ie,De):(De=S(De,Ue),De.return=Ie,De)}function Je(Ie,De,Ue){if(typeof De=="string"&&De!==""||typeof De=="number"||typeof De=="bigint")return De=yb(""+De,Ie.mode,Ue),De.return=Ie,De;if(typeof De=="object"&&De!==null){switch(De.$$typeof){case N:return Ue=ag(De.type,De.key,De.props,null,Ie.mode,Ue),Ru(Ue,De),Ue.return=Ie,Ue;case w:return De=bb(De,Ie.mode,Ue),De.return=Ie,De;case U:return De=oo(De),Je(Ie,De,Ue)}if(ae(De)||O(De))return De=ao(De,Ie.mode,Ue,null),De.return=Ie,De;if(typeof De.then=="function")return Je(Ie,dg(De),Ue);if(De.$$typeof===_)return Je(Ie,ig(Ie,De),Ue);ug(Ie,De)}return null}function Be(Ie,De,Ue,Xe){var pt=De!==null?De.key:null;if(typeof Ue=="string"&&Ue!==""||typeof Ue=="number"||typeof Ue=="bigint")return pt!==null?null:ce(Ie,De,""+Ue,Xe);if(typeof Ue=="object"&&Ue!==null){switch(Ue.$$typeof){case N:return Ue.key===pt?Ee(Ie,De,Ue,Xe):null;case w:return Ue.key===pt?Fe(Ie,De,Ue,Xe):null;case U:return Ue=oo(Ue),Be(Ie,De,Ue,Xe)}if(ae(Ue)||O(Ue))return pt!==null?null:Ye(Ie,De,Ue,Xe,null);if(typeof Ue.then=="function")return Be(Ie,De,dg(Ue),Xe);if(Ue.$$typeof===_)return Be(Ie,De,ig(Ie,Ue),Xe);ug(Ie,Ue)}return null}function Ve(Ie,De,Ue,Xe,pt){if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number"||typeof Xe=="bigint")return Ie=Ie.get(Ue)||null,ce(De,Ie,""+Xe,pt);if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case N:return Ie=Ie.get(Xe.key===null?Ue:Xe.key)||null,Ee(De,Ie,Xe,pt);case w:return Ie=Ie.get(Xe.key===null?Ue:Xe.key)||null,Fe(De,Ie,Xe,pt);case U:return Xe=oo(Xe),Ve(Ie,De,Ue,Xe,pt)}if(ae(Xe)||O(Xe))return Ie=Ie.get(Ue)||null,Ye(De,Ie,Xe,pt,null);if(typeof Xe.then=="function")return Ve(Ie,De,Ue,dg(Xe),pt);if(Xe.$$typeof===_)return Ve(Ie,De,Ue,ig(De,Xe),pt);ug(De,Xe)}return null}function ut(Ie,De,Ue,Xe){for(var pt=null,Ht=null,ht=De,Et=De=0,Ot=null;ht!==null&&Et<Ue.length;Et++){ht.index>Et?(Ot=ht,ht=null):Ot=ht.sibling;var Gt=Be(Ie,ht,Ue[Et],Xe);if(Gt===null){ht===null&&(ht=Ot);break}o&&ht&&Gt.alternate===null&&u(Ie,ht),De=L(Gt,De,Et),Ht===null?pt=Gt:Ht.sibling=Gt,Ht=Gt,ht=Ot}if(Et===Ue.length)return x(Ie,ht),Rt&&ri(Ie,Et),pt;if(ht===null){for(;Et<Ue.length;Et++)ht=Je(Ie,Ue[Et],Xe),ht!==null&&(De=L(ht,De,Et),Ht===null?pt=ht:Ht.sibling=ht,Ht=ht);return Rt&&ri(Ie,Et),pt}for(ht=b(ht);Et<Ue.length;Et++)Ot=Ve(ht,Ie,Et,Ue[Et],Xe),Ot!==null&&(o&&Ot.alternate!==null&&ht.delete(Ot.key===null?Et:Ot.key),De=L(Ot,De,Et),Ht===null?pt=Ot:Ht.sibling=Ot,Ht=Ot);return o&&ht.forEach(function(jl){return u(Ie,jl)}),Rt&&ri(Ie,Et),pt}function vt(Ie,De,Ue,Xe){if(Ue==null)throw Error(n(151));for(var pt=null,Ht=null,ht=De,Et=De=0,Ot=null,Gt=Ue.next();ht!==null&&!Gt.done;Et++,Gt=Ue.next()){ht.index>Et?(Ot=ht,ht=null):Ot=ht.sibling;var jl=Be(Ie,ht,Gt.value,Xe);if(jl===null){ht===null&&(ht=Ot);break}o&&ht&&jl.alternate===null&&u(Ie,ht),De=L(jl,De,Et),Ht===null?pt=jl:Ht.sibling=jl,Ht=jl,ht=Ot}if(Gt.done)return x(Ie,ht),Rt&&ri(Ie,Et),pt;if(ht===null){for(;!Gt.done;Et++,Gt=Ue.next())Gt=Je(Ie,Gt.value,Xe),Gt!==null&&(De=L(Gt,De,Et),Ht===null?pt=Gt:Ht.sibling=Gt,Ht=Gt);return Rt&&ri(Ie,Et),pt}for(ht=b(ht);!Gt.done;Et++,Gt=Ue.next())Gt=Ve(ht,Ie,Et,Gt.value,Xe),Gt!==null&&(o&&Gt.alternate!==null&&ht.delete(Gt.key===null?Et:Gt.key),De=L(Gt,De,Et),Ht===null?pt=Gt:Ht.sibling=Gt,Ht=Gt);return o&&ht.forEach(function(z7){return u(Ie,z7)}),Rt&&ri(Ie,Et),pt}function ms(Ie,De,Ue,Xe){if(typeof Ue=="object"&&Ue!==null&&Ue.type===p&&Ue.key===null&&(Ue=Ue.props.children),typeof Ue=="object"&&Ue!==null){switch(Ue.$$typeof){case N:e:{for(var pt=Ue.key;De!==null;){if(De.key===pt){if(pt=Ue.type,pt===p){if(De.tag===7){x(Ie,De.sibling),Xe=S(De,Ue.props.children),Xe.return=Ie,Ie=Xe;break e}}else if(De.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===U&&oo(pt)===De.type){x(Ie,De.sibling),Xe=S(De,Ue.props),Ru(Xe,Ue),Xe.return=Ie,Ie=Xe;break e}x(Ie,De);break}else u(Ie,De);De=De.sibling}Ue.type===p?(Xe=ao(Ue.props.children,Ie.mode,Xe,Ue.key),Xe.return=Ie,Ie=Xe):(Xe=ag(Ue.type,Ue.key,Ue.props,null,Ie.mode,Xe),Ru(Xe,Ue),Xe.return=Ie,Ie=Xe)}return Y(Ie);case w:e:{for(pt=Ue.key;De!==null;){if(De.key===pt)if(De.tag===4&&De.stateNode.containerInfo===Ue.containerInfo&&De.stateNode.implementation===Ue.implementation){x(Ie,De.sibling),Xe=S(De,Ue.children||[]),Xe.return=Ie,Ie=Xe;break e}else{x(Ie,De);break}else u(Ie,De);De=De.sibling}Xe=bb(Ue,Ie.mode,Xe),Xe.return=Ie,Ie=Xe}return Y(Ie);case U:return Ue=oo(Ue),ms(Ie,De,Ue,Xe)}if(ae(Ue))return ut(Ie,De,Ue,Xe);if(O(Ue)){if(pt=O(Ue),typeof pt!="function")throw Error(n(150));return Ue=pt.call(Ue),vt(Ie,De,Ue,Xe)}if(typeof Ue.then=="function")return ms(Ie,De,dg(Ue),Xe);if(Ue.$$typeof===_)return ms(Ie,De,ig(Ie,Ue),Xe);ug(Ie,Ue)}return typeof Ue=="string"&&Ue!==""||typeof Ue=="number"||typeof Ue=="bigint"?(Ue=""+Ue,De!==null&&De.tag===6?(x(Ie,De.sibling),Xe=S(De,Ue),Xe.return=Ie,Ie=Xe):(x(Ie,De),Xe=yb(Ue,Ie.mode,Xe),Xe.return=Ie,Ie=Xe),Y(Ie)):x(Ie,De)}return function(Ie,De,Ue,Xe){try{$u=0;var pt=ms(Ie,De,Ue,Xe);return Wc=null,pt}catch(ht){if(ht===Vc||ht===og)throw ht;var Ht=cn(29,ht,null,Ie.mode);return Ht.lanes=Xe,Ht.return=Ie,Ht}finally{}}}var uo=g_(!0),x_=g_(!1),il=!1;function kb(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Db(o,u){o=o.updateQueue,u.updateQueue===o&&(u.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function ll(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function ol(o,u,x){var b=o.updateQueue;if(b===null)return null;if(b=b.shared,(Wt&2)!==0){var S=b.pending;return S===null?u.next=u:(u.next=S.next,S.next=u),b.pending=u,u=sg(o),JS(o,null,x),u}return tg(o,b,u,x),sg(o)}function Uu(o,u,x){if(u=u.updateQueue,u!==null&&(u=u.shared,(x&4194048)!==0)){var b=u.lanes;b&=o.pendingLanes,x|=b,u.lanes=x,He(o,x)}}function Mb(o,u){var x=o.updateQueue,b=o.alternate;if(b!==null&&(b=b.updateQueue,x===b)){var S=null,L=null;if(x=x.firstBaseUpdate,x!==null){do{var Y={lane:x.lane,tag:x.tag,payload:x.payload,callback:null,next:null};L===null?S=L=Y:L=L.next=Y,x=x.next}while(x!==null);L===null?S=L=u:L=L.next=u}else S=L=u;x={baseState:b.baseState,firstBaseUpdate:S,lastBaseUpdate:L,shared:b.shared,callbacks:b.callbacks},o.updateQueue=x;return}o=x.lastBaseUpdate,o===null?x.firstBaseUpdate=u:o.next=u,x.lastBaseUpdate=u}var Pb=!1;function zu(){if(Pb){var o=Gc;if(o!==null)throw o}}function Fu(o,u,x,b){Pb=!1;var S=o.updateQueue;il=!1;var L=S.firstBaseUpdate,Y=S.lastBaseUpdate,ce=S.shared.pending;if(ce!==null){S.shared.pending=null;var Ee=ce,Fe=Ee.next;Ee.next=null,Y===null?L=Fe:Y.next=Fe,Y=Ee;var Ye=o.alternate;Ye!==null&&(Ye=Ye.updateQueue,ce=Ye.lastBaseUpdate,ce!==Y&&(ce===null?Ye.firstBaseUpdate=Fe:ce.next=Fe,Ye.lastBaseUpdate=Ee))}if(L!==null){var Je=S.baseState;Y=0,Ye=Fe=Ee=null,ce=L;do{var Be=ce.lane&-536870913,Ve=Be!==ce.lane;if(Ve?(Pt&Be)===Be:(b&Be)===Be){Be!==0&&Be===Hc&&(Pb=!0),Ye!==null&&(Ye=Ye.next={lane:0,tag:ce.tag,payload:ce.payload,callback:null,next:null});e:{var ut=o,vt=ce;Be=u;var ms=x;switch(vt.tag){case 1:if(ut=vt.payload,typeof ut=="function"){Je=ut.call(ms,Je,Be);break e}Je=ut;break e;case 3:ut.flags=ut.flags&-65537|128;case 0:if(ut=vt.payload,Be=typeof ut=="function"?ut.call(ms,Je,Be):ut,Be==null)break e;Je=h({},Je,Be);break e;case 2:il=!0}}Be=ce.callback,Be!==null&&(o.flags|=64,Ve&&(o.flags|=8192),Ve=S.callbacks,Ve===null?S.callbacks=[Be]:Ve.push(Be))}else Ve={lane:Be,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null},Ye===null?(Fe=Ye=Ve,Ee=Je):Ye=Ye.next=Ve,Y|=Be;if(ce=ce.next,ce===null){if(ce=S.shared.pending,ce===null)break;Ve=ce,ce=Ve.next,Ve.next=null,S.lastBaseUpdate=Ve,S.shared.pending=null}}while(!0);Ye===null&&(Ee=Je),S.baseState=Ee,S.firstBaseUpdate=Fe,S.lastBaseUpdate=Ye,L===null&&(S.shared.lanes=0),fl|=Y,o.lanes=Y,o.memoizedState=Je}}function p_(o,u){if(typeof o!="function")throw Error(n(191,o));o.call(u)}function y_(o,u){var x=o.callbacks;if(x!==null)for(o.callbacks=null,o=0;o<x.length;o++)p_(x[o],u)}var Yc=W(null),mg=W(0);function b_(o,u){o=xi,J(mg,o),J(Yc,u),xi=o|u.baseLanes}function Ob(){J(mg,xi),J(Yc,Yc.current)}function Ib(){xi=mg.current,ee(Yc),ee(mg)}var dn=W(null),Mn=null;function cl(o){var u=o.alternate;J($s,$s.current&1),J(dn,o),Mn===null&&(u===null||Yc.current!==null||u.memoizedState!==null)&&(Mn=o)}function $b(o){J($s,$s.current),J(dn,o),Mn===null&&(Mn=o)}function v_(o){o.tag===22?(J($s,$s.current),J(dn,o),Mn===null&&(Mn=o)):dl()}function dl(){J($s,$s.current),J(dn,dn.current)}function un(o){ee(dn),Mn===o&&(Mn=null),ee($s)}var $s=W(0);function fg(o){for(var u=o;u!==null;){if(u.tag===13){var x=u.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||Hv(x)||Gv(x)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var oi=0,_t=null,ds=null,Gs=null,hg=!1,Qc=!1,mo=!1,gg=0,Bu=0,qc=null,LR=0;function ks(){throw Error(n(321))}function Rb(o,u){if(u===null)return!1;for(var x=0;x<u.length&&x<o.length;x++)if(!on(o[x],u[x]))return!1;return!0}function Ub(o,u,x,b,S,L){return oi=L,_t=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,R.H=o===null||o.memoizedState===null?aT:ev,mo=!1,L=x(b,S),mo=!1,Qc&&(L=w_(u,x,b,S)),N_(o),L}function N_(o){R.H=Vu;var u=ds!==null&&ds.next!==null;if(oi=0,Gs=ds=_t=null,hg=!1,Bu=0,qc=null,u)throw Error(n(300));o===null||Vs||(o=o.dependencies,o!==null&&rg(o)&&(Vs=!0))}function w_(o,u,x,b){_t=o;var S=0;do{if(Qc&&(qc=null),Bu=0,Qc=!1,25<=S)throw Error(n(301));if(S+=1,Gs=ds=null,o.updateQueue!=null){var L=o.updateQueue;L.lastEffect=null,L.events=null,L.stores=null,L.memoCache!=null&&(L.memoCache.index=0)}R.H=nT,L=u(x,b)}while(Qc);return L}function kR(){var o=R.H,u=o.useState()[0];return u=typeof u.then=="function"?Hu(u):u,o=o.useState()[0],(ds!==null?ds.memoizedState:null)!==o&&(_t.flags|=1024),u}function zb(){var o=gg!==0;return gg=0,o}function Fb(o,u,x){u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~x}function Bb(o){if(hg){for(o=o.memoizedState;o!==null;){var u=o.queue;u!==null&&(u.pending=null),o=o.next}hg=!1}oi=0,Gs=ds=_t=null,Qc=!1,Bu=gg=0,qc=null}function La(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gs===null?_t.memoizedState=Gs=o:Gs=Gs.next=o,Gs}function Rs(){if(ds===null){var o=_t.alternate;o=o!==null?o.memoizedState:null}else o=ds.next;var u=Gs===null?_t.memoizedState:Gs.next;if(u!==null)Gs=u,ds=o;else{if(o===null)throw _t.alternate===null?Error(n(467)):Error(n(310));ds=o,o={memoizedState:ds.memoizedState,baseState:ds.baseState,baseQueue:ds.baseQueue,queue:ds.queue,next:null},Gs===null?_t.memoizedState=Gs=o:Gs=Gs.next=o}return Gs}function xg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Hu(o){var u=Bu;return Bu+=1,qc===null&&(qc=[]),o=m_(qc,o,u),u=_t,(Gs===null?u.memoizedState:Gs.next)===null&&(u=u.alternate,R.H=u===null||u.memoizedState===null?aT:ev),o}function pg(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Hu(o);if(o.$$typeof===_)return fa(o)}throw Error(n(438,String(o)))}function Hb(o){var u=null,x=_t.updateQueue;if(x!==null&&(u=x.memoCache),u==null){var b=_t.alternate;b!==null&&(b=b.updateQueue,b!==null&&(b=b.memoCache,b!=null&&(u={data:b.data.map(function(S){return S.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),x===null&&(x=xg(),_t.updateQueue=x),x.memoCache=u,x=u.data[u.index],x===void 0)for(x=u.data[u.index]=Array(o),b=0;b<o;b++)x[b]=X;return u.index++,x}function ci(o,u){return typeof u=="function"?u(o):u}function yg(o){var u=Rs();return Gb(u,ds,o)}function Gb(o,u,x){var b=o.queue;if(b===null)throw Error(n(311));b.lastRenderedReducer=x;var S=o.baseQueue,L=b.pending;if(L!==null){if(S!==null){var Y=S.next;S.next=L.next,L.next=Y}u.baseQueue=S=L,b.pending=null}if(L=o.baseState,S===null)o.memoizedState=L;else{u=S.next;var ce=Y=null,Ee=null,Fe=u,Ye=!1;do{var Je=Fe.lane&-536870913;if(Je!==Fe.lane?(Pt&Je)===Je:(oi&Je)===Je){var Be=Fe.revertLane;if(Be===0)Ee!==null&&(Ee=Ee.next={lane:0,revertLane:0,gesture:null,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null}),Je===Hc&&(Ye=!0);else if((oi&Be)===Be){Fe=Fe.next,Be===Hc&&(Ye=!0);continue}else Je={lane:0,revertLane:Fe.revertLane,gesture:null,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null},Ee===null?(ce=Ee=Je,Y=L):Ee=Ee.next=Je,_t.lanes|=Be,fl|=Be;Je=Fe.action,mo&&x(L,Je),L=Fe.hasEagerState?Fe.eagerState:x(L,Je)}else Be={lane:Je,revertLane:Fe.revertLane,gesture:Fe.gesture,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null},Ee===null?(ce=Ee=Be,Y=L):Ee=Ee.next=Be,_t.lanes|=Je,fl|=Je;Fe=Fe.next}while(Fe!==null&&Fe!==u);if(Ee===null?Y=L:Ee.next=ce,!on(L,o.memoizedState)&&(Vs=!0,Ye&&(x=Gc,x!==null)))throw x;o.memoizedState=L,o.baseState=Y,o.baseQueue=Ee,b.lastRenderedState=L}return S===null&&(b.lanes=0),[o.memoizedState,b.dispatch]}function Vb(o){var u=Rs(),x=u.queue;if(x===null)throw Error(n(311));x.lastRenderedReducer=o;var b=x.dispatch,S=x.pending,L=u.memoizedState;if(S!==null){x.pending=null;var Y=S=S.next;do L=o(L,Y.action),Y=Y.next;while(Y!==S);on(L,u.memoizedState)||(Vs=!0),u.memoizedState=L,u.baseQueue===null&&(u.baseState=L),x.lastRenderedState=L}return[L,b]}function j_(o,u,x){var b=_t,S=Rs(),L=Rt;if(L){if(x===void 0)throw Error(n(407));x=x()}else x=u();var Y=!on((ds||S).memoizedState,x);if(Y&&(S.memoizedState=x,Vs=!0),S=S.queue,Qb(__.bind(null,b,S,o),[o]),S.getSnapshot!==u||Y||Gs!==null&&Gs.memoizedState.tag&1){if(b.flags|=2048,Xc(9,{destroy:void 0},S_.bind(null,b,S,x,u),null),gs===null)throw Error(n(349));L||(oi&127)!==0||C_(b,u,x)}return x}function C_(o,u,x){o.flags|=16384,o={getSnapshot:u,value:x},u=_t.updateQueue,u===null?(u=xg(),_t.updateQueue=u,u.stores=[o]):(x=u.stores,x===null?u.stores=[o]:x.push(o))}function S_(o,u,x,b){u.value=x,u.getSnapshot=b,T_(u)&&E_(o)}function __(o,u,x){return x(function(){T_(u)&&E_(o)})}function T_(o){var u=o.getSnapshot;o=o.value;try{var x=u();return!on(o,x)}catch{return!0}}function E_(o){var u=so(o,2);u!==null&&Ha(u,o,2)}function Wb(o){var u=La();if(typeof o=="function"){var x=o;if(o=x(),mo){me(!0);try{x()}finally{me(!1)}}}return u.memoizedState=u.baseState=o,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ci,lastRenderedState:o},u}function A_(o,u,x,b){return o.baseState=x,Gb(o,ds,typeof b=="function"?b:ci)}function DR(o,u,x,b,S){if(Ng(o))throw Error(n(485));if(o=u.action,o!==null){var L={payload:S,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Y){L.listeners.push(Y)}};R.T!==null?x(!0):L.isTransition=!1,b(L),x=u.pending,x===null?(L.next=u.pending=L,L_(u,L)):(L.next=x.next,u.pending=x.next=L)}}function L_(o,u){var x=u.action,b=u.payload,S=o.state;if(u.isTransition){var L=R.T,Y={};R.T=Y;try{var ce=x(S,b),Ee=R.S;Ee!==null&&Ee(Y,ce),k_(o,u,ce)}catch(Fe){Yb(o,u,Fe)}finally{L!==null&&Y.types!==null&&(L.types=Y.types),R.T=L}}else try{L=x(S,b),k_(o,u,L)}catch(Fe){Yb(o,u,Fe)}}function k_(o,u,x){x!==null&&typeof x=="object"&&typeof x.then=="function"?x.then(function(b){D_(o,u,b)},function(b){return Yb(o,u,b)}):D_(o,u,x)}function D_(o,u,x){u.status="fulfilled",u.value=x,M_(u),o.state=x,u=o.pending,u!==null&&(x=u.next,x===u?o.pending=null:(x=x.next,u.next=x,L_(o,x)))}function Yb(o,u,x){var b=o.pending;if(o.pending=null,b!==null){b=b.next;do u.status="rejected",u.reason=x,M_(u),u=u.next;while(u!==b)}o.action=null}function M_(o){o=o.listeners;for(var u=0;u<o.length;u++)(0,o[u])()}function P_(o,u){return u}function O_(o,u){if(Rt){var x=gs.formState;if(x!==null){e:{var b=_t;if(Rt){if(vs){t:{for(var S=vs,L=Dn;S.nodeType!==8;){if(!L){S=null;break t}if(S=Pn(S.nextSibling),S===null){S=null;break t}}L=S.data,S=L==="F!"||L==="F"?S:null}if(S){vs=Pn(S.nextSibling),b=S.data==="F!";break e}}nl(b)}b=!1}b&&(u=x[0])}}return x=La(),x.memoizedState=x.baseState=u,b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:P_,lastRenderedState:u},x.queue=b,x=eT.bind(null,_t,b),b.dispatch=x,b=Wb(!1),L=Jb.bind(null,_t,!1,b.queue),b=La(),S={state:u,dispatch:null,action:o,pending:null},b.queue=S,x=DR.bind(null,_t,S,L,x),S.dispatch=x,b.memoizedState=o,[u,x,!1]}function I_(o){var u=Rs();return $_(u,ds,o)}function $_(o,u,x){if(u=Gb(o,u,P_)[0],o=yg(ci)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var b=Hu(u)}catch(Y){throw Y===Vc?og:Y}else b=u;u=Rs();var S=u.queue,L=S.dispatch;return x!==u.memoizedState&&(_t.flags|=2048,Xc(9,{destroy:void 0},MR.bind(null,S,x),null)),[b,L,o]}function MR(o,u){o.action=u}function R_(o){var u=Rs(),x=ds;if(x!==null)return $_(u,x,o);Rs(),u=u.memoizedState,x=Rs();var b=x.queue.dispatch;return x.memoizedState=o,[u,b,!1]}function Xc(o,u,x,b){return o={tag:o,create:x,deps:b,inst:u,next:null},u=_t.updateQueue,u===null&&(u=xg(),_t.updateQueue=u),x=u.lastEffect,x===null?u.lastEffect=o.next=o:(b=x.next,x.next=o,o.next=b,u.lastEffect=o),o}function U_(){return Rs().memoizedState}function bg(o,u,x,b){var S=La();_t.flags|=o,S.memoizedState=Xc(1|u,{destroy:void 0},x,b===void 0?null:b)}function vg(o,u,x,b){var S=Rs();b=b===void 0?null:b;var L=S.memoizedState.inst;ds!==null&&b!==null&&Rb(b,ds.memoizedState.deps)?S.memoizedState=Xc(u,L,x,b):(_t.flags|=o,S.memoizedState=Xc(1|u,L,x,b))}function z_(o,u){bg(8390656,8,o,u)}function Qb(o,u){vg(2048,8,o,u)}function PR(o){_t.flags|=4;var u=_t.updateQueue;if(u===null)u=xg(),_t.updateQueue=u,u.events=[o];else{var x=u.events;x===null?u.events=[o]:x.push(o)}}function F_(o){var u=Rs().memoizedState;return PR({ref:u,nextImpl:o}),function(){if((Wt&2)!==0)throw Error(n(440));return u.impl.apply(void 0,arguments)}}function B_(o,u){return vg(4,2,o,u)}function H_(o,u){return vg(4,4,o,u)}function G_(o,u){if(typeof u=="function"){o=o();var x=u(o);return function(){typeof x=="function"?x():u(null)}}if(u!=null)return o=o(),u.current=o,function(){u.current=null}}function V_(o,u,x){x=x!=null?x.concat([o]):null,vg(4,4,G_.bind(null,u,o),x)}function qb(){}function W_(o,u){var x=Rs();u=u===void 0?null:u;var b=x.memoizedState;return u!==null&&Rb(u,b[1])?b[0]:(x.memoizedState=[o,u],o)}function Y_(o,u){var x=Rs();u=u===void 0?null:u;var b=x.memoizedState;if(u!==null&&Rb(u,b[1]))return b[0];if(b=o(),mo){me(!0);try{o()}finally{me(!1)}}return x.memoizedState=[b,u],b}function Xb(o,u,x){return x===void 0||(oi&1073741824)!==0&&(Pt&261930)===0?o.memoizedState=u:(o.memoizedState=x,o=QT(),_t.lanes|=o,fl|=o,x)}function Q_(o,u,x,b){return on(x,u)?x:Yc.current!==null?(o=Xb(o,x,b),on(o,u)||(Vs=!0),o):(oi&42)===0||(oi&1073741824)!==0&&(Pt&261930)===0?(Vs=!0,o.memoizedState=x):(o=QT(),_t.lanes|=o,fl|=o,u)}function q_(o,u,x,b,S){var L=Z.p;Z.p=L!==0&&8>L?L:8;var Y=R.T,ce={};R.T=ce,Jb(o,!1,u,x);try{var Ee=S(),Fe=R.S;if(Fe!==null&&Fe(ce,Ee),Ee!==null&&typeof Ee=="object"&&typeof Ee.then=="function"){var Ye=AR(Ee,b);Gu(o,u,Ye,hn(o))}else Gu(o,u,b,hn(o))}catch(Je){Gu(o,u,{then:function(){},status:"rejected",reason:Je},hn())}finally{Z.p=L,Y!==null&&ce.types!==null&&(Y.types=ce.types),R.T=Y}}function OR(){}function Kb(o,u,x,b){if(o.tag!==5)throw Error(n(476));var S=X_(o).queue;q_(o,S,u,te,x===null?OR:function(){return K_(o),x(b)})}function X_(o){var u=o.memoizedState;if(u!==null)return u;u={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ci,lastRenderedState:te},next:null};var x={};return u.next={memoizedState:x,baseState:x,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ci,lastRenderedState:x},next:null},o.memoizedState=u,o=o.alternate,o!==null&&(o.memoizedState=u),u}function K_(o){var u=X_(o);u.next===null&&(u=o.alternate.memoizedState),Gu(o,u.next.queue,{},hn())}function Zb(){return fa(lm)}function Z_(){return Rs().memoizedState}function J_(){return Rs().memoizedState}function IR(o){for(var u=o.return;u!==null;){switch(u.tag){case 24:case 3:var x=hn();o=ll(x);var b=ol(u,o,x);b!==null&&(Ha(b,u,x),Uu(b,u,x)),u={cache:Tb()},o.payload=u;return}u=u.return}}function $R(o,u,x){var b=hn();x={lane:b,revertLane:0,gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null},Ng(o)?tT(u,x):(x=xb(o,u,x,b),x!==null&&(Ha(x,o,b),sT(x,u,b)))}function eT(o,u,x){var b=hn();Gu(o,u,x,b)}function Gu(o,u,x,b){var S={lane:b,revertLane:0,gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null};if(Ng(o))tT(u,S);else{var L=o.alternate;if(o.lanes===0&&(L===null||L.lanes===0)&&(L=u.lastRenderedReducer,L!==null))try{var Y=u.lastRenderedState,ce=L(Y,x);if(S.hasEagerState=!0,S.eagerState=ce,on(ce,Y))return tg(o,u,S,0),gs===null&&eg(),!1}catch{}finally{}if(x=xb(o,u,S,b),x!==null)return Ha(x,o,b),sT(x,u,b),!0}return!1}function Jb(o,u,x,b){if(b={lane:2,revertLane:kv(),gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null},Ng(o)){if(u)throw Error(n(479))}else u=xb(o,x,b,2),u!==null&&Ha(u,o,2)}function Ng(o){var u=o.alternate;return o===_t||u!==null&&u===_t}function tT(o,u){Qc=hg=!0;var x=o.pending;x===null?u.next=u:(u.next=x.next,x.next=u),o.pending=u}function sT(o,u,x){if((x&4194048)!==0){var b=u.lanes;b&=o.pendingLanes,x|=b,u.lanes=x,He(o,x)}}var Vu={readContext:fa,use:pg,useCallback:ks,useContext:ks,useEffect:ks,useImperativeHandle:ks,useLayoutEffect:ks,useInsertionEffect:ks,useMemo:ks,useReducer:ks,useRef:ks,useState:ks,useDebugValue:ks,useDeferredValue:ks,useTransition:ks,useSyncExternalStore:ks,useId:ks,useHostTransitionStatus:ks,useFormState:ks,useActionState:ks,useOptimistic:ks,useMemoCache:ks,useCacheRefresh:ks};Vu.useEffectEvent=ks;var aT={readContext:fa,use:pg,useCallback:function(o,u){return La().memoizedState=[o,u===void 0?null:u],o},useContext:fa,useEffect:z_,useImperativeHandle:function(o,u,x){x=x!=null?x.concat([o]):null,bg(4194308,4,G_.bind(null,u,o),x)},useLayoutEffect:function(o,u){return bg(4194308,4,o,u)},useInsertionEffect:function(o,u){bg(4,2,o,u)},useMemo:function(o,u){var x=La();u=u===void 0?null:u;var b=o();if(mo){me(!0);try{o()}finally{me(!1)}}return x.memoizedState=[b,u],b},useReducer:function(o,u,x){var b=La();if(x!==void 0){var S=x(u);if(mo){me(!0);try{x(u)}finally{me(!1)}}}else S=u;return b.memoizedState=b.baseState=S,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:S},b.queue=o,o=o.dispatch=$R.bind(null,_t,o),[b.memoizedState,o]},useRef:function(o){var u=La();return o={current:o},u.memoizedState=o},useState:function(o){o=Wb(o);var u=o.queue,x=eT.bind(null,_t,u);return u.dispatch=x,[o.memoizedState,x]},useDebugValue:qb,useDeferredValue:function(o,u){var x=La();return Xb(x,o,u)},useTransition:function(){var o=Wb(!1);return o=q_.bind(null,_t,o.queue,!0,!1),La().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,u,x){var b=_t,S=La();if(Rt){if(x===void 0)throw Error(n(407));x=x()}else{if(x=u(),gs===null)throw Error(n(349));(Pt&127)!==0||C_(b,u,x)}S.memoizedState=x;var L={value:x,getSnapshot:u};return S.queue=L,z_(__.bind(null,b,L,o),[o]),b.flags|=2048,Xc(9,{destroy:void 0},S_.bind(null,b,L,x,u),null),x},useId:function(){var o=La(),u=gs.identifierPrefix;if(Rt){var x=Cr,b=jr;x=(b&~(1<<32-Se(b)-1)).toString(32)+x,u="_"+u+"R_"+x,x=gg++,0<x&&(u+="H"+x.toString(32)),u+="_"}else x=LR++,u="_"+u+"r_"+x.toString(32)+"_";return o.memoizedState=u},useHostTransitionStatus:Zb,useFormState:O_,useActionState:O_,useOptimistic:function(o){var u=La();u.memoizedState=u.baseState=o;var x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=x,u=Jb.bind(null,_t,!0,x),x.dispatch=u,[o,u]},useMemoCache:Hb,useCacheRefresh:function(){return La().memoizedState=IR.bind(null,_t)},useEffectEvent:function(o){var u=La(),x={impl:o};return u.memoizedState=x,function(){if((Wt&2)!==0)throw Error(n(440));return x.impl.apply(void 0,arguments)}}},ev={readContext:fa,use:pg,useCallback:W_,useContext:fa,useEffect:Qb,useImperativeHandle:V_,useInsertionEffect:B_,useLayoutEffect:H_,useMemo:Y_,useReducer:yg,useRef:U_,useState:function(){return yg(ci)},useDebugValue:qb,useDeferredValue:function(o,u){var x=Rs();return Q_(x,ds.memoizedState,o,u)},useTransition:function(){var o=yg(ci)[0],u=Rs().memoizedState;return[typeof o=="boolean"?o:Hu(o),u]},useSyncExternalStore:j_,useId:Z_,useHostTransitionStatus:Zb,useFormState:I_,useActionState:I_,useOptimistic:function(o,u){var x=Rs();return A_(x,ds,o,u)},useMemoCache:Hb,useCacheRefresh:J_};ev.useEffectEvent=F_;var nT={readContext:fa,use:pg,useCallback:W_,useContext:fa,useEffect:Qb,useImperativeHandle:V_,useInsertionEffect:B_,useLayoutEffect:H_,useMemo:Y_,useReducer:Vb,useRef:U_,useState:function(){return Vb(ci)},useDebugValue:qb,useDeferredValue:function(o,u){var x=Rs();return ds===null?Xb(x,o,u):Q_(x,ds.memoizedState,o,u)},useTransition:function(){var o=Vb(ci)[0],u=Rs().memoizedState;return[typeof o=="boolean"?o:Hu(o),u]},useSyncExternalStore:j_,useId:Z_,useHostTransitionStatus:Zb,useFormState:R_,useActionState:R_,useOptimistic:function(o,u){var x=Rs();return ds!==null?A_(x,ds,o,u):(x.baseState=o,[o,x.queue.dispatch])},useMemoCache:Hb,useCacheRefresh:J_};nT.useEffectEvent=F_;function tv(o,u,x,b){u=o.memoizedState,x=x(b,u),x=x==null?u:h({},u,x),o.memoizedState=x,o.lanes===0&&(o.updateQueue.baseState=x)}var sv={enqueueSetState:function(o,u,x){o=o._reactInternals;var b=hn(),S=ll(b);S.payload=u,x!=null&&(S.callback=x),u=ol(o,S,b),u!==null&&(Ha(u,o,b),Uu(u,o,b))},enqueueReplaceState:function(o,u,x){o=o._reactInternals;var b=hn(),S=ll(b);S.tag=1,S.payload=u,x!=null&&(S.callback=x),u=ol(o,S,b),u!==null&&(Ha(u,o,b),Uu(u,o,b))},enqueueForceUpdate:function(o,u){o=o._reactInternals;var x=hn(),b=ll(x);b.tag=2,u!=null&&(b.callback=u),u=ol(o,b,x),u!==null&&(Ha(u,o,x),Uu(u,o,x))}};function rT(o,u,x,b,S,L,Y){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(b,L,Y):u.prototype&&u.prototype.isPureReactComponent?!ku(x,b)||!ku(S,L):!0}function iT(o,u,x,b){o=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(x,b),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(x,b),u.state!==o&&sv.enqueueReplaceState(u,u.state,null)}function fo(o,u){var x=u;if("ref"in u){x={};for(var b in u)b!=="ref"&&(x[b]=u[b])}if(o=o.defaultProps){x===u&&(x=h({},x));for(var S in o)x[S]===void 0&&(x[S]=o[S])}return x}function lT(o){Jh(o)}function oT(o){console.error(o)}function cT(o){Jh(o)}function wg(o,u){try{var x=o.onUncaughtError;x(u.value,{componentStack:u.stack})}catch(b){setTimeout(function(){throw b})}}function dT(o,u,x){try{var b=o.onCaughtError;b(x.value,{componentStack:x.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(S){setTimeout(function(){throw S})}}function av(o,u,x){return x=ll(x),x.tag=3,x.payload={element:null},x.callback=function(){wg(o,u)},x}function uT(o){return o=ll(o),o.tag=3,o}function mT(o,u,x,b){var S=x.type.getDerivedStateFromError;if(typeof S=="function"){var L=b.value;o.payload=function(){return S(L)},o.callback=function(){dT(u,x,b)}}var Y=x.stateNode;Y!==null&&typeof Y.componentDidCatch=="function"&&(o.callback=function(){dT(u,x,b),typeof S!="function"&&(hl===null?hl=new Set([this]):hl.add(this));var ce=b.stack;this.componentDidCatch(b.value,{componentStack:ce!==null?ce:""})})}function RR(o,u,x,b,S){if(x.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){if(u=x.alternate,u!==null&&Bc(u,x,S,!0),x=dn.current,x!==null){switch(x.tag){case 31:case 13:return Mn===null?Pg():x.alternate===null&&Ds===0&&(Ds=3),x.flags&=-257,x.flags|=65536,x.lanes=S,b===cg?x.flags|=16384:(u=x.updateQueue,u===null?x.updateQueue=new Set([b]):u.add(b),Ev(o,b,S)),!1;case 22:return x.flags|=65536,b===cg?x.flags|=16384:(u=x.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([b])},x.updateQueue=u):(x=u.retryQueue,x===null?u.retryQueue=new Set([b]):x.add(b)),Ev(o,b,S)),!1}throw Error(n(435,x.tag))}return Ev(o,b,S),Pg(),!1}if(Rt)return u=dn.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=S,b!==wb&&(o=Error(n(422),{cause:b}),Pu(An(o,x)))):(b!==wb&&(u=Error(n(423),{cause:b}),Pu(An(u,x))),o=o.current.alternate,o.flags|=65536,S&=-S,o.lanes|=S,b=An(b,x),S=av(o.stateNode,b,S),Mb(o,S),Ds!==4&&(Ds=2)),!1;var L=Error(n(520),{cause:b});if(L=An(L,x),Ju===null?Ju=[L]:Ju.push(L),Ds!==4&&(Ds=2),u===null)return!0;b=An(b,x),x=u;do{switch(x.tag){case 3:return x.flags|=65536,o=S&-S,x.lanes|=o,o=av(x.stateNode,b,o),Mb(x,o),!1;case 1:if(u=x.type,L=x.stateNode,(x.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(hl===null||!hl.has(L))))return x.flags|=65536,S&=-S,x.lanes|=S,S=uT(S),mT(S,o,x,b),Mb(x,S),!1}x=x.return}while(x!==null);return!1}var nv=Error(n(461)),Vs=!1;function ha(o,u,x,b){u.child=o===null?x_(u,null,x,b):uo(u,o.child,x,b)}function fT(o,u,x,b,S){x=x.render;var L=u.ref;if("ref"in b){var Y={};for(var ce in b)ce!=="ref"&&(Y[ce]=b[ce])}else Y=b;return io(u),b=Ub(o,u,x,Y,L,S),ce=zb(),o!==null&&!Vs?(Fb(o,u,S),di(o,u,S)):(Rt&&ce&&vb(u),u.flags|=1,ha(o,u,b,S),u.child)}function hT(o,u,x,b,S){if(o===null){var L=x.type;return typeof L=="function"&&!pb(L)&&L.defaultProps===void 0&&x.compare===null?(u.tag=15,u.type=L,gT(o,u,L,b,S)):(o=ag(x.type,null,b,u,u.mode,S),o.ref=u.ref,o.return=u,u.child=o)}if(L=o.child,!mv(o,S)){var Y=L.memoizedProps;if(x=x.compare,x=x!==null?x:ku,x(Y,b)&&o.ref===u.ref)return di(o,u,S)}return u.flags|=1,o=ni(L,b),o.ref=u.ref,o.return=u,u.child=o}function gT(o,u,x,b,S){if(o!==null){var L=o.memoizedProps;if(ku(L,b)&&o.ref===u.ref)if(Vs=!1,u.pendingProps=b=L,mv(o,S))(o.flags&131072)!==0&&(Vs=!0);else return u.lanes=o.lanes,di(o,u,S)}return rv(o,u,x,b,S)}function xT(o,u,x,b){var S=b.children,L=o!==null?o.memoizedState:null;if(o===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),b.mode==="hidden"){if((u.flags&128)!==0){if(L=L!==null?L.baseLanes|x:x,o!==null){for(b=u.child=o.child,S=0;b!==null;)S=S|b.lanes|b.childLanes,b=b.sibling;b=S&~L}else b=0,u.child=null;return pT(o,u,L,x,b)}if((x&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},o!==null&&lg(u,L!==null?L.cachePool:null),L!==null?b_(u,L):Ob(),v_(u);else return b=u.lanes=536870912,pT(o,u,L!==null?L.baseLanes|x:x,x,b)}else L!==null?(lg(u,L.cachePool),b_(u,L),dl(),u.memoizedState=null):(o!==null&&lg(u,null),Ob(),dl());return ha(o,u,S,x),u.child}function Wu(o,u){return o!==null&&o.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function pT(o,u,x,b,S){var L=Ab();return L=L===null?null:{parent:Hs._currentValue,pool:L},u.memoizedState={baseLanes:x,cachePool:L},o!==null&&lg(u,null),Ob(),v_(u),o!==null&&Bc(o,u,b,!0),u.childLanes=S,null}function jg(o,u){return u=Sg({mode:u.mode,children:u.children},o.mode),u.ref=o.ref,o.child=u,u.return=o,u}function yT(o,u,x){return uo(u,o.child,null,x),o=jg(u,u.pendingProps),o.flags|=2,un(u),u.memoizedState=null,o}function UR(o,u,x){var b=u.pendingProps,S=(u.flags&128)!==0;if(u.flags&=-129,o===null){if(Rt){if(b.mode==="hidden")return o=jg(u,b),u.lanes=536870912,Wu(null,o);if($b(u),(o=vs)?(o=LE(o,Dn),o=o!==null&&o.data==="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:sl!==null?{id:jr,overflow:Cr}:null,retryLane:536870912,hydrationErrors:null},x=t_(o),x.return=u,u.child=x,ma=u,vs=null)):o=null,o===null)throw nl(u);return u.lanes=536870912,null}return jg(u,b)}var L=o.memoizedState;if(L!==null){var Y=L.dehydrated;if($b(u),S)if(u.flags&256)u.flags&=-257,u=yT(o,u,x);else if(u.memoizedState!==null)u.child=o.child,u.flags|=128,u=null;else throw Error(n(558));else if(Vs||Bc(o,u,x,!1),S=(x&o.childLanes)!==0,Vs||S){if(b=gs,b!==null&&(Y=st(b,x),Y!==0&&Y!==L.retryLane))throw L.retryLane=Y,so(o,Y),Ha(b,o,Y),nv;Pg(),u=yT(o,u,x)}else o=L.treeContext,vs=Pn(Y.nextSibling),ma=u,Rt=!0,al=null,Dn=!1,o!==null&&n_(u,o),u=jg(u,b),u.flags|=4096;return u}return o=ni(o.child,{mode:b.mode,children:b.children}),o.ref=u.ref,u.child=o,o.return=u,o}function Cg(o,u){var x=u.ref;if(x===null)o!==null&&o.ref!==null&&(u.flags|=4194816);else{if(typeof x!="function"&&typeof x!="object")throw Error(n(284));(o===null||o.ref!==x)&&(u.flags|=4194816)}}function rv(o,u,x,b,S){return io(u),x=Ub(o,u,x,b,void 0,S),b=zb(),o!==null&&!Vs?(Fb(o,u,S),di(o,u,S)):(Rt&&b&&vb(u),u.flags|=1,ha(o,u,x,S),u.child)}function bT(o,u,x,b,S,L){return io(u),u.updateQueue=null,x=w_(u,b,x,S),N_(o),b=zb(),o!==null&&!Vs?(Fb(o,u,L),di(o,u,L)):(Rt&&b&&vb(u),u.flags|=1,ha(o,u,x,L),u.child)}function vT(o,u,x,b,S){if(io(u),u.stateNode===null){var L=Rc,Y=x.contextType;typeof Y=="object"&&Y!==null&&(L=fa(Y)),L=new x(b,L),u.memoizedState=L.state!==null&&L.state!==void 0?L.state:null,L.updater=sv,u.stateNode=L,L._reactInternals=u,L=u.stateNode,L.props=b,L.state=u.memoizedState,L.refs={},kb(u),Y=x.contextType,L.context=typeof Y=="object"&&Y!==null?fa(Y):Rc,L.state=u.memoizedState,Y=x.getDerivedStateFromProps,typeof Y=="function"&&(tv(u,x,Y,b),L.state=u.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof L.getSnapshotBeforeUpdate=="function"||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(Y=L.state,typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount(),Y!==L.state&&sv.enqueueReplaceState(L,L.state,null),Fu(u,b,L,S),zu(),L.state=u.memoizedState),typeof L.componentDidMount=="function"&&(u.flags|=4194308),b=!0}else if(o===null){L=u.stateNode;var ce=u.memoizedProps,Ee=fo(x,ce);L.props=Ee;var Fe=L.context,Ye=x.contextType;Y=Rc,typeof Ye=="object"&&Ye!==null&&(Y=fa(Ye));var Je=x.getDerivedStateFromProps;Ye=typeof Je=="function"||typeof L.getSnapshotBeforeUpdate=="function",ce=u.pendingProps!==ce,Ye||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(ce||Fe!==Y)&&iT(u,L,b,Y),il=!1;var Be=u.memoizedState;L.state=Be,Fu(u,b,L,S),zu(),Fe=u.memoizedState,ce||Be!==Fe||il?(typeof Je=="function"&&(tv(u,x,Je,b),Fe=u.memoizedState),(Ee=il||rT(u,x,Ee,b,Be,Fe,Y))?(Ye||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount()),typeof L.componentDidMount=="function"&&(u.flags|=4194308)):(typeof L.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=b,u.memoizedState=Fe),L.props=b,L.state=Fe,L.context=Y,b=Ee):(typeof L.componentDidMount=="function"&&(u.flags|=4194308),b=!1)}else{L=u.stateNode,Db(o,u),Y=u.memoizedProps,Ye=fo(x,Y),L.props=Ye,Je=u.pendingProps,Be=L.context,Fe=x.contextType,Ee=Rc,typeof Fe=="object"&&Fe!==null&&(Ee=fa(Fe)),ce=x.getDerivedStateFromProps,(Fe=typeof ce=="function"||typeof L.getSnapshotBeforeUpdate=="function")||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(Y!==Je||Be!==Ee)&&iT(u,L,b,Ee),il=!1,Be=u.memoizedState,L.state=Be,Fu(u,b,L,S),zu();var Ve=u.memoizedState;Y!==Je||Be!==Ve||il||o!==null&&o.dependencies!==null&&rg(o.dependencies)?(typeof ce=="function"&&(tv(u,x,ce,b),Ve=u.memoizedState),(Ye=il||rT(u,x,Ye,b,Be,Ve,Ee)||o!==null&&o.dependencies!==null&&rg(o.dependencies))?(Fe||typeof L.UNSAFE_componentWillUpdate!="function"&&typeof L.componentWillUpdate!="function"||(typeof L.componentWillUpdate=="function"&&L.componentWillUpdate(b,Ve,Ee),typeof L.UNSAFE_componentWillUpdate=="function"&&L.UNSAFE_componentWillUpdate(b,Ve,Ee)),typeof L.componentDidUpdate=="function"&&(u.flags|=4),typeof L.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof L.componentDidUpdate!="function"||Y===o.memoizedProps&&Be===o.memoizedState||(u.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||Y===o.memoizedProps&&Be===o.memoizedState||(u.flags|=1024),u.memoizedProps=b,u.memoizedState=Ve),L.props=b,L.state=Ve,L.context=Ee,b=Ye):(typeof L.componentDidUpdate!="function"||Y===o.memoizedProps&&Be===o.memoizedState||(u.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||Y===o.memoizedProps&&Be===o.memoizedState||(u.flags|=1024),b=!1)}return L=b,Cg(o,u),b=(u.flags&128)!==0,L||b?(L=u.stateNode,x=b&&typeof x.getDerivedStateFromError!="function"?null:L.render(),u.flags|=1,o!==null&&b?(u.child=uo(u,o.child,null,S),u.child=uo(u,null,x,S)):ha(o,u,x,S),u.memoizedState=L.state,o=u.child):o=di(o,u,S),o}function NT(o,u,x,b){return no(),u.flags|=256,ha(o,u,x,b),u.child}var iv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function lv(o){return{baseLanes:o,cachePool:d_()}}function ov(o,u,x){return o=o!==null?o.childLanes&~x:0,u&&(o|=fn),o}function wT(o,u,x){var b=u.pendingProps,S=!1,L=(u.flags&128)!==0,Y;if((Y=L)||(Y=o!==null&&o.memoizedState===null?!1:($s.current&2)!==0),Y&&(S=!0,u.flags&=-129),Y=(u.flags&32)!==0,u.flags&=-33,o===null){if(Rt){if(S?cl(u):dl(),(o=vs)?(o=LE(o,Dn),o=o!==null&&o.data!=="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:sl!==null?{id:jr,overflow:Cr}:null,retryLane:536870912,hydrationErrors:null},x=t_(o),x.return=u,u.child=x,ma=u,vs=null)):o=null,o===null)throw nl(u);return Gv(o)?u.lanes=32:u.lanes=536870912,null}var ce=b.children;return b=b.fallback,S?(dl(),S=u.mode,ce=Sg({mode:"hidden",children:ce},S),b=ao(b,S,x,null),ce.return=u,b.return=u,ce.sibling=b,u.child=ce,b=u.child,b.memoizedState=lv(x),b.childLanes=ov(o,Y,x),u.memoizedState=iv,Wu(null,b)):(cl(u),cv(u,ce))}var Ee=o.memoizedState;if(Ee!==null&&(ce=Ee.dehydrated,ce!==null)){if(L)u.flags&256?(cl(u),u.flags&=-257,u=dv(o,u,x)):u.memoizedState!==null?(dl(),u.child=o.child,u.flags|=128,u=null):(dl(),ce=b.fallback,S=u.mode,b=Sg({mode:"visible",children:b.children},S),ce=ao(ce,S,x,null),ce.flags|=2,b.return=u,ce.return=u,b.sibling=ce,u.child=b,uo(u,o.child,null,x),b=u.child,b.memoizedState=lv(x),b.childLanes=ov(o,Y,x),u.memoizedState=iv,u=Wu(null,b));else if(cl(u),Gv(ce)){if(Y=ce.nextSibling&&ce.nextSibling.dataset,Y)var Fe=Y.dgst;Y=Fe,b=Error(n(419)),b.stack="",b.digest=Y,Pu({value:b,source:null,stack:null}),u=dv(o,u,x)}else if(Vs||Bc(o,u,x,!1),Y=(x&o.childLanes)!==0,Vs||Y){if(Y=gs,Y!==null&&(b=st(Y,x),b!==0&&b!==Ee.retryLane))throw Ee.retryLane=b,so(o,b),Ha(Y,o,b),nv;Hv(ce)||Pg(),u=dv(o,u,x)}else Hv(ce)?(u.flags|=192,u.child=o.child,u=null):(o=Ee.treeContext,vs=Pn(ce.nextSibling),ma=u,Rt=!0,al=null,Dn=!1,o!==null&&n_(u,o),u=cv(u,b.children),u.flags|=4096);return u}return S?(dl(),ce=b.fallback,S=u.mode,Ee=o.child,Fe=Ee.sibling,b=ni(Ee,{mode:"hidden",children:b.children}),b.subtreeFlags=Ee.subtreeFlags&65011712,Fe!==null?ce=ni(Fe,ce):(ce=ao(ce,S,x,null),ce.flags|=2),ce.return=u,b.return=u,b.sibling=ce,u.child=b,Wu(null,b),b=u.child,ce=o.child.memoizedState,ce===null?ce=lv(x):(S=ce.cachePool,S!==null?(Ee=Hs._currentValue,S=S.parent!==Ee?{parent:Ee,pool:Ee}:S):S=d_(),ce={baseLanes:ce.baseLanes|x,cachePool:S}),b.memoizedState=ce,b.childLanes=ov(o,Y,x),u.memoizedState=iv,Wu(o.child,b)):(cl(u),x=o.child,o=x.sibling,x=ni(x,{mode:"visible",children:b.children}),x.return=u,x.sibling=null,o!==null&&(Y=u.deletions,Y===null?(u.deletions=[o],u.flags|=16):Y.push(o)),u.child=x,u.memoizedState=null,x)}function cv(o,u){return u=Sg({mode:"visible",children:u},o.mode),u.return=o,o.child=u}function Sg(o,u){return o=cn(22,o,null,u),o.lanes=0,o}function dv(o,u,x){return uo(u,o.child,null,x),o=cv(u,u.pendingProps.children),o.flags|=2,u.memoizedState=null,o}function jT(o,u,x){o.lanes|=u;var b=o.alternate;b!==null&&(b.lanes|=u),Sb(o.return,u,x)}function uv(o,u,x,b,S,L){var Y=o.memoizedState;Y===null?o.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:b,tail:x,tailMode:S,treeForkCount:L}:(Y.isBackwards=u,Y.rendering=null,Y.renderingStartTime=0,Y.last=b,Y.tail=x,Y.tailMode=S,Y.treeForkCount=L)}function CT(o,u,x){var b=u.pendingProps,S=b.revealOrder,L=b.tail;b=b.children;var Y=$s.current,ce=(Y&2)!==0;if(ce?(Y=Y&1|2,u.flags|=128):Y&=1,J($s,Y),ha(o,u,b,x),b=Rt?Mu:0,!ce&&o!==null&&(o.flags&128)!==0)e:for(o=u.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&jT(o,x,u);else if(o.tag===19)jT(o,x,u);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===u)break e;for(;o.sibling===null;){if(o.return===null||o.return===u)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(S){case"forwards":for(x=u.child,S=null;x!==null;)o=x.alternate,o!==null&&fg(o)===null&&(S=x),x=x.sibling;x=S,x===null?(S=u.child,u.child=null):(S=x.sibling,x.sibling=null),uv(u,!1,S,x,L,b);break;case"backwards":case"unstable_legacy-backwards":for(x=null,S=u.child,u.child=null;S!==null;){if(o=S.alternate,o!==null&&fg(o)===null){u.child=S;break}o=S.sibling,S.sibling=x,x=S,S=o}uv(u,!0,x,null,L,b);break;case"together":uv(u,!1,null,null,void 0,b);break;default:u.memoizedState=null}return u.child}function di(o,u,x){if(o!==null&&(u.dependencies=o.dependencies),fl|=u.lanes,(x&u.childLanes)===0)if(o!==null){if(Bc(o,u,x,!1),(x&u.childLanes)===0)return null}else return null;if(o!==null&&u.child!==o.child)throw Error(n(153));if(u.child!==null){for(o=u.child,x=ni(o,o.pendingProps),u.child=x,x.return=u;o.sibling!==null;)o=o.sibling,x=x.sibling=ni(o,o.pendingProps),x.return=u;x.sibling=null}return u.child}function mv(o,u){return(o.lanes&u)!==0?!0:(o=o.dependencies,!!(o!==null&&rg(o)))}function zR(o,u,x){switch(u.tag){case 3:ke(u,u.stateNode.containerInfo),rl(u,Hs,o.memoizedState.cache),no();break;case 27:case 5:ve(u);break;case 4:ke(u,u.stateNode.containerInfo);break;case 10:rl(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,$b(u),null;break;case 13:var b=u.memoizedState;if(b!==null)return b.dehydrated!==null?(cl(u),u.flags|=128,null):(x&u.child.childLanes)!==0?wT(o,u,x):(cl(u),o=di(o,u,x),o!==null?o.sibling:null);cl(u);break;case 19:var S=(o.flags&128)!==0;if(b=(x&u.childLanes)!==0,b||(Bc(o,u,x,!1),b=(x&u.childLanes)!==0),S){if(b)return CT(o,u,x);u.flags|=128}if(S=u.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),J($s,$s.current),b)break;return null;case 22:return u.lanes=0,xT(o,u,x,u.pendingProps);case 24:rl(u,Hs,o.memoizedState.cache)}return di(o,u,x)}function ST(o,u,x){if(o!==null)if(o.memoizedProps!==u.pendingProps)Vs=!0;else{if(!mv(o,x)&&(u.flags&128)===0)return Vs=!1,zR(o,u,x);Vs=(o.flags&131072)!==0}else Vs=!1,Rt&&(u.flags&1048576)!==0&&a_(u,Mu,u.index);switch(u.lanes=0,u.tag){case 16:e:{var b=u.pendingProps;if(o=oo(u.elementType),u.type=o,typeof o=="function")pb(o)?(b=fo(o,b),u.tag=1,u=vT(null,u,o,b,x)):(u.tag=0,u=rv(null,u,o,b,x));else{if(o!=null){var S=o.$$typeof;if(S===T){u.tag=11,u=fT(null,u,o,b,x);break e}else if(S===A){u.tag=14,u=hT(null,u,o,b,x);break e}}throw u=K(o)||o,Error(n(306,u,""))}}return u;case 0:return rv(o,u,u.type,u.pendingProps,x);case 1:return b=u.type,S=fo(b,u.pendingProps),vT(o,u,b,S,x);case 3:e:{if(ke(u,u.stateNode.containerInfo),o===null)throw Error(n(387));b=u.pendingProps;var L=u.memoizedState;S=L.element,Db(o,u),Fu(u,b,null,x);var Y=u.memoizedState;if(b=Y.cache,rl(u,Hs,b),b!==L.cache&&_b(u,[Hs],x,!0),zu(),b=Y.element,L.isDehydrated)if(L={element:b,isDehydrated:!1,cache:Y.cache},u.updateQueue.baseState=L,u.memoizedState=L,u.flags&256){u=NT(o,u,b,x);break e}else if(b!==S){S=An(Error(n(424)),u),Pu(S),u=NT(o,u,b,x);break e}else{switch(o=u.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(vs=Pn(o.firstChild),ma=u,Rt=!0,al=null,Dn=!0,x=x_(u,null,b,x),u.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling}else{if(no(),b===S){u=di(o,u,x);break e}ha(o,u,b,x)}u=u.child}return u;case 26:return Cg(o,u),o===null?(x=IE(u.type,null,u.pendingProps,null))?u.memoizedState=x:Rt||(x=u.type,o=u.pendingProps,b=Fg(Le.current).createElement(x),b[ua]=u,b[$a]=o,ga(b,x,o),ia(b),u.stateNode=b):u.memoizedState=IE(u.type,o.memoizedProps,u.pendingProps,o.memoizedState),null;case 27:return ve(u),o===null&&Rt&&(b=u.stateNode=ME(u.type,u.pendingProps,Le.current),ma=u,Dn=!0,S=vs,yl(u.type)?(Vv=S,vs=Pn(b.firstChild)):vs=S),ha(o,u,u.pendingProps.children,x),Cg(o,u),o===null&&(u.flags|=4194304),u.child;case 5:return o===null&&Rt&&((S=b=vs)&&(b=x7(b,u.type,u.pendingProps,Dn),b!==null?(u.stateNode=b,ma=u,vs=Pn(b.firstChild),Dn=!1,S=!0):S=!1),S||nl(u)),ve(u),S=u.type,L=u.pendingProps,Y=o!==null?o.memoizedProps:null,b=L.children,zv(S,L)?b=null:Y!==null&&zv(S,Y)&&(u.flags|=32),u.memoizedState!==null&&(S=Ub(o,u,kR,null,null,x),lm._currentValue=S),Cg(o,u),ha(o,u,b,x),u.child;case 6:return o===null&&Rt&&((o=x=vs)&&(x=p7(x,u.pendingProps,Dn),x!==null?(u.stateNode=x,ma=u,vs=null,o=!0):o=!1),o||nl(u)),null;case 13:return wT(o,u,x);case 4:return ke(u,u.stateNode.containerInfo),b=u.pendingProps,o===null?u.child=uo(u,null,b,x):ha(o,u,b,x),u.child;case 11:return fT(o,u,u.type,u.pendingProps,x);case 7:return ha(o,u,u.pendingProps,x),u.child;case 8:return ha(o,u,u.pendingProps.children,x),u.child;case 12:return ha(o,u,u.pendingProps.children,x),u.child;case 10:return b=u.pendingProps,rl(u,u.type,b.value),ha(o,u,b.children,x),u.child;case 9:return S=u.type._context,b=u.pendingProps.children,io(u),S=fa(S),b=b(S),u.flags|=1,ha(o,u,b,x),u.child;case 14:return hT(o,u,u.type,u.pendingProps,x);case 15:return gT(o,u,u.type,u.pendingProps,x);case 19:return CT(o,u,x);case 31:return UR(o,u,x);case 22:return xT(o,u,x,u.pendingProps);case 24:return io(u),b=fa(Hs),o===null?(S=Ab(),S===null&&(S=gs,L=Tb(),S.pooledCache=L,L.refCount++,L!==null&&(S.pooledCacheLanes|=x),S=L),u.memoizedState={parent:b,cache:S},kb(u),rl(u,Hs,S)):((o.lanes&x)!==0&&(Db(o,u),Fu(u,null,null,x),zu()),S=o.memoizedState,L=u.memoizedState,S.parent!==b?(S={parent:b,cache:b},u.memoizedState=S,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=S),rl(u,Hs,b)):(b=L.cache,rl(u,Hs,b),b!==S.cache&&_b(u,[Hs],x,!0))),ha(o,u,u.pendingProps.children,x),u.child;case 29:throw u.pendingProps}throw Error(n(156,u.tag))}function ui(o){o.flags|=4}function fv(o,u,x,b,S){if((u=(o.mode&32)!==0)&&(u=!1),u){if(o.flags|=16777216,(S&335544128)===S)if(o.stateNode.complete)o.flags|=8192;else if(ZT())o.flags|=8192;else throw co=cg,Lb}else o.flags&=-16777217}function _T(o,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!FE(u))if(ZT())o.flags|=8192;else throw co=cg,Lb}function _g(o,u){u!==null&&(o.flags|=4),o.flags&16384&&(u=o.tag!==22?Ne():536870912,o.lanes|=u,ed|=u)}function Yu(o,u){if(!Rt)switch(o.tailMode){case"hidden":u=o.tail;for(var x=null;u!==null;)u.alternate!==null&&(x=u),u=u.sibling;x===null?o.tail=null:x.sibling=null;break;case"collapsed":x=o.tail;for(var b=null;x!==null;)x.alternate!==null&&(b=x),x=x.sibling;b===null?u||o.tail===null?o.tail=null:o.tail.sibling=null:b.sibling=null}}function Ns(o){var u=o.alternate!==null&&o.alternate.child===o.child,x=0,b=0;if(u)for(var S=o.child;S!==null;)x|=S.lanes|S.childLanes,b|=S.subtreeFlags&65011712,b|=S.flags&65011712,S.return=o,S=S.sibling;else for(S=o.child;S!==null;)x|=S.lanes|S.childLanes,b|=S.subtreeFlags,b|=S.flags,S.return=o,S=S.sibling;return o.subtreeFlags|=b,o.childLanes=x,u}function FR(o,u,x){var b=u.pendingProps;switch(Nb(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ns(u),null;case 1:return Ns(u),null;case 3:return x=u.stateNode,b=null,o!==null&&(b=o.memoizedState.cache),u.memoizedState.cache!==b&&(u.flags|=2048),li(Hs),F(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(o===null||o.child===null)&&(Fc(u)?ui(u):o===null||o.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,jb())),Ns(u),null;case 26:var S=u.type,L=u.memoizedState;return o===null?(ui(u),L!==null?(Ns(u),_T(u,L)):(Ns(u),fv(u,S,null,b,x))):L?L!==o.memoizedState?(ui(u),Ns(u),_T(u,L)):(Ns(u),u.flags&=-16777217):(o=o.memoizedProps,o!==b&&ui(u),Ns(u),fv(u,S,o,b,x)),null;case 27:if(Ce(u),x=Le.current,S=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==b&&ui(u);else{if(!b){if(u.stateNode===null)throw Error(n(166));return Ns(u),null}o=he.current,Fc(u)?r_(u):(o=ME(S,b,x),u.stateNode=o,ui(u))}return Ns(u),null;case 5:if(Ce(u),S=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==b&&ui(u);else{if(!b){if(u.stateNode===null)throw Error(n(166));return Ns(u),null}if(L=he.current,Fc(u))r_(u);else{var Y=Fg(Le.current);switch(L){case 1:L=Y.createElementNS("http://www.w3.org/2000/svg",S);break;case 2:L=Y.createElementNS("http://www.w3.org/1998/Math/MathML",S);break;default:switch(S){case"svg":L=Y.createElementNS("http://www.w3.org/2000/svg",S);break;case"math":L=Y.createElementNS("http://www.w3.org/1998/Math/MathML",S);break;case"script":L=Y.createElement("div"),L.innerHTML="<script><\/script>",L=L.removeChild(L.firstChild);break;case"select":L=typeof b.is=="string"?Y.createElement("select",{is:b.is}):Y.createElement("select"),b.multiple?L.multiple=!0:b.size&&(L.size=b.size);break;default:L=typeof b.is=="string"?Y.createElement(S,{is:b.is}):Y.createElement(S)}}L[ua]=u,L[$a]=b;e:for(Y=u.child;Y!==null;){if(Y.tag===5||Y.tag===6)L.appendChild(Y.stateNode);else if(Y.tag!==4&&Y.tag!==27&&Y.child!==null){Y.child.return=Y,Y=Y.child;continue}if(Y===u)break e;for(;Y.sibling===null;){if(Y.return===null||Y.return===u)break e;Y=Y.return}Y.sibling.return=Y.return,Y=Y.sibling}u.stateNode=L;e:switch(ga(L,S,b),S){case"button":case"input":case"select":case"textarea":b=!!b.autoFocus;break e;case"img":b=!0;break e;default:b=!1}b&&ui(u)}}return Ns(u),fv(u,u.type,o===null?null:o.memoizedProps,u.pendingProps,x),null;case 6:if(o&&u.stateNode!=null)o.memoizedProps!==b&&ui(u);else{if(typeof b!="string"&&u.stateNode===null)throw Error(n(166));if(o=Le.current,Fc(u)){if(o=u.stateNode,x=u.memoizedProps,b=null,S=ma,S!==null)switch(S.tag){case 27:case 5:b=S.memoizedProps}o[ua]=u,o=!!(o.nodeValue===x||b!==null&&b.suppressHydrationWarning===!0||wE(o.nodeValue,x)),o||nl(u,!0)}else o=Fg(o).createTextNode(b),o[ua]=u,u.stateNode=o}return Ns(u),null;case 31:if(x=u.memoizedState,o===null||o.memoizedState!==null){if(b=Fc(u),x!==null){if(o===null){if(!b)throw Error(n(318));if(o=u.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(557));o[ua]=u}else no(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Ns(u),o=!1}else x=jb(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=x),o=!0;if(!o)return u.flags&256?(un(u),u):(un(u),null);if((u.flags&128)!==0)throw Error(n(558))}return Ns(u),null;case 13:if(b=u.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(S=Fc(u),b!==null&&b.dehydrated!==null){if(o===null){if(!S)throw Error(n(318));if(S=u.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(n(317));S[ua]=u}else no(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Ns(u),S=!1}else S=jb(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=S),S=!0;if(!S)return u.flags&256?(un(u),u):(un(u),null)}return un(u),(u.flags&128)!==0?(u.lanes=x,u):(x=b!==null,o=o!==null&&o.memoizedState!==null,x&&(b=u.child,S=null,b.alternate!==null&&b.alternate.memoizedState!==null&&b.alternate.memoizedState.cachePool!==null&&(S=b.alternate.memoizedState.cachePool.pool),L=null,b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(L=b.memoizedState.cachePool.pool),L!==S&&(b.flags|=2048)),x!==o&&x&&(u.child.flags|=8192),_g(u,u.updateQueue),Ns(u),null);case 4:return F(),o===null&&Ov(u.stateNode.containerInfo),Ns(u),null;case 10:return li(u.type),Ns(u),null;case 19:if(ee($s),b=u.memoizedState,b===null)return Ns(u),null;if(S=(u.flags&128)!==0,L=b.rendering,L===null)if(S)Yu(b,!1);else{if(Ds!==0||o!==null&&(o.flags&128)!==0)for(o=u.child;o!==null;){if(L=fg(o),L!==null){for(u.flags|=128,Yu(b,!1),o=L.updateQueue,u.updateQueue=o,_g(u,o),u.subtreeFlags=0,o=x,x=u.child;x!==null;)e_(x,o),x=x.sibling;return J($s,$s.current&1|2),Rt&&ri(u,b.treeForkCount),u.child}o=o.sibling}b.tail!==null&&z()>kg&&(u.flags|=128,S=!0,Yu(b,!1),u.lanes=4194304)}else{if(!S)if(o=fg(L),o!==null){if(u.flags|=128,S=!0,o=o.updateQueue,u.updateQueue=o,_g(u,o),Yu(b,!0),b.tail===null&&b.tailMode==="hidden"&&!L.alternate&&!Rt)return Ns(u),null}else 2*z()-b.renderingStartTime>kg&&x!==536870912&&(u.flags|=128,S=!0,Yu(b,!1),u.lanes=4194304);b.isBackwards?(L.sibling=u.child,u.child=L):(o=b.last,o!==null?o.sibling=L:u.child=L,b.last=L)}return b.tail!==null?(o=b.tail,b.rendering=o,b.tail=o.sibling,b.renderingStartTime=z(),o.sibling=null,x=$s.current,J($s,S?x&1|2:x&1),Rt&&ri(u,b.treeForkCount),o):(Ns(u),null);case 22:case 23:return un(u),Ib(),b=u.memoizedState!==null,o!==null?o.memoizedState!==null!==b&&(u.flags|=8192):b&&(u.flags|=8192),b?(x&536870912)!==0&&(u.flags&128)===0&&(Ns(u),u.subtreeFlags&6&&(u.flags|=8192)):Ns(u),x=u.updateQueue,x!==null&&_g(u,x.retryQueue),x=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(x=o.memoizedState.cachePool.pool),b=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(b=u.memoizedState.cachePool.pool),b!==x&&(u.flags|=2048),o!==null&&ee(lo),null;case 24:return x=null,o!==null&&(x=o.memoizedState.cache),u.memoizedState.cache!==x&&(u.flags|=2048),li(Hs),Ns(u),null;case 25:return null;case 30:return null}throw Error(n(156,u.tag))}function BR(o,u){switch(Nb(u),u.tag){case 1:return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 3:return li(Hs),F(),o=u.flags,(o&65536)!==0&&(o&128)===0?(u.flags=o&-65537|128,u):null;case 26:case 27:case 5:return Ce(u),null;case 31:if(u.memoizedState!==null){if(un(u),u.alternate===null)throw Error(n(340));no()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 13:if(un(u),o=u.memoizedState,o!==null&&o.dehydrated!==null){if(u.alternate===null)throw Error(n(340));no()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 19:return ee($s),null;case 4:return F(),null;case 10:return li(u.type),null;case 22:case 23:return un(u),Ib(),o!==null&&ee(lo),o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 24:return li(Hs),null;case 25:return null;default:return null}}function TT(o,u){switch(Nb(u),u.tag){case 3:li(Hs),F();break;case 26:case 27:case 5:Ce(u);break;case 4:F();break;case 31:u.memoizedState!==null&&un(u);break;case 13:un(u);break;case 19:ee($s);break;case 10:li(u.type);break;case 22:case 23:un(u),Ib(),o!==null&&ee(lo);break;case 24:li(Hs)}}function Qu(o,u){try{var x=u.updateQueue,b=x!==null?x.lastEffect:null;if(b!==null){var S=b.next;x=S;do{if((x.tag&o)===o){b=void 0;var L=x.create,Y=x.inst;b=L(),Y.destroy=b}x=x.next}while(x!==S)}}catch(ce){ns(u,u.return,ce)}}function ul(o,u,x){try{var b=u.updateQueue,S=b!==null?b.lastEffect:null;if(S!==null){var L=S.next;b=L;do{if((b.tag&o)===o){var Y=b.inst,ce=Y.destroy;if(ce!==void 0){Y.destroy=void 0,S=u;var Ee=x,Fe=ce;try{Fe()}catch(Ye){ns(S,Ee,Ye)}}}b=b.next}while(b!==L)}}catch(Ye){ns(u,u.return,Ye)}}function ET(o){var u=o.updateQueue;if(u!==null){var x=o.stateNode;try{y_(u,x)}catch(b){ns(o,o.return,b)}}}function AT(o,u,x){x.props=fo(o.type,o.memoizedProps),x.state=o.memoizedState;try{x.componentWillUnmount()}catch(b){ns(o,u,b)}}function qu(o,u){try{var x=o.ref;if(x!==null){switch(o.tag){case 26:case 27:case 5:var b=o.stateNode;break;case 30:b=o.stateNode;break;default:b=o.stateNode}typeof x=="function"?o.refCleanup=x(b):x.current=b}}catch(S){ns(o,u,S)}}function Sr(o,u){var x=o.ref,b=o.refCleanup;if(x!==null)if(typeof b=="function")try{b()}catch(S){ns(o,u,S)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof x=="function")try{x(null)}catch(S){ns(o,u,S)}else x.current=null}function LT(o){var u=o.type,x=o.memoizedProps,b=o.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":x.autoFocus&&b.focus();break e;case"img":x.src?b.src=x.src:x.srcSet&&(b.srcset=x.srcSet)}}catch(S){ns(o,o.return,S)}}function hv(o,u,x){try{var b=o.stateNode;d7(b,o.type,x,u),b[$a]=u}catch(S){ns(o,o.return,S)}}function kT(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&yl(o.type)||o.tag===4}function gv(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||kT(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&yl(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function xv(o,u,x){var b=o.tag;if(b===5||b===6)o=o.stateNode,u?(x.nodeType===9?x.body:x.nodeName==="HTML"?x.ownerDocument.body:x).insertBefore(o,u):(u=x.nodeType===9?x.body:x.nodeName==="HTML"?x.ownerDocument.body:x,u.appendChild(o),x=x._reactRootContainer,x!=null||u.onclick!==null||(u.onclick=si));else if(b!==4&&(b===27&&yl(o.type)&&(x=o.stateNode,u=null),o=o.child,o!==null))for(xv(o,u,x),o=o.sibling;o!==null;)xv(o,u,x),o=o.sibling}function Tg(o,u,x){var b=o.tag;if(b===5||b===6)o=o.stateNode,u?x.insertBefore(o,u):x.appendChild(o);else if(b!==4&&(b===27&&yl(o.type)&&(x=o.stateNode),o=o.child,o!==null))for(Tg(o,u,x),o=o.sibling;o!==null;)Tg(o,u,x),o=o.sibling}function DT(o){var u=o.stateNode,x=o.memoizedProps;try{for(var b=o.type,S=u.attributes;S.length;)u.removeAttributeNode(S[0]);ga(u,b,x),u[ua]=o,u[$a]=x}catch(L){ns(o,o.return,L)}}var mi=!1,Ws=!1,pv=!1,MT=typeof WeakSet=="function"?WeakSet:Set,la=null;function HR(o,u){if(o=o.containerInfo,Rv=Qg,o=VS(o),db(o)){if("selectionStart"in o)var x={start:o.selectionStart,end:o.selectionEnd};else e:{x=(x=o.ownerDocument)&&x.defaultView||window;var b=x.getSelection&&x.getSelection();if(b&&b.rangeCount!==0){x=b.anchorNode;var S=b.anchorOffset,L=b.focusNode;b=b.focusOffset;try{x.nodeType,L.nodeType}catch{x=null;break e}var Y=0,ce=-1,Ee=-1,Fe=0,Ye=0,Je=o,Be=null;t:for(;;){for(var Ve;Je!==x||S!==0&&Je.nodeType!==3||(ce=Y+S),Je!==L||b!==0&&Je.nodeType!==3||(Ee=Y+b),Je.nodeType===3&&(Y+=Je.nodeValue.length),(Ve=Je.firstChild)!==null;)Be=Je,Je=Ve;for(;;){if(Je===o)break t;if(Be===x&&++Fe===S&&(ce=Y),Be===L&&++Ye===b&&(Ee=Y),(Ve=Je.nextSibling)!==null)break;Je=Be,Be=Je.parentNode}Je=Ve}x=ce===-1||Ee===-1?null:{start:ce,end:Ee}}else x=null}x=x||{start:0,end:0}}else x=null;for(Uv={focusedElem:o,selectionRange:x},Qg=!1,la=u;la!==null;)if(u=la,o=u.child,(u.subtreeFlags&1028)!==0&&o!==null)o.return=u,la=o;else for(;la!==null;){switch(u=la,L=u.alternate,o=u.flags,u.tag){case 0:if((o&4)!==0&&(o=u.updateQueue,o=o!==null?o.events:null,o!==null))for(x=0;x<o.length;x++)S=o[x],S.ref.impl=S.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&L!==null){o=void 0,x=u,S=L.memoizedProps,L=L.memoizedState,b=x.stateNode;try{var ut=fo(x.type,S);o=b.getSnapshotBeforeUpdate(ut,L),b.__reactInternalSnapshotBeforeUpdate=o}catch(vt){ns(x,x.return,vt)}}break;case 3:if((o&1024)!==0){if(o=u.stateNode.containerInfo,x=o.nodeType,x===9)Bv(o);else if(x===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Bv(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(n(163))}if(o=u.sibling,o!==null){o.return=u.return,la=o;break}la=u.return}}function PT(o,u,x){var b=x.flags;switch(x.tag){case 0:case 11:case 15:hi(o,x),b&4&&Qu(5,x);break;case 1:if(hi(o,x),b&4)if(o=x.stateNode,u===null)try{o.componentDidMount()}catch(Y){ns(x,x.return,Y)}else{var S=fo(x.type,u.memoizedProps);u=u.memoizedState;try{o.componentDidUpdate(S,u,o.__reactInternalSnapshotBeforeUpdate)}catch(Y){ns(x,x.return,Y)}}b&64&&ET(x),b&512&&qu(x,x.return);break;case 3:if(hi(o,x),b&64&&(o=x.updateQueue,o!==null)){if(u=null,x.child!==null)switch(x.child.tag){case 27:case 5:u=x.child.stateNode;break;case 1:u=x.child.stateNode}try{y_(o,u)}catch(Y){ns(x,x.return,Y)}}break;case 27:u===null&&b&4&&DT(x);case 26:case 5:hi(o,x),u===null&&b&4&&LT(x),b&512&&qu(x,x.return);break;case 12:hi(o,x);break;case 31:hi(o,x),b&4&&$T(o,x);break;case 13:hi(o,x),b&4&&RT(o,x),b&64&&(o=x.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(x=ZR.bind(null,x),y7(o,x))));break;case 22:if(b=x.memoizedState!==null||mi,!b){u=u!==null&&u.memoizedState!==null||Ws,S=mi;var L=Ws;mi=b,(Ws=u)&&!L?gi(o,x,(x.subtreeFlags&8772)!==0):hi(o,x),mi=S,Ws=L}break;case 30:break;default:hi(o,x)}}function OT(o){var u=o.alternate;u!==null&&(o.alternate=null,OT(u)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(u=o.stateNode,u!==null&&Yy(u)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Ss=null,Ua=!1;function fi(o,u,x){for(x=x.child;x!==null;)IT(o,u,x),x=x.sibling}function IT(o,u,x){if(fe&&typeof fe.onCommitFiberUnmount=="function")try{fe.onCommitFiberUnmount(P,x)}catch{}switch(x.tag){case 26:Ws||Sr(x,u),fi(o,u,x),x.memoizedState?x.memoizedState.count--:x.stateNode&&(x=x.stateNode,x.parentNode.removeChild(x));break;case 27:Ws||Sr(x,u);var b=Ss,S=Ua;yl(x.type)&&(Ss=x.stateNode,Ua=!1),fi(o,u,x),nm(x.stateNode),Ss=b,Ua=S;break;case 5:Ws||Sr(x,u);case 6:if(b=Ss,S=Ua,Ss=null,fi(o,u,x),Ss=b,Ua=S,Ss!==null)if(Ua)try{(Ss.nodeType===9?Ss.body:Ss.nodeName==="HTML"?Ss.ownerDocument.body:Ss).removeChild(x.stateNode)}catch(L){ns(x,u,L)}else try{Ss.removeChild(x.stateNode)}catch(L){ns(x,u,L)}break;case 18:Ss!==null&&(Ua?(o=Ss,EE(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,x.stateNode),od(o)):EE(Ss,x.stateNode));break;case 4:b=Ss,S=Ua,Ss=x.stateNode.containerInfo,Ua=!0,fi(o,u,x),Ss=b,Ua=S;break;case 0:case 11:case 14:case 15:ul(2,x,u),Ws||ul(4,x,u),fi(o,u,x);break;case 1:Ws||(Sr(x,u),b=x.stateNode,typeof b.componentWillUnmount=="function"&&AT(x,u,b)),fi(o,u,x);break;case 21:fi(o,u,x);break;case 22:Ws=(b=Ws)||x.memoizedState!==null,fi(o,u,x),Ws=b;break;default:fi(o,u,x)}}function $T(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{od(o)}catch(x){ns(u,u.return,x)}}}function RT(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{od(o)}catch(x){ns(u,u.return,x)}}function GR(o){switch(o.tag){case 31:case 13:case 19:var u=o.stateNode;return u===null&&(u=o.stateNode=new MT),u;case 22:return o=o.stateNode,u=o._retryCache,u===null&&(u=o._retryCache=new MT),u;default:throw Error(n(435,o.tag))}}function Eg(o,u){var x=GR(o);u.forEach(function(b){if(!x.has(b)){x.add(b);var S=JR.bind(null,o,b);b.then(S,S)}})}function za(o,u){var x=u.deletions;if(x!==null)for(var b=0;b<x.length;b++){var S=x[b],L=o,Y=u,ce=Y;e:for(;ce!==null;){switch(ce.tag){case 27:if(yl(ce.type)){Ss=ce.stateNode,Ua=!1;break e}break;case 5:Ss=ce.stateNode,Ua=!1;break e;case 3:case 4:Ss=ce.stateNode.containerInfo,Ua=!0;break e}ce=ce.return}if(Ss===null)throw Error(n(160));IT(L,Y,S),Ss=null,Ua=!1,L=S.alternate,L!==null&&(L.return=null),S.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)UT(u,o),u=u.sibling}var lr=null;function UT(o,u){var x=o.alternate,b=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:za(u,o),Fa(o),b&4&&(ul(3,o,o.return),Qu(3,o),ul(5,o,o.return));break;case 1:za(u,o),Fa(o),b&512&&(Ws||x===null||Sr(x,x.return)),b&64&&mi&&(o=o.updateQueue,o!==null&&(b=o.callbacks,b!==null&&(x=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=x===null?b:x.concat(b))));break;case 26:var S=lr;if(za(u,o),Fa(o),b&512&&(Ws||x===null||Sr(x,x.return)),b&4){var L=x!==null?x.memoizedState:null;if(b=o.memoizedState,x===null)if(b===null)if(o.stateNode===null){e:{b=o.type,x=o.memoizedProps,S=S.ownerDocument||S;t:switch(b){case"title":L=S.getElementsByTagName("title")[0],(!L||L[wu]||L[ua]||L.namespaceURI==="http://www.w3.org/2000/svg"||L.hasAttribute("itemprop"))&&(L=S.createElement(b),S.head.insertBefore(L,S.querySelector("head > title"))),ga(L,b,x),L[ua]=o,ia(L),b=L;break e;case"link":var Y=UE("link","href",S).get(b+(x.href||""));if(Y){for(var ce=0;ce<Y.length;ce++)if(L=Y[ce],L.getAttribute("href")===(x.href==null||x.href===""?null:x.href)&&L.getAttribute("rel")===(x.rel==null?null:x.rel)&&L.getAttribute("title")===(x.title==null?null:x.title)&&L.getAttribute("crossorigin")===(x.crossOrigin==null?null:x.crossOrigin)){Y.splice(ce,1);break t}}L=S.createElement(b),ga(L,b,x),S.head.appendChild(L);break;case"meta":if(Y=UE("meta","content",S).get(b+(x.content||""))){for(ce=0;ce<Y.length;ce++)if(L=Y[ce],L.getAttribute("content")===(x.content==null?null:""+x.content)&&L.getAttribute("name")===(x.name==null?null:x.name)&&L.getAttribute("property")===(x.property==null?null:x.property)&&L.getAttribute("http-equiv")===(x.httpEquiv==null?null:x.httpEquiv)&&L.getAttribute("charset")===(x.charSet==null?null:x.charSet)){Y.splice(ce,1);break t}}L=S.createElement(b),ga(L,b,x),S.head.appendChild(L);break;default:throw Error(n(468,b))}L[ua]=o,ia(L),b=L}o.stateNode=b}else zE(S,o.type,o.stateNode);else o.stateNode=RE(S,b,o.memoizedProps);else L!==b?(L===null?x.stateNode!==null&&(x=x.stateNode,x.parentNode.removeChild(x)):L.count--,b===null?zE(S,o.type,o.stateNode):RE(S,b,o.memoizedProps)):b===null&&o.stateNode!==null&&hv(o,o.memoizedProps,x.memoizedProps)}break;case 27:za(u,o),Fa(o),b&512&&(Ws||x===null||Sr(x,x.return)),x!==null&&b&4&&hv(o,o.memoizedProps,x.memoizedProps);break;case 5:if(za(u,o),Fa(o),b&512&&(Ws||x===null||Sr(x,x.return)),o.flags&32){S=o.stateNode;try{kc(S,"")}catch(ut){ns(o,o.return,ut)}}b&4&&o.stateNode!=null&&(S=o.memoizedProps,hv(o,S,x!==null?x.memoizedProps:S)),b&1024&&(pv=!0);break;case 6:if(za(u,o),Fa(o),b&4){if(o.stateNode===null)throw Error(n(162));b=o.memoizedProps,x=o.stateNode;try{x.nodeValue=b}catch(ut){ns(o,o.return,ut)}}break;case 3:if(Gg=null,S=lr,lr=Bg(u.containerInfo),za(u,o),lr=S,Fa(o),b&4&&x!==null&&x.memoizedState.isDehydrated)try{od(u.containerInfo)}catch(ut){ns(o,o.return,ut)}pv&&(pv=!1,zT(o));break;case 4:b=lr,lr=Bg(o.stateNode.containerInfo),za(u,o),Fa(o),lr=b;break;case 12:za(u,o),Fa(o);break;case 31:za(u,o),Fa(o),b&4&&(b=o.updateQueue,b!==null&&(o.updateQueue=null,Eg(o,b)));break;case 13:za(u,o),Fa(o),o.child.flags&8192&&o.memoizedState!==null!=(x!==null&&x.memoizedState!==null)&&(Lg=z()),b&4&&(b=o.updateQueue,b!==null&&(o.updateQueue=null,Eg(o,b)));break;case 22:S=o.memoizedState!==null;var Ee=x!==null&&x.memoizedState!==null,Fe=mi,Ye=Ws;if(mi=Fe||S,Ws=Ye||Ee,za(u,o),Ws=Ye,mi=Fe,Fa(o),b&8192)e:for(u=o.stateNode,u._visibility=S?u._visibility&-2:u._visibility|1,S&&(x===null||Ee||mi||Ws||ho(o)),x=null,u=o;;){if(u.tag===5||u.tag===26){if(x===null){Ee=x=u;try{if(L=Ee.stateNode,S)Y=L.style,typeof Y.setProperty=="function"?Y.setProperty("display","none","important"):Y.display="none";else{ce=Ee.stateNode;var Je=Ee.memoizedProps.style,Be=Je!=null&&Je.hasOwnProperty("display")?Je.display:null;ce.style.display=Be==null||typeof Be=="boolean"?"":(""+Be).trim()}}catch(ut){ns(Ee,Ee.return,ut)}}}else if(u.tag===6){if(x===null){Ee=u;try{Ee.stateNode.nodeValue=S?"":Ee.memoizedProps}catch(ut){ns(Ee,Ee.return,ut)}}}else if(u.tag===18){if(x===null){Ee=u;try{var Ve=Ee.stateNode;S?AE(Ve,!0):AE(Ee.stateNode,!1)}catch(ut){ns(Ee,Ee.return,ut)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===o)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break e;for(;u.sibling===null;){if(u.return===null||u.return===o)break e;x===u&&(x=null),u=u.return}x===u&&(x=null),u.sibling.return=u.return,u=u.sibling}b&4&&(b=o.updateQueue,b!==null&&(x=b.retryQueue,x!==null&&(b.retryQueue=null,Eg(o,x))));break;case 19:za(u,o),Fa(o),b&4&&(b=o.updateQueue,b!==null&&(o.updateQueue=null,Eg(o,b)));break;case 30:break;case 21:break;default:za(u,o),Fa(o)}}function Fa(o){var u=o.flags;if(u&2){try{for(var x,b=o.return;b!==null;){if(kT(b)){x=b;break}b=b.return}if(x==null)throw Error(n(160));switch(x.tag){case 27:var S=x.stateNode,L=gv(o);Tg(o,L,S);break;case 5:var Y=x.stateNode;x.flags&32&&(kc(Y,""),x.flags&=-33);var ce=gv(o);Tg(o,ce,Y);break;case 3:case 4:var Ee=x.stateNode.containerInfo,Fe=gv(o);xv(o,Fe,Ee);break;default:throw Error(n(161))}}catch(Ye){ns(o,o.return,Ye)}o.flags&=-3}u&4096&&(o.flags&=-4097)}function zT(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var u=o;zT(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),o=o.sibling}}function hi(o,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)PT(o,u.alternate,u),u=u.sibling}function ho(o){for(o=o.child;o!==null;){var u=o;switch(u.tag){case 0:case 11:case 14:case 15:ul(4,u,u.return),ho(u);break;case 1:Sr(u,u.return);var x=u.stateNode;typeof x.componentWillUnmount=="function"&&AT(u,u.return,x),ho(u);break;case 27:nm(u.stateNode);case 26:case 5:Sr(u,u.return),ho(u);break;case 22:u.memoizedState===null&&ho(u);break;case 30:ho(u);break;default:ho(u)}o=o.sibling}}function gi(o,u,x){for(x=x&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var b=u.alternate,S=o,L=u,Y=L.flags;switch(L.tag){case 0:case 11:case 15:gi(S,L,x),Qu(4,L);break;case 1:if(gi(S,L,x),b=L,S=b.stateNode,typeof S.componentDidMount=="function")try{S.componentDidMount()}catch(Fe){ns(b,b.return,Fe)}if(b=L,S=b.updateQueue,S!==null){var ce=b.stateNode;try{var Ee=S.shared.hiddenCallbacks;if(Ee!==null)for(S.shared.hiddenCallbacks=null,S=0;S<Ee.length;S++)p_(Ee[S],ce)}catch(Fe){ns(b,b.return,Fe)}}x&&Y&64&&ET(L),qu(L,L.return);break;case 27:DT(L);case 26:case 5:gi(S,L,x),x&&b===null&&Y&4&&LT(L),qu(L,L.return);break;case 12:gi(S,L,x);break;case 31:gi(S,L,x),x&&Y&4&&$T(S,L);break;case 13:gi(S,L,x),x&&Y&4&&RT(S,L);break;case 22:L.memoizedState===null&&gi(S,L,x),qu(L,L.return);break;case 30:break;default:gi(S,L,x)}u=u.sibling}}function yv(o,u){var x=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(x=o.memoizedState.cachePool.pool),o=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(o=u.memoizedState.cachePool.pool),o!==x&&(o!=null&&o.refCount++,x!=null&&Ou(x))}function bv(o,u){o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&Ou(o))}function or(o,u,x,b){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)FT(o,u,x,b),u=u.sibling}function FT(o,u,x,b){var S=u.flags;switch(u.tag){case 0:case 11:case 15:or(o,u,x,b),S&2048&&Qu(9,u);break;case 1:or(o,u,x,b);break;case 3:or(o,u,x,b),S&2048&&(o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&Ou(o)));break;case 12:if(S&2048){or(o,u,x,b),o=u.stateNode;try{var L=u.memoizedProps,Y=L.id,ce=L.onPostCommit;typeof ce=="function"&&ce(Y,u.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(Ee){ns(u,u.return,Ee)}}else or(o,u,x,b);break;case 31:or(o,u,x,b);break;case 13:or(o,u,x,b);break;case 23:break;case 22:L=u.stateNode,Y=u.alternate,u.memoizedState!==null?L._visibility&2?or(o,u,x,b):Xu(o,u):L._visibility&2?or(o,u,x,b):(L._visibility|=2,Kc(o,u,x,b,(u.subtreeFlags&10256)!==0||!1)),S&2048&&yv(Y,u);break;case 24:or(o,u,x,b),S&2048&&bv(u.alternate,u);break;default:or(o,u,x,b)}}function Kc(o,u,x,b,S){for(S=S&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var L=o,Y=u,ce=x,Ee=b,Fe=Y.flags;switch(Y.tag){case 0:case 11:case 15:Kc(L,Y,ce,Ee,S),Qu(8,Y);break;case 23:break;case 22:var Ye=Y.stateNode;Y.memoizedState!==null?Ye._visibility&2?Kc(L,Y,ce,Ee,S):Xu(L,Y):(Ye._visibility|=2,Kc(L,Y,ce,Ee,S)),S&&Fe&2048&&yv(Y.alternate,Y);break;case 24:Kc(L,Y,ce,Ee,S),S&&Fe&2048&&bv(Y.alternate,Y);break;default:Kc(L,Y,ce,Ee,S)}u=u.sibling}}function Xu(o,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var x=o,b=u,S=b.flags;switch(b.tag){case 22:Xu(x,b),S&2048&&yv(b.alternate,b);break;case 24:Xu(x,b),S&2048&&bv(b.alternate,b);break;default:Xu(x,b)}u=u.sibling}}var Ku=8192;function Zc(o,u,x){if(o.subtreeFlags&Ku)for(o=o.child;o!==null;)BT(o,u,x),o=o.sibling}function BT(o,u,x){switch(o.tag){case 26:Zc(o,u,x),o.flags&Ku&&o.memoizedState!==null&&L7(x,lr,o.memoizedState,o.memoizedProps);break;case 5:Zc(o,u,x);break;case 3:case 4:var b=lr;lr=Bg(o.stateNode.containerInfo),Zc(o,u,x),lr=b;break;case 22:o.memoizedState===null&&(b=o.alternate,b!==null&&b.memoizedState!==null?(b=Ku,Ku=16777216,Zc(o,u,x),Ku=b):Zc(o,u,x));break;default:Zc(o,u,x)}}function HT(o){var u=o.alternate;if(u!==null&&(o=u.child,o!==null)){u.child=null;do u=o.sibling,o.sibling=null,o=u;while(o!==null)}}function Zu(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var x=0;x<u.length;x++){var b=u[x];la=b,VT(b,o)}HT(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)GT(o),o=o.sibling}function GT(o){switch(o.tag){case 0:case 11:case 15:Zu(o),o.flags&2048&&ul(9,o,o.return);break;case 3:Zu(o);break;case 12:Zu(o);break;case 22:var u=o.stateNode;o.memoizedState!==null&&u._visibility&2&&(o.return===null||o.return.tag!==13)?(u._visibility&=-3,Ag(o)):Zu(o);break;default:Zu(o)}}function Ag(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var x=0;x<u.length;x++){var b=u[x];la=b,VT(b,o)}HT(o)}for(o=o.child;o!==null;){switch(u=o,u.tag){case 0:case 11:case 15:ul(8,u,u.return),Ag(u);break;case 22:x=u.stateNode,x._visibility&2&&(x._visibility&=-3,Ag(u));break;default:Ag(u)}o=o.sibling}}function VT(o,u){for(;la!==null;){var x=la;switch(x.tag){case 0:case 11:case 15:ul(8,x,u);break;case 23:case 22:if(x.memoizedState!==null&&x.memoizedState.cachePool!==null){var b=x.memoizedState.cachePool.pool;b!=null&&b.refCount++}break;case 24:Ou(x.memoizedState.cache)}if(b=x.child,b!==null)b.return=x,la=b;else e:for(x=o;la!==null;){b=la;var S=b.sibling,L=b.return;if(OT(b),b===x){la=null;break e}if(S!==null){S.return=L,la=S;break e}la=L}}}var VR={getCacheForType:function(o){var u=fa(Hs),x=u.data.get(o);return x===void 0&&(x=o(),u.data.set(o,x)),x},cacheSignal:function(){return fa(Hs).controller.signal}},WR=typeof WeakMap=="function"?WeakMap:Map,Wt=0,gs=null,Dt=null,Pt=0,as=0,mn=null,ml=!1,Jc=!1,vv=!1,xi=0,Ds=0,fl=0,go=0,Nv=0,fn=0,ed=0,Ju=null,Ba=null,wv=!1,Lg=0,WT=0,kg=1/0,Dg=null,hl=null,Xs=0,gl=null,td=null,pi=0,jv=0,Cv=null,YT=null,em=0,Sv=null;function hn(){return(Wt&2)!==0&&Pt!==0?Pt&-Pt:R.T!==null?kv():cs()}function QT(){if(fn===0)if((Pt&536870912)===0||Rt){var o=Ut;Ut<<=1,(Ut&3932160)===0&&(Ut=262144),fn=o}else fn=536870912;return o=dn.current,o!==null&&(o.flags|=32),fn}function Ha(o,u,x){(o===gs&&(as===2||as===9)||o.cancelPendingCommit!==null)&&(sd(o,0),xl(o,Pt,fn,!1)),de(o,x),((Wt&2)===0||o!==gs)&&(o===gs&&((Wt&2)===0&&(go|=x),Ds===4&&xl(o,Pt,fn,!1)),_r(o))}function qT(o,u,x){if((Wt&6)!==0)throw Error(n(327));var b=!x&&(u&127)===0&&(u&o.expiredLanes)===0||ot(o,u),S=b?qR(o,u):Tv(o,u,!0),L=b;do{if(S===0){Jc&&!b&&xl(o,u,0,!1);break}else{if(x=o.current.alternate,L&&!YR(x)){S=Tv(o,u,!1),L=!1;continue}if(S===2){if(L=u,o.errorRecoveryDisabledLanes&L)var Y=0;else Y=o.pendingLanes&-536870913,Y=Y!==0?Y:Y&536870912?536870912:0;if(Y!==0){u=Y;e:{var ce=o;S=Ju;var Ee=ce.current.memoizedState.isDehydrated;if(Ee&&(sd(ce,Y).flags|=256),Y=Tv(ce,Y,!1),Y!==2){if(vv&&!Ee){ce.errorRecoveryDisabledLanes|=L,go|=L,S=4;break e}L=Ba,Ba=S,L!==null&&(Ba===null?Ba=L:Ba.push.apply(Ba,L))}S=Y}if(L=!1,S!==2)continue}}if(S===1){sd(o,0),xl(o,u,0,!0);break}e:{switch(b=o,L=S,L){case 0:case 1:throw Error(n(345));case 4:if((u&4194048)!==u)break;case 6:xl(b,u,fn,!ml);break e;case 2:Ba=null;break;case 3:case 5:break;default:throw Error(n(329))}if((u&62914560)===u&&(S=Lg+300-z(),10<S)){if(xl(b,u,fn,!ml),lt(b,0,!0)!==0)break e;pi=u,b.timeoutHandle=_E(XT.bind(null,b,x,Ba,Dg,wv,u,fn,go,ed,ml,L,"Throttled",-0,0),S);break e}XT(b,x,Ba,Dg,wv,u,fn,go,ed,ml,L,null,-0,0)}}break}while(!0);_r(o)}function XT(o,u,x,b,S,L,Y,ce,Ee,Fe,Ye,Je,Be,Ve){if(o.timeoutHandle=-1,Je=u.subtreeFlags,Je&8192||(Je&16785408)===16785408){Je={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:si},BT(u,L,Je);var ut=(L&62914560)===L?Lg-z():(L&4194048)===L?WT-z():0;if(ut=k7(Je,ut),ut!==null){pi=L,o.cancelPendingCommit=ut(nE.bind(null,o,u,L,x,b,S,Y,ce,Ee,Ye,Je,null,Be,Ve)),xl(o,L,Y,!Fe);return}}nE(o,u,L,x,b,S,Y,ce,Ee)}function YR(o){for(var u=o;;){var x=u.tag;if((x===0||x===11||x===15)&&u.flags&16384&&(x=u.updateQueue,x!==null&&(x=x.stores,x!==null)))for(var b=0;b<x.length;b++){var S=x[b],L=S.getSnapshot;S=S.value;try{if(!on(L(),S))return!1}catch{return!1}}if(x=u.child,u.subtreeFlags&16384&&x!==null)x.return=u,u=x;else{if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function xl(o,u,x,b){u&=~Nv,u&=~go,o.suspendedLanes|=u,o.pingedLanes&=~u,b&&(o.warmLanes|=u),b=o.expirationTimes;for(var S=u;0<S;){var L=31-Se(S),Y=1<<L;b[L]=-1,S&=~Y}x!==0&&Ae(o,x,u)}function Mg(){return(Wt&6)===0?(tm(0),!1):!0}function _v(){if(Dt!==null){if(as===0)var o=Dt.return;else o=Dt,ii=ro=null,Bb(o),Wc=null,$u=0,o=Dt;for(;o!==null;)TT(o.alternate,o),o=o.return;Dt=null}}function sd(o,u){var x=o.timeoutHandle;x!==-1&&(o.timeoutHandle=-1,f7(x)),x=o.cancelPendingCommit,x!==null&&(o.cancelPendingCommit=null,x()),pi=0,_v(),gs=o,Dt=x=ni(o.current,null),Pt=u,as=0,mn=null,ml=!1,Jc=ot(o,u),vv=!1,ed=fn=Nv=go=fl=Ds=0,Ba=Ju=null,wv=!1,(u&8)!==0&&(u|=u&32);var b=o.entangledLanes;if(b!==0)for(o=o.entanglements,b&=u;0<b;){var S=31-Se(b),L=1<<S;u|=o[S],b&=~L}return xi=u,eg(),x}function KT(o,u){_t=null,R.H=Vu,u===Vc||u===og?(u=f_(),as=3):u===Lb?(u=f_(),as=4):as=u===nv?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,mn=u,Dt===null&&(Ds=1,wg(o,An(u,o.current)))}function ZT(){var o=dn.current;return o===null?!0:(Pt&4194048)===Pt?Mn===null:(Pt&62914560)===Pt||(Pt&536870912)!==0?o===Mn:!1}function JT(){var o=R.H;return R.H=Vu,o===null?Vu:o}function eE(){var o=R.A;return R.A=VR,o}function Pg(){Ds=4,ml||(Pt&4194048)!==Pt&&dn.current!==null||(Jc=!0),(fl&134217727)===0&&(go&134217727)===0||gs===null||xl(gs,Pt,fn,!1)}function Tv(o,u,x){var b=Wt;Wt|=2;var S=JT(),L=eE();(gs!==o||Pt!==u)&&(Dg=null,sd(o,u)),u=!1;var Y=Ds;e:do try{if(as!==0&&Dt!==null){var ce=Dt,Ee=mn;switch(as){case 8:_v(),Y=6;break e;case 3:case 2:case 9:case 6:dn.current===null&&(u=!0);var Fe=as;if(as=0,mn=null,ad(o,ce,Ee,Fe),x&&Jc){Y=0;break e}break;default:Fe=as,as=0,mn=null,ad(o,ce,Ee,Fe)}}QR(),Y=Ds;break}catch(Ye){KT(o,Ye)}while(!0);return u&&o.shellSuspendCounter++,ii=ro=null,Wt=b,R.H=S,R.A=L,Dt===null&&(gs=null,Pt=0,eg()),Y}function QR(){for(;Dt!==null;)tE(Dt)}function qR(o,u){var x=Wt;Wt|=2;var b=JT(),S=eE();gs!==o||Pt!==u?(Dg=null,kg=z()+500,sd(o,u)):Jc=ot(o,u);e:do try{if(as!==0&&Dt!==null){u=Dt;var L=mn;t:switch(as){case 1:as=0,mn=null,ad(o,u,L,1);break;case 2:case 9:if(u_(L)){as=0,mn=null,sE(u);break}u=function(){as!==2&&as!==9||gs!==o||(as=7),_r(o)},L.then(u,u);break e;case 3:as=7;break e;case 4:as=5;break e;case 7:u_(L)?(as=0,mn=null,sE(u)):(as=0,mn=null,ad(o,u,L,7));break;case 5:var Y=null;switch(Dt.tag){case 26:Y=Dt.memoizedState;case 5:case 27:var ce=Dt;if(Y?FE(Y):ce.stateNode.complete){as=0,mn=null;var Ee=ce.sibling;if(Ee!==null)Dt=Ee;else{var Fe=ce.return;Fe!==null?(Dt=Fe,Og(Fe)):Dt=null}break t}}as=0,mn=null,ad(o,u,L,5);break;case 6:as=0,mn=null,ad(o,u,L,6);break;case 8:_v(),Ds=6;break e;default:throw Error(n(462))}}XR();break}catch(Ye){KT(o,Ye)}while(!0);return ii=ro=null,R.H=b,R.A=S,Wt=x,Dt!==null?0:(gs=null,Pt=0,eg(),Ds)}function XR(){for(;Dt!==null&&!V();)tE(Dt)}function tE(o){var u=ST(o.alternate,o,xi);o.memoizedProps=o.pendingProps,u===null?Og(o):Dt=u}function sE(o){var u=o,x=u.alternate;switch(u.tag){case 15:case 0:u=bT(x,u,u.pendingProps,u.type,void 0,Pt);break;case 11:u=bT(x,u,u.pendingProps,u.type.render,u.ref,Pt);break;case 5:Bb(u);default:TT(x,u),u=Dt=e_(u,xi),u=ST(x,u,xi)}o.memoizedProps=o.pendingProps,u===null?Og(o):Dt=u}function ad(o,u,x,b){ii=ro=null,Bb(u),Wc=null,$u=0;var S=u.return;try{if(RR(o,S,u,x,Pt)){Ds=1,wg(o,An(x,o.current)),Dt=null;return}}catch(L){if(S!==null)throw Dt=S,L;Ds=1,wg(o,An(x,o.current)),Dt=null;return}u.flags&32768?(Rt||b===1?o=!0:Jc||(Pt&536870912)!==0?o=!1:(ml=o=!0,(b===2||b===9||b===3||b===6)&&(b=dn.current,b!==null&&b.tag===13&&(b.flags|=16384))),aE(u,o)):Og(u)}function Og(o){var u=o;do{if((u.flags&32768)!==0){aE(u,ml);return}o=u.return;var x=FR(u.alternate,u,xi);if(x!==null){Dt=x;return}if(u=u.sibling,u!==null){Dt=u;return}Dt=u=o}while(u!==null);Ds===0&&(Ds=5)}function aE(o,u){do{var x=BR(o.alternate,o);if(x!==null){x.flags&=32767,Dt=x;return}if(x=o.return,x!==null&&(x.flags|=32768,x.subtreeFlags=0,x.deletions=null),!u&&(o=o.sibling,o!==null)){Dt=o;return}Dt=o=x}while(o!==null);Ds=6,Dt=null}function nE(o,u,x,b,S,L,Y,ce,Ee){o.cancelPendingCommit=null;do Ig();while(Xs!==0);if((Wt&6)!==0)throw Error(n(327));if(u!==null){if(u===o.current)throw Error(n(177));if(L=u.lanes|u.childLanes,L|=gb,_e(o,x,L,Y,ce,Ee),o===gs&&(Dt=gs=null,Pt=0),td=u,gl=o,pi=x,jv=L,Cv=S,YT=b,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,e7(xe,function(){return cE(),null})):(o.callbackNode=null,o.callbackPriority=0),b=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||b){b=R.T,R.T=null,S=Z.p,Z.p=2,Y=Wt,Wt|=4;try{HR(o,u,x)}finally{Wt=Y,Z.p=S,R.T=b}}Xs=1,rE(),iE(),lE()}}function rE(){if(Xs===1){Xs=0;var o=gl,u=td,x=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||x){x=R.T,R.T=null;var b=Z.p;Z.p=2;var S=Wt;Wt|=4;try{UT(u,o);var L=Uv,Y=VS(o.containerInfo),ce=L.focusedElem,Ee=L.selectionRange;if(Y!==ce&&ce&&ce.ownerDocument&&GS(ce.ownerDocument.documentElement,ce)){if(Ee!==null&&db(ce)){var Fe=Ee.start,Ye=Ee.end;if(Ye===void 0&&(Ye=Fe),"selectionStart"in ce)ce.selectionStart=Fe,ce.selectionEnd=Math.min(Ye,ce.value.length);else{var Je=ce.ownerDocument||document,Be=Je&&Je.defaultView||window;if(Be.getSelection){var Ve=Be.getSelection(),ut=ce.textContent.length,vt=Math.min(Ee.start,ut),ms=Ee.end===void 0?vt:Math.min(Ee.end,ut);!Ve.extend&&vt>ms&&(Y=ms,ms=vt,vt=Y);var Ie=HS(ce,vt),De=HS(ce,ms);if(Ie&&De&&(Ve.rangeCount!==1||Ve.anchorNode!==Ie.node||Ve.anchorOffset!==Ie.offset||Ve.focusNode!==De.node||Ve.focusOffset!==De.offset)){var Ue=Je.createRange();Ue.setStart(Ie.node,Ie.offset),Ve.removeAllRanges(),vt>ms?(Ve.addRange(Ue),Ve.extend(De.node,De.offset)):(Ue.setEnd(De.node,De.offset),Ve.addRange(Ue))}}}}for(Je=[],Ve=ce;Ve=Ve.parentNode;)Ve.nodeType===1&&Je.push({element:Ve,left:Ve.scrollLeft,top:Ve.scrollTop});for(typeof ce.focus=="function"&&ce.focus(),ce=0;ce<Je.length;ce++){var Xe=Je[ce];Xe.element.scrollLeft=Xe.left,Xe.element.scrollTop=Xe.top}}Qg=!!Rv,Uv=Rv=null}finally{Wt=S,Z.p=b,R.T=x}}o.current=u,Xs=2}}function iE(){if(Xs===2){Xs=0;var o=gl,u=td,x=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||x){x=R.T,R.T=null;var b=Z.p;Z.p=2;var S=Wt;Wt|=4;try{PT(o,u.alternate,u)}finally{Wt=S,Z.p=b,R.T=x}}Xs=3}}function lE(){if(Xs===4||Xs===3){Xs=0,pe();var o=gl,u=td,x=pi,b=YT;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Xs=5:(Xs=0,td=gl=null,oE(o,o.pendingLanes));var S=o.pendingLanes;if(S===0&&(hl=null),ss(x),u=u.stateNode,fe&&typeof fe.onCommitFiberRoot=="function")try{fe.onCommitFiberRoot(P,u,void 0,(u.current.flags&128)===128)}catch{}if(b!==null){u=R.T,S=Z.p,Z.p=2,R.T=null;try{for(var L=o.onRecoverableError,Y=0;Y<b.length;Y++){var ce=b[Y];L(ce.value,{componentStack:ce.stack})}}finally{R.T=u,Z.p=S}}(pi&3)!==0&&Ig(),_r(o),S=o.pendingLanes,(x&261930)!==0&&(S&42)!==0?o===Sv?em++:(em=0,Sv=o):em=0,tm(0)}}function oE(o,u){(o.pooledCacheLanes&=u)===0&&(u=o.pooledCache,u!=null&&(o.pooledCache=null,Ou(u)))}function Ig(){return rE(),iE(),lE(),cE()}function cE(){if(Xs!==5)return!1;var o=gl,u=jv;jv=0;var x=ss(pi),b=R.T,S=Z.p;try{Z.p=32>x?32:x,R.T=null,x=Cv,Cv=null;var L=gl,Y=pi;if(Xs=0,td=gl=null,pi=0,(Wt&6)!==0)throw Error(n(331));var ce=Wt;if(Wt|=4,GT(L.current),FT(L,L.current,Y,x),Wt=ce,tm(0,!1),fe&&typeof fe.onPostCommitFiberRoot=="function")try{fe.onPostCommitFiberRoot(P,L)}catch{}return!0}finally{Z.p=S,R.T=b,oE(o,u)}}function dE(o,u,x){u=An(x,u),u=av(o.stateNode,u,2),o=ol(o,u,2),o!==null&&(de(o,2),_r(o))}function ns(o,u,x){if(o.tag===3)dE(o,o,x);else for(;u!==null;){if(u.tag===3){dE(u,o,x);break}else if(u.tag===1){var b=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(hl===null||!hl.has(b))){o=An(x,o),x=uT(2),b=ol(u,x,2),b!==null&&(mT(x,b,u,o),de(b,2),_r(b));break}}u=u.return}}function Ev(o,u,x){var b=o.pingCache;if(b===null){b=o.pingCache=new WR;var S=new Set;b.set(u,S)}else S=b.get(u),S===void 0&&(S=new Set,b.set(u,S));S.has(x)||(vv=!0,S.add(x),o=KR.bind(null,o,u,x),u.then(o,o))}function KR(o,u,x){var b=o.pingCache;b!==null&&b.delete(u),o.pingedLanes|=o.suspendedLanes&x,o.warmLanes&=~x,gs===o&&(Pt&x)===x&&(Ds===4||Ds===3&&(Pt&62914560)===Pt&&300>z()-Lg?(Wt&2)===0&&sd(o,0):Nv|=x,ed===Pt&&(ed=0)),_r(o)}function uE(o,u){u===0&&(u=Ne()),o=so(o,u),o!==null&&(de(o,u),_r(o))}function ZR(o){var u=o.memoizedState,x=0;u!==null&&(x=u.retryLane),uE(o,x)}function JR(o,u){var x=0;switch(o.tag){case 31:case 13:var b=o.stateNode,S=o.memoizedState;S!==null&&(x=S.retryLane);break;case 19:b=o.stateNode;break;case 22:b=o.stateNode._retryCache;break;default:throw Error(n(314))}b!==null&&b.delete(u),uE(o,x)}function e7(o,u){return Ze(o,u)}var $g=null,nd=null,Av=!1,Rg=!1,Lv=!1,pl=0;function _r(o){o!==nd&&o.next===null&&(nd===null?$g=nd=o:nd=nd.next=o),Rg=!0,Av||(Av=!0,s7())}function tm(o,u){if(!Lv&&Rg){Lv=!0;do for(var x=!1,b=$g;b!==null;){if(o!==0){var S=b.pendingLanes;if(S===0)var L=0;else{var Y=b.suspendedLanes,ce=b.pingedLanes;L=(1<<31-Se(42|o)+1)-1,L&=S&~(Y&~ce),L=L&201326741?L&201326741|1:L?L|2:0}L!==0&&(x=!0,gE(b,L))}else L=Pt,L=lt(b,b===gs?L:0,b.cancelPendingCommit!==null||b.timeoutHandle!==-1),(L&3)===0||ot(b,L)||(x=!0,gE(b,L));b=b.next}while(x);Lv=!1}}function t7(){mE()}function mE(){Rg=Av=!1;var o=0;pl!==0&&m7()&&(o=pl);for(var u=z(),x=null,b=$g;b!==null;){var S=b.next,L=fE(b,u);L===0?(b.next=null,x===null?$g=S:x.next=S,S===null&&(nd=x)):(x=b,(o!==0||(L&3)!==0)&&(Rg=!0)),b=S}Xs!==0&&Xs!==5||tm(o),pl!==0&&(pl=0)}function fE(o,u){for(var x=o.suspendedLanes,b=o.pingedLanes,S=o.expirationTimes,L=o.pendingLanes&-62914561;0<L;){var Y=31-Se(L),ce=1<<Y,Ee=S[Y];Ee===-1?((ce&x)===0||(ce&b)!==0)&&(S[Y]=I(ce,u)):Ee<=u&&(o.expiredLanes|=ce),L&=~ce}if(u=gs,x=Pt,x=lt(o,o===u?x:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),b=o.callbackNode,x===0||o===u&&(as===2||as===9)||o.cancelPendingCommit!==null)return b!==null&&b!==null&&we(b),o.callbackNode=null,o.callbackPriority=0;if((x&3)===0||ot(o,x)){if(u=x&-x,u===o.callbackPriority)return u;switch(b!==null&&we(b),ss(x)){case 2:case 8:x=M;break;case 32:x=xe;break;case 268435456:x=Te;break;default:x=xe}return b=hE.bind(null,o),x=Ze(x,b),o.callbackPriority=u,o.callbackNode=x,u}return b!==null&&b!==null&&we(b),o.callbackPriority=2,o.callbackNode=null,2}function hE(o,u){if(Xs!==0&&Xs!==5)return o.callbackNode=null,o.callbackPriority=0,null;var x=o.callbackNode;if(Ig()&&o.callbackNode!==x)return null;var b=Pt;return b=lt(o,o===gs?b:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),b===0?null:(qT(o,b,u),fE(o,z()),o.callbackNode!=null&&o.callbackNode===x?hE.bind(null,o):null)}function gE(o,u){if(Ig())return null;qT(o,u,!0)}function s7(){h7(function(){(Wt&6)!==0?Ze(ue,t7):mE()})}function kv(){if(pl===0){var o=Hc;o===0&&(o=wt,wt<<=1,(wt&261888)===0&&(wt=256)),pl=o}return pl}function xE(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Wh(""+o)}function pE(o,u){var x=u.ownerDocument.createElement("input");return x.name=u.name,x.value=u.value,o.id&&x.setAttribute("form",o.id),u.parentNode.insertBefore(x,u),o=new FormData(o),x.parentNode.removeChild(x),o}function a7(o,u,x,b,S){if(u==="submit"&&x&&x.stateNode===S){var L=xE((S[$a]||null).action),Y=b.submitter;Y&&(u=(u=Y[$a]||null)?xE(u.formAction):Y.getAttribute("formAction"),u!==null&&(L=u,Y=null));var ce=new Xh("action","action",null,b,S);o.push({event:ce,listeners:[{instance:null,listener:function(){if(b.defaultPrevented){if(pl!==0){var Ee=Y?pE(S,Y):new FormData(S);Kb(x,{pending:!0,data:Ee,method:S.method,action:L},null,Ee)}}else typeof L=="function"&&(ce.preventDefault(),Ee=Y?pE(S,Y):new FormData(S),Kb(x,{pending:!0,data:Ee,method:S.method,action:L},L,Ee))},currentTarget:S}]})}}for(var Dv=0;Dv<hb.length;Dv++){var Mv=hb[Dv],n7=Mv.toLowerCase(),r7=Mv[0].toUpperCase()+Mv.slice(1);ir(n7,"on"+r7)}ir(QS,"onAnimationEnd"),ir(qS,"onAnimationIteration"),ir(XS,"onAnimationStart"),ir("dblclick","onDoubleClick"),ir("focusin","onFocus"),ir("focusout","onBlur"),ir(NR,"onTransitionRun"),ir(wR,"onTransitionStart"),ir(jR,"onTransitionCancel"),ir(KS,"onTransitionEnd"),Ac("onMouseEnter",["mouseout","mouseover"]),Ac("onMouseLeave",["mouseout","mouseover"]),Ac("onPointerEnter",["pointerout","pointerover"]),Ac("onPointerLeave",["pointerout","pointerover"]),Zl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Zl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Zl("onBeforeInput",["compositionend","keypress","textInput","paste"]),Zl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Zl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Zl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),i7=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(sm));function yE(o,u){u=(u&4)!==0;for(var x=0;x<o.length;x++){var b=o[x],S=b.event;b=b.listeners;e:{var L=void 0;if(u)for(var Y=b.length-1;0<=Y;Y--){var ce=b[Y],Ee=ce.instance,Fe=ce.currentTarget;if(ce=ce.listener,Ee!==L&&S.isPropagationStopped())break e;L=ce,S.currentTarget=Fe;try{L(S)}catch(Ye){Jh(Ye)}S.currentTarget=null,L=Ee}else for(Y=0;Y<b.length;Y++){if(ce=b[Y],Ee=ce.instance,Fe=ce.currentTarget,ce=ce.listener,Ee!==L&&S.isPropagationStopped())break e;L=ce,S.currentTarget=Fe;try{L(S)}catch(Ye){Jh(Ye)}S.currentTarget=null,L=Ee}}}}function Mt(o,u){var x=u[Wy];x===void 0&&(x=u[Wy]=new Set);var b=o+"__bubble";x.has(b)||(bE(u,o,2,!1),x.add(b))}function Pv(o,u,x){var b=0;u&&(b|=4),bE(x,o,b,u)}var Ug="_reactListening"+Math.random().toString(36).slice(2);function Ov(o){if(!o[Ug]){o[Ug]=!0,mS.forEach(function(x){x!=="selectionchange"&&(i7.has(x)||Pv(x,!1,o),Pv(x,!0,o))});var u=o.nodeType===9?o:o.ownerDocument;u===null||u[Ug]||(u[Ug]=!0,Pv("selectionchange",!1,u))}}function bE(o,u,x,b){switch(QE(u)){case 2:var S=P7;break;case 8:S=O7;break;default:S=Xv}x=S.bind(null,u,x,o),S=void 0,!tb||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(S=!0),b?S!==void 0?o.addEventListener(u,x,{capture:!0,passive:S}):o.addEventListener(u,x,!0):S!==void 0?o.addEventListener(u,x,{passive:S}):o.addEventListener(u,x,!1)}function Iv(o,u,x,b,S){var L=b;if((u&1)===0&&(u&2)===0&&b!==null)e:for(;;){if(b===null)return;var Y=b.tag;if(Y===3||Y===4){var ce=b.stateNode.containerInfo;if(ce===S)break;if(Y===4)for(Y=b.return;Y!==null;){var Ee=Y.tag;if((Ee===3||Ee===4)&&Y.stateNode.containerInfo===S)return;Y=Y.return}for(;ce!==null;){if(Y=_c(ce),Y===null)return;if(Ee=Y.tag,Ee===5||Ee===6||Ee===26||Ee===27){b=L=Y;continue e}ce=ce.parentNode}}b=b.return}CS(function(){var Fe=L,Ye=Jy(x),Je=[];e:{var Be=ZS.get(o);if(Be!==void 0){var Ve=Xh,ut=o;switch(o){case"keypress":if(Qh(x)===0)break e;case"keydown":case"keyup":Ve=J6;break;case"focusin":ut="focus",Ve=rb;break;case"focusout":ut="blur",Ve=rb;break;case"beforeblur":case"afterblur":Ve=rb;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ve=TS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ve=F6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ve=sR;break;case QS:case qS:case XS:Ve=G6;break;case KS:Ve=nR;break;case"scroll":case"scrollend":Ve=U6;break;case"wheel":Ve=iR;break;case"copy":case"cut":case"paste":Ve=W6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ve=AS;break;case"toggle":case"beforetoggle":Ve=oR}var vt=(u&4)!==0,ms=!vt&&(o==="scroll"||o==="scrollend"),Ie=vt?Be!==null?Be+"Capture":null:Be;vt=[];for(var De=Fe,Ue;De!==null;){var Xe=De;if(Ue=Xe.stateNode,Xe=Xe.tag,Xe!==5&&Xe!==26&&Xe!==27||Ue===null||Ie===null||(Xe=Cu(De,Ie),Xe!=null&&vt.push(am(De,Xe,Ue))),ms)break;De=De.return}0<vt.length&&(Be=new Ve(Be,ut,null,x,Ye),Je.push({event:Be,listeners:vt}))}}if((u&7)===0){e:{if(Be=o==="mouseover"||o==="pointerover",Ve=o==="mouseout"||o==="pointerout",Be&&x!==Zy&&(ut=x.relatedTarget||x.fromElement)&&(_c(ut)||ut[Sc]))break e;if((Ve||Be)&&(Be=Ye.window===Ye?Ye:(Be=Ye.ownerDocument)?Be.defaultView||Be.parentWindow:window,Ve?(ut=x.relatedTarget||x.toElement,Ve=Fe,ut=ut?_c(ut):null,ut!==null&&(ms=i(ut),vt=ut.tag,ut!==ms||vt!==5&&vt!==27&&vt!==6)&&(ut=null)):(Ve=null,ut=Fe),Ve!==ut)){if(vt=TS,Xe="onMouseLeave",Ie="onMouseEnter",De="mouse",(o==="pointerout"||o==="pointerover")&&(vt=AS,Xe="onPointerLeave",Ie="onPointerEnter",De="pointer"),ms=Ve==null?Be:ju(Ve),Ue=ut==null?Be:ju(ut),Be=new vt(Xe,De+"leave",Ve,x,Ye),Be.target=ms,Be.relatedTarget=Ue,Xe=null,_c(Ye)===Fe&&(vt=new vt(Ie,De+"enter",ut,x,Ye),vt.target=Ue,vt.relatedTarget=ms,Xe=vt),ms=Xe,Ve&&ut)t:{for(vt=l7,Ie=Ve,De=ut,Ue=0,Xe=Ie;Xe;Xe=vt(Xe))Ue++;Xe=0;for(var pt=De;pt;pt=vt(pt))Xe++;for(;0<Ue-Xe;)Ie=vt(Ie),Ue--;for(;0<Xe-Ue;)De=vt(De),Xe--;for(;Ue--;){if(Ie===De||De!==null&&Ie===De.alternate){vt=Ie;break t}Ie=vt(Ie),De=vt(De)}vt=null}else vt=null;Ve!==null&&vE(Je,Be,Ve,vt,!1),ut!==null&&ms!==null&&vE(Je,ms,ut,vt,!0)}}e:{if(Be=Fe?ju(Fe):window,Ve=Be.nodeName&&Be.nodeName.toLowerCase(),Ve==="select"||Ve==="input"&&Be.type==="file")var Ht=$S;else if(OS(Be))if(RS)Ht=yR;else{Ht=xR;var ht=gR}else Ve=Be.nodeName,!Ve||Ve.toLowerCase()!=="input"||Be.type!=="checkbox"&&Be.type!=="radio"?Fe&&Ky(Fe.elementType)&&(Ht=$S):Ht=pR;if(Ht&&(Ht=Ht(o,Fe))){IS(Je,Ht,x,Ye);break e}ht&&ht(o,Be,Fe),o==="focusout"&&Fe&&Be.type==="number"&&Fe.memoizedProps.value!=null&&Xy(Be,"number",Be.value)}switch(ht=Fe?ju(Fe):window,o){case"focusin":(OS(ht)||ht.contentEditable==="true")&&(Oc=ht,ub=Fe,Du=null);break;case"focusout":Du=ub=Oc=null;break;case"mousedown":mb=!0;break;case"contextmenu":case"mouseup":case"dragend":mb=!1,WS(Je,x,Ye);break;case"selectionchange":if(vR)break;case"keydown":case"keyup":WS(Je,x,Ye)}var Et;if(lb)e:{switch(o){case"compositionstart":var Ot="onCompositionStart";break e;case"compositionend":Ot="onCompositionEnd";break e;case"compositionupdate":Ot="onCompositionUpdate";break e}Ot=void 0}else Pc?MS(o,x)&&(Ot="onCompositionEnd"):o==="keydown"&&x.keyCode===229&&(Ot="onCompositionStart");Ot&&(LS&&x.locale!=="ko"&&(Pc||Ot!=="onCompositionStart"?Ot==="onCompositionEnd"&&Pc&&(Et=SS()):(tl=Ye,sb="value"in tl?tl.value:tl.textContent,Pc=!0)),ht=zg(Fe,Ot),0<ht.length&&(Ot=new ES(Ot,o,null,x,Ye),Je.push({event:Ot,listeners:ht}),Et?Ot.data=Et:(Et=PS(x),Et!==null&&(Ot.data=Et)))),(Et=dR?uR(o,x):mR(o,x))&&(Ot=zg(Fe,"onBeforeInput"),0<Ot.length&&(ht=new ES("onBeforeInput","beforeinput",null,x,Ye),Je.push({event:ht,listeners:Ot}),ht.data=Et)),a7(Je,o,Fe,x,Ye)}yE(Je,u)})}function am(o,u,x){return{instance:o,listener:u,currentTarget:x}}function zg(o,u){for(var x=u+"Capture",b=[];o!==null;){var S=o,L=S.stateNode;if(S=S.tag,S!==5&&S!==26&&S!==27||L===null||(S=Cu(o,x),S!=null&&b.unshift(am(o,S,L)),S=Cu(o,u),S!=null&&b.push(am(o,S,L))),o.tag===3)return b;o=o.return}return[]}function l7(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function vE(o,u,x,b,S){for(var L=u._reactName,Y=[];x!==null&&x!==b;){var ce=x,Ee=ce.alternate,Fe=ce.stateNode;if(ce=ce.tag,Ee!==null&&Ee===b)break;ce!==5&&ce!==26&&ce!==27||Fe===null||(Ee=Fe,S?(Fe=Cu(x,L),Fe!=null&&Y.unshift(am(x,Fe,Ee))):S||(Fe=Cu(x,L),Fe!=null&&Y.push(am(x,Fe,Ee)))),x=x.return}Y.length!==0&&o.push({event:u,listeners:Y})}var o7=/\r\n?/g,c7=/\u0000|\uFFFD/g;function NE(o){return(typeof o=="string"?o:""+o).replace(o7,`
`).replace(c7,"")}function wE(o,u){return u=NE(u),NE(o)===u}function us(o,u,x,b,S,L){switch(x){case"children":typeof b=="string"?u==="body"||u==="textarea"&&b===""||kc(o,b):(typeof b=="number"||typeof b=="bigint")&&u!=="body"&&kc(o,""+b);break;case"className":Gh(o,"class",b);break;case"tabIndex":Gh(o,"tabindex",b);break;case"dir":case"role":case"viewBox":case"width":case"height":Gh(o,x,b);break;case"style":wS(o,b,L);break;case"data":if(u!=="object"){Gh(o,"data",b);break}case"src":case"href":if(b===""&&(u!=="a"||x!=="href")){o.removeAttribute(x);break}if(b==null||typeof b=="function"||typeof b=="symbol"||typeof b=="boolean"){o.removeAttribute(x);break}b=Wh(""+b),o.setAttribute(x,b);break;case"action":case"formAction":if(typeof b=="function"){o.setAttribute(x,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof L=="function"&&(x==="formAction"?(u!=="input"&&us(o,u,"name",S.name,S,null),us(o,u,"formEncType",S.formEncType,S,null),us(o,u,"formMethod",S.formMethod,S,null),us(o,u,"formTarget",S.formTarget,S,null)):(us(o,u,"encType",S.encType,S,null),us(o,u,"method",S.method,S,null),us(o,u,"target",S.target,S,null)));if(b==null||typeof b=="symbol"||typeof b=="boolean"){o.removeAttribute(x);break}b=Wh(""+b),o.setAttribute(x,b);break;case"onClick":b!=null&&(o.onclick=si);break;case"onScroll":b!=null&&Mt("scroll",o);break;case"onScrollEnd":b!=null&&Mt("scrollend",o);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(n(61));if(x=b.__html,x!=null){if(S.children!=null)throw Error(n(60));o.innerHTML=x}}break;case"multiple":o.multiple=b&&typeof b!="function"&&typeof b!="symbol";break;case"muted":o.muted=b&&typeof b!="function"&&typeof b!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(b==null||typeof b=="function"||typeof b=="boolean"||typeof b=="symbol"){o.removeAttribute("xlink:href");break}x=Wh(""+b),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",x);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":b!=null&&typeof b!="function"&&typeof b!="symbol"?o.setAttribute(x,""+b):o.removeAttribute(x);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":b&&typeof b!="function"&&typeof b!="symbol"?o.setAttribute(x,""):o.removeAttribute(x);break;case"capture":case"download":b===!0?o.setAttribute(x,""):b!==!1&&b!=null&&typeof b!="function"&&typeof b!="symbol"?o.setAttribute(x,b):o.removeAttribute(x);break;case"cols":case"rows":case"size":case"span":b!=null&&typeof b!="function"&&typeof b!="symbol"&&!isNaN(b)&&1<=b?o.setAttribute(x,b):o.removeAttribute(x);break;case"rowSpan":case"start":b==null||typeof b=="function"||typeof b=="symbol"||isNaN(b)?o.removeAttribute(x):o.setAttribute(x,b);break;case"popover":Mt("beforetoggle",o),Mt("toggle",o),Hh(o,"popover",b);break;case"xlinkActuate":ti(o,"http://www.w3.org/1999/xlink","xlink:actuate",b);break;case"xlinkArcrole":ti(o,"http://www.w3.org/1999/xlink","xlink:arcrole",b);break;case"xlinkRole":ti(o,"http://www.w3.org/1999/xlink","xlink:role",b);break;case"xlinkShow":ti(o,"http://www.w3.org/1999/xlink","xlink:show",b);break;case"xlinkTitle":ti(o,"http://www.w3.org/1999/xlink","xlink:title",b);break;case"xlinkType":ti(o,"http://www.w3.org/1999/xlink","xlink:type",b);break;case"xmlBase":ti(o,"http://www.w3.org/XML/1998/namespace","xml:base",b);break;case"xmlLang":ti(o,"http://www.w3.org/XML/1998/namespace","xml:lang",b);break;case"xmlSpace":ti(o,"http://www.w3.org/XML/1998/namespace","xml:space",b);break;case"is":Hh(o,"is",b);break;case"innerText":case"textContent":break;default:(!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(x=$6.get(x)||x,Hh(o,x,b))}}function $v(o,u,x,b,S,L){switch(x){case"style":wS(o,b,L);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(n(61));if(x=b.__html,x!=null){if(S.children!=null)throw Error(n(60));o.innerHTML=x}}break;case"children":typeof b=="string"?kc(o,b):(typeof b=="number"||typeof b=="bigint")&&kc(o,""+b);break;case"onScroll":b!=null&&Mt("scroll",o);break;case"onScrollEnd":b!=null&&Mt("scrollend",o);break;case"onClick":b!=null&&(o.onclick=si);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!fS.hasOwnProperty(x))e:{if(x[0]==="o"&&x[1]==="n"&&(S=x.endsWith("Capture"),u=x.slice(2,S?x.length-7:void 0),L=o[$a]||null,L=L!=null?L[x]:null,typeof L=="function"&&o.removeEventListener(u,L,S),typeof b=="function")){typeof L!="function"&&L!==null&&(x in o?o[x]=null:o.hasAttribute(x)&&o.removeAttribute(x)),o.addEventListener(u,b,S);break e}x in o?o[x]=b:b===!0?o.setAttribute(x,""):Hh(o,x,b)}}}function ga(o,u,x){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Mt("error",o),Mt("load",o);var b=!1,S=!1,L;for(L in x)if(x.hasOwnProperty(L)){var Y=x[L];if(Y!=null)switch(L){case"src":b=!0;break;case"srcSet":S=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:us(o,u,L,Y,x,null)}}S&&us(o,u,"srcSet",x.srcSet,x,null),b&&us(o,u,"src",x.src,x,null);return;case"input":Mt("invalid",o);var ce=L=Y=S=null,Ee=null,Fe=null;for(b in x)if(x.hasOwnProperty(b)){var Ye=x[b];if(Ye!=null)switch(b){case"name":S=Ye;break;case"type":Y=Ye;break;case"checked":Ee=Ye;break;case"defaultChecked":Fe=Ye;break;case"value":L=Ye;break;case"defaultValue":ce=Ye;break;case"children":case"dangerouslySetInnerHTML":if(Ye!=null)throw Error(n(137,u));break;default:us(o,u,b,Ye,x,null)}}yS(o,L,ce,Ee,Fe,Y,S,!1);return;case"select":Mt("invalid",o),b=Y=L=null;for(S in x)if(x.hasOwnProperty(S)&&(ce=x[S],ce!=null))switch(S){case"value":L=ce;break;case"defaultValue":Y=ce;break;case"multiple":b=ce;default:us(o,u,S,ce,x,null)}u=L,x=Y,o.multiple=!!b,u!=null?Lc(o,!!b,u,!1):x!=null&&Lc(o,!!b,x,!0);return;case"textarea":Mt("invalid",o),L=S=b=null;for(Y in x)if(x.hasOwnProperty(Y)&&(ce=x[Y],ce!=null))switch(Y){case"value":b=ce;break;case"defaultValue":S=ce;break;case"children":L=ce;break;case"dangerouslySetInnerHTML":if(ce!=null)throw Error(n(91));break;default:us(o,u,Y,ce,x,null)}vS(o,b,S,L);return;case"option":for(Ee in x)if(x.hasOwnProperty(Ee)&&(b=x[Ee],b!=null))switch(Ee){case"selected":o.selected=b&&typeof b!="function"&&typeof b!="symbol";break;default:us(o,u,Ee,b,x,null)}return;case"dialog":Mt("beforetoggle",o),Mt("toggle",o),Mt("cancel",o),Mt("close",o);break;case"iframe":case"object":Mt("load",o);break;case"video":case"audio":for(b=0;b<sm.length;b++)Mt(sm[b],o);break;case"image":Mt("error",o),Mt("load",o);break;case"details":Mt("toggle",o);break;case"embed":case"source":case"link":Mt("error",o),Mt("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Fe in x)if(x.hasOwnProperty(Fe)&&(b=x[Fe],b!=null))switch(Fe){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:us(o,u,Fe,b,x,null)}return;default:if(Ky(u)){for(Ye in x)x.hasOwnProperty(Ye)&&(b=x[Ye],b!==void 0&&$v(o,u,Ye,b,x,void 0));return}}for(ce in x)x.hasOwnProperty(ce)&&(b=x[ce],b!=null&&us(o,u,ce,b,x,null))}function d7(o,u,x,b){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var S=null,L=null,Y=null,ce=null,Ee=null,Fe=null,Ye=null;for(Ve in x){var Je=x[Ve];if(x.hasOwnProperty(Ve)&&Je!=null)switch(Ve){case"checked":break;case"value":break;case"defaultValue":Ee=Je;default:b.hasOwnProperty(Ve)||us(o,u,Ve,null,b,Je)}}for(var Be in b){var Ve=b[Be];if(Je=x[Be],b.hasOwnProperty(Be)&&(Ve!=null||Je!=null))switch(Be){case"type":L=Ve;break;case"name":S=Ve;break;case"checked":Fe=Ve;break;case"defaultChecked":Ye=Ve;break;case"value":Y=Ve;break;case"defaultValue":ce=Ve;break;case"children":case"dangerouslySetInnerHTML":if(Ve!=null)throw Error(n(137,u));break;default:Ve!==Je&&us(o,u,Be,Ve,b,Je)}}qy(o,Y,ce,Ee,Fe,Ye,L,S);return;case"select":Ve=Y=ce=Be=null;for(L in x)if(Ee=x[L],x.hasOwnProperty(L)&&Ee!=null)switch(L){case"value":break;case"multiple":Ve=Ee;default:b.hasOwnProperty(L)||us(o,u,L,null,b,Ee)}for(S in b)if(L=b[S],Ee=x[S],b.hasOwnProperty(S)&&(L!=null||Ee!=null))switch(S){case"value":Be=L;break;case"defaultValue":ce=L;break;case"multiple":Y=L;default:L!==Ee&&us(o,u,S,L,b,Ee)}u=ce,x=Y,b=Ve,Be!=null?Lc(o,!!x,Be,!1):!!b!=!!x&&(u!=null?Lc(o,!!x,u,!0):Lc(o,!!x,x?[]:"",!1));return;case"textarea":Ve=Be=null;for(ce in x)if(S=x[ce],x.hasOwnProperty(ce)&&S!=null&&!b.hasOwnProperty(ce))switch(ce){case"value":break;case"children":break;default:us(o,u,ce,null,b,S)}for(Y in b)if(S=b[Y],L=x[Y],b.hasOwnProperty(Y)&&(S!=null||L!=null))switch(Y){case"value":Be=S;break;case"defaultValue":Ve=S;break;case"children":break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(n(91));break;default:S!==L&&us(o,u,Y,S,b,L)}bS(o,Be,Ve);return;case"option":for(var ut in x)if(Be=x[ut],x.hasOwnProperty(ut)&&Be!=null&&!b.hasOwnProperty(ut))switch(ut){case"selected":o.selected=!1;break;default:us(o,u,ut,null,b,Be)}for(Ee in b)if(Be=b[Ee],Ve=x[Ee],b.hasOwnProperty(Ee)&&Be!==Ve&&(Be!=null||Ve!=null))switch(Ee){case"selected":o.selected=Be&&typeof Be!="function"&&typeof Be!="symbol";break;default:us(o,u,Ee,Be,b,Ve)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var vt in x)Be=x[vt],x.hasOwnProperty(vt)&&Be!=null&&!b.hasOwnProperty(vt)&&us(o,u,vt,null,b,Be);for(Fe in b)if(Be=b[Fe],Ve=x[Fe],b.hasOwnProperty(Fe)&&Be!==Ve&&(Be!=null||Ve!=null))switch(Fe){case"children":case"dangerouslySetInnerHTML":if(Be!=null)throw Error(n(137,u));break;default:us(o,u,Fe,Be,b,Ve)}return;default:if(Ky(u)){for(var ms in x)Be=x[ms],x.hasOwnProperty(ms)&&Be!==void 0&&!b.hasOwnProperty(ms)&&$v(o,u,ms,void 0,b,Be);for(Ye in b)Be=b[Ye],Ve=x[Ye],!b.hasOwnProperty(Ye)||Be===Ve||Be===void 0&&Ve===void 0||$v(o,u,Ye,Be,b,Ve);return}}for(var Ie in x)Be=x[Ie],x.hasOwnProperty(Ie)&&Be!=null&&!b.hasOwnProperty(Ie)&&us(o,u,Ie,null,b,Be);for(Je in b)Be=b[Je],Ve=x[Je],!b.hasOwnProperty(Je)||Be===Ve||Be==null&&Ve==null||us(o,u,Je,Be,b,Ve)}function jE(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function u7(){if(typeof performance.getEntriesByType=="function"){for(var o=0,u=0,x=performance.getEntriesByType("resource"),b=0;b<x.length;b++){var S=x[b],L=S.transferSize,Y=S.initiatorType,ce=S.duration;if(L&&ce&&jE(Y)){for(Y=0,ce=S.responseEnd,b+=1;b<x.length;b++){var Ee=x[b],Fe=Ee.startTime;if(Fe>ce)break;var Ye=Ee.transferSize,Je=Ee.initiatorType;Ye&&jE(Je)&&(Ee=Ee.responseEnd,Y+=Ye*(Ee<ce?1:(ce-Fe)/(Ee-Fe)))}if(--b,u+=8*(L+Y)/(S.duration/1e3),o++,10<o)break}}if(0<o)return u/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var Rv=null,Uv=null;function Fg(o){return o.nodeType===9?o:o.ownerDocument}function CE(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function SE(o,u){if(o===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&u==="foreignObject"?0:o}function zv(o,u){return o==="textarea"||o==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var Fv=null;function m7(){var o=window.event;return o&&o.type==="popstate"?o===Fv?!1:(Fv=o,!0):(Fv=null,!1)}var _E=typeof setTimeout=="function"?setTimeout:void 0,f7=typeof clearTimeout=="function"?clearTimeout:void 0,TE=typeof Promise=="function"?Promise:void 0,h7=typeof queueMicrotask=="function"?queueMicrotask:typeof TE<"u"?function(o){return TE.resolve(null).then(o).catch(g7)}:_E;function g7(o){setTimeout(function(){throw o})}function yl(o){return o==="head"}function EE(o,u){var x=u,b=0;do{var S=x.nextSibling;if(o.removeChild(x),S&&S.nodeType===8)if(x=S.data,x==="/$"||x==="/&"){if(b===0){o.removeChild(S),od(u);return}b--}else if(x==="$"||x==="$?"||x==="$~"||x==="$!"||x==="&")b++;else if(x==="html")nm(o.ownerDocument.documentElement);else if(x==="head"){x=o.ownerDocument.head,nm(x);for(var L=x.firstChild;L;){var Y=L.nextSibling,ce=L.nodeName;L[wu]||ce==="SCRIPT"||ce==="STYLE"||ce==="LINK"&&L.rel.toLowerCase()==="stylesheet"||x.removeChild(L),L=Y}}else x==="body"&&nm(o.ownerDocument.body);x=S}while(x);od(u)}function AE(o,u){var x=o;o=0;do{var b=x.nextSibling;if(x.nodeType===1?u?(x._stashedDisplay=x.style.display,x.style.display="none"):(x.style.display=x._stashedDisplay||"",x.getAttribute("style")===""&&x.removeAttribute("style")):x.nodeType===3&&(u?(x._stashedText=x.nodeValue,x.nodeValue=""):x.nodeValue=x._stashedText||""),b&&b.nodeType===8)if(x=b.data,x==="/$"){if(o===0)break;o--}else x!=="$"&&x!=="$?"&&x!=="$~"&&x!=="$!"||o++;x=b}while(x)}function Bv(o){var u=o.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var x=u;switch(u=u.nextSibling,x.nodeName){case"HTML":case"HEAD":case"BODY":Bv(x),Yy(x);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(x.rel.toLowerCase()==="stylesheet")continue}o.removeChild(x)}}function x7(o,u,x,b){for(;o.nodeType===1;){var S=x;if(o.nodeName.toLowerCase()!==u.toLowerCase()){if(!b&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(b){if(!o[wu])switch(u){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(L=o.getAttribute("rel"),L==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(L!==S.rel||o.getAttribute("href")!==(S.href==null||S.href===""?null:S.href)||o.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin)||o.getAttribute("title")!==(S.title==null?null:S.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(L=o.getAttribute("src"),(L!==(S.src==null?null:S.src)||o.getAttribute("type")!==(S.type==null?null:S.type)||o.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin))&&L&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(u==="input"&&o.type==="hidden"){var L=S.name==null?null:""+S.name;if(S.type==="hidden"&&o.getAttribute("name")===L)return o}else return o;if(o=Pn(o.nextSibling),o===null)break}return null}function p7(o,u,x){if(u==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!x||(o=Pn(o.nextSibling),o===null))return null;return o}function LE(o,u){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!u||(o=Pn(o.nextSibling),o===null))return null;return o}function Hv(o){return o.data==="$?"||o.data==="$~"}function Gv(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function y7(o,u){var x=o.ownerDocument;if(o.data==="$~")o._reactRetry=u;else if(o.data!=="$?"||x.readyState!=="loading")u();else{var b=function(){u(),x.removeEventListener("DOMContentLoaded",b)};x.addEventListener("DOMContentLoaded",b),o._reactRetry=b}}function Pn(o){for(;o!=null;o=o.nextSibling){var u=o.nodeType;if(u===1||u===3)break;if(u===8){if(u=o.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return o}var Vv=null;function kE(o){o=o.nextSibling;for(var u=0;o;){if(o.nodeType===8){var x=o.data;if(x==="/$"||x==="/&"){if(u===0)return Pn(o.nextSibling);u--}else x!=="$"&&x!=="$!"&&x!=="$?"&&x!=="$~"&&x!=="&"||u++}o=o.nextSibling}return null}function DE(o){o=o.previousSibling;for(var u=0;o;){if(o.nodeType===8){var x=o.data;if(x==="$"||x==="$!"||x==="$?"||x==="$~"||x==="&"){if(u===0)return o;u--}else x!=="/$"&&x!=="/&"||u++}o=o.previousSibling}return null}function ME(o,u,x){switch(u=Fg(x),o){case"html":if(o=u.documentElement,!o)throw Error(n(452));return o;case"head":if(o=u.head,!o)throw Error(n(453));return o;case"body":if(o=u.body,!o)throw Error(n(454));return o;default:throw Error(n(451))}}function nm(o){for(var u=o.attributes;u.length;)o.removeAttributeNode(u[0]);Yy(o)}var On=new Map,PE=new Set;function Bg(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var yi=Z.d;Z.d={f:b7,r:v7,D:N7,C:w7,L:j7,m:C7,X:_7,S:S7,M:T7};function b7(){var o=yi.f(),u=Mg();return o||u}function v7(o){var u=Tc(o);u!==null&&u.tag===5&&u.type==="form"?K_(u):yi.r(o)}var rd=typeof document>"u"?null:document;function OE(o,u,x){var b=rd;if(b&&typeof u=="string"&&u){var S=Tn(u);S='link[rel="'+o+'"][href="'+S+'"]',typeof x=="string"&&(S+='[crossorigin="'+x+'"]'),PE.has(S)||(PE.add(S),o={rel:o,crossOrigin:x,href:u},b.querySelector(S)===null&&(u=b.createElement("link"),ga(u,"link",o),ia(u),b.head.appendChild(u)))}}function N7(o){yi.D(o),OE("dns-prefetch",o,null)}function w7(o,u){yi.C(o,u),OE("preconnect",o,u)}function j7(o,u,x){yi.L(o,u,x);var b=rd;if(b&&o&&u){var S='link[rel="preload"][as="'+Tn(u)+'"]';u==="image"&&x&&x.imageSrcSet?(S+='[imagesrcset="'+Tn(x.imageSrcSet)+'"]',typeof x.imageSizes=="string"&&(S+='[imagesizes="'+Tn(x.imageSizes)+'"]')):S+='[href="'+Tn(o)+'"]';var L=S;switch(u){case"style":L=id(o);break;case"script":L=ld(o)}On.has(L)||(o=h({rel:"preload",href:u==="image"&&x&&x.imageSrcSet?void 0:o,as:u},x),On.set(L,o),b.querySelector(S)!==null||u==="style"&&b.querySelector(rm(L))||u==="script"&&b.querySelector(im(L))||(u=b.createElement("link"),ga(u,"link",o),ia(u),b.head.appendChild(u)))}}function C7(o,u){yi.m(o,u);var x=rd;if(x&&o){var b=u&&typeof u.as=="string"?u.as:"script",S='link[rel="modulepreload"][as="'+Tn(b)+'"][href="'+Tn(o)+'"]',L=S;switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":L=ld(o)}if(!On.has(L)&&(o=h({rel:"modulepreload",href:o},u),On.set(L,o),x.querySelector(S)===null)){switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(x.querySelector(im(L)))return}b=x.createElement("link"),ga(b,"link",o),ia(b),x.head.appendChild(b)}}}function S7(o,u,x){yi.S(o,u,x);var b=rd;if(b&&o){var S=Ec(b).hoistableStyles,L=id(o);u=u||"default";var Y=S.get(L);if(!Y){var ce={loading:0,preload:null};if(Y=b.querySelector(rm(L)))ce.loading=5;else{o=h({rel:"stylesheet",href:o,"data-precedence":u},x),(x=On.get(L))&&Wv(o,x);var Ee=Y=b.createElement("link");ia(Ee),ga(Ee,"link",o),Ee._p=new Promise(function(Fe,Ye){Ee.onload=Fe,Ee.onerror=Ye}),Ee.addEventListener("load",function(){ce.loading|=1}),Ee.addEventListener("error",function(){ce.loading|=2}),ce.loading|=4,Hg(Y,u,b)}Y={type:"stylesheet",instance:Y,count:1,state:ce},S.set(L,Y)}}}function _7(o,u){yi.X(o,u);var x=rd;if(x&&o){var b=Ec(x).hoistableScripts,S=ld(o),L=b.get(S);L||(L=x.querySelector(im(S)),L||(o=h({src:o,async:!0},u),(u=On.get(S))&&Yv(o,u),L=x.createElement("script"),ia(L),ga(L,"link",o),x.head.appendChild(L)),L={type:"script",instance:L,count:1,state:null},b.set(S,L))}}function T7(o,u){yi.M(o,u);var x=rd;if(x&&o){var b=Ec(x).hoistableScripts,S=ld(o),L=b.get(S);L||(L=x.querySelector(im(S)),L||(o=h({src:o,async:!0,type:"module"},u),(u=On.get(S))&&Yv(o,u),L=x.createElement("script"),ia(L),ga(L,"link",o),x.head.appendChild(L)),L={type:"script",instance:L,count:1,state:null},b.set(S,L))}}function IE(o,u,x,b){var S=(S=Le.current)?Bg(S):null;if(!S)throw Error(n(446));switch(o){case"meta":case"title":return null;case"style":return typeof x.precedence=="string"&&typeof x.href=="string"?(u=id(x.href),x=Ec(S).hoistableStyles,b=x.get(u),b||(b={type:"style",instance:null,count:0,state:null},x.set(u,b)),b):{type:"void",instance:null,count:0,state:null};case"link":if(x.rel==="stylesheet"&&typeof x.href=="string"&&typeof x.precedence=="string"){o=id(x.href);var L=Ec(S).hoistableStyles,Y=L.get(o);if(Y||(S=S.ownerDocument||S,Y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},L.set(o,Y),(L=S.querySelector(rm(o)))&&!L._p&&(Y.instance=L,Y.state.loading=5),On.has(o)||(x={rel:"preload",as:"style",href:x.href,crossOrigin:x.crossOrigin,integrity:x.integrity,media:x.media,hrefLang:x.hrefLang,referrerPolicy:x.referrerPolicy},On.set(o,x),L||E7(S,o,x,Y.state))),u&&b===null)throw Error(n(528,""));return Y}if(u&&b!==null)throw Error(n(529,""));return null;case"script":return u=x.async,x=x.src,typeof x=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=ld(x),x=Ec(S).hoistableScripts,b=x.get(u),b||(b={type:"script",instance:null,count:0,state:null},x.set(u,b)),b):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,o))}}function id(o){return'href="'+Tn(o)+'"'}function rm(o){return'link[rel="stylesheet"]['+o+"]"}function $E(o){return h({},o,{"data-precedence":o.precedence,precedence:null})}function E7(o,u,x,b){o.querySelector('link[rel="preload"][as="style"]['+u+"]")?b.loading=1:(u=o.createElement("link"),b.preload=u,u.addEventListener("load",function(){return b.loading|=1}),u.addEventListener("error",function(){return b.loading|=2}),ga(u,"link",x),ia(u),o.head.appendChild(u))}function ld(o){return'[src="'+Tn(o)+'"]'}function im(o){return"script[async]"+o}function RE(o,u,x){if(u.count++,u.instance===null)switch(u.type){case"style":var b=o.querySelector('style[data-href~="'+Tn(x.href)+'"]');if(b)return u.instance=b,ia(b),b;var S=h({},x,{"data-href":x.href,"data-precedence":x.precedence,href:null,precedence:null});return b=(o.ownerDocument||o).createElement("style"),ia(b),ga(b,"style",S),Hg(b,x.precedence,o),u.instance=b;case"stylesheet":S=id(x.href);var L=o.querySelector(rm(S));if(L)return u.state.loading|=4,u.instance=L,ia(L),L;b=$E(x),(S=On.get(S))&&Wv(b,S),L=(o.ownerDocument||o).createElement("link"),ia(L);var Y=L;return Y._p=new Promise(function(ce,Ee){Y.onload=ce,Y.onerror=Ee}),ga(L,"link",b),u.state.loading|=4,Hg(L,x.precedence,o),u.instance=L;case"script":return L=ld(x.src),(S=o.querySelector(im(L)))?(u.instance=S,ia(S),S):(b=x,(S=On.get(L))&&(b=h({},x),Yv(b,S)),o=o.ownerDocument||o,S=o.createElement("script"),ia(S),ga(S,"link",b),o.head.appendChild(S),u.instance=S);case"void":return null;default:throw Error(n(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(b=u.instance,u.state.loading|=4,Hg(b,x.precedence,o));return u.instance}function Hg(o,u,x){for(var b=x.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),S=b.length?b[b.length-1]:null,L=S,Y=0;Y<b.length;Y++){var ce=b[Y];if(ce.dataset.precedence===u)L=ce;else if(L!==S)break}L?L.parentNode.insertBefore(o,L.nextSibling):(u=x.nodeType===9?x.head:x,u.insertBefore(o,u.firstChild))}function Wv(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.title==null&&(o.title=u.title)}function Yv(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.integrity==null&&(o.integrity=u.integrity)}var Gg=null;function UE(o,u,x){if(Gg===null){var b=new Map,S=Gg=new Map;S.set(x,b)}else S=Gg,b=S.get(x),b||(b=new Map,S.set(x,b));if(b.has(o))return b;for(b.set(o,null),x=x.getElementsByTagName(o),S=0;S<x.length;S++){var L=x[S];if(!(L[wu]||L[ua]||o==="link"&&L.getAttribute("rel")==="stylesheet")&&L.namespaceURI!=="http://www.w3.org/2000/svg"){var Y=L.getAttribute(u)||"";Y=o+Y;var ce=b.get(Y);ce?ce.push(L):b.set(Y,[L])}}return b}function zE(o,u,x){o=o.ownerDocument||o,o.head.insertBefore(x,u==="title"?o.querySelector("head > title"):null)}function A7(o,u,x){if(x===1||u.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return o=u.disabled,typeof u.precedence=="string"&&o==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function FE(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function L7(o,u,x,b){if(x.type==="stylesheet"&&(typeof b.media!="string"||matchMedia(b.media).matches!==!1)&&(x.state.loading&4)===0){if(x.instance===null){var S=id(b.href),L=u.querySelector(rm(S));if(L){u=L._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(o.count++,o=Vg.bind(o),u.then(o,o)),x.state.loading|=4,x.instance=L,ia(L);return}L=u.ownerDocument||u,b=$E(b),(S=On.get(S))&&Wv(b,S),L=L.createElement("link"),ia(L);var Y=L;Y._p=new Promise(function(ce,Ee){Y.onload=ce,Y.onerror=Ee}),ga(L,"link",b),x.instance=L}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(x,u),(u=x.state.preload)&&(x.state.loading&3)===0&&(o.count++,x=Vg.bind(o),u.addEventListener("load",x),u.addEventListener("error",x))}}var Qv=0;function k7(o,u){return o.stylesheets&&o.count===0&&Yg(o,o.stylesheets),0<o.count||0<o.imgCount?function(x){var b=setTimeout(function(){if(o.stylesheets&&Yg(o,o.stylesheets),o.unsuspend){var L=o.unsuspend;o.unsuspend=null,L()}},6e4+u);0<o.imgBytes&&Qv===0&&(Qv=62500*u7());var S=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&Yg(o,o.stylesheets),o.unsuspend)){var L=o.unsuspend;o.unsuspend=null,L()}},(o.imgBytes>Qv?50:800)+u);return o.unsuspend=x,function(){o.unsuspend=null,clearTimeout(b),clearTimeout(S)}}:null}function Vg(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Yg(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Wg=null;function Yg(o,u){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Wg=new Map,u.forEach(D7,o),Wg=null,Vg.call(o))}function D7(o,u){if(!(u.state.loading&4)){var x=Wg.get(o);if(x)var b=x.get(null);else{x=new Map,Wg.set(o,x);for(var S=o.querySelectorAll("link[data-precedence],style[data-precedence]"),L=0;L<S.length;L++){var Y=S[L];(Y.nodeName==="LINK"||Y.getAttribute("media")!=="not all")&&(x.set(Y.dataset.precedence,Y),b=Y)}b&&x.set(null,b)}S=u.instance,Y=S.getAttribute("data-precedence"),L=x.get(Y)||b,L===b&&x.set(null,S),x.set(Y,S),this.count++,b=Vg.bind(this),S.addEventListener("load",b),S.addEventListener("error",b),L?L.parentNode.insertBefore(S,L.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(S,o.firstChild)),u.state.loading|=4}}var lm={$$typeof:_,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function M7(o,u,x,b,S,L,Y,ce,Ee){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=H(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=H(0),this.hiddenUpdates=H(null),this.identifierPrefix=b,this.onUncaughtError=S,this.onCaughtError=L,this.onRecoverableError=Y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ee,this.incompleteTransitions=new Map}function BE(o,u,x,b,S,L,Y,ce,Ee,Fe,Ye,Je){return o=new M7(o,u,x,Y,Ee,Fe,Ye,Je,ce),u=1,L===!0&&(u|=24),L=cn(3,null,null,u),o.current=L,L.stateNode=o,u=Tb(),u.refCount++,o.pooledCache=u,u.refCount++,L.memoizedState={element:b,isDehydrated:x,cache:u},kb(L),o}function HE(o){return o?(o=Rc,o):Rc}function GE(o,u,x,b,S,L){S=HE(S),b.context===null?b.context=S:b.pendingContext=S,b=ll(u),b.payload={element:x},L=L===void 0?null:L,L!==null&&(b.callback=L),x=ol(o,b,u),x!==null&&(Ha(x,o,u),Uu(x,o,u))}function VE(o,u){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var x=o.retryLane;o.retryLane=x!==0&&x<u?x:u}}function qv(o,u){VE(o,u),(o=o.alternate)&&VE(o,u)}function WE(o){if(o.tag===13||o.tag===31){var u=so(o,67108864);u!==null&&Ha(u,o,67108864),qv(o,67108864)}}function YE(o){if(o.tag===13||o.tag===31){var u=hn();u=bt(u);var x=so(o,u);x!==null&&Ha(x,o,u),qv(o,u)}}var Qg=!0;function P7(o,u,x,b){var S=R.T;R.T=null;var L=Z.p;try{Z.p=2,Xv(o,u,x,b)}finally{Z.p=L,R.T=S}}function O7(o,u,x,b){var S=R.T;R.T=null;var L=Z.p;try{Z.p=8,Xv(o,u,x,b)}finally{Z.p=L,R.T=S}}function Xv(o,u,x,b){if(Qg){var S=Kv(b);if(S===null)Iv(o,u,b,qg,x),qE(o,b);else if($7(S,o,u,x,b))b.stopPropagation();else if(qE(o,b),u&4&&-1<I7.indexOf(o)){for(;S!==null;){var L=Tc(S);if(L!==null)switch(L.tag){case 3:if(L=L.stateNode,L.current.memoizedState.isDehydrated){var Y=Pe(L.pendingLanes);if(Y!==0){var ce=L;for(ce.pendingLanes|=2,ce.entangledLanes|=2;Y;){var Ee=1<<31-Se(Y);ce.entanglements[1]|=Ee,Y&=~Ee}_r(L),(Wt&6)===0&&(kg=z()+500,tm(0))}}break;case 31:case 13:ce=so(L,2),ce!==null&&Ha(ce,L,2),Mg(),qv(L,2)}if(L=Kv(b),L===null&&Iv(o,u,b,qg,x),L===S)break;S=L}S!==null&&b.stopPropagation()}else Iv(o,u,b,null,x)}}function Kv(o){return o=Jy(o),Zv(o)}var qg=null;function Zv(o){if(qg=null,o=_c(o),o!==null){var u=i(o);if(u===null)o=null;else{var x=u.tag;if(x===13){if(o=l(u),o!==null)return o;o=null}else if(x===31){if(o=c(u),o!==null)return o;o=null}else if(x===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;o=null}else u!==o&&(o=null)}}return qg=o,null}function QE(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ie()){case ue:return 2;case M:return 8;case xe:case ne:return 32;case Te:return 268435456;default:return 32}default:return 32}}var Jv=!1,bl=null,vl=null,Nl=null,om=new Map,cm=new Map,wl=[],I7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function qE(o,u){switch(o){case"focusin":case"focusout":bl=null;break;case"dragenter":case"dragleave":vl=null;break;case"mouseover":case"mouseout":Nl=null;break;case"pointerover":case"pointerout":om.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":cm.delete(u.pointerId)}}function dm(o,u,x,b,S,L){return o===null||o.nativeEvent!==L?(o={blockedOn:u,domEventName:x,eventSystemFlags:b,nativeEvent:L,targetContainers:[S]},u!==null&&(u=Tc(u),u!==null&&WE(u)),o):(o.eventSystemFlags|=b,u=o.targetContainers,S!==null&&u.indexOf(S)===-1&&u.push(S),o)}function $7(o,u,x,b,S){switch(u){case"focusin":return bl=dm(bl,o,u,x,b,S),!0;case"dragenter":return vl=dm(vl,o,u,x,b,S),!0;case"mouseover":return Nl=dm(Nl,o,u,x,b,S),!0;case"pointerover":var L=S.pointerId;return om.set(L,dm(om.get(L)||null,o,u,x,b,S)),!0;case"gotpointercapture":return L=S.pointerId,cm.set(L,dm(cm.get(L)||null,o,u,x,b,S)),!0}return!1}function XE(o){var u=_c(o.target);if(u!==null){var x=i(u);if(x!==null){if(u=x.tag,u===13){if(u=l(x),u!==null){o.blockedOn=u,wr(o.priority,function(){YE(x)});return}}else if(u===31){if(u=c(x),u!==null){o.blockedOn=u,wr(o.priority,function(){YE(x)});return}}else if(u===3&&x.stateNode.current.memoizedState.isDehydrated){o.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Xg(o){if(o.blockedOn!==null)return!1;for(var u=o.targetContainers;0<u.length;){var x=Kv(o.nativeEvent);if(x===null){x=o.nativeEvent;var b=new x.constructor(x.type,x);Zy=b,x.target.dispatchEvent(b),Zy=null}else return u=Tc(x),u!==null&&WE(u),o.blockedOn=x,!1;u.shift()}return!0}function KE(o,u,x){Xg(o)&&x.delete(u)}function R7(){Jv=!1,bl!==null&&Xg(bl)&&(bl=null),vl!==null&&Xg(vl)&&(vl=null),Nl!==null&&Xg(Nl)&&(Nl=null),om.forEach(KE),cm.forEach(KE)}function Kg(o,u){o.blockedOn===u&&(o.blockedOn=null,Jv||(Jv=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,R7)))}var Zg=null;function ZE(o){Zg!==o&&(Zg=o,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Zg===o&&(Zg=null);for(var u=0;u<o.length;u+=3){var x=o[u],b=o[u+1],S=o[u+2];if(typeof b!="function"){if(Zv(b||x)===null)continue;break}var L=Tc(x);L!==null&&(o.splice(u,3),u-=3,Kb(L,{pending:!0,data:S,method:x.method,action:b},b,S))}}))}function od(o){function u(Ee){return Kg(Ee,o)}bl!==null&&Kg(bl,o),vl!==null&&Kg(vl,o),Nl!==null&&Kg(Nl,o),om.forEach(u),cm.forEach(u);for(var x=0;x<wl.length;x++){var b=wl[x];b.blockedOn===o&&(b.blockedOn=null)}for(;0<wl.length&&(x=wl[0],x.blockedOn===null);)XE(x),x.blockedOn===null&&wl.shift();if(x=(o.ownerDocument||o).$$reactFormReplay,x!=null)for(b=0;b<x.length;b+=3){var S=x[b],L=x[b+1],Y=S[$a]||null;if(typeof L=="function")Y||ZE(x);else if(Y){var ce=null;if(L&&L.hasAttribute("formAction")){if(S=L,Y=L[$a]||null)ce=Y.formAction;else if(Zv(S)!==null)continue}else ce=Y.action;typeof ce=="function"?x[b+1]=ce:(x.splice(b,3),b-=3),ZE(x)}}}function JE(){function o(L){L.canIntercept&&L.info==="react-transition"&&L.intercept({handler:function(){return new Promise(function(Y){return S=Y})},focusReset:"manual",scroll:"manual"})}function u(){S!==null&&(S(),S=null),b||setTimeout(x,20)}function x(){if(!b&&!navigation.transition){var L=navigation.currentEntry;L&&L.url!=null&&navigation.navigate(L.url,{state:L.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var b=!1,S=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(x,100),function(){b=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),S!==null&&(S(),S=null)}}}function eN(o){this._internalRoot=o}Jg.prototype.render=eN.prototype.render=function(o){var u=this._internalRoot;if(u===null)throw Error(n(409));var x=u.current,b=hn();GE(x,b,o,u,null,null)},Jg.prototype.unmount=eN.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var u=o.containerInfo;GE(o.current,2,null,o,null,null),Mg(),u[Sc]=null}};function Jg(o){this._internalRoot=o}Jg.prototype.unstable_scheduleHydration=function(o){if(o){var u=cs();o={blockedOn:null,target:o,priority:u};for(var x=0;x<wl.length&&u!==0&&u<wl[x].priority;x++);wl.splice(x,0,o),x===0&&XE(o)}};var eA=s.version;if(eA!=="19.2.0")throw Error(n(527,eA,"19.2.0"));Z.findDOMNode=function(o){var u=o._reactInternals;if(u===void 0)throw typeof o.render=="function"?Error(n(188)):(o=Object.keys(o).join(","),Error(n(268,o)));return o=m(u),o=o!==null?f(o):null,o=o===null?null:o.stateNode,o};var U7={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ex=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ex.isDisabled&&ex.supportsFiber)try{P=ex.inject(U7),fe=ex}catch{}}return mm.createRoot=function(o,u){if(!r(o))throw Error(n(299));var x=!1,b="",S=lT,L=oT,Y=cT;return u!=null&&(u.unstable_strictMode===!0&&(x=!0),u.identifierPrefix!==void 0&&(b=u.identifierPrefix),u.onUncaughtError!==void 0&&(S=u.onUncaughtError),u.onCaughtError!==void 0&&(L=u.onCaughtError),u.onRecoverableError!==void 0&&(Y=u.onRecoverableError)),u=BE(o,1,!1,null,null,x,b,null,S,L,Y,JE),o[Sc]=u.current,Ov(o),new eN(u)},mm.hydrateRoot=function(o,u,x){if(!r(o))throw Error(n(299));var b=!1,S="",L=lT,Y=oT,ce=cT,Ee=null;return x!=null&&(x.unstable_strictMode===!0&&(b=!0),x.identifierPrefix!==void 0&&(S=x.identifierPrefix),x.onUncaughtError!==void 0&&(L=x.onUncaughtError),x.onCaughtError!==void 0&&(Y=x.onCaughtError),x.onRecoverableError!==void 0&&(ce=x.onRecoverableError),x.formState!==void 0&&(Ee=x.formState)),u=BE(o,1,!0,u,x??null,b,S,Ee,L,Y,ce,JE),u.context=HE(null),x=u.current,b=hn(),b=bt(b),S=ll(b),S.callback=null,ol(x,S,b),x=b,u.current.lanes=x,de(u,x),_r(u),o[Sc]=u.current,Ov(o),new Jg(u)},mm.version="19.2.0",mm}var dA;function q7(){if(dA)return aN.exports;dA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(s){console.error(s)}}return e(),aN.exports=Q7(),aN.exports}var X7=q7();/**
 * react-router v7.9.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var uA="popstate";function K7(e={}){function s(n,r){let{pathname:i,search:l,hash:c}=n.location;return Dj("",{pathname:i,search:l,hash:c},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function a(n,r){return typeof r=="string"?r:Lf(r)}return J7(s,a,null,e)}function Ts(e,s){if(e===!1||e===null||typeof e>"u")throw new Error(s)}function Yn(e,s){if(!e){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function Z7(){return Math.random().toString(36).substring(2,10)}function mA(e,s){return{usr:e.state,key:e.key,idx:s}}function Dj(e,s,a=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof s=="string"?du(s):s,state:a,key:s&&s.key||n||Z7()}}function Lf({pathname:e="/",search:s="",hash:a=""}){return s&&s!=="?"&&(e+=s.charAt(0)==="?"?s:"?"+s),a&&a!=="#"&&(e+=a.charAt(0)==="#"?a:"#"+a),e}function du(e){let s={};if(e){let a=e.indexOf("#");a>=0&&(s.hash=e.substring(a),e=e.substring(0,a));let n=e.indexOf("?");n>=0&&(s.search=e.substring(n),e=e.substring(0,n)),e&&(s.pathname=e)}return s}function J7(e,s,a,n={}){let{window:r=document.defaultView,v5Compat:i=!1}=n,l=r.history,c="POP",d=null,m=f();m==null&&(m=0,l.replaceState({...l.state,idx:m},""));function f(){return(l.state||{idx:null}).idx}function h(){c="POP";let v=f(),C=v==null?null:v-m;m=v,d&&d({action:c,location:p.location,delta:C})}function y(v,C){c="PUSH";let j=Dj(p.location,v,C);m=f()+1;let _=mA(j,m),T=p.createHref(j);try{l.pushState(_,"",T)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;r.location.assign(T)}i&&d&&d({action:c,location:p.location,delta:1})}function N(v,C){c="REPLACE";let j=Dj(p.location,v,C);m=f();let _=mA(j,m),T=p.createHref(j);l.replaceState(_,"",T),i&&d&&d({action:c,location:p.location,delta:0})}function w(v){return eU(v)}let p={get action(){return c},get location(){return e(r,l)},listen(v){if(d)throw new Error("A history only accepts one active listener");return r.addEventListener(uA,h),d=v,()=>{r.removeEventListener(uA,h),d=null}},createHref(v){return s(r,v)},createURL:w,encodeLocation(v){let C=w(v);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:y,replace:N,go(v){return l.go(v)}};return p}function eU(e,s=!1){let a="http://localhost";typeof window<"u"&&(a=window.location.origin!=="null"?window.location.origin:window.location.href),Ts(a,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:Lf(e);return n=n.replace(/ $/,"%20"),!s&&n.startsWith("//")&&(n=a+n),new URL(n,a)}function ID(e,s,a="/"){return tU(e,s,a,!1)}function tU(e,s,a,n){let r=typeof s=="string"?du(s):s,i=$i(r.pathname||"/",a);if(i==null)return null;let l=$D(e);sU(l);let c=null;for(let d=0;c==null&&d<l.length;++d){let m=fU(i);c=uU(l[d],m,n)}return c}function $D(e,s=[],a=[],n="",r=!1){let i=(l,c,d=r,m)=>{let f={relativePath:m===void 0?l.path||"":m,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(n)&&d)return;Ts(f.relativePath.startsWith(n),`Absolute route path "${f.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(n.length)}let h=Oi([n,f.relativePath]),y=a.concat(f);l.children&&l.children.length>0&&(Ts(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),$D(l.children,s,y,h,d)),!(l.path==null&&!l.index)&&s.push({path:h,score:cU(h,l.index),routesMeta:y})};return e.forEach((l,c)=>{if(l.path===""||!l.path?.includes("?"))i(l,c);else for(let d of RD(l.path))i(l,c,!0,d)}),s}function RD(e){let s=e.split("/");if(s.length===0)return[];let[a,...n]=s,r=a.endsWith("?"),i=a.replace(/\?$/,"");if(n.length===0)return r?[i,""]:[i];let l=RD(n.join("/")),c=[];return c.push(...l.map(d=>d===""?i:[i,d].join("/"))),r&&c.push(...l),c.map(d=>e.startsWith("/")&&d===""?"/":d)}function sU(e){e.sort((s,a)=>s.score!==a.score?a.score-s.score:dU(s.routesMeta.map(n=>n.childrenIndex),a.routesMeta.map(n=>n.childrenIndex)))}var aU=/^:[\w-]+$/,nU=3,rU=2,iU=1,lU=10,oU=-2,fA=e=>e==="*";function cU(e,s){let a=e.split("/"),n=a.length;return a.some(fA)&&(n+=oU),s&&(n+=rU),a.filter(r=>!fA(r)).reduce((r,i)=>r+(aU.test(i)?nU:i===""?iU:lU),n)}function dU(e,s){return e.length===s.length&&e.slice(0,-1).every((n,r)=>n===s[r])?e[e.length-1]-s[s.length-1]:0}function uU(e,s,a=!1){let{routesMeta:n}=e,r={},i="/",l=[];for(let c=0;c<n.length;++c){let d=n[c],m=c===n.length-1,f=i==="/"?s:s.slice(i.length)||"/",h=vp({path:d.relativePath,caseSensitive:d.caseSensitive,end:m},f),y=d.route;if(!h&&m&&a&&!n[n.length-1].route.index&&(h=vp({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},f)),!h)return null;Object.assign(r,h.params),l.push({params:r,pathname:Oi([i,h.pathname]),pathnameBase:pU(Oi([i,h.pathnameBase])),route:y}),h.pathnameBase!=="/"&&(i=Oi([i,h.pathnameBase]))}return l}function vp(e,s){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[a,n]=mU(e.path,e.caseSensitive,e.end),r=s.match(a);if(!r)return null;let i=r[0],l=i.replace(/(.)\/+$/,"$1"),c=r.slice(1);return{params:n.reduce((m,{paramName:f,isOptional:h},y)=>{if(f==="*"){let w=c[y]||"";l=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const N=c[y];return h&&!N?m[f]=void 0:m[f]=(N||"").replace(/%2F/g,"/"),m},{}),pathname:i,pathnameBase:l,pattern:e}}function mU(e,s=!1,a=!0){Yn(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,d)=>(n.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),r+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?r+="\\/*$":e!==""&&e!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,s?void 0:"i"),n]}function fU(e){try{return e.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return Yn(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${s}).`),e}}function $i(e,s){if(s==="/")return e;if(!e.toLowerCase().startsWith(s.toLowerCase()))return null;let a=s.endsWith("/")?s.length-1:s.length,n=e.charAt(a);return n&&n!=="/"?null:e.slice(a)||"/"}function hU(e,s="/"){let{pathname:a,search:n="",hash:r=""}=typeof e=="string"?du(e):e;return{pathname:a?a.startsWith("/")?a:gU(a,s):s,search:yU(n),hash:bU(r)}}function gU(e,s){let a=s.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?a.length>1&&a.pop():r!=="."&&a.push(r)}),a.length>1?a.join("/"):"/"}function lN(e,s,a,n){return`Cannot include a '${e}' character in a manually specified \`to.${s}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function xU(e){return e.filter((s,a)=>a===0||s.route.path&&s.route.path.length>0)}function ZC(e){let s=xU(e);return s.map((a,n)=>n===s.length-1?a.pathname:a.pathnameBase)}function JC(e,s,a,n=!1){let r;typeof e=="string"?r=du(e):(r={...e},Ts(!r.pathname||!r.pathname.includes("?"),lN("?","pathname","search",r)),Ts(!r.pathname||!r.pathname.includes("#"),lN("#","pathname","hash",r)),Ts(!r.search||!r.search.includes("#"),lN("#","search","hash",r)));let i=e===""||r.pathname==="",l=i?"/":r.pathname,c;if(l==null)c=a;else{let h=s.length-1;if(!n&&l.startsWith("..")){let y=l.split("/");for(;y[0]==="..";)y.shift(),h-=1;r.pathname=y.join("/")}c=h>=0?s[h]:"/"}let d=hU(r,c),m=l&&l!=="/"&&l.endsWith("/"),f=(i||l===".")&&a.endsWith("/");return!d.pathname.endsWith("/")&&(m||f)&&(d.pathname+="/"),d}var Oi=e=>e.join("/").replace(/\/\/+/g,"/"),pU=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),yU=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,bU=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function vU(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var UD=["POST","PUT","PATCH","DELETE"];new Set(UD);var NU=["GET",...UD];new Set(NU);var uu=g.createContext(null);uu.displayName="DataRouter";var u0=g.createContext(null);u0.displayName="DataRouterState";g.createContext(!1);var zD=g.createContext({isTransitioning:!1});zD.displayName="ViewTransition";var wU=g.createContext(new Map);wU.displayName="Fetchers";var jU=g.createContext(null);jU.displayName="Await";var yr=g.createContext(null);yr.displayName="Navigation";var eh=g.createContext(null);eh.displayName="Location";var Jn=g.createContext({outlet:null,matches:[],isDataRoute:!1});Jn.displayName="Route";var e1=g.createContext(null);e1.displayName="RouteError";function CU(e,{relative:s}={}){Ts(mu(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:n}=g.useContext(yr),{hash:r,pathname:i,search:l}=th(e,{relative:s}),c=i;return a!=="/"&&(c=i==="/"?a:Oi([a,i])),n.createHref({pathname:c,search:l,hash:r})}function mu(){return g.useContext(eh)!=null}function Xt(){return Ts(mu(),"useLocation() may be used only in the context of a <Router> component."),g.useContext(eh).location}var FD="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function BD(e){g.useContext(yr).static||g.useLayoutEffect(e)}function it(){let{isDataRoute:e}=g.useContext(Jn);return e?UU():SU()}function SU(){Ts(mu(),"useNavigate() may be used only in the context of a <Router> component.");let e=g.useContext(uu),{basename:s,navigator:a}=g.useContext(yr),{matches:n}=g.useContext(Jn),{pathname:r}=Xt(),i=JSON.stringify(ZC(n)),l=g.useRef(!1);return BD(()=>{l.current=!0}),g.useCallback((d,m={})=>{if(Yn(l.current,FD),!l.current)return;if(typeof d=="number"){a.go(d);return}let f=JC(d,JSON.parse(i),r,m.relative==="path");e==null&&s!=="/"&&(f.pathname=f.pathname==="/"?s:Oi([s,f.pathname])),(m.replace?a.replace:a.push)(f,m.state,m)},[s,a,i,r,e])}var _U=g.createContext(null);function TU(e){let s=g.useContext(Jn).outlet;return g.useMemo(()=>s&&g.createElement(_U.Provider,{value:e},s),[s,e])}function Qi(){let{matches:e}=g.useContext(Jn),s=e[e.length-1];return s?s.params:{}}function th(e,{relative:s}={}){let{matches:a}=g.useContext(Jn),{pathname:n}=Xt(),r=JSON.stringify(ZC(a));return g.useMemo(()=>JC(e,JSON.parse(r),n,s==="path"),[e,r,n,s])}function EU(e,s){return HD(e,s)}function HD(e,s,a,n,r){Ts(mu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=g.useContext(yr),{matches:l}=g.useContext(Jn),c=l[l.length-1],d=c?c.params:{},m=c?c.pathname:"/",f=c?c.pathnameBase:"/",h=c&&c.route;{let j=h&&h.path||"";GD(m,!h||j.endsWith("*")||j.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${j}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${j}"> to <Route path="${j==="/"?"*":`${j}/*`}">.`)}let y=Xt(),N;if(s){let j=typeof s=="string"?du(s):s;Ts(f==="/"||j.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${j.pathname}" was given in the \`location\` prop.`),N=j}else N=y;let w=N.pathname||"/",p=w;if(f!=="/"){let j=f.replace(/^\//,"").split("/");p="/"+w.replace(/^\//,"").split("/").slice(j.length).join("/")}let v=ID(e,{pathname:p});Yn(h||v!=null,`No routes matched location "${N.pathname}${N.search}${N.hash}" `),Yn(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${N.pathname}${N.search}${N.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=MU(v&&v.map(j=>Object.assign({},j,{params:Object.assign({},d,j.params),pathname:Oi([f,i.encodeLocation?i.encodeLocation(j.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?f:Oi([f,i.encodeLocation?i.encodeLocation(j.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:j.pathnameBase])})),l,a,n,r);return s&&C?g.createElement(eh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...N},navigationType:"POP"}},C):C}function AU(){let e=RU(),s=vU(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),a=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=g.createElement(g.Fragment,null,g.createElement("p",null," Hey developer "),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:i},"ErrorBoundary")," or"," ",g.createElement("code",{style:i},"errorElement")," prop on your route.")),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},s),a?g.createElement("pre",{style:r},a):null,l)}var LU=g.createElement(AU,null),kU=class extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,s){return s.location!==e.location||s.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:s.error,location:s.location,revalidation:e.revalidation||s.revalidation}}componentDidCatch(e,s){this.props.unstable_onError?this.props.unstable_onError(e,s):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?g.createElement(Jn.Provider,{value:this.props.routeContext},g.createElement(e1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function DU({routeContext:e,match:s,children:a}){let n=g.useContext(uu);return n&&n.static&&n.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=s.route.id),g.createElement(Jn.Provider,{value:e},a)}function MU(e,s=[],a=null,n=null,r=null){if(e==null){if(!a)return null;if(a.errors)e=a.matches;else if(s.length===0&&!a.initialized&&a.matches.length>0)e=a.matches;else return null}let i=e,l=a?.errors;if(l!=null){let m=i.findIndex(f=>f.route.id&&l?.[f.route.id]!==void 0);Ts(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),i=i.slice(0,Math.min(i.length,m+1))}let c=!1,d=-1;if(a)for(let m=0;m<i.length;m++){let f=i[m];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=m),f.route.id){let{loaderData:h,errors:y}=a,N=f.route.loader&&!h.hasOwnProperty(f.route.id)&&(!y||y[f.route.id]===void 0);if(f.route.lazy||N){c=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((m,f,h)=>{let y,N=!1,w=null,p=null;a&&(y=l&&f.route.id?l[f.route.id]:void 0,w=f.route.errorElement||LU,c&&(d<0&&h===0?(GD("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,p=null):d===h&&(N=!0,p=f.route.hydrateFallbackElement||null)));let v=s.concat(i.slice(0,h+1)),C=()=>{let j;return y?j=w:N?j=p:f.route.Component?j=g.createElement(f.route.Component,null):f.route.element?j=f.route.element:j=m,g.createElement(DU,{match:f,routeContext:{outlet:m,matches:v,isDataRoute:a!=null},children:j})};return a&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?g.createElement(kU,{location:a.location,revalidation:a.revalidation,component:w,error:y,children:C(),routeContext:{outlet:null,matches:v,isDataRoute:!0},unstable_onError:n}):C()},null)}function t1(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function PU(e){let s=g.useContext(uu);return Ts(s,t1(e)),s}function OU(e){let s=g.useContext(u0);return Ts(s,t1(e)),s}function IU(e){let s=g.useContext(Jn);return Ts(s,t1(e)),s}function s1(e){let s=IU(e),a=s.matches[s.matches.length-1];return Ts(a.route.id,`${e} can only be used on routes that contain a unique "id"`),a.route.id}function $U(){return s1("useRouteId")}function RU(){let e=g.useContext(e1),s=OU("useRouteError"),a=s1("useRouteError");return e!==void 0?e:s.errors?.[a]}function UU(){let{router:e}=PU("useNavigate"),s=s1("useNavigate"),a=g.useRef(!1);return BD(()=>{a.current=!0}),g.useCallback(async(r,i={})=>{Yn(a.current,FD),a.current&&(typeof r=="number"?e.navigate(r):await e.navigate(r,{fromRouteId:s,...i}))},[e,s])}var hA={};function GD(e,s,a){!s&&!hA[e]&&(hA[e]=!0,Yn(!1,a))}g.memo(zU);function zU({routes:e,future:s,state:a,unstable_onError:n}){return HD(e,void 0,a,n,s)}function bn({to:e,replace:s,state:a,relative:n}){Ts(mu(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=g.useContext(yr);Yn(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=g.useContext(Jn),{pathname:l}=Xt(),c=it(),d=JC(e,ZC(i),l,n==="path"),m=JSON.stringify(d);return g.useEffect(()=>{c(JSON.parse(m),{replace:s,state:a,relative:n})},[c,m,n,s,a]),null}function fu(e){return TU(e.context)}function tt(e){Ts(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function FU({basename:e="/",children:s=null,location:a,navigationType:n="POP",navigator:r,static:i=!1}){Ts(!mu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),c=g.useMemo(()=>({basename:l,navigator:r,static:i,future:{}}),[l,r,i]);typeof a=="string"&&(a=du(a));let{pathname:d="/",search:m="",hash:f="",state:h=null,key:y="default"}=a,N=g.useMemo(()=>{let w=$i(d,l);return w==null?null:{location:{pathname:w,search:m,hash:f,state:h,key:y},navigationType:n}},[l,d,m,f,h,y,n]);return Yn(N!=null,`<Router basename="${l}"> is not able to match the URL "${d}${m}${f}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:g.createElement(yr.Provider,{value:c},g.createElement(eh.Provider,{children:s,value:N}))}function BU({children:e,location:s}){return EU(Mj(e),s)}function Mj(e,s=[]){let a=[];return g.Children.forEach(e,(n,r)=>{if(!g.isValidElement(n))return;let i=[...s,r];if(n.type===g.Fragment){a.push.apply(a,Mj(n.props.children,i));return}Ts(n.type===tt,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ts(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=Mj(n.props.children,i)),a.push(l)}),a}var ip="get",lp="application/x-www-form-urlencoded";function m0(e){return e!=null&&typeof e.tagName=="string"}function HU(e){return m0(e)&&e.tagName.toLowerCase()==="button"}function GU(e){return m0(e)&&e.tagName.toLowerCase()==="form"}function VU(e){return m0(e)&&e.tagName.toLowerCase()==="input"}function WU(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function YU(e,s){return e.button===0&&(!s||s==="_self")&&!WU(e)}function Pj(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((s,a)=>{let n=e[a];return s.concat(Array.isArray(n)?n.map(r=>[a,r]):[[a,n]])},[]))}function QU(e,s){let a=Pj(e);return s&&s.forEach((n,r)=>{a.has(r)||s.getAll(r).forEach(i=>{a.append(r,i)})}),a}var tx=null;function qU(){if(tx===null)try{new FormData(document.createElement("form"),0),tx=!1}catch{tx=!0}return tx}var XU=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function oN(e){return e!=null&&!XU.has(e)?(Yn(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${lp}"`),null):e}function KU(e,s){let a,n,r,i,l;if(GU(e)){let c=e.getAttribute("action");n=c?$i(c,s):null,a=e.getAttribute("method")||ip,r=oN(e.getAttribute("enctype"))||lp,i=new FormData(e)}else if(HU(e)||VU(e)&&(e.type==="submit"||e.type==="image")){let c=e.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||c.getAttribute("action");if(n=d?$i(d,s):null,a=e.getAttribute("formmethod")||c.getAttribute("method")||ip,r=oN(e.getAttribute("formenctype"))||oN(c.getAttribute("enctype"))||lp,i=new FormData(c,e),!qU()){let{name:m,type:f,value:h}=e;if(f==="image"){let y=m?`${m}.`:"";i.append(`${y}x`,"0"),i.append(`${y}y`,"0")}else m&&i.append(m,h)}}else{if(m0(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=ip,n=null,r=lp,l=e}return i&&r==="text/plain"&&(l=i,i=void 0),{action:n,method:a.toLowerCase(),encType:r,formData:i,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function a1(e,s){if(e===!1||e===null||typeof e>"u")throw new Error(s)}function ZU(e,s,a){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${a}`:s&&$i(n.pathname,s)==="/"?n.pathname=`${s.replace(/\/$/,"")}/_root.${a}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${a}`,n}async function JU(e,s){if(e.id in s)return s[e.id];try{let a=await import(e.module);return s[e.id]=a,a}catch(a){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ez(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function tz(e,s,a){let n=await Promise.all(e.map(async r=>{let i=s.routes[r.route.id];if(i){let l=await JU(i,a);return l.links?l.links():[]}return[]}));return rz(n.flat(1).filter(ez).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function gA(e,s,a,n,r,i){let l=(d,m)=>a[m]?d.route.id!==a[m].route.id:!0,c=(d,m)=>a[m].pathname!==d.pathname||a[m].route.path?.endsWith("*")&&a[m].params["*"]!==d.params["*"];return i==="assets"?s.filter((d,m)=>l(d,m)||c(d,m)):i==="data"?s.filter((d,m)=>{let f=n.routes[d.route.id];if(!f||!f.hasLoader)return!1;if(l(d,m)||c(d,m))return!0;if(d.route.shouldRevalidate){let h=d.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:a[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function sz(e,s,{includeHydrateFallback:a}={}){return az(e.map(n=>{let r=s.routes[n.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),a&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function az(e){return[...new Set(e)]}function nz(e){let s={},a=Object.keys(e).sort();for(let n of a)s[n]=e[n];return s}function rz(e,s){let a=new Set;return new Set(s),e.reduce((n,r)=>{let i=JSON.stringify(nz(r));return a.has(i)||(a.add(i),n.push({key:i,link:r})),n},[])}function VD(){let e=g.useContext(uu);return a1(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function iz(){let e=g.useContext(u0);return a1(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var n1=g.createContext(void 0);n1.displayName="FrameworkContext";function WD(){let e=g.useContext(n1);return a1(e,"You must render this element inside a <HydratedRouter> element"),e}function lz(e,s){let a=g.useContext(n1),[n,r]=g.useState(!1),[i,l]=g.useState(!1),{onFocus:c,onBlur:d,onMouseEnter:m,onMouseLeave:f,onTouchStart:h}=s,y=g.useRef(null);g.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let p=C=>{C.forEach(j=>{l(j.isIntersecting)})},v=new IntersectionObserver(p,{threshold:.5});return y.current&&v.observe(y.current),()=>{v.disconnect()}}},[e]),g.useEffect(()=>{if(n){let p=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(p)}}},[n]);let N=()=>{r(!0)},w=()=>{r(!1),l(!1)};return a?e!=="intent"?[i,y,{}]:[i,y,{onFocus:fm(c,N),onBlur:fm(d,w),onMouseEnter:fm(m,N),onMouseLeave:fm(f,w),onTouchStart:fm(h,N)}]:[!1,y,{}]}function fm(e,s){return a=>{e&&e(a),a.defaultPrevented||s(a)}}function oz({page:e,...s}){let{router:a}=VD(),n=g.useMemo(()=>ID(a.routes,e,a.basename),[a.routes,e,a.basename]);return n?g.createElement(dz,{page:e,matches:n,...s}):null}function cz(e){let{manifest:s,routeModules:a}=WD(),[n,r]=g.useState([]);return g.useEffect(()=>{let i=!1;return tz(e,s,a).then(l=>{i||r(l)}),()=>{i=!0}},[e,s,a]),n}function dz({page:e,matches:s,...a}){let n=Xt(),{manifest:r,routeModules:i}=WD(),{basename:l}=VD(),{loaderData:c,matches:d}=iz(),m=g.useMemo(()=>gA(e,s,d,r,n,"data"),[e,s,d,r,n]),f=g.useMemo(()=>gA(e,s,d,r,n,"assets"),[e,s,d,r,n]),h=g.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let w=new Set,p=!1;if(s.forEach(C=>{let j=r.routes[C.route.id];!j||!j.hasLoader||(!m.some(_=>_.route.id===C.route.id)&&C.route.id in c&&i[C.route.id]?.shouldRevalidate||j.hasClientLoader?p=!0:w.add(C.route.id))}),w.size===0)return[];let v=ZU(e,l,"data");return p&&w.size>0&&v.searchParams.set("_routes",s.filter(C=>w.has(C.route.id)).map(C=>C.route.id).join(",")),[v.pathname+v.search]},[l,c,n,r,m,s,e,i]),y=g.useMemo(()=>sz(f,r),[f,r]),N=cz(f);return g.createElement(g.Fragment,null,h.map(w=>g.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...a})),y.map(w=>g.createElement("link",{key:w,rel:"modulepreload",href:w,...a})),N.map(({key:w,link:p})=>g.createElement("link",{key:w,nonce:a.nonce,...p})))}function uz(...e){return s=>{e.forEach(a=>{typeof a=="function"?a(s):a!=null&&(a.current=s)})}}var YD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{YD&&(window.__reactRouterVersion="7.9.3")}catch{}function mz({basename:e,children:s,window:a}){let n=g.useRef();n.current==null&&(n.current=K7({window:a,v5Compat:!0}));let r=n.current,[i,l]=g.useState({action:r.action,location:r.location}),c=g.useCallback(d=>{g.startTransition(()=>l(d))},[l]);return g.useLayoutEffect(()=>r.listen(c),[r,c]),g.createElement(FU,{basename:e,children:s,location:i.location,navigationType:i.action,navigator:r})}var QD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qD=g.forwardRef(function({onClick:s,discover:a="render",prefetch:n="none",relative:r,reloadDocument:i,replace:l,state:c,target:d,to:m,preventScrollReset:f,viewTransition:h,...y},N){let{basename:w}=g.useContext(yr),p=typeof m=="string"&&QD.test(m),v,C=!1;if(typeof m=="string"&&p&&(v=m,YD))try{let B=new URL(window.location.href),X=m.startsWith("//")?new URL(B.protocol+m):new URL(m),$=$i(X.pathname,w);X.origin===B.origin&&$!=null?m=$+X.search+X.hash:C=!0}catch{Yn(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let j=CU(m,{relative:r}),[_,T,k]=lz(n,y),E=gz(m,{replace:l,state:c,target:d,preventScrollReset:f,relative:r,viewTransition:h});function A(B){s&&s(B),B.defaultPrevented||E(B)}let U=g.createElement("a",{...y,...k,href:v||j,onClick:C||i?s:A,ref:uz(N,T),target:d,"data-discover":!p&&a==="render"?"true":void 0});return _&&!p?g.createElement(g.Fragment,null,U,g.createElement(oz,{page:j})):U});qD.displayName="Link";var mt=g.forwardRef(function({"aria-current":s="page",caseSensitive:a=!1,className:n="",end:r=!1,style:i,to:l,viewTransition:c,children:d,...m},f){let h=th(l,{relative:m.relative}),y=Xt(),N=g.useContext(u0),{navigator:w,basename:p}=g.useContext(yr),v=N!=null&&vz(h)&&c===!0,C=w.encodeLocation?w.encodeLocation(h).pathname:h.pathname,j=y.pathname,_=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;a||(j=j.toLowerCase(),_=_?_.toLowerCase():null,C=C.toLowerCase()),_&&p&&(_=$i(_,p)||_);const T=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let k=j===C||!r&&j.startsWith(C)&&j.charAt(T)==="/",E=_!=null&&(_===C||!r&&_.startsWith(C)&&_.charAt(C.length)==="/"),A={isActive:k,isPending:E,isTransitioning:v},U=k?s:void 0,B;typeof n=="function"?B=n(A):B=[n,k?"active":null,E?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let X=typeof i=="function"?i(A):i;return g.createElement(qD,{...m,"aria-current":U,className:B,ref:f,style:X,to:l,viewTransition:c},typeof d=="function"?d(A):d)});mt.displayName="NavLink";var fz=g.forwardRef(({discover:e="render",fetcherKey:s,navigate:a,reloadDocument:n,replace:r,state:i,method:l=ip,action:c,onSubmit:d,relative:m,preventScrollReset:f,viewTransition:h,...y},N)=>{let w=yz(),p=bz(c,{relative:m}),v=l.toLowerCase()==="get"?"get":"post",C=typeof c=="string"&&QD.test(c),j=_=>{if(d&&d(_),_.defaultPrevented)return;_.preventDefault();let T=_.nativeEvent.submitter,k=T?.getAttribute("formmethod")||l;w(T||_.currentTarget,{fetcherKey:s,method:k,navigate:a,replace:r,state:i,relative:m,preventScrollReset:f,viewTransition:h})};return g.createElement("form",{ref:N,method:v,action:p,onSubmit:n?d:j,...y,"data-discover":!C&&e==="render"?"true":void 0})});fz.displayName="Form";function hz(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function XD(e){let s=g.useContext(uu);return Ts(s,hz(e)),s}function gz(e,{target:s,replace:a,state:n,preventScrollReset:r,relative:i,viewTransition:l}={}){let c=it(),d=Xt(),m=th(e,{relative:i});return g.useCallback(f=>{if(YU(f,s)){f.preventDefault();let h=a!==void 0?a:Lf(d)===Lf(m);c(e,{replace:h,state:n,preventScrollReset:r,relative:i,viewTransition:l})}},[d,c,m,a,n,s,e,r,i,l])}function Aa(e){Yn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let s=g.useRef(Pj(e)),a=g.useRef(!1),n=Xt(),r=g.useMemo(()=>QU(n.search,a.current?null:s.current),[n.search]),i=it(),l=g.useCallback((c,d)=>{const m=Pj(typeof c=="function"?c(new URLSearchParams(r)):c);a.current=!0,i("?"+m,d)},[i,r]);return[r,l]}var xz=0,pz=()=>`__${String(++xz)}__`;function yz(){let{router:e}=XD("useSubmit"),{basename:s}=g.useContext(yr),a=$U();return g.useCallback(async(n,r={})=>{let{action:i,method:l,encType:c,formData:d,body:m}=KU(n,s);if(r.navigate===!1){let f=r.fetcherKey||pz();await e.fetch(f,a,r.action||i,{preventScrollReset:r.preventScrollReset,formData:d,body:m,formMethod:r.method||l,formEncType:r.encType||c,flushSync:r.flushSync})}else await e.navigate(r.action||i,{preventScrollReset:r.preventScrollReset,formData:d,body:m,formMethod:r.method||l,formEncType:r.encType||c,replace:r.replace,state:r.state,fromRouteId:a,flushSync:r.flushSync,viewTransition:r.viewTransition})},[e,s,a])}function bz(e,{relative:s}={}){let{basename:a}=g.useContext(yr),n=g.useContext(Jn);Ts(n,"useFormAction must be used inside a RouteContext");let[r]=n.matches.slice(-1),i={...th(e||".",{relative:s})},l=Xt();if(e==null){i.search=l.search;let c=new URLSearchParams(i.search),d=c.getAll("index");if(d.some(f=>f==="")){c.delete("index"),d.filter(h=>h).forEach(h=>c.append("index",h));let f=c.toString();i.search=f?`?${f}`:""}}return(!e||e===".")&&r.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(i.pathname=i.pathname==="/"?a:Oi([a,i.pathname])),Lf(i)}function vz(e,{relative:s}={}){let a=g.useContext(zD);Ts(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=XD("useViewTransitionState"),r=th(e,{relative:s});if(!a.isTransitioning)return!1;let i=$i(a.currentLocation.pathname,n)||a.currentLocation.pathname,l=$i(a.nextLocation.pathname,n)||a.nextLocation.pathname;return vp(r.pathname,l)!=null||vp(r.pathname,i)!=null}var r1=OD();const sx=KC(r1);function KD(e){var s,a,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(s=0;s<r;s++)e[s]&&(a=KD(e[s]))&&(n&&(n+=" "),n+=a)}else for(a in e)e[a]&&(n&&(n+=" "),n+=a);return n}function It(){for(var e,s,a=0,n="",r=arguments.length;a<r;a++)(e=arguments[a])&&(s=KD(e))&&(n&&(n+=" "),n+=s);return n}function Nz(e){if(typeof document>"u")return;let s=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",s.firstChild?s.insertBefore(a,s.firstChild):s.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}Nz(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var sh=e=>typeof e=="number"&&!isNaN(e),ac=e=>typeof e=="string",Ri=e=>typeof e=="function",wz=e=>ac(e)||sh(e),Oj=e=>ac(e)||Ri(e)?e:null,jz=(e,s)=>e===!1||sh(e)&&e>0?e:s,Ij=e=>g.isValidElement(e)||ac(e)||Ri(e)||sh(e);function Cz(e,s,a=300){let{scrollHeight:n,style:r}=e;requestAnimationFrame(()=>{r.minHeight="initial",r.height=n+"px",r.transition=`all ${a}ms`,requestAnimationFrame(()=>{r.height="0",r.padding="0",r.margin="0",setTimeout(s,a)})})}function Sz({enter:e,exit:s,appendPosition:a=!1,collapse:n=!0,collapseDuration:r=300}){return function({children:i,position:l,preventExitTransition:c,done:d,nodeRef:m,isIn:f,playToast:h}){let y=a?`${e}--${l}`:e,N=a?`${s}--${l}`:s,w=g.useRef(0);return g.useLayoutEffect(()=>{let p=m.current,v=y.split(" "),C=j=>{j.target===m.current&&(h(),p.removeEventListener("animationend",C),p.removeEventListener("animationcancel",C),w.current===0&&j.type!=="animationcancel"&&p.classList.remove(...v))};p.classList.add(...v),p.addEventListener("animationend",C),p.addEventListener("animationcancel",C)},[]),g.useEffect(()=>{let p=m.current,v=()=>{p.removeEventListener("animationend",v),n?Cz(p,d,r):d()};f||(c?v():(w.current=1,p.className+=` ${N}`,p.addEventListener("animationend",v)))},[f]),at.createElement(at.Fragment,null,i)}}function xA(e,s){return{content:ZD(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:s}}function ZD(e,s,a=!1){return g.isValidElement(e)&&!ac(e.type)?g.cloneElement(e,{closeToast:s.closeToast,toastProps:s,data:s.data,isPaused:a}):Ri(e)?e({closeToast:s.closeToast,toastProps:s,data:s.data,isPaused:a}):e}function _z({closeToast:e,theme:s,ariaLabel:a="close"}){return at.createElement("button",{className:`Toastify__close-button Toastify__close-button--${s}`,type:"button",onClick:n=>{n.stopPropagation(),e(!0)},"aria-label":a},at.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},at.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function Tz({delay:e,isRunning:s,closeToast:a,type:n="default",hide:r,className:i,controlledProgress:l,progress:c,rtl:d,isIn:m,theme:f}){let h=r||l&&c===0,y={animationDuration:`${e}ms`,animationPlayState:s?"running":"paused"};l&&(y.transform=`scaleX(${c})`);let N=It("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${f}`,`Toastify__progress-bar--${n}`,{"Toastify__progress-bar--rtl":d}),w=Ri(i)?i({rtl:d,type:n,defaultClassName:N}):It(N,i),p={[l&&c>=1?"onTransitionEnd":"onAnimationEnd"]:l&&c<1?null:()=>{m&&a()}};return at.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":h},at.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${f} Toastify__progress-bar--${n}`}),at.createElement("div",{role:"progressbar","aria-hidden":h?"true":"false","aria-label":"notification timer",className:w,style:y,...p}))}var Ez=1,JD=()=>`${Ez++}`;function Az(e,s,a){let n=1,r=0,i=[],l=[],c=s,d=new Map,m=new Set,f=j=>(m.add(j),()=>m.delete(j)),h=()=>{l=Array.from(d.values()),m.forEach(j=>j())},y=({containerId:j,toastId:_,updateId:T})=>{let k=j?j!==e:e!==1,E=d.has(_)&&T==null;return k||E},N=(j,_)=>{d.forEach(T=>{var k;(_==null||_===T.props.toastId)&&((k=T.toggle)==null||k.call(T,j))})},w=j=>{var _,T;(T=(_=j.props)==null?void 0:_.onClose)==null||T.call(_,j.removalReason),j.isActive=!1},p=j=>{if(j==null)d.forEach(w);else{let _=d.get(j);_&&w(_)}h()},v=()=>{r-=i.length,i=[]},C=j=>{var _,T;let{toastId:k,updateId:E}=j.props,A=E==null;j.staleId&&d.delete(j.staleId),j.isActive=!0,d.set(k,j),h(),a(xA(j,A?"added":"updated")),A&&((T=(_=j.props).onOpen)==null||T.call(_))};return{id:e,props:c,observe:f,toggle:N,removeToast:p,toasts:d,clearQueue:v,buildToast:(j,_)=>{if(y(_))return;let{toastId:T,updateId:k,data:E,staleId:A,delay:U}=_,B=k==null;B&&r++;let X={...c,style:c.toastStyle,key:n++,...Object.fromEntries(Object.entries(_).filter(([O,G])=>G!=null)),toastId:T,updateId:k,data:E,isIn:!1,className:Oj(_.className||c.toastClassName),progressClassName:Oj(_.progressClassName||c.progressClassName),autoClose:_.isLoading?!1:jz(_.autoClose,c.autoClose),closeToast(O){d.get(T).removalReason=O,p(T)},deleteToast(){let O=d.get(T);if(O!=null){if(a(xA(O,"removed")),d.delete(T),r--,r<0&&(r=0),i.length>0){C(i.shift());return}h()}}};X.closeButton=c.closeButton,_.closeButton===!1||Ij(_.closeButton)?X.closeButton=_.closeButton:_.closeButton===!0&&(X.closeButton=Ij(c.closeButton)?c.closeButton:!0);let $={content:j,props:X,staleId:A};c.limit&&c.limit>0&&r>c.limit&&B?i.push($):sh(U)?setTimeout(()=>{C($)},U):C($)},setProps(j){c=j},setToggle:(j,_)=>{let T=d.get(j);T&&(T.toggle=_)},isToastActive:j=>{var _;return(_=d.get(j))==null?void 0:_.isActive},getSnapshot:()=>l}}var Pa=new Map,kf=[],$j=new Set,Lz=e=>$j.forEach(s=>s(e)),eM=()=>Pa.size>0;function kz(){kf.forEach(e=>sM(e.content,e.options)),kf=[]}var Dz=(e,{containerId:s})=>{var a;return(a=Pa.get(s||1))==null?void 0:a.toasts.get(e)};function tM(e,s){var a;if(s)return!!((a=Pa.get(s))!=null&&a.isToastActive(e));let n=!1;return Pa.forEach(r=>{r.isToastActive(e)&&(n=!0)}),n}function Mz(e){if(!eM()){kf=kf.filter(s=>e!=null&&s.options.toastId!==e);return}if(e==null||wz(e))Pa.forEach(s=>{s.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let s=Pa.get(e.containerId);s?s.removeToast(e.id):Pa.forEach(a=>{a.removeToast(e.id)})}}var Pz=(e={})=>{Pa.forEach(s=>{s.props.limit&&(!e.containerId||s.id===e.containerId)&&s.clearQueue()})};function sM(e,s){Ij(e)&&(eM()||kf.push({content:e,options:s}),Pa.forEach(a=>{a.buildToast(e,s)}))}function Oz(e){var s;(s=Pa.get(e.containerId||1))==null||s.setToggle(e.id,e.fn)}function aM(e,s){Pa.forEach(a=>{(s==null||!(s!=null&&s.containerId)||s?.containerId===a.id)&&a.toggle(e,s?.id)})}function Iz(e){let s=e.containerId||1;return{subscribe(a){let n=Az(s,e,Lz);Pa.set(s,n);let r=n.observe(a);return kz(),()=>{r(),Pa.delete(s)}},setProps(a){var n;(n=Pa.get(s))==null||n.setProps(a)},getSnapshot(){var a;return(a=Pa.get(s))==null?void 0:a.getSnapshot()}}}function $z(e){return $j.add(e),()=>{$j.delete(e)}}function Rz(e){return e&&(ac(e.toastId)||sh(e.toastId))?e.toastId:JD()}function ah(e,s){return sM(e,s),s.toastId}function f0(e,s){return{...s,type:s&&s.type||e,toastId:Rz(s)}}function h0(e){return(s,a)=>ah(s,f0(e,a))}function q(e,s){return ah(e,f0("default",s))}q.loading=(e,s)=>ah(e,f0("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...s}));function Uz(e,{pending:s,error:a,success:n},r){let i;s&&(i=ac(s)?q.loading(s,r):q.loading(s.render,{...r,...s}));let l={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},c=(m,f,h)=>{if(f==null){q.dismiss(i);return}let y={type:m,...l,...r,data:h},N=ac(f)?{render:f}:f;return i?q.update(i,{...y,...N}):q(N.render,{...y,...N}),h},d=Ri(e)?e():e;return d.then(m=>c("success",n,m)).catch(m=>c("error",a,m)),d}q.promise=Uz;q.success=h0("success");q.info=h0("info");q.error=h0("error");q.warning=h0("warning");q.warn=q.warning;q.dark=(e,s)=>ah(e,f0("default",{theme:"dark",...s}));function zz(e){Mz(e)}q.dismiss=zz;q.clearWaitingQueue=Pz;q.isActive=tM;q.update=(e,s={})=>{let a=Dz(e,s);if(a){let{props:n,content:r}=a,i={delay:100,...n,...s,toastId:s.toastId||e,updateId:JD()};i.toastId!==e&&(i.staleId=e);let l=i.render||r;delete i.render,ah(l,i)}};q.done=e=>{q.update(e,{progress:1})};q.onChange=$z;q.play=e=>aM(!0,e);q.pause=e=>aM(!1,e);function Fz(e){var s;let{subscribe:a,getSnapshot:n,setProps:r}=g.useRef(Iz(e)).current;r(e);let i=(s=g.useSyncExternalStore(a,n,n))==null?void 0:s.slice();function l(c){if(!i)return[];let d=new Map;return e.newestOnTop&&i.reverse(),i.forEach(m=>{let{position:f}=m.props;d.has(f)||d.set(f,[]),d.get(f).push(m)}),Array.from(d,m=>c(m[0],m[1]))}return{getToastToRender:l,isToastActive:tM,count:i?.length}}function Bz(e){let[s,a]=g.useState(!1),[n,r]=g.useState(!1),i=g.useRef(null),l=g.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:c,pauseOnHover:d,closeToast:m,onClick:f,closeOnClick:h}=e;Oz({id:e.toastId,containerId:e.containerId,fn:a}),g.useEffect(()=>{if(e.pauseOnFocusLoss)return y(),()=>{N()}},[e.pauseOnFocusLoss]);function y(){document.hasFocus()||C(),window.addEventListener("focus",v),window.addEventListener("blur",C)}function N(){window.removeEventListener("focus",v),window.removeEventListener("blur",C)}function w(A){if(e.draggable===!0||e.draggable===A.pointerType){j();let U=i.current;l.canCloseOnClick=!0,l.canDrag=!0,U.style.transition="none",e.draggableDirection==="x"?(l.start=A.clientX,l.removalDistance=U.offsetWidth*(e.draggablePercent/100)):(l.start=A.clientY,l.removalDistance=U.offsetHeight*(e.draggablePercent===80?e.draggablePercent*1.5:e.draggablePercent)/100)}}function p(A){let{top:U,bottom:B,left:X,right:$}=i.current.getBoundingClientRect();A.nativeEvent.type!=="touchend"&&e.pauseOnHover&&A.clientX>=X&&A.clientX<=$&&A.clientY>=U&&A.clientY<=B?C():v()}function v(){a(!0)}function C(){a(!1)}function j(){l.didMove=!1,document.addEventListener("pointermove",T),document.addEventListener("pointerup",k)}function _(){document.removeEventListener("pointermove",T),document.removeEventListener("pointerup",k)}function T(A){let U=i.current;if(l.canDrag&&U){l.didMove=!0,s&&C(),e.draggableDirection==="x"?l.delta=A.clientX-l.start:l.delta=A.clientY-l.start,l.start!==A.clientX&&(l.canCloseOnClick=!1);let B=e.draggableDirection==="x"?`${l.delta}px, var(--y)`:`0, calc(${l.delta}px + var(--y))`;U.style.transform=`translate3d(${B},0)`,U.style.opacity=`${1-Math.abs(l.delta/l.removalDistance)}`}}function k(){_();let A=i.current;if(l.canDrag&&l.didMove&&A){if(l.canDrag=!1,Math.abs(l.delta)>l.removalDistance){r(!0),e.closeToast(!0),e.collapseAll();return}A.style.transition="transform 0.2s, opacity 0.2s",A.style.removeProperty("transform"),A.style.removeProperty("opacity")}}let E={onPointerDown:w,onPointerUp:p};return c&&d&&(E.onMouseEnter=C,e.stacked||(E.onMouseLeave=v)),h&&(E.onClick=A=>{f&&f(A),l.canCloseOnClick&&m(!0)}),{playToast:v,pauseToast:C,isRunning:s,preventExitTransition:n,toastRef:i,eventHandlers:E}}var Hz=typeof window<"u"?g.useLayoutEffect:g.useEffect,g0=({theme:e,type:s,isLoading:a,...n})=>at.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${s})`,...n});function Gz(e){return at.createElement(g0,{...e},at.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function Vz(e){return at.createElement(g0,{...e},at.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function Wz(e){return at.createElement(g0,{...e},at.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function Yz(e){return at.createElement(g0,{...e},at.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function Qz(){return at.createElement("div",{className:"Toastify__spinner"})}var Rj={info:Vz,warning:Gz,success:Wz,error:Yz,spinner:Qz},qz=e=>e in Rj;function Xz({theme:e,type:s,isLoading:a,icon:n}){let r=null,i={theme:e,type:s};return n===!1||(Ri(n)?r=n({...i,isLoading:a}):g.isValidElement(n)?r=g.cloneElement(n,i):a?r=Rj.spinner():qz(s)&&(r=Rj[s](i))),r}var Kz=e=>{let{isRunning:s,preventExitTransition:a,toastRef:n,eventHandlers:r,playToast:i}=Bz(e),{closeButton:l,children:c,autoClose:d,onClick:m,type:f,hideProgressBar:h,closeToast:y,transition:N,position:w,className:p,style:v,progressClassName:C,updateId:j,role:_,progress:T,rtl:k,toastId:E,deleteToast:A,isIn:U,isLoading:B,closeOnClick:X,theme:$,ariaLabel:O}=e,G=It("Toastify__toast",`Toastify__toast-theme--${$}`,`Toastify__toast--${f}`,{"Toastify__toast--rtl":k},{"Toastify__toast--close-on-click":X}),K=Ri(p)?p({rtl:k,position:w,type:f,defaultClassName:G}):It(G,p),ae=Xz(e),R=!!T||!d,Z={closeToast:y,type:f,theme:$},te=null;return l===!1||(Ri(l)?te=l(Z):g.isValidElement(l)?te=g.cloneElement(l,Z):te=_z(Z)),at.createElement(N,{isIn:U,done:A,position:w,preventExitTransition:a,nodeRef:n,playToast:i},at.createElement("div",{id:E,tabIndex:0,onClick:m,"data-in":U,className:K,...r,style:v,ref:n,...U&&{role:_,"aria-label":O}},ae!=null&&at.createElement("div",{className:It("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!B})},ae),ZD(c,e,!s),te,!e.customProgressBar&&at.createElement(Tz,{...j&&!R?{key:`p-${j}`}:{},rtl:k,theme:$,delay:d,isRunning:s,isIn:U,closeToast:y,hide:h,type:f,className:C,controlledProgress:R,progress:T||0})))},Zz=(e,s=!1)=>({enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:s}),Jz=Sz(Zz("bounce",!0)),eF={position:"top-right",transition:Jz,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&e.code==="KeyT"};function tF(e){let s={...eF,...e},a=e.stacked,[n,r]=g.useState(!0),i=g.useRef(null),{getToastToRender:l,isToastActive:c,count:d}=Fz(s),{className:m,style:f,rtl:h,containerId:y,hotKeys:N}=s;function w(v){let C=It("Toastify__toast-container",`Toastify__toast-container--${v}`,{"Toastify__toast-container--rtl":h});return Ri(m)?m({position:v,rtl:h,defaultClassName:C}):It(C,Oj(m))}function p(){a&&(r(!0),q.play())}return Hz(()=>{var v;if(a){let C=i.current.querySelectorAll('[data-in="true"]'),j=12,_=(v=s.position)==null?void 0:v.includes("top"),T=0,k=0;Array.from(C).reverse().forEach((E,A)=>{let U=E;U.classList.add("Toastify__toast--stacked"),A>0&&(U.dataset.collapsed=`${n}`),U.dataset.pos||(U.dataset.pos=_?"top":"bot");let B=T*(n?.2:1)+(n?0:j*A);U.style.setProperty("--y",`${_?B:B*-1}px`),U.style.setProperty("--g",`${j}`),U.style.setProperty("--s",`${1-(n?k:0)}`),T+=U.offsetHeight,k+=.025})}},[n,d,a]),g.useEffect(()=>{function v(C){var j;let _=i.current;N(C)&&((j=_.querySelector('[tabIndex="0"]'))==null||j.focus(),r(!1),q.pause()),C.key==="Escape"&&(document.activeElement===_||_!=null&&_.contains(document.activeElement))&&(r(!0),q.play())}return document.addEventListener("keydown",v),()=>{document.removeEventListener("keydown",v)}},[N]),at.createElement("section",{ref:i,className:"Toastify",id:y,onMouseEnter:()=>{a&&(r(!1),q.pause())},onMouseLeave:p,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":s["aria-label"]},l((v,C)=>{let j=C.length?{...f}:{...f,pointerEvents:"none"};return at.createElement("div",{tabIndex:-1,className:w(v),"data-stacked":a,style:j,key:`c-${v}`},C.map(({content:_,props:T})=>at.createElement(Kz,{...T,stacked:a,collapseAll:p,isIn:c(T.toastId,T.containerId),key:`t-${T.key}`},_)))}))}function nM(e,s){return function(){return e.apply(s,arguments)}}const{toString:sF}=Object.prototype,{getPrototypeOf:i1}=Object,{iterator:x0,toStringTag:rM}=Symbol,p0=(e=>s=>{const a=sF.call(s);return e[a]||(e[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),br=e=>(e=e.toLowerCase(),s=>p0(s)===e),y0=e=>s=>typeof s===e,{isArray:hu}=Array,Gd=y0("undefined");function nh(e){return e!==null&&!Gd(e)&&e.constructor!==null&&!Gd(e.constructor)&&Qa(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const iM=br("ArrayBuffer");function aF(e){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(e):s=e&&e.buffer&&iM(e.buffer),s}const nF=y0("string"),Qa=y0("function"),lM=y0("number"),rh=e=>e!==null&&typeof e=="object",rF=e=>e===!0||e===!1,op=e=>{if(p0(e)!=="object")return!1;const s=i1(e);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(rM in e)&&!(x0 in e)},iF=e=>{if(!rh(e)||nh(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},lF=br("Date"),oF=br("File"),cF=br("Blob"),dF=br("FileList"),uF=e=>rh(e)&&Qa(e.pipe),mF=e=>{let s;return e&&(typeof FormData=="function"&&e instanceof FormData||Qa(e.append)&&((s=p0(e))==="formdata"||s==="object"&&Qa(e.toString)&&e.toString()==="[object FormData]"))},fF=br("URLSearchParams"),[hF,gF,xF,pF]=["ReadableStream","Request","Response","Headers"].map(br),yF=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ih(e,s,{allOwnKeys:a=!1}={}){if(e===null||typeof e>"u")return;let n,r;if(typeof e!="object"&&(e=[e]),hu(e))for(n=0,r=e.length;n<r;n++)s.call(null,e[n],n,e);else{if(nh(e))return;const i=a?Object.getOwnPropertyNames(e):Object.keys(e),l=i.length;let c;for(n=0;n<l;n++)c=i[n],s.call(null,e[c],c,e)}}function oM(e,s){if(nh(e))return null;s=s.toLowerCase();const a=Object.keys(e);let n=a.length,r;for(;n-- >0;)if(r=a[n],s===r.toLowerCase())return r;return null}const Ho=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,cM=e=>!Gd(e)&&e!==Ho;function Uj(){const{caseless:e,skipUndefined:s}=cM(this)&&this||{},a={},n=(r,i)=>{const l=e&&oM(a,i)||i;op(a[l])&&op(r)?a[l]=Uj(a[l],r):op(r)?a[l]=Uj({},r):hu(r)?a[l]=r.slice():(!s||!Gd(r))&&(a[l]=r)};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&ih(arguments[r],n);return a}const bF=(e,s,a,{allOwnKeys:n}={})=>(ih(s,(r,i)=>{a&&Qa(r)?e[i]=nM(r,a):e[i]=r},{allOwnKeys:n}),e),vF=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),NF=(e,s,a,n)=>{e.prototype=Object.create(s.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:s.prototype}),a&&Object.assign(e.prototype,a)},wF=(e,s,a,n)=>{let r,i,l;const c={};if(s=s||{},e==null)return s;do{for(r=Object.getOwnPropertyNames(e),i=r.length;i-- >0;)l=r[i],(!n||n(l,e,s))&&!c[l]&&(s[l]=e[l],c[l]=!0);e=a!==!1&&i1(e)}while(e&&(!a||a(e,s))&&e!==Object.prototype);return s},jF=(e,s,a)=>{e=String(e),(a===void 0||a>e.length)&&(a=e.length),a-=s.length;const n=e.indexOf(s,a);return n!==-1&&n===a},CF=e=>{if(!e)return null;if(hu(e))return e;let s=e.length;if(!lM(s))return null;const a=new Array(s);for(;s-- >0;)a[s]=e[s];return a},SF=(e=>s=>e&&s instanceof e)(typeof Uint8Array<"u"&&i1(Uint8Array)),_F=(e,s)=>{const n=(e&&e[x0]).call(e);let r;for(;(r=n.next())&&!r.done;){const i=r.value;s.call(e,i[0],i[1])}},TF=(e,s)=>{let a;const n=[];for(;(a=e.exec(s))!==null;)n.push(a);return n},EF=br("HTMLFormElement"),AF=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,n,r){return n.toUpperCase()+r}),pA=(({hasOwnProperty:e})=>(s,a)=>e.call(s,a))(Object.prototype),LF=br("RegExp"),dM=(e,s)=>{const a=Object.getOwnPropertyDescriptors(e),n={};ih(a,(r,i)=>{let l;(l=s(r,i,e))!==!1&&(n[i]=l||r)}),Object.defineProperties(e,n)},kF=e=>{dM(e,(s,a)=>{if(Qa(e)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const n=e[a];if(Qa(n)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},DF=(e,s)=>{const a={},n=r=>{r.forEach(i=>{a[i]=!0})};return hu(e)?n(e):n(String(e).split(s)),a},MF=()=>{},PF=(e,s)=>e!=null&&Number.isFinite(e=+e)?e:s;function OF(e){return!!(e&&Qa(e.append)&&e[rM]==="FormData"&&e[x0])}const IF=e=>{const s=new Array(10),a=(n,r)=>{if(rh(n)){if(s.indexOf(n)>=0)return;if(nh(n))return n;if(!("toJSON"in n)){s[r]=n;const i=hu(n)?[]:{};return ih(n,(l,c)=>{const d=a(l,r+1);!Gd(d)&&(i[c]=d)}),s[r]=void 0,i}}return n};return a(e,0)},$F=br("AsyncFunction"),RF=e=>e&&(rh(e)||Qa(e))&&Qa(e.then)&&Qa(e.catch),uM=((e,s)=>e?setImmediate:s?((a,n)=>(Ho.addEventListener("message",({source:r,data:i})=>{r===Ho&&i===a&&n.length&&n.shift()()},!1),r=>{n.push(r),Ho.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",Qa(Ho.postMessage)),UF=typeof queueMicrotask<"u"?queueMicrotask.bind(Ho):typeof process<"u"&&process.nextTick||uM,zF=e=>e!=null&&Qa(e[x0]),Ge={isArray:hu,isArrayBuffer:iM,isBuffer:nh,isFormData:mF,isArrayBufferView:aF,isString:nF,isNumber:lM,isBoolean:rF,isObject:rh,isPlainObject:op,isEmptyObject:iF,isReadableStream:hF,isRequest:gF,isResponse:xF,isHeaders:pF,isUndefined:Gd,isDate:lF,isFile:oF,isBlob:cF,isRegExp:LF,isFunction:Qa,isStream:uF,isURLSearchParams:fF,isTypedArray:SF,isFileList:dF,forEach:ih,merge:Uj,extend:bF,trim:yF,stripBOM:vF,inherits:NF,toFlatObject:wF,kindOf:p0,kindOfTest:br,endsWith:jF,toArray:CF,forEachEntry:_F,matchAll:TF,isHTMLForm:EF,hasOwnProperty:pA,hasOwnProp:pA,reduceDescriptors:dM,freezeMethods:kF,toObjectSet:DF,toCamelCase:AF,noop:MF,toFiniteNumber:PF,findKey:oM,global:Ho,isContextDefined:cM,isSpecCompliantForm:OF,toJSONObject:IF,isAsyncFn:$F,isThenable:RF,setImmediate:uM,asap:UF,isIterable:zF};function Tt(e,s,a,n,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",s&&(this.code=s),a&&(this.config=a),n&&(this.request=n),r&&(this.response=r,this.status=r.status?r.status:null)}Ge.inherits(Tt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ge.toJSONObject(this.config),code:this.code,status:this.status}}});const mM=Tt.prototype,fM={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{fM[e]={value:e}});Object.defineProperties(Tt,fM);Object.defineProperty(mM,"isAxiosError",{value:!0});Tt.from=(e,s,a,n,r,i)=>{const l=Object.create(mM);Ge.toFlatObject(e,l,function(f){return f!==Error.prototype},m=>m!=="isAxiosError");const c=e&&e.message?e.message:"Error",d=s==null&&e?e.code:s;return Tt.call(l,c,d,a,n,r),e&&l.cause==null&&Object.defineProperty(l,"cause",{value:e,configurable:!0}),l.name=e&&e.name||"Error",i&&Object.assign(l,i),l};const FF=null;function zj(e){return Ge.isPlainObject(e)||Ge.isArray(e)}function hM(e){return Ge.endsWith(e,"[]")?e.slice(0,-2):e}function yA(e,s,a){return e?e.concat(s).map(function(r,i){return r=hM(r),!a&&i?"["+r+"]":r}).join(a?".":""):s}function BF(e){return Ge.isArray(e)&&!e.some(zj)}const HF=Ge.toFlatObject(Ge,{},null,function(s){return/^is[A-Z]/.test(s)});function b0(e,s,a){if(!Ge.isObject(e))throw new TypeError("target must be an object");s=s||new FormData,a=Ge.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,v){return!Ge.isUndefined(v[p])});const n=a.metaTokens,r=a.visitor||f,i=a.dots,l=a.indexes,d=(a.Blob||typeof Blob<"u"&&Blob)&&Ge.isSpecCompliantForm(s);if(!Ge.isFunction(r))throw new TypeError("visitor must be a function");function m(w){if(w===null)return"";if(Ge.isDate(w))return w.toISOString();if(Ge.isBoolean(w))return w.toString();if(!d&&Ge.isBlob(w))throw new Tt("Blob is not supported. Use a Buffer instead.");return Ge.isArrayBuffer(w)||Ge.isTypedArray(w)?d&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function f(w,p,v){let C=w;if(w&&!v&&typeof w=="object"){if(Ge.endsWith(p,"{}"))p=n?p:p.slice(0,-2),w=JSON.stringify(w);else if(Ge.isArray(w)&&BF(w)||(Ge.isFileList(w)||Ge.endsWith(p,"[]"))&&(C=Ge.toArray(w)))return p=hM(p),C.forEach(function(_,T){!(Ge.isUndefined(_)||_===null)&&s.append(l===!0?yA([p],T,i):l===null?p:p+"[]",m(_))}),!1}return zj(w)?!0:(s.append(yA(v,p,i),m(w)),!1)}const h=[],y=Object.assign(HF,{defaultVisitor:f,convertValue:m,isVisitable:zj});function N(w,p){if(!Ge.isUndefined(w)){if(h.indexOf(w)!==-1)throw Error("Circular reference detected in "+p.join("."));h.push(w),Ge.forEach(w,function(C,j){(!(Ge.isUndefined(C)||C===null)&&r.call(s,C,Ge.isString(j)?j.trim():j,p,y))===!0&&N(C,p?p.concat(j):[j])}),h.pop()}}if(!Ge.isObject(e))throw new TypeError("data must be an object");return N(e),s}function bA(e){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return s[n]})}function l1(e,s){this._pairs=[],e&&b0(e,this,s)}const gM=l1.prototype;gM.append=function(s,a){this._pairs.push([s,a])};gM.toString=function(s){const a=s?function(n){return s.call(this,n,bA)}:bA;return this._pairs.map(function(r){return a(r[0])+"="+a(r[1])},"").join("&")};function GF(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function xM(e,s,a){if(!s)return e;const n=a&&a.encode||GF;Ge.isFunction(a)&&(a={serialize:a});const r=a&&a.serialize;let i;if(r?i=r(s,a):i=Ge.isURLSearchParams(s)?s.toString():new l1(s,a).toString(n),i){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class vA{constructor(){this.handlers=[]}use(s,a,n){return this.handlers.push({fulfilled:s,rejected:a,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){Ge.forEach(this.handlers,function(n){n!==null&&s(n)})}}const pM={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},VF=typeof URLSearchParams<"u"?URLSearchParams:l1,WF=typeof FormData<"u"?FormData:null,YF=typeof Blob<"u"?Blob:null,QF={isBrowser:!0,classes:{URLSearchParams:VF,FormData:WF,Blob:YF},protocols:["http","https","file","blob","url","data"]},o1=typeof window<"u"&&typeof document<"u",Fj=typeof navigator=="object"&&navigator||void 0,qF=o1&&(!Fj||["ReactNative","NativeScript","NS"].indexOf(Fj.product)<0),XF=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",KF=o1&&window.location.href||"http://localhost",ZF=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:o1,hasStandardBrowserEnv:qF,hasStandardBrowserWebWorkerEnv:XF,navigator:Fj,origin:KF},Symbol.toStringTag,{value:"Module"})),Ca={...ZF,...QF};function JF(e,s){return b0(e,new Ca.classes.URLSearchParams,{visitor:function(a,n,r,i){return Ca.isNode&&Ge.isBuffer(a)?(this.append(n,a.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...s})}function e8(e){return Ge.matchAll(/\w+|\[(\w*)]/g,e).map(s=>s[0]==="[]"?"":s[1]||s[0])}function t8(e){const s={},a=Object.keys(e);let n;const r=a.length;let i;for(n=0;n<r;n++)i=a[n],s[i]=e[i];return s}function yM(e){function s(a,n,r,i){let l=a[i++];if(l==="__proto__")return!0;const c=Number.isFinite(+l),d=i>=a.length;return l=!l&&Ge.isArray(r)?r.length:l,d?(Ge.hasOwnProp(r,l)?r[l]=[r[l],n]:r[l]=n,!c):((!r[l]||!Ge.isObject(r[l]))&&(r[l]=[]),s(a,n,r[l],i)&&Ge.isArray(r[l])&&(r[l]=t8(r[l])),!c)}if(Ge.isFormData(e)&&Ge.isFunction(e.entries)){const a={};return Ge.forEachEntry(e,(n,r)=>{s(e8(n),r,a,0)}),a}return null}function s8(e,s,a){if(Ge.isString(e))try{return(s||JSON.parse)(e),Ge.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(a||JSON.stringify)(e)}const lh={transitional:pM,adapter:["xhr","http","fetch"],transformRequest:[function(s,a){const n=a.getContentType()||"",r=n.indexOf("application/json")>-1,i=Ge.isObject(s);if(i&&Ge.isHTMLForm(s)&&(s=new FormData(s)),Ge.isFormData(s))return r?JSON.stringify(yM(s)):s;if(Ge.isArrayBuffer(s)||Ge.isBuffer(s)||Ge.isStream(s)||Ge.isFile(s)||Ge.isBlob(s)||Ge.isReadableStream(s))return s;if(Ge.isArrayBufferView(s))return s.buffer;if(Ge.isURLSearchParams(s))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let c;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return JF(s,this.formSerializer).toString();if((c=Ge.isFileList(s))||n.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return b0(c?{"files[]":s}:s,d&&new d,this.formSerializer)}}return i||r?(a.setContentType("application/json",!1),s8(s)):s}],transformResponse:[function(s){const a=this.transitional||lh.transitional,n=a&&a.forcedJSONParsing,r=this.responseType==="json";if(Ge.isResponse(s)||Ge.isReadableStream(s))return s;if(s&&Ge.isString(s)&&(n&&!this.responseType||r)){const l=!(a&&a.silentJSONParsing)&&r;try{return JSON.parse(s,this.parseReviver)}catch(c){if(l)throw c.name==="SyntaxError"?Tt.from(c,Tt.ERR_BAD_RESPONSE,this,null,this.response):c}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ca.classes.FormData,Blob:Ca.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ge.forEach(["delete","get","head","post","put","patch"],e=>{lh.headers[e]={}});const a8=Ge.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),n8=e=>{const s={};let a,n,r;return e&&e.split(`
`).forEach(function(l){r=l.indexOf(":"),a=l.substring(0,r).trim().toLowerCase(),n=l.substring(r+1).trim(),!(!a||s[a]&&a8[a])&&(a==="set-cookie"?s[a]?s[a].push(n):s[a]=[n]:s[a]=s[a]?s[a]+", "+n:n)}),s},NA=Symbol("internals");function hm(e){return e&&String(e).trim().toLowerCase()}function cp(e){return e===!1||e==null?e:Ge.isArray(e)?e.map(cp):String(e)}function r8(e){const s=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=a.exec(e);)s[n[1]]=n[2];return s}const i8=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function cN(e,s,a,n,r){if(Ge.isFunction(n))return n.call(this,s,a);if(r&&(s=a),!!Ge.isString(s)){if(Ge.isString(n))return s.indexOf(n)!==-1;if(Ge.isRegExp(n))return n.test(s)}}function l8(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,a,n)=>a.toUpperCase()+n)}function o8(e,s){const a=Ge.toCamelCase(" "+s);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+a,{value:function(r,i,l){return this[n].call(this,s,r,i,l)},configurable:!0})})}let qa=class{constructor(s){s&&this.set(s)}set(s,a,n){const r=this;function i(c,d,m){const f=hm(d);if(!f)throw new Error("header name must be a non-empty string");const h=Ge.findKey(r,f);(!h||r[h]===void 0||m===!0||m===void 0&&r[h]!==!1)&&(r[h||d]=cp(c))}const l=(c,d)=>Ge.forEach(c,(m,f)=>i(m,f,d));if(Ge.isPlainObject(s)||s instanceof this.constructor)l(s,a);else if(Ge.isString(s)&&(s=s.trim())&&!i8(s))l(n8(s),a);else if(Ge.isObject(s)&&Ge.isIterable(s)){let c={},d,m;for(const f of s){if(!Ge.isArray(f))throw TypeError("Object iterator must return a key-value pair");c[m=f[0]]=(d=c[m])?Ge.isArray(d)?[...d,f[1]]:[d,f[1]]:f[1]}l(c,a)}else s!=null&&i(a,s,n);return this}get(s,a){if(s=hm(s),s){const n=Ge.findKey(this,s);if(n){const r=this[n];if(!a)return r;if(a===!0)return r8(r);if(Ge.isFunction(a))return a.call(this,r,n);if(Ge.isRegExp(a))return a.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,a){if(s=hm(s),s){const n=Ge.findKey(this,s);return!!(n&&this[n]!==void 0&&(!a||cN(this,this[n],n,a)))}return!1}delete(s,a){const n=this;let r=!1;function i(l){if(l=hm(l),l){const c=Ge.findKey(n,l);c&&(!a||cN(n,n[c],c,a))&&(delete n[c],r=!0)}}return Ge.isArray(s)?s.forEach(i):i(s),r}clear(s){const a=Object.keys(this);let n=a.length,r=!1;for(;n--;){const i=a[n];(!s||cN(this,this[i],i,s,!0))&&(delete this[i],r=!0)}return r}normalize(s){const a=this,n={};return Ge.forEach(this,(r,i)=>{const l=Ge.findKey(n,i);if(l){a[l]=cp(r),delete a[i];return}const c=s?l8(i):String(i).trim();c!==i&&delete a[i],a[c]=cp(r),n[c]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const a=Object.create(null);return Ge.forEach(this,(n,r)=>{n!=null&&n!==!1&&(a[r]=s&&Ge.isArray(n)?n.join(", "):n)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,a])=>s+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...a){const n=new this(s);return a.forEach(r=>n.set(r)),n}static accessor(s){const n=(this[NA]=this[NA]={accessors:{}}).accessors,r=this.prototype;function i(l){const c=hm(l);n[c]||(o8(r,l),n[c]=!0)}return Ge.isArray(s)?s.forEach(i):i(s),this}};qa.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ge.reduceDescriptors(qa.prototype,({value:e},s)=>{let a=s[0].toUpperCase()+s.slice(1);return{get:()=>e,set(n){this[a]=n}}});Ge.freezeMethods(qa);function dN(e,s){const a=this||lh,n=s||a,r=qa.from(n.headers);let i=n.data;return Ge.forEach(e,function(c){i=c.call(a,i,r.normalize(),s?s.status:void 0)}),r.normalize(),i}function bM(e){return!!(e&&e.__CANCEL__)}function gu(e,s,a){Tt.call(this,e??"canceled",Tt.ERR_CANCELED,s,a),this.name="CanceledError"}Ge.inherits(gu,Tt,{__CANCEL__:!0});function vM(e,s,a){const n=a.config.validateStatus;!a.status||!n||n(a.status)?e(a):s(new Tt("Request failed with status code "+a.status,[Tt.ERR_BAD_REQUEST,Tt.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function c8(e){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return s&&s[1]||""}function d8(e,s){e=e||10;const a=new Array(e),n=new Array(e);let r=0,i=0,l;return s=s!==void 0?s:1e3,function(d){const m=Date.now(),f=n[i];l||(l=m),a[r]=d,n[r]=m;let h=i,y=0;for(;h!==r;)y+=a[h++],h=h%e;if(r=(r+1)%e,r===i&&(i=(i+1)%e),m-l<s)return;const N=f&&m-f;return N?Math.round(y*1e3/N):void 0}}function u8(e,s){let a=0,n=1e3/s,r,i;const l=(m,f=Date.now())=>{a=f,r=null,i&&(clearTimeout(i),i=null),e(...m)};return[(...m)=>{const f=Date.now(),h=f-a;h>=n?l(m,f):(r=m,i||(i=setTimeout(()=>{i=null,l(r)},n-h)))},()=>r&&l(r)]}const Np=(e,s,a=3)=>{let n=0;const r=d8(50,250);return u8(i=>{const l=i.loaded,c=i.lengthComputable?i.total:void 0,d=l-n,m=r(d),f=l<=c;n=l;const h={loaded:l,total:c,progress:c?l/c:void 0,bytes:d,rate:m||void 0,estimated:m&&c&&f?(c-l)/m:void 0,event:i,lengthComputable:c!=null,[s?"download":"upload"]:!0};e(h)},a)},wA=(e,s)=>{const a=e!=null;return[n=>s[0]({lengthComputable:a,total:e,loaded:n}),s[1]]},jA=e=>(...s)=>Ge.asap(()=>e(...s)),m8=Ca.hasStandardBrowserEnv?((e,s)=>a=>(a=new URL(a,Ca.origin),e.protocol===a.protocol&&e.host===a.host&&(s||e.port===a.port)))(new URL(Ca.origin),Ca.navigator&&/(msie|trident)/i.test(Ca.navigator.userAgent)):()=>!0,f8=Ca.hasStandardBrowserEnv?{write(e,s,a,n,r,i){const l=[e+"="+encodeURIComponent(s)];Ge.isNumber(a)&&l.push("expires="+new Date(a).toGMTString()),Ge.isString(n)&&l.push("path="+n),Ge.isString(r)&&l.push("domain="+r),i===!0&&l.push("secure"),document.cookie=l.join("; ")},read(e){const s=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function h8(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function g8(e,s){return s?e.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):e}function NM(e,s,a){let n=!h8(s);return e&&(n||a==!1)?g8(e,s):s}const CA=e=>e instanceof qa?{...e}:e;function nc(e,s){s=s||{};const a={};function n(m,f,h,y){return Ge.isPlainObject(m)&&Ge.isPlainObject(f)?Ge.merge.call({caseless:y},m,f):Ge.isPlainObject(f)?Ge.merge({},f):Ge.isArray(f)?f.slice():f}function r(m,f,h,y){if(Ge.isUndefined(f)){if(!Ge.isUndefined(m))return n(void 0,m,h,y)}else return n(m,f,h,y)}function i(m,f){if(!Ge.isUndefined(f))return n(void 0,f)}function l(m,f){if(Ge.isUndefined(f)){if(!Ge.isUndefined(m))return n(void 0,m)}else return n(void 0,f)}function c(m,f,h){if(h in s)return n(m,f);if(h in e)return n(void 0,m)}const d={url:i,method:i,data:i,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:c,headers:(m,f,h)=>r(CA(m),CA(f),h,!0)};return Ge.forEach(Object.keys({...e,...s}),function(f){const h=d[f]||r,y=h(e[f],s[f],f);Ge.isUndefined(y)&&h!==c||(a[f]=y)}),a}const wM=e=>{const s=nc({},e);let{data:a,withXSRFToken:n,xsrfHeaderName:r,xsrfCookieName:i,headers:l,auth:c}=s;if(s.headers=l=qa.from(l),s.url=xM(NM(s.baseURL,s.url,s.allowAbsoluteUrls),e.params,e.paramsSerializer),c&&l.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),Ge.isFormData(a)){if(Ca.hasStandardBrowserEnv||Ca.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(Ge.isFunction(a.getHeaders)){const d=a.getHeaders(),m=["content-type","content-length"];Object.entries(d).forEach(([f,h])=>{m.includes(f.toLowerCase())&&l.set(f,h)})}}if(Ca.hasStandardBrowserEnv&&(n&&Ge.isFunction(n)&&(n=n(s)),n||n!==!1&&m8(s.url))){const d=r&&i&&f8.read(i);d&&l.set(r,d)}return s},x8=typeof XMLHttpRequest<"u",p8=x8&&function(e){return new Promise(function(a,n){const r=wM(e);let i=r.data;const l=qa.from(r.headers).normalize();let{responseType:c,onUploadProgress:d,onDownloadProgress:m}=r,f,h,y,N,w;function p(){N&&N(),w&&w(),r.cancelToken&&r.cancelToken.unsubscribe(f),r.signal&&r.signal.removeEventListener("abort",f)}let v=new XMLHttpRequest;v.open(r.method.toUpperCase(),r.url,!0),v.timeout=r.timeout;function C(){if(!v)return;const _=qa.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),k={data:!c||c==="text"||c==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:_,config:e,request:v};vM(function(A){a(A),p()},function(A){n(A),p()},k),v=null}"onloadend"in v?v.onloadend=C:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(C)},v.onabort=function(){v&&(n(new Tt("Request aborted",Tt.ECONNABORTED,e,v)),v=null)},v.onerror=function(T){const k=T&&T.message?T.message:"Network Error",E=new Tt(k,Tt.ERR_NETWORK,e,v);E.event=T||null,n(E),v=null},v.ontimeout=function(){let T=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const k=r.transitional||pM;r.timeoutErrorMessage&&(T=r.timeoutErrorMessage),n(new Tt(T,k.clarifyTimeoutError?Tt.ETIMEDOUT:Tt.ECONNABORTED,e,v)),v=null},i===void 0&&l.setContentType(null),"setRequestHeader"in v&&Ge.forEach(l.toJSON(),function(T,k){v.setRequestHeader(k,T)}),Ge.isUndefined(r.withCredentials)||(v.withCredentials=!!r.withCredentials),c&&c!=="json"&&(v.responseType=r.responseType),m&&([y,w]=Np(m,!0),v.addEventListener("progress",y)),d&&v.upload&&([h,N]=Np(d),v.upload.addEventListener("progress",h),v.upload.addEventListener("loadend",N)),(r.cancelToken||r.signal)&&(f=_=>{v&&(n(!_||_.type?new gu(null,e,v):_),v.abort(),v=null)},r.cancelToken&&r.cancelToken.subscribe(f),r.signal&&(r.signal.aborted?f():r.signal.addEventListener("abort",f)));const j=c8(r.url);if(j&&Ca.protocols.indexOf(j)===-1){n(new Tt("Unsupported protocol "+j+":",Tt.ERR_BAD_REQUEST,e));return}v.send(i||null)})},y8=(e,s)=>{const{length:a}=e=e?e.filter(Boolean):[];if(s||a){let n=new AbortController,r;const i=function(m){if(!r){r=!0,c();const f=m instanceof Error?m:this.reason;n.abort(f instanceof Tt?f:new gu(f instanceof Error?f.message:f))}};let l=s&&setTimeout(()=>{l=null,i(new Tt(`timeout ${s} of ms exceeded`,Tt.ETIMEDOUT))},s);const c=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach(m=>{m.unsubscribe?m.unsubscribe(i):m.removeEventListener("abort",i)}),e=null)};e.forEach(m=>m.addEventListener("abort",i));const{signal:d}=n;return d.unsubscribe=()=>Ge.asap(c),d}},b8=function*(e,s){let a=e.byteLength;if(a<s){yield e;return}let n=0,r;for(;n<a;)r=n+s,yield e.slice(n,r),n=r},v8=async function*(e,s){for await(const a of N8(e))yield*b8(a,s)},N8=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const s=e.getReader();try{for(;;){const{done:a,value:n}=await s.read();if(a)break;yield n}}finally{await s.cancel()}},SA=(e,s,a,n)=>{const r=v8(e,s);let i=0,l,c=d=>{l||(l=!0,n&&n(d))};return new ReadableStream({async pull(d){try{const{done:m,value:f}=await r.next();if(m){c(),d.close();return}let h=f.byteLength;if(a){let y=i+=h;a(y)}d.enqueue(new Uint8Array(f))}catch(m){throw c(m),m}},cancel(d){return c(d),r.return()}},{highWaterMark:2})},_A=64*1024,{isFunction:ax}=Ge,w8=(({Request:e,Response:s})=>({Request:e,Response:s}))(Ge.global),{ReadableStream:TA,TextEncoder:EA}=Ge.global,AA=(e,...s)=>{try{return!!e(...s)}catch{return!1}},j8=e=>{e=Ge.merge.call({skipUndefined:!0},w8,e);const{fetch:s,Request:a,Response:n}=e,r=s?ax(s):typeof fetch=="function",i=ax(a),l=ax(n);if(!r)return!1;const c=r&&ax(TA),d=r&&(typeof EA=="function"?(w=>p=>w.encode(p))(new EA):async w=>new Uint8Array(await new a(w).arrayBuffer())),m=i&&c&&AA(()=>{let w=!1;const p=new a(Ca.origin,{body:new TA,method:"POST",get duplex(){return w=!0,"half"}}).headers.has("Content-Type");return w&&!p}),f=l&&c&&AA(()=>Ge.isReadableStream(new n("").body)),h={stream:f&&(w=>w.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(w=>{!h[w]&&(h[w]=(p,v)=>{let C=p&&p[w];if(C)return C.call(p);throw new Tt(`Response type '${w}' is not supported`,Tt.ERR_NOT_SUPPORT,v)})});const y=async w=>{if(w==null)return 0;if(Ge.isBlob(w))return w.size;if(Ge.isSpecCompliantForm(w))return(await new a(Ca.origin,{method:"POST",body:w}).arrayBuffer()).byteLength;if(Ge.isArrayBufferView(w)||Ge.isArrayBuffer(w))return w.byteLength;if(Ge.isURLSearchParams(w)&&(w=w+""),Ge.isString(w))return(await d(w)).byteLength},N=async(w,p)=>{const v=Ge.toFiniteNumber(w.getContentLength());return v??y(p)};return async w=>{let{url:p,method:v,data:C,signal:j,cancelToken:_,timeout:T,onDownloadProgress:k,onUploadProgress:E,responseType:A,headers:U,withCredentials:B="same-origin",fetchOptions:X}=wM(w),$=s||fetch;A=A?(A+"").toLowerCase():"text";let O=y8([j,_&&_.toAbortSignal()],T),G=null;const K=O&&O.unsubscribe&&(()=>{O.unsubscribe()});let ae;try{if(E&&m&&v!=="get"&&v!=="head"&&(ae=await N(U,C))!==0){let W=new a(p,{method:"POST",body:C,duplex:"half"}),ee;if(Ge.isFormData(C)&&(ee=W.headers.get("content-type"))&&U.setContentType(ee),W.body){const[J,he]=wA(ae,Np(jA(E)));C=SA(W.body,_A,J,he)}}Ge.isString(B)||(B=B?"include":"omit");const R=i&&"credentials"in a.prototype,Z={...X,signal:O,method:v.toUpperCase(),headers:U.normalize().toJSON(),body:C,duplex:"half",credentials:R?B:void 0};G=i&&new a(p,Z);let te=await(i?$(G,X):$(p,Z));const ge=f&&(A==="stream"||A==="response");if(f&&(k||ge&&K)){const W={};["status","statusText","headers"].forEach(be=>{W[be]=te[be]});const ee=Ge.toFiniteNumber(te.headers.get("content-length")),[J,he]=k&&wA(ee,Np(jA(k),!0))||[];te=new n(SA(te.body,_A,J,()=>{he&&he(),K&&K()}),W)}A=A||"text";let le=await h[Ge.findKey(h,A)||"text"](te,w);return!ge&&K&&K(),await new Promise((W,ee)=>{vM(W,ee,{data:le,headers:qa.from(te.headers),status:te.status,statusText:te.statusText,config:w,request:G})})}catch(R){throw K&&K(),R&&R.name==="TypeError"&&/Load failed|fetch/i.test(R.message)?Object.assign(new Tt("Network Error",Tt.ERR_NETWORK,w,G),{cause:R.cause||R}):Tt.from(R,R&&R.code,w,G)}}},C8=new Map,jM=e=>{let s=e?e.env:{};const{fetch:a,Request:n,Response:r}=s,i=[n,r,a];let l=i.length,c=l,d,m,f=C8;for(;c--;)d=i[c],m=f.get(d),m===void 0&&f.set(d,m=c?new Map:j8(s)),f=m;return m};jM();const Bj={http:FF,xhr:p8,fetch:{get:jM}};Ge.forEach(Bj,(e,s)=>{if(e){try{Object.defineProperty(e,"name",{value:s})}catch{}Object.defineProperty(e,"adapterName",{value:s})}});const LA=e=>`- ${e}`,S8=e=>Ge.isFunction(e)||e===null||e===!1,CM={getAdapter:(e,s)=>{e=Ge.isArray(e)?e:[e];const{length:a}=e;let n,r;const i={};for(let l=0;l<a;l++){n=e[l];let c;if(r=n,!S8(n)&&(r=Bj[(c=String(n)).toLowerCase()],r===void 0))throw new Tt(`Unknown adapter '${c}'`);if(r&&(Ge.isFunction(r)||(r=r.get(s))))break;i[c||"#"+l]=r}if(!r){const l=Object.entries(i).map(([d,m])=>`adapter ${d} `+(m===!1?"is not supported by the environment":"is not available in the build"));let c=a?l.length>1?`since :
`+l.map(LA).join(`
`):" "+LA(l[0]):"as no adapter specified";throw new Tt("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return r},adapters:Bj};function uN(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new gu(null,e)}function kA(e){return uN(e),e.headers=qa.from(e.headers),e.data=dN.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),CM.getAdapter(e.adapter||lh.adapter,e)(e).then(function(n){return uN(e),n.data=dN.call(e,e.transformResponse,n),n.headers=qa.from(n.headers),n},function(n){return bM(n)||(uN(e),n&&n.response&&(n.response.data=dN.call(e,e.transformResponse,n.response),n.response.headers=qa.from(n.response.headers))),Promise.reject(n)})}const SM="1.12.2",v0={};["object","boolean","number","function","string","symbol"].forEach((e,s)=>{v0[e]=function(n){return typeof n===e||"a"+(s<1?"n ":" ")+e}});const DA={};v0.transitional=function(s,a,n){function r(i,l){return"[Axios v"+SM+"] Transitional option '"+i+"'"+l+(n?". "+n:"")}return(i,l,c)=>{if(s===!1)throw new Tt(r(l," has been removed"+(a?" in "+a:"")),Tt.ERR_DEPRECATED);return a&&!DA[l]&&(DA[l]=!0,console.warn(r(l," has been deprecated since v"+a+" and will be removed in the near future"))),s?s(i,l,c):!0}};v0.spelling=function(s){return(a,n)=>(console.warn(`${n} is likely a misspelling of ${s}`),!0)};function _8(e,s,a){if(typeof e!="object")throw new Tt("options must be an object",Tt.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let r=n.length;for(;r-- >0;){const i=n[r],l=s[i];if(l){const c=e[i],d=c===void 0||l(c,i,e);if(d!==!0)throw new Tt("option "+i+" must be "+d,Tt.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new Tt("Unknown option "+i,Tt.ERR_BAD_OPTION)}}const dp={assertOptions:_8,validators:v0},Tr=dp.validators;let Xo=class{constructor(s){this.defaults=s||{},this.interceptors={request:new vA,response:new vA}}async request(s,a){try{return await this._request(s,a)}catch(n){if(n instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const i=r.stack?r.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(s,a){typeof s=="string"?(a=a||{},a.url=s):a=s||{},a=nc(this.defaults,a);const{transitional:n,paramsSerializer:r,headers:i}=a;n!==void 0&&dp.assertOptions(n,{silentJSONParsing:Tr.transitional(Tr.boolean),forcedJSONParsing:Tr.transitional(Tr.boolean),clarifyTimeoutError:Tr.transitional(Tr.boolean)},!1),r!=null&&(Ge.isFunction(r)?a.paramsSerializer={serialize:r}:dp.assertOptions(r,{encode:Tr.function,serialize:Tr.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),dp.assertOptions(a,{baseUrl:Tr.spelling("baseURL"),withXsrfToken:Tr.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let l=i&&Ge.merge(i.common,i[a.method]);i&&Ge.forEach(["delete","get","head","post","put","patch","common"],w=>{delete i[w]}),a.headers=qa.concat(l,i);const c=[];let d=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(a)===!1||(d=d&&p.synchronous,c.unshift(p.fulfilled,p.rejected))});const m=[];this.interceptors.response.forEach(function(p){m.push(p.fulfilled,p.rejected)});let f,h=0,y;if(!d){const w=[kA.bind(this),void 0];for(w.unshift(...c),w.push(...m),y=w.length,f=Promise.resolve(a);h<y;)f=f.then(w[h++],w[h++]);return f}y=c.length;let N=a;for(;h<y;){const w=c[h++],p=c[h++];try{N=w(N)}catch(v){p.call(this,v);break}}try{f=kA.call(this,N)}catch(w){return Promise.reject(w)}for(h=0,y=m.length;h<y;)f=f.then(m[h++],m[h++]);return f}getUri(s){s=nc(this.defaults,s);const a=NM(s.baseURL,s.url,s.allowAbsoluteUrls);return xM(a,s.params,s.paramsSerializer)}};Ge.forEach(["delete","get","head","options"],function(s){Xo.prototype[s]=function(a,n){return this.request(nc(n||{},{method:s,url:a,data:(n||{}).data}))}});Ge.forEach(["post","put","patch"],function(s){function a(n){return function(i,l,c){return this.request(nc(c||{},{method:s,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:l}))}}Xo.prototype[s]=a(),Xo.prototype[s+"Form"]=a(!0)});let T8=class _M{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(i){a=i});const n=this;this.promise.then(r=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](r);n._listeners=null}),this.promise.then=r=>{let i;const l=new Promise(c=>{n.subscribe(c),i=c}).then(r);return l.cancel=function(){n.unsubscribe(i)},l},s(function(i,l,c){n.reason||(n.reason=new gu(i,l,c),a(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const a=this._listeners.indexOf(s);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const s=new AbortController,a=n=>{s.abort(n)};return this.subscribe(a),s.signal.unsubscribe=()=>this.unsubscribe(a),s.signal}static source(){let s;return{token:new _M(function(r){s=r}),cancel:s}}};function E8(e){return function(a){return e.apply(null,a)}}function A8(e){return Ge.isObject(e)&&e.isAxiosError===!0}const Hj={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Hj).forEach(([e,s])=>{Hj[s]=e});function TM(e){const s=new Xo(e),a=nM(Xo.prototype.request,s);return Ge.extend(a,Xo.prototype,s,{allOwnKeys:!0}),Ge.extend(a,s,null,{allOwnKeys:!0}),a.create=function(r){return TM(nc(e,r))},a}const zs=TM(lh);zs.Axios=Xo;zs.CanceledError=gu;zs.CancelToken=T8;zs.isCancel=bM;zs.VERSION=SM;zs.toFormData=b0;zs.AxiosError=Tt;zs.Cancel=zs.CanceledError;zs.all=function(s){return Promise.all(s)};zs.spread=E8;zs.isAxiosError=A8;zs.mergeConfig=nc;zs.AxiosHeaders=qa;zs.formToJSON=e=>yM(Ge.isHTMLForm(e)?new FormData(e):e);zs.getAdapter=CM.getAdapter;zs.HttpStatusCode=Hj;zs.default=zs;const{Axios:Z0e,AxiosError:J0e,CanceledError:eye,isCancel:tye,CancelToken:sye,VERSION:aye,all:nye,Cancel:rye,isAxiosError:iye,spread:lye,toFormData:oye,AxiosHeaders:cye,HttpStatusCode:dye,formToJSON:uye,getAdapter:mye,mergeConfig:fye}=zs,L8="https://crm.sari-sari.com",se=zs.create({baseURL:`${L8}/api`,withCredentials:!0,headers:{"Content-Type":"application/json"}});se.interceptors.request.use(e=>(console.log(` [${e.method?.toUpperCase()}] ${e.url}`),e),e=>Promise.reject(e));se.interceptors.response.use(e=>e,e=>(e.response?.status===401&&(console.warn(" Unauthorized  possible expired token or not logged in."),localStorage.clear(),window.location.href="/login"),Promise.reject(e)));const k8="isLoggedIn",MA="userRole",er=()=>{const[e,s]=g.useState(!1),[a,n]=g.useState(""),r=it();g.useEffect(()=>{const m=localStorage.getItem(MA);m?(s(!0),n(m)):l()},[]);const i=m=>{localStorage.setItem(MA,m.role),localStorage.setItem(k8,!0),s(!0),n(m.role)},l=()=>{localStorage.clear(),s(!1),n("")};return{isLoggedIn:e,logout:async()=>{try{await se.post("/auth/logout")}catch(m){console.log("Failed to logout from server:",m)}l(),r("/")},userRole:a,setUserRole:n,login:m=>{i(m),m.role==="CEO"||m.role==="Admin"?r("/admin"):m.role==="Manager"?r("/manager/dashboard"):r("/")}}},gm=({children:e,requiredRole:s})=>{const{isLoggedIn:a,userRole:n}=er();if(!a)return t.jsx(bn,{to:"/",replace:!0});if(!s)return n.toUpperCase()==="ADMIN"||n.toUpperCase()==="CEO"?t.jsx(bn,{to:"/admin/dashboard",replace:!0}):n==="GROUP MANAGER"?t.jsx(bn,{to:"/group-manager/dashboard",replace:!0}):n==="MANAGER"?t.jsx(bn,{to:"/manager/dashboard",replace:!0}):n==="SALES"?t.jsx(bn,{to:"/sales/dashboard",replace:!0}):t.jsx(bn,{to:"/",replace:!0});const r=n.toLowerCase(),i=s.toLowerCase();return r!==i?t.jsx(bn,{to:"/",replace:!0}):e};var EM={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},PA=at.createContext&&at.createContext(EM),D8=["attr","size","title"];function M8(e,s){if(e==null)return{};var a=P8(e,s),n,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function P8(e,s){if(e==null)return{};var a={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(s.indexOf(n)>=0)continue;a[n]=e[n]}return a}function wp(){return wp=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},wp.apply(this,arguments)}function OA(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);s&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,n)}return a}function jp(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?OA(Object(a),!0).forEach(function(n){O8(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):OA(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function O8(e,s,a){return s=I8(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function I8(e){var s=$8(e,"string");return typeof s=="symbol"?s:s+""}function $8(e,s){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,s);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}function AM(e){return e&&e.map((s,a)=>at.createElement(s.tag,jp({key:a},s.attr),AM(s.child)))}function ct(e){return s=>at.createElement(R8,wp({attr:jp({},e.attr)},s),AM(e.child))}function R8(e){var s=a=>{var{attr:n,size:r,title:i}=e,l=M8(e,D8),c=r||a.size||"1em",d;return a.className&&(d=a.className),e.className&&(d=(d?d+" ":"")+e.className),at.createElement("svg",wp({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,n,l,{className:d,style:jp(jp({color:e.color||a.color},a.style),e.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),i&&at.createElement("title",null,i),e.children)};return PA!==void 0?at.createElement(PA.Consumer,null,a=>s(a)):s(EM)}function Qn(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(e)}function oh(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(e)}function c1(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"7",y1:"7",x2:"17",y2:"17"},child:[]},{tag:"polyline",attr:{points:"17 7 17 17 7 17"},child:[]}]})(e)}function U8(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(e)}function d1(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 5 19 12 12 19"},child:[]}]})(e)}function N0(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"7",y1:"17",x2:"17",y2:"7"},child:[]},{tag:"polyline",attr:{points:"7 7 17 7 17 17"},child:[]}]})(e)}function ch(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"},child:[]},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"},child:[]}]})(e)}function u1(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"},child:[]}]})(e)}function Es(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"},child:[]}]})(e)}function dt(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(e)}function LM(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"13",r:"4"},child:[]}]})(e)}function As(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(e)}function ts(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 11 12 14 22 4"},child:[]},{tag:"path",attr:{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"},child:[]}]})(e)}function kM(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(e)}function Xa(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(e)}function z8(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"},child:[]}]})(e)}function F8(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"},child:[]}]})(e)}function Ta(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"},child:[]},{tag:"rect",attr:{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"},child:[]}]})(e)}function ya(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(e)}function vr(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(e)}function Xr(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"7 10 12 15 17 10"},child:[]},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"},child:[]}]})(e)}function hs(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(e)}function ys(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(e)}function rc(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},child:[]},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"},child:[]}]})(e)}function ic(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(e)}function en(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(e)}function B8(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(e)}function H8(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"14",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"3",y:"14",width:"7",height:"7"},child:[]}]})(e)}function dh(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(e)}function DM(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"},child:[]}]})(e)}function G8(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"3",y1:"9",x2:"21",y2:"9"},child:[]},{tag:"line",attr:{x1:"9",y1:"21",x2:"9",y2:"9"},child:[]}]})(e)}function Ur(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(e)}function js(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(e)}function V8(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(e)}function m1(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(e)}function Ea(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M15.05 5A5 5 0 0 1 19 8.95M15.05 1A9 9 0 0 1 23 8.94m-1 7.98v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(e)}function ft(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(e)}function Lt(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(e)}function MM(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},child:[]},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"},child:[]},{tag:"polyline",attr:{points:"7 3 7 8 15 8"},child:[]}]})(e)}function yt(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(e)}function W8(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"},child:[]},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"},child:[]}]})(e)}function f1(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(e)}function h1(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"},child:[]}]})(e)}function Bl(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"5",y:"2",width:"14",height:"20",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"12",y1:"18",x2:"12.01",y2:"18"},child:[]}]})(e)}function qi(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"},child:[]}]})(e)}function sn(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"6"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"2"},child:[]}]})(e)}function Nt(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(e)}function Vd(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(e)}function Wr(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"polyline",attr:{points:"17 11 19 13 23 9"},child:[]}]})(e)}function Cs(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"20",y1:"8",x2:"20",y2:"14"},child:[]},{tag:"line",attr:{x1:"23",y1:"11",x2:"17",y2:"11"},child:[]}]})(e)}function Yr(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"18",y1:"8",x2:"23",y2:"13"},child:[]},{tag:"line",attr:{x1:"23",y1:"8",x2:"18",y2:"13"},child:[]}]})(e)}function qt(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(e)}function Jt(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(e)}function tr(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"15",y1:"9",x2:"9",y2:"15"},child:[]},{tag:"line",attr:{x1:"9",y1:"9",x2:"15",y2:"15"},child:[]}]})(e)}function jt(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(e)}const PM=()=>{const[e,s]=g.useState(!1),a=g.useRef(null);return g.useEffect(()=>{const n=r=>{a.current&&!a.current.contains(r.target)&&s(!1)};return document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}},[]),g.useEffect(()=>{const n=()=>{e&&s(!1)};return window.addEventListener("scroll",n),()=>{window.removeEventListener("scroll",n)}},[e]),t.jsx("header",{className:"sticky top-0 z-50 bg-tertiary shadow-xl border-b border-tertiary",children:t.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"flex items-center justify-between h-16",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsxs("span",{className:"text-2xl font-black text-white",children:["Sari-Sari ",t.jsx("span",{className:"text-accent",children:" CRM"})]})}),t.jsxs("nav",{className:"hidden md:flex space-x-8 text-white font-medium",children:[t.jsx("a",{href:"#platform",className:"hover:text-accent transition duration-150",children:"Platform"}),t.jsx("a",{href:"#solutions",className:"hover:text-accent transition duration-150",children:"Solutions"}),t.jsx("a",{href:"#insights",className:"hover:text-accent transition duration-150",children:"Insights"}),t.jsx("a",{href:"#pricing",className:"hover:text-accent transition duration-150",children:"Pricing"})]}),t.jsxs("div",{className:"hidden sm:flex items-center space-x-4",children:[t.jsx("a",{href:"/login",className:"text-sm font-medium text-white hover:text-accent transition duration-500",children:"Log In"}),t.jsx("a",{href:"/signup",className:"inline-flex items-center justify-center px-4 py-2 text-sm font-semibold rounded-full shadow-lg border border-secondary text-white bg-secondary hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-500",children:"Start for Free"})]}),t.jsxs("div",{className:"flex sm:hidden items-center relative",ref:a,children:[t.jsx("button",{onClick:()=>s(!e),children:e?t.jsx(jt,{className:"w-6 h-6 text-white"}):t.jsx(m1,{className:"w-6 h-6 text-white"})}),e&&t.jsx("div",{className:"absolute top-11 right-0 mt-2 w-48 border border-tertiary rounded-lg shadow-lg z-50 bg-primary",children:t.jsxs("nav",{className:"flex flex-col",children:[t.jsx("a",{href:"/login",className:"block px-4 py-2 text-center text-tertiary bg-white hover:bg-accent hover:text-secondary transition rounded-t-lg",children:"Log In"}),t.jsx("a",{href:"/signup",className:"block px-4 py-2 text-center text-tertiary bg-white hover:bg-secondary hover:text-white transition rounded-b-lg",children:"Start for Free"})]})})]})]})})})};function Y8(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m12 14 4-4"},child:[]},{tag:"path",attr:{d:"M3.34 19a10 10 0 1 1 17.32 0"},child:[]}]})(e)}function uh(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(e)}function Q8(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z"},child:[]}]})(e)}function w0(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"10",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M10.3 15H7a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"17",cy:"17",r:"3"},child:[]},{tag:"path",attr:{d:"m21 21-1.9-1.9"},child:[]}]})(e)}function q8(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M22 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(e)}function X8(e){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"},child:[]}]})(e)}const K8=()=>{const e=["/image/Dashboard1.png","/image/lead1.png","/image/dashboard.jpg"],[s,a]=g.useState(0),[n,r]=g.useState(!1),i=g.useRef(null),[l,c]=g.useState(0),[d,m]=g.useState(0);g.useEffect(()=>(n||(i.current=setInterval(()=>{a(N=>(N+1)%e.length)},4e3)),()=>clearInterval(i.current)),[n,e.length]);const f=N=>c(N.targetTouches[0].clientX),h=N=>m(N.targetTouches[0].clientX),y=()=>{l-d>75&&a(N=>(N+1)%e.length),d-l>75&&a(N=>(N-1+e.length)%e.length)};return t.jsx("section",{className:"bg-paper-white text-white py-15 lg:py-32",children:t.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[t.jsxs("div",{className:"lg:text-left text-center",children:[t.jsxs("h1",{className:"text-5xl sm:text-6xl lg:text-7xl font-lg text-secondary mb-6 leading-tight",children:["Sari-Sari"," ",t.jsx("span",{className:"text-accent font-extrabold",children:"CRM"})]}),t.jsx("p",{className:"max-w-xl mx-auto lg:mx-0 text-lg sm:text-xl text-secondary mb-10 italic",children:"The CRM that keeps your customers organized and your sales growing."}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-center lg:justify-start space-y-4 sm:space-y-0 sm:space-x-4",children:[t.jsx("a",{href:"#",className:"px-10 py-3 rounded-lg border border-secondary text-white bg-secondary font-semibold hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-500",children:"Get Started Now"}),t.jsx("a",{href:"#",className:"px-10 py-3 rounded-lg border border-secondary text-white bg-secondary hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-500",children:"Watch Demo (2 min)"})]})]}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"hidden lg:block absolute inset-0 -top-10 -bottom-10 right-4 bg-accent rounded-3xl transform rotate-3 z-0"}),t.jsxs("div",{className:"relative z-10 overflow-hidden rounded-xl shadow-2xl border-4 border-gray-800 h-[400px] bg-gray-900 flex items-center justify-center",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),onTouchStart:f,onTouchMove:h,onTouchEnd:y,children:[e.map((N,w)=>t.jsx("img",{src:N,alt:`Slide ${w+1}`,className:`absolute inset-0 w-full h-full object-contain bg-gray-50 transition-opacity duration-1000 ease-in-out ${w===s?"opacity-100":"opacity-0"}`},w)),t.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex space-x-2",children:e.map((N,w)=>t.jsx("button",{onClick:()=>a(w),className:`w-3 h-3 rounded-full transition-all ${w===s?"bg-accent":"bg-gray-400 opacity-50"}`},w))})]})]})]})})},Z8=({Icon:e,title:s,description:a})=>t.jsxs("div",{className:"bg-gray-800 p-8 rounded-2xl border border-gray-700 hover:border-accent transition transform hover:-translate-y-1",children:[t.jsx("div",{className:"w-14 h-14 flex items-center justify-center rounded-full text-accent mb-6",children:t.jsx(e,{className:"w-8 h-8"})}),t.jsx("h3",{className:"text-xl font-semibold text-white mb-3",children:s}),t.jsx("p",{className:"text-gray-400",children:a})]}),J8=()=>{const e=[{Icon:X8,title:"Automated Workflows",description:"Automate tasks and focus on engagement."},{Icon:Y8,title:"Predictive Analytics",description:"Harness AI to forecast sales and risks."},{Icon:q8,title:"Unified Customer View",description:"360-degree profile for every customer."},{Icon:Q8,title:"Multi-Channel Support",description:"Engage across email, chat, and more."}];return t.jsx("section",{id:"platform",className:"py-20 bg-gray-900 border-t border-gray-800",children:t.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[t.jsx("h2",{className:"text-4xl sm:text-5xl font-bold text-white mb-4",children:"Engineered for Enterprise Scale"}),t.jsx("p",{className:"text-xl text-gray-400 mb-16",children:"Pillows is the neural network powering your customer relationships."}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:e.map((s,a)=>t.jsx(Z8,{...s},a))})]})})},eB=()=>t.jsxs("section",{id:"pricing",className:"py-20 bg-paper-white border-t border-gray-800 text-center",children:[t.jsx("h2",{className:"text-4xl sm:text-5xl font-bold text-secondary mb-4",children:"Start Building Your Future, Today."}),t.jsx("p",{className:"text-xl text-gray-400 mb-10",children:"Join thousands leveraging Sari-Sari CRM's intelligent platform."}),t.jsx("a",{href:"/signup",className:"px-12 py-4 text-lg font-bold rounded-xl shadow-2xl bg-accent border border-secondary text-white bg-secondary hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-400",children:"Start 15-Day Free Trial"})]}),tB=()=>t.jsx("footer",{className:"bg-secondary text-white border-t py-10",children:t.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 grid grid-cols-2 md:grid-cols-5 gap-8",children:[t.jsxs("div",{children:[t.jsxs("span",{className:"text-xl font-white",children:["Sari-Sari ",t.jsx("span",{className:"text-accent",children:"CRM"})]}),t.jsx("p",{className:"text-sm text-white mt-4",children:" 2025 Sari-Sari CRM"})]}),[{title:"Platform",links:["AI Features","Automation","Integrations","APIs"]},{title:"Resources",links:["Case Studies","Webinars","Security","Support"]},{title:"Company",links:["Leadership","Partnerships","Careers","Newsroom"]},{title:"Legal",links:["Terms","Privacy","SLA","Compliance"]}].map((e,s)=>t.jsxs("div",{children:[t.jsx("h5",{className:"text-md font-semibold mb-4 text-accent",children:e.title}),t.jsx("ul",{className:"space-y-2 text-sm text-white",children:e.links.map((a,n)=>t.jsx("li",{children:t.jsx("a",{href:"#",className:"hover:text-accent",children:a})},n))})]},s))]})}),sB=()=>(g.useEffect(()=>{document.title="Sari-Sari CRM"},[]),t.jsxs("main",{className:"font-inter",children:[t.jsx(PM,{}),t.jsx(K8,{}),t.jsx(J8,{}),t.jsx(eB,{}),t.jsx(tB,{})]}));function gc(e){return ct({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"},child:[]}]})(e)}function es(e){return ct({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(e)}function g1(e){return ct({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"},child:[]}]})(e)}class of extends Error{}of.prototype.name="InvalidTokenError";function aB(e){return decodeURIComponent(atob(e).replace(/(.)/g,(s,a)=>{let n=a.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}function nB(e){let s=e.replace(/-/g,"+").replace(/_/g,"/");switch(s.length%4){case 0:break;case 2:s+="==";break;case 3:s+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return aB(s)}catch{return atob(s)}}function OM(e,s){if(typeof e!="string")throw new of("Invalid token specified: must be a string");s||(s={});const a=s.header===!0?0:1,n=e.split(".")[a];if(typeof n!="string")throw new of(`Invalid token specified: missing part #${a+1}`);let r;try{r=nB(n)}catch(i){throw new of(`Invalid token specified: invalid base64 for part #${a+1} (${i.message})`)}try{return JSON.parse(r)}catch(i){throw new of(`Invalid token specified: invalid json for part #${a+1} (${i.message})`)}}function Qs(e,s,a=void 0){const n={};for(const r in e){const i=e[r];let l="",c=!0;for(let d=0;d<i.length;d+=1){const m=i[d];m&&(l+=(c===!0?"":" ")+s(m),c=!1,a&&a[m]&&(l+=" "+a[m]))}n[r]=l}return n}function lc(e,...s){const a=new URL(`https://mui.com/production-error/?code=${e}`);return s.forEach(n=>a.searchParams.append("args[]",n)),`Minified MUI error #${e}; visit ${a} for the full message.`}function xs(e){if(typeof e!="string")throw new Error(lc(7));return e.charAt(0).toUpperCase()+e.slice(1)}var mN={exports:{}},fs={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IA;function rB(){if(IA)return fs;IA=1;var e=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),y=Symbol.for("react.view_transition"),N=Symbol.for("react.client.reference");function w(p){if(typeof p=="object"&&p!==null){var v=p.$$typeof;switch(v){case e:switch(p=p.type,p){case a:case r:case n:case d:case m:case y:return p;default:switch(p=p&&p.$$typeof,p){case l:case c:case h:case f:return p;case i:return p;default:return v}}case s:return v}}}return fs.ContextConsumer=i,fs.ContextProvider=l,fs.Element=e,fs.ForwardRef=c,fs.Fragment=a,fs.Lazy=h,fs.Memo=f,fs.Portal=s,fs.Profiler=r,fs.StrictMode=n,fs.Suspense=d,fs.SuspenseList=m,fs.isContextConsumer=function(p){return w(p)===i},fs.isContextProvider=function(p){return w(p)===l},fs.isElement=function(p){return typeof p=="object"&&p!==null&&p.$$typeof===e},fs.isForwardRef=function(p){return w(p)===c},fs.isFragment=function(p){return w(p)===a},fs.isLazy=function(p){return w(p)===h},fs.isMemo=function(p){return w(p)===f},fs.isPortal=function(p){return w(p)===s},fs.isProfiler=function(p){return w(p)===r},fs.isStrictMode=function(p){return w(p)===n},fs.isSuspense=function(p){return w(p)===d},fs.isSuspenseList=function(p){return w(p)===m},fs.isValidElementType=function(p){return typeof p=="string"||typeof p=="function"||p===a||p===r||p===n||p===d||p===m||typeof p=="object"&&p!==null&&(p.$$typeof===h||p.$$typeof===f||p.$$typeof===l||p.$$typeof===i||p.$$typeof===c||p.$$typeof===N||p.getModuleId!==void 0)},fs.typeOf=w,fs}var $A;function iB(){return $A||($A=1,mN.exports=rB()),mN.exports}var IM=iB();function Or(e){if(typeof e!="object"||e===null)return!1;const s=Object.getPrototypeOf(e);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function $M(e){if(g.isValidElement(e)||IM.isValidElementType(e)||!Or(e))return e;const s={};return Object.keys(e).forEach(a=>{s[a]=$M(e[a])}),s}function Nn(e,s,a={clone:!0}){const n=a.clone?{...e}:e;return Or(e)&&Or(s)&&Object.keys(s).forEach(r=>{g.isValidElement(s[r])||IM.isValidElementType(s[r])?n[r]=s[r]:Or(s[r])&&Object.prototype.hasOwnProperty.call(e,r)&&Or(e[r])?n[r]=Nn(e[r],s[r],a):a.clone?n[r]=Or(s[r])?$M(s[r]):s[r]:n[r]=s[r]}),n}function vf(e,s){return s?Nn(e,s,{clone:!1}):e}function RA(e,s){if(!e.containerQueries)return s;const a=Object.keys(s).filter(n=>n.startsWith("@container")).sort((n,r)=>{const i=/min-width:\s*([0-9.]+)/;return+(n.match(i)?.[1]||0)-+(r.match(i)?.[1]||0)});return a.length?a.reduce((n,r)=>{const i=s[r];return delete n[r],n[r]=i,n},{...s}):s}function lB(e,s){return s==="@"||s.startsWith("@")&&(e.some(a=>s.startsWith(`@${a}`))||!!s.match(/^@\d/))}function oB(e,s){const a=s.match(/^@([^/]+)?\/?(.+)?$/);if(!a)return null;const[,n,r]=a,i=Number.isNaN(+n)?n||0:+n;return e.containerQueries(r).up(i)}function cB(e){const s=(i,l)=>i.replace("@media",l?`@container ${l}`:"@container");function a(i,l){i.up=(...c)=>s(e.breakpoints.up(...c),l),i.down=(...c)=>s(e.breakpoints.down(...c),l),i.between=(...c)=>s(e.breakpoints.between(...c),l),i.only=(...c)=>s(e.breakpoints.only(...c),l),i.not=(...c)=>{const d=s(e.breakpoints.not(...c),l);return d.includes("not all and")?d.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):d}}const n={},r=i=>(a(n,i),n);return a(r),{...e,containerQueries:r}}const j0={xs:0,sm:600,md:900,lg:1200,xl:1536},UA={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${j0[e]}px)`},dB={containerQueries:e=>({up:s=>{let a=typeof s=="number"?s:j0[s]||s;return typeof a=="number"&&(a=`${a}px`),e?`@container ${e} (min-width:${a})`:`@container (min-width:${a})`}})};function Ui(e,s,a){const n=e.theme||{};if(Array.isArray(s)){const i=n.breakpoints||UA;return s.reduce((l,c,d)=>(l[i.up(i.keys[d])]=a(s[d]),l),{})}if(typeof s=="object"){const i=n.breakpoints||UA;return Object.keys(s).reduce((l,c)=>{if(lB(i.keys,c)){const d=oB(n.containerQueries?n:dB,c);d&&(l[d]=a(s[c],c))}else if(Object.keys(i.values||j0).includes(c)){const d=i.up(c);l[d]=a(s[c],c)}else{const d=c;l[d]=s[d]}return l},{})}return a(s)}function uB(e={}){return e.keys?.reduce((a,n)=>{const r=e.up(n);return a[r]={},a},{})||{}}function zA(e,s){return e.reduce((a,n)=>{const r=a[n];return(!r||Object.keys(r).length===0)&&delete a[n],a},s)}function C0(e,s,a=!0){if(!s||typeof s!="string")return null;if(e&&e.vars&&a){const n=`vars.${s}`.split(".").reduce((r,i)=>r&&r[i]?r[i]:null,e);if(n!=null)return n}return s.split(".").reduce((n,r)=>n&&n[r]!=null?n[r]:null,e)}function Cp(e,s,a,n=a){let r;return typeof e=="function"?r=e(a):Array.isArray(e)?r=e[a]||n:r=C0(e,a)||n,s&&(r=s(r,n,e)),r}function Fs(e){const{prop:s,cssProperty:a=e.prop,themeKey:n,transform:r}=e,i=l=>{if(l[s]==null)return null;const c=l[s],d=l.theme,m=C0(d,n)||{};return Ui(l,c,h=>{let y=Cp(m,r,h);return h===y&&typeof h=="string"&&(y=Cp(m,r,`${s}${h==="default"?"":xs(h)}`,h)),a===!1?y:{[a]:y}})};return i.propTypes={},i.filterProps=[s],i}function mB(e){const s={};return a=>(s[a]===void 0&&(s[a]=e(a)),s[a])}const fB={m:"margin",p:"padding"},hB={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},FA={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},gB=mB(e=>{if(e.length>2)if(FA[e])e=FA[e];else return[e];const[s,a]=e.split(""),n=fB[s],r=hB[a]||"";return Array.isArray(r)?r.map(i=>n+i):[n+r]}),x1=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],p1=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...x1,...p1];function mh(e,s,a,n){const r=C0(e,s,!0)??a;return typeof r=="number"||typeof r=="string"?i=>typeof i=="string"?i:typeof r=="string"?r.startsWith("var(")&&i===0?0:r.startsWith("var(")&&i===1?r:`calc(${i} * ${r})`:r*i:Array.isArray(r)?i=>{if(typeof i=="string")return i;const l=Math.abs(i),c=r[l];return i>=0?c:typeof c=="number"?-c:typeof c=="string"&&c.startsWith("var(")?`calc(-1 * ${c})`:`-${c}`}:typeof r=="function"?r:()=>{}}function y1(e){return mh(e,"spacing",8)}function fh(e,s){return typeof s=="string"||s==null?s:e(s)}function xB(e,s){return a=>e.reduce((n,r)=>(n[r]=fh(s,a),n),{})}function pB(e,s,a,n){if(!s.includes(a))return null;const r=gB(a),i=xB(r,n),l=e[a];return Ui(e,l,i)}function RM(e,s){const a=y1(e.theme);return Object.keys(e).map(n=>pB(e,s,n,a)).reduce(vf,{})}function Ms(e){return RM(e,x1)}Ms.propTypes={};Ms.filterProps=x1;function Ps(e){return RM(e,p1)}Ps.propTypes={};Ps.filterProps=p1;function S0(...e){const s=e.reduce((n,r)=>(r.filterProps.forEach(i=>{n[i]=r}),n),{}),a=n=>Object.keys(n).reduce((r,i)=>s[i]?vf(r,s[i](n)):r,{});return a.propTypes={},a.filterProps=e.reduce((n,r)=>n.concat(r.filterProps),[]),a}function Fn(e){return typeof e!="number"?e:`${e}px solid`}function sr(e,s){return Fs({prop:e,themeKey:"borders",transform:s})}const yB=sr("border",Fn),bB=sr("borderTop",Fn),vB=sr("borderRight",Fn),NB=sr("borderBottom",Fn),wB=sr("borderLeft",Fn),jB=sr("borderColor"),CB=sr("borderTopColor"),SB=sr("borderRightColor"),_B=sr("borderBottomColor"),TB=sr("borderLeftColor"),EB=sr("outline",Fn),AB=sr("outlineColor"),_0=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const s=mh(e.theme,"shape.borderRadius",4),a=n=>({borderRadius:fh(s,n)});return Ui(e,e.borderRadius,a)}return null};_0.propTypes={};_0.filterProps=["borderRadius"];S0(yB,bB,vB,NB,wB,jB,CB,SB,_B,TB,_0,EB,AB);const T0=e=>{if(e.gap!==void 0&&e.gap!==null){const s=mh(e.theme,"spacing",8),a=n=>({gap:fh(s,n)});return Ui(e,e.gap,a)}return null};T0.propTypes={};T0.filterProps=["gap"];const E0=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const s=mh(e.theme,"spacing",8),a=n=>({columnGap:fh(s,n)});return Ui(e,e.columnGap,a)}return null};E0.propTypes={};E0.filterProps=["columnGap"];const A0=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const s=mh(e.theme,"spacing",8),a=n=>({rowGap:fh(s,n)});return Ui(e,e.rowGap,a)}return null};A0.propTypes={};A0.filterProps=["rowGap"];const LB=Fs({prop:"gridColumn"}),kB=Fs({prop:"gridRow"}),DB=Fs({prop:"gridAutoFlow"}),MB=Fs({prop:"gridAutoColumns"}),PB=Fs({prop:"gridAutoRows"}),OB=Fs({prop:"gridTemplateColumns"}),IB=Fs({prop:"gridTemplateRows"}),$B=Fs({prop:"gridTemplateAreas"}),RB=Fs({prop:"gridArea"});S0(T0,E0,A0,LB,kB,DB,MB,PB,OB,IB,$B,RB);function Id(e,s){return s==="grey"?s:e}const UB=Fs({prop:"color",themeKey:"palette",transform:Id}),zB=Fs({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Id}),FB=Fs({prop:"backgroundColor",themeKey:"palette",transform:Id});S0(UB,zB,FB);function vn(e){return e<=1&&e!==0?`${e*100}%`:e}const BB=Fs({prop:"width",transform:vn}),b1=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const s=a=>{const n=e.theme?.breakpoints?.values?.[a]||j0[a];return n?e.theme?.breakpoints?.unit!=="px"?{maxWidth:`${n}${e.theme.breakpoints.unit}`}:{maxWidth:n}:{maxWidth:vn(a)}};return Ui(e,e.maxWidth,s)}return null};b1.filterProps=["maxWidth"];const HB=Fs({prop:"minWidth",transform:vn}),GB=Fs({prop:"height",transform:vn}),VB=Fs({prop:"maxHeight",transform:vn}),WB=Fs({prop:"minHeight",transform:vn});Fs({prop:"size",cssProperty:"width",transform:vn});Fs({prop:"size",cssProperty:"height",transform:vn});const YB=Fs({prop:"boxSizing"});S0(BB,b1,HB,GB,VB,WB,YB);const hh={border:{themeKey:"borders",transform:Fn},borderTop:{themeKey:"borders",transform:Fn},borderRight:{themeKey:"borders",transform:Fn},borderBottom:{themeKey:"borders",transform:Fn},borderLeft:{themeKey:"borders",transform:Fn},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Fn},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:_0},color:{themeKey:"palette",transform:Id},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Id},backgroundColor:{themeKey:"palette",transform:Id},p:{style:Ps},pt:{style:Ps},pr:{style:Ps},pb:{style:Ps},pl:{style:Ps},px:{style:Ps},py:{style:Ps},padding:{style:Ps},paddingTop:{style:Ps},paddingRight:{style:Ps},paddingBottom:{style:Ps},paddingLeft:{style:Ps},paddingX:{style:Ps},paddingY:{style:Ps},paddingInline:{style:Ps},paddingInlineStart:{style:Ps},paddingInlineEnd:{style:Ps},paddingBlock:{style:Ps},paddingBlockStart:{style:Ps},paddingBlockEnd:{style:Ps},m:{style:Ms},mt:{style:Ms},mr:{style:Ms},mb:{style:Ms},ml:{style:Ms},mx:{style:Ms},my:{style:Ms},margin:{style:Ms},marginTop:{style:Ms},marginRight:{style:Ms},marginBottom:{style:Ms},marginLeft:{style:Ms},marginX:{style:Ms},marginY:{style:Ms},marginInline:{style:Ms},marginInlineStart:{style:Ms},marginInlineEnd:{style:Ms},marginBlock:{style:Ms},marginBlockStart:{style:Ms},marginBlockEnd:{style:Ms},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:T0},rowGap:{style:A0},columnGap:{style:E0},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:vn},maxWidth:{style:b1},minWidth:{transform:vn},height:{transform:vn},maxHeight:{transform:vn},minHeight:{transform:vn},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function QB(...e){const s=e.reduce((n,r)=>n.concat(Object.keys(r)),[]),a=new Set(s);return e.every(n=>a.size===Object.keys(n).length)}function qB(e,s){return typeof e=="function"?e(s):e}function XB(){function e(a,n,r,i){const l={[a]:n,theme:r},c=i[a];if(!c)return{[a]:n};const{cssProperty:d=a,themeKey:m,transform:f,style:h}=c;if(n==null)return null;if(m==="typography"&&n==="inherit")return{[a]:n};const y=C0(r,m)||{};return h?h(l):Ui(l,n,w=>{let p=Cp(y,f,w);return w===p&&typeof w=="string"&&(p=Cp(y,f,`${a}${w==="default"?"":xs(w)}`,w)),d===!1?p:{[d]:p}})}function s(a){const{sx:n,theme:r={},nested:i}=a||{};if(!n)return null;const l=r.unstable_sxConfig??hh;function c(d){let m=d;if(typeof d=="function")m=d(r);else if(typeof d!="object")return d;if(!m)return null;const f=uB(r.breakpoints),h=Object.keys(f);let y=f;return Object.keys(m).forEach(N=>{const w=qB(m[N],r);if(w!=null)if(typeof w=="object")if(l[N])y=vf(y,e(N,w,r,l));else{const p=Ui({theme:r},w,v=>({[N]:v}));QB(p,w)?y[N]=s({sx:w,theme:r,nested:!0}):y=vf(y,p)}else y=vf(y,e(N,w,r,l))}),!i&&r.modularCssLayers?{"@layer sx":RA(r,zA(h,y))}:RA(r,zA(h,y))}return Array.isArray(n)?n.map(c):c(n)}return s}const Wd=XB();Wd.filterProps=["sx"];const KB=e=>{const s={systemProps:{},otherProps:{}},a=e?.theme?.unstable_sxConfig??hh;return Object.keys(e).forEach(n=>{a[n]?s.systemProps[n]=e[n]:s.otherProps[n]=e[n]}),s};function ZB(e){const{sx:s,...a}=e,{systemProps:n,otherProps:r}=KB(a);let i;return Array.isArray(s)?i=[n,...s]:typeof s=="function"?i=(...l)=>{const c=s(...l);return Or(c)?{...n,...c}:n}:i={...n,...s},{...r,sx:i}}function Oe(){return Oe=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Oe.apply(null,arguments)}function JB(e){if(e.sheet)return e.sheet;for(var s=0;s<document.styleSheets.length;s++)if(document.styleSheets[s].ownerNode===e)return document.styleSheets[s]}function eH(e){var s=document.createElement("style");return s.setAttribute("data-emotion",e.key),e.nonce!==void 0&&s.setAttribute("nonce",e.nonce),s.appendChild(document.createTextNode("")),s.setAttribute("data-s",""),s}var tH=(function(){function e(a){var n=this;this._insertTag=function(r){var i;n.tags.length===0?n.insertionPoint?i=n.insertionPoint.nextSibling:n.prepend?i=n.container.firstChild:i=n.before:i=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(r,i),n.tags.push(r)},this.isSpeedy=a.speedy===void 0?!0:a.speedy,this.tags=[],this.ctr=0,this.nonce=a.nonce,this.key=a.key,this.container=a.container,this.prepend=a.prepend,this.insertionPoint=a.insertionPoint,this.before=null}var s=e.prototype;return s.hydrate=function(n){n.forEach(this._insertTag)},s.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(eH(this));var r=this.tags[this.tags.length-1];if(this.isSpeedy){var i=JB(r);try{i.insertRule(n,i.cssRules.length)}catch{}}else r.appendChild(document.createTextNode(n));this.ctr++},s.flush=function(){this.tags.forEach(function(n){var r;return(r=n.parentNode)==null?void 0:r.removeChild(n)}),this.tags=[],this.ctr=0},e})(),Na="-ms-",Sp="-moz-",Yt="-webkit-",UM="comm",v1="rule",N1="decl",sH="@import",zM="@keyframes",aH="@layer",nH=Math.abs,L0=String.fromCharCode,rH=Object.assign;function iH(e,s){return pa(e,0)^45?(((s<<2^pa(e,0))<<2^pa(e,1))<<2^pa(e,2))<<2^pa(e,3):0}function FM(e){return e.trim()}function lH(e,s){return(e=s.exec(e))?e[0]:e}function Qt(e,s,a){return e.replace(s,a)}function Gj(e,s){return e.indexOf(s)}function pa(e,s){return e.charCodeAt(s)|0}function Df(e,s,a){return e.slice(s,a)}function Mr(e){return e.length}function w1(e){return e.length}function nx(e,s){return s.push(e),e}function oH(e,s){return e.map(s).join("")}var k0=1,Yd=1,BM=0,tn=0,Ys=0,xu="";function D0(e,s,a,n,r,i,l){return{value:e,root:s,parent:a,type:n,props:r,children:i,line:k0,column:Yd,length:l,return:""}}function xm(e,s){return rH(D0("",null,null,"",null,null,0),e,{length:-e.length},s)}function cH(){return Ys}function dH(){return Ys=tn>0?pa(xu,--tn):0,Yd--,Ys===10&&(Yd=1,k0--),Ys}function wn(){return Ys=tn<BM?pa(xu,tn++):0,Yd++,Ys===10&&(Yd=1,k0++),Ys}function Fr(){return pa(xu,tn)}function up(){return tn}function gh(e,s){return Df(xu,e,s)}function Mf(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function HM(e){return k0=Yd=1,BM=Mr(xu=e),tn=0,[]}function GM(e){return xu="",e}function mp(e){return FM(gh(tn-1,Vj(e===91?e+2:e===40?e+1:e)))}function uH(e){for(;(Ys=Fr())&&Ys<33;)wn();return Mf(e)>2||Mf(Ys)>3?"":" "}function mH(e,s){for(;--s&&wn()&&!(Ys<48||Ys>102||Ys>57&&Ys<65||Ys>70&&Ys<97););return gh(e,up()+(s<6&&Fr()==32&&wn()==32))}function Vj(e){for(;wn();)switch(Ys){case e:return tn;case 34:case 39:e!==34&&e!==39&&Vj(Ys);break;case 40:e===41&&Vj(e);break;case 92:wn();break}return tn}function fH(e,s){for(;wn()&&e+Ys!==57;)if(e+Ys===84&&Fr()===47)break;return"/*"+gh(s,tn-1)+"*"+L0(e===47?e:wn())}function hH(e){for(;!Mf(Fr());)wn();return gh(e,tn)}function gH(e){return GM(fp("",null,null,null,[""],e=HM(e),0,[0],e))}function fp(e,s,a,n,r,i,l,c,d){for(var m=0,f=0,h=l,y=0,N=0,w=0,p=1,v=1,C=1,j=0,_="",T=r,k=i,E=n,A=_;v;)switch(w=j,j=wn()){case 40:if(w!=108&&pa(A,h-1)==58){Gj(A+=Qt(mp(j),"&","&\f"),"&\f")!=-1&&(C=-1);break}case 34:case 39:case 91:A+=mp(j);break;case 9:case 10:case 13:case 32:A+=uH(w);break;case 92:A+=mH(up()-1,7);continue;case 47:switch(Fr()){case 42:case 47:nx(xH(fH(wn(),up()),s,a),d);break;default:A+="/"}break;case 123*p:c[m++]=Mr(A)*C;case 125*p:case 59:case 0:switch(j){case 0:case 125:v=0;case 59+f:C==-1&&(A=Qt(A,/\f/g,"")),N>0&&Mr(A)-h&&nx(N>32?HA(A+";",n,a,h-1):HA(Qt(A," ","")+";",n,a,h-2),d);break;case 59:A+=";";default:if(nx(E=BA(A,s,a,m,f,r,c,_,T=[],k=[],h),i),j===123)if(f===0)fp(A,s,E,E,T,i,h,c,k);else switch(y===99&&pa(A,3)===110?100:y){case 100:case 108:case 109:case 115:fp(e,E,E,n&&nx(BA(e,E,E,0,0,r,c,_,r,T=[],h),k),r,k,h,c,n?T:k);break;default:fp(A,E,E,E,[""],k,0,c,k)}}m=f=N=0,p=C=1,_=A="",h=l;break;case 58:h=1+Mr(A),N=w;default:if(p<1){if(j==123)--p;else if(j==125&&p++==0&&dH()==125)continue}switch(A+=L0(j),j*p){case 38:C=f>0?1:(A+="\f",-1);break;case 44:c[m++]=(Mr(A)-1)*C,C=1;break;case 64:Fr()===45&&(A+=mp(wn())),y=Fr(),f=h=Mr(_=A+=hH(up())),j++;break;case 45:w===45&&Mr(A)==2&&(p=0)}}return i}function BA(e,s,a,n,r,i,l,c,d,m,f){for(var h=r-1,y=r===0?i:[""],N=w1(y),w=0,p=0,v=0;w<n;++w)for(var C=0,j=Df(e,h+1,h=nH(p=l[w])),_=e;C<N;++C)(_=FM(p>0?y[C]+" "+j:Qt(j,/&\f/g,y[C])))&&(d[v++]=_);return D0(e,s,a,r===0?v1:c,d,m,f)}function xH(e,s,a){return D0(e,s,a,UM,L0(cH()),Df(e,2,-2),0)}function HA(e,s,a,n){return D0(e,s,a,N1,Df(e,0,n),Df(e,n+1,-1),n)}function $d(e,s){for(var a="",n=w1(e),r=0;r<n;r++)a+=s(e[r],r,e,s)||"";return a}function pH(e,s,a,n){switch(e.type){case aH:if(e.children.length)break;case sH:case N1:return e.return=e.return||e.value;case UM:return"";case zM:return e.return=e.value+"{"+$d(e.children,n)+"}";case v1:e.value=e.props.join(",")}return Mr(a=$d(e.children,n))?e.return=e.value+"{"+a+"}":""}function yH(e){var s=w1(e);return function(a,n,r,i){for(var l="",c=0;c<s;c++)l+=e[c](a,n,r,i)||"";return l}}function bH(e){return function(s){s.root||(s=s.return)&&e(s)}}function VM(e){var s=Object.create(null);return function(a){return s[a]===void 0&&(s[a]=e(a)),s[a]}}var vH=function(s,a,n){for(var r=0,i=0;r=i,i=Fr(),r===38&&i===12&&(a[n]=1),!Mf(i);)wn();return gh(s,tn)},NH=function(s,a){var n=-1,r=44;do switch(Mf(r)){case 0:r===38&&Fr()===12&&(a[n]=1),s[n]+=vH(tn-1,a,n);break;case 2:s[n]+=mp(r);break;case 4:if(r===44){s[++n]=Fr()===58?"&\f":"",a[n]=s[n].length;break}default:s[n]+=L0(r)}while(r=wn());return s},wH=function(s,a){return GM(NH(HM(s),a))},GA=new WeakMap,jH=function(s){if(!(s.type!=="rule"||!s.parent||s.length<1)){for(var a=s.value,n=s.parent,r=s.column===n.column&&s.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(s.props.length===1&&a.charCodeAt(0)!==58&&!GA.get(n))&&!r){GA.set(s,!0);for(var i=[],l=wH(a,i),c=n.props,d=0,m=0;d<l.length;d++)for(var f=0;f<c.length;f++,m++)s.props[m]=i[d]?l[d].replace(/&\f/g,c[f]):c[f]+" "+l[d]}}},CH=function(s){if(s.type==="decl"){var a=s.value;a.charCodeAt(0)===108&&a.charCodeAt(2)===98&&(s.return="",s.value="")}};function WM(e,s){switch(iH(e,s)){case 5103:return Yt+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Yt+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Yt+e+Sp+e+Na+e+e;case 6828:case 4268:return Yt+e+Na+e+e;case 6165:return Yt+e+Na+"flex-"+e+e;case 5187:return Yt+e+Qt(e,/(\w+).+(:[^]+)/,Yt+"box-$1$2"+Na+"flex-$1$2")+e;case 5443:return Yt+e+Na+"flex-item-"+Qt(e,/flex-|-self/,"")+e;case 4675:return Yt+e+Na+"flex-line-pack"+Qt(e,/align-content|flex-|-self/,"")+e;case 5548:return Yt+e+Na+Qt(e,"shrink","negative")+e;case 5292:return Yt+e+Na+Qt(e,"basis","preferred-size")+e;case 6060:return Yt+"box-"+Qt(e,"-grow","")+Yt+e+Na+Qt(e,"grow","positive")+e;case 4554:return Yt+Qt(e,/([^-])(transform)/g,"$1"+Yt+"$2")+e;case 6187:return Qt(Qt(Qt(e,/(zoom-|grab)/,Yt+"$1"),/(image-set)/,Yt+"$1"),e,"")+e;case 5495:case 3959:return Qt(e,/(image-set\([^]*)/,Yt+"$1$`$1");case 4968:return Qt(Qt(e,/(.+:)(flex-)?(.*)/,Yt+"box-pack:$3"+Na+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Yt+e+e;case 4095:case 3583:case 4068:case 2532:return Qt(e,/(.+)-inline(.+)/,Yt+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Mr(e)-1-s>6)switch(pa(e,s+1)){case 109:if(pa(e,s+4)!==45)break;case 102:return Qt(e,/(.+:)(.+)-([^]+)/,"$1"+Yt+"$2-$3$1"+Sp+(pa(e,s+3)==108?"$3":"$2-$3"))+e;case 115:return~Gj(e,"stretch")?WM(Qt(e,"stretch","fill-available"),s)+e:e}break;case 4949:if(pa(e,s+1)!==115)break;case 6444:switch(pa(e,Mr(e)-3-(~Gj(e,"!important")&&10))){case 107:return Qt(e,":",":"+Yt)+e;case 101:return Qt(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Yt+(pa(e,14)===45?"inline-":"")+"box$3$1"+Yt+"$2$3$1"+Na+"$2box$3")+e}break;case 5936:switch(pa(e,s+11)){case 114:return Yt+e+Na+Qt(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Yt+e+Na+Qt(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Yt+e+Na+Qt(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Yt+e+Na+e+e}return e}var SH=function(s,a,n,r){if(s.length>-1&&!s.return)switch(s.type){case N1:s.return=WM(s.value,s.length);break;case zM:return $d([xm(s,{value:Qt(s.value,"@","@"+Yt)})],r);case v1:if(s.length)return oH(s.props,function(i){switch(lH(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return $d([xm(s,{props:[Qt(i,/:(read-\w+)/,":"+Sp+"$1")]})],r);case"::placeholder":return $d([xm(s,{props:[Qt(i,/:(plac\w+)/,":"+Yt+"input-$1")]}),xm(s,{props:[Qt(i,/:(plac\w+)/,":"+Sp+"$1")]}),xm(s,{props:[Qt(i,/:(plac\w+)/,Na+"input-$1")]})],r)}return""})}},_H=[SH],TH=function(s){var a=s.key;if(a==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(p){var v=p.getAttribute("data-emotion");v.indexOf(" ")!==-1&&(document.head.appendChild(p),p.setAttribute("data-s",""))})}var r=s.stylisPlugins||_H,i={},l,c=[];l=s.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+a+' "]'),function(p){for(var v=p.getAttribute("data-emotion").split(" "),C=1;C<v.length;C++)i[v[C]]=!0;c.push(p)});var d,m=[jH,CH];{var f,h=[pH,bH(function(p){f.insert(p)})],y=yH(m.concat(r,h)),N=function(v){return $d(gH(v),y)};d=function(v,C,j,_){f=j,N(v?v+"{"+C.styles+"}":C.styles),_&&(w.inserted[C.name]=!0)}}var w={key:a,sheet:new tH({key:a,container:l,nonce:s.nonce,speedy:s.speedy,prepend:s.prepend,insertionPoint:s.insertionPoint}),nonce:s.nonce,inserted:i,registered:{},insert:d};return w.sheet.hydrate(c),w},fN={exports:{}},Kt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VA;function EH(){if(VA)return Kt;VA=1;var e=typeof Symbol=="function"&&Symbol.for,s=e?Symbol.for("react.element"):60103,a=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,r=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,l=e?Symbol.for("react.provider"):60109,c=e?Symbol.for("react.context"):60110,d=e?Symbol.for("react.async_mode"):60111,m=e?Symbol.for("react.concurrent_mode"):60111,f=e?Symbol.for("react.forward_ref"):60112,h=e?Symbol.for("react.suspense"):60113,y=e?Symbol.for("react.suspense_list"):60120,N=e?Symbol.for("react.memo"):60115,w=e?Symbol.for("react.lazy"):60116,p=e?Symbol.for("react.block"):60121,v=e?Symbol.for("react.fundamental"):60117,C=e?Symbol.for("react.responder"):60118,j=e?Symbol.for("react.scope"):60119;function _(k){if(typeof k=="object"&&k!==null){var E=k.$$typeof;switch(E){case s:switch(k=k.type,k){case d:case m:case n:case i:case r:case h:return k;default:switch(k=k&&k.$$typeof,k){case c:case f:case w:case N:case l:return k;default:return E}}case a:return E}}}function T(k){return _(k)===m}return Kt.AsyncMode=d,Kt.ConcurrentMode=m,Kt.ContextConsumer=c,Kt.ContextProvider=l,Kt.Element=s,Kt.ForwardRef=f,Kt.Fragment=n,Kt.Lazy=w,Kt.Memo=N,Kt.Portal=a,Kt.Profiler=i,Kt.StrictMode=r,Kt.Suspense=h,Kt.isAsyncMode=function(k){return T(k)||_(k)===d},Kt.isConcurrentMode=T,Kt.isContextConsumer=function(k){return _(k)===c},Kt.isContextProvider=function(k){return _(k)===l},Kt.isElement=function(k){return typeof k=="object"&&k!==null&&k.$$typeof===s},Kt.isForwardRef=function(k){return _(k)===f},Kt.isFragment=function(k){return _(k)===n},Kt.isLazy=function(k){return _(k)===w},Kt.isMemo=function(k){return _(k)===N},Kt.isPortal=function(k){return _(k)===a},Kt.isProfiler=function(k){return _(k)===i},Kt.isStrictMode=function(k){return _(k)===r},Kt.isSuspense=function(k){return _(k)===h},Kt.isValidElementType=function(k){return typeof k=="string"||typeof k=="function"||k===n||k===m||k===i||k===r||k===h||k===y||typeof k=="object"&&k!==null&&(k.$$typeof===w||k.$$typeof===N||k.$$typeof===l||k.$$typeof===c||k.$$typeof===f||k.$$typeof===v||k.$$typeof===C||k.$$typeof===j||k.$$typeof===p)},Kt.typeOf=_,Kt}var WA;function AH(){return WA||(WA=1,fN.exports=EH()),fN.exports}var hN,YA;function LH(){if(YA)return hN;YA=1;var e=AH(),s={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},r={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};i[e.ForwardRef]=n,i[e.Memo]=r;function l(w){return e.isMemo(w)?r:i[w.$$typeof]||s}var c=Object.defineProperty,d=Object.getOwnPropertyNames,m=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,y=Object.prototype;function N(w,p,v){if(typeof p!="string"){if(y){var C=h(p);C&&C!==y&&N(w,C,v)}var j=d(p);m&&(j=j.concat(m(p)));for(var _=l(w),T=l(p),k=0;k<j.length;++k){var E=j[k];if(!a[E]&&!(v&&v[E])&&!(T&&T[E])&&!(_&&_[E])){var A=f(p,E);try{c(w,E,A)}catch{}}}}return w}return hN=N,hN}LH();var kH=!0;function YM(e,s,a){var n="";return a.split(" ").forEach(function(r){e[r]!==void 0?s.push(e[r]+";"):r&&(n+=r+" ")}),n}var j1=function(s,a,n){var r=s.key+"-"+a.name;(n===!1||kH===!1)&&s.registered[r]===void 0&&(s.registered[r]=a.styles)},QM=function(s,a,n){j1(s,a,n);var r=s.key+"-"+a.name;if(s.inserted[a.name]===void 0){var i=a;do s.insert(a===i?"."+r:"",i,s.sheet,!0),i=i.next;while(i!==void 0)}};function DH(e){for(var s=0,a,n=0,r=e.length;r>=4;++n,r-=4)a=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,a=(a&65535)*1540483477+((a>>>16)*59797<<16),a^=a>>>24,s=(a&65535)*1540483477+((a>>>16)*59797<<16)^(s&65535)*1540483477+((s>>>16)*59797<<16);switch(r){case 3:s^=(e.charCodeAt(n+2)&255)<<16;case 2:s^=(e.charCodeAt(n+1)&255)<<8;case 1:s^=e.charCodeAt(n)&255,s=(s&65535)*1540483477+((s>>>16)*59797<<16)}return s^=s>>>13,s=(s&65535)*1540483477+((s>>>16)*59797<<16),((s^s>>>15)>>>0).toString(36)}var MH={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},PH=/[A-Z]|^ms/g,OH=/_EMO_([^_]+?)_([^]*?)_EMO_/g,qM=function(s){return s.charCodeAt(1)===45},QA=function(s){return s!=null&&typeof s!="boolean"},gN=VM(function(e){return qM(e)?e:e.replace(PH,"-$&").toLowerCase()}),qA=function(s,a){switch(s){case"animation":case"animationName":if(typeof a=="string")return a.replace(OH,function(n,r,i){return Pr={name:r,styles:i,next:Pr},r})}return MH[s]!==1&&!qM(s)&&typeof a=="number"&&a!==0?a+"px":a};function Pf(e,s,a){if(a==null)return"";var n=a;if(n.__emotion_styles!==void 0)return n;switch(typeof a){case"boolean":return"";case"object":{var r=a;if(r.anim===1)return Pr={name:r.name,styles:r.styles,next:Pr},r.name;var i=a;if(i.styles!==void 0){var l=i.next;if(l!==void 0)for(;l!==void 0;)Pr={name:l.name,styles:l.styles,next:Pr},l=l.next;var c=i.styles+";";return c}return IH(e,s,a)}case"function":{if(e!==void 0){var d=Pr,m=a(e);return Pr=d,Pf(e,s,m)}break}}var f=a;if(s==null)return f;var h=s[f];return h!==void 0?h:f}function IH(e,s,a){var n="";if(Array.isArray(a))for(var r=0;r<a.length;r++)n+=Pf(e,s,a[r])+";";else for(var i in a){var l=a[i];if(typeof l!="object"){var c=l;s!=null&&s[c]!==void 0?n+=i+"{"+s[c]+"}":QA(c)&&(n+=gN(i)+":"+qA(i,c)+";")}else if(Array.isArray(l)&&typeof l[0]=="string"&&(s==null||s[l[0]]===void 0))for(var d=0;d<l.length;d++)QA(l[d])&&(n+=gN(i)+":"+qA(i,l[d])+";");else{var m=Pf(e,s,l);switch(i){case"animation":case"animationName":{n+=gN(i)+":"+m+";";break}default:n+=i+"{"+m+"}"}}}return n}var XA=/label:\s*([^\s;{]+)\s*(;|$)/g,Pr;function M0(e,s,a){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,r="";Pr=void 0;var i=e[0];if(i==null||i.raw===void 0)n=!1,r+=Pf(a,s,i);else{var l=i;r+=l[0]}for(var c=1;c<e.length;c++)if(r+=Pf(a,s,e[c]),n){var d=i;r+=d[c]}XA.lastIndex=0;for(var m="",f;(f=XA.exec(r))!==null;)m+="-"+f[1];var h=DH(r)+m;return{name:h,styles:r,next:Pr}}var $H=function(s){return s()},RH=Hd.useInsertionEffect?Hd.useInsertionEffect:!1,XM=RH||$H,KM=g.createContext(typeof HTMLElement<"u"?TH({key:"css"}):null);KM.Provider;var ZM=function(s){return g.forwardRef(function(a,n){var r=g.useContext(KM);return s(a,r,n)})},C1=g.createContext({}),S1={}.hasOwnProperty,Wj="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",UH=function(s,a){var n={};for(var r in a)S1.call(a,r)&&(n[r]=a[r]);return n[Wj]=s,n},zH=function(s){var a=s.cache,n=s.serialized,r=s.isStringTag;return j1(a,n,r),XM(function(){return QM(a,n,r)}),null},FH=ZM(function(e,s,a){var n=e.css;typeof n=="string"&&s.registered[n]!==void 0&&(n=s.registered[n]);var r=e[Wj],i=[n],l="";typeof e.className=="string"?l=YM(s.registered,i,e.className):e.className!=null&&(l=e.className+" ");var c=M0(i,void 0,g.useContext(C1));l+=s.key+"-"+c.name;var d={};for(var m in e)S1.call(e,m)&&m!=="css"&&m!==Wj&&(d[m]=e[m]);return d.className=l,a&&(d.ref=a),g.createElement(g.Fragment,null,g.createElement(zH,{cache:s,serialized:c,isStringTag:typeof r=="string"}),g.createElement(r,d))}),BH=FH,KA=function(s,a){var n=arguments;if(a==null||!S1.call(a,"css"))return g.createElement.apply(void 0,n);var r=n.length,i=new Array(r);i[0]=BH,i[1]=UH(s,a);for(var l=2;l<r;l++)i[l]=n[l];return g.createElement.apply(null,i)};(function(e){var s;s||(s=e.JSX||(e.JSX={}))})(KA||(KA={}));function _1(){for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return M0(s)}function xh(){var e=_1.apply(void 0,arguments),s="animation-"+e.name;return{name:s,styles:"@keyframes "+s+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var HH=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,GH=VM(function(e){return HH.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),VH=GH,WH=function(s){return s!=="theme"},ZA=function(s){return typeof s=="string"&&s.charCodeAt(0)>96?VH:WH},JA=function(s,a,n){var r;if(a){var i=a.shouldForwardProp;r=s.__emotion_forwardProp&&i?function(l){return s.__emotion_forwardProp(l)&&i(l)}:i}return typeof r!="function"&&n&&(r=s.__emotion_forwardProp),r},YH=function(s){var a=s.cache,n=s.serialized,r=s.isStringTag;return j1(a,n,r),XM(function(){return QM(a,n,r)}),null},QH=function e(s,a){var n=s.__emotion_real===s,r=n&&s.__emotion_base||s,i,l;a!==void 0&&(i=a.label,l=a.target);var c=JA(s,a,n),d=c||ZA(r),m=!d("as");return function(){var f=arguments,h=n&&s.__emotion_styles!==void 0?s.__emotion_styles.slice(0):[];if(i!==void 0&&h.push("label:"+i+";"),f[0]==null||f[0].raw===void 0)h.push.apply(h,f);else{var y=f[0];h.push(y[0]);for(var N=f.length,w=1;w<N;w++)h.push(f[w],y[w])}var p=ZM(function(v,C,j){var _=m&&v.as||r,T="",k=[],E=v;if(v.theme==null){E={};for(var A in v)E[A]=v[A];E.theme=g.useContext(C1)}typeof v.className=="string"?T=YM(C.registered,k,v.className):v.className!=null&&(T=v.className+" ");var U=M0(h.concat(k),C.registered,E);T+=C.key+"-"+U.name,l!==void 0&&(T+=" "+l);var B=m&&c===void 0?ZA(_):d,X={};for(var $ in v)m&&$==="as"||B($)&&(X[$]=v[$]);return X.className=T,j&&(X.ref=j),g.createElement(g.Fragment,null,g.createElement(YH,{cache:C,serialized:U,isStringTag:typeof _=="string"}),g.createElement(_,X))});return p.displayName=i!==void 0?i:"Styled("+(typeof r=="string"?r:r.displayName||r.name||"Component")+")",p.defaultProps=s.defaultProps,p.__emotion_real=p,p.__emotion_base=r,p.__emotion_styles=h,p.__emotion_forwardProp=c,Object.defineProperty(p,"toString",{value:function(){return"."+l}}),p.withComponent=function(v,C){var j=e(v,Oe({},a,C,{shouldForwardProp:JA(p,C,!0)}));return j.apply(void 0,h)},p}},qH=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Yj=QH.bind(null);qH.forEach(function(e){Yj[e]=Yj(e)});function XH(e,s){return Yj(e,s)}function KH(e,s){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=s(e.__emotion_styles))}const eL=[];function Ko(e){return eL[0]=e,M0(eL)}const ZH=e=>{const s=Object.keys(e).map(a=>({key:a,val:e[a]}))||[];return s.sort((a,n)=>a.val-n.val),s.reduce((a,n)=>({...a,[n.key]:n.val}),{})};function JH(e){const{values:s={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:a="px",step:n=5,...r}=e,i=ZH(s),l=Object.keys(i);function c(y){return`@media (min-width:${typeof s[y]=="number"?s[y]:y}${a})`}function d(y){return`@media (max-width:${(typeof s[y]=="number"?s[y]:y)-n/100}${a})`}function m(y,N){const w=l.indexOf(N);return`@media (min-width:${typeof s[y]=="number"?s[y]:y}${a}) and (max-width:${(w!==-1&&typeof s[l[w]]=="number"?s[l[w]]:N)-n/100}${a})`}function f(y){return l.indexOf(y)+1<l.length?m(y,l[l.indexOf(y)+1]):c(y)}function h(y){const N=l.indexOf(y);return N===0?c(l[1]):N===l.length-1?d(l[N]):m(y,l[l.indexOf(y)+1]).replace("@media","@media not all and")}return{keys:l,values:i,up:c,down:d,between:m,only:f,not:h,unit:a,...r}}const e9={borderRadius:4};function JM(e=8,s=y1({spacing:e})){if(e.mui)return e;const a=(...n)=>(n.length===0?[1]:n).map(i=>{const l=s(i);return typeof l=="number"?`${l}px`:l}).join(" ");return a.mui=!0,a}function t9(e,s){const a=this;if(a.vars){if(!a.colorSchemes?.[e]||typeof a.getColorSchemeSelector!="function")return{};let n=a.getColorSchemeSelector(e);return n==="&"?s:((n.includes("data-")||n.includes("."))&&(n=`*:where(${n.replace(/\s*&$/,"")}) &`),{[n]:s})}return a.palette.mode===e?s:{}}function T1(e={},...s){const{breakpoints:a={},palette:n={},spacing:r,shape:i={},...l}=e,c=JH(a),d=JM(r);let m=Nn({breakpoints:c,direction:"ltr",components:{},palette:{mode:"light",...n},spacing:d,shape:{...e9,...i}},l);return m=cB(m),m.applyStyles=t9,m=s.reduce((f,h)=>Nn(f,h),m),m.unstable_sxConfig={...hh,...l?.unstable_sxConfig},m.unstable_sx=function(h){return Wd({sx:h,theme:this})},m}function s9(e){return Object.keys(e).length===0}function e5(e=null){const s=g.useContext(C1);return!s||s9(s)?e:s}const a9=T1();function t5(e=a9){return e5(e)}const tL=e=>e,n9=()=>{let e=tL;return{configure(s){e=s},generate(s){return e(s)},reset(){e=tL}}},r9=n9(),i9={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function qs(e,s,a="Mui"){const n=i9[s];return n?`${a}-${n}`:`${r9.generate(e)}-${s}`}function Is(e,s,a="Mui"){const n={};return s.forEach(r=>{n[r]=qs(e,r,a)}),n}function s5(e){const{variants:s,...a}=e,n={variants:s,style:Ko(a),isProcessed:!0};return n.style===a||s&&s.forEach(r=>{typeof r.style!="function"&&(r.style=Ko(r.style))}),n}const l9=T1();function hp(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function Go(e,s){return s&&e&&typeof e=="object"&&e.styles&&!e.styles.startsWith("@layer")&&(e.styles=`@layer ${s}{${String(e.styles)}}`),e}function o9(e){return e?(s,a)=>a[e]:null}function c9(e,s,a){e.theme=m9(e.theme)?a:e.theme[s]||e.theme}function gp(e,s,a){const n=typeof s=="function"?s(e):s;if(Array.isArray(n))return n.flatMap(r=>gp(e,r,a));if(Array.isArray(n?.variants)){let r;if(n.isProcessed)r=a?Go(n.style,a):n.style;else{const{variants:i,...l}=n;r=a?Go(Ko(l),a):l}return a5(e,n.variants,[r],a)}return n?.isProcessed?a?Go(Ko(n.style),a):n.style:a?Go(Ko(n),a):n}function a5(e,s,a=[],n=void 0){let r;e:for(let i=0;i<s.length;i+=1){const l=s[i];if(typeof l.props=="function"){if(r??={...e,...e.ownerState,ownerState:e.ownerState},!l.props(r))continue}else for(const c in l.props)if(e[c]!==l.props[c]&&e.ownerState?.[c]!==l.props[c])continue e;typeof l.style=="function"?(r??={...e,...e.ownerState,ownerState:e.ownerState},a.push(n?Go(Ko(l.style(r)),n):l.style(r))):a.push(n?Go(Ko(l.style),n):l.style)}return a}function d9(e={}){const{themeId:s,defaultTheme:a=l9,rootShouldForwardProp:n=hp,slotShouldForwardProp:r=hp}=e;function i(c){c9(c,s,a)}return(c,d={})=>{KH(c,E=>E.filter(A=>A!==Wd));const{name:m,slot:f,skipVariantsResolver:h,skipSx:y,overridesResolver:N=o9(h9(f)),...w}=d,p=m&&m.startsWith("Mui")||f?"components":"custom",v=h!==void 0?h:f&&f!=="Root"&&f!=="root"||!1,C=y||!1;let j=hp;f==="Root"||f==="root"?j=n:f?j=r:f9(c)&&(j=void 0);const _=XH(c,{shouldForwardProp:j,label:u9(),...w}),T=E=>{if(E.__emotion_real===E)return E;if(typeof E=="function")return function(U){return gp(U,E,U.theme.modularCssLayers?p:void 0)};if(Or(E)){const A=s5(E);return function(B){return A.variants?gp(B,A,B.theme.modularCssLayers?p:void 0):B.theme.modularCssLayers?Go(A.style,p):A.style}}return E},k=(...E)=>{const A=[],U=E.map(T),B=[];if(A.push(i),m&&N&&B.push(function(G){const ae=G.theme.components?.[m]?.styleOverrides;if(!ae)return null;const R={};for(const Z in ae)R[Z]=gp(G,ae[Z],G.theme.modularCssLayers?"theme":void 0);return N(G,R)}),m&&!v&&B.push(function(G){const ae=G.theme?.components?.[m]?.variants;return ae?a5(G,ae,[],G.theme.modularCssLayers?"theme":void 0):null}),C||B.push(Wd),Array.isArray(U[0])){const O=U.shift(),G=new Array(A.length).fill(""),K=new Array(B.length).fill("");let ae;ae=[...G,...O,...K],ae.raw=[...G,...O.raw,...K],A.unshift(ae)}const X=[...A,...U,...B],$=_(...X);return c.muiName&&($.muiName=c.muiName),$};return _.withConfig&&(k.withConfig=_.withConfig),k}}function u9(e,s){return void 0}function m9(e){for(const s in e)return!1;return!0}function f9(e){return typeof e=="string"&&e.charCodeAt(0)>96}function h9(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}function oc(e,s,a=!1){const n={...s};for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const i=r;if(i==="components"||i==="slots")n[i]={...e[i],...n[i]};else if(i==="componentsProps"||i==="slotProps"){const l=e[i],c=s[i];if(!c)n[i]=l||{};else if(!l)n[i]=c;else{n[i]={...c};for(const d in l)if(Object.prototype.hasOwnProperty.call(l,d)){const m=d;n[i][m]=oc(l[m],c[m],a)}}}else i==="className"&&a&&s.className?n.className=It(e?.className,s?.className):i==="style"&&a&&s.style?n.style={...e?.style,...s?.style}:n[i]===void 0&&(n[i]=e[i])}return n}function n5(e){const{theme:s,name:a,props:n}=e;return!s||!s.components||!s.components[a]||!s.components[a].defaultProps?n:oc(s.components[a].defaultProps,n)}function g9({props:e,name:s,defaultTheme:a,themeId:n}){let r=t5(a);return r=r[n]||r,n5({theme:r,name:s,props:e})}const na=typeof window<"u"?g.useLayoutEffect:g.useEffect;function x9(e,s,a,n,r){const[i,l]=g.useState(()=>r&&a?a(e).matches:n?n(e).matches:s);return na(()=>{if(!a)return;const c=a(e),d=()=>{l(c.matches)};return d(),c.addEventListener("change",d),()=>{c.removeEventListener("change",d)}},[e,a]),i}const p9={...Hd},r5=p9.useSyncExternalStore;function y9(e,s,a,n,r){const i=g.useCallback(()=>s,[s]),l=g.useMemo(()=>{if(r&&a)return()=>a(e).matches;if(n!==null){const{matches:f}=n(e);return()=>f}return i},[i,e,n,r,a]),[c,d]=g.useMemo(()=>{if(a===null)return[i,()=>()=>{}];const f=a(e);return[()=>f.matches,h=>(f.addEventListener("change",h),()=>{f.removeEventListener("change",h)})]},[i,a,e]);return r5(d,c,l)}function i5(e={}){const{themeId:s}=e;return function(n,r={}){let i=e5();i&&s&&(i=i[s]||i);const l=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:c=!1,matchMedia:d=l?window.matchMedia:null,ssrMatchMedia:m=null,noSsr:f=!1}=n5({name:"MuiUseMediaQuery",props:r,theme:i});let h=typeof n=="function"?n(i):n;return h=h.replace(/^@media( ?)/m,""),h.includes("print")&&console.warn(["MUI: You have provided a `print` query to the `useMediaQuery` hook.","Using the print media query to modify print styles can lead to unexpected results.","Consider using the `displayPrint` field in the `sx` prop instead.","More information about `displayPrint` on our docs: https://mui.com/system/display/#display-in-print."].join(`
`)),(r5!==void 0?y9:x9)(h,c,d,m,f)}}i5();function b9(e,s=Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER){return Math.max(s,Math.min(e,a))}function E1(e,s=0,a=1){return b9(e,s,a)}function v9(e){e=e.slice(1);const s=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let a=e.match(s);return a&&a[0].length===1&&(a=a.map(n=>n+n)),a?`rgb${a.length===4?"a":""}(${a.map((n,r)=>r<3?parseInt(n,16):Math.round(parseInt(n,16)/255*1e3)/1e3).join(", ")})`:""}function Hl(e){if(e.type)return e;if(e.charAt(0)==="#")return Hl(v9(e));const s=e.indexOf("("),a=e.substring(0,s);if(!["rgb","rgba","hsl","hsla","color"].includes(a))throw new Error(lc(9,e));let n=e.substring(s+1,e.length-1),r;if(a==="color"){if(n=n.split(" "),r=n.shift(),n.length===4&&n[3].charAt(0)==="/"&&(n[3]=n[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(r))throw new Error(lc(10,r))}else n=n.split(",");return n=n.map(i=>parseFloat(i)),{type:a,values:n,colorSpace:r}}const N9=e=>{const s=Hl(e);return s.values.slice(0,3).map((a,n)=>s.type.includes("hsl")&&n!==0?`${a}%`:a).join(" ")},cf=(e,s)=>{try{return N9(e)}catch{return e}};function P0(e){const{type:s,colorSpace:a}=e;let{values:n}=e;return s.includes("rgb")?n=n.map((r,i)=>i<3?parseInt(r,10):r):s.includes("hsl")&&(n[1]=`${n[1]}%`,n[2]=`${n[2]}%`),s.includes("color")?n=`${a} ${n.join(" ")}`:n=`${n.join(", ")}`,`${s}(${n})`}function l5(e){e=Hl(e);const{values:s}=e,a=s[0],n=s[1]/100,r=s[2]/100,i=n*Math.min(r,1-r),l=(m,f=(m+a/30)%12)=>r-i*Math.max(Math.min(f-3,9-f,1),-1);let c="rgb";const d=[Math.round(l(0)*255),Math.round(l(8)*255),Math.round(l(4)*255)];return e.type==="hsla"&&(c+="a",d.push(s[3])),P0({type:c,values:d})}function Qj(e){e=Hl(e);let s=e.type==="hsl"||e.type==="hsla"?Hl(l5(e)).values:e.values;return s=s.map(a=>(e.type!=="color"&&(a/=255),a<=.03928?a/12.92:((a+.055)/1.055)**2.4)),Number((.2126*s[0]+.7152*s[1]+.0722*s[2]).toFixed(3))}function w9(e,s){const a=Qj(e),n=Qj(s);return(Math.max(a,n)+.05)/(Math.min(a,n)+.05)}function o5(e,s){return e=Hl(e),s=E1(s),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${s}`:e.values[3]=s,P0(e)}function xo(e,s,a){try{return o5(e,s)}catch{return e}}function O0(e,s){if(e=Hl(e),s=E1(s),e.type.includes("hsl"))e.values[2]*=1-s;else if(e.type.includes("rgb")||e.type.includes("color"))for(let a=0;a<3;a+=1)e.values[a]*=1-s;return P0(e)}function rs(e,s,a){try{return O0(e,s)}catch{return e}}function I0(e,s){if(e=Hl(e),s=E1(s),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*s;else if(e.type.includes("rgb"))for(let a=0;a<3;a+=1)e.values[a]+=(255-e.values[a])*s;else if(e.type.includes("color"))for(let a=0;a<3;a+=1)e.values[a]+=(1-e.values[a])*s;return P0(e)}function is(e,s,a){try{return I0(e,s)}catch{return e}}function j9(e,s=.15){return Qj(e)>.5?O0(e,s):I0(e,s)}function rx(e,s,a){try{return j9(e,s)}catch{return e}}const C9=g.createContext(),ph=()=>g.useContext(C9)??!1,S9=g.createContext(void 0);function _9(e){const{theme:s,name:a,props:n}=e;if(!s||!s.components||!s.components[a])return n;const r=s.components[a];return r.defaultProps?oc(r.defaultProps,n,s.components.mergeClassNameAndStyle):!r.styleOverrides&&!r.variants?oc(r,n,s.components.mergeClassNameAndStyle):n}function T9({props:e,name:s}){const a=g.useContext(S9);return _9({props:e,name:s,theme:{components:a}})}let sL=0;function E9(e){const[s,a]=g.useState(e),n=e||s;return g.useEffect(()=>{s==null&&(sL+=1,a(`mui-${sL}`))},[s]),n}const A9={...Hd},aL=A9.useId;function $0(e){if(aL!==void 0){const s=aL();return e??s}return E9(e)}const nL={theme:void 0};function L9(e){let s,a;return function(r){let i=s;return(i===void 0||r.theme!==a)&&(nL.theme=r.theme,i=s5(e(nL)),s=i,a=r.theme),i}}function k9(e=""){function s(...n){if(!n.length)return"";const r=n[0];return typeof r=="string"&&!r.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${r}${s(...n.slice(1))})`:`, ${r}`}return(n,...r)=>`var(--${e?`${e}-`:""}${n}${s(...r)})`}const rL=(e,s,a,n=[])=>{let r=e;s.forEach((i,l)=>{l===s.length-1?Array.isArray(r)?r[Number(i)]=a:r&&typeof r=="object"&&(r[i]=a):r&&typeof r=="object"&&(r[i]||(r[i]=n.includes(i)?[]:{}),r=r[i])})},D9=(e,s,a)=>{function n(r,i=[],l=[]){Object.entries(r).forEach(([c,d])=>{(!a||a&&!a([...i,c]))&&d!=null&&(typeof d=="object"&&Object.keys(d).length>0?n(d,[...i,c],Array.isArray(d)?[...l,c]:l):s([...i,c],d,l))})}n(e)},M9=(e,s)=>typeof s=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(n=>e.includes(n))||e[e.length-1].toLowerCase().includes("opacity")?s:`${s}px`:s;function xN(e,s){const{prefix:a,shouldSkipGeneratingVar:n}=s||{},r={},i={},l={};return D9(e,(c,d,m)=>{if((typeof d=="string"||typeof d=="number")&&(!n||!n(c,d))){const f=`--${a?`${a}-`:""}${c.join("-")}`,h=M9(c,d);Object.assign(r,{[f]:h}),rL(i,c,`var(${f})`,m),rL(l,c,`var(${f}, ${h})`,m)}},c=>c[0]==="vars"),{css:r,vars:i,varsWithDefaults:l}}function P9(e,s={}){const{getSelector:a=C,disableCssColorScheme:n,colorSchemeSelector:r,enableContrastVars:i}=s,{colorSchemes:l={},components:c,defaultColorScheme:d="light",...m}=e,{vars:f,css:h,varsWithDefaults:y}=xN(m,s);let N=y;const w={},{[d]:p,...v}=l;if(Object.entries(v||{}).forEach(([T,k])=>{const{vars:E,css:A,varsWithDefaults:U}=xN(k,s);N=Nn(N,U),w[T]={css:A,vars:E}}),p){const{css:T,vars:k,varsWithDefaults:E}=xN(p,s);N=Nn(N,E),w[d]={css:T,vars:k}}function C(T,k){let E=r;if(r==="class"&&(E=".%s"),r==="data"&&(E="[data-%s]"),r?.startsWith("data-")&&!r.includes("%s")&&(E=`[${r}="%s"]`),T){if(E==="media")return e.defaultColorScheme===T?":root":{[`@media (prefers-color-scheme: ${l[T]?.palette?.mode||T})`]:{":root":k}};if(E)return e.defaultColorScheme===T?`:root, ${E.replace("%s",String(T))}`:E.replace("%s",String(T))}return":root"}return{vars:N,generateThemeVars:()=>{let T={...f};return Object.entries(w).forEach(([,{vars:k}])=>{T=Nn(T,k)}),T},generateStyleSheets:()=>{const T=[],k=e.defaultColorScheme||"light";function E(B,X){Object.keys(X).length&&T.push(typeof B=="string"?{[B]:{...X}}:B)}E(a(void 0,{...h}),h);const{[k]:A,...U}=w;if(A){const{css:B}=A,X=l[k]?.palette?.mode,$=!n&&X?{colorScheme:X,...B}:{...B};E(a(k,{...$}),$)}return Object.entries(U).forEach(([B,{css:X}])=>{const $=l[B]?.palette?.mode,O=!n&&$?{colorScheme:$,...X}:{...X};E(a(B,{...O}),O)}),i&&T.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),T}}}function O9(e){return function(a){return e==="media"?`@media (prefers-color-scheme: ${a})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${a}"] &`:e==="class"?`.${a} &`:e==="data"?`[data-${a}] &`:`${e.replace("%s",a)} &`:"&"}}const Of={black:"#000",white:"#fff"},I9={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},cd={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},dd={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},pm={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},ud={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},md={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},fd={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function c5(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Of.white,default:Of.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const d5=c5();function u5(){return{text:{primary:Of.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Of.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const qj=u5();function iL(e,s,a,n){const r=n.light||n,i=n.dark||n*1.5;e[s]||(e.hasOwnProperty(a)?e[s]=e[a]:s==="light"?e.light=I0(e.main,r):s==="dark"&&(e.dark=O0(e.main,i)))}function lL(e,s,a,n,r){const i=r.light||r,l=r.dark||r*1.5;s[a]||(s.hasOwnProperty(n)?s[a]=s[n]:a==="light"?s.light=`color-mix(in ${e}, ${s.main}, #fff ${(i*100).toFixed(0)}%)`:a==="dark"&&(s.dark=`color-mix(in ${e}, ${s.main}, #000 ${(l*100).toFixed(0)}%)`))}function $9(e="light"){return e==="dark"?{main:ud[200],light:ud[50],dark:ud[400]}:{main:ud[700],light:ud[400],dark:ud[800]}}function R9(e="light"){return e==="dark"?{main:cd[200],light:cd[50],dark:cd[400]}:{main:cd[500],light:cd[300],dark:cd[700]}}function U9(e="light"){return e==="dark"?{main:dd[500],light:dd[300],dark:dd[700]}:{main:dd[700],light:dd[400],dark:dd[800]}}function z9(e="light"){return e==="dark"?{main:md[400],light:md[300],dark:md[700]}:{main:md[700],light:md[500],dark:md[900]}}function F9(e="light"){return e==="dark"?{main:fd[400],light:fd[300],dark:fd[700]}:{main:fd[800],light:fd[500],dark:fd[900]}}function B9(e="light"){return e==="dark"?{main:pm[400],light:pm[300],dark:pm[700]}:{main:"#ed6c02",light:pm[500],dark:pm[900]}}function H9(e){return`oklch(from ${e} var(--__l) 0 h / var(--__a))`}function A1(e){const{mode:s="light",contrastThreshold:a=3,tonalOffset:n=.2,colorSpace:r,...i}=e,l=e.primary||$9(s),c=e.secondary||R9(s),d=e.error||U9(s),m=e.info||z9(s),f=e.success||F9(s),h=e.warning||B9(s);function y(v){return r?H9(v):w9(v,qj.text.primary)>=a?qj.text.primary:d5.text.primary}const N=({color:v,name:C,mainShade:j=500,lightShade:_=300,darkShade:T=700})=>{if(v={...v},!v.main&&v[j]&&(v.main=v[j]),!v.hasOwnProperty("main"))throw new Error(lc(11,C?` (${C})`:"",j));if(typeof v.main!="string")throw new Error(lc(12,C?` (${C})`:"",JSON.stringify(v.main)));return r?(lL(r,v,"light",_,n),lL(r,v,"dark",T,n)):(iL(v,"light",_,n),iL(v,"dark",T,n)),v.contrastText||(v.contrastText=y(v.main)),v};let w;return s==="light"?w=c5():s==="dark"&&(w=u5()),Nn({common:{...Of},mode:s,primary:N({color:l,name:"primary"}),secondary:N({color:c,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:N({color:d,name:"error"}),warning:N({color:h,name:"warning"}),info:N({color:m,name:"info"}),success:N({color:f,name:"success"}),grey:I9,contrastThreshold:a,getContrastText:y,augmentColor:N,tonalOffset:n,...w},i)}function G9(e){const s={};return Object.entries(e).forEach(n=>{const[r,i]=n;typeof i=="object"&&(s[r]=`${i.fontStyle?`${i.fontStyle} `:""}${i.fontVariant?`${i.fontVariant} `:""}${i.fontWeight?`${i.fontWeight} `:""}${i.fontStretch?`${i.fontStretch} `:""}${i.fontSize||""}${i.lineHeight?`/${i.lineHeight} `:""}${i.fontFamily||""}`)}),s}function V9(e,s){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...s}}function W9(e){return Math.round(e*1e5)/1e5}const oL={textTransform:"uppercase"},cL='"Roboto", "Helvetica", "Arial", sans-serif';function Y9(e,s){const{fontFamily:a=cL,fontSize:n=14,fontWeightLight:r=300,fontWeightRegular:i=400,fontWeightMedium:l=500,fontWeightBold:c=700,htmlFontSize:d=16,allVariants:m,pxToRem:f,...h}=typeof s=="function"?s(e):s,y=n/14,N=f||(v=>`${v/d*y}rem`),w=(v,C,j,_,T)=>({fontFamily:a,fontWeight:v,fontSize:N(C),lineHeight:j,...a===cL?{letterSpacing:`${W9(_/C)}em`}:{},...T,...m}),p={h1:w(r,96,1.167,-1.5),h2:w(r,60,1.2,-.5),h3:w(i,48,1.167,0),h4:w(i,34,1.235,.25),h5:w(i,24,1.334,0),h6:w(l,20,1.6,.15),subtitle1:w(i,16,1.75,.15),subtitle2:w(l,14,1.57,.1),body1:w(i,16,1.5,.15),body2:w(i,14,1.43,.15),button:w(l,14,1.75,.4,oL),caption:w(i,12,1.66,.4),overline:w(i,12,2.66,1,oL),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Nn({htmlFontSize:d,pxToRem:N,fontFamily:a,fontSize:n,fontWeightLight:r,fontWeightRegular:i,fontWeightMedium:l,fontWeightBold:c,...p},h,{clone:!1})}const Q9=.2,q9=.14,X9=.12;function _s(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${Q9})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${q9})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${X9})`].join(",")}const K9=["none",_s(0,2,1,-1,0,1,1,0,0,1,3,0),_s(0,3,1,-2,0,2,2,0,0,1,5,0),_s(0,3,3,-2,0,3,4,0,0,1,8,0),_s(0,2,4,-1,0,4,5,0,0,1,10,0),_s(0,3,5,-1,0,5,8,0,0,1,14,0),_s(0,3,5,-1,0,6,10,0,0,1,18,0),_s(0,4,5,-2,0,7,10,1,0,2,16,1),_s(0,5,5,-3,0,8,10,1,0,3,14,2),_s(0,5,6,-3,0,9,12,1,0,3,16,2),_s(0,6,6,-3,0,10,14,1,0,4,18,3),_s(0,6,7,-4,0,11,15,1,0,4,20,3),_s(0,7,8,-4,0,12,17,2,0,5,22,4),_s(0,7,8,-4,0,13,19,2,0,5,24,4),_s(0,7,9,-4,0,14,21,2,0,5,26,4),_s(0,8,9,-5,0,15,22,2,0,6,28,5),_s(0,8,10,-5,0,16,24,2,0,6,30,5),_s(0,8,11,-5,0,17,26,2,0,6,32,5),_s(0,9,11,-5,0,18,28,2,0,7,34,6),_s(0,9,12,-6,0,19,29,2,0,7,36,6),_s(0,10,13,-6,0,20,31,3,0,8,38,7),_s(0,10,13,-6,0,21,33,3,0,8,40,7),_s(0,10,14,-6,0,22,35,3,0,8,42,7),_s(0,11,14,-7,0,23,36,3,0,9,44,8),_s(0,11,15,-7,0,24,38,3,0,9,46,8)],Z9={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},J9={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function dL(e){return`${Math.round(e)}ms`}function eG(e){if(!e)return 0;const s=e/36;return Math.min(Math.round((4+15*s**.25+s/5)*10),3e3)}function tG(e){const s={...Z9,...e.easing},a={...J9,...e.duration};return{getAutoHeightDuration:eG,create:(r=["all"],i={})=>{const{duration:l=a.standard,easing:c=s.easeInOut,delay:d=0,...m}=i;return(Array.isArray(r)?r:[r]).map(f=>`${f} ${typeof l=="string"?l:dL(l)} ${c} ${typeof d=="string"?d:dL(d)}`).join(",")},...e,easing:s,duration:a}}const sG={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function aG(e){return Or(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function m5(e={}){const s={...e};function a(n){const r=Object.entries(n);for(let i=0;i<r.length;i++){const[l,c]=r[i];!aG(c)||l.startsWith("unstable_")?delete n[l]:Or(c)&&(n[l]={...c},a(n[l]))}}return a(s),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(s,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function uL(e){return typeof e=="number"?`${(e*100).toFixed(0)}%`:`calc((${e}) * 100%)`}const nG=e=>{if(!Number.isNaN(+e))return+e;const s=e.match(/\d*\.?\d+/g);if(!s)return 0;let a=0;for(let n=0;n<s.length;n+=1)a+=+s[n];return a};function rG(e){Object.assign(e,{alpha(s,a){const n=this||e;return n.colorSpace?`oklch(from ${s} l c h / ${typeof a=="string"?`calc(${a})`:a})`:n.vars?`rgba(${s.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${typeof a=="string"?`calc(${a})`:a})`:o5(s,nG(a))},lighten(s,a){const n=this||e;return n.colorSpace?`color-mix(in ${n.colorSpace}, ${s}, #fff ${uL(a)})`:I0(s,a)},darken(s,a){const n=this||e;return n.colorSpace?`color-mix(in ${n.colorSpace}, ${s}, #000 ${uL(a)})`:O0(s,a)}})}function Xj(e={},...s){const{breakpoints:a,mixins:n={},spacing:r,palette:i={},transitions:l={},typography:c={},shape:d,colorSpace:m,...f}=e;if(e.vars&&e.generateThemeVars===void 0)throw new Error(lc(20));const h=A1({...i,colorSpace:m}),y=T1(e);let N=Nn(y,{mixins:V9(y.breakpoints,n),palette:h,shadows:K9.slice(),typography:Y9(h,c),transitions:tG(l),zIndex:{...sG}});return N=Nn(N,f),N=s.reduce((w,p)=>Nn(w,p),N),N.unstable_sxConfig={...hh,...f?.unstable_sxConfig},N.unstable_sx=function(p){return Wd({sx:p,theme:this})},N.toRuntimeSource=m5,rG(N),N}function iG(e){let s;return e<1?s=5.11916*e**2:s=4.5*Math.log(e+1)+2,Math.round(s*10)/1e3}const lG=[...Array(25)].map((e,s)=>{if(s===0)return"none";const a=iG(s);return`linear-gradient(rgba(255 255 255 / ${a}), rgba(255 255 255 / ${a}))`});function f5(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function h5(e){return e==="dark"?lG:[]}function oG(e){const{palette:s={mode:"light"},opacity:a,overlays:n,colorSpace:r,...i}=e,l=A1({...s,colorSpace:r});return{palette:l,opacity:{...f5(l.mode),...a},overlays:n||h5(l.mode),...i}}function cG(e){return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!e[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const dG=e=>[...[...Array(25)].map((s,a)=>`--${e?`${e}-`:""}overlays-${a}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],uG=e=>(s,a)=>{const n=e.rootSelector||":root",r=e.colorSchemeSelector;let i=r;if(r==="class"&&(i=".%s"),r==="data"&&(i="[data-%s]"),r?.startsWith("data-")&&!r.includes("%s")&&(i=`[${r}="%s"]`),e.defaultColorScheme===s){if(s==="dark"){const l={};return dG(e.cssVarPrefix).forEach(c=>{l[c]=a[c],delete a[c]}),i==="media"?{[n]:a,"@media (prefers-color-scheme: dark)":{[n]:l}}:i?{[i.replace("%s",s)]:l,[`${n}, ${i.replace("%s",s)}`]:a}:{[n]:{...a,...l}}}if(i&&i!=="media")return`${n}, ${i.replace("%s",String(s))}`}else if(s){if(i==="media")return{[`@media (prefers-color-scheme: ${String(s)})`]:{[n]:a}};if(i)return i.replace("%s",String(s))}return n};function mG(e,s){s.forEach(a=>{e[a]||(e[a]={})})}function Qe(e,s,a){!e[s]&&a&&(e[s]=a)}function df(e){return typeof e!="string"||!e.startsWith("hsl")?e:l5(e)}function bi(e,s){`${s}Channel`in e||(e[`${s}Channel`]=cf(df(e[s])))}function fG(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const Er=e=>{try{return e()}catch{}},hG=(e="mui")=>k9(e);function pN(e,s,a,n,r){if(!a)return;a=a===!0?{}:a;const i=r==="dark"?"dark":"light";if(!n){s[r]=oG({...a,palette:{mode:i,...a?.palette},colorSpace:e});return}const{palette:l,...c}=Xj({...n,palette:{mode:i,...a?.palette},colorSpace:e});return s[r]={...a,palette:l,opacity:{...f5(i),...a?.opacity},overlays:a?.overlays||h5(i)},c}function gG(e={},...s){const{colorSchemes:a={light:!0},defaultColorScheme:n,disableCssColorScheme:r=!1,cssVarPrefix:i="mui",nativeColor:l=!1,shouldSkipGeneratingVar:c=cG,colorSchemeSelector:d=a.light&&a.dark?"media":void 0,rootSelector:m=":root",...f}=e,h=Object.keys(a)[0],y=n||(a.light&&h!=="light"?"light":h),N=hG(i),{[y]:w,light:p,dark:v,...C}=a,j={...C};let _=w;if((y==="dark"&&!("dark"in a)||y==="light"&&!("light"in a))&&(_=!0),!_)throw new Error(lc(21,y));let T;l&&(T="oklch");const k=pN(T,j,_,f,y);p&&!j.light&&pN(T,j,p,void 0,"light"),v&&!j.dark&&pN(T,j,v,void 0,"dark");let E={defaultColorScheme:y,...k,cssVarPrefix:i,colorSchemeSelector:d,rootSelector:m,getCssVar:N,colorSchemes:j,font:{...G9(k.typography),...k.font},spacing:fG(f.spacing)};Object.keys(E.colorSchemes).forEach($=>{const O=E.colorSchemes[$].palette,G=ae=>{const R=ae.split("-"),Z=R[1],te=R[2];return N(ae,O[Z][te])};O.mode==="light"&&(Qe(O.common,"background","#fff"),Qe(O.common,"onBackground","#000")),O.mode==="dark"&&(Qe(O.common,"background","#000"),Qe(O.common,"onBackground","#fff"));function K(ae,R,Z){if(T){let te;return ae===xo&&(te=`transparent ${((1-Z)*100).toFixed(0)}%`),ae===rs&&(te=`#000 ${(Z*100).toFixed(0)}%`),ae===is&&(te=`#fff ${(Z*100).toFixed(0)}%`),`color-mix(in ${T}, ${R}, ${te})`}return ae(R,Z)}if(mG(O,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),O.mode==="light"){Qe(O.Alert,"errorColor",K(rs,O.error.light,.6)),Qe(O.Alert,"infoColor",K(rs,O.info.light,.6)),Qe(O.Alert,"successColor",K(rs,O.success.light,.6)),Qe(O.Alert,"warningColor",K(rs,O.warning.light,.6)),Qe(O.Alert,"errorFilledBg",G("palette-error-main")),Qe(O.Alert,"infoFilledBg",G("palette-info-main")),Qe(O.Alert,"successFilledBg",G("palette-success-main")),Qe(O.Alert,"warningFilledBg",G("palette-warning-main")),Qe(O.Alert,"errorFilledColor",Er(()=>O.getContrastText(O.error.main))),Qe(O.Alert,"infoFilledColor",Er(()=>O.getContrastText(O.info.main))),Qe(O.Alert,"successFilledColor",Er(()=>O.getContrastText(O.success.main))),Qe(O.Alert,"warningFilledColor",Er(()=>O.getContrastText(O.warning.main))),Qe(O.Alert,"errorStandardBg",K(is,O.error.light,.9)),Qe(O.Alert,"infoStandardBg",K(is,O.info.light,.9)),Qe(O.Alert,"successStandardBg",K(is,O.success.light,.9)),Qe(O.Alert,"warningStandardBg",K(is,O.warning.light,.9)),Qe(O.Alert,"errorIconColor",G("palette-error-main")),Qe(O.Alert,"infoIconColor",G("palette-info-main")),Qe(O.Alert,"successIconColor",G("palette-success-main")),Qe(O.Alert,"warningIconColor",G("palette-warning-main")),Qe(O.AppBar,"defaultBg",G("palette-grey-100")),Qe(O.Avatar,"defaultBg",G("palette-grey-400")),Qe(O.Button,"inheritContainedBg",G("palette-grey-300")),Qe(O.Button,"inheritContainedHoverBg",G("palette-grey-A100")),Qe(O.Chip,"defaultBorder",G("palette-grey-400")),Qe(O.Chip,"defaultAvatarColor",G("palette-grey-700")),Qe(O.Chip,"defaultIconColor",G("palette-grey-700")),Qe(O.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),Qe(O.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),Qe(O.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),Qe(O.LinearProgress,"primaryBg",K(is,O.primary.main,.62)),Qe(O.LinearProgress,"secondaryBg",K(is,O.secondary.main,.62)),Qe(O.LinearProgress,"errorBg",K(is,O.error.main,.62)),Qe(O.LinearProgress,"infoBg",K(is,O.info.main,.62)),Qe(O.LinearProgress,"successBg",K(is,O.success.main,.62)),Qe(O.LinearProgress,"warningBg",K(is,O.warning.main,.62)),Qe(O.Skeleton,"bg",T?K(xo,O.text.primary,.11):`rgba(${G("palette-text-primaryChannel")} / 0.11)`),Qe(O.Slider,"primaryTrack",K(is,O.primary.main,.62)),Qe(O.Slider,"secondaryTrack",K(is,O.secondary.main,.62)),Qe(O.Slider,"errorTrack",K(is,O.error.main,.62)),Qe(O.Slider,"infoTrack",K(is,O.info.main,.62)),Qe(O.Slider,"successTrack",K(is,O.success.main,.62)),Qe(O.Slider,"warningTrack",K(is,O.warning.main,.62));const ae=T?K(rs,O.background.default,.6825):rx(O.background.default,.8);Qe(O.SnackbarContent,"bg",ae),Qe(O.SnackbarContent,"color",Er(()=>T?qj.text.primary:O.getContrastText(ae))),Qe(O.SpeedDialAction,"fabHoverBg",rx(O.background.paper,.15)),Qe(O.StepConnector,"border",G("palette-grey-400")),Qe(O.StepContent,"border",G("palette-grey-400")),Qe(O.Switch,"defaultColor",G("palette-common-white")),Qe(O.Switch,"defaultDisabledColor",G("palette-grey-100")),Qe(O.Switch,"primaryDisabledColor",K(is,O.primary.main,.62)),Qe(O.Switch,"secondaryDisabledColor",K(is,O.secondary.main,.62)),Qe(O.Switch,"errorDisabledColor",K(is,O.error.main,.62)),Qe(O.Switch,"infoDisabledColor",K(is,O.info.main,.62)),Qe(O.Switch,"successDisabledColor",K(is,O.success.main,.62)),Qe(O.Switch,"warningDisabledColor",K(is,O.warning.main,.62)),Qe(O.TableCell,"border",K(is,K(xo,O.divider,1),.88)),Qe(O.Tooltip,"bg",K(xo,O.grey[700],.92))}if(O.mode==="dark"){Qe(O.Alert,"errorColor",K(is,O.error.light,.6)),Qe(O.Alert,"infoColor",K(is,O.info.light,.6)),Qe(O.Alert,"successColor",K(is,O.success.light,.6)),Qe(O.Alert,"warningColor",K(is,O.warning.light,.6)),Qe(O.Alert,"errorFilledBg",G("palette-error-dark")),Qe(O.Alert,"infoFilledBg",G("palette-info-dark")),Qe(O.Alert,"successFilledBg",G("palette-success-dark")),Qe(O.Alert,"warningFilledBg",G("palette-warning-dark")),Qe(O.Alert,"errorFilledColor",Er(()=>O.getContrastText(O.error.dark))),Qe(O.Alert,"infoFilledColor",Er(()=>O.getContrastText(O.info.dark))),Qe(O.Alert,"successFilledColor",Er(()=>O.getContrastText(O.success.dark))),Qe(O.Alert,"warningFilledColor",Er(()=>O.getContrastText(O.warning.dark))),Qe(O.Alert,"errorStandardBg",K(rs,O.error.light,.9)),Qe(O.Alert,"infoStandardBg",K(rs,O.info.light,.9)),Qe(O.Alert,"successStandardBg",K(rs,O.success.light,.9)),Qe(O.Alert,"warningStandardBg",K(rs,O.warning.light,.9)),Qe(O.Alert,"errorIconColor",G("palette-error-main")),Qe(O.Alert,"infoIconColor",G("palette-info-main")),Qe(O.Alert,"successIconColor",G("palette-success-main")),Qe(O.Alert,"warningIconColor",G("palette-warning-main")),Qe(O.AppBar,"defaultBg",G("palette-grey-900")),Qe(O.AppBar,"darkBg",G("palette-background-paper")),Qe(O.AppBar,"darkColor",G("palette-text-primary")),Qe(O.Avatar,"defaultBg",G("palette-grey-600")),Qe(O.Button,"inheritContainedBg",G("palette-grey-800")),Qe(O.Button,"inheritContainedHoverBg",G("palette-grey-700")),Qe(O.Chip,"defaultBorder",G("palette-grey-700")),Qe(O.Chip,"defaultAvatarColor",G("palette-grey-300")),Qe(O.Chip,"defaultIconColor",G("palette-grey-300")),Qe(O.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),Qe(O.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),Qe(O.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),Qe(O.LinearProgress,"primaryBg",K(rs,O.primary.main,.5)),Qe(O.LinearProgress,"secondaryBg",K(rs,O.secondary.main,.5)),Qe(O.LinearProgress,"errorBg",K(rs,O.error.main,.5)),Qe(O.LinearProgress,"infoBg",K(rs,O.info.main,.5)),Qe(O.LinearProgress,"successBg",K(rs,O.success.main,.5)),Qe(O.LinearProgress,"warningBg",K(rs,O.warning.main,.5)),Qe(O.Skeleton,"bg",T?K(xo,O.text.primary,.13):`rgba(${G("palette-text-primaryChannel")} / 0.13)`),Qe(O.Slider,"primaryTrack",K(rs,O.primary.main,.5)),Qe(O.Slider,"secondaryTrack",K(rs,O.secondary.main,.5)),Qe(O.Slider,"errorTrack",K(rs,O.error.main,.5)),Qe(O.Slider,"infoTrack",K(rs,O.info.main,.5)),Qe(O.Slider,"successTrack",K(rs,O.success.main,.5)),Qe(O.Slider,"warningTrack",K(rs,O.warning.main,.5));const ae=T?K(is,O.background.default,.985):rx(O.background.default,.98);Qe(O.SnackbarContent,"bg",ae),Qe(O.SnackbarContent,"color",Er(()=>T?d5.text.primary:O.getContrastText(ae))),Qe(O.SpeedDialAction,"fabHoverBg",rx(O.background.paper,.15)),Qe(O.StepConnector,"border",G("palette-grey-600")),Qe(O.StepContent,"border",G("palette-grey-600")),Qe(O.Switch,"defaultColor",G("palette-grey-300")),Qe(O.Switch,"defaultDisabledColor",G("palette-grey-600")),Qe(O.Switch,"primaryDisabledColor",K(rs,O.primary.main,.55)),Qe(O.Switch,"secondaryDisabledColor",K(rs,O.secondary.main,.55)),Qe(O.Switch,"errorDisabledColor",K(rs,O.error.main,.55)),Qe(O.Switch,"infoDisabledColor",K(rs,O.info.main,.55)),Qe(O.Switch,"successDisabledColor",K(rs,O.success.main,.55)),Qe(O.Switch,"warningDisabledColor",K(rs,O.warning.main,.55)),Qe(O.TableCell,"border",K(rs,K(xo,O.divider,1),.68)),Qe(O.Tooltip,"bg",K(xo,O.grey[700],.92))}bi(O.background,"default"),bi(O.background,"paper"),bi(O.common,"background"),bi(O.common,"onBackground"),bi(O,"divider"),Object.keys(O).forEach(ae=>{const R=O[ae];ae!=="tonalOffset"&&R&&typeof R=="object"&&(R.main&&Qe(O[ae],"mainChannel",cf(df(R.main))),R.light&&Qe(O[ae],"lightChannel",cf(df(R.light))),R.dark&&Qe(O[ae],"darkChannel",cf(df(R.dark))),R.contrastText&&Qe(O[ae],"contrastTextChannel",cf(df(R.contrastText))),ae==="text"&&(bi(O[ae],"primary"),bi(O[ae],"secondary")),ae==="action"&&(R.active&&bi(O[ae],"active"),R.selected&&bi(O[ae],"selected")))})}),E=s.reduce(($,O)=>Nn($,O),E);const A={prefix:i,disableCssColorScheme:r,shouldSkipGeneratingVar:c,getSelector:uG(E),enableContrastVars:l},{vars:U,generateThemeVars:B,generateStyleSheets:X}=P9(E,A);return E.vars=U,Object.entries(E.colorSchemes[E.defaultColorScheme]).forEach(([$,O])=>{E[$]=O}),E.generateThemeVars=B,E.generateStyleSheets=X,E.generateSpacing=function(){return JM(f.spacing,y1(this))},E.getColorSchemeSelector=O9(d),E.spacing=E.generateSpacing(),E.shouldSkipGeneratingVar=c,E.unstable_sxConfig={...hh,...f?.unstable_sxConfig},E.unstable_sx=function(O){return Wd({sx:O,theme:this})},E.toRuntimeSource=m5,E}function mL(e,s,a){e.colorSchemes&&a&&(e.colorSchemes[s]={...a!==!0&&a,palette:A1({...a===!0?{}:a.palette,mode:s})})}function xG(e={},...s){const{palette:a,cssVariables:n=!1,colorSchemes:r=a?void 0:{light:!0},defaultColorScheme:i=a?.mode,...l}=e,c=i||"light",d=r?.[c],m={...r,...a?{[c]:{...typeof d!="boolean"&&d,palette:a}}:void 0};if(n===!1){if(!("colorSchemes"in e))return Xj(e,...s);let f=a;"palette"in e||m[c]&&(m[c]!==!0?f=m[c].palette:c==="dark"&&(f={mode:"dark"}));const h=Xj({...e,palette:f},...s);return h.defaultColorScheme=c,h.colorSchemes=m,h.palette.mode==="light"&&(h.colorSchemes.light={...m.light!==!0&&m.light,palette:h.palette},mL(h,"dark",m.dark)),h.palette.mode==="dark"&&(h.colorSchemes.dark={...m.dark!==!0&&m.dark,palette:h.palette},mL(h,"light",m.light)),h}return!a&&!("light"in m)&&c==="light"&&(m.light=!0),gG({...l,colorSchemes:m,defaultColorScheme:c,...typeof n!="boolean"&&n},...s)}const L1=xG(),R0="$$material";function Kr(){const e=t5(L1);return e[R0]||e}function pG(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const g5=e=>pG(e)&&e!=="classes",kt=d9({themeId:R0,defaultTheme:L1,rootShouldForwardProp:g5});function yG(){return ZB}function Wl(e){return T9(e)}function Qr(...e){const s=g.useRef(void 0),a=g.useCallback(n=>{const r=e.map(i=>{if(i==null)return null;if(typeof i=="function"){const l=i,c=l(n);return typeof c=="function"?c:()=>{l(null)}}return i.current=n,()=>{i.current=null}});return()=>{r.forEach(i=>i?.())}},e);return g.useMemo(()=>e.every(n=>n==null)?null:n=>{s.current&&(s.current(),s.current=void 0),n!=null&&(s.current=a(n))},e)}function bG(e){return typeof e=="string"}function x5(e,s,a){return e===void 0||bG(e)?s:{...s,ownerState:{...s.ownerState,...a}}}function p5(e,s,a){return typeof e=="function"?e(s,a):e}function vG(e,s=[]){if(e===void 0)return{};const a={};return Object.keys(e).filter(n=>n.match(/^on[A-Z]/)&&typeof e[n]=="function"&&!s.includes(n)).forEach(n=>{a[n]=e[n]}),a}function fL(e){if(e===void 0)return{};const s={};return Object.keys(e).filter(a=>!(a.match(/^on[A-Z]/)&&typeof e[a]=="function")).forEach(a=>{s[a]=e[a]}),s}function y5(e){const{getSlotProps:s,additionalProps:a,externalSlotProps:n,externalForwardedProps:r,className:i}=e;if(!s){const N=It(a?.className,i,r?.className,n?.className),w={...a?.style,...r?.style,...n?.style},p={...a,...r,...n};return N.length>0&&(p.className=N),Object.keys(w).length>0&&(p.style=w),{props:p,internalRef:void 0}}const l=vG({...r,...n}),c=fL(n),d=fL(r),m=s(l),f=It(m?.className,a?.className,i,r?.className,n?.className),h={...m?.style,...a?.style,...r?.style,...n?.style},y={...m,...a,...d,...c};return f.length>0&&(y.className=f),Object.keys(h).length>0&&(y.style=h),{props:y,internalRef:m.ref}}function hL(e,s){const{className:a,elementType:n,ownerState:r,externalForwardedProps:i,internalForwardedProps:l,shouldForwardComponentProp:c=!1,...d}=s,{component:m,slots:f={[e]:void 0},slotProps:h={[e]:void 0},...y}=i,N=f[e]||n,w=p5(h[e],r),{props:{component:p,...v},internalRef:C}=y5({className:a,...d,externalForwardedProps:e==="root"?y:void 0,externalSlotProps:w}),j=Qr(C,w?.ref,s.ref),_=e==="root"?p||m:p,T=x5(N,{...e==="root"&&!m&&!f[e]&&l,...e!=="root"&&!f[e]&&l,...v,..._&&!c&&{as:_},..._&&c&&{component:_},ref:j},r);return[N,T]}function $t(e,s){if(e==null)return{};var a={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(s.indexOf(n)!==-1)continue;a[n]=e[n]}return a}function Kj(e,s){return Kj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,n){return a.__proto__=n,a},Kj(e,s)}function b5(e,s){e.prototype=Object.create(s.prototype),e.prototype.constructor=e,Kj(e,s)}const gL={disabled:!1},_p=at.createContext(null);var NG=function(s){return s.scrollTop},uf="unmounted",Oo="exited",Io="entering",Ad="entered",Zj="exiting",Xi=(function(e){b5(s,e);function s(n,r){var i;i=e.call(this,n,r)||this;var l=r,c=l&&!l.isMounting?n.enter:n.appear,d;return i.appearStatus=null,n.in?c?(d=Oo,i.appearStatus=Io):d=Ad:n.unmountOnExit||n.mountOnEnter?d=uf:d=Oo,i.state={status:d},i.nextCallback=null,i}s.getDerivedStateFromProps=function(r,i){var l=r.in;return l&&i.status===uf?{status:Oo}:null};var a=s.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(r){var i=null;if(r!==this.props){var l=this.state.status;this.props.in?l!==Io&&l!==Ad&&(i=Io):(l===Io||l===Ad)&&(i=Zj)}this.updateStatus(!1,i)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var r=this.props.timeout,i,l,c;return i=l=c=r,r!=null&&typeof r!="number"&&(i=r.exit,l=r.enter,c=r.appear!==void 0?r.appear:l),{exit:i,enter:l,appear:c}},a.updateStatus=function(r,i){if(r===void 0&&(r=!1),i!==null)if(this.cancelNextCallback(),i===Io){if(this.props.unmountOnExit||this.props.mountOnEnter){var l=this.props.nodeRef?this.props.nodeRef.current:sx.findDOMNode(this);l&&NG(l)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Oo&&this.setState({status:uf})},a.performEnter=function(r){var i=this,l=this.props.enter,c=this.context?this.context.isMounting:r,d=this.props.nodeRef?[c]:[sx.findDOMNode(this),c],m=d[0],f=d[1],h=this.getTimeouts(),y=c?h.appear:h.enter;if(!r&&!l||gL.disabled){this.safeSetState({status:Ad},function(){i.props.onEntered(m)});return}this.props.onEnter(m,f),this.safeSetState({status:Io},function(){i.props.onEntering(m,f),i.onTransitionEnd(y,function(){i.safeSetState({status:Ad},function(){i.props.onEntered(m,f)})})})},a.performExit=function(){var r=this,i=this.props.exit,l=this.getTimeouts(),c=this.props.nodeRef?void 0:sx.findDOMNode(this);if(!i||gL.disabled){this.safeSetState({status:Oo},function(){r.props.onExited(c)});return}this.props.onExit(c),this.safeSetState({status:Zj},function(){r.props.onExiting(c),r.onTransitionEnd(l.exit,function(){r.safeSetState({status:Oo},function(){r.props.onExited(c)})})})},a.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(r,i){i=this.setNextCallback(i),this.setState(r,i)},a.setNextCallback=function(r){var i=this,l=!0;return this.nextCallback=function(c){l&&(l=!1,i.nextCallback=null,r(c))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},a.onTransitionEnd=function(r,i){this.setNextCallback(i);var l=this.props.nodeRef?this.props.nodeRef.current:sx.findDOMNode(this),c=r==null&&!this.props.addEndListener;if(!l||c){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var d=this.props.nodeRef?[this.nextCallback]:[l,this.nextCallback],m=d[0],f=d[1];this.props.addEndListener(m,f)}r!=null&&setTimeout(this.nextCallback,r)},a.render=function(){var r=this.state.status;if(r===uf)return null;var i=this.props,l=i.children;i.in,i.mountOnEnter,i.unmountOnExit,i.appear,i.enter,i.exit,i.timeout,i.addEndListener,i.onEnter,i.onEntering,i.onEntered,i.onExit,i.onExiting,i.onExited,i.nodeRef;var c=$t(i,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return at.createElement(_p.Provider,{value:null},typeof l=="function"?l(r,c):at.cloneElement(at.Children.only(l),c))},s})(at.Component);Xi.contextType=_p;Xi.propTypes={};function hd(){}Xi.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:hd,onEntering:hd,onEntered:hd,onExit:hd,onExiting:hd,onExited:hd};Xi.UNMOUNTED=uf;Xi.EXITED=Oo;Xi.ENTERING=Io;Xi.ENTERED=Ad;Xi.EXITING=Zj;function wG(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k1(e,s){var a=function(i){return s&&g.isValidElement(i)?s(i):i},n=Object.create(null);return e&&g.Children.map(e,function(r){return r}).forEach(function(r){n[r.key]=a(r)}),n}function jG(e,s){e=e||{},s=s||{};function a(f){return f in s?s[f]:e[f]}var n=Object.create(null),r=[];for(var i in e)i in s?r.length&&(n[i]=r,r=[]):r.push(i);var l,c={};for(var d in s){if(n[d])for(l=0;l<n[d].length;l++){var m=n[d][l];c[n[d][l]]=a(m)}c[d]=a(d)}for(l=0;l<r.length;l++)c[r[l]]=a(r[l]);return c}function Vo(e,s,a){return a[s]!=null?a[s]:e.props[s]}function CG(e,s){return k1(e.children,function(a){return g.cloneElement(a,{onExited:s.bind(null,a),in:!0,appear:Vo(a,"appear",e),enter:Vo(a,"enter",e),exit:Vo(a,"exit",e)})})}function SG(e,s,a){var n=k1(e.children),r=jG(s,n);return Object.keys(r).forEach(function(i){var l=r[i];if(g.isValidElement(l)){var c=i in s,d=i in n,m=s[i],f=g.isValidElement(m)&&!m.props.in;d&&(!c||f)?r[i]=g.cloneElement(l,{onExited:a.bind(null,l),in:!0,exit:Vo(l,"exit",e),enter:Vo(l,"enter",e)}):!d&&c&&!f?r[i]=g.cloneElement(l,{in:!1}):d&&c&&g.isValidElement(m)&&(r[i]=g.cloneElement(l,{onExited:a.bind(null,l),in:m.props.in,exit:Vo(l,"exit",e),enter:Vo(l,"enter",e)}))}}),r}var _G=Object.values||function(e){return Object.keys(e).map(function(s){return e[s]})},TG={component:"div",childFactory:function(s){return s}},D1=(function(e){b5(s,e);function s(n,r){var i;i=e.call(this,n,r)||this;var l=i.handleExited.bind(wG(i));return i.state={contextValue:{isMounting:!0},handleExited:l,firstRender:!0},i}var a=s.prototype;return a.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},a.componentWillUnmount=function(){this.mounted=!1},s.getDerivedStateFromProps=function(r,i){var l=i.children,c=i.handleExited,d=i.firstRender;return{children:d?CG(r,c):SG(r,l,c),firstRender:!1}},a.handleExited=function(r,i){var l=k1(this.props.children);r.key in l||(r.props.onExited&&r.props.onExited(i),this.mounted&&this.setState(function(c){var d=Oe({},c.children);return delete d[r.key],{children:d}}))},a.render=function(){var r=this.props,i=r.component,l=r.childFactory,c=$t(r,["component","childFactory"]),d=this.state.contextValue,m=_G(this.state.children).map(l);return delete c.appear,delete c.enter,delete c.exit,i===null?at.createElement(_p.Provider,{value:d},m):at.createElement(_p.Provider,{value:d},at.createElement(i,c,m))},s})(at.Component);D1.propTypes={};D1.defaultProps=TG;function v5(e){return parseInt(g.version,10)>=19?e?.props?.ref||null:e?.ref||null}const EG=e=>e.scrollTop;function xL(e,s){const{timeout:a,easing:n,style:r={}}=e;return{duration:r.transitionDuration??(typeof a=="number"?a:a[s.mode]||0),easing:r.transitionTimingFunction??(typeof n=="object"?n[s.mode]:n),delay:r.transitionDelay}}const AG={entering:{opacity:1},entered:{opacity:1}},LG=g.forwardRef(function(s,a){const n=Kr(),r={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:i,appear:l=!0,children:c,easing:d,in:m,onEnter:f,onEntered:h,onEntering:y,onExit:N,onExited:w,onExiting:p,style:v,timeout:C=r,TransitionComponent:j=Xi,..._}=s,T=g.useRef(null),k=Qr(T,v5(c),a),E=K=>ae=>{if(K){const R=T.current;ae===void 0?K(R):K(R,ae)}},A=E(y),U=E((K,ae)=>{EG(K);const R=xL({style:v,timeout:C,easing:d},{mode:"enter"});K.style.webkitTransition=n.transitions.create("opacity",R),K.style.transition=n.transitions.create("opacity",R),f&&f(K,ae)}),B=E(h),X=E(p),$=E(K=>{const ae=xL({style:v,timeout:C,easing:d},{mode:"exit"});K.style.webkitTransition=n.transitions.create("opacity",ae),K.style.transition=n.transitions.create("opacity",ae),N&&N(K)}),O=E(w),G=K=>{i&&i(T.current,K)};return t.jsx(j,{appear:l,in:m,nodeRef:T,onEnter:U,onEntered:B,onEntering:A,onExit:$,onExited:O,onExiting:X,addEndListener:G,timeout:C,..._,children:(K,{ownerState:ae,...R})=>g.cloneElement(c,{style:{opacity:0,visibility:K==="exited"&&!m?"hidden":void 0,...AG[K],...v,...c.props.style},ref:k,...R})})});function kG(e){return qs("MuiBackdrop",e)}Is("MuiBackdrop",["root","invisible"]);const DG=e=>{const{classes:s,invisible:a}=e;return Qs({root:["root",a&&"invisible"]},kG,s)},MG=kt("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,s)=>{const{ownerState:a}=e;return[s.root,a.invisible&&s.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),PG=g.forwardRef(function(s,a){const n=Wl({props:s,name:"MuiBackdrop"}),{children:r,className:i,component:l="div",invisible:c=!1,open:d,components:m={},componentsProps:f={},slotProps:h={},slots:y={},TransitionComponent:N,transitionDuration:w,...p}=n,v={...n,component:l,invisible:c},C=DG(v),j={transition:N,root:m.Root,...y},_={...f,...h},T={component:l,slots:j,slotProps:_},[k,E]=hL("root",{elementType:MG,externalForwardedProps:T,className:It(C.root,i),ownerState:v}),[A,U]=hL("transition",{elementType:LG,externalForwardedProps:T,ownerState:v});return t.jsx(A,{in:d,timeout:w,...p,...U,children:t.jsx(k,{"aria-hidden":!0,...E,classes:C,ref:a,children:r})})}),cc=L9;function OG(e){return typeof e.main=="string"}function IG(e,s=[]){if(!OG(e))return!1;for(const a of s)if(!e.hasOwnProperty(a)||typeof e[a]!="string")return!1;return!0}function If(e=[]){return([,s])=>s&&IG(s,e)}function $G(e){return qs("MuiCircularProgress",e)}Is("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","track","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const cr=44,Jj=xh`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,eC=xh`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,RG=typeof Jj!="string"?_1`
        animation: ${Jj} 1.4s linear infinite;
      `:null,UG=typeof eC!="string"?_1`
        animation: ${eC} 1.4s ease-in-out infinite;
      `:null,zG=e=>{const{classes:s,variant:a,color:n,disableShrink:r}=e,i={root:["root",a,`color${xs(n)}`],svg:["svg"],track:["track"],circle:["circle",`circle${xs(a)}`,r&&"circleDisableShrink"]};return Qs(i,$G,s)},FG=kt("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,s)=>{const{ownerState:a}=e;return[s.root,s[a.variant],s[`color${xs(a.color)}`]]}})(cc(({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:RG||{animation:`${Jj} 1.4s linear infinite`}},...Object.entries(e.palette).filter(If()).map(([s])=>({props:{color:s},style:{color:(e.vars||e).palette[s].main}}))]}))),BG=kt("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),HG=kt("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,s)=>{const{ownerState:a}=e;return[s.circle,s[`circle${xs(a.variant)}`],a.disableShrink&&s.circleDisableShrink]}})(cc(({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:s})=>s.variant==="indeterminate"&&!s.disableShrink,style:UG||{animation:`${eC} 1.4s ease-in-out infinite`}}]}))),GG=kt("circle",{name:"MuiCircularProgress",slot:"Track"})(cc(({theme:e})=>({stroke:"currentColor",opacity:(e.vars||e).palette.action.activatedOpacity}))),M1=g.forwardRef(function(s,a){const n=Wl({props:s,name:"MuiCircularProgress"}),{className:r,color:i="primary",disableShrink:l=!1,enableTrackSlot:c=!1,size:d=40,style:m,thickness:f=3.6,value:h=0,variant:y="indeterminate",...N}=n,w={...n,color:i,disableShrink:l,size:d,thickness:f,value:h,variant:y,enableTrackSlot:c},p=zG(w),v={},C={},j={};if(y==="determinate"){const _=2*Math.PI*((cr-f)/2);v.strokeDasharray=_.toFixed(3),j["aria-valuenow"]=Math.round(h),v.strokeDashoffset=`${((100-h)/100*_).toFixed(3)}px`,C.transform="rotate(-90deg)"}return t.jsx(FG,{className:It(p.root,r),style:{width:d,height:d,...C,...m},ownerState:w,ref:a,role:"progressbar",...j,...N,children:t.jsxs(BG,{className:p.svg,ownerState:w,viewBox:`${cr/2} ${cr/2} ${cr} ${cr}`,children:[c?t.jsx(GG,{className:p.track,ownerState:w,cx:cr,cy:cr,r:(cr-f)/2,fill:"none",strokeWidth:f,"aria-hidden":"true"}):null,t.jsx(HG,{className:p.circle,style:v,ownerState:w,cx:cr,cy:cr,r:(cr-f)/2,fill:"none",strokeWidth:f})]})})});function N5(e){return t.jsx(PG,{sx:s=>({color:"#fff",zIndex:s.zIndex.drawer+1}),open:e,children:t.jsx(M1,{color:"inherit"})})}var xa={},ix={},pL;function VG(){if(pL)return ix;pL=1,Object.defineProperty(ix,"__esModule",{value:!0});function e(s,a){return s.reduce((n,r)=>{const i=String(r[a]);return n[i]||(n[i]=[]),n[i].push(r),n},{})}return ix.default=e,ix}var lx={},yL;function WG(){if(yL)return lx;yL=1,Object.defineProperty(lx,"__esModule",{value:!0});function e(s,a){return s.replace(/{([^{}]*)}/g,(n,r)=>{const i=a[r];return typeof i=="string"||typeof i=="number"?i.toString():n})}return lx.default=e,lx}var ox={},bL;function YG(){if(bL)return ox;bL=1,Object.defineProperty(ox,"__esModule",{value:!0});const e=[{countryNameEn:"Andorra",countryNameLocal:"Andorra",countryCode:"AD",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"ca",officialLanguageNameEn:"Catalan, Valencian",officialLanguageNameLocal:"Catal, Valenci",countryCallingCode:"376",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Afghanistan",countryNameLocal:"     ,   ",countryCode:"AF",currencyCode:"AFN",currencyNameEn:"Afghan afghani",tinType:"",tinName:"",officialLanguageCode:"fa",officialLanguageNameEn:"Persian",officialLanguageNameLocal:"",countryCallingCode:"93",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Antigua and Barbuda",countryNameLocal:"Antigua and Barbuda",countryCode:"AG",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1268",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Anguilla",countryNameLocal:"Anguilla",countryCode:"AI",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1264",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Albania",countryNameLocal:"Shqipria",countryCode:"AL",currencyCode:"ALL",currencyNameEn:"Albanian lek",tinType:"NIPT",tinName:"Numri i Identifikimit pr Personin e Tatueshm",officialLanguageCode:"sq",officialLanguageNameEn:"Albanian",officialLanguageNameLocal:"Shqip",countryCallingCode:"355",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Armenia",countryNameLocal:"",countryCode:"AM",currencyCode:"AMD",currencyNameEn:"Armenian dram",tinType:"",tinName:"",officialLanguageCode:"hy",officialLanguageNameEn:"Armenian",officialLanguageNameLocal:"",countryCallingCode:"374",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Angola",countryNameLocal:"Angola",countryCode:"AO",currencyCode:"AOA",currencyNameEn:"Angolan kwanza",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"244",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Antarctica",countryNameLocal:"Antarctica, Antrtico, Antarctique, ",countryCode:"AQ",currencyCode:"",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"672",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Argentina",countryNameLocal:"Argentina",countryCode:"AR",currencyCode:"ARS",currencyNameEn:"Argentine peso",tinType:"CUIT",tinName:"Cdigo nico de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"54",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"American Samoa",countryNameLocal:"American Samoa",countryCode:"AS",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1684",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Austria",countryNameLocal:"sterreich",countryCode:"AT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"UID",tinName:"Umsatzsteuer-Identifikationsnummer",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"43",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Australia",countryNameLocal:"Australia",countryCode:"AU",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"ABN",tinName:"Australian Business Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"61",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Aruba",countryNameLocal:"Aruba",countryCode:"AW",currencyCode:"AWG",currencyNameEn:"Aruban florin",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"297",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"land Islands",countryNameLocal:"land",countryCode:"AX",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"sv",officialLanguageNameEn:"Swedish",officialLanguageNameLocal:"Svenska",countryCallingCode:"358",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Azerbaijan",countryNameLocal:"Azrbaycan",countryCode:"AZ",currencyCode:"AZN",currencyNameEn:"Azerbaijani manat",tinType:"",tinName:"",officialLanguageCode:"az",officialLanguageNameEn:"Azerbaijani",officialLanguageNameLocal:"azrbaycan dili",countryCallingCode:"994",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Bosnia and Herzegovina",countryNameLocal:"Bosna i Hercegovina",countryCode:"BA",currencyCode:"BAM",currencyNameEn:"Bosnia and Herzegovina convertible mark",tinType:"",tinName:"",officialLanguageCode:"bs",officialLanguageNameEn:"Bosnian",officialLanguageNameLocal:"bosanski jezik",countryCallingCode:"387",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Barbados",countryNameLocal:"Barbados",countryCode:"BB",currencyCode:"BBD",currencyNameEn:"Barbados dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1246",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bangladesh",countryNameLocal:" ",countryCode:"BD",currencyCode:"BDT",currencyNameEn:"Bangladeshi taka",tinType:"",tinName:"",officialLanguageCode:"bn",officialLanguageNameEn:"Bengali",officialLanguageNameLocal:"",countryCallingCode:"880",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Belgium",countryNameLocal:"Belgi, Belgique, Belgien",countryCode:"BE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"n TVABTW-nr Mwst-nr",tinName:"BTW identificatienummer / Numro de TVA",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"32",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Burkina Faso",countryNameLocal:"Burkina Faso",countryCode:"BF",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"226",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Bulgaria",countryNameLocal:"",countryCode:"BG",currencyCode:"BGN",currencyNameEn:"Bulgarian lev",tinType:" ",tinName:"   ",officialLanguageCode:"bg",officialLanguageNameEn:"Bulgarian",officialLanguageNameLocal:" ",countryCallingCode:"359",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Bahrain",countryNameLocal:"",countryCode:"BH",currencyCode:"BHD",currencyNameEn:"Bahraini dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"973",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Burundi",countryNameLocal:"Burundi",countryCode:"BI",currencyCode:"BIF",currencyNameEn:"Burundian franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"257",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Benin",countryNameLocal:"Bnin",countryCode:"BJ",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"229",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Saint Barthlemy",countryNameLocal:"Saint-Barthlemy",countryCode:"BL",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"590",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bermuda",countryNameLocal:"Bermuda",countryCode:"BM",currencyCode:"BMD",currencyNameEn:"Bermudian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1441",areaCodes:[],region:"North America",flag:""},{countryNameEn:"Brunei Darussalam",countryNameLocal:"Brunei Darussalam",countryCode:"BN",currencyCode:"BND",currencyNameEn:"Brunei dollar",tinType:"",tinName:"",officialLanguageCode:"ms",officialLanguageNameEn:"Malay",officialLanguageNameLocal:"Bahasa Melayu,  ",countryCallingCode:"673",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Bolivia (Plurinational State of)",countryNameLocal:"Bolivia, Bulibiya, Volvia, Wuliwya",countryCode:"BO",currencyCode:"BOP",currencyNameEn:"",tinType:"NIT",tinName:"Nmero de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"591",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bonaire, Sint Eustatius and Saba",countryNameLocal:"Caribisch Nederland",countryCode:"BQ",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"5997",areaCodes:[],region:"Unknown",flag:""},{countryNameEn:"Brazil",countryNameLocal:"Brasil",countryCode:"BR",currencyCode:"BRL",currencyNameEn:"Brazilian real",tinType:"CNPJ",tinName:"Cadastro Nacional de Pessoa Jurdica",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"55",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bhutan",countryNameLocal:"",countryCode:"BT",currencyCode:"BTN",currencyNameEn:"Bhutanese ngultrum",tinType:"",tinName:"",officialLanguageCode:"dz",officialLanguageNameEn:"Dzongkha",officialLanguageNameLocal:"",countryCallingCode:"975",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Bouvet Island",countryNameLocal:"Bouvetya",countryCode:"BV",currencyCode:"NOK",currencyNameEn:"Norwegian krone",tinType:"",tinName:"",officialLanguageCode:"no",officialLanguageNameEn:"Norwegian",officialLanguageNameLocal:"Norsk",countryCallingCode:"47",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Botswana",countryNameLocal:"Botswana",countryCode:"BW",currencyCode:"BWP",currencyNameEn:"Botswana pula",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"267",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Belarus",countryNameLocal:"",countryCode:"BY",currencyCode:"BYR",currencyNameEn:"",tinType:" (UNP)",tinName:"  ",officialLanguageCode:"be",officialLanguageNameEn:"Belarusian",officialLanguageNameLocal:" ",countryCallingCode:"375",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Belize",countryNameLocal:"Belize",countryCode:"BZ",currencyCode:"BZD",currencyNameEn:"Belize dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"501",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Canada",countryNameLocal:"Canada",countryCode:"CA",currencyCode:"CAD",currencyNameEn:"Canadian dollar",tinType:"BN / NE",tinName:"Business Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:["403","587","780","825","236","250","604","672","778","204","431","506","709","782","902","226","249","289","343","365","416","437","519","548","613","647","705","807","905","367","418","438","450","514","579","581","819","873","306","639","867"],region:"North America",flag:""},{countryNameEn:"Switzerland",countryNameLocal:"Schweiz, Suisse, Svizzera, Svizra",countryCode:"CH",currencyCode:"CHF",currencyNameEn:"Swiss franc",tinType:"MWST/TVA/IVA",tinName:"Mehrwertsteuernummer",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"41",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Cte d'Ivoire",countryNameLocal:"Cte d'Ivoire",countryCode:"CI",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"225",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Chile",countryNameLocal:"Chile",countryCode:"CL",currencyCode:"CLP",currencyNameEn:"Chilean peso",tinType:"RUT",tinName:"Rol nico Tributario",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"56",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Cameroon",countryNameLocal:"Cameroun, Cameroon",countryCode:"CM",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"237",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"China",countryNameLocal:"",countryCode:"CN",currencyCode:"CNY",currencyNameEn:"Renminbi (Chinese) yuan",tinType:"",tinName:"",officialLanguageCode:"zh-hans",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"86",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Colombia",countryNameLocal:"Colombia",countryCode:"CO",currencyCode:"COP",currencyNameEn:"Colombian peso",tinType:"NIT",tinName:"Nmero De Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"57",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Costa Rica",countryNameLocal:"Costa Rica",countryCode:"CR",currencyCode:"CRC",currencyNameEn:"Costa Rican colon",tinType:"",tinName:"Cdula Jurdica",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"506",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Cuba",countryNameLocal:"Cuba",countryCode:"CU",currencyCode:"CUC",currencyNameEn:"Cuban convertible peso",tinType:"",tinName:"",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"53",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Cabo Verde",countryNameLocal:"Cabo Verde",countryCode:"CV",currencyCode:"CVE",currencyNameEn:"Cape Verdean escudo",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"238",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Curaao",countryNameLocal:"Curaao",countryCode:"CW",currencyCode:"ANG",currencyNameEn:"Netherlands Antillean guilder",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"599",areaCodes:[],region:"Unknown",flag:""},{countryNameEn:"Christmas Island",countryNameLocal:"Christmas Island",countryCode:"CX",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"61",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Cyprus",countryNameLocal:", Kibris",countryCode:"CY",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"  ...",officialLanguageCode:"el",officialLanguageNameEn:"Greek, Modern (1453-)",officialLanguageNameLocal:"",countryCallingCode:"357",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Germany",countryNameLocal:"Deutschland",countryCode:"DE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"USt-IdNr.",tinName:"Umsatzsteuer-Identifikationsnummer",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"49",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Djibouti",countryNameLocal:"Djibouti, , Jabuuti, Gabuutih",countryCode:"DJ",currencyCode:"DJF",currencyNameEn:"Djiboutian franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"253",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Denmark",countryNameLocal:"Danmark",countryCode:"DK",currencyCode:"DKK",currencyNameEn:"Danish krone",tinType:"CVR",tinName:"Momsregistreringsnummer",officialLanguageCode:"da",officialLanguageNameEn:"Danish",officialLanguageNameLocal:"dansk",countryCallingCode:"45",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Dominica",countryNameLocal:"Dominica",countryCode:"DM",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"767",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Algeria",countryNameLocal:"",countryCode:"DZ",currencyCode:"DZD",currencyNameEn:"Algerian dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"213",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Ecuador",countryNameLocal:"Ecuador",countryCode:"EC",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"RUC",tinName:"Nmero de Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"593",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Estonia",countryNameLocal:"Eesti",countryCode:"EE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"KMKR",tinName:"Kibemaksukohustuslase number",officialLanguageCode:"et",officialLanguageNameEn:"Estonian",officialLanguageNameLocal:"eesti, eesti keel",countryCallingCode:"372",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Egypt",countryNameLocal:"",countryCode:"EG",currencyCode:"EGP",currencyNameEn:"Egyptian pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"20",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Western Sahara",countryNameLocal:"Sahara Occidental",countryCode:"EH",currencyCode:"MAD",currencyNameEn:"Moroccan dirham",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"212",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Eritrea",countryNameLocal:", , Eritrea",countryCode:"ER",currencyCode:"ERN",currencyNameEn:"Eritrean nakfa",tinType:"",tinName:"",officialLanguageCode:"ti",officialLanguageNameEn:"Tigrinya",officialLanguageNameLocal:"",countryCallingCode:"291",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Spain",countryNameLocal:"Espaa",countryCode:"ES",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"NIF (CIF)",tinName:"Nmero de Identificacin Fiscal (formerly named Cdigo de Identificacin Fiscal)",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"34",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Ethiopia",countryNameLocal:", Itoophiyaa",countryCode:"ET",currencyCode:"ETB",currencyNameEn:"Ethiopian birr",tinType:"",tinName:"",officialLanguageCode:"am",officialLanguageNameEn:"Amharic",officialLanguageNameLocal:"",countryCallingCode:"251",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Finland",countryNameLocal:"Suomi",countryCode:"FI",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"ALV nro",tinName:"Arvonlisveronumero",officialLanguageCode:"fi",officialLanguageNameEn:"Finnish",officialLanguageNameLocal:"suomi, suomen kieli",countryCallingCode:"358",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Fiji",countryNameLocal:"Fiji",countryCode:"FJ",currencyCode:"FJD",currencyNameEn:"Fiji dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"679",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Micronesia (Federated States of)",countryNameLocal:"Micronesia",countryCode:"FM",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"691",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"France",countryNameLocal:"France",countryCode:"FR",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"n TVA",tinName:"Numro d'identification  la taxe sur la valeur ajoute / Numro de TVA intracommunautaire",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"33",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Gabon",countryNameLocal:"Gabon",countryCode:"GA",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"241",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Grenada",countryNameLocal:"Grenada",countryCode:"GD",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1473",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Georgia",countryNameLocal:"",countryCode:"GE",currencyCode:"GEL",currencyNameEn:"Georgian lari",tinType:"",tinName:"",officialLanguageCode:"ka",officialLanguageNameEn:"Georgian",officialLanguageNameLocal:"",countryCallingCode:"995",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"French Guiana",countryNameLocal:"Guyane franaise",countryCode:"GF",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"594",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Guernsey",countryNameLocal:"Guernsey",countryCode:"GG",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Ghana",countryNameLocal:"Ghana",countryCode:"GH",currencyCode:"GHS",currencyNameEn:"Ghanaian cedi",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"233",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Gibraltar",countryNameLocal:"Gibraltar",countryCode:"GI",currencyCode:"GIP",currencyNameEn:"Gibraltar pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"350",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Greenland",countryNameLocal:"Kalaallit Nunaat, Grnland",countryCode:"GL",currencyCode:"DKK",currencyNameEn:"Danish krone",tinType:"",tinName:"",officialLanguageCode:"kl",officialLanguageNameEn:"Kalaallisut, Greenlandic",officialLanguageNameLocal:"kalaallisut, kalaallit oqaasii",countryCallingCode:"299",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Guinea",countryNameLocal:"Guine",countryCode:"GN",currencyCode:"GNF",currencyNameEn:"Guinean franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"224",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Guadeloupe",countryNameLocal:"Guadeloupe",countryCode:"GP",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"590",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Equatorial Guinea",countryNameLocal:"Guiena ecuatorial, Guine quatoriale, Guin Equatorial",countryCode:"GQ",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"240",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Greece",countryNameLocal:"",countryCode:"GR",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"el",officialLanguageNameEn:"Greek, Modern (1453-)",officialLanguageNameLocal:"",countryCallingCode:"30",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"South Georgia and the South Sandwich Islands",countryNameLocal:"South Georgia and the South Sandwich Islands",countryCode:"GS",currencyCode:"",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"500",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Guatemala",countryNameLocal:"Guatemala",countryCode:"GT",currencyCode:"GTQ",currencyNameEn:"Guatemalan quetzal",tinType:"NIT",tinName:"Nmero de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"502",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Guam",countryNameLocal:"Guam, Guhn",countryCode:"GU",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Guinea-Bissau",countryNameLocal:"Guin-Bissau",countryCode:"GW",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"245",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Guyana",countryNameLocal:"Guyana",countryCode:"GY",currencyCode:"GYD",currencyNameEn:"Guyanese dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"592",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Hong Kong",countryNameLocal:", Hong Kong",countryCode:"HK",currencyCode:"HKD",currencyNameEn:"Hong Kong dollar",tinType:"",tinName:"",officialLanguageCode:"zh-hant",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"852",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Honduras",countryNameLocal:"Honduras",countryCode:"HN",currencyCode:"HNL",currencyNameEn:"Honduran lempira",tinType:"RTN",tinName:"Registro Tributario Nacional",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"504",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Croatia",countryNameLocal:"Hrvatska",countryCode:"HR",currencyCode:"HRK",currencyNameEn:"Croatian kuna",tinType:"PDV-ID; OIB",tinName:"PDV Id. Broj OIB",officialLanguageCode:"hr",officialLanguageNameEn:"Croatian",officialLanguageNameLocal:"hrvatski jezik",countryCallingCode:"385",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Haiti",countryNameLocal:"Hati, Ayiti",countryCode:"HT",currencyCode:"HTG",currencyNameEn:"Haitian gourde",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"509",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Hungary",countryNameLocal:"Magyarorszg",countryCode:"HU",currencyCode:"HUF",currencyNameEn:"Hungarian forint",tinType:"ANUM",tinName:"Kzssgi adszm",officialLanguageCode:"hu",officialLanguageNameEn:"Hungarian",officialLanguageNameLocal:"magyar",countryCallingCode:"36",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Indonesia",countryNameLocal:"Indonesia",countryCode:"ID",currencyCode:"IDR",currencyNameEn:"Indonesian rupiah",tinType:"NPWP",tinName:"Nomor Pokok Wajib Pajak",officialLanguageCode:"id",officialLanguageNameEn:"Indonesian",officialLanguageNameLocal:"Bahasa Indonesia",countryCallingCode:"62",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Ireland",countryNameLocal:"Ireland, ire",countryCode:"IE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"VAT or CBL",tinName:"Value added tax identification no.",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"353",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Israel",countryNameLocal:"",countryCode:"IL",currencyCode:"ILS",currencyNameEn:"Israeli new shekel",tinType:"",tinName:`'   / "`,officialLanguageCode:"he",officialLanguageNameEn:"Hebrew",officialLanguageNameLocal:"",countryCallingCode:"972",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Isle of Man",countryNameLocal:"Isle of Man",countryCode:"IM",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"India",countryNameLocal:", India",countryCode:"IN",currencyCode:"INR",currencyNameEn:"Indian rupee",tinType:"VAT TIN / CST TIN",tinName:"Value Added Tax - Taxpayer Identification Number / Central Sales Tax - Taxpayer Identification Number (In most states)Not applicable",officialLanguageCode:"hi",officialLanguageNameEn:"Hindi",officialLanguageNameLocal:", ",countryCallingCode:"91",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"British Indian Ocean Territories",countryNameLocal:"British Indian Ocean Territories",countryCode:"IO",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"246",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"Iraq",countryNameLocal:", Iraq",countryCode:"IQ",currencyCode:"IQD",currencyNameEn:"Iraqi dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"964",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Iran (Islamic Republic of)",countryNameLocal:"",countryCode:"IR",currencyCode:"IRR",currencyNameEn:"Iranian rial",tinType:"",tinName:"",officialLanguageCode:"fa",officialLanguageNameEn:"Persian",officialLanguageNameLocal:"",countryCallingCode:"98",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Iceland",countryNameLocal:"sland",countryCode:"IS",currencyCode:"ISK",currencyNameEn:"Icelandic krna",tinType:"VSK / VASK",tinName:"Virisaukaskattsnmer",officialLanguageCode:"is",officialLanguageNameEn:"Icelandic",officialLanguageNameLocal:"slenska",countryCallingCode:"354",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Italy",countryNameLocal:"Italia",countryCode:"IT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"P.IVA",tinName:"Partita IVA(IVA = Imposta sul Valore Aggiunto)",officialLanguageCode:"it",officialLanguageNameEn:"Italian",officialLanguageNameLocal:"Italiano",countryCallingCode:"39",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Jersey",countryNameLocal:"Jersey",countryCode:"JE",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Jamaica",countryNameLocal:"Jamaica",countryCode:"JM",currencyCode:"JMD",currencyNameEn:"Jamaican dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"876",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Jordan",countryNameLocal:"",countryCode:"JO",currencyCode:"JOD",currencyNameEn:"Jordanian dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"962",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Japan",countryNameLocal:"",countryCode:"JP",currencyCode:"JPY",currencyNameEn:"Japanese yen",tinType:"",tinName:"",officialLanguageCode:"ja",officialLanguageNameEn:"Japanese",officialLanguageNameLocal:" ()",countryCallingCode:"81",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Kenya",countryNameLocal:"Kenya",countryCode:"KE",currencyCode:"KES",currencyNameEn:"Kenyan shilling",tinType:"",tinName:"",officialLanguageCode:"sw",officialLanguageNameEn:"Swahili",officialLanguageNameLocal:"Kiswahili",countryCallingCode:"254",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Kyrgyzstan",countryNameLocal:", ",countryCode:"KG",currencyCode:"KGS",currencyNameEn:"Kyrgyzstani som",tinType:"",tinName:"",officialLanguageCode:"ky",officialLanguageNameEn:"Kirghiz, Kyrgyz",officialLanguageNameLocal:",  ",countryCallingCode:"996",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Cambodia",countryNameLocal:"",countryCode:"KH",currencyCode:"KHR",currencyNameEn:"Cambodian riel",tinType:"",tinName:"",officialLanguageCode:"km",officialLanguageNameEn:"Central Khmer",officialLanguageNameLocal:", , ",countryCallingCode:"855",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"North Korea",countryNameLocal:"",countryCode:"KP",currencyCode:"KPW",currencyNameEn:"North Korean won",tinType:"",tinName:"",officialLanguageCode:"ko",officialLanguageNameEn:"Korean",officialLanguageNameLocal:"",countryCallingCode:"850",areaCodes:[],region:"Asia",flag:""},{countryNameEn:"South Korea",countryNameLocal:"",countryCode:"KR",currencyCode:"KRW",currencyNameEn:"South Korean won",tinType:"",tinName:"",officialLanguageCode:"ko",officialLanguageNameEn:"Korean",officialLanguageNameLocal:"",countryCallingCode:"82",areaCodes:[],region:"Asia",flag:""},{countryNameEn:"Kiribati",countryNameLocal:"Kiribati",countryCode:"KI",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"686",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Saint Kitts and Nevis",countryNameLocal:"Saint Kitts and Nevis",countryCode:"KN",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1869",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Kuwait",countryNameLocal:"",countryCode:"KW",currencyCode:"KWD",currencyNameEn:"Kuwaiti dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"965",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Kazakhstan",countryNameLocal:", ",countryCode:"KZ",currencyCode:"KZT",currencyNameEn:"Kazakhstani tenge",tinType:"",tinName:"",officialLanguageCode:"kk",officialLanguageNameEn:"Kazakh",officialLanguageNameLocal:" ",countryCallingCode:"7",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Lebanon",countryNameLocal:", Liban",countryCode:"LB",currencyCode:"LBP",currencyNameEn:"Lebanese pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"961",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Saint Lucia",countryNameLocal:"Saint Lucia",countryCode:"LC",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1758",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Liechtenstein",countryNameLocal:"Liechtenstein",countryCode:"LI",currencyCode:"CHF",currencyNameEn:"Swiss franc",tinType:"",tinName:"",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"423",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Sri Lanka",countryNameLocal:" , ",countryCode:"LK",currencyCode:"LKR",currencyNameEn:"Sri Lankan rupee",tinType:"",tinName:"",officialLanguageCode:"si",officialLanguageNameEn:"Sinhala, Sinhalese",officialLanguageNameLocal:"",countryCallingCode:"94",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Liberia",countryNameLocal:"Liberia",countryCode:"LR",currencyCode:"LRD",currencyNameEn:"Liberian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"231",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Lesotho",countryNameLocal:"Lesotho",countryCode:"LS",currencyCode:"LSL",currencyNameEn:"Lesotho loti",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"266",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Lithuania",countryNameLocal:"Lietuva",countryCode:"LT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"PVM kodas",tinName:"PVM (abbrev. Pridtins verts mokestis) moktojo kodas",officialLanguageCode:"lt",officialLanguageNameEn:"Lithuanian",officialLanguageNameLocal:"lietuvi kalba",countryCallingCode:"370",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Luxembourg",countryNameLocal:"Ltzebuerg, Luxembourg, Luxemburg",countryCode:"LU",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"No. TVA",tinName:"Numro d'identification  la taxe sur la valeur ajoute",officialLanguageCode:"lb",officialLanguageNameEn:"Luxembourgish, Letzeburgesch",officialLanguageNameLocal:"Ltzebuergesch",countryCallingCode:"352",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Latvia",countryNameLocal:"Latvija",countryCode:"LV",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"PVN",tinName:"Pievienots vrtbas nodoka (PVN) reistrcijas numurs",officialLanguageCode:"lv",officialLanguageNameEn:"Latvian",officialLanguageNameLocal:"latvieu valoda",countryCallingCode:"371",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Libya",countryNameLocal:"",countryCode:"LY",currencyCode:"LYD",currencyNameEn:"Libyan dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"218",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Morocco",countryNameLocal:"Maroc, , ",countryCode:"MA",currencyCode:"MAD",currencyNameEn:"Moroccan dirham",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"212",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Monaco",countryNameLocal:"Monaco",countryCode:"MC",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"377",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Montenegro",countryNameLocal:"Crna Gora,  ",countryCode:"ME",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"srp",officialLanguageNameEn:" ",officialLanguageNameLocal:"",countryCallingCode:"382",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Saint Martin (French part)",countryNameLocal:"Saint-Martin",countryCode:"MF",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"590",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Madagascar",countryNameLocal:"Madagasikara, Madagascar",countryCode:"MG",currencyCode:"MGA",currencyNameEn:"Malagasy ariary",tinType:"",tinName:"",officialLanguageCode:"mg",officialLanguageNameEn:"Malagasy",officialLanguageNameLocal:"fiteny malagasy",countryCallingCode:"261",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Mali",countryNameLocal:"Mali",countryCode:"ML",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"223",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Myanmar",countryNameLocal:"",countryCode:"MM",currencyCode:"MMK",currencyNameEn:"Myanmar kyat",tinType:"",tinName:"",officialLanguageCode:"my",officialLanguageNameEn:"Burmese",officialLanguageNameLocal:"",countryCallingCode:"95",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Mongolia",countryNameLocal:" ",countryCode:"MN",currencyCode:"MNT",currencyNameEn:"Mongolian tgrg",tinType:"",tinName:"",officialLanguageCode:"mn",officialLanguageNameEn:"Mongolian",officialLanguageNameLocal:" ",countryCallingCode:"976",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Macao",countryNameLocal:", Macau",countryCode:"MO",currencyCode:"MOP",currencyNameEn:"Macanese pataca",tinType:"",tinName:"",officialLanguageCode:"zh-hant",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"853",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Martinique",countryNameLocal:"Martinique",countryCode:"MQ",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"596",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Mauritania",countryNameLocal:", Mauritanie",countryCode:"MR",currencyCode:"MRU",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"222",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Montserrat",countryNameLocal:"Montserrat",countryCode:"MS",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1664",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Malta",countryNameLocal:"Malta",countryCode:"MT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"Vat No.",tinName:"Vat reg. no.",officialLanguageCode:"mt",officialLanguageNameEn:"Maltese",officialLanguageNameLocal:"Malti",countryCallingCode:"356",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Mauritius",countryNameLocal:"Maurice, Mauritius",countryCode:"MU",currencyCode:"MUR",currencyNameEn:"Mauritian rupee",tinType:"",tinName:"",officialLanguageCode:"mfe",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"230",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Maldives",countryNameLocal:"",countryCode:"MV",currencyCode:"MVR",currencyNameEn:"Maldivian rufiyaa",tinType:"",tinName:"",officialLanguageCode:"dv",officialLanguageNameEn:"Divehi, Dhivehi, Maldivian",officialLanguageNameLocal:"",countryCallingCode:"960",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Malawi",countryNameLocal:"Malawi",countryCode:"MW",currencyCode:"MWK",currencyNameEn:"Malawian kwacha",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"265",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Mexico",countryNameLocal:"Mxico",countryCode:"MX",currencyCode:"MXN",currencyNameEn:"Mexican peso",tinType:"RFC",tinName:"Registro Federal de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"52",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Malaysia",countryNameLocal:"",countryCode:"MY",currencyCode:"MYR",currencyNameEn:"Malaysian ringgit",tinType:"",tinName:"",officialLanguageCode:"ms",officialLanguageNameEn:"Malay",officialLanguageNameLocal:"Bahasa Melayu,  ",countryCallingCode:"60",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Mozambique",countryNameLocal:"Mozambique",countryCode:"MZ",currencyCode:"MZN",currencyNameEn:"Mozambican metical",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"258",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Namibia",countryNameLocal:"Namibia",countryCode:"NA",currencyCode:"NAD",currencyNameEn:"Namibian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"264",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"New Caledonia",countryNameLocal:"Nouvelle-Caldonie",countryCode:"NC",currencyCode:"XPF",currencyNameEn:"CFP franc (franc Pacifique)",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"687",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Norfolk Island",countryNameLocal:"Norfolk Island",countryCode:"NF",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"672",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Nigeria",countryNameLocal:"Nigeria",countryCode:"NG",currencyCode:"NGN",currencyNameEn:"Nigerian naira",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"234",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Nicaragua",countryNameLocal:"Nicaragua",countryCode:"NI",currencyCode:"NIO",currencyNameEn:"Nicaraguan crdoba",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"505",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Norway",countryNameLocal:"Norge, Noreg",countryCode:"NO",currencyCode:"NOK",currencyNameEn:"Norwegian krone",tinType:"Orgnr",tinName:"Organisasjonsnummer",officialLanguageCode:"nb",officialLanguageNameEn:"Norwegian Bokml",officialLanguageNameLocal:"Norsk Bokml",countryCallingCode:"47",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Nepal",countryNameLocal:"",countryCode:"NP",currencyCode:"NPR",currencyNameEn:"Nepalese rupee",tinType:"",tinName:"",officialLanguageCode:"ne",officialLanguageNameEn:"Nepali",officialLanguageNameLocal:"",countryCallingCode:"977",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Nauru",countryNameLocal:"Nauru",countryCode:"NR",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"na",officialLanguageNameEn:"Nauru",officialLanguageNameLocal:"Dorerin Naoero",countryCallingCode:"674",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Niue",countryNameLocal:"Niue",countryCode:"NU",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"niu",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"683",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"New Zealand",countryNameLocal:"New Zealand",countryCode:"NZ",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"NZBN",tinName:"NZ Business Number",officialLanguageCode:"mi",officialLanguageNameEn:"Maori",officialLanguageNameLocal:"te reo Mori",countryCallingCode:"64",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Oman",countryNameLocal:" ",countryCode:"OM",currencyCode:"OMR",currencyNameEn:"Omani rial",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"968",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Panama",countryNameLocal:"Panama",countryCode:"PA",currencyCode:"PAB",currencyNameEn:"Panamanian balboa",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"507",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Peru",countryNameLocal:"Per",countryCode:"PE",currencyCode:"PEN",currencyNameEn:"Peruvian sol",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"51",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"French Polynesia",countryNameLocal:"Polynsie franaise",countryCode:"PF",currencyCode:"XPF",currencyNameEn:"CFP franc (franc Pacifique)",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"689",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Papua New Guinea",countryNameLocal:"Papua New Guinea",countryCode:"PG",currencyCode:"PGK",currencyNameEn:"Papua New Guinean kina",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"675",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Pakistan",countryNameLocal:"",countryCode:"PK",currencyCode:"PKR",currencyNameEn:"Pakistani rupee",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"92",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Poland",countryNameLocal:"Polska",countryCode:"PL",currencyCode:"PLN",currencyNameEn:"Polish zoty",tinType:"NIP",tinName:"numer identyfikacji podatkowej",officialLanguageCode:"pl",officialLanguageNameEn:"Polish",officialLanguageNameLocal:"jzyk polski, polszczyzna",countryCallingCode:"48",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Saint Pierre and Miquelon",countryNameLocal:"Saint-Pierre-et-Miquelon",countryCode:"PM",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"508",areaCodes:[],region:"North America",flag:""},{countryNameEn:"Pitcairn",countryNameLocal:"Pitcairn",countryCode:"PN",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"64",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Puerto Rico",countryNameLocal:"Puerto Rico",countryCode:"PR",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"1",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Palestine, State of",countryNameLocal:"Palestinian Territory",countryCode:"PS",currencyCode:"",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"970",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Portugal",countryNameLocal:"Portugal",countryCode:"PT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"NIPC",tinName:"Nmero de Identificao de Pessoa Coletiva (NIPC)",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"351",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Palau",countryNameLocal:"Palau",countryCode:"PW",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"680",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Paraguay",countryNameLocal:"Paraguay",countryCode:"PY",currencyCode:"PYG",currencyNameEn:"Paraguayan guaran",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"595",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Qatar",countryNameLocal:"",countryCode:"QA",currencyCode:"QAR",currencyNameEn:"Qatari riyal",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"974",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Runion",countryNameLocal:"La Runion",countryCode:"RE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"262",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Romania",countryNameLocal:"Romnia",countryCode:"RO",currencyCode:"RON",currencyNameEn:"Romanian leu",tinType:"CIF",tinName:"Codul de identificare fiscal",officialLanguageCode:"ro",officialLanguageNameEn:"Romanian, Moldavian, Moldovan",officialLanguageNameLocal:"Romn",countryCallingCode:"40",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Serbia",countryNameLocal:"",countryCode:"RS",currencyCode:"RSD",currencyNameEn:"Serbian dinar",tinType:"PIB",tinName:"Poreski identifikacioni broj",officialLanguageCode:"sr",officialLanguageNameEn:"Serbian",officialLanguageNameLocal:" ",countryCallingCode:"381",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Russia",countryNameLocal:"",countryCode:"RU",currencyCode:"RUB",currencyNameEn:"Russian ruble",tinType:"",tinName:"  ",officialLanguageCode:"ru",officialLanguageNameEn:"Russian",officialLanguageNameLocal:"",countryCallingCode:"7",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Rwanda",countryNameLocal:"Rwanda",countryCode:"RW",currencyCode:"RWF",currencyNameEn:"Rwandan franc",tinType:"",tinName:"",officialLanguageCode:"rw",officialLanguageNameEn:"Kinyarwanda",officialLanguageNameLocal:"Ikinyarwanda",countryCallingCode:"250",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Saudi Arabia",countryNameLocal:"",countryCode:"SA",currencyCode:"SAR",currencyNameEn:"Saudi riyal",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"966",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Solomon Islands",countryNameLocal:"Solomon Islands",countryCode:"SB",currencyCode:"SBD",currencyNameEn:"Solomon Islands dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"677",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Seychelles",countryNameLocal:"Seychelles",countryCode:"SC",currencyCode:"SCR",currencyNameEn:"Seychelles rupee",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"248",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Sweden",countryNameLocal:"Sverige",countryCode:"SE",currencyCode:"SEK",currencyNameEn:"Swedish krona/kronor",tinType:"Momsnr.",tinName:"VAT-nummer",officialLanguageCode:"sv",officialLanguageNameEn:"Swedish",officialLanguageNameLocal:"Svenska",countryCallingCode:"46",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Singapore",countryNameLocal:"Singapore",countryCode:"SG",currencyCode:"SGD",currencyNameEn:"Singapore dollar",tinType:"",tinName:"",officialLanguageCode:"zh-hans",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"65",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Saint Helena, Ascension and Tristan da Cunha",countryNameLocal:"Saint Helena",countryCode:"SH",currencyCode:"SHP",currencyNameEn:"Saint Helena pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"290",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Slovenia",countryNameLocal:"Slovenija",countryCode:"SI",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"ID za DDV",tinName:"Davna tevilka",officialLanguageCode:"sl",officialLanguageNameEn:"Slovenian",officialLanguageNameLocal:"Slovenski Jezik, Slovenina",countryCallingCode:"386",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Svalbard and Jan Mayen",countryNameLocal:"Svalbard and Jan Mayen",countryCode:"SJ",currencyCode:"NOK",currencyNameEn:"Norwegian krone",tinType:"",tinName:"",officialLanguageCode:"no",officialLanguageNameEn:"Norwegian",officialLanguageNameLocal:"Norsk",countryCallingCode:"4779",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Slovakia",countryNameLocal:"Slovensko",countryCode:"SK",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"I DPH",tinName:"Identifikan slo pre da z pridanej hodnoty",officialLanguageCode:"sk",officialLanguageNameEn:"Slovak",officialLanguageNameLocal:"Slovenina, Slovensk Jazyk",countryCallingCode:"421",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Sierra Leone",countryNameLocal:"Sierra Leone",countryCode:"SL",currencyCode:"SLL",currencyNameEn:"Sierra Leonean leone",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"232",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Republic of San Marino",countryNameLocal:"Repubblica di San Marino",countryCode:"SM",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"C.O.E.",tinName:"Codice operatore economico",officialLanguageCode:"it",officialLanguageNameEn:"Italian",officialLanguageNameLocal:"Italiano",countryCallingCode:"378",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Senegal",countryNameLocal:"Sngal",countryCode:"SN",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"221",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Somalia",countryNameLocal:"Somalia, ",countryCode:"SO",currencyCode:"SOS",currencyNameEn:"Somali shilling",tinType:"",tinName:"",officialLanguageCode:"so",officialLanguageNameEn:"Somali",officialLanguageNameLocal:"Soomaaliga, af Soomaali",countryCallingCode:"252",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Suriname",countryNameLocal:"Suriname",countryCode:"SR",currencyCode:"SRD",currencyNameEn:"Surinamese dollar",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"597",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"South Sudan",countryNameLocal:"South Sudan",countryCode:"SS",currencyCode:"SSP",currencyNameEn:"South Sudanese pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"211",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Sao Tome and Principe",countryNameLocal:"So Tom e Prncipe",countryCode:"ST",currencyCode:"STN",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"239",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"El Salvador",countryNameLocal:"El Salvador",countryCode:"SV",currencyCode:"SVC",currencyNameEn:"Salvadoran coln",tinType:"NIT",tinName:"Nmero de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"503",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Sint Maarten (Dutch part)",countryNameLocal:"Sint Maarten",countryCode:"SX",currencyCode:"ANG",currencyNameEn:"Netherlands Antillean guilder",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"1721",areaCodes:[],region:"Unknown",flag:""},{countryNameEn:"Syrian Arab Republic",countryNameLocal:", Sriyya",countryCode:"SY",currencyCode:"SYP",currencyNameEn:"Syrian pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"963",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Chad",countryNameLocal:"Tchad, ",countryCode:"TD",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"235",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Togo",countryNameLocal:"Togo",countryCode:"TG",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"228",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Thailand",countryNameLocal:"",countryCode:"TH",currencyCode:"THB",currencyNameEn:"Thai baht",tinType:"",tinName:"",officialLanguageCode:"th",officialLanguageNameEn:"Thai",officialLanguageNameLocal:"",countryCallingCode:"66",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Tajikistan",countryNameLocal:",",countryCode:"TJ",currencyCode:"TJS",currencyNameEn:"Tajikistani somoni",tinType:"",tinName:"",officialLanguageCode:"tg",officialLanguageNameEn:"Tajik",officialLanguageNameLocal:", toik, ",countryCallingCode:"992",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Tokelau",countryNameLocal:"Tokelau",countryCode:"TK",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"tkl",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"690",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Timor-Leste",countryNameLocal:"Timor-Leste, Timor Lorosa'e",countryCode:"TL",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"670",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Turkmenistan",countryNameLocal:"Trkmenistan",countryCode:"TM",currencyCode:"TMT",currencyNameEn:"Turkmenistan manat",tinType:"",tinName:"",officialLanguageCode:"tk",officialLanguageNameEn:"Turkmen",officialLanguageNameLocal:"Trkmen, ",countryCallingCode:"993",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Tunisia",countryNameLocal:", Tunisie",countryCode:"TN",currencyCode:"TND",currencyNameEn:"Tunisian dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"216",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Tonga",countryNameLocal:"Tonga",countryCode:"TO",currencyCode:"TOP",currencyNameEn:"Tongan paanga",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"676",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Turkey",countryNameLocal:"Trkiye",countryCode:"TR",currencyCode:"TRY",currencyNameEn:"Turkish lira",tinType:"KDV",tinName:"Vergi Kimlik Numaras",officialLanguageCode:"tr",officialLanguageNameEn:"Turkish",officialLanguageNameLocal:"Trke",countryCallingCode:"90",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Trinidad and Tobago",countryNameLocal:"Trinidad and Tobago",countryCode:"TT",currencyCode:"TTD",currencyNameEn:"Trinidad and Tobago dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"868",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Tuvalu",countryNameLocal:"Tuvalu",countryCode:"TV",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"688",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"United Republic of Tanzania",countryNameLocal:"Tanzania",countryCode:"TZ",currencyCode:"TZS",currencyNameEn:"Tanzanian shilling",tinType:"",tinName:"",officialLanguageCode:"sw",officialLanguageNameEn:"Swahili",officialLanguageNameLocal:"Kiswahili",countryCallingCode:"255",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Ukraine",countryNameLocal:"",countryCode:"UA",currencyCode:"UAH",currencyNameEn:"Ukrainian hryvnia",tinType:"",tinName:"   ",officialLanguageCode:"uk",officialLanguageNameEn:"Ukrainian",officialLanguageNameLocal:"",countryCallingCode:"380",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Uganda",countryNameLocal:"Uganda",countryCode:"UG",currencyCode:"UGX",currencyNameEn:"Ugandan shilling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"256",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"United States of America",countryNameLocal:"United States of America",countryCode:"US",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"EIN",tinName:"Tax Identification Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:[],region:"North America",flag:""},{countryNameEn:"Uruguay",countryNameLocal:"Uruguay",countryCode:"UY",currencyCode:"UYU",currencyNameEn:"Uruguayan peso",tinType:"RUT",tinName:"Registro nico Tributario",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"598",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Uzbekistan",countryNameLocal:"",countryCode:"UZ",currencyCode:"UZS",currencyNameEn:"Uzbekistan som",tinType:"",tinName:"   ",officialLanguageCode:"uz",officialLanguageNameEn:"Uzbek",officialLanguageNameLocal:"Ozbek, , ",countryCallingCode:"998",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Saint Vincent and the Grenadines",countryNameLocal:"Saint Vincent and the Grenadines",countryCode:"VC",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1784",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Venezuela (Bolivarian Republic of)",countryNameLocal:"Venezuela",countryCode:"VE",currencyCode:"VES",currencyNameEn:"",tinType:"RIF",tinName:"Registro de Informacion Fiscal",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"58",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Virgin Islands (British)",countryNameLocal:"British Virgin Islands",countryCode:"VG",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1284",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Virgin Islands (U.S.)",countryNameLocal:"United States Virgin Islands",countryCode:"VI",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1340",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Vietnam",countryNameLocal:"Vit Nam",countryCode:"VN",currencyCode:"VND",currencyNameEn:"Vietnamese ng",tinType:"",tinName:"",officialLanguageCode:"vi",officialLanguageNameEn:"Vietnamese",officialLanguageNameLocal:"Ting Vit",countryCallingCode:"84",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Vanuatu",countryNameLocal:"Vanuatu",countryCode:"VU",currencyCode:"VUV",currencyNameEn:"Vanuatu vatu",tinType:"",tinName:"",officialLanguageCode:"bi",officialLanguageNameEn:"Bislama",officialLanguageNameLocal:"Bislama",countryCallingCode:"678",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Wallis and Futuna",countryNameLocal:"Wallis-et-Futuna",countryCode:"WF",currencyCode:"XPF",currencyNameEn:"CFP franc (franc Pacifique)",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"681",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Samoa",countryNameLocal:"Samoa",countryCode:"WS",currencyCode:"WST",currencyNameEn:"Samoan tala",tinType:"",tinName:"",officialLanguageCode:"sm",officialLanguageNameEn:"Samoan",officialLanguageNameLocal:"gagana fa'a Samoa",countryCallingCode:"685",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Yemen",countryNameLocal:"",countryCode:"YE",currencyCode:"YER",currencyNameEn:"Yemeni rial",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"967",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Mayotte",countryNameLocal:"Mayotte",countryCode:"YT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"262",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"South Africa",countryNameLocal:"South Africa",countryCode:"ZA",currencyCode:"ZAR",currencyNameEn:"South African rand",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"27",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Zambia",countryNameLocal:"Zambia",countryCode:"ZM",currencyCode:"ZMW",currencyNameEn:"Zambian kwacha",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"260",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Zimbabwe",countryNameLocal:"Zimbabwe",countryCode:"ZW",currencyCode:"ZWL",currencyNameEn:"Zimbabwean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"263",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Eswatini",countryNameLocal:"Swaziland",countryCode:"SZ",currencyCode:"SZL",currencyNameEn:"Swazi lilangeni",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"268",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"North Macedonia",countryNameLocal:"",countryCode:"MK",currencyCode:"MKD",currencyNameEn:"Macedonian denar",tinType:"",tinName:"",officialLanguageCode:"mk",officialLanguageNameEn:"Macedonian",officialLanguageNameLocal:" ",countryCallingCode:"389",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Philippines",countryNameLocal:"Philippines",countryCode:"PH",currencyCode:"PHP",currencyNameEn:"Philippine peso",tinType:"TIN",tinName:"Tax Identification Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"63",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Netherlands",countryNameLocal:"Nederland",countryCode:"NL",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"Btw-nr.",tinName:"Btw-nummer",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"31",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"United Arab Emirates",countryNameLocal:"   ",countryCode:"AE",currencyCode:"AED",currencyNameEn:"United Arab Emirates dirham",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"971",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Republic of Moldova",countryNameLocal:"Moldova, ",countryCode:"MD",currencyCode:"MDL",currencyNameEn:"Moldovan leu",tinType:"",tinName:"",officialLanguageCode:"ro",officialLanguageNameEn:"Romanian, Moldavian, Moldovan",officialLanguageNameLocal:"Romn",countryCallingCode:"373",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Gambia",countryNameLocal:"The Gambia",countryCode:"GM",currencyCode:"GMD",currencyNameEn:"Gambian dalasi",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"220",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Dominican Republic",countryNameLocal:"Repblica Dominicana",countryCode:"DO",currencyCode:"DOP",currencyNameEn:"Dominican peso",tinType:"RNC",tinName:"Registro Nacional del Contribuyente",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"1",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Sudan",countryNameLocal:"",countryCode:"SD",currencyCode:"SDG",currencyNameEn:"Sudanese pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"249",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Lao People's Democratic Republic",countryNameLocal:"",countryCode:"LA",currencyCode:"LAK",currencyNameEn:"Lao kip",tinType:"",tinName:"",officialLanguageCode:"lo",officialLanguageNameEn:"Lao",officialLanguageNameLocal:"",countryCallingCode:"856",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Taiwan, Province of China",countryNameLocal:"Taiwan",countryCode:"TW",currencyCode:"TWD",currencyNameEn:"New Taiwan dollar",tinType:"",tinName:"",officialLanguageCode:"zh-hant",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"886",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Republic of the Congo",countryNameLocal:"Rpublique du Congo",countryCode:"CG",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"242",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Czechia",countryNameLocal:"esk republika",countryCode:"CZ",currencyCode:"CZK",currencyNameEn:"Czech koruna",tinType:"DI",tinName:"Daov identifikan slo",officialLanguageCode:"cs",officialLanguageNameEn:"Czech",officialLanguageNameLocal:"etina",countryCallingCode:"420",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"United Kingdom",countryNameLocal:"Great Britain",countryCode:"GB",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"VAT Reg No",tinName:"Value added tax registration number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Niger",countryNameLocal:"Niger",countryCode:"NE",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"227",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Democratic Republic of the Congo",countryNameLocal:"Democratic Republic of the Congo",countryCode:"CD",currencyCode:"CDF",currencyNameEn:"Congolese franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"243",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Commonwealth of The Bahamas",countryNameLocal:"Commonwealth of The Bahamas",countryCode:"BS",currencyCode:"BSD",currencyNameEn:"Bahamian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 242",areaCodes:[],region:"Caribbean",flag:""},{countryNameEn:"Cocos (Keeling) Islands",countryNameLocal:"Pulu Kokos (Keeling)",countryCode:"CC",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"61 891",areaCodes:[],region:"Australia",flag:""},{countryNameEn:"Central African Republic",countryNameLocal:"Rpublique centrafricaine",countryCode:"CF",currencyCode:"XAF",currencyNameEn:"Central African CFA",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"236",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Cook Islands",countryNameLocal:"Kki 'irani",countryCode:"CK",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"682",areaCodes:[],region:"South Pacific Ocean",flag:""},{countryNameEn:"Falkland Islands",countryNameLocal:"Falkland Islands",countryCode:"FK",currencyCode:"FKP",currencyNameEn:"Falklands pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"500",areaCodes:[],region:"South Atlantic Ocean",flag:""},{countryNameEn:"Faroe Islands",countryNameLocal:"Frerne",countryCode:"FO",currencyCode:"DKK",currencyNameEn:"Faroese krna",tinType:"",tinName:"",officialLanguageCode:"da",officialLanguageNameEn:"Danish",officialLanguageNameLocal:"dansk",countryCallingCode:"298",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Territory of Heard Island and McDonald Islands",countryNameLocal:"Territory of Heard Island and McDonald Islands",countryCode:"HM",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"672",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"British Indian Ocean Territory",countryNameLocal:"British Indian Ocean Territory",countryCode:"IO",currencyCode:"USD",currencyNameEn:"United States Dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"246",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"Comoros",countryNameLocal:"Umoja wa Komori",countryCode:"KM",currencyCode:"KMF",currencyNameEn:"Comorian franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"269",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"Cayman Islands",countryNameLocal:"Cayman Islands",countryCode:"KY",currencyCode:"KYD",currencyNameEn:"Cayman Islands dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 345",areaCodes:[],region:"Caribbean Sea",flag:""},{countryNameEn:"Republic of the Marshall Islands",countryNameLocal:"Aolepn Aorkin aje",countryCode:"MH",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"692",areaCodes:[],region:"Pacific Ocean",flag:""},{countryNameEn:"Commonwealth of the Northern Mariana Islands",countryNameLocal:"Sankattan Siha Na Islas Marinas",countryCode:"MP",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 670",areaCodes:[],region:"Pacific Ocean",flag:""},{countryNameEn:"Turks and Caicos Islands",countryNameLocal:"Turks and Caicos Islands",countryCode:"TC",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 649",areaCodes:[],region:"Atlantic Ocean",flag:""},{countryNameEn:"French Southern and Antarctic Lands",countryNameLocal:"Terres australes et antarctiques franaises",countryCode:"TF",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"672",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"United States Minor Outlying Islands",countryNameLocal:"United States Minor Outlying Islands",countryCode:"UM",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:[],region:"Pacific Ocean",flag:""},{countryNameEn:"Holy See",countryNameLocal:"Sancta Sedes",countryCode:"VA",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"la",officialLanguageNameEn:"Latin",officialLanguageNameLocal:"lingua latna",countryCallingCode:"39",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Republic of Kosovo",countryNameLocal:"Republika e Kosovs",countryCode:"XK",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"sq",officialLanguageNameEn:"Albanian",officialLanguageNameLocal:"Shqip",countryCallingCode:"383",region:"Europe",flag:""},{countryNameEn:"Netherlands Antilles",countryNameLocal:"Nederlandse Antillen",countryCode:"AN",currencyCode:"ANG",currencyNameEn:"Netherlands Antillean guilder",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"599",region:"Europe",flag:""}];return ox.default=e,ox}var vL;function QG(){if(vL)return xa;vL=1;var e=xa&&xa.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(xa,"__esModule",{value:!0}),xa.customList=xa.customArray=xa.findOne=xa.filter=xa.all=xa.utils=void 0;const s=e(VG()),a=e(WG()),n=e(YG());xa.utils={groupBy:s.default};function r(){return n.default}xa.all=r;function i(m,f){return n.default.filter(h=>h[m]===f)}xa.filter=i;function l(m,f){return n.default.find(h=>h[m]===f)}xa.findOne=l;function c(m={name:"{countryNameEn} ({countryCode})",value:"{countryCode}"},{sortBy:f,sortDataBy:h,filter:y}={}){const N=[];let w=n.default;if(typeof y=="function"&&(w=w.filter(y)),h){const p=new Intl.Collator([],{sensitivity:"accent"});w.sort((v,C)=>p.compare(v[h],C[h]))}if(w.forEach(p=>{const v={};for(const C in m)v[C]=(0,a.default)(m[C],p);N.push(v)}),f&&m[f]){const p=new Intl.Collator([],{sensitivity:"accent"});N.sort((v,C)=>p.compare(v[f],C[f]))}return N}xa.customArray=c;function d(m="countryCode",f="{countryNameEn} ({countryCode})",{filter:h}={}){const y={};let N=n.default;return typeof h=="function"&&(N=N.filter(h)),N.forEach(w=>{const p=(0,a.default)(f,w);y[String(w[m])]=p}),y}return xa.customList=d,xa}var pu=QG();const tC=(...e)=>e.flat().filter(Boolean).join(" "),qG=pu.all(),w5=qG.map(e=>({code:`+${e.countryCallingCode}`,name:e.countryCode})),sC=[{id:1,title:"Your Account",subtitle:"Personal & Login Details"},{id:2,title:"Company Setup",subtitle:"Business Information"}],XG=()=>{const e=it();return t.jsxs("button",{onClick:()=>e("/"),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 transition cursor-pointer",children:[t.jsx(gc,{className:"size-4 mr-1"})," Back to Home"]})},KG=g.memo(({label:e,id:s,placeholder:a,type:n="text",value:r,onChange:i,isVisible:l,onTogglePass:c,error:d,isSelect:m,options:f})=>{const h=s.toLowerCase().includes("password"),y=h?l?"text":"password":n,N=tC("w-full bg-gray-50 border px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:outline-none cursor-pointer",h?"pr-10":"",d?"border-red-500 focus:border-red-500 focus:ring-2 focus:ring-red-500/50":"border-gray-200 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50");return t.jsxs("div",{className:"flex flex-col space-y-2",children:[t.jsx("label",{htmlFor:s,className:"text-sm font-medium text-gray-700 cursor-pointer",children:e}),t.jsxs("div",{className:"relative",children:[m?t.jsx("select",{id:s,value:r,onChange:i,required:!0,className:N,children:f.map(w=>t.jsx("option",{value:w,children:w},w))}):t.jsx("input",{id:s,type:y,placeholder:a,value:r,onChange:i,required:!0,className:N}),h&&t.jsx("button",{type:"button",onClick:()=>c(s),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":l?"Hide password":"Show password",children:l?t.jsx(rc,{className:"size-5"}):t.jsx(ic,{className:"size-5"})})]}),d&&t.jsx("p",{className:"mt-1 text-sm text-red-600 font-semibold",children:d})]})}),Fo=KG,ZG=g.memo(({currentStep:e,totalSteps:s})=>t.jsx("div",{className:"flex justify-between items-center mb-10 w-full max-w-xs mx-auto",children:sC.map(a=>t.jsxs(g.Fragment,{children:[t.jsxs("div",{className:"flex flex-col items-center cursor-pointer",children:[t.jsx("div",{className:tC("size-10 flex items-center justify-center rounded-full font-bold transition-all duration-300",a.id===e?"bg-amber-500 text-white shadow-lg":a.id<e?"bg-green-500 text-white":"bg-gray-100 text-gray-500 border-2 border-gray-300"),children:a.id<e?t.jsx(kM,{className:"size-5"}):a.id}),t.jsx("span",{className:tC("mt-2 text-xs font-medium hidden sm:block",a.id===e?"text-amber-600":"text-gray-500"),children:a.title})]}),a.id<s&&t.jsx("div",{className:"flex-1 h-0.5 mx-1 transition-colors duration-300 bg-gray-300"})]},a.id))})),JG=g.memo(({formData:e,handleChange:s,handleCodeChange:a,handleTogglePass:n,isPassVisible:r,formError:i,termsAccepted:l,handleTerms:c,isButtonDisabled:d,handleSubmit:m,handleGoogleLogin:f})=>t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center my-6",children:[t.jsx("div",{className:"flex-grow border-t border-gray-300"}),t.jsx("span",{className:"flex-shrink mx-4 text-sm text-gray-500",children:"OR"}),t.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"md:flex md:space-x-4 space-y-6 md:space-y-0",children:[t.jsx("div",{className:"md:w-1/2",children:t.jsx(Fo,{label:"First Name",id:"first_name",placeholder:"John",value:e.first_name,onChange:s})}),t.jsx("div",{className:"md:w-1/2",children:t.jsx(Fo,{label:"Last Name",id:"last_name",placeholder:"Doe",value:e.last_name,onChange:s})})]}),t.jsxs("div",{className:"flex flex-col space-y-2",children:[t.jsx("label",{htmlFor:"phoneNumber",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Contact Number"}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("select",{id:"countryCode",value:e.countryCode,onChange:a,className:"flex-shrink-0 bg-gray-50 border border-gray-200 px-3 py-2.5 rounded-lg text-gray-800 transition shadow-inner focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer",children:w5.map(h=>t.jsxs("option",{value:h.code,children:[h.name," ",h.code]},h.code))}),t.jsx("input",{id:"phone_number",type:"tel",placeholder:"0000000000",maxLength:10,value:e.phone_number,onChange:s,className:"w-full bg-gray-50 border border-gray-200 px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"})]})]}),t.jsx(Fo,{label:"Email Address",id:"email",type:"email",placeholder:"you@company.com",value:e.email,onChange:s}),t.jsx(Fo,{label:"Password",id:"password",placeholder:"Min 8 characters",value:e.password,onChange:s,isVisible:r.password,onTogglePass:n}),t.jsx(Fo,{label:"Confirm Password",id:"confirmPassword",placeholder:"Confirm your password",value:e.confirmPassword,onChange:s,isVisible:r.confirmPassword,onTogglePass:n,error:i}),t.jsxs("div",{className:"flex items-start pt-2",children:[t.jsx("input",{id:"terms",type:"checkbox",checked:l,onChange:c,className:"size-4 mt-1 rounded text-amber-500 border-gray-300 focus:ring-amber-500 cursor-pointer"}),t.jsxs("label",{htmlFor:"terms",className:"ml-3 text-sm font-medium text-gray-700 cursor-pointer",children:["I accept the ",t.jsx("a",{href:"#",className:"text-amber-600 hover:text-amber-700 font-semibold",children:"Terms"})," and ",t.jsx("a",{href:"#",className:"text-amber-600 hover:text-amber-700 font-semibold",children:"Policy"}),"."]})]})]}),t.jsx("button",{type:"submit",onClick:m,disabled:d,className:"w-full mt-8 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all duration-300 bg-secondary hover:bg-tertiary shadow-lg shadow-tertiary disabled:shadow-none focus-visible:outline-none cursor-pointer",children:"Continue to Company Details"})]})),eV=g.memo(({companyData:e,handleCodeChange1:s,handleSubmit:a,handleCompanyChange:n,formError:r,isSubmitted:i,isButtonDisabled:l,setStep:c,setIsSubmitted:d,setFormError:m})=>t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"space-y-6",children:[t.jsx(Fo,{label:"Company Name",id:"company_name",placeholder:"Acme Corp",value:e.company_name,onChange:n}),t.jsxs("div",{className:"flex flex-col space-y-2",children:[t.jsx("label",{htmlFor:"phoneNumber",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Company Number"}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("select",{id:"countryCode",value:e.countryCode,onChange:s,className:"flex-shrink-0 bg-gray-50 border border-gray-200 px-3 py-2.5 rounded-lg text-gray-800 transition shadow-inner focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer",children:w5.map(f=>t.jsxs("option",{value:f.code,children:[f.name," ",f.code]},f.code))}),t.jsx("input",{id:"company_number",type:"tel",placeholder:"0000000000",maxLength:10,value:e.company_number,onChange:n,className:"w-full bg-gray-50 border border-gray-200 px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"})]})]}),t.jsx(Fo,{label:"Company Website",id:"company_website",type:"url",placeholder:"https://www.acme.com",value:e.company_website,onChange:n})]}),r&&t.jsx("div",{className:"p-3 text-sm rounded-lg bg-red-100 text-red-700 border border-red-300 font-medium my-6",children:r}),i&&t.jsx("div",{className:"p-3 text-sm rounded-lg bg-green-100 text-green-700 border border-green-300 font-medium my-6",children:"Account and Company Setup simulated successfully! Welcome aboard."}),t.jsxs("div",{className:"flex space-x-4 mt-8",children:[t.jsxs("button",{type:"button",onClick:()=>{c(1),d(!1),m(null)},className:"flex-1 inline-flex items-center justify-center rounded-lg h-12 px-6 text-gray-700 font-bold tracking-wide border border-gray-300 bg-white hover:bg-tertiary hover:text-white transition-colors focus-visible:ring-2 focus-visible:ring-gray-300 focus-visible:outline-none cursor-pointer",children:[t.jsx(U8,{className:"size-4 mr-2"})," Back"]}),t.jsx("button",{onClick:a,type:"submit",disabled:l,className:"flex-1 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all duration-300 bg-tertiary hover:bg-accent hover:text-secondary shadow-xl shadow-amber-500/30 disabled:shadow-none focus-visible:ring-2 focus-visible:ring-amber-500/50 focus-visible:outline-none cursor-pointer",children:"Create Account"})]})]})),tV=()=>{const e=["first_name","email","password"],s=["company_name","company_number","company_website"],[a,n]=g.useState(1),[r,i]=g.useState({first_name:"",last_name:"",countryCode:"+63",phone_number:"",email:"",password:"",confirmPassword:"",role:"CEO"}),[l,c]=g.useState({company_name:"",company_number:"",company_website:"",countryCode:"+63"}),[d,m]=g.useState({}),[f,h]=g.useState(!1),[y,N]=g.useState(null),[w,p]=g.useState(!1),{login:v}=er(),[C,j]=g.useState({plan_name:"Free",price:0}),[_,T]=g.useState(!1);g.useEffect(()=>{document.title="Sign Up | Sari-Sari CRM"},[]),g.useEffect(()=>{const R=()=>{window.google&&window.google.accounts?(window.google.accounts.id.initialize({client_id:"222789237297-r8mebl46fdacgpsnlnjca4eu0crn8hf6.apps.googleusercontent.com",callback:k}),window.google.accounts.id.renderButton(document.getElementById("googleSignupBtn"),{theme:"outline",size:"large",text:"signup_with"})):console.error("Google API not loaded properly.")};if(window.google&&window.google.accounts){R();return}const Z=document.createElement("script");Z.src="https://accounts.google.com/gsi/client",Z.async=!0,Z.defer=!0,Z.onload=R,document.body.appendChild(Z)},[]);const k=R=>{T(!0);try{const Z=OM(R.credential);console.log("Google user:",Z),i(te=>({...te,email:Z.email,first_name:Z.given_name||"",last_name:Z.family_name||"",password:Z.password||"",profilePicture:Z.picture||"",googleId:Z.sub,auth_provider:"google",id_token:R.credential})),n(2)}catch(Z){console.error("Google login error:",Z)}finally{T(!1)}},E=g.useCallback(R=>{const{id:Z,value:te}=R.target;p(!1),i(ge=>{const le={...ge,[Z]:te};if(a===1&&(Z==="password"||Z==="confirmPassword")){const{password:W,confirmPassword:ee}=le,J=W.length>0&&ee.length>0&&W!==ee?"Password doesn't match. Please try again.":null;N(he=>he!==J?J:he)}return le})},[a]),A=g.useCallback(R=>{const{id:Z,value:te}=R.target;p(!1),c(ge=>({...ge,[Z]:te}))},[]),U=g.useCallback(R=>i(Z=>({...Z,countryCode:R.target.value})),[]),B=g.useCallback(R=>c(Z=>({...Z,countryCode:R.target.value})),[]),X=g.useCallback(R=>m(Z=>({...Z,[R]:!Z[R]})),[]),$=g.useCallback(R=>h(R.target.checked),[]),O=async R=>{if(R.preventDefault(),p(!1),N(null),T(!0),a===1){if(!e.every(te=>r[te].trim()!=="")||!f){N("Please fill in all required fields and accept the terms.");return}if(r.password!==r.confirmPassword){N("The passwords you entered do not match. Please try again.");return}if(r.auth_provider==="google"){n(2);return}try{(await se.post("/auth/email-check",{email:r.email})).data.detail==="No existing email"&&(N(null),n(2))}catch(te){te.response&&te.response.data&&te.response.data.detail?N(te.response.data.detail):N("Something went wrong. Please try again.")}finally{T(!1)}}else if(a===2){if(!s.every(te=>(l[te]||"").trim()!=="")){N("Please fill in all required company details.");return}try{const{confirmPassword:te,...ge}=r,le={...l,company_number:`${l.countryCode} ${l.company_number}`},ee=(await se.post("/company/create",le)).data.id,J={...ge,company_id:ee,phone_number:`${ge.countryCode} ${ge.phone_number}`};if(console.log(" Sending payload:",J),ge.auth_provider==="google"){const he=await se.post("/auth/google",J),be={...C,company_id:ee,status:"Active"},Le=await se.post("/subscription/subscribe",be);N(null),p(!0),v(he.data)}else{const he=await se.post("/auth/signup",J),be={...C,company_id:ee,status:"Active"},Le=await se.post("/subscription/subscribe",be);N(null),p(!0),v(he.data)}}catch(te){if(te.response?.data?.detail){const ge=te.response.data.detail;if(Array.isArray(ge)){const le=ge.map(W=>W.msg).join(", ");N(le)}else N(typeof ge=="object"?ge.msg||JSON.stringify(ge):ge)}else N("Something went wrong. Please try again.")}finally{T(!1)}}},G=g.useCallback(()=>{try{window.google.accounts.id.initialize({client_id:"222789237297-r8mebl46fdacgpsnlnjca4eu0crn8hf6.apps.googleusercontent.com",callback:R=>{const{credential:Z}=R;i(te=>({...te,first_name:Z.given_name||"",last_name:Z.family_name||"",email:Z.email||"",profile_picture:Z.picture||"",auth_provider:"google",id_token:Z})),n(2)}}),window.google.accounts.id.prompt()}catch(R){console.error("Google login error:",R),N("Google login failed. Please try again.")}},[i,N,n]),K=g.useMemo(()=>{if(a===1){const R=e.every(Z=>(r[Z]||"").trim()!=="");return!f||!!y||!R}return a===2?!s.every(Z=>(l[Z]||"").trim()!==""):!0},[a,f,y,r,e,s]),ae=sC.find(R=>R.id===a);return t.jsxs("div",{className:"min-h-screen w-full bg-gray-100 font-sans text-gray-800 flex flex-col items-center",children:[t.jsx("div",{className:"w-full py-6 px-4 sm:px-12 lg:px-20 max-w-7xl",children:t.jsxs("div",{className:"flex items-center text-gray-800",children:[t.jsx(Es,{className:"size-6 text-amber-500 mr-2"}),t.jsx("span",{className:"text-xl font-extrabold tracking-wider",children:"CRM"})]})}),_&&t.jsx(N5,{isLoading:_}),t.jsx("div",{className:"w-full max-w-lg px-4 pt-6",children:t.jsx(XG,{})}),t.jsx("main",{className:"w-full max-w-lg font-inter mx-auto px-4 pt-3 pb-12",children:t.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-xl p-6 md:p-10",children:[t.jsxs("header",{className:"text-center mb-8",children:[t.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:ae.title}),t.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:ae.subtitle})]}),t.jsx(ZG,{currentStep:a,totalSteps:sC.length}),a===1&&t.jsx("div",{id:"googleSignupBtn"}),t.jsxs("form",{className:"mt-8",children:[a===1&&t.jsx(JG,{formData:r,handleChange:E,handleCodeChange:U,handleTogglePass:X,isPassVisible:d,formError:y,termsAccepted:f,handleTerms:$,isButtonDisabled:K,handleSubmit:O,handleGoogleLogin:G}),a===2&&t.jsx(eV,{handleSubmit:O,companyData:l,handleCompanyChange:A,formError:y,isSubmitted:w,isButtonDisabled:K,setStep:n,setIsSubmitted:p,setFormError:N,handleCodeChange1:B}),a===1&&t.jsx("div",{className:"text-center mt-6",children:t.jsxs("p",{className:"text-sm text-gray-700",children:["Already have an account?",t.jsx("a",{href:"/login",className:"font-bold text-amber-600 hover:text-amber-700 ml-1 cursor-pointer",children:"Log in"})]})})]})]})})]})},sV=()=>{const e=it();return t.jsxs("button",{onClick:()=>e("/"),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 transition mb-3 cursor-pointer",children:[t.jsx(gc,{className:"size-4 mr-1"})," Back to Home"]})},NL=({label:e,id:s,placeholder:a,type:n="text",value:r,onChange:i,isPassVisible:l,onTogglePass:c})=>{const d=s.toLowerCase().includes("password"),m=d?l?"text":"password":n;return t.jsxs("div",{className:"flex flex-col space-y-2",children:[t.jsx("label",{htmlFor:s,className:"text-sm font-medium text-gray-700",children:e}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{id:s,type:m,placeholder:a,value:r,onChange:i,required:!0,className:"w-full bg-gray-50 border border-gray-200 px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"}),d&&t.jsx("button",{type:"button",onClick:c,className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":l?"Hide password":"Show password",children:l?t.jsx(rc,{className:"size-5"}):t.jsx(ic,{className:"size-5"})})]})]})},aV=()=>{const[e,s]=g.useState({email:"",password:""}),[a,n]=g.useState(!1),[r,i]=g.useState(null),[l,c]=g.useState(!1),{isLoggedIn:d,login:m,userRole:f}=er(),h=it();g.useEffect(()=>{document.title="Login | Sari-Sari CRM"},[]),g.useEffect(()=>{d&&(f==="CEO"||f==="Admin"?h("/admin"):f==="Group Manager"?h("/group-manager"):f==="Manager"?h("/manager"):f==="Marketing"?h("/marketing"):f==="Sales"&&h("/sales"))},[d,h,f]);const y=p=>{const{id:v,value:C}=p.target;s(j=>({...j,[v]:C}))},N=async p=>{p.preventDefault(),i(null);try{const v=await se.post("/auth/login",e);m(v.data),i(null)}catch(v){v.response&&v.response.data&&v.response.data.detail?i(v.response.data.detail):i("Something went wrong. Please try again.")}};g.useEffect(()=>{const p=document.createElement("script");return p.src="https://accounts.google.com/gsi/client",p.async=!0,p.defer=!0,p.onload=()=>{window.google&&(window.google.accounts.id.initialize({client_id:"222789237297-r8mebl46fdacgpsnlnjca4eu0crn8hf6.apps.googleusercontent.com",callback:w}),window.google.accounts.id.renderButton(document.getElementById("googleLoginBtn"),{theme:"outline",size:"large",text:"signin_with"}))},document.body.appendChild(p),()=>{document.body.contains(p)&&document.body.removeChild(p)}},[]);const w=async p=>{c(!0);try{const v=OM(p.credential),C=await se.post("/auth/google",{id_token:p.credential});m(C.data)}catch(v){console.error("Google login failed:",v),i("Google login failed. Please try again.")}finally{c(!1)}};return t.jsxs("div",{className:"min-h-screen w-full bg-gray-100 font-sans text-gray-800 flex flex-col items-center",children:[t.jsx("div",{className:"w-full py-6 px-4 sm:px-12 lg:px-20 max-w-7xl",children:t.jsx("div",{className:"flex items-center text-gray-800",children:t.jsx("span",{className:"text-xl font-extrabold tracking-wider",children:"CRM"})})}),l&&t.jsx(N5,{isLoading:l}),t.jsxs("main",{className:"w-full max-w-lg font-inter mx-auto px-4 pt-6 pb-12",children:[t.jsx(sV,{}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-xl p-6 md:p-10",children:[t.jsxs("header",{className:"text-center mb-6",children:[t.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Login"}),t.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:"Sign in to access your dashboard."})]}),t.jsx("div",{id:"googleLoginBtn"}),t.jsxs("div",{className:"flex items-center my-6",children:[t.jsx("div",{className:"flex-grow border-t border-gray-300"}),t.jsx("span",{className:"flex-shrink mx-4 text-sm text-gray-500",children:"OR"}),t.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),t.jsxs("form",{onSubmit:N,className:"space-y-6 cursor-pointer",children:[t.jsx(NL,{label:"Email",id:"email",type:"email",placeholder:"you@example.com",value:e.email,onChange:y}),t.jsx(NL,{label:"Password",id:"password",type:"password",placeholder:"Enter your password",value:e.password,onChange:y,isPassVisible:a,onTogglePass:()=>n(p=>!p)}),r&&t.jsx("div",{className:"bg-red-100 border border-red-300 py-2 px-3 text-red-600",children:r}),t.jsx("button",{type:"submit",className:"w-full mt-2 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all disabled:opacity-50 bg-secondary text-gray-900 hover:bg-tertiary shadow-xl focus-visible:ring-2 focus-visible:ring-amber-500/50 cursor-pointer",children:"Log In"}),t.jsx("div",{className:"text-center mt-1",children:t.jsx("a",{href:"/forgot-password",className:"text-sm font-medium text-amber-600 hover:text-amber-700 cursor-pointer",children:"Forgot Password?"})})]}),t.jsx("div",{className:"text-center mt-6",children:t.jsxs("p",{className:"text-sm text-gray-700",children:["Don't have an account?",t.jsx("a",{href:"/signup",className:"font-bold text-amber-600 hover:text-amber-700 ml-1 cursor-pointer",children:"Sign Up"})]})})]})]})]})},nV=({onClick:e})=>t.jsxs("button",{onClick:e,className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 transition mb-3 cursor-pointer",children:[t.jsx(gc,{className:"size-4 mr-1"})," Back"]}),yN=({label:e,id:s,placeholder:a,type:n="text",value:r,onChange:i,icon:l})=>{const[c,d]=g.useState(!1),m=n==="password";return t.jsxs("div",{className:"flex flex-col space-y-2",children:[t.jsx("label",{htmlFor:s,className:"text-sm font-medium text-gray-700",children:e}),t.jsxs("div",{className:"relative flex items-center",children:[l&&t.jsx(l,{className:"absolute left-3 text-gray-500 size-5"}),t.jsx("input",{id:s,type:m&&c?"text":n,placeholder:a,value:r,onChange:i,required:!0,className:"w-full bg-gray-50 border border-gray-200 pl-10 pr-10 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"}),m&&t.jsx("button",{type:"button",onClick:()=>d(f=>!f),className:"absolute right-3 text-gray-500",children:c?t.jsx(rc,{className:"size-5"}):t.jsx(ic,{className:"size-5"})})]})]})},rV=({otp:e,setOtp:s})=>t.jsx("div",{className:"flex justify-between gap-2",children:[...Array(6)].map((a,n)=>t.jsx("input",{type:"text",maxLength:"1",className:"w-12 h-12 text-center text-lg font-bold border border-gray-300 rounded-lg focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50",value:e[n]||"",onChange:r=>{const i=r.target.value;if(/\d/.test(i)||i===""){const l=[...e];l[n]=i,s(l)}}},n))}),iV=()=>{const e=it(),[s,a]=g.useState(1),[n,r]=g.useState(""),[i,l]=g.useState(["","","","","",""]),[c,d]=g.useState(""),[m,f]=g.useState(""),h=p=>{p.preventDefault(),a(2)},y=p=>{p.preventDefault(),a(3)},N=p=>{if(p.preventDefault(),c!==m){alert("Passwords do not match!");return}alert("Password reset successfully!")},w=()=>{s>1?a(s-1):e("/login")};return t.jsxs("div",{className:"min-h-screen w-full bg-gray-100 font-sans text-gray-800 flex flex-col items-center",children:[t.jsx("div",{className:"w-full py-6 px-4 sm:px-12 lg:px-20 max-w-7xl",children:t.jsx("div",{className:"flex items-center text-gray-800",children:t.jsx("span",{className:"text-xl font-extrabold tracking-wider",children:"CRM"})})}),t.jsxs("main",{className:"w-full max-w-lg font-inter mx-auto px-4 pt-6 pb-12",children:[t.jsx(nV,{onClick:w}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-xl p-6 md:p-10",children:[s===1&&t.jsxs(t.Fragment,{children:[t.jsxs("header",{className:"text-center mb-6",children:[t.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Forgot Password"}),t.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:"Enter your email and we'll send you a verification code."})]}),t.jsxs("form",{onSubmit:h,className:"space-y-6 cursor-pointer",children:[t.jsx(yN,{label:"Email Address",id:"email",type:"email",placeholder:"you@example.com",value:n,onChange:p=>r(p.target.value),icon:js}),t.jsx("button",{className:"w-full mt-3 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all bg-secondary text-gray-900 hover:bg-tertiary shadow-xl",children:"Send OTP"})]})]}),s===2&&t.jsxs(t.Fragment,{children:[t.jsxs("header",{className:"text-center mb-6",children:[t.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Enter Verification Code"}),t.jsxs("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:["We've sent a 6-digit code to ",t.jsx("strong",{children:n}),"."]})]}),t.jsxs("form",{onSubmit:y,className:"space-y-6",children:[t.jsx(rV,{otp:i,setOtp:l}),t.jsx("button",{className:"w-full mt-3 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all bg-secondary text-gray-900 hover:bg-tertiary shadow-xl",children:"Verify Code"})]})]}),s===3&&t.jsxs(t.Fragment,{children:[t.jsxs("header",{className:"text-center mb-6",children:[t.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Reset Password"}),t.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:"Enter your new password below."})]}),t.jsxs("form",{onSubmit:N,className:"space-y-6",children:[t.jsx(yN,{label:"New Password",id:"password",type:"password",placeholder:"Enter new password",value:c,onChange:p=>d(p.target.value),icon:Ur}),t.jsx(yN,{label:"Confirm Password",id:"confirm-password",type:"password",placeholder:"Confirm new password",value:m,onChange:p=>f(p.target.value),icon:Ur}),t.jsx("button",{className:"w-full mt-3 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all bg-secondary text-gray-900 hover:bg-tertiary shadow-xl",children:"Reset Password"})]})]})]})]})]})},zt=()=>{const[e,s]=g.useState(null),[a,n]=g.useState(!1),[r,i]=g.useState(!0),l=it(),c=async()=>{try{const m=await se.get("/auth/me");s(m.data),n(!0)}catch(m){s(null),n(!1),console.warn("Unauthorized  possible expired token or not logged in.",m)}finally{i(!1)}};return g.useEffect(()=>{c()},[]),{user:e,isLoggedIn:a,loading:r,fetchUser:c,logout:async()=>{try{await se.post("/auth/logout")}catch{}s(null),n(!1),l("/login")}}};function xt({message:e="Loading..."}){return t.jsx("div",{className:"absolute inset-0 bg-primary/90 flex items-center justify-center z-40 lg:flex hidden",children:t.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[t.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0ms",animationDuration:"0.6s"}}),t.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"150ms",animationDuration:"0.6s"}}),t.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"300ms",animationDuration:"0.6s"}})]})})}const lV=(e,s)=>{const a=e?.trim()?.[0]??"",n=s?.trim()?.[0]??"";return`${a}${n}`.toUpperCase()||"U"};function cx(){const{user:e,loading:s,fetchUser:a}=zt(),[n,r]=g.useState(!1),[i,l]=g.useState(!1),[c,d]=g.useState(!1),[m,f]=g.useState(!1),[h,y]=g.useState(!1),[N,w]=g.useState(!1),[p,v]=g.useState(!1),[C,j]=g.useState(!1),[_,T]=g.useState(null),[k,E]=g.useState(null),A=g.useRef(null),[U,B]=g.useState({firstName:"",lastName:"",email:"",phoneNumber:""}),[X,$]=g.useState({currentPassword:"",newPassword:"",confirmPassword:""});g.useEffect(()=>{e&&(B({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),E(e.profile_picture||null))},[e]),g.useEffect(()=>{document.title="Manage Account | Sari-Sari CRM"},[]);const O=(Z,te)=>{B(ge=>({...ge,[Z]:te}))},G=(Z,te)=>{$(ge=>({...ge,[Z]:te}))},K=Z=>{const te=Z.target.files?.[0];if(!te)return;if(!te.type.startsWith("image/")){q.error("Please select an image file");return}if(te.size>5*1024*1024){q.error("Image size should be less than 5MB");return}const ge=new FileReader;ge.onloadend=()=>{T(ge.result),E(ge.result)},ge.readAsDataURL(te)},ae=async Z=>{if(Z.preventDefault(),!U.firstName.trim()||!U.lastName.trim()){q.warn("Please fill in all required fields.");return}l(!0);try{const te={first_name:U.firstName.trim(),last_name:U.lastName.trim(),phone_number:U.phoneNumber.trim()||null};_!==null&&(te.profile_picture=_),await se.put("/users/me",te),await a(),d(!1),T(null),window.dispatchEvent(new CustomEvent("userProfileUpdated")),q.success("Account information updated successfully!")}catch(te){console.error("Error updating account:",te);const ge=te.response?.data?.detail||"Failed to update account information. Please try again.";q.error(ge)}finally{l(!1)}},R=async Z=>{if(Z.preventDefault(),!X.newPassword||!X.confirmPassword){q.warn("Please fill in all password fields.");return}if(X.newPassword.length<8){q.warn("Password must be at least 8 characters long.");return}if(X.newPassword!==X.confirmPassword){q.warn("New password and confirm password do not match.");return}j(!0);try{const te={password:X.newPassword};await se.put("/users/me",te),await a(),$({currentPassword:"",newPassword:"",confirmPassword:""}),window.dispatchEvent(new CustomEvent("userProfileUpdated")),j(!1),q.success("Password changed successfully!")}catch(te){console.error("Error changing password:",te);const ge=te.response?.data?.detail||"Failed to change password. Please try again.";q.error(ge)}finally{j(!1)}};return t.jsxs("div",{className:"p-2 lg:p-8 font-inter relative",children:[(s||!e)&&t.jsx(xt,{}),e&&t.jsxs("div",{children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-gray-800 mb-2",children:"Manage Your Account"}),t.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Update your account information and change your password"})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mb-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[t.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:[t.jsx(qt,{className:"text-blue-600"}),"Profile Information"]}),t.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:!c&&t.jsxs("button",{onClick:()=>d(!0),className:"flex items-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition text-sm",children:[t.jsx(hs,{}),"Edit Profile"]})})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 mb-6 pb-6 border-b border-gray-200",children:[t.jsxs("div",{className:"flex-shrink-0 relative group",children:[k?t.jsx("div",{className:"relative",children:t.jsx("img",{src:k,alt:`${e.first_name} ${e.last_name}`,className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full object-cover border-2 border-gray-200 shadow-sm"})}):t.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 text-white flex items-center justify-center text-2xl sm:text-3xl font-semibold border-2 border-gray-200 shadow-sm",children:lV(e.first_name,e.last_name)}),c&&t.jsxs("div",{className:"absolute bottom-0 right-0",children:[t.jsx("input",{type:"file",ref:A,accept:"image/*",onChange:K,className:"hidden",id:"profile-picture-upload"}),t.jsx("label",{htmlFor:"profile-picture-upload",className:"cursor-pointer bg-gray-900 text-white p-1.5 rounded-full shadow-lg hover:bg-gray-800 transition flex items-center justify-center border-2 border-white",title:"Change profile picture",children:t.jsx(LM,{size:14})})]})]}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[e.first_name," ",e.last_name]}),t.jsx("p",{className:"text-gray-600 text-sm",children:e.email}),t.jsx("span",{className:"inline-block mt-2 px-3 py-1 bg-blue-100 text-blue-700 text-xs font-semibold rounded-md",children:e.role})]})]}),c?t.jsxs("form",{onSubmit:ae,className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["First Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:"text",value:U.firstName,onChange:Z=>O("firstName",Z.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Last Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:"text",value:U.lastName,onChange:Z=>O("lastName",Z.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),t.jsxs("div",{className:"sm:col-span-2",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Email"}),t.jsxs("div",{className:"relative",children:[t.jsx(js,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:"email",value:U.email,disabled:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-600 cursor-not-allowed outline-none",readOnly:!0})]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),t.jsxs("div",{className:"sm:col-span-2",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Phone Number"}),t.jsxs("div",{className:"relative",children:[t.jsx(ft,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:"tel",value:U.phoneNumber,onChange:Z=>O("phoneNumber",Z.target.value),placeholder:"+1 (555) 123-4567",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]})]})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t border-gray-200",children:[t.jsx("button",{type:"button",onClick:()=>{d(!1),B({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),T(null),E(e.profile_picture||null),A.current&&(A.current.value="")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition",disabled:i,children:"Cancel"}),t.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:i,children:[t.jsx(MM,{}),i?"Saving...":"Save Changes"]})]})]}):t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"First Name"}),t.jsx("p",{className:"text-gray-800 font-medium",children:e.first_name||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Name"}),t.jsx("p",{className:"text-gray-800 font-medium",children:e.last_name||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Email"}),t.jsx("p",{className:"text-gray-800 font-medium",children:e.email||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Phone Number"}),t.jsx("p",{className:"text-gray-800 font-medium",children:e.phone_number||"N/A"})]})]})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[t.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[t.jsx(Ur,{className:"text-blue-600"}),"Change Password"]}),t.jsxs("form",{onSubmit:R,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["New Password ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(Ur,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:"text",value:X.newPassword,onChange:Z=>G("newPassword",Z.target.value),placeholder:"Enter new password (min. 8 characters)",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),t.jsx("button",{type:"button",onClick:()=>w(!N),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:N?t.jsx(rc,{}):t.jsx(ic,{})})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Confirm New Password ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(Ur,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:"text",value:X.confirmPassword,onChange:Z=>G("confirmPassword",Z.target.value),placeholder:"Confirm new password",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),t.jsx("button",{type:"button",onClick:()=>v(!p),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:p?t.jsx(rc,{}):t.jsx(ic,{})})]})]}),t.jsx("div",{className:"pt-4 border-t border-gray-200 flex justify-center lg:justify-start",children:t.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:C,children:[t.jsx(Ur,{}),C?"Changing Password...":"Change Password"]})})]})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mt-6",children:[t.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[t.jsx(DM,{className:"text-blue-600"}),"Account Information"]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Role"}),t.jsx("span",{className:"inline-block px-3 py-1 bg-blue-100 text-blue-700 text-sm font-semibold rounded-md",children:e.role})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Status"}),t.jsx("span",{className:`inline-block px-3 py-1 text-sm font-semibold rounded-md ${e.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:e.is_active?"Active":"Inactive"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Company"}),t.jsx("p",{className:"text-gray-800 font-medium",children:e.company?.company_name||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Auth Provider"}),t.jsx("p",{className:"text-gray-800 font-medium",children:e.auth_provider?e.auth_provider.charAt(0).toUpperCase()+e.auth_provider.slice(1):"N/A"})]}),e.created_at&&t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Account Created"}),t.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),e.last_login&&t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Login"}),t.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.last_login).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})})]})]})]})]})]})}function oV({toggleSidebar:e}){const[s,a]=g.useState(!1),n=g.useRef(null),r=Xt(),i=it(),{logout:l}=er(),{user:c,fetchUser:d}=zt(),m={"/admin/dashboard":"Dashboard","/admin/accounts":"Accounts","/admin/contacts":"Contacts","/reports":"Reports","/leads":"Leads","/admin/Audit":"Audit","/admin/targets":"Targets","/admin/leads":"Leads","/admin/quotes":"Quotes","/admin/users":"Users","/admin/deals":"Deals"};g.useEffect(()=>{d()},[d]),g.useEffect(()=>{const h=()=>{d()};return window.addEventListener("userProfileUpdated",h),()=>{window.removeEventListener("userProfileUpdated",h)}},[d]);const f=m[r.pathname]||"Admin Panel";return g.useEffect(()=>{function h(y){n.current&&!n.current.contains(y.target)&&a(!1)}return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),t.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})})}),t.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:f})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("button",{className:"relative text-gray-600 hover:text-gray-800",children:[t.jsx(ch,{className:"text-xl"}),t.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs w-4 h-4 flex items-center justify-center rounded-full",children:"3"})]}),t.jsxs("div",{className:"relative",ref:n,children:[t.jsxs("button",{onClick:()=>a(!s),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[t.jsx("img",{src:c?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 aspect-square object-cover rounded-full"}),t.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[c?.first_name," ",c?.last_name]})]}),s&&t.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4",children:[t.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[t.jsx("img",{src:c?.profile_picture||"https://via.placeholder.com/80",alt:"Profile",className:"w-16 h-16 rounded-full object-cover"}),t.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[c?.first_name," ",c?.middle_name," ",c?.last_name]})]}),t.jsxs("div",{className:"mt-4 space-y-1 px-4 text-left",children:[t.jsx("button",{onClick:()=>{i("/admin/users"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Invite Your Team"}),t.jsx("button",{onClick:()=>{i("/admin/manage-account"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Manage Your Account"}),t.jsx("div",{className:"border-t border-gray-200 my-2"}),t.jsx("button",{onClick:l,className:"block w-full text-sm text-red-600 hover:text-red-700 hover:bg-gray-50 py-2 rounded text-left",children:"Logout"})]})]})]})]})]})}function cV(){const[e,s]=g.useState(!1),[a,n]=g.useState(!1),[r,i]=g.useState(!1),[l,c]=g.useState(!1),d=Xt(),{user:m}=zt();g.useEffect(()=>{m&&console.log("Fetched user:",m)},[m]),g.useEffect(()=>{document.title="Admin Panel | Sari-Sari CRM"},[]);const h=["/admin/accounts","/admin/contacts","/admin/leads","/admin/deals","/admin/quotes","/admin/targets"].includes(d.pathname);g.useEffect(()=>{h&&s(!0)},[d.pathname]);const y="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",N="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition";return t.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[t.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${l?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[t.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[t.jsx("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:"Admin CRM"}),m&&m.company&&t.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:m.company.company_name})]}),t.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[t.jsxs(mt,{to:"/admin/dashboard",className:({isActive:w})=>w?y:N,children:[t.jsx(dh,{className:"text-lg"}),t.jsx("span",{children:"Dashboard"})]}),t.jsxs("div",{children:[t.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!e),children:[t.jsxs("span",{className:"flex items-center gap-2",children:[t.jsx(Es,{className:"text-lg"}),"Sales"]}),t.jsx(Xa,{className:`transition-transform ${e?"rotate-180":""}`})]}),e&&t.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[t.jsxs(mt,{to:"/admin/accounts",className:({isActive:w})=>w?y:N,children:[t.jsx(Jt,{})," Accounts"]}),t.jsxs(mt,{to:"/admin/contacts",className:({isActive:w})=>w?y:N,children:[t.jsx(qt,{})," Contacts"]}),t.jsxs(mt,{to:"/admin/leads",className:({isActive:w})=>w?y:N,children:[t.jsx(Cs,{})," Leads"]}),t.jsxs(mt,{to:"/admin/deals",className:({isActive:w})=>w?y:N,children:[t.jsx(Es,{})," Deals"]}),t.jsxs(mt,{to:"/admin/quotes",className:({isActive:w})=>w?y:N,children:[t.jsx(en,{})," Quotes"]}),t.jsxs(mt,{to:"/admin/targets",className:({isActive:w})=>w?y:N,children:[t.jsx(sn,{})," Targets"]})]})]}),t.jsxs("div",{children:[t.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>n(!a),children:[t.jsxs("span",{className:"flex items-center gap-2",children:[t.jsx(Ta,{className:"text-lg"}),"Activity"]}),t.jsx(Xa,{className:`transition-transform ${a?"rotate-180":""}`})]}),a&&t.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[t.jsxs(mt,{to:"/admin/tasks",className:({isActive:w})=>w?y:N,children:[t.jsx(ts,{})," Tasks"]}),t.jsxs(mt,{to:"/admin/meetings",className:({isActive:w})=>w?y:N,children:[t.jsx(dt,{})," Meetings"]}),t.jsxs(mt,{to:"/admin/calls",className:({isActive:w})=>w?y:N,children:[t.jsx(Ea,{})," Calls"]}),t.jsxs(mt,{to:"/admin/audit",className:({isActive:w})=>w?y:N,children:[t.jsx(Ta,{})," Audit"]})]})]}),t.jsx("div",{children:t.jsx(mt,{to:"/admin/territory",className:({isActive:w})=>w?y:N,children:t.jsxs("span",{className:"flex items-center gap-2",children:[t.jsx(uh,{className:"text-lg"}),"Territory"]})})}),t.jsxs("div",{children:[t.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!r),children:[t.jsxs("span",{className:"flex items-center gap-2",children:[t.jsx(f1,{className:"text-lg"}),"User Management"]}),t.jsx(Xa,{className:`transition-transform ${r?"rotate-180":""}`})]}),r&&t.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[t.jsxs(mt,{to:"/admin/users",className:({isActive:w})=>w?y:N,children:[t.jsx(Jt,{})," Users"]}),t.jsxs(mt,{to:"/admin/manage-account",className:({isActive:w})=>w?y:N,children:[t.jsx(qt,{})," Manage Account"]})]})]})]}),t.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),l&&t.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>c(!1)}),t.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[t.jsx(oV,{toggleSidebar:()=>c(!l)}),t.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:t.jsx(fu,{})})]})]})}function dV(e){return ct({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M544 248l0 3.3 69.7-69.7c21.9-21.9 21.9-57.3 0-79.2L535.6 24.4c-21.9-21.9-57.3-21.9-79.2 0L416.3 64.5c-2.7-.3-5.5-.5-8.3-.5L296 64c-37.1 0-67.6 28-71.6 64l-.4 0 0 120c0 22.1 17.9 40 40 40s40-17.9 40-40l0-72c0 0 0-.1 0-.1l0-15.9 16 0 136 0c0 0 0 0 .1 0l7.9 0c44.2 0 80 35.8 80 80l0 8zM336 192l0 56c0 39.8-32.2 72-72 72s-72-32.2-72-72l0-118.6c-35.9 6.2-65.8 32.3-76 68.2L99.5 255.2 26.3 328.4c-21.9 21.9-21.9 57.3 0 79.2l78.1 78.1c21.9 21.9 57.3 21.9 79.2 0l37.7-37.7c.9 0 1.8 .1 2.7 .1l160 0c26.5 0 48-21.5 48-48c0-5.6-1-11-2.7-16l2.7 0c26.5 0 48-21.5 48-48c0-12.8-5-24.4-13.2-33c25.7-5 45.1-27.6 45.2-54.8l0-.4c-.1-30.8-25.1-55.8-56-55.8c0 0 0 0 0 0l-120 0z"},child:[]}]})(e)}function ar({props:e,name:s}){return g9({props:e,name:s,defaultTheme:L1,themeId:R0})}function zi(e){const{elementType:s,externalSlotProps:a,ownerState:n,skipResolvingSlotProps:r=!1,...i}=e,l=r?{}:p5(a,n),{props:c,internalRef:d}=y5({...i,externalSlotProps:l}),m=Qr(d,l?.ref,e.additionalProps?.ref);return x5(s,{...c,ref:m},n)}function oa(e){const s=g.useRef(e);return na(()=>{s.current=e}),g.useRef((...a)=>(0,s.current)(...a)).current}var Tp=Symbol("NOT_FOUND");function uV(e,s=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(s)}function mV(e,s=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(s)}function fV(e,s="expected all items to be functions, instead received the following types: "){if(!e.every(a=>typeof a=="function")){const a=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${s}[${a}]`)}}var wL=e=>Array.isArray(e)?e:[e];function hV(e){const s=Array.isArray(e[0])?e[0]:e;return fV(s,"createSelector expects all input-selectors to be functions, but received the following types: "),s}function gV(e,s){const a=[],{length:n}=e;for(let r=0;r<n;r++)a.push(e[r].apply(null,s));return a}function xV(e){let s;return{get(a){return s&&e(s.key,a)?s.value:Tp},put(a,n){s={key:a,value:n}},getEntries(){return s?[s]:[]},clear(){s=void 0}}}function pV(e,s){let a=[];function n(c){const d=a.findIndex(m=>s(c,m.key));if(d>-1){const m=a[d];return d>0&&(a.splice(d,1),a.unshift(m)),m.value}return Tp}function r(c,d){n(c)===Tp&&(a.unshift({key:c,value:d}),a.length>e&&a.pop())}function i(){return a}function l(){a=[]}return{get:n,put:r,getEntries:i,clear:l}}var yV=(e,s)=>e===s;function bV(e){return function(a,n){if(a===null||n===null||a.length!==n.length)return!1;const{length:r}=a;for(let i=0;i<r;i++)if(!e(a[i],n[i]))return!1;return!0}}function vV(e,s){const a=typeof s=="object"?s:{equalityCheck:s},{equalityCheck:n=yV,maxSize:r=1,resultEqualityCheck:i}=a,l=bV(n);let c=0;const d=r<=1?xV(l):pV(r,l);function m(){let f=d.get(arguments);if(f===Tp){if(f=e.apply(null,arguments),c++,i){const y=d.getEntries().find(N=>i(N.value,f));y&&(f=y.value,c!==0&&c--)}d.put(arguments,f)}return f}return m.clearCache=()=>{d.clear(),m.resetResultsCount()},m.resultsCount=()=>c,m.resetResultsCount=()=>{c=0},m}var NV=class{constructor(e){this.value=e}deref(){return this.value}},wV=typeof WeakRef<"u"?WeakRef:NV,jV=0,jL=1;function dx(){return{s:jV,v:void 0,o:null,p:null}}function j5(e,s={}){let a=dx();const{resultEqualityCheck:n}=s;let r,i=0;function l(){let c=a;const{length:d}=arguments;for(let h=0,y=d;h<y;h++){const N=arguments[h];if(typeof N=="function"||typeof N=="object"&&N!==null){let w=c.o;w===null&&(c.o=w=new WeakMap);const p=w.get(N);p===void 0?(c=dx(),w.set(N,c)):c=p}else{let w=c.p;w===null&&(c.p=w=new Map);const p=w.get(N);p===void 0?(c=dx(),w.set(N,c)):c=p}}const m=c;let f;if(c.s===jL)f=c.v;else if(f=e.apply(null,arguments),i++,n){const h=r?.deref?.()??r;h!=null&&n(h,f)&&(f=h,i!==0&&i--),r=typeof f=="object"&&f!==null||typeof f=="function"?new wV(f):f}return m.s=jL,m.v=f,f}return l.clearCache=()=>{a=dx(),l.resetResultsCount()},l.resultsCount=()=>i,l.resetResultsCount=()=>{i=0},l}function C5(e,...s){const a=typeof e=="function"?{memoize:e,memoizeOptions:s}:e,n=(...r)=>{let i=0,l=0,c,d={},m=r.pop();typeof m=="object"&&(d=m,m=r.pop()),uV(m,`createSelector expects an output function after the inputs, but received: [${typeof m}]`);const f={...a,...d},{memoize:h,memoizeOptions:y=[],argsMemoize:N=j5,argsMemoizeOptions:w=[]}=f,p=wL(y),v=wL(w),C=hV(r),j=h(function(){return i++,m.apply(null,arguments)},...p),_=N(function(){l++;const k=gV(C,arguments);return c=j.apply(null,k),c},...v);return Object.assign(_,{resultFunc:m,memoizedResultFunc:j,dependencies:C,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>c,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:h,argsMemoize:N})};return Object.assign(n,{withTypes:()=>n}),n}var CV=C5(j5),SV=Object.assign((e,s=CV)=>{mV(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const a=Object.keys(e),n=a.map(i=>e[i]);return s(n,(...i)=>i.reduce((l,c,d)=>(l[a[d]]=c,l),{}))},{withTypes:()=>SV});const _V=C5({memoize:vV,memoizeOptions:{maxSize:1,equalityCheck:Object.is}}),nt=(e,s,a,n,r,i,l,c,...d)=>{if(d.length>0)throw new Error("Unsupported number of selectors");let m;if(e&&s&&a&&n&&r&&i&&l&&c)m=(f,h,y,N)=>{const w=e(f,h,y,N),p=s(f,h,y,N),v=a(f,h,y,N),C=n(f,h,y,N),j=r(f,h,y,N),_=i(f,h,y,N),T=l(f,h,y,N);return c(w,p,v,C,j,_,T,h,y,N)};else if(e&&s&&a&&n&&r&&i&&l)m=(f,h,y,N)=>{const w=e(f,h,y,N),p=s(f,h,y,N),v=a(f,h,y,N),C=n(f,h,y,N),j=r(f,h,y,N),_=i(f,h,y,N);return l(w,p,v,C,j,_,h,y,N)};else if(e&&s&&a&&n&&r&&i)m=(f,h,y,N)=>{const w=e(f,h,y,N),p=s(f,h,y,N),v=a(f,h,y,N),C=n(f,h,y,N),j=r(f,h,y,N);return i(w,p,v,C,j,h,y,N)};else if(e&&s&&a&&n&&r)m=(f,h,y,N)=>{const w=e(f,h,y,N),p=s(f,h,y,N),v=a(f,h,y,N),C=n(f,h,y,N);return r(w,p,v,C,h,y,N)};else if(e&&s&&a&&n)m=(f,h,y,N)=>{const w=e(f,h,y,N),p=s(f,h,y,N),v=a(f,h,y,N);return n(w,p,v,h,y,N)};else if(e&&s&&a)m=(f,h,y,N)=>{const w=e(f,h,y,N),p=s(f,h,y,N);return a(w,p,h,y,N)};else if(e&&s)m=(f,h,y,N)=>{const w=e(f,h,y,N);return s(w,h,y,N)};else if(e)m=e;else throw new Error("Missing arguments");return m},U0=e=>(...s)=>{const a=new WeakMap;let n=1;const r=s[s.length-1],i=s.length-1||1,l=Math.max(r.length-i,0);if(l>3)throw new Error("Unsupported number of arguments");return(d,m,f,h)=>{let y=d.__cacheKey__;y||(y={id:n},d.__cacheKey__=y,n+=1);let N=a.get(y);if(!N){const w=s.length===1?[C=>C,r]:s;let p=s;const v=[void 0,void 0,void 0];switch(l){case 0:break;case 1:{p=[...w.slice(0,-1),()=>v[0],r];break}case 2:{p=[...w.slice(0,-1),()=>v[0],()=>v[1],r];break}case 3:{p=[...w.slice(0,-1),()=>v[0],()=>v[1],()=>v[2],r];break}default:throw new Error("Unsupported number of arguments")}e&&(p=[...p,e]),N=_V(...p),N.selectorArgs=v,a.set(y,N)}switch(l){case 3:N.selectorArgs[2]=h;case 2:N.selectorArgs[1]=f;case 1:N.selectorArgs[0]=m}switch(l){case 0:return N(d);case 1:return N(d,m);case 2:return N(d,m,f);case 3:return N(d,m,f,h);default:throw new Error("unreachable")}}},Bs=U0();var bN={exports:{}},vN={},NN={exports:{}},wN={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CL;function TV(){if(CL)return wN;CL=1;var e=cu();function s(h,y){return h===y&&(h!==0||1/h===1/y)||h!==h&&y!==y}var a=typeof Object.is=="function"?Object.is:s,n=e.useState,r=e.useEffect,i=e.useLayoutEffect,l=e.useDebugValue;function c(h,y){var N=y(),w=n({inst:{value:N,getSnapshot:y}}),p=w[0].inst,v=w[1];return i(function(){p.value=N,p.getSnapshot=y,d(p)&&v({inst:p})},[h,N,y]),r(function(){return d(p)&&v({inst:p}),h(function(){d(p)&&v({inst:p})})},[h]),l(N),N}function d(h){var y=h.getSnapshot;h=h.value;try{var N=y();return!a(h,N)}catch{return!0}}function m(h,y){return y()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:c;return wN.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:f,wN}var SL;function EV(){return SL||(SL=1,NN.exports=TV()),NN.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _L;function AV(){if(_L)return vN;_L=1;var e=cu(),s=EV();function a(m,f){return m===f&&(m!==0||1/m===1/f)||m!==m&&f!==f}var n=typeof Object.is=="function"?Object.is:a,r=s.useSyncExternalStore,i=e.useRef,l=e.useEffect,c=e.useMemo,d=e.useDebugValue;return vN.useSyncExternalStoreWithSelector=function(m,f,h,y,N){var w=i(null);if(w.current===null){var p={hasValue:!1,value:null};w.current=p}else p=w.current;w=c(function(){function C(E){if(!j){if(j=!0,_=E,E=y(E),N!==void 0&&p.hasValue){var A=p.value;if(N(A,E))return T=A}return T=E}if(A=T,n(_,E))return A;var U=y(E);return N!==void 0&&N(A,U)?(_=E,A):(_=E,T=U)}var j=!1,_,T,k=h===void 0?null:h;return[function(){return C(f())},k===null?void 0:function(){return C(k())}]},[f,h,y,N]);var v=r(m,w[0],w[1]);return l(function(){p.hasValue=!0,p.value=v},[v]),d(v),v},vN}var TL;function LV(){return TL||(TL=1,bN.exports=AV()),bN.exports}var kV=LV();function DV(e,s,a,n,r){const i=l=>s(l,a,n,r);return kV.useSyncExternalStoreWithSelector(e.subscribe,e.getSnapshot,e.getSnapshot,i)}const EL={};function z0(e,s){const a=g.useRef(EL);return a.current===EL&&(a.current=e(s)),a}const MV=[];function S5(e){g.useEffect(e,MV)}const PV=()=>{};function OV(e,s,a){const n=z0(IV,{store:e,selector:s}).current;n.effect=a,S5(n.onMount)}function IV(e){const{store:s,selector:a}=e;let n=a(s.state);const r={effect:PV,dispose:null,subscribe:()=>{r.dispose??=s.subscribe(i=>{const l=a(i);if(!Object.is(n,l)){const c=n;n=l,r.effect(c,l)}})},onMount:()=>(r.subscribe(),()=>{r.dispose?.(),r.dispose=null})};return r.subscribe(),r}class P1{static create(s){return new P1(s)}constructor(s){this.state=s,this.listeners=new Set,this.updateTick=0}subscribe=s=>(this.listeners.add(s),()=>{this.listeners.delete(s)});getSnapshot=()=>this.state;setState(s){this.state=s,this.updateTick+=1;const a=this.updateTick,n=this.listeners.values();let r;for(;r=n.next(),!r.done;){if(a!==this.updateTick)return;const i=r.value;i(s)}}update(s){for(const a in s)if(!Object.is(this.state[a],s[a])){this.setState(Oe({},this.state,s));return}}set(s,a){Object.is(this.state[s],a)||this.setState(Oe({},this.state,{[s]:a}))}}const F0=({params:e,store:s})=>{g.useEffect(()=>{s.set("animation",Oe({},s.state.animation,{skip:e.skipAnimation}))},[s,e.skipAnimation]);const a=g.useCallback(()=>{let n=!1;return s.set("animation",Oe({},s.state.animation,{skipAnimationRequests:s.state.animation.skipAnimationRequests+1})),()=>{n||(n=!0,s.set("animation",Oe({},s.state.animation,{skipAnimationRequests:s.state.animation.skipAnimationRequests-1})))}},[s]);return na(()=>{if(typeof window>"u"||!window?.matchMedia)return;let r;const i=c=>{c.matches?r=a():r?.()},l=window.matchMedia("(prefers-reduced-motion)");return i(l),l.addEventListener("change",i),()=>{l.removeEventListener("change",i)}},[a,s]),{instance:{disableAnimation:a}}};F0.params={skipAnimation:!0};F0.getDefaultizedParams=({params:e})=>Oe({},e,{skipAnimation:e.skipAnimation??!1});F0.getInitialState=({skipAnimation:e})=>({animation:{skip:e,skipAnimationRequests:0}});const $V=e=>e.animation,RV=nt($V,e=>e.skip||e.skipAnimationRequests>0);function UV(e,s){const a=g.useRef(!0);g.useEffect(()=>{if(a.current){a.current=!1;return}return e()},s)}function aC(e){return e&&e.ownerDocument||document}function zV(e){return aC(e).defaultView||window}const gt=DV,B0="DEFAULT_X_AXIS_KEY",FV="DEFAULT_Y_AXIS_KEY",BV={top:20,bottom:20,left:20,right:20},HV=45,GV=25,_5=20,Zr=e=>e.cartesianAxis?.x,Ki=e=>e.cartesianAxis?.y,VV=nt(Ki,function(s){return(s??[]).reduce((a,n)=>n.position==="left"?a+(n.width||0)+(n.zoom?.slider.enabled?n.zoom.slider.size:0):a,0)}),WV=nt(Ki,function(s){return(s??[]).reduce((a,n)=>n.position==="right"?a+(n.width||0)+(n.zoom?.slider.enabled?n.zoom.slider.size:0):a,0)}),YV=nt(Zr,function(s){return(s??[]).reduce((a,n)=>n.position==="top"?a+(n.height||0)+(n.zoom?.slider.enabled?n.zoom.slider.size:0):a,0)}),QV=nt(Zr,function(s){return(s??[]).reduce((a,n)=>n.position==="bottom"?a+(n.height||0)+(n.zoom?.slider.enabled?n.zoom.slider.size:0):a,0)}),qV=Bs(VV,WV,YV,QV,function(s,a,n,r){return{left:s,right:a,top:n,bottom:r}}),yh=e=>e.dimensions,XV=e=>e.dimensions.margin,an=Bs(yh,XV,qV,function({width:s,height:a},{top:n,right:r,bottom:i,left:l},{left:c,right:d,top:m,bottom:f}){return{width:s-l-r-c-d,left:l+c,right:r+d,height:a-n-i-m-f,top:n+m,bottom:i+f}}),KV=nt(yh,e=>e.width),ZV=nt(yh,e=>e.height),T5=nt(yh,e=>e.propsWidth),E5=nt(yh,e=>e.propsHeight);function JV(e,s){return typeof e=="number"?{top:e,bottom:e,left:e,right:e}:s?Oe({},s,e):e}const eW=10,H0=({params:e,store:s,svgRef:a})=>{const n=e.width!==void 0&&e.height!==void 0,r=g.useRef({displayError:!1,initialCompute:!0,computeRun:0}),[i,l]=g.useState(0),[c,d]=g.useState(0),m=g.useCallback(()=>{const w=a?.current;if(!w)return{};const v=zV(w).getComputedStyle(w),C=Math.floor(parseFloat(v.height))||0,j=Math.floor(parseFloat(v.width))||0;return(s.state.dimensions.width!==j||s.state.dimensions.height!==C)&&s.set("dimensions",{margin:{top:e.margin.top,right:e.margin.right,bottom:e.margin.bottom,left:e.margin.left},width:e.width??j,height:e.height??C,propsWidth:e.width,propsHeight:e.height}),{height:C,width:j}},[s,a,e.height,e.width,e.margin.left,e.margin.right,e.margin.top,e.margin.bottom]);UV(()=>{const w=e.width??s.state.dimensions.width,p=e.height??s.state.dimensions.height;s.set("dimensions",{margin:{top:e.margin.top,right:e.margin.right,bottom:e.margin.bottom,left:e.margin.left},width:w,height:p,propsHeight:e.height,propsWidth:e.width})},[s,e.height,e.width,e.margin.left,e.margin.right,e.margin.top,e.margin.bottom]),g.useEffect(()=>{r.current.displayError=!0},[]),na(()=>{if(n||!r.current.initialCompute||r.current.computeRun>eW)return;const w=m();w.width!==i||w.height!==c?(r.current.computeRun+=1,w.width!==void 0&&l(w.width),w.height!==void 0&&d(w.height)):r.current.initialCompute&&(r.current.initialCompute=!1)},[c,i,m,n]),na(()=>{if(n)return()=>{};m();const w=a.current;if(typeof ResizeObserver>"u")return()=>{};let p;const v=new ResizeObserver(()=>{p=requestAnimationFrame(()=>{m()})});return w&&v.observe(w),()=>{p&&cancelAnimationFrame(p),w&&v.unobserve(w)}},[m,n,a]);const f=gt(s,an),h=g.useCallback(w=>w>=f.left-1&&w<=f.left+f.width,[f.left,f.width]),y=g.useCallback(w=>w>=f.top-1&&w<=f.top+f.height,[f.height,f.top]);return{instance:{isPointInside:g.useCallback((w,p,v)=>v&&"closest"in v&&v.closest("[data-drawing-container]")?!0:h(w)&&y(p),[h,y]),isXInside:h,isYInside:y}}};H0.params={width:!0,height:!0,margin:!0};H0.getDefaultizedParams=({params:e})=>Oe({},e,{margin:JV(e.margin,BV)});H0.getInitialState=({width:e,height:s,margin:a})=>({dimensions:{margin:a,width:e??0,height:s??0,propsWidth:e,propsHeight:s}});const O1=({params:e,store:s})=>(na(()=>{s.set("experimentalFeatures",e.experimentalFeatures)},[s,e.experimentalFeatures]),{});O1.params={experimentalFeatures:!0};O1.getInitialState=({experimentalFeatures:e})=>({experimentalFeatures:e});const tW=e=>e.experimentalFeatures,G0=nt(tW,e=>!!e?.preferStrictDomainInLineCharts);let AL=0;const sW=()=>(AL+=1,`mui-chart-${AL}`),I1=({params:e,store:s})=>(g.useEffect(()=>{e.id===void 0||e.id===s.state.id.providedChartId&&s.state.id.chartId!==void 0||s.set("id",Oe({},s.state.id,{chartId:e.id??sW()}))},[s,e.id]),{});I1.params={id:!0};I1.getInitialState=({id:e})=>({id:{chartId:e,providedChartId:e}});const aW=e=>e.id,nW=nt(aW,e=>e.chartId),rW=["#4254FB","#FFB422","#FA4F58","#0DBEFF","#22BF75","#FA83B4","#FF7511"],iW=["#495AFB","#FFC758","#F35865","#30C8FF","#44CE8D","#F286B3","#FF8C39"],A5=e=>e==="dark"?iW:rW,L5=({series:e,colors:s,seriesConfig:a})=>{const n={};return e.forEach((r,i)=>{const l=a[r.type].getSeriesWithDefaultValues(r,i,s),c=l.id;if(n[r.type]===void 0&&(n[r.type]={series:{},seriesOrder:[]}),n[r.type]?.series[c]!==void 0)throw new Error(`MUI X Charts: series' id "${c}" is not unique.`);n[r.type].series[c]=l,n[r.type].seriesOrder.push(c)}),n},lW=(e,s,a)=>{const n={};return Object.keys(s).forEach(r=>{const i=e[r];i!==void 0&&(n[r]=s[r]?.seriesProcessor?.(i,a)??i)}),n},V0=({params:e,store:s,seriesConfig:a})=>{const{series:n,dataset:r,theme:i,colors:l}=e,c=g.useRef(!0);return g.useEffect(()=>{if(c.current){c.current=!1;return}s.set("series",Oe({},s.state.series,{defaultizedSeries:L5({series:n,colors:typeof l=="function"?l(i):l,seriesConfig:a}),dataset:r}))},[l,r,n,i,a,s]),{}};V0.params={dataset:!0,series:!0,colors:!0,theme:!0};const oW=[];V0.getDefaultizedParams=({params:e})=>Oe({},e,{series:e.series?.length?e.series:oW,colors:e.colors??A5,theme:e.theme??"light"});V0.getInitialState=({series:e=[],colors:s,theme:a,dataset:n},r,i)=>({series:{seriesConfig:i,defaultizedSeries:L5({series:e,colors:typeof s=="function"?s(a):s,seriesConfig:i}),dataset:n}});const $1=e=>e.series,cW=nt($1,e=>e.defaultizedSeries),Cn=nt($1,e=>e.seriesConfig),dW=nt($1,e=>e.dataset),Ls=Bs(cW,Cn,dW,function(s,a,n){return lW(s,a,n)}),uW={abort:!0,animationcancel:!0,animationend:!0,animationiteration:!0,animationstart:!0,auxclick:!0,beforeinput:!0,beforetoggle:!0,blur:!0,cancel:!0,canplay:!0,canplaythrough:!0,change:!0,click:!0,close:!0,compositionend:!0,compositionstart:!0,compositionupdate:!0,contextlost:!0,contextmenu:!0,contextrestored:!0,copy:!0,cuechange:!0,cut:!0,dblclick:!0,drag:!0,dragend:!0,dragenter:!0,dragleave:!0,dragover:!0,dragstart:!0,drop:!0,durationchange:!0,emptied:!0,ended:!0,error:!0,focus:!0,focusin:!0,focusout:!0,formdata:!0,gotpointercapture:!0,input:!0,invalid:!0,keydown:!0,keypress:!0,keyup:!0,load:!0,loadeddata:!0,loadedmetadata:!0,loadstart:!0,lostpointercapture:!0,mousedown:!0,mouseenter:!0,mouseleave:!0,mousemove:!0,mouseout:!0,mouseover:!0,mouseup:!0,paste:!0,pause:!0,play:!0,playing:!0,pointercancel:!0,pointerdown:!0,pointerenter:!0,pointerleave:!0,pointermove:!0,pointerout:!0,pointerover:!0,pointerup:!0,progress:!0,ratechange:!0,reset:!0,resize:!0,scroll:!0,scrollend:!0,securitypolicyviolation:!0,seeked:!0,seeking:!0,select:!0,selectionchange:!0,selectstart:!0,slotchange:!0,stalled:!0,submit:!0,suspend:!0,timeupdate:!0,toggle:!0,touchcancel:!0,touchend:!0,touchmove:!0,touchstart:!0,transitioncancel:!0,transitionend:!0,transitionrun:!0,transitionstart:!0,volumechange:!0,waiting:!0,webkitanimationend:!0,webkitanimationiteration:!0,webkitanimationstart:!0,webkittransitionend:!0,wheel:!0,beforematch:!0,pointerrawupdate:!0};class k5{customData={};constructor(s){if(!s||!s.name)throw new Error("Gesture must be initialized with a valid name.");if(s.name in uW)throw new Error(`Gesture can't be created with a native event name. Tried to use "${s.name}". Please use a custom name instead.`);this.name=s.name,this.preventDefault=s.preventDefault??!1,this.stopPropagation=s.stopPropagation??!1,this.preventIf=s.preventIf??[],this.requiredKeys=s.requiredKeys??[],this.pointerMode=s.pointerMode??[],this.pointerOptions=s.pointerOptions??{}}init(s,a,n,r){this.element=s,this.pointerManager=a,this.gesturesRegistry=n,this.keyboardManager=r;const i=`${this.name}ChangeOptions`;this.element.addEventListener(i,this.handleOptionsChange);const l=`${this.name}ChangeState`;this.element.addEventListener(l,this.handleStateChange)}handleOptionsChange=s=>{s&&s.detail&&this.updateOptions(s.detail)};updateOptions(s){this.preventDefault=s.preventDefault??this.preventDefault,this.stopPropagation=s.stopPropagation??this.stopPropagation,this.preventIf=s.preventIf??this.preventIf,this.requiredKeys=s.requiredKeys??this.requiredKeys,this.pointerMode=s.pointerMode??this.pointerMode,this.pointerOptions=s.pointerOptions??this.pointerOptions}getBaseConfig(){return{requiredKeys:this.requiredKeys}}getEffectiveConfig(s,a){if(s!=="mouse"&&s!=="touch"&&s!=="pen")return a;const n=this.pointerOptions[s];return n?Oe({},a,n):a}handleStateChange=s=>{s&&s.detail&&this.updateState(s.detail)};updateState(s){Object.assign(this.state,s)}getTargetElement(s){return this.isActive||this.element===s.target||"contains"in this.element&&this.element.contains(s.target)||"getRootNode"in this.element&&this.element.getRootNode()instanceof ShadowRoot&&s.composedPath().includes(this.element)?this.element:null}set isActive(s){s?this.gesturesRegistry.registerActiveGesture(this.element,this):this.gesturesRegistry.unregisterActiveGesture(this.element,this)}get isActive(){return this.gesturesRegistry.isGestureActive(this.element,this)??!1}shouldPreventGesture(s,a){const n=this.getEffectiveConfig(a,this.getBaseConfig());if(!this.keyboardManager.areKeysPressed(n.requiredKeys))return!0;if(this.preventIf.length===0)return!1;const r=this.gesturesRegistry.getActiveGestures(s);return this.preventIf.some(i=>r[i])}isPointerTypeAllowed(s){return!this.pointerMode||this.pointerMode.length===0?!0:this.pointerMode.includes(s)}destroy(){const s=`${this.name}ChangeOptions`;this.element.removeEventListener(s,this.handleOptionsChange);const a=`${this.name}ChangeState`;this.element.removeEventListener(a,this.handleStateChange)}}class mW{activeGestures=new Map;registerActiveGesture(s,a){this.activeGestures.has(s)||this.activeGestures.set(s,new Set);const n=this.activeGestures.get(s),r={gesture:a,element:s};n.add(r)}unregisterActiveGesture(s,a){const n=this.activeGestures.get(s);n&&(n.forEach(r=>{r.gesture===a&&n.delete(r)}),n.size===0&&this.activeGestures.delete(s))}getActiveGestures(s){const a=this.activeGestures.get(s);return a?Array.from(a).reduce((n,r)=>(n[r.gesture.name]=!0,n),{}):{}}isGestureActive(s,a){const n=this.activeGestures.get(s);return n?Array.from(n).some(r=>r.gesture===a):!1}destroy(){this.activeGestures.clear()}unregisterElement(s){this.activeGestures.delete(s)}}class fW{pressedKeys=new Set;constructor(){this.initialize()}initialize(){typeof window>"u"||(window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp),window.addEventListener("blur",this.clearKeys))}handleKeyDown=s=>{this.pressedKeys.add(s.key)};handleKeyUp=s=>{this.pressedKeys.delete(s.key)};clearKeys=()=>{this.pressedKeys.clear()};areKeysPressed(s){return!s||s.length===0?!0:s.every(a=>a==="ControlOrMeta"?navigator.platform.includes("Mac")?this.pressedKeys.has("Meta"):this.pressedKeys.has("Control"):this.pressedKeys.has(a))}destroy(){typeof window<"u"&&(window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp),window.removeEventListener("blur",this.clearKeys)),this.clearKeys()}}class hW{preventEventInterruption=!0;pointers=new Map;gestureHandlers=new Set;constructor(s){this.root=s.root??document.getRootNode({composed:!0})??document.body,this.touchAction=s.touchAction||"auto",this.passive=s.passive??!1,this.preventEventInterruption=s.preventEventInterruption??!0,this.setupEventListeners()}registerGestureHandler(s){return this.gestureHandlers.add(s),()=>{this.gestureHandlers.delete(s)}}getPointers(){return new Map(this.pointers)}setupEventListeners(){this.touchAction!=="auto"&&(this.root.style.touchAction=this.touchAction),this.root.addEventListener("pointerdown",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointermove",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointerup",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointercancel",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("forceCancel",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("blur",this.handleInterruptEvents),this.root.addEventListener("contextmenu",this.handleInterruptEvents)}handleInterruptEvents=s=>{if(this.preventEventInterruption&&"pointerType"in s&&s.pointerType==="touch"){s.preventDefault();return}const a=new PointerEvent("forceCancel",{bubbles:!1,cancelable:!1}),n=this.pointers.values().next().value;if(this.pointers.size>0&&n){Object.defineProperties(a,{clientX:{value:n.clientX},clientY:{value:n.clientY},pointerId:{value:n.pointerId},pointerType:{value:n.pointerType}});for(const[r,i]of this.pointers.entries()){const l=Oe({},i,{type:"forceCancel"});this.pointers.set(r,l)}}this.notifyHandlers(a),this.pointers.clear()};handlePointerEvent=s=>{const{type:a,pointerId:n}=s;if(a==="pointerdown"||a==="pointermove")this.pointers.set(n,this.createPointerData(s));else if(a==="pointerup"||a==="pointercancel"||a==="forceCancel"){this.pointers.set(n,this.createPointerData(s)),this.notifyHandlers(s),this.pointers.delete(n);return}this.notifyHandlers(s)};notifyHandlers(s){this.gestureHandlers.forEach(a=>a(this.pointers,s))}createPointerData(s){return{pointerId:s.pointerId,clientX:s.clientX,clientY:s.clientY,pageX:s.pageX,pageY:s.pageY,target:s.target,timeStamp:s.timeStamp,type:s.type,isPrimary:s.isPrimary,pressure:s.pressure,width:s.width,height:s.height,pointerType:s.pointerType,srcEvent:s}}destroy(){this.root.removeEventListener("pointerdown",this.handlePointerEvent),this.root.removeEventListener("pointermove",this.handlePointerEvent),this.root.removeEventListener("pointerup",this.handlePointerEvent),this.root.removeEventListener("pointercancel",this.handlePointerEvent),this.root.removeEventListener("forceCancel",this.handlePointerEvent),this.root.removeEventListener("blur",this.handleInterruptEvents),this.root.removeEventListener("contextmenu",this.handleInterruptEvents),this.pointers.clear(),this.gestureHandlers.clear()}}class gW{gestureTemplates=new Map;elementGestureMap=new Map;activeGesturesRegistry=new mW;keyboardManager=new fW;constructor(s){this.pointerManager=new hW({root:s.root,touchAction:s.touchAction,passive:s.passive}),s.gestures&&s.gestures.length>0&&s.gestures.forEach(a=>{this.addGestureTemplate(a)})}addGestureTemplate(s){this.gestureTemplates.has(s.name)&&console.warn(`Gesture template with name "${s.name}" already exists. It will be overwritten.`),this.gestureTemplates.set(s.name,s)}setGestureOptions(s,a,n){const r=this.elementGestureMap.get(a);if(!r||!r.has(s)){console.error(`Gesture "${s}" not found on the provided element.`);return}const i=new CustomEvent(`${s}ChangeOptions`,{detail:n,bubbles:!1,cancelable:!1,composed:!1});a.dispatchEvent(i)}setGestureState(s,a,n){const r=this.elementGestureMap.get(a);if(!r||!r.has(s)){console.error(`Gesture "${s}" not found on the provided element.`);return}const i=new CustomEvent(`${s}ChangeState`,{detail:n,bubbles:!1,cancelable:!1,composed:!1});a.dispatchEvent(i)}registerElement(s,a,n){return Array.isArray(s)||(s=[s]),s.forEach(r=>{const i=n?.[r];this.registerSingleGesture(r,a,i)}),a}registerSingleGesture(s,a,n){const r=this.gestureTemplates.get(s);if(!r)return console.error(`Gesture template "${s}" not found.`),!1;this.elementGestureMap.has(a)||this.elementGestureMap.set(a,new Map);const i=this.elementGestureMap.get(a);i.has(s)&&(console.warn(`Element already has gesture "${s}" registered. It will be replaced.`),this.unregisterElement(s,a));const l=r.clone(n);return l.init(a,this.pointerManager,this.activeGesturesRegistry,this.keyboardManager),i.set(s,l),!0}unregisterElement(s,a){const n=this.elementGestureMap.get(a);return!n||!n.has(s)?!1:(n.get(s).destroy(),n.delete(s),this.activeGesturesRegistry.unregisterElement(a),n.size===0&&this.elementGestureMap.delete(a),!0)}unregisterAllGestures(s){const a=this.elementGestureMap.get(s);if(a){for(const[,n]of a)n.destroy(),this.activeGesturesRegistry.unregisterElement(s);this.elementGestureMap.delete(s)}}destroy(){for(const[s]of this.elementGestureMap)this.unregisterAllGestures(s);this.gestureTemplates.clear(),this.elementGestureMap.clear(),this.activeGesturesRegistry.destroy(),this.keyboardManager.destroy(),this.pointerManager.destroy()}}class xc extends k5{unregisterHandler=null;originalTarget=null;constructor(s){super(s),this.minPointers=s.minPointers??1,this.maxPointers=s.maxPointers??1/0}init(s,a,n,r){super.init(s,a,n,r),this.unregisterHandler=this.pointerManager.registerGestureHandler(this.handlePointerEvent)}updateOptions(s){super.updateOptions(s),this.minPointers=s.minPointers??this.minPointers,this.maxPointers=s.maxPointers??this.maxPointers}getBaseConfig(){return{requiredKeys:this.requiredKeys,minPointers:this.minPointers,maxPointers:this.maxPointers}}isWithinPointerCount(s,a){const n=this.getEffectiveConfig(a,this.getBaseConfig());return s.length>=n.minPointers&&s.length<=n.maxPointers}getRelevantPointers(s,a){return s.filter(n=>this.isPointerTypeAllowed(n.pointerType)&&(a===n.target||n.target===this.originalTarget||a===this.originalTarget||"contains"in a&&a.contains(n.target))||"getRootNode"in a&&a.getRootNode()instanceof ShadowRoot&&n.srcEvent.composedPath().includes(a))}destroy(){this.unregisterHandler&&(this.unregisterHandler(),this.unregisterHandler=null),super.destroy()}}function xW(e,s){const a=s.x-e.x,n=s.y-e.y;return Math.sqrt(a*a+n*n)}function jN(e){if(e.length<2)return 0;let s=0,a=0;for(let n=0;n<e.length;n+=1)for(let r=n+1;r<e.length;r+=1)s+=xW({x:e[n].clientX,y:e[n].clientY},{x:e[r].clientX,y:e[r].clientY}),a+=1;return a>0?s/a:0}function Fi(e){if(e.length===0)return{x:0,y:0};const s=e.reduce((a,n)=>(a.x+=n.clientX,a.y+=n.clientY,a),{x:0,y:0});return{x:s.x/e.length,y:s.y/e.length}}function Vn(e,s){return`${e}${s==="ongoing"?"":s.charAt(0).toUpperCase()+s.slice(1)}`}const ux=1e-5,Cl=1e-5,LL=.15;function pW(e,s){const a=s.x-e.x,n=s.y-e.y,r={vertical:null,horizontal:null,mainAxis:null},i=yW(s,e),l=Math.abs(a)>Math.abs(n)?"horizontal":"vertical",c=i||l==="horizontal"?ux:LL,d=i?ux:l==="horizontal"?LL:ux;return Math.abs(a)>c&&(r.horizontal=a>0?"right":"left"),Math.abs(n)>d&&(r.vertical=n>0?"down":"up"),r.mainAxis=i?"diagonal":l,r}function yW(e,s){const a=s.x-e.x,n=s.y-e.y,r=Math.atan2(n,a)*180/Math.PI;return r>=-45+Cl&&r<=-22.5+Cl||r>=22.5+Cl&&r<=45+Cl||r>=135+Cl&&r<=157.5+Cl||r>=-157.5+Cl&&r<=-135+Cl}function bW(e,s){if(!e.vertical&&!e.horizontal)return!1;if(s.length===0)return!0;const a=e.vertical===null||s.includes(e.vertical),n=e.horizontal===null||s.includes(e.horizontal);return a&&n}const kL=0,vW=e=>e>kL?1:e<-kL?-1:0,Al=e=>{e.cancelable&&e.preventDefault()};class R1 extends xc{state={lastPosition:null};constructor(s){super(s),this.threshold=s.threshold||0}clone(s){return new R1(Oe({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},s))}init(s,a,n,r){super.init(s,a,n,r),this.element.addEventListener("pointerenter",this.handleElementEnter),this.element.addEventListener("pointerleave",this.handleElementLeave)}destroy(){this.element.removeEventListener("pointerenter",this.handleElementEnter),this.element.removeEventListener("pointerleave",this.handleElementLeave),this.resetState(),super.destroy()}updateOptions(s){super.updateOptions(s)}resetState(){this.isActive=!1,this.state={lastPosition:null}}handleElementEnter=s=>{if(s.pointerType!=="mouse"&&s.pointerType!=="pen")return;const a=this.pointerManager.getPointers()||new Map,n=Array.from(a.values());if(this.isWithinPointerCount(n,s.pointerType)){this.isActive=!0;const r={x:s.clientX,y:s.clientY};this.state.lastPosition=r,this.emitMoveEvent(this.element,"start",n,s),this.emitMoveEvent(this.element,"ongoing",n,s)}};handleElementLeave=s=>{if(s.pointerType!=="mouse"&&s.pointerType!=="pen"||!this.isActive)return;const a=this.pointerManager.getPointers()||new Map,n=Array.from(a.values());this.emitMoveEvent(this.element,"end",n,s),this.resetState()};handlePointerEvent=(s,a)=>{if(a.type!=="pointermove"||a.pointerType!=="mouse"&&a.pointerType!=="pen")return;this.preventDefault&&a.preventDefault(),this.stopPropagation&&a.stopPropagation();const n=Array.from(s.values()),r=this.getTargetElement(a);if(!r||!this.isWithinPointerCount(n,a.pointerType))return;if(this.shouldPreventGesture(r,a.pointerType)){if(!this.isActive)return;this.resetState(),this.emitMoveEvent(r,"end",n,a);return}const i={x:a.clientX,y:a.clientY};this.state.lastPosition=i,this.isActive||(this.isActive=!0,this.emitMoveEvent(r,"start",n,a)),this.emitMoveEvent(r,"ongoing",n,a)};emitMoveEvent(s,a,n,r){const i=this.state.lastPosition||Fi(n),l=this.gesturesRegistry.getActiveGestures(s),c={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:a,pointers:n,timeStamp:r.timeStamp,activeGestures:l,customData:this.customData},d=Vn(this.name,a),m=new CustomEvent(d,{bubbles:!0,cancelable:!0,composed:!0,detail:c});s.dispatchEvent(m)}}class Zo extends xc{state={startPointers:new Map,startCentroid:null,lastCentroid:null,movementThresholdReached:!1,totalDeltaX:0,totalDeltaY:0,activeDeltaX:0,activeDeltaY:0,lastDirection:{vertical:null,horizontal:null,mainAxis:null},lastDeltas:null};constructor(s){super(s),this.direction=s.direction||["up","down","left","right"],this.threshold=s.threshold||0}clone(s){return new Zo(Oe({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,direction:[...this.direction],requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},s))}destroy(){this.resetState(),super.destroy()}updateOptions(s){super.updateOptions(s),this.direction=s.direction||this.direction,this.threshold=s.threshold??this.threshold}resetState(){this.isActive=!1,this.state=Oe({},this.state,{startPointers:new Map,startCentroid:null,lastCentroid:null,lastDeltas:null,activeDeltaX:0,activeDeltaY:0,movementThresholdReached:!1,lastDirection:{vertical:null,horizontal:null,mainAxis:null}})}handlePointerEvent=(s,a)=>{const n=Array.from(s.values());if(a.type==="forceCancel"){this.cancel(a.target,n,a);return}const r=this.getTargetElement(a);if(!r)return;if(this.shouldPreventGesture(r,a.pointerType)){this.cancel(r,n,a);return}const i=this.getRelevantPointers(n,r);if(!this.isWithinPointerCount(i,a.pointerType)){this.cancel(r,i,a);return}switch(a.type){case"pointerdown":!this.isActive&&!this.state.startCentroid&&(i.forEach(l=>{this.state.startPointers.set(l.pointerId,l)}),this.originalTarget=r,this.state.startCentroid=Fi(i),this.state.lastCentroid=Oe({},this.state.startCentroid));break;case"pointermove":if(this.state.startCentroid&&this.isWithinPointerCount(n,a.pointerType)){const l=Fi(i),c=l.x-this.state.startCentroid.x,d=l.y-this.state.startCentroid.y,m=Math.sqrt(c*c+d*d),f=pW(this.state.lastCentroid??this.state.startCentroid,l),h=this.state.lastCentroid?l.x-this.state.lastCentroid.x:0,y=this.state.lastCentroid?l.y-this.state.lastCentroid.y:0;!this.state.movementThresholdReached&&m>=this.threshold&&bW(f,this.direction)?(this.state.movementThresholdReached=!0,this.isActive=!0,this.state.lastDeltas={x:h,y},this.state.totalDeltaX+=h,this.state.totalDeltaY+=y,this.state.activeDeltaX+=h,this.state.activeDeltaY+=y,this.emitPanEvent(r,"start",i,a,l),this.emitPanEvent(r,"ongoing",i,a,l)):this.state.movementThresholdReached&&this.isActive&&(this.state.lastDeltas={x:h,y},this.state.totalDeltaX+=h,this.state.totalDeltaY+=y,this.state.activeDeltaX+=h,this.state.activeDeltaY+=y,this.emitPanEvent(r,"ongoing",i,a,l)),this.state.lastCentroid=l,this.state.lastDirection=f}break;case"pointerup":case"pointercancel":case"forceCancel":if(this.isActive&&this.state.movementThresholdReached){const l=i.filter(c=>c.type!=="pointerup"&&c.type!=="pointercancel");if(!this.isWithinPointerCount(l,a.pointerType)){const c=this.state.lastCentroid||this.state.startCentroid;a.type==="pointercancel"&&this.emitPanEvent(r,"cancel",i,a,c),this.emitPanEvent(r,"end",i,a,c),this.resetState()}}else this.resetState();break}};emitPanEvent(s,a,n,r,i){if(!this.state.startCentroid)return;const l=this.state.lastDeltas?.x??0,c=this.state.lastDeltas?.y??0,d=this.state.startPointers.values().next().value,m=d?(r.timeStamp-d.timeStamp)/1e3:0,f=m>0?l/m:0,h=m>0?c/m:0,y=Math.sqrt(f*f+h*h),N=this.gesturesRegistry.getActiveGestures(s),w={gestureName:this.name,initialCentroid:this.state.startCentroid,centroid:i,target:r.target,srcEvent:r,phase:a,pointers:n,timeStamp:r.timeStamp,deltaX:l,deltaY:c,direction:this.state.lastDirection,velocityX:f,velocityY:h,velocity:y,totalDeltaX:this.state.totalDeltaX,totalDeltaY:this.state.totalDeltaY,activeDeltaX:this.state.activeDeltaX,activeDeltaY:this.state.activeDeltaY,activeGestures:N,customData:this.customData},p=Vn(this.name,a),v=new CustomEvent(p,{bubbles:!0,cancelable:!0,composed:!0,detail:w});s.dispatchEvent(v),this.preventDefault&&r.preventDefault(),this.stopPropagation&&r.stopPropagation()}cancel(s,a,n){if(this.isActive){const r=s??this.element;this.emitPanEvent(r,"cancel",a,n,this.state.lastCentroid),this.emitPanEvent(r,"end",a,n,this.state.lastCentroid)}this.resetState()}}class U1 extends xc{state={startDistance:0,lastDistance:0,lastScale:1,lastTime:0,velocity:0,totalScale:1,deltaScale:0};constructor(s){super(Oe({},s,{minPointers:s.minPointers??2})),this.threshold=s.threshold??0}clone(s){return new U1(Oe({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},s))}destroy(){this.resetState(),super.destroy()}updateOptions(s){super.updateOptions(s)}resetState(){this.isActive=!1,this.state=Oe({},this.state,{startDistance:0,lastDistance:0,lastScale:1,lastTime:0,velocity:0,deltaScale:0})}handlePointerEvent=(s,a)=>{const n=Array.from(s.values()),r=this.getTargetElement(a);if(!r)return;if(this.shouldPreventGesture(r,a.pointerType)){this.isActive&&(this.emitPinchEvent(r,"cancel",n,a),this.resetState());return}const i=this.getRelevantPointers(n,r);switch(a.type){case"pointerdown":if(i.length>=2&&!this.isActive){const l=jN(i);this.state.startDistance=l,this.state.lastDistance=l,this.state.lastTime=a.timeStamp,this.originalTarget=r}break;case"pointermove":if(this.state.startDistance&&this.isWithinPointerCount(i,a.pointerType)){const l=jN(i),c=Math.abs(l-this.state.lastDistance);if(c!==0&&c>=this.threshold){const d=this.state.startDistance?l/this.state.startDistance:1,m=d/this.state.lastScale;this.state.totalScale*=m;const f=(a.timeStamp-this.state.lastTime)/1e3;if(this.state.lastDistance){const y=(l-this.state.lastDistance)/f;this.state.velocity=Number.isNaN(y)?0:y}this.state.lastDistance=l,this.state.deltaScale=d-this.state.lastScale,this.state.lastScale=d,this.state.lastTime=a.timeStamp,this.isActive?this.emitPinchEvent(r,"ongoing",i,a):(this.isActive=!0,this.emitPinchEvent(r,"start",i,a),this.emitPinchEvent(r,"ongoing",i,a))}}break;case"pointerup":case"pointercancel":case"forceCancel":if(this.isActive){const l=i.filter(c=>c.type!=="pointerup"&&c.type!=="pointercancel");if(!this.isWithinPointerCount(l,a.pointerType))a.type==="pointercancel"&&this.emitPinchEvent(r,"cancel",i,a),this.emitPinchEvent(r,"end",i,a),this.resetState();else if(l.length>=2){const c=jN(l);this.state.startDistance=c/this.state.lastScale}}break}};emitPinchEvent(s,a,n,r){const i=Fi(n),l=this.state.lastDistance,c=this.state.lastScale,d=this.gesturesRegistry.getActiveGestures(s),m={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:a,pointers:n,timeStamp:r.timeStamp,scale:c,deltaScale:this.state.deltaScale,totalScale:this.state.totalScale,distance:l,velocity:this.state.velocity,activeGestures:d,direction:vW(this.state.velocity),customData:this.customData};this.preventDefault&&r.preventDefault(),this.stopPropagation&&r.stopPropagation();const f=Vn(this.name,a),h=new CustomEvent(f,{bubbles:!0,cancelable:!0,composed:!0,detail:m});s.dispatchEvent(h)}}class W0 extends xc{state={startCentroid:null,lastPosition:null,timerId:null,startTime:0,pressThresholdReached:!1};constructor(s){super(s),this.duration=s.duration??500,this.maxDistance=s.maxDistance??10}clone(s){return new W0(Oe({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,duration:this.duration,maxDistance:this.maxDistance,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},s))}destroy(){this.clearPressTimer(),this.resetState(),super.destroy()}updateOptions(s){super.updateOptions(s),this.duration=s.duration??this.duration,this.maxDistance=s.maxDistance??this.maxDistance}resetState(){this.clearPressTimer(),this.isActive=!1,this.state=Oe({},this.state,{startCentroid:null,lastPosition:null,timerId:null,startTime:0,pressThresholdReached:!1})}clearPressTimer(){this.state.timerId!==null&&(clearTimeout(this.state.timerId),this.state.timerId=null)}handlePointerEvent=(s,a)=>{const n=Array.from(s.values());if(a.type==="forceCancel"){this.cancelPress(a.target,n,a);return}const r=this.getTargetElement(a);if(!r)return;if(this.shouldPreventGesture(r,a.pointerType)){this.isActive&&this.cancelPress(r,n,a);return}const i=this.getRelevantPointers(n,r);if(!this.isWithinPointerCount(i,a.pointerType)){this.isActive&&this.cancelPress(r,i,a);return}switch(a.type){case"pointerdown":!this.isActive&&!this.state.startCentroid&&(this.state.startCentroid=Fi(i),this.state.lastPosition=Oe({},this.state.startCentroid),this.state.startTime=a.timeStamp,this.isActive=!0,this.originalTarget=r,this.clearPressTimer(),this.state.timerId=setTimeout(()=>{if(this.isActive&&this.state.startCentroid){this.state.pressThresholdReached=!0;const l=this.state.lastPosition;this.emitPressEvent(r,"start",i,a,l),this.emitPressEvent(r,"ongoing",i,a,l)}},this.duration));break;case"pointermove":if(this.isActive&&this.state.startCentroid){const l=Fi(i);this.state.lastPosition=l;const c=l.x-this.state.startCentroid.x,d=l.y-this.state.startCentroid.y;Math.sqrt(c*c+d*d)>this.maxDistance&&this.cancelPress(r,i,a)}break;case"pointerup":if(this.isActive){if(this.state.pressThresholdReached){const l=this.state.lastPosition||this.state.startCentroid;this.emitPressEvent(r,"end",i,a,l)}this.resetState()}break;case"pointercancel":case"forceCancel":this.cancelPress(r,i,a);break}};emitPressEvent(s,a,n,r,i){const l=this.gesturesRegistry.getActiveGestures(s),c=r.timeStamp-this.state.startTime,d={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:a,pointers:n,timeStamp:r.timeStamp,x:i.x,y:i.y,duration:c,activeGestures:l,customData:this.customData},m=Vn(this.name,a),f=new CustomEvent(m,{bubbles:!0,cancelable:!0,composed:!0,detail:d});s.dispatchEvent(f),this.preventDefault&&r.preventDefault(),this.stopPropagation&&r.stopPropagation()}cancelPress(s,a,n){if(this.isActive&&this.state.pressThresholdReached){const r=this.state.lastPosition||this.state.startCentroid;this.emitPressEvent(s??this.element,"cancel",a,n,r),this.emitPressEvent(s??this.element,"end",a,n,r)}this.resetState()}}class z1 extends xc{state={phase:"waitingForPress",dragTimeoutId:null};constructor(s){super(s),this.pressDuration=s.pressDuration??500,this.pressMaxDistance=s.pressMaxDistance??10,this.dragTimeout=s.dragTimeout??1e3,this.dragThreshold=s.dragThreshold??0,this.dragDirection=s.dragDirection||["up","down","left","right"],this.pressGesture=new W0({name:`${this.name}-press`,duration:this.pressDuration,maxDistance:this.pressMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}),this.panGesture=new Zo({name:`${this.name}-pan`,minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)})}clone(s){return new z1(Oe({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,pressDuration:this.pressDuration,pressMaxDistance:this.pressMaxDistance,dragTimeout:this.dragTimeout,dragThreshold:this.dragThreshold,dragDirection:[...this.dragDirection],requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},s))}init(s,a,n,r){super.init(s,a,n,r),this.pressGesture.init(s,a,n,r),this.panGesture.init(s,a,n,r),this.element.addEventListener(this.pressGesture.name,this.pressHandler),this.element.addEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.addEventListener(this.panGesture.name,this.dragMoveHandler),this.element.addEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.addEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler)}destroy(){this.resetState(),this.pressGesture.destroy(),this.panGesture.destroy(),this.element.removeEventListener(this.pressGesture.name,this.pressHandler),this.element.removeEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.removeEventListener(this.panGesture.name,this.dragMoveHandler),this.element.removeEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.removeEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler),super.destroy()}updateOptions(s){super.updateOptions(s),this.pressDuration=s.pressDuration??this.pressDuration,this.pressMaxDistance=s.pressMaxDistance??this.pressMaxDistance,this.dragTimeout=s.dragTimeout??this.dragTimeout,this.dragThreshold=s.dragThreshold??this.dragThreshold,this.dragDirection=s.dragDirection||this.dragDirection,this.element.dispatchEvent(new CustomEvent(`${this.panGesture.name}ChangeOptions`,{detail:{minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}})),this.element.dispatchEvent(new CustomEvent(`${this.pressGesture.name}ChangeOptions`,{detail:{duration:this.pressDuration,maxDistance:this.pressMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}}))}resetState(){this.state.dragTimeoutId!==null&&clearTimeout(this.state.dragTimeoutId),this.restoreTouchAction(),this.isActive=!1,this.state={phase:"waitingForPress",dragTimeoutId:null}}handlePointerEvent(){}pressHandler=()=>{this.state.phase==="waitingForPress"&&(this.state.phase="pressDetected",this.setTouchAction(),this.state.dragTimeoutId=setTimeout(()=>{this.resetState()},this.dragTimeout))};dragStartHandler=s=>{this.state.phase==="pressDetected"&&(this.state.dragTimeoutId!==null&&(clearTimeout(this.state.dragTimeoutId),this.state.dragTimeoutId=null),this.restoreTouchAction(),this.state.phase="dragging",this.isActive=!0,this.element.dispatchEvent(new CustomEvent(Vn(this.name,s.detail.phase),s)))};dragMoveHandler=s=>{this.state.phase==="dragging"&&this.element.dispatchEvent(new CustomEvent(Vn(this.name,s.detail.phase),s))};dragEndHandler=s=>{this.state.phase==="dragging"&&(this.resetState(),this.element.dispatchEvent(new CustomEvent(Vn(this.name,s.detail.phase),s)))};setTouchAction(){this.element.addEventListener("touchstart",Al,{passive:!1}),this.element.addEventListener("touchmove",Al,{passive:!1}),this.element.addEventListener("touchend",Al,{passive:!1})}restoreTouchAction(){this.element.removeEventListener("touchstart",Al),this.element.removeEventListener("touchmove",Al),this.element.removeEventListener("touchend",Al)}}class $f extends xc{state={startCentroid:null,currentTapCount:0,lastTapTime:0,lastPosition:null};constructor(s){super(s),this.maxDistance=s.maxDistance??10,this.taps=s.taps??1}clone(s){return new $f(Oe({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,maxDistance:this.maxDistance,taps:this.taps,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},s))}destroy(){this.resetState(),super.destroy()}updateOptions(s){super.updateOptions(s),this.maxDistance=s.maxDistance??this.maxDistance,this.taps=s.taps??this.taps}resetState(){this.isActive=!1,this.state={startCentroid:null,currentTapCount:0,lastTapTime:0,lastPosition:null}}handlePointerEvent=(s,a)=>{const n=Array.from(s.values()),r=this.getTargetElement(a);if(!r)return;const i=this.getRelevantPointers(n,r);if(this.shouldPreventGesture(r,a.pointerType)||!this.isWithinPointerCount(i,a.pointerType)){this.isActive&&this.cancelTap(r,i,a);return}switch(a.type){case"pointerdown":this.isActive||(this.state.startCentroid=Fi(i),this.state.lastPosition=Oe({},this.state.startCentroid),this.isActive=!0,this.originalTarget=r);break;case"pointermove":if(this.isActive&&this.state.startCentroid){const l=Fi(i);this.state.lastPosition=l;const c=l.x-this.state.startCentroid.x,d=l.y-this.state.startCentroid.y;Math.sqrt(c*c+d*d)>this.maxDistance&&this.cancelTap(r,i,a)}break;case"pointerup":if(this.isActive){this.state.currentTapCount+=1;const l=this.state.lastPosition||this.state.startCentroid;if(!l){this.cancelTap(r,i,a);return}this.state.currentTapCount>=this.taps?(this.fireTapEvent(r,i,a,l),this.resetState()):(this.state.lastTapTime=a.timeStamp,this.isActive=!1,this.state.startCentroid=null,setTimeout(()=>{this.state&&this.state.currentTapCount>0&&this.state.currentTapCount<this.taps&&(this.state.currentTapCount=0)},300))}break;case"pointercancel":case"forceCancel":this.cancelTap(r,i,a);break}};fireTapEvent(s,a,n,r){const i=this.gesturesRegistry.getActiveGestures(s),l={gestureName:this.name,centroid:r,target:n.target,srcEvent:n,phase:"end",pointers:a,timeStamp:n.timeStamp,x:r.x,y:r.y,tapCount:this.state.currentTapCount,activeGestures:i,customData:this.customData},c=new CustomEvent(this.name,{bubbles:!0,cancelable:!0,composed:!0,detail:l});s.dispatchEvent(c),this.preventDefault&&n.preventDefault(),this.stopPropagation&&n.stopPropagation()}cancelTap(s,a,n){if(this.state.startCentroid||this.state.lastPosition){const r=this.state.lastPosition||this.state.startCentroid,i=this.gesturesRegistry.getActiveGestures(s),l={gestureName:this.name,centroid:r,target:n.target,srcEvent:n,phase:"cancel",pointers:a,timeStamp:n.timeStamp,x:r.x,y:r.y,tapCount:this.state.currentTapCount,activeGestures:i,customData:this.customData},c=Vn(this.name,"cancel"),d=new CustomEvent(c,{bubbles:!0,cancelable:!0,composed:!0,detail:l});s.dispatchEvent(d)}this.resetState()}}class F1 extends xc{state={phase:"waitingForTap",dragTimeoutId:null};constructor(s){super(s),this.tapMaxDistance=s.tapMaxDistance??10,this.dragTimeout=s.dragTimeout??1e3,this.dragThreshold=s.dragThreshold??0,this.dragDirection=s.dragDirection||["up","down","left","right"],this.tapGesture=new $f({name:`${this.name}-tap`,maxDistance:this.tapMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}),this.panGesture=new Zo({name:`${this.name}-pan`,minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)})}clone(s){return new F1(Oe({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,tapMaxDistance:this.tapMaxDistance,dragTimeout:this.dragTimeout,dragThreshold:this.dragThreshold,dragDirection:[...this.dragDirection],requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},s))}init(s,a,n,r){super.init(s,a,n,r),this.tapGesture.init(s,a,n,r),this.panGesture.init(s,a,n,r),this.element.addEventListener(this.tapGesture.name,this.tapHandler),this.element.addEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.addEventListener(this.panGesture.name,this.dragMoveHandler),this.element.addEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.addEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler)}destroy(){this.resetState(),this.tapGesture.destroy(),this.panGesture.destroy(),this.element.removeEventListener(this.tapGesture.name,this.tapHandler),this.element.removeEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.removeEventListener(this.panGesture.name,this.dragMoveHandler),this.element.removeEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.removeEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler),super.destroy()}updateOptions(s){super.updateOptions(s),this.tapMaxDistance=s.tapMaxDistance??this.tapMaxDistance,this.dragTimeout=s.dragTimeout??this.dragTimeout,this.dragThreshold=s.dragThreshold??this.dragThreshold,this.dragDirection=s.dragDirection||this.dragDirection,this.element.dispatchEvent(new CustomEvent(`${this.panGesture.name}ChangeOptions`,{detail:{minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}})),this.element.dispatchEvent(new CustomEvent(`${this.tapGesture.name}ChangeOptions`,{detail:{maxDistance:this.tapMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}}))}resetState(){this.state.dragTimeoutId!==null&&clearTimeout(this.state.dragTimeoutId),this.restoreTouchAction(),this.isActive=!1,this.state={phase:"waitingForTap",dragTimeoutId:null}}handlePointerEvent(){}tapHandler=()=>{this.state.phase==="waitingForTap"&&(this.state.phase="tapDetected",this.setTouchAction(),this.state.dragTimeoutId=setTimeout(()=>{this.resetState()},this.dragTimeout))};dragStartHandler=s=>{this.state.phase==="tapDetected"&&(this.state.dragTimeoutId!==null&&(clearTimeout(this.state.dragTimeoutId),this.state.dragTimeoutId=null),this.restoreTouchAction(),this.state.phase="dragging",this.isActive=!0,this.element.dispatchEvent(new CustomEvent(Vn(this.name,s.detail.phase),s)))};dragMoveHandler=s=>{this.state.phase==="dragging"&&this.element.dispatchEvent(new CustomEvent(Vn(this.name,s.detail.phase),s))};dragEndHandler=s=>{this.state.phase==="dragging"&&(this.resetState(),this.element.dispatchEvent(new CustomEvent(Vn(this.name,s.detail.phase),s)))};setTouchAction(){this.element.addEventListener("touchstart",Al,{passive:!1})}restoreTouchAction(){this.element.removeEventListener("touchstart",Al)}}class Ep extends k5{state={totalDeltaX:0,totalDeltaY:0,totalDeltaZ:0};constructor(s){super(s),this.sensitivity=s.sensitivity??1,this.max=s.max??Number.MAX_SAFE_INTEGER,this.min=s.min??Number.MIN_SAFE_INTEGER,this.initialDelta=s.initialDelta??0,this.invert=s.invert??!1,this.state.totalDeltaX=this.initialDelta,this.state.totalDeltaY=this.initialDelta,this.state.totalDeltaZ=this.initialDelta}clone(s){return new Ep(Oe({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,sensitivity:this.sensitivity,max:this.max,min:this.min,initialDelta:this.initialDelta,invert:this.invert,requiredKeys:[...this.requiredKeys],preventIf:[...this.preventIf]},s))}init(s,a,n,r){super.init(s,a,n,r),this.element.addEventListener("wheel",this.handleWheelEvent)}destroy(){this.element.removeEventListener("wheel",this.handleWheelEvent),this.resetState(),super.destroy()}resetState(){this.isActive=!1,this.state={totalDeltaX:0,totalDeltaY:0,totalDeltaZ:0}}updateOptions(s){super.updateOptions(s),this.sensitivity=s.sensitivity??this.sensitivity,this.max=s.max??this.max,this.min=s.min??this.min,this.initialDelta=s.initialDelta??this.initialDelta,this.invert=s.invert??this.invert}handleWheelEvent=s=>{if(this.shouldPreventGesture(this.element,"mouse"))return;const a=this.pointerManager.getPointers()||new Map,n=Array.from(a.values());this.state.totalDeltaX+=s.deltaX*this.sensitivity*(this.invert?-1:1),this.state.totalDeltaY+=s.deltaY*this.sensitivity*(this.invert?-1:1),this.state.totalDeltaZ+=s.deltaZ*this.sensitivity*(this.invert?-1:1),["totalDeltaX","totalDeltaY","totalDeltaZ"].forEach(r=>{this.state[r]<this.min&&(this.state[r]=this.min),this.state[r]>this.max&&(this.state[r]=this.max)}),this.emitWheelEvent(n,s)};emitWheelEvent(s,a){const n=s.length>0?Fi(s):{x:a.clientX,y:a.clientY},r=this.gesturesRegistry.getActiveGestures(this.element),i={gestureName:this.name,centroid:n,target:a.target,srcEvent:a,phase:"ongoing",pointers:s,timeStamp:a.timeStamp,deltaX:a.deltaX*this.sensitivity*(this.invert?-1:1),deltaY:a.deltaY*this.sensitivity*(this.invert?-1:1),deltaZ:a.deltaZ*this.sensitivity*(this.invert?-1:1),deltaMode:a.deltaMode,totalDeltaX:this.state.totalDeltaX,totalDeltaY:this.state.totalDeltaY,totalDeltaZ:this.state.totalDeltaZ,activeGestures:r,customData:this.customData};this.preventDefault&&a.preventDefault(),this.stopPropagation&&a.stopPropagation();const l=Vn(this.name,"ongoing"),c=new CustomEvent(l,{bubbles:!0,cancelable:!0,composed:!0,detail:i});this.element.dispatchEvent(c)}}const gd=e=>e.preventDefault(),B1=({svgRef:e})=>{const s=g.useRef(null);g.useEffect(()=>{const r=e.current;s.current||(s.current=new gW({gestures:[new Zo({name:"pan",threshold:0,maxPointers:1}),new R1({name:"move",preventIf:["pan","zoomPinch","zoomPan"]}),new $f({name:"tap",preventIf:["pan","zoomPinch","zoomPan"]}),new W0({name:"quickPress",duration:50}),new Zo({name:"brush",threshold:0,maxPointers:1}),new Zo({name:"zoomPan",threshold:0,preventIf:["zoomTapAndDrag","zoomPressAndDrag"]}),new U1({name:"zoomPinch",threshold:5}),new Ep({name:"zoomTurnWheel",sensitivity:.01,initialDelta:1}),new Ep({name:"panTurnWheel",sensitivity:.5}),new F1({name:"zoomTapAndDrag",dragThreshold:10}),new z1({name:"zoomPressAndDrag",dragThreshold:10,preventIf:["zoomPinch"]}),new $f({name:"zoomDoubleTapReset",taps:2})]}));const i=s.current;if(!(!r||!i))return i.registerElement(["pan","move","zoomPinch","zoomPan","zoomTurnWheel","panTurnWheel","tap","quickPress","zoomTapAndDrag","zoomPressAndDrag","zoomDoubleTapReset","brush"],r),()=>{i.unregisterAllGestures(r)}},[e,s]);const a=g.useCallback((r,i,l)=>{const c=e.current;return c?.addEventListener(r,i,l),{cleanup:()=>c?.removeEventListener(r,i)}},[e]),n=g.useCallback((r,i)=>{const l=e.current,c=s.current;!c||!l||c.setGestureOptions(r,l,i??{})},[e,s]);return g.useEffect(()=>{const r=e.current;return r?.addEventListener("gesturestart",gd),r?.addEventListener("gesturechange",gd),r?.addEventListener("gestureend",gd),()=>{r?.removeEventListener("gesturestart",gd),r?.removeEventListener("gesturechange",gd),r?.removeEventListener("gestureend",gd)}},[e]),{instance:{addInteractionListener:a,updateZoomInteractionListeners:n}}};B1.params={};B1.getInitialState=()=>({});const NW=[I1,O1,H0,V0,B1,F0],wW=["apiRef"],jW=e=>{let{plugins:s}=e,a=$t(e.props,wW);const n={};s.forEach(l=>{Object.assign(n,l.params)});const r={};return Object.keys(a).forEach(l=>{const c=a[l];n[l]&&(r[l]=c)}),s.reduce((l,c)=>c.getDefaultizedParams?c.getDefaultizedParams({params:l}):l,r)};let DL=0;function CW(e,s,a){const n=$0(),r=g.useMemo(()=>[...NW,...e],[e]),i=jW({plugins:r,props:s});i.id=i.id??n;const c=g.useRef({}).current,d=_W(s.apiRef),m=g.useRef(null),f=g.useRef(null),h=g.useRef(null);if(h.current==null){DL+=1;const w={cacheKey:{id:DL}};r.forEach(p=>{p.getInitialState&&Object.assign(w,p.getInitialState(i,w,a))}),h.current=new P1(w)}const y=w=>{const p=w({instance:c,params:i,plugins:r,store:h.current,svgRef:f,chartRootRef:m,seriesConfig:a});p.publicAPI&&Object.assign(d.current,p.publicAPI),p.instance&&Object.assign(c,p.instance)};return r.forEach(y),{contextValue:g.useMemo(()=>({store:h.current,publicAPI:d.current,instance:c,svgRef:f,chartRootRef:m}),[c,d])}}function SW(e){return e.current==null&&(e.current={}),e}function _W(e){const s=g.useRef({});return e?SW(e):s}const D5=g.createContext(null);const M5=()=>{},P5=4,O5=20+2*P5,TW=40+2*P5,EW="hover",mx={minStart:0,maxEnd:100,step:5,minSpan:10,maxSpan:100,panning:!0,filterMode:"keep",reverse:!1,slider:{enabled:!1,preview:!1,size:O5,showTooltip:EW}},H1=(e,s,a,n)=>{if(e)return e===!0?Oe({axisId:s,axisDirection:a},mx,{reverse:n??!1}):Oe({axisId:s,axisDirection:a},mx,{reverse:n??!1},e,{slider:Oe({},mx.slider,{size:e.slider?.preview??mx.slider.preview?TW:O5},e.slider)})};function I5(e,s){const a={top:0,bottom:0,none:0};return(e&&e.length>0?e:[{id:B0,scaleType:"linear"}]).map((i,l)=>{const c=i.dataKey,d=l===0?"bottom":"none",m=i.position??d,f=GV+(i.label?_5:0),h=i.id??`defaultized-x-axis-${l}`,y=Oe({offset:a[m]},i,{id:h,position:m,height:i.height??f,zoom:H1(i.zoom,h,"x",i.reverse)});if(m!=="none"&&(a[m]+=y.height,y.zoom?.slider.enabled&&(a[m]+=y.zoom.slider.size)),c===void 0||i.data!==void 0)return y;if(s===void 0)throw new Error("MUI X Charts: x-axis uses `dataKey` but no `dataset` is provided.");return Oe({},y,{data:s.map(N=>N[c])})})}function $5(e,s){const a={right:0,left:0,none:0};return(e&&e.length>0?e:[{id:FV,scaleType:"linear"}]).map((i,l)=>{const c=i.dataKey,d=l===0?"left":"none",m=i.position??d,f=HV+(i.label?_5:0),h=i.id??`defaultized-y-axis-${l}`,y=Oe({offset:a[m]},i,{id:h,position:m,width:i.width??f,zoom:H1(i.zoom,h,"y",i.reverse)});if(m!=="none"&&(a[m]+=y.width,y.zoom?.slider.enabled&&(a[m]+=y.zoom.slider.size)),c===void 0||i.data!==void 0)return y;if(s===void 0)throw new Error("MUI X Charts: y-axis uses `dataKey` but no `dataset` is provided.");return Oe({},y,{data:s.map(N=>N[c])})})}function AW(e,s){return function(n,r){if(r.location==="tick"){const i=r.scale.domain();return i[0]===i[1]?r.scale.tickFormat(1)(n):r.scale.tickFormat(e)(n)}return r.location==="zoom-slider-tooltip"?s.tickFormat(2)(n):`${n}`}}function pc(e){return e.scaleType==="band"}function yc(e){return e.scaleType==="point"}function LW(e){return e.scaleType!=="point"&&e.scaleType!=="band"}function kW(e){return e.scaleType==="symlog"}function R5(e,s){return e<s?-1:e>s?1:e>=s?0:NaN}function G1(e){let s=e,a=e;e.length===1&&(s=(l,c)=>e(l)-c,a=DW(e));function n(l,c,d,m){for(d==null&&(d=0),m==null&&(m=l.length);d<m;){const f=d+m>>>1;a(l[f],c)<0?d=f+1:m=f}return d}function r(l,c,d,m){for(d==null&&(d=0),m==null&&(m=l.length);d<m;){const f=d+m>>>1;a(l[f],c)>0?m=f:d=f+1}return d}function i(l,c,d,m){d==null&&(d=0),m==null&&(m=l.length);const f=n(l,c,d,m-1);return f>d&&s(l[f-1],c)>-s(l[f],c)?f-1:f}return{left:n,center:i,right:r}}function DW(e){return(s,a)=>R5(e(s),a)}function MW(e){return e===null?NaN:+e}const PW=G1(R5),U5=PW.right;G1(MW).center;class Ap extends Map{constructor(s,a=$W){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),s!=null)for(const[n,r]of s)this.set(n,r)}get(s){return super.get(ML(this,s))}has(s){return super.has(ML(this,s))}set(s,a){return super.set(OW(this,s),a)}delete(s){return super.delete(IW(this,s))}}function ML({_intern:e,_key:s},a){const n=s(a);return e.has(n)?e.get(n):a}function OW({_intern:e,_key:s},a){const n=s(a);return e.has(n)?e.get(n):(e.set(n,a),a)}function IW({_intern:e,_key:s},a){const n=s(a);return e.has(n)&&(a=e.get(a),e.delete(n)),a}function $W(e){return e!==null&&typeof e=="object"?e.valueOf():e}var nC=Math.sqrt(50),rC=Math.sqrt(10),iC=Math.sqrt(2);function lC(e,s,a){var n,r=-1,i,l,c;if(s=+s,e=+e,a=+a,e===s&&a>0)return[e];if((n=s<e)&&(i=e,e=s,s=i),(c=z5(e,s,a))===0||!isFinite(c))return[];if(c>0){let d=Math.round(e/c),m=Math.round(s/c);for(d*c<e&&++d,m*c>s&&--m,l=new Array(i=m-d+1);++r<i;)l[r]=(d+r)*c}else{c=-c;let d=Math.round(e*c),m=Math.round(s*c);for(d/c<e&&++d,m/c>s&&--m,l=new Array(i=m-d+1);++r<i;)l[r]=(d+r)/c}return n&&l.reverse(),l}function z5(e,s,a){var n=(s-e)/Math.max(0,a),r=Math.floor(Math.log(n)/Math.LN10),i=n/Math.pow(10,r);return r>=0?(i>=nC?10:i>=rC?5:i>=iC?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(i>=nC?10:i>=rC?5:i>=iC?2:1)}function oC(e,s,a){var n=Math.abs(s-e)/Math.max(0,a),r=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),i=n/r;return i>=nC?r*=10:i>=rC?r*=5:i>=iC&&(r*=2),s<e?-r:r}function RW(e,s,a){e=+e,s=+s,a=(r=arguments.length)<2?(s=e,e=0,1):r<3?1:+a;for(var n=-1,r=Math.max(0,Math.ceil((s-e)/a))|0,i=new Array(r);++n<r;)i[n]=e+n*a;return i}function Yl(e,s){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(s).domain(e);break}return this}function UW(e,s){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof s=="function"?this.interpolator(s):this.range(s);break}}return this}const PL=Symbol("implicit");function cC(){var e=new Ap,s=[],a=[],n=PL;function r(i){let l=e.get(i);if(l===void 0){if(n!==PL)return n;e.set(i,l=s.push(i)-1)}return a[l%a.length]}return r.domain=function(i){if(!arguments.length)return s.slice();s=[],e=new Ap;for(const l of i)e.has(l)||e.set(l,s.push(l)-1);return r},r.range=function(i){return arguments.length?(a=Array.from(i),r):a.slice()},r.unknown=function(i){return arguments.length?(n=i,r):n},r.copy=function(){return cC(s,a).unknown(n)},Yl.apply(r,arguments),r}function V1(e,s,a){e.prototype=s.prototype=a,a.constructor=e}function F5(e,s){var a=Object.create(e.prototype);for(var n in s)a[n]=s[n];return a}function bh(){}var Rf=.7,Lp=1/Rf,Rd="\\s*([+-]?\\d+)\\s*",Uf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Br="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",zW=/^#([0-9a-f]{3,8})$/,FW=new RegExp(`^rgb\\(${Rd},${Rd},${Rd}\\)$`),BW=new RegExp(`^rgb\\(${Br},${Br},${Br}\\)$`),HW=new RegExp(`^rgba\\(${Rd},${Rd},${Rd},${Uf}\\)$`),GW=new RegExp(`^rgba\\(${Br},${Br},${Br},${Uf}\\)$`),VW=new RegExp(`^hsl\\(${Uf},${Br},${Br}\\)$`),WW=new RegExp(`^hsla\\(${Uf},${Br},${Br},${Uf}\\)$`),OL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};V1(bh,zf,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:IL,formatHex:IL,formatHex8:YW,formatHsl:QW,formatRgb:$L,toString:$L});function IL(){return this.rgb().formatHex()}function YW(){return this.rgb().formatHex8()}function QW(){return B5(this).formatHsl()}function $L(){return this.rgb().formatRgb()}function zf(e){var s,a;return e=(e+"").trim().toLowerCase(),(s=zW.exec(e))?(a=s[1].length,s=parseInt(s[1],16),a===6?RL(s):a===3?new Ya(s>>8&15|s>>4&240,s>>4&15|s&240,(s&15)<<4|s&15,1):a===8?fx(s>>24&255,s>>16&255,s>>8&255,(s&255)/255):a===4?fx(s>>12&15|s>>8&240,s>>8&15|s>>4&240,s>>4&15|s&240,((s&15)<<4|s&15)/255):null):(s=FW.exec(e))?new Ya(s[1],s[2],s[3],1):(s=BW.exec(e))?new Ya(s[1]*255/100,s[2]*255/100,s[3]*255/100,1):(s=HW.exec(e))?fx(s[1],s[2],s[3],s[4]):(s=GW.exec(e))?fx(s[1]*255/100,s[2]*255/100,s[3]*255/100,s[4]):(s=VW.exec(e))?FL(s[1],s[2]/100,s[3]/100,1):(s=WW.exec(e))?FL(s[1],s[2]/100,s[3]/100,s[4]):OL.hasOwnProperty(e)?RL(OL[e]):e==="transparent"?new Ya(NaN,NaN,NaN,0):null}function RL(e){return new Ya(e>>16&255,e>>8&255,e&255,1)}function fx(e,s,a,n){return n<=0&&(e=s=a=NaN),new Ya(e,s,a,n)}function qW(e){return e instanceof bh||(e=zf(e)),e?(e=e.rgb(),new Ya(e.r,e.g,e.b,e.opacity)):new Ya}function dC(e,s,a,n){return arguments.length===1?qW(e):new Ya(e,s,a,n??1)}function Ya(e,s,a,n){this.r=+e,this.g=+s,this.b=+a,this.opacity=+n}V1(Ya,dC,F5(bh,{brighter(e){return e=e==null?Lp:Math.pow(Lp,e),new Ya(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Rf:Math.pow(Rf,e),new Ya(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ya(Jo(this.r),Jo(this.g),Jo(this.b),kp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:UL,formatHex:UL,formatHex8:XW,formatRgb:zL,toString:zL}));function UL(){return`#${Wo(this.r)}${Wo(this.g)}${Wo(this.b)}`}function XW(){return`#${Wo(this.r)}${Wo(this.g)}${Wo(this.b)}${Wo((isNaN(this.opacity)?1:this.opacity)*255)}`}function zL(){const e=kp(this.opacity);return`${e===1?"rgb(":"rgba("}${Jo(this.r)}, ${Jo(this.g)}, ${Jo(this.b)}${e===1?")":`, ${e})`}`}function kp(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Jo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Wo(e){return e=Jo(e),(e<16?"0":"")+e.toString(16)}function FL(e,s,a,n){return n<=0?e=s=a=NaN:a<=0||a>=1?e=s=NaN:s<=0&&(e=NaN),new gr(e,s,a,n)}function B5(e){if(e instanceof gr)return new gr(e.h,e.s,e.l,e.opacity);if(e instanceof bh||(e=zf(e)),!e)return new gr;if(e instanceof gr)return e;e=e.rgb();var s=e.r/255,a=e.g/255,n=e.b/255,r=Math.min(s,a,n),i=Math.max(s,a,n),l=NaN,c=i-r,d=(i+r)/2;return c?(s===i?l=(a-n)/c+(a<n)*6:a===i?l=(n-s)/c+2:l=(s-a)/c+4,c/=d<.5?i+r:2-i-r,l*=60):c=d>0&&d<1?0:l,new gr(l,c,d,e.opacity)}function KW(e,s,a,n){return arguments.length===1?B5(e):new gr(e,s,a,n??1)}function gr(e,s,a,n){this.h=+e,this.s=+s,this.l=+a,this.opacity=+n}V1(gr,KW,F5(bh,{brighter(e){return e=e==null?Lp:Math.pow(Lp,e),new gr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Rf:Math.pow(Rf,e),new gr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,s=isNaN(e)||isNaN(this.s)?0:this.s,a=this.l,n=a+(a<.5?a:1-a)*s,r=2*a-n;return new Ya(CN(e>=240?e-240:e+120,r,n),CN(e,r,n),CN(e<120?e+240:e-120,r,n),this.opacity)},clamp(){return new gr(BL(this.h),hx(this.s),hx(this.l),kp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=kp(this.opacity);return`${e===1?"hsl(":"hsla("}${BL(this.h)}, ${hx(this.s)*100}%, ${hx(this.l)*100}%${e===1?")":`, ${e})`}`}}));function BL(e){return e=(e||0)%360,e<0?e+360:e}function hx(e){return Math.max(0,Math.min(1,e||0))}function CN(e,s,a){return(e<60?s+(a-s)*e/60:e<180?a:e<240?s+(a-s)*(240-e)/60:s)*255}const W1=e=>()=>e;function ZW(e,s){return function(a){return e+a*s}}function JW(e,s,a){return e=Math.pow(e,a),s=Math.pow(s,a)-e,a=1/a,function(n){return Math.pow(e+n*s,a)}}function eY(e){return(e=+e)==1?H5:function(s,a){return a-s?JW(s,a,e):W1(isNaN(s)?a:s)}}function H5(e,s){var a=s-e;return a?ZW(e,a):W1(isNaN(e)?s:e)}const HL=(function e(s){var a=eY(s);function n(r,i){var l=a((r=dC(r)).r,(i=dC(i)).r),c=a(r.g,i.g),d=a(r.b,i.b),m=H5(r.opacity,i.opacity);return function(f){return r.r=l(f),r.g=c(f),r.b=d(f),r.opacity=m(f),r+""}}return n.gamma=e,n})(1);function tY(e,s){s||(s=[]);var a=e?Math.min(s.length,e.length):0,n=s.slice(),r;return function(i){for(r=0;r<a;++r)n[r]=e[r]*(1-i)+s[r]*i;return n}}function sY(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function aY(e,s){var a=s?s.length:0,n=e?Math.min(a,e.length):0,r=new Array(n),i=new Array(a),l;for(l=0;l<n;++l)r[l]=Y0(e[l],s[l]);for(;l<a;++l)i[l]=s[l];return function(c){for(l=0;l<n;++l)i[l]=r[l](c);return i}}function Y1(e,s){var a=new Date;return e=+e,s=+s,function(n){return a.setTime(e*(1-n)+s*n),a}}function Qd(e,s){return e=+e,s=+s,function(a){return e*(1-a)+s*a}}function nY(e,s){var a={},n={},r;(e===null||typeof e!="object")&&(e={}),(s===null||typeof s!="object")&&(s={});for(r in s)r in e?a[r]=Y0(e[r],s[r]):n[r]=s[r];return function(i){for(r in a)n[r]=a[r](i);return n}}var uC=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,SN=new RegExp(uC.source,"g");function rY(e){return function(){return e}}function iY(e){return function(s){return e(s)+""}}function Q1(e,s){var a=uC.lastIndex=SN.lastIndex=0,n,r,i,l=-1,c=[],d=[];for(e=e+"",s=s+"";(n=uC.exec(e))&&(r=SN.exec(s));)(i=r.index)>a&&(i=s.slice(a,i),c[l]?c[l]+=i:c[++l]=i),(n=n[0])===(r=r[0])?c[l]?c[l]+=r:c[++l]=r:(c[++l]=null,d.push({i:l,x:Qd(n,r)})),a=SN.lastIndex;return a<s.length&&(i=s.slice(a),c[l]?c[l]+=i:c[++l]=i),c.length<2?d[0]?iY(d[0].x):rY(s):(s=d.length,function(m){for(var f=0,h;f<s;++f)c[(h=d[f]).i]=h.x(m);return c.join("")})}function Y0(e,s){var a=typeof s,n;return s==null||a==="boolean"?W1(s):(a==="number"?Qd:a==="string"?(n=zf(s))?(s=n,HL):Q1:s instanceof zf?HL:s instanceof Date?Y1:sY(s)?tY:Array.isArray(s)?aY:typeof s.valueOf!="function"&&typeof s.toString!="function"||isNaN(s)?nY:Qd)(e,s)}function G5(e,s){return e=+e,s=+s,function(a){return Math.round(e*(1-a)+s*a)}}function lY(e){return function(){return e}}function oY(e){return+e}var GL=[0,1];function Bn(e){return e}function mC(e,s){return(s-=e=+e)?function(a){return(a-e)/s}:lY(isNaN(s)?NaN:.5)}function cY(e,s){var a;return e>s&&(a=e,e=s,s=a),function(n){return Math.max(e,Math.min(s,n))}}function dY(e,s,a){var n=e[0],r=e[1],i=s[0],l=s[1];return r<n?(n=mC(r,n),i=a(l,i)):(n=mC(n,r),i=a(i,l)),function(c){return i(n(c))}}function uY(e,s,a){var n=Math.min(e.length,s.length)-1,r=new Array(n),i=new Array(n),l=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),s=s.slice().reverse());++l<n;)r[l]=mC(e[l],e[l+1]),i[l]=a(s[l],s[l+1]);return function(c){var d=U5(e,c,1,n)-1;return i[d](r[d](c))}}function vh(e,s){return s.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Q0(){var e=GL,s=GL,a=Y0,n,r,i,l=Bn,c,d,m;function f(){var y=Math.min(e.length,s.length);return l!==Bn&&(l=cY(e[0],e[y-1])),c=y>2?uY:dY,d=m=null,h}function h(y){return y==null||isNaN(y=+y)?i:(d||(d=c(e.map(n),s,a)))(n(l(y)))}return h.invert=function(y){return l(r((m||(m=c(s,e.map(n),Qd)))(y)))},h.domain=function(y){return arguments.length?(e=Array.from(y,oY),f()):e.slice()},h.range=function(y){return arguments.length?(s=Array.from(y),f()):s.slice()},h.rangeRound=function(y){return s=Array.from(y),a=G5,f()},h.clamp=function(y){return arguments.length?(l=y?!0:Bn,f()):l!==Bn},h.interpolate=function(y){return arguments.length?(a=y,f()):a},h.unknown=function(y){return arguments.length?(i=y,h):i},function(y,N){return n=y,r=N,f()}}function V5(){return Q0()(Bn,Bn)}function mY(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Dp(e,s){if((a=(e=s?e.toExponential(s-1):e.toExponential()).indexOf("e"))<0)return null;var a,n=e.slice(0,a);return[n.length>1?n[0]+n.slice(2):n,+e.slice(a+1)]}function qd(e){return e=Dp(Math.abs(e)),e?e[1]:NaN}function fY(e,s){return function(a,n){for(var r=a.length,i=[],l=0,c=e[0],d=0;r>0&&c>0&&(d+c+1>n&&(c=Math.max(1,n-d)),i.push(a.substring(r-=c,r+c)),!((d+=c+1)>n));)c=e[l=(l+1)%e.length];return i.reverse().join(s)}}function hY(e){return function(s){return s.replace(/[0-9]/g,function(a){return e[+a]})}}var gY=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ff(e){if(!(s=gY.exec(e)))throw new Error("invalid format: "+e);var s;return new q1({fill:s[1],align:s[2],sign:s[3],symbol:s[4],zero:s[5],width:s[6],comma:s[7],precision:s[8]&&s[8].slice(1),trim:s[9],type:s[10]})}Ff.prototype=q1.prototype;function q1(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}q1.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function xY(e){e:for(var s=e.length,a=1,n=-1,r;a<s;++a)switch(e[a]){case".":n=r=a;break;case"0":n===0&&(n=a),r=a;break;default:if(!+e[a])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(r+1):e}var W5;function pY(e,s){var a=Dp(e,s);if(!a)return e+"";var n=a[0],r=a[1],i=r-(W5=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,l=n.length;return i===l?n:i>l?n+new Array(i-l+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Dp(e,Math.max(0,s+i-1))[0]}function VL(e,s){var a=Dp(e,s);if(!a)return e+"";var n=a[0],r=a[1];return r<0?"0."+new Array(-r).join("0")+n:n.length>r+1?n.slice(0,r+1)+"."+n.slice(r+1):n+new Array(r-n.length+2).join("0")}const WL={"%":(e,s)=>(e*100).toFixed(s),b:e=>Math.round(e).toString(2),c:e=>e+"",d:mY,e:(e,s)=>e.toExponential(s),f:(e,s)=>e.toFixed(s),g:(e,s)=>e.toPrecision(s),o:e=>Math.round(e).toString(8),p:(e,s)=>VL(e*100,s),r:VL,s:pY,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function YL(e){return e}var QL=Array.prototype.map,qL=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function yY(e){var s=e.grouping===void 0||e.thousands===void 0?YL:fY(QL.call(e.grouping,Number),e.thousands+""),a=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?YL:hY(QL.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",c=e.minus===void 0?"":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function m(h){h=Ff(h);var y=h.fill,N=h.align,w=h.sign,p=h.symbol,v=h.zero,C=h.width,j=h.comma,_=h.precision,T=h.trim,k=h.type;k==="n"?(j=!0,k="g"):WL[k]||(_===void 0&&(_=12),T=!0,k="g"),(v||y==="0"&&N==="=")&&(v=!0,y="0",N="=");var E=p==="$"?a:p==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",A=p==="$"?n:/[%p]/.test(k)?l:"",U=WL[k],B=/[defgprs%]/.test(k);_=_===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function X($){var O=E,G=A,K,ae,R;if(k==="c")G=U($)+G,$="";else{$=+$;var Z=$<0||1/$<0;if($=isNaN($)?d:U(Math.abs($),_),T&&($=xY($)),Z&&+$==0&&w!=="+"&&(Z=!1),O=(Z?w==="("?w:c:w==="-"||w==="("?"":w)+O,G=(k==="s"?qL[8+W5/3]:"")+G+(Z&&w==="("?")":""),B){for(K=-1,ae=$.length;++K<ae;)if(R=$.charCodeAt(K),48>R||R>57){G=(R===46?r+$.slice(K+1):$.slice(K))+G,$=$.slice(0,K);break}}}j&&!v&&($=s($,1/0));var te=O.length+$.length+G.length,ge=te<C?new Array(C-te+1).join(y):"";switch(j&&v&&($=s(ge+$,ge.length?C-G.length:1/0),ge=""),N){case"<":$=O+$+G+ge;break;case"=":$=O+ge+$+G;break;case"^":$=ge.slice(0,te=ge.length>>1)+O+$+G+ge.slice(te);break;default:$=ge+O+$+G;break}return i($)}return X.toString=function(){return h+""},X}function f(h,y){var N=m((h=Ff(h),h.type="f",h)),w=Math.max(-8,Math.min(8,Math.floor(qd(y)/3)))*3,p=Math.pow(10,-w),v=qL[8+w/3];return function(C){return N(p*C)+v}}return{format:m,formatPrefix:f}}var gx,X1,Y5;bY({thousands:",",grouping:[3],currency:["$",""]});function bY(e){return gx=yY(e),X1=gx.format,Y5=gx.formatPrefix,gx}function vY(e){return Math.max(0,-qd(Math.abs(e)))}function NY(e,s){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(qd(s)/3)))*3-qd(Math.abs(e)))}function wY(e,s){return e=Math.abs(e),s=Math.abs(s)-e,Math.max(0,qd(s)-qd(e))+1}function jY(e,s,a,n){var r=oC(e,s,a),i;switch(n=Ff(n??",f"),n.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(s));return n.precision==null&&!isNaN(i=NY(r,l))&&(n.precision=i),Y5(n,l)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=wY(r,Math.max(Math.abs(e),Math.abs(s))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=vY(r))&&(n.precision=i-(n.type==="%")*2);break}}return X1(n)}function q0(e){var s=e.domain;return e.ticks=function(a){var n=s();return lC(n[0],n[n.length-1],a??10)},e.tickFormat=function(a,n){var r=s();return jY(r[0],r[r.length-1],a??10,n)},e.nice=function(a){a==null&&(a=10);var n=s(),r=0,i=n.length-1,l=n[r],c=n[i],d,m,f=10;for(c<l&&(m=l,l=c,c=m,m=r,r=i,i=m);f-- >0;){if(m=z5(l,c,a),m===d)return n[r]=l,n[i]=c,s(n);if(m>0)l=Math.floor(l/m)*m,c=Math.ceil(c/m)*m;else if(m<0)l=Math.ceil(l*m)/m,c=Math.floor(c*m)/m;else break;d=m}return e},e}function K1(){var e=V5();return e.copy=function(){return vh(e,K1())},Yl.apply(e,arguments),q0(e)}function Q5(e,s){e=e.slice();var a=0,n=e.length-1,r=e[a],i=e[n],l;return i<r&&(l=a,a=n,n=l,l=r,r=i,i=l),e[a]=s.floor(r),e[n]=s.ceil(i),e}function XL(e){return Math.log(e)}function KL(e){return Math.exp(e)}function CY(e){return-Math.log(-e)}function SY(e){return-Math.exp(-e)}function _Y(e){return isFinite(e)?+("1e"+e):e<0?0:e}function TY(e){return e===10?_Y:e===Math.E?Math.exp:s=>Math.pow(e,s)}function EY(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),s=>Math.log(s)/e)}function ZL(e){return(s,a)=>-e(-s,a)}function AY(e){const s=e(XL,KL),a=s.domain;let n=10,r,i;function l(){return r=EY(n),i=TY(n),a()[0]<0?(r=ZL(r),i=ZL(i),e(CY,SY)):e(XL,KL),s}return s.base=function(c){return arguments.length?(n=+c,l()):n},s.domain=function(c){return arguments.length?(a(c),l()):a()},s.ticks=c=>{const d=a();let m=d[0],f=d[d.length-1];const h=f<m;h&&([m,f]=[f,m]);let y=r(m),N=r(f),w,p;const v=c==null?10:+c;let C=[];if(!(n%1)&&N-y<v){if(y=Math.floor(y),N=Math.ceil(N),m>0){for(;y<=N;++y)for(w=1;w<n;++w)if(p=y<0?w/i(-y):w*i(y),!(p<m)){if(p>f)break;C.push(p)}}else for(;y<=N;++y)for(w=n-1;w>=1;--w)if(p=y>0?w/i(-y):w*i(y),!(p<m)){if(p>f)break;C.push(p)}C.length*2<v&&(C=lC(m,f,v))}else C=lC(y,N,Math.min(N-y,v)).map(i);return h?C.reverse():C},s.tickFormat=(c,d)=>{if(c==null&&(c=10),d==null&&(d=n===10?"s":","),typeof d!="function"&&(!(n%1)&&(d=Ff(d)).precision==null&&(d.trim=!0),d=X1(d)),c===1/0)return d;const m=Math.max(1,n*c/s.ticks().length);return f=>{let h=f/i(Math.round(r(f)));return h*n<n-.5&&(h*=n),h<=m?d(f):""}},s.nice=()=>a(Q5(a(),{floor:c=>i(Math.floor(r(c))),ceil:c=>i(Math.ceil(r(c)))})),s}function Mp(){const e=AY(Q0()).domain([1,10]);return e.copy=()=>vh(e,Mp()).base(e.base()),Yl.apply(e,arguments),e}function JL(e){return function(s){return Math.sign(s)*Math.log1p(Math.abs(s/e))}}function e4(e){return function(s){return Math.sign(s)*Math.expm1(Math.abs(s))*e}}function LY(e){var s=1,a=e(JL(s),e4(s));return a.constant=function(n){return arguments.length?e(JL(s=+n),e4(s)):s},q0(a)}function q5(){var e=LY(Q0());return e.copy=function(){return vh(e,q5()).constant(e.constant())},Yl.apply(e,arguments)}function t4(e){return function(s){return s<0?-Math.pow(-s,e):Math.pow(s,e)}}function kY(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function DY(e){return e<0?-e*e:e*e}function MY(e){var s=e(Bn,Bn),a=1;function n(){return a===1?e(Bn,Bn):a===.5?e(kY,DY):e(t4(a),t4(1/a))}return s.exponent=function(r){return arguments.length?(a=+r,n()):a},q0(s)}function Z1(){var e=MY(Q0());return e.copy=function(){return vh(e,Z1()).exponent(e.exponent())},Yl.apply(e,arguments),e}function PY(){return Z1.apply(null,arguments).exponent(.5)}function X5(){var e=[.5],s=[0,1],a,n=1;function r(i){return i!=null&&i<=i?s[U5(e,i,0,n)]:a}return r.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,s.length-1),r):e.slice()},r.range=function(i){return arguments.length?(s=Array.from(i),n=Math.min(e.length,s.length-1),r):s.slice()},r.invertExtent=function(i){var l=s.indexOf(i);return[e[l-1],e[l]]},r.unknown=function(i){return arguments.length?(a=i,r):a},r.copy=function(){return X5().domain(e).range(s).unknown(a)},Yl.apply(r,arguments)}const _N=new Date,TN=new Date;function ra(e,s,a,n){function r(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return r.floor=i=>(e(i=new Date(+i)),i),r.ceil=i=>(e(i=new Date(i-1)),s(i,1),e(i),i),r.round=i=>{const l=r(i),c=r.ceil(i);return i-l<c-i?l:c},r.offset=(i,l)=>(s(i=new Date(+i),l==null?1:Math.floor(l)),i),r.range=(i,l,c)=>{const d=[];if(i=r.ceil(i),c=c==null?1:Math.floor(c),!(i<l)||!(c>0))return d;let m;do d.push(m=new Date(+i)),s(i,c),e(i);while(m<i&&i<l);return d},r.filter=i=>ra(l=>{if(l>=l)for(;e(l),!i(l);)l.setTime(l-1)},(l,c)=>{if(l>=l)if(c<0)for(;++c<=0;)for(;s(l,-1),!i(l););else for(;--c>=0;)for(;s(l,1),!i(l););}),a&&(r.count=(i,l)=>(_N.setTime(+i),TN.setTime(+l),e(_N),e(TN),Math.floor(a(_N,TN))),r.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?r.filter(n?l=>n(l)%i===0:l=>r.count(0,l)%i===0):r)),r}const Pp=ra(()=>{},(e,s)=>{e.setTime(+e+s)},(e,s)=>s-e);Pp.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ra(s=>{s.setTime(Math.floor(s/e)*e)},(s,a)=>{s.setTime(+s+a*e)},(s,a)=>(a-s)/e):Pp);Pp.range;const Di=1e3,Hn=Di*60,Mi=Hn*60,Bi=Mi*24,J1=Bi*7,s4=Bi*30,EN=Bi*365,Yo=ra(e=>{e.setTime(e-e.getMilliseconds())},(e,s)=>{e.setTime(+e+s*Di)},(e,s)=>(s-e)/Di,e=>e.getUTCSeconds());Yo.range;const e2=ra(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Di)},(e,s)=>{e.setTime(+e+s*Hn)},(e,s)=>(s-e)/Hn,e=>e.getMinutes());e2.range;const t2=ra(e=>{e.setUTCSeconds(0,0)},(e,s)=>{e.setTime(+e+s*Hn)},(e,s)=>(s-e)/Hn,e=>e.getUTCMinutes());t2.range;const s2=ra(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Di-e.getMinutes()*Hn)},(e,s)=>{e.setTime(+e+s*Mi)},(e,s)=>(s-e)/Mi,e=>e.getHours());s2.range;const a2=ra(e=>{e.setUTCMinutes(0,0,0)},(e,s)=>{e.setTime(+e+s*Mi)},(e,s)=>(s-e)/Mi,e=>e.getUTCHours());a2.range;const Nh=ra(e=>e.setHours(0,0,0,0),(e,s)=>e.setDate(e.getDate()+s),(e,s)=>(s-e-(s.getTimezoneOffset()-e.getTimezoneOffset())*Hn)/Bi,e=>e.getDate()-1);Nh.range;const X0=ra(e=>{e.setUTCHours(0,0,0,0)},(e,s)=>{e.setUTCDate(e.getUTCDate()+s)},(e,s)=>(s-e)/Bi,e=>e.getUTCDate()-1);X0.range;const K5=ra(e=>{e.setUTCHours(0,0,0,0)},(e,s)=>{e.setUTCDate(e.getUTCDate()+s)},(e,s)=>(s-e)/Bi,e=>Math.floor(e/Bi));K5.range;function bc(e){return ra(s=>{s.setDate(s.getDate()-(s.getDay()+7-e)%7),s.setHours(0,0,0,0)},(s,a)=>{s.setDate(s.getDate()+a*7)},(s,a)=>(a-s-(a.getTimezoneOffset()-s.getTimezoneOffset())*Hn)/J1)}const K0=bc(0),Op=bc(1),OY=bc(2),IY=bc(3),Xd=bc(4),$Y=bc(5),RY=bc(6);K0.range;Op.range;OY.range;IY.range;Xd.range;$Y.range;RY.range;function vc(e){return ra(s=>{s.setUTCDate(s.getUTCDate()-(s.getUTCDay()+7-e)%7),s.setUTCHours(0,0,0,0)},(s,a)=>{s.setUTCDate(s.getUTCDate()+a*7)},(s,a)=>(a-s)/J1)}const Z0=vc(0),Ip=vc(1),UY=vc(2),zY=vc(3),Kd=vc(4),FY=vc(5),BY=vc(6);Z0.range;Ip.range;UY.range;zY.range;Kd.range;FY.range;BY.range;const n2=ra(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,s)=>{e.setMonth(e.getMonth()+s)},(e,s)=>s.getMonth()-e.getMonth()+(s.getFullYear()-e.getFullYear())*12,e=>e.getMonth());n2.range;const r2=ra(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,s)=>{e.setUTCMonth(e.getUTCMonth()+s)},(e,s)=>s.getUTCMonth()-e.getUTCMonth()+(s.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());r2.range;const Hi=ra(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,s)=>{e.setFullYear(e.getFullYear()+s)},(e,s)=>s.getFullYear()-e.getFullYear(),e=>e.getFullYear());Hi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ra(s=>{s.setFullYear(Math.floor(s.getFullYear()/e)*e),s.setMonth(0,1),s.setHours(0,0,0,0)},(s,a)=>{s.setFullYear(s.getFullYear()+a*e)});Hi.range;const Gi=ra(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,s)=>{e.setUTCFullYear(e.getUTCFullYear()+s)},(e,s)=>s.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Gi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ra(s=>{s.setUTCFullYear(Math.floor(s.getUTCFullYear()/e)*e),s.setUTCMonth(0,1),s.setUTCHours(0,0,0,0)},(s,a)=>{s.setUTCFullYear(s.getUTCFullYear()+a*e)});Gi.range;function Z5(e,s,a,n,r,i){const l=[[Yo,1,Di],[Yo,5,5*Di],[Yo,15,15*Di],[Yo,30,30*Di],[i,1,Hn],[i,5,5*Hn],[i,15,15*Hn],[i,30,30*Hn],[r,1,Mi],[r,3,3*Mi],[r,6,6*Mi],[r,12,12*Mi],[n,1,Bi],[n,2,2*Bi],[a,1,J1],[s,1,s4],[s,3,3*s4],[e,1,EN]];function c(m,f,h){const y=f<m;y&&([m,f]=[f,m]);const N=h&&typeof h.range=="function"?h:d(m,f,h),w=N?N.range(m,+f+1):[];return y?w.reverse():w}function d(m,f,h){const y=Math.abs(f-m)/h,N=G1(([,,v])=>v).right(l,y);if(N===l.length)return e.every(oC(m/EN,f/EN,h));if(N===0)return Pp.every(Math.max(oC(m,f,h),1));const[w,p]=l[y/l[N-1][2]<l[N][2]/y?N-1:N];return w.every(p)}return[c,d]}const[HY,GY]=Z5(Gi,r2,Z0,K5,a2,t2),[VY,WY]=Z5(Hi,n2,K0,Nh,s2,e2);function AN(e){if(0<=e.y&&e.y<100){var s=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return s.setFullYear(e.y),s}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function LN(e){if(0<=e.y&&e.y<100){var s=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return s.setUTCFullYear(e.y),s}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ym(e,s,a){return{y:e,m:s,d:a,H:0,M:0,S:0,L:0}}function YY(e){var s=e.dateTime,a=e.date,n=e.time,r=e.periods,i=e.days,l=e.shortDays,c=e.months,d=e.shortMonths,m=bm(r),f=vm(r),h=bm(i),y=vm(i),N=bm(l),w=vm(l),p=bm(c),v=vm(c),C=bm(d),j=vm(d),_={a:Z,A:te,b:ge,B:le,c:null,d:o4,e:o4,f:xQ,g:_Q,G:EQ,H:fQ,I:hQ,j:gQ,L:J5,m:pQ,M:yQ,p:W,q:ee,Q:u4,s:m4,S:bQ,u:vQ,U:NQ,V:wQ,w:jQ,W:CQ,x:null,X:null,y:SQ,Y:TQ,Z:AQ,"%":d4},T={a:J,A:he,b:be,B:Le,c:null,d:c4,e:c4,f:MQ,g:HQ,G:VQ,H:LQ,I:kQ,j:DQ,L:tP,m:PQ,M:OQ,p:Me,q:ke,Q:u4,s:m4,S:IQ,u:$Q,U:RQ,V:UQ,w:zQ,W:FQ,x:null,X:null,y:BQ,Y:GQ,Z:WQ,"%":d4},k={a:X,A:$,b:O,B:G,c:K,d:i4,e:i4,f:cQ,g:r4,G:n4,H:l4,I:l4,j:rQ,L:oQ,m:nQ,M:iQ,p:B,q:aQ,Q:uQ,s:mQ,S:lQ,u:ZY,U:JY,V:eQ,w:KY,W:tQ,x:ae,X:R,y:r4,Y:n4,Z:sQ,"%":dQ};_.x=E(a,_),_.X=E(n,_),_.c=E(s,_),T.x=E(a,T),T.X=E(n,T),T.c=E(s,T);function E(F,ve){return function(Ce){var D=[],re=-1,oe=0,je=F.length,Re,Ke,et;for(Ce instanceof Date||(Ce=new Date(+Ce));++re<je;)F.charCodeAt(re)===37&&(D.push(F.slice(oe,re)),(Ke=a4[Re=F.charAt(++re)])!=null?Re=F.charAt(++re):Ke=Re==="e"?" ":"0",(et=ve[Re])&&(Re=et(Ce,Ke)),D.push(Re),oe=re+1);return D.push(F.slice(oe,re)),D.join("")}}function A(F,ve){return function(Ce){var D=ym(1900,void 0,1),re=U(D,F,Ce+="",0),oe,je;if(re!=Ce.length)return null;if("Q"in D)return new Date(D.Q);if("s"in D)return new Date(D.s*1e3+("L"in D?D.L:0));if(ve&&!("Z"in D)&&(D.Z=0),"p"in D&&(D.H=D.H%12+D.p*12),D.m===void 0&&(D.m="q"in D?D.q:0),"V"in D){if(D.V<1||D.V>53)return null;"w"in D||(D.w=1),"Z"in D?(oe=LN(ym(D.y,0,1)),je=oe.getUTCDay(),oe=je>4||je===0?Ip.ceil(oe):Ip(oe),oe=X0.offset(oe,(D.V-1)*7),D.y=oe.getUTCFullYear(),D.m=oe.getUTCMonth(),D.d=oe.getUTCDate()+(D.w+6)%7):(oe=AN(ym(D.y,0,1)),je=oe.getDay(),oe=je>4||je===0?Op.ceil(oe):Op(oe),oe=Nh.offset(oe,(D.V-1)*7),D.y=oe.getFullYear(),D.m=oe.getMonth(),D.d=oe.getDate()+(D.w+6)%7)}else("W"in D||"U"in D)&&("w"in D||(D.w="u"in D?D.u%7:"W"in D?1:0),je="Z"in D?LN(ym(D.y,0,1)).getUTCDay():AN(ym(D.y,0,1)).getDay(),D.m=0,D.d="W"in D?(D.w+6)%7+D.W*7-(je+5)%7:D.w+D.U*7-(je+6)%7);return"Z"in D?(D.H+=D.Z/100|0,D.M+=D.Z%100,LN(D)):AN(D)}}function U(F,ve,Ce,D){for(var re=0,oe=ve.length,je=Ce.length,Re,Ke;re<oe;){if(D>=je)return-1;if(Re=ve.charCodeAt(re++),Re===37){if(Re=ve.charAt(re++),Ke=k[Re in a4?ve.charAt(re++):Re],!Ke||(D=Ke(F,Ce,D))<0)return-1}else if(Re!=Ce.charCodeAt(D++))return-1}return D}function B(F,ve,Ce){var D=m.exec(ve.slice(Ce));return D?(F.p=f.get(D[0].toLowerCase()),Ce+D[0].length):-1}function X(F,ve,Ce){var D=N.exec(ve.slice(Ce));return D?(F.w=w.get(D[0].toLowerCase()),Ce+D[0].length):-1}function $(F,ve,Ce){var D=h.exec(ve.slice(Ce));return D?(F.w=y.get(D[0].toLowerCase()),Ce+D[0].length):-1}function O(F,ve,Ce){var D=C.exec(ve.slice(Ce));return D?(F.m=j.get(D[0].toLowerCase()),Ce+D[0].length):-1}function G(F,ve,Ce){var D=p.exec(ve.slice(Ce));return D?(F.m=v.get(D[0].toLowerCase()),Ce+D[0].length):-1}function K(F,ve,Ce){return U(F,s,ve,Ce)}function ae(F,ve,Ce){return U(F,a,ve,Ce)}function R(F,ve,Ce){return U(F,n,ve,Ce)}function Z(F){return l[F.getDay()]}function te(F){return i[F.getDay()]}function ge(F){return d[F.getMonth()]}function le(F){return c[F.getMonth()]}function W(F){return r[+(F.getHours()>=12)]}function ee(F){return 1+~~(F.getMonth()/3)}function J(F){return l[F.getUTCDay()]}function he(F){return i[F.getUTCDay()]}function be(F){return d[F.getUTCMonth()]}function Le(F){return c[F.getUTCMonth()]}function Me(F){return r[+(F.getUTCHours()>=12)]}function ke(F){return 1+~~(F.getUTCMonth()/3)}return{format:function(F){var ve=E(F+="",_);return ve.toString=function(){return F},ve},parse:function(F){var ve=A(F+="",!1);return ve.toString=function(){return F},ve},utcFormat:function(F){var ve=E(F+="",T);return ve.toString=function(){return F},ve},utcParse:function(F){var ve=A(F+="",!0);return ve.toString=function(){return F},ve}}}var a4={"-":"",_:" ",0:"0"},ca=/^\s*\d+/,QY=/^%/,qY=/[\\^$*+?|[\]().{}]/g;function Vt(e,s,a){var n=e<0?"-":"",r=(n?-e:e)+"",i=r.length;return n+(i<a?new Array(a-i+1).join(s)+r:r)}function XY(e){return e.replace(qY,"\\$&")}function bm(e){return new RegExp("^(?:"+e.map(XY).join("|")+")","i")}function vm(e){return new Map(e.map((s,a)=>[s.toLowerCase(),a]))}function KY(e,s,a){var n=ca.exec(s.slice(a,a+1));return n?(e.w=+n[0],a+n[0].length):-1}function ZY(e,s,a){var n=ca.exec(s.slice(a,a+1));return n?(e.u=+n[0],a+n[0].length):-1}function JY(e,s,a){var n=ca.exec(s.slice(a,a+2));return n?(e.U=+n[0],a+n[0].length):-1}function eQ(e,s,a){var n=ca.exec(s.slice(a,a+2));return n?(e.V=+n[0],a+n[0].length):-1}function tQ(e,s,a){var n=ca.exec(s.slice(a,a+2));return n?(e.W=+n[0],a+n[0].length):-1}function n4(e,s,a){var n=ca.exec(s.slice(a,a+4));return n?(e.y=+n[0],a+n[0].length):-1}function r4(e,s,a){var n=ca.exec(s.slice(a,a+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),a+n[0].length):-1}function sQ(e,s,a){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(s.slice(a,a+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),a+n[0].length):-1}function aQ(e,s,a){var n=ca.exec(s.slice(a,a+1));return n?(e.q=n[0]*3-3,a+n[0].length):-1}function nQ(e,s,a){var n=ca.exec(s.slice(a,a+2));return n?(e.m=n[0]-1,a+n[0].length):-1}function i4(e,s,a){var n=ca.exec(s.slice(a,a+2));return n?(e.d=+n[0],a+n[0].length):-1}function rQ(e,s,a){var n=ca.exec(s.slice(a,a+3));return n?(e.m=0,e.d=+n[0],a+n[0].length):-1}function l4(e,s,a){var n=ca.exec(s.slice(a,a+2));return n?(e.H=+n[0],a+n[0].length):-1}function iQ(e,s,a){var n=ca.exec(s.slice(a,a+2));return n?(e.M=+n[0],a+n[0].length):-1}function lQ(e,s,a){var n=ca.exec(s.slice(a,a+2));return n?(e.S=+n[0],a+n[0].length):-1}function oQ(e,s,a){var n=ca.exec(s.slice(a,a+3));return n?(e.L=+n[0],a+n[0].length):-1}function cQ(e,s,a){var n=ca.exec(s.slice(a,a+6));return n?(e.L=Math.floor(n[0]/1e3),a+n[0].length):-1}function dQ(e,s,a){var n=QY.exec(s.slice(a,a+1));return n?a+n[0].length:-1}function uQ(e,s,a){var n=ca.exec(s.slice(a));return n?(e.Q=+n[0],a+n[0].length):-1}function mQ(e,s,a){var n=ca.exec(s.slice(a));return n?(e.s=+n[0],a+n[0].length):-1}function o4(e,s){return Vt(e.getDate(),s,2)}function fQ(e,s){return Vt(e.getHours(),s,2)}function hQ(e,s){return Vt(e.getHours()%12||12,s,2)}function gQ(e,s){return Vt(1+Nh.count(Hi(e),e),s,3)}function J5(e,s){return Vt(e.getMilliseconds(),s,3)}function xQ(e,s){return J5(e,s)+"000"}function pQ(e,s){return Vt(e.getMonth()+1,s,2)}function yQ(e,s){return Vt(e.getMinutes(),s,2)}function bQ(e,s){return Vt(e.getSeconds(),s,2)}function vQ(e){var s=e.getDay();return s===0?7:s}function NQ(e,s){return Vt(K0.count(Hi(e)-1,e),s,2)}function eP(e){var s=e.getDay();return s>=4||s===0?Xd(e):Xd.ceil(e)}function wQ(e,s){return e=eP(e),Vt(Xd.count(Hi(e),e)+(Hi(e).getDay()===4),s,2)}function jQ(e){return e.getDay()}function CQ(e,s){return Vt(Op.count(Hi(e)-1,e),s,2)}function SQ(e,s){return Vt(e.getFullYear()%100,s,2)}function _Q(e,s){return e=eP(e),Vt(e.getFullYear()%100,s,2)}function TQ(e,s){return Vt(e.getFullYear()%1e4,s,4)}function EQ(e,s){var a=e.getDay();return e=a>=4||a===0?Xd(e):Xd.ceil(e),Vt(e.getFullYear()%1e4,s,4)}function AQ(e){var s=e.getTimezoneOffset();return(s>0?"-":(s*=-1,"+"))+Vt(s/60|0,"0",2)+Vt(s%60,"0",2)}function c4(e,s){return Vt(e.getUTCDate(),s,2)}function LQ(e,s){return Vt(e.getUTCHours(),s,2)}function kQ(e,s){return Vt(e.getUTCHours()%12||12,s,2)}function DQ(e,s){return Vt(1+X0.count(Gi(e),e),s,3)}function tP(e,s){return Vt(e.getUTCMilliseconds(),s,3)}function MQ(e,s){return tP(e,s)+"000"}function PQ(e,s){return Vt(e.getUTCMonth()+1,s,2)}function OQ(e,s){return Vt(e.getUTCMinutes(),s,2)}function IQ(e,s){return Vt(e.getUTCSeconds(),s,2)}function $Q(e){var s=e.getUTCDay();return s===0?7:s}function RQ(e,s){return Vt(Z0.count(Gi(e)-1,e),s,2)}function sP(e){var s=e.getUTCDay();return s>=4||s===0?Kd(e):Kd.ceil(e)}function UQ(e,s){return e=sP(e),Vt(Kd.count(Gi(e),e)+(Gi(e).getUTCDay()===4),s,2)}function zQ(e){return e.getUTCDay()}function FQ(e,s){return Vt(Ip.count(Gi(e)-1,e),s,2)}function BQ(e,s){return Vt(e.getUTCFullYear()%100,s,2)}function HQ(e,s){return e=sP(e),Vt(e.getUTCFullYear()%100,s,2)}function GQ(e,s){return Vt(e.getUTCFullYear()%1e4,s,4)}function VQ(e,s){var a=e.getUTCDay();return e=a>=4||a===0?Kd(e):Kd.ceil(e),Vt(e.getUTCFullYear()%1e4,s,4)}function WQ(){return"+0000"}function d4(){return"%"}function u4(e){return+e}function m4(e){return Math.floor(+e/1e3)}var xd,aP,nP;YQ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function YQ(e){return xd=YY(e),aP=xd.format,xd.parse,nP=xd.utcFormat,xd.utcParse,xd}function QQ(e){return new Date(e)}function qQ(e){return e instanceof Date?+e:+new Date(+e)}function i2(e,s,a,n,r,i,l,c,d,m){var f=V5(),h=f.invert,y=f.domain,N=m(".%L"),w=m(":%S"),p=m("%I:%M"),v=m("%I %p"),C=m("%a %d"),j=m("%b %d"),_=m("%B"),T=m("%Y");function k(E){return(d(E)<E?N:c(E)<E?w:l(E)<E?p:i(E)<E?v:n(E)<E?r(E)<E?C:j:a(E)<E?_:T)(E)}return f.invert=function(E){return new Date(h(E))},f.domain=function(E){return arguments.length?y(Array.from(E,qQ)):y().map(QQ)},f.ticks=function(E){var A=y();return e(A[0],A[A.length-1],E??10)},f.tickFormat=function(E,A){return A==null?k:m(A)},f.nice=function(E){var A=y();return(!E||typeof E.range!="function")&&(E=s(A[0],A[A.length-1],E??10)),E?y(Q5(A,E)):f},f.copy=function(){return vh(f,i2(e,s,a,n,r,i,l,c,d,m))},f}function rP(){return Yl.apply(i2(VY,WY,Hi,n2,K0,Nh,s2,e2,Yo,aP).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function XQ(){return Yl.apply(i2(HY,GY,Gi,r2,Z0,X0,a2,t2,Yo,nP).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function KQ(){var e=0,s=1,a,n,r,i,l=Bn,c=!1,d;function m(h){return h==null||isNaN(h=+h)?d:l(r===0?.5:(h=(i(h)-a)*r,c?Math.max(0,Math.min(1,h)):h))}m.domain=function(h){return arguments.length?([e,s]=h,a=i(e=+e),n=i(s=+s),r=a===n?0:1/(n-a),m):[e,s]},m.clamp=function(h){return arguments.length?(c=!!h,m):c},m.interpolator=function(h){return arguments.length?(l=h,m):l};function f(h){return function(y){var N,w;return arguments.length?([N,w]=y,l=h(N,w),m):[l(0),l(1)]}}return m.range=f(Y0),m.rangeRound=f(G5),m.unknown=function(h){return arguments.length?(d=h,m):d},function(h){return i=h,a=h(e),n=h(s),r=a===n?0:1/(n-a),m}}function ZQ(e,s){return s.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function iP(){var e=q0(KQ()(Bn));return e.copy=function(){return ZQ(e,iP())},UW.apply(e,arguments)}function lP(e){return e.type==="piecewise"?X5(e.thresholds,e.colors):iP([e.min??0,e.max??100],e.color)}function Zd(e){return e.values?cC(e.values,e.colors).unknown(e.unknownColor??null):cC(e.colors.map((s,a)=>a),e.colors).unknown(e.unknownColor??null)}function Ud(e){return e.type==="ordinal"?Zd(e):lP(e)}function oP(e,s,a){const{tickMaxStep:n,tickMinStep:r,tickNumber:i}=e,l=r===void 0?999:Math.floor(Math.abs(s[1]-s[0])/r),c=n===void 0?2:Math.ceil(Math.abs(s[1]-s[0])/n);return Math.min(l,Math.max(c,i??a))}function cP(e,s){return s[1]-s[0]===0?1:e/((s[1]-s[0])/100)}function l2(e){return Math.floor(Math.abs(e)/50)}function f4(e){return Array.isArray(e)?JSON.stringify(e):typeof e=="object"&&e!==null?e.valueOf():e}function J0(...e){let s=new Ap(void 0,f4),a=[],n=[],r=0,i=1,l,c,d=!1,m=0,f=0,h=.5;const y=v=>{const C=s.get(v);if(C!==void 0)return n[C%n.length]},N=()=>{const v=a.length,C=i<r,j=C?i:r,_=C?r:i;l=(_-j)/Math.max(1,v-m+f*2),d&&(l=Math.floor(l));const T=j+(_-j-l*(v-m))*h;c=l*(1-m);const k=d?Math.round(T):T;c=d?Math.round(c):c;const A=RW(v).map(U=>k+l*U);return n=C?A.reverse():A,y};y.domain=function(v){if(!arguments.length)return a.slice();a=[],s=new Ap(void 0,f4);for(const C of v)s.has(C)||s.set(C,a.push(C)-1);return N()},y.range=function(v){if(!arguments.length)return[r,i];const[C,j]=v;return r=+C,i=+j,N()},y.rangeRound=function(v){const[C,j]=v;return r=+C,i=+j,d=!0,N()},y.bandwidth=function(){return c},y.step=function(){return l},y.round=function(v){return arguments.length?(d=!!v,N()):d},y.padding=function(v){return arguments.length?(m=Math.min(1,f=+v),N()):m},y.paddingInner=function(v){return arguments.length?(m=Math.min(1,v),N()):m},y.paddingOuter=function(v){return arguments.length?(f=+v,N()):f},y.align=function(v){return arguments.length?(h=Math.max(0,Math.min(1,v)),N()):h},y.copy=()=>J0(a,[r,i]).round(d).paddingInner(m).paddingOuter(f).align(h);const[w,p]=e;return e.length>1?(y.domain(w),y.range(p)):w?y.range(w):N(),y}function dP(...e){const s=J0(...e).paddingInner(1),a=s.copy;return s.padding=s.paddingOuter,delete s.paddingInner,delete s.paddingOuter,s.copy=()=>{const n=a();return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=s.copy,n},s}function uP(...e){const s=q5(...e),a=s.ticks,{negativeScale:n,linearScale:r,positiveScale:i}=JQ(s);return s.ticks=l=>{const c=a(l),d=s.constant();let m=0,f=0,h=0;c.forEach(N=>{N>-d&&N<d&&(f+=1),N<=-d&&(m+=1),N>=d&&(h+=1)});const y=[];if(m>0&&y.push(...n.ticks(m)),f>0){const N=r.ticks(f);y.at(-1)===N[0]?y.push(...N.slice(1)):y.push(...N)}if(h>0){const N=i.ticks(h);y.at(-1)===N[0]?y.push(...N.slice(1)):y.push(...N)}return y},s.tickFormat=(l=10,c)=>{const d=s.constant(),[m,f]=s.domain(),h=f-m,y=n.domain(),N=y[1]-y[0],p=(h===0?0:N/h)*l,v=r.domain(),C=v[1]-v[0],_=(h===0?0:C/h)*l,T=i.domain(),k=T[1]-T[0],A=(h===0?0:k/h)*l,U=n.tickFormat(p,c),B=r.tickFormat(_,c),X=i.tickFormat(A,c);return $=>($.valueOf()<=-d?U:$.valueOf()>=d?X:B)($)},s.copy=()=>uP(s.domain(),s.range()).constant(s.constant()),s}function JQ(e){const s=e.constant(),a=e.domain(),n=[a[0],Math.min(a[1],-s)],r=Mp(n,e.range()),i=[Math.max(a[0],-s),Math.min(a[1],s)],l=K1(i,e.range()),c=[Math.max(a[0],s),a[1]],d=Mp(c,e.range());return{negativeScale:r,linearScale:l,positiveScale:d}}function ey(e,s,a){switch(e){case"log":return Mp(s,a);case"pow":return Z1(s,a);case"sqrt":return PY(s,a);case"time":return rP(s,a);case"utc":return XQ(s,a);case"symlog":return uP(s,a);default:return K1(s,a)}}const fC=e=>e?.[0]instanceof Date;function hC(e,s,a){const n=rP(e,s);return(r,{location:i})=>i==="tick"?n.tickFormat(a)(r):`${r.toLocaleString()}`}let h4,g4;class eq{types=new Set;constructor(){if(h4)throw new Error("You can only create one instance!");h4=this.types}addType(s){this.types.add(s)}getTypes(){return this.types}}class tq{types=new Set;constructor(){if(g4)throw new Error("You can only create one instance!");g4=this.types}addType(s){this.types.add(s)}getTypes(){return this.types}}const ty=new eq;ty.addType("bar");ty.addType("line");ty.addType("scatter");const mP=new tq;mP.addType("radar");function sy(e){return ty.getTypes().has(e)}function $p(e){return sy(e.type)}const sq=(e,s,a,n)=>{const r=new Set;return Object.keys(s).filter(sy).forEach(l=>{const c=a[l]?.series??{},d=s[l].axisTooltipGetter?.(c);d!==void 0&&d.forEach(({axisId:m,direction:f})=>{f===e&&r.add(m??n)})}),r};function da(e){return e.bandwidth!==void 0}function aq(e){return da(e)&&e.paddingOuter!==void 0}function nq(e,s,a){const n=s==="x"?[e.left,e.left+e.width]:[e.top+e.height,e.top];return a?[n[1],n[0]]:n}const rq=.2,iq=.1;function fP({scales:e,drawingArea:s,formattedSeries:a,axis:n,seriesConfig:r,axisDirection:i,zoomMap:l,domains:c}){if(n===void 0)return{axis:{},axisIds:[]};const d=sq(i,r,a,n[0].id),m={};return n.forEach(f=>{const h=f,y=e[h.id],N=l?.get(h.id),w=N?[N.start,N.end]:[0,100],p=nq(s,i,h.reverse??!1),v=!h.ignoreTooltip&&d.has(h.id),C=h.data??[];if(da(y)){const E=i==="y"?[p[1],p[0]]:p;if(aq(y)&&pc(h)){const A=h.categoryGapRatio??rq,U=h.barGapRatio??iq;m[h.id]=Oe({offset:0,height:0,categoryGapRatio:A,barGapRatio:U,triggerTooltip:v},h,{data:C,scale:y,tickNumber:h.data.length,colorScale:h.colorMap&&(h.colorMap.type==="ordinal"?Zd(Oe({values:h.data},h.colorMap)):Ud(h.colorMap))})}if(yc(h)&&(m[h.id]=Oe({offset:0,height:0,triggerTooltip:v},h,{data:C,scale:y,tickNumber:h.data.length,colorScale:h.colorMap&&(h.colorMap.type==="ordinal"?Zd(Oe({values:h.data},h.colorMap)):Ud(h.colorMap))})),fC(h.data)){const A=hC(h.data,E,h.tickNumber);m[h.id].valueFormatter=h.valueFormatter??A}return}if(h.scaleType==="band"||h.scaleType==="point")return;const j=c[h.id].tickNumber,_=h,T=_.scaleType??"linear",k=cP(j,w);m[h.id]=Oe({offset:0,height:0,triggerTooltip:v},_,{data:C,scaleType:T,scale:y,tickNumber:k,colorScale:_.colorMap&&lP(_.colorMap),valueFormatter:h.valueFormatter??AW(k,ey(T,p.map(E=>y.invert(E)),p))})}),{axis:m,axisIds:n.map(({id:f})=>f)}}function lq(e){return e!=null}function oq(e,s,a,n){const r=e?.length??0,i=Math.floor(s*r/100),l=Math.ceil(a*r/100);return function(d,m){return(d[n]??e?.[m])==null?!0:m>=i&&m<l}}function cq(e,s,a,n,r){const i=e[0].valueOf(),l=e[1].valueOf(),c=i+s*(l-i)/100,d=i+a*(l-i)/100;return function(f,h){const y=f[n]??r?.[h];return y==null?!0:y>=c&&y<=d}}const dq=e=>({currentAxisId:s,seriesXAxisId:a,seriesYAxisId:n,isDefaultAxis:r})=>(i,l)=>!(s===a?n:a)||r?Object.values(e??{})[0]?.(i,l)??!0:[n,a].filter(m=>m!==s).map(m=>e[m??""]).filter(lq).every(m=>m(i,l)),x4=e=>(s=[])=>s.reduce((a,n)=>{const{zoom:r,id:i,reverse:l}=n,c=H1(r,i,e,l);return c&&(a[i]=c),a},{}),uq=.2;function hP(e,s,a){const n=s==="x"?[e.left,e.left+e.width]:[e.top+e.height,e.top];return a.reverse?[n[1],n[0]]:n}function gP(e,s){const a=[0,1];if(pc(e)){const i=e.categoryGapRatio??uq;return J0(s,a).paddingInner(i).paddingOuter(i/2)}if(yc(e))return dP(s,a);const n=e.scaleType??"linear",r=ey(n,s,a);return kW(e)&&e.constant!=null&&r.constant(e.constant),r}const xP=(e,s)=>{const a=e[1]-e[0],n=s[1]-s[0],r=e[0]-s[0]*a/n,i=e[1]+(100-s[1])*a/n;return[r,i]},mq=(e,s,a,n,r,i,l)=>{const c=a==="x"?n[e].xExtremumGetter:n[e].yExtremumGetter,d=i[e]?.series??{};return c?.({series:d,axis:s,axisIndex:r,isDefaultAxis:r===0,getFilters:l})??[1/0,-1/0]};function ay(e,s,a,n,r,i){const l=Object.keys(a).filter(sy);let c=[1/0,-1/0];for(const d of l){const[m,f]=mq(d,e,s,a,n,r,i);c=[Math.min(c[0],m),Math.max(c[1],f)]}return Number.isNaN(c[0])||Number.isNaN(c[1])?[1/0,-1/0]:c}const fq=(e,s,a,n)=>{if(e.domainLimit!==void 0)return e.domainLimit;if(s==="x")for(const r of n.line?.seriesOrder??[]){const i=n.line.series[r];if(i.xAxisId===e.id||i.xAxisId===void 0&&a===0)return"strict"}return"nice"};function pP(e,s,a){return ey(e??"linear",s,[0,1]).nice(a).domain()}function yP(e,s,a,n,[r,i],l,c){const d=vP(e,s,a,n,c);let m=NP(e,r,i);if(typeof d=="function"){const{min:h,max:y}=d(r.valueOf(),i.valueOf());m[0]=h,m[1]=y}const f=oP(e,m,l);return d==="nice"&&(m=pP(e.scaleType,m,f)),m=["min"in e?e.min??m[0]:m[0],"max"in e?e.max??m[1]:m[1]],{domain:m,tickNumber:f}}function bP(e,s,a,n,[r,i],l,c){const d=vP(e,s,a,n,c);let m=NP(e,r,i);if(typeof d=="function"){const{min:f,max:h}=d(r.valueOf(),i.valueOf());m[0]=f,m[1]=h}return d==="nice"&&(m=pP(e.scaleType,m,l)),[e.min??m[0],e.max??m[1]]}function vP(e,s,a,n,r){return r?fq(e,s,a,n):e.domainLimit??"nice"}function NP(e,s,a){let n=s,r=a;return"max"in e&&e.max!=null&&e.max<s&&(n=e.max),"min"in e&&e.min!=null&&e.min>s&&(r=e.min),!("min"in e)&&!("max"in e)?[n,r]:[e.min??n,e.max??r]}class hq{constructor(){this.ids=[],this.values=[],this.length=0}clear(){this.length=0}push(s,a){let n=this.length++;for(;n>0;){const r=n-1>>1,i=this.values[r];if(a>=i)break;this.ids[n]=this.ids[r],this.values[n]=i,n=r}this.ids[n]=s,this.values[n]=a}pop(){if(this.length===0)return;const s=this.ids,a=this.values,n=s[0],r=--this.length;if(r>0){const i=s[r],l=a[r];let c=0;const d=r>>1;for(;c<d;){const m=(c<<1)+1,f=m+1,h=m+(+(f<r)&+(a[f]<a[m]));if(a[h]>=l)break;s[c]=s[h],a[c]=a[h],c=h}s[c]=i,a[c]=l}return n}peek(){return this.length>0?this.ids[0]:void 0}peekValue(){return this.length>0?this.values[0]:void 0}shrink(){this.ids.length=this.values.length=this.length}}const p4=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],kN=3;class o2{static from(s,a=0){if(a%8!==0)throw new Error("byteOffset must be 8-byte aligned.");if(!s||s.byteLength===void 0||s.buffer)throw new Error("Data must be an instance of ArrayBuffer or SharedArrayBuffer.");const[n,r]=new Uint8Array(s,a+0,2);if(n!==251)throw new Error("Data does not appear to be in a Flatbush format.");const i=r>>4;if(i!==kN)throw new Error(`Got v${i} data when expected v${kN}.`);const l=p4[r&15];if(!l)throw new Error("Unrecognized array type.");const[c]=new Uint16Array(s,a+2,1),[d]=new Uint32Array(s,a+4,1);return new o2(d,c,l,void 0,s,a)}constructor(s,a=16,n=Float64Array,r=ArrayBuffer,i,l=0){if(s===void 0)throw new Error("Missing required argument: numItems.");if(isNaN(s)||s<=0)throw new Error(`Unexpected numItems value: ${s}.`);this.numItems=+s,this.nodeSize=Math.min(Math.max(+a,2),65535),this.byteOffset=l;let c=s,d=c;this._levelBounds=[c*4];do c=Math.ceil(c/this.nodeSize),d+=c,this._levelBounds.push(d*4);while(c!==1);this.ArrayType=n,this.IndexArrayType=d<16384?Uint16Array:Uint32Array;const m=p4.indexOf(n),f=d*4*n.BYTES_PER_ELEMENT;if(m<0)throw new Error(`Unexpected typed array class: ${n}.`);if(i)this.data=i,this._boxes=new n(i,l+8,d*4),this._indices=new this.IndexArrayType(i,l+8+f,d),this._pos=d*4,this.minX=this._boxes[this._pos-4],this.minY=this._boxes[this._pos-3],this.maxX=this._boxes[this._pos-2],this.maxY=this._boxes[this._pos-1];else{const h=this.data=new r(8+f+d*this.IndexArrayType.BYTES_PER_ELEMENT);this._boxes=new n(h,8,d*4),this._indices=new this.IndexArrayType(h,8+f,d),this._pos=0,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,new Uint8Array(h,0,2).set([251,(kN<<4)+m]),new Uint16Array(h,2,1)[0]=a,new Uint32Array(h,4,1)[0]=s}this._queue=new hq}add(s,a,n=s,r=a){const i=this._pos>>2,l=this._boxes;return this._indices[i]=i,l[this._pos++]=s,l[this._pos++]=a,l[this._pos++]=n,l[this._pos++]=r,s<this.minX&&(this.minX=s),a<this.minY&&(this.minY=a),n>this.maxX&&(this.maxX=n),r>this.maxY&&(this.maxY=r),i}finish(){if(this._pos>>2!==this.numItems)throw new Error(`Added ${this._pos>>2} items when expected ${this.numItems}.`);const s=this._boxes;if(this.numItems<=this.nodeSize){s[this._pos++]=this.minX,s[this._pos++]=this.minY,s[this._pos++]=this.maxX,s[this._pos++]=this.maxY;return}const a=this.maxX-this.minX||1,n=this.maxY-this.minY||1,r=new Uint32Array(this.numItems),i=65535;for(let l=0,c=0;l<this.numItems;l++){const d=s[c++],m=s[c++],f=s[c++],h=s[c++],y=Math.floor(i*((d+f)/2-this.minX)/a),N=Math.floor(i*((m+h)/2-this.minY)/n);r[l]=pq(y,N)}gC(r,s,this._indices,0,this.numItems-1,this.nodeSize);for(let l=0,c=0;l<this._levelBounds.length-1;l++){const d=this._levelBounds[l];for(;c<d;){const m=c;let f=s[c++],h=s[c++],y=s[c++],N=s[c++];for(let w=1;w<this.nodeSize&&c<d;w++)f=Math.min(f,s[c++]),h=Math.min(h,s[c++]),y=Math.max(y,s[c++]),N=Math.max(N,s[c++]);this._indices[this._pos>>2]=m,s[this._pos++]=f,s[this._pos++]=h,s[this._pos++]=y,s[this._pos++]=N}}}search(s,a,n,r,i){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let l=this._boxes.length-4;const c=[],d=[];for(;l!==void 0;){const m=Math.min(l+this.nodeSize*4,y4(l,this._levelBounds));for(let f=l;f<m;f+=4){if(n<this._boxes[f]||r<this._boxes[f+1]||s>this._boxes[f+2]||a>this._boxes[f+3])continue;const h=this._indices[f>>2]|0;l>=this.numItems*4?c.push(h):(i===void 0||i(h))&&(d.push(h),d.push(this._boxes[f]),d.push(this._boxes[f+1]))}l=c.pop()}return d}neighbors(s,a,n=1/0,r=1/0,i,l=gq){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let c=this._boxes.length-4;const d=this._queue,m=[];e:for(;c!==void 0;){const f=Math.min(c+this.nodeSize*4,y4(c,this._levelBounds));for(let h=c;h<f;h+=4){const y=this._indices[h>>2]|0,N=this._boxes[h],w=this._boxes[h+1],p=this._boxes[h+2],v=this._boxes[h+3],C=s<N?N-s:s>p?s-p:0,j=a<w?w-a:a>v?a-v:0,_=l(C,j);_>r||(c>=this.numItems*4?d.push(y<<1,_):(i===void 0||i(y))&&d.push((y<<1)+1,_))}for(;d.length&&d.peek()&1;)if(d.peekValue()>r||(m.push(d.pop()>>1),m.length===n))break e;c=d.length?d.pop()>>1:void 0}return d.clear(),m}}function gq(e,s){return e*e+s*s}function y4(e,s){let a=0,n=s.length-1;for(;a<n;){const r=a+n>>1;s[r]>e?n=r:a=r+1}return s[a]}function gC(e,s,a,n,r,i){if(Math.floor(n/i)>=Math.floor(r/i))return;const l=e[n],c=e[n+r>>1],d=e[r];let m=d;const f=Math.max(l,c);d>f?m=f:f===l?m=Math.max(c,d):f===c&&(m=Math.max(l,d));let h=n-1,y=r+1;for(;;){do h++;while(e[h]<m);do y--;while(e[y]>m);if(h>=y)break;xq(e,s,a,h,y)}gC(e,s,a,n,y,i),gC(e,s,a,y+1,r,i)}function xq(e,s,a,n,r){const i=e[n];e[n]=e[r],e[r]=i;const l=4*n,c=4*r,d=s[l],m=s[l+1],f=s[l+2],h=s[l+3];s[l]=s[c],s[l+1]=s[c+1],s[l+2]=s[c+2],s[l+3]=s[c+3],s[c]=d,s[c+1]=m,s[c+2]=f,s[c+3]=h;const y=a[n];a[n]=a[r],a[r]=y}function pq(e,s){let a=e^s,n=65535^a,r=65535^(e|s),i=e&(s^65535),l=a|n>>1,c=a>>1^a,d=r>>1^n&i>>1^r,m=a&r>>1^i>>1^i;a=l,n=c,r=d,i=m,l=a&a>>2^n&n>>2,c=a&n>>2^n&(a^n)>>2,d^=a&r>>2^n&i>>2,m^=n&r>>2^(a^n)&i>>2,a=l,n=c,r=d,i=m,l=a&a>>4^n&n>>4,c=a&n>>4^n&(a^n)>>4,d^=a&r>>4^n&i>>4,m^=n&r>>4^(a^n)&i>>4,a=l,n=c,r=d,i=m,d^=a&r>>8^n&i>>8,m^=n&r>>8^(a^n)&i>>8,a=d^d>>1,n=m^m>>1;let f=e^s,h=n|65535^(f|a);return f=(f|f<<8)&16711935,f=(f|f<<4)&252645135,f=(f|f<<2)&858993459,f=(f|f<<1)&1431655765,h=(h|h<<8)&16711935,h=(h|h<<4)&252645135,h=(h|h<<2)&858993459,h=(h|h<<1)&1431655765,(h<<1|f)>>>0}const yq=e=>{const s=new Map;return e.forEach(a=>{s.set(a.axisId,a)}),s},wP=e=>e.zoom,bq=nt(Zr,Ki,(e,s)=>e?.some(a=>!!a.zoom)||s?.some(a=>!!a.zoom)||!1),jP=nt(wP,e=>e?.isInteracting),Ql=Bs(wP,function(s){return s?.zoomData&&yq(s?.zoomData)}),b4=nt(Ql,(e,s)=>e?.get(s)),wh=Bs(Zr,Ki,function(s,a){return Oe({},x4("x")(s),x4("y")(a))});nt(wh,(e,s)=>e[s]);const vq=nt(an,function(s){return l2(s.width)}),Nq=nt(an,function(s){return l2(s.height)}),c2=Bs(Zr,Ls,Cn,G0,vq,function(s,a,n,r,i){const c={};return s?.forEach((d,m)=>{const f=d;if(pc(f)||yc(f)){c[f.id]={domain:f.data};return}const h=ay(f,"x",n,m,a);c[f.id]=yP(f,"x",m,a,h,i,r)}),{axes:s,domains:c}}),d2=Bs(Ki,Ls,Cn,G0,Nq,function(s,a,n,r,i){const c={};return s?.forEach((d,m)=>{const f=d;if(pc(f)||yc(f)){c[f.id]={domain:f.data};return}const h=ay(f,"y",n,m,a);c[f.id]=yP(f,"y",m,a,h,i,r)}),{axes:s,domains:c}}),CP=Bs(Ql,wh,c2,d2,function(s,a,{axes:n,domains:r},{axes:i,domains:l}){if(!s||!a)return;let c=!1;const d={},m=[...n??[],...i??[]];for(let f=0;f<m.length;f+=1){const h=m[f];if(!a[h.id]||a[h.id].filterMode!=="discard")continue;const y=s.get(h.id);if(y===void 0||y.start<=0&&y.end>=100)continue;const N=f<(n?.length??0)?"x":"y";if(h.scaleType==="band"||h.scaleType==="point")d[h.id]=oq(h.data,y.start,y.end,N);else{const{domain:w}=N==="x"?r[h.id]:l[h.id];d[h.id]=cq(w,y.start,y.end,N,h.data)}c=!0}if(c)return dq(d)}),wq=Bs(Ls,Cn,Ql,wh,CP,G0,c2,function(s,a,n,r,i,l,{axes:c,domains:d}){const m={};return c?.forEach((f,h)=>{const y=d[f.id].domain;if(pc(f)||yc(f)){m[f.id]=y;return}const N=n?.get(f.id),w=r?.[f.id],p=N===void 0&&!w?i:void 0;if(!p){m[f.id]=y;return}const v=d[f.id].tickNumber,C=ay(f,"x",a,h,s,p);m[f.id]=bP(f,"x",h,s,C,v,l)}),m}),jq=Bs(Ls,Cn,Ql,wh,CP,G0,d2,function(s,a,n,r,i,l,{axes:c,domains:d}){const m={};return c?.forEach((f,h)=>{const y=d[f.id].domain;if(pc(f)||yc(f)){m[f.id]=y;return}const N=n?.get(f.id),w=r?.[f.id],p=N===void 0&&!w?i:void 0;if(!p){m[f.id]=y;return}const v=d[f.id].tickNumber,C=ay(f,"y",a,h,s,p);m[f.id]=bP(f,"y",h,s,C,v,l)}),m}),SP=Bs(Zr,wq,function(s,a){const n={};return s?.forEach(r=>{const i=r,l=a[i.id];n[i.id]=gP(i,l)}),n}),_P=Bs(Ki,jq,function(s,a){const n={};return s?.forEach(r=>{const i=r,l=a[i.id];n[i.id]=gP(i,l)}),n}),Cq=Bs(Zr,SP,an,Ql,function(s,a,n,r){const i={};return s?.forEach(l=>{const c=l,d=r?.get(c.id),m=d?[d.start,d.end]:[0,100],f=hP(n,"x",c),h=a[c.id].copy(),y=xP(f,m);h.range(y),i[c.id]=h}),i}),Sq=Bs(Ki,_P,an,Ql,function(s,a,n,r){const i={};return s?.forEach(l=>{const c=l,d=r?.get(c.id),m=d?[d.start,d.end]:[0,100],f=hP(n,"y",c),h=a[c.id].copy(),y=da(h)?f.reverse():f,N=xP(y,m);h.range(N),i[c.id]=h}),i}),Oa=Bs(an,Ls,Cn,Ql,c2,Cq,function(s,a,n,r,{axes:i,domains:l},c){return fP({scales:c,drawingArea:s,formattedSeries:a,axis:i,seriesConfig:n,axisDirection:"x",zoomMap:r,domains:l})}),Ia=Bs(an,Ls,Cn,Ql,d2,Sq,function(s,a,n,r,{axes:i,domains:l},c){return fP({scales:c,drawingArea:s,formattedSeries:a,axis:i,seriesConfig:n,axisDirection:"y",zoomMap:r,domains:l})});nt(Oa,Ia,(e,s,a)=>e?.axis[a]??s?.axis[a]);nt(Zr,Ki,(e,s,a)=>{const n=e?.find(r=>r.id===a)??s?.find(r=>r.id===a)??null;if(n)return n});const _q=nt(Zr,e=>e[0].id),Tq=nt(Ki,e=>e[0].id),Eq=new Map,Aq=()=>Eq,Lq=Bs(Ls,SP,_P,_q,Tq,function(s,a,n,r,i){const l=s.scatter,c=new Map;return l&&l.seriesOrder.forEach(d=>{const{data:m,xAxisId:f=r,yAxisId:h=i}=l.series[d],y=new o2(m.length),N=a[f],w=n[h];for(const p of m)y.add(N(p.x),w(p.y));y.finish(),c.set(d,y)}),c});function pd(e){return e instanceof Date?e.getTime():e}function Jd(e,s){const{scale:a,data:n,reverse:r}=e;if(!da(a)){const l=a.invert(s);if(n===void 0)return-1;const c=pd(l);return n?.findIndex((m,f)=>{const h=pd(m);return h>c&&(f===0||Math.abs(c-h)<=Math.abs(c-pd(n[f-1])))||h<=c&&(f===n.length-1||Math.abs(pd(l)-h)<Math.abs(pd(l)-pd(n[f+1])))})}const i=a.bandwidth()===0?Math.floor((s-Math.min(...a.range())+a.step()/2)/a.step()):Math.floor((s-Math.min(...a.range()))/a.step());return i<0||i>=n.length?-1:r?n.length-1-i:i}function v4(e,s,a,n){if(!da(e)){if(n===null){const r=e.invert(a);return Number.isNaN(r)?null:r}return s[n]}return n===null||n<0||n>=s.length?null:s[n]}function Bf(e,s){const a=e.createSVGPoint();return a.x=s.clientX,a.y=s.clientY,a.matrixTransform(e.getScreenCTM().inverse())}const kq=Object.is;function TP(e,s){if(e===s)return!0;if(!(e instanceof Object)||!(s instanceof Object))return!1;let a=0,n=0;for(const r in e)if(a+=1,!kq(e[r],s[r])||!(r in s))return!1;for(const r in s)n+=1;return a===n}const jh=({store:e})=>{const s=oa(function(){e.set("interaction",Oe({},e.state.interaction,{pointer:null,item:null}))}),a=oa(function(l){const c=e.state.interaction.item;if(!l){c!==null&&e.set("interaction",Oe({},e.state.interaction,{item:null}));return}c===null||Object.keys(l).some(d=>l[d]!==c[d])||e.set("interaction",Oe({},e.state.interaction,{item:null}))}),n=oa(function(l,c){TP(e.state.interaction.item,l)||e.set("interaction",Oe({},e.state.interaction,{lastUpdate:c.interaction,item:l}))}),r=oa(function(l){e.set("interaction",Oe({},e.state.interaction,{pointer:l,lastUpdate:l!==null?"pointer":e.state.interaction.lastUpdate}))});return{instance:{cleanInteraction:s,setItemInteraction:n,removeItemInteraction:a,setPointerCoordinate:r}}};jh.getInitialState=()=>({interaction:{item:null,pointer:null,lastUpdate:"pointer"}});jh.params={};const ny=e=>e.interaction,Dq=nt(ny,e=>e!==void 0),EP=nt(ny,e=>e?.item??null),AP=nt(ny,e=>e?.pointer??null),Ch=nt(AP,e=>e&&e.x),Sh=nt(AP,e=>e&&e.y),Mq=nt(EP,e=>e!==null),_h=nt(ny,e=>e?.lastUpdate),Pq=new Set(["bar","line","scatter","pie"]);function LP(e){return Pq.has(e)}function kP(e,s,a){const n=Object.keys(e),r=s!==void 0&&e[s]?n.indexOf(s):0,i=s!==void 0&&a!==void 0&&e[s]&&e[s].series[a]?e[s].seriesOrder.indexOf(a):-1,l=n.filter(LP);for(let f=0;f<l.length;f+=1){const h=(r+f)%l.length,y=e[l[h]],N=f===0?i+1:0;for(let w=N;w<y.seriesOrder.length;w+=1)if(y.series[y.seriesOrder[w]].data.length>0)return{type:l[h],seriesId:y.seriesOrder[w]}}const c=r,d=e[l[c]],m=i;for(let f=0;f<m;f+=1)if(d.series[d.seriesOrder[f]].data.length>0)return{type:l[c],seriesId:d.seriesOrder[f]};return null}function DP(e,s,a){const n=Object.keys(e),r=s!==void 0&&e[s]?n.indexOf(s):0,i=s!==void 0&&a!==void 0&&e[s]&&e[s].series[a]?e[s].seriesOrder.indexOf(a):1,l=n.filter(LP);for(let f=0;f<l.length;f+=1){const h=(l.length+r-f)%l.length,y=e[l[h]],N=f===0?i+1:y.seriesOrder.length;for(let w=1;w<N;w+=1){const p=(y.seriesOrder.length+i-w)%y.seriesOrder.length;if(y.series[y.seriesOrder[p]].data.length>0)return{type:l[h],seriesId:y.seriesOrder[p]}}}const c=r,d=e[l[c]],m=d.seriesOrder;for(let f=m.length-1;f>i;f-=1)if(d.series[d.seriesOrder[f]].data.length>0)return{type:l[c],seriesId:d.seriesOrder[f]};return null}function MP(e,s,a){if(s==="sankey")return!1;const n=e[s]?.series[a]?.data;return n&&n.length>0}function Oq(e){const s=Ls(e);let{type:a,seriesId:n}=e.keyboardNavigation.item??{};if(a===void 0||a==="sankey"||n===void 0||!MP(s,a,n)){const i=kP(s,a,n);if(i===null)return null;a=i.type,n=i.seriesId}const r=s[a].series[n].data.length;return{type:a,seriesId:n,dataIndex:((e.keyboardNavigation.item?.dataIndex??-1)+1)%r}}function Iq(e){const s=Ls(e);let{type:a,seriesId:n}=e.keyboardNavigation.item??{};if(a===void 0||a==="sankey"||n===void 0||!MP(s,a,n)){const i=DP(s,a,n);if(i===null)return null;a=i.type,n=i.seriesId}const r=s[a].series[n].data.length;return{type:a,seriesId:n,dataIndex:(r+(e.keyboardNavigation.item?.dataIndex??1)-1)%r}}function $q(e){const s=Ls(e);let{type:a,seriesId:n}=e.keyboardNavigation.item??{};const r=kP(s,a,n);if(r===null)return null;a=r.type,n=r.seriesId;const i=s[a].series[n].data.length;return{type:a,seriesId:n,dataIndex:Math.min(i-1,e.keyboardNavigation.item?.dataIndex??0)}}function Rq(e){const s=Ls(e);let{type:a,seriesId:n}=e.keyboardNavigation.item??{};const r=DP(s,a,n);if(r===null)return null;a=r.type,n=r.seriesId;const i=s[a].series[n].data.length;return{type:a,seriesId:n,dataIndex:Math.min(i-1,e.keyboardNavigation.item?.dataIndex??0)}}const ry=({params:e,store:s,svgRef:a})=>{const n=oa(function(){s.state.keyboardNavigation.item!==null&&s.set("keyboardNavigation",Oe({},s.state.keyboardNavigation,{item:null}))});return g.useEffect(()=>{const r=a.current;if(!r||!e.enableKeyboardNavigation)return;function i(l){let c=s.state.keyboardNavigation.item;switch(l.key){case"ArrowRight":c=Oq(s.state);break;case"ArrowLeft":c=Iq(s.state);break;case"ArrowDown":{c=Rq(s.state);break}case"ArrowUp":{c=$q(s.state);break}}c!==s.state.keyboardNavigation.item&&(l.preventDefault(),s.update(Oe({},s.state.highlight&&{highlight:Oe({},s.state.highlight,{lastUpdate:"keyboard"})},s.state.interaction&&{interaction:Oe({},s.state.interaction,{lastUpdate:"keyboard"})},{keyboardNavigation:Oe({},s.state.keyboardNavigation,{item:c})})))}return r.addEventListener("keydown",i),r.addEventListener("blur",n),()=>{r.removeEventListener("keydown",i),r.removeEventListener("blur",n)}},[a,n,e.enableKeyboardNavigation,s]),na(()=>{s.state.keyboardNavigation.enableKeyboardNavigation!==e.enableKeyboardNavigation&&s.set("keyboardNavigation",Oe({},s.state.keyboardNavigation,{enableKeyboardNavigation:!!e.enableKeyboardNavigation}))},[s,e.enableKeyboardNavigation]),{}};ry.getInitialState=e=>({keyboardNavigation:{item:null,enableKeyboardNavigation:!!e.enableKeyboardNavigation}});ry.params={enableKeyboardNavigation:!0};const Nc=e=>e.keyboardNavigation;nt(Nc,(e,s)=>e?.item!=null&&e.item.type===s.seriesType&&e.item.seriesId===s.seriesId&&e.item.dataIndex===s.dataIndex);const Uq=nt(Nc,e=>e?.item!=null),iy=nt(Nc,e=>e?.item?.type),ly=nt(Nc,e=>e?.item?.seriesId),oy=nt(Nc,e=>e?.item?.dataIndex),zq=nt(Nc,e=>!!e?.enableKeyboardNavigation),PP=e=>(s,a,n,r,i)=>{if(s===void 0||a===void 0||n===void 0)return;const l=i[s]?.series[a];if(!l)return;let c=e==="x"?"xAxisId"in l&&l.xAxisId:"yAxisId"in l&&l.yAxisId;return(c===void 0||c===!1)&&(c=r.axisIds[0]),{axisId:c,dataIndex:n}},Fq=nt(iy,ly,oy,Oa,Ls,PP("x")),Bq=nt(iy,ly,oy,Ia,Ls,PP("y")),OP=nt(Nc,function(s){if(s?.item==null)return null;const{type:a,seriesId:n}=s.item;return a===void 0||n===void 0?null:s.item}),Hq=nt(iy,ly,oy,function(s,a,n){return a!==void 0&&n!==void 0}),IP=nt(_h,EP,OP,(e,s,a)=>e==="keyboard"?a:s??null),Gq=nt(_h,Mq,Hq,(e,s,a)=>e==="keyboard"?a:s),Vq=nt(IP,an,Cn,Oa,Ia,Ls,function(s,a,n,{axis:r,axisIds:i},{axis:l,axisIds:c},d,m="top"){if(!s)return null;const f=d[s.type]?.series[s.seriesId];if(f){const h={},y=$p(f)?f.xAxisId??i[0]:void 0,N=$p(f)?f.yAxisId??c[0]:void 0;return y!==void 0&&(h.x=r[y]),N!==void 0&&(h.y=l[N]),n[f.type].tooltipItemPositionGetter?.({series:d,drawingArea:a,axesConfig:h,identifier:s,placement:m})??null}return null});function zd(e,s){if(e===s)return!0;if(e&&s&&typeof e=="object"&&typeof s=="object"){if(e.constructor!==s.constructor)return!1;if(Array.isArray(e)){const r=e.length;if(r!==s.length)return!1;for(let i=0;i<r;i+=1)if(!zd(e[i],s[i]))return!1;return!0}if(e instanceof Map&&s instanceof Map){if(e.size!==s.size)return!1;const r=Array.from(e.entries());for(let i=0;i<r.length;i+=1)if(!s.has(r[i][0]))return!1;for(let i=0;i<r.length;i+=1){const l=r[i];if(!zd(l[1],s.get(l[0])))return!1}return!0}if(e instanceof Set&&s instanceof Set){if(e.size!==s.size)return!1;const r=Array.from(e.entries());for(let i=0;i<r.length;i+=1)if(!s.has(r[i][0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(s)){const r=e.length;if(r!==s.length)return!1;for(let i=0;i<r;i+=1)if(e[i]!==s[i])return!1;return!0}if(e.constructor===RegExp)return e.source===s.source&&e.flags===s.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===s.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===s.toString();const a=Object.keys(e),n=a.length;if(n!==Object.keys(s).length)return!1;for(let r=0;r<n;r+=1)if(!Object.prototype.hasOwnProperty.call(s,a[r]))return!1;for(let r=0;r<n;r+=1){const i=a[r];if(!zd(e[i],s[i]))return!1}return!0}return e!==e&&s!==s}function xC(e,s,a=s.axisIds[0]){return Array.isArray(a)?a.map(n=>Jd(s.axis[n],e)):Jd(s.axis[a],e)}const $P=(e,s,a)=>{if(e===null)return null;const n=xC(e,s,a);return n===-1?null:n},u2=nt(Ch,Oa,$P),m2=nt(Sh,Ia,$P),Wq=nt(Ch,Sh,Oa,Ia,(e,s,a,n)=>[...e===null?[]:a.axisIds.map(r=>({axisId:r,dataIndex:xC(e,a,r)})),...s===null?[]:n.axisIds.map(r=>({axisId:r,dataIndex:xC(s,n,r)}))].filter(r=>r.dataIndex!==null&&r.dataIndex>=0));function RP(e,s,a,n=s.axisIds[0]){return Array.isArray(n)?n.map((r,i)=>{const l=s.axis[r];return v4(l.scale,l.data,e,a[i])}):v4(s.axis[n].scale,s.axis[n].data,e,a)}const Yq=nt(Ch,Oa,u2,(e,s,a,n)=>e===null||s.axisIds.length===0?null:RP(e,s,a,n)),Qq=nt(Sh,Ia,m2,(e,s,a,n)=>e===null||s.axisIds.length===0?null:RP(e,s,a,n)),UP=[],zP=U0({memoizeOptions:{resultEqualityCheck:zd}})(Ch,Oa,(e,s)=>e===null?UP:s.axisIds.filter(a=>s.axis[a].triggerTooltip).map(a=>({axisId:a,dataIndex:Jd(s.axis[a],e)})).filter(({dataIndex:a})=>a>=0)),FP=U0({memoizeOptions:{resultEqualityCheck:zd}})(Sh,Ia,(e,s)=>e===null?UP:s.axisIds.filter(a=>s.axis[a].triggerTooltip).map(a=>({axisId:a,dataIndex:Jd(s.axis[a],e)})).filter(({dataIndex:a})=>a>=0)),qq=nt(zP,FP,(e,s)=>e.length>0||s.length>0);function Xq(e){return e.setPointerCoordinate!==void 0}const yu=({params:e,store:s,seriesConfig:a,svgRef:n,instance:r})=>{const{xAxis:i,yAxis:l,dataset:c,onHighlightedAxisChange:d}=e,m=gt(s,an),f=gt(s,Ls),h=gt(s,Dq),{axis:y,axisIds:N}=gt(s,Oa),{axis:w,axisIds:p}=gt(s,Ia);M5({controlled:e.highlightedAxis}),na(()=>{e.highlightedAxis!==void 0&&s.set("controlledCartesianAxisHighlight",e.highlightedAxis)},[s,e.highlightedAxis]);const v=g.useRef(!0);g.useEffect(()=>{if(v.current){v.current=!1;return}s.set("cartesianAxis",{x:I5(i,c),y:$5(l,c)})},[a,m,i,l,c,s]);const C=N[0],j=p[0];OV(s,Wq,(T,k)=>{if(d&&!Object.is(T,k)){if(T.length!==k.length){d(k);return}T?.some(({axisId:E,dataIndex:A},U)=>k[U].axisId!==E||k[U].dataIndex!==A)&&d(k)}});const _=Xq(r);return g.useEffect(()=>{const T=n.current;if(!h||!_||!T||e.disableAxisListener)return()=>{};const k=r.addInteractionListener("moveEnd",O=>{O.detail.activeGestures.pan||r.cleanInteraction()}),E=r.addInteractionListener("panEnd",O=>{O.detail.activeGestures.move||r.cleanInteraction()}),A=r.addInteractionListener("quickPressEnd",O=>{!O.detail.activeGestures.move&&!O.detail.activeGestures.pan&&r.cleanInteraction()}),U=O=>{const G=O.detail.srcEvent,K=O.detail.target,ae=Bf(T,G);if(O.detail.srcEvent.buttons>=1&&K?.hasPointerCapture(O.detail.srcEvent.pointerId)&&!K?.closest("[data-charts-zoom-slider]")&&K?.releasePointerCapture(O.detail.srcEvent.pointerId),!r.isPointInside(ae.x,ae.y,K)){r.cleanInteraction?.();return}r.setPointerCoordinate(ae)},B=r.addInteractionListener("move",U),X=r.addInteractionListener("pan",U),$=r.addInteractionListener("quickPress",U);return()=>{B.cleanup(),k.cleanup(),X.cleanup(),E.cleanup(),$.cleanup(),A.cleanup()}},[n,s,y,C,w,j,r,e.disableAxisListener,h,_]),g.useEffect(()=>{const T=n.current,k=e.onAxisClick;if(T===null||!k)return()=>{};const E=r.addInteractionListener("tap",A=>{let U=null,B=!1;const X=Bf(T,A.detail.srcEvent),$=Jd(y[C],X.x);B=$!==-1,U=B?$:Jd(w[j],X.y);const O=B?N[0]:p[0];if(U==null||U===-1)return;const G=(B?y:w)[O].data[U],K={};Object.keys(f).filter(ae=>["bar","line"].includes(ae)).forEach(ae=>{f[ae]?.seriesOrder.forEach(R=>{const Z=f[ae].series[R],te=Z.xAxisId,ge=Z.yAxisId,le=B?te:ge;(le===void 0||le===O)&&(K[R]=Z.data[U])})}),k(A.detail.srcEvent,{dataIndex:U,axisValue:G,seriesValues:K})});return()=>{E.cleanup()}},[e.onAxisClick,f,n,y,N,w,p,C,j,r]),{}};yu.params={xAxis:!0,yAxis:!0,dataset:!0,onAxisClick:!0,disableAxisListener:!0,onHighlightedAxisChange:!0,highlightedAxis:!0};yu.getDefaultizedParams=({params:e})=>Oe({},e,{colors:e.colors??A5,theme:e.theme??"light",defaultizedXAxis:I5(e.xAxis,e.dataset),defaultizedYAxis:$5(e.yAxis,e.dataset)});yu.getInitialState=e=>Oe({cartesianAxis:{x:e.defaultizedXAxis,y:e.defaultizedYAxis}},e.highlightedAxis===void 0?{}:{controlledCartesianAxisHighlight:e.highlightedAxis});const Jr=e=>e.brush;nt(Jr,e=>e?.start);nt(Jr,e=>e?.current);const Kq=nt(Jr,e=>e?.start?.x??null),Zq=nt(Jr,e=>e?.start?.y??null),Jq=nt(Jr,e=>e?.current?.x??null),eX=nt(Jr,e=>e?.current?.y??null);nt(Kq,Zq,Jq,eX,(e,s,a,n)=>e===null||s===null||a===null||n===null?null:{start:{x:e,y:s},current:{x:a,y:n}});const tX=nt(Ls,e=>{let s=!1,a=!1;return e&&Object.entries(e).forEach(([n,r])=>{Object.values(r.series).some(i=>i.layout==="horizontal")&&(s=!0),n==="scatter"&&r.seriesOrder.length>0&&(a=!0)}),a?"xy":s?"y":"x"}),sX=nt(wh,function(s){let a=!1,n=!1;return Object.values(s).forEach(r=>{r.axisDirection==="y"&&(n=!0),r.axisDirection==="x"&&(a=!0)}),a&&n?"xy":n?"y":a?"x":null});nt(tX,sX,(e,s)=>s??e);const BP=nt(Jr,e=>e?.enabled||e?.isZoomBrushEnabled),HP=nt(BP,Jr,(e,s)=>e&&s?.start!==null&&s?.current!==null),cy=nt(Jr,HP,(e,s)=>s&&e?.preventHighlight),aX=nt(Jr,HP,(e,s)=>s&&e?.preventTooltip),Th=({store:e,svgRef:s,instance:a,params:n})=>{const r=gt(e,BP);na(()=>{e.set("brush",Oe({},e.state.brush,{enabled:n.brushConfig.enabled,preventTooltip:n.brushConfig.preventTooltip,preventHighlight:n.brushConfig.preventHighlight}))},[e,n.brushConfig.enabled,n.brushConfig.preventTooltip,n.brushConfig.preventHighlight]);const i=oa(function(m){e.set("brush",Oe({},e.state.brush,{start:e.state.brush.start??m,current:m}))}),l=oa(function(){e.set("brush",Oe({},e.state.brush,{start:null,current:null}))}),c=oa(function(m){e.state.brush.isZoomBrushEnabled!==m&&e.set("brush",Oe({},e.state.brush,{isZoomBrushEnabled:m}))});return g.useEffect(()=>{const d=s.current;if(d===null||!r)return()=>{};const m=p=>{if(p.detail.target?.closest("[data-charts-zoom-slider]"))return;const v=Bf(d,{clientX:p.detail.initialCentroid.x,clientY:p.detail.initialCentroid.y});i(v)},f=p=>{const v=Bf(d,{clientX:p.detail.centroid.x,clientY:p.detail.centroid.y});i(v)},h=a.addInteractionListener("brushStart",m),y=a.addInteractionListener("brush",f),N=a.addInteractionListener("brushCancel",l),w=a.addInteractionListener("brushEnd",l);return()=>{h.cleanup(),y.cleanup(),w.cleanup(),N.cleanup()}},[s,a,e,l,i,r]),{instance:{setBrushCoordinates:i,clearBrush:l,setZoomBrushEnabled:c}}};Th.params={brushConfig:!0};Th.getDefaultizedParams=({params:e})=>Oe({},e,{brushConfig:{enabled:e?.brushConfig?.enabled??!1,preventTooltip:e?.brushConfig?.preventTooltip??!0,preventHighlight:e?.brushConfig?.preventHighlight??!0}});Th.getInitialState=e=>({brush:{enabled:e.brushConfig.enabled,isZoomBrushEnabled:!1,preventTooltip:e.brushConfig.preventTooltip,preventHighlight:e.brushConfig.preventHighlight,start:null,current:null}});const bu=e=>e.controlledCartesianAxisHighlight,GP=(e,s,a,n)=>n?[]:a!==void 0?a.filter(r=>s.axis[r.axisId]!==void 0).map(r=>r):e===null?[]:[{axisId:s.axisIds[0],dataIndex:e}],VP=Bs(u2,Oa,bu,cy,GP);Bs(m2,Ia,bu,cy,GP);const WP=(e,s,a,n,r,i,l)=>{if(l)return[];if(n!==void 0)return n.map(f=>Oe({},f,{value:a.axis[f.axisId]?.data?.[f.dataIndex]})).filter(({value:f})=>f!==void 0);const c=s!==null&&{axisId:a.axisIds[0],dataIndex:e,value:s},d=r&&a.axis[r.axisId]?.data?.[r.dataIndex],m=r&&d!=null&&Oe({},r,{value:d});if(i==="pointer"){if(c)return[c];if(m)return[m]}if(i==="keyboard"){if(m)return[m];if(c)return[c]}return[]},nX=nt(u2,Yq,Oa,bu,Fq,_h,cy,WP),rX=nt(m2,Qq,Ia,bu,Bq,_h,cy,WP),YP=(e,s)=>e===void 0?[s.axis[s.axisIds[0]]]:e.map(n=>s.axis[n.axisId]??null).filter(n=>n!==null);nt(bu,Oa,YP);nt(bu,Ia,YP);function N4(e,s){return e.id!==void 0?e:Oe({id:s},e)}function w4(e){return e.colorMap?Oe({},e,{colorScale:e.colorMap.type==="ordinal"&&e.data?Zd(Oe({values:e.data},e.colorMap)):Ud(e.colorMap.type==="continuous"?Oe({min:e.min,max:e.max},e.colorMap):e.colorMap)}):e}function QP(e,s){if(!e||e.length===0)return{axis:{},axisIds:[]};const a={},n=[];return e.forEach((r,i)=>{const l=r.dataKey,c=r.id??`defaultized-z-axis-${i}`;if(l===void 0||r.data!==void 0){a[c]=w4(N4(r,c)),n.push(c);return}if(s===void 0)throw new Error("MUI X Charts: z-axis uses `dataKey` but no `dataset` is provided.");a[c]=w4(N4(Oe({},r,{data:s.map(d=>d[l])}),c)),n.push(c)}),{axis:a,axisIds:n}}const Eh=({params:e,store:s})=>{const{zAxis:a,dataset:n}=e,r=g.useRef(!0);return g.useEffect(()=>{if(r.current){r.current=!1;return}s.set("zAxis",QP(a,n))},[a,n,s]),{}};Eh.params={zAxis:!0,dataset:!0};Eh.getInitialState=e=>({zAxis:QP(e.zAxis,e.dataset)});const iX=e=>e,lX=nt(iX,e=>e.zAxis),Ah=({store:e,params:s})=>{M5({controlled:s.highlightedItem}),na(()=>{e.state.highlight.item!==s.highlightedItem&&e.set("highlight",Oe({},e.state.highlight,{item:s.highlightedItem}))},[e,s.highlightedItem]);const a=oa(()=>{s.onHighlightChange?.(null);const r=e.getSnapshot().highlight;r.item===null||r.isControlled||e.set("highlight",{item:null,lastUpdate:"pointer",isControlled:!1})}),n=oa(r=>{const i=e.getSnapshot().highlight;i.isControlled||TP(i.item,r)||(s.onHighlightChange?.(r),e.set("highlight",{item:r,lastUpdate:"pointer",isControlled:!1}))});return{instance:{clearHighlight:a,setHighlight:n}}};Ah.getInitialState=e=>({highlight:{item:e.highlightedItem,lastUpdate:"pointer",isControlled:e.highlightedItem!==void 0}});Ah.params={highlightedItem:!0,onHighlightChange:!0};function Rp(e){let s=1/0,a=-1/0;for(const n of e??[])n<s&&(s=n),n>a&&(a=n);return[s,a]}const j4=(e,s)=>s==="x"?{x:e,y:null}:{x:null,y:e},qP=e=>{const{axis:s,getFilters:a,isDefaultAxis:n}=e,r=a?.({currentAxisId:s.id,isDefaultAxis:n}),i=r?s.data?.filter((l,c)=>r({x:null,y:null},c)):s.data;return Rp(i??[])},XP=e=>s=>{const{series:a,axis:n,getFilters:r,isDefaultAxis:i}=s;return Object.keys(a).filter(l=>{const c=e==="x"?a[l].xAxisId:a[l].yAxisId;return c===n.id||i&&c===void 0}).reduce((l,c)=>{const{stackedData:d}=a[c],m=r?.({currentAxisId:n.id,isDefaultAxis:i,seriesXAxisId:a[c].xAxisId,seriesYAxisId:a[c].yAxisId}),[f,h]=d?.reduce((y,N,w)=>m&&(!m(j4(N[0],e),w)||!m(j4(N[1],e),w))?y:[Math.min(...N,y[0]),Math.max(...N,y[1])],[1/0,-1/0])??[1/0,-1/0];return[Math.min(f,l[0]),Math.max(h,l[1])]},[1/0,-1/0])},oX=e=>Object.keys(e.series).some(a=>e.series[a].layout==="horizontal")?XP("x")(e):qP(e),cX=e=>Object.keys(e.series).some(a=>e.series[a].layout==="horizontal")?qP(e):XP("y")(e);function Ft(e){return function(){return e}}const KP=Math.cos,Up=Math.sin,Nr=Math.sqrt,C4=1e-12,zp=Math.PI,ec=2*zp,pC=Math.PI,yC=2*pC,$o=1e-6,dX=yC-$o;function ZP(e){this._+=e[0];for(let s=1,a=e.length;s<a;++s)this._+=arguments[s]+e[s]}function uX(e){let s=Math.floor(e);if(!(s>=0))throw new Error(`invalid digits: ${e}`);if(s>15)return ZP;const a=10**s;return function(n){this._+=n[0];for(let r=1,i=n.length;r<i;++r)this._+=Math.round(arguments[r]*a)/a+n[r]}}class mX{constructor(s){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=s==null?ZP:uX(s)}moveTo(s,a){this._append`M${this._x0=this._x1=+s},${this._y0=this._y1=+a}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(s,a){this._append`L${this._x1=+s},${this._y1=+a}`}quadraticCurveTo(s,a,n,r){this._append`Q${+s},${+a},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(s,a,n,r,i,l){this._append`C${+s},${+a},${+n},${+r},${this._x1=+i},${this._y1=+l}`}arcTo(s,a,n,r,i){if(s=+s,a=+a,n=+n,r=+r,i=+i,i<0)throw new Error(`negative radius: ${i}`);let l=this._x1,c=this._y1,d=n-s,m=r-a,f=l-s,h=c-a,y=f*f+h*h;if(this._x1===null)this._append`M${this._x1=s},${this._y1=a}`;else if(y>$o)if(!(Math.abs(h*d-m*f)>$o)||!i)this._append`L${this._x1=s},${this._y1=a}`;else{let N=n-l,w=r-c,p=d*d+m*m,v=N*N+w*w,C=Math.sqrt(p),j=Math.sqrt(y),_=i*Math.tan((pC-Math.acos((p+y-v)/(2*C*j)))/2),T=_/j,k=_/C;Math.abs(T-1)>$o&&this._append`L${s+T*f},${a+T*h}`,this._append`A${i},${i},0,0,${+(h*N>f*w)},${this._x1=s+k*d},${this._y1=a+k*m}`}}arc(s,a,n,r,i,l){if(s=+s,a=+a,n=+n,l=!!l,n<0)throw new Error(`negative radius: ${n}`);let c=n*Math.cos(r),d=n*Math.sin(r),m=s+c,f=a+d,h=1^l,y=l?r-i:i-r;this._x1===null?this._append`M${m},${f}`:(Math.abs(this._x1-m)>$o||Math.abs(this._y1-f)>$o)&&this._append`L${m},${f}`,n&&(y<0&&(y=y%yC+yC),y>dX?this._append`A${n},${n},0,1,${h},${s-c},${a-d}A${n},${n},0,1,${h},${this._x1=m},${this._y1=f}`:y>$o&&this._append`A${n},${n},0,${+(y>=pC)},${h},${this._x1=s+n*Math.cos(i)},${this._y1=a+n*Math.sin(i)}`)}rect(s,a,n,r){this._append`M${this._x0=this._x1=+s},${this._y0=this._y1=+a}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}}function f2(e){let s=3;return e.digits=function(a){if(!arguments.length)return s;if(a==null)s=null;else{const n=Math.floor(a);if(!(n>=0))throw new RangeError(`invalid digits: ${a}`);s=n}return e},()=>new mX(s)}function dy(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function JP(e){this._context=e}JP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,s){switch(e=+e,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,s):this._context.moveTo(e,s);break;case 1:this._point=2;default:this._context.lineTo(e,s);break}}};function h2(e){return new JP(e)}function eO(e){return e[0]}function tO(e){return e[1]}function sO(e,s){var a=Ft(!0),n=null,r=h2,i=null,l=f2(c);e=typeof e=="function"?e:e===void 0?eO:Ft(e),s=typeof s=="function"?s:s===void 0?tO:Ft(s);function c(d){var m,f=(d=dy(d)).length,h,y=!1,N;for(n==null&&(i=r(N=l())),m=0;m<=f;++m)!(m<f&&a(h=d[m],m,d))===y&&((y=!y)?i.lineStart():i.lineEnd()),y&&i.point(+e(h,m,d),+s(h,m,d));if(N)return i=null,N+""||null}return c.x=function(d){return arguments.length?(e=typeof d=="function"?d:Ft(+d),c):e},c.y=function(d){return arguments.length?(s=typeof d=="function"?d:Ft(+d),c):s},c.defined=function(d){return arguments.length?(a=typeof d=="function"?d:Ft(!!d),c):a},c.curve=function(d){return arguments.length?(r=d,n!=null&&(i=r(n)),c):r},c.context=function(d){return arguments.length?(d==null?n=i=null:i=r(n=d),c):n},c}function fX(e,s,a){var n=null,r=Ft(!0),i=null,l=h2,c=null,d=f2(m);e=typeof e=="function"?e:e===void 0?eO:Ft(+e),s=typeof s=="function"?s:Ft(s===void 0?0:+s),a=typeof a=="function"?a:a===void 0?tO:Ft(+a);function m(h){var y,N,w,p=(h=dy(h)).length,v,C=!1,j,_=new Array(p),T=new Array(p);for(i==null&&(c=l(j=d())),y=0;y<=p;++y){if(!(y<p&&r(v=h[y],y,h))===C)if(C=!C)N=y,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),w=y-1;w>=N;--w)c.point(_[w],T[w]);c.lineEnd(),c.areaEnd()}C&&(_[y]=+e(v,y,h),T[y]=+s(v,y,h),c.point(n?+n(v,y,h):_[y],a?+a(v,y,h):T[y]))}if(j)return c=null,j+""||null}function f(){return sO().defined(r).curve(l).context(i)}return m.x=function(h){return arguments.length?(e=typeof h=="function"?h:Ft(+h),n=null,m):e},m.x0=function(h){return arguments.length?(e=typeof h=="function"?h:Ft(+h),m):e},m.x1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Ft(+h),m):n},m.y=function(h){return arguments.length?(s=typeof h=="function"?h:Ft(+h),a=null,m):s},m.y0=function(h){return arguments.length?(s=typeof h=="function"?h:Ft(+h),m):s},m.y1=function(h){return arguments.length?(a=h==null?null:typeof h=="function"?h:Ft(+h),m):a},m.lineX0=m.lineY0=function(){return f().x(e).y(s)},m.lineY1=function(){return f().x(e).y(a)},m.lineX1=function(){return f().x(n).y(s)},m.defined=function(h){return arguments.length?(r=typeof h=="function"?h:Ft(!!h),m):r},m.curve=function(h){return arguments.length?(l=h,i!=null&&(c=l(i)),m):l},m.context=function(h){return arguments.length?(h==null?i=c=null:c=l(i=h),m):i},m}function hX(e,s){return s<e?-1:s>e?1:s>=e?0:NaN}function gX(e){return e}function xX(){var e=gX,s=hX,a=null,n=Ft(0),r=Ft(ec),i=Ft(0);function l(c){var d,m=(c=dy(c)).length,f,h,y=0,N=new Array(m),w=new Array(m),p=+n.apply(this,arguments),v=Math.min(ec,Math.max(-ec,r.apply(this,arguments)-p)),C,j=Math.min(Math.abs(v)/m,i.apply(this,arguments)),_=j*(v<0?-1:1),T;for(d=0;d<m;++d)(T=w[N[d]=d]=+e(c[d],d,c))>0&&(y+=T);for(s!=null?N.sort(function(k,E){return s(w[k],w[E])}):a!=null&&N.sort(function(k,E){return a(c[k],c[E])}),d=0,h=y?(v-m*_)/y:0;d<m;++d,p=C)f=N[d],T=w[f],C=p+(T>0?T*h:0)+_,w[f]={data:c[f],index:d,value:T,startAngle:p,endAngle:C,padAngle:j};return w}return l.value=function(c){return arguments.length?(e=typeof c=="function"?c:Ft(+c),l):e},l.sortValues=function(c){return arguments.length?(s=c,a=null,l):s},l.sort=function(c){return arguments.length?(a=c,s=null,l):a},l.startAngle=function(c){return arguments.length?(n=typeof c=="function"?c:Ft(+c),l):n},l.endAngle=function(c){return arguments.length?(r=typeof c=="function"?c:Ft(+c),l):r},l.padAngle=function(c){return arguments.length?(i=typeof c=="function"?c:Ft(+c),l):i},l}class aO{constructor(s,a){this._context=s,this._x=a}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(s,a){switch(s=+s,a=+a,this._point){case 0:{this._point=1,this._line?this._context.lineTo(s,a):this._context.moveTo(s,a);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+s)/2,this._y0,this._x0,a,s,a):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+a)/2,s,this._y0,s,a);break}}this._x0=s,this._y0=a}}function pX(e){return new aO(e,!0)}function yX(e){return new aO(e,!1)}const nO={draw(e,s){const a=Nr(s/zp);e.moveTo(a,0),e.arc(0,0,a,0,ec)}},bX={draw(e,s){const a=Nr(s/5)/2;e.moveTo(-3*a,-a),e.lineTo(-a,-a),e.lineTo(-a,-3*a),e.lineTo(a,-3*a),e.lineTo(a,-a),e.lineTo(3*a,-a),e.lineTo(3*a,a),e.lineTo(a,a),e.lineTo(a,3*a),e.lineTo(-a,3*a),e.lineTo(-a,a),e.lineTo(-3*a,a),e.closePath()}},rO=Nr(1/3),vX=rO*2,NX={draw(e,s){const a=Nr(s/vX),n=a*rO;e.moveTo(0,-a),e.lineTo(n,0),e.lineTo(0,a),e.lineTo(-n,0),e.closePath()}},wX={draw(e,s){const a=Nr(s),n=-a/2;e.rect(n,n,a,a)}},jX=.8908130915292852,iO=Up(zp/10)/Up(7*zp/10),CX=Up(ec/10)*iO,SX=-KP(ec/10)*iO,_X={draw(e,s){const a=Nr(s*jX),n=CX*a,r=SX*a;e.moveTo(0,-a),e.lineTo(n,r);for(let i=1;i<5;++i){const l=ec*i/5,c=KP(l),d=Up(l);e.lineTo(d*a,-c*a),e.lineTo(c*n-d*r,d*n+c*r)}e.closePath()}},DN=Nr(3),TX={draw(e,s){const a=-Nr(s/(DN*3));e.moveTo(0,a*2),e.lineTo(-DN*a,-a),e.lineTo(DN*a,-a),e.closePath()}},In=-.5,$n=Nr(3)/2,bC=1/Nr(12),EX=(bC/2+1)*3,AX={draw(e,s){const a=Nr(s/EX),n=a/2,r=a*bC,i=n,l=a*bC+a,c=-i,d=l;e.moveTo(n,r),e.lineTo(i,l),e.lineTo(c,d),e.lineTo(In*n-$n*r,$n*n+In*r),e.lineTo(In*i-$n*l,$n*i+In*l),e.lineTo(In*c-$n*d,$n*c+In*d),e.lineTo(In*n+$n*r,In*r-$n*n),e.lineTo(In*i+$n*l,In*l-$n*i),e.lineTo(In*c+$n*d,In*d-$n*c),e.closePath()}},lO=[nO,bX,NX,wX,_X,TX,AX];function oO(e,s){let a=null,n=f2(r);e=typeof e=="function"?e:Ft(e||nO),s=typeof s=="function"?s:Ft(s===void 0?64:+s);function r(){let i;if(a||(a=i=n()),e.apply(this,arguments).draw(a,+s.apply(this,arguments)),i)return a=null,i+""||null}return r.type=function(i){return arguments.length?(e=typeof i=="function"?i:Ft(i),r):e},r.size=function(i){return arguments.length?(s=typeof i=="function"?i:Ft(+i),r):s},r.context=function(i){return arguments.length?(a=i??null,r):a},r}function S4(e,s,a){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-s),e._y2+e._k*(e._y1-a),e._x2,e._y2)}function g2(e,s){this._context=e,this._k=(1-s)/6}g2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:S4(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,s){switch(e=+e,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,s):this._context.moveTo(e,s);break;case 1:this._point=2,this._x1=e,this._y1=s;break;case 2:this._point=3;default:S4(this,e,s);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=s}};(function e(s){function a(n){return new g2(n,s)}return a.tension=function(n){return e(+n)},a})(0);function LX(e,s,a){var n=e._x1,r=e._y1,i=e._x2,l=e._y2;if(e._l01_a>C4){var c=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,d=3*e._l01_a*(e._l01_a+e._l12_a);n=(n*c-e._x0*e._l12_2a+e._x2*e._l01_2a)/d,r=(r*c-e._y0*e._l12_2a+e._y2*e._l01_2a)/d}if(e._l23_a>C4){var m=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,f=3*e._l23_a*(e._l23_a+e._l12_a);i=(i*m+e._x1*e._l23_2a-s*e._l12_2a)/f,l=(l*m+e._y1*e._l23_2a-a*e._l12_2a)/f}e._context.bezierCurveTo(n,r,i,l,e._x2,e._y2)}function cO(e,s){this._context=e,this._alpha=s}cO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,s){if(e=+e,s=+s,this._point){var a=this._x2-e,n=this._y2-s;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(a*a+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,s):this._context.moveTo(e,s);break;case 1:this._point=2;break;case 2:this._point=3;default:LX(this,e,s);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=s}};const kX=(function e(s){function a(n){return s?new cO(n,s):new g2(n,0)}return a.alpha=function(n){return e(+n)},a})(.5);function _4(e){return e<0?-1:1}function T4(e,s,a){var n=e._x1-e._x0,r=s-e._x1,i=(e._y1-e._y0)/(n||r<0&&-0),l=(a-e._y1)/(r||n<0&&-0),c=(i*r+l*n)/(n+r);return(_4(i)+_4(l))*Math.min(Math.abs(i),Math.abs(l),.5*Math.abs(c))||0}function E4(e,s){var a=e._x1-e._x0;return a?(3*(e._y1-e._y0)/a-s)/2:s}function MN(e,s,a){var n=e._x0,r=e._y0,i=e._x1,l=e._y1,c=(i-n)/3;e._context.bezierCurveTo(n+c,r+c*s,i-c,l-c*a,i,l)}function Fp(e){this._context=e}Fp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:MN(this,this._t0,E4(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,s){var a=NaN;if(e=+e,s=+s,!(e===this._x1&&s===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,s):this._context.moveTo(e,s);break;case 1:this._point=2;break;case 2:this._point=3,MN(this,E4(this,a=T4(this,e,s)),a);break;default:MN(this,this._t0,a=T4(this,e,s));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=s,this._t0=a}}};function dO(e){this._context=new uO(e)}(dO.prototype=Object.create(Fp.prototype)).point=function(e,s){Fp.prototype.point.call(this,s,e)};function uO(e){this._context=e}uO.prototype={moveTo:function(e,s){this._context.moveTo(s,e)},closePath:function(){this._context.closePath()},lineTo:function(e,s){this._context.lineTo(s,e)},bezierCurveTo:function(e,s,a,n,r,i){this._context.bezierCurveTo(s,e,n,a,i,r)}};function A4(e){return new Fp(e)}function DX(e){return new dO(e)}function mO(e){this._context=e}mO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,s=this._y,a=e.length;if(a)if(this._line?this._context.lineTo(e[0],s[0]):this._context.moveTo(e[0],s[0]),a===2)this._context.lineTo(e[1],s[1]);else for(var n=L4(e),r=L4(s),i=0,l=1;l<a;++i,++l)this._context.bezierCurveTo(n[0][i],r[0][i],n[1][i],r[1][i],e[l],s[l]);(this._line||this._line!==0&&a===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,s){this._x.push(+e),this._y.push(+s)}};function L4(e){var s,a=e.length-1,n,r=new Array(a),i=new Array(a),l=new Array(a);for(r[0]=0,i[0]=2,l[0]=e[0]+2*e[1],s=1;s<a-1;++s)r[s]=1,i[s]=4,l[s]=4*e[s]+2*e[s+1];for(r[a-1]=2,i[a-1]=7,l[a-1]=8*e[a-1]+e[a],s=1;s<a;++s)n=r[s]/i[s-1],i[s]-=n,l[s]-=n*l[s-1];for(r[a-1]=l[a-1]/i[a-1],s=a-2;s>=0;--s)r[s]=(l[s]-r[s+1])/i[s];for(i[a-1]=(e[a]+r[a-1])/2,s=0;s<a-1;++s)i[s]=2*e[s+1]-r[s+1];return[r,i]}function MX(e){return new mO(e)}function uy(e,s){this._context=e,this._t=s}uy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,s){switch(e=+e,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,s):this._context.moveTo(e,s);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,s),this._context.lineTo(e,s);else{var a=this._x*(1-this._t)+e*this._t;this._context.lineTo(a,this._y),this._context.lineTo(a,s)}break}}this._x=e,this._y=s}};function PX(e){return new uy(e,.5)}function OX(e){return new uy(e,0)}function IX(e){return new uy(e,1)}function eu(e,s){if((l=e.length)>1)for(var a=1,n,r,i=e[s[0]],l,c=i.length;a<l;++a)for(r=i,i=e[s[a]],n=0;n<c;++n)i[n][1]+=i[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}function tu(e){for(var s=e.length,a=new Array(s);--s>=0;)a[s]=s;return a}function $X(e,s){return e[s]}function RX(e){const s=[];return s.key=e,s}function fO(){var e=Ft([]),s=tu,a=eu,n=$X;function r(i){var l=Array.from(e.apply(this,arguments),RX),c,d=l.length,m=-1,f;for(const h of i)for(c=0,++m;c<d;++c)(l[c][m]=[0,+n(h,l[c].key,m,i)]).data=h;for(c=0,f=dy(s(l));c<d;++c)l[f[c]].index=c;return a(l,f),l}return r.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Ft(Array.from(i)),r):e},r.value=function(i){return arguments.length?(n=typeof i=="function"?i:Ft(+i),r):n},r.order=function(i){return arguments.length?(s=i==null?tu:typeof i=="function"?i:Ft(Array.from(i)),r):s},r.offset=function(i){return arguments.length?(a=i??eu,r):a},r}function UX(e,s){if((n=e.length)>0){for(var a,n,r=0,i=e[0].length,l;r<i;++r){for(l=a=0;a<n;++a)l+=e[a][r][1]||0;if(l)for(a=0;a<n;++a)e[a][r][1]/=l}eu(e,s)}}function zX(e,s){if((d=e.length)>0)for(var a,n=0,r,i,l,c,d,m=e[s[0]].length;n<m;++n)for(l=c=0,a=0;a<d;++a)(i=(r=e[s[a]][n])[1]-r[0])>0?(r[0]=l,r[1]=l+=i):i<0?(r[1]=c,r[0]=c+=i):(r[0]=0,r[1]=i)}function FX(e,s){if((r=e.length)>0){for(var a=0,n=e[s[0]],r,i=n.length;a<i;++a){for(var l=0,c=0;l<r;++l)c+=e[l][a][1]||0;n[a][1]+=n[a][0]=-c/2}eu(e,s)}}function BX(e,s){if(!(!((l=e.length)>0)||!((i=(r=e[s[0]]).length)>0))){for(var a=0,n=1,r,i,l;n<i;++n){for(var c=0,d=0,m=0;c<l;++c){for(var f=e[s[c]],h=f[n][1]||0,y=f[n-1][1]||0,N=(h-y)/2,w=0;w<c;++w){var p=e[s[w]],v=p[n][1]||0,C=p[n-1][1]||0;N+=v-C}d+=h,m+=N*h}r[n-1][1]+=r[n-1][0]=a,d&&(a-=m/d)}r[n-1][1]+=r[n-1][0]=a,eu(e,s)}}function hO(e){var s=e.map(HX);return tu(e).sort(function(a,n){return s[a]-s[n]})}function HX(e){for(var s=-1,a=0,n=e.length,r,i=-1/0;++s<n;)(r=+e[s][1])>i&&(i=r,a=s);return a}function gO(e){var s=e.map(xO);return tu(e).sort(function(a,n){return s[a]-s[n]})}function xO(e){for(var s=0,a=-1,n=e.length,r;++a<n;)(r=+e[a][1])&&(s+=r);return s}function GX(e){return gO(e).reverse()}function VX(e){var s=e.length,a,n,r=e.map(xO),i=hO(e),l=0,c=0,d=[],m=[];for(a=0;a<s;++a)n=i[a],l<c?(l+=r[n],d.push(n)):(c+=r[n],m.push(n));return m.reverse().concat(d)}function WX(e){return tu(e).reverse()}const PN={appearance:hO,ascending:gO,descending:GX,insideOut:VX,none:tu,reverse:WX},ON={expand:UX,diverging:zX,none:eu,silhouette:FX,wiggle:BX},pO=e=>{const{series:s,seriesOrder:a,defaultStrategy:n}=e,r=[],i={};return a.forEach(l=>{const{stack:c,stackOrder:d,stackOffset:m}=s[l];c===void 0?r.push({ids:[l],stackingOrder:PN.none,stackingOffset:ON.none}):i[c]===void 0?(i[c]=r.length,r.push({ids:[l],stackingOrder:PN[d??n?.stackOrder??"none"],stackingOffset:ON[m??n?.stackOffset??"diverging"]})):(r[i[c]].ids.push(l),d!==void 0&&(r[i[c]].stackingOrder=PN[d]),m!==void 0&&(r[i[c]].stackingOffset=ON[m]))}),r},YX=e=>e==null?"":e.toLocaleString(),QX=(e,s)=>{const{seriesOrder:a,series:n}=e,r=pO(e),i=s??[];a.forEach(c=>{const d=n[c].data;if(d!==void 0)d.forEach((m,f)=>{i.length<=f?i.push({[c]:m}):i[f][c]=m});else if(s===void 0)throw new Error([`MUI X Charts: bar series with id='${c}' has no data.`,"Either provide a data property to the series or use the dataset prop."].join(`
`))});const l={};return r.forEach(c=>{const{ids:d,stackingOffset:m,stackingOrder:f}=c,h=fO().keys(d.map(y=>{const N=n[y].dataKey;return n[y].data===void 0&&N!==void 0?N:y})).value((y,N)=>y[N]??0).order(f).offset(m)(i);d.forEach((y,N)=>{const w=n[y].dataKey;l[y]=Oe({layout:"vertical",labelMarkType:"square",minBarSize:0,valueFormatter:n[y].valueFormatter??YX},n[y],{data:w?s.map(p=>{const v=p[w];return typeof v=="number"?v:null}):n[y].data,stackedData:h[N].map(([p,v])=>[p,v])})})}),{seriesOrder:a,stackingGroups:r,series:l}};function pr(e,s){return typeof e=="function"?e(s):e}const qX=e=>{const{seriesOrder:s,series:a}=e;return s.reduce((n,r)=>{const i=pr(a[r].label,"legend");return i===void 0||n.push({markType:a[r].labelMarkType,id:r,seriesId:r,color:a[r].color,label:i}),n},[])};function x2(e){return e.colorGetter?e.colorGetter:()=>e.color}const XX=(e,s,a)=>{const n=e.layout==="vertical",r=n?s?.colorScale:a?.colorScale,i=n?a?.colorScale:s?.colorScale,l=n?s?.data:a?.data,c=x2(e);return i?d=>{if(d===void 0)return e.color;const m=e.data[d],f=m===null?c({value:m,dataIndex:d}):i(m);return f===null?c({value:m,dataIndex:d}):f}:r&&l?d=>{if(d===void 0)return e.color;const m=l[d],f=m===null?c({value:m,dataIndex:d}):r(m);return f===null?c({value:m,dataIndex:d}):f}:d=>{if(d===void 0)return e.color;const m=e.data[d];return c({value:m,dataIndex:d})}},KX=e=>{const{series:s,getColor:a,identifier:n}=e;if(!n||n.dataIndex===void 0)return null;const r=pr(s.label,"tooltip"),i=s.data[n.dataIndex];if(i==null)return null;const l=s.valueFormatter(i,{dataIndex:n.dataIndex});return{identifier:n,color:a(n.dataIndex),label:r,value:i,formattedValue:l,markType:s.labelMarkType}},ZX=e=>Object.values(e).map(s=>s.layout==="horizontal"?{direction:"y",axisId:s.yAxisId}:{direction:"x",axisId:s.xAxisId});function bs(){const e=Sn();if(!e)throw new Error(["MUI X Charts: Could not find the charts context.","It looks like you rendered your component outside of a ChartContainer parent component."].join(`
`));return e.store}function nr(){const e=bs();return gt(e,an)}function my(){const e=bs();return gt(e,nW)}function p2(e){return mP.getTypes().has(e)}const JX=(e,s,a,n,r,i,l)=>{const c=n==="rotation"?r[s].rotationExtremumGetter:r[s].radiusExtremumGetter,d=l[s]?.series??{},[m,f]=c?.({series:d,axis:a,axisIndex:i,isDefaultAxis:i===0})??[1/0,-1/0],[h,y]=e;return[Math.min(m,h),Math.max(f,y)]},eK=(e,s,a,n,r)=>{const l=Object.keys(a).filter(p2).reduce((c,d)=>JX(c,d,e,s,a,n,r),[1/0,-1/0]);return Number.isNaN(l[0])||Number.isNaN(l[1])?[1/0,-1/0]:l},Dl=(e,s)=>e===void 0?s:Math.PI*e/180,tK=(e,s,a,n)=>{const r=new Set;return Object.keys(s).filter(p2).forEach(l=>{const c=a[l]?.series??{},d=s[l].axisTooltipGetter?.(c);d!==void 0&&d.forEach(({axisId:m,direction:f})=>{f===e&&r.add(m??n)})}),r};function sK(e,s,a){if(s==="rotation"){if(a.scaleType==="point"){const n=[Dl(a.startAngle,0),Dl(a.endAngle,2*Math.PI)],r=n[1]-n[0];return r>Math.PI*2-.1&&(n[1]-=r/a.data.length),n}return[Dl(a.startAngle,0),Dl(a.endAngle,2*Math.PI)]}return[0,Math.min(e.height,e.width)/2]}const aK=.2,nK=.1;function yO({drawingArea:e,formattedSeries:s,axis:a,seriesConfig:n,axisDirection:r}){if(a===void 0)return{axis:{},axisIds:[]};const i=tK(r,n,s,a[0].id),l={};return a.forEach((c,d)=>{const m=c,f=sK(e,r,m),[h,y]=eK(m,r,n,d,s),N=!m.ignoreTooltip&&i.has(m.id),w=m.data??[];if(pc(m)){const B=m.categoryGapRatio??aK,X=m.barGapRatio??nK;if(l[m.id]=Oe({offset:0,categoryGapRatio:B,barGapRatio:X,triggerTooltip:N},m,{data:w,scale:J0(m.data,f).paddingInner(B).paddingOuter(B/2),tickNumber:m.data.length,colorScale:m.colorMap&&(m.colorMap.type==="ordinal"?Zd(Oe({values:m.data},m.colorMap)):Ud(m.colorMap))}),fC(m.data)){const $=hC(m.data,f,m.tickNumber);l[m.id].valueFormatter=m.valueFormatter??$}}if(yc(m)&&(l[m.id]=Oe({offset:0,triggerTooltip:N},m,{data:w,scale:dP(m.data,f),tickNumber:m.data.length,colorScale:m.colorMap&&(m.colorMap.type==="ordinal"?Zd(Oe({values:m.data},m.colorMap)):Ud(m.colorMap))}),fC(m.data))){const B=hC(m.data,f,m.tickNumber);l[m.id].valueFormatter=m.valueFormatter??B}if(!LW(m))return;const p=m.scaleType??"linear",v=m.domainLimit??"nice",C=[m.min??h,m.max??y];if(typeof v=="function"){const{min:B,max:X}=v(h,y);C[0]=B,C[1]=X}const j=oP(m,C,l2(Math.abs(f[1]-f[0]))),_=cP(j,f),T=ey(p,C,f),k=v==="nice"?T.nice(j):T,[E,A]=k.domain(),U=[m.min??E,m.max??A];l[m.id]=Oe({offset:0,triggerTooltip:N},m,{data:w,scaleType:p,scale:k.domain(U),tickNumber:_,colorScale:m.colorMap&&Ud(m.colorMap)})}),{axis:l,axisIds:a.map(({id:c})=>c)}}const bO=e=>e.polarAxis,vO=nt(bO,e=>e?.rotation),rK=nt(bO,e=>e?.radius),wc=nt(vO,an,Ls,Cn,(e,s,a,n)=>yO({drawingArea:s,formattedSeries:a,axis:e,seriesConfig:n,axisDirection:"rotation"}));nt(rK,an,Ls,Cn,(e,s,a,n)=>yO({drawingArea:s,formattedSeries:a,axis:e,seriesConfig:n,axisDirection:"radius"}));const iK=nt(an,e=>({cx:e.left+e.width/2,cy:e.top+e.height/2})),lK=e=>(s,a)=>Math.atan2(s-e.cx,e.cy-a);function fy(e){return(e%360+360)%360}const IN=2*Math.PI;function oK(e){return(e%IN+IN)%IN}function k4(e,s){const{scale:a,data:n,reverse:r}=e;if(!da(a))throw new Error("MUI X Charts: getAxisValue is not implemented for polare continuous axes.");if(!n)return-1;const i=oK(s-Math.min(...a.range())),l=a.bandwidth()===0?Math.floor((i+a.step()/2)/a.step())%n.length:Math.floor(i/a.step());return l<0||l>=n.length?-1:r?n.length-1-l:l}function nn(){const e=bs(),{axis:s,axisIds:a}=gt(e,Oa);return{xAxis:s,xAxisIds:a}}function rn(){const e=bs(),{axis:s,axisIds:a}=gt(e,Ia);return{yAxis:s,yAxisIds:a}}function cK(e){const s=bs(),{axis:a,axisIds:n}=gt(s,Oa),r=n[0];return a[r]}function dK(e){const s=bs(),{axis:a,axisIds:n}=gt(s,Ia),r=n[0];return a[r]}function NO(){const e=bs(),{axis:s,axisIds:a}=gt(e,wc);return{rotationAxis:s,rotationAxisIds:a}}function uK(e){const s=bs(),{axis:a,axisIds:n}=gt(s,wc),r=n[0];return a[r]}function vu(e){if(da(e))return a=>(e(a)??0)+e.bandwidth()/2;const s=e.domain();return s[0]===s[1]?a=>a===s[0]?e(a):NaN:a=>e(a)}function y2(){const e=bs(),{axis:s,axisIds:a}=gt(e,lX)??{axis:{},axisIds:[]};return{zAxis:s,zAxisIds:a}}function b2(){const e=Sn();if(!e)throw new Error(["MUI X Charts: Could not find the svg ref context.","It looks like you rendered your component outside of a ChartContainer parent component."].join(`
`));return e.svgRef}function hy(){const e=bs();return gt(e,Ls)}const mK=nt(Ls,(e,s)=>e[s]);Bs(Ls,(e,s,a)=>{if(!a||Array.isArray(a)&&a.length===0)return e[s]?.seriesOrder?.map(r=>e[s]?.series[r])??[];if(!Array.isArray(a))return e[s]?.series?.[a];const n=[];for(const r of a){const i=e[s]?.series?.[r];i&&n.push(i)}return n});const fK=e=>{const s=bs();return gt(s,mK,e)};function Lh(){return fK("line")}function hK(){return!1}function wO(e,s){return!e||!s?hK:function(n){return n?e.highlight==="series"?n.seriesId===s.seriesId:e.highlight==="item"?n.dataIndex===s.dataIndex&&n.seriesId===s.seriesId:!1:!1}}function gK(){return!1}function jO(e,s){return!e||!s?gK:function(n){return n?e.fade==="series"?n.seriesId===s.seriesId&&n.dataIndex!==s.dataIndex:e.fade==="global"?n.seriesId!==s.seriesId||n.dataIndex!==s.dataIndex:!1:!1}}function v2(e,s,a){return e?.highlight==="series"&&s?.seriesId===a}function xK(e,s,a){return v2(e,s,a)?!1:e?.fade==="global"&&s!=null||e?.fade==="series"&&s?.seriesId===a}function CO(e,s,a){return e?.highlight==="item"&&s?.seriesId===a?s.dataIndex:null}function pK(e,s,a){return v2(e,s,a)||CO(e,s,a)===s?.dataIndex?null:(e?.fade==="series"||e?.fade==="global")&&s?.seriesId===a?s.dataIndex:null}const yK=e=>e.highlight,bK=nt(Ls,e=>{const s=new Map;return Object.keys(e).forEach(a=>{const n=e[a];n?.seriesOrder?.forEach(r=>{const i=n?.series[r];s.set(r,i?.highlightScope)})}),s}),Zi=Bs(yK,OP,function(s,a){return s.isControlled||s.lastUpdate==="pointer"?s.item:a}),ql=nt(bK,Zi,function(s,a){if(!a)return null;const n=s.get(a.seriesId);return n===void 0?null:n}),vK=nt(ql,Zi,wO),NK=nt(ql,Zi,jO),wK=nt(ql,Zi,function(s,a,n){return wO(s,a)(n)});nt(ql,Zi,v2);nt(ql,Zi,xK);nt(ql,Zi,pK);nt(ql,Zi,CO);const jK=nt(ql,Zi,function(s,a,n){return jO(s,a)(n)});function SO(e){const s=bs(),a=gt(s,wK,e),n=gt(s,jK,e);return{isHighlighted:a,isFaded:!a&&n}}function CK(){const e=bs(),s=gt(e,vK),a=gt(e,NK);return{isHighlighted:s,isFaded:a}}function SK(e,s){return Object.keys(e).flatMap(a=>{const n=s[a].legendGetter;return n===void 0?[]:n(e[a])})}function _K(){const e=hy(),s=bs(),a=gt(s,Cn);return{items:SK(e,a)}}function N2(){const e=my();return g.useCallback(s=>`${e}-gradient-${s}`,[e])}function TK(){const e=my();return g.useCallback(s=>`${e}-gradient-${s}-object-bound`,[e])}var $N,D4;function EK(){if(D4)return $N;D4=1;var e=4,s=.001,a=1e-7,n=10,r=11,i=1/(r-1),l=typeof Float32Array=="function";function c(p,v){return 1-3*v+3*p}function d(p,v){return 3*v-6*p}function m(p){return 3*p}function f(p,v,C){return((c(v,C)*p+d(v,C))*p+m(v))*p}function h(p,v,C){return 3*c(v,C)*p*p+2*d(v,C)*p+m(v)}function y(p,v,C,j,_){var T,k,E=0;do k=v+(C-v)/2,T=f(k,j,_)-p,T>0?C=k:v=k;while(Math.abs(T)>a&&++E<n);return k}function N(p,v,C,j){for(var _=0;_<e;++_){var T=h(v,C,j);if(T===0)return v;var k=f(v,C,j)-p;v-=k/T}return v}function w(p){return p}return $N=function(v,C,j,_){if(!(0<=v&&v<=1&&0<=j&&j<=1))throw new Error("bezier x values must be in [0, 1] range");if(v===C&&j===_)return w;for(var T=l?new Float32Array(r):new Array(r),k=0;k<r;++k)T[k]=f(k*i,v,j);function E(A){for(var U=0,B=1,X=r-1;B!==X&&T[B]<=A;++B)U+=i;--B;var $=(A-T[B])/(T[B+1]-T[B]),O=U+$*i,G=h(O,v,j);return G>=s?N(A,O,v,j):G===0?O:y(A,U,U+i,v,j)}return function(U){return U===0?0:U===1?1:f(E(U),C,_)}},$N}var AK=EK();const LK=KC(AK),gy=300,w2="cubic-bezier(0.66, 0, 0.34, 1)",kK=LK(.66,0,.34,1);var su=0,mf=0,Nm=0,_O=1e3,Bp,ff,Hp=0,dc=0,xy=0,Hf=typeof performance=="object"&&performance.now?performance:Date,TO=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function j2(){return dc||(TO(DK),dc=Hf.now()+xy)}function DK(){dc=0}function Gp(){this._call=this._time=this._next=null}Gp.prototype=EO.prototype={constructor:Gp,restart:function(e,s,a){if(typeof e!="function")throw new TypeError("callback is not a function");a=(a==null?j2():+a)+(s==null?0:+s),!this._next&&ff!==this&&(ff?ff._next=this:Bp=this,ff=this),this._call=e,this._time=a,vC()},stop:function(){this._call&&(this._call=null,this._time=1/0,vC())}};function EO(e,s,a){var n=new Gp;return n.restart(e,s,a),n}function MK(){j2(),++su;for(var e=Bp,s;e;)(s=dc-e._time)>=0&&e._call.call(void 0,s),e=e._next;--su}function M4(){dc=(Hp=Hf.now())+xy,su=mf=0;try{MK()}finally{su=0,OK(),dc=0}}function PK(){var e=Hf.now(),s=e-Hp;s>_O&&(xy-=s,Hp=e)}function OK(){for(var e,s=Bp,a,n=1/0;s;)s._call?(n>s._time&&(n=s._time),e=s,s=s._next):(a=s._next,s._next=null,s=e?e._next=a:Bp=a);ff=e,vC(n)}function vC(e){if(!su){mf&&(mf=clearTimeout(mf));var s=e-dc;s>24?(e<1/0&&(mf=setTimeout(M4,e-Hf.now()-xy)),Nm&&(Nm=clearInterval(Nm))):(Nm||(Hp=Hf.now(),Nm=setInterval(PK,_O)),su=1,TO(M4))}}function IK(e,s,a){var n=new Gp;return s=s==null?0:+s,n.restart(r=>{n.stop(),e(r+s)},s,a),n}class $K{elapsed=0;timer=null;constructor(s,a,n){this.duration=s,this.easingFn=a,this.onTickCallback=n,this.resume()}get running(){return this.timer!==null}timerCallback(s){this.elapsed=Math.min(s,this.duration);const a=this.duration===0?1:this.elapsed/this.duration,n=this.easingFn(a);this.onTickCallback(n),this.elapsed>=this.duration&&this.stop()}resume(){if(this.running||this.elapsed>=this.duration)return this;const s=j2()-this.elapsed;return this.timer=EO(a=>this.timerCallback(a),0,s),this}stop(){return this.running?(this.timer&&(this.timer.stop(),this.timer=null),this):this}finish(){return this.stop(),IK(()=>this.timerCallback(this.duration)),this}}function RK(e,s){if(Object.is(e,s))return!0;if(typeof e!="object"||e===null||typeof s!="object"||s===null)return!1;const a=Object.keys(e),n=Object.keys(s);if(a.length!==n.length)return!1;for(let r=0;r<a.length;r+=1){const i=a[r];if(!Object.prototype.hasOwnProperty.call(s,i)||!Object.is(e[i],s[i]))return!1}return!0}function UK(e,{createInterpolator:s,applyProps:a,skip:n,initialProps:r=e}){const i=g.useRef(r),l=g.useRef(null),c=g.useRef(null),d=g.useRef(e);na(()=>{d.current=e},[e]),na(()=>{n&&(l.current?.finish(),l.current=null,c.current=null,i.current=e)},[e,n]);const m=g.useCallback(h=>{const y=i.current,N=s(y,e);l.current=new $K(gy,kK,w=>{const p=N(w);i.current=p,a(h,p)})},[a,s,e]);return[g.useCallback(h=>{if(h===null){l.current?.stop();return}const y=c.current;if(y===h){if(RK(d.current,e)){l.current?.resume();return}l.current?.stop()}y&&l.current?.stop(),c.current=h,(l.current||!n)&&m(h)},[m,e,n]),i.current]}function AO(e,{createInterpolator:s,transformProps:a,applyProps:n,skip:r,initialProps:i=e,ref:l}){const c=a??(h=>h),[d,m]=UK(e,{initialProps:i,createInterpolator:s,applyProps:(h,y)=>n(h,c(y)),skip:r}),f=a(r?e:m);return Oe({},f,{ref:Qr(d,l)})}function zK(e){return AO({d:e.d},{createInterpolator:(s,a)=>{const n=Q1(s.d,a.d);return r=>({d:n(r)})},applyProps:(s,{d:a})=>s.setAttribute("d",a),transformProps:s=>s,skip:e.skipAnimation,ref:e.ref})}function FK(e){return AO({d:e.d},{createInterpolator:(s,a)=>{const n=Q1(s.d,a.d);return r=>({d:n(r)})},applyProps:(s,{d:a})=>s.setAttribute("d",a),skip:e.skipAnimation,transformProps:s=>s,ref:e.ref})}function BK(){return Sn().chartRootRef}const HK={"image/png":"PNG","image/jpeg":"JPEG","image/webp":"WebP"},GK=e=>({components:{MuiChartsLocalizationProvider:{defaultProps:{localeText:Oe({},e)}}}}),LO={loading:"Loading data",noData:"No data to display",zoomIn:"Zoom in",zoomOut:"Zoom out",toolbarExport:"Export",toolbarExportPrint:"Print",toolbarExportImage:e=>`Export as ${HK[e]??e}`,chartTypeBar:"Bar",chartTypeColumn:"Column",chartTypeLine:"Line",chartTypeArea:"Area",chartTypePie:"Pie",chartPaletteLabel:"Color palette",chartPaletteNameRainbowSurge:"Rainbow Surge",chartPaletteNameBlueberryTwilight:"Blueberry Twilight",chartPaletteNameMangoFusion:"Mango Fusion",chartPaletteNameCheerfulFiesta:"Cheerful Fiesta",chartPaletteNameStrawberrySky:"Strawberry Sky",chartPaletteNameBlue:"Blue",chartPaletteNameGreen:"Green",chartPaletteNamePurple:"Purple",chartPaletteNameRed:"Red",chartPaletteNameOrange:"Orange",chartPaletteNameYellow:"Yellow",chartPaletteNameCyan:"Cyan",chartPaletteNamePink:"Pink",chartConfigurationSectionChart:"Chart",chartConfigurationSectionColumns:"Columns",chartConfigurationSectionBars:"Bars",chartConfigurationSectionAxes:"Axes",chartConfigurationGrid:"Grid",chartConfigurationBorderRadius:"Border radius",chartConfigurationCategoryGapRatio:"Category gap ratio",chartConfigurationBarGapRatio:"Series gap ratio",chartConfigurationStacked:"Stacked",chartConfigurationShowToolbar:"Show toolbar",chartConfigurationSkipAnimation:"Skip animation",chartConfigurationInnerRadius:"Inner radius",chartConfigurationOuterRadius:"Outer radius",chartConfigurationColors:"Colors",chartConfigurationHideLegend:"Hide legend",chartConfigurationShowMark:"Show mark",chartConfigurationHeight:"Height",chartConfigurationWidth:"Width",chartConfigurationSeriesGap:"Series gap",chartConfigurationTickPlacement:"Tick placement",chartConfigurationTickLabelPlacement:"Tick label placement",chartConfigurationCategoriesAxisLabel:"Categories axis label",chartConfigurationSeriesAxisLabel:"Series axis label",chartConfigurationXAxisPosition:"X-axis position",chartConfigurationYAxisPosition:"Y-axis position",chartConfigurationSeriesAxisReverse:"Reverse series axis",chartConfigurationTooltipPlacement:"Placement",chartConfigurationTooltipTrigger:"Trigger",chartConfigurationLegendPosition:"Position",chartConfigurationLegendDirection:"Direction",chartConfigurationBarLabels:"Bar labels",chartConfigurationColumnLabels:"Column labels",chartConfigurationInterpolation:"Interpolation",chartConfigurationSectionTooltip:"Tooltip",chartConfigurationSectionLegend:"Legend",chartConfigurationSectionLines:"Lines",chartConfigurationSectionAreas:"Areas",chartConfigurationSectionArcs:"Arcs",chartConfigurationPaddingAngle:"Padding angle",chartConfigurationCornerRadius:"Corner radius",chartConfigurationArcLabels:"Arc labels",chartConfigurationStartAngle:"Start angle",chartConfigurationEndAngle:"End angle",chartConfigurationPieTooltipTrigger:"Trigger",chartConfigurationPieLegendPosition:"Position",chartConfigurationPieLegendDirection:"Direction",chartConfigurationOptionNone:"None",chartConfigurationOptionValue:"Value",chartConfigurationOptionAuto:"Auto",chartConfigurationOptionTop:"Top",chartConfigurationOptionTopLeft:"Top Left",chartConfigurationOptionTopRight:"Top Right",chartConfigurationOptionBottom:"Bottom",chartConfigurationOptionBottomLeft:"Bottom Left",chartConfigurationOptionBottomRight:"Bottom Right",chartConfigurationOptionLeft:"Left",chartConfigurationOptionRight:"Right",chartConfigurationOptionAxis:"Axis",chartConfigurationOptionItem:"Item",chartConfigurationOptionHorizontal:"Horizontal",chartConfigurationOptionVertical:"Vertical",chartConfigurationOptionBoth:"Both",chartConfigurationOptionStart:"Start",chartConfigurationOptionMiddle:"Middle",chartConfigurationOptionEnd:"End",chartConfigurationOptionExtremities:"Extremities",chartConfigurationOptionTick:"Tick",chartConfigurationOptionMonotoneX:"Monotone X",chartConfigurationOptionMonotoneY:"Monotone Y",chartConfigurationOptionCatmullRom:"Catmull-Rom",chartConfigurationOptionLinear:"Linear",chartConfigurationOptionNatural:"Natural",chartConfigurationOptionStep:"Step",chartConfigurationOptionStepBefore:"Step Before",chartConfigurationOptionStepAfter:"Step After",chartConfigurationOptionBumpX:"Bump X",chartConfigurationOptionBumpY:"Bump Y"},VK=LO;GK(LO);const WK=["localeText"],NC=g.createContext(null);function YK(e){const{localeText:s}=e,a=$t(e,WK),{localeText:n}=g.useContext(NC)??{localeText:void 0},r=ar({props:a,name:"MuiChartsLocalizationProvider"}),{children:i,localeText:l}=r,c=g.useMemo(()=>Oe({},VK,l,n,s),[l,n,s]),d=g.useMemo(()=>({localeText:c}),[c]);return t.jsx(NC.Provider,{value:d,children:i})}const kO=()=>{const e=g.useContext(NC);if(e===null)throw new Error(["MUI X Charts: Can not find the charts localization context.","It looks like you forgot to wrap your component in ChartsLocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-charts` package"].join(`
`));return e};function QK({bandWidth:e,numberOfGroups:s,gapRatio:a}){if(a===0)return{barWidth:e/s,offset:0};const n=e/(s+(s-1)*a),r=a*n;return{barWidth:n,offset:r}}function qK(e,s,a){const n=e&&s>0,r=!e&&s<0,i=n||r;return a?!i:i}function XK(e){const{verticalLayout:s,xAxisConfig:a,yAxisConfig:n,series:r,dataIndex:i,numberOfGroups:l,groupIndex:c}=e,d=s?a:n,m=(s?n.reverse:a.reverse)??!1,{barWidth:f,offset:h}=QK({bandWidth:d.scale.bandwidth(),numberOfGroups:l,gapRatio:d.barGapRatio}),y=c*(f+h),N=a.scale,w=n.scale,p=d.data[i],v=r.data[i];if(v==null)return null;const j=r.stackedData[i].map(A=>s?w(A):N(A)),_=Math.round(Math.min(...j)),T=Math.round(Math.max(...j)),k=v===0?0:Math.max(r.minBarSize,T-_),E=qK(s,v,m)?T-k:_;return{x:s?N(p)+y:E,y:s?E:w(p)+y,height:s?k:f,width:s?f:k}}const KK=e=>{const{series:s,identifier:a,axesConfig:n,placement:r}=e;if(!a||a.dataIndex===void 0)return null;const i=s.bar?.series[a.seriesId];if(s.bar==null||i==null||n.x===void 0||n.y===void 0)return null;const l=XK({verticalLayout:i.layout==="vertical",xAxisConfig:n.x,yAxisConfig:n.y,series:i,dataIndex:a.dataIndex,numberOfGroups:s.bar.stackingGroups.length,groupIndex:s.bar.stackingGroups.findIndex(h=>h.ids.includes(i.id))});if(l==null)return null;const{x:c,y:d,width:m,height:f}=l;switch(r){case"right":return{x:c+m,y:d+f/2};case"bottom":return{x:c+m/2,y:d+f};case"left":return{x:c,y:d+f/2};case"top":default:return{x:c+m/2,y:d}}},ZK=(e,s,a)=>Oe({},e,{id:e.id??`auto-generated-id-${s}`,color:e.color??a[s%a.length]}),JK={seriesProcessor:QX,colorProcessor:XX,legendGetter:qX,tooltipGetter:KX,tooltipItemPositionGetter:KK,axisTooltipGetter:ZX,xExtremumGetter:oX,yExtremumGetter:cX,getSeriesWithDefaultValues:ZK},eZ=e=>{const{series:s,axis:a,isDefaultAxis:n,getFilters:r}=e;let i=1/0,l=-1/0;for(const c in s){if(!Object.hasOwn(s,c))continue;const d=s[c].xAxisId;if(!(d===a.id||d===void 0&&n))continue;const m=r?.({currentAxisId:a.id,isDefaultAxis:n,seriesXAxisId:s[c].xAxisId,seriesYAxisId:s[c].yAxisId}),f=s[c].data??[];for(let h=0;h<f.length;h+=1){const y=f[h];m&&!m(y,h)||y.x!==null&&(y.x<i&&(i=y.x),y.x>l&&(l=y.x))}}return[i,l]},tZ=e=>{const{series:s,axis:a,isDefaultAxis:n,getFilters:r}=e;let i=1/0,l=-1/0;for(const c in s){if(!Object.hasOwn(s,c))continue;const d=s[c].yAxisId;if(!(d===a.id||d===void 0&&n))continue;const m=r?.({currentAxisId:a.id,isDefaultAxis:n,seriesXAxisId:s[c].xAxisId,seriesYAxisId:s[c].yAxisId}),f=s[c].data??[];for(let h=0;h<f.length;h+=1){const y=f[h];m&&!m(y,h)||y.y!==null&&(y.y<i&&(i=y.y),y.y>l&&(l=y.y))}}return[i,l]},sZ=({series:e,seriesOrder:s},a)=>({series:Object.fromEntries(Object.entries(e).map(([r,i])=>{const l=i?.datasetKeys,c=["x","y"].filter(m=>typeof l?.[m]!="string");if(i?.datasetKeys&&c.length>0)throw new Error([`MUI X Charts: scatter series with id='${r}' has incomplete datasetKeys.`,`Properties ${c.map(m=>`"${m}"`).join(", ")} are missing.`].join(`
`));const d=l?a?.map(m=>({x:m[l.x]??null,y:m[l.y]??null,z:l.z&&m[l.z],id:l.id&&m[l.id]}))??[]:i.data??[];return[r,Oe({labelMarkType:"circle",markerSize:4},i,{preview:Oe({markerSize:1},i?.preview),data:d,valueFormatter:i.valueFormatter??(m=>m&&`(${m.x}, ${m.y})`)})]})),seriesOrder:s}),aZ=(e,s,a,n)=>{const r=n?.colorScale,i=a?.colorScale,l=s?.colorScale,c=x2(e);return r?d=>{if(d===void 0)return e.color;if(n?.data?.[d]!==void 0){const h=r(n?.data?.[d]);if(h!==null)return h}const m=e.data[d],f=m===null?c({value:m,dataIndex:d}):r(m.z);return f===null?c({value:m,dataIndex:d}):f}:i?d=>{if(d===void 0)return e.color;const m=e.data[d],f=m===null?c({value:m,dataIndex:d}):i(m.y);return f===null?c({value:m,dataIndex:d}):f}:l?d=>{if(d===void 0)return e.color;const m=e.data[d],f=m===null?c({value:m,dataIndex:d}):l(m.x);return f===null?c({value:m,dataIndex:d}):f}:d=>{if(d===void 0)return e.color;const m=e.data[d];return c({value:m,dataIndex:d})}},nZ=e=>{const{seriesOrder:s,series:a}=e;return s.reduce((n,r)=>{const i=pr(a[r].label,"legend");return i===void 0||n.push({markType:a[r].labelMarkType,id:r,seriesId:r,color:a[r].color,label:i}),n},[])},rZ=e=>{const{series:s,getColor:a,identifier:n}=e;if(!n||n.dataIndex===void 0)return null;const r=pr(s.label,"tooltip"),i=s.data[n.dataIndex],l=s.valueFormatter(i,{dataIndex:n.dataIndex});return{identifier:n,color:a(n.dataIndex),label:r,value:i,formattedValue:l,markType:s.labelMarkType}},iZ=(e,s,a)=>Oe({},e,{id:e.id??`auto-generated-id-${s}`,color:e.color??a[s%a.length]}),lZ=e=>{const{series:s,identifier:a,axesConfig:n}=e;if(!a||a.dataIndex===void 0)return null;const r=s.scatter?.series[a.seriesId];if(r==null||n.x===void 0||n.y===void 0)return null;const i=r.data?.[a.dataIndex].x,l=r.data?.[a.dataIndex].y;return i==null||l==null?null:{x:n.x.scale(i),y:n.y.scale(l)}},oZ={seriesProcessor:sZ,colorProcessor:aZ,legendGetter:nZ,tooltipGetter:rZ,tooltipItemPositionGetter:lZ,xExtremumGetter:eZ,yExtremumGetter:tZ,getSeriesWithDefaultValues:iZ},cZ=e=>{const{axis:s}=e;return Rp(s.data??[])};function dZ(e,s,a,n){return a.reduce((r,i,l)=>{if(s[l]===null)return r;const[c,d]=e(i);return n&&(!n({y:c,x:null},l)||!n({y:d,x:null},l))?r:[Math.min(c,d,r[0]),Math.max(c,d,r[1])]},[1/0,-1/0])}const uZ=e=>{const{series:s,axis:a,isDefaultAxis:n,getFilters:r}=e;return Object.keys(s).filter(i=>{const l=s[i].yAxisId;return l===a.id||n&&l===void 0}).reduce((i,l)=>{const{area:c,stackedData:d,data:m}=s[l],f=c!==void 0,h=r?.({currentAxisId:a.id,isDefaultAxis:n,seriesXAxisId:s[l].xAxisId,seriesYAxisId:s[l].yAxisId}),y=f&&a.scaleType!=="log"&&typeof s[l].baseline!="string"?v=>v:v=>[v[1],v[1]],N=dZ(y,m,d,h),[w,p]=N;return[Math.min(w,i[0]),Math.max(p,i[1])]},[1/0,-1/0])};function mZ(e,s){const a={};return Object.keys(e).forEach(n=>{a[n]=Oe({},e[n],{valueFormatter:e[n].valueFormatter??s})}),a}const fZ=(e,s)=>{const{seriesOrder:a,series:n}=e,r=pO(Oe({},e,{defaultStrategy:{stackOffset:"none"}})),i=s??[];a.forEach(c=>{const d=n[c].data;d!==void 0&&d.forEach((m,f)=>{i.length<=f?i.push({[c]:m}):i[f][c]=m})});const l={};return r.forEach(c=>{const{ids:d,stackingOrder:m,stackingOffset:f}=c,h=fO().keys(d.map(y=>{const N=n[y].dataKey;return n[y].data===void 0&&N!==void 0?N:y})).value((y,N)=>y[N]??0).order(m).offset(f)(i);d.forEach((y,N)=>{const w=n[y].dataKey;l[y]=Oe({labelMarkType:"line"},n[y],{data:w?s.map(p=>{const v=p[w];return typeof v=="number"?v:null}):n[y].data,stackedData:h[N].map(([p,v])=>[p,v])})})}),{seriesOrder:a,stackingGroups:r,series:mZ(l,c=>c==null?"":c.toLocaleString())}},C2=(e,s,a)=>{const n=a?.colorScale,r=s?.colorScale,i=x2(e);return n?l=>{if(l===void 0)return e.color;const c=e.data[l],d=c===null?i({value:c,dataIndex:l}):n(c);return d===null?i({value:c,dataIndex:l}):d}:r?l=>{if(l===void 0)return e.color;const c=s.data?.[l],d=c===null?i({value:c,dataIndex:l}):r(c);return d===null?i({value:c,dataIndex:l}):d}:l=>{if(l===void 0)return e.color;const c=e.data[l];return i({value:c,dataIndex:l})}},hZ=e=>{const{seriesOrder:s,series:a}=e;return s.reduce((n,r)=>{const i=pr(a[r].label,"legend");return i===void 0||n.push({markType:a[r].labelMarkType,id:r,seriesId:r,color:a[r].color,label:i}),n},[])},gZ=e=>{const{series:s,getColor:a,identifier:n}=e;if(!n||n.dataIndex===void 0)return null;const r=pr(s.label,"tooltip"),i=s.data[n.dataIndex],l=s.valueFormatter(i,{dataIndex:n.dataIndex});return{identifier:n,color:a(n.dataIndex),label:r,value:i,formattedValue:l,markType:s.labelMarkType}},xZ=e=>Object.values(e).map(s=>({direction:"x",axisId:s.xAxisId})),pZ=(e,s,a)=>Oe({},e,{id:e.id??`auto-generated-id-${s}`,color:e.color??a[s%a.length]}),yZ=e=>{const{series:s,identifier:a,axesConfig:n}=e;if(!a||a.dataIndex===void 0)return null;const r=s.line?.series[a.seriesId];if(r==null||n.x===void 0||n.y===void 0)return null;const i=n.x.data?.[a.dataIndex],l=r.data[a.dataIndex];return i==null||l==null?null:{x:n.x.scale(i),y:n.y.scale(l)}},bZ={colorProcessor:C2,seriesProcessor:fZ,legendGetter:hZ,tooltipGetter:gZ,tooltipItemPositionGetter:yZ,axisTooltipGetter:xZ,xExtremumGetter:cZ,yExtremumGetter:uZ,getSeriesWithDefaultValues:pZ},vZ=(e="none")=>{if(typeof e=="function")return e;switch(e){case"none":return null;case"desc":return(s,a)=>a-s;case"asc":return(s,a)=>s-a;default:return null}},NZ=e=>{const{seriesOrder:s,series:a}=e,n={};return s.forEach(r=>{const i=xX().startAngle(Dl(a[r].startAngle??0)).endAngle(Dl(a[r].endAngle??360)).padAngle(Dl(a[r].paddingAngle??0)).sortValues(vZ(a[r].sortingValues??"none"))(a[r].data.map(l=>l.value));n[r]=Oe({labelMarkType:"circle",valueFormatter:l=>l.value.toLocaleString()},a[r],{data:a[r].data.map((l,c)=>Oe({},l,{id:l.id??`auto-generated-pie-id-${r}-${c}`},i[c])).map((l,c)=>Oe({labelMarkType:"circle"},l,{formattedValue:a[r].valueFormatter?.(Oe({},l,{label:pr(l.label,"arc")}),{dataIndex:c})??l.value.toLocaleString()}))})}),{seriesOrder:s,series:n}},wZ=e=>s=>e.data[s].color,jZ=e=>{const{seriesOrder:s,series:a}=e;return s.reduce((n,r)=>(a[r].data.forEach((i,l)=>{const c=pr(i.label,"legend");c!==void 0&&n.push({markType:i.labelMarkType??a[r].labelMarkType,id:i.id??l,seriesId:r,color:i.color,label:c,itemId:i.id??l})}),n),[])},CZ=e=>{const{series:s,getColor:a,identifier:n}=e;if(!n||n.dataIndex===void 0)return null;const r=s.data[n.dataIndex];if(r==null)return null;const i=pr(r.label,"tooltip"),l=Oe({},r,{label:i}),c=s.valueFormatter(l,{dataIndex:n.dataIndex});return{identifier:n,color:a(n.dataIndex),label:i,value:l,formattedValue:c,markType:r.labelMarkType??s.labelMarkType}},SZ=(e,s,a)=>Oe({},e,{id:e.id??`auto-generated-id-${s}`,data:e.data.map((n,r)=>Oe({},n,{color:n.color??a[r%a.length]}))});function Vp(e,s){if(typeof e=="number")return e;if(e==="100%")return s;if(e.endsWith("%")){const a=Number.parseFloat(e.slice(0,e.length-1));if(!Number.isNaN(a))return a*s/100}if(e.endsWith("px")){const a=Number.parseFloat(e.slice(0,e.length-2));if(!Number.isNaN(a))return a}throw new Error(`MUI X Charts: Received an unknown value "${e}". It should be a number, or a string with a percentage value.`)}function _Z(e,s){const{height:a,width:n}=s,{cx:r,cy:i}=e,l=Math.min(n,a)/2,c=Vp(r??"50%",n),d=Vp(i??"50%",a);return{cx:c,cy:d,availableRadius:l}}const TZ=e=>{const{series:s,drawingArea:a,identifier:n,placement:r}=e;if(!n||n.dataIndex===void 0)return null;const i=s.pie?.series[n.seriesId];if(i==null)return null;const{cx:l,cy:c,availableRadius:d}=_Z({cx:i.cx,cy:i.cy},a),{data:m,innerRadius:f=0,outerRadius:h}=i,y=Math.max(0,Vp(f??0,d)),N=Math.max(0,Vp(h??d,d)),w=m[n.dataIndex];if(!w)return null;const p=[[y,w.startAngle],[y,w.endAngle],[N,w.startAngle],[N,w.endAngle]].map(([T,k])=>({x:l+T*Math.sin(k),y:c-T*Math.cos(k)})),[v,C]=Rp(p.map(T=>T.x)),[j,_]=Rp(p.map(T=>T.y));switch(r){case"bottom":return{x:(C+v)/2,y:_};case"left":return{x:v,y:(_+j)/2};case"right":return{x:C,y:(_+j)/2};case"top":default:return{x:(C+v)/2,y:j}}},EZ={colorProcessor:wZ,seriesProcessor:NZ,legendGetter:jZ,tooltipGetter:CZ,tooltipItemPositionGetter:TZ,getSeriesWithDefaultValues:SZ},AZ={bar:JK,scatter:oZ,line:bZ,pie:EZ},LZ=[Eh,jh,yu,Ah];function kZ(e){const{children:s,plugins:a=LZ,pluginParams:n={},seriesConfig:r=AZ}=e,{contextValue:i}=CW(a,n,r);return t.jsx(D5.Provider,{value:i,children:s})}const Sn=()=>{const e=g.useContext(D5);if(e==null)throw new Error(["MUI X Charts: Could not find the Chart context.","It looks like you rendered your component outside of a ChartDataProvider.","This can also happen if you are bundling multiple versions of the library."].join(`
`));return e};function DZ(e){"hasPointerCapture"in e.currentTarget&&e.currentTarget.hasPointerCapture(e.pointerId)&&e.currentTarget.releasePointerCapture(e.pointerId)}const py=(e,s)=>{const{instance:a}=Sn(),n=g.useRef(!1),r=oa(()=>{n.current=!0,a.setItemInteraction(e,{interaction:"pointer"}),a.setHighlight(e)}),i=oa(()=>{n.current=!1,a.removeItemInteraction(e),a.clearHighlight()});return g.useEffect(()=>()=>{n.current&&i()},[i]),g.useMemo(()=>({onPointerEnter:r,onPointerLeave:i,onPointerDown:DZ}),[s,r,i])};function DO(e){return e.replace(" ","_")}const MO=Is("MuiAppearingMask",["animate"]),MZ=kt("rect")({animationName:"animate-width",animationTimingFunction:w2,animationDuration:"0s",[`&.${MO.animate}`]:{animationDuration:`${gy}ms`},"@keyframes animate-width":{from:{width:0}}});function PO(e){const s=nr(),a=my(),n=DO(`${a}-${e.id}`);return t.jsxs(g.Fragment,{children:[t.jsx("clipPath",{id:n,children:t.jsx(MZ,{className:e.skipAnimation?"":MO.animate,x:0,y:0,width:s.left+s.width+s.right,height:s.top+s.height+s.bottom})}),t.jsx("g",{clipPath:`url(#${n})`,children:e.children})]})}const PZ=["skipAnimation","ownerState"];function OZ(e){const{skipAnimation:s,ownerState:a}=e,n=$t(e,PZ),r=zK(e);return t.jsx(PO,{skipAnimation:s,id:`${a.id}-area-clip`,children:t.jsx("path",Oe({fill:a.gradientId?`url(#${a.gradientId})`:a.color,filter:a.isHighlighted?"brightness(140%)":a.gradientId?void 0:"brightness(120%)",opacity:a.isFaded?.3:1,stroke:"none","data-series":a.id,"data-highlighted":a.isHighlighted||void 0,"data-faded":a.isFaded||void 0},n,r))})}const IZ=["id","classes","color","gradientId","slots","slotProps","onClick"];function $Z(e){return qs("MuiAreaElement",e)}const RZ=Is("MuiAreaElement",["root","highlighted","faded","series"]),UZ=e=>{const{classes:s,id:a,isFaded:n,isHighlighted:r}=e,i={root:["root",`series-${a}`,r&&"highlighted",n&&"faded"]};return Qs(i,$Z,s)};function zZ(e){const{id:s,classes:a,color:n,gradientId:r,slots:i,slotProps:l,onClick:c}=e,d=$t(e,IZ),m=py({type:"line",seriesId:s}),{isFaded:f,isHighlighted:h}=SO({seriesId:s}),y={id:s,classes:a,color:n,gradientId:r,isFaded:f,isHighlighted:h},N=UZ(y),w=i?.area??OZ,p=zi({elementType:w,externalSlotProps:l?.area,additionalProps:Oe({},m,{onClick:c,cursor:c?"pointer":"unset"}),className:N.root,ownerState:y});return t.jsx(w,Oe({},d,p))}function S2(e){const s=bs(),a=gt(s,RV);return e||a}function _2(){const e=bs();return gt(e,jP)}function OO(e){switch(e){case"catmullRom":return kX.alpha(.5);case"linear":return h2;case"monotoneX":return A4;case"monotoneY":return DX;case"natural":return MX;case"step":return PX;case"stepBefore":return OX;case"stepAfter":return IX;case"bumpY":return yX;case"bumpX":return pX;default:return A4}}function FZ(e,s){const a=Lh(),n=nn().xAxisIds[0],r=rn().yAxisIds[0],i=N2();return g.useMemo(()=>{if(a===void 0)return[];const{series:c,stackingGroups:d}=a,m=[];for(const f of d){const h=f.ids;for(let y=h.length-1;y>=0;y-=1){const N=h[y],{xAxisId:w=n,yAxisId:p=r,stackedData:v,data:C,connectNulls:j,baseline:_,curve:T,strictStepCurve:k,area:E}=c[N];if(!E||!(w in e)||!(p in s))continue;const A=e[w].scale,U=vu(A),B=s[p].scale,X=e[w].data,$=s[p].colorScale&&i(p)||e[w].colorScale&&i(w)||void 0,O=T?.includes("step")&&!k&&da(A),G=X?.flatMap((Z,te)=>{const ge=C[te]==null;if(O){const le=[{x:Z,y:v[te],nullData:ge,isExtension:!1}];return!ge&&(te===0||C[te-1]==null)&&le.unshift({x:(A(Z)??0)-(A.step()-A.bandwidth())/2,y:v[te],nullData:ge,isExtension:!0}),!ge&&(te===C.length-1||C[te+1]==null)&&le.push({x:(A(Z)??0)+(A.step()+A.bandwidth())/2,y:v[te],nullData:ge,isExtension:!0}),le}return{x:Z,y:v[te],nullData:ge}})??[],K=j?G.filter(Z=>!Z.nullData):G,R=fX().x(Z=>Z.isExtension?Z.x:U(Z.x)).defined(Z=>j||!Z.nullData||!!Z.isExtension).y0(Z=>{if(typeof _=="number")return B(_);if(_==="max")return B.range()[1];if(_==="min")return B.range()[0];const te=Z.y&&B(Z.y[0]);return Number.isNaN(te)?B.range()[0]:te}).y1(Z=>Z.y&&B(Z.y[1])).curve(OO(T))(K)||"";m.push({area:c[N].area,color:c[N].color,gradientId:$,d:R,seriesId:N})}}return m},[a,n,r,e,s,i])}const BZ=["slots","slotProps","onItemClick","skipAnimation"],HZ=kt("g",{name:"MuiAreaPlot",slot:"Root"})({[`& .${RZ.root}`]:{transition:"opacity 0.2s ease-in, fill 0.2s ease-in"}}),GZ=()=>{const{xAxis:e}=nn(),{yAxis:s}=rn();return FZ(e,s)};function VZ(e){const{slots:s,slotProps:a,onItemClick:n,skipAnimation:r}=e,i=$t(e,BZ),l=_2(),c=S2(l||r),d=GZ();return t.jsx(HZ,Oe({},i,{children:d.map(({d:m,seriesId:f,color:h,area:y,gradientId:N})=>!!y&&t.jsx(zZ,{id:f,d:m,color:h,gradientId:N,slots:s,slotProps:a,onClick:n&&(w=>n(w,{type:"line",seriesId:f})),skipAnimation:c},f))}))}const WZ=["skipAnimation","ownerState"],YZ=g.forwardRef(function(s,a){const{skipAnimation:n,ownerState:r}=s,i=$t(s,WZ),l=FK(Oe({},s,{ref:a}));return t.jsx(PO,{skipAnimation:n,id:`${r.id}-line-clip`,children:t.jsx("path",Oe({stroke:r.gradientId?`url(#${r.gradientId})`:r.color,strokeWidth:2,strokeLinejoin:"round",fill:"none",filter:r.isHighlighted?"brightness(120%)":void 0,opacity:r.isFaded?.3:1,"data-series":r.id,"data-highlighted":r.isHighlighted||void 0,"data-faded":r.isFaded||void 0},i,l))})}),QZ=["id","classes","color","gradientId","slots","slotProps","onClick"];function qZ(e){return qs("MuiLineElement",e)}const XZ=Is("MuiLineElement",["root","highlighted","faded","series"]),KZ=e=>{const{classes:s,id:a,isFaded:n,isHighlighted:r}=e,i={root:["root",`series-${a}`,r&&"highlighted",n&&"faded"]};return Qs(i,qZ,s)};function ZZ(e){const{id:s,classes:a,color:n,gradientId:r,slots:i,slotProps:l,onClick:c}=e,d=$t(e,QZ),m=py({type:"line",seriesId:s}),{isFaded:f,isHighlighted:h}=SO({seriesId:s}),y={id:s,classes:a,color:n,gradientId:r,isFaded:f,isHighlighted:h},N=KZ(y),w=i?.line??YZ,p=zi({elementType:w,externalSlotProps:l?.line,additionalProps:Oe({},m,{onClick:c,cursor:c?"pointer":"unset"}),className:N.root,ownerState:y});return t.jsx(w,Oe({},d,p))}function JZ(e,s){const a=Lh(),n=nn().xAxisIds[0],r=rn().yAxisIds[0],i=N2();return g.useMemo(()=>{if(a===void 0)return[];const{series:c,stackingGroups:d}=a,m=[];for(const f of d){const h=f.ids;for(const y of h){const{xAxisId:N=n,yAxisId:w=r,stackedData:p,data:v,connectNulls:C,curve:j,strictStepCurve:_}=c[y];if(!(N in e)||!(w in s))continue;const T=e[N].scale,k=vu(T),E=s[w].scale,A=e[N].data,U=s[w].colorScale&&i(w)||e[N].colorScale&&i(N)||void 0,B=j?.includes("step")&&!_&&da(T),X=A?.flatMap((K,ae)=>{const R=v[ae]==null;if(B){const Z=[{x:K,y:p[ae],nullData:R,isExtension:!1}];return!R&&(ae===0||v[ae-1]==null)&&Z.unshift({x:(T(K)??0)-(T.step()-T.bandwidth())/2,y:p[ae],nullData:R,isExtension:!0}),!R&&(ae===v.length-1||v[ae+1]==null)&&Z.push({x:(T(K)??0)+(T.step()+T.bandwidth())/2,y:p[ae],nullData:R,isExtension:!0}),Z}return{x:K,y:p[ae],nullData:R}})??[],$=C?X.filter(K=>!K.nullData):X,G=sO().x(K=>K.isExtension?K.x:k(K.x)).defined(K=>C||!K.nullData||!!K.isExtension).y(K=>E(K.y[1])).curve(OO(j))($)||"";m.push({color:c[y].color,gradientId:U,d:G,seriesId:y})}}return m},[a,n,r,e,s,i])}const eJ=["slots","slotProps","skipAnimation","onItemClick"],tJ=kt("g",{name:"MuiAreaPlot",slot:"Root"})({[`& .${XZ.root}`]:{transition:"opacity 0.2s ease-in, fill 0.2s ease-in"}}),sJ=()=>{const{xAxis:e}=nn(),{yAxis:s}=rn();return JZ(e,s)};function aJ(e){const{slots:s,slotProps:a,skipAnimation:n,onItemClick:r}=e,i=$t(e,eJ),l=_2(),c=S2(l||n),d=sJ();return t.jsx(tJ,Oe({},i,{children:d.map(({d:m,seriesId:f,color:h,gradientId:y})=>t.jsx(ZZ,{id:f,d:m,color:h,gradientId:y,skipAnimation:c,slots:s,slotProps:a,onClick:r&&(N=>r(N,{type:"line",seriesId:f}))},f))}))}function nJ(e){return qs("MuiMarkElement",e)}const IO=Is("MuiMarkElement",["root","highlighted","faded","animate","series"]),$O=e=>{const{classes:s,id:a,isFaded:n,isHighlighted:r,skipAnimation:i}=e,l={root:["root",`series-${a}`,r&&"highlighted",n&&"faded",i?void 0:"animate"]};return Qs(l,nJ,s)},rJ=["x","y","id","classes","color","dataIndex","onClick","skipAnimation","isFaded","isHighlighted"],iJ=kt("circle")({[`&.${IO.animate}`]:{transitionDuration:`${gy}ms`,transitionProperty:"cx, cy",transitionTimingFunction:w2}});function lJ(e){const{x:s,y:a,id:n,classes:r,color:i,dataIndex:l,onClick:c,skipAnimation:d,isFaded:m=!1,isHighlighted:f=!1}=e,h=$t(e,rJ),y=Kr(),N=py({type:"line",seriesId:n,dataIndex:l}),p=$O({id:n,classes:r,isHighlighted:f,isFaded:m,skipAnimation:d});return t.jsx(iJ,Oe({},h,{cx:s,cy:a,r:5,fill:(y.vars||y).palette.background.paper,stroke:i,strokeWidth:2,className:p.root,onClick:c,cursor:c?"pointer":"unset"},N,{"data-highlighted":f||void 0,"data-faded":m||void 0}))}function RO(e){switch(e){case"circle":return 0;case"cross":return 1;case"diamond":return 2;case"square":return 3;case"star":return 4;case"triangle":return 5;case"wye":return 6;default:return 0}}const oJ=["x","y","id","classes","color","shape","dataIndex","onClick","skipAnimation","isFaded","isHighlighted"],cJ=kt("path",{name:"MuiMarkElement",slot:"Root"})(({ownerState:e,theme:s})=>({fill:(s.vars||s).palette.background.paper,stroke:e.color,strokeWidth:2,[`&.${IO.animate}`]:{transitionDuration:`${gy}ms`,transitionProperty:"transform, transform-origin",transitionTimingFunction:w2}}));function dJ(e){const{x:s,y:a,id:n,classes:r,color:i,shape:l,dataIndex:c,onClick:d,skipAnimation:m,isFaded:f=!1,isHighlighted:h=!1}=e,y=$t(e,oJ),N=py({type:"line",seriesId:n,dataIndex:c}),w={id:n,classes:r,isHighlighted:h,isFaded:f,color:i,skipAnimation:m},p=$O(w);return t.jsx(cJ,Oe({},y,{style:{transform:`translate(${s}px, ${a}px)`,transformOrigin:`${s}px ${a}px`},ownerState:w,className:p.root,d:oO(lO[RO(l)])(),onClick:d,cursor:d?"pointer":"unset"},N,{"data-highlighted":h||void 0,"data-faded":f||void 0}))}const uJ=["slots","slotProps","skipAnimation","onItemClick"];function mJ(e){const{slots:s,slotProps:a,skipAnimation:n,onItemClick:r}=e,i=$t(e,uJ),l=_2(),c=S2(l||n),d=Lh(),{xAxis:m,xAxisIds:f}=nn(),{yAxis:h,yAxisIds:y}=rn(),N=my(),{instance:w,store:p}=Sn(),{isFaded:v,isHighlighted:C}=CK(),j=gt(p,VP),_=g.useMemo(()=>{const U={};for(const{dataIndex:B,axisId:X}of j)U[X]===void 0?U[X]=new Set([B]):U[X].add(B);return U},[j]);if(d===void 0)return null;const{series:T,stackingGroups:k}=d,E=f[0],A=y[0];return t.jsx("g",Oe({},i,{children:k.flatMap(({ids:U})=>U.map(B=>{const{xAxisId:X=E,yAxisId:$=A,stackedData:O,data:G,showMark:K=!0,shape:ae="circle"}=T[B];if(K===!1)return null;const R=vu(m[X].scale),Z=h[$].scale,te=m[X].data;if(te===void 0)throw new Error(`MUI X Charts: ${X===B0?"The first `xAxis`":`The x-axis with id "${X}"`} should have data property to be able to display a line plot.`);const ge=DO(`${N}-${B}-line-clip`),le=C2(T[B],m[X],h[$]),W=s?.mark??(ae==="circle"?lJ:dJ),ee=C({seriesId:B}),J=!ee&&v({seriesId:B});return t.jsx("g",{clipPath:`url(#${ge})`,"data-series":B,children:te?.map((he,be)=>{const Le=G[be]==null?null:O[be][1];return{x:R(he),y:Le===null?null:Z(Le),position:he,value:Le,index:be}}).filter(({x:he,y:be,index:Le,position:Me,value:ke})=>ke===null||be===null||!w.isPointInside(he,be)?!1:K===!0?!0:K({x:he,y:be,index:Le,position:Me,value:ke})).map(({x:he,y:be,index:Le})=>t.jsx(W,Oe({id:B,dataIndex:Le,shape:ae,color:le(Le),x:he,y:be,skipAnimation:c,onClick:r&&(Me=>r(Me,{type:"line",seriesId:B,dataIndex:Le})),isHighlighted:_[X]?.has(Le)||ee,isFaded:J},a?.mark),`${B}-${Le}`))},B)}))}))}function yy(){const[e,s]=g.useState(typeof window<"u"||!1);return g.useEffect(()=>{s(!0)},[]),e}function T2(e){return typeof e=="number"&&!Number.isFinite(e)}const wC={start:0,extremities:0,end:1,middle:.5};function RN(e,s,a){return e(s)-(e.step()-e.bandwidth())/2+wC[a]*e.step()}function fJ(e){const{scale:s,tickNumber:a,valueFormatter:n,tickInterval:r,tickPlacement:i="extremities",tickLabelPlacement:l,isInside:c}=e;if(da(s)){const y=s.domain(),N=l??"middle";if(s.bandwidth()>0){const p=typeof r=="function"&&y.filter(r)||typeof r=="object"&&r||y,v=s.range()[0]>s.range()[1],C=p.findIndex(_=>c(RN(s,_,v?"start":"end"))),j=p.findLastIndex(_=>c(RN(s,_,v?"end":"start")));return[...p.slice(C,j+1).map(_=>{const T=`${_}`;return{value:_,formattedValue:n?.(_,{location:"tick",scale:s,tickNumber:a,defaultTickLabel:T})??T,offset:RN(s,_,i),labelOffset:N==="tick"?0:s.step()*(wC[N]-wC[i])}}),...i==="extremities"&&j===y.length-1&&c(s.range()[1])?[{formattedValue:void 0,offset:s.range()[1],labelOffset:0}]:[]]}return(typeof r=="function"&&y.filter(r)||typeof r=="object"&&r||y).map(p=>{const v=`${p}`;return{value:p,formattedValue:n?.(p,{location:"tick",scale:s,tickNumber:a,defaultTickLabel:v})??v,offset:s(p),labelOffset:0}})}if(s.domain().some(T2))return[];const m=l,f=typeof r=="object"?r:hJ(s,a),h=[];for(let y=0;y<f.length;y+=1){const N=f[y],w=s(N);if(c(w)){const p=s.tickFormat(a)(N);h.push({value:N,formattedValue:n?.(N,{location:"tick",scale:s,tickNumber:a,defaultTickLabel:p})??p,offset:w,labelOffset:m==="middle"?s(f[y-1]??0)-(w+s(f[y-1]??0))/2:0})}}return h}function hJ(e,s){const a=e.domain();return a[0]===a[1]?[a[0]]:e.ticks(s)}function by(e){const{scale:s,tickNumber:a,valueFormatter:n,tickInterval:r,tickPlacement:i="extremities",tickLabelPlacement:l,direction:c}=e,{instance:d}=Sn(),m=c==="x"?d.isXInside:d.isYInside;return g.useMemo(()=>fJ({scale:s,tickNumber:a,tickPlacement:i,tickInterval:r,tickLabelPlacement:l,valueFormatter:n,isInside:m}),[s,a,i,r,l,n,m])}function gJ(e=!1){const[s,a]=g.useState(!1);return na(()=>{e||a(!0)},[e]),g.useEffect(()=>{e&&a(!0)},[e]),s}const UO=typeof window<"u"&&"Intl"in window&&"Segmenter"in Intl?new Intl.Segmenter(void 0,{granularity:"grapheme"}):null;function xJ(e){return e.length}function pJ(e){const s=UO.segment(e);let a=0;for(const n of s)a+=1;return a}const yJ=UO?pJ:xJ;function bJ(e){return e*(Math.PI/180)}const zO=typeof window<"u"&&"Intl"in window&&"Segmenter"in Intl?new Intl.Segmenter(void 0,{granularity:"grapheme"}):null;function vJ(e,s){return e.slice(0,s)}function NJ(e,s){const a=zO.segment(e);let n="",r=0;for(const i of a)if(n+=i.segment,r+=1,r>=s)break;return n}const wJ=zO?NJ:vJ,P4="";function FO(e,s){const{width:a,height:n,measureText:r}=s,i=bJ(s.angle),l=r(e),c=Math.abs(l.width*Math.cos(i))+Math.abs(l.height*Math.sin(i)),d=Math.abs(l.width*Math.sin(i))+Math.abs(l.height*Math.cos(i));return c<=a&&d<=n}function BO(e,s){if(s(e))return e;let a=e,n=1,r=1/2;const i=yJ(e);let l=i,c=i,d=null;do{if(c=l,l=Math.floor(i*r),l===0)break;a=wJ(e,l).trim();const m=s(a+P4);n+=1,m?(d=a,r+=1/2**n):r-=1/2**n}while(Math.abs(l-c)!==1);return d?d+P4:""}function HO(){return typeof window>"u"}const Ml=new Map,GO=2e3,jJ=new Set(["minWidth","maxWidth","width","minHeight","maxHeight","height","top","left","fontSize","padding","margin","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom"]);function E2(e,s){return jJ.has(e)&&s===+s?`${s}px`:s}const CJ=/([A-Z])/g;function A2(e){return String(e).replace(CJ,s=>`-${s.toLowerCase()}`)}function VO(e){let s="";for(const a in e)if(Object.hasOwn(e,a)){const n=a,r=e[n];if(r===void 0)continue;s+=`${A2(n)}:${E2(n,r)};`}return s}const kh=(e,s={})=>{if(e==null||HO())return{width:0,height:0};const a=String(e),n=VO(s),r=`${a}-${n}`,i=Ml.get(r);if(i)return i;try{const l=YO(),c=document.createElementNS("http://www.w3.org/2000/svg","text");Object.keys(s).map(m=>(c.style[A2(m)]=E2(m,s[m]),m)),c.textContent=a,l.replaceChildren(c);const d=WO(c);return Ml.set(r,d),Ml.size+1>GO&&Ml.clear(),d}catch{return{width:0,height:0}}};function SJ(e,s={}){if(HO())return new Map(Array.from(e).map(d=>[d,{width:0,height:0}]));const a=new Map,n=[],r=VO(s);for(const d of e){const m=`${d}-${r}`,f=Ml.get(m);f?a.set(d,f):n.push(d)}const i=YO(),l=Oe({},s);Object.keys(l).map(d=>(i.style[A2(d)]=E2(d,l[d]),d));const c=[];for(const d of n){const m=document.createElementNS("http://www.w3.org/2000/svg","text");m.textContent=`${d}`,c.push(m)}i.replaceChildren(...c);for(let d=0;d<n.length;d+=1){const m=n[d],f=i.children[d],h=WO(f),y=`${m}-${r}`;Ml.set(y,h),a.set(m,h)}return Ml.size+1>GO&&Ml.clear(),a}function WO(e){try{const s=e.getBBox();return{width:s.width,height:s.height}}catch{const s=e.getBoundingClientRect();return{width:s.width,height:s.height}}}let Ga=null;function YO(){return Ga===null&&(Ga=document.createElementNS("http://www.w3.org/2000/svg","svg"),Ga.setAttribute("aria-hidden","true"),Ga.style.position="absolute",Ga.style.top="-20000px",Ga.style.left="0",Ga.style.padding="0",Ga.style.margin="0",Ga.style.border="none",Ga.style.pointerEvents="none",Ga.style.visibility="hidden",Ga.style.contain="strict",document.body.appendChild(Ga)),Ga}function _J(e,s,a,n,r){const i=new Map,l=fy(r?.angle??0);let c=1,d=1;r?.textAnchor==="start"?(c=1/0,d=1):r?.textAnchor==="end"?(c=1,d=1/0):(c=2,d=2),l>90&&l<270&&([c,d]=[d,c]),n&&([c,d]=[d,c]);for(const m of e)if(m.formattedValue){const f=Math.min((m.offset+m.labelOffset)*c,(s.left+s.width+s.right-m.offset-m.labelOffset)*d),h=y=>FO(y,{width:f,height:a,angle:l,measureText:N=>kh(N,r)});i.set(m,BO(m.formattedValue.toString(),h))}return i}const O4=5;function TJ(e,s,a=0){const n=Math.min(Math.abs(a)%180,Math.abs(Math.abs(a)%180-180)%180);if(n<O4)return e;if(n>90-O4)return s;const r=Dl(n),i=Math.atan2(s,e);return r<i?e/Math.cos(r):s/Math.sin(r)}function EJ(e,{tickLabelStyle:s,tickLabelInterval:a,tickLabelMinGap:n,reverse:r,isMounted:i,isXInside:l}){if(typeof a=="function")return new Set(e.filter((h,y)=>a(h.value,y)));let c=0;const d=r?-1:1,m=e.filter(h=>{const{offset:y,labelOffset:N,formattedValue:w}=h;if(w==="")return!1;const p=y+N;return l(p)}),f=LJ(m,s);return new Set(m.filter((h,y)=>{const{offset:N,labelOffset:w}=h,p=N+w;if(y>0&&d*p<d*(c+n))return!1;const{width:v,height:C}=i?AJ(f,h):{width:0,height:0},j=TJ(v,C,s?.angle),_=p-d*j/2;return y>0&&d*_<d*(c+n)?!1:(c=p+d*j/2,!0)}))}function AJ(e,s){if(s.formattedValue===void 0)return{width:0,height:0};let a=0,n=0;for(const r of s.formattedValue.split(`
`)){const i=e.get(r);i&&(a=Math.max(a,i.width),n+=i.height)}return{width:a,height:n}}function LJ(e,s){const a=new Set;for(const n of e)n.formattedValue&&n.formattedValue.split(`
`).forEach(r=>a.add(r));return SJ(a,s)}function QO(e){return qs("MuiChartsAxis",e)}const xx=Is("MuiChartsAxis",["root","line","tickContainer","tick","tickLabel","label","directionX","directionY","top","bottom","left","right","id"]),qO=e=>{const{classes:s,position:a,id:n}=e,r={root:["root","directionX",a,`id-${n}`],line:["line"],tickContainer:["tickContainer"],tick:["tick"],tickLabel:["tickLabel"],label:["label"]};return Qs(r,QO,s)},jC=3,kJ=4,XO={disableLine:!1,disableTicks:!1,tickSize:6,tickLabelMinGap:4};function DJ({style:e,needsComputation:s,text:a}){return a.split(`
`).map(n=>Oe({text:n},s?kh(n,e):{width:0,height:0}))}const MJ=["x","y","style","text","ownerState"],PJ=["angle","textAnchor","dominantBaseline"];function vy(e){const{x:s,y:a,style:n,text:r}=e,i=$t(e,MJ),l=n??{},{angle:c,textAnchor:d,dominantBaseline:m}=l,f=$t(l,PJ),h=yy(),y=g.useMemo(()=>DJ({style:f,needsComputation:h&&r.includes(`
`),text:r}),[f,r,h]);let N;switch(m){case"hanging":case"text-before-edge":N=0;break;case"central":N=(y.length-1)/2*-y[0].height;break;default:N=(y.length-1)*-y[0].height;break}return t.jsx("text",Oe({},i,{transform:c?`rotate(${c}, ${s}, ${a})`:void 0,x:s,y:a,textAnchor:d,dominantBaseline:m,style:f,children:y.map((w,p)=>t.jsx("tspan",{x:s,dy:`${p===0?N:y[0].height}px`,dominantBaseline:m,children:w.text},p))}))}function KO(e){const s=fy(e);return s<=30||s>=330||s<=210&&s>=150?"middle":s<=180?"end":"start"}function ZO(e){const s=fy(e);return s<=30||s>=330?"hanging":s<=210&&s>=150?"auto":"central"}function JO(e){switch(e){case"start":return"end";case"end":return"start";default:return e}}const OJ=["scale","tickNumber","reverse"];function eI(e){const{xAxis:s,xAxisIds:a}=nn(),n=s[e.axisId??a[0]],{scale:r,tickNumber:i,reverse:l}=n,c=$t(n,OJ),d=ar({props:Oe({},c,e),name:"MuiChartsXAxis"}),m=Oe({},XO,d),{position:f,tickLabelStyle:h,slots:y,slotProps:N}=m,w=Kr(),p=ph(),v=qO(m),C=f==="bottom"?1:-1,j=y?.axisTick??"line",_=y?.axisTickLabel??vy,T=KO((f==="bottom"?0:180)-(h?.angle??0)),k=ZO((f==="bottom"?0:180)-(h?.angle??0)),E=zi({elementType:_,externalSlotProps:N?.axisTickLabel,additionalProps:{style:Oe({},w.typography.caption,{fontSize:12,lineHeight:1.25,textAnchor:p?JO(T):T,dominantBaseline:k},h)},className:v.tickLabel,ownerState:{}});return{xScale:r,defaultizedProps:m,tickNumber:i,positionSign:C,classes:v,Tick:j,TickLabel:_,axisTickLabelProps:E,reverse:l}}function IJ(e){const{axisLabelHeight:s}=e,{xScale:a,defaultizedProps:n,tickNumber:r,positionSign:i,classes:l,Tick:c,TickLabel:d,axisTickLabelProps:m,reverse:f}=eI(e),h=ph(),y=gJ(),{disableTicks:N,tickSize:w,valueFormatter:p,slotProps:v,tickInterval:C,tickLabelInterval:j,tickPlacement:_,tickLabelPlacement:T,tickLabelMinGap:k,height:E}=n,A=nr(),{instance:U}=Sn(),B=yy(),X=N?4:w,$=by({scale:a,tickNumber:r,valueFormatter:p,tickInterval:C,tickPlacement:_,tickLabelPlacement:T,direction:"x"}),O=EJ($,{tickLabelStyle:m.style,tickLabelInterval:j,tickLabelMinGap:k,reverse:f,isMounted:y,isXInside:U.isXInside}),G=Math.max(0,E-(s>0?s+kJ:0)-X-jC),K=B?_J(O,A,G,h,m.style):new Map(Array.from(O).map(ae=>[ae,ae.formattedValue]));return t.jsx(g.Fragment,{children:$.map((ae,R)=>{const{offset:Z,labelOffset:te}=ae,ge=te??0,le=i*(X+jC),W=U.isXInside(Z),ee=K.get(ae),J=O.has(ae);return t.jsxs("g",{transform:`translate(${Z}, 0)`,className:l.tickContainer,children:[!N&&W&&t.jsx(c,Oe({y2:i*X,className:l.tick},v?.axisTick)),ee!==void 0&&J&&t.jsx(d,Oe({x:ge,y:le},m,{text:ee}))]},R)})})}const wm={start:0,extremities:0,end:1,middle:.5,tick:0};function tI(e){const{scale:s,tickInterval:a,tickLabelPlacement:n="middle",tickPlacement:r="extremities",groups:i}=e;return g.useMemo(()=>{const l=s.domain(),c=typeof a=="function"&&l.filter(a)||typeof a=="object"&&a||l;if(s.bandwidth()>0){const d=I4(c,i,r,n,s);return d[0]&&(d[0].ignoreTick=!0),[{formattedValue:void 0,offset:s.range()[0],labelOffset:0,groupIndex:i.length-1},...d,{formattedValue:void 0,offset:s.range()[1],labelOffset:0,groupIndex:i.length-1}]}return I4(c,i,r,n,s)},[s,a,i,r,n])}function I4(e,s,a,n,r){const i=[],l=new Map;let c=0;for(let d=0;d<s.length;d+=1)for(let m=0;m<e.length;m+=1){const f=e[m],h=s[d].getValue(f,m),y=i[i.length-1];if(y?.value!==h||y?.groupIndex!==d){c=1;const w=da(r)?r(f)-(r.step()-r.bandwidth())/2+wm[a]*r.step():r(f),p=r.step()*c*(wm[n]-wm[a]);i.push({value:h,formattedValue:`${h}`,offset:w,groupIndex:d,dataIndex:m,ignoreTick:!1,labelOffset:p}),l.has(m)||l.set(m,new Set);const v=l.get(m);for(const C of v.values())i[C].ignoreTick=!0;v.add(i.length-1)}else{c+=1;const w=r.step()*c*(wm[n]-wm[a]);y.labelOffset=w}}return i}const $4={tickSize:6},$J=(e,s,a)=>{const n=e[s]??{},r=a??$4.tickSize,i=r*s*2+r;return Oe({},$4,n,{tickSize:n.tickSize??i})};function RJ(e){const{xScale:s,defaultizedProps:a,positionSign:n,classes:r,Tick:i,TickLabel:l,axisTickLabelProps:c}=eI(e);if(!da(s))throw new Error("MUI X Charts: ChartsGroupedXAxis only supports the `band` and `point` scale types.");const{disableTicks:d,tickSize:m,valueFormatter:f,slotProps:h,tickInterval:y,tickPlacement:N,tickLabelPlacement:w}=a,p=a.groups,{instance:v}=Sn(),C=tI({scale:s,tickInterval:y,tickPlacement:N,tickLabelPlacement:w,groups:p});return t.jsx(g.Fragment,{children:C.map((j,_)=>{const{offset:T,labelOffset:k}=j,E=k??0,A=v.isXInside(T),U=j.formattedValue,B=j.ignoreTick??!1,X=j.groupIndex??0,$=$J(p,X,m),O=n*$.tickSize,G=n*($.tickSize+jC);return t.jsxs("g",{transform:`translate(${T}, 0)`,className:r.tickContainer,"data-group-index":X,children:[!d&&!B&&A&&t.jsx(i,Oe({y2:O,className:r.tick},h?.axisTick)),U!==void 0&&t.jsx(l,Oe({x:E,y:G},c,{style:Oe({},c.style,$.tickLabelStyle),text:U}))]},_)})})}const sI=kt("g",{name:"MuiChartsAxis",slot:"Root"})(({theme:e})=>({[`& .${xx.tickLabel}`]:Oe({},e.typography.caption,{fill:(e.vars||e).palette.text.primary}),[`& .${xx.label}`]:{fill:(e.vars||e).palette.text.primary},[`& .${xx.line}`]:{stroke:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges",strokeWidth:1},[`& .${xx.tick}`]:{stroke:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges"}})),UJ=["axis"],zJ=["scale","tickNumber","reverse"],FJ=kt(sI,{name:"MuiChartsXAxis",slot:"Root"})({});function BJ(e){let{axis:s}=e,a=$t(e,UJ);const{scale:n}=s,r=$t(s,zJ),i=ar({props:Oe({},r,a),name:"MuiChartsXAxis"}),l=Oe({},XO,i),{position:c,labelStyle:d,offset:m,slots:f,slotProps:h,sx:y,disableLine:N,label:w,height:p}=l,v=Kr(),C=qO(l),{left:j,top:_,width:T,height:k}=nr(),E=c==="bottom"?1:-1,A=f?.axisLine??"line",U=f?.axisLabel??vy,B=zi({elementType:U,externalSlotProps:h?.axisLabel,additionalProps:{style:Oe({},v.typography.body1,{lineHeight:1,fontSize:14,textAnchor:"middle",dominantBaseline:c==="bottom"?"text-after-edge":"text-before-edge"},d)},ownerState:{}});if(c==="none")return null;const X=w?kh(w,B.style).height:0,$=n.domain(),G=da(n)?$.length===0:$.some(T2);let K=null;G||(K="groups"in s&&Array.isArray(s.groups)?t.jsx(RJ,Oe({},a)):t.jsx(IJ,Oe({},a,{axisLabelHeight:X})));const ae={x:j+T/2,y:E*p};return t.jsxs(FJ,{transform:`translate(0, ${c==="bottom"?_+k+m:_-m})`,className:C.root,sx:y,children:[!N&&t.jsx(A,Oe({x1:j,x2:j+T,className:C.line},h?.axisLine)),K,w&&t.jsx("g",{className:C.label,children:t.jsx(U,Oe({},ae,B,{text:w}))})]})}function HJ(e){const{xAxis:s,xAxisIds:a}=nn(),n=s[e.axisId??a[0]];return n?t.jsx(BJ,Oe({},e,{axis:n})):(`${e.axisId}`,null)}function GJ(e,s,a,n,r){const i=new Map,l=fy(r?.angle??0);let c=1,d=1;r?.textAnchor==="start"?(c=1/0,d=1):r?.textAnchor==="end"?(c=1,d=1/0):(c=2,d=2),l>180&&([c,d]=[d,c]),n&&([c,d]=[d,c]);for(const m of e)if(m.formattedValue){const f=Math.min((m.offset+m.labelOffset)*c,(s.top+s.height+s.bottom-m.offset-m.labelOffset)*d),h=y=>FO(y,{width:a,height:f,angle:l,measureText:N=>kh(N,r)});i.set(m,BO(m.formattedValue.toString(),h))}return i}const aI=e=>{const{classes:s,position:a,id:n}=e,r={root:["root","directionY",a,`id-${n}`],line:["line"],tickContainer:["tickContainer"],tick:["tick"],tickLabel:["tickLabel"],label:["label"]};return Qs(r,QO,s)},CC=2,VJ=2,nI={disableLine:!1,disableTicks:!1,tickSize:6},WJ=["scale","tickNumber","reverse"];function rI(e){const{yAxis:s,yAxisIds:a}=rn(),n=s[e.axisId??a[0]],{scale:r,tickNumber:i}=n,l=$t(n,WJ),c=ar({props:Oe({},l,e),name:"MuiChartsYAxis"}),d=Oe({},nI,c),{position:m,tickLabelStyle:f,slots:h,slotProps:y}=d,N=Kr(),w=ph(),p=aI(d),v=m==="right"?1:-1,C=typeof f?.fontSize=="number"?f.fontSize:12,j=h?.axisTick??"line",_=h?.axisTickLabel??vy,T=KO((m==="right"?-90:90)-(f?.angle??0)),k=ZO((m==="right"?-90:90)-(f?.angle??0)),E=zi({elementType:_,externalSlotProps:y?.axisTickLabel,additionalProps:{style:Oe({},N.typography.caption,{fontSize:C,textAnchor:w?JO(T):T,dominantBaseline:k},f)},className:p.tickLabel,ownerState:{}});return{yScale:r,defaultizedProps:d,tickNumber:i,positionSign:v,classes:p,Tick:j,TickLabel:_,axisTickLabelProps:E}}function YJ(e){const{axisLabelHeight:s}=e,{yScale:a,defaultizedProps:n,tickNumber:r,positionSign:i,classes:l,Tick:c,TickLabel:d,axisTickLabelProps:m}=rI(e),f=ph(),{disableTicks:h,tickSize:y,valueFormatter:N,slotProps:w,tickPlacement:p,tickLabelPlacement:v,tickInterval:C,tickLabelInterval:j,width:_}=n,T=nr(),{instance:k}=Sn(),E=yy(),A=h?4:y,U=by({scale:a,tickNumber:r,valueFormatter:N,tickPlacement:p,tickLabelPlacement:v,tickInterval:C,direction:"y"}),B=Math.max(0,_-(s>0?s+VJ:0)-A-CC),X=E?GJ(U,T,B,f,m.style):new Map(Array.from(U).map($=>[$,$.formattedValue]));return t.jsx(g.Fragment,{children:U.map(($,O)=>{const{offset:G,labelOffset:K,value:ae}=$,R=i*(A+CC),Z=K,te=typeof j=="function"&&!j?.(ae,O),ge=k.isYInside(G),le=X.get($);return ge?t.jsxs("g",{transform:`translate(0, ${G})`,className:l.tickContainer,children:[!h&&t.jsx(c,Oe({x2:i*A,className:l.tick},w?.axisTick)),le!==void 0&&!te&&t.jsx(d,Oe({x:R,y:Z,text:le},m))]},O):null})})}const R4={tickSize:6},QJ=(e,s,a)=>{const n=e[s]??{},r=a??R4.tickSize,i=r*s*2+r;return Oe({},R4,n,{tickSize:n.tickSize??i})};function qJ(e){const{yScale:s,defaultizedProps:a,positionSign:n,classes:r,Tick:i,TickLabel:l,axisTickLabelProps:c}=rI(e);if(!da(s))throw new Error("MUI X Charts: ChartsGroupedYAxis only supports the `band` and `point` scale types.");const{disableTicks:d,tickSize:m,valueFormatter:f,slotProps:h,tickInterval:y,tickPlacement:N,tickLabelPlacement:w}=a,p=a.groups,{instance:v}=Sn(),C=tI({scale:s,tickInterval:y,tickPlacement:N,tickLabelPlacement:w,groups:p});return t.jsx(g.Fragment,{children:C.map((j,_)=>{const{offset:T,labelOffset:k}=j,E=k??0,A=v.isYInside(T),U=j.formattedValue,B=j.ignoreTick??!1,X=j.groupIndex??0,$=QJ(p,X,m),O=n*$.tickSize,G=n*($.tickSize+CC);return t.jsxs("g",{transform:`translate(0, ${T})`,className:r.tickContainer,"data-group-index":X,children:[!d&&!B&&A&&t.jsx(i,Oe({x2:O,className:r.tick},h?.axisTick)),U!==void 0&&t.jsx(l,Oe({x:G,y:E},c,{style:Oe({},c.style,$.tickLabelStyle),text:U}))]},_)})})}const XJ=["axis"],KJ=["scale","tickNumber","reverse"],ZJ=kt(sI,{name:"MuiChartsYAxis",slot:"Root"})({});function JJ(e){let{axis:s}=e,a=$t(e,XJ);const{scale:n}=s,r=$t(s,KJ),i=yy(),l=ar({props:Oe({},r,a),name:"MuiChartsYAxis"}),c=Oe({},nI,l),{position:d,disableLine:m,label:f,labelStyle:h,offset:y,width:N,sx:w,slots:p,slotProps:v}=c,C=Kr(),j=aI(c),{left:_,top:T,width:k,height:E}=nr(),A=d==="right"?1:-1,U=p?.axisLine??"line",B=p?.axisLabel??vy,X=zi({elementType:U,externalSlotProps:v?.axisLine,additionalProps:{strokeLinecap:"square"},ownerState:{}}),$=zi({elementType:B,externalSlotProps:v?.axisLabel,additionalProps:{style:Oe({},C.typography.body1,{lineHeight:1,fontSize:14,angle:A*90,textAnchor:"middle",dominantBaseline:"text-before-edge"},h)},ownerState:{}});if(d==="none")return null;const O={x:A*N,y:T+E/2},G=f==null?0:kh(f,$.style).height,K=n.domain(),R=da(n)?K.length===0:K.some(T2);let Z=null;return R||(Z="groups"in s&&Array.isArray(s.groups)?t.jsx(qJ,Oe({},a)):t.jsx(YJ,Oe({},a,{axisLabelHeight:G}))),t.jsxs(ZJ,{transform:`translate(${d==="right"?_+k+y:_-y}, 0)`,className:j.root,sx:w,children:[!m&&t.jsx(U,Oe({y1:T,y2:T+E,className:j.line},X)),Z,f&&i&&t.jsx("g",{className:j.label,children:t.jsx(B,Oe({},O,$,{text:f}))})]})}function eee(e){const{yAxis:s,yAxisIds:a}=rn(),n=s[e.axisId??a[0]];return n?t.jsx(JJ,Oe({},e,{axis:n})):(`${e.axisId}`,null)}function tee(e){const{slots:s,slotProps:a}=e,{xAxisIds:n,xAxis:r}=nn(),{yAxisIds:i,yAxis:l}=rn();return t.jsxs(g.Fragment,{children:[n.map(c=>!r[c].position||r[c].position==="none"?null:t.jsx(HJ,{slots:s,slotProps:a,axisId:c},c)),i.map(c=>!l[c].position||l[c].position==="none"?null:t.jsx(eee,{slots:s,slotProps:a,axisId:c},c))]})}function see(e){return qs("MuiTypography",e)}Is("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const aee={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},nee=yG(),ree=e=>{const{align:s,gutterBottom:a,noWrap:n,paragraph:r,variant:i,classes:l}=e,c={root:["root",i,e.align!=="inherit"&&`align${xs(s)}`,a&&"gutterBottom",n&&"noWrap",r&&"paragraph"]};return Qs(c,see,l)},iee=kt("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,s)=>{const{ownerState:a}=e;return[s.root,a.variant&&s[a.variant],a.align!=="inherit"&&s[`align${xs(a.align)}`],a.noWrap&&s.noWrap,a.gutterBottom&&s.gutterBottom,a.paragraph&&s.paragraph]}})(cc(({theme:e})=>({margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(e.typography).filter(([s,a])=>s!=="inherit"&&a&&typeof a=="object").map(([s,a])=>({props:{variant:s},style:a})),...Object.entries(e.palette).filter(If()).map(([s])=>({props:{color:s},style:{color:(e.vars||e).palette[s].main}})),...Object.entries(e.palette?.text||{}).filter(([,s])=>typeof s=="string").map(([s])=>({props:{color:`text${xs(s)}`},style:{color:(e.vars||e).palette.text[s]}})),{props:({ownerState:s})=>s.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:s})=>s.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:s})=>s.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:s})=>s.paragraph,style:{marginBottom:16}}]}))),U4={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},L2=g.forwardRef(function(s,a){const{color:n,...r}=Wl({props:s,name:"MuiTypography"}),i=!aee[n],l=nee({...r,...i&&{color:n}}),{align:c="inherit",className:d,component:m,gutterBottom:f=!1,noWrap:h=!1,paragraph:y=!1,variant:N="body1",variantMapping:w=U4,...p}=l,v={...l,align:c,color:n,className:d,component:m,gutterBottom:f,noWrap:h,paragraph:y,variant:N,variantMapping:w},C=m||(y?"p":w[N]||U4[N])||"span",j=ree(v);return t.jsx(iee,{as:C,ref:a,className:It(j.root,d),...p,ownerState:v,style:{...c!=="inherit"&&{"--Typography-textAlign":c},...p.style}})});function lee(e){return qs("MuiChartsTooltip",e)}const Ld=Is("MuiChartsTooltip",["root","paper","table","row","cell","mark","markContainer","labelCell","valueCell","axisValueCell"]),Ny=e=>Qs({root:["root"],paper:["paper"],table:["table"],row:["row"],cell:["cell"],mark:["mark"],markContainer:["markContainer"],labelCell:["labelCell"],valueCell:["valueCell"],axisValueCell:["axisValueCell"]},lee,e);function oee(){const e=bs(),s=gt(e,IP),a=gt(e,Cn),n=hy(),{xAxis:r,xAxisIds:i}=nn(),{yAxis:l,yAxisIds:c}=rn(),{zAxis:d,zAxisIds:m}=y2(),{rotationAxis:f,rotationAxisIds:h}=NO();if(!s)return null;const y=n[s.type]?.series[s.seriesId];if(!y)return null;const N=$p(y)?y.xAxisId??i[0]:void 0,w=$p(y)?y.yAxisId??c[0]:void 0,p="zAxisId"in y?y.zAxisId??m[0]:m[0],v=h[0],C=a[y.type].colorProcessor?.(y,N!==void 0?r[N]:void 0,w!==void 0?l[w]:void 0,p!==void 0?d[p]:void 0)??(()=>""),j={};return N!==void 0&&(j.x=r[N]),w!==void 0&&(j.y=l[w]),v!==void 0&&(j.rotation=f[v]),a[y.type].tooltipGetter({series:y,axesConfig:j,getColor:C,identifier:s})}const SC=kt("div",{name:"MuiChartsTooltip",slot:"Container",overridesResolver:(e,s)=>s.paper})(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,borderRadius:(e.vars||e).shape?.borderRadius,border:`solid ${(e.vars||e).palette.divider} 1px`})),_C=kt("table",{name:"MuiChartsTooltip",slot:"Table"})(({theme:e})=>({borderSpacing:0,[`& .${Ld.markContainer}`]:{display:"inline-block",width:`calc(20px + ${e.spacing(1.5)})`,verticalAlign:"middle"},"& caption":{borderBottom:`solid ${(e.vars||e).palette.divider} 1px`,padding:e.spacing(.5,1.5),textAlign:"start",whiteSpace:"nowrap","& span":{marginRight:e.spacing(1.5)}}})),TC=kt("tr",{name:"MuiChartsTooltip",slot:"Row"})(({theme:e})=>({"tr:first-of-type& td":{paddingTop:e.spacing(.5)},"tr:last-of-type& td":{paddingBottom:e.spacing(.5)}})),kd=kt(L2,{name:"MuiChartsTooltip",slot:"Cell"})(({theme:e})=>({verticalAlign:"middle",color:(e.vars||e).palette.text.secondary,textAlign:"start",[`&.${Ld.cell}`]:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)},[`&.${Ld.labelCell}`]:{whiteSpace:"nowrap",fontWeight:e.typography.fontWeightRegular},[`&.${Ld.valueCell}, &.${Ld.axisValueCell}`]:{color:(e.vars||e).palette.text.primary,fontWeight:e.typography.fontWeightMedium},[`&.${Ld.valueCell}`]:{paddingLeft:e.spacing(1.5),paddingRight:e.spacing(1.5)},"td:first-of-type&, th:first-of-type&":{paddingLeft:e.spacing(1.5)},"td:last-of-type&, th:last-of-type&":{paddingRight:e.spacing(1.5)}}));function cee(e){return qs("MuiChartsLabelMark",e)}const yd=Is("MuiChartsLabelMark",["root","line","square","circle","mask","fill"]),dee=e=>{const{type:s}=e;return Qs({root:typeof s=="function"?["root"]:["root",s],mask:["mask"],fill:["fill"]},cee,e.classes)},iI=(e,s,a)=>g.forwardRef(function(r,i){const l=ar({props:r,name:e}),c=typeof s.defaultProps=="function"?s.defaultProps(l):s.defaultProps??{},d=oc(c,l),m=Kr(),f=s.classesResolver?.(d,m),h=g.forwardRef(a);return t.jsx(h,Oe({},d,{classes:f,ref:i}))}),uee=["type","color","className","classes"],mee=kt("div",{name:"MuiChartsLabelMark",slot:"Root"})(()=>({display:"flex",width:14,height:14,[`&.${yd.line}`]:{width:16,height:"unset",alignItems:"center",[`.${yd.mask}`]:{height:4,width:"100%",borderRadius:1,overflow:"hidden"}},[`&.${yd.square}`]:{height:13,width:13,borderRadius:2,overflow:"hidden"},[`&.${yd.circle}`]:{height:15,width:15},svg:{display:"block"},[`& .${yd.mask} > *`]:{height:"100%",width:"100%"},[`& .${yd.mask}`]:{height:"100%",width:"100%"}})),Wp=iI("MuiChartsLabelMark",{defaultProps:{type:"square"},classesResolver:dee},function(s,a){const{type:n,color:r,className:i,classes:l}=s,c=$t(s,uee),d=n;return t.jsx(mee,Oe({className:It(l?.root,i),ownerState:s,"aria-hidden":"true",ref:a},c,{children:t.jsx("div",{className:l?.mask,children:typeof d=="function"?t.jsx(d,{className:l?.fill,color:r}):t.jsx("svg",{viewBox:"0 0 24 24",preserveAspectRatio:n==="line"?"none":void 0,children:n==="circle"?t.jsx("circle",{className:l?.fill,r:"12",cx:"12",cy:"12",fill:r}):t.jsx("rect",{className:l?.fill,width:"24",height:"24",fill:r})})})}))});function fee(e){const{classes:s,sx:a}=e,n=oee(),r=Ny(s);if(!n)return null;if("values"in n){const{label:m,color:f,markType:h}=n;return t.jsx(SC,{sx:a,className:r.paper,children:t.jsxs(_C,{className:r.table,children:[t.jsxs(L2,{component:"caption",children:[t.jsx("div",{className:r.markContainer,children:t.jsx(Wp,{type:h,color:f,className:r.mark})}),m]}),t.jsx("tbody",{children:n.values.map(({formattedValue:y,label:N})=>t.jsxs(TC,{className:r.row,children:[t.jsx(kd,{className:It(r.labelCell,r.cell),component:"th",children:N}),t.jsx(kd,{className:It(r.valueCell,r.cell),component:"td",children:y})]},N))})]})})}const{color:i,label:l,formattedValue:c,markType:d}=n;return t.jsx(SC,{sx:a,className:r.paper,children:t.jsx(_C,{className:r.table,children:t.jsx("tbody",{children:t.jsxs(TC,{className:r.row,children:[t.jsxs(kd,{className:It(r.labelCell,r.cell),component:"th",children:[t.jsx("div",{className:r.markContainer,children:t.jsx(Wp,{type:d,color:i,className:r.mark})}),l]}),t.jsx(kd,{className:It(r.valueCell,r.cell),component:"td",children:c})]})})})})}function hee(e){const s=bs(),a=gt(s,Cn);return g.useMemo(()=>{const r={};return Object.keys(a).forEach(i=>{r[i]=a[i].colorProcessor}),r},[a])}const gee=i5({themeId:R0});function xee(){const e=b2(),[s,a]=g.useState(null);return g.useEffect(()=>{const n=e.current;if(n===null)return()=>{};const r=l=>{l.pointerType!=="mouse"&&a(null)},i=l=>{a({pointerType:l.pointerType})};return n.addEventListener("pointerenter",i),n.addEventListener("pointerup",r),()=>{n.removeEventListener("pointerenter",i),n.removeEventListener("pointerup",r)}},[e]),s}function pee(e){return e instanceof Date?e.toUTCString():e.toLocaleString()}const yee="@media (pointer: fine)",bee=()=>gee(yee,{defaultMatches:!0}),lI=(e,s)=>s,oI=(e,s)=>s;function cI(e,s,a){return Array.isArray(a)?a.map(n=>k4(s.axis[n],e)):k4(s.axis[a],e)}const dI=nt(Ch,Sh,iK,(e,s,a)=>e===null||s===null?null:lK(a)(e,s)),vee=nt(dI,wc,lI,(e,s,a=s.axisIds[0])=>e===null?null:cI(e,s,a)),uI=nt(dI,wc,oI,(e,s,a=s.axisIds)=>e===null?null:cI(e,s,a));nt(wc,vee,lI,(e,s,a=e.axisIds[0])=>{if(s===null||s===-1||e.axisIds.length===0)return null;const n=e.axis[a]?.data;return n?n[s]:null});nt(wc,uI,oI,(e,s,a=e.axisIds)=>s===null?null:a.map((n,r)=>{const i=s[r];return i===-1?null:e.axis[n].data?.[i]}));const mI=U0({memoizeOptions:{resultEqualityCheck:zd}})(uI,wc,(e,s)=>e===null?[]:s.axisIds.map((a,n)=>({axisId:a,dataIndex:e[n]})).filter(({axisId:a,dataIndex:n})=>s.axis[a].triggerTooltip&&n>=0)),Nee=nt(mI,e=>e.length>0);function UN(e,s,a){const n=e.data?.[s]??null,i=(e.valueFormatter??(l=>e.scaleType==="utc"?pee(l):l.toLocaleString()))(n,{location:"tooltip",scale:e.scale});return{axisDirection:a,axisId:e.id,mainAxis:e,dataIndex:s,axisValue:n,axisFormattedValue:i,seriesItems:[]}}function wee(e={}){const{multipleAxes:s,directions:a}=e,n=cK(),r=dK(),i=uK(),l=bs(),c=gt(l,zP),d=gt(l,FP),m=gt(l,mI),f=hy(),{xAxis:h}=nn(),{yAxis:y}=rn(),{zAxis:N,zAxisIds:w}=y2(),{rotationAxis:p}=NO(),v=hee();if(c.length===0&&d.length===0&&m.length===0)return null;const C=[];return(a===void 0||a.includes("x"))&&c.forEach(({axisId:j,dataIndex:_})=>{!s&&C.length>1||C.push(UN(h[j],_,"x"))}),(a===void 0||a.includes("y"))&&d.forEach(({axisId:j,dataIndex:_})=>{!s&&C.length>1||C.push(UN(y[j],_,"y"))}),(a===void 0||a.includes("rotation"))&&m.forEach(({axisId:j,dataIndex:_})=>{!s&&C.length>1||C.push(UN(p[j],_,"rotation"))}),Object.keys(f).filter(sy).forEach(j=>{const _=f[j];return _?_.seriesOrder.forEach(T=>{const k=_.series[T],E=k.xAxisId??n.id,A=k.yAxisId??r.id,U=C.findIndex(({axisDirection:B,axisId:X})=>B==="x"&&X===E||B==="y"&&X===A);if(U>=0){const B="zAxisId"in k?k.zAxisId:w[0],{dataIndex:X}=C[U],$=v[j]?.(k,h[E],y[A],B?N[B]:void 0)(X)??"",O=k.data[X]??null,G=k.valueFormatter(O,{dataIndex:X}),K=pr(k.label,"tooltip")??null;C[U].seriesItems.push({seriesId:T,color:$,value:O,formattedValue:G,formattedLabel:K,markType:k.labelMarkType})}}):[]}),Object.keys(f).filter(p2).forEach(j=>{const _=f[j];return _?_.seriesOrder.forEach(T=>{const k=_.series[T],E=k.rotationAxisId??i?.id,A=C.findIndex(({axisDirection:U,axisId:B})=>U==="rotation"&&B===E);if(A>=0){const{dataIndex:U}=C[A],B=v[j]?.(k)(U)??"",X=k.data[U]??null,$=k.valueFormatter(X,{dataIndex:U}),O=pr(k.label,"tooltip")??null;C[A].seriesItems.push({seriesId:T,color:B,value:X,formattedValue:$,formattedLabel:O,markType:k.labelMarkType})}}):[]}),s?C:C.length===0?C[0]:null}function jee(e){return wee(Oe({},e,{multipleAxes:!0}))}function Cee(e){const s=Ny(e.classes),a=jee();return a===null?null:t.jsx(SC,{sx:e.sx,className:s.paper,children:a.map(({axisId:n,mainAxis:r,axisValue:i,axisFormattedValue:l,seriesItems:c})=>t.jsxs(_C,{className:s.table,children:[i!=null&&!r.hideTooltip&&t.jsx(L2,{component:"caption",children:l}),t.jsx("tbody",{children:c.map(({seriesId:d,color:m,formattedValue:f,formattedLabel:h,markType:y})=>f==null?null:t.jsxs(TC,{className:s.row,children:[t.jsxs(kd,{className:It(s.labelCell,s.cell),component:"th",children:[t.jsx("div",{className:s.markContainer,children:t.jsx(Wp,{type:y,color:m,className:s.mark})}),h||null]}),t.jsx(kd,{className:It(s.valueCell,s.cell),component:"td",children:f})]},d))})]},n))})}var Ka="top",qn="bottom",Xn="right",Za="left",k2="auto",Dh=[Ka,qn,Xn,Za],au="start",Gf="end",See="clippingParents",fI="viewport",jm="popper",_ee="reference",z4=Dh.reduce(function(e,s){return e.concat([s+"-"+au,s+"-"+Gf])},[]),hI=[].concat(Dh,[k2]).reduce(function(e,s){return e.concat([s,s+"-"+au,s+"-"+Gf])},[]),Tee="beforeRead",Eee="read",Aee="afterRead",Lee="beforeMain",kee="main",Dee="afterMain",Mee="beforeWrite",Pee="write",Oee="afterWrite",Iee=[Tee,Eee,Aee,Lee,kee,Dee,Mee,Pee,Oee];function qr(e){return e?(e.nodeName||"").toLowerCase():null}function jn(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var s=e.ownerDocument;return s&&s.defaultView||window}return e}function uc(e){var s=jn(e).Element;return e instanceof s||e instanceof Element}function Wn(e){var s=jn(e).HTMLElement;return e instanceof s||e instanceof HTMLElement}function D2(e){if(typeof ShadowRoot>"u")return!1;var s=jn(e).ShadowRoot;return e instanceof s||e instanceof ShadowRoot}function $ee(e){var s=e.state;Object.keys(s.elements).forEach(function(a){var n=s.styles[a]||{},r=s.attributes[a]||{},i=s.elements[a];!Wn(i)||!qr(i)||(Object.assign(i.style,n),Object.keys(r).forEach(function(l){var c=r[l];c===!1?i.removeAttribute(l):i.setAttribute(l,c===!0?"":c)}))})}function Ree(e){var s=e.state,a={popper:{position:s.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(s.elements.popper.style,a.popper),s.styles=a,s.elements.arrow&&Object.assign(s.elements.arrow.style,a.arrow),function(){Object.keys(s.elements).forEach(function(n){var r=s.elements[n],i=s.attributes[n]||{},l=Object.keys(s.styles.hasOwnProperty(n)?s.styles[n]:a[n]),c=l.reduce(function(d,m){return d[m]="",d},{});!Wn(r)||!qr(r)||(Object.assign(r.style,c),Object.keys(i).forEach(function(d){r.removeAttribute(d)}))})}}const Uee={name:"applyStyles",enabled:!0,phase:"write",fn:$ee,effect:Ree,requires:["computeStyles"]};function Hr(e){return e.split("-")[0]}var tc=Math.max,Yp=Math.min,nu=Math.round;function EC(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(s){return s.brand+"/"+s.version}).join(" "):navigator.userAgent}function gI(){return!/^((?!chrome|android).)*safari/i.test(EC())}function ru(e,s,a){s===void 0&&(s=!1),a===void 0&&(a=!1);var n=e.getBoundingClientRect(),r=1,i=1;s&&Wn(e)&&(r=e.offsetWidth>0&&nu(n.width)/e.offsetWidth||1,i=e.offsetHeight>0&&nu(n.height)/e.offsetHeight||1);var l=uc(e)?jn(e):window,c=l.visualViewport,d=!gI()&&a,m=(n.left+(d&&c?c.offsetLeft:0))/r,f=(n.top+(d&&c?c.offsetTop:0))/i,h=n.width/r,y=n.height/i;return{width:h,height:y,top:f,right:m+h,bottom:f+y,left:m,x:m,y:f}}function M2(e){var s=ru(e),a=e.offsetWidth,n=e.offsetHeight;return Math.abs(s.width-a)<=1&&(a=s.width),Math.abs(s.height-n)<=1&&(n=s.height),{x:e.offsetLeft,y:e.offsetTop,width:a,height:n}}function xI(e,s){var a=s.getRootNode&&s.getRootNode();if(e.contains(s))return!0;if(a&&D2(a)){var n=s;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Vi(e){return jn(e).getComputedStyle(e)}function zee(e){return["table","td","th"].indexOf(qr(e))>=0}function Xl(e){return((uc(e)?e.ownerDocument:e.document)||window.document).documentElement}function wy(e){return qr(e)==="html"?e:e.assignedSlot||e.parentNode||(D2(e)?e.host:null)||Xl(e)}function F4(e){return!Wn(e)||Vi(e).position==="fixed"?null:e.offsetParent}function Fee(e){var s=/firefox/i.test(EC()),a=/Trident/i.test(EC());if(a&&Wn(e)){var n=Vi(e);if(n.position==="fixed")return null}var r=wy(e);for(D2(r)&&(r=r.host);Wn(r)&&["html","body"].indexOf(qr(r))<0;){var i=Vi(r);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||s&&i.willChange==="filter"||s&&i.filter&&i.filter!=="none")return r;r=r.parentNode}return null}function Mh(e){for(var s=jn(e),a=F4(e);a&&zee(a)&&Vi(a).position==="static";)a=F4(a);return a&&(qr(a)==="html"||qr(a)==="body"&&Vi(a).position==="static")?s:a||Fee(e)||s}function P2(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Nf(e,s,a){return tc(e,Yp(s,a))}function Bee(e,s,a){var n=Nf(e,s,a);return n>a?a:n}function pI(){return{top:0,right:0,bottom:0,left:0}}function yI(e){return Object.assign({},pI(),e)}function bI(e,s){return s.reduce(function(a,n){return a[n]=e,a},{})}var Hee=function(s,a){return s=typeof s=="function"?s(Object.assign({},a.rects,{placement:a.placement})):s,yI(typeof s!="number"?s:bI(s,Dh))};function Gee(e){var s,a=e.state,n=e.name,r=e.options,i=a.elements.arrow,l=a.modifiersData.popperOffsets,c=Hr(a.placement),d=P2(c),m=[Za,Xn].indexOf(c)>=0,f=m?"height":"width";if(!(!i||!l)){var h=Hee(r.padding,a),y=M2(i),N=d==="y"?Ka:Za,w=d==="y"?qn:Xn,p=a.rects.reference[f]+a.rects.reference[d]-l[d]-a.rects.popper[f],v=l[d]-a.rects.reference[d],C=Mh(i),j=C?d==="y"?C.clientHeight||0:C.clientWidth||0:0,_=p/2-v/2,T=h[N],k=j-y[f]-h[w],E=j/2-y[f]/2+_,A=Nf(T,E,k),U=d;a.modifiersData[n]=(s={},s[U]=A,s.centerOffset=A-E,s)}}function Vee(e){var s=e.state,a=e.options,n=a.element,r=n===void 0?"[data-popper-arrow]":n;r!=null&&(typeof r=="string"&&(r=s.elements.popper.querySelector(r),!r)||xI(s.elements.popper,r)&&(s.elements.arrow=r))}const Wee={name:"arrow",enabled:!0,phase:"main",fn:Gee,effect:Vee,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function iu(e){return e.split("-")[1]}var Yee={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Qee(e,s){var a=e.x,n=e.y,r=s.devicePixelRatio||1;return{x:nu(a*r)/r||0,y:nu(n*r)/r||0}}function B4(e){var s,a=e.popper,n=e.popperRect,r=e.placement,i=e.variation,l=e.offsets,c=e.position,d=e.gpuAcceleration,m=e.adaptive,f=e.roundOffsets,h=e.isFixed,y=l.x,N=y===void 0?0:y,w=l.y,p=w===void 0?0:w,v=typeof f=="function"?f({x:N,y:p}):{x:N,y:p};N=v.x,p=v.y;var C=l.hasOwnProperty("x"),j=l.hasOwnProperty("y"),_=Za,T=Ka,k=window;if(m){var E=Mh(a),A="clientHeight",U="clientWidth";if(E===jn(a)&&(E=Xl(a),Vi(E).position!=="static"&&c==="absolute"&&(A="scrollHeight",U="scrollWidth")),E=E,r===Ka||(r===Za||r===Xn)&&i===Gf){T=qn;var B=h&&E===k&&k.visualViewport?k.visualViewport.height:E[A];p-=B-n.height,p*=d?1:-1}if(r===Za||(r===Ka||r===qn)&&i===Gf){_=Xn;var X=h&&E===k&&k.visualViewport?k.visualViewport.width:E[U];N-=X-n.width,N*=d?1:-1}}var $=Object.assign({position:c},m&&Yee),O=f===!0?Qee({x:N,y:p},jn(a)):{x:N,y:p};if(N=O.x,p=O.y,d){var G;return Object.assign({},$,(G={},G[T]=j?"0":"",G[_]=C?"0":"",G.transform=(k.devicePixelRatio||1)<=1?"translate("+N+"px, "+p+"px)":"translate3d("+N+"px, "+p+"px, 0)",G))}return Object.assign({},$,(s={},s[T]=j?p+"px":"",s[_]=C?N+"px":"",s.transform="",s))}function qee(e){var s=e.state,a=e.options,n=a.gpuAcceleration,r=n===void 0?!0:n,i=a.adaptive,l=i===void 0?!0:i,c=a.roundOffsets,d=c===void 0?!0:c,m={placement:Hr(s.placement),variation:iu(s.placement),popper:s.elements.popper,popperRect:s.rects.popper,gpuAcceleration:r,isFixed:s.options.strategy==="fixed"};s.modifiersData.popperOffsets!=null&&(s.styles.popper=Object.assign({},s.styles.popper,B4(Object.assign({},m,{offsets:s.modifiersData.popperOffsets,position:s.options.strategy,adaptive:l,roundOffsets:d})))),s.modifiersData.arrow!=null&&(s.styles.arrow=Object.assign({},s.styles.arrow,B4(Object.assign({},m,{offsets:s.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:d})))),s.attributes.popper=Object.assign({},s.attributes.popper,{"data-popper-placement":s.placement})}const Xee={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:qee,data:{}};var px={passive:!0};function Kee(e){var s=e.state,a=e.instance,n=e.options,r=n.scroll,i=r===void 0?!0:r,l=n.resize,c=l===void 0?!0:l,d=jn(s.elements.popper),m=[].concat(s.scrollParents.reference,s.scrollParents.popper);return i&&m.forEach(function(f){f.addEventListener("scroll",a.update,px)}),c&&d.addEventListener("resize",a.update,px),function(){i&&m.forEach(function(f){f.removeEventListener("scroll",a.update,px)}),c&&d.removeEventListener("resize",a.update,px)}}const Zee={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Kee,data:{}};var Jee={left:"right",right:"left",bottom:"top",top:"bottom"};function xp(e){return e.replace(/left|right|bottom|top/g,function(s){return Jee[s]})}var ete={start:"end",end:"start"};function H4(e){return e.replace(/start|end/g,function(s){return ete[s]})}function O2(e){var s=jn(e),a=s.pageXOffset,n=s.pageYOffset;return{scrollLeft:a,scrollTop:n}}function I2(e){return ru(Xl(e)).left+O2(e).scrollLeft}function tte(e,s){var a=jn(e),n=Xl(e),r=a.visualViewport,i=n.clientWidth,l=n.clientHeight,c=0,d=0;if(r){i=r.width,l=r.height;var m=gI();(m||!m&&s==="fixed")&&(c=r.offsetLeft,d=r.offsetTop)}return{width:i,height:l,x:c+I2(e),y:d}}function ste(e){var s,a=Xl(e),n=O2(e),r=(s=e.ownerDocument)==null?void 0:s.body,i=tc(a.scrollWidth,a.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),l=tc(a.scrollHeight,a.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),c=-n.scrollLeft+I2(e),d=-n.scrollTop;return Vi(r||a).direction==="rtl"&&(c+=tc(a.clientWidth,r?r.clientWidth:0)-i),{width:i,height:l,x:c,y:d}}function $2(e){var s=Vi(e),a=s.overflow,n=s.overflowX,r=s.overflowY;return/auto|scroll|overlay|hidden/.test(a+r+n)}function vI(e){return["html","body","#document"].indexOf(qr(e))>=0?e.ownerDocument.body:Wn(e)&&$2(e)?e:vI(wy(e))}function wf(e,s){var a;s===void 0&&(s=[]);var n=vI(e),r=n===((a=e.ownerDocument)==null?void 0:a.body),i=jn(n),l=r?[i].concat(i.visualViewport||[],$2(n)?n:[]):n,c=s.concat(l);return r?c:c.concat(wf(wy(l)))}function AC(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function ate(e,s){var a=ru(e,!1,s==="fixed");return a.top=a.top+e.clientTop,a.left=a.left+e.clientLeft,a.bottom=a.top+e.clientHeight,a.right=a.left+e.clientWidth,a.width=e.clientWidth,a.height=e.clientHeight,a.x=a.left,a.y=a.top,a}function G4(e,s,a){return s===fI?AC(tte(e,a)):uc(s)?ate(s,a):AC(ste(Xl(e)))}function nte(e){var s=wf(wy(e)),a=["absolute","fixed"].indexOf(Vi(e).position)>=0,n=a&&Wn(e)?Mh(e):e;return uc(n)?s.filter(function(r){return uc(r)&&xI(r,n)&&qr(r)!=="body"}):[]}function rte(e,s,a,n){var r=s==="clippingParents"?nte(e):[].concat(s),i=[].concat(r,[a]),l=i[0],c=i.reduce(function(d,m){var f=G4(e,m,n);return d.top=tc(f.top,d.top),d.right=Yp(f.right,d.right),d.bottom=Yp(f.bottom,d.bottom),d.left=tc(f.left,d.left),d},G4(e,l,n));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function NI(e){var s=e.reference,a=e.element,n=e.placement,r=n?Hr(n):null,i=n?iu(n):null,l=s.x+s.width/2-a.width/2,c=s.y+s.height/2-a.height/2,d;switch(r){case Ka:d={x:l,y:s.y-a.height};break;case qn:d={x:l,y:s.y+s.height};break;case Xn:d={x:s.x+s.width,y:c};break;case Za:d={x:s.x-a.width,y:c};break;default:d={x:s.x,y:s.y}}var m=r?P2(r):null;if(m!=null){var f=m==="y"?"height":"width";switch(i){case au:d[m]=d[m]-(s[f]/2-a[f]/2);break;case Gf:d[m]=d[m]+(s[f]/2-a[f]/2);break}}return d}function Vf(e,s){s===void 0&&(s={});var a=s,n=a.placement,r=n===void 0?e.placement:n,i=a.strategy,l=i===void 0?e.strategy:i,c=a.boundary,d=c===void 0?See:c,m=a.rootBoundary,f=m===void 0?fI:m,h=a.elementContext,y=h===void 0?jm:h,N=a.altBoundary,w=N===void 0?!1:N,p=a.padding,v=p===void 0?0:p,C=yI(typeof v!="number"?v:bI(v,Dh)),j=y===jm?_ee:jm,_=e.rects.popper,T=e.elements[w?j:y],k=rte(uc(T)?T:T.contextElement||Xl(e.elements.popper),d,f,l),E=ru(e.elements.reference),A=NI({reference:E,element:_,placement:r}),U=AC(Object.assign({},_,A)),B=y===jm?U:E,X={top:k.top-B.top+C.top,bottom:B.bottom-k.bottom+C.bottom,left:k.left-B.left+C.left,right:B.right-k.right+C.right},$=e.modifiersData.offset;if(y===jm&&$){var O=$[r];Object.keys(X).forEach(function(G){var K=[Xn,qn].indexOf(G)>=0?1:-1,ae=[Ka,qn].indexOf(G)>=0?"y":"x";X[G]+=O[ae]*K})}return X}function ite(e,s){s===void 0&&(s={});var a=s,n=a.placement,r=a.boundary,i=a.rootBoundary,l=a.padding,c=a.flipVariations,d=a.allowedAutoPlacements,m=d===void 0?hI:d,f=iu(n),h=f?c?z4:z4.filter(function(w){return iu(w)===f}):Dh,y=h.filter(function(w){return m.indexOf(w)>=0});y.length===0&&(y=h);var N=y.reduce(function(w,p){return w[p]=Vf(e,{placement:p,boundary:r,rootBoundary:i,padding:l})[Hr(p)],w},{});return Object.keys(N).sort(function(w,p){return N[w]-N[p]})}function lte(e){if(Hr(e)===k2)return[];var s=xp(e);return[H4(e),s,H4(s)]}function ote(e){var s=e.state,a=e.options,n=e.name;if(!s.modifiersData[n]._skip){for(var r=a.mainAxis,i=r===void 0?!0:r,l=a.altAxis,c=l===void 0?!0:l,d=a.fallbackPlacements,m=a.padding,f=a.boundary,h=a.rootBoundary,y=a.altBoundary,N=a.flipVariations,w=N===void 0?!0:N,p=a.allowedAutoPlacements,v=s.options.placement,C=Hr(v),j=C===v,_=d||(j||!w?[xp(v)]:lte(v)),T=[v].concat(_).reduce(function(he,be){return he.concat(Hr(be)===k2?ite(s,{placement:be,boundary:f,rootBoundary:h,padding:m,flipVariations:w,allowedAutoPlacements:p}):be)},[]),k=s.rects.reference,E=s.rects.popper,A=new Map,U=!0,B=T[0],X=0;X<T.length;X++){var $=T[X],O=Hr($),G=iu($)===au,K=[Ka,qn].indexOf(O)>=0,ae=K?"width":"height",R=Vf(s,{placement:$,boundary:f,rootBoundary:h,altBoundary:y,padding:m}),Z=K?G?Xn:Za:G?qn:Ka;k[ae]>E[ae]&&(Z=xp(Z));var te=xp(Z),ge=[];if(i&&ge.push(R[O]<=0),c&&ge.push(R[Z]<=0,R[te]<=0),ge.every(function(he){return he})){B=$,U=!1;break}A.set($,ge)}if(U)for(var le=w?3:1,W=function(be){var Le=T.find(function(Me){var ke=A.get(Me);if(ke)return ke.slice(0,be).every(function(F){return F})});if(Le)return B=Le,"break"},ee=le;ee>0;ee--){var J=W(ee);if(J==="break")break}s.placement!==B&&(s.modifiersData[n]._skip=!0,s.placement=B,s.reset=!0)}}const cte={name:"flip",enabled:!0,phase:"main",fn:ote,requiresIfExists:["offset"],data:{_skip:!1}};function V4(e,s,a){return a===void 0&&(a={x:0,y:0}),{top:e.top-s.height-a.y,right:e.right-s.width+a.x,bottom:e.bottom-s.height+a.y,left:e.left-s.width-a.x}}function W4(e){return[Ka,Xn,qn,Za].some(function(s){return e[s]>=0})}function dte(e){var s=e.state,a=e.name,n=s.rects.reference,r=s.rects.popper,i=s.modifiersData.preventOverflow,l=Vf(s,{elementContext:"reference"}),c=Vf(s,{altBoundary:!0}),d=V4(l,n),m=V4(c,r,i),f=W4(d),h=W4(m);s.modifiersData[a]={referenceClippingOffsets:d,popperEscapeOffsets:m,isReferenceHidden:f,hasPopperEscaped:h},s.attributes.popper=Object.assign({},s.attributes.popper,{"data-popper-reference-hidden":f,"data-popper-escaped":h})}const ute={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:dte};function mte(e,s,a){var n=Hr(e),r=[Za,Ka].indexOf(n)>=0?-1:1,i=typeof a=="function"?a(Object.assign({},s,{placement:e})):a,l=i[0],c=i[1];return l=l||0,c=(c||0)*r,[Za,Xn].indexOf(n)>=0?{x:c,y:l}:{x:l,y:c}}function fte(e){var s=e.state,a=e.options,n=e.name,r=a.offset,i=r===void 0?[0,0]:r,l=hI.reduce(function(f,h){return f[h]=mte(h,s.rects,i),f},{}),c=l[s.placement],d=c.x,m=c.y;s.modifiersData.popperOffsets!=null&&(s.modifiersData.popperOffsets.x+=d,s.modifiersData.popperOffsets.y+=m),s.modifiersData[n]=l}const hte={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:fte};function gte(e){var s=e.state,a=e.name;s.modifiersData[a]=NI({reference:s.rects.reference,element:s.rects.popper,placement:s.placement})}const xte={name:"popperOffsets",enabled:!0,phase:"read",fn:gte,data:{}};function pte(e){return e==="x"?"y":"x"}function yte(e){var s=e.state,a=e.options,n=e.name,r=a.mainAxis,i=r===void 0?!0:r,l=a.altAxis,c=l===void 0?!1:l,d=a.boundary,m=a.rootBoundary,f=a.altBoundary,h=a.padding,y=a.tether,N=y===void 0?!0:y,w=a.tetherOffset,p=w===void 0?0:w,v=Vf(s,{boundary:d,rootBoundary:m,padding:h,altBoundary:f}),C=Hr(s.placement),j=iu(s.placement),_=!j,T=P2(C),k=pte(T),E=s.modifiersData.popperOffsets,A=s.rects.reference,U=s.rects.popper,B=typeof p=="function"?p(Object.assign({},s.rects,{placement:s.placement})):p,X=typeof B=="number"?{mainAxis:B,altAxis:B}:Object.assign({mainAxis:0,altAxis:0},B),$=s.modifiersData.offset?s.modifiersData.offset[s.placement]:null,O={x:0,y:0};if(E){if(i){var G,K=T==="y"?Ka:Za,ae=T==="y"?qn:Xn,R=T==="y"?"height":"width",Z=E[T],te=Z+v[K],ge=Z-v[ae],le=N?-U[R]/2:0,W=j===au?A[R]:U[R],ee=j===au?-U[R]:-A[R],J=s.elements.arrow,he=N&&J?M2(J):{width:0,height:0},be=s.modifiersData["arrow#persistent"]?s.modifiersData["arrow#persistent"].padding:pI(),Le=be[K],Me=be[ae],ke=Nf(0,A[R],he[R]),F=_?A[R]/2-le-ke-Le-X.mainAxis:W-ke-Le-X.mainAxis,ve=_?-A[R]/2+le+ke+Me+X.mainAxis:ee+ke+Me+X.mainAxis,Ce=s.elements.arrow&&Mh(s.elements.arrow),D=Ce?T==="y"?Ce.clientTop||0:Ce.clientLeft||0:0,re=(G=$?.[T])!=null?G:0,oe=Z+F-re-D,je=Z+ve-re,Re=Nf(N?Yp(te,oe):te,Z,N?tc(ge,je):ge);E[T]=Re,O[T]=Re-Z}if(c){var Ke,et=T==="x"?Ka:Za,qe=T==="x"?qn:Xn,Ze=E[k],we=k==="y"?"height":"width",V=Ze+v[et],pe=Ze-v[qe],z=[Ka,Za].indexOf(C)!==-1,ie=(Ke=$?.[k])!=null?Ke:0,ue=z?V:Ze-A[we]-U[we]-ie+X.altAxis,M=z?Ze+A[we]+U[we]-ie-X.altAxis:pe,xe=N&&z?Bee(ue,Ze,M):Nf(N?ue:V,Ze,N?M:pe);E[k]=xe,O[k]=xe-Ze}s.modifiersData[n]=O}}const bte={name:"preventOverflow",enabled:!0,phase:"main",fn:yte,requiresIfExists:["offset"]};function vte(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Nte(e){return e===jn(e)||!Wn(e)?O2(e):vte(e)}function wte(e){var s=e.getBoundingClientRect(),a=nu(s.width)/e.offsetWidth||1,n=nu(s.height)/e.offsetHeight||1;return a!==1||n!==1}function jte(e,s,a){a===void 0&&(a=!1);var n=Wn(s),r=Wn(s)&&wte(s),i=Xl(s),l=ru(e,r,a),c={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(n||!n&&!a)&&((qr(s)!=="body"||$2(i))&&(c=Nte(s)),Wn(s)?(d=ru(s,!0),d.x+=s.clientLeft,d.y+=s.clientTop):i&&(d.x=I2(i))),{x:l.left+c.scrollLeft-d.x,y:l.top+c.scrollTop-d.y,width:l.width,height:l.height}}function Cte(e){var s=new Map,a=new Set,n=[];e.forEach(function(i){s.set(i.name,i)});function r(i){a.add(i.name);var l=[].concat(i.requires||[],i.requiresIfExists||[]);l.forEach(function(c){if(!a.has(c)){var d=s.get(c);d&&r(d)}}),n.push(i)}return e.forEach(function(i){a.has(i.name)||r(i)}),n}function Ste(e){var s=Cte(e);return Iee.reduce(function(a,n){return a.concat(s.filter(function(r){return r.phase===n}))},[])}function _te(e){var s;return function(){return s||(s=new Promise(function(a){Promise.resolve().then(function(){s=void 0,a(e())})})),s}}function Tte(e){var s=e.reduce(function(a,n){var r=a[n.name];return a[n.name]=r?Object.assign({},r,n,{options:Object.assign({},r.options,n.options),data:Object.assign({},r.data,n.data)}):n,a},{});return Object.keys(s).map(function(a){return s[a]})}var Y4={placement:"bottom",modifiers:[],strategy:"absolute"};function Q4(){for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return!s.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function Ete(e){e===void 0&&(e={});var s=e,a=s.defaultModifiers,n=a===void 0?[]:a,r=s.defaultOptions,i=r===void 0?Y4:r;return function(c,d,m){m===void 0&&(m=i);var f={placement:"bottom",orderedModifiers:[],options:Object.assign({},Y4,i),modifiersData:{},elements:{reference:c,popper:d},attributes:{},styles:{}},h=[],y=!1,N={state:f,setOptions:function(C){var j=typeof C=="function"?C(f.options):C;p(),f.options=Object.assign({},i,f.options,j),f.scrollParents={reference:uc(c)?wf(c):c.contextElement?wf(c.contextElement):[],popper:wf(d)};var _=Ste(Tte([].concat(n,f.options.modifiers)));return f.orderedModifiers=_.filter(function(T){return T.enabled}),w(),N.update()},forceUpdate:function(){if(!y){var C=f.elements,j=C.reference,_=C.popper;if(Q4(j,_)){f.rects={reference:jte(j,Mh(_),f.options.strategy==="fixed"),popper:M2(_)},f.reset=!1,f.placement=f.options.placement,f.orderedModifiers.forEach(function(X){return f.modifiersData[X.name]=Object.assign({},X.data)});for(var T=0;T<f.orderedModifiers.length;T++){if(f.reset===!0){f.reset=!1,T=-1;continue}var k=f.orderedModifiers[T],E=k.fn,A=k.options,U=A===void 0?{}:A,B=k.name;typeof E=="function"&&(f=E({state:f,options:U,name:B,instance:N})||f)}}}},update:_te(function(){return new Promise(function(v){N.forceUpdate(),v(f)})}),destroy:function(){p(),y=!0}};if(!Q4(c,d))return N;N.setOptions(m).then(function(v){!y&&m.onFirstUpdate&&m.onFirstUpdate(v)});function w(){f.orderedModifiers.forEach(function(v){var C=v.name,j=v.options,_=j===void 0?{}:j,T=v.effect;if(typeof T=="function"){var k=T({state:f,name:C,instance:N,options:_}),E=function(){};h.push(k||E)}})}function p(){h.forEach(function(v){return v()}),h=[]}return N}}var Ate=[Zee,xte,Xee,Uee,hte,cte,bte,Wee,ute],Lte=Ete({defaultModifiers:Ate});function q4(e,s){typeof e=="function"?e(s):e&&(e.current=s)}function kte(e){return typeof e=="function"?e():e}const Dte=g.forwardRef(function(s,a){const{children:n,container:r,disablePortal:i=!1}=s,[l,c]=g.useState(null),d=Qr(g.isValidElement(n)?v5(n):null,a);if(na(()=>{i||c(kte(r)||document.body)},[r,i]),na(()=>{if(l&&!i)return q4(a,l),()=>{q4(a,null)}},[a,l,i]),i){if(g.isValidElement(n)){const m={ref:d};return g.cloneElement(n,m)}return n}return l&&r1.createPortal(n,l)});function Mte(e){return qs("MuiPopper",e)}Is("MuiPopper",["root"]);function Pte(e,s){if(s==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function LC(e){return typeof e=="function"?e():e}function Ote(e){return e.nodeType!==void 0}const Ite=e=>{const{classes:s}=e;return Qs({root:["root"]},Mte,s)},$te={},Rte=g.forwardRef(function(s,a){const{anchorEl:n,children:r,direction:i,disablePortal:l,modifiers:c,open:d,placement:m,popperOptions:f,popperRef:h,slotProps:y={},slots:N={},TransitionProps:w,ownerState:p,...v}=s,C=g.useRef(null),j=Qr(C,a),_=g.useRef(null),T=Qr(_,h),k=g.useRef(T);na(()=>{k.current=T},[T]),g.useImperativeHandle(h,()=>_.current,[]);const E=Pte(m,i),[A,U]=g.useState(E),[B,X]=g.useState(LC(n));g.useEffect(()=>{_.current&&_.current.forceUpdate()}),g.useEffect(()=>{n&&X(LC(n))},[n]),na(()=>{if(!B||!d)return;const ae=te=>{U(te.placement)};let R=[{name:"preventOverflow",options:{altBoundary:l}},{name:"flip",options:{altBoundary:l}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:te})=>{ae(te)}}];c!=null&&(R=R.concat(c)),f&&f.modifiers!=null&&(R=R.concat(f.modifiers));const Z=Lte(B,C.current,{placement:E,...f,modifiers:R});return k.current(Z),()=>{Z.destroy(),k.current(null)}},[B,l,c,d,f,E]);const $={placement:A};w!==null&&($.TransitionProps=w);const O=Ite(s),G=N.root??"div",K=zi({elementType:G,externalSlotProps:y.root,externalForwardedProps:v,additionalProps:{role:"tooltip",ref:j},ownerState:s,className:O.root});return t.jsx(G,{...K,children:typeof r=="function"?r($):r})}),Ute=g.forwardRef(function(s,a){const{anchorEl:n,children:r,container:i,direction:l="ltr",disablePortal:c=!1,keepMounted:d=!1,modifiers:m,open:f,placement:h="bottom",popperOptions:y=$te,popperRef:N,style:w,transition:p=!1,slotProps:v={},slots:C={},...j}=s,[_,T]=g.useState(!0),k=()=>{T(!1)},E=()=>{T(!0)};if(!d&&!f&&(!p||_))return null;let A;if(i)A=i;else if(n){const X=LC(n);A=X&&Ote(X)?aC(X).body:aC(null).body}const U=!f&&d&&(!p||_)?"none":void 0,B=p?{in:f,onEnter:k,onExited:E}:void 0;return t.jsx(Dte,{disablePortal:c,container:A,children:t.jsx(Rte,{anchorEl:n,direction:l,disablePortal:c,modifiers:m,ref:a,open:p?!_:f,placement:h,popperOptions:y,popperRef:N,slotProps:v,slots:C,...j,style:{position:"fixed",top:0,left:0,display:U,...w},TransitionProps:B,children:r})})}),zte=kt(Ute,{name:"MuiPopper",slot:"Root"})({}),Fte=g.forwardRef(function(s,a){const n=ph(),r=Wl({props:s,name:"MuiPopper"}),{anchorEl:i,component:l,components:c,componentsProps:d,container:m,disablePortal:f,keepMounted:h,modifiers:y,open:N,placement:w,popperOptions:p,popperRef:v,transition:C,slots:j,slotProps:_,...T}=r,k=j?.root??c?.Root,E={anchorEl:i,container:m,disablePortal:f,keepMounted:h,modifiers:y,open:N,placement:w,popperOptions:p,popperRef:v,transition:C,...T};return t.jsx(zte,{as:l,direction:n?"rtl":"ltr",slots:{root:k},slotProps:_??d,...E,ref:a})});function Bte(e){const{children:s,defer:a=!1,fallback:n=null}=e,[r,i]=g.useState(!1);return na(()=>{a||i(!0)},[a]),g.useEffect(()=>{a&&i(!0)},[a]),r?s:n}function X4(e){let s,a;const n=()=>{a=null,e(...s)};function r(...i){s=i,a||(a=requestAnimationFrame(n))}return r.clear=()=>{a&&(cancelAnimationFrame(a),a=null)},r}function Hte(){const e=bs(),s=gt(e,vO),a=gt(e,Zr);return s!==void 0?"polar":a!==void 0?"cartesian":"none"}const Gte=["trigger","position","anchor","classes","children"],K4=()=>!1;function Vte(e,s,a){return a?K4:e==="item"?Gq:s==="polar"?Nee:s==="cartesian"?qq:K4}const Wte=kt(Fte,{name:"MuiChartsTooltip",slot:"Root"})(({theme:e})=>({pointerEvents:"none",zIndex:e.zIndex.modal}));function Yte(e){const s=ar({props:e,name:"MuiChartsTooltipContainer"}),{trigger:a="axis",position:n,anchor:r="pointer",classes:i,children:l}=s,c=$t(s,Gte),d=b2(),m=Ny(i),f=xee(),h=bee(),y=g.useRef(null),N=z0(()=>({x:0,y:0})),w=Hte(),p=bs(),v=gt(p,aX),C=gt(p,Vte(a,w,v)),_=gt(p,_h)==="keyboard"?"node":r,T=gt(p,a==="item"&&_==="node"?Vq:()=>null,n);g.useEffect(()=>{const B=d.current;if(B===null)return()=>{};if(T!==null){const O=X4(()=>{N.current={x:B.getBoundingClientRect().left+(T?.x??0),y:B.getBoundingClientRect().top+(T?.y??0)},y.current?.update()});return O(),()=>O.clear()}const X=X4((O,G)=>{N.current={x:O,y:G},y.current?.update()}),$=O=>{X(O.clientX,O.clientY)};return B.addEventListener("pointerdown",$),B.addEventListener("pointermove",$),B.addEventListener("pointerenter",$),()=>{B.removeEventListener("pointerdown",$),B.removeEventListener("pointermove",$),B.removeEventListener("pointerenter",$),X.clear()}},[d,N,T]);const k=g.useMemo(()=>({getBoundingClientRect:()=>({x:N.current.x,y:N.current.y,top:N.current.y,left:N.current.x,right:N.current.x,bottom:N.current.y,width:0,height:0,toJSON:()=>""})}),[N]),E=f?.pointerType==="mouse"||h,A=f?.pointerType==="touch"||!h,U=g.useMemo(()=>[{name:"offset",options:{offset:()=>A?[0,64]:[0,8]}},...E?[]:[{name:"flip",options:{fallbackPlacements:["top-end","top-start","bottom-end","bottom"]}}],{name:"preventOverflow",options:{altAxis:!0}}],[E,A]);return a==="none"?null:t.jsx(Bte,{children:C&&t.jsx(Wte,Oe({},c,{className:m?.root,open:C,placement:c.placement??n??(E?"right-start":"top"),popperRef:y,anchorEl:k,modifiers:U,children:l}))})}function Qte(e){const{classes:s,trigger:a="axis"}=e,n=Ny(s);return t.jsx(Yte,Oe({},e,{classes:s,children:a==="axis"?t.jsx(Cee,{classes:n}):t.jsx(fee,{classes:n})}))}const qte=e=>({type:"series",color:e.color,label:e.label,seriesId:e.seriesId,itemId:e.itemId});function Xte(e){return qs("MuiChartsLegend",e)}const Kte=e=>{const{classes:s,direction:a}=e;return Qs({root:["root",a],item:["item"],mark:["mark"],label:["label"],series:["series"]},Xte,s)},Z4=Is("MuiChartsLegend",["root","item","series","mark","label","vertical","horizontal"]),Zte=["slots","slotProps"],Jte=["ownerState"],ese=(e,s,a,n)=>{function r(i,l){const c=ar({props:i,name:e}),d=typeof a.defaultProps=="function"?a.defaultProps(c):a.defaultProps??{},m=oc(d,c),f=m,{slots:h,slotProps:y}=f,N=$t(f,Zte),w=Kr(),p=a.classesResolver?.(m,w),v=h?.[s]??n,C=a.propagateSlots&&!h?.[s],j=zi({elementType:v,externalSlotProps:y?.[s],additionalProps:Oe({},N,{classes:p},C&&{slots:h,slotProps:y}),ownerState:{}}),_=$t(j,Jte),T=Oe({},_);for(const k of a.omitProps??[])delete T[k];return t.jsx(v,Oe({},T,{ref:l}))}return g.forwardRef(r)};function tse(e){return qs("MuiChartsLabel",e)}Is("MuiChartsLabel",["root"]);const sse=e=>Qs({root:["root"]},tse,e.classes),ase=["children","className","classes"],nse=iI("MuiChartsLabel",{classesResolver:sse},function(s,a){const{children:n,className:r,classes:i}=s,l=$t(s,ase);return t.jsx("span",Oe({className:It(i?.root,r),ref:a},l,{children:n}))}),rse=["direction","onItemClick","className","classes"],ise=kt("ul",{name:"MuiChartsLegend",slot:"Root"})(({ownerState:e,theme:s})=>Oe({},s.typography.caption,{color:(s.vars||s).palette.text.primary,lineHeight:"100%",display:"flex",flexDirection:e.direction==="vertical"?"column":"row",alignItems:e.direction==="vertical"?void 0:"center",flexShrink:0,gap:s.spacing(2),listStyleType:"none",paddingInlineStart:0,marginBlock:s.spacing(1),marginInline:s.spacing(1),flexWrap:"wrap",li:{display:e.direction==="horizontal"?"inline-flex":void 0},[`button.${Z4.series}`]:{background:"none",border:"none",padding:0,fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",letterSpacing:"inherit",color:"inherit"},[`& .${Z4.series}`]:{display:e.direction==="vertical"?"flex":"inline-flex",alignItems:"center",gap:s.spacing(1)},gridArea:"legend"})),lse=ese("MuiChartsLegend","legend",{defaultProps:{direction:"horizontal"},omitProps:["position"],classesResolver:Kte},g.forwardRef(function(s,a){const n=_K(),{onItemClick:r,className:i,classes:l}=s,c=$t(s,rse);if(n.items.length===0)return null;const d=r?"button":"div";return t.jsx(ise,Oe({className:It(l?.root,i),ref:a},c,{ownerState:s,children:n.items.map((m,f)=>t.jsx("li",{className:l?.item,"data-series":m.id,children:t.jsxs(d,{className:l?.series,role:r?"button":void 0,type:r?"button":void 0,onClick:r?(h=>r(h,qte(m),f)):void 0,children:[t.jsx(Wp,{className:l?.mark,color:m.color,type:m.markType}),t.jsx(nse,{className:l?.label,children:m.label})]})},m.id))}))}));function ose(e){return qs("MuiChartsAxisHighlight",e)}Is("MuiChartsAxisHighlight",["root"]);const Qp=kt("path",{name:"MuiChartsAxisHighlight",slot:"Root"})(({theme:e})=>({pointerEvents:"none",variants:[{props:{axisHighlight:"band"},style:Oe({fill:"white",fillOpacity:.1},e.applyStyles("light",{fill:"gray"}))},{props:{axisHighlight:"line"},style:Oe({strokeDasharray:"5 2",stroke:"#ffffff"},e.applyStyles("light",{stroke:"#000000"}))}]}));function cse(e){const{type:s,classes:a}=e,{left:n,width:r}=nr(),i=bs(),l=gt(i,rX),c=gt(i,Ia);return l.length===0?null:l.map(({axisId:d,value:m})=>{const h=c.axis[d].scale,y=vu(h),N=s==="band"&&m!==null&&da(h);return t.jsxs(g.Fragment,{children:[N&&h(m)!==void 0&&t.jsx(Qp,{d:`M ${n} ${h(m)-(h.step()-h.bandwidth())/2} l 0 ${h.step()} l ${r} 0 l 0 ${-h.step()} Z`,className:a.root,ownerState:{axisHighlight:"band"}}),s==="line"&&m!==null&&t.jsx(Qp,{d:`M ${n} ${y(m)} L ${n+r} ${y(m)}`,className:a.root,ownerState:{axisHighlight:"line"}})]},`${d}-${m}`)})}function dse(e){const{type:s,classes:a}=e,{top:n,height:r}=nr(),i=bs(),l=gt(i,nX),c=gt(i,Oa);return l.length===0?null:l.map(({axisId:d,value:m})=>{const h=c.axis[d].scale,y=vu(h),N=s==="band"&&m!==null&&da(h);return t.jsxs(g.Fragment,{children:[N&&h(m)!==void 0&&t.jsx(Qp,{d:`M ${h(m)-(h.step()-h.bandwidth())/2} ${n} l ${h.step()} 0 l 0 ${r} l ${-h.step()} 0 Z`,className:a.root,ownerState:{axisHighlight:"band"}}),s==="line"&&m!==null&&t.jsx(Qp,{d:`M ${y(m)} ${n} L ${y(m)} ${n+r}`,className:a.root,ownerState:{axisHighlight:"line"}})]},`${d}-${m}`)})}const use=()=>Qs({root:["root"]},ose);function mse(e){const{x:s,y:a}=e,n=use();return t.jsxs(g.Fragment,{children:[s&&s!=="none"&&t.jsx(dse,{type:s,classes:n}),a&&a!=="none"&&t.jsx(cse,{type:a,classes:n})]})}function fse(e){const{id:s,offset:a}=e,{left:n,top:r,width:i,height:l}=nr(),c=Oe({top:0,right:0,bottom:0,left:0},a);return t.jsx("clipPath",{id:s,children:t.jsx("rect",{x:n-c.left,y:r-c.top,width:i+c.left+c.right,height:l+c.top+c.bottom})})}const hse=parseInt(g.version,10),gse=["x","y","id","classes","color","shape"];function xse(e){return qs("MuiHighlightElement",e)}Is("MuiHighlightElement",["root"]);const pse=e=>{const{classes:s,id:a}=e,n={root:["root",`series-${a}`]};return Qs(n,xse,s)};function yse(e){const{x:s,y:a,color:n,shape:r}=e,i=$t(e,gse),l=pse(e),c=r==="circle"?"circle":"path",d=r==="circle"?{cx:0,cy:0,r:i.r===void 0?5:i.r}:{d:oO(lO[RO(r)])()},m=hse>18?{transformOrigin:`${s} ${a}`}:{"transform-origin":`${s} ${a}`};return t.jsx(c,Oe({pointerEvents:"none",className:l.root,transform:`translate(${s} ${a})`,fill:n},m,d,i))}const bse=["slots","slotProps"];function vse(e){const{slots:s,slotProps:a}=e,n=$t(e,bse),r=Lh(),{xAxis:i,xAxisIds:l}=nn(),{yAxis:c,yAxisIds:d}=rn(),{instance:m}=Sn(),f=bs(),h=gt(f,VP);if(h.length===0||r===void 0)return null;const{series:y,stackingGroups:N}=r,w=l[0],p=d[0],v=s?.lineHighlight??yse;return t.jsx("g",Oe({},n,{children:h.flatMap(({dataIndex:C,axisId:j})=>N.flatMap(({ids:_})=>_.flatMap(T=>{const{xAxisId:k=w,yAxisId:E=p,stackedData:A,data:U,disableHighlight:B,shape:X="circle"}=y[T];if(B||U[C]==null||j!==k)return null;const $=vu(i[k].scale),O=c[E].scale,G=i[k].data;if(G===void 0)throw new Error(`MUI X Charts: ${k===B0?"The first `xAxis`":`The x-axis with id "${k}"`} should have data property to be able to display a line plot.`);const K=$(G[C]),ae=O(A[C][1]);if(!m.isPointInside(K,ae))return null;const R=C2(y[T],i[k],c[E]);return t.jsx(v,Oe({id:T,color:R(C),x:K,y:ae,shape:X},a?.lineHighlight),`${T}`)})))}))}function Nse(e){return qs("MuiChartsGrid",e)}const J4=Is("MuiChartsGrid",["root","line","horizontalLine","verticalLine"]),wse=kt("g",{name:"MuiChartsGrid",slot:"Root",overridesResolver:(e,s)=>[{[`&.${J4.verticalLine}`]:s.verticalLine},{[`&.${J4.horizontalLine}`]:s.horizontalLine},s.root]})({}),wI=kt("line",{name:"MuiChartsGrid",slot:"Line"})(({theme:e})=>({stroke:(e.vars||e).palette.divider,shapeRendering:"crispEdges",strokeWidth:1}));function jse(e){const{instance:s}=Sn(),{axis:a,start:n,end:r,classes:i}=e,{scale:l,tickNumber:c,tickInterval:d}=a,m=by({scale:l,tickNumber:c,tickInterval:d,direction:"x"});return t.jsx(g.Fragment,{children:m.map(({value:f,offset:h})=>s.isXInside(h)?t.jsx(wI,{y1:n,y2:r,x1:h,x2:h,className:i.verticalLine},`vertical-${f?.getTime?.()??f}`):null)})}function Cse(e){const{instance:s}=Sn(),{axis:a,start:n,end:r,classes:i}=e,{scale:l,tickNumber:c,tickInterval:d}=a,m=by({scale:l,tickNumber:c,tickInterval:d,direction:"y"});return t.jsx(g.Fragment,{children:m.map(({value:f,offset:h})=>s.isYInside(h)?t.jsx(wI,{y1:h,y2:h,x1:n,x2:r,className:i.horizontalLine},`horizontal-${f?.getTime?.()??f}`):null)})}const Sse=["vertical","horizontal"],_se=({classes:e})=>Qs({root:["root"],verticalLine:["line","verticalLine"],horizontalLine:["line","horizontalLine"]},Nse,e);function Tse(e){const s=ar({props:e,name:"MuiChartsGrid"}),a=nr(),{vertical:n,horizontal:r}=s,i=$t(s,Sse),{xAxis:l,xAxisIds:c}=nn(),{yAxis:d,yAxisIds:m}=rn(),f=_se(s),h=d[m[0]],y=l[c[0]];return t.jsxs(wse,Oe({},i,{className:f.root,children:[n&&t.jsx(jse,{axis:y,start:a.top,end:a.height+a.top,classes:f}),r&&t.jsx(Cse,{axis:h,start:a.left,end:a.width+a.left,classes:f})]}))}const Ese=["message"],Ase=kt("text")(({theme:e})=>Oe({},e.typography.body2,{stroke:"none",fill:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges",textAnchor:"middle",dominantBaseline:"middle"}));function Lse(e){const{message:s}=e,a=$t(e,Ese),{top:n,left:r,height:i,width:l}=nr(),{localeText:c}=kO();return t.jsx(Ase,Oe({x:r+l/2,y:n+i/2},a,{children:s??c.loading}))}const kse=["message"],Dse=kt("text")(({theme:e})=>Oe({},e.typography.body2,{stroke:"none",fill:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges",textAnchor:"middle",dominantBaseline:"middle"}));function Mse(e){const{message:s}=e,a=$t(e,kse),{top:n,left:r,height:i,width:l}=nr(),{localeText:c}=kO();return t.jsx(Dse,Oe({x:r+l/2,y:n+i/2},a,{children:s??c.noData}))}function Pse(){const e=hy();return Object.values(e).every(s=>{if(!s)return!0;const{series:a,seriesOrder:n}=s;return n.every(r=>{const i=a[r];return i.type==="sankey"?i.data.links.length===0:i.data.length===0})})}function Ose(e){const s=Pse();if(e.loading){const a=e.slots?.loadingOverlay??Lse;return t.jsx(a,Oe({},e.slotProps?.loadingOverlay))}if(s){const a=e.slots?.noDataOverlay??Mse;return t.jsx(a,Oe({},e.slotProps?.noDataOverlay))}return null}const Ise=[Eh,Th,jh,yu,Ah,ry],$se=["xAxis","yAxis","series","width","height","margin","colors","dataset","sx","onAreaClick","onLineClick","onMarkClick","axisHighlight","disableLineItemHighlight","hideLegend","grid","children","slots","slotProps","skipAnimation","loading","highlightedItem","onHighlightChange","className","showToolbar","brushConfig"],Rse=e=>{const{xAxis:s,yAxis:a,series:n,width:r,height:i,margin:l,colors:c,dataset:d,sx:m,onAreaClick:f,onLineClick:h,onMarkClick:y,axisHighlight:N,disableLineItemHighlight:w,grid:p,children:v,slots:C,slotProps:j,skipAnimation:_,loading:T,highlightedItem:k,onHighlightChange:E,className:A,brushConfig:U}=e,B=$t(e,$se),$=`${$0()}-clip-path`,O=g.useMemo(()=>n.map(Le=>Oe({disableHighlight:!!w,type:"line"},Le)),[w,n]),G=Oe({},B,{series:O,width:r,height:i,margin:l,colors:c,dataset:d,xAxis:s??[{id:B0,scaleType:"point",data:Array.from({length:Math.max(...n.map(Le=>(Le.data??d??[]).length))},(Le,Me)=>Me)}],yAxis:a,highlightedItem:k,onHighlightChange:E,disableAxisListener:j?.tooltip?.trigger!=="axis"&&N?.x==="none"&&N?.y==="none",className:A,skipAnimation:_,brushConfig:U,plugins:Ise}),K={vertical:p?.vertical,horizontal:p?.horizontal},ae={clipPath:`url(#${$})`},R={id:$},Z={slots:C,slotProps:j,onItemClick:f},te={slots:C,slotProps:j,onItemClick:h},ge={slots:C,slotProps:j,onItemClick:y,skipAnimation:_},le={slots:C,slotProps:j,loading:T},W={slots:C,slotProps:j},ee=Oe({x:"line"},N),J={slots:C,slotProps:j},he={slots:C,slotProps:j};return{chartsWrapperProps:{sx:m,legendPosition:e.slotProps?.legend?.position,legendDirection:e.slotProps?.legend?.direction,hideLegend:e.hideLegend??!1},chartContainerProps:G,gridProps:K,clipPathProps:R,clipPathGroupProps:ae,areaPlotProps:Z,linePlotProps:te,markPlotProps:ge,overlayProps:le,chartsAxisProps:W,axisHighlightProps:ee,lineHighlightPlotProps:J,legendProps:he,children:v}};function Use(e,s,a,n,r,i,l,c,d,m,f,h=1/0,y=1){const N=n.copy(),w=r.copy();N.range([0,1]),w.range([0,1]);const p=function(U){const B=N(a[U].x),X=w(a[U].y);return B>=i&&B<=l&&X>=c&&X<=d},v=n.range()[1]-n.range()[0],C=r.range()[1]-r.range()[0],j=v*v,_=C*C;function T(A,U){return j*A*A+_*U*U}const k=N(ek(n,m,A=>a[A]?.x)),E=w(ek(r,f,A=>a[A]?.y));return e.neighbors(k,E,y,h!=null?h*h:1/0,p,T)}function ek(e,s,a){if(da(e)){const n=e.bandwidth()===0?Math.floor((s-Math.min(...e.range())+e.step()/2)/e.step()):Math.floor((s-Math.min(...e.range()))/e.step());return a(n)}return e.invert(s)}const jy=({svgRef:e,params:s,store:a,instance:n})=>{const{disableVoronoi:r,voronoiMaxRadius:i,onItemClick:l}=s,c=gt(a,an),{axis:d,axisIds:m}=gt(a,Oa),{axis:f,axisIds:h}=gt(a,Ia),y=gt(a,jP),{series:N,seriesOrder:w}=gt(a,Ls)?.scatter??{},p=gt(a,y?Aq:Lq),v=m[0],C=h[0];na(()=>{a.set("voronoi",{isVoronoiEnabled:!r})},[a,r]),g.useEffect(()=>{if(e.current===null||r)return;const T=e.current;function k(K){const ae=Bf(T,K);if(!n.isPointInside(ae.x,ae.y))return"outside-chart";let R;for(const Z of w??[]){const te=(N??{})[Z],ge=p.get(Z);if(!ge)continue;const le=te.xAxisId??v,W=te.yAxisId??C,ee=b4(a.getSnapshot(),le),J=b4(a.getSnapshot(),W),he=i==="item"?te.markerSize:i,be=(ee?.start??0)/100,Le=(ee?.end??100)/100,Me=(J?.start??0)/100,ke=(J?.end??100)/100,F=d[le].scale,ve=f[W].scale,Ce=Use(ge,c,te.data,F,ve,be,Le,Me,ke,ae.x,ae.y,he)[0];if(Ce===void 0)continue;const D=te.data[Ce],re=F(D.x),oe=ve(D.y),je=(re-ae.x)**2+(oe-ae.y)**2;(R===void 0||je<R.distanceSq)&&(R={dataIndex:Ce,seriesId:Z,distanceSq:je})}return R===void 0?"no-point-found":{seriesId:R.seriesId,dataIndex:R.dataIndex}}const E=n.addInteractionListener("moveEnd",K=>{K.detail.activeGestures.pan||(n.cleanInteraction?.(),n.clearHighlight?.())}),A=n.addInteractionListener("panEnd",K=>{K.detail.activeGestures.move||(n.cleanInteraction?.(),n.clearHighlight?.())}),U=n.addInteractionListener("quickPressEnd",K=>{!K.detail.activeGestures.move&&!K.detail.activeGestures.pan&&(n.cleanInteraction?.(),n.clearHighlight?.())}),B=K=>{const ae=k(K.detail.srcEvent);if(ae==="outside-chart"){n.cleanInteraction?.(),n.clearHighlight?.();return}if(ae==="outside-voronoi-max-radius"||ae==="no-point-found"){n.removeItemInteraction?.(),n.clearHighlight?.();return}const{seriesId:R,dataIndex:Z}=ae;n.setItemInteraction?.({type:"scatter",seriesId:R,dataIndex:Z},{interaction:"pointer"}),n.setHighlight?.({seriesId:R,dataIndex:Z})},X=n.addInteractionListener("tap",K=>{const ae=k(K.detail.srcEvent);if(typeof ae!="string"&&l){const{seriesId:R,dataIndex:Z}=ae;l(K.detail.srcEvent,{type:"scatter",seriesId:R,dataIndex:Z})}}),$=n.addInteractionListener("move",B),O=n.addInteractionListener("pan",B),G=n.addInteractionListener("quickPress",B);return()=>{X.cleanup(),$.cleanup(),E.cleanup(),O.cleanup(),A.cleanup(),G.cleanup(),U.cleanup()}},[e,f,d,i,l,r,c,n,w,N,p,v,C,a]);const j=oa(()=>{a.set("voronoi",{isVoronoiEnabled:!0})}),_=oa(()=>{a.set("voronoi",{isVoronoiEnabled:!1})});return{instance:{enableVoronoi:j,disableVoronoi:_}}};jy.getDefaultizedParams=({params:e})=>Oe({},e,{disableVoronoi:e.disableVoronoi??!e.series.some(s=>s.type==="scatter")});jy.getInitialState=e=>({voronoi:{isVoronoiEnabled:!e.disableVoronoi}});jy.params={disableVoronoi:!0,voronoiMaxRadius:!0,onItemClick:!0};const jI=[Eh,Th,jh,yu,Ah,jy,ry],zse=["width","height","margin","children","series","colors","dataset","desc","onAxisClick","highlightedAxis","onHighlightedAxisChange","disableVoronoi","voronoiMaxRadius","onItemClick","disableAxisListener","highlightedItem","onHighlightChange","sx","title","xAxis","yAxis","zAxis","rotationAxis","radiusAxis","skipAnimation","seriesConfig","plugins","localeText","slots","slotProps","experimentalFeatures","enableKeyboardNavigation","brushConfig"],Fse=(e,s)=>{const a=e,{width:n,height:r,margin:i,children:l,series:c,colors:d,dataset:m,desc:f,onAxisClick:h,highlightedAxis:y,onHighlightedAxisChange:N,disableVoronoi:w,voronoiMaxRadius:p,onItemClick:v,disableAxisListener:C,highlightedItem:j,onHighlightChange:_,sx:T,title:k,xAxis:E,yAxis:A,zAxis:U,rotationAxis:B,radiusAxis:X,skipAnimation:$,seriesConfig:O,plugins:G,localeText:K,slots:ae,slotProps:R,experimentalFeatures:Z,enableKeyboardNavigation:te,brushConfig:ge}=a,le=$t(a,zse),W=Oe({title:k,desc:f,sx:T,ref:s},le);return{chartDataProviderProps:{margin:i,series:c,colors:d,dataset:m,disableAxisListener:C,highlightedItem:j,onHighlightChange:_,onAxisClick:h,highlightedAxis:y,onHighlightedAxisChange:N,disableVoronoi:w,voronoiMaxRadius:p,onItemClick:v,xAxis:E,yAxis:A,zAxis:U,rotationAxis:B,radiusAxis:X,skipAnimation:$,width:n,height:r,localeText:K,seriesConfig:O,experimentalFeatures:Z,enableKeyboardNavigation:te,brushConfig:ge,plugins:G??jI,slots:ae,slotProps:R},chartsSurfaceProps:W,children:l}};function tk(e){try{return e.matches(":focus-visible")}catch{}return!1}class qp{static create(){return new qp}static use(){const s=z0(qp.create).current,[a,n]=g.useState(!1);return s.shouldMount=a,s.setShouldMount=n,g.useEffect(s.mountEffect,[a]),s}constructor(){this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=Hse(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}mountEffect=()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())};start(...s){this.mount().then(()=>this.ref.current?.start(...s))}stop(...s){this.mount().then(()=>this.ref.current?.stop(...s))}pulsate(...s){this.mount().then(()=>this.ref.current?.pulsate(...s))}}function Bse(){return qp.use()}function Hse(){let e,s;const a=new Promise((n,r)=>{e=n,s=r});return a.resolve=e,a.reject=s,a}class R2{static create(){return new R2}currentId=null;start(s,a){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,a()},s)}clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function Gse(){const e=z0(R2.create).current;return S5(e.disposeEffect),e}function Vse(e){const{className:s,classes:a,pulsate:n=!1,rippleX:r,rippleY:i,rippleSize:l,in:c,onExited:d,timeout:m}=e,[f,h]=g.useState(!1),y=It(s,a.ripple,a.rippleVisible,n&&a.ripplePulsate),N={width:l,height:l,top:-(l/2)+i,left:-(l/2)+r},w=It(a.child,f&&a.childLeaving,n&&a.childPulsate);return!c&&!f&&h(!0),g.useEffect(()=>{if(!c&&d!=null){const p=setTimeout(d,m);return()=>{clearTimeout(p)}}},[d,c,m]),t.jsx("span",{className:y,style:N,children:t.jsx("span",{className:w})})}const zn=Is("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),kC=550,Wse=80,Yse=xh`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,Qse=xh`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,qse=xh`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,Xse=kt("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Kse=kt(Vse,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${zn.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${Yse};
    animation-duration: ${kC}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  &.${zn.ripplePulsate} {
    animation-duration: ${({theme:e})=>e.transitions.duration.shorter}ms;
  }

  & .${zn.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${zn.childLeaving} {
    opacity: 0;
    animation-name: ${Qse};
    animation-duration: ${kC}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  & .${zn.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${qse};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,Zse=g.forwardRef(function(s,a){const n=Wl({props:s,name:"MuiTouchRipple"}),{center:r=!1,classes:i={},className:l,...c}=n,[d,m]=g.useState([]),f=g.useRef(0),h=g.useRef(null);g.useEffect(()=>{h.current&&(h.current(),h.current=null)},[d]);const y=g.useRef(!1),N=Gse(),w=g.useRef(null),p=g.useRef(null),v=g.useCallback(T=>{const{pulsate:k,rippleX:E,rippleY:A,rippleSize:U,cb:B}=T;m(X=>[...X,t.jsx(Kse,{classes:{ripple:It(i.ripple,zn.ripple),rippleVisible:It(i.rippleVisible,zn.rippleVisible),ripplePulsate:It(i.ripplePulsate,zn.ripplePulsate),child:It(i.child,zn.child),childLeaving:It(i.childLeaving,zn.childLeaving),childPulsate:It(i.childPulsate,zn.childPulsate)},timeout:kC,pulsate:k,rippleX:E,rippleY:A,rippleSize:U},f.current)]),f.current+=1,h.current=B},[i]),C=g.useCallback((T={},k={},E=()=>{})=>{const{pulsate:A=!1,center:U=r||k.pulsate,fakeElement:B=!1}=k;if(T?.type==="mousedown"&&y.current){y.current=!1;return}T?.type==="touchstart"&&(y.current=!0);const X=B?null:p.current,$=X?X.getBoundingClientRect():{width:0,height:0,left:0,top:0};let O,G,K;if(U||T===void 0||T.clientX===0&&T.clientY===0||!T.clientX&&!T.touches)O=Math.round($.width/2),G=Math.round($.height/2);else{const{clientX:ae,clientY:R}=T.touches&&T.touches.length>0?T.touches[0]:T;O=Math.round(ae-$.left),G=Math.round(R-$.top)}if(U)K=Math.sqrt((2*$.width**2+$.height**2)/3),K%2===0&&(K+=1);else{const ae=Math.max(Math.abs((X?X.clientWidth:0)-O),O)*2+2,R=Math.max(Math.abs((X?X.clientHeight:0)-G),G)*2+2;K=Math.sqrt(ae**2+R**2)}T?.touches?w.current===null&&(w.current=()=>{v({pulsate:A,rippleX:O,rippleY:G,rippleSize:K,cb:E})},N.start(Wse,()=>{w.current&&(w.current(),w.current=null)})):v({pulsate:A,rippleX:O,rippleY:G,rippleSize:K,cb:E})},[r,v,N]),j=g.useCallback(()=>{C({},{pulsate:!0})},[C]),_=g.useCallback((T,k)=>{if(N.clear(),T?.type==="touchend"&&w.current){w.current(),w.current=null,N.start(0,()=>{_(T,k)});return}w.current=null,m(E=>E.length>0?E.slice(1):E),h.current=k},[N]);return g.useImperativeHandle(a,()=>({pulsate:j,start:C,stop:_}),[j,C,_]),t.jsx(Xse,{className:It(zn.root,i.root,l),ref:p,...c,children:t.jsx(D1,{component:null,exit:!0,children:d})})});function Jse(e){return qs("MuiButtonBase",e)}const eae=Is("MuiButtonBase",["root","disabled","focusVisible"]),tae=e=>{const{disabled:s,focusVisible:a,focusVisibleClassName:n,classes:r}=e,l=Qs({root:["root",s&&"disabled",a&&"focusVisible"]},Jse,r);return a&&n&&(l.root+=` ${n}`),l},sae=kt("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${eae.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),CI=g.forwardRef(function(s,a){const n=Wl({props:s,name:"MuiButtonBase"}),{action:r,centerRipple:i=!1,children:l,className:c,component:d="button",disabled:m=!1,disableRipple:f=!1,disableTouchRipple:h=!1,focusRipple:y=!1,focusVisibleClassName:N,LinkComponent:w="a",onBlur:p,onClick:v,onContextMenu:C,onDragLeave:j,onFocus:_,onFocusVisible:T,onKeyDown:k,onKeyUp:E,onMouseDown:A,onMouseLeave:U,onMouseUp:B,onTouchEnd:X,onTouchMove:$,onTouchStart:O,tabIndex:G=0,TouchRippleProps:K,touchRippleRef:ae,type:R,...Z}=n,te=g.useRef(null),ge=Bse(),le=Qr(ge.ref,ae),[W,ee]=g.useState(!1);m&&W&&ee(!1),g.useImperativeHandle(r,()=>({focusVisible:()=>{ee(!0),te.current.focus()}}),[]);const J=ge.shouldMount&&!f&&!m;g.useEffect(()=>{W&&y&&!f&&ge.pulsate()},[f,y,W,ge]);const he=vi(ge,"start",A,h),be=vi(ge,"stop",C,h),Le=vi(ge,"stop",j,h),Me=vi(ge,"stop",B,h),ke=vi(ge,"stop",V=>{W&&V.preventDefault(),U&&U(V)},h),F=vi(ge,"start",O,h),ve=vi(ge,"stop",X,h),Ce=vi(ge,"stop",$,h),D=vi(ge,"stop",V=>{tk(V.target)||ee(!1),p&&p(V)},!1),re=oa(V=>{te.current||(te.current=V.currentTarget),tk(V.target)&&(ee(!0),T&&T(V)),_&&_(V)}),oe=()=>{const V=te.current;return d&&d!=="button"&&!(V.tagName==="A"&&V.href)},je=oa(V=>{y&&!V.repeat&&W&&V.key===" "&&ge.stop(V,()=>{ge.start(V)}),V.target===V.currentTarget&&oe()&&V.key===" "&&V.preventDefault(),k&&k(V),V.target===V.currentTarget&&oe()&&V.key==="Enter"&&!m&&(V.preventDefault(),v&&v(V))}),Re=oa(V=>{y&&V.key===" "&&W&&!V.defaultPrevented&&ge.stop(V,()=>{ge.pulsate(V)}),E&&E(V),v&&V.target===V.currentTarget&&oe()&&V.key===" "&&!V.defaultPrevented&&v(V)});let Ke=d;Ke==="button"&&(Z.href||Z.to)&&(Ke=w);const et={};Ke==="button"?(et.type=R===void 0?"button":R,et.disabled=m):(!Z.href&&!Z.to&&(et.role="button"),m&&(et["aria-disabled"]=m));const qe=Qr(a,te),Ze={...n,centerRipple:i,component:d,disabled:m,disableRipple:f,disableTouchRipple:h,focusRipple:y,tabIndex:G,focusVisible:W},we=tae(Ze);return t.jsxs(sae,{as:Ke,className:It(we.root,c),ownerState:Ze,onBlur:D,onClick:v,onContextMenu:be,onFocus:re,onKeyDown:je,onKeyUp:Re,onMouseDown:he,onMouseLeave:ke,onMouseUp:Me,onDragLeave:Le,onTouchEnd:ve,onTouchMove:Ce,onTouchStart:F,ref:qe,tabIndex:m?-1:G,type:R,...et,...Z,children:[l,J?t.jsx(Zse,{ref:le,center:i,...K}):null]})});function vi(e,s,a,n=!1){return oa(r=>(a&&a(r),n||e[s](r),!0))}function aae(e){return qs("MuiIconButton",e)}const sk=Is("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),nae=e=>{const{classes:s,disabled:a,color:n,edge:r,size:i,loading:l}=e,c={root:["root",l&&"loading",a&&"disabled",n!=="default"&&`color${xs(n)}`,r&&`edge${xs(r)}`,`size${xs(i)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return Qs(c,aae,s)},rae=kt(CI,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,s)=>{const{ownerState:a}=e;return[s.root,a.loading&&s.loading,a.color!=="default"&&s[`color${xs(a.color)}`],a.edge&&s[`edge${xs(a.edge)}`],s[`size${xs(a.size)}`]]}})(cc(({theme:e})=>({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),variants:[{props:s=>!s.disableRipple,style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),cc(({theme:e})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(e.palette).filter(If()).map(([s])=>({props:{color:s},style:{color:(e.vars||e).palette[s].main}})),...Object.entries(e.palette).filter(If()).map(([s])=>({props:{color:s},style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette[s].main,(e.vars||e).palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:e.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:e.typography.pxToRem(28)}}],[`&.${sk.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled},[`&.${sk.loading}`]:{color:"transparent"}}))),iae=kt("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(e.vars||e).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),lae=g.forwardRef(function(s,a){const n=Wl({props:s,name:"MuiIconButton"}),{edge:r=!1,children:i,className:l,color:c="default",disabled:d=!1,disableFocusRipple:m=!1,size:f="medium",id:h,loading:y=null,loadingIndicator:N,...w}=n,p=$0(h),v=N??t.jsx(M1,{"aria-labelledby":p,color:"inherit",size:16}),C={...n,edge:r,color:c,disabled:d,disableFocusRipple:m,loading:y,loadingIndicator:v,size:f},j=nae(C);return t.jsxs(rae,{id:y?p:h,className:It(j.root,l),centerRipple:!0,focusRipple:!m,disabled:d||y,ref:a,...w,ownerState:C,children:[typeof y=="boolean"&&t.jsx("span",{className:j.loadingWrapper,style:{display:"contents"},children:t.jsx(iae,{className:j.loadingIndicator,ownerState:C,children:y&&v})}),i]})});function oae(e){return qs("MuiButton",e)}const po=Is("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),cae=g.createContext({}),dae=g.createContext(void 0),uae=e=>{const{color:s,disableElevation:a,fullWidth:n,size:r,variant:i,loading:l,loadingPosition:c,classes:d}=e,m={root:["root",l&&"loading",i,`${i}${xs(s)}`,`size${xs(r)}`,`${i}Size${xs(r)}`,`color${xs(s)}`,a&&"disableElevation",n&&"fullWidth",l&&`loadingPosition${xs(c)}`],startIcon:["icon","startIcon",`iconSize${xs(r)}`],endIcon:["icon","endIcon",`iconSize${xs(r)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},f=Qs(m,oae,d);return{...d,...f}},SI=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],mae=kt(CI,{shouldForwardProp:e=>g5(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,s)=>{const{ownerState:a}=e;return[s.root,s[a.variant],s[`${a.variant}${xs(a.color)}`],s[`size${xs(a.size)}`],s[`${a.variant}Size${xs(a.size)}`],a.color==="inherit"&&s.colorInherit,a.disableElevation&&s.disableElevation,a.fullWidth&&s.fullWidth,a.loading&&s.loading]}})(cc(({theme:e})=>{const s=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],a=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return{...e.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${po.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(e.vars||e).shadows[2],"&:hover":{boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2]}},"&:active":{boxShadow:(e.vars||e).shadows[8]},[`&.${po.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},[`&.${po.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${po.disabled}`]:{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(e.palette).filter(If()).map(([n])=>({props:{color:n},style:{"--variant-textColor":(e.vars||e).palette[n].main,"--variant-outlinedColor":(e.vars||e).palette[n].main,"--variant-outlinedBorder":e.alpha((e.vars||e).palette[n].main,.5),"--variant-containedColor":(e.vars||e).palette[n].contrastText,"--variant-containedBg":(e.vars||e).palette[n].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(e.vars||e).palette[n].dark,"--variant-textBg":e.alpha((e.vars||e).palette[n].main,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBorder":(e.vars||e).palette[n].main,"--variant-outlinedBg":e.alpha((e.vars||e).palette[n].main,(e.vars||e).palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedBg:s,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedHoverBg:a,"--variant-textBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${po.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${po.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),[`&.${po.loading}`]:{color:"transparent"}}}]}})),fae=kt("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,s)=>{const{ownerState:a}=e;return[s.startIcon,a.loading&&s.startIconLoadingStart,s[`iconSize${xs(a.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...SI]})),hae=kt("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,s)=>{const{ownerState:a}=e;return[s.endIcon,a.loading&&s.endIconLoadingEnd,s[`iconSize${xs(a.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...SI]})),gae=kt("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(e.vars||e).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),ak=kt("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),xae=g.forwardRef(function(s,a){const n=g.useContext(cae),r=g.useContext(dae),i=oc(n,s),l=Wl({props:i,name:"MuiButton"}),{children:c,color:d="primary",component:m="button",className:f,disabled:h=!1,disableElevation:y=!1,disableFocusRipple:N=!1,endIcon:w,focusVisibleClassName:p,fullWidth:v=!1,id:C,loading:j=null,loadingIndicator:_,loadingPosition:T="center",size:k="medium",startIcon:E,type:A,variant:U="text",...B}=l,X=$0(C),$=_??t.jsx(M1,{"aria-labelledby":X,color:"inherit",size:16}),O={...l,color:d,component:m,disabled:h,disableElevation:y,disableFocusRipple:N,fullWidth:v,loading:j,loadingIndicator:$,loadingPosition:T,size:k,type:A,variant:U},G=uae(O),K=(E||j&&T==="start")&&t.jsx(fae,{className:G.startIcon,ownerState:O,children:E||t.jsx(ak,{className:G.loadingIconPlaceholder,ownerState:O})}),ae=(w||j&&T==="end")&&t.jsx(hae,{className:G.endIcon,ownerState:O,children:w||t.jsx(ak,{className:G.loadingIconPlaceholder,ownerState:O})}),R=r||"",Z=typeof j=="boolean"?t.jsx("span",{className:G.loadingWrapper,style:{display:"contents"},children:j&&t.jsx(gae,{className:G.loadingIndicator,ownerState:O,children:$})}):null;return t.jsxs(mae,{ownerState:O,className:It(n.className,G.root,f,R),component:m,disabled:h||j,focusRipple:!N,focusVisibleClassName:It(G.focusVisible,p),ref:a,type:A,id:j?X:C,...B,classes:G,children:[K,T!=="end"&&Z,c,T==="end"&&Z,ae]})}),pae={baseButton:xae,baseIconButton:lae},yae={},bae=Oe({},pae,yae),vae=g.createContext(null);function Nae(e){const{slots:s,slotProps:a={},defaultSlots:n,children:r}=e,i=g.useMemo(()=>({slots:Oe({},n,s),slotProps:a}),[n,s,a]);return t.jsx(vae.Provider,{value:i,children:r})}const wae=["children","localeText","plugins","seriesConfig","slots","slotProps"],jae=e=>{const s=ar({props:e,name:"MuiChartDataProvider"}),{children:a,localeText:n,plugins:r=jI,seriesConfig:i,slots:l,slotProps:c}=s,d=$t(s,wae),m=Kr(),f={plugins:r,seriesConfig:i,pluginParams:Oe({theme:m.palette.mode},d)};return{children:a,localeText:n,chartProviderProps:f,slots:l,slotProps:c}};function Cae(e){const{children:s,localeText:a,chartProviderProps:n,slots:r,slotProps:i}=jae(e);return t.jsx(kZ,Oe({},n,{children:t.jsx(YK,{localeText:a,children:t.jsx(Nae,{slots:r,slotProps:i,defaultSlots:bae,children:s})})}))}function nk(e){const{isReversed:s,gradientId:a,size:n,direction:r,scale:i,colorMap:l}=e;return n<=0?null:t.jsx("linearGradient",{id:a,x1:"0",x2:"0",y1:"0",y2:"0",[`${r}${s?1:2}`]:`${n}px`,gradientUnits:"userSpaceOnUse",children:l.thresholds.map((c,d)=>{const m=i(c);if(m===void 0)return null;const f=s?1-m/n:m/n;return Number.isNaN(f)?null:t.jsxs(g.Fragment,{children:[t.jsx("stop",{offset:f,stopColor:l.colors[d],stopOpacity:1}),t.jsx("stop",{offset:f,stopColor:l.colors[d+1],stopOpacity:1})]},c.toString()+d)})})}const Sae=10;function rk(e){const{gradientUnits:s,isReversed:a,gradientId:n,size:r,direction:i,scale:l,colorScale:c,colorMap:d}=e,m=[d.min??0,d.max??100],f=m.map(l).filter(w=>w!==void 0);if(f.length!==2)return null;const h=typeof m[0]=="number"?Qd(m[0],m[1]):Y1(m[0],m[1]),y=Math.round((Math.max(...f)-Math.min(...f))/Sae),N=`${m[0]}-${m[1]}-`;return t.jsx("linearGradient",{id:n,x1:"0",x2:"0",y1:"0",y2:"0",[`${i}${a?1:2}`]:s==="objectBoundingBox"?1:`${r}px`,gradientUnits:s??"userSpaceOnUse",children:Array.from({length:y+1},(w,p)=>{const v=h(p/y);if(v===void 0)return null;const C=l(v);if(C===void 0)return null;const j=a?1-C/r:C/r,_=c(v);return _===null?null:t.jsx("stop",{offset:j,stopColor:_,stopOpacity:1},N+p)})})}const _ae=10,Tae=e=>e?{x1:"1",x2:"0",y1:"0",y2:"0"}:{x1:"0",x2:"1",y1:"0",y2:"0"};function zN(e){const{isReversed:s,gradientId:a,colorScale:n,colorMap:r}=e,i=[r.min??0,r.max??100],l=typeof i[0]=="number"?Qd(i[0],i[1]):Y1(i[0],i[1]),c=_ae,d=`${i[0]}-${i[1]}-`;return t.jsx("linearGradient",Oe({id:a},Tae(s),{gradientUnits:"objectBoundingBox",children:Array.from({length:c+1},(m,f)=>{const h=f/c,y=l(h);if(y===void 0)return null;const N=n(y);return N===null?null:t.jsx("stop",{offset:h,stopColor:N,stopOpacity:1},d+f)})}))}function Eae(){const{top:e,height:s,bottom:a,left:n,width:r,right:i}=nr(),l=e+s+a,c=n+r+i,d=N2(),m=TK(),{xAxis:f,xAxisIds:h}=nn(),{yAxis:y,yAxisIds:N}=rn(),{zAxis:w,zAxisIds:p}=y2(),v=N.filter(_=>y[_].colorMap!==void 0),C=h.filter(_=>f[_].colorMap!==void 0),j=p.filter(_=>w[_].colorMap!==void 0);return v.length===0&&C.length===0&&j.length===0?null:t.jsxs("defs",{children:[v.map(_=>{const T=d(_),k=m(_),{colorMap:E,scale:A,colorScale:U,reverse:B}=y[_];return E?.type==="piecewise"?t.jsx(nk,{isReversed:!B,scale:A,colorMap:E,size:l,gradientId:T,direction:"y"},T):E?.type==="continuous"?t.jsxs(g.Fragment,{children:[t.jsx(rk,{isReversed:!B,scale:A,colorScale:U,colorMap:E,size:l,gradientId:T,direction:"y"}),t.jsx(zN,{isReversed:B,colorScale:U,colorMap:E,gradientId:k})]},T):null}),C.map(_=>{const T=d(_),k=m(_),{colorMap:E,scale:A,reverse:U,colorScale:B}=f[_];return E?.type==="piecewise"?t.jsx(nk,{isReversed:U,scale:A,colorMap:E,size:c,gradientId:T,direction:"x"},T):E?.type==="continuous"?t.jsxs(g.Fragment,{children:[t.jsx(rk,{isReversed:U,scale:A,colorScale:B,colorMap:E,size:c,gradientId:T,direction:"x"}),t.jsx(zN,{isReversed:U,colorScale:B,colorMap:E,gradientId:k})]},T):null}),j.map(_=>{const T=m(_),{colorMap:k,colorScale:E}=w[_];return k?.type==="continuous"?t.jsx(zN,{colorScale:E,colorMap:k,gradientId:T},T):null})]})}function Aae(e){return qs("MuiChartsSurface",e)}const Lae=()=>Qs({root:["root"]},Aae);Is("MuiChartsSurface",["root"]);const kae=["children","className","title","desc"],Dae=kt("svg",{name:"MuiChartsSurface",slot:"Root"})(({ownerState:e,theme:s})=>({width:e.width??"100%",height:e.height??"100%",display:"flex",position:"relative",flexDirection:"column",alignItems:"center",justifyContent:"center",overflow:"hidden",touchAction:e.hasZoom?"pan-y":void 0,userSelect:"none",gridArea:"chart","&:focus":{outline:"none"},"&:focus-visible":{outline:`${(s.vars??s).palette.text.primary} solid 2px`,"&[data-has-focused-item=true]":{outline:"none"}},"& [data-focused=true]":{outline:`${(s.vars??s).palette.text.primary} solid 2px`}})),Mae=g.forwardRef(function(s,a){const n=bs(),r=gt(n,KV),i=gt(n,ZV),l=gt(n,T5),c=gt(n,E5),d=gt(n,zq),m=gt(n,Uq),f=gt(n,bq),h=b2(),y=Qr(h,a),N=ar({props:s,name:"MuiChartsSurface"}),{children:w,className:p,title:v,desc:C}=N,j=$t(N,kae),_=Lae(),T=i>0&&r>0;return t.jsxs(Dae,Oe({ownerState:{width:l,height:c,hasZoom:f},viewBox:`0 0 ${r} ${i}`,className:It(_.root,p),tabIndex:d?0:void 0,"data-has-focused-item":m||void 0},j,{ref:y,children:[v&&t.jsx("title",{children:v}),C&&t.jsx("desc",{children:C}),t.jsx(Eae,{}),T&&w]}))}),ik=Is("MuiChartsToolbar",["root"]),Pae=e=>e?.horizontal==="start"?"start":e?.horizontal==="end"?"end":"center",Oae=e=>e?.vertical==="top"?"flex-start":e?.vertical==="bottom"?"flex-end":"center",Iae=(e,s,a)=>e?'"chart"':s==="vertical"?a?.horizontal==="start"?'"legend chart"':'"chart legend"':a?.vertical==="bottom"?`"chart"
            "legend"`:`"legend"
          "chart"`,$ae=(e=!1,s="horizontal",a="end",n=void 0)=>{const r=n?"auto":"1fr";return s==="horizontal"||e?r:a==="start"?`auto ${r}`:`${r} auto`},Rae=(e=!1,s="horizontal",a="top")=>s==="vertical"||e?"1fr":a==="bottom"?"1fr auto":"auto 1fr",Uae=kt("div",{name:"MuiChartsWrapper",slot:"Root",shouldForwardProp:e=>hp(e)&&e!=="extendVertically"&&e!=="width"})(({ownerState:e,width:s})=>{const a=$ae(e.hideLegend,e.legendDirection,e.legendPosition?.horizontal,s),n=Rae(e.hideLegend,e.legendDirection,e.legendPosition?.vertical),r=Iae(e.hideLegend,e.legendDirection,e.legendPosition);return{variants:[{props:{extendVertically:!0},style:{height:"100%",minHeight:0}}],flex:1,display:"grid",gridTemplateColumns:a,gridTemplateRows:n,gridTemplateAreas:r,[`&:has(.${ik.root})`]:{gridTemplateRows:`auto ${n}`,gridTemplateAreas:`"${a.split(" ").map(()=>"toolbar").join(" ")}"
        ${r}`},[`& .${ik.root}`]:{gridArea:"toolbar",justifySelf:"center"},justifyContent:"safe center",justifyItems:Pae(e.legendPosition),alignItems:Oae(e.legendPosition)}});function zae(e){const{children:s,sx:a,extendVertically:n}=e,r=BK(),i=bs(),l=gt(i,T5),c=gt(i,E5);return t.jsx(Uae,{ref:r,ownerState:e,sx:a,extendVertically:n??c===void 0,width:l,children:s})}function Fae(){const e=bs(),s=gt(e,iy),a=gt(e,ly),n=gt(e,oy);return g.useMemo(()=>s===void 0||a===void 0||n===void 0?null:{seriesType:s,seriesId:a,dataIndex:n},[s,a,n])}const yx=6;function Bae(){const e=Kr(),s=Fae(),a=Lh(),{xAxis:n,xAxisIds:r}=nn(),{yAxis:i,yAxisIds:l}=rn();if(s===null||s.seriesType!=="line"||!a)return null;const c=a?.series[s.seriesId],d=c.xAxisId??r[0],m=c.yAxisId??l[0];return t.jsx("rect",{fill:"none",stroke:(e.vars??e).palette.text.primary,strokeWidth:2,x:n[d].scale(n[d].data[s.dataIndex])-yx,y:i[m].scale(c.stackedData[s.dataIndex][1])-yx,width:2*yx,height:2*yx,rx:3,ry:3})}const U2=g.forwardRef(function(s,a){const n=ar({props:s,name:"MuiLineChart"}),{chartsWrapperProps:r,chartContainerProps:i,gridProps:l,clipPathProps:c,clipPathGroupProps:d,areaPlotProps:m,linePlotProps:f,markPlotProps:h,overlayProps:y,chartsAxisProps:N,axisHighlightProps:w,lineHighlightPlotProps:p,legendProps:v,children:C}=Rse(n),{chartDataProviderProps:j,chartsSurfaceProps:_}=Fse(i,a),T=n.slots?.tooltip??Qte,k=n.slots?.toolbar;return t.jsx(Cae,Oe({},j,{children:t.jsxs(zae,Oe({},r,{children:[n.showToolbar&&k?t.jsx(k,Oe({},n.slotProps?.toolbar)):null,!n.hideLegend&&t.jsx(lse,Oe({},v)),t.jsxs(Mae,Oe({},_,{children:[t.jsx(Tse,Oe({},l)),t.jsxs("g",Oe({},d,{children:[t.jsx(VZ,Oe({},m)),t.jsx(aJ,Oe({},f)),t.jsx(Ose,Oe({},y)),t.jsx(mse,Oe({},w))]})),t.jsx(Bae,{}),t.jsx(tee,Oe({},N)),t.jsx("g",{"data-drawing-container":!0,children:t.jsx(mJ,Oe({},h))}),t.jsx(vse,Oe({},p)),t.jsx(fse,Oe({},c)),C]})),!n.loading&&t.jsx(T,Oe({},n.slotProps?.tooltip))]}))}))}),Hae=e=>t.jsx(yt,{...e}),Gae=e=>t.jsx(vr,{...e}),Vae=e=>t.jsx(g1,{...e}),_I=e=>t.jsx(ya,{...e}),Wae=e=>t.jsx(N0,{...e}),Yae=e=>t.jsx(c1,{...e}),Qae=e=>t.jsx(dt,{...e}),qae=e=>t.jsx(ft,{...e}),Xae=e=>t.jsx(u1,{...e}),TI=e=>t.jsx(d1,{...e}),EI=e=>t.jsx(Jt,{...e}),AI=e=>t.jsx(qt,{...e}),Kae=e=>t.jsx(Cs,{...e}),Zae=e=>t.jsx(Es,{...e}),Jae=e=>t.jsx(en,{...e}),ene=e=>t.jsx(sn,{...e}),tne=e=>t.jsx(As,{...e}),sne=e=>t.jsx(dt,{...e}),ane=e=>t.jsx(Ea,{...e}),nne=e=>t.jsx(uh,{...e}),rne=e=>t.jsx(Ta,{...e}),LI=e=>`P ${new Intl.NumberFormat("en-PH",{minimumFractionDigits:0}).format(e)}`,ine=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},lne=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},one=e=>{switch(e){case"call":return{Icon:qae,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:Xae,color:"text-green-600",bgColor:"bg-green-100"};case"meeting":default:return{Icon:Qae,color:"text-blue-500",bgColor:"bg-blue-100"}}},cne=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},dne=({searchQuery:e,onSearchChange:s,searchResults:a,onSearchResultClick:n})=>{const r=it(),[i,l]=g.useState(!1),c=g.useRef(null),d=[{icon:EI,label:"Account"},{icon:AI,label:"Contact"},{icon:Kae,label:"Leads"},{icon:Zae,label:"Deals"},{icon:Jae,label:"Quotes"},{icon:ene,label:"Target"},{icon:tne,label:"Task"},{icon:sne,label:"Meeting"},{icon:ane,label:"Call"},{icon:rne,label:"Audit"},{icon:nne,label:"Territory"}];g.useEffect(()=>{const h=y=>{c.current&&!c.current.contains(y.target)&&l(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]);const m=h=>{s(h.target.value),l(h.target.value.trim().length>0)},f=h=>{n&&n(h),l(!1)};return t.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[t.jsxs("div",{className:"w-full flex justify-center relative",ref:c,children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-2xl lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[t.jsx(Hae,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),t.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:m,onFocus:()=>e.trim().length>0&&l(!0)})]}),i&&Array.isArray(a)&&a.length>0&&t.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:a.map((h,y)=>t.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>f(h),children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:h.name}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:h.type}),h.details&&t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:h.details})]}),t.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${h.type==="Lead"?"bg-blue-100 text-blue-600":h.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:h.type})]})},y))}),i&&e.trim().length>0&&(!Array.isArray(a)||a.length===0)&&t.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 p-4 text-center text-sm text-gray-500",children:"No results found"})]}),t.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:t.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:d.map((h,y)=>t.jsxs("div",{className:"relative flex-shrink-0 group",children:[t.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":h.label,onClick:()=>{switch(h.label){case"Account":r("/admin/accounts");break;case"Contact":r("/admin/contacts");break;case"Leads":r("/admin/leads");break;case"Deals":r("/admin/deals");break;case"Quotes":r("/admin/quotes");break;case"Target":r("/admin/targets");break;case"Task":r("/admin/tasks");break;case"Meeting":r("/admin/meetings");break;case"Call":r("/admin/calls");break;case"Audit":r("/admin/audit");break;case"Territory":r("/admin/territory");break;default:console.log(`Clicked ${h.label}`)}},children:t.jsx(h.icon,{size:24,className:"lg:scale-95"})}),t.jsx("span",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-1 bg-gray-700 text-white text-xs font-medium rounded-lg whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition duration-200 pointer-events-none z-20 shadow-md",children:h.label})]},y))})})]})},une=({action:e,description:s,entity_type:a,entity_name:n,timestamp:r})=>{const i=it(),l=f=>{if(!f)return"Unknown";const h=new Date(f),N=new Date-h,w=Math.floor(N/6e4),p=Math.floor(N/36e5),v=Math.floor(N/864e5);return w<1?"Just now":w<60?`${w} min ago`:p<24?`${p} hour${p>1?"s":""} ago`:v<7?`${v} day${v>1?"s":""} ago`:h.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},c=e||s||"Action",d=n||a||"System",m=l(r);return t.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/admin/audit"),children:[t.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[c," ",t.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",d,")"]})]}),t.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:m})]})},mne=({logs:e,loading:s})=>{const a=it();return t.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),t.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/admin/audit"),children:[t.jsx("span",{children:"See All"}),t.jsx(TI,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?t.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((n,r)=>t.jsx(une,{...n},r))}):t.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},fne=({icon:e,title:s,value:a,color:n,bgColor:r,loading:i,onClick:l})=>t.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l||(()=>console.log(`Clicked metric card: ${s}`)),children:[t.jsx("div",{className:`p-3 rounded-full ${r} ${n} mr-4`,children:t.jsx(e,{size:20})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:s}),t.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a||0})]})]}),hne=({revenueData:e,loading:s})=>{const a=it(),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=g.useMemo(()=>{if(console.log("=== RevenueChart calculateRevenueData ==="),console.log("revenueData:",e),console.log("revenueData length:",e?.length),!e||e.length===0){console.log("No revenue data, returning empty chart");const v=new Date;v.getFullYear();const C=v.getMonth(),j=[],_=[];for(let T=0;T<=C;T++)j.push(n[T]),_.push(0);return{labels:j,revenues:_,maxRevenue:0}}const c={};let d=0,m=0;console.log("Processing deals:",e.length),e.forEach((v,C)=>{const j=v.close_date||v.closeDate||null,_=j&&j!==null&&j!=="",T=v.stage||"",k=T.toUpperCase()==="CLOSED_WON"||T==="CLOSED_WON";let E=v.amount;E&&typeof E=="object"&&E.toString?E=parseFloat(E.toString()):E=parseFloat(E)||0;const A=E>0;if(k&&(m++,console.log(`Deal ${C+1} (CLOSED_WON):`,{id:v.id,name:v.name,stage:T,close_date:j,close_date_type:typeof j,amount:E,amount_type:typeof v.amount,hasCloseDate:_,hasAmount:A,willBeAdded:_&&A,allFields:Object.keys(v)})),_&&k&&A)try{let U=new Date(j);if(isNaN(U.getTime())){const B=String(j).split("T")[0];U=new Date(B+"T00:00:00")}if(isNaN(U.getTime()))console.warn(` Invalid date for deal ${v.id}:`,j,"Type:",typeof j);else{const B=U.getFullYear(),X=U.getMonth()+1,$=`${B}-${String(X).padStart(2,"0")}`;c[$]||(c[$]=0),c[$]+=E,d++,console.log(` Added deal ${v.id} to month ${$}: ${E}, total: ${c[$]}`),console.log(`  - Close date: ${j} -> Parsed: ${U.toISOString()} -> Month: ${$} (Year: ${B}, Month: ${X})`)}}catch(U){console.error("Error parsing deal date:",j,U)}else k&&console.warn(` Deal ${v.id} is CLOSED_WON but missing data:`,{hasCloseDate:_,hasAmount:A,closeDate:j,amount:E,originalAmount:v.amount})}),console.log("Summary:",{totalDeals:e.length,closedWonDeals:m,validDealsForGraph:d,monthlyRevenue:c});const f=Object.keys(c).map(v=>parseInt(v.split("-")[0])),h=f.length>0?[...new Set(f)].sort():[],y=new Date().getFullYear();new Date().getMonth();const N=[],w=[];for(let v=0;v<12;v++){const C=`${y}-${String(v+1).padStart(2,"0")}`;N.push(n[v]);const j=c[C]||0;w.push(j),j>0&&console.log(`Month ${n[v]} (${C}): ${j}`)}if(h.length>0){const v=Math.max(...h);if(v>y)for(let C=y+1;C<=v;C++)for(let j=0;j<12;j++){const _=`${C}-${String(j+1).padStart(2,"0")}`,T=c[_]||0;N.push(`${n[j]} ${C}`),w.push(T),T>0&&console.log(`Month ${n[j]} ${C} (${_}): ${T}`)}}const p=Math.max(...w,1);return console.log("Final chart data:",{labels:N,revenues:w,maxRevenue:p,hasData:w.some(v=>v>0)}),{labels:N,revenues:w,maxRevenue:p}},[e]),i=r.labels,l=r.revenues;return console.log("=== FINAL CHART DATA ==="),console.log("X Axis (Months):",i),console.log("Y Axis (Revenue):",l),console.log("Has any revenue > 0:",l.some(c=>c>0)),console.log("All revenue values:",l),console.log("Max revenue:",r.maxRevenue),t.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),t.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/admin/deals"),children:[t.jsx("span",{children:"See All"}),t.jsx(TI,{size:14,className:"transform -rotate-45"})]})]}),t.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:t.jsx("div",{className:"w-full h-full flex items-center justify-start lg:justify-center overflow-x-auto sm:overflow-x-hidden",children:i&&i.length>0&&l&&l.length>0?t.jsx(U2,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:c=>c>=1e3?`${(c/1e3).toFixed(0)}k`:c.toString()}],series:[{data:l,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%",minWidth:{xs:600,lg:"100%"}}}):t.jsxs("div",{className:"text-center text-gray-500",children:[t.jsx("p",{className:"text-sm",children:"No revenue data available"}),t.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},gne=({pipelineData:e,loading:s})=>{const a=it(),n=l=>{const c=(l||"").toUpperCase(),d={PROSPECTING:{name:"Prospecting",color:"bg-blue-500"},QUALIFICATION:{name:"Qualification",color:"bg-yellow-500"},PROPOSAL:{name:"Proposal",color:"bg-orange-500"},NEGOTIATION:{name:"Negotiation",color:"bg-purple-500"},CLOSED_WON:{name:"Closed Won",color:"bg-green-500"},CLOSED_LOST:{name:"Closed Lost",color:"bg-red-500"}};if(d[c])return d[c];const m=["bg-blue-500","bg-yellow-500","bg-orange-500","bg-purple-500","bg-green-500","bg-red-500"],f=Math.abs(c.split("").reduce((h,y)=>h+y.charCodeAt(0),0))%m.length;return{name:l||"Unknown",color:m[f]}},i=(()=>{if(!e||e.length===0)return["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"].map(h=>{const y=n(h);return{stage:y.name,value:0,deals:0,color:y.color}});const l={};e.forEach(f=>{const h=f.stage||"PROSPECTING";l[h]||(l[h]={deals:0,value:0}),l[h].deals+=1,l[h].value+=parseFloat(f.amount||0)});const c=Math.max(...Object.values(l).map(f=>f.value),1),d=["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"],m=[];return d.forEach(f=>{const h=n(f),y=l[f]||{deals:0,value:0};m.push({stage:h.name,value:y.value,deals:y.deals,color:h.color,percentage:c>0?y.value/c*100:0})}),m})();return t.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Sales Pipeline"}),t.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:()=>a("/admin/deals"),children:"See All"})]}),t.jsx("div",{className:"space-y-4 flex-grow",children:i.slice(0,6).map(l=>t.jsxs("div",{className:"flex flex-col cursor-pointer hover:opacity-85 transition duration-150",onClick:()=>a("/admin/deals"),children:[t.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[t.jsx("span",{className:"font-medium text-gray-700",children:l.stage}),t.jsx("span",{className:"font-semibold text-gray-800",children:LI(l.value)})]}),t.jsx("div",{className:"relative h-2 rounded-full bg-gray-200",children:t.jsx("div",{className:`absolute top-0 left-0 h-full rounded-full ${l.color}`,style:{width:`${Math.min(l.percentage,100)}%`}})}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[l.deals," Deals"]})]},l.stage))})]})},FN=({title:e,items:s,children:a,onSeeAll:n})=>{const r=it(),i=()=>{if(n)n();else{const l={"Latest Leads":"/admin/leads","Latest Deals":"/admin/deals","Upcoming Activities":"/admin/tasks"};l[e]&&r(l[e])}};return t.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),t.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),a]})},xne=({first_name:e,last_name:s,company_name:a,source:n,created_at:r,id:i})=>{const l=it(),{text:c,bg:d}=lne(n||"Website"),m=N=>{if(!N)return"Unknown";const w=new Date(N),v=new Date-w,C=Math.floor(v/6e4),j=Math.floor(v/36e5),_=Math.floor(v/864e5);return C<60?`${C} min ago`:j<24?w.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):_<7?w.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):w.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},f=`${e||""} ${s||""}`.trim()||"Unknown",h=a||"Unknown Company",y=m(r);return t.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&l(`/admin/leads/${i}`),children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-gray-800",children:f}),t.jsx("p",{className:"text-xs text-gray-500",children:h})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-xs text-gray-400",children:y}),t.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${c} ${d} px-2 py-0.5 rounded-full`,children:n||"Website"})]})]})})},pne=({name:e,amount:s,account:a,stage:n,created_at:r,id:i,previousAmount:l})=>{const c=it(),m={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[n]||n||"Unknown",{text:f,bg:h}=ine(m),y=parseFloat(s||0),N=l?y>=l?"up":"down":"up",w=N==="up"?Wae:Yae,p=N==="up"?"text-green-400":"text-red-400",v=a?.name||"Unknown Company";return t.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&c(`/admin/deals/info?id=${i}`),children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{className:"flex-shrink",children:[t.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),t.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:v}),t.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${f} ${h} px-2 py-0.5 rounded-full`,children:m})]}),t.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[t.jsx("p",{className:"text-md font-bold text-gray-800",children:LI(y)}),t.jsx(w,{size:16,className:`${p} mt-1`})]})]})})},yne=({type:e,title:s,assignedTo:a,dueDate:n,scheduledDate:r,priority:i,id:l,activityType:c,fullData:d})=>{const m=it(),h=c||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:y,color:N,bgColor:w}=one(h),{text:p,bg:v}=cne(i||"MEDIUM"),_=(E=>{if(!E)return"No date set";const A=new Date(E),B=A-new Date,X=Math.floor(B/864e5);return X===0?`Today, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:X===1?`Tomorrow, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:X===-1?`Yesterday, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:A.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(n||r),T=a||"Unassigned",k=()=>{l&&(d?h==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(d)),m(`/admin/calls/info?id=${l}`)):h==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(d)),m(`/admin/meetings/info?id=${l}`)):m("/admin/tasks"):m(h==="call"?`/admin/calls/info?id=${l}`:h==="meeting"?`/admin/meetings/info?id=${l}`:"/admin/tasks"))};return t.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:k,children:[t.jsx("div",{className:`p-2 rounded-lg ${w} mr-3 flex-shrink-0 mt-1`,children:t.jsx(y,{size:20,className:`${N}`})}),t.jsxs("div",{className:"flex-grow",children:[t.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[t.jsx("span",{className:"text-xl leading-none mr-2",children:""}),s||"Untitled Activity"]}),t.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[t.jsxs("p",{className:"flex items-center",children:[t.jsx(_I,{size:14,className:"mr-1.5 text-gray-400"}),_]}),t.jsxs("p",{className:"flex items-center",children:[t.jsx(AI,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",T]})]})]}),t.jsx("span",{className:`inline-block text-xs font-medium ${p} ${v} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},bne=()=>{const e=it(),{user:s}=zt(),[a,n]=g.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0}),[r,i]=g.useState([]),[l,c]=g.useState([]),[d,m]=g.useState([]),[f,h]=g.useState([]),[y,N]=g.useState([]),[w,p]=g.useState([]),[v,C]=g.useState(!0),[j,_]=g.useState(null),[T,k]=g.useState(""),[E,A]=g.useState([]),[U,B]=g.useState([]),[X,$]=g.useState([]),[O,G]=g.useState(new Date),K=g.useRef(null),ae=g.useRef(null),R=g.useMemo(()=>{try{if(!T.trim())return[];const le=T.toLowerCase().trim(),W=[];return Array.isArray(E)&&E.forEach(ee=>{const J=`${ee.first_name||""} ${ee.last_name||""}`.trim().toLowerCase(),he=(ee.company_name||"").toLowerCase(),be=(ee.email||"").toLowerCase(),Le=(ee.phone||"").toLowerCase();(J.includes(le)||he.includes(le)||be.includes(le)||Le.includes(le))&&W.push({id:ee.id,name:`${ee.first_name||""} ${ee.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:ee.company_name||"No company",route:`/admin/leads/${ee.id}`})}),Array.isArray(U)&&U.forEach(ee=>{const J=(ee.name||"").toLowerCase(),he=(ee.account?.name||"").toLowerCase(),be=(ee.description||"").toLowerCase();(J.includes(le)||he.includes(le)||be.includes(le))&&W.push({id:ee.id,name:ee.name||"Unnamed Deal",type:"Deal",details:ee.account?.name||"No account",route:`/admin/deals/info?id=${ee.id}`})}),Array.isArray(X)&&X.forEach(ee=>{const J=(ee.name||"").toLowerCase(),he=(ee.email||"").toLowerCase(),be=(ee.phone||"").toLowerCase(),Le=(ee.website||"").toLowerCase();(J.includes(le)||he.includes(le)||be.includes(le)||Le.includes(le))&&W.push({id:ee.id,name:ee.name||"Unnamed Account",type:"Account",details:ee.email||ee.phone||"No contact info",route:"/admin/accounts"})}),W.slice(0,10)}catch(le){return console.error("Error in search:",le),[]}},[T,E,U,X]),Z=le=>{le.route&&(e(le.route),k(""))},te=g.useCallback(async()=>{C(!0),_(null);try{const[le,W,ee,J,he,be,Le]=await Promise.all([se.get("/leads/admin/getLeads").catch(z=>(console.error("Error fetching leads:",z),{data:[]})),se.get("/deals/admin/fetch-all").catch(z=>(console.error("Error fetching deals:",z),{data:[]})),se.get("/accounts/admin/fetch-all").catch(z=>(console.error("Error fetching accounts:",z),{data:[]})),se.get("/tasks/all").catch(z=>(console.error("Error fetching tasks:",z),{data:[]})),se.get("/meetings/admin/fetch-all").catch(z=>(console.error("Error fetching meetings:",z),{data:[]})),se.get("/calls/admin/fetch-all").catch(z=>(console.error("Error fetching calls:",z),{data:[]})),se.get("/logs/read-all").catch(z=>(console.error("Error fetching logs:",z),{data:[]}))]),Me=Array.isArray(le.data)?le.data:[],ke=Array.isArray(W.data)?W.data:[],F=Array.isArray(ee.data)?ee.data:[],ve=Array.isArray(J.data)?J.data:[],Ce=Array.isArray(he.data)?he.data:[],D=Array.isArray(be.data)?be.data:[],re=Array.isArray(Le.data)?Le.data:[];console.log("=== RAW DEALS API RESPONSE ==="),console.log("Deals count:",ke.length),ke.length>0&&(console.log("First deal sample (raw):",JSON.stringify(ke[0],null,2)),console.log("First deal keys:",Object.keys(ke[0]))),A(Me),B(ke),$(F);const oe=Me.filter(z=>z.status&&!["Lost","Converted"].includes(z.status)).length,je=ve.filter(z=>!z.dueDate||z.status==="Completed"?!1:new Date(z.dueDate)<new Date).length;n({activeLeads:oe,totalDeals:ke.length,activeAccounts:F.length,overdueTasks:je});const Re=[...Me].sort((z,ie)=>new Date(ie.created_at||0)-new Date(z.created_at||0)).slice(0,5);i(Re);const Ke=[...ke].sort((z,ie)=>new Date(ie.created_at||0)-new Date(z.created_at||0)).slice(0,5);c(Ke);const et=new Date,qe=[];D.forEach(z=>{const ie=z.due_date||z.call_time,ue=(z.status||"").toUpperCase();if(ie){const M=new Date(ie);ue==="COMPLETED"||ue==="MISSED"||ue==="NOT_HELD"||ue==="HELD"||qe.push({type:"Call",title:z.subject||"Untitled Call",assignedTo:z.assigned_to||(z.call_assign_to?`${z.call_assign_to.first_name||""} ${z.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:ie,priority:(z.priority||"MEDIUM").toUpperCase(),id:z.id,activityType:"call",fullData:z})}}),Ce.forEach(z=>{const ie=z.dueDate||z.start_time,ue=(z.status||"").toUpperCase();if(ie){const M=new Date(ie);ue==="COMPLETED"||ue==="CANCELLED"||ue==="DONE"||qe.push({type:"Meeting",title:z.subject||z.activity||"Untitled Meeting",assignedTo:z.assignedTo||(z.meet_assign_to?`${z.meet_assign_to.first_name||""} ${z.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:ie,priority:(z.priority||"MEDIUM").toUpperCase(),id:z.id,activityType:"meeting",fullData:z})}});const Ze={HIGH:1,MEDIUM:2,LOW:3},we=qe.sort((z,ie)=>{const ue=Ze[z.priority]||3,M=Ze[ie.priority]||3;if(ue!==M)return ue-M;const xe=new Date(z.scheduledDate||0),ne=new Date(ie.scheduledDate||0);return xe-ne}).slice(0,5);m(we),h(ke),console.log("=== ALL DEALS DATA ==="),console.log("Total deals:",ke.length);const V=ke.filter(z=>(z.stage||"").toUpperCase()==="CLOSED_WON");console.log("CLOSED_WON deals:",V.length),V.length>0?(console.log("=== CLOSED_WON DEALS DETAILS ==="),V.forEach((z,ie)=>{let ue=z.amount;ue&&typeof ue=="object"?ue.toString?ue=parseFloat(ue.toString()):ue=parseFloat(ue):ue=parseFloat(ue)||0,console.log(`Deal ${ie+1}:`,{id:z.id,name:z.name,stage:z.stage,stage_upper:(z.stage||"").toUpperCase(),amount:z.amount,amount_parsed:ue,amount_type:typeof z.amount,close_date:z.close_date,close_date_type:typeof z.close_date,close_date_value:z.close_date?new Date(z.close_date):null,has_close_date:!!z.close_date,has_amount:ue>0,all_keys:Object.keys(z),full_deal:z})})):(console.log(" No CLOSED_WON deals found!"),console.log("All deal stages:",ke.map(z=>z.stage))),p(ke);const pe=[...re].sort((z,ie)=>new Date(ie.timestamp||0)-new Date(z.timestamp||0));N(pe)}catch(le){console.error("Error fetching dashboard data:",le),_("Failed to load dashboard data. Please refresh the page.")}finally{C(!1)}},[]);g.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",console.log("AdminDashboard mounted, fetching data..."),te(),K.current=setInterval(()=>{console.log("Auto-refreshing dashboard data..."),te(),G(new Date)},3e4),()=>{K.current&&clearInterval(K.current)}),[te]),g.useEffect(()=>{if(!s||!s.id)return;let le=0;const W=3;let ee=null;const J=()=>{const he=window.location.protocol==="https:"?"wss:":"ws:",be=window.location.hostname==="localhost"?"localhost:8000":window.location.host,Le=`${he}//${be}/ws/notifications?user_id=${s.id}`;try{const Me=new WebSocket(Le);ae.current=Me,Me.onopen=()=>{console.log(" WebSocket connected for dashboard updates"),le=0},Me.onmessage=ke=>{try{const F=JSON.parse(ke.data);console.log(" Real-time notification received:",F),F.event&&["new_task","task_updated","new_lead","lead_updated","new_deal","deal_updated","new_account","account_updated","new_meeting","meeting_updated","new_call","call_updated"].includes(F.event)&&(console.log(" Refreshing dashboard due to:",F.event),te(),G(new Date))}catch(F){console.error("Error parsing WebSocket message:",F)}},Me.onerror=ke=>{le===0&&console.warn(" WebSocket connection unavailable (this is optional)")},Me.onclose=()=>{le<W&&(le++,ee=setTimeout(()=>{s&&s.id&&J()},5e3))}}catch{console.warn(" WebSocket not available (optional feature)")}};return J(),()=>{ee&&clearTimeout(ee),ae.current&&(ae.current.close(),ae.current=null)}},[s,te]);const ge=[{icon:EI,title:"Active Leads",value:a.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/admin/leads")},{icon:Gae,title:"Total Deals",value:a.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/admin/deals")},{icon:Vae,title:"Active Account",value:a.activeAccounts,color:"text-green-600",bgColor:"bg-green-50",onClick:()=>e("/admin/accounts")},{icon:_I,title:"Overdue Tasks",value:a.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/admin/tasks")}];return console.log("AdminDashboard rendering, loading:",v,"error:",j),t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[v&&t.jsx(xt,{}),t.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[j&&t.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:t.jsx("p",{className:"font-medium",children:j})}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 mb-8",children:[t.jsxs("div",{className:"lg:col-span-9 flex flex-col space-y-4",children:[t.jsx(dne,{searchQuery:T,onSearchChange:k,searchResults:R,onSearchResultClick:Z}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-4 gap-4",children:ge.map(le=>t.jsx(fne,{...le,loading:v},le.title))})]}),t.jsx("div",{className:"lg:col-span-3",children:t.jsx(mne,{logs:y,loading:v})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[t.jsx("div",{className:"lg:col-span-2",children:t.jsx(hne,{revenueData:w,loading:v})}),t.jsx("div",{children:t.jsx(gne,{pipelineData:f,loading:v})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsx(FN,{title:"Latest Leads",children:r.length>0?r.map((le,W)=>t.jsx(xne,{...le},le.id||W)):t.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),t.jsx(FN,{title:"Latest Deals",children:v?t.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mb-2"}),t.jsx("div",{className:"text-sm text-gray-500",children:"Loading deals..."})]}):l.length>0?l.map((le,W)=>t.jsx(pne,{...le},le.id||W)):t.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),t.jsx(FN,{title:"Upcoming Activities",children:d.length>0?d.map((le,W)=>t.jsx(yne,{...le},le.id||W)):t.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})};function Ct({totalItems:e=0,pageSize:s=10,currentPage:a=1,onPrev:n,onNext:r,className:i="",label:l="records"}){const c=e===0?1:Math.ceil(e/s),d=e===0?0:(a-1)*s+1,m=Math.min(a*s,e),f=a<=1||e===0,h=a>=c||e===0,y="inline-flex items-center gap-1 px-3 sm:px-4 py-2 text-sm font-semibold rounded-lg transition focus:outline-none focus:ring-2 focus:ring-offset-1",N="bg-black text-white hover:bg-gray-900",w="bg-gray-200 text-gray-500 cursor-not-allowed focus:ring-transparent";return t.jsxs("div",{className:`flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 ${i}`,children:[t.jsxs("div",{className:"text-sm text-gray-600 font-medium text-center sm:text-left w-full sm:w-auto",children:["Showing ",e===0?0:d,"-",m," of ",e," ",l]}),t.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-end w-full sm:w-auto",children:[t.jsxs("button",{type:"button",onClick:n,disabled:f,className:`${y} ${f?w:N}`,children:[t.jsx(z8,{className:"text-base"}),"Prev"]}),t.jsxs("div",{className:"text-sm font-semibold text-white bg-gray-900 border border-gray-900 shadow-sm px-3 py-1.5 rounded-full",children:["Page ",e===0?0:a," of"," ",e===0?0:c]}),t.jsxs("button",{type:"button",onClick:r,disabled:h,className:`${y} ${h?w:N}`,children:["Next",t.jsx(F8,{className:"text-base"})]})]})]})}const BN=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Active"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Former"}],HN={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"PROSPECT",territory_id:"",assigned_to:""},gn=e=>e?e.toUpperCase():"",GN=e=>e?e.toString().toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()):"--",vne=e=>{switch(gn(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},Nne=e=>{switch(gn(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}},yo=10;function wne(){const e=it();g.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[s,a]=g.useState(!1),[n,r]=g.useState(!1),[i,l]=g.useState(!1),[c,d]=g.useState(null),[m,f]=g.useState(null),[h,y]=g.useState(HN),[N,w]=g.useState(null),[p,v]=g.useState([]),[C,j]=g.useState(!1),[_,T]=g.useState([]),[k,E]=g.useState([]),[A,U]=g.useState("Filter by Status"),[B,X]=g.useState(""),[$,O]=g.useState(null),[G,K]=g.useState(!1),[ae,R]=g.useState(1),[Z,te]=g.useState("Overview"),[ge,le]=g.useState(""),[W,ee]=g.useState(!1),J=g.useCallback(async(ze=null)=>{j(!0);try{const Pe=await se.get("/accounts/admin/fetch-all"),ot=[...Array.isArray(Pe.data)?Pe.data:[]].sort((I,Ne)=>{const H=I?.created_at||I?.updated_at||0,de=Ne?.created_at||Ne?.updated_at||0;return new Date(de)-new Date(H)});if(v(ot),console.log("Fetch from backend: ",Pe.data),ze){const I=ot.find(Ne=>Ne.id===ze);w(I||null)}}catch(Pe){console.error(Pe),v([]),Pe.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch accounts. Please try again later.")}finally{j(!1)}},[w]),he=g.useCallback(async()=>{try{const ze=await se.get("/users/all");T(Array.isArray(ze.data)?ze.data:[])}catch(ze){console.error(ze),ze.response?.status===403&&q.warn("Unable to load users for assignment (permission denied).")}},[]),be=g.useCallback(async()=>{try{const ze=await se.get("/territories/fetch");E(Array.isArray(ze.data)?ze.data:[])}catch(ze){console.error(ze),ze.response?.status===403&&q.warn("Unable to load territories (permission denied).")}},[]);g.useEffect(()=>{J(),he(),be()},[J,he,be]),g.useEffect(()=>{N&&le(gn(N.status)||"PROSPECT")},[N]);const Le=p.length,Me=g.useMemo(()=>p.filter(ze=>ze.status?.toLowerCase()==="customer").length,[p]),ke=g.useMemo(()=>p.filter(ze=>ze.status?.toLowerCase()==="prospect").length,[p]),F=g.useMemo(()=>p.filter(ze=>ze.status?.toLowerCase()==="partner").length,[p]),ve=g.useMemo(()=>p.filter(ze=>ze.status?.toLowerCase()==="active").length,[p]),Ce=g.useMemo(()=>p.filter(ze=>ze.status?.toLowerCase()==="inactive").length,[p]),D=g.useMemo(()=>p.filter(ze=>ze.status?.toLowerCase()==="former").length,[p]),re=g.useMemo(()=>[{title:"Total",value:Le,icon:Jt,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:Me,icon:Wr,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:ke,icon:Cs,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:F,icon:qt,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:ve,icon:Wr,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:Ce,icon:Yr,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:D,icon:Yr,color:"text-orange-600",bgColor:"bg-orange-100"}],[Le,Me,ke,F,ve,Ce,D]),oe=g.useMemo(()=>{const ze=B.trim().toLowerCase(),Pe=A.trim().toUpperCase();return p.filter(lt=>{const ot=[lt?.name,lt?.website,lt?.industry,lt?.territory?.name,lt?.phone_number],I=ze===""||ot.some(H=>H==null?!1:H.toString().toLowerCase().includes(ze)),Ne=Pe==="FILTER BY STATUS"||gn(lt.status)===Pe;return I&&Ne})},[p,B,A]),je=Math.max(1,Math.ceil(oe.length/yo)||1);g.useEffect(()=>{R(1)},[B,A]),g.useEffect(()=>{R(ze=>{const Pe=Math.max(1,Math.ceil(oe.length/yo)||1);return ze>Pe?Pe:ze})},[oe.length]);const Re=g.useMemo(()=>{const ze=(ae-1)*yo;return oe.slice(ze,ze+yo)},[oe,ae]);oe.length===0||(ae-1)*yo+1,Math.min(ae*yo,oe.length);const Ke=()=>R(ze=>Math.max(ze-1,1)),et=()=>R(ze=>Math.min(ze+1,je)),qe=ze=>{w(ze),te("Overview"),le(gn(ze?.status)||"PROSPECT")},Ze=()=>w(null),we=ze=>{ze.target.id==="accountModalBackdrop"&&!G&&Ze()},V=()=>{a(!1),r(!1),f(null),y(HN),l(!1)},pe=ze=>{ze.target.id==="modalBackdrop"&&V()},z=ze=>ze?new Date(ze).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",ie=ze=>{const{name:Pe,value:lt}=ze.target;y(ot=>({...ot,[Pe]:lt}))},ue=()=>{y(HN),r(!1),f(null),a(!0)},M=ze=>{w(null),console.log("edit: ",ze),y({name:ze.name||"",website:ze.website||"",phone_number:ze.phone_number||"",billing_address:ze.billing_address||"",shipping_address:ze.shipping_address||"",industry:ze.industry||"",status:gn(ze.status)||"PROSPECT",territory_id:ze.territory?.id?String(ze.territory.id):"",assigned_to:ze.assigned_accs?.id?String(ze.assigned_accs.id):""}),r(!0),f(ze.id),a(!0)},xe=ze=>{ze&&O({title:"Delete Account",message:t.jsxs("span",{children:["Are you sure you want to permanently delete the account"," ",t.jsx("span",{className:"font-semibold",children:ze.name}),"? This action cannot be undone."]}),confirmLabel:"Delete Account",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ze.id,name:ze.name}})},ne=async()=>{if(!$?.action){O(null);return}const{action:ze}=$,{type:Pe,payload:lt,targetId:ot,name:I}=ze;K(!0);try{if(Pe==="create"){l(!0);const Ne=await se.post("/accounts/admin",lt);q.success(`Account "${I}" created successfully.`);const H=N?.id||null;V(),await J(H),!N&&Ne.data?.id}else if(Pe==="update"){if(!ot)throw new Error("Missing account identifier for update.");l(!0),await se.put(`/accounts/admin/${ot}`,lt),q.success(`Account "${I}" updated successfully.`);const Ne=N?.id&&N.id===ot?ot:null;V(),await J(Ne),N?.id===ot&&w(null)}else if(Pe==="delete"){if(!ot)throw new Error("Missing account identifier for deletion.");const Ne=N?.id;d(ot),await se.delete(`/accounts/admin/${ot}`),q.success(`Account "${I}" deleted successfully.`),await J(Ne&&Ne!==ot?Ne:null),Ne===ot&&w(null)}}catch(Ne){console.error(Ne);const H=Pe==="create"?"Failed to create account. Please review the details and try again.":Pe==="update"?"Failed to update account. Please review the details and try again.":"Failed to delete account. Please try again.",de=Ne.response?.data?.detail||H;q.error(de),(Pe==="create"||Pe==="update")&&l(!1),Pe==="delete"&&d(null)}finally{(Pe==="create"||Pe==="update")&&l(!1),Pe==="delete"&&d(null),K(!1),O(null)}},Te=()=>{G||O(null)},Q=async()=>{if(!N||!ge)return;const ze=gn(ge),Pe=gn(N.status);if(ze!==Pe){ee(!0);try{await se.put(`/accounts/admin/${N.id}`,{status:ze}),q.success(`Account status updated to ${GN(ze)}`),v(lt=>lt.map(ot=>ot.id===N.id?{...ot,status:ze}:ot)),w(null)}catch(lt){console.error(lt);const ot=lt.response?.data?.detail||"Failed to update account status. Please try again.";q.error(ot)}finally{ee(!1)}}},ye=ze=>{ze.preventDefault();const Pe=h.name.trim();if(!Pe){q.error("Account name is required.");return}const lt={name:Pe,website:h.website?.trim()||null,phone_number:h.phone_number?.trim()||null,billing_address:h.billing_address?.trim()||null,shipping_address:h.shipping_address?.trim()||null,industry:h.industry?.trim()||null,status:h.status||"PROSPECT",territory_id:h.territory_id?Number(h.territory_id):null,assigned_to:h.assigned_to?Number(h.assigned_to):null},ot=n&&m?"update":"create";O({title:ot==="create"?"Confirm New Account":"Confirm Update",message:ot==="create"?t.jsxs("span",{children:["Are you sure you want to create the account"," ",t.jsx("span",{className:"font-semibold",children:Pe}),"?"]}):t.jsxs("span",{children:["Save changes to the account"," ",t.jsx("span",{className:"font-semibold",children:Pe}),"?"]}),confirmLabel:ot==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:ot,payload:lt,targetId:m||null,name:Pe}})},P=[{label:"Filter by Status",value:"Filter by Status"},...BN.map(ze=>({label:ze.label,value:ze.value}))],fe=$?.action?.type==="delete"?$.action.targetId:null,me=N&&(c===N.id||fe===N.id),Se=N&&c===N.id,$e=N?vne(N.status):"",We=N?t.jsx("div",{id:"accountModalBackdrop",onClick:we,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:ze=>ze.stopPropagation(),children:[t.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[t.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),t.jsx("button",{onClick:Ze,className:"text-gray-400 hover:text-white cursor-pointer",children:t.jsx(es,{size:25})})]}),t.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[t.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:N.name}),t.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${$e}`,children:GN(N.status)})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>M(N),disabled:$?.action?.type==="update"&&$.action.targetId===N.id,children:[t.jsx(ys,{className:"mr-2"}),"Edit"]}),t.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>xe(N),disabled:!!me,children:Se?"Deleting...":t.jsxs(t.Fragment,{children:[t.jsx(Nt,{className:"mr-2"}),"Delete"]})})]})]}),t.jsx("div",{className:"border-b border-gray-200 my-5"}),t.jsxs("div",{className:"p-6 lg:p-4",children:[t.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(ze=>t.jsx("button",{onClick:()=>te(ze),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${Z===ze?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:ze},ze))}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[t.jsxs("div",{className:"lg:col-span-3",children:[Z==="Overview"&&t.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Website:"}),t.jsx("p",{children:N.website?t.jsx("a",{href:N.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:N.website}):"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Industry:"}),t.jsx("p",{children:N.industry||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Territory:"}),t.jsx("p",{children:N.territory?.name||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Phone Number:"}),t.jsx("p",{children:N.phone_number||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Billing Address:"}),t.jsx("p",{children:N.billing_address||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),t.jsx("p",{children:N.shipping_address||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Assigned To:"}),t.jsx("p",{children:N.assigned_accs?`${N.assigned_accs.first_name} ${N.assigned_accs.last_name}`:"Unassigned"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Created By:"}),t.jsx("p",{children:N.acc_creator?`${N.acc_creator.first_name} ${N.acc_creator.last_name}`:"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Created At:"}),t.jsx("p",{children:z(N.created_at)||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Last Updated:"}),t.jsx("p",{children:z(N.updated_at)||"N/A"})]})]})}),Z==="Notes"&&t.jsxs("div",{className:"mt-4 w-full",children:[t.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:t.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[t.jsx("div",{className:"flex items-start justify-between",children:t.jsx("div",{children:t.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),t.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:p.notes||"No notes available."})]})]}),Z==="Activities"&&t.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:ft,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:dt,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((ze,Pe)=>t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[t.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[t.jsx("div",{className:"text-gray-600 mt-1",children:t.jsx(ze.icon,{size:24})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"font-medium text-gray-900 break-words",children:ze.title}),t.jsx("p",{className:"text-sm text-gray-500 break-words",children:ze.desc}),t.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[t.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),t.jsx("p",{className:"text-sm text-gray-700 break-words",children:ze.user})]})]})]}),t.jsx("p",{className:"text-sm text-gray-500 break-words",children:ze.date})]},Pe))]})]}),t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),t.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[t.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Account"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),t.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Account"}}}),children:[t.jsx(dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),t.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Account"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ts,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),t.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:ge||gn(N?.status)||"PROSPECT",onChange:ze=>le(ze.target.value),children:BN.map(ze=>t.jsx("option",{value:ze.value,children:ze.label},ze.value))}),t.jsx("button",{onClick:Q,disabled:W||!ge||gn(ge)===gn(N?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${W||!ge||gn(ge)===gn(N?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:W?"Updating...":"Update"})]})]})]})]})]})}):null,rt=t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[C&&t.jsx(xt,{message:"Loading accounts..."}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[t.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[t.jsx(Jt,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),t.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:t.jsxs("button",{onClick:ue,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[t.jsx(Lt,{className:"mr-2"})," Add Account"]})})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:re.map(ze=>t.jsx(jne,{...ze},ze.title))}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[t.jsx(yt,{size:20,className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search accounts",value:B,onChange:ze=>X(ze.target.value),className:"focus:outline-none text-base w-full"})]}),t.jsx("div",{className:"w-full lg:w-1/4",children:t.jsx("select",{value:A,onChange:ze=>U(ze.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:P.map(ze=>t.jsx("option",{value:ze.value,children:ze.label},ze.value))})})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[t.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),t.jsx("th",{className:"py-3 px-4",children:"Status"}),t.jsx("th",{className:"py-3 px-4",children:"Industry"}),t.jsx("th",{className:"py-3 px-4",children:"Territory"}),t.jsx("th",{className:"py-3 px-4",children:"Phone"})]})}),t.jsx("tbody",{children:C?t.jsx("tr",{children:t.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"Loading accounts..."})}):oe.length>0?Re.map(ze=>t.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>qe(ze),children:[t.jsx("td",{className:"py-3 px-4",children:t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:ze.name}),t.jsx("div",{className:"text-gray-500 text-xs break-all",children:ze.website||"--"})]})}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${Nne(ze.status)}`,children:GN(ze.status)})}),t.jsx("td",{className:"py-3 px-4 text-sm",children:ze.industry||"--"}),t.jsx("td",{className:"py-3 px-4 text-sm",children:ze.territory?.name||"--"}),t.jsx("td",{className:"py-3 px-4",children:t.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[t.jsx(ft,{className:"text-gray-500"}),t.jsx("span",{children:ze.phone_number||"--"})]})})]},ze.id)):t.jsx("tr",{children:t.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"No accounts found."})})})]})}),t.jsx(Ct,{className:"mt-4",totalItems:oe.length,pageSize:yo,currentPage:ae,onPrev:Ke,onNext:et,label:"accounts"})]}),wt=s?t.jsx("div",{id:"modalBackdrop",onClick:pe,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:ze=>ze.stopPropagation(),children:[t.jsx("button",{onClick:V,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:i||G,children:t.jsx(jt,{size:22})}),t.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:n?"Edit Account":"Add New Account"}),t.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:ye,children:[t.jsx(bd,{label:"Name",name:"name",value:h.name,onChange:ie,placeholder:"Company name",required:!0,disabled:i,className:"md:col-span-2"}),t.jsx(bd,{label:"Website",name:"website",value:h.website,onChange:ie,placeholder:"https://example.com",disabled:i}),t.jsx(bd,{label:"Phone Number",name:"phone_number",value:h.phone_number,onChange:ie,placeholder:"09xx xxx xxxx",type:"tel",disabled:i}),t.jsx(bd,{label:"Industry",name:"industry",value:h.industry,onChange:ie,placeholder:"Industry",disabled:i}),t.jsx(bd,{label:"Billing Address",name:"billing_address",value:h.billing_address,onChange:ie,placeholder:"Billing address",disabled:i}),t.jsx(bd,{label:"Shipping Address",name:"shipping_address",value:h.shipping_address,onChange:ie,placeholder:"Shipping address",disabled:i}),t.jsx(lk,{label:"Status",name:"status",value:h.status,onChange:ie,options:[{value:"",label:"Select status"},...BN],required:!0,disabled:i}),t.jsx(Cne,{label:"Assigned To",value:h.assigned_to,onChange:ze=>y(Pe=>({...Pe,assigned_to:ze})),items:_||[],getLabel:ze=>`${ze?.first_name??""} ${ze?.last_name??""} (${ze?.role??""})`.trim(),placeholder:"Search assignee...",disabled:i||_.length===0}),t.jsx(lk,{label:"Territory",name:"territory_id",value:h.territory_id,onChange:ie,options:[{value:"",label:"No Territory"},...k.map(ze=>({value:String(ze.id),label:ze.name}))],disabled:i||k.length===0}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[t.jsx("button",{type:"button",onClick:V,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i||G,children:"Cancel"}),t.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i||G,children:i?"Saving...":n?"Update Account":"Save Account"})]})]})]})}):null,Ut=$?t.jsx(_ne,{open:!0,title:$.title,message:$.message,confirmLabel:$.confirmLabel,cancelLabel:$.cancelLabel,variant:$.variant,onConfirm:ne,onCancel:Te,loading:G}):null;return t.jsxs(t.Fragment,{children:[rt,We,wt,Ut]})}function jne({icon:e,title:s,value:a,color:n="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${s}`)};return t.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[t.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${n} mr-4`,children:e?t.jsx(e,{size:22}):null}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"text-xs text-gray-500 uppercase",children:s}),t.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function bd({label:e,name:s,value:a,onChange:n,placeholder:r,type:i="text",required:l=!1,disabled:c=!1,className:d=""}){return t.jsxs("div",{className:d,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("input",{type:i,name:s,value:a??"",onChange:n,placeholder:r,required:l,disabled:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]})}function lk({label:e,name:s,value:a,onChange:n,options:r,required:i=!1,disabled:l=!1}){return t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("select",{name:s,value:a??"",onChange:n,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(c=>t.jsx("option",{value:c.value,children:c.label},c.value))})]})}function Cne({label:e,items:s=[],value:a="",onChange:n,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:c=""}){return t.jsxs("div",{className:c,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx(Sne,{items:s,value:a??"",onChange:n,getLabel:r,placeholder:i,disabled:l})]})}function Sne({items:e=[],value:s="",onChange:a,getLabel:n,placeholder:r="Search...",disabled:i=!1,maxRender:l=200}){const[c,d]=g.useState(!1),[m,f]=g.useState(""),h=g.useRef(null),y=e.find(p=>String(p.id)===String(s)),N=y?n(y):"",w=g.useMemo(()=>{const p=m.trim().toLowerCase();return(p?e.filter(C=>(n(C)||"").toLowerCase().includes(p)):e).slice(0,l)},[e,m,n,l]);return g.useEffect(()=>{const p=v=>{h.current&&!h.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]),g.useEffect(()=>{c||f("")},[c]),t.jsxs("div",{ref:h,className:"relative w-full",children:[t.jsx("input",{disabled:i,value:c?m:N,placeholder:r,onFocus:()=>!i&&d(!0),onChange:p=>{f(p.target.value),c||d(!0)},className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),c&&!i&&t.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[t.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:w.length>0?w.map(p=>{const v=String(p.id),C=n(p),j=String(s)===v;return t.jsx("button",{type:"button",onClick:()=>{a(v),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${j?"bg-blue-50":""}`,children:C||"--"},v)}):t.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&t.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function _ne({open:e,title:s,message:a,confirmLabel:n,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:c,onCancel:d}){if(!e)return null;const m=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s}),t.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),t.jsx("button",{type:"button",onClick:c,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${m}`,disabled:l,children:l?"Processing...":n})]})]})})}function Ph(e){return ct({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M4 2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm3 0a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm3.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zM4 5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zM7.5 5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm2.5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zM4.5 8a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm2.5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm3.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5z"},child:[]},{tag:"path",attr:{d:"M2 1a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1zm11 0H3v14h3v-2.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5V15h3z"},child:[]}]})(e)}const Cm=10,VN={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},vd=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),Sm=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function Tne(){const e=it();g.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[s,a]=g.useState([]),[n,r]=g.useState(!1),[i,l]=g.useState([]),[c,d]=g.useState([]),[m,f]=g.useState(null),[h,y]=g.useState(!1),[N,w]=g.useState(!1),[p,v]=g.useState(!1),[C,j]=g.useState(null),[_,T]=g.useState(!1),[k,E]=g.useState(null),[A,U]=g.useState(VN),[B,X]=g.useState(""),[$,O]=g.useState("Filter by Accounts"),[G,K]=g.useState(null),[ae,R]=g.useState("Overview"),[Z,te]=g.useState(1),ge=g.useCallback(async(M=null)=>{r(!0);try{const xe=await se.get("/contacts/admin/fetch-all"),Te=[...Array.isArray(xe.data)?xe.data:[]].sort((Q,ye)=>{const P=Q?.created_at||Q?.updated_at||0,fe=ye?.created_at||ye?.updated_at||0;return new Date(fe)-new Date(P)});if(a(Te),console.log(xe.data),M){const Q=Te.find(ye=>ye.id===M);f(Q||null)}}catch(xe){console.error(xe),a([]),xe.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch contacts. Please try again later.")}finally{r(!1)}},[f]),le=g.useCallback(async()=>{try{const M=await se.get("/accounts/admin/fetch-all"),ne=[...Array.isArray(M.data)?M.data:[]].sort((Te,Q)=>(Te?.name||"").localeCompare(Q?.name||""));l(ne)}catch(M){console.error(M),l([]),M.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},[]),W=g.useCallback(async()=>{try{const M=await se.get("/users/all"),ne=[...Array.isArray(M.data)?M.data:[]].sort((Te,Q)=>vd(Te).localeCompare(vd(Q)));d(ne)}catch(M){console.error(M),d([]),M.response?.status===403&&q.warn("Unable to load users for assignment (permission denied).")}},[]);g.useEffect(()=>{ge(),le(),W()},[ge,le,W]);const ee=g.useMemo(()=>{const M=new Map;i.forEach(ne=>{ne?.id&&ne?.name&&M.set(String(ne.id),ne.name)}),s.forEach(ne=>{ne?.account_id&&ne?.account?.name&&M.set(String(ne.account_id),ne.account.name)});const xe=Array.from(M.entries()).sort((ne,Te)=>ne[1].localeCompare(Te[1])).map(([ne,Te])=>({value:ne,label:Te}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...xe]},[i,s]),J=g.useMemo(()=>{const M=B.trim().toLowerCase(),xe=$.trim();return s.filter(ne=>{const Te=[ne?.first_name,ne?.last_name,ne?.email,ne?.title,ne?.department,ne?.account?.name,ne?.account?.status,ne?.work_phone,ne?.mobile_phone_1,ne?.mobile_phone_2,ne?.assigned_contact?.first_name,ne?.assigned_contact?.last_name,ne?.contact_creator?.first_name,ne?.contact_creator?.last_name,ne?.notes,Sm(ne?.created_at),Sm(ne?.updated_at)],Q=M===""||Te.some(P=>P==null?!1:P.toString().toLowerCase().includes(M)),ye=xe==="Filter by Accounts"||String(ne.account_id)===xe;return Q&&ye})},[s,B,$]),he=Math.max(1,Math.ceil(J.length/Cm)||1);g.useEffect(()=>{te(1)},[B,$]),g.useEffect(()=>{te(M=>{const xe=Math.max(1,Math.ceil(J.length/Cm)||1);return M>xe?xe:M})},[J.length]);const be=g.useMemo(()=>{const M=(Z-1)*Cm;return J.slice(M,M+Cm)},[J,Z]),Le=()=>te(M=>Math.max(M-1,1)),Me=()=>te(M=>Math.min(M+1,he)),ke=g.useCallback(()=>{y(!1),w(!1),E(null),U(VN),v(!1)},[]),F=M=>{M.target.id==="modalBackdrop"&&!p&&!_&&ke()},ve=M=>{const{name:xe,value:ne}=M.target;U(Te=>({...Te,[xe]:ne}))},Ce=()=>{U(VN),w(!1),E(null),y(!0)},D=M=>{M&&(U({first_name:M.first_name||"",last_name:M.last_name||"",account_id:M.account_id?String(M.account_id):"",title:M.title||"",department:M.department||"",email:M.email||"",work_phone:M.work_phone||"",mobile_phone_1:M.mobile_phone_1||"",mobile_phone_2:M.mobile_phone_2||"",notes:M.notes||"",assigned_to:M.assigned_to?String(M.assigned_to):""}),w(!0),E(M.id),y(!0),f(null))},re=M=>{if(!M)return;const xe=vd(M)||"this contact";j({title:"Delete Contact",message:t.jsxs("span",{children:["Are you sure you want to permanently delete"," ",t.jsx("span",{className:"font-semibold",children:xe}),"? This action cannot be undone."]}),confirmLabel:"Delete Contact",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:M.id,name:xe}})},oe=M=>{M.preventDefault();const xe=A.first_name.trim(),ne=A.last_name.trim();if(!xe||!ne){q.error("First name and last name are required.");return}if(!A.account_id){q.error("Account is required.");return}const Te={first_name:xe,last_name:ne,account_id:Number(A.account_id),title:A.title?.trim()||null,department:A.department?.trim()||null,email:A.email?.trim().toLowerCase()||null,work_phone:A.work_phone?.trim()||null,mobile_phone_1:A.mobile_phone_1?.trim()||null,mobile_phone_2:A.mobile_phone_2?.trim()||null,notes:A.notes?.trim()||null,assigned_to:A.assigned_to?Number(A.assigned_to):null},Q=N&&k?"update":"create",ye=`${xe} ${ne}`.trim();j({title:Q==="create"?"Confirm New Contact":"Confirm Update",message:Q==="create"?t.jsxs("span",{children:["Are you sure you want to add"," ",t.jsx("span",{className:"font-semibold",children:ye})," to your contacts?"]}):t.jsxs("span",{children:["Save changes to ",t.jsx("span",{className:"font-semibold",children:ye}),"?"]}),confirmLabel:Q==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:Q,payload:Te,targetId:k||null,name:ye}})},je=async()=>{if(!C?.action){j(null);return}const{action:M}=C,{type:xe,payload:ne,targetId:Te,name:Q}=M;T(!0);try{if(xe==="create"){v(!0),await se.post("/contacts/admin",ne),q.success(`Contact "${Q}" created successfully.`);const ye=m?.id||null;ke(),await ge(ye)}else if(xe==="update"){if(!Te)throw new Error("Missing contact identifier for update.");v(!0),await se.put(`/contacts/admin/${Te}`,ne),q.success(`Contact "${Q}" updated successfully.`);const ye=m?.id&&m.id===Te?Te:m?.id||null;ke(),await ge(ye),m?.id===Te&&f(null)}else if(xe==="delete"){if(!Te)throw new Error("Missing contact identifier for deletion.");const ye=m?.id;K(Te),await se.delete(`/contacts/admin/${Te}`),q.success(`Contact "${Q}" deleted successfully.`),await ge(ye&&ye!==Te?ye:null),ye===Te&&f(null)}}catch(ye){console.error(ye);const P=xe==="create"?"Failed to create contact. Please review the details and try again.":xe==="update"?"Failed to update contact. Please review the details and try again.":"Failed to delete contact. Please try again.",fe=ye.response?.data?.detail||P;q.error(fe)}finally{(xe==="create"||xe==="update")&&v(!1),xe==="delete"&&K(null),T(!1),j(null)}},Re=()=>{_||j(null)},Ke=M=>{f(M),R("Overview")},et=()=>f(null),qe=M=>{M.target.id==="contactModalBackdrop"&&!_&&et()},Ze=C?.action?.type==="delete"?C.action.targetId:null,we=m&&(G===m.id||Ze===m.id),V=m&&G===m.id,pe=m?t.jsx("div",{id:"contactModalBackdrop",onClick:qe,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:M=>M.stopPropagation(),children:[t.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[t.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),t.jsx("button",{onClick:et,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:t.jsx(es,{size:25})})]}),t.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[t.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:t.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:vd(m)||"Unnamed contact"})}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>D(m),disabled:_||C?.action?.type==="update"&&C.action.targetId===m.id,children:[t.jsx(ys,{className:"mr-2"}),"Edit"]}),t.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>re(m),disabled:!!we,children:V?"Deleting...":t.jsxs(t.Fragment,{children:[t.jsx(Nt,{className:"mr-2"}),"Delete"]})})]})]}),t.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:t.jsx("p",{className:"text-sm text-gray-500",children:m.account?.name||"No associated account"})}),t.jsx("div",{className:"border-b border-gray-200 my-5"}),t.jsxs("div",{className:"p-6 lg:p-4",children:[t.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(M=>t.jsx("button",{onClick:()=>R(M),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${ae===M?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:M},M))}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[t.jsxs("div",{className:"lg:col-span-3",children:[ae==="Overview"&&t.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Contact Name:"}),t.jsx("p",{children:vd(m)||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Title:"}),t.jsx("p",{children:m.title||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Email:"}),t.jsx("p",{children:m.email?t.jsx("a",{href:`mailto:${m.email}`,className:"text-blue-600 hover:underline break-all",children:m.email}):"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Department:"}),t.jsx("p",{children:m.department||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Work Phone:"}),t.jsx("p",{children:m.work_phone||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),t.jsx("p",{children:m.mobile_phone_1||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),t.jsx("p",{children:m.mobile_phone_2||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Assigned To:"}),t.jsx("p",{children:m.assigned_contact?`${m.assigned_contact.first_name} ${m.assigned_contact.last_name}`:"Unassigned"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Created By:"}),t.jsx("p",{children:m.contact_creator?`${m.contact_creator.first_name} ${m.contact_creator.last_name}`:"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Created At:"}),t.jsx("p",{children:Sm(m.created_at)||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Last Updated:"}),t.jsx("p",{children:Sm(m.updated_at)||"N/A"})]})]})}),ae==="Notes"&&t.jsxs("div",{className:"mt-4 w-full",children:[t.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:t.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[t.jsx("div",{className:"flex items-start justify-between",children:t.jsx("div",{children:t.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),t.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:m.notes||"No notes available."})]})]}),ae==="Activities"&&t.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:ft,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:dt,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((M,xe)=>t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[t.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[t.jsx("div",{className:"text-gray-600 mt-1",children:t.jsx(M.icon,{size:24})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"font-medium text-gray-900 break-words",children:M.title}),t.jsx("p",{className:"text-sm text-gray-500 break-words",children:M.desc}),t.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[t.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),t.jsx("p",{className:"text-sm text-gray-700 break-words",children:M.user})]})]})]}),t.jsx("p",{className:"text-sm text-gray-500 break-words",children:M.date})]},xe))]})]}),t.jsx("div",{className:"flex flex-col gap-4",children:t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),t.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[t.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Contact"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),t.jsxs("button",{type:"button",onClick:()=>{if(!m?.email){alert("No email address available");return}const M=encodeURIComponent(m.email),xe=encodeURIComponent(""),ne=encodeURIComponent(""),Te=`https://mail.google.com/mail/?view=cm&fs=1&to=${M}&su=${xe}&body=${ne}`;window.open(Te,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(js,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),t.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Contact"}}}),children:[t.jsx(dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),t.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Contact"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ts,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,z=t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[n&&t.jsx(xt,{message:"Loading contacts..."}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[t.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[t.jsx(Jt,{className:"mr-2 text-blue-600"})," Contacts Management"]}),t.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:t.jsxs("button",{onClick:Ce,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[t.jsx(Lt,{className:"mr-2"})," Add Contact"]})})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[t.jsx(yt,{size:20,className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search contacts",value:B,onChange:M=>X(M.target.value),className:"focus:outline-none text-base w-full"})]}),t.jsx("div",{className:"w-full lg:w-1/4",children:t.jsx("select",{value:$,onChange:M=>O(M.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:ee.map(M=>t.jsx("option",{value:M.value,children:M.label},M.value??M.label))})})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[t.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),t.jsx("th",{className:"py-3 px-4",children:"Account"}),t.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),t.jsx("th",{className:"py-3 px-4",children:"Department"}),t.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),t.jsx("th",{className:"py-3 px-4",children:"Created"})]})}),t.jsx("tbody",{children:n?t.jsx("tr",{children:t.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"Loading contacts..."})}):J.length>0?be.map(M=>{const xe=[{Icon:js,value:M.email,key:"email"},{Icon:ft,value:M.work_phone,key:"work_phone"},{Icon:Bl,value:M.mobile_phone_1,key:"mobile_phone_1"},{Icon:Bl,value:M.mobile_phone_2,key:"mobile_phone_2"}].filter(ne=>!!ne.value);return t.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>Ke(M),children:[t.jsxs("td",{className:"py-3 px-4 align-top",children:[t.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:vd(M)||"--"}),t.jsx("div",{className:"text-xs text-gray-500",children:M.title||"No title"})]}),t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[t.jsx(Ph,{className:"text-gray-500 flex-shrink-0"}),t.jsx("span",{className:"break-words",children:M.account?.name||"--"})]})}),t.jsx("td",{className:"py-3 px-4 align-top",children:xe.length>0?t.jsx("div",{className:"space-y-1 text-gray-700",children:xe.map(({Icon:ne,value:Te,key:Q})=>{const ye=at.createElement(ne,{className:"text-gray-500 flex-shrink-0"});return t.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[ye,t.jsx("span",{children:Te})]},Q)})}):t.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[t.jsx(Es,{className:"text-gray-500 flex-shrink-0"}),t.jsx("span",{children:M.department||"--"})]})}),t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[t.jsx(qt,{className:"text-gray-500 flex-shrink-0"}),t.jsx("span",{children:M.assigned_contact?`${M.assigned_contact.first_name} ${M.assigned_contact.last_name}`:"Unassigned"})]})}),t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[t.jsx(dt,{className:"text-gray-500 flex-shrink-0"}),t.jsx("span",{className:"text-xs",children:Sm(M.created_at)||"--"})]})})]},M.id)}):t.jsx("tr",{children:t.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"No contacts found."})})})]})}),t.jsx(Ct,{className:"mt-4",totalItems:J.length,pageSize:Cm,currentPage:Z,onPrev:Le,onNext:Me,label:"contacts"})]}),ie=h?t.jsx("div",{id:"modalBackdrop",onClick:F,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:M=>M.stopPropagation(),children:[t.jsx("button",{onClick:ke,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:p||_,children:t.jsx(jt,{size:22})}),t.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:N?"Edit Contact":"Add New Contact"}),t.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:oe,children:[t.jsx(Sl,{label:"First Name",name:"first_name",value:A.first_name,onChange:ve,placeholder:"First name",required:!0,disabled:p}),t.jsx(Sl,{label:"Last Name",name:"last_name",value:A.last_name,onChange:ve,placeholder:"Last name",required:!0,disabled:p}),t.jsx(ok,{label:"Account",value:A.account_id,onChange:M=>U(xe=>({...xe,account_id:M})),items:i||[],getLabel:M=>M?.name??"",placeholder:"Search account...",disabled:p||N||i.length===0}),t.jsx(ok,{label:"Assigned To",value:A.assigned_to,onChange:M=>U(xe=>({...xe,assigned_to:M})),items:c||[],getLabel:M=>`${M?.first_name??""} ${M?.last_name??""} (${M?.role??""})`.trim(),placeholder:"Search assignee...",disabled:p||N||c.length===0}),t.jsx(Sl,{label:"Title",name:"title",value:A.title,onChange:ve,placeholder:"Job title",disabled:p}),t.jsx(Sl,{label:"Department",name:"department",value:A.department,onChange:ve,placeholder:"Department",disabled:p}),t.jsx(Sl,{label:"Email",name:"email",type:"email",value:A.email,onChange:ve,placeholder:"example@email.com",disabled:p}),t.jsx(Sl,{label:"Work Phone",name:"work_phone",value:A.work_phone,onChange:ve,placeholder:"09xx xxx xxxx",disabled:p}),t.jsx(Sl,{label:"Mobile Phone 1",name:"mobile_phone_1",value:A.mobile_phone_1,onChange:ve,placeholder:"09xx xxx xxxx",disabled:p}),t.jsx(Sl,{label:"Mobile Phone 2",name:"mobile_phone_2",value:A.mobile_phone_2,onChange:ve,placeholder:"09xx xxx xxxx",disabled:p}),t.jsx(Ane,{label:"Notes",name:"notes",value:A.notes,onChange:ve,placeholder:"Additional details...",rows:3,disabled:p,className:"md:col-span-2"}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[t.jsx("button",{type:"button",onClick:ke,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:p||_,children:"Cancel"}),t.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:p||_,children:p?"Saving...":N?"Update Contact":"Save Contact"})]})]})]})}):null,ue=C?t.jsx(Lne,{open:!0,title:C.title,message:C.message,confirmLabel:C.confirmLabel,cancelLabel:C.cancelLabel,variant:C.variant,onConfirm:je,onCancel:Re,loading:_}):null;return t.jsxs(t.Fragment,{children:[z,pe,ie,ue]})}function Sl({label:e,name:s,value:a,onChange:n,placeholder:r,type:i="text",required:l=!1,disabled:c=!1}){return t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("input",{type:i,name:s,value:a??"",onChange:n,placeholder:r,required:l,disabled:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]})}function ok({label:e,items:s=[],value:a="",onChange:n,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:c=""}){return t.jsxs("div",{className:c,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx(Ene,{items:s,value:a??"",onChange:n,getLabel:r,placeholder:i,disabled:l})]})}function Ene({items:e=[],value:s="",onChange:a,getLabel:n,placeholder:r="Search...",disabled:i=!1,maxRender:l=200}){const[c,d]=g.useState(!1),[m,f]=g.useState(""),h=g.useRef(null),y=e.find(p=>String(p.id)===String(s)),N=y?n(y):"",w=g.useMemo(()=>{const p=m.trim().toLowerCase();return(p?e.filter(C=>(n(C)||"").toLowerCase().includes(p)):e).slice(0,l)},[e,m,n,l]);return g.useEffect(()=>{const p=v=>{h.current&&!h.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]),g.useEffect(()=>{c||f("")},[c]),t.jsxs("div",{ref:h,className:"relative w-full",children:[t.jsx("input",{disabled:i,value:c?m:N,placeholder:r,onFocus:()=>!i&&d(!0),onChange:p=>{f(p.target.value),c||d(!0)},className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),c&&!i&&t.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[t.jsx("div",{className:"max-h-56 overflow-y-auto",children:w.length>0?w.map(p=>{const v=String(p.id),C=n(p),j=String(s)===v;return t.jsx("button",{type:"button",onClick:()=>{a(v),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${j?"bg-blue-50":""}`,children:C||"--"},v)}):t.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&t.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function Ane({label:e,name:s,value:a,onChange:n,placeholder:r,rows:i=3,disabled:l=!1,className:c=""}){return t.jsxs("div",{className:c,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("textarea",{name:s,value:a??"",onChange:n,placeholder:r,rows:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function Lne({open:e,title:s,message:a,confirmLabel:n,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:c,onCancel:d}){if(!e)return null;const m=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s}),t.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),t.jsx("button",{type:"button",onClick:c,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${m}`,disabled:l,children:l?"Processing...":n})]})]})})}function kI({lead:e,onBack:s,fetchLeads:a,onEdit:n,onDelete:r,setSelectedLead:i}){const l=it(),{leadID:c}=Qi(),[d,m]=g.useState(e||null),[f,h]=g.useState("Overview"),[y,N]=g.useState(""),[w,p]=g.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[v,C]=g.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[j,_]=g.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),T=async()=>{try{if(e){m(e),N(e.status||"New");return}if(!c)return;const B=await se.get(`/leads/get/${c}`);m(B.data),N(B.data.status||"New"),p({name:B.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:B.data.territory?.id||null,assigned_to:B.data.assigned_to?.id||null,created_by:B.data.creator?.id||null}),C({last_name:B.data.last_name||"",first_name:B.data.first_name||"",account_id:null,title:B.data.title||"",department:B.data.department||"",email:B.data.email||"",work_phone:B.data.work_phone||"",mobile_phone_1:B.data.mobile_phone_1||"",mobile_phone_2:B.data.mobile_phone_2||"",notes:"",assigned_to:B.data.assigned_to?.id||null,created_by:B.data.creator?.id||null}),_({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:B.data.assigned_to?.id||null,created_by:B.data.creator?.id||null})}catch(B){console.error(B)}};g.useEffect(()=>{e?(m(e),N(e.status||"New")):c&&T()},[c,e]);const k=async()=>{try{const B=await se.put(`/leads/${d.id}/update/status`,{status:y});console.log(B.data),q.success("Lead status updated successfully");const X={...d,status:B.data.status};m(X),i&&i(X),a&&a(),s&&s()}catch(B){console.error(B),q.error("Failed to update lead status")}},E=async B=>{const X={...w,assigned_to:B.assigned_to?.id,billing_address:B.address,shipping_address:B.address,created_by:B.creator?.id,industry:null,name:B.company_name,phone_number:B.work_phone,status:"Prospect",territory_id:B.territory?.id,website:""};console.log("Account data: ",X),console.log("Contact data: ",v),console.log("Deal data: ",j),console.log("Lead data: ",B);try{const O=(await se.post("/accounts/convertedLead",X)).data.id,G={...v,account_id:O,assigned_to:B.assigned_to?.id,created_by:B.creator?.id,department:B.department,email:B.email,first_name:B.first_name,last_name:B.last_name,mobile_phone_1:B.mobile_phone_1,mobile_phone_2:B.mobile_phone_2,notes:B.notes,title:B.title,work_phone:B.work_phone},ae=(await se.post("/contacts/convertedLead",G)).data.id,R=()=>{switch(j.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},Z=j.amount&&j.amount!==""?parseFloat(j.amount):0,te={...j,account_id:O,assigned_to:B.assigned_to?.id,created_by:B.creator?.id,primary_contact_id:ae,probability:R(),stage:"Prospecting"},ge=await se.post("/deals/convertedLead",te),le=await se.put(`/leads/convert/${B.id}`);i&&i(null),a(),q.success("Lead converted successfully!"),s()}catch($){console.error("Error during conversion:",$);const O=$.response?.data?.detail||$.message||"Failed to convert lead. Please try again.";q.error(O)}},A=B=>{switch((B||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},U=B=>B.toString().toLowerCase().replace(/\b\w/g,X=>X.toUpperCase());return d?t.jsx(t.Fragment,{children:t.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[t.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:t.jsxs("div",{className:"flex items-start justify-between w-full",children:[t.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),t.jsx("button",{onClick:()=>{s?s():l(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:t.jsx(es,{size:25})})]})}),t.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[t.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[d.first_name," ",d.last_name]}),t.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${A(d.status)}`,children:U(d.status||"New")}),t.jsx("button",{onClick:()=>{d.status==="Qualified"?E(d):q.warn("Cannot convert lead. Only leads with 'Qualified' status can be converted.")},className:"bg-green-600 hover:bg-green-700 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2 focus:ring-green-400",children:"Convert"})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsxs("button",{type:"button",onClick:()=>{n&&d&&n(d)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[t.jsx(hs,{className:"mr-2"}),"Edit"]}),t.jsxs("button",{type:"button",onClick:()=>{r&&d&&r(d)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[t.jsx(Nt,{className:"mr-2"}),"Delete"]})]})]}),t.jsx("div",{className:"border-b border-gray-200 my-5"}),t.jsxs("div",{className:"p-4 lg:p-4",children:[t.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(B=>t.jsx("button",{onClick:()=>h(B),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${f===B?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:B},B))}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[t.jsxs("div",{className:"lg:col-span-3",children:[f==="Overview"&&t.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Name:"}),t.jsxs("p",{children:[d.first_name," ",d.last_name||"N/A"]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Company:"}),t.jsx("p",{children:d.company_name||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Title:"}),t.jsx("p",{children:d.title||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Department:"}),t.jsx("p",{children:d.department||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Email:"}),t.jsx("p",{children:d.email||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Territory:"}),t.jsx("p",{children:d.territory?.name||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Assigned To:"}),t.jsx("p",{children:d.assigned_to?`${d.assigned_to.first_name} ${d.assigned_to.last_name}`:"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Created By:"}),t.jsx("p",{children:d.creator?`${d.creator.first_name} ${d.creator.last_name}`:"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Work Phone:"}),t.jsx("p",{children:d.work_phone||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),t.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),t.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Source:"}),t.jsx("p",{children:d.source||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Address:"}),t.jsx("p",{children:d.address||"N/A"})]})]})}),f==="Notes"&&t.jsxs("div",{className:"mt-4 w-full",children:[t.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:t.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[t.jsx("div",{className:"flex items-start justify-between",children:t.jsx("div",{children:t.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),t.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]})]}),f==="Activities"&&t.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:ft,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:dt,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((B,X)=>t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[t.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[t.jsx("div",{className:"text-gray-600 mt-1",children:t.jsx(B.icon,{size:24})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"font-medium text-gray-900 break-words",children:B.title}),t.jsx("p",{className:"text-sm text-gray-500 break-words",children:B.desc}),t.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[t.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),t.jsx("p",{className:"text-sm text-gray-700 break-words",children:B.user})]})]})]}),t.jsx("p",{className:"text-sm text-gray-500 break-words",children:B.date})]},X))]})]}),t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),t.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[t.jsxs("button",{onClick:()=>l("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Lead"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),t.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const B=encodeURIComponent(d.email),X=encodeURIComponent(""),$=encodeURIComponent(""),O=`https://mail.google.com/mail/?view=cm&fs=1&to=${B}&su=${X}&body=${$}`;window.open(O,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(js,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),t.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>l("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Lead"}}}),children:[t.jsx(dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),t.jsxs("button",{onClick:()=>l("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Lead"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ts,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),t.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:y,onChange:B=>N(B.target.value),children:[t.jsx("option",{value:"New",children:"New"}),t.jsx("option",{value:"Contacted",children:"Contacted"}),t.jsx("option",{value:"Qualified",children:"Qualified"}),t.jsx("option",{value:"Converted",children:"Converted"}),t.jsx("option",{value:"Lost",children:"Lost"})]}),t.jsx("button",{onClick:k,disabled:y===d.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${y===d.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const kne=pu.all(),WN=kne.map((e,s)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${s}`})),Dne=e=>e.toString().toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()),Mne=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},_m=10,YN={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function Pne(){const e=it(),{leadID:s}=Qi();Aa();const[a,n]=g.useState(null),[r,i]=g.useState(!1),[l,c]=g.useState(null),[d,m]=g.useState(null),[f,h]=g.useState([]),[y,N]=g.useState(!1),[w,p]=g.useState(""),[v,C]=g.useState("Filter by Status"),[j,_]=g.useState(""),[T,k]=g.useState(1),[E,A]=g.useState(YN),[U,B]=g.useState(!1),[X,$]=g.useState(null),[O,G]=g.useState(!1),[K,ae]=g.useState(null),[R,Z]=g.useState(!1);g.useRef(null);const[te,ge]=g.useState(!1),[le,W]=g.useState(null),[ee,J]=g.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[he,be]=g.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[Le,Me]=g.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});g.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const ke=async()=>{try{const P=await se.get("/leads/getUsers");c(P.data)}catch(P){console.error(`Error fetching users: ${P}`)}},F=async()=>{N(!0);try{const P=await se.get("/leads/admin/getLeads");h(P.data),console.log(P.data)}catch(P){console.error(`Error fetching leads: ${P}`)}finally{N(!1)}};g.useEffect(()=>{ke(),F()},[]),g.useEffect(()=>{if(s&&f.length>0&&!r&&!U){const P=f.find(fe=>fe.id===Number(s));P&&n(P)}else!s&&!a&&n(null)},[s,f,r,U]),g.useEffect(()=>{if(le){const fe=($e=>{if(!$e)return{code:"+63",number:""};const We=$e.match(/^(\+\d+)\s(.+)$/);if(We)return{code:We[1],number:We[2]};if($e.startsWith("+")){const rt=$e.match(/^(\+\d{1,3})/);if(rt)return{code:rt[1],number:$e.substring(rt[1].length).trim()}}return{code:"+63",number:$e}})(le.work_phone),me=[];le.work_phone&&me.push(`Work: ${le.work_phone}`),le.mobile_phone_1&&me.push(`Mobile 1: ${le.mobile_phone_1}`),le.mobile_phone_2&&me.push(`Mobile 2: ${le.mobile_phone_2}`);const Se=me.length>0?me.join(" | "):"";J({name:le.company_name||"",website:"",countryCode:fe.code,phone_number:fe.number,combinedPhoneNumbers:Se,billing_address:le.address||"",shipping_address:le.address||"",industry:"",status:"Prospect",territory_id:le.assigned_to?.territory?.id||null,assigned_to:le.assigned_to?.id||null,created_by:le.creator?.id||null}),be({last_name:le.last_name||"",first_name:le.first_name||"",account_id:null,title:le.title||"",department:le.department||"",email:le.email||"",work_phone:le.work_phone||"",mobile_phone_1:le.mobile_phone_1||"",mobile_phone_2:le.mobile_phone_2||"",notes:le.notes||"",assigned_to:le.assigned_to?.id||null,created_by:le.creator?.id||null}),Me({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:le.assigned_to?.id||null,created_by:le.creator?.id||null})}},[le]);const ve=P=>p(P.target.value),Ce=g.useMemo(()=>{let P=[...f];const fe=w.trim().toLowerCase();fe&&(P=P.filter(Se=>[Se?.first_name,Se?.last_name,Se?.company_name,Se?.title,Se?.email,Se?.work_phone,Se?.assigned_to?`${Se.assigned_to.first_name} ${Se.assigned_to.last_name}`:""].some(We=>We&&We.toString().toLowerCase().includes(fe))));const me=v.trim().toUpperCase();return me&&me!=="FILTER BY STATUS"?P=P.filter(Se=>(Se.status?Se.status.toUpperCase():"")===me):P=P.filter(Se=>(Se.status?Se.status.toUpperCase():"")!=="CONVERTED"),j&&P.sort((Se,$e)=>{const We=`${Se.first_name} ${Se.last_name}`,rt=`${$e.first_name} ${$e.last_name}`;return j==="asc"?We.localeCompare(rt):rt.localeCompare(We)}),P},[f,w,v,j]),D=Math.max(1,Math.ceil(Ce.length/_m)||1);g.useEffect(()=>{k(1)},[w,v]),g.useEffect(()=>{k(P=>{const fe=Math.max(1,Math.ceil(Ce.length/_m)||1);return P>fe?fe:P})},[Ce.length]);const re=g.useMemo(()=>{const P=(T-1)*_m;return Ce.slice(P,P+_m)},[Ce,T]),oe=()=>k(P=>Math.max(P-1,1)),je=()=>k(P=>Math.min(P+1,D)),Re=P=>{n(P)},Ke=()=>{n(null),s&&e("/admin/leads",{replace:!0})},et=()=>{i(!1),A(YN),B(!1),$(null),G(!1),m(null),sessionStorage.removeItem("editLeadData")},qe=P=>{P.target.id==="modalBackdrop"&&et()},Ze=()=>{A(YN),B(!1),$(null),m(null),i(!0)},we=P=>{if(!P){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",P),console.log("Current state - leadID:",s,"selectedLead:",a,"showModal:",r);const fe=rt=>{if(!rt)return{code:"+63",number:""};const wt=rt.match(/^(\+\d+)\s(.+)$/);return wt?{code:wt[1],number:wt[2]}:{code:"+63",number:rt}},me=fe(P.work_phone),Se=fe(P.mobile_phone_1),$e=fe(P.mobile_phone_2);let We="";if(P.assigned_to){We=String(P.assigned_to.id);const rt=l?.find(wt=>wt.id===P.assigned_to.id);m(rt)}A({first_name:P.first_name||"",last_name:P.last_name||"",company_name:P.company_name||"",title:P.title||"",department:P.department||"",email:P.email||"",work_ccode:me.code,work_phone:me.number,m1_ccode:Se.code,mobile_phone_1:Se.number,m2_ccode:$e.code,mobile_phone_2:$e.number,address:P.address||"",notes:P.notes||"",source:P.source||"",territory_id:P.territory?.id||null,lead_owner:We,status:P.status||"New"}),B(!0),$(P.id),a?(console.log("Coming from detail view - closing detail modal and showing edit form"),n(null),i(!0)):(console.log("Already in list view - showing modal"),i(!0))},V=P=>{if(!P){console.error("handleDelete: lead is null or undefined");return}console.log("handleDelete called with lead:",P);const fe=`${P.first_name} ${P.last_name}`||"this lead";ae({title:"Delete Lead",message:t.jsxs("span",{children:["Are you sure you want to permanently delete"," ",t.jsx("span",{className:"font-semibold",children:fe}),"? This action cannot be undone."]}),confirmLabel:"Delete Lead",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:P.id,name:fe}})},pe=P=>{const{name:fe,value:me}=P.target;if(A(Se=>({...Se,[fe]:me})),fe==="lead_owner"){const Se=l.find($e=>$e.id===parseInt(me));m(Se)}},z=P=>{if(P.preventDefault(),!E.first_name?.trim()||!E.last_name?.trim()){q.error("First name and last name are required.");return}if(!E.lead_owner){q.error("Please assign a lead owner.");return}const fe={...E,territory_id:E.territory_id?parseInt(E.territory_id):null,lead_owner:parseInt(E.lead_owner),work_phone:`${E.work_ccode} ${E.work_phone}`,mobile_phone_1:`${E.m1_ccode} ${E.mobile_phone_1}`,mobile_phone_2:`${E.m2_ccode} ${E.mobile_phone_2}`},me=U&&X?"update":"create",Se=`${E.first_name} ${E.last_name}`;ae({title:me==="create"?"Confirm New Lead":"Confirm Update",message:me==="create"?t.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",t.jsx("span",{className:"font-semibold",children:Se}),"?"]}):t.jsxs("span",{children:["Save changes to ",t.jsx("span",{className:"font-semibold",children:Se}),"?"]}),confirmLabel:me==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:me,payload:fe,targetId:X||null,name:Se}})},ie=async()=>{if(!K?.action){ae(null);return}const{action:P}=K,{type:fe,payload:me,targetId:Se,name:$e,lead:We}=P;console.log(me),Z(!0);try{if(fe==="create")G(!0),await se.post("/leads/create",me),q.success(`Lead "${$e}" created successfully.`),et(),await F();else if(fe==="update"){if(!Se)throw new Error("Missing lead identifier for update.");G(!0);const rt=await se.put(`/leads/${Se}`,me);q.success(`Lead "${$e}" updated successfully.`),a&&a.id===Se&&n(null),et(),await F()}else if(fe==="delete"){if(!Se)throw new Error("Missing lead identifier for deletion.");await se.delete(`/leads/${Se}`),q.success(`Lead "${$e}" deleted successfully.`),a?.id===Se&&n(null),await F()}}catch(rt){console.error(rt);const wt=fe==="create"?"Failed to create lead. Please review the details and try again.":fe==="update"?"Failed to update lead. Please review the details and try again.":"Failed to delete lead. Please try again.",Ut=rt.response?.data?.detail||wt;q.error(Ut)}finally{(fe==="create"||fe==="update")&&G(!1),fe!=="edit"&&(Z(!1),ae(null))}},ue=()=>{R||ae(null)},M=f.filter(P=>P.status==="New").length,xe=f.filter(P=>P.status==="Contacted").length,ne=f.filter(P=>P.status==="Qualified").length,Te=f.filter(P=>P.status==="Converted").length,Q=f.filter(P=>P.status==="Lost").length,ye=[{title:"New",value:M,icon:Cs,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:xe,icon:ft,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:ne,icon:As,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:Te,icon:qi,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:Q,icon:tr,color:"text-red-600",bgColor:"bg-red-100"}];return t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[y&&t.jsx(xt,{message:"Loading leads..."}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[t.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[t.jsx(Cs,{className:"mr-2 text-blue-600"}),"Leads"]}),t.jsxs("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:[t.jsxs("button",{onClick:()=>{q.info("Download functionality coming soon")},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[t.jsx(Xr,{className:"mr-2"})," Download"]}),t.jsxs("button",{onClick:Ze,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[t.jsx(Lt,{className:"mr-2"})," Add Lead"]})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:ye.map(P=>t.jsx(Ine,{...P},P.title))}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[t.jsx(yt,{size:20,className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search leads",value:w,onChange:ve,className:"focus:outline-none text-base w-full"})]}),t.jsx("div",{className:"w-full lg:w-1/4",children:t.jsxs("select",{value:v,onChange:P=>C(P.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[t.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),t.jsx("option",{value:"New",children:"New"}),t.jsx("option",{value:"Contacted",children:"Contacted"}),t.jsx("option",{value:"Qualified",children:"Qualified"}),t.jsx("option",{value:"Converted",children:"Converted"}),t.jsx("option",{value:"Lost",children:"Lost"})]})}),t.jsx("div",{className:"w-full lg:w-1/4",children:t.jsxs("select",{value:j,onChange:P=>_(P.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[t.jsx("option",{value:"",children:"Sort by Name"}),t.jsx("option",{value:"asc",children:"A-Z"}),t.jsx("option",{value:"desc",children:"Z-A"})]})})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[t.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4",children:"Name"}),t.jsx("th",{className:"py-3 px-4",children:"Company"}),t.jsx("th",{className:"py-3 px-4",children:"Title"}),t.jsx("th",{className:"py-3 px-4",children:"Email"}),t.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),t.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),t.jsx("tbody",{children:Ce.length>0?re.map(P=>t.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>Re(P),children:[t.jsx("td",{className:"py-3 px-4",children:t.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[P.first_name," ",P.last_name]})}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:P.company_name||"--"})}),t.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:P.title||"--"}),t.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:P.email||"--"}),t.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:P.assigned_to?`${P.assigned_to.first_name} ${P.assigned_to.last_name}`:"--"}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Mne(P.status||"New")}`,children:Dne(P.status||"New")})})]},P.id)):t.jsx("tr",{children:t.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No leads found."})})})]})}),t.jsx(Ct,{className:"mt-4",totalItems:Ce.length,pageSize:_m,currentPage:T,onPrev:oe,onNext:je,label:"leads"}),r&&t.jsx("div",{id:"modalBackdrop",onClick:qe,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:P=>P.stopPropagation(),children:[t.jsx("button",{onClick:et,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:t.jsx(jt,{size:22})}),t.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:U?"Edit Lead":"Add New Lead"}),t.jsxs("form",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),t.jsx("input",{type:"text",name:"first_name",value:E.first_name,onChange:pe,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Last Name"}),t.jsx("input",{type:"text",placeholder:"Smith",name:"last_name",value:E.last_name,onChange:pe,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Company"}),t.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:E.company_name,onChange:pe,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Title"}),t.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:E.title,onChange:pe,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),t.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:E.department,onChange:pe,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Email"}),t.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:E.email,onChange:pe,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),t.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[t.jsx("select",{name:"work_ccode",value:E.work_ccode,onChange:pe,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:WN.map(P=>t.jsx("option",{value:P.code,children:P.code},P.id))}),t.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:E.work_phone,onChange:pe,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),t.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[t.jsx("select",{name:"m1_ccode",value:E.m1_ccode,onChange:pe,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:WN.map(P=>t.jsx("option",{value:P.code,children:P.code},P.id))}),t.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:E.mobile_phone_1,onChange:pe,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),t.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[t.jsx("select",{name:"m2_ccode",value:E.m2_ccode,onChange:pe,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:WN.map(P=>t.jsx("option",{value:P.code,children:P.code},P.id))}),t.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:E.mobile_phone_2,onChange:pe,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),t.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),t.jsx("input",{type:"text",name:"address",value:E.address,onChange:pe,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Assign To"}),t.jsx($ne,{items:Array.isArray(l)?l:[],value:E.lead_owner??"",placeholder:"Search a user...",getLabel:P=>`${P.first_name} ${P.last_name}`,onChange:P=>{const fe=l.find(Se=>String(Se.id)===String(P));m(fe);let me=null;fe&&fe.assigned_territory&&fe.assigned_territory.length===1&&(me=fe.assigned_territory[0].id),A(Se=>({...Se,lead_owner:P,territory_id:me}))}})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),t.jsxs("select",{name:"territory_id",value:E.territory_id||"",onChange:pe,disabled:!d||!d.assigned_territory||d.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[t.jsx("option",{value:"",disabled:!0,children:d?d.assigned_territory&&d.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),d&&d.assigned_territory&&d.assigned_territory.map(P=>t.jsx("option",{value:P.id,children:P.name},P.id))]})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),t.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:E.source,onChange:pe,children:[t.jsx("option",{value:"",disabled:!0,children:"Select Source"}),t.jsx("option",{value:"Website",children:"Website"}),t.jsx("option",{value:"Referral",children:"Referral"}),t.jsx("option",{value:"Cold call",children:"Cold call"}),t.jsx("option",{value:"Event",children:"Event"}),t.jsx("option",{value:"Other",children:"Other"})]})]}),t.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),t.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:E.notes,onChange:pe,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[t.jsx("button",{type:"button",onClick:et,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:O||R,children:"Cancel"}),t.jsx("button",{type:"submit",onClick:z,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:O||R,children:O||R?"Processing...":U?"Update Lead":"Save Lead"})]})]})]})}),K&&t.jsx(One,{open:!0,title:K.title,message:K.message,confirmLabel:K.confirmLabel,cancelLabel:K.cancelLabel,variant:K.variant,onConfirm:ie,onCancel:ue,loading:R}),a&&!r&&!U&&t.jsx(kI,{lead:a,onBack:Ke,fetchLeads:F,setSelectedLead:n,onEdit:we,onDelete:V})]})}function One({open:e,title:s,message:a,confirmLabel:n,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:c,onCancel:d}){if(!e)return null;const m=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s}),t.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),t.jsx("button",{type:"button",onClick:c,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${m}`,disabled:l,children:l?"Processing...":n})]})]})})}function Ine({icon:e,title:s,value:a,color:n="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${s}`)};return t.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[t.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${n} mr-4`,children:e?t.jsx(e,{size:22}):null}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"text-xs text-gray-500 uppercase",children:s}),t.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function $ne({items:e=[],value:s="",onChange:a,getLabel:n,placeholder:r="Search...",disabled:i=!1,maxRender:l=200}){const[c,d]=g.useState(!1),[m,f]=g.useState(""),h=g.useRef(null),y=e.find(p=>String(p.id)===String(s)),N=y?n(y):"",w=g.useMemo(()=>{const p=m.trim().toLowerCase();return(p?e.filter(C=>(n(C)||"").toLowerCase().includes(p)):e).slice(0,l)},[e,m,n,l]);return g.useEffect(()=>{const p=v=>{h.current&&!h.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]),g.useEffect(()=>{c||f("")},[c]),t.jsxs("div",{ref:h,className:"relative w-full",children:[t.jsx("input",{disabled:i,value:c?m:N,placeholder:r,onFocus:()=>!i&&d(!0),onChange:p=>{f(p.target.value),c||d(!0)},className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),c&&!i&&t.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[t.jsx("div",{className:"max-h-56 overflow-y-auto",children:w.length>0?w.map(p=>{const v=String(p.id),C=n(p),j=String(s)===v;return t.jsx("button",{type:"button",onClick:()=>{a(v),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${j?"bg-blue-50":""}`,children:C||"--"},v)}):t.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&t.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}let Rne={data:""},Une=e=>{if(typeof window=="object"){let s=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return s.nonce=window.__nonce__,s.parentNode||(e||document.head).appendChild(s),s.firstChild}return e||Rne},zne=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Fne=/\/\*[^]*?\*\/|  +/g,ck=/\n+/g,Ll=(e,s)=>{let a="",n="",r="";for(let i in e){let l=e[i];i[0]=="@"?i[1]=="i"?a=i+" "+l+";":n+=i[1]=="f"?Ll(l,i):i+"{"+Ll(l,i[1]=="k"?"":s)+"}":typeof l=="object"?n+=Ll(l,s?s.replace(/([^,])+/g,c=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,d=>/&/.test(d)?d.replace(/&/g,c):c?c+" "+d:d)):i):l!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=Ll.p?Ll.p(i,l):i+":"+l+";")}return a+(s&&r?s+"{"+r+"}":r)+n},Ni={},DI=e=>{if(typeof e=="object"){let s="";for(let a in e)s+=a+DI(e[a]);return s}return e},Bne=(e,s,a,n,r)=>{let i=DI(e),l=Ni[i]||(Ni[i]=(d=>{let m=0,f=11;for(;m<d.length;)f=101*f+d.charCodeAt(m++)>>>0;return"go"+f})(i));if(!Ni[l]){let d=i!==e?e:(m=>{let f,h,y=[{}];for(;f=zne.exec(m.replace(Fne,""));)f[4]?y.shift():f[3]?(h=f[3].replace(ck," ").trim(),y.unshift(y[0][h]=y[0][h]||{})):y[0][f[1]]=f[2].replace(ck," ").trim();return y[0]})(e);Ni[l]=Ll(r?{["@keyframes "+l]:d}:d,a?"":"."+l)}let c=a&&Ni.g?Ni.g:null;return a&&(Ni.g=Ni[l]),((d,m,f,h)=>{h?m.data=m.data.replace(h,d):m.data.indexOf(d)===-1&&(m.data=f?d+m.data:m.data+d)})(Ni[l],s,n,c),l},Hne=(e,s,a)=>e.reduce((n,r,i)=>{let l=s[i];if(l&&l.call){let c=l(a),d=c&&c.props&&c.props.className||/^go/.test(c)&&c;l=d?"."+d:c&&typeof c=="object"?c.props?"":Ll(c,""):c===!1?"":c}return n+r+(l??"")},"");function Cy(e){let s=this||{},a=e.call?e(s.p):e;return Bne(a.unshift?a.raw?Hne(a,[].slice.call(arguments,1),s.p):a.reduce((n,r)=>Object.assign(n,r&&r.call?r(s.p):r),{}):a,Une(s.target),s.g,s.o,s.k)}let MI,DC,MC;Cy.bind({g:1});let Wi=Cy.bind({k:1});function Gne(e,s,a,n){Ll.p=s,MI=e,DC=a,MC=n}function Kl(e,s){let a=this||{};return function(){let n=arguments;function r(i,l){let c=Object.assign({},i),d=c.className||r.className;a.p=Object.assign({theme:DC&&DC()},c),a.o=/ *go\d+/.test(d),c.className=Cy.apply(a,n)+(d?" "+d:"");let m=e;return e[0]&&(m=c.as||e,delete c.as),MC&&m[0]&&MC(c),MI(m,c)}return r}}var Vne=e=>typeof e=="function",Xp=(e,s)=>Vne(e)?e(s):e,Wne=(()=>{let e=0;return()=>(++e).toString()})(),PI=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let s=matchMedia("(prefers-reduced-motion: reduce)");e=!s||s.matches}return e}})(),Yne=20,z2="default",OI=(e,s)=>{let{toastLimit:a}=e.settings;switch(s.type){case 0:return{...e,toasts:[s.toast,...e.toasts].slice(0,a)};case 1:return{...e,toasts:e.toasts.map(l=>l.id===s.toast.id?{...l,...s.toast}:l)};case 2:let{toast:n}=s;return OI(e,{type:e.toasts.find(l=>l.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=s;return{...e,toasts:e.toasts.map(l=>l.id===r||r===void 0?{...l,dismissed:!0,visible:!1}:l)};case 4:return s.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(l=>l.id!==s.toastId)};case 5:return{...e,pausedAt:s.time};case 6:let i=s.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(l=>({...l,pauseDuration:l.pauseDuration+i}))}}},pp=[],II={toasts:[],pausedAt:void 0,settings:{toastLimit:Yne}},zr={},$I=(e,s=z2)=>{zr[s]=OI(zr[s]||II,e),pp.forEach(([a,n])=>{a===s&&n(zr[s])})},RI=e=>Object.keys(zr).forEach(s=>$I(e,s)),Qne=e=>Object.keys(zr).find(s=>zr[s].toasts.some(a=>a.id===e)),Sy=(e=z2)=>s=>{$I(s,e)},qne={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Xne=(e={},s=z2)=>{let[a,n]=g.useState(zr[s]||II),r=g.useRef(zr[s]);g.useEffect(()=>(r.current!==zr[s]&&n(zr[s]),pp.push([s,n]),()=>{let l=pp.findIndex(([c])=>c===s);l>-1&&pp.splice(l,1)}),[s]);let i=a.toasts.map(l=>{var c,d,m;return{...e,...e[l.type],...l,removeDelay:l.removeDelay||((c=e[l.type])==null?void 0:c.removeDelay)||e?.removeDelay,duration:l.duration||((d=e[l.type])==null?void 0:d.duration)||e?.duration||qne[l.type],style:{...e.style,...(m=e[l.type])==null?void 0:m.style,...l.style}}});return{...a,toasts:i}},Kne=(e,s="blank",a)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:s,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...a,id:a?.id||Wne()}),Oh=e=>(s,a)=>{let n=Kne(s,e,a);return Sy(n.toasterId||Qne(n.id))({type:2,toast:n}),n.id},ta=(e,s)=>Oh("blank")(e,s);ta.error=Oh("error");ta.success=Oh("success");ta.loading=Oh("loading");ta.custom=Oh("custom");ta.dismiss=(e,s)=>{let a={type:3,toastId:e};s?Sy(s)(a):RI(a)};ta.dismissAll=e=>ta.dismiss(void 0,e);ta.remove=(e,s)=>{let a={type:4,toastId:e};s?Sy(s)(a):RI(a)};ta.removeAll=e=>ta.remove(void 0,e);ta.promise=(e,s,a)=>{let n=ta.loading(s.loading,{...a,...a?.loading});return typeof e=="function"&&(e=e()),e.then(r=>{let i=s.success?Xp(s.success,r):void 0;return i?ta.success(i,{id:n,...a,...a?.success}):ta.dismiss(n),r}).catch(r=>{let i=s.error?Xp(s.error,r):void 0;i?ta.error(i,{id:n,...a,...a?.error}):ta.dismiss(n)}),e};var Zne=1e3,Jne=(e,s="default")=>{let{toasts:a,pausedAt:n}=Xne(e,s),r=g.useRef(new Map).current,i=g.useCallback((h,y=Zne)=>{if(r.has(h))return;let N=setTimeout(()=>{r.delete(h),l({type:4,toastId:h})},y);r.set(h,N)},[]);g.useEffect(()=>{if(n)return;let h=Date.now(),y=a.map(N=>{if(N.duration===1/0)return;let w=(N.duration||0)+N.pauseDuration-(h-N.createdAt);if(w<0){N.visible&&ta.dismiss(N.id);return}return setTimeout(()=>ta.dismiss(N.id,s),w)});return()=>{y.forEach(N=>N&&clearTimeout(N))}},[a,n,s]);let l=g.useCallback(Sy(s),[s]),c=g.useCallback(()=>{l({type:5,time:Date.now()})},[l]),d=g.useCallback((h,y)=>{l({type:1,toast:{id:h,height:y}})},[l]),m=g.useCallback(()=>{n&&l({type:6,time:Date.now()})},[n,l]),f=g.useCallback((h,y)=>{let{reverseOrder:N=!1,gutter:w=8,defaultPosition:p}=y||{},v=a.filter(_=>(_.position||p)===(h.position||p)&&_.height),C=v.findIndex(_=>_.id===h.id),j=v.filter((_,T)=>T<C&&_.visible).length;return v.filter(_=>_.visible).slice(...N?[j+1]:[0,j]).reduce((_,T)=>_+(T.height||0)+w,0)},[a]);return g.useEffect(()=>{a.forEach(h=>{if(h.dismissed)i(h.id,h.removeDelay);else{let y=r.get(h.id);y&&(clearTimeout(y),r.delete(h.id))}})},[a,i]),{toasts:a,handlers:{updateHeight:d,startPause:c,endPause:m,calculateOffset:f}}},ere=Wi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,tre=Wi`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,sre=Wi`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,are=Kl("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ere} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${tre} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${sre} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,nre=Wi`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,rre=Kl("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${nre} 1s linear infinite;
`,ire=Wi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,lre=Wi`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,ore=Kl("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ire} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${lre} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,cre=Kl("div")`
  position: absolute;
`,dre=Kl("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,ure=Wi`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,mre=Kl("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${ure} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,fre=({toast:e})=>{let{icon:s,type:a,iconTheme:n}=e;return s!==void 0?typeof s=="string"?g.createElement(mre,null,s):s:a==="blank"?null:g.createElement(dre,null,g.createElement(rre,{...n}),a!=="loading"&&g.createElement(cre,null,a==="error"?g.createElement(are,{...n}):g.createElement(ore,{...n})))},hre=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,gre=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,xre="0%{opacity:0;} 100%{opacity:1;}",pre="0%{opacity:1;} 100%{opacity:0;}",yre=Kl("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,bre=Kl("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,vre=(e,s)=>{let a=e.includes("top")?1:-1,[n,r]=PI()?[xre,pre]:[hre(a),gre(a)];return{animation:s?`${Wi(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Wi(r)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Nre=g.memo(({toast:e,position:s,style:a,children:n})=>{let r=e.height?vre(e.position||s||"top-center",e.visible):{opacity:0},i=g.createElement(fre,{toast:e}),l=g.createElement(bre,{...e.ariaProps},Xp(e.message,e));return g.createElement(yre,{className:e.className,style:{...r,...a,...e.style}},typeof n=="function"?n({icon:i,message:l}):g.createElement(g.Fragment,null,i,l))});Gne(g.createElement);var wre=({id:e,className:s,style:a,onHeightUpdate:n,children:r})=>{let i=g.useCallback(l=>{if(l){let c=()=>{let d=l.getBoundingClientRect().height;n(e,d)};c(),new MutationObserver(c).observe(l,{subtree:!0,childList:!0,characterData:!0})}},[e,n]);return g.createElement("div",{ref:i,className:s,style:a},r)},jre=(e,s)=>{let a=e.includes("top"),n=a?{top:0}:{bottom:0},r=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:PI()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${s*(a?1:-1)}px)`,...n,...r}},Cre=Cy`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,bx=16,Ih=({reverseOrder:e,position:s="top-center",toastOptions:a,gutter:n,children:r,toasterId:i,containerStyle:l,containerClassName:c})=>{let{toasts:d,handlers:m}=Jne(a,i);return g.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:bx,left:bx,right:bx,bottom:bx,pointerEvents:"none",...l},className:c,onMouseEnter:m.startPause,onMouseLeave:m.endPause},d.map(f=>{let h=f.position||s,y=m.calculateOffset(f,{reverseOrder:e,gutter:n,defaultPosition:s}),N=jre(h,y);return g.createElement(wre,{id:f.id,key:f.id,onHeightUpdate:m.updateHeight,className:f.visible?Cre:"",style:N},f.type==="custom"?Xp(f.message,f):r?r(f):g.createElement(Nre,{toast:f,position:h}))}))},$h=ta;const bo=10;function Sre(){g.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,s]=g.useState(null),[a,n]=g.useState(""),[r,i]=g.useState("Filter by Actions"),[l,c]=g.useState(1),d=async()=>{try{const v=await se.get("/logs/read-all");s(v.data)}catch(v){console.error("Error fetching audit logs:",v)}};g.useEffect(()=>{d()},[]);const m=g.useMemo(()=>{if(!Array.isArray(e))return[];const v=a.trim().toLowerCase(),C=r?.toUpperCase?.()||"ALL";return e.filter(_=>{const T=_.timestamp?new Date(_.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",k=`${_.entity_type||""} ${_.entity_name||_.entity_details?.name||_.entity_details?.title||_.entity_id||""}`,E=`${_.logger?.first_name||""} ${_.logger?.last_name||""}`,A=[T,E,_.action,_.entity_type,k,_.description],U=v===""||A.some(X=>X==null?!1:X.toString().toLowerCase().includes(v)),B=C==="FILTER BY ACTIONS"||(_.action||"").toUpperCase()===C;return U&&B}).sort((_,T)=>{const k=_.timestamp?new Date(_.timestamp).getTime():0;return(T.timestamp?new Date(T.timestamp).getTime():0)-k})},[e,a,r]),f=Math.max(1,Math.ceil(m.length/bo)||1);g.useEffect(()=>{c(1)},[a,r]),g.useEffect(()=>{c(v=>{const C=Math.max(1,Math.ceil(m.length/bo)||1);return v>C?C:v})},[m.length]);const h=g.useMemo(()=>{const v=(l-1)*bo;return m.slice(v,v+bo)},[m,l]);m.length===0||(l-1)*bo+1,Math.min(l*bo,m.length);const y=()=>c(v=>Math.max(v-1,1)),N=()=>c(v=>Math.min(v+1,f)),w=()=>{if(!m.length){$h.error("No logs to export!");return}const v=["Timestamp","User","Action","Resource","Details"],C=m.map(E=>[new Date(E.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${E.logger?.first_name||""} ${E.logger?.last_name||""}`.trim(),E.action,`${E.entity_type}: ${E.entity_id}`,E.description||""]),j=[v.join(","),...C.map(E=>E.map(A=>`"${String(A).replace(/"/g,'""')}"`).join(","))].join(`
`),_=new Blob([j],{type:"text/csv;charset=utf-8;"}),T=URL.createObjectURL(_),k=document.createElement("a");k.href=T,k.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(k),k.click(),document.body.removeChild(k),URL.revokeObjectURL(T)},p=v=>{switch((v||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&t.jsx(xt,{message:"Loading audit logs..."}),t.jsx(Ih,{toastOptions:{duration:1e3}}),t.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[t.jsx(dt,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),t.jsxs("p",{className:"text-sm text-blue-700",children:[t.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Ta,{className:"text-blue-600",size:20}),t.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),t.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:t.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:w,children:[t.jsx(Xr,{className:"mr-2"}),"Export Logs"]})})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[t.jsx(yt,{size:20,className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search audit logs",value:a,onChange:v=>n(v.target.value),className:"focus:outline-none text-base w-full"})]}),t.jsx("div",{className:"w-full lg:w-1/4",children:t.jsxs("select",{value:r,onChange:v=>i(v.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[t.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),t.jsx("option",{value:"CREATE",children:"CREATE"}),t.jsx("option",{value:"DELETE",children:"DELETE"}),t.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[t.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),t.jsx("th",{className:"py-3 px-4",children:"User"}),t.jsx("th",{className:"py-3 px-4",children:"Action"}),t.jsx("th",{className:"py-3 px-4",children:"Resource"}),t.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),t.jsx("tbody",{children:Array.isArray(m)&&m.length>0?h.map((v,C)=>t.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[t.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(v.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),t.jsx("td",{className:"py-3 px-4 text-gray-700",children:v.name}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${p(v.action)}`,children:v.action})}),t.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[v.entity_type,": ",v.entity_id]}),t.jsx("td",{className:"py-3 px-4 text-gray-700",children:v.description})]},C)):t.jsx("tr",{children:t.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),t.jsx(Ct,{className:"mt-4",totalItems:m.length,pageSize:bo,currentPage:l,onPrev:y,onNext:N,label:"logs"})]})}const vx=10,dk={user_id:"",start_date:"",end_date:"",target_amount:""};function _re({name:e,items:s=[],value:a="",onChange:n,getLabel:r,placeholder:i="Search..."}){const[l,c]=g.useState(!1),[d,m]=g.useState(""),f=g.useRef(null),h=s.find(w=>String(w.id)===String(a)),y=h?r(h):"",N=g.useMemo(()=>{const w=d.toLowerCase();return w?s.filter(p=>r(p).toLowerCase().includes(w)):s},[s,d,r]);return g.useEffect(()=>{const w=p=>{f.current&&!f.current.contains(p.target)&&c(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),t.jsxs("div",{ref:f,className:"flex justify-center w-full",children:[t.jsx("input",{value:l?d:y,placeholder:i,onFocus:()=>c(!0),onChange:w=>{m(w.target.value),c(!0)},className:"w-full max-w-md border text-gray-500 border-gray-300 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"}),l&&t.jsx("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:N.length?N.map(w=>t.jsx("button",{type:"button",onClick:()=>{n({target:{name:e,value:String(w.id)}}),c(!1),m("")},className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-50",children:r(w)},w.id)):t.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results found"})})]})}function Tre(){g.useEffect(()=>{document.title="Targets | Sari-Sari CRM"},[]);const[e,s]=g.useState([]),[a,n]=g.useState([]),[r,i]=g.useState(!1),[l,c]=g.useState(""),[d,m]=g.useState(1),[f,h]=g.useState(!1),[y,N]=g.useState(!1),[w,p]=g.useState(!1),[v,C]=g.useState(null),[j,_]=g.useState(dk),[T,k]=g.useState(null),[E,A]=g.useState(null),[U,B]=g.useState(!1),X=g.useCallback(async()=>{i(!0);try{const W=await se.get("/targets/admin/fetch-all");s(W.data)}catch(W){console.error(W),q.error("Failed to load targets.")}finally{i(!1)}},[]),$=g.useCallback(async()=>{try{const W=await se.get("/targets/admin/get-users");n(W.data)}catch(W){console.error(W),q.error("Failed to load users.")}},[]);g.useEffect(()=>{X(),$()},[X,$]);const O=g.useMemo(()=>e.reduce((W,ee)=>W+(Number(ee.target_amount)||0),0),[e]),G=g.useMemo(()=>{const W=l.toLowerCase();return e.filter(ee=>(ee.user?`${ee.user.first_name} ${ee.user.last_name}`.toLowerCase():"").includes(W)||ee.start_date?.includes(W)||ee.end_date?.includes(W))},[e,l]),K=Math.max(1,Math.ceil(G.length/vx)),ae=g.useMemo(()=>{const W=(d-1)*vx;return G.slice(W,W+vx)},[G,d]),R=W=>{const{name:ee,value:J}=W.target;_(he=>({...he,[ee]:J}))},Z=()=>{_(dk),N(!1),C(null),h(!0)},te=W=>{_({user_id:W.user?.id?String(W.user.id):"",start_date:W.start_date||"",end_date:W.end_date||"",target_amount:W.target_amount?.toString()||""}),N(!0),C(W.id),h(!0),k(null)},ge=W=>{const ee=W.user?`${W.user.first_name} ${W.user.last_name}`:"Unknown";A({title:"Delete Target",message:t.jsxs("span",{children:["Are you sure you want to delete the target for"," ",t.jsx("span",{className:"font-semibold",children:ee}),"?"]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:async()=>{await se.delete(`/targets/admin/${W.id}`),q.success("Target deleted successfully."),X(),k(null)}})},le=W=>{if(W.preventDefault(),!j.user_id||!j.start_date||!j.end_date||!j.target_amount){q.error("All fields are required.");return}if(new Date(j.end_date)<new Date(j.start_date)){q.error("End date must be after start date.");return}const ee={user_id:Number(j.user_id),target_amount:Number(j.target_amount),start_date:j.start_date,end_date:j.end_date},J=y?"Update Target":"Create Target";A({title:J,message:"Are you sure you want to proceed?",confirmLabel:J,cancelLabel:"Cancel",variant:"primary",action:async()=>{p(!0);try{y?(await se.put(`/targets/admin/${v}`,ee),q.success("Target updated successfully.")):(await se.post("/targets/admin/create",ee),q.success("Target created successfully.")),h(!1),X()}catch(he){console.error(he),q.error("Operation failed.")}finally{p(!1)}}})};return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&t.jsx(xt,{message:"Loading targets..."}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[t.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold",children:[t.jsx(sn,{className:"mr-2 text-blue-600"})," Targets"]}),t.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:t.jsxs("button",{onClick:Z,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[t.jsx(Lt,{className:"mr-2"})," Add Target"]})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-6",children:[t.jsx(uk,{title:"Total Targets",value:e.length}),t.jsx(uk,{title:"Total Target Amount",value:`${O.toLocaleString()}`})]}),t.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-4/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[t.jsx(yt,{className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search targets",value:l,onChange:W=>c(W.target.value),className:"w-full outline-none"})]})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[t.jsx("thead",{className:"bg-gray-100 font-semibold text-gray-600",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4 text-left",children:"User"}),t.jsx("th",{className:"py-3 px-4 text-left",children:"Target Amount"}),t.jsx("th",{className:"py-3 px-4 text-left",children:"Start Date"}),t.jsx("th",{className:"py-3 px-4 text-left",children:"End Date"})]})}),t.jsx("tbody",{children:ae.map(W=>t.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>k(W),children:[t.jsx("td",{className:"py-3 px-4 text-left",children:W.user?`${W.user.first_name} ${W.user.last_name}`:"Unknown"}),t.jsxs("td",{className:"py-3 px-4 text-left",children:["",Number(W.target_amount).toLocaleString()]}),t.jsx("td",{className:"py-3 px-4 text-left",children:W.start_date}),t.jsx("td",{className:"py-3 px-4 text-left",children:W.end_date})]},W.id))})]})}),t.jsx(Ct,{className:"mt-4",totalItems:G.length,pageSize:vx,currentPage:d,onPrev:()=>m(W=>Math.max(W-1,1)),onNext:()=>m(W=>Math.min(W+1,K)),label:"targets"})]}),T&&t.jsx(Ere,{target:T,onClose:()=>k(null),onEdit:()=>te(T),onDelete:()=>ge(T)}),f&&t.jsx(Are,{formData:j,users:a,isEditing:y,isSubmitting:w,onChange:R,onClose:()=>h(!1),onSubmit:le}),E&&t.jsx(Lre,{...E,loading:U,onConfirm:async()=>{B(!0),await E.action(),B(!1),A(null)},onCancel:()=>A(null)})]})}function uk({title:e,value:s}){return t.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200",children:[t.jsx("div",{className:"p-3 rounded-full bg-blue-100 text-blue-600 mr-4",children:t.jsx(vr,{size:22})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500 uppercase",children:e}),t.jsx("p",{className:"text-2xl font-bold",children:s})]})]})}function Ere({target:e,onClose:s,onEdit:a,onDelete:n}){return t.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",onClick:s,children:t.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:r=>r.stopPropagation(),children:[t.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-4 rounded-t-xl",children:[t.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Target"}),t.jsx("button",{onClick:s,className:"text-gray-500 hover:text-white transition cursor-pointer",children:t.jsx(es,{size:25})})]}),t.jsx("div",{className:"p-6 lg:p-4",children:t.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[t.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:t.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:e.user&&`${e.user.first_name} ${e.user.last_name}`})}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[t.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 cursor-pointer",onClick:a,children:[t.jsx(ys,{className:"mr-2"}),"Edit"]}),t.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400 cursor-pointer",onClick:n,children:[t.jsx(Nt,{className:"mr-2"}),"Delete"]})]})]})}),t.jsx("div",{className:"border-b border-gray-200 my-5"}),t.jsxs("div",{className:"p-4 lg:p-6",children:[t.jsx("div",{className:"flex w-full bg-[#6A727D] text-white overflow-x-auto",children:t.jsx("button",{className:"flex-1 min-w-[90px] px-4 py-2 lg:text-lg text-sm font-medium text-center text-white",children:"Overview"})}),t.jsx("div",{className:"bg-white rounded-xl shadow-sm sm:p-6 lg:p-5 border border-gray-200 text-sm text-gray-700",children:t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-2 gap-4 sm:gap-6",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"User:"}),t.jsx("p",{children:e.user?`${e.user.first_name} ${e.user.last_name}`:"Unknown"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Target Amount:"}),t.jsxs("p",{children:["",Number(e.target_amount).toLocaleString()]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Start Date:"}),t.jsx("p",{children:e.start_date})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"End Date:"}),t.jsx("p",{children:e.end_date})]})]})})]})]})})}function Are({formData:e,users:s,isEditing:a,isSubmitting:n,onChange:r,onClose:i,onSubmit:l}){return t.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl p-8 relative min-h-[50vh]",children:[t.jsx("button",{onClick:i,className:"absolute top-5 right-5",children:t.jsx(jt,{size:24})}),t.jsx("h2",{className:"text-2xl font-semibold text-center mb-8",children:a?"Edit Target":"Add New Target"}),t.jsxs("form",{onSubmit:l,className:"grid gap-5 text-base",children:[t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Assign User"}),t.jsx(_re,{name:"user_id",items:s,value:e.user_id,onChange:r,getLabel:c=>`${c.first_name} ${c.last_name}`,placeholder:"Search user..."})]}),t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:"Target Amount"}),t.jsx("div",{className:"flex justify-center w-full",children:t.jsx("input",{type:"number",name:"target_amount",placeholder:"0.00",value:e.target_amount,onChange:r,required:!0,className:"w-full max-w-md border text-gray-500 border-gray-300 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"})})]}),t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:"Start Date"}),t.jsx("div",{className:"flex justify-center w-full",children:t.jsx("input",{type:"date",name:"start_date",value:e.start_date,onChange:r,required:!0,className:"w-full max-w-md border text-gray-500 border-gray-300 text-gray-500 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"})})]}),t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:"End Date"}),t.jsx("div",{className:"flex justify-center w-full",children:t.jsx("input",{type:"date",name:"end_date",value:e.end_date,onChange:r,required:!0,className:"w-full max-w-md border text-gray-500 border-gray-300 text-gray-500 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"})})]}),t.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[t.jsx("button",{type:"button",onClick:i,className:"bg-red-400 text-white px-5 py-2 rounded-lg",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:n,className:"bg-tertiary text-white px-5 py-2 rounded-lg",children:n?"Saving...":"Save Target"})]})]})]})})}function Lre({title:e,message:s,confirmLabel:a,cancelLabel:n,variant:r,loading:i,onConfirm:l,onCancel:c}){return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:e}),t.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:s}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsx("button",{onClick:c,disabled:i,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:n}),t.jsx("button",{onClick:l,disabled:i,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${r==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary"}`,children:i?"Processing...":a})]})]})})}const Tm=10,QN=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],qN={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:""},dr=e=>{if(!e)return"Draft";const s=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[s]||"Draft"},XN=e=>e?e.toString().toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()):"--",kre=e=>{switch(dr(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},Dre=e=>{switch(dr(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},Nx=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",Em=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",Mre=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const s=new Date(e);if(isNaN(s.getTime()))return"";const a=s.getFullYear(),n=String(s.getMonth()+1).padStart(2,"0"),r=String(s.getDate()).padStart(2,"0");return`${a}-${n}-${r}`}catch{return""}},KN=(e,s)=>{if(!e||s==null||s==="")return"";const a=Number(s);if(Number.isNaN(a))return"";const n=new Date(e);return isNaN(n.getTime())?"":(n.setDate(n.getDate()+a),n.toISOString().slice(0,10))},Kp=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},Pre=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const n of e){const r=localStorage.getItem(n);if(r)try{const i=JSON.parse(r),l=Kp(i);if(l)return l}catch{}}const s=localStorage.getItem("user_id"),a=Kp(s);return a||null},Ore=e=>{if(!e)return"";const a=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(n=>n!=null&&String(n).trim()!=="");return a?String(a):""},Ire=e=>{if(!e)return"";const a=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(n=>n!=null&&String(n).trim()!=="");return a?String(a):""};function $re(){const e=it();g.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[s,a]=g.useState([]),[n,r]=g.useState(!1),[i,l]=g.useState([]),[c,d]=g.useState([]),[m,f]=g.useState([]),[h,y]=g.useState([]),[N,w]=g.useState(null),[p,v]=g.useState(null),[C,j]=g.useState(!1),[_,T]=g.useState(!1),[k,E]=g.useState(!1),[A,U]=g.useState(null),[B,X]=g.useState(!1),[$,O]=g.useState(null),[G,K]=g.useState(qN),[ae,R]=g.useState(""),[Z,te]=g.useState("Filter by Status"),[ge,le]=g.useState(null),[W,ee]=g.useState(1),[J,he]=g.useState("Overview"),[be,Le]=g.useState("Draft");g.useEffect(()=>{let I=!0;return(async()=>{const H=Pre();if(H&&I){w(H);return}try{const de=await se.get("/auth/me"),_e=Kp(de?.data);if(_e&&I){w(_e);return}}catch{}try{const de=await se.get("/users/me"),_e=Kp(de?.data);if(_e&&I){w(_e);return}}catch{}I&&w(null)})(),()=>{I=!1}},[]);const Me=g.useCallback(I=>I&&c.find(H=>String(H.id)===String(I))?.name||"",[c]),ke=g.useCallback(I=>{if(!I)return"";const Ne=m.find(H=>String(H.id)===String(I));return Ne?`${Ne.first_name} ${Ne.last_name}`.trim():""},[m]),F=g.useCallback(I=>{if(!I)return"--";const Ne=i.find(H=>String(H.id)===String(I));return Ne?.deal_name||Ne?.name||`Deal #${I}`},[i]),ve=g.useCallback(I=>{const Ne=i.find(_e=>String(_e.id)===String(I)),H=Ore(Ne);let de=Ire(Ne);if(!de&&H){const _e=m.filter(Ae=>String(Ae.account_id||"")===String(H));if(_e.length>0){const Ae=[..._e].sort((He,st)=>{const bt=`${He.first_name||""} ${He.last_name||""}`.trim().toLowerCase(),ss=`${st.first_name||""} ${st.last_name||""}`.trim().toLowerCase();return bt.localeCompare(ss)});de=String(Ae[0].id)}}if(H&&de){const _e=m.find(Ae=>String(Ae.id)===String(de));_e?.account_id&&String(_e.account_id)!==String(H)&&(de="")}return{accountId:H||"",contactId:de||""}},[i,m]),Ce=g.useCallback(I=>{if(!I)return"--";if(I.deal?.deal_name)return I.deal.deal_name;if(I.deal?.name)return I.deal.name;const Ne=I.deal_id||I.deal?.id;return Ne?F(Ne):"--"},[F]),D=g.useCallback(I=>{if(!I)return"--";if(I.account?.name)return I.account.name;let Ne=I.account_id||I.account?.id;if(!Ne){const H=I.deal_id||I.deal?.id;H&&(Ne=ve(H).accountId)}return Ne?Me(Ne)||`Account #${Ne}`:"--"},[ve,Me]),re=g.useCallback(I=>{if(!I)return"--";if(I.contact?.first_name||I.contact?.last_name)return`${I.contact?.first_name||""} ${I.contact?.last_name||""}`.trim()||"--";let Ne=I.contact_id||I.contact?.id;if(!Ne){const de=I.deal_id||I.deal?.id;de&&(Ne=ve(de).contactId)}return(Ne?ke(Ne):"")||(Ne?`Contact #${Ne}`:"--")},[ve,ke]),oe=g.useCallback(async(I=null)=>{r(!0);try{const Ne=await se.get("/quotes/admin/fetch-all"),de=[...Array.isArray(Ne.data)?Ne.data:[]].sort((_e,Ae)=>{const He=_e?.created_at||_e?.updated_at||0,st=Ae?.created_at||Ae?.updated_at||0;return new Date(st)-new Date(He)});if(a(de),I){const _e=de.find(Ae=>Ae.id===I);v(_e||null)}}catch(Ne){console.error(Ne),a([]),Ne.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch quotes. Please try again later.")}finally{r(!1)}},[]),je=g.useCallback(async()=>{try{const I=await se.get("/deals/admin/fetch-all");l(Array.isArray(I.data)?I.data:[])}catch(I){console.error(I),I.response?.status===403&&q.warn("Unable to load deals (permission denied).")}},[]),Re=g.useCallback(async()=>{try{const I=await se.get("/accounts/admin/fetch-all");d(Array.isArray(I.data)?I.data:[])}catch(I){console.error(I),I.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},[]),Ke=g.useCallback(async()=>{try{const I=await se.get("/contacts/admin/fetch-all");f(Array.isArray(I.data)?I.data:[])}catch(I){console.error(I),I.response?.status===403&&q.warn("Unable to load contacts (permission denied).")}},[]),et=g.useCallback(async()=>{try{const I=await se.get("/users/all");y(Array.isArray(I.data)?I.data:[])}catch(I){console.error(I),I.response?.status===403&&q.warn("Unable to load users (permission denied).")}},[]);g.useEffect(()=>{oe(),je(),Re(),Ke(),et()},[oe,je,Re,Ke,et]);const qe=g.useMemo(()=>{const I=ae.trim().toLowerCase(),Ne=Z.trim();return s.filter(H=>{const de=Ce(H),_e=D(H),Ae=re(H),He=KN(H.presented_date,H.validity_days),st=[H.quote_id,de,_e,Ae,H.total_amount?.toString(),H.validity_days?.toString(),H.presented_date?Em(H.presented_date):"",He?Em(He):"",H.assigned_user?.first_name,H.assigned_user?.last_name,H.creator?.first_name,H.creator?.last_name,H.status,H.notes,Nx(H.created_at),Nx(H.updated_at)],bt=I===""||st.some(cs=>cs==null?!1:cs.toString().toLowerCase().includes(I)),ss=Ne==="Filter by Status"||dr(H.status)===Ne;return bt&&ss})},[s,ae,Z,Ce,D,re]),Ze=Math.max(1,Math.ceil(qe.length/Tm)||1);g.useEffect(()=>ee(1),[ae,Z]),g.useEffect(()=>{ee(I=>{const Ne=Math.max(1,Math.ceil(qe.length/Tm)||1);return I>Ne?Ne:I})},[qe.length]);const we=g.useMemo(()=>{const I=(W-1)*Tm;return qe.slice(I,I+Tm)},[qe,W]),V=()=>ee(I=>Math.max(I-1,1)),pe=()=>ee(I=>Math.min(I+1,Ze)),z=I=>{v(I),he("Overview"),Le(dr(I?.status)||"Draft")},ie=()=>{v(null),he("Overview")},ue=I=>{I.target.id==="quoteModalBackdrop"&&!B&&ie()},M=g.useCallback(()=>{j(!1),T(!1),O(null),K(qN),E(!1)},[]),xe=I=>{I.target.id==="modalBackdrop"&&!k&&!B&&M()},ne=I=>{const{name:Ne,value:H}=I.target;if(Ne==="deal_id"){const{accountId:de,contactId:_e}=ve(H);K(Ae=>({...Ae,deal_id:H,account_id:de,contact_id:_e}));return}K(de=>({...de,[Ne]:H}))},Te=()=>{K(qN),T(!1),O(null),j(!0)},Q=I=>{if(!I)return;v(null);const Ne=I.deal?.id?String(I.deal.id):I.deal_id?String(I.deal_id):"",H=Ne?ve(Ne):{accountId:"",contactId:""},de=I.account?.id?String(I.account.id):I.account_id?String(I.account_id):H.accountId,_e=I.contact?.id?String(I.contact.id):I.contact_id?String(I.contact_id):H.contactId,Ae=I.assigned_user?.id?String(I.assigned_user.id):I.assigned_to?String(I.assigned_to):"";K({deal_id:Ne,account_id:de||"",contact_id:_e||"",total_amount:I.total_amount?.toString()||"",presented_date:Mre(I.presented_date),validity_days:I.validity_days!==null&&I.validity_days!==void 0?String(I.validity_days):"",status:dr(I.status)||"Draft",assigned_to:Ae,notes:I.notes||""}),T(!0),O(I.id),j(!0)},ye=I=>{if(!I)return;const Ne=I.quote_id||"this quote";U({title:"Delete Quote",message:t.jsxs("span",{children:["Are you sure you want to permanently delete"," ",t.jsx("span",{className:"font-semibold",children:Ne}),"? This action cannot be undone."]}),confirmLabel:"Delete Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:I.id,name:Ne}})},P=I=>{if(I.preventDefault(),!N){q.error("Unable to determine current user. Please log in again.");return}if(!G.deal_id){q.error("Deal is required.");return}if(!G.total_amount||Number(G.total_amount)<=0){q.error("Total amount must be greater than 0.");return}if(G.validity_days!==""&&Number(G.validity_days)<0){q.error("Validity days must be 0 or higher.");return}const Ne=ve(G.deal_id),H={deal_id:Number(G.deal_id),account_id:Ne.accountId?Number(Ne.accountId):null,contact_id:Ne.contactId?Number(Ne.contactId):null,total_amount:Number(G.total_amount),presented_date:G.presented_date||null,validity_days:G.validity_days===""?null:Number(G.validity_days),status:G.status||"Draft",assigned_to:G.assigned_to?Number(G.assigned_to):null,notes:G.notes?.trim()||null},de=_&&$?"update":"create",_e=F(G.deal_id),Ae=de==="create"?{...H,created_by_id:Number(N)}:H;U({title:de==="create"?"Confirm New Quote":"Confirm Update",message:de==="create"?t.jsxs("span",{children:["Are you sure you want to create a quote for"," ",t.jsx("span",{className:"font-semibold",children:_e}),"?"]}):t.jsxs("span",{children:["Save changes to"," ",t.jsx("span",{className:"font-semibold",children:_e}),"?"]}),confirmLabel:de==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:de,payload:Ae,targetId:$||null,name:_e}})},fe=async()=>{if(!A?.action){U(null);return}const{action:I}=A,{type:Ne,payload:H,targetId:de,name:_e}=I;X(!0);try{if(Ne==="create")E(!0),await se.post("/quotes/admin",H),q.success("Quote created successfully."),M(),await oe();else if(Ne==="update"){if(!de)throw new Error("Missing quote identifier for update.");E(!0),await se.put(`/quotes/admin/${de}`,H),q.success("Quote updated successfully."),M(),await oe(),p?.id===de&&v(null)}else if(Ne==="delete"){if(!de)throw new Error("Missing quote identifier for deletion.");const Ae=p?.id;le(de),await se.delete(`/quotes/admin/${de}`),q.success(`Quote "${_e}" deleted successfully.`),await oe(Ae&&Ae!==de?Ae:null),Ae===de&&v(null)}}catch(Ae){console.error(Ae);const He=Ne==="create"?"Failed to create quote. Please review the details and try again.":Ne==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";q.error(He),(Ne==="create"||Ne==="update")&&E(!1),Ne==="delete"&&le(null)}finally{(Ne==="create"||Ne==="update")&&E(!1),Ne==="delete"&&le(null),X(!1),U(null)}},me=()=>{B||U(null)},Se=g.useCallback((I,Ne)=>{const H=I?.deal_id??I?.deal?.id??"",de=H?Number(H):null,_e=de?ve(String(de)):{accountId:"",contactId:""},Ae=I?.account_id??I?.account?.id??_e.accountId??null,He=I?.contact_id??I?.contact?.id??_e.contactId??null,st=I?.total_amount??0,bt=I?.assigned_to??I?.assigned_user?.id??null;return{deal_id:de,account_id:Ae!=null&&String(Ae).trim()!==""?Number(Ae):null,contact_id:He!=null&&String(He).trim()!==""?Number(He):null,total_amount:Number(st),presented_date:I?.presented_date||null,validity_days:I?.validity_days===""||I?.validity_days===void 0||I?.validity_days===null?null:Number(I.validity_days),status:Ne,assigned_to:bt!=null&&String(bt).trim()!==""?Number(bt):null,notes:I?.notes?.trim()||null}},[ve]),$e=g.useCallback(async()=>{if(!p?.id)return;const I=dr(be),Ne=[I,I.toLowerCase()],H=async de=>se.patch(`/quotes/admin/${p.id}/status`,{status:de},{headers:{"Content-Type":"application/json"}});try{let de=!1;for(const _e of Ne)try{await H(_e),de=!0;break}catch(Ae){if(Ae?.response?.status===422)continue;throw Ae}if(!de){const _e=Se(p,I);if(!_e.deal_id){q.error("Cannot update status: missing deal_id on selected quote.");return}if(!_e.total_amount||_e.total_amount<=0){q.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await se.put(`/quotes/admin/${p.id}`,_e)}q.success(`Quote status updated to ${I}`),v(null),he("Overview"),await oe()}catch(de){console.error(de);const _e=de?.response?.data?.message||(de?.response?.data?.errors?Object.values(de.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";q.error(_e)}},[p,be,oe,Se]),We=[{label:"Filter by Status",value:"Filter by Status"},...QN.map(I=>({label:I.label,value:I.value}))],rt=A?.action?.type==="delete"?A.action.targetId:null,wt=p&&(ge===p.id||rt===p.id),Ut=p&&ge===p.id,ze=p?t.jsx("div",{id:"quoteModalBackdrop",onClick:ue,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:I=>I.stopPropagation(),children:[t.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:t.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[t.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),t.jsx("button",{onClick:ie,className:"text-gray-500 hover:text-white transition cursor-pointer",children:t.jsx(es,{size:25})})]})}),t.jsxs("div",{className:"p-6 lg:p-4",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[t.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:Ce(p)}),t.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${Dre(p.status)}`,children:XN(p.status)})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Q(p),disabled:B||A?.action?.type==="update"&&A.action.targetId===p.id,children:[t.jsx(ys,{className:"mr-2"}),"Edit"]}),t.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>ye(p),disabled:!!wt,children:Ut?"Deleting...":t.jsxs(t.Fragment,{children:[t.jsx(Nt,{className:"mr-2"}),"Delete"]})})]})]}),t.jsx("div",{className:"border-b border-gray-200 my-5"}),t.jsxs("div",{className:"p-1 lg:p-4",children:[t.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(I=>t.jsx("button",{onClick:()=>he(I),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${J===I?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:I},I))}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[t.jsxs("div",{className:"lg:col-span-3",children:[J==="Overview"&&t.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Quote ID:"}),t.jsx("p",{children:p.quote_id||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Deal:"}),t.jsx("p",{children:Ce(p)||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Account:"}),t.jsx("p",{children:D(p)||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Contact:"}),t.jsx("p",{children:re(p)||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Total Amount:"}),t.jsx("p",{children:p.total_amount?`${Number(p.total_amount).toLocaleString()}`:"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Presented Date:"}),t.jsx("p",{children:Em(p.presented_date)||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Validity Days:"}),t.jsx("p",{children:p.validity_days!==null&&p.validity_days!==void 0?p.validity_days:"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),t.jsx("p",{children:Em(KN(p.presented_date,p.validity_days))||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Status:"}),t.jsx("p",{children:XN(p.status)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Assigned To:"}),t.jsx("p",{children:p.assigned_user?`${p.assigned_user.first_name} ${p.assigned_user.last_name}`:"Unassigned"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Created By:"}),t.jsx("p",{children:p.creator?`${p.creator.first_name} ${p.creator.last_name}`:"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Created At:"}),t.jsx("p",{children:Nx(p.created_at)||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Last Updated:"}),t.jsx("p",{children:Nx(p.updated_at)||"N/A"})]})]})}),J==="Notes"&&t.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[t.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),t.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:p.notes||"No notes available."})]})]}),t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),t.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[t.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),t.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Quotes"}}}),children:[t.jsx(dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),t.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ts,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),t.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:be||dr(p.status)||"Draft",onChange:I=>Le(I.target.value),children:QN.map(I=>t.jsx("option",{value:I.value,children:I.label},I.value))}),t.jsx("button",{onClick:$e,disabled:dr(be)===dr(p.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${dr(be)===dr(p.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,Pe=t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[n&&t.jsx(xt,{message:"Loading quotes..."}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[t.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[t.jsx(en,{className:"mr-2 text-blue-600"})," Quotes"]}),t.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:t.jsxs("button",{onClick:Te,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[t.jsx(Lt,{className:"mr-2"})," Add Quote"]})})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[t.jsx(yt,{size:20,className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search quotes",value:ae,onChange:I=>R(I.target.value),className:"focus:outline-none text-base w-full"})]}),t.jsx("div",{className:"w-full lg:w-1/4",children:t.jsx("select",{value:Z,onChange:I=>te(I.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:We.map(I=>t.jsx("option",{value:I.value,children:I.label},I.value))})})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[t.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),t.jsx("th",{className:"py-3 px-4",children:"Deal"}),t.jsx("th",{className:"py-3 px-4",children:"Account"}),t.jsx("th",{className:"py-3 px-4",children:"Contact"}),t.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),t.jsx("th",{className:"py-3 px-4",children:"Status"}),t.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),t.jsx("th",{className:"py-3 px-4",children:"Expiry Date"})]})}),t.jsx("tbody",{children:n?t.jsx("tr",{children:t.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"Loading quotes..."})}):qe.length>0?we.map(I=>{const Ne=KN(I.presented_date,I.validity_days);return t.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>z(I),children:[t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:I.quote_id||"--"})}),t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsx("div",{className:"break-words",children:Ce(I)||"--"})}),t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsx("div",{className:"text-sm text-gray-700 break-words",children:D(I)||"--"})}),t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsx("div",{className:"break-words",children:re(I)||"--"})}),t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsx("div",{className:"text-gray-700",children:I.total_amount?`${Number(I.total_amount).toLocaleString()}`:"--"})}),t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${kre(I.status)}`,children:XN(I.status)})}),t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsx("div",{children:I.assigned_user?`${I.assigned_user.first_name} ${I.assigned_user.last_name}`:"Unassigned"})}),t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsx("div",{className:"text-gray-500 text-xs",children:Em(Ne)||"--"})})]},I.id)}):t.jsx("tr",{children:t.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No quotes found."})})})]})}),t.jsx(Ct,{className:"mt-4",totalItems:qe.length,pageSize:Tm,currentPage:W,onPrev:V,onNext:pe,label:"quotes"})]}),lt=C?t.jsx("div",{id:"modalBackdrop",onClick:xe,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:I=>I.stopPropagation(),children:[t.jsx("button",{onClick:M,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:k||B,children:t.jsx(jt,{size:22})}),t.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:_?"Edit Quote":"Add New Quote"}),t.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:P,children:[t.jsx(fk,{label:"Deal",name:"deal_id",value:G.deal_id,onChange:ne,options:[{value:"",label:"Select deal"},...i.map(I=>({value:String(I.id),label:I.deal_name||I.name||`Deal #${I.id}`}))],required:!0,disabled:k||i.length===0,className:"md:col-span-2"}),t.jsx(mk,{label:"Account",value:Me(G.account_id)||(G.account_id?`Account #${G.account_id}`:""),disabled:!0}),t.jsx(mk,{label:"Contact",value:ke(G.contact_id)||(G.contact_id?`Contact #${G.contact_id}`:""),disabled:!0}),t.jsx(ZN,{label:"Total Amount",name:"total_amount",type:"number",value:G.total_amount,onChange:ne,placeholder:"0.00",required:!0,disabled:k}),t.jsx(ZN,{label:"Presented Date",name:"presented_date",type:"date",value:G.presented_date,onChange:ne,disabled:k}),t.jsx(ZN,{label:"Validity Days",name:"validity_days",type:"number",value:G.validity_days,onChange:ne,placeholder:"30",disabled:k}),t.jsx(Rre,{label:"Assigned To",value:G.assigned_to||"",onChange:I=>K(Ne=>({...Ne,assigned_to:I})),items:Array.isArray(h)?h:[],getLabel:I=>{const Ne=`${I?.first_name??""} ${I?.last_name??""}`.trim();return Ne?I?.role?`${Ne} (${I.role})`:Ne:I?.email||""},placeholder:"Search assignee...",disabled:k}),t.jsx(fk,{label:"Status",name:"status",value:G.status,onChange:ne,options:QN,required:!0,disabled:k,className:"md:col-span-2"}),t.jsx(zre,{label:"Notes",name:"notes",value:G.notes,onChange:ne,placeholder:"Additional details...",rows:3,disabled:k,className:"md:col-span-2"}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[t.jsx("button",{type:"button",onClick:M,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:k||B,children:"Cancel"}),t.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:k||B,children:k?"Saving...":_?"Update Quote":"Save Quote"})]})]})]})}):null,ot=A?t.jsx(Fre,{open:!0,title:A.title,message:A.message,confirmLabel:A.confirmLabel,cancelLabel:A.cancelLabel,variant:A.variant,onConfirm:fe,onCancel:me,loading:B}):null;return t.jsxs(t.Fragment,{children:[p?ze:Pe,lt,ot]})}function ZN({label:e,name:s,value:a,onChange:n,placeholder:r,type:i="text",required:l=!1,disabled:c=!1,className:d=""}){return t.jsxs("div",{className:d,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("input",{type:i,name:s,value:a??"",onChange:n,placeholder:r,required:l,disabled:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]})}function mk({label:e,value:s,className:a="",disabled:n=!0}){return t.jsxs("div",{className:a,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("input",{type:"text",value:s??"",disabled:n,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function fk({label:e,name:s,value:a,onChange:n,options:r,required:i=!1,disabled:l=!1,className:c=""}){const d=a!=null?String(a):"",f=r.some(h=>String(h.value)===d)?d:"";return t.jsxs("div",{className:c,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("select",{name:s,value:f,onChange:n,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(h=>t.jsx("option",{value:String(h.value??""),children:h.label},h.value??h.label))})]})}function Rre({label:e,items:s=[],value:a="",onChange:n,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:c=""}){return t.jsxs("div",{className:c,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx(Ure,{items:s,value:a??"",onChange:n,getLabel:r,placeholder:i,disabled:l})]})}function Ure({items:e=[],value:s="",onChange:a,getLabel:n,placeholder:r="Search...",disabled:i=!1,maxRender:l=200}){const[c,d]=g.useState(!1),[m,f]=g.useState(""),h=g.useRef(null),y=e.find(p=>String(p.id)===String(s)),N=y?n(y):"",w=g.useMemo(()=>{const p=m.trim().toLowerCase();return(p?e.filter(C=>(n(C)||"").toLowerCase().includes(p)):e).slice(0,l)},[e,m,n,l]);return g.useEffect(()=>{const p=v=>{h.current&&!h.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]),g.useEffect(()=>{c||f("")},[c]),t.jsxs("div",{ref:h,className:"relative w-full",children:[t.jsx("input",{disabled:i,value:c?m:N,placeholder:r,onFocus:()=>!i&&d(!0),onChange:p=>{f(p.target.value),c||d(!0)},className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),c&&!i&&t.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[t.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:w.length>0?w.map(p=>{const v=String(p.id),C=n(p),j=String(s)===v;return t.jsx("button",{type:"button",onClick:()=>{a(v),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${j?"bg-blue-50":""}`,children:C||"--"},v)}):t.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&t.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function zre({label:e,name:s,value:a,onChange:n,placeholder:r,rows:i=3,disabled:l=!1,className:c=""}){return t.jsxs("div",{className:c,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("textarea",{name:s,value:a??"",onChange:n,placeholder:r,rows:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function Fre({open:e,title:s,message:a,confirmLabel:n,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:c,onCancel:d}){if(!e)return null;const m=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s}),t.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),t.jsx("button",{type:"button",onClick:c,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${m}`,disabled:l,children:l?"Processing...":n})]})]})})}const _y=[{value:"CEO",label:"CEO"},{value:"Admin",label:"Admin"},{value:"Group Manager",label:"Group Manager"},{value:"Manager",label:"Manager"},{value:"Marketing",label:"Marketing"},{value:"Sales",label:"Sales"}],Am={firstName:"",lastName:"",email:"",password:"",role:""},Bre={CEO:"bg-purple-100 text-purple-700",ADMIN:"bg-purple-100 text-purple-700",GROUP_MANAGER:"bg-indigo-100 text-indigo-700",MANAGER:"bg-blue-100 text-blue-700",MARKETING:"bg-yellow-100 text-yellow-700",SALES:"bg-green-100 text-green-700"},Ir=e=>e?e.toString().trim().replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/\s+/g,"_").toUpperCase():"",Hre=e=>{const s=Ir(e),a=_y.find(n=>Ir(n.value)===s);return a?a.value:e||""},PC=e=>{const s=Ir(e),a=_y.find(n=>Ir(n.value)===s);return a?a.label:typeof e=="string"?e.toLowerCase().replace(/\b\w/g,n=>n.toUpperCase()):"--"},hk=e=>{if(!e)return"--";const s=new Date(e);return Number.isNaN(s.getTime())?"--":s.toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",","")},JN=(e,{size:s="sm"}={})=>{const a=Ir(e),n=Bre[a]||"bg-gray-100 text-gray-700",r=s==="lg"?"px-3 py-1 text-sm":s==="md"?"px-2.5 py-1 text-sm":"px-2 py-1 text-xs";return t.jsx("span",{className:`${r} font-semibold rounded-md inline-flex items-center justify-center ${n}`,children:PC(e)})},vo=10,Gre=(e,s)=>{const a=e?.trim()?.[0]??"",n=s?.trim()?.[0]??"";return`${a}${n}`.toUpperCase()||"U"},gk=e=>[...e].sort((s,a)=>{const n=s.created_at?new Date(s.created_at).getTime():0;return(a.created_at?new Date(a.created_at).getTime():0)-n});function Vre(){const{user:e,loading:s}=zt(),[a,n]=g.useState([]),[r,i]=g.useState(!1),[l,c]=g.useState(""),[d,m]=g.useState(""),[f,h]=g.useState(null),[y,N]=g.useState(!1),[w,p]=g.useState(!1),[v,C]=g.useState(null),[j,_]=g.useState(Am),[T,k]=g.useState(!1),[E,A]=g.useState(null),[U,B]=g.useState(!1),[X,$]=g.useState(1),[O,G]=g.useState("Overview"),[K,ae]=g.useState(""),[R,Z]=g.useState(!1),te=Ir(e?.role),ge=["ADMIN","CEO"].includes(te),le=!s&&ge,W=g.useMemo(()=>{const z=_y.filter(ie=>Ir(ie.value)!=="CEO");return[{label:"Filter by Roles",value:""},{label:"CEO",value:"CEO"},...z]},[]),ee=g.useCallback(z=>{z&&(n(ie=>ie.map(ue=>ue.id===z?{...ue,highlight:!0}:ue)),setTimeout(()=>{n(ie=>ie.map(ue=>ue.id===z?{...ue,highlight:!1}:ue))},2e3))},[]),J=g.useCallback(async()=>{i(!0);try{const z=await se.get("/users/all"),ie=Array.isArray(z.data)?z.data:[],ue=gk(ie);n(ue),h(M=>M&&(ue.find(ne=>ne.id===M.id)||null)),console.log(z.data)}catch(z){console.error("Error fetching users:",z);const ie=z.response?.data?.detail||"Failed to load users. Please try again later.";q.error(ie)}finally{i(!1)}},[]);g.useEffect(()=>{!s&&!ge&&e&&q.error("You are not authorized to access User Management.")},[ge,s,e]),g.useEffect(()=>{s||!ge||J()},[s,ge,J]),g.useEffect(()=>{document.title="Users | Sari-Sari CRM"},[]);const he=g.useMemo(()=>{const z=l.trim().toLowerCase(),ie=Ir(d);return gk(a.filter(ue=>{if(!ue)return!1;const M=z===""||[ue.first_name,ue.last_name,`${ue.first_name||""} ${ue.last_name||""}`,ue.email,PC(ue.role)].filter(Boolean).some(ne=>ne.toString().toLowerCase().includes(z)),xe=ie===""||ie==="CEO"&&["CEO","ADMIN"].includes(Ir(ue.role))||Ir(ue.role)===ie;return M&&xe}))},[a,l,d]),be=Math.max(1,Math.ceil(he.length/vo)||1);g.useEffect(()=>{$(1)},[l,d]),g.useEffect(()=>{$(z=>{const ie=Math.max(1,Math.ceil(he.length/vo)||1);return z>ie?ie:z})},[he.length]);const Le=g.useMemo(()=>{const z=(X-1)*vo;return he.slice(z,z+vo)},[he,X]);he.length===0||(X-1)*vo+1,Math.min(X*vo,he.length);const Me=()=>$(z=>Math.max(z-1,1)),ke=()=>$(z=>Math.min(z+1,be)),F=()=>{_(Am),p(!1),C(null),N(!0)},ve=z=>{h(z),G("Overview"),ae(z?.is_active?"Active":"Inactive")},Ce=z=>{z.target.id==="userModalBackdrop"&&!U&&D()},D=()=>{h(null)},re=(z,ie)=>{_(ue=>({...ue,[z]:ie}))},oe=()=>{const z="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let ie="";for(let ue=0;ue<10;ue+=1)ie+=z.charAt(Math.floor(Math.random()*z.length));re("password",ie)},je=()=>{T||U||(N(!1),_(Am),C(null),p(!1))},Re=z=>{_({firstName:z.first_name||"",lastName:z.last_name||"",email:z.email||"",password:"",role:Hre(z.role)}),p(!0),C(z.id),N(!0),h(null)},Ke=z=>{A({title:"Delete User",message:t.jsxs("span",{children:["Are you sure you want to delete"," ",t.jsxs("span",{className:"font-semibold",children:[z.first_name," ",z.last_name]}),"? This action cannot be undone."]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:z.id,name:`${z.first_name||""} ${z.last_name||""}`.trim()||z.email||"user"}})},et=z=>{z.preventDefault();const ie=j.firstName.trim(),ue=j.lastName.trim(),M=j.email.trim(),xe=j.password.trim(),ne=j.role,Te=!(w&&v);if(!ie||!M||!ne){q.warn("Please fill in all required fields.");return}if(Te&&!xe){q.warn("Please fill in all required fields.");return}if(xe&&xe.length<8){q.warn("Password should be at least 8 characters long.");return}const Q={first_name:ie,last_name:ue,email:M,role:ne};(Te||xe)&&(Q.password=xe);const ye=`${ie} ${ue}`.trim(),P=Te?"create":"update";A({title:P==="create"?"Confirm New User":"Confirm User Update",message:P==="create"?t.jsxs("span",{children:["Create user ",t.jsx("span",{className:"font-semibold",children:ye})," with role"," ",t.jsx("span",{className:"font-semibold",children:PC(ne)}),"?"]}):t.jsxs("span",{children:["Save changes for"," ",t.jsx("span",{className:"font-semibold",children:ye||M}),"?"]}),confirmLabel:P==="create"?"Create User":"Update User",cancelLabel:"Cancel",variant:"primary",action:{type:P,payload:Q,targetId:v,name:ye||M}})},qe=async()=>{if(!E?.action){A(null);return}const{action:z}=E,{type:ie,payload:ue,targetId:M,name:xe}=z;B(!0),(ie==="create"||ie==="update")&&k(!0);try{if(ie==="create"){const Te=(await se.post("/users/createuser",ue)).data;await J(),ee(Te.id),q.success(`User "${xe}" created successfully.`),N(!1),_(Am),C(null),p(!1)}else if(ie==="update"){if(!M)throw new Error("Missing user identifier for update.");const Te=(await se.put(`/users/updateuser/${M}`,ue)).data;await J(),h(null),ee(Te.id),q.success(`User "${xe}" updated successfully.`),N(!1),_(Am),C(null),p(!1)}else if(ie==="delete"){if(!M)throw new Error("Missing user identifier for deletion.");await se.delete(`/users/deleteuser/${M}`),n(ne=>ne.map(Te=>Te.id===M?{...Te,is_active:!1}:Te)),f&&f.id===M&&(h(null),ae("")),q.success(`User "${xe}" deactivated successfully.`)}}catch(ne){console.error("User management error:",ne);const Te=ie==="create"?"Failed to create user. Please review the details and try again.":ie==="update"?"Failed to update user. Please review the details and try again.":"Failed to delete user. Please try again.",Q=ne.response?.data?.detail||Te;q.error(Q)}finally{(ie==="create"||ie==="update")&&k(!1),B(!1),A(null)}},Ze=()=>{U||A(null)},we=async()=>{if(!f||!K)return;const z=f.is_active?"Active":"Inactive";if(K===z)return;const ie=K==="Active";Z(!0);try{const M=(await se.put(`/users/updateuser/${f.id}`,{is_active:ie})).data;n(xe=>xe.map(ne=>ne.id===M.id?M:ne)),h(null),ae(""),q.success(`User status updated to ${K}`)}catch(ue){console.error("Failed to update user status:",ue);const M=ue.response?.data?.detail||"Failed to update user status. Please try again.";q.error(M)}finally{Z(!1)}},V=t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[(r||s||!le)&&t.jsx(xt,{}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[t.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[t.jsx(h1,{className:"mr-2 text-blue-600"}),"User Management"]}),t.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:t.jsxs("button",{type:"button",onClick:F,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[t.jsx(Cs,{className:"mr-2"})," Add User"]})})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[t.jsx(yt,{size:20,className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search users",value:l,onChange:z=>c(z.target.value),className:"focus:outline-none text-base w-full"})]}),t.jsx("div",{className:"w-full lg:w-1/4",children:t.jsx("select",{value:d,onChange:z=>m(z.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:W.map(z=>t.jsx("option",{value:z.value,children:z.label},z.value))})})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[t.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4",children:"Fullname"}),t.jsx("th",{className:"py-3 px-4",children:"Email"}),t.jsx("th",{className:"py-3 px-4",children:"Role"}),t.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),t.jsx("tbody",{children:r?t.jsx("tr",{children:t.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:3,children:"Loading users..."})}):he.length===0?t.jsx("tr",{children:t.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-400",colSpan:4,children:"No users found."})}):Le.map(z=>t.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${z.highlight?"bg-green-50":""} ${z.is_active?"":"opacity-60 bg-gray-50"}`,children:[t.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>ve(z),children:t.jsxs("div",{className:"font-medium text-blue-600 hover:underline text-sm",children:[z.first_name," ",z.last_name]})}),t.jsx("td",{className:"py-3 px-4 cursor-pointer text-sm",onClick:()=>ve(z),children:z.email}),t.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>ve(z),children:JN(z.role)}),t.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>ve(z),children:t.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-md ${z.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:z.is_active?"Active":"Inactive"})})]},z.id))})]})}),t.jsx(Ct,{className:"mt-4",totalItems:he.length,pageSize:vo,currentPage:X,onPrev:Me,onNext:ke,label:"users"})]}),pe=f?t.jsx("div",{id:"userModalBackdrop",onClick:Ce,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in p-4 sm:p-6 md:p-8 font-inter relative",children:[t.jsx("div",{className:"flex justify-end w-full",children:t.jsx("button",{onClick:D,className:"text-gray-500 hover:text-gray-700 transition mb-5 cursor-pointer",children:t.jsx(es,{size:30})})}),t.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7 mb-4 lg:mb-6 md:mb-4",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[f.profile_picture?t.jsx("img",{src:f.profile_picture,alt:`${f.first_name} ${f.last_name}`,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover border border-gray-200 shadow-sm"}):t.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-200 text-gray-700 flex items-center justify-center text-lg sm:text-xl font-semibold border border-gray-200 shadow-sm",children:Gre(f.first_name,f.last_name)}),t.jsxs("div",{children:[t.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[f.first_name," ",f.last_name]}),t.jsx("p",{className:"text-sm text-gray-500 break-all",children:f.email})]})]}),JN(f.role,{size:"md"})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Re(f),disabled:U,children:[t.jsx(hs,{className:"mr-2"}),"Edit"]}),t.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>Ke(f),disabled:U,children:[t.jsx(Nt,{className:"mr-2"}),"Delete"]})]})]}),t.jsx("div",{className:"border-b border-gray-200 mb-6"}),t.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview"].map(z=>t.jsx("button",{onClick:()=>G(z),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${O===z?"bg-[#5c636d] text-white border-white":"text-white hover:bg-[#5c636d]"}`,children:z},z))}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[t.jsx("div",{className:"lg:col-span-3",children:O==="Overview"&&t.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Email:"}),t.jsx("p",{children:f.email||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Role:"}),t.jsx("p",{children:JN(f.role,{size:"sm"})})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Status:"}),t.jsx("p",{children:f.is_active?"Active":"Inactive"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Auth Provider:"}),t.jsx("p",{children:f.auth_provider?f.auth_provider.toString().replace(/\b\w/g,z=>z.toUpperCase()):"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Phone Number:"}),t.jsx("p",{children:f.phone_number||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Company:"}),t.jsx("p",{children:f.company?.company_name||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Company Number:"}),t.jsx("p",{children:f.company?.company_number||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Related to CEO:"}),t.jsx("p",{children:f.manager?`${f.manager.first_name} ${f.manager.last_name}`:"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Created At:"}),t.jsx("p",{children:hk(f.created_at)||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Last Login:"}),t.jsx("p",{children:f.last_login?hk(f.last_login):"Never"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Profile Picture:"}),t.jsx("p",{children:f.profile_picture?t.jsx("a",{href:f.profile_picture,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline break-all",children:"View image"}):"N/A"})]})]})})}),t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),t.jsx("div",{className:"flex flex-col gap-2 w-full",children:t.jsxs("button",{type:"button",onClick:()=>{if(!f.email){alert("No email address available");return}const z=encodeURIComponent(f.email),ie=encodeURIComponent(""),ue=encodeURIComponent(""),M=`https://mail.google.com/mail/?view=cm&fs=1&to=${z}&su=${ie}&body=${ue}`;window.open(M,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(js,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]})})]}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),t.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:K||(f.is_active?"Active":"Inactive"),onChange:z=>ae(z.target.value),children:[t.jsx("option",{value:"Active",children:"Active"}),t.jsx("option",{value:"Inactive",children:"Inactive"})]}),t.jsx("button",{onClick:we,disabled:R||K===(f.is_active?"Active":"Inactive"),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${R||K===(f.is_active?"Active":"Inactive")?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:R?"Updating...":"Update"})]})]})]})]})}):null;return t.jsxs(t.Fragment,{children:[V,pe,t.jsx(Wre,{open:y,isEditing:w,isSubmitting:T,confirmProcessing:U,formData:j,onClose:je,onSubmit:et,onChange:re,onGeneratePassword:oe}),t.jsx(Yre,{open:!!E,title:E?.title,message:E?.message,confirmLabel:E?.confirmLabel,cancelLabel:E?.cancelLabel,variant:E?.variant,loading:U,onConfirm:qe,onCancel:Ze})]})}function Wre({open:e,isEditing:s,isSubmitting:a,confirmProcessing:n,formData:r,onClose:i,onSubmit:l,onChange:c,onGeneratePassword:d}){if(!e)return null;const m=a||n;return t.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-lg border border-gray-200 p-6 sm:p-8 relative overflow-y-auto max-h-[90vh]",children:[t.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:m,children:t.jsx(jt,{size:22})}),t.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-6 text-center",children:s?"Edit User":"Add New User"}),t.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:l,children:[t.jsx(wx,{label:"First Name",value:r.firstName,onChange:f=>c("firstName",f),placeholder:"John",required:!0,disabled:m}),t.jsx(wx,{label:"Last Name",value:r.lastName,onChange:f=>c("lastName",f),placeholder:"Doe",required:!0,disabled:m}),t.jsx(wx,{label:"Email",type:"email",value:r.email,onChange:f=>c("email",f),placeholder:"john.doe@company.com",required:!0,disabled:m||s}),t.jsx(wx,{label:"Role",type:"select",value:r.role,onChange:f=>c("role",f),options:[{value:"",label:"Select role"},..._y],required:!0,disabled:m}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Password"}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[t.jsx("input",{type:"text",value:r.password,onChange:f=>c("password",f.target.value),placeholder:s?"Leave blank to keep current password":"Enter or generate password",required:!s,disabled:m,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"}),t.jsx("button",{type:"button",onClick:d,className:"flex items-center justify-center px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-60",disabled:m,children:"Generate"})]}),s?t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Setting a password will reset the user's credentials; leave it blank to keep the current password."}):t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long."})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 md:col-span-2 mt-4",children:[t.jsx("button",{type:"button",onClick:i,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:m,children:"Cancel"}),t.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:m,children:a?"Saving...":s?"Update User":"Save User"})]})]})]})})}function wx({label:e,type:s="text",value:a,onChange:n,placeholder:r,options:i=[],required:l=!1,disabled:c=!1}){return t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),s==="select"?t.jsx("select",{value:a??"",onChange:d=>n(d.target.value),required:l,disabled:c,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100",children:i.map(d=>t.jsx("option",{value:d.value,children:d.label},d.value))}):t.jsx("input",{type:s,value:a??"",onChange:d=>n(d.target.value),placeholder:r,required:l,disabled:c,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"})]})}function Yre({open:e,title:s,message:a,confirmLabel:n,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:c,onCancel:d}){if(!e)return null;const m=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-black hover:bg-gray-800 border border-black";return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s}),t.jsx("div",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),t.jsx("button",{type:"button",onClick:c,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${m}`,disabled:l,children:l?"Processing...":n})]})]})})}const Qre=(e,s)=>{const a=e?.trim()?.[0]??"",n=s?.trim()?.[0]??"";return`${a}${n}`.toUpperCase()||"U"};function qre(){const{user:e,loading:s,fetchUser:a}=zt(),[n,r]=g.useState(!1),[i,l]=g.useState(!1),[c,d]=g.useState(!1),[m,f]=g.useState(!1),[h,y]=g.useState(!1),[N,w]=g.useState(null),[p,v]=g.useState(null),C=g.useRef(null),[j,_]=g.useState({firstName:"",lastName:"",email:"",phoneNumber:""}),[T,k]=g.useState({currentPassword:"",newPassword:"",confirmPassword:""});g.useEffect(()=>{e&&(_({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),v(e.profile_picture||null))},[e]),g.useEffect(()=>{document.title="Manage Account | Sari-Sari CRM"},[]);const E=($,O)=>{_(G=>({...G,[$]:O}))},A=($,O)=>{k(G=>({...G,[$]:O}))},U=$=>{const O=$.target.files?.[0];if(!O)return;if(!O.type.startsWith("image/")){q.error("Please select an image file");return}if(O.size>5*1024*1024){q.error("Image size should be less than 5MB");return}const G=new FileReader;G.onloadend=()=>{w(G.result),v(G.result)},G.readAsDataURL(O)},B=async $=>{if($.preventDefault(),!j.firstName.trim()||!j.lastName.trim()){q.warn("Please fill in all required fields.");return}r(!0);try{const O={first_name:j.firstName.trim(),last_name:j.lastName.trim(),phone_number:j.phoneNumber.trim()||null};N!==null&&(O.profile_picture=N),await se.put("/users/me",O),await a(),l(!1),w(null),window.dispatchEvent(new CustomEvent("userProfileUpdated")),q.success("Account information updated successfully!")}catch(O){console.error("Error updating account:",O);const G=O.response?.data?.detail||"Failed to update account information. Please try again.";q.error(G)}finally{r(!1)}},X=async $=>{if($.preventDefault(),!T.newPassword||!T.confirmPassword){q.warn("Please fill in all password fields.");return}if(T.newPassword.length<8){q.warn("Password must be at least 8 characters long.");return}if(T.newPassword!==T.confirmPassword){q.warn("New password and confirm password do not match.");return}y(!0);try{const O={password:T.newPassword};await se.put("/users/me",O),await a(),k({currentPassword:"",newPassword:"",confirmPassword:""}),window.dispatchEvent(new CustomEvent("userProfileUpdated")),y(!1),q.success("Password changed successfully!")}catch(O){console.error("Error changing password:",O);const G=O.response?.data?.detail||"Failed to change password. Please try again.";q.error(G)}finally{y(!1)}};return t.jsxs("div",{className:"p-2 lg:p-8 font-inter relative",children:[(s||!e)&&t.jsx(xt,{}),e&&t.jsxs("div",{children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-gray-800 mb-2",children:"Manage Your Account"}),t.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Update your account information and change your password"})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mb-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[t.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:[t.jsx(qt,{className:"text-blue-600"}),"Profile Information"]}),t.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:!i&&t.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition text-sm",children:[t.jsx(hs,{}),"Edit Profile"]})})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 mb-6 pb-6 border-b border-gray-200",children:[t.jsxs("div",{className:"flex-shrink-0 relative group",children:[p?t.jsx("div",{className:"relative",children:t.jsx("img",{src:p,alt:`${e.first_name} ${e.last_name}`,className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full object-cover border-2 border-gray-200 shadow-sm"})}):t.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 text-white flex items-center justify-center text-2xl sm:text-3xl font-semibold border-2 border-gray-200 shadow-sm",children:Qre(e.first_name,e.last_name)}),i&&t.jsxs("div",{className:"absolute bottom-0 right-0",children:[t.jsx("input",{type:"file",ref:C,accept:"image/*",onChange:U,className:"hidden",id:"profile-picture-upload"}),t.jsx("label",{htmlFor:"profile-picture-upload",className:"cursor-pointer bg-gray-900 text-white p-1.5 rounded-full shadow-lg hover:bg-gray-800 transition flex items-center justify-center border-2 border-white",title:"Change profile picture",children:t.jsx(LM,{size:14})})]})]}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[i?j.firstName:e.first_name," ",i?j.lastName:e.last_name]}),t.jsx("p",{className:"text-gray-600 text-sm",children:e.email}),t.jsx("span",{className:"inline-block mt-2 px-3 py-1 bg-blue-100 text-blue-700 text-xs font-semibold rounded-md",children:e.role})]})]}),i?t.jsxs("form",{onSubmit:B,className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["First Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:"text",value:j.firstName,onChange:$=>E("firstName",$.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Last Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:"text",value:j.lastName,onChange:$=>E("lastName",$.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),t.jsxs("div",{className:"sm:col-span-2",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Email"}),t.jsxs("div",{className:"relative",children:[t.jsx(js,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:"email",value:j.email,disabled:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-600 cursor-not-allowed outline-none",readOnly:!0})]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),t.jsxs("div",{className:"sm:col-span-2",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Phone Number"}),t.jsxs("div",{className:"relative",children:[t.jsx(ft,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:"tel",value:j.phoneNumber,onChange:$=>E("phoneNumber",$.target.value),placeholder:"+1 (555) 123-4567",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]})]})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t border-gray-200",children:[t.jsx("button",{type:"button",onClick:()=>{l(!1),_({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),w(null),v(e.profile_picture||null),C.current&&(C.current.value="")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition",disabled:n,children:"Cancel"}),t.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:n,children:[t.jsx(MM,{}),n?"Saving...":"Save Changes"]})]})]}):t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"First Name"}),t.jsx("p",{className:"text-gray-800 font-medium",children:e.first_name||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Name"}),t.jsx("p",{className:"text-gray-800 font-medium",children:e.last_name||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Email"}),t.jsx("p",{className:"text-gray-800 font-medium",children:e.email||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Phone Number"}),t.jsx("p",{className:"text-gray-800 font-medium",children:e.phone_number||"N/A"})]})]})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[t.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[t.jsx(Ur,{className:"text-blue-600"}),"Change Password"]}),t.jsxs("form",{onSubmit:X,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["New Password ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(Ur,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:"text",style:c?void 0:{WebkitTextSecurity:"disc"},value:T.newPassword,onChange:$=>A("newPassword",$.target.value),placeholder:"Enter new password (min. 8 characters)",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),t.jsx("button",{type:"button",onClick:()=>d($=>!$),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":c?"Hide password":"Show password",children:c?t.jsx(rc,{className:"size-5"}):t.jsx(ic,{className:"size-5"})})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Confirm New Password ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(Ur,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:"text",style:m?void 0:{WebkitTextSecurity:"disc"},value:T.confirmPassword,onChange:$=>A("confirmPassword",$.target.value),placeholder:"Confirm new password",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),t.jsx("button",{type:"button",onClick:()=>f($=>!$),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":m?"Hide password":"Show password",children:m?t.jsx(rc,{className:"size-5"}):t.jsx(ic,{className:"size-5"})})]})]}),t.jsx("div",{className:"pt-4 border-t border-gray-200 flex justify-center lg:justify-start",children:t.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:h,children:[t.jsx(Ur,{}),h?"Changing Password...":"Change Password"]})})]})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mt-6",children:[t.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[t.jsx(DM,{className:"text-blue-600"}),"Account Information"]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Role"}),t.jsx("span",{className:"inline-block px-3 py-1 bg-blue-100 text-blue-700 text-sm font-semibold rounded-md",children:e.role})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Status"}),t.jsx("span",{className:`inline-block px-3 py-1 text-sm font-semibold rounded-md ${e.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:e.is_active?"Active":"Inactive"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Company"}),t.jsx("p",{className:"text-gray-800 font-medium",children:e.company?.company_name||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Auth Provider"}),t.jsx("p",{className:"text-gray-800 font-medium",children:e.auth_provider?e.auth_provider.charAt(0).toUpperCase()+e.auth_provider.slice(1):"N/A"})]}),e.created_at&&t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Account Created"}),t.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),e.last_login&&t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Login"}),t.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.last_login).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})})]})]})]})]})]})}function UI({selectedDeal:e,onStatusUpdate:s,onClose:a}){const[n,r]=g.useState(e?.stage||""),[i,l]=g.useState(!1),c=it(),d=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"}];g.useEffect(()=>{e?.stage&&r(e.stage)},[e]);const m=async()=>{if(!e||!e.id){q.error("No deal selected");return}if(!n||n===e.stage){q.info("Please select a different stage");return}const f=e.id;l(!0);try{await se.put(`/deals/admin/${f}`,{stage:n}),a&&a(),s&&setTimeout(async()=>{await s(!0)},100),setTimeout(()=>{q.success("Deal status updated successfully")},300)}catch(h){console.error(h);const y=h.response?.data?.detail||"Failed to update deal status";q.error(y)}finally{l(!1)}};return e?t.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),t.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[t.jsxs("button",{onClick:()=>c("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Deal"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),t.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const f=encodeURIComponent(e.contact.email),h=encodeURIComponent(""),y=encodeURIComponent(""),N=`https://mail.google.com/mail/?view=cm&fs=1&to=${f}&su=${h}&body=${y}`;window.open(N,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(js,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),t.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>c("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Deal"}}}),children:[t.jsx(dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),t.jsxs("button",{onClick:()=>c("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Deal"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ts,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),t.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:n,onChange:f=>r(f.target.value),disabled:i,children:d.map(f=>t.jsx("option",{value:f.value,children:f.label},f.value))}),t.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:m,disabled:i||!n||n===e.stage,children:i?"Updating...":"Update"})]})]}):null}function zI({selectedDeal:e,show:s,onClose:a,activeTab:n,setActiveTab:r,onEdit:i,onDelete:l,onStatusUpdate:c}){const d=it(),[m]=Aa(),f=m.get("id"),[h,y]=g.useState(e||null),[N,w]=g.useState(n||"Overview"),p=n!==void 0?n:N;if(g.useEffect(()=>{(async()=>{if(f&&!e)try{console.log("Fetching deal from route, ID:",f);const T=(await se.get("/deals/admin/fetch-all")).data||[];console.log("All deals fetched:",T.length);const k=T.find(E=>E.id===parseInt(f));if(console.log("Found deal:",k),k){console.log("Deal data structure:",{id:k.id,name:k.name,amount:k.amount,stage:k.stage,account:k.account,contact:k.contact,assigned_deals:k.assigned_deals,deal_creator:k.deal_creator,allKeys:Object.keys(k)});const E={...k,amount:typeof k.amount=="number"?k.amount:parseFloat(k.amount||0),probability:k.probability||0};y(E)}else console.warn("Deal not found with ID:",f)}catch(_){console.error("Error fetching deal:",_)}})()},[f,e]),!h&&!f||f&&!h)return null;const v=j=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[j]||"bg-gray-100 text-gray-700";function C(j){return j?new Date(j).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[t.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:t.jsxs("div",{className:"flex items-start justify-between w-full",children:[t.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),t.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:t.jsx("button",{onClick:()=>{a?a():d(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:t.jsx(jt,{size:25})})})]})}),t.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:t.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[t.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:h.name}),t.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${v(h.stage)}`,children:h.stage})]}),t.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",C(h.created_at)]})]}),t.jsxs("div",{className:"flex flex-col items-end gap-2",children:[t.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[" ",h.amount?h.amount.toLocaleString():"0"]}),t.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${h.probability}%`}})}),t.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",h.probability,"% Complete "]}),t.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[t.jsxs("button",{type:"button",onClick:()=>{i&&i(h)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[t.jsx(hs,{className:"mr-1 sm:mr-2",size:16}),t.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),t.jsxs("button",{type:"button",onClick:()=>{l&&l(h)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[t.jsx(Nt,{className:"mr-1 sm:mr-2",size:16}),t.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]})}),t.jsx("div",{className:"border-b border-gray-200 my-5"}),t.jsxs("div",{className:"p-6 lg:p-4",children:[t.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(j=>t.jsx("button",{onClick:()=>{r?r(j):w(j)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${p===j?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:j},j))}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[t.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[p==="Overview"&&t.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),t.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[t.jsx("strong",{children:"Description:"})," ",h.description]}),t.jsx("div",{className:"h-px bg-gray-200 w-full"}),t.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[t.jsx("strong",{children:"Expected Close Date:"})," ",h.close_date]}),t.jsx("div",{className:"h-px bg-gray-200 w-full"}),t.jsxs("div",{className:"mt-4 py-3 w-full",children:[t.jsxs("div",{className:"relative flex flex-col w-full",children:[t.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const j=(h?.stage||"PROSPECTING").toUpperCase(),T=(E=>E==="PROSPECTING"?0:E==="QUALIFICATION"?1:E==="PROPOSAL"?2:E==="NEGOTIATION"?3:E==="CLOSED_WON"||E==="CLOSED_LOST"?4:-1)(j);return[0,1,2,3,4].map(E=>T===E?"orange":T>E?"green":"gray").map((E,A)=>t.jsxs(at.Fragment,{children:[t.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${E==="green"?"bg-green-500 border-green-500":E==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),A<4&&t.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},A))})()}),t.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((j,_)=>t.jsx("span",{className:"text-center flex-1 break-words",children:j},_))})]}),t.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:h.stage})]})]}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),t.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[t.jsxs("p",{children:[t.jsx("strong",{children:"Account:"})," ",h.account?.name]}),t.jsx("div",{className:"h-px bg-gray-200 w-full"}),t.jsxs("p",{children:[t.jsx("strong",{children:"Primary Contact:"})," ",h.contact?.first_name," ",h.contact?.last_name]}),t.jsx("div",{className:"h-px bg-gray-200 w-full"}),t.jsxs("p",{children:[t.jsx("strong",{children:"Phone:"})," ",h.contact?.work_phone]}),t.jsx("div",{className:"h-px bg-gray-200 w-full"}),t.jsxs("p",{children:[t.jsx("strong",{children:"Email:"})," ",h.contact?.email]}),t.jsx("div",{className:"h-px bg-gray-200 w-full"}),t.jsxs("p",{children:[t.jsx("strong",{children:"Assigned To:"})," ",h.assigned_deals?.first_name," ",h.assigned_deals?.last_name]})]})]})]}),p==="Notes"&&t.jsxs("div",{className:"mt-4 w-full",children:[t.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:t.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[t.jsx("div",{className:"flex items-start justify-between",children:t.jsx("div",{children:t.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),t.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:h.description||"No notes available."})]})]}),p==="Activities"&&t.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:ft,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:dt,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((j,_)=>t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[t.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[t.jsx("div",{className:"text-gray-600 mt-1",children:t.jsx(j.icon,{size:24})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"font-medium text-gray-900 break-words",children:j.title}),t.jsx("p",{className:"text-sm text-gray-500 break-words",children:j.desc}),t.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[t.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),t.jsx("p",{className:"text-sm text-gray-700 break-words",children:j.user})]})]})]}),t.jsx("p",{className:"text-sm text-gray-500 break-words",children:j.date})]},_))]}),p==="Edit"&&t.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[t.jsxs("label",{className:"block mb-3 break-words",children:[t.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),t.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:h.name})]}),t.jsxs("label",{className:"block mb-3 break-words",children:[t.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),t.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:h.description})]}),t.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),t.jsx("div",{className:"w-full lg:w-auto",children:t.jsx(UI,{selectedDeal:h,onStatusUpdate:c,onClose:a})})]})]})]})})}const Lm=10;function Xre(){g.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const[e,s]=g.useState(""),[a,n]=g.useState("Filter by Stage"),[r,i]=g.useState("Filter by Owner"),[l,c]=g.useState(null),[d,m]=g.useState("Overview"),[f,h]=g.useState(!1),[y,N]=g.useState(null),[w,p]=g.useState(!1),[v,C]=g.useState(1),[j,_]=g.useState(!1),[T,k]=g.useState(null),[E,A]=g.useState(!1),[U,B]=g.useState(!1),[X,$]=g.useState(null),[O,G]=g.useState([]),[K,ae]=g.useState([]),[R,Z]=g.useState([]),[te,ge]=g.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),le={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST"},W=M=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"})[M]||M||"--",ee=M=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[M]||"bg-gray-100 text-gray-700",J=g.useMemo(()=>{const M=e.trim().toLowerCase(),xe=a.trim(),ne=r.trim();return(y??[]).filter(Te=>{const Q=[Te?.name,Te?.description,Te?.account?.name,Te?.contact?.first_name,Te?.contact?.last_name,Te?.assigned_deals?.first_name,Te?.assigned_deals?.last_name],ye=M===""||Q.some(me=>me==null||me===""?!1:me.toString().toLowerCase().includes(M)),P=xe==="Filter by Stage"||xe===""||Te.stage===le[xe]||Te.stage===xe,fe=ne==="Filter by Owner"||ne===""||`${Te.assigned_deals?.first_name||""} ${Te.assigned_deals?.last_name||""}`.trim().toLowerCase()===ne.toLowerCase();return ye&&P&&fe})},[y,e,a,r]),he=Math.max(1,Math.ceil(J.length/Lm)||1);g.useEffect(()=>{C(1)},[e,a,r]),g.useEffect(()=>{C(M=>{const xe=Math.max(1,Math.ceil(J.length/Lm)||1);return M>xe?xe:M})},[J.length]);const be=g.useMemo(()=>{const M=(v-1)*Lm;return J.slice(M,M+Lm)},[J,v]),Le=()=>C(M=>Math.max(M-1,1)),Me=()=>C(M=>Math.min(M+1,he)),ke=()=>{ge({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),B(!1),$(null),h(!0)},F=async()=>{p(!0);try{const M=await se.get("/deals/admin/fetch-all"),ne=[...Array.isArray(M.data)?M.data:[]].sort((Te,Q)=>{const ye=Te?.created_at?new Date(Te.created_at).getTime():0;return(Q?.created_at?new Date(Q.created_at).getTime():0)-ye});N(ne)}catch(M){M.response&&M.response.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch deals. Please try again later."),console.error(M)}finally{p(!1)}},ve=async()=>{try{const M=await se.get("/accounts/admin/fetch-all");G(Array.isArray(M.data)?M.data:[])}catch(M){console.error(M),M.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},Ce=async()=>{try{const M=await se.get("/contacts/admin/fetch-all");ae(Array.isArray(M.data)?M.data:[])}catch(M){console.error(M),M.response?.status===403&&q.warn("Unable to load contacts (permission denied).")}},D=async()=>{try{const M=await se.get("/users/all");Z(Array.isArray(M.data)?M.data:[])}catch(M){console.error(M),M.response?.status===403&&q.warn("Unable to load users (permission denied).")}};g.useEffect(()=>{F(),ve(),Ce(),D()},[]);const re=M=>{M&&(ge({id:M.id||null,name:M.name||"",account_id:M.account_id?.toString()||"",primary_contact_id:M.primary_contact_id?.toString()||"",stage:M.stage||"PROPOSAL",amount:M.amount?.toString()||"",close_date:M.close_date?new Date(M.close_date).toISOString().split("T")[0]:"",assigned_to:M.assigned_to?.toString()||"",currency:M.currency||"PHP",description:M.description||""}),B(!0),$(M.id),c(null),h(!0))},oe=async(M=!1)=>{try{const xe=await se.get("/deals/admin/fetch-all"),Te=[...Array.isArray(xe.data)?xe.data:[]].sort((Q,ye)=>{const P=Q?.created_at?new Date(Q.created_at).getTime():0;return(ye?.created_at?new Date(ye.created_at).getTime():0)-P});if(N(Te),!M&&l&&l.id){const Q=Te.find(ye=>ye.id===l.id);Q&&c({...Q})}}catch(xe){console.error("Failed to refresh deal data:",xe),await F()}},je=M=>{const xe=M.name.trim();if(!xe){q.error("Deal name is required.");return}if(!M.account_id){q.error("Account is required.");return}const ne=U&&X?"update":"create",Te=xe;k({title:ne==="create"?"Confirm New Deal":"Confirm Update",message:ne==="create"?t.jsxs("span",{children:["Are you sure you want to create"," ",t.jsx("span",{className:"font-semibold",children:Te}),"?"]}):t.jsxs("span",{children:["Save changes to ",t.jsx("span",{className:"font-semibold",children:Te}),"?"]}),confirmLabel:ne==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:ne,formData:M,targetId:X||null,name:Te}})},Re=M=>{if(!M)return;const xe=M.name||"this deal";k({title:"Delete Deal",message:t.jsxs("span",{children:["Are you sure you want to permanently delete"," ",t.jsx("span",{className:"font-semibold",children:xe}),"? This action cannot be undone."]}),confirmLabel:"Delete Deal",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:M.id,name:xe}})},Ke=async()=>{if(!T?.action){k(null);return}const{action:M}=T,{type:xe,formData:ne,targetId:Te,name:Q}=M;A(!0);try{if(xe==="create"){_(!0);const ye={name:ne.name.trim(),account_id:parseInt(ne.account_id),primary_contact_id:ne.primary_contact_id?parseInt(ne.primary_contact_id):null,stage:ne.stage,amount:ne.amount?parseFloat(ne.amount):null,currency:ne.currency||"PHP",close_date:ne.close_date||null,description:ne.description||null,assigned_to:ne.assigned_to?parseInt(ne.assigned_to):null};await se.post("/deals/admin/create",ye),q.success(`Deal "${Q}" created successfully.`),h(!1),await F()}else if(xe==="update"){if(!Te)throw new Error("Missing deal identifier for update.");_(!0);const ye={};ne.name!==void 0&&(ye.name=ne.name.trim()),ne.account_id!==void 0&&ne.account_id!==""&&(ye.account_id=parseInt(ne.account_id)),ne.primary_contact_id!==void 0&&(ye.primary_contact_id=ne.primary_contact_id?parseInt(ne.primary_contact_id):null),ne.stage!==void 0&&(ye.stage=ne.stage),ne.amount!==void 0&&ne.amount!==""&&(ye.amount=parseFloat(ne.amount)),ne.currency!==void 0&&(ye.currency=ne.currency),ne.close_date!==void 0&&(ye.close_date=ne.close_date||null),ne.description!==void 0&&(ye.description=ne.description||null),ne.assigned_to!==void 0&&(ye.assigned_to=ne.assigned_to?parseInt(ne.assigned_to):null),await se.put(`/deals/admin/${Te}`,ye),q.success(`Deal "${Q}" updated successfully.`),h(!1),await F()}else if(xe==="delete"){if(!Te)throw new Error("Missing deal identifier for deletion.");await se.delete(`/deals/admin/${Te}`),q.success(`Deal "${Q}" deleted successfully.`),l?.id===Te&&c(null),await F()}}catch(ye){console.error(ye);const P=xe==="create"?"Failed to create deal. Please review the details and try again.":xe==="update"?"Failed to update deal. Please review the details and try again.":"Failed to delete deal. Please try again.",fe=ye.response?.data?.detail||P;q.error(fe)}finally{(xe==="create"||xe==="update")&&_(!1),A(!1),k(null)}},et=()=>{E||k(null)},qe=()=>{h(!1),ge({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),B(!1),$(null),_(!1)},Ze=(y??[]).filter(M=>M.stage==="PROSPECTING").length,we=(y??[]).filter(M=>M.stage==="QUALIFICATION").length,V=(y??[]).filter(M=>M.stage==="PROPOSAL").length,pe=(y??[]).filter(M=>M.stage==="NEGOTIATION").length,z=(y??[]).filter(M=>M.stage==="CLOSED_WON").length,ie=(y??[]).filter(M=>M.stage==="CLOSED_LOST").length,ue=[{title:"Prospecting",value:Ze,icon:w0,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:we,icon:ys,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:V,icon:Es,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:pe,icon:Vd,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:z,icon:As,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:ie,icon:tr,color:"text-red-600",bgColor:"bg-red-100"}];return t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[w&&t.jsx(xt,{message:"Loading deals..."}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[t.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[t.jsx(Es,{className:"mr-2 text-blue-600"}),"Deals"]}),t.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:t.jsxs("button",{onClick:ke,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[t.jsx(Lt,{className:"mr-2"})," Add Deal"]})})]}),t.jsx("div",{className:"grid grid-cols-1 p-2 sm:grid-cols-3 gap-4 mb-6 w-full break-words overflow-hidden",children:ue.map(M=>t.jsx(Zre,{...M},M.title))}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[t.jsx(yt,{size:20,className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search deals",value:e,onChange:M=>s(M.target.value),className:"focus:outline-none text-base w-full"})]}),t.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[t.jsxs("select",{value:a,onChange:M=>n(M.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[t.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),t.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),t.jsx("option",{value:"Qualification Stage",children:"Qualification"}),t.jsx("option",{value:"Proposal Stage",children:"Proposal"}),t.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),t.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),t.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"})]}),t.jsxs("select",{value:r,onChange:M=>i(M.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[t.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((y??[]).map(M=>`${M.assigned_deals?.first_name} ${M.assigned_deals?.last_name}`))].map((M,xe)=>t.jsx("option",{value:M,children:M},xe))]})]})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[t.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),t.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),t.jsx("th",{className:"py-3 px-4",children:"Account"}),t.jsx("th",{className:"py-3 px-4",children:"Contact"}),t.jsx("th",{className:"py-3 px-4",children:"Stage"}),t.jsx("th",{className:"py-3 px-4",children:"Value"}),t.jsx("th",{className:"py-3 px-4",children:"Close Date"}),t.jsx("th",{className:"py-3 px-4",children:"Owner"})]})}),t.jsx("tbody",{children:J.length>0?be.map(M=>t.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{c({...M})},children:[t.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:M.deal_id?M.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),t.jsx("td",{className:"py-3 px-4",children:t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:M.name}),t.jsx("div",{className:"text-gray-500 text-xs break-all",children:M.description||"--"})]})}),t.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:M.account?.name||"--"}),t.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:M.contact?.first_name&&M.contact?.last_name?`${M.contact.first_name} ${M.contact.last_name}`:M.contact?.first_name||M.contact?.last_name||"--"}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ee(M.stage)}`,children:W(M.stage)})}),t.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",M.amount?.toLocaleString()||"0"]}),t.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:M.close_date||"--"}),t.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:M.assigned_deals?.first_name&&M.assigned_deals?.last_name?`${M.assigned_deals.first_name} ${M.assigned_deals.last_name}`:M.assigned_deals?.first_name||M.assigned_deals?.last_name||"--"})]},M.id)):t.jsx("tr",{children:t.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No deals found."})})})]})}),t.jsx(Ct,{className:"mt-4",totalItems:J.length,pageSize:Lm,currentPage:v,onPrev:Le,onNext:Me,label:"deals"}),f&&t.jsx(Jre,{onClose:qe,formData:te,setFormData:ge,isEditing:U,onSubmit:je,isSubmitting:j||E,accounts:O,contacts:K,users:R}),l&&t.jsx(zI,{selectedDeal:l,show:!!l,onClose:()=>c(null),activeTab:d,setActiveTab:m,onEdit:re,onDelete:Re,onStatusUpdate:oe}),T&&t.jsx(Kre,{open:!0,title:T.title,message:T.message,confirmLabel:T.confirmLabel,cancelLabel:T.cancelLabel,variant:T.variant,onConfirm:Ke,onCancel:et,loading:E})]})}function Kre({open:e,title:s,message:a,confirmLabel:n,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:c,onCancel:d}){if(!e)return null;const m=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s}),t.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),t.jsx("button",{type:"button",onClick:c,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${m}`,disabled:l,children:l?"Processing...":n})]})]})})}function Zre({icon:e,title:s,value:a,color:n="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${s}`)};return t.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[t.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${n} mr-4`,children:e?t.jsx(e,{size:22}):null}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"text-xs text-gray-500 uppercase",children:s}),t.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function Jre({onClose:e,formData:s,setFormData:a,isEditing:n=!1,onSubmit:r,isSubmitting:i=!1,accounts:l=[],contacts:c=[],users:d=[]}){const m=y=>{y.preventDefault(),r&&r(s)},f=y=>{y.target.id==="modalBackdrop"&&e()},h=g.useMemo(()=>{const y=String(s.account_id||"").trim(),N=Array.isArray(c)?c:[];return y?N.filter(w=>{const v=[w?.account_id,w?.accountId,w?.account?.id,w?.account?.account_id,w?.account?.accountId].find(C=>C!=null&&String(C).trim()!=="");return v?String(v)===y:!1}):N},[c,s.account_id]);return g.useEffect(()=>{const y=String(s.account_id||"").trim(),N=String(s.primary_contact_id||"").trim();if(!N||!y)return;h.some(p=>String(p?.id)===N)||a(p=>({...p,primary_contact_id:""}))},[s.account_id,s.primary_contact_id,h,a]),t.jsx("div",{id:"modalBackdrop",onClick:f,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:y=>y.stopPropagation(),children:[t.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:t.jsx(jt,{size:22})}),t.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:n?"Edit Deal":"Create Deal"}),t.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:m,children:[t.jsx(ew,{label:"Deal Name",name:"name",value:s.name,onChange:y=>a({...s,name:y.target.value}),placeholder:"Enter deal name",required:!0,disabled:i,className:"md:col-span-2"}),t.jsx(tw,{label:"Account",value:s.account_id||"",onChange:y=>a({...s,account_id:y}),items:l||[],getLabel:y=>y?.name??"",placeholder:"Search account...",disabled:i}),t.jsx(tw,{label:"Primary Contact",value:s.primary_contact_id||"",onChange:y=>a({...s,primary_contact_id:y}),items:h||[],getLabel:y=>`${y?.first_name??""} ${y?.last_name??""}`.trim()||y?.email||"",placeholder:"Search contact...",disabled:i}),t.jsx(xk,{label:"Stage",name:"stage",value:s.stage,onChange:y=>a({...s,stage:y.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"}],disabled:i}),t.jsx(ew,{label:"Amount",name:"amount",type:"number",step:"0.01",value:s.amount,onChange:y=>a({...s,amount:y.target.value}),placeholder:"0",disabled:i}),t.jsx(xk,{label:"Currency",name:"currency",value:s.currency||"PHP",onChange:y=>a({...s,currency:y.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),t.jsx(ew,{label:"Close Date",name:"close_date",type:"date",value:s.close_date||"",onChange:y=>a({...s,close_date:y.target.value}),disabled:i}),t.jsx(tw,{label:"Assign To",value:s.assigned_to||"",onChange:y=>a({...s,assigned_to:y}),items:d||[],getLabel:y=>`${y?.first_name??""} ${y?.last_name??""}`.trim()||y?.email||"",placeholder:"Search assignee...",disabled:i,className:"md:col-span-2"}),t.jsx(tie,{label:"Description",name:"description",value:s.description,onChange:y=>a({...s,description:y.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[t.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),t.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":n?"Update Deal":"Save Deal"})]})]})]})})}function ew({label:e,name:s,value:a,onChange:n,placeholder:r,type:i="text",required:l=!1,disabled:c=!1,className:d=""}){return t.jsxs("div",{className:d,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("input",{type:i,name:s,value:a??"",onChange:n,placeholder:r,required:l,disabled:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]})}function xk({label:e,name:s,value:a,onChange:n,options:r,required:i=!1,disabled:l=!1,className:c=""}){return t.jsxs("div",{className:c,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("select",{name:s,value:a??"",onChange:n,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(d=>t.jsx("option",{value:d.value,children:d.label},d.value))})]})}function tw({label:e,items:s=[],value:a="",onChange:n,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:c=""}){return t.jsxs("div",{className:c,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx(eie,{items:s,value:a??"",onChange:n,getLabel:r,placeholder:i,disabled:l})]})}function eie({items:e=[],value:s="",onChange:a,getLabel:n,placeholder:r="Search...",disabled:i=!1,maxRender:l=200}){const[c,d]=g.useState(!1),[m,f]=g.useState(""),h=g.useRef(null),y=e.find(p=>String(p.id)===String(s)),N=y?n(y):"",w=g.useMemo(()=>{const p=m.trim().toLowerCase();return(p?e.filter(C=>(n(C)||"").toLowerCase().includes(p)):e).slice(0,l)},[e,m,n,l]);return g.useEffect(()=>{const p=v=>{h.current&&!h.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]),g.useEffect(()=>{c||f("")},[c]),t.jsxs("div",{ref:h,className:"relative w-full",children:[t.jsx("input",{disabled:i,value:c?m:N,placeholder:r,onFocus:()=>!i&&d(!0),onChange:p=>{f(p.target.value),c||d(!0)},className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),c&&!i&&t.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[t.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:w.length>0?w.map(p=>{const v=String(p.id),C=n(p),j=String(s)===v;return t.jsx("button",{type:"button",onClick:()=>{a(v),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${j?"bg-blue-50":""}`,children:C||"--"},v)}):t.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&t.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function tie({label:e,name:s,value:a,onChange:n,placeholder:r,required:i=!1,disabled:l=!1,className:c="",rows:d=3}){return t.jsxs("div",{className:c,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("textarea",{name:s,value:a??"",onChange:n,placeholder:r,required:i,disabled:l,rows:d,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}var sie=Object.defineProperty,aie=(e,s,a)=>s in e?sie(e,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[s]=a,sw=(e,s,a)=>(aie(e,typeof s!="symbol"?s+"":s,a),a);let nie=class{constructor(){sw(this,"current",this.detect()),sw(this,"handoffState","pending"),sw(this,"currentId",0)}set(s){this.current!==s&&(this.handoffState="pending",this.currentId=0,this.current=s)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Gr=new nie;function Rh(e){var s;return Gr.isServer?null:e==null?document:(s=e?.ownerDocument)!=null?s:document}function OC(e){var s,a;return Gr.isServer?null:e==null?document:(a=(s=e?.getRootNode)==null?void 0:s.call(e))!=null?a:document}function FI(e){var s,a;return(a=(s=OC(e))==null?void 0:s.activeElement)!=null?a:null}function rie(e){return FI(e)===e}function Ty(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(s=>setTimeout(()=>{throw s}))}function Ji(){let e=[],s={addEventListener(a,n,r,i){return a.addEventListener(n,r,i),s.add(()=>a.removeEventListener(n,r,i))},requestAnimationFrame(...a){let n=requestAnimationFrame(...a);return s.add(()=>cancelAnimationFrame(n))},nextFrame(...a){return s.requestAnimationFrame(()=>s.requestAnimationFrame(...a))},setTimeout(...a){let n=setTimeout(...a);return s.add(()=>clearTimeout(n))},microTask(...a){let n={current:!0};return Ty(()=>{n.current&&a[0]()}),s.add(()=>{n.current=!1})},style(a,n,r){let i=a.style.getPropertyValue(n);return Object.assign(a.style,{[n]:r}),this.add(()=>{Object.assign(a.style,{[n]:i})})},group(a){let n=Ji();return a(n),this.add(()=>n.dispose())},add(a){return e.includes(a)||e.push(a),()=>{let n=e.indexOf(a);if(n>=0)for(let r of e.splice(n,1))r()}},dispose(){for(let a of e.splice(0))a()}};return s}function Ey(){let[e]=g.useState(Ji);return g.useEffect(()=>()=>e.dispose(),[e]),e}let Ja=(e,s)=>{Gr.isServer?g.useEffect(e,s):g.useLayoutEffect(e,s)};function jc(e){let s=g.useRef(e);return Ja(()=>{s.current=e},[e]),s}let ps=function(e){let s=jc(e);return at.useCallback((...a)=>s.current(...a),[s])};function Uh(e){return g.useMemo(()=>e,Object.values(e))}let iie=g.createContext(void 0);function lie(){return g.useContext(iie)}function IC(...e){return Array.from(new Set(e.flatMap(s=>typeof s=="string"?s.split(" "):[]))).filter(Boolean).join(" ")}function Yi(e,s,...a){if(e in s){let r=s[e];return typeof r=="function"?r(...a):r}let n=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(s).map(r=>`"${r}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Yi),n}var Zp=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Zp||{}),Pl=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Pl||{});function rr(){let e=cie();return g.useCallback(s=>oie({mergeRefs:e,...s}),[e])}function oie({ourProps:e,theirProps:s,slot:a,defaultTag:n,features:r,visible:i=!0,name:l,mergeRefs:c}){c=c??die;let d=BI(s,e);if(i)return jx(d,a,n,l,c);let m=r??0;if(m&2){let{static:f=!1,...h}=d;if(f)return jx(h,a,n,l,c)}if(m&1){let{unmount:f=!0,...h}=d;return Yi(f?0:1,{0(){return null},1(){return jx({...h,hidden:!0,style:{display:"none"}},a,n,l,c)}})}return jx(d,a,n,l,c)}function jx(e,s={},a,n,r){let{as:i=a,children:l,refName:c="ref",...d}=aw(e,["unmount","static"]),m=e.ref!==void 0?{[c]:e.ref}:{},f=typeof l=="function"?l(s):l;"className"in d&&d.className&&typeof d.className=="function"&&(d.className=d.className(s)),d["aria-labelledby"]&&d["aria-labelledby"]===d.id&&(d["aria-labelledby"]=void 0);let h={};if(s){let y=!1,N=[];for(let[w,p]of Object.entries(s))typeof p=="boolean"&&(y=!0),p===!0&&N.push(w.replace(/([A-Z])/g,v=>`-${v.toLowerCase()}`));if(y){h["data-headlessui-state"]=N.join(" ");for(let w of N)h[`data-${w}`]=""}}if(jf(i)&&(Object.keys(Ro(d)).length>0||Object.keys(Ro(h)).length>0))if(!g.isValidElement(f)||Array.isArray(f)&&f.length>1||mie(f)){if(Object.keys(Ro(d)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${n} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(Ro(d)).concat(Object.keys(Ro(h))).map(y=>`  - ${y}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(y=>`  - ${y}`).join(`
`)].join(`
`))}else{let y=f.props,N=y?.className,w=typeof N=="function"?(...C)=>IC(N(...C),d.className):IC(N,d.className),p=w?{className:w}:{},v=BI(f.props,Ro(aw(d,["ref"])));for(let C in h)C in v&&delete h[C];return g.cloneElement(f,Object.assign({},v,h,m,{ref:r(uie(f),m.ref)},p))}return g.createElement(i,Object.assign({},aw(d,["ref"]),!jf(i)&&m,!jf(i)&&h),f)}function cie(){let e=g.useRef([]),s=g.useCallback(a=>{for(let n of e.current)n!=null&&(typeof n=="function"?n(a):n.current=a)},[]);return(...a)=>{if(!a.every(n=>n==null))return e.current=a,s}}function die(...e){return e.every(s=>s==null)?void 0:s=>{for(let a of e)a!=null&&(typeof a=="function"?a(s):a.current=s)}}function BI(...e){if(e.length===0)return{};if(e.length===1)return e[0];let s={},a={};for(let n of e)for(let r in n)r.startsWith("on")&&typeof n[r]=="function"?(a[r]!=null||(a[r]=[]),a[r].push(n[r])):s[r]=n[r];if(s.disabled||s["aria-disabled"])for(let n in a)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(n)&&(a[n]=[r=>{var i;return(i=r?.preventDefault)==null?void 0:i.call(r)}]);for(let n in a)Object.assign(s,{[n](r,...i){let l=a[n];for(let c of l){if((r instanceof Event||r?.nativeEvent instanceof Event)&&r.defaultPrevented)return;c(r,...i)}}});return s}function ln(e){var s;return Object.assign(g.forwardRef(e),{displayName:(s=e.displayName)!=null?s:e.name})}function Ro(e){let s=Object.assign({},e);for(let a in s)s[a]===void 0&&delete s[a];return s}function aw(e,s=[]){let a=Object.assign({},e);for(let n of s)n in a&&delete a[n];return a}function uie(e){return at.version.split(".")[0]>="19"?e.props.ref:e.ref}function jf(e){return e===g.Fragment||e===Symbol.for("react.fragment")}function mie(e){return jf(e.type)}let fie="span";var Jp=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Jp||{});function hie(e,s){var a;let{features:n=1,...r}=e,i={ref:s,"aria-hidden":(n&2)===2?!0:(a=r["aria-hidden"])!=null?a:void 0,hidden:(n&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(n&4)===4&&(n&2)!==2&&{display:"none"}}};return rr()({ourProps:i,theirProps:r,slot:{},defaultTag:fie,name:"Hidden"})}let $C=ln(hie);function gie(e){return typeof e!="object"||e===null?!1:"nodeType"in e}function zl(e){return gie(e)&&"tagName"in e}function mc(e){return zl(e)&&"accessKey"in e}function Ol(e){return zl(e)&&"tabIndex"in e}function xie(e){return zl(e)&&"style"in e}function pie(e){return mc(e)&&e.nodeName==="IFRAME"}function yie(e){return mc(e)&&e.nodeName==="INPUT"}let HI=Symbol();function bie(e,s=!0){return Object.assign(e,{[HI]:s})}function ei(...e){let s=g.useRef(e);g.useEffect(()=>{s.current=e},[e]);let a=ps(n=>{for(let r of s.current)r!=null&&(typeof r=="function"?r(n):r.current=n)});return e.every(n=>n==null||n?.[HI])?void 0:a}let F2=g.createContext(null);F2.displayName="DescriptionContext";function GI(){let e=g.useContext(F2);if(e===null){let s=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(s,GI),s}return e}function vie(){let[e,s]=g.useState([]);return[e.length>0?e.join(" "):void 0,g.useMemo(()=>function(a){let n=ps(i=>(s(l=>[...l,i]),()=>s(l=>{let c=l.slice(),d=c.indexOf(i);return d!==-1&&c.splice(d,1),c}))),r=g.useMemo(()=>({register:n,slot:a.slot,name:a.name,props:a.props,value:a.value}),[n,a.slot,a.name,a.props,a.value]);return at.createElement(F2.Provider,{value:r},a.children)},[s])]}let Nie="p";function wie(e,s){let a=g.useId(),n=lie(),{id:r=`headlessui-description-${a}`,...i}=e,l=GI(),c=ei(s);Ja(()=>l.register(r),[r,l.register]);let d=Uh({...l.slot,disabled:n||!1}),m={ref:c,...l.props,id:r};return rr()({ourProps:m,theirProps:i,slot:d,defaultTag:Nie,name:l.name||"Description"})}let jie=ln(wie),Cie=Object.assign(jie,{});var VI=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(VI||{});let Sie=g.createContext(()=>{});function _ie({value:e,children:s}){return at.createElement(Sie.Provider,{value:e},s)}let WI=class extends Map{constructor(s){super(),this.factory=s}get(s){let a=super.get(s);return a===void 0&&(a=this.factory(s),this.set(s,a)),a}};var Tie=Object.defineProperty,Eie=(e,s,a)=>s in e?Tie(e,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[s]=a,Aie=(e,s,a)=>(Eie(e,s+"",a),a),YI=(e,s,a)=>{if(!s.has(e))throw TypeError("Cannot "+a)},Rn=(e,s,a)=>(YI(e,s,"read from private field"),a?a.call(e):s.get(e)),nw=(e,s,a)=>{if(s.has(e))throw TypeError("Cannot add the same private member more than once");s instanceof WeakSet?s.add(e):s.set(e,a)},pk=(e,s,a,n)=>(YI(e,s,"write to private field"),s.set(e,a),a),Lr,hf,gf;let Lie=class{constructor(s){nw(this,Lr,{}),nw(this,hf,new WI(()=>new Set)),nw(this,gf,new Set),Aie(this,"disposables",Ji()),pk(this,Lr,s),Gr.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return Rn(this,Lr)}subscribe(s,a){if(Gr.isServer)return()=>{};let n={selector:s,callback:a,current:s(Rn(this,Lr))};return Rn(this,gf).add(n),this.disposables.add(()=>{Rn(this,gf).delete(n)})}on(s,a){return Gr.isServer?()=>{}:(Rn(this,hf).get(s).add(a),this.disposables.add(()=>{Rn(this,hf).get(s).delete(a)}))}send(s){let a=this.reduce(Rn(this,Lr),s);if(a!==Rn(this,Lr)){pk(this,Lr,a);for(let n of Rn(this,gf)){let r=n.selector(Rn(this,Lr));QI(n.current,r)||(n.current=r,n.callback(r))}for(let n of Rn(this,hf).get(s.type))n(Rn(this,Lr),s)}}};Lr=new WeakMap,hf=new WeakMap,gf=new WeakMap;function QI(e,s){return Object.is(e,s)?!0:typeof e!="object"||e===null||typeof s!="object"||s===null?!1:Array.isArray(e)&&Array.isArray(s)?e.length!==s.length?!1:rw(e[Symbol.iterator](),s[Symbol.iterator]()):e instanceof Map&&s instanceof Map||e instanceof Set&&s instanceof Set?e.size!==s.size?!1:rw(e.entries(),s.entries()):yk(e)&&yk(s)?rw(Object.entries(e)[Symbol.iterator](),Object.entries(s)[Symbol.iterator]()):!1}function rw(e,s){do{let a=e.next(),n=s.next();if(a.done&&n.done)return!0;if(a.done||n.done||!Object.is(a.value,n.value))return!1}while(!0)}function yk(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let s=Object.getPrototypeOf(e);return s===null||Object.getPrototypeOf(s)===null}var kie=Object.defineProperty,Die=(e,s,a)=>s in e?kie(e,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[s]=a,bk=(e,s,a)=>(Die(e,typeof s!="symbol"?s+"":s,a),a),Mie=(e=>(e[e.Push=0]="Push",e[e.Pop=1]="Pop",e))(Mie||{});let Pie={0(e,s){let a=s.id,n=e.stack,r=e.stack.indexOf(a);if(r!==-1){let i=e.stack.slice();return i.splice(r,1),i.push(a),n=i,{...e,stack:n}}return{...e,stack:[...e.stack,a]}},1(e,s){let a=s.id,n=e.stack.indexOf(a);if(n===-1)return e;let r=e.stack.slice();return r.splice(n,1),{...e,stack:r}}},Oie=class qI extends Lie{constructor(){super(...arguments),bk(this,"actions",{push:s=>this.send({type:0,id:s}),pop:s=>this.send({type:1,id:s})}),bk(this,"selectors",{isTop:(s,a)=>s.stack[s.stack.length-1]===a,inStack:(s,a)=>s.stack.includes(a)})}static new(){return new qI({stack:[]})}reduce(s,a){return Yi(a.type,Pie,s,a)}};const XI=new WI(()=>Oie.new());var iw={exports:{}},lw={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vk;function Iie(){if(vk)return lw;vk=1;var e=cu();function s(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var a=typeof Object.is=="function"?Object.is:s,n=e.useSyncExternalStore,r=e.useRef,i=e.useEffect,l=e.useMemo,c=e.useDebugValue;return lw.useSyncExternalStoreWithSelector=function(d,m,f,h,y){var N=r(null);if(N.current===null){var w={hasValue:!1,value:null};N.current=w}else w=N.current;N=l(function(){function v(k){if(!C){if(C=!0,j=k,k=h(k),y!==void 0&&w.hasValue){var E=w.value;if(y(E,k))return _=E}return _=k}if(E=_,a(j,k))return E;var A=h(k);return y!==void 0&&y(E,A)?(j=k,E):(j=k,_=A)}var C=!1,j,_,T=f===void 0?null:f;return[function(){return v(m())},T===null?void 0:function(){return v(T())}]},[m,f,h,y]);var p=n(d,N[0],N[1]);return i(function(){w.hasValue=!0,w.value=p},[p]),c(p),p},lw}var Nk;function $ie(){return Nk||(Nk=1,iw.exports=Iie()),iw.exports}var Rie=$ie();function KI(e,s,a=QI){return Rie.useSyncExternalStoreWithSelector(ps(n=>e.subscribe(Uie,n)),ps(()=>e.state),ps(()=>e.state),ps(s),a)}function Uie(e){return e}function zh(e,s){let a=g.useId(),n=XI.get(s),[r,i]=KI(n,g.useCallback(l=>[n.selectors.isTop(l,a),n.selectors.inStack(l,a)],[n,a]));return Ja(()=>{if(e)return n.actions.push(a),()=>n.actions.pop(a)},[n,e,a]),e?i?r:!0:!1}let RC=new Map,Cf=new Map;function wk(e){var s;let a=(s=Cf.get(e))!=null?s:0;return Cf.set(e,a+1),a!==0?()=>jk(e):(RC.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>jk(e))}function jk(e){var s;let a=(s=Cf.get(e))!=null?s:1;if(a===1?Cf.delete(e):Cf.set(e,a-1),a!==1)return;let n=RC.get(e);n&&(n["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",n["aria-hidden"]),e.inert=n.inert,RC.delete(e))}function zie(e,{allowed:s,disallowed:a}={}){let n=zh(e,"inert-others");Ja(()=>{var r,i;if(!n)return;let l=Ji();for(let d of(r=a?.())!=null?r:[])d&&l.add(wk(d));let c=(i=s?.())!=null?i:[];for(let d of c){if(!d)continue;let m=Rh(d);if(!m)continue;let f=d.parentElement;for(;f&&f!==m.body;){for(let h of f.children)c.some(y=>h.contains(y))||l.add(wk(h));f=f.parentElement}}return l.dispose},[n,s,a])}function Fie(e,s,a){let n=jc(r=>{let i=r.getBoundingClientRect();i.x===0&&i.y===0&&i.width===0&&i.height===0&&a()});g.useEffect(()=>{if(!e)return;let r=s===null?null:mc(s)?s:s.current;if(!r)return;let i=Ji();if(typeof ResizeObserver<"u"){let l=new ResizeObserver(()=>n.current(r));l.observe(r),i.add(()=>l.disconnect())}if(typeof IntersectionObserver<"u"){let l=new IntersectionObserver(()=>n.current(r));l.observe(r),i.add(()=>l.disconnect())}return()=>i.dispose()},[s,n,e])}let e0=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","details>summary","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),Bie=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var ki=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(ki||{}),UC=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(UC||{}),Hie=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(Hie||{});function Gie(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(e0)).sort((s,a)=>Math.sign((s.tabIndex||Number.MAX_SAFE_INTEGER)-(a.tabIndex||Number.MAX_SAFE_INTEGER)))}function Vie(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Bie)).sort((s,a)=>Math.sign((s.tabIndex||Number.MAX_SAFE_INTEGER)-(a.tabIndex||Number.MAX_SAFE_INTEGER)))}var ZI=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(ZI||{});function Wie(e,s=0){var a;return e===((a=Rh(e))==null?void 0:a.body)?!1:Yi(s,{0(){return e.matches(e0)},1(){let n=e;for(;n!==null;){if(n.matches(e0))return!0;n=n.parentElement}return!1}})}var Yie=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(Yie||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Ii(e){e?.focus({preventScroll:!0})}let Qie=["textarea","input"].join(",");function qie(e){var s,a;return(a=(s=e?.matches)==null?void 0:s.call(e,Qie))!=null?a:!1}function Xie(e,s=a=>a){return e.slice().sort((a,n)=>{let r=s(a),i=s(n);if(r===null||i===null)return 0;let l=r.compareDocumentPosition(i);return l&Node.DOCUMENT_POSITION_FOLLOWING?-1:l&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Sf(e,s,{sorted:a=!0,relativeTo:n=null,skipElements:r=[]}={}){let i=Array.isArray(e)?e.length>0?OC(e[0]):document:OC(e),l=Array.isArray(e)?a?Xie(e):e:s&64?Vie(e):Gie(e);r.length>0&&l.length>1&&(l=l.filter(N=>!r.some(w=>w!=null&&"current"in w?w?.current===N:w===N))),n=n??i?.activeElement;let c=(()=>{if(s&5)return 1;if(s&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=(()=>{if(s&1)return 0;if(s&2)return Math.max(0,l.indexOf(n))-1;if(s&4)return Math.max(0,l.indexOf(n))+1;if(s&8)return l.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),m=s&32?{preventScroll:!0}:{},f=0,h=l.length,y;do{if(f>=h||f+h<=0)return 0;let N=d+f;if(s&16)N=(N+h)%h;else{if(N<0)return 3;if(N>=h)return 1}y=l[N],y?.focus(m),f+=c}while(y!==FI(y));return s&6&&qie(y)&&y.select(),2}function JI(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function Kie(){return/Android/gi.test(window.navigator.userAgent)}function Ck(){return JI()||Kie()}function Cx(e,s,a,n){let r=jc(a);g.useEffect(()=>{if(!e)return;function i(l){r.current(l)}return document.addEventListener(s,i,n),()=>document.removeEventListener(s,i,n)},[e,s,n])}function e$(e,s,a,n){let r=jc(a);g.useEffect(()=>{if(!e)return;function i(l){r.current(l)}return window.addEventListener(s,i,n),()=>window.removeEventListener(s,i,n)},[e,s,n])}const Sk=30;function Zie(e,s,a){let n=jc(a),r=g.useCallback(function(c,d){if(c.defaultPrevented)return;let m=d(c);if(m===null||!m.getRootNode().contains(m)||!m.isConnected)return;let f=(function h(y){return typeof y=="function"?h(y()):Array.isArray(y)||y instanceof Set?y:[y]})(s);for(let h of f)if(h!==null&&(h.contains(m)||c.composed&&c.composedPath().includes(h)))return;return!Wie(m,ZI.Loose)&&m.tabIndex!==-1&&c.preventDefault(),n.current(c,m)},[n,s]),i=g.useRef(null);Cx(e,"pointerdown",c=>{var d,m;Ck()||(i.current=((m=(d=c.composedPath)==null?void 0:d.call(c))==null?void 0:m[0])||c.target)},!0),Cx(e,"pointerup",c=>{if(Ck()||!i.current)return;let d=i.current;return i.current=null,r(c,()=>d)},!0);let l=g.useRef({x:0,y:0});Cx(e,"touchstart",c=>{l.current.x=c.touches[0].clientX,l.current.y=c.touches[0].clientY},!0),Cx(e,"touchend",c=>{let d={x:c.changedTouches[0].clientX,y:c.changedTouches[0].clientY};if(!(Math.abs(d.x-l.current.x)>=Sk||Math.abs(d.y-l.current.y)>=Sk))return r(c,()=>Ol(c.target)?c.target:null)},!0),e$(e,"blur",c=>r(c,()=>pie(window.document.activeElement)?window.document.activeElement:null),!0)}function B2(...e){return g.useMemo(()=>Rh(...e),[...e])}function t$(e,s,a,n){let r=jc(a);g.useEffect(()=>{e=e??window;function i(l){r.current(l)}return e.addEventListener(s,i,n),()=>e.removeEventListener(s,i,n)},[e,s,n])}function Jie(e){return g.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}function ele(e,s){let a=e(),n=new Set;return{getSnapshot(){return a},subscribe(r){return n.add(r),()=>n.delete(r)},dispatch(r,...i){let l=s[r].call(a,...i);l&&(a=l,n.forEach(c=>c()))}}}function tle(){let e;return{before({doc:s}){var a;let n=s.documentElement,r=(a=s.defaultView)!=null?a:window;e=Math.max(0,r.innerWidth-n.clientWidth)},after({doc:s,d:a}){let n=s.documentElement,r=Math.max(0,n.clientWidth-n.offsetWidth),i=Math.max(0,e-r);a.style(n,"paddingRight",`${i}px`)}}}function sle(){return JI()?{before({doc:e,d:s,meta:a}){function n(r){for(let i of a().containers)for(let l of i())if(l.contains(r))return!0;return!1}s.microTask(()=>{var r;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let c=Ji();c.style(e.documentElement,"scrollBehavior","auto"),s.add(()=>s.microTask(()=>c.dispose()))}let i=(r=window.scrollY)!=null?r:window.pageYOffset,l=null;s.addEventListener(e,"click",c=>{if(Ol(c.target))try{let d=c.target.closest("a");if(!d)return;let{hash:m}=new URL(d.href),f=e.querySelector(m);Ol(f)&&!n(f)&&(l=f)}catch{}},!0),s.group(c=>{s.addEventListener(e,"touchstart",d=>{if(c.dispose(),Ol(d.target)&&xie(d.target))if(n(d.target)){let m=d.target;for(;m.parentElement&&n(m.parentElement);)m=m.parentElement;c.style(m,"overscrollBehavior","contain")}else c.style(d.target,"touchAction","none")})}),s.addEventListener(e,"touchmove",c=>{if(Ol(c.target)){if(yie(c.target))return;if(n(c.target)){let d=c.target;for(;d.parentElement&&d.dataset.headlessuiPortal!==""&&!(d.scrollHeight>d.clientHeight||d.scrollWidth>d.clientWidth);)d=d.parentElement;d.dataset.headlessuiPortal===""&&c.preventDefault()}else c.preventDefault()}},{passive:!1}),s.add(()=>{var c;let d=(c=window.scrollY)!=null?c:window.pageYOffset;i!==d&&window.scrollTo(0,i),l&&l.isConnected&&(l.scrollIntoView({block:"nearest"}),l=null)})})}}:{}}function ale(){return{before({doc:e,d:s}){s.style(e.documentElement,"overflow","hidden")}}}function _k(e){let s={};for(let a of e)Object.assign(s,a(s));return s}let Qo=ele(()=>new Map,{PUSH(e,s){var a;let n=(a=this.get(e))!=null?a:{doc:e,count:0,d:Ji(),meta:new Set,computedMeta:{}};return n.count++,n.meta.add(s),n.computedMeta=_k(n.meta),this.set(e,n),this},POP(e,s){let a=this.get(e);return a&&(a.count--,a.meta.delete(s),a.computedMeta=_k(a.meta)),this},SCROLL_PREVENT(e){let s={doc:e.doc,d:e.d,meta(){return e.computedMeta}},a=[sle(),tle(),ale()];a.forEach(({before:n})=>n?.(s)),a.forEach(({after:n})=>n?.(s))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});Qo.subscribe(()=>{let e=Qo.getSnapshot(),s=new Map;for(let[a]of e)s.set(a,a.documentElement.style.overflow);for(let a of e.values()){let n=s.get(a.doc)==="hidden",r=a.count!==0;(r&&!n||!r&&n)&&Qo.dispatch(a.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",a),a.count===0&&Qo.dispatch("TEARDOWN",a)}});function nle(e,s,a=()=>({containers:[]})){let n=Jie(Qo),r=s?n.get(s):void 0,i=r?r.count>0:!1;return Ja(()=>{if(!(!s||!e))return Qo.dispatch("PUSH",s,a),()=>Qo.dispatch("POP",s,a)},[e,s]),i}function rle(e,s,a=()=>[document.body]){let n=zh(e,"scroll-lock");nle(n,s,r=>{var i;return{containers:[...(i=r.containers)!=null?i:[],a]}})}function ile(e=0){let[s,a]=g.useState(e),n=g.useCallback(d=>a(d),[]),r=g.useCallback(d=>a(m=>m|d),[]),i=g.useCallback(d=>(s&d)===d,[s]),l=g.useCallback(d=>a(m=>m&~d),[]),c=g.useCallback(d=>a(m=>m^d),[]);return{flags:s,setFlag:n,addFlag:r,hasFlag:i,removeFlag:l,toggleFlag:c}}var lle={},Tk,Ek;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((Tk=process==null?void 0:lle)==null?void 0:Tk.NODE_ENV)==="test"&&typeof((Ek=Element?.prototype)==null?void 0:Ek.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var ole=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(ole||{});function cle(e){let s={};for(let a in e)e[a]===!0&&(s[`data-${a}`]="");return s}function dle(e,s,a,n){let[r,i]=g.useState(a),{hasFlag:l,addFlag:c,removeFlag:d}=ile(e&&r?3:0),m=g.useRef(!1),f=g.useRef(!1),h=Ey();return Ja(()=>{var y;if(e){if(a&&i(!0),!s){a&&c(3);return}return(y=n?.start)==null||y.call(n,a),ule(s,{inFlight:m,prepare(){f.current?f.current=!1:f.current=m.current,m.current=!0,!f.current&&(a?(c(3),d(4)):(c(4),d(2)))},run(){f.current?a?(d(3),c(4)):(d(4),c(3)):a?d(1):c(1)},done(){var N;f.current&&hle(s)||(m.current=!1,d(7),a||i(!1),(N=n?.end)==null||N.call(n,a))}})}},[e,a,s,h]),e?[r,{closed:l(1),enter:l(2),leave:l(4),transition:l(2)||l(4)}]:[a,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function ule(e,{prepare:s,run:a,done:n,inFlight:r}){let i=Ji();return fle(e,{prepare:s,inFlight:r}),i.nextFrame(()=>{a(),i.requestAnimationFrame(()=>{i.add(mle(e,n))})}),i.dispose}function mle(e,s){var a,n;let r=Ji();if(!e)return r.dispose;let i=!1;r.add(()=>{i=!0});let l=(n=(a=e.getAnimations)==null?void 0:a.call(e).filter(c=>c instanceof CSSTransition))!=null?n:[];return l.length===0?(s(),r.dispose):(Promise.allSettled(l.map(c=>c.finished)).then(()=>{i||s()}),r.dispose)}function fle(e,{inFlight:s,prepare:a}){if(s!=null&&s.current){a();return}let n=e.style.transition;e.style.transition="none",a(),e.offsetHeight,e.style.transition=n}function hle(e){var s,a;return((a=(s=e.getAnimations)==null?void 0:s.call(e))!=null?a:[]).some(n=>n instanceof CSSTransition&&n.playState!=="finished")}function H2(e,s){let a=g.useRef([]),n=ps(e);g.useEffect(()=>{let r=[...a.current];for(let[i,l]of s.entries())if(a.current[i]!==l){let c=n(s,r);return a.current=s,c}},[n,...s])}let Ay=g.createContext(null);Ay.displayName="OpenClosedContext";var xr=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(xr||{});function Ly(){return g.useContext(Ay)}function gle({value:e,children:s}){return at.createElement(Ay.Provider,{value:e},s)}function xle({children:e}){return at.createElement(Ay.Provider,{value:null},e)}function ple(e){function s(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",s))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",s),s())}let kl=[];ple(()=>{function e(s){if(!Ol(s.target)||s.target===document.body||kl[0]===s.target)return;let a=s.target;a=a.closest(e0),kl.unshift(a??s.target),kl=kl.filter(n=>n!=null&&n.isConnected),kl.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function s$(e){let s=ps(e),a=g.useRef(!1);g.useEffect(()=>(a.current=!1,()=>{a.current=!0,Ty(()=>{a.current&&s()})}),[s])}let a$=g.createContext(!1);function yle(){return g.useContext(a$)}function Ak(e){return at.createElement(a$.Provider,{value:e.force},e.children)}function ble(e){let s=yle(),a=g.useContext(r$),[n,r]=g.useState(()=>{var i;if(!s&&a!==null)return(i=a.current)!=null?i:null;if(Gr.isServer)return null;let l=e?.getElementById("headlessui-portal-root");if(l)return l;if(e===null)return null;let c=e.createElement("div");return c.setAttribute("id","headlessui-portal-root"),e.body.appendChild(c)});return g.useEffect(()=>{n!==null&&(e!=null&&e.body.contains(n)||e==null||e.body.appendChild(n))},[n,e]),g.useEffect(()=>{s||a!==null&&r(a.current)},[a,r,s]),n}let n$=g.Fragment,vle=ln(function(e,s){let{ownerDocument:a=null,...n}=e,r=g.useRef(null),i=ei(bie(y=>{r.current=y}),s),l=B2(r.current),c=a??l,d=ble(c),m=g.useContext(zC),f=Ey(),h=rr();return s$(()=>{var y;d&&d.childNodes.length<=0&&((y=d.parentElement)==null||y.removeChild(d))}),d?r1.createPortal(at.createElement("div",{"data-headlessui-portal":"",ref:y=>{f.dispose(),m&&y&&f.add(m.register(y))}},h({ourProps:{ref:i},theirProps:n,slot:{},defaultTag:n$,name:"Portal"})),d):null});function Nle(e,s){let a=ei(s),{enabled:n=!0,ownerDocument:r,...i}=e,l=rr();return n?at.createElement(vle,{...i,ownerDocument:r,ref:a}):l({ourProps:{ref:a},theirProps:i,slot:{},defaultTag:n$,name:"Portal"})}let wle=g.Fragment,r$=g.createContext(null);function jle(e,s){let{target:a,...n}=e,r={ref:ei(s)},i=rr();return at.createElement(r$.Provider,{value:a},i({ourProps:r,theirProps:n,defaultTag:wle,name:"Popover.Group"}))}let zC=g.createContext(null);function Cle(){let e=g.useContext(zC),s=g.useRef([]),a=ps(i=>(s.current.push(i),e&&e.register(i),()=>n(i))),n=ps(i=>{let l=s.current.indexOf(i);l!==-1&&s.current.splice(l,1),e&&e.unregister(i)}),r=g.useMemo(()=>({register:a,unregister:n,portals:s}),[a,n,s]);return[s,g.useMemo(()=>function({children:i}){return at.createElement(zC.Provider,{value:r},i)},[r])]}let Sle=ln(Nle),i$=ln(jle),_le=Object.assign(Sle,{Group:i$});function Tle(e,s=typeof document<"u"?document.defaultView:null,a){let n=zh(e,"escape");t$(s,"keydown",r=>{n&&(r.defaultPrevented||r.key===VI.Escape&&a(r))})}function Ele(){var e;let[s]=g.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[a,n]=g.useState((e=s?.matches)!=null?e:!1);return Ja(()=>{if(!s)return;function r(i){n(i.matches)}return s.addEventListener("change",r),()=>s.removeEventListener("change",r)},[s]),a}function Ale({defaultContainers:e=[],portals:s,mainTreeNode:a}={}){let n=ps(()=>{var r,i;let l=Rh(a),c=[];for(let d of e)d!==null&&(zl(d)?c.push(d):"current"in d&&zl(d.current)&&c.push(d.current));if(s!=null&&s.current)for(let d of s.current)c.push(d);for(let d of(r=l?.querySelectorAll("html > *, body > *"))!=null?r:[])d!==document.body&&d!==document.head&&zl(d)&&d.id!=="headlessui-portal-root"&&(a&&(d.contains(a)||d.contains((i=a?.getRootNode())==null?void 0:i.host))||c.some(m=>d.contains(m))||c.push(d));return c});return{resolveContainers:n,contains:ps(r=>n().some(i=>i.contains(r)))}}let l$=g.createContext(null);function Lk({children:e,node:s}){let[a,n]=g.useState(null),r=o$(s??a);return at.createElement(l$.Provider,{value:r},e,r===null&&at.createElement($C,{features:Jp.Hidden,ref:i=>{var l,c;if(i){for(let d of(c=(l=Rh(i))==null?void 0:l.querySelectorAll("html > *, body > *"))!=null?c:[])if(d!==document.body&&d!==document.head&&zl(d)&&d!=null&&d.contains(i)){n(d);break}}}}))}function o$(e=null){var s;return(s=g.useContext(l$))!=null?s:e}function Lle(){let e=typeof document>"u";return"useSyncExternalStore"in Hd?(s=>s.useSyncExternalStore)(Hd)(()=>()=>{},()=>!1,()=>!e):!1}function ky(){let e=Lle(),[s,a]=g.useState(Gr.isHandoffComplete);return s&&Gr.isHandoffComplete===!1&&a(!1),g.useEffect(()=>{s!==!0&&a(!0)},[s]),g.useEffect(()=>Gr.handoff(),[]),e?!1:s}function G2(){let e=g.useRef(!1);return Ja(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var xf=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(xf||{});function kle(){let e=g.useRef(0);return e$(!0,"keydown",s=>{s.key==="Tab"&&(e.current=s.shiftKey?1:0)},!0),e}function c$(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let s=new Set;for(let a of e.current)zl(a.current)&&s.add(a.current);return s}let Dle="div";var Bo=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(Bo||{});function Mle(e,s){let a=g.useRef(null),n=ei(a,s),{initialFocus:r,initialFocusFallback:i,containers:l,features:c=15,...d}=e;ky()||(c=0);let m=B2(a.current);$le(c,{ownerDocument:m});let f=Rle(c,{ownerDocument:m,container:a,initialFocus:r,initialFocusFallback:i});Ule(c,{ownerDocument:m,container:a,containers:l,previousActiveElement:f});let h=kle(),y=ps(j=>{if(!mc(a.current))return;let _=a.current;(T=>T())(()=>{Yi(h.current,{[xf.Forwards]:()=>{Sf(_,ki.First,{skipElements:[j.relatedTarget,i]})},[xf.Backwards]:()=>{Sf(_,ki.Last,{skipElements:[j.relatedTarget,i]})}})})}),N=zh(!!(c&2),"focus-trap#tab-lock"),w=Ey(),p=g.useRef(!1),v={ref:n,onKeyDown(j){j.key=="Tab"&&(p.current=!0,w.requestAnimationFrame(()=>{p.current=!1}))},onBlur(j){if(!(c&4))return;let _=c$(l);mc(a.current)&&_.add(a.current);let T=j.relatedTarget;Ol(T)&&T.dataset.headlessuiFocusGuard!=="true"&&(d$(_,T)||(p.current?Sf(a.current,Yi(h.current,{[xf.Forwards]:()=>ki.Next,[xf.Backwards]:()=>ki.Previous})|ki.WrapAround,{relativeTo:j.target}):Ol(j.target)&&Ii(j.target)))}},C=rr();return at.createElement(at.Fragment,null,N&&at.createElement($C,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:y,features:Jp.Focusable}),C({ourProps:v,theirProps:d,defaultTag:Dle,name:"FocusTrap"}),N&&at.createElement($C,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:y,features:Jp.Focusable}))}let Ple=ln(Mle),Ole=Object.assign(Ple,{features:Bo});function Ile(e=!0){let s=g.useRef(kl.slice());return H2(([a],[n])=>{n===!0&&a===!1&&Ty(()=>{s.current.splice(0)}),n===!1&&a===!0&&(s.current=kl.slice())},[e,kl,s]),ps(()=>{var a;return(a=s.current.find(n=>n!=null&&n.isConnected))!=null?a:null})}function $le(e,{ownerDocument:s}){let a=!!(e&8),n=Ile(a);H2(()=>{a||rie(s?.body)&&Ii(n())},[a]),s$(()=>{a&&Ii(n())})}function Rle(e,{ownerDocument:s,container:a,initialFocus:n,initialFocusFallback:r}){let i=g.useRef(null),l=zh(!!(e&1),"focus-trap#initial-focus"),c=G2();return H2(()=>{if(e===0)return;if(!l){r!=null&&r.current&&Ii(r.current);return}let d=a.current;d&&Ty(()=>{if(!c.current)return;let m=s?.activeElement;if(n!=null&&n.current){if(n?.current===m){i.current=m;return}}else if(d.contains(m)){i.current=m;return}if(n!=null&&n.current)Ii(n.current);else{if(e&16){if(Sf(d,ki.First|ki.AutoFocus)!==UC.Error)return}else if(Sf(d,ki.First)!==UC.Error)return;if(r!=null&&r.current&&(Ii(r.current),s?.activeElement===r.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}i.current=s?.activeElement})},[r,l,e]),i}function Ule(e,{ownerDocument:s,container:a,containers:n,previousActiveElement:r}){let i=G2(),l=!!(e&4);t$(s?.defaultView,"focus",c=>{if(!l||!i.current)return;let d=c$(n);mc(a.current)&&d.add(a.current);let m=r.current;if(!m)return;let f=c.target;mc(f)?d$(d,f)?(r.current=f,Ii(f)):(c.preventDefault(),c.stopPropagation(),Ii(m)):Ii(r.current)},!0)}function d$(e,s){for(let a of e)if(a.contains(s))return!0;return!1}function u$(e){var s;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||!jf((s=e.as)!=null?s:f$)||at.Children.count(e.children)===1}let Dy=g.createContext(null);Dy.displayName="TransitionContext";var zle=(e=>(e.Visible="visible",e.Hidden="hidden",e))(zle||{});function Fle(){let e=g.useContext(Dy);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function Ble(){let e=g.useContext(My);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let My=g.createContext(null);My.displayName="NestingContext";function Py(e){return"children"in e?Py(e.children):e.current.filter(({el:s})=>s.current!==null).filter(({state:s})=>s==="visible").length>0}function m$(e,s){let a=jc(e),n=g.useRef([]),r=G2(),i=Ey(),l=ps((N,w=Pl.Hidden)=>{let p=n.current.findIndex(({el:v})=>v===N);p!==-1&&(Yi(w,{[Pl.Unmount](){n.current.splice(p,1)},[Pl.Hidden](){n.current[p].state="hidden"}}),i.microTask(()=>{var v;!Py(n)&&r.current&&((v=a.current)==null||v.call(a))}))}),c=ps(N=>{let w=n.current.find(({el:p})=>p===N);return w?w.state!=="visible"&&(w.state="visible"):n.current.push({el:N,state:"visible"}),()=>l(N,Pl.Unmount)}),d=g.useRef([]),m=g.useRef(Promise.resolve()),f=g.useRef({enter:[],leave:[]}),h=ps((N,w,p)=>{d.current.splice(0),s&&(s.chains.current[w]=s.chains.current[w].filter(([v])=>v!==N)),s?.chains.current[w].push([N,new Promise(v=>{d.current.push(v)})]),s?.chains.current[w].push([N,new Promise(v=>{Promise.all(f.current[w].map(([C,j])=>j)).then(()=>v())})]),w==="enter"?m.current=m.current.then(()=>s?.wait.current).then(()=>p(w)):p(w)}),y=ps((N,w,p)=>{Promise.all(f.current[w].splice(0).map(([v,C])=>C)).then(()=>{var v;(v=d.current.shift())==null||v()}).then(()=>p(w))});return g.useMemo(()=>({children:n,register:c,unregister:l,onStart:h,onStop:y,wait:m,chains:f}),[c,l,n,h,y,f,m])}let f$=g.Fragment,h$=Zp.RenderStrategy;function Hle(e,s){var a,n;let{transition:r=!0,beforeEnter:i,afterEnter:l,beforeLeave:c,afterLeave:d,enter:m,enterFrom:f,enterTo:h,entered:y,leave:N,leaveFrom:w,leaveTo:p,...v}=e,[C,j]=g.useState(null),_=g.useRef(null),T=u$(e),k=ei(...T?[_,s,j]:s===null?[]:[s]),E=(a=v.unmount)==null||a?Pl.Unmount:Pl.Hidden,{show:A,appear:U,initial:B}=Fle(),[X,$]=g.useState(A?"visible":"hidden"),O=Ble(),{register:G,unregister:K}=O;Ja(()=>G(_),[G,_]),Ja(()=>{if(E===Pl.Hidden&&_.current){if(A&&X!=="visible"){$("visible");return}return Yi(X,{hidden:()=>K(_),visible:()=>G(_)})}},[X,_,G,K,A,E]);let ae=ky();Ja(()=>{if(T&&ae&&X==="visible"&&_.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[_,X,ae,T]);let R=B&&!U,Z=U&&A&&B,te=g.useRef(!1),ge=m$(()=>{te.current||($("hidden"),K(_))},O),le=ps(Me=>{te.current=!0;let ke=Me?"enter":"leave";ge.onStart(_,ke,F=>{F==="enter"?i?.():F==="leave"&&c?.()})}),W=ps(Me=>{let ke=Me?"enter":"leave";te.current=!1,ge.onStop(_,ke,F=>{F==="enter"?l?.():F==="leave"&&d?.()}),ke==="leave"&&!Py(ge)&&($("hidden"),K(_))});g.useEffect(()=>{T&&r||(le(A),W(A))},[A,T,r]);let ee=!(!r||!T||!ae||R),[,J]=dle(ee,C,A,{start:le,end:W}),he=Ro({ref:k,className:((n=IC(v.className,Z&&m,Z&&f,J.enter&&m,J.enter&&J.closed&&f,J.enter&&!J.closed&&h,J.leave&&N,J.leave&&!J.closed&&w,J.leave&&J.closed&&p,!J.transition&&A&&y))==null?void 0:n.trim())||void 0,...cle(J)}),be=0;X==="visible"&&(be|=xr.Open),X==="hidden"&&(be|=xr.Closed),A&&X==="hidden"&&(be|=xr.Opening),!A&&X==="visible"&&(be|=xr.Closing);let Le=rr();return at.createElement(My.Provider,{value:ge},at.createElement(gle,{value:be},Le({ourProps:he,theirProps:v,defaultTag:f$,features:h$,visible:X==="visible",name:"Transition.Child"})))}function Gle(e,s){let{show:a,appear:n=!1,unmount:r=!0,...i}=e,l=g.useRef(null),c=u$(e),d=ei(...c?[l,s]:s===null?[]:[s]);ky();let m=Ly();if(a===void 0&&m!==null&&(a=(m&xr.Open)===xr.Open),a===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[f,h]=g.useState(a?"visible":"hidden"),y=m$(()=>{a||h("hidden")}),[N,w]=g.useState(!0),p=g.useRef([a]);Ja(()=>{N!==!1&&p.current[p.current.length-1]!==a&&(p.current.push(a),w(!1))},[p,a]);let v=g.useMemo(()=>({show:a,appear:n,initial:N}),[a,n,N]);Ja(()=>{a?h("visible"):!Py(y)&&l.current!==null&&h("hidden")},[a,y]);let C={unmount:r},j=ps(()=>{var k;N&&w(!1),(k=e.beforeEnter)==null||k.call(e)}),_=ps(()=>{var k;N&&w(!1),(k=e.beforeLeave)==null||k.call(e)}),T=rr();return at.createElement(My.Provider,{value:y},at.createElement(Dy.Provider,{value:v},T({ourProps:{...C,as:g.Fragment,children:at.createElement(g$,{ref:d,...C,...i,beforeEnter:j,beforeLeave:_})},theirProps:{},defaultTag:g.Fragment,features:h$,visible:f==="visible",name:"Transition"})))}function Vle(e,s){let a=g.useContext(Dy)!==null,n=Ly()!==null;return at.createElement(at.Fragment,null,!a&&n?at.createElement(FC,{ref:s,...e}):at.createElement(g$,{ref:s,...e}))}let FC=ln(Gle),g$=ln(Hle),V2=ln(Vle),ja=Object.assign(FC,{Child:V2,Root:FC});var Wle=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Wle||{}),Yle=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(Yle||{});let Qle={0(e,s){return e.titleId===s.id?e:{...e,titleId:s.id}}},W2=g.createContext(null);W2.displayName="DialogContext";function Oy(e){let s=g.useContext(W2);if(s===null){let a=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,Oy),a}return s}function qle(e,s){return Yi(s.type,Qle,e,s)}let kk=ln(function(e,s){let a=g.useId(),{id:n=`headlessui-dialog-${a}`,open:r,onClose:i,initialFocus:l,role:c="dialog",autoFocus:d=!0,__demoMode:m=!1,unmount:f=!1,...h}=e,y=g.useRef(!1);c=(function(){return c==="dialog"||c==="alertdialog"?c:(y.current||(y.current=!0,console.warn(`Invalid role [${c}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")})();let N=Ly();r===void 0&&N!==null&&(r=(N&xr.Open)===xr.Open);let w=g.useRef(null),p=ei(w,s),v=B2(w.current),C=r?0:1,[j,_]=g.useReducer(qle,{titleId:null,descriptionId:null,panelRef:g.createRef()}),T=ps(()=>i(!1)),k=ps(J=>_({type:0,id:J})),E=ky()?C===0:!1,[A,U]=Cle(),B={get current(){var J;return(J=j.panelRef.current)!=null?J:w.current}},X=o$(),{resolveContainers:$}=Ale({mainTreeNode:X,portals:A,defaultContainers:[B]}),O=N!==null?(N&xr.Closing)===xr.Closing:!1;zie(m||O?!1:E,{allowed:ps(()=>{var J,he;return[(he=(J=w.current)==null?void 0:J.closest("[data-headlessui-portal]"))!=null?he:null]}),disallowed:ps(()=>{var J;return[(J=X?.closest("body > *:not(#headlessui-portal-root)"))!=null?J:null]})});let G=XI.get(null);Ja(()=>{if(E)return G.actions.push(n),()=>G.actions.pop(n)},[G,n,E]);let K=KI(G,g.useCallback(J=>G.selectors.isTop(J,n),[G,n]));Zie(K,$,J=>{J.preventDefault(),T()}),Tle(K,v?.defaultView,J=>{J.preventDefault(),J.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),T()}),rle(m||O?!1:E,v,$),Fie(E,w,T);let[ae,R]=vie(),Z=g.useMemo(()=>[{dialogState:C,close:T,setTitleId:k,unmount:f},j],[C,T,k,f,j]),te=Uh({open:C===0}),ge={ref:p,id:n,role:c,tabIndex:-1,"aria-modal":m?void 0:C===0?!0:void 0,"aria-labelledby":j.titleId,"aria-describedby":ae,unmount:f},le=!Ele(),W=Bo.None;E&&!m&&(W|=Bo.RestoreFocus,W|=Bo.TabLock,d&&(W|=Bo.AutoFocus),le&&(W|=Bo.InitialFocus));let ee=rr();return at.createElement(xle,null,at.createElement(Ak,{force:!0},at.createElement(_le,null,at.createElement(W2.Provider,{value:Z},at.createElement(i$,{target:w},at.createElement(Ak,{force:!1},at.createElement(R,{slot:te},at.createElement(U,null,at.createElement(Ole,{initialFocus:l,initialFocusFallback:w,containers:$,features:W},at.createElement(_ie,{value:T},ee({ourProps:ge,theirProps:h,slot:te,defaultTag:Xle,features:Kle,visible:C===0,name:"Dialog"})))))))))))}),Xle="div",Kle=Zp.RenderStrategy|Zp.Static;function Zle(e,s){let{transition:a=!1,open:n,...r}=e,i=Ly(),l=e.hasOwnProperty("open")||i!==null,c=e.hasOwnProperty("onClose");if(!l&&!c)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!l)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!c)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!i&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(n!==void 0||a)&&!r.static?at.createElement(Lk,null,at.createElement(ja,{show:n,transition:a,unmount:r.unmount},at.createElement(kk,{ref:s,...r}))):at.createElement(Lk,null,at.createElement(kk,{ref:s,open:n,...r}))}let Jle="div";function eoe(e,s){let a=g.useId(),{id:n=`headlessui-dialog-panel-${a}`,transition:r=!1,...i}=e,[{dialogState:l,unmount:c},d]=Oy("Dialog.Panel"),m=ei(s,d.panelRef),f=Uh({open:l===0}),h=ps(v=>{v.stopPropagation()}),y={ref:m,id:n,onClick:h},N=r?V2:g.Fragment,w=r?{unmount:c}:{},p=rr();return at.createElement(N,{...w},p({ourProps:y,theirProps:i,slot:f,defaultTag:Jle,name:"Dialog.Panel"}))}let toe="div";function soe(e,s){let{transition:a=!1,...n}=e,[{dialogState:r,unmount:i}]=Oy("Dialog.Backdrop"),l=Uh({open:r===0}),c={ref:s,"aria-hidden":!0},d=a?V2:g.Fragment,m=a?{unmount:i}:{},f=rr();return at.createElement(d,{...m},f({ourProps:c,theirProps:n,slot:l,defaultTag:toe,name:"Dialog.Backdrop"}))}let aoe="h2";function noe(e,s){let a=g.useId(),{id:n=`headlessui-dialog-title-${a}`,...r}=e,[{dialogState:i,setTitleId:l}]=Oy("Dialog.Title"),c=ei(s);g.useEffect(()=>(l(n),()=>l(null)),[n,l]);let d=Uh({open:i===0}),m={ref:c,id:n};return rr()({ourProps:m,theirProps:r,slot:d,defaultTag:aoe,name:"Dialog.Title"})}let roe=ln(Zle),ioe=ln(eoe);ln(soe);let loe=ln(noe),Ai=Object.assign(roe,{Panel:ioe,Title:loe,Description:Cie});function Fh({isOpen:e,onClose:s,onSave:a,onEdit:n,setFormData:r,formData:i,isEditing:l=!1,viewMode:c=!1,users:d=[],onDelete:m}){const[f,h]=g.useState([]),[y,N]=g.useState([]),w=C=>{const{name:j,value:_}=C.target;r(T=>{const k={...T,[j]:_};return j==="relatedType1"&&(k.relatedTo1="",_==="Lead"?(k.relatedType2=null,k.relatedTo2=null,N([])):_==="Account"&&(k.relatedType2="Contact")),j==="relatedType2"&&(k.relatedTo2=""),k})};g.useEffect(()=>{if(!e)return;(async()=>{try{h([]);let j;i.relatedType1==="Lead"?j=await se.get("/leads/admin/getLeads"):i.relatedType1==="Account"&&(j=await se.get("/accounts/admin/fetch-all"));let _=[];if(j&&Array.isArray(j.data)&&(_=j.data),l&&i.relatedTo1)try{let T;i.relatedType1==="Lead"?T=await se.get(`/leads/get/${i.relatedTo1}`):i.relatedType1==="Account"&&(T=await se.get(`/accounts/get/${i.relatedTo1}`)),T&&T.data&&(_.some(E=>String(E.id)===String(i.relatedTo1))||(_=[T.data,..._]))}catch(T){console.error("Error fetching specific related item:",T)}h(_)}catch(j){console.error("Error fetching related 1 data:",j),h([])}})()},[i.relatedType1,e,l,i.relatedTo1]),g.useEffect(()=>{if(!e||c)return;(async()=>{try{if(N([]),i.relatedType1==="Account"&&i.relatedTo1){let j;i.relatedType2==="Contact"?j=await se.get(`/contacts/from-acc/${i.relatedTo1}`):i.relatedType2==="Deal"&&(j=await se.get(`/deals/from-acc/${i.relatedTo1}`));let _=[];if(j&&Array.isArray(j.data)&&(_=j.data),l&&i.relatedTo2)try{let T;i.relatedType2==="Contact"?T=await se.get(`/contacts/get/${i.relatedTo2}`):i.relatedType2==="Deal"&&(T=await se.get(`/deals/get/${i.relatedTo2}`)),T&&T.data&&(_.some(E=>String(E.id)===String(i.relatedTo2))||(_=[T.data,..._]))}catch(T){console.error("Error fetching specific related item:",T)}N(_)}}catch(j){console.error("Error fetching related 2 data:",j),N([])}})()},[i.relatedType1,i.relatedTo1,i.relatedType2,i.relatedTo2,e,c,l]);const p=C=>{C.preventDefault(),a?.(i)},v=c?"Task Details":l?"Edit Task":"Create Task";return t.jsx(ja,{appear:!0,show:e,as:g.Fragment,children:t.jsxs(Ai,{as:"div",className:"relative z-50",onClose:s,children:[t.jsx(ja.Child,{as:g.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:t.jsx("div",{className:"fixed inset-0 bg-black/40"})}),t.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 overflow-y-auto",children:t.jsx("div",{className:"flex min-h-full items-center justify-center text-center",children:t.jsx(ja.Child,{as:g.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:t.jsx(Ai.Panel,{className:"w-full max-w-full sm:max-w-3xl text-left align-middle transform transition-all",children:t.jsxs("div",{className:"bg-white w-full min-w-sm md:min-w-lg rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] flex flex-col hide-scrollbar",children:[t.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:t.jsx(es,{size:25})}),t.jsx("h3",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:v}),c&&t.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",onClick:s,children:t.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[92vh] overflow-y-auto hide-scrollbar font-manrope relative",onClick:C=>C.stopPropagation(),children:[t.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-4 rounded-t-xl",children:[t.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Tasks"}),t.jsx("button",{onClick:s,className:"text-gray-500 hover:text-white transition cursor-pointer",children:t.jsx(es,{size:25})})]}),t.jsx("div",{className:"p-6 lg:p-4",children:t.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[t.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:t.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:i.subject||"No Title"})}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[t.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 cursor-pointer",onClick:()=>{r&&r(i),typeof n=="function"&&n()},children:"Edit"}),t.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400 cursor-pointer",onClick:()=>m(i),children:[t.jsx(Nt,{className:"mr-2"}),"Delete"]})]})]})}),t.jsx("div",{className:"border-b border-gray-200 my-5"}),t.jsxs("div",{className:"p-4 lg:p-6",children:[t.jsx("div",{className:"flex w-full bg-[#6A727D] text-white overflow-x-auto",children:t.jsx("button",{className:"flex-1 min-w-[90px] px-4 py-2 lg:text-lg text-sm font-medium text-center text-white",children:"Overview"})}),t.jsx("div",{className:"bg-white rounded-xl shadow-sm sm:p-6 lg:p-5 border border-gray-200 text-sm text-gray-700",children:t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-2 gap-4 sm:gap-6",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Title:"}),t.jsx("p",{children:i.subject||""})]}),i.relatedType1Text&&i.relatedTo1Text&&t.jsxs("div",{children:[t.jsxs("p",{className:"font-semibold",children:[i.relatedType1Text,":"]}),t.jsx("p",{children:i.relatedTo1Text})]}),i.relatedType2Text&&i.relatedTo2Text&&t.jsxs("div",{children:[t.jsxs("p",{className:"font-semibold",children:[i.relatedType2,":"]}),t.jsx("p",{children:i.relatedTo2Text})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Priority:"}),t.jsx("p",{children:i.priority||""})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Status:"}),t.jsx("p",{children:i.status||""})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Due Date:"}),t.jsx("p",{children:i.dueDate||""})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("p",{className:"font-semibold",children:"Description:"}),t.jsx("p",{className:"whitespace-pre-wrap",children:i.description||""})]})]})})]})]})}),!c&&t.jsxs("form",{onSubmit:p,className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm flex-1",children:[t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Title"}),t.jsx("input",{type:"text",name:"subject",value:i.subject,onChange:w,required:!0,disabled:c,placeholder:"Enter task title",className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${c?"bg-gray-50 cursor-not-allowed":""}`})]}),t.jsxs("div",{className:"w-full flex flex-col",children:[t.jsxs("select",{name:"relatedType1",onChange:w,value:i.relatedType1,disabled:c||l,className:`w-23 rounded-md text-sm focus:ring-2 focus:ring-blue-400 outline-none mb-2 disabled:text-gray-400 ${c||l?"cursor-not-allowed":""}`,children:[t.jsx("option",{value:"Lead",children:"Lead"}),t.jsx("option",{value:"Account",children:"Account"})]}),t.jsx(ow,{disabled:l,items:Array.isArray(f)?f:[],value:i.relatedTo1??"",placeholder:`Search ${i.relatedType1||"here"}...`,getLabel:C=>i.relatedType1==="Lead"?C.title:C.name??"",onChange:C=>r(j=>({...j,relatedTo1:C}))})]}),t.jsxs("div",{className:"w-full flex flex-col",children:[t.jsxs("select",{name:"relatedType2",onChange:w,value:i.relatedType2??"Contact",className:"w-23 rounded-md text-sm focus:ring-2 focus:ring-blue-400 outline-none mb-2 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:c||i.relatedType1==="Lead"||l,children:[t.jsx("option",{value:"Contact",children:"Contact"}),t.jsx("option",{value:"Deal",children:"Deal"})]}),t.jsx(ow,{disabled:i.relatedType1==="Lead"||l,items:Array.isArray(y)?y:[],value:i.relatedTo2??"",placeholder:i.relatedType1==="Lead"?"":Array.isArray(y)&&y.length>0?`Search ${i.relatedType2||"Contact"}...`:`No ${i.relatedType2||""} data found`,getLabel:C=>i.relatedType2==="Contact"?`${C.first_name??""} ${C.last_name??""}`.trim():C.name??"",onChange:C=>r(j=>({...j,relatedTo2:C}))})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Description"}),t.jsx("textarea",{name:"description",value:i.description,onChange:w,disabled:c,placeholder:"Enter task description",rows:3,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${c?"bg-gray-50 cursor-not-allowed":""}`})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Priority"}),t.jsxs("select",{name:"priority",value:i.priority,onChange:w,disabled:c,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${c?"bg-gray-50 cursor-not-allowed":""}`,children:[t.jsx("option",{value:"Low",children:"Low"}),t.jsx("option",{value:"Normal",children:"Normal"}),t.jsx("option",{value:"High",children:"High"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Due Date"}),t.jsx("input",{type:"datetime-local",name:"dueDate",value:i.dueDate,onChange:w,required:!0,disabled:c,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${c?"bg-gray-50 cursor-not-allowed":""}`})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Assign To"}),t.jsx(ow,{items:Array.isArray(d)?d:[],value:i.assignedTo??"",placeholder:"Search an account...",getLabel:C=>`${C.first_name} ${C.last_name}`,onChange:C=>r(j=>({...j,assignedTo:C}))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),t.jsxs("select",{name:"status",value:i.status,onChange:w,disabled:c,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${c?"bg-gray-50 cursor-not-allowed":""}`,children:[t.jsx("option",{value:"Not started",children:"Not started"}),t.jsx("option",{value:"In progress",children:"In Progress"}),t.jsx("option",{value:"Deferred",children:"Deferred"}),t.jsx("option",{value:"Completed",children:"Completed"})]})]}),!c&&t.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[t.jsx("button",{type:"button",onClick:s,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),t.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition",children:l?"Update Task":"Create Task"})]})]})]})})})})})]})})}function ow({items:e=[],value:s="",onChange:a,getLabel:n,placeholder:r="Search...",disabled:i=!1,maxRender:l=200}){const[c,d]=g.useState(!1),[m,f]=g.useState(""),h=g.useRef(null),y=e.find(p=>String(p.id)===String(s)),N=y?n(y):"",w=g.useMemo(()=>{const p=m.trim().toLowerCase();return(p?e.filter(C=>(n(C)||"").toLowerCase().includes(p)):e).slice(0,l)},[e,m,n,l]);return g.useEffect(()=>{const p=v=>{h.current&&!h.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]),g.useEffect(()=>{c||f("")},[c]),t.jsxs("div",{ref:h,className:"relative w-full",children:[t.jsx("input",{disabled:i,value:c?m:N,placeholder:r,onFocus:()=>!i&&d(!0),onChange:p=>{f(p.target.value),c||d(!0)},className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),c&&!i&&t.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[t.jsx("div",{className:"max-h-56 overflow-y-auto",children:w.length>0?w.map(p=>{const v=String(p.id),C=n(p),j=String(s)===v;return t.jsx("button",{type:"button",onClick:()=>{a(v),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${j?"bg-blue-50":""}`,children:C||"--"},v)}):t.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&t.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}const Dk=["To Do","In Progress","Review","Completed"],km=10,ooe=e=>{if(!e)return"";const s=new Date(e);if(Number.isNaN(s.getTime()))return"";const a=s.getTimezoneOffset();return new Date(s.getTime()-a*60*1e3).toISOString().slice(0,16)},Mk=e=>{if(!e)return"";const s=new Date(e);return Number.isNaN(s.getTime())?"":s.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},coe=e=>{const s=e.subject?.trim()??"",a=e.description?.trim()??"",n=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),e.status&&String(e.status).toUpperCase();let r=null,i=null,l=null,c=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2&&(c=Number(e.relatedTo2)));const d=e.assignedTo?Number(e.assignedTo):null,m=l||c||i||r,f=l?"Contact":c?"Deal":i?"Account":r?"Lead":null;return{title:s,description:a,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:d,notes:n,is_personal:!1,lead_id:r,account_id:i,contact_id:l,deal_id:c,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:m,related_type:f}},doe=e=>{const s=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",a=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",n=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",l=()=>e.lead?.id||e.lead_id,c=()=>e.account?.id||e.account_id,d=()=>e.contact?.id||e.contact_id,m=()=>e.deal?.id||e.deal_id,f=()=>e.task_assign_to?.id||e.assigned_to,h=()=>e.lead?.title||e.lead_id,y=()=>e.account?.name||e.account_id,N=()=>i||e.contact_id,w=()=>e.deal?.name||e.deal_id;let p="Lead",v="",C="",j="",_="Lead",T="",k="",E="";const A=c(),U=y(),B=l(),X=h();if(A){p="Account",_="Account",T=U,v=String(A);const $=d(),O=m(),G=N(),K=w();$?(C="Contact",k="Contact",E=G,j=String($)):O&&(k="Deal",C="Deal",E=K,j=String(O))}else B?(_="Lead",T=X,p="Lead",v=String(B)):e.related_type==="Account"&&(p="Account",v=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:e.status||"Not started",dueDate:n,dateAssigned:r,assignedToId:f()||null,assignedToName:s,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:a,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:_,relatedTo1Text:T,relatedType2Text:k,relatedTo2Text:E,subject:e.title,relatedType1:p,relatedTo1:v,relatedType2:C,relatedTo2:j}};function uoe(){g.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:s}=zt(),[a,n]=g.useState("board"),[r,i]=g.useState(!1),[l,c]=g.useState(null),[d,m]=g.useState(!1),[f,h]=g.useState([]),[y,N]=g.useState(!0),[w,p]=g.useState(""),[v,C]=g.useState("Filter by Status"),[j,_]=g.useState("Filter by Priority"),[T,k]=g.useState([]),[E,A]=g.useState(1),[U,B]=g.useState(null),[X,$]=g.useState(!1),O=it(),G=Xt(),[K,ae]=g.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""});g.useEffect(()=>{const D=G.state?.openTaskModal,re=G.state?.initialTaskData;D&&(i(!0),re&&ae(oe=>({...oe,...re})),O(G.pathname,{replace:!0,state:{}}))},[G,O]);const R=async()=>{try{const D=await se.get("/users/all");k(Array.isArray(D.data)?D.data:[])}catch(D){console.error("Failed to fetch users:",D),q.error("Failed to fetch users.")}},Z=async()=>{try{N(!0);const D=await se.get("/tasks/all"),oe=(Array.isArray(D.data)?D.data:[]).map(doe);oe.sort((je,Re)=>{const Ke=je.createdAt?new Date(je.createdAt):0;return(Re.createdAt?new Date(Re.createdAt):0)-Ke}),console.log("Fetched Tasks:",oe),h(oe),a==="list"&&A(1)}catch(D){console.error("Failed to load tasks:",D),q.error("Failed to load tasks.")}finally{N(!1)}};g.useEffect(()=>{!s&&e&&(R(),Z())},[s,e]);const te=()=>{c(null),ae({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},ge=(D=null,re=!1)=>{c(D),m(re),D?ae({id:D.id,subject:D.title||"",description:D.description||"",priority:D.priority||"Normal",status:D.status||"Not started",dueDate:ooe(D.dueDate),assignedTo:D.assignedToId?String(D.assignedToId):"",notes:D.notes||"",relatedType1Text:D.relatedType1Text||"",relatedTo1Text:D.relatedTo1Text||"",relatedType2Text:D.relatedType2Text||"",relatedTo2Text:D.relatedTo2Text||"",relatedType1:D.relatedType1||"",relatedTo1:D.relatedTo1||"",relatedType2:D.relatedType2||"",relatedTo2:D.relatedTo2||""}):te(),i(!0)},le=()=>{i(!1),c(null),m(!1),te()},W=async D=>{const re=coe(D);try{l&&!d?(await se.put(`/tasks/${l.id}`,re),q.success("Task updated successfully.")):(await se.post("/tasks/create",re),q.success("Task created successfully.")),i(!1),await Z()}catch(oe){console.error("Failed to save task:",oe);const je=oe.response?.data?.detail||"Failed to save task.";q.error(je)}},ee=D=>{D&&B({title:"Delete Task",message:t.jsxs(t.Fragment,{children:["Are you sure you want to delete ",t.jsx("span",{className:"font-semibold",children:D.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:D.id}})},J=async()=>{if(!U?.action){B(null);return}const{action:D}=U;$(!0);try{D.type==="delete"&&(await se.delete(`/tasks/${D.targetId}`),q.success("Task deleted successfully."),await Z())}catch(re){console.error("Task action failed:",re),q.error("Failed to delete task.")}finally{$(!1),B(null)}},he=()=>{X||B(null)},be=g.useMemo(()=>{const D=w.trim().toLowerCase();return[...f].sort((oe,je)=>{const Re=oe.createdAt?new Date(oe.createdAt):0;return(je.createdAt?new Date(je.createdAt):0)-Re}).filter(oe=>{const je=D===""||oe.title?.toLowerCase().includes(D)||oe.description?.toLowerCase().includes(D)||oe.assignedToName?.toLowerCase().includes(D)||oe.createdBy?.toLowerCase().includes(D),Re=v==="Filter by Status"||oe.status===v,Ke=j==="Filter by Priority"||oe.priority===j;return je&&Re&&Ke})},[f,w,v,j]);g.useEffect(()=>{A(1)},[w,v,j,a]),g.useEffect(()=>{if(a==="list"){const D=be.length===0?1:Math.ceil(be.length/km);E>D&&A(D)}},[be.length,E,a]);const Le=g.useMemo(()=>{if(a==="board")return be;const D=(E-1)*km;return be.slice(D,D+km)},[be,E,a]),Me=g.useMemo(()=>{const D=new Date;return[{title:"To Do",value:f.filter(re=>re.status==="Not started").length,icon:ya,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:f.filter(re=>re.status==="In progress").length,icon:Qn,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:f.filter(re=>re.status==="Completed").length,icon:As,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:f.filter(re=>re.dueDate&&new Date(re.dueDate)<D&&re.status!=="Completed").length,icon:oh,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:f.filter(re=>re.priority==="High").length,icon:qi,color:"text-orange-600",bgColor:"bg-orange-100"}]},[f]),ke=D=>D.dueDate&&new Date(D.dueDate)<new Date&&D.status!=="Completed",F=D=>{switch(D.status){case"To Do":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In Progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Review":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},ve=D=>{switch(D){case"To Do":return"bg-blue-100 text-blue-700";case"In Progress":return"bg-purple-100 text-purple-700";case"Review":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},Ce=D=>{switch(D){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(y||s)&&t.jsx(xt,{message:"Loading tasks..."}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[t.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[t.jsx(Qn,{className:"text-blue-600"})," Tasks Board"]}),t.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:t.jsxs("button",{type:"button",onClick:()=>ge(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[t.jsx(Lt,{})," Create Task"]})})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Me.map(D=>t.jsx(moe,{...D},D.title))}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[t.jsx(yt,{size:20,className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search tasks",value:w,onChange:D=>p(D.target.value),className:"focus:outline-none text-base w-full"})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[t.jsxs("select",{value:v,onChange:D=>C(D.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[t.jsx("option",{children:"Filter by Status"}),Dk.map(D=>t.jsx("option",{children:D},D))]}),t.jsxs("select",{value:j,onChange:D=>_(D.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[t.jsx("option",{children:"Filter by Priority"}),t.jsx("option",{children:"High"}),t.jsx("option",{children:"Normal"}),t.jsx("option",{children:"Low"})]})]})]}),t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("button",{type:"button",onClick:()=>n("board"),className:`px-4 py-2 rounded-full text-sm ${a==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),t.jsx("button",{type:"button",onClick:()=>n("list"),className:`px-4 py-2 rounded-full text-sm ${a==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!y&&!s&&be.length===0&&t.jsx("p",{className:"text-center text-gray-500 mt-10 p-4 bg-white shadow rounded-lg",children:"No tasks found matching current filters."}),!y&&!s&&be.length>0&&a==="board"&&t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:Dk.map(D=>{const re=Le.filter(oe=>oe.status===D);return t.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative",children:[t.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),t.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[t.jsx("h3",{className:"font-medium text-gray-900",children:D}),t.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:re.length})]}),t.jsx("div",{className:`space-y-3 ${re.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:re.length>0?re.map(oe=>t.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${F(oe)}`,onClick:()=>ge(oe,!0),children:[t.jsxs("div",{className:"text-left flex-1",children:[t.jsx("p",{className:"font-medium text-gray-800 text-sm",children:oe.title}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",oe.priority]}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",oe.assignedToName]}),t.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",t.jsx("span",{className:ke(oe)?"text-red-600":"text-gray-600",children:oe.dateAssigned?Mk(oe.dateAssigned):""})]})]}),t.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[t.jsx("button",{type:"button",onClick:je=>{je.stopPropagation(),ge(oe)},className:"text-blue-500 hover:text-blue-700",children:t.jsx(hs,{})}),t.jsx("button",{type:"button",onClick:je=>{je.stopPropagation(),ee(oe)},className:"text-red-500 hover:text-red-700",children:t.jsx(Nt,{})})]})]},oe.id)):t.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No tasks"})})]},D)})}),!y&&!s&&be.length>0&&a==="list"&&t.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full text-sm",children:[t.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),t.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),t.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),t.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),t.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),t.jsx("th",{className:"py-3 px-4 font-medium",children:"Actions"})]})}),t.jsx("tbody",{children:Le.map(D=>t.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",onClick:()=>{console.log("Opening task in view mode:",D),ge(D,!0)},children:[t.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",children:D.title}),t.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${ve(D.status||"To Do")}`,children:D.status||"To Do"})}),t.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Ce(D.priority||"Low")}`,children:D.priority||"Low"})}),t.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:D.assignedToName||"Unassigned"}),t.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${ke(D)?"text-red-600 font-medium":""}`,children:D.dateAssigned?Mk(D.dateAssigned):""}),t.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center gap-3",onClick:re=>re.stopPropagation(),children:[t.jsxs("button",{type:"button",onClick:()=>ge(D),className:"text-blue-500 hover:text-blue-700 flex items-center gap-1",children:[t.jsx(hs,{})," Edit"]}),t.jsxs("button",{type:"button",onClick:()=>ee(D),className:"text-red-500 hover:text-red-700 flex items-center gap-1",children:[t.jsx(Nt,{})," Delete"]})]})})]},D.id))})]})})}),!y&&!s&&a==="list"&&t.jsx(Ct,{className:"mt-6",totalItems:be.length,pageSize:km,currentPage:be.length===0?0:E,onPrev:()=>A(D=>Math.max(D-1,1)),onNext:()=>A(D=>Math.min(D+1,Math.max(1,Math.ceil(be.length/km)||1))),label:"tasks"}),t.jsx(Fh,{isOpen:r,onClose:le,onSave:W,onEdit:()=>m(!1),setFormData:ae,formData:K,isEditing:!d&&!!l,viewMode:d,users:T,currentUser:e,onDelete:ee}),U&&t.jsx(foe,{open:!0,title:U.title,message:U.message,confirmLabel:U.confirmLabel,cancelLabel:U.cancelLabel,variant:U.variant,onConfirm:J,onCancel:he,loading:X})]})}function moe({icon:e,title:s,value:a,color:n,bgColor:r,onClick:i}){return t.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[t.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${n} mr-4`,children:e?t.jsx(e,{size:22}):null}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"text-xs text-gray-500 uppercase",children:s}),t.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function foe({open:e,title:s,message:a,confirmLabel:n,cancelLabel:r,variant:i,loading:l,onConfirm:c,onCancel:d}){if(!e)return null;const m=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s}),t.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),t.jsx("button",{type:"button",onClick:c,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${m}`,disabled:l,children:l?"Processing...":n})]})]})})}function hoe(e){return ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M235.4 172.2c0-11.4 9.3-19.9 20.5-19.9 11.4 0 20.7 8.5 20.7 19.9s-9.3 20-20.7 20c-11.2 0-20.5-8.6-20.5-20zm1.4 35.7H275V352h-38.2V207.9z"},child:[]},{tag:"path",attr:{d:"M256 76c48.1 0 93.3 18.7 127.3 52.7S436 207.9 436 256s-18.7 93.3-52.7 127.3S304.1 436 256 436c-48.1 0-93.3-18.7-127.3-52.7S76 304.1 76 256s18.7-93.3 52.7-127.3S207.9 76 256 76m0-28C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48z"},child:[]}]})(e)}const cw={name:"",description:"",manager_id:"",user_ids:[],company_id:""},goe=[{label:"Filter by Status",value:""},{label:"Active",value:"Active"},{label:"Inactive",value:"Inactive"}],Sx=12,_x=10;function xoe({label:e,options:s,selectedValues:a,onChange:n,disabled:r=!1,placeholder:i="Select users..."}){const[l,c]=g.useState(!1),[d,m]=g.useState(""),f=g.useRef(null);g.useEffect(()=>{function p(v){f.current&&!f.current.contains(v.target)&&(c(!1),m(""))}return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const h=s.filter(p=>p.label.toLowerCase().includes(d.toLowerCase())),y=p=>{const v=a.includes(p);let C;v?C=a.filter(j=>j!==p):C=[...a,p],n(C)},N=(p,v)=>{p.stopPropagation(),n(a.filter(C=>C!==v))},w=s.filter(p=>a.includes(p.value));return t.jsxs("div",{className:"relative",ref:f,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsxs("div",{onClick:()=>!r&&c(!l),className:`w-full border ${l?"border-gray-500 ring-1 ring-gray-400":"border-gray-300"} 
          rounded-md px-3 py-2 text-sm bg-white cursor-pointer min-h-[38px] flex flex-wrap items-center gap-2
          ${r?"bg-gray-100 cursor-not-allowed":""}`,children:[a.length===0&&t.jsx("span",{className:"text-gray-400 select-none",children:i}),w.map(p=>t.jsxs("span",{className:"bg-indigo-100 text-indigo-700 px-2 py-0.5 rounded text-xs flex items-center gap-1 border border-indigo-200",children:[p.label,!r&&t.jsx(jt,{className:"cursor-pointer hover:text-indigo-900",onClick:v=>N(v,p.value)})]},p.value)),t.jsx("div",{className:"ml-auto text-gray-400",children:t.jsx(Xa,{})})]}),l&&!r&&t.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden flex flex-col",children:[t.jsx("div",{className:"p-2 border-b border-gray-100 sticky top-0 bg-white",children:t.jsxs("div",{className:"flex items-center px-2 py-1 bg-gray-50 rounded border border-gray-200",children:[t.jsx(yt,{className:"text-gray-400 mr-2"}),t.jsx("input",{type:"text",className:"bg-transparent outline-none w-full text-sm",placeholder:"Search...",value:d,onChange:p=>m(p.target.value),autoFocus:!0})]})}),t.jsx("div",{className:"overflow-y-auto flex-1",children:h.length>0?h.map(p=>{const v=a.includes(p.value);return t.jsxs("div",{onClick:()=>y(p.value),className:`px-4 py-2 text-sm cursor-pointer flex items-center justify-between hover:bg-gray-50 
                      ${v?"bg-indigo-50 text-indigo-700":"text-gray-700"}`,children:[t.jsx("span",{children:p.label}),v&&t.jsx(kM,{className:"text-indigo-600"})]},p.value)}):t.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:"No results found"})})]})]})}function Pk(){g.useEffect(()=>{document.title="Territory | Sari-Sari CRM"},[]);const e=it(),{id:s}=Qi(),[a,n]=g.useState(""),[r,i]=g.useState(""),[l,c]=g.useState(""),[d,m]=g.useState(null),[f,h]=g.useState(!1),[y,N]=g.useState([]),[w,p]=g.useState(!1),[v,C]=g.useState([]),[j,_]=g.useState(cw),[T,k]=g.useState(!1),[E,A]=g.useState(!1),[U,B]=g.useState(null),[X,$]=g.useState(null),[O,G]=g.useState("board"),[K,ae]=g.useState(null),[R,Z]=g.useState(!1),[te,ge]=g.useState(null),[le,W]=g.useState(1),ee=g.useRef(!1),J=g.useMemo(()=>{const we=new Map;return y.forEach(V=>{const pe=`${V.name}-${V.manager_id||"no-manager"}`;if(!we.has(pe))we.set(pe,{...V,assigned_users_list:V.assigned_to?[V.assigned_to]:[]});else{const z=we.get(pe);V.assigned_to&&(z.assigned_users_list.some(ie=>ie.id===V.assigned_to.id)||z.assigned_users_list.push(V.assigned_to))}}),Array.from(we.values())},[y]),he=g.useMemo(()=>{const we=a.trim().toLowerCase(),V=r.trim().toLowerCase(),pe=l.trim();return[...J].sort((ie,ue)=>{const M=ie?.created_at?new Date(ie.created_at):0;return(ue?.created_at?new Date(ue.created_at):0)-M}).filter(ie=>{const ue=ie.name?.toLowerCase()||"",M=ie.description?.toLowerCase()||"",xe=ie.managed_by?`${ie.managed_by.first_name} ${ie.managed_by.last_name}`.toLowerCase():"",ne=ie.status?.toString().toLowerCase()||"",Te=ie.assigned_users_list.map(me=>`${me.first_name} ${me.last_name}`.toLowerCase()).join(" "),ye=we===""||[ue,M,xe,ne,Te].some(me=>me&&me.includes(we)),P=V===""||ne===V,fe=pe===""||String(ie.managed_by?.id||"")===pe||ie.assigned_users_list.some(me=>String(me.id)===pe);return ye&&P&&fe})},[J,a,r,l]);g.useEffect(()=>{if(ee.current){ee.current=!1;return}if(s&&J.length>0&&!T&&!f&&!E){const we=J.find(V=>V.id===parseInt(s));we&&m(we)}!s&&!T&&!f&&m(null)},[s,J,T,f,E]),g.useEffect(()=>{W(1)},[a,r,l]),g.useEffect(()=>{W(we=>{const V=Math.max(1,Math.ceil(he.length/(O==="board"?Sx:_x))||1);return we>V?V:we})},[he.length,O]);const be=async()=>{try{const we=await se.get("/users/sales/read");C(we.data)}catch(we){console.error("Error fetching users:",we)}},Le=async()=>{p(!0);try{const we=await se.get("/territories/fetch"),V=Array.isArray(we.data)?we.data:[];N(V),console.log(we.data)}catch(we){console.error("Error fetching territories:",we)}finally{p(!1)}};g.useEffect(()=>{be(),Le()},[]);const Me=we=>{const{name:V,value:pe}=we.target;_(z=>({...z,[V]:pe}))},ke=we=>{_(V=>({...V,user_ids:we}))},F=()=>{_(cw),k(!1),B(null),h(!0)},ve=(we=!0)=>{h(!1),k(!1),B(null),_(cw)},Ce=we=>{if(!we)return;const V=we.assigned_users_list?we.assigned_users_list.map(pe=>String(pe.id)):[];_({name:we.name||"",description:we.description||"",manager_id:we.managed_by?String(we.managed_by.id):"",user_ids:V,company_id:we.company_id?String(we.company_id):""}),k(!0),B(we.id),m(null),h(!0)},D=we=>{we.preventDefault();const V=j.name.trim();if(!V){q.error("Territory name is required.");return}if(j.user_ids.length===0){q.error("Please assign at least one user.");return}let pe=j.company_id?Number(j.company_id):null;if(!pe&&j.user_ids.length>0){const ue=j.user_ids[0],M=v.find(xe=>String(xe.id)===String(ue));M&&M.company&&(pe=M.company.id)}const z={name:V,description:j.description?.trim()||"",manager_id:j.manager_id?Number(j.manager_id):null,user_ids:j.user_ids.map(ue=>Number(ue)),company_id:pe},ie=T&&U?"update":"create";ae({title:ie==="create"?"Confirm New Territory":"Confirm Update",message:t.jsxs("span",{children:[ie==="create"?"Create":"Update"," territory ",t.jsx("span",{className:"font-semibold",children:V})," with ",z.user_ids.length," assigned users?"]}),confirmLabel:ie==="create"?"Create":"Update",cancelLabel:"Cancel",variant:"primary",action:{type:ie,payload:z,targetId:U,name:V}})},re=we=>{we&&ae({title:"Delete Territory Group",message:t.jsxs("span",{children:["Are you sure you want to delete ",t.jsx("span",{className:"font-semibold",children:we.name}),"?",t.jsx("br",{}),t.jsxs("span",{className:"text-xs text-red-500",children:["This will remove assignments for all ",we.assigned_users_list.length," users in this group."]})]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:we.id,name:we.name}})},oe=async()=>{if(!K?.action){ae(null);return}const{action:we}=K,{type:V,payload:pe,targetId:z,name:ie}=we;Z(!0);try{V==="create"?(A(!0),await se.post("/territories/assign",pe),q.success(`Territory "${ie}" created.`),await Le(),await be(),ve(!1)):V==="update"?(A(!0),await se.post("/territories/assign",pe),q.success(`Territory "${ie}" updated.`),ee.current=!0,ve(!1),m(null),s&&e("/admin/territory"),await Le(),await be()):V==="delete"&&(ge(z),await se.delete(`/territories/${z}`),q.success(`Territory "${ie}" deleted.`),await Le(),d?.id===z&&m(null))}catch(ue){console.error(ue),q.error("An error occurred.")}finally{A(!1),ge(null),Z(!1),ae(null)}},je=()=>{R||ae(null)},Re=g.useMemo(()=>{const we=O==="board"?Sx:_x,V=(le-1)*we;return he.slice(V,V+we)},[he,le,O]),Ke=he.length>0,et=()=>W(we=>Math.max(we-1,1)),qe=()=>W(we=>Math.min(we+1,Math.ceil(he.length/(O==="board"?Sx:_x))||1)),Ze=we=>!we||we.length===0?"Unassigned":we.length===1?`${we[0].first_name} ${we[0].last_name}`:`${we[0].first_name} ${we[0].last_name} +${we.length-1} more`;return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[w&&t.jsx(xt,{message:"Loading territories..."}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-0 mb-7",children:[t.jsxs("h2",{className:"flex items-center text-2xl font-semibold text-gray-800",children:[t.jsx(uh,{className:"mr-2 text-blue-600"})," Territory"]}),t.jsx("div",{className:"flex justify-center lg:justify-end md:justify-end w-full",children:Array.isArray(v)&&v.length>0?t.jsxs("button",{onClick:F,className:"flex items-center bg-black text-white px-3 py-2 rounded-md hover:bg-gray-800 text-sm",children:[t.jsx(Lt,{})," Create Territory"]}):t.jsxs("div",{className:"text-xs bg-red-50 p-2 rounded-lg ring ring-red-300 text-red-700 flex items-center gap-1",children:[t.jsx(hoe,{})," Add users to assign territories"]})})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center gap-2",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4",children:[t.jsx(yt,{className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search territory",className:"focus:outline-none w-full",value:a,onChange:we=>n(we.target.value)})]}),t.jsxs("div",{className:"flex flex-col lg:flex-row gap-2 w-full lg:w-1/2",children:[t.jsx("select",{className:"border border-gray-300 rounded-lg px-3 h-11 w-full text-sm",value:r,onChange:we=>i(we.target.value),children:goe.map(we=>t.jsx("option",{value:we.value,children:we.label},we.value))}),t.jsxs("select",{className:"border border-gray-300 rounded-lg px-3 h-11 w-full text-sm",value:l,onChange:we=>c(we.target.value),children:[t.jsx("option",{value:"",children:"Filter by Users"}),v.map(we=>t.jsxs("option",{value:String(we.id),children:[we.first_name," ",we.last_name]},we.id))]})]})]}),t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("button",{onClick:()=>G("board"),className:`px-4 py-2 rounded-full text-sm ${O==="board"?"bg-gray-800 text-white":"bg-gray-100"}`,children:"Board View"}),t.jsx("button",{onClick:()=>G("list"),className:`px-4 py-2 rounded-full text-sm ${O==="list"?"bg-gray-800 text-white":"bg-gray-100"}`,children:"List View"})]}),O==="board"&&t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:Ke?Re.map(we=>t.jsxs("div",{onClick:()=>{m(we),e(`/admin/territory/${we.id}`)},className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative cursor-pointer hover:shadow-md transition",children:[t.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),t.jsx("h3",{className:"font-medium text-gray-900 mb-2 pt-7",children:we.name}),we.description&&t.jsx("p",{className:"text-xs text-gray-600 mb-2 line-clamp-2",children:we.description}),t.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-2",children:[t.jsx(qt,{})," ",Ze(we.assigned_users_list)]}),t.jsx("div",{className:"h-px bg-gray-200 w-full mb-2"}),t.jsx("div",{className:"text-gray-400 text-xs text-right",children:we.created_at?new Date(we.created_at).toLocaleDateString():""})]},we.id)):t.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No territories found."})}),O==="list"&&t.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:t.jsxs("table",{className:"min-w-full text-sm",children:[t.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4",children:"Territory"}),t.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),t.jsx("th",{className:"py-3 px-4",children:"Manager"})]})}),t.jsx("tbody",{children:Ke?Re.map(we=>t.jsxs("tr",{onClick:()=>{m(we),e(`/admin/territory/${we.id}`)},className:"hover:bg-gray-50 cursor-pointer",children:[t.jsx("td",{className:"py-3 px-4 font-medium",children:we.name}),t.jsx("td",{className:"py-3 px-4",children:Ze(we.assigned_users_list)}),t.jsx("td",{className:"py-3 px-4",children:we.managed_by?`${we.managed_by.first_name}`:""})]},we.id)):t.jsx("tr",{children:t.jsx("td",{colSpan:4,className:"text-center py-4 text-gray-500",children:"No territories found."})})})]})}),d&&t.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-xl p-8 relative",children:[t.jsx("button",{className:"absolute top-2 right-4 text-gray-500 hover:text-black",onClick:()=>{m(null),e("/admin/territory")},children:t.jsx(jt,{size:24})}),t.jsx("h2",{className:"text-3xl font-semibold mb-1",children:d.name}),t.jsx("div",{className:"h-px bg-gray-200 w-full mb-4"}),t.jsx("p",{className:"text-gray-500 mb-1",children:"Description"}),t.jsx("p",{className:"text-gray-700 text-sm mb-6",children:d.description||""}),t.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6 text-sm",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-500",children:"Manager"}),t.jsx("div",{className:"font-medium",children:d.managed_by?`${d.managed_by.first_name} ${d.managed_by.last_name}`:"Unassigned"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-500",children:"Assigned To"}),t.jsx("div",{className:"flex flex-col gap-1 mt-1 max-h-32 overflow-y-auto",children:d.assigned_users_list&&d.assigned_users_list.length>0?d.assigned_users_list.map(we=>t.jsxs("div",{className:"flex items-center gap-2 text-gray-800 font-medium",children:[t.jsx(qt,{})," ",we.first_name," ",we.last_name]},we.id)):"Unassigned"})]})]}),t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsxs("button",{onClick:()=>Ce(d),className:"bg-blue-500 text-white px-4 py-2 rounded flex items-center gap-2",children:[t.jsx(hs,{})," Edit"]}),t.jsxs("button",{onClick:()=>re(d),className:"bg-red-500 text-white px-4 py-2 rounded flex items-center gap-2",children:[t.jsx(Nt,{})," Delete"]})]})]})}),f&&t.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-lg w-full max-w-xl p-6 relative",children:[t.jsx("button",{className:"absolute top-4 right-4",onClick:()=>ve(),children:t.jsx(jt,{size:22})}),t.jsx("h2",{className:"text-xl font-semibold text-center mb-6",children:T?"Edit Territory":"Create Territory"}),t.jsxs("form",{className:"space-y-4",onSubmit:D,children:[t.jsx(poe,{label:"Territory Name",name:"name",value:j.name,onChange:Me,required:!0}),t.jsx(yoe,{label:"Territory Manager",name:"manager_id",value:j.manager_id,onChange:Me,options:[{value:"",label:"Assign Manager"},...v.map(we=>({value:String(we.id),label:`${we.first_name} ${we.last_name}`}))]}),t.jsx(xoe,{label:"Assign Users",placeholder:"Search and select users...",options:v.map(we=>({value:String(we.id),label:`${we.first_name} ${we.last_name}`})),selectedValues:j.user_ids,onChange:ke}),t.jsx(boe,{label:"Description",name:"description",value:j.description,onChange:Me}),t.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[t.jsx("button",{type:"button",onClick:()=>ve(),className:"px-4 py-2 bg-red-400 text-white rounded",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:E,className:"px-4 py-2 bg-tertiary text-white rounded",children:E?"Saving...":"Save Territory"})]})]})]})}),t.jsx(Ct,{className:"mt-4",totalItems:he.length,pageSize:O==="board"?Sx:_x,currentPage:le,onPrev:et,onNext:qe,label:"territories"}),K&&t.jsx(voe,{open:!0,title:K.title,message:K.message,confirmLabel:K.confirmLabel,cancelLabel:K.cancelLabel,variant:K.variant,onConfirm:oe,onCancel:je,loading:R})]})})}function poe({label:e,name:s,value:a,onChange:n,placeholder:r,type:i="text",required:l=!1,disabled:c=!1}){return t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("input",{type:i,name:s,value:a??"",onChange:n,placeholder:r,required:l,disabled:c,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-gray-400 outline-none disabled:bg-gray-100"})]})}function yoe({label:e,name:s,value:a,onChange:n,options:r,disabled:i=!1}){return t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("select",{name:s,value:a??"",onChange:n,disabled:i,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm bg-white focus:ring-2 focus:ring-gray-400 outline-none disabled:bg-gray-100",children:r.map(l=>t.jsx("option",{value:l.value,children:l.label},l.value))})]})}function boe({label:e,name:s,value:a,onChange:n,placeholder:r,rows:i=3,disabled:l=!1}){return t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("textarea",{name:s,value:a??"",onChange:n,placeholder:r,rows:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-gray-400 outline-none disabled:bg-gray-100"})]})}function voe({open:e,title:s,message:a,confirmLabel:n,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:c,onCancel:d}){if(!e)return null;const m=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s}),t.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),t.jsx("button",{type:"button",onClick:c,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${m}`,disabled:l,children:l?"Processing...":n})]})]})})}const Noe=10,woe=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"}],joe=e=>e?String(e).toUpperCase():"",Dd=e=>{const s=joe(e);return s==="PLANNED"||s==="PENDING"?"PLANNED":s==="HELD"||s==="COMPLETED"?"HELD":s==="NOT HELD"||s==="NOT_HELD"||s==="CANCELLED"?"NOT_HELD":"PLANNED"},dw=e=>{const s=Dd(e);return s==="PLANNED"?"PLANNED":s==="HELD"?"HELD":s==="NOT_HELD"?"NOT HELD":"--"},Ok=e=>{switch(Dd(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},Ik=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function $k(){const[e,s]=g.useState(!1),[a,n]=g.useState(null),[r,i]=g.useState(null),[l,c]=g.useState(null),[d,m]=g.useState(null),[f,h]=g.useState([]),[y,N]=g.useState(null),[w,p]=g.useState(!1),[v,C]=g.useState(null),[j,_]=g.useState(!1),[T,k]=g.useState(!1),[E,A]=g.useState("PLANNED"),[U,B]=g.useState(!1),[X,$]=g.useState(!1),[O]=Aa(),G=it(),K=Xt(),ae={subject:"",call_time:"",duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[R,Z]=g.useState(ae);g.useEffect(()=>{const V=K.state?.openCallModal,pe=K.state?.initialCallData?.relatedTo1||O.get("id");(V||pe)&&(s(!0),K.state?.initialCallData&&Z(z=>({...z,...K.state.initialCallData})),pe&&Z(z=>({...z,relatedTo1:pe})),G(K.pathname,{replace:!0,state:{}}))},[K,O,G]);const te=async()=>{try{$(!0);const V=await se.get("/calls/admin/fetch-all"),z=[...Array.isArray(V.data)?V.data:[]].sort((ie,ue)=>{const M=ie?.created_at?new Date(ie.created_at):0;return(ue?.created_at?new Date(ue.created_at):0)-M});h(z)}catch(V){console.error("Error fetching calls:",V),q.error("Failed to load calls")}finally{$(!1)}},ge=async()=>{try{const V=await se.get("/users/all");N(V.data)}catch(V){console.error("Error fetching users: ",V)}};g.useEffect(()=>{ge(),te()},[]);const le=[],W="",ee="Filter by Status",J="Filter by Users",he=1,be=f,Le=f,Me=f.length,ke=f.filter(V=>Dd(V.status)==="PLANNED").length,F=f.filter(V=>Dd(V.status)==="HELD").length,ve=f.filter(V=>Dd(V.status)==="NOT_HELD").length,Ce=[{title:"Total",value:Me,icon:Ea,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:ke,icon:ya,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:F,icon:As,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:ve,icon:tr,color:"text-gray-600",bgColor:"bg-gray-100"}],D="Overview",re=V=>{const{name:pe,value:z}=V.target;Z(ie=>{const ue={...ie,[pe]:z};return pe==="relatedType1"&&(ue.relatedTo1="",z==="Lead"?(ue.relatedType2=null,ue.relatedTo2=null,m([])):z==="Account"&&(ue.relatedType2="Contact")),pe==="relatedType2"&&(ue.relatedTo2=""),ue})};g.useEffect(()=>{const V=async()=>{try{c([]);let pe;R.relatedType1==="Lead"?pe=await se.get("/leads/admin/getLeads"):R.relatedType1==="Account"&&(pe=await se.get("/accounts/admin/fetch-all")),pe&&Array.isArray(pe.data)?c(pe.data):c([])}catch(pe){console.error("Error fetching data:",pe),c([])}};R.relatedType1&&V()},[R.relatedType1]),g.useEffect(()=>{const V=async()=>{try{m([]);let pe;if(R.relatedType1==="Account"&&R.relatedTo1)R.relatedType2==="Contact"?pe=await se.get(`/contacts/from-acc/${R.relatedTo1}`):R.relatedType2==="Deal"&&(pe=await se.get(`/deals/from-acc/${R.relatedTo1}`));else{m([]);return}pe&&Array.isArray(pe.data)?m(pe.data):m([])}catch(pe){console.error("Error fetching data:",pe),m([])}};R.relatedType2&&V()},[R.relatedType2,R.relatedTo1,R.relatedType1]);const oe=V=>{if(V.preventDefault(),!R.assigned_to){q.error("Please assign the call to a user.");return}const pe={...R,duration_minutes:R.duration_minutes?parseInt(R.duration_minutes,10):null,relatedTo1:R.relatedTo1?parseInt(R.relatedTo1,10):null,relatedTo2:R.relatedType1==="Lead"?null:R.relatedTo2?parseInt(R.relatedTo2,10):null,relatedType2:R.relatedType1==="Lead"?null:R.relatedType2,assigned_to:R.assigned_to?parseInt(R.assigned_to,10):null},z=w&&v?"update":"create",ie=(R.subject||"").trim()||"Untitled Call";i({title:z==="create"?"Confirm New Call":"Confirm Update",message:z==="create"?`Create "${ie}"?`:`Save changes to "${ie}"?`,confirmLabel:z==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:z,payload:pe,targetId:v||null,name:ie}})},je=V=>n(V),Re=()=>{s(!1),p(!1),C(null)},Ke=async()=>{if(!r?.action){i(null);return}const{action:V}=r,{type:pe,payload:z,targetId:ie,name:ue}=V;k(!0);try{if(pe==="create")_(!0),await se.post("/calls/create",z),q.success(`Call "${ue}" created successfully.`),s(!1),Z(ae),p(!1),C(null),await te();else if(pe==="update"){if(!ie)throw new Error("Missing call identifier for update.");_(!0),await se.put(`/calls/${ie}`,z),q.success(`Call "${ue}" updated successfully.`),s(!1),Z(ae),p(!1),C(null),await te()}else if(pe==="delete"){if(!ie)throw new Error("Missing call identifier for deletion.");await se.delete(`/calls/${ie}`),q.success(`Call "${ue}" deleted successfully.`),a?.id===ie&&n(null),await te()}}catch(M){const xe=pe==="create"?"Failed to create call. Please review the details and try again.":pe==="update"?"Failed to update call. Please review the details and try again.":"Failed to delete call. Please try again.",ne=M?.response?.data?.detail||xe;q.error(ne)}finally{(pe==="create"||pe==="update")&&_(!1),k(!1),i(null)}},et=()=>{T||i(null)},qe=async()=>{if(a?.id)try{B(!0),await se.put(`/calls/${a.id}`,{status:E}),q.success(`Status updated to ${dw(E)}`),h(V=>Array.isArray(V)?V.map(pe=>pe.id===a.id?{...pe,status:E}:pe):V),n(null)}catch(V){const pe=V.response?.data?.detail||"Failed to update status.";q.error(pe)}finally{B(!1)}};g.useEffect(()=>{a&&A(Dd(a.status))},[a]);const Ze=a?t.jsxs("div",{id:"callModalBackdrop",onClick:V=>V.target.id==="callModalBackdrop"&&n(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[X&&t.jsx(xt,{message:"Loading call details..."}),t.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[t.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[t.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),t.jsx("button",{onClick:()=>n(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:t.jsx(es,{size:25})})]}),t.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:t.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[t.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:a.subject}),t.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${Ok(a.status)}`,children:dw(a.status)})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const V=M=>{if(!M)return"";const xe=new Date(M),ne=xe.getFullYear(),Te=String(xe.getMonth()+1).padStart(2,"0"),Q=String(xe.getDate()).padStart(2,"0"),ye=String(xe.getHours()).padStart(2,"0"),P=String(xe.getMinutes()).padStart(2,"0");return`${ne}-${Te}-${Q}T${ye}:${P}`},pe=a.lead?"Lead":a.account?"Account":"Lead",z=a.lead?a.lead.id:a.account?a.account.id:null,ie=pe==="Lead"?null:a.contact?"Contact":a.deal?"Deal":"Contact",ue=pe==="Lead"?null:a.contact?a.contact.id:a.deal?a.deal.id:null;Z({subject:a.subject||"",call_time:V(a.call_time),duration_minutes:a.duration_minutes?String(a.duration_minutes):"",direction:a.direction||"Outgoing",status:a.status||"Planned",notes:a.notes||"",relatedType1:pe,relatedType2:ie,relatedTo1:z?String(z):"",relatedTo2:ue?String(ue):"",assigned_to:a.call_assign_to?.id?String(a.call_assign_to.id):""}),p(!0),C(a.id),n(null),s(!0)},children:[t.jsx(ys,{className:"mr-2"}),"Edit"]}),t.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>{const V=a.subject||"this call";i({title:"Delete Call",message:`Are you sure you want to permanently delete "${V}"? This action cannot be undone.`,confirmLabel:"Delete Call",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:a.id,name:V}})},children:[t.jsx(Nt,{className:"mr-2"}),"Delete"]})]})]})}),t.jsx("div",{className:"border-b border-gray-200 my-5"}),t.jsxs("div",{className:"p-6 lg:p-4",children:[t.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(V=>t.jsx("button",{className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${D===V?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:V},V))}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[t.jsxs("div",{className:"lg:col-span-3",children:[t.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 text-sm text-gray-700",children:[t.jsx(wi,{label:"Call Time",value:Ik(a.call_time)}),t.jsx(wi,{label:"Duration",value:a.duration_minutes?`${a.duration_minutes} min`:null}),t.jsx(wi,{label:"Direction",value:a.direction||"--"}),t.jsx(wi,{label:"Assigned To",value:`${a.call_assign_to.first_name} ${a.call_assign_to.last_name}`}),a.lead&&t.jsx(wi,{label:"Lead",value:a.lead.title}),a.account&&t.jsx(wi,{label:"Account",value:a.account.name}),a.contact&&t.jsx(wi,{label:"Contact",value:`${a.contact.first_name} ${a.contact.last_name}`}),a.deal&&t.jsx(wi,{label:"Deal",value:a.deal.name}),t.jsx(wi,{label:"Created At",value:Ik(a.created_at)})]})}),D==="Notes",D==="Activities"]}),t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),t.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[t.jsxs("button",{onClick:()=>G("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Calls"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),t.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>G("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Calls"}}}),children:[t.jsx(dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),t.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ts,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),t.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:E,onChange:V=>A(V.target.value),children:[t.jsx("option",{value:"PLANNED",children:"PLANNED"}),t.jsx("option",{value:"HELD",children:"HELD"}),t.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),t.jsx("button",{onClick:qe,disabled:U,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:U?"Updating...":"Update"})]})]})]})]})]})]}):null,we=e?t.jsx("div",{id:"modalBackdrop",onClick:V=>V.target.id==="modalBackdrop"&&Re(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[t.jsx("button",{onClick:Re,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:t.jsx(jt,{size:22})}),t.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:w?"Edit Call":"Add New Call"}),t.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:oe,children:[t.jsx(Soe,{label:"Subject",className:"md:col-span-2",name:"subject",value:R.subject,onChange:re,disabled:j,required:!0}),t.jsxs("div",{className:"w-full flex flex-col",children:[t.jsxs("select",{name:"relatedType1",onChange:re,value:R.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:j||w,children:[t.jsx("option",{value:"Lead",children:"Lead"}),t.jsx("option",{value:"Account",children:"Account"})]}),t.jsx(uw,{items:Array.isArray(l)?l:[],value:R.relatedTo1??"",placeholder:`Search ${R.relatedType1||"here"}...`,getLabel:V=>R.relatedType1==="Lead"?V.title:V.name??"",onChange:V=>Z(pe=>({...pe,relatedTo1:V})),disabled:j||w})]}),t.jsxs("div",{className:"w-full flex flex-col",children:[t.jsxs("select",{name:"relatedType2",onChange:re,value:R.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:R.relatedType1==="Lead"||j||w,children:[t.jsx("option",{value:"Contact",children:"Contact"}),t.jsx("option",{value:"Deal",children:"Deal"})]}),t.jsx(uw,{disabled:R.relatedType1==="Lead"||j||w,items:Array.isArray(d)?d:[],value:R.relatedTo2??"",placeholder:R.relatedType1==="Lead"?"":Array.isArray(d)&&d.length>0?`Search ${R.relatedType2||"Contact"}...`:`No ${R.relatedType2||""} data found`,getLabel:V=>R.relatedType2==="Contact"?`${V.first_name??""} ${V.last_name??""}`.trim():V.name??"",onChange:V=>Z(pe=>({...pe,relatedTo2:V}))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),t.jsx("input",{type:"datetime-local",value:R.call_time,onChange:re,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),t.jsxs("div",{className:"w-full",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),t.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[t.jsx("input",{type:"tel",value:R.duration_minutes,onChange:re,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),t.jsx("p",{children:"minutes"})]})]}),t.jsxs("div",{className:"col-span-2",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Assign To"}),t.jsx(uw,{items:Array.isArray(y)?y:[],value:R.assigned_to??"",placeholder:"Search an account...",getLabel:V=>`${V.first_name} ${V.last_name}`,onChange:V=>Z(pe=>({...pe,assigned_to:V}))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),t.jsxs("select",{name:"direction",onChange:re,value:R.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[t.jsx("option",{value:"Incoming",children:"Incoming"}),t.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),t.jsxs("select",{name:"status",onChange:re,value:R.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[t.jsx("option",{value:"Planned",children:"Planned"}),t.jsx("option",{value:"Held",children:"Held"}),t.jsx("option",{value:"Not held",children:"Not held"})]})]}),t.jsx(_oe,{className:"col-span-2",label:"Notes",value:R.notes,onChange:re,name:"notes"}),t.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[t.jsx("button",{type:"button",onClick:Re,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:j,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:j?"Saving...":w?"Update Call":"Save Call"})]})]})]})}):null;return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[t.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[t.jsx(Ea,{className:"mr-2 text-blue-600"})," Calls"]}),t.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:t.jsxs("button",{onClick:()=>{Z(ae),p(!1),C(null),s(!0)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[t.jsx(Lt,{className:"mr-2"})," Add Call"]})})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ce.map(V=>t.jsx(Coe,{...V},V.title))}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[t.jsx(yt,{size:20,className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",defaultValue:W})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[t.jsxs("select",{defaultValue:ee,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[t.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),woe.map(V=>t.jsx("option",{value:V.value,children:V.label},V.value))]}),t.jsxs("select",{defaultValue:J,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[t.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),le.map(V=>t.jsx("option",{value:V.name,children:V.name},V.id))]})]})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[t.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4",children:"Subject"}),t.jsx("th",{className:"py-3 px-4",children:"Related To"}),t.jsx("th",{className:"py-3 px-4",children:"Call Time"}),t.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),t.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),t.jsx("tbody",{children:X?t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"py-10",children:t.jsx(xt,{message:"Loading calls..."})})}):Le.length>0?Le.map(V=>t.jsxs("tr",{onClick:()=>je(V),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[t.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:V.subject||"--"}),t.jsxs("td",{className:"py-3 px-4",children:[V.lead&&t.jsx("p",{className:"font-medium text-blue-500 text-xs",children:V.lead.title}),V.account&&t.jsx("p",{className:"font-medium text-blue-500 text-xs",children:V.account.name}),V.contact&&t.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[V.contact.first_name," ",V.contact.last_name]}),V.deal&&t.jsx("p",{className:"font-medium text-blue-500 text-xs",children:V.deal.name})]}),t.jsx("td",{className:"py-3 px-4 text-gray-800",children:V.call_time?new Date(V.call_time).toLocaleString():"--"}),t.jsx("td",{className:"py-3 px-4 text-gray-800",children:V?.call_assign_to?`${V.call_assign_to.first_name} ${V.call_assign_to.last_name}`:"--"}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Ok(V.status)}`,children:dw(V.status)})})]},V.id)):t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),t.jsx(Ct,{totalItems:be.length,pageSize:Noe,currentPage:he,onPrev:()=>{},onNext:()=>{},label:"calls"})]}),Ze,we,r&&t.jsx(Toe,{open:!0,title:r.title,message:r.message,confirmLabel:r.confirmLabel,onConfirm:Ke,onCancel:et,loading:T})]})}function Coe({icon:e,title:s,value:a,color:n,bgColor:r}){return t.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[t.jsx("div",{className:`p-3 rounded-full ${r} ${n} mr-4`,children:t.jsx(e,{size:22})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500 uppercase",children:s}),t.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function Soe(e){return t.jsxs("div",{className:e.className,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),t.jsx("input",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]})}function _oe(e){return t.jsxs("div",{className:e.className,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),t.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function wi({label:e,value:s}){return t.jsxs("p",{children:[t.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",t.jsx("br",{}),t.jsx("span",{className:"break-words",children:s||"--"})]})}function Toe({open:e,title:s,message:a,confirmLabel:n,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:c,onCancel:d}){if(!e)return null;const m=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s}),t.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),t.jsx("button",{type:"button",onClick:c,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${m}`,disabled:l,children:l?"Processing...":n})]})]})})}function uw({items:e=[],value:s="",onChange:a,getLabel:n,placeholder:r="Search...",disabled:i=!1,maxRender:l=200}){const[c,d]=g.useState(!1),[m,f]=g.useState(""),h=g.useRef(null),y=e.find(p=>String(p.id)===String(s)),N=y?n(y):"",w=g.useMemo(()=>{const p=m.trim().toLowerCase();return(p?e.filter(C=>(n(C)||"").toLowerCase().includes(p)):e).slice(0,l)},[e,m,n,l]);return g.useEffect(()=>{const p=v=>{h.current&&!h.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]),g.useEffect(()=>{c||f("")},[c]),t.jsxs("div",{ref:h,className:"relative w-full",children:[t.jsx("input",{disabled:i,value:c?m:N,placeholder:r,onFocus:()=>!i&&d(!0),onChange:p=>{f(p.target.value),c||d(!0)},className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),c&&!i&&t.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[t.jsx("div",{className:"max-h-56 overflow-y-auto",children:w.length>0?w.map(p=>{const v=String(p.id),C=n(p),j=String(s)===v;return t.jsx("button",{type:"button",onClick:()=>{a(v),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${j?"bg-blue-50":""}`,children:C||"--"},v)}):t.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&t.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}const Iy=({onClose:e,formData:s,setFormData:a,isEditing:n=!1,onSubmit:r,isSubmitting:i=!1,users:l=[]})=>{const[c,d]=g.useState({subject:"",startTime:"",endTime:"",location:"",status:"Planned",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:"Contact",relatedTo2:""}),[m,f]=g.useState([]),[h,y]=g.useState([]),N=s!==void 0?s:c,w=a||d,{userRole:p}=er();g.useEffect(()=>{const j=async()=>{try{f([]);let _;N.relatedType1==="Lead"?_=await se.get("/leads/admin/getLeads"):N.relatedType1==="Account"&&(_=await se.get("/accounts/admin/fetch-all"));let T=[];if(_&&Array.isArray(_.data)&&(T=_.data),n&&N.relatedTo1)try{let k;N.relatedType1==="Lead"?k=await se.get(`/leads/get/${N.relatedTo1}`):N.relatedType1==="Account"&&(k=await se.get(`/accounts/get/${N.relatedTo1}`)),k&&k.data&&(T.some(A=>String(A.id)===String(N.relatedTo1))||(T=[k.data,...T]))}catch(k){console.error("Error fetching specific related item:",k)}f(T)}catch(_){console.error("Error fetching relatedTo1 data:",_),f([])}};N.relatedType1&&j()},[N.relatedType1,p,n,N.relatedTo1]),g.useEffect(()=>{const j=async()=>{try{if(y([]),N.relatedType1==="Account"&&N.relatedTo1){let _;N.relatedType2==="Contact"?_=await se.get(`/contacts/from-acc/${N.relatedTo1}`):N.relatedType2==="Deal"&&(_=await se.get(`/deals/from-acc/${N.relatedTo1}`)),_&&Array.isArray(_.data)?y(_.data):y([])}else y([])}catch(_){console.error("Error fetching relatedTo2 data:",_),y([])}};N.relatedType2&&j()},[N.relatedType2,N.relatedTo1,N.relatedType1]);const v=j=>{const{name:_,value:T}=j.target;w(k=>{const E={...k,[_]:T};return _==="relatedType1"&&(k.relatedType1!==T&&(E.relatedTo1=""),T==="Lead"?(E.relatedType2=null,E.relatedTo2=null,y([])):T==="Account"&&(E.relatedType2="Contact",E.relatedTo2="")),_==="relatedType2"&&k.relatedType2!==T&&(E.relatedTo2=""),E})},C=j=>{if(j.preventDefault(),N.status==="--"){q.warn("Please select a valid status.");return}r?r(N):(console.log("Meeting Scheduled:",N),e())};return t.jsx("div",{id:"modalBackdrop",onClick:j=>j.target.id==="modalBackdrop"&&e(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-60 p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[t.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:t.jsx(jt,{size:22})}),t.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:n?"Edit Meeting":"Schedule Meeting"}),t.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:C,children:[t.jsx(Tx,{label:"Subject",name:"subject",value:N.subject,onChange:v,placeholder:"e.g. Meeting with Client",required:!0,disabled:i,className:"md:col-span-2"}),t.jsxs("div",{className:"w-full flex flex-col",children:[t.jsxs("select",{name:"relatedType1",onChange:v,value:N.relatedType1||"Lead",className:"outline-none w-23 cursor-pointer mb-1 rounded p-1 text-gray-700 disabled:text-gray-400",disabled:i||n,children:[t.jsx("option",{value:"Lead",children:"Lead"}),t.jsx("option",{value:"Account",children:"Account"})]}),t.jsx(mw,{items:Array.isArray(m)?m:[],value:N.relatedTo1??"",placeholder:`Search ${N.relatedType1||"here"}...`,getLabel:j=>N.relatedType1==="Lead"?j.title:j.name??"",onChange:j=>w(_=>({..._,relatedTo1:j})),disabled:n})]}),t.jsxs("div",{className:"w-full flex flex-col",children:[t.jsxs("select",{name:"relatedType2",onChange:v,value:N.relatedType2||"Contact",className:"outline-none cursor-pointer mb-1 w-23 rounded p-1 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:i||n||N.relatedType1==="Lead",children:[t.jsx("option",{value:"Contact",children:"Contact"}),t.jsx("option",{value:"Deal",children:"Deal"})]}),t.jsx(mw,{items:Array.isArray(h)?h:[],value:N.relatedTo2??"",placeholder:N.relatedType1==="Lead"?"":Array.isArray(h)&&h.length>0?`Search ${N.relatedType2||"Contact"}...`:`No ${N.relatedType2||""} data found`,getLabel:j=>N.relatedType2==="Contact"?`${j.first_name??""} ${j.last_name??""}`.trim():j.name??"",onChange:j=>w(_=>({..._,relatedTo2:j})),disabled:n||N.relatedType1==="Lead"})]}),t.jsx(Tx,{label:"Location",name:"location",className:"col-span-2",value:N.location,onChange:v,disabled:i}),t.jsxs("div",{className:"md:col-span-2 grid grid-cols-2 gap-4",children:[t.jsx(Tx,{label:"Start Time",name:"startTime",type:"datetime-local",value:N.startTime,onChange:v,required:!0,disabled:i}),t.jsx(Tx,{label:"End Time",name:"endTime",type:"datetime-local",value:N.endTime,onChange:v,required:!0,disabled:i})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Assign To"}),t.jsx(mw,{items:Array.isArray(l)?l:[],value:N.assignedTo??"",placeholder:"Search an account...",getLabel:j=>`${j.first_name} ${j.last_name}`,onChange:j=>w(_=>({..._,assignedTo:j}))})]}),t.jsx(Eoe,{label:"Status",name:"status",value:N.status,onChange:v,options:["--","Planned","Held","Not held"].map(j=>({value:j,label:j.replace("_"," ")})),disabled:i}),t.jsx(Aoe,{label:"Notes",name:"notes",value:N.notes,onChange:v,rows:3,className:"md:col-span-2",disabled:i}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[t.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),t.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":n?"Update Meeting":"Save Meeting"})]})]})]})})};function Tx({label:e,name:s,value:a,onChange:n,placeholder:r,type:i="text",required:l=!1,disabled:c=!1,className:d=""}){return t.jsxs("div",{className:d,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("input",{type:i,name:s,value:a??"",onChange:n,placeholder:r,required:l,disabled:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]})}function Eoe({label:e,name:s,value:a,onChange:n,options:r,required:i=!1,disabled:l=!1,className:c=""}){return t.jsxs("div",{className:c,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("select",{name:s,value:a??"",onChange:n,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(d=>t.jsx("option",{value:d.value,children:d.label},d.value))})]})}function Aoe({label:e,name:s,value:a,onChange:n,placeholder:r,required:i=!1,disabled:l=!1,className:c="",rows:d=3}){return t.jsxs("div",{className:c,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("textarea",{name:s,value:a??"",onChange:n,placeholder:r,required:i,disabled:l,rows:d,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function mw({items:e=[],value:s="",onChange:a,getLabel:n,placeholder:r="Search...",disabled:i=!1,maxRender:l=200}){const[c,d]=g.useState(!1),[m,f]=g.useState(""),h=g.useRef(null),y=e.find(p=>String(p.id)===String(s)),N=y?n(y):"",w=g.useMemo(()=>{const p=m.trim().toLowerCase();return(p?e.filter(C=>(n(C)||"").toLowerCase().includes(p)):e).slice(0,l)},[e,m,n,l]);return g.useEffect(()=>{const p=v=>{h.current&&!h.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]),g.useEffect(()=>{c||f("")},[c]),t.jsxs("div",{ref:h,className:"relative w-full",children:[t.jsx("input",{disabled:i,value:c?m:N,placeholder:r,onFocus:()=>!i&&d(!0),onChange:p=>{f(p.target.value),c||d(!0)},className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),c&&!i&&t.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[t.jsx("div",{className:"max-h-56 overflow-y-auto",children:w.length>0?w.map(p=>{const v=String(p.id),C=n(p),j=String(s)===v;return t.jsx("button",{type:"button",onClick:()=>{a(v),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${j?"bg-blue-50":""}`,children:C||"--"},v)}):t.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&t.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}const Gl=({meeting:e,onClose:s,onEdit:a,onDelete:n,onStatusUpdate:r})=>{const i=it(),[l,c]=g.useState("Overview"),d=p=>{const v=(p||"").toUpperCase();return v==="PLANNED"||v==="IN PROGRESS"?"PLANNED":v==="HELD"||v==="DONE"?"HELD":v==="NOT HELD"?"NOT_HELD":"PLANNED"},m=p=>{const v=(p||"").toUpperCase();return v==="PLANNED"?"PLANNED":v==="HELD"?"HELD":v==="NOT HELD"||v==="NOT_HELD"?"NOT HELD":"PENDING"},[f,h]=g.useState(d(e?.status||"PENDING")),[y,N]=g.useState(!1);if(!e)return null;const w=p=>{const v=(p||"").toUpperCase(),C=v==="PLANNED"?"PENDING":v==="HELD"?"COMPLETED":v==="NOT_HELD"?"CANCELLED":v;switch(v){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:switch(C){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}}};return t.jsx(t.Fragment,{children:t.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[t.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[t.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Meeting"}),t.jsx("button",{onClick:s,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:t.jsx(es,{size:25})})]}),t.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:t.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[t.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:e.subject||"Meeting"}),t.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${w(d(e.status))}`,children:d(e.status||"PENDING").replace("_"," ")})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsxs("button",{type:"button",onClick:()=>{a&&a(e)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[t.jsx(hs,{className:"mr-2"}),"Edit"]}),t.jsxs("button",{type:"button",onClick:()=>{n&&n(e)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[t.jsx(Nt,{className:"mr-2"}),"Delete"]})]})]})}),t.jsx("div",{className:"border-b border-gray-200 my-5"}),t.jsxs("div",{className:"p-6 lg:p-4",children:[t.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(p=>t.jsx("button",{onClick:()=>c(p),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${l===p?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:p},p))}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[t.jsxs("div",{className:"lg:col-span-3",children:[l==="Overview"&&t.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Start Time:"}),t.jsx("p",{children:e.start_time?new Date(e.start_time).toLocaleString():"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"End Time:"}),t.jsx("p",{children:e.end_time?new Date(e.end_time).toLocaleString():"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Meeting Title:"}),t.jsx("p",{children:e.subject||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Location:"}),t.jsx("p",{children:e.location||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Assigned To:"}),t.jsxs("p",{children:[e.meet_assign_to.first_name," ",e.meet_assign_to.last_name]})]}),e.lead&&t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Lead:"}),t.jsx("p",{children:e.lead.title})]}),e.account&&t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Account:"}),t.jsx("p",{children:e.account.name})]}),e.contact&&t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Contact:"}),t.jsxs("p",{children:[e.contact.first_name," ",e.contact.last_name]})]}),e.deal&&t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Deal:"}),t.jsx("p",{children:e.deal.name})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Status:"}),t.jsx("p",{children:d(e.status||"PENDING").replace("_"," ")})]})]})}),l==="Notes"&&t.jsxs("div",{className:"mt-4 w-full",children:[t.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:t.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Meeting Note"})}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[t.jsx("div",{className:"flex items-start justify-between",children:t.jsx("div",{children:t.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),t.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:e.notes||"No notes available."})]})]}),l==="Activities"&&t.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:ft,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:dt,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((p,v)=>t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[t.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[t.jsx("div",{className:"text-gray-600 mt-1",children:t.jsx(p.icon,{size:24})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"font-medium text-gray-900 break-words",children:p.title}),t.jsx("p",{className:"text-sm text-gray-500 break-words",children:p.desc}),t.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[t.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),t.jsx("p",{className:"text-sm text-gray-700 break-words",children:p.user})]})]})]}),t.jsx("p",{className:"text-sm text-gray-500 break-words",children:p.date})]},v))]})]}),t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),t.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[t.jsxs("button",{onClick:()=>i("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Meeting"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),t.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>i("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Meeting"}}}),children:[t.jsx(dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),t.jsxs("button",{onClick:()=>i("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Meeting"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ts,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),t.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:f,onChange:p=>h(p.target.value),children:[t.jsx("option",{value:"PLANNED",children:"PLANNED"}),t.jsx("option",{value:"HELD",children:"HELD"}),t.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),t.jsx("button",{onClick:async()=>{if(!r||!e?.id)return;const p=m(f);if(d(e.status)!==f){N(!0);try{await r(e.id,p)}catch(v){console.error("Failed to update status:",v)}finally{N(!1)}}},disabled:f===e.status||y,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${f===e.status||y?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:y?"Updating...":"Update"})]})]})]})]})]})})})},x$=e=>e?e.toUpperCase():"",Ex=e=>{const s=x$(e);return s==="PLANNED"||s==="IN PROGRESS"?"PLANNED":s==="HELD"||s==="DONE"?"HELD":s==="NOT_HELD"||s==="NOT HELD"?"NOT_HELD":"PLANNED"},Loe=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},koe=e=>{const s=x$(e);switch(s==="PLANNED"?"PENDING":s==="HELD"?"COMPLETED":s==="NOT_HELD"?"CANCELLED":s){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},fw=10,hw={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},Rk=()=>{const e=it(),s=Xt(),[a]=Aa(),n=a.get("id"),r=s.pathname==="/admin/meetings/info";g.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[i,l]=g.useState([]),[c,d]=g.useState(!1),[m,f]=g.useState([]),[h,y]=g.useState(""),[N,w]=g.useState("Filter by Status"),[p,v]=g.useState(!1),[C,j]=g.useState(null),[_,T]=g.useState(1),[k,E]=g.useState(hw),[A,U]=g.useState(!1),[B,X]=g.useState(null),[$,O]=g.useState(!1),[G,K]=g.useState(null),[ae,R]=g.useState(!1);g.useEffect(()=>{const F=s.state?.openMeetingModal,ve=s.state?.initialMeetingData?.relatedTo||a.get("id");(F||ve)&&(v(!0),s.state?.initialMeetingData&&E(Ce=>({...Ce,...s.state.initialMeetingData})),e(s.pathname,{replace:!0,state:{}}))},[s,a,e]);const Z=async()=>{if(n&&r){const F=sessionStorage.getItem("meetingDetailData");if(F)try{const ve=JSON.parse(F);if(ve.id===parseInt(n)){j(ve),sessionStorage.removeItem("meetingDetailData");return}}catch(ve){console.error(ve)}}d(!0);try{const F=await se.get("/meetings/admin/fetch-all"),Ce=[...Array.isArray(F.data)?F.data:[]].sort((D,re)=>{const oe=D?.createdAt?new Date(D.createdAt).getTime():0;return(re?.createdAt?new Date(re.createdAt).getTime():0)-oe});if(l(Ce),n&&!C){const D=Ce.find(re=>re.id===parseInt(n));D&&j(D)}console.log(F.data)}catch{q.error("Failed to load meetings.")}finally{d(!1)}},te=async()=>{try{const F=await se.get("/users/all");f(Array.isArray(F.data)?F.data:[])}catch(F){console.error(F)}};g.useEffect(()=>{Z(),te()},[]);const ge=F=>y(F.target.value),le=g.useMemo(()=>{const F=h.trim().toLowerCase(),ve=N.trim().toUpperCase();return i.filter(Ce=>{const D=[Ce?.activity,Ce?.description,Ce?.relatedTo,Ce?.assignedTo],re=F===""||D.some(je=>je&&je.toString().toLowerCase().includes(F)),oe=ve==="FILTER BY STATUS"||Ex(Ce.status||"PENDING")===ve;return re&&oe})},[i,h,N]),W=g.useMemo(()=>{const F=(_-1)*fw;return le.slice(F,F+fw)},[le,_]),ee=()=>{v(!1),E(hw),U(!1),X(null),O(!1)},J=()=>{E(hw),U(!1),X(null),v(!0)},he=F=>{let ve="";if(F.meet_assign_to?.id)ve=String(F.meet_assign_to.id);else if(F.assignedTo){const qe=m.find(Ze=>`${Ze.first_name} ${Ze.last_name}`===F.assignedTo);ve=qe?String(qe.id):""}const Ce=qe=>{if(!qe)return"";try{const Ze=new Date(qe),we=Ze.getTimezoneOffset()*6e4;return new Date(Ze.getTime()-we).toISOString().slice(0,16)}catch{return""}};let D="Lead",re="",oe="Contact",je="";if(F.lead)D="Lead",re=String(F.lead.id);else if(F.account)D="Account",re=String(F.account.id),F.contact?(oe="Contact",je=String(F.contact.id)):F.deal&&(oe="Deal",je=String(F.deal.id));else if(F.relatedType||F.related_type){const qe=F.relatedType||F.related_type,Ze=F.related_to||F.relatedToId;qe==="Lead"?(D="Lead",re=String(Ze)):(D="Account",re=F.account_id?String(F.account_id):"")}const Re={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},Ke=Ex(F.status),et=Re[Ke]||"Planned";E({subject:F.subject||F.activity||"",location:F.location||"",startTime:Ce(F.start_time||F.startTime),endTime:Ce(F.end_time||F.endTime),status:et,notes:F.description||F.notes||"",assignedTo:ve,relatedType1:D,relatedTo1:re,relatedType2:oe,relatedTo2:je}),U(!0),X(F.id),j(null),v(!0)},be=F=>{if(!F.subject?.trim())return q.error("Subject is required.");if(!F.startTime)return q.error("Start time is required.");if(F.endTime&&!(new Date(F.endTime)-new Date(F.startTime)>0))return q.error("End time must be after start time.");F.relatedType1,F.relatedTo1,F.relatedType1==="Account"&&F.relatedType2&&F.relatedTo2&&(F.relatedType2,F.relatedTo2);const ve={...F,assignedTo:parseInt(F.assignedTo),relatedTo1:parseInt(F.relatedTo1),relatedTo2:parseInt(F.relatedTo2)},Ce=A&&B?"update":"create";K({title:Ce==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${Ce} "${ve.subject}"?`,confirmLabel:Ce==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:Ce,payload:ve,targetId:B,name:ve.subject}})},Le=async()=>{if(!G?.action)return;const{type:F,payload:ve,targetId:Ce,name:D}=G.action;console.log(ve),R(!0);try{F==="create"?(O(!0),await se.post("/meetings/create",ve),q.success(`Meeting "${D}" created.`),ee(),await Z()):F==="update"?(O(!0),await se.put(`/meetings/${Ce}`,ve),q.success(`Meeting "${D}" updated.`),ee(),await Z()):F==="delete"&&(await se.delete(`/meetings/${Ce}`),q.success(`Meeting "${D}" deleted.`),C?.id===Ce&&j(null),await Z())}catch(re){const oe=re.response?.data?.detail||"Action failed.";q.error(typeof oe=="string"?oe:JSON.stringify(oe)),console.error(oe)}finally{O(!1),R(!1),K(null)}},Me=F=>{K({title:"Delete Meeting",message:`Permanently delete "${F.activity}"?`,confirmLabel:"Delete",variant:"danger",action:{type:"delete",targetId:F.id,name:F.activity}})},ke=async(F,ve)=>{try{await se.put(`/meetings/${F}`,{status:ve}),q.success("Status updated"),Z(),j(null)}catch{q.error("Failed to update status")}};return r&&n?C?t.jsx(Gl,{meeting:C,onClose:()=>{j(null),e("/admin/dashboard")},onEdit:he,onDelete:Me,onStatusUpdate:ke}):t.jsx(xt,{message:"Loading meeting..."}):t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[c&&t.jsx(xt,{message:"Loading meetings..."}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[t.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[t.jsx(dt,{className:"mr-2 text-blue-600"})," Meetings"]}),t.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:t.jsxs("button",{onClick:J,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[t.jsx(Lt,{className:"mr-2"})," Add Meeting"]})})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[t.jsx(yt,{className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search meetings",value:h,onChange:ge,className:"w-full outline-none"})]}),t.jsxs("select",{value:N,onChange:F=>w(F.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[t.jsx("option",{children:"Filter by Status"}),t.jsx("option",{value:"PLANNED",children:"PLANNED"}),t.jsx("option",{value:"HELD",children:"HELD"}),t.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[t.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4",children:"Subject"}),t.jsx("th",{className:"py-3 px-4",children:"Related To"}),t.jsx("th",{className:"py-3 px-4",children:"Start Time"}),t.jsx("th",{className:"py-3 px-4",children:"Assigned"}),t.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),t.jsx("tbody",{children:W.length>0?W.map(F=>t.jsxs("tr",{onClick:()=>j(F),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[t.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:F.subject}),t.jsxs("td",{className:"py-3 px-4",children:[F.lead&&t.jsx("p",{className:"font-medium text-blue-500 text-xs",children:F.lead.title}),F.account&&t.jsx("p",{className:"font-medium text-blue-500 text-xs",children:F.account.name}),F.contact&&t.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[F.contact.first_name," ",F.contact.last_name]}),F.deal&&t.jsx("p",{className:"font-medium text-blue-500 text-xs",children:F.deal.name})]}),t.jsx("td",{className:"py-3 px-4",children:Loe(F.start_time)}),t.jsxs("td",{className:"py-3 px-4",children:[F.meet_assign_to.first_name," ",F.meet_assign_to.last_name]}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${koe(Ex(F.status))}`,children:Ex(F.status).replace("_"," ")})})]},F.id)):t.jsx("tr",{children:t.jsx("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),t.jsx(Ct,{totalItems:le.length,pageSize:fw,currentPage:_,onPrev:()=>T(F=>Math.max(1,F-1)),onNext:()=>T(F=>F+1),label:"meetings"}),p&&t.jsx(Iy,{onClose:ee,formData:k,setFormData:E,isEditing:A,onSubmit:be,isSubmitting:$||ae,users:m}),C&&t.jsx(Gl,{meeting:C,onClose:()=>j(null),onEdit:he,onDelete:Me,onStatusUpdate:ke}),G&&t.jsx(Doe,{open:!0,title:G.title,message:G.message,confirmLabel:G.confirmLabel,variant:G.variant,onConfirm:Le,onCancel:()=>K(null),loading:ae})]})};function Doe({open:e,title:s,message:a,confirmLabel:n,cancelLabel:r="Cancel",variant:i="primary",loading:l,onConfirm:c,onCancel:d}){if(!e)return null;const m=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s}),t.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsx("button",{onClick:d,disabled:l,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),t.jsx("button",{onClick:c,disabled:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${m}`,children:l?"...":n})]})]})})}function Moe({toggleSidebar:e}){const[s,a]=g.useState(!1),[n,r]=g.useState(!1),[i,l]=g.useState([]),[c,d]=g.useState(0),m=g.useRef(null),f=g.useRef(null),h=Xt(),y=it(),{logout:N}=er(),{user:w,fetchUser:p}=zt(),C={"/sales/overview":"Overview","/sales/hub":"Sales Hub","/sales/accounts":"Accounts","/sales/contacts":"Contacts","/sales/leads":"Leads","/sales/deals":"Deals","/sales/quotes":"Quotes","/sales/targets":"Targets","/sales/reports":"Reports","/sales/tasks":"Tasks"}[h.pathname]||"Sales Panel";g.useEffect(()=>{p()},[]);const j=E=>{const A=String(E.action||E.type||"").toLowerCase(),U=String(E.title||E.description||"").toLowerCase(),B=A.includes("create"),X=A.includes("update");return U.includes("task")?"task_assignment":U.includes("territory")?"territory_assignment":U.includes("lead")?B?"lead_assignment":"lead_update":U.includes("contact")?B?"contact_assignment":"contact_update":U.includes("deal")?B?"deal_assignment":"deal_update":U.includes("account")?B?"account_assignment":"account_update":"info"},_=E=>{const A={...E};switch(A.read=!!A.read,A.type){case"territory_assignment":A.title=A.title||`You have been assigned to ${A.territoryName||"a territory"}`;break;case"lead_assigned":A.type="lead_assignment",A.title=A.title||`New lead assigned: ${A.leadName||A.company||"Lead"}`;break;case"lead_assignment":A.title=A.title||`New lead assigned: ${A.leadName||A.company||"Lead"}`;break;case"lead_update":A.title=A.title||`Lead updated: ${A.leadName||A.company||"Lead"}`;break;case"task_assignment":A.title=A.title||`New Task Assigned: ${A.taskTitle||"Task"}`;break;case"contact_assignment":A.title=A.title||`New contact assigned: ${A.contactName||A.contact||"Contact"}`;break;case"contact_update":A.title=A.title||`Contact updated: ${A.contactName||A.contact||"Contact"}`;break;case"deal_assignment":A.title=A.title||`New deal assigned: ${A.dealName||A.name||"Deal"}`;break;case"deal_update":A.title=A.title||`Deal updated: ${A.dealName||A.name||"Deal"}`;break;case"account_assignment":A.title=A.title||`New account assigned: ${A.accountName||A.name||"Account"}`;break;case"account_update":A.title=A.title||`Account updated: ${A.accountName||A.name||"Account"}`;break;default:A.title=A.title||"New Notification"}return A},T=E=>{switch(E.type){case"task_assignment":y(`/sales/hub/${E.taskId||E.task_id||""}`);break;case"lead_assignment":case"lead_update":y(`/sales/leads/${E.leadId||E.lead_id||""}`);break;case"contact_assignment":case"contact_update":y(`/sales/contacts/${E.contactId||E.contact_id||""}`);break;case"deal_assignment":case"deal_update":y(`/sales/deals/${E.dealId||E.deal_id||""}`);break;case"account_assignment":case"account_update":y(`/sales/accounts/${E.accountId||E.account_id||""}`);break;default:y("/sales/overview")}},k=async E=>{if(E.read){T(E);return}try{await se.patch(`/logs/mark-read/${E.id}`),l(A=>A.map(U=>U.id===E.id?{...U,read:!0}:U)),d(A=>A>0?A-1:0),T(E)}catch(A){console.error("Failed to mark notification as read",A),T(E)}};return g.useEffect(()=>{if(!w?.id)return;const E=new WebSocket(`ws://localhost:8000/ws/notifications?user_id=${w.id}`);return E.onopen=()=>console.log("WS Connected"),E.onmessage=A=>{const U=JSON.parse(A.data),B=_(U);l(X=>[B,...X]),d(X=>X+1)},E.onclose=()=>console.log("WS Disconnected"),E.onerror=A=>console.error("WS Error",A),()=>E.close()},[w?.id]),g.useEffect(()=>{const E=async()=>{try{const U=((await se.get("/logs/read-all")).data||[]).map(B=>_({id:B.id,type:B.notif_type||B.notification_type||B.type||j(B),title:B.title||B.description,assignedBy:B.assignedBy||B.name,createdAt:B.createdAt||B.timestamp,read:B.is_read??B.read??!1,leadId:B.leadId||B.lead_id,taskId:B.taskId||B.task_id,contactId:B.contactId||B.contact_id,dealId:B.dealId||B.deal_id,accountId:B.accountId||B.account_id}));l(U),d(U.filter(B=>!B.read).length)}catch(A){console.error("Failed to load history notifications",A)}};w?.id&&E()},[w?.id]),g.useEffect(()=>{function E(A){m.current&&!m.current.contains(A.target)&&a(!1),f.current&&!f.current.contains(A.target)&&r(!1)}return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[]),t.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:t.jsx(m1,{className:"text-2xl"})}),t.jsx("h1",{className:"text-lg sm:text-xl font-semibold text-gray-800 truncate max-w-[150px] sm:max-w-none",children:C})]}),t.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[t.jsxs("div",{className:"relative",ref:f,children:[t.jsxs("button",{onClick:()=>r(!n),className:"relative text-gray-600 hover:text-gray-800 transition",children:[t.jsx(ch,{className:"text-xl sm:text-2xl"}),c>0&&t.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] w-4 h-4 flex items-center justify-center rounded-full font-semibold",children:c})]}),n&&t.jsxs("div",{className:"absolute right-0 mt-3 w-80 bg-white rounded-xl shadow-lg border z-50 overflow-hidden animate-fade-in",children:[t.jsxs("div",{className:"p-3 border-b bg-gray-50 flex justify-between items-center",children:[t.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:"Notifications"}),i.length>0&&t.jsx("button",{onClick:()=>{l([]),d(0)},className:"text-xs text-blue-600 hover:underline",children:"Clear all"})]}),t.jsx("div",{className:"max-h-80 overflow-y-auto",children:i.length>0?i.map((E,A)=>t.jsxs("div",{onClick:()=>k(E),className:`p-4 border-b hover:bg-gray-50 cursor-pointer transition ${E.read?"bg-gray-50":"bg-white"}`,children:[t.jsxs("div",{className:"flex justify-between items-center mb-1",children:[t.jsx("span",{className:`text-[10px] px-2 py-1 rounded-full font-semibold uppercase
                            ${E.type==="task_assignment"?"bg-purple-100 text-purple-700":E.type==="lead_assignment"||E.type==="lead_update"?"bg-green-100 text-green-700":E.type==="contact_assignment"||E.type==="contact_update"?"bg-amber-100 text-amber-700":E.type==="deal_assignment"||E.type==="deal_update"?"bg-indigo-100 text-indigo-700":E.type==="account_assignment"||E.type==="account_update"?"bg-cyan-100 text-cyan-700":E.type==="territory_assignment"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:E.type==="task_assignment"?"Task":E.type==="lead_assignment"?"Lead":E.type==="lead_update"?"Lead Update":E.type==="contact_assignment"?"Contact":E.type==="contact_update"?"Contact Update":E.type==="deal_assignment"?"Deal":E.type==="deal_update"?"Deal Update":E.type==="account_assignment"?"Account":E.type==="account_update"?"Account Update":E.type==="territory_assignment"?"Territory":"Info"}),!E.read&&t.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"font-medium text-gray-800 text-sm",children:E.title}),t.jsx("span",{className:"text-xs text-gray-600 mt-0.5",children:E.assignedBy?`Assigned by ${E.assignedBy}`:"System"}),t.jsx("span",{className:"text-[11px] text-gray-400 mt-1",children:E.createdAt?new Date(E.createdAt).toLocaleString():""})]})]},E.id??A)):t.jsx("div",{className:"p-6 text-center text-gray-500 text-sm",children:"No new notifications"})})]})]}),t.jsxs("div",{className:"relative",ref:m,children:[t.jsxs("button",{onClick:()=>a(!s),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[t.jsx("img",{src:w?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 aspect-square object-cover rounded-full"}),t.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[w?.first_name," ",w?.last_name]})]}),s&&t.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4",children:[t.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[t.jsx("img",{src:w?.profile_picture||"https://via.placeholder.com/80",alt:"Profile",className:"w-16 h-16 rounded-full object-cover"}),t.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[w?.first_name," ",w?.middle_name," ",w?.last_name]})]}),t.jsxs("div",{className:"mt-4 space-y-1 px-4 text-left",children:[t.jsx("button",{className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-2 rounded text-left",onClick:()=>{y("/sales/manage-account"),a(!1)},children:"Manage Your Account"}),t.jsx("div",{className:"border-t border-gray-200 my-2"}),t.jsx("button",{onClick:N,className:"block w-full text-sm text-red-600 hover:text-red-700 hover:bg-gray-50 py-2 rounded text-left",children:"Logout"})]})]})]})]})]})}function Poe(){const[e,s]=g.useState(!1),[a,n]=g.useState(!1),{user:r}=zt();g.useEffect(()=>{r&&console.log("Fetched user:",r)},[r]);const i="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",l="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition";return t.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[t.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
        ${e?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[t.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[t.jsx("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:"Sales CRM"}),r&&r.company&&t.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:r.company.company_name})]}),t.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[t.jsxs(mt,{to:"/sales/overview",className:({isActive:c})=>c?i:l,children:[t.jsx(dh,{className:"text-lg"}),t.jsx("span",{children:"Overview"})]}),t.jsxs(mt,{to:"/sales/hub",className:({isActive:c})=>c?i:l,children:[t.jsx(H8,{className:"text-lg"}),t.jsx("span",{children:"Sales Hub"})]}),t.jsxs(mt,{to:"/sales/accounts",className:({isActive:c})=>c?i:l,children:[t.jsx(Jt,{className:"text-lg"}),t.jsx("span",{children:"Accounts"})]}),t.jsxs(mt,{to:"/sales/contacts",className:({isActive:c})=>c?i:l,children:[t.jsx(qt,{className:"text-lg"}),t.jsx("span",{children:"Contacts"})]}),t.jsxs(mt,{to:"/sales/leads",className:({isActive:c})=>c?i:l,children:[t.jsx(Cs,{className:"text-lg"}),t.jsx("span",{children:"Leads"})]}),t.jsxs(mt,{to:"/sales/deals",className:({isActive:c})=>c?i:l,children:[t.jsx(Es,{className:"text-lg"}),t.jsx("span",{children:"Deals"})]}),t.jsxs(mt,{to:"/sales/quotes",className:({isActive:c})=>c?i:l,children:[t.jsx(en,{className:"text-lg"}),t.jsx("span",{children:"Quotes"})]}),t.jsxs(mt,{to:"/sales/targets",className:({isActive:c})=>c?i:l,children:[t.jsx(sn,{className:"text-lg"}),t.jsx("span",{children:"Targets"})]}),t.jsxs("div",{children:[t.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>n(!a),children:[t.jsxs("span",{className:"flex items-center gap-2",children:[t.jsx(Ta,{className:"text-lg"}),"Activity"]}),t.jsx(Xa,{className:`transition-transform ${a?"rotate-180":""}`})]}),a&&t.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[t.jsxs(mt,{to:"/sales/tasks",className:({isActive:c})=>c?i:l,children:[t.jsx(ts,{})," Tasks"]}),t.jsxs(mt,{to:"/sales/meetings",className:({isActive:c})=>c?i:l,children:[t.jsx(dt,{})," Meetings"]}),t.jsxs(mt,{to:"/sales/calls",className:({isActive:c})=>c?i:l,children:[t.jsx(Ea,{})," Calls"]}),t.jsxs(mt,{to:"/sales/audit",className:({isActive:c})=>c?i:l,children:[t.jsx(Ta,{})," Audit"]})]})]}),t.jsxs(mt,{to:"/sales/manage-account",className:({isActive:c})=>c?i:l,children:[t.jsx(qt,{className:"text-lg"}),t.jsx("span",{children:"Manage Account"})]})]}),t.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),e&&t.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>s(!1)}),t.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[t.jsx(Moe,{toggleSidebar:()=>s(!0)}),t.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:t.jsx(fu,{})})]})]})}function Ooe(){g.useEffect(()=>{document.title="SalesOverview | Sari-Sari CRM"},[]);const{user:e,loading:s}=zt(),[a,n]=g.useState({contacts:0,leads:0,calls_today:0,target_progress:0}),[r,i]=g.useState([]);return g.useEffect(()=>{(async()=>{try{const c=await se.get("/sales/overview");n(c.data)}catch(c){console.error("Error fetching sales overview:",c)}})()},[]),g.useEffect(()=>{(async()=>{if(e)try{const c=await se.get("/territories/myterritory");i(c.data)}catch(c){console.error("Error fetching territories:",c)}})()},[e]),s?t.jsx("p",{className:"text-gray-500",children:"Loading user data..."}):t.jsxs("div",{className:"space-y-10",children:[t.jsxs("div",{className:"flex items-center mb-8",children:[t.jsx(qt,{className:"text-2xl text-gray-700 mr-2"}),t.jsx("h1",{className:"text-2xl font-semibold text-gray-800",children:"SALES Dashboard"})]}),t.jsxs("div",{className:"bg-white shadow-sm rounded-lg p-6 grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Full Name"}),t.jsxs("p",{className:"font-medium text-gray-900",children:[e?.first_name," ",e?.last_name]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Last Login"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(dt,{className:"text-gray-600"}),t.jsx("p",{className:"font-medium text-gray-900",children:e?.last_login?new Date(e.last_login).toLocaleString("en-PH",{timeZone:"Asia/Manila",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"N/A"})]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Date Joined"}),t.jsx("p",{className:"font-medium text-gray-900",children:e?.created_at?new Date(e.created_at).toLocaleDateString():"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),t.jsx("p",{className:"font-medium text-gray-900",children:e?.email})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Territories"}),t.jsx("div",{className:"flex flex-col gap-2",children:r.length>0?r.map(l=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(V8,{className:"text-gray-600"}),t.jsx("p",{className:"font-medium text-gray-900",children:l.name})]},l.id)):t.jsx("p",{className:"font-medium text-gray-900",children:"No territories assigned"})})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),t.jsx("span",{className:"bg-black text-white text-xs font-semibold px-3 py-1 rounded-full",children:e?.is_active?"Active":"Inactive"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md flex flex-col items-center",children:[t.jsx(Jt,{className:"text-blue-600 text-3xl mb-2"}),t.jsx("p",{className:"text-sm text-gray-500",children:"My Contacts"}),t.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a.contacts??0})]}),t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md flex flex-col items-center",children:[t.jsx(sn,{className:"text-green-600 text-3xl mb-2"}),t.jsx("p",{className:"text-sm text-gray-500",children:"My Leads"}),t.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a.leads??0})]}),t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md flex flex-col items-center",children:[t.jsx(Ea,{className:"text-orange-500 text-3xl mb-2"}),t.jsx("p",{className:"text-sm text-gray-500",children:"My Calls Today"}),t.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a.calls_today??0})]}),t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md flex flex-col items-center",children:[t.jsx(Qn,{className:"text-purple-600 text-3xl mb-2"}),t.jsx("p",{className:"text-sm text-gray-500",children:"My Target Progress"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-800",children:[a.target_progress??0,"%"]})]})]}),t.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Recent Activities"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mt-2"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-800 font-medium",children:"Deal moved to negotiation: TechStart Inc."}),t.jsx("p",{className:"text-sm text-gray-500",children:"1 hour ago"})]})]}),t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-800 font-medium",children:"Follow-up call scheduled with Global Solutions"}),t.jsx("p",{className:"text-sm text-gray-500",children:"3 hours ago"})]})]})]})]})]})}function Ioe({isOpen:e,onClose:s}){const[a,n]=g.useState(""),[r,i]=g.useState("Call"),[l,c]=g.useState("Medium"),[d,m]=g.useState(""),[f,h]=g.useState("Lead"),[y,N]=g.useState(""),[w,p]=g.useState(""),v=C=>{C.preventDefault(),console.log({title:a,type:r,priority:l,dueDate:d,relatedTo:f,description:y,notes:w}),s()};return t.jsx(ja,{appear:!0,show:e,as:g.Fragment,children:t.jsxs(Ai,{as:"div",className:"relative z-50",onClose:s,children:[t.jsx(ja.Child,{as:g.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:t.jsx("div",{className:"fixed inset-0 bg-black/40"})}),t.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:t.jsx(ja.Child,{as:g.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-150",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:t.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-6 lg:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh]",children:[t.jsx("button",{onClick:s,"aria-label":"Close modal",className:"absolute top-3 right-3 p-2 text-2xl leading-none rounded-full text-gray-500 hover:text-black hover:bg-gray-100 transition",children:""}),t.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:"Create New Task"}),t.jsxs("form",{onSubmit:v,className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Title *"}),t.jsx("input",{type:"text",value:a,onChange:C=>n(C.target.value),required:!0,placeholder:"Enter task title",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Description"}),t.jsx("textarea",{value:y,onChange:C=>N(C.target.value),placeholder:"Optional details about the task",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",rows:3})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Type"}),t.jsxs("select",{value:r,onChange:C=>i(C.target.value),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",children:[t.jsx("option",{children:"Call"}),t.jsx("option",{children:"Email"}),t.jsx("option",{children:"Meeting"}),t.jsx("option",{children:"Follow-up"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Priority"}),t.jsxs("select",{value:l,onChange:C=>c(C.target.value),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",children:[t.jsx("option",{children:"Low"}),t.jsx("option",{children:"Medium"}),t.jsx("option",{children:"High"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Due Date *"}),t.jsx("input",{type:"datetime-local",value:d,onChange:C=>m(C.target.value),required:!0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Related To"}),t.jsxs("select",{value:f,onChange:C=>h(C.target.value),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",children:[t.jsx("option",{children:"Lead"}),t.jsx("option",{children:"Account"}),t.jsx("option",{children:"Deal"}),t.jsx("option",{children:"Contact"})]})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),t.jsx("textarea",{value:w,onChange:C=>p(C.target.value),placeholder:"Add any internal notes or comments",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",rows:3})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[t.jsx("button",{type:"button",onClick:s,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),t.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition",children:"Create Task"})]})]})]})})})]})})}function $oe(){const[e,s]=g.useState(!1);return t.jsxs("div",{className:"p-6 min-h-screen hide-scrollbar",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[t.jsx(sn,{className:"text-blue-600"})," Sales Dashboard"]}),t.jsx("p",{className:"text-gray-600 text-sm",children:"Manage your leads, tasks, and sales activities"})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("button",{onClick:()=>s(!0),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base ml-auto sm:ml-0 cursor-pointer",children:[t.jsx(Lt,{className:"text-lg"})," New Task"]}),t.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base ml-auto sm:ml-0 cursor-pointer",children:[t.jsx(Qn,{className:"text-lg"})," Log Activity"]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[t.jsxs("div",{className:"p-4 bg-white rounded-xl shadow-md border-l-4 border-blue-500",children:[t.jsx("p",{className:"text-gray-500 text-sm mb-2",children:"Target Progress"}),t.jsx("h2",{className:"text-2xl font-bold",children:"0%"}),t.jsx("div",{className:"mt-2 w-full bg-gray-200 h-2 rounded-full",children:t.jsx("div",{className:"bg-blue-500 h-2 rounded-full w-0"})})]}),t.jsxs("div",{className:"p-4 bg-white rounded-xl shadow-md border-l-4 border-green-500",children:[t.jsx("p",{className:"text-gray-500 text-sm mb-2",children:"Revenue (Won)"}),t.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-1",children:[t.jsx(vr,{})," 0"]}),t.jsx("p",{className:"text-sm text-gray-400",children:"0 won deals"})]}),t.jsxs("div",{className:"p-4 bg-white rounded-xl shadow-md border-l-4 border-purple-500",children:[t.jsx("p",{className:"text-gray-500 text-sm mb-2",children:"Active Deals"}),t.jsx("h2",{className:"text-2xl font-bold",children:"2"}),t.jsx("p",{className:"text-sm text-gray-400",children:"2 leads in pipeline"})]}),t.jsxs("div",{className:"p-4 bg-white rounded-xl shadow-md border-l-4 border-orange-500",children:[t.jsx("p",{className:"text-gray-500 text-sm mb-2",children:"Tasks Today"}),t.jsx("h2",{className:"text-2xl font-bold",children:"0"}),t.jsx("p",{className:"text-sm text-gray-400",children:"1 pending task"})]})]}),t.jsxs("div",{className:"flex space-x-3 mb-6",children:[t.jsx(mt,{to:"/sales/hub/mytasks",className:({isActive:a})=>`px-4 py-2 rounded-full text-sm font-medium ${a?"bg-tertiary text-white":"text-gray-600 hover:bg-gray-100"}`,children:"My Tasks"}),t.jsx(mt,{to:"/sales/hub/activities",className:({isActive:a})=>`px-4 py-2 rounded-full text-sm font-medium ${a?"bg-tertiary text-white":"text-gray-600 hover:bg-gray-100"}`,children:"Activities"}),t.jsx(mt,{to:"/sales/hub/pipeline",className:({isActive:a})=>`px-4 py-2 rounded-full text-sm font-medium ${a?"bg-tertiary text-white":"text-gray-600 hover:bg-gray-100"}`,children:"My Pipeline"}),t.jsx(mt,{to:"/sales/hub/performance",className:({isActive:a})=>`px-4 py-2 rounded-full text-sm font-medium ${a?"bg-tertiary text-white":"text-gray-600 hover:bg-gray-100"}`,children:"Performance"})]}),t.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4",children:t.jsx(fu,{})}),t.jsx(Ioe,{isOpen:e,onClose:()=>s(!1)})]})}function Roe(){const e=[{id:1,type:"call",title:"Discovery call with Acme Corp",status:"COMPLETED",description:"Discussed requirements and pain points",outcome:"Positive - moving to proposal stage",duration:"30 min",date:"10/12/2025",account:"Acme Enterprise License"},{id:2,type:"email",title:"Pricing information request",status:"COMPLETED",description:"Sent detailed pricing breakdown for enterprise package",date:"10/12/2025",contact:"Emma Wilson"}];return t.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 min-h-[80vh] p-6 rounded-lg",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsxs("h1",{className:"text-xl font-semibold flex items-center gap-2 text-gray-800",children:[t.jsx("span",{className:"text-purple-600",children:""})," Sales Activities"]}),t.jsxs("div",{className:"flex items-center gap-2 bg-white shadow-sm border rounded-lg px-3 py-2 cursor-pointer hover:bg-gray-50",children:[t.jsx(B8,{className:"text-gray-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:"All Time "})]})]}),t.jsx("div",{className:"space-y-4",children:e.map(s=>t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-5 border border-gray-100 flex flex-col gap-3 hover:shadow-md transition",children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[s.type==="call"?t.jsx(ft,{className:"text-green-600 text-xl"}):t.jsx(js,{className:"text-green-600 text-xl"}),t.jsxs("div",{children:[t.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[s.title,t.jsx("span",{className:"text-xs bg-green-100 text-green-700 font-medium px-2 py-0.5 rounded-full",children:s.status})]}),t.jsx("p",{className:"text-gray-600 text-sm",children:s.description})]})]}),t.jsxs("div",{className:"flex gap-3 text-lg text-gray-500",children:[t.jsx("button",{className:"hover:text-blue-600",children:t.jsx(hs,{})}),t.jsx("button",{className:"hover:text-red-600",children:t.jsx(Nt,{})})]})]}),s.outcome&&t.jsxs("div",{className:"bg-green-50 border border-green-100 text-green-700 text-sm px-4 py-2 rounded-lg flex items-center gap-2",children:[" Outcome: ",s.outcome]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-500",children:[s.duration&&t.jsxs("p",{className:"flex items-center gap-1",children:[" ",s.duration]}),t.jsxs("p",{className:"flex items-center gap-1",children:[" ",s.date]}),s.account&&t.jsxs("p",{className:"flex items-center gap-1",children:[" ",s.account]}),s.contact&&t.jsxs("p",{className:"flex items-center gap-1",children:[" ",s.contact]})]})]},s.id))})]})}function Uoe(){g.useEffect(()=>{document.title="Saleshub | Sari-Sari CRM"},[]);const[e,s]=g.useState([]),[a,n]=g.useState([]),[r,i]=g.useState([]),[l,c]=g.useState(null),[d,m]=g.useState({title:"",description:"",type:"Call",priority:"MEDIUM",status:"To Do",dueDate:"",assignedTo:"",relatedTo:"",notes:""}),[f,h]=g.useState(!1),[y,N]=g.useState(null),[w,p]=g.useState(!1),[v,C]=g.useState("All Tasks"),[j,_]=g.useState(!1),T=new Date,k=R=>R.dueDate&&new Date(R.dueDate)<T&&R.status!=="Completed",E=async()=>{try{const Z=(await se.get("/tasks/assigned")).data.sort((te,ge)=>{const le=new Date(te.dueDate||te.dateAssigned);return new Date(ge.dueDate||ge.dateAssigned)-le});s(Z),n(Z)}catch(R){console.error("Error fetching tasks:",R)}},A=async()=>{try{const R=await se.get("/sales");i(R.data)}catch(R){console.error("Error fetching sales list:",R)}};g.useEffect(()=>{E(),A()},[]);const U=R=>{if(C(R),R==="All Tasks")n(e);else{const Z=e.filter(te=>te.status===R);n(Z)}_(!1)},B=R=>{c(R),m({title:R.title||"",description:R.description||"",type:R.type||"Call",priority:R.priority||"MEDIUM",status:R.status||"To Do",dueDate:R.dueDate||"",assignedTo:R.assignedTo||"",relatedTo:R.relatedTo||"",notes:R.notes||""})},X=R=>{m({...d,[R.target.name]:R.target.value})},$=R=>{R.preventDefault(),p(!0)},O=async()=>{try{await se.put(`/tasks/${l.id}`,d),E(),c(null),p(!1)}catch(R){console.error("Error updating task:",R)}},G=async()=>{try{await se.delete(`/tasks/${y.id}`),E(),h(!1),N(null)}catch(R){console.error("Error deleting task:",R)}},K={HIGH:"bg-orange-100 text-orange-700",MEDIUM:"bg-yellow-100 text-yellow-700",LOW:"bg-green-100 text-green-700"},ae=["All Tasks","To Do","In Progress","Completed"];return t.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 min-h-[80vh] p-6 rounded-lg",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2 text-blue-700",children:[t.jsx(ya,{className:"text-blue-600"})," My Tasks & Follow-ups"]}),t.jsxs("div",{className:"relative w-full max-w-3xs",children:[t.jsx("div",{className:"flex items-center w-full gap-2 bg-white shadow-sm border rounded-lg px-3 py-2 cursor-pointer hover:bg-gray-50",onClick:()=>_(!j),children:t.jsxs("span",{className:"text-sm text-gray-700",children:[v," "]})}),j&&t.jsx("div",{className:"absolute mt-1 w-full bg-white border border-gray-300 rounded-lg shadow-md z-10",children:ae.map(R=>t.jsx("div",{className:"px-3 py-2 hover:bg-gray-100 w-full cursor-pointer text-sm text-gray-700",onClick:()=>U(R),children:R},R))})]})]}),t.jsx("div",{className:"space-y-4",children:Array.isArray(a)&&a.length>0?a.map(R=>t.jsxs("div",{className:`rounded-xl shadow-sm p-5 flex flex-col gap-3 hover:shadow-md transition
                ${k(R)?"bg-red-50 border border-red-200":"bg-white border border-gray-100"}`,children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(ft,{className:"text-blue-600 text-xl"}),t.jsxs("div",{children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[R.title,t.jsx("span",{className:`text-xs font-medium px-2 py-0.5 rounded-full ${k(R)?"bg-red-100 text-red-700":K[R.priority]}`,children:R.priority})]}),t.jsx("p",{className:"text-gray-600 text-sm",children:R.description})]})]}),t.jsxs("div",{className:"flex gap-3 text-lg text-gray-500",children:[t.jsx("button",{className:"hover:text-blue-600",onClick:()=>B(R),children:t.jsx(hs,{})}),t.jsx("button",{className:"hover:text-red-600",onClick:()=>{N(R),h(!0)},children:t.jsx(Nt,{})})]})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm",children:[t.jsxs("p",{className:`flex items-center gap-1 ${k(R)?"text-red-600 font-medium":"text-gray-500"}`,children:[" ",R.dueDate?.split("T")[0]]}),t.jsxs("p",{className:"text-gray-500 flex items-center gap-1",children:[" ",R.assignedTo]}),t.jsxs("p",{className:"text-gray-500 flex items-center gap-1",children:[" ",R.type]})]})]},R.id)):t.jsx("p",{className:"text-gray-500 text-sm text-center",children:"No tasks assigned yet."})}),t.jsx(ja,{appear:!0,show:!!l,as:g.Fragment,children:t.jsxs(Ai,{as:"div",className:"relative z-50",onClose:()=>c(null),children:[t.jsx(ja.Child,{as:g.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm"})}),t.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 overflow-y-auto",children:t.jsx("div",{className:"flex min-h-full items-center justify-center text-center",children:t.jsx(ja.Child,{as:g.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-150",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:t.jsxs(Ai.Panel,{className:"w-full max-w-xl rounded-2xl bg-white shadow-2xl ring-1 ring-gray-100 p-6 text-left align-middle transform transition-all max-h-[90vh] flex flex-col",children:[t.jsxs("div",{className:"flex justify-between items-start gap-4 mb-4",children:[t.jsx("div",{children:t.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Edit Task"})}),t.jsx("button",{onClick:()=>c(null),"aria-label":"Close modal",className:"text-gray-400 hover:text-gray-600 transition text-xl leading-none",children:""})]}),t.jsxs("form",{onSubmit:$,className:"space-y-5 overflow-y-auto pr-2",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Title *"}),t.jsx("input",{type:"text",name:"title",value:d.title,onChange:X,required:!0,placeholder:"Enter task title",className:"w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Description"}),t.jsx("textarea",{name:"description",value:d.description,onChange:X,placeholder:"Enter task description",rows:2,className:"w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Type"}),t.jsxs("select",{name:"type",value:d.type,onChange:X,className:"w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{children:"Call"}),t.jsx("option",{children:"Meeting"}),t.jsx("option",{children:"Email"}),t.jsx("option",{children:"Follow-up"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Priority"}),t.jsxs("select",{name:"priority",value:d.priority,onChange:X,className:"w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{children:"Low"}),t.jsx("option",{children:"Medium"}),t.jsx("option",{children:"High"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Status"}),t.jsxs("select",{name:"status",value:d.status,onChange:X,className:"w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{children:"To Do"}),t.jsx("option",{children:"In Progress"}),t.jsx("option",{children:"Completed"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Due Date *"}),t.jsx("input",{type:"datetime-local",name:"dueDate",value:d.dueDate,onChange:X,required:!0,className:"w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Assign To"}),t.jsxs("select",{name:"assignedTo",value:d.assignedTo,onChange:X,className:"w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"",children:"Select sales representative"}),r.map(R=>t.jsxs("option",{value:R.id,children:[R.first_name," ",R.last_name]},R.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Related To"}),t.jsxs("select",{name:"relatedTo",value:d.relatedTo,onChange:X,className:"w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"",children:"Select type"}),t.jsx("option",{children:"Lead"}),t.jsx("option",{children:"Opportunity"}),t.jsx("option",{children:"Customer"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Notes"}),t.jsx("textarea",{name:"notes",value:d.notes,onChange:X,placeholder:"Additional notes...",rows:2,className:"w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t mt-6",children:[t.jsx("button",{type:"button",onClick:()=>c(null),className:"px-4 py-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50 transition",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 focus:ring-2 focus:ring-blue-400 transition",children:"Update Task"})]})]})]})})})})]})}),t.jsx(ja,{appear:!0,show:w,as:g.Fragment,children:t.jsxs(Ai,{as:"div",className:"relative z-50",onClose:()=>p(!1),children:[t.jsx(ja.Child,{as:g.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm"})}),t.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:t.jsx(ja.Child,{as:g.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-150",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:t.jsxs(Ai.Panel,{className:"w-full max-w-sm rounded-2xl bg-white shadow-2xl ring-1 ring-gray-100 p-6 text-center transform transition-all",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Confirm Update"}),t.jsx("p",{className:"text-gray-600 text-sm mb-6",children:"Are you sure you want to update this task?"}),t.jsxs("div",{className:"flex justify-center gap-3",children:[t.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50 transition",children:"Cancel"}),t.jsx("button",{onClick:O,className:"px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition",children:"Confirm"})]})]})})})]})}),t.jsx(ja,{appear:!0,show:f,as:g.Fragment,children:t.jsxs(Ai,{as:"div",className:"relative z-50",onClose:()=>h(!1),children:[t.jsx(ja.Child,{as:g.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm"})}),t.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:t.jsx(ja.Child,{as:g.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-150",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:t.jsxs(Ai.Panel,{className:"w-full max-w-sm rounded-2xl bg-white shadow-2xl ring-1 ring-gray-100 p-6 text-center transform transition-all",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Delete Task"}),t.jsxs("p",{className:"text-gray-600 text-sm mb-6",children:["Are you sure you want to delete this task? ",t.jsx("br",{}),"This action cannot be undone."]}),t.jsxs("div",{className:"flex justify-center gap-3",children:[t.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50 transition",children:"Cancel"}),t.jsx("button",{onClick:G,className:"px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 transition",children:"Delete"})]})]})})})]})})]})}function zoe(){return t.jsx("div",{className:"p-6 bg-gradient-to-b from-blue-50 to-white rounded-2xl",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-green-50 border border-green-100 rounded-2xl shadow-sm",children:[t.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-green-100",children:[t.jsxs("h2",{className:"text-green-700 font-semibold flex items-center gap-2",children:[t.jsx(Jt,{})," My Leads"]}),t.jsx("span",{className:"bg-green-100 text-green-700 text-xs px-2 py-1 rounded-full font-medium",children:"2"})]}),t.jsxs("div",{className:"p-4 space-y-3",children:[t.jsxs("div",{className:"bg-white border border-green-100 rounded-xl p-4 hover:shadow-md transition",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-gray-800",children:"Emma Wilson"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Startup Ventures"})]}),t.jsxs("p",{className:"text-xs text-gray-400 flex items-center gap-1",children:[t.jsx(ya,{})," 1/20/2024"]})]}),t.jsx("div",{className:"mt-3",children:t.jsx("span",{className:"text-xs font-medium bg-green-100 text-green-700 px-3 py-1 rounded-md",children:"QUALIFIED"})})]}),t.jsxs("div",{className:"bg-white border border-green-100 rounded-xl p-4 hover:shadow-md transition",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-gray-800",children:"Robert Davis"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Manufacturing Plus"})]}),t.jsxs("p",{className:"text-xs text-gray-400 flex items-center gap-1",children:[t.jsx(ya,{})," 1/25/2024"]})]}),t.jsxs("div",{className:"mt-3 flex justify-between items-center",children:[t.jsx("span",{className:"text-xs font-medium bg-blue-50 text-blue-700 px-3 py-1 rounded-md",children:"NEW"}),t.jsx("button",{className:"bg-green-600 text-white text-xs px-3 py-1 rounded-lg hover:bg-green-700 transition",children:"Contact"})]})]})]})]}),t.jsxs("div",{className:"bg-yellow-50 border border-yellow-100 rounded-2xl shadow-sm",children:[t.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-yellow-100",children:[t.jsxs("h2",{className:"text-yellow-700 font-semibold flex items-center gap-2",children:[t.jsx(vr,{})," My Deals"]}),t.jsx("span",{className:"bg-yellow-100 text-yellow-700 text-xs px-2 py-1 rounded-full font-medium",children:"2"})]}),t.jsxs("div",{className:"p-4 space-y-3",children:[t.jsxs("div",{className:"bg-white border border-yellow-100 rounded-xl p-4 hover:shadow-md transition",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-gray-800",children:"Acme Enterprise License"}),t.jsx("p",{className:"text-sm text-gray-500",children:"$150,000"})]}),t.jsxs("p",{className:"text-xs text-gray-400 flex items-center gap-1",children:[t.jsx(ya,{})," 3/15/2024"]})]}),t.jsxs("div",{className:"mt-3 flex justify-between items-center",children:[t.jsx("span",{className:"text-xs font-medium bg-orange-100 text-orange-700 px-3 py-1 rounded-md",children:"NEGOTIATION"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-24 h-2 bg-gray-200 rounded-full",children:t.jsx("div",{className:"w-[75%] h-2 bg-gray-900 rounded-full"})}),t.jsx("span",{className:"text-xs text-gray-700",children:"75%"})]})]})]}),t.jsxs("div",{className:"bg-white border border-yellow-100 rounded-xl p-4 hover:shadow-md transition",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-gray-800",children:"TechStart Cloud Migration"}),t.jsx("p",{className:"text-sm text-gray-500",children:"$75,000"})]}),t.jsxs("p",{className:"text-xs text-gray-400 flex items-center gap-1",children:[t.jsx(ya,{})," 2/28/2024"]})]}),t.jsxs("div",{className:"mt-3 flex justify-between items-center",children:[t.jsx("span",{className:"text-xs font-medium bg-blue-50 text-blue-700 px-3 py-1 rounded-md",children:"PROPOSAL"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-24 h-2 bg-gray-200 rounded-full",children:t.jsx("div",{className:"w-[60%] h-2 bg-gray-900 rounded-full"})}),t.jsx("span",{className:"text-xs text-gray-700",children:"60%"})]})]})]})]})]})]})})}function Foe(){return t.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-2xl shadow-sm p-6",children:[t.jsx("div",{className:"flex items-center justify-between mb-6",children:t.jsxs("h2",{className:"text-xl font-semibold text-gray-700 flex items-center gap-2",children:[t.jsx(Vd,{})," Sales Performance"]})}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center text-gray-700",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Jt,{className:"text-gray-400"})," Total Leads"]}),t.jsx("span",{className:"font-semibold",children:"2"})]}),t.jsxs("div",{className:"flex justify-between items-center text-green-600",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(As,{})," Qualified Leads"]}),t.jsx("span",{className:"font-semibold",children:"1"})]}),t.jsxs("div",{className:"flex justify-between items-center text-blue-600",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Vd,{})," Active Deals"]}),t.jsx("span",{className:"font-semibold",children:"2"})]}),t.jsxs("div",{className:"flex justify-between items-center text-yellow-600",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(vr,{})," Won Deals"]}),t.jsx("span",{className:"font-semibold",children:"0"})]})]}),t.jsxs("div",{className:"mt-6 p-4 bg-green-50 rounded-xl flex justify-between items-center font-semibold text-green-700",children:[t.jsx("span",{children:"Total Revenue"}),t.jsx("span",{children:"$0"})]})]}),t.jsxs("div",{className:"bg-orange-50 border border-orange-100 rounded-2xl shadow-sm p-6",children:[t.jsx("div",{className:"flex items-center justify-between mb-6",children:t.jsxs("h2",{className:"text-xl font-semibold text-gray-700 flex items-center gap-2",children:[t.jsx(As,{})," Task Completion"]})}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center text-green-600",children:[t.jsx("span",{children:"Completed Tasks"}),t.jsx("span",{className:"font-semibold",children:"0"})]}),t.jsxs("div",{className:"flex justify-between items-center text-orange-600",children:[t.jsx("span",{children:"Pending Tasks"}),t.jsx("span",{className:"font-semibold",children:"1"})]}),t.jsxs("div",{className:"flex justify-between items-center text-blue-600",children:[t.jsx("span",{children:"Tasks Today"}),t.jsx("span",{className:"font-semibold",children:"0"})]})]}),t.jsxs("div",{className:"mt-6",children:[t.jsxs("div",{className:"flex justify-between mb-1 text-sm font-medium text-orange-600",children:[t.jsx("span",{children:"Completion Rate"}),t.jsx("span",{children:"0%"})]}),t.jsx("div",{className:"w-full h-3 bg-gray-200 rounded-full",children:t.jsx("div",{className:"w-0 h-3 bg-orange-500 rounded-full"})})]})]})]})}const gw=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Active"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Former"}],xw={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"PROSPECT",territory_id:"",assigned_to:""},xn=e=>e?e.toUpperCase():"",pw=e=>e?e.toString().toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()):"--",Boe=e=>{switch(xn(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},Hoe=e=>{switch(xn(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}},No=10;function Goe(){const e=it(),[s,a]=g.useState(()=>JSON.parse(localStorage.getItem("user"))||JSON.parse(localStorage.getItem("authUser")));g.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[n,r]=g.useState(!1),[i,l]=g.useState(!1),[c,d]=g.useState(!1),[m,f]=g.useState(null),[h,y]=g.useState(null),[N,w]=g.useState(xw),[p,v]=g.useState(null),[C,j]=g.useState([]),[_,T]=g.useState(!1),[k,E]=g.useState([]),[A,U]=g.useState([]),[B,X]=g.useState("Filter by Status"),[$,O]=g.useState(""),[G,K]=g.useState(null),[ae,R]=g.useState(!1),[Z,te]=g.useState(1),[ge,le]=g.useState("Overview"),[W,ee]=g.useState(""),[J,he]=g.useState(!1),be=g.useMemo(()=>!s||!Array.isArray(k)?[]:k.filter(I=>{const Ne=(I.role||"").toUpperCase();return!!(Ne.startsWith("SALES")||Ne==="MANAGER"&&I.id===s.id)}),[k,s]),Le=g.useCallback(async()=>{try{const I=await se.get("/auth/me");a(I.data)}catch(I){console.error("Failed to fetch current user",I),a(null)}},[]),Me=g.useCallback(async(I=null)=>{T(!0);try{const Ne=await se.get("/accounts/admin/fetch-all"),de=[...Array.isArray(Ne.data)?Ne.data:[]].sort((_e,Ae)=>{const He=_e?.created_at||_e?.updated_at||0,st=Ae?.created_at||Ae?.updated_at||0;return new Date(st)-new Date(He)});if(j(de),console.log("Fetch from backend: ",Ne.data),I){const _e=de.find(Ae=>Ae.id===I);v(_e||null)}}catch(Ne){console.error(Ne),j([])}finally{T(!1)}},[v]),ke=g.useCallback(async()=>{try{const I=await se.get("/users/all");E(Array.isArray(I.data)?I.data:[])}catch(I){console.error(I),I.response?.status===403&&q.warn("Unable to load users for assignment (permission denied).")}},[]),F=g.useCallback(async()=>{try{const I=await se.get("/territories/fetch");U(Array.isArray(I.data)?I.data:[])}catch(I){console.error(I),I.response?.status===403&&q.warn("Unable to load territories (permission denied).")}},[]);g.useEffect(()=>{Me(),ke(),F()},[Me,ke,F]),g.useEffect(()=>{p&&ee(xn(p.status)||"PROSPECT")},[p]);const ve=C.length,Ce=g.useMemo(()=>C.filter(I=>I.status?.toLowerCase()==="customer").length,[C]),D=g.useMemo(()=>C.filter(I=>I.status?.toLowerCase()==="prospect").length,[C]),re=g.useMemo(()=>C.filter(I=>I.status?.toLowerCase()==="partner").length,[C]),oe=g.useMemo(()=>C.filter(I=>I.status?.toLowerCase()==="active").length,[C]),je=g.useMemo(()=>C.filter(I=>I.status?.toLowerCase()==="inactive").length,[C]),Re=g.useMemo(()=>C.filter(I=>I.status?.toLowerCase()==="former").length,[C]);g.useEffect(()=>{Le(),Me(),ke(),F()},[Le,Me,ke,F]);const Ke=g.useMemo(()=>[{title:"Total",value:ve,icon:Jt,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:Ce,icon:Wr,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:D,icon:Cs,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:re,icon:qt,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:oe,icon:Wr,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:je,icon:Yr,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:Re,icon:Yr,color:"text-orange-600",bgColor:"bg-orange-100"}],[ve,Ce,D,re,oe,je,Re]),et=g.useMemo(()=>{const I=$.trim().toLowerCase(),Ne=B.trim().toUpperCase();return C.filter(H=>{const de=[H?.name,H?.website,H?.industry,H?.territory?.name,H?.phone_number],_e=I===""||de.some(He=>He==null?!1:He.toString().toLowerCase().includes(I)),Ae=Ne==="FILTER BY STATUS"||xn(H.status)===Ne;return _e&&Ae})},[C,$,B]),qe=Math.max(1,Math.ceil(et.length/No)||1);g.useEffect(()=>{te(1)},[$,B]),g.useEffect(()=>{te(I=>{const Ne=Math.max(1,Math.ceil(et.length/No)||1);return I>Ne?Ne:I})},[et.length]);const Ze=g.useMemo(()=>{const I=(Z-1)*No;return et.slice(I,I+No)},[et,Z]);et.length===0||(Z-1)*No+1,Math.min(Z*No,et.length);const we=()=>te(I=>Math.max(I-1,1)),V=()=>te(I=>Math.min(I+1,qe)),pe=I=>{v(I),le("Overview"),ee(xn(I?.status)||"PROSPECT")},z=()=>v(null),ie=I=>{I.target.id==="accountModalBackdrop"&&!ae&&z()},ue=()=>{r(!1),l(!1),y(null),w(xw),d(!1)},M=I=>{I.target.id==="modalBackdrop"&&ue()},xe=I=>I?new Date(I).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",ne=I=>{const{name:Ne,value:H}=I.target;w(de=>({...de,[Ne]:H}))},Te=()=>{w(xw),l(!1),y(null),r(!0)},Q=I=>{v(null),console.log("edit: ",I),w({name:I.name||"",website:I.website||"",phone_number:I.phone_number||"",billing_address:I.billing_address||"",shipping_address:I.shipping_address||"",industry:I.industry||"",status:xn(I.status)||"PROSPECT",territory_id:I.territory?.id?String(I.territory.id):"",assigned_to:I.assigned_accs?.id?String(I.assigned_accs.id):""}),l(!0),y(I.id),r(!0)},ye=I=>{I&&K({title:"Delete Account",message:t.jsxs("span",{children:["Are you sure you want to permanently delete the account"," ",t.jsx("span",{className:"font-semibold",children:I.name}),"? This action cannot be undone."]}),confirmLabel:"Delete Account",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:I.id,name:I.name}})},P=async()=>{if(!G?.action){K(null);return}const{action:I}=G,{type:Ne,payload:H,targetId:de,name:_e}=I;R(!0);try{if(Ne==="create"){d(!0);const Ae=await se.post("/accounts/admin",H);q.success(`Account "${_e}" created successfully.`);const He=p?.id||null;ue(),await Me(He),!p&&Ae.data?.id}else if(Ne==="update"){if(!de)throw new Error("Missing account identifier for update.");d(!0),await se.put(`/accounts/admin/${de}`,H),q.success(`Account "${_e}" updated successfully.`);const Ae=p?.id&&p.id===de?de:null;ue(),await Me(Ae),p?.id===de&&v(null)}else if(Ne==="delete"){if(!de)throw new Error("Missing account identifier for deletion.");const Ae=p?.id;f(de),await se.delete(`/accounts/admin/${de}`),q.success(`Account "${_e}" deleted successfully.`),await Me(Ae&&Ae!==de?Ae:null),Ae===de&&v(null)}}catch(Ae){console.error(Ae);const He=Ne==="create"?"Failed to create account. Please review the details and try again.":Ne==="update"?"Failed to update account. Please review the details and try again.":"Failed to delete account. Please try again.",st=Ae.response?.data?.detail||He;q.error(st),(Ne==="create"||Ne==="update")&&d(!1),Ne==="delete"&&f(null)}finally{(Ne==="create"||Ne==="update")&&d(!1),Ne==="delete"&&f(null),R(!1),K(null)}},fe=()=>{ae||K(null)},me=async()=>{if(!p||!W)return;const I=xn(W),Ne=xn(p.status);if(I!==Ne){he(!0);try{await se.put(`/accounts/admin/${p.id}`,{status:I}),q.success(`Account status updated to ${pw(I)}`),j(H=>H.map(de=>de.id===p.id?{...de,status:I}:de)),v(null)}catch(H){console.error(H);const de=H.response?.data?.detail||"Failed to update account status. Please try again.";q.error(de)}finally{he(!1)}}},Se=I=>{I.preventDefault();const Ne=N.name.trim();if(!Ne){q.error("Account name is required.");return}const H={name:Ne,website:N.website?.trim()||null,phone_number:N.phone_number?.trim()||null,billing_address:N.billing_address?.trim()||null,shipping_address:N.shipping_address?.trim()||null,industry:N.industry?.trim()||null,status:N.status||"PROSPECT",territory_id:N.territory_id?Number(N.territory_id):null,assigned_to:N.assigned_to?Number(N.assigned_to):null},de=i&&h?"update":"create";K({title:de==="create"?"Confirm New Account":"Confirm Update",message:de==="create"?t.jsxs("span",{children:["Are you sure you want to create the account"," ",t.jsx("span",{className:"font-semibold",children:Ne}),"?"]}):t.jsxs("span",{children:["Save changes to the account"," ",t.jsx("span",{className:"font-semibold",children:Ne}),"?"]}),confirmLabel:de==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:de,payload:H,targetId:h||null,name:Ne}})},$e=[{label:"Filter by Status",value:"Filter by Status"},...gw.map(I=>({label:I.label,value:I.value}))],We=G?.action?.type==="delete"?G.action.targetId:null,rt=p&&(m===p.id||We===p.id),wt=p&&m===p.id,Ut=p?Boe(p.status):"",ze=p?t.jsx("div",{id:"accountModalBackdrop",onClick:ie,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:I=>I.stopPropagation(),children:[t.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[t.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),t.jsx("button",{onClick:z,className:"text-gray-400 hover:text-white cursor-pointer",children:t.jsx(es,{size:25})})]}),t.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[t.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:p.name}),t.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${Ut}`,children:pw(p.status)})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Q(p),disabled:G?.action?.type==="update"&&G.action.targetId===p.id,children:[t.jsx(ys,{className:"mr-2"}),"Edit"]}),t.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>ye(p),disabled:!!rt,children:wt?"Deleting...":t.jsxs(t.Fragment,{children:[t.jsx(Nt,{className:"mr-2"}),"Delete"]})})]})]}),t.jsx("div",{className:"border-b border-gray-200 my-5"}),t.jsxs("div",{className:"p-6 lg:p-4",children:[t.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(I=>t.jsx("button",{onClick:()=>le(I),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${ge===I?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:I},I))}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[t.jsxs("div",{className:"lg:col-span-3",children:[ge==="Overview"&&t.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Website:"}),t.jsx("p",{children:p.website?t.jsx("a",{href:p.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:p.website}):"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Industry:"}),t.jsx("p",{children:p.industry||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Territory:"}),t.jsx("p",{children:p.territory?.name||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Phone Number:"}),t.jsx("p",{children:p.phone_number||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Billing Address:"}),t.jsx("p",{children:p.billing_address||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),t.jsx("p",{children:p.shipping_address||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Assigned To:"}),t.jsx("p",{children:p.assigned_accs?`${p.assigned_accs.first_name} ${p.assigned_accs.last_name}`:"Unassigned"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Created By:"}),t.jsx("p",{children:p.acc_creator?`${p.acc_creator.first_name} ${p.acc_creator.last_name}`:"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Created At:"}),t.jsx("p",{children:xe(p.created_at)||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Last Updated:"}),t.jsx("p",{children:xe(p.updated_at)||"N/A"})]})]})}),ge==="Notes"&&t.jsxs("div",{className:"mt-4 w-full",children:[t.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:t.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[t.jsx("div",{className:"flex items-start justify-between",children:t.jsx("div",{children:t.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),t.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:C.notes||"No notes available."})]})]}),ge==="Activities"&&t.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:ft,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:dt,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((I,Ne)=>t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[t.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[t.jsx("div",{className:"text-gray-600 mt-1",children:t.jsx(I.icon,{size:24})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"font-medium text-gray-900 break-words",children:I.title}),t.jsx("p",{className:"text-sm text-gray-500 break-words",children:I.desc}),t.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[t.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),t.jsx("p",{className:"text-sm text-gray-700 break-words",children:I.user})]})]})]}),t.jsx("p",{className:"text-sm text-gray-500 break-words",children:I.date})]},Ne))]})]}),t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),t.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[t.jsxs("button",{onClick:()=>e("/manager/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Account"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),t.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Account"}}}),children:[t.jsx(dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),t.jsxs("button",{onClick:()=>e("/manager/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Account"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ts,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),t.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:W||xn(p?.status)||"PROSPECT",onChange:I=>ee(I.target.value),children:gw.map(I=>t.jsx("option",{value:I.value,children:I.label},I.value))}),t.jsx("button",{onClick:me,disabled:J||!W||xn(W)===xn(p?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${J||!W||xn(W)===xn(p?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:J?"Updating...":"Update"})]})]})]})]})]})}):null,Pe=t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[_&&t.jsx(xt,{message:"Loading accounts..."}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[t.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[t.jsx(Jt,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),t.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:t.jsxs("button",{onClick:Te,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base cursor-pointer",children:[t.jsx(Lt,{className:"mr-2"})," Add Account"]})})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ke.map(I=>t.jsx(Voe,{...I},I.title))}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[t.jsx(yt,{size:20,className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search accounts",value:$,onChange:I=>O(I.target.value),className:"focus:outline-none text-base w-full"})]}),t.jsx("div",{className:"w-full lg:w-1/4",children:t.jsx("select",{value:B,onChange:I=>X(I.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:$e.map(I=>t.jsx("option",{value:I.value,children:I.label},I.value))})})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[t.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),t.jsx("th",{className:"py-3 px-4",children:"Status"}),t.jsx("th",{className:"py-3 px-4",children:"Industry"}),t.jsx("th",{className:"py-3 px-4",children:"Territory"}),t.jsx("th",{className:"py-3 px-4",children:"Phone"})]})}),t.jsx("tbody",{children:_?t.jsx("tr",{children:t.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"Loading accounts..."})}):et.length>0?Ze.map(I=>t.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>pe(I),children:[t.jsx("td",{className:"py-3 px-4",children:t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:I.name}),t.jsx("div",{className:"text-gray-500 text-xs break-all",children:I.website||"--"})]})}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${Hoe(I.status)}`,children:pw(I.status)})}),t.jsx("td",{className:"py-3 px-4 text-sm",children:I.industry||"--"}),t.jsx("td",{className:"py-3 px-4 text-sm",children:I.territory?.name||"--"}),t.jsx("td",{className:"py-3 px-4",children:t.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[t.jsx(ft,{className:"text-gray-500"}),t.jsx("span",{children:I.phone_number||"--"})]})})]},I.id)):t.jsx("tr",{children:t.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"No accounts found."})})})]})}),t.jsx(Ct,{className:"mt-4",totalItems:et.length,pageSize:No,currentPage:Z,onPrev:we,onNext:V,label:"accounts"})]}),lt=n?t.jsx("div",{id:"modalBackdrop",onClick:M,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh]",onClick:I=>I.stopPropagation(),children:[t.jsx("button",{onClick:ue,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:c||ae,children:t.jsx(jt,{size:22})}),t.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:i?"Edit Account":"Add New Account"}),t.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Se,children:[t.jsx(Nd,{label:"Name",name:"name",value:N.name,onChange:ne,placeholder:"Company name",required:!0,disabled:c,className:"md:col-span-2"}),t.jsx(Nd,{label:"Website",name:"website",value:N.website,onChange:ne,placeholder:"https://example.com",disabled:c}),t.jsx(Nd,{label:"Phone Number",name:"phone_number",value:N.phone_number,onChange:ne,placeholder:"09xx xxx xxxx",type:"tel",disabled:c}),t.jsx(Nd,{label:"Industry",name:"industry",value:N.industry,onChange:ne,placeholder:"Industry",disabled:c}),t.jsx(Nd,{label:"Billing Address",name:"billing_address",value:N.billing_address,onChange:ne,placeholder:"Billing address",disabled:c}),t.jsx(Nd,{label:"Shipping Address",name:"shipping_address",value:N.shipping_address,onChange:ne,placeholder:"Shipping address",disabled:c}),t.jsx(yw,{label:"Status",name:"status",value:N.status,onChange:ne,options:[{value:"",label:"Select status"},...gw],required:!0,disabled:c}),t.jsx(yw,{label:"Assigned To",name:"assigned_to",value:N.assigned_to,onChange:ne,options:[{value:"",label:"Select assignee"},...be.map(I=>({value:String(I.id),label:`${I.first_name} ${I.last_name} (${I.role})`}))],disabled:c}),t.jsx(yw,{label:"Territory",name:"territory_id",value:N.territory_id,onChange:ne,options:[{value:"",label:"No Territory"},...A.map(I=>({value:String(I.id),label:I.name}))],disabled:c||A.length===0}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[t.jsx("button",{type:"button",onClick:ue,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:c||ae,children:"Cancel"}),t.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:c||ae,children:c?"Saving...":i?"Update Account":"Save Account"})]})]})]})}):null,ot=G?t.jsx(Woe,{open:!0,title:G.title,message:G.message,confirmLabel:G.confirmLabel,cancelLabel:G.cancelLabel,variant:G.variant,onConfirm:P,onCancel:fe,loading:ae}):null;return t.jsxs(t.Fragment,{children:[Pe,ze,lt,ot]})}function Voe({icon:e,title:s,value:a,color:n="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${s}`)};return t.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[t.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${n} mr-4`,children:e?t.jsx(e,{size:22}):null}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"text-xs text-gray-500 uppercase",children:s}),t.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function Nd({label:e,name:s,value:a,onChange:n,placeholder:r,type:i="text",required:l=!1,disabled:c=!1,className:d=""}){return t.jsxs("div",{className:d,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("input",{type:i,name:s,value:a??"",onChange:n,placeholder:r,required:l,disabled:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]})}function yw({label:e,name:s,value:a,onChange:n,options:r,required:i=!1,disabled:l=!1}){return t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("select",{name:s,value:a??"",onChange:n,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(c=>t.jsx("option",{value:c.value,children:c.label},c.value))})]})}function Woe({open:e,title:s,message:a,confirmLabel:n,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:c,onCancel:d}){if(!e)return null;const m=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s}),t.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),t.jsx("button",{type:"button",onClick:c,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${m}`,disabled:l,children:l?"Processing...":n})]})]})})}const wo=10,Uk=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Active"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Former"}],ka=e=>e?e.toUpperCase():"",zk=e=>e?e.toString().toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()):"--",bw={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:"",status:""},wd=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),Dm=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function Yoe(){const e=it();g.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const s=P=>{if(!P)return null;const fe=P.toString().toLowerCase(),me=fe.replace(/\b\w/g,$e=>$e.toUpperCase()),Se=(()=>{switch(fe){case"customer":return"bg-green-100 text-green-700";case"prospect":return"bg-purple-100 text-purple-700";case"partner":return"bg-pink-100 text-pink-700";case"active":return"bg-blue-100 text-blue-700";case"inactive":return"bg-gray-200 text-gray-700";case"former":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}})();return t.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${Se}`,children:me})},[a,n]=g.useState([]),[r,i]=g.useState(!1),[l,c]=g.useState([]),[d,m]=g.useState([]),[f,h]=g.useState(null),[y,N]=g.useState(!1),[w,p]=g.useState(!1),[v,C]=g.useState(!1),[j,_]=g.useState(null),[T,k]=g.useState(!1),[E,A]=g.useState(null),[U,B]=g.useState(bw),[X,$]=g.useState(""),[O,G]=g.useState("Filter by Accounts"),[K,ae]=g.useState(null),[R,Z]=g.useState("Overview"),[te,ge]=g.useState(1),[le,W]=g.useState(""),[ee,J]=g.useState(!1),he=g.useCallback(async(P=null)=>{i(!0);try{const fe=await se.get("/contacts/admin/fetch-all"),Se=[...Array.isArray(fe.data)?fe.data:[]].sort(($e,We)=>{const rt=$e?.created_at||$e?.updated_at||0,wt=We?.created_at||We?.updated_at||0;return new Date(wt)-new Date(rt)});if(n(Se),console.log(fe.data),P){const $e=Se.find(We=>We.id===P);h($e||null)}}catch(fe){console.error(fe),n([]),fe.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch contacts. Please try again later.")}finally{i(!1)}},[h]),be=g.useCallback(async()=>{try{const P=await se.get("/accounts/sales/contact/fetch-all"),me=[...Array.isArray(P.data)?P.data:[]].sort((Se,$e)=>(Se?.name||"").localeCompare($e?.name||""));c(me)}catch(P){console.error(P),c([]),P.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},[]),Le=g.useCallback(async()=>{try{const P=await se.get("/users/all"),me=[...Array.isArray(P.data)?P.data:[]].sort((Se,$e)=>wd(Se).localeCompare(wd($e)));m(me)}catch(P){console.error(P),m([]),P.response?.status===403&&q.warn("Unable to load users for assignment (permission denied).")}},[]);g.useEffect(()=>{he(),be(),Le()},[he,be,Le]),g.useEffect(()=>{f?.account?.status?W(ka(f.account.status)||"PROSPECT"):W("PROSPECT")},[f]),g.useEffect(()=>{if(w&&U.account_id&&l.length>0){const P=l.find(fe=>String(fe.id)===U.account_id);if(P?.status){const fe=ka(P.status)||"PROSPECT";B(me=>!me.status||ka(me.status)!==fe?{...me,status:fe}:me)}}},[U.account_id,w]);const Me=g.useMemo(()=>{const P=new Map;l.forEach(me=>{me?.id&&me?.name&&P.set(String(me.id),me.name)}),a.forEach(me=>{me?.account_id&&me?.account?.name&&P.set(String(me.account_id),me.account.name)});const fe=Array.from(P.entries()).sort((me,Se)=>me[1].localeCompare(Se[1])).map(([me,Se])=>({value:me,label:Se}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...fe]},[l,a]),ke=g.useMemo(()=>{const P=X.trim().toLowerCase(),fe=O.trim();return a.filter(me=>{const Se=[me?.first_name,me?.last_name,me?.email,me?.title,me?.department,me?.account?.name,me?.account?.status,me?.work_phone,me?.mobile_phone_1,me?.mobile_phone_2,me?.assigned_contact?.first_name,me?.assigned_contact?.last_name,me?.contact_creator?.first_name,me?.contact_creator?.last_name,me?.notes,Dm(me?.created_at),Dm(me?.updated_at)],$e=P===""||Se.some(rt=>rt==null?!1:rt.toString().toLowerCase().includes(P)),We=fe==="Filter by Accounts"||String(me.account_id)===fe;return $e&&We})},[a,X,O]),F=Math.max(1,Math.ceil(ke.length/wo)||1);g.useEffect(()=>{ge(1)},[X,O]),g.useEffect(()=>{ge(P=>{const fe=Math.max(1,Math.ceil(ke.length/wo)||1);return P>fe?fe:P})},[ke.length]);const ve=g.useMemo(()=>{const P=(te-1)*wo;return ke.slice(P,P+wo)},[ke,te]);ke.length===0||(te-1)*wo+1,Math.min(te*wo,ke.length);const Ce=()=>ge(P=>Math.max(P-1,1)),D=()=>ge(P=>Math.min(P+1,F)),re=g.useCallback(()=>{N(!1),p(!1),A(null),B(bw),C(!1)},[]),oe=P=>{P.target.id==="modalBackdrop"&&!v&&!T&&re()},je=P=>{const{name:fe,value:me}=P.target;B(Se=>({...Se,[fe]:me}))},Re=()=>{B(bw),p(!1),A(null),N(!0)},Ke=P=>{P&&(B({first_name:P.first_name||"",last_name:P.last_name||"",account_id:P.account_id?String(P.account_id):"",title:P.title||"",department:P.department||"",email:P.email||"",work_phone:P.work_phone||"",mobile_phone_1:P.mobile_phone_1||"",mobile_phone_2:P.mobile_phone_2||"",notes:P.notes||"",assigned_to:P.assigned_to?String(P.assigned_to):"",status:ka(P.account?.status)||"PROSPECT"}),p(!0),A(P.id),N(!0),h(null))},et=P=>{if(!P)return;const fe=wd(P)||"this contact";_({title:"Delete Contact",message:t.jsxs("span",{children:["Are you sure you want to permanently delete"," ",t.jsx("span",{className:"font-semibold",children:fe}),"? This action cannot be undone."]}),confirmLabel:"Delete Contact",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:P.id,name:fe}})},qe=P=>{P.preventDefault();const fe=U.first_name.trim(),me=U.last_name.trim();if(!fe||!me){q.error("First name and last name are required.");return}if(!U.account_id){q.error("Account is required.");return}const Se={first_name:fe,last_name:me,account_id:Number(U.account_id),title:U.title?.trim()||null,department:U.department?.trim()||null,email:U.email?.trim().toLowerCase()||null,work_phone:U.work_phone?.trim()||null,mobile_phone_1:U.mobile_phone_1?.trim()||null,mobile_phone_2:U.mobile_phone_2?.trim()||null,notes:U.notes?.trim()||null,assigned_to:U.assigned_to?Number(U.assigned_to):null},$e=w&&E?"update":"create",We=`${fe} ${me}`.trim(),rt=w?a.find(Pe=>Pe.id===E):null,wt=rt?.account?.status,Ut=U.status?ka(U.status):null,ze=w&&rt?.account?.id&&Ut&&ka(wt)!==Ut;_({title:$e==="create"?"Confirm New Contact":"Confirm Update",message:$e==="create"?t.jsxs("span",{children:["Are you sure you want to add"," ",t.jsx("span",{className:"font-semibold",children:We})," to your contacts?"]}):t.jsxs("span",{children:["Save changes to ",t.jsx("span",{className:"font-semibold",children:We}),"?"]}),confirmLabel:$e==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:$e,payload:Se,targetId:E||null,name:We},accountStatusUpdate:ze?Ut:null,accountId:w&&rt?.account?.id?rt.account.id:Se.account_id||null})},Ze=async()=>{if(!j?.action){_(null);return}const{action:P}=j,{type:fe,payload:me,targetId:Se,name:$e}=P;k(!0);try{if(fe==="create"){C(!0),await se.post("/contacts/admin",me),q.success(`Contact "${$e}" created successfully.`);const We=f?.id||null;re(),await he(We)}else if(fe==="update"){if(!Se)throw new Error("Missing contact identifier for update.");if(C(!0),await se.put(`/contacts/admin/${Se}`,me),j.accountStatusUpdate&&j.accountId)try{await se.put(`/accounts/admin/${j.accountId}`,{status:ka(j.accountStatusUpdate)}),q.success(`Account status updated to ${zk(j.accountStatusUpdate)}`)}catch(rt){console.error("Failed to update account status:",rt),q.warn("Contact updated but failed to update account status.")}q.success(`Contact "${$e}" updated successfully.`);const We=f?.id&&f.id===Se?Se:f?.id||null;re(),await he(We),f?.id===Se&&h(null)}else if(fe==="delete"){if(!Se)throw new Error("Missing contact identifier for deletion.");const We=f?.id;ae(Se),await se.delete(`/contacts/admin/${Se}`),q.success(`Contact "${$e}" deleted successfully.`),await he(We&&We!==Se?We:null),We===Se&&h(null)}}catch(We){console.error(We);const rt=fe==="create"?"Failed to create contact. Please review the details and try again.":fe==="update"?"Failed to update contact. Please review the details and try again.":"Failed to delete contact. Please try again.",wt=We.response?.data?.detail||rt;q.error(wt)}finally{(fe==="create"||fe==="update")&&C(!1),fe==="delete"&&ae(null),k(!1),_(null)}},we=()=>{T||_(null)},V=P=>{h(P),Z("Overview")},pe=async()=>{if(!f?.account?.id||!le)return;const P=ka(le),fe=ka(f?.account?.status);if(P!==fe){J(!0);try{await se.put(`/accounts/admin/${f.account.id}`,{status:P}),q.success(`Account status updated to ${zk(P)}`),n(me=>me.map(Se=>Se.account_id===f.account.id?{...Se,account:{...Se.account,status:P}}:Se)),h(null)}catch(me){console.error(me);const Se=me.response?.data?.detail||"Failed to update account status. Please try again.";q.error(Se)}finally{J(!1)}}},z=()=>h(null),ie=P=>{P.target.id==="contactModalBackdrop"&&!T&&z()},ue=j?.action?.type==="delete"?j.action.targetId:null,M=f&&(K===f.id||ue===f.id),xe=f&&K===f.id,ne=f?t.jsx("div",{id:"contactModalBackdrop",onClick:ie,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:P=>P.stopPropagation(),children:[t.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[t.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),t.jsx("button",{onClick:z,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:t.jsx(es,{size:25})})]}),t.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:["          ",t.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[t.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:wd(f)||"Unnamed contact"}),s(f.account?.status)]}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Ke(f),disabled:T||j?.action?.type==="update"&&j.action.targetId===f.id,children:[t.jsx(ys,{className:"mr-2"}),"Edit"]}),t.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>et(f),disabled:!!M,children:xe?"Deleting...":t.jsxs(t.Fragment,{children:[t.jsx(Nt,{className:"mr-2"}),"Delete"]})})]})]}),t.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:t.jsx("p",{className:"text-sm text-gray-500",children:f.account?.name||"No associated account"})}),t.jsx("div",{className:"border-b border-gray-200 my-5"}),t.jsxs("div",{className:"p-6 lg:p-4",children:[t.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(P=>t.jsx("button",{onClick:()=>Z(P),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${R===P?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:P},P))}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[t.jsxs("div",{className:"lg:col-span-3",children:[R==="Overview"&&t.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Contact Name:"}),t.jsx("p",{children:wd(f)||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Title:"}),t.jsx("p",{children:f.title||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Email:"}),t.jsx("p",{children:f.email?t.jsx("a",{href:`mailto:${f.email}`,className:"text-blue-600 hover:underline break-all",children:f.email}):"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Department:"}),t.jsx("p",{children:f.department||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Work Phone:"}),t.jsx("p",{children:f.work_phone||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),t.jsx("p",{children:f.mobile_phone_1||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),t.jsx("p",{children:f.mobile_phone_2||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Assigned To:"}),t.jsx("p",{children:f.assigned_contact?`${f.assigned_contact.first_name} ${f.assigned_contact.last_name}`:"Unassigned"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Created By:"}),t.jsx("p",{children:f.contact_creator?`${f.contact_creator.first_name} ${f.contact_creator.last_name}`:"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Created At:"}),t.jsx("p",{children:Dm(f.created_at)||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Last Updated:"}),t.jsx("p",{children:Dm(f.updated_at)||"N/A"})]})]})}),R==="Notes"&&t.jsxs("div",{className:"mt-4 w-full",children:[t.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:t.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[t.jsx("div",{className:"flex items-start justify-between",children:t.jsx("div",{children:t.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),t.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:f.notes||"No notes available."})]})]}),R==="Activities"&&t.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:ft,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:dt,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((P,fe)=>t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[t.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[t.jsx("div",{className:"text-gray-600 mt-1",children:t.jsx(P.icon,{size:24})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"font-medium text-gray-900 break-words",children:P.title}),t.jsx("p",{className:"text-sm text-gray-500 break-words",children:P.desc}),t.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[t.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),t.jsx("p",{className:"text-sm text-gray-700 break-words",children:P.user})]})]})]}),t.jsx("p",{className:"text-sm text-gray-500 break-words",children:P.date})]},fe))]})]}),t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),t.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[t.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Contact"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),t.jsxs("button",{type:"button",onClick:()=>{if(!f?.email){alert("No email address available");return}const P=encodeURIComponent(f.email),fe=encodeURIComponent(""),me=encodeURIComponent(""),Se=`https://mail.google.com/mail/?view=cm&fs=1&to=${P}&su=${fe}&body=${me}`;window.open(Se,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(js,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),t.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Contact"}}}),children:[t.jsx(dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),t.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Contact"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ts,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),t.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:le||ka(f?.account?.status)||"PROSPECT",onChange:P=>W(P.target.value),disabled:ee||!f?.account?.id,children:Uk.map(P=>t.jsx("option",{value:P.value,children:P.label},P.value))}),t.jsx("button",{onClick:pe,disabled:ee||!le||!f?.account?.id||ka(le)===ka(f?.account?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${ee||!le||!f?.account?.id||ka(le)===ka(f?.account?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:ee?"Updating...":"Update"})]})]})]})]})]})}):null,Te=t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&t.jsx(xt,{message:"Loading contacts..."}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[t.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[t.jsx(Jt,{className:"mr-2 text-blue-600"})," Contacts Management"]}),t.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:t.jsxs("button",{onClick:Re,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[t.jsx(Lt,{className:"mr-2"})," Add Contact"]})})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[t.jsx(yt,{size:20,className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search contacts",value:X,onChange:P=>$(P.target.value),className:"focus:outline-none text-base w-full"})]}),t.jsx("div",{className:"w-full lg:w-1/4",children:t.jsx("select",{value:O,onChange:P=>G(P.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:Me.map(P=>t.jsx("option",{value:P.value,children:P.label},P.value??P.label))})})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[t.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),t.jsx("th",{className:"py-3 px-4",children:"Account"}),t.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),t.jsx("th",{className:"py-3 px-4",children:"Department"}),t.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),t.jsx("th",{className:"py-3 px-4",children:"Created"})]})}),t.jsx("tbody",{children:r?t.jsx("tr",{children:t.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"Loading contacts..."})}):ke.length>0?ve.map(P=>{const fe=[{Icon:js,value:P.email,key:"email"},{Icon:ft,value:P.work_phone,key:"work_phone"},{Icon:Bl,value:P.mobile_phone_1,key:"mobile_phone_1"},{Icon:Bl,value:P.mobile_phone_2,key:"mobile_phone_2"}].filter(me=>!!me.value);return t.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>V(P),children:[t.jsxs("td",{className:"py-3 px-4 align-top",children:[t.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:wd(P)||"--"}),t.jsx("div",{className:"text-xs text-gray-500",children:P.title||"No title"})]}),t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[t.jsx(Ph,{className:"text-gray-500 flex-shrink-0"}),t.jsx("span",{className:"break-words",children:P.account?.name||"--"})]})}),t.jsx("td",{className:"py-3 px-4 align-top",children:fe.length>0?t.jsx("div",{className:"space-y-1 text-gray-700",children:fe.map(({Icon:me,value:Se,key:$e})=>t.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[t.jsx(me,{className:"text-gray-500 flex-shrink-0"}),t.jsx("span",{children:Se})]},$e))}):t.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[t.jsx(Es,{className:"text-gray-500 flex-shrink-0"}),t.jsx("span",{children:P.department||"--"})]})}),t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[t.jsx(qt,{className:"text-gray-500 flex-shrink-0"}),t.jsx("span",{children:P.assigned_contact?`${P.assigned_contact.first_name} ${P.assigned_contact.last_name}`:"Unassigned"})]})}),t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[t.jsx(dt,{className:"text-gray-500 flex-shrink-0"}),t.jsx("span",{className:"text-xs",children:Dm(P.created_at)||"--"})]})})]},P.id)}):t.jsx("tr",{children:t.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"No contacts found."})})})]})}),t.jsx(Ct,{className:"mt-4",totalItems:ke.length,pageSize:wo,currentPage:te,onPrev:Ce,onNext:D,label:"contacts"})]}),Q=y?t.jsx("div",{id:"modalBackdrop",onClick:oe,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:P=>P.stopPropagation(),children:[t.jsx("button",{onClick:re,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:v||T,children:t.jsx(jt,{size:22})}),t.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:w?"Edit Contact":"Add New Contact"}),t.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:qe,children:[t.jsx(_l,{label:"First Name",name:"first_name",value:U.first_name,onChange:je,placeholder:"First name",required:!0,disabled:v}),t.jsx(_l,{label:"Last Name",name:"last_name",value:U.last_name,onChange:je,placeholder:"Last name",required:!0,disabled:v}),t.jsx(Ax,{label:"Account",name:"account_id",value:U.account_id,onChange:je,options:[{value:"",label:"Select account"},...l.map(P=>({value:String(P.id),label:P.name}))],required:!0,disabled:v||l.length===0||w}),w&&U.account_id?t.jsx(Ax,{label:"Status",name:"status",value:U.status||ka(l.find(P=>String(P.id)===U.account_id)?.status||"")||"PROSPECT",onChange:je,options:Uk.map(P=>({value:P.value,label:P.label})),disabled:v||!U.account_id}):t.jsx(Ax,{label:"Assigned To",name:"assigned_to",value:U.assigned_to,onChange:je,options:[{value:"",label:"Select assignee"},...d.map(P=>({value:String(P.id),label:`${P.first_name} ${P.last_name} (${P.role})`}))],disabled:v||d.length===0||w}),w&&t.jsx(Ax,{label:"Assigned To",name:"assigned_to",value:U.assigned_to,onChange:je,options:[{value:"",label:"Select assignee"},...d.map(P=>({value:String(P.id),label:`${P.first_name} ${P.last_name} (${P.role})`}))],disabled:v||d.length===0||w}),t.jsx(_l,{label:"Title",name:"title",value:U.title,onChange:je,placeholder:"Job title",disabled:v}),t.jsx(_l,{label:"Department",name:"department",value:U.department,onChange:je,placeholder:"Department",disabled:v}),t.jsx(_l,{label:"Email",name:"email",type:"email",value:U.email,onChange:je,placeholder:"example@email.com",disabled:v}),t.jsx(_l,{label:"Work Phone",name:"work_phone",value:U.work_phone,onChange:je,placeholder:"09xx xxx xxxx",disabled:v}),t.jsx(_l,{label:"Mobile Phone 1",name:"mobile_phone_1",value:U.mobile_phone_1,onChange:je,placeholder:"09xx xxx xxxx",disabled:v}),t.jsx(_l,{label:"Mobile Phone 2",name:"mobile_phone_2",value:U.mobile_phone_2,onChange:je,placeholder:"09xx xxx xxxx",disabled:v}),t.jsx(Qoe,{label:"Notes",name:"notes",value:U.notes,onChange:je,placeholder:"Additional details...",rows:3,disabled:v,className:"md:col-span-2"}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[t.jsx("button",{type:"button",onClick:re,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:v||T,children:"Cancel"}),t.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:v||T,children:v?"Saving...":w?"Update Contact":"Save Contact"})]})]})]})}):null,ye=j?t.jsx(qoe,{open:!0,title:j.title,message:j.message,confirmLabel:j.confirmLabel,cancelLabel:j.cancelLabel,variant:j.variant,onConfirm:Ze,onCancel:we,loading:T}):null;return t.jsxs(t.Fragment,{children:[Te,ne,Q,ye]})}function _l({label:e,name:s,value:a,onChange:n,placeholder:r,type:i="text",required:l=!1,disabled:c=!1}){return t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("input",{type:i,name:s,value:a??"",onChange:n,placeholder:r,required:l,disabled:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]})}function Ax({label:e,name:s,value:a,onChange:n,options:r,required:i=!1,disabled:l=!1,className:c=""}){return t.jsxs("div",{className:c,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("select",{name:s,value:a??"",onChange:n,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(d=>t.jsx("option",{value:d.value,children:d.label},d.value??d.label))})]})}function Qoe({label:e,name:s,value:a,onChange:n,placeholder:r,rows:i=3,disabled:l=!1,className:c=""}){return t.jsxs("div",{className:c,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("textarea",{name:s,value:a??"",onChange:n,placeholder:r,rows:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function qoe({open:e,title:s,message:a,confirmLabel:n,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:c,onCancel:d}){if(!e)return null;const m=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s}),t.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),t.jsx("button",{type:"button",onClick:c,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${m}`,disabled:l,children:l?"Processing...":n})]})]})})}function p$({lead:e,onBack:s,fetchLeads:a,onEdit:n,onDelete:r,setSelectedLead:i}){const l=it(),{leadID:c}=Qi(),[d,m]=g.useState(e||null),[f,h]=g.useState("Overview"),[y,N]=g.useState(""),{userRole:w}=er(),{user:p}=zt();g.useEffect(()=>{console.log("mewo",w),console.log("asdads",p),console.log("lead",d)},[w,p,d]);const[v,C]=g.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[j,_]=g.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[T,k]=g.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),E=async()=>{try{if(e){m(e),N(e.status||"New");return}if(!c)return;const $=await se.get(`/leads/get/${c}`);m($.data),N($.data.status||"New"),C({name:$.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:$.data.territory?.id||null,assigned_to:$.data.assigned_to?.id||null,created_by:$.data.creator?.id||null}),_({last_name:$.data.last_name||"",first_name:$.data.first_name||"",account_id:null,title:$.data.title||"",department:$.data.department||"",email:$.data.email||"",work_phone:$.data.work_phone||"",mobile_phone_1:$.data.mobile_phone_1||"",mobile_phone_2:$.data.mobile_phone_2||"",notes:"",assigned_to:$.data.assigned_to?.id||null,created_by:$.data.creator?.id||null}),k({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:$.data.assigned_to?.id||null,created_by:$.data.creator?.id||null})}catch($){console.error($)}};g.useEffect(()=>{e?(m(e),N(e.status||"New")):c&&E()},[c,e]);const A=async()=>{try{const $=await se.put(`/leads/${d.id}/update/status`,{status:y});console.log($.data),q.success("Lead status updated successfully");const O={...d,status:$.data.status};m(O),i&&i(O),a&&a(),s&&s()}catch($){console.error($),q.error("Failed to update lead status")}},U=async $=>{const O={...v,assigned_to:$.assigned_to?.id,billing_address:$.address,shipping_address:$.address,created_by:$.creator?.id,industry:null,name:$.company_name,phone_number:$.work_phone,status:"Prospect",territory_id:$.territory?.id,website:""};console.log("Account data: ",O),console.log("Contact data: ",j),console.log("Deal data: ",T),console.log("Lead data: ",$);try{const K=(await se.post("/accounts/convertedLead",O)).data.id,ae={...j,account_id:K,assigned_to:$.assigned_to?.id,created_by:$.creator?.id,department:$.department,email:$.email,first_name:$.first_name,last_name:$.last_name,mobile_phone_1:$.mobile_phone_1,mobile_phone_2:$.mobile_phone_2,notes:$.notes,title:$.title,work_phone:$.work_phone},Z=(await se.post("/contacts/convertedLead",ae)).data.id,te=()=>{switch(T.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},ge=T.amount&&T.amount!==""?parseFloat(T.amount):0,le={...T,account_id:K,assigned_to:$.assigned_to?.id,created_by:$.creator?.id,primary_contact_id:Z,probability:te(),stage:"Prospecting"},W=await se.post("/deals/convertedLead",le),ee=await se.put(`/leads/convert/${$.id}`);i&&i(null),a(),q.success("Lead converted successfully!"),s()}catch(G){console.error("Error during conversion:",G);const K=G.response?.data?.detail||G.message||"Failed to convert lead. Please try again.";q.error(K)}},B=$=>{switch(($||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},X=$=>$.toString().toLowerCase().replace(/\b\w/g,O=>O.toUpperCase());return d?t.jsx(t.Fragment,{children:t.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[t.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:t.jsxs("div",{className:"flex items-start justify-between w-full",children:[t.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),t.jsx("button",{onClick:()=>{s?s():l(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:t.jsx(es,{size:25})})]})}),t.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[t.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[d.first_name," ",d.last_name]}),t.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${B(d.status)}`,children:X(d.status||"New")}),t.jsx("button",{onClick:()=>{d.status==="Qualified"?U(d):q.warn("Cannot convert lead. Only leads with 'Qualified' status can be converted.")},className:"bg-green-600 hover:bg-green-700 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2 focus:ring-green-400",children:"Convert"})]}),(d.creator?.id===p?.id||d.assigned_to?.id===p?.id)&&t.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsxs("button",{type:"button",onClick:()=>{n&&d&&n(d)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[t.jsx(hs,{className:"mr-2"}),"Edit"]}),t.jsxs("button",{type:"button",onClick:()=>{r&&d&&r(d)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[t.jsx(Nt,{className:"mr-2"}),"Delete"]})]})]}),t.jsx("div",{className:"border-b border-gray-200 my-5"}),t.jsxs("div",{className:"p-4 lg:p-4",children:[t.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map($=>t.jsx("button",{onClick:()=>h($),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${f===$?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:$},$))}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[t.jsxs("div",{className:"lg:col-span-3",children:[f==="Overview"&&t.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Name:"}),t.jsxs("p",{children:[d.first_name," ",d.last_name||"N/A"]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Company:"}),t.jsx("p",{children:d.company_name||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Title:"}),t.jsx("p",{children:d.title||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Department:"}),t.jsx("p",{children:d.department||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Email:"}),t.jsx("p",{children:d.email||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Territory:"}),t.jsx("p",{children:d.territory?.name||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Assigned To:"}),t.jsx("p",{children:d.assigned_to?`${d.assigned_to.first_name} ${d.assigned_to.last_name}`:"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Created By:"}),t.jsx("p",{children:d.creator?`${d.creator.first_name} ${d.creator.last_name}`:"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Work Phone:"}),t.jsx("p",{children:d.work_phone||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),t.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),t.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Source:"}),t.jsx("p",{children:d.source||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Address:"}),t.jsx("p",{children:d.address||"N/A"})]})]})}),f==="Notes"&&t.jsxs("div",{className:"mt-4 w-full",children:[t.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:t.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[t.jsx("div",{className:"flex items-start justify-between",children:t.jsx("div",{children:t.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),t.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]})]}),f==="Activities"&&t.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:ft,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:dt,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map(($,O)=>t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[t.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[t.jsx("div",{className:"text-gray-600 mt-1",children:t.jsx($.icon,{size:24})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"font-medium text-gray-900 break-words",children:$.title}),t.jsx("p",{className:"text-sm text-gray-500 break-words",children:$.desc}),t.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[t.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),t.jsx("p",{className:"text-sm text-gray-700 break-words",children:$.user})]})]})]}),t.jsx("p",{className:"text-sm text-gray-500 break-words",children:$.date})]},O))]})]}),t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),t.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[t.jsxs("button",{onClick:()=>l("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Lead"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),t.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const $=encodeURIComponent(d.email),O=encodeURIComponent(""),G=encodeURIComponent(""),K=`https://mail.google.com/mail/?view=cm&fs=1&to=${$}&su=${O}&body=${G}`;window.open(K,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(js,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),t.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>l("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Lead"}}}),children:[t.jsx(dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),t.jsxs("button",{onClick:()=>l("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Lead"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ts,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),t.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:y,disabled:d.creator?.id!==p?.id&&d.assigned_to?.id!==p?.id,onChange:$=>N($.target.value),children:[t.jsx("option",{value:"New",children:"New"}),t.jsx("option",{value:"Contacted",children:"Contacted"}),t.jsx("option",{value:"Qualified",children:"Qualified"}),t.jsx("option",{value:"Converted",children:"Converted"}),t.jsx("option",{value:"Lost",children:"Lost"})]}),(d.creator?.id===p?.id||d.assigned_to?.id===p?.id)&&t.jsx("button",{onClick:A,disabled:y===d.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${y===d.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const Xoe=pu.all(),vw=Xoe.map((e,s)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${s}`})),Koe=e=>e.toString().toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()),Zoe=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},Mm=10,Nw={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function Joe(){const e=it(),{leadID:s}=Qi();Aa();const[a,n]=g.useState(null),[r,i]=g.useState(!1),[l,c]=g.useState(null),[d,m]=g.useState(null),[f,h]=g.useState([]),[y,N]=g.useState(!1),[w,p]=g.useState(""),[v,C]=g.useState("Filter by Status"),[j,_]=g.useState(1),[T,k]=g.useState(Nw),[E,A]=g.useState(!1),[U,B]=g.useState(null),[X,$]=g.useState(!1),[O,G]=g.useState(null),[K,ae]=g.useState(!1);g.useRef(null);const[R,Z]=g.useState(!1),[te,ge]=g.useState(null),[le,W]=g.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[ee,J]=g.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[he,be]=g.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});g.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const Le=async()=>{try{const Q=await se.get("/leads/getUsers");c(Q.data)}catch(Q){console.error(`Error fetching users: ${Q}`)}},Me=async()=>{N(!0);try{const Q=await se.get("/leads/admin/getLeads");h(Q.data),console.log(Q.data)}catch(Q){console.error(`Error fetching leads: ${Q}`)}finally{N(!1)}};g.useEffect(()=>{Le(),Me()},[]),g.useEffect(()=>{if(s&&f.length>0&&!r&&!E){const Q=f.find(ye=>ye.id===Number(s));Q&&n(Q)}else!s&&!a&&n(null)},[s,f,r,E]),g.useEffect(()=>{if(te){const ye=(me=>{if(!me)return{code:"+63",number:""};const Se=me.match(/^(\+\d+)\s(.+)$/);if(Se)return{code:Se[1],number:Se[2]};if(me.startsWith("+")){const $e=me.match(/^(\+\d{1,3})/);if($e)return{code:$e[1],number:me.substring($e[1].length).trim()}}return{code:"+63",number:me}})(te.work_phone),P=[];te.work_phone&&P.push(`Work: ${te.work_phone}`),te.mobile_phone_1&&P.push(`Mobile 1: ${te.mobile_phone_1}`),te.mobile_phone_2&&P.push(`Mobile 2: ${te.mobile_phone_2}`);const fe=P.length>0?P.join(" | "):"";W({name:te.company_name||"",website:"",countryCode:ye.code,phone_number:ye.number,combinedPhoneNumbers:fe,billing_address:te.address||"",shipping_address:te.address||"",industry:"",status:"Prospect",territory_id:te.assigned_to?.territory?.id||null,assigned_to:te.assigned_to?.id||null,created_by:te.creator?.id||null}),J({last_name:te.last_name||"",first_name:te.first_name||"",account_id:null,title:te.title||"",department:te.department||"",email:te.email||"",work_phone:te.work_phone||"",mobile_phone_1:te.mobile_phone_1||"",mobile_phone_2:te.mobile_phone_2||"",notes:te.notes||"",assigned_to:te.assigned_to?.id||null,created_by:te.creator?.id||null}),be({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:te.assigned_to?.id||null,created_by:te.creator?.id||null})}},[te]);const ke=Q=>p(Q.target.value),F=g.useMemo(()=>{const Q=w.trim().toLowerCase(),ye=v.trim().toUpperCase();return f.filter(P=>{const fe=[P?.first_name,P?.last_name,P?.company_name,P?.title,P?.email,P?.work_phone,P?.assigned_to?`${P.assigned_to.first_name} ${P.assigned_to.last_name}`:""],me=Q===""||fe.some($e=>$e==null||$e===""?!1:$e.toString().toLowerCase().includes(Q));let Se=!1;return ye==="FILTER BY STATUS"?Se=(P.status?P.status.toUpperCase():"")!=="CONVERTED":Se=(P.status?P.status.toUpperCase():"")===ye,me&&Se})},[f,w,v]),ve=Math.max(1,Math.ceil(F.length/Mm)||1);g.useEffect(()=>{_(1)},[w,v]),g.useEffect(()=>{_(Q=>{const ye=Math.max(1,Math.ceil(F.length/Mm)||1);return Q>ye?ye:Q})},[F.length]);const Ce=g.useMemo(()=>{const Q=(j-1)*Mm;return F.slice(Q,Q+Mm)},[F,j]),D=()=>_(Q=>Math.max(Q-1,1)),re=()=>_(Q=>Math.min(Q+1,ve)),oe=Q=>{n(Q)},je=()=>{n(null),s&&e("/admin/leads",{replace:!0})},Re=()=>{i(!1),k(Nw),A(!1),B(null),$(!1),m(null),sessionStorage.removeItem("editLeadData")},Ke=Q=>{Q.target.id==="modalBackdrop"&&Re()},et=()=>{k(Nw),A(!1),B(null),m(null),i(!0)},qe=Q=>{if(!Q){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",Q),console.log("Current state - leadID:",s,"selectedLead:",a,"showModal:",r);const ye=$e=>{if(!$e)return{code:"+63",number:""};const We=$e.match(/^(\+\d+)\s(.+)$/);return We?{code:We[1],number:We[2]}:{code:"+63",number:$e}},P=ye(Q.work_phone),fe=ye(Q.mobile_phone_1),me=ye(Q.mobile_phone_2);let Se="";if(Q.assigned_to){Se=String(Q.assigned_to.id);const $e=l?.find(We=>We.id===Q.assigned_to.id);m($e)}k({first_name:Q.first_name||"",last_name:Q.last_name||"",company_name:Q.company_name||"",title:Q.title||"",department:Q.department||"",email:Q.email||"",work_ccode:P.code,work_phone:P.number,m1_ccode:fe.code,mobile_phone_1:fe.number,m2_ccode:me.code,mobile_phone_2:me.number,address:Q.address||"",notes:Q.notes||"",source:Q.source||"",territory_id:Q.territory?.id||null,lead_owner:Se,status:Q.status||"New"}),A(!0),B(Q.id),a?(console.log("Coming from detail view - closing detail modal and showing edit form"),n(null),i(!0)):(console.log("Already in list view - showing modal"),i(!0))},Ze=Q=>{if(!Q){console.error("handleDelete: lead is null or undefined");return}console.log("handleDelete called with lead:",Q);const ye=`${Q.first_name} ${Q.last_name}`||"this lead";G({title:"Delete Lead",message:t.jsxs("span",{children:["Are you sure you want to permanently delete"," ",t.jsx("span",{className:"font-semibold",children:ye}),"? This action cannot be undone."]}),confirmLabel:"Delete Lead",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:Q.id,name:ye}})},we=Q=>{const{name:ye,value:P}=Q.target;if(k(fe=>({...fe,[ye]:P})),ye==="lead_owner"){const fe=l.find(me=>me.id===parseInt(P));m(fe)}},V=Q=>{if(Q.preventDefault(),!T.first_name?.trim()||!T.last_name?.trim()){q.error("First name and last name are required.");return}if(!T.lead_owner){q.error("Please assign a lead owner.");return}const ye={...T,territory_id:T.territory_id?parseInt(T.territory_id):null,lead_owner:parseInt(T.lead_owner),work_phone:`${T.work_ccode} ${T.work_phone}`,mobile_phone_1:`${T.m1_ccode} ${T.mobile_phone_1}`,mobile_phone_2:`${T.m2_ccode} ${T.mobile_phone_2}`},P=E&&U?"update":"create",fe=`${T.first_name} ${T.last_name}`;G({title:P==="create"?"Confirm New Lead":"Confirm Update",message:P==="create"?t.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",t.jsx("span",{className:"font-semibold",children:fe}),"?"]}):t.jsxs("span",{children:["Save changes to ",t.jsx("span",{className:"font-semibold",children:fe}),"?"]}),confirmLabel:P==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:P,payload:ye,targetId:U||null,name:fe}})},pe=async()=>{if(!O?.action){G(null);return}const{action:Q}=O,{type:ye,payload:P,targetId:fe,name:me,lead:Se}=Q;console.log(P),ae(!0);try{if(ye==="create")$(!0),await se.post("/leads/create",P),q.success(`Lead "${me}" created successfully.`),Re(),await Me();else if(ye==="update"){if(!fe)throw new Error("Missing lead identifier for update.");$(!0);const $e=await se.put(`/leads/${fe}`,P);q.success(`Lead "${me}" updated successfully.`),a&&a.id===fe&&n(null),Re(),await Me()}else if(ye==="delete"){if(!fe)throw new Error("Missing lead identifier for deletion.");await se.delete(`/leads/${fe}`),q.success(`Lead "${me}" deleted successfully.`),a?.id===fe&&n(null),await Me()}}catch($e){console.error($e);const We=ye==="create"?"Failed to create lead. Please review the details and try again.":ye==="update"?"Failed to update lead. Please review the details and try again.":"Failed to delete lead. Please try again.",rt=$e.response?.data?.detail||We;q.error(rt)}finally{(ye==="create"||ye==="update")&&$(!1),ye!=="edit"&&(ae(!1),G(null))}},z=()=>{K||G(null)},ie=f.filter(Q=>Q.status==="New").length,ue=f.filter(Q=>Q.status==="Contacted").length,M=f.filter(Q=>Q.status==="Qualified").length,xe=f.filter(Q=>Q.status==="Converted").length,ne=f.filter(Q=>Q.status==="Lost").length,Te=[{title:"New",value:ie,icon:Cs,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:ue,icon:ft,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:M,icon:As,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:xe,icon:qi,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:ne,icon:tr,color:"text-red-600",bgColor:"bg-red-100"}];return t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[y&&t.jsx(xt,{message:"Loading leads..."}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[t.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[t.jsx(Cs,{className:"mr-2 text-blue-600"}),"Leads"]}),t.jsxs("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:[t.jsxs("button",{onClick:()=>{q.info("Download functionality coming soon")},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[t.jsx(Xr,{className:"mr-2"})," Download"]}),t.jsxs("button",{onClick:et,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[t.jsx(Lt,{className:"mr-2"})," Add Lead"]})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Te.map(Q=>t.jsx(tce,{...Q},Q.title))}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[t.jsx(yt,{size:20,className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search leads",value:w,onChange:ke,className:"focus:outline-none text-base w-full"})]}),t.jsx("div",{className:"w-full lg:w-1/4",children:t.jsxs("select",{value:v,onChange:Q=>C(Q.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[t.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),t.jsx("option",{value:"New",children:"New"}),t.jsx("option",{value:"Contacted",children:"Contacted"}),t.jsx("option",{value:"Qualified",children:"Qualified"}),t.jsx("option",{value:"Converted",children:"Converted"}),t.jsx("option",{value:"Lost",children:"Lost"})]})})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[t.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4",children:"Name"}),t.jsx("th",{className:"py-3 px-4",children:"Company"}),t.jsx("th",{className:"py-3 px-4",children:"Title"}),t.jsx("th",{className:"py-3 px-4",children:"Email"}),t.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),t.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),t.jsx("tbody",{children:F.length>0?Ce.map(Q=>t.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>oe(Q),children:[t.jsx("td",{className:"py-3 px-4",children:t.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[Q.first_name," ",Q.last_name]})}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:Q.company_name||"--"})}),t.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:Q.title||"--"}),t.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:Q.email||"--"}),t.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:Q.assigned_to?`${Q.assigned_to.first_name} ${Q.assigned_to.last_name}`:"--"}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Zoe(Q.status||"New")}`,children:Koe(Q.status||"New")})})]},Q.id)):t.jsx("tr",{children:t.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No leads found."})})})]})}),t.jsx(Ct,{className:"mt-4",totalItems:F.length,pageSize:Mm,currentPage:j,onPrev:D,onNext:re,label:"leads"}),r&&t.jsx("div",{id:"modalBackdrop",onClick:Ke,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:Q=>Q.stopPropagation(),children:[t.jsx("button",{onClick:Re,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:t.jsx(jt,{size:22})}),t.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:E?"Edit Lead":"Add New Lead"}),t.jsxs("form",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),t.jsx("input",{type:"text",name:"first_name",value:T.first_name,onChange:we,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Last Name"}),t.jsx("input",{type:"text",placeholder:"Smith",name:"last_name",value:T.last_name,onChange:we,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Company"}),t.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:T.company_name,onChange:we,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Title"}),t.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:T.title,onChange:we,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),t.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:T.department,onChange:we,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Email"}),t.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:T.email,onChange:we,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),t.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[t.jsx("select",{name:"work_ccode",value:T.work_ccode,onChange:we,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:vw.map(Q=>t.jsx("option",{value:Q.code,children:Q.code},Q.id))}),t.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:T.work_phone,onChange:we,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),t.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[t.jsx("select",{name:"m1_ccode",value:T.m1_ccode,onChange:we,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:vw.map(Q=>t.jsx("option",{value:Q.code,children:Q.code},Q.id))}),t.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:T.mobile_phone_1,onChange:we,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),t.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[t.jsx("select",{name:"m2_ccode",value:T.m2_ccode,onChange:we,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:vw.map(Q=>t.jsx("option",{value:Q.code,children:Q.code},Q.id))}),t.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:T.mobile_phone_2,onChange:we,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),t.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),t.jsx("input",{type:"text",name:"address",value:T.address,onChange:we,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Assign To"}),t.jsx(sce,{items:Array.isArray(l)?l:[],value:T.lead_owner??"",placeholder:"Search a user...",getLabel:Q=>`${Q.first_name} ${Q.last_name}`,onChange:Q=>{const ye=l.find(fe=>String(fe.id)===String(Q));m(ye);let P=null;ye&&ye.assigned_territory&&ye.assigned_territory.length===1&&(P=ye.assigned_territory[0].id),k(fe=>({...fe,lead_owner:Q,territory_id:P}))}})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),t.jsxs("select",{name:"territory_id",value:T.territory_id||"",onChange:we,disabled:!d||!d.assigned_territory||d.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[t.jsx("option",{value:"",disabled:!0,children:d?d.assigned_territory&&d.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),d&&d.assigned_territory&&d.assigned_territory.map(Q=>t.jsx("option",{value:Q.id,children:Q.name},Q.id))]})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),t.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:T.source,onChange:we,children:[t.jsx("option",{value:"",disabled:!0,children:"Select Source"}),t.jsx("option",{value:"Website",children:"Website"}),t.jsx("option",{value:"Referral",children:"Referral"}),t.jsx("option",{value:"Cold call",children:"Cold call"}),t.jsx("option",{value:"Event",children:"Event"}),t.jsx("option",{value:"Other",children:"Other"})]})]}),t.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),t.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:T.notes,onChange:we,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[t.jsx("button",{type:"button",onClick:Re,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:X||K,children:"Cancel"}),t.jsx("button",{type:"submit",onClick:V,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:X||K,children:X||K?"Processing...":E?"Update Lead":"Save Lead"})]})]})]})}),O&&t.jsx(ece,{open:!0,title:O.title,message:O.message,confirmLabel:O.confirmLabel,cancelLabel:O.cancelLabel,variant:O.variant,onConfirm:pe,onCancel:z,loading:K}),a&&!r&&!E&&t.jsx(p$,{lead:a,onBack:je,fetchLeads:Me,setSelectedLead:n,onEdit:qe,onDelete:Ze})]})}function ece({open:e,title:s,message:a,confirmLabel:n,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:c,onCancel:d}){if(!e)return null;const m=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s}),t.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),t.jsx("button",{type:"button",onClick:c,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${m}`,disabled:l,children:l?"Processing...":n})]})]})})}function tce({icon:e,title:s,value:a,color:n="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${s}`)};return t.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[t.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${n} mr-4`,children:e?t.jsx(e,{size:22}):null}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"text-xs text-gray-500 uppercase",children:s}),t.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function sce({items:e=[],value:s="",onChange:a,getLabel:n,placeholder:r="Search...",disabled:i=!1,maxRender:l=200}){const[c,d]=g.useState(!1),[m,f]=g.useState(""),h=g.useRef(null),y=e.find(p=>String(p.id)===String(s)),N=y?n(y):"",w=g.useMemo(()=>{const p=m.trim().toLowerCase();return(p?e.filter(C=>(n(C)||"").toLowerCase().includes(p)):e).slice(0,l)},[e,m,n,l]);return g.useEffect(()=>{const p=v=>{h.current&&!h.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]),g.useEffect(()=>{c||f("")},[c]),t.jsxs("div",{ref:h,className:"relative w-full",children:[t.jsx("input",{disabled:i,value:c?m:N,placeholder:r,onFocus:()=>!i&&d(!0),onChange:p=>{f(p.target.value),c||d(!0)},className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),c&&!i&&t.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[t.jsx("div",{className:"max-h-56 overflow-y-auto",children:w.length>0?w.map(p=>{const v=String(p.id),C=n(p),j=String(s)===v;return t.jsx("button",{type:"button",onClick:()=>{a(v),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${j?"bg-blue-50":""}`,children:C||"--"},v)}):t.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&t.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ace=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),nce=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,a,n)=>n?n.toUpperCase():a.toLowerCase()),Fk=e=>{const s=nce(e);return s.charAt(0).toUpperCase()+s.slice(1)},y$=(...e)=>e.filter((s,a,n)=>!!s&&s.trim()!==""&&n.indexOf(s)===a).join(" ").trim(),rce=e=>{for(const s in e)if(s.startsWith("aria-")||s==="role"||s==="title")return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ice={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lce=g.forwardRef(({color:e="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:n,className:r="",children:i,iconNode:l,...c},d)=>g.createElement("svg",{ref:d,...ice,width:s,height:s,stroke:e,strokeWidth:n?Number(a)*24/Number(s):a,className:y$("lucide",r),...!i&&!rce(c)&&{"aria-hidden":"true"},...c},[...l.map(([m,f])=>g.createElement(m,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oce=(e,s)=>{const a=g.forwardRef(({className:n,...r},i)=>g.createElement(lce,{ref:i,iconNode:s,className:y$(`lucide-${ace(Fk(e))}`,`lucide-${e}`,n),...r}));return a.displayName=Fk(e),a};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cce=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],$y=oce("x",cce),Lx={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},Ks=({label:e,value:s,name:a,className:n=""})=>t.jsxs("div",{className:`flex flex-col ${n}`,children:[t.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),t.jsx("input",{type:"text",name:a,defaultValue:s,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),dce=({data:e})=>t.jsxs("div",{className:"space-y-6 p-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsx(Ks,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),t.jsx(Ks,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),t.jsx(Ks,{label:"Industry",name:"industry",value:e.industry})]}),t.jsx(Ks,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),t.jsx(Ks,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),uce=({data:e})=>t.jsxs("div",{className:"space-y-6 p-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(Ks,{label:"First Name",name:"firstName",value:e.firstName}),t.jsx(Ks,{label:"Last Name",name:"lastName",value:e.lastName}),t.jsx(Ks,{label:"Department",name:"department",value:e.department}),t.jsx(Ks,{label:"Title",name:"title",value:e.title}),t.jsx(Ks,{label:"Work Phone",name:"workPhone",value:e.workPhone}),t.jsx(Ks,{label:"Email",name:"email",value:e.email}),t.jsx(Ks,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),t.jsx(Ks,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),mce=({data:e})=>t.jsxs("div",{className:"space-y-6 p-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(Ks,{label:"Deal Name",name:"dealName",value:e.dealName}),t.jsxs("div",{className:"flex",children:[t.jsx(Ks,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),t.jsx("div",{className:"flex flex-col justify-end ml-1",children:t.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),t.jsx(Ks,{label:"Stage",name:"stage",value:e.stage}),t.jsx(Ks,{label:"Territory",name:"territory",value:e.territory})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(Ks,{label:"Description",name:"description",value:e.description}),t.jsx(Ks,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function fce({isOpen:e,onClose:s}){const[a,n]=g.useState(1),r=3;if(!e)return null;const i=()=>{a<r?n(a+1):(s(),n(1))},l=()=>{a>1&&n(a-1)},c=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],d=()=>{switch(a){case 1:return t.jsx(dce,{data:Lx});case 2:return t.jsx(uce,{data:Lx});case 3:return t.jsx(mce,{data:Lx});default:return null}};return t.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[t.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),t.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:Lx.accountName})]}),t.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition",children:t.jsx($y,{className:"w-6 h-6"})})]}),t.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:c.map(m=>t.jsx("button",{onClick:()=>n(m.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${a===m.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:m.name},m.id))}),t.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:d()}),t.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[a>1&&t.jsx("button",{onClick:l,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),a<r?t.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):t.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}function Ry({selectedDeal:e,onStatusUpdate:s,onClose:a}){const[n,r]=g.useState(e?.stage||""),[i,l]=g.useState(!1),c=it(),{user:d}=zt();g.useEffect(()=>{console.log("AdminDealsInformation mounted sahdksd",e),console.log("User sadad:",d)},[e,d]);const m=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"}];g.useEffect(()=>{e?.stage&&r(e.stage)},[e]);const f=async()=>{if(!e||!e.id){q.error("No deal selected");return}if(!n||n===e.stage){q.info("Please select a different stage");return}const h=e.id;l(!0);try{await se.put(`/deals/admin/${h}`,{stage:n}),a&&a(),s&&setTimeout(async()=>{await s(!0)},100),setTimeout(()=>{q.success("Deal status updated successfully")},300)}catch(y){console.error(y);const N=y.response?.data?.detail||"Failed to update deal status";q.error(N)}finally{l(!1)}};return e?t.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),t.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[t.jsxs("button",{onClick:()=>c("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Deal"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),t.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const h=encodeURIComponent(e.contact.email),y=encodeURIComponent(""),N=encodeURIComponent(""),w=`https://mail.google.com/mail/?view=cm&fs=1&to=${h}&su=${y}&body=${N}`;window.open(w,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(js,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),t.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>c("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Deal"}}}),children:[t.jsx(dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),t.jsxs("button",{onClick:()=>c("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Deal"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ts,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),t.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:n,onChange:h=>r(h.target.value),disabled:i||e.created_by!==d?.id&&e.assigned_to!==d?.id,children:m.map(h=>t.jsx("option",{value:h.value,children:h.label},h.value))}),(e.created_by===d?.id||e.assigned_to===d?.id)&&t.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:f,disabled:i||!n||n===e.stage,children:i?"Updating...":"Update"})]})]}):null}function b$({selectedDeal:e,show:s,onClose:a,activeTab:n,setActiveTab:r,onEdit:i,onDelete:l,onStatusUpdate:c}){const d=it(),[m]=Aa(),f=m.get("id"),[h,y]=g.useState(e||null),[N,w]=g.useState(n||"Overview"),{user:p}=zt();g.useEffect(()=>{console.log("AdminDealsInformation mounted",h),console.log("User:",p)},[h,p]);const v=n!==void 0?n:N;if(g.useEffect(()=>{(async()=>{if(f&&!e)try{console.log("Fetching deal from route, ID:",f);const k=(await se.get("/deals/admin/fetch-all")).data||[];console.log("All deals fetched:",k.length);const E=k.find(A=>A.id===parseInt(f));if(console.log("Found deal:",E),E){console.log("Deal data structure:",{id:E.id,name:E.name,amount:E.amount,stage:E.stage,account:E.account,contact:E.contact,assigned_deals:E.assigned_deals,deal_creator:E.deal_creator,allKeys:Object.keys(E)});const A={...E,amount:typeof E.amount=="number"?E.amount:parseFloat(E.amount||0),probability:E.probability||0};y(A)}else console.warn("Deal not found with ID:",f)}catch(T){console.error("Error fetching deal:",T)}})()},[f,e]),!h&&!f||f&&!h)return null;const C=_=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[_]||"bg-gray-100 text-gray-700";function j(_){return _?new Date(_).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[t.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:t.jsxs("div",{className:"flex items-start justify-between w-full",children:[t.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),t.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:t.jsx("button",{onClick:()=>{a?a():d(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:t.jsx(jt,{size:25})})})]})}),t.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:t.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[t.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:h.name}),t.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${C(h.stage)}`,children:h.stage})]}),t.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",j(h.created_at)]})]}),t.jsxs("div",{className:"flex flex-col items-end gap-2",children:[t.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[" ",h.amount?h.amount.toLocaleString():"0"]}),t.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${h.probability}%`}})}),t.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",h.probability,"% Complete "]}),(h.created_by===p?.id||h.assigned_to===p?.id)&&t.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[t.jsxs("button",{type:"button",onClick:()=>{i&&i(h)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[t.jsx(hs,{className:"mr-1 sm:mr-2",size:16}),t.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),t.jsxs("button",{type:"button",onClick:()=>{l&&l(h)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[t.jsx(Nt,{className:"mr-1 sm:mr-2",size:16}),t.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]})}),t.jsx("div",{className:"border-b border-gray-200 my-5"}),t.jsxs("div",{className:"p-6 lg:p-4",children:[t.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(_=>t.jsx("button",{onClick:()=>{r?r(_):w(_)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${v===_?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:_},_))}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[t.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[v==="Overview"&&t.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),t.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[t.jsx("strong",{children:"Description:"})," ",h.description]}),t.jsx("div",{className:"h-px bg-gray-200 w-full"}),t.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[t.jsx("strong",{children:"Expected Close Date:"})," ",h.close_date]}),t.jsx("div",{className:"h-px bg-gray-200 w-full"}),t.jsxs("div",{className:"mt-4 py-3 w-full",children:[t.jsxs("div",{className:"relative flex flex-col w-full",children:[t.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const _=(h?.stage||"PROSPECTING").toUpperCase(),k=(A=>A==="PROSPECTING"?0:A==="QUALIFICATION"?1:A==="PROPOSAL"?2:A==="NEGOTIATION"?3:A==="CLOSED_WON"||A==="CLOSED_LOST"?4:-1)(_);return[0,1,2,3,4].map(A=>k===A?"orange":k>A?"green":"gray").map((A,U)=>t.jsxs(at.Fragment,{children:[t.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${A==="green"?"bg-green-500 border-green-500":A==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),U<4&&t.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},U))})()}),t.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((_,T)=>t.jsx("span",{className:"text-center flex-1 break-words",children:_},T))})]}),t.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:h.stage})]})]}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),t.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[t.jsxs("p",{children:[t.jsx("strong",{children:"Account:"})," ",h.account?.name]}),t.jsx("div",{className:"h-px bg-gray-200 w-full"}),t.jsxs("p",{children:[t.jsx("strong",{children:"Primary Contact:"})," ",h.contact?.first_name," ",h.contact?.last_name]}),t.jsx("div",{className:"h-px bg-gray-200 w-full"}),t.jsxs("p",{children:[t.jsx("strong",{children:"Phone:"})," ",h.contact?.work_phone]}),t.jsx("div",{className:"h-px bg-gray-200 w-full"}),t.jsxs("p",{children:[t.jsx("strong",{children:"Email:"})," ",h.contact?.email]}),t.jsx("div",{className:"h-px bg-gray-200 w-full"}),t.jsxs("p",{children:[t.jsx("strong",{children:"Assigned To:"})," ",h.assigned_deals?.first_name," ",h.assigned_deals?.last_name]})]})]})]}),v==="Notes"&&t.jsxs("div",{className:"mt-4 w-full",children:[t.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:t.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[t.jsx("div",{className:"flex items-start justify-between",children:t.jsx("div",{children:t.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),t.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:h.description||"No notes available."})]})]}),v==="Activities"&&t.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:ft,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:dt,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((_,T)=>t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[t.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[t.jsx("div",{className:"text-gray-600 mt-1",children:t.jsx(_.icon,{size:24})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"font-medium text-gray-900 break-words",children:_.title}),t.jsx("p",{className:"text-sm text-gray-500 break-words",children:_.desc}),t.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[t.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),t.jsx("p",{className:"text-sm text-gray-700 break-words",children:_.user})]})]})]}),t.jsx("p",{className:"text-sm text-gray-500 break-words",children:_.date})]},T))]}),v==="Edit"&&t.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[t.jsxs("label",{className:"block mb-3 break-words",children:[t.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),t.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:h.name})]}),t.jsxs("label",{className:"block mb-3 break-words",children:[t.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),t.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:h.description})]}),t.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),t.jsx("div",{className:"w-full lg:w-auto",children:t.jsx(Ry,{selectedDeal:h,onStatusUpdate:c,onClose:a})})]})]})]})})}const Pm=10;function hce(){g.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const[e,s]=g.useState(""),[a,n]=g.useState("Filter by Stage"),[r,i]=g.useState("Filter by Owner"),[l,c]=g.useState(null),[d,m]=g.useState("Overview"),[f,h]=g.useState(!1),[y,N]=g.useState(null),[w,p]=g.useState(!1),[v,C]=g.useState(1),[j,_]=g.useState(!1),[T,k]=g.useState(null),[E,A]=g.useState(!1),[U,B]=g.useState(!1),[X,$]=g.useState(null),[O,G]=g.useState([]),[K,ae]=g.useState([]),[R,Z]=g.useState([]),[te,ge]=g.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),le={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST"},W=M=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"})[M]||M||"--",ee=M=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[M]||"bg-gray-100 text-gray-700",J=g.useMemo(()=>{const M=e.trim().toLowerCase(),xe=a.trim(),ne=r.trim();return(y??[]).filter(Te=>{const Q=[Te?.name,Te?.description,Te?.account?.name,Te?.contact?.first_name,Te?.contact?.last_name,Te?.assigned_deals?.first_name,Te?.assigned_deals?.last_name],ye=M===""||Q.some(me=>me==null||me===""?!1:me.toString().toLowerCase().includes(M)),P=xe==="Filter by Stage"||xe===""||Te.stage===le[xe]||Te.stage===xe,fe=ne==="Filter by Owner"||ne===""||`${Te.assigned_deals?.first_name||""} ${Te.assigned_deals?.last_name||""}`.trim().toLowerCase()===ne.toLowerCase();return ye&&P&&fe})},[y,e,a,r]),he=Math.max(1,Math.ceil(J.length/Pm)||1);g.useEffect(()=>{C(1)},[e,a,r]),g.useEffect(()=>{C(M=>{const xe=Math.max(1,Math.ceil(J.length/Pm)||1);return M>xe?xe:M})},[J.length]);const be=g.useMemo(()=>{const M=(v-1)*Pm;return J.slice(M,M+Pm)},[J,v]),Le=()=>C(M=>Math.max(M-1,1)),Me=()=>C(M=>Math.min(M+1,he)),ke=()=>{ge({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),B(!1),$(null),h(!0)},F=async()=>{p(!0);try{const M=await se.get("/deals/admin/fetch-all"),ne=[...Array.isArray(M.data)?M.data:[]].sort((Te,Q)=>{const ye=Te?.created_at?new Date(Te.created_at).getTime():0;return(Q?.created_at?new Date(Q.created_at).getTime():0)-ye});N(ne)}catch(M){M.response&&M.response.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch deals. Please try again later."),console.error(M)}finally{p(!1)}},ve=async()=>{try{const M=await se.get("/accounts/sales/fetch-all");G(Array.isArray(M.data)?M.data:[])}catch(M){console.error(M),M.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},Ce=async()=>{try{const M=await se.get("/contacts/admin/fetch-all");ae(Array.isArray(M.data)?M.data:[])}catch(M){console.error(M),M.response?.status===403&&q.warn("Unable to load contacts (permission denied).")}},D=async()=>{try{const M=await se.get("/users/all");Z(Array.isArray(M.data)?M.data:[])}catch(M){console.error(M),M.response?.status===403&&q.warn("Unable to load users (permission denied).")}};g.useEffect(()=>{F(),ve(),Ce(),D()},[]);const re=M=>{M&&(ge({id:M.id||null,name:M.name||"",account_id:M.account_id?.toString()||"",primary_contact_id:M.primary_contact_id?.toString()||"",stage:M.stage||"PROPOSAL",amount:M.amount?.toString()||"",close_date:M.close_date?new Date(M.close_date).toISOString().split("T")[0]:"",assigned_to:M.assigned_to?.toString()||"",currency:M.currency||"PHP",description:M.description||""}),B(!0),$(M.id),c(null),h(!0))},oe=async(M=!1)=>{try{const xe=await se.get("/deals/admin/fetch-all"),Te=[...Array.isArray(xe.data)?xe.data:[]].sort((Q,ye)=>{const P=Q?.created_at?new Date(Q.created_at).getTime():0;return(ye?.created_at?new Date(ye.created_at).getTime():0)-P});if(N(Te),!M&&l&&l.id){const Q=Te.find(ye=>ye.id===l.id);Q&&c({...Q})}}catch(xe){console.error("Failed to refresh deal data:",xe),await F()}},je=M=>{const xe=M.name.trim();if(!xe){q.error("Deal name is required.");return}const ne=U&&X?"update":"create",Te=xe;k({title:ne==="create"?"Confirm New Deal":"Confirm Update",message:ne==="create"?t.jsxs("span",{children:["Are you sure you want to create"," ",t.jsx("span",{className:"font-semibold",children:Te}),"?"]}):t.jsxs("span",{children:["Save changes to ",t.jsx("span",{className:"font-semibold",children:Te}),"?"]}),confirmLabel:ne==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:ne,formData:M,targetId:X||null,name:Te}})},Re=M=>{if(!M)return;const xe=M.name||"this deal";k({title:"Delete Deal",message:t.jsxs("span",{children:["Are you sure you want to permanently delete"," ",t.jsx("span",{className:"font-semibold",children:xe}),"? This action cannot be undone."]}),confirmLabel:"Delete Deal",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:M.id,name:xe}})},Ke=async()=>{if(!T?.action){k(null);return}const{action:M}=T,{type:xe,formData:ne,targetId:Te,name:Q}=M;A(!0);try{if(xe==="create"){_(!0);const ye={name:ne.name.trim(),account_id:parseInt(ne.account_id),primary_contact_id:ne.primary_contact_id?parseInt(ne.primary_contact_id):null,stage:ne.stage,amount:ne.amount?parseFloat(ne.amount):null,currency:ne.currency||"PHP",close_date:ne.close_date||null,description:ne.description||null,assigned_to:ne.assigned_to?parseInt(ne.assigned_to):null};await se.post("/deals/admin/create",ye),q.success(`Deal "${Q}" created successfully.`),h(!1),await F()}else if(xe==="update"){if(!Te)throw new Error("Missing deal identifier for update.");_(!0);const ye={};ne.name!==void 0&&(ye.name=ne.name.trim()),ne.account_id!==void 0&&ne.account_id!==""&&(ye.account_id=parseInt(ne.account_id)),ne.primary_contact_id!==void 0&&(ye.primary_contact_id=ne.primary_contact_id?parseInt(ne.primary_contact_id):null),ne.stage!==void 0&&(ye.stage=ne.stage),ne.amount!==void 0&&ne.amount!==""&&(ye.amount=parseFloat(ne.amount)),ne.currency!==void 0&&(ye.currency=ne.currency),ne.close_date!==void 0&&(ye.close_date=ne.close_date||null),ne.description!==void 0&&(ye.description=ne.description||null),ne.assigned_to!==void 0&&(ye.assigned_to=ne.assigned_to?parseInt(ne.assigned_to):null),await se.put(`/deals/admin/${Te}`,ye),q.success(`Deal "${Q}" updated successfully.`),h(!1),await F()}else if(xe==="delete"){if(!Te)throw new Error("Missing deal identifier for deletion.");await se.delete(`/deals/admin/${Te}`),q.success(`Deal "${Q}" deleted successfully.`),l?.id===Te&&c(null),await F()}}catch(ye){console.error(ye);const P=xe==="create"?"Failed to create deal. Please review the details and try again.":xe==="update"?"Failed to update deal. Please review the details and try again.":"Failed to delete deal. Please try again.",fe=ye.response?.data?.detail||P;q.error(fe)}finally{(xe==="create"||xe==="update")&&_(!1),A(!1),k(null)}},et=()=>{E||k(null)},qe=()=>{h(!1),ge({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),B(!1),$(null),_(!1)},Ze=(y??[]).filter(M=>M.stage==="PROSPECTING").length,we=(y??[]).filter(M=>M.stage==="QUALIFICATION").length,V=(y??[]).filter(M=>M.stage==="PROPOSAL").length,pe=(y??[]).filter(M=>M.stage==="NEGOTIATION").length,z=(y??[]).filter(M=>M.stage==="CLOSED_WON").length,ie=(y??[]).filter(M=>M.stage==="CLOSED_LOST").length,ue=[{title:"Prospecting",value:Ze,icon:w0,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:we,icon:ys,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:V,icon:Es,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:pe,icon:Vd,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:z,icon:As,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:ie,icon:tr,color:"text-red-600",bgColor:"bg-red-100"}];return t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[w&&t.jsx(xt,{message:"Loading deals..."}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[t.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[t.jsx(Es,{className:"mr-2 text-blue-600"}),"Deals"]}),t.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:t.jsxs("button",{onClick:ke,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[t.jsx(Lt,{className:"mr-2"})," Add Deal"]})})]}),t.jsx("div",{className:"grid grid-cols-1 p-2 sm:grid-cols-3 gap-4 mb-6 w-full break-words overflow-hidden",children:ue.map(M=>t.jsx(xce,{...M},M.title))}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[t.jsx(yt,{size:20,className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search deals",value:e,onChange:M=>s(M.target.value),className:"focus:outline-none text-base w-full"})]}),t.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[t.jsxs("select",{value:a,onChange:M=>n(M.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[t.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),t.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),t.jsx("option",{value:"Qualification Stage",children:"Qualification"}),t.jsx("option",{value:"Proposal Stage",children:"Proposal"}),t.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),t.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),t.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"})]}),t.jsxs("select",{value:r,onChange:M=>i(M.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[t.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((y??[]).map(M=>`${M.assigned_deals?.first_name} ${M.assigned_deals?.last_name}`))].map((M,xe)=>t.jsx("option",{value:M,children:M},xe))]})]})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[t.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),t.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),t.jsx("th",{className:"py-3 px-4",children:"Account"}),t.jsx("th",{className:"py-3 px-4",children:"Contact"}),t.jsx("th",{className:"py-3 px-4",children:"Stage"}),t.jsx("th",{className:"py-3 px-4",children:"Value"}),t.jsx("th",{className:"py-3 px-4",children:"Close Date"}),t.jsx("th",{className:"py-3 px-4",children:"Owner"})]})}),t.jsx("tbody",{children:J.length>0?be.map(M=>t.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{c({...M})},children:[t.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:M.deal_id?M.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),t.jsx("td",{className:"py-3 px-4",children:t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:M.name}),t.jsx("div",{className:"text-gray-500 text-xs break-all",children:M.description||"--"})]})}),t.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:M.account?.name||"--"}),t.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:M.contact?.first_name&&M.contact?.last_name?`${M.contact.first_name} ${M.contact.last_name}`:M.contact?.first_name||M.contact?.last_name||"--"}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ee(M.stage)}`,children:W(M.stage)})}),t.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",M.amount?.toLocaleString()||"0"]}),t.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:M.close_date||"--"}),t.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:M.assigned_deals?.first_name&&M.assigned_deals?.last_name?`${M.assigned_deals.first_name} ${M.assigned_deals.last_name}`:M.assigned_deals?.first_name||M.assigned_deals?.last_name||"--"})]},M.id)):t.jsx("tr",{children:t.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No deals found."})})})]})}),t.jsx(Ct,{className:"mt-4",totalItems:J.length,pageSize:Pm,currentPage:v,onPrev:Le,onNext:Me,label:"deals"}),f&&t.jsx(pce,{onClose:qe,formData:te,setFormData:ge,isEditing:U,onSubmit:je,isSubmitting:j||E,accounts:O,contacts:K,users:R}),l&&t.jsx(b$,{selectedDeal:l,show:!!l,onClose:()=>c(null),activeTab:d,setActiveTab:m,onEdit:re,onDelete:Re,onStatusUpdate:oe}),T&&t.jsx(gce,{open:!0,title:T.title,message:T.message,confirmLabel:T.confirmLabel,cancelLabel:T.cancelLabel,variant:T.variant,onConfirm:Ke,onCancel:et,loading:E})]})}function gce({open:e,title:s,message:a,confirmLabel:n,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:c,onCancel:d}){if(!e)return null;const m=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s}),t.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),t.jsx("button",{type:"button",onClick:c,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${m}`,disabled:l,children:l?"Processing...":n})]})]})})}function xce({icon:e,title:s,value:a,color:n="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${s}`)};return t.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[t.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${n} mr-4`,children:e?t.jsx(e,{size:22}):null}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"text-xs text-gray-500 uppercase",children:s}),t.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function pce({onClose:e,formData:s,setFormData:a,isEditing:n=!1,onSubmit:r,isSubmitting:i=!1,accounts:l=[],contacts:c=[],users:d=[]}){const m=h=>{h.preventDefault(),r&&r(s)},f=h=>{h.target.id==="modalBackdrop"&&e()};return t.jsx("div",{id:"modalBackdrop",onClick:f,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:h=>h.stopPropagation(),children:[t.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:t.jsx(jt,{size:22})}),t.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:n?"Edit Deal":"Create Deal"}),t.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:m,children:[t.jsx(ww,{label:"Deal Name",name:"name",value:s.name,onChange:h=>a({...s,name:h.target.value}),placeholder:"Enter deal name",required:!0,disabled:i,className:"md:col-span-2"}),t.jsx(Om,{label:"Account",name:"account_id",value:s.account_id||"",onChange:h=>a({...s,account_id:h.target.value}),options:[{value:"",label:"Select Account"},...l.map(h=>({value:h.id.toString(),label:h.name}))],required:!0,disabled:i||n}),t.jsx(Om,{label:"Primary Contact",name:"primary_contact_id",value:s.primary_contact_id||"",onChange:h=>a({...s,primary_contact_id:h.target.value}),options:[{value:"",label:"Select Contact (Optional)"},...c.map(h=>({value:h.id.toString(),label:`${h.first_name} ${h.last_name}`.trim()||h.email}))],disabled:i||n}),t.jsx(Om,{label:"Stage",name:"stage",value:s.stage,onChange:h=>a({...s,stage:h.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"}],disabled:i}),t.jsx(ww,{label:"Amount",name:"amount",type:"number",step:"0.01",value:s.amount,onChange:h=>a({...s,amount:h.target.value}),placeholder:"0",disabled:i}),t.jsx(Om,{label:"Currency",name:"currency",value:s.currency||"PHP",onChange:h=>a({...s,currency:h.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),t.jsx(ww,{label:"Close Date",name:"close_date",type:"date",value:s.close_date||"",onChange:h=>a({...s,close_date:h.target.value}),disabled:i}),t.jsx(Om,{label:"Assign To",name:"assigned_to",value:s.assigned_to||"",onChange:h=>a({...s,assigned_to:h.target.value}),options:[{value:"",label:"Assign To (Optional)"},...d.map(h=>({value:h.id.toString(),label:`${h.first_name} ${h.last_name}`.trim()||h.email}))],disabled:i||n,className:"md:col-span-2"}),t.jsx(yce,{label:"Description",name:"description",value:s.description,onChange:h=>a({...s,description:h.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[t.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),t.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":n?"Update Deal":"Save Deal"})]})]})]})})}function ww({label:e,name:s,value:a,onChange:n,placeholder:r,type:i="text",required:l=!1,disabled:c=!1,className:d=""}){return t.jsxs("div",{className:d,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("input",{type:i,name:s,value:a??"",onChange:n,placeholder:r,required:l,disabled:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]})}function Om({label:e,name:s,value:a,onChange:n,options:r,required:i=!1,disabled:l=!1,className:c=""}){return t.jsxs("div",{className:c,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("select",{name:s,value:a??"",onChange:n,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(d=>t.jsx("option",{value:d.value,children:d.label},d.value))})]})}function yce({label:e,name:s,value:a,onChange:n,placeholder:r,required:i=!1,disabled:l=!1,className:c="",rows:d=3}){return t.jsxs("div",{className:c,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("textarea",{name:s,value:a??"",onChange:n,placeholder:r,required:i,disabled:l,rows:d,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function bce({selectedDeal:e,onStatusUpdate:s,onClose:a}){const[n,r]=g.useState(e?.stage||""),[i,l]=g.useState(!1),c=it(),{user:d}=zt();g.useEffect(()=>{console.log("AdminDealsInformation mounted sahdksd",e),console.log("User sadad:",d)},[e,d]);const m=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"}];g.useEffect(()=>{e?.stage&&r(e.stage)},[e]);const f=async()=>{if(!e||!e.id){q.error("No deal selected");return}if(!n||n===e.stage){q.info("Please select a different stage");return}const h=e.id;l(!0);try{await se.put(`/deals/admin/${h}`,{stage:n}),a&&a(),s&&setTimeout(async()=>{await s(!0)},100),setTimeout(()=>{q.success("Deal status updated successfully")},300)}catch(y){console.error(y);const N=y.response?.data?.detail||"Failed to update deal status";q.error(N)}finally{l(!1)}};return e?t.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),t.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[t.jsxs("button",{onClick:()=>c("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Deal"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),t.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const h=encodeURIComponent(e.contact.email),y=encodeURIComponent(""),N=encodeURIComponent(""),w=`https://mail.google.com/mail/?view=cm&fs=1&to=${h}&su=${y}&body=${N}`;window.open(w,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(js,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),t.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>c("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Deal"}}}),children:[t.jsx(dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),t.jsxs("button",{onClick:()=>c("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Deal"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ts,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),t.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:n,onChange:h=>r(h.target.value),disabled:i||e.created_by!==d?.id&&e.assigned_to!==d?.id,children:m.map(h=>t.jsx("option",{value:h.value,children:h.label},h.value))}),(e.created_by===d?.id||e.assigned_to===d?.id)&&t.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:f,disabled:i||!n||n===e.stage,children:i?"Updating...":"Update"})]})]}):null}const Im=10,jw=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],Cw={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:""},ur=e=>{if(!e)return"Draft";const s=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[s]||"Draft"},Sw=e=>e?e.toString().toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()):"--",vce=e=>{switch(ur(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},Nce=e=>{switch(ur(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},kx=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",$m=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",wce=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const s=new Date(e);if(isNaN(s.getTime()))return"";const a=s.getFullYear(),n=String(s.getMonth()+1).padStart(2,"0"),r=String(s.getDate()).padStart(2,"0");return`${a}-${n}-${r}`}catch{return""}},_w=(e,s)=>{if(!e||s==null||s==="")return"";const a=Number(s);if(Number.isNaN(a))return"";const n=new Date(e);return isNaN(n.getTime())?"":(n.setDate(n.getDate()+a),n.toISOString().slice(0,10))},t0=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},jce=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const n of e){const r=localStorage.getItem(n);if(r)try{const i=JSON.parse(r),l=t0(i);if(l)return l}catch{}}const s=localStorage.getItem("user_id"),a=t0(s);return a||null},Cce=e=>{if(!e)return"";const a=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(n=>n!=null&&String(n).trim()!=="");return a?String(a):""},Sce=e=>{if(!e)return"";const a=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(n=>n!=null&&String(n).trim()!=="");return a?String(a):""};function _ce(){const e=it();g.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[s,a]=g.useState([]),[n,r]=g.useState(!1),[i,l]=g.useState([]),[c,d]=g.useState([]),[m,f]=g.useState([]),[h,y]=g.useState([]),[N,w]=g.useState(null),[p,v]=g.useState(null),[C,j]=g.useState(!1),[_,T]=g.useState(!1),[k,E]=g.useState(!1),[A,U]=g.useState(null),[B,X]=g.useState(!1),[$,O]=g.useState(null),[G,K]=g.useState(Cw),[ae,R]=g.useState(""),[Z,te]=g.useState("Filter by Status"),[ge,le]=g.useState(null),[W,ee]=g.useState(1),[J,he]=g.useState("Overview"),[be,Le]=g.useState("Draft"),[Me,ke]=g.useState(null);g.useEffect(()=>{async function H(){try{const de=await se.get("/auth/me");ke(de.data)}catch(de){console.error(de)}}H()},[]),g.useEffect(()=>{let H=!0;return(async()=>{const _e=jce();if(_e&&H){w(_e);return}try{const Ae=await se.get("/auth/me"),He=t0(Ae?.data);if(He&&H){w(He);return}}catch{}try{const Ae=await se.get("/users/me"),He=t0(Ae?.data);if(He&&H){w(He);return}}catch{}H&&w(null)})(),()=>{H=!1}},[]);const F=g.useCallback(H=>H&&c.find(_e=>String(_e.id)===String(H))?.name||"",[c]),ve=g.useCallback(H=>{if(!H)return"";const de=m.find(_e=>String(_e.id)===String(H));return de?`${de.first_name} ${de.last_name}`.trim():""},[m]),Ce=g.useCallback(H=>{if(!H)return"--";const de=i.find(_e=>String(_e.id)===String(H));return de?.deal_name||de?.name||`Deal #${H}`},[i]),D=g.useCallback(H=>{const de=i.find(He=>String(He.id)===String(H)),_e=Cce(de);let Ae=Sce(de);if(!Ae&&_e){const He=m.filter(st=>String(st.account_id||"")===String(_e));if(He.length>0){const st=[...He].sort((bt,ss)=>{const cs=`${bt.first_name||""} ${bt.last_name||""}`.trim().toLowerCase(),wr=`${ss.first_name||""} ${ss.last_name||""}`.trim().toLowerCase();return cs.localeCompare(wr)});Ae=String(st[0].id)}}if(_e&&Ae){const He=m.find(st=>String(st.id)===String(Ae));He?.account_id&&String(He.account_id)!==String(_e)&&(Ae="")}return{accountId:_e||"",contactId:Ae||""}},[i,m]),re=g.useCallback(H=>{if(!H)return"--";if(H.deal?.deal_name)return H.deal.deal_name;if(H.deal?.name)return H.deal.name;const de=H.deal_id||H.deal?.id;return de?Ce(de):"--"},[Ce]),oe=g.useCallback(H=>{if(!H)return"--";if(H.account?.name)return H.account.name;let de=H.account_id||H.account?.id;if(!de){const _e=H.deal_id||H.deal?.id;_e&&(de=D(_e).accountId)}return de?F(de)||`Account #${de}`:"--"},[D,F]),je=g.useCallback(H=>{if(!H)return"--";if(H.contact?.first_name||H.contact?.last_name)return`${H.contact?.first_name||""} ${H.contact?.last_name||""}`.trim()||"--";let de=H.contact_id||H.contact?.id;if(!de){const Ae=H.deal_id||H.deal?.id;Ae&&(de=D(Ae).contactId)}return(de?ve(de):"")||(de?`Contact #${de}`:"--")},[D,ve]),Re=g.useCallback(async(H=null)=>{r(!0);try{const de=await se.get("/quotes/admin/fetch-all"),Ae=[...Array.isArray(de.data)?de.data:[]].sort((He,st)=>{const bt=He?.created_at||He?.updated_at||0,ss=st?.created_at||st?.updated_at||0;return new Date(ss)-new Date(bt)});if(a(Ae),H){const He=Ae.find(st=>st.id===H);v(He||null)}}catch(de){console.error(de),a([]),de.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch quotes. Please try again later.")}finally{r(!1)}},[]),Ke=g.useCallback(async()=>{try{const H=await se.get("/deals/admin/fetch-all");l(Array.isArray(H.data)?H.data:[])}catch(H){console.error(H),H.response?.status===403&&q.warn("Unable to load deals (permission denied).")}},[]),et=g.useCallback(async()=>{try{const H=await se.get("/accounts/admin/fetch-all");d(Array.isArray(H.data)?H.data:[])}catch(H){console.error(H),H.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},[]),qe=g.useCallback(async()=>{try{const H=await se.get("/contacts/admin/fetch-all");f(Array.isArray(H.data)?H.data:[])}catch(H){console.error(H),H.response?.status===403&&q.warn("Unable to load contacts (permission denied).")}},[]),Ze=g.useCallback(async()=>{try{const H=await se.get("/users/all");y(Array.isArray(H.data)?H.data:[])}catch(H){console.error(H),H.response?.status===403&&q.warn("Unable to load users (permission denied).")}},[]);g.useEffect(()=>{Re(),Ke(),et(),qe(),Ze()},[Re,Ke,et,qe,Ze]);const we=g.useMemo(()=>{const H=ae.trim().toLowerCase(),de=Z.trim();return s.filter(_e=>{const Ae=re(_e),He=oe(_e),st=je(_e),bt=_w(_e.presented_date,_e.validity_days),ss=[_e.quote_id,Ae,He,st,_e.total_amount?.toString(),_e.validity_days?.toString(),_e.presented_date?$m(_e.presented_date):"",bt?$m(bt):"",_e.assigned_user?.first_name,_e.assigned_user?.last_name,_e.creator?.first_name,_e.creator?.last_name,_e.status,_e.notes,kx(_e.created_at),kx(_e.updated_at)],cs=H===""||ss.some(ba=>ba==null?!1:ba.toString().toLowerCase().includes(H)),wr=de==="Filter by Status"||ur(_e.status)===de;return cs&&wr})},[s,ae,Z,re,oe,je]),V=Math.max(1,Math.ceil(we.length/Im)||1);g.useEffect(()=>ee(1),[ae,Z]),g.useEffect(()=>{ee(H=>{const de=Math.max(1,Math.ceil(we.length/Im)||1);return H>de?de:H})},[we.length]);const pe=g.useMemo(()=>{const H=(W-1)*Im;return we.slice(H,H+Im)},[we,W]),z=()=>ee(H=>Math.max(H-1,1)),ie=()=>ee(H=>Math.min(H+1,V)),ue=H=>{v(H),he("Overview"),Le(ur(H?.status)||"Draft")},M=()=>{v(null),he("Overview")},xe=H=>{H.target.id==="quoteModalBackdrop"&&!B&&M()},ne=g.useCallback(()=>{j(!1),T(!1),O(null),K(Cw),E(!1)},[]),Te=H=>{H.target.id==="modalBackdrop"&&!k&&!B&&ne()},Q=H=>{const{name:de,value:_e}=H.target;if(de==="deal_id"){const{accountId:Ae,contactId:He}=D(_e);K(st=>({...st,deal_id:_e,account_id:Ae,contact_id:He}));return}K(Ae=>({...Ae,[de]:_e}))},ye=()=>{K(Cw),T(!1),O(null),j(!0)},P=H=>{if(!H)return;v(null);const de=H.deal?.id?String(H.deal.id):H.deal_id?String(H.deal_id):"",_e=de?D(de):{accountId:"",contactId:""},Ae=H.account?.id?String(H.account.id):H.account_id?String(H.account_id):_e.accountId,He=H.contact?.id?String(H.contact.id):H.contact_id?String(H.contact_id):_e.contactId,st=H.assigned_user?.id?String(H.assigned_user.id):H.assigned_to?String(H.assigned_to):"";K({deal_id:de,account_id:Ae||"",contact_id:He||"",total_amount:H.total_amount?.toString()||"",presented_date:wce(H.presented_date),validity_days:H.validity_days!==null&&H.validity_days!==void 0?String(H.validity_days):"",status:ur(H.status)||"Draft",assigned_to:st,notes:H.notes||""}),T(!0),O(H.id),j(!0)},fe=H=>{if(!H)return;const de=H.quote_id||"this quote";U({title:"Delete Quote",message:t.jsxs("span",{children:["Are you sure you want to permanently delete"," ",t.jsx("span",{className:"font-semibold",children:de}),"? This action cannot be undone."]}),confirmLabel:"Delete Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:H.id,name:de}})},me=H=>{if(H.preventDefault(),!N){q.error("Unable to determine current user. Please log in again.");return}if(!G.deal_id){q.error("Deal is required.");return}if(!G.total_amount||Number(G.total_amount)<=0){q.error("Total amount must be greater than 0.");return}if(G.validity_days!==""&&Number(G.validity_days)<0){q.error("Validity days must be 0 or higher.");return}const de=D(G.deal_id),_e={deal_id:Number(G.deal_id),account_id:de.accountId?Number(de.accountId):null,contact_id:de.contactId?Number(de.contactId):null,total_amount:Number(G.total_amount),presented_date:G.presented_date||null,validity_days:G.validity_days===""?null:Number(G.validity_days),status:G.status||"Draft",assigned_to:G.assigned_to?Number(G.assigned_to):null,notes:G.notes?.trim()||null},Ae=_&&$?"update":"create",He=Ce(G.deal_id),st=Ae==="create"?{..._e,created_by_id:Number(N)}:_e;U({title:Ae==="create"?"Confirm New Quote":"Confirm Update",message:Ae==="create"?t.jsxs("span",{children:["Are you sure you want to create a quote for"," ",t.jsx("span",{className:"font-semibold",children:He}),"?"]}):t.jsxs("span",{children:["Save changes to"," ",t.jsx("span",{className:"font-semibold",children:He}),"?"]}),confirmLabel:Ae==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:Ae,payload:st,targetId:$||null,name:He}})},Se=async()=>{if(!A?.action){U(null);return}const{action:H}=A,{type:de,payload:_e,targetId:Ae,name:He}=H;X(!0);try{if(de==="create")E(!0),await se.post("/quotes/admin",_e),q.success("Quote created successfully."),ne(),await Re();else if(de==="update"){if(!Ae)throw new Error("Missing quote identifier for update.");E(!0),await se.put(`/quotes/admin/${Ae}`,_e),q.success("Quote updated successfully."),ne(),await Re(),p?.id===Ae&&v(null)}else if(de==="delete"){if(!Ae)throw new Error("Missing quote identifier for deletion.");const st=p?.id;le(Ae),await se.delete(`/quotes/admin/${Ae}`),q.success(`Quote "${He}" deleted successfully.`),await Re(st&&st!==Ae?st:null),st===Ae&&v(null)}}catch(st){console.error(st);const bt=de==="create"?"Failed to create quote. Please review the details and try again.":de==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";q.error(bt),(de==="create"||de==="update")&&E(!1),de==="delete"&&le(null)}finally{(de==="create"||de==="update")&&E(!1),de==="delete"&&le(null),X(!1),U(null)}},$e=()=>{B||U(null)},We=g.useCallback((H,de)=>{const _e=H?.deal_id??H?.deal?.id??"",Ae=_e?Number(_e):null,He=Ae?D(String(Ae)):{accountId:"",contactId:""},st=H?.account_id??H?.account?.id??He.accountId??null,bt=H?.contact_id??H?.contact?.id??He.contactId??null,ss=H?.total_amount??0,cs=H?.assigned_to??H?.assigned_user?.id??null;return{deal_id:Ae,account_id:st!=null&&String(st).trim()!==""?Number(st):null,contact_id:bt!=null&&String(bt).trim()!==""?Number(bt):null,total_amount:Number(ss),presented_date:H?.presented_date||null,validity_days:H?.validity_days===""||H?.validity_days===void 0||H?.validity_days===null?null:Number(H.validity_days),status:de,assigned_to:cs!=null&&String(cs).trim()!==""?Number(cs):null,notes:H?.notes?.trim()||null}},[D]),rt=g.useCallback(async()=>{if(!p?.id)return;const H=ur(be),de=[H,H.toLowerCase()],_e=async Ae=>se.patch(`/quotes/admin/${p.id}/status`,{status:Ae},{headers:{"Content-Type":"application/json"}});try{let Ae=!1;for(const He of de)try{await _e(He),Ae=!0;break}catch(st){if(st?.response?.status===422)continue;throw st}if(!Ae){const He=We(p,H);if(!He.deal_id){q.error("Cannot update status: missing deal_id on selected quote.");return}if(!He.total_amount||He.total_amount<=0){q.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await se.put(`/quotes/admin/${p.id}`,He)}q.success(`Quote status updated to ${H}`),v(null),he("Overview"),await Re()}catch(Ae){console.error(Ae);const He=Ae?.response?.data?.message||(Ae?.response?.data?.errors?Object.values(Ae.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";q.error(He)}},[p,be,Re,We]),wt=[{label:"Filter by Status",value:"Filter by Status"},...jw.map(H=>({label:H.label,value:H.value}))],Ut=A?.action?.type==="delete"?A.action.targetId:null,ze=p&&(ge===p.id||Ut===p.id),Pe=p&&ge===p.id,lt=p?t.jsx("div",{id:"quoteModalBackdrop",onClick:xe,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:H=>H.stopPropagation(),children:[t.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:t.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[t.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),t.jsx("button",{onClick:M,className:"text-gray-500 hover:text-white transition cursor-pointer",children:t.jsx(es,{size:25})})]})}),t.jsxs("div",{className:"p-6 lg:p-4",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[t.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:re(p)}),t.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${Nce(p.status)}`,children:Sw(p.status)})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>P(p),disabled:B||A?.action?.type==="update"&&A.action.targetId===p.id,children:[t.jsx(ys,{className:"mr-2"}),"Edit"]}),t.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>fe(p),disabled:!!ze,children:Pe?"Deleting...":t.jsxs(t.Fragment,{children:[t.jsx(Nt,{className:"mr-2"}),"Delete"]})})]})]}),t.jsx("div",{className:"border-b border-gray-200 my-5"}),t.jsxs("div",{className:"p-1 lg:p-4",children:[t.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(H=>t.jsx("button",{onClick:()=>he(H),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${J===H?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:H},H))}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[t.jsxs("div",{className:"lg:col-span-3",children:[J==="Overview"&&t.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Quote ID:"}),t.jsx("p",{children:p.quote_id||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Deal:"}),t.jsx("p",{children:re(p)||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Account:"}),t.jsx("p",{children:oe(p)||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Contact:"}),t.jsx("p",{children:je(p)||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Total Amount:"}),t.jsx("p",{children:p.total_amount?`${Number(p.total_amount).toLocaleString()}`:"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Presented Date:"}),t.jsx("p",{children:$m(p.presented_date)||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Validity Days:"}),t.jsx("p",{children:p.validity_days!==null&&p.validity_days!==void 0?p.validity_days:"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),t.jsx("p",{children:$m(_w(p.presented_date,p.validity_days))||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Status:"}),t.jsx("p",{children:Sw(p.status)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Assigned To:"}),t.jsx("p",{children:p.assigned_user?`${p.assigned_user.first_name} ${p.assigned_user.last_name}`:"Unassigned"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Created By:"}),t.jsx("p",{children:p.creator?`${p.creator.first_name} ${p.creator.last_name}`:"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Created At:"}),t.jsx("p",{children:kx(p.created_at)||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Last Updated:"}),t.jsx("p",{children:kx(p.updated_at)||"N/A"})]})]})}),J==="Notes"&&t.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[t.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),t.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:p.notes||"No notes available."})]})]}),t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),t.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[t.jsxs("button",{onClick:()=>e("/sales/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),t.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/sales/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Quotes"}}}),children:[t.jsx(dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),t.jsxs("button",{onClick:()=>e("/sales/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ts,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),t.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:be||ur(p.status)||"Draft",onChange:H=>Le(H.target.value),children:jw.map(H=>t.jsx("option",{value:H.value,children:H.label},H.value))}),t.jsx("button",{onClick:rt,disabled:ur(be)===ur(p.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${ur(be)===ur(p.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,ot=t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[n&&t.jsx(xt,{message:"Loading quotes..."}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[t.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[t.jsx(en,{className:"mr-2 text-blue-600"})," Quotes"]}),t.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:t.jsxs("button",{onClick:ye,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[t.jsx(Lt,{className:"mr-2"})," Add Quote"]})})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[t.jsx(yt,{size:20,className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search quotes",value:ae,onChange:H=>R(H.target.value),className:"focus:outline-none text-base w-full"})]}),t.jsx("div",{className:"w-full lg:w-1/4",children:t.jsx("select",{value:Z,onChange:H=>te(H.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:wt.map(H=>t.jsx("option",{value:H.value,children:H.label},H.value))})})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[t.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),t.jsx("th",{className:"py-3 px-4",children:"Deal"}),t.jsx("th",{className:"py-3 px-4",children:"Account"}),t.jsx("th",{className:"py-3 px-4",children:"Contact"}),t.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),t.jsx("th",{className:"py-3 px-4",children:"Status"}),t.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),t.jsx("th",{className:"py-3 px-4",children:"Expiry Date"})]})}),t.jsx("tbody",{children:n?t.jsx("tr",{children:t.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"Loading quotes..."})}):we.length>0?pe.map(H=>{const de=_w(H.presented_date,H.validity_days);return t.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>ue(H),children:[t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:H.quote_id||"--"})}),t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsx("div",{className:"break-words",children:re(H)||"--"})}),t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsx("div",{className:"text-sm text-gray-700 break-words",children:oe(H)||"--"})}),t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsx("div",{className:"break-words",children:je(H)||"--"})}),t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsx("div",{className:"text-gray-700",children:H.total_amount?`${Number(H.total_amount).toLocaleString()}`:"--"})}),t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${vce(H.status)}`,children:Sw(H.status)})}),t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsx("div",{children:H.assigned_user?`${H.assigned_user.first_name} ${H.assigned_user.last_name}`:"Unassigned"})}),t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsx("div",{className:"text-gray-500 text-xs",children:$m(de)||"--"})})]},H.id)}):t.jsx("tr",{children:t.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No quotes found."})})})]})}),t.jsx(Ct,{className:"mt-4",totalItems:we.length,pageSize:Im,currentPage:W,onPrev:z,onNext:ie,label:"quotes"})]}),I=C?t.jsx("div",{id:"modalBackdrop",onClick:Te,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:H=>H.stopPropagation(),children:[t.jsx("button",{onClick:ne,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:k||B,children:t.jsx(jt,{size:22})}),t.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:_?"Edit Quote":"Add New Quote"}),t.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:me,children:[t.jsx(Ew,{label:"Deal",name:"deal_id",value:G.deal_id,onChange:Q,options:[{value:"",label:"Select deal"},...i.map(H=>({value:String(H.id),label:H.deal_name||H.name||`Deal #${H.id}`}))],required:!0,disabled:k||i.length===0,className:"md:col-span-2"}),t.jsx(Bk,{label:"Account",value:F(G.account_id)||(G.account_id?`Account #${G.account_id}`:""),disabled:!0}),t.jsx(Bk,{label:"Contact",value:ve(G.contact_id)||(G.contact_id?`Contact #${G.contact_id}`:""),disabled:!0}),t.jsx(Tw,{label:"Total Amount",name:"total_amount",type:"number",value:G.total_amount,onChange:Q,placeholder:"0.00",required:!0,disabled:k}),t.jsx(Tw,{label:"Presented Date",name:"presented_date",type:"date",value:G.presented_date,onChange:Q,disabled:k}),t.jsx(Tw,{label:"Validity Days",name:"validity_days",type:"number",value:G.validity_days,onChange:Q,placeholder:"30",disabled:k}),t.jsx(Ew,{label:"Assigned To",name:"assigned_to",value:G.assigned_to,onChange:Q,options:Me?.role==="Sales"?[{value:String(Me.id),label:`${Me.first_name} ${Me.last_name} (Sales)`}]:[{value:"",label:"Select assignee"}],disabled:k||Me?.role==="Sales"}),t.jsx(Ew,{label:"Status",name:"status",value:G.status,onChange:Q,options:jw,required:!0,disabled:k,className:"md:col-span-2"}),t.jsx(Tce,{label:"Notes",name:"notes",value:G.notes,onChange:Q,placeholder:"Additional details...",rows:3,disabled:k,className:"md:col-span-2"}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[t.jsx("button",{type:"button",onClick:ne,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:k||B,children:"Cancel"}),t.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:k||B,children:k?"Saving...":_?"Update Quote":"Save Quote"})]})]})]})}):null,Ne=A?t.jsx(Ece,{open:!0,title:A.title,message:A.message,confirmLabel:A.confirmLabel,cancelLabel:A.cancelLabel,variant:A.variant,onConfirm:Se,onCancel:$e,loading:B}):null;return t.jsxs(t.Fragment,{children:[p?lt:ot,I,Ne]})}function Tw({label:e,name:s,value:a,onChange:n,placeholder:r,type:i="text",required:l=!1,disabled:c=!1,className:d=""}){return t.jsxs("div",{className:d,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("input",{type:i,name:s,value:a??"",onChange:n,placeholder:r,required:l,disabled:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]})}function Bk({label:e,value:s,className:a="",disabled:n=!0}){return t.jsxs("div",{className:a,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("input",{type:"text",value:s??"",disabled:n,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function Ew({label:e,name:s,value:a,onChange:n,options:r,required:i=!1,disabled:l=!1,className:c=""}){const d=a!=null?String(a):"",f=r.some(h=>String(h.value)===d)?d:"";return t.jsxs("div",{className:c,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("select",{name:s,value:f,onChange:n,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(h=>t.jsx("option",{value:String(h.value??""),children:h.label},h.value??h.label))})]})}function Tce({label:e,name:s,value:a,onChange:n,placeholder:r,rows:i=3,disabled:l=!1,className:c=""}){return t.jsxs("div",{className:c,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("textarea",{name:s,value:a??"",onChange:n,placeholder:r,rows:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function Ece({open:e,title:s,message:a,confirmLabel:n,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:c,onCancel:d}){if(!e)return null;const m=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s}),t.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),t.jsx("button",{type:"button",onClick:c,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${m}`,disabled:l,children:l?"Processing...":n})]})]})})}const Dx=10,Hk={user_id:"",start_date:"",end_date:"",target_amount:""};function Ace({name:e,items:s=[],value:a="",onChange:n,getLabel:r,placeholder:i="Search...",disabled:l=!1}){const[c,d]=g.useState(!1),[m,f]=g.useState(""),h=g.useRef(null),y=s.find(p=>String(p.id)===String(a)),N=y?r(y):"",w=g.useMemo(()=>{const p=m.toLowerCase();return p?s.filter(v=>r(v).toLowerCase().includes(p)):s},[s,m,r]);return g.useEffect(()=>{const p=v=>{h.current&&!h.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]),t.jsxs("div",{ref:h,className:"flex justify-center w-full relative",children:[t.jsx("input",{value:N,placeholder:i,readOnly:!0,className:`w-full max-w-md border rounded-lg p-1 ${l?"bg-gray-100 cursor-not-allowed text-gray-500":"focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"}`,onClick:()=>{l||d(!c)}}),!l&&c&&t.jsx("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:w.length?w.map(p=>t.jsx("button",{type:"button",onClick:()=>{n({target:{name:e,value:String(p.id)}}),d(!1),f("")},className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-50",children:r(p)},p.id)):t.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results found"})})]})}function Lce(){g.useEffect(()=>{document.title="Targets | Sari-Sari CRM"},[]);const[e,s]=g.useState([]),[a,n]=g.useState([]),[r,i]=g.useState(!1),[l,c]=g.useState(""),[d,m]=g.useState(1),[f,h]=g.useState(!1),[y,N]=g.useState(!1),[w,p]=g.useState(!1),[v,C]=g.useState(null),[j,_]=g.useState(Hk),[T,k]=g.useState(null),[E,A]=g.useState(null),[U,B]=g.useState(!1),[X,$]=g.useState(null);g.useEffect(()=>{async function J(){try{const he=await se.get("/auth/me");$(he.data)}catch(he){console.error(he)}}J()},[]),g.useEffect(()=>{X?.role?.toLowerCase()==="sales"&&!j.user_id&&_(J=>({...J,user_id:String(X.id)}))},[X,j.user_id]);const O=g.useCallback(async()=>{i(!0);try{const J=await se.get("/targets/admin/fetch-all");s(J.data)}catch(J){console.error(J),q.error("Failed to load targets.")}finally{i(!1)}},[]),G=g.useCallback(async()=>{try{const J=await se.get("/targets/admin/get-users");console.log("Users from API:",J.data),n(J.data)}catch(J){console.error(J),q.error("Failed to load users.")}},[]);g.useEffect(()=>{O(),G()},[O,G]);const K=g.useMemo(()=>e.reduce((J,he)=>J+(Number(he.target_amount)||0),0),[e]),ae=g.useMemo(()=>{const J=l.toLowerCase();return e.filter(he=>(he.user?`${he.user.first_name} ${he.user.last_name}`.toLowerCase():"").includes(J)||he.start_date?.includes(J)||he.end_date?.includes(J))},[e,l]),R=Math.max(1,Math.ceil(ae.length/Dx)),Z=g.useMemo(()=>{const J=(d-1)*Dx;return ae.slice(J,J+Dx)},[ae,d]),te=J=>{const{name:he,value:be}=J.target;_(Le=>({...Le,[he]:be}))},ge=()=>{let J={...Hk};X?.role?.toLowerCase()==="sales"&&(J.user_id=String(X.id)),_(J),N(!1),C(null),h(!0)},le=J=>{_({user_id:J.user?.id?String(J.user.id):"",start_date:J.start_date||"",end_date:J.end_date||"",target_amount:J.target_amount?.toString()||""}),N(!0),C(J.id),h(!0),k(null)},W=J=>{const he=J.user?`${J.user.first_name} ${J.user.last_name}`:"Unknown";A({title:"Delete Target",message:t.jsxs("span",{children:["Are you sure you want to delete the target for"," ",t.jsx("span",{className:"font-semibold",children:he}),"?"]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:async()=>{await se.delete(`/targets/admin/${J.id}`),q.success("Target deleted successfully."),O(),k(null)}})},ee=J=>{if(J.preventDefault(),!j.user_id||!j.start_date||!j.end_date||!j.target_amount){q.error("All fields are required.");return}if(new Date(j.end_date)<new Date(j.start_date)){q.error("End date must be after start date.");return}const he={user_id:Number(j.user_id),target_amount:Number(j.target_amount),start_date:j.start_date,end_date:j.end_date},be=y?"Update Target":"Create Target";A({title:be,message:"Are you sure you want to proceed?",confirmLabel:be,cancelLabel:"Cancel",variant:"primary",action:async()=>{p(!0);try{y?(await se.put(`/targets/admin/${v}`,he),q.success("Target updated successfully.")):(await se.post("/targets/admin/create",he),q.success("Target created successfully.")),h(!1),O()}catch(Le){console.error(Le),q.error("Operation failed.")}finally{p(!1)}}})};return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&t.jsx(xt,{message:"Loading targets..."}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[t.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold",children:[t.jsx(sn,{className:"mr-2 text-blue-600"})," Targets"]}),t.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:t.jsxs("button",{onClick:ge,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[t.jsx(Lt,{className:"mr-2"})," Add Target"]})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-6",children:[t.jsx(Gk,{title:"Total Targets",value:e.length}),t.jsx(Gk,{title:"Total Target Amount",value:`${K.toLocaleString()}`})]}),t.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-4/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[t.jsx(yt,{className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search targets",value:l,onChange:J=>c(J.target.value),className:"w-full outline-none"})]})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[t.jsx("thead",{className:"bg-gray-100 font-semibold text-gray-600",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4 text-left",children:"User"}),t.jsx("th",{className:"py-3 px-4 text-left",children:"Target Amount"}),t.jsx("th",{className:"py-3 px-4 text-left",children:"Start Date"}),t.jsx("th",{className:"py-3 px-4 text-left",children:"End Date"})]})}),t.jsx("tbody",{children:Z.map(J=>t.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>k(J),children:[t.jsx("td",{className:"py-3 px-4 text-left",children:J.user?`${J.user.first_name} ${J.user.last_name}`:"Unknown"}),t.jsxs("td",{className:"py-3 px-4 text-left",children:["",Number(J.target_amount).toLocaleString()]}),t.jsx("td",{className:"py-3 px-4 text-left",children:J.start_date}),t.jsx("td",{className:"py-3 px-4 text-left",children:J.end_date})]},J.id))})]})}),t.jsx(Ct,{className:"mt-4",totalItems:ae.length,pageSize:Dx,currentPage:d,onPrev:()=>m(J=>Math.max(J-1,1)),onNext:()=>m(J=>Math.min(J+1,R)),label:"targets"})]}),T&&t.jsx(kce,{target:T,onClose:()=>k(null),onEdit:()=>le(T),onDelete:()=>W(T)}),f&&t.jsx(Dce,{formData:j,users:a,currentUser:X,isEditing:y,isSubmitting:w,onChange:te,onClose:()=>h(!1),onSubmit:ee}),E&&t.jsx(Mce,{...E,loading:U,onConfirm:async()=>{B(!0),await E.action(),B(!1),A(null)},onCancel:()=>A(null)})]})}function Gk({title:e,value:s}){return t.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200",children:[t.jsx("div",{className:"p-3 rounded-full bg-blue-100 text-blue-600 mr-4",children:t.jsx(vr,{size:22})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500 uppercase",children:e}),t.jsx("p",{className:"text-2xl font-bold",children:s})]})]})}function kce({target:e,onClose:s,onEdit:a,onDelete:n}){return t.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",onClick:s,children:t.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:r=>r.stopPropagation(),children:[t.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-4 rounded-t-xl",children:[t.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Target"}),t.jsx("button",{onClick:s,className:"text-gray-500 hover:text-white transition cursor-pointer",children:t.jsx(es,{size:25})})]}),t.jsx("div",{className:"p-6 lg:p-4",children:t.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[t.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:t.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:e.user&&`${e.user.first_name} ${e.user.last_name}`})}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[t.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 cursor-pointer",onClick:a,children:[t.jsx(ys,{className:"mr-2"}),"Edit"]}),t.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400 cursor-pointer",onClick:n,children:[t.jsx(Nt,{className:"mr-2"}),"Delete"]})]})]})}),t.jsx("div",{className:"border-b border-gray-200 my-5"}),t.jsxs("div",{className:"p-4 lg:p-6",children:[t.jsx("div",{className:"flex w-full bg-[#6A727D] text-white overflow-x-auto",children:t.jsx("button",{className:"flex-1 min-w-[90px] px-4 py-2 lg:text-lg text-sm font-medium text-center text-white",children:"Overview"})}),t.jsx("div",{className:"bg-white rounded-xl shadow-sm sm:p-6 lg:p-5 border border-gray-200 text-sm text-gray-700",children:t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-2 gap-4 sm:gap-6",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"User:"}),t.jsx("p",{children:e.user?`${e.user.first_name} ${e.user.last_name}`:"Unknown"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Target Amount:"}),t.jsxs("p",{children:["",Number(e.target_amount).toLocaleString()]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Start Date:"}),t.jsx("p",{children:e.start_date})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"End Date:"}),t.jsx("p",{children:e.end_date})]})]})})]})]})})}function Dce({formData:e,users:s,currentUser:a,isEditing:n,isSubmitting:r,onChange:i,onClose:l,onSubmit:c}){return t.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl p-8 relative min-h-[50vh]",children:[t.jsx("button",{onClick:l,className:"absolute top-5 right-5",children:t.jsx(jt,{size:24})}),t.jsx("h2",{className:"text-2xl font-semibold text-center mb-8",children:n?"Edit Target":"Add New Target"}),t.jsxs("form",{onSubmit:c,className:"grid gap-5 text-base",children:[t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Assign User"}),t.jsx(Ace,{name:"user_id",items:s.filter(d=>d.id===a.id||d.role?.toLowerCase()==="sales"),value:e.user_id,onChange:i,getLabel:d=>`${d.first_name} ${d.last_name}`,placeholder:"Search user...",disabled:a?.role?.toLowerCase()==="sales"})]}),t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:"Target Amount"}),t.jsx("div",{className:"flex justify-center w-full",children:t.jsx("input",{type:"number",name:"target_amount",placeholder:"0.00",value:e.target_amount,onChange:i,required:!0,className:"w-full max-w-md border text-gray-500 border-gray-300 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"})})]}),t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:"Start Date"}),t.jsx("div",{className:"flex justify-center w-full",children:t.jsx("input",{type:"date",name:"start_date",value:e.start_date,onChange:i,required:!0,className:"w-full max-w-md border text-gray-500 border-gray-300 text-gray-500 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"})})]}),t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:"End Date"}),t.jsx("div",{className:"flex justify-center w-full",children:t.jsx("input",{type:"date",name:"end_date",value:e.end_date,onChange:i,required:!0,className:"w-full max-w-md border text-gray-500 border-gray-300 text-gray-500 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"})})]}),t.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[t.jsx("button",{type:"button",onClick:l,className:"bg-red-400 text-white px-5 py-2 rounded-lg",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:r,className:"bg-tertiary text-white px-5 py-2 rounded-lg",children:r?"Saving...":"Save Target"})]})]})]})})}function Mce({title:e,message:s,confirmLabel:a,cancelLabel:n,variant:r,loading:i,onConfirm:l,onCancel:c}){return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:e}),t.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:s}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsx("button",{onClick:c,disabled:i,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:n}),t.jsx("button",{onClick:l,disabled:i,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${r==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary"}`,children:i?"Processing...":a})]})]})})}const jo=10;function Pce(){g.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,s]=g.useState(null),[a,n]=g.useState(""),[r,i]=g.useState("Filter by Actions"),[l,c]=g.useState(1),d=async()=>{try{const v=await se.get("/logs/read-all");s(v.data)}catch(v){console.error("Error fetching audit logs:",v)}};g.useEffect(()=>{d()},[]);const m=g.useMemo(()=>{if(!Array.isArray(e))return[];const v=a.trim().toLowerCase(),C=r?.toUpperCase?.()||"ALL";return e.filter(_=>{const T=_.timestamp?new Date(_.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",k=`${_.entity_type||""} ${_.entity_name||_.entity_details?.name||_.entity_details?.title||_.entity_id||""}`,E=`${_.logger?.first_name||""} ${_.logger?.last_name||""}`,A=[T,E,_.action,_.entity_type,k,_.description],U=v===""||A.some(X=>X==null?!1:X.toString().toLowerCase().includes(v)),B=C==="FILTER BY ACTIONS"||(_.action||"").toUpperCase()===C;return U&&B}).sort((_,T)=>{const k=_.timestamp?new Date(_.timestamp).getTime():0;return(T.timestamp?new Date(T.timestamp).getTime():0)-k})},[e,a,r]),f=Math.max(1,Math.ceil(m.length/jo)||1);g.useEffect(()=>{c(1)},[a,r]),g.useEffect(()=>{c(v=>{const C=Math.max(1,Math.ceil(m.length/jo)||1);return v>C?C:v})},[m.length]);const h=g.useMemo(()=>{const v=(l-1)*jo;return m.slice(v,v+jo)},[m,l]);m.length===0||(l-1)*jo+1,Math.min(l*jo,m.length);const y=()=>c(v=>Math.max(v-1,1)),N=()=>c(v=>Math.min(v+1,f)),w=()=>{if(!m.length){$h.error("No logs to export!");return}const v=["Timestamp","User","Action","Resource","Details"],C=m.map(E=>[new Date(E.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${E.logger?.first_name||""} ${E.logger?.last_name||""}`.trim(),E.action,`${E.entity_type}: ${E.entity_id}`,E.description||""]),j=[v.join(","),...C.map(E=>E.map(A=>`"${String(A).replace(/"/g,'""')}"`).join(","))].join(`
`),_=new Blob([j],{type:"text/csv;charset=utf-8;"}),T=URL.createObjectURL(_),k=document.createElement("a");k.href=T,k.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(k),k.click(),document.body.removeChild(k),URL.revokeObjectURL(T)},p=v=>{switch((v||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&t.jsx(xt,{message:"Loading audit logs..."}),t.jsx(Ih,{toastOptions:{duration:1e3}}),t.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[t.jsx(dt,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),t.jsxs("p",{className:"text-sm text-blue-700",children:[t.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Ta,{className:"text-blue-600",size:20}),t.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),t.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:t.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:w,children:[t.jsx(Xr,{className:"mr-2"}),"Export Logs"]})})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[t.jsx(yt,{size:20,className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search audit logs",value:a,onChange:v=>n(v.target.value),className:"focus:outline-none text-base w-full"})]}),t.jsx("div",{className:"w-full lg:w-1/4",children:t.jsxs("select",{value:r,onChange:v=>i(v.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[t.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),t.jsx("option",{value:"CREATE",children:"CREATE"}),t.jsx("option",{value:"DELETE",children:"DELETE"}),t.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[t.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),t.jsx("th",{className:"py-3 px-4",children:"User"}),t.jsx("th",{className:"py-3 px-4",children:"Action"}),t.jsx("th",{className:"py-3 px-4",children:"Resource"}),t.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),t.jsx("tbody",{children:Array.isArray(m)&&m.length>0?h.map((v,C)=>t.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[t.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(v.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),t.jsx("td",{className:"py-3 px-4 text-gray-700",children:v.name}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${p(v.action)}`,children:v.action})}),t.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[v.entity_type,": ",v.entity_id]}),t.jsx("td",{className:"py-3 px-4 text-gray-700",children:v.description})]},C)):t.jsx("tr",{children:t.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),t.jsx(Ct,{className:"mt-4",totalItems:m.length,pageSize:jo,currentPage:l,onPrev:y,onNext:N,label:"logs"})]})}const Vk=["To Do","In Progress","Review","Completed"],Rm=10,Oce=e=>{if(!e)return"";const s=new Date(e);if(Number.isNaN(s.getTime()))return"";const a=s.getTimezoneOffset();return new Date(s.getTime()-a*60*1e3).toISOString().slice(0,16)},Wk=e=>{if(!e)return"";const s=new Date(e);return Number.isNaN(s.getTime())?"":s.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},Ice=e=>{const s=e.subject?.trim()??"",a=e.description?.trim()??"",n=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),e.status&&String(e.status).toUpperCase();let r=null,i=null,l=null,c=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2&&(c=Number(e.relatedTo2)));const d=e.assignedTo?Number(e.assignedTo):null,m=l||c||i||r,f=l?"Contact":c?"Deal":i?"Account":r?"Lead":null;return{title:s,description:a,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:d,notes:n,is_personal:!1,lead_id:r,account_id:i,contact_id:l,deal_id:c,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:m,related_type:f}},$ce=e=>{const s=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",a=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",n=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",l=()=>e.lead?.id||e.lead_id,c=()=>e.account?.id||e.account_id,d=()=>e.contact?.id||e.contact_id,m=()=>e.deal?.id||e.deal_id,f=()=>e.task_assign_to?.id||e.assigned_to,h=()=>e.lead?.title||e.lead_id,y=()=>e.account?.name||e.account_id,N=()=>i||e.contact_id,w=()=>e.deal?.name||e.deal_id;let p="Lead",v="",C="",j="",_="Lead",T="",k="",E="";const A=c(),U=y(),B=l(),X=h();if(A){p="Account",_="Account",T=U,v=String(A);const $=d(),O=m(),G=N(),K=w();$?(C="Contact",k="Contact",E=G,j=String($)):O&&(k="Deal",C="Deal",E=K,j=String(O))}else B?(_="Lead",T=X,p="Lead",v=String(B)):e.related_type==="Account"&&(p="Account",v=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:e.status||"Not started",dueDate:n,dateAssigned:r,assignedToId:f()||null,assignedToName:s,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:a,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:_,relatedTo1Text:T,relatedType2Text:k,relatedTo2Text:E,subject:e.title,relatedType1:p,relatedTo1:v,relatedType2:C,relatedTo2:j}};function Rce(){g.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:s}=zt(),[a,n]=g.useState("board"),[r,i]=g.useState(!1),[l,c]=g.useState(null),[d,m]=g.useState(!1),[f,h]=g.useState([]),[y,N]=g.useState(!0),[w,p]=g.useState(""),[v,C]=g.useState("Filter by Status"),[j,_]=g.useState("Filter by Priority"),[T,k]=g.useState([]),[E,A]=g.useState(1),[U,B]=g.useState(null),[X,$]=g.useState(!1),O=it(),G=Xt(),[K,ae]=g.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""});g.useEffect(()=>{const D=G.state?.openTaskModal,re=G.state?.initialTaskData;D&&(i(!0),re&&ae(oe=>({...oe,...re})),O(G.pathname,{replace:!0,state:{}}))},[G,O]);const R=async()=>{try{const D=await se.get("/users/all");k(Array.isArray(D.data)?D.data:[])}catch(D){console.error("Failed to fetch users:",D),q.error("Failed to fetch users.")}},Z=async()=>{try{N(!0);const D=await se.get("/tasks/all"),oe=(Array.isArray(D.data)?D.data:[]).map($ce);oe.sort((je,Re)=>{const Ke=je.createdAt?new Date(je.createdAt):0;return(Re.createdAt?new Date(Re.createdAt):0)-Ke}),console.log("Fetched Tasks:",oe),h(oe),a==="list"&&A(1)}catch(D){console.error("Failed to load tasks:",D),q.error("Failed to load tasks.")}finally{N(!1)}};g.useEffect(()=>{!s&&e&&(R(),Z())},[s,e]);const te=()=>{c(null),ae({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},ge=(D=null,re=!1)=>{c(D),m(re),D?ae({id:D.id,subject:D.title||"",description:D.description||"",priority:D.priority||"Normal",status:D.status||"Not started",dueDate:Oce(D.dueDate),assignedTo:D.assignedToId?String(D.assignedToId):"",notes:D.notes||"",relatedType1Text:D.relatedType1Text||"",relatedTo1Text:D.relatedTo1Text||"",relatedType2Text:D.relatedType2Text||"",relatedTo2Text:D.relatedTo2Text||"",relatedType1:D.relatedType1||"",relatedTo1:D.relatedTo1||"",relatedType2:D.relatedType2||"",relatedTo2:D.relatedTo2||""}):te(),i(!0)},le=()=>{i(!1),c(null),m(!1),te()},W=async D=>{const re=Ice(D);try{l&&!d?(await se.put(`/tasks/${l.id}`,re),q.success("Task updated successfully.")):(await se.post("/tasks/create",re),q.success("Task created successfully.")),i(!1),await Z()}catch(oe){console.error("Failed to save task:",oe);const je=oe.response?.data?.detail||"Failed to save task.";q.error(je)}},ee=D=>{D&&B({title:"Delete Task",message:t.jsxs(t.Fragment,{children:["Are you sure you want to delete ",t.jsx("span",{className:"font-semibold",children:D.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:D.id}})},J=async()=>{if(!U?.action){B(null);return}const{action:D}=U;$(!0);try{D.type==="delete"&&(await se.delete(`/tasks/${D.targetId}`),q.success("Task deleted successfully."),await Z())}catch(re){console.error("Task action failed:",re),q.error("Failed to delete task.")}finally{$(!1),B(null)}},he=()=>{X||B(null)},be=g.useMemo(()=>{const D=w.trim().toLowerCase();return[...f].sort((oe,je)=>{const Re=oe.createdAt?new Date(oe.createdAt):0;return(je.createdAt?new Date(je.createdAt):0)-Re}).filter(oe=>{const je=D===""||oe.title?.toLowerCase().includes(D)||oe.description?.toLowerCase().includes(D)||oe.assignedToName?.toLowerCase().includes(D)||oe.createdBy?.toLowerCase().includes(D),Re=v==="Filter by Status"||oe.status===v,Ke=j==="Filter by Priority"||oe.priority===j;return je&&Re&&Ke})},[f,w,v,j]);g.useEffect(()=>{A(1)},[w,v,j,a]),g.useEffect(()=>{if(a==="list"){const D=be.length===0?1:Math.ceil(be.length/Rm);E>D&&A(D)}},[be.length,E,a]);const Le=g.useMemo(()=>{if(a==="board")return be;const D=(E-1)*Rm;return be.slice(D,D+Rm)},[be,E,a]),Me=g.useMemo(()=>{const D=new Date;return[{title:"To Do",value:f.filter(re=>re.status==="Not started").length,icon:ya,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:f.filter(re=>re.status==="In progress").length,icon:Qn,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:f.filter(re=>re.status==="Completed").length,icon:As,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:f.filter(re=>re.dueDate&&new Date(re.dueDate)<D&&re.status!=="Completed").length,icon:oh,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:f.filter(re=>re.priority==="High").length,icon:qi,color:"text-orange-600",bgColor:"bg-orange-100"}]},[f]),ke=D=>D.dueDate&&new Date(D.dueDate)<new Date&&D.status!=="Completed",F=D=>{switch(D.status){case"To Do":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In Progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Review":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},ve=D=>{switch(D){case"To Do":return"bg-blue-100 text-blue-700";case"In Progress":return"bg-purple-100 text-purple-700";case"Review":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},Ce=D=>{switch(D){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(y||s)&&t.jsx(xt,{message:"Loading tasks..."}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[t.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[t.jsx(Qn,{className:"text-blue-600"})," Tasks Board"]}),t.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:t.jsxs("button",{type:"button",onClick:()=>ge(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[t.jsx(Lt,{})," Create Task"]})})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Me.map(D=>t.jsx(Uce,{...D},D.title))}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[t.jsx(yt,{size:20,className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search tasks",value:w,onChange:D=>p(D.target.value),className:"focus:outline-none text-base w-full"})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[t.jsxs("select",{value:v,onChange:D=>C(D.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[t.jsx("option",{children:"Filter by Status"}),Vk.map(D=>t.jsx("option",{children:D},D))]}),t.jsxs("select",{value:j,onChange:D=>_(D.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[t.jsx("option",{children:"Filter by Priority"}),t.jsx("option",{children:"High"}),t.jsx("option",{children:"Normal"}),t.jsx("option",{children:"Low"})]})]})]}),t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("button",{type:"button",onClick:()=>n("board"),className:`px-4 py-2 rounded-full text-sm ${a==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),t.jsx("button",{type:"button",onClick:()=>n("list"),className:`px-4 py-2 rounded-full text-sm ${a==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!y&&!s&&be.length===0&&t.jsx("p",{className:"text-center text-gray-500 mt-10 p-4 bg-white shadow rounded-lg",children:"No tasks found matching current filters."}),!y&&!s&&be.length>0&&a==="board"&&t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:Vk.map(D=>{const re=Le.filter(oe=>oe.status===D);return t.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative",children:[t.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),t.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[t.jsx("h3",{className:"font-medium text-gray-900",children:D}),t.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:re.length})]}),t.jsx("div",{className:`space-y-3 ${re.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:re.length>0?re.map(oe=>t.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${F(oe)}`,onClick:()=>ge(oe,!0),children:[t.jsxs("div",{className:"text-left flex-1",children:[t.jsx("p",{className:"font-medium text-gray-800 text-sm",children:oe.title}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",oe.priority]}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",oe.assignedToName]}),t.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",t.jsx("span",{className:ke(oe)?"text-red-600":"text-gray-600",children:oe.dateAssigned?Wk(oe.dateAssigned):""})]})]}),t.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[t.jsx("button",{type:"button",onClick:je=>{je.stopPropagation(),ge(oe)},className:"text-blue-500 hover:text-blue-700",children:t.jsx(hs,{})}),t.jsx("button",{type:"button",onClick:je=>{je.stopPropagation(),ee(oe)},className:"text-red-500 hover:text-red-700",children:t.jsx(Nt,{})})]})]},oe.id)):t.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No tasks"})})]},D)})}),!y&&!s&&be.length>0&&a==="list"&&t.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full text-sm",children:[t.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),t.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),t.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),t.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),t.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),t.jsx("th",{className:"py-3 px-4 font-medium",children:"Actions"})]})}),t.jsx("tbody",{children:Le.map(D=>t.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",onClick:()=>{console.log("Opening task in view mode:",D),ge(D,!0)},children:[t.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",children:D.title}),t.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${ve(D.status||"To Do")}`,children:D.status||"To Do"})}),t.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Ce(D.priority||"Low")}`,children:D.priority||"Low"})}),t.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:D.assignedToName||"Unassigned"}),t.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${ke(D)?"text-red-600 font-medium":""}`,children:D.dateAssigned?Wk(D.dateAssigned):""}),t.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center gap-3",onClick:re=>re.stopPropagation(),children:[t.jsxs("button",{type:"button",onClick:()=>ge(D),className:"text-blue-500 hover:text-blue-700 flex items-center gap-1",children:[t.jsx(hs,{})," Edit"]}),t.jsxs("button",{type:"button",onClick:()=>ee(D),className:"text-red-500 hover:text-red-700 flex items-center gap-1",children:[t.jsx(Nt,{})," Delete"]})]})})]},D.id))})]})})}),!y&&!s&&a==="list"&&t.jsx(Ct,{className:"mt-6",totalItems:be.length,pageSize:Rm,currentPage:be.length===0?0:E,onPrev:()=>A(D=>Math.max(D-1,1)),onNext:()=>A(D=>Math.min(D+1,Math.max(1,Math.ceil(be.length/Rm)||1))),label:"tasks"}),t.jsx(Fh,{isOpen:r,onClose:le,onSave:W,onEdit:()=>m(!1),setFormData:ae,formData:K,isEditing:!d&&!!l,viewMode:d,users:T,currentUser:e,onDelete:ee}),U&&t.jsx(zce,{open:!0,title:U.title,message:U.message,confirmLabel:U.confirmLabel,cancelLabel:U.cancelLabel,variant:U.variant,onConfirm:J,onCancel:he,loading:X})]})}function Uce({icon:e,title:s,value:a,color:n,bgColor:r,onClick:i}){return t.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[t.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${n} mr-4`,children:e?t.jsx(e,{size:22}):null}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"text-xs text-gray-500 uppercase",children:s}),t.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function zce({open:e,title:s,message:a,confirmLabel:n,cancelLabel:r,variant:i,loading:l,onConfirm:c,onCancel:d}){if(!e)return null;const m=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s}),t.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),t.jsx("button",{type:"button",onClick:c,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${m}`,disabled:l,children:l?"Processing...":n})]})]})})}const v$=e=>e?e.toUpperCase():"",Mx=e=>{const s=v$(e);return s==="PLANNED"||s==="IN PROGRESS"?"PLANNED":s==="HELD"||s==="DONE"?"HELD":s==="NOT_HELD"||s==="NOT HELD"?"NOT_HELD":"PLANNED"},Fce=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},Bce=e=>{const s=v$(e);switch(s==="PLANNED"?"PENDING":s==="HELD"?"COMPLETED":s==="NOT_HELD"?"CANCELLED":s){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},Aw=10,Lw={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},Hce=()=>{const e=it(),s=Xt(),[a]=Aa(),n=a.get("id"),r=s.pathname==="/admin/meetings/info";g.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[i,l]=g.useState([]),[c,d]=g.useState(!1),[m,f]=g.useState([]),[h,y]=g.useState(""),[N,w]=g.useState("Filter by Status"),[p,v]=g.useState(!1),[C,j]=g.useState(null),[_,T]=g.useState(1),[k,E]=g.useState(Lw),[A,U]=g.useState(!1),[B,X]=g.useState(null),[$,O]=g.useState(!1),[G,K]=g.useState(null),[ae,R]=g.useState(!1);g.useEffect(()=>{const F=s.state?.openMeetingModal,ve=s.state?.initialMeetingData?.relatedTo||a.get("id");(F||ve)&&(v(!0),s.state?.initialMeetingData&&E(Ce=>({...Ce,...s.state.initialMeetingData})),e(s.pathname,{replace:!0,state:{}}))},[s,a,e]);const Z=async()=>{if(n&&r){const F=sessionStorage.getItem("meetingDetailData");if(F)try{const ve=JSON.parse(F);if(ve.id===parseInt(n)){j(ve),sessionStorage.removeItem("meetingDetailData");return}}catch(ve){console.error(ve)}}d(!0);try{const F=await se.get("/meetings/admin/fetch-all"),Ce=[...Array.isArray(F.data)?F.data:[]].sort((D,re)=>{const oe=D?.createdAt?new Date(D.createdAt).getTime():0;return(re?.createdAt?new Date(re.createdAt).getTime():0)-oe});if(l(Ce),n&&!C){const D=Ce.find(re=>re.id===parseInt(n));D&&j(D)}console.log(F.data)}catch{q.error("Failed to load meetings.")}finally{d(!1)}},te=async()=>{try{const F=await se.get("/users/all");f(Array.isArray(F.data)?F.data:[])}catch(F){console.error(F)}};g.useEffect(()=>{Z(),te()},[]);const ge=F=>y(F.target.value),le=g.useMemo(()=>{const F=h.trim().toLowerCase(),ve=N.trim().toUpperCase();return i.filter(Ce=>{const D=[Ce?.activity,Ce?.description,Ce?.relatedTo,Ce?.assignedTo],re=F===""||D.some(je=>je&&je.toString().toLowerCase().includes(F)),oe=ve==="FILTER BY STATUS"||Mx(Ce.status||"PENDING")===ve;return re&&oe})},[i,h,N]),W=g.useMemo(()=>{const F=(_-1)*Aw;return le.slice(F,F+Aw)},[le,_]),ee=()=>{v(!1),E(Lw),U(!1),X(null),O(!1)},J=()=>{E(Lw),U(!1),X(null),v(!0)},he=F=>{let ve="";if(F.meet_assign_to?.id)ve=String(F.meet_assign_to.id);else if(F.assignedTo){const qe=m.find(Ze=>`${Ze.first_name} ${Ze.last_name}`===F.assignedTo);ve=qe?String(qe.id):""}const Ce=qe=>{if(!qe)return"";try{const Ze=new Date(qe),we=Ze.getTimezoneOffset()*6e4;return new Date(Ze.getTime()-we).toISOString().slice(0,16)}catch{return""}};let D="Lead",re="",oe="Contact",je="";if(F.lead)D="Lead",re=String(F.lead.id);else if(F.account)D="Account",re=String(F.account.id),F.contact?(oe="Contact",je=String(F.contact.id)):F.deal&&(oe="Deal",je=String(F.deal.id));else if(F.relatedType||F.related_type){const qe=F.relatedType||F.related_type,Ze=F.related_to||F.relatedToId;qe==="Lead"?(D="Lead",re=String(Ze)):(D="Account",re=F.account_id?String(F.account_id):"")}const Re={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},Ke=Mx(F.status),et=Re[Ke]||"Planned";E({subject:F.subject||F.activity||"",location:F.location||"",startTime:Ce(F.start_time||F.startTime),endTime:Ce(F.end_time||F.endTime),status:et,notes:F.description||F.notes||"",assignedTo:ve,relatedType1:D,relatedTo1:re,relatedType2:oe,relatedTo2:je}),U(!0),X(F.id),j(null),v(!0)},be=F=>{if(!F.subject?.trim())return q.error("Subject is required.");if(!F.startTime)return q.error("Start time is required.");if(F.endTime&&!(new Date(F.endTime)-new Date(F.startTime)>0))return q.error("End time must be after start time.");F.relatedType1,F.relatedTo1,F.relatedType1==="Account"&&F.relatedType2&&F.relatedTo2&&(F.relatedType2,F.relatedTo2);const ve={...F,assignedTo:parseInt(F.assignedTo),relatedTo1:parseInt(F.relatedTo1),relatedTo2:parseInt(F.relatedTo2)},Ce=A&&B?"update":"create";K({title:Ce==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${Ce} "${ve.subject}"?`,confirmLabel:Ce==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:Ce,payload:ve,targetId:B,name:ve.subject}})},Le=async()=>{if(!G?.action)return;const{type:F,payload:ve,targetId:Ce,name:D}=G.action;console.log(ve),R(!0);try{F==="create"?(O(!0),await se.post("/meetings/create",ve),q.success(`Meeting "${D}" created.`),ee(),await Z()):F==="update"?(O(!0),await se.put(`/meetings/${Ce}`,ve),q.success(`Meeting "${D}" updated.`),ee(),await Z()):F==="delete"&&(await se.delete(`/meetings/${Ce}`),q.success(`Meeting "${D}" deleted.`),C?.id===Ce&&j(null),await Z())}catch(re){const oe=re.response?.data?.detail||"Action failed.";q.error(typeof oe=="string"?oe:JSON.stringify(oe)),console.error(oe)}finally{O(!1),R(!1),K(null)}},Me=F=>{K({title:"Delete Meeting",message:`Permanently delete "${F.activity}"?`,confirmLabel:"Delete",variant:"danger",action:{type:"delete",targetId:F.id,name:F.activity}})},ke=async(F,ve)=>{try{await se.put(`/meetings/${F}`,{status:ve}),q.success("Status updated"),Z(),j(null)}catch{q.error("Failed to update status")}};return r&&n?C?t.jsx(Gl,{meeting:C,onClose:()=>{j(null),e("/admin/dashboard")},onEdit:he,onDelete:Me,onStatusUpdate:ke}):t.jsx(xt,{message:"Loading meeting..."}):t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[c&&t.jsx(xt,{message:"Loading meetings..."}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[t.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[t.jsx(dt,{className:"mr-2 text-blue-600"})," Meetings"]}),t.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:t.jsxs("button",{onClick:J,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[t.jsx(Lt,{className:"mr-2"})," Add Meeting"]})})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[t.jsx(yt,{className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search meetings",value:h,onChange:ge,className:"w-full outline-none"})]}),t.jsxs("select",{value:N,onChange:F=>w(F.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[t.jsx("option",{children:"Filter by Status"}),t.jsx("option",{value:"PLANNED",children:"PLANNED"}),t.jsx("option",{value:"HELD",children:"HELD"}),t.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[t.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4",children:"Subject"}),t.jsx("th",{className:"py-3 px-4",children:"Related To"}),t.jsx("th",{className:"py-3 px-4",children:"Start Time"}),t.jsx("th",{className:"py-3 px-4",children:"Assigned"}),t.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),t.jsx("tbody",{children:W.length>0?W.map(F=>t.jsxs("tr",{onClick:()=>j(F),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[t.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:F.subject}),t.jsxs("td",{className:"py-3 px-4",children:[F.lead&&t.jsx("p",{className:"font-medium text-blue-500 text-xs",children:F.lead.title}),F.account&&t.jsx("p",{className:"font-medium text-blue-500 text-xs",children:F.account.name}),F.contact&&t.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[F.contact.first_name," ",F.contact.last_name]}),F.deal&&t.jsx("p",{className:"font-medium text-blue-500 text-xs",children:F.deal.name})]}),t.jsx("td",{className:"py-3 px-4",children:Fce(F.start_time)}),t.jsxs("td",{className:"py-3 px-4",children:[F.meet_assign_to.first_name," ",F.meet_assign_to.last_name]}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Bce(Mx(F.status))}`,children:Mx(F.status).replace("_"," ")})})]},F.id)):t.jsx("tr",{children:t.jsx("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),t.jsx(Ct,{totalItems:le.length,pageSize:Aw,currentPage:_,onPrev:()=>T(F=>Math.max(1,F-1)),onNext:()=>T(F=>F+1),label:"meetings"}),p&&t.jsx(Iy,{onClose:ee,formData:k,setFormData:E,isEditing:A,onSubmit:be,isSubmitting:$||ae,users:m}),C&&t.jsx(Gl,{meeting:C,onClose:()=>j(null),onEdit:he,onDelete:Me,onStatusUpdate:ke}),G&&t.jsx(Gce,{open:!0,title:G.title,message:G.message,confirmLabel:G.confirmLabel,variant:G.variant,onConfirm:Le,onCancel:()=>K(null),loading:ae})]})};function Gce({open:e,title:s,message:a,confirmLabel:n,cancelLabel:r="Cancel",variant:i="primary",loading:l,onConfirm:c,onCancel:d}){if(!e)return null;const m=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s}),t.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsx("button",{onClick:d,disabled:l,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),t.jsx("button",{onClick:c,disabled:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${m}`,children:l?"...":n})]})]})})}const Vce=10,Wce=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"}],Yce=e=>e?String(e).toUpperCase():"",Md=e=>{const s=Yce(e);return s==="PLANNED"||s==="PENDING"?"PLANNED":s==="HELD"||s==="COMPLETED"?"HELD":s==="NOT HELD"||s==="NOT_HELD"||s==="CANCELLED"?"NOT_HELD":"PLANNED"},kw=e=>{const s=Md(e);return s==="PLANNED"?"PLANNED":s==="HELD"?"HELD":s==="NOT_HELD"?"NOT HELD":"--"},Yk=e=>{switch(Md(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},Qk=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function Qce(){const[e,s]=g.useState(!1),[a,n]=g.useState(null),[r,i]=g.useState(null),[l,c]=g.useState(null),[d,m]=g.useState(null),[f,h]=g.useState([]),[y,N]=g.useState(null),[w,p]=g.useState(!1),[v,C]=g.useState(null),[j,_]=g.useState(!1),[T,k]=g.useState(!1),[E,A]=g.useState("PLANNED"),[U,B]=g.useState(!1),[X,$]=g.useState(!1),[O]=Aa(),G=it(),K=Xt(),ae={subject:"",call_time:"",duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[R,Z]=g.useState(ae);g.useEffect(()=>{const V=K.state?.openCallModal,pe=K.state?.initialCallData?.relatedTo1||O.get("id");(V||pe)&&(s(!0),K.state?.initialCallData&&Z(z=>({...z,...K.state.initialCallData})),pe&&Z(z=>({...z,relatedTo1:pe})),G(K.pathname,{replace:!0,state:{}}))},[K,O,G]);const te=async()=>{try{$(!0);const V=await se.get("/calls/admin/fetch-all"),z=[...Array.isArray(V.data)?V.data:[]].sort((ie,ue)=>{const M=ie?.created_at?new Date(ie.created_at):0;return(ue?.created_at?new Date(ue.created_at):0)-M});h(z)}catch(V){console.error("Error fetching calls:",V),q.error("Failed to load calls")}finally{$(!1)}},ge=async()=>{try{const V=await se.get("/users/all");N(V.data)}catch(V){console.error("Error fetching users: ",V)}};g.useEffect(()=>{ge(),te()},[]);const le=[],W="",ee="Filter by Status",J="Filter by Users",he=1,be=f,Le=f,Me=f.length,ke=f.filter(V=>Md(V.status)==="PLANNED").length,F=f.filter(V=>Md(V.status)==="HELD").length,ve=f.filter(V=>Md(V.status)==="NOT_HELD").length,Ce=[{title:"Total",value:Me,icon:Ea,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:ke,icon:ya,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:F,icon:As,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:ve,icon:tr,color:"text-gray-600",bgColor:"bg-gray-100"}],D="Overview",re=V=>{const{name:pe,value:z}=V.target;Z(ie=>{const ue={...ie,[pe]:z};return pe==="relatedType1"&&(ue.relatedTo1="",z==="Lead"?(ue.relatedType2=null,ue.relatedTo2=null,m([])):z==="Account"&&(ue.relatedType2="Contact")),pe==="relatedType2"&&(ue.relatedTo2=""),ue})};g.useEffect(()=>{const V=async()=>{try{c([]);let pe;R.relatedType1==="Lead"?pe=await se.get("/leads/admin/getLeads"):R.relatedType1==="Account"&&(pe=await se.get("/accounts/admin/fetch-all"));let z=[];if(pe&&Array.isArray(pe.data)?z=pe.data:z=[],w&&R.relatedTo1)try{let ie;R.relatedType1==="Lead"?ie=await se.get(`/leads/get/${R.relatedTo1}`):R.relatedType1==="Account"&&(ie=await se.get(`/accounts/get/${R.relatedTo1}`)),ie&&ie.data&&(z.some(M=>String(M.id)===String(R.relatedTo1))||(z=[ie.data,...z]))}catch(ie){console.error("Error fetching specific related item:",ie)}c(z)}catch(pe){console.error("Error fetching data:",pe),c([])}};R.relatedType1&&V()},[R.relatedType1,w,R.relatedTo1]),g.useEffect(()=>{const V=async()=>{try{m([]);let pe;if(R.relatedType1==="Account"&&R.relatedTo1)R.relatedType2==="Contact"?pe=await se.get(`/contacts/from-acc/${R.relatedTo1}`):R.relatedType2==="Deal"&&(pe=await se.get(`/deals/from-acc/${R.relatedTo1}`));else{m([]);return}pe&&Array.isArray(pe.data)?m(pe.data):m([])}catch(pe){console.error("Error fetching data:",pe),m([])}};R.relatedType2&&V()},[R.relatedType2,R.relatedTo1,R.relatedType1]);const oe=V=>{if(V.preventDefault(),!R.assigned_to){q.error("Please assign the call to a user.");return}const pe={...R,duration_minutes:R.duration_minutes?parseInt(R.duration_minutes,10):null,relatedTo1:R.relatedTo1?parseInt(R.relatedTo1,10):null,relatedTo2:R.relatedType1==="Lead"?null:R.relatedTo2?parseInt(R.relatedTo2,10):null,relatedType2:R.relatedType1==="Lead"?null:R.relatedType2,assigned_to:R.assigned_to?parseInt(R.assigned_to,10):null},z=w&&v?"update":"create",ie=(R.subject||"").trim()||"Untitled Call";i({title:z==="create"?"Confirm New Call":"Confirm Update",message:z==="create"?`Create "${ie}"?`:`Save changes to "${ie}"?`,confirmLabel:z==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:z,payload:pe,targetId:v||null,name:ie}})},je=V=>n(V),Re=()=>{s(!1),p(!1),C(null)},Ke=async()=>{if(!r?.action){i(null);return}const{action:V}=r,{type:pe,payload:z,targetId:ie,name:ue}=V;k(!0);try{if(pe==="create")_(!0),await se.post("/calls/create",z),q.success(`Call "${ue}" created successfully.`),s(!1),Z(ae),p(!1),C(null),await te();else if(pe==="update"){if(!ie)throw new Error("Missing call identifier for update.");_(!0),await se.put(`/calls/${ie}`,z),q.success(`Call "${ue}" updated successfully.`),s(!1),Z(ae),p(!1),C(null),await te()}else if(pe==="delete"){if(!ie)throw new Error("Missing call identifier for deletion.");await se.delete(`/calls/${ie}`),q.success(`Call "${ue}" deleted successfully.`),a?.id===ie&&n(null),await te()}}catch(M){const xe=pe==="create"?"Failed to create call. Please review the details and try again.":pe==="update"?"Failed to update call. Please review the details and try again.":"Failed to delete call. Please try again.",ne=M?.response?.data?.detail||xe;q.error(ne)}finally{(pe==="create"||pe==="update")&&_(!1),k(!1),i(null)}},et=()=>{T||i(null)},qe=async()=>{if(a?.id)try{B(!0),await se.put(`/calls/${a.id}`,{status:E}),q.success(`Status updated to ${kw(E)}`),h(V=>Array.isArray(V)?V.map(pe=>pe.id===a.id?{...pe,status:E}:pe):V),n(null)}catch(V){const pe=V.response?.data?.detail||"Failed to update status.";q.error(pe)}finally{B(!1)}};g.useEffect(()=>{a&&A(Md(a.status))},[a]);const Ze=a?t.jsxs("div",{id:"callModalBackdrop",onClick:V=>V.target.id==="callModalBackdrop"&&n(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[X&&t.jsx(xt,{message:"Loading call details..."}),t.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[t.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[t.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),t.jsx("button",{onClick:()=>n(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:t.jsx(es,{size:25})})]}),t.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:t.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[t.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:a.subject}),t.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${Yk(a.status)}`,children:kw(a.status)})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const V=M=>{if(!M)return"";const xe=new Date(M),ne=xe.getFullYear(),Te=String(xe.getMonth()+1).padStart(2,"0"),Q=String(xe.getDate()).padStart(2,"0"),ye=String(xe.getHours()).padStart(2,"0"),P=String(xe.getMinutes()).padStart(2,"0");return`${ne}-${Te}-${Q}T${ye}:${P}`},pe=a.lead?"Lead":a.account?"Account":"Lead",z=a.lead?a.lead.id:a.account?a.account.id:null,ie=pe==="Lead"?null:a.contact?"Contact":a.deal?"Deal":"Contact",ue=pe==="Lead"?null:a.contact?a.contact.id:a.deal?a.deal.id:null;Z({subject:a.subject||"",call_time:V(a.call_time),duration_minutes:a.duration_minutes?String(a.duration_minutes):"",direction:a.direction||"Outgoing",status:a.status||"Planned",notes:a.notes||"",relatedType1:pe,relatedType2:ie,relatedTo1:z?String(z):"",relatedTo2:ue?String(ue):"",assigned_to:a.call_assign_to?.id?String(a.call_assign_to.id):""}),p(!0),C(a.id),n(null),s(!0)},children:[t.jsx(ys,{className:"mr-2"}),"Edit"]}),t.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>{const V=a.subject||"this call";i({title:"Delete Call",message:`Are you sure you want to permanently delete "${V}"? This action cannot be undone.`,confirmLabel:"Delete Call",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:a.id,name:V}})},children:[t.jsx(Nt,{className:"mr-2"}),"Delete"]})]})]})}),t.jsx("div",{className:"border-b border-gray-200 my-5"}),t.jsxs("div",{className:"p-6 lg:p-4",children:[t.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(V=>t.jsx("button",{className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${D===V?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:V},V))}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[t.jsxs("div",{className:"lg:col-span-3",children:[t.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 text-sm text-gray-700",children:[t.jsx(ji,{label:"Call Time",value:Qk(a.call_time)}),t.jsx(ji,{label:"Duration",value:a.duration_minutes?`${a.duration_minutes} min`:null}),t.jsx(ji,{label:"Direction",value:a.direction||"--"}),t.jsx(ji,{label:"Assigned To",value:`${a.call_assign_to.first_name} ${a.call_assign_to.last_name}`}),a.lead&&t.jsx(ji,{label:"Lead",value:a.lead.title}),a.account&&t.jsx(ji,{label:"Account",value:a.account.name}),a.contact&&t.jsx(ji,{label:"Contact",value:`${a.contact.first_name} ${a.contact.last_name}`}),a.deal&&t.jsx(ji,{label:"Deal",value:a.deal.name}),t.jsx(ji,{label:"Created At",value:Qk(a.created_at)})]})}),D==="Notes",D==="Activities"]}),t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),t.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[t.jsxs("button",{onClick:()=>G("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Calls"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),t.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>G("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Calls"}}}),children:[t.jsx(dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),t.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ts,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),t.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:E,onChange:V=>A(V.target.value),children:[t.jsx("option",{value:"PLANNED",children:"PLANNED"}),t.jsx("option",{value:"HELD",children:"HELD"}),t.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),t.jsx("button",{onClick:qe,disabled:U,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:U?"Updating...":"Update"})]})]})]})]})]})]}):null,we=e?t.jsx("div",{id:"modalBackdrop",onClick:V=>V.target.id==="modalBackdrop"&&Re(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[t.jsx("button",{onClick:Re,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:t.jsx(jt,{size:22})}),t.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:w?"Edit Call":"Add New Call"}),t.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:oe,children:[t.jsx(Xce,{label:"Subject",className:"md:col-span-2",name:"subject",value:R.subject,onChange:re,disabled:j,required:!0}),t.jsxs("div",{className:"w-full flex flex-col",children:[t.jsxs("select",{name:"relatedType1",onChange:re,value:R.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:j||w,children:[t.jsx("option",{value:"Lead",children:"Lead"}),t.jsx("option",{value:"Account",children:"Account"})]}),t.jsx(Dw,{items:Array.isArray(l)?l:[],value:R.relatedTo1??"",placeholder:`Search ${R.relatedType1||"here"}...`,getLabel:V=>R.relatedType1==="Lead"?V.title:V.name??"",onChange:V=>Z(pe=>({...pe,relatedTo1:V})),disabled:j||w})]}),t.jsxs("div",{className:"w-full flex flex-col",children:[t.jsxs("select",{name:"relatedType2",onChange:re,value:R.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:R.relatedType1==="Lead"||j||w,children:[t.jsx("option",{value:"Contact",children:"Contact"}),t.jsx("option",{value:"Deal",children:"Deal"})]}),t.jsx(Dw,{disabled:R.relatedType1==="Lead"||j||w,items:Array.isArray(d)?d:[],value:R.relatedTo2??"",placeholder:R.relatedType1==="Lead"?"":Array.isArray(d)&&d.length>0?`Search ${R.relatedType2||"Contact"}...`:`No ${R.relatedType2||""} data found`,getLabel:V=>R.relatedType2==="Contact"?`${V.first_name??""} ${V.last_name??""}`.trim():V.name??"",onChange:V=>Z(pe=>({...pe,relatedTo2:V}))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),t.jsx("input",{type:"datetime-local",value:R.call_time,onChange:re,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),t.jsxs("div",{className:"w-full",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),t.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[t.jsx("input",{type:"tel",value:R.duration_minutes,onChange:re,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),t.jsx("p",{children:"minutes"})]})]}),t.jsxs("div",{className:"col-span-2",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Assign To"}),t.jsx(Dw,{items:Array.isArray(y)?y:[],value:R.assigned_to??"",placeholder:"Search an account...",getLabel:V=>`${V.first_name} ${V.last_name}`,onChange:V=>Z(pe=>({...pe,assigned_to:V}))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),t.jsxs("select",{name:"direction",onChange:re,value:R.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[t.jsx("option",{value:"Incoming",children:"Incoming"}),t.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),t.jsxs("select",{name:"status",onChange:re,value:R.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[t.jsx("option",{value:"Planned",children:"Planned"}),t.jsx("option",{value:"Held",children:"Held"}),t.jsx("option",{value:"Not held",children:"Not held"})]})]}),t.jsx(Kce,{className:"col-span-2",label:"Notes",value:R.notes,onChange:re,name:"notes"}),t.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[t.jsx("button",{type:"button",onClick:Re,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:j,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:j?"Saving...":w?"Update Call":"Save Call"})]})]})]})}):null;return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[t.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[t.jsx(Ea,{className:"mr-2 text-blue-600"})," Calls"]}),t.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:t.jsxs("button",{onClick:()=>{Z(ae),p(!1),C(null),s(!0)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[t.jsx(Lt,{className:"mr-2"})," Add Call"]})})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ce.map(V=>t.jsx(qce,{...V},V.title))}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[t.jsx(yt,{size:20,className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",defaultValue:W})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[t.jsxs("select",{defaultValue:ee,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[t.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),Wce.map(V=>t.jsx("option",{value:V.value,children:V.label},V.value))]}),t.jsxs("select",{defaultValue:J,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[t.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),le.map(V=>t.jsx("option",{value:V.name,children:V.name},V.id))]})]})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[t.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4",children:"Subject"}),t.jsx("th",{className:"py-3 px-4",children:"Related To"}),t.jsx("th",{className:"py-3 px-4",children:"Call Time"}),t.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),t.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),t.jsx("tbody",{children:X?t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"py-10",children:t.jsx(xt,{message:"Loading calls..."})})}):Le.length>0?Le.map(V=>t.jsxs("tr",{onClick:()=>je(V),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[t.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:V.subject||"--"}),t.jsxs("td",{className:"py-3 px-4",children:[V.lead&&t.jsx("p",{className:"font-medium text-blue-500 text-xs",children:V.lead.title}),V.account&&t.jsx("p",{className:"font-medium text-blue-500 text-xs",children:V.account.name}),V.contact&&t.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[V.contact.first_name," ",V.contact.last_name]}),V.deal&&t.jsx("p",{className:"font-medium text-blue-500 text-xs",children:V.deal.name})]}),t.jsx("td",{className:"py-3 px-4 text-gray-800",children:V.call_time?new Date(V.call_time).toLocaleString():"--"}),t.jsx("td",{className:"py-3 px-4 text-gray-800",children:V?.call_assign_to?`${V.call_assign_to.first_name} ${V.call_assign_to.last_name}`:"--"}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Yk(V.status)}`,children:kw(V.status)})})]},V.id)):t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),t.jsx(Ct,{totalItems:be.length,pageSize:Vce,currentPage:he,onPrev:()=>{},onNext:()=>{},label:"calls"})]}),Ze,we,r&&t.jsx(Zce,{open:!0,title:r.title,message:r.message,confirmLabel:r.confirmLabel,onConfirm:Ke,onCancel:et,loading:T})]})}function qce({icon:e,title:s,value:a,color:n,bgColor:r}){return t.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[t.jsx("div",{className:`p-3 rounded-full ${r} ${n} mr-4`,children:t.jsx(e,{size:22})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500 uppercase",children:s}),t.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function Xce(e){return t.jsxs("div",{className:e.className,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),t.jsx("input",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]})}function Kce(e){return t.jsxs("div",{className:e.className,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),t.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function ji({label:e,value:s}){return t.jsxs("p",{children:[t.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",t.jsx("br",{}),t.jsx("span",{className:"break-words",children:s||"--"})]})}function Zce({open:e,title:s,message:a,confirmLabel:n,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:c,onCancel:d}){if(!e)return null;const m=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s}),t.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),t.jsx("button",{type:"button",onClick:c,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${m}`,disabled:l,children:l?"Processing...":n})]})]})})}function Dw({items:e=[],value:s="",onChange:a,getLabel:n,placeholder:r="Search...",disabled:i=!1,maxRender:l=200}){const[c,d]=g.useState(!1),[m,f]=g.useState(""),h=g.useRef(null),y=e.find(p=>String(p.id)===String(s)),N=y?n(y):"",w=g.useMemo(()=>{const p=m.trim().toLowerCase();return(p?e.filter(C=>(n(C)||"").toLowerCase().includes(p)):e).slice(0,l)},[e,m,n,l]);return g.useEffect(()=>{const p=v=>{h.current&&!h.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]),g.useEffect(()=>{c||f("")},[c]),t.jsxs("div",{ref:h,className:"relative w-full",children:[t.jsx("input",{disabled:i,value:c?m:N,placeholder:r,onFocus:()=>!i&&d(!0),onChange:p=>{f(p.target.value),c||d(!0)},className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),c&&!i&&t.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[t.jsx("div",{className:"max-h-56 overflow-y-auto",children:w.length>0?w.map(p=>{const v=String(p.id),C=n(p),j=String(s)===v;return t.jsx("button",{type:"button",onClick:()=>{a(v),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${j?"bg-blue-50":""}`,children:C||"--"},v)}):t.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&t.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function Jce({toggleSidebar:e}){const[s,a]=g.useState(!1),n=g.useRef(null),r=Xt(),i=it(),{logout:l}=er(),{user:c,fetchUser:d}=zt(),m={"/manager/dashboard":"Dashboard","/manager/accounts":"Accounts","/manager/contacts":"Contacts","/reports":"Reports","/leads":"Leads","/manager/Audit":"Audit","/manager/targets":"Targets","/manager/leads":"Leads","/manager/quotes":"Quotes","/manager/users":"Users","/manager/deals":"Deals"};g.useEffect(()=>{d()},[]),g.useEffect(()=>{const h=()=>{d()};return window.addEventListener("userProfileUpdated",h),()=>{window.removeEventListener("userProfileUpdated",h)}},[d]);const f=m[r.pathname]||"Manager Panel";return g.useEffect(()=>{function h(y){n.current&&!n.current.contains(y.target)&&a(!1)}return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),t.jsxs("header",{className:"flex justify-between z-50 items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})})}),t.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:f})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("button",{className:"relative text-gray-600 hover:text-gray-800",children:[t.jsx(ch,{className:"text-xl"}),t.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs w-4 h-4 flex items-center justify-center rounded-full",children:"3"})]}),t.jsxs("div",{className:"relative",ref:n,children:[t.jsxs("button",{onClick:()=>a(!s),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[t.jsx("img",{src:c?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 aspect-square object-cover rounded-full"}),t.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[c?.first_name," ",c?.last_name]})]}),s&&t.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4",children:[t.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[t.jsx("img",{src:c?.profile_picture||"https://via.placeholder.com/80",alt:"Profile",className:"w-16 h-16 rounded-full object-cover"}),t.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[c?.first_name," ",c?.middle_name," ",c?.last_name]})]}),t.jsxs("div",{className:"mt-4 space-y-1 px-4 text-left",children:[t.jsx("button",{onClick:()=>{i("/manager/users"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Invite Your Team"}),t.jsx("button",{onClick:()=>{i("/manager/manage-account"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Manage Your Account"}),t.jsx("div",{className:"border-t border-gray-200 my-2"}),t.jsx("button",{onClick:l,className:"block w-full text-sm text-red-600 hover:text-red-700 hover:bg-gray-50 py-2 rounded text-left",children:"Logout"})]})]})]})]})]})}function ede(){const[e,s]=g.useState(!0),[a,n]=g.useState(!1),[r,i]=g.useState(!1),[l,c]=g.useState(!1),d=Xt(),{user:m}=zt();g.useEffect(()=>{m&&console.log("Fetched user:",m)},[m]),g.useEffect(()=>{document.title="Panel | Sari-Sari CRM"},[]);const f="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",h="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition",N=["/manager/accounts","/manager/contacts","/manager/leads","/manager/deals","/manager/quotes","/manager/targets","/manager/meetings","/manager/manage-account"].includes(d.pathname);return t.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[t.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${l?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[t.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[t.jsx("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:"Manager CRM"}),m&&m.company&&t.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:m.company.company_name})]}),t.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[t.jsxs(mt,{to:"/manager/dashboard",className:({isActive:w})=>w?f:h,children:[t.jsx(dh,{className:"text-lg"}),t.jsx("span",{children:"Dashboard"})]}),t.jsxs("div",{children:[t.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!e),children:[t.jsxs("span",{className:"flex items-center gap-2",children:[t.jsx(Es,{className:"text-lg"}),"Sales"]}),t.jsx(Xa,{className:`transition-transform ${e||N?"rotate-180":""}`})]}),(e||N)&&t.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[t.jsxs(mt,{to:"/manager/accounts",className:({isActive:w})=>w?f:h,children:[t.jsx(Jt,{})," Accounts"]}),t.jsxs(mt,{to:"/manager/contacts",className:({isActive:w})=>w?f:h,children:[t.jsx(qt,{})," Contacts"]}),t.jsxs(mt,{to:"/manager/leads",className:({isActive:w})=>w?f:h,children:[t.jsx(Cs,{})," Leads"]}),t.jsxs(mt,{to:"/manager/deals",className:({isActive:w})=>w?f:h,children:[t.jsx(Es,{})," Deals"]}),t.jsxs(mt,{to:"/manager/quotes",className:({isActive:w})=>w?f:h,children:[t.jsx(en,{})," Quotes"]}),t.jsxs(mt,{to:"/manager/targets",className:({isActive:w})=>w?f:h,children:[t.jsx(sn,{})," Targets"]})]})]}),t.jsxs("div",{children:[t.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>n(!a),children:[t.jsxs("span",{className:"flex items-center gap-2",children:[t.jsx(Ta,{className:"text-lg"}),"Activity"]}),t.jsx(Xa,{className:`transition-transform ${a?"rotate-180":""}`})]}),a&&t.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[t.jsxs(mt,{to:"/manager/tasks",className:({isActive:w})=>w?f:h,children:[t.jsx(ts,{})," Tasks"]}),t.jsxs(mt,{to:"/manager/meetings",className:({isActive:w})=>w?f:h,children:[t.jsx(dt,{})," Meetings"]}),t.jsxs(mt,{to:"/manager/calls",className:({isActive:w})=>w?f:h,children:[t.jsx(Ea,{})," Calls"]}),t.jsxs(mt,{to:"/manager/audit",className:({isActive:w})=>w?f:h,children:[t.jsx(Ta,{})," Audit"]})]})]}),t.jsxs("div",{children:[t.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!r),children:[t.jsxs("span",{className:"flex items-center gap-2",children:[t.jsx(f1,{className:"text-lg"}),"User Management"]}),t.jsx(Xa,{className:`transition-transform ${r?"rotate-180":""}`})]}),r&&t.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[t.jsxs(mt,{to:"/manager/users",className:({isActive:w})=>w?f:h,children:[t.jsx(Jt,{})," Users"]}),t.jsxs(mt,{to:"/manager/manage-account",className:({isActive:w})=>w?f:h,children:[t.jsx(qt,{})," Manage Account"]})]})]})]}),t.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),l&&t.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>c(!1)}),t.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[t.jsx(Jce,{toggleSidebar:()=>c(!l)}),t.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:t.jsx(fu,{})})]})]})}const tde=e=>t.jsx(yt,{...e}),sde=e=>t.jsx(vr,{...e}),ade=e=>t.jsx(g1,{...e}),N$=e=>t.jsx(ya,{...e}),nde=e=>t.jsx(N0,{...e}),rde=e=>t.jsx(c1,{...e}),ide=e=>t.jsx(dt,{...e}),lde=e=>t.jsx(ft,{...e}),ode=e=>t.jsx(u1,{...e}),w$=e=>t.jsx(d1,{...e}),j$=e=>t.jsx(Jt,{...e}),C$=e=>t.jsx(qt,{...e}),cde=e=>t.jsx(Cs,{...e}),dde=e=>t.jsx(Es,{...e}),ude=e=>t.jsx(en,{...e}),mde=e=>t.jsx(sn,{...e}),fde=e=>t.jsx(As,{...e}),hde=e=>t.jsx(dt,{...e}),gde=e=>t.jsx(Ea,{...e}),xde=e=>t.jsx(uh,{...e}),pde=e=>t.jsx(Ta,{...e}),S$=e=>`P ${new Intl.NumberFormat("en-PH",{minimumFractionDigits:0}).format(e)}`,yde=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},bde=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},vde=e=>{switch(e){case"call":return{Icon:lde,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:ode,color:"text-green-600",bgColor:"bg-green-100"};case"meeting":default:return{Icon:ide,color:"text-blue-500",bgColor:"bg-blue-100"}}},Nde=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},wde=({searchQuery:e,onSearchChange:s,searchResults:a,onSearchResultClick:n})=>{const r=it(),[i,l]=g.useState(!1),c=g.useRef(null),d=[{icon:j$,label:"Account"},{icon:C$,label:"Contact"},{icon:cde,label:"Leads"},{icon:dde,label:"Deals"},{icon:ude,label:"Quotes"},{icon:mde,label:"Target"},{icon:fde,label:"Task"},{icon:hde,label:"Meeting"},{icon:gde,label:"Call"},{icon:pde,label:"Audit"},{icon:xde,label:"Territory"}];g.useEffect(()=>{const h=y=>{c.current&&!c.current.contains(y.target)&&l(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]);const m=h=>{s(h.target.value),l(h.target.value.trim().length>0)},f=h=>{n&&n(h),l(!1)};return t.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[t.jsxs("div",{className:"w-full flex justify-center relative",ref:c,children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-lg lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[t.jsx(tde,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),t.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:m,onFocus:()=>e.trim().length>0&&l(!0)})]}),i&&Array.isArray(a)&&a.length>0&&t.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:a.map((h,y)=>t.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>f(h),children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:h.name}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:h.type}),h.details&&t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:h.details})]}),t.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${h.type==="Lead"?"bg-blue-100 text-blue-600":h.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:h.type})]})},y))}),i&&e.trim().length>0&&(!Array.isArray(a)||a.length===0)&&t.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 p-4 text-center text-sm text-gray-500",children:"No results found"})]}),t.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:t.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:d.map((h,y)=>t.jsxs("div",{className:"relative flex-shrink-0 group",children:[t.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":h.label,onClick:()=>{switch(h.label){case"Account":r("/manager/accounts");break;case"Contact":r("/manager/contacts");break;case"Leads":r("/manager/leads");break;case"Deals":r("/manager/deals");break;case"Quotes":r("/manager/quotes");break;case"Target":r("/manager/targets");break;case"Task":r("/manager/tasks");break;case"Meeting":r("/manager/meetings");break;case"Call":r("/manager/calls");break;case"Audit":r("/manager/audit");break;case"Territory":r("/manager/territory");break;default:console.log(`Clicked ${h.label}`)}},children:t.jsx(h.icon,{size:24,className:"lg:scale-95"})}),t.jsx("span",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-1 bg-gray-700 text-white text-xs font-medium rounded-lg whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition duration-200 pointer-events-none z-20 shadow-md",children:h.label})]},y))})})]})},jde=({action:e,description:s,entity_type:a,entity_name:n,timestamp:r})=>{const i=it(),l=f=>{if(!f)return"Unknown";const h=new Date(f),N=new Date-h,w=Math.floor(N/6e4),p=Math.floor(N/36e5),v=Math.floor(N/864e5);return w<1?"Just now":w<60?`${w} min ago`:p<24?`${p} hour${p>1?"s":""} ago`:v<7?`${v} day${v>1?"s":""} ago`:h.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},c=e||s||"Action",d=n||a||"System",m=l(r);return t.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/manager/audit"),children:[t.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[c," ",t.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",d,")"]})]}),t.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:m})]})},Cde=({logs:e,loading:s})=>{const a=it();return t.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),t.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/manager/audit"),children:[t.jsx("span",{children:"See All"}),t.jsx(w$,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?t.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((n,r)=>t.jsx(jde,{...n},r))}):t.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},Sde=({icon:e,title:s,value:a,color:n,bgColor:r,loading:i,onClick:l})=>t.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l||(()=>console.log(`Clicked metric card: ${s}`)),children:[t.jsx("div",{className:`p-3 rounded-full ${r} ${n} mr-4`,children:t.jsx(e,{size:20})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:s}),t.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a||0})]})]}),_de=({revenueData:e,loading:s})=>{const a=it(),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=g.useMemo(()=>{if(console.log("=== RevenueChart calculateRevenueData ==="),console.log("revenueData:",e),console.log("revenueData length:",e?.length),!e||e.length===0){console.log("No revenue data, returning empty chart");const v=new Date;v.getFullYear();const C=v.getMonth(),j=[],_=[];for(let T=0;T<=C;T++)j.push(n[T]),_.push(0);return{labels:j,revenues:_,maxRevenue:0}}const c={};let d=0,m=0;console.log("Processing deals:",e.length),e.forEach((v,C)=>{const j=v.close_date||v.closeDate||null,_=j&&j!==null&&j!=="",T=v.stage||"",k=T.toUpperCase()==="CLOSED_WON"||T==="CLOSED_WON";let E=v.amount;E&&typeof E=="object"&&E.toString?E=parseFloat(E.toString()):E=parseFloat(E)||0;const A=E>0;if(k&&(m++,console.log(`Deal ${C+1} (CLOSED_WON):`,{id:v.id,name:v.name,stage:T,close_date:j,close_date_type:typeof j,amount:E,amount_type:typeof v.amount,hasCloseDate:_,hasAmount:A,willBeAdded:_&&A,allFields:Object.keys(v)})),_&&k&&A)try{let U=new Date(j);if(isNaN(U.getTime())){const B=String(j).split("T")[0];U=new Date(B+"T00:00:00")}if(isNaN(U.getTime()))console.warn(` Invalid date for deal ${v.id}:`,j,"Type:",typeof j);else{const B=U.getFullYear(),X=U.getMonth()+1,$=`${B}-${String(X).padStart(2,"0")}`;c[$]||(c[$]=0),c[$]+=E,d++,console.log(` Added deal ${v.id} to month ${$}: ${E}, total: ${c[$]}`),console.log(`  - Close date: ${j} -> Parsed: ${U.toISOString()} -> Month: ${$} (Year: ${B}, Month: ${X})`)}}catch(U){console.error("Error parsing deal date:",j,U)}else k&&console.warn(` Deal ${v.id} is CLOSED_WON but missing data:`,{hasCloseDate:_,hasAmount:A,closeDate:j,amount:E,originalAmount:v.amount})}),console.log("Summary:",{totalDeals:e.length,closedWonDeals:m,validDealsForGraph:d,monthlyRevenue:c});const f=Object.keys(c).map(v=>parseInt(v.split("-")[0])),h=f.length>0?[...new Set(f)].sort():[],y=new Date().getFullYear();new Date().getMonth();const N=[],w=[];for(let v=0;v<12;v++){const C=`${y}-${String(v+1).padStart(2,"0")}`;N.push(n[v]);const j=c[C]||0;w.push(j),j>0&&console.log(`Month ${n[v]} (${C}): ${j}`)}if(h.length>0){const v=Math.max(...h);if(v>y)for(let C=y+1;C<=v;C++)for(let j=0;j<12;j++){const _=`${C}-${String(j+1).padStart(2,"0")}`,T=c[_]||0;N.push(`${n[j]} ${C}`),w.push(T),T>0&&console.log(`Month ${n[j]} ${C} (${_}): ${T}`)}}const p=Math.max(...w,1);return console.log("Final chart data:",{labels:N,revenues:w,maxRevenue:p,hasData:w.some(v=>v>0)}),{labels:N,revenues:w,maxRevenue:p}},[e]),i=r.labels,l=r.revenues;return console.log("=== FINAL CHART DATA ==="),console.log("X Axis (Months):",i),console.log("Y Axis (Revenue):",l),console.log("Has any revenue > 0:",l.some(c=>c>0)),console.log("All revenue values:",l),console.log("Max revenue:",r.maxRevenue),t.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),t.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/manager/deals"),children:[t.jsx("span",{children:"See All"}),t.jsx(w$,{size:14,className:"transform -rotate-45"})]})]}),t.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:t.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i&&i.length>0&&l&&l.length>0?t.jsx(U2,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:c=>c>=1e3?`${(c/1e3).toFixed(0)}k`:c.toString()}],series:[{data:l,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%"}}):t.jsxs("div",{className:"text-center text-gray-500",children:[t.jsx("p",{className:"text-sm",children:"No revenue data available"}),t.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},Tde=({pipelineData:e,loading:s})=>{const a=it(),n=l=>{const c=(l||"").toUpperCase(),d={PROSPECTING:{name:"Prospecting",color:"bg-blue-500"},QUALIFICATION:{name:"Qualification",color:"bg-yellow-500"},PROPOSAL:{name:"Proposal",color:"bg-orange-500"},NEGOTIATION:{name:"Negotiation",color:"bg-purple-500"},CLOSED_WON:{name:"Closed Won",color:"bg-green-500"},CLOSED_LOST:{name:"Closed Lost",color:"bg-red-500"}};if(d[c])return d[c];const m=["bg-blue-500","bg-yellow-500","bg-orange-500","bg-purple-500","bg-green-500","bg-red-500"],f=Math.abs(c.split("").reduce((h,y)=>h+y.charCodeAt(0),0))%m.length;return{name:l||"Unknown",color:m[f]}},i=(()=>{if(!e||e.length===0)return["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"].map(h=>{const y=n(h);return{stage:y.name,value:0,deals:0,color:y.color}});const l={};e.forEach(f=>{const h=f.stage||"PROSPECTING";l[h]||(l[h]={deals:0,value:0}),l[h].deals+=1,l[h].value+=parseFloat(f.amount||0)});const c=Math.max(...Object.values(l).map(f=>f.value),1),d=["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"],m=[];return d.forEach(f=>{const h=n(f),y=l[f]||{deals:0,value:0};m.push({stage:h.name,value:y.value,deals:y.deals,color:h.color,percentage:c>0?y.value/c*100:0})}),m})();return t.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Sales Pipeline"}),t.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:()=>a("/manager/deals"),children:"See All"})]}),t.jsx("div",{className:"space-y-4 flex-grow",children:i.slice(0,6).map(l=>t.jsxs("div",{className:"flex flex-col cursor-pointer hover:opacity-85 transition duration-150",onClick:()=>a("/manager/deals"),children:[t.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[t.jsx("span",{className:"font-medium text-gray-700",children:l.stage}),t.jsx("span",{className:"font-semibold text-gray-800",children:S$(l.value)})]}),t.jsx("div",{className:"relative h-2 rounded-full bg-gray-200",children:t.jsx("div",{className:`absolute top-0 left-0 h-full rounded-full ${l.color}`,style:{width:`${Math.min(l.percentage,100)}%`}})}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[l.deals," Deals"]})]},l.stage))})]})},Mw=({title:e,items:s,children:a,onSeeAll:n})=>{const r=it(),i=()=>{if(n)n();else{const l={"Latest Leads":"/manager/leads","Latest Deals":"/manager/deals","Upcoming Activities":"/manager/tasks"};l[e]&&r(l[e])}};return t.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),t.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),a]})},Ede=({first_name:e,last_name:s,company_name:a,source:n,created_at:r,id:i})=>{const l=it(),{text:c,bg:d}=bde(n||"Website"),m=N=>{if(!N)return"Unknown";const w=new Date(N),v=new Date-w,C=Math.floor(v/6e4),j=Math.floor(v/36e5),_=Math.floor(v/864e5);return C<60?`${C} min ago`:j<24?w.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):_<7?w.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):w.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},f=`${e||""} ${s||""}`.trim()||"Unknown",h=a||"Unknown Company",y=m(r);return t.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&l(`/manager/leads/${i}`),children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-gray-800",children:f}),t.jsx("p",{className:"text-xs text-gray-500",children:h})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-xs text-gray-400",children:y}),t.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${c} ${d} px-2 py-0.5 rounded-full`,children:n||"Website"})]})]})})},Ade=({name:e,amount:s,account:a,stage:n,created_at:r,id:i,previousAmount:l})=>{const c=it(),m={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[n]||n||"Unknown",{text:f,bg:h}=yde(m),y=parseFloat(s||0),N=l?y>=l?"up":"down":"up",w=N==="up"?nde:rde,p=N==="up"?"text-green-400":"text-red-400",v=a?.name||"Unknown Company";return t.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&c(`/manager/deals/info?id=${i}`),children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{className:"flex-shrink",children:[t.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),t.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:v}),t.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${f} ${h} px-2 py-0.5 rounded-full`,children:m})]}),t.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[t.jsx("p",{className:"text-md font-bold text-gray-800",children:S$(y)}),t.jsx(w,{size:16,className:`${p} mt-1`})]})]})})},Lde=({type:e,title:s,assignedTo:a,dueDate:n,scheduledDate:r,priority:i,id:l,activityType:c,fullData:d})=>{const m=it(),h=c||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:y,color:N,bgColor:w}=vde(h),{text:p,bg:v}=Nde(i||"MEDIUM"),_=(E=>{if(!E)return"No date set";const A=new Date(E),B=A-new Date,X=Math.floor(B/864e5);return X===0?`Today, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:X===1?`Tomorrow, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:X===-1?`Yesterday, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:A.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(n||r),T=a||"Unassigned",k=()=>{l&&(d?h==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(d)),m(`/manager/calls/info?id=${l}`)):h==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(d)),m(`/manager/meetings/info?id=${l}`)):m("/manager/tasks"):m(h==="call"?`/manager/calls/info?id=${l}`:h==="meeting"?`/manager/meetings/info?id=${l}`:"/manager/tasks"))};return t.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:k,children:[t.jsx("div",{className:`p-2 rounded-lg ${w} mr-3 flex-shrink-0 mt-1`,children:t.jsx(y,{size:20,className:`${N}`})}),t.jsxs("div",{className:"flex-grow",children:[t.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[t.jsx("span",{className:"text-xl leading-none mr-2",children:""}),s||"Untitled Activity"]}),t.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[t.jsxs("p",{className:"flex items-center",children:[t.jsx(N$,{size:14,className:"mr-1.5 text-gray-400"}),_]}),t.jsxs("p",{className:"flex items-center",children:[t.jsx(C$,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",T]})]})]}),t.jsx("span",{className:`inline-block text-xs font-medium ${p} ${v} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},kde=()=>{const e=it(),{user:s}=zt(),[a,n]=g.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0}),[r,i]=g.useState([]),[l,c]=g.useState([]),[d,m]=g.useState([]),[f,h]=g.useState([]),[y,N]=g.useState([]),[w,p]=g.useState([]),[v,C]=g.useState(!0),[j,_]=g.useState(null),[T,k]=g.useState(""),[E,A]=g.useState([]),[U,B]=g.useState([]),[X,$]=g.useState([]),[O,G]=g.useState(new Date),K=g.useRef(null),ae=g.useRef(null),R=g.useMemo(()=>{try{if(!T.trim())return[];const le=T.toLowerCase().trim(),W=[];return Array.isArray(E)&&E.forEach(ee=>{const J=`${ee.first_name||""} ${ee.last_name||""}`.trim().toLowerCase(),he=(ee.company_name||"").toLowerCase(),be=(ee.email||"").toLowerCase(),Le=(ee.phone||"").toLowerCase();(J.includes(le)||he.includes(le)||be.includes(le)||Le.includes(le))&&W.push({id:ee.id,name:`${ee.first_name||""} ${ee.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:ee.company_name||"No company",route:`/manager/leads/${ee.id}`})}),Array.isArray(U)&&U.forEach(ee=>{const J=(ee.name||"").toLowerCase(),he=(ee.account?.name||"").toLowerCase(),be=(ee.description||"").toLowerCase();(J.includes(le)||he.includes(le)||be.includes(le))&&W.push({id:ee.id,name:ee.name||"Unnamed Deal",type:"Deal",details:ee.account?.name||"No account",route:`/manager/deals/info?id=${ee.id}`})}),Array.isArray(X)&&X.forEach(ee=>{const J=(ee.name||"").toLowerCase(),he=(ee.email||"").toLowerCase(),be=(ee.phone||"").toLowerCase(),Le=(ee.website||"").toLowerCase();(J.includes(le)||he.includes(le)||be.includes(le)||Le.includes(le))&&W.push({id:ee.id,name:ee.name||"Unnamed Account",type:"Account",details:ee.email||ee.phone||"No contact info",route:"/manager/accounts"})}),W.slice(0,10)}catch(le){return console.error("Error in search:",le),[]}},[T,E,U,X]),Z=le=>{le.route&&(e(le.route),k(""))},te=g.useCallback(async()=>{C(!0),_(null);try{const[le,W,ee,J,he,be,Le]=await Promise.all([se.get("/leads/manager/getLeads").catch(z=>(console.error("Error fetching leads:",z),{data:[]})),se.get("/deals/manager/fetch-all").catch(z=>(console.error("Error fetching deals:",z),{data:[]})),se.get("/accounts/manager/fetch-all").catch(z=>(console.error("Error fetching accounts:",z),{data:[]})),se.get("/tasks/all").catch(z=>(console.error("Error fetching tasks:",z),{data:[]})),se.get("/meetings/manager/fetch-all").catch(z=>(console.error("Error fetching meetings:",z),{data:[]})),se.get("/calls/manager/fetch-all").catch(z=>(console.error("Error fetching calls:",z),{data:[]})),se.get("/logs/read-all").catch(z=>(console.error("Error fetching logs:",z),{data:[]}))]),Me=Array.isArray(le.data)?le.data:[],ke=Array.isArray(W.data)?W.data:[],F=Array.isArray(ee.data)?ee.data:[],ve=Array.isArray(J.data)?J.data:[],Ce=Array.isArray(he.data)?he.data:[],D=Array.isArray(be.data)?be.data:[],re=Array.isArray(Le.data)?Le.data:[];console.log("=== RAW DEALS API RESPONSE ==="),console.log("Deals count:",ke.length),ke.length>0&&(console.log("First deal sample (raw):",JSON.stringify(ke[0],null,2)),console.log("First deal keys:",Object.keys(ke[0]))),A(Me),B(ke),$(F);const oe=Me.filter(z=>z.status&&!["Lost","Converted"].includes(z.status)).length,je=ve.filter(z=>!z.dueDate||z.status==="Completed"?!1:new Date(z.dueDate)<new Date).length;n({activeLeads:oe,totalDeals:ke.length,activeAccounts:F.length,overdueTasks:je});const Re=[...Me].sort((z,ie)=>new Date(ie.created_at||0)-new Date(z.created_at||0)).slice(0,5);i(Re);const Ke=[...ke].sort((z,ie)=>new Date(ie.created_at||0)-new Date(z.created_at||0)).slice(0,5);c(Ke);const et=new Date,qe=[];D.forEach(z=>{const ie=z.due_date||z.call_time,ue=(z.status||"").toUpperCase();if(ie){const M=new Date(ie);ue==="COMPLETED"||ue==="MISSED"||ue==="NOT_HELD"||ue==="HELD"||qe.push({type:"Call",title:z.subject||"Untitled Call",assignedTo:z.assigned_to||(z.call_assign_to?`${z.call_assign_to.first_name||""} ${z.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:ie,priority:(z.priority||"MEDIUM").toUpperCase(),id:z.id,activityType:"call",fullData:z})}}),Ce.forEach(z=>{const ie=z.dueDate||z.start_time,ue=(z.status||"").toUpperCase();if(ie){const M=new Date(ie);ue==="COMPLETED"||ue==="CANCELLED"||ue==="DONE"||qe.push({type:"Meeting",title:z.subject||z.activity||"Untitled Meeting",assignedTo:z.assignedTo||(z.meet_assign_to?`${z.meet_assign_to.first_name||""} ${z.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:ie,priority:(z.priority||"MEDIUM").toUpperCase(),id:z.id,activityType:"meeting",fullData:z})}});const Ze={HIGH:1,MEDIUM:2,LOW:3},we=qe.sort((z,ie)=>{const ue=Ze[z.priority]||3,M=Ze[ie.priority]||3;if(ue!==M)return ue-M;const xe=new Date(z.scheduledDate||0),ne=new Date(ie.scheduledDate||0);return xe-ne}).slice(0,5);m(we),h(ke),console.log("=== ALL DEALS DATA ==="),console.log("Total deals:",ke.length);const V=ke.filter(z=>(z.stage||"").toUpperCase()==="CLOSED_WON");console.log("CLOSED_WON deals:",V.length),V.length>0?(console.log("=== CLOSED_WON DEALS DETAILS ==="),V.forEach((z,ie)=>{let ue=z.amount;ue&&typeof ue=="object"?ue.toString?ue=parseFloat(ue.toString()):ue=parseFloat(ue):ue=parseFloat(ue)||0,console.log(`Deal ${ie+1}:`,{id:z.id,name:z.name,stage:z.stage,stage_upper:(z.stage||"").toUpperCase(),amount:z.amount,amount_parsed:ue,amount_type:typeof z.amount,close_date:z.close_date,close_date_type:typeof z.close_date,close_date_value:z.close_date?new Date(z.close_date):null,has_close_date:!!z.close_date,has_amount:ue>0,all_keys:Object.keys(z),full_deal:z})})):(console.log(" No CLOSED_WON deals found!"),console.log("All deal stages:",ke.map(z=>z.stage))),p(ke);const pe=[...re].sort((z,ie)=>new Date(ie.timestamp||0)-new Date(z.timestamp||0));N(pe)}catch(le){console.error("Error fetching dashboard data:",le),_("Failed to load dashboard data. Please refresh the page.")}finally{C(!1)}},[]);g.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",console.log("ManagerDashboard mounted, fetching data..."),te(),K.current=setInterval(()=>{console.log("Auto-refreshing dashboard data..."),te(),G(new Date)},3e4),()=>{K.current&&clearInterval(K.current)}),[te]),g.useEffect(()=>{if(!s||!s.id)return;let le=0;const W=3;let ee=null;const J=()=>{const he=window.location.protocol==="https:"?"wss:":"ws:",be=window.location.hostname==="localhost"?"localhost:8000":window.location.host,Le=`${he}//${be}/ws/notifications?user_id=${s.id}`;try{const Me=new WebSocket(Le);ae.current=Me,Me.onopen=()=>{console.log(" WebSocket connected for dashboard updates"),le=0},Me.onmessage=ke=>{try{const F=JSON.parse(ke.data);console.log(" Real-time notification received:",F),F.event&&["new_task","task_updated","new_lead","lead_updated","new_deal","deal_updated","new_account","account_updated","new_meeting","meeting_updated","new_call","call_updated"].includes(F.event)&&(console.log(" Refreshing dashboard due to:",F.event),te(),G(new Date))}catch(F){console.error("Error parsing WebSocket message:",F)}},Me.onerror=ke=>{le===0&&console.warn(" WebSocket connection unavailable (this is optional)")},Me.onclose=()=>{le<W&&(le++,ee=setTimeout(()=>{s&&s.id&&J()},5e3))}}catch{console.warn(" WebSocket not available (optional feature)")}};return J(),()=>{ee&&clearTimeout(ee),ae.current&&(ae.current.close(),ae.current=null)}},[s,te]);const ge=[{icon:j$,title:"Active Leads",value:a.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/manager/leads")},{icon:sde,title:"Total Deals",value:a.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/manager/deals")},{icon:ade,title:"Active Account",value:a.activeAccounts,color:"text-green-600",bgColor:"bg-green-50",onClick:()=>e("/manager/accounts")},{icon:N$,title:"Overdue Tasks",value:a.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/manager/tasks")}];return console.log("ManagerDashboard rendering, loading:",v,"error:",j),t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[v&&t.jsx(xt,{}),t.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[j&&t.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:t.jsx("p",{className:"font-medium",children:j})}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 mb-8",children:[t.jsxs("div",{className:"lg:col-span-9 flex flex-col space-y-4",children:[t.jsx(wde,{searchQuery:T,onSearchChange:k,searchResults:R,onSearchResultClick:Z}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:ge.map(le=>t.jsx(Sde,{...le,loading:v},le.title))})]}),t.jsx("div",{className:"lg:col-span-3",children:t.jsx(Cde,{logs:y,loading:v})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[t.jsx("div",{className:"lg:col-span-2",children:t.jsx(_de,{revenueData:w,loading:v})}),t.jsx("div",{children:t.jsx(Tde,{pipelineData:f,loading:v})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsx(Mw,{title:"Latest Leads",children:r.length>0?r.map((le,W)=>t.jsx(Ede,{...le},le.id||W)):t.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),t.jsx(Mw,{title:"Latest Deals",children:v?t.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mb-2"}),t.jsx("div",{className:"text-sm text-gray-500",children:"Loading deals..."})]}):l.length>0?l.map((le,W)=>t.jsx(Ade,{...le},le.id||W)):t.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),t.jsx(Mw,{title:"Upcoming Activities",children:d.length>0?d.map((le,W)=>t.jsx(Lde,{...le},le.id||W)):t.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})},Pw=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Active"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Former"}],Ow={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"PROSPECT",territory_id:"",assigned_to:""},pn=e=>e?e.toUpperCase():"",Iw=e=>e?e.toString().toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()):"--",Dde=e=>{switch(pn(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},Mde=e=>{switch(pn(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}},Co=10;function Pde(){const e=it(),[s,a]=g.useState(()=>JSON.parse(localStorage.getItem("user"))||JSON.parse(localStorage.getItem("authUser")));g.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[n,r]=g.useState(!1),[i,l]=g.useState(!1),[c,d]=g.useState(!1),[m,f]=g.useState(null),[h,y]=g.useState(null),[N,w]=g.useState(Ow),[p,v]=g.useState(null),[C,j]=g.useState([]),[_,T]=g.useState(!1),[k,E]=g.useState([]),[A,U]=g.useState([]),[B,X]=g.useState("Filter by Status"),[$,O]=g.useState(""),[G,K]=g.useState(null),[ae,R]=g.useState(!1),[Z,te]=g.useState(1),[ge,le]=g.useState("Overview"),[W,ee]=g.useState(""),[J,he]=g.useState(!1),be=g.useMemo(()=>!s||!Array.isArray(k)?[]:k.filter(I=>{const Ne=(I.role||"").toUpperCase();return!!(Ne.startsWith("SALES")||Ne==="MANAGER"&&I.id===s.id)}),[k,s]),Le=g.useCallback(async()=>{try{const I=await se.get("/auth/me");a(I.data)}catch(I){console.error("Failed to fetch current user",I),a(null)}},[]),Me=g.useCallback(async(I=null)=>{T(!0);try{const Ne=await se.get("/accounts/admin/fetch-all"),de=[...Array.isArray(Ne.data)?Ne.data:[]].sort((_e,Ae)=>{const He=_e?.created_at||_e?.updated_at||0,st=Ae?.created_at||Ae?.updated_at||0;return new Date(st)-new Date(He)});if(j(de),console.log("Fetch from backend: ",Ne.data),I){const _e=de.find(Ae=>Ae.id===I);v(_e||null)}}catch(Ne){console.error(Ne),j([])}finally{T(!1)}},[v]),ke=g.useCallback(async()=>{try{const I=await se.get("/users/all");E(Array.isArray(I.data)?I.data:[])}catch(I){console.error(I),I.response?.status===403&&q.warn("Unable to load users for assignment (permission denied).")}},[]),F=g.useCallback(async()=>{try{const I=await se.get("/territories/fetch");U(Array.isArray(I.data)?I.data:[])}catch(I){console.error(I),I.response?.status===403&&q.warn("Unable to load territories (permission denied).")}},[]);g.useEffect(()=>{Me(),ke(),F()},[Me,ke,F]),g.useEffect(()=>{p&&ee(pn(p.status)||"PROSPECT")},[p]);const ve=C.length,Ce=g.useMemo(()=>C.filter(I=>I.status?.toLowerCase()==="customer").length,[C]),D=g.useMemo(()=>C.filter(I=>I.status?.toLowerCase()==="prospect").length,[C]),re=g.useMemo(()=>C.filter(I=>I.status?.toLowerCase()==="partner").length,[C]),oe=g.useMemo(()=>C.filter(I=>I.status?.toLowerCase()==="active").length,[C]),je=g.useMemo(()=>C.filter(I=>I.status?.toLowerCase()==="inactive").length,[C]),Re=g.useMemo(()=>C.filter(I=>I.status?.toLowerCase()==="former").length,[C]);g.useEffect(()=>{Le(),Me(),ke(),F()},[Le,Me,ke,F]);const Ke=g.useMemo(()=>[{title:"Total",value:ve,icon:Jt,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:Ce,icon:Wr,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:D,icon:Cs,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:re,icon:qt,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:oe,icon:Wr,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:je,icon:Yr,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:Re,icon:Yr,color:"text-orange-600",bgColor:"bg-orange-100"}],[ve,Ce,D,re,oe,je,Re]),et=g.useMemo(()=>{const I=$.trim().toLowerCase(),Ne=B.trim().toUpperCase();return C.filter(H=>{const de=[H?.name,H?.website,H?.industry,H?.territory?.name,H?.phone_number],_e=I===""||de.some(He=>He==null?!1:He.toString().toLowerCase().includes(I)),Ae=Ne==="FILTER BY STATUS"||pn(H.status)===Ne;return _e&&Ae})},[C,$,B]),qe=Math.max(1,Math.ceil(et.length/Co)||1);g.useEffect(()=>{te(1)},[$,B]),g.useEffect(()=>{te(I=>{const Ne=Math.max(1,Math.ceil(et.length/Co)||1);return I>Ne?Ne:I})},[et.length]);const Ze=g.useMemo(()=>{const I=(Z-1)*Co;return et.slice(I,I+Co)},[et,Z]);et.length===0||(Z-1)*Co+1,Math.min(Z*Co,et.length);const we=()=>te(I=>Math.max(I-1,1)),V=()=>te(I=>Math.min(I+1,qe)),pe=I=>{v(I),le("Overview"),ee(pn(I?.status)||"PROSPECT")},z=()=>v(null),ie=I=>{I.target.id==="accountModalBackdrop"&&!ae&&z()},ue=()=>{r(!1),l(!1),y(null),w(Ow),d(!1)},M=I=>{I.target.id==="modalBackdrop"&&ue()},xe=I=>I?new Date(I).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",ne=I=>{const{name:Ne,value:H}=I.target;w(de=>({...de,[Ne]:H}))},Te=()=>{w(Ow),l(!1),y(null),r(!0)},Q=I=>{v(null),console.log("edit: ",I),w({name:I.name||"",website:I.website||"",phone_number:I.phone_number||"",billing_address:I.billing_address||"",shipping_address:I.shipping_address||"",industry:I.industry||"",status:pn(I.status)||"PROSPECT",territory_id:I.territory?.id?String(I.territory.id):"",assigned_to:I.assigned_accs?.id?String(I.assigned_accs.id):""}),l(!0),y(I.id),r(!0)},ye=I=>{I&&K({title:"Delete Account",message:t.jsxs("span",{children:["Are you sure you want to permanently delete the account"," ",t.jsx("span",{className:"font-semibold",children:I.name}),"? This action cannot be undone."]}),confirmLabel:"Delete Account",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:I.id,name:I.name}})},P=async()=>{if(!G?.action){K(null);return}const{action:I}=G,{type:Ne,payload:H,targetId:de,name:_e}=I;R(!0);try{if(Ne==="create"){d(!0);const Ae=await se.post("/accounts/admin",H);q.success(`Account "${_e}" created successfully.`);const He=p?.id||null;ue(),await Me(He),!p&&Ae.data?.id}else if(Ne==="update"){if(!de)throw new Error("Missing account identifier for update.");d(!0),await se.put(`/accounts/admin/${de}`,H),q.success(`Account "${_e}" updated successfully.`);const Ae=p?.id&&p.id===de?de:null;ue(),await Me(Ae),p?.id===de&&v(null)}else if(Ne==="delete"){if(!de)throw new Error("Missing account identifier for deletion.");const Ae=p?.id;f(de),await se.delete(`/accounts/admin/${de}`),q.success(`Account "${_e}" deleted successfully.`),await Me(Ae&&Ae!==de?Ae:null),Ae===de&&v(null)}}catch(Ae){console.error(Ae);const He=Ne==="create"?"Failed to create account. Please review the details and try again.":Ne==="update"?"Failed to update account. Please review the details and try again.":"Failed to delete account. Please try again.",st=Ae.response?.data?.detail||He;q.error(st),(Ne==="create"||Ne==="update")&&d(!1),Ne==="delete"&&f(null)}finally{(Ne==="create"||Ne==="update")&&d(!1),Ne==="delete"&&f(null),R(!1),K(null)}},fe=()=>{ae||K(null)},me=async()=>{if(!p||!W)return;const I=pn(W),Ne=pn(p.status);if(I!==Ne){he(!0);try{await se.put(`/accounts/admin/${p.id}`,{status:I}),q.success(`Account status updated to ${Iw(I)}`),j(H=>H.map(de=>de.id===p.id?{...de,status:I}:de)),v(null)}catch(H){console.error(H);const de=H.response?.data?.detail||"Failed to update account status. Please try again.";q.error(de)}finally{he(!1)}}},Se=I=>{I.preventDefault();const Ne=N.name.trim();if(!Ne){q.error("Account name is required.");return}const H={name:Ne,website:N.website?.trim()||null,phone_number:N.phone_number?.trim()||null,billing_address:N.billing_address?.trim()||null,shipping_address:N.shipping_address?.trim()||null,industry:N.industry?.trim()||null,status:N.status||"PROSPECT",territory_id:N.territory_id?Number(N.territory_id):null,assigned_to:N.assigned_to?Number(N.assigned_to):null},de=i&&h?"update":"create";K({title:de==="create"?"Confirm New Account":"Confirm Update",message:de==="create"?t.jsxs("span",{children:["Are you sure you want to create the account"," ",t.jsx("span",{className:"font-semibold",children:Ne}),"?"]}):t.jsxs("span",{children:["Save changes to the account"," ",t.jsx("span",{className:"font-semibold",children:Ne}),"?"]}),confirmLabel:de==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:de,payload:H,targetId:h||null,name:Ne}})},$e=[{label:"Filter by Status",value:"Filter by Status"},...Pw.map(I=>({label:I.label,value:I.value}))],We=G?.action?.type==="delete"?G.action.targetId:null,rt=p&&(m===p.id||We===p.id),wt=p&&m===p.id,Ut=p?Dde(p.status):"",ze=p?t.jsx("div",{id:"accountModalBackdrop",onClick:ie,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:I=>I.stopPropagation(),children:[t.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[t.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),t.jsx("button",{onClick:z,className:"text-gray-400 hover:text-white cursor-pointer",children:t.jsx(es,{size:25})})]}),t.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[t.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:p.name}),t.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${Ut}`,children:Iw(p.status)})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Q(p),disabled:G?.action?.type==="update"&&G.action.targetId===p.id,children:[t.jsx(ys,{className:"mr-2"}),"Edit"]}),t.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>ye(p),disabled:!!rt,children:wt?"Deleting...":t.jsxs(t.Fragment,{children:[t.jsx(Nt,{className:"mr-2"}),"Delete"]})})]})]}),t.jsx("div",{className:"border-b border-gray-200 my-5"}),t.jsxs("div",{className:"p-6 lg:p-4",children:[t.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(I=>t.jsx("button",{onClick:()=>le(I),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${ge===I?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:I},I))}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[t.jsxs("div",{className:"lg:col-span-3",children:[ge==="Overview"&&t.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Website:"}),t.jsx("p",{children:p.website?t.jsx("a",{href:p.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:p.website}):"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Industry:"}),t.jsx("p",{children:p.industry||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Territory:"}),t.jsx("p",{children:p.territory?.name||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Phone Number:"}),t.jsx("p",{children:p.phone_number||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Billing Address:"}),t.jsx("p",{children:p.billing_address||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),t.jsx("p",{children:p.shipping_address||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Assigned To:"}),t.jsx("p",{children:p.assigned_accs?`${p.assigned_accs.first_name} ${p.assigned_accs.last_name}`:"Unassigned"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Created By:"}),t.jsx("p",{children:p.acc_creator?`${p.acc_creator.first_name} ${p.acc_creator.last_name}`:"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Created At:"}),t.jsx("p",{children:xe(p.created_at)||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Last Updated:"}),t.jsx("p",{children:xe(p.updated_at)||"N/A"})]})]})}),ge==="Notes"&&t.jsxs("div",{className:"mt-4 w-full",children:[t.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:t.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[t.jsx("div",{className:"flex items-start justify-between",children:t.jsx("div",{children:t.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),t.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:C.notes||"No notes available."})]})]}),ge==="Activities"&&t.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:ft,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:dt,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((I,Ne)=>t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[t.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[t.jsx("div",{className:"text-gray-600 mt-1",children:t.jsx(I.icon,{size:24})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"font-medium text-gray-900 break-words",children:I.title}),t.jsx("p",{className:"text-sm text-gray-500 break-words",children:I.desc}),t.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[t.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),t.jsx("p",{className:"text-sm text-gray-700 break-words",children:I.user})]})]})]}),t.jsx("p",{className:"text-sm text-gray-500 break-words",children:I.date})]},Ne))]})]}),t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),t.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[t.jsxs("button",{onClick:()=>e("/manager/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Account"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),t.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Account"}}}),children:[t.jsx(dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),t.jsxs("button",{onClick:()=>e("/manager/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Account"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ts,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),t.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:W||pn(p?.status)||"PROSPECT",onChange:I=>ee(I.target.value),children:Pw.map(I=>t.jsx("option",{value:I.value,children:I.label},I.value))}),t.jsx("button",{onClick:me,disabled:J||!W||pn(W)===pn(p?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${J||!W||pn(W)===pn(p?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:J?"Updating...":"Update"})]})]})]})]})]})}):null,Pe=t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[_&&t.jsx(xt,{message:"Loading accounts..."}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[t.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[t.jsx(Jt,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),t.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:t.jsxs("button",{onClick:Te,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base cursor-pointer",children:[t.jsx(Lt,{className:"mr-2"})," Add Account"]})})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ke.map(I=>t.jsx(Ode,{...I},I.title))}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[t.jsx(yt,{size:20,className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search accounts",value:$,onChange:I=>O(I.target.value),className:"focus:outline-none text-base w-full"})]}),t.jsx("div",{className:"w-full lg:w-1/4",children:t.jsx("select",{value:B,onChange:I=>X(I.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:$e.map(I=>t.jsx("option",{value:I.value,children:I.label},I.value))})})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[t.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),t.jsx("th",{className:"py-3 px-4",children:"Status"}),t.jsx("th",{className:"py-3 px-4",children:"Industry"}),t.jsx("th",{className:"py-3 px-4",children:"Territory"}),t.jsx("th",{className:"py-3 px-4",children:"Phone"})]})}),t.jsx("tbody",{children:_?t.jsx("tr",{children:t.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"Loading accounts..."})}):et.length>0?Ze.map(I=>t.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>pe(I),children:[t.jsx("td",{className:"py-3 px-4",children:t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:I.name}),t.jsx("div",{className:"text-gray-500 text-xs break-all",children:I.website||"--"})]})}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${Mde(I.status)}`,children:Iw(I.status)})}),t.jsx("td",{className:"py-3 px-4 text-sm",children:I.industry||"--"}),t.jsx("td",{className:"py-3 px-4 text-sm",children:I.territory?.name||"--"}),t.jsx("td",{className:"py-3 px-4",children:t.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[t.jsx(ft,{className:"text-gray-500"}),t.jsx("span",{children:I.phone_number||"--"})]})})]},I.id)):t.jsx("tr",{children:t.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"No accounts found."})})})]})}),t.jsx(Ct,{className:"mt-4",totalItems:et.length,pageSize:Co,currentPage:Z,onPrev:we,onNext:V,label:"accounts"})]}),lt=n?t.jsx("div",{id:"modalBackdrop",onClick:M,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh]",onClick:I=>I.stopPropagation(),children:[t.jsx("button",{onClick:ue,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:c||ae,children:t.jsx(jt,{size:22})}),t.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:i?"Edit Account":"Add New Account"}),t.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Se,children:[t.jsx(jd,{label:"Name",name:"name",value:N.name,onChange:ne,placeholder:"Company name",required:!0,disabled:c,className:"md:col-span-2"}),t.jsx(jd,{label:"Website",name:"website",value:N.website,onChange:ne,placeholder:"https://example.com",disabled:c}),t.jsx(jd,{label:"Phone Number",name:"phone_number",value:N.phone_number,onChange:ne,placeholder:"09xx xxx xxxx",type:"tel",disabled:c}),t.jsx(jd,{label:"Industry",name:"industry",value:N.industry,onChange:ne,placeholder:"Industry",disabled:c}),t.jsx(jd,{label:"Billing Address",name:"billing_address",value:N.billing_address,onChange:ne,placeholder:"Billing address",disabled:c}),t.jsx(jd,{label:"Shipping Address",name:"shipping_address",value:N.shipping_address,onChange:ne,placeholder:"Shipping address",disabled:c}),t.jsx($w,{label:"Status",name:"status",value:N.status,onChange:ne,options:[{value:"",label:"Select status"},...Pw],required:!0,disabled:c}),t.jsx($w,{label:"Assigned To",name:"assigned_to",value:N.assigned_to,onChange:ne,options:[{value:"",label:"Select assignee"},...be.map(I=>({value:String(I.id),label:`${I.first_name} ${I.last_name} (${I.role})`}))],disabled:c}),t.jsx($w,{label:"Territory",name:"territory_id",value:N.territory_id,onChange:ne,options:[{value:"",label:"No Territory"},...A.map(I=>({value:String(I.id),label:I.name}))],disabled:c||A.length===0}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[t.jsx("button",{type:"button",onClick:ue,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:c||ae,children:"Cancel"}),t.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:c||ae,children:c?"Saving...":i?"Update Account":"Save Account"})]})]})]})}):null,ot=G?t.jsx(Ide,{open:!0,title:G.title,message:G.message,confirmLabel:G.confirmLabel,cancelLabel:G.cancelLabel,variant:G.variant,onConfirm:P,onCancel:fe,loading:ae}):null;return t.jsxs(t.Fragment,{children:[Pe,ze,lt,ot]})}function Ode({icon:e,title:s,value:a,color:n="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${s}`)};return t.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[t.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${n} mr-4`,children:e?t.jsx(e,{size:22}):null}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"text-xs text-gray-500 uppercase",children:s}),t.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function jd({label:e,name:s,value:a,onChange:n,placeholder:r,type:i="text",required:l=!1,disabled:c=!1,className:d=""}){return t.jsxs("div",{className:d,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("input",{type:i,name:s,value:a??"",onChange:n,placeholder:r,required:l,disabled:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]})}function $w({label:e,name:s,value:a,onChange:n,options:r,required:i=!1,disabled:l=!1}){return t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("select",{name:s,value:a??"",onChange:n,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(c=>t.jsx("option",{value:c.value,children:c.label},c.value))})]})}function Ide({open:e,title:s,message:a,confirmLabel:n,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:c,onCancel:d}){if(!e)return null;const m=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s}),t.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),t.jsx("button",{type:"button",onClick:c,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${m}`,disabled:l,children:l?"Processing...":n})]})]})})}const So=10,qk=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Active"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Former"}],Da=e=>e?e.toUpperCase():"",Xk=e=>e?e.toString().toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()):"--",Rw={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:"",status:""},Cd=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),Um=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function $de(){const e=it();g.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const s=P=>{if(!P)return null;const fe=P.toString().toLowerCase(),me=fe.replace(/\b\w/g,$e=>$e.toUpperCase()),Se=(()=>{switch(fe){case"customer":return"bg-green-100 text-green-700";case"prospect":return"bg-purple-100 text-purple-700";case"partner":return"bg-pink-100 text-pink-700";case"active":return"bg-blue-100 text-blue-700";case"inactive":return"bg-gray-200 text-gray-700";case"former":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}})();return t.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${Se}`,children:me})},[a,n]=g.useState([]),[r,i]=g.useState(!1),[l,c]=g.useState([]),[d,m]=g.useState([]),[f,h]=g.useState(null),[y,N]=g.useState(!1),[w,p]=g.useState(!1),[v,C]=g.useState(!1),[j,_]=g.useState(null),[T,k]=g.useState(!1),[E,A]=g.useState(null),[U,B]=g.useState(Rw),[X,$]=g.useState(""),[O,G]=g.useState("Filter by Accounts"),[K,ae]=g.useState(null),[R,Z]=g.useState("Overview"),[te,ge]=g.useState(1),[le,W]=g.useState(""),[ee,J]=g.useState(!1),he=g.useCallback(async(P=null)=>{i(!0);try{const fe=await se.get("/contacts/admin/fetch-all"),Se=[...Array.isArray(fe.data)?fe.data:[]].sort(($e,We)=>{const rt=$e?.created_at||$e?.updated_at||0,wt=We?.created_at||We?.updated_at||0;return new Date(wt)-new Date(rt)});if(n(Se),console.log(fe.data),P){const $e=Se.find(We=>We.id===P);h($e||null)}}catch(fe){console.error(fe),n([]),fe.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch contacts. Please try again later.")}finally{i(!1)}},[h]),be=g.useCallback(async()=>{try{const P=await se.get("/accounts/admin/fetch-all"),me=[...Array.isArray(P.data)?P.data:[]].sort((Se,$e)=>(Se?.name||"").localeCompare($e?.name||""));c(me)}catch(P){console.error(P),c([]),P.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},[]),Le=g.useCallback(async()=>{try{const P=await se.get("/users/all"),me=[...Array.isArray(P.data)?P.data:[]].sort((Se,$e)=>Cd(Se).localeCompare(Cd($e)));m(me)}catch(P){console.error(P),m([]),P.response?.status===403&&q.warn("Unable to load users for assignment (permission denied).")}},[]);g.useEffect(()=>{he(),be(),Le()},[he,be,Le]),g.useEffect(()=>{f?.account?.status?W(Da(f.account.status)||"PROSPECT"):W("PROSPECT")},[f]),g.useEffect(()=>{if(w&&U.account_id&&l.length>0){const P=l.find(fe=>String(fe.id)===U.account_id);if(P?.status){const fe=Da(P.status)||"PROSPECT";B(me=>!me.status||Da(me.status)!==fe?{...me,status:fe}:me)}}},[U.account_id,w]);const Me=g.useMemo(()=>{const P=new Map;l.forEach(me=>{me?.id&&me?.name&&P.set(String(me.id),me.name)}),a.forEach(me=>{me?.account_id&&me?.account?.name&&P.set(String(me.account_id),me.account.name)});const fe=Array.from(P.entries()).sort((me,Se)=>me[1].localeCompare(Se[1])).map(([me,Se])=>({value:me,label:Se}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...fe]},[l,a]),ke=g.useMemo(()=>{const P=X.trim().toLowerCase(),fe=O.trim();return a.filter(me=>{const Se=[me?.first_name,me?.last_name,me?.email,me?.title,me?.department,me?.account?.name,me?.account?.status,me?.work_phone,me?.mobile_phone_1,me?.mobile_phone_2,me?.assigned_contact?.first_name,me?.assigned_contact?.last_name,me?.contact_creator?.first_name,me?.contact_creator?.last_name,me?.notes,Um(me?.created_at),Um(me?.updated_at)],$e=P===""||Se.some(rt=>rt==null?!1:rt.toString().toLowerCase().includes(P)),We=fe==="Filter by Accounts"||String(me.account_id)===fe;return $e&&We})},[a,X,O]),F=Math.max(1,Math.ceil(ke.length/So)||1);g.useEffect(()=>{ge(1)},[X,O]),g.useEffect(()=>{ge(P=>{const fe=Math.max(1,Math.ceil(ke.length/So)||1);return P>fe?fe:P})},[ke.length]);const ve=g.useMemo(()=>{const P=(te-1)*So;return ke.slice(P,P+So)},[ke,te]);ke.length===0||(te-1)*So+1,Math.min(te*So,ke.length);const Ce=()=>ge(P=>Math.max(P-1,1)),D=()=>ge(P=>Math.min(P+1,F)),re=g.useCallback(()=>{N(!1),p(!1),A(null),B(Rw),C(!1)},[]),oe=P=>{P.target.id==="modalBackdrop"&&!v&&!T&&re()},je=P=>{const{name:fe,value:me}=P.target;B(Se=>({...Se,[fe]:me}))},Re=()=>{B(Rw),p(!1),A(null),N(!0)},Ke=P=>{P&&(B({first_name:P.first_name||"",last_name:P.last_name||"",account_id:P.account_id?String(P.account_id):"",title:P.title||"",department:P.department||"",email:P.email||"",work_phone:P.work_phone||"",mobile_phone_1:P.mobile_phone_1||"",mobile_phone_2:P.mobile_phone_2||"",notes:P.notes||"",assigned_to:P.assigned_to?String(P.assigned_to):"",status:Da(P.account?.status)||"PROSPECT"}),p(!0),A(P.id),N(!0),h(null))},et=P=>{if(!P)return;const fe=Cd(P)||"this contact";_({title:"Delete Contact",message:t.jsxs("span",{children:["Are you sure you want to permanently delete"," ",t.jsx("span",{className:"font-semibold",children:fe}),"? This action cannot be undone."]}),confirmLabel:"Delete Contact",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:P.id,name:fe}})},qe=P=>{P.preventDefault();const fe=U.first_name.trim(),me=U.last_name.trim();if(!fe||!me){q.error("First name and last name are required.");return}if(!U.account_id){q.error("Account is required.");return}const Se={first_name:fe,last_name:me,account_id:Number(U.account_id),title:U.title?.trim()||null,department:U.department?.trim()||null,email:U.email?.trim().toLowerCase()||null,work_phone:U.work_phone?.trim()||null,mobile_phone_1:U.mobile_phone_1?.trim()||null,mobile_phone_2:U.mobile_phone_2?.trim()||null,notes:U.notes?.trim()||null,assigned_to:U.assigned_to?Number(U.assigned_to):null},$e=w&&E?"update":"create",We=`${fe} ${me}`.trim(),rt=w?a.find(Pe=>Pe.id===E):null,wt=rt?.account?.status,Ut=U.status?Da(U.status):null,ze=w&&rt?.account?.id&&Ut&&Da(wt)!==Ut;_({title:$e==="create"?"Confirm New Contact":"Confirm Update",message:$e==="create"?t.jsxs("span",{children:["Are you sure you want to add"," ",t.jsx("span",{className:"font-semibold",children:We})," to your contacts?"]}):t.jsxs("span",{children:["Save changes to ",t.jsx("span",{className:"font-semibold",children:We}),"?"]}),confirmLabel:$e==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:$e,payload:Se,targetId:E||null,name:We},accountStatusUpdate:ze?Ut:null,accountId:w&&rt?.account?.id?rt.account.id:Se.account_id||null})},Ze=async()=>{if(!j?.action){_(null);return}const{action:P}=j,{type:fe,payload:me,targetId:Se,name:$e}=P;k(!0);try{if(fe==="create"){C(!0),await se.post("/contacts/admin",me),q.success(`Contact "${$e}" created successfully.`);const We=f?.id||null;re(),await he(We)}else if(fe==="update"){if(!Se)throw new Error("Missing contact identifier for update.");if(C(!0),await se.put(`/contacts/admin/${Se}`,me),j.accountStatusUpdate&&j.accountId)try{await se.put(`/accounts/admin/${j.accountId}`,{status:Da(j.accountStatusUpdate)}),q.success(`Account status updated to ${Xk(j.accountStatusUpdate)}`)}catch(rt){console.error("Failed to update account status:",rt),q.warn("Contact updated but failed to update account status.")}q.success(`Contact "${$e}" updated successfully.`);const We=f?.id&&f.id===Se?Se:f?.id||null;re(),await he(We),f?.id===Se&&h(null)}else if(fe==="delete"){if(!Se)throw new Error("Missing contact identifier for deletion.");const We=f?.id;ae(Se),await se.delete(`/contacts/admin/${Se}`),q.success(`Contact "${$e}" deleted successfully.`),await he(We&&We!==Se?We:null),We===Se&&h(null)}}catch(We){console.error(We);const rt=fe==="create"?"Failed to create contact. Please review the details and try again.":fe==="update"?"Failed to update contact. Please review the details and try again.":"Failed to delete contact. Please try again.",wt=We.response?.data?.detail||rt;q.error(wt)}finally{(fe==="create"||fe==="update")&&C(!1),fe==="delete"&&ae(null),k(!1),_(null)}},we=()=>{T||_(null)},V=P=>{h(P),Z("Overview")},pe=async()=>{if(!f?.account?.id||!le)return;const P=Da(le),fe=Da(f?.account?.status);if(P!==fe){J(!0);try{await se.put(`/accounts/admin/${f.account.id}`,{status:P}),q.success(`Account status updated to ${Xk(P)}`),n(me=>me.map(Se=>Se.account_id===f.account.id?{...Se,account:{...Se.account,status:P}}:Se)),h(null)}catch(me){console.error(me);const Se=me.response?.data?.detail||"Failed to update account status. Please try again.";q.error(Se)}finally{J(!1)}}},z=()=>h(null),ie=P=>{P.target.id==="contactModalBackdrop"&&!T&&z()},ue=j?.action?.type==="delete"?j.action.targetId:null,M=f&&(K===f.id||ue===f.id),xe=f&&K===f.id,ne=f?t.jsx("div",{id:"contactModalBackdrop",onClick:ie,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:P=>P.stopPropagation(),children:[t.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[t.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),t.jsx("button",{onClick:z,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:t.jsx(es,{size:25})})]}),t.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:["          ",t.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[t.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:Cd(f)||"Unnamed contact"}),s(f.account?.status)]}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Ke(f),disabled:T||j?.action?.type==="update"&&j.action.targetId===f.id,children:[t.jsx(ys,{className:"mr-2"}),"Edit"]}),t.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>et(f),disabled:!!M,children:xe?"Deleting...":t.jsxs(t.Fragment,{children:[t.jsx(Nt,{className:"mr-2"}),"Delete"]})})]})]}),t.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:t.jsx("p",{className:"text-sm text-gray-500",children:f.account?.name||"No associated account"})}),t.jsx("div",{className:"border-b border-gray-200 my-5"}),t.jsxs("div",{className:"p-6 lg:p-4",children:[t.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(P=>t.jsx("button",{onClick:()=>Z(P),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${R===P?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:P},P))}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[t.jsxs("div",{className:"lg:col-span-3",children:[R==="Overview"&&t.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Contact Name:"}),t.jsx("p",{children:Cd(f)||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Title:"}),t.jsx("p",{children:f.title||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Email:"}),t.jsx("p",{children:f.email?t.jsx("a",{href:`mailto:${f.email}`,className:"text-blue-600 hover:underline break-all",children:f.email}):"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Department:"}),t.jsx("p",{children:f.department||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Work Phone:"}),t.jsx("p",{children:f.work_phone||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),t.jsx("p",{children:f.mobile_phone_1||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),t.jsx("p",{children:f.mobile_phone_2||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Assigned To:"}),t.jsx("p",{children:f.assigned_contact?`${f.assigned_contact.first_name} ${f.assigned_contact.last_name}`:"Unassigned"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Created By:"}),t.jsx("p",{children:f.contact_creator?`${f.contact_creator.first_name} ${f.contact_creator.last_name}`:"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Created At:"}),t.jsx("p",{children:Um(f.created_at)||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Last Updated:"}),t.jsx("p",{children:Um(f.updated_at)||"N/A"})]})]})}),R==="Notes"&&t.jsxs("div",{className:"mt-4 w-full",children:[t.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:t.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[t.jsx("div",{className:"flex items-start justify-between",children:t.jsx("div",{children:t.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),t.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:f.notes||"No notes available."})]})]}),R==="Activities"&&t.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:ft,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:dt,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((P,fe)=>t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[t.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[t.jsx("div",{className:"text-gray-600 mt-1",children:t.jsx(P.icon,{size:24})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"font-medium text-gray-900 break-words",children:P.title}),t.jsx("p",{className:"text-sm text-gray-500 break-words",children:P.desc}),t.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[t.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),t.jsx("p",{className:"text-sm text-gray-700 break-words",children:P.user})]})]})]}),t.jsx("p",{className:"text-sm text-gray-500 break-words",children:P.date})]},fe))]})]}),t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),t.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[t.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Contact"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),t.jsxs("button",{type:"button",onClick:()=>{if(!f?.email){alert("No email address available");return}const P=encodeURIComponent(f.email),fe=encodeURIComponent(""),me=encodeURIComponent(""),Se=`https://mail.google.com/mail/?view=cm&fs=1&to=${P}&su=${fe}&body=${me}`;window.open(Se,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(js,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),t.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Contact"}}}),children:[t.jsx(dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),t.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Contact"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ts,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),t.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:le||Da(f?.account?.status)||"PROSPECT",onChange:P=>W(P.target.value),disabled:ee||!f?.account?.id,children:qk.map(P=>t.jsx("option",{value:P.value,children:P.label},P.value))}),t.jsx("button",{onClick:pe,disabled:ee||!le||!f?.account?.id||Da(le)===Da(f?.account?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${ee||!le||!f?.account?.id||Da(le)===Da(f?.account?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:ee?"Updating...":"Update"})]})]})]})]})]})}):null,Te=t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&t.jsx(xt,{message:"Loading contacts..."}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[t.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[t.jsx(Jt,{className:"mr-2 text-blue-600"})," Contacts Management"]}),t.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:t.jsxs("button",{onClick:Re,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[t.jsx(Lt,{className:"mr-2"})," Add Contact"]})})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[t.jsx(yt,{size:20,className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search contacts",value:X,onChange:P=>$(P.target.value),className:"focus:outline-none text-base w-full"})]}),t.jsx("div",{className:"w-full lg:w-1/4",children:t.jsx("select",{value:O,onChange:P=>G(P.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:Me.map(P=>t.jsx("option",{value:P.value,children:P.label},P.value??P.label))})})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[t.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),t.jsx("th",{className:"py-3 px-4",children:"Account"}),t.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),t.jsx("th",{className:"py-3 px-4",children:"Department"}),t.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),t.jsx("th",{className:"py-3 px-4",children:"Created"})]})}),t.jsx("tbody",{children:r?t.jsx("tr",{children:t.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"Loading contacts..."})}):ke.length>0?ve.map(P=>{const fe=[{Icon:js,value:P.email,key:"email"},{Icon:ft,value:P.work_phone,key:"work_phone"},{Icon:Bl,value:P.mobile_phone_1,key:"mobile_phone_1"},{Icon:Bl,value:P.mobile_phone_2,key:"mobile_phone_2"}].filter(me=>!!me.value);return t.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>V(P),children:[t.jsxs("td",{className:"py-3 px-4 align-top",children:[t.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:Cd(P)||"--"}),t.jsx("div",{className:"text-xs text-gray-500",children:P.title||"No title"})]}),t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[t.jsx(Ph,{className:"text-gray-500 flex-shrink-0"}),t.jsx("span",{className:"break-words",children:P.account?.name||"--"})]})}),t.jsx("td",{className:"py-3 px-4 align-top",children:fe.length>0?t.jsx("div",{className:"space-y-1 text-gray-700",children:fe.map(({Icon:me,value:Se,key:$e})=>t.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[t.jsx(me,{className:"text-gray-500 flex-shrink-0"}),t.jsx("span",{children:Se})]},$e))}):t.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[t.jsx(Es,{className:"text-gray-500 flex-shrink-0"}),t.jsx("span",{children:P.department||"--"})]})}),t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[t.jsx(qt,{className:"text-gray-500 flex-shrink-0"}),t.jsx("span",{children:P.assigned_contact?`${P.assigned_contact.first_name} ${P.assigned_contact.last_name}`:"Unassigned"})]})}),t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[t.jsx(dt,{className:"text-gray-500 flex-shrink-0"}),t.jsx("span",{className:"text-xs",children:Um(P.created_at)||"--"})]})})]},P.id)}):t.jsx("tr",{children:t.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"No contacts found."})})})]})}),t.jsx(Ct,{className:"mt-4",totalItems:ke.length,pageSize:So,currentPage:te,onPrev:Ce,onNext:D,label:"contacts"})]}),Q=y?t.jsx("div",{id:"modalBackdrop",onClick:oe,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:P=>P.stopPropagation(),children:[t.jsx("button",{onClick:re,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:v||T,children:t.jsx(jt,{size:22})}),t.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:w?"Edit Contact":"Add New Contact"}),t.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:qe,children:[t.jsx(Tl,{label:"First Name",name:"first_name",value:U.first_name,onChange:je,placeholder:"First name",required:!0,disabled:v}),t.jsx(Tl,{label:"Last Name",name:"last_name",value:U.last_name,onChange:je,placeholder:"Last name",required:!0,disabled:v}),t.jsx(Px,{label:"Account",name:"account_id",value:U.account_id,onChange:je,options:[{value:"",label:"Select account"},...l.map(P=>({value:String(P.id),label:P.name}))],required:!0,disabled:v||l.length===0}),w&&U.account_id?t.jsx(Px,{label:"Status",name:"status",value:U.status||Da(l.find(P=>String(P.id)===U.account_id)?.status||"")||"PROSPECT",onChange:je,options:qk.map(P=>({value:P.value,label:P.label})),disabled:v||!U.account_id}):t.jsx(Px,{label:"Assigned To",name:"assigned_to",value:U.assigned_to,onChange:je,options:[{value:"",label:"Select assignee"},...d.map(P=>({value:String(P.id),label:`${P.first_name} ${P.last_name} (${P.role})`}))],disabled:v||d.length===0}),w&&t.jsx(Px,{label:"Assigned To",name:"assigned_to",value:U.assigned_to,onChange:je,options:[{value:"",label:"Select assignee"},...d.map(P=>({value:String(P.id),label:`${P.first_name} ${P.last_name} (${P.role})`}))],disabled:v||d.length===0}),t.jsx(Tl,{label:"Title",name:"title",value:U.title,onChange:je,placeholder:"Job title",disabled:v}),t.jsx(Tl,{label:"Department",name:"department",value:U.department,onChange:je,placeholder:"Department",disabled:v}),t.jsx(Tl,{label:"Email",name:"email",type:"email",value:U.email,onChange:je,placeholder:"example@email.com",disabled:v}),t.jsx(Tl,{label:"Work Phone",name:"work_phone",value:U.work_phone,onChange:je,placeholder:"09xx xxx xxxx",disabled:v}),t.jsx(Tl,{label:"Mobile Phone 1",name:"mobile_phone_1",value:U.mobile_phone_1,onChange:je,placeholder:"09xx xxx xxxx",disabled:v}),t.jsx(Tl,{label:"Mobile Phone 2",name:"mobile_phone_2",value:U.mobile_phone_2,onChange:je,placeholder:"09xx xxx xxxx",disabled:v}),t.jsx(Rde,{label:"Notes",name:"notes",value:U.notes,onChange:je,placeholder:"Additional details...",rows:3,disabled:v,className:"md:col-span-2"}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[t.jsx("button",{type:"button",onClick:re,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:v||T,children:"Cancel"}),t.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:v||T,children:v?"Saving...":w?"Update Contact":"Save Contact"})]})]})]})}):null,ye=j?t.jsx(Ude,{open:!0,title:j.title,message:j.message,confirmLabel:j.confirmLabel,cancelLabel:j.cancelLabel,variant:j.variant,onConfirm:Ze,onCancel:we,loading:T}):null;return t.jsxs(t.Fragment,{children:[Te,ne,Q,ye]})}function Tl({label:e,name:s,value:a,onChange:n,placeholder:r,type:i="text",required:l=!1,disabled:c=!1}){return t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("input",{type:i,name:s,value:a??"",onChange:n,placeholder:r,required:l,disabled:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]})}function Px({label:e,name:s,value:a,onChange:n,options:r,required:i=!1,disabled:l=!1,className:c=""}){return t.jsxs("div",{className:c,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("select",{name:s,value:a??"",onChange:n,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(d=>t.jsx("option",{value:d.value,children:d.label},d.value??d.label))})]})}function Rde({label:e,name:s,value:a,onChange:n,placeholder:r,rows:i=3,disabled:l=!1,className:c=""}){return t.jsxs("div",{className:c,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("textarea",{name:s,value:a??"",onChange:n,placeholder:r,rows:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function Ude({open:e,title:s,message:a,confirmLabel:n,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:c,onCancel:d}){if(!e)return null;const m=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s}),t.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),t.jsx("button",{type:"button",onClick:c,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${m}`,disabled:l,children:l?"Processing...":n})]})]})})}function _$({lead:e,onBack:s,fetchLeads:a,onEdit:n,onDelete:r,setSelectedLead:i}){const l=it(),{leadID:c}=Qi(),[d,m]=g.useState(e||null),[f,h]=g.useState("Overview"),[y,N]=g.useState(""),{userRole:w}=er(),{user:p}=zt();g.useEffect(()=>{console.log("mewo",w),console.log("asdads",p),console.log("lead",d)},[w,p,d]);const[v,C]=g.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[j,_]=g.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[T,k]=g.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),E=async()=>{try{if(e){m(e),N(e.status||"New");return}if(!c)return;const $=await se.get(`/leads/get/${c}`);m($.data),N($.data.status||"New"),C({name:$.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:$.data.territory?.id||null,assigned_to:$.data.assigned_to?.id||null,created_by:$.data.creator?.id||null}),_({last_name:$.data.last_name||"",first_name:$.data.first_name||"",account_id:null,title:$.data.title||"",department:$.data.department||"",email:$.data.email||"",work_phone:$.data.work_phone||"",mobile_phone_1:$.data.mobile_phone_1||"",mobile_phone_2:$.data.mobile_phone_2||"",notes:"",assigned_to:$.data.assigned_to?.id||null,created_by:$.data.creator?.id||null}),k({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:$.data.assigned_to?.id||null,created_by:$.data.creator?.id||null})}catch($){console.error($)}};g.useEffect(()=>{e?(m(e),N(e.status||"New")):c&&E()},[c,e]);const A=async()=>{try{const $=await se.put(`/leads/${d.id}/update/status`,{status:y});console.log($.data),q.success("Lead status updated successfully");const O={...d,status:$.data.status};m(O),i&&i(O),a&&a(),s&&s()}catch($){console.error($),q.error("Failed to update lead status")}},U=async $=>{const O={...v,assigned_to:$.assigned_to?.id,billing_address:$.address,shipping_address:$.address,created_by:$.creator?.id,industry:null,name:$.company_name,phone_number:$.work_phone,status:"Prospect",territory_id:$.territory?.id,website:""};console.log("Account data: ",O),console.log("Contact data: ",j),console.log("Deal data: ",T),console.log("Lead data: ",$);try{const K=(await se.post("/accounts/convertedLead",O)).data.id,ae={...j,account_id:K,assigned_to:$.assigned_to?.id,created_by:$.creator?.id,department:$.department,email:$.email,first_name:$.first_name,last_name:$.last_name,mobile_phone_1:$.mobile_phone_1,mobile_phone_2:$.mobile_phone_2,notes:$.notes,title:$.title,work_phone:$.work_phone},Z=(await se.post("/contacts/convertedLead",ae)).data.id,te=()=>{switch(T.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},ge=T.amount&&T.amount!==""?parseFloat(T.amount):0,le={...T,account_id:K,assigned_to:$.assigned_to?.id,created_by:$.creator?.id,primary_contact_id:Z,probability:te(),stage:"Prospecting"},W=await se.post("/deals/convertedLead",le),ee=await se.put(`/leads/convert/${$.id}`);i&&i(null),a(),q.success("Lead converted successfully!"),s()}catch(G){console.error("Error during conversion:",G);const K=G.response?.data?.detail||G.message||"Failed to convert lead. Please try again.";q.error(K)}},B=$=>{switch(($||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},X=$=>$.toString().toLowerCase().replace(/\b\w/g,O=>O.toUpperCase());return d?t.jsx(t.Fragment,{children:t.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[t.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:t.jsxs("div",{className:"flex items-start justify-between w-full",children:[t.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),t.jsx("button",{onClick:()=>{s?s():l(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:t.jsx(es,{size:25})})]})}),t.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[t.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[d.first_name," ",d.last_name]}),t.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${B(d.status)}`,children:X(d.status||"New")}),t.jsx("button",{onClick:()=>{d.status==="Qualified"?U(d):q.warn("Cannot convert lead. Only leads with 'Qualified' status can be converted.")},className:"bg-green-600 hover:bg-green-700 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2 focus:ring-green-400",children:"Convert"})]}),(d.creator?.id===p?.id||d.assigned_to?.id===p?.id)&&t.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsxs("button",{type:"button",onClick:()=>{n&&d&&n(d)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[t.jsx(hs,{className:"mr-2"}),"Edit"]}),t.jsxs("button",{type:"button",onClick:()=>{r&&d&&r(d)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[t.jsx(Nt,{className:"mr-2"}),"Delete"]})]})]}),t.jsx("div",{className:"border-b border-gray-200 my-5"}),t.jsxs("div",{className:"p-4 lg:p-4",children:[t.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map($=>t.jsx("button",{onClick:()=>h($),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${f===$?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:$},$))}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[t.jsxs("div",{className:"lg:col-span-3",children:[f==="Overview"&&t.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Name:"}),t.jsxs("p",{children:[d.first_name," ",d.last_name||"N/A"]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Company:"}),t.jsx("p",{children:d.company_name||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Title:"}),t.jsx("p",{children:d.title||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Department:"}),t.jsx("p",{children:d.department||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Email:"}),t.jsx("p",{children:d.email||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Territory:"}),t.jsx("p",{children:d.territory?.name||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Assigned To:"}),t.jsx("p",{children:d.assigned_to?`${d.assigned_to.first_name} ${d.assigned_to.last_name}`:"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Created By:"}),t.jsx("p",{children:d.creator?`${d.creator.first_name} ${d.creator.last_name}`:"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Work Phone:"}),t.jsx("p",{children:d.work_phone||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),t.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),t.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Source:"}),t.jsx("p",{children:d.source||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Address:"}),t.jsx("p",{children:d.address||"N/A"})]})]})}),f==="Notes"&&t.jsxs("div",{className:"mt-4 w-full",children:[t.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:t.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[t.jsx("div",{className:"flex items-start justify-between",children:t.jsx("div",{children:t.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),t.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]})]}),f==="Activities"&&t.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:ft,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:dt,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map(($,O)=>t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[t.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[t.jsx("div",{className:"text-gray-600 mt-1",children:t.jsx($.icon,{size:24})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"font-medium text-gray-900 break-words",children:$.title}),t.jsx("p",{className:"text-sm text-gray-500 break-words",children:$.desc}),t.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[t.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),t.jsx("p",{className:"text-sm text-gray-700 break-words",children:$.user})]})]})]}),t.jsx("p",{className:"text-sm text-gray-500 break-words",children:$.date})]},O))]})]}),t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),t.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[t.jsxs("button",{onClick:()=>l("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Lead"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),t.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const $=encodeURIComponent(d.email),O=encodeURIComponent(""),G=encodeURIComponent(""),K=`https://mail.google.com/mail/?view=cm&fs=1&to=${$}&su=${O}&body=${G}`;window.open(K,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(js,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),t.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>l("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Lead"}}}),children:[t.jsx(dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),t.jsxs("button",{onClick:()=>l("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Lead"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ts,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),t.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:y,disabled:d.creator?.id!==p?.id&&d.assigned_to?.id!==p?.id,onChange:$=>N($.target.value),children:[t.jsx("option",{value:"New",children:"New"}),t.jsx("option",{value:"Contacted",children:"Contacted"}),t.jsx("option",{value:"Qualified",children:"Qualified"}),t.jsx("option",{value:"Converted",children:"Converted"}),t.jsx("option",{value:"Lost",children:"Lost"})]}),(d.creator?.id===p?.id||d.assigned_to?.id===p?.id)&&t.jsx("button",{onClick:A,disabled:y===d.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${y===d.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const zde=pu.all(),Uw=zde.map((e,s)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${s}`})),Fde=e=>e.toString().toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()),Bde=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},zm=10,zw={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function Hde(){const e=it(),{leadID:s}=Qi();Aa();const[a,n]=g.useState(null),[r,i]=g.useState(!1),[l,c]=g.useState(null),[d,m]=g.useState(null),[f,h]=g.useState([]),[y,N]=g.useState(!1),[w,p]=g.useState(""),[v,C]=g.useState("Filter by Status"),[j,_]=g.useState(1),[T,k]=g.useState(zw),[E,A]=g.useState(!1),[U,B]=g.useState(null),[X,$]=g.useState(!1),[O,G]=g.useState(null),[K,ae]=g.useState(!1);g.useRef(null);const[R,Z]=g.useState(!1),[te,ge]=g.useState(null),[le,W]=g.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[ee,J]=g.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[he,be]=g.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});g.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const Le=async()=>{try{const Q=await se.get("/leads/getUsers");c(Q.data)}catch(Q){console.error(`Error fetching users: ${Q}`)}},Me=async()=>{N(!0);try{const Q=await se.get("/leads/admin/getLeads");h(Q.data),console.log(Q.data)}catch(Q){console.error(`Error fetching leads: ${Q}`)}finally{N(!1)}};g.useEffect(()=>{Le(),Me()},[]),g.useEffect(()=>{if(s&&f.length>0&&!r&&!E){const Q=f.find(ye=>ye.id===Number(s));Q&&n(Q)}else!s&&!a&&n(null)},[s,f,r,E]),g.useEffect(()=>{if(te){const ye=(me=>{if(!me)return{code:"+63",number:""};const Se=me.match(/^(\+\d+)\s(.+)$/);if(Se)return{code:Se[1],number:Se[2]};if(me.startsWith("+")){const $e=me.match(/^(\+\d{1,3})/);if($e)return{code:$e[1],number:me.substring($e[1].length).trim()}}return{code:"+63",number:me}})(te.work_phone),P=[];te.work_phone&&P.push(`Work: ${te.work_phone}`),te.mobile_phone_1&&P.push(`Mobile 1: ${te.mobile_phone_1}`),te.mobile_phone_2&&P.push(`Mobile 2: ${te.mobile_phone_2}`);const fe=P.length>0?P.join(" | "):"";W({name:te.company_name||"",website:"",countryCode:ye.code,phone_number:ye.number,combinedPhoneNumbers:fe,billing_address:te.address||"",shipping_address:te.address||"",industry:"",status:"Prospect",territory_id:te.assigned_to?.territory?.id||null,assigned_to:te.assigned_to?.id||null,created_by:te.creator?.id||null}),J({last_name:te.last_name||"",first_name:te.first_name||"",account_id:null,title:te.title||"",department:te.department||"",email:te.email||"",work_phone:te.work_phone||"",mobile_phone_1:te.mobile_phone_1||"",mobile_phone_2:te.mobile_phone_2||"",notes:te.notes||"",assigned_to:te.assigned_to?.id||null,created_by:te.creator?.id||null}),be({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:te.assigned_to?.id||null,created_by:te.creator?.id||null})}},[te]);const ke=Q=>p(Q.target.value),F=g.useMemo(()=>{const Q=w.trim().toLowerCase(),ye=v.trim().toUpperCase();return f.filter(P=>{const fe=[P?.first_name,P?.last_name,P?.company_name,P?.title,P?.email,P?.work_phone,P?.assigned_to?`${P.assigned_to.first_name} ${P.assigned_to.last_name}`:""],me=Q===""||fe.some($e=>$e==null||$e===""?!1:$e.toString().toLowerCase().includes(Q));let Se=!1;return ye==="FILTER BY STATUS"?Se=(P.status?P.status.toUpperCase():"")!=="CONVERTED":Se=(P.status?P.status.toUpperCase():"")===ye,me&&Se})},[f,w,v]),ve=Math.max(1,Math.ceil(F.length/zm)||1);g.useEffect(()=>{_(1)},[w,v]),g.useEffect(()=>{_(Q=>{const ye=Math.max(1,Math.ceil(F.length/zm)||1);return Q>ye?ye:Q})},[F.length]);const Ce=g.useMemo(()=>{const Q=(j-1)*zm;return F.slice(Q,Q+zm)},[F,j]),D=()=>_(Q=>Math.max(Q-1,1)),re=()=>_(Q=>Math.min(Q+1,ve)),oe=Q=>{n(Q)},je=()=>{n(null),s&&e("/admin/leads",{replace:!0})},Re=()=>{i(!1),k(zw),A(!1),B(null),$(!1),m(null),sessionStorage.removeItem("editLeadData")},Ke=Q=>{Q.target.id==="modalBackdrop"&&Re()},et=()=>{k(zw),A(!1),B(null),m(null),i(!0)},qe=Q=>{if(!Q){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",Q),console.log("Current state - leadID:",s,"selectedLead:",a,"showModal:",r);const ye=$e=>{if(!$e)return{code:"+63",number:""};const We=$e.match(/^(\+\d+)\s(.+)$/);return We?{code:We[1],number:We[2]}:{code:"+63",number:$e}},P=ye(Q.work_phone),fe=ye(Q.mobile_phone_1),me=ye(Q.mobile_phone_2);let Se="";if(Q.assigned_to){Se=String(Q.assigned_to.id);const $e=l?.find(We=>We.id===Q.assigned_to.id);m($e)}k({first_name:Q.first_name||"",last_name:Q.last_name||"",company_name:Q.company_name||"",title:Q.title||"",department:Q.department||"",email:Q.email||"",work_ccode:P.code,work_phone:P.number,m1_ccode:fe.code,mobile_phone_1:fe.number,m2_ccode:me.code,mobile_phone_2:me.number,address:Q.address||"",notes:Q.notes||"",source:Q.source||"",territory_id:Q.territory?.id||null,lead_owner:Se,status:Q.status||"New"}),A(!0),B(Q.id),a?(console.log("Coming from detail view - closing detail modal and showing edit form"),n(null),i(!0)):(console.log("Already in list view - showing modal"),i(!0))},Ze=Q=>{if(!Q){console.error("handleDelete: lead is null or undefined");return}console.log("handleDelete called with lead:",Q);const ye=`${Q.first_name} ${Q.last_name}`||"this lead";G({title:"Delete Lead",message:t.jsxs("span",{children:["Are you sure you want to permanently delete"," ",t.jsx("span",{className:"font-semibold",children:ye}),"? This action cannot be undone."]}),confirmLabel:"Delete Lead",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:Q.id,name:ye}})},we=Q=>{const{name:ye,value:P}=Q.target;if(k(fe=>({...fe,[ye]:P})),ye==="lead_owner"){const fe=l.find(me=>me.id===parseInt(P));m(fe)}},V=Q=>{if(Q.preventDefault(),!T.first_name?.trim()||!T.last_name?.trim()){q.error("First name and last name are required.");return}if(!T.lead_owner){q.error("Please assign a lead owner.");return}const ye={...T,territory_id:T.territory_id?parseInt(T.territory_id):null,lead_owner:parseInt(T.lead_owner),work_phone:`${T.work_ccode} ${T.work_phone}`,mobile_phone_1:`${T.m1_ccode} ${T.mobile_phone_1}`,mobile_phone_2:`${T.m2_ccode} ${T.mobile_phone_2}`},P=E&&U?"update":"create",fe=`${T.first_name} ${T.last_name}`;G({title:P==="create"?"Confirm New Lead":"Confirm Update",message:P==="create"?t.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",t.jsx("span",{className:"font-semibold",children:fe}),"?"]}):t.jsxs("span",{children:["Save changes to ",t.jsx("span",{className:"font-semibold",children:fe}),"?"]}),confirmLabel:P==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:P,payload:ye,targetId:U||null,name:fe}})},pe=async()=>{if(!O?.action){G(null);return}const{action:Q}=O,{type:ye,payload:P,targetId:fe,name:me,lead:Se}=Q;console.log(P),ae(!0);try{if(ye==="create")$(!0),await se.post("/leads/create",P),q.success(`Lead "${me}" created successfully.`),Re(),await Me();else if(ye==="update"){if(!fe)throw new Error("Missing lead identifier for update.");$(!0);const $e=await se.put(`/leads/${fe}`,P);q.success(`Lead "${me}" updated successfully.`),a&&a.id===fe&&n(null),Re(),await Me()}else if(ye==="delete"){if(!fe)throw new Error("Missing lead identifier for deletion.");await se.delete(`/leads/${fe}`),q.success(`Lead "${me}" deleted successfully.`),a?.id===fe&&n(null),await Me()}}catch($e){console.error($e);const We=ye==="create"?"Failed to create lead. Please review the details and try again.":ye==="update"?"Failed to update lead. Please review the details and try again.":"Failed to delete lead. Please try again.",rt=$e.response?.data?.detail||We;q.error(rt)}finally{(ye==="create"||ye==="update")&&$(!1),ye!=="edit"&&(ae(!1),G(null))}},z=()=>{K||G(null)},ie=f.filter(Q=>Q.status==="New").length,ue=f.filter(Q=>Q.status==="Contacted").length,M=f.filter(Q=>Q.status==="Qualified").length,xe=f.filter(Q=>Q.status==="Converted").length,ne=f.filter(Q=>Q.status==="Lost").length,Te=[{title:"New",value:ie,icon:Cs,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:ue,icon:ft,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:M,icon:As,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:xe,icon:qi,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:ne,icon:tr,color:"text-red-600",bgColor:"bg-red-100"}];return t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[y&&t.jsx(xt,{message:"Loading leads..."}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[t.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[t.jsx(Cs,{className:"mr-2 text-blue-600"}),"Leads"]}),t.jsxs("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:[t.jsxs("button",{onClick:()=>{q.info("Download functionality coming soon")},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[t.jsx(Xr,{className:"mr-2"})," Download"]}),t.jsxs("button",{onClick:et,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[t.jsx(Lt,{className:"mr-2"})," Add Lead"]})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Te.map(Q=>t.jsx(Vde,{...Q},Q.title))}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[t.jsx(yt,{size:20,className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search leads",value:w,onChange:ke,className:"focus:outline-none text-base w-full"})]}),t.jsx("div",{className:"w-full lg:w-1/4",children:t.jsxs("select",{value:v,onChange:Q=>C(Q.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[t.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),t.jsx("option",{value:"New",children:"New"}),t.jsx("option",{value:"Contacted",children:"Contacted"}),t.jsx("option",{value:"Qualified",children:"Qualified"}),t.jsx("option",{value:"Converted",children:"Converted"}),t.jsx("option",{value:"Lost",children:"Lost"})]})})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[t.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4",children:"Name"}),t.jsx("th",{className:"py-3 px-4",children:"Company"}),t.jsx("th",{className:"py-3 px-4",children:"Title"}),t.jsx("th",{className:"py-3 px-4",children:"Email"}),t.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),t.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),t.jsx("tbody",{children:F.length>0?Ce.map(Q=>t.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>oe(Q),children:[t.jsx("td",{className:"py-3 px-4",children:t.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[Q.first_name," ",Q.last_name]})}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:Q.company_name||"--"})}),t.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:Q.title||"--"}),t.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:Q.email||"--"}),t.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:Q.assigned_to?`${Q.assigned_to.first_name} ${Q.assigned_to.last_name}`:"--"}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Bde(Q.status||"New")}`,children:Fde(Q.status||"New")})})]},Q.id)):t.jsx("tr",{children:t.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No leads found."})})})]})}),t.jsx(Ct,{className:"mt-4",totalItems:F.length,pageSize:zm,currentPage:j,onPrev:D,onNext:re,label:"leads"}),r&&t.jsx("div",{id:"modalBackdrop",onClick:Ke,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:Q=>Q.stopPropagation(),children:[t.jsx("button",{onClick:Re,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:t.jsx(jt,{size:22})}),t.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:E?"Edit Lead":"Add New Lead"}),t.jsxs("form",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),t.jsx("input",{type:"text",name:"first_name",value:T.first_name,onChange:we,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Last Name"}),t.jsx("input",{type:"text",placeholder:"Smith",name:"last_name",value:T.last_name,onChange:we,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Company"}),t.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:T.company_name,onChange:we,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Title"}),t.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:T.title,onChange:we,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),t.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:T.department,onChange:we,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Email"}),t.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:T.email,onChange:we,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),t.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[t.jsx("select",{name:"work_ccode",value:T.work_ccode,onChange:we,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:Uw.map(Q=>t.jsx("option",{value:Q.code,children:Q.code},Q.id))}),t.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:T.work_phone,onChange:we,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),t.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[t.jsx("select",{name:"m1_ccode",value:T.m1_ccode,onChange:we,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:Uw.map(Q=>t.jsx("option",{value:Q.code,children:Q.code},Q.id))}),t.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:T.mobile_phone_1,onChange:we,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),t.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[t.jsx("select",{name:"m2_ccode",value:T.m2_ccode,onChange:we,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:Uw.map(Q=>t.jsx("option",{value:Q.code,children:Q.code},Q.id))}),t.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:T.mobile_phone_2,onChange:we,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),t.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),t.jsx("input",{type:"text",name:"address",value:T.address,onChange:we,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Assign To"}),t.jsx(Wde,{items:Array.isArray(l)?l:[],value:T.lead_owner??"",placeholder:"Search a user...",getLabel:Q=>`${Q.first_name} ${Q.last_name}`,onChange:Q=>{const ye=l.find(fe=>String(fe.id)===String(Q));m(ye);let P=null;ye&&ye.assigned_territory&&ye.assigned_territory.length===1&&(P=ye.assigned_territory[0].id),k(fe=>({...fe,lead_owner:Q,territory_id:P}))}})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),t.jsxs("select",{name:"territory_id",value:T.territory_id||"",onChange:we,disabled:!d||!d.assigned_territory||d.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[t.jsx("option",{value:"",disabled:!0,children:d?d.assigned_territory&&d.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),d&&d.assigned_territory&&d.assigned_territory.map(Q=>t.jsx("option",{value:Q.id,children:Q.name},Q.id))]})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),t.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:T.source,onChange:we,children:[t.jsx("option",{value:"",disabled:!0,children:"Select Source"}),t.jsx("option",{value:"Website",children:"Website"}),t.jsx("option",{value:"Referral",children:"Referral"}),t.jsx("option",{value:"Cold call",children:"Cold call"}),t.jsx("option",{value:"Event",children:"Event"}),t.jsx("option",{value:"Other",children:"Other"})]})]}),t.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),t.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:T.notes,onChange:we,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[t.jsx("button",{type:"button",onClick:Re,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:X||K,children:"Cancel"}),t.jsx("button",{type:"submit",onClick:V,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:X||K,children:X||K?"Processing...":E?"Update Lead":"Save Lead"})]})]})]})}),O&&t.jsx(Gde,{open:!0,title:O.title,message:O.message,confirmLabel:O.confirmLabel,cancelLabel:O.cancelLabel,variant:O.variant,onConfirm:pe,onCancel:z,loading:K}),a&&!r&&!E&&t.jsx(_$,{lead:a,onBack:je,fetchLeads:Me,setSelectedLead:n,onEdit:qe,onDelete:Ze})]})}function Gde({open:e,title:s,message:a,confirmLabel:n,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:c,onCancel:d}){if(!e)return null;const m=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s}),t.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),t.jsx("button",{type:"button",onClick:c,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${m}`,disabled:l,children:l?"Processing...":n})]})]})})}function Vde({icon:e,title:s,value:a,color:n="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${s}`)};return t.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[t.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${n} mr-4`,children:e?t.jsx(e,{size:22}):null}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"text-xs text-gray-500 uppercase",children:s}),t.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function Wde({items:e=[],value:s="",onChange:a,getLabel:n,placeholder:r="Search...",disabled:i=!1,maxRender:l=200}){const[c,d]=g.useState(!1),[m,f]=g.useState(""),h=g.useRef(null),y=e.find(p=>String(p.id)===String(s)),N=y?n(y):"",w=g.useMemo(()=>{const p=m.trim().toLowerCase();return(p?e.filter(C=>(n(C)||"").toLowerCase().includes(p)):e).slice(0,l)},[e,m,n,l]);return g.useEffect(()=>{const p=v=>{h.current&&!h.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]),g.useEffect(()=>{c||f("")},[c]),t.jsxs("div",{ref:h,className:"relative w-full",children:[t.jsx("input",{disabled:i,value:c?m:N,placeholder:r,onFocus:()=>!i&&d(!0),onChange:p=>{f(p.target.value),c||d(!0)},className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),c&&!i&&t.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[t.jsx("div",{className:"max-h-56 overflow-y-auto",children:w.length>0?w.map(p=>{const v=String(p.id),C=n(p),j=String(s)===v;return t.jsx("button",{type:"button",onClick:()=>{a(v),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${j?"bg-blue-50":""}`,children:C||"--"},v)}):t.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&t.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}const Ox={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},Zs=({label:e,value:s,name:a,className:n=""})=>t.jsxs("div",{className:`flex flex-col ${n}`,children:[t.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),t.jsx("input",{type:"text",name:a,defaultValue:s,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),Yde=({data:e})=>t.jsxs("div",{className:"space-y-6 p-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsx(Zs,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),t.jsx(Zs,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),t.jsx(Zs,{label:"Industry",name:"industry",value:e.industry})]}),t.jsx(Zs,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),t.jsx(Zs,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),Qde=({data:e})=>t.jsxs("div",{className:"space-y-6 p-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(Zs,{label:"First Name",name:"firstName",value:e.firstName}),t.jsx(Zs,{label:"Last Name",name:"lastName",value:e.lastName}),t.jsx(Zs,{label:"Department",name:"department",value:e.department}),t.jsx(Zs,{label:"Title",name:"title",value:e.title}),t.jsx(Zs,{label:"Work Phone",name:"workPhone",value:e.workPhone}),t.jsx(Zs,{label:"Email",name:"email",value:e.email}),t.jsx(Zs,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),t.jsx(Zs,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),qde=({data:e})=>t.jsxs("div",{className:"space-y-6 p-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(Zs,{label:"Deal Name",name:"dealName",value:e.dealName}),t.jsxs("div",{className:"flex",children:[t.jsx(Zs,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),t.jsx("div",{className:"flex flex-col justify-end ml-1",children:t.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),t.jsx(Zs,{label:"Stage",name:"stage",value:e.stage}),t.jsx(Zs,{label:"Territory",name:"territory",value:e.territory})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(Zs,{label:"Description",name:"description",value:e.description}),t.jsx(Zs,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function Xde({isOpen:e,onClose:s}){const[a,n]=g.useState(1),r=3;if(!e)return null;const i=()=>{a<r?n(a+1):(s(),n(1))},l=()=>{a>1&&n(a-1)},c=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],d=()=>{switch(a){case 1:return t.jsx(Yde,{data:Ox});case 2:return t.jsx(Qde,{data:Ox});case 3:return t.jsx(qde,{data:Ox});default:return null}};return t.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[t.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),t.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:Ox.accountName})]}),t.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition",children:t.jsx($y,{className:"w-6 h-6"})})]}),t.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:c.map(m=>t.jsx("button",{onClick:()=>n(m.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${a===m.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:m.name},m.id))}),t.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:d()}),t.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[a>1&&t.jsx("button",{onClick:l,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),a<r?t.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):t.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}function T$({selectedDeal:e,show:s,onClose:a,activeTab:n,setActiveTab:r,onEdit:i,onDelete:l,onStatusUpdate:c}){const d=it(),[m]=Aa(),f=m.get("id"),[h,y]=g.useState(e||null),[N,w]=g.useState(n||"Overview"),{user:p}=zt();g.useEffect(()=>{console.log("AdminDealsInformation mounted",h),console.log("User:",p)},[h,p]);const v=n!==void 0?n:N;if(g.useEffect(()=>{(async()=>{if(f&&!e)try{console.log("Fetching deal from route, ID:",f);const k=(await se.get("/deals/admin/fetch-all")).data||[];console.log("All deals fetched:",k.length);const E=k.find(A=>A.id===parseInt(f));if(console.log("Found deal:",E),E){console.log("Deal data structure:",{id:E.id,name:E.name,amount:E.amount,stage:E.stage,account:E.account,contact:E.contact,assigned_deals:E.assigned_deals,deal_creator:E.deal_creator,allKeys:Object.keys(E)});const A={...E,amount:typeof E.amount=="number"?E.amount:parseFloat(E.amount||0),probability:E.probability||0};y(A)}else console.warn("Deal not found with ID:",f)}catch(T){console.error("Error fetching deal:",T)}})()},[f,e]),!h&&!f||f&&!h)return null;const C=_=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[_]||"bg-gray-100 text-gray-700";function j(_){return _?new Date(_).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[t.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:t.jsxs("div",{className:"flex items-start justify-between w-full",children:[t.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),t.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:t.jsx("button",{onClick:()=>{a?a():d(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:t.jsx(jt,{size:25})})})]})}),t.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:t.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[t.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:h.name}),t.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${C(h.stage)}`,children:h.stage})]}),t.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",j(h.created_at)]})]}),t.jsxs("div",{className:"flex flex-col items-end gap-2",children:[t.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[" ",h.amount?h.amount.toLocaleString():"0"]}),t.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${h.probability}%`}})}),t.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",h.probability,"% Complete "]}),(h.created_by===p?.id||h.assigned_to===p?.id)&&t.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[t.jsxs("button",{type:"button",onClick:()=>{i&&i(h)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[t.jsx(hs,{className:"mr-1 sm:mr-2",size:16}),t.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),t.jsxs("button",{type:"button",onClick:()=>{l&&l(h)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[t.jsx(Nt,{className:"mr-1 sm:mr-2",size:16}),t.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]})}),t.jsx("div",{className:"border-b border-gray-200 my-5"}),t.jsxs("div",{className:"p-6 lg:p-4",children:[t.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(_=>t.jsx("button",{onClick:()=>{r?r(_):w(_)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${v===_?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:_},_))}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[t.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[v==="Overview"&&t.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),t.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[t.jsx("strong",{children:"Description:"})," ",h.description]}),t.jsx("div",{className:"h-px bg-gray-200 w-full"}),t.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[t.jsx("strong",{children:"Expected Close Date:"})," ",h.close_date]}),t.jsx("div",{className:"h-px bg-gray-200 w-full"}),t.jsxs("div",{className:"mt-4 py-3 w-full",children:[t.jsxs("div",{className:"relative flex flex-col w-full",children:[t.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const _=(h?.stage||"PROSPECTING").toUpperCase(),k=(A=>A==="PROSPECTING"?0:A==="QUALIFICATION"?1:A==="PROPOSAL"?2:A==="NEGOTIATION"?3:A==="CLOSED_WON"||A==="CLOSED_LOST"?4:-1)(_);return[0,1,2,3,4].map(A=>k===A?"orange":k>A?"green":"gray").map((A,U)=>t.jsxs(at.Fragment,{children:[t.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${A==="green"?"bg-green-500 border-green-500":A==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),U<4&&t.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},U))})()}),t.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((_,T)=>t.jsx("span",{className:"text-center flex-1 break-words",children:_},T))})]}),t.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:h.stage})]})]}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),t.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[t.jsxs("p",{children:[t.jsx("strong",{children:"Account:"})," ",h.account?.name]}),t.jsx("div",{className:"h-px bg-gray-200 w-full"}),t.jsxs("p",{children:[t.jsx("strong",{children:"Primary Contact:"})," ",h.contact?.first_name," ",h.contact?.last_name]}),t.jsx("div",{className:"h-px bg-gray-200 w-full"}),t.jsxs("p",{children:[t.jsx("strong",{children:"Phone:"})," ",h.contact?.work_phone]}),t.jsx("div",{className:"h-px bg-gray-200 w-full"}),t.jsxs("p",{children:[t.jsx("strong",{children:"Email:"})," ",h.contact?.email]}),t.jsx("div",{className:"h-px bg-gray-200 w-full"}),t.jsxs("p",{children:[t.jsx("strong",{children:"Assigned To:"})," ",h.assigned_deals?.first_name," ",h.assigned_deals?.last_name]})]})]})]}),v==="Notes"&&t.jsxs("div",{className:"mt-4 w-full",children:[t.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:t.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[t.jsx("div",{className:"flex items-start justify-between",children:t.jsx("div",{children:t.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),t.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:h.description||"No notes available."})]})]}),v==="Activities"&&t.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:ft,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:dt,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((_,T)=>t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[t.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[t.jsx("div",{className:"text-gray-600 mt-1",children:t.jsx(_.icon,{size:24})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"font-medium text-gray-900 break-words",children:_.title}),t.jsx("p",{className:"text-sm text-gray-500 break-words",children:_.desc}),t.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[t.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),t.jsx("p",{className:"text-sm text-gray-700 break-words",children:_.user})]})]})]}),t.jsx("p",{className:"text-sm text-gray-500 break-words",children:_.date})]},T))]}),v==="Edit"&&t.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[t.jsxs("label",{className:"block mb-3 break-words",children:[t.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),t.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:h.name})]}),t.jsxs("label",{className:"block mb-3 break-words",children:[t.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),t.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:h.description})]}),t.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),t.jsx("div",{className:"w-full lg:w-auto",children:t.jsx(Ry,{selectedDeal:h,onStatusUpdate:c,onClose:a})})]})]})]})})}const Fm=10;function Kde(){g.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const[e,s]=g.useState(""),[a,n]=g.useState("Filter by Stage"),[r,i]=g.useState("Filter by Owner"),[l,c]=g.useState(null),[d,m]=g.useState("Overview"),[f,h]=g.useState(!1),[y,N]=g.useState(null),[w,p]=g.useState(!1),[v,C]=g.useState(1),[j,_]=g.useState(!1),[T,k]=g.useState(null),[E,A]=g.useState(!1),[U,B]=g.useState(!1),[X,$]=g.useState(null),[O,G]=g.useState([]),[K,ae]=g.useState([]),[R,Z]=g.useState([]),[te,ge]=g.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),le={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST"},W=M=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"})[M]||M||"--",ee=M=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[M]||"bg-gray-100 text-gray-700",J=g.useMemo(()=>{const M=e.trim().toLowerCase(),xe=a.trim(),ne=r.trim();return(y??[]).filter(Te=>{const Q=[Te?.name,Te?.description,Te?.account?.name,Te?.contact?.first_name,Te?.contact?.last_name,Te?.assigned_deals?.first_name,Te?.assigned_deals?.last_name],ye=M===""||Q.some(me=>me==null||me===""?!1:me.toString().toLowerCase().includes(M)),P=xe==="Filter by Stage"||xe===""||Te.stage===le[xe]||Te.stage===xe,fe=ne==="Filter by Owner"||ne===""||`${Te.assigned_deals?.first_name||""} ${Te.assigned_deals?.last_name||""}`.trim().toLowerCase()===ne.toLowerCase();return ye&&P&&fe})},[y,e,a,r]),he=Math.max(1,Math.ceil(J.length/Fm)||1);g.useEffect(()=>{C(1)},[e,a,r]),g.useEffect(()=>{C(M=>{const xe=Math.max(1,Math.ceil(J.length/Fm)||1);return M>xe?xe:M})},[J.length]);const be=g.useMemo(()=>{const M=(v-1)*Fm;return J.slice(M,M+Fm)},[J,v]),Le=()=>C(M=>Math.max(M-1,1)),Me=()=>C(M=>Math.min(M+1,he)),ke=()=>{ge({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),B(!1),$(null),h(!0)},F=async()=>{p(!0);try{const M=await se.get("/deals/admin/fetch-all"),ne=[...Array.isArray(M.data)?M.data:[]].sort((Te,Q)=>{const ye=Te?.created_at?new Date(Te.created_at).getTime():0;return(Q?.created_at?new Date(Q.created_at).getTime():0)-ye});N(ne)}catch(M){M.response&&M.response.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch deals. Please try again later."),console.error(M)}finally{p(!1)}},ve=async()=>{try{const M=await se.get("/accounts/admin/fetch-all");G(Array.isArray(M.data)?M.data:[])}catch(M){console.error(M),M.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},Ce=async()=>{try{const M=await se.get("/contacts/admin/fetch-all");ae(Array.isArray(M.data)?M.data:[])}catch(M){console.error(M),M.response?.status===403&&q.warn("Unable to load contacts (permission denied).")}},D=async()=>{try{const M=await se.get("/users/all");Z(Array.isArray(M.data)?M.data:[])}catch(M){console.error(M),M.response?.status===403&&q.warn("Unable to load users (permission denied).")}};g.useEffect(()=>{F(),ve(),Ce(),D()},[]);const re=M=>{M&&(ge({id:M.id||null,name:M.name||"",account_id:M.account_id?.toString()||"",primary_contact_id:M.primary_contact_id?.toString()||"",stage:M.stage||"PROPOSAL",amount:M.amount?.toString()||"",close_date:M.close_date?new Date(M.close_date).toISOString().split("T")[0]:"",assigned_to:M.assigned_to?.toString()||"",currency:M.currency||"PHP",description:M.description||""}),B(!0),$(M.id),c(null),h(!0))},oe=async(M=!1)=>{try{const xe=await se.get("/deals/admin/fetch-all"),Te=[...Array.isArray(xe.data)?xe.data:[]].sort((Q,ye)=>{const P=Q?.created_at?new Date(Q.created_at).getTime():0;return(ye?.created_at?new Date(ye.created_at).getTime():0)-P});if(N(Te),!M&&l&&l.id){const Q=Te.find(ye=>ye.id===l.id);Q&&c({...Q})}}catch(xe){console.error("Failed to refresh deal data:",xe),await F()}},je=M=>{const xe=M.name.trim();if(!xe){q.error("Deal name is required.");return}const ne=U&&X?"update":"create",Te=xe;k({title:ne==="create"?"Confirm New Deal":"Confirm Update",message:ne==="create"?t.jsxs("span",{children:["Are you sure you want to create"," ",t.jsx("span",{className:"font-semibold",children:Te}),"?"]}):t.jsxs("span",{children:["Save changes to ",t.jsx("span",{className:"font-semibold",children:Te}),"?"]}),confirmLabel:ne==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:ne,formData:M,targetId:X||null,name:Te}})},Re=M=>{if(!M)return;const xe=M.name||"this deal";k({title:"Delete Deal",message:t.jsxs("span",{children:["Are you sure you want to permanently delete"," ",t.jsx("span",{className:"font-semibold",children:xe}),"? This action cannot be undone."]}),confirmLabel:"Delete Deal",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:M.id,name:xe}})},Ke=async()=>{if(!T?.action){k(null);return}const{action:M}=T,{type:xe,formData:ne,targetId:Te,name:Q}=M;A(!0);try{if(xe==="create"){_(!0);const ye={name:ne.name.trim(),account_id:parseInt(ne.account_id),primary_contact_id:ne.primary_contact_id?parseInt(ne.primary_contact_id):null,stage:ne.stage,amount:ne.amount?parseFloat(ne.amount):null,currency:ne.currency||"PHP",close_date:ne.close_date||null,description:ne.description||null,assigned_to:ne.assigned_to?parseInt(ne.assigned_to):null};await se.post("/deals/admin/create",ye),q.success(`Deal "${Q}" created successfully.`),h(!1),await F()}else if(xe==="update"){if(!Te)throw new Error("Missing deal identifier for update.");_(!0);const ye={};ne.name!==void 0&&(ye.name=ne.name.trim()),ne.account_id!==void 0&&ne.account_id!==""&&(ye.account_id=parseInt(ne.account_id)),ne.primary_contact_id!==void 0&&(ye.primary_contact_id=ne.primary_contact_id?parseInt(ne.primary_contact_id):null),ne.stage!==void 0&&(ye.stage=ne.stage),ne.amount!==void 0&&ne.amount!==""&&(ye.amount=parseFloat(ne.amount)),ne.currency!==void 0&&(ye.currency=ne.currency),ne.close_date!==void 0&&(ye.close_date=ne.close_date||null),ne.description!==void 0&&(ye.description=ne.description||null),ne.assigned_to!==void 0&&(ye.assigned_to=ne.assigned_to?parseInt(ne.assigned_to):null),await se.put(`/deals/admin/${Te}`,ye),q.success(`Deal "${Q}" updated successfully.`),h(!1),await F()}else if(xe==="delete"){if(!Te)throw new Error("Missing deal identifier for deletion.");await se.delete(`/deals/admin/${Te}`),q.success(`Deal "${Q}" deleted successfully.`),l?.id===Te&&c(null),await F()}}catch(ye){console.error(ye);const P=xe==="create"?"Failed to create deal. Please review the details and try again.":xe==="update"?"Failed to update deal. Please review the details and try again.":"Failed to delete deal. Please try again.",fe=ye.response?.data?.detail||P;q.error(fe)}finally{(xe==="create"||xe==="update")&&_(!1),A(!1),k(null)}},et=()=>{E||k(null)},qe=()=>{h(!1),ge({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),B(!1),$(null),_(!1)},Ze=(y??[]).filter(M=>M.stage==="PROSPECTING").length,we=(y??[]).filter(M=>M.stage==="QUALIFICATION").length,V=(y??[]).filter(M=>M.stage==="PROPOSAL").length,pe=(y??[]).filter(M=>M.stage==="NEGOTIATION").length,z=(y??[]).filter(M=>M.stage==="CLOSED_WON").length,ie=(y??[]).filter(M=>M.stage==="CLOSED_LOST").length,ue=[{title:"Prospecting",value:Ze,icon:w0,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:we,icon:ys,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:V,icon:Es,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:pe,icon:Vd,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:z,icon:As,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:ie,icon:tr,color:"text-red-600",bgColor:"bg-red-100"}];return t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[w&&t.jsx(xt,{message:"Loading deals..."}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[t.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[t.jsx(Es,{className:"mr-2 text-blue-600"}),"Deals"]}),t.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:t.jsxs("button",{onClick:ke,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[t.jsx(Lt,{className:"mr-2"})," Add Deal"]})})]}),t.jsx("div",{className:"grid grid-cols-1 p-2 sm:grid-cols-3 gap-4 mb-6 w-full break-words overflow-hidden",children:ue.map(M=>t.jsx(Jde,{...M},M.title))}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[t.jsx(yt,{size:20,className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search deals",value:e,onChange:M=>s(M.target.value),className:"focus:outline-none text-base w-full"})]}),t.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[t.jsxs("select",{value:a,onChange:M=>n(M.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[t.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),t.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),t.jsx("option",{value:"Qualification Stage",children:"Qualification"}),t.jsx("option",{value:"Proposal Stage",children:"Proposal"}),t.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),t.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),t.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"})]}),t.jsxs("select",{value:r,onChange:M=>i(M.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[t.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((y??[]).map(M=>`${M.assigned_deals?.first_name} ${M.assigned_deals?.last_name}`))].map((M,xe)=>t.jsx("option",{value:M,children:M},xe))]})]})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[t.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),t.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),t.jsx("th",{className:"py-3 px-4",children:"Account"}),t.jsx("th",{className:"py-3 px-4",children:"Contact"}),t.jsx("th",{className:"py-3 px-4",children:"Stage"}),t.jsx("th",{className:"py-3 px-4",children:"Value"}),t.jsx("th",{className:"py-3 px-4",children:"Close Date"}),t.jsx("th",{className:"py-3 px-4",children:"Owner"})]})}),t.jsx("tbody",{children:J.length>0?be.map(M=>t.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{c({...M})},children:[t.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:M.deal_id?M.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),t.jsx("td",{className:"py-3 px-4",children:t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:M.name}),t.jsx("div",{className:"text-gray-500 text-xs break-all",children:M.description||"--"})]})}),t.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:M.account?.name||"--"}),t.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:M.contact?.first_name&&M.contact?.last_name?`${M.contact.first_name} ${M.contact.last_name}`:M.contact?.first_name||M.contact?.last_name||"--"}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ee(M.stage)}`,children:W(M.stage)})}),t.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",M.amount?.toLocaleString()||"0"]}),t.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:M.close_date||"--"}),t.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:M.assigned_deals?.first_name&&M.assigned_deals?.last_name?`${M.assigned_deals.first_name} ${M.assigned_deals.last_name}`:M.assigned_deals?.first_name||M.assigned_deals?.last_name||"--"})]},M.id)):t.jsx("tr",{children:t.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No deals found."})})})]})}),t.jsx(Ct,{className:"mt-4",totalItems:J.length,pageSize:Fm,currentPage:v,onPrev:Le,onNext:Me,label:"deals"}),f&&t.jsx(eue,{onClose:qe,formData:te,setFormData:ge,isEditing:U,onSubmit:je,isSubmitting:j||E,accounts:O,contacts:K,users:R}),l&&t.jsx(T$,{selectedDeal:l,show:!!l,onClose:()=>c(null),activeTab:d,setActiveTab:m,onEdit:re,onDelete:Re,onStatusUpdate:oe}),T&&t.jsx(Zde,{open:!0,title:T.title,message:T.message,confirmLabel:T.confirmLabel,cancelLabel:T.cancelLabel,variant:T.variant,onConfirm:Ke,onCancel:et,loading:E})]})}function Zde({open:e,title:s,message:a,confirmLabel:n,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:c,onCancel:d}){if(!e)return null;const m=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s}),t.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),t.jsx("button",{type:"button",onClick:c,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${m}`,disabled:l,children:l?"Processing...":n})]})]})})}function Jde({icon:e,title:s,value:a,color:n="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${s}`)};return t.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[t.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${n} mr-4`,children:e?t.jsx(e,{size:22}):null}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"text-xs text-gray-500 uppercase",children:s}),t.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function eue({onClose:e,formData:s,setFormData:a,isEditing:n=!1,onSubmit:r,isSubmitting:i=!1,accounts:l=[],contacts:c=[],users:d=[]}){const m=h=>{h.preventDefault(),r&&r(s)},f=h=>{h.target.id==="modalBackdrop"&&e()};return t.jsx("div",{id:"modalBackdrop",onClick:f,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:h=>h.stopPropagation(),children:[t.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:t.jsx(jt,{size:22})}),t.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:n?"Edit Deal":"Create Deal"}),t.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:m,children:[t.jsx(Fw,{label:"Deal Name",name:"name",value:s.name,onChange:h=>a({...s,name:h.target.value}),placeholder:"Enter deal name",required:!0,disabled:i,className:"md:col-span-2"}),t.jsx(Bm,{label:"Account",name:"account_id",value:s.account_id||"",onChange:h=>a({...s,account_id:h.target.value}),options:[{value:"",label:"Select Account"},...l.map(h=>({value:h.id.toString(),label:h.name}))],required:!0,disabled:i}),t.jsx(Bm,{label:"Primary Contact",name:"primary_contact_id",value:s.primary_contact_id||"",onChange:h=>a({...s,primary_contact_id:h.target.value}),options:[{value:"",label:"Select Contact (Optional)"},...c.map(h=>({value:h.id.toString(),label:`${h.first_name} ${h.last_name}`.trim()||h.email}))],disabled:i}),t.jsx(Bm,{label:"Stage",name:"stage",value:s.stage,onChange:h=>a({...s,stage:h.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"}],disabled:i}),t.jsx(Fw,{label:"Amount",name:"amount",type:"number",step:"0.01",value:s.amount,onChange:h=>a({...s,amount:h.target.value}),placeholder:"0",disabled:i}),t.jsx(Bm,{label:"Currency",name:"currency",value:s.currency||"PHP",onChange:h=>a({...s,currency:h.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),t.jsx(Fw,{label:"Close Date",name:"close_date",type:"date",value:s.close_date||"",onChange:h=>a({...s,close_date:h.target.value}),disabled:i}),t.jsx(Bm,{label:"Assign To",name:"assigned_to",value:s.assigned_to||"",onChange:h=>a({...s,assigned_to:h.target.value}),options:[{value:"",label:"Assign To (Optional)"},...d.map(h=>({value:h.id.toString(),label:`${h.first_name} ${h.last_name}`.trim()||h.email}))],disabled:i||n,className:"md:col-span-2"}),t.jsx(tue,{label:"Description",name:"description",value:s.description,onChange:h=>a({...s,description:h.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[t.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),t.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":n?"Update Deal":"Save Deal"})]})]})]})})}function Fw({label:e,name:s,value:a,onChange:n,placeholder:r,type:i="text",required:l=!1,disabled:c=!1,className:d=""}){return t.jsxs("div",{className:d,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("input",{type:i,name:s,value:a??"",onChange:n,placeholder:r,required:l,disabled:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]})}function Bm({label:e,name:s,value:a,onChange:n,options:r,required:i=!1,disabled:l=!1,className:c=""}){return t.jsxs("div",{className:c,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("select",{name:s,value:a??"",onChange:n,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(d=>t.jsx("option",{value:d.value,children:d.label},d.value))})]})}function tue({label:e,name:s,value:a,onChange:n,placeholder:r,required:i=!1,disabled:l=!1,className:c="",rows:d=3}){return t.jsxs("div",{className:c,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("textarea",{name:s,value:a??"",onChange:n,placeholder:r,required:i,disabled:l,rows:d,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function sue({selectedDeal:e,onStatusUpdate:s,onClose:a}){const[n,r]=g.useState(e?.stage||""),[i,l]=g.useState(!1),c=it(),{user:d}=zt();g.useEffect(()=>{console.log("AdminDealsInformation mounted sahdksd",e),console.log("User sadad:",d)},[e,d]);const m=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"}];g.useEffect(()=>{e?.stage&&r(e.stage)},[e]);const f=async()=>{if(!e||!e.id){q.error("No deal selected");return}if(!n||n===e.stage){q.info("Please select a different stage");return}const h=e.id;l(!0);try{await se.put(`/deals/admin/${h}`,{stage:n}),a&&a(),s&&setTimeout(async()=>{await s(!0)},100),setTimeout(()=>{q.success("Deal status updated successfully")},300)}catch(y){console.error(y);const N=y.response?.data?.detail||"Failed to update deal status";q.error(N)}finally{l(!1)}};return e?t.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),t.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[t.jsxs("button",{onClick:()=>c("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Deal"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),t.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const h=encodeURIComponent(e.contact.email),y=encodeURIComponent(""),N=encodeURIComponent(""),w=`https://mail.google.com/mail/?view=cm&fs=1&to=${h}&su=${y}&body=${N}`;window.open(w,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(js,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),t.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>c("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Deal"}}}),children:[t.jsx(dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),t.jsxs("button",{onClick:()=>c("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Deal"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ts,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),t.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:n,onChange:h=>r(h.target.value),disabled:i||e.created_by!==d?.id&&e.assigned_to!==d?.id,children:m.map(h=>t.jsx("option",{value:h.value,children:h.label},h.value))}),(e.created_by===d?.id||e.assigned_to===d?.id)&&t.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:f,disabled:i||!n||n===e.stage,children:i?"Updating...":"Update"})]})]}):null}const Hm=10,Bw=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],Hw={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:""},mr=e=>{if(!e)return"Draft";const s=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[s]||"Draft"},Gw=e=>e?e.toString().toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()):"--",aue=e=>{switch(mr(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},nue=e=>{switch(mr(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},Ix=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",Gm=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",rue=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const s=new Date(e);if(isNaN(s.getTime()))return"";const a=s.getFullYear(),n=String(s.getMonth()+1).padStart(2,"0"),r=String(s.getDate()).padStart(2,"0");return`${a}-${n}-${r}`}catch{return""}},Vw=(e,s)=>{if(!e||s==null||s==="")return"";const a=Number(s);if(Number.isNaN(a))return"";const n=new Date(e);return isNaN(n.getTime())?"":(n.setDate(n.getDate()+a),n.toISOString().slice(0,10))},s0=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},iue=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const n of e){const r=localStorage.getItem(n);if(r)try{const i=JSON.parse(r),l=s0(i);if(l)return l}catch{}}const s=localStorage.getItem("user_id"),a=s0(s);return a||null},lue=e=>{if(!e)return"";const a=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(n=>n!=null&&String(n).trim()!=="");return a?String(a):""},oue=e=>{if(!e)return"";const a=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(n=>n!=null&&String(n).trim()!=="");return a?String(a):""};function cue(){const e=it();g.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[s,a]=g.useState([]),[n,r]=g.useState(!1),[i,l]=g.useState([]),[c,d]=g.useState([]),[m,f]=g.useState([]),[h,y]=g.useState([]),[N,w]=g.useState(null),[p,v]=g.useState(null),[C,j]=g.useState(!1),[_,T]=g.useState(!1),[k,E]=g.useState(!1),[A,U]=g.useState(null),[B,X]=g.useState(!1),[$,O]=g.useState(null),[G,K]=g.useState(Hw),[ae,R]=g.useState(""),[Z,te]=g.useState("Filter by Status"),[ge,le]=g.useState(null),[W,ee]=g.useState(1),[J,he]=g.useState("Overview"),[be,Le]=g.useState("Draft"),[Me,ke]=g.useState(null);g.useEffect(()=>{async function H(){try{const de=await se.get("/auth/me");ke(de.data)}catch(de){console.error(de)}}H()},[]),g.useEffect(()=>{let H=!0;return(async()=>{const _e=iue();if(_e&&H){w(_e);return}try{const Ae=await se.get("/auth/me"),He=s0(Ae?.data);if(He&&H){w(He);return}}catch{}try{const Ae=await se.get("/users/me"),He=s0(Ae?.data);if(He&&H){w(He);return}}catch{}H&&w(null)})(),()=>{H=!1}},[]);const F=g.useCallback(H=>H&&c.find(_e=>String(_e.id)===String(H))?.name||"",[c]),ve=g.useCallback(H=>{if(!H)return"";const de=m.find(_e=>String(_e.id)===String(H));return de?`${de.first_name} ${de.last_name}`.trim():""},[m]),Ce=g.useCallback(H=>{if(!H)return"--";const de=i.find(_e=>String(_e.id)===String(H));return de?.deal_name||de?.name||`Deal #${H}`},[i]),D=g.useCallback(H=>{const de=i.find(He=>String(He.id)===String(H)),_e=lue(de);let Ae=oue(de);if(!Ae&&_e){const He=m.filter(st=>String(st.account_id||"")===String(_e));if(He.length>0){const st=[...He].sort((bt,ss)=>{const cs=`${bt.first_name||""} ${bt.last_name||""}`.trim().toLowerCase(),wr=`${ss.first_name||""} ${ss.last_name||""}`.trim().toLowerCase();return cs.localeCompare(wr)});Ae=String(st[0].id)}}if(_e&&Ae){const He=m.find(st=>String(st.id)===String(Ae));He?.account_id&&String(He.account_id)!==String(_e)&&(Ae="")}return{accountId:_e||"",contactId:Ae||""}},[i,m]),re=g.useCallback(H=>{if(!H)return"--";if(H.deal?.deal_name)return H.deal.deal_name;if(H.deal?.name)return H.deal.name;const de=H.deal_id||H.deal?.id;return de?Ce(de):"--"},[Ce]),oe=g.useCallback(H=>{if(!H)return"--";if(H.account?.name)return H.account.name;let de=H.account_id||H.account?.id;if(!de){const _e=H.deal_id||H.deal?.id;_e&&(de=D(_e).accountId)}return de?F(de)||`Account #${de}`:"--"},[D,F]),je=g.useCallback(H=>{if(!H)return"--";if(H.contact?.first_name||H.contact?.last_name)return`${H.contact?.first_name||""} ${H.contact?.last_name||""}`.trim()||"--";let de=H.contact_id||H.contact?.id;if(!de){const Ae=H.deal_id||H.deal?.id;Ae&&(de=D(Ae).contactId)}return(de?ve(de):"")||(de?`Contact #${de}`:"--")},[D,ve]),Re=g.useCallback(async(H=null)=>{r(!0);try{const de=await se.get("/quotes/admin/fetch-all"),Ae=[...Array.isArray(de.data)?de.data:[]].sort((He,st)=>{const bt=He?.created_at||He?.updated_at||0,ss=st?.created_at||st?.updated_at||0;return new Date(ss)-new Date(bt)});if(a(Ae),H){const He=Ae.find(st=>st.id===H);v(He||null)}}catch(de){console.error(de),a([]),de.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch quotes. Please try again later.")}finally{r(!1)}},[]),Ke=g.useCallback(async()=>{try{const H=await se.get("/deals/admin/fetch-all");l(Array.isArray(H.data)?H.data:[])}catch(H){console.error(H),H.response?.status===403&&q.warn("Unable to load deals (permission denied).")}},[]),et=g.useCallback(async()=>{try{const H=await se.get("/accounts/admin/fetch-all");d(Array.isArray(H.data)?H.data:[])}catch(H){console.error(H),H.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},[]),qe=g.useCallback(async()=>{try{const H=await se.get("/contacts/admin/fetch-all");f(Array.isArray(H.data)?H.data:[])}catch(H){console.error(H),H.response?.status===403&&q.warn("Unable to load contacts (permission denied).")}},[]),Ze=g.useCallback(async()=>{try{const H=await se.get("/users/all");y(Array.isArray(H.data)?H.data:[])}catch(H){console.error(H),H.response?.status===403&&q.warn("Unable to load users (permission denied).")}},[]);g.useEffect(()=>{Re(),Ke(),et(),qe(),Ze()},[Re,Ke,et,qe,Ze]);const we=g.useMemo(()=>{const H=ae.trim().toLowerCase(),de=Z.trim();return s.filter(_e=>{const Ae=re(_e),He=oe(_e),st=je(_e),bt=Vw(_e.presented_date,_e.validity_days),ss=[_e.quote_id,Ae,He,st,_e.total_amount?.toString(),_e.validity_days?.toString(),_e.presented_date?Gm(_e.presented_date):"",bt?Gm(bt):"",_e.assigned_user?.first_name,_e.assigned_user?.last_name,_e.creator?.first_name,_e.creator?.last_name,_e.status,_e.notes,Ix(_e.created_at),Ix(_e.updated_at)],cs=H===""||ss.some(ba=>ba==null?!1:ba.toString().toLowerCase().includes(H)),wr=de==="Filter by Status"||mr(_e.status)===de;return cs&&wr})},[s,ae,Z,re,oe,je]),V=Math.max(1,Math.ceil(we.length/Hm)||1);g.useEffect(()=>ee(1),[ae,Z]),g.useEffect(()=>{ee(H=>{const de=Math.max(1,Math.ceil(we.length/Hm)||1);return H>de?de:H})},[we.length]);const pe=g.useMemo(()=>{const H=(W-1)*Hm;return we.slice(H,H+Hm)},[we,W]),z=()=>ee(H=>Math.max(H-1,1)),ie=()=>ee(H=>Math.min(H+1,V)),ue=H=>{v(H),he("Overview"),Le(mr(H?.status)||"Draft")},M=()=>{v(null),he("Overview")},xe=H=>{H.target.id==="quoteModalBackdrop"&&!B&&M()},ne=g.useCallback(()=>{j(!1),T(!1),O(null),K(Hw),E(!1)},[]),Te=H=>{H.target.id==="modalBackdrop"&&!k&&!B&&ne()},Q=H=>{const{name:de,value:_e}=H.target;if(de==="deal_id"){const{accountId:Ae,contactId:He}=D(_e);K(st=>({...st,deal_id:_e,account_id:Ae,contact_id:He}));return}K(Ae=>({...Ae,[de]:_e}))},ye=()=>{K(Hw),T(!1),O(null),j(!0)},P=H=>{if(!H)return;v(null);const de=H.deal?.id?String(H.deal.id):H.deal_id?String(H.deal_id):"",_e=de?D(de):{accountId:"",contactId:""},Ae=H.account?.id?String(H.account.id):H.account_id?String(H.account_id):_e.accountId,He=H.contact?.id?String(H.contact.id):H.contact_id?String(H.contact_id):_e.contactId,st=H.assigned_user?.id?String(H.assigned_user.id):H.assigned_to?String(H.assigned_to):"";K({deal_id:de,account_id:Ae||"",contact_id:He||"",total_amount:H.total_amount?.toString()||"",presented_date:rue(H.presented_date),validity_days:H.validity_days!==null&&H.validity_days!==void 0?String(H.validity_days):"",status:mr(H.status)||"Draft",assigned_to:st,notes:H.notes||""}),T(!0),O(H.id),j(!0)},fe=H=>{if(!H)return;const de=H.quote_id||"this quote";U({title:"Delete Quote",message:t.jsxs("span",{children:["Are you sure you want to permanently delete"," ",t.jsx("span",{className:"font-semibold",children:de}),"? This action cannot be undone."]}),confirmLabel:"Delete Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:H.id,name:de}})},me=H=>{if(H.preventDefault(),!N){q.error("Unable to determine current user. Please log in again.");return}if(!G.deal_id){q.error("Deal is required.");return}if(!G.total_amount||Number(G.total_amount)<=0){q.error("Total amount must be greater than 0.");return}if(G.validity_days!==""&&Number(G.validity_days)<0){q.error("Validity days must be 0 or higher.");return}const de=D(G.deal_id),_e={deal_id:Number(G.deal_id),account_id:de.accountId?Number(de.accountId):null,contact_id:de.contactId?Number(de.contactId):null,total_amount:Number(G.total_amount),presented_date:G.presented_date||null,validity_days:G.validity_days===""?null:Number(G.validity_days),status:G.status||"Draft",assigned_to:G.assigned_to?Number(G.assigned_to):null,notes:G.notes?.trim()||null},Ae=_&&$?"update":"create",He=Ce(G.deal_id),st=Ae==="create"?{..._e,created_by_id:Number(N)}:_e;U({title:Ae==="create"?"Confirm New Quote":"Confirm Update",message:Ae==="create"?t.jsxs("span",{children:["Are you sure you want to create a quote for"," ",t.jsx("span",{className:"font-semibold",children:He}),"?"]}):t.jsxs("span",{children:["Save changes to"," ",t.jsx("span",{className:"font-semibold",children:He}),"?"]}),confirmLabel:Ae==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:Ae,payload:st,targetId:$||null,name:He}})},Se=async()=>{if(!A?.action){U(null);return}const{action:H}=A,{type:de,payload:_e,targetId:Ae,name:He}=H;X(!0);try{if(de==="create")E(!0),await se.post("/quotes/admin",_e),q.success("Quote created successfully."),ne(),await Re();else if(de==="update"){if(!Ae)throw new Error("Missing quote identifier for update.");E(!0),await se.put(`/quotes/admin/${Ae}`,_e),q.success("Quote updated successfully."),ne(),await Re(),p?.id===Ae&&v(null)}else if(de==="delete"){if(!Ae)throw new Error("Missing quote identifier for deletion.");const st=p?.id;le(Ae),await se.delete(`/quotes/admin/${Ae}`),q.success(`Quote "${He}" deleted successfully.`),await Re(st&&st!==Ae?st:null),st===Ae&&v(null)}}catch(st){console.error(st);const bt=de==="create"?"Failed to create quote. Please review the details and try again.":de==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";q.error(bt),(de==="create"||de==="update")&&E(!1),de==="delete"&&le(null)}finally{(de==="create"||de==="update")&&E(!1),de==="delete"&&le(null),X(!1),U(null)}},$e=()=>{B||U(null)},We=g.useCallback((H,de)=>{const _e=H?.deal_id??H?.deal?.id??"",Ae=_e?Number(_e):null,He=Ae?D(String(Ae)):{accountId:"",contactId:""},st=H?.account_id??H?.account?.id??He.accountId??null,bt=H?.contact_id??H?.contact?.id??He.contactId??null,ss=H?.total_amount??0,cs=H?.assigned_to??H?.assigned_user?.id??null;return{deal_id:Ae,account_id:st!=null&&String(st).trim()!==""?Number(st):null,contact_id:bt!=null&&String(bt).trim()!==""?Number(bt):null,total_amount:Number(ss),presented_date:H?.presented_date||null,validity_days:H?.validity_days===""||H?.validity_days===void 0||H?.validity_days===null?null:Number(H.validity_days),status:de,assigned_to:cs!=null&&String(cs).trim()!==""?Number(cs):null,notes:H?.notes?.trim()||null}},[D]),rt=g.useCallback(async()=>{if(!p?.id)return;const H=mr(be),de=[H,H.toLowerCase()],_e=async Ae=>se.patch(`/quotes/admin/${p.id}/status`,{status:Ae},{headers:{"Content-Type":"application/json"}});try{let Ae=!1;for(const He of de)try{await _e(He),Ae=!0;break}catch(st){if(st?.response?.status===422)continue;throw st}if(!Ae){const He=We(p,H);if(!He.deal_id){q.error("Cannot update status: missing deal_id on selected quote.");return}if(!He.total_amount||He.total_amount<=0){q.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await se.put(`/quotes/admin/${p.id}`,He)}q.success(`Quote status updated to ${H}`),v(null),he("Overview"),await Re()}catch(Ae){console.error(Ae);const He=Ae?.response?.data?.message||(Ae?.response?.data?.errors?Object.values(Ae.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";q.error(He)}},[p,be,Re,We]),wt=[{label:"Filter by Status",value:"Filter by Status"},...Bw.map(H=>({label:H.label,value:H.value}))],Ut=A?.action?.type==="delete"?A.action.targetId:null,ze=p&&(ge===p.id||Ut===p.id),Pe=p&&ge===p.id,lt=p?t.jsx("div",{id:"quoteModalBackdrop",onClick:xe,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:H=>H.stopPropagation(),children:[t.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:t.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[t.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),t.jsx("button",{onClick:M,className:"text-gray-500 hover:text-white transition cursor-pointer",children:t.jsx(es,{size:25})})]})}),t.jsxs("div",{className:"p-6 lg:p-4",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[t.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:re(p)}),t.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${nue(p.status)}`,children:Gw(p.status)})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>P(p),disabled:B||A?.action?.type==="update"&&A.action.targetId===p.id,children:[t.jsx(ys,{className:"mr-2"}),"Edit"]}),t.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>fe(p),disabled:!!ze,children:Pe?"Deleting...":t.jsxs(t.Fragment,{children:[t.jsx(Nt,{className:"mr-2"}),"Delete"]})})]})]}),t.jsx("div",{className:"border-b border-gray-200 my-5"}),t.jsxs("div",{className:"p-1 lg:p-4",children:[t.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(H=>t.jsx("button",{onClick:()=>he(H),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${J===H?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:H},H))}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[t.jsxs("div",{className:"lg:col-span-3",children:[J==="Overview"&&t.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Quote ID:"}),t.jsx("p",{children:p.quote_id||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Deal:"}),t.jsx("p",{children:re(p)||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Account:"}),t.jsx("p",{children:oe(p)||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Contact:"}),t.jsx("p",{children:je(p)||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Total Amount:"}),t.jsx("p",{children:p.total_amount?`${Number(p.total_amount).toLocaleString()}`:"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Presented Date:"}),t.jsx("p",{children:Gm(p.presented_date)||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Validity Days:"}),t.jsx("p",{children:p.validity_days!==null&&p.validity_days!==void 0?p.validity_days:"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),t.jsx("p",{children:Gm(Vw(p.presented_date,p.validity_days))||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Status:"}),t.jsx("p",{children:Gw(p.status)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Assigned To:"}),t.jsx("p",{children:p.assigned_user?`${p.assigned_user.first_name} ${p.assigned_user.last_name}`:"Unassigned"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Created By:"}),t.jsx("p",{children:p.creator?`${p.creator.first_name} ${p.creator.last_name}`:"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Created At:"}),t.jsx("p",{children:Ix(p.created_at)||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Last Updated:"}),t.jsx("p",{children:Ix(p.updated_at)||"N/A"})]})]})}),J==="Notes"&&t.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[t.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),t.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:p.notes||"No notes available."})]})]}),t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),t.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[t.jsxs("button",{onClick:()=>e("/manager/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),t.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Quotes"}}}),children:[t.jsx(dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),t.jsxs("button",{onClick:()=>e("/manager/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ts,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),t.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:be||mr(p.status)||"Draft",onChange:H=>Le(H.target.value),children:Bw.map(H=>t.jsx("option",{value:H.value,children:H.label},H.value))}),t.jsx("button",{onClick:rt,disabled:mr(be)===mr(p.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${mr(be)===mr(p.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,ot=t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[n&&t.jsx(xt,{message:"Loading quotes..."}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[t.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[t.jsx(en,{className:"mr-2 text-blue-600"})," Quotes"]}),t.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:t.jsxs("button",{onClick:ye,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[t.jsx(Lt,{className:"mr-2"})," Add Quote"]})})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[t.jsx(yt,{size:20,className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search quotes",value:ae,onChange:H=>R(H.target.value),className:"focus:outline-none text-base w-full"})]}),t.jsx("div",{className:"w-full lg:w-1/4",children:t.jsx("select",{value:Z,onChange:H=>te(H.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:wt.map(H=>t.jsx("option",{value:H.value,children:H.label},H.value))})})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[t.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),t.jsx("th",{className:"py-3 px-4",children:"Deal"}),t.jsx("th",{className:"py-3 px-4",children:"Account"}),t.jsx("th",{className:"py-3 px-4",children:"Contact"}),t.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),t.jsx("th",{className:"py-3 px-4",children:"Status"}),t.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),t.jsx("th",{className:"py-3 px-4",children:"Expiry Date"})]})}),t.jsx("tbody",{children:n?t.jsx("tr",{children:t.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"Loading quotes..."})}):we.length>0?pe.map(H=>{const de=Vw(H.presented_date,H.validity_days);return t.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>ue(H),children:[t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:H.quote_id||"--"})}),t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsx("div",{className:"break-words",children:re(H)||"--"})}),t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsx("div",{className:"text-sm text-gray-700 break-words",children:oe(H)||"--"})}),t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsx("div",{className:"break-words",children:je(H)||"--"})}),t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsx("div",{className:"text-gray-700",children:H.total_amount?`${Number(H.total_amount).toLocaleString()}`:"--"})}),t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${aue(H.status)}`,children:Gw(H.status)})}),t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsx("div",{children:H.assigned_user?`${H.assigned_user.first_name} ${H.assigned_user.last_name}`:"Unassigned"})}),t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsx("div",{className:"text-gray-500 text-xs",children:Gm(de)||"--"})})]},H.id)}):t.jsx("tr",{children:t.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No quotes found."})})})]})}),t.jsx(Ct,{className:"mt-4",totalItems:we.length,pageSize:Hm,currentPage:W,onPrev:z,onNext:ie,label:"quotes"})]}),I=C?t.jsx("div",{id:"modalBackdrop",onClick:Te,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:H=>H.stopPropagation(),children:[t.jsx("button",{onClick:ne,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:k||B,children:t.jsx(jt,{size:22})}),t.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:_?"Edit Quote":"Add New Quote"}),t.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:me,children:[t.jsx(Yw,{label:"Deal",name:"deal_id",value:G.deal_id,onChange:Q,options:[{value:"",label:"Select deal"},...i.map(H=>({value:String(H.id),label:H.deal_name||H.name||`Deal #${H.id}`}))],required:!0,disabled:k||i.length===0,className:"md:col-span-2"}),t.jsx(Kk,{label:"Account",value:F(G.account_id)||(G.account_id?`Account #${G.account_id}`:""),disabled:!0}),t.jsx(Kk,{label:"Contact",value:ve(G.contact_id)||(G.contact_id?`Contact #${G.contact_id}`:""),disabled:!0}),t.jsx(Ww,{label:"Total Amount",name:"total_amount",type:"number",value:G.total_amount,onChange:Q,placeholder:"0.00",required:!0,disabled:k}),t.jsx(Ww,{label:"Presented Date",name:"presented_date",type:"date",value:G.presented_date,onChange:Q,disabled:k}),t.jsx(Ww,{label:"Validity Days",name:"validity_days",type:"number",value:G.validity_days,onChange:Q,placeholder:"30",disabled:k}),t.jsx(Yw,{label:"Assigned To",name:"assigned_to",value:G.assigned_to,onChange:Q,options:[{value:"",label:"Select assignee"},...h.filter(H=>H.id===Me.id||H.role==="Manager"||H.role==="Sales").map(H=>({value:String(H.id),label:`${H.first_name} ${H.last_name} (${H.role})`}))],disabled:k||h.length===0}),t.jsx(Yw,{label:"Status",name:"status",value:G.status,onChange:Q,options:Bw,required:!0,disabled:k,className:"md:col-span-2"}),t.jsx(due,{label:"Notes",name:"notes",value:G.notes,onChange:Q,placeholder:"Additional details...",rows:3,disabled:k,className:"md:col-span-2"}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[t.jsx("button",{type:"button",onClick:ne,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:k||B,children:"Cancel"}),t.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:k||B,children:k?"Saving...":_?"Update Quote":"Save Quote"})]})]})]})}):null,Ne=A?t.jsx(uue,{open:!0,title:A.title,message:A.message,confirmLabel:A.confirmLabel,cancelLabel:A.cancelLabel,variant:A.variant,onConfirm:Se,onCancel:$e,loading:B}):null;return t.jsxs(t.Fragment,{children:[p?lt:ot,I,Ne]})}function Ww({label:e,name:s,value:a,onChange:n,placeholder:r,type:i="text",required:l=!1,disabled:c=!1,className:d=""}){return t.jsxs("div",{className:d,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("input",{type:i,name:s,value:a??"",onChange:n,placeholder:r,required:l,disabled:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]})}function Kk({label:e,value:s,className:a="",disabled:n=!0}){return t.jsxs("div",{className:a,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("input",{type:"text",value:s??"",disabled:n,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function Yw({label:e,name:s,value:a,onChange:n,options:r,required:i=!1,disabled:l=!1,className:c=""}){const d=a!=null?String(a):"",f=r.some(h=>String(h.value)===d)?d:"";return t.jsxs("div",{className:c,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("select",{name:s,value:f,onChange:n,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(h=>t.jsx("option",{value:String(h.value??""),children:h.label},h.value??h.label))})]})}function due({label:e,name:s,value:a,onChange:n,placeholder:r,rows:i=3,disabled:l=!1,className:c=""}){return t.jsxs("div",{className:c,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("textarea",{name:s,value:a??"",onChange:n,placeholder:r,rows:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function uue({open:e,title:s,message:a,confirmLabel:n,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:c,onCancel:d}){if(!e)return null;const m=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s}),t.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),t.jsx("button",{type:"button",onClick:c,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${m}`,disabled:l,children:l?"Processing...":n})]})]})})}const $x=10,Zk={user_id:"",start_date:"",end_date:"",target_amount:""};function mue({name:e,items:s=[],value:a="",onChange:n,getLabel:r,placeholder:i="Search..."}){const[l,c]=g.useState(!1),[d,m]=g.useState(""),f=g.useRef(null),h=s.find(w=>String(w.id)===String(a)),y=h?r(h):"",N=g.useMemo(()=>{const w=d.toLowerCase();return w?s.filter(p=>r(p).toLowerCase().includes(w)):s},[s,d,r]);return g.useEffect(()=>{const w=p=>{f.current&&!f.current.contains(p.target)&&c(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),t.jsxs("div",{ref:f,className:"flex justify-center w-full",children:[t.jsx("input",{value:l?d:y,placeholder:i,onFocus:()=>c(!0),onChange:w=>{m(w.target.value),c(!0)},className:"w-full max-w-md border text-gray-500 border-gray-300 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"}),l&&t.jsx("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:N.length?N.map(w=>t.jsx("button",{type:"button",onClick:()=>{n({target:{name:e,value:String(w.id)}}),c(!1),m("")},className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-50",children:r(w)},w.id)):t.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results found"})})]})}function fue(){g.useEffect(()=>{document.title="Targets | Sari-Sari CRM"},[]);const[e,s]=g.useState([]),[a,n]=g.useState([]),[r,i]=g.useState(!1),[l,c]=g.useState(""),[d,m]=g.useState(1),[f,h]=g.useState(!1),[y,N]=g.useState(!1),[w,p]=g.useState(!1),[v,C]=g.useState(null),[j,_]=g.useState(Zk),[T,k]=g.useState(null),[E,A]=g.useState(null),[U,B]=g.useState(!1),[X,$]=g.useState(null);g.useEffect(()=>{async function J(){try{const he=await se.get("/auth/me");$(he.data)}catch(he){console.error(he)}}J()},[]);const O=g.useCallback(async()=>{i(!0);try{const J=await se.get("/targets/admin/fetch-all");s(J.data)}catch(J){console.error(J),q.error("Failed to load targets.")}finally{i(!1)}},[]),G=g.useCallback(async()=>{try{const J=await se.get("/targets/admin/get-users");console.log("Users from API:",J.data),n(J.data)}catch(J){console.error(J),q.error("Failed to load users.")}},[]);g.useEffect(()=>{O(),G()},[O,G]);const K=g.useMemo(()=>e.reduce((J,he)=>J+(Number(he.target_amount)||0),0),[e]),ae=g.useMemo(()=>{const J=l.toLowerCase();return e.filter(he=>(he.user?`${he.user.first_name} ${he.user.last_name}`.toLowerCase():"").includes(J)||he.start_date?.includes(J)||he.end_date?.includes(J))},[e,l]),R=Math.max(1,Math.ceil(ae.length/$x)),Z=g.useMemo(()=>{const J=(d-1)*$x;return ae.slice(J,J+$x)},[ae,d]),te=J=>{const{name:he,value:be}=J.target;_(Le=>({...Le,[he]:be}))},ge=()=>{_(Zk),N(!1),C(null),h(!0)},le=J=>{_({user_id:J.user?.id?String(J.user.id):"",start_date:J.start_date||"",end_date:J.end_date||"",target_amount:J.target_amount?.toString()||""}),N(!0),C(J.id),h(!0),k(null)},W=J=>{const he=J.user?`${J.user.first_name} ${J.user.last_name}`:"Unknown";A({title:"Delete Target",message:t.jsxs("span",{children:["Are you sure you want to delete the target for"," ",t.jsx("span",{className:"font-semibold",children:he}),"?"]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:async()=>{await se.delete(`/targets/admin/${J.id}`),q.success("Target deleted successfully."),O(),k(null)}})},ee=J=>{if(J.preventDefault(),!j.user_id||!j.start_date||!j.end_date||!j.target_amount){q.error("All fields are required.");return}if(new Date(j.end_date)<new Date(j.start_date)){q.error("End date must be after start date.");return}const he={user_id:Number(j.user_id),target_amount:Number(j.target_amount),start_date:j.start_date,end_date:j.end_date},be=y?"Update Target":"Create Target";A({title:be,message:"Are you sure you want to proceed?",confirmLabel:be,cancelLabel:"Cancel",variant:"primary",action:async()=>{p(!0);try{y?(await se.put(`/targets/admin/${v}`,he),q.success("Target updated successfully.")):(await se.post("/targets/admin/create",he),q.success("Target created successfully.")),h(!1),O()}catch(Le){console.error(Le),q.error("Operation failed.")}finally{p(!1)}}})};return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&t.jsx(xt,{message:"Loading targets..."}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[t.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold",children:[t.jsx(sn,{className:"mr-2 text-blue-600"})," Targets"]}),t.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:t.jsxs("button",{onClick:ge,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[t.jsx(Lt,{className:"mr-2"})," Add Target"]})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-6",children:[t.jsx(Jk,{title:"Total Targets",value:e.length}),t.jsx(Jk,{title:"Total Target Amount",value:`${K.toLocaleString()}`})]}),t.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-4/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[t.jsx(yt,{className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search targets",value:l,onChange:J=>c(J.target.value),className:"w-full outline-none"})]})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[t.jsx("thead",{className:"bg-gray-100 font-semibold text-gray-600",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4 text-left",children:"User"}),t.jsx("th",{className:"py-3 px-4 text-left",children:"Target Amount"}),t.jsx("th",{className:"py-3 px-4 text-left",children:"Start Date"}),t.jsx("th",{className:"py-3 px-4 text-left",children:"End Date"})]})}),t.jsx("tbody",{children:Z.map(J=>t.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>k(J),children:[t.jsx("td",{className:"py-3 px-4 text-left",children:J.user?`${J.user.first_name} ${J.user.last_name}`:"Unknown"}),t.jsxs("td",{className:"py-3 px-4 text-left",children:["",Number(J.target_amount).toLocaleString()]}),t.jsx("td",{className:"py-3 px-4 text-left",children:J.start_date}),t.jsx("td",{className:"py-3 px-4 text-left",children:J.end_date})]},J.id))})]})}),t.jsx(Ct,{className:"mt-4",totalItems:ae.length,pageSize:$x,currentPage:d,onPrev:()=>m(J=>Math.max(J-1,1)),onNext:()=>m(J=>Math.min(J+1,R)),label:"targets"})]}),T&&t.jsx(hue,{target:T,onClose:()=>k(null),onEdit:()=>le(T),onDelete:()=>W(T)}),f&&t.jsx(gue,{formData:j,users:a,currentUser:X,isEditing:y,isSubmitting:w,onChange:te,onClose:()=>h(!1),onSubmit:ee}),E&&t.jsx(xue,{...E,loading:U,onConfirm:async()=>{B(!0),await E.action(),B(!1),A(null)},onCancel:()=>A(null)})]})}function Jk({title:e,value:s}){return t.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200",children:[t.jsx("div",{className:"p-3 rounded-full bg-blue-100 text-blue-600 mr-4",children:t.jsx(vr,{size:22})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500 uppercase",children:e}),t.jsx("p",{className:"text-2xl font-bold",children:s})]})]})}function hue({target:e,onClose:s,onEdit:a,onDelete:n}){return t.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",onClick:s,children:t.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:r=>r.stopPropagation(),children:[t.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-4 rounded-t-xl",children:[t.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Target"}),t.jsx("button",{onClick:s,className:"text-gray-500 hover:text-white transition cursor-pointer",children:t.jsx(es,{size:25})})]}),t.jsx("div",{className:"p-6 lg:p-4",children:t.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[t.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:t.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:e.user&&`${e.user.first_name} ${e.user.last_name}`})}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[t.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 cursor-pointer",onClick:a,children:[t.jsx(ys,{className:"mr-2"}),"Edit"]}),t.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400 cursor-pointer",onClick:n,children:[t.jsx(Nt,{className:"mr-2"}),"Delete"]})]})]})}),t.jsx("div",{className:"border-b border-gray-200 my-5"}),t.jsxs("div",{className:"p-4 lg:p-6",children:[t.jsx("div",{className:"flex w-full bg-[#6A727D] text-white overflow-x-auto",children:t.jsx("button",{className:"flex-1 min-w-[90px] px-4 py-2 lg:text-lg text-sm font-medium text-center text-white",children:"Overview"})}),t.jsx("div",{className:"bg-white rounded-xl shadow-sm sm:p-6 lg:p-5 border border-gray-200 text-sm text-gray-700",children:t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-2 gap-4 sm:gap-6",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"User:"}),t.jsx("p",{children:e.user?`${e.user.first_name} ${e.user.last_name}`:"Unknown"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Target Amount:"}),t.jsxs("p",{children:["",Number(e.target_amount).toLocaleString()]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Start Date:"}),t.jsx("p",{children:e.start_date})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"End Date:"}),t.jsx("p",{children:e.end_date})]})]})})]})]})})}function gue({formData:e,users:s,currentUser:a,isEditing:n,isSubmitting:r,onChange:i,onClose:l,onSubmit:c}){return t.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl p-8 relative min-h-[50vh]",children:[t.jsx("button",{onClick:l,className:"absolute top-5 right-5",children:t.jsx(jt,{size:24})}),t.jsx("h2",{className:"text-2xl font-semibold text-center mb-8",children:n?"Edit Target":"Add New Target"}),t.jsxs("form",{onSubmit:c,className:"grid gap-5 text-base",children:[t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Assign User"}),t.jsx(mue,{name:"user_id",items:s.filter(d=>d.id===a.id||d.role?.toLowerCase()==="sales"),value:e.user_id,onChange:i,getLabel:d=>`${d.first_name} ${d.last_name}`,placeholder:"Search user..."})]}),t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:"Target Amount"}),t.jsx("div",{className:"flex justify-center w-full",children:t.jsx("input",{type:"number",name:"target_amount",placeholder:"0.00",value:e.target_amount,onChange:i,required:!0,className:"w-full max-w-md border text-gray-500 border-gray-300 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"})})]}),t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:"Start Date"}),t.jsx("div",{className:"flex justify-center w-full",children:t.jsx("input",{type:"date",name:"start_date",value:e.start_date,onChange:i,required:!0,className:"w-full max-w-md border text-gray-500 border-gray-300 text-gray-500 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"})})]}),t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:"End Date"}),t.jsx("div",{className:"flex justify-center w-full",children:t.jsx("input",{type:"date",name:"end_date",value:e.end_date,onChange:i,required:!0,className:"w-full max-w-md border text-gray-500 border-gray-300 text-gray-500 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"})})]}),t.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[t.jsx("button",{type:"button",onClick:l,className:"bg-red-400 text-white px-5 py-2 rounded-lg",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:r,className:"bg-tertiary text-white px-5 py-2 rounded-lg",children:r?"Saving...":"Save Target"})]})]})]})})}function xue({title:e,message:s,confirmLabel:a,cancelLabel:n,variant:r,loading:i,onConfirm:l,onCancel:c}){return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:e}),t.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:s}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsx("button",{onClick:c,disabled:i,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:n}),t.jsx("button",{onClick:l,disabled:i,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${r==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary"}`,children:i?"Processing...":a})]})]})})}const _o=10;function pue(){g.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,s]=g.useState(null),[a,n]=g.useState(""),[r,i]=g.useState("Filter by Actions"),[l,c]=g.useState(1),d=async()=>{try{const v=await se.get("/logs/read-all");s(v.data)}catch(v){console.error("Error fetching audit logs:",v)}};g.useEffect(()=>{d()},[]);const m=g.useMemo(()=>{if(!Array.isArray(e))return[];const v=a.trim().toLowerCase(),C=r?.toUpperCase?.()||"ALL";return e.filter(_=>{const T=_.timestamp?new Date(_.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",k=`${_.entity_type||""} ${_.entity_name||_.entity_details?.name||_.entity_details?.title||_.entity_id||""}`,E=`${_.logger?.first_name||""} ${_.logger?.last_name||""}`,A=[T,E,_.action,_.entity_type,k,_.description],U=v===""||A.some(X=>X==null?!1:X.toString().toLowerCase().includes(v)),B=C==="FILTER BY ACTIONS"||(_.action||"").toUpperCase()===C;return U&&B}).sort((_,T)=>{const k=_.timestamp?new Date(_.timestamp).getTime():0;return(T.timestamp?new Date(T.timestamp).getTime():0)-k})},[e,a,r]),f=Math.max(1,Math.ceil(m.length/_o)||1);g.useEffect(()=>{c(1)},[a,r]),g.useEffect(()=>{c(v=>{const C=Math.max(1,Math.ceil(m.length/_o)||1);return v>C?C:v})},[m.length]);const h=g.useMemo(()=>{const v=(l-1)*_o;return m.slice(v,v+_o)},[m,l]);m.length===0||(l-1)*_o+1,Math.min(l*_o,m.length);const y=()=>c(v=>Math.max(v-1,1)),N=()=>c(v=>Math.min(v+1,f)),w=()=>{if(!m.length){$h.error("No logs to export!");return}const v=["Timestamp","User","Action","Resource","Details"],C=m.map(E=>[new Date(E.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${E.logger?.first_name||""} ${E.logger?.last_name||""}`.trim(),E.action,`${E.entity_type}: ${E.entity_id}`,E.description||""]),j=[v.join(","),...C.map(E=>E.map(A=>`"${String(A).replace(/"/g,'""')}"`).join(","))].join(`
`),_=new Blob([j],{type:"text/csv;charset=utf-8;"}),T=URL.createObjectURL(_),k=document.createElement("a");k.href=T,k.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(k),k.click(),document.body.removeChild(k),URL.revokeObjectURL(T)},p=v=>{switch((v||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&t.jsx(xt,{message:"Loading audit logs..."}),t.jsx(Ih,{toastOptions:{duration:1e3}}),t.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[t.jsx(dt,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),t.jsxs("p",{className:"text-sm text-blue-700",children:[t.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Ta,{className:"text-blue-600",size:20}),t.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),t.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:t.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:w,children:[t.jsx(Xr,{className:"mr-2"}),"Export Logs"]})})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[t.jsx(yt,{size:20,className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search audit logs",value:a,onChange:v=>n(v.target.value),className:"focus:outline-none text-base w-full"})]}),t.jsx("div",{className:"w-full lg:w-1/4",children:t.jsxs("select",{value:r,onChange:v=>i(v.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[t.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),t.jsx("option",{value:"CREATE",children:"CREATE"}),t.jsx("option",{value:"DELETE",children:"DELETE"}),t.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[t.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),t.jsx("th",{className:"py-3 px-4",children:"User"}),t.jsx("th",{className:"py-3 px-4",children:"Action"}),t.jsx("th",{className:"py-3 px-4",children:"Resource"}),t.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),t.jsx("tbody",{children:Array.isArray(m)&&m.length>0?h.map((v,C)=>t.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[t.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(v.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),t.jsx("td",{className:"py-3 px-4 text-gray-700",children:v.name}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${p(v.action)}`,children:v.action})}),t.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[v.entity_type,": ",v.entity_id]}),t.jsx("td",{className:"py-3 px-4 text-gray-700",children:v.description})]},C)):t.jsx("tr",{children:t.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),t.jsx(Ct,{className:"mt-4",totalItems:m.length,pageSize:_o,currentPage:l,onPrev:y,onNext:N,label:"logs"})]})}const yue=10,bue=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"}],vue=e=>e?String(e).toUpperCase():"",Pd=e=>{const s=vue(e);return s==="PLANNED"||s==="PENDING"?"PLANNED":s==="HELD"||s==="COMPLETED"?"HELD":s==="NOT HELD"||s==="NOT_HELD"||s==="CANCELLED"?"NOT_HELD":"PLANNED"},Qw=e=>{const s=Pd(e);return s==="PLANNED"?"PLANNED":s==="HELD"?"HELD":s==="NOT_HELD"?"NOT HELD":"--"},e3=e=>{switch(Pd(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},t3=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function Nue(){const[e,s]=g.useState(!1),[a,n]=g.useState(null),[r,i]=g.useState(null),[l,c]=g.useState(null),[d,m]=g.useState(null),[f,h]=g.useState([]),[y,N]=g.useState(null),[w,p]=g.useState(!1),[v,C]=g.useState(null),[j,_]=g.useState(!1),[T,k]=g.useState(!1),[E,A]=g.useState("PLANNED"),[U,B]=g.useState(!1),[X,$]=g.useState(!1),[O]=Aa(),G=it(),K=Xt(),ae={subject:"",call_time:"",duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[R,Z]=g.useState(ae);g.useEffect(()=>{const V=K.state?.openCallModal,pe=K.state?.initialCallData?.relatedTo1||O.get("id");(V||pe)&&(s(!0),K.state?.initialCallData&&Z(z=>({...z,...K.state.initialCallData})),pe&&Z(z=>({...z,relatedTo1:pe})),G(K.pathname,{replace:!0,state:{}}))},[K,O,G]);const te=async()=>{try{$(!0);const V=await se.get("/calls/admin/fetch-all"),z=[...Array.isArray(V.data)?V.data:[]].sort((ie,ue)=>{const M=ie?.created_at?new Date(ie.created_at):0;return(ue?.created_at?new Date(ue.created_at):0)-M});h(z)}catch(V){console.error("Error fetching calls:",V),q.error("Failed to load calls")}finally{$(!1)}},ge=async()=>{try{const V=await se.get("/users/all");N(V.data)}catch(V){console.error("Error fetching users: ",V)}};g.useEffect(()=>{ge(),te()},[]);const le=[],W="",ee="Filter by Status",J="Filter by Users",he=1,be=f,Le=f,Me=f.length,ke=f.filter(V=>Pd(V.status)==="PLANNED").length,F=f.filter(V=>Pd(V.status)==="HELD").length,ve=f.filter(V=>Pd(V.status)==="NOT_HELD").length,Ce=[{title:"Total",value:Me,icon:Ea,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:ke,icon:ya,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:F,icon:As,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:ve,icon:tr,color:"text-gray-600",bgColor:"bg-gray-100"}],D="Overview",re=V=>{const{name:pe,value:z}=V.target;Z(ie=>{const ue={...ie,[pe]:z};return pe==="relatedType1"&&(ue.relatedTo1="",z==="Lead"?(ue.relatedType2=null,ue.relatedTo2=null,m([])):z==="Account"&&(ue.relatedType2="Contact")),pe==="relatedType2"&&(ue.relatedTo2=""),ue})};g.useEffect(()=>{const V=async()=>{try{c([]);let pe;R.relatedType1==="Lead"?pe=await se.get("/leads/admin/getLeads"):R.relatedType1==="Account"&&(pe=await se.get("/accounts/admin/fetch-all"));let z=[];if(pe&&Array.isArray(pe.data)?z=pe.data:z=[],w&&R.relatedTo1)try{let ie;R.relatedType1==="Lead"?ie=await se.get(`/leads/get/${R.relatedTo1}`):R.relatedType1==="Account"&&(ie=await se.get(`/accounts/get/${R.relatedTo1}`)),ie&&ie.data&&(z.some(M=>String(M.id)===String(R.relatedTo1))||(z=[ie.data,...z]))}catch(ie){console.error("Error fetching specific related item:",ie)}c(z)}catch(pe){console.error("Error fetching data:",pe),c([])}};R.relatedType1&&V()},[R.relatedType1,w,R.relatedTo1]),g.useEffect(()=>{const V=async()=>{try{m([]);let pe;if(R.relatedType1==="Account"&&R.relatedTo1)R.relatedType2==="Contact"?pe=await se.get(`/contacts/from-acc/${R.relatedTo1}`):R.relatedType2==="Deal"&&(pe=await se.get(`/deals/from-acc/${R.relatedTo1}`));else{m([]);return}pe&&Array.isArray(pe.data)?m(pe.data):m([])}catch(pe){console.error("Error fetching data:",pe),m([])}};R.relatedType2&&V()},[R.relatedType2,R.relatedTo1,R.relatedType1]);const oe=V=>{if(V.preventDefault(),!R.assigned_to){q.error("Please assign the call to a user.");return}const pe={...R,duration_minutes:R.duration_minutes?parseInt(R.duration_minutes,10):null,relatedTo1:R.relatedTo1?parseInt(R.relatedTo1,10):null,relatedTo2:R.relatedType1==="Lead"?null:R.relatedTo2?parseInt(R.relatedTo2,10):null,relatedType2:R.relatedType1==="Lead"?null:R.relatedType2,assigned_to:R.assigned_to?parseInt(R.assigned_to,10):null},z=w&&v?"update":"create",ie=(R.subject||"").trim()||"Untitled Call";i({title:z==="create"?"Confirm New Call":"Confirm Update",message:z==="create"?`Create "${ie}"?`:`Save changes to "${ie}"?`,confirmLabel:z==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:z,payload:pe,targetId:v||null,name:ie}})},je=V=>n(V),Re=()=>{s(!1),p(!1),C(null)},Ke=async()=>{if(!r?.action){i(null);return}const{action:V}=r,{type:pe,payload:z,targetId:ie,name:ue}=V;k(!0);try{if(pe==="create")_(!0),await se.post("/calls/create",z),q.success(`Call "${ue}" created successfully.`),s(!1),Z(ae),p(!1),C(null),await te();else if(pe==="update"){if(!ie)throw new Error("Missing call identifier for update.");_(!0),await se.put(`/calls/${ie}`,z),q.success(`Call "${ue}" updated successfully.`),s(!1),Z(ae),p(!1),C(null),await te()}else if(pe==="delete"){if(!ie)throw new Error("Missing call identifier for deletion.");await se.delete(`/calls/${ie}`),q.success(`Call "${ue}" deleted successfully.`),a?.id===ie&&n(null),await te()}}catch(M){const xe=pe==="create"?"Failed to create call. Please review the details and try again.":pe==="update"?"Failed to update call. Please review the details and try again.":"Failed to delete call. Please try again.",ne=M?.response?.data?.detail||xe;q.error(ne)}finally{(pe==="create"||pe==="update")&&_(!1),k(!1),i(null)}},et=()=>{T||i(null)},qe=async()=>{if(a?.id)try{B(!0),await se.put(`/calls/${a.id}`,{status:E}),q.success(`Status updated to ${Qw(E)}`),h(V=>Array.isArray(V)?V.map(pe=>pe.id===a.id?{...pe,status:E}:pe):V),n(null)}catch(V){const pe=V.response?.data?.detail||"Failed to update status.";q.error(pe)}finally{B(!1)}};g.useEffect(()=>{a&&A(Pd(a.status))},[a]);const Ze=a?t.jsxs("div",{id:"callModalBackdrop",onClick:V=>V.target.id==="callModalBackdrop"&&n(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[X&&t.jsx(xt,{message:"Loading call details..."}),t.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[t.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[t.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),t.jsx("button",{onClick:()=>n(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:t.jsx(es,{size:25})})]}),t.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:t.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[t.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:a.subject}),t.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${e3(a.status)}`,children:Qw(a.status)})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const V=M=>{if(!M)return"";const xe=new Date(M),ne=xe.getFullYear(),Te=String(xe.getMonth()+1).padStart(2,"0"),Q=String(xe.getDate()).padStart(2,"0"),ye=String(xe.getHours()).padStart(2,"0"),P=String(xe.getMinutes()).padStart(2,"0");return`${ne}-${Te}-${Q}T${ye}:${P}`},pe=a.lead?"Lead":a.account?"Account":"Lead",z=a.lead?a.lead.id:a.account?a.account.id:null,ie=pe==="Lead"?null:a.contact?"Contact":a.deal?"Deal":"Contact",ue=pe==="Lead"?null:a.contact?a.contact.id:a.deal?a.deal.id:null;Z({subject:a.subject||"",call_time:V(a.call_time),duration_minutes:a.duration_minutes?String(a.duration_minutes):"",direction:a.direction||"Outgoing",status:a.status||"Planned",notes:a.notes||"",relatedType1:pe,relatedType2:ie,relatedTo1:z?String(z):"",relatedTo2:ue?String(ue):"",assigned_to:a.call_assign_to?.id?String(a.call_assign_to.id):""}),p(!0),C(a.id),n(null),s(!0)},children:[t.jsx(ys,{className:"mr-2"}),"Edit"]}),t.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>{const V=a.subject||"this call";i({title:"Delete Call",message:`Are you sure you want to permanently delete "${V}"? This action cannot be undone.`,confirmLabel:"Delete Call",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:a.id,name:V}})},children:[t.jsx(Nt,{className:"mr-2"}),"Delete"]})]})]})}),t.jsx("div",{className:"border-b border-gray-200 my-5"}),t.jsxs("div",{className:"p-6 lg:p-4",children:[t.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(V=>t.jsx("button",{className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${D===V?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:V},V))}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[t.jsxs("div",{className:"lg:col-span-3",children:[t.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 text-sm text-gray-700",children:[t.jsx(Ci,{label:"Call Time",value:t3(a.call_time)}),t.jsx(Ci,{label:"Duration",value:a.duration_minutes?`${a.duration_minutes} min`:null}),t.jsx(Ci,{label:"Direction",value:a.direction||"--"}),t.jsx(Ci,{label:"Assigned To",value:`${a.call_assign_to.first_name} ${a.call_assign_to.last_name}`}),a.lead&&t.jsx(Ci,{label:"Lead",value:a.lead.title}),a.account&&t.jsx(Ci,{label:"Account",value:a.account.name}),a.contact&&t.jsx(Ci,{label:"Contact",value:`${a.contact.first_name} ${a.contact.last_name}`}),a.deal&&t.jsx(Ci,{label:"Deal",value:a.deal.name}),t.jsx(Ci,{label:"Created At",value:t3(a.created_at)})]})}),D==="Notes",D==="Activities"]}),t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),t.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[t.jsxs("button",{onClick:()=>G("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Calls"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),t.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>G("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Calls"}}}),children:[t.jsx(dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),t.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ts,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),t.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:E,onChange:V=>A(V.target.value),children:[t.jsx("option",{value:"PLANNED",children:"PLANNED"}),t.jsx("option",{value:"HELD",children:"HELD"}),t.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),t.jsx("button",{onClick:qe,disabled:U,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:U?"Updating...":"Update"})]})]})]})]})]})]}):null,we=e?t.jsx("div",{id:"modalBackdrop",onClick:V=>V.target.id==="modalBackdrop"&&Re(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[t.jsx("button",{onClick:Re,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:t.jsx(jt,{size:22})}),t.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:w?"Edit Call":"Add New Call"}),t.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:oe,children:[t.jsx(jue,{label:"Subject",className:"md:col-span-2",name:"subject",value:R.subject,onChange:re,disabled:j,required:!0}),t.jsxs("div",{className:"w-full flex flex-col",children:[t.jsxs("select",{name:"relatedType1",onChange:re,value:R.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:j||w,children:[t.jsx("option",{value:"Lead",children:"Lead"}),t.jsx("option",{value:"Account",children:"Account"})]}),t.jsx(qw,{items:Array.isArray(l)?l:[],value:R.relatedTo1??"",placeholder:`Search ${R.relatedType1||"here"}...`,getLabel:V=>R.relatedType1==="Lead"?V.title:V.name??"",onChange:V=>Z(pe=>({...pe,relatedTo1:V})),disabled:j||w})]}),t.jsxs("div",{className:"w-full flex flex-col",children:[t.jsxs("select",{name:"relatedType2",onChange:re,value:R.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:R.relatedType1==="Lead"||j||w,children:[t.jsx("option",{value:"Contact",children:"Contact"}),t.jsx("option",{value:"Deal",children:"Deal"})]}),t.jsx(qw,{disabled:R.relatedType1==="Lead"||j||w,items:Array.isArray(d)?d:[],value:R.relatedTo2??"",placeholder:R.relatedType1==="Lead"?"":Array.isArray(d)&&d.length>0?`Search ${R.relatedType2||"Contact"}...`:`No ${R.relatedType2||""} data found`,getLabel:V=>R.relatedType2==="Contact"?`${V.first_name??""} ${V.last_name??""}`.trim():V.name??"",onChange:V=>Z(pe=>({...pe,relatedTo2:V}))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),t.jsx("input",{type:"datetime-local",value:R.call_time,onChange:re,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),t.jsxs("div",{className:"w-full",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),t.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[t.jsx("input",{type:"tel",value:R.duration_minutes,onChange:re,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),t.jsx("p",{children:"minutes"})]})]}),t.jsxs("div",{className:"col-span-2",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Assign To"}),t.jsx(qw,{items:Array.isArray(y)?y:[],value:R.assigned_to??"",placeholder:"Search an account...",getLabel:V=>`${V.first_name} ${V.last_name}`,onChange:V=>Z(pe=>({...pe,assigned_to:V}))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),t.jsxs("select",{name:"direction",onChange:re,value:R.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[t.jsx("option",{value:"Incoming",children:"Incoming"}),t.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),t.jsxs("select",{name:"status",onChange:re,value:R.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[t.jsx("option",{value:"Planned",children:"Planned"}),t.jsx("option",{value:"Held",children:"Held"}),t.jsx("option",{value:"Not held",children:"Not held"})]})]}),t.jsx(Cue,{className:"col-span-2",label:"Notes",value:R.notes,onChange:re,name:"notes"}),t.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[t.jsx("button",{type:"button",onClick:Re,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:j,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:j?"Saving...":w?"Update Call":"Save Call"})]})]})]})}):null;return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[t.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[t.jsx(Ea,{className:"mr-2 text-blue-600"})," Calls"]}),t.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:t.jsxs("button",{onClick:()=>{Z(ae),p(!1),C(null),s(!0)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[t.jsx(Lt,{className:"mr-2"})," Add Call"]})})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ce.map(V=>t.jsx(wue,{...V},V.title))}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[t.jsx(yt,{size:20,className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",defaultValue:W})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[t.jsxs("select",{defaultValue:ee,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[t.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),bue.map(V=>t.jsx("option",{value:V.value,children:V.label},V.value))]}),t.jsxs("select",{defaultValue:J,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[t.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),le.map(V=>t.jsx("option",{value:V.name,children:V.name},V.id))]})]})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[t.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4",children:"Subject"}),t.jsx("th",{className:"py-3 px-4",children:"Related To"}),t.jsx("th",{className:"py-3 px-4",children:"Call Time"}),t.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),t.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),t.jsx("tbody",{children:X?t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"py-10",children:t.jsx(xt,{message:"Loading calls..."})})}):Le.length>0?Le.map(V=>t.jsxs("tr",{onClick:()=>je(V),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[t.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:V.subject||"--"}),t.jsxs("td",{className:"py-3 px-4",children:[V.lead&&t.jsx("p",{className:"font-medium text-blue-500 text-xs",children:V.lead.title}),V.account&&t.jsx("p",{className:"font-medium text-blue-500 text-xs",children:V.account.name}),V.contact&&t.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[V.contact.first_name," ",V.contact.last_name]}),V.deal&&t.jsx("p",{className:"font-medium text-blue-500 text-xs",children:V.deal.name})]}),t.jsx("td",{className:"py-3 px-4 text-gray-800",children:V.call_time?new Date(V.call_time).toLocaleString():"--"}),t.jsx("td",{className:"py-3 px-4 text-gray-800",children:V?.call_assign_to?`${V.call_assign_to.first_name} ${V.call_assign_to.last_name}`:"--"}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${e3(V.status)}`,children:Qw(V.status)})})]},V.id)):t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),t.jsx(Ct,{totalItems:be.length,pageSize:yue,currentPage:he,onPrev:()=>{},onNext:()=>{},label:"calls"})]}),Ze,we,r&&t.jsx(Sue,{open:!0,title:r.title,message:r.message,confirmLabel:r.confirmLabel,onConfirm:Ke,onCancel:et,loading:T})]})}function wue({icon:e,title:s,value:a,color:n,bgColor:r}){return t.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[t.jsx("div",{className:`p-3 rounded-full ${r} ${n} mr-4`,children:t.jsx(e,{size:22})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500 uppercase",children:s}),t.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function jue(e){return t.jsxs("div",{className:e.className,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),t.jsx("input",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]})}function Cue(e){return t.jsxs("div",{className:e.className,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),t.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function Ci({label:e,value:s}){return t.jsxs("p",{children:[t.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",t.jsx("br",{}),t.jsx("span",{className:"break-words",children:s||"--"})]})}function Sue({open:e,title:s,message:a,confirmLabel:n,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:c,onCancel:d}){if(!e)return null;const m=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s}),t.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),t.jsx("button",{type:"button",onClick:c,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${m}`,disabled:l,children:l?"Processing...":n})]})]})})}function qw({items:e=[],value:s="",onChange:a,getLabel:n,placeholder:r="Search...",disabled:i=!1,maxRender:l=200}){const[c,d]=g.useState(!1),[m,f]=g.useState(""),h=g.useRef(null),y=e.find(p=>String(p.id)===String(s)),N=y?n(y):"",w=g.useMemo(()=>{const p=m.trim().toLowerCase();return(p?e.filter(C=>(n(C)||"").toLowerCase().includes(p)):e).slice(0,l)},[e,m,n,l]);return g.useEffect(()=>{const p=v=>{h.current&&!h.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]),g.useEffect(()=>{c||f("")},[c]),t.jsxs("div",{ref:h,className:"relative w-full",children:[t.jsx("input",{disabled:i,value:c?m:N,placeholder:r,onFocus:()=>!i&&d(!0),onChange:p=>{f(p.target.value),c||d(!0)},className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),c&&!i&&t.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[t.jsx("div",{className:"max-h-56 overflow-y-auto",children:w.length>0?w.map(p=>{const v=String(p.id),C=n(p),j=String(s)===v;return t.jsx("button",{type:"button",onClick:()=>{a(v),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${j?"bg-blue-50":""}`,children:C||"--"},v)}):t.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&t.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}const s3=["To Do","In Progress","Review","Completed"],Vm=10,_ue=e=>{if(!e)return"";const s=new Date(e);if(Number.isNaN(s.getTime()))return"";const a=s.getTimezoneOffset();return new Date(s.getTime()-a*60*1e3).toISOString().slice(0,16)},a3=e=>{if(!e)return"";const s=new Date(e);return Number.isNaN(s.getTime())?"":s.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},Tue=e=>{const s=e.subject?.trim()??"",a=e.description?.trim()??"",n=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),e.status&&String(e.status).toUpperCase();let r=null,i=null,l=null,c=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2&&(c=Number(e.relatedTo2)));const d=e.assignedTo?Number(e.assignedTo):null,m=l||c||i||r,f=l?"Contact":c?"Deal":i?"Account":r?"Lead":null;return{title:s,description:a,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:d,notes:n,is_personal:!1,lead_id:r,account_id:i,contact_id:l,deal_id:c,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:m,related_type:f}},Eue=e=>{const s=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",a=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",n=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",l=()=>e.lead?.id||e.lead_id,c=()=>e.account?.id||e.account_id,d=()=>e.contact?.id||e.contact_id,m=()=>e.deal?.id||e.deal_id,f=()=>e.task_assign_to?.id||e.assigned_to,h=()=>e.lead?.title||e.lead_id,y=()=>e.account?.name||e.account_id,N=()=>i||e.contact_id,w=()=>e.deal?.name||e.deal_id;let p="Lead",v="",C="",j="",_="Lead",T="",k="",E="";const A=c(),U=y(),B=l(),X=h();if(A){p="Account",_="Account",T=U,v=String(A);const $=d(),O=m(),G=N(),K=w();$?(C="Contact",k="Contact",E=G,j=String($)):O&&(k="Deal",C="Deal",E=K,j=String(O))}else B?(_="Lead",T=X,p="Lead",v=String(B)):e.related_type==="Account"&&(p="Account",v=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:e.status||"Not started",dueDate:n,dateAssigned:r,assignedToId:f()||null,assignedToName:s,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:a,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:_,relatedTo1Text:T,relatedType2Text:k,relatedTo2Text:E,subject:e.title,relatedType1:p,relatedTo1:v,relatedType2:C,relatedTo2:j}};function Aue(){g.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:s}=zt(),[a,n]=g.useState("board"),[r,i]=g.useState(!1),[l,c]=g.useState(null),[d,m]=g.useState(!1),[f,h]=g.useState([]),[y,N]=g.useState(!0),[w,p]=g.useState(""),[v,C]=g.useState("Filter by Status"),[j,_]=g.useState("Filter by Priority"),[T,k]=g.useState([]),[E,A]=g.useState(1),[U,B]=g.useState(null),[X,$]=g.useState(!1),O=it(),G=Xt(),[K,ae]=g.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""});g.useEffect(()=>{const D=G.state?.openTaskModal,re=G.state?.initialTaskData;D&&(i(!0),re&&ae(oe=>({...oe,...re})),O(G.pathname,{replace:!0,state:{}}))},[G,O]);const R=async()=>{try{const D=await se.get("/users/all");k(Array.isArray(D.data)?D.data:[])}catch(D){console.error("Failed to fetch users:",D),q.error("Failed to fetch users.")}},Z=async()=>{try{N(!0);const D=await se.get("/tasks/all"),oe=(Array.isArray(D.data)?D.data:[]).map(Eue);oe.sort((je,Re)=>{const Ke=je.createdAt?new Date(je.createdAt):0;return(Re.createdAt?new Date(Re.createdAt):0)-Ke}),console.log("Fetched Tasks:",oe),h(oe),a==="list"&&A(1)}catch(D){console.error("Failed to load tasks:",D),q.error("Failed to load tasks.")}finally{N(!1)}};g.useEffect(()=>{!s&&e&&(R(),Z())},[s,e]);const te=()=>{c(null),ae({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},ge=(D=null,re=!1)=>{c(D),m(re),D?ae({id:D.id,subject:D.title||"",description:D.description||"",priority:D.priority||"Normal",status:D.status||"Not started",dueDate:_ue(D.dueDate),assignedTo:D.assignedToId?String(D.assignedToId):"",notes:D.notes||"",relatedType1Text:D.relatedType1Text||"",relatedTo1Text:D.relatedTo1Text||"",relatedType2Text:D.relatedType2Text||"",relatedTo2Text:D.relatedTo2Text||"",relatedType1:D.relatedType1||"",relatedTo1:D.relatedTo1||"",relatedType2:D.relatedType2||"",relatedTo2:D.relatedTo2||""}):te(),i(!0)},le=()=>{i(!1),c(null),m(!1),te()},W=async D=>{const re=Tue(D);try{l&&!d?(await se.put(`/tasks/${l.id}`,re),q.success("Task updated successfully.")):(await se.post("/tasks/create",re),q.success("Task created successfully.")),i(!1),await Z()}catch(oe){console.error("Failed to save task:",oe);const je=oe.response?.data?.detail||"Failed to save task.";q.error(je)}},ee=D=>{D&&B({title:"Delete Task",message:t.jsxs(t.Fragment,{children:["Are you sure you want to delete ",t.jsx("span",{className:"font-semibold",children:D.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:D.id}})},J=async()=>{if(!U?.action){B(null);return}const{action:D}=U;$(!0);try{D.type==="delete"&&(await se.delete(`/tasks/${D.targetId}`),q.success("Task deleted successfully."),await Z())}catch(re){console.error("Task action failed:",re),q.error("Failed to delete task.")}finally{$(!1),B(null)}},he=()=>{X||B(null)},be=g.useMemo(()=>{const D=w.trim().toLowerCase();return[...f].sort((oe,je)=>{const Re=oe.createdAt?new Date(oe.createdAt):0;return(je.createdAt?new Date(je.createdAt):0)-Re}).filter(oe=>{const je=D===""||oe.title?.toLowerCase().includes(D)||oe.description?.toLowerCase().includes(D)||oe.assignedToName?.toLowerCase().includes(D)||oe.createdBy?.toLowerCase().includes(D),Re=v==="Filter by Status"||oe.status===v,Ke=j==="Filter by Priority"||oe.priority===j;return je&&Re&&Ke})},[f,w,v,j]);g.useEffect(()=>{A(1)},[w,v,j,a]),g.useEffect(()=>{if(a==="list"){const D=be.length===0?1:Math.ceil(be.length/Vm);E>D&&A(D)}},[be.length,E,a]);const Le=g.useMemo(()=>{if(a==="board")return be;const D=(E-1)*Vm;return be.slice(D,D+Vm)},[be,E,a]),Me=g.useMemo(()=>{const D=new Date;return[{title:"To Do",value:f.filter(re=>re.status==="Not started").length,icon:ya,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:f.filter(re=>re.status==="In progress").length,icon:Qn,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:f.filter(re=>re.status==="Completed").length,icon:As,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:f.filter(re=>re.dueDate&&new Date(re.dueDate)<D&&re.status!=="Completed").length,icon:oh,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:f.filter(re=>re.priority==="High").length,icon:qi,color:"text-orange-600",bgColor:"bg-orange-100"}]},[f]),ke=D=>D.dueDate&&new Date(D.dueDate)<new Date&&D.status!=="Completed",F=D=>{switch(D.status){case"To Do":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In Progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Review":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},ve=D=>{switch(D){case"To Do":return"bg-blue-100 text-blue-700";case"In Progress":return"bg-purple-100 text-purple-700";case"Review":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},Ce=D=>{switch(D){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(y||s)&&t.jsx(xt,{message:"Loading tasks..."}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[t.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[t.jsx(Qn,{className:"text-blue-600"})," Tasks Board"]}),t.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:t.jsxs("button",{type:"button",onClick:()=>ge(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[t.jsx(Lt,{})," Create Task"]})})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Me.map(D=>t.jsx(Lue,{...D},D.title))}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[t.jsx(yt,{size:20,className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search tasks",value:w,onChange:D=>p(D.target.value),className:"focus:outline-none text-base w-full"})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[t.jsxs("select",{value:v,onChange:D=>C(D.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[t.jsx("option",{children:"Filter by Status"}),s3.map(D=>t.jsx("option",{children:D},D))]}),t.jsxs("select",{value:j,onChange:D=>_(D.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[t.jsx("option",{children:"Filter by Priority"}),t.jsx("option",{children:"High"}),t.jsx("option",{children:"Normal"}),t.jsx("option",{children:"Low"})]})]})]}),t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("button",{type:"button",onClick:()=>n("board"),className:`px-4 py-2 rounded-full text-sm ${a==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),t.jsx("button",{type:"button",onClick:()=>n("list"),className:`px-4 py-2 rounded-full text-sm ${a==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!y&&!s&&be.length===0&&t.jsx("p",{className:"text-center text-gray-500 mt-10 p-4 bg-white shadow rounded-lg",children:"No tasks found matching current filters."}),!y&&!s&&be.length>0&&a==="board"&&t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:s3.map(D=>{const re=Le.filter(oe=>oe.status===D);return t.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative",children:[t.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),t.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[t.jsx("h3",{className:"font-medium text-gray-900",children:D}),t.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:re.length})]}),t.jsx("div",{className:`space-y-3 ${re.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:re.length>0?re.map(oe=>t.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${F(oe)}`,onClick:()=>ge(oe,!0),children:[t.jsxs("div",{className:"text-left flex-1",children:[t.jsx("p",{className:"font-medium text-gray-800 text-sm",children:oe.title}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",oe.priority]}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",oe.assignedToName]}),t.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",t.jsx("span",{className:ke(oe)?"text-red-600":"text-gray-600",children:oe.dateAssigned?a3(oe.dateAssigned):""})]})]}),t.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[t.jsx("button",{type:"button",onClick:je=>{je.stopPropagation(),ge(oe)},className:"text-blue-500 hover:text-blue-700",children:t.jsx(hs,{})}),t.jsx("button",{type:"button",onClick:je=>{je.stopPropagation(),ee(oe)},className:"text-red-500 hover:text-red-700",children:t.jsx(Nt,{})})]})]},oe.id)):t.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No tasks"})})]},D)})}),!y&&!s&&be.length>0&&a==="list"&&t.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full text-sm",children:[t.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),t.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),t.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),t.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),t.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),t.jsx("th",{className:"py-3 px-4 font-medium",children:"Actions"})]})}),t.jsx("tbody",{children:Le.map(D=>t.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",onClick:()=>{console.log("Opening task in view mode:",D),ge(D,!0)},children:[t.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",children:D.title}),t.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${ve(D.status||"To Do")}`,children:D.status||"To Do"})}),t.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Ce(D.priority||"Low")}`,children:D.priority||"Low"})}),t.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:D.assignedToName||"Unassigned"}),t.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${ke(D)?"text-red-600 font-medium":""}`,children:D.dateAssigned?a3(D.dateAssigned):""}),t.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center gap-3",onClick:re=>re.stopPropagation(),children:[t.jsxs("button",{type:"button",onClick:()=>ge(D),className:"text-blue-500 hover:text-blue-700 flex items-center gap-1",children:[t.jsx(hs,{})," Edit"]}),t.jsxs("button",{type:"button",onClick:()=>ee(D),className:"text-red-500 hover:text-red-700 flex items-center gap-1",children:[t.jsx(Nt,{})," Delete"]})]})})]},D.id))})]})})}),!y&&!s&&a==="list"&&t.jsx(Ct,{className:"mt-6",totalItems:be.length,pageSize:Vm,currentPage:be.length===0?0:E,onPrev:()=>A(D=>Math.max(D-1,1)),onNext:()=>A(D=>Math.min(D+1,Math.max(1,Math.ceil(be.length/Vm)||1))),label:"tasks"}),t.jsx(Fh,{isOpen:r,onClose:le,onSave:W,onEdit:()=>m(!1),setFormData:ae,formData:K,isEditing:!d&&!!l,viewMode:d,users:T,currentUser:e,onDelete:ee}),U&&t.jsx(kue,{open:!0,title:U.title,message:U.message,confirmLabel:U.confirmLabel,cancelLabel:U.cancelLabel,variant:U.variant,onConfirm:J,onCancel:he,loading:X})]})}function Lue({icon:e,title:s,value:a,color:n,bgColor:r,onClick:i}){return t.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[t.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${n} mr-4`,children:e?t.jsx(e,{size:22}):null}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"text-xs text-gray-500 uppercase",children:s}),t.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function kue({open:e,title:s,message:a,confirmLabel:n,cancelLabel:r,variant:i,loading:l,onConfirm:c,onCancel:d}){if(!e)return null;const m=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s}),t.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),t.jsx("button",{type:"button",onClick:c,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${m}`,disabled:l,children:l?"Processing...":n})]})]})})}const E$=e=>e?e.toUpperCase():"",Rx=e=>{const s=E$(e);return s==="PLANNED"||s==="IN PROGRESS"?"PLANNED":s==="HELD"||s==="DONE"?"HELD":s==="NOT_HELD"||s==="NOT HELD"?"NOT_HELD":"PLANNED"},Due=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},Mue=e=>{const s=E$(e);switch(s==="PLANNED"?"PENDING":s==="HELD"?"COMPLETED":s==="NOT_HELD"?"CANCELLED":s){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},Xw=10,Kw={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},Pue=()=>{const e=it(),s=Xt(),[a]=Aa(),n=a.get("id"),r=s.pathname==="/admin/meetings/info";g.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[i,l]=g.useState([]),[c,d]=g.useState(!1),[m,f]=g.useState([]),[h,y]=g.useState(""),[N,w]=g.useState("Filter by Status"),[p,v]=g.useState(!1),[C,j]=g.useState(null),[_,T]=g.useState(1),[k,E]=g.useState(Kw),[A,U]=g.useState(!1),[B,X]=g.useState(null),[$,O]=g.useState(!1),[G,K]=g.useState(null),[ae,R]=g.useState(!1);g.useEffect(()=>{const F=s.state?.openMeetingModal,ve=s.state?.initialMeetingData?.relatedTo||a.get("id");(F||ve)&&(v(!0),s.state?.initialMeetingData&&E(Ce=>({...Ce,...s.state.initialMeetingData})),e(s.pathname,{replace:!0,state:{}}))},[s,a,e]);const Z=async()=>{if(n&&r){const F=sessionStorage.getItem("meetingDetailData");if(F)try{const ve=JSON.parse(F);if(ve.id===parseInt(n)){j(ve),sessionStorage.removeItem("meetingDetailData");return}}catch(ve){console.error(ve)}}d(!0);try{const F=await se.get("/meetings/admin/fetch-all"),Ce=[...Array.isArray(F.data)?F.data:[]].sort((D,re)=>{const oe=D?.createdAt?new Date(D.createdAt).getTime():0;return(re?.createdAt?new Date(re.createdAt).getTime():0)-oe});if(l(Ce),n&&!C){const D=Ce.find(re=>re.id===parseInt(n));D&&j(D)}console.log(F.data)}catch{q.error("Failed to load meetings.")}finally{d(!1)}},te=async()=>{try{const F=await se.get("/users/all");f(Array.isArray(F.data)?F.data:[])}catch(F){console.error(F)}};g.useEffect(()=>{Z(),te()},[]);const ge=F=>y(F.target.value),le=g.useMemo(()=>{const F=h.trim().toLowerCase(),ve=N.trim().toUpperCase();return i.filter(Ce=>{const D=[Ce?.activity,Ce?.description,Ce?.relatedTo,Ce?.assignedTo],re=F===""||D.some(je=>je&&je.toString().toLowerCase().includes(F)),oe=ve==="FILTER BY STATUS"||Rx(Ce.status||"PENDING")===ve;return re&&oe})},[i,h,N]),W=g.useMemo(()=>{const F=(_-1)*Xw;return le.slice(F,F+Xw)},[le,_]),ee=()=>{v(!1),E(Kw),U(!1),X(null),O(!1)},J=()=>{E(Kw),U(!1),X(null),v(!0)},he=F=>{let ve="";if(F.meet_assign_to?.id)ve=String(F.meet_assign_to.id);else if(F.assignedTo){const qe=m.find(Ze=>`${Ze.first_name} ${Ze.last_name}`===F.assignedTo);ve=qe?String(qe.id):""}const Ce=qe=>{if(!qe)return"";try{const Ze=new Date(qe),we=Ze.getTimezoneOffset()*6e4;return new Date(Ze.getTime()-we).toISOString().slice(0,16)}catch{return""}};let D="Lead",re="",oe="Contact",je="";if(F.lead)D="Lead",re=String(F.lead.id);else if(F.account)D="Account",re=String(F.account.id),F.contact?(oe="Contact",je=String(F.contact.id)):F.deal&&(oe="Deal",je=String(F.deal.id));else if(F.relatedType||F.related_type){const qe=F.relatedType||F.related_type,Ze=F.related_to||F.relatedToId;qe==="Lead"?(D="Lead",re=String(Ze)):(D="Account",re=F.account_id?String(F.account_id):"")}const Re={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},Ke=Rx(F.status),et=Re[Ke]||"Planned";E({subject:F.subject||F.activity||"",location:F.location||"",startTime:Ce(F.start_time||F.startTime),endTime:Ce(F.end_time||F.endTime),status:et,notes:F.description||F.notes||"",assignedTo:ve,relatedType1:D,relatedTo1:re,relatedType2:oe,relatedTo2:je}),U(!0),X(F.id),j(null),v(!0)},be=F=>{if(!F.subject?.trim())return q.error("Subject is required.");if(!F.startTime)return q.error("Start time is required.");if(F.endTime&&!(new Date(F.endTime)-new Date(F.startTime)>0))return q.error("End time must be after start time.");F.relatedType1,F.relatedTo1,F.relatedType1==="Account"&&F.relatedType2&&F.relatedTo2&&(F.relatedType2,F.relatedTo2);const ve={...F,assignedTo:parseInt(F.assignedTo),relatedTo1:parseInt(F.relatedTo1),relatedTo2:parseInt(F.relatedTo2)},Ce=A&&B?"update":"create";K({title:Ce==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${Ce} "${ve.subject}"?`,confirmLabel:Ce==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:Ce,payload:ve,targetId:B,name:ve.subject}})},Le=async()=>{if(!G?.action)return;const{type:F,payload:ve,targetId:Ce,name:D}=G.action;console.log(ve),R(!0);try{F==="create"?(O(!0),await se.post("/meetings/create",ve),q.success(`Meeting "${D}" created.`),ee(),await Z()):F==="update"?(O(!0),await se.put(`/meetings/${Ce}`,ve),q.success(`Meeting "${D}" updated.`),ee(),await Z()):F==="delete"&&(await se.delete(`/meetings/${Ce}`),q.success(`Meeting "${D}" deleted.`),C?.id===Ce&&j(null),await Z())}catch(re){const oe=re.response?.data?.detail||"Action failed.";q.error(typeof oe=="string"?oe:JSON.stringify(oe)),console.error(oe)}finally{O(!1),R(!1),K(null)}},Me=F=>{K({title:"Delete Meeting",message:`Permanently delete "${F.activity}"?`,confirmLabel:"Delete",variant:"danger",action:{type:"delete",targetId:F.id,name:F.activity}})},ke=async(F,ve)=>{try{await se.put(`/meetings/${F}`,{status:ve}),q.success("Status updated"),Z(),j(null)}catch{q.error("Failed to update status")}};return r&&n?C?t.jsx(Gl,{meeting:C,onClose:()=>{j(null),e("/admin/dashboard")},onEdit:he,onDelete:Me,onStatusUpdate:ke}):t.jsx(xt,{message:"Loading meeting..."}):t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[c&&t.jsx(xt,{message:"Loading meetings..."}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[t.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[t.jsx(dt,{className:"mr-2 text-blue-600"})," Meetings"]}),t.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:t.jsxs("button",{onClick:J,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[t.jsx(Lt,{className:"mr-2"})," Add Meeting"]})})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[t.jsx(yt,{className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search meetings",value:h,onChange:ge,className:"w-full outline-none"})]}),t.jsxs("select",{value:N,onChange:F=>w(F.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[t.jsx("option",{children:"Filter by Status"}),t.jsx("option",{value:"PLANNED",children:"PLANNED"}),t.jsx("option",{value:"HELD",children:"HELD"}),t.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[t.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4",children:"Subject"}),t.jsx("th",{className:"py-3 px-4",children:"Related To"}),t.jsx("th",{className:"py-3 px-4",children:"Start Time"}),t.jsx("th",{className:"py-3 px-4",children:"Assigned"}),t.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),t.jsx("tbody",{children:W.length>0?W.map(F=>t.jsxs("tr",{onClick:()=>j(F),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[t.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:F.subject}),t.jsxs("td",{className:"py-3 px-4",children:[F.lead&&t.jsx("p",{className:"font-medium text-blue-500 text-xs",children:F.lead.title}),F.account&&t.jsx("p",{className:"font-medium text-blue-500 text-xs",children:F.account.name}),F.contact&&t.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[F.contact.first_name," ",F.contact.last_name]}),F.deal&&t.jsx("p",{className:"font-medium text-blue-500 text-xs",children:F.deal.name})]}),t.jsx("td",{className:"py-3 px-4",children:Due(F.start_time)}),t.jsxs("td",{className:"py-3 px-4",children:[F.meet_assign_to.first_name," ",F.meet_assign_to.last_name]}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Mue(Rx(F.status))}`,children:Rx(F.status).replace("_"," ")})})]},F.id)):t.jsx("tr",{children:t.jsx("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),t.jsx(Ct,{totalItems:le.length,pageSize:Xw,currentPage:_,onPrev:()=>T(F=>Math.max(1,F-1)),onNext:()=>T(F=>F+1),label:"meetings"}),p&&t.jsx(Iy,{onClose:ee,formData:k,setFormData:E,isEditing:A,onSubmit:be,isSubmitting:$||ae,users:m}),C&&t.jsx(Gl,{meeting:C,onClose:()=>j(null),onEdit:he,onDelete:Me,onStatusUpdate:ke}),G&&t.jsx(Oue,{open:!0,title:G.title,message:G.message,confirmLabel:G.confirmLabel,variant:G.variant,onConfirm:Le,onCancel:()=>K(null),loading:ae})]})};function Oue({open:e,title:s,message:a,confirmLabel:n,cancelLabel:r="Cancel",variant:i="primary",loading:l,onConfirm:c,onCancel:d}){if(!e)return null;const m=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s}),t.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsx("button",{onClick:d,disabled:l,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),t.jsx("button",{onClick:c,disabled:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${m}`,children:l?"...":n})]})]})})}const Uy=[{value:"CEO",label:"CEO"},{value:"Admin",label:"Admin"},{value:"Group Manager",label:"Group Manager"},{value:"Manager",label:"Manager"},{value:"Marketing",label:"Marketing"},{value:"Sales",label:"Sales"}],Wm={firstName:"",lastName:"",email:"",password:"",role:""},Iue={CEO:"bg-purple-100 text-purple-700",ADMIN:"bg-purple-100 text-purple-700",GROUP_MANAGER:"bg-indigo-100 text-indigo-700",MANAGER:"bg-blue-100 text-blue-700",MARKETING:"bg-yellow-100 text-yellow-700",SALES:"bg-green-100 text-green-700"},$r=e=>e?e.toString().trim().replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/\s+/g,"_").toUpperCase():"",$ue=e=>{const s=$r(e),a=Uy.find(n=>$r(n.value)===s);return a?a.value:e||""},BC=e=>{const s=$r(e),a=Uy.find(n=>$r(n.value)===s);return a?a.label:typeof e=="string"?e.toLowerCase().replace(/\b\w/g,n=>n.toUpperCase()):"--"},n3=e=>{if(!e)return"--";const s=new Date(e);return Number.isNaN(s.getTime())?"--":s.toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",","")},Zw=(e,{size:s="sm"}={})=>{const a=$r(e),n=Iue[a]||"bg-gray-100 text-gray-700",r=s==="lg"?"px-3 py-1 text-sm":s==="md"?"px-2.5 py-1 text-sm":"px-2 py-1 text-xs";return t.jsx("span",{className:`${r} font-semibold rounded-md inline-flex items-center justify-center ${n}`,children:BC(e)})},To=10,Rue=(e,s)=>{const a=e?.trim()?.[0]??"",n=s?.trim()?.[0]??"";return`${a}${n}`.toUpperCase()||"U"},r3=e=>[...e].sort((s,a)=>{const n=s.created_at?new Date(s.created_at).getTime():0;return(a.created_at?new Date(a.created_at).getTime():0)-n});function Uue(){const{user:e,loading:s}=zt(),[a,n]=g.useState([]),[r,i]=g.useState(!1),[l,c]=g.useState(""),[d,m]=g.useState(""),[f,h]=g.useState(null),[y,N]=g.useState(!1),[w,p]=g.useState(!1),[v,C]=g.useState(null),[j,_]=g.useState(Wm),[T,k]=g.useState(!1),[E,A]=g.useState(null),[U,B]=g.useState(!1),[X,$]=g.useState(1),[O,G]=g.useState("Overview"),[K,ae]=g.useState(""),[R,Z]=g.useState(!1),te=$r(e?.role),ge=["ADMIN","CEO","GROUP MANAGER","MANAGER"].includes(te),le=!s&&ge,W=g.useMemo(()=>{const z=Uy.filter(ie=>$r(ie.value)!=="CEO");return[{label:"Filter by Roles",value:""},{label:"CEO",value:"CEO"},...z]},[]),ee=g.useCallback(z=>{z&&(n(ie=>ie.map(ue=>ue.id===z?{...ue,highlight:!0}:ue)),setTimeout(()=>{n(ie=>ie.map(ue=>ue.id===z?{...ue,highlight:!1}:ue))},2e3))},[]),J=g.useCallback(async()=>{i(!0);try{const z=await se.get("/users/all"),ie=Array.isArray(z.data)?z.data:[],ue=r3(ie);n(ue),h(M=>M&&(ue.find(ne=>ne.id===M.id)||null)),console.log(z.data)}catch(z){console.error("Error fetching users:",z);const ie=z.response?.data?.detail||"Failed to load users. Please try again later.";q.error(ie)}finally{i(!1)}},[]);g.useEffect(()=>{!s&&!ge&&e&&q.error("You are not authorized to access User Management.")},[ge,s,e]),g.useEffect(()=>{s||!ge||J()},[s,ge,J]),g.useEffect(()=>{document.title="Users | Sari-Sari CRM"},[]);const he=g.useMemo(()=>{const z=l.trim().toLowerCase(),ie=$r(d);return r3(a.filter(ue=>{if(!ue)return!1;const M=z===""||[ue.first_name,ue.last_name,`${ue.first_name||""} ${ue.last_name||""}`,ue.email,BC(ue.role)].filter(Boolean).some(ne=>ne.toString().toLowerCase().includes(z)),xe=ie===""||ie==="CEO"&&["CEO","ADMIN"].includes($r(ue.role))||$r(ue.role)===ie;return M&&xe}))},[a,l,d]),be=Math.max(1,Math.ceil(he.length/To)||1);g.useEffect(()=>{$(1)},[l,d]),g.useEffect(()=>{$(z=>{const ie=Math.max(1,Math.ceil(he.length/To)||1);return z>ie?ie:z})},[he.length]);const Le=g.useMemo(()=>{const z=(X-1)*To;return he.slice(z,z+To)},[he,X]);he.length===0||(X-1)*To+1,Math.min(X*To,he.length);const Me=()=>$(z=>Math.max(z-1,1)),ke=()=>$(z=>Math.min(z+1,be)),F=()=>{_(Wm),p(!1),C(null),N(!0)},ve=z=>{console.log(z),h(z),G("Overview"),ae(z?.is_active?"Active":"Inactive")},Ce=z=>{z.target.id==="userModalBackdrop"&&!U&&D()},D=()=>{h(null)},re=(z,ie)=>{_(ue=>({...ue,[z]:ie}))},oe=()=>{const z="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let ie="";for(let ue=0;ue<10;ue+=1)ie+=z.charAt(Math.floor(Math.random()*z.length));re("password",ie)},je=()=>{T||U||(N(!1),_(Wm),C(null),p(!1))},Re=z=>{_({firstName:z.first_name||"",lastName:z.last_name||"",email:z.email||"",password:"",role:$ue(z.role)}),p(!0),C(z.id),N(!0),h(null)},Ke=z=>{A({title:"Delete User",message:t.jsxs("span",{children:["Are you sure you want to delete"," ",t.jsxs("span",{className:"font-semibold",children:[z.first_name," ",z.last_name]}),"? This action cannot be undone."]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:z.id,name:`${z.first_name||""} ${z.last_name||""}`.trim()||z.email||"user"}})},et=z=>{z.preventDefault();const ie=j.firstName.trim(),ue=j.lastName.trim(),M=j.email.trim(),xe=j.password.trim(),ne="Sales",Te=!(w&&v);if(!ie||!M||!ne){q.warn("Please fill in all required fields.");return}if(Te&&!xe){q.warn("Please fill in all required fields.");return}if(xe&&xe.length<8){q.warn("Password should be at least 8 characters long.");return}const Q={first_name:ie,last_name:ue,email:M,role:ne};console.log(Q),(Te||xe)&&(Q.password=xe);const ye=`${ie} ${ue}`.trim(),P=Te?"create":"update";A({title:P==="create"?"Confirm New User":"Confirm User Update",message:P==="create"?t.jsxs("span",{children:["Create user ",t.jsx("span",{className:"font-semibold",children:ye})," with role"," ",t.jsx("span",{className:"font-semibold",children:BC(ne)}),"?"]}):t.jsxs("span",{children:["Save changes for"," ",t.jsx("span",{className:"font-semibold",children:ye||M}),"?"]}),confirmLabel:P==="create"?"Create User":"Update User",cancelLabel:"Cancel",variant:"primary",action:{type:P,payload:Q,targetId:v,name:ye||M}})},qe=async()=>{if(!E?.action){A(null);return}const{action:z}=E,{type:ie,payload:ue,targetId:M,name:xe}=z;B(!0),(ie==="create"||ie==="update")&&k(!0);try{if(ie==="create"){const Te=(await se.post("/users/createuser",ue)).data;await J(),ee(Te.id),q.success(`User "${xe}" created successfully.`),N(!1),_(Wm),C(null),p(!1)}else if(ie==="update"){if(!M)throw new Error("Missing user identifier for update.");const Te=(await se.put(`/users/updateuser/${M}`,ue)).data;await J(),h(null),ee(Te.id),q.success(`User "${xe}" updated successfully.`),N(!1),_(Wm),C(null),p(!1)}else if(ie==="delete"){if(!M)throw new Error("Missing user identifier for deletion.");await se.delete(`/users/deleteuser/${M}`),n(ne=>ne.map(Te=>Te.id===M?{...Te,is_active:!1}:Te)),f&&f.id===M&&(h(null),ae("")),q.success(`User "${xe}" deactivated successfully.`)}}catch(ne){console.error("User management error:",ne);const Te=ie==="create"?"Failed to create user. Please review the details and try again.":ie==="update"?"Failed to update user. Please review the details and try again.":"Failed to delete user. Please try again.",Q=ne.response?.data?.detail||Te;q.error(Q)}finally{(ie==="create"||ie==="update")&&k(!1),B(!1),A(null)}},Ze=()=>{U||A(null)},we=async()=>{if(!f||!K)return;const z=f.is_active?"Active":"Inactive";if(K===z)return;const ie=K==="Active";Z(!0);try{const M=(await se.put(`/users/updateuser/${f.id}`,{is_active:ie})).data;n(xe=>xe.map(ne=>ne.id===M.id?M:ne)),h(null),ae(""),q.success(`User status updated to ${K}`)}catch(ue){console.error("Failed to update user status:",ue);const M=ue.response?.data?.detail||"Failed to update user status. Please try again.";q.error(M)}finally{Z(!1)}},V=t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[(r||s||!le)&&t.jsx(xt,{}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[t.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[t.jsx(h1,{className:"mr-2 text-blue-600"}),"User Management"]}),t.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:t.jsxs("button",{type:"button",onClick:F,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[t.jsx(Cs,{className:"mr-2"})," Add User"]})})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[t.jsx(yt,{size:20,className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search users",value:l,onChange:z=>c(z.target.value),className:"focus:outline-none text-base w-full"})]}),t.jsx("div",{className:"w-full lg:w-1/4",children:t.jsx("select",{value:d,onChange:z=>m(z.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:W.map(z=>t.jsx("option",{value:z.value,children:z.label},z.value))})})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[t.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4",children:"Fullname"}),t.jsx("th",{className:"py-3 px-4",children:"Email"}),t.jsx("th",{className:"py-3 px-4",children:"Role"}),t.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),t.jsx("tbody",{children:r?t.jsx("tr",{children:t.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:3,children:"Loading users..."})}):he.length===0?t.jsx("tr",{children:t.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-400",colSpan:4,children:"No users found."})}):Le.map(z=>t.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${z.highlight?"bg-green-50":""} ${z.is_active?"":"opacity-60 bg-gray-50"}`,children:[t.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>ve(z),children:t.jsxs("div",{className:"font-medium text-blue-600 hover:underline text-sm",children:[z.first_name," ",z.last_name]})}),t.jsx("td",{className:"py-3 px-4 cursor-pointer text-sm",onClick:()=>ve(z),children:z.email}),t.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>ve(z),children:Zw(z.role)}),t.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>ve(z),children:t.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-md ${z.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:z.is_active?"Active":"Inactive"})})]},z.id))})]})}),t.jsx(Ct,{className:"mt-4",totalItems:he.length,pageSize:To,currentPage:X,onPrev:Me,onNext:ke,label:"users"})]}),pe=f?t.jsx("div",{id:"userModalBackdrop",onClick:Ce,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in p-4 sm:p-6 md:p-8 font-inter relative",children:[t.jsx("div",{className:"flex justify-end w-full",children:t.jsx("button",{onClick:D,className:"text-gray-500 hover:text-gray-700 transition mb-5 cursor-pointer",children:t.jsx(es,{size:30})})}),t.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7 mb-4 lg:mb-6 md:mb-4",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[f.profile_picture?t.jsx("img",{src:f.profile_picture,alt:`${f.first_name} ${f.last_name}`,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover border border-gray-200 shadow-sm"}):t.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-200 text-gray-700 flex items-center justify-center text-lg sm:text-xl font-semibold border border-gray-200 shadow-sm",children:Rue(f.first_name,f.last_name)}),t.jsxs("div",{children:[t.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[f.first_name," ",f.last_name]}),t.jsx("p",{className:"text-sm text-gray-500 break-all",children:f.email})]})]}),Zw(f.role,{size:"md"})]}),!["CEO","ADMIN","GROUP MANAGER","GROUP_MANAGER"].includes(f.role.toUpperCase())&&t.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Re(f),disabled:U,children:[t.jsx(hs,{className:"mr-2"}),"Edit"]}),t.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>Ke(f),disabled:U,children:[t.jsx(Nt,{className:"mr-2"}),"Delete"]})]})]}),t.jsx("div",{className:"border-b border-gray-200 mb-6"}),t.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview"].map(z=>t.jsx("button",{onClick:()=>G(z),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${O===z?"bg-[#5c636d] text-white border-white":"text-white hover:bg-[#5c636d]"}`,children:z},z))}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[t.jsx("div",{className:"lg:col-span-3",children:O==="Overview"&&t.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Email:"}),t.jsx("p",{children:f.email||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Role:"}),t.jsx("p",{children:Zw(f.role,{size:"sm"})})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Status:"}),t.jsx("p",{children:f.is_active?"Active":"Inactive"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Auth Provider:"}),t.jsx("p",{children:f.auth_provider?f.auth_provider.toString().replace(/\b\w/g,z=>z.toUpperCase()):"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Phone Number:"}),t.jsx("p",{children:f.phone_number||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Company:"}),t.jsx("p",{children:f.company?.company_name||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Company Number:"}),t.jsx("p",{children:f.company?.company_number||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Related to CEO:"}),t.jsx("p",{children:f.manager?`${f.manager.first_name} ${f.manager.last_name}`:"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Created At:"}),t.jsx("p",{children:n3(f.created_at)||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Last Login:"}),t.jsx("p",{children:f.last_login?n3(f.last_login):"Never"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Profile Picture:"}),t.jsx("p",{children:f.profile_picture?t.jsx("a",{href:f.profile_picture,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline break-all",children:"View image"}):"N/A"})]})]})})}),t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),t.jsx("div",{className:"flex flex-col gap-2 w-full",children:t.jsxs("button",{type:"button",onClick:()=>{if(!f.email){alert("No email address available");return}const z=encodeURIComponent(f.email),ie=encodeURIComponent(""),ue=encodeURIComponent(""),M=`https://mail.google.com/mail/?view=cm&fs=1&to=${z}&su=${ie}&body=${ue}`;window.open(M,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(js,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]})})]}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),t.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:K||(f.is_active?"Active":"Inactive"),onChange:z=>ae(z.target.value),children:[t.jsx("option",{value:"Active",children:"Active"}),t.jsx("option",{value:"Inactive",children:"Inactive"})]}),t.jsx("button",{onClick:we,disabled:R||K===(f.is_active?"Active":"Inactive"),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${R||K===(f.is_active?"Active":"Inactive")?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:R?"Updating...":"Update"})]})]})]})]})}):null;return t.jsxs(t.Fragment,{children:[V,pe,t.jsx(zue,{open:y,isEditing:w,isSubmitting:T,confirmProcessing:U,formData:j,onClose:je,onSubmit:et,onChange:re,onGeneratePassword:oe}),t.jsx(Fue,{open:!!E,title:E?.title,message:E?.message,confirmLabel:E?.confirmLabel,cancelLabel:E?.cancelLabel,variant:E?.variant,loading:U,onConfirm:qe,onCancel:Ze})]})}function zue({open:e,isEditing:s,isSubmitting:a,confirmProcessing:n,formData:r,onClose:i,onSubmit:l,onChange:c,onGeneratePassword:d}){if(!e)return null;const m=a||n;return t.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-lg border border-gray-200 p-6 sm:p-8 relative overflow-y-auto max-h-[90vh]",children:[t.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:m,children:t.jsx(jt,{size:22})}),t.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-6 text-center",children:s?"Edit User":"Add New User"}),t.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:l,children:[t.jsx(Ux,{label:"First Name",value:r.firstName,onChange:f=>c("firstName",f),placeholder:"John",required:!0,disabled:m}),t.jsx(Ux,{label:"Last Name",value:r.lastName,onChange:f=>c("lastName",f),placeholder:"Doe",required:!0,disabled:m}),t.jsx(Ux,{label:"Email",type:"email",value:r.email,onChange:f=>c("email",f),placeholder:"john.doe@company.com",required:!0,disabled:m||s}),t.jsx(Ux,{label:"Role",type:"select",disabled:!0,value:"Sales",onChange:f=>c("role",f),options:[{value:"",label:"Select role"},...Uy],required:!0}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Password"}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[t.jsx("input",{type:"text",value:r.password,onChange:f=>c("password",f.target.value),placeholder:s?"Leave blank to keep current password":"Enter or generate password",required:!s,disabled:m,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"}),t.jsx("button",{type:"button",onClick:d,className:"flex items-center justify-center px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-60",disabled:m,children:"Generate"})]}),s?t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Setting a password will reset the user's credentials; leave it blank to keep the current password."}):t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long."})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 md:col-span-2 mt-4",children:[t.jsx("button",{type:"button",onClick:i,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:m,children:"Cancel"}),t.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:m,children:a?"Saving...":s?"Update User":"Save User"})]})]})]})})}function Ux({label:e,type:s="text",value:a,onChange:n,placeholder:r,options:i=[],required:l=!1,disabled:c=!1}){return t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),s==="select"?t.jsx("select",{value:a??"",onChange:d=>n(d.target.value),required:l,disabled:c,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100",children:i.map(d=>t.jsx("option",{value:d.value,children:d.label},d.value))}):t.jsx("input",{type:s,value:a??"",onChange:d=>n(d.target.value),placeholder:r,required:l,disabled:c,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"})]})}function Fue({open:e,title:s,message:a,confirmLabel:n,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:c,onCancel:d}){if(!e)return null;const m=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-black hover:bg-gray-800 border border-black";return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s}),t.jsx("div",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),t.jsx("button",{type:"button",onClick:c,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${m}`,disabled:l,children:l?"Processing...":n})]})]})})}function Bue({toggleSidebar:e}){const[s,a]=g.useState(!1),n=g.useRef(null),r=Xt(),{logout:i}=er(),{user:l,fetchUser:c}=zt(),d={"/marketing/dashboard":"Dashboard","/marketing/contacts":"Contacts","/marketing/accounts":"Accounts","/marketing/leads":"Leads","/marketing/tasks":"Tasks","/marketing/campaigns":"Campaign","/marketing/templates":"Templates"};g.useEffect(()=>{c()},[]);const m=d[r.pathname]||"Marketing Panel";return g.useEffect(()=>{function f(h){n.current&&!n.current.contains(h.target)&&a(!1)}return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]),t.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-6 py-3 border-b relative",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:t.jsx(m1,{className:"text-2xl"})}),t.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:m})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("button",{className:"relative text-gray-600 hover:text-gray-800",children:[t.jsx(ch,{className:"text-xl"}),t.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs w-4 h-4 flex items-center justify-center rounded-full",children:"3"})]}),t.jsxs("div",{className:"relative",ref:n,children:[t.jsxs("button",{onClick:()=>a(!s),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[t.jsx("img",{src:l?.profile_picture,alt:"",className:"w-8 aspect-square object-cover rounded-full"}),t.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[l?.first_name," ",l?.last_name]})]}),s&&t.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-gray-100 shadow-lg rounded border z-50",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("button",{className:"px-4 py-2 text-sm hover:bg-gray-200 text-left",children:"Manage Account"}),t.jsx("div",{className:"border-t my-1"}),t.jsx("button",{onClick:i,className:"px-4 py-2 text-sm bg-red-500 text-white rounded mx-2 my-2 hover:bg-red-600",children:"Logout"})]})})]})]})]})}function Hue(){const[e,s]=g.useState(!1),[a,n]=g.useState(!1),[r,i]=g.useState(!1),[l,c]=g.useState(!1),d=Xt(),{fetchUser:m}=zt();g.useEffect(()=>{m()},[]),g.useEffect(()=>{document.title="Panel | Sari-Sari CRM"},[]);const f="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",h="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition",y=["/marketing/campaigns","/marketing/templates"],N=["/marketing/accounts","/marketing/contacts","/marketing/leads"],w=["/marketing/tasks"],p=y.includes(d.pathname),v=N.includes(d.pathname),C=w.includes(d.pathname);return g.useEffect(()=>{p&&s(!0),v&&n(!0),C&&i(!0)},[p,v,C]),t.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[t.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${l?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[t.jsx("div",{className:"bg-[#fbbf24] text-gray-900 font-bold text-xl px-6 py-4.5 tracking-wide",children:"Marketing CRM"}),t.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[t.jsxs(mt,{to:"/marketing/dashboard",className:({isActive:j})=>j?f:h,children:[t.jsx(dh,{className:"text-lg"}),t.jsx("span",{children:"Dashboard"})]}),t.jsxs("div",{children:[t.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>n(!a),children:[t.jsxs("span",{className:"flex items-center gap-2",children:[t.jsx(Es,{className:"text-lg"}),"Sales"]}),t.jsx(Xa,{className:`transition-transform ${a?"rotate-180":""}`})]}),a&&t.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[t.jsxs(mt,{to:"/marketing/accounts",className:({isActive:j})=>j?f:h,children:[t.jsx(Jt,{})," Accounts"]}),t.jsxs(mt,{to:"/marketing/contacts",className:({isActive:j})=>j?f:h,children:[t.jsx(qt,{})," Contacts"]}),t.jsxs(mt,{to:"/marketing/leads",className:({isActive:j})=>j?f:h,children:[t.jsx(Cs,{})," Leads"]})]})]}),t.jsxs("div",{children:[t.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!e),children:[t.jsxs("span",{className:"flex items-center gap-2",children:[t.jsx(sn,{className:"text-lg"}),"Tools"]}),t.jsx(Xa,{className:`transition-transform ${e?"rotate-180":""}`})]}),e&&t.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[t.jsxs(mt,{to:"/marketing/campaigns",className:({isActive:j})=>j?f:h,children:[t.jsx(W8,{})," Campaign"]}),t.jsxs(mt,{to:"/marketing/templates",className:({isActive:j})=>j?f:h,children:[t.jsx(G8,{})," Templates"]})]})]}),t.jsxs("div",{children:[t.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!r),children:[t.jsxs("span",{className:"flex items-center gap-2",children:[t.jsx(Ta,{className:"text-lg"}),"Activity"]}),t.jsx(Xa,{className:`transition-transform ${r?"rotate-180":""}`})]}),r&&t.jsx("div",{className:"ml-6 mt-2 space-y-1",children:t.jsxs(mt,{to:"/marketing/tasks",className:({isActive:j})=>j?f:h,children:[t.jsx(ts,{})," Tasks"]})})]})]}),t.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Marketing CRM"]})]}),l&&t.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>c(!1)}),t.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[t.jsx(Bue,{toggleSidebar:()=>c(!l)}),t.jsx("main",{className:"flex-1 p-6 overflow-auto",style:{backgroundColor:"#fffeee"},children:t.jsx(fu,{})})]})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Bh(e){return e+.5|0}const Il=(e,s,a)=>Math.max(Math.min(e,a),s);function pf(e){return Il(Bh(e*2.55),0,255)}function Fl(e){return Il(Bh(e*255),0,255)}function Li(e){return Il(Bh(e/2.55)/100,0,1)}function i3(e){return Il(Bh(e*100),0,100)}const Un={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},HC=[..."0123456789ABCDEF"],Gue=e=>HC[e&15],Vue=e=>HC[(e&240)>>4]+HC[e&15],zx=e=>(e&240)>>4===(e&15),Wue=e=>zx(e.r)&&zx(e.g)&&zx(e.b)&&zx(e.a);function Yue(e){var s=e.length,a;return e[0]==="#"&&(s===4||s===5?a={r:255&Un[e[1]]*17,g:255&Un[e[2]]*17,b:255&Un[e[3]]*17,a:s===5?Un[e[4]]*17:255}:(s===7||s===9)&&(a={r:Un[e[1]]<<4|Un[e[2]],g:Un[e[3]]<<4|Un[e[4]],b:Un[e[5]]<<4|Un[e[6]],a:s===9?Un[e[7]]<<4|Un[e[8]]:255})),a}const Que=(e,s)=>e<255?s(e):"";function que(e){var s=Wue(e)?Gue:Vue;return e?"#"+s(e.r)+s(e.g)+s(e.b)+Que(e.a,s):void 0}const Xue=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function A$(e,s,a){const n=s*Math.min(a,1-a),r=(i,l=(i+e/30)%12)=>a-n*Math.max(Math.min(l-3,9-l,1),-1);return[r(0),r(8),r(4)]}function Kue(e,s,a){const n=(r,i=(r+e/60)%6)=>a-a*s*Math.max(Math.min(i,4-i,1),0);return[n(5),n(3),n(1)]}function Zue(e,s,a){const n=A$(e,1,.5);let r;for(s+a>1&&(r=1/(s+a),s*=r,a*=r),r=0;r<3;r++)n[r]*=1-s-a,n[r]+=s;return n}function Jue(e,s,a,n,r){return e===r?(s-a)/n+(s<a?6:0):s===r?(a-e)/n+2:(e-s)/n+4}function Y2(e){const a=e.r/255,n=e.g/255,r=e.b/255,i=Math.max(a,n,r),l=Math.min(a,n,r),c=(i+l)/2;let d,m,f;return i!==l&&(f=i-l,m=c>.5?f/(2-i-l):f/(i+l),d=Jue(a,n,r,f,i),d=d*60+.5),[d|0,m||0,c]}function Q2(e,s,a,n){return(Array.isArray(s)?e(s[0],s[1],s[2]):e(s,a,n)).map(Fl)}function q2(e,s,a){return Q2(A$,e,s,a)}function eme(e,s,a){return Q2(Zue,e,s,a)}function tme(e,s,a){return Q2(Kue,e,s,a)}function L$(e){return(e%360+360)%360}function sme(e){const s=Xue.exec(e);let a=255,n;if(!s)return;s[5]!==n&&(a=s[6]?pf(+s[5]):Fl(+s[5]));const r=L$(+s[2]),i=+s[3]/100,l=+s[4]/100;return s[1]==="hwb"?n=eme(r,i,l):s[1]==="hsv"?n=tme(r,i,l):n=q2(r,i,l),{r:n[0],g:n[1],b:n[2],a}}function ame(e,s){var a=Y2(e);a[0]=L$(a[0]+s),a=q2(a),e.r=a[0],e.g=a[1],e.b=a[2]}function nme(e){if(!e)return;const s=Y2(e),a=s[0],n=i3(s[1]),r=i3(s[2]);return e.a<255?`hsla(${a}, ${n}%, ${r}%, ${Li(e.a)})`:`hsl(${a}, ${n}%, ${r}%)`}const l3={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},o3={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function rme(){const e={},s=Object.keys(o3),a=Object.keys(l3);let n,r,i,l,c;for(n=0;n<s.length;n++){for(l=c=s[n],r=0;r<a.length;r++)i=a[r],c=c.replace(i,l3[i]);i=parseInt(o3[l],16),e[c]=[i>>16&255,i>>8&255,i&255]}return e}let Fx;function ime(e){Fx||(Fx=rme(),Fx.transparent=[0,0,0,0]);const s=Fx[e.toLowerCase()];return s&&{r:s[0],g:s[1],b:s[2],a:s.length===4?s[3]:255}}const lme=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function ome(e){const s=lme.exec(e);let a=255,n,r,i;if(s){if(s[7]!==n){const l=+s[7];a=s[8]?pf(l):Il(l*255,0,255)}return n=+s[1],r=+s[3],i=+s[5],n=255&(s[2]?pf(n):Il(n,0,255)),r=255&(s[4]?pf(r):Il(r,0,255)),i=255&(s[6]?pf(i):Il(i,0,255)),{r:n,g:r,b:i,a}}}function cme(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${Li(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const Jw=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Sd=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function dme(e,s,a){const n=Sd(Li(e.r)),r=Sd(Li(e.g)),i=Sd(Li(e.b));return{r:Fl(Jw(n+a*(Sd(Li(s.r))-n))),g:Fl(Jw(r+a*(Sd(Li(s.g))-r))),b:Fl(Jw(i+a*(Sd(Li(s.b))-i))),a:e.a+a*(s.a-e.a)}}function Bx(e,s,a){if(e){let n=Y2(e);n[s]=Math.max(0,Math.min(n[s]+n[s]*a,s===0?360:1)),n=q2(n),e.r=n[0],e.g=n[1],e.b=n[2]}}function k$(e,s){return e&&Object.assign(s||{},e)}function c3(e){var s={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(s={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(s.a=Fl(e[3]))):(s=k$(e,{r:0,g:0,b:0,a:1}),s.a=Fl(s.a)),s}function ume(e){return e.charAt(0)==="r"?ome(e):sme(e)}class Wf{constructor(s){if(s instanceof Wf)return s;const a=typeof s;let n;a==="object"?n=c3(s):a==="string"&&(n=Yue(s)||ime(s)||ume(s)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var s=k$(this._rgb);return s&&(s.a=Li(s.a)),s}set rgb(s){this._rgb=c3(s)}rgbString(){return this._valid?cme(this._rgb):void 0}hexString(){return this._valid?que(this._rgb):void 0}hslString(){return this._valid?nme(this._rgb):void 0}mix(s,a){if(s){const n=this.rgb,r=s.rgb;let i;const l=a===i?.5:a,c=2*l-1,d=n.a-r.a,m=((c*d===-1?c:(c+d)/(1+c*d))+1)/2;i=1-m,n.r=255&m*n.r+i*r.r+.5,n.g=255&m*n.g+i*r.g+.5,n.b=255&m*n.b+i*r.b+.5,n.a=l*n.a+(1-l)*r.a,this.rgb=n}return this}interpolate(s,a){return s&&(this._rgb=dme(this._rgb,s._rgb,a)),this}clone(){return new Wf(this.rgb)}alpha(s){return this._rgb.a=Fl(s),this}clearer(s){const a=this._rgb;return a.a*=1-s,this}greyscale(){const s=this._rgb,a=Bh(s.r*.3+s.g*.59+s.b*.11);return s.r=s.g=s.b=a,this}opaquer(s){const a=this._rgb;return a.a*=1+s,this}negate(){const s=this._rgb;return s.r=255-s.r,s.g=255-s.g,s.b=255-s.b,this}lighten(s){return Bx(this._rgb,2,s),this}darken(s){return Bx(this._rgb,2,-s),this}saturate(s){return Bx(this._rgb,1,s),this}desaturate(s){return Bx(this._rgb,1,-s),this}rotate(s){return ame(this._rgb,s),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Si(){}const mme=(()=>{let e=0;return()=>e++})();function Zt(e){return e==null}function sa(e){if(Array.isArray&&Array.isArray(e))return!0;const s=Object.prototype.toString.call(e);return s.slice(0,7)==="[object"&&s.slice(-6)==="Array]"}function Bt(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Kn(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Ar(e,s){return Kn(e)?e:s}function At(e,s){return typeof e>"u"?s:e}const fme=(e,s)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/s,D$=(e,s)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*s:+e;function ws(e,s,a){if(e&&typeof e.call=="function")return e.apply(a,s)}function ls(e,s,a,n){let r,i,l;if(sa(e))for(i=e.length,r=0;r<i;r++)s.call(a,e[r],r);else if(Bt(e))for(l=Object.keys(e),i=l.length,r=0;r<i;r++)s.call(a,e[l[r]],l[r])}function a0(e,s){let a,n,r,i;if(!e||!s||e.length!==s.length)return!1;for(a=0,n=e.length;a<n;++a)if(r=e[a],i=s[a],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function n0(e){if(sa(e))return e.map(n0);if(Bt(e)){const s=Object.create(null),a=Object.keys(e),n=a.length;let r=0;for(;r<n;++r)s[a[r]]=n0(e[a[r]]);return s}return e}function M$(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function hme(e,s,a,n){if(!M$(e))return;const r=s[e],i=a[e];Bt(r)&&Bt(i)?Yf(r,i,n):s[e]=n0(i)}function Yf(e,s,a){const n=sa(s)?s:[s],r=n.length;if(!Bt(e))return e;a=a||{};const i=a.merger||hme;let l;for(let c=0;c<r;++c){if(l=n[c],!Bt(l))continue;const d=Object.keys(l);for(let m=0,f=d.length;m<f;++m)i(d[m],e,l,a)}return e}function _f(e,s){return Yf(e,s,{merger:gme})}function gme(e,s,a){if(!M$(e))return;const n=s[e],r=a[e];Bt(n)&&Bt(r)?_f(n,r):Object.prototype.hasOwnProperty.call(s,e)||(s[e]=n0(r))}const d3={"":e=>e,x:e=>e.x,y:e=>e.y};function xme(e){const s=e.split("."),a=[];let n="";for(const r of s)n+=r,n.endsWith("\\")?n=n.slice(0,-1)+".":(a.push(n),n="");return a}function pme(e){const s=xme(e);return a=>{for(const n of s){if(n==="")break;a=a&&a[n]}return a}}function fc(e,s){return(d3[s]||(d3[s]=pme(s)))(e)}function X2(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Qf=e=>typeof e<"u",Vl=e=>typeof e=="function",u3=(e,s)=>{if(e.size!==s.size)return!1;for(const a of e)if(!s.has(a))return!1;return!0};function yme(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const os=Math.PI,Os=2*os,bme=Os+os,r0=Number.POSITIVE_INFINITY,vme=os/180,aa=os/2,Eo=os/4,m3=os*2/3,P$=Math.log10,Vr=Math.sign;function Tf(e,s,a){return Math.abs(e-s)<a}function f3(e){const s=Math.round(e);e=Tf(e,s,e/1e3)?s:e;const a=Math.pow(10,Math.floor(P$(e))),n=e/a;return(n<=1?1:n<=2?2:n<=5?5:10)*a}function Nme(e){const s=[],a=Math.sqrt(e);let n;for(n=1;n<a;n++)e%n===0&&(s.push(n),s.push(e/n));return a===(a|0)&&s.push(a),s.sort((r,i)=>r-i).pop(),s}function wme(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function qf(e){return!wme(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function jme(e,s){const a=Math.round(e);return a-s<=e&&a+s>=e}function Cme(e,s,a){let n,r,i;for(n=0,r=e.length;n<r;n++)i=e[n][a],isNaN(i)||(s.min=Math.min(s.min,i),s.max=Math.max(s.max,i))}function Pi(e){return e*(os/180)}function Sme(e){return e*(180/os)}function h3(e){if(!Kn(e))return;let s=1,a=0;for(;Math.round(e*s)/s!==e;)s*=10,a++;return a}function O$(e,s){const a=s.x-e.x,n=s.y-e.y,r=Math.sqrt(a*a+n*n);let i=Math.atan2(n,a);return i<-.5*os&&(i+=Os),{angle:i,distance:r}}function GC(e,s){return Math.sqrt(Math.pow(s.x-e.x,2)+Math.pow(s.y-e.y,2))}function _me(e,s){return(e-s+bme)%Os-os}function hr(e){return(e%Os+Os)%Os}function Xf(e,s,a,n){const r=hr(e),i=hr(s),l=hr(a),c=hr(i-r),d=hr(l-r),m=hr(r-i),f=hr(r-l);return r===i||r===l||n&&i===l||c>d&&m<f}function Sa(e,s,a){return Math.max(s,Math.min(a,e))}function Tme(e){return Sa(e,-32768,32767)}function $l(e,s,a,n=1e-6){return e>=Math.min(s,a)-n&&e<=Math.max(s,a)+n}function K2(e,s,a){a=a||(l=>e[l]<s);let n=e.length-1,r=0,i;for(;n-r>1;)i=r+n>>1,a(i)?r=i:n=i;return{lo:r,hi:n}}const qo=(e,s,a,n)=>K2(e,a,n?r=>{const i=e[r][s];return i<a||i===a&&e[r+1][s]===a}:r=>e[r][s]<a),Eme=(e,s,a)=>K2(e,a,n=>e[n][s]>=a);function Ame(e,s,a){let n=0,r=e.length;for(;n<r&&e[n]<s;)n++;for(;r>n&&e[r-1]>a;)r--;return n>0||r<e.length?e.slice(n,r):e}const I$=["push","pop","shift","splice","unshift"];function Lme(e,s){if(e._chartjs){e._chartjs.listeners.push(s);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[s]}}),I$.forEach(a=>{const n="_onData"+X2(a),r=e[a];Object.defineProperty(e,a,{configurable:!0,enumerable:!1,value(...i){const l=r.apply(this,i);return e._chartjs.listeners.forEach(c=>{typeof c[n]=="function"&&c[n](...i)}),l}})})}function g3(e,s){const a=e._chartjs;if(!a)return;const n=a.listeners,r=n.indexOf(s);r!==-1&&n.splice(r,1),!(n.length>0)&&(I$.forEach(i=>{delete e[i]}),delete e._chartjs)}function $$(e){const s=new Set(e);return s.size===e.length?e:Array.from(s)}const R$=(function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame})();function U$(e,s){let a=[],n=!1;return function(...r){a=r,n||(n=!0,R$.call(window,()=>{n=!1,e.apply(s,a)}))}}function kme(e,s){let a;return function(...n){return s?(clearTimeout(a),a=setTimeout(e,s,n)):e.apply(this,n),s}}const Z2=e=>e==="start"?"left":e==="end"?"right":"center",wa=(e,s,a)=>e==="start"?s:e==="end"?a:(s+a)/2,Dme=(e,s,a,n)=>e===(n?"left":"right")?a:e==="center"?(s+a)/2:s;function Mme(e,s,a){const n=s.length;let r=0,i=n;if(e._sorted){const{iScale:l,vScale:c,_parsed:d}=e,m=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,f=l.axis,{min:h,max:y,minDefined:N,maxDefined:w}=l.getUserBounds();if(N){if(r=Math.min(qo(d,f,h).lo,a?n:qo(s,f,l.getPixelForValue(h)).lo),m){const p=d.slice(0,r+1).reverse().findIndex(v=>!Zt(v[c.axis]));r-=Math.max(0,p)}r=Sa(r,0,n-1)}if(w){let p=Math.max(qo(d,l.axis,y,!0).hi+1,a?0:qo(s,f,l.getPixelForValue(y),!0).hi+1);if(m){const v=d.slice(p-1).findIndex(C=>!Zt(C[c.axis]));p+=Math.max(0,v)}i=Sa(p,r,n)-r}else i=n-r}return{start:r,count:i}}function Pme(e){const{xScale:s,yScale:a,_scaleRanges:n}=e,r={xmin:s.min,xmax:s.max,ymin:a.min,ymax:a.max};if(!n)return e._scaleRanges=r,!0;const i=n.xmin!==s.min||n.xmax!==s.max||n.ymin!==a.min||n.ymax!==a.max;return Object.assign(n,r),i}const Hx=e=>e===0||e===1,x3=(e,s,a)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-s)*Os/a)),p3=(e,s,a)=>Math.pow(2,-10*e)*Math.sin((e-s)*Os/a)+1,Ef={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*aa)+1,easeOutSine:e=>Math.sin(e*aa),easeInOutSine:e=>-.5*(Math.cos(os*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>Hx(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Hx(e)?e:x3(e,.075,.3),easeOutElastic:e=>Hx(e)?e:p3(e,.075,.3),easeInOutElastic(e){return Hx(e)?e:e<.5?.5*x3(e*2,.1125,.45):.5+.5*p3(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let s=1.70158;return(e/=.5)<1?.5*(e*e*(((s*=1.525)+1)*e-s)):.5*((e-=2)*e*(((s*=1.525)+1)*e+s)+2)},easeInBounce:e=>1-Ef.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?Ef.easeInBounce(e*2)*.5:Ef.easeOutBounce(e*2-1)*.5+.5};function J2(e){if(e&&typeof e=="object"){const s=e.toString();return s==="[object CanvasPattern]"||s==="[object CanvasGradient]"}return!1}function y3(e){return J2(e)?e:new Wf(e)}function ej(e){return J2(e)?e:new Wf(e).saturate(.5).darken(.1).hexString()}const Ome=["x","y","borderWidth","radius","tension"],Ime=["color","borderColor","backgroundColor"];function $me(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:s=>s!=="onProgress"&&s!=="onComplete"&&s!=="fn"}),e.set("animations",{colors:{type:"color",properties:Ime},numbers:{type:"number",properties:Ome}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:s=>s|0}}}})}function Rme(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const b3=new Map;function Ume(e,s){s=s||{};const a=e+JSON.stringify(s);let n=b3.get(a);return n||(n=new Intl.NumberFormat(e,s),b3.set(a,n)),n}function eS(e,s,a){return Ume(s,a).format(e)}const zme={values(e){return sa(e)?e:""+e},numeric(e,s,a){if(e===0)return"0";const n=this.chart.options.locale;let r,i=e;if(a.length>1){const m=Math.max(Math.abs(a[0].value),Math.abs(a[a.length-1].value));(m<1e-4||m>1e15)&&(r="scientific"),i=Fme(e,a)}const l=P$(Math.abs(i)),c=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),d={notation:r,minimumFractionDigits:c,maximumFractionDigits:c};return Object.assign(d,this.options.ticks.format),eS(e,n,d)}};function Fme(e,s){let a=s.length>3?s[2].value-s[1].value:s[1].value-s[0].value;return Math.abs(a)>=1&&e!==Math.floor(e)&&(a=e-Math.floor(e)),a}var z$={formatters:zme};function Bme(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(s,a)=>a.lineWidth,tickColor:(s,a)=>a.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:z$.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:s=>!s.startsWith("before")&&!s.startsWith("after")&&s!=="callback"&&s!=="parser",_indexable:s=>s!=="borderDash"&&s!=="tickBorderDash"&&s!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:s=>s!=="backdropPadding"&&s!=="callback",_indexable:s=>s!=="backdropPadding"})}const hc=Object.create(null),VC=Object.create(null);function Af(e,s){if(!s)return e;const a=s.split(".");for(let n=0,r=a.length;n<r;++n){const i=a[n];e=e[i]||(e[i]=Object.create(null))}return e}function tj(e,s,a){return typeof s=="string"?Yf(Af(e,s),a):Yf(Af(e,""),s)}class Hme{constructor(s,a){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,r)=>ej(r.backgroundColor),this.hoverBorderColor=(n,r)=>ej(r.borderColor),this.hoverColor=(n,r)=>ej(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(s),this.apply(a)}set(s,a){return tj(this,s,a)}get(s){return Af(this,s)}describe(s,a){return tj(VC,s,a)}override(s,a){return tj(hc,s,a)}route(s,a,n,r){const i=Af(this,s),l=Af(this,n),c="_"+a;Object.defineProperties(i,{[c]:{value:i[a],writable:!0},[a]:{enumerable:!0,get(){const d=this[c],m=l[r];return Bt(d)?Object.assign({},m,d):At(d,m)},set(d){this[c]=d}}})}apply(s){s.forEach(a=>a(this))}}var Us=new Hme({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[$me,Rme,Bme]);function Gme(e){return!e||Zt(e.size)||Zt(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function v3(e,s,a,n,r){let i=s[r];return i||(i=s[r]=e.measureText(r).width,a.push(r)),i>n&&(n=i),n}function Ao(e,s,a){const n=e.currentDevicePixelRatio,r=a!==0?Math.max(a/2,.5):0;return Math.round((s-r)*n)/n+r}function N3(e,s){!s&&!e||(s=s||e.getContext("2d"),s.save(),s.resetTransform(),s.clearRect(0,0,e.width,e.height),s.restore())}function WC(e,s,a,n){F$(e,s,a,n,null)}function F$(e,s,a,n,r){let i,l,c,d,m,f,h,y;const N=s.pointStyle,w=s.rotation,p=s.radius;let v=(w||0)*vme;if(N&&typeof N=="object"&&(i=N.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){e.save(),e.translate(a,n),e.rotate(v),e.drawImage(N,-N.width/2,-N.height/2,N.width,N.height),e.restore();return}if(!(isNaN(p)||p<=0)){switch(e.beginPath(),N){default:r?e.ellipse(a,n,r/2,p,0,0,Os):e.arc(a,n,p,0,Os),e.closePath();break;case"triangle":f=r?r/2:p,e.moveTo(a+Math.sin(v)*f,n-Math.cos(v)*p),v+=m3,e.lineTo(a+Math.sin(v)*f,n-Math.cos(v)*p),v+=m3,e.lineTo(a+Math.sin(v)*f,n-Math.cos(v)*p),e.closePath();break;case"rectRounded":m=p*.516,d=p-m,l=Math.cos(v+Eo)*d,h=Math.cos(v+Eo)*(r?r/2-m:d),c=Math.sin(v+Eo)*d,y=Math.sin(v+Eo)*(r?r/2-m:d),e.arc(a-h,n-c,m,v-os,v-aa),e.arc(a+y,n-l,m,v-aa,v),e.arc(a+h,n+c,m,v,v+aa),e.arc(a-y,n+l,m,v+aa,v+os),e.closePath();break;case"rect":if(!w){d=Math.SQRT1_2*p,f=r?r/2:d,e.rect(a-f,n-d,2*f,2*d);break}v+=Eo;case"rectRot":h=Math.cos(v)*(r?r/2:p),l=Math.cos(v)*p,c=Math.sin(v)*p,y=Math.sin(v)*(r?r/2:p),e.moveTo(a-h,n-c),e.lineTo(a+y,n-l),e.lineTo(a+h,n+c),e.lineTo(a-y,n+l),e.closePath();break;case"crossRot":v+=Eo;case"cross":h=Math.cos(v)*(r?r/2:p),l=Math.cos(v)*p,c=Math.sin(v)*p,y=Math.sin(v)*(r?r/2:p),e.moveTo(a-h,n-c),e.lineTo(a+h,n+c),e.moveTo(a+y,n-l),e.lineTo(a-y,n+l);break;case"star":h=Math.cos(v)*(r?r/2:p),l=Math.cos(v)*p,c=Math.sin(v)*p,y=Math.sin(v)*(r?r/2:p),e.moveTo(a-h,n-c),e.lineTo(a+h,n+c),e.moveTo(a+y,n-l),e.lineTo(a-y,n+l),v+=Eo,h=Math.cos(v)*(r?r/2:p),l=Math.cos(v)*p,c=Math.sin(v)*p,y=Math.sin(v)*(r?r/2:p),e.moveTo(a-h,n-c),e.lineTo(a+h,n+c),e.moveTo(a+y,n-l),e.lineTo(a-y,n+l);break;case"line":l=r?r/2:Math.cos(v)*p,c=Math.sin(v)*p,e.moveTo(a-l,n-c),e.lineTo(a+l,n+c);break;case"dash":e.moveTo(a,n),e.lineTo(a+Math.cos(v)*(r?r/2:p),n+Math.sin(v)*p);break;case!1:e.closePath();break}e.fill(),s.borderWidth>0&&e.stroke()}}function Kf(e,s,a){return a=a||.5,!s||e&&e.x>s.left-a&&e.x<s.right+a&&e.y>s.top-a&&e.y<s.bottom+a}function tS(e,s){e.save(),e.beginPath(),e.rect(s.left,s.top,s.right-s.left,s.bottom-s.top),e.clip()}function sS(e){e.restore()}function Vme(e,s,a,n,r){if(!s)return e.lineTo(a.x,a.y);if(r==="middle"){const i=(s.x+a.x)/2;e.lineTo(i,s.y),e.lineTo(i,a.y)}else r==="after"!=!!n?e.lineTo(s.x,a.y):e.lineTo(a.x,s.y);e.lineTo(a.x,a.y)}function Wme(e,s,a,n){if(!s)return e.lineTo(a.x,a.y);e.bezierCurveTo(n?s.cp1x:s.cp2x,n?s.cp1y:s.cp2y,n?a.cp2x:a.cp1x,n?a.cp2y:a.cp1y,a.x,a.y)}function Yme(e,s){s.translation&&e.translate(s.translation[0],s.translation[1]),Zt(s.rotation)||e.rotate(s.rotation),s.color&&(e.fillStyle=s.color),s.textAlign&&(e.textAlign=s.textAlign),s.textBaseline&&(e.textBaseline=s.textBaseline)}function Qme(e,s,a,n,r){if(r.strikethrough||r.underline){const i=e.measureText(n),l=s-i.actualBoundingBoxLeft,c=s+i.actualBoundingBoxRight,d=a-i.actualBoundingBoxAscent,m=a+i.actualBoundingBoxDescent,f=r.strikethrough?(d+m)/2:m;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(l,f),e.lineTo(c,f),e.stroke()}}function qme(e,s){const a=e.fillStyle;e.fillStyle=s.color,e.fillRect(s.left,s.top,s.width,s.height),e.fillStyle=a}function Zf(e,s,a,n,r,i={}){const l=sa(s)?s:[s],c=i.strokeWidth>0&&i.strokeColor!=="";let d,m;for(e.save(),e.font=r.string,Yme(e,i),d=0;d<l.length;++d)m=l[d],i.backdrop&&qme(e,i.backdrop),c&&(i.strokeColor&&(e.strokeStyle=i.strokeColor),Zt(i.strokeWidth)||(e.lineWidth=i.strokeWidth),e.strokeText(m,a,n,i.maxWidth)),e.fillText(m,a,n,i.maxWidth),Qme(e,a,n,m,i),n+=Number(r.lineHeight);e.restore()}function i0(e,s){const{x:a,y:n,w:r,h:i,radius:l}=s;e.arc(a+l.topLeft,n+l.topLeft,l.topLeft,1.5*os,os,!0),e.lineTo(a,n+i-l.bottomLeft),e.arc(a+l.bottomLeft,n+i-l.bottomLeft,l.bottomLeft,os,aa,!0),e.lineTo(a+r-l.bottomRight,n+i),e.arc(a+r-l.bottomRight,n+i-l.bottomRight,l.bottomRight,aa,0,!0),e.lineTo(a+r,n+l.topRight),e.arc(a+r-l.topRight,n+l.topRight,l.topRight,0,-aa,!0),e.lineTo(a+l.topLeft,n)}const Xme=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Kme=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Zme(e,s){const a=(""+e).match(Xme);if(!a||a[1]==="normal")return s*1.2;switch(e=+a[2],a[3]){case"px":return e;case"%":e/=100;break}return s*e}const Jme=e=>+e||0;function aS(e,s){const a={},n=Bt(s),r=n?Object.keys(s):s,i=Bt(e)?n?l=>At(e[l],e[s[l]]):l=>e[l]:()=>e;for(const l of r)a[l]=Jme(i(l));return a}function B$(e){return aS(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Fd(e){return aS(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Zn(e){const s=B$(e);return s.width=s.left+s.right,s.height=s.top+s.bottom,s}function _a(e,s){e=e||{},s=s||Us.font;let a=At(e.size,s.size);typeof a=="string"&&(a=parseInt(a,10));let n=At(e.style,s.style);n&&!(""+n).match(Kme)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const r={family:At(e.family,s.family),lineHeight:Zme(At(e.lineHeight,s.lineHeight),a),size:a,style:n,weight:At(e.weight,s.weight),string:""};return r.string=Gme(r),r}function Gx(e,s,a,n){let r,i,l;for(r=0,i=e.length;r<i;++r)if(l=e[r],l!==void 0&&l!==void 0)return l}function efe(e,s,a){const{min:n,max:r}=e,i=D$(s,(r-n)/2),l=(c,d)=>a&&c===0?0:c+d;return{min:l(n,-Math.abs(i)),max:l(r,i)}}function Cc(e,s){return Object.assign(Object.create(e),s)}function nS(e,s=[""],a,n,r=()=>e[0]){const i=a||e;typeof n>"u"&&(n=W$("_fallback",e));const l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:n,_getTarget:r,override:c=>nS([c,...e],s,i,n)};return new Proxy(l,{deleteProperty(c,d){return delete c[d],delete c._keys,delete e[0][d],!0},get(c,d){return G$(c,d,()=>ofe(d,s,e,c))},getOwnPropertyDescriptor(c,d){return Reflect.getOwnPropertyDescriptor(c._scopes[0],d)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(c,d){return j3(c).includes(d)},ownKeys(c){return j3(c)},set(c,d,m){const f=c._storage||(c._storage=r());return c[d]=f[d]=m,delete c._keys,!0}})}function lu(e,s,a,n){const r={_cacheable:!1,_proxy:e,_context:s,_subProxy:a,_stack:new Set,_descriptors:H$(e,n),setContext:i=>lu(e,i,a,n),override:i=>lu(e.override(i),s,a,n)};return new Proxy(r,{deleteProperty(i,l){return delete i[l],delete e[l],!0},get(i,l,c){return G$(i,l,()=>sfe(i,l,c))},getOwnPropertyDescriptor(i,l){return i._descriptors.allKeys?Reflect.has(e,l)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,l)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(i,l){return Reflect.has(e,l)},ownKeys(){return Reflect.ownKeys(e)},set(i,l,c){return e[l]=c,delete i[l],!0}})}function H$(e,s={scriptable:!0,indexable:!0}){const{_scriptable:a=s.scriptable,_indexable:n=s.indexable,_allKeys:r=s.allKeys}=e;return{allKeys:r,scriptable:a,indexable:n,isScriptable:Vl(a)?a:()=>a,isIndexable:Vl(n)?n:()=>n}}const tfe=(e,s)=>e?e+X2(s):s,rS=(e,s)=>Bt(s)&&e!=="adapters"&&(Object.getPrototypeOf(s)===null||s.constructor===Object);function G$(e,s,a){if(Object.prototype.hasOwnProperty.call(e,s)||s==="constructor")return e[s];const n=a();return e[s]=n,n}function sfe(e,s,a){const{_proxy:n,_context:r,_subProxy:i,_descriptors:l}=e;let c=n[s];return Vl(c)&&l.isScriptable(s)&&(c=afe(s,c,e,a)),sa(c)&&c.length&&(c=nfe(s,c,e,l.isIndexable)),rS(s,c)&&(c=lu(c,r,i&&i[s],l)),c}function afe(e,s,a,n){const{_proxy:r,_context:i,_subProxy:l,_stack:c}=a;if(c.has(e))throw new Error("Recursion detected: "+Array.from(c).join("->")+"->"+e);c.add(e);let d=s(i,l||n);return c.delete(e),rS(e,d)&&(d=iS(r._scopes,r,e,d)),d}function nfe(e,s,a,n){const{_proxy:r,_context:i,_subProxy:l,_descriptors:c}=a;if(typeof i.index<"u"&&n(e))return s[i.index%s.length];if(Bt(s[0])){const d=s,m=r._scopes.filter(f=>f!==d);s=[];for(const f of d){const h=iS(m,r,e,f);s.push(lu(h,i,l&&l[e],c))}}return s}function V$(e,s,a){return Vl(e)?e(s,a):e}const rfe=(e,s)=>e===!0?s:typeof e=="string"?fc(s,e):void 0;function ife(e,s,a,n,r){for(const i of s){const l=rfe(a,i);if(l){e.add(l);const c=V$(l._fallback,a,r);if(typeof c<"u"&&c!==a&&c!==n)return c}else if(l===!1&&typeof n<"u"&&a!==n)return null}return!1}function iS(e,s,a,n){const r=s._rootScopes,i=V$(s._fallback,a,n),l=[...e,...r],c=new Set;c.add(n);let d=w3(c,l,a,i||a,n);return d===null||typeof i<"u"&&i!==a&&(d=w3(c,l,i,d,n),d===null)?!1:nS(Array.from(c),[""],r,i,()=>lfe(s,a,n))}function w3(e,s,a,n,r){for(;a;)a=ife(e,s,a,n,r);return a}function lfe(e,s,a){const n=e._getTarget();s in n||(n[s]={});const r=n[s];return sa(r)&&Bt(a)?a:r||{}}function ofe(e,s,a,n){let r;for(const i of s)if(r=W$(tfe(i,e),a),typeof r<"u")return rS(e,r)?iS(a,n,e,r):r}function W$(e,s){for(const a of s){if(!a)continue;const n=a[e];if(typeof n<"u")return n}}function j3(e){let s=e._keys;return s||(s=e._keys=cfe(e._scopes)),s}function cfe(e){const s=new Set;for(const a of e)for(const n of Object.keys(a).filter(r=>!r.startsWith("_")))s.add(n);return Array.from(s)}const dfe=Number.EPSILON||1e-14,ou=(e,s)=>s<e.length&&!e[s].skip&&e[s],Y$=e=>e==="x"?"y":"x";function ufe(e,s,a,n){const r=e.skip?s:e,i=s,l=a.skip?s:a,c=GC(i,r),d=GC(l,i);let m=c/(c+d),f=d/(c+d);m=isNaN(m)?0:m,f=isNaN(f)?0:f;const h=n*m,y=n*f;return{previous:{x:i.x-h*(l.x-r.x),y:i.y-h*(l.y-r.y)},next:{x:i.x+y*(l.x-r.x),y:i.y+y*(l.y-r.y)}}}function mfe(e,s,a){const n=e.length;let r,i,l,c,d,m=ou(e,0);for(let f=0;f<n-1;++f)if(d=m,m=ou(e,f+1),!(!d||!m)){if(Tf(s[f],0,dfe)){a[f]=a[f+1]=0;continue}r=a[f]/s[f],i=a[f+1]/s[f],c=Math.pow(r,2)+Math.pow(i,2),!(c<=9)&&(l=3/Math.sqrt(c),a[f]=r*l*s[f],a[f+1]=i*l*s[f])}}function ffe(e,s,a="x"){const n=Y$(a),r=e.length;let i,l,c,d=ou(e,0);for(let m=0;m<r;++m){if(l=c,c=d,d=ou(e,m+1),!c)continue;const f=c[a],h=c[n];l&&(i=(f-l[a])/3,c[`cp1${a}`]=f-i,c[`cp1${n}`]=h-i*s[m]),d&&(i=(d[a]-f)/3,c[`cp2${a}`]=f+i,c[`cp2${n}`]=h+i*s[m])}}function hfe(e,s="x"){const a=Y$(s),n=e.length,r=Array(n).fill(0),i=Array(n);let l,c,d,m=ou(e,0);for(l=0;l<n;++l)if(c=d,d=m,m=ou(e,l+1),!!d){if(m){const f=m[s]-d[s];r[l]=f!==0?(m[a]-d[a])/f:0}i[l]=c?m?Vr(r[l-1])!==Vr(r[l])?0:(r[l-1]+r[l])/2:r[l-1]:r[l]}mfe(e,r,i),ffe(e,i,s)}function Vx(e,s,a){return Math.max(Math.min(e,a),s)}function gfe(e,s){let a,n,r,i,l,c=Kf(e[0],s);for(a=0,n=e.length;a<n;++a)l=i,i=c,c=a<n-1&&Kf(e[a+1],s),i&&(r=e[a],l&&(r.cp1x=Vx(r.cp1x,s.left,s.right),r.cp1y=Vx(r.cp1y,s.top,s.bottom)),c&&(r.cp2x=Vx(r.cp2x,s.left,s.right),r.cp2y=Vx(r.cp2y,s.top,s.bottom)))}function xfe(e,s,a,n,r){let i,l,c,d;if(s.spanGaps&&(e=e.filter(m=>!m.skip)),s.cubicInterpolationMode==="monotone")hfe(e,r);else{let m=n?e[e.length-1]:e[0];for(i=0,l=e.length;i<l;++i)c=e[i],d=ufe(m,c,e[Math.min(i+1,l-(n?0:1))%l],s.tension),c.cp1x=d.previous.x,c.cp1y=d.previous.y,c.cp2x=d.next.x,c.cp2y=d.next.y,m=c}s.capBezierPoints&&gfe(e,a)}function lS(){return typeof window<"u"&&typeof document<"u"}function oS(e){let s=e.parentNode;return s&&s.toString()==="[object ShadowRoot]"&&(s=s.host),s}function l0(e,s,a){let n;return typeof e=="string"?(n=parseInt(e,10),e.indexOf("%")!==-1&&(n=n/100*s.parentNode[a])):n=e,n}const zy=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function pfe(e,s){return zy(e).getPropertyValue(s)}const yfe=["top","right","bottom","left"];function sc(e,s,a){const n={};a=a?"-"+a:"";for(let r=0;r<4;r++){const i=yfe[r];n[i]=parseFloat(e[s+"-"+i+a])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const bfe=(e,s,a)=>(e>0||s>0)&&(!a||!a.shadowRoot);function vfe(e,s){const a=e.touches,n=a&&a.length?a[0]:e,{offsetX:r,offsetY:i}=n;let l=!1,c,d;if(bfe(r,i,e.target))c=r,d=i;else{const m=s.getBoundingClientRect();c=n.clientX-m.left,d=n.clientY-m.top,l=!0}return{x:c,y:d,box:l}}function Uo(e,s){if("native"in e)return e;const{canvas:a,currentDevicePixelRatio:n}=s,r=zy(a),i=r.boxSizing==="border-box",l=sc(r,"padding"),c=sc(r,"border","width"),{x:d,y:m,box:f}=vfe(e,a),h=l.left+(f&&c.left),y=l.top+(f&&c.top);let{width:N,height:w}=s;return i&&(N-=l.width+c.width,w-=l.height+c.height),{x:Math.round((d-h)/N*a.width/n),y:Math.round((m-y)/w*a.height/n)}}function Nfe(e,s,a){let n,r;if(s===void 0||a===void 0){const i=e&&oS(e);if(!i)s=e.clientWidth,a=e.clientHeight;else{const l=i.getBoundingClientRect(),c=zy(i),d=sc(c,"border","width"),m=sc(c,"padding");s=l.width-m.width-d.width,a=l.height-m.height-d.height,n=l0(c.maxWidth,i,"clientWidth"),r=l0(c.maxHeight,i,"clientHeight")}}return{width:s,height:a,maxWidth:n||r0,maxHeight:r||r0}}const Rl=e=>Math.round(e*10)/10;function wfe(e,s,a,n){const r=zy(e),i=sc(r,"margin"),l=l0(r.maxWidth,e,"clientWidth")||r0,c=l0(r.maxHeight,e,"clientHeight")||r0,d=Nfe(e,s,a);let{width:m,height:f}=d;if(r.boxSizing==="content-box"){const y=sc(r,"border","width"),N=sc(r,"padding");m-=N.width+y.width,f-=N.height+y.height}return m=Math.max(0,m-i.width),f=Math.max(0,n?m/n:f-i.height),m=Rl(Math.min(m,l,d.maxWidth)),f=Rl(Math.min(f,c,d.maxHeight)),m&&!f&&(f=Rl(m/2)),(s!==void 0||a!==void 0)&&n&&d.height&&f>d.height&&(f=d.height,m=Rl(Math.floor(f*n))),{width:m,height:f}}function C3(e,s,a){const n=s||1,r=Rl(e.height*n),i=Rl(e.width*n);e.height=Rl(e.height),e.width=Rl(e.width);const l=e.canvas;return l.style&&(a||!l.style.height&&!l.style.width)&&(l.style.height=`${e.height}px`,l.style.width=`${e.width}px`),e.currentDevicePixelRatio!==n||l.height!==r||l.width!==i?(e.currentDevicePixelRatio=n,l.height=r,l.width=i,e.ctx.setTransform(n,0,0,n,0,0),!0):!1}const jfe=(function(){let e=!1;try{const s={get passive(){return e=!0,!1}};lS()&&(window.addEventListener("test",null,s),window.removeEventListener("test",null,s))}catch{}return e})();function S3(e,s){const a=pfe(e,s),n=a&&a.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function zo(e,s,a,n){return{x:e.x+a*(s.x-e.x),y:e.y+a*(s.y-e.y)}}function Cfe(e,s,a,n){return{x:e.x+a*(s.x-e.x),y:n==="middle"?a<.5?e.y:s.y:n==="after"?a<1?e.y:s.y:a>0?s.y:e.y}}function Sfe(e,s,a,n){const r={x:e.cp2x,y:e.cp2y},i={x:s.cp1x,y:s.cp1y},l=zo(e,r,a),c=zo(r,i,a),d=zo(i,s,a),m=zo(l,c,a),f=zo(c,d,a);return zo(m,f,a)}const _fe=function(e,s){return{x(a){return e+e+s-a},setWidth(a){s=a},textAlign(a){return a==="center"?a:a==="right"?"left":"right"},xPlus(a,n){return a-n},leftForLtr(a,n){return a-n}}},Tfe=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,s){return e+s},leftForLtr(e,s){return e}}};function Bd(e,s,a){return e?_fe(s,a):Tfe()}function Q$(e,s){let a,n;(s==="ltr"||s==="rtl")&&(a=e.canvas.style,n=[a.getPropertyValue("direction"),a.getPropertyPriority("direction")],a.setProperty("direction",s,"important"),e.prevTextDirection=n)}function q$(e,s){s!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",s[0],s[1]))}function X$(e){return e==="angle"?{between:Xf,compare:_me,normalize:hr}:{between:$l,compare:(s,a)=>s-a,normalize:s=>s}}function _3({start:e,end:s,count:a,loop:n,style:r}){return{start:e%a,end:s%a,loop:n&&(s-e+1)%a===0,style:r}}function Efe(e,s,a){const{property:n,start:r,end:i}=a,{between:l,normalize:c}=X$(n),d=s.length;let{start:m,end:f,loop:h}=e,y,N;if(h){for(m+=d,f+=d,y=0,N=d;y<N&&l(c(s[m%d][n]),r,i);++y)m--,f--;m%=d,f%=d}return f<m&&(f+=d),{start:m,end:f,loop:h,style:e.style}}function Afe(e,s,a){if(!a)return[e];const{property:n,start:r,end:i}=a,l=s.length,{compare:c,between:d,normalize:m}=X$(n),{start:f,end:h,loop:y,style:N}=Efe(e,s,a),w=[];let p=!1,v=null,C,j,_;const T=()=>d(r,_,C)&&c(r,_)!==0,k=()=>c(i,C)===0||d(i,_,C),E=()=>p||T(),A=()=>!p||k();for(let U=f,B=f;U<=h;++U)j=s[U%l],!j.skip&&(C=m(j[n]),C!==_&&(p=d(C,r,i),v===null&&E()&&(v=c(C,r)===0?U:B),v!==null&&A()&&(w.push(_3({start:v,end:U,loop:y,count:l,style:N})),v=null),B=U,_=C));return v!==null&&w.push(_3({start:v,end:h,loop:y,count:l,style:N})),w}function Lfe(e,s){const a=[],n=e.segments;for(let r=0;r<n.length;r++){const i=Afe(n[r],e.points,s);i.length&&a.push(...i)}return a}function kfe(e,s,a,n){let r=0,i=s-1;if(a&&!n)for(;r<s&&!e[r].skip;)r++;for(;r<s&&e[r].skip;)r++;for(r%=s,a&&(i+=r);i>r&&e[i%s].skip;)i--;return i%=s,{start:r,end:i}}function Dfe(e,s,a,n){const r=e.length,i=[];let l=s,c=e[s],d;for(d=s+1;d<=a;++d){const m=e[d%r];m.skip||m.stop?c.skip||(n=!1,i.push({start:s%r,end:(d-1)%r,loop:n}),s=l=m.stop?d:null):(l=d,c.skip&&(s=d)),c=m}return l!==null&&i.push({start:s%r,end:l%r,loop:n}),i}function Mfe(e,s){const a=e.points,n=e.options.spanGaps,r=a.length;if(!r)return[];const i=!!e._loop,{start:l,end:c}=kfe(a,r,i,n);if(n===!0)return T3(e,[{start:l,end:c,loop:i}],a,s);const d=c<l?c+r:c,m=!!e._fullLoop&&l===0&&c===r-1;return T3(e,Dfe(a,l,d,m),a,s)}function T3(e,s,a,n){return!n||!n.setContext||!a?s:Pfe(e,s,a,n)}function Pfe(e,s,a,n){const r=e._chart.getContext(),i=E3(e.options),{_datasetIndex:l,options:{spanGaps:c}}=e,d=a.length,m=[];let f=i,h=s[0].start,y=h;function N(w,p,v,C){const j=c?-1:1;if(w!==p){for(w+=d;a[w%d].skip;)w-=j;for(;a[p%d].skip;)p+=j;w%d!==p%d&&(m.push({start:w%d,end:p%d,loop:v,style:C}),f=C,h=p%d)}}for(const w of s){h=c?h:w.start;let p=a[h%d],v;for(y=h+1;y<=w.end;y++){const C=a[y%d];v=E3(n.setContext(Cc(r,{type:"segment",p0:p,p1:C,p0DataIndex:(y-1)%d,p1DataIndex:y%d,datasetIndex:l}))),Ofe(v,f)&&N(h,y-1,w.loop,f),p=C,f=v}h<y-1&&N(h,y-1,w.loop,f)}return m}function E3(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function Ofe(e,s){if(!s)return!1;const a=[],n=function(r,i){return J2(i)?(a.includes(i)||a.push(i),a.indexOf(i)):i};return JSON.stringify(e,n)!==JSON.stringify(s,n)}function Wx(e,s,a){return e.options.clip?e[a]:s[a]}function Ife(e,s){const{xScale:a,yScale:n}=e;return a&&n?{left:Wx(a,s,"left"),right:Wx(a,s,"right"),top:Wx(n,s,"top"),bottom:Wx(n,s,"bottom")}:s}function $fe(e,s){const a=s._clip;if(a.disabled)return!1;const n=Ife(s,e.chartArea);return{left:a.left===!1?0:n.left-(a.left===!0?0:a.left),right:a.right===!1?e.width:n.right+(a.right===!0?0:a.right),top:a.top===!1?0:n.top-(a.top===!0?0:a.top),bottom:a.bottom===!1?e.height:n.bottom+(a.bottom===!0?0:a.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Rfe{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(s,a,n,r){const i=a.listeners[r],l=a.duration;i.forEach(c=>c({chart:s,initial:a.initial,numSteps:l,currentStep:Math.min(n-a.start,l)}))}_refresh(){this._request||(this._running=!0,this._request=R$.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(s=Date.now()){let a=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const i=n.items;let l=i.length-1,c=!1,d;for(;l>=0;--l)d=i[l],d._active?(d._total>n.duration&&(n.duration=d._total),d.tick(s),c=!0):(i[l]=i[i.length-1],i.pop());c&&(r.draw(),this._notify(r,n,s,"progress")),i.length||(n.running=!1,this._notify(r,n,s,"complete"),n.initial=!1),a+=i.length}),this._lastDate=s,a===0&&(this._running=!1)}_getAnims(s){const a=this._charts;let n=a.get(s);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},a.set(s,n)),n}listen(s,a,n){this._getAnims(s).listeners[a].push(n)}add(s,a){!a||!a.length||this._getAnims(s).items.push(...a)}has(s){return this._getAnims(s).items.length>0}start(s){const a=this._charts.get(s);a&&(a.running=!0,a.start=Date.now(),a.duration=a.items.reduce((n,r)=>Math.max(n,r._duration),0),this._refresh())}running(s){if(!this._running)return!1;const a=this._charts.get(s);return!(!a||!a.running||!a.items.length)}stop(s){const a=this._charts.get(s);if(!a||!a.items.length)return;const n=a.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();a.items=[],this._notify(s,a,Date.now(),"complete")}remove(s){return this._charts.delete(s)}}var Ti=new Rfe;const A3="transparent",Ufe={boolean(e,s,a){return a>.5?s:e},color(e,s,a){const n=y3(e||A3),r=n.valid&&y3(s||A3);return r&&r.valid?r.mix(n,a).hexString():s},number(e,s,a){return e+(s-e)*a}};class zfe{constructor(s,a,n,r){const i=a[n];r=Gx([s.to,r,i,s.from]);const l=Gx([s.from,i,r]);this._active=!0,this._fn=s.fn||Ufe[s.type||typeof l],this._easing=Ef[s.easing]||Ef.linear,this._start=Math.floor(Date.now()+(s.delay||0)),this._duration=this._total=Math.floor(s.duration),this._loop=!!s.loop,this._target=a,this._prop=n,this._from=l,this._to=r,this._promises=void 0}active(){return this._active}update(s,a,n){if(this._active){this._notify(!1);const r=this._target[this._prop],i=n-this._start,l=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(l,s.duration)),this._total+=i,this._loop=!!s.loop,this._to=Gx([s.to,a,r,s.from]),this._from=Gx([s.from,r,a])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(s){const a=s-this._start,n=this._duration,r=this._prop,i=this._from,l=this._loop,c=this._to;let d;if(this._active=i!==c&&(l||a<n),!this._active){this._target[r]=c,this._notify(!0);return}if(a<0){this._target[r]=i;return}d=a/n%2,d=l&&d>1?2-d:d,d=this._easing(Math.min(1,Math.max(0,d))),this._target[r]=this._fn(i,c,d)}wait(){const s=this._promises||(this._promises=[]);return new Promise((a,n)=>{s.push({res:a,rej:n})})}_notify(s){const a=s?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][a]()}}class K${constructor(s,a){this._chart=s,this._properties=new Map,this.configure(a)}configure(s){if(!Bt(s))return;const a=Object.keys(Us.animation),n=this._properties;Object.getOwnPropertyNames(s).forEach(r=>{const i=s[r];if(!Bt(i))return;const l={};for(const c of a)l[c]=i[c];(sa(i.properties)&&i.properties||[r]).forEach(c=>{(c===r||!n.has(c))&&n.set(c,l)})})}_animateOptions(s,a){const n=a.options,r=Bfe(s,n);if(!r)return[];const i=this._createAnimations(r,n);return n.$shared&&Ffe(s.options.$animations,n).then(()=>{s.options=n},()=>{}),i}_createAnimations(s,a){const n=this._properties,r=[],i=s.$animations||(s.$animations={}),l=Object.keys(a),c=Date.now();let d;for(d=l.length-1;d>=0;--d){const m=l[d];if(m.charAt(0)==="$")continue;if(m==="options"){r.push(...this._animateOptions(s,a));continue}const f=a[m];let h=i[m];const y=n.get(m);if(h)if(y&&h.active()){h.update(y,f,c);continue}else h.cancel();if(!y||!y.duration){s[m]=f;continue}i[m]=h=new zfe(y,s,m,f),r.push(h)}return r}update(s,a){if(this._properties.size===0){Object.assign(s,a);return}const n=this._createAnimations(s,a);if(n.length)return Ti.add(this._chart,n),!0}}function Ffe(e,s){const a=[],n=Object.keys(s);for(let r=0;r<n.length;r++){const i=e[n[r]];i&&i.active()&&a.push(i.wait())}return Promise.all(a)}function Bfe(e,s){if(!s)return;let a=e.options;if(!a){e.options=s;return}return a.$shared&&(e.options=a=Object.assign({},a,{$shared:!1,$animations:{}})),a}function L3(e,s){const a=e&&e.options||{},n=a.reverse,r=a.min===void 0?s:0,i=a.max===void 0?s:0;return{start:n?i:r,end:n?r:i}}function Hfe(e,s,a){if(a===!1)return!1;const n=L3(e,a),r=L3(s,a);return{top:r.end,right:n.end,bottom:r.start,left:n.start}}function Gfe(e){let s,a,n,r;return Bt(e)?(s=e.top,a=e.right,n=e.bottom,r=e.left):s=a=n=r=e,{top:s,right:a,bottom:n,left:r,disabled:e===!1}}function Z$(e,s){const a=[],n=e._getSortedDatasetMetas(s);let r,i;for(r=0,i=n.length;r<i;++r)a.push(n[r].index);return a}function k3(e,s,a,n={}){const r=e.keys,i=n.mode==="single";let l,c,d,m;if(s===null)return;let f=!1;for(l=0,c=r.length;l<c;++l){if(d=+r[l],d===a){if(f=!0,n.all)continue;break}m=e.values[d],Kn(m)&&(i||s===0||Vr(s)===Vr(m))&&(s+=m)}return!f&&!n.all?0:s}function Vfe(e,s){const{iScale:a,vScale:n}=s,r=a.axis==="x"?"x":"y",i=n.axis==="x"?"x":"y",l=Object.keys(e),c=new Array(l.length);let d,m,f;for(d=0,m=l.length;d<m;++d)f=l[d],c[d]={[r]:f,[i]:e[f]};return c}function sj(e,s){const a=e&&e.options.stacked;return a||a===void 0&&s.stack!==void 0}function Wfe(e,s,a){return`${e.id}.${s.id}.${a.stack||a.type}`}function Yfe(e){const{min:s,max:a,minDefined:n,maxDefined:r}=e.getUserBounds();return{min:n?s:Number.NEGATIVE_INFINITY,max:r?a:Number.POSITIVE_INFINITY}}function Qfe(e,s,a){const n=e[s]||(e[s]={});return n[a]||(n[a]={})}function D3(e,s,a,n){for(const r of s.getMatchingVisibleMetas(n).reverse()){const i=e[r.index];if(a&&i>0||!a&&i<0)return r.index}return null}function M3(e,s){const{chart:a,_cachedMeta:n}=e,r=a._stacks||(a._stacks={}),{iScale:i,vScale:l,index:c}=n,d=i.axis,m=l.axis,f=Wfe(i,l,n),h=s.length;let y;for(let N=0;N<h;++N){const w=s[N],{[d]:p,[m]:v}=w,C=w._stacks||(w._stacks={});y=C[m]=Qfe(r,f,p),y[c]=v,y._top=D3(y,l,!0,n.type),y._bottom=D3(y,l,!1,n.type);const j=y._visualValues||(y._visualValues={});j[c]=v}}function aj(e,s){const a=e.scales;return Object.keys(a).filter(n=>a[n].axis===s).shift()}function qfe(e,s){return Cc(e,{active:!1,dataset:void 0,datasetIndex:s,index:s,mode:"default",type:"dataset"})}function Xfe(e,s,a){return Cc(e,{active:!1,dataIndex:s,parsed:void 0,raw:void 0,element:a,index:s,mode:"default",type:"data"})}function Ym(e,s){const a=e.controller.index,n=e.vScale&&e.vScale.axis;if(n){s=s||e._parsed;for(const r of s){const i=r._stacks;if(!i||i[n]===void 0||i[n][a]===void 0)return;delete i[n][a],i[n]._visualValues!==void 0&&i[n]._visualValues[a]!==void 0&&delete i[n]._visualValues[a]}}}const nj=e=>e==="reset"||e==="none",P3=(e,s)=>s?e:Object.assign({},e),Kfe=(e,s,a)=>e&&!s.hidden&&s._stacked&&{keys:Z$(a,!0),values:null};class Fy{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(s,a){this.chart=s,this._ctx=s.ctx,this.index=a,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const s=this._cachedMeta;this.configure(),this.linkScales(),s._stacked=sj(s.vScale,s),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(s){this.index!==s&&Ym(this._cachedMeta),this.index=s}linkScales(){const s=this.chart,a=this._cachedMeta,n=this.getDataset(),r=(h,y,N,w)=>h==="x"?y:h==="r"?w:N,i=a.xAxisID=At(n.xAxisID,aj(s,"x")),l=a.yAxisID=At(n.yAxisID,aj(s,"y")),c=a.rAxisID=At(n.rAxisID,aj(s,"r")),d=a.indexAxis,m=a.iAxisID=r(d,i,l,c),f=a.vAxisID=r(d,l,i,c);a.xScale=this.getScaleForId(i),a.yScale=this.getScaleForId(l),a.rScale=this.getScaleForId(c),a.iScale=this.getScaleForId(m),a.vScale=this.getScaleForId(f)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(s){return this.chart.scales[s]}_getOtherScale(s){const a=this._cachedMeta;return s===a.iScale?a.vScale:a.iScale}reset(){this._update("reset")}_destroy(){const s=this._cachedMeta;this._data&&g3(this._data,this),s._stacked&&Ym(s)}_dataCheck(){const s=this.getDataset(),a=s.data||(s.data=[]),n=this._data;if(Bt(a)){const r=this._cachedMeta;this._data=Vfe(a,r)}else if(n!==a){if(n){g3(n,this);const r=this._cachedMeta;Ym(r),r._parsed=[]}a&&Object.isExtensible(a)&&Lme(a,this),this._syncList=[],this._data=a}}addElements(){const s=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(s.dataset=new this.datasetElementType)}buildOrUpdateElements(s){const a=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const i=a._stacked;a._stacked=sj(a.vScale,a),a.stack!==n.stack&&(r=!0,Ym(a),a.stack=n.stack),this._resyncElements(s),(r||i!==a._stacked)&&(M3(this,a._parsed),a._stacked=sj(a.vScale,a))}configure(){const s=this.chart.config,a=s.datasetScopeKeys(this._type),n=s.getOptionScopes(this.getDataset(),a,!0);this.options=s.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(s,a){const{_cachedMeta:n,_data:r}=this,{iScale:i,_stacked:l}=n,c=i.axis;let d=s===0&&a===r.length?!0:n._sorted,m=s>0&&n._parsed[s-1],f,h,y;if(this._parsing===!1)n._parsed=r,n._sorted=!0,y=r;else{sa(r[s])?y=this.parseArrayData(n,r,s,a):Bt(r[s])?y=this.parseObjectData(n,r,s,a):y=this.parsePrimitiveData(n,r,s,a);const N=()=>h[c]===null||m&&h[c]<m[c];for(f=0;f<a;++f)n._parsed[f+s]=h=y[f],d&&(N()&&(d=!1),m=h);n._sorted=d}l&&M3(this,y)}parsePrimitiveData(s,a,n,r){const{iScale:i,vScale:l}=s,c=i.axis,d=l.axis,m=i.getLabels(),f=i===l,h=new Array(r);let y,N,w;for(y=0,N=r;y<N;++y)w=y+n,h[y]={[c]:f||i.parse(m[w],w),[d]:l.parse(a[w],w)};return h}parseArrayData(s,a,n,r){const{xScale:i,yScale:l}=s,c=new Array(r);let d,m,f,h;for(d=0,m=r;d<m;++d)f=d+n,h=a[f],c[d]={x:i.parse(h[0],f),y:l.parse(h[1],f)};return c}parseObjectData(s,a,n,r){const{xScale:i,yScale:l}=s,{xAxisKey:c="x",yAxisKey:d="y"}=this._parsing,m=new Array(r);let f,h,y,N;for(f=0,h=r;f<h;++f)y=f+n,N=a[y],m[f]={x:i.parse(fc(N,c),y),y:l.parse(fc(N,d),y)};return m}getParsed(s){return this._cachedMeta._parsed[s]}getDataElement(s){return this._cachedMeta.data[s]}applyStack(s,a,n){const r=this.chart,i=this._cachedMeta,l=a[s.axis],c={keys:Z$(r,!0),values:a._stacks[s.axis]._visualValues};return k3(c,l,i.index,{mode:n})}updateRangeFromParsed(s,a,n,r){const i=n[a.axis];let l=i===null?NaN:i;const c=r&&n._stacks[a.axis];r&&c&&(r.values=c,l=k3(r,i,this._cachedMeta.index)),s.min=Math.min(s.min,l),s.max=Math.max(s.max,l)}getMinMax(s,a){const n=this._cachedMeta,r=n._parsed,i=n._sorted&&s===n.iScale,l=r.length,c=this._getOtherScale(s),d=Kfe(a,n,this.chart),m={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:f,max:h}=Yfe(c);let y,N;function w(){N=r[y];const p=N[c.axis];return!Kn(N[s.axis])||f>p||h<p}for(y=0;y<l&&!(!w()&&(this.updateRangeFromParsed(m,s,N,d),i));++y);if(i){for(y=l-1;y>=0;--y)if(!w()){this.updateRangeFromParsed(m,s,N,d);break}}return m}getAllParsedValues(s){const a=this._cachedMeta._parsed,n=[];let r,i,l;for(r=0,i=a.length;r<i;++r)l=a[r][s.axis],Kn(l)&&n.push(l);return n}getMaxOverflow(){return!1}getLabelAndValue(s){const a=this._cachedMeta,n=a.iScale,r=a.vScale,i=this.getParsed(s);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(s){const a=this._cachedMeta;this.update(s||"default"),a._clip=Gfe(At(this.options.clip,Hfe(a.xScale,a.yScale,this.getMaxOverflow())))}update(s){}draw(){const s=this._ctx,a=this.chart,n=this._cachedMeta,r=n.data||[],i=a.chartArea,l=[],c=this._drawStart||0,d=this._drawCount||r.length-c,m=this.options.drawActiveElementsOnTop;let f;for(n.dataset&&n.dataset.draw(s,i,c,d),f=c;f<c+d;++f){const h=r[f];h.hidden||(h.active&&m?l.push(h):h.draw(s,i))}for(f=0;f<l.length;++f)l[f].draw(s,i)}getStyle(s,a){const n=a?"active":"default";return s===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(s||0,n)}getContext(s,a,n){const r=this.getDataset();let i;if(s>=0&&s<this._cachedMeta.data.length){const l=this._cachedMeta.data[s];i=l.$context||(l.$context=Xfe(this.getContext(),s,l)),i.parsed=this.getParsed(s),i.raw=r.data[s],i.index=i.dataIndex=s}else i=this.$context||(this.$context=qfe(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!a,i.mode=n,i}resolveDatasetElementOptions(s){return this._resolveElementOptions(this.datasetElementType.id,s)}resolveDataElementOptions(s,a){return this._resolveElementOptions(this.dataElementType.id,a,s)}_resolveElementOptions(s,a="default",n){const r=a==="active",i=this._cachedDataOpts,l=s+"-"+a,c=i[l],d=this.enableOptionSharing&&Qf(n);if(c)return P3(c,d);const m=this.chart.config,f=m.datasetElementScopeKeys(this._type,s),h=r?[`${s}Hover`,"hover",s,""]:[s,""],y=m.getOptionScopes(this.getDataset(),f),N=Object.keys(Us.elements[s]),w=()=>this.getContext(n,r,a),p=m.resolveNamedOptions(y,N,w,h);return p.$shared&&(p.$shared=d,i[l]=Object.freeze(P3(p,d))),p}_resolveAnimations(s,a,n){const r=this.chart,i=this._cachedDataOpts,l=`animation-${a}`,c=i[l];if(c)return c;let d;if(r.options.animation!==!1){const f=this.chart.config,h=f.datasetAnimationScopeKeys(this._type,a),y=f.getOptionScopes(this.getDataset(),h);d=f.createResolver(y,this.getContext(s,n,a))}const m=new K$(r,d&&d.animations);return d&&d._cacheable&&(i[l]=Object.freeze(m)),m}getSharedOptions(s){if(s.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},s))}includeOptions(s,a){return!a||nj(s)||this.chart._animationsDisabled}_getSharedOptions(s,a){const n=this.resolveDataElementOptions(s,a),r=this._sharedOptions,i=this.getSharedOptions(n),l=this.includeOptions(a,i)||i!==r;return this.updateSharedOptions(i,a,n),{sharedOptions:i,includeOptions:l}}updateElement(s,a,n,r){nj(r)?Object.assign(s,n):this._resolveAnimations(a,r).update(s,n)}updateSharedOptions(s,a,n){s&&!nj(a)&&this._resolveAnimations(void 0,a).update(s,n)}_setStyle(s,a,n,r){s.active=r;const i=this.getStyle(a,r);this._resolveAnimations(a,n,r).update(s,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(s,a,n){this._setStyle(s,n,"active",!1)}setHoverStyle(s,a,n){this._setStyle(s,n,"active",!0)}_removeDatasetHoverStyle(){const s=this._cachedMeta.dataset;s&&this._setStyle(s,void 0,"active",!1)}_setDatasetHoverStyle(){const s=this._cachedMeta.dataset;s&&this._setStyle(s,void 0,"active",!0)}_resyncElements(s){const a=this._data,n=this._cachedMeta.data;for(const[c,d,m]of this._syncList)this[c](d,m);this._syncList=[];const r=n.length,i=a.length,l=Math.min(i,r);l&&this.parse(0,l),i>r?this._insertElements(r,i-r,s):i<r&&this._removeElements(i,r-i)}_insertElements(s,a,n=!0){const r=this._cachedMeta,i=r.data,l=s+a;let c;const d=m=>{for(m.length+=a,c=m.length-1;c>=l;c--)m[c]=m[c-a]};for(d(i),c=s;c<l;++c)i[c]=new this.dataElementType;this._parsing&&d(r._parsed),this.parse(s,a),n&&this.updateElements(i,s,a,"reset")}updateElements(s,a,n,r){}_removeElements(s,a){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(s,a);n._stacked&&Ym(n,r)}n.data.splice(s,a)}_sync(s){if(this._parsing)this._syncList.push(s);else{const[a,n,r]=s;this[a](n,r)}this.chart._dataChanges.push([this.index,...s])}_onDataPush(){const s=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-s,s])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(s,a){a&&this._sync(["_removeElements",s,a]);const n=arguments.length-2;n&&this._sync(["_insertElements",s,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Zfe(e,s){if(!e._cache.$bar){const a=e.getMatchingVisibleMetas(s);let n=[];for(let r=0,i=a.length;r<i;r++)n=n.concat(a[r].controller.getAllParsedValues(e));e._cache.$bar=$$(n.sort((r,i)=>r-i))}return e._cache.$bar}function Jfe(e){const s=e.iScale,a=Zfe(s,e.type);let n=s._length,r,i,l,c;const d=()=>{l===32767||l===-32768||(Qf(c)&&(n=Math.min(n,Math.abs(l-c)||n)),c=l)};for(r=0,i=a.length;r<i;++r)l=s.getPixelForValue(a[r]),d();for(c=void 0,r=0,i=s.ticks.length;r<i;++r)l=s.getPixelForTick(r),d();return n}function ehe(e,s,a,n){const r=a.barThickness;let i,l;return Zt(r)?(i=s.min*a.categoryPercentage,l=a.barPercentage):(i=r*n,l=1),{chunk:i/n,ratio:l,start:s.pixels[e]-i/2}}function the(e,s,a,n){const r=s.pixels,i=r[e];let l=e>0?r[e-1]:null,c=e<r.length-1?r[e+1]:null;const d=a.categoryPercentage;l===null&&(l=i-(c===null?s.end-s.start:c-i)),c===null&&(c=i+i-l);const m=i-(i-Math.min(l,c))/2*d;return{chunk:Math.abs(c-l)/2*d/n,ratio:a.barPercentage,start:m}}function she(e,s,a,n){const r=a.parse(e[0],n),i=a.parse(e[1],n),l=Math.min(r,i),c=Math.max(r,i);let d=l,m=c;Math.abs(l)>Math.abs(c)&&(d=c,m=l),s[a.axis]=m,s._custom={barStart:d,barEnd:m,start:r,end:i,min:l,max:c}}function J$(e,s,a,n){return sa(e)?she(e,s,a,n):s[a.axis]=a.parse(e,n),s}function O3(e,s,a,n){const r=e.iScale,i=e.vScale,l=r.getLabels(),c=r===i,d=[];let m,f,h,y;for(m=a,f=a+n;m<f;++m)y=s[m],h={},h[r.axis]=c||r.parse(l[m],m),d.push(J$(y,h,i,m));return d}function rj(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function ahe(e,s,a){return e!==0?Vr(e):(s.isHorizontal()?1:-1)*(s.min>=a?1:-1)}function nhe(e){let s,a,n,r,i;return e.horizontal?(s=e.base>e.x,a="left",n="right"):(s=e.base<e.y,a="bottom",n="top"),s?(r="end",i="start"):(r="start",i="end"),{start:a,end:n,reverse:s,top:r,bottom:i}}function rhe(e,s,a,n){let r=s.borderSkipped;const i={};if(!r){e.borderSkipped=i;return}if(r===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:l,end:c,reverse:d,top:m,bottom:f}=nhe(e);r==="middle"&&a&&(e.enableBorderRadius=!0,(a._top||0)===n?r=m:(a._bottom||0)===n?r=f:(i[I3(f,l,c,d)]=!0,r=m)),i[I3(r,l,c,d)]=!0,e.borderSkipped=i}function I3(e,s,a,n){return n?(e=ihe(e,s,a),e=$3(e,a,s)):e=$3(e,s,a),e}function ihe(e,s,a){return e===s?a:e===a?s:e}function $3(e,s,a){return e==="start"?s:e==="end"?a:e}function lhe(e,{inflateAmount:s},a){e.inflateAmount=s==="auto"?a===1?.33:0:s}class ohe extends Fy{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(s,a,n,r){return O3(s,a,n,r)}parseArrayData(s,a,n,r){return O3(s,a,n,r)}parseObjectData(s,a,n,r){const{iScale:i,vScale:l}=s,{xAxisKey:c="x",yAxisKey:d="y"}=this._parsing,m=i.axis==="x"?c:d,f=l.axis==="x"?c:d,h=[];let y,N,w,p;for(y=n,N=n+r;y<N;++y)p=a[y],w={},w[i.axis]=i.parse(fc(p,m),y),h.push(J$(fc(p,f),w,l,y));return h}updateRangeFromParsed(s,a,n,r){super.updateRangeFromParsed(s,a,n,r);const i=n._custom;i&&a===this._cachedMeta.vScale&&(s.min=Math.min(s.min,i.min),s.max=Math.max(s.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(s){const a=this._cachedMeta,{iScale:n,vScale:r}=a,i=this.getParsed(s),l=i._custom,c=rj(l)?"["+l.start+", "+l.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize();const s=this._cachedMeta;s.stack=this.getDataset().stack}update(s){const a=this._cachedMeta;this.updateElements(a.data,0,a.data.length,s)}updateElements(s,a,n,r){const i=r==="reset",{index:l,_cachedMeta:{vScale:c}}=this,d=c.getBasePixel(),m=c.isHorizontal(),f=this._getRuler(),{sharedOptions:h,includeOptions:y}=this._getSharedOptions(a,r);for(let N=a;N<a+n;N++){const w=this.getParsed(N),p=i||Zt(w[c.axis])?{base:d,head:d}:this._calculateBarValuePixels(N),v=this._calculateBarIndexPixels(N,f),C=(w._stacks||{})[c.axis],j={horizontal:m,base:p.base,enableBorderRadius:!C||rj(w._custom)||l===C._top||l===C._bottom,x:m?p.head:v.center,y:m?v.center:p.head,height:m?v.size:Math.abs(p.size),width:m?Math.abs(p.size):v.size};y&&(j.options=h||this.resolveDataElementOptions(N,s[N].active?"active":r));const _=j.options||s[N].options;rhe(j,_,C,l),lhe(j,_,f.ratio),this.updateElement(s[N],N,j,r)}}_getStacks(s,a){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter(f=>f.controller.options.grouped),i=n.options.stacked,l=[],c=this._cachedMeta.controller.getParsed(a),d=c&&c[n.axis],m=f=>{const h=f._parsed.find(N=>N[n.axis]===d),y=h&&h[f.vScale.axis];if(Zt(y)||isNaN(y))return!0};for(const f of r)if(!(a!==void 0&&m(f))&&((i===!1||l.indexOf(f.stack)===-1||i===void 0&&f.stack===void 0)&&l.push(f.stack),f.index===s))break;return l.length||l.push(void 0),l}_getStackCount(s){return this._getStacks(void 0,s).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const s=this.chart.scales,a=this.chart.options.indexAxis;return Object.keys(s).filter(n=>s[n].axis===a).shift()}_getAxis(){const s={},a=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)s[At(this.chart.options.indexAxis==="x"?n.xAxisID:n.yAxisID,a)]=!0;return Object.keys(s)}_getStackIndex(s,a,n){const r=this._getStacks(s,n),i=a!==void 0?r.indexOf(a):-1;return i===-1?r.length-1:i}_getRuler(){const s=this.options,a=this._cachedMeta,n=a.iScale,r=[];let i,l;for(i=0,l=a.data.length;i<l;++i)r.push(n.getPixelForValue(this.getParsed(i)[n.axis],i));const c=s.barThickness;return{min:c||Jfe(a),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:s.grouped,ratio:c?1:s.categoryPercentage*s.barPercentage}}_calculateBarValuePixels(s){const{_cachedMeta:{vScale:a,_stacked:n,index:r},options:{base:i,minBarLength:l}}=this,c=i||0,d=this.getParsed(s),m=d._custom,f=rj(m);let h=d[a.axis],y=0,N=n?this.applyStack(a,d,n):h,w,p;N!==h&&(y=N-h,N=h),f&&(h=m.barStart,N=m.barEnd-m.barStart,h!==0&&Vr(h)!==Vr(m.barEnd)&&(y=0),y+=h);const v=!Zt(i)&&!f?i:y;let C=a.getPixelForValue(v);if(this.chart.getDataVisibility(s)?w=a.getPixelForValue(y+N):w=C,p=w-C,Math.abs(p)<l){p=ahe(p,a,c)*l,h===c&&(C-=p/2);const j=a.getPixelForDecimal(0),_=a.getPixelForDecimal(1),T=Math.min(j,_),k=Math.max(j,_);C=Math.max(Math.min(C,k),T),w=C+p,n&&!f&&(d._stacks[a.axis]._visualValues[r]=a.getValueForPixel(w)-a.getValueForPixel(C))}if(C===a.getPixelForValue(c)){const j=Vr(p)*a.getLineWidthForValue(c)/2;C+=j,p-=j}return{size:p,base:C,head:w,center:w+p/2}}_calculateBarIndexPixels(s,a){const n=a.scale,r=this.options,i=r.skipNull,l=At(r.maxBarThickness,1/0);let c,d;const m=this._getAxisCount();if(a.grouped){const f=i?this._getStackCount(s):a.stackCount,h=r.barThickness==="flex"?the(s,a,r,f*m):ehe(s,a,r,f*m),y=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,N=this._getAxis().indexOf(At(y,this.getFirstScaleIdForIndexAxis())),w=this._getStackIndex(this.index,this._cachedMeta.stack,i?s:void 0)+N;c=h.start+h.chunk*w+h.chunk/2,d=Math.min(l,h.chunk*h.ratio)}else c=n.getPixelForValue(this.getParsed(s)[n.axis],s),d=Math.min(l,a.min*a.ratio);return{base:c-d/2,head:c+d/2,center:c,size:d}}draw(){const s=this._cachedMeta,a=s.vScale,n=s.data,r=n.length;let i=0;for(;i<r;++i)this.getParsed(i)[a.axis]!==null&&!n[i].hidden&&n[i].draw(this._ctx)}}function che(e,s,a){let n=1,r=1,i=0,l=0;if(s<Os){const c=e,d=c+s,m=Math.cos(c),f=Math.sin(c),h=Math.cos(d),y=Math.sin(d),N=(_,T,k)=>Xf(_,c,d,!0)?1:Math.max(T,T*a,k,k*a),w=(_,T,k)=>Xf(_,c,d,!0)?-1:Math.min(T,T*a,k,k*a),p=N(0,m,h),v=N(aa,f,y),C=w(os,m,h),j=w(os+aa,f,y);n=(p-C)/2,r=(v-j)/2,i=-(p+C)/2,l=-(v+j)/2}return{ratioX:n,ratioY:r,offsetX:i,offsetY:l}}class dhe extends Fy{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:s=>s!=="spacing",_indexable:s=>s!=="spacing"&&!s.startsWith("borderDash")&&!s.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(s){const a=s.data,{labels:{pointStyle:n,textAlign:r,color:i,useBorderRadius:l,borderRadius:c}}=s.legend.options;return a.labels.length&&a.datasets.length?a.labels.map((d,m)=>{const h=s.getDatasetMeta(0).controller.getStyle(m);return{text:d,fillStyle:h.backgroundColor,fontColor:i,hidden:!s.getDataVisibility(m),lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:h.borderWidth,strokeStyle:h.borderColor,textAlign:r,pointStyle:n,borderRadius:l&&(c||h.borderRadius),index:m}}):[]}},onClick(s,a,n){n.chart.toggleDataVisibility(a.index),n.chart.update()}}}};constructor(s,a){super(s,a),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(s,a){const n=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=n;else{let i=d=>+n[d];if(Bt(n[s])){const{key:d="value"}=this._parsing;i=m=>+fc(n[m],d)}let l,c;for(l=s,c=s+a;l<c;++l)r._parsed[l]=i(l)}}_getRotation(){return Pi(this.options.rotation-90)}_getCircumference(){return Pi(this.options.circumference)}_getRotationExtents(){let s=Os,a=-Os;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const r=this.chart.getDatasetMeta(n).controller,i=r._getRotation(),l=r._getCircumference();s=Math.min(s,i),a=Math.max(a,i+l)}return{rotation:s,circumference:a-s}}update(s){const a=this.chart,{chartArea:n}=a,r=this._cachedMeta,i=r.data,l=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,c=Math.max((Math.min(n.width,n.height)-l)/2,0),d=Math.min(fme(this.options.cutout,c),1),m=this._getRingWeight(this.index),{circumference:f,rotation:h}=this._getRotationExtents(),{ratioX:y,ratioY:N,offsetX:w,offsetY:p}=che(h,f,d),v=(n.width-l)/y,C=(n.height-l)/N,j=Math.max(Math.min(v,C)/2,0),_=D$(this.options.radius,j),T=Math.max(_*d,0),k=(_-T)/this._getVisibleDatasetWeightTotal();this.offsetX=w*_,this.offsetY=p*_,r.total=this.calculateTotal(),this.outerRadius=_-k*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-k*m,0),this.updateElements(i,0,i.length,s)}_circumference(s,a){const n=this.options,r=this._cachedMeta,i=this._getCircumference();return a&&n.animation.animateRotate||!this.chart.getDataVisibility(s)||r._parsed[s]===null||r.data[s].hidden?0:this.calculateCircumference(r._parsed[s]*i/Os)}updateElements(s,a,n,r){const i=r==="reset",l=this.chart,c=l.chartArea,m=l.options.animation,f=(c.left+c.right)/2,h=(c.top+c.bottom)/2,y=i&&m.animateScale,N=y?0:this.innerRadius,w=y?0:this.outerRadius,{sharedOptions:p,includeOptions:v}=this._getSharedOptions(a,r);let C=this._getRotation(),j;for(j=0;j<a;++j)C+=this._circumference(j,i);for(j=a;j<a+n;++j){const _=this._circumference(j,i),T=s[j],k={x:f+this.offsetX,y:h+this.offsetY,startAngle:C,endAngle:C+_,circumference:_,outerRadius:w,innerRadius:N};v&&(k.options=p||this.resolveDataElementOptions(j,T.active?"active":r)),C+=_,this.updateElement(T,j,k,r)}}calculateTotal(){const s=this._cachedMeta,a=s.data;let n=0,r;for(r=0;r<a.length;r++){const i=s._parsed[r];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(r)&&!a[r].hidden&&(n+=Math.abs(i))}return n}calculateCircumference(s){const a=this._cachedMeta.total;return a>0&&!isNaN(s)?Os*(Math.abs(s)/a):0}getLabelAndValue(s){const a=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=eS(a._parsed[s],n.options.locale);return{label:r[s]||"",value:i}}getMaxBorderWidth(s){let a=0;const n=this.chart;let r,i,l,c,d;if(!s){for(r=0,i=n.data.datasets.length;r<i;++r)if(n.isDatasetVisible(r)){l=n.getDatasetMeta(r),s=l.data,c=l.controller;break}}if(!s)return 0;for(r=0,i=s.length;r<i;++r)d=c.resolveDataElementOptions(r),d.borderAlign!=="inner"&&(a=Math.max(a,d.borderWidth||0,d.hoverBorderWidth||0));return a}getMaxOffset(s){let a=0;for(let n=0,r=s.length;n<r;++n){const i=this.resolveDataElementOptions(n);a=Math.max(a,i.offset||0,i.hoverOffset||0)}return a}_getRingWeightOffset(s){let a=0;for(let n=0;n<s;++n)this.chart.isDatasetVisible(n)&&(a+=this._getRingWeight(n));return a}_getRingWeight(s){return Math.max(At(this.chart.data.datasets[s].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class uhe extends Fy{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(s){const a=this._cachedMeta,{dataset:n,data:r=[],_dataset:i}=a,l=this.chart._animationsDisabled;let{start:c,count:d}=Mme(a,r,l);this._drawStart=c,this._drawCount=d,Pme(a)&&(c=0,d=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=r;const m=this.resolveDatasetElementOptions(s);this.options.showLine||(m.borderWidth=0),m.segment=this.options.segment,this.updateElement(n,void 0,{animated:!l,options:m},s),this.updateElements(r,c,d,s)}updateElements(s,a,n,r){const i=r==="reset",{iScale:l,vScale:c,_stacked:d,_dataset:m}=this._cachedMeta,{sharedOptions:f,includeOptions:h}=this._getSharedOptions(a,r),y=l.axis,N=c.axis,{spanGaps:w,segment:p}=this.options,v=qf(w)?w:Number.POSITIVE_INFINITY,C=this.chart._animationsDisabled||i||r==="none",j=a+n,_=s.length;let T=a>0&&this.getParsed(a-1);for(let k=0;k<_;++k){const E=s[k],A=C?E:{};if(k<a||k>=j){A.skip=!0;continue}const U=this.getParsed(k),B=Zt(U[N]),X=A[y]=l.getPixelForValue(U[y],k),$=A[N]=i||B?c.getBasePixel():c.getPixelForValue(d?this.applyStack(c,U,d):U[N],k);A.skip=isNaN(X)||isNaN($)||B,A.stop=k>0&&Math.abs(U[y]-T[y])>v,p&&(A.parsed=U,A.raw=m.data[k]),h&&(A.options=f||this.resolveDataElementOptions(k,E.active?"active":r)),C||this.updateElement(E,k,A,r),T=U}}getMaxOverflow(){const s=this._cachedMeta,a=s.dataset,n=a.options&&a.options.borderWidth||0,r=s.data||[];if(!r.length)return n;const i=r[0].size(this.resolveDataElementOptions(0)),l=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,i,l)/2}draw(){const s=this._cachedMeta;s.dataset.updateControlPoints(this.chart.chartArea,s.iScale.axis),super.draw()}}class mhe extends dhe{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}function Lo(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class cS{static override(s){Object.assign(cS.prototype,s)}options;constructor(s){this.options=s||{}}init(){}formats(){return Lo()}parse(){return Lo()}format(){return Lo()}add(){return Lo()}diff(){return Lo()}startOf(){return Lo()}endOf(){return Lo()}}var fhe={_date:cS};function hhe(e,s,a,n){const{controller:r,data:i,_sorted:l}=e,c=r._cachedMeta.iScale,d=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(c&&s===c.axis&&s!=="r"&&l&&i.length){const m=c._reversePixels?Eme:qo;if(n){if(r._sharedOptions){const f=i[0],h=typeof f.getRange=="function"&&f.getRange(s);if(h){const y=m(i,s,a-h),N=m(i,s,a+h);return{lo:y.lo,hi:N.hi}}}}else{const f=m(i,s,a);if(d){const{vScale:h}=r._cachedMeta,{_parsed:y}=e,N=y.slice(0,f.lo+1).reverse().findIndex(p=>!Zt(p[h.axis]));f.lo-=Math.max(0,N);const w=y.slice(f.hi).findIndex(p=>!Zt(p[h.axis]));f.hi+=Math.max(0,w)}return f}}return{lo:0,hi:i.length-1}}function By(e,s,a,n,r){const i=e.getSortedVisibleDatasetMetas(),l=a[s];for(let c=0,d=i.length;c<d;++c){const{index:m,data:f}=i[c],{lo:h,hi:y}=hhe(i[c],s,l,r);for(let N=h;N<=y;++N){const w=f[N];w.skip||n(w,m,N)}}}function ghe(e){const s=e.indexOf("x")!==-1,a=e.indexOf("y")!==-1;return function(n,r){const i=s?Math.abs(n.x-r.x):0,l=a?Math.abs(n.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(l,2))}}function ij(e,s,a,n,r){const i=[];return!r&&!e.isPointInArea(s)||By(e,a,s,function(c,d,m){!r&&!Kf(c,e.chartArea,0)||c.inRange(s.x,s.y,n)&&i.push({element:c,datasetIndex:d,index:m})},!0),i}function xhe(e,s,a,n){let r=[];function i(l,c,d){const{startAngle:m,endAngle:f}=l.getProps(["startAngle","endAngle"],n),{angle:h}=O$(l,{x:s.x,y:s.y});Xf(h,m,f)&&r.push({element:l,datasetIndex:c,index:d})}return By(e,a,s,i),r}function phe(e,s,a,n,r,i){let l=[];const c=ghe(a);let d=Number.POSITIVE_INFINITY;function m(f,h,y){const N=f.inRange(s.x,s.y,r);if(n&&!N)return;const w=f.getCenterPoint(r);if(!(!!i||e.isPointInArea(w))&&!N)return;const v=c(s,w);v<d?(l=[{element:f,datasetIndex:h,index:y}],d=v):v===d&&l.push({element:f,datasetIndex:h,index:y})}return By(e,a,s,m),l}function lj(e,s,a,n,r,i){return!i&&!e.isPointInArea(s)?[]:a==="r"&&!n?xhe(e,s,a,r):phe(e,s,a,n,r,i)}function R3(e,s,a,n,r){const i=[],l=a==="x"?"inXRange":"inYRange";let c=!1;return By(e,a,s,(d,m,f)=>{d[l]&&d[l](s[a],r)&&(i.push({element:d,datasetIndex:m,index:f}),c=c||d.inRange(s.x,s.y,r))}),n&&!c?[]:i}var yhe={modes:{index(e,s,a,n){const r=Uo(s,e),i=a.axis||"x",l=a.includeInvisible||!1,c=a.intersect?ij(e,r,i,n,l):lj(e,r,i,!1,n,l),d=[];return c.length?(e.getSortedVisibleDatasetMetas().forEach(m=>{const f=c[0].index,h=m.data[f];h&&!h.skip&&d.push({element:h,datasetIndex:m.index,index:f})}),d):[]},dataset(e,s,a,n){const r=Uo(s,e),i=a.axis||"xy",l=a.includeInvisible||!1;let c=a.intersect?ij(e,r,i,n,l):lj(e,r,i,!1,n,l);if(c.length>0){const d=c[0].datasetIndex,m=e.getDatasetMeta(d).data;c=[];for(let f=0;f<m.length;++f)c.push({element:m[f],datasetIndex:d,index:f})}return c},point(e,s,a,n){const r=Uo(s,e),i=a.axis||"xy",l=a.includeInvisible||!1;return ij(e,r,i,n,l)},nearest(e,s,a,n){const r=Uo(s,e),i=a.axis||"xy",l=a.includeInvisible||!1;return lj(e,r,i,a.intersect,n,l)},x(e,s,a,n){const r=Uo(s,e);return R3(e,r,"x",a.intersect,n)},y(e,s,a,n){const r=Uo(s,e);return R3(e,r,"y",a.intersect,n)}}};const e6=["left","top","right","bottom"];function Qm(e,s){return e.filter(a=>a.pos===s)}function U3(e,s){return e.filter(a=>e6.indexOf(a.pos)===-1&&a.box.axis===s)}function qm(e,s){return e.sort((a,n)=>{const r=s?n:a,i=s?a:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function bhe(e){const s=[];let a,n,r,i,l,c;for(a=0,n=(e||[]).length;a<n;++a)r=e[a],{position:i,options:{stack:l,stackWeight:c=1}}=r,s.push({index:a,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:l&&i+l,stackWeight:c});return s}function vhe(e){const s={};for(const a of e){const{stack:n,pos:r,stackWeight:i}=a;if(!n||!e6.includes(r))continue;const l=s[n]||(s[n]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=i}return s}function Nhe(e,s){const a=vhe(e),{vBoxMaxWidth:n,hBoxMaxHeight:r}=s;let i,l,c;for(i=0,l=e.length;i<l;++i){c=e[i];const{fullSize:d}=c.box,m=a[c.stack],f=m&&c.stackWeight/m.weight;c.horizontal?(c.width=f?f*n:d&&s.availableWidth,c.height=r):(c.width=n,c.height=f?f*r:d&&s.availableHeight)}return a}function whe(e){const s=bhe(e),a=qm(s.filter(m=>m.box.fullSize),!0),n=qm(Qm(s,"left"),!0),r=qm(Qm(s,"right")),i=qm(Qm(s,"top"),!0),l=qm(Qm(s,"bottom")),c=U3(s,"x"),d=U3(s,"y");return{fullSize:a,leftAndTop:n.concat(i),rightAndBottom:r.concat(d).concat(l).concat(c),chartArea:Qm(s,"chartArea"),vertical:n.concat(r).concat(d),horizontal:i.concat(l).concat(c)}}function z3(e,s,a,n){return Math.max(e[a],s[a])+Math.max(e[n],s[n])}function t6(e,s){e.top=Math.max(e.top,s.top),e.left=Math.max(e.left,s.left),e.bottom=Math.max(e.bottom,s.bottom),e.right=Math.max(e.right,s.right)}function jhe(e,s,a,n){const{pos:r,box:i}=a,l=e.maxPadding;if(!Bt(r)){a.size&&(e[r]-=a.size);const h=n[a.stack]||{size:0,count:1};h.size=Math.max(h.size,a.horizontal?i.height:i.width),a.size=h.size/h.count,e[r]+=a.size}i.getPadding&&t6(l,i.getPadding());const c=Math.max(0,s.outerWidth-z3(l,e,"left","right")),d=Math.max(0,s.outerHeight-z3(l,e,"top","bottom")),m=c!==e.w,f=d!==e.h;return e.w=c,e.h=d,a.horizontal?{same:m,other:f}:{same:f,other:m}}function Che(e){const s=e.maxPadding;function a(n){const r=Math.max(s[n]-e[n],0);return e[n]+=r,r}e.y+=a("top"),e.x+=a("left"),a("right"),a("bottom")}function She(e,s){const a=s.maxPadding;function n(r){const i={left:0,top:0,right:0,bottom:0};return r.forEach(l=>{i[l]=Math.max(s[l],a[l])}),i}return n(e?["left","right"]:["top","bottom"])}function yf(e,s,a,n){const r=[];let i,l,c,d,m,f;for(i=0,l=e.length,m=0;i<l;++i){c=e[i],d=c.box,d.update(c.width||s.w,c.height||s.h,She(c.horizontal,s));const{same:h,other:y}=jhe(s,a,c,n);m|=h&&r.length,f=f||y,d.fullSize||r.push(c)}return m&&yf(r,s,a,n)||f}function Yx(e,s,a,n,r){e.top=a,e.left=s,e.right=s+n,e.bottom=a+r,e.width=n,e.height=r}function F3(e,s,a,n){const r=a.padding;let{x:i,y:l}=s;for(const c of e){const d=c.box,m=n[c.stack]||{placed:0,weight:1},f=c.stackWeight/m.weight||1;if(c.horizontal){const h=s.w*f,y=m.size||d.height;Qf(m.start)&&(l=m.start),d.fullSize?Yx(d,r.left,l,a.outerWidth-r.right-r.left,y):Yx(d,s.left+m.placed,l,h,y),m.start=l,m.placed+=h,l=d.bottom}else{const h=s.h*f,y=m.size||d.width;Qf(m.start)&&(i=m.start),d.fullSize?Yx(d,i,r.top,y,a.outerHeight-r.bottom-r.top):Yx(d,i,s.top+m.placed,y,h),m.start=i,m.placed+=h,i=d.right}}s.x=i,s.y=l}var Gn={addBox(e,s){e.boxes||(e.boxes=[]),s.fullSize=s.fullSize||!1,s.position=s.position||"top",s.weight=s.weight||0,s._layers=s._layers||function(){return[{z:0,draw(a){s.draw(a)}}]},e.boxes.push(s)},removeBox(e,s){const a=e.boxes?e.boxes.indexOf(s):-1;a!==-1&&e.boxes.splice(a,1)},configure(e,s,a){s.fullSize=a.fullSize,s.position=a.position,s.weight=a.weight},update(e,s,a,n){if(!e)return;const r=Zn(e.options.layout.padding),i=Math.max(s-r.width,0),l=Math.max(a-r.height,0),c=whe(e.boxes),d=c.vertical,m=c.horizontal;ls(e.boxes,p=>{typeof p.beforeLayout=="function"&&p.beforeLayout()});const f=d.reduce((p,v)=>v.box.options&&v.box.options.display===!1?p:p+1,0)||1,h=Object.freeze({outerWidth:s,outerHeight:a,padding:r,availableWidth:i,availableHeight:l,vBoxMaxWidth:i/2/f,hBoxMaxHeight:l/2}),y=Object.assign({},r);t6(y,Zn(n));const N=Object.assign({maxPadding:y,w:i,h:l,x:r.left,y:r.top},r),w=Nhe(d.concat(m),h);yf(c.fullSize,N,h,w),yf(d,N,h,w),yf(m,N,h,w)&&yf(d,N,h,w),Che(N),F3(c.leftAndTop,N,h,w),N.x+=N.w,N.y+=N.h,F3(c.rightAndBottom,N,h,w),e.chartArea={left:N.left,top:N.top,right:N.left+N.w,bottom:N.top+N.h,height:N.h,width:N.w},ls(c.chartArea,p=>{const v=p.box;Object.assign(v,e.chartArea),v.update(N.w,N.h,{left:0,top:0,right:0,bottom:0})})}};class s6{acquireContext(s,a){}releaseContext(s){return!1}addEventListener(s,a,n){}removeEventListener(s,a,n){}getDevicePixelRatio(){return 1}getMaximumSize(s,a,n,r){return a=Math.max(0,a||s.width),n=n||s.height,{width:a,height:Math.max(0,r?Math.floor(a/r):n)}}isAttached(s){return!0}updateConfig(s){}}class _he extends s6{acquireContext(s){return s&&s.getContext&&s.getContext("2d")||null}updateConfig(s){s.options.animation=!1}}const yp="$chartjs",The={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},B3=e=>e===null||e==="";function Ehe(e,s){const a=e.style,n=e.getAttribute("height"),r=e.getAttribute("width");if(e[yp]={initial:{height:n,width:r,style:{display:a.display,height:a.height,width:a.width}}},a.display=a.display||"block",a.boxSizing=a.boxSizing||"border-box",B3(r)){const i=S3(e,"width");i!==void 0&&(e.width=i)}if(B3(n))if(e.style.height==="")e.height=e.width/(s||2);else{const i=S3(e,"height");i!==void 0&&(e.height=i)}return e}const a6=jfe?{passive:!0}:!1;function Ahe(e,s,a){e&&e.addEventListener(s,a,a6)}function Lhe(e,s,a){e&&e.canvas&&e.canvas.removeEventListener(s,a,a6)}function khe(e,s){const a=The[e.type]||e.type,{x:n,y:r}=Uo(e,s);return{type:a,chart:s,native:e,x:n!==void 0?n:null,y:r!==void 0?r:null}}function o0(e,s){for(const a of e)if(a===s||a.contains(s))return!0}function Dhe(e,s,a){const n=e.canvas,r=new MutationObserver(i=>{let l=!1;for(const c of i)l=l||o0(c.addedNodes,n),l=l&&!o0(c.removedNodes,n);l&&a()});return r.observe(document,{childList:!0,subtree:!0}),r}function Mhe(e,s,a){const n=e.canvas,r=new MutationObserver(i=>{let l=!1;for(const c of i)l=l||o0(c.removedNodes,n),l=l&&!o0(c.addedNodes,n);l&&a()});return r.observe(document,{childList:!0,subtree:!0}),r}const Jf=new Map;let H3=0;function n6(){const e=window.devicePixelRatio;e!==H3&&(H3=e,Jf.forEach((s,a)=>{a.currentDevicePixelRatio!==e&&s()}))}function Phe(e,s){Jf.size||window.addEventListener("resize",n6),Jf.set(e,s)}function Ohe(e){Jf.delete(e),Jf.size||window.removeEventListener("resize",n6)}function Ihe(e,s,a){const n=e.canvas,r=n&&oS(n);if(!r)return;const i=U$((c,d)=>{const m=r.clientWidth;a(c,d),m<r.clientWidth&&a()},window),l=new ResizeObserver(c=>{const d=c[0],m=d.contentRect.width,f=d.contentRect.height;m===0&&f===0||i(m,f)});return l.observe(r),Phe(e,i),l}function oj(e,s,a){a&&a.disconnect(),s==="resize"&&Ohe(e)}function $he(e,s,a){const n=e.canvas,r=U$(i=>{e.ctx!==null&&a(khe(i,e))},e);return Ahe(n,s,r),r}class Rhe extends s6{acquireContext(s,a){const n=s&&s.getContext&&s.getContext("2d");return n&&n.canvas===s?(Ehe(s,a),n):null}releaseContext(s){const a=s.canvas;if(!a[yp])return!1;const n=a[yp].initial;["height","width"].forEach(i=>{const l=n[i];Zt(l)?a.removeAttribute(i):a.setAttribute(i,l)});const r=n.style||{};return Object.keys(r).forEach(i=>{a.style[i]=r[i]}),a.width=a.width,delete a[yp],!0}addEventListener(s,a,n){this.removeEventListener(s,a);const r=s.$proxies||(s.$proxies={}),l={attach:Dhe,detach:Mhe,resize:Ihe}[a]||$he;r[a]=l(s,a,n)}removeEventListener(s,a){const n=s.$proxies||(s.$proxies={}),r=n[a];if(!r)return;({attach:oj,detach:oj,resize:oj}[a]||Lhe)(s,a,r),n[a]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(s,a,n,r){return wfe(s,a,n,r)}isAttached(s){const a=s&&oS(s);return!!(a&&a.isConnected)}}function Uhe(e){return!lS()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?_he:Rhe}let el=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(s){const{x:a,y:n}=this.getProps(["x","y"],s);return{x:a,y:n}}hasValue(){return qf(this.x)&&qf(this.y)}getProps(s,a){const n=this.$animations;if(!a||!n)return this;const r={};return s.forEach(i=>{r[i]=n[i]&&n[i].active()?n[i]._to:this[i]}),r}};function zhe(e,s){const a=e.options.ticks,n=Fhe(e),r=Math.min(a.maxTicksLimit||n,n),i=a.major.enabled?Hhe(s):[],l=i.length,c=i[0],d=i[l-1],m=[];if(l>r)return Ghe(s,m,i,l/r),m;const f=Bhe(i,s,r);if(l>0){let h,y;const N=l>1?Math.round((d-c)/(l-1)):null;for(Qx(s,m,f,Zt(N)?0:c-N,c),h=0,y=l-1;h<y;h++)Qx(s,m,f,i[h],i[h+1]);return Qx(s,m,f,d,Zt(N)?s.length:d+N),m}return Qx(s,m,f),m}function Fhe(e){const s=e.options.offset,a=e._tickSize(),n=e._length/a+(s?0:1),r=e._maxLength/a;return Math.floor(Math.min(n,r))}function Bhe(e,s,a){const n=Vhe(e),r=s.length/a;if(!n)return Math.max(r,1);const i=Nme(n);for(let l=0,c=i.length-1;l<c;l++){const d=i[l];if(d>r)return d}return Math.max(r,1)}function Hhe(e){const s=[];let a,n;for(a=0,n=e.length;a<n;a++)e[a].major&&s.push(a);return s}function Ghe(e,s,a,n){let r=0,i=a[0],l;for(n=Math.ceil(n),l=0;l<e.length;l++)l===i&&(s.push(e[l]),r++,i=a[r*n])}function Qx(e,s,a,n,r){const i=At(n,0),l=Math.min(At(r,e.length),e.length);let c=0,d,m,f;for(a=Math.ceil(a),r&&(d=r-n,a=d/Math.floor(d/a)),f=i;f<0;)c++,f=Math.round(i+c*a);for(m=Math.max(i,0);m<l;m++)m===f&&(s.push(e[m]),c++,f=Math.round(i+c*a))}function Vhe(e){const s=e.length;let a,n;if(s<2)return!1;for(n=e[0],a=1;a<s;++a)if(e[a]-e[a-1]!==n)return!1;return n}const Whe=e=>e==="left"?"right":e==="right"?"left":e,G3=(e,s,a)=>s==="top"||s==="left"?e[s]+a:e[s]-a,V3=(e,s)=>Math.min(s||e,e);function W3(e,s){const a=[],n=e.length/s,r=e.length;let i=0;for(;i<r;i+=n)a.push(e[Math.floor(i)]);return a}function Yhe(e,s,a){const n=e.ticks.length,r=Math.min(s,n-1),i=e._startPixel,l=e._endPixel,c=1e-6;let d=e.getPixelForTick(r),m;if(!(a&&(n===1?m=Math.max(d-i,l-d):s===0?m=(e.getPixelForTick(1)-d)/2:m=(d-e.getPixelForTick(r-1))/2,d+=r<s?m:-m,d<i-c||d>l+c)))return d}function Qhe(e,s){ls(e,a=>{const n=a.gc,r=n.length/2;let i;if(r>s){for(i=0;i<r;++i)delete a.data[n[i]];n.splice(0,r)}})}function Xm(e){return e.drawTicks?e.tickLength:0}function Y3(e,s){if(!e.display)return 0;const a=_a(e.font,s),n=Zn(e.padding);return(sa(e.text)?e.text.length:1)*a.lineHeight+n.height}function qhe(e,s){return Cc(e,{scale:s,type:"scale"})}function Xhe(e,s,a){return Cc(e,{tick:a,index:s,type:"tick"})}function Khe(e,s,a){let n=Z2(e);return(a&&s!=="right"||!a&&s==="right")&&(n=Whe(n)),n}function Zhe(e,s,a,n){const{top:r,left:i,bottom:l,right:c,chart:d}=e,{chartArea:m,scales:f}=d;let h=0,y,N,w;const p=l-r,v=c-i;if(e.isHorizontal()){if(N=wa(n,i,c),Bt(a)){const C=Object.keys(a)[0],j=a[C];w=f[C].getPixelForValue(j)+p-s}else a==="center"?w=(m.bottom+m.top)/2+p-s:w=G3(e,a,s);y=c-i}else{if(Bt(a)){const C=Object.keys(a)[0],j=a[C];N=f[C].getPixelForValue(j)-v+s}else a==="center"?N=(m.left+m.right)/2-v+s:N=G3(e,a,s);w=wa(n,l,r),h=a==="left"?-aa:aa}return{titleX:N,titleY:w,maxWidth:y,rotation:h}}class Nu extends el{constructor(s){super(),this.id=s.id,this.type=s.type,this.options=void 0,this.ctx=s.ctx,this.chart=s.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(s){this.options=s.setContext(this.getContext()),this.axis=s.axis,this._userMin=this.parse(s.min),this._userMax=this.parse(s.max),this._suggestedMin=this.parse(s.suggestedMin),this._suggestedMax=this.parse(s.suggestedMax)}parse(s,a){return s}getUserBounds(){let{_userMin:s,_userMax:a,_suggestedMin:n,_suggestedMax:r}=this;return s=Ar(s,Number.POSITIVE_INFINITY),a=Ar(a,Number.NEGATIVE_INFINITY),n=Ar(n,Number.POSITIVE_INFINITY),r=Ar(r,Number.NEGATIVE_INFINITY),{min:Ar(s,n),max:Ar(a,r),minDefined:Kn(s),maxDefined:Kn(a)}}getMinMax(s){let{min:a,max:n,minDefined:r,maxDefined:i}=this.getUserBounds(),l;if(r&&i)return{min:a,max:n};const c=this.getMatchingVisibleMetas();for(let d=0,m=c.length;d<m;++d)l=c[d].controller.getMinMax(this,s),r||(a=Math.min(a,l.min)),i||(n=Math.max(n,l.max));return a=i&&a>n?n:a,n=r&&a>n?a:n,{min:Ar(a,Ar(n,a)),max:Ar(n,Ar(a,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const s=this.chart.data;return this.options.labels||(this.isHorizontal()?s.xLabels:s.yLabels)||s.labels||[]}getLabelItems(s=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(s))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ws(this.options.beforeUpdate,[this])}update(s,a,n){const{beginAtZero:r,grace:i,ticks:l}=this.options,c=l.sampleSize;this.beforeUpdate(),this.maxWidth=s,this.maxHeight=a,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=efe(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const d=c<this.ticks.length;this._convertTicksToLabels(d?W3(this.ticks,c):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),l.display&&(l.autoSkip||l.source==="auto")&&(this.ticks=zhe(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),d&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let s=this.options.reverse,a,n;this.isHorizontal()?(a=this.left,n=this.right):(a=this.top,n=this.bottom,s=!s),this._startPixel=a,this._endPixel=n,this._reversePixels=s,this._length=n-a,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ws(this.options.afterUpdate,[this])}beforeSetDimensions(){ws(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ws(this.options.afterSetDimensions,[this])}_callHooks(s){this.chart.notifyPlugins(s,this.getContext()),ws(this.options[s],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ws(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(s){const a=this.options.ticks;let n,r,i;for(n=0,r=s.length;n<r;n++)i=s[n],i.label=ws(a.callback,[i.value,n,s],this)}afterTickToLabelConversion(){ws(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ws(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const s=this.options,a=s.ticks,n=V3(this.ticks.length,s.ticks.maxTicksLimit),r=a.minRotation||0,i=a.maxRotation;let l=r,c,d,m;if(!this._isVisible()||!a.display||r>=i||n<=1||!this.isHorizontal()){this.labelRotation=r;return}const f=this._getLabelSizes(),h=f.widest.width,y=f.highest.height,N=Sa(this.chart.width-h,0,this.maxWidth);c=s.offset?this.maxWidth/n:N/(n-1),h+6>c&&(c=N/(n-(s.offset?.5:1)),d=this.maxHeight-Xm(s.grid)-a.padding-Y3(s.title,this.chart.options.font),m=Math.sqrt(h*h+y*y),l=Sme(Math.min(Math.asin(Sa((f.highest.height+6)/c,-1,1)),Math.asin(Sa(d/m,-1,1))-Math.asin(Sa(y/m,-1,1)))),l=Math.max(r,Math.min(i,l))),this.labelRotation=l}afterCalculateLabelRotation(){ws(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ws(this.options.beforeFit,[this])}fit(){const s={width:0,height:0},{chart:a,options:{ticks:n,title:r,grid:i}}=this,l=this._isVisible(),c=this.isHorizontal();if(l){const d=Y3(r,a.options.font);if(c?(s.width=this.maxWidth,s.height=Xm(i)+d):(s.height=this.maxHeight,s.width=Xm(i)+d),n.display&&this.ticks.length){const{first:m,last:f,widest:h,highest:y}=this._getLabelSizes(),N=n.padding*2,w=Pi(this.labelRotation),p=Math.cos(w),v=Math.sin(w);if(c){const C=n.mirror?0:v*h.width+p*y.height;s.height=Math.min(this.maxHeight,s.height+C+N)}else{const C=n.mirror?0:p*h.width+v*y.height;s.width=Math.min(this.maxWidth,s.width+C+N)}this._calculatePadding(m,f,v,p)}}this._handleMargins(),c?(this.width=this._length=a.width-this._margins.left-this._margins.right,this.height=s.height):(this.width=s.width,this.height=this._length=a.height-this._margins.top-this._margins.bottom)}_calculatePadding(s,a,n,r){const{ticks:{align:i,padding:l},position:c}=this.options,d=this.labelRotation!==0,m=c!=="top"&&this.axis==="x";if(this.isHorizontal()){const f=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let y=0,N=0;d?m?(y=r*s.width,N=n*a.height):(y=n*s.height,N=r*a.width):i==="start"?N=a.width:i==="end"?y=s.width:i!=="inner"&&(y=s.width/2,N=a.width/2),this.paddingLeft=Math.max((y-f+l)*this.width/(this.width-f),0),this.paddingRight=Math.max((N-h+l)*this.width/(this.width-h),0)}else{let f=a.height/2,h=s.height/2;i==="start"?(f=0,h=s.height):i==="end"&&(f=a.height,h=0),this.paddingTop=f+l,this.paddingBottom=h+l}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ws(this.options.afterFit,[this])}isHorizontal(){const{axis:s,position:a}=this.options;return a==="top"||a==="bottom"||s==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(s){this.beforeTickToLabelConversion(),this.generateTickLabels(s);let a,n;for(a=0,n=s.length;a<n;a++)Zt(s[a].label)&&(s.splice(a,1),n--,a--);this.afterTickToLabelConversion()}_getLabelSizes(){let s=this._labelSizes;if(!s){const a=this.options.ticks.sampleSize;let n=this.ticks;a<n.length&&(n=W3(n,a)),this._labelSizes=s=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return s}_computeLabelSizes(s,a,n){const{ctx:r,_longestTextCache:i}=this,l=[],c=[],d=Math.floor(a/V3(a,n));let m=0,f=0,h,y,N,w,p,v,C,j,_,T,k;for(h=0;h<a;h+=d){if(w=s[h].label,p=this._resolveTickFontOptions(h),r.font=v=p.string,C=i[v]=i[v]||{data:{},gc:[]},j=p.lineHeight,_=T=0,!Zt(w)&&!sa(w))_=v3(r,C.data,C.gc,_,w),T=j;else if(sa(w))for(y=0,N=w.length;y<N;++y)k=w[y],!Zt(k)&&!sa(k)&&(_=v3(r,C.data,C.gc,_,k),T+=j);l.push(_),c.push(T),m=Math.max(_,m),f=Math.max(T,f)}Qhe(i,a);const E=l.indexOf(m),A=c.indexOf(f),U=B=>({width:l[B]||0,height:c[B]||0});return{first:U(0),last:U(a-1),widest:U(E),highest:U(A),widths:l,heights:c}}getLabelForValue(s){return s}getPixelForValue(s,a){return NaN}getValueForPixel(s){}getPixelForTick(s){const a=this.ticks;return s<0||s>a.length-1?null:this.getPixelForValue(a[s].value)}getPixelForDecimal(s){this._reversePixels&&(s=1-s);const a=this._startPixel+s*this._length;return Tme(this._alignToPixels?Ao(this.chart,a,0):a)}getDecimalForPixel(s){const a=(s-this._startPixel)/this._length;return this._reversePixels?1-a:a}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:s,max:a}=this;return s<0&&a<0?a:s>0&&a>0?s:0}getContext(s){const a=this.ticks||[];if(s>=0&&s<a.length){const n=a[s];return n.$context||(n.$context=Xhe(this.getContext(),s,n))}return this.$context||(this.$context=qhe(this.chart.getContext(),this))}_tickSize(){const s=this.options.ticks,a=Pi(this.labelRotation),n=Math.abs(Math.cos(a)),r=Math.abs(Math.sin(a)),i=this._getLabelSizes(),l=s.autoSkipPadding||0,c=i?i.widest.width+l:0,d=i?i.highest.height+l:0;return this.isHorizontal()?d*n>c*r?c/n:d/r:d*r<c*n?d/n:c/r}_isVisible(){const s=this.options.display;return s!=="auto"?!!s:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(s){const a=this.axis,n=this.chart,r=this.options,{grid:i,position:l,border:c}=r,d=i.offset,m=this.isHorizontal(),h=this.ticks.length+(d?1:0),y=Xm(i),N=[],w=c.setContext(this.getContext()),p=w.display?w.width:0,v=p/2,C=function(R){return Ao(n,R,p)};let j,_,T,k,E,A,U,B,X,$,O,G;if(l==="top")j=C(this.bottom),A=this.bottom-y,B=j-v,$=C(s.top)+v,G=s.bottom;else if(l==="bottom")j=C(this.top),$=s.top,G=C(s.bottom)-v,A=j+v,B=this.top+y;else if(l==="left")j=C(this.right),E=this.right-y,U=j-v,X=C(s.left)+v,O=s.right;else if(l==="right")j=C(this.left),X=s.left,O=C(s.right)-v,E=j+v,U=this.left+y;else if(a==="x"){if(l==="center")j=C((s.top+s.bottom)/2+.5);else if(Bt(l)){const R=Object.keys(l)[0],Z=l[R];j=C(this.chart.scales[R].getPixelForValue(Z))}$=s.top,G=s.bottom,A=j+v,B=A+y}else if(a==="y"){if(l==="center")j=C((s.left+s.right)/2);else if(Bt(l)){const R=Object.keys(l)[0],Z=l[R];j=C(this.chart.scales[R].getPixelForValue(Z))}E=j-v,U=E-y,X=s.left,O=s.right}const K=At(r.ticks.maxTicksLimit,h),ae=Math.max(1,Math.ceil(h/K));for(_=0;_<h;_+=ae){const R=this.getContext(_),Z=i.setContext(R),te=c.setContext(R),ge=Z.lineWidth,le=Z.color,W=te.dash||[],ee=te.dashOffset,J=Z.tickWidth,he=Z.tickColor,be=Z.tickBorderDash||[],Le=Z.tickBorderDashOffset;T=Yhe(this,_,d),T!==void 0&&(k=Ao(n,T,ge),m?E=U=X=O=k:A=B=$=G=k,N.push({tx1:E,ty1:A,tx2:U,ty2:B,x1:X,y1:$,x2:O,y2:G,width:ge,color:le,borderDash:W,borderDashOffset:ee,tickWidth:J,tickColor:he,tickBorderDash:be,tickBorderDashOffset:Le}))}return this._ticksLength=h,this._borderValue=j,N}_computeLabelItems(s){const a=this.axis,n=this.options,{position:r,ticks:i}=n,l=this.isHorizontal(),c=this.ticks,{align:d,crossAlign:m,padding:f,mirror:h}=i,y=Xm(n.grid),N=y+f,w=h?-f:N,p=-Pi(this.labelRotation),v=[];let C,j,_,T,k,E,A,U,B,X,$,O,G="middle";if(r==="top")E=this.bottom-w,A=this._getXAxisLabelAlignment();else if(r==="bottom")E=this.top+w,A=this._getXAxisLabelAlignment();else if(r==="left"){const ae=this._getYAxisLabelAlignment(y);A=ae.textAlign,k=ae.x}else if(r==="right"){const ae=this._getYAxisLabelAlignment(y);A=ae.textAlign,k=ae.x}else if(a==="x"){if(r==="center")E=(s.top+s.bottom)/2+N;else if(Bt(r)){const ae=Object.keys(r)[0],R=r[ae];E=this.chart.scales[ae].getPixelForValue(R)+N}A=this._getXAxisLabelAlignment()}else if(a==="y"){if(r==="center")k=(s.left+s.right)/2-N;else if(Bt(r)){const ae=Object.keys(r)[0],R=r[ae];k=this.chart.scales[ae].getPixelForValue(R)}A=this._getYAxisLabelAlignment(y).textAlign}a==="y"&&(d==="start"?G="top":d==="end"&&(G="bottom"));const K=this._getLabelSizes();for(C=0,j=c.length;C<j;++C){_=c[C],T=_.label;const ae=i.setContext(this.getContext(C));U=this.getPixelForTick(C)+i.labelOffset,B=this._resolveTickFontOptions(C),X=B.lineHeight,$=sa(T)?T.length:1;const R=$/2,Z=ae.color,te=ae.textStrokeColor,ge=ae.textStrokeWidth;let le=A;l?(k=U,A==="inner"&&(C===j-1?le=this.options.reverse?"left":"right":C===0?le=this.options.reverse?"right":"left":le="center"),r==="top"?m==="near"||p!==0?O=-$*X+X/2:m==="center"?O=-K.highest.height/2-R*X+X:O=-K.highest.height+X/2:m==="near"||p!==0?O=X/2:m==="center"?O=K.highest.height/2-R*X:O=K.highest.height-$*X,h&&(O*=-1),p!==0&&!ae.showLabelBackdrop&&(k+=X/2*Math.sin(p))):(E=U,O=(1-$)*X/2);let W;if(ae.showLabelBackdrop){const ee=Zn(ae.backdropPadding),J=K.heights[C],he=K.widths[C];let be=O-ee.top,Le=0-ee.left;switch(G){case"middle":be-=J/2;break;case"bottom":be-=J;break}switch(A){case"center":Le-=he/2;break;case"right":Le-=he;break;case"inner":C===j-1?Le-=he:C>0&&(Le-=he/2);break}W={left:Le,top:be,width:he+ee.width,height:J+ee.height,color:ae.backdropColor}}v.push({label:T,font:B,textOffset:O,options:{rotation:p,color:Z,strokeColor:te,strokeWidth:ge,textAlign:le,textBaseline:G,translation:[k,E],backdrop:W}})}return v}_getXAxisLabelAlignment(){const{position:s,ticks:a}=this.options;if(-Pi(this.labelRotation))return s==="top"?"left":"right";let r="center";return a.align==="start"?r="left":a.align==="end"?r="right":a.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(s){const{position:a,ticks:{crossAlign:n,mirror:r,padding:i}}=this.options,l=this._getLabelSizes(),c=s+i,d=l.widest.width;let m,f;return a==="left"?r?(f=this.right+i,n==="near"?m="left":n==="center"?(m="center",f+=d/2):(m="right",f+=d)):(f=this.right-c,n==="near"?m="right":n==="center"?(m="center",f-=d/2):(m="left",f=this.left)):a==="right"?r?(f=this.left+i,n==="near"?m="right":n==="center"?(m="center",f-=d/2):(m="left",f-=d)):(f=this.left+c,n==="near"?m="left":n==="center"?(m="center",f+=d/2):(m="right",f=this.right)):m="right",{textAlign:m,x:f}}_computeLabelArea(){if(this.options.ticks.mirror)return;const s=this.chart,a=this.options.position;if(a==="left"||a==="right")return{top:0,left:this.left,bottom:s.height,right:this.right};if(a==="top"||a==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:s.width}}drawBackground(){const{ctx:s,options:{backgroundColor:a},left:n,top:r,width:i,height:l}=this;a&&(s.save(),s.fillStyle=a,s.fillRect(n,r,i,l),s.restore())}getLineWidthForValue(s){const a=this.options.grid;if(!this._isVisible()||!a.display)return 0;const r=this.ticks.findIndex(i=>i.value===s);return r>=0?a.setContext(this.getContext(r)).lineWidth:0}drawGrid(s){const a=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(s));let i,l;const c=(d,m,f)=>{!f.width||!f.color||(n.save(),n.lineWidth=f.width,n.strokeStyle=f.color,n.setLineDash(f.borderDash||[]),n.lineDashOffset=f.borderDashOffset,n.beginPath(),n.moveTo(d.x,d.y),n.lineTo(m.x,m.y),n.stroke(),n.restore())};if(a.display)for(i=0,l=r.length;i<l;++i){const d=r[i];a.drawOnChartArea&&c({x:d.x1,y:d.y1},{x:d.x2,y:d.y2},d),a.drawTicks&&c({x:d.tx1,y:d.ty1},{x:d.tx2,y:d.ty2},{color:d.tickColor,width:d.tickWidth,borderDash:d.tickBorderDash,borderDashOffset:d.tickBorderDashOffset})}}drawBorder(){const{chart:s,ctx:a,options:{border:n,grid:r}}=this,i=n.setContext(this.getContext()),l=n.display?i.width:0;if(!l)return;const c=r.setContext(this.getContext(0)).lineWidth,d=this._borderValue;let m,f,h,y;this.isHorizontal()?(m=Ao(s,this.left,l)-l/2,f=Ao(s,this.right,c)+c/2,h=y=d):(h=Ao(s,this.top,l)-l/2,y=Ao(s,this.bottom,c)+c/2,m=f=d),a.save(),a.lineWidth=i.width,a.strokeStyle=i.color,a.beginPath(),a.moveTo(m,h),a.lineTo(f,y),a.stroke(),a.restore()}drawLabels(s){if(!this.options.ticks.display)return;const n=this.ctx,r=this._computeLabelArea();r&&tS(n,r);const i=this.getLabelItems(s);for(const l of i){const c=l.options,d=l.font,m=l.label,f=l.textOffset;Zf(n,m,0,f,d,c)}r&&sS(n)}drawTitle(){const{ctx:s,options:{position:a,title:n,reverse:r}}=this;if(!n.display)return;const i=_a(n.font),l=Zn(n.padding),c=n.align;let d=i.lineHeight/2;a==="bottom"||a==="center"||Bt(a)?(d+=l.bottom,sa(n.text)&&(d+=i.lineHeight*(n.text.length-1))):d+=l.top;const{titleX:m,titleY:f,maxWidth:h,rotation:y}=Zhe(this,d,a,c);Zf(s,n.text,0,0,i,{color:n.color,maxWidth:h,rotation:y,textAlign:Khe(c,a,r),textBaseline:"middle",translation:[m,f]})}draw(s){this._isVisible()&&(this.drawBackground(),this.drawGrid(s),this.drawBorder(),this.drawTitle(),this.drawLabels(s))}_layers(){const s=this.options,a=s.ticks&&s.ticks.z||0,n=At(s.grid&&s.grid.z,-1),r=At(s.border&&s.border.z,0);return!this._isVisible()||this.draw!==Nu.prototype.draw?[{z:a,draw:i=>{this.draw(i)}}]:[{z:n,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:a,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(s){const a=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let i,l;for(i=0,l=a.length;i<l;++i){const c=a[i];c[n]===this.id&&(!s||c.type===s)&&r.push(c)}return r}_resolveTickFontOptions(s){const a=this.options.ticks.setContext(this.getContext(s));return _a(a.font)}_maxDigits(){const s=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/s}}class qx{constructor(s,a,n){this.type=s,this.scope=a,this.override=n,this.items=Object.create(null)}isForType(s){return Object.prototype.isPrototypeOf.call(this.type.prototype,s.prototype)}register(s){const a=Object.getPrototypeOf(s);let n;tge(a)&&(n=this.register(a));const r=this.items,i=s.id,l=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+s);return i in r||(r[i]=s,Jhe(s,l,n),this.override&&Us.override(s.id,s.overrides)),l}get(s){return this.items[s]}unregister(s){const a=this.items,n=s.id,r=this.scope;n in a&&delete a[n],r&&n in Us[r]&&(delete Us[r][n],this.override&&delete hc[n])}}function Jhe(e,s,a){const n=Yf(Object.create(null),[a?Us.get(a):{},Us.get(s),e.defaults]);Us.set(s,n),e.defaultRoutes&&ege(s,e.defaultRoutes),e.descriptors&&Us.describe(s,e.descriptors)}function ege(e,s){Object.keys(s).forEach(a=>{const n=a.split("."),r=n.pop(),i=[e].concat(n).join("."),l=s[a].split("."),c=l.pop(),d=l.join(".");Us.route(i,r,d,c)})}function tge(e){return"id"in e&&"defaults"in e}class sge{constructor(){this.controllers=new qx(Fy,"datasets",!0),this.elements=new qx(el,"elements"),this.plugins=new qx(Object,"plugins"),this.scales=new qx(Nu,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...s){this._each("register",s)}remove(...s){this._each("unregister",s)}addControllers(...s){this._each("register",s,this.controllers)}addElements(...s){this._each("register",s,this.elements)}addPlugins(...s){this._each("register",s,this.plugins)}addScales(...s){this._each("register",s,this.scales)}getController(s){return this._get(s,this.controllers,"controller")}getElement(s){return this._get(s,this.elements,"element")}getPlugin(s){return this._get(s,this.plugins,"plugin")}getScale(s){return this._get(s,this.scales,"scale")}removeControllers(...s){this._each("unregister",s,this.controllers)}removeElements(...s){this._each("unregister",s,this.elements)}removePlugins(...s){this._each("unregister",s,this.plugins)}removeScales(...s){this._each("unregister",s,this.scales)}_each(s,a,n){[...a].forEach(r=>{const i=n||this._getRegistryForType(r);n||i.isForType(r)||i===this.plugins&&r.id?this._exec(s,i,r):ls(r,l=>{const c=n||this._getRegistryForType(l);this._exec(s,c,l)})})}_exec(s,a,n){const r=X2(s);ws(n["before"+r],[],n),a[s](n),ws(n["after"+r],[],n)}_getRegistryForType(s){for(let a=0;a<this._typedRegistries.length;a++){const n=this._typedRegistries[a];if(n.isForType(s))return n}return this.plugins}_get(s,a,n){const r=a.get(s);if(r===void 0)throw new Error('"'+s+'" is not a registered '+n+".");return r}}var Dr=new sge;class age{constructor(){this._init=void 0}notify(s,a,n,r){if(a==="beforeInit"&&(this._init=this._createDescriptors(s,!0),this._notify(this._init,s,"install")),this._init===void 0)return;const i=r?this._descriptors(s).filter(r):this._descriptors(s),l=this._notify(i,s,a,n);return a==="afterDestroy"&&(this._notify(i,s,"stop"),this._notify(this._init,s,"uninstall"),this._init=void 0),l}_notify(s,a,n,r){r=r||{};for(const i of s){const l=i.plugin,c=l[n],d=[a,r,i.options];if(ws(c,d,l)===!1&&r.cancelable)return!1}return!0}invalidate(){Zt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(s){if(this._cache)return this._cache;const a=this._cache=this._createDescriptors(s);return this._notifyStateChanges(s),a}_createDescriptors(s,a){const n=s&&s.config,r=At(n.options&&n.options.plugins,{}),i=nge(n);return r===!1&&!a?[]:ige(s,i,r,a)}_notifyStateChanges(s){const a=this._oldCache||[],n=this._cache,r=(i,l)=>i.filter(c=>!l.some(d=>c.plugin.id===d.plugin.id));this._notify(r(a,n),s,"stop"),this._notify(r(n,a),s,"start")}}function nge(e){const s={},a=[],n=Object.keys(Dr.plugins.items);for(let i=0;i<n.length;i++)a.push(Dr.getPlugin(n[i]));const r=e.plugins||[];for(let i=0;i<r.length;i++){const l=r[i];a.indexOf(l)===-1&&(a.push(l),s[l.id]=!0)}return{plugins:a,localIds:s}}function rge(e,s){return!s&&e===!1?null:e===!0?{}:e}function ige(e,{plugins:s,localIds:a},n,r){const i=[],l=e.getContext();for(const c of s){const d=c.id,m=rge(n[d],r);m!==null&&i.push({plugin:c,options:lge(e.config,{plugin:c,local:a[d]},m,l)})}return i}function lge(e,{plugin:s,local:a},n,r){const i=e.pluginScopeKeys(s),l=e.getOptionScopes(n,i);return a&&s.defaults&&l.push(s.defaults),e.createResolver(l,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function YC(e,s){const a=Us.datasets[e]||{};return((s.datasets||{})[e]||{}).indexAxis||s.indexAxis||a.indexAxis||"x"}function oge(e,s){let a=e;return e==="_index_"?a=s:e==="_value_"&&(a=s==="x"?"y":"x"),a}function cge(e,s){return e===s?"_index_":"_value_"}function Q3(e){if(e==="x"||e==="y"||e==="r")return e}function dge(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function QC(e,...s){if(Q3(e))return e;for(const a of s){const n=a.axis||dge(a.position)||e.length>1&&Q3(e[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function q3(e,s,a){if(a[s+"AxisID"]===e)return{axis:s}}function uge(e,s){if(s.data&&s.data.datasets){const a=s.data.datasets.filter(n=>n.xAxisID===e||n.yAxisID===e);if(a.length)return q3(e,"x",a[0])||q3(e,"y",a[0])}return{}}function mge(e,s){const a=hc[e.type]||{scales:{}},n=s.scales||{},r=YC(e.type,s),i=Object.create(null);return Object.keys(n).forEach(l=>{const c=n[l];if(!Bt(c))return console.error(`Invalid scale configuration for scale: ${l}`);if(c._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const d=QC(l,c,uge(l,e),Us.scales[c.type]),m=cge(d,r),f=a.scales||{};i[l]=_f(Object.create(null),[{axis:d},c,f[d],f[m]])}),e.data.datasets.forEach(l=>{const c=l.type||e.type,d=l.indexAxis||YC(c,s),f=(hc[c]||{}).scales||{};Object.keys(f).forEach(h=>{const y=oge(h,d),N=l[y+"AxisID"]||y;i[N]=i[N]||Object.create(null),_f(i[N],[{axis:y},n[N],f[h]])})}),Object.keys(i).forEach(l=>{const c=i[l];_f(c,[Us.scales[c.type],Us.scale])}),i}function r6(e){const s=e.options||(e.options={});s.plugins=At(s.plugins,{}),s.scales=mge(e,s)}function i6(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function fge(e){return e=e||{},e.data=i6(e.data),r6(e),e}const X3=new Map,l6=new Set;function Xx(e,s){let a=X3.get(e);return a||(a=s(),X3.set(e,a),l6.add(a)),a}const Km=(e,s,a)=>{const n=fc(s,a);n!==void 0&&e.add(n)};class hge{constructor(s){this._config=fge(s),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(s){this._config.type=s}get data(){return this._config.data}set data(s){this._config.data=i6(s)}get options(){return this._config.options}set options(s){this._config.options=s}get plugins(){return this._config.plugins}update(){const s=this._config;this.clearCache(),r6(s)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(s){return Xx(s,()=>[[`datasets.${s}`,""]])}datasetAnimationScopeKeys(s,a){return Xx(`${s}.transition.${a}`,()=>[[`datasets.${s}.transitions.${a}`,`transitions.${a}`],[`datasets.${s}`,""]])}datasetElementScopeKeys(s,a){return Xx(`${s}-${a}`,()=>[[`datasets.${s}.elements.${a}`,`datasets.${s}`,`elements.${a}`,""]])}pluginScopeKeys(s){const a=s.id,n=this.type;return Xx(`${n}-plugin-${a}`,()=>[[`plugins.${a}`,...s.additionalOptionScopes||[]]])}_cachedScopes(s,a){const n=this._scopeCache;let r=n.get(s);return(!r||a)&&(r=new Map,n.set(s,r)),r}getOptionScopes(s,a,n){const{options:r,type:i}=this,l=this._cachedScopes(s,n),c=l.get(a);if(c)return c;const d=new Set;a.forEach(f=>{s&&(d.add(s),f.forEach(h=>Km(d,s,h))),f.forEach(h=>Km(d,r,h)),f.forEach(h=>Km(d,hc[i]||{},h)),f.forEach(h=>Km(d,Us,h)),f.forEach(h=>Km(d,VC,h))});const m=Array.from(d);return m.length===0&&m.push(Object.create(null)),l6.has(a)&&l.set(a,m),m}chartOptionScopes(){const{options:s,type:a}=this;return[s,hc[a]||{},Us.datasets[a]||{},{type:a},Us,VC]}resolveNamedOptions(s,a,n,r=[""]){const i={$shared:!0},{resolver:l,subPrefixes:c}=K3(this._resolverCache,s,r);let d=l;if(xge(l,a)){i.$shared=!1,n=Vl(n)?n():n;const m=this.createResolver(s,n,c);d=lu(l,n,m)}for(const m of a)i[m]=d[m];return i}createResolver(s,a,n=[""],r){const{resolver:i}=K3(this._resolverCache,s,n);return Bt(a)?lu(i,a,void 0,r):i}}function K3(e,s,a){let n=e.get(s);n||(n=new Map,e.set(s,n));const r=a.join();let i=n.get(r);return i||(i={resolver:nS(s,a),subPrefixes:a.filter(c=>!c.toLowerCase().includes("hover"))},n.set(r,i)),i}const gge=e=>Bt(e)&&Object.getOwnPropertyNames(e).some(s=>Vl(e[s]));function xge(e,s){const{isScriptable:a,isIndexable:n}=H$(e);for(const r of s){const i=a(r),l=n(r),c=(l||i)&&e[r];if(i&&(Vl(c)||gge(c))||l&&sa(c))return!0}return!1}var pge="4.5.1";const yge=["top","bottom","left","right","chartArea"];function Z3(e,s){return e==="top"||e==="bottom"||yge.indexOf(e)===-1&&s==="x"}function J3(e,s){return function(a,n){return a[e]===n[e]?a[s]-n[s]:a[e]-n[e]}}function eD(e){const s=e.chart,a=s.options.animation;s.notifyPlugins("afterRender"),ws(a&&a.onComplete,[e],s)}function bge(e){const s=e.chart,a=s.options.animation;ws(a&&a.onProgress,[e],s)}function o6(e){return lS()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const bp={},tD=e=>{const s=o6(e);return Object.values(bp).filter(a=>a.canvas===s).pop()};function vge(e,s,a){const n=Object.keys(e);for(const r of n){const i=+r;if(i>=s){const l=e[r];delete e[r],(a>0||i>s)&&(e[i+a]=l)}}}function Nge(e,s,a,n){return!a||e.type==="mouseout"?null:n?s:e}let Hy=class{static defaults=Us;static instances=bp;static overrides=hc;static registry=Dr;static version=pge;static getChart=tD;static register(...s){Dr.add(...s),sD()}static unregister(...s){Dr.remove(...s),sD()}constructor(s,a){const n=this.config=new hge(a),r=o6(s),i=tD(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const l=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||Uhe(r)),this.platform.updateConfig(n);const c=this.platform.acquireContext(r,l.aspectRatio),d=c&&c.canvas,m=d&&d.height,f=d&&d.width;if(this.id=mme(),this.ctx=c,this.canvas=d,this.width=f,this.height=m,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new age,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=kme(h=>this.update(h),l.resizeDelay||0),this._dataChanges=[],bp[this.id]=this,!c||!d){console.error("Failed to create chart: can't acquire context from the given item");return}Ti.listen(this,"complete",eD),Ti.listen(this,"progress",bge),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:s,maintainAspectRatio:a},width:n,height:r,_aspectRatio:i}=this;return Zt(s)?a&&i?i:r?n/r:null:s}get data(){return this.config.data}set data(s){this.config.data=s}get options(){return this._options}set options(s){this.config.options=s}get registry(){return Dr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():C3(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return N3(this.canvas,this.ctx),this}stop(){return Ti.stop(this),this}resize(s,a){Ti.running(this)?this._resizeBeforeDraw={width:s,height:a}:this._resize(s,a)}_resize(s,a){const n=this.options,r=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(r,s,a,i),c=n.devicePixelRatio||this.platform.getDevicePixelRatio(),d=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,C3(this,c,!0)&&(this.notifyPlugins("resize",{size:l}),ws(n.onResize,[this,l],this),this.attached&&this._doResize(d)&&this.render())}ensureScalesHaveIDs(){const a=this.options.scales||{};ls(a,(n,r)=>{n.id=r})}buildOrUpdateScales(){const s=this.options,a=s.scales,n=this.scales,r=Object.keys(n).reduce((l,c)=>(l[c]=!1,l),{});let i=[];a&&(i=i.concat(Object.keys(a).map(l=>{const c=a[l],d=QC(l,c),m=d==="r",f=d==="x";return{options:c,dposition:m?"chartArea":f?"bottom":"left",dtype:m?"radialLinear":f?"category":"linear"}}))),ls(i,l=>{const c=l.options,d=c.id,m=QC(d,c),f=At(c.type,l.dtype);(c.position===void 0||Z3(c.position,m)!==Z3(l.dposition))&&(c.position=l.dposition),r[d]=!0;let h=null;if(d in n&&n[d].type===f)h=n[d];else{const y=Dr.getScale(f);h=new y({id:d,type:f,ctx:this.ctx,chart:this}),n[h.id]=h}h.init(c,s)}),ls(r,(l,c)=>{l||delete n[c]}),ls(n,l=>{Gn.configure(this,l,l.options),Gn.addBox(this,l)})}_updateMetasets(){const s=this._metasets,a=this.data.datasets.length,n=s.length;if(s.sort((r,i)=>r.index-i.index),n>a){for(let r=a;r<n;++r)this._destroyDatasetMeta(r);s.splice(a,n-a)}this._sortedMetasets=s.slice(0).sort(J3("order","index"))}_removeUnreferencedMetasets(){const{_metasets:s,data:{datasets:a}}=this;s.length>a.length&&delete this._stacks,s.forEach((n,r)=>{a.filter(i=>i===n._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const s=[],a=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=a.length;n<r;n++){const i=a[n];let l=this.getDatasetMeta(n);const c=i.type||this.config.type;if(l.type&&l.type!==c&&(this._destroyDatasetMeta(n),l=this.getDatasetMeta(n)),l.type=c,l.indexAxis=i.indexAxis||YC(c,this.options),l.order=i.order||0,l.index=n,l.label=""+i.label,l.visible=this.isDatasetVisible(n),l.controller)l.controller.updateIndex(n),l.controller.linkScales();else{const d=Dr.getController(c),{datasetElementType:m,dataElementType:f}=Us.datasets[c];Object.assign(d,{dataElementType:Dr.getElement(f),datasetElementType:m&&Dr.getElement(m)}),l.controller=new d(this,n),s.push(l.controller)}}return this._updateMetasets(),s}_resetElements(){ls(this.data.datasets,(s,a)=>{this.getDatasetMeta(a).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(s){const a=this.config;a.update();const n=this._options=a.createResolver(a.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:s,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let m=0,f=this.data.datasets.length;m<f;m++){const{controller:h}=this.getDatasetMeta(m),y=!r&&i.indexOf(h)===-1;h.buildOrUpdateElements(y),l=Math.max(+h.getMaxOverflow(),l)}l=this._minPadding=n.layout.autoPadding?l:0,this._updateLayout(l),r||ls(i,m=>{m.reset()}),this._updateDatasets(s),this.notifyPlugins("afterUpdate",{mode:s}),this._layers.sort(J3("z","_idx"));const{_active:c,_lastEvent:d}=this;d?this._eventHandler(d,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){ls(this.scales,s=>{Gn.removeBox(this,s)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const s=this.options,a=new Set(Object.keys(this._listeners)),n=new Set(s.events);(!u3(a,n)||!!this._responsiveListeners!==s.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:s}=this,a=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:i}of a){const l=n==="_removeElements"?-i:i;vge(s,r,l)}}_getUniformDataChanges(){const s=this._dataChanges;if(!s||!s.length)return;this._dataChanges=[];const a=this.data.datasets.length,n=i=>new Set(s.filter(l=>l[0]===i).map((l,c)=>c+","+l.splice(1).join(","))),r=n(0);for(let i=1;i<a;i++)if(!u3(r,n(i)))return;return Array.from(r).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(s){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Gn.update(this,this.width,this.height,s);const a=this.chartArea,n=a.width<=0||a.height<=0;this._layers=[],ls(this.boxes,r=>{n&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,i)=>{r._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(s){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:s,cancelable:!0})!==!1){for(let a=0,n=this.data.datasets.length;a<n;++a)this.getDatasetMeta(a).controller.configure();for(let a=0,n=this.data.datasets.length;a<n;++a)this._updateDataset(a,Vl(s)?s({datasetIndex:a}):s);this.notifyPlugins("afterDatasetsUpdate",{mode:s})}}_updateDataset(s,a){const n=this.getDatasetMeta(s),r={meta:n,index:s,mode:a,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(n.controller._update(a),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ti.has(this)?this.attached&&!Ti.running(this)&&Ti.start(this):(this.draw(),eD({chart:this})))}draw(){let s;if(this._resizeBeforeDraw){const{width:n,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const a=this._layers;for(s=0;s<a.length&&a[s].z<=0;++s)a[s].draw(this.chartArea);for(this._drawDatasets();s<a.length;++s)a[s].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(s){const a=this._sortedMetasets,n=[];let r,i;for(r=0,i=a.length;r<i;++r){const l=a[r];(!s||l.visible)&&n.push(l)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const s=this.getSortedVisibleDatasetMetas();for(let a=s.length-1;a>=0;--a)this._drawDataset(s[a]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(s){const a=this.ctx,n={meta:s,index:s.index,cancelable:!0},r=$fe(this,s);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(r&&tS(a,r),s.controller.draw(),r&&sS(a),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(s){return Kf(s,this.chartArea,this._minPadding)}getElementsAtEventForMode(s,a,n,r){const i=yhe.modes[a];return typeof i=="function"?i(this,s,n,r):[]}getDatasetMeta(s){const a=this.data.datasets[s],n=this._metasets;let r=n.filter(i=>i&&i._dataset===a).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:a&&a.order||0,index:s,_dataset:a,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=Cc(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(s){const a=this.data.datasets[s];if(!a)return!1;const n=this.getDatasetMeta(s);return typeof n.hidden=="boolean"?!n.hidden:!a.hidden}setDatasetVisibility(s,a){const n=this.getDatasetMeta(s);n.hidden=!a}toggleDataVisibility(s){this._hiddenIndices[s]=!this._hiddenIndices[s]}getDataVisibility(s){return!this._hiddenIndices[s]}_updateVisibility(s,a,n){const r=n?"show":"hide",i=this.getDatasetMeta(s),l=i.controller._resolveAnimations(void 0,r);Qf(a)?(i.data[a].hidden=!n,this.update()):(this.setDatasetVisibility(s,n),l.update(i,{visible:n}),this.update(c=>c.datasetIndex===s?r:void 0))}hide(s,a){this._updateVisibility(s,a,!1)}show(s,a){this._updateVisibility(s,a,!0)}_destroyDatasetMeta(s){const a=this._metasets[s];a&&a.controller&&a.controller._destroy(),delete this._metasets[s]}_stop(){let s,a;for(this.stop(),Ti.remove(this),s=0,a=this.data.datasets.length;s<a;++s)this._destroyDatasetMeta(s)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:s,ctx:a}=this;this._stop(),this.config.clearCache(),s&&(this.unbindEvents(),N3(s,a),this.platform.releaseContext(a),this.canvas=null,this.ctx=null),delete bp[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...s){return this.canvas.toDataURL(...s)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const s=this._listeners,a=this.platform,n=(i,l)=>{a.addEventListener(this,i,l),s[i]=l},r=(i,l,c)=>{i.offsetX=l,i.offsetY=c,this._eventHandler(i)};ls(this.options.events,i=>n(i,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const s=this._responsiveListeners,a=this.platform,n=(d,m)=>{a.addEventListener(this,d,m),s[d]=m},r=(d,m)=>{s[d]&&(a.removeEventListener(this,d,m),delete s[d])},i=(d,m)=>{this.canvas&&this.resize(d,m)};let l;const c=()=>{r("attach",c),this.attached=!0,this.resize(),n("resize",i),n("detach",l)};l=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),n("attach",c)},a.isAttached(this.canvas)?c():l()}unbindEvents(){ls(this._listeners,(s,a)=>{this.platform.removeEventListener(this,a,s)}),this._listeners={},ls(this._responsiveListeners,(s,a)=>{this.platform.removeEventListener(this,a,s)}),this._responsiveListeners=void 0}updateHoverStyle(s,a,n){const r=n?"set":"remove";let i,l,c,d;for(a==="dataset"&&(i=this.getDatasetMeta(s[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),c=0,d=s.length;c<d;++c){l=s[c];const m=l&&this.getDatasetMeta(l.datasetIndex).controller;m&&m[r+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(s){const a=this._active||[],n=s.map(({datasetIndex:i,index:l})=>{const c=this.getDatasetMeta(i);if(!c)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:c.data[l],index:l}});!a0(n,a)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,a))}notifyPlugins(s,a,n){return this._plugins.notify(this,s,a,n)}isPluginEnabled(s){return this._plugins._cache.filter(a=>a.plugin.id===s).length===1}_updateHoverStyles(s,a,n){const r=this.options.hover,i=(d,m)=>d.filter(f=>!m.some(h=>f.datasetIndex===h.datasetIndex&&f.index===h.index)),l=i(a,s),c=n?s:i(s,a);l.length&&this.updateHoverStyle(l,r.mode,!1),c.length&&r.mode&&this.updateHoverStyle(c,r.mode,!0)}_eventHandler(s,a){const n={event:s,replay:a,cancelable:!0,inChartArea:this.isPointInArea(s)},r=l=>(l.options.events||this.options.events).includes(s.native.type);if(this.notifyPlugins("beforeEvent",n,r)===!1)return;const i=this._handleEvent(s,a,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(i||n.changed)&&this.render(),this}_handleEvent(s,a,n){const{_active:r=[],options:i}=this,l=a,c=this._getActiveElements(s,r,n,l),d=yme(s),m=Nge(s,this._lastEvent,n,d);n&&(this._lastEvent=null,ws(i.onHover,[s,c,this],this),d&&ws(i.onClick,[s,c,this],this));const f=!a0(c,r);return(f||a)&&(this._active=c,this._updateHoverStyles(c,r,a)),this._lastEvent=m,f}_getActiveElements(s,a,n,r){if(s.type==="mouseout")return[];if(!n)return a;const i=this.options.hover;return this.getElementsAtEventForMode(s,i.mode,i,r)}};function sD(){return ls(Hy.instances,e=>e._plugins.invalidate())}function wge(e,s,a){const{startAngle:n,x:r,y:i,outerRadius:l,innerRadius:c,options:d}=s,{borderWidth:m,borderJoinStyle:f}=d,h=Math.min(m/l,hr(n-a));if(e.beginPath(),e.arc(r,i,l-m/2,n+h/2,a-h/2),c>0){const y=Math.min(m/c,hr(n-a));e.arc(r,i,c+m/2,a-y/2,n+y/2,!0)}else{const y=Math.min(m/2,l*hr(n-a));if(f==="round")e.arc(r,i,y,a-os/2,n+os/2,!0);else if(f==="bevel"){const N=2*y*y,w=-N*Math.cos(a+os/2)+r,p=-N*Math.sin(a+os/2)+i,v=N*Math.cos(n+os/2)+r,C=N*Math.sin(n+os/2)+i;e.lineTo(w,p),e.lineTo(v,C)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}function jge(e,s,a){const{startAngle:n,pixelMargin:r,x:i,y:l,outerRadius:c,innerRadius:d}=s;let m=r/c;e.beginPath(),e.arc(i,l,c,n-m,a+m),d>r?(m=r/d,e.arc(i,l,d,a+m,n-m,!0)):e.arc(i,l,r,a+aa,n-aa),e.closePath(),e.clip()}function Cge(e){return aS(e,["outerStart","outerEnd","innerStart","innerEnd"])}function Sge(e,s,a,n){const r=Cge(e.options.borderRadius),i=(a-s)/2,l=Math.min(i,n*s/2),c=d=>{const m=(a-Math.min(i,d))*n/2;return Sa(d,0,Math.min(i,m))};return{outerStart:c(r.outerStart),outerEnd:c(r.outerEnd),innerStart:Sa(r.innerStart,0,l),innerEnd:Sa(r.innerEnd,0,l)}}function _d(e,s,a,n){return{x:a+e*Math.cos(s),y:n+e*Math.sin(s)}}function c0(e,s,a,n,r,i){const{x:l,y:c,startAngle:d,pixelMargin:m,innerRadius:f}=s,h=Math.max(s.outerRadius+n+a-m,0),y=f>0?f+n+a+m:0;let N=0;const w=r-d;if(n){const ae=f>0?f-n:0,R=h>0?h-n:0,Z=(ae+R)/2,te=Z!==0?w*Z/(Z+n):w;N=(w-te)/2}const p=Math.max(.001,w*h-a/os)/h,v=(w-p)/2,C=d+v+N,j=r-v-N,{outerStart:_,outerEnd:T,innerStart:k,innerEnd:E}=Sge(s,y,h,j-C),A=h-_,U=h-T,B=C+_/A,X=j-T/U,$=y+k,O=y+E,G=C+k/$,K=j-E/O;if(e.beginPath(),i){const ae=(B+X)/2;if(e.arc(l,c,h,B,ae),e.arc(l,c,h,ae,X),T>0){const ge=_d(U,X,l,c);e.arc(ge.x,ge.y,T,X,j+aa)}const R=_d(O,j,l,c);if(e.lineTo(R.x,R.y),E>0){const ge=_d(O,K,l,c);e.arc(ge.x,ge.y,E,j+aa,K+Math.PI)}const Z=(j-E/y+(C+k/y))/2;if(e.arc(l,c,y,j-E/y,Z,!0),e.arc(l,c,y,Z,C+k/y,!0),k>0){const ge=_d($,G,l,c);e.arc(ge.x,ge.y,k,G+Math.PI,C-aa)}const te=_d(A,C,l,c);if(e.lineTo(te.x,te.y),_>0){const ge=_d(A,B,l,c);e.arc(ge.x,ge.y,_,C-aa,B)}}else{e.moveTo(l,c);const ae=Math.cos(B)*h+l,R=Math.sin(B)*h+c;e.lineTo(ae,R);const Z=Math.cos(X)*h+l,te=Math.sin(X)*h+c;e.lineTo(Z,te)}e.closePath()}function _ge(e,s,a,n,r){const{fullCircles:i,startAngle:l,circumference:c}=s;let d=s.endAngle;if(i){c0(e,s,a,n,d,r);for(let m=0;m<i;++m)e.fill();isNaN(c)||(d=l+(c%Os||Os))}return c0(e,s,a,n,d,r),e.fill(),d}function Tge(e,s,a,n,r){const{fullCircles:i,startAngle:l,circumference:c,options:d}=s,{borderWidth:m,borderJoinStyle:f,borderDash:h,borderDashOffset:y,borderRadius:N}=d,w=d.borderAlign==="inner";if(!m)return;e.setLineDash(h||[]),e.lineDashOffset=y,w?(e.lineWidth=m*2,e.lineJoin=f||"round"):(e.lineWidth=m,e.lineJoin=f||"bevel");let p=s.endAngle;if(i){c0(e,s,a,n,p,r);for(let v=0;v<i;++v)e.stroke();isNaN(c)||(p=l+(c%Os||Os))}w&&jge(e,s,p),d.selfJoin&&p-l>=os&&N===0&&f!=="miter"&&wge(e,s,p),i||(c0(e,s,a,n,p,r),e.stroke())}class Ege extends el{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:s=>s!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(s){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,s&&Object.assign(this,s)}inRange(s,a,n){const r=this.getProps(["x","y"],n),{angle:i,distance:l}=O$(r,{x:s,y:a}),{startAngle:c,endAngle:d,innerRadius:m,outerRadius:f,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),y=(this.options.spacing+this.options.borderWidth)/2,N=At(h,d-c),w=Xf(i,c,d)&&c!==d,p=N>=Os||w,v=$l(l,m+y,f+y);return p&&v}getCenterPoint(s){const{x:a,y:n,startAngle:r,endAngle:i,innerRadius:l,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],s),{offset:d,spacing:m}=this.options,f=(r+i)/2,h=(l+c+m+d)/2;return{x:a+Math.cos(f)*h,y:n+Math.sin(f)*h}}tooltipPosition(s){return this.getCenterPoint(s)}draw(s){const{options:a,circumference:n}=this,r=(a.offset||0)/4,i=(a.spacing||0)/2,l=a.circular;if(this.pixelMargin=a.borderAlign==="inner"?.33:0,this.fullCircles=n>Os?Math.floor(n/Os):0,n===0||this.innerRadius<0||this.outerRadius<0)return;s.save();const c=(this.startAngle+this.endAngle)/2;s.translate(Math.cos(c)*r,Math.sin(c)*r);const d=1-Math.sin(Math.min(os,n||0)),m=r*d;s.fillStyle=a.backgroundColor,s.strokeStyle=a.borderColor,_ge(s,this,m,i,l),Tge(s,this,m,i,l),s.restore()}}function c6(e,s,a=s){e.lineCap=At(a.borderCapStyle,s.borderCapStyle),e.setLineDash(At(a.borderDash,s.borderDash)),e.lineDashOffset=At(a.borderDashOffset,s.borderDashOffset),e.lineJoin=At(a.borderJoinStyle,s.borderJoinStyle),e.lineWidth=At(a.borderWidth,s.borderWidth),e.strokeStyle=At(a.borderColor,s.borderColor)}function Age(e,s,a){e.lineTo(a.x,a.y)}function Lge(e){return e.stepped?Vme:e.tension||e.cubicInterpolationMode==="monotone"?Wme:Age}function d6(e,s,a={}){const n=e.length,{start:r=0,end:i=n-1}=a,{start:l,end:c}=s,d=Math.max(r,l),m=Math.min(i,c),f=r<l&&i<l||r>c&&i>c;return{count:n,start:d,loop:s.loop,ilen:m<d&&!f?n+m-d:m-d}}function kge(e,s,a,n){const{points:r,options:i}=s,{count:l,start:c,loop:d,ilen:m}=d6(r,a,n),f=Lge(i);let{move:h=!0,reverse:y}=n||{},N,w,p;for(N=0;N<=m;++N)w=r[(c+(y?m-N:N))%l],!w.skip&&(h?(e.moveTo(w.x,w.y),h=!1):f(e,p,w,y,i.stepped),p=w);return d&&(w=r[(c+(y?m:0))%l],f(e,p,w,y,i.stepped)),!!d}function Dge(e,s,a,n){const r=s.points,{count:i,start:l,ilen:c}=d6(r,a,n),{move:d=!0,reverse:m}=n||{};let f=0,h=0,y,N,w,p,v,C;const j=T=>(l+(m?c-T:T))%i,_=()=>{p!==v&&(e.lineTo(f,v),e.lineTo(f,p),e.lineTo(f,C))};for(d&&(N=r[j(0)],e.moveTo(N.x,N.y)),y=0;y<=c;++y){if(N=r[j(y)],N.skip)continue;const T=N.x,k=N.y,E=T|0;E===w?(k<p?p=k:k>v&&(v=k),f=(h*f+T)/++h):(_(),e.lineTo(T,k),w=E,h=0,p=v=k),C=k}_()}function qC(e){const s=e.options,a=s.borderDash&&s.borderDash.length;return!e._decimated&&!e._loop&&!s.tension&&s.cubicInterpolationMode!=="monotone"&&!s.stepped&&!a?Dge:kge}function Mge(e){return e.stepped?Cfe:e.tension||e.cubicInterpolationMode==="monotone"?Sfe:zo}function Pge(e,s,a,n){let r=s._path;r||(r=s._path=new Path2D,s.path(r,a,n)&&r.closePath()),c6(e,s.options),e.stroke(r)}function Oge(e,s,a,n){const{segments:r,options:i}=s,l=qC(s);for(const c of r)c6(e,i,c.style),e.beginPath(),l(e,s,c,{start:a,end:a+n-1})&&e.closePath(),e.stroke()}const Ige=typeof Path2D=="function";function $ge(e,s,a,n){Ige&&!s.options.segment?Pge(e,s,a,n):Oge(e,s,a,n)}class Rge extends el{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:s=>s!=="borderDash"&&s!=="fill"};constructor(s){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,s&&Object.assign(this,s)}updateControlPoints(s,a){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;xfe(this._points,n,s,r,a),this._pointsUpdated=!0}}set points(s){this._points=s,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Mfe(this,this.options.segment))}first(){const s=this.segments,a=this.points;return s.length&&a[s[0].start]}last(){const s=this.segments,a=this.points,n=s.length;return n&&a[s[n-1].end]}interpolate(s,a){const n=this.options,r=s[a],i=this.points,l=Lfe(this,{property:a,start:r,end:r});if(!l.length)return;const c=[],d=Mge(n);let m,f;for(m=0,f=l.length;m<f;++m){const{start:h,end:y}=l[m],N=i[h],w=i[y];if(N===w){c.push(N);continue}const p=Math.abs((r-N[a])/(w[a]-N[a])),v=d(N,w,p,n.stepped);v[a]=s[a],c.push(v)}return c.length===1?c[0]:c}pathSegment(s,a,n){return qC(this)(s,this,a,n)}path(s,a,n){const r=this.segments,i=qC(this);let l=this._loop;a=a||0,n=n||this.points.length-a;for(const c of r)l&=i(s,this,c,{start:a,end:a+n-1});return!!l}draw(s,a,n,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(s.save(),$ge(s,this,n,r),s.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function aD(e,s,a,n){const r=e.options,{[a]:i}=e.getProps([a],n);return Math.abs(s-i)<r.radius+r.hitRadius}class Uge extends el{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(s){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,s&&Object.assign(this,s)}inRange(s,a,n){const r=this.options,{x:i,y:l}=this.getProps(["x","y"],n);return Math.pow(s-i,2)+Math.pow(a-l,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(s,a){return aD(this,s,"x",a)}inYRange(s,a){return aD(this,s,"y",a)}getCenterPoint(s){const{x:a,y:n}=this.getProps(["x","y"],s);return{x:a,y:n}}size(s){s=s||this.options||{};let a=s.radius||0;a=Math.max(a,a&&s.hoverRadius||0);const n=a&&s.borderWidth||0;return(a+n)*2}draw(s,a){const n=this.options;this.skip||n.radius<.1||!Kf(this,a,this.size(n)/2)||(s.strokeStyle=n.borderColor,s.lineWidth=n.borderWidth,s.fillStyle=n.backgroundColor,WC(s,n,this.x,this.y))}getRange(){const s=this.options||{};return s.radius+s.hitRadius}}function u6(e,s){const{x:a,y:n,base:r,width:i,height:l}=e.getProps(["x","y","base","width","height"],s);let c,d,m,f,h;return e.horizontal?(h=l/2,c=Math.min(a,r),d=Math.max(a,r),m=n-h,f=n+h):(h=i/2,c=a-h,d=a+h,m=Math.min(n,r),f=Math.max(n,r)),{left:c,top:m,right:d,bottom:f}}function Ul(e,s,a,n){return e?0:Sa(s,a,n)}function zge(e,s,a){const n=e.options.borderWidth,r=e.borderSkipped,i=B$(n);return{t:Ul(r.top,i.top,0,a),r:Ul(r.right,i.right,0,s),b:Ul(r.bottom,i.bottom,0,a),l:Ul(r.left,i.left,0,s)}}function Fge(e,s,a){const{enableBorderRadius:n}=e.getProps(["enableBorderRadius"]),r=e.options.borderRadius,i=Fd(r),l=Math.min(s,a),c=e.borderSkipped,d=n||Bt(r);return{topLeft:Ul(!d||c.top||c.left,i.topLeft,0,l),topRight:Ul(!d||c.top||c.right,i.topRight,0,l),bottomLeft:Ul(!d||c.bottom||c.left,i.bottomLeft,0,l),bottomRight:Ul(!d||c.bottom||c.right,i.bottomRight,0,l)}}function Bge(e){const s=u6(e),a=s.right-s.left,n=s.bottom-s.top,r=zge(e,a/2,n/2),i=Fge(e,a/2,n/2);return{outer:{x:s.left,y:s.top,w:a,h:n,radius:i},inner:{x:s.left+r.l,y:s.top+r.t,w:a-r.l-r.r,h:n-r.t-r.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,i.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(r.b,r.r))}}}}function cj(e,s,a,n){const r=s===null,i=a===null,c=e&&!(r&&i)&&u6(e,n);return c&&(r||$l(s,c.left,c.right))&&(i||$l(a,c.top,c.bottom))}function Hge(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function Gge(e,s){e.rect(s.x,s.y,s.w,s.h)}function dj(e,s,a={}){const n=e.x!==a.x?-s:0,r=e.y!==a.y?-s:0,i=(e.x+e.w!==a.x+a.w?s:0)-n,l=(e.y+e.h!==a.y+a.h?s:0)-r;return{x:e.x+n,y:e.y+r,w:e.w+i,h:e.h+l,radius:e.radius}}class Vge extends el{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(s){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,s&&Object.assign(this,s)}draw(s){const{inflateAmount:a,options:{borderColor:n,backgroundColor:r}}=this,{inner:i,outer:l}=Bge(this),c=Hge(l.radius)?i0:Gge;s.save(),(l.w!==i.w||l.h!==i.h)&&(s.beginPath(),c(s,dj(l,a,i)),s.clip(),c(s,dj(i,-a,l)),s.fillStyle=n,s.fill("evenodd")),s.beginPath(),c(s,dj(i,a)),s.fillStyle=r,s.fill(),s.restore()}inRange(s,a,n){return cj(this,s,a,n)}inXRange(s,a){return cj(this,s,null,a)}inYRange(s,a){return cj(this,null,s,a)}getCenterPoint(s){const{x:a,y:n,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],s);return{x:i?(a+r)/2:a,y:i?n:(n+r)/2}}getRange(s){return s==="x"?this.width/2:this.height/2}}const nD=(e,s)=>{let{boxHeight:a=s,boxWidth:n=s}=e;return e.usePointStyle&&(a=Math.min(a,s),n=e.pointStyleWidth||Math.min(n,s)),{boxWidth:n,boxHeight:a,itemHeight:Math.max(s,a)}},Wge=(e,s)=>e!==null&&s!==null&&e.datasetIndex===s.datasetIndex&&e.index===s.index;class rD extends el{constructor(s){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=s.chart,this.options=s.options,this.ctx=s.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(s,a,n){this.maxWidth=s,this.maxHeight=a,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const s=this.options.labels||{};let a=ws(s.generateLabels,[this.chart],this)||[];s.filter&&(a=a.filter(n=>s.filter(n,this.chart.data))),s.sort&&(a=a.sort((n,r)=>s.sort(n,r,this.chart.data))),this.options.reverse&&a.reverse(),this.legendItems=a}fit(){const{options:s,ctx:a}=this;if(!s.display){this.width=this.height=0;return}const n=s.labels,r=_a(n.font),i=r.size,l=this._computeTitleHeight(),{boxWidth:c,itemHeight:d}=nD(n,i);let m,f;a.font=r.string,this.isHorizontal()?(m=this.maxWidth,f=this._fitRows(l,i,c,d)+10):(f=this.maxHeight,m=this._fitCols(l,r,c,d)+10),this.width=Math.min(m,s.maxWidth||this.maxWidth),this.height=Math.min(f,s.maxHeight||this.maxHeight)}_fitRows(s,a,n,r){const{ctx:i,maxWidth:l,options:{labels:{padding:c}}}=this,d=this.legendHitBoxes=[],m=this.lineWidths=[0],f=r+c;let h=s;i.textAlign="left",i.textBaseline="middle";let y=-1,N=-f;return this.legendItems.forEach((w,p)=>{const v=n+a/2+i.measureText(w.text).width;(p===0||m[m.length-1]+v+2*c>l)&&(h+=f,m[m.length-(p>0?0:1)]=0,N+=f,y++),d[p]={left:0,top:N,row:y,width:v,height:r},m[m.length-1]+=v+c}),h}_fitCols(s,a,n,r){const{ctx:i,maxHeight:l,options:{labels:{padding:c}}}=this,d=this.legendHitBoxes=[],m=this.columnSizes=[],f=l-s;let h=c,y=0,N=0,w=0,p=0;return this.legendItems.forEach((v,C)=>{const{itemWidth:j,itemHeight:_}=Yge(n,a,i,v,r);C>0&&N+_+2*c>f&&(h+=y+c,m.push({width:y,height:N}),w+=y+c,p++,y=N=0),d[C]={left:w,top:N,col:p,width:j,height:_},y=Math.max(y,j),N+=_+c}),h+=y,m.push({width:y,height:N}),h}adjustHitBoxes(){if(!this.options.display)return;const s=this._computeTitleHeight(),{legendHitBoxes:a,options:{align:n,labels:{padding:r},rtl:i}}=this,l=Bd(i,this.left,this.width);if(this.isHorizontal()){let c=0,d=wa(n,this.left+r,this.right-this.lineWidths[c]);for(const m of a)c!==m.row&&(c=m.row,d=wa(n,this.left+r,this.right-this.lineWidths[c])),m.top+=this.top+s+r,m.left=l.leftForLtr(l.x(d),m.width),d+=m.width+r}else{let c=0,d=wa(n,this.top+s+r,this.bottom-this.columnSizes[c].height);for(const m of a)m.col!==c&&(c=m.col,d=wa(n,this.top+s+r,this.bottom-this.columnSizes[c].height)),m.top=d,m.left+=this.left+r,m.left=l.leftForLtr(l.x(m.left),m.width),d+=m.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const s=this.ctx;tS(s,this),this._draw(),sS(s)}}_draw(){const{options:s,columnSizes:a,lineWidths:n,ctx:r}=this,{align:i,labels:l}=s,c=Us.color,d=Bd(s.rtl,this.left,this.width),m=_a(l.font),{padding:f}=l,h=m.size,y=h/2;let N;this.drawTitle(),r.textAlign=d.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=m.string;const{boxWidth:w,boxHeight:p,itemHeight:v}=nD(l,h),C=function(E,A,U){if(isNaN(w)||w<=0||isNaN(p)||p<0)return;r.save();const B=At(U.lineWidth,1);if(r.fillStyle=At(U.fillStyle,c),r.lineCap=At(U.lineCap,"butt"),r.lineDashOffset=At(U.lineDashOffset,0),r.lineJoin=At(U.lineJoin,"miter"),r.lineWidth=B,r.strokeStyle=At(U.strokeStyle,c),r.setLineDash(At(U.lineDash,[])),l.usePointStyle){const X={radius:p*Math.SQRT2/2,pointStyle:U.pointStyle,rotation:U.rotation,borderWidth:B},$=d.xPlus(E,w/2),O=A+y;F$(r,X,$,O,l.pointStyleWidth&&w)}else{const X=A+Math.max((h-p)/2,0),$=d.leftForLtr(E,w),O=Fd(U.borderRadius);r.beginPath(),Object.values(O).some(G=>G!==0)?i0(r,{x:$,y:X,w,h:p,radius:O}):r.rect($,X,w,p),r.fill(),B!==0&&r.stroke()}r.restore()},j=function(E,A,U){Zf(r,U.text,E,A+v/2,m,{strikethrough:U.hidden,textAlign:d.textAlign(U.textAlign)})},_=this.isHorizontal(),T=this._computeTitleHeight();_?N={x:wa(i,this.left+f,this.right-n[0]),y:this.top+f+T,line:0}:N={x:this.left+f,y:wa(i,this.top+T+f,this.bottom-a[0].height),line:0},Q$(this.ctx,s.textDirection);const k=v+f;this.legendItems.forEach((E,A)=>{r.strokeStyle=E.fontColor,r.fillStyle=E.fontColor;const U=r.measureText(E.text).width,B=d.textAlign(E.textAlign||(E.textAlign=l.textAlign)),X=w+y+U;let $=N.x,O=N.y;d.setWidth(this.width),_?A>0&&$+X+f>this.right&&(O=N.y+=k,N.line++,$=N.x=wa(i,this.left+f,this.right-n[N.line])):A>0&&O+k>this.bottom&&($=N.x=$+a[N.line].width+f,N.line++,O=N.y=wa(i,this.top+T+f,this.bottom-a[N.line].height));const G=d.x($);if(C(G,O,E),$=Dme(B,$+w+y,_?$+X:this.right,s.rtl),j(d.x($),O,E),_)N.x+=X+f;else if(typeof E.text!="string"){const K=m.lineHeight;N.y+=m6(E,K)+f}else N.y+=k}),q$(this.ctx,s.textDirection)}drawTitle(){const s=this.options,a=s.title,n=_a(a.font),r=Zn(a.padding);if(!a.display)return;const i=Bd(s.rtl,this.left,this.width),l=this.ctx,c=a.position,d=n.size/2,m=r.top+d;let f,h=this.left,y=this.width;if(this.isHorizontal())y=Math.max(...this.lineWidths),f=this.top+m,h=wa(s.align,h,this.right-y);else{const w=this.columnSizes.reduce((p,v)=>Math.max(p,v.height),0);f=m+wa(s.align,this.top,this.bottom-w-s.labels.padding-this._computeTitleHeight())}const N=wa(c,h,h+y);l.textAlign=i.textAlign(Z2(c)),l.textBaseline="middle",l.strokeStyle=a.color,l.fillStyle=a.color,l.font=n.string,Zf(l,a.text,N,f,n)}_computeTitleHeight(){const s=this.options.title,a=_a(s.font),n=Zn(s.padding);return s.display?a.lineHeight+n.height:0}_getLegendItemAt(s,a){let n,r,i;if($l(s,this.left,this.right)&&$l(a,this.top,this.bottom)){for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(r=i[n],$l(s,r.left,r.left+r.width)&&$l(a,r.top,r.top+r.height))return this.legendItems[n]}return null}handleEvent(s){const a=this.options;if(!Xge(s.type,a))return;const n=this._getLegendItemAt(s.x,s.y);if(s.type==="mousemove"||s.type==="mouseout"){const r=this._hoveredItem,i=Wge(r,n);r&&!i&&ws(a.onLeave,[s,r,this],this),this._hoveredItem=n,n&&!i&&ws(a.onHover,[s,n,this],this)}else n&&ws(a.onClick,[s,n,this],this)}}function Yge(e,s,a,n,r){const i=Qge(n,e,s,a),l=qge(r,n,s.lineHeight);return{itemWidth:i,itemHeight:l}}function Qge(e,s,a,n){let r=e.text;return r&&typeof r!="string"&&(r=r.reduce((i,l)=>i.length>l.length?i:l)),s+a.size/2+n.measureText(r).width}function qge(e,s,a){let n=e;return typeof s.text!="string"&&(n=m6(s,a)),n}function m6(e,s){const a=e.text?e.text.length:0;return s*a}function Xge(e,s){return!!((e==="mousemove"||e==="mouseout")&&(s.onHover||s.onLeave)||s.onClick&&(e==="click"||e==="mouseup"))}var Kge={id:"legend",_element:rD,start(e,s,a){const n=e.legend=new rD({ctx:e.ctx,options:a,chart:e});Gn.configure(e,n,a),Gn.addBox(e,n)},stop(e){Gn.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,s,a){const n=e.legend;Gn.configure(e,n,a),n.options=a},afterUpdate(e){const s=e.legend;s.buildLabels(),s.adjustHitBoxes()},afterEvent(e,s){s.replay||e.legend.handleEvent(s.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,s,a){const n=s.datasetIndex,r=a.chart;r.isDatasetVisible(n)?(r.hide(n),s.hidden=!0):(r.show(n),s.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const s=e.data.datasets,{labels:{usePointStyle:a,pointStyle:n,textAlign:r,color:i,useBorderRadius:l,borderRadius:c}}=e.legend.options;return e._getSortedDatasetMetas().map(d=>{const m=d.controller.getStyle(a?0:void 0),f=Zn(m.borderWidth);return{text:s[d.index].label,fillStyle:m.backgroundColor,fontColor:i,hidden:!d.visible,lineCap:m.borderCapStyle,lineDash:m.borderDash,lineDashOffset:m.borderDashOffset,lineJoin:m.borderJoinStyle,lineWidth:(f.width+f.height)/4,strokeStyle:m.borderColor,pointStyle:n||m.pointStyle,rotation:m.rotation,textAlign:r||m.textAlign,borderRadius:l&&(c||m.borderRadius),datasetIndex:d.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class f6 extends el{constructor(s){super(),this.chart=s.chart,this.options=s.options,this.ctx=s.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(s,a){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=s,this.height=this.bottom=a;const r=sa(n.text)?n.text.length:1;this._padding=Zn(n.padding);const i=r*_a(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const s=this.options.position;return s==="top"||s==="bottom"}_drawArgs(s){const{top:a,left:n,bottom:r,right:i,options:l}=this,c=l.align;let d=0,m,f,h;return this.isHorizontal()?(f=wa(c,n,i),h=a+s,m=i-n):(l.position==="left"?(f=n+s,h=wa(c,r,a),d=os*-.5):(f=i-s,h=wa(c,a,r),d=os*.5),m=r-a),{titleX:f,titleY:h,maxWidth:m,rotation:d}}draw(){const s=this.ctx,a=this.options;if(!a.display)return;const n=_a(a.font),i=n.lineHeight/2+this._padding.top,{titleX:l,titleY:c,maxWidth:d,rotation:m}=this._drawArgs(i);Zf(s,a.text,0,0,n,{color:a.color,maxWidth:d,rotation:m,textAlign:Z2(a.align),textBaseline:"middle",translation:[l,c]})}}function Zge(e,s){const a=new f6({ctx:e.ctx,options:s,chart:e});Gn.configure(e,a,s),Gn.addBox(e,a),e.titleBlock=a}var Jge={id:"title",_element:f6,start(e,s,a){Zge(e,a)},stop(e){const s=e.titleBlock;Gn.removeBox(e,s),delete e.titleBlock},beforeUpdate(e,s,a){const n=e.titleBlock;Gn.configure(e,n,a),n.options=a},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const bf={average(e){if(!e.length)return!1;let s,a,n=new Set,r=0,i=0;for(s=0,a=e.length;s<a;++s){const c=e[s].element;if(c&&c.hasValue()){const d=c.tooltipPosition();n.add(d.x),r+=d.y,++i}}return i===0||n.size===0?!1:{x:[...n].reduce((c,d)=>c+d)/n.size,y:r/i}},nearest(e,s){if(!e.length)return!1;let a=s.x,n=s.y,r=Number.POSITIVE_INFINITY,i,l,c;for(i=0,l=e.length;i<l;++i){const d=e[i].element;if(d&&d.hasValue()){const m=d.getCenterPoint(),f=GC(s,m);f<r&&(r=f,c=d)}}if(c){const d=c.tooltipPosition();a=d.x,n=d.y}return{x:a,y:n}}};function kr(e,s){return s&&(sa(s)?Array.prototype.push.apply(e,s):e.push(s)),e}function Ei(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function exe(e,s){const{element:a,datasetIndex:n,index:r}=s,i=e.getDatasetMeta(n).controller,{label:l,value:c}=i.getLabelAndValue(r);return{chart:e,label:l,parsed:i.getParsed(r),raw:e.data.datasets[n].data[r],formattedValue:c,dataset:i.getDataset(),dataIndex:r,datasetIndex:n,element:a}}function iD(e,s){const a=e.chart.ctx,{body:n,footer:r,title:i}=e,{boxWidth:l,boxHeight:c}=s,d=_a(s.bodyFont),m=_a(s.titleFont),f=_a(s.footerFont),h=i.length,y=r.length,N=n.length,w=Zn(s.padding);let p=w.height,v=0,C=n.reduce((T,k)=>T+k.before.length+k.lines.length+k.after.length,0);if(C+=e.beforeBody.length+e.afterBody.length,h&&(p+=h*m.lineHeight+(h-1)*s.titleSpacing+s.titleMarginBottom),C){const T=s.displayColors?Math.max(c,d.lineHeight):d.lineHeight;p+=N*T+(C-N)*d.lineHeight+(C-1)*s.bodySpacing}y&&(p+=s.footerMarginTop+y*f.lineHeight+(y-1)*s.footerSpacing);let j=0;const _=function(T){v=Math.max(v,a.measureText(T).width+j)};return a.save(),a.font=m.string,ls(e.title,_),a.font=d.string,ls(e.beforeBody.concat(e.afterBody),_),j=s.displayColors?l+2+s.boxPadding:0,ls(n,T=>{ls(T.before,_),ls(T.lines,_),ls(T.after,_)}),j=0,a.font=f.string,ls(e.footer,_),a.restore(),v+=w.width,{width:v,height:p}}function txe(e,s){const{y:a,height:n}=s;return a<n/2?"top":a>e.height-n/2?"bottom":"center"}function sxe(e,s,a,n){const{x:r,width:i}=n,l=a.caretSize+a.caretPadding;if(e==="left"&&r+i+l>s.width||e==="right"&&r-i-l<0)return!0}function axe(e,s,a,n){const{x:r,width:i}=a,{width:l,chartArea:{left:c,right:d}}=e;let m="center";return n==="center"?m=r<=(c+d)/2?"left":"right":r<=i/2?m="left":r>=l-i/2&&(m="right"),sxe(m,e,s,a)&&(m="center"),m}function lD(e,s,a){const n=a.yAlign||s.yAlign||txe(e,a);return{xAlign:a.xAlign||s.xAlign||axe(e,s,a,n),yAlign:n}}function nxe(e,s){let{x:a,width:n}=e;return s==="right"?a-=n:s==="center"&&(a-=n/2),a}function rxe(e,s,a){let{y:n,height:r}=e;return s==="top"?n+=a:s==="bottom"?n-=r+a:n-=r/2,n}function oD(e,s,a,n){const{caretSize:r,caretPadding:i,cornerRadius:l}=e,{xAlign:c,yAlign:d}=a,m=r+i,{topLeft:f,topRight:h,bottomLeft:y,bottomRight:N}=Fd(l);let w=nxe(s,c);const p=rxe(s,d,m);return d==="center"?c==="left"?w+=m:c==="right"&&(w-=m):c==="left"?w-=Math.max(f,y)+r:c==="right"&&(w+=Math.max(h,N)+r),{x:Sa(w,0,n.width-s.width),y:Sa(p,0,n.height-s.height)}}function Kx(e,s,a){const n=Zn(a.padding);return s==="center"?e.x+e.width/2:s==="right"?e.x+e.width-n.right:e.x+n.left}function cD(e){return kr([],Ei(e))}function ixe(e,s,a){return Cc(e,{tooltip:s,tooltipItems:a,type:"tooltip"})}function dD(e,s){const a=s&&s.dataset&&s.dataset.tooltip&&s.dataset.tooltip.callbacks;return a?e.override(a):e}const h6={beforeTitle:Si,title(e){if(e.length>0){const s=e[0],a=s.chart.data.labels,n=a?a.length:0;if(this&&this.options&&this.options.mode==="dataset")return s.dataset.label||"";if(s.label)return s.label;if(n>0&&s.dataIndex<n)return a[s.dataIndex]}return""},afterTitle:Si,beforeBody:Si,beforeLabel:Si,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let s=e.dataset.label||"";s&&(s+=": ");const a=e.formattedValue;return Zt(a)||(s+=a),s},labelColor(e){const a=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:a.borderColor,backgroundColor:a.backgroundColor,borderWidth:a.borderWidth,borderDash:a.borderDash,borderDashOffset:a.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const a=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:a.pointStyle,rotation:a.rotation}},afterLabel:Si,afterBody:Si,beforeFooter:Si,footer:Si,afterFooter:Si};function Va(e,s,a,n){const r=e[s].call(a,n);return typeof r>"u"?h6[s].call(a,n):r}class uD extends el{static positioners=bf;constructor(s){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=s.chart,this.options=s.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(s){this.options=s,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const s=this._cachedAnimations;if(s)return s;const a=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&a.options.animation&&n.animations,i=new K$(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=ixe(this.chart.getContext(),this,this._tooltipItems))}getTitle(s,a){const{callbacks:n}=a,r=Va(n,"beforeTitle",this,s),i=Va(n,"title",this,s),l=Va(n,"afterTitle",this,s);let c=[];return c=kr(c,Ei(r)),c=kr(c,Ei(i)),c=kr(c,Ei(l)),c}getBeforeBody(s,a){return cD(Va(a.callbacks,"beforeBody",this,s))}getBody(s,a){const{callbacks:n}=a,r=[];return ls(s,i=>{const l={before:[],lines:[],after:[]},c=dD(n,i);kr(l.before,Ei(Va(c,"beforeLabel",this,i))),kr(l.lines,Va(c,"label",this,i)),kr(l.after,Ei(Va(c,"afterLabel",this,i))),r.push(l)}),r}getAfterBody(s,a){return cD(Va(a.callbacks,"afterBody",this,s))}getFooter(s,a){const{callbacks:n}=a,r=Va(n,"beforeFooter",this,s),i=Va(n,"footer",this,s),l=Va(n,"afterFooter",this,s);let c=[];return c=kr(c,Ei(r)),c=kr(c,Ei(i)),c=kr(c,Ei(l)),c}_createItems(s){const a=this._active,n=this.chart.data,r=[],i=[],l=[];let c=[],d,m;for(d=0,m=a.length;d<m;++d)c.push(exe(this.chart,a[d]));return s.filter&&(c=c.filter((f,h,y)=>s.filter(f,h,y,n))),s.itemSort&&(c=c.sort((f,h)=>s.itemSort(f,h,n))),ls(c,f=>{const h=dD(s.callbacks,f);r.push(Va(h,"labelColor",this,f)),i.push(Va(h,"labelPointStyle",this,f)),l.push(Va(h,"labelTextColor",this,f))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=l,this.dataPoints=c,c}update(s,a){const n=this.options.setContext(this.getContext()),r=this._active;let i,l=[];if(!r.length)this.opacity!==0&&(i={opacity:0});else{const c=bf[n.position].call(this,r,this._eventPosition);l=this._createItems(n),this.title=this.getTitle(l,n),this.beforeBody=this.getBeforeBody(l,n),this.body=this.getBody(l,n),this.afterBody=this.getAfterBody(l,n),this.footer=this.getFooter(l,n);const d=this._size=iD(this,n),m=Object.assign({},c,d),f=lD(this.chart,n,m),h=oD(n,m,f,this.chart);this.xAlign=f.xAlign,this.yAlign=f.yAlign,i={opacity:1,x:h.x,y:h.y,width:d.width,height:d.height,caretX:c.x,caretY:c.y}}this._tooltipItems=l,this.$context=void 0,i&&this._resolveAnimations().update(this,i),s&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:a})}drawCaret(s,a,n,r){const i=this.getCaretPosition(s,n,r);a.lineTo(i.x1,i.y1),a.lineTo(i.x2,i.y2),a.lineTo(i.x3,i.y3)}getCaretPosition(s,a,n){const{xAlign:r,yAlign:i}=this,{caretSize:l,cornerRadius:c}=n,{topLeft:d,topRight:m,bottomLeft:f,bottomRight:h}=Fd(c),{x:y,y:N}=s,{width:w,height:p}=a;let v,C,j,_,T,k;return i==="center"?(T=N+p/2,r==="left"?(v=y,C=v-l,_=T+l,k=T-l):(v=y+w,C=v+l,_=T-l,k=T+l),j=v):(r==="left"?C=y+Math.max(d,f)+l:r==="right"?C=y+w-Math.max(m,h)-l:C=this.caretX,i==="top"?(_=N,T=_-l,v=C-l,j=C+l):(_=N+p,T=_+l,v=C+l,j=C-l),k=_),{x1:v,x2:C,x3:j,y1:_,y2:T,y3:k}}drawTitle(s,a,n){const r=this.title,i=r.length;let l,c,d;if(i){const m=Bd(n.rtl,this.x,this.width);for(s.x=Kx(this,n.titleAlign,n),a.textAlign=m.textAlign(n.titleAlign),a.textBaseline="middle",l=_a(n.titleFont),c=n.titleSpacing,a.fillStyle=n.titleColor,a.font=l.string,d=0;d<i;++d)a.fillText(r[d],m.x(s.x),s.y+l.lineHeight/2),s.y+=l.lineHeight+c,d+1===i&&(s.y+=n.titleMarginBottom-c)}}_drawColorBox(s,a,n,r,i){const l=this.labelColors[n],c=this.labelPointStyles[n],{boxHeight:d,boxWidth:m}=i,f=_a(i.bodyFont),h=Kx(this,"left",i),y=r.x(h),N=d<f.lineHeight?(f.lineHeight-d)/2:0,w=a.y+N;if(i.usePointStyle){const p={radius:Math.min(m,d)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},v=r.leftForLtr(y,m)+m/2,C=w+d/2;s.strokeStyle=i.multiKeyBackground,s.fillStyle=i.multiKeyBackground,WC(s,p,v,C),s.strokeStyle=l.borderColor,s.fillStyle=l.backgroundColor,WC(s,p,v,C)}else{s.lineWidth=Bt(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,s.strokeStyle=l.borderColor,s.setLineDash(l.borderDash||[]),s.lineDashOffset=l.borderDashOffset||0;const p=r.leftForLtr(y,m),v=r.leftForLtr(r.xPlus(y,1),m-2),C=Fd(l.borderRadius);Object.values(C).some(j=>j!==0)?(s.beginPath(),s.fillStyle=i.multiKeyBackground,i0(s,{x:p,y:w,w:m,h:d,radius:C}),s.fill(),s.stroke(),s.fillStyle=l.backgroundColor,s.beginPath(),i0(s,{x:v,y:w+1,w:m-2,h:d-2,radius:C}),s.fill()):(s.fillStyle=i.multiKeyBackground,s.fillRect(p,w,m,d),s.strokeRect(p,w,m,d),s.fillStyle=l.backgroundColor,s.fillRect(v,w+1,m-2,d-2))}s.fillStyle=this.labelTextColors[n]}drawBody(s,a,n){const{body:r}=this,{bodySpacing:i,bodyAlign:l,displayColors:c,boxHeight:d,boxWidth:m,boxPadding:f}=n,h=_a(n.bodyFont);let y=h.lineHeight,N=0;const w=Bd(n.rtl,this.x,this.width),p=function(U){a.fillText(U,w.x(s.x+N),s.y+y/2),s.y+=y+i},v=w.textAlign(l);let C,j,_,T,k,E,A;for(a.textAlign=l,a.textBaseline="middle",a.font=h.string,s.x=Kx(this,v,n),a.fillStyle=n.bodyColor,ls(this.beforeBody,p),N=c&&v!=="right"?l==="center"?m/2+f:m+2+f:0,T=0,E=r.length;T<E;++T){for(C=r[T],j=this.labelTextColors[T],a.fillStyle=j,ls(C.before,p),_=C.lines,c&&_.length&&(this._drawColorBox(a,s,T,w,n),y=Math.max(h.lineHeight,d)),k=0,A=_.length;k<A;++k)p(_[k]),y=h.lineHeight;ls(C.after,p)}N=0,y=h.lineHeight,ls(this.afterBody,p),s.y-=i}drawFooter(s,a,n){const r=this.footer,i=r.length;let l,c;if(i){const d=Bd(n.rtl,this.x,this.width);for(s.x=Kx(this,n.footerAlign,n),s.y+=n.footerMarginTop,a.textAlign=d.textAlign(n.footerAlign),a.textBaseline="middle",l=_a(n.footerFont),a.fillStyle=n.footerColor,a.font=l.string,c=0;c<i;++c)a.fillText(r[c],d.x(s.x),s.y+l.lineHeight/2),s.y+=l.lineHeight+n.footerSpacing}}drawBackground(s,a,n,r){const{xAlign:i,yAlign:l}=this,{x:c,y:d}=s,{width:m,height:f}=n,{topLeft:h,topRight:y,bottomLeft:N,bottomRight:w}=Fd(r.cornerRadius);a.fillStyle=r.backgroundColor,a.strokeStyle=r.borderColor,a.lineWidth=r.borderWidth,a.beginPath(),a.moveTo(c+h,d),l==="top"&&this.drawCaret(s,a,n,r),a.lineTo(c+m-y,d),a.quadraticCurveTo(c+m,d,c+m,d+y),l==="center"&&i==="right"&&this.drawCaret(s,a,n,r),a.lineTo(c+m,d+f-w),a.quadraticCurveTo(c+m,d+f,c+m-w,d+f),l==="bottom"&&this.drawCaret(s,a,n,r),a.lineTo(c+N,d+f),a.quadraticCurveTo(c,d+f,c,d+f-N),l==="center"&&i==="left"&&this.drawCaret(s,a,n,r),a.lineTo(c,d+h),a.quadraticCurveTo(c,d,c+h,d),a.closePath(),a.fill(),r.borderWidth>0&&a.stroke()}_updateAnimationTarget(s){const a=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){const l=bf[s.position].call(this,this._active,this._eventPosition);if(!l)return;const c=this._size=iD(this,s),d=Object.assign({},l,this._size),m=lD(a,s,d),f=oD(s,d,m,a);(r._to!==f.x||i._to!==f.y)&&(this.xAlign=m.xAlign,this.yAlign=m.yAlign,this.width=c.width,this.height=c.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,f))}}_willRender(){return!!this.opacity}draw(s){const a=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(a);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const l=Zn(a.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;a.enabled&&c&&(s.save(),s.globalAlpha=n,this.drawBackground(i,s,r,a),Q$(s,a.textDirection),i.y+=l.top,this.drawTitle(i,s,a),this.drawBody(i,s,a),this.drawFooter(i,s,a),q$(s,a.textDirection),s.restore())}getActiveElements(){return this._active||[]}setActiveElements(s,a){const n=this._active,r=s.map(({datasetIndex:c,index:d})=>{const m=this.chart.getDatasetMeta(c);if(!m)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:m.data[d],index:d}}),i=!a0(n,r),l=this._positionChanged(r,a);(i||l)&&(this._active=r,this._eventPosition=a,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(s,a,n=!0){if(a&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],l=this._getActiveElements(s,i,a,n),c=this._positionChanged(l,s),d=a||!a0(l,i)||c;return d&&(this._active=l,(r.enabled||r.external)&&(this._eventPosition={x:s.x,y:s.y},this.update(!0,a))),d}_getActiveElements(s,a,n,r){const i=this.options;if(s.type==="mouseout")return[];if(!r)return a.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);const l=this.chart.getElementsAtEventForMode(s,i.mode,i,n);return i.reverse&&l.reverse(),l}_positionChanged(s,a){const{caretX:n,caretY:r,options:i}=this,l=bf[i.position].call(this,s,a);return l!==!1&&(n!==l.x||r!==l.y)}}var lxe={id:"tooltip",_element:uD,positioners:bf,afterInit(e,s,a){a&&(e.tooltip=new uD({chart:e,options:a}))},beforeUpdate(e,s,a){e.tooltip&&e.tooltip.initialize(a)},reset(e,s,a){e.tooltip&&e.tooltip.initialize(a)},afterDraw(e){const s=e.tooltip;if(s&&s._willRender()){const a={tooltip:s};if(e.notifyPlugins("beforeTooltipDraw",{...a,cancelable:!0})===!1)return;s.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",a)}},afterEvent(e,s){if(e.tooltip){const a=s.replay;e.tooltip.handleEvent(s.event,a,s.inChartArea)&&(s.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,s)=>s.bodyFont.size,boxWidth:(e,s)=>s.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:h6},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const oxe=(e,s,a,n)=>(typeof s=="string"?(a=e.push(s)-1,n.unshift({index:a,label:s})):isNaN(s)&&(a=null),a);function cxe(e,s,a,n){const r=e.indexOf(s);if(r===-1)return oxe(e,s,a,n);const i=e.lastIndexOf(s);return r!==i?a:r}const dxe=(e,s)=>e===null?null:Sa(Math.round(e),0,s);function mD(e){const s=this.getLabels();return e>=0&&e<s.length?s[e]:e}class uxe extends Nu{static id="category";static defaults={ticks:{callback:mD}};constructor(s){super(s),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(s){const a=this._addedLabels;if(a.length){const n=this.getLabels();for(const{index:r,label:i}of a)n[r]===i&&n.splice(r,1);this._addedLabels=[]}super.init(s)}parse(s,a){if(Zt(s))return null;const n=this.getLabels();return a=isFinite(a)&&n[a]===s?a:cxe(n,s,At(a,s),this._addedLabels),dxe(a,n.length-1)}determineDataLimits(){const{minDefined:s,maxDefined:a}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(s||(n=0),a||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const s=this.min,a=this.max,n=this.options.offset,r=[];let i=this.getLabels();i=s===0&&a===i.length-1?i:i.slice(s,a+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let l=s;l<=a;l++)r.push({value:l});return r}getLabelForValue(s){return mD.call(this,s)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(s){return typeof s!="number"&&(s=this.parse(s)),s===null?NaN:this.getPixelForDecimal((s-this._startValue)/this._valueRange)}getPixelForTick(s){const a=this.ticks;return s<0||s>a.length-1?null:this.getPixelForValue(a[s].value)}getValueForPixel(s){return Math.round(this._startValue+this.getDecimalForPixel(s)*this._valueRange)}getBasePixel(){return this.bottom}}function mxe(e,s){const a=[],{bounds:r,step:i,min:l,max:c,precision:d,count:m,maxTicks:f,maxDigits:h,includeBounds:y}=e,N=i||1,w=f-1,{min:p,max:v}=s,C=!Zt(l),j=!Zt(c),_=!Zt(m),T=(v-p)/(h+1);let k=f3((v-p)/w/N)*N,E,A,U,B;if(k<1e-14&&!C&&!j)return[{value:p},{value:v}];B=Math.ceil(v/k)-Math.floor(p/k),B>w&&(k=f3(B*k/w/N)*N),Zt(d)||(E=Math.pow(10,d),k=Math.ceil(k*E)/E),r==="ticks"?(A=Math.floor(p/k)*k,U=Math.ceil(v/k)*k):(A=p,U=v),C&&j&&i&&jme((c-l)/i,k/1e3)?(B=Math.round(Math.min((c-l)/k,f)),k=(c-l)/B,A=l,U=c):_?(A=C?l:A,U=j?c:U,B=m-1,k=(U-A)/B):(B=(U-A)/k,Tf(B,Math.round(B),k/1e3)?B=Math.round(B):B=Math.ceil(B));const X=Math.max(h3(k),h3(A));E=Math.pow(10,Zt(d)?X:d),A=Math.round(A*E)/E,U=Math.round(U*E)/E;let $=0;for(C&&(y&&A!==l?(a.push({value:l}),A<l&&$++,Tf(Math.round((A+$*k)*E)/E,l,fD(l,T,e))&&$++):A<l&&$++);$<B;++$){const O=Math.round((A+$*k)*E)/E;if(j&&O>c)break;a.push({value:O})}return j&&y&&U!==c?a.length&&Tf(a[a.length-1].value,c,fD(c,T,e))?a[a.length-1].value=c:a.push({value:c}):(!j||U===c)&&a.push({value:U}),a}function fD(e,s,{horizontal:a,minRotation:n}){const r=Pi(n),i=(a?Math.sin(r):Math.cos(r))||.001,l=.75*s*(""+e).length;return Math.min(s/i,l)}class fxe extends Nu{constructor(s){super(s),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(s,a){return Zt(s)||(typeof s=="number"||s instanceof Number)&&!isFinite(+s)?null:+s}handleTickRangeOptions(){const{beginAtZero:s}=this.options,{minDefined:a,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this;const l=d=>r=a?r:d,c=d=>i=n?i:d;if(s){const d=Vr(r),m=Vr(i);d<0&&m<0?c(0):d>0&&m>0&&l(0)}if(r===i){let d=i===0?1:Math.abs(i*.05);c(i+d),s||l(r-d)}this.min=r,this.max=i}getTickLimit(){const s=this.options.ticks;let{maxTicksLimit:a,stepSize:n}=s,r;return n?(r=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),a=a||11),a&&(r=Math.min(a,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const s=this.options,a=s.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r={maxTicks:n,bounds:s.bounds,min:s.min,max:s.max,precision:a.precision,step:a.stepSize,count:a.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:a.minRotation||0,includeBounds:a.includeBounds!==!1},i=this._range||this,l=mxe(r,i);return s.bounds==="ticks"&&Cme(l,this,"value"),s.reverse?(l.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),l}configure(){const s=this.ticks;let a=this.min,n=this.max;if(super.configure(),this.options.offset&&s.length){const r=(n-a)/Math.max(s.length-1,1)/2;a-=r,n+=r}this._startValue=a,this._endValue=n,this._valueRange=n-a}getLabelForValue(s){return eS(s,this.chart.options.locale,this.options.ticks.format)}}class hxe extends fxe{static id="linear";static defaults={ticks:{callback:z$.formatters.numeric}};determineDataLimits(){const{min:s,max:a}=this.getMinMax(!0);this.min=Kn(s)?s:0,this.max=Kn(a)?a:1,this.handleTickRangeOptions()}computeTickLimit(){const s=this.isHorizontal(),a=s?this.width:this.height,n=Pi(this.options.ticks.minRotation),r=(s?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(a/Math.min(40,i.lineHeight/r))}getPixelForValue(s){return s===null?NaN:this.getPixelForDecimal((s-this._startValue)/this._valueRange)}getValueForPixel(s){return this._startValue+this.getDecimalForPixel(s)*this._valueRange}}const Gy={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Wa=Object.keys(Gy);function hD(e,s){return e-s}function gD(e,s){if(Zt(s))return null;const a=e._adapter,{parser:n,round:r,isoWeekday:i}=e._parseOpts;let l=s;return typeof n=="function"&&(l=n(l)),Kn(l)||(l=typeof n=="string"?a.parse(l,n):a.parse(l)),l===null?null:(r&&(l=r==="week"&&(qf(i)||i===!0)?a.startOf(l,"isoWeek",i):a.startOf(l,r)),+l)}function xD(e,s,a,n){const r=Wa.length;for(let i=Wa.indexOf(e);i<r-1;++i){const l=Gy[Wa[i]],c=l.steps?l.steps:Number.MAX_SAFE_INTEGER;if(l.common&&Math.ceil((a-s)/(c*l.size))<=n)return Wa[i]}return Wa[r-1]}function gxe(e,s,a,n,r){for(let i=Wa.length-1;i>=Wa.indexOf(a);i--){const l=Wa[i];if(Gy[l].common&&e._adapter.diff(r,n,l)>=s-1)return l}return Wa[a?Wa.indexOf(a):0]}function xxe(e){for(let s=Wa.indexOf(e)+1,a=Wa.length;s<a;++s)if(Gy[Wa[s]].common)return Wa[s]}function pD(e,s,a){if(!a)e[s]=!0;else if(a.length){const{lo:n,hi:r}=K2(a,s),i=a[n]>=s?a[n]:a[r];e[i]=!0}}function pxe(e,s,a,n){const r=e._adapter,i=+r.startOf(s[0].value,n),l=s[s.length-1].value;let c,d;for(c=i;c<=l;c=+r.add(c,1,n))d=a[c],d>=0&&(s[d].major=!0);return s}function yD(e,s,a){const n=[],r={},i=s.length;let l,c;for(l=0;l<i;++l)c=s[l],r[c]=l,n.push({value:c,major:!1});return i===0||!a?n:pxe(e,n,r,a)}class bD extends Nu{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(s){super(s),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(s,a={}){const n=s.time||(s.time={}),r=this._adapter=new fhe._date(s.adapters.date);r.init(a),_f(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(s),this._normalized=a.normalized}parse(s,a){return s===void 0?null:gD(this,s)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const s=this.options,a=this._adapter,n=s.time.unit||"day";let{min:r,max:i,minDefined:l,maxDefined:c}=this.getUserBounds();function d(m){!l&&!isNaN(m.min)&&(r=Math.min(r,m.min)),!c&&!isNaN(m.max)&&(i=Math.max(i,m.max))}(!l||!c)&&(d(this._getLabelBounds()),(s.bounds!=="ticks"||s.ticks.source!=="labels")&&d(this.getMinMax(!1))),r=Kn(r)&&!isNaN(r)?r:+a.startOf(Date.now(),n),i=Kn(i)&&!isNaN(i)?i:+a.endOf(Date.now(),n)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const s=this.getLabelTimestamps();let a=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return s.length&&(a=s[0],n=s[s.length-1]),{min:a,max:n}}buildTicks(){const s=this.options,a=s.time,n=s.ticks,r=n.source==="labels"?this.getLabelTimestamps():this._generate();s.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,l=this.max,c=Ame(r,i,l);return this._unit=a.unit||(n.autoSkip?xD(a.minUnit,this.min,this.max,this._getLabelCapacity(i)):gxe(this,c.length,a.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:xxe(this._unit),this.initOffsets(r),s.reverse&&c.reverse(),yD(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(s=>+s.value))}initOffsets(s=[]){let a=0,n=0,r,i;this.options.offset&&s.length&&(r=this.getDecimalForValue(s[0]),s.length===1?a=1-r:a=(this.getDecimalForValue(s[1])-r)/2,i=this.getDecimalForValue(s[s.length-1]),s.length===1?n=i:n=(i-this.getDecimalForValue(s[s.length-2]))/2);const l=s.length<3?.5:.25;a=Sa(a,0,l),n=Sa(n,0,l),this._offsets={start:a,end:n,factor:1/(a+1+n)}}_generate(){const s=this._adapter,a=this.min,n=this.max,r=this.options,i=r.time,l=i.unit||xD(i.minUnit,a,n,this._getLabelCapacity(a)),c=At(r.ticks.stepSize,1),d=l==="week"?i.isoWeekday:!1,m=qf(d)||d===!0,f={};let h=a,y,N;if(m&&(h=+s.startOf(h,"isoWeek",d)),h=+s.startOf(h,m?"day":l),s.diff(n,a,l)>1e5*c)throw new Error(a+" and "+n+" are too far apart with stepSize of "+c+" "+l);const w=r.ticks.source==="data"&&this.getDataTimestamps();for(y=h,N=0;y<n;y=+s.add(y,c,l),N++)pD(f,y,w);return(y===n||r.bounds==="ticks"||N===1)&&pD(f,y,w),Object.keys(f).sort(hD).map(p=>+p)}getLabelForValue(s){const a=this._adapter,n=this.options.time;return n.tooltipFormat?a.format(s,n.tooltipFormat):a.format(s,n.displayFormats.datetime)}format(s,a){const r=this.options.time.displayFormats,i=this._unit,l=a||r[i];return this._adapter.format(s,l)}_tickFormatFunction(s,a,n,r){const i=this.options,l=i.ticks.callback;if(l)return ws(l,[s,a,n],this);const c=i.time.displayFormats,d=this._unit,m=this._majorUnit,f=d&&c[d],h=m&&c[m],y=n[a],N=m&&h&&y&&y.major;return this._adapter.format(s,r||(N?h:f))}generateTickLabels(s){let a,n,r;for(a=0,n=s.length;a<n;++a)r=s[a],r.label=this._tickFormatFunction(r.value,a,s)}getDecimalForValue(s){return s===null?NaN:(s-this.min)/(this.max-this.min)}getPixelForValue(s){const a=this._offsets,n=this.getDecimalForValue(s);return this.getPixelForDecimal((a.start+n)*a.factor)}getValueForPixel(s){const a=this._offsets,n=this.getDecimalForPixel(s)/a.factor-a.end;return this.min+n*(this.max-this.min)}_getLabelSize(s){const a=this.options.ticks,n=this.ctx.measureText(s).width,r=Pi(this.isHorizontal()?a.maxRotation:a.minRotation),i=Math.cos(r),l=Math.sin(r),c=this._resolveTickFontOptions(0).size;return{w:n*i+c*l,h:n*l+c*i}}_getLabelCapacity(s){const a=this.options.time,n=a.displayFormats,r=n[a.unit]||n.millisecond,i=this._tickFormatFunction(s,0,yD(this,[s],this._majorUnit),r),l=this._getLabelSize(i),c=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return c>0?c:1}getDataTimestamps(){let s=this._cache.data||[],a,n;if(s.length)return s;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(a=0,n=r.length;a<n;++a)s=s.concat(r[a].controller.getAllParsedValues(this));return this._cache.data=this.normalize(s)}getLabelTimestamps(){const s=this._cache.labels||[];let a,n;if(s.length)return s;const r=this.getLabels();for(a=0,n=r.length;a<n;++a)s.push(gD(this,r[a]));return this._cache.labels=this._normalized?s:this.normalize(s)}normalize(s){return $$(s.sort(hD))}}function Zx(e,s,a){let n=0,r=e.length-1,i,l,c,d;a?(s>=e[n].pos&&s<=e[r].pos&&({lo:n,hi:r}=qo(e,"pos",s)),{pos:i,time:c}=e[n],{pos:l,time:d}=e[r]):(s>=e[n].time&&s<=e[r].time&&({lo:n,hi:r}=qo(e,"time",s)),{time:i,pos:c}=e[n],{time:l,pos:d}=e[r]);const m=l-i;return m?c+(d-c)*(s-i)/m:c}class bye extends bD{static id="timeseries";static defaults=bD.defaults;constructor(s){super(s),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const s=this._getTimestampsForTable(),a=this._table=this.buildLookupTable(s);this._minPos=Zx(a,this.min),this._tableRange=Zx(a,this.max)-this._minPos,super.initOffsets(s)}buildLookupTable(s){const{min:a,max:n}=this,r=[],i=[];let l,c,d,m,f;for(l=0,c=s.length;l<c;++l)m=s[l],m>=a&&m<=n&&r.push(m);if(r.length<2)return[{time:a,pos:0},{time:n,pos:1}];for(l=0,c=r.length;l<c;++l)f=r[l+1],d=r[l-1],m=r[l],Math.round((f+d)/2)!==m&&i.push({time:m,pos:l/(c-1)});return i}_generate(){const s=this.min,a=this.max;let n=super.getDataTimestamps();return(!n.includes(s)||!n.length)&&n.splice(0,0,s),(!n.includes(a)||n.length===1)&&n.push(a),n.sort((r,i)=>r-i)}_getTimestampsForTable(){let s=this._cache.all||[];if(s.length)return s;const a=this.getDataTimestamps(),n=this.getLabelTimestamps();return a.length&&n.length?s=this.normalize(a.concat(n)):s=a.length?a:n,s=this._cache.all=s,s}getDecimalForValue(s){return(Zx(this._table,s)-this._minPos)/this._tableRange}getValueForPixel(s){const a=this._offsets,n=this.getDecimalForPixel(s)/a.factor-a.end;return Zx(this._table,n*this._tableRange+this._minPos,!0)}}const g6="label";function vD(e,s){typeof e=="function"?e(s):e&&(e.current=s)}function yxe(e,s){const a=e.options;a&&s&&Object.assign(a,s)}function x6(e,s){e.labels=s}function p6(e,s,a=g6){const n=[];e.datasets=s.map(r=>{const i=e.datasets.find(l=>l[a]===r[a]);return!i||!r.data||n.includes(i)?{...r}:(n.push(i),Object.assign(i,r),i)})}function bxe(e,s=g6){const a={labels:[],datasets:[]};return x6(a,e.labels),p6(a,e.datasets,s),a}function vxe(e,s){const{height:a=150,width:n=300,redraw:r=!1,datasetIdKey:i,type:l,data:c,options:d,plugins:m=[],fallbackContent:f,updateMode:h,...y}=e,N=g.useRef(null),w=g.useRef(null),p=()=>{N.current&&(w.current=new Hy(N.current,{type:l,data:bxe(c,i),options:d&&{...d},plugins:m}),vD(s,w.current))},v=()=>{vD(s,null),w.current&&(w.current.destroy(),w.current=null)};return g.useEffect(()=>{!r&&w.current&&d&&yxe(w.current,d)},[r,d]),g.useEffect(()=>{!r&&w.current&&x6(w.current.config.data,c.labels)},[r,c.labels]),g.useEffect(()=>{!r&&w.current&&c.datasets&&p6(w.current.config.data,c.datasets,i)},[r,c.datasets]),g.useEffect(()=>{w.current&&(r?(v(),setTimeout(p)):w.current.update(h))},[r,d,c.labels,c.datasets,h]),g.useEffect(()=>{w.current&&(v(),setTimeout(p))},[l]),g.useEffect(()=>(p(),()=>v()),[]),t.jsx("canvas",{ref:N,role:"img",height:a,width:n,...y,children:f})}const Nxe=g.forwardRef(vxe);function dS(e,s){return Hy.register(s),g.forwardRef((a,n)=>t.jsx(Nxe,{...a,ref:n,type:e}))}const wxe=dS("line",uhe),jxe=dS("bar",ohe),Cxe=dS("pie",mhe);Hy.register(uxe,hxe,Vge,Rge,Uge,Ege,Jge,lxe,Kge);const y6=e=>t.jsx(Jt,{...e}),Sxe=e=>t.jsx(vr,{...e}),_xe=e=>t.jsx(N0,{...e}),Txe=e=>t.jsx(As,{...e}),b6=e=>t.jsx(en,{...e}),Exe=e=>t.jsx(dV,{...e}),Axe=[{icon:y6,title:"Total Contacts",value:128,color:"text-blue-600",bgColor:"bg-blue-50"},{icon:b6,title:"Emails Sent",value:450,color:"text-purple-600",bgColor:"bg-purple-50"},{icon:_xe,title:"Active Campaigns",value:9,color:"text-green-600",bgColor:"bg-green-50"},{icon:Sxe,title:"Revenue",value:125e3,color:"text-yellow-600",bgColor:"bg-yellow-50"}],Lxe=[{name:"Emma Watty",company:"Tech Interaction Inc.",assignedBy:"Alice Smith",source:"Website",date:"Oct 10, 2:10 PM"},{name:"John Johnny",company:"Capital Business Co.",assignedBy:"Bob Johnson",source:"Referral",date:"Oct 9, 12:00 AM"},{name:"Annie Arnty",company:"Dynamic Systems Inc.",assignedBy:"Catherine Lee",source:"Trade Show",date:"Oct 8, 1:25 PM"},{name:"James Wilson",company:"Global Services LLC",assignedBy:"David Kim",source:"Cold Call",date:"Oct 7, 11:15 AM"}],kxe={labels:["Week 1","Week 2","Week 3","Week 4"],datasets:[{label:"Leads",data:[50,75,60,90],backgroundColor:"rgba(96, 165, 250, 0.6)",borderColor:"rgba(96, 165, 250, 1)",borderWidth:1},{label:"Conversions",data:[10,20,15,25],backgroundColor:"rgba(34, 197, 94, 0.6)",borderColor:"rgba(34, 197, 94, 1)",borderWidth:1}]},Dxe={responsive:!0,plugins:{legend:{position:"top",labels:{color:"#374151"}},title:{display:!0,color:"#111827",font:{size:18}}}},Mxe={labels:["Leads","Conversions"],datasets:[{label:"Leads Status",data:[75,25],backgroundColor:["rgba(96, 165, 250, 0.6)","rgba(34, 197, 94, 0.6)"],borderColor:["rgba(96, 165, 250, 1)","rgba(34, 197, 94, 1)"],borderWidth:1}]},Pxe={responsive:!0,plugins:{legend:{position:"top",labels:{color:"#374151"}},title:{display:!0,color:"#111827",font:{size:18}}}},Oxe=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},Ixe=()=>{const e=[{icon:y6,label:"New Contact"},{icon:b6,label:"New Campaign"},{icon:Txe,label:"New Task"},{icon:Exe,label:"New Leads"}];return t.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 flex flex-col md:flex-row items-center space-y-3 md:space-y-0 md:space-x-4",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 py-2 flex-grow focus-within:ring-2 focus-within:ring-indigo-500 transition w-full md:max-w-3xl",children:[t.jsx(yt,{size:20,className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search Contacts, Leads, or Campaigns...",className:"focus:outline-none text-base w-full"})]}),t.jsx("div",{className:"flex space-x-3 md:ml-auto",children:e.map((s,a)=>t.jsxs("div",{className:"relative group",children:[t.jsx("button",{className:"p-2 text-gray-500 hover:text-gray-900 transition rounded-full hover:bg-gray-100 focus:outline-none",children:t.jsx(s.icon,{size:20})}),t.jsx("span",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-1 bg-gray-800 text-white text-xs rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition",children:s.label})]},a))})]})},$xe=({icon:e,title:s,value:a,color:n,bgColor:r})=>t.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-lg transition duration-300 hover:shadow-xl hover:ring-2 hover:ring-blue-500 cursor-pointer",onClick:()=>console.log(`Clicked metric card: ${s}`),children:[t.jsx("div",{className:`p-3 rounded-full ${r} ${n} mr-4`,children:t.jsx(e,{size:22})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500 uppercase",children:s}),t.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]}),Rxe=({name:e,company:s,assignedBy:a,source:n,date:r})=>{const{text:i,bg:l}=Oxe(n);return t.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 px-2 -mx-2 rounded-md",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-gray-800",children:e}),t.jsx("p",{className:"text-xs text-gray-500",children:s}),a&&t.jsxs("p",{className:"text-xs text-gray-500",children:["Assigned by:"," ",t.jsx("span",{className:"font-semibold text-gray-700",children:a})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-xs text-gray-400",children:r}),t.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${i} ${l} px-2 py-0.5 rounded-full`,children:n})]})]})})},Uxe=({title:e,children:s})=>t.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-md flex flex-col",children:[t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:e}),t.jsx("span",{className:"text-sm text-indigo-500 cursor-pointer hover:underline",children:"See All"})]}),s]}),zxe=({title:e,chartData:s,chartOptions:a})=>{const[n,r]=g.useState("bar"),i=n==="pie"?Mxe:s,l=n==="pie"?Pxe:a,c=n==="line"?wxe:n==="pie"?Cxe:jxe,d=n==="pie"?250:300;return t.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md flex flex-col hover:shadow-lg transition",children:[t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:e}),t.jsxs("select",{value:n,onChange:m=>r(m.target.value),className:"border border-gray-300 rounded-md px-2 py-1 text-sm",children:[t.jsx("option",{value:"bar",children:"Bar"}),t.jsx("option",{value:"line",children:"Line"}),t.jsx("option",{value:"pie",children:"Pie"})]})]}),t.jsx("div",{className:"w-full flex justify-center",style:{height:d},children:t.jsx(c,{data:i,options:l})})]})};function Fxe(){const{user:e}=zt();return g.useEffect(()=>{document.title="Dashboard | Sari-Sari CRM"},[]),t.jsx("div",{className:"min-h-screen pt-5 pb-10 font-sans",children:t.jsxs("main",{className:"max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8",children:[t.jsxs("div",{className:"text-xl font-bold mb-4",children:["Welcome back, ",e?.name||"Marketing","! Heres your marketing overview."]}),t.jsx(Ixe,{}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6",children:Axe.map(s=>t.jsx($xe,{...s},s.title))}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[t.jsx(zxe,{title:"Leads & Conversions",chartData:kxe,chartOptions:Dxe}),t.jsx(Uxe,{title:"Latest Leads",children:Lxe.map((s,a)=>t.jsx(Rxe,{...s},a))})]})]})})}function Bxe(){g.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[e,s]=g.useState(null),[a,n]=g.useState(""),[r,i]=g.useState("All Statuses"),l=g.useMemo(()=>[{company:"Acme Corporation",url:"https://acme.com",status:"CUSTOMER",industry:"Technology",territory:"North Region",phone_number:"+1-555-0100",billing_address:"123 Main St, North City",shipping_address:"456 Elm St, North City",created_by:"John Appleseed",created_date:"2024-01-10",last_updated:"2025-09-25 14:30"},{company:"Beta Solutions",url:"https://beta.com",status:"PROSPECT",industry:"Finance",territory:"South Region",phone_number:"+1-555-0200",billing_address:"789 Pine St, South City",shipping_address:"101 Maple St, South City",created_by:"Jane Doe",created_date:"2024-03-05",last_updated:"2025-10-01 10:15"},{company:"Gamma Partners",url:"https://gamma.com",status:"PARTNER",industry:"Retail",territory:"East Region",phone_number:"+1-555-0300",billing_address:"234 Oak St, East City",shipping_address:"345 Birch St, East City",created_by:"Alice Smith",created_date:"2023-12-20",last_updated:"2025-08-15 09:45"},{company:"Delta Corp",url:"https://delta.com",status:"INACTIVE",industry:"Logistics",territory:"West Region",phone_number:"+1-555-0400",billing_address:"987 Cedar St, West City",shipping_address:"654 Pine St, West City",created_by:"Bob Johnson",created_date:"2023-11-15",last_updated:"2025-06-12 11:20"}],[]),c=h=>s(h),d=()=>s(null),m=g.useMemo(()=>[{title:"Total Accounts",value:l.length,color:"text-yellow-600",bgColor:"bg-yellow-50",icon:Jt},{title:"Customers",value:l.filter(h=>h.status==="CUSTOMER").length,color:"text-green-600",bgColor:"bg-green-50",icon:Wr},{title:"Prospects",value:l.filter(h=>h.status==="PROSPECT").length,color:"text-purple-600",bgColor:"bg-purple-50",icon:Cs},{title:"Partners",value:l.filter(h=>h.status==="PARTNER").length,color:"text-pink-600",bgColor:"bg-pink-50",icon:qt},{title:"Active",value:l.filter(h=>h.status==="CUSTOMER"||h.status==="PARTNER").length,color:"text-blue-600",bgColor:"bg-blue-50",icon:Wr},{title:"Inactive",value:l.filter(h=>h.status==="INACTIVE").length,color:"text-gray-600",bgColor:"bg-gray-50",icon:Yr},{title:"Former",value:l.filter(h=>h.status==="FORMER").length,color:"text-orange-600",bgColor:"bg-orange-50",icon:Yr}],[l]);if(e)return t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("button",{onClick:d,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-4 sm:mb-6 cursor-pointer",children:[t.jsx(gc,{className:"mr-1 w-4 h-4 sm:w-5 sm:h-5"})," Back"]}),t.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:t.jsx("div",{children:t.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800 flex items-center gap-2",children:[e.company,t.jsx("span",{className:`inline-block text-xs px-2 py-0.5 rounded ${e.status==="CUSTOMER"?"bg-green-600 text-white":e.status==="PROSPECT"?"bg-purple-600 text-white":e.status==="PARTNER"?"bg-pink-600 text-white":"bg-gray-500 text-white"}`,children:e.status})]})})})]}),t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 sm:p-6 shadow-sm overflow-x-auto",children:[t.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4 text-gray-800",children:"Account Details"}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm text-gray-700",children:[t.jsxs("p",{children:[t.jsx("span",{className:"font-semibold",children:"Website:"})," ",t.jsx("br",{}),t.jsx("a",{href:e.url,className:"text-blue-600 hover:underline break-words",children:e.url})]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-semibold",children:"Industry:"})," ",t.jsx("br",{}),e.industry]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-semibold",children:"Territory:"})," ",t.jsx("br",{}),e.territory]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-semibold",children:"Phone Number:"})," ",t.jsx("br",{}),e.phone_number]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-semibold",children:"Billing Address:"})," ",t.jsx("br",{}),e.billing_address]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-semibold",children:"Shipping Address:"})," ",t.jsx("br",{}),e.shipping_address]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-semibold",children:"Created By:"})," ",t.jsx("br",{}),e.created_by," on ",e.created_date]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-semibold",children:"Last Updated:"})," ",t.jsx("br",{}),e.last_updated]})]})]})]});const f=l.filter(h=>{const y=h.company.toLowerCase().includes(a.toLowerCase())||h.url.toLowerCase().includes(a.toLowerCase())||h.industry.toLowerCase().includes(a.toLowerCase())||h.territory.toLowerCase().includes(a.toLowerCase())||h.phone_number.toLowerCase().includes(a.toLowerCase()),N=r==="All Statuses"||r==="Active"&&(h.status==="CUSTOMER"||h.status==="PARTNER")||r==="Inactive"&&h.status==="INACTIVE"||r==="Former"&&h.status==="FORMER"||h.status.toLowerCase()===r.toLowerCase();return y&&N});return t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-sans",children:[t.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:t.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[t.jsx(Jt,{className:"mr-2 text-blue-600"}),"Accounts List"]})}),t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 xl:grid-cols-4 md:grid-cols-4 gap-4 mb-6",children:m.map(h=>t.jsx(Hxe,{...h},h.title))}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[t.jsx(yt,{size:20,className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search by company, website, industry, territory, or phone...",value:a,onChange:h=>n(h.target.value),className:"focus:outline-none text-base w-full"})]}),t.jsx("div",{className:"w-full lg:w-1/4",children:t.jsxs("select",{value:r,onChange:h=>i(h.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[t.jsx("option",{children:"All Statuses"}),t.jsx("option",{children:"Customer"}),t.jsx("option",{children:"Prospect"}),t.jsx("option",{children:"Partner"}),t.jsx("option",{children:"Active"}),t.jsx("option",{children:"Inactive"}),t.jsx("option",{children:"Former"})]})})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[t.jsx("thead",{className:"bg-gray-100 text-left text-gray-600",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4",children:"Company"}),t.jsx("th",{className:"py-3 px-4",children:"Status"}),t.jsx("th",{className:"py-3 px-4",children:"Industry"}),t.jsx("th",{className:"py-3 px-4",children:"Territory"}),t.jsx("th",{className:"py-3 px-4",children:"Phone"})]})}),t.jsxs("tbody",{children:[f.map((h,y)=>t.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>c(h),children:[t.jsx("td",{className:"py-3 px-4 break-words",children:t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-blue-600 hover:underline break-words",children:h.company}),t.jsx("div",{className:"text-gray-500 text-xs break-words",children:h.url})]})}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${h.status==="CUSTOMER"?"bg-green-100 text-green-700":h.status==="PROSPECT"?"bg-purple-100 text-purple-700":h.status==="PARTNER"?"bg-pink-100 text-pink-700":h.status==="INACTIVE"?"bg-gray-100 text-gray-700":"bg-orange-100 text-orange-700"}`,children:h.status})}),t.jsx("td",{className:"py-3 px-4 break-words",children:h.industry}),t.jsx("td",{className:"py-3 px-4 break-words",children:h.territory}),t.jsxs("td",{className:"py-3 px-4 flex items-center space-x-2 break-words",children:[t.jsx(ft,{className:"text-gray-500"}),t.jsx("span",{children:h.phone_number})]})]},y)),f.length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:5,className:"py-4 text-center text-gray-500",children:"No accounts match your search/filter."})})]})]})})]})}const Hxe=({icon:e,title:s,value:a,color:n,bgColor:r})=>t.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md hover:shadow-lg hover:ring-2 hover:ring-blue-500 cursor-pointer transition-all duration-300",onClick:()=>console.log(`Clicked: ${s}`),children:[t.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${n} mr-4`,children:t.jsx(e,{size:22})}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"text-xs text-gray-500 uppercase",children:s}),t.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]});function Gxe(){g.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[e,s]=g.useState(!1),[a,n]=g.useState(null),[r,i]=g.useState(!1),[l,c]=g.useState(""),[d,m]=g.useState("All Contacts"),[f,h]=g.useState([{id:1,name:"John Smith",title:"Marketing Director",account:"Acme Corporation",email:"john.smith@acme.com",phone1:"+1-555-0101",phone2:"+1-555-0102",department:"Marketing",assigned:"Jane Sales",created:"1/10/2024",mobile:"09217229846",workPhone:"(555) 123-4567",createdBy:"John Appleseed",lastUpdated:"2025-09-21 15:30",notes:"Key marketing partner for Q4 campaigns."}]),[y,N]=g.useState({id:null,name:"",email:"",workPhone:"",title:"",department:"",phone1:"",phone2:"",account:"",assigned:"",notes:""}),w=k=>{k.target.id==="modalBackdrop"&&s(!1)},p=k=>{n(k)},v=()=>{n(null)},C=()=>{i(!1),N({id:null,name:"",email:"",workPhone:"",title:"",department:"",phone1:"",phone2:"",account:"",assigned:"",notes:""}),s(!0)},j=(k,E)=>{E.stopPropagation(),i(!0),N(k),s(!0)},_=k=>{const{name:E,value:A}=k.target;N(U=>({...U,[E]:A}))},T=k=>{if(k.preventDefault(),r)h(E=>E.map(A=>A.id===y.id?{...y}:A));else{const E={...y,id:Date.now(),created:new Date().toLocaleDateString(),createdBy:"Admin User"};h(A=>[...A,E])}s(!1)};return a?t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[t.jsxs("button",{onClick:v,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-4 sm:mb-6 cursor-pointer",children:[t.jsx(gc,{className:"mr-1 w-4 h-4 sm:w-5 sm:h-5"})," Back"]}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-3",children:[t.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:a.account}),t.jsx("span",{className:"mt-1 sm:mt-0 bg-blue-600 text-white text-xs sm:text-sm px-2 py-0.5 rounded w-fit",children:"Active"})]}),t.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0 mt-3 sm:mt-0",children:t.jsxs("button",{className:"w-full sm:w-auto bg-gray-800 text-white px-5 py-2 rounded-md hover:bg-gray-900 transition flex items-center gap-2",children:[t.jsx(Xr,{}),"Export"]})})]}),t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 sm:p-6 w-full max-w-full lg:max-w-6xl shadow-sm overflow-x-auto mx-auto",children:[t.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4 text-gray-800",children:"Contact Details"}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 text-sm text-gray-700",children:[t.jsxs("p",{children:[t.jsx("span",{className:"font-semibold",children:"Primary Contact:"})," ",t.jsx("br",{}),a.name]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-semibold",children:"Email:"})," ",t.jsx("br",{}),a.email]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-semibold",children:"Created By:"})," ",t.jsx("br",{}),a.createdBy," on ",a.created]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-semibold",children:"Title:"})," ",t.jsx("br",{}),a.title]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-semibold",children:"Assigned To:"})," ",t.jsx("br",{}),a.assigned]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-semibold",children:"Work Phone:"})," ",t.jsx("br",{}),a.workPhone]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-semibold",children:"Account:"})," ",t.jsx("br",{}),a.account]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-semibold",children:"Mobile Phone:"})," ",t.jsx("br",{}),a.phone1]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-semibold",children:"Last Updated:"})," ",t.jsx("br",{}),a.lastUpdated]})]}),t.jsxs("div",{className:"mt-6 border-gray-200 pt-4",children:[t.jsx("h3",{className:"text-md sm:text-lg font-semibold text-gray-800 mb-2",children:"Notes"}),t.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:a.notes?a.notes:"No additional notes were provided for this contact."})]})]})]}):t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[t.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[t.jsx(Jt,{className:"mr-2 text-blue-600"})," Contacts Management"]}),t.jsx("button",{onClick:C,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base transition",children:" Add Contact"})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[t.jsx(yt,{size:20,className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search Contacts...",value:l,onChange:k=>c(k.target.value),className:"focus:outline-none text-base w-full"})]}),t.jsx("div",{className:"w-full lg:w-1/4",children:t.jsxs("select",{value:d,onChange:k=>m(k.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[t.jsx("option",{children:"All Contacts"}),t.jsx("option",{children:"Option 1"}),t.jsx("option",{children:"Option 2"}),t.jsx("option",{children:"Option 3"})]})})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-[600px] w-full border border-gray-200 rounded-lg bg-white shadow-sm",children:[t.jsx("thead",{className:"bg-gray-100 text-left text-sm text-gray-600",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4",children:"Contact"}),t.jsx("th",{className:"py-3 px-4",children:"Account"}),t.jsx("th",{className:"py-3 px-4",children:"Contact Info"}),t.jsx("th",{className:"py-3 px-4",children:"Department"}),t.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),t.jsx("th",{className:"py-3 px-4",children:"Created"}),t.jsx("th",{className:"py-3 px-4 text-center",children:"Actions"})]})}),t.jsx("tbody",{className:"text-xs text-gray-700",children:f.map((k,E)=>t.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>p(k),children:[t.jsx("td",{className:"py-3 px-4",children:t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all",children:k.name}),t.jsx("div",{className:"text-xs text-gray-500",children:k.title})]})}),t.jsx("td",{className:"py-3 px-4",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Ph,{className:"text-gray-500"}),t.jsx("span",{children:k.account})]})}),t.jsx("td",{className:"py-3 px-4",children:t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(js,{className:"text-gray-500"}),t.jsx("span",{children:k.email})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(ft,{className:"text-gray-500"}),t.jsx("span",{children:k.phone1})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(ft,{className:"text-gray-500"}),t.jsx("span",{children:k.phone2})]})]})}),t.jsx("td",{className:"py-3 px-4",children:k.department}),t.jsx("td",{className:"py-3 px-4",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(qt,{className:"text-gray-500"}),t.jsx("span",{children:k.assigned})]})}),t.jsx("td",{className:"py-3 px-4",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(dt,{className:"text-gray-500"}),t.jsx("span",{children:k.created})]})}),t.jsx("td",{className:"py-3 px-4 text-center",children:t.jsx("div",{className:"flex justify-center",children:t.jsx("button",{onClick:A=>j(k,A),className:"text-blue-500 hover:text-blue-700",children:t.jsx(ys,{})})})})]},E))})]})}),e&&t.jsx("div",{id:"modalBackdrop",onClick:w,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh]",onClick:k=>k.stopPropagation(),children:[t.jsx("button",{onClick:()=>s(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:t.jsx(jt,{size:22})}),t.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 text-center",children:r?"Edit Contact":"Add New Contact"}),t.jsxs("form",{onSubmit:T,className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Name"}),t.jsx("input",{type:"text",name:"name",value:y.name,onChange:_,placeholder:"Full name",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Email"}),t.jsx("input",{type:"email",name:"email",value:y.email,onChange:_,placeholder:"example@email.com",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),t.jsx("input",{type:"text",name:"workPhone",value:y.workPhone,onChange:_,placeholder:"09 --- --- ---",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Title"}),t.jsx("input",{type:"text",name:"title",value:y.title,onChange:_,placeholder:"Job title",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),t.jsx("input",{type:"text",name:"department",value:y.department,onChange:_,placeholder:"Marketing / Sales",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Phone Number 1"}),t.jsx("input",{type:"text",name:"phone1",value:y.phone1,onChange:_,placeholder:"09 --- --- ---",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Account"}),t.jsx("input",{type:"text",name:"account",value:y.account,onChange:_,placeholder:"Company name",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Assign To"}),t.jsxs("select",{name:"assigned",value:y.assigned,onChange:_,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",children:[t.jsx("option",{value:"",children:"Assign To"}),t.jsx("option",{value:"Smith",children:"Smith"}),t.jsx("option",{value:"Doe",children:"Doe"}),t.jsx("option",{value:"Jane Sales",children:"Jane Sales"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Phone Number 2"}),t.jsx("input",{type:"text",name:"phone2",value:y.phone2,onChange:_,placeholder:"09 --- --- ---",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),t.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 md:col-span-3",children:[t.jsx("label",{className:"text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),t.jsx("textarea",{name:"notes",value:y.notes,onChange:_,placeholder:"Additional details...",rows:3,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 md:col-span-3",children:[t.jsx("button",{type:"button",onClick:()=>s(!1),className:"px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-4 py-2 text-white bg-blue-600 border border-blue-500 rounded hover:bg-blue-700 transition",children:"Save Contact"})]})]})]})})]})}const Jx={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},Js=({label:e,value:s,name:a,className:n=""})=>t.jsxs("div",{className:`flex flex-col ${n}`,children:[t.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),t.jsx("input",{type:"text",name:a,defaultValue:s,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),Vxe=({data:e})=>t.jsxs("div",{className:"space-y-6 p-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsx(Js,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),t.jsx(Js,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),t.jsx(Js,{label:"Industry",name:"industry",value:e.industry})]}),t.jsx(Js,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),t.jsx(Js,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),Wxe=({data:e})=>t.jsxs("div",{className:"space-y-6 p-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(Js,{label:"First Name",name:"firstName",value:e.firstName}),t.jsx(Js,{label:"Last Name",name:"lastName",value:e.lastName}),t.jsx(Js,{label:"Department",name:"department",value:e.department}),t.jsx(Js,{label:"Title",name:"title",value:e.title}),t.jsx(Js,{label:"Work Phone",name:"workPhone",value:e.workPhone}),t.jsx(Js,{label:"Email",name:"email",value:e.email}),t.jsx(Js,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),t.jsx(Js,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),Yxe=({data:e})=>t.jsxs("div",{className:"space-y-6 p-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(Js,{label:"Deal Name",name:"dealName",value:e.dealName}),t.jsxs("div",{className:"flex",children:[t.jsx(Js,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),t.jsx("div",{className:"flex flex-col justify-end ml-1",children:t.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),t.jsx(Js,{label:"Stage",name:"stage",value:e.stage}),t.jsx(Js,{label:"Territory",name:"territory",value:e.territory})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(Js,{label:"Description",name:"description",value:e.description}),t.jsx(Js,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function v6({isOpen:e,onClose:s}){const[a,n]=g.useState(1),r=3;if(!e)return null;const i=()=>{a<r?n(a+1):(s(),n(1))},l=()=>{a>1&&n(a-1)},c=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],d=()=>{switch(a){case 1:return t.jsx(Vxe,{data:Jx});case 2:return t.jsx(Wxe,{data:Jx});case 3:return t.jsx(Yxe,{data:Jx});default:return null}};return t.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[t.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),t.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:Jx.accountName})]}),t.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition",children:t.jsx($y,{className:"w-6 h-6"})})]}),t.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:c.map(m=>t.jsx("button",{onClick:()=>n(m.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${a===m.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:m.name},m.id))}),t.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:d()}),t.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[a>1&&t.jsx("button",{onClick:l,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),a<r?t.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):t.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}const Qxe={name:"Josh Vergara",status:"New",company:"Josh Inc.",title:"CEO",department:"Administration",email:"josh@joshinc.com",territory:"Cavite",assignedTo:"Admin",createdBy:"Admin",workPhone:"09253677323",phone1:"09253677323",phone2:"0907452874",source:"Website",addressLine1:"#1 Pilar Las Pinas",addressLine2:"Suite 400",city:"Las Pinas",state:"Metro Manila",zipCode:"1740",notes:"Interested in our premium plan."};function N6({lead:e=Qxe,onBack:s}){const[a,n]=g.useState(!1);return e?t.jsxs("div",{className:"p-4 sm:p-6 md:p-8 font-inter min-h-screen",children:[t.jsxs("button",{onClick:s,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-4 sm:mb-6 cursor-pointer",children:[t.jsx(gc,{className:"mr-1 w-4 h-4 sm:w-5 sm:h-5"})," Back"]}),t.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-6 sm:mb-8 gap-2 sm:gap-4",children:t.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[t.jsx("h1",{className:"text-xl sm:text-2xl font-semibold",children:e.name}),t.jsx("span",{className:"bg-blue-100 text-blue-700 text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full",children:e.status}),t.jsx("div",{className:"flex flex-wrap items-center ml-0 sm:ml-1",children:t.jsx("button",{onClick:()=>n(!0),className:"bg-green-600 hover:bg-green-700 text-white px-3 sm:px-5 py-1.5 sm:py-2 rounded-lg font-medium text-xs sm:text-sm",children:"Convert"})})]})}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200 mb-6 sm:mb-8",children:[t.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-4 sm:mb-6",children:"Lead Details"}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 sm:gap-6 text-sm text-gray-700",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Name:"}),t.jsx("p",{children:e.name})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Company:"}),t.jsx("p",{children:e.company})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Title:"}),t.jsx("p",{children:e.title})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Department:"}),t.jsx("p",{children:e.department})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Email:"}),t.jsx("p",{children:e.email})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Territory:"}),t.jsx("p",{children:e.territory})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Assign To:"}),t.jsx("p",{children:e.assignedTo})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Created By:"}),t.jsx("p",{children:e.createdBy})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Work Phone:"}),t.jsx("p",{children:e.workPhone})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),t.jsx("p",{children:e.phone1})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),t.jsx("p",{children:e.phone2})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Source:"}),t.jsx("p",{children:e.source})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[t.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200",children:[t.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Address:"}),t.jsxs("p",{className:"text-sm text-gray-700 leading-relaxed",children:[e.addressLine1," ",t.jsx("br",{}),e.addressLine2," ",t.jsx("br",{}),e.city,", ",e.state," ",e.zipCode]})]}),t.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200",children:[t.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),t.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:e.notes||"No notes available."})]})]}),t.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200",children:[t.jsx("h3",{className:"font-semibold text-gray-800 mb-4 sm:mb-6",children:"Related Activities"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 sm:gap-8 text-sm",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold mb-2",children:"Tasks (2)"}),t.jsxs("div",{className:"space-y-1 text-gray-700",children:[t.jsx("p",{children:"Schedule follow-up call"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Due: 2025-09-15 | In Progress"}),t.jsx("p",{children:"Schedule follow-up call"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Due: 2025-09-18 | In Progress"})]}),t.jsx("a",{href:"#",className:"text-blue-600 hover:underline text-xs font-medium mt-2 inline-block",children:"View All Tasks"})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold mb-2",children:"Calls (2)"}),t.jsxs("div",{className:"space-y-1 text-gray-700",children:[t.jsx("p",{children:"Initial discovery call"}),t.jsx("p",{className:"text-xs text-gray-500",children:"2025-09-10 | Completed"}),t.jsx("p",{children:"Initial discovery call"}),t.jsx("p",{className:"text-xs text-gray-500",children:"2025-09-11 | Completed"})]}),t.jsx("a",{href:"#",className:"text-blue-600 hover:underline text-xs font-medium mt-2 inline-block",children:"View All Calls"})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold mb-2",children:"Meeting (0)"}),t.jsx("p",{className:"text-gray-500",children:"No meetings associated."}),t.jsx("a",{href:"#",className:"text-blue-600 hover:underline text-xs font-medium mt-2 inline-block",children:"View All Meetings"})]})]})]}),t.jsx(v6,{isOpen:a,onClose:()=>n(!1)})]}):null}const qxe=pu.all(),uj=qxe.map(e=>({code:`+${e.countryCallingCode}`,name:e.countryCode}));function Xxe(){const[e,s]=g.useState(null),[a,n]=g.useState(!1),[r,i]=g.useState(null),[l,c]=g.useState([{id:1,first_name:"Jane",last_name:"Doe"},{id:2,first_name:"John",last_name:"Smith"},{id:3,first_name:"Mary",last_name:"Johnson"}]),[d,m]=g.useState([{id:1,name:"Joshua Vergara",status:"Qualified",title:"Marketing Director",email:"sarah.williams@innovateco.com",phone1:"9271229484",phone2:"---------",workPhone:"999123-4567",work_ccode:"+63",m1_ccode:"+63",m2_ccode:"+63",territory:"East Coast",department:"Marketing",company:"Innovate Co.",createdBy:"John Appleseed",createdAt:"2025-09-10 09:30",lastUpdated:"2025-09-12 14:45",source:"Website",assignedTo:"Jane Doe",address:"123 Main St, City, Country",notes:"Important client"}]),[f,h]=g.useState({work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:""});g.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const y=A=>s(A),N=()=>s(null),[w,p]=g.useState(""),[v,C]=g.useState("All Accounts"),j=()=>{n(!1),i(null),h({work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:""})},_=A=>{i(A),n(!0),h({work_ccode:A.work_ccode||"+63",work_phone:A.workPhone||"",m1_ccode:A.m1_ccode||"+63",mobile_phone_1:A.phone1||"",m2_ccode:A.m2_ccode||"+63",mobile_phone_2:A.phone2||""})},T=A=>{window.confirm("Are you sure you want to delete this lead?")&&m(d.filter(U=>U.id!==A))},k=A=>{const{name:U,value:B}=A.target;h(X=>({...X,[U]:B}))},E=A=>{A.preventDefault();const U=new FormData(A.target),B=Object.fromEntries(U.entries());B.name=`${B.firstName} ${B.lastName}`,B.assignedTo=l.find(X=>X.id.toString()===B.assignedTo)?.first_name+" "+l.find(X=>X.id.toString()===B.assignedTo)?.last_name,B.work_ccode=f.work_ccode,B.workPhone=f.work_phone,B.m1_ccode=f.m1_ccode,B.phone1=f.mobile_phone_1,B.m2_ccode=f.m2_ccode,B.phone2=f.mobile_phone_2,m(r?d.map(X=>X.id===r.id?{...X,...B}:X):[...d,{...B,id:d.length+1,createdAt:new Date().toISOString(),lastUpdated:new Date().toISOString()}]),j()};return e?t.jsx(N6,{lead:e,onBack:N}):t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-6 gap-3",children:[t.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[t.jsx(Cs,{className:"mr-2 text-blue-600"})," Leads"]}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full sm:w-auto",children:[t.jsxs("button",{className:"flex items-center justify-center border border-tertiary text-tertiary px-4 py-2 gap-2 rounded-md hover:bg-gray-800 hover:text-white transition w-full sm:w-auto",children:[t.jsx(Xr,{})," Download"]}),t.jsx("button",{onClick:()=>n(!0),className:"flex items-center justify-center bg-black text-white px-4 py-2 rounded-md hover:bg-gray-800 transition w-full sm:w-auto",children:" Add Leads"})]})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[t.jsx(yt,{size:20,className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search Leads...",value:w,onChange:A=>p(A.target.value),className:"focus:outline-none text-base w-full"})]}),t.jsx("div",{className:"w-full lg:w-1/4",children:t.jsxs("select",{value:v,onChange:A=>C(A.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[t.jsx("option",{children:"All Leads"}),t.jsx("option",{children:"New"}),t.jsx("option",{children:"Contacted"}),t.jsx("option",{children:"Qualified"}),t.jsx("option",{children:"Converted"}),t.jsx("option",{children:"Lost"})]})})]}),t.jsxs("div",{className:"bg-white shadow-sm overflow-x-auto rounded-md border border-gray-200",children:[t.jsxs("div",{className:"grid grid-cols-9 min-w-[800px] bg-gray-100 font-bold text-gray-600 text-sm px-4 py-3",children:[t.jsx("div",{children:"Name"}),t.jsx("div",{children:"Account"}),t.jsx("div",{children:"Title"}),t.jsx("div",{children:"Department"}),t.jsx("div",{children:"Email"}),t.jsx("div",{children:"Work Phone"}),t.jsx("div",{children:"Assigned To"}),t.jsx("div",{children:"Updated"}),t.jsx("div",{className:"text-center",children:"Actions"})]}),d.map(A=>t.jsxs("div",{className:"grid grid-cols-9 min-w-[800px] px-4 py-3 text-xs hover:bg-gray-100 transition cursor-pointer gap-x-4",onClick:()=>y(A),children:[t.jsx("div",{className:"truncate",children:A.name}),t.jsx("div",{className:"truncate",children:A.company}),t.jsx("div",{className:"truncate",children:A.title}),t.jsx("div",{className:"truncate",children:A.department}),t.jsx("div",{className:"truncate",children:A.email}),t.jsxs("div",{className:"truncate",children:[A.work_ccode," ",A.workPhone]}),t.jsx("div",{className:"truncate",children:A.assignedTo}),t.jsx("div",{className:"truncate",children:A.lastUpdated}),t.jsxs("div",{className:"flex justify-center space-x-2",children:[t.jsx("button",{className:"text-blue-500 hover:text-blue-700",onClick:U=>{U.stopPropagation(),_(A)},children:t.jsx(ys,{})}),t.jsx("button",{className:"text-red-500 hover:text-red-700",onClick:U=>{U.stopPropagation(),T(A.id)},children:t.jsx(Nt,{})})]})]},A.id))]}),a&&t.jsx("div",{id:"modalBackdrop",onClick:j,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-3xl rounded-xl shadow-lg p-5 sm:p-6 relative border border-gray-200 my-6 max-h-[90vh] overflow-y-auto",onClick:A=>A.stopPropagation(),children:[t.jsx("button",{onClick:j,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:t.jsx(jt,{size:20})}),t.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:r?"Edit Lead":"Add New Lead"}),t.jsxs("form",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 text-xs sm:text-sm",onSubmit:E,children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"First Name"}),t.jsx("input",{name:"firstName",type:"text",placeholder:"Joe",defaultValue:r?r.name.split(" ")[0]:"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",required:!0})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Last Name"}),t.jsx("input",{name:"lastName",type:"text",placeholder:"Smith",defaultValue:r?r.name.split(" ")[1]:"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",required:!0})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Company"}),t.jsx("input",{name:"company",type:"text",placeholder:"ABC Company",defaultValue:r?.company||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Title"}),t.jsx("input",{name:"title",type:"text",placeholder:"ABC Agenda",defaultValue:r?.title||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Department"}),t.jsx("input",{name:"department",type:"text",placeholder:"Sales",defaultValue:r?.department||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Email"}),t.jsx("input",{name:"email",type:"text",placeholder:"abc@gmail.com",defaultValue:r?.email||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Work Phone"}),t.jsxs("div",{className:"border border-gray-300 rounded-md flex flex-row w-full gap-1",children:[t.jsx("select",{name:"work_ccode",value:f.work_ccode,onChange:k,className:"outline-none cursor-pointer py-2 border-r border-gray-400 w-15",children:uj.map(A=>t.jsx("option",{value:A.code,children:A.code},A.code))}),t.jsx("input",{type:"text",name:"work_phone",placeholder:"9----------",value:f.work_phone,onChange:k,className:"w-full outline-none"})]})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Mobile Phone 1"}),t.jsxs("div",{className:"border border-gray-300 rounded-md flex flex-row w-full gap-1",children:[t.jsx("select",{name:"m1_ccode",value:f.m1_ccode,onChange:k,className:"outline-none cursor-pointer py-2 border-r border-gray-400 w-15",children:uj.map(A=>t.jsx("option",{value:A.code,children:A.code},A.code))}),t.jsx("input",{type:"text",name:"mobile_phone_1",placeholder:"9----------",value:f.mobile_phone_1,onChange:k,className:"w-full outline-none"})]})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Mobile Phone 2"}),t.jsxs("div",{className:"border border-gray-300 rounded-md flex flex-row w-full gap-1",children:[t.jsx("select",{name:"m2_ccode",value:f.m2_ccode,onChange:k,className:"outline-none cursor-pointer py-2 border-r border-gray-400 w-15",children:uj.map(A=>t.jsx("option",{value:A.code,children:A.code},A.code))}),t.jsx("input",{type:"text",name:"mobile_phone_2",placeholder:"9----------",value:f.mobile_phone_2,onChange:k,className:"w-full outline-none"})]})]}),t.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[t.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Address"}),t.jsx("input",{name:"address",type:"text",placeholder:"Street No., Street Name, City, State/Province, Postal Code",defaultValue:r?.address||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Assign To"}),t.jsxs("select",{name:"assignedTo",defaultValue:l.find(A=>`${A.first_name} ${A.last_name}`===r?.assignedTo)?.id||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",children:[t.jsx("option",{value:"",disabled:!0,children:"Select user"}),l.map(A=>t.jsxs("option",{value:A.id,children:[A.first_name," ",A.last_name]},A.id))]})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Territory"}),t.jsx("input",{type:"text",disabled:!0,name:"territory_id",placeholder:"Assign a user",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Source"}),t.jsxs("select",{className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:r?.source||"",name:"source",children:[t.jsx("option",{value:"",disabled:!0,children:"Select Source"}),t.jsx("option",{value:"Website",children:"Website"}),t.jsx("option",{value:"Referral",children:"Referral"}),t.jsx("option",{value:"Cold call",children:"Cold call"}),t.jsx("option",{value:"Event",children:"Event"}),t.jsx("option",{value:"Other",children:"Other"})]})]}),t.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[t.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Notes"}),t.jsx("textarea",{name:"notes",placeholder:"Additional details...",rows:3,defaultValue:r?.notes||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-2 col-span-1 sm:col-span-2 lg:col-span-3",children:[t.jsx("button",{type:"button",onClick:j,className:"px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition",children:r?"Update Lead":"Save Lead"})]})]})]})})]})}const ND=["To Do","In Progress","Review","Completed"],Zm=10,Kxe=e=>{if(!e)return"";const s=new Date(e);if(Number.isNaN(s.getTime()))return"";const a=s.getTimezoneOffset();return new Date(s.getTime()-a*60*1e3).toISOString().slice(0,16)},wD=e=>{if(!e)return"";const s=new Date(e);return Number.isNaN(s.getTime())?"":s.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},Zxe=e=>{const s=e.subject?.trim()??"",a=e.description?.trim()??"",n=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),e.status&&String(e.status).toUpperCase();let r=null,i=null,l=null,c=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2&&(c=Number(e.relatedTo2)));const d=e.assignedTo?Number(e.assignedTo):null,m=l||c||i||r,f=l?"Contact":c?"Deal":i?"Account":r?"Lead":null;return{title:s,description:a,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:d,notes:n,is_personal:!1,lead_id:r,account_id:i,contact_id:l,deal_id:c,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:m,related_type:f}},Jxe=e=>{const s=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",a=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",n=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",l=()=>e.lead?.id||e.lead_id,c=()=>e.account?.id||e.account_id,d=()=>e.contact?.id||e.contact_id,m=()=>e.deal?.id||e.deal_id,f=()=>e.task_assign_to?.id||e.assigned_to,h=()=>e.lead?.title||e.lead_id,y=()=>e.account?.name||e.account_id,N=()=>i||e.contact_id,w=()=>e.deal?.name||e.deal_id;let p="Lead",v="",C="",j="",_="Lead",T="",k="",E="";const A=c(),U=y(),B=l(),X=h();if(A){p="Account",_="Account",T=U,v=String(A);const $=d(),O=m(),G=N(),K=w();$?(C="Contact",k="Contact",E=G,j=String($)):O&&(k="Deal",C="Deal",E=K,j=String(O))}else B?(_="Lead",T=X,p="Lead",v=String(B)):e.related_type==="Account"&&(p="Account",v=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:e.status||"Not started",dueDate:n,dateAssigned:r,assignedToId:f()||null,assignedToName:s,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:a,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:_,relatedTo1Text:T,relatedType2Text:k,relatedTo2Text:E,subject:e.title,relatedType1:p,relatedTo1:v,relatedType2:C,relatedTo2:j}};function epe(){g.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:s}=zt(),[a,n]=g.useState("board"),[r,i]=g.useState(!1),[l,c]=g.useState(null),[d,m]=g.useState(!1),[f,h]=g.useState([]),[y,N]=g.useState(!0),[w,p]=g.useState(""),[v,C]=g.useState("Filter by Status"),[j,_]=g.useState("Filter by Priority"),[T,k]=g.useState([]),[E,A]=g.useState(1),[U,B]=g.useState(null),[X,$]=g.useState(!1),O=it(),G=Xt(),[K,ae]=g.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""});g.useEffect(()=>{const D=G.state?.openTaskModal,re=G.state?.initialTaskData;D&&(i(!0),re&&ae(oe=>({...oe,...re})),O(G.pathname,{replace:!0,state:{}}))},[G,O]);const R=async()=>{try{const D=await se.get("/users/all");k(Array.isArray(D.data)?D.data:[])}catch(D){console.error("Failed to fetch users:",D),q.error("Failed to fetch users.")}},Z=async()=>{try{N(!0);const D=await se.get("/tasks/all"),oe=(Array.isArray(D.data)?D.data:[]).map(Jxe);oe.sort((je,Re)=>{const Ke=je.createdAt?new Date(je.createdAt):0;return(Re.createdAt?new Date(Re.createdAt):0)-Ke}),console.log("Fetched Tasks:",oe),h(oe),a==="list"&&A(1)}catch(D){console.error("Failed to load tasks:",D),q.error("Failed to load tasks.")}finally{N(!1)}};g.useEffect(()=>{!s&&e&&(R(),Z())},[s,e]);const te=()=>{c(null),ae({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},ge=(D=null,re=!1)=>{c(D),m(re),D?ae({id:D.id,subject:D.title||"",description:D.description||"",priority:D.priority||"Normal",status:D.status||"Not started",dueDate:Kxe(D.dueDate),assignedTo:D.assignedToId?String(D.assignedToId):"",notes:D.notes||"",relatedType1Text:D.relatedType1Text||"",relatedTo1Text:D.relatedTo1Text||"",relatedType2Text:D.relatedType2Text||"",relatedTo2Text:D.relatedTo2Text||"",relatedType1:D.relatedType1||"",relatedTo1:D.relatedTo1||"",relatedType2:D.relatedType2||"",relatedTo2:D.relatedTo2||""}):te(),i(!0)},le=()=>{i(!1),c(null),m(!1),te()},W=async D=>{const re=Zxe(D);try{l&&!d?(await se.put(`/tasks/${l.id}`,re),q.success("Task updated successfully.")):(await se.post("/tasks/create",re),q.success("Task created successfully.")),i(!1),await Z()}catch(oe){console.error("Failed to save task:",oe);const je=oe.response?.data?.detail||"Failed to save task.";q.error(je)}},ee=D=>{D&&B({title:"Delete Task",message:t.jsxs(t.Fragment,{children:["Are you sure you want to delete ",t.jsx("span",{className:"font-semibold",children:D.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:D.id}})},J=async()=>{if(!U?.action){B(null);return}const{action:D}=U;$(!0);try{D.type==="delete"&&(await se.delete(`/tasks/${D.targetId}`),q.success("Task deleted successfully."),await Z())}catch(re){console.error("Task action failed:",re),q.error("Failed to delete task.")}finally{$(!1),B(null)}},he=()=>{X||B(null)},be=g.useMemo(()=>{const D=w.trim().toLowerCase();return[...f].sort((oe,je)=>{const Re=oe.createdAt?new Date(oe.createdAt):0;return(je.createdAt?new Date(je.createdAt):0)-Re}).filter(oe=>{const je=D===""||oe.title?.toLowerCase().includes(D)||oe.description?.toLowerCase().includes(D)||oe.assignedToName?.toLowerCase().includes(D)||oe.createdBy?.toLowerCase().includes(D),Re=v==="Filter by Status"||oe.status===v,Ke=j==="Filter by Priority"||oe.priority===j;return je&&Re&&Ke})},[f,w,v,j]);g.useEffect(()=>{A(1)},[w,v,j,a]),g.useEffect(()=>{if(a==="list"){const D=be.length===0?1:Math.ceil(be.length/Zm);E>D&&A(D)}},[be.length,E,a]);const Le=g.useMemo(()=>{if(a==="board")return be;const D=(E-1)*Zm;return be.slice(D,D+Zm)},[be,E,a]),Me=g.useMemo(()=>{const D=new Date;return[{title:"To Do",value:f.filter(re=>re.status==="Not started").length,icon:ya,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:f.filter(re=>re.status==="In progress").length,icon:Qn,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:f.filter(re=>re.status==="Completed").length,icon:As,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:f.filter(re=>re.dueDate&&new Date(re.dueDate)<D&&re.status!=="Completed").length,icon:oh,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:f.filter(re=>re.priority==="High").length,icon:qi,color:"text-orange-600",bgColor:"bg-orange-100"}]},[f]),ke=D=>D.dueDate&&new Date(D.dueDate)<new Date&&D.status!=="Completed",F=D=>{switch(D.status){case"To Do":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In Progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Review":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},ve=D=>{switch(D){case"To Do":return"bg-blue-100 text-blue-700";case"In Progress":return"bg-purple-100 text-purple-700";case"Review":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},Ce=D=>{switch(D){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(y||s)&&t.jsx(xt,{message:"Loading tasks..."}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[t.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[t.jsx(Qn,{className:"text-blue-600"})," Tasks Board"]}),t.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:t.jsxs("button",{type:"button",onClick:()=>ge(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[t.jsx(Lt,{})," Create Task"]})})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Me.map(D=>t.jsx(tpe,{...D},D.title))}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[t.jsx(yt,{size:20,className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search tasks",value:w,onChange:D=>p(D.target.value),className:"focus:outline-none text-base w-full"})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[t.jsxs("select",{value:v,onChange:D=>C(D.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[t.jsx("option",{children:"Filter by Status"}),ND.map(D=>t.jsx("option",{children:D},D))]}),t.jsxs("select",{value:j,onChange:D=>_(D.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[t.jsx("option",{children:"Filter by Priority"}),t.jsx("option",{children:"High"}),t.jsx("option",{children:"Normal"}),t.jsx("option",{children:"Low"})]})]})]}),t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("button",{type:"button",onClick:()=>n("board"),className:`px-4 py-2 rounded-full text-sm ${a==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),t.jsx("button",{type:"button",onClick:()=>n("list"),className:`px-4 py-2 rounded-full text-sm ${a==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!y&&!s&&be.length===0&&t.jsx("p",{className:"text-center text-gray-500 mt-10 p-4 bg-white shadow rounded-lg",children:"No tasks found matching current filters."}),!y&&!s&&be.length>0&&a==="board"&&t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:ND.map(D=>{const re=Le.filter(oe=>oe.status===D);return t.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative",children:[t.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),t.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[t.jsx("h3",{className:"font-medium text-gray-900",children:D}),t.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:re.length})]}),t.jsx("div",{className:`space-y-3 ${re.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:re.length>0?re.map(oe=>t.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${F(oe)}`,onClick:()=>ge(oe,!0),children:[t.jsxs("div",{className:"text-left flex-1",children:[t.jsx("p",{className:"font-medium text-gray-800 text-sm",children:oe.title}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",oe.priority]}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",oe.assignedToName]}),t.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",t.jsx("span",{className:ke(oe)?"text-red-600":"text-gray-600",children:oe.dateAssigned?wD(oe.dateAssigned):""})]})]}),t.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[t.jsx("button",{type:"button",onClick:je=>{je.stopPropagation(),ge(oe)},className:"text-blue-500 hover:text-blue-700",children:t.jsx(hs,{})}),t.jsx("button",{type:"button",onClick:je=>{je.stopPropagation(),ee(oe)},className:"text-red-500 hover:text-red-700",children:t.jsx(Nt,{})})]})]},oe.id)):t.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No tasks"})})]},D)})}),!y&&!s&&be.length>0&&a==="list"&&t.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full text-sm",children:[t.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),t.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),t.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),t.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),t.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),t.jsx("th",{className:"py-3 px-4 font-medium",children:"Actions"})]})}),t.jsx("tbody",{children:Le.map(D=>t.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",onClick:()=>{console.log("Opening task in view mode:",D),ge(D,!0)},children:[t.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",children:D.title}),t.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${ve(D.status||"To Do")}`,children:D.status||"To Do"})}),t.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Ce(D.priority||"Low")}`,children:D.priority||"Low"})}),t.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:D.assignedToName||"Unassigned"}),t.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${ke(D)?"text-red-600 font-medium":""}`,children:D.dateAssigned?wD(D.dateAssigned):""}),t.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center gap-3",onClick:re=>re.stopPropagation(),children:[t.jsxs("button",{type:"button",onClick:()=>ge(D),className:"text-blue-500 hover:text-blue-700 flex items-center gap-1",children:[t.jsx(hs,{})," Edit"]}),t.jsxs("button",{type:"button",onClick:()=>ee(D),className:"text-red-500 hover:text-red-700 flex items-center gap-1",children:[t.jsx(Nt,{})," Delete"]})]})})]},D.id))})]})})}),!y&&!s&&a==="list"&&t.jsx(Ct,{className:"mt-6",totalItems:be.length,pageSize:Zm,currentPage:be.length===0?0:E,onPrev:()=>A(D=>Math.max(D-1,1)),onNext:()=>A(D=>Math.min(D+1,Math.max(1,Math.ceil(be.length/Zm)||1))),label:"tasks"}),t.jsx(Fh,{isOpen:r,onClose:le,onSave:W,onEdit:()=>m(!1),setFormData:ae,formData:K,isEditing:!d&&!!l,viewMode:d,users:T,currentUser:e,onDelete:ee}),U&&t.jsx(spe,{open:!0,title:U.title,message:U.message,confirmLabel:U.confirmLabel,cancelLabel:U.cancelLabel,variant:U.variant,onConfirm:J,onCancel:he,loading:X})]})}function tpe({icon:e,title:s,value:a,color:n,bgColor:r,onClick:i}){return t.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[t.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${n} mr-4`,children:e?t.jsx(e,{size:22}):null}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"text-xs text-gray-500 uppercase",children:s}),t.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function spe({open:e,title:s,message:a,confirmLabel:n,cancelLabel:r,variant:i,loading:l,onConfirm:c,onCancel:d}){if(!e)return null;const m=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s}),t.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),t.jsx("button",{type:"button",onClick:c,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${m}`,disabled:l,children:l?"Processing...":n})]})]})})}function ape(){g.useEffect(()=>{document.title="Campaign | Sari-Sari CRM"},[]);const[e,s]=g.useState(!1),[a,n]=g.useState(!1),[r,i]=g.useState(null),[l,c]=g.useState(""),[d,m]=g.useState("All Statuses"),[f,h]=g.useState({show:!1,action:null,campaign:null}),[y,N]=g.useState([{id:1,name:"Christmas Promo 2025",subject:" Holiday Discounts Await You!",content:"Spread holiday cheer with exclusive deals this Christmas season!",status:"Scheduled",recipients:1200,scheduleDate:"2025-12-15T10:00",created:"2025-10-20",createdBy:"Marketing Team"},{id:2,name:"New Year Kickoff",subject:"Start 2026 with Big Savings!",content:"Kick off your year right with amazing offers from us!",status:"Draft",recipients:"",scheduleDate:"",created:"2025-10-25",createdBy:"Marketing Team"}]),[w,p]=g.useState({id:null,name:"",subject:"",content:"",status:"Draft",recipients:"",scheduleDate:""}),v=y.filter($=>{const O=d==="All Statuses"||$.status===d,G=$.name.toLowerCase().includes(l.toLowerCase())||$.subject.toLowerCase().includes(l.toLowerCase());return O&&G}),C=()=>{n(!1),p({id:null,name:"",subject:"",content:"",status:"Draft",recipients:"",scheduleDate:""}),s(!0)},j=($,O)=>{O.stopPropagation(),n(!0),p($),s(!0)},_=($,O)=>{O.stopPropagation(),h({show:!0,action:"delete",campaign:$})},T=$=>{$.preventDefault(),h({show:!0,action:a?"edit":"add",campaign:{...w}})},k=()=>{if(f.action==="add"){const $={...f.campaign,id:Date.now(),created:new Date().toLocaleDateString(),createdBy:"Marketing Team"};N(O=>[...O,$]),s(!1)}else f.action==="edit"?(N($=>$.map(O=>O.id===f.campaign.id?{...f.campaign}:O)),s(!1)):f.action==="delete"&&N($=>$.filter(O=>O.id!==f.campaign.id));h({show:!1,action:null,campaign:null})},E=()=>{h({show:!1,action:null,campaign:null})},A=$=>i($),U=()=>i(null),B=$=>{const{name:O,value:G}=$.target;p(K=>({...K,[O]:G}))},X=$=>{$.target.id==="modalBackdrop"&&s(!1)};return r?t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[t.jsxs("button",{onClick:U,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-6 cursor-pointer",children:[t.jsx(gc,{className:"mr-1 w-5 h-5"})," Back"]}),t.jsx("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:r.name}),t.jsx("span",{className:`text-xs sm:text-sm px-2 py-0.5 rounded ${r.status==="Scheduled"?"bg-yellow-100 text-yellow-700":r.status==="Sent"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:r.status})]})}),t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm",children:[t.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Campaign Information"}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm text-gray-700",children:[t.jsxs("p",{children:[t.jsx("span",{className:"font-semibold",children:"Subject:"})," ",t.jsx("br",{}),r.subject]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-semibold",children:"Created By:"})," ",t.jsx("br",{}),r.createdBy]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-semibold",children:"Created On:"})," ",t.jsx("br",{}),r.created]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-semibold",children:"Scheduled Date:"})," ",t.jsx("br",{}),r.scheduleDate?new Date(r.scheduleDate).toLocaleString():""]}),t.jsxs("p",{className:"sm:col-span-2",children:[t.jsx("span",{className:"font-semibold",children:"Email Content:"})," ",t.jsx("br",{}),r.content]}),r.status==="Scheduled"&&t.jsxs("p",{children:[t.jsx("span",{className:"font-semibold",children:"Recipients:"})," ",t.jsx("br",{}),r.recipients]})]})]})]}):t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 space-y-2 sm:space-y-0",children:[t.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[t.jsx(js,{className:"mr-2 text-blue-600"})," Email Campaigns"]}),t.jsx("button",{onClick:C,className:"flex items-center bg-black text-white px-4 py-2 rounded-md hover:bg-gray-800 transition text-sm sm:text-base shadow-sm",children:" New Campaign"})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[t.jsx(yt,{size:20,className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search by campaign name or email subject...",value:l,onChange:$=>c($.target.value),className:"focus:outline-none text-base w-full"})]}),t.jsx("div",{className:"w-full lg:w-1/4",children:t.jsxs("select",{value:d,onChange:$=>m($.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[t.jsx("option",{children:"All Statuses"}),t.jsx("option",{children:"Draft"}),t.jsx("option",{children:"Scheduled"}),t.jsx("option",{children:"Sent"})]})})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-[700px] w-full border border-gray-200 rounded-lg bg-white shadow-sm",children:[t.jsx("thead",{className:"bg-gray-100 text-left text-sm text-gray-600",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4",children:"Campaign Name"}),t.jsx("th",{className:"py-3 px-4",children:"Email Subject"}),t.jsx("th",{className:"py-3 px-4",children:"Status"}),t.jsx("th",{className:"py-3 px-4",children:"Recipients"}),t.jsx("th",{className:"py-3 px-4",children:"Scheduled Date"}),t.jsx("th",{className:"py-3 px-4 text-center",children:"Actions"})]})}),t.jsx("tbody",{className:"text-sm text-gray-700",children:v.map(($,O)=>t.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer transition",onClick:()=>A($),children:[t.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:$.name}),t.jsx("td",{className:"py-3 px-4",children:$.subject}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${$.status==="Scheduled"?"bg-yellow-100 text-yellow-700":$.status==="Sent"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:$.status})}),t.jsx("td",{className:"py-3 px-4",children:$.recipients?`${$.recipients} emails`:""}),t.jsx("td",{className:"py-3 px-4",children:$.scheduleDate?new Date($.scheduleDate).toLocaleString():""}),t.jsx("td",{className:"py-3 px-4 text-center",onClick:G=>G.stopPropagation(),children:t.jsxs("div",{className:"flex justify-center gap-3",children:[t.jsx("button",{onClick:G=>j($,G),className:"text-blue-500 hover:text-blue-700",children:t.jsx(ys,{})}),t.jsx("button",{onClick:G=>_($,G),className:"text-red-500 hover:text-red-700",children:t.jsx(Nt,{})})]})})]},O))})]})}),e&&t.jsx("div",{id:"modalBackdrop",onClick:X,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl shadow-lg p-5 sm:p-6 relative border border-gray-200 my-6 max-h-[90vh] overflow-y-auto",onClick:$=>$.stopPropagation(),children:[t.jsx("button",{onClick:()=>s(!1),className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:t.jsx(jt,{size:20})}),t.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:a?"Edit Campaign":"Add New Campaign"}),t.jsxs("form",{onSubmit:T,className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Campaign Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"name",value:w.name,onChange:B,placeholder:"e.g. Summer Sale Blast",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Email Subject ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"subject",value:w.subject,onChange:B,placeholder:"e.g. Big discounts await you!",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),t.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[t.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Campaign Status ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{name:"status",value:w.status,onChange:B,required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",children:[t.jsx("option",{value:"Draft",children:"Draft"}),t.jsx("option",{value:"Scheduled",children:"Scheduled"}),t.jsx("option",{value:"Sent",children:"Sent"})]})]}),w.status==="Scheduled"&&t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:col-span-2",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Scheduled Date ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"datetime-local",name:"scheduleDate",value:w.scheduleDate,onChange:B,required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Recipient Count ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",name:"recipients",value:w.recipients,onChange:B,placeholder:"e.g. 500",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),t.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[t.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Email Content ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("textarea",{name:"content",rows:4,value:w.content,onChange:B,placeholder:"Write your email message here...",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),t.jsxs("div",{className:"flex justify-end gap-2 sm:col-span-2 pt-3 border-t border-gray-100 mt-2",children:[t.jsx("button",{type:"button",onClick:()=>s(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:"Save Campaign"})]})]})]})}),f.show&&t.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 relative border border-gray-200",children:[t.jsx("button",{onClick:E,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:t.jsx(jt,{size:20})}),t.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:f.action==="delete"?"Confirm Delete":f.action==="edit"?"Confirm Edit":"Confirm Add"}),t.jsx("p",{className:"text-center text-gray-600 mb-6",children:f.action==="delete"?t.jsxs(t.Fragment,{children:["Are you sure you want to delete the campaign"," ",t.jsx("span",{className:"font-semibold",children:f.campaign.name}),"?"]}):f.action==="edit"?t.jsxs(t.Fragment,{children:["Save changes to"," ",t.jsx("span",{className:"font-semibold",children:f.campaign.name}),"?"]}):t.jsxs(t.Fragment,{children:["Add new campaign"," ",t.jsx("span",{className:"font-semibold",children:f.campaign.name}),"?"]})}),t.jsxs("div",{className:"flex justify-center gap-4",children:[t.jsx("button",{onClick:E,className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),t.jsx("button",{onClick:k,className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:"Confirm"})]})]})})]})}const npe=[{id:1,name:"Welcome E-mail",category:"Welcome",subject:"Welcome to {company}!",body:`Hi {name}, Welcome to {company}! We're excited to have you on board.

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed vel quam vitae erat venenatis feugiat. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.

Best regards, The Team`,createdBy:"Angel Angelo",date:"12/10/23"},{id:2,name:"Product Demo Follow-up",category:"Follow-up",subject:"Thanks for checking out our demo",body:`Hi {name}, Thank you for taking the time to view our product demo.
Do you have any questions? Let's schedule a call to discuss how we can help {company}.

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed vel quam vitae erat venenatis feugiat. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.

Best, Sales Team`,createdBy:"Angel Angelo",date:"12/10/23"}],jD={Welcome:"bg-orange-100 text-orange-700","Follow-up":"bg-blue-100 text-blue-700",Newsletter:"bg-green-100 text-green-700",Promotional:"bg-purple-100 text-purple-700",default:"bg-gray-100 text-gray-800"};function rpe(){g.useEffect(()=>{document.title="Templates | Sari-Sari CRM"},[]);const[e,s]=g.useState(npe),[a,n]=g.useState(!1),[r,i]=g.useState(null),[l,c]=g.useState(null),[d,m]=g.useState(""),[f,h]=g.useState("All Categories"),[y,N]=g.useState({name:"",category:"",subject:"",body:""}),[w,p]=g.useState({show:!1,action:null,template:null}),v=()=>{c(null),i(null),n(!1)},C=O=>{N({...y,[O.target.name]:O.target.value})},j=()=>{p({show:!0,action:"add",template:{...y}})},_=O=>{i(O),N({name:O.name,category:O.category,subject:O.subject,body:O.body})},T=()=>{p({show:!0,action:"edit",template:{...y,id:r.id}})},k=O=>{p({show:!0,action:"delete",template:O})},E=O=>{$h.success(`Template "${O.name}" selected for use!`),p({show:!1,action:null,template:null})},A=()=>{const O=w.template;if(w.action==="add"){const G={...O,id:e.length+1,createdBy:"You",date:new Date().toLocaleDateString()};s(K=>[G,...K]),n(!1),N({name:"",category:"",subject:"",body:""})}else w.action==="edit"?(s(G=>G.map(K=>K.id===O.id?{...O}:K).sort((K,ae)=>new Date(ae.date).getTime()-new Date(K.date).getTime())),i(null),N({name:"",category:"",subject:"",body:""}),c(null)):w.action==="delete"&&(s(G=>G.filter(K=>K.id!==O.id)),c(null));p({show:!1,action:null,template:null})},U=()=>{p({show:!1,action:null,template:null})},B=O=>c(O),X=e.filter(O=>O.name.toLowerCase().includes(d.toLowerCase())&&(f==="All Categories"||O.category===f)),$=(O,G=!1)=>t.jsxs("div",{className:"flex flex-col justify-between h-full",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:O.name}),t.jsx("span",{className:`text-xs px-3 py-1 rounded-md ${jD[O.category]||jD.default}`,children:O.category})]}),t.jsx("p",{className:"text-gray-600 mb-2 text-sm",children:O.subject}),t.jsx("div",{className:`text-gray-800 text-sm p-2 rounded-md ${G?"bg-gray-50 max-h-40 overflow-y-auto":"truncate"} whitespace-pre-line`,style:G?{}:{display:"-webkit-box",WebkitLineClamp:7,WebkitBoxOrient:"vertical",overflow:"hidden"},children:O.body})]}),t.jsxs("div",{className:"flex justify-between items-center mt-4",children:[!G&&t.jsxs("button",{onClick:K=>{K.stopPropagation(),E(O)},className:"flex items-center gap-1 bg-black text-white px-3 py-1 rounded-md text-sm hover:bg-gray-900 transition",children:[t.jsx(en,{})," Use Template"]}),G&&t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:K=>{K.stopPropagation(),_(O)},className:"flex items-center gap-1 bg-black text-white px-3 py-1 rounded-md text-sm hover:bg-gray-900 transition",children:[t.jsx(hs,{})," Edit"]}),t.jsxs("button",{onClick:K=>{K.stopPropagation(),k(O)},className:"flex items-center gap-1 bg-red-500 text-white px-3 py-1 rounded-md text-sm hover:bg-red-600 transition",children:[t.jsx(Nt,{})," Delete"]})]}),t.jsxs("p",{className:"text-gray-400 text-xs text-right",children:["Created by: ",O.createdBy," | ",O.date]})]})]});return t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter min-h-screen",children:[t.jsx(Ih,{position:"top-center",reverseOrder:!1}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 space-y-2 sm:space-y-0",children:[t.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[t.jsx(en,{className:"mr-2 text-black"})," Templates"]}),t.jsx("button",{onClick:()=>{n(!0),i(null),N({name:"",category:"",subject:"",body:""})},className:"flex items-center bg-black text-white px-4 py-2 rounded-md hover:bg-gray-800 transition text-sm sm:text-base shadow-sm",children:" New Template"})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[t.jsx(yt,{size:20,className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search by template name...",value:d,onChange:O=>m(O.target.value),className:"focus:outline-none text-base w-full"})]}),t.jsx("div",{className:"w-full lg:w-1/4",children:t.jsxs("select",{value:f,onChange:O=>h(O.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[t.jsx("option",{children:"All Categories"}),t.jsx("option",{children:"Welcome"}),t.jsx("option",{children:"Follow-up"}),t.jsx("option",{children:"Newsletter"}),t.jsx("option",{children:"Promotional"})]})})]}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:X.map(O=>t.jsxs("div",{onClick:()=>B(O),className:"bg-white rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl cursor-pointer flex flex-col justify-between h-80 transition",children:[t.jsx("div",{className:"h-2 w-full rounded-t-2xl bg-black"}),t.jsx("div",{className:"p-4 flex-grow",children:$(O)})]},O.id))}),(a||r)&&t.jsx("div",{onClick:v,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl shadow-lg p-5 sm:p-6 relative border border-gray-200 my-6 max-h-[90vh] overflow-y-auto",onClick:O=>O.stopPropagation(),children:[t.jsx("button",{onClick:v,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:t.jsx(jt,{size:20})}),t.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:r?"Edit Template":"Create New Template"}),t.jsxs("form",{onSubmit:O=>{O.preventDefault(),r?T():j()},className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Template Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"name",value:y.name,onChange:C,placeholder:"e.g. Welcome Email",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Category ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{name:"category",value:y.category,onChange:C,required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none",children:[t.jsx("option",{value:"",children:"Select Category"}),t.jsx("option",{value:"Welcome",children:"Welcome"}),t.jsx("option",{value:"Follow-up",children:"Follow-up"}),t.jsx("option",{value:"Newsletter",children:"Newsletter"}),t.jsx("option",{value:"Promotional",children:"Promotional"})]})]}),t.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[t.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Subject Line ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",name:"subject",value:y.subject,onChange:C,placeholder:"e.g. Welcome to our service!",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none"})]}),t.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[t.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Email Body ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("textarea",{name:"body",rows:4,value:y.body,onChange:C,placeholder:"Write your email message here...",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none resize-none"})]}),t.jsxs("div",{className:"flex justify-end gap-2 sm:col-span-2 pt-3 border-t border-gray-100 mt-2",children:[t.jsx("button",{type:"button",onClick:v,className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:r?"Update Template":"Create Template"})]})]})]})}),l&&!r&&t.jsx("div",{onClick:v,className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"rounded-2xl shadow-lg cursor-default h-80 w-full max-w-md overflow-hidden flex flex-col",onClick:O=>O.stopPropagation(),children:[t.jsx("div",{className:"h-2 w-full rounded-t-2xl bg-black"}),t.jsx("div",{className:"p-4 flex-grow overflow-y-auto bg-gray-50",children:$(l,!0)})]})}),w.show&&t.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 relative border border-gray-200",children:[t.jsx("button",{onClick:U,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:t.jsx(jt,{size:20})}),t.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:w.action==="delete"?"Confirm Delete":w.action==="edit"?"Confirm Update":w.action==="add"?"Confirm Add":"Confirm Use"}),t.jsx("p",{className:"text-center text-gray-600 mb-6",children:w.action==="delete"?t.jsxs(t.Fragment,{children:["Are you sure you want to delete the template"," ",t.jsx("span",{className:"font-semibold",children:w.template.name}),"?"]}):w.action==="edit"?t.jsxs(t.Fragment,{children:["Save changes to"," ",t.jsx("span",{className:"font-semibold",children:w.template.name}),"?"]}):w.action==="add"?t.jsxs(t.Fragment,{children:["Add new template"," ",t.jsx("span",{className:"font-semibold",children:w.template.name}),"?"]}):t.jsxs(t.Fragment,{children:["Use template"," ",t.jsx("span",{className:"font-semibold",children:w.template.name}),"?"]})}),t.jsxs("div",{className:"flex justify-center gap-4",children:[t.jsx("button",{onClick:U,className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),t.jsx("button",{onClick:A,className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:"Confirm"})]})]})})]})}function ipe({toggleSidebar:e}){const[s,a]=g.useState(!1),n=g.useRef(null),r=Xt(),i=it(),{logout:l}=er(),{user:c,fetchUser:d}=zt(),m={"/group-manager/dashboard":"Dashboard","/group-manager/accounts":"Accounts","/group-manager/contacts":"Contacts","/reports":"Reports","/leads":"Leads","/group-manager/Audit":"Audit","/group-manager/targets":"Targets","/group-manager/leads":"Leads","/group-manager/quotes":"Quotes","/group-manager/users":"Users","/group-manager/deals":"Deals"};g.useEffect(()=>{d()},[]),g.useEffect(()=>{const h=()=>{d()};return window.addEventListener("userProfileUpdated",h),()=>{window.removeEventListener("userProfileUpdated",h)}},[d]);const f=m[r.pathname]||"Group Manager Panel";return g.useEffect(()=>{function h(y){n.current&&!n.current.contains(y.target)&&a(!1)}return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),t.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})})}),t.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:f})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("button",{className:"relative text-gray-600 hover:text-gray-800",children:[t.jsx(ch,{className:"text-xl"}),t.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs w-4 h-4 flex items-center justify-center rounded-full",children:"3"})]}),t.jsxs("div",{className:"relative",ref:n,children:[t.jsxs("button",{onClick:()=>a(!s),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[t.jsx("img",{src:c?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 aspect-square object-cover rounded-full"}),t.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[c?.first_name," ",c?.last_name]})]}),s&&t.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4",children:[t.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[t.jsx("img",{src:c?.profile_picture||"https://via.placeholder.com/80",alt:"Profile",className:"w-16 h-16 rounded-full object-cover"}),t.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[c?.first_name," ",c?.middle_name," ",c?.last_name]})]}),t.jsxs("div",{className:"mt-4 space-y-1 px-4 text-left",children:[t.jsx("button",{onClick:()=>{i("/group-manager/users"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Invite Your Team"}),t.jsx("button",{onClick:()=>{i("/group-manager/manage-account"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Manage Your Account"}),t.jsx("div",{className:"border-t border-gray-200 my-2"}),t.jsx("button",{onClick:l,className:"block w-full text-sm text-red-600 hover:text-red-700 hover:bg-gray-50 py-2 rounded text-left",children:"Logout"})]})]})]})]})]})}function lpe(){const[e,s]=g.useState(!0),[a,n]=g.useState(!1),[r,i]=g.useState(!1),[l,c]=g.useState(!1),d=Xt(),{user:m}=zt();g.useEffect(()=>{m&&console.log("Fetched user:",m)},[m]),g.useEffect(()=>{console.log("Simulating user fetch... (no backend)")},[]),g.useEffect(()=>{document.title="Panel | Sari-Sari CRM"},[]);const f="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",h="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition",N=["/group-manager/accounts","/group-manager/contacts","/group-manager/leads","/group-manager/deals","/group-manager/quotes","/group-manager/targets","/group-manager/meetings"].includes(d.pathname);return t.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[t.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${l?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[t.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[t.jsx("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:"Group Manager CRM"}),m&&m.company&&t.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:m.company.company_name})]}),t.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[t.jsxs(mt,{to:"/group-manager/dashboard",className:({isActive:w})=>w?f:h,children:[t.jsx(dh,{className:"text-lg"}),t.jsx("span",{children:"Dashboard"})]}),t.jsxs("div",{children:[t.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!e),children:[t.jsxs("span",{className:"flex items-center gap-2",children:[t.jsx(Es,{className:"text-lg"}),"Sales"]}),t.jsx(Xa,{className:`transition-transform ${e||N?"rotate-180":""}`})]}),(e||N)&&t.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[t.jsxs(mt,{to:"/group-manager/accounts",className:({isActive:w})=>w?f:h,children:[t.jsx(Jt,{})," Accounts"]}),t.jsxs(mt,{to:"/group-manager/contacts",className:({isActive:w})=>w?f:h,children:[t.jsx(qt,{})," Contacts"]}),t.jsxs(mt,{to:"/group-manager/leads",className:({isActive:w})=>w?f:h,children:[t.jsx(Cs,{})," Leads"]}),t.jsxs(mt,{to:"/group-manager/deals",className:({isActive:w})=>w?f:h,children:[t.jsx(Es,{})," Deals"]}),t.jsxs(mt,{to:"/group-manager/quotes",className:({isActive:w})=>w?f:h,children:[t.jsx(en,{})," Quotes"]}),t.jsxs(mt,{to:"/group-manager/targets",className:({isActive:w})=>w?f:h,children:[t.jsx(sn,{})," Targets"]})]})]}),t.jsxs("div",{children:[t.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>n(!a),children:[t.jsxs("span",{className:"flex items-center gap-2",children:[t.jsx(Ta,{className:"text-lg"}),"Activity"]}),t.jsx(Xa,{className:`transition-transform ${a?"rotate-180":""}`})]}),a&&t.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[t.jsxs(mt,{to:"/group-manager/tasks",className:({isActive:w})=>w?f:h,children:[t.jsx(ts,{})," Tasks"]}),t.jsxs(mt,{to:"/group-manager/meetings",className:({isActive:w})=>w?f:h,children:[t.jsx(dt,{})," Meetings"]}),t.jsxs(mt,{to:"/group-manager/calls",className:({isActive:w})=>w?f:h,children:[t.jsx(Ea,{})," Calls"]}),t.jsxs(mt,{to:"/group-manager/audit",className:({isActive:w})=>w?f:h,children:[t.jsx(Ta,{})," Audit"]})]})]}),t.jsxs("div",{children:[t.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!r),children:[t.jsxs("span",{className:"flex items-center gap-2",children:[t.jsx(f1,{className:"text-lg"}),"User Management"]}),t.jsx(Xa,{className:`transition-transform ${r?"rotate-180":""}`})]}),r&&t.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[t.jsxs(mt,{to:"/group-manager/users",className:({isActive:w})=>w?f:h,children:[t.jsx(Jt,{})," Users"]}),t.jsxs(mt,{to:"/group-manager/manage-account",className:({isActive:w})=>w?f:h,children:[t.jsx(qt,{})," Manage Account"]})]})]})]}),t.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),l&&t.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>c(!1)}),t.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[t.jsx(ipe,{toggleSidebar:()=>c(!l)}),t.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:t.jsx(fu,{})})]})]})}const ope=e=>t.jsx(yt,{...e}),cpe=e=>t.jsx(vr,{...e}),dpe=e=>t.jsx(g1,{...e}),w6=e=>t.jsx(ya,{...e}),upe=e=>t.jsx(N0,{...e}),mpe=e=>t.jsx(c1,{...e}),fpe=e=>t.jsx(dt,{...e}),hpe=e=>t.jsx(ft,{...e}),gpe=e=>t.jsx(u1,{...e}),j6=e=>t.jsx(d1,{...e}),C6=e=>t.jsx(Jt,{...e}),S6=e=>t.jsx(qt,{...e}),xpe=e=>t.jsx(Cs,{...e}),ppe=e=>t.jsx(Es,{...e}),ype=e=>t.jsx(en,{...e}),bpe=e=>t.jsx(sn,{...e}),vpe=e=>t.jsx(As,{...e}),Npe=e=>t.jsx(dt,{...e}),wpe=e=>t.jsx(Ea,{...e}),jpe=e=>t.jsx(uh,{...e}),Cpe=e=>t.jsx(Ta,{...e}),_6=e=>`P ${new Intl.NumberFormat("en-PH",{minimumFractionDigits:0}).format(e)}`,Spe=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},_pe=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},Tpe=e=>{switch(e){case"call":return{Icon:hpe,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:gpe,color:"text-green-600",bgColor:"bg-green-100"};case"meeting":default:return{Icon:fpe,color:"text-blue-500",bgColor:"bg-blue-100"}}},Epe=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},Ape=({searchQuery:e,onSearchChange:s,searchResults:a,onSearchResultClick:n})=>{const r=it(),[i,l]=g.useState(!1),c=g.useRef(null),d=[{icon:C6,label:"Account"},{icon:S6,label:"Contact"},{icon:xpe,label:"Leads"},{icon:ppe,label:"Deals"},{icon:ype,label:"Quotes"},{icon:bpe,label:"Target"},{icon:vpe,label:"Task"},{icon:Npe,label:"Meeting"},{icon:wpe,label:"Call"},{icon:Cpe,label:"Audit"},{icon:jpe,label:"Territory"}];g.useEffect(()=>{const h=y=>{c.current&&!c.current.contains(y.target)&&l(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]);const m=h=>{s(h.target.value),l(h.target.value.trim().length>0)},f=h=>{n&&n(h),l(!1)};return t.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[t.jsxs("div",{className:"w-full flex justify-center relative",ref:c,children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-lg lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[t.jsx(ope,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),t.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:m,onFocus:()=>e.trim().length>0&&l(!0)})]}),i&&Array.isArray(a)&&a.length>0&&t.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:a.map((h,y)=>t.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>f(h),children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:h.name}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:h.type}),h.details&&t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:h.details})]}),t.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${h.type==="Lead"?"bg-blue-100 text-blue-600":h.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:h.type})]})},y))}),i&&e.trim().length>0&&(!Array.isArray(a)||a.length===0)&&t.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 p-4 text-center text-sm text-gray-500",children:"No results found"})]}),t.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:t.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:d.map((h,y)=>t.jsxs("div",{className:"relative flex-shrink-0 group",children:[t.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":h.label,onClick:()=>{switch(h.label){case"Account":r("/group-manager/accounts");break;case"Contact":r("/group-manager/contacts");break;case"Leads":r("/group-manager/leads");break;case"Deals":r("/group-manager/deals");break;case"Quotes":r("/group-manager/quotes");break;case"Target":r("/group-manager/targets");break;case"Task":r("/group-manager/tasks");break;case"Meeting":r("/group-manager/meetings");break;case"Call":r("/group-manager/calls");break;case"Audit":r("/group-manager/audit");break;case"Territory":r("/group-manager/territory");break;default:console.log(`Clicked ${h.label}`)}},children:t.jsx(h.icon,{size:24,className:"lg:scale-95"})}),t.jsx("span",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-1 bg-gray-700 text-white text-xs font-medium rounded-lg whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition duration-200 pointer-events-none z-20 shadow-md",children:h.label})]},y))})})]})},Lpe=({action:e,description:s,entity_type:a,entity_name:n,timestamp:r})=>{const i=it(),l=f=>{if(!f)return"Unknown";const h=new Date(f),N=new Date-h,w=Math.floor(N/6e4),p=Math.floor(N/36e5),v=Math.floor(N/864e5);return w<1?"Just now":w<60?`${w} min ago`:p<24?`${p} hour${p>1?"s":""} ago`:v<7?`${v} day${v>1?"s":""} ago`:h.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},c=e||s||"Action",d=n||a||"System",m=l(r);return t.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/group-manager/audit"),children:[t.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[c," ",t.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",d,")"]})]}),t.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:m})]})},kpe=({logs:e,loading:s})=>{const a=it();return t.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),t.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/group-manager/audit"),children:[t.jsx("span",{children:"See All"}),t.jsx(j6,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?t.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((n,r)=>t.jsx(Lpe,{...n},r))}):t.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},Dpe=({icon:e,title:s,value:a,color:n,bgColor:r,loading:i,onClick:l})=>t.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l||(()=>console.log(`Clicked metric card: ${s}`)),children:[t.jsx("div",{className:`p-3 rounded-full ${r} ${n} mr-4`,children:t.jsx(e,{size:20})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:s}),t.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a||0})]})]}),Mpe=({revenueData:e,loading:s})=>{const a=it(),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=g.useMemo(()=>{if(console.log("=== RevenueChart calculateRevenueData ==="),console.log("revenueData:",e),console.log("revenueData length:",e?.length),!e||e.length===0){console.log("No revenue data, returning empty chart");const v=new Date;v.getFullYear();const C=v.getMonth(),j=[],_=[];for(let T=0;T<=C;T++)j.push(n[T]),_.push(0);return{labels:j,revenues:_,maxRevenue:0}}const c={};let d=0,m=0;console.log("Processing deals:",e.length),e.forEach((v,C)=>{const j=v.close_date||v.closeDate||null,_=j&&j!==null&&j!=="",T=v.stage||"",k=T.toUpperCase()==="CLOSED_WON"||T==="CLOSED_WON";let E=v.amount;E&&typeof E=="object"&&E.toString?E=parseFloat(E.toString()):E=parseFloat(E)||0;const A=E>0;if(k&&(m++,console.log(`Deal ${C+1} (CLOSED_WON):`,{id:v.id,name:v.name,stage:T,close_date:j,close_date_type:typeof j,amount:E,amount_type:typeof v.amount,hasCloseDate:_,hasAmount:A,willBeAdded:_&&A,allFields:Object.keys(v)})),_&&k&&A)try{let U=new Date(j);if(isNaN(U.getTime())){const B=String(j).split("T")[0];U=new Date(B+"T00:00:00")}if(isNaN(U.getTime()))console.warn(` Invalid date for deal ${v.id}:`,j,"Type:",typeof j);else{const B=U.getFullYear(),X=U.getMonth()+1,$=`${B}-${String(X).padStart(2,"0")}`;c[$]||(c[$]=0),c[$]+=E,d++,console.log(` Added deal ${v.id} to month ${$}: ${E}, total: ${c[$]}`),console.log(`  - Close date: ${j} -> Parsed: ${U.toISOString()} -> Month: ${$} (Year: ${B}, Month: ${X})`)}}catch(U){console.error("Error parsing deal date:",j,U)}else k&&console.warn(` Deal ${v.id} is CLOSED_WON but missing data:`,{hasCloseDate:_,hasAmount:A,closeDate:j,amount:E,originalAmount:v.amount})}),console.log("Summary:",{totalDeals:e.length,closedWonDeals:m,validDealsForGraph:d,monthlyRevenue:c});const f=Object.keys(c).map(v=>parseInt(v.split("-")[0])),h=f.length>0?[...new Set(f)].sort():[],y=new Date().getFullYear();new Date().getMonth();const N=[],w=[];for(let v=0;v<12;v++){const C=`${y}-${String(v+1).padStart(2,"0")}`;N.push(n[v]);const j=c[C]||0;w.push(j),j>0&&console.log(`Month ${n[v]} (${C}): ${j}`)}if(h.length>0){const v=Math.max(...h);if(v>y)for(let C=y+1;C<=v;C++)for(let j=0;j<12;j++){const _=`${C}-${String(j+1).padStart(2,"0")}`,T=c[_]||0;N.push(`${n[j]} ${C}`),w.push(T),T>0&&console.log(`Month ${n[j]} ${C} (${_}): ${T}`)}}const p=Math.max(...w,1);return console.log("Final chart data:",{labels:N,revenues:w,maxRevenue:p,hasData:w.some(v=>v>0)}),{labels:N,revenues:w,maxRevenue:p}},[e]),i=r.labels,l=r.revenues;return console.log("=== FINAL CHART DATA ==="),console.log("X Axis (Months):",i),console.log("Y Axis (Revenue):",l),console.log("Has any revenue > 0:",l.some(c=>c>0)),console.log("All revenue values:",l),console.log("Max revenue:",r.maxRevenue),t.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),t.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/group-manager/deals"),children:[t.jsx("span",{children:"See All"}),t.jsx(j6,{size:14,className:"transform -rotate-45"})]})]}),t.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:t.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i&&i.length>0&&l&&l.length>0?t.jsx(U2,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:c=>c>=1e3?`${(c/1e3).toFixed(0)}k`:c.toString()}],series:[{data:l,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%"}}):t.jsxs("div",{className:"text-center text-gray-500",children:[t.jsx("p",{className:"text-sm",children:"No revenue data available"}),t.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},Ppe=({pipelineData:e,loading:s})=>{const a=it(),n=l=>{const c=(l||"").toUpperCase(),d={PROSPECTING:{name:"Prospecting",color:"bg-blue-500"},QUALIFICATION:{name:"Qualification",color:"bg-yellow-500"},PROPOSAL:{name:"Proposal",color:"bg-orange-500"},NEGOTIATION:{name:"Negotiation",color:"bg-purple-500"},CLOSED_WON:{name:"Closed Won",color:"bg-green-500"},CLOSED_LOST:{name:"Closed Lost",color:"bg-red-500"}};if(d[c])return d[c];const m=["bg-blue-500","bg-yellow-500","bg-orange-500","bg-purple-500","bg-green-500","bg-red-500"],f=Math.abs(c.split("").reduce((h,y)=>h+y.charCodeAt(0),0))%m.length;return{name:l||"Unknown",color:m[f]}},i=(()=>{if(!e||e.length===0)return["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"].map(h=>{const y=n(h);return{stage:y.name,value:0,deals:0,color:y.color}});const l={};e.forEach(f=>{const h=f.stage||"PROSPECTING";l[h]||(l[h]={deals:0,value:0}),l[h].deals+=1,l[h].value+=parseFloat(f.amount||0)});const c=Math.max(...Object.values(l).map(f=>f.value),1),d=["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"],m=[];return d.forEach(f=>{const h=n(f),y=l[f]||{deals:0,value:0};m.push({stage:h.name,value:y.value,deals:y.deals,color:h.color,percentage:c>0?y.value/c*100:0})}),m})();return t.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Sales Pipeline"}),t.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:()=>a("/group-manager/deals"),children:"See All"})]}),t.jsx("div",{className:"space-y-4 flex-grow",children:i.slice(0,6).map(l=>t.jsxs("div",{className:"flex flex-col cursor-pointer hover:opacity-85 transition duration-150",onClick:()=>a("/group-manager/deals"),children:[t.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[t.jsx("span",{className:"font-medium text-gray-700",children:l.stage}),t.jsx("span",{className:"font-semibold text-gray-800",children:_6(l.value)})]}),t.jsx("div",{className:"relative h-2 rounded-full bg-gray-200",children:t.jsx("div",{className:`absolute top-0 left-0 h-full rounded-full ${l.color}`,style:{width:`${Math.min(l.percentage,100)}%`}})}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[l.deals," Deals"]})]},l.stage))})]})},mj=({title:e,items:s,children:a,onSeeAll:n})=>{const r=it(),i=()=>{if(n)n();else{const l={"Latest Leads":"/group-manager/leads","Latest Deals":"/group-manager/deals","Upcoming Activities":"/group-manager/tasks"};l[e]&&r(l[e])}};return t.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),t.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),a]})},Ope=({first_name:e,last_name:s,company_name:a,source:n,created_at:r,id:i})=>{const l=it(),{text:c,bg:d}=_pe(n||"Website"),m=N=>{if(!N)return"Unknown";const w=new Date(N),v=new Date-w,C=Math.floor(v/6e4),j=Math.floor(v/36e5),_=Math.floor(v/864e5);return C<60?`${C} min ago`:j<24?w.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):_<7?w.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):w.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},f=`${e||""} ${s||""}`.trim()||"Unknown",h=a||"Unknown Company",y=m(r);return t.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&l(`/group-manager/leads/${i}`),children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-gray-800",children:f}),t.jsx("p",{className:"text-xs text-gray-500",children:h})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-xs text-gray-400",children:y}),t.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${c} ${d} px-2 py-0.5 rounded-full`,children:n||"Website"})]})]})})},Ipe=({name:e,amount:s,account:a,stage:n,created_at:r,id:i,previousAmount:l})=>{const c=it(),m={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[n]||n||"Unknown",{text:f,bg:h}=Spe(m),y=parseFloat(s||0),N=l?y>=l?"up":"down":"up",w=N==="up"?upe:mpe,p=N==="up"?"text-green-400":"text-red-400",v=a?.name||"Unknown Company";return t.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&c(`/group-manager/deals/info?id=${i}`),children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{className:"flex-shrink",children:[t.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),t.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:v}),t.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${f} ${h} px-2 py-0.5 rounded-full`,children:m})]}),t.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[t.jsx("p",{className:"text-md font-bold text-gray-800",children:_6(y)}),t.jsx(w,{size:16,className:`${p} mt-1`})]})]})})},$pe=({type:e,title:s,assignedTo:a,dueDate:n,scheduledDate:r,priority:i,id:l,activityType:c,fullData:d})=>{const m=it(),h=c||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:y,color:N,bgColor:w}=Tpe(h),{text:p,bg:v}=Epe(i||"MEDIUM"),_=(E=>{if(!E)return"No date set";const A=new Date(E),B=A-new Date,X=Math.floor(B/864e5);return X===0?`Today, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:X===1?`Tomorrow, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:X===-1?`Yesterday, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:A.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(n||r),T=a||"Unassigned",k=()=>{l&&(d?h==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(d)),m(`/group-manager/calls/info?id=${l}`)):h==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(d)),m(`/group-manager/meetings/info?id=${l}`)):m("/group-manager/tasks"):m(h==="call"?`/group-manager/calls/info?id=${l}`:h==="meeting"?`/group-manager/meetings/info?id=${l}`:"/group-manager/tasks"))};return t.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:k,children:[t.jsx("div",{className:`p-2 rounded-lg ${w} mr-3 flex-shrink-0 mt-1`,children:t.jsx(y,{size:20,className:`${N}`})}),t.jsxs("div",{className:"flex-grow",children:[t.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[t.jsx("span",{className:"text-xl leading-none mr-2",children:""}),s||"Untitled Activity"]}),t.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[t.jsxs("p",{className:"flex items-center",children:[t.jsx(w6,{size:14,className:"mr-1.5 text-gray-400"}),_]}),t.jsxs("p",{className:"flex items-center",children:[t.jsx(S6,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",T]})]})]}),t.jsx("span",{className:`inline-block text-xs font-medium ${p} ${v} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},Rpe=()=>{const e=it(),{user:s}=zt(),[a,n]=g.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0}),[r,i]=g.useState([]),[l,c]=g.useState([]),[d,m]=g.useState([]),[f,h]=g.useState([]),[y,N]=g.useState([]),[w,p]=g.useState([]),[v,C]=g.useState(!0),[j,_]=g.useState(null),[T,k]=g.useState(""),[E,A]=g.useState([]),[U,B]=g.useState([]),[X,$]=g.useState([]),[O,G]=g.useState(new Date),K=g.useRef(null),ae=g.useRef(null),R=g.useMemo(()=>{try{if(!T.trim())return[];const le=T.toLowerCase().trim(),W=[];return Array.isArray(E)&&E.forEach(ee=>{const J=`${ee.first_name||""} ${ee.last_name||""}`.trim().toLowerCase(),he=(ee.company_name||"").toLowerCase(),be=(ee.email||"").toLowerCase(),Le=(ee.phone||"").toLowerCase();(J.includes(le)||he.includes(le)||be.includes(le)||Le.includes(le))&&W.push({id:ee.id,name:`${ee.first_name||""} ${ee.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:ee.company_name||"No company",route:`/group-manager/leads/${ee.id}`})}),Array.isArray(U)&&U.forEach(ee=>{const J=(ee.name||"").toLowerCase(),he=(ee.account?.name||"").toLowerCase(),be=(ee.description||"").toLowerCase();(J.includes(le)||he.includes(le)||be.includes(le))&&W.push({id:ee.id,name:ee.name||"Unnamed Deal",type:"Deal",details:ee.account?.name||"No account",route:`/group-manager/deals/info?id=${ee.id}`})}),Array.isArray(X)&&X.forEach(ee=>{const J=(ee.name||"").toLowerCase(),he=(ee.email||"").toLowerCase(),be=(ee.phone||"").toLowerCase(),Le=(ee.website||"").toLowerCase();(J.includes(le)||he.includes(le)||be.includes(le)||Le.includes(le))&&W.push({id:ee.id,name:ee.name||"Unnamed Account",type:"Account",details:ee.email||ee.phone||"No contact info",route:"/group-manager/accounts"})}),W.slice(0,10)}catch(le){return console.error("Error in search:",le),[]}},[T,E,U,X]),Z=le=>{le.route&&(e(le.route),k(""))},te=g.useCallback(async()=>{C(!0),_(null);try{const[le,W,ee,J,he,be,Le]=await Promise.all([se.get("/leads/group-manager/getLeads").catch(z=>(console.error("Error fetching leads:",z),{data:[]})),se.get("/deals/group-manager/fetch-all").catch(z=>(console.error("Error fetching deals:",z),{data:[]})),se.get("/accounts/group-manager/fetch-all").catch(z=>(console.error("Error fetching accounts:",z),{data:[]})),se.get("/tasks/all").catch(z=>(console.error("Error fetching tasks:",z),{data:[]})),se.get("/meetings/group-manager/fetch-all").catch(z=>(console.error("Error fetching meetings:",z),{data:[]})),se.get("/calls/group-manager/fetch-all").catch(z=>(console.error("Error fetching calls:",z),{data:[]})),se.get("/logs/read-all").catch(z=>(console.error("Error fetching logs:",z),{data:[]}))]),Me=Array.isArray(le.data)?le.data:[],ke=Array.isArray(W.data)?W.data:[],F=Array.isArray(ee.data)?ee.data:[],ve=Array.isArray(J.data)?J.data:[],Ce=Array.isArray(he.data)?he.data:[],D=Array.isArray(be.data)?be.data:[],re=Array.isArray(Le.data)?Le.data:[];console.log("=== RAW DEALS API RESPONSE ==="),console.log("Deals count:",ke.length),ke.length>0&&(console.log("First deal sample (raw):",JSON.stringify(ke[0],null,2)),console.log("First deal keys:",Object.keys(ke[0]))),A(Me),B(ke),$(F);const oe=Me.filter(z=>z.status&&!["Lost","Converted"].includes(z.status)).length,je=ve.filter(z=>!z.dueDate||z.status==="Completed"?!1:new Date(z.dueDate)<new Date).length;n({activeLeads:oe,totalDeals:ke.length,activeAccounts:F.length,overdueTasks:je});const Re=[...Me].sort((z,ie)=>new Date(ie.created_at||0)-new Date(z.created_at||0)).slice(0,5);i(Re);const Ke=[...ke].sort((z,ie)=>new Date(ie.created_at||0)-new Date(z.created_at||0)).slice(0,5);c(Ke);const et=new Date,qe=[];D.forEach(z=>{const ie=z.due_date||z.call_time,ue=(z.status||"").toUpperCase();if(ie){const M=new Date(ie);ue==="COMPLETED"||ue==="MISSED"||ue==="NOT_HELD"||ue==="HELD"||qe.push({type:"Call",title:z.subject||"Untitled Call",assignedTo:z.assigned_to||(z.call_assign_to?`${z.call_assign_to.first_name||""} ${z.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:ie,priority:(z.priority||"MEDIUM").toUpperCase(),id:z.id,activityType:"call",fullData:z})}}),Ce.forEach(z=>{const ie=z.dueDate||z.start_time,ue=(z.status||"").toUpperCase();if(ie){const M=new Date(ie);ue==="COMPLETED"||ue==="CANCELLED"||ue==="DONE"||qe.push({type:"Meeting",title:z.subject||z.activity||"Untitled Meeting",assignedTo:z.assignedTo||(z.meet_assign_to?`${z.meet_assign_to.first_name||""} ${z.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:ie,priority:(z.priority||"MEDIUM").toUpperCase(),id:z.id,activityType:"meeting",fullData:z})}});const Ze={HIGH:1,MEDIUM:2,LOW:3},we=qe.sort((z,ie)=>{const ue=Ze[z.priority]||3,M=Ze[ie.priority]||3;if(ue!==M)return ue-M;const xe=new Date(z.scheduledDate||0),ne=new Date(ie.scheduledDate||0);return xe-ne}).slice(0,5);m(we),h(ke),console.log("=== ALL DEALS DATA ==="),console.log("Total deals:",ke.length);const V=ke.filter(z=>(z.stage||"").toUpperCase()==="CLOSED_WON");console.log("CLOSED_WON deals:",V.length),V.length>0?(console.log("=== CLOSED_WON DEALS DETAILS ==="),V.forEach((z,ie)=>{let ue=z.amount;ue&&typeof ue=="object"?ue.toString?ue=parseFloat(ue.toString()):ue=parseFloat(ue):ue=parseFloat(ue)||0,console.log(`Deal ${ie+1}:`,{id:z.id,name:z.name,stage:z.stage,stage_upper:(z.stage||"").toUpperCase(),amount:z.amount,amount_parsed:ue,amount_type:typeof z.amount,close_date:z.close_date,close_date_type:typeof z.close_date,close_date_value:z.close_date?new Date(z.close_date):null,has_close_date:!!z.close_date,has_amount:ue>0,all_keys:Object.keys(z),full_deal:z})})):(console.log(" No CLOSED_WON deals found!"),console.log("All deal stages:",ke.map(z=>z.stage))),p(ke);const pe=[...re].sort((z,ie)=>new Date(ie.timestamp||0)-new Date(z.timestamp||0));N(pe)}catch(le){console.error("Error fetching dashboard data:",le),_("Failed to load dashboard data. Please refresh the page.")}finally{C(!1)}},[]);g.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",console.log("TManagerDashboard mounted, fetching data..."),te(),K.current=setInterval(()=>{console.log("Auto-refreshing dashboard data..."),te(),G(new Date)},3e4),()=>{K.current&&clearInterval(K.current)}),[te]),g.useEffect(()=>{if(!s||!s.id)return;let le=0;const W=3;let ee=null;const J=()=>{const he=window.location.protocol==="https:"?"wss:":"ws:",be=window.location.hostname==="localhost"?"localhost:8000":window.location.host,Le=`${he}//${be}/ws/notifications?user_id=${s.id}`;try{const Me=new WebSocket(Le);ae.current=Me,Me.onopen=()=>{console.log(" WebSocket connected for dashboard updates"),le=0},Me.onmessage=ke=>{try{const F=JSON.parse(ke.data);console.log(" Real-time notification received:",F),F.event&&["new_task","task_updated","new_lead","lead_updated","new_deal","deal_updated","new_account","account_updated","new_meeting","meeting_updated","new_call","call_updated"].includes(F.event)&&(console.log(" Refreshing dashboard due to:",F.event),te(),G(new Date))}catch(F){console.error("Error parsing WebSocket message:",F)}},Me.onerror=ke=>{le===0&&console.warn(" WebSocket connection unavailable (this is optional)")},Me.onclose=()=>{le<W&&(le++,ee=setTimeout(()=>{s&&s.id&&J()},5e3))}}catch{console.warn(" WebSocket not available (optional feature)")}};return J(),()=>{ee&&clearTimeout(ee),ae.current&&(ae.current.close(),ae.current=null)}},[s,te]);const ge=[{icon:C6,title:"Active Leads",value:a.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/group-manager/leads")},{icon:cpe,title:"Total Deals",value:a.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/group-manager/deals")},{icon:dpe,title:"Active Account",value:a.activeAccounts,color:"text-green-600",bgColor:"bg-green-50",onClick:()=>e("/group-manager/accounts")},{icon:w6,title:"Overdue Tasks",value:a.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/group-manager/tasks")}];return console.log("TManagerDashboard rendering, loading:",v,"error:",j),t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[v&&t.jsx(xt,{}),t.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[j&&t.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:t.jsx("p",{className:"font-medium",children:j})}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 mb-8",children:[t.jsxs("div",{className:"lg:col-span-9 flex flex-col space-y-4",children:[t.jsx(Ape,{searchQuery:T,onSearchChange:k,searchResults:R,onSearchResultClick:Z}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:ge.map(le=>t.jsx(Dpe,{...le,loading:v},le.title))})]}),t.jsx("div",{className:"lg:col-span-3",children:t.jsx(kpe,{logs:y,loading:v})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[t.jsx("div",{className:"lg:col-span-2",children:t.jsx(Mpe,{revenueData:w,loading:v})}),t.jsx("div",{children:t.jsx(Ppe,{pipelineData:f,loading:v})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsx(mj,{title:"Latest Leads",children:r.length>0?r.map((le,W)=>t.jsx(Ope,{...le},le.id||W)):t.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),t.jsx(mj,{title:"Latest Deals",children:v?t.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mb-2"}),t.jsx("div",{className:"text-sm text-gray-500",children:"Loading deals..."})]}):l.length>0?l.map((le,W)=>t.jsx(Ipe,{...le},le.id||W)):t.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),t.jsx(mj,{title:"Upcoming Activities",children:d.length>0?d.map((le,W)=>t.jsx($pe,{...le},le.id||W)):t.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})},fj=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Active"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Former"}],hj={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"PROSPECT",territory_id:"",assigned_to:""},Upe=["MANAGER"],yn=e=>e?e.toUpperCase():"",gj=e=>e?e.toString().toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()):"--",zpe=e=>{switch(yn(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},Fpe=e=>{switch(yn(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}},ko=10;function Bpe(){const e=it();g.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[s,a]=g.useState(!1),[n,r]=g.useState(!1),[i,l]=g.useState(!1),[c,d]=g.useState(null),[m,f]=g.useState(null),[h,y]=g.useState(hj),[N,w]=g.useState(null),[p,v]=g.useState([]),[C,j]=g.useState(!1),[_,T]=g.useState([]),[k,E]=g.useState([]),[A,U]=g.useState("Filter by Status"),[B,X]=g.useState(""),[$,O]=g.useState(null),[G,K]=g.useState(!1),[ae,R]=g.useState(1),[Z,te]=g.useState("Overview"),[ge,le]=g.useState(""),[W,ee]=g.useState(!1),J=g.useMemo(()=>_.filter(Pe=>Upe.includes(Pe.role?.toUpperCase())),[_]),he=g.useCallback(async(Pe=null)=>{j(!0);try{const lt=await se.get("/accounts/admin/fetch-all"),I=[...Array.isArray(lt.data)?lt.data:[]].sort((Ne,H)=>{const de=Ne?.created_at||Ne?.updated_at||0,_e=H?.created_at||H?.updated_at||0;return new Date(_e)-new Date(de)});if(v(I),console.log("Fetch from backend: ",lt.data),Pe){const Ne=I.find(H=>H.id===Pe);w(Ne||null)}}catch(lt){console.error(lt),v([]),lt.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch accounts. Please try again later.")}finally{j(!1)}},[w]),be=g.useCallback(async()=>{try{const Pe=await se.get("/users/all");T(Array.isArray(Pe.data)?Pe.data:[])}catch(Pe){console.error(Pe),Pe.response?.status===403&&q.warn("Unable to load users for assignment (permission denied).")}},[]),Le=g.useCallback(async()=>{try{const Pe=await se.get("/territories/fetch");E(Array.isArray(Pe.data)?Pe.data:[])}catch(Pe){console.error(Pe),Pe.response?.status===403&&q.warn("Unable to load territories (permission denied).")}},[]);g.useEffect(()=>{he(),be(),Le()},[he,be,Le]),g.useEffect(()=>{N&&le(yn(N.status)||"PROSPECT")},[N]);const Me=p.length,ke=g.useMemo(()=>p.filter(Pe=>Pe.status?.toLowerCase()==="customer").length,[p]),F=g.useMemo(()=>p.filter(Pe=>Pe.status?.toLowerCase()==="prospect").length,[p]),ve=g.useMemo(()=>p.filter(Pe=>Pe.status?.toLowerCase()==="partner").length,[p]),Ce=g.useMemo(()=>p.filter(Pe=>Pe.status?.toLowerCase()==="active").length,[p]),D=g.useMemo(()=>p.filter(Pe=>Pe.status?.toLowerCase()==="inactive").length,[p]),re=g.useMemo(()=>p.filter(Pe=>Pe.status?.toLowerCase()==="former").length,[p]),oe=g.useMemo(()=>[{title:"Total",value:Me,icon:Jt,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:ke,icon:Wr,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:F,icon:Cs,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:ve,icon:qt,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:Ce,icon:Wr,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:D,icon:Yr,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:re,icon:Yr,color:"text-orange-600",bgColor:"bg-orange-100"}],[Me,ke,F,ve,Ce,D,re]),je=g.useMemo(()=>{const Pe=B.trim().toLowerCase(),lt=A.trim().toUpperCase();return p.filter(ot=>{const I=[ot?.name,ot?.website,ot?.industry,ot?.territory?.name,ot?.phone_number],Ne=Pe===""||I.some(de=>de==null?!1:de.toString().toLowerCase().includes(Pe)),H=lt==="FILTER BY STATUS"||yn(ot.status)===lt;return Ne&&H})},[p,B,A]),Re=Math.max(1,Math.ceil(je.length/ko)||1);g.useEffect(()=>{R(1)},[B,A]),g.useEffect(()=>{R(Pe=>{const lt=Math.max(1,Math.ceil(je.length/ko)||1);return Pe>lt?lt:Pe})},[je.length]);const Ke=g.useMemo(()=>{const Pe=(ae-1)*ko;return je.slice(Pe,Pe+ko)},[je,ae]);je.length===0||(ae-1)*ko+1,Math.min(ae*ko,je.length);const et=()=>R(Pe=>Math.max(Pe-1,1)),qe=()=>R(Pe=>Math.min(Pe+1,Re)),Ze=Pe=>{w(Pe),te("Overview"),le(yn(Pe?.status)||"PROSPECT")},we=()=>w(null),V=Pe=>{Pe.target.id==="accountModalBackdrop"&&!G&&we()},pe=()=>{a(!1),r(!1),f(null),y(hj),l(!1)},z=Pe=>{Pe.target.id==="modalBackdrop"&&pe()},ie=Pe=>Pe?new Date(Pe).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",ue=Pe=>{const{name:lt,value:ot}=Pe.target;y(I=>({...I,[lt]:ot}))},M=()=>{y(hj),r(!1),f(null),a(!0)},xe=Pe=>{w(null),console.log("edit: ",Pe),y({name:Pe.name||"",website:Pe.website||"",phone_number:Pe.phone_number||"",billing_address:Pe.billing_address||"",shipping_address:Pe.shipping_address||"",industry:Pe.industry||"",status:yn(Pe.status)||"PROSPECT",territory_id:Pe.territory?.id?String(Pe.territory.id):"",assigned_to:Pe.assigned_accs?.id?String(Pe.assigned_accs.id):""}),r(!0),f(Pe.id),a(!0)},ne=Pe=>{Pe&&O({title:"Delete Account",message:t.jsxs("span",{children:["Are you sure you want to permanently delete the account"," ",t.jsx("span",{className:"font-semibold",children:Pe.name}),"? This action cannot be undone."]}),confirmLabel:"Delete Account",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:Pe.id,name:Pe.name}})},Te=async()=>{if(!$?.action){O(null);return}const{action:Pe}=$,{type:lt,payload:ot,targetId:I,name:Ne}=Pe;K(!0);try{if(lt==="create"){l(!0);const H=await se.post("/accounts/admin",ot);q.success(`Account "${Ne}" created successfully.`);const de=N?.id||null;pe(),await he(de),!N&&H.data?.id}else if(lt==="update"){if(!I)throw new Error("Missing account identifier for update.");l(!0),await se.put(`/accounts/admin/${I}`,ot),q.success(`Account "${Ne}" updated successfully.`);const H=N?.id&&N.id===I?I:null;pe(),await he(H),N?.id===I&&w(null)}else if(lt==="delete"){if(!I)throw new Error("Missing account identifier for deletion.");const H=N?.id;d(I),await se.delete(`/accounts/admin/${I}`),q.success(`Account "${Ne}" deleted successfully.`),await he(H&&H!==I?H:null),H===I&&w(null)}}catch(H){console.error(H);const de=lt==="create"?"Failed to create account. Please review the details and try again.":lt==="update"?"Failed to update account. Please review the details and try again.":"Failed to delete account. Please try again.",_e=H.response?.data?.detail||de;q.error(_e),(lt==="create"||lt==="update")&&l(!1),lt==="delete"&&d(null)}finally{(lt==="create"||lt==="update")&&l(!1),lt==="delete"&&d(null),K(!1),O(null)}},Q=()=>{G||O(null)},ye=async()=>{if(!N||!ge)return;const Pe=yn(ge),lt=yn(N.status);if(Pe!==lt){ee(!0);try{await se.put(`/accounts/admin/${N.id}`,{status:Pe}),q.success(`Account status updated to ${gj(Pe)}`),v(ot=>ot.map(I=>I.id===N.id?{...I,status:Pe}:I)),w(null)}catch(ot){console.error(ot);const I=ot.response?.data?.detail||"Failed to update account status. Please try again.";q.error(I)}finally{ee(!1)}}},P=Pe=>{Pe.preventDefault();const lt=h.name.trim();if(!lt){q.error("Account name is required.");return}const ot={name:lt,website:h.website?.trim()||null,phone_number:h.phone_number?.trim()||null,billing_address:h.billing_address?.trim()||null,shipping_address:h.shipping_address?.trim()||null,industry:h.industry?.trim()||null,status:h.status||"PROSPECT",territory_id:h.territory_id?Number(h.territory_id):null,assigned_to:h.assigned_to?Number(h.assigned_to):null},I=n&&m?"update":"create";O({title:I==="create"?"Confirm New Account":"Confirm Update",message:I==="create"?t.jsxs("span",{children:["Are you sure you want to create the account"," ",t.jsx("span",{className:"font-semibold",children:lt}),"?"]}):t.jsxs("span",{children:["Save changes to the account"," ",t.jsx("span",{className:"font-semibold",children:lt}),"?"]}),confirmLabel:I==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:I,payload:ot,targetId:m||null,name:lt}})},fe=[{label:"Filter by Status",value:"Filter by Status"},...fj.map(Pe=>({label:Pe.label,value:Pe.value}))],me=$?.action?.type==="delete"?$.action.targetId:null,Se=N&&(c===N.id||me===N.id),$e=N&&c===N.id,We=N?zpe(N.status):"",rt=N?t.jsx("div",{id:"accountModalBackdrop",onClick:V,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:Pe=>Pe.stopPropagation(),children:[t.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[t.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),t.jsx("button",{onClick:we,className:"text-gray-400 hover:text-white cursor-pointer",children:t.jsx(es,{size:25})})]}),t.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[t.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:N.name}),t.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${We}`,children:gj(N.status)})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>xe(N),disabled:$?.action?.type==="update"&&$.action.targetId===N.id,children:[t.jsx(ys,{className:"mr-2"}),"Edit"]}),t.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>ne(N),disabled:!!Se,children:$e?"Deleting...":t.jsxs(t.Fragment,{children:[t.jsx(Nt,{className:"mr-2"}),"Delete"]})})]})]}),t.jsx("div",{className:"border-b border-gray-200 my-5"}),t.jsxs("div",{className:"p-6 lg:p-4",children:[t.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(Pe=>t.jsx("button",{onClick:()=>te(Pe),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${Z===Pe?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:Pe},Pe))}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[t.jsxs("div",{className:"lg:col-span-3",children:[Z==="Overview"&&t.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Website:"}),t.jsx("p",{children:N.website?t.jsx("a",{href:N.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:N.website}):"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Industry:"}),t.jsx("p",{children:N.industry||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Territory:"}),t.jsx("p",{children:N.territory?.name||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Phone Number:"}),t.jsx("p",{children:N.phone_number||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Billing Address:"}),t.jsx("p",{children:N.billing_address||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),t.jsx("p",{children:N.shipping_address||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Assigned To:"}),t.jsx("p",{children:N.assigned_accs?`${N.assigned_accs.first_name} ${N.assigned_accs.last_name}`:"Unassigned"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Created By:"}),t.jsx("p",{children:N.acc_creator?`${N.acc_creator.first_name} ${N.acc_creator.last_name}`:"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Created At:"}),t.jsx("p",{children:ie(N.created_at)||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Last Updated:"}),t.jsx("p",{children:ie(N.updated_at)||"N/A"})]})]})}),Z==="Notes"&&t.jsxs("div",{className:"mt-4 w-full",children:[t.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:t.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[t.jsx("div",{className:"flex items-start justify-between",children:t.jsx("div",{children:t.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),t.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:p.notes||"No notes available."})]})]}),Z==="Activities"&&t.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:ft,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:dt,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((Pe,lt)=>t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[t.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[t.jsx("div",{className:"text-gray-600 mt-1",children:t.jsx(Pe.icon,{size:24})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"font-medium text-gray-900 break-words",children:Pe.title}),t.jsx("p",{className:"text-sm text-gray-500 break-words",children:Pe.desc}),t.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[t.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),t.jsx("p",{className:"text-sm text-gray-700 break-words",children:Pe.user})]})]})]}),t.jsx("p",{className:"text-sm text-gray-500 break-words",children:Pe.date})]},lt))]})]}),t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),t.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[t.jsxs("button",{onClick:()=>e("/group-manager/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Account"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),t.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/group-manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Account"}}}),children:[t.jsx(dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),t.jsxs("button",{onClick:()=>e("/group-manager/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Account"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ts,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),t.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:ge||yn(N?.status)||"PROSPECT",onChange:Pe=>le(Pe.target.value),children:fj.map(Pe=>t.jsx("option",{value:Pe.value,children:Pe.label},Pe.value))}),t.jsx("button",{onClick:ye,disabled:W||!ge||yn(ge)===yn(N?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${W||!ge||yn(ge)===yn(N?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:W?"Updating...":"Update"})]})]})]})]})]})}):null,wt=t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[C&&t.jsx(xt,{message:"Loading accounts..."}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[t.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[t.jsx(Jt,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),t.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:t.jsxs("button",{onClick:M,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base cursor-pointer",children:[t.jsx(Lt,{className:"mr-2"})," Add Account"]})})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:oe.map(Pe=>t.jsx(Hpe,{...Pe},Pe.title))}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[t.jsx(yt,{size:20,className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search accounts",value:B,onChange:Pe=>X(Pe.target.value),className:"focus:outline-none text-base w-full"})]}),t.jsx("div",{className:"w-full lg:w-1/4",children:t.jsx("select",{value:A,onChange:Pe=>U(Pe.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:fe.map(Pe=>t.jsx("option",{value:Pe.value,children:Pe.label},Pe.value))})})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[t.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),t.jsx("th",{className:"py-3 px-4",children:"Status"}),t.jsx("th",{className:"py-3 px-4",children:"Industry"}),t.jsx("th",{className:"py-3 px-4",children:"Territory"}),t.jsx("th",{className:"py-3 px-4",children:"Phone"})]})}),t.jsx("tbody",{children:C?t.jsx("tr",{children:t.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"Loading accounts..."})}):je.length>0?Ke.map(Pe=>t.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>Ze(Pe),children:[t.jsx("td",{className:"py-3 px-4",children:t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:Pe.name}),t.jsx("div",{className:"text-gray-500 text-xs break-all",children:Pe.website||"--"})]})}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${Fpe(Pe.status)}`,children:gj(Pe.status)})}),t.jsx("td",{className:"py-3 px-4 text-sm",children:Pe.industry||"--"}),t.jsx("td",{className:"py-3 px-4 text-sm",children:Pe.territory?.name||"--"}),t.jsx("td",{className:"py-3 px-4",children:t.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[t.jsx(ft,{className:"text-gray-500"}),t.jsx("span",{children:Pe.phone_number||"--"})]})})]},Pe.id)):t.jsx("tr",{children:t.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"No accounts found."})})})]})}),t.jsx(Ct,{className:"mt-4",totalItems:je.length,pageSize:ko,currentPage:ae,onPrev:et,onNext:qe,label:"accounts"})]}),Ut=s?t.jsx("div",{id:"modalBackdrop",onClick:z,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh]",onClick:Pe=>Pe.stopPropagation(),children:[t.jsx("button",{onClick:pe,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:i||G,children:t.jsx(jt,{size:22})}),t.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:n?"Edit Account":"Add New Account"}),t.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:P,children:[t.jsx(Td,{label:"Name",name:"name",value:h.name,onChange:ue,placeholder:"Company name",required:!0,disabled:i,className:"md:col-span-2"}),t.jsx(Td,{label:"Website",name:"website",value:h.website,onChange:ue,placeholder:"https://example.com",disabled:i}),t.jsx(Td,{label:"Phone Number",name:"phone_number",value:h.phone_number,onChange:ue,placeholder:"09xx xxx xxxx",type:"tel",disabled:i}),t.jsx(Td,{label:"Industry",name:"industry",value:h.industry,onChange:ue,placeholder:"Industry",disabled:i}),t.jsx(Td,{label:"Billing Address",name:"billing_address",value:h.billing_address,onChange:ue,placeholder:"Billing address",disabled:i}),t.jsx(Td,{label:"Shipping Address",name:"shipping_address",value:h.shipping_address,onChange:ue,placeholder:"Shipping address",disabled:i}),t.jsx(xj,{label:"Status",name:"status",value:h.status,onChange:ue,options:[{value:"",label:"Select status"},...fj],required:!0,disabled:i}),t.jsx(xj,{label:"Assigned To",name:"assigned_to",value:h.assigned_to,onChange:ue,options:[{value:"",label:"Select assignee"},...J.map(Pe=>({value:String(Pe.id),label:`${Pe.first_name} ${Pe.last_name}`}))],disabled:i||J.length===0}),t.jsx(xj,{label:"Territory",name:"territory_id",value:h.territory_id,onChange:ue,options:[{value:"",label:"No Territory"},...k.map(Pe=>({value:String(Pe.id),label:Pe.name}))],disabled:i||k.length===0}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[t.jsx("button",{type:"button",onClick:pe,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i||G,children:"Cancel"}),t.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i||G,children:i?"Saving...":n?"Update Account":"Save Account"})]})]})]})}):null,ze=$?t.jsx(Gpe,{open:!0,title:$.title,message:$.message,confirmLabel:$.confirmLabel,cancelLabel:$.cancelLabel,variant:$.variant,onConfirm:Te,onCancel:Q,loading:G}):null;return t.jsxs(t.Fragment,{children:[wt,rt,Ut,ze]})}function Hpe({icon:e,title:s,value:a,color:n="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${s}`)};return t.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[t.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${n} mr-4`,children:e?t.jsx(e,{size:22}):null}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"text-xs text-gray-500 uppercase",children:s}),t.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function Td({label:e,name:s,value:a,onChange:n,placeholder:r,type:i="text",required:l=!1,disabled:c=!1,className:d=""}){return t.jsxs("div",{className:d,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("input",{type:i,name:s,value:a??"",onChange:n,placeholder:r,required:l,disabled:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]})}function xj({label:e,name:s,value:a,onChange:n,options:r,required:i=!1,disabled:l=!1}){return t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("select",{name:s,value:a??"",onChange:n,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(c=>t.jsx("option",{value:c.value,children:c.label},c.value))})]})}function Gpe({open:e,title:s,message:a,confirmLabel:n,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:c,onCancel:d}){if(!e)return null;const m=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s}),t.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),t.jsx("button",{type:"button",onClick:c,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${m}`,disabled:l,children:l?"Processing...":n})]})]})})}const Do=10,CD=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Active"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Former"}],Ma=e=>e?e.toUpperCase():"",SD=e=>e?e.toString().toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()):"--",pj={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:"",status:""},Ed=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),Jm=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function Vpe(){const e=it();g.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const s=P=>{if(!P)return null;const fe=P.toString().toLowerCase(),me=fe.replace(/\b\w/g,$e=>$e.toUpperCase()),Se=(()=>{switch(fe){case"customer":return"bg-green-100 text-green-700";case"prospect":return"bg-purple-100 text-purple-700";case"partner":return"bg-pink-100 text-pink-700";case"active":return"bg-blue-100 text-blue-700";case"inactive":return"bg-gray-200 text-gray-700";case"former":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}})();return t.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${Se}`,children:me})},[a,n]=g.useState([]),[r,i]=g.useState(!1),[l,c]=g.useState([]),[d,m]=g.useState([]),[f,h]=g.useState(null),[y,N]=g.useState(!1),[w,p]=g.useState(!1),[v,C]=g.useState(!1),[j,_]=g.useState(null),[T,k]=g.useState(!1),[E,A]=g.useState(null),[U,B]=g.useState(pj),[X,$]=g.useState(""),[O,G]=g.useState("Filter by Accounts"),[K,ae]=g.useState(null),[R,Z]=g.useState("Overview"),[te,ge]=g.useState(1),[le,W]=g.useState(""),[ee,J]=g.useState(!1),he=g.useCallback(async(P=null)=>{i(!0);try{const fe=await se.get("/contacts/admin/fetch-all"),Se=[...Array.isArray(fe.data)?fe.data:[]].sort(($e,We)=>{const rt=$e?.created_at||$e?.updated_at||0,wt=We?.created_at||We?.updated_at||0;return new Date(wt)-new Date(rt)});if(n(Se),console.log(fe.data),P){const $e=Se.find(We=>We.id===P);h($e||null)}}catch(fe){console.error(fe),n([]),fe.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch contacts. Please try again later.")}finally{i(!1)}},[h]),be=g.useCallback(async()=>{try{const P=await se.get("/accounts/admin/fetch-all"),me=[...Array.isArray(P.data)?P.data:[]].sort((Se,$e)=>(Se?.name||"").localeCompare($e?.name||""));c(me)}catch(P){console.error(P),c([]),P.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},[]),Le=g.useCallback(async()=>{try{const P=await se.get("/users/all"),me=[...Array.isArray(P.data)?P.data:[]].sort((Se,$e)=>Ed(Se).localeCompare(Ed($e)));m(me)}catch(P){console.error(P),m([]),P.response?.status===403&&q.warn("Unable to load users for assignment (permission denied).")}},[]);g.useEffect(()=>{he(),be(),Le()},[he,be,Le]),g.useEffect(()=>{f?.account?.status?W(Ma(f.account.status)||"PROSPECT"):W("PROSPECT")},[f]),g.useEffect(()=>{if(w&&U.account_id&&l.length>0){const P=l.find(fe=>String(fe.id)===U.account_id);if(P?.status){const fe=Ma(P.status)||"PROSPECT";B(me=>!me.status||Ma(me.status)!==fe?{...me,status:fe}:me)}}},[U.account_id,w]);const Me=g.useMemo(()=>{const P=new Map;l.forEach(me=>{me?.id&&me?.name&&P.set(String(me.id),me.name)}),a.forEach(me=>{me?.account_id&&me?.account?.name&&P.set(String(me.account_id),me.account.name)});const fe=Array.from(P.entries()).sort((me,Se)=>me[1].localeCompare(Se[1])).map(([me,Se])=>({value:me,label:Se}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...fe]},[l,a]),ke=g.useMemo(()=>{const P=X.trim().toLowerCase(),fe=O.trim();return a.filter(me=>{const Se=[me?.first_name,me?.last_name,me?.email,me?.title,me?.department,me?.account?.name,me?.account?.status,me?.work_phone,me?.mobile_phone_1,me?.mobile_phone_2,me?.assigned_contact?.first_name,me?.assigned_contact?.last_name,me?.contact_creator?.first_name,me?.contact_creator?.last_name,me?.notes,Jm(me?.created_at),Jm(me?.updated_at)],$e=P===""||Se.some(rt=>rt==null?!1:rt.toString().toLowerCase().includes(P)),We=fe==="Filter by Accounts"||String(me.account_id)===fe;return $e&&We})},[a,X,O]),F=Math.max(1,Math.ceil(ke.length/Do)||1);g.useEffect(()=>{ge(1)},[X,O]),g.useEffect(()=>{ge(P=>{const fe=Math.max(1,Math.ceil(ke.length/Do)||1);return P>fe?fe:P})},[ke.length]);const ve=g.useMemo(()=>{const P=(te-1)*Do;return ke.slice(P,P+Do)},[ke,te]);ke.length===0||(te-1)*Do+1,Math.min(te*Do,ke.length);const Ce=()=>ge(P=>Math.max(P-1,1)),D=()=>ge(P=>Math.min(P+1,F)),re=g.useCallback(()=>{N(!1),p(!1),A(null),B(pj),C(!1)},[]),oe=P=>{P.target.id==="modalBackdrop"&&!v&&!T&&re()},je=P=>{const{name:fe,value:me}=P.target;B(Se=>({...Se,[fe]:me}))},Re=()=>{B(pj),p(!1),A(null),N(!0)},Ke=P=>{P&&(B({first_name:P.first_name||"",last_name:P.last_name||"",account_id:P.account_id?String(P.account_id):"",title:P.title||"",department:P.department||"",email:P.email||"",work_phone:P.work_phone||"",mobile_phone_1:P.mobile_phone_1||"",mobile_phone_2:P.mobile_phone_2||"",notes:P.notes||"",assigned_to:P.assigned_to?String(P.assigned_to):"",status:Ma(P.account?.status)||"PROSPECT"}),p(!0),A(P.id),N(!0),h(null))},et=P=>{if(!P)return;const fe=Ed(P)||"this contact";_({title:"Delete Contact",message:t.jsxs("span",{children:["Are you sure you want to permanently delete"," ",t.jsx("span",{className:"font-semibold",children:fe}),"? This action cannot be undone."]}),confirmLabel:"Delete Contact",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:P.id,name:fe}})},qe=P=>{P.preventDefault();const fe=U.first_name.trim(),me=U.last_name.trim();if(!fe||!me){q.error("First name and last name are required.");return}if(!U.account_id){q.error("Account is required.");return}const Se={first_name:fe,last_name:me,account_id:Number(U.account_id),title:U.title?.trim()||null,department:U.department?.trim()||null,email:U.email?.trim().toLowerCase()||null,work_phone:U.work_phone?.trim()||null,mobile_phone_1:U.mobile_phone_1?.trim()||null,mobile_phone_2:U.mobile_phone_2?.trim()||null,notes:U.notes?.trim()||null,assigned_to:U.assigned_to?Number(U.assigned_to):null},$e=w&&E?"update":"create",We=`${fe} ${me}`.trim(),rt=w?a.find(Pe=>Pe.id===E):null,wt=rt?.account?.status,Ut=U.status?Ma(U.status):null,ze=w&&rt?.account?.id&&Ut&&Ma(wt)!==Ut;_({title:$e==="create"?"Confirm New Contact":"Confirm Update",message:$e==="create"?t.jsxs("span",{children:["Are you sure you want to add"," ",t.jsx("span",{className:"font-semibold",children:We})," to your contacts?"]}):t.jsxs("span",{children:["Save changes to ",t.jsx("span",{className:"font-semibold",children:We}),"?"]}),confirmLabel:$e==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:$e,payload:Se,targetId:E||null,name:We},accountStatusUpdate:ze?Ut:null,accountId:w&&rt?.account?.id?rt.account.id:Se.account_id||null})},Ze=async()=>{if(!j?.action){_(null);return}const{action:P}=j,{type:fe,payload:me,targetId:Se,name:$e}=P;k(!0);try{if(fe==="create"){C(!0),await se.post("/contacts/admin",me),q.success(`Contact "${$e}" created successfully.`);const We=f?.id||null;re(),await he(We)}else if(fe==="update"){if(!Se)throw new Error("Missing contact identifier for update.");if(C(!0),await se.put(`/contacts/admin/${Se}`,me),j.accountStatusUpdate&&j.accountId)try{await se.put(`/accounts/admin/${j.accountId}`,{status:Ma(j.accountStatusUpdate)}),q.success(`Account status updated to ${SD(j.accountStatusUpdate)}`)}catch(rt){console.error("Failed to update account status:",rt),q.warn("Contact updated but failed to update account status.")}q.success(`Contact "${$e}" updated successfully.`);const We=f?.id&&f.id===Se?Se:f?.id||null;re(),await he(We),f?.id===Se&&h(null)}else if(fe==="delete"){if(!Se)throw new Error("Missing contact identifier for deletion.");const We=f?.id;ae(Se),await se.delete(`/contacts/admin/${Se}`),q.success(`Contact "${$e}" deleted successfully.`),await he(We&&We!==Se?We:null),We===Se&&h(null)}}catch(We){console.error(We);const rt=fe==="create"?"Failed to create contact. Please review the details and try again.":fe==="update"?"Failed to update contact. Please review the details and try again.":"Failed to delete contact. Please try again.",wt=We.response?.data?.detail||rt;q.error(wt)}finally{(fe==="create"||fe==="update")&&C(!1),fe==="delete"&&ae(null),k(!1),_(null)}},we=()=>{T||_(null)},V=P=>{h(P),Z("Overview")},pe=async()=>{if(!f?.account?.id||!le)return;const P=Ma(le),fe=Ma(f?.account?.status);if(P!==fe){J(!0);try{await se.put(`/accounts/admin/${f.account.id}`,{status:P}),q.success(`Account status updated to ${SD(P)}`),n(me=>me.map(Se=>Se.account_id===f.account.id?{...Se,account:{...Se.account,status:P}}:Se)),h(null)}catch(me){console.error(me);const Se=me.response?.data?.detail||"Failed to update account status. Please try again.";q.error(Se)}finally{J(!1)}}},z=()=>h(null),ie=P=>{P.target.id==="contactModalBackdrop"&&!T&&z()},ue=j?.action?.type==="delete"?j.action.targetId:null,M=f&&(K===f.id||ue===f.id),xe=f&&K===f.id,ne=f?t.jsx("div",{id:"contactModalBackdrop",onClick:ie,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:P=>P.stopPropagation(),children:[t.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[t.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),t.jsx("button",{onClick:z,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:t.jsx(es,{size:25})})]}),t.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[t.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:Ed(f)||"Unnamed contact"}),s(f.account?.status)]}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Ke(f),disabled:T||j?.action?.type==="update"&&j.action.targetId===f.id,children:[t.jsx(ys,{className:"mr-2"}),"Edit"]}),t.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>et(f),disabled:!!M,children:xe?"Deleting...":t.jsxs(t.Fragment,{children:[t.jsx(Nt,{className:"mr-2"}),"Delete"]})})]})]}),t.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:t.jsx("p",{className:"text-sm text-gray-500",children:f.account?.name||"No associated account"})}),t.jsx("div",{className:"border-b border-gray-200 my-5"}),t.jsxs("div",{className:"p-6 lg:p-4",children:[t.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(P=>t.jsx("button",{onClick:()=>Z(P),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${R===P?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:P},P))}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[t.jsxs("div",{className:"lg:col-span-3",children:[R==="Overview"&&t.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Contact Name:"}),t.jsx("p",{children:Ed(f)||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Title:"}),t.jsx("p",{children:f.title||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Email:"}),t.jsx("p",{children:f.email?t.jsx("a",{href:`mailto:${f.email}`,className:"text-blue-600 hover:underline break-all",children:f.email}):"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Department:"}),t.jsx("p",{children:f.department||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Work Phone:"}),t.jsx("p",{children:f.work_phone||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),t.jsx("p",{children:f.mobile_phone_1||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),t.jsx("p",{children:f.mobile_phone_2||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Assigned To:"}),t.jsx("p",{children:f.assigned_contact?`${f.assigned_contact.first_name} ${f.assigned_contact.last_name}`:"Unassigned"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Created By:"}),t.jsx("p",{children:f.contact_creator?`${f.contact_creator.first_name} ${f.contact_creator.last_name}`:"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Created At:"}),t.jsx("p",{children:Jm(f.created_at)||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Last Updated:"}),t.jsx("p",{children:Jm(f.updated_at)||"N/A"})]})]})}),R==="Notes"&&t.jsxs("div",{className:"mt-4 w-full",children:[t.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:t.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[t.jsx("div",{className:"flex items-start justify-between",children:t.jsx("div",{children:t.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),t.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:f.notes||"No notes available."})]})]}),R==="Activities"&&t.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:ft,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:dt,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((P,fe)=>t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[t.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[t.jsx("div",{className:"text-gray-600 mt-1",children:t.jsx(P.icon,{size:24})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"font-medium text-gray-900 break-words",children:P.title}),t.jsx("p",{className:"text-sm text-gray-500 break-words",children:P.desc}),t.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[t.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),t.jsx("p",{className:"text-sm text-gray-700 break-words",children:P.user})]})]})]}),t.jsx("p",{className:"text-sm text-gray-500 break-words",children:P.date})]},fe))]})]}),t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),t.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[t.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Contact"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),t.jsxs("button",{type:"button",onClick:()=>{if(!f?.email){alert("No email address available");return}const P=encodeURIComponent(f.email),fe=encodeURIComponent(""),me=encodeURIComponent(""),Se=`https://mail.google.com/mail/?view=cm&fs=1&to=${P}&su=${fe}&body=${me}`;window.open(Se,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(js,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),t.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Contact"}}}),children:[t.jsx(dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),t.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Contact"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ts,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),t.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:le||Ma(f?.account?.status)||"PROSPECT",onChange:P=>W(P.target.value),disabled:ee||!f?.account?.id,children:CD.map(P=>t.jsx("option",{value:P.value,children:P.label},P.value))}),t.jsx("button",{onClick:pe,disabled:ee||!le||!f?.account?.id||Ma(le)===Ma(f?.account?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${ee||!le||!f?.account?.id||Ma(le)===Ma(f?.account?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:ee?"Updating...":"Update"})]})]})]})]})]})}):null,Te=t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&t.jsx(xt,{message:"Loading contacts..."}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[t.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[t.jsx(Jt,{className:"mr-2 text-blue-600"})," Contacts Management"]}),t.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:t.jsxs("button",{onClick:Re,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[t.jsx(Lt,{className:"mr-2"})," Add Contact"]})})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[t.jsx(yt,{size:20,className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search contacts",value:X,onChange:P=>$(P.target.value),className:"focus:outline-none text-base w-full"})]}),t.jsx("div",{className:"w-full lg:w-1/4",children:t.jsx("select",{value:O,onChange:P=>G(P.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:Me.map(P=>t.jsx("option",{value:P.value,children:P.label},P.value??P.label))})})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[t.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),t.jsx("th",{className:"py-3 px-4",children:"Account"}),t.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),t.jsx("th",{className:"py-3 px-4",children:"Department"}),t.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),t.jsx("th",{className:"py-3 px-4",children:"Created"})]})}),t.jsx("tbody",{children:r?t.jsx("tr",{children:t.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"Loading contacts..."})}):ke.length>0?ve.map(P=>{const fe=[{Icon:js,value:P.email,key:"email"},{Icon:ft,value:P.work_phone,key:"work_phone"},{Icon:Bl,value:P.mobile_phone_1,key:"mobile_phone_1"},{Icon:Bl,value:P.mobile_phone_2,key:"mobile_phone_2"}].filter(me=>!!me.value);return t.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>V(P),children:[t.jsxs("td",{className:"py-3 px-4 align-top",children:[t.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:Ed(P)||"--"}),t.jsx("div",{className:"text-xs text-gray-500",children:P.title||"No title"})]}),t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[t.jsx(Ph,{className:"text-gray-500 flex-shrink-0"}),t.jsx("span",{className:"break-words",children:P.account?.name||"--"})]})}),t.jsx("td",{className:"py-3 px-4 align-top",children:fe.length>0?t.jsx("div",{className:"space-y-1 text-gray-700",children:fe.map(({Icon:me,value:Se,key:$e})=>t.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[t.jsx(me,{className:"text-gray-500 flex-shrink-0"}),t.jsx("span",{children:Se})]},$e))}):t.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[t.jsx(Es,{className:"text-gray-500 flex-shrink-0"}),t.jsx("span",{children:P.department||"--"})]})}),t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[t.jsx(qt,{className:"text-gray-500 flex-shrink-0"}),t.jsx("span",{children:P.assigned_contact?`${P.assigned_contact.first_name} ${P.assigned_contact.last_name}`:"Unassigned"})]})}),t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[t.jsx(dt,{className:"text-gray-500 flex-shrink-0"}),t.jsx("span",{className:"text-xs",children:Jm(P.created_at)||"--"})]})})]},P.id)}):t.jsx("tr",{children:t.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"No contacts found."})})})]})}),t.jsx(Ct,{className:"mt-4",totalItems:ke.length,pageSize:Do,currentPage:te,onPrev:Ce,onNext:D,label:"contacts"})]}),Q=y?t.jsx("div",{id:"modalBackdrop",onClick:oe,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:P=>P.stopPropagation(),children:[t.jsx("button",{onClick:re,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:v||T,children:t.jsx(jt,{size:22})}),t.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:w?"Edit Contact":"Add New Contact"}),t.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:qe,children:[t.jsx(El,{label:"First Name",name:"first_name",value:U.first_name,onChange:je,placeholder:"First name",required:!0,disabled:v}),t.jsx(El,{label:"Last Name",name:"last_name",value:U.last_name,onChange:je,placeholder:"Last name",required:!0,disabled:v}),t.jsx(ep,{label:"Account",name:"account_id",value:U.account_id,onChange:je,options:[{value:"",label:"Select account"},...l.map(P=>({value:String(P.id),label:P.name}))],required:!0,disabled:v||l.length===0}),w&&U.account_id?t.jsx(ep,{label:"Status",name:"status",value:U.status||Ma(l.find(P=>String(P.id)===U.account_id)?.status||"")||"PROSPECT",onChange:je,options:CD.map(P=>({value:P.value,label:P.label})),disabled:v||!U.account_id}):t.jsx(ep,{label:"Assigned To",name:"assigned_to",value:U.assigned_to,onChange:je,options:[{value:"",label:"Select assignee"},...d.map(P=>({value:String(P.id),label:`${P.first_name} ${P.last_name} (${P.role})`}))],disabled:v||d.length===0}),w&&t.jsx(ep,{label:"Assigned To",name:"assigned_to",value:U.assigned_to,onChange:je,options:[{value:"",label:"Select assignee"},...d.map(P=>({value:String(P.id),label:`${P.first_name} ${P.last_name} (${P.role})`}))],disabled:v||d.length===0}),t.jsx(El,{label:"Title",name:"title",value:U.title,onChange:je,placeholder:"Job title",disabled:v}),t.jsx(El,{label:"Department",name:"department",value:U.department,onChange:je,placeholder:"Department",disabled:v}),t.jsx(El,{label:"Email",name:"email",type:"email",value:U.email,onChange:je,placeholder:"example@email.com",disabled:v}),t.jsx(El,{label:"Work Phone",name:"work_phone",value:U.work_phone,onChange:je,placeholder:"09xx xxx xxxx",disabled:v}),t.jsx(El,{label:"Mobile Phone 1",name:"mobile_phone_1",value:U.mobile_phone_1,onChange:je,placeholder:"09xx xxx xxxx",disabled:v}),t.jsx(El,{label:"Mobile Phone 2",name:"mobile_phone_2",value:U.mobile_phone_2,onChange:je,placeholder:"09xx xxx xxxx",disabled:v}),t.jsx(Wpe,{label:"Notes",name:"notes",value:U.notes,onChange:je,placeholder:"Additional details...",rows:3,disabled:v,className:"md:col-span-2"}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[t.jsx("button",{type:"button",onClick:re,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:v||T,children:"Cancel"}),t.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:v||T,children:v?"Saving...":w?"Update Contact":"Save Contact"})]})]})]})}):null,ye=j?t.jsx(Ype,{open:!0,title:j.title,message:j.message,confirmLabel:j.confirmLabel,cancelLabel:j.cancelLabel,variant:j.variant,onConfirm:Ze,onCancel:we,loading:T}):null;return t.jsxs(t.Fragment,{children:[Te,ne,Q,ye]})}function El({label:e,name:s,value:a,onChange:n,placeholder:r,type:i="text",required:l=!1,disabled:c=!1}){return t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("input",{type:i,name:s,value:a??"",onChange:n,placeholder:r,required:l,disabled:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]})}function ep({label:e,name:s,value:a,onChange:n,options:r,required:i=!1,disabled:l=!1,className:c=""}){return t.jsxs("div",{className:c,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("select",{name:s,value:a??"",onChange:n,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(d=>t.jsx("option",{value:d.value,children:d.label},d.value??d.label))})]})}function Wpe({label:e,name:s,value:a,onChange:n,placeholder:r,rows:i=3,disabled:l=!1,className:c=""}){return t.jsxs("div",{className:c,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("textarea",{name:s,value:a??"",onChange:n,placeholder:r,rows:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function Ype({open:e,title:s,message:a,confirmLabel:n,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:c,onCancel:d}){if(!e)return null;const m=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s}),t.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),t.jsx("button",{type:"button",onClick:c,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${m}`,disabled:l,children:l?"Processing...":n})]})]})})}function T6({lead:e,onBack:s,fetchLeads:a,onEdit:n,onDelete:r,setSelectedLead:i}){const l=it(),{leadID:c}=Qi(),[d,m]=g.useState(e||null),[f,h]=g.useState("Overview"),[y,N]=g.useState(""),{userRole:w}=er(),{user:p}=zt();g.useEffect(()=>{console.log("mewo",w),console.log("asdads",p),console.log("lead",d)},[w,p,d]);const[v,C]=g.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[j,_]=g.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[T,k]=g.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),E=async()=>{try{if(e){m(e),N(e.status||"New");return}if(!c)return;const $=await se.get(`/leads/get/${c}`);m($.data),N($.data.status||"New"),C({name:$.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:$.data.territory?.id||null,assigned_to:$.data.assigned_to?.id||null,created_by:$.data.creator?.id||null}),_({last_name:$.data.last_name||"",first_name:$.data.first_name||"",account_id:null,title:$.data.title||"",department:$.data.department||"",email:$.data.email||"",work_phone:$.data.work_phone||"",mobile_phone_1:$.data.mobile_phone_1||"",mobile_phone_2:$.data.mobile_phone_2||"",notes:"",assigned_to:$.data.assigned_to?.id||null,created_by:$.data.creator?.id||null}),k({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:$.data.assigned_to?.id||null,created_by:$.data.creator?.id||null})}catch($){console.error($)}};g.useEffect(()=>{e?(m(e),N(e.status||"New")):c&&E()},[c,e]);const A=async()=>{try{const $=await se.put(`/leads/${d.id}/update/status`,{status:y});console.log($.data),q.success("Lead status updated successfully");const O={...d,status:$.data.status};m(O),i&&i(O),a&&a(),s&&s()}catch($){console.error($),q.error("Failed to update lead status")}},U=async $=>{const O={...v,assigned_to:$.assigned_to?.id,billing_address:$.address,shipping_address:$.address,created_by:$.creator?.id,industry:null,name:$.company_name,phone_number:$.work_phone,status:"Prospect",territory_id:$.territory?.id,website:""};console.log("Account data: ",O),console.log("Contact data: ",j),console.log("Deal data: ",T),console.log("Lead data: ",$);try{const K=(await se.post("/accounts/convertedLead",O)).data.id,ae={...j,account_id:K,assigned_to:$.assigned_to?.id,created_by:$.creator?.id,department:$.department,email:$.email,first_name:$.first_name,last_name:$.last_name,mobile_phone_1:$.mobile_phone_1,mobile_phone_2:$.mobile_phone_2,notes:$.notes,title:$.title,work_phone:$.work_phone},Z=(await se.post("/contacts/convertedLead",ae)).data.id,te=()=>{switch(T.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},ge=T.amount&&T.amount!==""?parseFloat(T.amount):0,le={...T,account_id:K,assigned_to:$.assigned_to?.id,created_by:$.creator?.id,primary_contact_id:Z,probability:te(),stage:"Prospecting"},W=await se.post("/deals/convertedLead",le),ee=await se.put(`/leads/convert/${$.id}`);i&&i(null),a(),q.success("Lead converted successfully!"),s()}catch(G){console.error("Error during conversion:",G);const K=G.response?.data?.detail||G.message||"Failed to convert lead. Please try again.";q.error(K)}},B=$=>{switch(($||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},X=$=>$.toString().toLowerCase().replace(/\b\w/g,O=>O.toUpperCase());return d?t.jsx(t.Fragment,{children:t.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[t.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:t.jsxs("div",{className:"flex items-start justify-between w-full",children:[t.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),t.jsx("button",{onClick:()=>{s?s():l(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:t.jsx(es,{size:25})})]})}),t.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[t.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[d.first_name," ",d.last_name]}),t.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${B(d.status)}`,children:X(d.status||"New")}),(d.creator?.id===p?.id||d.assigned_to?.id===p?.id)&&t.jsx("button",{onClick:()=>{d.status==="Qualified"?U(d):q.warn("Cannot convert lead. Only leads with 'Qualified' status can be converted.")},className:"bg-green-600 hover:bg-green-700 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2 focus:ring-green-400",children:"Convert"})]}),(d.creator?.id===p?.id||d.assigned_to?.id===p?.id)&&t.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsxs("button",{type:"button",onClick:()=>{n&&d&&n(d)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[t.jsx(hs,{className:"mr-2"}),"Edit"]}),t.jsxs("button",{type:"button",onClick:()=>{r&&d&&r(d)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[t.jsx(Nt,{className:"mr-2"}),"Delete"]})]})]}),t.jsx("div",{className:"border-b border-gray-200 my-5"}),t.jsxs("div",{className:"p-4 lg:p-4",children:[t.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map($=>t.jsx("button",{onClick:()=>h($),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${f===$?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:$},$))}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[t.jsxs("div",{className:"lg:col-span-3",children:[f==="Overview"&&t.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Name:"}),t.jsxs("p",{children:[d.first_name," ",d.last_name||"N/A"]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Company:"}),t.jsx("p",{children:d.company_name||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Title:"}),t.jsx("p",{children:d.title||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Department:"}),t.jsx("p",{children:d.department||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Email:"}),t.jsx("p",{children:d.email||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Territory:"}),t.jsx("p",{children:d.territory?.name||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Assigned To:"}),t.jsx("p",{children:d.assigned_to?`${d.assigned_to.first_name} ${d.assigned_to.last_name}`:"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Created By:"}),t.jsx("p",{children:d.creator?`${d.creator.first_name} ${d.creator.last_name}`:"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Work Phone:"}),t.jsx("p",{children:d.work_phone||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),t.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),t.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Source:"}),t.jsx("p",{children:d.source||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Address:"}),t.jsx("p",{children:d.address||"N/A"})]})]})}),f==="Notes"&&t.jsxs("div",{className:"mt-4 w-full",children:[t.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:t.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[t.jsx("div",{className:"flex items-start justify-between",children:t.jsx("div",{children:t.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),t.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]})]}),f==="Activities"&&t.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:ft,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:dt,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map(($,O)=>t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[t.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[t.jsx("div",{className:"text-gray-600 mt-1",children:t.jsx($.icon,{size:24})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"font-medium text-gray-900 break-words",children:$.title}),t.jsx("p",{className:"text-sm text-gray-500 break-words",children:$.desc}),t.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[t.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),t.jsx("p",{className:"text-sm text-gray-700 break-words",children:$.user})]})]})]}),t.jsx("p",{className:"text-sm text-gray-500 break-words",children:$.date})]},O))]})]}),t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),t.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[t.jsxs("button",{onClick:()=>l("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Lead"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),t.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const $=encodeURIComponent(d.email),O=encodeURIComponent(""),G=encodeURIComponent(""),K=`https://mail.google.com/mail/?view=cm&fs=1&to=${$}&su=${O}&body=${G}`;window.open(K,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(js,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),t.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>l("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Lead"}}}),children:[t.jsx(dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),t.jsxs("button",{onClick:()=>l("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Lead"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ts,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),t.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:y,disabled:d.creator?.id!==p?.id&&d.assigned_to?.id!==p?.id,onChange:$=>N($.target.value),children:[t.jsx("option",{value:"New",children:"New"}),t.jsx("option",{value:"Contacted",children:"Contacted"}),t.jsx("option",{value:"Qualified",children:"Qualified"}),t.jsx("option",{value:"Converted",children:"Converted"}),t.jsx("option",{value:"Lost",children:"Lost"})]}),(d.creator?.id===p?.id||d.assigned_to?.id===p?.id)&&t.jsx("button",{onClick:A,disabled:y===d.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${y===d.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const Qpe=pu.all(),yj=Qpe.map((e,s)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${s}`})),qpe=e=>e.toString().toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()),Xpe=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},ef=10,bj={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function Kpe(){const e=it(),{leadID:s}=Qi();Aa();const[a,n]=g.useState(null),[r,i]=g.useState(!1),[l,c]=g.useState(null),[d,m]=g.useState(null),[f,h]=g.useState([]),[y,N]=g.useState(!1),[w,p]=g.useState(""),[v,C]=g.useState("Filter by Status"),[j,_]=g.useState(1),[T,k]=g.useState(bj),[E,A]=g.useState(!1),[U,B]=g.useState(null),[X,$]=g.useState(!1),[O,G]=g.useState(null),[K,ae]=g.useState(!1);g.useRef(null);const[R,Z]=g.useState(!1),[te,ge]=g.useState(null),[le,W]=g.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[ee,J]=g.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[he,be]=g.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});g.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const Le=async()=>{try{const Q=await se.get("/leads/getUsers");c(Q.data)}catch(Q){console.error(`Error fetching users: ${Q}`)}},Me=async()=>{N(!0);try{const Q=await se.get("/leads/admin/getLeads");h(Q.data),console.log(Q.data)}catch(Q){console.error(`Error fetching leads: ${Q}`)}finally{N(!1)}};g.useEffect(()=>{Le(),Me()},[]),g.useEffect(()=>{if(s&&f.length>0&&!r&&!E){const Q=f.find(ye=>ye.id===Number(s));Q&&n(Q)}else!s&&!a&&n(null)},[s,f,r,E]),g.useEffect(()=>{if(te){const ye=(me=>{if(!me)return{code:"+63",number:""};const Se=me.match(/^(\+\d+)\s(.+)$/);if(Se)return{code:Se[1],number:Se[2]};if(me.startsWith("+")){const $e=me.match(/^(\+\d{1,3})/);if($e)return{code:$e[1],number:me.substring($e[1].length).trim()}}return{code:"+63",number:me}})(te.work_phone),P=[];te.work_phone&&P.push(`Work: ${te.work_phone}`),te.mobile_phone_1&&P.push(`Mobile 1: ${te.mobile_phone_1}`),te.mobile_phone_2&&P.push(`Mobile 2: ${te.mobile_phone_2}`);const fe=P.length>0?P.join(" | "):"";W({name:te.company_name||"",website:"",countryCode:ye.code,phone_number:ye.number,combinedPhoneNumbers:fe,billing_address:te.address||"",shipping_address:te.address||"",industry:"",status:"Prospect",territory_id:te.assigned_to?.territory?.id||null,assigned_to:te.assigned_to?.id||null,created_by:te.creator?.id||null}),J({last_name:te.last_name||"",first_name:te.first_name||"",account_id:null,title:te.title||"",department:te.department||"",email:te.email||"",work_phone:te.work_phone||"",mobile_phone_1:te.mobile_phone_1||"",mobile_phone_2:te.mobile_phone_2||"",notes:te.notes||"",assigned_to:te.assigned_to?.id||null,created_by:te.creator?.id||null}),be({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:te.assigned_to?.id||null,created_by:te.creator?.id||null})}},[te]);const ke=Q=>p(Q.target.value),F=g.useMemo(()=>{const Q=w.trim().toLowerCase(),ye=v.trim().toUpperCase();return f.filter(P=>{const fe=[P?.first_name,P?.last_name,P?.company_name,P?.title,P?.email,P?.work_phone,P?.assigned_to?`${P.assigned_to.first_name} ${P.assigned_to.last_name}`:""],me=Q===""||fe.some($e=>$e==null||$e===""?!1:$e.toString().toLowerCase().includes(Q));let Se=!1;return ye==="FILTER BY STATUS"?Se=(P.status?P.status.toUpperCase():"")!=="CONVERTED":Se=(P.status?P.status.toUpperCase():"")===ye,me&&Se})},[f,w,v]),ve=Math.max(1,Math.ceil(F.length/ef)||1);g.useEffect(()=>{_(1)},[w,v]),g.useEffect(()=>{_(Q=>{const ye=Math.max(1,Math.ceil(F.length/ef)||1);return Q>ye?ye:Q})},[F.length]);const Ce=g.useMemo(()=>{const Q=(j-1)*ef;return F.slice(Q,Q+ef)},[F,j]),D=()=>_(Q=>Math.max(Q-1,1)),re=()=>_(Q=>Math.min(Q+1,ve)),oe=Q=>{n(Q)},je=()=>{n(null),s&&e("/admin/leads",{replace:!0})},Re=()=>{i(!1),k(bj),A(!1),B(null),$(!1),m(null),sessionStorage.removeItem("editLeadData")},Ke=Q=>{Q.target.id==="modalBackdrop"&&Re()},et=()=>{k(bj),A(!1),B(null),m(null),i(!0)},qe=Q=>{if(!Q){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",Q),console.log("Current state - leadID:",s,"selectedLead:",a,"showModal:",r);const ye=$e=>{if(!$e)return{code:"+63",number:""};const We=$e.match(/^(\+\d+)\s(.+)$/);return We?{code:We[1],number:We[2]}:{code:"+63",number:$e}},P=ye(Q.work_phone),fe=ye(Q.mobile_phone_1),me=ye(Q.mobile_phone_2);let Se="";if(Q.assigned_to){Se=String(Q.assigned_to.id);const $e=l?.find(We=>We.id===Q.assigned_to.id);m($e)}k({first_name:Q.first_name||"",last_name:Q.last_name||"",company_name:Q.company_name||"",title:Q.title||"",department:Q.department||"",email:Q.email||"",work_ccode:P.code,work_phone:P.number,m1_ccode:fe.code,mobile_phone_1:fe.number,m2_ccode:me.code,mobile_phone_2:me.number,address:Q.address||"",notes:Q.notes||"",source:Q.source||"",territory_id:Q.territory?.id||null,lead_owner:Se,status:Q.status||"New"}),A(!0),B(Q.id),a?(console.log("Coming from detail view - closing detail modal and showing edit form"),n(null),i(!0)):(console.log("Already in list view - showing modal"),i(!0))},Ze=Q=>{if(!Q){console.error("handleDelete: lead is null or undefined");return}console.log("handleDelete called with lead:",Q);const ye=`${Q.first_name} ${Q.last_name}`||"this lead";G({title:"Delete Lead",message:t.jsxs("span",{children:["Are you sure you want to permanently delete"," ",t.jsx("span",{className:"font-semibold",children:ye}),"? This action cannot be undone."]}),confirmLabel:"Delete Lead",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:Q.id,name:ye}})},we=Q=>{const{name:ye,value:P}=Q.target;if(k(fe=>({...fe,[ye]:P})),ye==="lead_owner"){const fe=l.find(me=>me.id===parseInt(P));m(fe)}},V=Q=>{if(Q.preventDefault(),!T.first_name?.trim()||!T.last_name?.trim()){q.error("First name and last name are required.");return}if(!T.lead_owner){q.error("Please assign a lead owner.");return}const ye={...T,territory_id:T.territory_id?parseInt(T.territory_id):null,lead_owner:parseInt(T.lead_owner),work_phone:`${T.work_ccode} ${T.work_phone}`,mobile_phone_1:`${T.m1_ccode} ${T.mobile_phone_1}`,mobile_phone_2:`${T.m2_ccode} ${T.mobile_phone_2}`},P=E&&U?"update":"create",fe=`${T.first_name} ${T.last_name}`;G({title:P==="create"?"Confirm New Lead":"Confirm Update",message:P==="create"?t.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",t.jsx("span",{className:"font-semibold",children:fe}),"?"]}):t.jsxs("span",{children:["Save changes to ",t.jsx("span",{className:"font-semibold",children:fe}),"?"]}),confirmLabel:P==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:P,payload:ye,targetId:U||null,name:fe}})},pe=async()=>{if(!O?.action){G(null);return}const{action:Q}=O,{type:ye,payload:P,targetId:fe,name:me,lead:Se}=Q;console.log(P),ae(!0);try{if(ye==="create")$(!0),await se.post("/leads/create",P),q.success(`Lead "${me}" created successfully.`),Re(),await Me();else if(ye==="update"){if(!fe)throw new Error("Missing lead identifier for update.");$(!0);const $e=await se.put(`/leads/${fe}`,P);q.success(`Lead "${me}" updated successfully.`),a&&a.id===fe&&n(null),Re(),await Me()}else if(ye==="delete"){if(!fe)throw new Error("Missing lead identifier for deletion.");await se.delete(`/leads/${fe}`),q.success(`Lead "${me}" deleted successfully.`),a?.id===fe&&n(null),await Me()}}catch($e){console.error($e);const We=ye==="create"?"Failed to create lead. Please review the details and try again.":ye==="update"?"Failed to update lead. Please review the details and try again.":"Failed to delete lead. Please try again.",rt=$e.response?.data?.detail||We;q.error(rt)}finally{(ye==="create"||ye==="update")&&$(!1),ye!=="edit"&&(ae(!1),G(null))}},z=()=>{K||G(null)},ie=f.filter(Q=>Q.status==="New").length,ue=f.filter(Q=>Q.status==="Contacted").length,M=f.filter(Q=>Q.status==="Qualified").length,xe=f.filter(Q=>Q.status==="Converted").length,ne=f.filter(Q=>Q.status==="Lost").length,Te=[{title:"New",value:ie,icon:Cs,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:ue,icon:ft,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:M,icon:As,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:xe,icon:qi,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:ne,icon:tr,color:"text-red-600",bgColor:"bg-red-100"}];return t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[y&&t.jsx(xt,{message:"Loading leads..."}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[t.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[t.jsx(Cs,{className:"mr-2 text-blue-600"}),"Leads"]}),t.jsxs("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:[t.jsxs("button",{onClick:()=>{q.info("Download functionality coming soon")},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[t.jsx(Xr,{className:"mr-2"})," Download"]}),t.jsxs("button",{onClick:et,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[t.jsx(Lt,{className:"mr-2"})," Add Lead"]})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Te.map(Q=>t.jsx(Jpe,{...Q},Q.title))}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[t.jsx(yt,{size:20,className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search leads",value:w,onChange:ke,className:"focus:outline-none text-base w-full"})]}),t.jsx("div",{className:"w-full lg:w-1/4",children:t.jsxs("select",{value:v,onChange:Q=>C(Q.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[t.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),t.jsx("option",{value:"New",children:"New"}),t.jsx("option",{value:"Contacted",children:"Contacted"}),t.jsx("option",{value:"Qualified",children:"Qualified"}),t.jsx("option",{value:"Converted",children:"Converted"}),t.jsx("option",{value:"Lost",children:"Lost"})]})})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[t.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4",children:"Name"}),t.jsx("th",{className:"py-3 px-4",children:"Company"}),t.jsx("th",{className:"py-3 px-4",children:"Title"}),t.jsx("th",{className:"py-3 px-4",children:"Email"}),t.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),t.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),t.jsx("tbody",{children:F.length>0?Ce.map(Q=>t.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>oe(Q),children:[t.jsx("td",{className:"py-3 px-4",children:t.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[Q.first_name," ",Q.last_name]})}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:Q.company_name||"--"})}),t.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:Q.title||"--"}),t.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:Q.email||"--"}),t.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:Q.assigned_to?`${Q.assigned_to.first_name} ${Q.assigned_to.last_name}`:"--"}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Xpe(Q.status||"New")}`,children:qpe(Q.status||"New")})})]},Q.id)):t.jsx("tr",{children:t.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No leads found."})})})]})}),t.jsx(Ct,{className:"mt-4",totalItems:F.length,pageSize:ef,currentPage:j,onPrev:D,onNext:re,label:"leads"}),r&&t.jsx("div",{id:"modalBackdrop",onClick:Ke,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:Q=>Q.stopPropagation(),children:[t.jsx("button",{onClick:Re,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:t.jsx(jt,{size:22})}),t.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:E?"Edit Lead":"Add New Lead"}),t.jsxs("form",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),t.jsx("input",{type:"text",name:"first_name",value:T.first_name,onChange:we,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Last Name"}),t.jsx("input",{type:"text",placeholder:"Smith",name:"last_name",value:T.last_name,onChange:we,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Company"}),t.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:T.company_name,onChange:we,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Title"}),t.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:T.title,onChange:we,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),t.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:T.department,onChange:we,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Email"}),t.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:T.email,onChange:we,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),t.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[t.jsx("select",{name:"work_ccode",value:T.work_ccode,onChange:we,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:yj.map(Q=>t.jsx("option",{value:Q.code,children:Q.code},Q.id))}),t.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:T.work_phone,onChange:we,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),t.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[t.jsx("select",{name:"m1_ccode",value:T.m1_ccode,onChange:we,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:yj.map(Q=>t.jsx("option",{value:Q.code,children:Q.code},Q.id))}),t.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:T.mobile_phone_1,onChange:we,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),t.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[t.jsx("select",{name:"m2_ccode",value:T.m2_ccode,onChange:we,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:yj.map(Q=>t.jsx("option",{value:Q.code,children:Q.code},Q.id))}),t.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:T.mobile_phone_2,onChange:we,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),t.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),t.jsx("input",{type:"text",name:"address",value:T.address,onChange:we,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Assign To"}),t.jsx(e0e,{items:Array.isArray(l)?l:[],value:T.lead_owner??"",placeholder:"Search a user...",getLabel:Q=>`${Q.first_name} ${Q.last_name}`,onChange:Q=>{const ye=l.find(fe=>String(fe.id)===String(Q));m(ye);let P=null;ye&&ye.assigned_territory&&ye.assigned_territory.length===1&&(P=ye.assigned_territory[0].id),k(fe=>({...fe,lead_owner:Q,territory_id:P}))}})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),t.jsxs("select",{name:"territory_id",value:T.territory_id||"",onChange:we,disabled:!d||!d.assigned_territory||d.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[t.jsx("option",{value:"",disabled:!0,children:d?d.assigned_territory&&d.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),d&&d.assigned_territory&&d.assigned_territory.map(Q=>t.jsx("option",{value:Q.id,children:Q.name},Q.id))]})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),t.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:T.source,onChange:we,children:[t.jsx("option",{value:"",disabled:!0,children:"Select Source"}),t.jsx("option",{value:"Website",children:"Website"}),t.jsx("option",{value:"Referral",children:"Referral"}),t.jsx("option",{value:"Cold call",children:"Cold call"}),t.jsx("option",{value:"Event",children:"Event"}),t.jsx("option",{value:"Other",children:"Other"})]})]}),t.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),t.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:T.notes,onChange:we,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[t.jsx("button",{type:"button",onClick:Re,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:X||K,children:"Cancel"}),t.jsx("button",{type:"submit",onClick:V,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:X||K,children:X||K?"Processing...":E?"Update Lead":"Save Lead"})]})]})]})}),O&&t.jsx(Zpe,{open:!0,title:O.title,message:O.message,confirmLabel:O.confirmLabel,cancelLabel:O.cancelLabel,variant:O.variant,onConfirm:pe,onCancel:z,loading:K}),a&&!r&&!E&&t.jsx(T6,{lead:a,onBack:je,fetchLeads:Me,setSelectedLead:n,onEdit:qe,onDelete:Ze})]})}function Zpe({open:e,title:s,message:a,confirmLabel:n,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:c,onCancel:d}){if(!e)return null;const m=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s}),t.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),t.jsx("button",{type:"button",onClick:c,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${m}`,disabled:l,children:l?"Processing...":n})]})]})})}function Jpe({icon:e,title:s,value:a,color:n="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${s}`)};return t.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[t.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${n} mr-4`,children:e?t.jsx(e,{size:22}):null}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"text-xs text-gray-500 uppercase",children:s}),t.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function e0e({items:e=[],value:s="",onChange:a,getLabel:n,placeholder:r="Search...",disabled:i=!1,maxRender:l=200}){const[c,d]=g.useState(!1),[m,f]=g.useState(""),h=g.useRef(null),y=e.find(p=>String(p.id)===String(s)),N=y?n(y):"",w=g.useMemo(()=>{const p=m.trim().toLowerCase();return(p?e.filter(C=>(n(C)||"").toLowerCase().includes(p)):e).slice(0,l)},[e,m,n,l]);return g.useEffect(()=>{const p=v=>{h.current&&!h.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]),g.useEffect(()=>{c||f("")},[c]),t.jsxs("div",{ref:h,className:"relative w-full",children:[t.jsx("input",{disabled:i,value:c?m:N,placeholder:r,onFocus:()=>!i&&d(!0),onChange:p=>{f(p.target.value),c||d(!0)},className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),c&&!i&&t.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[t.jsx("div",{className:"max-h-56 overflow-y-auto",children:w.length>0?w.map(p=>{const v=String(p.id),C=n(p),j=String(s)===v;return t.jsx("button",{type:"button",onClick:()=>{a(v),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${j?"bg-blue-50":""}`,children:C||"--"},v)}):t.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&t.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}const tp={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},ea=({label:e,value:s,name:a,className:n=""})=>t.jsxs("div",{className:`flex flex-col ${n}`,children:[t.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),t.jsx("input",{type:"text",name:a,defaultValue:s,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),t0e=({data:e})=>t.jsxs("div",{className:"space-y-6 p-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsx(ea,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),t.jsx(ea,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),t.jsx(ea,{label:"Industry",name:"industry",value:e.industry})]}),t.jsx(ea,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),t.jsx(ea,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),s0e=({data:e})=>t.jsxs("div",{className:"space-y-6 p-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(ea,{label:"First Name",name:"firstName",value:e.firstName}),t.jsx(ea,{label:"Last Name",name:"lastName",value:e.lastName}),t.jsx(ea,{label:"Department",name:"department",value:e.department}),t.jsx(ea,{label:"Title",name:"title",value:e.title}),t.jsx(ea,{label:"Work Phone",name:"workPhone",value:e.workPhone}),t.jsx(ea,{label:"Email",name:"email",value:e.email}),t.jsx(ea,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),t.jsx(ea,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),a0e=({data:e})=>t.jsxs("div",{className:"space-y-6 p-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(ea,{label:"Deal Name",name:"dealName",value:e.dealName}),t.jsxs("div",{className:"flex",children:[t.jsx(ea,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),t.jsx("div",{className:"flex flex-col justify-end ml-1",children:t.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),t.jsx(ea,{label:"Stage",name:"stage",value:e.stage}),t.jsx(ea,{label:"Territory",name:"territory",value:e.territory})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(ea,{label:"Description",name:"description",value:e.description}),t.jsx(ea,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function n0e({isOpen:e,onClose:s}){const[a,n]=g.useState(1),r=3;if(!e)return null;const i=()=>{a<r?n(a+1):(s(),n(1))},l=()=>{a>1&&n(a-1)},c=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],d=()=>{switch(a){case 1:return t.jsx(t0e,{data:tp});case 2:return t.jsx(s0e,{data:tp});case 3:return t.jsx(a0e,{data:tp});default:return null}};return t.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[t.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),t.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:tp.accountName})]}),t.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition",children:t.jsx($y,{className:"w-6 h-6"})})]}),t.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:c.map(m=>t.jsx("button",{onClick:()=>n(m.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${a===m.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:m.name},m.id))}),t.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:d()}),t.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[a>1&&t.jsx("button",{onClick:l,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),a<r?t.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):t.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}function E6({selectedDeal:e,show:s,onClose:a,activeTab:n,setActiveTab:r,onEdit:i,onDelete:l,onStatusUpdate:c}){const d=it(),[m]=Aa(),f=m.get("id"),[h,y]=g.useState(e||null),[N,w]=g.useState(n||"Overview"),{user:p}=zt();g.useEffect(()=>{console.log("AdminDealsInformation mounted",h),console.log("User:",p)},[h,p]);const v=n!==void 0?n:N;if(g.useEffect(()=>{(async()=>{if(f&&!e)try{console.log("Fetching deal from route, ID:",f);const k=(await se.get("/deals/admin/fetch-all")).data||[];console.log("All deals fetched:",k.length);const E=k.find(A=>A.id===parseInt(f));if(console.log("Found deal:",E),E){console.log("Deal data structure:",{id:E.id,name:E.name,amount:E.amount,stage:E.stage,account:E.account,contact:E.contact,assigned_deals:E.assigned_deals,deal_creator:E.deal_creator,allKeys:Object.keys(E)});const A={...E,amount:typeof E.amount=="number"?E.amount:parseFloat(E.amount||0),probability:E.probability||0};y(A)}else console.warn("Deal not found with ID:",f)}catch(T){console.error("Error fetching deal:",T)}})()},[f,e]),!h&&!f||f&&!h)return null;const C=_=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[_]||"bg-gray-100 text-gray-700";function j(_){return _?new Date(_).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[t.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:t.jsxs("div",{className:"flex items-start justify-between w-full",children:[t.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),t.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:t.jsx("button",{onClick:()=>{a?a():d(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:t.jsx(jt,{size:25})})})]})}),t.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:t.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[t.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:h.name}),t.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${C(h.stage)}`,children:h.stage})]}),t.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",j(h.created_at)]})]}),t.jsxs("div",{className:"flex flex-col items-end gap-2",children:[t.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[" ",h.amount?h.amount.toLocaleString():"0"]}),t.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${h.probability}%`}})}),t.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",h.probability,"% Complete "]}),(h.created_by===p?.id||h.assigned_to===p?.id)&&t.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[t.jsxs("button",{type:"button",onClick:()=>{i&&i(h)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[t.jsx(hs,{className:"mr-1 sm:mr-2",size:16}),t.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),t.jsxs("button",{type:"button",onClick:()=>{l&&l(h)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[t.jsx(Nt,{className:"mr-1 sm:mr-2",size:16}),t.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]})}),t.jsx("div",{className:"border-b border-gray-200 my-5"}),t.jsxs("div",{className:"p-6 lg:p-4",children:[t.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(_=>t.jsx("button",{onClick:()=>{r?r(_):w(_)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${v===_?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:_},_))}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[t.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[v==="Overview"&&t.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),t.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[t.jsx("strong",{children:"Description:"})," ",h.description]}),t.jsx("div",{className:"h-px bg-gray-200 w-full"}),t.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[t.jsx("strong",{children:"Expected Close Date:"})," ",h.close_date]}),t.jsx("div",{className:"h-px bg-gray-200 w-full"}),t.jsxs("div",{className:"mt-4 py-3 w-full",children:[t.jsxs("div",{className:"relative flex flex-col w-full",children:[t.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const _=(h?.stage||"PROSPECTING").toUpperCase(),k=(A=>A==="PROSPECTING"?0:A==="QUALIFICATION"?1:A==="PROPOSAL"?2:A==="NEGOTIATION"?3:A==="CLOSED_WON"||A==="CLOSED_LOST"?4:-1)(_);return[0,1,2,3,4].map(A=>k===A?"orange":k>A?"green":"gray").map((A,U)=>t.jsxs(at.Fragment,{children:[t.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${A==="green"?"bg-green-500 border-green-500":A==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),U<4&&t.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},U))})()}),t.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((_,T)=>t.jsx("span",{className:"text-center flex-1 break-words",children:_},T))})]}),t.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:h.stage})]})]}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),t.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[t.jsxs("p",{children:[t.jsx("strong",{children:"Account:"})," ",h.account?.name]}),t.jsx("div",{className:"h-px bg-gray-200 w-full"}),t.jsxs("p",{children:[t.jsx("strong",{children:"Primary Contact:"})," ",h.contact?.first_name," ",h.contact?.last_name]}),t.jsx("div",{className:"h-px bg-gray-200 w-full"}),t.jsxs("p",{children:[t.jsx("strong",{children:"Phone:"})," ",h.contact?.work_phone]}),t.jsx("div",{className:"h-px bg-gray-200 w-full"}),t.jsxs("p",{children:[t.jsx("strong",{children:"Email:"})," ",h.contact?.email]}),t.jsx("div",{className:"h-px bg-gray-200 w-full"}),t.jsxs("p",{children:[t.jsx("strong",{children:"Assigned To:"})," ",h.assigned_deals?.first_name," ",h.assigned_deals?.last_name]})]})]})]}),v==="Notes"&&t.jsxs("div",{className:"mt-4 w-full",children:[t.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:t.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[t.jsx("div",{className:"flex items-start justify-between",children:t.jsx("div",{children:t.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),t.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:h.description||"No notes available."})]})]}),v==="Activities"&&t.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:ft,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:dt,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((_,T)=>t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[t.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[t.jsx("div",{className:"text-gray-600 mt-1",children:t.jsx(_.icon,{size:24})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"font-medium text-gray-900 break-words",children:_.title}),t.jsx("p",{className:"text-sm text-gray-500 break-words",children:_.desc}),t.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[t.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),t.jsx("p",{className:"text-sm text-gray-700 break-words",children:_.user})]})]})]}),t.jsx("p",{className:"text-sm text-gray-500 break-words",children:_.date})]},T))]}),v==="Edit"&&t.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[t.jsxs("label",{className:"block mb-3 break-words",children:[t.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),t.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:h.name})]}),t.jsxs("label",{className:"block mb-3 break-words",children:[t.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),t.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:h.description})]}),t.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),t.jsx("div",{className:"w-full lg:w-auto",children:t.jsx(Ry,{selectedDeal:h,onStatusUpdate:c,onClose:a})})]})]})]})})}const tf=10;function r0e(){g.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const[e,s]=g.useState(""),[a,n]=g.useState("Filter by Stage"),[r,i]=g.useState("Filter by Owner"),[l,c]=g.useState(null),[d,m]=g.useState("Overview"),[f,h]=g.useState(!1),[y,N]=g.useState(null),[w,p]=g.useState(!1),[v,C]=g.useState(1),[j,_]=g.useState(!1),[T,k]=g.useState(null),[E,A]=g.useState(!1),[U,B]=g.useState(!1),[X,$]=g.useState(null),[O,G]=g.useState([]),[K,ae]=g.useState([]),[R,Z]=g.useState([]),[te,ge]=g.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),le={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST"},W=M=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"})[M]||M||"--",ee=M=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[M]||"bg-gray-100 text-gray-700",J=g.useMemo(()=>{const M=e.trim().toLowerCase(),xe=a.trim(),ne=r.trim();return(y??[]).filter(Te=>{const Q=[Te?.name,Te?.description,Te?.account?.name,Te?.contact?.first_name,Te?.contact?.last_name,Te?.assigned_deals?.first_name,Te?.assigned_deals?.last_name],ye=M===""||Q.some(me=>me==null||me===""?!1:me.toString().toLowerCase().includes(M)),P=xe==="Filter by Stage"||xe===""||Te.stage===le[xe]||Te.stage===xe,fe=ne==="Filter by Owner"||ne===""||`${Te.assigned_deals?.first_name||""} ${Te.assigned_deals?.last_name||""}`.trim().toLowerCase()===ne.toLowerCase();return ye&&P&&fe})},[y,e,a,r]),he=Math.max(1,Math.ceil(J.length/tf)||1);g.useEffect(()=>{C(1)},[e,a,r]),g.useEffect(()=>{C(M=>{const xe=Math.max(1,Math.ceil(J.length/tf)||1);return M>xe?xe:M})},[J.length]);const be=g.useMemo(()=>{const M=(v-1)*tf;return J.slice(M,M+tf)},[J,v]),Le=()=>C(M=>Math.max(M-1,1)),Me=()=>C(M=>Math.min(M+1,he)),ke=()=>{ge({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),B(!1),$(null),h(!0)},F=async()=>{p(!0);try{const M=await se.get("/deals/admin/fetch-all"),ne=[...Array.isArray(M.data)?M.data:[]].sort((Te,Q)=>{const ye=Te?.created_at?new Date(Te.created_at).getTime():0;return(Q?.created_at?new Date(Q.created_at).getTime():0)-ye});N(ne)}catch(M){M.response&&M.response.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch deals. Please try again later."),console.error(M)}finally{p(!1)}},ve=async()=>{try{const M=await se.get("/accounts/admin/fetch-all");G(Array.isArray(M.data)?M.data:[])}catch(M){console.error(M),M.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},Ce=async()=>{try{const M=await se.get("/contacts/admin/fetch-all");ae(Array.isArray(M.data)?M.data:[])}catch(M){console.error(M),M.response?.status===403&&q.warn("Unable to load contacts (permission denied).")}},D=async()=>{try{const M=await se.get("/users/all");Z(Array.isArray(M.data)?M.data:[])}catch(M){console.error(M),M.response?.status===403&&q.warn("Unable to load users (permission denied).")}};g.useEffect(()=>{F(),ve(),Ce(),D()},[]);const re=M=>{M&&(ge({id:M.id||null,name:M.name||"",account_id:M.account_id?.toString()||"",primary_contact_id:M.primary_contact_id?.toString()||"",stage:M.stage||"PROPOSAL",amount:M.amount?.toString()||"",close_date:M.close_date?new Date(M.close_date).toISOString().split("T")[0]:"",assigned_to:M.assigned_to?.toString()||"",currency:M.currency||"PHP",description:M.description||""}),B(!0),$(M.id),c(null),h(!0))},oe=async(M=!1)=>{try{const xe=await se.get("/deals/admin/fetch-all"),Te=[...Array.isArray(xe.data)?xe.data:[]].sort((Q,ye)=>{const P=Q?.created_at?new Date(Q.created_at).getTime():0;return(ye?.created_at?new Date(ye.created_at).getTime():0)-P});if(N(Te),!M&&l&&l.id){const Q=Te.find(ye=>ye.id===l.id);Q&&c({...Q})}}catch(xe){console.error("Failed to refresh deal data:",xe),await F()}},je=M=>{const xe=M.name.trim();if(!xe){q.error("Deal name is required.");return}const ne=U&&X?"update":"create",Te=xe;k({title:ne==="create"?"Confirm New Deal":"Confirm Update",message:ne==="create"?t.jsxs("span",{children:["Are you sure you want to create"," ",t.jsx("span",{className:"font-semibold",children:Te}),"?"]}):t.jsxs("span",{children:["Save changes to ",t.jsx("span",{className:"font-semibold",children:Te}),"?"]}),confirmLabel:ne==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:ne,formData:M,targetId:X||null,name:Te}})},Re=M=>{if(!M)return;const xe=M.name||"this deal";k({title:"Delete Deal",message:t.jsxs("span",{children:["Are you sure you want to permanently delete"," ",t.jsx("span",{className:"font-semibold",children:xe}),"? This action cannot be undone."]}),confirmLabel:"Delete Deal",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:M.id,name:xe}})},Ke=async()=>{if(!T?.action){k(null);return}const{action:M}=T,{type:xe,formData:ne,targetId:Te,name:Q}=M;A(!0);try{if(xe==="create"){_(!0);const ye={name:ne.name.trim(),account_id:parseInt(ne.account_id),primary_contact_id:ne.primary_contact_id?parseInt(ne.primary_contact_id):null,stage:ne.stage,amount:ne.amount?parseFloat(ne.amount):null,currency:ne.currency||"PHP",close_date:ne.close_date||null,description:ne.description||null,assigned_to:ne.assigned_to?parseInt(ne.assigned_to):null};await se.post("/deals/admin/create",ye),q.success(`Deal "${Q}" created successfully.`),h(!1),await F()}else if(xe==="update"){if(!Te)throw new Error("Missing deal identifier for update.");_(!0);const ye={};ne.name!==void 0&&(ye.name=ne.name.trim()),ne.account_id!==void 0&&ne.account_id!==""&&(ye.account_id=parseInt(ne.account_id)),ne.primary_contact_id!==void 0&&(ye.primary_contact_id=ne.primary_contact_id?parseInt(ne.primary_contact_id):null),ne.stage!==void 0&&(ye.stage=ne.stage),ne.amount!==void 0&&ne.amount!==""&&(ye.amount=parseFloat(ne.amount)),ne.currency!==void 0&&(ye.currency=ne.currency),ne.close_date!==void 0&&(ye.close_date=ne.close_date||null),ne.description!==void 0&&(ye.description=ne.description||null),ne.assigned_to!==void 0&&(ye.assigned_to=ne.assigned_to?parseInt(ne.assigned_to):null),await se.put(`/deals/admin/${Te}`,ye),q.success(`Deal "${Q}" updated successfully.`),h(!1),await F()}else if(xe==="delete"){if(!Te)throw new Error("Missing deal identifier for deletion.");await se.delete(`/deals/admin/${Te}`),q.success(`Deal "${Q}" deleted successfully.`),l?.id===Te&&c(null),await F()}}catch(ye){console.error(ye);const P=xe==="create"?"Failed to create deal. Please review the details and try again.":xe==="update"?"Failed to update deal. Please review the details and try again.":"Failed to delete deal. Please try again.",fe=ye.response?.data?.detail||P;q.error(fe)}finally{(xe==="create"||xe==="update")&&_(!1),A(!1),k(null)}},et=()=>{E||k(null)},qe=()=>{h(!1),ge({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),B(!1),$(null),_(!1)},Ze=(y??[]).filter(M=>M.stage==="PROSPECTING").length,we=(y??[]).filter(M=>M.stage==="QUALIFICATION").length,V=(y??[]).filter(M=>M.stage==="PROPOSAL").length,pe=(y??[]).filter(M=>M.stage==="NEGOTIATION").length,z=(y??[]).filter(M=>M.stage==="CLOSED_WON").length,ie=(y??[]).filter(M=>M.stage==="CLOSED_LOST").length,ue=[{title:"Prospecting",value:Ze,icon:w0,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:we,icon:ys,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:V,icon:Es,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:pe,icon:Vd,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:z,icon:As,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:ie,icon:tr,color:"text-red-600",bgColor:"bg-red-100"}];return t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[w&&t.jsx(xt,{message:"Loading deals..."}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[t.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[t.jsx(Es,{className:"mr-2 text-blue-600"}),"Deals"]}),t.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:t.jsxs("button",{onClick:ke,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[t.jsx(Lt,{className:"mr-2"})," Add Deal"]})})]}),t.jsx("div",{className:"grid grid-cols-1 p-2 sm:grid-cols-3 gap-4 mb-6 w-full break-words overflow-hidden",children:ue.map(M=>t.jsx(l0e,{...M},M.title))}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[t.jsx(yt,{size:20,className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search deals",value:e,onChange:M=>s(M.target.value),className:"focus:outline-none text-base w-full"})]}),t.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[t.jsxs("select",{value:a,onChange:M=>n(M.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[t.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),t.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),t.jsx("option",{value:"Qualification Stage",children:"Qualification"}),t.jsx("option",{value:"Proposal Stage",children:"Proposal"}),t.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),t.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),t.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"})]}),t.jsxs("select",{value:r,onChange:M=>i(M.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[t.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((y??[]).map(M=>`${M.assigned_deals?.first_name} ${M.assigned_deals?.last_name}`))].map((M,xe)=>t.jsx("option",{value:M,children:M},xe))]})]})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[t.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),t.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),t.jsx("th",{className:"py-3 px-4",children:"Account"}),t.jsx("th",{className:"py-3 px-4",children:"Contact"}),t.jsx("th",{className:"py-3 px-4",children:"Stage"}),t.jsx("th",{className:"py-3 px-4",children:"Value"}),t.jsx("th",{className:"py-3 px-4",children:"Close Date"}),t.jsx("th",{className:"py-3 px-4",children:"Owner"})]})}),t.jsx("tbody",{children:J.length>0?be.map(M=>t.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{c({...M})},children:[t.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:M.deal_id?M.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),t.jsx("td",{className:"py-3 px-4",children:t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:M.name}),t.jsx("div",{className:"text-gray-500 text-xs break-all",children:M.description||"--"})]})}),t.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:M.account?.name||"--"}),t.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:M.contact?.first_name&&M.contact?.last_name?`${M.contact.first_name} ${M.contact.last_name}`:M.contact?.first_name||M.contact?.last_name||"--"}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ee(M.stage)}`,children:W(M.stage)})}),t.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",M.amount?.toLocaleString()||"0"]}),t.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:M.close_date||"--"}),t.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:M.assigned_deals?.first_name&&M.assigned_deals?.last_name?`${M.assigned_deals.first_name} ${M.assigned_deals.last_name}`:M.assigned_deals?.first_name||M.assigned_deals?.last_name||"--"})]},M.id)):t.jsx("tr",{children:t.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No deals found."})})})]})}),t.jsx(Ct,{className:"mt-4",totalItems:J.length,pageSize:tf,currentPage:v,onPrev:Le,onNext:Me,label:"deals"}),f&&t.jsx(o0e,{onClose:qe,formData:te,setFormData:ge,isEditing:U,onSubmit:je,isSubmitting:j||E,accounts:O,contacts:K,users:R}),l&&t.jsx(E6,{selectedDeal:l,show:!!l,onClose:()=>c(null),activeTab:d,setActiveTab:m,onEdit:re,onDelete:Re,onStatusUpdate:oe}),T&&t.jsx(i0e,{open:!0,title:T.title,message:T.message,confirmLabel:T.confirmLabel,cancelLabel:T.cancelLabel,variant:T.variant,onConfirm:Ke,onCancel:et,loading:E})]})}function i0e({open:e,title:s,message:a,confirmLabel:n,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:c,onCancel:d}){if(!e)return null;const m=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s}),t.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),t.jsx("button",{type:"button",onClick:c,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${m}`,disabled:l,children:l?"Processing...":n})]})]})})}function l0e({icon:e,title:s,value:a,color:n="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${s}`)};return t.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[t.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${n} mr-4`,children:e?t.jsx(e,{size:22}):null}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"text-xs text-gray-500 uppercase",children:s}),t.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function o0e({onClose:e,formData:s,setFormData:a,isEditing:n=!1,onSubmit:r,isSubmitting:i=!1,accounts:l=[],contacts:c=[],users:d=[]}){const m=h=>{h.preventDefault(),r&&r(s)},f=h=>{h.target.id==="modalBackdrop"&&e()};return t.jsx("div",{id:"modalBackdrop",onClick:f,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:h=>h.stopPropagation(),children:[t.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:t.jsx(jt,{size:22})}),t.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:n?"Edit Deal":"Create Deal"}),t.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:m,children:[t.jsx(vj,{label:"Deal Name",name:"name",value:s.name,onChange:h=>a({...s,name:h.target.value}),placeholder:"Enter deal name",required:!0,disabled:i,className:"md:col-span-2"}),t.jsx(sf,{label:"Account",name:"account_id",value:s.account_id||"",onChange:h=>a({...s,account_id:h.target.value}),options:[{value:"",label:"Select Account"},...l.map(h=>({value:h.id.toString(),label:h.name}))],required:!0,disabled:i}),t.jsx(sf,{label:"Primary Contact",name:"primary_contact_id",value:s.primary_contact_id||"",onChange:h=>a({...s,primary_contact_id:h.target.value}),options:[{value:"",label:"Select Contact (Optional)"},...c.map(h=>({value:h.id.toString(),label:`${h.first_name} ${h.last_name}`.trim()||h.email}))],disabled:i}),t.jsx(sf,{label:"Stage",name:"stage",value:s.stage,onChange:h=>a({...s,stage:h.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"}],disabled:i}),t.jsx(vj,{label:"Amount",name:"amount",type:"number",step:"0.01",value:s.amount,onChange:h=>a({...s,amount:h.target.value}),placeholder:"0",disabled:i}),t.jsx(sf,{label:"Currency",name:"currency",value:s.currency||"PHP",onChange:h=>a({...s,currency:h.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),t.jsx(vj,{label:"Close Date",name:"close_date",type:"date",value:s.close_date||"",onChange:h=>a({...s,close_date:h.target.value}),disabled:i}),t.jsx(sf,{label:"Assign To",name:"assigned_to",value:s.assigned_to||"",onChange:h=>a({...s,assigned_to:h.target.value}),options:[{value:"",label:"Assign To (Optional)"},...d.map(h=>({value:h.id.toString(),label:`${h.first_name} ${h.last_name}`.trim()||h.email}))],disabled:i||n,className:"md:col-span-2"}),t.jsx(c0e,{label:"Description",name:"description",value:s.description,onChange:h=>a({...s,description:h.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[t.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),t.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":n?"Update Deal":"Save Deal"})]})]})]})})}function vj({label:e,name:s,value:a,onChange:n,placeholder:r,type:i="text",required:l=!1,disabled:c=!1,className:d=""}){return t.jsxs("div",{className:d,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("input",{type:i,name:s,value:a??"",onChange:n,placeholder:r,required:l,disabled:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]})}function sf({label:e,name:s,value:a,onChange:n,options:r,required:i=!1,disabled:l=!1,className:c=""}){return t.jsxs("div",{className:c,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("select",{name:s,value:a??"",onChange:n,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(d=>t.jsx("option",{value:d.value,children:d.label},d.value))})]})}function c0e({label:e,name:s,value:a,onChange:n,placeholder:r,required:i=!1,disabled:l=!1,className:c="",rows:d=3}){return t.jsxs("div",{className:c,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("textarea",{name:s,value:a??"",onChange:n,placeholder:r,required:i,disabled:l,rows:d,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}const af=10,Nj=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],wj={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:""},fr=e=>{if(!e)return"Draft";const s=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[s]||"Draft"},jj=e=>e?e.toString().toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()):"--",d0e=e=>{switch(fr(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},u0e=e=>{switch(fr(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},sp=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",nf=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",m0e=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const s=new Date(e);if(isNaN(s.getTime()))return"";const a=s.getFullYear(),n=String(s.getMonth()+1).padStart(2,"0"),r=String(s.getDate()).padStart(2,"0");return`${a}-${n}-${r}`}catch{return""}},Cj=(e,s)=>{if(!e||s==null||s==="")return"";const a=Number(s);if(Number.isNaN(a))return"";const n=new Date(e);return isNaN(n.getTime())?"":(n.setDate(n.getDate()+a),n.toISOString().slice(0,10))},d0=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},f0e=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const n of e){const r=localStorage.getItem(n);if(r)try{const i=JSON.parse(r),l=d0(i);if(l)return l}catch{}}const s=localStorage.getItem("user_id"),a=d0(s);return a||null},h0e=e=>{if(!e)return"";const a=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(n=>n!=null&&String(n).trim()!=="");return a?String(a):""},g0e=e=>{if(!e)return"";const a=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(n=>n!=null&&String(n).trim()!=="");return a?String(a):""};function x0e(){const e=it();g.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[s,a]=g.useState([]),[n,r]=g.useState(!1),[i,l]=g.useState([]),[c,d]=g.useState([]),[m,f]=g.useState([]),[h,y]=g.useState([]),[N,w]=g.useState(null),[p,v]=g.useState(null),[C,j]=g.useState(!1),[_,T]=g.useState(!1),[k,E]=g.useState(!1),[A,U]=g.useState(null),[B,X]=g.useState(!1),[$,O]=g.useState(null),[G,K]=g.useState(wj),[ae,R]=g.useState(""),[Z,te]=g.useState("Filter by Status"),[ge,le]=g.useState(null),[W,ee]=g.useState(1),[J,he]=g.useState("Overview"),[be,Le]=g.useState("Draft");g.useEffect(()=>{let I=!0;return(async()=>{const H=f0e();if(H&&I){w(H);return}try{const de=await se.get("/auth/me"),_e=d0(de?.data);if(_e&&I){w(_e);return}}catch{}try{const de=await se.get("/users/me"),_e=d0(de?.data);if(_e&&I){w(_e);return}}catch{}I&&w(null)})(),()=>{I=!1}},[]);const Me=g.useCallback(I=>I&&c.find(H=>String(H.id)===String(I))?.name||"",[c]),ke=g.useCallback(I=>{if(!I)return"";const Ne=m.find(H=>String(H.id)===String(I));return Ne?`${Ne.first_name} ${Ne.last_name}`.trim():""},[m]),F=g.useCallback(I=>{if(!I)return"--";const Ne=i.find(H=>String(H.id)===String(I));return Ne?.deal_name||Ne?.name||`Deal #${I}`},[i]),ve=g.useCallback(I=>{const Ne=i.find(_e=>String(_e.id)===String(I)),H=h0e(Ne);let de=g0e(Ne);if(!de&&H){const _e=m.filter(Ae=>String(Ae.account_id||"")===String(H));if(_e.length>0){const Ae=[..._e].sort((He,st)=>{const bt=`${He.first_name||""} ${He.last_name||""}`.trim().toLowerCase(),ss=`${st.first_name||""} ${st.last_name||""}`.trim().toLowerCase();return bt.localeCompare(ss)});de=String(Ae[0].id)}}if(H&&de){const _e=m.find(Ae=>String(Ae.id)===String(de));_e?.account_id&&String(_e.account_id)!==String(H)&&(de="")}return{accountId:H||"",contactId:de||""}},[i,m]),Ce=g.useCallback(I=>{if(!I)return"--";if(I.deal?.deal_name)return I.deal.deal_name;if(I.deal?.name)return I.deal.name;const Ne=I.deal_id||I.deal?.id;return Ne?F(Ne):"--"},[F]),D=g.useCallback(I=>{if(!I)return"--";if(I.account?.name)return I.account.name;let Ne=I.account_id||I.account?.id;if(!Ne){const H=I.deal_id||I.deal?.id;H&&(Ne=ve(H).accountId)}return Ne?Me(Ne)||`Account #${Ne}`:"--"},[ve,Me]),re=g.useCallback(I=>{if(!I)return"--";if(I.contact?.first_name||I.contact?.last_name)return`${I.contact?.first_name||""} ${I.contact?.last_name||""}`.trim()||"--";let Ne=I.contact_id||I.contact?.id;if(!Ne){const de=I.deal_id||I.deal?.id;de&&(Ne=ve(de).contactId)}return(Ne?ke(Ne):"")||(Ne?`Contact #${Ne}`:"--")},[ve,ke]),oe=g.useCallback(async(I=null)=>{r(!0);try{const Ne=await se.get("/quotes/admin/fetch-all"),de=[...Array.isArray(Ne.data)?Ne.data:[]].sort((_e,Ae)=>{const He=_e?.created_at||_e?.updated_at||0,st=Ae?.created_at||Ae?.updated_at||0;return new Date(st)-new Date(He)});if(a(de),I){const _e=de.find(Ae=>Ae.id===I);v(_e||null)}}catch(Ne){console.error(Ne),a([]),Ne.response?.status===403?q.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):q.error("Failed to fetch quotes. Please try again later.")}finally{r(!1)}},[]),je=g.useCallback(async()=>{try{const I=await se.get("/deals/admin/fetch-all");l(Array.isArray(I.data)?I.data:[])}catch(I){console.error(I),I.response?.status===403&&q.warn("Unable to load deals (permission denied).")}},[]),Re=g.useCallback(async()=>{try{const I=await se.get("/accounts/admin/fetch-all");d(Array.isArray(I.data)?I.data:[])}catch(I){console.error(I),I.response?.status===403&&q.warn("Unable to load accounts (permission denied).")}},[]),Ke=g.useCallback(async()=>{try{const I=await se.get("/contacts/admin/fetch-all");f(Array.isArray(I.data)?I.data:[])}catch(I){console.error(I),I.response?.status===403&&q.warn("Unable to load contacts (permission denied).")}},[]),et=g.useCallback(async()=>{try{const I=await se.get("/users/all");y(Array.isArray(I.data)?I.data:[])}catch(I){console.error(I),I.response?.status===403&&q.warn("Unable to load users (permission denied).")}},[]);g.useEffect(()=>{oe(),je(),Re(),Ke(),et()},[oe,je,Re,Ke,et]);const qe=g.useMemo(()=>{const I=ae.trim().toLowerCase(),Ne=Z.trim();return s.filter(H=>{const de=Ce(H),_e=D(H),Ae=re(H),He=Cj(H.presented_date,H.validity_days),st=[H.quote_id,de,_e,Ae,H.total_amount?.toString(),H.validity_days?.toString(),H.presented_date?nf(H.presented_date):"",He?nf(He):"",H.assigned_user?.first_name,H.assigned_user?.last_name,H.creator?.first_name,H.creator?.last_name,H.status,H.notes,sp(H.created_at),sp(H.updated_at)],bt=I===""||st.some(cs=>cs==null?!1:cs.toString().toLowerCase().includes(I)),ss=Ne==="Filter by Status"||fr(H.status)===Ne;return bt&&ss})},[s,ae,Z,Ce,D,re]),Ze=Math.max(1,Math.ceil(qe.length/af)||1);g.useEffect(()=>ee(1),[ae,Z]),g.useEffect(()=>{ee(I=>{const Ne=Math.max(1,Math.ceil(qe.length/af)||1);return I>Ne?Ne:I})},[qe.length]);const we=g.useMemo(()=>{const I=(W-1)*af;return qe.slice(I,I+af)},[qe,W]),V=()=>ee(I=>Math.max(I-1,1)),pe=()=>ee(I=>Math.min(I+1,Ze)),z=I=>{v(I),he("Overview"),Le(fr(I?.status)||"Draft")},ie=()=>{v(null),he("Overview")},ue=I=>{I.target.id==="quoteModalBackdrop"&&!B&&ie()},M=g.useCallback(()=>{j(!1),T(!1),O(null),K(wj),E(!1)},[]),xe=I=>{I.target.id==="modalBackdrop"&&!k&&!B&&M()},ne=I=>{const{name:Ne,value:H}=I.target;if(Ne==="deal_id"){const{accountId:de,contactId:_e}=ve(H);K(Ae=>({...Ae,deal_id:H,account_id:de,contact_id:_e}));return}K(de=>({...de,[Ne]:H}))},Te=()=>{K(wj),T(!1),O(null),j(!0)},Q=I=>{if(!I)return;v(null);const Ne=I.deal?.id?String(I.deal.id):I.deal_id?String(I.deal_id):"",H=Ne?ve(Ne):{accountId:"",contactId:""},de=I.account?.id?String(I.account.id):I.account_id?String(I.account_id):H.accountId,_e=I.contact?.id?String(I.contact.id):I.contact_id?String(I.contact_id):H.contactId,Ae=I.assigned_user?.id?String(I.assigned_user.id):I.assigned_to?String(I.assigned_to):"";K({deal_id:Ne,account_id:de||"",contact_id:_e||"",total_amount:I.total_amount?.toString()||"",presented_date:m0e(I.presented_date),validity_days:I.validity_days!==null&&I.validity_days!==void 0?String(I.validity_days):"",status:fr(I.status)||"Draft",assigned_to:Ae,notes:I.notes||""}),T(!0),O(I.id),j(!0)},ye=I=>{if(!I)return;const Ne=I.quote_id||"this quote";U({title:"Delete Quote",message:t.jsxs("span",{children:["Are you sure you want to permanently delete"," ",t.jsx("span",{className:"font-semibold",children:Ne}),"? This action cannot be undone."]}),confirmLabel:"Delete Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:I.id,name:Ne}})},P=I=>{if(I.preventDefault(),!N){q.error("Unable to determine current user. Please log in again.");return}if(!G.deal_id){q.error("Deal is required.");return}if(!G.total_amount||Number(G.total_amount)<=0){q.error("Total amount must be greater than 0.");return}if(G.validity_days!==""&&Number(G.validity_days)<0){q.error("Validity days must be 0 or higher.");return}const Ne=ve(G.deal_id),H={deal_id:Number(G.deal_id),account_id:Ne.accountId?Number(Ne.accountId):null,contact_id:Ne.contactId?Number(Ne.contactId):null,total_amount:Number(G.total_amount),presented_date:G.presented_date||null,validity_days:G.validity_days===""?null:Number(G.validity_days),status:G.status||"Draft",assigned_to:G.assigned_to?Number(G.assigned_to):null,notes:G.notes?.trim()||null},de=_&&$?"update":"create",_e=F(G.deal_id),Ae=de==="create"?{...H,created_by_id:Number(N)}:H;U({title:de==="create"?"Confirm New Quote":"Confirm Update",message:de==="create"?t.jsxs("span",{children:["Are you sure you want to create a quote for"," ",t.jsx("span",{className:"font-semibold",children:_e}),"?"]}):t.jsxs("span",{children:["Save changes to"," ",t.jsx("span",{className:"font-semibold",children:_e}),"?"]}),confirmLabel:de==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:de,payload:Ae,targetId:$||null,name:_e}})},fe=async()=>{if(!A?.action){U(null);return}const{action:I}=A,{type:Ne,payload:H,targetId:de,name:_e}=I;X(!0);try{if(Ne==="create")E(!0),await se.post("/quotes/admin",H),q.success("Quote created successfully."),M(),await oe();else if(Ne==="update"){if(!de)throw new Error("Missing quote identifier for update.");E(!0),await se.put(`/quotes/admin/${de}`,H),q.success("Quote updated successfully."),M(),await oe(),p?.id===de&&v(null)}else if(Ne==="delete"){if(!de)throw new Error("Missing quote identifier for deletion.");const Ae=p?.id;le(de),await se.delete(`/quotes/admin/${de}`),q.success(`Quote "${_e}" deleted successfully.`),await oe(Ae&&Ae!==de?Ae:null),Ae===de&&v(null)}}catch(Ae){console.error(Ae);const He=Ne==="create"?"Failed to create quote. Please review the details and try again.":Ne==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";q.error(He),(Ne==="create"||Ne==="update")&&E(!1),Ne==="delete"&&le(null)}finally{(Ne==="create"||Ne==="update")&&E(!1),Ne==="delete"&&le(null),X(!1),U(null)}},me=()=>{B||U(null)},Se=g.useCallback((I,Ne)=>{const H=I?.deal_id??I?.deal?.id??"",de=H?Number(H):null,_e=de?ve(String(de)):{accountId:"",contactId:""},Ae=I?.account_id??I?.account?.id??_e.accountId??null,He=I?.contact_id??I?.contact?.id??_e.contactId??null,st=I?.total_amount??0,bt=I?.assigned_to??I?.assigned_user?.id??null;return{deal_id:de,account_id:Ae!=null&&String(Ae).trim()!==""?Number(Ae):null,contact_id:He!=null&&String(He).trim()!==""?Number(He):null,total_amount:Number(st),presented_date:I?.presented_date||null,validity_days:I?.validity_days===""||I?.validity_days===void 0||I?.validity_days===null?null:Number(I.validity_days),status:Ne,assigned_to:bt!=null&&String(bt).trim()!==""?Number(bt):null,notes:I?.notes?.trim()||null}},[ve]),$e=g.useCallback(async()=>{if(!p?.id)return;const I=fr(be),Ne=[I,I.toLowerCase()],H=async de=>se.patch(`/quotes/admin/${p.id}/status`,{status:de},{headers:{"Content-Type":"application/json"}});try{let de=!1;for(const _e of Ne)try{await H(_e),de=!0;break}catch(Ae){if(Ae?.response?.status===422)continue;throw Ae}if(!de){const _e=Se(p,I);if(!_e.deal_id){q.error("Cannot update status: missing deal_id on selected quote.");return}if(!_e.total_amount||_e.total_amount<=0){q.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await se.put(`/quotes/admin/${p.id}`,_e)}q.success(`Quote status updated to ${I}`),v(null),he("Overview"),await oe()}catch(de){console.error(de);const _e=de?.response?.data?.message||(de?.response?.data?.errors?Object.values(de.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";q.error(_e)}},[p,be,oe,Se]),We=[{label:"Filter by Status",value:"Filter by Status"},...Nj.map(I=>({label:I.label,value:I.value}))],rt=A?.action?.type==="delete"?A.action.targetId:null,wt=p&&(ge===p.id||rt===p.id),Ut=p&&ge===p.id,ze=p?t.jsx("div",{id:"quoteModalBackdrop",onClick:ue,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:I=>I.stopPropagation(),children:[t.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:t.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[t.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),t.jsx("button",{onClick:ie,className:"text-gray-500 hover:text-white transition cursor-pointer",children:t.jsx(es,{size:25})})]})}),t.jsxs("div",{className:"p-6 lg:p-4",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[t.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:Ce(p)}),t.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${u0e(p.status)}`,children:jj(p.status)})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Q(p),disabled:B||A?.action?.type==="update"&&A.action.targetId===p.id,children:[t.jsx(ys,{className:"mr-2"}),"Edit"]}),t.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>ye(p),disabled:!!wt,children:Ut?"Deleting...":t.jsxs(t.Fragment,{children:[t.jsx(Nt,{className:"mr-2"}),"Delete"]})})]})]}),t.jsx("div",{className:"border-b border-gray-200 my-5"}),t.jsxs("div",{className:"p-1 lg:p-4",children:[t.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(I=>t.jsx("button",{onClick:()=>he(I),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${J===I?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:I},I))}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[t.jsxs("div",{className:"lg:col-span-3",children:[J==="Overview"&&t.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Quote ID:"}),t.jsx("p",{children:p.quote_id||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Deal:"}),t.jsx("p",{children:Ce(p)||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Account:"}),t.jsx("p",{children:D(p)||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Contact:"}),t.jsx("p",{children:re(p)||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Total Amount:"}),t.jsx("p",{children:p.total_amount?`${Number(p.total_amount).toLocaleString()}`:"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Presented Date:"}),t.jsx("p",{children:nf(p.presented_date)||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Validity Days:"}),t.jsx("p",{children:p.validity_days!==null&&p.validity_days!==void 0?p.validity_days:"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),t.jsx("p",{children:nf(Cj(p.presented_date,p.validity_days))||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Status:"}),t.jsx("p",{children:jj(p.status)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Assigned To:"}),t.jsx("p",{children:p.assigned_user?`${p.assigned_user.first_name} ${p.assigned_user.last_name}`:"Unassigned"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Created By:"}),t.jsx("p",{children:p.creator?`${p.creator.first_name} ${p.creator.last_name}`:"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Created At:"}),t.jsx("p",{children:sp(p.created_at)||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Last Updated:"}),t.jsx("p",{children:sp(p.updated_at)||"N/A"})]})]})}),J==="Notes"&&t.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[t.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),t.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:p.notes||"No notes available."})]})]}),t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),t.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[t.jsxs("button",{onClick:()=>e("/group-manager/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),t.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/group-manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Quotes"}}}),children:[t.jsx(dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),t.jsxs("button",{onClick:()=>e("/group-manager/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ts,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),t.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:be||fr(p.status)||"Draft",onChange:I=>Le(I.target.value),children:Nj.map(I=>t.jsx("option",{value:I.value,children:I.label},I.value))}),t.jsx("button",{onClick:$e,disabled:fr(be)===fr(p.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${fr(be)===fr(p.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,Pe=t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[n&&t.jsx(xt,{message:"Loading quotes..."}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[t.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[t.jsx(en,{className:"mr-2 text-blue-600"})," Quotes"]}),t.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:t.jsxs("button",{onClick:Te,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[t.jsx(Lt,{className:"mr-2"})," Add Quote"]})})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[t.jsx(yt,{size:20,className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search quotes",value:ae,onChange:I=>R(I.target.value),className:"focus:outline-none text-base w-full"})]}),t.jsx("div",{className:"w-full lg:w-1/4",children:t.jsx("select",{value:Z,onChange:I=>te(I.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:We.map(I=>t.jsx("option",{value:I.value,children:I.label},I.value))})})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[t.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),t.jsx("th",{className:"py-3 px-4",children:"Deal"}),t.jsx("th",{className:"py-3 px-4",children:"Account"}),t.jsx("th",{className:"py-3 px-4",children:"Contact"}),t.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),t.jsx("th",{className:"py-3 px-4",children:"Status"}),t.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),t.jsx("th",{className:"py-3 px-4",children:"Expiry Date"})]})}),t.jsx("tbody",{children:n?t.jsx("tr",{children:t.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"Loading quotes..."})}):qe.length>0?we.map(I=>{const Ne=Cj(I.presented_date,I.validity_days);return t.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>z(I),children:[t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:I.quote_id||"--"})}),t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsx("div",{className:"break-words",children:Ce(I)||"--"})}),t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsx("div",{className:"text-sm text-gray-700 break-words",children:D(I)||"--"})}),t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsx("div",{className:"break-words",children:re(I)||"--"})}),t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsx("div",{className:"text-gray-700",children:I.total_amount?`${Number(I.total_amount).toLocaleString()}`:"--"})}),t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${d0e(I.status)}`,children:jj(I.status)})}),t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsx("div",{children:I.assigned_user?`${I.assigned_user.first_name} ${I.assigned_user.last_name}`:"Unassigned"})}),t.jsx("td",{className:"py-3 px-4 align-top",children:t.jsx("div",{className:"text-gray-500 text-xs",children:nf(Ne)||"--"})})]},I.id)}):t.jsx("tr",{children:t.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No quotes found."})})})]})}),t.jsx(Ct,{className:"mt-4",totalItems:qe.length,pageSize:af,currentPage:W,onPrev:V,onNext:pe,label:"quotes"})]}),lt=C?t.jsx("div",{id:"modalBackdrop",onClick:xe,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:I=>I.stopPropagation(),children:[t.jsx("button",{onClick:M,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:k||B,children:t.jsx(jt,{size:22})}),t.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:_?"Edit Quote":"Add New Quote"}),t.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:P,children:[t.jsx(_j,{label:"Deal",name:"deal_id",value:G.deal_id,onChange:ne,options:[{value:"",label:"Select deal"},...i.map(I=>({value:String(I.id),label:I.deal_name||I.name||`Deal #${I.id}`}))],required:!0,disabled:k||i.length===0,className:"md:col-span-2"}),t.jsx(_D,{label:"Account",value:Me(G.account_id)||(G.account_id?`Account #${G.account_id}`:""),disabled:!0}),t.jsx(_D,{label:"Contact",value:ke(G.contact_id)||(G.contact_id?`Contact #${G.contact_id}`:""),disabled:!0}),t.jsx(Sj,{label:"Total Amount",name:"total_amount",type:"number",value:G.total_amount,onChange:ne,placeholder:"0.00",required:!0,disabled:k}),t.jsx(Sj,{label:"Presented Date",name:"presented_date",type:"date",value:G.presented_date,onChange:ne,disabled:k}),t.jsx(Sj,{label:"Validity Days",name:"validity_days",type:"number",value:G.validity_days,onChange:ne,placeholder:"30",disabled:k}),t.jsx(_j,{label:"Assigned To",name:"assigned_to",value:G.assigned_to,onChange:ne,options:[{value:"",label:"Select assignee"},...h.filter(I=>I.role==="Manager").map(I=>({value:String(I.id),label:`${I.first_name} ${I.last_name} (${I.role})`}))],disabled:k||h.length===0}),t.jsx(_j,{label:"Status",name:"status",value:G.status,onChange:ne,options:Nj,required:!0,disabled:k,className:"md:col-span-2"}),t.jsx(p0e,{label:"Notes",name:"notes",value:G.notes,onChange:ne,placeholder:"Additional details...",rows:3,disabled:k,className:"md:col-span-2"}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[t.jsx("button",{type:"button",onClick:M,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:k||B,children:"Cancel"}),t.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:k||B,children:k?"Saving...":_?"Update Quote":"Save Quote"})]})]})]})}):null,ot=A?t.jsx(y0e,{open:!0,title:A.title,message:A.message,confirmLabel:A.confirmLabel,cancelLabel:A.cancelLabel,variant:A.variant,onConfirm:fe,onCancel:me,loading:B}):null;return t.jsxs(t.Fragment,{children:[p?ze:Pe,lt,ot]})}function Sj({label:e,name:s,value:a,onChange:n,placeholder:r,type:i="text",required:l=!1,disabled:c=!1,className:d=""}){return t.jsxs("div",{className:d,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("input",{type:i,name:s,value:a??"",onChange:n,placeholder:r,required:l,disabled:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]})}function _D({label:e,value:s,className:a="",disabled:n=!0}){return t.jsxs("div",{className:a,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("input",{type:"text",value:s??"",disabled:n,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function _j({label:e,name:s,value:a,onChange:n,options:r,required:i=!1,disabled:l=!1,className:c=""}){const d=a!=null?String(a):"",f=r.some(h=>String(h.value)===d)?d:"";return t.jsxs("div",{className:c,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("select",{name:s,value:f,onChange:n,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(h=>t.jsx("option",{value:String(h.value??""),children:h.label},h.value??h.label))})]})}function p0e({label:e,name:s,value:a,onChange:n,placeholder:r,rows:i=3,disabled:l=!1,className:c=""}){return t.jsxs("div",{className:c,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t.jsx("textarea",{name:s,value:a??"",onChange:n,placeholder:r,rows:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function y0e({open:e,title:s,message:a,confirmLabel:n,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:c,onCancel:d}){if(!e)return null;const m=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s}),t.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),t.jsx("button",{type:"button",onClick:c,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${m}`,disabled:l,children:l?"Processing...":n})]})]})})}const ap=10,TD={user_id:"",start_date:"",end_date:"",target_amount:""};function b0e({name:e,items:s=[],value:a="",onChange:n,getLabel:r,placeholder:i="Search..."}){const[l,c]=g.useState(!1),[d,m]=g.useState(""),f=g.useRef(null),h=s.find(w=>String(w.id)===String(a)),y=h?r(h):"",N=g.useMemo(()=>{const w=d.toLowerCase();return w?s.filter(p=>r(p).toLowerCase().includes(w)):s},[s,d,r]);return g.useEffect(()=>{const w=p=>{f.current&&!f.current.contains(p.target)&&c(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),t.jsxs("div",{ref:f,className:"flex justify-center w-full",children:[t.jsx("input",{value:l?d:y,placeholder:i,onFocus:()=>c(!0),onChange:w=>{m(w.target.value),c(!0)},className:"w-full max-w-md border text-gray-500 border-gray-300 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"}),l&&t.jsx("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:N.length?N.map(w=>t.jsx("button",{type:"button",onClick:()=>{n({target:{name:e,value:String(w.id)}}),c(!1),m("")},className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-50",children:r(w)},w.id)):t.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results found"})})]})}function v0e(){g.useEffect(()=>{document.title="Targets | Sari-Sari CRM"},[]);const[e,s]=g.useState([]),[a,n]=g.useState([]),[r,i]=g.useState(!1),[l,c]=g.useState(""),[d,m]=g.useState(1),[f,h]=g.useState(!1),[y,N]=g.useState(!1),[w,p]=g.useState(!1),[v,C]=g.useState(null),[j,_]=g.useState(TD),[T,k]=g.useState(null),[E,A]=g.useState(null),[U,B]=g.useState(!1),X=g.useCallback(async()=>{i(!0);try{const W=await se.get("/targets/admin/fetch-all");s(W.data)}catch(W){console.error(W),q.error("Failed to load targets.")}finally{i(!1)}},[]),$=g.useCallback(async()=>{try{const W=await se.get("/targets/admin/get-users");console.log("Users from API:",W.data),n(W.data)}catch(W){console.error(W),q.error("Failed to load users.")}},[]);g.useEffect(()=>{X(),$()},[X,$]);const O=g.useMemo(()=>e.reduce((W,ee)=>W+(Number(ee.target_amount)||0),0),[e]),G=g.useMemo(()=>{const W=l.toLowerCase();return e.filter(ee=>(ee.user?`${ee.user.first_name} ${ee.user.last_name}`.toLowerCase():"").includes(W)||ee.start_date?.includes(W)||ee.end_date?.includes(W))},[e,l]),K=Math.max(1,Math.ceil(G.length/ap)),ae=g.useMemo(()=>{const W=(d-1)*ap;return G.slice(W,W+ap)},[G,d]),R=W=>{const{name:ee,value:J}=W.target;_(he=>({...he,[ee]:J}))},Z=()=>{_(TD),N(!1),C(null),h(!0)},te=W=>{_({user_id:W.user?.id?String(W.user.id):"",start_date:W.start_date||"",end_date:W.end_date||"",target_amount:W.target_amount?.toString()||""}),N(!0),C(W.id),h(!0),k(null)},ge=W=>{const ee=W.user?`${W.user.first_name} ${W.user.last_name}`:"Unknown";A({title:"Delete Target",message:t.jsxs("span",{children:["Are you sure you want to delete the target for"," ",t.jsx("span",{className:"font-semibold",children:ee}),"?"]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:async()=>{await se.delete(`/targets/admin/${W.id}`),q.success("Target deleted successfully."),X(),k(null)}})},le=W=>{if(W.preventDefault(),!j.user_id||!j.start_date||!j.end_date||!j.target_amount){q.error("All fields are required.");return}if(new Date(j.end_date)<new Date(j.start_date)){q.error("End date must be after start date.");return}const ee={user_id:Number(j.user_id),target_amount:Number(j.target_amount),start_date:j.start_date,end_date:j.end_date},J=y?"Update Target":"Create Target";A({title:J,message:"Are you sure you want to proceed?",confirmLabel:J,cancelLabel:"Cancel",variant:"primary",action:async()=>{p(!0);try{y?(await se.put(`/targets/admin/${v}`,ee),q.success("Target updated successfully.")):(await se.post("/targets/admin/create",ee),q.success("Target created successfully.")),h(!1),X()}catch(he){console.error(he),q.error("Operation failed.")}finally{p(!1)}}})};return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&t.jsx(xt,{message:"Loading targets..."}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[t.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold",children:[t.jsx(sn,{className:"mr-2 text-blue-600"})," Targets"]}),t.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:t.jsxs("button",{onClick:Z,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[t.jsx(Lt,{className:"mr-2"})," Add Target"]})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-6",children:[t.jsx(ED,{title:"Total Targets",value:e.length}),t.jsx(ED,{title:"Total Target Amount",value:`${O.toLocaleString()}`})]}),t.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-4/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[t.jsx(yt,{className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search targets",value:l,onChange:W=>c(W.target.value),className:"w-full outline-none"})]})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[t.jsx("thead",{className:"bg-gray-100 font-semibold text-gray-600",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4 text-left",children:"User"}),t.jsx("th",{className:"py-3 px-4 text-left",children:"Target Amount"}),t.jsx("th",{className:"py-3 px-4 text-left",children:"Start Date"}),t.jsx("th",{className:"py-3 px-4 text-left",children:"End Date"})]})}),t.jsx("tbody",{children:ae.map(W=>t.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>k(W),children:[t.jsx("td",{className:"py-3 px-4 text-left",children:W.user?`${W.user.first_name} ${W.user.last_name}`:"Unknown"}),t.jsxs("td",{className:"py-3 px-4 text-left",children:["",Number(W.target_amount).toLocaleString()]}),t.jsx("td",{className:"py-3 px-4 text-left",children:W.start_date}),t.jsx("td",{className:"py-3 px-4 text-left",children:W.end_date})]},W.id))})]})}),t.jsx(Ct,{className:"mt-4",totalItems:G.length,pageSize:ap,currentPage:d,onPrev:()=>m(W=>Math.max(W-1,1)),onNext:()=>m(W=>Math.min(W+1,K)),label:"targets"})]}),T&&t.jsx(N0e,{target:T,onClose:()=>k(null),onEdit:()=>te(T),onDelete:()=>ge(T)}),f&&t.jsx(w0e,{formData:j,users:a,isEditing:y,isSubmitting:w,onChange:R,onClose:()=>h(!1),onSubmit:le}),E&&t.jsx(j0e,{...E,loading:U,onConfirm:async()=>{B(!0),await E.action(),B(!1),A(null)},onCancel:()=>A(null)})]})}function ED({title:e,value:s}){return t.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200",children:[t.jsx("div",{className:"p-3 rounded-full bg-blue-100 text-blue-600 mr-4",children:t.jsx(vr,{size:22})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500 uppercase",children:e}),t.jsx("p",{className:"text-2xl font-bold",children:s})]})]})}function N0e({target:e,onClose:s,onEdit:a,onDelete:n}){return t.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",onClick:s,children:t.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:r=>r.stopPropagation(),children:[t.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-4 rounded-t-xl",children:[t.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Target"}),t.jsx("button",{onClick:s,className:"text-gray-500 hover:text-white transition cursor-pointer",children:t.jsx(es,{size:25})})]}),t.jsx("div",{className:"p-6 lg:p-4",children:t.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[t.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:t.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:e.user&&`${e.user.first_name} ${e.user.last_name}`})}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[t.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 cursor-pointer",onClick:a,children:[t.jsx(ys,{className:"mr-2"}),"Edit"]}),t.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400 cursor-pointer",onClick:n,children:[t.jsx(Nt,{className:"mr-2"}),"Delete"]})]})]})}),t.jsx("div",{className:"border-b border-gray-200 my-5"}),t.jsxs("div",{className:"p-4 lg:p-6",children:[t.jsx("div",{className:"flex w-full bg-[#6A727D] text-white overflow-x-auto",children:t.jsx("button",{className:"flex-1 min-w-[90px] px-4 py-2 lg:text-lg text-sm font-medium text-center text-white",children:"Overview"})}),t.jsx("div",{className:"bg-white rounded-xl shadow-sm sm:p-6 lg:p-5 border border-gray-200 text-sm text-gray-700",children:t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-2 gap-4 sm:gap-6",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"User:"}),t.jsx("p",{children:e.user?`${e.user.first_name} ${e.user.last_name}`:"Unknown"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Target Amount:"}),t.jsxs("p",{children:["",Number(e.target_amount).toLocaleString()]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Start Date:"}),t.jsx("p",{children:e.start_date})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"End Date:"}),t.jsx("p",{children:e.end_date})]})]})})]})]})})}function w0e({formData:e,users:s,isEditing:a,isSubmitting:n,onChange:r,onClose:i,onSubmit:l}){return t.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl p-8 relative min-h-[50vh]",children:[t.jsx("button",{onClick:i,className:"absolute top-5 right-5",children:t.jsx(jt,{size:24})}),t.jsx("h2",{className:"text-2xl font-semibold text-center mb-8",children:a?"Edit Target":"Add New Target"}),t.jsxs("form",{onSubmit:l,className:"grid gap-5 text-base",children:[t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Assign User"}),t.jsx(b0e,{name:"user_id",items:s.filter(c=>c.role?.toLowerCase()==="manager"),value:e.user_id,onChange:r,getLabel:c=>`${c.first_name} ${c.last_name}`,placeholder:"Search manager..."})]}),t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:"Target Amount"}),t.jsx("div",{className:"flex justify-center w-full",children:t.jsx("input",{type:"number",name:"target_amount",placeholder:"0.00",value:e.target_amount,onChange:r,required:!0,className:"w-full max-w-md border text-gray-500 border-gray-300 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"})})]}),t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:"Start Date"}),t.jsx("div",{className:"flex justify-center w-full",children:t.jsx("input",{type:"date",name:"start_date",value:e.start_date,onChange:r,required:!0,className:"w-full max-w-md border text-gray-500 border-gray-300 text-gray-500 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"})})]}),t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:"End Date"}),t.jsx("div",{className:"flex justify-center w-full",children:t.jsx("input",{type:"date",name:"end_date",value:e.end_date,onChange:r,required:!0,className:"w-full max-w-md border text-gray-500 border-gray-300 text-gray-500 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"})})]}),t.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[t.jsx("button",{type:"button",onClick:i,className:"bg-red-400 text-white px-5 py-2 rounded-lg",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:n,className:"bg-tertiary text-white px-5 py-2 rounded-lg",children:n?"Saving...":"Save Target"})]})]})]})})}function j0e({title:e,message:s,confirmLabel:a,cancelLabel:n,variant:r,loading:i,onConfirm:l,onCancel:c}){return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:e}),t.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:s}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsx("button",{onClick:c,disabled:i,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:n}),t.jsx("button",{onClick:l,disabled:i,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${r==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary"}`,children:i?"Processing...":a})]})]})})}const AD=["To Do","In Progress","Review","Completed"],rf=10,C0e=e=>{if(!e)return"";const s=new Date(e);if(Number.isNaN(s.getTime()))return"";const a=s.getTimezoneOffset();return new Date(s.getTime()-a*60*1e3).toISOString().slice(0,16)},LD=e=>{if(!e)return"";const s=new Date(e);return Number.isNaN(s.getTime())?"":s.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},S0e=e=>{const s=e.subject?.trim()??"",a=e.description?.trim()??"",n=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),e.status&&String(e.status).toUpperCase();let r=null,i=null,l=null,c=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2&&(c=Number(e.relatedTo2)));const d=e.assignedTo?Number(e.assignedTo):null,m=l||c||i||r,f=l?"Contact":c?"Deal":i?"Account":r?"Lead":null;return{title:s,description:a,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:d,notes:n,is_personal:!1,lead_id:r,account_id:i,contact_id:l,deal_id:c,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:m,related_type:f}},_0e=e=>{const s=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",a=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",n=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",l=()=>e.lead?.id||e.lead_id,c=()=>e.account?.id||e.account_id,d=()=>e.contact?.id||e.contact_id,m=()=>e.deal?.id||e.deal_id,f=()=>e.task_assign_to?.id||e.assigned_to,h=()=>e.lead?.title||e.lead_id,y=()=>e.account?.name||e.account_id,N=()=>i||e.contact_id,w=()=>e.deal?.name||e.deal_id;let p="Lead",v="",C="",j="",_="Lead",T="",k="",E="";const A=c(),U=y(),B=l(),X=h();if(A){p="Account",_="Account",T=U,v=String(A);const $=d(),O=m(),G=N(),K=w();$?(C="Contact",k="Contact",E=G,j=String($)):O&&(k="Deal",C="Deal",E=K,j=String(O))}else B?(_="Lead",T=X,p="Lead",v=String(B)):e.related_type==="Account"&&(p="Account",v=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:e.status||"Not started",dueDate:n,dateAssigned:r,assignedToId:f()||null,assignedToName:s,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:a,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:_,relatedTo1Text:T,relatedType2Text:k,relatedTo2Text:E,subject:e.title,relatedType1:p,relatedTo1:v,relatedType2:C,relatedTo2:j}};function T0e(){g.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:s}=zt(),[a,n]=g.useState("board"),[r,i]=g.useState(!1),[l,c]=g.useState(null),[d,m]=g.useState(!1),[f,h]=g.useState([]),[y,N]=g.useState(!0),[w,p]=g.useState(""),[v,C]=g.useState("Filter by Status"),[j,_]=g.useState("Filter by Priority"),[T,k]=g.useState([]),[E,A]=g.useState(1),[U,B]=g.useState(null),[X,$]=g.useState(!1),O=it(),G=Xt(),[K,ae]=g.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""});g.useEffect(()=>{const D=G.state?.openTaskModal,re=G.state?.initialTaskData;D&&(i(!0),re&&ae(oe=>({...oe,...re})),O(G.pathname,{replace:!0,state:{}}))},[G,O]);const R=async()=>{try{const D=await se.get("/users/all");k(Array.isArray(D.data)?D.data:[])}catch(D){console.error("Failed to fetch users:",D),q.error("Failed to fetch users.")}},Z=async()=>{try{N(!0);const D=await se.get("/tasks/all"),oe=(Array.isArray(D.data)?D.data:[]).map(_0e);oe.sort((je,Re)=>{const Ke=je.createdAt?new Date(je.createdAt):0;return(Re.createdAt?new Date(Re.createdAt):0)-Ke}),console.log("Fetched Tasks:",oe),h(oe),a==="list"&&A(1)}catch(D){console.error("Failed to load tasks:",D),q.error("Failed to load tasks.")}finally{N(!1)}};g.useEffect(()=>{!s&&e&&(R(),Z())},[s,e]);const te=()=>{c(null),ae({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},ge=(D=null,re=!1)=>{c(D),m(re),D?ae({id:D.id,subject:D.title||"",description:D.description||"",priority:D.priority||"Normal",status:D.status||"Not started",dueDate:C0e(D.dueDate),assignedTo:D.assignedToId?String(D.assignedToId):"",notes:D.notes||"",relatedType1Text:D.relatedType1Text||"",relatedTo1Text:D.relatedTo1Text||"",relatedType2Text:D.relatedType2Text||"",relatedTo2Text:D.relatedTo2Text||"",relatedType1:D.relatedType1||"",relatedTo1:D.relatedTo1||"",relatedType2:D.relatedType2||"",relatedTo2:D.relatedTo2||""}):te(),i(!0)},le=()=>{i(!1),c(null),m(!1),te()},W=async D=>{const re=S0e(D);try{l&&!d?(await se.put(`/tasks/${l.id}`,re),q.success("Task updated successfully.")):(await se.post("/tasks/create",re),q.success("Task created successfully.")),i(!1),await Z()}catch(oe){console.error("Failed to save task:",oe);const je=oe.response?.data?.detail||"Failed to save task.";q.error(je)}},ee=D=>{D&&B({title:"Delete Task",message:t.jsxs(t.Fragment,{children:["Are you sure you want to delete ",t.jsx("span",{className:"font-semibold",children:D.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:D.id}})},J=async()=>{if(!U?.action){B(null);return}const{action:D}=U;$(!0);try{D.type==="delete"&&(await se.delete(`/tasks/${D.targetId}`),q.success("Task deleted successfully."),await Z())}catch(re){console.error("Task action failed:",re),q.error("Failed to delete task.")}finally{$(!1),B(null)}},he=()=>{X||B(null)},be=g.useMemo(()=>{const D=w.trim().toLowerCase();return[...f].sort((oe,je)=>{const Re=oe.createdAt?new Date(oe.createdAt):0;return(je.createdAt?new Date(je.createdAt):0)-Re}).filter(oe=>{const je=D===""||oe.title?.toLowerCase().includes(D)||oe.description?.toLowerCase().includes(D)||oe.assignedToName?.toLowerCase().includes(D)||oe.createdBy?.toLowerCase().includes(D),Re=v==="Filter by Status"||oe.status===v,Ke=j==="Filter by Priority"||oe.priority===j;return je&&Re&&Ke})},[f,w,v,j]);g.useEffect(()=>{A(1)},[w,v,j,a]),g.useEffect(()=>{if(a==="list"){const D=be.length===0?1:Math.ceil(be.length/rf);E>D&&A(D)}},[be.length,E,a]);const Le=g.useMemo(()=>{if(a==="board")return be;const D=(E-1)*rf;return be.slice(D,D+rf)},[be,E,a]),Me=g.useMemo(()=>{const D=new Date;return[{title:"To Do",value:f.filter(re=>re.status==="Not started").length,icon:ya,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:f.filter(re=>re.status==="In progress").length,icon:Qn,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:f.filter(re=>re.status==="Completed").length,icon:As,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:f.filter(re=>re.dueDate&&new Date(re.dueDate)<D&&re.status!=="Completed").length,icon:oh,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:f.filter(re=>re.priority==="High").length,icon:qi,color:"text-orange-600",bgColor:"bg-orange-100"}]},[f]),ke=D=>D.dueDate&&new Date(D.dueDate)<new Date&&D.status!=="Completed",F=D=>{switch(D.status){case"To Do":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In Progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Review":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},ve=D=>{switch(D){case"To Do":return"bg-blue-100 text-blue-700";case"In Progress":return"bg-purple-100 text-purple-700";case"Review":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},Ce=D=>{switch(D){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(y||s)&&t.jsx(xt,{message:"Loading tasks..."}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[t.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[t.jsx(Qn,{className:"text-blue-600"})," Tasks Board"]}),t.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:t.jsxs("button",{type:"button",onClick:()=>ge(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[t.jsx(Lt,{})," Create Task"]})})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Me.map(D=>t.jsx(E0e,{...D},D.title))}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[t.jsx(yt,{size:20,className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search tasks",value:w,onChange:D=>p(D.target.value),className:"focus:outline-none text-base w-full"})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[t.jsxs("select",{value:v,onChange:D=>C(D.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[t.jsx("option",{children:"Filter by Status"}),AD.map(D=>t.jsx("option",{children:D},D))]}),t.jsxs("select",{value:j,onChange:D=>_(D.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[t.jsx("option",{children:"Filter by Priority"}),t.jsx("option",{children:"High"}),t.jsx("option",{children:"Normal"}),t.jsx("option",{children:"Low"})]})]})]}),t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("button",{type:"button",onClick:()=>n("board"),className:`px-4 py-2 rounded-full text-sm ${a==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),t.jsx("button",{type:"button",onClick:()=>n("list"),className:`px-4 py-2 rounded-full text-sm ${a==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!y&&!s&&be.length===0&&t.jsx("p",{className:"text-center text-gray-500 mt-10 p-4 bg-white shadow rounded-lg",children:"No tasks found matching current filters."}),!y&&!s&&be.length>0&&a==="board"&&t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:AD.map(D=>{const re=Le.filter(oe=>oe.status===D);return t.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative",children:[t.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),t.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[t.jsx("h3",{className:"font-medium text-gray-900",children:D}),t.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:re.length})]}),t.jsx("div",{className:`space-y-3 ${re.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:re.length>0?re.map(oe=>t.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${F(oe)}`,onClick:()=>ge(oe,!0),children:[t.jsxs("div",{className:"text-left flex-1",children:[t.jsx("p",{className:"font-medium text-gray-800 text-sm",children:oe.title}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",oe.priority]}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",oe.assignedToName]}),t.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",t.jsx("span",{className:ke(oe)?"text-red-600":"text-gray-600",children:oe.dateAssigned?LD(oe.dateAssigned):""})]})]}),t.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[t.jsx("button",{type:"button",onClick:je=>{je.stopPropagation(),ge(oe)},className:"text-blue-500 hover:text-blue-700",children:t.jsx(hs,{})}),t.jsx("button",{type:"button",onClick:je=>{je.stopPropagation(),ee(oe)},className:"text-red-500 hover:text-red-700",children:t.jsx(Nt,{})})]})]},oe.id)):t.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No tasks"})})]},D)})}),!y&&!s&&be.length>0&&a==="list"&&t.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full text-sm",children:[t.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),t.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),t.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),t.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),t.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),t.jsx("th",{className:"py-3 px-4 font-medium",children:"Actions"})]})}),t.jsx("tbody",{children:Le.map(D=>t.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",onClick:()=>{console.log("Opening task in view mode:",D),ge(D,!0)},children:[t.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",children:D.title}),t.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${ve(D.status||"To Do")}`,children:D.status||"To Do"})}),t.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Ce(D.priority||"Low")}`,children:D.priority||"Low"})}),t.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:D.assignedToName||"Unassigned"}),t.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${ke(D)?"text-red-600 font-medium":""}`,children:D.dateAssigned?LD(D.dateAssigned):""}),t.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center gap-3",onClick:re=>re.stopPropagation(),children:[t.jsxs("button",{type:"button",onClick:()=>ge(D),className:"text-blue-500 hover:text-blue-700 flex items-center gap-1",children:[t.jsx(hs,{})," Edit"]}),t.jsxs("button",{type:"button",onClick:()=>ee(D),className:"text-red-500 hover:text-red-700 flex items-center gap-1",children:[t.jsx(Nt,{})," Delete"]})]})})]},D.id))})]})})}),!y&&!s&&a==="list"&&t.jsx(Ct,{className:"mt-6",totalItems:be.length,pageSize:rf,currentPage:be.length===0?0:E,onPrev:()=>A(D=>Math.max(D-1,1)),onNext:()=>A(D=>Math.min(D+1,Math.max(1,Math.ceil(be.length/rf)||1))),label:"tasks"}),t.jsx(Fh,{isOpen:r,onClose:le,onSave:W,onEdit:()=>m(!1),setFormData:ae,formData:K,isEditing:!d&&!!l,viewMode:d,users:T,currentUser:e,onDelete:ee}),U&&t.jsx(A0e,{open:!0,title:U.title,message:U.message,confirmLabel:U.confirmLabel,cancelLabel:U.cancelLabel,variant:U.variant,onConfirm:J,onCancel:he,loading:X})]})}function E0e({icon:e,title:s,value:a,color:n,bgColor:r,onClick:i}){return t.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[t.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${n} mr-4`,children:e?t.jsx(e,{size:22}):null}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"text-xs text-gray-500 uppercase",children:s}),t.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function A0e({open:e,title:s,message:a,confirmLabel:n,cancelLabel:r,variant:i,loading:l,onConfirm:c,onCancel:d}){if(!e)return null;const m=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s}),t.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),t.jsx("button",{type:"button",onClick:c,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${m}`,disabled:l,children:l?"Processing...":n})]})]})})}const A6=e=>e?e.toUpperCase():"",np=e=>{const s=A6(e);return s==="PLANNED"||s==="IN PROGRESS"?"PLANNED":s==="HELD"||s==="DONE"?"HELD":s==="NOT_HELD"||s==="NOT HELD"?"NOT_HELD":"PLANNED"},L0e=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},k0e=e=>{const s=A6(e);switch(s==="PLANNED"?"PENDING":s==="HELD"?"COMPLETED":s==="NOT_HELD"?"CANCELLED":s){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},Tj=10,Ej={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},D0e=()=>{const e=it(),s=Xt(),[a]=Aa(),n=a.get("id"),r=s.pathname==="/admin/meetings/info";g.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[i,l]=g.useState([]),[c,d]=g.useState(!1),[m,f]=g.useState([]),[h,y]=g.useState(""),[N,w]=g.useState("Filter by Status"),[p,v]=g.useState(!1),[C,j]=g.useState(null),[_,T]=g.useState(1),[k,E]=g.useState(Ej),[A,U]=g.useState(!1),[B,X]=g.useState(null),[$,O]=g.useState(!1),[G,K]=g.useState(null),[ae,R]=g.useState(!1);g.useEffect(()=>{const F=s.state?.openMeetingModal,ve=s.state?.initialMeetingData?.relatedTo||a.get("id");(F||ve)&&(v(!0),s.state?.initialMeetingData&&E(Ce=>({...Ce,...s.state.initialMeetingData})),e(s.pathname,{replace:!0,state:{}}))},[s,a,e]);const Z=async()=>{if(n&&r){const F=sessionStorage.getItem("meetingDetailData");if(F)try{const ve=JSON.parse(F);if(ve.id===parseInt(n)){j(ve),sessionStorage.removeItem("meetingDetailData");return}}catch(ve){console.error(ve)}}d(!0);try{const F=await se.get("/meetings/admin/fetch-all"),Ce=[...Array.isArray(F.data)?F.data:[]].sort((D,re)=>{const oe=D?.createdAt?new Date(D.createdAt).getTime():0;return(re?.createdAt?new Date(re.createdAt).getTime():0)-oe});if(l(Ce),n&&!C){const D=Ce.find(re=>re.id===parseInt(n));D&&j(D)}console.log(F.data)}catch{q.error("Failed to load meetings.")}finally{d(!1)}},te=async()=>{try{const F=await se.get("/users/all");f(Array.isArray(F.data)?F.data:[])}catch(F){console.error(F)}};g.useEffect(()=>{Z(),te()},[]);const ge=F=>y(F.target.value),le=g.useMemo(()=>{const F=h.trim().toLowerCase(),ve=N.trim().toUpperCase();return i.filter(Ce=>{const D=[Ce?.activity,Ce?.description,Ce?.relatedTo,Ce?.assignedTo],re=F===""||D.some(je=>je&&je.toString().toLowerCase().includes(F)),oe=ve==="FILTER BY STATUS"||np(Ce.status||"PENDING")===ve;return re&&oe})},[i,h,N]),W=g.useMemo(()=>{const F=(_-1)*Tj;return le.slice(F,F+Tj)},[le,_]),ee=()=>{v(!1),E(Ej),U(!1),X(null),O(!1)},J=()=>{E(Ej),U(!1),X(null),v(!0)},he=F=>{let ve="";if(F.meet_assign_to?.id)ve=String(F.meet_assign_to.id);else if(F.assignedTo){const qe=m.find(Ze=>`${Ze.first_name} ${Ze.last_name}`===F.assignedTo);ve=qe?String(qe.id):""}const Ce=qe=>{if(!qe)return"";try{const Ze=new Date(qe),we=Ze.getTimezoneOffset()*6e4;return new Date(Ze.getTime()-we).toISOString().slice(0,16)}catch{return""}};let D="Lead",re="",oe="Contact",je="";if(F.lead)D="Lead",re=String(F.lead.id);else if(F.account)D="Account",re=String(F.account.id),F.contact?(oe="Contact",je=String(F.contact.id)):F.deal&&(oe="Deal",je=String(F.deal.id));else if(F.relatedType||F.related_type){const qe=F.relatedType||F.related_type,Ze=F.related_to||F.relatedToId;qe==="Lead"?(D="Lead",re=String(Ze)):(D="Account",re=F.account_id?String(F.account_id):"")}const Re={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},Ke=np(F.status),et=Re[Ke]||"Planned";E({subject:F.subject||F.activity||"",location:F.location||"",startTime:Ce(F.start_time||F.startTime),endTime:Ce(F.end_time||F.endTime),status:et,notes:F.description||F.notes||"",assignedTo:ve,relatedType1:D,relatedTo1:re,relatedType2:oe,relatedTo2:je}),U(!0),X(F.id),j(null),v(!0)},be=F=>{if(!F.subject?.trim())return q.error("Subject is required.");if(!F.startTime)return q.error("Start time is required.");if(F.endTime&&!(new Date(F.endTime)-new Date(F.startTime)>0))return q.error("End time must be after start time.");F.relatedType1,F.relatedTo1,F.relatedType1==="Account"&&F.relatedType2&&F.relatedTo2&&(F.relatedType2,F.relatedTo2);const ve={...F,assignedTo:parseInt(F.assignedTo),relatedTo1:parseInt(F.relatedTo1),relatedTo2:parseInt(F.relatedTo2)},Ce=A&&B?"update":"create";K({title:Ce==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${Ce} "${ve.subject}"?`,confirmLabel:Ce==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:Ce,payload:ve,targetId:B,name:ve.subject}})},Le=async()=>{if(!G?.action)return;const{type:F,payload:ve,targetId:Ce,name:D}=G.action;console.log(ve),R(!0);try{F==="create"?(O(!0),await se.post("/meetings/create",ve),q.success(`Meeting "${D}" created.`),ee(),await Z()):F==="update"?(O(!0),await se.put(`/meetings/${Ce}`,ve),q.success(`Meeting "${D}" updated.`),ee(),await Z()):F==="delete"&&(await se.delete(`/meetings/${Ce}`),q.success(`Meeting "${D}" deleted.`),C?.id===Ce&&j(null),await Z())}catch(re){const oe=re.response?.data?.detail||"Action failed.";q.error(typeof oe=="string"?oe:JSON.stringify(oe)),console.error(oe)}finally{O(!1),R(!1),K(null)}},Me=F=>{K({title:"Delete Meeting",message:`Permanently delete "${F.activity}"?`,confirmLabel:"Delete",variant:"danger",action:{type:"delete",targetId:F.id,name:F.activity}})},ke=async(F,ve)=>{try{await se.put(`/meetings/${F}`,{status:ve}),q.success("Status updated"),Z(),j(null)}catch{q.error("Failed to update status")}};return r&&n?C?t.jsx(Gl,{meeting:C,onClose:()=>{j(null),e("/admin/dashboard")},onEdit:he,onDelete:Me,onStatusUpdate:ke}):t.jsx(xt,{message:"Loading meeting..."}):t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[c&&t.jsx(xt,{message:"Loading meetings..."}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[t.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[t.jsx(dt,{className:"mr-2 text-blue-600"})," Meetings"]}),t.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:t.jsxs("button",{onClick:J,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[t.jsx(Lt,{className:"mr-2"})," Add Meeting"]})})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[t.jsx(yt,{className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search meetings",value:h,onChange:ge,className:"w-full outline-none"})]}),t.jsxs("select",{value:N,onChange:F=>w(F.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[t.jsx("option",{children:"Filter by Status"}),t.jsx("option",{value:"PLANNED",children:"PLANNED"}),t.jsx("option",{value:"HELD",children:"HELD"}),t.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[t.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4",children:"Subject"}),t.jsx("th",{className:"py-3 px-4",children:"Related To"}),t.jsx("th",{className:"py-3 px-4",children:"Start Time"}),t.jsx("th",{className:"py-3 px-4",children:"Assigned"}),t.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),t.jsx("tbody",{children:W.length>0?W.map(F=>t.jsxs("tr",{onClick:()=>j(F),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[t.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:F.subject}),t.jsxs("td",{className:"py-3 px-4",children:[F.lead&&t.jsx("p",{className:"font-medium text-blue-500 text-xs",children:F.lead.title}),F.account&&t.jsx("p",{className:"font-medium text-blue-500 text-xs",children:F.account.name}),F.contact&&t.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[F.contact.first_name," ",F.contact.last_name]}),F.deal&&t.jsx("p",{className:"font-medium text-blue-500 text-xs",children:F.deal.name})]}),t.jsx("td",{className:"py-3 px-4",children:L0e(F.start_time)}),t.jsxs("td",{className:"py-3 px-4",children:[F.meet_assign_to.first_name," ",F.meet_assign_to.last_name]}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${k0e(np(F.status))}`,children:np(F.status).replace("_"," ")})})]},F.id)):t.jsx("tr",{children:t.jsx("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),t.jsx(Ct,{totalItems:le.length,pageSize:Tj,currentPage:_,onPrev:()=>T(F=>Math.max(1,F-1)),onNext:()=>T(F=>F+1),label:"meetings"}),p&&t.jsx(Iy,{onClose:ee,formData:k,setFormData:E,isEditing:A,onSubmit:be,isSubmitting:$||ae,users:m}),C&&t.jsx(Gl,{meeting:C,onClose:()=>j(null),onEdit:he,onDelete:Me,onStatusUpdate:ke}),G&&t.jsx(M0e,{open:!0,title:G.title,message:G.message,confirmLabel:G.confirmLabel,variant:G.variant,onConfirm:Le,onCancel:()=>K(null),loading:ae})]})};function M0e({open:e,title:s,message:a,confirmLabel:n,cancelLabel:r="Cancel",variant:i="primary",loading:l,onConfirm:c,onCancel:d}){if(!e)return null;const m=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s}),t.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsx("button",{onClick:d,disabled:l,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),t.jsx("button",{onClick:c,disabled:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${m}`,children:l?"...":n})]})]})})}const P0e=10,O0e=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"}],I0e=e=>e?String(e).toUpperCase():"",Od=e=>{const s=I0e(e);return s==="PLANNED"||s==="PENDING"?"PLANNED":s==="HELD"||s==="COMPLETED"?"HELD":s==="NOT HELD"||s==="NOT_HELD"||s==="CANCELLED"?"NOT_HELD":"PLANNED"},Aj=e=>{const s=Od(e);return s==="PLANNED"?"PLANNED":s==="HELD"?"HELD":s==="NOT_HELD"?"NOT HELD":"--"},kD=e=>{switch(Od(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},DD=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function $0e(){const[e,s]=g.useState(!1),[a,n]=g.useState(null),[r,i]=g.useState(null),[l,c]=g.useState(null),[d,m]=g.useState(null),[f,h]=g.useState([]),[y,N]=g.useState(null),[w,p]=g.useState(!1),[v,C]=g.useState(null),[j,_]=g.useState(!1),[T,k]=g.useState(!1),[E,A]=g.useState("PLANNED"),[U,B]=g.useState(!1),[X,$]=g.useState(!1),[O]=Aa(),G=it(),K=Xt(),ae={subject:"",call_time:"",duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[R,Z]=g.useState(ae);g.useEffect(()=>{const V=K.state?.openCallModal,pe=K.state?.initialCallData?.relatedTo1||O.get("id");(V||pe)&&(s(!0),K.state?.initialCallData&&Z(z=>({...z,...K.state.initialCallData})),pe&&Z(z=>({...z,relatedTo1:pe})),G(K.pathname,{replace:!0,state:{}}))},[K,O,G]);const te=async()=>{try{$(!0);const V=await se.get("/calls/admin/fetch-all"),z=[...Array.isArray(V.data)?V.data:[]].sort((ie,ue)=>{const M=ie?.created_at?new Date(ie.created_at):0;return(ue?.created_at?new Date(ue.created_at):0)-M});h(z)}catch(V){console.error("Error fetching calls:",V),q.error("Failed to load calls")}finally{$(!1)}},ge=async()=>{try{const V=await se.get("/users/all");N(V.data)}catch(V){console.error("Error fetching users: ",V)}};g.useEffect(()=>{ge(),te()},[]);const le=[],W="",ee="Filter by Status",J="Filter by Users",he=1,be=f,Le=f,Me=f.length,ke=f.filter(V=>Od(V.status)==="PLANNED").length,F=f.filter(V=>Od(V.status)==="HELD").length,ve=f.filter(V=>Od(V.status)==="NOT_HELD").length,Ce=[{title:"Total",value:Me,icon:Ea,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:ke,icon:ya,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:F,icon:As,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:ve,icon:tr,color:"text-gray-600",bgColor:"bg-gray-100"}],D="Overview",re=V=>{const{name:pe,value:z}=V.target;Z(ie=>{const ue={...ie,[pe]:z};return pe==="relatedType1"&&(ue.relatedTo1="",z==="Lead"?(ue.relatedType2=null,ue.relatedTo2=null,m([])):z==="Account"&&(ue.relatedType2="Contact")),pe==="relatedType2"&&(ue.relatedTo2=""),ue})};g.useEffect(()=>{const V=async()=>{try{c([]);let pe;R.relatedType1==="Lead"?pe=await se.get("/leads/admin/getLeads"):R.relatedType1==="Account"&&(pe=await se.get("/accounts/admin/fetch-all"));let z=[];if(pe&&Array.isArray(pe.data)?z=pe.data:z=[],w&&R.relatedTo1)try{let ie;R.relatedType1==="Lead"?ie=await se.get(`/leads/get/${R.relatedTo1}`):R.relatedType1==="Account"&&(ie=await se.get(`/accounts/get/${R.relatedTo1}`)),ie&&ie.data&&(z.some(M=>String(M.id)===String(R.relatedTo1))||(z=[ie.data,...z]))}catch(ie){console.error("Error fetching specific related item:",ie)}c(z)}catch(pe){console.error("Error fetching data:",pe),c([])}};R.relatedType1&&V()},[R.relatedType1,w,R.relatedTo1]),g.useEffect(()=>{const V=async()=>{try{m([]);let pe;if(R.relatedType1==="Account"&&R.relatedTo1)R.relatedType2==="Contact"?pe=await se.get(`/contacts/from-acc/${R.relatedTo1}`):R.relatedType2==="Deal"&&(pe=await se.get(`/deals/from-acc/${R.relatedTo1}`));else{m([]);return}let z=[];if(pe&&Array.isArray(pe.data)?z=pe.data:z=[],w&&R.relatedTo2)try{let ie;R.relatedType2==="Contact"?ie=await se.get(`/contacts/get/${R.relatedTo2}`):R.relatedType2==="Deal"&&(ie=await se.get(`/deals/get/${R.relatedTo2}`)),ie&&ie.data&&(z.some(M=>String(M.id)===String(R.relatedTo2))||(z=[ie.data,...z]))}catch(ie){console.error("Error fetching specific related item:",ie)}m(z)}catch(pe){console.error("Error fetching data:",pe),m([])}};R.relatedType2&&V()},[R.relatedType2,R.relatedTo1,R.relatedType1,w,R.relatedTo2]);const oe=V=>{if(V.preventDefault(),!R.assigned_to){q.error("Please assign the call to a user.");return}const pe={...R,duration_minutes:R.duration_minutes?parseInt(R.duration_minutes,10):null,relatedTo1:R.relatedTo1?parseInt(R.relatedTo1,10):null,relatedTo2:R.relatedType1==="Lead"?null:R.relatedTo2?parseInt(R.relatedTo2,10):null,relatedType2:R.relatedType1==="Lead"?null:R.relatedType2,assigned_to:R.assigned_to?parseInt(R.assigned_to,10):null},z=w&&v?"update":"create",ie=(R.subject||"").trim()||"Untitled Call";i({title:z==="create"?"Confirm New Call":"Confirm Update",message:z==="create"?`Create "${ie}"?`:`Save changes to "${ie}"?`,confirmLabel:z==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:z,payload:pe,targetId:v||null,name:ie}})},je=V=>n(V),Re=()=>{s(!1),p(!1),C(null)},Ke=async()=>{if(!r?.action){i(null);return}const{action:V}=r,{type:pe,payload:z,targetId:ie,name:ue}=V;k(!0);try{if(pe==="create")_(!0),await se.post("/calls/create",z),q.success(`Call "${ue}" created successfully.`),s(!1),Z(ae),p(!1),C(null),await te();else if(pe==="update"){if(!ie)throw new Error("Missing call identifier for update.");_(!0),await se.put(`/calls/${ie}`,z),q.success(`Call "${ue}" updated successfully.`),s(!1),Z(ae),p(!1),C(null),await te()}else if(pe==="delete"){if(!ie)throw new Error("Missing call identifier for deletion.");await se.delete(`/calls/${ie}`),q.success(`Call "${ue}" deleted successfully.`),a?.id===ie&&n(null),await te()}}catch(M){const xe=pe==="create"?"Failed to create call. Please review the details and try again.":pe==="update"?"Failed to update call. Please review the details and try again.":"Failed to delete call. Please try again.",ne=M?.response?.data?.detail||xe;q.error(ne)}finally{(pe==="create"||pe==="update")&&_(!1),k(!1),i(null)}},et=()=>{T||i(null)},qe=async()=>{if(a?.id)try{B(!0),await se.put(`/calls/${a.id}`,{status:E}),q.success(`Status updated to ${Aj(E)}`),h(V=>Array.isArray(V)?V.map(pe=>pe.id===a.id?{...pe,status:E}:pe):V),n(null)}catch(V){const pe=V.response?.data?.detail||"Failed to update status.";q.error(pe)}finally{B(!1)}};g.useEffect(()=>{a&&A(Od(a.status))},[a]);const Ze=a?t.jsxs("div",{id:"callModalBackdrop",onClick:V=>V.target.id==="callModalBackdrop"&&n(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[X&&t.jsx(xt,{message:"Loading call details..."}),t.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[t.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[t.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),t.jsx("button",{onClick:()=>n(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:t.jsx(es,{size:25})})]}),t.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:t.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[t.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:a.subject}),t.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${kD(a.status)}`,children:Aj(a.status)})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const V=M=>{if(!M)return"";const xe=new Date(M),ne=xe.getFullYear(),Te=String(xe.getMonth()+1).padStart(2,"0"),Q=String(xe.getDate()).padStart(2,"0"),ye=String(xe.getHours()).padStart(2,"0"),P=String(xe.getMinutes()).padStart(2,"0");return`${ne}-${Te}-${Q}T${ye}:${P}`},pe=a.lead?"Lead":a.account?"Account":"Lead",z=a.lead?a.lead.id:a.account?a.account.id:null,ie=pe==="Lead"?null:a.contact?"Contact":a.deal?"Deal":"Contact",ue=pe==="Lead"?null:a.contact?a.contact.id:a.deal?a.deal.id:null;Z({subject:a.subject||"",call_time:V(a.call_time),duration_minutes:a.duration_minutes?String(a.duration_minutes):"",direction:a.direction||"Outgoing",status:a.status||"Planned",notes:a.notes||"",relatedType1:pe,relatedType2:ie,relatedTo1:z?String(z):"",relatedTo2:ue?String(ue):"",assigned_to:a.call_assign_to?.id?String(a.call_assign_to.id):""}),p(!0),C(a.id),n(null),s(!0)},children:[t.jsx(ys,{className:"mr-2"}),"Edit"]}),t.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>{const V=a.subject||"this call";i({title:"Delete Call",message:`Are you sure you want to permanently delete "${V}"? This action cannot be undone.`,confirmLabel:"Delete Call",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:a.id,name:V}})},children:[t.jsx(Nt,{className:"mr-2"}),"Delete"]})]})]})}),t.jsx("div",{className:"border-b border-gray-200 my-5"}),t.jsxs("div",{className:"p-6 lg:p-4",children:[t.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(V=>t.jsx("button",{className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${D===V?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:V},V))}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[t.jsxs("div",{className:"lg:col-span-3",children:[t.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 text-sm text-gray-700",children:[t.jsx(_i,{label:"Call Time",value:DD(a.call_time)}),t.jsx(_i,{label:"Duration",value:a.duration_minutes?`${a.duration_minutes} min`:null}),t.jsx(_i,{label:"Direction",value:a.direction||"--"}),t.jsx(_i,{label:"Assigned To",value:`${a.call_assign_to.first_name} ${a.call_assign_to.last_name}`}),a.lead&&t.jsx(_i,{label:"Lead",value:a.lead.title}),a.account&&t.jsx(_i,{label:"Account",value:a.account.name}),a.contact&&t.jsx(_i,{label:"Contact",value:`${a.contact.first_name} ${a.contact.last_name}`}),a.deal&&t.jsx(_i,{label:"Deal",value:a.deal.name}),t.jsx(_i,{label:"Created At",value:DD(a.created_at)})]})}),D==="Notes",D==="Activities"]}),t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),t.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[t.jsxs("button",{onClick:()=>G("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Calls"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ft,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),t.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>G("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Calls"}}}),children:[t.jsx(dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),t.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(ts,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),t.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:E,onChange:V=>A(V.target.value),children:[t.jsx("option",{value:"PLANNED",children:"PLANNED"}),t.jsx("option",{value:"HELD",children:"HELD"}),t.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),t.jsx("button",{onClick:qe,disabled:U,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:U?"Updating...":"Update"})]})]})]})]})]})]}):null,we=e?t.jsx("div",{id:"modalBackdrop",onClick:V=>V.target.id==="modalBackdrop"&&Re(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[t.jsx("button",{onClick:Re,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:t.jsx(jt,{size:22})}),t.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:w?"Edit Call":"Add New Call"}),t.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:oe,children:[t.jsx(U0e,{label:"Subject",className:"md:col-span-2",name:"subject",value:R.subject,onChange:re,disabled:j,required:!0}),t.jsxs("div",{className:"w-full flex flex-col",children:[t.jsxs("select",{name:"relatedType1",onChange:re,value:R.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:j||w,children:[t.jsx("option",{value:"Lead",children:"Lead"}),t.jsx("option",{value:"Account",children:"Account"})]}),t.jsx(Lj,{items:Array.isArray(l)?l:[],value:R.relatedTo1??"",placeholder:`Search ${R.relatedType1||"here"}...`,getLabel:V=>R.relatedType1==="Lead"?V.title:V.name??"",onChange:V=>Z(pe=>({...pe,relatedTo1:V})),disabled:j||w})]}),t.jsxs("div",{className:"w-full flex flex-col",children:[t.jsxs("select",{name:"relatedType2",onChange:re,value:R.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:R.relatedType1==="Lead"||j||w,children:[t.jsx("option",{value:"Contact",children:"Contact"}),t.jsx("option",{value:"Deal",children:"Deal"})]}),t.jsx(Lj,{disabled:R.relatedType1==="Lead"||j||w,items:Array.isArray(d)?d:[],value:R.relatedTo2??"",placeholder:R.relatedType1==="Lead"?"":Array.isArray(d)&&d.length>0?`Search ${R.relatedType2||"Contact"}...`:`No ${R.relatedType2||""} data found`,getLabel:V=>R.relatedType2==="Contact"?`${V.first_name??""} ${V.last_name??""}`.trim():V.name??"",onChange:V=>Z(pe=>({...pe,relatedTo2:V}))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),t.jsx("input",{type:"datetime-local",value:R.call_time,onChange:re,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),t.jsxs("div",{className:"w-full",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),t.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[t.jsx("input",{type:"tel",value:R.duration_minutes,onChange:re,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),t.jsx("p",{children:"minutes"})]})]}),t.jsxs("div",{className:"col-span-2",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Assign To"}),t.jsx(Lj,{items:Array.isArray(y)?y:[],value:R.assigned_to??"",placeholder:"Search an account...",getLabel:V=>`${V.first_name} ${V.last_name}`,onChange:V=>Z(pe=>({...pe,assigned_to:V}))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),t.jsxs("select",{name:"direction",onChange:re,value:R.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[t.jsx("option",{value:"Incoming",children:"Incoming"}),t.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),t.jsxs("select",{name:"status",onChange:re,value:R.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[t.jsx("option",{value:"Planned",children:"Planned"}),t.jsx("option",{value:"Held",children:"Held"}),t.jsx("option",{value:"Not held",children:"Not held"})]})]}),t.jsx(z0e,{className:"col-span-2",label:"Notes",value:R.notes,onChange:re,name:"notes"}),t.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[t.jsx("button",{type:"button",onClick:Re,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:j,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:j?"Saving...":w?"Update Call":"Save Call"})]})]})]})}):null;return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[t.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[t.jsx(Ea,{className:"mr-2 text-blue-600"})," Calls"]}),t.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:t.jsxs("button",{onClick:()=>{Z(ae),p(!1),C(null),s(!0)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[t.jsx(Lt,{className:"mr-2"})," Add Call"]})})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ce.map(V=>t.jsx(R0e,{...V},V.title))}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[t.jsx(yt,{size:20,className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",defaultValue:W})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[t.jsxs("select",{defaultValue:ee,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[t.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),O0e.map(V=>t.jsx("option",{value:V.value,children:V.label},V.value))]}),t.jsxs("select",{defaultValue:J,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[t.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),le.map(V=>t.jsx("option",{value:V.name,children:V.name},V.id))]})]})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[t.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4",children:"Subject"}),t.jsx("th",{className:"py-3 px-4",children:"Related To"}),t.jsx("th",{className:"py-3 px-4",children:"Call Time"}),t.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),t.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),t.jsx("tbody",{children:X?t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"py-10",children:t.jsx(xt,{message:"Loading calls..."})})}):Le.length>0?Le.map(V=>t.jsxs("tr",{onClick:()=>je(V),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[t.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:V.subject||"--"}),t.jsxs("td",{className:"py-3 px-4",children:[V.lead&&t.jsx("p",{className:"font-medium text-blue-500 text-xs",children:V.lead.title}),V.account&&t.jsx("p",{className:"font-medium text-blue-500 text-xs",children:V.account.name}),V.contact&&t.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[V.contact.first_name," ",V.contact.last_name]}),V.deal&&t.jsx("p",{className:"font-medium text-blue-500 text-xs",children:V.deal.name})]}),t.jsx("td",{className:"py-3 px-4 text-gray-800",children:V.call_time?new Date(V.call_time).toLocaleString():"--"}),t.jsx("td",{className:"py-3 px-4 text-gray-800",children:V?.call_assign_to?`${V.call_assign_to.first_name} ${V.call_assign_to.last_name}`:"--"}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${kD(V.status)}`,children:Aj(V.status)})})]},V.id)):t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),t.jsx(Ct,{totalItems:be.length,pageSize:P0e,currentPage:he,onPrev:()=>{},onNext:()=>{},label:"calls"})]}),Ze,we,r&&t.jsx(F0e,{open:!0,title:r.title,message:r.message,confirmLabel:r.confirmLabel,onConfirm:Ke,onCancel:et,loading:T})]})}function R0e({icon:e,title:s,value:a,color:n,bgColor:r}){return t.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[t.jsx("div",{className:`p-3 rounded-full ${r} ${n} mr-4`,children:t.jsx(e,{size:22})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500 uppercase",children:s}),t.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function U0e(e){return t.jsxs("div",{className:e.className,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),t.jsx("input",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]})}function z0e(e){return t.jsxs("div",{className:e.className,children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),t.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function _i({label:e,value:s}){return t.jsxs("p",{children:[t.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",t.jsx("br",{}),t.jsx("span",{className:"break-words",children:s||"--"})]})}function F0e({open:e,title:s,message:a,confirmLabel:n,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:c,onCancel:d}){if(!e)return null;const m=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s}),t.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),t.jsx("button",{type:"button",onClick:c,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${m}`,disabled:l,children:l?"Processing...":n})]})]})})}function Lj({items:e=[],value:s="",onChange:a,getLabel:n,placeholder:r="Search...",disabled:i=!1,maxRender:l=200}){const[c,d]=g.useState(!1),[m,f]=g.useState(""),h=g.useRef(null),y=e.find(p=>String(p.id)===String(s)),N=y?n(y):"",w=g.useMemo(()=>{const p=m.trim().toLowerCase();return(p?e.filter(C=>(n(C)||"").toLowerCase().includes(p)):e).slice(0,l)},[e,m,n,l]);return g.useEffect(()=>{const p=v=>{h.current&&!h.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]),g.useEffect(()=>{c||f("")},[c]),t.jsxs("div",{ref:h,className:"relative w-full",children:[t.jsx("input",{disabled:i,value:c?m:N,placeholder:r,onFocus:()=>!i&&d(!0),onChange:p=>{f(p.target.value),c||d(!0)},className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),c&&!i&&t.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[t.jsx("div",{className:"max-h-56 overflow-y-auto",children:w.length>0?w.map(p=>{const v=String(p.id),C=n(p),j=String(s)===v;return t.jsx("button",{type:"button",onClick:()=>{a(v),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${j?"bg-blue-50":""}`,children:C||"--"},v)}):t.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&t.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}const Mo=10;function B0e(){g.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,s]=g.useState(null),[a,n]=g.useState(""),[r,i]=g.useState("Filter by Actions"),[l,c]=g.useState(1),d=async()=>{try{const v=await se.get("/logs/read-all");s(v.data)}catch(v){console.error("Error fetching audit logs:",v)}};g.useEffect(()=>{d()},[]);const m=g.useMemo(()=>{if(!Array.isArray(e))return[];const v=a.trim().toLowerCase(),C=r?.toUpperCase?.()||"ALL";return e.filter(_=>{const T=_.timestamp?new Date(_.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",k=`${_.entity_type||""} ${_.entity_name||_.entity_details?.name||_.entity_details?.title||_.entity_id||""}`,E=`${_.logger?.first_name||""} ${_.logger?.last_name||""}`,A=[T,E,_.action,_.entity_type,k,_.description],U=v===""||A.some(X=>X==null?!1:X.toString().toLowerCase().includes(v)),B=C==="FILTER BY ACTIONS"||(_.action||"").toUpperCase()===C;return U&&B}).sort((_,T)=>{const k=_.timestamp?new Date(_.timestamp).getTime():0;return(T.timestamp?new Date(T.timestamp).getTime():0)-k})},[e,a,r]),f=Math.max(1,Math.ceil(m.length/Mo)||1);g.useEffect(()=>{c(1)},[a,r]),g.useEffect(()=>{c(v=>{const C=Math.max(1,Math.ceil(m.length/Mo)||1);return v>C?C:v})},[m.length]);const h=g.useMemo(()=>{const v=(l-1)*Mo;return m.slice(v,v+Mo)},[m,l]);m.length===0||(l-1)*Mo+1,Math.min(l*Mo,m.length);const y=()=>c(v=>Math.max(v-1,1)),N=()=>c(v=>Math.min(v+1,f)),w=()=>{if(!m.length){$h.error("No logs to export!");return}const v=["Timestamp","User","Action","Resource","Details"],C=m.map(E=>[new Date(E.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${E.logger?.first_name||""} ${E.logger?.last_name||""}`.trim(),E.action,`${E.entity_type}: ${E.entity_id}`,E.description||""]),j=[v.join(","),...C.map(E=>E.map(A=>`"${String(A).replace(/"/g,'""')}"`).join(","))].join(`
`),_=new Blob([j],{type:"text/csv;charset=utf-8;"}),T=URL.createObjectURL(_),k=document.createElement("a");k.href=T,k.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(k),k.click(),document.body.removeChild(k),URL.revokeObjectURL(T)},p=v=>{switch((v||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&t.jsx(xt,{message:"Loading audit logs..."}),t.jsx(Ih,{toastOptions:{duration:1e3}}),t.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[t.jsx(dt,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),t.jsxs("p",{className:"text-sm text-blue-700",children:[t.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Ta,{className:"text-blue-600",size:20}),t.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),t.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:t.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:w,children:[t.jsx(Xr,{className:"mr-2"}),"Export Logs"]})})]}),t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[t.jsx(yt,{size:20,className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search audit logs",value:a,onChange:v=>n(v.target.value),className:"focus:outline-none text-base w-full"})]}),t.jsx("div",{className:"w-full lg:w-1/4",children:t.jsxs("select",{value:r,onChange:v=>i(v.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[t.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),t.jsx("option",{value:"CREATE",children:"CREATE"}),t.jsx("option",{value:"DELETE",children:"DELETE"}),t.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[t.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),t.jsx("th",{className:"py-3 px-4",children:"User"}),t.jsx("th",{className:"py-3 px-4",children:"Action"}),t.jsx("th",{className:"py-3 px-4",children:"Resource"}),t.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),t.jsx("tbody",{children:Array.isArray(m)&&m.length>0?h.map((v,C)=>t.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[t.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(v.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),t.jsx("td",{className:"py-3 px-4 text-gray-700",children:v.name}),t.jsx("td",{className:"py-3 px-4",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${p(v.action)}`,children:v.action})}),t.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[v.entity_type,": ",v.entity_id]}),t.jsx("td",{className:"py-3 px-4 text-gray-700",children:v.description})]},C)):t.jsx("tr",{children:t.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),t.jsx(Ct,{className:"mt-4",totalItems:m.length,pageSize:Mo,currentPage:l,onPrev:y,onNext:N,label:"logs"})]})}const Vy=[{value:"Manager",label:"Manager"},{value:"Marketing",label:"Marketing"},{value:"Sales",label:"Sales"}],lf={firstName:"",lastName:"",email:"",password:"",role:""},H0e={CEO:"bg-purple-100 text-purple-700",ADMIN:"bg-purple-100 text-purple-700",GROUP_MANAGER:"bg-indigo-100 text-indigo-700",MANAGER:"bg-blue-100 text-blue-700",MARKETING:"bg-yellow-100 text-yellow-700",SALES:"bg-green-100 text-green-700"},Rr=e=>e?e.toString().trim().replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/\s+/g,"_").toUpperCase():"",G0e=e=>{const s=Rr(e),a=Vy.find(n=>Rr(n.value)===s);return a?a.value:e||""},XC=e=>{const s=Rr(e),a=Vy.find(n=>Rr(n.value)===s);return a?a.label:typeof e=="string"?e.toLowerCase().replace(/\b\w/g,n=>n.toUpperCase()):"--"},MD=e=>{if(!e)return"--";const s=new Date(e);return Number.isNaN(s.getTime())?"--":s.toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",","")},kj=(e,{size:s="sm"}={})=>{const a=Rr(e),n=H0e[a]||"bg-gray-100 text-gray-700",r=s==="lg"?"px-3 py-1 text-sm":s==="md"?"px-2.5 py-1 text-sm":"px-2 py-1 text-xs";return t.jsx("span",{className:`${r} font-semibold rounded-md inline-flex items-center justify-center ${n}`,children:XC(e)})},Po=10,V0e=(e,s)=>{const a=e?.trim()?.[0]??"",n=s?.trim()?.[0]??"";return`${a}${n}`.toUpperCase()||"U"},PD=e=>[...e].sort((s,a)=>{const n=s.created_at?new Date(s.created_at).getTime():0;return(a.created_at?new Date(a.created_at).getTime():0)-n});function W0e(){const{user:e,loading:s}=zt(),[a,n]=g.useState([]),[r,i]=g.useState(!1),[l,c]=g.useState(""),[d,m]=g.useState(""),[f,h]=g.useState(null),[y,N]=g.useState(!1),[w,p]=g.useState(!1),[v,C]=g.useState(null),[j,_]=g.useState(lf),[T,k]=g.useState(!1),[E,A]=g.useState(null),[U,B]=g.useState(!1),[X,$]=g.useState(1),[O,G]=g.useState("Overview"),[K,ae]=g.useState(""),[R,Z]=g.useState(!1),te=Rr(e?.role);console.log("meow",e);const ge=["ADMIN","CEO","GROUP_MANAGER"].includes(te),le=!s&&ge,W=g.useMemo(()=>{const z=Vy.filter(ie=>Rr(ie.value)!=="CEO");return[{label:"Filter by Roles",value:""},{label:"CEO",value:"CEO"},...z]},[]),ee=g.useCallback(z=>{z&&(n(ie=>ie.map(ue=>ue.id===z?{...ue,highlight:!0}:ue)),setTimeout(()=>{n(ie=>ie.map(ue=>ue.id===z?{...ue,highlight:!1}:ue))},2e3))},[]),J=g.useCallback(async()=>{i(!0);try{const z=await se.get("/users/all"),ie=Array.isArray(z.data)?z.data:[],ue=PD(ie);n(ue),h(M=>M&&(ue.find(ne=>ne.id===M.id)||null)),console.log(z.data)}catch(z){console.error("Error fetching users:",z);const ie=z.response?.data?.detail||"Failed to load users. Please try again later.";q.error(ie)}finally{i(!1)}},[]);g.useEffect(()=>{!s&&!ge&&e&&q.error("You are not authorized to access User Management.")},[ge,s,e]),g.useEffect(()=>{s||!ge||J()},[s,ge,J]),g.useEffect(()=>{document.title="Users | Sari-Sari CRM"},[]);const he=g.useMemo(()=>{const z=l.trim().toLowerCase(),ie=Rr(d);return PD(a.filter(ue=>{if(!ue)return!1;const M=z===""||[ue.first_name,ue.last_name,`${ue.first_name||""} ${ue.last_name||""}`,ue.email,XC(ue.role)].filter(Boolean).some(ne=>ne.toString().toLowerCase().includes(z)),xe=ie===""||ie==="CEO"&&["CEO","ADMIN"].includes(Rr(ue.role))||Rr(ue.role)===ie;return M&&xe}))},[a,l,d]),be=Math.max(1,Math.ceil(he.length/Po)||1);g.useEffect(()=>{$(1)},[l,d]),g.useEffect(()=>{$(z=>{const ie=Math.max(1,Math.ceil(he.length/Po)||1);return z>ie?ie:z})},[he.length]);const Le=g.useMemo(()=>{const z=(X-1)*Po;return he.slice(z,z+Po)},[he,X]);he.length===0||(X-1)*Po+1,Math.min(X*Po,he.length);const Me=()=>$(z=>Math.max(z-1,1)),ke=()=>$(z=>Math.min(z+1,be)),F=()=>{_(lf),p(!1),C(null),N(!0)},ve=z=>{h(z),G("Overview"),ae(z?.is_active?"Active":"Inactive")},Ce=z=>{z.target.id==="userModalBackdrop"&&!U&&D()},D=()=>{h(null)},re=(z,ie)=>{_(ue=>({...ue,[z]:ie}))},oe=()=>{const z="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let ie="";for(let ue=0;ue<10;ue+=1)ie+=z.charAt(Math.floor(Math.random()*z.length));re("password",ie)},je=()=>{T||U||(N(!1),_(lf),C(null),p(!1))},Re=z=>{_({firstName:z.first_name||"",lastName:z.last_name||"",email:z.email||"",password:"",role:G0e(z.role)}),p(!0),C(z.id),N(!0),h(null)},Ke=z=>{A({title:"Delete User",message:t.jsxs("span",{children:["Are you sure you want to delete"," ",t.jsxs("span",{className:"font-semibold",children:[z.first_name," ",z.last_name]}),"? This action cannot be undone."]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:z.id,name:`${z.first_name||""} ${z.last_name||""}`.trim()||z.email||"user"}})},et=z=>{z.preventDefault();const ie=j.firstName.trim(),ue=j.lastName.trim(),M=j.email.trim(),xe=j.password.trim(),ne=j.role,Te=!(w&&v);if(!ie||!M||!ne){q.warn("Please fill in all required fields.");return}if(Te&&!xe){q.warn("Please fill in all required fields.");return}if(xe&&xe.length<8){q.warn("Password should be at least 8 characters long.");return}const Q={first_name:ie,last_name:ue,email:M,role:ne};(Te||xe)&&(Q.password=xe);const ye=`${ie} ${ue}`.trim(),P=Te?"create":"update";A({title:P==="create"?"Confirm New User":"Confirm User Update",message:P==="create"?t.jsxs("span",{children:["Create user ",t.jsx("span",{className:"font-semibold",children:ye})," with role"," ",t.jsx("span",{className:"font-semibold",children:XC(ne)}),"?"]}):t.jsxs("span",{children:["Save changes for"," ",t.jsx("span",{className:"font-semibold",children:ye||M}),"?"]}),confirmLabel:P==="create"?"Create User":"Update User",cancelLabel:"Cancel",variant:"primary",action:{type:P,payload:Q,targetId:v,name:ye||M}})},qe=async()=>{if(!E?.action){A(null);return}const{action:z}=E,{type:ie,payload:ue,targetId:M,name:xe}=z;B(!0),(ie==="create"||ie==="update")&&k(!0);try{if(ie==="create"){const Te=(await se.post("/users/createuser",ue)).data;await J(),ee(Te.id),q.success(`User "${xe}" created successfully.`),N(!1),_(lf),C(null),p(!1)}else if(ie==="update"){if(!M)throw new Error("Missing user identifier for update.");const Te=(await se.put(`/users/updateuser/${M}`,ue)).data;await J(),h(null),ee(Te.id),q.success(`User "${xe}" updated successfully.`),N(!1),_(lf),C(null),p(!1)}else if(ie==="delete"){if(!M)throw new Error("Missing user identifier for deletion.");await se.delete(`/users/deleteuser/${M}`),n(ne=>ne.map(Te=>Te.id===M?{...Te,is_active:!1}:Te)),f&&f.id===M&&(h(null),ae("")),q.success(`User "${xe}" deactivated successfully.`)}}catch(ne){console.error("User management error:",ne);const Te=ie==="create"?"Failed to create user. Please review the details and try again.":ie==="update"?"Failed to update user. Please review the details and try again.":"Failed to delete user. Please try again.",Q=ne.response?.data?.detail||Te;q.error(Q)}finally{(ie==="create"||ie==="update")&&k(!1),B(!1),A(null)}},Ze=()=>{U||A(null)},we=async()=>{if(!f||!K)return;const z=f.is_active?"Active":"Inactive";if(K===z)return;const ie=K==="Active";Z(!0);try{const M=(await se.put(`/users/updateuser/${f.id}`,{is_active:ie})).data;n(xe=>xe.map(ne=>ne.id===M.id?M:ne)),h(null),ae(""),q.success(`User status updated to ${K}`)}catch(ue){console.error("Failed to update user status:",ue);const M=ue.response?.data?.detail||"Failed to update user status. Please try again.";q.error(M)}finally{Z(!1)}},V=t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[(r||s||!le)&&t.jsx(xt,{}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[t.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[t.jsx(h1,{className:"mr-2 text-blue-600"}),"User Management"]}),t.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:t.jsxs("button",{type:"button",onClick:F,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[t.jsx(Cs,{className:"mr-2"})," Add User"]})})]}),t.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[t.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[t.jsx(yt,{size:20,className:"text-gray-400 mr-3"}),t.jsx("input",{type:"text",placeholder:"Search users",value:l,onChange:z=>c(z.target.value),className:"focus:outline-none text-base w-full"})]}),t.jsx("div",{className:"w-full lg:w-1/4",children:t.jsx("select",{value:d,onChange:z=>m(z.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:W.map(z=>t.jsx("option",{value:z.value,children:z.label},z.value))})})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[t.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:t.jsxs("tr",{children:[t.jsx("th",{className:"py-3 px-4",children:"Fullname"}),t.jsx("th",{className:"py-3 px-4",children:"Email"}),t.jsx("th",{className:"py-3 px-4",children:"Role"}),t.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),t.jsx("tbody",{children:r?t.jsx("tr",{children:t.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:3,children:"Loading users..."})}):he.length===0?t.jsx("tr",{children:t.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-400",colSpan:4,children:"No users found."})}):Le.map(z=>t.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${z.highlight?"bg-green-50":""} ${z.is_active?"":"opacity-60 bg-gray-50"}`,children:[t.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>ve(z),children:t.jsxs("div",{className:"font-medium text-blue-600 hover:underline text-sm",children:[z.first_name," ",z.last_name]})}),t.jsx("td",{className:"py-3 px-4 cursor-pointer text-sm",onClick:()=>ve(z),children:z.email}),t.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>ve(z),children:kj(z.role)}),t.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>ve(z),children:t.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-md ${z.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:z.is_active?"Active":"Inactive"})})]},z.id))})]})}),t.jsx(Ct,{className:"mt-4",totalItems:he.length,pageSize:Po,currentPage:X,onPrev:Me,onNext:ke,label:"users"})]}),pe=f?t.jsx("div",{id:"userModalBackdrop",onClick:Ce,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in p-4 sm:p-6 md:p-8 font-inter relative",children:[t.jsx("div",{className:"flex justify-end w-full",children:t.jsx("button",{onClick:D,className:"text-gray-500 hover:text-gray-700 transition mb-5 cursor-pointer",children:t.jsx(es,{size:30})})}),t.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7 mb-4 lg:mb-6 md:mb-4",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[f.profile_picture?t.jsx("img",{src:f.profile_picture,alt:`${f.first_name} ${f.last_name}`,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover border border-gray-200 shadow-sm"}):t.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-200 text-gray-700 flex items-center justify-center text-lg sm:text-xl font-semibold border border-gray-200 shadow-sm",children:V0e(f.first_name,f.last_name)}),t.jsxs("div",{children:[t.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[f.first_name," ",f.last_name]}),t.jsx("p",{className:"text-sm text-gray-500 break-all",children:f.email})]})]}),kj(f.role,{size:"md"})]}),!["CEO","ADMIN","GROUP MANAGER","GROUP_MANAGER"].includes(f.role.toUpperCase())&&t.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Re(f),disabled:U,children:[t.jsx(hs,{className:"mr-2"}),"Edit"]}),t.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>Ke(f),disabled:U,children:[t.jsx(Nt,{className:"mr-2"}),"Delete"]})]})]}),t.jsx("div",{className:"border-b border-gray-200 mb-6"}),t.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview"].map(z=>t.jsx("button",{onClick:()=>G(z),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${O===z?"bg-[#5c636d] text-white border-white":"text-white hover:bg-[#5c636d]"}`,children:z},z))}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[t.jsx("div",{className:"lg:col-span-3",children:O==="Overview"&&t.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Email:"}),t.jsx("p",{children:f.email||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Role:"}),t.jsx("p",{children:kj(f.role,{size:"sm"})})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Status:"}),t.jsx("p",{children:f.is_active?"Active":"Inactive"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Auth Provider:"}),t.jsx("p",{children:f.auth_provider?f.auth_provider.toString().replace(/\b\w/g,z=>z.toUpperCase()):"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Phone Number:"}),t.jsx("p",{children:f.phone_number||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Company:"}),t.jsx("p",{children:f.company?.company_name||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Company Number:"}),t.jsx("p",{children:f.company?.company_number||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Related to CEO:"}),t.jsx("p",{children:f.manager?`${f.manager.first_name} ${f.manager.last_name}`:"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Created At:"}),t.jsx("p",{children:MD(f.created_at)||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Last Login:"}),t.jsx("p",{children:f.last_login?MD(f.last_login):"Never"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Profile Picture:"}),t.jsx("p",{children:f.profile_picture?t.jsx("a",{href:f.profile_picture,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline break-all",children:"View image"}):"N/A"})]})]})})}),t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),t.jsx("div",{className:"flex flex-col gap-2 w-full",children:t.jsxs("button",{type:"button",onClick:()=>{if(!f.email){alert("No email address available");return}const z=encodeURIComponent(f.email),ie=encodeURIComponent(""),ue=encodeURIComponent(""),M=`https://mail.google.com/mail/?view=cm&fs=1&to=${z}&su=${ie}&body=${ue}`;window.open(M,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[t.jsx(js,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]})})]}),t.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[t.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),t.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:K||(f.is_active?"Active":"Inactive"),onChange:z=>ae(z.target.value),children:[t.jsx("option",{value:"Active",children:"Active"}),t.jsx("option",{value:"Inactive",children:"Inactive"})]}),t.jsx("button",{onClick:we,disabled:R||K===(f.is_active?"Active":"Inactive"),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${R||K===(f.is_active?"Active":"Inactive")?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:R?"Updating...":"Update"})]})]})]})]})}):null;return t.jsxs(t.Fragment,{children:[V,pe,t.jsx(Y0e,{open:y,isEditing:w,isSubmitting:T,confirmProcessing:U,formData:j,onClose:je,onSubmit:et,onChange:re,onGeneratePassword:oe}),t.jsx(Q0e,{open:!!E,title:E?.title,message:E?.message,confirmLabel:E?.confirmLabel,cancelLabel:E?.cancelLabel,variant:E?.variant,loading:U,onConfirm:qe,onCancel:Ze})]})}function Y0e({open:e,isEditing:s,isSubmitting:a,confirmProcessing:n,formData:r,onClose:i,onSubmit:l,onChange:c,onGeneratePassword:d}){if(!e)return null;const m=a||n;return t.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-lg border border-gray-200 p-6 sm:p-8 relative overflow-y-auto max-h-[90vh]",children:[t.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:m,children:t.jsx(jt,{size:22})}),t.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-6 text-center",children:s?"Edit User":"Add New User"}),t.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:l,children:[t.jsx(rp,{label:"First Name",value:r.firstName,onChange:f=>c("firstName",f),placeholder:"John",required:!0,disabled:m}),t.jsx(rp,{label:"Last Name",value:r.lastName,onChange:f=>c("lastName",f),placeholder:"Doe",required:!0,disabled:m}),t.jsx(rp,{label:"Email",type:"email",value:r.email,onChange:f=>c("email",f),placeholder:"john.doe@company.com",required:!0,disabled:m||s}),t.jsx(rp,{label:"Role",type:"select",value:r.role,onChange:f=>c("role",f),options:[{value:"",label:"Select role"},...Vy],required:!0,disabled:m}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Password"}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[t.jsx("input",{type:"text",value:r.password,onChange:f=>c("password",f.target.value),placeholder:s?"Leave blank to keep current password":"Enter or generate password",required:!s,disabled:m,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"}),t.jsx("button",{type:"button",onClick:d,className:"flex items-center justify-center px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-60",disabled:m,children:"Generate"})]}),s?t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Setting a password will reset the user's credentials; leave it blank to keep the current password."}):t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long."})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 md:col-span-2 mt-4",children:[t.jsx("button",{type:"button",onClick:i,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:m,children:"Cancel"}),t.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:m,children:a?"Saving...":s?"Update User":"Save User"})]})]})]})})}function rp({label:e,type:s="text",value:a,onChange:n,placeholder:r,options:i=[],required:l=!1,disabled:c=!1}){return t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),s==="select"?t.jsx("select",{value:a??"",onChange:d=>n(d.target.value),required:l,disabled:c,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100",children:i.map(d=>t.jsx("option",{value:d.value,children:d.label},d.value))}):t.jsx("input",{type:s,value:a??"",onChange:d=>n(d.target.value),placeholder:r,required:l,disabled:c,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"})]})}function Q0e({open:e,title:s,message:a,confirmLabel:n,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:c,onCancel:d}){if(!e)return null;const m=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-black hover:bg-gray-800 border border-black";return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s}),t.jsx("div",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[t.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),t.jsx("button",{type:"button",onClick:c,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${m}`,disabled:l,children:l?"Processing...":n})]})]})})}function q0e(){return t.jsxs(mz,{children:[t.jsx(tF,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"colored",className:"z-[9999]"}),t.jsxs(BU,{children:[t.jsx(tt,{path:"/",element:t.jsx(sB,{})}),t.jsx(tt,{path:"/header",element:t.jsx(PM,{})}),t.jsx(tt,{path:"/signup",element:t.jsx(tV,{})}),t.jsx(tt,{path:"/login",element:t.jsx(aV,{})}),t.jsx(tt,{path:"/forgot-password",element:t.jsx(iV,{})}),t.jsxs(tt,{path:"/admin",element:t.jsx(gm,{requiredRole:"ceo",children:t.jsx(cV,{})}),children:[t.jsx(tt,{index:!0,element:t.jsx(bn,{to:"dashboard",replace:!0})}),t.jsx(tt,{path:"dashboard",element:t.jsx(bne,{})}),t.jsx(tt,{path:"accounts",element:t.jsx(wne,{})}),t.jsx(tt,{path:"contacts",element:t.jsx(Tne,{})}),t.jsx(tt,{path:"leads",element:t.jsx(Pne,{})}),t.jsx(tt,{path:"leads/:leadID",element:t.jsx(kI,{})}),t.jsx(tt,{path:"audit",element:t.jsx(Sre,{})}),t.jsx(tt,{path:"targets",element:t.jsx(Tre,{})}),t.jsx(tt,{path:"quotes",element:t.jsx($re,{})}),t.jsx(tt,{path:"users",element:t.jsx(Vre,{})}),t.jsx(tt,{path:"manage-account",element:t.jsx(qre,{})}),t.jsx(tt,{path:"deals",element:t.jsx(Xre,{})}),t.jsx(tt,{path:"deals/info",element:t.jsx(zI,{})}),t.jsx(tt,{path:"deals/quickaction",element:t.jsx(UI,{})}),t.jsx(tt,{path:"tasks",element:t.jsx(uoe,{})}),t.jsxs(tt,{path:"/admin/territory",children:[t.jsx(tt,{index:!0,element:t.jsx(Pk,{})}),t.jsx(tt,{path:":id",element:t.jsx(Pk,{})})]}),t.jsx(tt,{path:"calls",element:t.jsx($k,{})}),t.jsx(tt,{path:"calls/info",element:t.jsx($k,{})}),t.jsx(tt,{path:"meetings",element:t.jsx(Rk,{})}),t.jsx(tt,{path:"meetings/info",element:t.jsx(Rk,{})})]}),t.jsxs(tt,{path:"/sales",element:t.jsx(gm,{requiredRole:"sales",children:t.jsx(Poe,{})}),children:[t.jsx(tt,{index:!0,element:t.jsx(bn,{to:"overview",replace:!0})}),t.jsx(tt,{path:"overview",element:t.jsx(Ooe,{})}),t.jsx(tt,{path:"accounts",element:t.jsx(Goe,{})}),t.jsx(tt,{path:"contacts",element:t.jsx(Yoe,{})}),t.jsx(tt,{path:"leads",element:t.jsx(Joe,{})}),t.jsx(tt,{path:"leads/info",element:t.jsx(p$,{})}),t.jsx(tt,{path:"leads/convert",element:t.jsx(fce,{})}),t.jsx(tt,{path:"deals",element:t.jsx(hce,{})}),t.jsx(tt,{path:"deals/info",element:t.jsx(b$,{})}),t.jsx(tt,{path:"deals/quickaction",element:t.jsx(bce,{})}),t.jsx(tt,{path:"quotes",element:t.jsx(_ce,{})}),t.jsx(tt,{path:"targets",element:t.jsx(Lce,{})}),t.jsx(tt,{path:"audit",element:t.jsx(Pce,{})}),t.jsx(tt,{path:"manage-account",element:t.jsx(cx,{})}),t.jsx(tt,{path:"meetings",element:t.jsx(Hce,{})}),t.jsx(tt,{path:"calls",element:t.jsx(Qce,{})}),t.jsx(tt,{path:"tasks",element:t.jsx(Rce,{})}),t.jsxs(tt,{path:"hub/*",element:t.jsx($oe,{}),children:[t.jsx(tt,{index:!0,element:t.jsx(bn,{to:"mytasks",replace:!0})}),t.jsx(tt,{path:"activities",element:t.jsx(Roe,{})}),t.jsx(tt,{path:"mytasks",element:t.jsx(Uoe,{})}),t.jsx(tt,{path:"pipeline",element:t.jsx(zoe,{})}),t.jsx(tt,{path:"performance",element:t.jsx(Foe,{})})]})]}),t.jsxs(tt,{path:"/manager",element:t.jsx(gm,{requiredRole:"manager",children:t.jsx(ede,{})}),children:[t.jsx(tt,{index:!0,element:t.jsx(bn,{to:"dashboard",replace:!0})}),t.jsx(tt,{path:"dashboard",element:t.jsx(kde,{})}),t.jsx(tt,{path:"accounts",element:t.jsx(Pde,{})}),t.jsx(tt,{path:"contacts",element:t.jsx($de,{})}),t.jsx(tt,{path:"leads",element:t.jsx(Hde,{})}),t.jsx(tt,{path:"leads/info",element:t.jsx(_$,{})}),t.jsx(tt,{path:"leads/convert",element:t.jsx(Xde,{})}),t.jsx(tt,{path:"deals",element:t.jsx(Kde,{})}),t.jsx(tt,{path:"deals/info",element:t.jsx(T$,{})}),t.jsx(tt,{path:"deals/quickaction",element:t.jsx(sue,{})}),t.jsx(tt,{path:"quotes",element:t.jsx(cue,{})}),t.jsx(tt,{path:"targets",element:t.jsx(fue,{})}),t.jsx(tt,{path:"meetings",element:t.jsx(Pue,{})}),t.jsx(tt,{path:"audit",element:t.jsx(pue,{})}),t.jsx(tt,{path:"calls",element:t.jsx(Nue,{})}),t.jsx(tt,{path:"tasks",element:t.jsx(Aue,{})}),t.jsx(tt,{path:"users",element:t.jsx(Uue,{})}),t.jsx(tt,{path:"manage-account",element:t.jsx(cx,{})})]}),t.jsx(tt,{children:t.jsxs(tt,{path:"/marketing",element:t.jsx(gm,{requiredRole:"marketing",children:t.jsx(Hue,{})}),children:[t.jsx(tt,{index:!0,element:t.jsx(bn,{to:"dashboard",replace:!0})}),t.jsx(tt,{path:"dashboard",element:t.jsx(Fxe,{})}),t.jsx(tt,{path:"accounts",element:t.jsx(Bxe,{})}),t.jsx(tt,{path:"contacts",element:t.jsx(Gxe,{})}),t.jsx(tt,{path:"leads",element:t.jsx(Xxe,{})}),t.jsx(tt,{path:"leads/info",element:t.jsx(N6,{})}),t.jsx(tt,{path:"leads/convert",element:t.jsx(v6,{})}),t.jsx(tt,{path:"tasks",element:t.jsx(epe,{})}),t.jsx(tt,{path:"campaigns",element:t.jsx(ape,{})}),t.jsx(tt,{path:"templates",element:t.jsx(rpe,{})}),t.jsx(tt,{path:"manage-account",element:t.jsx(cx,{})})]})}),t.jsxs(tt,{path:"/group-manager",element:t.jsx(gm,{requiredRole:"group manager",children:t.jsx(lpe,{})}),children:[t.jsx(tt,{index:!0,element:t.jsx(bn,{to:"dashboard",replace:!0})}),t.jsx(tt,{path:"dashboard",element:t.jsx(Rpe,{})}),t.jsx(tt,{path:"accounts",element:t.jsx(Bpe,{})}),t.jsx(tt,{path:"contacts",element:t.jsx(Vpe,{})}),t.jsx(tt,{path:"leads",element:t.jsx(Kpe,{})}),t.jsx(tt,{path:"leads/info",element:t.jsx(T6,{})}),t.jsx(tt,{path:"leads/convert",element:t.jsx(n0e,{})}),t.jsx(tt,{path:"deals",element:t.jsx(r0e,{})}),t.jsx(tt,{path:"deals/info",element:t.jsx(E6,{})}),t.jsx(tt,{path:"deals/quickaction",element:t.jsx(Ry,{})}),t.jsx(tt,{path:"quotes",element:t.jsx(x0e,{})}),t.jsx(tt,{path:"targets",element:t.jsx(v0e,{})}),t.jsx(tt,{path:"tasks",element:t.jsx(T0e,{})}),t.jsx(tt,{path:"meetings",element:t.jsx(D0e,{})}),t.jsx(tt,{path:"calls",element:t.jsx($0e,{})}),t.jsx(tt,{path:"audit",element:t.jsx(B0e,{})}),t.jsx(tt,{path:"users",element:t.jsx(W0e,{})}),t.jsx(tt,{path:"manage-account",element:t.jsx(cx,{})})]})]})]})}X7.createRoot(document.getElementById("root")).render(t.jsx(g.StrictMode,{children:t.jsx(q0e,{})}));
